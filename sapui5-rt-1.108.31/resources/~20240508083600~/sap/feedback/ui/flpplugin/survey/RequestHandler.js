/*!
 * SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/Log","sap/ui/core/EventBus","../utils/Constants","../utils/Utils"],function(e,a,i,t,r){"use strict";return e.extend("sap.feedback.ui.flpplugin.survey.RequestHandler",{_fnOnRequestReceivedCallback:null,init:function(e){if(!e){throw Error("fnOnRequestReceivedCallback is not provided!")}this._fnOnRequestReceivedCallback=e;var a=sap.ui.getCore().getEventBus();a.subscribe("sap.feedback","inapp.feature",this._onFeatureEventBusFired,this)},_onFeatureEventBusFired:function(e,i,r){r.type=t.E_PUSH_SRC_TYPE.pushInApp;try{if(this._fnOnRequestReceivedCallback&&this._isValidEventData(r)){this._fnOnRequestReceivedCallback(r)}}catch(e){a.error("Push message could not be processed.",e.message,t.S_PLUGIN_SURVEY_REQ_HANDLER_NAME)}},_isValidEventData:function(e){if(e.hasOwnProperty("areaId")&&e.hasOwnProperty("triggerName")){var i=e.areaId;var s=e.triggerName;var n=e.payload;if(!r.isString(i)||r.stringIsEmpty(i)){a.error("Event Payload data is invalid - Area ID is invalid",i,t.S_PLUGIN_SURVEY_REQ_HANDLER_NAME);return false}if(!r.isString(s)||r.stringIsEmpty(s)){a.error("Event Payload data is invalid - Trigger Name is invalid",s,t.S_PLUGIN_SURVEY_REQ_HANDLER_NAME);return false}if(n&&!r.isObject(n)){a.error("Event Payload data is invalid - Payload is invalid",n,t.S_PLUGIN_SURVEY_REQ_HANDLER_NAME);return false}}else{a.error("Event Payload data is invalid: Area ID: "+e.areaId+" Trigger Name: "+e.triggerName+"",null,t.S_PLUGIN_SURVEY_REQ_HANDLER_NAME);return false}return true},unsubscribeFromTheEventBusForTesting:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("sap.feedback","inapp.feature",this._onFeatureEventBusFired,this)}})});
//# sourceMappingURL=RequestHandler.js.map