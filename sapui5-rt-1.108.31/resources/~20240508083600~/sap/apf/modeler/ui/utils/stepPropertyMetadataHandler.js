/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/constants"],function(e){"use strict";var t=function(e,t){this.oCoreApi=e;this.oStep=t};function r(e,t,r){var o=[],i;var a=t.oStep.getSelectProperties();a.forEach(function(a){if(t.getPropertyMetadata(e,a)){i=t.getPropertyMetadata(e,a)["aggregation-role"];if(i===r){o.push(a)}}});return o}t.prototype.getEntityTypeMetadataAsPromise=function(){var e=this.oStep.getService();var t=this.oStep.getEntitySet();return this.oCoreApi.getEntityTypeMetadataAsPromise(e,t)};t.prototype.getFilterMappingEntityTypeMetadataAsPromise=function(e,t){return this.oCoreApi.getEntityTypeMetadataAsPromise(e,t)};t.prototype.getDimensionsProperties=function(t){return r(t,this,e.aggregationRoles.DIMENSION)};t.prototype.getMeasures=function(t){return r(t,this,e.aggregationRoles.MEASURE)};t.prototype.getProperties=function(){return this.oStep.getSelectProperties()};t.prototype.getHierarchicalProperty=function(){return this.oStep.getHierarchyProperty()};t.prototype.getPropertyMetadata=function(e,t){if(!e){return undefined}return e.getPropertyMetadata(t)};t.prototype.getDefaultLabel=function(e,t){var r=this;var o=r.getPropertyMetadata(e,t);if(!o){return""}return o.label||o.name};t.prototype.hasTextPropertyOfDimension=function(e,t){var r=false,o,i=this;var a=i.getPropertyMetadata(e,t);if(!a){return r}if(a.text){o=this.oStep.getSelectProperties();r=o.indexOf(a.text)===-1?false:true}return r};t.prototype.getRepresentationTypesArray=function(){var e=[],t=this;if(t.oStep.getType()==="hierarchicalStep"){e.push({key:"TreeTableRepresentation",name:t.oCoreApi.getText("TreeTableRepresentation")})}else{t.oCoreApi.getRepresentationTypes().forEach(function(r){if(r.metadata){if(r.id!=="TreeTableRepresentation"){e.push({key:r.id,name:t.oCoreApi.getText(r.label.key)})}}})}return e};t.prototype.getStepType=function(){return this.oStep.getType()};sap.apf.modeler.ui.utils.StepPropertyMetadataHandler=t;return t},true);
//# sourceMappingURL=stepPropertyMetadataHandler.js.map