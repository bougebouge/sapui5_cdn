sap.ui.define(["sap/apf/modeler/ui/controller/overwriteExistingConfiguration","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/optionsValueModelBuilder","sap/ui/thirdparty/jquery"],function(e,t,i,jQuery){"use strict";var o,a,n;var t=sap.apf.modeler.ui.utils.nullObjectChecker;var i=sap.apf.modeler.ui.utils.optionsValueModelBuilder;function r(e){var t=o.getText;e.byId("idImportDeliveredContentDialog").setTitle(t("importDeliveredContent"));e.byId("idConfigLabel").setText(t("configuration"));e.byId("idAppConfigCombobox").setPlaceholder(t("configFileInputPlaceHolder"));e.byId("idImportOfConfig").setText(t("import"));e.byId("idCancelImportOfConfig").setText(t("cancel"))}function l(e){var t,a,n;a=o.readAllConfigurationsFromVendorLayer();a.then(function(a){n={applicationText:o.getText("application"),configurationText:o.getText("configuration")};a=[n].concat(a);t=i.prepareModel(a);var r=e.byId("idAppConfigCombobox");r.setModel(t);r.getItems()[0].setEnabled(false);e.byId("idImportDeliveredContentDialog").open()})}function d(e,t,i,a){var r=new sap.ui.core.CustomData({value:{callbackOverwrite:t,callbackCreateNew:i}});n=sap.ui.xmlfragment("idOverwriteConfirmationFragment","sap.apf.modeler.ui.fragment.overwriteConfirmation",e);e.getView().addDependent(n);e.setOverwriteConfirmationDialogText(o.getText);n.removeAllCustomData();n.addCustomData(r);sap.ui.core.Fragment.byId("idOverwriteConfirmationFragment","idNewConfigTitleInput").setValue(a);n.open()}function p(e){var t=e.byId("idImportDeliveredContentDialog");if(n&&n.isOpen()){e.handleCancelOfOverwriteDialog()}if(t&&t.isOpen()){e.handleCancelOfImportDialog()}}function f(e,i,n){var r=this;if(!t.checkIsNotUndefined(n)){a.fireEvent("updateAppListEvent");var l=o.createMessageObject({code:"11515"});o.putMessage(l)}else{var l=o.createMessageObject({code:"11502"});l.setPrevious(n);o.putMessage(l)}p(r)}return e.extend("sap.apf.modeler.ui.controller.importDeliveredContent",{onInit:function(){var e=this;o=e.getView().getViewData().oCoreApi;a=e.getView().getViewData().oParentControl;r(e);l(e)},handleChangeOfAppConfigTextField:function(){var e=this,t,i;i=e.byId("idAppConfigCombobox");t=i.getItems().filter(function(e){return e.getText()===i.getValue()});if(!t.length){jQuery(i).focus();jQuery(".appCofigCombo").find("input").focus();i.setValueState(sap.ui.core.ValueState.Error)}},handleSelectionChangeOfAppConfigTextField:function(){var e=this;e.byId("idAppConfigCombobox").setValueState(sap.ui.core.ValueState.None)},handleImportPress:function(){var e=this;var i=e.byId("idAppConfigCombobox");e.handleChangeOfAppConfigTextField();if(t.checkIsNotNullOrUndefinedOrBlank(i.getSelectedItem())){var a=i.getSelectedItem().data("value").split(".");var n=a[0];var r=a[1];o.importConfigurationFromVendorLayer(n,r,function(t,i,o){d(e,t,i,o)},f.bind(e))}},handleCancelOfImportDialog:function(){var e=this;e.getView().destroy()}})});
//# sourceMappingURL=importDeliveredContent.controller.js.map