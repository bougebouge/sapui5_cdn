sap.ui.define(["sap/apf/modeler/ui/controller/propertyType","sap/apf/modeler/ui/utils/textManipulator","sap/apf/utils/utils","sap/ui/thirdparty/jquery"],function(e,t,r,jQuery){"use strict";var o=sap.apf.modeler.ui.utils.textManipulator;return e.extend("sap.apf.modeler.ui.controller.representationProperty",{onBeforeRendering:function(){var e=this;if(e.byId("idLabelDisplayOptionType")){e.byId("idLabelDisplayOptionType").destroy()}e.byId("idPropertyTypeLayout").setSpan("L4 M4 S4")},getAllPropertiesAsPromise:function(){var e=this,t,r,a=[];var n=e.oStepPropertyMetadataHandler.oStep;var i=jQuery.Deferred();n.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(n){n.consumable.forEach(function(t){e.oStepPropertyMetadataHandler.getProperties().forEach(function(e){if(t===e){a.push(t)}})});t=e.getSelectedProperty();if(t!==e.oTextReader("none")&&t!==undefined){r=a.indexOf(t)!==-1?a:a.concat(t);if(n.available.indexOf(t)!==-1||t===e.oTextReader("none")){a=r}else{a=a.concat(o.addPrefixText([t],e.oTextReader));t=o.addPrefixText([t],e.oTextReader)[0]}}if(e.oStepPropertyMetadataHandler.getStepType()==="hierarchicalStep"){a.splice(0,0,e.oTextReader("none"))}i.resolve({aAllProperties:a,sSelectedKey:t})});return i.promise()},getPropertyTextLabelKey:function(e){var t=this;return t.oRepresentation.getPropertyTextLabelKey(e)},updatePropertiesInConfiguration:function(e){var t=this;t.oRepresentation.getProperties().forEach(function(e){t.oRepresentation.removeProperty(e)});e.forEach(function(e){t.oRepresentation.addProperty(e.sProperty);t.oRepresentation.setPropertyKind(e.sProperty,e.sKind);t.oRepresentation.setPropertyTextLabelKey(e.sProperty,e.sTextLabelKey)})},createNewPropertyInfoAsPromise:function(e){var t=this,r={};r.sProperty=e;r.sKind=t.getView().getViewData().oPropertyTypeData.sContext;r.sTextLabelKey=undefined;return sap.apf.utils.createPromise(r)},setPropertyTextLabelKey:function(e,t){var r=this;r.oRepresentation.setPropertyTextLabelKey(e,t)},setNextPropertyInParentObject:function(){var e=this;e.updateOfConfigurationObjectAsPromise().then(function(){e.setDetailData()})},removePropertyFromParentObject:function(){var e=this;e.oRepresentation.removeProperty(o.removePrefixText(e.byId("idPropertyType").getSelectedKey(),e.oTextReader(sap.apf.modeler.ui.utils.CONSTANTS.texts.NOTAVAILABLE)))},addPropertyAsPromise:function(){var e=this,t=[];var r=e.oStepPropertyMetadataHandler.oStep;var o=sap.apf.modeler.ui.utils.CONSTANTS;r.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(r){r.consumable.forEach(function(r){e.oStepPropertyMetadataHandler.getProperties().forEach(function(e){if(r===e){t.push(r)}})});e.getView().fireEvent(o.events.ADDPROPERTY,{sProperty:t[0],sContext:e.getView().getViewData().oPropertyTypeData.sContext});e.oConfigurationEditor.setIsUnsaved()})}})});
//# sourceMappingURL=representationProperty.controller.js.map