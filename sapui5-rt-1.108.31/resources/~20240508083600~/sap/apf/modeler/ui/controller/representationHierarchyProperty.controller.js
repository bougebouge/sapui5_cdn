sap.ui.define(["sap/apf/modeler/ui/controller/propertyType","sap/apf/core/constants","sap/apf/modeler/ui/utils/treeTableDisplayOptionsValueBuilder","sap/apf/modeler/ui/utils/textManipulator","sap/ui/thirdparty/jquery"],function(e,t,r,a,jQuery){"use strict";var o=sap.apf.modeler.ui.utils.textManipulator;function i(e,t){var r;var a=t.oStepPropertyMetadataHandler.oStep.getService();var o=t.oStepPropertyMetadataHandler.oStep.getEntitySet();var i=t.oStepPropertyMetadataHandler.oStep.getHierarchyProperty();t.oConfigurationEditor.getHierarchyNodeIdAsPromise(a,o,i).done(function(a){r=t.oStepPropertyMetadataHandler.hasTextPropertyOfDimension(e,a)});return r}return e.extend("sap.apf.modeler.ui.controller.representationHierarchyProperty",{onBeforeRendering:function(){var e=this;e.byId("idPropertyType").setEnabled(false)},setLabelDisplayOptionTypeAsPromise:function(e){var t=jQuery.Deferred();var r,a,n,p,s=this,l=[];r=new sap.apf.modeler.ui.utils.TreeTableDisplayOptionsValueBuilder(s.oTextReader,e);a=sap.apf.core.constants.representationMetadata.labelDisplayOptions;p=s.oRepresentation.getHierarchyPropertyLabelDisplayOption();n=r.getLabelDisplayOptions();s.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(e){if(p===a.TEXT&&!i(e,s)){n=r.getValidatedLabelDisplayOptions();l=o.addPrefixText([p],s.oTextReader);p=l[0]}s.byId("idLabelDisplayOptionType").setModel(n);s.byId("idLabelDisplayOptionType").setSelectedKey(p);t.resolve()});return t.promise()},changeLabelDisplayOption:function(e){var t=this;t.oRepresentation.setHierarchyPropertyLabelDisplayOption(e)},getAllPropertiesAsPromise:function(){var e=this,t,r,a=[];var i=e.oStepPropertyMetadataHandler.oStep;var n=jQuery.Deferred();i.getConsumablePropertiesForRepresentation(e.oRepresentation.getId()).done(function(i){i.available.forEach(function(t){if(t===e.oStepPropertyMetadataHandler.getHierarchicalProperty()){a.push(t)}});t=e.getSelectedProperty();if(t!==undefined){r=a.indexOf(t)!==-1?a:a.concat(t);if(i.available.indexOf(t)!==-1){a=r;t=t}else{a=a.concat(o.addPrefixText([t],e.oTextReader));t=o.addPrefixText([t],e.oTextReader)[0]}}n.resolve({aAllProperties:a,sSelectedKey:t})});return n.promise()},enableDisableLabelDisplayOptionTypeAsPromise:function(){var e,t=this;var r=jQuery.Deferred();var a=t.byId("idLabelDisplayOptionType");t.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(o){var n=i(o,t);for(e=0;e<a.getItems().length;e++){a.getItems()[e].setEnabled(true);if(e>0&&!n){a.getItems()[e].setEnabled(false)}}r.resolve()});return r.promise()},getPropertyTextLabelKey:function(){var e=this;return e.oRepresentation.getHierarchyPropertyTextLabelKey()},setPropertyTextLabelKey:function(e,t){var r=this;r.oRepresentation.setHierarchyPropertyTextLabelKey(t)},setNextPropertyInParentObject:function(){return},removePropertyFromParentObject:function(){return},setFocusOnAddRemoveIcons:function(){return}})});
//# sourceMappingURL=representationHierarchyProperty.controller.js.map