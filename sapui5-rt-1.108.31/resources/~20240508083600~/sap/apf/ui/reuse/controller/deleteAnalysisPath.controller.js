/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/m/Dialog","sap/m/DialogType","sap/m/Text","sap/m/Button","sap/ui/model/json/JSONModel","sap/ui/core/mvc/Controller"],function(e,t,o,i,a,s){"use strict";return s.extend("sap.apf.ui.reuse.controller.deleteAnalysisPath",{onInit:function(){this.oCoreApi=this.getView().getViewData().oInject.oCoreApi;this.oUiApi=this.getView().getViewData().oInject.uiApi;this.oSerializationMediator=this.getView().getViewData().oInject.oSerializationMediator},openPathGallery:function(){var e=new a;e.setData(this.getView().getViewData().jsonData);this.oDialog=this.getView().getContent()[0];this.oDialog.getContent()[0].setModel(e);this.oDialog.setInitialFocus(this.oDialog);this.oDialog.open()},handleDeleteOfDialog:function(e){var t=e.getParameter("listItem").getProperty("title");var o={item:e.getParameter("listItem"),list:this.getView().getContent()[0].getContent()[0],guid:this.getGuidForPath(t,this.getView().getViewData().jsonData.GalleryElements),sPathName:t};this.openConfirmDelDialog(o)},getGuidForPath:function(e,t){var o;for(o=0;o<t.length;o++){var i=t[o];if(i.AnalysisPathName===e){return i.guid}}},deleteSavedPath:function(e,t){var o=this;var i=t.guid;var a=e;var s;var n=o.oUiApi.getLayoutView().getController().oSavedPathName.getText();o.oSerializationMediator.deletePath(i,function(e,i,n){if(n===undefined&&typeof e==="object"){t.list.removeItem(t.item);t.list.rerender();o.oCoreApi.readPaths(function(e,t,i){if(i===undefined&&typeof e==="object"){var n=e.paths.length;if(n===0){jQuery(".pathText").removeClass("pathTextDontShow");jQuery(".pathText").addClass("pathTextShow")}}else{s=o.oCoreApi.createMessageObject({code:"6005",aParameters:[a]});s.setPrevious(i);o.oCoreApi.putMessage(s)}})}else{s=o.oCoreApi.createMessageObject({code:"6009",aParameters:[a]});s.setPrevious(n);o.oCoreApi.putMessage(s)}});if(o.oCoreApi.isDirty()){n=n.substring(1)}if(n===a){o.oUiApi.getAnalysisPath().getToolbar().getController().resetAnalysisPath()}},openConfirmDelDialog:function(a){var s=this;var n=a.sPathName;var r=(new o).addStyleClass("textStyle");r.setText(s.oCoreApi.getTextNotHtmlEncoded("do-you-want-to-delete-analysis-path",["'"+n+"'"]));s.delConfirmDialog=new e({type:t.Standard,title:s.oCoreApi.getTextNotHtmlEncoded("delPath"),content:r,beginButton:new i({text:s.oCoreApi.getTextNotHtmlEncoded("yes"),press:function(){s.deleteSavedPath(n,a);s.delConfirmDialog.close()}}),endButton:new i({text:s.oCoreApi.getTextNotHtmlEncoded("no"),press:function(){s.delConfirmDialog.close()}}),afterClose:function(){s.oUiApi.getLayoutView().setBusy(false);s.delConfirmDialog.destroy()}});if(sap.ui.Device.system.desktop){s.delConfirmDialog.addStyleClass("sapUiSizeCompact")}s.delConfirmDialog.open()}})});
//# sourceMappingURL=deleteAnalysisPath.controller.js.map