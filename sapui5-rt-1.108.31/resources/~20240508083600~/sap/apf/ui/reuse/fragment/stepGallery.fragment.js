/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
(function(){"use strict";sap.ui.jsfragment("sap.apf.ui.reuse.fragment.stepGallery",{createContent:function(e){var t=this;this.contentWidth=jQuery(window).height()*.6+"px";this.contentHeight=jQuery(window).height()*.6+"px";this.oCoreApi=e.oCoreApi;this.oUiApi=e.oUiApi;var a=function(e){var a=[];var n=e.getSource().getValue();var i=t.oStepGalleryHierarchicalDialog.getContent()[0].getCurrentPage().getContent()[0];if(n&&n.length>0){var r=new sap.ui.model.Filter("title",sap.ui.model.FilterOperator.Contains,n);a.push(r)}var o=i.getBinding("items");o.filter(a)};var n=function(a){t.oUiApi.getLayoutView().setBusy(true);var n=a.getSource().getBindingContext().sPath.split("/");var i=n[2];var r=n[4];var o=n[6];var l=e.getStepDetails(i,r);e.onStepPress(l.id,l.representationtypes[o].representationId)};var i=(new sap.m.List).bindItems({path:"representationtypes",template:new sap.m.StandardListItem({title:"{title}",icon:"{picture}",tooltip:"{title}",type:"Active",wrapping:true,press:n}).bindProperty("description","sortDescription",function(e){var a=[];if(e===undefined||e===null){return null}a=e.length?e.join(", "):e;return t.oCoreApi.getTextNotHtmlEncoded("sortBy")+": "+a})});var r=new sap.m.Page({id:this.createId("idStepGalleryRepresentationPage"),subHeader:new sap.m.Bar({contentLeft:[new sap.m.SearchField({liveChange:a})]}).addStyleClass("searchMargin"),content:i,showNavButton:true,navButtonPress:function(){t.oStepGalleryNavContainer.back()}});var o=(new sap.m.List).bindItems({path:"stepTemplates",template:new sap.m.StandardListItem({title:"{title}",tooltip:"{title}",type:"Navigation",press:function(e){var a=e.getSource().getBindingContext();r.setBindingContext(a);r.setTitle(e.getSource().getTitle());t.oStepGalleryNavContainer.to(t.oStepGalleryNavContainer.getPages()[2])}})});var l=new sap.m.Page({id:this.createId("idStepGalleryStepPage"),subHeader:new sap.m.Bar({contentLeft:[new sap.m.SearchField({liveChange:a})]}).addStyleClass("searchMargin"),content:o,showNavButton:true,navButtonPress:function(){t.oStepGalleryNavContainer.back()}});var s=(new sap.m.List).bindItems({path:"/GalleryElements",template:new sap.m.StandardListItem({title:"{title}",tooltip:"{title}",type:"Navigation",press:function(e){var a=e.getSource().getBindingContext();l.setBindingContext(a);l.setTitle(e.getSource().getTitle());t.oStepGalleryNavContainer.to(t.oStepGalleryNavContainer.getPages()[1])}})});var p=new sap.m.Page({id:this.createId("idStepGalleryCategoryPage"),title:t.oCoreApi.getTextNotHtmlEncoded("category"),tooltip:t.oCoreApi.getTextNotHtmlEncoded("category"),subHeader:new sap.m.Bar({contentLeft:[new sap.m.SearchField({liveChange:a})]}).addStyleClass("searchMargin"),content:s});this.oStepGalleryNavContainer=new sap.m.NavContainer({pages:[p,l,r]});this.oStepGalleryNavContainer.setModel(e.getView().getModel());this.oStepGalleryHierarchicalDialog=new sap.m.Dialog({contentWidth:t.contentWidth,contentHeight:t.contentHeight,showHeader:false,content:[this.oStepGalleryNavContainer],endButton:new sap.m.Button({text:t.oCoreApi.getTextNotHtmlEncoded("cancel"),press:function(){t.oStepGalleryHierarchicalDialog.close();t.oStepGalleryHierarchicalDialog.destroy()}}),afterClose:function(){t.oStepGalleryHierarchicalDialog.destroy()}});return this.oStepGalleryHierarchicalDialog}})})();
//# sourceMappingURL=stepGallery.fragment.js.map