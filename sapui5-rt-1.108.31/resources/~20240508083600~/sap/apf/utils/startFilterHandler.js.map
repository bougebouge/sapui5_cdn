{"version":3,"file":"startFilterHandler.js","names":["sap","ui","define","UtilsFilter","CoreFilter","OriginalStartFilter","utils","StartFilterHandler","inject","startFilters","isLevel","StartFilter","constructors","restrictionsSetByApplicationBeforeInit","restrictionsSetByApplication","restrictionsInitiallySetByApplication","restrictionsBuffer","msgH","instances","messageHandler","deferredStartFilters","jQuery","Deferred","initializationPromise","isInitialized","propagationPromise","numberOfRestrictions","numberOfInitializedRestrictions","initializeForRestrictionsDeferred","restrictionsSetDeferred","this","getStartFilters","initialize","done","resolve","getVisibleStartFilters","promise","setRestrictionByProperty","filter","internalFilter","getInternalFilter","propertyName","getProperties","isNewStartFilterRequired","forEach","startFilter","getPropertyName","isDisjunctionOverEqualities","isSetInititally","state","setSelectedValues","getListFromFilter","setContext","unshift","multiSelection","property","invisible","notConfigured","functions","getFacetFilterConfigurations","length","buildRestrictiveFilters","getMinusOneLevelFilters","serialize","triggerPropagation","getRestrictionByProperty","getCumulativeFilter","deferred","result","numberOfStartFilters","selectedValues","restrictions","disjointTerms","type","isArray","value","addOr","addAnd","isNavigation","keepInitialStartFilterValues","restrictedProperty","serializedStartFilterHandler","serializedStartFilter","push","deserialize","externalFilter","i","len","resetAll","initiallyRestrictedProperty","reset","resetVisibleStartFilters","indexFirstConfiguredStartFilter","setRestriction","onBeforeApfStartupPromise","getReducedCombinedContext","externalContextFilter","facetFilterConfigurations","externalContextProperties","numberOfExternalContextProperties","filterPropertyToBeMerged","config","contextValues","createContextForStartFilter","isPropertyTypeWithDateSemantics","metadataProperty","convertDateListToInternalFormat","splice","indexOf","setRestrictionsOnConfiguredFilters","registerGetSelectedValuesPromises","getConfiguredStartFilters","getSelectedValues","onGetSelectedValues","values","startFilterIndex","filterSelectedValues","isEmpty","copy","isOr","getFilterTerms","term","getValue","termsForProperty","getFilterTermsForProperty","reducedFilter","restrictToProperties","toUrlParam","getOp","visibleStartFilters","isVisible","levelFound","configuredStartFilters","realStartFilters","minusOneLevelFilters","setRestrictions","restrictiveFilter","cumulativeFilter","propagateResolvedSelectionAsRestriction","index","filters","restriction","apf"],"sources":["startFilterHandler-dbg.js"],"mappings":"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"}