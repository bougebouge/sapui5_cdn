/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/utils/utils","sap/apf/core/metadataProperty"],function(e,t){"use strict";var r=function(r,a){this.type="metadataFacade";var i=r.instances.messageHandler;var n=r.instances.metadataFactory;var o;var s;var f={};this.getAllProperties=function(t){var r;var a;var s=0;var f;var u=[];if(o){t(o)}else{r=c();a=r.length;for(f=0;f<a;f++){n.getMetadata(r[f]).done(v)}}function v(r){s++;u=u.concat(r.getAllProperties());if(a==s){o=e.eliminateDuplicatesInArray(i,u);t(o)}}};this.getAllParameterEntitySetKeyProperties=function(e){var t;var r;var a=0;var o;var f=[];if(s){e(s)}else{t=c();r=t.length;for(o=0;o<r;o++){n.getMetadata(t[o]).done(u)}}function u(t){a++;f=f.concat(t.getParameterEntitySetKeyPropertiesForService());if(r==a){s=sap.apf.utils.eliminateDuplicatesInArray(i,f);e(s)}}};this.getPropertyMetadataByEntitySet=function(e,r,a){var i=jQuery.Deferred();n.getMetadata(e).done(function(e){var n=e.getPropertyMetadata(r,a);i.resolve(new t.constructor(n))});return i.promise()};this.getProperty=function(e){var r;var a;var i;var o=jQuery.Deferred();if(f[e]){o.resolve(f[e])}else{r=c();i=r.length;for(var s=0;s<i;s++){n.getMetadata(r[s]).done(function(r){a=r.getAttributes(e);if(a.name){if(r.getParameterEntitySetKeyPropertiesForService().indexOf(e)>-1){a.isParameterEntitySetKeyProperty=true}if(r.getAllKeys().indexOf(e)>-1){a.isKey=true}for(var i in a){if(i==="dataType"){for(var n in a.dataType){a[n]=a.dataType[n]}}}f[e]=new t.constructor(a);o.resolve(f[e])}})}}return o.promise()};function c(){if(typeof a==="string"){return[a]}return n.getServiceDocuments()}};sap.apf.core.MetadataFacade=r;return r},true);
//# sourceMappingURL=metadataFacade.js.map