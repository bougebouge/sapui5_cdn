// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/resources","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/ODataService"],function(t,e,jQuery,a,n,i,r){"use strict";return function(){function n(e){var a;if(e&&!t(e)){a=JSON.stringify(e);return a.replace(/\{|\}|\\n|,/g,"\n")}return""}this.createTicket=function(t){var s,u="/sap/opu/odata/UI2/INTEROP/",c="Messages",o,l,p,g,b=sap.ushell.Container;if(!t.text){throw new a.Error("Support Ticket data does not contain text member")}o=e.get("clientContext.navigationData.applicationInformation.url",t);l=e.get("clientContext.navigationData.navigationHash",t);p=e.get("clientContext.navigationData.tileDebugInfo",t);o=typeof o==="string"?o:"";l=typeof l==="string"?l:"";p=typeof p==="string"&&p.length>0?JSON.parse(p).catalogId||"":"";t.text=t.text.trim();t.subject=t.subject.trim();if(t.subject.length>40){t.text=t.subject+"\n"+t.text;t.subject=t.subject.substring(0,40).slice(0,-3)+"..."}t.url=o;t.catalogId=p;t.hash=l;t.clientContext=n(t.clientContext);s=new jQuery.Deferred;var f={baseUrl:u,"sap-language":b.getUser().getLanguage(),"sap-client":b.getLogonSystem().getClient()};g=new i.createODataWrapper(f);r.call(this,g,function(){return false});g.create(c,t,function(t){s.resolve(t.messageNumber)},function(t){s.reject(t)});return s.promise()}}},true);
//# sourceMappingURL=SupportTicketAdapter.js.map