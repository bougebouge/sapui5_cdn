// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/Config","sap/base/Log","sap/ushell/library"],function(e,t,n){"use strict";var r=n.ContentNodeType;var a=function(){};a.prototype.isMenuEnabled=function(){var t=e.last("/core/menu/enabled");var n=this._getAssignedSpaces().length;return Promise.resolve(t&&n>0)};a.prototype.getMenuEntries=function(){var t=e.last("/core/homeApp/enabled");var n=e.last("/core/spaces/myHome/enabled");var r=e.last("/core/spaces/myHome/userEnabled");var a=e.last("/core/spaces/myHome/myHomeSpaceId");var i=this._getAssignedSpaces();if(t&&n||n&&!r){for(var s=0;s<i.length;s++){if(i[s].id===a){i=i.slice(1);break}}}var o=this._buildMenuEntries(i);return Promise.resolve(o)};a.prototype.getContentNodeEntries=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildMenuEntries(e);return Promise.resolve(t)};a.prototype.getContentNodes=function(){var e=this._getAssignedSpaces();this._removeMyHomeForContentNodes(e);var t=this._buildContentNodes(e);return Promise.resolve(t)};a.prototype._buildMenuEntries=function(e){var t=e.filter(this._isSpaceNotEmpty.bind(null,"FLP menu")).map(function(e){var t={title:e.title||e.id,"help-id":"Space-"+e.id,description:e.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.id},{name:"pageId",value:e.pages[0].id}],innerAppRoute:undefined},menuEntries:[]};var n=e.pages.map(function(t){return{title:t.title||t.id,"help-id":"Page-"+t.id,description:t.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:e.id},{name:"pageId",value:t.id}],innerAppRoute:undefined},menuEntries:[]}});if(n.length>1){t.menuEntries=n}return t});return t};a.prototype._buildContentNodes=function(e){var t=e.filter(this._isSpaceNotEmpty.bind(null,"content nodes")).map(function(e){return{id:e.id,label:e.title||e.id,type:r.Space,isContainer:false,children:e.pages.map(function(e){return{id:e.id,label:e.title||e.id,type:r.Page,isContainer:true}})}});return t};a.prototype._isSpaceNotEmpty=function(e,n){if(!n.pages||n.pages.length===0){t.warning("FLP space "+n.id+" without page omitted in "+e+".","","sap.ushell_abap.adapters.abap.MenuAdapter");return false}return true};a.prototype._removeMyHomeForContentNodes=function(t){var n=e.last("/core/homeApp/enabled");var r=e.last("/core/spaces/myHome/enabled");var a=e.last("/core/spaces/myHome/userEnabled");var i=e.last("/core/spaces/myHome/myHomeSpaceId");if(n){return}if(r&&!a){if(t[0]&&t[0].id===i){t.shift()}}};a.prototype._getAssignedSpaces=function(){var e=document.querySelector("meta[name='sap.ushell.assignedSpaces']");if(!e){return[]}var t=JSON.parse(e.getAttribute("content"));return t};return a},true);
//# sourceMappingURL=MenuAdapter.js.map