// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ushell_abap/pbServices/ui2/ODataWrapper","sap/ushell_abap/pbServices/ui2/Error","sap/ushell_abap/pbServices/ui2/ODataService"],function(e,jQuery,a,r,t,p,s){"use strict";var o=function(a,r,o){this._oConfig=o&&o.config;var n=(e.get("services.appState.baseUrl",o)||"/sap/opu/odata/UI2/INTEROP")+"/";var i={baseUrl:n,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=t.createODataWrapper(i);function u(e){throw new p(e,"sap.ushell_abap.adapters.abap.AppStateAdapter")}s.call(this,this._oWrapper,u)};o.prototype.saveAppState=function(e,r,t,p,s){var o=new jQuery.Deferred,n="GlobalContainers",i={id:e,sessionKey:r,component:s,appName:p,value:t};this._oWrapper.create(n,i,function(){o.resolve()},function(e){o.reject(e);a.error(e)});return o.promise()};o.prototype.loadAppState=function(e){var t=new jQuery.Deferred,p="GlobalContainers(id='"+encodeURIComponent(e)+"')";if(!e){throw new r.Error("The sKey is mandatory to read the data from the persistence layer")}this._oWrapper.openBatchQueue();this._oWrapper.read(p,function(e){t.resolve(e.id,e.value)},function(e){a.error(e);t.reject(e)},false);this._oWrapper.submitBatchQueue(function(){},function(e){a.error(e);t.reject(e)});return t.promise()};return o},true);
//# sourceMappingURL=AppStateAdapter.js.map