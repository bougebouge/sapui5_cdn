/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/merge", "sap/fe/core/converters/helpers/IssueManager", "./ConverterContext", "./ManifestSettings", "./MetaModelConverter", "./templates/ListReportConverter", "./templates/ObjectPageConverter"], function (merge, IssueManager, ConverterContext, ManifestSettings, MetaModelConverter, ListReportConverter, ObjectPageConverter) {
  "use strict";

  var _exports = {};
  var getInvolvedDataModelObjects = MetaModelConverter.getInvolvedDataModelObjects;
  var convertTypes = MetaModelConverter.convertTypes;
  var TemplateType = ManifestSettings.TemplateType;
  var IssueSeverity = IssueManager.IssueSeverity;
  var IssueCategoryType = IssueManager.IssueCategoryType;
  var IssueCategory = IssueManager.IssueCategory;
  function handleErrorForCollectionFacets(oFacets, oDiagnostics, sEntitySetName, level) {
    oFacets.forEach(function (oFacet) {
      var Message = "For entity set ".concat(sEntitySetName);
      if ((oFacet === null || oFacet === void 0 ? void 0 : oFacet.$Type) === "com.sap.vocabularies.UI.v1.CollectionFacet" && !(oFacet !== null && oFacet !== void 0 && oFacet.ID)) {
        var _IssueCategoryType$Fa;
        Message = "".concat(Message, ", ") + "level ".concat(level, ", the collection facet does not have an ID.");
        oDiagnostics.addIssue(IssueCategory.Facets, IssueSeverity.High, Message, IssueCategoryType, IssueCategoryType === null || IssueCategoryType === void 0 ? void 0 : (_IssueCategoryType$Fa = IssueCategoryType.Facets) === null || _IssueCategoryType$Fa === void 0 ? void 0 : _IssueCategoryType$Fa.MissingID);
      }
      if ((oFacet === null || oFacet === void 0 ? void 0 : oFacet.$Type) === "com.sap.vocabularies.UI.v1.CollectionFacet" && level >= 3) {
        var _IssueCategoryType$Fa2;
        Message = "".concat(Message, ", collection facet ").concat(oFacet.Label, " is not supported at ") + "level ".concat(level);
        oDiagnostics.addIssue(IssueCategory.Facets, IssueSeverity.Medium, Message, IssueCategoryType, IssueCategoryType === null || IssueCategoryType === void 0 ? void 0 : (_IssueCategoryType$Fa2 = IssueCategoryType.Facets) === null || _IssueCategoryType$Fa2 === void 0 ? void 0 : _IssueCategoryType$Fa2.UnSupportedLevel);
      }
      if (oFacet !== null && oFacet !== void 0 && oFacet.Facets) {
        handleErrorForCollectionFacets(oFacet === null || oFacet === void 0 ? void 0 : oFacet.Facets, oDiagnostics, sEntitySetName, ++level);
        level = level - 1;
      }
    });
  }

  /**
   * Based on a template type, convert the metamodel and manifest definition into a json structure for the page.
   *
   * @param sTemplateType The template type
   * @param oMetaModel The odata model metaModel
   * @param oManifestSettings The current manifest settings
   * @param oDiagnostics The diagnostics wrapper
   * @param sFullContextPath The context path to reach this page
   * @param oCapabilities
   * @returns The target page definition
   */
  function convertPage(sTemplateType, oMetaModel, oManifestSettings, oDiagnostics, sFullContextPath, oCapabilities) {
    var _oConvertedMetadata$e;
    var oConvertedMetadata = convertTypes(oMetaModel, oCapabilities);
    oConvertedMetadata.diagnostics.forEach(function (annotationErrorDetail) {
      var checkIfIssueExists = oDiagnostics.checkIfIssueExists(IssueCategory.Annotation, IssueSeverity.High, annotationErrorDetail.message);
      if (!checkIfIssueExists) {
        oDiagnostics.addIssue(IssueCategory.Annotation, IssueSeverity.High, annotationErrorDetail.message);
      }
    });
    oConvertedMetadata === null || oConvertedMetadata === void 0 ? void 0 : (_oConvertedMetadata$e = oConvertedMetadata.entityTypes) === null || _oConvertedMetadata$e === void 0 ? void 0 : _oConvertedMetadata$e.forEach(function (oEntitySet) {
      var _oEntitySet$annotatio, _oEntitySet$annotatio2;
      if (oEntitySet !== null && oEntitySet !== void 0 && (_oEntitySet$annotatio = oEntitySet.annotations) !== null && _oEntitySet$annotatio !== void 0 && (_oEntitySet$annotatio2 = _oEntitySet$annotatio.UI) !== null && _oEntitySet$annotatio2 !== void 0 && _oEntitySet$annotatio2.Facets) {
        var _oEntitySet$annotatio3, _oEntitySet$annotatio4;
        handleErrorForCollectionFacets(oEntitySet === null || oEntitySet === void 0 ? void 0 : (_oEntitySet$annotatio3 = oEntitySet.annotations) === null || _oEntitySet$annotatio3 === void 0 ? void 0 : (_oEntitySet$annotatio4 = _oEntitySet$annotatio3.UI) === null || _oEntitySet$annotatio4 === void 0 ? void 0 : _oEntitySet$annotatio4.Facets, oDiagnostics, oEntitySet === null || oEntitySet === void 0 ? void 0 : oEntitySet.name, 1);
      }
    });
    var sTargetEntitySetName = oManifestSettings.entitySet;
    var sContextPath = (oManifestSettings === null || oManifestSettings === void 0 ? void 0 : oManifestSettings.contextPath) || (sFullContextPath === "/" ? sFullContextPath + sTargetEntitySetName : sFullContextPath);
    var oContext = oMetaModel.createBindingContext(sContextPath);
    var oFullContext = getInvolvedDataModelObjects(oContext);
    if (oFullContext) {
      var oConvertedPage = {};
      switch (sTemplateType) {
        case TemplateType.ListReport:
        case TemplateType.AnalyticalListPage:
          oConvertedPage = ListReportConverter.convertPage(new ConverterContext(oConvertedMetadata, oManifestSettings, oDiagnostics, merge, oFullContext));
          break;
        case TemplateType.ObjectPage:
          oConvertedPage = ObjectPageConverter.convertPage(new ConverterContext(oConvertedMetadata, oManifestSettings, oDiagnostics, merge, oFullContext));
          break;
      }
      return oConvertedPage;
    }
    return undefined;
  }
  _exports.convertPage = convertPage;
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoYW5kbGVFcnJvckZvckNvbGxlY3Rpb25GYWNldHMiLCJvRmFjZXRzIiwib0RpYWdub3N0aWNzIiwic0VudGl0eVNldE5hbWUiLCJsZXZlbCIsImZvckVhY2giLCJvRmFjZXQiLCJNZXNzYWdlIiwiJFR5cGUiLCJJRCIsImFkZElzc3VlIiwiSXNzdWVDYXRlZ29yeSIsIkZhY2V0cyIsIklzc3VlU2V2ZXJpdHkiLCJIaWdoIiwiSXNzdWVDYXRlZ29yeVR5cGUiLCJNaXNzaW5nSUQiLCJMYWJlbCIsIk1lZGl1bSIsIlVuU3VwcG9ydGVkTGV2ZWwiLCJjb252ZXJ0UGFnZSIsInNUZW1wbGF0ZVR5cGUiLCJvTWV0YU1vZGVsIiwib01hbmlmZXN0U2V0dGluZ3MiLCJzRnVsbENvbnRleHRQYXRoIiwib0NhcGFiaWxpdGllcyIsIm9Db252ZXJ0ZWRNZXRhZGF0YSIsImNvbnZlcnRUeXBlcyIsImRpYWdub3N0aWNzIiwiYW5ub3RhdGlvbkVycm9yRGV0YWlsIiwiY2hlY2tJZklzc3VlRXhpc3RzIiwiQW5ub3RhdGlvbiIsIm1lc3NhZ2UiLCJlbnRpdHlUeXBlcyIsIm9FbnRpdHlTZXQiLCJhbm5vdGF0aW9ucyIsIlVJIiwibmFtZSIsInNUYXJnZXRFbnRpdHlTZXROYW1lIiwiZW50aXR5U2V0Iiwic0NvbnRleHRQYXRoIiwiY29udGV4dFBhdGgiLCJvQ29udGV4dCIsImNyZWF0ZUJpbmRpbmdDb250ZXh0Iiwib0Z1bGxDb250ZXh0IiwiZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIiwib0NvbnZlcnRlZFBhZ2UiLCJUZW1wbGF0ZVR5cGUiLCJMaXN0UmVwb3J0IiwiQW5hbHl0aWNhbExpc3RQYWdlIiwiTGlzdFJlcG9ydENvbnZlcnRlciIsIkNvbnZlcnRlckNvbnRleHQiLCJtZXJnZSIsIk9iamVjdFBhZ2UiLCJPYmplY3RQYWdlQ29udmVydGVyIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJUZW1wbGF0ZUNvbnZlcnRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEZhY2V0VHlwZXMgfSBmcm9tIFwiQHNhcC11eC92b2NhYnVsYXJpZXMtdHlwZXMvdm9jYWJ1bGFyaWVzL1VJXCI7XG5pbXBvcnQgeyBVSUFubm90YXRpb25UeXBlcyB9IGZyb20gXCJAc2FwLXV4L3ZvY2FidWxhcmllcy10eXBlcy92b2NhYnVsYXJpZXMvVUlcIjtcbmltcG9ydCBtZXJnZSBmcm9tIFwic2FwL2Jhc2UvdXRpbC9tZXJnZVwiO1xuaW1wb3J0IHsgSXNzdWVDYXRlZ29yeSwgSXNzdWVDYXRlZ29yeVR5cGUsIElzc3VlU2V2ZXJpdHkgfSBmcm9tIFwic2FwL2ZlL2NvcmUvY29udmVydGVycy9oZWxwZXJzL0lzc3VlTWFuYWdlclwiO1xuaW1wb3J0IHR5cGUgQ29udGV4dCBmcm9tIFwic2FwL3VpL21vZGVsL0NvbnRleHRcIjtcbmltcG9ydCB0eXBlIE9EYXRhTWV0YU1vZGVsIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFNZXRhTW9kZWxcIjtcbmltcG9ydCBDb252ZXJ0ZXJDb250ZXh0IGZyb20gXCIuL0NvbnZlcnRlckNvbnRleHRcIjtcbmltcG9ydCB0eXBlIHsgQmFzZU1hbmlmZXN0U2V0dGluZ3MgfSBmcm9tIFwiLi9NYW5pZmVzdFNldHRpbmdzXCI7XG5pbXBvcnQgeyBUZW1wbGF0ZVR5cGUgfSBmcm9tIFwiLi9NYW5pZmVzdFNldHRpbmdzXCI7XG5pbXBvcnQgdHlwZSB7IEVudmlyb25tZW50Q2FwYWJpbGl0aWVzIH0gZnJvbSBcIi4vTWV0YU1vZGVsQ29udmVydGVyXCI7XG5pbXBvcnQgeyBjb252ZXJ0VHlwZXMsIGdldEludm9sdmVkRGF0YU1vZGVsT2JqZWN0cyB9IGZyb20gXCIuL01ldGFNb2RlbENvbnZlcnRlclwiO1xuaW1wb3J0ICogYXMgTGlzdFJlcG9ydENvbnZlcnRlciBmcm9tIFwiLi90ZW1wbGF0ZXMvTGlzdFJlcG9ydENvbnZlcnRlclwiO1xuaW1wb3J0ICogYXMgT2JqZWN0UGFnZUNvbnZlcnRlciBmcm9tIFwiLi90ZW1wbGF0ZXMvT2JqZWN0UGFnZUNvbnZlcnRlclwiO1xuXG4vKipcbiAqIEB0eXBlZGVmIFBhZ2VEZWZpbml0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIFBhZ2VEZWZpbml0aW9uID0ge1xuXHR0ZW1wbGF0ZTogc3RyaW5nO1xufTtcblxuLyoqIEB0eXBlZGVmIElEaWFnbm9zdGljcyAqL1xuZXhwb3J0IGludGVyZmFjZSBJRGlhZ25vc3RpY3Mge1xuXHRhZGRJc3N1ZShcblx0XHRpc3N1ZUNhdGVnb3J5OiBJc3N1ZUNhdGVnb3J5IHwgc3RyaW5nLFxuXHRcdGlzc3VlU2V2ZXJpdHk6IElzc3VlU2V2ZXJpdHksXG5cdFx0ZGV0YWlsczogc3RyaW5nLFxuXHRcdGlzc3VlQ2F0ZWdvcnlUeXBlPzogYW55LFxuXHRcdGlzc3VlU3ViQ2F0ZWdvcnk/OiBzdHJpbmdcblx0KTogdm9pZDtcblx0Z2V0SXNzdWVzKCk6IGFueVtdO1xuXHRjaGVja0lmSXNzdWVFeGlzdHMoXG5cdFx0aXNzdWVDYXRlZ29yeTogSXNzdWVDYXRlZ29yeSxcblx0XHRpc3N1ZVNldmVyaXR5OiBJc3N1ZVNldmVyaXR5LFxuXHRcdGRldGFpbHM6IHN0cmluZyxcblx0XHRpc3N1ZUNhdGVnb3J5VHlwZT86IGFueSxcblx0XHRpc3N1ZVN1YkNhdGVnb3J5Pzogc3RyaW5nXG5cdCk6IGJvb2xlYW47XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVycm9yRm9yQ29sbGVjdGlvbkZhY2V0cyhvRmFjZXRzOiBGYWNldFR5cGVzW10sIG9EaWFnbm9zdGljczogSURpYWdub3N0aWNzLCBzRW50aXR5U2V0TmFtZTogc3RyaW5nLCBsZXZlbDogbnVtYmVyKSB7XG5cdG9GYWNldHMuZm9yRWFjaCgob0ZhY2V0OiBhbnkpID0+IHtcblx0XHRsZXQgTWVzc2FnZSA9IGBGb3IgZW50aXR5IHNldCAke3NFbnRpdHlTZXROYW1lfWA7XG5cdFx0aWYgKG9GYWNldD8uJFR5cGUgPT09IFVJQW5ub3RhdGlvblR5cGVzLkNvbGxlY3Rpb25GYWNldCAmJiAhb0ZhY2V0Py5JRCkge1xuXHRcdFx0TWVzc2FnZSA9IGAke01lc3NhZ2V9LCBgICsgYGxldmVsICR7bGV2ZWx9LCB0aGUgY29sbGVjdGlvbiBmYWNldCBkb2VzIG5vdCBoYXZlIGFuIElELmA7XG5cdFx0XHRvRGlhZ25vc3RpY3MuYWRkSXNzdWUoXG5cdFx0XHRcdElzc3VlQ2F0ZWdvcnkuRmFjZXRzLFxuXHRcdFx0XHRJc3N1ZVNldmVyaXR5LkhpZ2gsXG5cdFx0XHRcdE1lc3NhZ2UsXG5cdFx0XHRcdElzc3VlQ2F0ZWdvcnlUeXBlLFxuXHRcdFx0XHRJc3N1ZUNhdGVnb3J5VHlwZT8uRmFjZXRzPy5NaXNzaW5nSURcblx0XHRcdCk7XG5cdFx0fVxuXHRcdGlmIChvRmFjZXQ/LiRUeXBlID09PSBVSUFubm90YXRpb25UeXBlcy5Db2xsZWN0aW9uRmFjZXQgJiYgbGV2ZWwgPj0gMykge1xuXHRcdFx0TWVzc2FnZSA9IGAke01lc3NhZ2V9LCBjb2xsZWN0aW9uIGZhY2V0ICR7b0ZhY2V0LkxhYmVsfSBpcyBub3Qgc3VwcG9ydGVkIGF0IGAgKyBgbGV2ZWwgJHtsZXZlbH1gO1xuXHRcdFx0b0RpYWdub3N0aWNzLmFkZElzc3VlKFxuXHRcdFx0XHRJc3N1ZUNhdGVnb3J5LkZhY2V0cyxcblx0XHRcdFx0SXNzdWVTZXZlcml0eS5NZWRpdW0sXG5cdFx0XHRcdE1lc3NhZ2UsXG5cdFx0XHRcdElzc3VlQ2F0ZWdvcnlUeXBlLFxuXHRcdFx0XHRJc3N1ZUNhdGVnb3J5VHlwZT8uRmFjZXRzPy5VblN1cHBvcnRlZExldmVsXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRpZiAob0ZhY2V0Py5GYWNldHMpIHtcblx0XHRcdGhhbmRsZUVycm9yRm9yQ29sbGVjdGlvbkZhY2V0cyhvRmFjZXQ/LkZhY2V0cywgb0RpYWdub3N0aWNzLCBzRW50aXR5U2V0TmFtZSwgKytsZXZlbCk7XG5cdFx0XHRsZXZlbCA9IGxldmVsIC0gMTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEJhc2VkIG9uIGEgdGVtcGxhdGUgdHlwZSwgY29udmVydCB0aGUgbWV0YW1vZGVsIGFuZCBtYW5pZmVzdCBkZWZpbml0aW9uIGludG8gYSBqc29uIHN0cnVjdHVyZSBmb3IgdGhlIHBhZ2UuXG4gKlxuICogQHBhcmFtIHNUZW1wbGF0ZVR5cGUgVGhlIHRlbXBsYXRlIHR5cGVcbiAqIEBwYXJhbSBvTWV0YU1vZGVsIFRoZSBvZGF0YSBtb2RlbCBtZXRhTW9kZWxcbiAqIEBwYXJhbSBvTWFuaWZlc3RTZXR0aW5ncyBUaGUgY3VycmVudCBtYW5pZmVzdCBzZXR0aW5nc1xuICogQHBhcmFtIG9EaWFnbm9zdGljcyBUaGUgZGlhZ25vc3RpY3Mgd3JhcHBlclxuICogQHBhcmFtIHNGdWxsQ29udGV4dFBhdGggVGhlIGNvbnRleHQgcGF0aCB0byByZWFjaCB0aGlzIHBhZ2VcbiAqIEBwYXJhbSBvQ2FwYWJpbGl0aWVzXG4gKiBAcmV0dXJucyBUaGUgdGFyZ2V0IHBhZ2UgZGVmaW5pdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFBhZ2UoXG5cdHNUZW1wbGF0ZVR5cGU6IFRlbXBsYXRlVHlwZSxcblx0b01ldGFNb2RlbDogT0RhdGFNZXRhTW9kZWwsXG5cdG9NYW5pZmVzdFNldHRpbmdzOiBCYXNlTWFuaWZlc3RTZXR0aW5ncyxcblx0b0RpYWdub3N0aWNzOiBJRGlhZ25vc3RpY3MsXG5cdHNGdWxsQ29udGV4dFBhdGg6IHN0cmluZyxcblx0b0NhcGFiaWxpdGllcz86IEVudmlyb25tZW50Q2FwYWJpbGl0aWVzXG4pIHtcblx0Y29uc3Qgb0NvbnZlcnRlZE1ldGFkYXRhID0gY29udmVydFR5cGVzKG9NZXRhTW9kZWwsIG9DYXBhYmlsaXRpZXMpO1xuXHRvQ29udmVydGVkTWV0YWRhdGEuZGlhZ25vc3RpY3MuZm9yRWFjaCgoYW5ub3RhdGlvbkVycm9yRGV0YWlsKSA9PiB7XG5cdFx0Y29uc3QgY2hlY2tJZklzc3VlRXhpc3RzID0gb0RpYWdub3N0aWNzLmNoZWNrSWZJc3N1ZUV4aXN0cyhcblx0XHRcdElzc3VlQ2F0ZWdvcnkuQW5ub3RhdGlvbixcblx0XHRcdElzc3VlU2V2ZXJpdHkuSGlnaCxcblx0XHRcdGFubm90YXRpb25FcnJvckRldGFpbC5tZXNzYWdlXG5cdFx0KTtcblx0XHRpZiAoIWNoZWNrSWZJc3N1ZUV4aXN0cykge1xuXHRcdFx0b0RpYWdub3N0aWNzLmFkZElzc3VlKElzc3VlQ2F0ZWdvcnkuQW5ub3RhdGlvbiwgSXNzdWVTZXZlcml0eS5IaWdoLCBhbm5vdGF0aW9uRXJyb3JEZXRhaWwubWVzc2FnZSk7XG5cdFx0fVxuXHR9KTtcblx0b0NvbnZlcnRlZE1ldGFkYXRhPy5lbnRpdHlUeXBlcz8uZm9yRWFjaCgob0VudGl0eVNldDogYW55KSA9PiB7XG5cdFx0aWYgKG9FbnRpdHlTZXQ/LmFubm90YXRpb25zPy5VST8uRmFjZXRzKSB7XG5cdFx0XHRoYW5kbGVFcnJvckZvckNvbGxlY3Rpb25GYWNldHMob0VudGl0eVNldD8uYW5ub3RhdGlvbnM/LlVJPy5GYWNldHMsIG9EaWFnbm9zdGljcywgb0VudGl0eVNldD8ubmFtZSwgMSk7XG5cdFx0fVxuXHR9KTtcblx0Y29uc3Qgc1RhcmdldEVudGl0eVNldE5hbWUgPSBvTWFuaWZlc3RTZXR0aW5ncy5lbnRpdHlTZXQ7XG5cdGNvbnN0IHNDb250ZXh0UGF0aCA9XG5cdFx0b01hbmlmZXN0U2V0dGluZ3M/LmNvbnRleHRQYXRoIHx8IChzRnVsbENvbnRleHRQYXRoID09PSBcIi9cIiA/IHNGdWxsQ29udGV4dFBhdGggKyBzVGFyZ2V0RW50aXR5U2V0TmFtZSA6IHNGdWxsQ29udGV4dFBhdGgpO1xuXHRjb25zdCBvQ29udGV4dCA9IG9NZXRhTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQoc0NvbnRleHRQYXRoKSBhcyBDb250ZXh0O1xuXHRjb25zdCBvRnVsbENvbnRleHQgPSBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHMob0NvbnRleHQpO1xuXG5cdGlmIChvRnVsbENvbnRleHQpIHtcblx0XHRsZXQgb0NvbnZlcnRlZFBhZ2UgPSB7fTtcblx0XHRzd2l0Y2ggKHNUZW1wbGF0ZVR5cGUpIHtcblx0XHRcdGNhc2UgVGVtcGxhdGVUeXBlLkxpc3RSZXBvcnQ6XG5cdFx0XHRjYXNlIFRlbXBsYXRlVHlwZS5BbmFseXRpY2FsTGlzdFBhZ2U6XG5cdFx0XHRcdG9Db252ZXJ0ZWRQYWdlID0gTGlzdFJlcG9ydENvbnZlcnRlci5jb252ZXJ0UGFnZShcblx0XHRcdFx0XHRuZXcgQ29udmVydGVyQ29udGV4dChvQ29udmVydGVkTWV0YWRhdGEsIG9NYW5pZmVzdFNldHRpbmdzLCBvRGlhZ25vc3RpY3MsIG1lcmdlLCBvRnVsbENvbnRleHQpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBUZW1wbGF0ZVR5cGUuT2JqZWN0UGFnZTpcblx0XHRcdFx0b0NvbnZlcnRlZFBhZ2UgPSBPYmplY3RQYWdlQ29udmVydGVyLmNvbnZlcnRQYWdlKFxuXHRcdFx0XHRcdG5ldyBDb252ZXJ0ZXJDb250ZXh0KG9Db252ZXJ0ZWRNZXRhZGF0YSwgb01hbmlmZXN0U2V0dGluZ3MsIG9EaWFnbm9zdGljcywgbWVyZ2UsIG9GdWxsQ29udGV4dClcblx0XHRcdFx0KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdHJldHVybiBvQ29udmVydGVkUGFnZTtcblx0fVxuXHRyZXR1cm4gdW5kZWZpbmVkO1xufVxuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztFQXdDQSxTQUFTQSw4QkFBOEIsQ0FBQ0MsT0FBcUIsRUFBRUMsWUFBMEIsRUFBRUMsY0FBc0IsRUFBRUMsS0FBYSxFQUFFO0lBQ2pJSCxPQUFPLENBQUNJLE9BQU8sQ0FBQyxVQUFDQyxNQUFXLEVBQUs7TUFDaEMsSUFBSUMsT0FBTyw0QkFBcUJKLGNBQWMsQ0FBRTtNQUNoRCxJQUFJLENBQUFHLE1BQU0sYUFBTkEsTUFBTSx1QkFBTkEsTUFBTSxDQUFFRSxLQUFLLGtEQUFzQyxJQUFJLEVBQUNGLE1BQU0sYUFBTkEsTUFBTSxlQUFOQSxNQUFNLENBQUVHLEVBQUUsR0FBRTtRQUFB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