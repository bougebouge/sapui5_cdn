/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/ViewState","sap/fe/core/helpers/ClassSupport","sap/fe/core/helpers/KeepAliveHelper","sap/m/Link","sap/m/MessageBox","sap/m/MessagePage","./RootViewBaseController"],function(e,t,n,r,a,i,o,s,l){"use strict";var c,g,u,f,p;var v=o.Icon;var d=o.Action;var h=r.usingExtension;var C=r.defineUI5Class;function w(e,t,n,r){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;y(e,t)}function y(e,t){y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return y(e,t)}function m(e,t,n,r,a){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]});i.enumerable=!!i.enumerable;i.configurable=!!i.configurable;if("value"in i||i.initializer){i.writable=true}i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i);if(a&&i.initializer!==void 0){i.value=i.initializer?i.initializer.call(a):void 0;i.initializer=undefined}if(i.initializer===void 0){Object.defineProperty(e,t,i);i=null}return i}function S(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}var V=(c=C("sap.fe.core.rootView.NavContainer"),g=h(n.override({applyInitialStateOnly:function(){return false},adaptBindingRefreshControls:function(e){var t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},adaptStateControls:function(e){var t=this.getView(),n=t.getController();e.push(n._getCurrentPage(t))},onRestore:function(){var e=this.getView(),t=e.getController(),n=t.getAppContentContainer(e);var r=n.getModel("internal");var a=r.getProperty("/pages");for(var i in a){r.setProperty("/pages/".concat(i,"/restoreStatus"),"pending")}t.onContainerReady()},onSuspend:function(){var e=this.getView(),n=e.getController(),r=n.getAppContentContainer(e);var a=r.getPages();a.forEach(function(e){var n=t.getTargetView(e);var r=n&&n.getController();if(r&&r.viewState&&r.viewState.onSuspend){r.viewState.onSuspend()}})}})),c(u=(f=function(n){b(r,n);function r(){var e;for(var t=arguments.length,r=new Array(t),a=0;a<t;a++){r[a]=arguments[a]}e=n.call.apply(n,[this].concat(r))||this;w(e,"viewState",p,P(e));return e}var l=r.prototype;l.onContainerReady=function e(){var n=this.getView(),r=this._getCurrentPage(n);return r.then(function(e){var n=t.getTargetView(e);return a.restoreView(n)})};l._getCurrentPage=function e(n){var r=this.getAppContentContainer(n);return new Promise(function(e){var a=r.getCurrentPage();if(a&&a.getController&&a.getController().isPlaceholder&&a.getController().isPlaceholder()){a.getController().attachEventOnce("targetPageInsertedInContainer",function(r){var a=r.getParameter("targetpage");var i=t.getTargetView(a);e(i!==n&&i)})}else{var i=t.getTargetView(a);e(i!==n&&i)}})};l._getNavContainer=function e(){return this.getView().getContent()[0]};l.getInstancedViews=function e(){return this._getNavContainer().getPages().map(function(e){return e.getComponentInstance().getRootControl()})};l.isFclEnabled=function e(){return false};l._scrollTablesToLastNavigatedItems=function e(){};l.displayMessagePage=function n(r,a){var l=this;return new Promise(function(n,c){try{var g=l._getNavContainer();if(!l.oMessagePage){l.oMessagePage=new s({showHeader:false,icon:"sap-icon://message-error"});g.addPage(l.oMessagePage)}l.oMessagePage.setText(r);if(a.technicalMessage){l.oMessagePage.setCustomDescription(new i({text:a.description||a.technicalMessage,press:function(){o.show(a.technicalMessage,{icon:v.ERROR,title:a.title,actions:[d.OK],defaultAction:d.OK,details:a.technicalDetails||"",contentWidth:"60%"})}}))}else{l.oMessagePage.setDescription(a.description||"")}if(a.handleShellBack){var u=g.getCurrentPage(),f=t.getAppComponent(g.getCurrentPage());f.getShellServices().setBackNavigation(function(){g.to(u.getId());f.getShellServices().setBackNavigation()})}g.attachAfterNavigate(function(){n(true)});g.to(l.oMessagePage.getId())}catch(t){c(false);e.info(t)}})};return r}(l),p=m(f.prototype,"viewState",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),f))||u);return V},false);
//# sourceMappingURL=NavContainer.controller.js.map