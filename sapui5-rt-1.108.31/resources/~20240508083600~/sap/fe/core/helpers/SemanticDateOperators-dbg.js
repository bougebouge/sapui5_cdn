/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/mdc/condition/FilterOperatorUtil", "sap/ui/mdc/condition/Operator", "sap/ui/model/Filter", "sap/ui/model/FilterOperator", "sap/ui/model/ValidateException"], function (FilterOperatorUtil, Operator, Filter, ModelOperator, ValidateException) {
  "use strict";

  var aSupportedOperations = ["DATE", "FROM", "TO", "DATERANGE"];
  var DYNAMIC_DATE_CATEGORY = "DYNAMIC.DATE";
  var FIXED_DATE_CATEGORY = "FIXED.DATE";
  var DYNAMIC_DATE_INT_CATEGORY = "DYNAMIC.DATE.INT";
  var DYNAMIC_DATERANGE_CATEGORY = "DYNAMIC.DATERANGE";
  var DYNAMIC_MONTH_CATEGORY = "DYNAMIC.MONTH";
  var FIXED_WEEK_CATEGORY = "FIXED.WEEK";
  var FIXED_MONTH_CATEGORY = "FIXED.MONTH";
  var FIXED_QUARTER_CATEGORY = "FIXED.QUARTER";
  var FIXED_YEAR_CATEGORY = "FIXED.YEAR";
  var DYNAMIC_WEEK_INT_CATEGORY = "DYNAMIC.WEEK.INT";
  var DYNAMIC_MONTH_INT_CATEGORY = "DYNAMIC.MONTH.INT";
  var DYNAMIC_QUARTER_INT_CATEGORY = "DYNAMIC.QUARTER.INT";
  var DYNAMIC_YEAR_INT_CATEGORY = "DYNAMIC.YEAR.INT";
  var mSemanticDateOperations = {
    "DATE": {
      "key": "DATE",
      "category": DYNAMIC_DATE_CATEGORY
    },
    "FROM": {
      "key": "FROM",
      "category": DYNAMIC_DATE_CATEGORY
    },
    "TO": {
      "key": "TO",
      "category": DYNAMIC_DATE_CATEGORY
    },
    "DATERANGE": {
      "key": "DATERANGE",
      "category": DYNAMIC_DATERANGE_CATEGORY
    },
    "SPECIFICMONTH": {
      "key": "SPECIFICMONTH",
      "category": DYNAMIC_MONTH_CATEGORY
    },
    "TODAY": {
      "key": "TODAY",
      "category": FIXED_DATE_CATEGORY
    },
    "TODAYFROMTO": {
      "key": "TODAYFROMTO",
      "category": DYNAMIC_DATE_INT_CATEGORY
    },
    "YESTERDAY": {
      "key": "YESTERDAY",
      "category": FIXED_DATE_CATEGORY
    },
    "TOMORROW": {
      "key": "TOMORROW",
      "category": FIXED_DATE_CATEGORY
    },
    "LASTDAYS": {
      "key": "LASTDAYS",
      "category": DYNAMIC_DATE_INT_CATEGORY
    },
    "NEXTDAYS": {
      "key": "NEXTDAYS",
      "category": DYNAMIC_DATE_INT_CATEGORY
    },
    "THISWEEK": {
      "key": "THISWEEK",
      "category": FIXED_WEEK_CATEGORY
    },
    "LASTWEEK": {
      "key": "LASTWEEK",
      "category": FIXED_WEEK_CATEGORY
    },
    "LASTWEEKS": {
      "key": "LASTWEEKS",
      "category": DYNAMIC_WEEK_INT_CATEGORY
    },
    "NEXTWEEK": {
      "key": "NEXTWEEK",
      "category": FIXED_WEEK_CATEGORY
    },
    "NEXTWEEKS": {
      "key": "NEXTWEEKS",
      "category": DYNAMIC_WEEK_INT_CATEGORY
    },
    "THISMONTH": {
      "key": "THISMONTH",
      "category": FIXED_MONTH_CATEGORY
    },
    "LASTMONTH": {
      "key": "LASTMONTH",
      "category": FIXED_MONTH_CATEGORY
    },
    "LASTMONTHS": {
      "key": "LASTMONTHS",
      "category": DYNAMIC_MONTH_INT_CATEGORY
    },
    "NEXTMONTH": {
      "key": "NEXTMONTH",
      "category": FIXED_MONTH_CATEGORY
    },
    "NEXTMONTHS": {
      "key": "NEXTMONTHS",
      "category": DYNAMIC_MONTH_INT_CATEGORY
    },
    "THISQUARTER": {
      "key": "THISQUARTER",
      "category": FIXED_QUARTER_CATEGORY
    },
    "LASTQUARTER": {
      "key": "LASTQUARTER",
      "category": FIXED_QUARTER_CATEGORY
    },
    "LASTQUARTERS": {
      "key": "LASTQUARTERS",
      "category": DYNAMIC_QUARTER_INT_CATEGORY
    },
    "NEXTQUARTER": {
      "key": "NEXTQUARTER",
      "category": FIXED_QUARTER_CATEGORY
    },
    "NEXTQUARTERS": {
      "key": "NEXTQUARTERS",
      "category": DYNAMIC_QUARTER_INT_CATEGORY
    },
    "QUARTER1": {
      "key": "QUARTER1",
      "category": FIXED_QUARTER_CATEGORY
    },
    "QUARTER2": {
      "key": "QUARTER2",
      "category": FIXED_QUARTER_CATEGORY
    },
    "QUARTER3": {
      "key": "QUARTER3",
      "category": FIXED_QUARTER_CATEGORY
    },
    "QUARTER4": {
      "key": "QUARTER4",
      "category": FIXED_QUARTER_CATEGORY
    },
    "THISYEAR": {
      "key": "THISYEAR",
      "category": FIXED_YEAR_CATEGORY
    },
    "LASTYEAR": {
      "key": "LASTYEAR",
      "category": FIXED_YEAR_CATEGORY
    },
    "LASTYEARS": {
      "key": "LASTYEARS",
      "category": DYNAMIC_YEAR_INT_CATEGORY
    },
    "NEXTYEAR": {
      "key": "NEXTYEAR",
      "category": FIXED_YEAR_CATEGORY
    },
    "NEXTYEARS": {
      "key": "NEXTYEARS",
      "category": DYNAMIC_YEAR_INT_CATEGORY
    },
    "YEARTODATE": {
      "key": "YEARTODATE",
      "category": FIXED_YEAR_CATEGORY
    },
    "DATETOYEAR": {
      "key": "DATETOYEAR",
      "category": FIXED_YEAR_CATEGORY
    }
  };
  function _getDateRangeOperator() {
    return new Operator({
      name: "DATERANGE",
      filterOperator: ModelOperator.BT,
      alias: {
        Date: "DATERANGE",
        DateTime: "DATERANGE"
      },
      valueTypes: [Operator.ValueType.Self, Operator.ValueType.Self],
      validate: function (aValues, oType) {
        if (aValues.length < 2) {
          throw new ValidateException("Date Range must have two values");
        } else {
          var fromDate = new Date(aValues[0]);
          var toDate = new Date(aValues[1]);
          if (fromDate.getTime() > toDate.getTime()) {
            throw new ValidateException("From Date Should Be Less Than To Date");
          }
        }
        Operator.prototype.validate.apply(this, [aValues, oType]);
      }
    });
  }
  function _getDateOperator() {
    return new Operator({
      name: "DATE",
      alias: {
        Date: "DATE",
        DateTime: "DATE"
      },
      filterOperator: ModelOperator.EQ,
      valueTypes: [Operator.ValueType.Self],
      getModelFilter: function (oCondition, sFieldPath, oType) {
        return SemanticDateOperators.getModelFilterForDate(oCondition, sFieldPath, oType);
      }
    });
  }
  function _getFromOperator() {
    return new Operator({
      name: "FROM",
      alias: {
        Date: "FROM",
        DateTime: "FROM"
      },
      filterOperator: ModelOperator.GE,
      valueTypes: [Operator.ValueType.Self]
    });
  }
  function _getToOperator() {
    return new Operator({
      name: "TO",
      alias: {
        Date: "TO",
        DateTime: "TO"
      },
      filterOperator: ModelOperator.LE,
      valueTypes: [Operator.ValueType.Self],
      getModelFilter: function (oCondition, sFieldPath, oType) {
        return SemanticDateOperators.getModelFilterForTo(oCondition, sFieldPath, oType);
      }
    });
  }
  function _filterOperation(oOperation, aOperatorConfiguration) {
    if (!aOperatorConfiguration) {
      return true;
    }
    aOperatorConfiguration = Array.isArray(aOperatorConfiguration) ? aOperatorConfiguration : [aOperatorConfiguration];
    var bResult;
    aOperatorConfiguration.some(function (oOperatorConfiguration) {
      var j;
      if (!oOperatorConfiguration.path) {
        return false;
      }
      var sValue = oOperation[oOperatorConfiguration.path];
      var bExclude = oOperatorConfiguration.exclude || false;
      var aOperatorValues;
      if (oOperatorConfiguration.contains && sValue) {
        aOperatorValues = oOperatorConfiguration.contains.split(",");
        bResult = bExclude;
        for (j = 0; j < aOperatorValues.length; j++) {
          if (bExclude && sValue.indexOf(aOperatorValues[j]) > -1) {
            bResult = false;
            return true;
          } else if (!bExclude && sValue.indexOf(aOperatorValues[j]) > -1) {
            bResult = true;
            return true;
          }
        }
      }
      if (oOperatorConfiguration.equals && sValue) {
        aOperatorValues = oOperatorConfiguration.equals.split(",");
        bResult = bExclude;
        for (j = 0; j < aOperatorValues.length; j++) {
          if (bExclude && sValue === aOperatorValues[j]) {
            bResult = false;
            return true;
          } else if (!bExclude && sValue === aOperatorValues[j]) {
            bResult = true;
            return true;
          }
        }
      }
      return false;
    });
    return bResult;
  }
  var SemanticDateOperators = {
    // Extending operators for Sematic Date Control
    addSemanticDateOperators: function () {
      FilterOperatorUtil.addOperator(_getDateRangeOperator());
      FilterOperatorUtil.addOperator(_getDateOperator());
      FilterOperatorUtil.addOperator(_getFromOperator());
      FilterOperatorUtil.addOperator(_getToOperator());
    },
    getSupportedOperations: function () {
      return aSupportedOperations;
    },
    getSemanticDateOperations: function () {
      return Object.keys(mSemanticDateOperations);
    },
    // TODO: Would need to check with MDC for removeOperator method
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    removeSemanticDateOperators: function () {},
    // To filter operators based on manifest aOperatorConfiguration settings
    getFilterOperations: function (aOperatorConfiguration) {
      var aOperations = [];
      for (var n in mSemanticDateOperations) {
        var oOperation = mSemanticDateOperations[n];
        if (_filterOperation(oOperation, aOperatorConfiguration)) {
          aOperations.push(oOperation);
        }
      }
      return aOperations.map(function (oOperation) {
        return oOperation.key;
      });
    },
    hasSemanticDateOperations: function (oConditions) {
      var aSemanticDateOps = this.getSemanticDateOperations();
      for (var n in oConditions) {
        var aFilterCondtion = oConditions[n];
        var oSemanticOperator = aFilterCondtion.find(function (oCondition) {
          return aSemanticDateOps.indexOf(oCondition.operator) > -1;
        });
        if (oSemanticOperator) {
          return false;
        }
      }
      return true;
    },
    getModelFilterForDate: function (oCondition, sFieldPath, oType) {
      if (oType.isA("sap.ui.model.odata.type.DateTimeOffset")) {
        var sFrom = oCondition.values[0];
        var oModelFormat = oType.getModelFormat(); // use ModelFormat to convert in JS-Date and add 23:59:59
        var oDate = oModelFormat.parse(sFrom);
        oDate.setHours(23);
        oDate.setMinutes(59);
        oDate.setSeconds(59);
        oDate.setMilliseconds(999);
        var sTo = oModelFormat.format(oDate);
        return new Filter({
          path: sFieldPath,
          operator: ModelOperator.BT,
          value1: sFrom,
          value2: sTo
        });
      } else {
        return new Filter({
          path: sFieldPath,
          operator: ModelOperator.EQ,
          value1: oCondition.values[0]
        });
      }
    },
    getModelFilterForTo: function (oCondition, sFieldPath, oType) {
      if (oType.isA("sap.ui.model.odata.type.DateTimeOffset")) {
        var value = oCondition.values[0];
        var oModelFormat = oType.getModelFormat(); // use ModelFormat to convert in JS-Date and add 23:59:59
        var oDate = oModelFormat.parse(value);
        oDate.setHours(23);
        oDate.setMinutes(59);
        oDate.setSeconds(59);
        oDate.setMilliseconds(999);
        var sTo = oModelFormat.format(oDate);
        return new Filter({
          path: sFieldPath,
          operator: ModelOperator.LE,
          value1: sTo
        });
      } else {
        return new Filter({
          path: sFieldPath,
          operator: ModelOperator.LE,
          value1: oCondition.values[0]
        });
      }
    }
  };
  return SemanticDateOperators;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhU3VwcG9ydGVkT3BlcmF0aW9ucyIsIkRZTkFNSUNfREFURV9DQVRFR09SWSIsIkZJWEVEX0RBVEVfQ0FURUdPUlkiLCJEWU5BTUlDX0RBVEVfSU5UX0NBVEVHT1JZIiwiRFlOQU1JQ19EQVRFUkFOR0VfQ0FURUdPUlkiLCJEWU5BTUlDX01PTlRIX0NBVEVHT1JZIiwiRklYRURfV0VFS19DQVRFR09SWSIsIkZJWEVEX01PTlRIX0NBVEVHT1JZIiwiRklYRURfUVVBUlRFUl9DQVRFR09SWSIsIkZJWEVEX1lFQVJfQ0FURUdPUlkiLCJEWU5BTUlDX1dFRUtfSU5UX0NBVEVHT1JZIiwiRFlOQU1JQ19NT05USF9JTlRfQ0FURUdPUlkiLCJEWU5BTUlDX1FVQVJURVJfSU5UX0NBVEVHT1JZIiwiRFlOQU1JQ19ZRUFSX0lOVF9DQVRFR09SWSIsIm1TZW1hbnRpY0RhdGVPcGVyYXRpb25zIiwiX2dldERhdGVSYW5nZU9wZXJhdG9yIiwiT3BlcmF0b3IiLCJuYW1lIiwiZmlsdGVyT3BlcmF0b3IiLCJNb2RlbE9wZXJhdG9yIiwiQlQiLCJhbGlhcyIsIkRhdGUiLCJEYXRlVGltZSIsInZhbHVlVHlwZXMiLCJWYWx1ZVR5cGUiLCJTZWxmIiwidmFsaWRhdGUiLCJhVmFsdWVzIiwib1R5cGUiLCJsZW5ndGgiLCJWYWxpZGF0ZUV4Y2VwdGlvbiIsImZyb21EYXRlIiwidG9EYXRlIiwiZ2V0VGltZSIsInByb3RvdHlwZSIsImFwcGx5IiwiX2dldERhdGVPcGVyYXRvciIsIkVRIiwiZ2V0TW9kZWxGaWx0ZXIiLCJvQ29uZGl0aW9uIiwic0ZpZWxkUGF0aCIsIlNlbWFudGljRGF0ZU9wZXJhdG9ycyIsImdldE1vZGVsRmlsdGVyRm9yRGF0ZSIsIl9nZXRGcm9tT3BlcmF0b3IiLCJHRSIsIl9nZXRUb09wZXJhdG9yIiwiTEUiLCJnZXRNb2RlbEZpbHRlckZvclRvIiwiX2ZpbHRlck9wZXJhdGlvbiIsIm9PcGVyYXRpb24iLCJhT3BlcmF0b3JDb25maWd1cmF0aW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiYlJlc3VsdCIsInNvbWUiLCJvT3BlcmF0b3JDb25maWd1cmF0aW9uIiwiaiIsInBhdGgiLCJzVmFsdWUiLCJiRXhjbHVkZSIsImV4Y2x1ZGUiLCJhT3BlcmF0b3JWYWx1ZXMiLCJjb250YWlucyIsInNwbGl0IiwiaW5kZXhPZiIsImVxdWFscyIsImFkZFNlbWFudGljRGF0ZU9wZXJhdG9ycyIsIkZpbHRlck9wZXJhdG9yVXRpbCIsImFkZE9wZXJhdG9yIiwiZ2V0U3VwcG9ydGVkT3BlcmF0aW9ucyIsImdldFNlbWFudGljRGF0ZU9wZXJhdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwicmVtb3ZlU2VtYW50aWNEYXRlT3BlcmF0b3JzIiwiZ2V0RmlsdGVyT3BlcmF0aW9ucyIsImFPcGVyYXRpb25zIiwibiIsInB1c2giLCJtYXAiLCJrZXkiLCJoYXNTZW1hbnRpY0RhdGVPcGVyYXRpb25zIiwib0NvbmRpdGlvbnMiLCJhU2VtYW50aWNEYXRlT3BzIiwiYUZpbHRlckNvbmR0aW9uIiwib1NlbWFudGljT3BlcmF0b3IiLCJmaW5kIiwib3BlcmF0b3IiLCJpc0EiLCJzRnJvbSIsInZhbHVlcyIsIm9Nb2RlbEZvcm1hdCIsImdldE1vZGVsRm9ybWF0Iiwib0RhdGUiLCJwYXJzZSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJzZXRNaWxsaXNlY29uZHMiLCJzVG8iLCJmb3JtYXQiLCJGaWx0ZXIiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiU2VtYW50aWNEYXRlT3BlcmF0b3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGaWx0ZXJPcGVyYXRvclV0aWwgZnJvbSBcInNhcC91aS9tZGMvY29uZGl0aW9uL0ZpbHRlck9wZXJhdG9yVXRpbFwiO1xuaW1wb3J0IE9wZXJhdG9yIGZyb20gXCJzYXAvdWkvbWRjL2NvbmRpdGlvbi9PcGVyYXRvclwiO1xuaW1wb3J0IEZpbHRlciBmcm9tIFwic2FwL3VpL21vZGVsL0ZpbHRlclwiO1xuaW1wb3J0IE1vZGVsT3BlcmF0b3IgZnJvbSBcInNhcC91aS9tb2RlbC9GaWx0ZXJPcGVyYXRvclwiO1xuaW1wb3J0IFZhbGlkYXRlRXhjZXB0aW9uIGZyb20gXCJzYXAvdWkvbW9kZWwvVmFsaWRhdGVFeGNlcHRpb25cIjtcblxuY29uc3QgYVN1cHBvcnRlZE9wZXJhdGlvbnMgPSBbXCJEQVRFXCIsIFwiRlJPTVwiLCBcIlRPXCIsIFwiREFURVJBTkdFXCJdO1xuY29uc3QgRFlOQU1JQ19EQVRFX0NBVEVHT1JZID0gXCJEWU5BTUlDLkRBVEVcIjtcbmNvbnN0IEZJWEVEX0RBVEVfQ0FURUdPUlkgPSBcIkZJWEVELkRBVEVcIjtcbmNvbnN0IERZTkFNSUNfREFURV9JTlRfQ0FURUdPUlkgPSBcIkRZTkFNSUMuREFURS5JTlRcIjtcbmNvbnN0IERZTkFNSUNfREFURVJBTkdFX0NBVEVHT1JZID0gXCJEWU5BTUlDLkRBVEVSQU5HRVwiO1xuY29uc3QgRFlOQU1JQ19NT05USF9DQVRFR09SWSA9IFwiRFlOQU1JQy5NT05USFwiO1xuY29uc3QgRklYRURfV0VFS19DQVRFR09SWSA9IFwiRklYRUQuV0VFS1wiO1xuY29uc3QgRklYRURfTU9OVEhfQ0FURUdPUlkgPSBcIkZJWEVELk1PTlRIXCI7XG5jb25zdCBGSVhFRF9RVUFSVEVSX0NBVEVHT1JZID0gXCJGSVhFRC5RVUFSVEVSXCI7XG5jb25zdCBGSVhFRF9ZRUFSX0NBVEVHT1JZID0gXCJGSVhFRC5ZRUFSXCI7XG5jb25zdCBEWU5BTUlDX1dFRUtfSU5UX0NBVEVHT1JZID0gXCJEWU5BTUlDLldFRUsuSU5UXCI7XG5jb25zdCBEWU5BTUlDX01PTlRIX0lOVF9DQVRFR09SWSA9IFwiRFlOQU1JQy5NT05USC5JTlRcIjtcbmNvbnN0IERZTkFNSUNfUVVBUlRFUl9JTlRfQ0FURUdPUlkgPSBcIkRZTkFNSUMuUVVBUlRFUi5JTlRcIjtcbmNvbnN0IERZTkFNSUNfWUVBUl9JTlRfQ0FURUdPUlkgPSBcIkRZTkFNSUMuWUVBUi5JTlRcIjtcbmNvbnN0IG1TZW1hbnRpY0RhdGVPcGVyYXRpb25zOiBhbnkgPSB7XG5cdFwiREFURVwiOiB7XG5cdFx0XCJrZXlcIjogXCJEQVRFXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX0RBVEVfQ0FURUdPUllcblx0fSxcblx0XCJGUk9NXCI6IHtcblx0XHRcImtleVwiOiBcIkZST01cIixcblx0XHRcImNhdGVnb3J5XCI6IERZTkFNSUNfREFURV9DQVRFR09SWVxuXHR9LFxuXHRcIlRPXCI6IHtcblx0XHRcImtleVwiOiBcIlRPXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX0RBVEVfQ0FURUdPUllcblx0fSxcblx0XCJEQVRFUkFOR0VcIjoge1xuXHRcdFwia2V5XCI6IFwiREFURVJBTkdFXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX0RBVEVSQU5HRV9DQVRFR09SWVxuXHR9LFxuXHRcIlNQRUNJRklDTU9OVEhcIjoge1xuXHRcdFwia2V5XCI6IFwiU1BFQ0lGSUNNT05USFwiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRFlOQU1JQ19NT05USF9DQVRFR09SWVxuXHR9LFxuXHRcIlRPREFZXCI6IHtcblx0XHRcImtleVwiOiBcIlRPREFZXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9EQVRFX0NBVEVHT1JZXG5cdH0sXG5cdFwiVE9EQVlGUk9NVE9cIjoge1xuXHRcdFwia2V5XCI6IFwiVE9EQVlGUk9NVE9cIixcblx0XHRcImNhdGVnb3J5XCI6IERZTkFNSUNfREFURV9JTlRfQ0FURUdPUllcblx0fSxcblx0XCJZRVNURVJEQVlcIjoge1xuXHRcdFwia2V5XCI6IFwiWUVTVEVSREFZXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9EQVRFX0NBVEVHT1JZXG5cdH0sXG5cdFwiVE9NT1JST1dcIjoge1xuXHRcdFwia2V5XCI6IFwiVE9NT1JST1dcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX0RBVEVfQ0FURUdPUllcblx0fSxcblx0XCJMQVNUREFZU1wiOiB7XG5cdFx0XCJrZXlcIjogXCJMQVNUREFZU1wiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRFlOQU1JQ19EQVRFX0lOVF9DQVRFR09SWVxuXHR9LFxuXHRcIk5FWFREQVlTXCI6IHtcblx0XHRcImtleVwiOiBcIk5FWFREQVlTXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX0RBVEVfSU5UX0NBVEVHT1JZXG5cdH0sXG5cdFwiVEhJU1dFRUtcIjoge1xuXHRcdFwia2V5XCI6IFwiVEhJU1dFRUtcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX1dFRUtfQ0FURUdPUllcblx0fSxcblx0XCJMQVNUV0VFS1wiOiB7XG5cdFx0XCJrZXlcIjogXCJMQVNUV0VFS1wiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfV0VFS19DQVRFR09SWVxuXHR9LFxuXHRcIkxBU1RXRUVLU1wiOiB7XG5cdFx0XCJrZXlcIjogXCJMQVNUV0VFS1NcIixcblx0XHRcImNhdGVnb3J5XCI6IERZTkFNSUNfV0VFS19JTlRfQ0FURUdPUllcblx0fSxcblx0XCJORVhUV0VFS1wiOiB7XG5cdFx0XCJrZXlcIjogXCJORVhUV0VFS1wiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfV0VFS19DQVRFR09SWVxuXHR9LFxuXHRcIk5FWFRXRUVLU1wiOiB7XG5cdFx0XCJrZXlcIjogXCJORVhUV0VFS1NcIixcblx0XHRcImNhdGVnb3J5XCI6IERZTkFNSUNfV0VFS19JTlRfQ0FURUdPUllcblx0fSxcblx0XCJUSElTTU9OVEhcIjoge1xuXHRcdFwia2V5XCI6IFwiVEhJU01PTlRIXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9NT05USF9DQVRFR09SWVxuXHR9LFxuXHRcIkxBU1RNT05USFwiOiB7XG5cdFx0XCJrZXlcIjogXCJMQVNUTU9OVEhcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX01PTlRIX0NBVEVHT1JZXG5cdH0sXG5cdFwiTEFTVE1PTlRIU1wiOiB7XG5cdFx0XCJrZXlcIjogXCJMQVNUTU9OVEhTXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX01PTlRIX0lOVF9DQVRFR09SWVxuXHR9LFxuXHRcIk5FWFRNT05USFwiOiB7XG5cdFx0XCJrZXlcIjogXCJORVhUTU9OVEhcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX01PTlRIX0NBVEVHT1JZXG5cdH0sXG5cdFwiTkVYVE1PTlRIU1wiOiB7XG5cdFx0XCJrZXlcIjogXCJORVhUTU9OVEhTXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX01PTlRIX0lOVF9DQVRFR09SWVxuXHR9LFxuXHRcIlRISVNRVUFSVEVSXCI6IHtcblx0XHRcImtleVwiOiBcIlRISVNRVUFSVEVSXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9RVUFSVEVSX0NBVEVHT1JZXG5cdH0sXG5cdFwiTEFTVFFVQVJURVJcIjoge1xuXHRcdFwia2V5XCI6IFwiTEFTVFFVQVJURVJcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX1FVQVJURVJfQ0FURUdPUllcblx0fSxcblx0XCJMQVNUUVVBUlRFUlNcIjoge1xuXHRcdFwia2V5XCI6IFwiTEFTVFFVQVJURVJTXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX1FVQVJURVJfSU5UX0NBVEVHT1JZXG5cdH0sXG5cdFwiTkVYVFFVQVJURVJcIjoge1xuXHRcdFwia2V5XCI6IFwiTkVYVFFVQVJURVJcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX1FVQVJURVJfQ0FURUdPUllcblx0fSxcblx0XCJORVhUUVVBUlRFUlNcIjoge1xuXHRcdFwia2V5XCI6IFwiTkVYVFFVQVJURVJTXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBEWU5BTUlDX1FVQVJURVJfSU5UX0NBVEVHT1JZXG5cdH0sXG5cdFwiUVVBUlRFUjFcIjoge1xuXHRcdFwia2V5XCI6IFwiUVVBUlRFUjFcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX1FVQVJURVJfQ0FURUdPUllcblx0fSxcblx0XCJRVUFSVEVSMlwiOiB7XG5cdFx0XCJrZXlcIjogXCJRVUFSVEVSMlwiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfUVVBUlRFUl9DQVRFR09SWVxuXHR9LFxuXHRcIlFVQVJURVIzXCI6IHtcblx0XHRcImtleVwiOiBcIlFVQVJURVIzXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9RVUFSVEVSX0NBVEVHT1JZXG5cdH0sXG5cdFwiUVVBUlRFUjRcIjoge1xuXHRcdFwia2V5XCI6IFwiUVVBUlRFUjRcIixcblx0XHRcImNhdGVnb3J5XCI6IEZJWEVEX1FVQVJURVJfQ0FURUdPUllcblx0fSxcblx0XCJUSElTWUVBUlwiOiB7XG5cdFx0XCJrZXlcIjogXCJUSElTWUVBUlwiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfWUVBUl9DQVRFR09SWVxuXHR9LFxuXHRcIkxBU1RZRUFSXCI6IHtcblx0XHRcImtleVwiOiBcIkxBU1RZRUFSXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9ZRUFSX0NBVEVHT1JZXG5cdH0sXG5cdFwiTEFTVFlFQVJTXCI6IHtcblx0XHRcImtleVwiOiBcIkxBU1RZRUFSU1wiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRFlOQU1JQ19ZRUFSX0lOVF9DQVRFR09SWVxuXHR9LFxuXHRcIk5FWFRZRUFSXCI6IHtcblx0XHRcImtleVwiOiBcIk5FWFRZRUFSXCIsXG5cdFx0XCJjYXRlZ29yeVwiOiBGSVhFRF9ZRUFSX0NBVEVHT1JZXG5cdH0sXG5cdFwiTkVYVFlFQVJTXCI6IHtcblx0XHRcImtleVwiOiBcIk5FWFRZRUFSU1wiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRFlOQU1JQ19ZRUFSX0lOVF9DQVRFR09SWVxuXHR9LFxuXHRcIllFQVJUT0RBVEVcIjoge1xuXHRcdFwia2V5XCI6IFwiWUVBUlRPREFURVwiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfWUVBUl9DQVRFR09SWVxuXHR9LFxuXHRcIkRBVEVUT1lFQVJcIjoge1xuXHRcdFwia2V5XCI6IFwiREFURVRPWUVBUlwiLFxuXHRcdFwiY2F0ZWdvcnlcIjogRklYRURfWUVBUl9DQVRFR09SWVxuXHR9XG59O1xuXG5mdW5jdGlvbiBfZ2V0RGF0ZVJhbmdlT3BlcmF0b3IoKSB7XG5cdHJldHVybiBuZXcgT3BlcmF0b3Ioe1xuXHRcdG5hbWU6IFwiREFURVJBTkdFXCIsXG5cdFx0ZmlsdGVyT3BlcmF0b3I6IE1vZGVsT3BlcmF0b3IuQlQsXG5cdFx0YWxpYXM6IHsgRGF0ZTogXCJEQVRFUkFOR0VcIiwgRGF0ZVRpbWU6IFwiREFURVJBTkdFXCIgfSxcblx0XHR2YWx1ZVR5cGVzOiBbKE9wZXJhdG9yIGFzIGFueSkuVmFsdWVUeXBlLlNlbGYsIChPcGVyYXRvciBhcyBhbnkpLlZhbHVlVHlwZS5TZWxmXSxcblx0XHR2YWxpZGF0ZTogZnVuY3Rpb24gKGFWYWx1ZXM6IGFueSwgb1R5cGU6IGFueSkge1xuXHRcdFx0aWYgKGFWYWx1ZXMubGVuZ3RoIDwgMikge1xuXHRcdFx0XHR0aHJvdyBuZXcgVmFsaWRhdGVFeGNlcHRpb24oXCJEYXRlIFJhbmdlIG11c3QgaGF2ZSB0d28gdmFsdWVzXCIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgZnJvbURhdGUgPSBuZXcgRGF0ZShhVmFsdWVzWzBdKTtcblx0XHRcdFx0Y29uc3QgdG9EYXRlID0gbmV3IERhdGUoYVZhbHVlc1sxXSk7XG5cdFx0XHRcdGlmIChmcm9tRGF0ZS5nZXRUaW1lKCkgPiB0b0RhdGUuZ2V0VGltZSgpKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IFZhbGlkYXRlRXhjZXB0aW9uKFwiRnJvbSBEYXRlIFNob3VsZCBCZSBMZXNzIFRoYW4gVG8gRGF0ZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0T3BlcmF0b3IucHJvdG90eXBlLnZhbGlkYXRlLmFwcGx5KHRoaXMsIFthVmFsdWVzLCBvVHlwZV0pO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIF9nZXREYXRlT3BlcmF0b3IoKSB7XG5cdHJldHVybiBuZXcgT3BlcmF0b3Ioe1xuXHRcdG5hbWU6IFwiREFURVwiLFxuXHRcdGFsaWFzOiB7IERhdGU6IFwiREFURVwiLCBEYXRlVGltZTogXCJEQVRFXCIgfSxcblx0XHRmaWx0ZXJPcGVyYXRvcjogTW9kZWxPcGVyYXRvci5FUSxcblx0XHR2YWx1ZVR5cGVzOiBbKE9wZXJhdG9yIGFzIGFueSkuVmFsdWVUeXBlLlNlbGZdLFxuXHRcdGdldE1vZGVsRmlsdGVyOiBmdW5jdGlvbiAob0NvbmRpdGlvbjogYW55LCBzRmllbGRQYXRoOiBhbnksIG9UeXBlOiBhbnkpIHtcblx0XHRcdHJldHVybiBTZW1hbnRpY0RhdGVPcGVyYXRvcnMuZ2V0TW9kZWxGaWx0ZXJGb3JEYXRlKG9Db25kaXRpb24sIHNGaWVsZFBhdGgsIG9UeXBlKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBfZ2V0RnJvbU9wZXJhdG9yKCkge1xuXHRyZXR1cm4gbmV3IE9wZXJhdG9yKHtcblx0XHRuYW1lOiBcIkZST01cIixcblx0XHRhbGlhczogeyBEYXRlOiBcIkZST01cIiwgRGF0ZVRpbWU6IFwiRlJPTVwiIH0sXG5cdFx0ZmlsdGVyT3BlcmF0b3I6IE1vZGVsT3BlcmF0b3IuR0UsXG5cdFx0dmFsdWVUeXBlczogWyhPcGVyYXRvciBhcyBhbnkpLlZhbHVlVHlwZS5TZWxmXVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gX2dldFRvT3BlcmF0b3IoKSB7XG5cdHJldHVybiBuZXcgT3BlcmF0b3Ioe1xuXHRcdG5hbWU6IFwiVE9cIixcblx0XHRhbGlhczogeyBEYXRlOiBcIlRPXCIsIERhdGVUaW1lOiBcIlRPXCIgfSxcblx0XHRmaWx0ZXJPcGVyYXRvcjogTW9kZWxPcGVyYXRvci5MRSxcblx0XHR2YWx1ZVR5cGVzOiBbKE9wZXJhdG9yIGFzIGFueSkuVmFsdWVUeXBlLlNlbGZdLFxuXHRcdGdldE1vZGVsRmlsdGVyOiBmdW5jdGlvbiAob0NvbmRpdGlvbjogYW55LCBzRmllbGRQYXRoOiBhbnksIG9UeXBlOiBhbnkpIHtcblx0XHRcdHJldHVybiBTZW1hbnRpY0RhdGVPcGVyYXRvcnMuZ2V0TW9kZWxGaWx0ZXJGb3JUbyhvQ29uZGl0aW9uLCBzRmllbGRQYXRoLCBvVHlwZSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gX2ZpbHRlck9wZXJhdGlvbihvT3BlcmF0aW9uOiBhbnksIGFPcGVyYXRvckNvbmZpZ3VyYXRpb246IGFueSkge1xuXHRpZiAoIWFPcGVyYXRvckNvbmZpZ3VyYXRpb24pIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRhT3BlcmF0b3JDb25maWd1cmF0aW9uID0gQXJyYXkuaXNBcnJheShhT3BlcmF0b3JDb25maWd1cmF0aW9uKSA/IGFPcGVyYXRvckNvbmZpZ3VyYXRpb24gOiBbYU9wZXJhdG9yQ29uZmlndXJhdGlvbl07XG5cdGxldCBiUmVzdWx0O1xuXG5cdGFPcGVyYXRvckNvbmZpZ3VyYXRpb24uc29tZShmdW5jdGlvbiAob09wZXJhdG9yQ29uZmlndXJhdGlvbjogYW55KSB7XG5cdFx0bGV0IGo7XG5cdFx0aWYgKCFvT3BlcmF0b3JDb25maWd1cmF0aW9uLnBhdGgpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRjb25zdCBzVmFsdWUgPSBvT3BlcmF0aW9uW29PcGVyYXRvckNvbmZpZ3VyYXRpb24ucGF0aF07XG5cdFx0Y29uc3QgYkV4Y2x1ZGUgPSBvT3BlcmF0b3JDb25maWd1cmF0aW9uLmV4Y2x1ZGUgfHwgZmFsc2U7XG5cdFx0bGV0IGFPcGVyYXRvclZhbHVlcztcblxuXHRcdGlmIChvT3BlcmF0b3JDb25maWd1cmF0aW9uLmNvbnRhaW5zICYmIHNWYWx1ZSkge1xuXHRcdFx0YU9wZXJhdG9yVmFsdWVzID0gb09wZXJhdG9yQ29uZmlndXJhdGlvbi5jb250YWlucy5zcGxpdChcIixcIik7XG5cdFx0XHRiUmVzdWx0ID0gYkV4Y2x1ZGU7XG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgYU9wZXJhdG9yVmFsdWVzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmIChiRXhjbHVkZSAmJiBzVmFsdWUuaW5kZXhPZihhT3BlcmF0b3JWYWx1ZXNbal0pID4gLTEpIHtcblx0XHRcdFx0XHRiUmVzdWx0ID0gZmFsc2U7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIWJFeGNsdWRlICYmIHNWYWx1ZS5pbmRleE9mKGFPcGVyYXRvclZhbHVlc1tqXSkgPiAtMSkge1xuXHRcdFx0XHRcdGJSZXN1bHQgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKG9PcGVyYXRvckNvbmZpZ3VyYXRpb24uZXF1YWxzICYmIHNWYWx1ZSkge1xuXHRcdFx0YU9wZXJhdG9yVmFsdWVzID0gb09wZXJhdG9yQ29uZmlndXJhdGlvbi5lcXVhbHMuc3BsaXQoXCIsXCIpO1xuXHRcdFx0YlJlc3VsdCA9IGJFeGNsdWRlO1xuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGFPcGVyYXRvclZhbHVlcy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRpZiAoYkV4Y2x1ZGUgJiYgc1ZhbHVlID09PSBhT3BlcmF0b3JWYWx1ZXNbal0pIHtcblx0XHRcdFx0XHRiUmVzdWx0ID0gZmFsc2U7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIWJFeGNsdWRlICYmIHNWYWx1ZSA9PT0gYU9wZXJhdG9yVmFsdWVzW2pdKSB7XG5cdFx0XHRcdFx0YlJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pO1xuXHRyZXR1cm4gYlJlc3VsdDtcbn1cbmNvbnN0IFNlbWFudGljRGF0ZU9wZXJhdG9ycyA9IHtcblx0Ly8gRXh0ZW5kaW5nIG9wZXJhdG9ycyBmb3IgU2VtYXRpYyBEYXRlIENvbnRyb2xcblx0YWRkU2VtYW50aWNEYXRlT3BlcmF0b3JzOiBmdW5jdGlvbiAoKSB7XG5cdFx0RmlsdGVyT3BlcmF0b3JVdGlsLmFkZE9wZXJhdG9yKF9nZXREYXRlUmFuZ2VPcGVyYXRvcigpKTtcblx0XHRGaWx0ZXJPcGVyYXRvclV0aWwuYWRkT3BlcmF0b3IoX2dldERhdGVPcGVyYXRvcigpKTtcblx0XHRGaWx0ZXJPcGVyYXRvclV0aWwuYWRkT3BlcmF0b3IoX2dldEZyb21PcGVyYXRvcigpKTtcblx0XHRGaWx0ZXJPcGVyYXRvclV0aWwuYWRkT3BlcmF0b3IoX2dldFRvT3BlcmF0b3IoKSk7XG5cdH0sXG5cdGdldFN1cHBvcnRlZE9wZXJhdGlvbnM6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gYVN1cHBvcnRlZE9wZXJhdGlvbnM7XG5cdH0sXG5cdGdldFNlbWFudGljRGF0ZU9wZXJhdGlvbnM6IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gT2JqZWN0LmtleXMobVNlbWFudGljRGF0ZU9wZXJhdGlvbnMpO1xuXHR9LFxuXHQvLyBUT0RPOiBXb3VsZCBuZWVkIHRvIGNoZWNrIHdpdGggTURDIGZvciByZW1vdmVPcGVyYXRvciBtZXRob2Rcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuXHRyZW1vdmVTZW1hbnRpY0RhdGVPcGVyYXRvcnM6IGZ1bmN0aW9uICgpIHt9LFxuXHQvLyBUbyBmaWx0ZXIgb3BlcmF0b3JzIGJhc2VkIG9uIG1hbmlmZXN0IGFPcGVyYXRvckNvbmZpZ3VyYXRpb24gc2V0dGluZ3Ncblx0Z2V0RmlsdGVyT3BlcmF0aW9uczogZnVuY3Rpb24gKGFPcGVyYXRvckNvbmZpZ3VyYXRpb246IGFueSkge1xuXHRcdGNvbnN0IGFPcGVyYXRpb25zID0gW107XG5cdFx0Zm9yIChjb25zdCBuIGluIG1TZW1hbnRpY0RhdGVPcGVyYXRpb25zKSB7XG5cdFx0XHRjb25zdCBvT3BlcmF0aW9uID0gbVNlbWFudGljRGF0ZU9wZXJhdGlvbnNbbl07XG5cdFx0XHRpZiAoX2ZpbHRlck9wZXJhdGlvbihvT3BlcmF0aW9uLCBhT3BlcmF0b3JDb25maWd1cmF0aW9uKSkge1xuXHRcdFx0XHRhT3BlcmF0aW9ucy5wdXNoKG9PcGVyYXRpb24pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gYU9wZXJhdGlvbnMubWFwKGZ1bmN0aW9uIChvT3BlcmF0aW9uOiBhbnkpIHtcblx0XHRcdHJldHVybiBvT3BlcmF0aW9uLmtleTtcblx0XHR9KTtcblx0fSxcblx0aGFzU2VtYW50aWNEYXRlT3BlcmF0aW9uczogZnVuY3Rpb24gKG9Db25kaXRpb25zOiBhbnkpIHtcblx0XHRjb25zdCBhU2VtYW50aWNEYXRlT3BzID0gdGhpcy5nZXRTZW1hbnRpY0RhdGVPcGVyYXRpb25zKCk7XG5cdFx0Zm9yIChjb25zdCBuIGluIG9Db25kaXRpb25zKSB7XG5cdFx0XHRjb25zdCBhRmlsdGVyQ29uZHRpb24gPSBvQ29uZGl0aW9uc1tuXTtcblx0XHRcdGNvbnN0IG9TZW1hbnRpY09wZXJhdG9yID0gYUZpbHRlckNvbmR0aW9uLmZpbmQoZnVuY3Rpb24gKG9Db25kaXRpb246IGFueSkge1xuXHRcdFx0XHRyZXR1cm4gYVNlbWFudGljRGF0ZU9wcy5pbmRleE9mKG9Db25kaXRpb24ub3BlcmF0b3IpID4gLTE7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChvU2VtYW50aWNPcGVyYXRvcikge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdGdldE1vZGVsRmlsdGVyRm9yRGF0ZTogZnVuY3Rpb24gKG9Db25kaXRpb246IGFueSwgc0ZpZWxkUGF0aDogYW55LCBvVHlwZTogYW55KSB7XG5cdFx0aWYgKG9UeXBlLmlzQShcInNhcC51aS5tb2RlbC5vZGF0YS50eXBlLkRhdGVUaW1lT2Zmc2V0XCIpKSB7XG5cdFx0XHRjb25zdCBzRnJvbSA9IG9Db25kaXRpb24udmFsdWVzWzBdO1xuXHRcdFx0Y29uc3Qgb01vZGVsRm9ybWF0ID0gb1R5cGUuZ2V0TW9kZWxGb3JtYXQoKTsgLy8gdXNlIE1vZGVsRm9ybWF0IHRvIGNvbnZlcnQgaW4gSlMtRGF0ZSBhbmQgYWRkIDIzOjU5OjU5XG5cdFx0XHRjb25zdCBvRGF0ZSA9IG9Nb2RlbEZvcm1hdC5wYXJzZShzRnJvbSk7XG5cdFx0XHRvRGF0ZS5zZXRIb3VycygyMyk7XG5cdFx0XHRvRGF0ZS5zZXRNaW51dGVzKDU5KTtcblx0XHRcdG9EYXRlLnNldFNlY29uZHMoNTkpO1xuXHRcdFx0b0RhdGUuc2V0TWlsbGlzZWNvbmRzKDk5OSk7XG5cdFx0XHRjb25zdCBzVG8gPSBvTW9kZWxGb3JtYXQuZm9ybWF0KG9EYXRlKTtcblx0XHRcdHJldHVybiBuZXcgRmlsdGVyKHsgcGF0aDogc0ZpZWxkUGF0aCwgb3BlcmF0b3I6IE1vZGVsT3BlcmF0b3IuQlQsIHZhbHVlMTogc0Zyb20sIHZhbHVlMjogc1RvIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbmV3IEZpbHRlcih7IHBhdGg6IHNGaWVsZFBhdGgsIG9wZXJhdG9yOiBNb2RlbE9wZXJhdG9yLkVRLCB2YWx1ZTE6IG9Db25kaXRpb24udmFsdWVzWzBdIH0pO1xuXHRcdH1cblx0fSxcblxuXHRnZXRNb2RlbEZpbHRlckZvclRvOiBmdW5jdGlvbiAob0NvbmRpdGlvbjogYW55LCBzRmllbGRQYXRoOiBhbnksIG9UeXBlOiBhbnkpIHtcblx0XHRpZiAob1R5cGUuaXNBKFwic2FwLnVpLm1vZGVsLm9kYXRhLnR5cGUuRGF0ZVRpbWVPZmZzZXRcIikpIHtcblx0XHRcdGNvbnN0IHZhbHVlID0gb0NvbmRpdGlvbi52YWx1ZXNbMF07XG5cdFx0XHRjb25zdCBvTW9kZWxGb3JtYXQgPSBvVHlwZS5nZXRNb2RlbEZvcm1hdCgpOyAvLyB1c2UgTW9kZWxGb3JtYXQgdG8gY29udmVydCBpbiBKUy1EYXRlIGFuZCBhZGQgMjM6NTk6NTlcblx0XHRcdGNvbnN0IG9EYXRlID0gb01vZGVsRm9ybWF0LnBhcnNlKHZhbHVlKTtcblx0XHRcdG9EYXRlLnNldEhvdXJzKDIzKTtcblx0XHRcdG9EYXRlLnNldE1pbnV0ZXMoNTkpO1xuXHRcdFx0b0RhdGUuc2V0U2Vjb25kcyg1OSk7XG5cdFx0XHRvRGF0ZS5zZXRNaWxsaXNlY29uZHMoOTk5KTtcblx0XHRcdGNvbnN0IHNUbyA9IG9Nb2RlbEZvcm1hdC5mb3JtYXQob0RhdGUpO1xuXHRcdFx0cmV0dXJuIG5ldyBGaWx0ZXIoeyBwYXRoOiBzRmllbGRQYXRoLCBvcGVyYXRvcjogTW9kZWxPcGVyYXRvci5MRSwgdmFsdWUxOiBzVG8gfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBuZXcgRmlsdGVyKHsgcGF0aDogc0ZpZWxkUGF0aCwgb3BlcmF0b3I6IE1vZGVsT3BlcmF0b3IuTEUsIHZhbHVlMTogb0NvbmRpdGlvbi52YWx1ZXNbMF0gfSk7XG5cdFx0fVxuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTZW1hbnRpY0RhdGVPcGVyYXRvcnM7XG4iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBO0FBQUE7Ozs7RUFNQSxJQUFNQSxvQkFBb0IsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQztFQUNoRSxJQUFNQyxxQkFBcUIsR0FBRyxjQUFjO0VBQzVDLElBQU1DLG1CQUFtQixHQUFHLFlBQVk7RUFDeEMsSUFBTUMseUJBQXlCLEdBQUcsa0JBQWtCO0VBQ3BELElBQU1DLDBCQUEwQixHQUFHLG1CQUFtQjtFQUN0RCxJQUFNQyxzQkFBc0IsR0FBRyxlQUFlO0VBQzlDLElBQU1DLG1CQUFtQixHQUFHLFlBQVk7RUFDeEMsSUFBTUMsb0JBQW9CLEdBQUcsYUFBYTtFQUMxQyxJQUFNQyxzQkFBc0IsR0FBRyxlQUFlO0VBQzlDLElBQU1DLG1CQUFtQixHQUFHLFlBQVk7RUFDeEMsSUFBTUMseUJBQXlCLEdBQUcsa0JBQWtCO0VBQ3BELElBQU1DLDBCQUEwQixHQUFHLG1CQUFtQjtFQUN0RCxJQUFNQyw0QkFBNEIsR0FBRyxxQkFBcUI7RUFDMUQsSUFBTUMseUJBQXlCLEdBQUcsa0JBQWtCO0VBQ3BELElBQU1DLHVCQUE0QixHQUFHO0lBQ3BDLE1BQU0sRUFBRTtNQUNQLEtBQUssRUFBRSxNQUFNO01BQ2IsVUFB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