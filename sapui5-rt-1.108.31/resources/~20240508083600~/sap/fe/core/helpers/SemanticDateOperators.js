/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/Operator","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ValidateException"],function(e,t,r,a,T){"use strict";var o=["DATE","FROM","TO","DATERANGE"];var E="DYNAMIC.DATE";var n="FIXED.DATE";var i="DYNAMIC.DATE.INT";var A="DYNAMIC.DATERANGE";var u="DYNAMIC.MONTH";var y="FIXED.WEEK";var l="FIXED.MONTH";var s="FIXED.QUARTER";var R="FIXED.YEAR";var c="DYNAMIC.WEEK.INT";var O="DYNAMIC.MONTH.INT";var f="DYNAMIC.QUARTER.INT";var D="DYNAMIC.YEAR.INT";var S={DATE:{key:"DATE",category:E},FROM:{key:"FROM",category:E},TO:{key:"TO",category:E},DATERANGE:{key:"DATERANGE",category:A},SPECIFICMONTH:{key:"SPECIFICMONTH",category:u},TODAY:{key:"TODAY",category:n},TODAYFROMTO:{key:"TODAYFROMTO",category:i},YESTERDAY:{key:"YESTERDAY",category:n},TOMORROW:{key:"TOMORROW",category:n},LASTDAYS:{key:"LASTDAYS",category:i},NEXTDAYS:{key:"NEXTDAYS",category:i},THISWEEK:{key:"THISWEEK",category:y},LASTWEEK:{key:"LASTWEEK",category:y},LASTWEEKS:{key:"LASTWEEKS",category:c},NEXTWEEK:{key:"NEXTWEEK",category:y},NEXTWEEKS:{key:"NEXTWEEKS",category:c},THISMONTH:{key:"THISMONTH",category:l},LASTMONTH:{key:"LASTMONTH",category:l},LASTMONTHS:{key:"LASTMONTHS",category:O},NEXTMONTH:{key:"NEXTMONTH",category:l},NEXTMONTHS:{key:"NEXTMONTHS",category:O},THISQUARTER:{key:"THISQUARTER",category:s},LASTQUARTER:{key:"LASTQUARTER",category:s},LASTQUARTERS:{key:"LASTQUARTERS",category:f},NEXTQUARTER:{key:"NEXTQUARTER",category:s},NEXTQUARTERS:{key:"NEXTQUARTERS",category:f},QUARTER1:{key:"QUARTER1",category:s},QUARTER2:{key:"QUARTER2",category:s},QUARTER3:{key:"QUARTER3",category:s},QUARTER4:{key:"QUARTER4",category:s},THISYEAR:{key:"THISYEAR",category:R},LASTYEAR:{key:"LASTYEAR",category:R},LASTYEARS:{key:"LASTYEARS",category:D},NEXTYEAR:{key:"NEXTYEAR",category:R},NEXTYEARS:{key:"NEXTYEARS",category:D},YEARTODATE:{key:"YEARTODATE",category:R},DATETOYEAR:{key:"DATETOYEAR",category:R}};function p(){return new t({name:"DATERANGE",filterOperator:a.BT,alias:{Date:"DATERANGE",DateTime:"DATERANGE"},valueTypes:[t.ValueType.Self,t.ValueType.Self],validate:function(e,r){if(e.length<2){throw new T("Date Range must have two values")}else{var a=new Date(e[0]);var o=new Date(e[1]);if(a.getTime()>o.getTime()){throw new T("From Date Should Be Less Than To Date")}}t.prototype.validate.apply(this,[e,r])}})}function v(){return new t({name:"DATE",alias:{Date:"DATE",DateTime:"DATE"},filterOperator:a.EQ,valueTypes:[t.ValueType.Self],getModelFilter:function(e,t,r){return d.getModelFilterForDate(e,t,r)}})}function g(){return new t({name:"FROM",alias:{Date:"FROM",DateTime:"FROM"},filterOperator:a.GE,valueTypes:[t.ValueType.Self]})}function N(){return new t({name:"TO",alias:{Date:"TO",DateTime:"TO"},filterOperator:a.LE,valueTypes:[t.ValueType.Self],getModelFilter:function(e,t,r){return d.getModelFilterForTo(e,t,r)}})}function M(e,t){if(!t){return true}t=Array.isArray(t)?t:[t];var r;t.some(function(t){var a;if(!t.path){return false}var T=e[t.path];var o=t.exclude||false;var E;if(t.contains&&T){E=t.contains.split(",");r=o;for(a=0;a<E.length;a++){if(o&&T.indexOf(E[a])>-1){r=false;return true}else if(!o&&T.indexOf(E[a])>-1){r=true;return true}}}if(t.equals&&T){E=t.equals.split(",");r=o;for(a=0;a<E.length;a++){if(o&&T===E[a]){r=false;return true}else if(!o&&T===E[a]){r=true;return true}}}return false});return r}var d={addSemanticDateOperators:function(){e.addOperator(p());e.addOperator(v());e.addOperator(g());e.addOperator(N())},getSupportedOperations:function(){return o},getSemanticDateOperations:function(){return Object.keys(S)},removeSemanticDateOperators:function(){},getFilterOperations:function(e){var t=[];for(var r in S){var a=S[r];if(M(a,e)){t.push(a)}}return t.map(function(e){return e.key})},hasSemanticDateOperations:function(e){var t=this.getSemanticDateOperations();for(var r in e){var a=e[r];var T=a.find(function(e){return t.indexOf(e.operator)>-1});if(T){return false}}return true},getModelFilterForDate:function(e,t,T){if(T.isA("sap.ui.model.odata.type.DateTimeOffset")){var o=e.values[0];var E=T.getModelFormat();var n=E.parse(o);n.setHours(23);n.setMinutes(59);n.setSeconds(59);n.setMilliseconds(999);var i=E.format(n);return new r({path:t,operator:a.BT,value1:o,value2:i})}else{return new r({path:t,operator:a.EQ,value1:e.values[0]})}},getModelFilterForTo:function(e,t,T){if(T.isA("sap.ui.model.odata.type.DateTimeOffset")){var o=e.values[0];var E=T.getModelFormat();var n=E.parse(o);n.setHours(23);n.setMinutes(59);n.setSeconds(59);n.setMilliseconds(999);var i=E.format(n);return new r({path:t,operator:a.LE,value1:i})}else{return new r({path:t,operator:a.LE,value1:e.values[0]})}}};return d},false);
//# sourceMappingURL=SemanticDateOperators.js.map