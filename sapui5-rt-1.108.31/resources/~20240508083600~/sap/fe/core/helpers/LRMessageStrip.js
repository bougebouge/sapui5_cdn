/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/message/Message"],function(e,s){"use strict";var t={};var a=function(){function a(){var s=e.getMessageManager();this.customMessageInfo={messageManagerDataBinding:s.getMessageModel().bindList("/"),multiModeControlMessagesMap:{}}}t.LRMessageStrip=a;var n=a.prototype;n.getCustomMessageInfo=function e(){return this.customMessageInfo};n.destroy=function e(){this.customMessageInfo.messageManagerDataBinding.detachChange(this._eventHandlerCustomMessage,this)};n._getMessagesWithSameTargetThanCustomMessage=function s(){var t=this;var a=e.getMessageManager();return a.getMessageModel().getData().filter(function(e){var s;return e.getTargets()[0]===((s=t.customMessageInfo.currentMessage)===null||s===void 0?void 0:s.getTargets()[0])&&e!==t.customMessageInfo.currentMessage})};n._eventHandlerCustomMessage=function s(){var t=this;var a=e.getMessageManager();if(this.customMessageInfo.currentMessage){var n=this._getMessagesWithSameTargetThanCustomMessage();var o=!!a.getMessageModel().getData().find(function(e){return e===t.customMessageInfo.currentMessage});if(n.length>0&&o){var g;a.removeMessages([(g=this.customMessageInfo)===null||g===void 0?void 0:g.currentMessage])}else if(n.length===0&&!o){a.addMessages([this.customMessageInfo.currentMessage])}}};n.createCustomMessage=function t(a,n){var o,g;var r=n.message;var i=n.table;var M=n.skipMessageManagerUpdate;var u=(o=i.getRowBinding())===null||o===void 0?void 0:o.getPath();var l=e.getMessageManager();var c=this.customMessageInfo.multiModeControlMessagesMap;c[i.getId()]=r;if(!u){i.attachEventOnce("bindingUpdated",n,this.createCustomMessage,this);return}if((g=c[i.getId()])!==null&&g!==void 0&&g.onClose){var d;i.getDataStateIndicator().detachEvent("close",(d=c[i.getId()])===null||d===void 0?void 0:d.onClose,this)}var h=i.getModel();var f=r?new s({message:r.message,type:r.type,target:[u],persistent:true,processor:h}):null;this.customMessageInfo.messageManagerDataBinding.detachChange(this._eventHandlerCustomMessage,this);if(!M){if(this.customMessageInfo.currentMessage){l.removeMessages([this.customMessageInfo.currentMessage])}if(f){this.customMessageInfo.currentMessage=f}else{delete this.customMessageInfo.currentMessage}if(f&&this._getMessagesWithSameTargetThanCustomMessage().length===0){l.addMessages([f])}}this.customMessageInfo.messageManagerDataBinding.attachChange(this._eventHandlerCustomMessage,this);this.attachDataStateIndicatorCloseEvent(i,c,r===null||r===void 0?void 0:r.onClose)};n.attachDataStateIndicatorCloseEvent=function e(s,t,a){if(a){s.getDataStateIndicator().attachEventOnce("close",a,this)}s.getDataStateIndicator().attachEventOnce("close",function(){delete t[s.getId()]})};n.onSelectMultipleModeControl=function e(s,t){var a=t._getTable();var n=this.customMessageInfo.multiModeControlMessagesMap[a.getId()];this.createCustomMessage(null,{message:n,table:a})};n.showCustomMessage=function e(s,t,a,n){var o=this;var g=Array.isArray(a)?a:[a];var r=t._isMultiMode();var i;if(s){s.onClose=n}if(r){var M=t._getMultiModeControl();M.detachEvent("select",this.onSelectMultipleModeControl,this);M.attachEvent("select",t,this.onSelectMultipleModeControl,this);M.getAllInnerControls(true).forEach(function(e,t){if(e.isA("sap.fe.macros.table.TableAPI")){if(!a||g.indexOf(t.toString())!==-1){i=e.getContent();o.createCustomMessage(null,{message:s,table:i,skipMessageManagerUpdate:M.getSelectedInnerControl()!==e})}}});return}i=t._getTable();this.createCustomMessage(null,{message:s,table:i})};return a}();t.LRMessageStrip=a;return t},false);
//# sourceMappingURL=LRMessageStrip.js.map