/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/MetaModelConverter"],function(t){"use strict";var e={};var n;(function(t){t["TypeSingleton"]="Singleton";t["TypeEntity"]="EntitySet"})(n||(n={}));e.TypeOfEntity=n;var i={isStickySessionSupported:function(t){var e=t.getObject("/");for(var n in e){if(e[n].$kind==="EntitySet"&&t.getObject("/".concat(n,"@com.sap.vocabularies.Session.v1.StickySessionSupported"))){return true}}return false},isDraftSupported:function(t,e){var n=t.getMetaContext(e);var i=this.getTargetEntitySet(n),o,r;if(n.getProperty&&n.getProperty()&&n.getProperty().$ContainsTarget===true){r=t.getMetaPath(e).split("/").filter(Boolean);if(r.length){for(var a=r.length-1;a>=0;a--){o=t.getMetaContext(t.getMetaPath("/".concat(r[a])));if(o.getObject("$kind")==="EntitySet"){i=this.getTargetEntitySet(o);break}}}}else{i=this.getTargetEntitySet(n)}var d=t.getMetaContext(i);if(d.getObject("@com.sap.vocabularies.Common.v1.DraftRoot")||d.getObject("@com.sap.vocabularies.Common.v1.DraftNode")){return true}return false},isObjectPathDraftSupported:function(t){var e,n,o,r,a,d,l;var u=t.targetEntitySet;var v=i.isDraftRoot(u);var g=i.isDraftNode(u);var s=(e=t.targetObject)!==null&&e!==void 0&&e.containsTarget&&((n=t.startingEntitySet)!==null&&n!==void 0&&(o=n.annotations)!==null&&o!==void 0&&(r=o.Common)!==null&&r!==void 0&&r.DraftRoot||(a=t.startingEntitySet)!==null&&a!==void 0&&(d=a.annotations)!==null&&d!==void 0&&(l=d.Common)!==null&&l!==void 0&&l.DraftNode)?true:false;return v||g||!u&&s},isCollaborationDraftSupported:function(t,e){var n;var i=(e===null||e===void 0?void 0:(n=e.context)===null||n===void 0?void 0:n.getModel())||t;var o=i.getObject("/");for(var r in o){if(o[r].$kind==="EntitySet"&&i.getObject("/".concat(r,"@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction"))){return true}}return false},getDraftRootPath:function(e){var n=e.getModel().getMetaModel();var i=function(e,o){var r;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var d=a?e:(r=new RegExp(/.*(?=\/)/).exec(e))===null||r===void 0?void 0:r[0];if(d&&d!=="/"){var l,u;var v=n.getMetaPath(d);var g=t.getInvolvedDataModelObjects(n.getContext(v));if((l=g.targetEntitySet)!==null&&l!==void 0&&(u=l.annotations.Common)!==null&&u!==void 0&&u.DraftRoot){return d}return i(d,o,false)}return undefined};return i(e.getPath(),e.getModel())},getTargetEntitySet:function(t){var e=t.getPath();if(t.getObject("$kind")==="EntitySet"||t.getObject("$kind")==="Action"||t.getObject("0/$kind")==="Action"){return e}var n=i.getEntitySetPath(e);return"/".concat(t.getObject(n))},getEntitySetPath:function(t,e){var n="";if(!e){n="/".concat(t.split("/").filter(i.filterOutNavPropBinding).join("/$NavigationPropertyBinding/"))}else{var o=t.split("/").filter(i.filterOutNavPropBinding);if(o.length>1){var r={growingPath:"/",pendingNavPropBinding:""};var a=o.reduce(function(t,n,i){var o=!!i&&"/$NavigationPropertyBinding/"||"";var r=t.growingPath,a=t.pendingNavPropBinding;var d=r+o;var l=e.getObject(d);var u=a?"".concat(a,"/").concat(n):n;if(l&&Object.keys(l).length>0&&l.hasOwnProperty(u)){r=d+u.replace("/","%2F");a=""}else{a+=a?"/".concat(n):n}return{growingPath:r,pendingNavPropBinding:a}},r);n=a.growingPath}else{n="/".concat(o[0])}}return n},getActionParameterItemsModelPath:function(t){return t&&t.$Name?"{path: 'mvfview>/".concat(t.$Name,"'}"):undefined},filterOutNavPropBinding:function(t){return t!==""&&t!=="$NavigationPropertyBinding"},enhanceInternalJSONModel:function(t){var e=t.bindContext;t.bindContext=function(t,n,i){for(var o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++){r[a-3]=arguments[a]}n=e.apply(this,[t,n,i].concat(r));var d=n.getBoundContext;n.getBoundContext=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++){e[n]=arguments[n]}var i=d.apply.apply(d,[this].concat(e));if(i&&!i.setProperty){i.setProperty=function(t,e){if(this.getObject()===undefined){this.getModel().setProperty(this.getPath(),{})}this.getModel().setProperty(t,e,this)}}return i};return n}},enhanceUiJSONModel:function(t,e){var n=t.setProperty;t.setProperty=function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++){o[r]=arguments[r]}var a=o[1];if(o[0]==="/isEditable"){t.setProperty("/editMode",a?e.EditMode.Editable:e.EditMode.Display,o[2],o[3])}return n.apply(this,[].concat(o))}},isFilteringCaseSensitive:function(t){if(!t){return undefined}var e=t.getObject("/@Org.OData.Capabilities.V1.FilterFunctions");return e?e.indexOf("tolower")===-1:true},getMetaPathForContext:function(t){var e=t.getModel(),n=e.getMetaModel(),i=t.getPath();return n&&i&&n.getMetaPath(i)},getAbsoluteMetaPathForListBinding:function(t,e){var n=t.getModel().getMetaModel();var i;if(typeof e==="string"){if(e.startsWith("/")){i=n.getMetaPath(e)}else{var o=t.getBindingContext();var r=o.getPath();i=n.getMetaPath("".concat(r,"/").concat(e))}}else{var a=e;var d=a.getRootBinding();if(a===d){i=n.getMetaPath(a.getPath())}else{var l=d.getPath();var u=a.getPath();i=n.getMetaPath("".concat(l,"/").concat(u))}}return i},isSingleton:function(t){if((t===null||t===void 0?void 0:t._type)===n.TypeSingleton){return true}return false},isDraftRoot:function(t){var e;if(i.isSingleton(t)){return false}return t&&(e=t.annotations.Common)!==null&&e!==void 0&&e.DraftRoot?true:false},isDraftNode:function(t){var e;if(i.isSingleton(t)){return false}return t&&(e=t.annotations.Common)!==null&&e!==void 0&&e.DraftNode?true:false},isSticky:function(t){var e;if(i.isSingleton(t)){return false}return t&&(e=t.annotations.Session)!==null&&e!==void 0&&e.StickySessionSupported?true:false},isUpdateHidden:function(t,e){var n,o,r,a;if(i.isSingleton(t)){return false}return(t===null||t===void 0?void 0:(n=t.annotations.UI)===null||n===void 0?void 0:(o=n.UpdateHidden)===null||o===void 0?void 0:o.valueOf())!==undefined?t===null||t===void 0?void 0:(r=t.annotations.UI)===null||r===void 0?void 0:r.UpdateHidden:e===null||e===void 0?void 0:(a=e.annotations.UI)===null||a===void 0?void 0:a.UpdateHidden},getDraftRoot:function(t){var e;if(i.isSingleton(t)){return undefined}return t&&((e=t.annotations.Common)===null||e===void 0?void 0:e.DraftRoot)},getDraftNode:function(t){var e;if(i.isSingleton(t)){return undefined}return t&&((e=t.annotations.Common)===null||e===void 0?void 0:e.DraftNode)},getStickySession:function(t){var e,n;if(i.isSingleton(t)){return undefined}return t&&((e=t.annotations)===null||e===void 0?void 0:(n=e.Session)===null||n===void 0?void 0:n.StickySessionSupported)},getDeleteHidden:function(t,e){var n,o,r,a;if(i.isSingleton(t)){return false}return(t===null||t===void 0?void 0:(n=t.annotations.UI)===null||n===void 0?void 0:(o=n.DeleteHidden)===null||o===void 0?void 0:o.valueOf())!==undefined?t===null||t===void 0?void 0:(r=t.annotations.UI)===null||r===void 0?void 0:r.DeleteHidden:e===null||e===void 0?void 0:(a=e.annotations.UI)===null||a===void 0?void 0:a.DeleteHidden}};return i},false);
//# sourceMappingURL=ModelHelper.js.map