/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";var t=function(t,e,n){var r=t["$NavigationPropertyPath"];var i;if(r===""){i=Promise.resolve(e)}else{i=n.requestObject("/"+e+"/"+r+"/@sapui.name")}return{pOwnerEntity:i,sNavigationPath:r}};var e=function(e,r,i,a){var s=r.indexOf("#")>-1&&r.substr(r.indexOf("#"))||"",u=i.SourceProperties||[],o=i.SourceEntities||[],f=[];u.forEach(function(t){var r=n(t["$PropertyPath"],e,a),u=r.sPath,o=r.pOwnerEntity,c=r.sNavigationPath;f.push({pOwnerEntity:o,sQualifier:s,sNavigationPath:c,sPath:u,sEntityType:e,oSideEffectAnnotation:i})});o.forEach(function(n){var r=t(n,e,a),u=r.pOwnerEntity,o=r.sNavigationPath;f.push({pOwnerEntity:u,sQualifier:s,sNavigationPath:o,sPath:"entity",sEntityType:e,oSideEffectAnnotation:i})});return f};var n=function(t,e,n){var r=t.indexOf("/")>0?"/"+e+"/"+t.substr(0,t.lastIndexOf("/")+1)+"@sapui.name":false,i=!r?Promise.resolve(e):n.requestObject(r);t=r?t.substr(t.lastIndexOf("/")+1):t;return{sPath:t,pOwnerEntity:i,sNavigationPath:r}};var r={generateSideEffectsMapFromMetaModel:function(t){var n={};var r=[];var i=[];return t.requestObject("/$").then(function(t){var e=function(e){return t[e]["$kind"]==="EntityType"};return Object.keys(t).filter(e)}).then(function(e){r=e;return Promise.allSettled(e.map(function(e){return t.requestObject("/"+e+"@")}))}).then(function(n){var a=[];n.forEach(function(n,s){if(n.status==="fulfilled"){var u=r[s];var o=n.value;Object.keys(o).filter(function(t){return t.indexOf("@com.sap.vocabularies.Common.v1.SideEffects")>-1}).forEach(function(n){var r=e(u,n,o[n],t);i=i.concat(r);a=a.concat(r.map(function(t){return t["pOwnerEntity"]}))})}});return Promise.allSettled(a)}).then(function(t){t.forEach(function(t,e){if(t.status==="fulfilled"){var r=t.value;var a=i[e];var s=a.sEntityType,u=a.sQualifier,o=a.oSideEffectAnnotation,f=a.sPath;var c=o.SourceProperties;if(f==="entity"){n[r]=n[r]||[[],{}];n[r][0].push(s+u+"$$ImmediateRequest")}else{n[r]=n[r]||[[],{}];n[r][1][f]=n[r][1][f]||[];n[r][1][f].push(s+u+(c.length===1&&"$$ImmediateRequest"||""))}}});return n}).catch(function(t){return Promise.reject(t)})}};return r},false);
//# sourceMappingURL=SideEffectsHelper.js.map