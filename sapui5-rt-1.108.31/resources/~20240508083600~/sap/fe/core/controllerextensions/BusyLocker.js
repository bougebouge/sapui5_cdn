/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log"],function(e){"use strict";var n=30,t={},u={getId:function(){return"BusyLocker.ReferenceDummy"},setBusy:function(n){e.info("setBusy(".concat(n,") triggered on dummy reference"))}};function r(e,n){return e.getId()+(n||"/busy")}function c(e,n){return r(e,n)in t}function o(n,c){if(!n||!n.getId){e.warning("No reference for BusyLocker, using dummy reference");n=u}c=c||"/busy";var o=r(n,c);if(!(o in t)){t[o]={id:o,path:c,reference:n,count:0}}return t[o]}function i(e){delete t[e.id]}function f(t){var u=t.reference.isA&&t.reference.isA("sap.ui.model.Model"),r=t.count!==0;if(u){t.reference.setProperty(t.path,r,undefined,true)}else if(t.reference.setBusy){t.reference.setBusy(r)}clearTimeout(t.timeout);if(r){t.timeout=setTimeout(function(){e.error("busy lock for ".concat(t.id," with value ").concat(t.count," timed out after ").concat(n," seconds!"))},n*1e3)}else{i(t)}return r}function s(n,t){if(t===0){n.count=0;e.info("busy lock count '".concat(n.id,"' was reset to 0"))}else{n.count+=t;e.info("busy lock count '".concat(n.id,"' is ").concat(n.count))}}var a={lock:function(e,n){return this._updateLock(e,n,1)},unlock:function(e,n){return this._updateLock(e,n,-1)},isLocked:function(e,n){return c(e,n)},_updateLock:function(e,n,t){var u=o(e,n);s(u,t);return f(u)}};return a},false);
//# sourceMappingURL=BusyLocker.js.map