/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution","sap/ui/model/json/JSONModel"],function(t,e,n,r){"use strict";var i,o,a,s,u,l,p,d,C,f,c,x;var h=t.publicExtension;var v=t.privateExtension;var _=t.methodOverride;var g=t.finalExtension;var y=t.extensible;var b=t.defineUI5Class;function I(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;P(t,e)}function P(t,e){P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,n){e.__proto__=n;return e};return P(t,e)}function B(t,e,n,r,i){var o={};Object.keys(r).forEach(function(t){o[t]=r[t]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o);if(i&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(i):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(t,e,o);o=null}return o}var E=(i=b("sap.fe.core.controllerextensions.Paginator"),o=_(),a=h(),s=g(),u=h(),l=g(),p=v(),d=y(n.After),C=v(),f=y(n.After),i(c=(x=function(t){I(e,t);function e(){var e;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}e=t.call.apply(t,[this].concat(r))||this;e._iCurrentIndex=-1;return e}var n=e.prototype;n.onInit=function t(){this._oView=this.base.getView();this._oView.setModel(new r({navUpEnabled:false,navDownEnabled:false}),"paginator")};n.initialize=function t(e,n){if(e&&e.getAllCurrentContexts){this._oListBinding=e}if(n){this._oCurrentContext=n}this._updateCurrentIndexAndButtonEnablement()};n._updateCurrentIndexAndButtonEnablement=function t(){if(this._oCurrentContext&&this._oListBinding){var e=this._oCurrentContext.getPath();this._iCurrentIndex=this._oListBinding.getAllCurrentContexts().findIndex(function(t){return t&&t.getPath()===e});var n=this._oListBinding.getAllCurrentContexts()[this._iCurrentIndex];if(!this._iCurrentIndex&&this._iCurrentIndex!==0||!n||this._oCurrentContext.getPath()!==n.getPath()){this._updateCurrentIndex()}}this._handleButtonEnablement()};n._handleButtonEnablement=function t(){var e=this.base.getView().getModel("paginator");if(this._oListBinding&&this._oListBinding.getAllCurrentContexts().length>1&&this._iCurrentIndex>-1){if(this._iCurrentIndex===this._oListBinding.getAllCurrentContexts().length-1){e.setProperty("/navDownEnabled",false)}else if(this._oListBinding.getAllCurrentContexts()[this._iCurrentIndex+1].isInactive()){e.setProperty("/navDownEnabled",false)}else{e.setProperty("/navDownEnabled",true)}if(this._iCurrentIndex===0){e.setProperty("/navUpEnabled",false)}else if(this._oListBinding.getAllCurrentContexts()[this._iCurrentIndex-1].isInactive()){e.setProperty("/navUpEnabled",false)}else{e.setProperty("/navUpEnabled",true)}}else{e.setProperty("/navUpEnabled",false);e.setProperty("/navDownEnabled",false)}};n._updateCurrentIndex=function t(){if(this._oCurrentContext&&this._oListBinding){var e=this._oCurrentContext.getPath();this._iCurrentIndex=this._oListBinding.getAllCurrentContexts().findIndex(function(t){return t&&t.getPath()===e})}};n.updateCurrentContext=function t(e){try{var n,r;var i=this;if(!i._oListBinding){return Promise.resolve()}var o=(n=i._oCurrentContext)!==null&&n!==void 0&&n.getModel?(r=i._oCurrentContext)===null||r===void 0?void 0:r.getModel():undefined;return Promise.resolve(o===null||o===void 0?void 0:o.submitBatch("$auto")).then(function(){var t=i._oListBinding.getAllCurrentContexts();var n=i._iCurrentIndex+e;var r=t[n];if(r){var o=i.onBeforeContextUpdate(i._oListBinding,i._iCurrentIndex,e);if(!o){i._iCurrentIndex=n;i._oCurrentContext=r}i.onContextUpdate(r)}i._handleButtonEnablement()})}catch(t){return Promise.reject(t)}};n.onBeforeContextUpdate=function t(e,n,r){return false};n.onContextUpdate=function t(e){};return e}(e),B(x.prototype,"onInit",[o],Object.getOwnPropertyDescriptor(x.prototype,"onInit"),x.prototype),B(x.prototype,"initialize",[a,s],Object.getOwnPropertyDescriptor(x.prototype,"initialize"),x.prototype),B(x.prototype,"updateCurrentContext",[u,l],Object.getOwnPropertyDescriptor(x.prototype,"updateCurrentContext"),x.prototype),B(x.prototype,"onBeforeContextUpdate",[p,d],Object.getOwnPropertyDescriptor(x.prototype,"onBeforeContextUpdate"),x.prototype),B(x.prototype,"onContextUpdate",[C,f],Object.getOwnPropertyDescriptor(x.prototype,"onContextUpdate"),x.prototype),x))||c);return E},false);
//# sourceMappingURL=Paginator.js.map