/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/CommonUtils","sap/ui/base/Object","sap/ui/core/Component","sap/ui/model/json/JSONModel","./helpers/ClassSupport"],function(e,t,n,i,r,o){"use strict";var a,l,u,s,c,d,p,f,g;var v=o.property;var b=o.defineUI5Class;function h(e,t,n,i){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function _(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;m(e,t)}function m(e,t){m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return m(e,t)}function y(e,t,n,i,r){var o={};Object.keys(i).forEach(function(e){o[e]=i[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o);if(r&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(r):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function x(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}var C=(a=b("sap.fe.core.ExtensionAPI"),l=v({type:"sap/fe/core/controllerextensions/EditFlow"}),u=v({type:"sap/fe/core/controllerextensions/Routing"}),s=v({type:"sap/fe/core/controllerextensions/IntentBasedNavigation"}),a(c=(d=function(n){_(o,n);function o(e,t){var i;i=n.call(this)||this;h(i,"editFlow",p,w(i));h(i,"routing",f,w(i));h(i,"intentBasedNavigation",g,w(i));i._controller=e;i._view=e.getView();i.extension=i._controller.extension;i.editFlow=i._controller.editFlow;i.routing=i._controller.routing;i._routing=i._controller._routing;i.intentBasedNavigation=i._controller.intentBasedNavigation;i._prefix=t;return i}var a=o.prototype;a.destroy=function e(){};a.getEditFlow=function e(){return this.editFlow};a.getRouting=function e(){return this.routing};a.getIntentBasedNavigation=function e(){return this.intentBasedNavigation};a.byId=function e(t){var n=this._view.byId(t);if(!n&&this._prefix){n=this._view.byId("".concat(this._prefix,"--").concat(t))}if(n){return n}};a.getModel=function e(n){var i;if(n&&n!=="ui"){i=t.getAppComponent(this._view);if(!i.getManifestEntry("sap.ui5").models[n]){return undefined}}return this._view.getModel(n)};a.addDependent=function e(t){this._view.addDependent(t)};a.removeDependent=function e(t){this._view.removeDependent(t)};a.navigateToTarget=function e(t,n){this._controller._routing.navigateToTarget(n,t)};a.loadFragment=function n(o){var a,l=this;var u=i.getOwnerComponentFor(this._view);var s=this._view.getModel("_pageModel");var c=(a=this.getModel())===null||a===void 0?void 0:a.getMetaModel();var d=u.getViewData();var p=new r(d),f={bindingContexts:{contextPath:c===null||c===void 0?void 0:c.createBindingContext(o.contextPath||"/".concat(u.getEntitySet())),converterContext:s.createBindingContext("/",undefined,{noResolve:true}),viewData:d?p.createBindingContext("/"):null},models:{contextPath:c,converterContext:s,metaModel:c,viewData:p},appComponent:t.getAppComponent(this._view)};var g=t.templateControlFragment(o.name,f,{controller:o.controller||this,isXML:false,id:o.id});g.then(function(e){if(o.initialBindingContext!==undefined){e.setBindingContext(o.initialBindingContext)}l.addDependent(e)}).catch(function(t){e.error(t)});return g};a.updateAppState=function e(){return this._controller.getAppComponent().getAppStateHandler().createAppState()};return o}(n),p=y(d.prototype,"editFlow",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),f=y(d.prototype,"routing",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),g=y(d.prototype,"intentBasedNavigation",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),d))||c);return C},false);
//# sourceMappingURL=ExtensionAPI.js.map