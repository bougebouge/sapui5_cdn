/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/helpers/BindingToolkit"],function(e,t){"use strict";var a=t.transformRecursively;var n=t.constant;var r=t.compileExpression;var o={setActionEnablement:function(t,a,n,r){var o=[];for(var i in a){var l=[];t.setProperty(i,false);var s=a[i];for(var c=0;c<n.length;c++){var f=n[c];if(f){var p=f.getObject();if(r==="chart"){if(s===null&&!!p["#".concat(i)]||f.getObject(s)){t.setProperty(i,true);break}}else if(r==="table"){l=this._setActionEnablementForTable(f,t,i,s,l)}}}if(r==="table"){if(!n.length){t.setProperty("dynamicActions/".concat(i),{bEnabled:false,aApplicable:[],aNotApplicable:[]});o.push(e.setContextsBasedOnOperationAvailable(t,[]))}else if(n.length&&typeof s==="string"){o.push(e.setContextsBasedOnOperationAvailable(t,l))}}}if(r==="table"){return Promise.all(o)}},setActionEnablementAfterPatch:function(e,t,a){var n=a===null||a===void 0?void 0:a.getObject();var r=(n===null||n===void 0?void 0:n.controls)||{};for(var i in r){if(r[i]&&r[i].controlId){var l=e.byId(i);if(l.isA("sap.ui.mdc.Table")){var s=l.getRowBinding();if(s==t){o.setActionEnablement(a,JSON.parse(l.data("operationAvailableMap").customData),l.getSelectedContexts(),"table")}}}}},_setActionEnablementForTable:function(t,o,i,l,s){o.setProperty("dynamicActions/".concat(i),{bEnabled:false,aApplicable:[],aNotApplicable:[]});var c=[],f=[],p="".concat(o.getPath(),"/dynamicActions/").concat(i,"/bEnabled");if(typeof l==="object"&&l!==null&&l!==undefined){if(t){var b=t.getObject();var u=a(l,"PathInModel",function(e){return b?n(b[e.path]):n(false)},true);var v=r(u);if(v==="true"){o.getModel().setProperty(p,true);c.push(t)}else{f.push(t)}}e.setDynamicActionContexts(o,i,c,f)}else{var d=t.getObject();if(l===null&&!!d["#".concat(i)]){o.getModel().setProperty(p,true)}else{s.push(e.requestProperty(t,i,l,p))}}return s}};return o},false);
//# sourceMappingURL=ActionRuntime.js.map