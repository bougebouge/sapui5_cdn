/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/array/uniqueSort","sap/base/util/merge","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/SemanticDateOperators","sap/fe/core/helpers/StableIdHelper","sap/fe/core/type/TypeUtil","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/core/util/XMLPreprocessor","sap/ui/core/XMLTemplateProcessor","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/condition/RangeOperator","./controls/AnyElement","./templating/FilterHelper"],function(e,t,a,n,r,i,o,c,s,l,u,v,f,p,d,g,m,O){"use strict";function h(e,t){try{var a=e()}catch(e){return t(e)}if(a&&a.then){return a.then(void 0,t)}return a}function P(e,t,a){var n=-1,r,i;function o(c){try{while(++n<e.length&&(!a||!a())){c=t(n);if(c&&c.then){if(b(c)){c=c.v}else{c.then(o,i||(i=S.bind(null,r=new E,2)));return}}}if(r){S(r,1,c)}else{r=c}}catch(e){S(r||(r=new E),2,e)}}o();return r}function b(e){return e instanceof E&&e.s&1}var E=function(){function e(){}e.prototype.then=function(t,a){var n=new e;var r=this.s;if(r){var i=r&1?t:a;if(i){try{S(n,1,i(this.v))}catch(e){S(n,2,e)}return n}else{return this}}this.o=function(e){try{var r=e.v;if(e.s&1){S(n,1,t?t(r):r)}else if(a){S(n,1,a(r))}else{S(n,2,r)}}catch(e){S(n,2,e)}};return n};return e}();function S(e,t,a){if(!e.s){if(a instanceof E){if(a.s){if(t&1){t=a.s}a=a.v}else{a.o=S.bind(null,e,t);return}}if(a&&a.then){a.then(S.bind(null,e,t),S.bind(null,e,2));return}e.s=t;e.v=a;var n=e.o;if(n){n(e)}}}var y={};var R=O.getConditions;var T=c.generate;var C=r.pathInModel;var j=r.or;var A=r.not;var I=r.compileExpression;var D=n.IssueSeverity;var N=n.IssueCategoryType;var x=n.IssueCategory;var F=function(t,a,n,r,i,o){try{var c=W(n);var s={};var l="",u="";var v;var f=[];var p=[];function m(){var e=c.parseShellHash(document.location.hash);l=e.semanticObject;u=e.action;return G(c,n,l,s)}var d;var g=h(function(){function e(){return Promise.resolve(m()).then(function(e){if(e){if(e.length>0){var a=false;var r={};var c=[];var s="".concat(o,"@");var d="".concat(o,"/@");var g=i.getObject(s);v=lt.getSemanticObjectAnnotations(g,l);if(!v.bHasEntitySetSO){var m=i.getObject(d);v=lt.getSemanticObjectAnnotations(m,l)}p=v.aUnavailableActions;p.push(u);r.navigationContexts=t;r.semanticObjectMapping=v.aMappings;H(e,p,r,c);y.forEach(function(e){var t;var n=e.targetSemObject;if(((t=c[0])===null||t===void 0?void 0:t.targetSemObject)===n){a=true}});if(S.additionalSemanticObjects&&c[0]&&S.additionalSemanticObjects[c[0].targetSemObject]&&S.additionalSemanticObjects[c[0].targetSemObject].allowedActions&&S.additionalSemanticObjects[c[0].targetSemObject].allowedActions.length===0){a=true}f=a?y:y.concat(c);n.getBindingContext("internal").setProperty("relatedApps/visibility",f.length>0);n.getBindingContext("internal").setProperty("relatedApps/items",f)}else{n.getBindingContext("internal").setProperty("relatedApps/visibility",false)}}else{n.getBindingContext("internal").setProperty("relatedApps/visibility",false)}})}if(a){if(r&&r.length>0){for(var g=0;g<r.length;g++){var O=r[g].$PropertyPath;if(!s[O]){s[O]={value:a[O]}}}}else{var h=i.getObject("".concat(o,"/$Type/$Key"));for(var b in h){var E=h[b];if(!s[E]){s[E]={value:a[E]}}}}}var S=te(n).getViewData();var y=[];var R;var T=function(){if(S.additionalSemanticObjects){d=Object.keys(S.additionalSemanticObjects);var e=P(d,function(e){return Promise.resolve(Promise.resolve(G(c,n,d[e],s))).then(function(a){R=a;X(S.additionalSemanticObjects[d[e]],t,y,R)})});if(e&&e.then)return e.then(function(){})}}();return T&&T.then?T.then(e):e(T)},function(t){e.error("Cannot read links",t)});return Promise.resolve(g&&g.then?g.then(function(){return f}):f)}catch(O){return Promise.reject(O)}};var L=["Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTime","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Float","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.String","Edm.Time","Edm.TimeOfDay"];function $(e){if(!e){return undefined}return e.replace(/"/g," ").replace(/\\/g,"\\\\").split(/\s+/).reduce(function(e,t){if(t!==""){e="".concat(e?"".concat(e," "):"",'"').concat(t,'"')}return e},undefined)}function _(e){var t=e.getProperty("$Type");if(!e.getProperty("$kind")){switch(t){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":t=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":t=e.getProperty("Value/$Path/$Type");break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:var a=e.getProperty("Target/$AnnotationPath");if(a){if(a.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){t=e.getProperty("Target/$AnnotationPath/fn/$Path/$Type")}else if(a.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>-1){t=e.getProperty("Value/$Path/$Type")}else{t=undefined}}else{t=undefined}break}}return t}function B(e){var t=false;if(e){e.getCurrentContexts().forEach(function(e){if(e&&e.isTransient()){t=true}})}return t}function M(e,t){var a;var n;var r="$NavigationPropertyBinding";var o="@Org.OData.Capabilities.V1.SearchRestrictions";var c=e.replaceAll("%2F","/").split("/").filter(i.filterOutNavPropBinding);var s=i.getEntitySetPath(e,t);var l=s.split("/").filter(i.filterOutNavPropBinding);var u=t.getObject("/".concat(c.join("/"),"/$ContainsTarget"));var v=u&&c[c.length-1];if(!u){a=t.getObject("".concat(s).concat(o))}if(c.length>1){var f=u?v:l[l.length-1];var p=u?s:"/".concat(l.slice(0,-1).join("/".concat(r,"/")));var d=lt.getNavigationRestrictions(t,p,f.replaceAll("%2F","/"));n=d&&d["SearchRestrictions"]}return n||a}function k(e,t,a){var n=e.getObject("".concat(t,"@Org.OData.Capabilities.V1.NavigationRestrictions"));var r=n&&n.RestrictedProperties;return r&&r.find(function(e){return e&&e.NavigationProperty&&e.NavigationProperty.$NavigationPropertyPath===a})}function w(e,t,a){var n=false;var r=e.getObject("".concat(t,"@Org.OData.Capabilities.V1.FilterRestrictions"));if(r&&r.NonFilterableProperties){n=r.NonFilterableProperties.some(function(e){return e.$NavigationPropertyPath===a||e.$PropertyPath===a})}return n}function U(e,t,a){var n="".concat(t,"/").concat(a),r=n.split("/").splice(0,2),i=n.split("/").splice(2);var o=false,c="";t=r.join("/");o=i.some(function(a,n,r){if(c.length>0){c+="/".concat(a)}else{c=a}if(n===r.length-2){var i=k(e,t,a);var s=i&&i.FilterRestrictions;var l=s&&s.NonFilterableProperties;var u=r[r.length-1];if(l&&l.find(function(e){return e.$PropertyPath===u})){return true}}if(n===r.length-1){o=w(e,t,c)}else if(e.getObject("".concat(t,"/$NavigationPropertyBinding/").concat(a))){o=w(e,t,c);c="";t="/".concat(e.getObject("".concat(t,"/$NavigationPropertyBinding/").concat(a)))}return o===true});return o}function V(e,t,a,n){if(typeof a!=="string"){throw new Error("sProperty parameter must be a string")}var r;if(e.getObject("".concat(t,"/@com.sap.vocabularies.Common.v1.ResultContext"))===true){return true}var i=e.createBindingContext("".concat(t,"/").concat(a));if(!n){if(i.getProperty("@com.sap.vocabularies.UI.v1.Hidden")===true||i.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter")===true){return false}var o=i.getProperty("@com.sap.vocabularies.UI.v1.Hidden/$Path");var c=i.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter/$Path");if(o&&c){return I(A(j(C(o),C(c))))}else if(o){return I(A(C(o)))}else if(c){return I(A(C(c)))}}if(t.split("/").length===2&&a.indexOf("/")<0){r=!w(e,t,a)}else{r=!U(e,t,a)}if(r&&i){var s=_(i);if(s){r=L.indexOf(s)!==-1}else{r=false}}return r}function W(e){return Z(e).getShellServices()}function Q(){var e=window.location.hash;return e.split("&")[0]}function G(e,t,a,n){return e.getLinks({semanticObject:a,params:n})}function q(e){var t=[];var a=Object.keys(e);var n;for(var r=0;r<a.length;r++){n={LocalProperty:{$PropertyPath:a[r]},SemanticObjectProperty:e[a[r]]};t.push(n)}return t}function H(e,t,a,n,r){for(var i=0;i<e.length;i++){var o=e[i];var c=o.intent;var s=c.split("-")[1].split("?")[0];if(r&&r.includes(s)){n.push({text:o.text,targetSemObject:c.split("#")[1].split("-")[0],targetAction:s.split("~")[0],targetParams:a})}else if(!r&&t&&t.indexOf(s)===-1){n.push({text:o.text,targetSemObject:c.split("#")[1].split("-")[0],targetAction:s.split("~")[0],targetParams:a})}}}function X(e,t,a,n){if(n&&n.length>0){var r=e.allowedActions||undefined;var i=e.unavailableActions?e.unavailableActions:[];var o=e.mapping?q(e.mapping):[];var c={navigationContexts:t,semanticObjectMapping:o};H(n,i,c,a,r)}}function Y(e,t){var a={bHasEntitySetSO:false,aAllowedActions:[],aUnavailableActions:[],aMappings:[]};var n,r;var i;for(var o in e){if(o.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1&&e[o]===t){a.bHasEntitySetSO=true;n="@".concat("com.sap.vocabularies.Common.v1.SemanticObjectMapping");r="@".concat("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions");if(o.indexOf("#")>-1){i=o.split("#")[1];n="".concat(n,"#").concat(i);r="".concat(r,"#").concat(i)}if(e[n]){a.aMappings=a.aMappings.concat(e[n])}if(e[r]){a.aUnavailableActions=a.aUnavailableActions.concat(e[r])}break}}return a}function K(t){var a=t.getModel().getMetaModel();var n=t.getBindingContext();var r=n&&n.getPath();var i=a.getMetaPath(r);var o="".concat(i,"/")+"@com.sap.vocabularies.Common.v1.SemanticKey";var c=a.getObject(o);var s=n.getObject();if(!s){n.requestObject().then(function(e){return F(n,e,t,c,a,i)}).catch(function(t){e.error("Cannot update the related app details",t)})}else{return F(n,s,t,c,a,i)}}function J(e){var t=["sap.m.Button","sap.m.OverflowToolbarButton"];if(e&&t.indexOf(e.getMetadata().getName())!==-1&&e.getVisible()&&e.getEnabled()){e.firePress()}}function z(e){if(e==="true"||e===true){return true}else{return false}}function Z(e){if(e.isA("sap.fe.core.AppComponent")){return e}var t=l.getOwnerComponentFor(e);if(!t){return e}else{return Z(t)}}function ee(e){var t=e.getRootViewController();return t.isFclEnabled()?t.getRightmostView():lt.getTargetView(e.getRootContainer().getCurrentPage())}function te(e){if(e&&e.isA("sap.ui.core.ComponentContainer")){e=e.getComponentInstance();e=e&&e.getRootControl()}while(e&&!e.isA("sap.ui.core.mvc.View")){e=e.getParent()}return e}function ae(e,t){var a=false;var n=e.split("/");if(n.length>1){a=t[n[0]]&&t[n[0]].hasOwnProperty(n[1])&&t[n[0]][n[1]]===0}else{a=t[e]===0}return a}function ne(e,t){var a=[];for(var n=0;n<e.length;n++){var r=e[n].entitySet,i=e[n].contextData;delete i["@odata.context"];delete i["%40odata.context"];delete i["@odata.metadataEtag"];delete i["%40odata.metadataEtag"];delete i["SAP__Messages"];var o=Object.keys(i);for(var c=0;c<o.length;c++){var s=o[c],l=t.getObject("/".concat(r,"/").concat(s,"@"));if(l){if(l["@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||l["@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]||l["@com.sap.vocabularies.Analytics.v1.Measure"]){delete i[s]}else if(l["@com.sap.vocabularies.Common.v1.FieldControl"]){var u=l["@com.sap.vocabularies.Common.v1.FieldControl"];if(u["$EnumMember"]&&u["$EnumMember"].split("/")[1]==="Inapplicable"){delete i[s]}else if(u["$Path"]&&lt.isFieldControlPathInapplicable(u["$Path"],i)){delete i[s]}}}}a.push(i)}return a}function re(e,t){for(var a in t){if(t[a]!==e[a]){return false}}return true}function ie(e,t,a){var n=e.getObject("".concat(t,"/"))||{},r={};for(var i in n){if(n.hasOwnProperty(i)&&!/^\$/i.test(i)&&n[i].$kind&&re(n[i],a||{$kind:"Property"})){r[i]=n[i]}}return r}function oe(e,t){var a;if(e&&t){a=e.getObject("".concat(t,"@Org.OData.Capabilities.V1.FilterRestrictions/RequiredProperties"))}return a}function ce(e,t){var a=e&&e.getActions();if(a){a.forEach(function(e){if(e.isA("sap.ui.mdc.actiontoolbar.ActionToolbarAction")){e=e.getAction()}if(e.isA("sap.m.MenuButton")){var a=e.getMenu();var n=a.getItems();n.forEach(function(e){if(e.data("IBNData")){t.push(e)}})}else if(e.data("IBNData")){t.push(e)}})}return t}function se(t,a){var n={};var r=function(r){if(r){var i=Object.keys(r);i.forEach(function(e){if(e.indexOf("_")!==0&&e.indexOf("odata.context")===-1){n[e]={value:r[e]}}})}if(t.length){t.forEach(function(t){var r=t.data("IBNData").semanticObject;var i=t.data("IBNData").action;lt.getShellServices(a).getLinks({semanticObject:r,action:i,params:n}).then(function(e){t.setVisible(t.getVisible()&&e&&e.length===1)}).catch(function(t){e.error("Cannot retrieve the links from the shell service",t)})})}};if(a&&a.getBindingContext()){var i;(i=a.getBindingContext())===null||i===void 0?void 0:i.requestObject().then(function(e){return r(e)}).catch(function(t){e.error("Cannot retrieve the links from the shell service",t)})}else{r()}}function le(e,t,a,n){var r=e;if(t){if(n){var i=ue(t.aCustomBundles,"".concat(e,"|").concat(n));r=i?"".concat(e,"|").concat(n):e}return t.getText(r,a)}t=u.getLibraryResourceBundle("sap.fe.core");return t.getText(r,a)}function ue(e,t){if(e.length){for(var a=e.length-1;a>=0;a--){var n=e[a].hasText(t);if(n){return true}ue(e[a].aCustomBundles,t)}}return false}function ve(e,t,a,n){a=!a?e.getObject(e.getPath()):a;var r=e.getPath().split("/@")[0];var i=e.getObject(r).$Type;var o=fe(e.getModel(),i);if(o){r="/".concat(o)}if(n){return e.getObject("".concat(r,"/").concat(a,"@Org.OData.Core.V1.OperationAvailable"))}if(t){return"".concat(r,"/").concat(a)}else{return{sContextPath:r,sProperty:e.getObject("".concat(r,"/").concat(a,"@Org.OData.Core.V1.OperationAvailable/$Path")),sBindingParameter:e.getObject("".concat(r,"/").concat(a,"/@$ui5.overload/0/$Parameter/0/$Name"))}}}function fe(e,t){var a=e.getObject("/");for(var n in a){if(typeof a[n]==="object"&&a[n].$Type===t){return n}}}function pe(e,t){var a=e["@com.sap.vocabularies.Common.v1.Text"],n=a&&(e&&e["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]||t&&t["@com.sap.vocabularies.UI.v1.TextArrangement"]);if(n){if(n.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"Description"}else if(n.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"ValueDescription"}else if(n.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"Value"}return"DescriptionValue"}return a?"DescriptionValue":"Value"}function de(e){var t=e.getModel().getMetaModel();return t.getObject("".concat(t.getMetaPath(e.getPath()),"/$Type"))}function ge(t,a,n){var r=a;var i=t.indexOf("(");if(i>-1){var o=t.slice(i+1,-1);var c=de(r);while(c!==o){r=r.getBinding().getContext();if(r){c=de(r)}else{e.warning("Cannot determine target type to request property value for bound action invocation");return Promise.resolve(undefined)}}}return r.requestObject(n)}function me(e,t,a,n){var r=a&&a.indexOf("/")===0?rt(a,e.getModel()):ge(t,e,a);return r.then(function(a){return Promise.resolve({vPropertyValue:a,oSelectedContext:e,sAction:t,sDynamicActionEnabledPath:n})})}function Oe(t,a){return Promise.all(a).then(function(e){if(e.length){var a=[],n=[];e.forEach(function(e){if(e){if(e.vPropertyValue){t.getModel().setProperty(e.sDynamicActionEnabledPath,true);a.push(e.oSelectedContext)}else{n.push(e.oSelectedContext)}}});he(t,e[0].sAction,a,n)}}).catch(function(t){e.trace("Cannot retrieve property value from path",t)})}function he(e,t,a,n){var r="".concat(e.getPath(),"/dynamicActions/").concat(t),i=e.getModel();i.setProperty("".concat(r,"/aApplicable"),a);i.setProperty("".concat(r,"/aNotApplicable"),n)}function Pe(e){var t=s.getDataTypeClassName(e);var a=s.getBaseType(t,{},{});return d.getOperatorsForType(a)}function be(e,t){var a=e.filter(function(e){return t.indexOf(e)>-1});return a.toString()||undefined}function Ee(e){var t=lt.AllowedExpressionsPrio;e.sort(function(e,a){return t.indexOf(e)-t.indexOf(a)});return e[0]}function Se(e,t,a,n,r,i){var c=lt.getFilterRestrictionsByPath(t,a);var s=["EQ"];var l=["EQ","GE","LE","LT","GT","BT","NOTLE","NOTLT","NOTGE","NOTGT"];var u=["EQ","BT"];var v=["TODAY","TOMORROW","YESTERDAY","DATE","FIRSTDAYWEEK","LASTDAYWEEK","FIRSTDAYMONTH","LASTDAYMONTH","FIRSTDAYQUARTER","LASTDAYQUARTER","FIRSTDAYYEAR","LASTDAYYEAR"];var f=["EQ","BT"];var p=["EQ","GE","LE","LT","GT","BT","NE","NOTBT","NOTLE","NOTLT","NOTGE","NOTGT"];var d=["Contains","NotContains","StartsWith","NotStartsWith","EndsWith","NotEndsWith"];var g=o.getSupportedOperations();var m=r==="true"||r===true;var O=[];var h=typeof i==="string"?JSON.parse(i).customData:i;if(a.getObject("".concat(t,"/@com.sap.vocabularies.Common.v1.ResultContext"))===true){return s.toString()}if(h&&h.operatorConfiguration&&h.operatorConfiguration.length>0){O=o.getFilterOperations(h.operatorConfiguration)}else{O=o.getSemanticDateOperations()}var P=Pe(n);if(m){P=g.concat(P)}var b;if(c&&c.FilterAllowedExpressions&&c.FilterAllowedExpressions[e]){var E=lt.getSpecificAllowedExpression(c.FilterAllowedExpressions[e]);switch(E){case"SingleValue":var S=n==="Edm.Date"&&m?v:s;b=be(P,S);break;case"MultiValue":b=be(P,s);break;case"SingleRange":var y;if(m){if(n==="Edm.Date"){y=O}else if(n==="Edm.DateTimeOffset"){y=O.concat(f)}else{y=l}}else if(n==="Edm.DateTimeOffset"){y=u}else{y=l}var R=be(P,y);b=R?R:"";break;case"MultiRange":b=be(P,p);break;case"SearchExpression":b=be(P,d);break;case"MultiRangeOrSearchExpression":b=be(P,d.concat(p));break;default:break}}return b}y.getOperatorsForProperty=Se;function ye(){var e=["EQ","NE"];return e.toString()}function Re(e){var t=Pe(e);var a=["EQ","GE","LE","LT","GT","BT","NE","NOTBT","NOTLE","NOTLT","NOTGE","NOTGT"];return be(t,a)}function Te(e,t){var a=t.substring(0,t.lastIndexOf("/"));var n=e.getObject("".concat(a,"/@com.sap.vocabularies.Common.v1.ResultContext"));var r={};if(n&&a!==t){r.contextPath=a;r.parameterProperties=lt.getContextPathProperties(e,a)}return r}function Ce(e,t,a,n,r){var i;var o=R(r,e);if(r!==null&&r!==void 0&&r.SemanticDates&&a&&a.indexOf(r===null||r===void 0?void 0:(i=r.SemanticDates)===null||i===void 0?void 0:i.operator)>-1){var c=lt.addSemanticDatesToConditions(r===null||r===void 0?void 0:r.SemanticDates);if(c&&Object.keys(c).length>0){n.push(c)}}else if(o){if(!t||t.indexOf(o.operator)>-1){n.push(o)}}return n}function je(e){var t=[];if(e!==null&&e!==void 0&&e.high){t.push(e===null||e===void 0?void 0:e.high)}if(e!==null&&e!==void 0&&e.low){t.push(e===null||e===void 0?void 0:e.low)}return{values:t,operator:e===null||e===void 0?void 0:e.operator,isEmpty:null}}function Ae(e,t,a,n,r,i,o,c,s,l,u,v){var f=[],p,d,g;if(s||lt.isPropertyFilterable(c,e,i,true)){var m=o[i];p=t.getSelectOption(a);var O=De(v,i);d=s?["EQ"]:lt.getOperatorsForProperty(i,e,c);if(u){g=s?["EQ"]:lt.getOperatorsForProperty(i,e,c,m===null||m===void 0?void 0:m.$Type,u,O)}f=s?lt.addSelectOptionToConditions(m,d,g,f,p[0]):p.reduce(lt.addSelectOptionToConditions.bind(null,m,d,g),f);if(f.length){if(r){n[r+i]=n.hasOwnProperty(r+i)?n[r+i].concat(f):f}else if(l){f.forEach(function(e){e["filtered"]=true});if(n.hasOwnProperty(i)){n[i].forEach(function(e){e["filtered"]=false});n[i]=n[i].concat(f)}else{n[i]=f}}else{n[i]=n.hasOwnProperty(i)?n[i].concat(f):f}}}}function Ie(e){var t,a;return{high:(e===null||e===void 0?void 0:(t=e.values)===null||t===void 0?void 0:t[0])||null,low:(e===null||e===void 0?void 0:(a=e.values)===null||a===void 0?void 0:a[1])||null,operator:e===null||e===void 0?void 0:e.operator}}function De(e,t){var a,n;var r=e===null||e===void 0?void 0:e.controlConfiguration;var i=r&&((a=r["@com.sap.vocabularies.UI.v1.SelectionFields"])===null||a===void 0?void 0:a.filterFields);return i!==null&&i!==void 0&&i[t]?(n=i[t])===null||n===void 0?void 0:n.settings:undefined}function Ne(e,t,a,n,r,i,o){var c=e.getSelectOptionsPropertyNames(),s=lt.getContextPathProperties(a,n),l=Object.keys(s),u=lt.getParameterInfo(a,n),v=u.contextPath,f=u.parameterProperties,p=!!u.contextPath&&f&&Object.keys(f).length>0;if(p){var d=Object.keys(f);d.forEach(function(n){var s;if(c.includes("$Parameter.".concat(n))){s="$Parameter.".concat(n)}else if(c.includes(n)){s=n}else if(n.startsWith("P_")&&c.includes("$Parameter.".concat(n.slice(2,n.length)))){s="$Parameter.".concat(n.slice(2,n.length))}else if(n.startsWith("P_")&&c.includes(n.slice(2,n.length))){s=n.slice(2,n.length)}else if(c.includes("$Parameter.P_".concat(n))){s="$Parameter.P_".concat(n)}else if(c.includes("P_".concat(n))){s="P_".concat(n)}if(s){Ae(v,e,s,t,undefined,n,f,a,true,r,i,o)}})}l.forEach(function(l){var u;if(c.includes(l)){u=l}else if(l.startsWith("P_")&&c.includes(l.slice(2,l.length))){u=l.slice(2,l.length)}else if(c.includes("P_".concat(l))){u="P_".concat(l)}if(u){Ae(n,e,u,t,undefined,l,s,a,false,r,i,o)}});c.forEach(function(c){if(c.indexOf(".")>0&&!c.includes("$Parameter")){var s=c.replaceAll(".","/");var l="/".concat(s).startsWith(n)?"/".concat(s):"".concat(n,"/").concat(s);if(a.getObject(l.replace("P_",""))){xe(l,n,e,c,a,t,r,i,o)}}});return t}function xe(e,t,a,n,r,i,o,c,s){var l=n.split(".");if("/".concat(n.replaceAll(".","/")).startsWith(t)){var u="/".concat(n).replaceAll(".","/"),v=u.replace("".concat(t,"/"),"");l=v.split("/")}var f="";var p=l[l.length-1];for(var d=0;d<l.length-1;d++){if(r.getObject("".concat(t,"/").concat(l[d].replace("P_",""))).$isCollection){f="".concat(f+l[d],"*/")}else{f="".concat(f+l[d],"/")}t="".concat(t,"/").concat(l[d])}var g=e.slice(0,e.lastIndexOf("/")),m=lt.getContextPathProperties(r,g),O=a.getSelectOptionsPropertyNames();var h=p;if(m[p]){h=p}else if(p.startsWith("P_")&&m[p.replace("P_","")]){h=p.replace("P_","")}else if(m["P_".concat(p)]&&O.includes("P_".concat(p))){h="P_".concat(p)}if(p.startsWith("P_")&&i[f+h]){}else if(!p.startsWith("P_")&&i[f+h]){delete i[f+h];Ae(g,a,n,i,f,h,m,r,false,o,c,s)}else{Ae(g,a,n,i,f,h,m,r,false,o,c,s)}}function Fe(e,t,a){var n=lt.getAppComponent(a);var r=n.getNavigationService();return r.mixAttributesAndSelectionVariant(t,e.toJSONString())}function Le(t,a,n,r){var i;var c=function(t,a,n){var r={option:"",sign:"I",low:a,high:n};switch(t){case"Contains":r.option="CP";break;case"StartsWith":r.option="CP";r.low+="*";break;case"EndsWith":r.option="CP";r.low="*".concat(r.low);break;case"BT":case"LE":case"LT":case"GT":case"NE":case"EQ":r.option=t;break;case"DATE":r.option="EQ";break;case"DATERANGE":r.option="BT";break;case"FROM":r.option="GE";break;case"TO":r.option="LE";break;case"EEQ":r.option="EQ";break;case"Empty":r.option="EQ";r.low="";break;case"NotContains":r.option="CP";r.sign="E";break;case"NOTBT":r.option="BT";r.sign="E";break;case"NotStartsWith":r.option="CP";r.low+="*";r.sign="E";break;case"NotEndsWith":r.option="CP";r.low="*".concat(r.low);r.sign="E";break;case"NotEmpty":r.option="NE";r.low="";break;case"NOTLE":r.option="LE";r.sign="E";break;case"NOTGE":r.option="GE";r.sign="E";break;case"NOTLT":r.option="LT";r.sign="E";break;case"NOTGT":r.option="GT";r.sign="E";break;default:e.warning("".concat(t," is not supported. ").concat(i," could not be added to the navigation context"))}return r};var s=a.filterConditions;var l=a.filterConditionsWithoutConflict?a.filterConditionsWithoutConflict:{};var u=n.propertiesWithoutConflict?n.propertiesWithoutConflict:{};var v=function(e,t,a){var n=s[t];var i=r&&r.getPropertyHelper().getProperty(t);var l=i===null||i===void 0?void 0:i.typeConfig;var u=r&&r.getControlDelegate().getTypeUtil();for(var v in n){var f=n[v];var p="",m="I",O="",h=null,P=void 0;var b=d.getOperator(f.operator);if(b instanceof g){var E;P=lt.createSemanticDatesFromConditions(f);var S=b.getModelFilter(f,t,l===null||l===void 0?void 0:l.typeInstance,false,l===null||l===void 0?void 0:l.baseType);if(!(S!==null&&S!==void 0&&S.aFilters)&&!(S!==null&&S!==void 0&&(E=S.aFilters)!==null&&E!==void 0&&E.length)){m=b!==null&&b!==void 0&&b.exclude?"E":"I";O=u.externalizeValue(S.getValue1(),l.typeInstance);h=u.externalizeValue(S.getValue2(),l.typeInstance);p=S.getOperator()}}else{var y=o.getSupportedOperations();if(y.includes(f===null||f===void 0?void 0:f.operator)){P=lt.createSemanticDatesFromConditions(f)}var R=f.values[0]&&f.values[0].toString()||"";var T=f.values[1]&&f.values[1].toString()||null;var C=c(f.operator,R,T);m=b!==null&&b!==void 0&&b.exclude?"E":"I";O=C===null||C===void 0?void 0:C.low;h=C===null||C===void 0?void 0:C.high;p=C===null||C===void 0?void 0:C.option}if(p&&P){e.addSelectOption(a?a:t,m,p,O,h,undefined,P)}else if(p){e.addSelectOption(a?a:t,m,p,O,h)}}};for(i in s){if(!t.getSelectOption(i)){if(i==="$editState"){continue}v(t,i)}else{if(u&&i in u){v(t,i,u[i])}if(i in l){v(t,i,l[i])}}}return t}function $e(e){var t=i.isStickySessionSupported(e.getModel().getMetaModel());var a=e.getModel("ui").getProperty("/isEditable");return t&&a}function _e(e,t,a){if(t&&e&&e.length){for(var n=0;n<e.length;n++){var r=t.getSelectOption("DisplayCurrency"),i=a&&a.getSelectOption("DisplayCurrency");if(e[n].$PropertyPath==="DisplayCurrency"&&(!r||!r.length)&&i&&i.length){var o=i[0];var c=o["Sign"];var s=o["Option"];var l=o["Low"];var u=o["High"];t.addSelectOption("DisplayCurrency",c,s,l,u)}}}}function Be(e,t,a){var n=e.getObject("".concat(t,"/")).$Key;var r=[];var i=[];var o=e.getObject("".concat(t,"/"));for(var c in o){if(o[c].$kind&&o[c].$kind==="Property"){var s=e.getObject("".concat(t,"/").concat(c,"@"))||{},l=n.indexOf(c)>-1,u=s["@Org.OData.Core.V1.Immutable"],v=!s["@Org.OData.Core.V1.Computed"],f=!s["@com.sap.vocabularies.UI.v1.Hidden"],p=s["@Org.OData.Core.V1.ComputedDefaultValue"],d=l&&o[c].$Type==="Edm.Guid"?p&&s["@com.sap.vocabularies.Common.v1.Text"]:false;if((d||l&&o[c].$Type!=="Edm.Guid")&&v&&f){r.push(c)}else if(u&&v&&f){i.push(c)}if(!v&&p&&a){var g;var m=Z(a).getDiagnostics();var O="Core.ComputedDefaultValue is ignored as Core.Computed is already set to true";m.addIssue(x.Annotation,D.Medium,O,N,N===null||N===void 0?void 0:(g=N.Annotations)===null||g===void 0?void 0:g.IgnoredAnnotation)}}}var h=lt.getRequiredPropertiesFromInsertRestrictions(t,e);if(h.length){h.forEach(function(a){var n=e.getObject("".concat(t,"/").concat(a,"@")),o=!n||!n["@com.sap.vocabularies.UI.v1.Hidden"];if(o&&r.indexOf(a)===-1&&i.indexOf(a)===-1){r.push(a)}})}return r.concat(i)}function Me(e,t){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=[];var r=[];var o="$NavigationPropertyBinding";var c;if(e.endsWith("$")){e=e.replace("/$","")}var s=e.replaceAll("%2F","/").split("/").filter(i.filterOutNavPropBinding);var l=i.getEntitySetPath(e,t);var u=l.split("/").filter(i.filterOutNavPropBinding);var v=t.getObject("/".concat(s.join("/"),"/$ContainsTarget"));var f=v&&s[s.length-1];if(!v){c=t.getObject("".concat(l,"@"))}if(s.length>1){var p=v?f:u[u.length-1];var d=v?l:"/".concat(u.slice(0,-1).join("/".concat(o,"/")));var g=lt.getNavigationRestrictions(t,d,p.replaceAll("%2F","/"));if(lt.hasRestrictedPropertiesInAnnotations(g,true,a)){r=a?g["UpdateRestrictions"].RequiredProperties:g["InsertRestrictions"].RequiredProperties}if((!r||!r.length)&&lt.hasRestrictedPropertiesInAnnotations(c,false,a)){r=lt.getRequiredPropertiesFromAnnotations(c,a)}}else if(lt.hasRestrictedPropertiesInAnnotations(c,false,a)){r=lt.getRequiredPropertiesFromAnnotations(c,a)}r.forEach(function(e){var t=e["$PropertyPath"];n.push(t)});return n}function ke(e,t){return lt.getRequiredProperties(e,t)}function we(e,t){return lt.getRequiredProperties(e,t,true)}function Ue(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(t){return e["@Org.OData.Capabilities.V1.UpdateRestrictions"].RequiredProperties}return e["@Org.OData.Capabilities.V1.InsertRestrictions"].RequiredProperties}function Ve(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(t){if(a){return e&&e["UpdateRestrictions"]&&e["UpdateRestrictions"].RequiredProperties?true:false}return e&&e["InsertRestrictions"]&&e["InsertRestrictions"].RequiredProperties?true:false}else if(a){return e&&e["@Org.OData.Capabilities.V1.UpdateRestrictions"]&&e["@Org.OData.Capabilities.V1.UpdateRestrictions"].RequiredProperties?true:false}return e&&e["@Org.OData.Capabilities.V1.InsertRestrictions"]&&e["@Org.OData.Capabilities.V1.InsertRestrictions"].RequiredProperties?true:false}function We(e,t,a,n,r,i){return new Promise(function(o){var c=e.getComponentData(),s=c&&c.startupParameters||{},l=e.getShellServices();if(!l.hasUShell()){t.forEach(function(e){var t;var o=n?"/".concat(e.$Name):(t=e.getPath)===null||t===void 0?void 0:t.call(e).slice(e.getPath().lastIndexOf("/")+1);var c=n?o.slice(1):o;if(i&&r){if(i[c]){a.setProperty(o,i[c])}}else if(s[c]){a.setProperty(o,s[c][0])}});return o(true)}return l.getStartupAppState(e).then(function(e){var c=e.getData()||{},l=c.selectionVariant&&c.selectionVariant.SelectOptions||[];t.forEach(function(e){var t;var o=n?"/".concat(e.$Name):(t=e.getPath)===null||t===void 0?void 0:t.call(e).slice(e.getPath().lastIndexOf("/")+1);var c=n?o.slice(1):o;if(i&&r){if(i[c]){a.setProperty(o,i[c])}}else if(s[c]){a.setProperty(o,s[c][0])}else if(l.length>0){for(var u in l){var v=l[u];if(v.PropertyName===c){var f=v.Ranges.length?v.Ranges[v.Ranges.length-1]:undefined;if(f&&f.Sign==="I"&&f.Option==="EQ"){a.setProperty(o,f.Low)}}}}});return o(true)})})}function Qe(e,t){var a=t,n=a?Object.keys(a).filter(function(e){return a[e].useForCreate}):[];var r;for(var i=0;i<n.length;i++){var o=n[i];var c=e&&e[o];if(c&&c.length===1){r=r||Object.create(null);r[o]=c[0]}}return r}function Ge(e){var t=[];if(e.parameters){var a=Object.keys(e.parameters)||[];if(a.length>0){a.forEach(function(a){var n=e.parameters[a];if(n.value&&n.value.value&&n.value.format==="binding"){var r={LocalProperty:{$PropertyPath:n.value.value},SemanticObjectProperty:a};if(t.length>0){for(var i=0;i<t.length;i++){if(t[i]["LocalProperty"]["$PropertyPath"]!==r["LocalProperty"]["$PropertyPath"]){t.push(r)}}}else{t.push(r)}}})}}return t}function qe(t,a){var n={};var r;var i=t.controlConfiguration;for(var o in i){if(o.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1||o.indexOf("@com.sap.vocabularies.UI.v1.Chart")>-1){if(i[o].navigation&&i[o].navigation.targetOutbound&&i[o].navigation.targetOutbound.outbound){var c=i[o].navigation.targetOutbound.outbound;var s=a[c];if(s.semanticObject&&s.action){if(o.indexOf("Chart")>-1){r=T(["fe","MicroChartLink",o])}else{r=T(["fe","HeaderDPLink",o])}var l=lt.getSemanticObjectMapping(s);n[r]={semanticObject:s.semanticObject,action:s.action,semanticObjectMapping:l}}else{e.error("Cross navigation outbound is configured without semantic object and action for ".concat(c))}}}}return n}function He(e,t){var a=typeof t==="string"?JSON.parse(t):t;for(var n=0;n<a.length;n++){var r=a[n]["LocalProperty"]&&a[n]["LocalProperty"]["$PropertyPath"]||a[n]["@com.sap.vocabularies.Common.v1.LocalProperty"]&&a[n]["@com.sap.vocabularies.Common.v1.LocalProperty"]["$Path"];var i=a[n]["SemanticObjectProperty"]||a[n]["@com.sap.vocabularies.Common.v1.SemanticObjectProperty"];if(e.getSelectOption(r)){var o=e.getSelectOption(r);e.removeSelectOption(r);e.massAddSelectOption(i,o)}}return e}function Xe(t,a,n){return new Promise(function(e){var r,i;if(n===""){r=t.getObject("".concat(a,"@").concat("com.sap.vocabularies.Common.v1.SemanticObject"));i=t.getObject("".concat(a,"@").concat("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"))}else{r=t.getObject("".concat(a,"@").concat("com.sap.vocabularies.Common.v1.SemanticObject","#").concat(n));i=t.getObject("".concat(a,"@").concat("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions","#").concat(n))}var o=[{semanticObject:r}];var c={semanticObject:r};e({semanticObjectPath:a,semanticObjectForGetLinks:o,semanticObject:c,unavailableActions:i})}).catch(function(t){e.error("Error in fnGetSemanticObjectsFromPath",t)})}function Ye(t,n,r,i){return Promise.all(t).then(function(e){var t,o,c,s=[];var l={};var u=function(e,t){for(var a in t){if(a===e){return true}else{return false}}};for(var v=0;v<e.length;v++){t=e[v];if(t&&t.length>0&&t[0]!==undefined){var f={};var p={};var d=void 0;for(var g=0;g<t.length;g++){s.push([]);var m=false;var O=false;for(var h=0;h<t[g][0].length;h++){o=t[g][0][h];c=o&&o.intent.split("?")[0].split("-")[1];if(!(o&&o.intent&&o.intent.indexOf(i)===0)){m=true;if(!u(c,n[v].unavailableActions)){s[g].push(o);O=true}}}p={semanticObject:n[v].semanticObject,path:n[v].path,HasTargets:O,HasTargetsNotFiltered:m};if(f[n[v].semanticObject]===undefined){f[n[v].semanticObject]={}}d=n[v].path.replace(/\//g,"_");if(f[n[v].semanticObject][d]===undefined){f[n[v].semanticObject][d]={}}f[n[v].semanticObject][d]=Object.assign(f[n[v].semanticObject][d],p)}var P=Object.keys(f)[0];if(Object.keys(l).includes(P)){l[P]=Object.assign(l[P],f[P])}else{l=Object.assign(l,f)}s=[]}}if(Object.keys(l).length>0){r.setProperty("semanticsTargets",a(l,r.getProperty("semanticsTargets")));return l}}).catch(function(t){e.error("fnUpdateSemanticTargetsModel: Cannot read links",t)})}function Ke(e,t,a,n,r){return lt.getSemanticObjectsFromPath(a,n,r)}function Je(e,t,a,n,r){var i,o;var c,s;for(var l=0;l<n.length;l++){o=n[l];i=Object.keys(a.getObject(o+"@"));for(var u=0;u<i.length;u++){if(i[u].indexOf("@".concat("com.sap.vocabularies.Common.v1.SemanticObject"))===0&&i[u].indexOf("@".concat("com.sap.vocabularies.Common.v1.SemanticObjectMapping"))===-1&&i[u].indexOf("@".concat("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"))===-1){s=/#(.*)/.exec(i[u]);c=s?s[1]:"";r.push(lt.getSemanticObjectPromise(e,t,a,o,c))}}}}function ze(t,a){var n=function(e,t,a){if(!e){return a}if(e instanceof Array){for(var r in e){a=a.concat(n(e[r],t,[]))}return a}if(e[t]){a.push(e[t])}if(typeof e=="object"&&e!==null){var i=Object.keys(e);if(i.length>0){for(var o=0;o<i.length;o++){a=a.concat(n(e[i[o]],t,[]))}}}return a};var r=function(e,t){return n(e,t,[])};var i=function(e){return e.filter(function(t,a){return e.indexOf(t)===a})};var o=t.getView();var c=o.getBindingContext("internal");if(c){var s=[];var u=t.getOwnerComponent();var v=l.getOwnerComponentFor(u);var f=v.getMetaModel();var p=u.getModel(a).getData();if(JSON.stringify(p)==="{}"){p=u.getModel(a)._getObject("/",undefined)}var d=r(p,"semanticObjectPath");d=i(d);var g=lt.getShellServices(v);var m=lt.getHash();var O=[];var h=[];var P;if(m&&m.indexOf("?")!==-1){m=m.split("?")[0]}Je(v,o,f,d,s);if(s.length===0){return Promise.resolve()}else{Promise.all(s).then(function(e){var t=[];var a;var n=e.filter(function(e){if(e.semanticObject!==undefined&&e.semanticObject.semanticObject&&typeof e.semanticObject.semanticObject==="object"){a=I(C(e.semanticObject.semanticObject.$Path));e.semanticObject.semanticObject=a;e.semanticObjectForGetLinks[0].semanticObject=a;return true}else if(e){return e.semanticObject!==undefined}else{return false}});for(var r=0;r<n.length;r++){P=n[r];if(P&&P.semanticObject&&!(P.semanticObject.semanticObject.indexOf("{")===0)){O.push(P.semanticObjectForGetLinks);h.push({semanticObject:P.semanticObject.semanticObject,unavailableActions:P.unavailableActions,path:n[r].semanticObjectPath});t.push(g.getLinksWithCache([P.semanticObjectForGetLinks]))}}return lt.updateSemanticTargets(t,h,c,m)}).catch(function(t){e.error("fnGetSemanticTargetsFromTable: Cannot get Semantic Objects",t)})}}else{return Promise.resolve()}}function Ze(e,t){var a=lt.FilterRestrictions;if(t===a.REQUIRED_PROPERTIES||t===a.NON_FILTERABLE_PROPERTIES){var n=[];if(e&&e[t]){n=e[t].map(function(e){return e.$PropertyPath})}return n}else if(t===a.ALLOWED_EXPRESSIONS){var r={};if(e&&e.FilterExpressionRestrictions){e.FilterExpressionRestrictions.forEach(function(e){if(r[e.Property.$PropertyPath]){r[e.Property.$PropertyPath].push(e.AllowedExpressions)}else{r[e.Property.$PropertyPath]=[e.AllowedExpressions]}})}return r}return e}function et(e,t,a){var n=t+"/";return e.reduce(function(e,t){if(t.startsWith(n)){var a=t.replace(n,"");if(e.indexOf(a)===-1){e.push(a)}}return e},a)}function tt(e,n){var r={},o=lt.FilterRestrictions;var c;var s="$NavigationPropertyBinding";var l="@Org.OData.Capabilities.V1.FilterRestrictions";var u=e.replaceAll("%2F","/").split("/").filter(i.filterOutNavPropBinding);var v="/".concat(u.join("/"),"/");var f=i.getEntitySetPath(e,n);var p=f.split("/").filter(i.filterOutNavPropBinding);var d=n.getObject("".concat(v,"$ContainsTarget"));var g=d&&u[u.length-1];if(!d){c=n.getObject("".concat(f).concat(l));r[o.REQUIRED_PROPERTIES]=Ze(c,o.REQUIRED_PROPERTIES)||[];var m=n.getObject("".concat(v,"@com.sap.vocabularies.Common.v1.ResultContext"));if(!m){r[o.NON_FILTERABLE_PROPERTIES]=Ze(c,o.NON_FILTERABLE_PROPERTIES)||[]}r[o.ALLOWED_EXPRESSIONS]=Ze(c,o.ALLOWED_EXPRESSIONS)||{}}if(u.length>1){var O=d?g:p[p.length-1];var h=d?f:"/".concat(p.slice(0,-1).join("/".concat(s,"/")));var P={};if(!O.includes("%2F")){var b=n.getObject("".concat(h).concat(l));r[o.REQUIRED_PROPERTIES]=et(Ze(b,o.REQUIRED_PROPERTIES)||[],O,r[o.REQUIRED_PROPERTIES]||[]);r[o.NON_FILTERABLE_PROPERTIES]=et(Ze(b,o.NON_FILTERABLE_PROPERTIES)||[],O,r[o.NON_FILTERABLE_PROPERTIES]||[]);var E=Ze(b,o.ALLOWED_EXPRESSIONS)||{};P[o.ALLOWED_EXPRESSIONS]=Object.keys(E).reduce(function(e,t){if(t.startsWith(O+"/")){var a=t.replace(O+"/","");e[a]=E[t]}return e},{})}r[o.ALLOWED_EXPRESSIONS]=a({},r[o.ALLOWED_EXPRESSIONS],P[o.ALLOWED_EXPRESSIONS]||{});var S=lt.getNavigationRestrictions(n,h,O.replaceAll("%2F","/"));var y=S&&S["FilterRestrictions"];var R=Ze(y,o.REQUIRED_PROPERTIES)||[];r[o.REQUIRED_PROPERTIES]=t(r[o.REQUIRED_PROPERTIES].concat(R));var T=Ze(y,o.NON_FILTERABLE_PROPERTIES)||[];r[o.NON_FILTERABLE_PROPERTIES]=t(r[o.NON_FILTERABLE_PROPERTIES].concat(T));r[o.ALLOWED_EXPRESSIONS]=a({},r[o.ALLOWED_EXPRESSIONS],Ze(y,o.ALLOWED_EXPRESSIONS)||{});var C=n.getObject("/".concat(u.join("/")).concat(l));var j=Ze(C,o.REQUIRED_PROPERTIES)||[];r[o.REQUIRED_PROPERTIES]=t(r[o.REQUIRED_PROPERTIES].concat(j));var A=Ze(C,o.NON_FILTERABLE_PROPERTIES)||[];r[o.NON_FILTERABLE_PROPERTIES]=t(r[o.NON_FILTERABLE_PROPERTIES].concat(A));r[o.ALLOWED_EXPRESSIONS]=a({},r[o.ALLOWED_EXPRESSIONS],Ze(C,o.ALLOWED_EXPRESSIONS)||{})}return r}function at(e,t,a,n){a=a||{};if(n){return n.templateControlFragment(e,t,a.view).then(function(e){return n.targets==="xmlTree"&&e.length>0?e[0]:e})}else{return ot().then(function(){return f.process(p.loadTemplate(e,"fragment"),{name:e},t)}).then(function(e){var t=e.firstElementChild;if(!!a.isXML&&t){return t}return v.load({id:a.id,definition:e,controller:a.controller})})}}function nt(e,t){var a=e.split("/").filter(Boolean),n=a.pop(),r=a.join("/"),i=r&&t.getObject("/".concat(r));if((i===null||i===void 0?void 0:i.$kind)==="Singleton"){var o=a[a.length-1];return"/".concat(o,"/").concat(n)}return undefined}function rt(e,t){if(!e||!t){return Promise.resolve(null)}var a=t.getMetaModel();var n=nt(e,a);if(n){var r=t.bindProperty(n);return r.requestValue()}return Promise.resolve(null)}function it(t,a,n){var r;var i=function(){if(r){if(!r.events){r.events={}}if(!r.events[a]){r.events[a]=n}else{var e=r.events[a];r.events[a]=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++){a[r]=arguments[r]}n.apply.apply(n,[this].concat(a));e.apply.apply(e,[this].concat(a))}}}};if(t.isA("sap.ui.mdc.Chart")){t.innerChartBound().then(function(){r=t.getControlDelegate()._getChart(t).getBindingInfo("data");i()}).catch(function(t){e.error(t)})}else{r=t.data("rowsBindingInfo");i()}}function ot(){return new Promise(function(e){sap.ui.require(["sap/fe/macros/macroLibrary"],function(){e()})})}function ct(e,t){var a;if(e.indexOf("@$ui5.overload")>-1){a=e.split("@$ui5.overload")[0]}else{var n=e.split("/0")[0].split(".");a="/".concat(n[n.length-1],"/")}return a+t}function st(e,t){var a=new m({anyText:e});t.addDependent(a);var n=a.getAnyText();t.removeDependent(a);a.destroy();return n}var lt={isPropertyFilterable:V,isFieldControlPathInapplicable:ae,removeSensitiveData:ne,fireButtonPress:J,getTargetView:te,getCurrentPageView:ee,hasTransientContext:B,updateRelatedAppsDetails:K,resolveStringtoBoolean:z,getAppComponent:Z,getMandatoryFilterFields:oe,getContextPathProperties:ie,getParameterInfo:Te,updateDataFieldForIBNButtonsVisibility:se,getTranslatedText:le,getEntitySetName:fe,getActionPath:ve,computeDisplayMode:pe,isStickyEditMode:$e,getOperatorsForProperty:Se,getOperatorsForDateProperty:Re,getOperatorsForGuidProperty:ye,addSelectionVariantToConditions:Ne,addExternalStateFiltersToSelectionVariant:Le,addPageContextToSelectionVariant:Fe,addDefaultDisplayCurrency:_e,getNonComputedVisibleFields:Be,setUserDefaults:We,getShellServices:W,getHash:Q,getIBNActions:ce,getHeaderFacetItemConfigForExternalNavigation:qe,getSemanticObjectMapping:Ge,setSemanticObjectMappings:He,getSemanticObjectPromise:Ke,getSemanticTargetsFromPageModel:ze,getSemanticObjectsFromPath:Xe,updateSemanticTargets:Ye,getPropertyDataType:_,getNavigationRestrictions:k,getSearchRestrictions:M,getFilterRestrictionsByPath:tt,getSpecificAllowedExpression:Ee,getAdditionalParamsForCreate:Qe,requestSingletonProperty:rt,templateControlFragment:at,addEventToBindingInfo:it,FilterRestrictions:{REQUIRED_PROPERTIES:"RequiredProperties",NON_FILTERABLE_PROPERTIES:"NonFilterableProperties",ALLOWED_EXPRESSIONS:"FilterAllowedExpressions"},AllowedExpressionsPrio:["SingleValue","MultiValue","SingleRange","MultiRange","SearchExpression","MultiRangeOrSearchExpression"],normalizeSearchTerm:$,getSingletonPath:nt,getRequiredPropertiesFromUpdateRestrictions:we,getRequiredPropertiesFromInsertRestrictions:ke,hasRestrictedPropertiesInAnnotations:Ve,getRequiredPropertiesFromAnnotations:Ue,getRequiredProperties:Me,checkIfResourceKeyExists:ue,setContextsBasedOnOperationAvailable:Oe,setDynamicActionContexts:he,requestProperty:me,getParameterPath:ct,getRelatedAppsMenuItems:H,getTranslatedTextFromExpBindingString:st,addSemanticDatesToConditions:je,addSelectOptionToConditions:Ce,createSemanticDatesFromConditions:Ie,updateRelateAppsModel:F,getSemanticObjectAnnotations:Y};return lt},false);
//# sourceMappingURL=CommonUtils.js.map