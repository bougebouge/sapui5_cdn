/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/base/util/ObjectPath","sap/fe/core/templating/DisplayModeFormatter","sap/m/Button","sap/m/table/Util","sap/ui/dom/units/Rem"],function(t,e,a,r,n,i){"use strict";var o=a.EDM_TYPE_MAPPING;var s={nbCalls:0,oBtn:undefined,propertyHelper:undefined,init:function(){this.nbCalls=this.nbCalls?this.nbCalls:0;this.nbCalls++;this.oBtn=this.oBtn?this.oBtn:(new r).placeAt(sap.ui.getCore().getStaticAreaRef());this.oBtn.setVisible(false)},getButtonWidth:function(t){if(this.oBtn.getVisible()===false){this.oBtn.setVisible(true)}this.oBtn.setText(t);this.oBtn.rerender();var e=i.fromPx(this.oBtn.getDomRef().scrollWidth);this.oBtn.setVisible(false);return Math.round(e*100)/100},getMDCColumnWidth:function(a){var r;var i=(r=o[a.typeConfig?a.typeConfig.className:a.$Type])===null||r===void 0?void 0:r.type;var s=i?e.get(i):null;var l=s?new s:null;var c=l?n.calcColumnWidth(l):null;if(!c){t.error("Cannot compute the column width for property: ".concat(a.name))}return c?parseFloat(c.replace("Rem","")):0},_getPropertyHelperCache:function(t){return this.propertyHelper&&this.propertyHelper[t]},_setPropertyHelperCache:function(t,e){this.propertyHelper=Object.assign({},this.propertyHelper);this.propertyHelper[t]=e},getWidthForDataFieldForAnnotation:function(e,a,r,n){var i=n.getObject(e.Target.$AnnotationPath),o=i.Value;var l,c=0,p=0;if(o){l=this._getPropertiesByPath(r,n.getObject(e.Target.$AnnotationPath).Value.$Path);var h=n.getObject(e.Target.$AnnotationPath).Visualization;switch(h&&h.$EnumMember){case"com.sap.vocabularies.UI.v1.VisualizationType/Rating":var u=n.getObject(e.Target.$AnnotationPath).TargetValue;c=parseInt(u,10)*1.375;break;case"com.sap.vocabularies.UI.v1.VisualizationType/Progress":default:c=5}var b=l?l.label:e.Label||"";p=a&&b?s.getButtonWidth(b):0}else if(i.$Type==="com.sap.vocabularies.Communication.v1.ContactType"){var m=e.Target.$AnnotationPath.replace(/\/@.*/,"");var g=n.getObject(m+"/"+i.fn.$Path);c=this.getMDCColumnWidth(g)}else{t.error("Cannot compute width for type object: ".concat(i.$Type))}return{labelWidth:p,propertyWidth:c}},getWidthForDataField:function(e,a,r,n){var i=this._getPropertiesByPath(r,e.Value.$Path),o=n.getObject("".concat(e.Value.$Path,"@com.sap.vocabularies.Common.v1.Text")),l=n.getObject("".concat(e.Value.$Path,"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"));var c=0,p=0;if(i){var h=0;if(o&&l){var u=this._getPropertiesByPath(r,o.$Path);h=u&&this.getMDCColumnWidth(u)-1}switch(l&&l.$EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":c=this.getMDCColumnWidth(i)-1+h;break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":c=h;break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":default:c=this.getMDCColumnWidth(i)-1}var b=e.Label?e.Label:i.label;p=a&&b?s.getButtonWidth(b):0}else{t.error("Cannot compute width for type object: ".concat(e.$Type))}return{labelWidth:p,propertyWidth:c}},_getPropertiesByPath:function(t,e){return t.find(function(t){return t.path===e})},exit:function(){this.nbCalls--;if(this.nbCalls===0){this.oBtn.destroy();this.oBtn=null}}};return s},false);
//# sourceMappingURL=TableSizeHelper.js.map