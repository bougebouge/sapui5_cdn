/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/ui/core/message/Message","../MacroAPI"],function(e,t,r){"use strict";var i,n,a,l,o,u,s,c,p,d,g,f,b,y,v,h,m,A,w,z,M,O,P,B;var C=e.xmlEventHandler;var I=e.property;var E=e.event;var j=e.defineUI5Class;var L=e.association;function F(e,t,r,i){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function x(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function S(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;D(e,t)}function D(e,t){D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return D(e,t)}function R(e,t,r,i,n){var a={};Object.keys(i).forEach(function(e){a[e]=i[e]});a.enumerable=!!a.enumerable;a.configurable=!!a.configurable;if("value"in a||a.initializer){a.writable=true}a=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},a);if(n&&a.initializer!==void 0){a.value=a.initializer?a.initializer.call(n):void 0;a.initializer=undefined}if(a.initializer===void 0){Object.defineProperty(e,t,a);a=null}return a}function V(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}function _(e){if(e.isA("sap.fe.core.controls.FieldWrapper")){var t=e;var r=t.getEditMode()==="Display"?[t.getContentDisplay()]:t.getContentEdit();if(r.length>=1){return r.length?r[0]:undefined}}else{return e}}var k=(i=j("sap.fe.macros.field.FieldAPI"),n=I({type:"boolean"}),a=I({type:"boolean"}),l=I({type:"string"}),o=I({type:"string",expectedAnnotations:[],expectedTypes:["EntitySet","EntityType","Singleton","NavigationProperty","Property"]}),u=E(),s=L({type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}),c=I({type:"boolean"}),p=I({type:"sap.fe.macros.FieldFormatOptions"}),d=I({type:"string"}),g=I({type:"boolean"}),f=C(),i(b=(y=function(e){S(r,e);function r(){var t;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++){i[n]=arguments[n]}t=e.call.apply(e,[this].concat(i))||this;F(t,"editable",v,x(t));F(t,"readOnly",h,x(t));F(t,"id",m,x(t));F(t,"metaPath",A,x(t));F(t,"change",w,x(t));F(t,"ariaLabelledBy",z,x(t));F(t,"required",M,x(t));F(t,"formatOptions",O,x(t));F(t,"semanticObject",P,x(t));F(t,"collaborationEnabled",B,x(t));return t}var i=r.prototype;i.handleChange=function e(t){this.fireChange({value:this.getValue(),isValid:t.getParameter("valid")})};i.onBeforeRendering=function e(){var t=this.getContent();if(t&&t.addAriaLabelledBy){var r=this.getAriaLabelledBy();for(var i=0;i<r.length;i++){var n=r[i];var a=t.getAriaLabelledBy()||[];if(a.indexOf(n)===-1){t.addAriaLabelledBy(n)}}}};i.enhanceAccessibilityState=function e(t,r){var i=this.getParent();if(i&&i.enhanceAccessibilityState){i.enhanceAccessibilityState(this,r)}return r};i.getAccessibilityInfo=function e(){var t=this.content;return t&&t.getAccessibilityInfo?t.getAccessibilityInfo():{}};i.getIdForLabel=function e(){var t=this.content;return t.getIdForLabel()};i.getValue=function e(){var t,r,i,n;var a=_(this.content);if(this.collaborationEnabled&&(t=a)!==null&&t!==void 0&&t.isA("sap.m.HBox")){a=a.getItems()[0]}if((r=a)!==null&&r!==void 0&&r.isA("sap.m.CheckBox")){return a.getSelected()}else if((i=a)!==null&&i!==void 0&&i.isA("sap.m.InputBase")){return a.getValue()}else if((n=a)!==null&&n!==void 0&&n.isA("sap.ui.mdc.Field")){return a.getValue()}else{throw"getting value not yet implemented for this field type"}};i.addMessage=function e(r){var i=this.getMessageManager();var n=_(this.content);var a;if(n!==null&&n!==void 0&&n.isA("sap.m.CheckBox")){a=n.getBinding("selected").getResolvedPath()}else if(n!==null&&n!==void 0&&n.isA("sap.m.InputBase")){a=n.getBinding("value").getResolvedPath()}else if(n!==null&&n!==void 0&&n.isA("sap.ui.mdc.Field")){a=n.getBinding("value").getResolvedPath()}var l=new t({target:a,type:r.type,message:r.message,processor:n===null||n===void 0?void 0:n.getModel(),description:r.description,persistent:r.persistent});i.addMessages(l);return l.getId()};i.removeMessage=function e(t){var r=this.getMessageManager();var i=r.getMessageModel().getData();var n=i.find(function(e){return e.id===t});if(n){r.removeMessages(n)}};i.getMessageManager=function e(){return sap.ui.getCore().getMessageManager()};return r}(r),v=R(y.prototype,"editable",[n],{configurable:true,enumerable:true,writable:true,initializer:null}),h=R(y.prototype,"readOnly",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),m=R(y.prototype,"id",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),A=R(y.prototype,"metaPath",[o],{configurable:true,enumerable:true,writable:true,initializer:null}),w=R(y.prototype,"change",[u],{configurable:true,enumerable:true,writable:true,initializer:null}),z=R(y.prototype,"ariaLabelledBy",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),M=R(y.prototype,"required",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),O=R(y.prototype,"formatOptions",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),P=R(y.prototype,"semanticObject",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),B=R(y.prototype,"collaborationEnabled",[g],{configurable:true,enumerable:true,writable:true,initializer:null}),R(y.prototype,"handleChange",[f],Object.getOwnPropertyDescriptor(y.prototype,"handleChange"),y.prototype),y))||b);return k},false);
//# sourceMappingURL=FieldAPI.js.map