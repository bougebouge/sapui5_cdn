/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/macros/filter/FilterUtils","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,r){"use strict";var i=[];var a={getChartSelectionsExist:function(t,e){var r=e||t;if(t){try{var a=t.getControlDelegate()._getChart(t);if(a){var n=this.getDimensionsFromDrillStack(a);var l=n.length>i.length;var s=n.length<i.length;var o=n.toString()===i.toString();var g;if(s&&n.length===1){g=this.getChartSelections(t,true)}else{g=this.getChartSelections(t)}if(l||s){i=n;return g.length>0}else if(o&&r.isA("sap.ui.mdc.Table")){return g.length>0}}}catch(t){return false}}return false},getChartSelections:function(t,e){if(e){this.getChartModel(t,"",{})}var r=this.getChartModel(t,"filters");return r||[]},getChartFilters:function(t){var r=this.getChartSelections(t)||[];return new e(r)},setChartFilters:function(t){var i=this.getChartModel(t,"drillStack")||{};var a=t.getControlDelegate()._getChart(t);var n=[];var l;function s(t){for(var i in t){var a=[];for(var s in l){var o=l[s];var g=t[i].data[o];if(g!==undefined){a.push(new e({path:o,operator:r.EQ,value1:g}))}}if(a.length>0){n.push(new e(a,true))}}}if(a){var o=this.getVizSelection(a);l=a.getVisibleDimensions();var g=this.getDimensionsFromDrillStack(a);if(g.length>0){this.getChartModel(t,"drillStack",{});i[g.toString()]=o;this.getChartModel(t,"drillStack",i)}if(o.length>0){s(o)}else{var h=Object.keys(i)||[];var c=i[h[h.length-2]]||[];s(c)}this.getChartModel(t,"filters",n)}},getFilterBarFilterInfo:function(e){return t.getFilterInfo(e.getFilter(),{targetControl:e})},getAllFilterInfo:function(t){var e=this.getFilterBarFilterInfo(t);var r=this.getChartFilters(t);if(r&&r.aFilters&&r.aFilters.length){e.filters.push(r)}return e},getChartSelectedData:function(t){var e=[];switch(t.getSelectionBehavior()){case"DATAPOINT":e=t.getSelectedDataPoints().dataPoints;break;case"CATEGORY":e=t.getSelectedCategories().categories;break;case"SERIES":e=t.getSelectedSeries().series;break}return e},getChartModel:function(t,e,r){var i=t.getBindingContext("internal");if(!i){return false}if(r){i.setProperty(e,r)}return i&&i.getObject(e)},getDimensionsFromDrillStack:function(t){var e=t.getDrillStack()||[];var r=e.pop()||{};return r.dimension||[]},getVizSelection:function(t){return t&&t._getVizFrame()&&t._getVizFrame().vizSelection()||[]}};return a},false);
//# sourceMappingURL=ChartUtils.js.map