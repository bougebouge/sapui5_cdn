/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/CommonUtils","sap/fe/core/controllerextensions/collaboration/ActivitySync","sap/fe/core/controllerextensions/collaboration/CollaborationCommon"],function(e,t,n){"use strict";var i=n.Activity;function a(t){var n=e.getTargetView(t);return n.findElements(true,function(e){return e.getFieldHelp&&e.getDomRef()&&e.getFieldHelp()===t.getId()})[0]}function o(e){var n=e.getSource();var a=l.getRelatedFieldFromValueHelp(n);var o=t.isConnected(a);if(o&&a.getBinding("value")){var g=a.getBinding("value").isA("sap.ui.model.CompositeBinding")?"".concat(a.getBindingContext().getPath(),"/").concat(a.getBinding("value").getBindings()[0].getPath()):"".concat(a.getBindingContext().getPath(),"/").concat(a.getBinding("value").getPath());t.send(a,i.LiveChange,g)}}function g(e){var n=e.getSource();var a=l.getRelatedFieldFromValueHelp(n);var o=t.isConnected(a);var g=a.getBinding("value").isA("sap.ui.model.CompositeBinding");var r=g?a.getValue()[1]:a.getValue();return new Promise(function(e){setTimeout(function(){var l;var c=g?n.getConditions()[0].values[0]:(l=a.getBinding("value"))===null||l===void 0?void 0:l.getValue();if(o&&r===c){var d=g?"".concat(a.getBindingContext().getPath(),"/").concat(a.getBinding("value").getBindings()[0].getPath()):"".concat(a.getBindingContext().getPath(),"/").concat(a.getBinding("value").getPath());t.send(a,i.Undo,d)}e()},0)})}var l={getRelatedFieldFromValueHelp:a,onValueHelpOpenDialog:o,onValueHelpCloseDialog:g};return l},false);
//# sourceMappingURL=collaborationHelper.js.map