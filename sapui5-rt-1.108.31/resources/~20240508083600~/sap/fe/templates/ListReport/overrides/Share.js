/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/CommonUtils","sap/fe/core/helpers/SemanticDateOperators","sap/ui/core/routing/HashChanger"],function(e,t,r,n){"use strict";function a(e){var t;var r=(t=e._getTable)===null||t===void 0?void 0:t.call(e);if(!r){return""}var n=r.getRowBinding()||r.getBinding("items");var a=n&&n.getDownloadUrl()||"";var i=a.split("?");var o="".concat(i[0],"/$count?");var s=[];if(i.length>1){var l=i[1];l.split("&").forEach(function(e){var t=e.split("=");switch(t[0]){case"$apply":case"$search":case"$filter":s.push(e)}})}return o+s.join("&")}function i(){var t=sap.ushell&&sap.ushell.Container;if(t){return t.getFLPUrlAsync(true).then(function(e){return e}).catch(function(t){e.error("Could not retrieve cFLP URL for the sharing dialog (dialog will not be opened)",t)})}else{return Promise.resolve(document.URL)}}function o(e){var t=e._getFilterBarControl();if(t){var n=t.getFilterConditions();var i=r.hasSemanticDateOperations(n);if(i){return a(e)}}return""}function s(){var t=n.getInstance().getHash();var r=n.getInstance().hrefForAppSpecificHash?n.getInstance().hrefForAppSpecificHash(""):"";var a=t?r+t:window.location.hash;if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.runningInIframe&&sap.ushell.Container.runningInIframe()){sap.ushell.Container.getFLPUrl(true).then(function(e){return e.substr(0,e.indexOf("#"))+a}).catch(function(t){e.error("Could not retrieve cFLP URL for the sharing dialog (dialog will not be opened)",t)})}else{return window.location.origin+window.location.pathname+a}}var l={adaptShareMetadata:function(r){var n=this;Promise.resolve(s()).then(function(e){var a=t.getAppComponent(n.base.getView());var i=a.getMetadata();var s=i.getManifestEntry("sap.ui");var l=s&&s.icons&&s.icons.icon||"";var c=i.getManifestEntry("sap.app");var u=c&&c.title||"";r.tile={icon:l,title:u,queryUrl:o(n.base.getView().getController())};r.title=document.title;r.jam.url=e;var p=n.base.getView().getModel("collaborationInfo");p.setProperty("/url",r.url);p.setProperty("/appTitle",r.title)}).catch(function(t){e.error(t)});return Promise.resolve(i()).then(function(e){r.email.url=e;return r})}};return l},false);
//# sourceMappingURL=Share.js.map