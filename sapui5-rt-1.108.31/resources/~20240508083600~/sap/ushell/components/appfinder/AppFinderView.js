// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/View","sap/ui/thirdparty/jquery","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device"],function(e,jQuery,t,n,o,a,r,s,i,l,p,u,d,c,h,g){"use strict";return e.extend("sap.ushell.components.appfinder.AppFinderView",{createContent:function(){var e=h.i18n;this.oPage=new c("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?e.getText("appFinderTitle"):e.getText("appFinder_group_context_title",t)}}});return this.oPage},_showSearch:function(e){var t="enableCatalogSearch";if(e==="userMenu"){t="enableEasyAccessUserMenuSearch"}else if(e==="sapMenu"){t="enableEasyAccessSAPMenuSearch"}return this.getModel().getProperty("/"+t)},_showSearchTag:function(e){if(e==="userMenu"||e==="sapMenu"){return false}return this.getModel().getProperty("/enableCatalogTagFilter")},createSubHeader:function(){this.oToolbar=new d("appFinderSubHeader",{});if(g.system.desktop){this.oToolbar.addEventDelegate({onAfterRendering:function(){jQuery("#catalog-button").attr("accesskey","a")}})}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new p("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?h.i18n.getText("ToggleButtonHide"):h.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:h.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton)}},updateSubHeader:function(e,t){var n,o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(t){n=this.createSegmentedButtons(e);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(n)}if(this._showSearch(e)){o=this.createSearchControl(e);this.oToolbar.addContent(o)}this.getController()._updateCurrentMenuName(e)},createSegmentedButtons:function(e){if(this.segmentedButton){this.segmentedButton.setSelectedKey(e);return this.segmentedButton}var t=this.getController();var n=h.i18n;this.segmentedButton=new i("appFinderSegmentedButtons",{items:[new l("catalog",{text:n.getText("appFinderCatalogTitle"),key:"catalog",press:function(e){t.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"catalogView",writeToDom:true}),new u({key:"aria-describedby",value:n.getText("AppFinder.SegmentedButton.Catalog.Describedby"),writeToDom:true})]})]});if(t.bEnableEasyAccessUserMenu){this.segmentedButton.addItem(new l("userMenu",{text:n.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"userMenuView",writeToDom:true}),new u({key:"aria-describedby",value:n.getText("AppFinder.SegmentedButton.UserMenu.Describedby"),writeToDom:true})]}))}if(t.bEnableEasyAccessSAPMenu){this.segmentedButton.addItem(new l("sapMenu",{text:n.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new u({key:"aria-controls",value:"sapMenuView",writeToDom:true}),new u({key:"aria-describedby",value:n.getText("AppFinder.SegmentedButton.SAPMenu.Describedby"),writeToDom:true})]}))}this.segmentedButton.setSelectedKey(e);return this.segmentedButton},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);jQuery("#appFinderSearch input").select()},createSearchControl:function(e){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new s("appFinderSearchContainer")}this.oAppFinderSearchContainer.removeAllItems();if(e==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl())}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new r("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:a.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new u({key:"aria-controls",value:"",writeToDom:true}));if(g.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(n){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){n.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}}})}.bind(this))}.bind(this))}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(e);return this.oAppFinderSearchContainer},_updateSearchWithPlaceHolder:function(e){var t="";if(e==="catalog"){t="EasyAccessMenu_SearchPlaceHolder_Catalog"}else if(e==="userMenu"){t="EasyAccessMenu_SearchPlaceHolder_UserMenu"}else if(e==="sapMenu"){t="EasyAccessMenu_SearchPlaceHolder_SAPMenu"}if(t&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(h.i18n.getText(t));this.oAppFinderSearchControl.setTooltip(h.i18n.getText(t))}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter}var e=this.getController();this.oAppFinderTagFilter=new o("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(e){return e.length>0}},items:{path:"/tagList",sorter:new n("tag",false,false),template:new t({text:"{tag}",key:"{tag}"})},selectionChange:[e.onTagsFilter,e]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder"}})});
//# sourceMappingURL=AppFinderView.js.map