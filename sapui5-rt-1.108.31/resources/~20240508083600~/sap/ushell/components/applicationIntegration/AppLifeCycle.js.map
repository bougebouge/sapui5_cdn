{"version":3,"file":"AppLifeCycle.js","names":["sap","ui","define","ElementsModel","Storage","BlueBoxHandler","ShellUIService","Application","RelatedServices","RelatedShellElements","AppMeta","AppConfiguration","utils","Device","Config","ApplicationType","UriParameters","jQuery","Log","EventHub","oUrlParsing","mobileLibrary","AppLifeCycle","oViewPortContainer","aCachedAppTypes","sRootIntent","oShellUIService","appState","oIntentToStorageId","disableHomeAppCache","oCurrentApplication","oActualElementsModelStateMap","home","embedded","headerless","merged","blank","app","minimal","standalone","lean","oWebGuiV1StatefulCache","oGlobalShellCommunicationHandlers","oGlobalIframeCommunicationHandlers","isBackNavigationChanged","oKeepAliveModes","FULL","RESTRICTED","fnOldTriggerEmail","URLHelper","this","shellElements","service","isCurrentApp","appId","isAppWithSimilarShellHashInCache","sFixedShellHash","oAppEntry","get","shellHash","isAppInCache","normalizeAppId","sAppId","sCmp","isCmp","endsWith","substring","length","onComponentCreated","oEvent","sChannel","oData","oApp","component","getId","active","onGetMe","store","oStorageEntry","meta","stateStored","destroy","oFrom","oDeferred","oInnerControl","oPromiseAppDestroy","doDestroy","getUrl","deleteStateFul","removeControl","getStateFul","isStatefulContainerSupported","oHandler","getHandler","container","Promise","resolve","remove","then","oPromise","sendBeforeAppCloseEvent","undefined","sError","error","restore","handleExitStateful","sFromId","isHomePage","sBBStorageId","oHandlers","getStorageKey","isBackNavigation","getCore","getEventBus","publish","handleExitApplication","sToId","oTo","that","bIsAppOfTypeCachable","oPromiseAppClose","oDeferredAppClose","getIframeReusedForApp","setProperty","postMessageToIframeApp","Deferred","promise","getIsStateful","postMessageRequest","indexOf","getApplicationType","isAppOfTypeCached","closeKeepAliveApps","fnCloseKeepAliveIfRestricted","value","keepAliveMode","fnFilterApps","arrClosePromises","arrKeepAliveRestrictedApps","forEach","apply","push","oRestrictedApp","e","onBeforeNavigate","onAfterNavigate","bIsShellApps","setActiveAppContainer","storeApp","oContainer","oTarget","oKeepAliveMode","set","stt","appRelatedElements","getAppRelatedElement","getMetadata","globalValue","paramValue","appTarget","ui5ComponentName","enableRouterRetrigger","setStorageKey","restoreApp","sKeepAlive","window","location","href","isCachedEnabledAsAppParameter","oShellHash","params","url","calculateAppType","applicationType","additionalInformation","startsWith","getStatefulCapabilities","appCapabilities","statefulContainer","isNotifyInnerAppRouteChangeEnabled","notifyInnerAppRouteChange","isStatefulCapabilityEnabled","oStatefulCap","enabled","isGUICapabilityEnabled","protocol","isFLPCapabilityEnabled","isGUIStatefulCapabilityEnabled","openApp","inAppId","sIntent","oTmpAppContainer","sTmpUrl","semanticObject","action","getById","getControl","removeCapabilities","createApplicationContainer","appFrameworkId","getWebGuiV1StatefulContainer","removeWebGuiV1StatefulContainer","removeApplication","isCapUT","setCapabilities","getAppMeta","evict","oEntry","key","addEvents","hasBeenCalled","on","do","intent","disable","setApplicationFullWidth","bValue","init","inAppState","oInViewPortContainer","inSRootIntent","inDisableHomeAppCache","oShellUIServiceChange","aActions","oCacheConfigurations","nCacheSize","ushell","Container","getServiceAsync","oAppStateService","bAppStateConfigPersistent","getPersistentWhenShared","triggerEmail","bind","sTo","sSubject","sBody","sCc","sBcc","sFLPUrl","document","URL","setAppStateToPublic","done","sNewURL","sXStateKey","sIStateKey","sXStateKeyNew","sIStateKeyNew","includes","replace","fail","system","phone","limit","tablet","desktop","scopeObject","ownerComponent","scopeType","evictObj","registerShellCommunicationHandler","oRequestCalls","create","isActiveOnly","distributionType","fnResponseHandler","oPromoise","oRespData","info","catch","oError","oServiceCalls","subscribe","executeServiceCallFn","oServiceParams","mapCapabilities","oMessageData","body","setup","oSetup","arrCap","sAppType","sFrameworkId","getFrameworkId","bIgnoreStateful","getIsKeepAlive","isStateful","isIframeValid","isIframeBusy","session","bLogoutSupport","loadFinished","setWebGuiV1StatefulContainer","setIsStateful","getElementsModel","addControl","oControl","addCenterViewPort","sId","oBlueBox","bIsStateful","removeCenterViewPort","getViewPortControl","getViewPortContainer","navTo","getCurrentApplication","bIsFull","oCurrent","toggleStyleClass","createComponent","oResolvedHashFragment","oParsedShellHash","fnCloseKeepAliveIfSameUI5App","setDangling","all","reject","getAppContainer","oResolvedNavigationTarget","bIsColdStart","shellUIService","getInterface","targetNavigationMode","UI5APP","setIframeHandlers","getShellUIService","initShellUIService","_attachHierarchyChanged","onHierarchyChange","_attachTitleChanged","onTitleChange","_attachRelatedAppsChanged","onRelatedAppsChange","_attachBackNavigationChanged","fnOnBackNavigationChange","activeContainer","oApplicationContainer","aAllApplicationContainers","getWebGuiV1AllApplicationContainers","oApplicationContainerToDeactivate","setActive","oAppContainer","showApplicationContainer","hasStyleClass","reuseStateFulContainerAndRestore","sStorageId","vError","message","reuseStateFulContainer","initAppMetaParams","getIsHierarchyChanged","setHierarchy","getIsTitleChanged","setTitle","getIsRelatedAppsChanged","setRelatedApps","setBackNavigation","reuseApplicationContainer","setNewApplicationContext","publishNavigationStateEvents","oApplication","fnOnAfterRendering","origExit","appMetaData","sIcon","icon","sTitle","title","addEventDelegate","onAfterRendering","exit","arguments","_applyContentDensityByPriority","setTimeout","oEventData","extend","componentHandle","usageIcon","usageTitle","oPublicEventData","_publicEventDataFromResolutionResult","renderers","fiori2","publishExternalEvent","sProp","Object","freeze","getInMemoryInstance","sAppPart","sOldShellHash","sFullAppId","sOldShellHashLowerCase","bNavigateToHomepage","bNavigatingFromHomeWithAppState","toLowerCase","isInstanceSupported","handleOpenStateful","bIsInitial","bIsInCache","handleControl","fnWrapper","sOldFixedShellHash","bReuseStatefulContainer","oCachedEntry","bDefaultFullWidth","bKeptAliveApp","oDeferredDestroyApp","oDeferredOpenApp","oDeffedControlCreation","oMetadata","oCurrentAppContainer","oOldAppStorageEntry","oTargetAppContainer","iLastValidTimeDelta","oOldHash","sOldFullAppId","sCurrentPageId","Date","getTime","getIsIframeValidTime","time","isIframeBusySupported","getIsIframeBusy","isIframeIsValidSupported","warning","parseShellHash","getCurrentCenterPage","byId","getDefaultFullWidthSetting","bFullWidthCapability","bFullWidth","fullWidth","isWebGuiV1StatefulContainer","getDeffedControlCreation","oPromiseAsyncAppCreate","switchState","setPerformanceMark","switchViewState","sState","bSaveLastState","sActualState","bIsCurrentStateHome","last","destroyManageQueue","assignNew","processDangling","hasher","getHash","searchModel","getModel","setHash","getProperty","JSON","stringify","getJson","oCommunicationHandler","registerIframeCommunicationHandler","sHandlers","sType","sServiceName","sInterface","oMessageBody","bWaitForResponse","checkIfPostIsNeeded","oCurrContainer","fnCallBackHandler","getActiveAppContainer","bActiveContainerPostSent","aContainers","hasIFrame","isCapabilitySupported","isAppTypeSupported","OBBContainer","getResponseHandler","oAllProm","postMessageToIframeAppAccordingToPolicy","oPolicy","isAppTypeSupportedByPolicy","setBackNavigationChanged","isBackNavigationChangedValue","getBackNavigationChanged","parseStatefulContainerConfiguration","sUrl","sKey","_getBlueBoxCacheKey","keys","map","filter"],"sources":["AppLifeCycle-dbg.js"],"mappings":"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"}