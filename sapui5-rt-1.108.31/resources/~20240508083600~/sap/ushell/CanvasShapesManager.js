// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/ui/core/theming/Parameters"],function(t,e){"use strict";var n=function(t,e){this.x=t||0;this.y=e||0};n.prototype.getDistance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.floor(Math.sqrt(e*e+n*n))};n.prototype.getSegment=function(t){if(this.x<=t.x&&this.y<=t.y){return 1}if(this.x<=t.x&&this.y>=t.y){return 2}if(this.x>=t.x&&this.y>=t.y){return 3}if(this.x>=t.x&&this.y<=t.y){return 4}};n.prototype.offset=function(t,e){this.x=this.x+t;this.y=this.y+e};var i=function(t,e,n,i){this.x={min:t,max:e};this.y={min:n,max:i}};var r=window.innerWidth>0?window.innerWidth:screen.width,o=window.innerHeight>0?window.innerHeight:screen.height,s={cpr1:new i(0,r/4,0,o/4),cpr2:new i(r/2,r,0,o/4),cpr3:new i(r/4,3*r/4,o*3/4,o)},a=function(){this.init()};a.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var e={cpr1:s.cpr1,cpr2:s.cpr2,cpr3:s.cpr3},n,i,r,o,a;this.shapes=[];this.bIsDirty=true;for(a in e){n=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;i=this.getRandomPoint(e[a]);r=this._getSquarePoints(n,i);o=this._calculatebezierCurves(n,r);this.shapes.push({bezierCurves:o,centerPoint:i})}for(var h in this.shapes){var u=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge0.edgeNum,u.edge0.xOffSet,u.edge0.yOffSet,u.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],u.edge1.edgeNum,u.edge1.xOffSet,u.edge1.yOffSet,u.edge1.xStretch)}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));t.resize.attachHandler(this.resizeHandler,this)},_generateRandomAmorphousShapeValues:function(){var t={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var e=this._getRandomInt(0,3);for(var n in t){t[n].edgeNum=e;t[n].xOffSet=this._getRandomInt(200,400);t[n].yOffSet=this._getRandomInt(-200,-400);e+=this._getRandomInt(0,1)<.5?-1:1;if(e===-1){e=3}if(e===4){e=0}}e=this._getRandomInt(0,1);if(e<.5){e=e<.25?0:1;t["edge"+e].xStretch=this._getRandomInt(0,200)}return t},getPoint:function(t,e){return new n(t,e)},getRandomPoint:function(t){var e=Math.floor(Math.random()*(t.x.max-t.x.min)+t.x.min),i=Math.floor(Math.random()*(t.y.max-t.y.min)+t.y.min);return new n(e,i)},onThemeChanged:function(){var t=e.get("sapUiShellBackgroundPatternColor");if(t&&t!=="transparent"){this.sShapesColor=t;this.bIsDirty=true;this.drawShapes()}},resizeHandler:function(){var t=document.getElementById(this.Id);if(t){t.width=window.innerWidth;t.height=window.innerHeight;this.bIsDirty=true;this.onThemeChanged()}},enableAnimationDrawing:function(t){this._enableDrawing=t},makeAmorphousShape:function(t,e,n,i){var r,o,s;switch(e){case 0:r=t.bezierCurves[0].controlPoint1;o=t.bezierCurves[3].controlPoint2;s=this._rotatePoints(n,i,r,o);t.bezierCurves[0].controlPoint1=s[0];t.bezierCurves[3].controlPoint2=s[1];break;case 1:r=t.bezierCurves[0].controlPoint2;o=t.bezierCurves[1].controlPoint1;s=this._rotatePoints(n,i,r,o);t.bezierCurves[0].controlPoint2=s[0];t.bezierCurves[1].controlPoint1=s[1];break;case 2:r=t.bezierCurves[1].controlPoint2;o=t.bezierCurves[2].controlPoint1;s=this._rotatePoints(n,i,r,o);t.bezierCurves[1].controlPoint2=s[0];t.bezierCurves[2].controlPoint1=s[1];break;case 3:r=t.bezierCurves[2].controlPoint2;o=t.bezierCurves[3].controlPoint1;s=this._rotatePoints(n,i,r,o);t.bezierCurves[2].controlPoint2=s[0];t.bezierCurves[3].controlPoint1=s[1];break}return t},_rotatePoints:function(t,e,i,r){var o,s,a=[];o=i.x+t;s=i.y+e;a.push(new n(o,s));o=r.x-t;s=r.y-e;a.push(new n(o,s));return a},_getSquarePoints:function(t,e){var i=[];i[0]=new n(e.x+t,e.y);i[1]=new n(e.x,e.y-t);i[2]=new n(e.x-t,e.y);i[3]=new n(e.x,e.y+t);return i},_getRandomInt:function(t,e){if(t==0&&e==1){return Math.random()}return Math.floor(Math.random()*(e-t+1))+t},_calculatebezierCurves:function(t,e){var i=[],r,o,s,a;a=e[0];s=e[1];r=new n(a.x,a.y-t/2);o=new n(a.x-t/2,a.y-t);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=e[1];s=e[2];r=new n(a.x-t/2,a.y);o=new n(a.x-t,a.y+t/2);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=e[2];s=e[3];r=new n(a.x,a.y+t/2);o=new n(a.x+t/2,a.y+t);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});a=e[3];s=e[0];r=new n(a.x+t/2,a.y);o=new n(a.x+t,a.y-t/2);i.push({startPoint:a,endPoint:s,controlPoint1:r,controlPoint2:o});return i},drawShapes:function(){var t=document.getElementById(this.Id);if(this.bIsDirty&&t&&t.getContext){var n=t.getContext("2d"),i,s,a,h;n.clearRect(0,0,r*2,o*2);if(!this.sShapesColor){this.sShapesColor=e.get("sapUiShellBackgroundPatternColor")}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var u=0;u<this.shapes.length;u++){n.beginPath();i=this.shapes[u].bezierCurves[0].startPoint;n.moveTo(i.x,i.y);for(var c=0;c<this.shapes[u].bezierCurves.length;c++){s=this.shapes[u].bezierCurves[c].endPoint;a=this.shapes[u].bezierCurves[c].controlPoint1;h=this.shapes[u].bezierCurves[c].controlPoint2;n.bezierCurveTo(Math.floor(a.x),Math.floor(a.y),Math.floor(h.x),Math.floor(h.y),Math.floor(s.x),Math.floor(s.y))}n.closePath();n.fillStyle=this.sShapesColor;n.fill()}}this.bIsDirty=false}}};var h=new a;return h},false);
//# sourceMappingURL=CanvasShapesManager.js.map