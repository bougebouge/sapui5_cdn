/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/controller/Pivot.controller",["sap/m/MessageBox","sap/sac/df/utils/ResourceBundle","sap/ui/core/mvc/Controller","sap/sac/df/utils/ErrorHandler","sap/sac/df/types/NavigationCommandType","sap/sac/df/types/DimensionType","sap/sac/df/types/CellValueType","sap/sac/grid/CellType","sap/sac/df/types/Axis"],function(e,t,a,i,o,r,n,s,l){"use strict";a.extend("sap.sac.df.controller.Pivot",{onAfterRendering:function(){var e=this;var t=e.getView();t.getModel("om").attachRequestSent(function(t){if(e.getPivot().getDataProviderName()===t.getParameter("infoObject")){e.getPivot().getEasyGrid().setBusyIndicatorDelay(0);e.getPivot().getEasyGrid().setBusy(true)}});t.getModel("om").attachRequestCompleted(function(){var t=e.getPivot().getEasyGrid();t.setBusy(false)});t.getModel("om").attachRequestFailed(function(){var t=e.getPivot().getEasyGrid();t.setBusy(false)})},requestRows:function(e){var t=this;var a=t.getView().getModel("om");var i=a.getDataProvider(t.getPivot().getDataProviderName());var r=e.getParameter("currentRow");if(i&&r!==i.virtualOffsetRow){t.getPivot().fireNavigationCmd({navigationCmdType:o.RowRequest,cmd:function(){t.getPivot().getEasyGrid().setBusy(false);return i.setOffsetRow(r).synchronize(true)}})}},onExit:function(){var e=this;e.getView().removeAllDependents()},requestColumns:function(e){var t=this;var a=t.getView().getModel("om");var i=a.getDataProvider(t.getPivot().getDataProviderName());var o=e.getParameter("currentColumn");t.getPivot().fireNavigationCmd({navigationCmdType:sap.sac.df.NavigationCmdType.ColumnRequest,cmd:function(){t.getPivot().getEasyGrid().setBusy(false);return i.setOffsetCol(o).synchronize(true)}})},onDrill:function(e){var t=e.getParameter("cell");var a=e.getParameter("keepOffset");var i=this.getView().getModel("om").getDataProvider(this.getPivot().getDataProviderName());function r(){return Promise.resolve(null).then(function(){return i.drill(t.data("cellDimension"),t.data("tupleIndex"),a)})}this.getPivot().fireNavigationCmd({navigationCmdType:o.HierarchyNavigation,cmd:r,cell:t})},onRightClick:function(t){var a=this;var i=t.getParameter("cell");var r=i.data("cellDimension");var n=a.getView();var g=n.getModel("om");var d=t.getParameter("link");var v=g.getDataProvider(a.getPivot().getDataProviderName()).Dimensions[r];var c=null;if(v){if(v.Axis===l.Rows){c=g.getDataProvider(a.getPivot().getDataProviderName()).getRowSelection(i.data("tupleIndex"))}else if(v.Axis===l.Columns){c=g.getDataProvider(a.getPivot().getDataProviderName()).getColumnSelection(i.data("tupleIndex"))}}else if(i.getCellType()===s.STANDARD||i.getCellType()===s.RESULT){c=g.getDataProvider(a.getPivot().getDataProviderName()).getSelection(i.data("dataRow"),i.data("dataColumn"))}function u(){e.information("Implement your own Context menu handling")}a.getPivot().fireNavigationCmd({cmd:u,anchor:d,cell:i,selection:c,navigationCmdType:o.CellClick})}});return sap.sac.df.controller.Pivot});
//# sourceMappingURL=Pivot.controller.js.map