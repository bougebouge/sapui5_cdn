/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/olap/OlapListBinding",["sap/base/Log","jquery.sap.global","sap/ui/model/ChangeReason","sap/ui/model/ListBinding","sap/sac/df/olap/calculateId","sap/sac/df/thirdparty/lodash"],function(t,jQuery,n,e,r,i){"use strict";var a=e.extend("sap.sac.df.olap.OlapListBinding",{constructor:function(a,o,u,s,l,c){var p=this;var f=null;var d=[];var g=null;p.oContext=u;var h=null;var v=null;var C=null;var y=null;var x=null;e.apply(p,[a,o,p.oContext,s,l,c]);function w(n,e){var r=n;var u=e;if(!r){r=0}if(!u){u=f}var s=Math.min(r+u,d.length);var l=a.resolve(o,p.oContext);if(l&&!l.endsWith("/")){l+="/"}return i.map(i.range(r,s),function(n){try{return a.getContext(l+d[n])}catch(n){t.error(n)}})}p.setContext=function(t){if(p.oContext!==t){p.oContext=t;if(p.isRelative()){p.update();p._fireChange({reason:n.Context})}}};p.getLength=function(){return f};function L(){return d.length}p.updateIndices=function(){d=i.map(g,function(t,n){return n})};p.sort=function(){throw new Error("OlapListBinding does not support client side sort")};p.applySort=function(){throw new Error("OlapListBinding does not support client side sort")};p.filter=function(){throw new Error("OlapListBinding does not support client side filter")};p.applyFilter=function(){throw new Error("OlapListBinding does not support client side filter")};p.getDistinctValues=function(t){var n={};return i.reduce(g,function(e,r){var i=a.getProperty(t,r);if(!n[i]){n[i]=true;e.push(i)}return e},[])};p.getId=i.constant(r());p.getContexts=function(n,e){var r=e;var a=n;h=a;C=r;if(!a){a=0}if(!r){r=f}var o=w(a,r);var u=null;try{u=i.map(o,function(n){try{return p.getContextData(n)}catch(n){t.error(n)}});if(y&&a<v){delete o.diff}v=a+r;x=o.slice(0);y=u.slice(0)}catch(n){t.warning("OlapListBinding: Cyclic dependency");t.error(n);throw new Error("Cyclic dependeny")}return o};p.getCurrentContexts=function(){return x||[]};p.updateIndices=function(){d=i.map(g,function(t,n){return n})};p.update=function(){var t=a.getProperty(o,p.oContext);if(t){g=jQuery.extend(true,Array.isArray(t)?[]:{},t);p.updateIndices();f=L()}else{g=[];d=[];f=0}};p.checkUpdate=function(t){var e=null;if(p.bSuspended&&!p.bIgnoreSuspend&&!t){return}var r=false;e=a.getProperty(p.sPath,p.oContext);if(!(e&&e.length===0&&!g)&&(e&&(!g||g.length!==e.length))){r=true}if(!jQuery.sap.equal(g,e)){p.update()}var o=w(h,C);if(x){r=x.length!==o.length?true:i.some(y,function(t,n){return p.getContextData(o[n])!==t})}else{r=o&&o.length}if(r||t){p._fireChange({reason:n.Change})}};e.apply(p,arguments)}});return a});
//# sourceMappingURL=OlapListBinding.js.map