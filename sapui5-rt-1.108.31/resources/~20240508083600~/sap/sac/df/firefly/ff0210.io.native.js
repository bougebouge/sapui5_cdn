function _typeof(e){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)
/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */}sap.ui.define(["sap/sac/df/firefly/ff0200.io"],function(e){"use strict";if(typeof $!=="undefined"&&$.db&&$.db.ina&&$.trace){var t=t||{};t.XMLHttpRequest=function(){this.headers={}};t.XMLHttpRequest.clients={default:new $.net.http.Client};t.XMLHttpRequest.prototype.open=function(e,t,r){$.trace.debug("Creating request with method="+e+", url="+t+", async="+r);this.url=t;if(e==="GET"){this.request=new $.net.http.Request($.net.http.GET,t)}else if(e==="POST"){this.request=new $.net.http.Request($.net.http.POST,t)}else if(e==="PUT"){this.request=new $.net.http.Request($.net.http.PUT,t)}if(this.request===undefined){throw new Error("Illegal State: Couldn't create XS-request for method "+e)}};t.XMLHttpRequest.prototype.send=function(r){var i="";var n=this.request.headers;var o=$.trace.debug;var s="default";for(var a in this.headers){if(this.headers.hasOwnProperty(a)){n.set(a,this.headers[a]);i+=a+"="+this.headers[a]+"\r\n";if(a===e.HttpConstants.HD_AUTHORIZATION){s=this.headers[a];if(!t.XMLHttpRequest.clients.hasOwnProperty(s)){t.XMLHttpRequest.clients[s]=new $.net.http.Client}}}}o("Request to send, client key:\n"+s);var p=t.XMLHttpRequest.clients[s];o("Request to send, headers:\n"+i);o("Request to send, body:\n"+r);if(r!==null){this.request.setBody(r)}var l=this.sendInternal(p,s);if(l){delete t.XMLHttpRequest.clients[s];p=new $.net.http.Client;t.XMLHttpRequest.clients[s]=p;l=this.sendInternal(p,s);if(l){throw l}}this.readyState=4;if(!this.response.body){this.responseText=""}else{this.responseText=this.response.body.asString()}this.headers={};o("Received response, header:\n"+this.getAllResponseHeaders());o("Received response, body:\n"+this.responseText)};t.XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.headers[e]=t;$.trace.debug("Added field to the header "+e+"="+t+", size="+this.headers.length)};t.XMLHttpRequest.prototype.getAllResponseHeaders=function(){var e="";var t=this.response.headers;var r=t.length;for(var i=0;i<r;++i){var n=t[i];e+=n.name+": "+n.value+"\r\n"}return e};t.XMLHttpRequest.prototype.sendInternal=function(e,t){try{e.request(this.request,this.url);this.response=e.getResponse();this.status=this.response.status;this.statusText="";return null}catch(e){$.trace.debug("Request failed. Remove client "+t+" Exception:"+e);return e}}}e.NodeJsXMLHttpRequest=function(){this.readyState=e.NodeJsXMLHttpRequest.UNSENT;this.m_headers={};this.m_options={};this.m_sendFlag=false;this.m_method=null;this.m_url=null;this.m_async=null;this.status=null;this.statusText=null;this.response=null;this.responseText="";this.onreadystatechange=null;this.m_cookies=null};e.NodeJsXMLHttpRequest.prototype=new e.XObject;e.NodeJsXMLHttpRequest.UNSENT=0;e.NodeJsXMLHttpRequest.OPENED=1;e.NodeJsXMLHttpRequest.HEADERS_RECEIVED=2;e.NodeJsXMLHttpRequest.DONE=4;e.NodeJsXMLHttpRequest.prototype.getResponseHeader=function(t){if(typeof t==="string"&&this.readyState>e.NodeJsXMLHttpRequest.OPENED&&this.response&&this.response.headers){return this.response.headers[t.toLowerCase()]}return null};e.NodeJsXMLHttpRequest.prototype.getAllResponseHeaders=function(){if(this.readyState<e.NodeJsXMLHttpRequest.HEADERS_RECEIVED){return""}var t="";var r=this.response.headers;for(var i in r){if(r.hasOwnProperty(i)){var n=i.toLowerCase();t+=n+": "+r[n]+"\r\n"}}return t.substr(0,t.length-2)};e.NodeJsXMLHttpRequest.prototype.isHttpsProtocol=function(e){var t=require("url").parse(e.toString());var r=t.protocol.toLowerCase();return r==="https:"};e.NodeJsXMLHttpRequest.prototype.setCookies=function(e){this.m_cookies=e};e.NodeJsXMLHttpRequest.prototype.setRequestHeader=function(t,r){var i=t.toLowerCase();if(i!=="cookie"){if(this.readyState!==e.NodeJsXMLHttpRequest.OPENED){throw new Error("Request is not in OPEN state")}if(this.m_sendFlag){throw new Error("Request has been already sent")}this.m_headers[i]=this.m_headers[i]?this.m_headers[i]+", "+r:r}else{this.m_headers[i]=this.m_headers[i]?this.m_headers[i]+", "+r:r}};e.NodeJsXMLHttpRequest.prototype.open=function(t,r,i){var n=t.toUpperCase();if(n!=="POST"&&n!=="GET"&&n!=="PUT"){throw new Error("Request method is not supported")}this.m_async=i;this.m_headers={};this.m_method=n;this.m_url=r;this.m_sendFlag=false;this.readyState=e.NodeJsXMLHttpRequest.OPENED;this.status=0;this.statusText=""};e.NodeJsXMLHttpRequest.prototype.send=function(t){if(this.readyState!==e.NodeJsXMLHttpRequest.OPENED){throw new Error("Request is not in OPEN state")}if(this.m_sendFlag){throw new Error("Request has been already sent")}if(this.m_method==="GET"){t=null}else if(t){this.setRequestHeader("Content-Length",Buffer.isBuffer(t)?t.length:Buffer.byteLength(t))}else if(this.m_method==="POST"){this.setRequestHeader("Content-Length",0)}var r=require("url").parse(this.m_url);var i=r.port||(this.isHttpsProtocol(this.m_url)?443:80);var n;var o;switch(r.protocol){case"https:":case"http:":n=r.host;o=r.hostname;break;default:throw new Error("Protocol not supported")}this.setRequestHeader("Host",n);this.setRequestHeader("User-Agent",process.release.name+"/"+process.version+"("+process.platform+")");if(this.m_cookies!==null){var s=this.m_cookies.getCookies();if(s.size()!==0){var a="";for(var p=0;p<s.size();p++){a+=s.get(p).getName()+"="+s.get(p).getValue()+"; "}this.setRequestHeader("Cookie",a.substring(0,a.length-2))}}this.m_options={host:n,port:i,path:r.path,hostname:o,protocol:r.protocol,method:this.m_method,headers:this.m_headers};var l=false;if(l){var u="127.0.0.1";var c=8888;this.m_options.host=u;this.m_options.port=c;this.m_options.path=this.m_url;delete this.m_options.hostname}var v=function(t){var r=JSON.parse(t);this.response=r.data;this.status=r.data.statusCode;this.statusText=r.data.statusMessage;this.responseText=r.data.text;this.readyState=e.NodeJsXMLHttpRequest.DONE;if(this.m_async){this.handleEvent("readystatechange")}}.bind(this);var h=function(t){this.response=t;this.status=0;this.statusText="";this.responseText="";this.readyState=e.NodeJsXMLHttpRequest.DONE}.bind(this);var d=function(t){this.response=null;this.status=t.code;this.statusText=t.message;this.responseText=t.message;this.readyState=e.NodeJsXMLHttpRequest.DONE}.bind(this);var f="UTF-8";if(this.m_async){this.m_sendFlag=true;var y="";var m=require("http"+(this.isHttpsProtocol(this.m_url)?"s":"")).request;var S=function(e){e.setEncoding(f);e.on("data",function(e){y+=e});e.on("end",function(){v(JSON.stringify({error:null,data:{statusCode:e.statusCode,statusMessage:e.statusMessage,headers:e.headers,text:y}}))});e.on("error",function(e){h(e)})}.bind(this);var g=m(this.m_options,S);g.on("error",function(e){d(e)});if(t!==null){g.write(t)}g.end()}else{var N=require("fs");var _=".nodeHttpSync_"+process.pid;N.writeFileSync(_,"",f);var R='var request = require("http'+(this.isHttpsProtocol(this.m_url)?"s":"")+'").request;'+'var responseText = "";'+"var processResponse = function(response) {"+'response.setEncoding("'+f+'");'+'response.on("data", function(data) {'+"responseText += data;"+"});"+'response.on("end", function() {'+'fs.writeFileSync("'+_+'", '+'JSON.stringify({"error": null, "data": {"statusCode": '+"response.statusCode"+', "statusMessage": '+"response.statusMessage"+', "headers": '+"response.headers"+', "text": '+"responseText"+"}})"+', "'+f+'");'+"});"+'response.on("error", function(error) {'+'fs.writeFileSync("'+_+'", '+'JSON.stringify({"error": '+"error"+"})"+', "'+f+'");'+"});"+"};"+"var requestPerformer = request("+JSON.stringify(this.m_options)+", processResponse);"+'requestPerformer.on("error", function(error) {'+'fs.writeFileSync("'+_+'", '+'JSON.stringify({"error": '+"error"+"})"+', "'+f+'");'+"});"+(t?"requestPerformer.write("+JSON.stringify(t)+");":"")+"requestPerformer.end();";var q=require("child_process").spawnSync;q(process.argv[0],["-e",R]);var H=N.readFileSync(_,f);N.unlinkSync(_);var C=JSON.parse(H).error;if(C){h(C)}else{v(H)}}};e.NodeJsXMLHttpRequest.prototype.abort=function(){};e.NodeJsXMLHttpRequest.prototype.handleEvent=function(e){if(typeof this["on"+e]==="function"){this["on"+e]()}};e.NativeXFileSystem=function(){e.DfXFileSystemOS.call(this);this._ff_c="NativeXFileSystem"};e.NativeXFileSystem.prototype=new e.DfXFileSystemOS;e.NativeXFileSystem.create=function(t){var r=new e.NativeXFileSystem;r.setupSessionContext(t);return r};e.NativeXFileSystem.staticSetup=function(){if(e.XSystemUtils.isNode()){e.DfXFileSystemOS.setNativeSlash(require("path").sep)}};e.NativeXFileSystem.prototype.getRoots=function(){var t=new e.XListOfString;var r=/^win/.test(process.platform);if(r){t.add("C:\\")}else{t.add("/")}return t};e.NativeXFileSystem.prototype.getChildren=function(t){var r=require("path").normalize(t);if(e.XStringUtils.isNullOrEmpty(r)){return this.getRoots()}var i=new e.XListOfString;try{var n=require("fs").readdirSync(r);for(var o in n){if(n.hasOwnProperty(o)){var s=r+e.XUri.PATH_SEPARATOR_NATIVE_FS+n[o];i.add(s)}}}catch(e){}return i};e.NativeXFileSystem.prototype.isDirectory=function(e){try{var t=require("fs").statSync(require("path").normalize(e));return t.isDirectory()}catch(e){return false}};e.NativeXFileSystem.prototype.isFile=function(e){try{var t=require("fs").statSync(require("path").normalize(e));return t.isFile()}catch(e){return false}};e.NativeXFileSystem.prototype.isExisting=function(e){var t=require("path").normalize(e);return this.isDirectory(t)||this.isFile(t)};e.NativeXFileSystem.prototype.loadInternal=function(t,r){try{var i=require("fs").readFileSync(require("path").normalize(t));var n=new e.XByteArray(i)}catch(e){r.addError(0,e)}return n};e.NativeXFileSystem.prototype.load=function(t){var r=e.MessageManagerSimple.createMessageManager();var i=this.loadInternal(t,r);return e.ExtResult.create(i,r)};e.NativeXFileSystem.prototype.loadExt=function(t){var r=e.MessageManagerSimple.createMessageManager();var i=this.loadInternal(t,r);var n=e.XFileContent.createFileContent();n.setMessageCollection(r);n.setContentTypeAutodetect(e.ContentType.BINARY,t,false);n.setByteArray(i);return n};e.NativeXFileSystem.prototype.loadGzipped=function(t){var r=e.MessageManagerSimple.createMessageManager();var i=require("path").normalize(t);var n=[];try{n=require("fs").readFileSync(i);n=require("zlib").gunzipSync(n)}catch(e){r.addError(0,e)}var o=e.XFileContent.createFileContent();o.setMessageCollection(r);o.setContentTypeAutodetect(e.ContentType.BINARY,i,true);o.setByteArray(new e.XByteArray(n));return o};e.NativeXFileSystem.prototype.saveGzipped=function(t,r){var i=e.MessageManagerSimple.createMessageManager();try{var n=require("path").normalize(t);var o=require("zlib").gzipSync(r.getNative());require("fs").writeFileSync(n,o)}catch(e){i.addError(0,e)}return i};e.NativeXFileSystem.prototype.save=function(t,r){var i=e.MessageManagerSimple.createMessageManager();var n=r.getNative();try{var o=require("path").normalize(t);require("fs").writeFileSync(o,n)}catch(e){i.addError(0,e)}return i};e.NativeXFileSystem.prototype.mkdirs=function(e){try{var t=require("path").normalize(e);t.split(require("path").sep).reduce(function(e,t){e+=t+require("path").sep;if(!require("fs").existsSync(e)){require("fs").mkdirSync(e)}return e},"")}catch(e){}};e.NativeXFileSystem.prototype.mkdir=function(e){try{var t=require("path").normalize(e);require("fs").mkdirSync(t)}catch(e){}};e.NativeXFileSystem.prototype.getLastModifiedTimestamp=function(e){try{var t=require("path").normalize(e);return require("fs").statSync(t).mtime}catch(e){return 0}};e.NativeXFileSystem.prototype.renameTo=function(e,t){try{var r=require("path").normalize(e);var i=require("path").normalize(t);require("fs").renameSync(r,i)}catch(e){}};e.NativeXFileSystem.prototype.deleteFile=function(e){try{var t=require("path").normalize(e);if(this.isDirectory(t)){require("fs").rmdirSync(t)}else{require("fs").unlinkSync(t)}}catch(e){}};e.NativeXFileSystemOSFactory=function(){e.XFileSystemOSFactory.call(this);this._ff_c="NativeXFileSystemOSFactory"};e.NativeXFileSystemOSFactory.prototype=new e.XFileSystemOSFactory;e.NativeXFileSystemOSFactory.staticSetup=function(){if(e.XSystemUtils.isNode()){e.XFileSystemOSFactory.registerFactory(e.ProtocolType.FILE,new e.NativeXFileSystemOSFactory)}};e.NativeXFileSystemOSFactory.prototype.newFileSystem=function(t){return new e.NativeXFileSystem.create(t)};e.NativeDispatcher=function(){e.DfDispatcher.call(this);this._ff_c="NativeDispatcher"};e.NativeDispatcher.prototype=new e.DfDispatcher;e.NativeDispatcher.staticSetup=function(){e.Dispatcher.replaceInstance(new e.NativeDispatcher)};e.NativeDispatcher.prototype.registerInterval=function(t,r,i){var n=new e.JsTimerHandle(t,r,i,true);n.jsHandle=setInterval(function(){n.execute()},t);return n};e.NativeDispatcher.prototype.unregisterInterval=function(e){clearInterval(e.jsHandle)};e.NativeDispatcher.prototype.registerTimer=function(t,r,i){var n=new e.JsTimerHandle(t,r,i,false);n.jsHandle=setTimeout(function(){n.execute()},t);return n};e.NativeDispatcher.prototype.unregisterTimer=function(e){clearTimeout(e.jsHandle)};e.NativeDispatcher.prototype.getProcessingTimeReceiverCount=function(){return-1};e.NativeDispatcher.prototype.registerProcessingTimeReceiver=function(e){return};e.NativeDispatcher.prototype.unregisterProcessingTimeReceiver=function(e){return};e.NativeDispatcher.prototype.shutdown=function(){return};e.NativeDispatcher.prototype.process=function(){return};e.NativeDispatcher.prototype.getSyncState=function(){return e.SyncState.IN_SYNC};e.JsTimerHandle=function(t,r,i,n){e.TimerItem.call(this);e.TimerItem.prototype.setupExt.call(this,t,r,i,n);this._ff_c="JsTimerHandle"};e.JsTimerHandle.prototype=new e.TimerItem;e.NativeGoogleHttpRequest=function(){this.m_options={headers:{},followRedirects:false};this.m_url=null;this.m_response=null;this.onreadystatechange=null;this.readyState=e.NativeGoogleHttpRequest.UNSENT;this.status=0;this.statusText=null;this.responseText=null;this._ff_c="NativeGoogleHttpRequest"};e.NativeGoogleHttpRequest.prototype=new e.XObject;e.NativeGoogleHttpRequest.UNSENT=0;e.NativeGoogleHttpRequest.OPENED=1;e.NativeGoogleHttpRequest.DONE=4;e.NativeGoogleHttpRequest.prototype.releaseObject=function(){this.m_url=null;this.m_response=e.XObjectExt.release(this.m_response);this.onreadystatechange=null;this.statusText=null;this.responseText=null;e.XObject.prototype.releaseObject.call(this)};e.NativeGoogleHttpRequest.prototype.setCookies=function(e){var t=e.getCookies();if(t.size()>0){var r="";for(var i=0;i<t.size();i++){var n=t.get(i);r+=n.getName()+"="+n.getValue()+"; "}this.m_options.headers["Cookie"]=r.substring(0,r.length-2)}};e.NativeGoogleHttpRequest.prototype.open=function(t,r,i){this.m_options["method"]=t.toLowerCase();this.m_url=r;this.readyState=e.NativeGoogleHttpRequest.OPENED;this.status=0;this.statusText=null;this.responseText=null};e.NativeGoogleHttpRequest.prototype.setRequestHeader=function(e,t){this.m_options.headers[e]=t};e.NativeGoogleHttpRequest.prototype.send=function(t){if(t){this.m_options["payload"]=t}this.m_response=e.GoogleUrlFetchApp.fetch(this.m_url,this.m_options);this.readyState=e.NativeGoogleHttpRequest.DONE;this.status=this.m_response.getResponseCode();this.responseText=this.m_response.getContentText();this.onreadystatechange()};e.NativeGoogleHttpRequest.prototype.getResponseHeader=function(e){var t=this.getAllResponseHeaders();return t?t[e]:null};e.NativeGoogleHttpRequest.prototype.getAllResponseHeaders=function(){if(this.m_response){return this.m_response.getAllHeaders()}return null};e.NativeHttpClient=function(t){e.DfHttpClient.call(this);this.m_xmlHttpRequest=null;this.m_isOnAjaxEventExecuted=false;e.DfHttpClient.prototype.setupHttpClient.call(this,t);this._ff_c="NativeHttpClient"};e.NativeHttpClient.prototype=new e.DfHttpClient;e.NativeHttpClient.parseResponseHeaders=function(t,r){if(t!==null){if(e.XSystemUtils.isGoogleAppsScript()){for(var i in t){if(i!==e.HttpConstants.HD_SET_COOKIE){r.put(i,t[i])}}}else{var n=t.split("\r\n");var o=n.length;var s=e.HttpConstants;for(var a=0;a<o;a++){var p=n[a];var l=p.indexOf(": ");if(l>0){var u=p.substring(0,l).replace(/(^\u000d\u000a?)|(^\u000a?)/,"");var c=p.substring(l+2);r.put(s.lookupCamelCase(u),c)}}}}};e.NativeHttpClient.prototype.abort=function(){this.m_xmlHttpRequest.abort()};e.NativeHttpClient.prototype.releaseObject=function(){this.m_xmlHttpRequest=null;this.m_response=e.XObjectExt.release(this.m_response);this.m_isOnAjaxEventExecuted=null;e.DfHttpClient.prototype.releaseObject.call(this)};e.NativeHttpClient.prototype.onAjaxEvent=function(){var t=this.m_xmlHttpRequest;if(t!==null&&t.readyState===4){this.addProfileStep("Receive http response");this.m_response=e.HttpResponse.createResponse(this.getRequest());this.m_isOnAjaxEventExecuted=true;if(e.XSystemUtils.isNode()||e.XSystemUtils.isGoogleAppsScript()){var r=e.HttpCookies.create();var i=t.getResponseHeader(e.HttpConstants.HD_SET_COOKIE);for(var n in i){if(i.hasOwnProperty(n)){r.addByHttpServerResponseValue(i[n])}}this.m_response.setCookies(r);this.m_response.setCookiesMasterStore(this.getRequest().getCookiesMasterStore());this.m_response.applyCookiesToMasterStorage()}this.m_response.setStatusCode(t.status);this.m_response.setStatusCodeDetails(t.statusText);var o=t.getAllResponseHeaders();var s=this.m_response.getHeaderFieldsBase();e.NativeHttpClient.parseResponseHeaders(o,s);var a=s.getByKey(e.HttpConstants.HD_CONTENT_TYPE);if(a!==null){a=a.toLowerCase();var p=a.indexOf(";");if(p!==-1){a=a.substring(0,p)}}var l=e.ContentType.lookup(a);if(l===null){this.m_response.setContentTypeValue(a)}else{this.m_response.setContentType(l);if(l.isText()){var u=t.responseText;this.m_response.setString(u);if(l===e.ContentType.APPLICATION_JSON){if(u!==null&&u.length>0){try{this.addProfileStep("Parse json");var c=JSON.parse(u);var v=new e.NativeJsonProxyElement(c);this.m_response.setJsonObject(v)}catch(t){this.addError(e.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.message)}}}}}if(t.status===0){this.addError(e.ErrorCodes.HOST_UNREACHABLE,"Destination host is unreachable!")}this.setData(this.m_response);this.endSync();this.m_xmlHttpRequest=null}};e.NativeHttpClient.prototype.processSynchronization=function(r){var i=e.HttpConstants;var n=e.HttpRequestMethod;var o=this.prepareRequest();var s=o.getUriStringWithoutAuthentication();this.m_xmlHttpRequest=null;if(e.XSystemUtils.isXS()){this.m_xmlHttpRequest=new t.XMLHttpRequest}else if(e.XSystemUtils.isNode()){this.m_xmlHttpRequest=new e.NodeJsXMLHttpRequest;var a;if(typeof window!=="undefined"&&window&&window.options&&window.options.isMobile&&e.userSession){a=e.HttpCookies.create();a.addByHttpClientRequestValue(e.userSession.cookies)}else{a=this.getRequest().getCookies()}this.m_xmlHttpRequest.setCookies(a)}else if(e.XSystemUtils.isGoogleAppsScript()){this.m_xmlHttpRequest=new e.NativeGoogleHttpRequest;this.m_xmlHttpRequest.setCookies(this.getRequest().getCookies())}else if(e.XSystemUtils.isBrowser()&&o.isLogoff()&&typeof navigator.sendBeacon!=="undefined"){navigator.sendBeacon(s);return true}else{this.m_xmlHttpRequest=new XMLHttpRequest}if(this.m_xmlHttpRequest!==null){var p=this.m_xmlHttpRequest;var l=r===e.SyncType.NON_BLOCKING;var u=o.getMethod();p.open(u.getName(),s,l);if(u===n.HTTP_POST||u===n.HTTP_PUT){var c=o.getContentType().getName()+";charset=UTF-8";p.setRequestHeader(i.HD_CONTENT_TYPE,c)}p.setRequestHeader(i.HD_ACCEPT,o.getAcceptContentType().getName());var v=o.getAuthenticationType();if(v===e.AuthenticationType.BASIC){var h=o.getUser()+":"+o.getPassword();var d=i.VA_AUTHORIZATION_BASIC+" "+e.Base64.encode(h);p.setRequestHeader(i.HD_AUTHORIZATION,d);if(o.isXAuthorizationRequired()){p.setRequestHeader(i.HD_X_AUTHORIZATION,d)}}else if(v===e.AuthenticationType.BEARER){var f=o.getAccessToken();if(f===null){f=o.getAuthenticationToken().getAccessToken()}if(f!==null){p.setRequestHeader(i.HD_AUTHORIZATION,i.VA_AUTHORIZATION_BEARER+" "+f)}}else if(v===e.AuthenticationType.SCP_OPEN_CONNECTORS){var y=o.getUser();var m=o.getOrganization();var S=o.getElement();var g=e.XStringBuffer.create();g.append(i.HD_USER).append(" ").append(y);g.append(", ");g.append(i.HD_ORGANIZATION).append(" ").append(m);g.append(", ");g.append(i.HD_ELEMENT).append(" ").append(S);p.setRequestHeader(i.HD_AUTHORIZATION,g.toString())}var N=o.getLanguage();if(N&&N.length>0){p.setRequestHeader(i.HD_ACCEPT_LANGUAGE,N)}var _=o.getHeaderFields();var R=_.getKeysAsIteratorOfString();while(R.hasNext()){var q=R.next();p.setRequestHeader(q,_.getByKey(q))}p.onreadystatechange=this.onAjaxEvent.bind(this);if(this._sendInternal(o)===false){return false}if(!l){if(!this.m_isOnAjaxEventExecuted){this.onAjaxEvent();this.m_xmlHttpRequest=null}}return true}this.addError(e.HttpErrorCode.HTTP_MISSING_NATIVE_DRIVER,"XMLHttpRequest not supported");return false};e.NativeHttpClient.prototype._sendInternal=function(t){var r=e.HttpRequestMethod;try{this.m_isOnAjaxEventExecuted=false;this.addProfileStep("### SERVER ###");if(t.isCorsSecured()){this.m_xmlHttpRequest.withCredentials=true}if(t.getMethod()===r.HTTP_POST||t.getMethod()===r.HTTP_PUT){this.m_xmlHttpRequest.send(t.getString())}else{this.m_xmlHttpRequest.send(null)}return true}catch(t){this.addError(e.HttpErrorCode.HTTP_IO_EXCEPTION,t.message);return false}};e.NativeHttpWebWorkerClient=function(t){e.DfHttpClient.call(this);this.m_xmlHttpRequest=null;this.m_isOnAjaxEventExecuted=false;e.DfHttpClient.prototype.setupHttpClient.call(this,t);this._ff_c="NativeHttpWebWorkerClient";this._ffWebWorker=null;e.NativeHttpWebWorkerClient.setupWebworker.call(this,t)};e.NativeHttpWebWorkerClient.prototype=new e.DfHttpClient;e.NativeHttpWebWorkerClient.setupWebworker=function(t){var r=this;if(window.SharedWorker){this._ffWebWorker=new SharedWorker("../../../../projects/ff0210.io.native/src/javascript/NativeHttpWebWorker.js").port;this._ffWebWorker.onmessage=function(t){return e.NativeHttpWebWorkerClient.onMessage.call(r,t)};this._ffWebWorker.postMessage({cmd:"init",environment:t.getEnvironment().toString()})}};e.NativeHttpWebWorkerClient.onMessage=function(t){if(t.data&&t.data.cmd==="init"){e.XLogger.println("[Sphere Server] Initialization: ".concat(t.data.status))}if(t.data&&t.data.cmd==="http"){e.XLogger.println("[Sphere Server] Webworker response: ".concat(t.data.message));this.m_response=e.HttpResponse.createResponse(this.getRequest());var r=JSON.parse(t.data.message);var i=new e.NativeJsonProxyElement(r);this.m_response.setJsonObject(i);this.setData(this.m_response);this.endSync()}};e.NativeHttpWebWorkerClient.parseResponseHeaders=function(t,r){if(t!==null){if(e.XSystemUtils.isGoogleAppsScript()){for(var i in t){if(i!==e.HttpConstants.HD_SET_COOKIE){r.put(i,t[i])}}}else{var n=t.split("\r\n");var o=n.length;var s=e.HttpConstants;for(var a=0;a<o;a++){var p=n[a];var l=p.indexOf(": ");if(l>0){var u=p.substring(0,l).replace(/(^\u000d\u000a?)|(^\u000a?)/,"");var c=p.substring(l+2);r.put(s.lookupCamelCase(u),c)}}}}};e.NativeHttpWebWorkerClient.prototype.abort=function(){this.m_xmlHttpRequest.abort()};e.NativeHttpWebWorkerClient.prototype.releaseObject=function(){this.m_xmlHttpRequest=null;this.m_response=e.XObjectExt.release(this.m_response);this.m_isOnAjaxEventExecuted=null;e.DfHttpClient.prototype.releaseObject.call(this)};e.NativeHttpWebWorkerClient.prototype.onAjaxEvent=function(){var t=this.m_xmlHttpRequest;if(t!==null&&t.readyState===4){this.addProfileStep("Receive http response");this.m_response=e.HttpResponse.createResponse(this.getRequest());this.m_isOnAjaxEventExecuted=true;if(e.XSystemUtils.isNode()||e.XSystemUtils.isGoogleAppsScript()){var r=e.HttpCookies.create();var i=t.getResponseHeader(e.HttpConstants.HD_SET_COOKIE);for(var n in i){if(i.hasOwnProperty(n)){r.addByHttpServerResponseValue(i[n])}}this.m_response.setCookies(r);this.m_response.setCookiesMasterStore(this.getRequest().getCookiesMasterStore());this.m_response.applyCookiesToMasterStorage()}this.m_response.setStatusCode(t.status);this.m_response.setStatusCodeDetails(t.statusText);var o=t.getAllResponseHeaders();var s=this.m_response.getHeaderFieldsBase();e.NativeHttpWebWorkerClient.parseResponseHeaders(o,s);var a=s.getByKey(e.HttpConstants.HD_CONTENT_TYPE);if(a!==null){a=a.toLowerCase();var p=a.indexOf(";");if(p!==-1){a=a.substring(0,p)}}var l=e.ContentType.lookup(a);if(l===null){this.m_response.setContentTypeValue(a)}else{this.m_response.setContentType(l);if(l.isText()){var u=t.responseText;this.m_response.setString(u);if(l===e.ContentType.APPLICATION_JSON){if(u!==null&&u.length>0){try{this.addProfileStep("Parse json");var c=JSON.parse(u);var v=new e.NativeJsonProxyElement(c);this.m_response.setJsonObject(v)}catch(t){this.addError(e.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.message)}}}}}if(t.status===0){this.addError(e.ErrorCodes.HOST_UNREACHABLE,"Destination host is unreachable!")}this.setData(this.m_response);this.endSync();this.m_xmlHttpRequest=null}};e.NativeHttpWebWorkerClient.prototype.processSynchronization=function(r){var i=e.HttpConstants;var n=e.HttpRequestMethod;var o=this.prepareRequest();var s=o.getUriStringWithoutAuthentication();this.m_xmlHttpRequest=null;if(e.XSystemUtils.isXS()){this.m_xmlHttpRequest=new t.XMLHttpRequest}else if(e.XSystemUtils.isNode()){this.m_xmlHttpRequest=new e.NodeJsXMLHttpRequest;var a;if(typeof window!=="undefined"&&window&&window.options&&window.options.isMobile&&e.userSession){a=e.HttpCookies.create();a.addByHttpClientRequestValue(e.userSession.cookies)}else{a=this.getRequest().getCookies()}this.m_xmlHttpRequest.setCookies(a)}else if(e.XSystemUtils.isGoogleAppsScript()){this.m_xmlHttpRequest=new e.NativeGoogleHttpRequest;this.m_xmlHttpRequest.setCookies(this.getRequest().getCookies())}else if(e.XSystemUtils.isBrowser()&&o.isLogoff()&&typeof navigator.sendBeacon!=="undefined"){navigator.sendBeacon(s);return true}else{this.m_xmlHttpRequest=new XMLHttpRequest}if(this.m_xmlHttpRequest!==null){var p=this.m_xmlHttpRequest;var l=r===e.SyncType.NON_BLOCKING;var u=o.getMethod();p.open(u.getName(),s,l);if(u===n.HTTP_POST||u===n.HTTP_PUT){var c=o.getContentType().getName()+";charset=UTF-8";p.setRequestHeader(i.HD_CONTENT_TYPE,c)}p.setRequestHeader(i.HD_ACCEPT,o.getAcceptContentType().getName());var v=o.getAuthenticationType();if(v===e.AuthenticationType.BASIC){var h=o.getUser()+":"+o.getPassword();var d=i.VA_AUTHORIZATION_BASIC+" "+e.Base64.encode(h);p.setRequestHeader(i.HD_AUTHORIZATION,d)}else if(v===e.AuthenticationType.BEARER){var f=o.getAccessToken();if(f===null){f=o.getAuthenticationToken().getAccessToken()}if(f!==null){p.setRequestHeader(i.HD_AUTHORIZATION,i.VA_AUTHORIZATION_BEARER+" "+f)}}else if(v===e.AuthenticationType.SCP_OPEN_CONNECTORS){var y=o.getUser();var m=o.getOrganization();var S=o.getElement();var g=e.XStringBuffer.create();g.append(i.HD_USER).append(" ").append(y);g.append(", ");g.append(i.HD_ORGANIZATION).append(" ").append(m);g.append(", ");g.append(i.HD_ELEMENT).append(" ").append(S);p.setRequestHeader(i.HD_AUTHORIZATION,g.toString())}var N=o.getLanguage();if(N&&N.length>0){p.setRequestHeader(i.HD_ACCEPT_LANGUAGE,N)}var _=o.getHeaderFields();var R=_.getKeysAsIteratorOfString();while(R.hasNext()){var q=R.next();p.setRequestHeader(q,_.getByKey(q))}p.onreadystatechange=this.onAjaxEvent.bind(this);if(this._sendInternal(o)===false){return false}if(!l){if(!this.m_isOnAjaxEventExecuted){this.onAjaxEvent();this.m_xmlHttpRequest=null}}return true}this.addError(e.HttpErrorCode.HTTP_MISSING_NATIVE_DRIVER,"XMLHttpRequest not supported");return false};e.NativeHttpWebWorkerClient.prototype._sendInternal=function(t){var r=e.HttpRequestMethod;try{this.m_isOnAjaxEventExecuted=false;this.addProfileStep("### SERVER ###");if(t.isCorsSecured()){this.m_xmlHttpRequest.withCredentials=true}if(t.getMethod()===r.HTTP_POST||t.getMethod()===r.HTTP_PUT){var i=e.HttpCoreUtils.populateHeaderFromRequest(t,e.HttpHeader.create(),t,0,true);var n=e.HttpCoreUtils.createHttpRequestString(t,i);this._ffWebWorker.postMessage({cmd:"http",method:t.getMethod().getName(),url:t.getUriStringWithoutAuthentication(),headers:i,content:t.getString(),httpRequestString:n})}else{this._ffWebWorker.postMessage({cmd:"http",method:t.getMethod().getName(),url:t.getUriStringWithoutAuthentication(),headers:e.HttpCoreUtils.populateHeaderFromRequest(t,e.HttpHeader.create(),t,0,true),content:null})}return true}catch(t){this.addError(e.HttpErrorCode.HTTP_IO_EXCEPTION,t.message);return false}};e.NativeHttpClientFactory=function(){e.HttpClientFactory.call(this);this._ff_c="NativeHttpClientFactory"};e.NativeHttpClientFactory.prototype=new e.HttpClientFactory;e.NativeHttpClientFactory.staticSetup=function(){var t=new e.NativeHttpClientFactory;e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.HTTPS,t);e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.HTTP,t);e.HttpClientFactory.setHttpClientFactoryForProtocol(e.ProtocolType.WEBWORKER,t)};e.NativeHttpClientFactory.prototype.newHttpClientInstance=function(t,r){if(r.getProtocolType().getName()==="webworker"){return new e.NativeHttpWebWorkerClient(t)}return new e.NativeHttpClient(t)};e.NativeNetworkEnv=function(){e.NetworkEnv.call(this);this._ff_c="NativeNetworkEnv"};e.NativeNetworkEnv.prototype=new e.NetworkEnv;e.NativeNetworkEnv.staticSetup=function(){e.NetworkEnv.setNative(new e.NativeNetworkEnv)};e.NativeNetworkEnv.prototype.getNativeLocation=function(){var t=e.XUri.create();if(e.XSystemUtils.isBrowser()){var r=window.location;var i=r.protocol;var n=i.indexOf(":");if(n!==-1){i=i.substring(0,n)}t.setScheme(i);t.setHost(r.hostname);var o=0;if(r.port!==null&&r.port!==""){o=parseInt(r.port);if(isNaN(o)){o=0}}t.setPort(o);t.setPath(r.pathname);var s=r.hash;if(s!==null&&s!==""){if(s.indexOf("#")===0){s=s.substring(1)}s=decodeURIComponent(s);t.setFragment(s)}var a=r.search;if(a!==null&&a!==""){a=decodeURIComponent(a);t.setQuery(a)}}return t};e.NativeNetworkEnv.prototype.getNativeFragment=function(){return this.getNativeLocation().getFragment()};e.NativeNetworkEnv.prototype.setNativeFragment=function(t){if(e.XSystemUtils.isBrowser()){if(t===null){var r=window.location.toString();if(r.indexOf("#")>0){r=r.substring(0,r.indexOf("#"))}window.history.pushState({},document.title,r)}else{window.location.hash=t}}};e.NativeNetworkEnv.prototype.setNativeDomain=function(t){if(e.XSystemUtils.isBrowser()){document.domain=t}};e.NativeSamlUtils=function(){e.SamlUtils.call(this);this._ff_c="NativeSamlUtils"};e.NativeSamlUtils.prototype=new e.SamlUtils;e.NativeSamlUtils.WINDOW_WIDTH=800;e.NativeSamlUtils.WINDOW_HEIGHT=520;e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT=31e3;e.NativeSamlUtils.staticSetup=function(){e.SamlUtils.setNative(new e.NativeSamlUtils)};e.NativeSamlUtils.prototype.openNativeWindow=function(t,r){var i=window.open(t,"_blank","width=".concat(e.NativeSamlUtils.WINDOW_WIDTH,",height=").concat(e.NativeSamlUtils.WINDOW_HEIGHT));if(!i){return false}var n=setInterval(function(){if(i&&i.closed){clearInterval(n);r.onWindowClose()}},100);setTimeout(function(){if(i&&!i.closed){clearInterval(n);i.close();r.onAuthenticationTimeout()}},e.NativeSamlUtils.DEFAULT_AUTH_TIMEOUT);return true};e.NativeDocumentEnv=function(){e.DocumentEnv.call(this);this._ff_c="NativeDocumentEnv"};e.NativeDocumentEnv.prototype=new e.DocumentEnv;e.NativeDocumentEnv.staticSetup=function(){e.DocumentEnv.setNative(new e.NativeDocumentEnv)};e.NativeDocumentEnv.prototype.setNativeStringAtId=function(t,r){if(e.XSystemUtils.isBrowser()){var i=document.getElementById(t);if(i!==null&&i!==undefined){i.innerHTML=r}}};e.NativeXLocalStorage=function(t){e.XLocalStorage.call(this);this._ff_c="NativeXLocalStorage"};e.NativeXLocalStorage.prototype=new e.XLocalStorage;e.NativeXLocalStorage.staticSetup=function(){if(e.XSystemUtils.isBrowser()){e.XLocalStorage.setInstance(new e.NativeXLocalStorage)}};e.NativeXLocalStorage.releaseObject=function(){e.XLocalStorage.prototype.releaseObject.call(this)};e.NativeXLocalStorage.prototype.getStringByKey=function(e){return localStorage.getItem(e)};e.NativeXLocalStorage.prototype.getStringByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getStringByKey(e)};e.NativeXLocalStorage.prototype.putString=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getBooleanByKey=function(e){return localStorage.getItem(e)==="true"};e.NativeXLocalStorage.prototype.getBooleanByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getBooleanByKey(e)};e.NativeXLocalStorage.prototype.putBoolean=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getLongByKey=function(e){return parseInt(localStorage.getItem(e))};e.NativeXLocalStorage.prototype.getLongByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getLongByKey(e)};e.NativeXLocalStorage.prototype.putLong=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getIntegerByKey=function(e){return parseInt(localStorage.getItem(e),10)};e.NativeXLocalStorage.prototype.getIntegerByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getIntegerByKey(e)};e.NativeXLocalStorage.prototype.putInteger=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.getDoubleByKey=function(e){return parseFloat(localStorage.getItem(e))};e.NativeXLocalStorage.prototype.getDoubleByKeyExt=function(e,t){if(!this.containsKey(e)){return t}return this.getDoubleByKey(e)};e.NativeXLocalStorage.prototype.putDouble=function(e,t){localStorage.setItem(e,t)};e.NativeXLocalStorage.prototype.removeKey=function(e){localStorage.removeItem(e)};e.NativeXLocalStorage.prototype.containsKey=function(e){return localStorage.getItem(e)!==null&&localStorage.getItem(e)!==undefined};e.NativeXLocalStorage.prototype.clear=function(){localStorage.clear()};e.NativeXLocalStorage.prototype.getAllKeys=function(){var t=e.XListOfString.create();for(var r in localStorage){t.add(r)}return t};e.NativeXCacheProviderIdbOpenAction=function(){};e.NativeXCacheProviderIdbOpenAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbOpenAction.prototype._ff_c="NativeXCacheProviderIdbOpenAction";e.NativeXCacheProviderIdbOpenAction.m_openReq=null;e.NativeXCacheProviderIdbOpenAction.createAndRun=function(t,r,i,n){var o=new e.NativeXCacheProviderIdbOpenAction;o.setupActionAndRun(t,r,i,n);return o};e.NativeXCacheProviderIdbOpenAction.prototype.processSynchronization=function(e){var t=this;var r=this.getActionContext();this.setData(r);var i=r.getIDB();var n=i.open("ff_cache25",25);n.onerror=function(e){};n.onupgradeneeded=function(e){var t=e.target.result;if(t!==null){if(t.objectStoreNames.contains("main")===false){var r=t.createObjectStore("main",{keyPath:["namespace","name"]});r.createIndex("namespace","namespace",{unique:false});r.createIndex("name","name",{unique:false});r.createIndex("value","value",{unique:false})}}};n.onsuccess=function(e){var i=e.target.result;r.setActiveDb(i);t.endSync()};return true};e.NativeXCacheProviderIdbOpenAction.prototype.callListener=function(e,t,r,i){t.onCacheProviderOpen(e,r,i)};e.NativeXCacheProviderIdbWriteAction=function(){};e.NativeXCacheProviderIdbWriteAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbWriteAction.prototype._ff_c="NativeXCacheProviderIdbWriteAction";e.NativeXCacheProviderIdbWriteAction.prototype.m_namespace=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_name=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_content=null;e.NativeXCacheProviderIdbWriteAction.prototype.m_maxCount=0;e.NativeXCacheProviderIdbWriteAction.createAndRun=function(t,r,i,n,o,s,a,p){var l=new e.NativeXCacheProviderIdbWriteAction;l.m_namespace=o;l.m_name=s;l.m_content=a;l.setData(a);l.m_maxCount=p;l.setupActionAndRun(t,r,i,n);return l};e.NativeXCacheProviderIdbWriteAction.prototype.processSynchronization=function(e){var t=this;var r=this.m_content.getString();var i=this.getActionContext();var n=i.getActiveDb();var o=n.transaction(["main"],"readwrite");var s=o.objectStore("main");var a=s.add({namespace:this.m_namespace,name:this.m_name,value:r});a.onsuccess=function(e){console.log("The data has been written successfully");i.incWriteHit(t.m_namespace);t.endSync()};a.onerror=function(e){console.log("The data has been written failed");t.endSync()};return true};e.NativeXCacheProviderIdbWriteAction.prototype.callListener=function(e,t,r,i){t.onCacheWrite(e,r,i)};e.NativeXCacheProviderIdbReadAction=function(){};e.NativeXCacheProviderIdbReadAction.prototype=new e.SyncAction;e.NativeXCacheProviderIdbReadAction.prototype._ff_c="NativeXCacheProviderIdbReadAction";e.NativeXCacheProviderIdbReadAction.prototype.m_namespace=null;e.NativeXCacheProviderIdbReadAction.prototype.m_name=null;e.NativeXCacheProviderIdbReadAction.prototype.m_validityTime=0;e.NativeXCacheProviderIdbReadAction.createAndRun=function(t,r,i,n,o,s,a){var p=new e.NativeXCacheProviderIdbReadAction;p.m_namespace=o;p.m_name=s;p.m_validityTime=a;p.setupActionAndRun(t,r,i,n);return p};e.NativeXCacheProviderIdbReadAction.prototype.processSynchronization=function(t){var r=this;var i=this.getActionContext();var n=i.getActiveDb();var o=n.transaction(["main"],"readwrite");var s=o.objectStore("main");var a=s.get([this.m_namespace,this.m_name]);a.onsuccess=function(t){var n=t.target.result;if(n!==undefined){var o=n.value;console.log("The data has been read successfully");i.incHit(r.m_namespace);var s=e.XContent.createStringContent(e.ContentType.TEXT,o);r.setData(s)}else{i.incMissedHit(r.m_namespace);r.addError("The data read has been failed")}r.endSync()};a.onerror=function(e){i.incMissedHit(r.m_namespace);r.addError("The data read has been failed");r.endSync()};return true};e.NativeXCacheProviderIdbReadAction.prototype.callListener=function(e,t,r,i){t.onCacheRead(e,r,i)};e.NativeXCacheProviderIdb=function(){e.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderIdb"};e.NativeXCacheProviderIdb.prototype=new e.DfXCacheProvider;e.NativeXCacheProviderIdb.m_indexedDB=null;e.NativeXCacheProviderIdb.m_activeDb=null;e.NativeXCacheProviderIdb.create=function(t){var r=new e.NativeXCacheProviderIdb;r.setupSessionContext(t);return r};e.NativeXCacheProviderIdb.prototype.setupSessionContext=function(t){e.DfXCacheProvider.prototype.setupSessionContext.call(this,t);var r=typeof window!=="undefined"?window:{};this.m_indexedDB=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB};e.NativeXCacheProviderIdb.prototype.processOpen=function(t,r,i){return e.NativeXCacheProviderIdbOpenAction.createAndRun(t,r,i,this)};e.NativeXCacheProviderIdb.prototype.getPrefix=function(){return""};e.NativeXCacheProviderIdb.prototype.writeStringToCache=function(e,t,r,i){var n=this.m_activeDb.transaction(["main"],"readwrite").objectStore("main").add({namespace:e,name:t,value:r});n.onsuccess=function(e){console.log("The data has been written successfully")};n.onerror=function(e){console.log("The data has been written failed")}};e.NativeXCacheProviderIdb.prototype.getStringByKey=function(e){return null};e.NativeXCacheProviderIdb.prototype.clearCacheInternal=function(e){};e.NativeXCacheProviderIdb.prototype.getIDB=function(){return this.m_indexedDB};e.NativeXCacheProviderIdb.prototype.setActiveDb=function(e){this.m_activeDb=e};e.NativeXCacheProviderIdb.prototype.getActiveDb=function(){return this.m_activeDb};e.NativeXCacheProviderIdb.prototype.processWrite=function(t,r,i,n,o,s,a){return e.NativeXCacheProviderIdbWriteAction.createAndRun(t,r,i,this,n,o,s,a)};e.NativeXCacheProviderIdb.prototype.processRead=function(t,r,i,n,o,s){return e.NativeXCacheProviderIdbReadAction.createAndRun(t,r,i,this,n,o,s)};e.NativeXCacheProviderLs=function(){e.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderLs"};e.NativeXCacheProviderLs.prototype=new e.DfXCacheProvider;e.NativeXCacheProviderLs.create=function(t){var r=new e.NativeXCacheProviderLs;r.setupSessionContext(t);return r};e.NativeXCacheProviderLs.prototype.getPrefix=function(){return"sap.ff"};e.NativeXCacheProviderLs.prototype.putString=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){this.logError2("Error occured during cache writing: ",e.message)}};e.NativeXCacheProviderLs.prototype.getStringByKey=function(e){return window.localStorage.getItem(e)};e.NativeXCacheProviderLs.prototype.clearCacheInternal=function(e){window.localStorage.clear()};e.NativeXCacheProviderFactory=function(){e.XCacheProviderFactory.call(this);this._ff_c="NativeXCacheProviderFactory"};e.NativeXCacheProviderFactory.prototype=new e.XCacheProviderFactory;e.NativeXCacheProviderFactory.staticSetup=function(){var t=typeof window!=="undefined"?window:{};if(typeof t.localStorage!=="undefined"){var r=new e.NativeXCacheProviderFactory;e.XCacheProviderFactory.registerFactory(e.XCacheProviderFactory.DRIVER_LOCAL_STORAGE,r)}var i=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB;if(i!=="undefined"&&i!==null){e.XCacheProviderFactory.registerFactory(e.XCacheProviderFactory.DRIVER_INDEX_DB,r)}};e.NativeXCacheProviderFactory.prototype.newDeviceCacheAccess=function(t,r){var i=null;if(r==e.XCacheProviderFactory.DRIVER_LOCAL_STORAGE){i=new e.NativeXCacheProviderLs.create(t)}else if(r==e.XCacheProviderFactory.DRIVER_INDEX_DB){i=new e.NativeXCacheProviderIdb.create(t)}return i};e.NativeXPeek=function(){e.XPeek.call(this);this._ff_c="NativeXPeek"};e.NativeXPeek.prototype=new e.XPeek;e.NativeXPeek.staticSetup=function(){if(typeof document!=="undefined"){var t=new e.NativeXPeek;e.XPeek.setInstance(t)}};e.NativeXPeek.prototype.retrieveContent=function(t,r){var i=null;var n=typeof document!=="undefined"?document:{};var o=document.getElementById(r);var s=o.contentDocument||o.contentWindow.document;if(s.readyState=="complete"){var a=s.body.innerText;i=e.XContent.createStringContent(e.ContentType.TEXT,a)}return i};e.NativeSqlOpenAction=function(){};e.NativeSqlOpenAction.prototype=new e.SyncAction;e.NativeSqlOpenAction.prototype._ff_c="NativeSqlOpenAction";e.NativeSqlOpenAction.m_openReq=null;e.NativeSqlOpenAction.createAndRun=function(t,r,i,n,o){var s=new e.NativeSqlOpenAction;s.m_driver=t;s.setupActionAndRun(r,i,n,o);return s};e.NativeSqlOpenAction.initSqlJs=function(e,t,r){if(typeof window.initSqlJs==="function"){return window.initSqlJs(e).then(t)["catch"](r)}var i=function e(t,r){var i=document.createElement("script");i.src=t;i.crossOrigin="anonymous";if(typeof r==="function"){i.onload=r}document.getElementsByTagName("head")[0].appendChild(i)};i(e.locateFile("sql-wasm.min.js"),function(){if(typeof window.initSqlJs!=="function"){r("Failed to load sql.js")}else{window.initSqlJs(e).then(t)["catch"](r)}})};e.NativeSqlOpenAction.prototype.processSynchronization=function(){this.setData(this.m_driver);var t={locateFile:function e(t){return"https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.5.0/"+t}};var r=this.m_driver;if(r.m_SQL){r.m_db=new r.m_SQL.Database;return false}else{var i=this;e.NativeSqlOpenAction.initSqlJs(t,function(e){r.m_SQL=e;r.m_db=new r.m_SQL.Database;i.endSync()},function(e){r.addError(0,e!==undefined?e.toString():"Unknown error during sql.js init")});return true}};e.NativeSqlOpenAction.prototype.callListener=function(e,t,r,i){t.onOpened(e,r,i)};e.NativeSqlRsMetaData=function(){e.MessageManager.call(this);this._ff_c="NativeSqlRsMetaData"};e.NativeSqlRsMetaData.prototype=new e.DfSqlRsMetaData;e.NativeSqlRsMetaData.create=function(t){var r=new e.NativeSqlRsMetaData;r.m_columns=[];for(var i=0;i<t.length;i++){for(var n=0;n<t[i].columns.length;n++){var o=i===0;if(!o){var s=t[i].columns[n];for(var a=0;a<r.m_columns.length;a++){if(r.m_columns[a]===s){o=true;break}}}if(o){var p=null;for(var l=0;l<t[i].values.length;l++){var u=t[i].values[l][n];if(u!==null){var c=_typeof(u);if(p===null){p=c}else if(p!==c){p="string"}}}r.m_columns.push({name:t[i].columns[n],type:p})}}}return r};e.NativeSqlRsMetaData.prototype.get=function(e){return this.m_columns[e].name};e.NativeSqlRsMetaData.prototype.hasElements=function(){return this.m_columns.length!==0};e.NativeSqlRsMetaData.prototype.isEmpty=function(){return this.m_columns.length===0};e.NativeSqlRsMetaData.prototype.size=function(){return this.m_columns.length};e.NativeSqlRsMetaData.prototype.getType=function(t){switch(this.m_columns[t].type){case"string":return e.SqlResultSetType.STRING;case"number":return e.SqlResultSetType.DOUBLE;case"boolean":return e.SqlResultSetType.BOOLEAN;default:return e.SqlResultSetType.THE_NULL}};e.NativeSqlResultSet=function(){this._ff_c="NativeSqlResultSet"};e.NativeSqlResultSet.prototype=new e.DfSqlResultSet;e.NativeSqlResultSet.create=function(t){var r=new e.NativeSqlResultSet;r.m_result=t;r.m_i=-1;r.m_j=-1;return r};e.NativeSqlResultSet.prototype.next=function(){if(this.m_i===-1&&++this.m_j>=this.m_result.length){return false}if(++this.m_i>=this.m_result[this.m_j].values.length){this.m_i=-1;return this.next()}return true};e.NativeSqlResultSet.prototype.getByKey=function(e,t){var r=this.m_result[this.m_j].columns.indexOf(e);return r===-1?null:this.getAt(e,t)};e.NativeSqlResultSet.prototype.getAt=function(e,t){var r=this.m_result[this.m_j].values[this.m_i][e];return!t||_typeof(r)===t?r:null};e.NativeSqlResultSet.prototype.getStringByKeyExt=function(e,t){var r=this.getByKey(e);return r===null?t:r.toString()};e.NativeSqlResultSet.prototype.getStringByKey=function(e){var t=this.getByKey(e);return t===null?null:t.toString()};e.NativeSqlResultSet.prototype.getIntegerByKeyExt=function(e,t){var r=this.getByKey(e,"number");return r!==null&&Math.trunc(r)===r?r:t};e.NativeSqlResultSet.prototype.getIntegerByKey=function(e){return this.getIntegerByKeyExt(e,0)};e.NativeSqlResultSet.prototype.getLongByKeyExt=e.NativeSqlResultSet.prototype.getIntegerByKeyExt;e.NativeSqlResultSet.prototype.getLongByKey=e.NativeSqlResultSet.prototype.getIntegerByKey;e.NativeSqlResultSet.prototype.getDoubleByKeyExt=function(e,t){var r=this.getByKey(e,"number");return r===null?t:r};e.NativeSqlResultSet.prototype.getDoubleByKey=function(e){return this.getDoubleByKeyExt(e,0)};e.NativeSqlResultSet.prototype.getBooleanByKeyExt=function(e,t){var r=this.getByKey(e,"boolean");return r===null?t:r};e.NativeSqlResultSet.prototype.getBooleanByKey=function(e){return this.getBooleanByKeyExt(e,false)};e.NativeSqlResultSet.prototype.getStringAtExt=function(e,t){var r=this.getAt(e);return r===null?t:r.toString()};e.NativeSqlResultSet.prototype.getStringAt=function(e){return this.getStringAtExt(e,null)};e.NativeSqlResultSet.prototype.getIntegerAtExt=function(e,t){var r=this.getAt(e,"number");return r!==null&&Math.trunc(r)===r?r:t};e.NativeSqlResultSet.prototype.getIntegerAt=function(e){return this.getIntegerAtExt(e,0)};e.NativeSqlResultSet.prototype.getLongAtExt=e.NativeSqlResultSet.prototype.getIntegerAtExt;e.NativeSqlResultSet.prototype.getLongAt=e.NativeSqlResultSet.prototype.getIntegerAt;e.NativeSqlResultSet.prototype.getDoubleAtExt=function(e,t){var r=this.getAt(e,"number");return r===null?t:r};e.NativeSqlResultSet.prototype.getDoubleAt=function(e){return this.getDoubleAtExt(e,0)};e.NativeSqlResultSet.prototype.getBooleanAtExt=function(e,t){var r=this.getAt(e,"boolean");return r===null?t:r};e.NativeSqlResultSet.prototype.getBooleanAt=function(e){return this.getBooleanAtExt(e,false)};e.NativeSqlResultSet.prototype.hasNullByKey=function(e){var t=this.m_result[this.m_j].columns.indexOf(e);return this.m_result[this.m_j].values[this.m_i][t]===null};e.NativeSqlResultSet.prototype.getMetaData=function(){return e.NativeSqlRsMetaData.create(this.m_result)};e.NativeSqlDriver=function(){e.MessageManager.call(this);this._ff_c="NativeSqlDriver"};e.NativeSqlDriver.prototype=new e.MessageManager;e.NativeSqlDriver.create=function(t){var r=new e.NativeSqlDriver;r.setupDriver(t);return r};e.NativeSqlDriver.prototype.setupDriver=function(){e.MessageManager.prototype.setupSessionContext.call(this)};e.NativeSqlDriver.prototype.open=function(e){this.m_connectionUri=e;if(this.m_SQL){this.m_db=new this.m_SQL.Database}else{this.addError(0,"Synchronious open is not supported by sql.js")}};e.NativeSqlDriver.prototype.processOpen=function(t,r,i,n){this.m_connectionUri=n;return e.NativeSqlOpenAction.createAndRun(this,t,r,i,this.getSession())};e.NativeSqlDriver.prototype.openExt=e.NativeSqlDriver.prototype.openExt;e.NativeSqlDriver.prototype.processOpenExt=e.NativeSqlDriver.prototype.processOpen;e.NativeSqlDriver.prototype.close=function(){};e.NativeSqlDriver.prototype.executeUpdate=function(e){try{this.m_db.run(e)}catch(e){this.addError(0,e.message)}};e.NativeSqlDriver.prototype.executeQuery=function(t){try{var r=this.m_db.exec(t);return e.NativeSqlResultSet.create(r)}catch(e){this.addError(0,e.message)}return null};e.NativeSqlDriver.prototype.getConnection=function(){return this.m_connectionUri};e.NativeSqlDriver.prototype.processExecuteUpdate=function(t,r,i,n){return e.SqlSynchroniousUpdateAction.createAndRun(e.XIntegerValue.create(this.executeUpdate(n)),t,r,i,this.getSession())};e.NativeSqlDriver.prototype.processExecuteQuery=function(t,r,i,n){return e.SqlSynchroniousQueryAction.createAndRun(this.executeQuery(n),t,r,i,this.getSession())};e.NativeSqlDriver.prototype.processGetSchemas=function(t,r,i){this.addError(0,"Not supported");return e.SqlSynchroniousQueryAction.createAndRun(null,t,r,i,this.getSession())};e.NativeSqlDriver.prototype.processGetTables=function(t,r,i){this.addError(0,"Not supported");return e.SqlSynchroniousQueryAction.createAndRun(null,t,r,i,this.getSession())};e.NativeSqlDriver.prototype.processGetColumns=function(t,r,i){this.addError(0,"Not supported");return e.SqlSynchroniousQueryAction.createAndRun(null,t,r,i,this.getSession())};e.NativeSqlDriver.prototype.processGetImportedKeys=function(t,r,i){this.addError(0,"Not supported");return e.SqlSynchroniousQueryAction.createAndRun(null,t,r,i,this.getSession())};e.NativeSqlDriverFactory=function(){e.HttpClientFactory.call(this);this._ff_c="NativeSqlDriverFactory"};e.NativeSqlDriverFactory.prototype=new e.SqlDriverFactory;e.NativeSqlDriverFactory.staticSetup=function(){var t=new e.NativeSqlDriverFactory;e.SqlDriverFactory.registerFactory(t)};e.NativeSqlDriverFactory.prototype.newSqlDriver=function(t){return e.NativeSqlDriver.create(t)};e.IoNativeModule=function(){e.DfModule.call(this);this._ff_c="IoNativeModule"};e.IoNativeModule.prototype=new e.DfModule;e.IoNativeModule.s_module=null;e.IoNativeModule.getInstance=function(){var t=e.IoNativeModule;if(t.s_module===null){if(e.IoModule.getInstance()===null){throw new Error("Initialization Exception")}t.s_module=e.DfModule.startExt(new e.IoNativeModule);e.NativeNetworkEnv.staticSetup();e.NativeDispatcher.staticSetup();e.NativeHttpClientFactory.staticSetup();e.NativeXLocalStorage.staticSetup();e.NativeXCacheProviderFactory.staticSetup();e.NativeSqlDriverFactory.staticSetup();e.NativeDocumentEnv.staticSetup();e.NativeXPeek.staticSetup();e.NativeSamlUtils.staticSetup();if(e.XSystemUtils.isNode()){e.userSession={};e.NativeXFileSystem.staticSetup();e.NativeXFileSystemOSFactory.staticSetup()}e.DfModule.stopExt(t.s_module)}return t.s_module};e.IoNativeModule.prototype.getName=function(){return"ff0210.io.native"};e.IoNativeModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff0210.io.native.js.map