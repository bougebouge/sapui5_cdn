/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4394.olap.serialization"],function(e){"use strict";e.XCommandUtil={updateExtendedDimensionPackages:function(t,r){if(!e.XCollectionUtils.hasElements(t)||!e.XCollectionUtils.hasElements(r)){return}var n=t.size();for(var i=0;i<n;i++){var a=t.get(i);var o=e.XCommandUtil.getExtDimInfoByName(a.getName(),r);if(e.notNull(o)){var s=o.getStructureByKey("dataSource").getStringByKey("packageName");var l=t.get(i).getDataSource();l.setPackageName(s)}}},getExtDimInfoByName:function(t,r){var n=r.size();for(var i=0;i<n;i++){var a=r.getStructureAt(i);if(e.XString.isEqual(t,a.getStringByKey("name"))){return a}}return null},handleInactiveCapabilities:function(t,r,n){e.XCommandUtil.activateExperimentalFeatures(t,r);if(e.notNull(n)){var i=n.getKeysAsIteratorOfString();while(i.hasNext()){var a=i.next();var o=n.getByKey(a).getBoolean();var s=e.FeatureToggleOlap.lookup(a);if(o){e.XCommandUtil.activate(t,s)}else{var l=t.getSession().getFeatureToggles();if(e.notNull(l)){var u=l;u.removeElement(s)}}}}},activateExperimentalFeatures:function(t,r){if(e.XStringUtils.isNotNullAndNotEmpty(r)){if(e.XString.containsString(r,",")){var n=e.XStringTokenizer.splitString(r,",");var i=n.size();for(var a=0;a<i;a++){e.XCommandUtil.activate(t,e.FeatureToggleOlap.lookup(n.get(a)))}}else{e.XCommandUtil.activate(t,e.FeatureToggleOlap.lookup(r))}}},activate:function(t,r){if(e.isNull(r)){return}var n=r.getMaxXVersion();if(n>=0&&n<=t.getApplication().getXVersion()){return}t.getSession().activateFeatureToggle(r)}};e.QCsnConverter={s_lookupValueType:null,s_lookupValueTypeCsn:null,staticSetup:function(){e.QCsnConverter.setupDimensionType()},mapConstant:function(e,t,r,n){e.put(n,r);t.put(r.getName(),n)},setupDimensionType:function(){e.QCsnConverter.s_lookupValueType=e.XHashMapByString.create();e.QCsnConverter.s_lookupValueTypeCsn=e.XHashMapOfStringByString.create();e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.LOWER_CASE_STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.UPPER_CASE_STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.STRING,e.CsnConstants.TYPE_LARGE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.STRING,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.CHAR,e.CsnConstants.TYPE_STRING);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.INTEGER,e.CsnConstants.TYPE_DECIMAL);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.INTEGER,e.CsnConstants.TYPE_INTEGER);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.LONG,e.CsnConstants.TYPE_INTEGER64);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.BOOLEAN,e.CsnConstants.TYPE_BOOLEAN);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DECIMAL_FLOAT,e.CsnConstants.TYPE_DECIMAL_FLOAT);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DOUBLE,e.CsnConstants.TYPE_DOUBLE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE,e.CsnConstants.TYPE_LOCAL_DATE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE,e.CsnConstants.TYPE_DATE);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIME,e.CsnConstants.TYPE_LOCAL_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIME,e.CsnConstants.TYPE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE_TIME,e.CsnConstants.TYPE_LOCAL_DATE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.DATE_TIME,e.CsnConstants.TYPE_DATE_TIME);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIMESPAN,e.CsnConstants.TYPE_UTC_TIMESTAMP);e.QCsnConverter.mapConstant(e.QCsnConverter.s_lookupValueType,e.QCsnConverter.s_lookupValueTypeCsn,e.XValueType.TIMESPAN,e.CsnConstants.TYPE_TIMESTAMP)},lookupValueType:function(t,r){var n=e.QCsnConverter.s_lookupValueType.getByKey(t);return e.notNull(n)?n:r},lookupValueTypeCsn:function(t,r){var n=e.QCsnConverter.s_lookupValueTypeCsn.getByKey(t.getName());return e.notNull(n)?n:r},lookupAxis:function(t){var r=e.XString.toUpperCase(t);if(e.XString.isEqual(r,e.CsnConstants.AXIS_ROWS)){return e.AxisType.ROWS}if(e.XString.isEqual(r,e.CsnConstants.AXIS_COLUMNS)){return e.AxisType.COLUMNS}return e.AxisType.FREE},lookupAxisCsn:function(t){if(t===e.AxisType.ROWS){return e.CsnConstants.AXIS_ROWS}if(t===e.AxisType.COLUMNS){return e.CsnConstants.AXIS_COLUMNS}return e.CsnConstants.AXIS_FREE}};e.QInADataSourceBlending={exportDataSourceBlending:function(t,r,n){var i=e.PrFactory.createStructure();var a=i.putNewStructure("Metadata");var o=a.putNewStructure("DataSource");o.putString("Type",e.QueryManagerMode.BLENDING.getName());var s=e.XStringBuffer.create();for(var l=0;l<r.getSources().size();l++){s.append(r.getSources().get(l).getQueryAliasName())}var u=s.toString();if(s.length()>=256){u=e.XSha1.createSHA1(u)}o.putString("ObjectName",u);var p=e.QInADataSourceBlending.exportBlendingSources(t,r,n);o.put("Sources",p);var g=e.QInADataSourceBlending.exportBlendingMappings(r.getMappings());o.put("Mappings",g);return o},exportBlendingSources:function(t,r,n){var i=r.getBlendingHost();var a=i.getSource();var o=t;if(t.isTypeOf(e.QModelFormat.INA_DATA)){o=n&&t!==e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA?e.QModelFormat.INA_DATA_BLENDING_SOURCE:e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA}var s=e.PrFactory.createList();var l=r.getSources().getIterator();while(l.hasNext()){var u=l.next();var p=u.getQueryModel();if(e.isNull(p)){return null}var g=s.addNewStructure();g.putString("Type","Query");g.putString("AliasName",u.getQueryAliasName());g.putString("ObjectName",u.getQueryAliasName());var c=g.putNewStructure("DefiningContext");var m=p.serializeToElement(o).asStructure();e.QInADataSourceBlending.exportOptimizerHints(m,p.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS));var y=p.getQueryManager();var d=y.getResultSetPersistenceIdentifier();if(u!==a&&u.isRemoteSource()&&!o.isTypeOf(e.QModelFormat.INA_REPOSITORY)){e.QInADataSourceBlending.updateRemoteDataSource(m,y,n,i.getSystemDescription())}else if(!u.isRemoteSource()&&e.XStringUtils.isNotNullAndNotEmpty(d)&&n){m.getStructureByKey("DataSource").putString("InstanceId",d)}var A=e.QInADataSourceBlending.exportResultSetFeatures(p,true);m.put("ResultSetFeatureRequest",A);c.put("Definition",m)}e.XObjectExt.release(l);return s},updateRemoteDataSource:function(t,r,n,i){var a=t.putNewStructure("DataSource");a.putString("Type","SerializedData");a.putString("InstanceId",r.getResultSetPersistenceIdentifier());var o=r.getActiveResultSetContainer();var s=r.getSystemDescription();var l=e.XStringUtils.isNotNullAndNotEmpty(o.getSerializedView())&&(!n||e.XStringUtils.isNotNullAndNotEmpty(o.getSerializedCube()));if(!l&&i.isSystemMappingValid(s)){var u=s.getSystemMapping(i.getSystemName());a.putString("ObjectName",u.getDeserializeTable());a.putString("SchemaName",u.getDeserializeSchema())}else{var p=a.putNewStructure("SerializedData");p.putString("View",o.getSerializedView());if(n){p.putStringNotNullAndNotEmpty("Cube",o.getSerializedCube())}}e.QInADataSourceBlending.updateBWRemoteSource(t,r.getSystemType(),r.getQueryModel())},exportOptimizerHints:function(t,r){if(e.XCollectionUtils.hasElements(r)){var n=r.getKeysAsReadOnlyListOfString();n.sortByDirection(e.XSortDirection.ASCENDING);var i=t.putNewStructure("Hints");var a=i.putNewList(e.ExecutionEngine.MDS.getName());var o=n.size();for(var s=0;s<o;s++){var l=n.get(s);var u=a.addNewStructure();u.putString("Key",l);u.putString("Value",r.getByKey(l))}}},updateBWRemoteSource:function(t,r,n){if(r.isTypeOf(e.SystemType.BW)||r.isTypeOf(e.SystemType.VIRTUAL_INA)){t.remove("FixedFilter");t.remove("DynamicFilter");t.remove("Filter");t.remove("Conditions");t.remove("Query");t.remove("QueryDataCells");t.remove("Sort");t.remove("ExtendedSortTypes");t.remove("Variables");t.remove("UniversalDisplayHierarchies");var i=e.QInADataSourceBlending.getExtendedStructureMemberNames(n);var a=t.getListByKey("Dimensions");var o=e.PrUtils.getListSize(a,0);for(var s=0;s<o;s++){var l=a.getStructureAt(s).getListByKey("Members");var u=e.PrUtils.getListSize(l,0);for(var p=0;p<u;p++){var g=l.getStructureAt(p);if(i.contains(g.getStringByKey("Name"))){g.remove("Selection")}g.remove("Formula")}}}},getExtendedStructureMemberNames:function(t){var r=t.getMeasureDimension().getExtendedStructureMembers();return e.XCollectionUtils.createListOfNames(r)},exportResultSetFeatures:function(t,r){var n=e.PrFactory.createStructure();n.putBoolean("UseDefaultAttributeKey",false);var i=t.getQueryManager();if(i.getMaxResultRecords()!==-1){n.putLong("MaxResultRecords",i.getMaxResultRecords())}e.QInAOptions.exportPaging(n,i);e.QInAOptions.exportSuppressKeyfigureCalculation(n,i);n.putString("ResultFormat","Version2");n.putString("ResultEncoding","None");if(r){n.putBoolean("IsCubeBlendingSubquery",true)}if(!i.isResultSetTransportEnabled()){n.putBoolean("ReturnEmptyJsonResultSet",true)}return n},exportDimensionMapping:function(t){var r=e.PrFactory.createStructure();r.putString("DimensionName",t.getMemberName());r.putString("LinkType",t.getLinkType().getName());if(t.isPreservingMembers()){r.putBoolean("PreserveMembers",true)}if(!t.isReturningOriginKeys()){r.putBoolean("ReturnOriginKeys",false)}var n=t.getMappingDefinitions().getIterator();var i=e.QInADataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);r.put("Mapping",i);if((t.getLinkType()===e.BlendingLinkType.ALL_DATA||t.getLinkType()===e.BlendingLinkType.NONE)&&t.getConstantMappings().hasElements()){e.QInADataSourceBlending.exportConstantMapping(i,t.getConstantMappings().getIterator())}var a=e.PrFactory.createList();var o=t.getAttributeMappings().getIterator();while(o.hasNext()){var s=o.next();var l=e.QInADataSourceBlending.exportAttributeMapping(s);a.add(l)}e.XObjectExt.release(o);if(!a.isEmpty()){r.put("AttributeMappings",a)}return r},exportAttributeMapping:function(t){var r=e.PrFactory.createStructure();r.putString("AttributeName",t.getAttributeName());r.putBoolean("IsLinkKey",t.isLinkKey());var n=t.getAttributeMappingDefinitions().getIterator();var i=e.QInADataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);r.put("Mapping",i);e.QInADataSourceBlending.exportConstantMapping(i,t.getConstantMappings().getIterator());return r},exportConstantMapping:function(t,r){while(r.hasNext()){var n=r.next();var i=e.PrFactory.createStructure();i.putString("AliasName",n.getQueryAliasName());var a=i.putNewStructure("MappingDefinition");var o=a.putNewStructure("Constant");o.putString("Value",n.getMemberName());o.putString("ValueType",e.QInAConverter.lookupValueTypeInA(n.getValueType()));t.add(i)}},exportMappingDefinitions:function(t){var r=e.PrFactory.createList();while(t.hasNext()){var n=t.next();var i=r.addNewStructure();i.putString("AliasName",n.getQueryAliasName());var a=i.putNewStructure("MappingDefinition");var o=a.putNewStructure("Member");o.putString("Name",n.getMemberName())}return r},exportBlendingMappings:function(t){var r=e.PrFactory.createList();var n=t.getIterator();while(n.hasNext()){var i=n.next();var a=e.QInADataSourceBlending.exportDimensionMapping(i);r.add(a)}return r}};e.QInADataSourceExtDims={importQd:function(t,r,n){if(t.capabilities.supportsExtendedDimensions()){var i=r.getExtendedDimensionsBase();i.clear();var a=n.getListByKey("ExtendedDimensions");if(e.notNull(a)){var o=a.size();for(var s=0;s<o;s++){var l=a.getStructureAt(s);var u=l.getStringByKey("Name");var p=l.getStringByKey("JoinFieldName");var g=l.getStringByKey("JoinFieldNameInExtendedDimension");var c=r.addNewExtendedDimension(u,p,g);c.setText(l.getStringByKey("Description"));var m=l.getStringByKey("JoinType");var y=e.JoinType.lookup(m);c.setJoinType(y);e.QInADataSourceExtDims.importJoinParameter(l,c);e.QInADataSourceExtDims.importExtendedDataSource(l,c);var d=l.getStringByKey("FieldRenamingMode");if(e.notNull(d)){c.setRenamingMode(d)}var A=l.getStringByKey("JoinCardinality");if(e.XStringUtils.isNotNullAndNotEmpty(A)){var I=e.JoinCardinality.lookup(A);c.setJoinCardinality(I)}var S=l.getStringByKey("Visibility");if(e.XStringUtils.isNotNullAndNotEmpty(S)){var f=e.DimensionVisibility.lookup(S);if(e.notNull(f)){c.setVisibility(f)}}}}}},importExtendedDataSource:function(t,r){var n=t.getStructureByKey("DataSource");if(e.notNull(n)){var i=e.QFactory.createDataSource();e.QInADataSourceProperties.importQd(i,n);var a;var o=n.getStringByKey("Type");if(e.isNull(o)){a=e.MetaObjectType.DBVIEW}else{a=e.MetaObjectType.lookup(e.XString.toLowerCase(o))}i.setType(a);r.setDataSource(i)}},importJoinParameter:function(t,r){var n=t.getListByKey("JoinParameters");if(e.notNull(n)){var i=r.getJoinParameters();i.clear();var a=n.size();for(var o=0;o<a;o++){i.add(n.getStringAt(o))}}},checkIsValid:function(t,r){var n=r.getJoinType();if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing a JoinType"));return false}var i=r.getDimensionType();if(i.isTypeOf(e.DimensionType.GIS_DIMENSION)&&n.isTypeOf(e.JoinType._TIME)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false}else if((i.isTypeOf(e.DimensionType.TIME)||i.isTypeOf(e.DimensionType.DATE))&&n.isTypeOf(e.JoinType._SPATIAL)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false}var a=r.getDataSource();if(e.isNull(a)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing its DataSource"));return false}var o=r.getJoinParameters();if(n===e.JoinType.WITHIN_DISTANCE&&o.isEmpty()){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false}return true},exportQd:function(t,r,n,i){var a=r.getExtendedDimensions();if(e.XCollectionUtils.hasElements(a)){var o=n.putNewList("ExtendedDimensions");for(var s=0;s<a.size();s++){var l=a.get(s);if(!e.QInADataSourceExtDims.checkIsValid(t,l)){return}var u=o.addNewStructure();u.putString("Name",l.getName());u.putString("Description",l.getText());u.putInteger("DimensionType",e.QInAConverter.lookupDimensionTypeInA(l.getDimensionType()));u.putString("JoinFieldName",l.getJoinField());u.putString("JoinFieldNameInExtendedDimension",l.getJoinFieldNameExternal());u.putString("JoinType",l.getJoinType().getName());var p=l.getJoinCardinality();if(e.notNull(p)){u.putString("JoinCardinality",p.getName())}var g=r.getQueryManager();var c=null;if(e.notNull(g)){c=g.getModelCapabilities()}if(e.isNull(c)){c=t.capabilities}if(c.supportsDimensionVisibility()&&c.supportsExtendedDimensionVisibility()){var m=l.getVisibility();if(e.notNull(m)){u.putString("Visibility",m.getName())}}var y=l.getJoinParameters();if(y.hasElements()){var d=u.putNewList("JoinParameters");d.addAllStrings(y)}var A=l.getDataSource();var I=u.putNewStructure("DataSource");e.QInADataSourceProperties.exportQd(t,A,I,false,i);var S=A.getType();if(e.isNull(S)){I.putString("Type",e.MetaObjectType.DBVIEW.getCamelCaseName())}else{I.putString("Type",S.getCamelCaseName())}if(c.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){u.putStringNotNull("FieldRenamingMode",l.getRenamingMode())}}}}};e.QInADataSourceProperties={importQd:function(t,r){var n=r.getStringByKey("ObjectName");t.setName(n);var i=r.getStringByKey("Environment");t.setEnvironmentName(i);var a=r.getStringByKey("PackageName");t.setPackageName(a);var o=r.getStringByKey("SchemaName");t.setSchemaName(o);var s=r.getStringByKey("SourceQuery");t.setSourceQuery(s);var l=r.getStringByKey("AliasName");t.setAlias(l);var u=r.getStringByKey("DataArea");t.setDataArea(u);var p=r.getStringByKey("RunAsUser");t.setRunAsUser(p);var g=r.getStringByKey("Description");t.setText(g);var c=r.getStringByKey("Context");if(e.notNull(c)){t.setContextParameter(c)}var m=r.getStructureByKey("CustomProperties");if(e.notNull(m)){var y=m.getKeysAsReadOnlyListOfString();var d=y.size();for(var A=0;A<d;A++){var I=y.get(A);t.addCustomProperty(I,m.getStringByKey(I))}}},exportQd:function(t,r,n,i,a){e.QInAExportUtil.setNonEmptyString(n,"ObjectName",r.getObjectName());e.QInAExportUtil.setNonEmptyString(n,"Environment",r.getEnvironmentName());e.QInAExportUtil.setNonEmptyString(n,"PackageName",r.getPackageName());e.QInAExportUtil.setNonEmptyString(n,"SchemaName",r.getSchemaName());e.QInAExportUtil.setNonEmptyString(n,"AliasName",r.getAlias());e.QInAExportUtil.setNonEmptyString(n,"Context",r.getContextParameter());if(t.getSession().hasFeature(e.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)&&e.QInADataSourceProperties.exportSourceQuery(r,a)){e.QInAExportUtil.setNonEmptyString(n,"SourceQuery",r.getSourceQuery())}else{var o=r.getCustomProperties();var s=o.getKeysAsIteratorOfString();if(s.hasNext()){var l=n.putNewStructure("CustomProperties");while(s.hasNext()){var u=s.next();if(!e.XString.isEqual(u,e.QDataSource.SOURCE_QUERY_INA)||e.QInADataSourceProperties.exportSourceQuery(r,a)){e.QInAExportUtil.setNonEmptyString(l,u,o.getByKey(u))}}}}var p=r.getDataArea();if(!e.XString.isEqual(p,"DEFAULT")){e.QInAExportUtil.setNonEmptyString(n,"DataArea",p)}if(i){e.QInAExportUtil.setNonEmptyString(n,"RunAsUser",r.getRunAsUser())}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||t.mode.containsMetadata()){e.QInAExportUtil.setNonEmptyString(n,"Description",r.getText())}if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)||t.mode===e.QModelFormat.INA_VALUE_HELP){e.QInAExportUtil.setNonEmptyString(n,"InstanceId",r.getInstanceId());var g=r.getRriName();if(e.XStringUtils.isNotNullAndNotEmpty(g)){e.QInAExportUtil.setNonEmptyString(n,g,r.getRriValue())}}},exportSourceQuery:function(t,r){var n=false;var i=t.getContext();if(e.notNull(i)){var a=i.getQueryManager();if(e.notNull(a)){var o=a.getQueryServiceConfig();n=o.isSkipSourceQueryForNonMetadataRequests()}}return r||!n}};e.QInASpatialClustering={exportSpatialClusteringRequest:function(t,r){var n=e.PrFactory.createStructure();var i=n.putNewStructure("Analytics");var a=r.getClusterField();var o=a.getQueryModel();var s=t.exportDataSource(o.getDataSource(),false);i.put("DataSource",s);var l=t.exportDimension(a.getDimension(),null);l.putString("Axis",e.QInAConverter.lookupAxisTypeInA(e.AxisType.ROWS));var u=e.QInASpatialClustering.exportSpatialClusterSettings(r,o.getConvenienceCommands().isTypeOfBw());l.put("ClusterDefinition",u);var p=t.exportStructureDimension(o.getMeasureDimension());p.putString("Axis",e.QInAConverter.lookupAxisTypeInA(e.AxisType.COLUMNS));if(o.getConvenienceCommands().isTypeOfBw()){var g=e.PrFactory.createStructure();g.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(e.ResultVisibility.VISIBLE));var c=g.putNewStructure("MemberOperand");c.putString("AttributeName","Measures");c.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));c.putString("Value","1ROWCOUNT");var m=p.getListByKey("Members");m.clear();m.add(g)}var y=e.PrFactory.createList();y.add(l);y.add(p);var d=o.getAxis(e.AxisType.FREE);var A=d.size();for(var I=0;I<A;I++){var S=d.get(I);var f=S.getDimensionType();if(f.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)){y.add(t.exportDimension(S,null))}}var v=i.putNewStructure("Definition");v.put("Dimensions",y);t.exportFilter(o.getFilter(),v);if(o.getModelCapabilities().supportsConditions()&&o.getConditionManager().getEffectiveConditions().size()>0){t.exportConditionManager(o.getConditionManager(),v)}t.exportVariables(o.getVariableContainer(),v);v.put("ResultSetFeatureRequest",e.QInASpatialClustering.exportResultSetFeatures(o));return n},exportSpatialClusterSettings:function(t,r){var n=e.PrFactory.createStructure();n.putBoolean("Active",t.isActive());n.putString("ClusterAlgorithm",t.getClusterAlgorithm().getName());n.putString("GeometryAttribute",t.getClusterField().getName());var i=t.getThresholdNumberOfPoints();if(i!==-1){n.putInteger("ThresholdNumberOfPoints",i)}var a=n.putNewStructure("ClusterParameters");var o=t.getParameters();var s=o.getKeysAsIteratorOfString();while(s.hasNext()){var l=s.next();var u=o.getByKey(l);if(u.getValueType()===e.XValueType.INTEGER){a.putInteger(l,u.getInteger())}else if(u.getValueType()===e.XValueType.DOUBLE){a.putDouble(l,u.getDouble())}else{a.putString(l,u.toString())}}if(!r){var p=t.getDimensions();if(e.notNull(p)&&p.size()>0){var g=n.putNewList("Dimensions");for(var c=0;c<p.size();c++){g.addString(p.get(c))}}}return n},exportResultSetFeatures:function(t){var r=e.PrFactory.createStructure();r.putBoolean("UseDefaultAttributeKey",false);var n=t.getQueryManager();if(n.getMaxResultRecords()!==-1){r.putLong("MaxResultRecords",n.getMaxResultRecords())}e.QInAOptions.exportPaging(r,n);r.putString("ResultFormat","Version2");r.putString("ResultEncoding","None");return r}};e.QInAValueHelp={exportPlanningVariableHelpRequest:function(t,r,n,i){var a=r.getCommandForExport();var o=a.getStructureByKey("Planning");var s=o.getStructureByKey("Command").getStructureByKey("DataSource");var l=o.putNewStructure("Definition");e.QInAValueHelp.exportValueHelpFilters(t,l,n,r.getSelector(),true);var u=t.exportDimension(n,null);var p=l.putNewList("Dimensions");p.add(u);if(i.getHierarchyName()!==null){e.QInAValueHelp.exportVariableHierarchyInformation(u,l,i)}var g=l.putNewList("Variables");var c=g.addNewStructure();c.putString("Name",i.getName());var m=s.getStringByKey("Type");if(e.XString.isEqual(m,e.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())||e.XString.isEqual(m,e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())||e.XString.isEqual(m,e.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())||e.XString.isEqual(m,e.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName())){if(e.XString.isEqual(m,e.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())){s.putString("Type",e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())}else if(e.XString.isEqual(m,e.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())){s.putString("Type",e.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName())}var y=o.putNewStructure("ProcessingDirectives");y.putString("ProcessingStep","VariableDefinition");a.putNewList("Options").addString("StatefulServer")}else{l.putString("ValuehelpForVariable",i.getName());if(n.getReadMode(e.QContextType.SELECTOR)===e.QMemberReadMode.MASTER){l.putString("ReadMode","Master")}if(l.containsKey("FixedFilter")){l.remove("FixedFilter")}}return a},exportVariableHelpRequest:function(t,r,n,i){var a=e.QInAValueHelp.exportMemberHelpRequest(t,r,n,true);var o=a.getStructureByKey("Analytics");var s=o.getStructureByKey("DataSource");var l=o.getStructureByKey("Definition");var u=l.getListByKey("Dimensions").getStructureAt(0);if(i.getHierarchyName()!==null){e.QInAValueHelp.exportVariableHierarchyInformation(u,l,i)}var p=l.putNewList("Variables");var g=p.addNewStructure();g.putString("Name",i.getName());var c=s.getStringByKey("Type");if(e.XString.isEqual(c,e.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName())||e.XString.isEqual(c,e.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())||e.XString.isEqual(c,e.MetaObjectType.CDS_PROJECTION_VIEW_VALUEHELP.getCamelCaseName())){var m=o.putNewStructure("ProcessingDirectives");m.putString("ProcessingStep","VariableDefinition")}else{l.putString("ValuehelpForVariable",i.getName());t.exportVariables(r.getVariableContainer(),l);if(n.getReadMode(e.QContextType.SELECTOR)===e.QMemberReadMode.MASTER){l.putString("ReadMode","Master")}if(l.containsKey("FixedFilter")){l.remove("FixedFilter")}}return a},throwErrorForDependentVariable:function(t,r){var n=e.XStringBuffer.create();n.append("The dependent variable '");n.append(r.getName());n.append("' of the variable '");n.append(t.getName());n.append("' has no value set.");throw e.XException.createIllegalStateException(n.toString())},exportVariableHierarchyInformation:function(t,r,n){var i=t.putNewStructure("Hierarchy");if(n.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE){i.putStringNotNullAndNotEmpty("Name",n.getHierarchyName());i.putStringNotNullAndNotEmpty("DueDate",n.getHierarchyKeyDate());i.putStringNotNullAndNotEmpty("Version",n.getHierarchyVersion());i.putInteger("InitialDrillLevel",n.getDimension().getSelectorRootLevel());if(e.XStringUtils.isNotNullAndNotEmpty(n.getHierarchyName())){e.QInAValueHelp.addVariableHierarchyToFilters(n,e.PrUtils.getStructureProperty(r.getStructureByKey("Filter"),"Selection"));e.QInAValueHelp.addVariableHierarchyToFilters(n,e.PrUtils.getStructureProperty(r.getStructureByKey("VisibilityFilter"),"Selection"))}}else{var a=n.getDependentVariables();var o=a.getIterator();while(o.hasNext()){var s=o.next();if(s.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE){var l=s;var u=l.getValueByString();if(e.XStringUtils.isNullOrEmpty(u)){e.QInAValueHelp.throwErrorForDependentVariable(n,l)}i.putString("Name",u)}else if(s.getVariableType()===e.VariableType.DIMENSION_MEMBER_VARIABLE){var p=s;var g=p.getValueByString();if(e.XStringUtils.isNullOrEmpty(g)){e.QInAValueHelp.throwErrorForDependentVariable(n,p)}if(p.getDimension().getDimensionType()===e.DimensionType.DATE){i.putStringNotNullAndNotEmpty("DateTo",g)}else{i.putStringNotNullAndNotEmpty("Version",g)}}}e.XObjectExt.release(o);i.putInteger("InitialDrillLevel",n.getDimension().getSelectorRootLevel())}},addVariableHierarchyToFilters:function(t,r){var n=t.getDimension();var i=e.PrUtils.getStructureProperty(r,"Operator");var a=e.PrUtils.getListProperty(i,"SubSelections");for(var o=0;o<e.PrUtils.getListSize(a,0);o++){var s=a.getStructureAt(o);if(s.containsKey("SetOperand")){var l=e.PrUtils.getStructureProperty(s,"SetOperand");var u=n.getFieldByName(l.getStringByKey("FieldName"));if(e.notNull(u)&&(u===n.getHierarchyKeyField()||u===n.getHierarchyDisplayKeyField()||u===n.getHierarchyTextField())){l.putNewStructure("Hierarchy").putString("Name",t.getHierarchyName())}}else if(s.containsKey("Operator")){e.QInAValueHelp.addVariableHierarchyToFilters(t,s)}}},exportMemberHelpRequest:function(t,r,n,i){if(e.isNull(r)||e.isNull(n)){return null}var a=e.PrFactory.createStructure();var o=r.getSession();if(o.hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){e.QInAClientInfo.exportClientInfo(a,r,r.getModelCapabilities().supportsClientInfo())}var s=a.putNewStructure("Analytics");e.QInADataSource.exportDataSource(t,r.getDataSource(),false,s,false);var l=e.PrFactory.createList();l.add(t.exportDimension(n,null));var u=s.putNewStructure("Definition");u.put("Dimensions",l);t.exportVariables(r.getVariableContainer(),u);var p=r.getFilter();e.QInAValueHelp.exportValueHelpFilters(t,u,n,p,i);return a},exportValueHelpFilters:function(t,r,n,i,a){t.exportFixedFilter(i,r);var o=i.getModelCapabilities();if(n.getSelectorFilterUsage()===e.QueryFilterUsage.SELECTOR_FILTER&&e.notNull(o)&&o.supportsVisibilityFilter()){t.exportVisibilityFilter(i,r)}e.QInAValueHelp.setOptionsVh(t,r,n,a);if(t.capabilities.supportsExtendedSort()){e.QInAValueHelp.exportExtendedSortVh(r,n)}var s=n.getSelectorFilterUsage()!==e.QueryFilterUsage.SELECTOR_FILTER||!i.isValueHelpFilterInitialized();var l=e.QInAValueHelpFilter.getValueHelpFilter(n,i);var u=null;var p=null;if(n.isSelectorHierarchyActive()){var g=n.getSelectorHierarchyNode();var c=n.getSelectorHierarchyNodeName();var m=n.getSelectorHierarchyNodeSid();if(n.isSelectorUseQueryDrillOperations()){t.exportDrillManager(n.getDrillManager(),r)}else if(e.notNull(g)){var y=n.getHierarchyNavigationField();var d=r.putNewList("HierarchyNavigations");var A=n.getNavigationNodes().getIterator();while(A.hasNext()){var I=A.next().getDimensionMember();var S=I.getFieldValue(y);if(e.isNull(S)){S=I.getKeyFieldValue()}e.QInAValueHelp._addHierarchyNavigation(d,n.getName(),S.getField().getName(),S.getString())}e.XObjectExt.release(A);u=g.getName()}else if(e.XStringUtils.isNotNullAndNotEmpty(m)){e.QInAValueHelp._addHierarchyNavigation(r.putNewList("HierarchyNavigations"),n.getName(),n.getHierarchyNavigationField().getName(),m)}else if(e.XStringUtils.isNotNullAndNotEmpty(c)){e.QInAValueHelp._addHierarchyNavigation(r.putNewList("HierarchyNavigations"),n.getName(),n.getSelectorKeyField().getName(),c);u=c}if(s&&e.notNull(l)&&e.notNull(u)){p=l.addSingleMemberFilterByDimension(n,u,e.ComparisonOperator.EQUAL)}}if(e.notNull(l)){var f=n.getQueryModel()!==null?t.exportValueHelpFilter(n,r):t.exportFilterExpression(l);r.putIfNotNull("Filter",f);if(s&&e.notNull(p)){var v=l.getComplexRoot();if(e.notNull(v)){v.removeElement(p)}else{var C=l.getCartesianProduct();if(e.notNull(C)){C.removeElement(p)}}}}},_addHierarchyNavigation:function(t,r,n,i){var a=t.addNewStructure();a.putString("DrillState",e.QInAConverter.lookupDrillStateInA(e.DrillState.EXPANDED));var o=a.putNewStructure("DrillMember");o.putString("DimensionName",r);o.putString("FieldName",n);o.putString("Member",i)},exportExtendedSortVh:function(t,r){var n=t.putNewList("Sort");var i=n.addNewStructure();i.putString("Dimension",r.getName());i.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(r.getSelectorOrder()));var a=r.getSelectorSortType();if(e.notNull(a)){i.putString("SortType",e.QInAConverter.lookupSortTypeInA(a))}else{i.putString("SortType","MemberKey")}},setOptionsVh:function(t,r,n,i){var a=r.putNewStructure("ResultSetFeatureRequest");a.putBoolean("UseDefaultAttributeKey",false);if(n.isSelectorGettingInterval()&&t.capabilities.supportsResultSetInterval()){a.putBoolean("Interval",true)}a.putString("ResultFormat","Version2");a.putString("ResultEncoding","None");var o=n.getQueryModel();if(e.notNull(o)){var s=n.getQueryManager();var l=o.getModelCapabilities();if(l.supportsAutoVariableSubmit()){if(s.getSession().hasFeature(e.FeatureToggleOlap.PREREQUISITE_FOR_AUTO_SUBMIT_AFTER_SUBMITTED)){var u=!i&&e.QInAValueHelp.isExecuteAutoSubmitForValueHelp(s);a.putBoolean("IgnoreAutoSubmit",!u)}else{a.putBoolean("IgnoreAutoSubmit",!s.getInitSettings().isEnableAutoVariableSubmit())}}if(l.supportsCellDocumentId()){a.putBoolean("ReturnDocumentIds",false)}if(l.supportsKeepOriginalTexts()){a.putBoolean("ResultKeepOriginalTexts",o.isKeepingOriginalTexts())}if(o.isValueHelpIgnoreQueryDynamicFilter()){a.putBoolean("ValueHelpIgnoreQueryDynFilter",true)}if(o.isValueHelpUseCompleteEffectiveFilter()){a.putBoolean("ValueHelpUseCompleteEffectiveFilter",true)}}if(n.getSelectorMaxResultRecords()!==-1){a.putLong("MaxResultRecords",n.getSelectorMaxResultRecords())}var p=a.putNewStructure("SubSetDescription");p.putInteger("RowFrom",n.getSelectorPagingStart());p.putInteger("RowTo",n.getSelectorPagingEnd())},isExecuteAutoSubmitForValueHelp:function(t){return t.hasVariables()&&t.getVariableProcessorState()!==e.VariableProcessorState.SUBMITTED&&t.isExecuteAutoVariableSubmit()&&!t.isProcessingAutoSubmit()},exportResultSetRequest:function(t,r,n,i,a){var o=t.exportQueryModel(n,i,a);var s=r.getDimension();var l=r.isIncludeMeasures();var u=false;var p=o.getListByKey("Dimensions");for(var g=p.size()-1;g>=0;g--){var c=p.getStructureAt(g);var m=e.XString.isEqual(c.getStringByKey("Axis"),"Free");var y=n.getDimensionByName(c.getStringByKey("Name"));if(e.notNull(y)){if(y===s){u=true;if(m){c.putString("Axis","Rows")}}else if(!m&&(!y.isStructure()||!l)){if(e.QInAValueHelp.dimensionRequiredOnFreeAxis(y)){c.putString("Axis","Free")}else{p.removeAt(g)}}}}if(!u){var d=t.exportDimension(s,p.addNewStructure());d.putString("Axis","Rows")}return o},dimensionRequiredOnFreeAxis:function(t){var r=t.getQueryModel();if(t.getSupportedAxesTypes().contains(e.AxisType.FREE)){var n=t.getDimensionType();if(n===e.DimensionType.MEASURE_STRUCTURE||n===e.DimensionType.SECONDARY_STRUCTURE){return e.QInAValueHelp.getDimensionsUsedInFilter(r).contains(t.getName())||e.XCollectionUtils.hasElements(r.getExceptionManager())}else if(n===e.DimensionType.ACCOUNT){return e.QInAValueHelp.getDimensionsUsedInFilter(r).contains(t.getName())}else{return n===e.DimensionType.CALCULATED_DIMENSION}}return false},getDimensionsUsedInFilter:function(t){var r=e.XHashSetOfString.create();e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(t.getFilter().getDynamicFilter(),r);return r}};e.QInADocumentsIds={exportDocumentsIds:function(t,r){var n=r.getActiveResultSetContainer();if(e.isNull(n)){return}if(!n.hasDocumentIdCollection()){return}var i=n.getDocumentIdCollection();var a=i.getValidDocumentIds();if(e.isNull(a)){return}if(r.getSystemType().isTypeOf(e.SystemType.BW)){e.QInADocumentsIds.exportDocumentsIdsBw(t,a)}},exportDocumentsIdsBw:function(t,r){var n=t.putNewList("DocumentsIds");for(var i=0;i<r.size();i++){var a=n.addNewStructure();var o=a.putNewList("DimensionContext");var s=r.get(i);var l=s.getDimensionMembers();for(var u=0;u<l.size();u++){var p=l.get(u);var g=p.getKeyFieldValue();var c=o.addNewStructure();c.putString("FieldName",g.getField().getName());c.putString("Value",g.getValue().getStringRepresentation())}var m=a.putNewList("CellContext");for(var y=0;y<s.getDocumentIdActions().size();y++){var d=m.addNewStructure();var A=s.getDocumentIdActions().get(y);d.putString("QueryCellsId",A.getQueryDataCell().getName());d.putStringNotNullAndNotEmpty("Action",e.QInAConverter.lookupDocumentsIdsActionInA(A.getAction()))}}}};e.QInAExpand={createExpandSubmit:function(t,r){if(r){return e.PrFactory.createString("#")}var n=null;var i=t.getInitSettings();if(i.isRequestingMinimizedAttributes()||!i.isRequestingDefaultSettings()){n=e.PrFactory.createList();if(i.isRequestingMinimizedAttributes()){if(t.getModelCapabilities().supportsDetailedResponseExpansion()){n.addString("Cube")}n.addString("MinimizedAttributes")}if(!i.isRequestingDefaultSettings()){return e.QInAExpand._exportExpandSelection(n,i,t)}}return n},createExpandMetadata:function(t){var r=e.PrFactory.createList();var n=t.getInitSettings();if(n.isRequestingMinimizedAttributes()){r.addString("MinimizedAttributes")}if(!t.getCapabilitiesBase().supportsDetailedResponseExpansion()||n.isRequestingDefaultSettings()){r.addString("Cube");return r}return e.QInAExpand._exportExpandSelection(r,n,t)},_exportExpandSelection:function(t,r,n){var i=n.getQueryServiceConfig();if(i.getMinimizedMetadata()&&!e.XCollectionUtils.hasElements(i.getRequiredDimensions())){return e.PrFactory.createString("#")}e.QInAExpand._exportExpandDimensionSelection(t,i);e.QInAExpand._exportExpandFlagSelection(t,r);return t},_exportExpandDimensionSelection:function(t,r){var n=r.getRequiredDimensions();var i=r.getDimensionsOnAxes();if(e.XCollectionUtils.hasElements(n)){e.QInAExpand._addExpandFromList("Dimensions?Name=",n,t)}else if(e.XCollectionUtils.hasElements(i)){e.QInAExpand._addExpandFromList("Axis?Name=",i,t)}else{t.addString("Dimensions")}},_addExpandFromList:function(t,r,n){var i=e.XListOfString.createFromReadOnlyList(r);i.sortByDirection(e.XSortDirection.ASCENDING);var a=i.getIterator();while(a.hasNext()){n.addString(e.XStringUtils.concatenate2(t,a.next()))}},_exportExpandFlagSelection:function(e,t){if(t.isRequestingVariables()){e.addString("Variables")}if(t.isRequestingSorting()){e.addString("Sort")}if(t.isRequestingDynamicFilter()){e.addString("DynamicFilter")}if(t.isRequestingDataCells()){e.addString("QueryDataCells")}if(t.isRequestingUniversalDisplayHierarchies()){e.addString("UniversalDisplayHierarchies")}if(t.isRequestingConditions()){e.addString("Conditions")}if(t.isRequestingExceptions()){e.addString("Exceptions")}}};e.QInANewLines={exportNewLines:function(t,r){var n=r.getActiveResultSetContainer();if(e.isNull(n)){return}if(!n.hasNewLineCollection()){return}var i=n.getNewLineCollection();var a=i.getValidNewLines();if(e.isNull(a)){return}if(r.getSystemType().isTypeOf(e.SystemType.BW)){e.QInANewLines.exportNewLinesBw(t,a)}else{e.QInANewLines.exportNewLinesHana(t,a)}},exportNewLinesBw:function(t,r){var n=t.putNewList("NewLines");for(var i=0;i<r.size();i++){var a=n.addNewStructure();var o=a.putNewList("DimensionContext");var s=r.get(i);var l=s.getDimensionMembers();for(var u=0;u<l.size();u++){var p=l.get(u);var g=p.getKeyFieldValue();var c=o.addNewStructure();c.putString("FieldName",g.getField().getName());c.putString("Value",g.getValue().getStringRepresentation())}var m=a.putNewList("CellValues");for(var y=0;y<s.getNewLineEntries().size();y++){var d=m.addNewStructure();var A=s.getNewLineEntries().get(y);d.putString("QueryCellsId",A.getQueryDataCell().getName());var I=A.getNewXValue();if(I.getValueType()===e.XValueType.DOUBLE){d.putDouble("Value",I.getDouble())}else if(I.getValueType()===e.XValueType.STRING){d.putString("Value",I.getString())}}}},exportNewLinesHana:function(t,r){var n=t.putNewStructure("DataEntries");var i=n.putNewList("DimensionContext");var a=r.get(0).getDimensionMembers();var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);i.addString(l.getDimension().getName())}var u=n.putNewList("Values");var p=r.size();for(var g=0;g<p;g++){var c=u.addNewStructure();var m=r.get(g);c.putString("Action","NewLine");c.putInteger("LineId",m.getLineId());var y=c.putNewList("Keys");e.QInANewLines.addDimensionMemberKeys(y,m.getDimensionMembers());var d=c.putNewList("CellValues");e.QInANewLines.addCellValues(m,d)}},addDimensionMemberKeys:function(e,t){var r=t.size();for(var n=0;n<r;n++){var i=t.get(n);e.addString(i.getKeyFieldValue().getString())}},addCellValues:function(t,r){var n=t.getNewLineEntries();var i=n.size();for(var a=0;a<i;a++){var o=n.get(a);if(!o.isValueChanged()){continue}var s=e.PrFactory.createStructure();s.putString("QueryDataCell",o.getQueryDataCell().getName());var l=o.getNewXValue();var u=l.getValueType();if(u===e.XValueType.DOUBLE){s.putDouble("NewValue",l.getDouble())}else if(u===e.XValueType.STRING){s.putString("NewValueExternal",l.getString())}else{e.noSupport()}r.add(s)}}};e.QInANewValues={exportNewValues:function(t,r,n){var i=n.getActiveResultSetContainer();if(e.isNull(i)){return}if(!i.hasDataEntryCollection()){return}var a=e.PrFactory.createList();var o=i.getDataEntryCollection();e.QInANewValues.exportRsDataEntries(a,o,n);e.QInANewValues.exportRsDataEntriesViaMember(a,o,n);if(a.isEmpty()){return}t.put("NewValues",a);e.QInANewValues.exportPublicVersionEdit(r,n)},exportPublicVersionEdit:function(t,r){if(r.getPlanningMode()!==e.PlanningMode.FORCE_PLANNING){return}var n=r.getPlanningModel();if(e.isNull(n)||!n.supportsPublicVersionEdit()||!n.isPublicVersionEditInProgress()){return}var i=t.putNewList("RefreshVersionStates");var a=n.getVersions();var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);var u=l.getSourceVersionName();if(l.isShowingAsPublicVersion()&&e.XStringUtils.isNotNullAndNotEmpty(u)){i.addString(u);l.setShowingAsPublicVersion(false);l.setSourceVersionName(null)}}n.setPublicVersionEditInProgress(false)},exportRsDataEntries:function(t,r,n){var i=r.getChangedDataEntries();if(i.isEmpty()){return}var a=n.getCapabilitiesBase().supportsNewValuesImplicitUnlock();var o=n.getCapabilitiesBase().supportsNewValuesExtendedFormat();var s=n.getSystemType().isTypeOf(e.SystemType.BW);var l=n.getSystemType().isTypeOf(e.SystemType.HANA);var u=i.size();for(var p=0;p<u;p++){var g=i.get(p);if(!g.isNewValueForced()&&!g.isValueChanged()&&!g.isValueLockChanged()){if(l&&g.getPlanningCommand()===null){continue}else if(s&&o){continue}}if(!o&&a&&!g.isNewValueForced()&&!g.isValueChanged()&&!g.isValueLocked()){continue}if(s&&!o){e.QInANewValues.exportValuesAbapNotExtended(g,t)}else if(l||s&&o){e.QInANewValues.exportValues(g,t,n)}}},exportRsDataEntriesViaMember:function(t,r,n){var i=r.getDataEntriesViaMember();if(i.isEmpty()){return}for(var a=0;a<i.size();a++){var o=i.get(a);var s=o.getPlanningCommands();var l=o.getXValue();var u=o.getMemberContext();var p=u.getKeysAsReadOnlyListOfString();p.sortByDirection(e.XSortDirection.ASCENDING);if(!e.XCollectionUtils.hasElements(s)){e.QInANewValues.exportRsValueInfoViaMember(t,l,p,u,o,null,n)}else{for(var g=0;g<s.size();g++){e.QInANewValues.exportRsValueInfoViaMember(t,l,p,u,o,s.get(g),n)}}}},exportRsValueInfoViaMember:function(t,r,n,i,a,o,s){var l=e.PrFactory.createStructure();if(r.getValueType()===e.XValueType.STRING){l.putString("NewValue",r.getString())}else if(r.getValueType()===e.XValueType.DOUBLE){l.putDouble("NewValue",r.getDouble())}else{return}var u=l.putNewList("Context");for(var p=0;p<n.size();p++){var g=n.get(p);var c=i.getByKey(g);var m=s.getConvenienceCommands().getRuntimeMemberNameByAlias(s.getQueryModel(),c);if(e.notNull(m)){c=m}var y=u.addNewStructure();y.putString("Dimension",g);y.putString("Member",c)}e.QInANewValues.exportValueInfo(l,a,o,s);t.add(l)},exportValuesAbapNotExtended:function(e,t){var r=t.addNewList();r.addInteger(e.getRow()+1);r.addInteger(e.getColumn()+1);r.addDouble(e.getDouble());if(e.isValueLocked()){r.addInteger(1)}else{r.addInteger(0)}},exportValues:function(t,r,n){var i=t.getPlanningCommands();var a=null;if(e.XCollectionUtils.hasElements(i)){for(var o=0;o<i.size();o++){a=e.QInANewValues.exportValuesOfAction(t,r,i.get(o),n)}}if(e.isNull(a)||!a.isTypeOf(e.PlanningActionType.DATA_ENTRY)&&(t.isValueChanged()||t.isNewValueForced())){e.QInANewValues.exportValuesOfAction(t,r,null,n)}},exportValuesOfAction:function(t,r,n,i){var a=r.addNewStructure();var o=a.putNewList("Coordinates");o.addInteger(t.getRow());o.addInteger(t.getColumn());var s=i.getSystemType().isTypeOf(e.SystemType.BW);var l=i.getSystemType().isTypeOf(e.SystemType.HANA);var u=e.QInANewValues.exportValueInfo(a,t,n,i);if((e.isNull(u)||u.isTypeOf(e.PlanningActionType.DATA_ENTRY))&&(t.isValueChanged()||t.isNewValueForced())){var p=t.getXValue();var g=p.getValueType();if(g===e.XValueType.DOUBLE){a.putDouble("NewValue",p.getDouble())}else if(g===e.XValueType.STRING){if(l){a.putString("NewValueAsString",p.getString())}else if(s){a.putString("NewValueExternal",p.getString())}}else if(g===e.XValueType.DATE&&s){a.putString("NewValueExternal",p.toSAPFormat())}else{e.noSupport()}if(t.isNewValueForced()&&l&&!i.getCapabilitiesBase().supportsSortNewValues()){a.putBoolean("KeepValue",true)}var c=t.getDataEntryGroup();if(e.isNull(u)&&e.XStringUtils.isNotNullAndNotEmpty(c)){a.putString("Group",c)}}return u},exportValueInfo:function(t,r,n,i){if(r.isValueLockChanged()){t.putBoolean("LockedCell",r.isValueLocked())}if(i.getCapabilitiesBase().supportsSortNewValues()){t.putInteger("Priority",r.getPriority())}e.QInAExportUtil.setNameIfNotNull(t,"ProcessingType",r.getProcessingType());if(e.notNull(n)&&n.getCommandType()===e.PlanningCommandType.PLANNING_ACTION){var a=n;t.putString("ActionId",a.getActionForQueryIdentifier().getActionId());var o=a.getActionGroup();if(e.XStringUtils.isNotNullAndNotEmpty(o)){t.putString("Group",o)}var s=e.PrFactory.createStructureDeepCopy(a.getActionParameters());if(e.notNull(s)){t.put("ActionParameters",s)}if(a.hasTargetCell()){var l=t.putNewList("TargetCoordinates");l.addInteger(a.getTargetRow());l.addInteger(a.getTargetColumn())}if(a.getActionForQueryIdentifier().getActionType().isTypeOf(e.PlanningActionType.QUERY_SINGLE)){var u=a.getTargetVersionId();if(e.XStringUtils.isNotNullAndNotEmpty(u)){t.putString("TargetVersionId",u)}}return a.getActionForQueryIdentifier().getActionType()}return null}};e.QInAOptions={exportOptions:function(t){var r=e.PrFactory.createStructure();r.putBoolean("UseDefaultAttributeKey",false);var n=t.getActiveResultSetContainer();if(n.getMaxResultRecords()!==-1){r.putLong("MaxResultRecords",n.getMaxResultRecords())}var i=n.getDataRefreshEnabled();if(i===e.ActionChoice.ON||i===e.ActionChoice.ONCE){r.putBoolean("Refresh",true)}var a=false;if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceTable())){r.putString("ResultSetPersistanceTable",n.getResultSetPersistenceTable());if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceSchema())){r.putString("ResultSetPersistanceSchema",n.getResultSetPersistenceSchema());a=true}}if(!n.isResultSetTransportEnabled()){r.putBoolean("ReturnEmptyJsonResultSet",true)}e.QInAOptions.exportPaging(r,t);e.QInAOptions.exportSuppressKeyfigureCalculation(r,t);if(t.getExecuteRequestOnOldResultSet()){r.putBoolean("ExecuteRequestOnOldResultSet",true)}if(t.isIncludePerformanceNotDefault()){r.putBoolean("IncludePerformanceData",t.isRequestingPerformanceData())}var o=t.getCapabilitiesBase();if(o.supportsAutoVariableSubmit()){if(t.getSession().hasFeature(e.FeatureToggleOlap.PREREQUISITE_FOR_AUTO_SUBMIT_AFTER_SUBMITTED)){r.putBoolean("IgnoreAutoSubmit",!t.isProcessingAutoSubmit())}else{r.putBoolean("IgnoreAutoSubmit",!t.getInitSettings().isEnableAutoVariableSubmit())}}if(o.supportsExceptionThresholdNoPrec()){r.putBoolean("ResultExceptionThresholdNoPrec",true)}if(o.supportsDataCellContexts()&&t.getInitSettings().isSkipResultSetGeneration()){r.putBoolean("SkipResultSetGeneration",true)}var s=t.getQueryModel();if(o.supportsCellDocumentId()){var l=s.getDocumentsIdsRequest();if(l.getDocumentsIdsScope()!==null&&l.getDocumentsIdsScope()!==e.DocumentsIdsScope.NONE){var u=r.putNewStructure("DocumentsIdsRequest");u.putStringNotNullAndNotEmpty("DocumentsDirectory",l.getDocumentsDirectory());u.putStringNotNullAndNotEmpty("ReturnDocumentsIds",e.QInAConverter.lookupDocumentsIdsScopeInA(l.getDocumentsIdsScope()))}}if(o.supportsPagingTupleCountBeforeSlicing()){r.putBoolean("TupleCountTotal",s.isReturnTupleCountTotal())}if(o.supportsEncodedResultset()){r.putString("ResultFormat","Version2");r.putString("ResultEncoding","None");if(n.getResultSetPersistenceIdentifier()!==null){var p=!n.isRemotePreQuery();if(p){r.putBoolean("IsCubeBlendingSubquery",true)}if(a){r.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier());r.putString("ResultFormat","SerializedData")}else if(e.QInAOptions.isCubeCacheQuery(s)){r.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier())}else{r.putString("ResultFormat","SerializedData")}if(t.getSystemType().isTypeOf(e.SystemType.BW)){if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.VIEW){r.putString("ResultSetPersistanceType","View")}else if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.CUBE){r.putString("ResultSetPersistanceType","Cube")}}}}if(e.notNull(s)&&o.supportsKeepOriginalTexts()){r.putBoolean("ResultKeepOriginalTexts",s.isKeepingOriginalTexts())}if(n.getSuppressCalculatedMembersWithoutBookedData()!==-1){r.putInteger("SuppressCalculatedMembersWithoutBookedData",n.getSuppressCalculatedMembersWithoutBookedData())}return r},isCubeCacheQuery:function(t){var r=t.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS);return e.notNull(r)&&r.containsKey(e.OptimizerHint.CUBE_CACHE_WITH_ID.getName())},fillOptions:function(t,r,n,i){var a=e.PrFactory.createList();if(r.supportsServerState()){a.addString("StatefulServer")}if(i.isLightweight()&&!r.supportsMetadataResultFormatOptions()){a.addString("Lightweight")}var o=i.getServerCustomizations();a.addAllStrings(o.getValuesAsReadOnlyListOfString());if(n.hasFeature(e.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||a.hasElements()){t.put("Options",a)}},setRequestTimeZone:function(t,r){if(e.notNull(t)&&r.getModelCapabilities().supportsRequestTimezone()){t.putStringNotNullAndNotEmpty("Timezone",r.getQueryServiceConfig().getRequestTimeZone())}},setLanguage:function(t,r){var n=r.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.putString("Language",n)}},importReturnedDataSelections:function(t,r){if(e.notNull(t)){if(r.supportsReturnedDataSelection()){var n=t.getStructureByKey("ReturnedDataSelection");if(e.notNull(n)&&n.hasElements()){var i=n.getKeysAsReadOnlyListOfString();var a=i.size();for(var o=0;o<a;o++){var s=e.QInAConverter.lookupReturnedDataSelection(i.get(o));if(e.notNull(s)){var l=r.getQueryModel();if(s===e.ReturnedDataSelection.TUPLE_ELEMENT_IDS){l.toggleReturnedDataSelection(s,true);continue}l.toggleReturnedDataSelection(s,n.getBooleanByKeyExt(s.getName(),false))}}}}}},exportReturnedDataSelections:function(t,r){var n=r.getQueryModel();if(r.supportsReturnedDataSelection()){var i=t.putNewStructure("ReturnedDataSelection");if(e.notNull(n)){var a=n.getAllReturnedDataSelections();var o=a.getKeysAsIterator();while(o.hasNext()){var s=o.next();if(s===e.ReturnedDataSelection.ACTIONS&&r.getModelCapabilities().supportsNoDataActions()){continue}i.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(s),a.getByKey(s).getBoolean())}}}},importOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){r.getQueryModel().clearAllOptimizerHints();var n=t.getStructureByKey("Hints");if(e.notNull(n)){e.QInAOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.CALC_ENGINE,r);e.QInAOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.MDS,r);e.QInAOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.SQL,r)}}},importOptimizerHintsByEngine:function(t,r,n){var i=n.getQueryModel();var a=t.getListByKey(r.getName());if(e.notNull(a)){var o=a.size();for(var s=0;s<o;s++){var l=a.getStructureAt(s);var u=l.getStringByKey("Key");var p=l.getStringByKey("Value");i.addOptimizerHint(r,u,p)}}},exportOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){var n=e.PrFactory.createStructure();e.QInAOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.CALC_ENGINE);e.QInAOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.MDS);e.QInAOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.SQL);if(n.hasElements()){t.put("Hints",n)}}},exportOptimizerHintsByEngine:function(t,r,n){var i=r.getOptimizerHintsByExecutionEngine(n);if(e.notNull(i)&&i.hasElements()){var a=i.getKeysAsReadOnlyListOfString();a.sortByDirection(e.XSortDirection.ASCENDING);var o=t.putNewList(n.getName());var s=a.size();for(var l=0;l<s;l++){var u=a.get(l);var p=o.addNewStructure();p.putString("Key",u);p.putString("Value",i.getByKey(u))}}},importSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)&&t.containsKey("SuppressKeyfigureCalculation")){e.QInAOptions.getPagingSetter(r).setSuppressKeyfigureCalculation(t.getBooleanByKeyExt("SuppressKeyfigureCalculation",false))}},exportSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)&&r.isKeyfigureCalculationSuppressed()){t.putBoolean("SuppressKeyfigureCalculation",true)}},getPagingSetter:function(e){var t=e;if(e.isShallow()){t=e.getActiveResultSetContainer()}return t},importPaging:function(t,r){if(e.notNull(t)){var n=t.getStructureByKey("SubSetDescription");if(e.isNull(n)||!r.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!r.isApplyingRepoState()){return}var i=n.getIntegerByKey("RowFrom");var a=e.QInAOptions.getPagingSetter(r);if(i>-1){a.setOffsetRows(i);a.setMaxRows(n.getIntegerByKey("RowTo")-i)}else{a.setMaxRows(n.getIntegerByKey("RowTo"))}var o=n.getIntegerByKey("ColumnFrom");if(o>-1){a.setOffsetColumns(o);a.setMaxColumns(n.getIntegerByKey("ColumnTo")-o)}else{a.setMaxColumns(n.getIntegerByKey("ColumnTo"))}}},exportPaging:function(e,t){var r=t.getActiveResultSetContainer();var n=e.putNewStructure("SubSetDescription");var i=r.getMaxRows();var a=r.getOffsetRows();n.putInteger("RowFrom",a);if(i===-1){n.putInteger("RowTo",-1)}else{n.putInteger("RowTo",a+i)}var o=r.getMaxColumns();var s=r.getOffsetColumns();n.putInteger("ColumnFrom",s);if(o===-1){n.putInteger("ColumnTo",-1)}else{n.putInteger("ColumnTo",s+o)}}};e.QInAVariableVariants={exportVariableVariant:function(t,r){if(e.notNull(r)){var n=t.putNewStructure("VariableVariant");n.putStringNotNullAndNotEmpty("Name",r.getName());n.putString("Description",r.getText());n.putString("Scope",r.getScope().getName())}}};e.QInAVersion={exportPlanningVersions:function(t,r){e.QInAVersion.exportPlanningVersionRestriction(t,r);e.QInAVersion.exportPlanningVersionSettings(t,r);e.QInAVersion.exportPlanningVersionAliases(t,r)},exportPlanningVersionSettings:function(t,r){var n=e.QInAVersion.getAllPlanningActionSequenceSettingsEffective(r);if(e.isNull(n)){return}var i=null;var a=e.QInAVersion.getPlanningVersionRestrictionEffective(r);var o=n.size();for(var s=0;s<o;s++){var l=n.get(s);var u=l.getActionSequenceId()!==null;if(!u){if(!a.isExplicitlyRestricted()){continue}if(!l.getIsRestrictionEnabled()){continue}}if(e.isNull(i)){i=t.putNewList("Versions")}var p=i.addNewStructure();p.putBoolean("UseExternalView",l.getUseExternalView());var g=l.getVersionId();if(g===-1){p.putString("Version",l.getVersionUniqueName())}else{p.putInteger("Version",g)}if(u){p.putString("SequenceId",l.getActionSequenceId())}if(l.isSharedVersion()){p.putString("Owner",l.getVersionOwner())}}},getPlanningActionSequenceSettingsModeEffective:function(t){if(!t.isDataEntryEnabled()){return null}var r=t.getSystemType();if(!r.isTypeOf(e.SystemType.HANA)){return null}var n=t.getPlanningVersionSettingsMode();if(n===e.PlanningVersionSettingsMode.SERVER_DEFAULT){return null}return n},getAllPlanningActionSequenceSettingsEffective:function(t){var r=e.QInAVersion.getPlanningActionSequenceSettingsModeEffective(t);if(e.isNull(r)){return null}var n=null;if(r===e.PlanningVersionSettingsMode.PLANNING_SERVICE){var i=e.PlanningModelUtil.getPlanningServiceFromQueryDataSource(t.getApplication(),t.getSystemName(),t.getDataSource());if(e.notNull(i)){var a=i.getPlanningContext();var o=a.getAllVersions();if(e.XCollectionUtils.hasElements(o)){var s=e.XList.create();var l=o.size();for(var u=0;u<l;u++){var p=o.get(u);s.add(p)}n=s}}}else if(r===e.PlanningVersionSettingsMode.QUERY_SERVICE){n=t.getAllPlanningVersionSettings()}if(!e.XCollectionUtils.hasElements(n)){return null}var g=e.XHashMapByString.create();var c=n.size();for(var m=0;m<c;m++){var y=n.get(m);g.put(y.getVersionUniqueName(),y.createVersionSettings())}if(!e.XCollectionUtils.hasElements(g)){return null}var d=e.XListOfString.createFromReadOnlyList(g.getKeysAsReadOnlyListOfString());d.sortByDirection(e.XSortDirection.ASCENDING);var A=e.XList.create();var I=d.size();for(var S=0;S<I;S++){A.add(g.getByKey(d.get(S)))}return A},exportPlanningVersionAliases:function(t,r){var n=r.getVersionAliases();if(!e.XCollectionUtils.hasElements(n)){return}var i=t.putNewList("AliasMapping");var a=n.getKeysAsReadOnlyListOfString();a.sortByDirection(e.XSortDirection.ASCENDING);var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);var u=n.getByKey(l);var p=e.PrFactory.createStructure();p.putString("Alias",l);p.putString("Version",u);i.add(p)}},exportPlanningVersionRestriction:function(t,r){var n=e.QInAVersion.getPlanningVersionRestrictionEffective(r);if(n===e.PlanningVersionRestrictionType.SERVER_DEFAULT){return}if(n===e.PlanningVersionRestrictionType.CONSTRAIN_PRIVATE_VERSIONS){t.putBoolean("ConstrainPrivateVersions",true)}else if(n===e.PlanningVersionRestrictionType.ONLY_PRIVATE_VERSIONS){t.putBoolean("RestrictToPrivateVersions",true)}else if(n===e.PlanningVersionRestrictionType.NONE){t.putBoolean("RestrictToPrivateVersions",false)}},getPlanningVersionRestrictionEffective:function(t){if(!t.isDataEntryEnabled()){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}var r=t.getSystemType();if(!r.isTypeOf(e.SystemType.HANA)){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}var n=t.getPlanningVersionSettingsMode();if(n===e.PlanningVersionSettingsMode.SERVER_DEFAULT){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}var i=t.getPlanningRestriction();if(e.isNull(i)){return e.PlanningVersionRestrictionType.SERVER_DEFAULT}return i}};e.PlanningStateHandler={s_planningStateUpdater:null,setInstance:function(t){e.PlanningStateHandler.s_planningStateUpdater=t},update:function(t,r,n,i){e.PlanningStateHandler.s_planningStateUpdater.update(t,r,n,i)},updateFromResponse:function(t,r,n,i,a){e.PlanningStateHandler.s_planningStateUpdater.updateFromResponse(t,r,n,i,a)},getDataAreaStateByName:function(t,r,n){return e.PlanningStateHandler.s_planningStateUpdater.getDataAreaStateByName(t,r,n)}};e.PlanningStateHandlerDummyImpl=function(){};e.PlanningStateHandlerDummyImpl.prototype=new e.XObject;e.PlanningStateHandlerDummyImpl.prototype._ff_c="PlanningStateHandlerDummyImpl";e.PlanningStateHandlerDummyImpl.prototype.update=function(e,t,r,n){return};e.PlanningStateHandlerDummyImpl.prototype.updateFromResponse=function(e,t,r,n,i){return};e.PlanningStateHandlerDummyImpl.prototype.getDataAreaStateByName=function(e,t,r){return null};e.FunctionalValueHelpFactoryImpl=function(){};e.FunctionalValueHelpFactoryImpl.prototype=new e.XObject;e.FunctionalValueHelpFactoryImpl.prototype._ff_c="FunctionalValueHelpFactoryImpl";e.FunctionalValueHelpFactoryImpl.createFactory=function(){return new e.FunctionalValueHelpFactoryImpl};e.FunctionalValueHelpFactoryImpl.prototype.createForSelectFunctions=function(t){return e.FunctionalValueHelpSelectFunctions.create(t)};e.FunctionalValueHelpFactoryImpl.prototype.createForFunctionParameters=function(t){return e.FunctionalValueHelpParameters.create(t)};e.FunctionalValueHelpFactoryImpl.prototype.createForParameterValues=function(t){return e.FunctionalValueHelpParameterValues.create(t)};e.FunctionalValueHelpFactoryImpl.prototype.createForResolveValues=function(t,r){return e.FunctionalValueHelpResolveValues.create(t,r)};e.InADimensionLazyLoader=function(){};e.InADimensionLazyLoader.prototype=new e.XObject;e.InADimensionLazyLoader.prototype._ff_c="InADimensionLazyLoader";e.InADimensionLazyLoader.createLazyLoader=function(t,r){var n=new e.InADimensionLazyLoader;n.setupExt(t,r);return n};e.InADimensionLazyLoader.prototype.m_importer=null;e.InADimensionLazyLoader.prototype.m_queryModel=null;e.InADimensionLazyLoader.prototype.m_useDesignTimeMetadata=false;e.InADimensionLazyLoader.prototype.setupExt=function(t,r){this.m_queryModel=t;this.m_useDesignTimeMetadata=r;this.m_importer=e.QInAImportFactory.createWithQueryManagerCapabilities(t.getApplication(),e.QModelFormat.INA_METADATA,t.getQueryManager())};e.InADimensionLazyLoader.prototype.releaseObject=function(){this.m_queryModel=null;this.m_importer=e.XObjectExt.release(this.m_importer);e.XObject.prototype.releaseObject.call(this)};e.InADimensionLazyLoader.prototype.lazyLoadDimension=function(t){var r=null;var n=this.getInaDimension(t);if(e.notNull(n)){r=this.m_importer.importDimension(n,this.m_queryModel)}return r};e.InADimensionLazyLoader.prototype.getInaDimension=function(t){var r=null;var n;if(this.m_useDesignTimeMetadata){n=this.m_queryModel.getServerBaseSerializationForBaseState()}else{n=this.m_queryModel.getServerBaseSerialization()}if(e.notNull(n)){var i=n.getListByKey("Dimensions");var a=i.size();for(var o=0;o<a;o++){var s=i.getStructureAt(o);var l=s.getStringByKey("Name");if(e.XString.isEqual(l,t)){r=s;break}}}return r};e.InADimensionLazyLoader.prototype.hasFieldWithName=function(t,r){var n=this.getInaDimension(t);return e.notNull(n)&&this.hasFieldWithProperty(n,"Name",r)};e.InADimensionLazyLoader.prototype.hasFieldWithNameOrAlias=function(t,r){var n=false;var i=this.getInaDimension(t);if(e.notNull(i)){if(this.hasFieldWithProperty(i,"Name",r)){n=true}else{n=this.hasFieldWithProperty(i,"AliasName",r)}}return n};e.InADimensionLazyLoader.prototype.hasFieldWithProperty=function(t,r,n){var i=t.getListByKey("Attributes");if(e.isNull(i)){i=t.getListByKey("AttributesMd")}return e.PrUtils.getStructureWithKeyValuePair(i,r,n)!==null};e.InADimensionLazyLoader.prototype.copyDimensionLazyLoader=function(t){return e.InADimensionLazyLoader.createLazyLoader(t,this.m_useDesignTimeMetadata)};e.InADimensionLazyLoader.prototype.isUseDesignTimeMetadata=function(){return this.m_useDesignTimeMetadata};e.InADimensionLazyLoader.prototype.setUseDesignTimeMetadata=function(e){this.m_useDesignTimeMetadata=e};e.DfDocumentsStoreServiceFactoryImpl=function(){};e.DfDocumentsStoreServiceFactoryImpl.prototype=new e.XObject;e.DfDocumentsStoreServiceFactoryImpl.prototype._ff_c="DfDocumentsStoreServiceFactoryImpl";e.DfDocumentsStoreServiceFactoryImpl.createFactory=function(){return new e.DfDocumentsStoreServiceFactoryImpl};e.DfDocumentsStoreServiceFactoryImpl.prototype.newDocumentStore=function(t,r,n){var i=t.getQueryModel().getDocumentsInfo();var a=null;if(t.getModelCapabilities().supportsCellDocumentId()&&e.notNull(i)&&i.getSupportsDocuments()!==e.DocumentsSupportType.NONE){a=e.DfDocumentsStoreService.createDocumentStoreService(i,r,n)}return a};e.InAQMgrMergeSettings=function(){};e.InAQMgrMergeSettings.prototype=new e.XObject;e.InAQMgrMergeSettings.prototype._ff_c="InAQMgrMergeSettings";e.InAQMgrMergeSettings.create=function(t){var r=new e.InAQMgrMergeSettings;r.m_isInitialBWMerge=t;return r};e.InAQMgrMergeSettings.prototype.m_isInitialBWMerge=false;e.InAQMgrMergeSettings.prototype.isInitialBWMerge=function(){return this.m_isInitialBWMerge};e.InARsEncodedValues=function(){};e.InARsEncodedValues.prototype=new e.XObject;e.InARsEncodedValues.prototype._ff_c="InARsEncodedValues";e.InARsEncodedValues.createByStructure=function(t){var r=t.getStringByKey("Encoding");var n=e.QInAConverter.lookupEncoding(r);var i=t.getListByKey("Values");return e.InARsEncodedValues.create(n,i)};e.InARsEncodedValues.create=function(t,r){var n=new e.InARsEncodedValues;n.setupExt(t,r);return n};e.InARsEncodedValues.prototype.m_values=null;e.InARsEncodedValues.prototype.m_index=0;e.InARsEncodedValues.prototype.m_size=0;e.InARsEncodedValues.prototype.cloneExt=function(t){return e.InARsEncodedValues.create(e.ResultSetEncoding.NONE,this.m_values.getPermaCopy())};e.InARsEncodedValues.prototype.setupExt=function(t,r){this.m_values=r;this.m_index=-1;if(t!==e.ResultSetEncoding.NONE){throw e.XException.createIllegalStateException("Wrong or no encoding given")}this.m_size=r.size()};e.InARsEncodedValues.prototype.releaseObject=function(){this.m_values=null;e.XObject.prototype.releaseObject.call(this)};e.InARsEncodedValues.prototype.getIndexForIntegerValue=function(t){if(t>-1){var r=this.m_values.size();for(var n=0;n<r;n++){if(this.m_values.getIntegerAt(n)===t){return n}}e.XLogger.println(e.XStringUtils.concatenate3("WARNING: Invalid hierarchy: parent index ",e.XInteger.convertToString(t)," refers to non-existing value."))}return t};e.InARsEncodedValues.prototype.getNextIntegerValue=function(){this.m_index++;return this.m_values.getIntegerAt(this.m_index)};e.InARsEncodedValues.prototype.getNextStringValue=function(){this.m_index++;return this.m_values.getStringAt(this.m_index)};e.InARsEncodedValues.prototype.getNextDoubleValue=function(){this.m_index++;return this.m_values.getDoubleAt(this.m_index)};e.InARsEncodedValues.prototype.hasNextValue=function(){return this.m_index+1<this.m_size};e.InARsEncodedValues.prototype.resetCursor=function(){this.m_index=-1};e.InARsEncodedValues.prototype.skip=function(){this.m_index++};e.InARsEncodedValues.prototype.size=function(){return this.m_size};e.MeasureValueHelpRsDataCellProvider=function(){};e.MeasureValueHelpRsDataCellProvider.prototype=new e.XObject;e.MeasureValueHelpRsDataCellProvider.prototype._ff_c="MeasureValueHelpRsDataCellProvider";e.MeasureValueHelpRsDataCellProvider.create=function(){return new e.MeasureValueHelpRsDataCellProvider};e.MeasureValueHelpRsDataCellProvider.prototype.notifyCursorChange=function(e,t,r){};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellCount=function(){return 0};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return 0};e.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellRows=function(){return 0};e.RuntimeRemoteBlendingQueryUpdateResult=function(){};e.RuntimeRemoteBlendingQueryUpdateResult.prototype=new e.XObject;e.RuntimeRemoteBlendingQueryUpdateResult.prototype._ff_c="RuntimeRemoteBlendingQueryUpdateResult";e.RuntimeRemoteBlendingQueryUpdateResult.create=function(t){var r=new e.RuntimeRemoteBlendingQueryUpdateResult;r.m_success=t;return r};e.RuntimeRemoteBlendingQueryUpdateResult.prototype.m_success=false;e.RuntimeRemoteBlendingQueryUpdateResult.prototype.isSuccess=function(){return this.m_success};e.QInADataSource=function(){};e.QInADataSource.prototype=new e.QInAComponent;e.QInADataSource.prototype._ff_c="QInADataSource";e.QInADataSource.importQd=function(t,r,n,i){var a=r;if(e.notNull(n)){if(e.notNull(a)&&!a.containsKey(n)){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&!a.containsKey(n)){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey(n)){var o=a.getElementTypeByKey(n);if(o===e.PrElementType.STRING){return e.QFactory.createDataSourceWithType(e.MetaObjectType.INFOPROVIDER,a.getStringByKey(n))}else if(o===e.PrElementType.STRUCTURE){a=a.getStructureByKey(n)}}else if(e.notNull(a)&&!a.containsKey(n)){a=null}}if(e.isNull(a)){return null}var s=e.QFactory.createDataSource();var l=a.getStringByKey("System");if(e.notNull(l)){s.setSystemName(l)}var u=a.getStringByKey("Type");var p=null;if(e.notNull(u)){u=e.XString.toLowerCase(u);p=e.MetaObjectType.lookup(u)}if(e.isNull(p)){p=e.MetaObjectType.DBVIEW}s.setType(p);e.QInADataSourceProperties.importQd(s,a);if(p===e.MetaObjectType.MULTI_SOURCE||p===e.MetaObjectType.BLENDING){var g=e.PrUtils.getListProperty(a,"Sources");if(e.notNull(g)){var c=s.getMultiSourcesBase();var m=g.size();for(var y=0;y<m;y++){var d=e.PrUtils.getStructureElement(g,y);var A=e.QInADataSource.importQd(t,d,null,i);c.add(A)}}var I=e.PrUtils.getListProperty(a,"Mappings");s.setMappings(I)}e.QInADataSourceExtDims.importQd(t,s,a);var S=r.getStringByKey("ValidationHash");if(e.isNull(S)){S=a.getStringByKey("ValidationHash")}s.setValidationHash(S);var f=r.getStructureByKey("GenericServiceDescription");if(e.notNull(f)){s.setGenericServiceDescription(f)}return s};e.QInADataSource.exportDataSource=function(t,r,n,i,a){var o=e.PrFactory.createStructure();var s=r.getType();if(e.notNull(s)){if(t.mode===e.QModelFormat.INA_VALUE_HELP&&s===e.MetaObjectType.QUERY){o.putString("Type",e.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName())}else if(t.mode===e.QModelFormat.INA_VALUE_HELP&&s===e.MetaObjectType.MODEL){o.putString("Type",e.MetaObjectType.MODEL_VALUEHELP.getCamelCaseName())}else if(t.mode===e.QModelFormat.INA_VALUE_HELP&&s===e.MetaObjectType.CDS_PROJECTION_VIEW){o.putString("Type",e.MetaObjectType.CDS_PROJECTION_VIEW_VALUEHELP.getCamelCaseName())}else{o.putString("Type",s.getCamelCaseName())}var l=r.getSystemName();if(e.notNull(l)&&t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){o.putString("System",l)}var u;if(s===e.MetaObjectType.MULTI_SOURCE){u=o.putNewList("Sources");var p=r.getMultiSources();var g=p.size();for(var c=0;c<g;c++){var m=p.get(c);var y=e.QInADataSource.exportDataSource(t,m,n,null,a);u.add(y)}o.put("Mappings",r.getMappings())}else if(s===e.MetaObjectType.BLENDING){var d=r.getBlendingDefinition();if(e.notNull(d)){u=e.QInADataSourceBlending.exportBlendingSources(t.getMode(),d,true);o.put("Sources",u);var A=e.QInADataSourceBlending.exportBlendingMappings(d.getMappings());o.put("Mappings",A)}}}e.QInADataSourceProperties.exportQd(t,r,o,n,a);e.QInADataSourceExtDims.exportQd(t,r,o,a);var I=r.getGenericServiceDescription();if(e.notNull(I)){o.put("GenericServiceDescription",I)}if(e.notNull(i)){i.put("DataSource",o)}return o};e.QInADataSource.prototype.getComponentType=function(){return e.OlapComponentType.DATA_SOURCE};e.QInADataSource.prototype.importComponent=function(t,r,n,i,a){return e.QInADataSource.importQd(t,r,"DataSource",a)};e.QInADataSource.prototype.exportComponent=function(t,r,n,i){var a=e.XMath.binaryAnd(i,e.QImExFlag.RUN_AS_USER)>0;return e.QInADataSource.exportDataSource(t,r,a,null,false)};e.QInAExportFactoryImpl=function(){};e.QInAExportFactoryImpl.prototype=new e.QInAExportFactory;e.QInAExportFactoryImpl.prototype._ff_c="QInAExportFactoryImpl";e.QInAExportFactoryImpl.staticSetupImpl=function(){e.QInAExportFactory.put(e.QModelFormat.INA_CLONE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_CLONE_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_NO_VARS,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_REPOSITORY_DELTA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_CORE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_BLENDING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_METADATA_RENDERING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_PERSISTED_QUERY_DATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_MERGE_PROCESSING,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_BLENDING_SOURCE,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.INA_VALUE_HELP,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.LAYER,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.CSN_METADATA,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.RENDER_INFO,new e.QInAExportFactoryImpl);e.QInAExportFactory.put(e.QModelFormat.SFX,new e.QInAExportFactoryImpl)};e.QInAExportFactoryImpl.prototype.createExporter=function(t,r,n,i){if(r===e.QModelFormat.RENDER_INFO){var a=new e.QRsInfoExport;a.setupImportExport(t,r,n,i);return a}var o=new e.QInAExportImpl;o.setupImportExport(t,r,n,i);return o};e.QInAImportFactoryImpl=function(){};e.QInAImportFactoryImpl.prototype=new e.QInAImportFactory;e.QInAImportFactoryImpl.prototype._ff_c="QInAImportFactoryImpl";e.QInAImportFactoryImpl.staticSetupImpl=function(){e.QInAImportFactory.put(e.QModelFormat.INA_CLONE,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_CLONE_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_NO_VARS,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_REPOSITORY_DELTA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_CORE,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_BLENDING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_METADATA_RENDERING,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_DATA,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.INA_DATA_REINIT,new e.QInAImportFactoryImpl);e.QInAImportFactory.put(e.QModelFormat.LAYER,new e.QInAImportFactoryImpl)};e.QInAImportFactoryImpl.prototype.createImporter=function(t,r,n){var i=new e.QInAImportImpl;i.setupImportExport(t,r,n,null);return i};e.QInAImportFactoryImpl.prototype.createImporterWithQueryManagerCapabilities=function(e,t,r){return this.createImporter(e,t,r.getModelCapabilities())};e.QInAFilterCartesianList=function(){};e.QInAFilterCartesianList.prototype=new e.QInAComponent;e.QInAFilterCartesianList.prototype._ff_c="QInAFilterCartesianList";e.QInAFilterCartesianList.setStringIfFilterBagNotNull=function(t,r,n,i){if(e.notNull(t)&&t.getValue()!==null){e.QInAValueUtils.exportFilterValue(r,i,n,t,e.XValueType.STRING)}};e.QInAFilterCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInAFilterCartesianList.prototype.importComponent=function(t,r,n,i,a){var o=r;var s=n;var l=e.notNull(i)&&i.getOlapComponentType().isTypeOf(e.OlapComponentType.FILTER_EXPRESSION)?i:s.getFilterExpression();var u=a.getFieldAccessorSingle();var p=o.getStringByKey("FieldName");var g=s;if(e.notNull(p)){var c=u.getFieldByName(p);if(e.isNull(c)){var m=l.getQueryModel();if(e.notNull(m)){var y=m.getDimensionByNameFromExistingMetadata(p);if(e.notNull(y)){var d=o.getStructureByKey("Hierarchy");if(e.isNull(d)){c=y.getFlatKeyField()}else{c=y.getHierarchyKeyField()}}}}if(e.notNull(c)){var A=o.getStructureByKey("Hierarchy");var I=null;var S=null;var f=null;if(e.notNull(A)){I=A.getStringByKey("Name");if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&t.isAbap(c)){var v=A.getStringByKey("DueDate");if(e.notNull(v)){S=e.XDate.createDateFromSAPFormat(v)}f=A.getStringByKey("Version")}}if(e.isNull(g)){g=e.QFilterCartesianList._createMd(a,l,c.getMetadata(),I);g.setHierarchyInfo(I,S,f)}else{g.clear()}var C=o.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(C);var N=o.getListByKey("SupplementsFieldNames");if(e.notNull(N)){var E=N.size();for(var M=0;M<E;M++){var h=N.getStringAt(M);var D=u.getFieldByName(h);g.addSupplementField(D)}}var T=o.getListByKey("Elements");if(e.notNull(T)){var Q=T.size();for(var R=0;R<Q;R++){var _=T.getStructureAt(R);var F=t.importFilterOperation(_,g,a);g.add(F)}}}}return g};e.QInAFilterCartesianList.prototype.exportComponent=function(t,r,n,i){var a=r;if(a.hasElements()){var o=a.getOp(0);var s=o.getComparisonOperator();if(e.notNull(s)){if(s.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return this.exportSpatialList(t,a,n)}else if(s===e.ComparisonOperator.SEARCH){return this.exportSearchList(t,a,n)}}return this.exportStandardList(t,a,n)}return null};e.QInAFilterCartesianList.prototype.exportStandardList=function(t,r,n){var i=r;if(i.isEmpty()){return null}var a=i.getFieldMetadata();var o=e.notNull(a)?a.getName():i.getFieldName();if(e.isNull(a)&&e.XStringUtils.isNullOrEmpty(o)){t.addWarning(e.ErrorCodes.INVALID_FIELD,"A field has to be provided to the cartesian list.");return null}var s=e.PrFactory.createStructure();s.putString("FieldName",o);var l=i.getHierarchyName();var u=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;var p=e.notNull(a)?a.getDimensionMetadata():null;if(u&&e.notNull(p)){if(p.isMeasureStructure()){s.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(p.isSecondaryStructure()){s.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}if(e.notNull(l)){var g=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.TAG_HIERARCHICAL_FILTER,p.getName());s.putString(e.InAQueryMergeConstants.TAG_KEY,g)}}if(e.notNull(l)){var c=i.getFilterExpression()!==null?i.getFilterExpression():i.getParent()!==null?i.getParent().getFilterExpression():null;e.QInAHierarchy.exportHierarchyForFilter(t,t.isAbap(r),s,null,c,i.getQueryManager(),o,l,i.getHierarchyDueDate(),i.getHierarchyVersion())}if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA)&&t.capabilities.supportsSupplements()){var m=i.getSupplementFieldNames();if(e.XCollectionUtils.hasElements(m)){var y=s.putNewList("SupplementsFieldNames");y.addAllStrings(m)}}var d=i.isConvertToFlatFilter();var A=s.putNewList("Elements");var I=i.size();for(var S=0;S<I;S++){var f=i.getOp(S);t.exportFilterOperation(f,A.addNewStructure());d=d||f.isConvertToFlatFilter()}if(t.capabilities.supportsConvertToFlatFilter()&&d){s.putBoolean("ConvertToFlatSelection",true)}if(e.notNull(n)){n.put("SetOperand",s)}return s};e.QInAFilterCartesianList.prototype.exportSpatialList=function(t,r,n){if(!t.capabilities.supportsSpatialFilter()){t.addWarning(e.ErrorCodes.INVALID_OPERATOR,"System does not support spatial filtering.");return null}var i=r.getFieldMetadata();var a=e.isNull(n)?e.PrFactory.createStructure():n;var o=a.putNewStructure("Operator");o.putString("Code","Or");var s=o.putNewList("SubSelections");var l=r.size();for(var u=0;u<l;u++){var p=r.getOp(u);var g=p.getComparisonOperator();if(e.isNull(g)){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not set");return null}if(!g.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator not spatial");return null}var c=s.addNewStructure();var m=c.putNewStructure("GeometryOperand");m.putString("FieldName",i.getName());var y=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;var d=i.getDimensionMetadata();if(y&&e.notNull(d)){if(d.isMeasureStructure()){m.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(d.isSecondaryStructure()){m.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}m.putString("Comparison",e.QInAConverter.lookupComparisonInA(g));if(p.getSetSign()===e.SetSign.EXCLUDING){m.putBoolean("IsExcluding",true)}var A=p.getLow();e.QInAFilterCartesianList.setStringIfFilterBagNotNull(A,t,m,"Value1");if(A.getValueType().isSpatial()){var I=A.getGeometry().getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(I)){m.putInteger("SRID",I.getInteger())}}if(A.getValue()!==null){if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&A.getTagging().containsKey("PersistedQueryPlaceholder")){m.putString("Value1",A.getTagging().getByKey("PersistedQueryPlaceholder"))}}var S=p.getHigh();e.QInAFilterCartesianList.setStringIfFilterBagNotNull(S,t,m,"Value2");var f=p.getThird();if(e.XStringUtils.isNotNullAndNotEmpty(f.getString())){e.QInAFilterCartesianList.setStringIfFilterBagNotNull(f,t,m,"Value3")}}return a};e.QInAFilterCartesianList.prototype.exportSearchList=function(t,r,n){var i=r.getFieldMetadata();var a=i.getValueType();var o=e.isNull(n)?e.PrFactory.createStructure():n;var s=o.putNewStructure("Operator");s.putString("Code","Or");var l=s.putNewList("SubSelections");var u=r.size();for(var p=0;p<u;p++){var g=r.getOp(p);if(g.getComparisonOperator()!==e.ComparisonOperator.SEARCH){t.addError(e.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not search");return null}var c=l.addNewStructure();var m=c.putNewStructure("SearchOperand");if(t.isAbap(r)){m.putString("FieldName",i.getName());var y=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;var d=i.getDimensionMetadata();if(y&&e.notNull(d)){if(d.isMeasureStructure()){m.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(d.isSecondaryStructure()){m.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}}m.putString("AttributeName",i.getName());e.QInAValueUtils.exportFilterValue(t,"Value",m,g.getLow(),a);m.putDouble("Exactness",g.getExactness())}return o};e.QInAFilterCartesianProduct=function(){};e.QInAFilterCartesianProduct.prototype=new e.QInAComponent;e.QInAFilterCartesianProduct.prototype._ff_c="QInAFilterCartesianProduct";e.QInAFilterCartesianProduct.iterateCartesianDimensionsNew=function(t,r,n){var i=r.size();for(var a=0;a<i;a++){var o=r.getCartesianChild(a);var s=e.PrFactory.createStructure();if(o.hasElements()){t.exportCartesianList(o,s);n.add(s)}}};e.QInAFilterCartesianProduct.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_PRODUCT};e.QInAFilterCartesianProduct.prototype.importComponent=function(t,r,n,i,a){var o=r;var s=i;var l=null;var u=o.getListByKey("Elements");if(e.isNull(u)){u=o.getListByKey("SubSelections")}if(e.notNull(u)){l=e.QFilterCartesianProduct._create(a,s);var p=u.size();for(var g=0;g<p;g++){var c=u.getStructureAt(g);if(e.notNull(c)){var m=t.importCartesianList(c,null,s,a);l.add(m)}}}return l};e.QInAFilterCartesianProduct.prototype.exportComponent=function(t,r,n,i){var a=r;if(e.notNull(a)){var o=0;var s=null;var l=a.size();for(var u=0;u<l;u++){var p=a.getCartesianChild(u);if(p.hasElements()){o++;s=p;if(o>1){break}}}if(o>0){var g;if(e.isNull(n)){g=e.PrFactory.createStructure()}else{g=n}if(o===1&&t.mode.isTypeOf(e.QModelFormat.INA_DATA)){return t.exportCartesianList(s,n)}var c=g.putNewStructure("Operator");c.putString("Code","And");var m=c.putNewList("SubSelections");e.QInAFilterCartesianProduct.iterateCartesianDimensionsNew(t,a,m);return c}}return null};e.InADocConverterSfxRepo=function(){};e.InADocConverterSfxRepo.prototype=new e.DocConverterFactory;e.InADocConverterSfxRepo.prototype._ff_c="InADocConverterSfxRepo";e.InADocConverterSfxRepo.staticSetupInAConverter=function(){e.DocConverterFactory.registerFactory(e.QModelFormat.SFX,e.QModelFormat.INA_REPOSITORY,new e.InADocConverterSfxRepo)};e.InADocConverterSfxRepo.getAccountMemberName=function(t,r,n){if(e.notNull(t)&&e.notNull(r)){return e.QDimensionMemberNameUtil.buildMDXHierarchyKey(t,r,n)}return n};e.InADocConverterSfxRepo.processAccountMembers=function(t,r,n,i){if(e.notNull(r)&&t.getStructureByKey(e.SfxConstants.FORMULAS)!==null){var a=t.getStructureByKey(e.SfxConstants.CAPABILITY);var o=e.notNull(a)&&a.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);var s=t.getStructureByKey(e.SfxConstants.FORMULAS);var l=s.getStringByKey(e.SfxConstants.CALCULATION_MEMBERS_PREFIX);if(e.isNull(l)){l=e.SfxConstants.CALCULATION_MEMBERS_PREFIX_DEFAULT}var u=s.getListByKey(e.SfxConstants.FORMULA_DATA);var p=r.putNewList("MembersRepo");var g=r.putNewList("PlaceholderIds");var c=r.getStringByKey("Name");if(e.notNull(u)){for(var m=0;m<u.size();m++){var y=u.get(m).asStructure();var d=y.getStringByKey(e.SfxConstants.MEMBER);var A=e.InADocConverterSfxRepo.getAccountMemberName(c,n,d);var I=e.XString.startsWith(d,l);if(I){g.addString(i.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&o?d:A);continue}var S=p.addNewStructure();S.putBoolean("ModelDefinedMember",true);S.putString("Name",i.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&i.getSession().hasFeature(e.FeatureToggleOlap.SFX_STORE_HIERARCHY_MEMBER_NAMES_AS_FLAT)?d:A);S.putString("Description",y.getStringByKey(e.SfxConstants.MEMBER_DESCRIPTION));S.putString("HierarchyDisplayKey",d);var f=y.getStringByKey(e.SfxConstants.ACCOUNTTYPE);S.putString("AccountType",f);S.putString("Aggregation",y.getStringByKey(e.SfxConstants.AGGREGATIONTYPE));if(y.containsKey(e.SfxConstants.SCALE)&&!y.hasNullByKey(e.SfxConstants.SCALE)){S.putInteger("NumericScale",y.getIntegerByKey(e.SfxConstants.SCALE))}if(y.containsKey(e.SfxConstants.NUMERIC_SHIFT)&&!y.hasNullByKey(e.SfxConstants.NUMERIC_SHIFT)){S.putInteger("NumericShift",y.getIntegerByKey(e.SfxConstants.NUMERIC_SHIFT))}S.putString("ExceptionAggregation",y.getStringByKey(e.SfxConstants.EXCEPTIONAGGREGATIONTYPE));var v=y.getListByKey(e.SfxConstants.AGGRDIMNAME);if(e.notNull(v)){var C=S.putNewList("ExceptionAggregationDimensions");for(var N=0;N<v.size();N++){C.addString(v.get(N).asString().getString())}}var E=y.getStringByKey(e.SfxConstants.JSONFORMULA);if(e.XStringUtils.isNotNullAndNotEmpty(E)){var M=e.JsonParserFactory.newInstance();var h=M.parse(E).asStructure();if(e.notNull(f)&&(e.XString.isEqual(f,e.AccountType.INC.getName())||e.XString.isEqual(f,e.AccountType.LEQ.getName()))){S.putBoolean("PresentationSignReversal",true)}if(h.containsKey("Operator")){S.putString("CType",e.MemberType.RESTRICTED_MEASURE.getName());S.putString("MemberType","SelectionMeasure");var D=S.putNewStructure("InAFilterExpression");D.put("Selection",h)}else{S.putString("CType",e.MemberType.FORMULA.getName());S.putString("MemberType","FormulaMeasure");S.put("Formula",h);var T=h.asStructure().getByKey("InverseFormulas");if(e.notNull(T)){S.put("InverseFormulas",T)}if(y.getBooleanByKeyExt(e.SfxConstants.CALC_BEFORE_AGGR,false)){S.putString("ExecutionStep","CalculationBeforeAggregation")}}}else{S.putString("MemberType","Measure");S.putString("CType",e.MemberType.BASIC_MEASURE.getName())}var Q=y.getStringByKey(e.SfxConstants.FORMULA_TYPE);if(e.XStringUtils.isNotNullAndNotEmpty(Q)){S.putString("FormulaType",Q)}var R=y.getListByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS);if(e.notNull(R)){var _=S.putNewList("IgnoreExternalDimensions");for(var F=0;F<R.size();F++){_.addString(R.get(F).asString().getString())}}var x=y.getStringByKey(e.SfxConstants.UNITTYPE);S.putString("UnitType",x);if(e.XString.isEqual(x,e.UnitType.UNIT.getName())){S.putString("UnitFixed",y.getStringByKey(e.SfxConstants.UNITOFMEASURE))}e.InADocConverterSfxRepo.setVisibility(S,e.XString.isEqual(y.getStringByKeyExt(e.SfxConstants.VISIBLE,e.SfxConstants.NO),e.SfxConstants.NO));e.InADocConverterSfxRepo.setMinimumDrillState(y,S,i)}}}};e.InADocConverterSfxRepo.setMinimumDrillState=function(t,r,n){if(n.getSession().hasFeature(e.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE)){var i=t.getElementTypeByKey(e.SfxConstants.MINIMUM_DRILL_STATE);if(e.notNull(i)){var a=r.putNewList("MinimumDrillState");if(i===e.PrElementType.LIST){a.addAll(t.getListByKey(e.SfxConstants.MINIMUM_DRILL_STATE))}else if(i===e.PrElementType.STRING){a.addString(t.getStringByKey(e.SfxConstants.MINIMUM_DRILL_STATE))}}}};e.InADocConverterSfxRepo.processRestrictedMeasureFormula=function(t){if(t.isStructure()){var r=t.asStructure();var n=r.getKeysAsIteratorOfString();while(n.hasNext()){var i=n.next();if(e.XString.isEqual(i,"FieldName")&&e.XString.isEqual(r.getStringByKey(i),".ID")){r.putString("FieldName","[Measures].[Measures]")}else{e.InADocConverterSfxRepo.processRestrictedMeasureFormula(r.getByKey(i))}}}else if(t.isList()){var a=t.asList();for(var o=0;o<a.size();o++){e.InADocConverterSfxRepo.processRestrictedMeasureFormula(a.get(o))}}};e.InADocConverterSfxRepo.processMeasures=function(t,r,n,i,a){var o=e.notNull(n);var s=e.XString.isEqual(t.getStringByKey(e.SfxConstants.TYPE),e.SfxConstants.ANALYTIC);var l=e.XString.isEqual(t.getStringByKey(e.SfxConstants.MODE),e.SfxConstants.INTEGRATED);var u=t.getStructureByKey(e.SfxConstants.CAPABILITY);var p=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);var g=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false);var c=e.notNull(u)&&u.getBooleanByKeyExt(e.SfxConstants.HAS_DATASET_SOURCE,false);var m=i.getSession().hasFeature(e.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE);if(o&&!p||!m&&!g&&(!s||!l)||m&&c&&!a){return}var y=r.getStructureByKey("ModellerDimensions");var d=y.getListByKey("Dimensions");var A=d.addNewStructure();A.putBoolean("MeasureStructure",true);A.putString("CType",e.DimensionType.MEASURE_STRUCTURE.getName());A.putBoolean("IsDelta",true);var I=A.putNewList("MembersRepo");var S=null;var f=r.getStructureByKey("ModellerVariables");var v=e.isNull(f)?null:e.XStream.of(f.getListByKey("Variables")).collect(e.XStreamCollector.toSetOfString(function(e){return e.asStructure().getStringByKey("Name")}.bind(this)));if(e.XCollectionUtils.hasElements(v)){var C=r.getStructureByKey("ModellerCurrencyTranslation");if(e.XCollectionUtils.hasElements(C)){S=C.putNewList("CurrencyTranslations")}}var N=t.getListByKey(e.SfxConstants.MEASURES);if(e.notNull(N)){for(var E=0;E<N.size();E++){var M=N.getStructureAt(E);var h=M.getStringByKey(e.SfxConstants.MEASURE);var D=I.addNewStructure();D.putBoolean("ModelDefinedMember",true);D.putString("Name",h);if(M.containsKey(e.SfxConstants.NUMERIC_SCALE)&&!M.hasNullByKey(e.SfxConstants.NUMERIC_SCALE)){D.putInteger("NumericScale",M.getIntegerByKey(e.SfxConstants.NUMERIC_SCALE))}if(M.containsKey(e.SfxConstants.NUMERIC_SHIFT)&&!M.hasNullByKey(e.SfxConstants.NUMERIC_SHIFT)){D.putInteger("NumericShift",M.getIntegerByKey(e.SfxConstants.NUMERIC_SHIFT))}if(M.containsKey(e.SfxConstants.NUMERIC_PRECISION)&&!M.hasNullByKey(e.SfxConstants.NUMERIC_PRECISION)){D.putInteger("NumericPrecision",M.getIntegerByKey(e.SfxConstants.NUMERIC_PRECISION))}if(M.containsKey(e.SfxConstants.SOLVE_ORDER)&&!M.hasNullByKey(e.SfxConstants.SOLVE_ORDER)){D.putInteger("SolveOrder",M.getIntegerByKeyExt(e.SfxConstants.SOLVE_ORDER,0))}var T=M.getIntegerByKeyExt(e.SfxConstants.SCALE,-1);if(T>-1){D.putInteger("DataTypeScale",T)}var Q=M.getIntegerByKeyExt(e.SfxConstants.LENGTH,-1);if(Q>-1){D.putInteger("DataTypePrecision",Q)}D.putString("UnitType",M.getStringByKey(e.SfxConstants.UNITTYPE));D.putStringNotNullAndNotEmpty("UnitFixed",M.getStringByKey(e.SfxConstants.MEASURE_UNITS));if(M.hasStringByKey(e.SfxConstants.DATA_TYPE_NAME)){switch(M.getStringByKey(e.SfxConstants.DATA_TYPE_NAME)){case e.SfxConstants.DATA_TYPE_DECIMAL:D.putString("DataTypeInternal","DecimalFloat");break;case e.SfxConstants.DATA_TYPE_INTEGER:D.putString("DataTypeInternal","Int");break}}D.putStringNotNullAndNotEmpty("UnitDimension",M.getStringByKey(e.SfxConstants.UNIT_DIMENSION));D.putStringNotNullAndNotEmpty("UnitDimensionProperty",M.getStringByKey(e.SfxConstants.UNIT_DIMENSION_PROPERTY));D.putBoolean("OverrideDescription",true);D.putString("RateType",M.getStringByKey(e.SfxConstants.RATE_TYPE));if(M.containsKey(e.SfxConstants.EXTENDED)){D.putBoolean("Extended",M.getBooleanByKey(e.SfxConstants.EXTENDED))}var R=M.getStringByKey(e.SfxConstants.AGGREGATIONTYPE);var _=M.getStringByKey(e.SfxConstants.DESCRIPTION);D.putStringNotNullAndNotEmpty("ExceptionAggregation",M.getStringByKey(e.SfxConstants.EXCEPTIONAGGREGATIONTYPE));var F=M.getListByKey(e.SfxConstants.AGGREGATION_DIMENSION_NAME);if(e.notNull(F)){var x=D.putNewList("ExceptionAggregationDimensions");for(var L=0;L<F.size();L++){x.addString(F.get(L).asString().getString())}}var V=M.getStringByKey(e.SfxConstants.FORMULA);var P=M.getStringByKey(e.SfxConstants.JSONFORMULA);if(e.XStringUtils.isNotNullAndNotEmpty(V)&&e.XStringUtils.isNotNullAndNotEmpty(P)){var B=e.JsonParserFactory.newInstance();var b=B.parse(P).asStructure();if(e.XStringUtils.isNullOrEmpty(_)){_=h}if(b.containsKey("Operator")||b.containsKey("Selection")){D.putString("CType",e.MemberType.RESTRICTED_MEASURE.getName());D.putString("MemberType","SelectionMeasure");e.InADocConverterSfxRepo.processRestrictedMeasureFormula(b);if(b.containsKey("Selection")){D.put("InAFilterExpression",b)}else{var O=D.putNewStructure("InAFilterExpression");O.put("Selection",b)}}else{D.putString("MemberType","FormulaMeasure");D.putString("CType",e.MemberType.FORMULA.getName());D.put("Formula",b)}}else{D.putString("CType",e.MemberType.BASIC_MEASURE.getName());D.putString("MemberType","Measure");var U=D.putNewStructure("MemberOperand");U.putString("AttributeName","Measures");U.putString("Comparison","=");U.putString("Value",h)}D.putString("Aggregation",R);D.putString("Description",_);if(M.containsKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS)&&M.getElementTypeByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS)===e.PrElementType.LIST){var H=M.getListByKey(e.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS);if(e.notNull(H)&&H.size()>0){D.putNewList("IgnoreExternalDimensions").addAll(H)}}else{var K=M.getStringByKeyExt(e.SfxConstants.REF_DIMENSIONS,"");if(e.XStringUtils.isNotNullAndNotEmpty(K)){var X=e.XStringTokenizer.splitString(K,",");var w=D.putNewList("IgnoreExternalDimensions");for(var z=0;z<X.size();z++){w.addString(X.get(z))}}}e.InADocConverterSfxRepo.setVisibility(D,M.getBooleanByKeyExt(e.SfxConstants.VISIBLE,true));e.InADocConverterSfxRepo.setMinimumDrillState(M,D,i);var G=M.getStructureByKey(e.SfxConstants.CURRENCY_TRANSLATION);if(e.notNull(S)&&e.notNull(G)&&G.hasStringByKey(e.SfxConstants.CURRENCY_VARIABLE)&&v.contains(G.getStringByKey(e.SfxConstants.CURRENCY_VARIABLE))){var q=G.getStringByKey(e.SfxConstants.CURRENCY_VARIABLE);var Y=e.XStringUtils.concatenate5("CurrencyTranslation","_","CustomVariable","_",h);D.putString("CurrencyTranslationName",Y);var k=G.getStringByKey(e.SfxConstants.CURRENCY_TRANSLATION_CONFIG);if(e.notNull(k)){var W=e.JsonParserFactory.createFromString(k);if(e.notNull(W)&&W.isStructure()){var j=S.addNewStructure();j.putAll(W.asStructure());j.putString("CType","CurrencyTranslationItem");j.putString("Name",Y);j.putString("Description",Y);j.putNewStructure("TargetCurrency").putString("Variable",q)}}}}}};e.InADocConverterSfxRepo.setVisibility=function(e,t){if(t){e.putString("Visibility","Visible")}else{e.putString("Visibility","Hidden")}};e.InADocConverterSfxRepo.isNormalizeIntervals=function(t,r,n){var i=null;if(e.isNull(r)){var a=t.getStructureByKey("ModellerDimensions");var o=a.getListByKey("Dimensions");for(var s=0;s<o.size();s++){var l=o.getStructureAt(s);if(l.getBooleanByKeyExt("MeasureStructure",false)){i=l.getListByKey("MembersRepo")}}}else{i=r.getListByKey("MembersRepo")}if(e.notNull(i)){for(var u=0;u<i.size();u++){var p=i.getStructureAt(u);if(e.XString.isEqual(p.getStringByKey("Name"),n)){return p.getIntegerByKeyExt("NumericShift",0)===2}}}return false};e.InADocConverterSfxRepo.processThresholds=function(t,r,n,i){var a=t.getStructureByKey(e.SfxConstants.VISUALIZATIONS);if(e.isNull(a)){return}var o=null;if(e.notNull(n)){o=n.getStringByKey("Name")}var s=t.getStructureByKey(e.SfxConstants.DATA_SOURCE);var l=s.getStringByKey(e.SfxConstants.OBJECT_NAME);var u=null;var p=a.getKeysAsIteratorOfString();while(p.hasNext()){var g=p.next();var c=a.getStructureByKey(g);var m=c.getStructureByKey(e.SfxConstants.THRESHOLDS);if(e.isNull(m)||m.isEmpty()){continue}if(e.isNull(u)){var y=r.putNewStructure("FormulaExceptionManager");y.putString("CType","FormulaExceptions");u=y.putNewList("FormulaExceptionsModeler")}var d=e.InADocConverterSfxRepo.getAccountMemberName(o,i,g);var A=u.addNewStructure();A.putString("CType","FormulaException");var I=e.XStringUtils.concatenate5(e.QFormulaExceptionConstants.MODEL_THRESHOLD_PREFIX.getName(),"_[",l,"]_",g);A.putString("Name",I);A.putString("Type",e.FormulaExceptionType.BASE_MEASURE_ONLY.getName());A.putNewList("EvaluateOn");var S=A.putNewList("StructureContext");S.addNewStructure();var f=S.addNewStructure();S.addNewStructure();f.putString("MemberName",d);if(e.notNull(o)){f.putString("DimensionName",o)}else{f.putBoolean("MeasureStructure",true)}var v=m.getListByKey(e.SfxConstants.INTERVALS);if(e.isNull(v)){continue}var C=A.putNewList("Threshold");var N=e.InADocConverterSfxRepo.isNormalizeIntervals(r,n,d);for(var E=0;E<v.size();E++){var M=v.getStructureAt(E);var h=M.getStringByKey(e.SfxConstants.NAME);var D=M.getStringByKey(e.SfxConstants.LOW);var T=e.XDouble.convertFromStringWithDefault(D,0);var Q=M.getBooleanByKey(e.SfxConstants.LOW_INCLUSIVE);var R=M.getStringByKey(e.SfxConstants.HIGH);var _=e.XDouble.convertFromStringWithDefault(R,0);var F=M.getBooleanByKey(e.SfxConstants.HIGH_INCLUSIVE);var x=M.getStringByKey(e.SfxConstants.COLOR);if(N){T=T/100;_=_/100}var L=C.addNewStructure();L.putString("Name",e.XStringUtils.concatenate3(I,":",e.XInteger.convertToString(E)));L.putString("Text",h);L.putInteger("AlertLevel",e.AlertLevel.GOOD_1.getLevel());L.putString("Color",x);if(!e.XStringUtils.isNullOrEmpty(D)&&e.XStringUtils.isNullOrEmpty(R)){L.putDouble("Low",T);if(Q){L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.GREATER_EQUAL))}else{L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.GREATER_THAN))}}else if(e.XStringUtils.isNullOrEmpty(D)&&!e.XStringUtils.isNullOrEmpty(R)){L.putDouble("Low",_);if(F){L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.LESS_EQUAL))}else{L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.LESS_THAN))}}else if(!e.XStringUtils.isNullOrEmpty(D)&&!e.XStringUtils.isNullOrEmpty(R)){if(Q&&F){L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN));L.putDouble("Low",T);L.putDouble("High",_)}else if(!Q&&!F){L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN_EXCLUDING));L.putDouble("Low",T);L.putDouble("High",_)}else{L.remove("Name");L.putString("Name",e.XStringUtils.concatenate4(I,":",e.XInteger.convertToString(E),"A"));L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));if(Q){L.putDouble("Low",T)}else{L.putDouble("Low",_)}L=C.addNewStructure();L.putString("Name",e.XStringUtils.concatenate4(I,":",e.XInteger.convertToString(E),"B"));L.putString("Text",h);L.putInteger("AlertLevel",e.AlertLevel.GOOD_1.getLevel());L.putString("Color",x);L.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.BETWEEN_EXCLUDING));L.putDouble("Low",T);L.putDouble("High",_)}}}}};e.InADocConverterSfxRepo.processCurrencyTranslationSettings=function(t,r,n,i){if(e.notNull(n)&&n.getBooleanByKeyExt(e.SfxConstants.CT_ENABLED,false)){var a=r.putNewStructure("ModellerCurrencyTranslation");a.putBoolean("PlanningParametersForCurrencyTranslation",n.getBooleanByKeyExt(e.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false));a.putInteger("MaxNumberOfCurrencyTranslations",t.getIntegerByKeyExt(e.SfxConstants.NUM_OF_CONVERSIONS,-1));a.putBoolean("RateTypeFromAccount",i&&e.XString.isEqual(e.SfxConstants.LEADING_STRUCTURE_ACCOUNT,t.getStringByKeyExt(e.SfxConstants.LEADING_STRUCTURE,e.SfxConstants.LEADING_STRUCTURE_MEASURES)));a.putStringNotNullAndNotEmpty("CurrencyTranslationTimeDimension",t.getStringByKey(e.SfxConstants.CURRENCY_CONVERSION_TIME_DIMENSION));a.putStringNotNullAndNotEmpty("DefaultCurrency",t.getStringByKey(e.SfxConstants.DEFAULT_CURRENCY));a.putStringNotNullAndNotEmpty("CurrencyRateTableId",t.getStringByKey(e.SfxConstants.CURRENCY_RATE_TABLE_ID));var o=t.getListByKey(e.SfxConstants.CATEGORIES);var s;var l;var u;var p;if(e.XCollectionUtils.hasElements(o)){var g=a.putNewList("Categories");l=o.size();for(s=0;s<l;s++){u=g.addNewStructure();p=o.getStructureAt(s).getStringByKey(e.SfxConstants.CATEGORY);u.putString("Name",p)}}var c=t.getStructureByKey(e.SfxConstants.CURRENCY_DETAILS);if(e.XCollectionUtils.hasElements(c)){a.putStringNotNullAndNotEmpty("CurrencyDimension",c.getStringByKey(e.SfxConstants.CURRENCY_DIMENSION))}var m=t.getStructureByKey(e.SfxConstants.RATE_DATA);if(e.XCollectionUtils.hasElements(m)){var y=m.getListByKey(e.SfxConstants.CURRENCIES);var d=a.putNewList("Currencies");if(e.XCollectionUtils.hasElements(y)){l=y.size();for(s=0;s<l;s++){u=d.addNewStructure();p=y.getStringAt(s);u.putString("Name",p);u.putString("Text",p)}}var A=m.getListByKey(e.SfxConstants.RATE_VERSIONS);var I=a.putNewList("RateVersions");if(e.XCollectionUtils.hasElements(A)){l=A.size();for(s=0;s<l;s++){u=I.addNewStructure();p=A.getStringAt(s);u.putString("Name",p);u.putString("Text",p)}}var S=m.getListByKey(e.SfxConstants.RATE_TYPES);var f=a.putNewList("RateTypes");if(e.XCollectionUtils.hasElements(S)){l=S.size();for(s=0;s<l;s++){u=f.addNewStructure();p=S.getStringAt(s);u.putString("Name",p)}}}}};e.InADocConverterSfxRepo.processMetadataProperties=function(t,r){var n=r.putNewStructure("ModellerMetadataProperties");e.InADocConverterSfxRepo.processEpmObjectProperties(t,n);e.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty(t,n);e.InADocConverterSfxRepo.processIsPlanningProperty(t,n);e.InADocConverterSfxRepo.processLeadingStructure(t,n);e.InADocConverterSfxRepo.processVersionDimensionMappings(t,n)};e.InADocConverterSfxRepo.processEpmObjectProperties=function(t,r){r.putString("Mode",t.getStringByKey(e.SfxConstants.MODE));r.putString("EpmQuerySourceName",t.getStringByKey(e.SfxConstants.EPM_QUERY_SOURCE_NAME));r.putString("SchemaName",t.getStringByKey(e.SfxConstants.SCHEMA_NAME));r.putString("PackageName",t.getStringByKey(e.SfxConstants.PACKAGE_NAME));r.putString("Name",t.getStringByKey(e.SfxConstants.NAME));r.putString("ShortDescription",t.getStringByKey(e.SfxConstants.SHORT_DESCRIPTION))};e.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty=function(t,r){var n=t.getStructureByKey(e.SfxConstants.CAPABILITY);var i=e.notNull(n)&&n.getBooleanByKeyExt(e.SfxConstants.HAS_USER_DEFINED_MEASURES,false);r.putBoolean("HasUserDefinedMeasures",i)};e.InADocConverterSfxRepo.processIsPlanningProperty=function(t,r){var n=t.getStructureByKey(e.SfxConstants.DATA_SOURCE);var i=e.notNull(n)&&e.XString.isEqual(n.getStringByKey(e.SfxConstants.DATA_SOURCE_TYPE),e.SfxConstants.DATA_SOURCE_TYPE_PLANNING);r.putBoolean("IsPlanning",i)};e.InADocConverterSfxRepo.processLeadingStructure=function(t,r){var n=t.getStringByKeyExt(e.SfxConstants.LEADING_STRUCTURE,e.SfxConstants.LEADING_STRUCTURE_MEASURES);if(e.XString.isEqual(n,e.SfxConstants.LEADING_STRUCTURE_ACCOUNT)){r.putString("LeadingStructure","AccountStructure")}else if(e.XString.isEqual(n,e.SfxConstants.LEADING_STRUCTURE_MEASURES)){r.putString("LeadingStructure","MeasureStructure")}else if(e.XString.isEqual(n,e.SfxConstants.LEADING_STRUCTURE_NON_MEASURES)){r.putString("LeadingStructure","SecondaryStructure")}};e.InADocConverterSfxRepo.processVersionDimensionMappings=function(t,r){var n=t.getListByKey(e.SfxConstants.DIMENSION_MAPPING);if(e.notNull(n)&&!n.isEmpty()){for(var i=0;i<n.size();i++){var a=n.getStructureAt(i);var o=a.getStringByKey(e.SfxConstants.DIM_TYPE);if(e.XString.isEqual(o,e.SfxConstants.DIM_TYPE_VERSION)){var s=a.getListByKey(e.SfxConstants.PROPERTIES);if(e.notNull(s)&&!s.isEmpty()){for(var l=0;l<s.size();l++){var u=s.getStructureAt(l);var p=u.getListByKey(e.SfxConstants.MAPPING_DETAILS);var g=u.getBooleanByKeyExt(e.SfxConstants.VALUE_MAPPING_NEEDED,false);if(g&&e.notNull(p)&&!p.isEmpty()){r.putString("MappedVersionDimension",u.getStringByKey(e.SfxConstants.SOURCE_COLUMN_NAME))}}}}}}};e.InADocConverterSfxRepo.processExtendedDimensions=function(t,r){var n=t.getListByKey(e.SfxConstants.EXTENDED_DIMENSIONS);if(e.notNull(n)&&!n.isEmpty()){var i=r.getStructureByKey("ModellerDimensions");var a=i.putNewList("ExtendedDimensions");for(var o=0;o<n.size();o++){var s=n.getStructureAt(o);var l=s.getStructureByKey(e.SfxConstants.EXTENSION_DEFINITION);if(e.notNull(l)){var u=l.getStringByKey(e.SfxConstants.LOCATION_TYPE);if(e.notNull(u)){var p=l.getStructureByKey(e.SfxConstants.DIMENSION);if(e.notNull(p)){var g=p.getStringByKey(e.SfxConstants.NAME);if(e.isNull(g)){g=p.getStructureByKey(e.SfxConstants.DATA_SOURCE_1).getStringByKey(e.SfxConstants.OBJECT_NAME_1)}if(e.notNull(g)){var c=a.addNewStructure();c.putString("Name",g);c.putString("LocationType",u)}}}}}}};e.InADocConverterSfxRepo.processCustomVariableSettings=function(t,r){var n;var i;var a=t.getListByKey(e.SfxConstants.VARIABLES);if(e.notNull(a)){var o=e.PrFactory.createList();var s=t.getStructureByKey(e.SfxConstants.RATE_DATA);if(e.XCollectionUtils.hasElements(s)){var l=s.getListByKey(e.SfxConstants.CURRENCIES);if(e.XCollectionUtils.hasElements(l)){i=l.size();for(n=0;n<i;n++){var u=o.addNewStructure();var p=l.getStringAt(n);u.putString("Name",p);u.putString("Text",p)}}}var g=r.putNewStructure("ModellerVariables").putNewList("Variables");i=a.size();for(n=0;n<i;n++){var c=a.getStructureAt(n);var m=c.getStringByKey(e.SfxConstants.VARIABLE_TYPE);var y=c.getStringByKey(e.SfxConstants.VARIABLE_PROCESSING_TYPE);if(e.XString.isEqual(m,e.SfxConstants.VARIABLE_TYPE_LOCAL)&&e.XString.isEqual(y,e.SfxConstants.VARIABLE_PROCESSING_TYPE_CURRENCY)){var d=g.addNewStructure();d.putStringNotNullAndNotEmpty("Name",c.getStringByKey(e.SfxConstants.VARIABLE));d.putStringNotNullAndNotEmpty("Text",c.getStringByKey(e.SfxConstants.DESCRIPTION));d.putBoolean("CustomVariable",true);var A=e.XString.isEqual(c.getStringByKey(e.SfxConstants.VARIABLE_MANDATORY),"true")||c.getBooleanByKeyExt(e.SfxConstants.VARIABLE_MANDATORY,false);d.putString("InputType",A?"Mandatory":"Optional");d.putString("CType","OptionListVariable");d.putString("ProcessingType",y);var I=c.getStringByKey(e.SfxConstants.DEFAULT_VALUE);if(e.XStringUtils.isNotNullAndNotEmpty(I)){d.putNewList("OptionValues").addString(I)}d.put("Options",e.PrFactory.createListDeepCopy(o))}}if(!e.XCollectionUtils.hasElements(g)){r.remove("ModellerVariables")}}};e.InADocConverterSfxRepo.prototype.newDocConverter=function(t,r){return new e.InADocConverterSfxRepo};e.InADocConverterSfxRepo.prototype.processJsonContent=function(t,r){var n=e.PrFactory.createStructure();var i=r.getJsonContent();if(e.isNull(i)){return n}var a=i.asStructure();var o=a.getStructureByKey(e.SfxConstants.DATA);var s;if(e.notNull(o)){s=o.getStructureByKey(e.SfxConstants.CDATA)}else{s=a.getStructureByKey(e.SfxConstants.CDATA)}if(e.isNull(s)){return n}var l=s.getStructureByKey(e.SfxConstants.DATA_SOURCE);n.put("DataSource",l);var u=n.putNewStructure("ModellerDefinition");var p=s.getBooleanByKeyExt(e.SfxConstants.IS_BLENDED_CUBE,false);if(p){return n}var g=false;var c=a.getStructureByKey(e.SfxConstants.METADATA);if(e.notNull(c)){g=c.getBooleanByKeyExt(e.SfxConstants.IS_EMBEDDED,false)}var m=s.getListByKey(e.SfxConstants.DIMENSIONS);var y=e.XString.isEqual(s.getStringByKey(e.SfxConstants.MODE),e.SfxConstants.INTEGRATED);var d=u.putNewStructure("ModellerDimensions");var A=d.putNewList("Dimensions");var I=null;var S=null;for(var f=0;f<m.size();f++){var v=m.getStructureAt(f);var C=y?v.getStringByKey(e.SfxConstants.COLUMN_NAME):v.getStringByKey(e.SfxConstants.DIMENSION_ID);var N=v.getStringByKey(e.SfxConstants.TYPE);var E=v.getStringByKey(e.SfxConstants.UNASSIGNED_MEMBER);var M=v.getStructureByKey(e.SfxConstants.FISCAL_CONFIG);var h=v.getStructureByKey(e.SfxConstants.TIME_CONFIG);var D=v.getBooleanByKey(e.SfxConstants.IS_USER_MANAGED);var T=t.getSession().hasFeature(e.FeatureToggleOlap.SFX_DIMENSION_CUSTOMIZED_DESC)?v.getStringByKey(e.SfxConstants.CUSTOMIZED_DESCRIPTION):null;var Q=t.getSession().hasFeature(e.FeatureToggleOlap.SFX_HIDDEN_DIMENSIONS)&&v.getBooleanByKey(e.SfxConstants.IS_HIDDEN);var R=null;if(e.XStringUtils.isNotNullAndNotEmpty(C)&&(e.XString.isEqual(N,"Account")||e.notNull(M)||Q||e.XStringUtils.isNotNullAndNotEmpty(T))){R=A.addNewStructure();R.putString("Name",C);R.putBoolean("IsDelta",true);R.putBoolean("IsUserManaged",D);if(e.XString.isEqual(N,"Account")){R.putString("CType",e.DimensionType.ACCOUNT.getName());R.putString("AccountTypeAttributeName",v.getStringByKey(e.SfxConstants.ACCOUNTTYPEATTRIBUTENAME));S=v.getStringByKey(e.SfxConstants.DEFAULT_HIERARCHY);I=R}else{R.putString("CType",e.OlapComponentType.ABSTRACT_DIMENSION.getName())}if(e.notNull(M)){R.putBoolean("FiscalEnabled",M.getBooleanByKeyExt(e.SfxConstants.ENABLED,false));var _=M.getByKey(e.SfxConstants.MONTH_SHIFT);if(e.notNull(_)&&_.isNumeric()){R.putInteger("FiscalShift",e.XLong.convertToInt(M.getLongByKey(e.SfxConstants.MONTH_SHIFT)))}else{R.putInteger("FiscalShift",e.XInteger.convertFromStringWithDefault(M.getStringByKey(e.SfxConstants.MONTH_SHIFT),0))}R.putString("FiscalDisplayPeriod",M.getStringByKey(e.SfxConstants.DISPLAY_PERIOD))}if(Q){R.putBoolean("IsHidden",true)}if(e.XStringUtils.isNotNullAndNotEmpty(T)){R.putString("Description",T)}}if(e.notNull(h)&&h.hasElements()){if(e.isNull(R)){R=A.addNewStructure()}var F="";var x=h.getIntegerByKey(e.SfxConstants.ADDITIONAL_PERIODS);var L=h.getStringByKey(e.SfxConstants.PERIOD_PREFIX);var V=h.getBooleanByKey(e.SfxConstants.USE_PREFIX);var P=h.getBooleanByKey(e.SfxConstants.ENABLE_PATTERN);if(V&&e.XStringUtils.isNotNullAndNotEmpty(L)){F=L}else if(!V&&x===0){F=""}else if(!V&&x>0){F="P"}R.putInteger("additionalPeriods",x);R.putBoolean("useMonthLabel",!V);R.putString("periodPrefix",F);R.putBoolean("TimeConfigEnablePattern",P)}if(e.notNull(E)&&e.notNull(R)){R.putString("unassignedMember",E)}}var B=s.getStructureByKey(e.SfxConstants.CAPABILITY);e.InADocConverterSfxRepo.processCurrencyTranslationSettings(s,u,B,e.notNull(I));e.InADocConverterSfxRepo.processCustomVariableSettings(s,u);var b=a.getBooleanByKeyExt(e.SfxConstants.SKIP_MEMBER_AND_THRESHOLD_PROCESSING,false);if(!b){e.InADocConverterSfxRepo.processAccountMembers(s,I,S,t);e.InADocConverterSfxRepo.processMeasures(s,u,I,t,g);e.InADocConverterSfxRepo.processThresholds(s,u,I,S)}e.InADocConverterSfxRepo.processMetadataProperties(s,u);e.InADocConverterSfxRepo.processExtendedDimensions(s,u);return n};e.InADocConverterSfxRepo.prototype.convert=function(t,r,n){var i=e.MessageManager.createMessageManagerExt(t.getSession());var a=e.XContent.createContent();a.setJsonObject(this.processJsonContent(t,r));a.setContentType(e.QModelFormat.INA_REPOSITORY);var o=e.ExtResult.create(a,i);return o};e.InADocConverterUqmRepo=function(){};e.InADocConverterUqmRepo.prototype=new e.DocConverterFactory;e.InADocConverterUqmRepo.prototype._ff_c="InADocConverterUqmRepo";e.InADocConverterUqmRepo.staticSetupInAConverter=function(){e.DocConverterFactory.registerFactory(e.QModelFormat.UQM,e.QModelFormat.INA_REPOSITORY,new e.InADocConverterUqmRepo)};e.InADocConverterUqmRepo.prototype.newDocConverter=function(t,r){return new e.InADocConverterUqmRepo};e.InADocConverterUqmRepo.prototype.convert=function(t,r,n){var i=r.getJsonContent();var a=i.asStructure();var o=e.MessageManager.createMessageManagerExt(t.getSession());var s=a.getStringByKey("DataSourceName");var l=e.PrFactory.createStructure();if(e.notNull(s)){var u=e.QFactory.createDataSourceWithFqn(s);var p=e.QInAExportFactory.createForData(t,null);var g=p.exportDataSource(u,false);l.put("DataSource",g)}var c=e.XContent.createContent();c.setJsonObject(l);c.setContentType(e.QModelFormat.INA_REPOSITORY);var m=e.ExtResult.create(c,o);return m};e.InAFusion=function(){};e.InAFusion.prototype=new e.QDocFusionFactory;e.InAFusion.prototype._ff_c="InAFusion";e.InAFusion.staticSetup=function(){e.QDocFusionFactory.registerFactory(new e.InAFusion)};e.InAFusion.prototype.m_application=null;e.InAFusion.prototype.newDocFusion=function(t){var r=new e.InAFusion;r.setupApplicationContext(t);return r};e.InAFusion.prototype.setupApplicationContext=function(e){this.m_application=e};e.InAFusion.prototype.processFusion=function(t,r,n,i){var a=e.InAFusionResult.create(this.m_application,i);return e.InAFusionMainAction.createAndRun(t,r,n,a)};e.InAQMgrStartupBlending=function(){};e.InAQMgrStartupBlending.prototype=new e.XObject;e.InAQMgrStartupBlending.prototype._ff_c="InAQMgrStartupBlending";e.InAQMgrStartupBlending.create=function(t){var r=new e.InAQMgrStartupBlending;r.m_syncAction=t;r.m_executedQueryManagers=e.XList.create();r.m_metadataSerializationFunctions=e.XList.create();r.m_pendingFAMQueryIdentifiers=e.XList.create();return r};e.InAQMgrStartupBlending.prototype.m_syncAction=null;e.InAQMgrStartupBlending.prototype.m_implicitBatchStarted=false;e.InAQMgrStartupBlending.prototype.m_hasPreQueries=false;e.InAQMgrStartupBlending.prototype.m_pendingFAMQueryIdentifiers=null;e.InAQMgrStartupBlending.prototype.m_executedQueryManagers=null;e.InAQMgrStartupBlending.prototype.m_metadataSerializationFunctions=null;e.InAQMgrStartupBlending.prototype.m_blendingMgrFunctionSupplier=null;e.InAQMgrStartupBlending.prototype.m_blendingMgrSyncType=null;e.InAQMgrStartupBlending.prototype.releaseObject=function(){this.m_syncAction=null;this.m_executedQueryManagers=e.XObjectExt.release(this.m_executedQueryManagers);this.m_metadataSerializationFunctions=e.XObjectExt.release(this.m_metadataSerializationFunctions);this.m_blendingMgrFunctionSupplier=null;this.m_blendingMgrSyncType=null;this.m_pendingFAMQueryIdentifiers=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pendingFAMQueryIdentifiers)};e.InAQMgrStartupBlending.prototype.prepare=function(t){var r=this.m_syncAction.getQueryManager();var n=r.getServiceConfig();var i=n.getBlendingDefinition();var a=i.getSources();if(a.isEmpty()){this.m_syncAction.addError(e.ErrorCodes.INVALID_STATE,"No blending sources set");return}var o=i.getBlendingHost();if(e.isNull(o)){this.m_syncAction.addError(e.ErrorCodes.INVALID_STATE,"Could not find a suitable blending host");return}if(this.m_syncAction.getSession().hasFeature(e.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){for(var s=0;s<a.size();s++){var l=a.get(s).getQueryModel();var u=e.QFilterUtil.collectFilterAcrossModels(l);e.XCollectionUtils.forEach(u,function(t){var r=e.XStringValue.create(t.getUniqueId());this.m_pendingFAMQueryIdentifiers.add(r)}.bind(this))}for(var p=0;p<a.size();p++){var g=a.get(p).getQueryModel();var c=e.QFilterUtil.collectFilterAcrossModels(g);e.XCollectionUtils.forEach(c,function(r){var n=e.XCollectionUtils.findFirst(this.m_pendingFAMQueryIdentifiers,function(t){return e.XString.isEqual(r.getUniqueId(),t.getString())}.bind(this));if(t===e.SyncType.BLOCKING){this.m_pendingFAMQueryIdentifiers.removeElement(n)}var i=r.processLovQueriesExecutionExt(g,t,t===e.SyncType.BLOCKING?null:this,n);if(e.isNull(i)){this.m_pendingFAMQueryIdentifiers.removeElement(n)}}.bind(this))}}if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.executeRemoteAndPrequeries(t)}};e.InAQMgrStartupBlending.prototype.executeRemoteAndPrequeries=function(t){var r=this.m_syncAction.getQueryManager();var n=r.getServiceConfig();var i=n.getBlendingDefinition();var a=i.getSources();var o=i.getBlendingHost();n.setSystemName(o.getSystemName());this.m_implicitBatchStarted=false;this.m_hasPreQueries=false;if(i.isRemoteBlending()){if(!this.executeRemoteQueries(t,a,o)){return}}else{e.XCollectionUtils.forEach(a,function(e){e.getQueryModel().generateTransientObjects()}.bind(this))}var s=this.getBlendingPreQueries(a);if(s.hasElements()){var l=r.getPreQueryExecutor();if(!l.serializeRemotePreQueries(e.SyncType.BLOCKING,o.getSystemName(),s,null)){this.m_syncAction.addAllMessages(l);return}this.startImplicitBatchMode();this.executePreQueries(s,o);this.m_hasPreQueries=true}};e.InAQMgrStartupBlending.prototype.process=function(t,r){this.m_blendingMgrFunctionSupplier=t;this.m_blendingMgrSyncType=r;if(this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation()}e.XObjectExt.release(this)}};e.InAQMgrStartupBlending.prototype.executeBlendingQueryManagerCreation=function(){var t=this.m_blendingMgrFunctionSupplier.createBlendingFunction();if(this.m_hasPreQueries){t.processFunctionExecution(e.SyncType.NON_BLOCKING,this.m_syncAction,e.QueryManagerMode.BLENDING);this.stopImplicitBatchMode(this.m_implicitBatchStarted,this.m_blendingMgrSyncType)}else{t.processFunctionExecution(this.m_blendingMgrSyncType,this.m_syncAction,e.QueryManagerMode.BLENDING)}var r=this.m_syncAction.getQueryManager().getServiceConfig();var n=r.getBlendingDefinition().getSources();for(var i=0;i<n.size();i++){n.get(i).getQueryModel().destroyTransientObjects()}};e.InAQMgrStartupBlending.prototype.allQueriesExecuted=function(){for(var e=0;e<this.m_executedQueryManagers.size();e++){if(this.m_executedQueryManagers.get(e).getResultSetSyncState().isNotInSync()){return false}}for(var t=0;t<this.m_metadataSerializationFunctions.size();t++){if(this.m_metadataSerializationFunctions.get(t).getSyncState().isNotInSync()){return false}}if(!this.m_pendingFAMQueryIdentifiers.isEmpty()){return false}return true};e.InAQMgrStartupBlending.prototype.executeRemoteQueries=function(t,r,n){for(var i=0;i<r.size();i++){var a=r.get(i);var o=a.getQueryModel();o.setShouldUseActualTextField(true);var s=o.getQueryManager();a.setIsRemoteSource(!e.XString.isEqual(n.getSystemName(),this.getSystemName(a)));if(!o.getModelCapabilities().supportsRemoteBlending()||!n.supportsRemoteBlending()){e.noSupport()}if(a.isRemoteSource()){a.updatePersistenceIdentifier(n);var l=s.getOlapEnv();var u=!n.getSystemDescription().isSystemMappingValid(s.getSystemDescription())?l.getCachedRemoteBlendingData(s.getResultSetPersistenceIdentifier()):null;if(e.isNull(u)||e.XStringUtils.isNullOrEmpty(u.getView())){if(a.isDelayCubeRequest()&&s.getSystemType().isTypeOf(e.SystemType.HANA)){s.setResultSetPersistenceTargetType(e.BlendingPersistenceType.VIEW);var p=this.createHanaMetadataSerializationFunction(s);this.m_metadataSerializationFunctions.add(p);p.processFunctionExecution(t,this,a)}else{this.m_executedQueryManagers.add(s);s.processQueryExecutionAsBlendingSource(t,a.isDelayCubeRequest()?e.BlendingPersistenceType.VIEW:e.BlendingPersistenceType.ALL_DATA,this,a)}}else{s.getActiveResultSetContainer().setSerializedData(u.getView(),u.getCube())}}else{o.generateTransientObjects();if(o.getModelCapabilities().supportsCubeCache()){a.updatePersistenceIdentifier(null);o.addOptimizerHint(e.ExecutionEngine.MDS,e.OptimizerHint.CUBE_CACHE_WITH_ID.getName(),"true");this.m_executedQueryManagers.add(s);s.processQueryExecutionAsBlendingSource(t,e.BlendingPersistenceType.ALL_DATA,this,a)}}o.setShouldUseActualTextField(false)}return this.m_syncAction.isValid()};e.InAQMgrStartupBlending.prototype.onRemoteQueryExecuted=function(e,t){var r=t.getQueryModel();r.addQueryModelIdToMessages(e.getMessages());this.m_syncAction.addAllMessages(e)};e.InAQMgrStartupBlending.prototype.processBlendingQueryCreationIfQueriesFinished=function(){if(e.notNull(this.m_blendingMgrFunctionSupplier)&&this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation()}else{this.m_syncAction.callListeners(true)}e.XObjectExt.release(this)}};e.InAQMgrStartupBlending.prototype.onQueryExecuted=function(t,r,n){if(!this.m_pendingFAMQueryIdentifiers.isEmpty()&&e.XCollectionUtils.contains(this.m_pendingFAMQueryIdentifiers,function(e){return e===n}.bind(this))){this.m_pendingFAMQueryIdentifiers.removeElement(n);if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.executeRemoteAndPrequeries(this.m_blendingMgrSyncType)}}else{this.onRemoteQueryExecuted(t,n)}if(this.m_pendingFAMQueryIdentifiers.isEmpty()){this.processBlendingQueryCreationIfQueriesFinished()}};e.InAQMgrStartupBlending.prototype.createHanaMetadataSerializationFunction=function(t){var r=e.PrFactory.createStructure();var n=t.setInnerStructure(r,"Metadata",null);n.getStructureByKey("DataSource").remove("ValidationHash");var i=t.getResultSetPersistenceSchema();var a=t.getResultSetPersistenceTable();var o=n.putNewStructure("ResultSetFeatureRequest");o.putString("ResultFormat","SerializedData");if(e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XStringUtils.isNotNullAndNotEmpty(a)){o.putString("ResultSetPersistanceSchema",i);o.putString("ResultSetPersistanceTable",a);o.putString("ResultSetPersistanceIdentifier",t.getResultSetPersistenceIdentifier())}var s=t.createFunction();s.getRpcRequest().setRequestStructure(r);return s};e.InAQMgrStartupBlending.prototype.onFunctionExecuted=function(t,r,n){var i=n;var a=i.getQueryModel().getQueryManager();var o=null;var s=null;var l=r.getRootElement().getStructureByKey("SerializedData");if(t.isValid()&&e.notNull(l)){o=l.getStringByKey("View");s=l.getStringByKey("Cube");a.getOlapEnv().cacheRemoteBlendingData(a,o,s)}a.getActiveResultSetContainer().setSerializedData(o,s);this.onRemoteQueryExecuted(t,i);this.processBlendingQueryCreationIfQueriesFinished()};e.InAQMgrStartupBlending.prototype.getBlendingPreQueries=function(t){var r=e.XList.create();for(var n=0;n<t.size();n++){var i=t.get(n);var a=i.getQueryModel();if(!i.isRemoteSource()||i.isDelayCubeRequest()){if(a.getPreQueries()!==null){for(var o=0;o<a.getPreQueries().size();o++){var s=a.getLoadedDimensions();var l=a.getPreQueries().get(o);if(!e.XStream.of(s).anyMatch(function(t){return(t.getDimensionType()===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION||t.getDimensionType()===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION)&&(e.XString.isEqual(t.getPreQueryName(),l.getObjectId())||e.XString.isEqual(t.getPreQueryName(),l.getName()))}.bind(this))){r.add(a.getPreQueries().get(o))}}}}if(a.isBlendingModel()){r.addAll(this.getBlendingPreQueries(a.getBlendingSources()))}}return r};e.InAQMgrStartupBlending.prototype.startImplicitBatchMode=function(){var e=this.m_syncAction.getApplication().getConnectionPool();var t=this.m_syncAction.getQueryManager().getSystemName();if(e.isBatchModeEnabled(t)){this.m_implicitBatchStarted=false}else{e.enableBatchMode(t);this.m_implicitBatchStarted=true}};e.InAQMgrStartupBlending.prototype.stopImplicitBatchMode=function(e,t){if(e&&this.m_syncAction.getQueryManagerBase().getPreQueryName()===null){var r=this.m_syncAction.getApplication().getConnectionPool();var n=this.m_syncAction.getQueryManager().getSystemName();r.disableBatchMode(t,n)}};e.InAQMgrStartupBlending.prototype.executePreQueries=function(e,t){for(var r=0;r<e.size();r++){var n=e.get(r);var i=n.getObject().getQueryManager();i.getPreQueryExecutor().processExecutionAsPreQueryInBatch(t.getSystemName(),n.getName(),null)}};e.InAQMgrStartupBlending.prototype.getSystemName=function(e){var t=e.getQueryModel().getQueryManager();return t.getSystemName()};e.XCmdCreateQueryManager=function(){};e.XCmdCreateQueryManager.prototype=new e.XCommand;e.XCmdCreateQueryManager.prototype._ff_c="XCmdCreateQueryManager";e.XCmdCreateQueryManager.CLAZZ=null;e.XCmdCreateQueryManager.staticSetup=function(){e.XCmdCreateQueryManager.CLAZZ=e.XClass.create(e.XCmdCreateQueryManager)};e.XCmdCreateQueryManager.prototype.getCommandResultClass=function(){return e.XCmdCreateQueryManagerResult.CLAZZ};e.XCmdCreateQueryManagerResult=function(){};e.XCmdCreateQueryManagerResult.prototype=new e.XCommandResult;e.XCmdCreateQueryManagerResult.prototype._ff_c="XCmdCreateQueryManagerResult";e.XCmdCreateQueryManagerResult.CLAZZ=null;e.XCmdCreateQueryManagerResult.staticSetup=function(){e.XCmdCreateQueryManagerResult.CLAZZ=e.XClass.create(e.XCmdCreateQueryManagerResult)};e.XCmdCreateQueryManagerResult.prototype.process=function(){var t=this.getParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION);var r=this.getParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM);var n=this.getParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE);var i=this.getParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY);var a=e.QueryServiceConfig.create(t);a.setSystemName(r);a.setDataSource(this.createDataSource(n,i,a));var o=this.getParameter(e.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY);if(e.notNull(o)){a.setModellerContent(o)}if(e.notNull(i)){a.setDefinitionByStructure(e.QModelFormat.INA_REPOSITORY,i);var s=i.getStringByKeyExt("ExperimentalFeatures",null);var l=this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(a,s,l)}a.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdCreateQueryManagerResult.prototype.createDataSource=function(t,r,n){var i=e.QFactory.createDataSource();i.setFullQualifiedName(t);if(e.notNull(r)){var a=r.getStructureByKey("DataSource");if(e.notNull(a)){var o=e.QInAImportFactory.createForMetadata(n.getApplication(),null);o.importDataSourceExternalDimensions(a,i);var s=this.getParameter(e.CmdCreateQueryManager.PARAM_I_EXT_DIMS_INFO);e.XCommandUtil.updateExtendedDimensionPackages(i.getExtendedDimensionsBase(),s)}}return i};e.XCmdCreateQueryManagerResult.prototype.onQueryManagerCreated=function(t,r,n){this.getMessageManager().addAllMessages(t);if(t.isValid()){this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,r)}this.onProcessFinished()};e.XCmdDeserializeBlending=function(){};e.XCmdDeserializeBlending.prototype=new e.XCommand;e.XCmdDeserializeBlending.prototype._ff_c="XCmdDeserializeBlending";e.XCmdDeserializeBlending.CLAZZ=null;e.XCmdDeserializeBlending.staticSetup=function(){e.XCmdDeserializeBlending.CLAZZ=e.XClass.create(e.XCmdDeserializeBlending)};e.XCmdDeserializeBlending.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingResult.CLAZZ};e.XCmdDeserializeBlendingNodes=function(){};e.XCmdDeserializeBlendingNodes.prototype=new e.XCommand;e.XCmdDeserializeBlendingNodes.prototype._ff_c="XCmdDeserializeBlendingNodes";e.XCmdDeserializeBlendingNodes.CLAZZ=null;e.XCmdDeserializeBlendingNodes.staticSetup=function(){e.XCmdDeserializeBlendingNodes.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingNodes)};e.XCmdDeserializeBlendingNodes.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingNodesResult.CLAZZ};e.XCmdDeserializeBlendingResultBase=function(){};e.XCmdDeserializeBlendingResultBase.prototype=new e.XCommandResult;e.XCmdDeserializeBlendingResultBase.prototype._ff_c="XCmdDeserializeBlendingResultBase";e.XCmdDeserializeBlendingResultBase.prototype.m_queryManagers=null;e.XCmdDeserializeBlendingResultBase.prototype.m_aliases=null;e.XCmdDeserializeBlendingResultBase.prototype.m_sourceCount=0;e.XCmdDeserializeBlendingResultBase.prototype.m_importedSourcesCount=0;e.XCmdDeserializeBlendingResultBase.prototype.m_rootElement=null;e.XCmdDeserializeBlendingResultBase.prototype.releaseObject=function(){e.XCommandResult.prototype.releaseObject.call(this);this.m_queryManagers=e.XObjectExt.release(this.m_queryManagers);this.m_aliases=e.XObjectExt.release(this.m_aliases);this.m_rootElement=e.XObjectExt.release(this.m_rootElement)};e.XCmdDeserializeBlendingResultBase.prototype.process=function(){var t=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var r=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);var n=e.JsonParserFactory.newInstance();this.m_rootElement=n.parse(t);e.XObjectExt.release(n);var i=this.m_rootElement.getStructureByKey("DataSource");var a=i.getListByKey("Sources");this.m_aliases=e.XListOfString.create();this.m_queryManagers=e.XList.create();this.m_sourceCount=a.size();this.m_importedSourcesCount=0;for(var o=0;o<this.m_sourceCount;o++){var s=a.getStructureAt(o);var l=s.getStringByKey("AliasName");this.m_aliases.add(l);this.importSourceQueryModel(r,s,l,e.XIntegerValue.create(o))}};e.XCmdDeserializeBlendingResultBase.prototype.onCommandProcessed=function(t,r,n){this.getMessageManager().addAllMessages(t);e.MessageUtil.checkNoError(t);this.onQueryManagerImported(r,n.getInteger());this.m_importedSourcesCount++;if(this.m_importedSourcesCount===this.m_sourceCount){this.onAllQueryManagersImported()}};e.XCmdDeserializeBlendingResultBase.prototype.getDataSourceName=function(t){var r=e.QFactory.createDataSource();r.setType(e.MetaObjectType.lookup(t.getStringByKey("Type")));r.setSchemaName(t.getStringByKey("SchemaName"));r.setPackageName(t.getStringByKey("PackageName"));r.setObjectName(t.getStringByKey("ObjectName"));r.setDataArea(t.getStringByKey("DataArea"));return r.getFullQualifiedName()};e.XCmdDeserializeBlendingResultBase.prototype.getSystemName=function(t){var r=this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS);if(e.notNull(r)&&r.containsKey(t)){return r.getByKey(t)}var n=this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM);if(e.notNull(n)){return n}throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("No system found for query ",t,". Either parameter PARAM_I_SYSTEMS or PARAM_I_SYSTEM must be set."))};e.XCmdDeserializeBlendingSources=function(){};e.XCmdDeserializeBlendingSources.prototype=new e.XCommand;e.XCmdDeserializeBlendingSources.prototype._ff_c="XCmdDeserializeBlendingSources";e.XCmdDeserializeBlendingSources.CLAZZ=null;e.XCmdDeserializeBlendingSources.staticSetup=function(){e.XCmdDeserializeBlendingSources.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingSources)};e.XCmdDeserializeBlendingSources.prototype.getCommandResultClass=function(){return e.XCmdDeserializeBlendingSourcesResult.CLAZZ};e.XCmdDeserializeCalculatedDimension=function(){};e.XCmdDeserializeCalculatedDimension.prototype=new e.XCommand;e.XCmdDeserializeCalculatedDimension.prototype._ff_c="XCmdDeserializeCalculatedDimension";e.XCmdDeserializeCalculatedDimension.CLAZZ=null;e.XCmdDeserializeCalculatedDimension.staticSetup=function(){e.XCmdDeserializeCalculatedDimension.CLAZZ=e.XClass.create(e.XCmdDeserializeCalculatedDimension)};e.XCmdDeserializeCalculatedDimension.prototype.getCommandResultClass=function(){return e.XCmdDeserializeCalculatedDimensionResult.CLAZZ};e.XCmdDeserializeCalculatedDimensionResult=function(){};e.XCmdDeserializeCalculatedDimensionResult.prototype=new e.XCommandResult;e.XCmdDeserializeCalculatedDimensionResult.prototype._ff_c="XCmdDeserializeCalculatedDimensionResult";e.XCmdDeserializeCalculatedDimensionResult.CLAZZ=null;e.XCmdDeserializeCalculatedDimensionResult.staticSetup=function(){e.XCmdDeserializeCalculatedDimensionResult.CLAZZ=e.XClass.create(e.XCmdDeserializeCalculatedDimensionResult)};e.XCmdDeserializeCalculatedDimensionResult.getDataSourceName=function(t){var r=e.XStringBuffer.create();r.append(t.getStringByKey("Type"));r.append(":[");r.append(t.getStringByKey("SchemaName"));r.append("][");r.append(t.getStringByKey("PackageName"));r.append("][");r.append(t.getStringByKey("ObjectName"));r.append("]");return r.toString()};e.XCmdDeserializeCalculatedDimensionResult.prototype.m_inaQueryModels=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.m_systemName=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.m_application=null;e.XCmdDeserializeCalculatedDimensionResult.prototype.releaseObject=function(){this.m_inaQueryModels=null;this.m_systemName=null;this.m_application=null;e.XCommandResult.prototype.releaseObject.call(this)};e.XCmdDeserializeCalculatedDimensionResult.prototype.process=function(){var t=this.getParameterStringStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_QUERY_MODELS_STRING_INA_REPOSITORY);var r=e.JsonParserFactory.newInstance();var n=r.parse(t);e.XObjectExt.release(r);this.m_inaQueryModels=n.getListByKey("Queries");this.m_application=this.getParameterStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_APPLICATION);this.m_systemName=this.getParameterStringStrict(e.CmdDeserializeCalculatedDimension.PARAM_I_SYSTEM);var i=this.m_inaQueryModels.getStructureAt(this.m_inaQueryModels.size()-1);this.importQueryModel(i,null);this.onProcessFinished()};e.XCmdDeserializeCalculatedDimensionResult.prototype.importQueryModel=function(t,r){var n=e.QueryServiceConfig.createWithDataSourceName(this.m_application,this.m_systemName,e.XCmdDeserializeCalculatedDimensionResult.getDataSourceName(t.getStructureByKey("DataSource")));n.setDefinitionByStructure(e.QModelFormat.INA_REPOSITORY,t);n.processQueryManagerCreation(this.getSyncType(),this,r)};e.XCmdDeserializeCalculatedDimensionResult.prototype.onQueryManagerCreated=function(t,r,n){this.getMessageManager().addAllMessages(t);if(t.isValid()){if(e.notNull(n)){var i=n;i.getObject().getQueryModel().addPreQueryWithName(r.getQueryModel(),i.getName())}var a=r.getInitSettings().getDefinitionAsStructure().getListByKey("PreQueryNames");if(e.notNull(a)){var o=a.size();var s=this.m_inaQueryModels.size()-1;for(var l=0;l<o;l++){var u=a.getStringAt(l);for(var p=0;p<s;p++){var g=this.m_inaQueryModels.getStructureAt(p);if(e.XString.isEqual(u,g.getStringByKey("Name"))){this.importQueryModel(g,e.XNameWeakGenericPair.create(u,r))}}}}}if(e.isNull(n)){this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,r)}};e.XCmdDeserializeExtendedDimension=function(){};e.XCmdDeserializeExtendedDimension.prototype=new e.XCommand;e.XCmdDeserializeExtendedDimension.prototype._ff_c="XCmdDeserializeExtendedDimension";e.XCmdDeserializeExtendedDimension.CLAZZ=null;e.XCmdDeserializeExtendedDimension.staticSetup=function(){e.XCmdDeserializeExtendedDimension.CLAZZ=e.XClass.create(e.XCmdDeserializeExtendedDimension)};e.XCmdDeserializeExtendedDimension.prototype.getCommandResultClass=function(){return e.XCmdDeserializeExtendedDimensionResult.CLAZZ};e.XCmdDeserializeExtendedDimensionResult=function(){};e.XCmdDeserializeExtendedDimensionResult.prototype=new e.XCommandResult;e.XCmdDeserializeExtendedDimensionResult.prototype._ff_c="XCmdDeserializeExtendedDimensionResult";e.XCmdDeserializeExtendedDimensionResult.CLAZZ=null;e.XCmdDeserializeExtendedDimensionResult.staticSetup=function(){e.XCmdDeserializeExtendedDimensionResult.CLAZZ=e.XClass.create(e.XCmdDeserializeExtendedDimensionResult)};e.XCmdDeserializeExtendedDimensionResult.prototype.process=function(){var t=this.getParameterStringStrict(e.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var r=e.JsonParserFactory.newInstance();var n=r.parse(t);e.XObjectExt.release(r);var i=n.getStructureByKey("DataSource");var a=this.getParameterStrict(e.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL);var o=a.getDataSource().cloneOlapComponent(null,null);var s=e.QInAImportFactory.createForRepository(a.getApplication(),null);s.importDataSourceExternalDimensions(i,o);var l=this.getParameter(e.CmdDeserializeExtendedDimension.PARAM_I_EXT_DIMS_INFO);e.XCommandUtil.updateExtendedDimensionPackages(o.getExtendedDimensionsBase(),l);var u=e.QueryServiceConfig.createWithDataSource(a.getApplication(),o.getSystemName(),o);var p=n.getStringByKeyExt("ExperimentalFeatures",null);var g=this.getParameter(e.CmdDeserializeExtendedDimension.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(u,p,g);u.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeExtendedDimensionResult.prototype.onQueryManagerCreated=function(t,r,n){this.getMessageManager().addAllMessages(t);if(t.isValid()){var i=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var a=r.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,i);this.getMessageManager().addAllMessages(a);this.addResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,r)}this.onProcessFinished()};e.QCsnComponentMetadata=function(){};e.QCsnComponentMetadata.prototype=new e.QInAComponentWithStructure;e.QCsnComponentMetadata.prototype._ff_c="QCsnComponentMetadata";e.QCsnComponentMetadata.prototype.getModelFormat=function(){return e.QModelFormat.CSN_METADATA};e.QCsnComponentMetadata.prototype.getDimExternalName=function(t){var r=t.getExternalName();return e.XStringUtils.isNotNullAndNotEmpty(r)?r:t.getName()};e.QCsnComponentMetadata.prototype.getFieldName=function(t){var r=t.getName();var n=t.getDimension().getName();if(e.XString.startsWith(r,n)){r=e.XString.substring(r,e.XString.size(n)+1,e.XString.size(r))}return r};e.QRsInfoExport=function(){};e.QRsInfoExport.prototype=new e.XObjectExt;e.QRsInfoExport.prototype._ff_c="QRsInfoExport";e.QRsInfoExport.prototype.setupImportExport=function(e,t,r,n){};e.QRsInfoExport.prototype.exportComponent=function(t,r,n,i){var a=e.PrFactory.createStructure();var o=r.getComponentType();if(o===e.OlapComponentType.QUERY_MODEL){var s=r;var l=a.putNewStructure(e.RenderConstants.DIMENSIONS);var u=a.putNewStructure(e.RenderConstants.AXES);var p=s.getRowsAxis();this.exportAxis(p,l,u);var g=s.getColumnsAxis();this.exportAxis(g,l,u)}return a};e.QRsInfoExport.prototype.exportAxis=function(t,r,n){var i=n.putNewStructure(t.getName());var a=i.putNewList(e.RenderConstants.LAYOUT);for(var o=0;o<t.size();o++){var s=a.addNewStructure();var l=t.get(o);s.putString(e.RenderConstants.DIMENSION_NAME,l.getName());var u=r.putNewStructure(l.getName());var p=l.getLoadedStructureMembers();u.putString(e.RenderConstants.NAME,l.getName());u.putString(e.RenderConstants.TEXT,l.getText());if(e.notNull(p)){var g=u.putNewStructure(e.RenderConstants.MEMBERS);for(var c=0;c<p.size();c++){var m=p.get(c);if(e.notNull(m)){var y=g.putNewStructure(m.getName());y.putString(e.RenderConstants.NAME,m.getName());y.putString(e.RenderConstants.ALIAS_NAME,m.getAliasName());y.putString(e.RenderConstants.TEXT,m.getAliasName())}}}}};e.QRsInfoExport.prototype.exportMemberHelpRequest=function(e,t,r){return null};e.QRsInfoExport.prototype.exportPlanningVariableHelpRequest=function(e,t,r){return null};e.QRsInfoExport.prototype.exportVariableHelpRequest=function(e,t,r){return null};e.QRsInfoExport.prototype.exportDataSource=function(e,t){return null};e.QRsInfoExport.prototype.exportQueryModel=function(e,t,r){return null};e.QRsInfoExport.prototype.exportLovRequest=function(e,t,r,n){return null};e.QRsInfoExport.prototype.exportCustomHierarchyDefinition=function(e){return null};e.QRsInfoExport.prototype.exportVariables=function(e,t){return null};e.QRsInfoExport.prototype.exportVariableList=function(e){return null};e.QRsInfoExport.prototype.exportStructureDimension=function(e){return null};e.QRsInfoExport.prototype.exportBlendingMappings=function(e){return null};e.QRsInfoExport.prototype.exportHierarchy=function(e,t){};e.QInAComponentMetadata=function(){};e.QInAComponentMetadata.prototype=new e.QInAComponentWithStructure;e.QInAComponentMetadata.prototype._ff_c="QInAComponentMetadata";e.QInAComponentMetadata.prototype.getModelFormat=function(){return e.QModelFormat.INA_METADATA_CORE};e.QInAComponentMetadata.prototype.extendCustom=function(t,r,n){var i=this.getComponentType();var a=e.QInAConverter.lookupComponentTypeInA(i);if(e.notNull(a)){n.putString("CType",a)}return n};e.QInAAttribute=function(){};e.QInAAttribute.prototype=new e.QInAComponentWithStructure;e.QInAAttribute.prototype._ff_c="QInAAttribute";e.QInAAttribute.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInAAttribute.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=r.getStringByKey("Name");var l=o.getAttributeByName(s);if(e.notNull(l)){var u=r.getListByKey("ResultSetFields");if(e.notNull(u)){var p=l.getResultSetFields();p.clear();var g=u.size();for(var c=0;c<g;c++){var m=l.getFieldByName(u.getStringAt(c));if(e.notNull(m)){p.add(m)}}}}return l};e.QInAAttribute.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;r.putString("Name",i.getName());var a=r.putNewList("ResultSetFields");var o=i.getResultSetFields();var s=o.size();for(var l=0;l<s;l++){a.addString(o.get(l).getName())}return r};e.QInAAxesSettings=function(){};e.QInAAxesSettings.prototype=new e.QInAComponentWithList;e.QInAAxesSettings.prototype._ff_c="QInAAxesSettings";e.QInAAxesSettings.isDefinedZeroSuppression=function(t){if(e.notNull(t)&&e.XCollectionUtils.hasElements(t)&&t.getZeroSuppressionType()!==e.ZeroSuppressionType.NONE){var r=e.XCollectionUtils.findFirst(t.getValuesAsReadOnlyList(),function(t){return!e.QInAExportUtil.isFormulaCalculatedDimensionHidden(t)}.bind(this));return e.notNull(r)}return false};e.QInAAxesSettings.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInAAxesSettings.prototype.getTagName=function(){return"Axes"};e.QInAAxesSettings.prototype.importComponentWithList=function(t,r,n,i,a){var o=a.getQueryModel();if(e.notNull(r)){if(t.capabilities.supportsZeroSuppression()||t.capabilities.supportsNullZeroSuppression()){var s=e.AxisType.getAll();var l=s.size();for(var u=0;u<l;u++){var p=o.getAxisBase(s.get(u));if(e.notNull(p)){p.setSupportsZeroSuppression(true)}}}var g=r.size();for(var c=0;c<g;c++){t.importAxis(r.getStructureAt(c),null,a)}}else if(t.capabilities.supportsNullZeroSuppression()){this.initializeAxisForNullSuppression(o.getAxisBase(e.AxisType.ROWS));this.initializeAxisForNullSuppression(o.getAxisBase(e.AxisType.COLUMNS))}return null};e.QInAAxesSettings.prototype.initializeAxisForNullSuppression=function(t){t.setSupportsZeroSuppression(true);t.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_ZERO);t.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_NULL)};e.QInAAxesSettings.prototype.exportComponentWithList=function(t,r,n){var i=r;var a=e.PrFactory.createList();var o=i.getColumnsAxis();if(t.isAbap(i)||e.QInAAxesSettings.isDefinedZeroSuppression(o)){var s=t.exportAxis(o,null);a.add(s)}var l=i.getRowsAxis();if(t.isAbap(i)||e.QInAAxesSettings.isDefinedZeroSuppression(l)){var u=t.exportAxis(l,null);a.add(u)}return a};e.QInAAxis=function(){};e.QInAAxis.prototype=new e.QInAComponentWithStructure;e.QInAAxis.prototype._ff_c="QInAAxis";e.QInAAxis.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInAAxis.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=t.capabilities.supportsZeroSuppression();var s=t.capabilities.supportsNullZeroSuppression();var l;var u=r.getStringByKey("Axis");if(e.isNull(u)){l=e.QInAConverter.lookupAxisTypeInt(r.getIntegerByKey("Type"))}else{l=e.QInAConverter.lookupAxisType(u)}var p=a.getQueryModel();var g=p.getAxisBase(l);if(e.notNull(g)){if(o||s){var c=r.getIntegerByKey("ZeroSuppressionType");var m=e.QInAConverter.lookupSuppressionType(c);g.setZeroSuppressionType(m);g.setDefaultZeroSuppression(m);g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_ZERO)}if(o){g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.TOTAL_IS_ZERO)}else if(s){g.addAvailableZeroSuppressionType(e.ZeroSuppressionType.ALL_CELLS_ARE_NULL)}t.importTotals(r,g.getResultStructureControllerBase(),a)}return g};e.QInAAxis.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o));n.putInteger("Type",e.QInAConverter.lookupAxisTypeInAInt(o));var s=a.getZeroSuppressionType();n.putInteger("ZeroSuppressionType",e.QInAConverter.lookupSuppressionTypeInA(s));t.exportTotals(a.getResultStructureController(),n);return n};e.QInACellContext=function(){};e.QInACellContext.prototype=new e.QInAComponentWithStructure;e.QInACellContext.prototype._ff_c="QInACellContext";e.QInACellContext.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT};e.QInACellContext.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=null;var s=r.getStringByKey("Name");if(e.isNull(n)){o=e.QCellContext._create(a,s,i)}else if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT){o=n}o.setRowIndex(r.getIntegerByKeyExt("Row",-1));o.setColumnIndex(r.getIntegerByKeyExt("Column",-1));o.setExternalKeys(r.getBooleanByKeyExt("ExternalKeys",false));o.setComponentsExternal(r.getBooleanByKeyExt("ComponentsExternal",false));o.setComponentsInternal(r.getBooleanByKeyExt("ComponentsInternal",false));var l=r.getListByKey("CellContextPaths");if(!e.PrUtils.isListEmpty(l)){var u=l.size();for(var p=0;p<u;p++){var g=l.getStructureAt(p);var c=e.QInAConverter.lookupAxisType(g.getStringByKey("Axis"));var m=g.getListByKey("CellContextMembers");var y=m.size();var d=e.XList.create();for(var A=0;A<y;A++){var I=m.getStructureAt(A);d.add(t.importDrillPathElement(I,o,a))}o.setTupleContextForAxis(d,c)}}return o};e.QInACellContext.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=n;if(e.isNull(o)){o=e.PrFactory.createStructure()}o.putString("Name",a.getName());if(a.getRowIndex()>-1){o.putInteger("Row",a.getRowIndex())}if(a.getColumnIndex()>-1){o.putInteger("Column",a.getColumnIndex())}if(a.isExternalKeys()){o.putBoolean("ExternalKeys",a.isExternalKeys())}if(a.isComponentsExternal()){o.putBoolean("ComponentsExternal",a.isComponentsExternal())}if(a.isComponentsInternal()){o.putBoolean("ComponentsInternal",a.isComponentsInternal())}var s=a.getAxisContexts();if(e.XCollectionUtils.hasElements(s)){var l=o.putNewList("CellContextPaths");var u=s.getKeysAsIterator();while(u.hasNext()){var p=u.next();var g=s.getByKey(p);if(e.XCollectionUtils.hasElements(g)){var c=l.addNewStructure();c.putString("Axis",e.QInAConverter.lookupAxisTypeInA(p));var m=c.putNewList("CellContextMembers");var y=g.size();for(var d=0;d<y;d++){m.add(t.exportDrillPathElement(g.get(d),true))}}}}return n};e.QInACellContextManager=function(){};e.QInACellContextManager.prototype=new e.QInAComponentWithList;e.QInACellContextManager.prototype._ff_c="QInACellContextManager";e.QInACellContextManager.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT_MANAGER};e.QInACellContextManager.prototype.getTagName=function(){return"CellContextRequests"};e.QInACellContextManager.prototype.importComponentWithList=function(t,r,n,i,a){if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT_MANAGER){var o=n;if(e.notNull(r)){o.clear();var s=r.size();for(var l=0;l<s;l++){o.addCellContext(t.importCellContext(r.getStructureAt(l),o,a))}}}return n};e.QInACellContextManager.prototype.exportComponentWithList=function(t,r,n){var i=null;if(t.capabilities.supportsDataCellContexts()){var a=r;if(e.XCollectionUtils.hasElements(a)){i=e.PrFactory.createList();for(var o=0;o<a.size();o++){i.add(t.exportCellContext(a.get(o)))}}}return i};e.QInAConditionManager=function(){};e.QInAConditionManager.prototype=new e.QInAComponentWithList;e.QInAConditionManager.prototype._ff_c="QInAConditionManager";e.QInAConditionManager.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInAConditionManager.prototype.getTagName=function(){return"Conditions"};e.QInAConditionManager.prototype.importComponentWithList=function(t,r,n,i,a){var o=n;if(e.notNull(o)){var s=a.getQueryModel();var l=s.getQueryManagerBase();var u=e.notNull(l)&&l.isExecuteAutoVariableSubmit()&&l.isProcessingAutoSubmit();if(!u){o.clear()}if(e.notNull(r)){var p=r.size();for(var g=0;g<p;g++){var c=r.getStructureAt(g);if(u){var m=c.getStringByKey("Name");var y=o.getByKey(m);t.importCondition(s,c,y)}else{var d=t.importCondition(s,c,null);o.add(d)}}}}return o};e.QInAConditionManager.prototype.exportComponentWithList=function(t,r,n){var i=r;if(e.notNull(i)){var a;if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){a=i.getEffectiveConditions()}else{a=i}var o=a.size();if(o>0){var s=e.PrFactory.createList();for(var l=0;l<o;l++){var u=t.exportCondition(a.get(l));if(e.notNull(u)&&!u.isEmpty()){s.add(u)}}if(s.isEmpty()){return null}return s}}return null};e.QInAConditionsCondition=function(){};e.QInAConditionsCondition.prototype=new e.QInAComponentWithStructure;e.QInAConditionsCondition.prototype._ff_c="QInAConditionsCondition";e.QInAConditionsCondition.exportBreakGroupDimensionList=function(t){if(e.isNull(t)){return null}var r=e.PrFactory.createList();var n=t.getBreakGroupDimensions();var i=n.size();for(var a=0;a<i;a++){r.addString(n.get(a).getName())}return r};e.QInAConditionsCondition.exportEvaluateOnDimensionsList=function(t){if(e.isNull(t)){return null}var r=e.PrFactory.createList();var n=t.getEvaluationDimensions();var i=n.size();for(var a=0;a<i;a++){r.addString(n.get(a).getName())}return r};e.QInAConditionsCondition.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInAConditionsCondition.prototype.importComponentWithStructure=function(t,r,n,i,a){if(e.isNull(r)){return n}var o;var s=r.getStringByKey("Name");if(e.isNull(n)){if(t.getMode()===e.QModelFormat.INA_REPOSITORY){var l=r.getBooleanByKeyExt("IsBackendCondition",true);o=e.QCondition.create(a,i,s,l)}else{o=e.QCondition.create(a,i,s,true)}}else{o=n;o.clearThresholds();o.clearEvaluationDimensions()}o.setActive(r.getBooleanByKey("Active"));o.setUsedState(r.getStringByKey("IsUsed"));o.setDescription(r.getStringByKey("Description"));var u=r.getStringByKey("OnDisabled");o.setApplyConditionAfterVisibilityFilter(r.getBooleanByKeyExt("AfterVisibilityFilter",false));if(e.notNull(u)){if(e.XString.isEqual(u,"Error")){o.setOnDisabledToWarning(false)}}var p=r.getStringByKey("EvaluateOnDimensions");var g=e.ConditionDimensionEvaluationType.lookupName(p);if(e.notNull(g)){o.setDimensionEvaluationType(g)}var c=a.getQueryModel();var m=r.getListByKey("EvaluateOnDimensionsList");var y;var d;if(!e.PrUtils.isListEmpty(m)&&e.notNull(c)){y=m.size();for(d=0;d<y;d++){var A=m.getStringAt(d);if(e.notNull(A)){var I=c.getDimensionByNameFromExistingMetadata(A);if(e.notNull(I)){o.addEvaluationDimension(I)}}}}var S=r.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(S)){var f=S.size();for(var v=0;v<f;v++){var C=S.getStructureAt(v);if(e.notNull(C)){o.addThreshold(t.importConditionThreshold(c,C,null,o))}}}o.setBreakGroup(r.getBooleanByKeyExt("BreakGroup",false));var N=r.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(N)&&e.notNull(c)){y=N.size();for(d=0;d<y;d++){var E=N.getStringAt(d);if(e.notNull(E)){var M=c.getDimensionByNameFromExistingMetadata(E);if(e.notNull(M)){o.addBreakGroupDimension(M)}}}}return o};e.QInAConditionsCondition.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getQueryModel();var s=o.getSystemType().isTypeOf(e.SystemType.HANA);if(t.getMode()===e.QModelFormat.INA_REPOSITORY){n.putBoolean("IsBackendCondition",a.isBackendCondition())}n.putBoolean("Active",a.isActive());if(a.isApplyingConditionAfterVisibilityFilter()){n.putBoolean("AfterVisibilityFilter",true)}if(s){n.putStringNotNullAndNotEmpty("Description",a.getDescription())}else{n.putString("Description",a.getDescription())}n.putString("Name",a.getName());var l=a.getDimensionEvaluationType();n.putString("EvaluateOnDimensions",l.getName());if(l===e.ConditionDimensionEvaluationType.GIVEN_LIST){var u=e.QInAConditionsCondition.exportEvaluateOnDimensionsList(a);n.put("EvaluateOnDimensionsList",u)}var p=a.getThresholds();var g=p.size();if(g>0){var c=e.PrFactory.createList();for(var m=0;m<g;m++){var y=t.exportConditionThreshold(p.get(m));if(e.notNull(y)){c.add(y)}}if(!c.isEmpty()){n.put("Threshold",c)}else{return null}}if(s){if(e.XCollectionUtils.hasElements(o.getPreQueries())&&!a.getOnDisabledToWarning()){n.putString("OnDisabled","Error")}var d=a.isBreakGroup();if(d){n.putBoolean("BreakGroup",true);var A=e.QInAConditionsCondition.exportBreakGroupDimensionList(a);n.put("BreakGroupList",A)}if(a.isBreakHierarchy()){n.putBoolean("BreakHierarchy",true)}}return n};e.QInAConditionsThreshold=function(){};e.QInAConditionsThreshold.prototype=new e.QInAComponentWithStructure;e.QInAConditionsThreshold.prototype._ff_c="QInAConditionsThreshold";e.QInAConditionsThreshold.importSingleMeasureCoordinate=function(t,r,n){if(e.isNull(r)||e.isNull(n)){return}var i=n.getStringByKey("DimensionName");var a=n.getStringByKey("MemberName");if(e.XStringUtils.isNullOrEmpty(i)||e.XStringUtils.isNullOrEmpty(a)){return}var o=t;if(e.isNull(o)){o=r.getContext().getQueryModel()}if(e.notNull(o)){var s=o.getDimensionByNameFromExistingMetadata(i);if(e.notNull(s)){var l=s.getDimensionMember(a);if(e.notNull(l)){r.addMeasureCoordinate(l)}}}};e.QInAConditionsThreshold.importThresholdValue=function(t,r){if(e.isNull(t)||e.isNull(r)){return}if(r.isBoolean()){t.setBoolean(r.getBoolean())}else if(r.isString()){t.setString(r.getString())}else if(r.isDouble()){t.setDouble(r.getDouble())}else if(r.isInteger()){t.setInteger(r.getInteger())}else if(r.isLong()){t.setLong(r.getLong())}};e.QInAConditionsThreshold.setValue=function(t,r,n,i,a){if(a===e.XValueType.VARIABLE){var o=i.getVariableValue();if(e.notNull(o)){n.putString(r,o.getName());if(e.XString.isEqual(r,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){n.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,r,n,i,a,i.getQueryModel())}};e.QInAConditionsThreshold.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_THRESHOLD};e.QInAConditionsThreshold.prototype.importComponentWithStructure=function(t,r,n,i,a){if(e.isNull(r)){return n}var o;if(e.isNull(n)){o=e.QConditionThreshold.create(a,i)}else{o=n}var s=r.getStringByKey("Comparison");var l=e.ConditionComparisonOperator.lookupName(s);if(e.notNull(l)){o.setComparisonOperator(l)}var u=r.getByKey("Low");e.QInAConditionsThreshold.importThresholdValue(o.getLow(),u);var p=r.getByKey("LowIs");e.QInAConditionsThreshold.importThresholdValue(o.getLowIs(),p);var g=r.getByKey("High");e.QInAConditionsThreshold.importThresholdValue(o.getHigh(),g);var c=r.getByKey("HighIs");e.QInAConditionsThreshold.importThresholdValue(o.getHighIs(),c);var m=r.getListByKey("MeasureCoordinate");if(e.notNull(m)){var y=a.getQueryModel();var d=m.size();for(var A=0;A<d;A++){e.QInAConditionsThreshold.importSingleMeasureCoordinate(y,o,m.getStructureAt(A))}}o.setLeavesOnly(r.getBooleanByKeyExt("LeavesOnly",false));var I=r.getByKey("Level");if(e.notNull(I)){o.setLevel(e.XIntegerValue.create(I.getInteger()))}return o};e.QInAConditionsThreshold.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getMeasureCoordinates();var s=e.PrFactory.createList();var l=o.size();var u=a.getQueryModel();for(var p=0;p<l;p++){var g=o.get(p);var c=e.PrFactory.createStructure();var m=g.getDimension().getName();var y=u.getDimensionByName(m);var d=g.getName();var A=e.QInAExportUtil.getMeasureMemberNameByAlias(u,d,t);if(e.XStringUtils.isNotNullAndNotEmpty(A)&&(y.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE||y.getDimensionType()===e.DimensionType.ACCOUNT)){d=A}if(y.getDimensionType()!==e.DimensionType.MEASURE_STRUCTURE||y.getStructureMember(d)!==null){c.putString("DimensionName",m);c.putString("MemberName",d);s.add(c)}}if(l===0||s.isEmpty()){return null}n.put("MeasureCoordinate",s);var I=u.getSystemType().isTypeOf(e.SystemType.HANA);var S=a.getLow();var f=a.getHigh();if(I){if(S.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"Low",n,S,e.XValueType.INTEGER)}if(f.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"High",n,f,e.XValueType.INTEGER)}var v=a.getLevel();if(e.notNull(v)){n.putInteger("Level",v.getInteger())}}else{if(S.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"Low",n,S,S.getValueType())}if(f.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"High",n,f,f.getValueType())}var C=a.getLowIs();if(C.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"LowIs",n,C,C.getValueType())}var N=a.getHighIs();if(N.getValue()!==null){e.QInAConditionsThreshold.setValue(t,"HighIs",n,N,N.getValueType())}}var E=a.getComparisonOperator();n.putString("Comparison",E.getName());return n};e.QInACurrencyTranslationItem=function(){};e.QInACurrencyTranslationItem.prototype=new e.QInAComponentWithStructure;e.QInACurrencyTranslationItem.prototype._ff_c="QInACurrencyTranslationItem";e.QInACurrencyTranslationItem.createConditonalFormula=function(t,r,n){if(e.isNull(t)&&e.isNull(r)){return null}if(e.isNull(t)){return e.QInACurrencyTranslationItem.createRateTypeCategory(r,n)}if(e.isNull(r)){return e.QInACurrencyTranslationItem.createRateTypeVersion(t,n)}var i=e.QFactory.createFormulaFunction(null);i.setFunctionName(e.FormulaOperator.IF.getName());var a=e.QFactory.createFormulaFunction(null);var o=e.QFactory.createFormulaAttributeWithName(null,t);a.setFunctionName(e.FormulaOperator.EQ.getName());a.add(o);var s=e.QFactory.createFormulaConstant(null);s.setString("");a.add(s);i.add(a);i.add(e.QInACurrencyTranslationItem.createRateTypeCategory(r,n));i.add(e.QInACurrencyTranslationItem.createRateTypeVersion(t,n));return i};e.QInACurrencyTranslationItem.createRateTypeVersion=function(t,r){var n=e.QFactory.createFormulaFunction(null);n.setFunctionName(e.FormulaOperator.ADDITION.getName());var i=e.QFactory.createFormulaConstant(null);i.setString("Version$");var a=e.QFactory.createFormulaConstant(null);a.setString("$");var o=e.QFactory.createFormulaAttributeWithName(null,t);n.add(i);n.add(r);n.add(a);n.add(o);return n};e.QInACurrencyTranslationItem.createRateTypeCategory=function(t,r){var n=e.QFactory.createFormulaFunction(null);n.setFunctionName(e.FormulaOperator.ADDITION.getName());var i=e.QFactory.createFormulaAttributeWithName(null,t);var a=e.QFactory.createFormulaConstant(null);a.setString("$");n.add(i);n.add(a);n.add(r);return n};e.QInACurrencyTranslationItem.resolveRateName=function(t){var r=null;var n=t.getRateName();if(e.notNull(n)&&(n.isFieldBased()||n.isFixed()||n.isFormulaBased())){r=n}else{var i=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t);var a=i.getRateTypeFieldName();var o=i.getRateVersionFieldName();var s=i.getCategoryFieldName();var l=t.getFixedRateType();var u=t.getFixedCategory();var p=t.getFixedRateVersion();if(e.CtRateType.isDefined(l)){if(e.CtCategory.isDefined(u)){r=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(e.XStringUtils.concatenate3(e.QInAConverter.lookupCategoryInA(u),"$",e.QInAConverter.lookupRateTypeInA(l))))}else if(e.XStringUtils.isNotNullAndNotEmpty(p)){r=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(e.XStringUtils.concatenate4("Version$",e.QInAConverter.lookupRateTypeInA(l),"$",p)))}else{var g=e.QFactory.createFormulaConstant(null);g.setString(e.QInAConverter.lookupRateTypeInA(l));var c=e.QInACurrencyTranslationItem.createConditonalFormula(o,s,g);if(e.notNull(c)){r=e.QCurrencyLookupValue.createByFormulaItem(null,c)}}}else if(i.deriveRateTypeFromAccount()&&e.notNull(a)){var m=e.QFactory.createFormulaAttributeWithName(null,a);if(e.CtCategory.isDefined(u)){var y=e.QFactory.createFormulaFunction(null);y.setFunctionName(e.FormulaOperator.ADDITION.getName());var d=e.QFactory.createFormulaConstant(null);d.setString(e.QInAConverter.lookupCategoryInA(u));var A=e.QFactory.createFormulaConstant(null);A.setString("$");y.add(d);y.add(A);y.add(m);r=e.QCurrencyLookupValue.createByFormulaItem(null,y)}else if(e.XStringUtils.isNotNullAndNotEmpty(p)){var I=e.QFactory.createFormulaFunction(null);I.setFunctionName(e.FormulaOperator.ADDITION.getName());var S=e.QFactory.createFormulaConstant(null);S.setString("Version$");var f=e.QFactory.createFormulaConstant(null);f.setString("$");var v=e.QFactory.createFormulaConstant(null);v.setString(p);I.add(S);I.add(m);I.add(f);I.add(v);r=e.QCurrencyLookupValue.createByFormulaItem(null,I)}else{var C=e.QInACurrencyTranslationItem.createConditonalFormula(o,s,m);if(e.notNull(C)){r=e.QCurrencyLookupValue.createByFormulaItem(null,C)}}}else{var N=e.XStringBuffer.create();N.append("The currency translation object '");N.append(t.getName());N.append("' is not fully specified. The rate type cannot be derived from the model properties.");throw e.XException.createIllegalStateException(N.toString())}}return r};e.QInACurrencyTranslationItem.resolveReferenceDate=function(t){var r=null;var n=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t).getDefaultReferenceDateFieldName();var i=t.getReferenceDate();if(t.getDateOffset()===0){if(e.notNull(i)&&(i.isFixed()||i.isFieldBased()||i.isFormulaBased())){r=i}else if(e.notNull(n)){r=e.QCurrencyLookupValue.createByFieldName(null,n)}}else{var a;if(e.notNull(i)&&i.isFieldBased()){a=i.getFieldName()}else{a=n}if(e.notNull(a)){var o=e.QFactory.createFormulaFunction(null);var s=e.QFactory.createFormulaAttributeWithName(null,a);o.add(s);var l=e.QFactory.createFormulaConstant(null);var u=t.getDateOffsetGranularity();var p=t.getDateOffset();if(u===e.DateOffsetGranularity.DAY){o.setFunctionName("CALCADDDAYS");l.setInteger(p)}else if(u===e.DateOffsetGranularity.WEEK){o.setFunctionName("CALCADDDAYS");l.setInteger(p*7)}else if(u===e.DateOffsetGranularity.MONTH){o.setFunctionName("CALCADDMONTHS");l.setInteger(p)}else if(u===e.DateOffsetGranularity.QUARTER){o.setFunctionName("CALCADDMONTHS");l.setInteger(p*3)}else if(u===e.DateOffsetGranularity.YEAR){o.setFunctionName("CALCADDYEARS");l.setInteger(p)}o.add(l);r=e.QCurrencyLookupValue.createByFormulaItem(null,o)}}return r};e.QInACurrencyTranslationItem.resolveTargetCurrency=function(t){var r;if(t.isDefaultCurrency()){var n=e.QInACurrencyTranslationItem.getCurrencyTranslationManager(t);r=e.QCurrencyLookupValue.createFixedByValue(null,e.XStringValue.create(n.getDefaultCurrency()))}else{r=t.getTargetCurrency()}return r};e.QInACurrencyTranslationItem.getCurrencyTranslationManager=function(t){var r=null;var n=t.getQueryModel();if(e.notNull(n)){r=n.getCurrencyTranslationManager()}else{var i=t.getParentComponent();if(e.notNull(i)&&i.getComponentType()===e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER){r=i}}return r};e.QInACurrencyTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_ITEM};e.QInACurrencyTranslationItem.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.notNull(o)&&e.XCollectionUtils.hasElements(r)){o.setMetadataDefined(true);o.setErrorHandling(e.QInAConverter.lookupCtErrorHandlingMode(r.getStringByKey("ErrorHandling")));o.setSourceCurrency(this.importSpecificCurrencyTranslationElement(t,o,e.XValueType.STRING,r,"SourceCurrency"));o.setTargetCurrency(this.importSpecificCurrencyTranslationElement(t,o,e.XValueType.STRING,r,"TargetCurrency"));o.setReferenceDate(this.importSpecificCurrencyTranslationElement(t,o,e.XValueType.DATE,r,"ReferenceDate"));o.setRateName(this.importSpecificCurrencyTranslationElement(t,o,e.XValueType.STRING,r,"RateName"))}return o};e.QInACurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(t,r,n,i,a){if(i.containsKey(a)){var o=i.getStructureByKey(a);if(o.containsKey("Fixed")){var s=o.getStringByKey("Fixed");if(n===e.XValueType.STRING){return e.QCurrencyLookupValue.createFixedByValue(r,e.XStringValue.create(s))}if(n===e.XValueType.DATE){return e.QCurrencyLookupValue.createFixedByValue(r,e.XDate.createDateSafe(s))}return null}else if(o.containsKey("DimensionAttribute")){return e.QCurrencyLookupValue.createByFieldName(r,o.getStringByKey("DimensionAttribute"))}else if(o.containsKey("Formula")){var l=e.QInAFormulaMeasure.importFormulaMeasure(t,r.getQueryModel().getMeasureDimension(),o.getStructureByKey("Formula"),null,null);return e.QCurrencyLookupValue.createByFormulaItem(r,l)}else if(o.containsKey("Variable")){return e.QCurrencyLookupValue.createByVariableName(r,o.getStringByKey("Variable"))}}return null};e.QInACurrencyTranslationItem.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(e.notNull(a)){var o=a.getQueryModel();n.putString("Name",a.getName());n.putString("Description",a.getText());n.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupCtErrorHandlingModeInA(a.getErrorHandling()));this.exportSpecificCurrencyTranslationProperty(t,n,"SourceCurrency",a.getSourceCurrency(),o);this.exportSpecificCurrencyTranslationProperty(t,n,"TargetCurrency",e.QInACurrencyTranslationItem.resolveTargetCurrency(a),o);this.exportSpecificCurrencyTranslationProperty(t,n,"ReferenceDate",e.QInACurrencyTranslationItem.resolveReferenceDate(a),o);this.exportSpecificCurrencyTranslationProperty(t,n,"RateName",e.QInACurrencyTranslationItem.resolveRateName(a),o)}return n};e.QInACurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(t,r,n,i,a){if(e.notNull(i)){if(i.isFixed()){r.putNewStructure(n).putString("Fixed",i.getFixedValue().getStringRepresentation())}else if(i.isFieldBased()){r.putNewStructure(n).putString("DimensionAttribute",i.getFieldName())}else if(i.isFormulaBased()){var o=r.putNewStructure(n).putNewStructure("Formula");e.QInAFormulaMeasure.exportFormulaItem(t,i.getFormulaItem(),o,a)}else if(i.isVariableBased()){var s=i.getVariableName();if(e.isNull(a)){r.putNewStructure(n).putString("Variable",s)}else{var l=a.getVariable(s);if(e.notNull(l)){if(l.isCustomVariable()){var u=l.getExternalRepresentation();if(e.notNull(u)){l=u}var p=l.getValueByString();if(e.XStringUtils.isNotNullAndNotEmpty(p)){r.putNewStructure(n).putString("Fixed",p)}else{t.addError(e.ErrorCodes.NO_VALUE_EXTRACTED_FROM_FRONTEND_CURRENCY_TRANSLATION_VARIABLE,"Cannot Extract Variable Value from Currency Translation Variable")}}else{r.putNewStructure(n).putString("Variable",s)}}else{t.addError(e.ErrorCodes.CURRENCY_VARIABLE_NOT_AVAILABLE_FOR_CURRENT_QUERY_MODEL,"Currency variable not available for current query model")}}}}};e.QInACurrencyTranslationListManager=function(){};e.QInACurrencyTranslationListManager.prototype=new e.QInAComponentWithList;e.QInACurrencyTranslationListManager.prototype._ff_c="QInACurrencyTranslationListManager";e.QInACurrencyTranslationListManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_LIST};e.QInACurrencyTranslationListManager.prototype.getTagName=function(){return"CurrencyTranslations"};e.QInACurrencyTranslationListManager.prototype.importComponentWithList=function(t,r,n,i,a){var o=a.getQueryModel().getCurrencyTranslationManager();if(e.notNull(o)&&e.XCollectionUtils.hasElements(r)){var s=r.size();for(var l=0;l<s;l++){var u=r.getStructureAt(l);var p=u.getStringByKey("Name");var g=u.getStringByKey("Description");var c=o.addNewMeasureCurrencyTranslationBase(p,g);t.importCurrencyTranslationElement(u,c,a)}o.postImportInitialization()}return o};e.QInACurrencyTranslationListManager.prototype.exportComponentWithList=function(t,r,n){var i=null;var a=r;var o=a.getMeasureCurrencyTranslationsForInaData();if(e.XCollectionUtils.hasElements(o)){i=e.PrFactory.createList();var s=o.size();for(var l=0;l<s;l++){var u=o.get(l);t.exportCurrencyTranslationElement(u,i.addNewStructure())}}return i};e.QInACurrencyTranslationManager=function(){};e.QInACurrencyTranslationManager.prototype=new e.QInAComponentWithStructure;e.QInACurrencyTranslationManager.prototype._ff_c="QInACurrencyTranslationManager";e.QInACurrencyTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInACurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslation"};e.QInACurrencyTranslationManager.prototype.importComponentWithStructure=function(e,t,r,n,i){var a=r;return a};e.QInACurrencyTranslationManager.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(e.isNull(a)||!a.getModelCapabilities().supportsQueryCurrencyTranslation()){return n}var o=a.getCurrencyTranslationDetails();if(e.notNull(o)){if(e.XStringUtils.isNotNullAndNotEmpty(o.getCurrencyTranslationName())){if(o.getCurrencyTranslationOperation()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Operation required.")}n.putString("Operation",o.getCurrencyTranslationOperation().getName());n.putString("Name",o.getCurrencyTranslationName());if(o.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.BOTH||o.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.TARGET){if(o.getCurrencyTranslationTarget()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.")}n.putString("Target",o.getCurrencyTranslationTarget())}}else if(a.getCurrencyTranslationDetailsReset()){n.putString("Operation","");n.putString("Name","");n.putString("Target","");a.setCurrencyTranslationDetailsReset(false)}}return n};e.QInACustomHierarchyDefinition=function(){};e.QInACustomHierarchyDefinition.prototype=new e.QInAComponentWithStructure;e.QInACustomHierarchyDefinition.prototype._ff_c="QInACustomHierarchyDefinition";e.QInACustomHierarchyDefinition.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInACustomHierarchyDefinition.prototype.getTagName=function(){return null};e.QInACustomHierarchyDefinition.prototype.importComponentWithStructure=function(t,r,n,i,a){if(!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){return null}var o=e.PrUtils.getListProperty(r,"Dimensions");var s=e.PrUtils.getStructureElement(o,0);if(e.notNull(s)){var l=s.getStringByKey("System");var u=s.getStringByKey("DataSource");var p=s.getStringByKey("Name");var g=s.getStructureByKey("Hierarchy");if(e.notNull(g)&&e.XStringUtils.isNotNullAndNotEmpty(l)&&e.XStringUtils.isNotNullAndNotEmpty(p)){var c=true;var m=t.getApplication();if(e.notNull(m)){var y=m.getSystemLandscape().getSystemDescription(l);c=e.isNull(y)?true:y.getSystemType().isTypeOf(e.SystemType.ABAP)}var d=e.QCustomHierarchyDefinition.createByData(l,u,p,g.getStringByKey("Description"),c);d.setName(g.getStringByKey("Name"));this.addHierarchyNodesFromStructure(d,g.getStructureByKey("Nodes"));return d}}return null};e.QInACustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(t,r){var n=e.PrUtils.getListProperty(r,"NodeId");var i=e.PrUtils.getListProperty(r,"ParentId");var a=e.PrUtils.getListProperty(r,"NodeName");var o=e.PrUtils.getListProperty(r,"NodeType");var s=e.PrUtils.getListSize(n,0);if(e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(a)||e.PrUtils.isListEmpty(o)||i.size()!==s||a.size()!==s||o.size()!==s){return}var l=e.XSimpleMap.create();for(var u=0;u<s;u++){var p=n.getIntegerAt(u);var g=a.getStringAt(u);var c=o.getStringAt(u);var m=i.getIntegerAt(u);var y=m===-1?t:l.getByKey(e.XIntegerValue.create(m));if(e.notNull(y)){if(e.XString.isEqual(c,"1HIER_NODE_SIMPLE")){l.put(e.XIntegerValue.create(p),y.addTextNode(g))}else{y.addMemberNode(g)}}}e.XObjectExt.release(l)};e.QInACustomHierarchyDefinition.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=e.PrFactory.createStructure();o.putString("Name",a.getDimensionName());if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){o.putString("System",a.getSystemName());o.putString("DataSource",a.getDataSourceName())}else{o.putString("Axis","Free")}var s=e.PrFactory.createStructure();this.exportCustomHierarchy(a,s);o.put("Hierarchy",s);var l=e.PrFactory.createStructure();var u=l.putNewList("Dimensions");u.add(o);return l};e.QInACustomHierarchyDefinition.prototype.exportCustomHierarchy=function(t,r){var n="";var i=t.getName();var a=t.getDescription();r.putString("Name",e.XStringUtils.isNotNullAndNotEmpty(i)?i:n);r.putString("Version",n);r.putString("DueDate",n);r.putString("Description",e.notNull(a)?a:n);r.putBoolean("IsTransient",true);r.putBoolean("NoRestNodes",true);r.put("Nodes",this.getHierarchyNodesAsStructure(t))};e.QInACustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(t){var r=e.PrFactory.createStructure();r.putNewList("NodeId");r.putNewList("NodeName");r.putNewList("Description");r.putNewList("NodeType");r.putNewList("ParentId");var n=t.getChildNodes();var i=n.size();for(var a=0;a<i;a++){this.addHierarchyElementToStructure(n.get(a),r,-1,t.getDimensionName())}return r};e.QInACustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,t,r,n){var i=t.getListByKey("NodeId");var a=i.size();i.addInteger(a);t.getListByKey("NodeName").addString(e.getName());t.getListByKey("ParentId").addInteger(r);if(e.isMemberElement()){t.getListByKey("Description").addString("");t.getListByKey("NodeType").addString(e.isNode()?n:"")}else{t.getListByKey("Description").addString(e.getName());t.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE")}if(e.isNode()){var o=e.getChildNodes();var s=o.size();for(var l=0;l<s;l++){this.addHierarchyElementToStructure(o.get(l),t,a,n)}}};e.QInADataCell=function(){};e.QInADataCell.prototype=new e.QInAComponentWithStructure;e.QInADataCell.prototype._ff_c="QInADataCell";e.QInADataCell.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELL};e.QInADataCell.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getQueryModel();var s=o.getQueryDataCellsBase();var l=s.newQueryDataCell(r.getStringByKey("Name"));l.setSignReversal(r.getBooleanByKeyExt("SignReversal",false));l.setEmphasized(r.getBooleanByKeyExt("Emphasized",false));l.setCumulation(r.getBooleanByKeyExt("Cumulation",false));l.setInputEnabled(r.getBooleanByKeyExt("InputEnabled",false));l.setDisaggregationMode(e.DisaggregationMode.lookupWithDefault(r.getStringByKeyExt("DisaggregationMode",null),e.DisaggregationMode.NONE));l.setDisaggregationRefCellName(r.getStringByKeyExt("DisaggregationReferenceCellName",null));l.setScalingFactor(r.getIntegerByKeyExt("ScalingFactor",1));l.setDecimalPlaces(r.getIntegerByKeyExt("Decimals",0));var u=r.getIntegerByKeyExt("CellValueType",0);var p=e.QInAConverter.lookupValueTypeByInt(u);l.setBaseCellValueType(p);if(p===e.XValueType.DIMENSION_MEMBER){var g=r.getStringByKey("CellDimensionReference");l.setDimensionReference(o.getDimensions().getByKey(g))}var c=r.getListByKey("DimensionMemberReferences");if(e.notNull(c)){for(var m=0;m<c.size();m++){l.addDimensionMemberReference(c.getStringAt(m))}}if(t.mode===e.QModelFormat.INA_METADATA&&l.getReferenceStructureElement1()===null&&l.getReferenceStructureElement2()===null){s.removeElement(l);return null}if(r.hasStringByKey("SemanticObject")){l.setSemanticObject(r.getStringByKey("SemanticObject"))}return l};e.QInADataCell.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("Name",a.getName());var o=a.getDisaggregationMode();e.QInAExportUtil.setNameIfNotNull(n,"DisaggregationMode",e.isNull(o)?e.DisaggregationMode.NONE:o);var s=a.getDisaggregationRefCell();n.putString("DisaggregationReferenceCellName",e.isNull(s)?"0":s.getName());if(a.exportingWithCompleteDefinition()||a.hasPropertyChangedForInAData(e.QDataCellProperties.QY_SCALING_FACTOR)){n.putInteger("ScalingFactor",a.getScalingFactor())}if(a.exportingWithCompleteDefinition()||a.hasPropertyChangedForInAData(e.QDataCellProperties.QY_DECIMAL_PLACES)){n.putInteger("Decimals",a.getDecimalPlaces())}if(a.exportingWithCompleteDefinition()||a.hasPropertyChangedForInAData(e.QDataCellProperties.QY_SIGN_REVERSAL)){n.putBoolean("SignReversal",a.hasSignReversal())}if(a.exportingWithCompleteDefinition()||a.hasPropertyChangedForInAData(e.QDataCellProperties.QY_CUMULATION)){n.putBoolean("Cumulation",a.isCumulated())}n.putBoolean("Emphasized",a.isEmphasized());var l=a.getBaseValueType();var u=e.QInAConverter.lookupIntByValueType(l);n.putInteger("CellValueType",u);var p=n.putNewList("DimensionMemberReferences");var g=a.getReferenceStructureElement1();if(e.notNull(g)){p.addString(g.getName());g=a.getReferenceStructureElement2();if(e.notNull(g)){p.addString(g.getName())}}this.exportRestrictedMeasureSignReversal(t,n,a);if(t.mode===e.QModelFormat.INA_METADATA){n.putStringNotNullAndNotEmpty("SemanticObject",a.getSemanticObject())}return n};e.QInADataCell.prototype.exportRestrictedMeasureSignReversal=function(t,r,n){if(t.getMode()!==e.QModelFormat.INA_DATA||!n.getQueryModel().getSystemType().isTypeOf(e.SystemType.BW)||n.getReferenceStructureElement1()===null||n.getReferenceStructureElement1().getOlapComponentType()!==e.MemberType.RESTRICTED_MEASURE){return}var i=n.getReferenceStructureElement1();if(!i.isAutoSignFlip()){return}var a=i.getQueryModel();var o=e.QInAMemberRestrictedMeasure.getMemberForSignFlip(a,i);if(e.notNull(o)){var s=a.getMeasureDimension();var l=s.getStructureMember(o);if(e.notNull(l)){var u=l.getQueryDataCells();if(!u.isEmpty()){var p=u.get(0);if(e.notNull(p)){r.putBoolean("SignReversal",p.hasSignReversal())}}}}};e.QInADataCellsAll=function(){};e.QInADataCellsAll.prototype=new e.QInAComponentWithList;e.QInADataCellsAll.prototype._ff_c="QInADataCellsAll";e.QInADataCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInADataCellsAll.prototype.getTagName=function(){return"QueryDataCells"};e.QInADataCellsAll.prototype.importComponentWithList=function(t,r,n,i,a){var o=a.getModelCapabilities();var s=a.getQueryModel();if(o.supportsDataCells()&&t.mode!==e.QModelFormat.INA_DATA_REINIT&&s.getQueryManager().getInitSettings().isRequestingDataCells()){var l=s.getQueryDataCellsBase();l.clear();if(e.notNull(r)){for(var u=0;u<r.size();u++){t.importDataCell(r.getStructureAt(u),s)}}}return null};e.QInADataCellsAll.prototype.exportComponentWithList=function(t,r,n){var i=r;var a=null;var o=i.getModelCapabilities();if(o.supportsDataCells()&&i.getQueryManager().getInitSettings().isRequestingDataCells()){var s=i.getQueryDataCells();a=e.PrFactory.createList();var l=s.size();for(var u=0;u<l;u++){var p=t.exportDataCell(s.get(u),null);a.add(p)}}return a};e.QInADimension=function(){};e.QInADimension.prototype=new e.QInAComponentWithStructure;e.QInADimension.prototype._ff_c="QInADimension";e.QInADimension.exportQdReadMode=function(t,r,n){var i;var a=t.getMode()===e.QModelFormat.INA_VALUE_HELP;var o=t.isAbap(r);var s=null;if(a){i=e.QContextType.SELECTOR;s=e.QDimensionProperties.QY_SELECTOR_READ_MODE}else{i=e.QContextType.RESULT_SET;s=e.QDimensionProperties.QY_READ_MODE}var l=r.getModelCapabilities()!==null&&r.getModelCapabilities().supportsPersistedInA();if(!l||r.hasPropertyChanged(s)){var u=e.QInADimension.getReadMode(r,i);if(e.isNull(u)){t.addError(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("No read mode given for dimension '",r.getName(),"'!"));return}var p;if(o){if(a){p="ReadMode"}else{p="ResultSetReadMode"}}else{p="ReadMode"}var g=e.QInAConverter.lookupReadModeInA(u);n.putStringNotNull(p,g)}if(o&&a){n.putStringNotNull("VariableReadMode",e.QInAConverter.lookupReadModeInA(e.QInADimension.getReadMode(r,e.QContextType.VARIABLE)))}};e.QInADimension.getReadMode=function(t,r){var n=t.getReadMode(r);return n===e.QMemberReadMode.DEFAULT_VALUE?t.getReadModeDefault(r):n};e.QInADimension.exportQdReadModeLegacy=function(t,r,n){var i;var a;var o=t.isAbap(r);if(t.getMode()===e.QModelFormat.INA_VALUE_HELP){i=e.QContextType.SELECTOR;a="SelectorReadMode";if(o){n.putStringNotNull("VariableReadMode",e.QInAConverter.lookupReadModeInA(e.QInADimension.getReadMode(r,e.QContextType.VARIABLE)))}}else{i=e.QContextType.RESULT_SET;a="ResultSetReadMode"}var s=e.QInADimension.getReadMode(r,i);if(e.isNull(s)){t.addError(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("No read mode given for dimension '",r.getName(),"'!"));return}var l=e.QInAConverter.lookupReadModeInA(s);if(!t.getSession().hasFeature(e.FeatureToggleOlap.NO_NON_EMPTY)){n.putBoolean("NonEmpty",s===e.QMemberReadMode.BOOKED)}n.putStringNotNull("ReadMode",l);if(o){n.putStringNotNull(a,l)}};e.QInADimension.importDimReadModes=function(t,r,n,i){if(e.notNull(r)){if(t.isAbap(r)){e.QInADimension.importReadModeSettings(i,n,e.QContextType.RESULT_SET,"ResultSetReadMode");e.QInADimension.importReadModeSettings(i,n,e.QContextType.VARIABLE,"VariableReadMode")}else{e.QInADimension.importReadModeSettings(i,n,e.QContextType.RESULT_SET,"ResultSetMemberReadMode")}}e.QInADimension.importReadModeSettings(i,n,e.QContextType.SELECTOR,"SelectorReadMode")};e.QInADimension.importReadModeSettings=function(t,r,n,i){var a=t.getStringByKey(i);if(e.notNull(a)){var o=e.QInAConverter.lookupReadMode(a);if(e.notNull(o)&&o!==e.QMemberReadMode.UNDEFINED){r.setReadMode(n,o)}}var s=r.getReadMode(n);if(e.isNull(s)){var l=r.getReadModeDefault(n);if(e.notNull(l)&&l!==e.QMemberReadMode.UNDEFINED){r.setReadMode(n,l)}else if(e.QContextType.VARIABLE===n){var u=r.getSupportedReadModes(n);r.setReadMode(n,u.getValuesAsReadOnlyList().get(0))}}};e.QInADimension.importRsAttributeNodes=function(t,r){var n=t.getListByKey("ResultSetAttributeNodes");if(e.isNull(n)){n=t.getListByKey("DefaultResultSetAttributeNodes")}if(e.notNull(n)){var i=r.getResultSetAttributes();i.clear();var a=n.size();for(var o=0;o<a;o++){var s=n.getStringAt(o);var l=r.getAttributeByName(s);if(e.notNull(l)){i.add(l)}}}};e.QInADimension.importRsFields=function(t,r){var n=t.getListByKey("ResultSetFields");if(e.isNull(n)){n=t.getListByKey("DefaultResultSetAttributes")}if(e.notNull(n)){var i=r.getResultSetFields();i.clear();var a=n.size();for(var o=0;o<a;o++){var s=n.getStringAt(o);var l=r.getFieldByName(s);if(e.notNull(l)){i.add(l)}}}};e.QInADimension.exportFieldLayout=function(t,r,n){var i;var a=t.modelContext;if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA)){r.putString("FieldLayoutType",n.getFieldLayoutType().toString());e.QInADimension.exportRsFields(r,n)}if(n.getFieldLayoutTypeExt(a)===e.FieldLayoutType.FIELD_BASED){i=n.getFieldsExt(a)}else{i=n.getAttributesExt(a).getEffectiveFields(a)}var o=r.putNewList("Attributes");e.QInADimension.exportListOfFields(i,o,t,false);var s=e.QInADimension.getHiddenFields(t,n,i);e.QInADimension.exportListOfFields(s,o,t,true)};e.QInADimension.exportFieldLayout2=function(t,r,n){var i;var a;var o=t.modelContext;var s=r.putNewList("Attributes");if(n.getFieldLayoutTypeExt(o)===e.FieldLayoutType.FIELD_BASED){i=n.getFieldsExt(o);e.QInADimension.exportListOfFields2(i,s,t,false,n);a=e.QInADimension.getHiddenFields(t,n,i);e.QInADimension.exportListOfFields2(a,s,t,true,n)}else{var l=n.getAttributesExt(o);var u=l.size();var p;var g;var c=e.XListOfNameObject.create();for(p=0;p<u;p++){g=l.get(p);i=g.getFieldsExt(o);e.QInADimension.exportListOfFields2(i,s,t,false,g);c.addAll(i)}for(p=0;p<u;p++){g=l.get(p);var m=e.QInADimension.getHiddenFields(t,n,c);e.QInADimension.exportListOfFields2(m,s,t,true,g)}}};e.QInADimension.exportRsFields=function(e,t){var r=e.putNewList("ResultSetFields");var n=t.getResultSetFields();for(var i=0;i<n.size();i++){r.addString(n.get(i).getName())}};e.QInADimension.exportListOfFields=function(t,r,n,i){var a=e.QImExFlag.DEFAULT_ALL;var o=e.XMath.binaryOr(a,e.QImExFlag.HIDE);var s=t.size();for(var l=0;l<s;l++){if(i){r.add(n.exportComponent(e.OlapComponentType.FIELD,t.get(l),null,o))}else{r.add(n.exportComponent(e.OlapComponentType.FIELD,t.get(l),null,a))}}};e.QInADimension.exportListOfFields2=function(t,r,n,i,a){var o=e.QImExFlag.DEFAULT_ALL;var s=e.XMath.binaryOr(o,e.QImExFlag.HIDE);var l=a.getFieldByPresentationType(e.PresentationType.QUERY_TEXT);var u=n.getMode()===e.QModelFormat.INA_DATA||n.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA;var p=t.size();for(var g=0;g<p;g++){var c=t.get(g);if(e.PrUtils.getStructureWithKeyValuePair(r,"Name",c.getName())===null){if(i){r.add(n.exportComponent(e.OlapComponentType.FIELD,c,null,s))}else{if(u&&e.notNull(l)&&c===a.getDefaultResultSetTextField()&&!c.haveAnyInAPropertiesChanged()&&!a.getDimension().getShouldUseActualTextField()&&a.getDataSource().getType()===e.MetaObjectType.QUERY){c=l}r.add(n.exportComponent(e.OlapComponentType.FIELD,c,null,o))}}}};e.QInADimension.getHiddenFields=function(t,r,n){var i;if(t.modelContext===e.QContextType.SELECTOR){var a=e.XList.create();a.add(r.getKeyFieldExt(e.QContextType.SELECTOR));var o=r.getHierarchyTextField();if(e.notNull(o)&&r.isSelectorHierarchyActive()){a.add(o)}i=a}else{i=r.getFieldsListByActiveUsageType()}var s=e.XList.create();s.addAll(i);var l=r.getKeyFieldExt(t.modelContext);var u=r.getTextField();if(u===l){u=null}var p=r.getFieldByPresentationType(e.PresentationType.QUERY_TEXT);var g=n.size();for(var c=0;c<g;c++){var m=n.get(c);if(e.notNull(u)&&e.notNull(p)&&(m===p||e.XString.isEqual(m.getName(),p.getName()))){m=u}s.removeElement(m)}for(var y=0;y<s.size();){var d=s.get(y);if(d!==l){if(d!==u){if(!d.isAlwaysRequested()){if(d.hasSorting()){if(d.getResultSetSorting().getDirection()===e.XSortDirection.DEFAULT_VALUE){s.removeAt(y);continue}}else{s.removeAt(y);continue}}}}y++}if(t.getSession().hasFeature(e.FeatureToggleOlap.DONT_ALWAYS_REQUEST_TEXTFIELD)){s.removeElement(u)}else{e.QInADimension.moveFieldToStart(s,u)}e.QInADimension.moveFieldToStart(s,l);return s};e.QInADimension.moveFieldToStart=function(e,t){var r=e.size();for(var n=0;n<r;n++){var i=e.get(n);if(i===t){if(n!==0){e.removeAt(n);e.insert(0,i)}break}}};e.QInADimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInADimension.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getQueryModel();var s=n;if(e.isNull(s)){var l=r.getStringByKey("Name");if(e.notNull(o)){s=o.getDimensionManagerBase().getDimensionByNameInternal(l)}if(e.isNull(s)){return null}}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){s.setSelectorGettingInterval(false);e.QInADimension.importDimReadModes(t,o,s,r);t.importMembers(r,s,a);this.importFieldsLayout(t,r,s,a);this.importQdFieldTransformations(t,r,s);t.importHierarchy(s,r);if(e.notNull(o)&&!o.getModelCapabilities().supportsExtendedSort()){var u=o.getModelCapabilities();if(u.supportsDimensionSorting(s,e.SortType.MEMBER_KEY)){var p=r.getIntegerByKeyExt("SortOrder",e.QInAConverter.lookupSortDirectionInA(e.XSortDirection.DEFAULT_VALUE));var g=e.QInAConverter.lookupSortDirection(p);s.getResultSetSorting().setDirection(g)}}if(t.capabilities.supportsCummulative()&&s.supportsCumulative()){s.setIsCumulative(r.getBooleanByKeyExt("IsCummulative",false))}var c=r.getIntegerByKeyExt("Skip",0);s.setSkipEntries(c);var m=r.getIntegerByKeyExt("Top",0);s.setTopEntries(m);var y=r.getStringByKey("ReadMode");if(e.notNull(y)){var d=e.QInAConverter.lookupReadMode(y);s.setReadModeGraceful(e.QContextType.RESULT_SET,d)}t.importTotals(r,s.getResultStructureControllerBase(),a);this.importAlternativeFieldValues(r,s)}else{var A=s.getVariableContainer();if(e.notNull(A)){var I=A.getVariables();var S=I.size();for(var f=0;f<S;f++){var v=I.get(f);if(v.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE&&e.XString.isEqual(v.getHierarchyNameDimension().getName(),s.getName())){t.importHierarchy(s,r);break}}}}return s};e.QInADimension.prototype.importAlternativeFieldValues=function(t,r){var n=t.getListByKey("AlternativeFieldValues");if(e.notNull(n)){var i=n.size();for(var a=0;a<i;a++){var o=n.get(a);if(o.isStructure()){var s=o;var l=s.getStringByKey("ValueType");var u=e.QInAConverter.lookupValueType(l);var p=s.getStringByKey("Value");var g=null;if(u===e.XValueType.INTEGER){g=e.XIntegerValue.create(e.XInteger.convertFromStringWithRadix(p,10))}else if(u===e.XValueType.LONG){g=e.XLongValue.create(e.XLong.convertFromString(p))}else if(u===e.XValueType.DOUBLE){g=e.XDoubleValue.create(e.XDouble.convertFromString(p))}else if(u===e.XValueType.STRING){g=e.XStringValue.create(p)}else if(u===e.XValueType.DATE){g=e.XDate.createDateFromIsoFormat(p)}else if(u===e.XValueType.DATE_TIME){g=e.XDateTime.createDateTimeFromIsoFormat(p)}if(e.notNull(g)){var c=s.getBooleanByKey("HierarchyKey");var m=s.getStringByKey("MemberKey");var y=s.getStringByKey("FieldName");var d=s.getStringByKey("Language");r.setAlternativeFieldValue(c,m,y,g,d)}}}}};e.QInADimension.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("Name",a.getName());var o=a.getQueryManager();var s=e.notNull(o)&&o.getConnection().isInAMergeProcessingEnabled();var l=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA||t.getOriginalMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA;var u=s&&l;var p=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||u;if(p){if(a.isMeasureStructure()){n.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_MEASURE_STRUCTURE)}else if(a.getMetadata().isSecondaryStructure()){n.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_SECONDARY_STRUCTURE)}}var g=t.getSession();var c=g.hasFeature(e.FeatureToggleOlap.NO_MEASURE_READMODE)&&a.isStructure();if(!c){if(g.hasFeature(e.FeatureToggleOlap.NO_DUPLICATED_READMODE)){e.QInADimension.exportQdReadMode(t,a,n)}else{e.QInADimension.exportQdReadModeLegacy(t,a,n)}}var m;if(t.mode===e.QModelFormat.INA_VALUE_HELP){m=e.AxisType.ROWS}else{m=a.getAxisType()}n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(m));var y=a.isDesignTimeMode();if(y){n.putBoolean("DesignTimeMode",y)}var d=a.getSkipEntries();if(d>0){n.putInteger("Skip",d)}var A=a.getTopEntries();if(A>0){n.putInteger("Top",A)}if(a.supportsCumulative()){n.putBoolean("IsCummulative",a.isCumulative())}if(!e.QInAUniversalDisplayHierarchies.isHierarchyConverted(t,a)){t.exportHierarchy(a,n)}if(t.mode!==e.QModelFormat.INA_VALUE_HELP){if(a.supportsTotals()){t.exportTotals(a,n)}if(a.getStructureLayout()!==null){t.exportMembers(a,n)}}if(a.getModelCapabilities()!==null&&a.getModelCapabilities().supportsPersistedInA()){e.QInADimension.exportFieldLayout2(t,n,a)}else{e.QInADimension.exportFieldLayout(t,n,a)}return n};e.QInADimension.prototype.importQdFieldTransformations=function(t,r,n){var i=r.getListByKey("Fields");if(e.notNull(i)){var a=i.size();for(var o=0;o<a;o++){var s=i.get(o);if(s.isStructure()){var l=s.getStringByKey("Name");var u=s.getStringByKey("TextTransformation");if(e.XStringUtils.isNotNullAndNotEmpty(l)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var p=n.getFieldByName(l);var g=e.TextTransformationType.lookupName(u);if(e.notNull(p)&&e.notNull(g)){if(g.isTypeOf(e.TextTransformationType.SPATIAL_TRANSFORMATION)&&!t.capabilities.supportsSpatialTransformation()){continue}p.setTextTransformation(g)}}}}}};e.QInADimension.prototype.importFieldsLayout=function(t,r,n,i){var a;var o=r.getStringByKey("FieldLayoutType");if(e.notNull(o)){a=e.QInAConverter.lookupFieldLayoutType(o);var s=r.getListByKey("FieldSettings");if(e.notNull(s)){var l=s.size();for(var u=0;u<l;u++){t.importComponent(e.OlapComponentType.FIELD,s.getStructureAt(u),null,n,i)}}var p=r.getListByKey("AttributeSettings");if(e.notNull(p)){var g=p.size();for(var c=0;c<g;c++){var m=p.getStructureAt(c);t.importAttribute(m,n,i)}}e.QInADimension.importRsFields(r,n);e.QInADimension.importRsAttributeNodes(r,n);n.setFieldLayoutType(a)}else{var y=r.getListByKey("ResultSetFields");if(e.isNull(y)){y=r.getListByKey("DefaultResultSetAttributes")}if(e.notNull(y)){a=e.FieldLayoutType.ATTRIBUTE_BASED;if(n.supportsFieldLayoutType(a)){n.setFieldLayoutType(a)}a=n.getFieldLayoutType();if(a===e.FieldLayoutType.FIELD_BASED){var d=n.getResultSetFields();d.clear();var A=n.getMainAttribute();if(e.notNull(A)){A.getResultSetFields().clear()}var I;var S;var f=y.size();var v=e.XHashSetOfString.create();for(S=0;S<f;S++){I=y.getStringAt(S);if(!v.contains(I)){v.add(I);var C=n.getFieldByName(I);if(e.isNull(C)){t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate2("Field not found: ",I));return}d.add(C)}}y=r.getListByKey("Attributes");if(e.notNull(y)){f=y.size();for(S=0;S<f;S++){var N=y.getStructureAt(S);I=N.getStringByKey("Name");if(!v.contains(I)){v.add(I);var E=n.getFieldByNameOrAlias(I);if(e.isNull(E)){t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate2("Field not found: ",I));return}d.add(E)}}}}}else if(n.isStructure()){n.resetFieldsToDefault()}}};e.QInADimensionsAll=function(){};e.QInADimensionsAll.prototype=new e.QInAComponentWithList;e.QInADimensionsAll.prototype._ff_c="QInADimensionsAll";e.QInADimensionsAll.exportTechnicalDimension=function(t,r,n,i){if(!t.capabilities.supportsUniversalModel()){return}var a=r.getQueryCellManager();if(a.isEmpty()){return}var o=r.getDimensionByName("$$Cells$$");e.QInADimensionsAll.exportDimension(t,o,n,i)};e.QInADimensionsAll.exportAxisDimensionsWithHeuristic=function(t,r,n,i,a){var o=r.getQueryModel();var s=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var l=o.isOptimizedExportModeActive();var u=r.getDimensionCount();for(var p=0;p<u;p++){var g=r.get(p);if(l&&g.isIgnoredOnOptimizedExport()){continue}if(s&&!i.contains(g.getName())){continue}e.QInADimensionsAll.exportDimension(t,g,n,a)}};e.QInADimensionsAll.exportAxisDimensions=function(t,r,n,i){var a=r.getDimensionCount();if(!e.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired(t,r)){for(var o=0;o<a;o++){var s=r.get(o);e.QInADimensionsAll.exportDimension(t,s,n,i)}}else{var l=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r).getName();var u=e.QInAUniversalDisplayHierarchies.getDimensionNames(t,r);for(var p=0;p<a;p++){var g=r.get(p);var c=g.getName();if(e.XString.isEqual(c,l)){e.QInADimensionsAll.exportUdhDimensionsForConvertedLbh(t,r,n,u,i,g)}else if(!u.contains(c)){e.QInADimensionsAll.exportDimension(t,g,n,i)}}}};e.QInADimensionsAll.exportUdhDimensionsForConvertedLbh=function(t,r,n,i,a,o){var s=e.QInADimensionsAll.getReadMode(t,o);var l=i.size();for(var u=0;u<l;u++){var p=r.getQueryModel().getDimensionByName(i.get(u));p.stopEventing();var g=p.getAxisBase();var c=p.isHierarchyActive();var m=e.QInADimensionsAll.getReadMode(t,p)!==s;var y=m?p.getReadMode(t.modelContext):null;var d=p.getResultVisibilityByElement(e.ResultStructureElement.TOTAL);p.setAxis(r);if(c){p.setHierarchyActive(false)}if(m){p.setReadModeGraceful(t.modelContext,s)}p.setResultVisibilityByElement(e.ResultStructureElement.TOTAL,u===0?o.getResultVisibilityByElement(e.ResultStructureElement.TOTAL):e.ResultVisibility.VISIBLE);var A=e.QInADimensionsAll.exportDimension(t,p,n,a);if(m&&e.notNull(A)&&!A.containsKey("ResultSetReadMode")){A.putStringNotNull("ResultSetReadMode",e.QInAConverter.lookupReadModeInA(s))}p.setAxis(g);if(c){p.setHierarchyActive(true)}if(e.notNull(y)){p.setReadMode(t.modelContext,y)}p.setResultVisibilityByElement(e.ResultStructureElement.TOTAL,d);p.resumeEventing()}};e.QInADimensionsAll.getReadMode=function(t,r){var n=r.getReadMode(t.modelContext);return e.notNull(n)?n:r.getReadModeDefault(t.modelContext)};e.QInADimensionsAll.exportDimension=function(t,r,n,i){if(!i.contains(r.getName())){i.add(r.getName());var a=t.exportDimension(r,null);if(e.notNull(a)){n.add(a);return a}}return null};e.QInADimensionsAll.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInADimensionsAll.prototype.getTagName=function(){return"Dimensions"};e.QInADimensionsAll.prototype.importComponentWithList=function(t,r,n,i,a){if(e.notNull(r)){var o=n;var s=o.getDimensionManagerBase();if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var l=o.getFreeAxis();l.addAll(s)}var u=r.size();var p=s.getDimensionReferences();for(var g=0;g<u;g++){var c=r.getStructureAt(g);var m=c.getStringByKey("Name");var y=c.getStringByKey("Axis");var d=null;if(c.containsKey("FieldMappings")){var A=t.importCalculatedDimension(c,o);s.addDimension(A);s.finalizeDimensionMetadataSetup(A)}else if(c.containsKey("CType")&&e.XComponentType.lookupComponentType(c.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var I=t.importFormulaCalculatedDimension(c,o,null);s.addDimension(I);s.finalizeDimensionMetadataSetup(I)}else{if(p.containsKey(m)){var S=e.AxisType.lookup(y);if(t.getMode()===e.QModelFormat.INA_REPOSITORY||S===e.AxisType.COLUMNS||S===e.AxisType.ROWS){d=s.getDimensionByNameFromExistingMetadata(m)}}t.importDimension(c,o)}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(d)){d=s.getDimensionByNameInternal(m);if(e.isNull(d)){continue}}if(e.isNull(y)){y=c.getStringByKeyExt("AxisDefault","Free")}o.getAxis(e.QInAConverter.lookupAxisType(y)).add(d)}}}return n};e.QInADimensionsAll.prototype.exportDimensionIfOnFreeAxis=function(t){var r=t.getQueryModel();var n=e.XHashSetOfString.create();var i=r.getFilter();if(i.isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(i.getDynamicFilter(),n);var a=i.getLinkedFilters().getValuesAsReadOnlyList();for(var o=0;o<a.size();o++){var s=a.get(o);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(s,n)}}var l=n.contains(t.getName());if(t.isMeasureStructure()){var u=r.getExceptionManager();var p=e.XCollectionUtils.hasElements(u);return l||p}return l};e.QInADimensionsAll.prototype.exportComponentWithList=function(t,r,n){var i=e.PrFactory.createList();if(t.mode!==e.QModelFormat.INA_VALUE_HELP){var a=r;var o=a.getModelCapabilities();var s=e.XHashSetOfString.create();e.QInADimensionsAll.exportAxisDimensions(t,a.getAxis(e.AxisType.ROWS),i,s);e.QInADimensionsAll.exportAxisDimensions(t,a.getAxis(e.AxisType.COLUMNS),i,s);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var l=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(a,l)}e.QInADimensionsAll.exportAxisDimensionsWithHeuristic(t,a.getAxis(e.AxisType.FREE),i,l,s)}else if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var u=o.supportsCubeBlendingOutOfContext()&&a.isBlendingModel();var p=a.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var g=a.getAxis(e.AxisType.FREE);var c=g.size();var m=t.isAbap(a);for(var y=0;y<c;y++){var d=g.get(y);var A=d.getDimensionType();if(A===e.DimensionType.MEASURE_STRUCTURE||A===e.DimensionType.SECONDARY_STRUCTURE){var I=this.exportDimensionIfOnFreeAxis(d);if(I){e.QInADimensionsAll.exportDimension(t,d,i,s)}}else if(A===e.DimensionType.ACCOUNT){var S=this.exportDimensionIfOnFreeAxis(d);if(S){e.QInADimensionsAll.exportDimension(t,d,i,s)}}else if(u||(m||p)&&(d.isHierarchyActive()||d.hasPlaceHolderForHierarchyInfo())||A.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)&&(A!==e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION&&A!==e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION||t.mode!==e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA)){e.QInADimensionsAll.exportDimension(t,d,i,s)}}e.QInADimensionsAll.exportTechnicalDimension(t,a,i,s)}}return i};e.QInADrillManager=function(){};e.QInADrillManager.prototype=new e.QInAComponentWithList;e.QInADrillManager.prototype._ff_c="QInADrillManager";e.QInADrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInADrillManager.prototype.getTagName=function(){return"HierarchyNavigations"};e.QInADrillManager.prototype.getZoomDrillPath=function(t,r,n,i){var a=e.XList.create();var o=n.getListByKey("DrillContextMembers");if(e.notNull(o)){var s=o.size();for(var l=0;l<s;l++){var u=o.getStructureAt(l);var p=t.importDrillPathElement(u,r,i);a.add(p)}}var g=n.getStringByKey("DrillState");var c=n.getStructureByKey("DrillMember");if(e.isNull(c)||e.isNull(g)){return null}var m=t.importDrillPathElement(c,r,i);a.add(m);return a};e.QInADrillManager.prototype.importComponentWithList=function(t,r,n,i,a){var o=n;var s;o.removeAllContextDrillOperations();o.removeZoomDrillOperationsByDimension(null);if(e.notNull(r)){var l=-1;s=r.size();for(var u=0;u<s;u++){var p=r.getStructureAt(u);var g=p.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(g===-1){t.importDrillOperation(p,o,a)}else if(g>-1){var c=this.getZoomDrillPath(t,o,p,a);if(e.XCollectionUtils.hasElements(c)){if(g!==l){o.pushEmptyZoomDrillForDimension(c.get(c.size()-1).getDimension());l=g}var m=p.getIntegerByKeyExt("DrillOffset",0)>0;o.addZoomDrillPath(c,m)}}}}return n};e.QInADrillManager.prototype.exportComponentWithList=function(t,r,n){var i=r;var a=i.getModelCapabilities();var o=null;var s;if(t.getMode().isTypeOf(e.QModelFormat.INA_DATA)||t.getMode().isTypeOf(e.QModelFormat.INA_VALUE_HELP)){s=i.getDrillOperationsForInAData()}else{s=i.getDrillOperationsForInARepo()}var l=s.size();if(l>0){var u=i.getQueryModel();var p=null;var g=null;o=e.PrFactory.createList();var c=null;if(a.supportsHierarchyNavigationDeltaMode()){c=s.get(l-1);var m=c.getTargetDimension();if(e.notNull(m)&&m.isHierarchyNavigationDeltaMode()){g=m;p=t.exportDrillOperation(c)}}var y=t.isAbap(u);if(!y&&(t.getMode().isTypeOf(e.QModelFormat.INA_DATA)||t.getMode().isTypeOf(e.QModelFormat.INA_VALUE_HELP))){s=s.createListCopy();if(e.notNull(g)){s.removeElement(c);l=s.size()}if(l>0){s.sortByComparator(e.XComparatorDrill.create())}}for(var d=0;d<l;d++){var A=s.get(d);if(A.getType()===e.DrillOperationType.CONTEXT){var I=A.getTargetDimension();if(e.isNull(g)||g!==I){if(!y&&I.getInitialDrillLevel()<0&&A.getDrillState()===e.DrillState.EXPANDED){continue}o.add(t.exportDrillOperation(A))}}}if(e.notNull(p)){o.add(p)}if(o.isEmpty()){o=null}}return o};e.QInADrillPathElement=function(){};e.QInADrillPathElement.prototype=new e.QInAComponentWithStructure;e.QInADrillPathElement.prototype._ff_c="QInADrillPathElement";e.QInADrillPathElement.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInADrillPathElement.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=o.getContext().getQueryModel();var l=r.getStringByKey("FieldName");var u=r.getStringByKey("DimensionName");var p;if(e.XStringUtils.isNotNullAndNotEmpty(u)){p=s.getDimensionByNameFromExistingMetadata(u)}else{var g=s.getFieldByNameOrAlias(l);if(e.isNull(g)){p=s.getDimensionByNameFromExistingMetadata(l);if(e.notNull(p)){g=p.getKeyField();l=g.getName()}}else{p=g.getDimension()}}var c=e.QDrillPathElement._create(a);c.setDimension(p);var m=r.getStringByKey("Member");c.setName(m);c.setFieldName(l);return c};e.QInADrillPathElement.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getNameForInAExport();if(e.isNull(o)){n.putNull("Member")}else{var s=a.getQueryModel();if(e.isNull(s)&&a.getDimension()!==null){s=a.getDimension().getQueryModel()}var l=e.QInAExportUtil.getMeasureMemberNameByAlias(s,o,t);n.putString("Member",l)}n.putString("FieldName",a.getFieldName());if(t.mode===e.QModelFormat.INA_REPOSITORY){var u=a.getDimension();e.QInAExportUtil.setNameIfNotNull(n,"DimensionName",u)}return n};e.QInADrillPathOperation=function(){};e.QInADrillPathOperation.prototype=new e.QInAComponentWithStructure;e.QInADrillPathOperation.prototype._ff_c="QInADrillPathOperation";e.QInADrillPathOperation.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_OPERATION};e.QInADrillPathOperation.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=r.getStringByKey("DrillState");var l=r.getStructureByKey("DrillMember");if(e.isNull(l)||e.isNull(s)){return null}var u=e.XList.create();var p=r.getListByKey("DrillContextMembers");if(e.notNull(p)){var g=p.size();for(var c=0;c<g;c++){var m=p.getStructureAt(c);var y=t.importDrillPathElement(m,o,a);u.add(y)}}var d=t.importDrillPathElement(l,o,a);u.add(d);var A=o.setDrillState(u,e.QInAConverter.lookupDrillStateOp(s));var I=r.getIntegerByKeyExt("DrillLevel",1);A.setRelativeLevelCount(I);return A};e.QInADrillPathOperation.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(a.getType()===e.DrillOperationType.CONTEXT){var o=e.QInAConverter.lookupDrillStateInA(a.getDrillState());n.putString("DrillState",o);var s=a.getRelativeLevelCount();if(s!==1){n.putInteger("DrillLevel",s)}if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)||t.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){if(a.supportsDrillCounter()){n.putInteger("HierarchyNavigationCounter",a.getDrillCounter())}}else{if(a.getZoomStackPosition()!==-1){n.putInteger("ZoomDrillStackPosition",a.getZoomStackPosition())}if(a.getRelativeLevelOffset()!==0){n.putInteger("DrillOffset",a.getRelativeLevelOffset())}}var l=a.getDrillPath();var u=l.size();if(u>0){var p=l.get(u-1);var g=t.exportDrillPathElement(p,false);n.put("DrillMember",g);if(u>1){var c=e.PrFactory.createList();n.put("DrillContextMembers",c);for(var m=0;m<u-1;m++){p=l.get(m);g=t.exportDrillPathElement(p,true);c.add(g)}}}}return n};e.QInAExceptions=function(){};e.QInAExceptions.prototype=new e.QInAComponentWithList;e.QInAExceptions.prototype._ff_c="QInAExceptions";e.QInAExceptions.importEvaluates=function(t,r,n,i){var a=t.getListByKey("EvaluateOn");if(e.isNull(a)){return}var o=a.size();var s=r.getQueryModel();for(var l=0;l<o;l++){var u=a.getStructureAt(l);var p=u.getStringByKey("Name");var g=s.getFieldByName(p);if(e.isNull(g)){var c=s.getDimensionByNameFromExistingMetadata(p);if(e.notNull(c)){g=c.getKeyField()}}if(e.isNull(g)){g=r.getKeyFieldValue().getField()}if(e.isNull(g)){i.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",p,"'!"));return}if(!u.containsKey("Low")){i.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",p));return}var m=g.getValueType();var y=e.QInAValueUtils.importValueByType(i,u,"Low",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",m.getName()));return}var d=n._addNewEvaluateWithFieldInternal(g,y);if(u.containsKey("High")){var A=e.QInAValueUtils.importValueByType(i,u,"High",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",m.getName()));return}d.setHighValue(A)}d.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(u.getStringByKey("Evaluate")));var I=u.getStringByKey("Comparison");var S=e.QInAConverter.lookupComparison(I);if(e.isNull(S)){i.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",I,"'"));return}d.setOperator(S)}};e.QInAExceptions.importThresholds=function(t,r){var n=t.getListByKey("Threshold");if(e.notNull(n)){var i=n.size();for(var a=0;a<i;a++){var o=n.getStructureAt(a);var s=o.getIntegerByKeyExt("AlertLevel",-9999);var l;var u=!o.hasStringByKey("Low");if(u){l=r._addNewThresholdInternal(o.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(s))}else{l=r._addNewThresholdWithStringInternal(o.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(s))}var p=o.getStringByKey("Name");if(e.notNull(p)){l.setName(p)}var g=e.QInAConverter.lookupComparison(o.getStringByKey("Comparison"));l.setOperator(g);if(g.getNumberOfParameters()===2){if(u){var c=o.getDoubleByKey("High");l.setHighValue(c)}else{var m=o.getStringByKey("High");l.setHigh(m)}}e.QInAExceptions.importSettings(o.getListByKey("Settings"),l)}}};e.QInAExceptions.importSettings=function(t,r){if(e.isNull(t)){return}var n=t.size();for(var i=0;i<n;i++){var a=t.getStructureAt(i);var o=a.getStringByKey("Name");var s=a.getIntegerByKey("Priority");var l=a.getStringByKey("Value");if(e.notNull(l)&&!e.XString.isEqual(l,"")){var u=r.addNewSetting(o,s);u.setValue(l)}}};e.QInAExceptions.exportStructureContextItem=function(t,r,n){if(e.notNull(r)){var i=t.addNewStructure();var a=r.getDimension();i.putString("DimensionName",a.getName());i.putString("MemberName",r.getName());if(n.isEvaluateAllMembers(a)){i.putBoolean("EvaluateAllMembers",true)}var o=n.getDisplayOnOtherMember(r);e.QInAExportUtil.setNameIfNotNull(i,"DisplayOnOtherMember",o)}};e.QInAExceptions.exportEvaluates=function(t,r,n,i){if(t.isEmpty()){return}var a=n.putNewList("EvaluateOn");var o=t.size();for(var s=0;s<o;s++){var l=a.addNewStructure();var u=t.get(s);l.putString("Name",u.getField().getName());l.putString("Evaluate",u.getEvaluate().toString());var p=u.getOperator();var g;if(p===e.ComparisonOperator.NOT_BETWEEN&&i){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(p)}l.putString("Comparison",g);e.QInAValueUtils.exportPlaceholderValue(r,"Low",l,u.getLowValue(),u.getValueType(),u.getQueryModel());if(!l.containsKey("Low")){l.putString("Low","")}if(p.getNumberOfParameters()>1){e.QInAValueUtils.exportPlaceholderValue(r,"High",l,u.getHighValue(),u.getValueType(),u.getQueryModel())}}};e.QInAExceptions.exportThresholds=function(t,r,n,i){var a=n.putNewList("Threshold");var o=t.size();for(var s=0;s<o;s++){var l=t.get(s);var u=a.addNewStructure();var p=l.getName();if(r.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!e.XString.isEqual(p,"Settings")){u.putStringNotNull("Name",p)}var g=l.getOperator();var c;if(g===e.ComparisonOperator.NOT_BETWEEN&&i){c="NOTBETWEEN"}else{c=e.QInAConverter.lookupComparisonInA(g)}u.putString("Comparison",c);var m=l.getValueType()===e.XValueType.DOUBLE;if(l.getLowXValue()!==null){if(m){u.putDouble("Low",l.getLowValue())}else{u.putString("Low",l.getLow())}}if(l.getHighXValue()!==null&&g.getNumberOfParameters()>1){if(m){u.putDouble("High",l.getHighValue())}else{u.putString("High",l.getHigh())}}if(!l.isEmpty()){e.QInAExceptions.exportSettings(l,r,u)}else{u.putInteger("AlertLevel",l.getAlertLevel().getLevel())}}};e.QInAExceptions.exportSettings=function(t,r,n){var i=n.putNewList("Settings");var a=t.size();for(var o=0;o<a;o++){var s=t.get(o);var l=i.addNewStructure();l.putString("Name",s.getName());l.putInteger("Priority",s.getPriority());var u=s.getValue();if(e.isNull(u)||e.XString.isEqual(u,"")){r.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{l.putString("Value",u)}}};e.QInAExceptions.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInAExceptions.prototype.getTagName=function(){return"Exceptions"};e.QInAExceptions.prototype.isVersion1=function(t,r){var n=r.getOlapComponentType();return!t.capabilities.supportsExceptionsV2()&&n.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInAExceptions.prototype.isVersion2=function(t,r){var n=r.getOlapComponentType();return t.capabilities.supportsExceptionsV2()&&n.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInAExceptions.prototype.importComponentWithList=function(e,t,r,n,i){var a=r;var o=a.getQueryModel().getExceptionManager();o.queueEventing();if(this.isVersion1(e,r)){o.removeAllExceptionsOfMeasure(r);this.importFormatV1(e,t,r,o)}else if(this.isVersion2(e,r)){o.clear();this.importFormatV2(e,t,r,o)}o.resumeEventing();return o};e.QInAExceptions.prototype.importFormatV1=function(t,r,n,i){if(e.notNull(r)){var a=r.size();for(var o=0;o<a;o++){var s=r.getStructureAt(o);var l=this.importException(t,n,i,s);l.setMeasure(n);l.setIsChangeable(s.getBooleanByKeyExt("Changegable",true))}}};e.QInAExceptions.prototype.importException=function(t,r,n,i){var a=i.getStringByKey("Name");var o=i.getStringByKey("Text");var s=e.QExceptionEvalType.lookupExceptionEvalType(i.getStringByKey("EvaluateDefault"));var l=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(i.getStringByKey("ApplySettingsToHeader"));var u=i.getBooleanByKeyExt("Active",true);var p=i.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);var g=n._addNewExceptionInternal(a,o,s,l,u,!p);g.queueEventing();e.QInAExceptions.importEvaluates(i,r,g,t);e.QInAExceptions.importThresholds(i,g);g.resumeEventing();return g};e.QInAExceptions.prototype.importFormatV2=function(t,r,n,i){if(e.isNull(r)){return}var a=r.size();for(var o=0;o<a;o++){var s=r.getStructureAt(o);var l=s.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(l)){var u=this.importContextItem(l.getStructureAt(0),n,i,null,t,s);if(e.notNull(u)){if(l.size()>1){this.importContextItem(l.getStructureAt(1),n,i,u,t,s)}u.setIsChangeable(s.getBooleanByKeyExt("Changegable",true))}}}};e.QInAExceptions.prototype.importContextItem=function(t,r,n,i,a,o){var s=i;var l=r.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(l)){var u=this.getMemberFromContextItem(t,l);if(e.notNull(u)){if(e.isNull(s)){s=this.importException(a,u,n,o)}if(l.isMeasureStructure()){s.setMeasure(u)}else{s.setStructure(u)}s.displayOnOtherMember(u,l.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));s.setEvaluateAllMembers(l,t.getBooleanByKeyExt("EvaluateAllMembers",false))}}return s};e.QInAExceptions.prototype.getMemberFromContextItem=function(t,r){var n=r.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(n)){var i=t.getBooleanByKeyExt("EvaluateAllMembers",false);var a=r.getAllStructureMembers();if(i&&!a.isEmpty()){return a.get(0)}}return n};e.QInAExceptions.prototype.exportComponentWithList=function(e,t,r){if(this.isVersion1(e,t)){return this.exportFormatV1(e,t)}else if(this.isVersion2(e,t)){return this.exportFormatV2(e,t)}return null};e.QInAExceptions.prototype.exportFormatV1=function(t,r){var n=null;var i=r.getExceptions();if(e.notNull(i)){var a=i.size();if(a>0){n=e.PrFactory.createList();var o=t.isAbap(r);for(var s=0;s<a;s++){var l=i.get(s);var u=this.exportException(t,l,o);if(e.isNull(u)){break}n.add(u)}}}return n};e.QInAExceptions.prototype.exportException=function(t,r,n){var i=e.PrFactory.createStructure();if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){i.putBoolean("Active",r.isActive());i.putBoolean("EvaluateBeforePostAggregation",!r.isEvaluatedAfterCalculations());i.putBoolean("Changegable",r.isChangeable())}else if(n){i.putBoolean("Active",r.isActive())}else if(!r.isActive()){t.addWarning(e.ErrorCodes.IMPORT_EXCEPTION_INACTIVE,e.XStringUtils.concatenate3("Exception '",r.getName(),"' is inactive."));return null}var a=r.getThresholds();if(a.isEmpty()&&!t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.addWarning(e.ErrorCodes.IMPORT_EXCEPTION_NO_THRESHOLDS,e.XStringUtils.concatenate3("Exception '",r.getName(),"' has no threshold."));return null}e.QInAExceptions.exportThresholds(a,t,i,n);e.QInAExceptions.exportEvaluates(r.getEvaluates(),t,i,n);i.putString("Name",r.getName());if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||n){i.putString("Text",r.getText())}var o=r.getHeaderSetting();if(o!==e.QExceptionHeaderSettings.NONE){i.putString("ApplySettingsToHeader",o.getName())}i.putString("EvaluateDefault",r.getEvaluateDefault().toString());return i};e.QInAExceptions.prototype.exportFormatV2=function(t,r){var n=r.getExceptionManager();var i=n.size();if(i===0){return null}var a=e.PrFactory.createList();var o=t.isAbap(r);for(var s=0;s<i;s++){var l=n.get(s);var u=this.getExportedExceptionStructureByName(a,l.getName());if(e.isNull(u)){u=this.exportException(t,l,o);if(e.isNull(u)){continue}u.putNewList("StructureContext");a.add(u)}var p=u.getListByKey("StructureContext");e.QInAExceptions.exportStructureContextItem(p,l.getMeasure(),l);e.QInAExceptions.exportStructureContextItem(p,l.getStructure(),l)}return a};e.QInAExceptions.prototype.getExportedExceptionStructureByName=function(t,r){var n=t.size();for(var i=0;i<n;i++){var a=t.getStructureAt(i);if(e.XString.isEqual(a.getStringByKey("Name"),r)){return a}}return null};e.QInAField=function(){};e.QInAField.prototype=new e.QInAComponentWithStructure;e.QInAField.prototype._ff_c="QInAField";e.QInAField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInAField.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getFieldAccessorSingle().getFieldByName(r.getStringByKey("Name"));if(e.isNull(o)){return null}var s=r.getStringByKey("TextTransformation");if(e.notNull(s)){o.setTextTransformation(e.QInAConverter.lookupTextTransformation(s))}o.setDisplayFormat(r.getStringByKey("DisplayFormat"));if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var l=r.getStructureByKey("Formula");if(e.notNull(l)){var u=e.QInAFormulaMeasure.importFormulaMeasure(t,o.getDimension(),r.getStructureByKey("Formula"),null,a);o.setFormulaItem(u)}}return o};e.QInAField.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getObtainability();var s=e.XMath.binaryAnd(i,e.QImExFlag.HIDE)>0||e.notNull(o)&&o!==e.ObtainabilityType.ALWAYS;n.putString("Name",a.getName());if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)){n.putStringNotNull("DisplayFormat",a.getDisplayFormat())}var l=a.getTextTransformation();if(e.notNull(l)){n.putString("TextTransformation",e.QInAConverter.lookupTextTransformationInA(l))}if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)||t.mode===e.QModelFormat.INA_VALUE_HELP){if(!t.capabilities.supportsExtendedSort()&&!t.isVirtualInA(a.getQueryModel())){var u;if(t.modelContext===e.QContextType.SELECTOR){if(a.isEqualTo(a.getDimension().getSelectorKeyField())){u=a.getDimension().getSelectorOrder();n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(u))}else{n.putInteger("SortOrder",0)}}else{if(a.hasSorting()){u=a.getResultSetSorting().getDirection();n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(u))}else if(a.getDimension().hasSorting()){var p=a.getDimension();u=p.getResultSetSorting().getDirection();n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(u))}else{n.putInteger("SortOrder",0)}}}if(s){n.putString("Obtainability","UserInterface")}else{n.putString("Obtainability","Always")}}else if(a.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var g=a;if(g.getFormulaItem()!==null){e.QInAFormulaMeasure.exportFormulaItem(t,g.getFormulaItem(),n.putNewStructure("Formula"),a.getQueryModel())}}if(t.isVirtualInA(a.getQueryModel())){n.putBoolean("IsKey",a.isKeyField())}return n};e.QInAFilter=function(){};e.QInAFilter.prototype=new e.QInAComponentWithStructure;e.QInAFilter.prototype._ff_c="QInAFilter";e.QInAFilter.mergeAndExportFilterStateList=function(t,r){var n=null;var i=r.size();if(i>0){if(i>1){var a=e.XList.create();for(var o=0;o<i;o++){var s=t.exportFilterExpression(r.get(o));if(e.notNull(s)){a.add(s)}}var l=a.size();if(l>0){if(l>1){n=e.PrFactory.createStructure();var u=n.putNewStructure("Selection");var p=u.putNewStructure("Operator");p.putString("Code","And");var g=p.putNewList("SubSelections");for(var c=0;c<l;c++){var m=a.get(c).getStructureByKey("Selection");if(e.notNull(m)){g.add(m)}}}else{n=a.get(0)}}}else{n=t.exportFilterExpression(r.get(0))}}return n};e.QInAFilter.prototype.exportFilter=function(t,r,n,i,a,o,s){if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){return t.exportFilterExpression(n)}if(e.notNull(i)&&i.size()===1&&e.notNull(s)&&!e.XCollectionUtils.hasElements(o)&&!t.mode.isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)){var l=i.getIterator().next();if(e.notNull(l)&&!l.isReleased()&&!l.getModelCapabilities().supportsMultiComplexFilter()){var u=r.getEffectiveFilter();var p=t.exportFilterExpression(u);if(e.notNull(p)){return p}}}var g=r.getQueryModel();var c=e.XList.create();var m=e.XList.create();if(this.isValidFilterExpression(n,g)&&!this.shouldBeIgnored(t,n)){if(r.isIgnoreInternalNonMeasureFilter()){m.add(this.extractMeasureFilter(n,n.getContext(),c))}else{m.add(this.decorateWithZoomFilter(n,o,c))}}if(e.notNull(i)){var y=r.getExternalizedFilterName();var d=i.getByKey(y);if(this.isValidFilterExpression(d,g)&&!this.shouldBeIgnored(t,d)){var A=this.getRuntimeExternalFilter(d,r,c);if(r.isIgnoreInternalNonMeasureFilter()){m.add(this.extractMeasureFilter(A,n.getContext(),c))}else{m.add(this.decorateWithZoomFilter(A,o,c))}}var I=i.getKeysAsIteratorOfString();while(I.hasNext()){var S=I.next();if(!e.XString.isEqual(S,y)){var f=i.getByKey(S);if(this.isValidFilterExpression(f,g)&&!this.shouldBeIgnored(t,f)){var v=this.getRuntimeExternalFilter(f,r,c);m.add(this.decorateWithZoomFilter(v,o,c))}}}}if(e.notNull(a)&&this.isValidFilterExpression(a,g)){m.add(this.decorateWithZoomFilter(a,o,c))}var C;if(e.XCollectionUtils.hasElements(o)){C=e.QFilterExpression.createTransient(n.getContext());C.setComplexRoot(o);m.add(C);c.add(C)}if(e.XCollectionUtils.hasElements(s)){var N=e.QFilterExpression.createTransient(n.getContext());N.setComplexRoot(s);m.add(N);c.add(N)}var E=e.QInAFilter.mergeAndExportFilterStateList(t,m);e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(c);return E};e.QInAFilter.prototype.shouldBeIgnored=function(t,r){return t.mode.isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&r.getTagging().containsKey("PersistedQueryIgnoreFilter")};e.QInAFilter.prototype.getRuntimeExternalFilter=function(t,r,n){var i=r.getBackProjectionFilterIds();var a;if(e.notNull(i)&&i.contains(t.getUniqueId())){a=e.QFilterExpression.createTransient(r.getContext());a.copyFrom(t,null);n.add(a)}else{a=t}return a};e.QInAFilter.prototype.extractMeasureFilter=function(t,r,n){var i;var a=t.getFilterRootElement();if(e.isNull(a)){i=t}else{i=e.QFilterExpression.createTransient(r);i.setComplexRoot(this.copyAndSkipNonMeasureFilter(a,r.getQueryModel()));n.add(i)}return i};e.QInAFilter.prototype.copyAndSkipNonMeasureFilter=function(t,r){var n;var i=t.getComponentType();if(i.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)||i.isTypeOf(e.FilterComponentType.OPERATION)){var a=r.getDimensionByName(t.getDimensionName());if(e.notNull(a)&&a.getDimensionType().isTypeOf(e.DimensionType.MEASURE_STRUCTURE)){return t}}else if(i.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)&&!i.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){var o=this.createFilterAlgebraList(i,r);n=t.getChildrenIterator();while(n.hasNext()){var s=this.copyAndSkipNonMeasureFilter(n.next(),r);if(e.notNull(s)){o.add(s)}}return o}return null};e.QInAFilter.prototype.decorateWithZoomFilter=function(t,r,n){var i;var a=t.getFilterRootElement();if(!e.XCollectionUtils.hasElements(r)||e.isNull(a)){i=t}else{var o=this.checkConflicting(a,r,false);if(o){i=e.QFilterExpression.createTransient(r.getContext());i.setComplexRoot(this.copyAndSkipConflicting(a,r));n.add(i)}else{i=t}}return i};e.QInAFilter.prototype.copyAndSkipConflicting=function(t,r){var n;var i=t.getComponentType();if(i.isTypeOf(e.OlapComponentType.FILTER_ELEMENT)&&!this.checkConflicting(t,r,false)){return t}else if(i.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)&&!i.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){var a=this.createFilterAlgebraList(i,r.getContext());n=t.getChildrenIterator();while(n.hasNext()){var o=this.copyAndSkipConflicting(n.next(),r);if(e.notNull(o)){a.add(o)}}return a}return null};e.QInAFilter.prototype.createFilterAlgebraList=function(t,r){if(t.isTypeOf(e.FilterComponentType.CARTESIAN_PRODUCT)){return e.QFilterCartesianProduct._create(r,null)}if(t.isTypeOf(e.FilterComponentType.AND)){return e.QFilterAnd._create(r,null)}if(t.isTypeOf(e.FilterComponentType.OR)){return e.QFilterOr._create(r,null)}if(t.isTypeOf(e.FilterComponentType.NOT)){return e.QFilterNot._create(r,null)}return e.QFilterCartesianProduct._create(r,null)};e.QInAFilter.prototype.checkConflicting=function(t,r,n){var i=t.getComponentType();var a;var o;if(i.isTypeOf(e.FilterComponentType.CARTESIAN_LIST)){var s=t;if(!s.isConvertToFlatFilter()&&r.getCartesianListByDimensionName(s.getDimensionName())!==null){var l=e.XStringUtils.isNotNullAndNotEmpty(s.getHierarchyName());o=t.getChildrenIterator();while(o.hasNext()){a=this.checkConflicting(o.next(),r,l);if(a){return true}}}}else if(i.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){o=t.getChildrenIterator();while(o.hasNext()){a=this.checkConflicting(o.next(),r,false);if(a){return true}}}else if(i.isTypeOf(e.FilterComponentType.OPERATION)){var u=t;var p=u.getDimensionName();return!u.isConvertToFlatFilter()&&(n||e.XStringUtils.isNotNullAndNotEmpty(u.getHierarchyName()))&&(e.isNull(p)||r.getCartesianListByDimensionName(p)!==null)}return false};e.QInAFilter.prototype.isValidFilterExpression=function(t,r){if(e.isNull(t)){return false}var n=t.getFilterRootElement();if(e.isNull(n)){return false}if(n.getOlapComponentType().isTypeOf(e.FilterComponentType.TRANSIENT_FILTER)){return false}if(e.notNull(r)){var i=t.getDimensionsUsedInFilter().getIterator();while(i.hasNext()){var a=i.next();var o=r.getDimensionByName(a);if(e.isNull(o)){return n.getMemberNamesFromFilter(a).isEmpty()}else if(e.QInAExportUtil.isFormulaCalculatedDimensionHidden(o)){return false}}}return true};e.QInAFilterAlgebra=function(){};e.QInAFilterAlgebra.prototype=new e.QInAComponentWithStructure;e.QInAFilterAlgebra.prototype._ff_c="QInAFilterAlgebra";e.QInAFilterAlgebra.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInAFilterAlgebra.prototype.getTagName=function(){return"Operator"};e.QInAFilterAlgebra.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=r.getListByKey("SubSelections");if(e.notNull(s)){var l=r.getStringByKey("Code");var u;if(e.XString.isEqual(l,"And")){u=e.QFilterAnd._create(a,o)}else if(e.XString.isEqual(l,"Not")){u=e.QFilterNot._create(a,o)}else{u=e.QFilterOr._create(a,o)}var p=s.size();for(var g=0;g<p;g++){var c=s.getStructureAt(g);var m=t.importFilterElement(c,null,o,a);if(e.notNull(m)){u.add(m)}}if(u.hasElements()){return u}}return null};e.QInAFilterAlgebra.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.size();if(o===0){return null}var s=e.PrFactory.createList();for(var l=0;l<o;l++){var u=a.get(l);var p;if(u.getOlapComponentType()===e.FilterComponentType.TUPLE){p=t.exportFilterTuple(u)}else{p=t.exportFilterElement(u)}if(e.notNull(p)&&p.hasElements()){s.add(p)}}if(s.isEmpty()){return null}n.put("SubSelections",s);var g=a.getComponentType();if(g.isTypeOf(e.FilterComponentType.AND)){n.putString("Code","And")}else if(g.isTypeOf(e.FilterComponentType.OR)){n.putString("Code","Or")}else if(g===e.FilterComponentType.NOT){n.putString("Code","Not")}return n};e.QInAFilterAll=function(){};e.QInAFilterAll.prototype=new e.QInAComponentWithStructure;e.QInAFilterAll.prototype._ff_c="QInAFilterAll";e.QInAFilterAll.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInAFilterAll.prototype.importComponentWithStructure=function(e,t,r,n,i){var a=r;e.importFixedFilter(t,a,i);e.importDynamicFilter(t,a,i);e.importVisibilityFilter(t,a,i);return a};e.QInAFilterAll.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;if(i.getQueryModel().isExportingFixedFilter()){e.exportFixedFilter(i,r)}e.exportDynamicFilter(i,r);e.exportVisibilityFilter(i,r);return r};e.QInAFilterCellValueOperand=function(){};e.QInAFilterCellValueOperand.prototype=new e.QInAComponentWithStructure;e.QInAFilterCellValueOperand.prototype._ff_c="QInAFilterCellValueOperand";e.QInAFilterCellValueOperand.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInAFilterCellValueOperand.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=r.getStringByKey("Low");if(e.XString.isEqual(o,"")){o=null}var s=r.getStringByKey("High");if(e.XString.isEqual(s,"")){s=null}var l=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"));var u=e.QFilterCellValueOperand._create(a,null,o,s,l);u.setIsExcluding(r.getBooleanByKey("IsExcluding"));return u};e.QInAFilterCellValueOperand.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putBoolean("IsExcluding",a.isExcluding());var o=a.getComparisonOperator();n.putString("Comparison",e.QInAConverter.lookupComparisonInA(o));var s=a.getLow();n.putString("Low",s);if(e.XStringUtils.isNotNullAndNotEmpty(s)&&a.isLowVariable()){n.putString("LowIs","Variable")}if(o.getNumberOfParameters()===2){var l=a.getHigh();n.putString("High",l);if(e.XStringUtils.isNotNullAndNotEmpty(l)&&a.isHighVariable()){n.putString("HighIs","Variable")}}return n};e.QInAFilterConvertedTimeCartesianList=function(){};e.QInAFilterConvertedTimeCartesianList.prototype=new e.QInAFilterCartesianList;e.QInAFilterConvertedTimeCartesianList.prototype._ff_c="QInAFilterConvertedTimeCartesianList";e.QInAFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST};e.QInAFilterElement=function(){};e.QInAFilterElement.prototype=new e.QInAComponentWithStructure;e.QInAFilterElement.prototype._ff_c="QInAFilterElement";e.QInAFilterElement.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInAFilterElement.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=n;if(r.containsKey("Operator")){s=t.importFilterAlgebra(o,r,a)}else{var l=r.getStructureByKey("SetOperand");if(e.isNull(l)){if(r.containsKey("GeometryOperand")){s=t.importFilterGeo(o,r,a)}}else{s=t.importCartesianList(l,s,o,a)}}return s};e.QInAFilterElement.prototype.m_exportingAtLevel1=false;e.QInAFilterElement.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getComponentType();if(o.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){if(o===e.FilterComponentType.CARTESIAN_LIST){t.exportCartesianList(a,n)}else if(o===e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){t.exportConvertedTimeCartesianList(a,n)}else if(o===e.FilterComponentType.CARTESIAN_PRODUCT){t.exportFilterCartesianProduct(a,n)}else{if(this.shouldContinueExport(a,t)){t.exportFilterAlgebra(a,n);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false}}}}else if(o.isTypeOf(e.FilterComponentType.OPERATION)){var s=a;var l=s.getComparisonOperator();if(e.notNull(l)){if(l.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.exportFilterGeo(s,n)}else{if(t.capabilities.supportsSetOperand()){var u=e.PrFactory.createStructure();var p=s.getFieldMetadata();var g=e.notNull(p)?p.getName():s.getFieldName();if(e.XStringUtils.isNotNullAndNotEmpty(g)){var c=e.notNull(p)?p.getDimensionMetadata():null;if(t.getMode()===e.QModelFormat.INA_DATA_BLENDING_SOURCE_METADATA&&e.notNull(c)&&a.getQueryModel()!==null){var m=a.getQueryModel().getDimensionByName(c.getName());if(e.notNull(m)&&(m.getDimensionType()===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION||m.getDimensionType()===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION)){return n}}u.putString("FieldName",g);var y=s.getHierarchyName();var d=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;if(d&&e.notNull(c)){if(c.isMeasureStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(c.isSecondaryStructure()){u.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}if(e.notNull(y)){var A=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.TAG_HIERARCHICAL_FILTER,c.getName());u.putString(e.InAQueryMergeConstants.TAG_KEY,A)}}if(e.notNull(y)){var I=s.getFilterExpression()!==null?s.getFilterExpression():s.getParent().getFilterExpression();e.QInAHierarchy.exportHierarchyForFilter(t,t.isAbap(a),u,null,I,s.getQueryManager(),g,y,s.getHierarchyDueDate(),s.getHierarchyVersion())}if(s.isConvertToFlatFilter()){u.putBoolean("ConvertToFlatSelection",true)}var S=u.putNewList("Elements");var f=S.addNewStructure();t.exportFilterOperation(s,f);if(e.notNull(n)){n.put("SetOperand",u)}}}}}}else if(o.isTypeOf(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){var v=e.PrFactory.createStructure();var C=v.putNewList("Elements");C.add(t.exportCellValueOperand(a));n.put("CellValueOperand",v)}return n};e.QInAFilterElement.prototype.shouldContinueExport=function(t,r){var n=e.notNull(r.variableProcessingDirective)&&r.variableProcessingDirective===e.ProcessingStep.VARIABLE_DEFINITION;if(!n){return true}var i=t.getQueryModel();var a=t.getModelCapabilities();if(a.supportsComplexTupleFilter()&&e.notNull(i)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true}return false}return true};e.QInAFilterExpression=function(){};e.QInAFilterExpression.prototype=new e.QInAComponentWithStructure;e.QInAFilterExpression.prototype._ff_c="QInAFilterExpression";e.QInAFilterExpression.exportGlobalCellValueOperands=function(t,r){var n=null;if(r.getModelCapabilities().supportsCellValueOperand()){var i=e.PrFactory.createList();if(r.isSuppressingNulls()){var a=e.QFilterCellValueOperand.createForNullSuppression(r.getContext(),null);i.add(t.exportCellValueOperand(a))}var o=r.getCellValueOperands();var s=o.size();for(var l=0;l<s;l++){i.add(t.exportCellValueOperand(o.get(l)))}if(!i.isEmpty()){var u=e.PrFactory.createStructure();u.put("Elements",i);n=e.PrFactory.createStructure();n.put("CellValueOperand",u)}}return n};e.QInAFilterExpression.combineSetOperandWithCellValueOperand=function(t,r){if(e.QInAFilterExpression.isCellOperandEmpty(r)&&!e.QInAFilterExpression.isSetOperandEmpty(t)){return t}if(!e.QInAFilterExpression.isCellOperandEmpty(r)&&e.QInAFilterExpression.isSetOperandEmpty(t)){var n=e.PrFactory.createStructure();n.put("Selection",r);return n}if(e.QInAFilterExpression.isCellOperandEmpty(r)&&e.QInAFilterExpression.isSetOperandEmpty(t)){return null}var i=e.PrFactory.createStructure();var a=i.putNewStructure("Selection");var o=a.putNewStructure("Operator");o.putString("Code","And");var s=o.putNewList("SubSelections");var l=t.getStructureByKey("Selection");if(e.isNull(l)){var u=e.PrFactory.createStructure();u.put("SetOperand",t);s.add(u)}else{s.add(l)}s.add(r);return i};e.QInAFilterExpression.isCellOperandEmpty=function(t){if(e.notNull(t)){var r=t.getStructureByKey("Selection");var n;if(e.isNull(r)){n=t.getStructureByKey("CellValueOperand")}else{n=r.getStructureByKey("CellValueOperand")}if(e.notNull(n)){return n.getListByKey("Elements").isEmpty()}}return true};e.QInAFilterExpression.isSetOperandEmpty=function(t){if(e.isNull(t)){return true}var r=t.getStructureByKey("Selection");if(e.isNull(r)){r=t.getStructureByKey("SetOperand");var n;if(e.isNull(r)){n=t.getListByKey("Elements")}else{n=r.getListByKey("Elements")}return e.PrUtils.isListEmpty(n)}return r.getKeysAsReadOnlyListOfString().isEmpty()};e.QInAFilterExpression.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInAFilterExpression.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.isNull(o)){o=e.QFactory.createFilterExpression(a,i)}var s=0;var l=null;if(e.notNull(r)){l=r.getStructureByKey("Selection");if(e.isNull(l)){l=r.getStructureByKey("SelectionRepo");s=1}}o.setCartesianProduct(null);o.setComplexRoot(null);if(e.notNull(l)){var u=t.importFilterElement(l,null,o,a);if(e.notNull(u)){if(s>=1){o.setComplexRoot(u)}else{var p=e.QFilterUtil.convertComplexFilterToCartesian(u);if(e.notNull(p)){o.setCartesianProduct(p)}else{o.setComplexRoot(u)}}}}if(o.getModelCapabilities().supportsCellValueOperand()){o.setIsSuppressingNulls(false);o.clearCellValueFilter();if(e.notNull(r)){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){o.setIsSuppressingNulls(r.getBooleanByKeyExt("IsSuppressingNulls",false))}if(e.notNull(l)){var g=l.getStructureByKey("CellValueOperand");if(e.isNull(g)){var c=l.getStructureByKey("Operator");if(e.notNull(c)){var m=c.getListByKey("SubSelections");if(m.size()===2){var y=m.getStructureAt(1);g=y.getStructureByKey("CellValueOperand")}}}if(e.notNull(g)){var d=g.getListByKey("Elements");if(e.notNull(d)){var A=e.QFilterCellValueOperand.createForNullSuppression(a,null);var I=d.size();if(I>0){var S=d.getStructureAt(0);var f=t.importFilterCellValueOperand(S,a);var v=0;if(f.isEqualTo(A)){o.setIsSuppressingNulls(true);v=1}o.clearCellValueFilter();for(var C=v;C<I;C++){var N=d.getStructureAt(C);var E=t.importFilterCellValueOperand(N,a);o.addCellValueFilter(E)}}}}}}}return o};e.QInAFilterExpression.prototype.exportComponentWithStructure=function(e,t,r,n){return r};e.QInAFilterExpression.prototype.exportComponent=function(t,r,n,i){var a=r;if(e.isNull(a)){return null}var o=null;if(a.getModelCapabilities().supportsCellValueOperand()){o=e.QInAFilterExpression.exportGlobalCellValueOperands(t,a)}var s=a.getFilterRootElement();var l=null;if(e.notNull(s)){if(s.getOlapComponentType()===e.FilterComponentType.TUPLE){l=t.exportFilterTuple(s)}else if(s.getOlapComponentType()===e.FilterComponentType.VIRTUAL_DATASOURCE){l=t.exportFilterVirtualDatasource(s)}else{l=t.exportFilterElement(s)}if(e.notNull(l)&&!l.hasElements()){l=null}}var u=null;if(e.notNull(l)){u=e.PrFactory.createStructure();u.put("Selection",l)}if(e.notNull(o)){u=e.QInAFilterExpression.combineSetOperandWithCellValueOperand(u,o)}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(e.isNull(u)){u=e.PrFactory.createStructure()}if(a.getModelCapabilities().supportsCellValueOperand()){u.putBoolean("IsSuppressingNulls",a.isSuppressingNulls())}}return u};e.QInAFilterFixed=function(){};e.QInAFilterFixed.prototype=new e.QInAComponentWithStructure;e.QInAFilterFixed.prototype._ff_c="QInAFilterFixed";e.QInAFilterFixed.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInAFilterFixed.prototype.getTagName=function(){return"FixedFilter"};e.QInAFilterFixed.prototype.importComponentWithStructure=function(t,r,n,i,a){if(e.isNull(r)){return null}var o=i;var s=t.importFilterExpression(null,r,o,a);if(e.notNull(o)&&e.notNull(s)){o.setFixedFilter(s)}return s};e.QInAFilterFixed.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;if(!i.isFixedFilterInitialized()){return null}var a=i.getFixedFilter();return e.exportFilterExpression(a)};e.QInAFilterGeo=function(){};e.QInAFilterGeo.prototype=new e.QInAComponentWithStructure;e.QInAFilterGeo.prototype._ff_c="QInAFilterGeo";e.QInAFilterGeo.tryCreateGeometry=function(t){var r=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(r)){r=e.XStringValue.create(t)}return r};e.QInAFilterGeo.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInAFilterGeo.prototype.getTagName=function(){return"GeometryOperand"};e.QInAFilterGeo.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=a.getFieldAccessorSingle();var l=r.getStringByKey("Comparison");var u=r.getStringByKey("FieldName");var p=r.getStringByKey("Value1");if(e.XStringUtils.isNotNullAndNotEmpty(l)&&e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XStringUtils.isNotNullAndNotEmpty(p)){var g=e.QInAConverter.lookupComparison(l);if(e.isNull(g)){return null}if(!g.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return null}var c=s.getFieldByName(u);if(e.isNull(c)){return null}var m=e.QFactory.createFilterOperationWithOperator(o,c,g);var y=e.QInAFilterGeo.tryCreateGeometry(p);m.getLow().setValue(y);var d=r.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var A=e.QInAFilterGeo.tryCreateGeometry(d);m.getHigh().setValue(A)}var I=r.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(I)){var S=e.QInAFilterGeo.tryCreateGeometry(I);m.getThird().setValue(S)}return m}return null};e.QInAFilterGeo.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getComparisonOperator();if(!o.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){throw e.XException.createIllegalStateException("Not a spatial operator")}n.putString("Comparison",e.QInAConverter.lookupComparisonInA(o));var s=a.getFieldMetadata();n.putString("FieldName",s.getName());var l=t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING||t.getOriginalMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING;var u=s.getDimensionMetadata();if(l&&e.notNull(u)){if(u.isMeasureStructure()){n.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)}else if(u.isSecondaryStructure()){n.putString(e.InAQueryMergeConstants.TAG_KEY,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)}}var p=a.getLow();var g=a.getDataSource();if(e.isNull(g)){if(e.notNull(p)&&p.getValue()!==null){if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&p.getTagging().containsKey("PersistedQueryPlaceholder")){n.putString("Value1",p.getTagging().getByKey("PersistedQueryPlaceholder"))}else{e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,p.getValueType())}var c=p.getGeometry().getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(c)){n.putInteger("SRID",c.getInteger())}}}else{if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,e.XValueType.STRING)}var m=t.exportDataSource(g,false);n.put("DataSource",m)}var y=a.getHigh();if(e.notNull(y)&&y.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value2",n,y,e.XValueType.STRING)}var d=a.getThird();if(e.notNull(d)&&d.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value3",n,d,e.XValueType.STRING)}return n};e.QInAFilterManager=function(){};e.QInAFilterManager.prototype=new e.QInAComponentWithStructure;e.QInAFilterManager.prototype._ff_c="QInAFilterManager";e.QInAFilterManager.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.isNull(o)){o=a.getOlapEnv().getFilterManager()}var s=r.getStructureByKey("OlapFilterManager");var l=s.getStructureByKey("OlapFilters");var u=l.getKeysAsIteratorOfString();while(u.hasNext()){var p=u.next();var g=o.getFilterByName(p);t.importFilterExpression(g,l.getStructureByKey(p),o,o.getContext())}return o};e.QInAFilterManager.prototype.exportComponentWithStructure=function(e,t,r,n){var i=r.putNewStructure("OlapFilterManager");var a=i.putNewStructure("OlapFilters");var o=t;var s=o.getFilters();var l=s.getKeysAsIteratorOfString();while(l.hasNext()){var u=l.next();var p=s.getByKey(u);a.put(u,e.exportFilterExpression(p))}return r};e.QInAFilterManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInAFilterOperation=function(){};e.QInAFilterOperation.prototype=new e.QInAComponentWithStructure;e.QInAFilterOperation.prototype._ff_c="QInAFilterOperation";e.QInAFilterOperation.importValue=function(t,r,n,i,a,o,s,l,u){var p=o.getStringByKey(l);var g=e.QInAConverter.lookupValueType(p);if(g===e.XValueType.VARIABLE){i.setFilterValueType(e.XValueType.VARIABLE);var c=o.getStringByKey(s);var m=r.getVariables().getByKey(c);if(e.notNull(m)){i.setVariableValue(m)}}else{if(g===e.XValueType.CURRENT_MEMBER){i.setFilterValueType(g)}if(e.notNull(u)){var y=o.getListByKey(u);if(e.notNull(y)){var d=i.getMemberNavigations();var A=y.size();for(var I=0;I<A;I++){d.add(e.QInAFilterOperation.importMemberNavigation(y.getStructureAt(I)))}}}e.QInAValueUtils.importValue(t,i,o,s,a,n)}};e.QInAFilterOperation.importMemberNavigation=function(t){var r=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){var n=t.getListByKey("Parameters");var i=n.size();for(var a=0;a<i;a++){var o=n.getStructureAt(a);if(o.containsKey("Navigations")){var s=o.getListByKey("Navigations");var l=s.size();for(var u=0;u<l;u++){r.addNavigation(e.QInAFilterOperation.importMemberNavigation(s.getStructureAt(u)))}}else{if(o.containsKey("Level")){var p=o.getByKey("Level");if(p.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(p.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(p.getString()))}}else if(o.containsKey("Member")){r.addParameter(e.QFactory.createNavigationParameterWithMemberName(o.getStringByKey("Member")))}else if(o.containsKey("NoValuesAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(o.getStringByKey("NoValuesAboveLevel")))}else if(o.containsKey("ErrorAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(o.getStringByKey("ErrorAboveLevel")))}else if(o.containsKey("Shift")){var g=o.getStructureByKey("Shift");r.addParameter(e.QFactory.createNavigationParameterWithShift(g.getStringByKey("Level"),g.getIntegerByKey("Constant")))}else if(o.containsKey("Range")){var c=o.getStructureByKey("Range");r.addParameter(e.QFactory.createNavigationParameterWithRange(c.getStringByKey("Level"),c.getIntegerByKey("OffsetLow"),c.getIntegerByKey("OffsetHigh")))}else{var m=o.getByKey("Constant");if(m.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(m.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithStringConstant(m.getString()))}}}}}return r};e.QInAFilterOperation.exportMemberNavigation=function(t,r){r.putString("Function",t.getMemberFunction().getName());var n=t.getParameters();if(e.notNull(n)){var i=n.size();var a=r.putNewList("Parameters");for(var o=0;o<i;o++){var s=n.get(o);var l=a.addNewStructure();var u=s.getMemberNavigationType();var p=e.QInAConverter.lookupMemberNavigationTypeInA(u);if(u===e.MemberNavigationType.FUNCTION_PARAM_SHIFT||u===e.MemberNavigationType.FUNCTION_PARAM_RANGE){l=l.putNewStructure(p);e.QInAFilterOperation.setKeyValueForMemberNavigation(l,"Level",s.getLevelValue());e.QInAFilterOperation.setKeyValueForMemberNavigation(l,"Constant",s.getConstantValue());e.QInAFilterOperation.setKeyValueForMemberNavigation(l,"OffsetLow",s.getOffSetLow());e.QInAFilterOperation.setKeyValueForMemberNavigation(l,"OffsetHigh",s.getOffsetHigh())}else{if(!e.QInAFilterOperation.setKeyValueForMemberNavigation(l,p,s.getLevelValue())){if(!e.QInAFilterOperation.setKeyValueForMemberNavigation(l,p,s.getConstantValue())){e.QInAFilterOperation.setKeyValueForMemberNavigation(l,p,s.getFunctionName())}}}}}var g=t.getNavigations();if(e.notNull(g)){var c;if(r.containsKey("Parameters")){c=r.getListByKey("Parameters")}else{c=r.putNewList("Parameters")}var m=c.addNewStructure();var y=m.putNewList("Navigations");var d=g.size();for(var A=0;A<d;A++){e.QInAFilterOperation.exportMemberNavigation(g.get(A),y.addNewStructure())}}};e.QInAFilterOperation.setKeyValueForMemberNavigation=function(t,r,n){if(e.isNull(n)){return false}if(n.getValueType().isNumber()){t.putDouble(r,n.getDouble())}else{t.putString(r,n.toString())}return true};e.QInAFilterOperation.exportValue=function(t,r,n,i,a,o,s){var l=r.getFilterValueType();if(l===e.XValueType.VARIABLE){var u=r.getVariableValue();if(e.notNull(u)){i.putString(o,"Variable");i.putString(a,u.getName())}}else{if(r.isManualInput()){i.putString(o,"ManualInput")}if(l===e.XValueType.CURRENT_MEMBER){i.putString(o,"CurrentMember")}if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&r.getTagging().containsKey("PersistedQueryPlaceholder")){i.putString(a,r.getTagging().getByKey("PersistedQueryPlaceholder"))}else{e.QInAValueUtils.exportPlaceholderValue(t,a,i,r,n,r.getQueryModel())}}if(e.notNull(s)){var p=r.getMemberNavigations();var g=p.size();if(g>0){var c=i.putNewList(s);for(var m=0;m<g;m++){e.QInAFilterOperation.exportMemberNavigation(p.get(m),c.addNewStructure())}}}};e.QInAFilterOperation.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInAFilterOperation.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=r.getStringByKeyExt("Comparison","=");var s=e.QInAConverter.lookupComparison(o);if(e.isNull(s)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",o));return null}var l=i;var u=l.getFilterExpression();var p=l.getField();var g=e.QFactory.createFilterOperationWithOperator(u,p,s);var c=p.getValueType();var m=s.isTypeOf(e.ComparisonOperator.LIKE)||s.isTypeOf(e.ComparisonOperator.MATCH)||s.isTypeOf(e.ComparisonOperator.NOT_MATCH);if(m){c=e.XValueType.STRING}if(r.getBooleanByKeyExt("IsExcluding",false)){g.setSetSign(e.SetSign.EXCLUDING)}else{g.setSetSign(e.SetSign.INCLUDING)}g.resetDepth();var y=r.getIntegerByKeyExt("Depth",-1);if(y!==-1){g.setDepth(y)}g.resetLevelOffset();var d=r.getIntegerByKeyExt("LevelOffset",-1);if(d!==-1){g.setLevelOffset(d)}var A=r.getStructureByKey("Hierarchy");if(e.notNull(A)){var I=A.getStringByKey("Name");var S=null;var f=null;var v=g.getQueryModel();if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&e.notNull(v)&&v.getSystemType().isTypeOf(e.SystemType.ABAP)){var C=A.getStringByKey("DueDate");if(e.notNull(C)){S=e.XDate.createDateFromSAPFormat(C)}f=A.getStringByKey("Version")}g.setHierarchyInfo(I,S,f)}if(t.capabilities.supportsConvertToFlatFilter()){g.setConvertToFlatFilter(r.getBooleanByKeyExt("ConvertToFlatSelection",false))}var N=l.getSupplementFieldNames();var E=a.getVariableContainer();var M=s.getNumberOfParameters();if(M>=1){var h=g.getLow();e.QInAFilterOperation.importValue(t,E,p,h,c,r,"Low","LowIs","LowNavigations");e.QInAValueUtils.importSupplements(t,h,r,"LowSupplements",N);e.QInAValueUtils.importValueCompounds(t,h,r,"LowComponents")}if(M>=2){var D=g.getHigh();e.QInAFilterOperation.importValue(t,E,p,D,c,r,"High","HighIs",null);e.QInAValueUtils.importSupplements(t,D,r,"HighSupplements",N);e.QInAValueUtils.importValueCompounds(t,D,r,"HighComponents")}if(M>=3){var T=g.getThird();e.QInAFilterOperation.importValue(t,E,p,T,c,r,"Value3","Value3Is",null);e.QInAValueUtils.importSupplements(t,T,r,null,N);e.QInAValueUtils.importValueCompounds(t,T,r,null)}return g};e.QInAFilterOperation.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getFieldMetadata();var s=e.notNull(o)?o.getName():a.getFieldName();if(e.isNull(o)&&e.XStringUtils.isNullOrEmpty(s)){return n}var l=a.getComparisonOperator();if(e.isNull(l)){l=e.ComparisonOperator.EQUAL}var u=e.notNull(o)?o.getValueType():e.XValueType.STRING;if(l.isTypeOf(e.ComparisonOperator.LIKE)||l.isTypeOf(e.ComparisonOperator.MATCH)||l.isTypeOf(e.ComparisonOperator.NOT_MATCH)){u=e.XValueType.STRING}var p=a.getContext();var g;var c=e.notNull(p)?t.isAbap(p):false;if(l===e.ComparisonOperator.NOT_BETWEEN&&c){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(l)}n.putString("Comparison",g);if(a.hasLevelOffset()){n.putInteger("LevelOffset",a.getLevelOffset())}if(a.hasDepth()){n.putInteger("Depth",a.getDepth())}if(a.getSetSign()===e.SetSign.EXCLUDING){n.putBoolean("IsExcluding",true)}var m=a.getHierarchyName();if(e.notNull(m)){var y=a.getFilterExpression()!==null?a.getFilterExpression():a.getParent().getFilterExpression();e.QInAHierarchy.exportHierarchyForFilter(t,c,n,null,y,a.getQueryManager(),s,m,a.getHierarchyDueDate(),a.getHierarchyVersion())}if(t.capabilities.supportsConvertToFlatFilter()&&a.isConvertToFlatFilter()){n.putBoolean("ConvertToFlatSelection",true)}var d=l.getNumberOfParameters();if(d>=1){var A=this.getValue(t,a.getLow(),a,o);e.QInAFilterOperation.exportValue(t,A,u,n,"Low","LowIs","LowNavigations");if(d>=2){var I=this.getValue(t,a.getHigh(),a,o);e.QInAFilterOperation.exportValue(t,I,u,n,"High","HighIs",null)}if(d>=3){var S=this.getValue(t,a.getThird(),a,o);e.QInAFilterOperation.exportValue(t,S,u,n,"Value3","Value3Is",null)}}return n};e.QInAFilterOperation.prototype.getValue=function(t,r,n,i){var a=r;var o=n.getQueryManager();var s=e.notNull(o)?o.getVariableProcessor():null;var l=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&e.notNull(o)&&o.getModelCapabilities().supportsPersistedInA()&&e.notNull(s)&&!s.isUsingSavedPromptsForExitVariables();if(l&&e.notNull(i)&&e.notNull(o)){var u=o.getVariableContainer();var p=i.getDimensionMetadata().getName();var g=e.XStream.of(u.getVariablesAffectingDynamicFilter()).filter(function(e){return e.isEnforcedDynamicValue()}.bind(this)).find(function(t){return e.XString.isEqual(t.getDimension().getName(),p)}.bind(this));if(g.isPresent()){a=e.QFactory.createFilterValueBag(n.getContext(),n.getFilterExpression(),n);a.setFilterValueType(e.XValueType.VARIABLE);a.setVariableValue(g.get())}}return a};e.QInAFilterTuple=function(){};e.QInAFilterTuple.prototype=new e.QInAComponentWithStructure;e.QInAFilterTuple.prototype._ff_c="QInAFilterTuple";e.QInAFilterTuple.prototype.getComponentType=function(){return e.FilterComponentType.TUPLE};e.QInAFilterTuple.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=e.PrFactory.createStructure();o.putString("Code","And");var s=o.putNewList("SubSelections");var l=s.addNewStructure();var u=l.putNewStructure("TuplesOperand");var p=u.putNewList("FieldNames");var g=a.getFieldNames();p.addAllStrings(g);var c=u.putNewList("Tuples");var m=a.getTuples();for(var y=0;y<m.size();y++){var d=m.get(y);var A=c.addNewList();for(var I=0;I<g.size();I++){A.addString(d.get(I))}}n.put("Operator",o);return n};e.QInAFilterTuple.prototype.importComponentWithStructure=e.noSupport;e.QInAFilterVirtualDatasource=function(){};e.QInAFilterVirtualDatasource.prototype=new e.QInAComponentWithStructure;e.QInAFilterVirtualDatasource.prototype._ff_c="QInAFilterVirtualDatasource";e.QInAFilterVirtualDatasource.prototype.getComponentType=function(){return e.FilterComponentType.VIRTUAL_DATASOURCE};e.QInAFilterVirtualDatasource.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=e.PrFactory.createStructure();o.putString("Code","And");var s=o.putNewList("SubSelections");var l=this.createMemberOperand("SchemaName",a.getSchemaName());var u=this.createMemberOperand("PackageName",a.getPackageName());var p=this.createMemberOperand("ObjectName",a.getObjectName());s.add(l);s.add(u);s.add(p);n.put("Operator",o);return n};e.QInAFilterVirtualDatasource.prototype.createMemberOperand=function(t,r){var n=e.PrFactory.createStructure();n.putString("AttributeName",t);var i=e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL);n.putString("Comparison",i);n.putString("Value",r);var a=e.PrFactory.createStructure();a.put("MemberOperand",n);return a};e.QInAFilterVirtualDatasource.prototype.importComponentWithStructure=e.noSupport;e.QInAFormulaMeasure=function(){};e.QInAFormulaMeasure.prototype=new e.QInAComponentWithStructure;e.QInAFormulaMeasure.prototype._ff_c="QInAFormulaMeasure";e.QInAFormulaMeasure.importNameAndText=function(t,r,n){var i=e.QInAMember.getNameForImport(t,n);var a=e.QInAMember.getText(t,n);if(e.XStringUtils.isNullOrEmpty(i)&&e.XStringUtils.isNullOrEmpty(a)){i=t.getStringByKey("Name");a=t.getStringByKey("Description")}r.setName(i);r.setText(a)};e.QInAFormulaMeasure.exportFormulaConstantValue=function(t,r,n){var i=n.getValue()===null;var a=n.getVariable();if(i&&e.isNull(a)){r.putNull("Value")}var o=n.getValueType();if(o===e.XValueType.INTEGER){r.putString("ValueType","Number");if(!i){r.putInteger("Value",n.getInteger())}}else if(o===e.XValueType.DOUBLE||o===e.XValueType.DECIMAL_FLOAT){r.putString("ValueType","Number");if(!i){r.putDouble("Value",n.getDouble())}}else if(o===e.XValueType.LONG){r.putString("ValueType","Number");if(!i){r.putLong("Value",n.getLong())}}else if(o===e.XValueType.STRING){r.putString("ValueType","String");if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&n.getTagging().containsKey("PersistedQueryPlaceholder")){r.putString("Value",n.getTagging().getByKey("PersistedQueryPlaceholder"))}else if(!i){r.putString("Value",n.getString())}}else if(o===e.XValueType.BOOLEAN){r.putString("ValueType","Bool");if(!i){r.putBoolean("Value",n.getBoolean())}}else if(o===e.XValueType.DATE){r.putString("ValueType","Date");if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&n.getTagging().containsKey("PersistedQueryPlaceholder")){r.putString("Value",n.getTagging().getByKey("PersistedQueryPlaceholder"))}else if(!i){r.putString("Value",n.getDate().toString())}}else if(o===e.XValueType.DATE_TIME){var s=t.mode===e.QModelFormat.INA_DATA||t.mode===e.QModelFormat.INA_DATA_MERGE_PROCESSING?"Date":"DateTime";r.putString("ValueType",s);if(!i){r.putString("Value",n.getDateTime().toString())}}else if(o.isSpatial()){r.putString("ValueType","String");if(!i){r.putString("Value",n.getGeometry().toWKT())}}else if(o===e.XValueType.TIMESPAN){r.putString("ValueType","String");if(!i){var l=n.getTimeSpan();r.putString("Value",l.toString())}}else if(o===e.XValueType.VARIABLE){e.QInAExportUtil.setNameIfNotNull(r,"Value",a);r.putString("ValueIs","Variable")}};e.QInAFormulaMeasure.importFormulaMeasure=function(t,r,n,i,a){if(e.isNull(n)){return null}var o=n.getStructureByKey("Function");var s=i;if(e.notNull(o)){var l=o.getStringByKey("Name");var u=o.getListByKey("Parameters");var p=e.QFactory.createFormulaFunction(a);if(e.notNull(u)){p.setFunctionName(l);var g=u.size();for(var c=0;c<g;c++){e.QInAFormulaMeasure.importFormulaMeasure(t,r,u.getStructureAt(c),p,a)}}p.setSolveOrder(n.getIntegerByKeyExt("SolveOrder",0));if(e.isNull(s)){s=p}else{s.add(p);p.setParent(s)}}else{var m=n.getStructureByKey("Constant");if(e.notNull(m)){var y=e.QFactory.createFormulaConstant(a);if(e.XString.isEqual("Variable",m.getStringByKey("ValueIs"))){var d=m.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var A=r.getQueryModel().getVariableManager();y.setVariable(A.getVariables().getByKey(d))}if(e.isNull(s)){s=y}else{s.add(y);y.setParent(s)}}else{var I=m.getStringByKey("ValueType");var S=!m.containsKey("Value")||m.getElementTypeByKey("Value")===e.PrElementType.THE_NULL;if(e.XString.isEqual(I,"Number")){if(S){y.setNullByType(e.XValueType.DOUBLE)}else{y.setDouble(m.getDoubleByKey("Value"))}}else if(e.XString.isEqual(I,"String")){if(S){y.setNullByType(e.XValueType.STRING)}else{y.setString(m.getStringByKey("Value"))}}else if(e.XString.isEqual(I,"Bool")){if(S){y.setNullByType(e.XValueType.BOOLEAN)}else{y.setBoolean(m.getBooleanByKey("Value"))}}else if(e.XString.isEqual(I,"DateTime")){if(S){y.setNullByType(e.XValueType.DATE_TIME)}else{y.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(m.getStringByKey("Value"),false))}}else if(e.XString.isEqual(I,"Date")){if(S){y.setNullByType(e.XValueType.DATE)}else{y.setDate(e.XDate.createDateFromStringWithFlag(m.getStringByKey("Value"),false))}}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null}var f=m.getStringByKey("Unit");if(e.XStringUtils.isNotNullAndNotEmpty(f)){y.setUnit(f)}var v=m.getStringByKey("Currency");if(e.XStringUtils.isNotNullAndNotEmpty(v)){y.setCurrency(v)}if(e.isNull(s)){s=y}else{s.add(y);y.setParent(s)}}}else{var C=n.getStructureByKey("Member");if(e.notNull(C)){var N=e.QFactory.createFormulaMember(a);var E=C.getStringByKey("Name");N.setMemberName(E);N.setDimensionName(C.getStringByKey("Dimension"));var M=C.getStringByKey("NameIs");if(e.XString.isEqual(M,"Booked")){N.setBooked()}else if(e.XString.isEqual(M,"Previous")){N.setPrevious()}if(e.isNull(s)){s=N}else{s.add(N);N.setParent(s)}}else{var h=n.getStructureByKey("AttributeValue");if(e.notNull(h)){var D=h.getStringByKey("Name");var T=e.QFactory.createFormulaAttributeWithName(a,D);if(e.isNull(s)){s=T}else{s.add(T);T.setParent(s)}}}}}return s};e.QInAFormulaMeasure.exportFormulaItem=function(t,r,n,i){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,r,n,i,false,false,null)};e.QInAFormulaMeasure.signFlipMember=function(t){var r=t.getContext();var n=e.QFactory.createFormulaOperation(r);n.setOperator(e.MathOperator.MULT);n.setLeftSide(e.QFactory.createFormulaConstantWithIntValue(r,-1));n.setRightSide(t);return n};e.QInAFormulaMeasure.exportMemberWithSignFlip=function(t,r,n,i){var a=n.getQueryModel();if(e.notNull(a)&&t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var o=e.PrFactory.createStructure();if(a.getSystemType().isTypeOf(e.SystemType.BW)){var s=a.getMeasureDimension();var l=s.getStructureMember(r.getMemberName());if(e.notNull(l)){var u=null;var p;if(l.getComponentType()===e.MemberType.BASIC_MEASURE){p=l.getQueryDataCells();if(e.XCollectionUtils.hasElements(p)){u=p.get(0)}}else if(l.getComponentType()===e.MemberType.RESTRICTED_MEASURE){var g=e.QInAMemberRestrictedMeasure.getMemberForSignFlip(n,l);if(e.notNull(g)){var c=s.getStructureMember(g);if(e.notNull(c)){p=c.getQueryDataCells();if(e.XCollectionUtils.hasElements(p)){u=p.get(0)}}}}if(e.notNull(u)&&u.hasSignReversal()){e.QInAFormulaMeasure.exportFormulaItem(t,e.QInAFormulaMeasure.signFlipMember(r),o,n);return o}}}else{var m=a.getAccountDimension();if(e.notNull(m)){var y=m.getStructureMemberByAliasOrMember(r.getMemberName());if(e.notNull(y)&&y.getComponentType()!==e.MemberType.RESTRICTED_MEASURE&&i){return null}if(e.notNull(y)&&y.getComponentType()===e.MemberType.RESTRICTED_MEASURE){if(y.isModelDefinedMember()&&i){return null}y=m.getStructureMemberByAliasOrMember(e.QInAMemberRestrictedMeasure.getMemberForSignFlip(n,y))}if(e.notNull(y)){var d=y.getAccountType();if(d===e.AccountType.INC||d===e.AccountType.LEQ){e.QInAFormulaMeasure.exportFormulaItem(t,e.QInAFormulaMeasure.signFlipMember(r),o,n);return o}}}}}return null};e.QInAFormulaMeasure.exportFormulaMeasure=function(t,r,n){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,r.getFormula(),n,r.getQueryModel(),r.isAutoSignFlip(),r.isAutoSignFlipRestrictedMeasureOnly(),r.getName())};e.QInAFormulaMeasure.exportFormulaItemSignFlip=function(t,r,n,i,a,o,s){if(e.notNull(r)){var l=r.getComponentType();if(l===e.OlapComponentType.FORMULA_CONSTANT){var u=r;var p=n.putNewStructure("Constant");var g=u.getUnit();if(e.XStringUtils.isNotNullAndNotEmpty(g)){p.putString("Unit",g)}var c=u.getCurrency();if(e.XStringUtils.isNotNullAndNotEmpty(c)){p.putString("Currency",c)}e.QInAFormulaMeasure.exportFormulaConstantValue(t,p,u)}else if(l===e.OlapComponentType.FORMULA_OPERATION){var m=r;var y=n.putNewStructure("Function");y.putString("Name",m.getOperator().getDisplayString());var d=y.putNewList("Parameters");e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,m.getLeftSide(),d.addNewStructure(),i,a,o,s);e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,m.getRightSide(),d.addNewStructure(),i,a,o,s)}else if(l===e.OlapComponentType.FORMULA_FUNCTION){var A=r;var I=n.putNewStructure("Function");I.putString("Name",A.getFunctionName());var S=I.putNewList("Parameters");var f=A.size();for(var v=0;v<f;v++){e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,A.get(v),S.addNewStructure(),i,a,o,s)}var C=A.getSolveOrder();if(C!==0){n.putInteger("SolveOrder",C)}}else if(l===e.OlapComponentType.FORMULA_ITEM_MEMBER){var N=r;var E=i.getQueryModel();var M=N.getVariable();var h;if(e.isNull(M)){h=e.PrFactory.createStructure();var D;if(t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&N.getTagging().containsKey("PersistedQueryPlaceholder")){D=N.getTagging().getByKey("PersistedQueryPlaceholder")}else{D=e.QInAExportUtil.getMeasureMemberNameByAlias(E,N.getMemberName(),t)}h.putStringNotNull("Name",D);h.putStringNotNull("Dimension",N.getDimensionName());if(N.isBooked()){h.putString("NameIs","Booked");h.putStringNotNull("Name",s)}else if(N.isPrevious()){h.putString("NameIs","Previous");h.putStringNotNull("Name",s)}if(a){var T=e.QInAFormulaMeasure.exportMemberWithSignFlip(t,N,i,o);if(e.notNull(T)){n.put("Function",T.getByKey("Function"))}else{n.put("Member",h)}}else{n.put("Member",h)}}else{h=n.putNewStructure("Member");h.putString("Name",M.getName());h.putString("NameIs","Variable")}}else if(l===e.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){var Q=r;var R=n.putNewStructure("AttributeValue");R.putString("Name",Q.getFieldName())}}};e.QInAFormulaMeasure.prototype.getComponentType=function(){return e.MemberType.FORMULA};e.QInAGenericComponent=function(){};e.QInAGenericComponent.prototype=new e.QInAComponentWithStructure;e.QInAGenericComponent.prototype._ff_c="QInAGenericComponent";e.QInAGenericComponent.prototype.getComponentType=function(){return e.OlapComponentType.OLAP};e.QInAGenericComponent.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QInAGenericComponent.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;r.putString("Name",i.getName());r.putString("Type",t.getComponentType().getName());return r};e.QInAHierarchy=function(){};e.QInAHierarchy.prototype=new e.QInAComponentWithStructure;e.QInAHierarchy.prototype._ff_c="QInAHierarchy";e.QInAHierarchy.isMetadataWithAutoSubmitCapability=function(t,r){return t.getOriginalMode()===e.QModelFormat.INA_METADATA||t.getMode()===e.QModelFormat.INA_METADATA&&e.notNull(r)&&r.getModelCapabilities().supportsAutoVariableSubmit()&&r.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP};e.QInAHierarchy.importHierarchyName=function(t,r,n,i){var a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}n.setUseHierarchyNameVariable(i);var o=i&&e.QInAHierarchy.isMetadataWithAutoSubmitCapability(t,n.getQueryManager());if(o){n.setHierarchyNameVariableName(a)}return a};e.QInAHierarchy.importHierarchyDueDate=function(t,r,n,i){var a=t.getStringByKey("DueDateIs");var o=e.notNull(a)&&e.XString.isEqual("Variable",a);var s=t.getStringByKey("DueDate");r.setUseHierarchyDueDateVariable(o);if(o){r.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(s)?null:s)}else if(e.notNull(n)){n.setHierarchyDueDate(e.XDate.createDateFromStringWithFlag(s,i))}};e.QInAHierarchy.importHierarchyVersion=function(t,r,n){var i=t.getStringByKey("VersionIs");var a=e.notNull(i)&&e.XString.isEqual("Variable",i);var o=t.getStringByKey("Version");r.setUseHierarchyVersionVariable(a);if(a){r.setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(o)?null:o)}else if(e.notNull(n)){n.setHierarchyVersion(o)}};e.QInAHierarchy.importHierarchyDrillInfo=function(t,r,n,i){var a=r.getIntegerByKeyExt("InitialDrillOffset",0);var o=r.getIntegerByKeyExt("InitialDrillLevel",0);var s=n.getModelCapabilities();if(s.supportsVisibilityFilter()||!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){n.setInitialDrillLevel(o);n.setSelectorInitialDrillLevel(o)}else{if(o===-1){n.setInitialDrillLevel(o);n.setSelectorInitialDrillLevel(o)}else if(a===-1){n.setInitialDrillLevel(0);n.setSelectorInitialDrillLevel(0)}else{n.setInitialDrillLevel(o+a);n.setSelectorInitialDrillLevel(o+a)}}n.setInitialDrillOffset(a);n.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var l=e.Alignment.DEFAULT_VALUE;if(i.getModelCapabilities().supportsExpandBottomUp()){var u=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");l=e.QInAConverter.lookupLowerLevelNodeAlignment(u);if(r.containsKey("ExpandBottomUp")){var p=r.getBooleanByKeyExt("ExpandBottomUp",false);if(p){l=e.Alignment.CHILDREN_ABOVE_PARENT}}}n.setLowerLevelNodeAlignment(l);var g=r.getBooleanByKeyExt("NodeCondensation",false);n.setHasNodeCondensation(g);var c=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var m=e.QInAConverter.lookupResultSetVisibility(c);n.setMemberOfPostedNodeVisibility(m);if(s.supportsMaxDrillLevel()){var y=r.getIntegerByKeyExt("MaxDrillLevel",-1);n.getHierarchyManager().setMaxDrillLevel(y);var d=r.getIntegerByKeyExt("MaxRuntimeLevel",-1);n.getHierarchyManager().setMaxRuntimeLevel(d)}};e.QInAHierarchy.appendItemsToCatalogResult=function(t,r,n){var i=e.PrUtils.getListSize(r,0);for(var a=0;a<i;a++){var o=e.PrUtils.getStructureElement(r,a);var s=e.HierarchyCatalogItem.createCatalogItem();s.setDimensionName(n);var l;if(o.hasStringByKey("Name")){l=o.getStringByKey("Name")}else{l=o.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(l)||t.containsHierarchy(l)){continue}s.setHierarchyName(l);var u=e.PrUtils.getStringProperty(o,"Description");if(e.notNull(u)){s.setHierarchyLongText(u.getString())}var p=e.PrUtils.getStringProperty(o,"Version");if(e.notNull(p)){s.setVersionName(p.getString())}var g=e.PrUtils.getStringProperty(o,"Structure");if(e.notNull(g)){s.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var c=e.PrUtils.getBooleanValueProperty(o,"IsModeled",false);s.setIsModeled(c);var m=e.PrUtils.getStringProperty(o,"DateTo");if(e.notNull(m)){var y=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(y)){s.setDateTo(e.XDate.createDateFromIsoFormat(y))}}var d=e.PrUtils.getListProperty(o,"Levels");if(e.notNull(d)){s.setSupportsHierarchyLevels(true);var A=e.XList.create();var I=e.PrUtils.getListSize(d,0);for(var S=0;S<I;S++){var f=e.PrUtils.getStructureElement(d,S);if(e.isNull(f)){continue}var v=e.HierarchyCatalogLevel.createCatalogLevel();var C=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(C>-1){v.setLevel(C)}var N=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(N)){v.setLevelName(N.getString())}var E=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(E)){v.setLevelDescription(E.getString())}var M=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(M)){v.setLevelUniqueName(M.getString())}var h=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(h)){v.setLevelDimensionName(h.getString())}var D=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(D)){v.setLevelType(e.QInAConverter.lookupHierarchyLevelType(D.getInteger()))}A.add(v)}s.setHierarchyLevels(A)}var T=o.getStringByKey("RestNode");if(e.notNull(T)){s.setRestNode(T)}var Q=o.getStringByKey("VirtualRootNode");if(e.notNull(Q)){s.setVirtualRootNode(Q)}t.addItem(s)}return t};e.QInAHierarchy.isNamePlaceHolderForAutoSubmit=function(t,r){var n=false;if(e.notNull(t)){var i=t.getQueryManager();n=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&r.isTypeOf(e.QModelFormat.INA_DATA)&&t.useHierarchyNameVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyNameVariableName())}return n};e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit=function(t,r){var n=false;if(e.notNull(t)){var i=t.getQueryManager();n=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&r.isTypeOf(e.QModelFormat.INA_DATA)&&t.useHierarchyDueDateVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyDueDateVariableName())}return n};e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit=function(t,r){var n=false;if(e.notNull(t)){var i=t.getQueryManager();n=e.notNull(i)&&i.isExecuteAutoVariableSubmit()&&r.isTypeOf(e.QModelFormat.INA_DATA)&&t.useHierarchyVersionVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyVersionVariableName())}return n};e.QInAHierarchy.exportHierarchyForFilter=function(t,r,n,i,a,o,s,l,u,p){var g=l;var c=i;if(e.notNull(g)){var m=n.putNewStructure("Hierarchy");if(e.isNull(c)&&e.notNull(o)&&o.isExecuteAutoVariableSubmit()){c=e.QInAHierarchy.getHierarchyDimension(o,s);var y=e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(c,t.getMode());if(y&&e.notNull(c)){g=c.getHierarchyNameVariableName();m.putString("NameIs","Variable")}}m.putString("Name",g);if(r&&t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)){if(e.isNull(a)||!e.XString.isEqual(a.getName(),e.QFilter.FIXED_FILTER_CONTAINER)||e.notNull(o)&&o.isExecuteAutoVariableSubmit()){var d=e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(c,t.mode);if(d&&e.notNull(c)){m.putString("DueDate",c.getHierarchyDueDateVariableName());m.putString("DueDateIs","Variable")}else{e.QInAExportUtil.setDate(t,m,"DueDate",u)}var A=e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(c,t.mode);if(A&&e.notNull(c)){m.putString("Version",c.getHierarchyVersionVariableName());m.putString("VersionIs","Variable")}else{m.putStringNotNull("Version",p)}}}}};e.QInAHierarchy.getHierarchyDimension=function(t,r){var n=null;if(e.notNull(t)){var i=t.getDimensionMemberVariables();for(var a=0;a<i.size();a++){var o=i.get(a);var s=o.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE;var l=s?o.getHierarchyNameDimension():o.getDimension();if(e.notNull(l)&&l.getFieldByName(r)!==null&&(o.isUsedInDynamicFilter()||o.isUsedInFixedFilter())){n=l;break}}}return n};e.QInAHierarchy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInAHierarchy.prototype.getTagName=function(){return"Hierarchy"};e.QInAHierarchy.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(o.supportsHierarchy()){var s=o.isDisplayHierarchyFixInFilter();var l=o.getHierarchyManagerBase();l.setDisplayHierarchyFixInFilter(false);if(e.isNull(r)){o.setHierarchy(null)}else{var u=r.getStringByKey("NameIs");var p=e.notNull(u)&&e.XString.isEqual("Variable",u);var g=o.getQueryManager();var c=p&&e.QInAHierarchy.isMetadataWithAutoSubmitCapability(t,g);var m=e.QInAHierarchy.importHierarchyName(t,r,o,p);var y=null;if(e.XStringUtils.isNotNullAndNotEmpty(m)){if(!c&&o.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(r,o);this.importLeveledHierarchyToMetadata(t,r,a,o)}if(r.getBooleanByKey("IsTransient")){y=e.QHierarchy.createCustomHierarchy(o.getContext(),o,m,r.getStringByKey("Description"))}else if(!c){if(e.notNull(g)&&g.isExecuteAutoVariableSubmit()&&o.getHierarchy()!==null&&e.XString.isEqual(o.getHierarchy().getName(),m)){y=o.getHierarchy()}else{y=e.QHierarchy.create(o.getContext(),o,m)}}e.QInAHierarchy.importHierarchyDueDate(r,o,y,t.capabilities.supportsSapDate());e.QInAHierarchy.importHierarchyVersion(r,o,y);if(!c){var d=r.getStringByKey("DateTo");y.setDateTo(e.XDate.createDateFromStringWithFlag(d,t.capabilities.supportsSapDate()));var A=r.getStringByKey("0DATEFROM");y.setDateFrom(e.XDate.createDateFromStringWithFlag(A,t.capabilities.supportsSapDate()));var I=r.getStructureByKey("Metadata");if(e.notNull(I)){d=I.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(d)){y.setDateTo(e.XDate.createDateFromStringWithFlag(d,t.capabilities.supportsSapDate()))}A=I.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(A)){y.setDateFrom(e.XDate.createDateFromStringWithFlag(A,t.capabilities.supportsSapDate()))}}o.setHierarchy(y);var S=r.getBooleanByKeyExt("HierarchyActive",true);o.setHierarchyActive(S);o.setSelectorHierarchyActive(S)}}var f=r.getListByKey("StickyDimensionMembers");o.clearStickyMembers();if(e.XCollectionUtils.hasElements(f)){for(var v=0;v<f.size();v++){o.addStickyMember(f.getStringAt(v))}}e.QInAHierarchy.importHierarchyDrillInfo(t,r,o,a);l.setDisplayHierarchyFixInFilter(s);return y}l.setDisplayHierarchyFixInFilter(s)}return null};e.QInAHierarchy.prototype.importHierarchyAsCatalogItem=function(t,r){var n=e.PrFactory.createList();n.add(t);var i=r.getHierarchies();if(e.isNull(i)){i=e.QFactory.createHierarchyCatalogResult();e.QInAHierarchy.appendItemsToCatalogResult(i,n,r.getName());r.getHierarchyManagerBase().setHierarchies(i)}else{e.QInAHierarchy.appendItemsToCatalogResult(i,n,r.getName())}};e.QInAHierarchy.prototype.importLeveledHierarchyToMetadata=function(t,r,n,i){var a=i.getQueryModelBase().getQueryManagerBase();if(e.notNull(a)&&!e.PrUtils.isListEmpty(r.getListByKey("Levels"))){var o=a.getMetadataModelBase();var s=o.getLeveledHierarchiesBase();var l=e.QInAMdHierarchy.importLeveledHierarchy(t,n,i,r);if(!s.contains(l)){s.add(l)}}};e.QInAHierarchy.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=t.getSession().hasFeature(e.FeatureToggleOlap.OPTIMIZE_HIERARCHY_EXPORT)&&t.mode.isTypeOf(e.QModelFormat.INA_DATA);if(a.supportsHierarchy()){var s=a.isHierarchyActive();var l=!s&&t.mode.isTypeOf(e.QModelFormat.INA_DATA);var u=t.isAbap(a.getQueryModel());var p=this.getHierarchyName(a,u,t.mode);var g=e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(a,t.mode);var c=e.XStringUtils.isNullOrEmpty(p)&&g;var m=e.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(a,t.mode);var y=e.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(a,t.mode);var d=p;if(c){p=a.getHierarchyNameVariableName()}if(e.XStringUtils.isNotNullAndNotEmpty(p)&&(!l||g||m||y)){if(!o){e.QInAExportUtil.setNonEmptyString(n,"HierarchyName",p);n.putBoolean("HierarchyActive",s)}e.QInAExportUtil.setNonEmptyString(n,"Name",p);if(e.XStringUtils.isNullOrEmpty(d)||e.XString.isEqual(d,a.getHierarchyNameVariableName())){n.putString("NameIs","Variable")}if(a.useHierarchyDueDateVariable()||m){n.putString("DueDateIs","Variable");n.putString("DueDate",a.getHierarchyDueDateVariableName())}else{e.QInAExportUtil.setDate(t,n,"DueDate",a.getHierarchyDueDate())}if(y){n.putString("VersionIs","Variable");n.putString("Version",a.getHierarchyVersionVariableName())}else{e.QInAExportUtil.setNonEmptyString(n,"Version",a.getHierarchyVersion())}var A=a.getQueryManager();if(e.notNull(A)&&A.isExecuteAutoVariableSubmit()&&a.useDefaultDrillLevelOnChange()){n.putBoolean("UseDefaultDrillLevelOnChange",true)}var I=0;if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA)||!a.hasZoomDrill()){if(a.getModelCapabilities().supportsVisibilityFilter()||!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){I=a.getInitialDrillLevel()}else{var S=a.getInitialDrillOffset();var f=a.getInitialDrillLevel();if(S===-1&&f>-1){I=0}else if(f>=S){I=a.getInitialDrillLevel()-e.XMath.max(0,S)}else{I=f}}}if(u||I!==0||!o){n.putInteger("InitialDrillLevel",I)}if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){if(a.getInitialDrillOffset()!==0||n.containsKey("InitialDrillOffset")){n.putInteger("InitialDrillOffset",a.getInitialDrillOffset())}if(a.isExplicitDrillOnFilteredNodes()||n.containsKey("ExplicitDrillOnFilteredNodes")){n.putBoolean("ExplicitDrillOnFilteredNodes",a.isExplicitDrillOnFilteredNodes())}if(a.hasStickyMembers()){n.putNewList("StickyDimensionMembers").addAllStrings(a.getStickyMembers())}}var v=a.getLowerLevelNodeAlignment();if(a.getModelCapabilities().supportsExpandBottomUp()){if(o){if(v===e.Alignment.CHILDREN_ABOVE_PARENT){n.putBoolean("ExpandBottomUp",true)}}else{n.putBoolean("ExpandBottomUp",v===e.Alignment.CHILDREN_ABOVE_PARENT)}}if(u){var C;var N=a.getModelCapabilities();if(e.notNull(N)&&N.supportsExpandBottomUp()){C=e.QInAConverter.lookupLowerLevelNodeAlignmentInA(v)}else{C=e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(v)}n.putString("LowerLevelNodeAlignment",C);var E=a.hasNodeCondensation();n.putBoolean("NodeCondensation",E);var M=a.getMemberOfPostedNodeVisibility();var h=e.QInAConverter.lookupResultSetVisibilityInA(M);n.putString("MemberOfPostedNodeVisibility",h)}if(a.isHierarchyNavigationDeltaMode()){n.putBoolean("HierarchyNavigationDeltaMode",true)}if(!o){this.exportHierarchyLevels(n,a,p)}var D=a.getHierarchy();if(!g&&e.notNull(D)&&D.isCustomHierarchy()){n.putBoolean("IsTransient",true);n.putStringNotNull("Description",D.getHierarchyDescription())}return n}}return null};e.QInAHierarchy.prototype.getHierarchyName=function(t,r,n){if(r&&t.getAxisType()===e.AxisType.FREE&&(t.isHierarchyActive()||e.QInAHierarchy.isNamePlaceHolderForAutoSubmit(t,n))){var i=t.getQueryModel().getFilter().getEffectiveFilter();var a=this.getHierarchyFromFilter(i.getFilterRootElement(),t.getName());if(e.notNull(a)){return a}}return t.getHierarchyName()};e.QInAHierarchy.prototype.getHierarchyFromFilter=function(t,r){if(e.notNull(t)){var n=t.getComponentType();if(n.isTypeOf(e.FilterComponentType.OPERATION)){var i=t;if(e.XString.isEqual(i.getDimensionName(),r)&&e.XStringUtils.isNotNullAndNotEmpty(i.getHierarchyName())){return i.getHierarchyName()}}else if(n.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){var a=t;for(var o=0;o<a.size();o++){var s=this.getHierarchyFromFilter(a.get(o),r);if(e.notNull(s)){return s}}}}return null};e.QInAHierarchy.prototype.exportHierarchyLevels=function(t,r,n){if(r.getModelCapabilities().supportsDimensionHierarchyLevels()){var i=r.getHierarchies();if(e.notNull(i)){var a=i.getObjectsIterator();while(a.hasNext()){var o=a.next();if(e.XString.isEqual(o.getHierarchyName(),n)){e.QInAMdHierarchy.exportLevels(t,o);return}}}}};e.QInAMember=function(){};e.QInAMember.prototype=new e.QInAComponentWithStructure;e.QInAMember.prototype._ff_c="QInAMember";e.QInAMember.getNameForImport=function(t,r){var n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(r)){n=e.QInAMember.getValueByFieldName(t,r.getFlatKeyField(),r.getHierarchyKeyField())}return n};e.QInAMember.getText=function(t,r){var n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(r)){n=e.QInAMember.getValueByFieldName(t,r.getFlatTextField(),r.getHierarchyTextField())}return n};e.QInAMember.getValueByFieldName=function(t,r,n){var i=null;if(e.notNull(r)){i=t.getStringByKey(r.getName())}if(e.isNull(i)&&e.notNull(n)){i=t.getStringByKey(n.getName())}return i};e.QInAMember.exportText=function(t,r,n){var i=n.getOriginalText();var a=t.isAbap(n);if(a||e.notNull(i)){r.putString("Description",i)}};e.QInAMember.importMeasure=function(t,r,n,i,a){var o;o=e.QInAMember.determineMemberType(t,r,a);if(r.containsKey("MemberType")&&e.isNull(o)){return null}var s;if(o===e.MemberType.RESTRICTED_MEASURE){s=t.importRestrictedMeasure(r,a,n)}else if(o===e.MemberType.FORMULA){s=t.importFormulaMeasure(r,a,i)}else if(o===e.MemberType.MEASURE){s=t.importBasicMeasure(r,a,n)}else if(o===e.MemberType.VARIANCE){s=t.importVarianceMeasure(r,a,n)}else if(o===e.MemberType.EXCEPTION_AGGREGATION){s=t.importExceptionAggregationMeasure(r,a,n)}else if(o===e.MemberType.CURRENCY_MEASURE){s=t.importCurrencyMeasure(r,a,n)}else{s=null}return s};e.QInAMember.determineMemberType=function(t,r,n){var i;var a=e.QInAMember.getNameForImport(r,n);if(r.containsKey("MemberType")){var o=r.getStringByKeyExt("MemberType","Measure");i=e.QInAConverter.lookupMeasureStructureMemberType(o);if(e.isNull(i)){t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",o,"'"));return null}}else if(n.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.notNull(a)){if(n.getDimensionType()===e.DimensionType.ACCOUNT){i=e.MemberType.MEASURE}else{i=n.getStructureMember(a).getMemberType();if(i===e.MemberType.BASIC_MEASURE){i=e.MemberType.MEASURE}}}else{if(r.containsKey("Formula")){i=e.MemberType.FORMULA}else{var s=r.getStructureByKey("Selection");if(e.isNull(s)){i=e.MemberType.MEASURE}else{i=s.containsKey("Operator")?e.MemberType.RESTRICTED_MEASURE:e.MemberType.MEASURE}}}return i};e.QInAMember.exportCustomMember=function(t,r,n){var i=r.getComponentType();if(i===e.MemberType.FORMULA||i===e.MemberType.VARIANCE){t.exportFormulaMeasure(r,n)}else if(i===e.MemberType.RESTRICTED_MEASURE){t.exportRestrictedMeasure(r,n)}else if(i===e.MemberType.EXCEPTION_AGGREGATION){t.exportExceptionAggregationMeasure(r,n)}else if(i===e.MemberType.CURRENCY_MEASURE){t.exportCurrencyMeasure(r,n)}};e.QInAMember.importGenericMemberProperties=function(t,r,n){if(r.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!r.isCreatedFromMetadata()){if(n.containsKey("NumericShift")){r.setNumericShift(n.getIntegerByKey("NumericShift"))}if(n.containsKey("NumericScale")){r.setNumericScale(n.getIntegerByKey("NumericScale"))}if(n.containsKey("NumericPrecision")){r.setNumericPrecision(n.getIntegerByKey("NumericPrecision"))}}if(r.getModelCapabilities().supportsMemberVisibility()){var i=n.getStringByKeyExt("Visibility","Visible");r.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(i))}var a=n.getStringByKey("PostAggregation");var o=e.QInAConverter.lookupAggregationType(a);r.setPostAggregationType(o);if(n.containsKey("PostAggregationIgnoreHierarchy")){r.setPostAggregationIgnoreHierarchy(true)}r.clearPostAggregationDimensions();var s=n.getListByKey("PostAggregationDimensions");if(e.notNull(s)){var l=s.size();for(var u=0;u<l;u++){r.addPostAggregationDimensionName(s.getStringAt(u))}}e.QInAMember.importWindowFunction(r,n);e.QInAMember.importCurrencyTranslation(r,n)};e.QInAMember.importGenericRuntimeMemberProperties=function(t,r,n){if(r.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!r.isCreatedFromMetadata()){var i=n.getBooleanByKeyExt("ModelDefinedMember",false);var a=i&&r.getQueryManager().getInitSettings().getProviderType()===e.ProviderType.LIST_REPORTING;if(!a){e.QInAMember.importAggregationType(r,n,true)}}e.QInAMember.importGenericMemberProperties(t,r,n);if(n.containsKey("DataType")){r.setDataType(e.QInAConverter.lookupValueType(n.getStringByKey("DataType")))}e.QInAMember.importIgnoredExternalDimensions(t,r,n);e.QInAMember.importSolveOrder(r,n);e.QInAMember.importCurrencyTranslation(r,n)};e.QInAMember.importCurrencyTranslation=function(e,t){if(t.containsKey("CurrencyTranslationName")){e.setCurrencyTranslationName(t.getStringByKey("CurrencyTranslationName"))}};e.QInAMember.importSolveOrder=function(e,t){var r=t.getIntegerByKeyExt("SolveOrder",0);if(r!==0){e.setSolveOrder(r)}};e.QInAMember.importIgnoredExternalDimensions=function(t,r,n){if(t.capabilities.supportsIgnoreExternalDimensions()){if(n.hasStringByKey("IgnoreExternalDimensions")){var i=n.getStringByKey("IgnoreExternalDimensions");if(e.XString.isEqual(i,"All")){r.setIgnoreAllExternalDimensions(true)}}else if(n.containsKey("IgnoreExternalDimensions")){var a=n.getListByKey("IgnoreExternalDimensions");r._setExternalDimensionsToIgnore(e.PrUtils.asListOfString(a))}}};e.QInAMember.exportAggregationType=function(t,r,n){if(t||r.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var i=r.getAggregationType();if(e.notNull(i)){n.putString("Aggregation",e.QInAConverter.lookupAggregationTypeInA(i))}}};e.QInAMember.importAggregationType=function(t,r,n){var i=t.getAggregationType();if(n){t.setAggregationType(null)}var a=r.getStringByKey("Aggregation");if(e.XStringUtils.isNotNullAndNotEmpty(a)){t.setAggregationType(e.QInAConverter.lookupAggregationType(a))}else if(r.getBooleanByKeyExt("ModelDefinedMember",false)&&t.getDimension()!==null&&t.getDimension().getDimensionType()!==e.DimensionType.ACCOUNT){if(e.isNull(i)){t.setAggregationType(e.AggregationType.SUM)}else{t.setAggregationType(i)}}};e.QInAMember.exportGenericRuntimeMemberProperties=function(t,r,n){var i=e.QInAMember.exportingInOldFormat(t,r);if(t.getMode()===e.QModelFormat.INA_DATA_MERGE_PROCESSING&&r.isAvailableInMetadata()&&r.getModCounter()>0){n.putBoolean(e.InAQueryMergeConstants.TAG_MEASURE_MEMBER_TOUCHED,true)}e.QInAMember.exportAggregationType(i,r,n);if(i||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SHIFT)){if(!t.capabilities.supportsDataCells()){e.QInAExportUtil.setIntegerIfNotNull(n,"NumericShift",r.getNumericShift())}}if(!t.capabilities.supportsDataCells()||r.getModelCapabilities().supportsExtendedKeyFigureProperties()){if(i||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SCALE)){var a=r.getNumericScale();if(e.notNull(a)&&a.getInteger()>=0){n.putInteger("NumericScale",a.getInteger())}}if(i||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_PRECISION)){var o=r.getNumericPrecision();if(e.notNull(o)&&o.getInteger()>=0){n.putInteger("NumericPrecision",o.getInteger())}}}if(t.capabilities.supportsCurrencyTranslation()){n.putStringNotNullAndNotEmpty("CurrencyTranslationName",r.getMappedCurrencyTranslationNameForInAData())}if(i||r.hasPropertyChanged(e.QDimensionMemberProperties.QY_VISIBILITY)){if(t.capabilities.supportsMemberVisibility()){var s=r.getResultVisibility();if(e.isNull(s)){s=e.ResultVisibility.VISIBLE}n.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(s))}}var l=r.getPresentationSignReversal();if(n.getByKey("PresentationSignReversal")===null&&e.notNull(l)){n.putBoolean("PresentationSignReversal",l.getBoolean())}if(i||r.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNullAndNotEmpty("UnitType",e.QInAConverter.lookupUnitTypeInA(r.getUnitType()))}if(i||r.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_FIXED)){n.putStringNotNull("UnitFixed",r.getUnitFixed())}if(!t.getMode().isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)){n.putStringNotNull("UnitName",r.getUnitName());n.putStringNotNull("UnitTextName",r.getUnitTextName());n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(r.getDataType()))}e.QInAMember.exportPostAggregation(r,n);e.QInAMember.exportIgnoreExternalDimensions(i,t,r,n);e.QInAMember.exportExceptionAggregation(i,r,n);e.QInAMember.exportWindowFunction(r,n);var u=r.getSolveOrder();if(u!==0){n.putInteger("SolveOrder",u)}};e.QInAMember.exportingInOldFormat=function(t,r){var n=t.getMode().isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)||e.QueryManagerMode.BLENDING===r.getQueryManager().getInitSettings().getMode();var i=n||!r.isAvailableInMetadata()||!r.getModelCapabilities().supportsNamedCustomMember();return i};e.QInAMember.exportIgnoreExternalDimensions=function(t,r,n,i){if(r.capabilities.supportsIgnoreExternalDimensions()){if(n.isIgnoringAllExternalDimensions()){if(t||n.hasPropertyChanged(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)){i.putString("IgnoreExternalDimensions","All")}}else{var a=e.XListOfString.create();if(n.getMemberType()===e.MemberType.RESTRICTED_MEASURE){var o=n;a.addAll(o.getTransientIgnoredExternalDimensions())}var s=n.getIgnoredExternalDimensions();a.addAll(s);if(a.hasElements()&&(t||n.hasPropertyChanged(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)||a.size()!==s.size())){var l=i.putNewList("IgnoreExternalDimensions");l.addAllStrings(a)}}}};e.QInAMember.exportPostAggregation=function(t,r){var n=t.getPostAggregationType();if(e.notNull(n)){r.putString("PostAggregation",e.QInAConverter.lookupAggregationTypeInA(n))}if(t.isPostAggregationIgnoringHierarchy()){r.putBoolean("PostAggregationIgnoreHierarchy",true)}var i=t.getPostAggregationDimensions();if(i.hasElements()){var a=r.putNewList("PostAggregationDimensions");var o=i.getIterator();while(o.hasNext()){a.add(e.PrFactory.createString(o.next()))}}};e.QInAMember.exportExceptionAggregation=function(t,r,n){if(t||r.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)){var i=r.getExceptionAggregationType();if(e.notNull(i)){n.putString("ExceptionAggregation",i.getName())}}if(t||r.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGREGATION_DIMENSIONS)){var a=r.getExceptionAggregationDimensions();if(e.notNull(a)&&a.hasElements()){var o=n.putNewList("ExceptionAggregationDimensions");o.addAllStrings(a)}}};e.QInAMember.exportWindowFunction=function(t,r){var n=t.getWindowFunction();if(e.notNull(n)){var i=r.putNewStructure("WindowFunction");i.putString("Name",e.QInAConverter.lookupWindowFunctionTypeInA(n.getType()));var a=n.getNotInPartitionDimensions();var o=i.putNewList("DimensionsNotInPartition");o.addAllStrings(a);var s=i.putNewList("SortDimensions");var l=n.getSortDimensions().getIterator();while(l.hasNext()){var u=l.next();var p=s.addNewStructure();p.putString("Name",u.getName());var g=u.getDirection();if(g===e.XSortDirection.ASCENDING||g===e.XSortDirection.DESCENDING){p.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(g))}var c=u.getNulls();if(e.notNull(c)&&c!==e.NullsType.NONE){p.putString("Nulls",e.QInAConverter.lookupNullsTypeInA(c))}}var m=n.getFrame();if(e.notNull(m)){var y=i.putNewStructure("Frame");y.putString("Start",e.QInAConverter.lookupFrameStartTypeInA(m.getStart()));y.putInteger("StartPreceding",m.getStartPreceding());y.putString("End",e.QInAConverter.lookupFrameEndTypeInA(m.getEnd()));y.putInteger("EndFollowing",m.getEndFollowing())}}};e.QInAMember.importWindowFunction=function(t,r){var n=r.getStructureByKey("WindowFunction");if(e.notNull(n)){var i=e.QWindowFunction._createWindowFunction(e.QInAConverter.lookupWindowFunctionType(n.getStringByKey("Name")));var a=n.getListByKey("DimensionsNotInPartition");if(e.notNull(a)){for(var o=0;o<a.size();o++){i.addNotInPartitionDimension(a.getStringAt(o))}}var s=n.getListByKey("SortDimensions");if(e.notNull(s)){for(var l=0;l<s.size();l++){var u=s.getStructureAt(l);var p=u.getStringByKey("Name");var g=e.QInAConverter.lookupSortDirection2(u.getStringByKey("Direction"));var c=e.QInAConverter.lookupNullsType(u.getStringByKey("Nulls"));i.addSortDimension(p,g,c)}}var m=n.getStructureByKey("Frame");if(e.notNull(m)){i.setFrame(e.QInAConverter.lookupFrameStartType(m.getStringByKey("Start")),m.getIntegerByKey("StartPreceding"),e.QInAConverter.lookupFrameEndType(m.getStringByKey("End")),m.getIntegerByKey("EndFollowing"))}t.setWindowFunction(i)}};e.QInAMember.prototype.getComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.QInAMember.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getQueryModel();var s=i;if(e.isNull(s)){s=o.getMeasureDimension()}var l=e.QInAMember.importMeasure(t,r,a,o,s);if(e.notNull(l)){e.QInAMember.importGenericRuntimeMemberProperties(t,l,r);if(r.containsKey("PresentationSignReversal")){l.setPresentationSignReversal(r.getBooleanByKey("PresentationSignReversal"))}var u=r.getIntegerByKeyExt("[Measures].[Aggregation]",-1);var p=e.QInAConverter.lookupAggregationType2(u);if(e.notNull(p)){l.setAggregationType(p)}if((o.isBasicMeasureSettingsExportedInRepo()||!l.isCreatedFromMetadata())&&!e.XCollectionUtils.hasElements(r.getStructureByKey("[Measures].[MemberDetails]"))){this.setPrecisionAndScale(t,r,o,l);l.setUnitType(e.QInAConverter.lookupUnitType(r.getStringByKey("UnitType")));l.setUnitFixed(r.getStringByKey("UnitFixed"));l.setUnitName(r.getStringByKey("UnitName"));l.setUnitTextName(r.getStringByKey("UnitTextName"))}t.importExceptions(r,l);if(e.notNull(i)){var g=s.getModelCapabilities();if(e.notNull(g)&&g.supportsExceptionAggregationDimsFormulas()||t.capabilities.supportsExceptionAggregationDimsFormulas()){l.clearExceptionAggregationDimensions()}l.setExceptionAggregationType(null);this.importExceptionAggregationProperties(r,l)}this.importUniversalModelProperties(t,r,l);this.importInternalDataType(r,l)}return l};e.QInAMember.prototype.importExceptionAggregationProperties=function(t,r){var n=t.getListByKey("ExceptionAggregationDimensions");if(e.notNull(n)){var i=n.size();for(var a=0;a<i;a++){r.addExceptionAggregationDimensionName(n.getStringAt(a))}}r.setExceptionAggregationType(e.AggregationType.lookupOrCreate(t.getStringByKey("ExceptionAggregation")))};e.QInAMember.prototype.importInternalDataType=function(t,r){if(r.getDataTypeInternal()===null&&t.containsKey("[Measures].[SQLType]")){var n=t.getStringByKey("[Measures].[SQLType]");if(e.XStringUtils.isNotNullAndNotEmpty(n)){if(e.XString.startsWith(n,e.XStringUtils.concatenate2("DECIMAL","("))){r.setDataTypeInternal(e.XValueType.DECIMAL_FLOAT);var i=e.XString.size("DECIMAL")+1;var a=e.XString.indexOf(n,",");var o=e.XString.size(n)-1;if(a>i&&a<o){var s=e.XString.substring(n,i,a);var l=e.XString.substring(n,a+1,o);r.setDataTypePrecision(e.XInteger.convertFromString(s));r.setDataTypeScale(e.XInteger.convertFromString(l))}}else if(e.XString.isEqual(n,"INTEGER")){r.setDataTypeInternal(e.XValueType.INTEGER)}}}};e.QInAMember.prototype.importUniversalModelProperties=function(t,r,n){var i=n.getModelCapabilities();if(e.notNull(i)&&i.supportsCustomMeasuresInMetadata()){var a=r.getStructureByKey("[Measures].[MemberDetails]");if(e.notNull(a)){var o=e.PrUtils.getIntegerProperty(a,"NumericShift");if(e.notNull(o)){n.setNumericShift(o.getInteger())}var s=e.PrUtils.getIntegerProperty(a,"NumericScale");if(e.notNull(s)){n.setNumericScale(s.getInteger())}var l=e.PrUtils.getIntegerProperty(a,"NumericPrecision");if(e.notNull(l)){n.setNumericPrecision(l.getInteger())}this.importExceptionAggregationProperties(a,n);if(a.hasElements()){n.setUnitType(e.QInAConverter.lookupUnitType(a.getStringByKey("UnitType")));n.setUnitFixed(a.getStringByKey("UnitFixed"))}else{n.setUnitType(e.QInAConverter.lookupByEncodedValue(r.getIntegerByKey("[Measures].[UnitType]")));n.setUnitFixed(r.getStringByKey("[Measures].[UnitFixed]"))}e.QInAMember.importIgnoredExternalDimensions(t,n,a);e.QInAMember.importSolveOrder(n,a);e.QInAMember.importCurrencyTranslation(n,a);if(n.getModelCapabilities().supportsMemberVisibility()){var u=a.getStringByKeyExt("Visibility","Visible");n.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(u))}}}};e.QInAMember.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r.getComponentType();if(a.isTypeOf(e.MemberType.MEASURE)){var o=r;t.exportExceptions(o,n);if(a===e.MemberType.BASIC_MEASURE){var s=true;if(!o.getQueryModel().isExportingEachMeasure()){var l=r;if(t.capabilities.supportsExceptionsV2()||!e.XCollectionUtils.hasElements(l.getExceptions())){s=false}}if(s){t.exportBasicMeasure(r,n)}}else{e.QInAMember.exportCustomMember(t,r,n)}if(n.hasElements()){e.QInAMember.exportGenericRuntimeMemberProperties(t,o,n)}}return n};e.QInAMember.prototype.setPrecisionAndScale=function(e,t,r,n){var i=-1;var a=-1;if(e.isAbap(r)){i=t.getIntegerByKeyExt("Digits",-1);a=t.getIntegerByKeyExt("FractDigits",-1)}else{i=t.getIntegerByKeyExt("[Measures].[Digits]",-1);a=t.getIntegerByKeyExt("[Measures].[FractDigits]",-1)}if(i!==-1){n.setNumericPrecision(i)}if(a!==-1){n.setNumericScale(a)}};e.QInAMemberBasicMeasure=function(){};e.QInAMemberBasicMeasure.prototype=new e.QInAComponentWithStructure;e.QInAMemberBasicMeasure.prototype._ff_c="QInAMemberBasicMeasure";e.QInAMemberBasicMeasure.getNameFromOperand=function(t){var r=t.getStructureByKey("MemberOperand");if(e.notNull(r)){var n=e.XString.isEqual(r.getStringByKey("AttributeName"),"Measures");var i=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"))===e.ComparisonOperator.EQUAL;if(n&&i){return r.getStringByKey("Value")}}return null};e.QInAMemberBasicMeasure.importExceptionAggregation=function(t,r,n){if(r.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){n.clearExceptionAggregationDimensions();n.setExceptionAggregationType(null);var i=t.getListByKey("ExceptionAggregationDimensions");if(e.notNull(i)){var a=i.size();for(var o=0;o<a;o++){n.addExceptionAggregationDimensionName(i.getStringAt(o))}}var s=t.getStringByKey("ExceptionAggregation");n.setExceptionAggregationType(e.AggregationType.lookupOrCreate(s))}else{var l=t.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.setAggregationDimensionName(l)}}};e.QInAMemberBasicMeasure.exportBasicMeasure=function(t,r,n,i){if(!n.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){var a=n.getAggregationDimensionName();if(e.notNull(a)){r.putString("AggregationDimension",a)}}if(!t.capabilities.supportsExtendedSort()&&!t.isVirtualInA(i)){var o=i.getSortingManager().getMeasureSorting(n,false);if(e.isNull(o)){r.putInteger("SortOrder",0)}else{r.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(o.getDirection()))}}};e.QInAMemberBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInAMemberBasicMeasure.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=e.QInAMember.getNameForImport(r,o);var l=e.QInAMember.getText(r,o);if(e.XStringUtils.isNullOrEmpty(s)){s=e.QInAMemberBasicMeasure.getNameFromOperand(r)}var u=o.getStructureMember(s);var p=u;if(e.isNull(p)&&e.notNull(s)){if(!r.containsKey("Selection")){p=o.addNewBasicMeasure(s,l)}}if(e.notNull(p)){e.QInAMemberBasicMeasure.importExceptionAggregation(r,o.getQueryModel(),p);t.importExceptions(r,p)}return p};e.QInAMemberBasicMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(a.getDimension().getDimensionType()===e.DimensionType.ACCOUNT){n.putString("Name",a.getName());return n}var o=a.getQueryModel();if(!o.getModelCapabilities().supportsNamedCustomMember()){var s=a.getExceptionAggregationType();if(!a.isAvailableInMetadata()&&s===e.AggregationType.COUNT){this.exportMeasureReference(t,n,"Name",a.getKeyFieldValue(),o);if(t.capabilities.supportsUniversalModel()){this.exportMeasureReference(t,this.getMemberOperandElement(t,n,a,o),"Value",e.XValueAccess.createWithValue(e.XStringValue.create("$$Count$$")),o)}e.QInAMember.exportText(t,n,a)}else{this.exportMeasureReference(t,this.getMemberOperandElement(t,n,a,o),"Value",a.getKeyFieldValue(),o)}}else{this.exportMeasureReference(t,n,"MemberName",a.getKeyFieldValue(),o)}e.QInAMemberBasicMeasure.exportBasicMeasure(t,n,a,o);if(o.getModelCapabilities().supportsCorrectDimensionDescriptionExt()){var l=r;var u=l.getDimension().getTextField();if(e.notNull(u)){var p=l.getDimension().getAlternativeFieldValue(false,l.getName(),u.getName(),null);if(l.isModelDefinedMember()&&e.notNull(p)){n.putStringNotNullAndNotEmpty("Description",a.getText())}}}if(a.getTagging().containsKey(e.QTransientConstants.TAG_OVERRIDE_DESCRIPTION)){n.putStringNotNullAndNotEmpty("Description",a.getTagging().getByKey(e.QTransientConstants.TAG_OVERRIDE_DESCRIPTION))}return n};e.QInAMemberBasicMeasure.prototype.exportMeasureReference=function(t,r,n,i,a){e.QInAValueUtils.exportPlaceholderValue(t,n,r,i,i.getValueType(),a)};e.QInAMemberBasicMeasure.prototype.getMemberOperandElement=function(t,r,n,i){var a=e.PrFactory.createStructure();a.putString("AttributeName","Measures");r.put("MemberOperand",a);a.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));if(t.isVirtualInA(i)){a.putStringNotNullAndNotEmpty("Description",n.getText())}return a};e.QInAMemberRestrictedMeasure=function(){};e.QInAMemberRestrictedMeasure.prototype=new e.QInAComponentWithStructure;e.QInAMemberRestrictedMeasure.prototype._ff_c="QInAMemberRestrictedMeasure";e.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip=function(t,r){var n=r.getChildren();while(n.hasNext()){var i=n.next();if(i.getOlapComponentType()===e.FilterComponentType.OPERATION){var a=i;var o=a.getDimensionName();if(e.XString.isEqual(t,o)){return a.getLow().getValue().toString()}}var s=e.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip(t,i);if(e.notNull(s)){return s}}return null};e.QInAMemberRestrictedMeasure.getMemberForSignFlip=function(t,r){if(r.getAccountType()!==null){return r.getName()}var n=r.getDimensionContext(t.getQueryManager());var i=r.getFilter();var a=n.getName();if(e.notNull(a)){if(i.isAll()){a=e.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip(a,i.getFilterRootElement())}var o=n.getStructureMemberByAliasOrMember(a);if(e.notNull(o)&&o.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&o!==r){return e.QInAMemberRestrictedMeasure.getMemberForSignFlip(t,o)}}return a};e.QInAMemberRestrictedMeasure.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInAMemberRestrictedMeasure.prototype.importComponentWithStructure=function(t,r,n,i,a){var o;if(e.isNull(n)){var s=i;var l=e.QInAMember.getNameForImport(r,s);var u=e.QInAMember.getText(r,s);if(s.getModelCapabilities().supportsCustomMeasuresInMetadata()&&s.getStructureMember(l)!==null){o=s.getStructureMember(l)}else{o=s.addNewRestrictedMeasure(l,u)}}else{o=n}var p=r.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(p)){o.setAggregationDimensionName(p)}var g=r;if(o.getModelCapabilities().supportsCustomMeasuresInMetadata()){g=r.getStructureByKey("[Measures].[MemberDetails]")}t.importFilterExpression(o.getFilter(),g,o,a);t.importExceptions(g,o);return o};e.QInAMemberRestrictedMeasure.prototype.exportPresentationSignReversal=function(t,r,n){if(!r.isAutoSignFlip()){return}var i=r.getDimension();var a=i.getQueryModel();var o=r.getFilter();if(i.getDimensionType()!==e.DimensionType.ACCOUNT||e.isNull(o)){return}var s=e.QInAMemberRestrictedMeasure.getMemberForSignFlip(r.getQueryModel(),r);if(e.notNull(s)){var l=a.getAccountDimension();if(e.notNull(l)){var u=l.getStructureMemberByAliasOrMember(s);if(e.notNull(u)){var p=u.getAccountType();if(p===e.AccountType.INC||p===e.AccountType.LEQ){n.putBoolean("PresentationSignReversal",true)}}}}};e.QInAMemberRestrictedMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=e.QInAMember.exportingInOldFormat(t,a);var s=o?"Name":"MemberName";n.putString(s,a.getName());e.QInAMember.exportText(t,n,a);if(!a.supportsExceptionAggregationDimsFormulas()){var l=a.getAggregationDimensionName();if(e.notNull(l)){n.putString("AggregationDimension",l)}}var u=null;var p=a.getFilterRootWithTransientTimeSelection();if(e.isNull(p)){if(a.getAggregationDimensionName()!==null){u=e.PrFactory.createStructure();var g=e.XStringBuffer.create();g.append(a.getName()).append(":").append(a.getAggregationDimensionName());u.putString("MeasureOperand",g.toString())}}else if(o){u=t.exportFilterElement(p)}if(e.notNull(u)){n.put("Selection",u)}this.exportPresentationSignReversal(t,a,n);return n};e.QInAMembersAll=function(){};e.QInAMembersAll.prototype=new e.QInAComponentWithStructure;e.QInAMembersAll.prototype._ff_c="QInAMembersAll";e.QInAMembersAll.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInAMembersAll.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(o.supportsCustomMembers()){o.removeCustomMembers()}var s=r.getListByKey("MembersRepo");if(e.isNull(s)){s=r.getListByKey("Members");if(e.isNull(s)){return null}}var l=o.getStructureLayout();if(e.notNull(l)){l.clear();var u=s.size();for(var p=0;p<u;p++){var g=s.getStructureAt(p);var c=t.importStructureMember(o,g,a);if(e.notNull(c)){var m=o.getStructureMember(c.getName());if(e.isNull(m)){o.addMeasure(c)}else{if(m!==c){throw e.XException.createIllegalStateException("Internal error: New member with same name not allowed")}l.removeElement(m);l.add(m)}}}}return o};e.QInAMembersAll.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getStructureLayout();if(e.notNull(o)){var s=a.isMeasureStructure();if(!s&&o.isEmpty()&&a.getStructureMemberLazyLoader()===null){return null}var l=n.putNewList("Members");var u=e.XHashSetOfString.create();var p=o.size();for(var g=0;g<p;g++){var c=o.get(g);if(e.notNull(c)&&!c.isReleased()){var m=null;var y=c.getTagging();if(a.getDimensionType()===e.DimensionType.ACCOUNT&&c.isModelDefinedMember()&&!y.containsKey(e.QTransientConstants.TAG_SERIALIZE_MEMBER)){continue}var d=c.exportRuntimeObject(a,t);if(e.isNull(d)){continue}if(!u.contains(d.getName())){m=t.exportStructureMember(d);u.add(d.getName())}if(e.notNull(m)&&m.hasElements()){l.add(m)}}}}return n};e.QInAQuery=function(){};e.QInAQuery.prototype=new e.QInAComponentWithStructure;e.QInAQuery.prototype._ff_c="QInAQuery";e.QInAQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInAQuery.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=r;var l=s.getListByKey("Queries");if(e.notNull(l)){s=l.getStructureAt(l.size()-1)}var u=s.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(u)){s=u.getStructureAt(u.size()-1)}if(e.notNull(s)&&s.containsKey("Analytics")){s=s.getStructureByKey("Analytics");if(e.notNull(s)&&s.containsKey("Definition")){s=s.getStructureByKey("Definition")}}if(e.notNull(s)&&s.containsKey("Definition")){s=s.getStructureByKey("Definition")}if(e.notNull(s)){var p=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING&&t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);var g=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(g&&s.containsKey("ModellerDefinition")){s=s.getStructureByKey("ModellerDefinition");t.importModellerDimensions(s,o,o);t.importModellerCurrencyTranslation(s,o.getCurrencyTranslationManagerBase(),o);t.importModellerMetadataProperties(s,o,o);t.importFormulaExceptionManager(s,o.getFormulaExceptionManagerBase(),o);return o}t.importDimensions(s,o,o);if(!p){t.importFilter(s,o.getFilterBase(),o);t.importExceptions(s,o);t.importQueryCells(s,o.getQueryCellManager(),o);t.importUniversalDisplayHierarchies(s,o.getUniversalDisplayHierarchiesBase(),o)}t.importCurrencyTranslationManager(s,o.getCurrencyTranslationManager(),o);t.importSortingManager(s,o.getSortingManagerBase(),o);t.importDrillManager(s,o.getDrillManager(),o);t.importCellContextManager(s,o.getCellContextManager(),o);if(t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importVariableManager(s,o.getVariableManagerBase(),o)}t.importQuerySettings(s,o);t.importDataCells(s,o);t.importConditionManager(s,o.getConditionManagerBase(),o);if(g){t.importFormulaExceptionManager(s,o.getFormulaExceptionManagerBase(),o);this.importPaging(t,s,o);e.QInAOptions.importSuppressKeyfigureCalculation(s,o.getQueryManager());var c=o.getResultStructureController();t.importComponent(null,s,c,o,o);var m=o.getQueryManager();if(e.notNull(m)){m.setResultSetPersistanceTargetTable(r.getStringByKey("ResultSetPersistanceTable"));m.setResultSetPersistanceTargetSchema(r.getStringByKey("ResultSetPersistanceSchema"));m.setResultSetPersistenceIdentifier(r.getStringByKey("ResultSetPersistanceIdentifier"))}var y=s.getListByKey("PreQueries");if(e.notNull(y)){var d=null;var A=s.getStructureByKey("DataSource");if(e.notNull(A)){d=A.getStringByKey("System")}this.importPreQueries(t,o,y,d)}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA)&&o.isBlendingModel()){this.importBlendingSources(t,r,o)}}}return o};e.QInAQuery.prototype.importBlendingSources=function(t,r,n){var i=n.getBlendingSources();if(!e.XCollectionUtils.hasElements(i)){return}var a=e.PrUtils.getStructureProperty(r,"DataSource");var o=e.PrUtils.getListProperty(a,"Sources");if(e.PrUtils.isListEmpty(o)){return}for(var s=0;s<i.size();s++){var l=e.PrUtils.getStructureElement(o,s);var u=e.PrUtils.getStructureProperty(l,"DefiningContext");if(e.notNull(u)){var p=i.get(s).getQueryModel();p.deserializeFromElementExt(t.mode,u)}}};e.QInAQuery.prototype.importPaging=function(t,r,n){var i=r.getStructureByKey("SubSetDescription");var a=n.getQueryManager();var o=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(i)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||a.applyingStateOnQueryManager()&&!o){return}e.QInAOptions.importPaging(r,a)};e.QInAQuery.prototype.getInactiveCapabilities=function(t){var r=e.XHashMapByString.create();var n=e.FeatureToggleOlap.getAllFeatureToggles();var i=n.getKeysAsIteratorOfString();while(i.hasNext()){r.put(i.next(),e.XBooleanValue.create(false))}var a=t.getSession().getFeatureToggles();if(e.notNull(a)){var o=a.getKeysAsIteratorOfString();while(o.hasNext()){r.put(o.next(),e.XBooleanValue.create(true))}}return r};e.QInAQuery.prototype.importPreQueries=function(t,r,n,i){var a=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}var o=e.XStringBuffer.create();var s=this.getInactiveCapabilities(r);var l=n.size();for(var u=0;u<l;u++){var p=n.getStructureAt(u);var g=p.getStructureByKey("Runtime");if(e.isNull(g)){g=p}var c=g.getStructureByKey("DataSource");o.clear();o.append(c.getStringByKey("Type")).append(":[");o.append(c.getStringByKey("SchemaName"));o.append("][");o.append(c.getStringByKey("PackageName"));o.append("][");o.append(c.getStringByKey("ObjectName")).append("]");var m=e.XCommandFactory.create(r.getApplication());var y=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);y.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());y.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,s);var d=c.getStringByKey("System");if(t.mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(d,i)){d=r.getDataSource().getSystemName()}y.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,d);y.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,o.toString());var A=y.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(A);e.XObjectExt.release(y);if(A.isValid()){var I=A.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(p,I);var S=p.getStringByKey("ObjectName");var f=r.getPreQueryByName(S);if(e.isNull(f)){r.addPreQueryWithName(I,S)}}}t.mode=a};e.QInAQuery.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;t.exportUniversalDisplayHierarchies(a.getUniversalDisplayHierarchies(),n);var s=a.getDrillManager();t.exportDrillManager(s,n);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!s.isValidatingContextFreeNavigations()){n.putBoolean("ValidateContextFreeNavigations",false)}var l=a.getCellContextManager();t.exportCellContextManager(l,n);var u=e.XMath.binaryAnd(i,e.QImExFlag.DATASOURCE)>0;if(u){e.QInADataSource.exportDataSource(t,a.getDataSource(),a.getModelCapabilities().supportsRunAsUser(),n,false)}t.exportDimensions(a,n);t.exportSortingManager(a.getSortingManager(),n);t.exportCurrencyTranslationManager(a.getCurrencyTranslationManager(),n);if(!a.hasProcessingStep()||t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.exportDataCells(a,n)}t.exportQuerySettings(a,n);if(!o){t.exportFilter(a.getFilter(),n);t.exportExceptions(a,n);t.exportQueryCells(a.getQueryCellManager(),n)}t.exportConditionManager(a.getConditionManager(),n);var p=e.XMath.binaryAnd(i,e.QImExFlag.VARIABLES)>0;if(p&&t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(a.isExportingVariables()||a.hasProcessingStep()){t.exportVariables(a.getVariableContainer(),n)}}var g=a.getQueryManager();if(a.isBatchModeForMicroCube()){n.putString("Name",g.getNameForMicroCubeUse())}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){t.exportFormulaExceptionManager(a.getFormulaExceptionManager(),n);this.exportPaging(n,a);e.QInAOptions.exportSuppressKeyfigureCalculation(n,g);var c=a.getPreQueries();if(e.notNull(c)){var m=c.size();if(m>0){var y=n.getListByKey("PreQueries");if(e.isNull(y)){y=n.putNewList("PreQueries")}var d=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}for(var A=0;A<m;A++){var I=c.get(A);var S=t.exportPreQuery(I.getObject());var f=I.getName();S.putString("ObjectName",f);y.add(S)}t.mode=d;n.put("PreQueries",y)}}var v=a.getResultStructureController();t.exportComponent(null,v,n,i);var C=e.InactiveCapabilityUtil.exportFeatureToggles(g.getSession().getFeatureToggles());n.putString("ExperimentalFeatures",C);n.putString("ResultSetPersistanceTable",g.getResultSetPersistenceTable());n.putString("ResultSetPersistanceSchema",g.getResultSetPersistenceSchema());n.putString("ResultSetPersistanceIdentifier",g.getResultSetPersistenceIdentifier())}return n};e.QInAQuery.prototype.exportPaging=function(t,r){var n=r.getQueryManager();if(!r.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||n.recordingStateOfQueryManager()){return}if(n.getOffsetColumns()>0||n.getOffsetRows()>0||n.getMaxColumns()>-1||n.getMaxRows()>-1){e.QInAOptions.exportPaging(t,n)}};e.QInAQueryCellsAll=function(){};e.QInAQueryCellsAll.prototype=new e.QInAComponentWithList;e.QInAQueryCellsAll.prototype._ff_c="QInAQueryCellsAll";e.QInAQueryCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_CELLS};e.QInAQueryCellsAll.prototype.getTagName=function(){return"Cells"};e.QInAQueryCellsAll.prototype.importComponentWithList=function(e,t,r,n,i){return null};e.QInAQueryCellsAll.prototype.exportComponentWithList=function(t,r,n){if(!t.capabilities.supportsUniversalModel()){return null}var i=r;if(i.isEmpty()){return null}var a=e.PrFactory.createList();var o=i.getIterator();while(o.hasNext()){var s=o.next();var l=a.addNewStructure();l.putString("Name",s.getName());var u=l.putNewList("Position");var p=s.getPositions();var g=p.getIterator();while(g.hasNext()){var c=g.next();var m=u.addNewStructure();m.putString("DimensionName",c.getDimensionName());m.putString("MemberName",c.getMemberName())}}return a};e.QInAQuerySettings=function(){};e.QInAQuerySettings.prototype=new e.QInAComponentWithStructure;e.QInAQuerySettings.prototype._ff_c="QInAQuerySettings";e.QInAQuerySettings.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInAQuerySettings.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=e.PrUtils.getStringProperty(r,"Name");var s=a.getQueryModel();if(e.notNull(o)){s.setDefinitionName(o.getString())}var l=r.getStructureByKey("Query");t.importAxesSettings(l,s);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var u=e.PrUtils.getListProperty(l,"AxesLayout");var p=e.PrUtils.getListSize(u,0);for(var g=0;g<p;g++){var c=e.PrUtils.getStructureElement(u,g);var m=e.AxisType.lookup(e.PrUtils.getStringValueProperty(c,"Axis",null));var y=s.getAxis(m);if(e.isNull(y)){continue}var d=e.PrUtils.getListProperty(c,"OrderedDimensionNames");if(e.isNull(d)){continue}var A=e.XListOfString.create();for(var I=0;I<e.PrUtils.getListSize(d,0);I++){var S=e.PrUtils.getStringElement(d,I);if(e.isNull(S)){continue}A.add(S.getString())}y.reOrderDimensions(A)}}return s};e.QInAQuerySettings.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getDefinitionName();if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.putString("Name",o)}if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.isAbap(a)&&!this.requiresMDSZeroSuppression(t,a)){return n}var s=n.getStructureByKey("Query");if(e.isNull(s)){s=n.putNewStructure("Query")}t.exportAxesSettings(a,s);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var l=s.putNewList("AxesLayout");var u=e.AxisType.getAll();for(var p=0;p<u.size();p++){var g=u.get(p);var c=a.getAxis(g);if(e.isNull(c)){continue}var m=c.getOrderedDimensionNames();if(e.isNull(m)){continue}var y=l.addNewStructure();y.putString("Axis",c.getName());var d=y.putNewList("OrderedDimensionNames");d.addAllStrings(m)}}return n};e.QInAQuerySettings.prototype.requiresMDSZeroSuppression=function(t,r){if(!t.capabilities.supportsNullZeroSuppression()){return false}var n=r.getAxesManager();if(e.isNull(n)){return false}var i=n.getRowsAxis();var a=n.getColumnsAxis();return e.QInAAxesSettings.isDefinedZeroSuppression(i)||e.QInAAxesSettings.isDefinedZeroSuppression(a)};e.QInASort=function(){};e.QInASort.prototype=new e.QInAComponentWithList;e.QInASort.prototype._ff_c="QInASort";e.QInASort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInASort.prototype.getTagName=function(){return"Sort"};e.QInASort.prototype.importComponentWithList=function(t,r,n,i,a){var o=n;if(t.mode!==e.QModelFormat.INA_DATA_REINIT&&t.capabilities.supportsExtendedSort()){o.getSortingOperations().clear();if(e.notNull(r)){var s=o.getQueryModel();for(var l=0;l<r.size();l++){var u=r.getStructureAt(l);var p=u.getStringByKey("SortType");var g=e.QInAConverter.lookupSortType(p);var c;if(g===e.SortType.FIELD){c=this.importFieldSorting(o,s,u)}else if(g===e.SortType.MEASURE){c=this.importMeasureSorting(o,s,u)}else if(g===e.SortType.DATA_CELL_VALUE||g===e.SortType.COMPLEX){c=this.importPathSorting(a,o,s,u,g)}else{c=this.importDimensionSorting(o,s,u,g)}if(e.notNull(c)){this.importGenericSorting(s,u,c)}}}}return o};e.QInASort.prototype.importGenericSorting=function(t,r,n){var i=r.getStringByKey("Direction");if(e.notNull(i)){var a=e.QInAConverter.lookupSortDirection2(i);if(e.notNull(a)){n.setDirection(a)}}if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){n.setPreserveGrouping(r.getBooleanByKeyExt("PreserveGrouping",false))}if(t.getModelCapabilities().supportsLocaleSorting()){var o=r.getStructureByKey("Collator");if(e.notNull(o)){n.setIsCaseSensitive(o.getBooleanByKeyExt("CaseSensitive",false));n.setLocale(o.getStringByKeyExt("Locale",null))}}n.setCreatedFromMetadata(true)};e.QInASort.prototype.importPathSorting=function(t,r,n,i,a){var o=i.getListByKey("SortTuple");if(o.isEmpty()){return null}var s=e.XList.create();for(var l=0;l<o.size();l++){var u=o.getStructureAt(l);var p=u.getStringByKey("FieldName");var g=u.getStringByKey("Value");if(e.notNull(p)&&e.notNull(g)){var c=n.getFieldByName(p);if(e.isNull(c)){return null}var m=u.getStringByKey("Hierarchy");s.add(e.QSelectValue._createDimensionElement2(t,c,m,g))}else{return null}}if(a===e.SortType.DATA_CELL_VALUE){return r.getDataCellSorting(s,true)}return r.getComplexSorting(s,true)};e.QInASort.prototype.importDimensionSorting=function(t,r,n,i){var a=r.getDimensionByNameFromExistingMetadata(n.getStringByKey("Dimension"));if(e.isNull(a)||a.isUniversalDisplayHierarchyDimension()||!a.supportsSorting(null)){return null}var o=t.getDimensionSorting(a,true);if(i===e.SortType.FILTER){o.setSortByFilter()}else if(i===e.SortType.MEMBER_KEY){o.setSortByKey();this.importCustomSortDetails(o,n)}else if(i===e.SortType.MEMBER_TEXT){o.setSortByText()}else if(i===e.SortType.HIERARCHY){o.setSortByHierarchy()}return o};e.QInASort.prototype.importCustomSortDetails=function(t,r){var n=r.getListByKey("CustomSort");if(!e.PrUtils.isListEmpty(n)){var i=e.PrUtils.asListOfString(n);t.setCustomSort(i);var a=e.CustomSortPosition.lookup(r.getStringByKey("CustomSortPosition"));t.setCustomSortPosition(a)}};e.QInASort.prototype.importMeasureSorting=function(t,r,n){var i=n.getStringByKey("MeasureName");var a=null;if(e.notNull(i)){var o=r.getMeasureDimension();var s=o.getStructureMember(i);if(e.notNull(s)){a=t.getMeasureSorting(s,true)}var l=n.getStringByKey("StructureName");var u=r.getNonMeasureDimension();if(e.notNull(l)&&e.notNull(u)&&e.notNull(a)){a.setStructure(u.getStructureMember(l))}}return a};e.QInASort.prototype.importFieldSorting=function(t,r,n){var i=n.getStringByKey("FieldName");var a=null;if(e.notNull(i)){var o=r.getFieldByName(i);if(e.notNull(o)){a=t.getFieldSorting(o,true)}}return a};e.QInASort.prototype.exportComponentWithList=function(t,r,n){if(!t.capabilities.supportsExtendedSort()){return null}var i=e.PrFactory.createList();var a=r;var o=a.getSortingOperations().createListCopy();this.addRequiredSortOperationsForUdhDimensions(t,a,o);var s=o.size();for(var l=0;l<s;l++){var u=o.get(l);var p=null;var g=null;if(u.supportsDimension()){p=u.getDimension()}if(e.notNull(p)){var c=p.getAxisType();if(e.notNull(c)&&c!==e.AxisType.ROWS&&c!==e.AxisType.COLUMNS&&c!==e.AxisType.FREE){continue}if(c===e.AxisType.FREE){g=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim(t,p);if(e.isNull(g)||a.getDimensionSorting(g,false)===null){continue}}if(p.isUniversalDisplayHierarchyDimension()){continue}}var m=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&u.getModelCapabilities().supportsPersistedInA()&&u.isCreatedFromMetadata()&&u.getOlapComponentType()===e.OlapComponentType.DIMENSION_SORTING&&u.getModCounter()===0;if(m){continue}var y=u.getSortingType();if(y===e.SortType.FIELD){var d=u;var A=d.getField().getDimension();if(e.notNull(A)){var I=d.getQueryModel().getDimensionByName(A.getName());if(e.isNull(I)||e.QInAExportUtil.isFormulaCalculatedDimensionHidden(I)){continue}}}var S=e.PrFactory.createStructure();S.putString("SortType",e.QInAConverter.lookupSortTypeInA(y));var f=this.getSortDirection(u,a,g);if(f!==e.XSortDirection.DEFAULT_VALUE){S.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(f))}else if(y===e.SortType.MEASURE){continue}this.exportGenericSorting(u,S);if(y===e.SortType.FIELD){this.exportFieldSorting(u,S,t)}else if(y===e.SortType.MEASURE){this.exportMeasureSorting(u,S)}else if(y===e.SortType.DATA_CELL_VALUE||y===e.SortType.COMPLEX){this.exportPathSorting(u,S,t)}else if(y===e.SortType.HIERARCHY){if(!u.getDimension().isHierarchyAssignedAndActive()){S=null}}else if(y===e.SortType.MEMBER_KEY){var v=u;var C=this.dropIncorrectBasicMeasuresIfAny(v);this.exportCustomSortDetails(C,v.getCustomSortPosition(),S,v.getQueryModel(),t)}if(e.notNull(S)){e.QInAExportUtil.setNameIfNotNull(S,"Dimension",p);i.add(S)}}var N=t.mode;if(N.isTypeOf(e.QModelFormat.INA_DATA)||N===e.QModelFormat.INA_VALUE_HELP){i=e.QInAExportUtil.extendList(a,i)}if(t.getSession().hasFeature(e.FeatureToggleOlap.NO_EMPTY_SORT)&&i.isEmpty()){return null}return i};e.QInASort.prototype.addRequiredSortOperationsForUdhDimensions=function(t,r,n){var i=e.XListOfString.create();var a=e.XListOfString.create();for(var o=0;o<n.size();o++){var s=n.get(o);var l=s.supportsDimension()?s.getDimension():null;if(e.notNull(l)){i.add(l.getName());if(e.QInAUniversalDisplayHierarchies.isHierarchyConverted(t,l)){a.addAll(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,l.getAxis()))}}}for(var u=0;u<a.size();u++){var p=a.get(u);if(!i.contains(p)){n.add(r.newDimensionSorting(r.getQueryModel().getDimensionByName(p)))}}};e.QInASort.prototype.dropIncorrectBasicMeasuresIfAny=function(t){var r=t.getDimension();var n=t.getCustomSort();var i=null;if(e.notNull(n)){i=n.createListOfStringCopy();if(r.isMeasureStructure()){for(var a=0;a<i.size();){var o=i.get(a);var s=r.getAllStructureMembers().getByKey(o);if(e.isNull(s)){i.removeAt(a);continue}if(s.getMemberType()===e.MemberType.BASIC_MEASURE){var l=s;if(l.isNotFromMetadata()){i.removeAt(a);continue}}a++}}}return i};e.QInASort.prototype.getSortDirection=function(t,r,n){if(e.notNull(n)&&n!==t.getDimension()){var i=r.getDimensionSorting(n,false);if(e.notNull(i)){return i.getDirection()}}return t.getDirection()};e.QInASort.prototype.exportGenericSorting=function(t,r){if(t.supportsPreserveGrouping()&&t.supportsBreakGrouping()){r.putBoolean("PreserveGrouping",t.isPreserveGroupingEnabled())}if(t.getModelCapabilities().supportsLocaleSorting()){var n=e.PrFactory.createStructure();n.putBoolean("CaseSensitive",t.isCaseSensitive());var i=t.getLocale();if(e.XStringUtils.isNotNullAndNotEmpty(i)){n.putString("Locale",i)}if(n.hasElements()){r.put("Collator",n)}}};e.QInASort.prototype.exportPathSorting=function(t,r,n){var i=r.putNewList("SortTuple");var a=t.getElementPath();var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);var u=i.addNewStructure();u.putString("FieldName",l.getSelectField().getName());var p=e.QInAExportUtil.getMeasureMemberNameByAlias(t.getQueryModel(),l.getSelectValue(),n);u.putString("Value",p);var g=l.getSelectHierarchyName();if(e.XStringUtils.isNotNullAndNotEmpty(g)){u.putString("Hierarchy",g)}}};e.QInASort.prototype.exportMeasureSorting=function(t,r){var n=t;var i=n.getMeasure().getName();r.putString("MeasureName",i);var a=n.getStructure();e.QInAExportUtil.setNameIfNotNull(r,"StructureName",a)};e.QInASort.prototype.exportFieldSorting=function(e,t,r){var n=e;t.putString("FieldName",n.getField().getName());var i=n.getCustomSort();this.exportCustomSortDetails(i,n.getCustomSortPosition(),t,e.getQueryModel(),r);if(t.getListByKey("CustomSort")!==null){t.remove("Collator")}};e.QInASort.prototype.exportCustomSortDetails=function(t,r,n,i,a){if(e.XCollectionUtils.hasElements(t)){var o=n.putNewList("CustomSort");var s=t.size();for(var l=0;l<s;l++){var u=t.get(l);if(e.notNull(i)&&e.notNull(a)){u=e.QInAExportUtil.getMeasureMemberNameByAlias(i,u,a)}o.addString(u)}}e.QInAExportUtil.setNameIfNotNull(n,"CustomSortPosition",r)};e.QInATotals=function(){};e.QInATotals.prototype=new e.QInAComponentWithStructure;e.QInATotals.prototype._ff_c="QInATotals";e.QInATotals.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInATotals.prototype.importComponentWithStructure=function(t,r,n,i,a){if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var o=n;if(o.supportsResultVisibility()){var s=this.getResultStructure(r);var l=this.importResultAlignment(o,s);o.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false);var u=s.getListByKey("ResultStructure");if(e.notNull(u)){var p;if(o.supportsAdvancedResultStructure()&&l===e.ResultAlignment.STRUCTURE){p=o.getAdvancedResultStructure();p.clear();if(e.isNull(l)){o.setResultAlignmentBase(e.ResultAlignment.STRUCTURE,true)}}else{p=null}var g=u.size();for(var c=0;c<g;c++){var m=u.getStructureAt(c);this.importResultStructureItem(m,o,p)}}}}return null};e.QInATotals.prototype.importResultAlignment=function(t,r){if(t.supportsResultAlignment()){t.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false);var n=r.getStringByKey("ResultAlignment");if(e.XStringUtils.isNullOrEmpty(n)){return null}var i=e.QInAConverter.lookupAlignment(n);t.setResultAlignmentBase(i,false);return i}return null};e.QInATotals.prototype.getResultStructure=function(t){var r=t.getStructureByKey("ResultStructureBag");if(e.isNull(r)){r=t.getStructureByKey("DefaultResultStructure");if(e.isNull(r)){return t}}return r};e.QInATotals.prototype.importResultStructureItem=function(t,r,n){var i=t.getStringByKey("Result");var a;if(e.XString.isEqual(i,"Members")){a=e.ResultStructureElement.MEMBERS}else if(e.XString.isEqual(i,"Total")){a=e.ResultStructureElement.TOTAL}else if(e.XString.isEqual(i,"TotalIncludedMembers")){a=e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS}else if(e.XString.isEqual(i,"TotalRemainingMembers")){a=e.ResultStructureElement.TOTAL_REMAINING_MEMBERS}else{return}var o=t.getStringByKey("Visibility");var s=e.QInAConverter.lookupResultSetVisibility(o);if(e.isNull(n)){r.setResultVisibilityByElement(a,s)}else{n.addWithVisibility(a,s)}};e.QInATotals.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(a.supportsTotals()){var o;if(t.mode.containsMetadata()||t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){o=n.putNewStructure("ResultStructureBag")}else{o=n}this.exportAlignment(t,a,o);if(a.supportsResultVisibility()){if(!a.isTotalsVisibilityOnDefault()||a.getModelLevel()===e.QModelLevel.DIMENSIONS){var s=a.getTotalsStructure();if(e.XCollectionUtils.hasElements(s)){this.exportResultStructureItems(o,s,a)}}}}return n};e.QInATotals.prototype.exportAlignment=function(t,r,n){if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)&&!t.isAbap(r.getQueryModel())){return}if(r.supportsResultAlignment()){if(!r.isTotalsAlignmentOnDefault()){var i=r.getResultAlignment();if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){if(i===e.ResultAlignment.STRUCTURE){i=null}}if(e.notNull(i)){n.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(i))}}}};e.QInATotals.prototype.exportResultStructureItems=function(t,r,n){var i=t.putNewList("ResultStructure");var a=r.size();for(var o=0;o<a;o++){var s=r.get(o);var l=s.getResultVisibility();if(!this.isResultVisible(n,l)){continue}var u=s.getResultStructureElement();if(u===e.ResultStructureElement.MEMBERS){this.exportResultStructureElement(i,l,"Members")}else if(u===e.ResultStructureElement.TOTAL){this.exportResultStructureElement(i,l,"Total")}else if(u===e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){if(this.supportsConditionalResult(n,u)){this.exportResultStructureElement(i,l,"TotalIncludedMembers")}}else if(u===e.ResultStructureElement.TOTAL_REMAINING_MEMBERS){if(this.supportsConditionalResult(n,u)){this.exportResultStructureElement(i,l,"TotalRemainingMembers")}}}};e.QInATotals.prototype.isResultVisible=function(t,r){return r===e.ResultVisibility.VISIBLE||r===e.ResultVisibility.ALWAYS||r===e.ResultVisibility.CONDITIONAL&&t.getModelCapabilities().supportsConditionalResultVisibility()};e.QInATotals.prototype.supportsConditionalResult=function(e,t){var r=e.getModelCapabilities();return r.supportsConditionalResults()&&r.getSupportedConditionalResults().contains(t)};e.QInATotals.prototype.exportResultStructureElement=function(t,r,n){var i=t.addNewStructure();i.putString("Result",n);i.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(r))};e.QInATranslationsManager=function(){};e.QInATranslationsManager.prototype=new e.QInAComponentWithStructure;e.QInATranslationsManager.prototype._ff_c="QInATranslationsManager";e.QInATranslationsManager.prototype.getComponentType=function(){return e.OlapComponentType.MEASURE_TRANSLATIONS};e.QInATranslationsManager.prototype.getTagName=function(){return"Translations"};e.QInATranslationsManager.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.notNull(r)&&r.containsKey("CurrencyTranslations")){var s=r.getListByKey("CurrencyTranslations");if(e.notNull(s)){if(e.notNull(o)&&e.XCollectionUtils.hasElements(s)){var l=s.size();for(var u=0;u<l;u++){var p=s.getStructureAt(u);var g=p.getStringByKey("Name");var c=p.getStringByKey("Description");var m=o.addNewMeasureCurrencyTranslationBase(g,c);t.importCurrencyTranslationElement(p,m,a)}}}}return o};e.QInATranslationsManager.prototype.exportComponentWithStructure=function(e,t,r,n){return r};e.QInAUniversalDisplayHierarchies=function(){};e.QInAUniversalDisplayHierarchies.prototype=new e.QInAComponentWithStructure;e.QInAUniversalDisplayHierarchies.prototype._ff_c="QInAUniversalDisplayHierarchies";e.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired=function(t,r){return e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,r.getQueryManager())&&e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r)!==null};e.QInAUniversalDisplayHierarchies.isHierarchyConverted=function(t,r){return e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,r.getQueryManager())&&r===e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r.getAxis())};e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive=function(t,r){return(t.mode===e.QModelFormat.INA_DATA||t.mode===e.QModelFormat.INA_PERSISTED_QUERY_DATA)&&r.isHierarchyToUDHConversionEnabledForCurrentRs()&&e.XCollectionUtils.hasElements(r.getQueryModel().getUniversalDisplayHierarchies().getHierarchies())};e.QInAUniversalDisplayHierarchies.getDimensionNames=function(t,r){if(e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,r.getQueryManager())){var n=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r);if(e.notNull(n)){var i=n.getLeveledHierarchy(n.getHierarchyName());var a=i.getAllLevel().size();var o=e.XListOfString.create();for(var s=0;s<a;s++){o.add(i.getLevel(s).getLevelDimensionName())}return o}}return r.getDimensionNames()};e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim=function(t,r){if(e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,r.getQueryManager())){var n=r.getName();var i=r.getQueryModel().getRowsAxis();if(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,i).contains(n)){return e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(i)}var a=r.getQueryModel().getColumnsAxis();if(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,a).contains(n)){return e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a)}}return null};e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy=function(t){if(e.isNull(t)||t.getType()!==e.AxisType.ROWS&&t.getType()!==e.AxisType.COLUMNS){return null}var r=t.getDimensionCount();for(var n=0;n<r;n++){var i=t.get(n);if(i.isHierarchyActive()&&i.getLeveledHierarchy(i.getHierarchyName())!==null){return i}}return null};e.QInAUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInAUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.notNull(r)){var s=r.getByKey("UniversalDisplayHierarchies");if(e.notNull(s)&&s.isList()){var l=s;var u=l.size();for(var p=0;p<u;p++){e.QInAMdUniversalDisplayHierarchies.importHierarchy(o,l.getStructureAt(p))}}}e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(o);return o};e.QInAUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(e.notNull(a)){a.updateIncludedDimensions();var o=a.getChildrenIterator();if(o.hasNext()){var s=n.putNewList("UniversalDisplayHierarchies");while(o.hasNext()){this.exportHierarchy(t,s,o.next())}}}return n};e.QInAUniversalDisplayHierarchies.prototype.exportHierarchy=function(t,r,n){var i=true;var a=n.getHierarchyDedicatedAxis();var o=e.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(t,a.getQueryManager())?e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a):null;if(e.notNull(o)){var s=r.addNewStructure();s.putString("Name",n.getName());var l=n.getQueryModel().getModelCapabilities().supportsUniversalDisplayHierarchiesZeroBased();s.putInteger("InitialDrillLevel",l?o.getInitialDrillLevel():o.getInitialDrillLevel()+1);s.putString("LowerLevelNodeAlignment",o.getLowerLevelNodeAlignment().getName());s.putBoolean("Active",true);s.putNewList("DimensionNames").addAllStrings(e.QInAUniversalDisplayHierarchies.getDimensionNames(t,a));s.putString("LevelHierarchyName",o.getHierarchyName());if(t.getMode().isTypeOf(e.QModelFormat.INA_PERSISTED_QUERY_DATA)){s.putString("LevelDimensionName",o.getName())}return}else if(n.isActive()&&!n.isDimensionListValid()){i=false;t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("Dimensions for UDH '",n.getName(),"' must be placed next to each other on the axis"))}var u=r.addNewStructure();u.putString("Name",n.getName());u.putInteger("InitialDrillLevel",n.getInitialDrillLevel());u.putString("LowerLevelNodeAlignment",n.getAlignment().getName());u.putBoolean("Active",n.isActive()&&i);u.putNewList("DimensionNames").addAllStrings(n.getDimensionNames());if(n.hasCustomDimensions()){u.putBoolean("CustomDimensions",true)}};e.QInAVarDimMember=function(){};e.QInAVarDimMember.prototype=new e.QInAComponentWithStructure;e.QInAVarDimMember.prototype._ff_c="QInAVarDimMember";e.QInAVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInAVarDimMember.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=r.getStructureByKey("Values");if(e.notNull(s)){var l=e.QFactory.createFilterExpression(o,o);var u=t.importFilterExpression(l,s,o,o);o.setFilter(u)}else if(o.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE&&o.hasMemberFilter()&&o.getDimension().getKeyField()!==o.getMemberFilter().getField()){o.setDimension(o.getDimension())}return o};e.QInAVarDimMember.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getName();n.putString("Name",o);var s=null;var l=a.getExternalMemberFilter();if(e.XCollectionUtils.hasElements(l)){s=l}else if(a.hasMemberFilter()){var u=a.getMemberFilter();if(e.XCollectionUtils.hasElements(u)){s=u}}if(e.notNull(s)){var p=n.putNewStructure("Values");var g=p.putNewStructure("Selection");t.exportCartesianList(s,g)}else if(!a.isMandatory()){n.putNewStructure("Values")}return n};e.QInAVarDimMember.prototype.extendCustom=function(t,r,n){var i=r;if(e.isNull(n)||i.supportsValueHelp()){return n}if(i.getMemberFilter()!==null&&i.getMemberFilter().getField().isKeyField()){return n}var a=n.getStructureByKey("Values");if(e.isNull(a)){return n}var o=a.getStructureByKey("Selection");if(e.isNull(o)){return n}var s=o.getStructureByKey("SetOperand");if(e.isNull(s)){return n}var l=s.getListByKey("Elements");if(e.PrUtils.isListEmpty(l)){return n}var u=l.size();for(var p=0;p<u;p++){var g=l.get(p);if(g.hasStringByKey("Low")){g.putString("LowIs","ManualInput")}if(g.hasStringByKey("High")){g.putString("HighIs","ManualInput")}if(g.hasStringByKey("Value3")){g.putString("Value3Is","ManualInput")}}return n};e.QInAVarOptionList=function(){};e.QInAVarOptionList.prototype=new e.QInAComponentWithStructure;e.QInAVarOptionList.prototype._ff_c="QInAVarOptionList";e.QInAVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInAVarOptionList.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=r.getListByKey("OptionValues");if(e.notNull(s)){var l;if(o.supportsMultipleValues()){o.clear();var u=s.size();for(var p=0;p<u;p++){l=s.getStringAt(p);o.addString(l)}}else if(s.size()===1){l=s.getStringAt(0);o.setString(l)}}return o};e.QInAVarOptionList.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("Name",a.getName());var o=n.putNewList("OptionValues");if(a.supportsMultipleValues()){var s=a.getValues();var l=s.size();for(var u=0;u<l;u++){var p=s.get(u);o.addString(p.getString())}}else{var g=a.getCurrentOption();if(e.notNull(g)){o.addString(g.getName())}}return n};e.QInAVarSimpleType=function(){};e.QInAVarSimpleType.prototype=new e.QInAComponentWithStructure;e.QInAVarSimpleType.prototype._ff_c="QInAVarSimpleType";e.QInAVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInAVarSimpleType.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=r.getListByKey("SimpleNumericValues");if(e.isNull(s)){s=r.getListByKey("SimpleStringValues")}var l=o.getValueType();var u=e.QInAValueUtils.importValueList(t,s,l);if(o.supportsMultipleValues()||u.size()<=1){o.setValues(u)}return null};e.QInAVarSimpleType.prototype.addIntegerValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XInteger.convertToString(n))}else{r.addInteger(n)}};e.QInAVarSimpleType.prototype.addLongValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XLong.convertToString(n))}else{r.addLong(n)}};e.QInAVarSimpleType.prototype.addDoubleValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XDouble.convertToString(n))}else{r.addDouble(n)}};e.QInAVarSimpleType.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("Name",a.getName());var o=a.getValueType();var s;if(o===e.XValueType.STRING||o===e.XValueType.DATE||o===e.XValueType.TIME||o===e.XValueType.DATE_TIME||o===e.XValueType.BOOLEAN||o.isSpatial()){s=n.putNewList("SimpleStringValues")}else if(o===e.XValueType.DOUBLE||o===e.XValueType.DECIMAL_FLOAT||o===e.XValueType.LONG||o===e.XValueType.INTEGER){s=n.putNewList("SimpleNumericValues")}else{t.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate3("SimpleTypeVariable '",a.getName(),"' not exported"));return null}if(a.supportsMultipleValues()){this.exportMultipleValues(t,a,o,s)}else{this.exportSingleValue(t,a,o,s)}return n};e.QInAVarSimpleType.prototype.exportSingleValue=function(t,r,n,i){if(t.getOriginalMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&r.getTagging().containsKey("PersistedQueryPlaceholder")){i.addString(r.getTagging().getByKey("PersistedQueryPlaceholder"));return}var a=!r.hasValue()&&(t.getMode()===e.QModelFormat.INA_REPOSITORY||r.getQueryModel().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA));if(n===e.XValueType.INTEGER){if(a){i.addNull()}else{this.addIntegerValue(t,i,r.getInteger())}}else if(n===e.XValueType.LONG){if(a){i.addNull()}else{this.addLongValue(t,i,r.getLong())}}else if(n===e.XValueType.BOOLEAN){if(a){i.addNull()}else{i.addBoolean(r.getBoolean())}}else if(n===e.XValueType.DOUBLE||n===e.XValueType.DECIMAL_FLOAT){if(a){i.addNull()}else{this.addDoubleValue(t,i,r.getDouble())}}else{if(!r.hasValue()){if(t.getMode()!==e.QModelFormat.INA_REPOSITORY){i.addString("")}}else if(n===e.XValueType.STRING||n.isSpatial()){i.addString(r.getString())}else if(n===e.XValueType.DATE){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getDate()))}else if(n===e.XValueType.TIME){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getTime()))}else if(n===e.XValueType.DATE_TIME){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getDateTime()))}}};e.QInAVarSimpleType.prototype.exportMultipleValues=function(t,r,n,i){var a=r.getValues();var o=a.size();for(var s=0;s<o;s++){if(n===e.XValueType.INTEGER){var l=a.get(s);this.addIntegerValue(t,i,l.getInteger())}else if(n===e.XValueType.LONG){var u=a.get(s);this.addLongValue(t,i,u.getLong())}else if(n===e.XValueType.DOUBLE){var p=a.get(s);this.addDoubleValue(t,i,p.getDouble())}else if(n===e.XValueType.DECIMAL_FLOAT){var g=a.get(s);this.addDoubleValue(t,i,g.getDouble())}else if(n===e.XValueType.STRING){var c=a.get(s);i.addString(c.getString())}else if(n===e.XValueType.DATE||n===e.XValueType.TIME||n===e.XValueType.DATE_TIME){var m=a.get(s);i.addString(e.QInAExportUtil.dateTimeToString(t,m))}else if(n===e.XValueType.BOOLEAN){var y=a.get(s);i.addString(e.XBoolean.convertToString(y.getBoolean()))}else if(n.isSpatial()){var d=a.get(s);i.addString(d.toWKT())}}};e.QInAVariableContainer=function(){};e.QInAVariableContainer.prototype=new e.QInAComponentWithList;e.QInAVariableContainer.prototype._ff_c="QInAVariableContainer";e.QInAVariableContainer.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInAVariableContainer.prototype.getTagName=function(){return"Variables"};e.QInAVariableContainer.prototype.importComponentWithList=function(e,t,r,n,i){var a=r;e.importVariableList(t,a);return r};e.QInAVariableContainer.prototype.exportComponentWithList=function(t,r,n){var i=r;var a=i.getQueryModel();if(e.notNull(a)&&!a.isExportingVariables()&&!a.hasProcessingStep()){return null}var o=i.getVariables();if(e.XCollectionUtils.hasElements(o)){return t.exportVariableList(i)}return null};e.QInAVariablesList=function(){};e.QInAVariablesList.prototype=new e.QInAComponentWithList;e.QInAVariablesList.prototype._ff_c="QInAVariablesList";e.QInAVariablesList.applyLegacyCurrencyTranslation=function(t,r,n,i,a){var o=e.XStringUtils.concatenate3(i,".","Currency");var s=r.getVariable(o);var l=e.QInACurrencyTranslationItem.resolveTargetCurrency(a);var u=e.isNull(l)?null:l.getFixedValue();if(e.notNull(s)&&e.notNull(u)&&e.XValueUtil.getString(u)!==null){t.put(o,u);var p=0;if(a.getDateOffsetGranularity()!==null){p=a.getDateOffsetGranularity().getMonthFactor()}o=e.XStringUtils.concatenate3(i,".","MonthDelta");s=r.getVariable(o);var g=a.getDateOffset()*p;if(e.notNull(s)){t.put(o,e.XIntegerValue.create(g))}if(a.isReferenceDateFixed()){o=e.XStringUtils.concatenate3(i,".","Date");s=r.getVariable(o);if(e.notNull(s)){t.put(o,a.getFixedReferenceDate())}}else{o=e.XStringUtils.concatenate3(i,".","Date");s=r.getVariable(o);if(e.notNull(s)){if(g===0){t.put(o,e.XStringValue.create("0000-00-00"))}else{t.put(o,e.XStringValue.create("1111-11-11"))}}}var c=a.getFixedRateType();var m=a.getFixedCategory();o=e.XStringUtils.concatenate3(i,".","RateType");s=r.getVariable(o);if(e.notNull(s)){t.put(o,e.XStringValue.create(e.QInAVariablesList.resolveRateTypeVariableValue(c)))}o=e.XStringUtils.concatenate3(i,".","RateVersion");s=r.getVariable(o);if(e.notNull(s)){var y=a.getFixedRateVersion();t.put(o,e.XStringValue.create(e.isNull(y)?"":y))}o=e.XStringUtils.concatenate3(i,".","Category");s=r.getVariable(o);if(e.notNull(s)){t.put(o,e.XStringValue.create(e.QInAVariablesList.resolveCategoryVariableValue(m)))}}};e.QInAVariablesList.resolveRateTypeVariableValue=function(t){var r;if(e.CtRateType.isDefined(t)){r=e.QInAConverter.lookupRateTypeInA(t)}else{r="@@DYNAMIC@@"}return r};e.QInAVariablesList.resolveCategoryVariableValue=function(t){var r;if(e.CtCategory.isDefined(t)){r=e.QInAConverter.lookupCategoryInA(t)}else{r=""}return r};e.QInAVariablesList.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_LIST};e.QInAVariablesList.prototype.importComponentWithList=function(t,r,n,i,a){var o=n;if(e.notNull(r)){var s=r.size();for(var l=0;l<s;l++){var u=r.getStructureAt(l);var p=u.getStringByKey("Name");var g=o.getVariableBaseByName(p);if(e.notNull(g)){var c=g.getVariableType();if(c.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(u,g,a)}else if(c.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(u,g,a)}else if(c.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(u,g,a)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",p,"' of variable type '",c.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",p,"' was not found"))}}}return n};e.QInAVariablesList.prototype.exportComponentWithList=function(t,r,n){var i=r;var a=i.getVariables();if(e.isNull(a)||a.isEmpty()){return null}var o=e.PrFactory.createList();var s=a.size();var l=t.mode;var u=null;if(l.isTypeOf(e.QModelFormat.INA_DATA)){u=this.remapCurrencyVariables(i)}for(var p=0;p<s;p++){var g=a.get(p);var c=null;if(!g.isCustomVariable()){if(l===e.QModelFormat.INA_METADATA){t.exportVariable(g,null)}else if(l.isTypeOf(e.QModelFormat.INA_DATA)||l===e.QModelFormat.INA_VALUE_HELP){var m=g.getExternalRepresentation();if(e.notNull(m)&&g.getOlapComponentType()===m.getOlapComponentType()&&e.XString.isEqual(m.getName(),g.getName())){g=m}if(g.isInputEnabled()){if(e.notNull(u)&&u.containsKey(g.getName())){c=e.PrFactory.createStructure();c.putString("Name",g.getName());var y=u.getByKey(g.getName());var d;if(y.getValueType().isNumber()){d=c.putNewList("SimpleNumericValues");d.addInteger(e.XValueUtil.getInteger(y,false,true))}else{d=c.putNewList("SimpleStringValues");d.addString(e.XValueUtil.getString(y))}}else{var A=g.getQueryManager();var I=e.notNull(A)?A.getVariableProcessor():null;var S=e.notNull(A)&&(A.getConvenienceCommands().isHana()&&A.getSession().hasFeature(e.FeatureToggleOlap.MDS_PERSISTED_INA)||A.getModelCapabilities().supportsPersistedInA());var f=t.getMode()===e.QModelFormat.INA_PERSISTED_QUERY_DATA&&g.isDynamicOrExitVariable()&&S&&e.notNull(I)&&!I.isUsingSavedPromptsForExitVariables();if(!f){c=t.exportVariable(g,c)}}}}else{c=e.PrFactory.createStructure();c.putString("Name",g.getName());t.exportVariable(g,c)}if(e.notNull(c)){o.add(c)}}}return o};e.QInAVariablesList.prototype.remapCurrencyVariables=function(t){var r;var n=e.XHashMapByString.create();var i=t.getQueryModel();if(e.notNull(i)){var a=i.getCurrencyTranslationManager();if(e.notNull(a)){if(a.isLegacyMeasureCurrencyTranslationAccountModel()){var o=a.getDefaultMeasureCurrencyTranslation();var s=false;if(e.notNull(o)){e.QInAVariablesList.applyLegacyCurrencyTranslation(n,i,t,"SignedData",o);var l=a.getQuery2MeasureCurrencyTranslationBridge();s=l.isApplyToDefaultCurrencyTranslation()}if(i.getMeasureDimension()!==null){var u=i.getMeasureDimension().getLoadedStructureMembers();var p=e.isNull(u)?0:u.size();for(r=0;r<p;r++){var g=u.get(r);if(g.getOlapComponentType()===e.MemberType.CURRENCY_MEASURE){var c=g;var m=c.getBaseMeasureName();if(e.isNull(m)&&a.isLegacyMeasureCurrencyTranslationAccountModel()){m=a.getCurrencyTranslationCrossCalculation(c.getAliasName())}if(c.getLocalCurrencyTranslation()!==null&&e.notNull(m)){if(e.notNull(o)&&a.isLegacyMeasureCurrencyTranslationAccountModel()&&s&&c.isDefaultCurrency()){e.QInAVariablesList.applyLegacyCurrencyTranslation(n,i,t,m,o)}else{e.QInAVariablesList.applyLegacyCurrencyTranslation(n,i,t,m,c.getLocalCurrencyTranslation())}}}}}}}}return n};e.QInAHierarchyValueHelp=function(){};e.QInAHierarchyValueHelp.prototype=new e.QInAComponentWithStructure;e.QInAHierarchyValueHelp.prototype._ff_c="QInAHierarchyValueHelp";e.QInAHierarchyValueHelp.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInAHierarchyValueHelp.prototype.getTagName=function(){return"Hierarchy"};e.QInAHierarchyValueHelp.prototype.getModelFormat=function(){return e.QModelFormat.INA_VALUE_HELP};e.QInAHierarchyValueHelp.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getSelectorHierarchyName();if(e.XStringUtils.isNullOrEmpty(o)){o=a.getHierarchyName()}if(a.isSelectorHierarchyActive()&&e.XStringUtils.isNotNullAndNotEmpty(o)){var s=e.PrFactory.createStructure();var l=a.getHierarchyVersion();if(e.XStringUtils.isNotNullAndNotEmpty(l)){s.putString("Version",l)}e.QInAExportUtil.setDate(t,s,"DueDate",a.getHierarchyDueDate());s.putString("Name",o);s.putInteger("InitialDrillLevel",a.isSelectorUseQueryDrillOperations()&&a.hasZoomDrill()?0:a.getSelectorRootLevel());var u=a.getMemberOfPostedNodeVisibility();var p=e.QInAConverter.lookupResultSetVisibilityInA(u);s.putString("MemberOfPostedNodeVisibility",p);var g=a.getHierarchy();if(e.notNull(g)&&g.isCustomHierarchy()){s.putBoolean("IsTransient",true);s.putStringNotNull("Description",g.getHierarchyDescription())}return s}return null};e.QInAHierarchyValueHelp.prototype.importComponentWithStructure=e.noSupport;e.MeasureValueHelpRsDimension=function(){};e.MeasureValueHelpRsDimension.prototype=new e.XObject;e.MeasureValueHelpRsDimension.prototype._ff_c="MeasureValueHelpRsDimension";e.MeasureValueHelpRsDimension.create=function(t){var r=new e.MeasureValueHelpRsDimension;r.m_dimension=t;return r};e.MeasureValueHelpRsDimension.prototype.m_dimension=null;e.MeasureValueHelpRsDimension.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_dimension=null};e.MeasureValueHelpRsDimension.prototype.cloneExt=function(t){return e.MeasureValueHelpRsDimension.create(this.m_dimension)};e.MeasureValueHelpRsDimension.prototype.getDimensionType=function(){return this.m_dimension.getDimensionType()};e.MeasureValueHelpRsDimension.prototype.isHierarchyActive=function(){return this.m_dimension.isHierarchyActive()};e.MeasureValueHelpRsDimension.prototype.isClustered=function(){try{return this.m_dimension.isClustered()}catch(e){return false}};e.MeasureValueHelpRsDimension.prototype.setName=function(e){};e.MeasureValueHelpRsDimension.prototype.getName=function(){return this.m_dimension.getName()};e.MeasureValueHelpRsDimension.prototype.getText=function(){return this.m_dimension.getText()};e.MeasureValueHelpRsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_dimension.getLowerLevelNodeAlignment()};e.MeasureValueHelpRsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_dimension.hasDefaultLowerLevelNodeAlignment()};e.MeasureValueHelpRsDimension.prototype.getHierarchyName=function(){return this.m_dimension.getHierarchyName()};e.MeasureValueHelpRsDimension.prototype.getFields=function(){return this.m_dimension.getFields()};e.XCmdDeserializeBlendingNodesResult=function(){};e.XCmdDeserializeBlendingNodesResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingNodesResult.prototype._ff_c="XCmdDeserializeBlendingNodesResult";e.XCmdDeserializeBlendingNodesResult.CLAZZ=null;e.XCmdDeserializeBlendingNodesResult.staticSetup=function(){e.XCmdDeserializeBlendingNodesResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingNodesResult)};e.XCmdDeserializeBlendingNodesResult.createBlendingDefinition=function(t,r,n){var i=e.QFactory.createBlendingDefinition();var a=t.size();for(var o=0;o<a;o++){i.addNewSource(t.get(o).getQueryModel(),r.get(o))}for(var s=0;s<n.size();s++){var l=n.getStructureAt(s);var u=l.getStringByKey("LinkType");var p=l.getStringByKey("DimensionName");var g=i.addNewDimensionMapping(e.BlendingLinkType.lookup(u),p);var c=l.getListByKey("Mapping");if(l.getBooleanByKeyExt("PreserveMembers",false)){g.setIsPreservingMembers(true)}if(!l.getBooleanByKeyExt("ReturnOriginKeys",true)){g.setIsReturningOriginKeys(false)}for(var m=0;m<c.size();m++){var y=c.getStructureAt(m);var d=y.getStringByKey("AliasName");var A=e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition(y);if(e.isNull(A)){var I=e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition(y);g.addNewConstantMapping(I,d)}else{g.addNewDimensionMappingDefinitionByName(A,d)}}var S=l.getListByKey("AttributeMappings");if(e.notNull(S)){for(var f=0;f<S.size();f++){var v=S.getStructureAt(f);var C=v.getStringByKey("AttributeName");var N=v.getBooleanByKey("IsLinkKey");var E=g.addNewAttributeMappingByName(C,N);var M=v.getListByKey("Mapping");for(var h=0;h<M.size();h++){var D=M.getStructureAt(h);var T=e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition(D);var Q=D.getStringByKey("AliasName");if(e.isNull(T)){var R=e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition(D);g.addNewConstantMapping(R,Q)}else{E.addAttributeMappingDefinition(e.BlendingMappingDefinition.createAttributeMapping(T,Q))}}}}}return i};e.XCmdDeserializeBlendingNodesResult.getNameFromMappingDefinition=function(e){var t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Member")){var r=t.getStructureByKey("Member");return r.getStringByKey("Name")}return null};e.XCmdDeserializeBlendingNodesResult.getNameFromConstantMappingDefinition=function(e){var t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Constant")){var r=t.getStructureByKey("Constant");return r.getStringByKey("Value")}return null};e.XCmdDeserializeBlendingNodesResult.prototype.importSourceQueryModel=function(t,r,n,i){this.m_queryManagers.add(null);var a=r.getStructureByKey("DefiningContext");var o=a.getStructureByKey("Definition");var s=o.getStructureByKey("DataSource");var l=e.XCommandFactory.create(t);var u;var p=this.getParameterStrict(e.CmdDeserializeBlendingNodes.PARAM_I_LEAF_QUERY_MODELS);if(s.containsKey("Mappings")){u=l.createCommand(e.CmdDeserializeBlendingNodes.CMD_NAME);u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlendingNodes.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlendingNodes.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,o.toString());u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_LEAF_QUERY_MODELS,p)}else{var g=p.getByKey(n);var c=g.serializeToString(e.QModelFormat.INA_REPOSITORY);var m=e.JsonParserFactory.newInstance();o=m.parse(c);u=l.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,o);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(n));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,this.getDataSourceName(s));u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingNodes.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}u.processCommand(this.getSyncType(),this,i)};e.XCmdDeserializeBlendingNodesResult.prototype.onQueryManagerImported=function(t,r){var n=t.getResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER);if(e.notNull(n)){this.m_queryManagers.set(r,n)}else{var i=t.getResultParameter(e.CmdDeserializeBlendingNodes.PARAM_E_QUERY_MANAGER);this.m_queryManagers.set(r,i)}};e.XCmdDeserializeBlendingNodesResult.prototype.onAllQueryManagersImported=function(){var t=this.m_rootElement.getStructureByKey("DataSource").getListByKey("Mappings");var r=e.XCmdDeserializeBlendingNodesResult.createBlendingDefinition(this.m_queryManagers,this.m_aliases,t);var n=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);var i=e.QueryServiceConfig.createWithBlendingDefinition(n,r);var a=this.m_rootElement.getStringByKeyExt("ExperimentalFeatures",null);var o=this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(i,a,o);i.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeBlendingNodesResult.prototype.onQueryManagerCreated=function(t,r,n){this.getMessageManager().addAllMessages(t);if(t.isValid()){var i=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var a=r.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,i);this.getMessageManager().addAllMessages(a);this.addResultParameter(e.CmdDeserializeBlendingNodes.PARAM_E_QUERY_MANAGER,r)}this.onProcessFinished()};e.XCmdDeserializeBlendingResult=function(){};e.XCmdDeserializeBlendingResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingResult.prototype._ff_c="XCmdDeserializeBlendingResult";e.XCmdDeserializeBlendingResult.CLAZZ=null;e.XCmdDeserializeBlendingResult.staticSetup=function(){e.XCmdDeserializeBlendingResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingResult)};e.XCmdDeserializeBlendingResult.createBlendingDefinition=function(t,r,n){var i=e.QFactory.createBlendingDefinition();var a=t.size();for(var o=0;o<a;o++){i.addNewSource(t.get(o).getQueryModel(),r.get(o))}for(var s=0;s<n.size();s++){var l=n.getStructureAt(s);var u=l.getStringByKey("LinkType");var p=l.getStringByKey("DimensionName");var g=i.addNewDimensionMapping(e.BlendingLinkType.lookup(u),p);var c=l.getListByKey("Mapping");if(l.getBooleanByKeyExt("PreserveMembers",false)){g.setIsPreservingMembers(true)}if(!l.getBooleanByKeyExt("ReturnOriginKeys",true)){g.setIsReturningOriginKeys(false)}for(var m=0;m<c.size();m++){var y=c.getStructureAt(m);var d=y.getStringByKey("AliasName");var A=e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(y);if(e.isNull(A)){var I=e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(y);g.addNewConstantMapping(I,d)}else{g.addNewDimensionMappingDefinitionByName(A,d)}}var S=l.getListByKey("AttributeMappings");if(e.notNull(S)){for(var f=0;f<S.size();f++){var v=S.getStructureAt(f);var C=v.getStringByKey("AttributeName");var N=v.getBooleanByKey("IsLinkKey");var E=g.addNewAttributeMappingByName(C,N);var M=v.getListByKey("Mapping");for(var h=0;h<M.size();h++){var D=M.getStructureAt(h);var T=e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(D);var Q=D.getStringByKey("AliasName");if(e.isNull(T)){var R=e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(D);g.addNewConstantMapping(R,Q)}else{E.addAttributeMappingDefinition(e.BlendingMappingDefinition.createAttributeMapping(T,Q))}}}}}return i};e.XCmdDeserializeBlendingResult.getNameFromMappingDefinition=function(e){var t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Member")){var r=t.getStructureByKey("Member");return r.getStringByKey("Name")}return null};e.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition=function(e){var t=e.getStructureByKey("MappingDefinition");if(t.containsKey("Constant")){var r=t.getStructureByKey("Constant");return r.getStringByKey("Value")}return null};e.XCmdDeserializeBlendingResult.prototype.importSourceQueryModel=function(t,r,n,i){this.m_queryManagers.add(null);var a=r.getStructureByKey("DefiningContext");var o=a.getStructureByKey("Definition");var s=o.getStructureByKey("DataSource");var l=e.XCommandFactory.create(t);var u;if(s.containsKey("Mappings")){u=l.createCommand(e.CmdDeserializeBlending.CMD_NAME);u.addParameter(e.CmdDeserializeBlending.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlending.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlending.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,o.toString());u.addParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}else{u=l.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,o);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(n));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,this.getDataSourceName(s));u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO))}u.processCommand(this.getSyncType(),this,i)};e.XCmdDeserializeBlendingResult.prototype.onQueryManagerImported=function(t,r){this.m_queryManagers.set(r,t.getResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER))};e.XCmdDeserializeBlendingResult.prototype.onAllQueryManagersImported=function(){var t=this.m_rootElement.getStructureByKey("DataSource").getListByKey("Mappings");var r=e.XCmdDeserializeBlendingResult.createBlendingDefinition(this.m_queryManagers,this.m_aliases,t);var n=this.getParameterStrict(e.CmdDeserializeBlending.PARAM_I_APPLICATION);var i=e.QueryServiceConfig.createWithBlendingDefinition(n,r);var a=this.m_rootElement.getStringByKeyExt("ExperimentalFeatures",null);var o=this.getParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);e.XCommandUtil.handleInactiveCapabilities(i,a,o);i.processQueryManagerCreation(this.getSyncType(),this,null)};e.XCmdDeserializeBlendingResult.prototype.onQueryManagerCreated=function(t,r,n){this.getMessageManager().addAllMessages(t);if(t.isValid()){var i=this.getParameterStringStrict(e.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var a=r.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,i);this.getMessageManager().addAllMessages(a);this.addResultParameter(e.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER,r)}this.onProcessFinished()};e.XCmdDeserializeBlendingSourcesResult=function(){};e.XCmdDeserializeBlendingSourcesResult.prototype=new e.XCmdDeserializeBlendingResultBase;e.XCmdDeserializeBlendingSourcesResult.prototype._ff_c="XCmdDeserializeBlendingSourcesResult";e.XCmdDeserializeBlendingSourcesResult.CLAZZ=null;e.XCmdDeserializeBlendingSourcesResult.staticSetup=function(){e.XCmdDeserializeBlendingSourcesResult.CLAZZ=e.XClass.create(e.XCmdDeserializeBlendingSourcesResult)};e.XCmdDeserializeBlendingSourcesResult.prototype.m_results=null;e.XCmdDeserializeBlendingSourcesResult.prototype.m_currentIndex=0;e.XCmdDeserializeBlendingSourcesResult.prototype.releaseObject=function(){e.XCmdDeserializeBlendingResultBase.prototype.releaseObject.call(this);this.m_results=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_results)};e.XCmdDeserializeBlendingSourcesResult.prototype.process=function(){this.m_results=e.XList.create();e.XCmdDeserializeBlendingResultBase.prototype.process.call(this)};e.XCmdDeserializeBlendingSourcesResult.prototype.importSourceQueryModel=function(t,r,n,i){var a=r.getStructureByKey("DefiningContext");var o=a.getStructureByKey("Definition");var s=o.getStructureByKey("DataSource");var l=e.XCommandFactory.create(t);var u;if(s.containsKey("Sources")){u=l.createCommand(e.CmdDeserializeBlendingSources.CMD_NAME);u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS));u.addParameterString(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEM,this.getParameterString(e.CmdDeserializeBlendingSources.PARAM_I_SYSTEM));u.addParameterString(e.CmdDeserializeBlendingSources.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,o.toString());u.addParameter(e.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY))}else{var p=this.getDataSourceName(s);u=l.createCommand(e.CmdCreateQueryManager.CMD_NAME);u.addParameter(e.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,o);u.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(e.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(n));u.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,p);u.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));u.addParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));var g=this.getParameter(e.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY);if(e.notNull(g)){var c=g.getIterator();while(c.hasNext()){var m=c.next();if(m.containsKey("DataSource")){var y=this.getDataSourceName(m.getStructureByKey("DataSource"));if(e.XString.isEqual(y,p)){u.addParameter(e.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY,e.XContent.createJsonObjectContent(e.QModelFormat.INA_REPOSITORY,m));break}}}}}this.m_results.add(null);u.processCommand(this.getSyncType(),this,e.XIntegerValue.create(this.m_currentIndex));this.m_currentIndex++};e.XCmdDeserializeBlendingSourcesResult.prototype.onQueryManagerImported=function(t,r){var n=t.getResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGER);if(e.notNull(n)){this.m_results.set(r,e.XCollectionUtils.singletonList(n))}else{var i=t.getResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS);this.m_results.set(r,i)}};e.XCmdDeserializeBlendingSourcesResult.prototype.onAllQueryManagersImported=function(){for(var t=0;t<this.m_results.size();t++){this.m_queryManagers.addAll(this.m_results.get(t))}this.addResultParameter(e.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS,this.m_queryManagers.createListCopy());this.onProcessFinished()};e.QCsnMdDimMembers=function(){};e.QCsnMdDimMembers.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimMembers.prototype._ff_c="QCsnMdDimMembers";e.QCsnMdDimMembers.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QCsnMdDimMembers.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdDimMembers.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;var a=i.getFlatDisplayKeyField();var o=i.getAllStructureMembers();var s=o.size();for(var l=0;l<s;l++){var u=o.get(l);var p=u.getFieldValue(a).getValue();var g=this.createStructureMemberElement(u,i.getDefaultAxisType());r.put(p.getStringRepresentation(),g)}return r};e.QCsnMdDimMembers.prototype.createStructureMemberElement=function(t,r){var n=e.PrFactory.createStructure();n.putBoolean(e.CsnConstants.A_MEASURE,true);n.putString(e.CsnConstants.A_COMMON_LABEL,t.getText());n.putNewStructure(e.CsnConstants.A_QUERY_AXIS).putString(e.CsnConstants.ENUM,e.QCsnConverter.lookupAxisCsn(r));var i=t.getAggregationType();if(e.notNull(i)){var a=n.putNewStructure(e.CsnConstants.A_DEFAULT_AGGREGATION);a.putString(e.CsnConstants.ENUM,i.getName())}var o=t.getNumericPrecision();if(e.notNull(o)){n.putInteger(e.CsnConstants.PRECISION,o.getInteger())}var s=t.getNumericScale();if(e.notNull(s)){n.putInteger(e.CsnConstants.SCALE,s.getInteger())}var l=t.getResultVisibility();if(l===e.ResultVisibility.HIDDEN){n.putBoolean(e.CsnConstants.A_UI_HIDDEN,true)}var u=t.getQueryDataCells();if(u.size()===1){var p=u.get(0);n.putInteger(e.CsnConstants.A_DECIMALS,p.getDecimalPlaces());this.addCurrencyDimReference(n,t,p);this.addUnitDimReference(n,t,p)}return n};e.QCsnMdDimMembers.prototype.addCurrencyDimReference=function(t,r,n){var i=n.getBaseValueType();if(i===e.XValueType.AMOUNT){var a=r.getDimension().getQueryModel();var o=a.getDimensionByType(e.DimensionType.CURRENCY);if(e.notNull(o)){t.putNewStructure(e.CsnConstants.A_ISO_CURRENCY).putString(e.CsnConstants.REFERENCE,this.getDimExternalName(o))}}};e.QCsnMdDimMembers.prototype.addUnitDimReference=function(t,r,n){var i=n.getBaseValueType();if(i===e.XValueType.QUANTITY){var a=r.getDimension().getQueryModel();var o=a.getDimensionByType(e.DimensionType.UNIT);if(e.notNull(o)){t.putNewStructure(e.CsnConstants.A_MEASURES_UNIT).putString(e.CsnConstants.REFERENCE,this.getDimExternalName(o))}}};e.QCsnMdDimension=function(){};e.QCsnMdDimension.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimension.prototype._ff_c="QCsnMdDimension";e.QCsnMdDimension.getDisplay=function(t){var r=e.XListOfString.create();var n=t.getMainAttribute().getDefaultResultSetFields();var i=0;while(i<n.size()&&r.size()<2){e.XCollectionUtils.addIfNotPresent(r,n.get(i).isKeyField()?e.CsnConstants.DISPLAY_KEY:e.CsnConstants.DISPLAY_TEXT);i++}return r.hasElements()?e.XCollectionUtils.join(r,"_"):e.CsnConstants.DISPLAY_KEY};e.QCsnMdDimension.getTotals=function(t){return t.isTotalsVisibilityOnDefault()?e.CsnConstants.TOTALS_SHOW:e.CsnConstants.TOTALS_HIDE};e.QCsnMdDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QCsnMdDimension.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getFlatKeyField();var s=n.putNewStructure(this.getDimExternalName(a));s.putBoolean(e.CsnConstants.A_DIMENSION,true);s.putString(e.CsnConstants.TYPE,e.CsnConstants.TYPE_ASSOCIATION);s.putString(e.CsnConstants.TARGET,a.getName());if(e.notNull(o)){this.addLength(s,o)}s.putNewStructure(e.CsnConstants.A_QUERY_AXIS).putString(e.CsnConstants.ENUM,e.QCsnConverter.lookupAxisCsn(a.getDefaultAxisType()));s.putNewStructure(e.CsnConstants.A_QUERY_DISPLAY).putString(e.CsnConstants.ENUM,e.QCsnMdDimension.getDisplay(a));s.putNewStructure(e.CsnConstants.A_QUERY_TOTALS).putString(e.CsnConstants.ENUM,e.QCsnMdDimension.getTotals(a));s.putNewList(e.CsnConstants.KEYS).addNewStructure().putNewList(e.CsnConstants.REF).addAllStrings(this.getAllKeys(a));var l=e.PrFactory.createStructure();l.putString(e.CsnConstants.A_COMMON_LABEL,a.getText());l.putString(e.CsnConstants.KIND,e.CsnConstants.KIND_ENTITY);l.putNewStructure(e.CsnConstants.A_DATA_CATEGORY).putString(e.CsnConstants.ENUM,e.CsnConstants.DATA_CATEGORY_DIMENSION);if(e.notNull(o)){l.putString(e.CsnConstants.A_REPRESENTATIVE_KEY,this.getFieldName(o))}this.addFields(l.putNewStructure(e.CsnConstants.ELEMENTS),a);return l};e.QCsnMdDimension.prototype.addFields=function(t,r){var n=r.getFlatKeyField();var i=r.getFlatTextField();var a=r.getFields();var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);var u=t.putNewStructure(this.getFieldName(l));this.addLength(u,l);u.putString(e.CsnConstants.TYPE,e.QCsnConverter.lookupValueTypeCsn(l.getValueType(),e.CsnConstants.TYPE_STRING));if(l.isKeyField()){u.putBoolean(e.CsnConstants.KEY,true);var p=l===n&&e.notNull(i)?this.getFieldName(i):null;if(e.XStringUtils.isNotNullAndNotEmpty(p)){u.putNewStructure(e.CsnConstants.A_TEXT_ATTRIBUTE).putString(e.CsnConstants.REFERENCE,p)}}else{u.putNewStructure(e.CsnConstants.A_TEXT_FOR).putString(e.CsnConstants.REFERENCE,this.getFieldName(n))}if(!l.isFilterable()){u.putBoolean(e.CsnConstants.A_FILTERABLE,false)}}};e.QCsnMdDimension.prototype.addLength=function(t,r){if(r.getValueType().isString()&&r.getLength()>0){t.putInteger(e.CsnConstants.LENGTH,r.getLength())}};e.QCsnMdDimension.prototype.getAllKeys=function(t){var r=e.XListOfString.create();var n=t.getFlatKeyField();var i=t.getFields();var a=i.size();for(var o=0;o<a;o++){var s=i.get(o);var l=s.getPresentationType();var u=s===n;var p=l===e.PresentationType.KEY&&!s.isHierarchyKeyField();if(u||p){r.add(this.getFieldName(s))}}return r};e.QCsnMdDimensions=function(){};e.QCsnMdDimensions.prototype=new e.QCsnComponentMetadata;e.QCsnMdDimensions.prototype._ff_c="QCsnMdDimensions";e.QCsnMdDimensions.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QCsnMdDimensions.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdDimensions.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=n.getStructureByKey(a.getDataSource().getObjectName());var s=o.getStructureByKey(e.CsnConstants.ELEMENTS);var l=a.getDimensions();var u=l.size();for(var p=0;p<u;p++){var g=l.get(p);if(g.isMeasureStructure()){t.exportMembers(g,s)}else{var c=t.exportDimension(g,s);n.put(g.getName(),c)}}return n};e.QCsnMdQuery=function(){};e.QCsnMdQuery.prototype=new e.QCsnComponentMetadata;e.QCsnMdQuery.prototype._ff_c="QCsnMdQuery";e.QCsnMdQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QCsnMdQuery.prototype.newModelComponent=function(t,r,n,i){return e.QueryModel.create(r,null,e.QCapabilities.create())};e.QCsnMdQuery.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdQuery.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=n.putNewStructure(e.CsnConstants.DEFINITIONS);var s=o.putNewStructure(a.getDataSource().getObjectName());s.putString(e.CsnConstants.KIND,e.CsnConstants.KIND_ENTITY);s.putString(e.CsnConstants.A_COMMON_LABEL,a.getText());s.putNewStructure(e.CsnConstants.ELEMENTS);t.exportDimensions(a,o);t.exportVariables(a.getVariableContainer(),n);return n};e.QCsnMdVariable=function(){};e.QCsnMdVariable.prototype=new e.QCsnComponentMetadata;e.QCsnMdVariable.prototype._ff_c="QCsnMdVariable";e.QCsnMdVariable.prototype.getComponentType=function(){return e.VariableType.ANY_VARIABLE};e.QCsnMdVariable.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdVariable.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString(e.CsnConstants.NAME,this.getVariableName(a));return n};e.QCsnMdVariable.prototype.getVariableName=function(t){var r=t.getNameExternal();return e.XStringUtils.isNotNullAndNotEmpty(r)?r:t.getName()};e.QCsnMdVariables=function(){};e.QCsnMdVariables.prototype=new e.QCsnComponentMetadata;e.QCsnMdVariables.prototype._ff_c="QCsnMdVariables";e.QCsnMdVariables.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QCsnMdVariables.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QCsnMdVariables.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getVariables();if(o.hasElements()){var s=n.putNewList(e.CsnConstants.PARAMETERS);var l=o.size();for(var u=0;u<l;u++){t.exportVariable(o.get(u),s.addNewStructure())}}return n};e.QInAMdBasicMeasure=function(){};e.QInAMdBasicMeasure.prototype=new e.QInAComponentMetadata;e.QInAMdBasicMeasure.prototype._ff_c="QInAMdBasicMeasure";e.QInAMdBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInAMdBasicMeasure.prototype.newModelComponent=function(t,r,n,i){return e.QBasicMeasure._createBasicMeasure(i,n)};e.QInAMdBasicMeasure.prototype.importComponentWithStructure=function(e,t,r,n,i){var a=r;a.setName(t.getStringByKey("Name"));return r};e.QInAMdBasicMeasure.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;r.putString("Name",i.getName());return r};e.QInAMdDataSource=function(){};e.QInAMdDataSource.prototype=new e.QInAComponentMetadata;e.QInAMdDataSource.prototype._ff_c="QInAMdDataSource";e.QInAMdDataSource.importMd=function(t,r,n,i){var a=r;if(e.notNull(a)&&!a.containsKey("DataSource")){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&!a.containsKey("DataSource")){a=a.getStructureByKey("Definition")}if(e.isNull(a)&&r.containsKey("Definition")){a=r.getStructureByKey("Definition")}if(e.isNull(a)&&r.containsKey("ListReporting")){a=r.getStructureByKey("ListReporting")}}var o=null;if(e.notNull(a)&&a.containsKey("DataSource")){o=e.QInADataSource.importQd(t,a,"DataSource",i);if(e.notNull(o)){if(e.XStringUtils.isNullOrEmpty(o.getText())){var s=a.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(s)){o.setText(s)}}o.setCreatedBy(a.getStringByKey("CreatedBy"));o.setLastUpdateBy(a.getStringByKey("LastDataUpdateBy"));var l=a.getStringByKey("CreatedOn");var u=e.XDateTime.createDateTimeSafe(l);o.setCreatedOn(u);var p=a.getStringByKey("LastDataUpdateOn");if(e.isNull(p)){p=a.getStringByKey("LastDataUpdate")}var g=e.XDateTime.createDateTimeSafe(p);o.setLastUpdateOn(g);var c=a.getStringByKey("DueDate");var m=e.XDateTime.createDateTimeSafe(c);o.setDueDate(m)}}var y=e.QInADataSource.importQd(t,r,"BaseDataSource",i);if(e.notNull(y)){if(e.notNull(o)){o.setParentCubeInfo(y)}n.setBaseDataSource(y);var d=e.QInfoProvider.createInfoProvider(n,y.getObjectName(),y.getObjectName(),null);n.setInfoProvider(d)}if(e.notNull(o)){n.setCubeInfo(o)}};e.QInAMdDataSource.exportMd=function(t,r,n){var i=e.QInADataSource.exportDataSource(t,n.getDataSource(),false,r,true);if(n.getDataSource().getValidationHash()!==null){i.putString("ValidationHash",n.getDataSource().getValidationHash())}return i};e.QInAMdDataSource.prototype.getComponentType=function(){return null};e.QInAMdDataSource.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdDataSource.importMd(t,r,o,a);return n};e.QInAMdDataSource.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;return e.QInAMdDataSource.exportMd(t,n,a)};e.QInAMdDimMembers=function(){};e.QInAMdDimMembers.prototype=new e.QInAComponentMetadata;e.QInAMdDimMembers.prototype._ff_c="QInAMdDimMembers";e.QInAMdDimMembers.importMd=function(t,r,n){if(r.supportsBasicStructureMembers()){var i=n.getListByKey("BasicMembers");if(e.isNull(i)){i=n.getListByKey("Members")}e.QInAMdDimMembers.importMemberDetails(t,r,i);if(t.hasErrors()){return}var a=n.getListByKey("Extended_Members_From_MD");e.QInAMdDimMembers.importMemberDetails(t,r,a);if(t.hasErrors()){return}}var o=e.PrUtils.getListProperty(n,"OrderedStructureMemberNames");if(e.notNull(o)){var s=e.XListOfString.create();var l=e.PrUtils.getListSize(o,0);for(var u=0;u<l;u++){var p=e.PrUtils.getStringElement(o,u);e.XObjectExt.assertNotNullExt(p,"illegal state");s.add(p.getString())}r.reOrderStructureMembers(s)}};e.QInAMdDimMembers.importMemberDetails=function(t,r,n){if(e.notNull(n)){var i=r.getFields();var a=r.getKeyField();var o=a.getName();var s=r.getTextField();var l=e.isNull(s)?null:s.getName();var u=n.size();for(var p=0;p<u;p++){var g=n.getStructureAt(p);var c=g.getStringByKey(o);var m=g.getStringByKey(l);var y=null;if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&r.getDimensionType()===e.DimensionType.ACCOUNT){continue}else if(r.getQueryModel().getModelCapabilities().supportsCustomMeasuresInMetadata()){y=e.QInAMdDimMembers.decideMeasureTypeAndAdd(r,g,c,m)}else{y=r.addNewBasicMeasure(c,m)}y.setCreatedFromMetadata(true);if(g.getBooleanByKeyExt("BasicMeasureNotFromMetadata",false)){y.setNotFromMetadata()}y.setIsSelectionCandidate(g.getBooleanByKeyExt("IsSelectionCandidate",true));var d=g.getListByKey("DefaultSelectedDimensions");if(e.notNull(d)){var A=d.size();for(var I=0;I<A;I++){y.addDefaultSelectionDimensionByName(d.getStringAt(I))}}var S=e.QInAConverter.lookupResultCalculation(g.getStringByKeyExt("ResultCalculation",null));y.setResultCalculation(S);e.QInAMember.importAggregationType(y,g,false);if(g.getByKey("isModelDefinedMember")!==null){y.setModelDefinedMember(g.getBooleanByKey("isModelDefinedMember"))}var f=e.PrUtils.getIntegerProperty(g,"NumericPrecision");if(e.notNull(f)){y.setNumericPrecision(f.getInteger())}var v=e.PrUtils.getIntegerProperty(g,"NumericScale");if(e.notNull(v)){y.setNumericScale(v.getInteger())}var C=e.PrUtils.getIntegerProperty(g,"NumericShift");if(e.notNull(C)){y.setNumericShift(C.getInteger())}if(g.containsKey("CurrencyTranslationName")){y.setCurrencyTranslationName(g.getStringByKey("CurrencyTranslationName"))}var N=e.QInAConverter.lookupSingleValueCalculation(g.getStringByKeyExt("SingleValueCalculation",null));y.setSingleValueCalculation(N);var E=i.size();for(var M=0;M<E;M++){var h=i.get(M);if(h.isCubeBlendingPropertiesField()){continue}var D=h.getName();if(!g.containsKey(D)){continue}var T=h.getValueType();var Q;if(g.hasStringByKey(D)){Q=e.XValueUtil.getValueFromString(g.getStringByKey(D),T)}else{var R=g.getByKey(D);Q=e.isNull(R)?null:e.XValueUtil.convertValue(R.copyAsPrimitiveXValue(),T)}y.createAndAddFieldWithValue(h,Q)}if(g.hasStringByKey("SemanticObject")){y.setSemanticObject(g.getStringByKey("SemanticObject"))}}}};e.QInAMdDimMembers.decideMeasureTypeAndAdd=function(e,t,r,n){var i;var a=t.getIntegerByKeyExt("[Measures].[MemberType]",-1);if(a===0){i=e.addNewFormulaMeasure(r,n)}else if(a===1){i=e.addNewRestrictedMeasure(r,n)}else{i=e.addNewBasicMeasure(r,n)}return i};e.QInAMdDimMembers.exportMd=function(t,r,n){var i=n.getBasicStructureMembers();if(e.notNull(i)){var a=r.putNewList("BasicMembers");if(!(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&n.getDimensionType()===e.DimensionType.ACCOUNT)){e.QInAMdDimMembers.exportMemberDetails(t,n,i,a)}}var o=n.getExtendedStructureMembers();if(e.XCollectionUtils.hasElements(o)){var s=o.size();var l=e.XListOfNameObject.create();for(var u=0;u<s;u++){var p=o.get(u);if(p.isCreatedFromMetadata()){l.add(p)}}if(e.XCollectionUtils.hasElements(l)){var g=r.putNewList("Extended_Members_From_MD");e.QInAMdDimMembers.exportMemberDetails(t,n,l,g)}}var c=n.getOrderedStructureMemberNames();if(e.notNull(c)){var m=r.putNewList("OrderedStructureMemberNames");m.addAllStrings(c)}};e.QInAMdDimMembers.exportMemberDetails=function(t,r,n,i){if(e.notNull(n)){var a=r.getFields();var o=a.size();var s=r.getTextField();var l=e.notNull(s)?s.getName():null;var u=n.size();for(var p=0;p<u;p++){var g=i.addNewStructure();var c=n.get(p);var m=r.getModelCapabilities().supportsCustomMeasuresInMetadata();if(m){var y=e.QInAConverter.lookupMeasureStructureMemberTypeInaForUniversalModels(c.getMemberType());g.putInteger("[Measures].[MemberType]",y)}if(c.getMemberType()===e.MemberType.BASIC_MEASURE){if(c.isNotFromMetadata()){g.putBoolean("BasicMeasureNotFromMetadata",true)}}if(c.isModelDefinedMember()){g.putBoolean("isModelDefinedMember",true)}for(var d=0;d<o;d++){var A=a.get(d);if(A.isCubeBlendingPropertiesField()){continue}var I=c.getFieldValue(A);if(e.isNull(I)){continue}if(!c.isSelectionCandidate()){g.putBoolean("IsSelectionCandidate",false)}var S=c.getDefaultSelectedDimensionNames();if(e.notNull(S)){var f=g.putNewList("DefaultSelectedDimensions");f.addAllStrings(S)}e.QInAExportUtil.setNameIfNotNull(g,"SingleValueCalculation",c.getSingleValueCalculation());e.QInAExportUtil.setNameIfNotNull(g,"ResultCalculation",c.getResultCalculation());e.QInAExportUtil.setNameIfNotNull(g,"Aggregation",c.getAggregationType());var v=c.getNumericPrecision();if(e.notNull(v)){g.putInteger("NumericPrecision",v.getInteger())}var C=c.getNumericScale();if(e.notNull(C)){g.putInteger("NumericScale",C.getInteger())}var N=c.getNumericShift();if(e.notNull(N)){g.putInteger("NumericShift",N.getInteger())}if(c.getMappedCurrencyTranslationNameForInAData()!==null){g.putString("CurrencyTranslationName",c.getMappedCurrencyTranslationNameForInAData())}var E=A.getName();var M=I.getValueType();if(M===e.XValueType.STRING){if(e.notNull(l)&&e.XString.isEqual(E,l)&&c.hasOverrideTextDefined()){g.putString(E,c.getText())}else{g.putString(E,I.getString())}}else if(M===e.XValueType.BOOLEAN){g.putBoolean(E,I.getBoolean())}else if(M===e.XValueType.INTEGER){g.putInteger(E,I.getInteger())}else if(M===e.XValueType.LONG){g.putLong(E,I.getLong())}else if(M===e.XValueType.DOUBLE||M===e.XValueType.DECIMAL_FLOAT){g.putDouble(E,I.getDouble())}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Unsupported element type")}}g.putStringNotNullAndNotEmpty("SemanticObject",c.getSemanticObject())}}};e.QInAMdDimMembers.prototype.getComponentType=function(){return null};e.QInAMdDimMembers.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdDimMembers.importMd(t,n,r);return n};e.QInAMdDimMembers.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdDimMembers.exportMd(t,n,r);return n};e.QInAMdDimProperties=function(){};e.QInAMdDimProperties.prototype=new e.QInAComponentMetadata;e.QInAMdDimProperties.prototype._ff_c="QInAMdDimProperties";e.QInAMdDimProperties.importMdNameValuePairs=function(t,r){var n=e.PrUtils.getStructureProperty(t,"HierarchyProperties");if(e.notNull(n)){e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyMaintenance",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyCreation",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyCreationByReference",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyUpdate",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyCopy",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyDeletion",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchySaving",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyActivation",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyExternalDimension",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyIntervals",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyReverseSign",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyStructureTimeDep",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyTimeDep",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyVersionDep",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalMaintenance",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalCreation",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalCreationByReference",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalUpdate",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalCopy",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalDeletion",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalSaving",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalActivation",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalExternalDimension",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalIntervals",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalReverseSign",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalStructureTimeDep",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalTimeDep",n);e.QInAMdDimProperties.importHierarchyProperties(r,"HierarchyLocalVersionDep",n)}var i=e.PrUtils.getStructureProperty(t,"MasterDataProperties");if(e.notNull(i)){var a=e.PrUtils.getBooleanProperty(i,"MasterDataMaintenance");if(e.notNull(a)){r.addNameValuePair(e.XNameValuePair.create("MasterDataMaintenance",e.XBoolean.convertToString(a.getBoolean())))}}};e.QInAMdDimProperties.importHierarchyProperties=function(t,r,n){var i=e.PrUtils.getBooleanProperty(n,r);if(e.notNull(i)){t.addNameValuePair(e.XNameValuePair.create(r,e.XBoolean.convertToString(i.getBoolean())))}};e.QInAMdDimProperties.prototype.getComponentType=function(){return null};e.QInAMdDimProperties.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdDimProperties.importMdNameValuePairs(r,n);return n};e.QInAMdDimProperties.prototype.exportComponentWithStructure=function(e,t,r,n){return r};e.QInAMdDimension=function(){};e.QInAMdDimension.prototype=new e.QInAComponentMetadata;e.QInAMdDimension.prototype._ff_c="QInAMdDimension";e.QInAMdDimension.importDimensionGroups=function(t,r){var n=t.getBooleanByKeyExt("IsDimensionGroup",false);r.setIsGroupingDimension(n);var i=e.PrUtils.getListProperty(t,"DimensionGroups");var a=e.PrUtils.getListSize(i,0);for(var o=0;o<a;o++){var s=e.PrUtils.getStringElement(i,o);if(e.notNull(s)){r.addGroupingDimension(s.getString())}}};e.QInAMdDimension.importDimensionGroupNames=function(t){var r=e.PrUtils.getListProperty(t,"DimensionGroups");var n=e.PrUtils.getListSize(r,0);if(n===0){return null}var i=e.XStringBuffer.create();for(var a=0;a<n;a++){var o=e.PrUtils.getStringElement(r,a);if(e.notNull(o)){i.append(o.getString())}}return i.toString()};e.QInAMdDimension.exportDimensionGroup=function(e,t){if(t.isGroupingDimension()){e.putBoolean("IsDimensionGroup",true)}var r=t.getGroupingDimensionNames();if(r.hasElements()){var n=e.putNewList("DimensionGroups");var i=r.size();for(var a=0;a<i;a++){n.addString(r.get(a))}}};e.QInAMdDimension.importDimensionFlags=function(t,r,n,i){n.setId(i.getIntegerByKeyExt("ID",0));n.setExternalName(i.getStringByKey("NameExternal"));n.setSupportsLowerCase(e.PrUtils.getBooleanValueProperty(i,"LowercaseSupported",false));n.setIsOwnerDimension(i.getBooleanByKeyExt("IsOwnerDimension",false));n.setIsPrivate(i.getBooleanByKeyExt("Private",false));n.setSupportsCumulative(i.getBooleanByKeyExt("SupportsCummulative",false));var a=e.PrUtils.getBooleanValueProperty(i,"MultipleValues",true);var o=n.getFilterCapabilitiesBase();o.setSupportsMultipleValues(a);n.setCanBeAggregated(i.getBooleanByKeyExt("CanBeAggregated",true));n.setIsHierarchyMandatory(i.getBooleanByKeyExt("IsHierarchyMandatory",false));if(!n.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){if(t.getSession().hasFeature(e.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)){n.setHasCheckTable(!t.isAbap(r)||i.getBooleanByKeyExt("HasCheckTable",false))}else{n.setHasCheckTable(i.getBooleanByKeyExt("HasCheckTable",true))}}};e.QInAMdDimension.exportDimensionFlags=function(t,r,n){r.putString("Description",n.getText());r.putString("NameExternal",n.getExternalName());if(n.getId()!==0){r.putInteger("ID",n.getId())}r.putBoolean("LowercaseSupported",n.supportsLowerCase());r.putBoolean("IsOwnerDimension",n.isOwnerDimension());r.putBoolean("Private",n.isPrivate());r.putBoolean("SupportsCummulative",n.supportsCumulative());var i=n.getFilterCapabilities();r.putBoolean("MultipleValues",i.supportsMultipleValues());r.putBoolean("CanBeAggregated",n.canBeAggregated());r.putBoolean("IsHierarchyMandatory",n.isHierarchyMandatory());if(t.isAbap(n)&&!n.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){var a=n.getHasCheckTable();if(t.getSession().hasFeature(e.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)&&a){r.putBoolean("HasCheckTable",true)}else if(!a){r.putBoolean("HasCheckTable",false)}}};e.QInAMdDimension.importAxesConstraints=function(t,r){var n=r.getListByKey("AxisConstraints");if(e.PrUtils.isListEmpty(n)){t.addSupportedAxis(e.AxisType.FREE);t.addSupportedAxis(e.AxisType.ROWS);t.addSupportedAxis(e.AxisType.COLUMNS)}else{var i=n.size();for(var a=0;a<i;a++){t.addSupportedAxis(e.QInAConverter.lookupAxisType(n.getStringAt(a)))}}};e.QInAMdDimension.exportAxesConstraints=function(t,r){var n=r.getSupportedAxesTypes().getIterator();var i=t.putNewList("AxisConstraints");while(n.hasNext()){i.addString(n.next().getName())}e.XObjectExt.release(n)};e.QInAMdDimension.importKeyAttributesNames=function(t,r,n){var i=n.getListByKey("KeyAttributes");if(e.notNull(i)&&e.notNull(r)&&r.supportsDimensionKeyAttributes()){var a=e.XListOfString.create();var o=i.size();for(var s=0;s<o;s++){var l=i.getStringAt(s);if(e.XStringUtils.isNotNullAndNotEmpty(l)){a.add(l)}}t.setKeyAttributesNames(a)}};e.QInAMdDimension.getDefaultAxis=function(t,r,n){var i=t.getStringByKey("AxisDefault");if(e.XStringUtils.isNullOrEmpty(i)){i=t.getStringByKey("Axis")}var a=e.isNull(i)?e.AxisType.FREE:e.QInAConverter.lookupAxisType(i);if(n!==e.DimensionType.DIMENSION_INCOMPLETE&&!r.supportsAxis(a)){var o=r.getSupportedAxesTypes();var s=o.getIterator();if(s.hasNext()){a=s.next()}e.XObjectExt.release(s)}return a};e.QInAMdDimension.importDimensionReadModes=function(t,r,n){var i=r.getReadModeManagerBase();if(e.notNull(t)){e.QInAMdDimension.importMdReadModeSettings(n,i,e.QContextType.RESULT_SET,"SupportedResultSetReadModes","SupportedResultSetMemberReadModes","ResultSetDefaultReadMode","DefaultResultSetReadMode","ResultSetMemberDefaultReadMode")}e.QInAMdDimension.importMdReadModeSettings(n,i,e.QContextType.VARIABLE,"SupportedVariableReadModes",null,"DefaultVariableReadMode",null,null);e.QInAMdDimension.importMdReadModeSettings(n,i,e.QContextType.SELECTOR,"SupportedSelectorReadModes",null,"SelectorDefaultReadMode","DefaultSelectorReadMode",null)};e.QInAMdDimension.addSupportedReadModes=function(t,r,n){var i=t.size();for(var a=0;a<i;a++){var o=e.QInAConverter.lookupReadMode(t.getStringAt(a));if(e.notNull(o)){r.addSupportedReadMode(n,o)}}};e.QInAMdDimension.setDefaultReadmode=function(t,r,n,i,a,o){var s=t.getStringByKey(i);if(e.isNull(s)&&e.notNull(a)){s=t.getStringByKey(a)}if(e.isNull(s)&&e.notNull(o)){s=t.getStringByKey(o)}if(e.notNull(s)){var l=e.QInAConverter.lookupReadMode(s);if(e.notNull(l)){r.setReadModeDefault(n,l,true)}}};e.QInAMdDimension.importMdReadModeSettings=function(t,r,n,i,a,o,s,l){var u=t.getListByKey(i);if(e.isNull(u)&&e.notNull(a)){u=t.getListByKey(a)}if(e.PrUtils.isListEmpty(u)){r.addSupportedReadMode(n,e.QMemberReadMode.BOOKED);r.addSupportedReadMode(n,e.QMemberReadMode.MASTER);r.setReadModeDefault(n,e.QMemberReadMode.BOOKED,false)}else{e.QInAMdDimension.addSupportedReadModes(u,r,n);e.QInAMdDimension.setDefaultReadmode(t,r,n,o,s,l)}};e.QInAMdDimension.exportDimensionReadModes=function(t,r,n){if(t.isAbap(n)){e.QInAMdDimension.exportMdSupportedReadModes(n,e.QContextType.RESULT_SET,r,"SupportedResultSetReadModes","ResultSetDefaultReadMode");e.QInAMdDimension.exportMdSupportedReadModes(n,e.QContextType.VARIABLE,r,"SupportedVariableReadModes","DefaultVariableReadMode")}else{e.QInAMdDimension.exportMdSupportedReadModes(n,e.QContextType.RESULT_SET,r,"SupportedResultSetMemberReadModes","ResultSetDefaultReadMode")}e.QInAMdDimension.exportMdSupportedReadModes(n,e.QContextType.SELECTOR,r,"SupportedSelectorReadModes","SelectorDefaultReadMode")};e.QInAMdDimension.exportMdSupportedReadModes=function(t,r,n,i,a){if(!t.hasReadModeDefault(r)){return}var o=e.XCollectionUtils.createListOfNames(t.getSupportedReadModes(r));o.sortByDirection(e.XSortDirection.ASCENDING);var s=n.putNewList(i);s.addAllStrings(o);var l=t.getReadModeDefault(r);if(e.notNull(l)){n.putString(a,e.QInAConverter.lookupReadModeInA(l))}};e.QInAMdDimension.exportMdSupportedSortTypes=function(t,r,n){var i=n.getMetadata().getSupportedSortTypes();if(e.notNull(i)&&t.capabilities.supportsExtendedSort()){var a=r.putNewList("ExtendedSortTypes");var o=i.getKeysAsReadOnlyListOfString();var s=o.size();for(var l=0;l<s;l++){var u=i.getByKey(o.get(l));a.addString(e.QInAConverter.lookupSortTypeInA(u))}}};e.QInAMdDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInAMdDimension.prototype.newModelComponent=function(t,r,n,i){var a=n;if(e.isNull(a)){a=i.getQueryModel()}return e.QDimension._create(i,a)};e.QInAMdDimension.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=o.getModelCapabilities();var l=r.getStringByKey("Name");var u=r.getIntegerByKeyExt("DimensionType",3);var p=e.QInAConverter.lookupDimensionType(u);if(p===e.DimensionType.CALCULATED_DIMENSION){o=e.QCalculatedDimension._createCalculatedDimension(a,i,l)}else if(p===e.DimensionType.FORMULA_CALCULATED_DIMENSION){o=e.QFormulaCalculatedDimension._createFormulaCalculatedDimension(a,l);e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,r,o,i,a)}o.setName(l);o.setText(r.getStringByKey("Description"));var g=o.getQueryModel();var c=e.notNull(g);var m=e.QInAMdDimension.importDimensionGroupNames(r);var y;if(e.notNull(t.m_cacheKey)){y=e.QCacheKey.createCopyExt(t.m_cacheKey,l,null,m)}else{y=e.QCacheKey.createByContextForDimension(a,l,m)}var d=u<-1;var A=t.getApplication().getOlapEnvironment();var I=A.getDimensionMetadataByKey(y);var S=e.isNull(I)||p===e.DimensionType.DIMENSION_INCOMPLETE;if(S){if(d){I=o.getMetadataBase()}else{I=e.QDimensionMetadata.create(y)}I.setDimensionType(p);e.QInAMdDimension.importKeyAttributesNames(I,s,r);var f=r.getIntegerByKeyExt("Visibility",-1);if(f!==-1){I.setVisibility(e.DimensionVisibility._getByInaCode(f))}var v=r.getStringByKey("DefaultMember");if(e.notNull(v)){I.setDefaultMemberValue(v)}e.QInAMdDimension.importDimensionGroups(r,I);I.setAttributeViewName(r.getStringByKeyExt("ViewAttributes",null));if(t.capabilities.supportsCustomDimensionMemberExecutionStep()&&(I.isStructure()||I.getDimensionType()===e.DimensionType.ACCOUNT)){I.setSupportsCalculatedBeforeAggregation(true)}I.setEnforceDynamicValue(r.getBooleanByKeyExt("EnforceDynamicValue",false));var C=e.QInAConverter.lookupValueType(r.getStringByKey("DataType"));if(C!==e.XValueType.UNSUPPORTED){I.setValueType(C)}e.QInAMdDimension.importDimensionFlags(t,o,I,r);if(!d){A.setDimensionMetadata(I)}var N=r.getListByKey("ExtendedSortTypes");if(t.capabilities.supportsExtendedSort()&&e.notNull(N)){var E=e.XSetOfNameObject.create();var M=N.size();for(var h=0;h<M;h++){var D=e.QInAConverter.lookupSortType(N.getStringAt(h));if(e.notNull(D)){E.add(D)}}I.setSupportedSortTypes(E)}if(r.hasStringByKey("SemanticObject")){I.setSemanticObject(r.getStringByKey("SemanticObject"))}}if(c){if(S){e.QInAMdDimension.importAxesConstraints(I,r)}var T=e.QInAMdDimension.getDefaultAxis(r,I,p);if(S||!d){o.setDefaultAxisType(T)}}if(!d){o.setMetadata(I)}o.setDimensionType(p);if(!t.capabilities.supportsExtendedSort()&&c&&!t.isVirtualInA(g)){if(!o.isMeasureStructure()){var Q=g.getSortingManagerBase();Q.addSupportedSortType(e.SortType.FIELD);Q.addSupportedSortType(e.SortType.MEMBER_KEY);Q.addSupportedSortType(e.SortType.MEMBER_TEXT)}}e.QInAMdFieldsList.importMd(t,r,o);e.QInAMdFieldsAttributes.importMd(o,r);if(!e.XCollectionUtils.hasElements(o.getFields())&&r.hasStringByKey("KeyAttribute")){var R=e.QField._createField(a,o,e.PresentationType.KEY);var _=r.getStringByKey("KeyAttribute");R.setName(_);var F=e.QFieldMetadata.create(e.QCacheKey.createByContextForField(a,_,l));F.setUsageType(e.FieldUsageType.FLAT);F.setPresentationType(e.PresentationType.KEY);F.setValueType(e.XValueType.STRING);R.setMetadata(F);o.getFieldContainerBase().addFieldInternal(R)}e.QInAMdFieldsRoles.importMd(t,r,o);e.QInAMdFilterCapability.updateFilterCapabilities(o);e.QInAMdFieldsResultSet.importMd(t,r,o);e.QInAMdDimMembers.importMd(t,o,r);e.QInAMdDimension.importDimensionReadModes(g,o,r);e.QInAMdHierarchy.importMdHierarchy(t,r,o);e.QInAMdDimProperties.importMdNameValuePairs(r,o);return o};e.QInAMdDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getName();n.putString("Name",o);var s=a.getVisibility();if(e.notNull(s)){n.putInteger("Visibility",s._getInaCode())}var l=a.getDefaultMemberValue();if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.putString("DefaultMember",l)}var u=e.QInAConverter.lookupDimensionTypeInA(a.getDimensionType());n.putInteger("DimensionType",u);n.putStringNotNull("ViewAttributes",a.getAttributeViewName());var p=a.getDefaultAxisType();var g=e.QInAConverter.lookupAxisTypeInA(p);n.putString("AxisDefault",g);e.QInAMdDimension.exportDimensionFlags(t,n,a);e.QInAMdDimMembers.exportMd(t,n,a);if(a.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(t,n,a)}else{if(!a.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION)){e.QInAMdFieldsRoles.exportMd(n,a)}e.QInAMdFieldsList.exportMd(t,n,a);e.QInAMdFieldsResultSet.exportMd(n,a);e.QInAMdFieldsAttributes.exportMd(n,a)}e.QInAMdDimension.exportDimensionGroup(n,a);e.QInAMdHierarchy.exportMdHierarchy(t,n,a);e.QInAMdDimension.exportAxesConstraints(n,a);e.QInAMdDimension.exportDimensionReadModes(t,n,a);e.QInAMdDimension.exportMdSupportedSortTypes(t,n,a);n.putBoolean("EnforceDynamicValue",a.isEnforcedDynamicValue());n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(a.getValueType()));n.putStringNotNullAndNotEmpty("SemanticObject",a.getMetadata().getSemanticObject());return n};e.QInAMdDocumentsInfo=function(){};e.QInAMdDocumentsInfo.prototype=new e.QInAComponentMetadata;e.QInAMdDocumentsInfo.prototype._ff_c="QInAMdDocumentsInfo";e.QInAMdDocumentsInfo.importMd=function(t,r,n,i){if(e.notNull(r)&&r.containsKey("DocumentsInfo")){var a=r.getStructureByKey("DocumentsInfo");var o=n.getDocumentsInfo();var s=e.QInAConverter.lookupDocumentsSupportType(a.getStringByKey("SupportsDocuments"));var l=a.getStringByKey("DocumentsServicePath");var u=a.getStringByKey("DefaultDocumentsDirectory");var p=a.getStringByKey("ActiveDocumentsDirectory");var g=a.getListByKey("DocumentsDirectories");var c=null;if(e.notNull(g)){c=e.PrUtils.asListOfString(g)}var m=o.getSupportsDocuments()===e.DocumentsSupportType.NONE&&s!==e.DocumentsSupportType.NONE;o.setSupportsDocuments(s);o.setDocumentsServicePath(l);o.setDefaultDocumentsDirectory(u);o.setActiveDocumentsDirectory(p);o.setDocumentsDirectories(c);o.setIsBasedOnCDSView(a.getBooleanByKey("IsBasedOnCDSView"));var y=n.getDocumentsIdsRequest();var d=e.isNull(y)?null:y.getDocumentsIdsScope();if(m&&e.notNull(d)&&d===e.DocumentsIdsScope.NONE){if(o.isBasedOnCDSView()){y.setDocumentsIdsScope(e.DocumentsIdsScope.SYSTEM_UNIQUE)}else{y.setDocumentsIdsScope(e.DocumentsIdsScope.RESULT_SET_BOUND)}}}};e.QInAMdDocumentsInfo.prototype.getComponentType=function(){return null};e.QInAMdDocumentsInfo.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdDocumentsInfo.importMd(t,r,o,a);return n};e.QInAMdDocumentsInfo.prototype.exportComponentWithStructure=function(e,t,r,n){return null};e.QInAMdDrillManager=function(){};e.QInAMdDrillManager.prototype=new e.QInAComponentMetadata;e.QInAMdDrillManager.prototype._ff_c="QInAMdDrillManager";e.QInAMdDrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInAMdDrillManager.prototype.newModelComponent=function(t,r,n,i){return e.QFactory.createDrillManager(i)};e.QInAMdDrillManager.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=t.capabilities.supportsHierarchyNavCounter();if(e.notNull(r)){o=r.getBooleanByKeyExt("SupportsHierNavCounter",o)}var s=n;s.setSupportsDrillCounter(o);return s};e.QInAMdDrillManager.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;r.putBoolean("SupportsHierNavCounter",i.supportsDrillCounter());return r};e.QInAMdExceptionAggregationManager=function(){};e.QInAMdExceptionAggregationManager.prototype=new e.QInAComponentMetadata;e.QInAMdExceptionAggregationManager.prototype._ff_c="QInAMdExceptionAggregationManager";e.QInAMdExceptionAggregationManager.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER};e.QInAMdExceptionAggregationManager.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.notNull(r)&&e.notNull(o)){o._clear();var s=r.getStructureByKey("ExceptionAggregations");if(e.notNull(s)){var l=s.getListByKey("DimensionSets");if(!e.PrUtils.isListEmpty(l)){var u=l.size();for(var p=0;p<u;p++){this._importDimensionSet(o,l.get(p).asStructure())}}var g=s.getListByKey("AggregationGroups");if(!e.PrUtils.isListEmpty(g)){var c=g.size();for(var m=0;m<c;m++){this._importExceptionAggregationGroup(o,g.get(m).asStructure())}}}else{o._setupDefaultConfigurations()}}return o};e.QInAMdExceptionAggregationManager.prototype._importDimensionSet=function(t,r){t._addDimensionSet(r.getStringByKey("Name"),e.PrUtils.asListOfString(r.getListByKey("Dimensions")))};e.QInAMdExceptionAggregationManager.prototype._importExceptionAggregationGroup=function(t,r){var n=r.getStringByKey("Name");var i=r.getStringByKeyExt("SupportedDimensions","");var a=r.getIntegerByKeyExt("MaxNumberOfDimensions",-1);var o=r.getListByKey("AggregationMap");var s=o.size();for(var l=0;l<s;l++){var u=o.getStructureAt(l);var p=u.getIntegerByKeyExt("MembersCode",t._getDefaultMembersCode());t._addExceptionAggregationGroup(e.QExceptionAggregationGroup._create(t,n,p,a,i,e.PrUtils.asListOfString(u.getListByKey("AggregationTypes"))))}};e.QInAMdExceptionAggregationManager.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(e.notNull(a)){var o=n.putNewStructure("ExceptionAggregations");var s=o.putNewList("DimensionSets");var l=a._getDimensionSets();var u=l.getKeysAsReadOnlyListOfString();var p=u.size();for(var g=0;g<p;g++){var c=u.get(g);s.add(this._exportDimensionSet(c,l.getByKey(c)))}var m=o.putNewList("AggregationGroups");var y=a._getExceptionAggregationGroups().getKeysAsReadOnlyListOfString();var d=y.size();var A=a._getExceptionAggregationGroups();for(var I=0;I<d;I++){m.add(this._exportExceptionAggregationGroup(A.get(I)))}}return n};e.QInAMdExceptionAggregationManager.prototype._exportDimensionSet=function(t,r){var n=r.size();var i=e.PrFactory.createStructure();i.putString("Name",t);var a=i.putNewList("Dimensions");for(var o=0;o<n;o++){a.add(e.PrFactory.createString(r.get(o)))}return i};e.QInAMdExceptionAggregationManager.prototype._exportExceptionAggregationGroup=function(t){var r=e.PrFactory.createStructure();r.putString("Name",t.getName());r.putString("SupportedDimensions",t._getSupportedDimensionSetName());r.putInteger("MaxNumberOfDimensions",t._getNumberOfAllowedDimensions());var n=e.PrFactory.createStructure();n.putInteger("MembersCode",t._getMembersCode());var i=n.putNewList("AggregationTypes");var a=t._getSupportedAggregationTypeNames();var o=a.size();for(var s=0;s<o;s++){i.add(e.PrFactory.createString(a.get(s)))}var l=r.putNewList("AggregationMap");l.add(n);return r};e.QInAMdField=function(){};e.QInAMdField.prototype=new e.QInAComponentMetadata;e.QInAMdField.prototype._ff_c="QInAMdField";e.QInAMdField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInAMdField.prototype.newModelComponent=function(t,r,n,i){return e.QField._createField(i,n,null)};e.QInAMdField.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=i;var l=r.getStringByKey("Name");var u=s.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION);if(u){var p;if(s.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){p=e.QFieldFormulaCalc._createFormulaCalcField(a,s,null,l);var g=r.getStructureByKey("Formula");if(e.notNull(g)){var c=e.QInAFormulaMeasure.importFormulaMeasure(t,s,r.getStructureByKey("Formula"),null,a);p.setFormulaItem(c)}}else{p=e.QFieldCalcDim._createFieldCalcDim(a,s,e.PresentationType.UNDEFINED,l)}this.updatePresentationType(t,r,p.getMetadataBase());this.updateValueType(r,p.getMetadataBase());s.getFieldContainerBase().addField(p);return p}o.setName(l);o.setText(r.getStringByKey("Description"));o.setObtainability(e.ObtainabilityType.lookup(r.getStringByKey("Obtainability")));o.setDisplayFormat(r.getStringByKey("DisplayFormat"));var m=r.getStringByKey("TextTransformation");if(e.notNull(m)){o.setTextTransformation(e.QInAConverter.lookupTextTransformation(m))}var y=r.getStringByKey("DimensionName");var d;if(e.notNull(t.m_cacheKey)){d=e.QCacheKey.createCopyExt(t.m_cacheKey,l,y,null)}else{d=e.QFactory.createCacheKeyForField(a,l,y)}var A=t.getApplication().getOlapEnvironment();var I=A.getFieldMetadataByKey(d);var S=a.getQueryModel();if(e.isNull(I)){I=e.QFieldMetadata.create(d);I.setAliasName(r.getStringByKey("AliasName"));I.setMappedColumnName(r.getStringByKeyExt("MappedColumn",null));I.setSqlType(r.getStringByKeyExt("SQLType",null));I.setSemanticType(r.getStringByKeyExt("SemanticType",null));var f=this.updateValueType(r,I);if(f===e.XValueType.UNSUPPORTED){var v=o.getDimension().getName();if(S.getUniversalDisplayHierarchies().getByName(v)!==null){I.setValueType(e.XValueType.STRING)}}if(!this.updatePresentationType(t,r,I)){return null}I.setUpperBound(r.getStringByKey("UpperBound"));I.setLowerBound(r.getStringByKey("LowerBound"));I.setIsFilterable(r.getBooleanByKeyExt("IsFilterable",true));I.setIsLowerCaseEnabled(r.getBooleanByKeyExt("LowerCaseEnabled",false));I.setIsVirtualDescription(r.getBooleanByKeyExt("IsVirtualDescription",false));I.setInitialValue(r.getStringByKeyExt("InitialValue",null));I.setLength(r.getIntegerByKeyExt("Length",0));I.setDecimals(r.getIntegerByKeyExt("Decimals",0));I.setFixedLength(r.getIntegerByKeyExt("FixedLength",-1));var C=r.getIntegerByKeyExt("FractDigits",0);if(C!==0){I.setPrecision(C)}I.setIsDisplayAttributeField(r.getBooleanByKeyExt("IsDisplayAttribute",false));I.setAttributeType(r.getStringByKeyExt("AttributeType",null));I.setNavigationalAttributeDescription(r.getStringByKeyExt("NavigationalAttributeDescription",null));this.importDependencies(r,I);var N=r.getStringByKey("UsageType");if(e.notNull(N)){I.setUsageType(e.FieldUsageType.lookup(N))}var E=r.getStringByKeyExt("InfoobjType",null);if(e.notNull(E)){var M=e.QInAConverter.lookupInfoObjectType(E);I.setInfoObjectType(M)}var h=r.getStringByKeyExt("VisibilityType",null);if(e.notNull(h)){var D=e.QInAConverter.lookupVisibilityType(h);I.setVisibilityType(D)}var T=s.getMetadataBase();I.setDimensionMetadata(T);var Q=T.getFilterCapabilitiesBase();var R=e.QInAMdFilterCapability.importMd(t,r,o,Q,a);if(e.notNull(R)){Q.addFilterCapability(R)}I.setMimeType(r.getStringByKey("MIMEType"));A.setFieldMetadata(I)}if(e.notNull(S)&&S.getSystemType().isTypeOf(e.SystemType.ABAP)){if(!this.updatePresentationType(t,r,I)){return null}}o.setMetadata(I);return o};e.QInAMdField.prototype.updateValueType=function(t,r){var n=t.getStringByKey("DataType");var i=e.QInAConverter.lookupValueType(n);r.setValueType(i);return i};e.QInAMdField.prototype.updatePresentationType=function(t,r,n){var i=r.getStringByKey("PresentationType");var a=e.QInAConverter.lookupPresentationType(i);if(a===e.PresentationType.WHY_FOUND&&e.QInAConverter.lookupValueType(r.getStringByKey("DataType"))!==e.XValueType.PROPERTIES){t.addError(e.ErrorCodes.INVALID_STATE,"Why found has not properties type");return false}else{n.setPresentationType(a);return true}};e.QInAMdField.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("Name",a.getName());n.putString("AliasName",a.getAliasName());n.putString("Description",a.getText());n.putString("DataType",e.QInAConverter.lookupValueTypeInA(a.getValueType()));n.putString("PresentationType",e.QInAConverter.lookupPresentationTypeInA(a.getPresentationType()));var o=a.getObtainability();n.putString("Obtainability",e.isNull(o)?null:o.getName());n.putBoolean("IsFilterable",a.isFilterable());n.putBoolean("IsVirtualDescription",a.isVirtualDescription());n.putBoolean("LowerCaseEnabled",a.isLowerCaseEnabled());n.putString("InitialValue",a.getInitialValue());n.putInteger("Length",a.getLength());n.putInteger("Decimals",a.getDecimals());n.putBoolean("IsDisplayAttribute",a.isDisplayAttributeField());n.putString("MappedColumn",a.getMappedColumnName());n.putString("AttributeType",a.getAttributeType());n.putString("NavigationalAttributeDescription",a.getNavigationalAttributeDescription());n.putStringNotNull("SQLType",a.getSqlType());n.putStringNotNull("SemanticType",a.getSemanticType());n.putString("UsageType",a.getUsageType().getName());n.putStringNotNull("LowerBound",a.getLowerBound());n.putStringNotNull("UpperBound",a.getUpperBound());if(a.getPrecision()!==0){n.putInteger("FractDigits",a.getPrecision())}var s=a.getInfoObjectType();if(e.notNull(s)){n.putString("InfoobjType",e.QInAConverter.lookupInfoObjectTypeInA(s))}var l=a.getVisibilityType();if(e.notNull(l)){n.putString("VisibilityType",e.QInAConverter.lookupVisibilityTypeInA(l))}var u=a.getTextTransformation();if(e.notNull(u)){n.putString("TextTransformation",e.QInAConverter.lookupTextTransformationInA(u))}if(!t.mode.isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)){n.putStringNotNull("DisplayFormat",a.getDisplayFormat())}n.putStringNotNull("MIMEType",a.getMimeType());if(a.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var p=a;if(p.getFormulaItem()!==null){e.QInAFormulaMeasure.exportFormulaItem(t,p.getFormulaItem(),n.putNewStructure("Formula"),p.getQueryModel())}}var g=n.putNewList("DependentAttributes");g.addAllStrings(a.getDependencyFields());var c=a.getDimension().getFilterCapabilities();var m=c.getFilterCapabilitiesByField(a);e.QInAMdFilterCapability.exportMd(t,m,n,a.getQueryModel());return n};e.QInAMdField.prototype.importDependencies=function(t,r){if(e.notNull(t)){var n=t.getListByKey("DependentAttributes");if(e.notNull(n)){var i=n.size();for(var a=0;a<i;a++){var o=n.getStringAt(a);if(e.notNull(o)){r.addDependencyField(o)}}}}};e.QInAMdFieldsAttributes=function(){};e.QInAMdFieldsAttributes.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsAttributes.prototype._ff_c="QInAMdFieldsAttributes";e.QInAMdFieldsAttributes.importMd=function(t,r){var n=t.getUniversalDisplayHierarchy();var i=e.isNull(n)?r.getStructureByKey("AttributeHierarchy"):r;if(e.notNull(i)){var a=e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(i,t,n);if(e.notNull(a)){t.getMetadataBase().addSupportedFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED);t.getAttributeContainerBase().setMainAttribute(a)}}};e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode=function(t,r,n){if(e.isNull(t)){return null}var i=e.QAttribute.createAttribute(r.getContext(),r);i.setName(t.getStringByKey("Name"));i.setText(t.getStringByKey("Description"));var a=r.getFields();var o=a.getByKey(t.getStringByKey("DefaultKeyAttribute"));if(e.notNull(n)){o=n.getKeyField(r,t.getListByKey("Attributes"),"IsKey","Name")}if(e.notNull(o)){i.setFlatKeyField(o)}var s=a.getByKey(t.getStringByKey("DefaultDisplayKeyAttribute"));if(e.notNull(n)){s=n.getDisplayKeyField(r)}if(e.notNull(s)){i.setFlatDisplayKeyField(s)}var l=a.getByKey(t.getStringByKey("DefaultTextAttribute"));if(e.notNull(n)){l=n.getTextField(r)}if(e.notNull(l)){i.setFlatTextField(l)}var u=a.getByKey(t.getStringByKey("DefaultResultTextAttribute"));if(e.notNull(u)){i.setDefaultResultSetTextField(u)}var p=a.getByKey(t.getStringByKey("HierarchyKeyAttribute"));if(e.notNull(p)){i.setHierachyKeyField(p);e.QInAMdFieldsAttributes.setFieldUsage(o,p)}var g=a.getByKey(t.getStringByKey("HierarchyDisplayKeyAttribute"));if(e.notNull(g)){i.setHierarchyDisplayKeyField(g);e.QInAMdFieldsAttributes.setFieldUsage(s,g)}var c=a.getByKey(t.getStringByKey("HierarchyTextAttribute"));if(e.notNull(c)){i.setHierarchyTextField(c);e.QInAMdFieldsAttributes.setFieldUsage(l,c)}var m=a.getByKey(t.getStringByKey("HierarchyNavigationAttribute"));if(e.notNull(m)){i.setHierachyNavigationField(m);e.QInAMdFieldsAttributes.setFieldUsage(null,m)}e.QInAMdFieldsAttributes.importAttributeFields(i,a,t);r.getAttributeContainerBase().addAttributeInternal(i);var y=t.getListByKey("Children");if(e.notNull(y)){var d=y.size();for(var A=0;A<d;A++){var I=e.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(y.getStructureAt(A),r,n);i.addChildAttribute(I)}}return i};e.QInAMdFieldsAttributes.setFieldUsage=function(t,r){if(r!==t){if(e.notNull(t)){t.getMetadataBase().setUsageType(e.FieldUsageType.FLAT)}if(e.notNull(r)){r.getMetadataBase().setUsageType(e.FieldUsageType.HIERARCHY)}}else{if(e.notNull(t)){t.getMetadataBase().setUsageType(e.FieldUsageType.ALL)}}};e.QInAMdFieldsAttributes.importAttributeFields=function(t,r,n){var i=n.getListByKey("AttributeNames");var a=n.getListByKey("DefaultResultSetAttributes");if(e.notNull(i)&&e.notNull(a)){var o=i.size();var s;var l;for(s=0;s<o;s++){l=r.getByKey(i.getStringAt(s));if(e.notNull(l)){t.addFieldInternal(l)}}o=a.size();var u=e.XHashSetOfString.create();for(s=0;s<o;s++){var p=a.getStringAt(s);if(!u.contains(p)){u.add(p);l=t.getFieldByName(p);if(e.notNull(l)){t.addDefaultResultSetField(l)}}}}};e.QInAMdFieldsAttributes.exportMd=function(t,r){var n=r.getAttributeContainer();var i=n.getMainAttribute();if(e.notNull(i)){var a=t.putNewStructure("AttributeHierarchy");e.QInAMdFieldsAttributes.exportMdAttribute(i,a)}t.putString("FieldLayoutType",e.QInAConverter.lookupFieldLayoutTypeInA(r.getFieldLayoutType()))};e.QInAMdFieldsAttributes.exportMdAttribute=function(t,r){r.putString("Name",t.getName());r.putString("Description",t.getText());var n=t.getKeyField();e.QInAExportUtil.setNameIfNotNull(r,"DefaultKeyAttribute",n);var i=t.getTextField();e.QInAExportUtil.setNameIfNotNull(r,"DefaultTextAttribute",i);var a=t.getDefaultResultSetTextField();e.QInAExportUtil.setNameIfNotNull(r,"DefaultResultTextAttribute",a);r.put("AttributeNames",e.QInAMdFieldsAttributes.exportFieldNames(t.getFields()));r.put("DefaultResultSetAttributes",e.QInAMdFieldsAttributes.exportFieldNames(t.getResultSetFields()));var o=t.getChildAttributes();var s=r.putNewList("Children");if(e.notNull(o)){var l=o.size();for(var u=0;u<l;u++){e.QInAMdFieldsAttributes.exportMdAttribute(o.get(u),s.addNewStructure())}}};e.QInAMdFieldsAttributes.exportFieldNames=function(t){var r=e.PrFactory.createList();var n=t.size();for(var i=0;i<n;i++){r.addString(t.get(i).getName())}return r};e.QInAMdFieldsAttributes.prototype.getComponentType=function(){return null};e.QInAMdFieldsAttributes.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdFieldsAttributes.importMd(o,r);return n};e.QInAMdFieldsAttributes.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdFieldsAttributes.exportMd(n,r);return n};e.QInAMdFieldsList=function(){};e.QInAMdFieldsList.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsList.prototype._ff_c="QInAMdFieldsList";e.QInAMdFieldsList.importMd=function(t,r,n){var i=r.getListByKey("AttributesMd");if(e.isNull(i)){i=r.getListByKey("Attributes")}if(e.isNull(i)){e.QInAMdFieldsList.tryImportFromAttributeHierarchy(r,n)}else{var a=i.size();var o=n.getFieldContainerBase();for(var s=0;s<a;s++){var l=i.getStructureAt(s);var u=t.importComponent(e.OlapComponentType.FIELD,l,null,n,n);if(e.notNull(u)){o.addFieldInternal(u)}}}};e.QInAMdFieldsList.tryImportFromAttributeHierarchy=function(t,r){if(!r.getQueryManager().getInitSettings().isLightweight()){return}var n=t.getStructureByKey("AttributeHierarchy");if(e.isNull(n)){return}var i=r.getFieldContainerBase();var a=n.getListByKey("AttributeNames");for(var o=0;o<a.size();o++){var s=a.getStringAt(o);var l=e.XStringTokenizer.splitString(s,".");if(!e.XCollectionUtils.hasElements(l)){continue}var u=l.get(l.size()-1);var p;switch(u){case"KEY":p=e.PresentationType.KEY;if(l.size()>=3&&e.XString.isEqual(l.get(1),"$$HierarchyField$$")){p=e.PresentationType.HIERARCHY_KEY}break;case"DISPLAY_KEY":p=e.PresentationType.DISPLAY_KEY;break;case"SHORT_TEXT":p=e.PresentationType.SHORT_TEXT;break;case"MEDIUM_TEXT":p=e.PresentationType.MEDIUM_TEXT;break;case"LONG_TEXT":p=e.PresentationType.LONG_TEXT;break;default:continue}var g=e.XValueType.STRING;if(p.isTypeOf(e.PresentationType.KEY)){if(r.getDimensionType()===e.DimensionType.TIME){g=e.XValueType.TIME}else if(r.getDimensionType()===e.DimensionType.DATE){g=e.XValueType.DATE}}var c=e.QFieldMetadata.create(e.QFactory.createCacheKeyForField(r,s,r.getName()));c.setValueType(g);c.setPresentationType(p);c.setIsFlatKeyField(p===e.PresentationType.KEY);c.setIsHierarchyKeyField(p===e.PresentationType.HIERARCHY_KEY);c.setIsFilterable(p.isTypeOf(e.PresentationType.ABSTRACT_KEY));c.setDimensionMetadata(r.getMetadataBase());var m=e.QFactory.createField(r,s);m.setMetadata(c);m.setDimension(r);i.addField(m)}};e.QInAMdFieldsList.exportMd=function(t,r,n){var i=e.PrFactory.createList();var a=n.getFields();var o=a.size();for(var s=0;s<o;s++){i.add(t.exportComponent(e.OlapComponentType.FIELD,a.get(s),null,e.QImExFlag.DEFAULT_ALL))}r.put("AttributesMd",i)};e.QInAMdFieldsList.prototype.getComponentType=function(){return null};e.QInAMdFieldsList.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdFieldsList.importMd(t,r,o);return n};e.QInAMdFieldsList.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdFieldsList.exportMd(t,n,r);return n};e.QInAMdFieldsResultSet=function(){};e.QInAMdFieldsResultSet.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsResultSet.prototype._ff_c="QInAMdFieldsResultSet";e.QInAMdFieldsResultSet.importMd=function(t,r,n){var i=r.getListByKey("DefaultResultSetAttributesMd");if(e.isNull(i)){i=r.getListByKey("DefaultResultSetAttributes")}var a=r.getListByKey("DefaultResultSetAttributeNodesMd");if(e.isNull(a)){a=r.getListByKey("DefaultResultSetAttributeNodes")}var o=r.getStringByKey("FieldLayoutType");var s=null;if(e.notNull(o)){s=e.QInAConverter.lookupFieldLayoutType(o)}if(e.isNull(s)){if(e.notNull(a)&&n.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){s=e.FieldLayoutType.ATTRIBUTE_BASED}else{s=e.FieldLayoutType.FIELD_BASED}}n.setFieldLayoutType(s);n.getMetadataBase().setDefaultFieldLayoutType(s);var l=n.getResultSetFields();var u=n.getSelectorFields();var p=n.getFieldContainerBase();if(e.notNull(i)){var g=e.XHashSetOfString.create();var c=i.size();for(var m=0;m<c;m++){var y=i.getStringAt(m);if(g.contains(y)){continue}g.add(y);var d=n.getFieldByName(y);if(e.isNull(d)){t.addError(e.ErrorCodes.INVALID_PARAMETER,y);return}p.addDefaultResultSetField(d);l.addInternal(d);u.addInternal(d)}}if(e.notNull(a)){if(n.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){var A=n.getAttributeContainerBase();var I=A.getMainAttribute();if(e.notNull(I)){var S=A.getResultSetAttributes();var f=A.getSelectorAttributes();if(s===e.FieldLayoutType.ATTRIBUTE_BASED){l.clear();u.clear()}var v=a.size();for(var C=0;C<v;C++){var N=A.getAttributeByName(a.getStringAt(C));if(e.notNull(N)){A.addDefaultResultSetAttribute(N);S.add(N);f.add(N);if(s===e.FieldLayoutType.ATTRIBUTE_BASED){var E=N.getResultSetFields();var M=E.size();for(var h=0;h<M;h++){var D=E.get(h);l.add(D);u.add(D)}}}}}}}var T=r.getBooleanByKeyExt("ResultSetFixedAttributes",false);p.setHasFixedResultSetFields(T);l.setIsFixed(T);u.setIsFixed(T);if(!r.containsKey("FieldLayoutType")){if(r.containsKey("DefaultResultSetAttributes")){p.clearDefaultResultSetFields()}else if(!r.containsKey("ResultSetFields")){if(n.supportsFieldLayoutType(e.FieldLayoutType.FIELD_BASED)){n.setFieldLayoutType(e.FieldLayoutType.FIELD_BASED);n.getMetadataBase().setDefaultFieldLayoutType(e.FieldLayoutType.FIELD_BASED);p.clearDefaultResultSetFields();var Q=n.getResultSetFields();var R=Q.size();for(var _=0;_<R;_++){p.addDefaultResultSetField(Q.get(_))}}}}};e.QInAMdFieldsResultSet.exportMd=function(t,r){var n=t.putNewList("DefaultResultSetAttributesMd");var i=r.getDefaultResultSetFields();var a=i.size();for(var o=0;o<a;o++){n.addString(i.get(o).getName())}if(r.supportsFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED)){var s=r.getAttributeContainer();var l=s.getDefaultResultSetAttributes();var u=t.putNewList("DefaultResultSetAttributeNodesMd");var p=l.size();for(var g=0;g<p;g++){u.addString(l.get(g).getName())}}t.putBoolean("ResultSetFixedAttributes",r.hasFixedResultSetFields())};e.QInAMdFieldsResultSet.prototype.getComponentType=function(){return null};e.QInAMdFieldsResultSet.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdFieldsResultSet.importMd(t,r,o);return n};e.QInAMdFieldsResultSet.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdFieldsResultSet.exportMd(n,r);return n};e.QInAMdFieldsRoles=function(){};e.QInAMdFieldsRoles.prototype=new e.QInAComponentMetadata;e.QInAMdFieldsRoles.prototype._ff_c="QInAMdFieldsRoles";e.QInAMdFieldsRoles.getFieldBySuffix=function(t,r){var n=r.getFields();var i=n.size();for(var a=0;a<i;a++){var o=n.get(a);var s=e.XString.endsWith(o.getName(),t);if(s){return o}}return null};e.QInAMdFieldsRoles.importMd=function(t,r,n){var i=r.getStructureByKey("FieldDefaults");var a=e.isNull(i)?r:i;var o=n.getFieldByName(a.getStringByKey("KeyAttribute"));var s=n.getFieldByName(a.getStringByKey("TextAttribute"));var l=n.getFieldByName(a.getStringByKey("DisplayKeyAttribute"));var u=n.getFieldByName(a.getStringByKey("HierarchyKeyAttribute"));var p=n.getFieldByName(a.getStringByKey("HierarchyTextAttribute"));var g=n.getFieldByName(a.getStringByKey("HierarchyDisplayKeyAttribute"));var c=n.getFieldByName(a.getStringByKey("HierarchyPathAttribute"));var m=n.getFieldByName(a.getStringByKey("HierarchyNavigationAttribute"));var y=n.getFieldByName(a.getStringByKey("NamePathAttribute"));var d=n.getFieldByName(a.getStringByKey("DefaultResultTextAttribute"));if(e.isNull(m)){var A=a.getStructureByKey("AttributeHierarchy");if(e.notNull(A)){m=n.getFieldByName(A.getStringByKey("HierarchyNavigationAttribute"))}}var I=n.getFieldContainerBase();if(t.capabilities.supportsSpatialChoropleth()){I.setGeoShapeField(n.getFieldByName(a.getStringByKey("GeoShapeAttribute")));I.setGeoPointField(n.getFieldByName(a.getStringByKey("GeoPointAttribute")));I.setGeoLevelField(n.getFieldByName(a.getStringByKey("GeoLevelAttribute")));I.setGeoAreaNameField(n.getFieldByName(a.getStringByKey("TextAttribute")))}var S=null;if(e.isNull(i)){if(e.isNull(c)){if(!t.capabilities.supportsHierarchyPathPresentationType()){c=e.QInAMdFieldsRoles.getFieldBySuffix(".path",n)}else{c=n.getFirstFieldByType(e.PresentationType.HIERARCHY_PATH)}}if(t.capabilities.supportsCubeBlendingProperties()){S=e.QInAMdFieldsRoles.getFieldBySuffix(".cubeBlendingProperties",n)}var f=n.getAttributeContainer();var v=f.getMainAttribute();if(e.notNull(v)){o=v.getKeyField();l=v.getDisplayKeyField();s=v.getTextField();d=v.getDefaultResultSetTextField();if(t.capabilities.supportsHierarchyAttHierFields()){u=v.getHierarchyKeyField();p=v.getHierarchyTextField();g=v.getHierarchyDisplayKeyField()}}if(n.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){if(e.isNull(o)){o=n.getFirstFieldByType(e.PresentationType.KEY)}if(e.isNull(l)){l=n.getFirstFieldByType(e.PresentationType.DISPLAY_KEY)}if(e.isNull(s)){s=n.getFirstFieldByType(e.PresentationType.TEXT)}if(e.isNull(u)){var C=n.getFirstFieldByType(e.PresentationType.HIERARCHY_KEY);if(e.isNull(C)){u=o}else{u=C}}if(e.isNull(p)){p=n.getFirstFieldByType(e.PresentationType.HIERARCHY_TEXT)}if(e.isNull(g)){g=n.getFirstFieldByType(e.PresentationType.HIERARCHY_DISPLAY_KEY)}if(e.isNull(p)){p=s}if(e.isNull(g)){g=l}}if(e.isNull(y)){y=n.getFirstFieldByType(e.PresentationType.NAME_PATH)}var N=n.getUniversalDisplayHierarchy();if(e.notNull(N)){o=N.getKeyField(n,r.getListByKey("Attributes"),"IsKey","Name");l=N.getDisplayKeyField(n);s=N.getTextField(n)}}if(e.notNull(o)){o.getMetadataBase().setIsFlatKeyField(true)}if(e.notNull(s)){s.getMetadataBase().setIsFlatTextField(true)}if(e.notNull(c)){c.getMetadataBase().setIsHierarchyPathField(true)}if(e.notNull(u)){u.getMetadataBase().setIsHierarchyKeyField(true)}if(e.notNull(S)){S.getMetadataBase().setIsCubeBlendingPropertiesField(true)}if(e.notNull(m)){m.getMetadataBase().setIsHierarchyNavigationField(true)}if(e.notNull(y)){y.getMetadataBase().setIsNamePathField(true)}I.setFlatKeyField(o);I.setFlatTextField(s);I.setFlatDisplayKeyField(l);I.setHierachyKeyField(u);I.setHierarchyTextField(p);I.setHierarchyDisplayKeyField(g);I.setHierarchyPathField(c);I.setHierachyNavigationField(m);I.setNamePathField(y);I.setCubeBlendingPropertiesField(S);I.setDefaultResultSetTextField(d)};e.QInAMdFieldsRoles.exportMd=function(t,r){var n=t.putNewStructure("FieldDefaults");e.QInAExportUtil.setNameIfNotNull(n,"KeyAttribute",r.getFlatKeyField());e.QInAExportUtil.setNameIfNotNull(n,"TextAttribute",r.getFlatTextField());e.QInAExportUtil.setNameIfNotNull(n,"DisplayKeyAttribute",r.getFlatDisplayKeyField());e.QInAExportUtil.setNameIfNotNull(n,"HierarchyKeyAttribute",r.getHierarchyKeyField());e.QInAExportUtil.setNameIfNotNull(n,"HierarchyTextAttribute",r.getHierarchyTextField());e.QInAExportUtil.setNameIfNotNull(n,"HierarchyDisplayKeyAttribute",r.getHierarchyDisplayKeyField());e.QInAExportUtil.setNameIfNotNull(n,"HierarchyPathAttribute",r.getHierarchyPathField());e.QInAExportUtil.setNameIfNotNull(n,"HierarchyNavigationAttribute",r.getHierarchyNavigationField());e.QInAExportUtil.setNameIfNotNull(n,"NamePathAttribute",r.getNamePathField());e.QInAExportUtil.setNameIfNotNull(n,"GeoShapeAttribute",r.getGeoShapeField());e.QInAExportUtil.setNameIfNotNull(n,"GeoPointAttribute",r.getGeoPointField());e.QInAExportUtil.setNameIfNotNull(n,"GeoLevelAttribute",r.getGeoLevelField());e.QInAExportUtil.setNameIfNotNull(n,"TextAttribute",r.getGeoAreaNameField());e.QInAExportUtil.setNameIfNotNull(n,"DefaultResultTextAttribute",r.getDefaultResultSetTextField())};e.QInAMdFieldsRoles.prototype.getComponentType=function(){return null};e.QInAMdFieldsRoles.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdFieldsRoles.importMd(t,r,n);return n};e.QInAMdFieldsRoles.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdFieldsRoles.exportMd(n,r);return n};e.QInAMdFilterCapability=function(){};e.QInAMdFilterCapability.prototype=new e.QInAComponentMetadata;e.QInAMdFilterCapability.prototype._ff_c="QInAMdFilterCapability";e.QInAMdFilterCapability.importMd=function(t,r,n,i,a){var o=r.getStructureByKey("FilterCapability");var s;if(e.isNull(o)){s=r.getStringByKeyExt("ComparisonGroup",null)}else{s=o.getStringByKeyExt("ComparisonGroup",null)}var l=null;if(e.notNull(s)){var u=e.QFilterCapabilityGroup._createFilterCapabilityGroup(a,i,n);u.setGroup(e.QInAConverter.lookupComparisonGroup(s));l=u}else if(e.notNull(o)&&o.hasElements()){var p=o.getStructureByKey("Comparison");if(e.isNull(p)){var g=e.XStringBuffer.create();g.append("Metadata warning: No filter capability found for field ");if(e.notNull(n)){g.append(n.getName())}t.addWarning(e.ErrorCodes.IMPORT_FILTER_CAPABILITY_NOT_FOUND,g.toString())}else{var c=e.QFilterCapability._createFilterCapability(a,i,n);l=c;e.QInAMdFilterCapability.importOperators(t,p,c,"Including",e.SetSign.INCLUDING);e.QInAMdFilterCapability.importOperators(t,p,c,"Excluding",e.SetSign.EXCLUDING)}}return l};e.QInAMdFilterCapability.importOperators=function(t,r,n,i,a){var o=r.getListByKey(i);if(!e.PrUtils.isListEmpty(o)){n.addSupportedSetSign(a);var s=n.getModifiableSupportedComparisonOperators(a);var l=o.size();for(var u=0;u<l;u++){var p=o.getStringAt(u);if(e.notNull(p)){var g=e.QInAConverter.lookupComparison(p);if(e.isNull(g)){t.addWarning(e.ErrorCodes.IMPORT_FILTER_CAPABILITY_UNSUPPORTED_OPERATORS,e.XStringUtils.concatenate3("Metadata warning: Unsupported Comparison Operator '",p,"'!"))}else{s.add(g)}}}}};e.QInAMdFilterCapability.updateFilterCapabilities=function(t){var r=t.getHierarchyKeyField();if(e.notNull(r)&&!r.isFlatKeyField()){var n=t.getFilterCapabilities().getFilterCapabilitiesByField(r);if(e.notNull(n)&&n.isFilterCapabilityGroup()){var i=n;i.setGroup(e.QInAConverter.switchComparisonGroupToIncludeOnly(i.getGroup()))}}};e.QInAMdFilterCapability.exportMd=function(t,r,n,i){var a=e.PrFactory.createStructure();if(e.notNull(r)){if(r.getComponentType().isTypeOf(e.OlapComponentType.FILTER_CAPABILITY_GROUP)){var o=r;var s=e.QInAConverter.lookupComparisonGroupInA(o.getGroup());a.putString("ComparisonGroup",s)}else{var l=t.isAbap(i);var u=a.putNewStructure("Comparison");e.QInAMdFilterCapability.exportOperators(l,u,r,"Including",e.SetSign.INCLUDING);e.QInAMdFilterCapability.exportOperators(l,u,r,"Excluding",e.SetSign.EXCLUDING)}}if(e.notNull(n)){n.put("FilterCapability",a)}return a};e.QInAMdFilterCapability.exportOperators=function(t,r,n,i,a){if(n.supportsSetSign(a)){var o=r.putNewList(i);var s=n.getSupportedComparisonOperators(a);var l=s.size();for(var u=0;u<l;u++){var p=s.get(u);var g;if(p===e.ComparisonOperator.NOT_BETWEEN&&t){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(p)}o.addString(g)}}};e.QInAMdFilterCapability.prototype.getComponentType=function(){return null};e.QInAMdFilterCapability.prototype.importComponentWithStructure=function(t,r,n,i,a){return e.QInAMdFilterCapability.importMd(t,r,i,null,a)};e.QInAMdFilterCapability.prototype.exportComponentWithStructure=function(t,r,n,i){return e.QInAMdFilterCapability.exportMd(t,r,n,r.getQueryModel())};e.QInAMdGenericComponent=function(){};e.QInAMdGenericComponent.prototype=new e.QInAComponentMetadata;e.QInAMdGenericComponent.prototype._ff_c="QInAMdGenericComponent";e.QInAMdGenericComponent.prototype.getComponentType=function(){return e.OlapComponentType.OLAP};e.QInAMdGenericComponent.prototype.importComponentWithStructure=function(e,t,r,n,i){return r};e.QInAMdGenericComponent.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;r.putString("Name",i.getName());r.putString("Type",t.getComponentType().getName());return r};e.QInAMdGenericComponent.prototype.extendCustom=function(t,r,n){var i=r.getOlapComponentType();var a=e.QInAConverter.lookupComponentTypeInA(i);if(e.notNull(a)){n.putString("CType",a)}return n};e.QInAMdHierarchy=function(){};e.QInAMdHierarchy.prototype=new e.QInAComponentMetadata;e.QInAMdHierarchy.prototype._ff_c="QInAMdHierarchy";e.QInAMdHierarchy.importMdHierarchy=function(t,r,n){var i=n.getHierarchyManagerBase();var a=e.PrUtils.getBooleanValueProperty(r,"HierarchiesPossible",false);i.setSupportsHierarchy(a);var o=e.PrUtils.getBooleanValueProperty(r,"HasExternalHierarchies",false);i.setHasExternalHierarchies(o);var s=e.PrUtils.getStringValueProperty(r,"DefaultHierarchy","");var l=e.PrUtils.getBooleanValueProperty(r,"DisplayHierarchyFixInFilter",false);i.setDefaultHierarchyName(s);i.setNumberOfHierarchies(e.PrUtils.getIntegerValueProperty(r,"NumberOfHierarchies",0));e.QInAMdHierarchy.importMdHierarchyForAutoSubmit(t,r,n);if(t.getSession().hasFeature(e.FeatureToggleOlap.ACTIVATE_DEFAULT_HIERARCHY)){if(a&&e.XStringUtils.isNotNullAndNotEmpty(s)){i.setHierarchyName(s);i.setHierarchyActive(true)}}i.setDisplayHierarchyFixInFilter(l);var u=e.PrUtils.getListProperty(r,"LevelHierarchies");var p=n.getModelCapabilities();if(e.notNull(p)){if(p.supportsDimensionHierarchyLevels()){e.QInAMdHierarchy.importLevelHierarchyDetails(t,n,u)}if(p.supportsSpatialChoropleth()){var g=e.PrUtils.getListProperty(r,"GeoShapeHierarchies");if(!e.PrUtils.isListEmpty(g)){var c=i.getGeoShapeHierarchiesBase();e.QInAMdHierarchy.importEachLeveledHierarchy(t,n,g,c)}}if(!p.supportsHierarchyMetadata()){return}}var m=e.PrUtils.getListProperty(r,"Hierarchies");var y=e.QFactory.createHierarchyCatalogResult();e.QInAMdHierarchy.appendItemsToCatalogResult(y,m,n.getName());i.setHierarchies(y);if(e.notNull(m)){e.QInAMdHierarchy.importLevelHierarchyDetails(t,n,m)}};e.QInAMdHierarchy.importMdHierarchyForAutoSubmit=function(t,r,n){var i=r.getStructureByKey("Hierarchy");var a=n.getQueryManager();if(e.notNull(i)&&n.supportsHierarchy()&&e.notNull(a)&&a.getModelCapabilities().supportsAutoVariableSubmit()&&a.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP){var o=n.isDisplayHierarchyFixInFilter();n.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);var s=i.getStringByKey("NameIs");var l=e.notNull(s)&&e.XString.isEqual("Variable",s);var u=l&&e.QInAMdHierarchy.isMetadataWithAutoSubmitCapability(t,a);var p=e.QInAMdHierarchy.importHierarchyName(t,i,n,l);var g=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)){if(i.getBooleanByKey("IsTransient")){g=e.QHierarchy.createCustomHierarchy(n.getContext(),n,p,i.getStringByKey("Description"))}else if(!u){g=e.QHierarchy.create(n.getContext(),n,p)}e.QInAMdHierarchy.importHierarchyDueDate(i,n,g,t.capabilities.supportsSapDate());e.QInAMdHierarchy.importHierarchyVersion(i,n,g);if(!u){n.setHierarchy(g);var c=i.getBooleanByKeyExt("HierarchyActive",true);n.setHierarchyActive(c);n.setSelectorHierarchyActive(c)}e.QInAMdHierarchy.importHierarchyDrillInfo(t,i,n);n.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(o)}}};e.QInAMdHierarchy.isMetadataWithAutoSubmitCapability=function(t,r){return t.getOriginalMode()===e.QModelFormat.INA_METADATA||t.getMode()===e.QModelFormat.INA_METADATA&&e.notNull(r)&&r.getModelCapabilities().supportsAutoVariableSubmit()&&r.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP};e.QInAMdHierarchy.importHierarchyName=function(t,r,n,i){var a;if(r.hasStringByKey("Name")){a=r.getStringByKey("Name")}else{a=r.getStringByKey("HierarchyName")}n.setUseHierarchyNameVariable(i);var o=i&&e.QInAMdHierarchy.isMetadataWithAutoSubmitCapability(t,n.getQueryManager());if(o){n.setHierarchyNameVariableName(a)}return a};e.QInAMdHierarchy.importHierarchyDueDate=function(t,r,n,i){var a=t.getStringByKey("DueDateIs");var o=e.notNull(a)&&e.XString.isEqual("Variable",a);var s=t.getStringByKey("DueDate");r.setUseHierarchyDueDateVariable(o);if(o){r.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(s)?null:s)}else if(e.notNull(n)){n.setHierarchyDueDate(e.XDate.createDateFromStringWithFlag(s,i))}};e.QInAMdHierarchy.importHierarchyVersion=function(t,r,n){var i=t.getStringByKey("VersionIs");var a=e.notNull(i)&&e.XString.isEqual("Variable",i);var o=t.getStringByKey("Version");r.setUseHierarchyVersionVariable(a);if(a){r.setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(o)?null:o)}else if(e.notNull(n)){n.setHierarchyVersion(o)}};e.QInAMdHierarchy.importHierarchyDrillInfo=function(t,r,n){var i=r.getIntegerByKeyExt("InitialDrillOffset",0);var a=r.getIntegerByKeyExt("InitialDrillLevel",0);var o=n.getModelCapabilities();if(o.supportsVisibilityFilter()||!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){n.setInitialDrillLevel(a);n.setSelectorInitialDrillLevel(a)}else{if(a===-1){n.setInitialDrillLevel(a);n.setSelectorInitialDrillLevel(a)}else if(i===-1){n.setInitialDrillLevel(0);n.setSelectorInitialDrillLevel(0)}else{n.setInitialDrillLevel(a+i);n.setSelectorInitialDrillLevel(a+i)}}n.setInitialDrillOffset(i);n.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var s=e.Alignment.DEFAULT_VALUE;if(o.supportsExpandBottomUp()){var l=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");s=e.QInAConverter.lookupLowerLevelNodeAlignment(l);if(r.containsKey("ExpandBottomUp")){var u=r.getBooleanByKeyExt("ExpandBottomUp",false);if(u){s=e.Alignment.CHILDREN_ABOVE_PARENT}}}n.setLowerLevelNodeAlignment(s);var p=r.getBooleanByKeyExt("NodeCondensation",false);n.setHasNodeCondensation(p);var g=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var c=e.QInAConverter.lookupResultSetVisibility(g);n.setMemberOfPostedNodeVisibility(c);if(o.supportsMaxDrillLevel()){var m=r.getIntegerByKeyExt("MaxDrillLevel",-1);n.getHierarchyManager().setMaxDrillLevel(m);var y=r.getIntegerByKeyExt("MaxRuntimeLevel",-1);n.getHierarchyManager().setMaxRuntimeLevel(y)}};e.QInAMdHierarchy.appendItemsToCatalogResult=function(t,r,n){var i=e.PrUtils.getListSize(r,0);for(var a=0;a<i;a++){var o=e.PrUtils.getStructureElement(r,a);var s=e.HierarchyCatalogItem.createCatalogItem();s.setDimensionName(n);var l;if(o.hasStringByKey("Name")){l=o.getStringByKey("Name")}else{l=o.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(l)||t.containsHierarchy(l)){continue}s.setHierarchyName(l);var u=e.PrUtils.getStringProperty(o,"Description");if(e.notNull(u)){s.setHierarchyLongText(u.getString())}var p=e.PrUtils.getStringProperty(o,"Version");if(e.notNull(p)){s.setVersionName(p.getString())}var g=e.PrUtils.getStringProperty(o,"Structure");if(e.notNull(g)){s.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var c=e.PrUtils.getBooleanValueProperty(o,"IsModeled",false);s.setIsModeled(c);var m=e.PrUtils.getStringProperty(o,"DateTo");if(e.notNull(m)){var y=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(y)){s.setDateTo(e.XDate.createDateFromIsoFormat(y))}}var d=e.PrUtils.getListProperty(o,"Levels");if(e.notNull(d)){s.setSupportsHierarchyLevels(true);var A=e.XList.create();var I=e.PrUtils.getListSize(d,0);for(var S=0;S<I;S++){var f=e.PrUtils.getStructureElement(d,S);if(e.isNull(f)){continue}var v=e.HierarchyCatalogLevel.createCatalogLevel();var C=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(C>-1){v.setLevel(C)}var N=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(N)){v.setLevelName(N.getString())}var E=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(E)){v.setLevelDescription(E.getString())}var M=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(M)){v.setLevelUniqueName(M.getString())}var h=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(h)){v.setLevelDimensionName(h.getString())}var D=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(D)){v.setLevelType(e.QInAConverter.lookupHierarchyLevelType(D.getInteger()))}A.add(v)}s.setHierarchyLevels(A)}var T=o.getStringByKey("RestNode");if(e.notNull(T)){s.setRestNode(T)}var Q=o.getStringByKey("VirtualRootNode");if(e.notNull(Q)){s.setVirtualRootNode(Q)}t.addItem(s)}return t};e.QInAMdHierarchy.importLevelHierarchyDetails=function(t,r,n){if(!e.PrUtils.isListEmpty(n)){var i=r.getQueryModelBase().getQueryManagerBase().getMetadataModelBase();var a=i.getLeveledHierarchiesBase();e.QInAMdHierarchy.importEachLeveledHierarchy(t,r,n,a)}};e.QInAMdHierarchy.importEachLeveledHierarchy=function(t,r,n,i){var a=n.size();for(var o=0;o<a;o++){var s=e.QInAMdHierarchy.importLeveledHierarchy(t,r.getContext(),r,n.getStructureAt(o));if(!i.contains(s)){i.add(s)}}};e.QInAMdHierarchy.importLeveledHierarchy=function(t,r,n,i){var a=e.QLeveledHierarchy.create(r,n,i.getStringByKey(i.containsKey("Name")?"Name":"HierarchyName"));a.setHierarchyUniqueName(i.getStringByKey("UniqueName"));if(i.getStringByKey("DimensionName")===null){a.setDimensionName(n.getName())}else{a.setDimensionName(i.getStringByKey("DimensionName"))}a.setHierarchyType(e.HierarchyType.lookup(i.getStringByKey("Structure")));a.setIsModeled(i.getBooleanByKeyExt("IsModeled",false));var o=i.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(o)){a.setDateTo(e.XDate.createDateFromStringWithFlag(o,t.capabilities.supportsSapDate()))}a.setHierarchyDescription(i.getStringByKey("Description"));var s=i.getListByKey("Levels");if(!e.PrUtils.isListEmpty(s)){e.QInAMdHierarchy.importLevels(a,s)}return a};e.QInAMdHierarchy.importLevels=function(t,r){var n=r.size();for(var i=0;i<n;i++){var a=r.getStructureAt(i);var o=e.QHierarchyLevel.create(t,a.getStringByKey("LevelUniqueName"),a.getIntegerByKey("Level"));o.setLevelName(a.getStringByKey("LevelName"));o.setLevelText(a.getStringByKey("LevelCaption"));o.setLevelDimensionName(a.getStringByKey("DimensionName"));o.setLevelType(e.QInAConverter.lookupHierarchyLevelType(a.getIntegerByKey("LevelType")));o.setNavigationAttribute(a.getStringByKey("NavAttr"));t.getAllLevelBase().add(o)}};e.QInAMdHierarchy.exportLevelsLevelHierarchy=function(t,r){var n=t.putNewList("Levels");var i=r.getAllLevel();var a=i.size();for(var o=0;o<a;o++){var s=i.get(o);var l=n.addNewStructure();l.putInteger("Level",s.getLevelNumber());l.putStringNotNull("LevelUniqueName",s.getLevelUniqueName());l.putString("LevelName",s.getLevelName());l.putString("LevelCaption",s.getLevelText());l.putStringNotNull("DimensionName",s.getLevelDimensionName());l.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(s.getLevelType()))}};e.QInAMdHierarchy.exportMdHierarchy=function(t,r,n){r.putBoolean("HierarchiesPossible",n.supportsHierarchy());r.putBoolean("HasExternalHierarchies",n.hasExternalHierarchies());r.putInteger("NumberOfHierarchies",n.getNumberOfHierarchies());r.putString("DefaultHierarchy",n.getDefaultHierarchyName());if(t.capabilities.supportsDisplayHierarchyFixInFilter()){r.putBoolean("DisplayHierarchyFixInFilter",n.isDisplayHierarchyFixInFilter())}var i=n.getLeveledHierarchies();var a=n.getModelCapabilities();if(e.XCollectionUtils.hasElements(i)&&a.supportsDimensionHierarchyLevels()){var o=r.putNewList("LevelHierarchies");var s=i.size();for(var l=0;l<s;l++){e.QInAMdHierarchy.exportLevelHierarchyDetails(t,o,i.get(l))}}if(a.supportsHierarchyMetadata()){var u=r.putNewList("Hierarchies");var p=n.getHierarchies();if(e.notNull(p)){var g=p.getObjectsIterator();while(g.hasNext()){e.QInAMdHierarchy.exportHierarchyDetails(t,u,g)}e.XObjectExt.release(g)}}};e.QInAMdHierarchy.exportLevelHierarchyDetails=function(t,r,n){var i=r.addNewStructure();i.putString("Name",n.getHierarchyName());i.putString("Description",n.getHierarchyDescription());i.putString("DimensionName",n.getDimensionName());i.putString("Structure",n.getHierarchyType().getName());i.putBoolean("IsModeled",n.isModeled());e.QInAExportUtil.setDate(t,i,"DueDate",n.getDateTo());e.QInAMdHierarchy.exportLevelsLevelHierarchy(i,n)};e.QInAMdHierarchy.exportHierarchyDetails=function(t,r,n){var i=n.next();var a=r.addNewStructure();a.putString("Name",i.getHierarchyName());a.putString("Description",i.getHierarchyDescription());if(i.hasVersionName()){a.putString("Version",i.getVersionName())}var o=i.getHierarchyType();if(o!==e.HierarchyType.UNKNOWN){a.putString("Structure",o.getName())}a.putString("RestNode",i.getRestNode());a.putString("VirtualRootNode",i.getVirtualRootNode());e.QInAExportUtil.setDate(t,a,"DueDate",i.getDateTo());e.QInAMdHierarchy.exportLevels(a,i)};e.QInAMdHierarchy.exportLevels=function(t,r){if(r.supportsHierarchyLevels()){var n=t.putNewList("Levels");var i=r.getHierarchyLevels();var a=i.size();for(var o=0;o<a;o++){var s=i.get(o);var l=n.addNewStructure();l.putString("LevelUniqueName",s.getLevelUniqueName());l.putInteger("Level",s.getLevel());l.putString("LevelName",s.getLevelName());l.putString("LevelCaption",s.getLevelDescription());l.putStringNotNull("DimensionName",s.getLevelDimensionName());l.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(s.getLevelType()))}}};e.QInAMdHierarchy.prototype.getComponentType=function(){return null};e.QInAMdHierarchy.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdHierarchy.importMdHierarchy(t,r,n);return n};e.QInAMdHierarchy.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdHierarchy.exportMdHierarchy(t,n,r);return n};e.QInAMdQuery=function(){};e.QInAMdQuery.prototype=new e.QInAComponentMetadata;e.QInAMdQuery.prototype._ff_c="QInAMdQuery";e.QInAMdQuery.importVariants=function(t,r){if(e.isNull(t)){return}var n=r.getQueryManagerBase();if(e.isNull(n)){return}var i=t.getListByKey("VariableVariants");if(e.isNull(i)){return}n.clearVariableVariants();var a=i.size();for(var o=0;o<a;o++){var s=i.getStructureAt(o);var l=e.QVariableVariant.createVariantWithScopeInternal(r.getDataSource(),s.getStringByKey("Name"),s.getStringByKey("Description"),e.Scope.lookupByName(s.getStringByKey("Scope")));n.addVariableVariant(l)}};e.QInAMdQuery.importActiveVariant=function(t,r){if(e.isNull(t)){return null}var n=t.getStructureByKey("VariableVariant");if(e.isNull(n)){return null}return n.getStringByKey("Name")};e.QInAMdQuery.exportVariants=function(t,r){var n=r.getQueryManager().getVariableVariants();if(e.XCollectionUtils.hasElements(n)){var i=t.putNewList("VariableVariants");var a=n.size();for(var o=0;o<a;o++){var s=n.get(o);var l=i.addNewStructure();l.putString("Name",s.getName());l.putString("Description",s.getText());l.putString("Scope",s.getScope().getName())}}};e.QInAMdQuery.importPlanning=function(t,r){if(e.PrUtils.getBooleanValueProperty(t,"SupportsDataEntryReadOnly",false)){r.setSupportsDataEntryReadOnly(true)}if(e.PrUtils.getBooleanValueProperty(t,"DataEntryEnabled",false)){r.setDataEntryEnabled(true)}};e.QInAMdQuery.exportPlanning=function(e,t){if(t.supportsDataEntryReadOnly()){e.putBoolean("SupportsDataEntryReadOnly",true)}if(t.isDataEntryEnabled()){e.putBoolean("DataEntryEnabled",true)}};e.QInAMdQuery.importSupportsFlags=function(e,t,r){r.setExportEachMeasure(t.getBooleanByKeyExt("ExportingEachMeasure",true));r.setExportFixedFilter(t.getBooleanByKeyExt("ExportingFixedFilter",true));r.setExportVariables(t.getBooleanByKeyExt("ExportingVariables",true))};e.QInAMdQuery.exportSupportsFlags=function(e,t){if(!t.isExportingEachMeasure()){e.putBoolean("ExportingEachMeasure",false)}if(!t.isExportingFixedFilter()){e.putBoolean("ExportingFixedFilter",false)}if(!t.isExportingVariables()){e.putBoolean("ExportingVariables",false)}};e.QInAMdQuery.importTotals=function(t,r){var n=r.getModelCapabilitiesBase();var i=t.getStructureByKey("QueryMd");if(e.isNull(i)){i=t.getStructureByKey("Query")}if(e.notNull(i)){if(n.supportsQueryCurrencyTranslation()){var a=i.getStringByKey("CurrencyTranslationEnabled");var o=r.getCurrencyTranslationManagerBase();o.setCurrencyTranslationEnabledProperty(a);if(e.XString.isEqual(a,e.CurrencyTranslationConstants.NO_CURRENCY)){o.setCurrencyTranslationDetails(null)}}var s=i.getStructureByKey("ResultStructureFeature");var l=r.getMdResultStructureControllerBase();if(e.notNull(s)&&s.getBooleanByKeyExt("Enabled",false)){e.QInAOptions.importReturnedDataSelections(s,r.getQueryManager());l.setSupportsTotals(true);var u=s.getStructureByKey("ResultAlignment");var p=u.getStringByKey("ConfigLevel");var g=e.QInAConverter.lookupConfigLevel(p);n.setSupportedResultAlignmentLevel(g);var c=u.getListByKey("ResultAlignmentList");n.clearSupportedResultAlignment();var m=c.size();for(var y=0;y<m;y++){var d=e.QInAConverter.lookupAlignment(c.getStringAt(y));n.addSupportedResultAlignment(d)}if(n.getResultStructureReorderingCapability()===e.ReorderingCapability.FULL){n.addSupportedResultAlignment(e.ResultAlignment.STRUCTURE)}n.setSupportedVisibilityLocation(e.QModelLevel.DIMENSIONS);n.setSupportsConditionalResultVisibility(s.getBooleanByKeyExt("ConditionalVisibility",false));var A=s.getStringByKeyExt("Reordering","None");n.setResultStructureReorderingCapability(e.QInAConverter.lookupReordering(A));var I=s.getBooleanByKeyExt("ConditionalTotals",false);n.setSupportsConditionalResult(I);if(I){var S=s.getListByKey("ConditionalTotalsList");var f=S.size();for(var v=0;v<f;v++){var C=S.getStringAt(v);if(e.XString.isEqual(C,"TotalIncludedMembers")){n.addSupportedConditionalElement(e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS)}else if(e.XString.isEqual(C,"TotalRemainingMembers")){n.addSupportedConditionalElement(e.ResultStructureElement.TOTAL_REMAINING_MEMBERS)}}}}else{l.setSupportsTotals(false);n.setSupportedResultAlignmentLevel(e.QModelLevel.NONE);n.setSupportedVisibilityLocation(e.QModelLevel.NONE);n.setSupportsConditionalResultVisibility(false);n.setResultStructureReorderingCapability(e.ReorderingCapability.NONE);n.setSupportsConditionalResult(false)}}};e.QInAMdQuery.exportReturnedDataSelections=function(t,r){if(!r.supportsReturnedDataSelection()){return}var n=t.putNewStructure("ReturnedDataSelection");var i=r.getQueryModel().getAllReturnedDataSelections();var a=i.getKeysAsIterator();while(a.hasNext()){var o=a.next();n.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(o),i.getByKey(o).getBoolean())}};e.QInAMdQuery.exportTotals=function(t,r,n){var i=n.getModelCapabilities();var a=r.putNewStructure("QueryMd");if(t.mode.containsMetadata()||t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)||t.mode===e.QModelFormat.INA_METADATA_CORE||t.mode===e.QModelFormat.INA_METADATA_RENDERING){if(i.supportsQueryCurrencyTranslation()){a.putString("CurrencyTranslationEnabled",n.getCurrencyTranslationManager().getCurrencyTranslationEnabledType())}if(n.supportsResultVisibility()){var o=a.putNewStructure("ResultStructureFeature");o.putBoolean("Enabled",n.supportsResultVisibility());o.putBoolean("ConditionalVisibility",i.supportsConditionalResultVisibility());o.putString("Reordering",e.QInAConverter.lookupReorderingInA(i.getResultStructureReorderingCapability()));var s=o.putNewStructure("ResultAlignment");var l=i.getSupportedResultAlignmentLevel();s.putString("ConfigLevel",e.QInAConverter.lookupConfigLevelInA(l));var u=i.getSupportedResultAlignments();if(u.hasElements()){var p=s.putNewList("ResultAlignmentList");var g=u.size();for(var c=0;c<g;c++){p.addString(e.QInAConverter.lookupAlignmentInA(u.get(c)))}}var m=i.supportsConditionalResults();o.putBoolean("ConditionalTotals",m);if(m){var y=o.putNewList("ConditionalTotalsList");var d=i.getSupportedConditionalResults();var A=d.size();for(var I=0;I<A;I++){var S=d.get(I);if(S===e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){y.addString("TotalIncludedMembers")}else if(S===e.ResultStructureElement.TOTAL_REMAINING_MEMBERS){y.addString("TotalRemainingMembers")}}}e.QInAMdQuery.exportReturnedDataSelections(o,n.getQueryManager())}}};e.QInAMdQuery.importDimensions=function(t,r,n){var i=r.getListByKey("Dimensions");if(e.notNull(i)){var a=n.supportsDimensionLazyLoad()&&n.getServerBaseSerialization()!==null;var o=n.getDimensionManagerBase();if(a){var s=r.hasStringByKey("MetadataType")&&e.XString.isEqual(r.getStringByKey("MetadataType"),"DesignTime");o.setDimensionLazyLoader(e.InADimensionLazyLoader.createLazyLoader(n,s))}var l=i.size();for(var u=0;u<l;u++){var p=i.getStructureAt(u);var g=p.getBooleanByKeyExt("IsReference",false);if(a&&(g||t.getOriginalMode()!==e.QModelFormat.INA_CLONE)){var c=e.AxisType.lookup(p.getStringByKey("AxisDefault"));if(c!==e.AxisType.COLUMNS&&c!==e.AxisType.ROWS&&n.getDimensionByNameFromExistingMetadata(p.getStringByKey("Name"))===null){var m=e.QInAMdQuery.getDimensionType(n,p);o.addDimensionReference(p.getStringByKey("Name"),m,e.QInAMdQuery.isTechnicalDimension(p));continue}}e.QInAMdQuery.importDimension(t,p,n)}}};e.QInAMdQuery.getDimensionType=function(t,r){var n=r.getIntegerByKeyExt("DimensionType",3);var i=e.QInAConverter.lookupDimensionType(n);return i};e.QInAMdQuery.isTechnicalDimension=function(t){var r=t.getListByKey("AxisConstraints");return e.XCollectionUtils.hasElements(r)&&r.size()===1&&e.QInAConverter.lookupAxisType(r.getStringAt(0))===e.AxisType.TECHNICAL};e.QInAMdQuery.importDimension=function(t,r,n){var i=t.importDimension(r,n);var a=n.getDimensionManagerBase();var o=a.getDimensionByNameInternal(r.getStringByKey("Name"));if(e.isNull(o)){n.addDimension(i)}else if(n.getQueryManagerBase().getPreviousVariableProcessorState()===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){var s=e.InAQMgrMergeSettings.create(false);o.mergeDeepRecursive(s,i);e.XObjectExt.release(i);i=o}else{o.setText(i.getText());i=o}var l=n.getAxis(i.getDefaultAxisType());l.add(i);a.finalizeDimensionMetadataSetup(i)};e.QInAMdQuery.exportDimensions=function(t,r,n){var i=e.PrFactory.createList();if(t.getOriginalMode()===e.QModelFormat.INA_METADATA){r.getDimensions()}var a=e.XListOfString.createFromReadOnlyList(r.getDimensionNames());a.sortByDirection(e.XSortDirection.ASCENDING);var o=a.size();var s=r.isOptimizedExportModeActive();var l=t.getMode();var u=e.QInAMdQuery.collectUsedDimensionsForRendering(r,l);var p=r.getDimensionManagerBase();for(var g=0;g<o;g++){var c=a.get(g);var m=p.getDimensionByNameInternal(c);var y;if(e.isNull(m)){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)){y=e.PrFactory.createStructure();y.putString("Name",c);y.putBoolean("IsReference",true)}else{continue}}else{if(s&&m.isIgnoredOnOptimizedExport()){continue}var d=m.getAxisType();if(l===e.QModelFormat.INA_METADATA_RENDERING&&d!==e.AxisType.ROWS&&d!==e.AxisType.COLUMNS&&!u.contains(m.getName())){continue}y=t.exportDimension(m,null)}i.add(y)}n.put("Dimensions",i)};e.QInAMdQuery.collectUsedDimensionsForRendering=function(t,r){var n=e.XHashSetOfString.create();if(r===e.QModelFormat.INA_METADATA_RENDERING){e.DimensionUsageAnalyzer2.addDimensionsUsedBySorting(t,n);e.DimensionUsageAnalyzer2.addDimensionsUsedByVariables(t,n);e.DimensionUsageAnalyzer2.addDimensionsUsedBySpatialClustering(t,n)}return n};e.QInAMdQuery.importProperties=function(t,r){var n=t.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.setText(t.getStringByKey("Description"))}var i=r.getMetadataPropertiesBase();i.putString("Type",t.getStringByKey("Type"));if(t.hasStringByKey("LastDataUpdateOn")){i.putString("LastDataUpdateOn",t.getStringByKey("LastDataUpdateOn"))}else{i.putString("LastDataUpdate",t.getStringByKey("LastDataUpdate"))}i.putString("LastDataUpdateBy",t.getStringByKey("LastDataUpdateBy"));i.putString("CreatedBy",t.getStringByKey("CreatedBy"));i.putString("CreatedOn",t.getStringByKey("CreatedOn"));i.putString("RepositoryType",t.getStringByKey("RepositoryType"));i.putString("DueDate",t.getStringByKey("DueDate"));i.putStringNotNullAndNotEmpty("SemanticObject",t.getStringByKey("SemanticObject"))};e.QInAMdQuery.exportProperties=function(t,r){t.putString("Description",r.getText());var n=r.getMetadataProperties();t.putString("Type",n.getStringByKey("Type"));var i=n.getStringByKey("LastDataUpdateOn");if(e.isNull(i)){t.putString("LastDataUpdate",n.getStringByKey("LastDataUpdate"))}else{t.putString("LastDataUpdateOn",i)}t.putString("LastDataUpdateBy",n.getStringByKey("LastDataUpdateBy"));t.putString("RepositoryType",n.getStringByKey("RepositoryType"));t.putString("CreatedBy",n.getStringByKey("CreatedBy"));t.putString("CreatedOn",n.getStringByKey("CreatedOn"));t.putString("DueDate",n.getStringByKey("DueDate"));t.putStringNotNullAndNotEmpty("SemanticObject",n.getStringByKey("SemanticObject"));var a=r.getInfoProvider();e.QInAExportUtil.setNameIfNotNull(t,"BaseDataSource",a)};e.QInAMdQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInAMdQuery.prototype.newModelComponent=function(t,r,n,i){return e.QueryModel.create(r,null,e.QCapabilities.create())};e.QInAMdQuery.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;e.QInAMdDataSource.importMd(t,r,o,o);e.QInAMdDocumentsInfo.importMd(t,r,o,o);var s=t.getMode();if(s===e.QModelFormat.INA_METADATA||s===e.QModelFormat.INA_METADATA_CORE||s===e.QModelFormat.INA_METADATA_RENDERING){o.setServerBaseSerialization(s,e.QModelOrigin.IMPORTER,r)}if(e.notNull(r)){e.QInAMdQuery.importSupportsFlags(t,r,o);e.QInAMdQuery.importProperties(r,o);e.QInAMdQuery.importTotals(r,o);t.m_cacheKey=e.QFactory.createCacheKeyByContext(a);e.QInAMdQuery.importDimensions(t,r,o);o.getDimensionManagerBase().finalizeStructures();t.m_cacheKey=e.XObjectExt.release(t.m_cacheKey)}t.importSortingManager(r,o.getSortingManagerBase(),null);t.importVariableManager(r,o.getVariableManagerBase(),o);t.importDrillManager(r,o.getDrillManagerBase(),o);t.importExceptionAggregationManager(r,o._getExceptionAggregationManagerBase(),o);t.importUniversalDisplayHierarchies(r,o.getUniversalDisplayHierarchiesBase(),o);e.QInAMdQuery.importPlanning(r,o);e.QInAMdQuery.importVariants(r,o);return o};e.QInAMdQuery.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=t.mode===e.QModelFormat.INA_METADATA_RENDERING;e.QInAMdQuery.exportSupportsFlags(n,a);if(i===e.QImExFlag.DEFAULT_ALL){e.QInAMdDataSource.exportMd(t,n,a);t.exportVariableContainer(a.getVariableManager(),n);e.QInAMdQuery.exportVariants(n,a)}else if(i===e.QImExFlag.VARIABLES){t.exportVariableContainer(a.getVariableManager(),n);e.QInAMdQuery.exportVariants(n,a)}else if(i===e.QImExFlag.DATASOURCE){e.QInAMdDataSource.exportMd(t,n,a)}e.QInAMdQuery.exportProperties(n,a);if(!o){e.QInAMdQuery.exportTotals(t,n,a)}e.QInAMdQuery.exportDimensions(t,a,n);t.exportSortingManager(a.getSortingManager(),n);t.exportDrillManager(a.getDrillManager(),n);if(!o){t.exportExceptionAggregationManager(a._getExceptionAggregationManagerBase(),n);t.exportUniversalDisplayHierarchies(a.getUniversalDisplayHierarchies(),n);e.QInAMdQuery.exportPlanning(n,a)}return n};e.QInAMdSort=function(){};e.QInAMdSort.prototype=new e.QInAComponentMetadata;e.QInAMdSort.prototype._ff_c="QInAMdSort";e.QInAMdSort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInAMdSort.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(t.capabilities.supportsExtendedSort()&&e.notNull(r)){var s=r.getListByKey("ExtendedSortTypes");if(e.notNull(s)){o.clearSupportedSortType();var l=s.size();for(var u=0;u<l;u++){var p=s.getStringAt(u);var g=e.QInAConverter.lookupSortType(p);if(e.isNull(g)){t.addWarning(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("Sort type unknown: ",p))}else{o.addSupportedSortType(g)}}}var c=r.getListByKey("SortTypesBreakGrouping");if(e.notNull(c)){var m=c.size();for(var y=0;y<m;y++){var d=e.QInAConverter.lookupSortType(c.getStringAt(y));o.addSupportedBreakGrouping(d)}}}return o};e.QInAMdSort.prototype.exportComponentWithStructure=function(t,r,n,i){if(t.capabilities.supportsExtendedSort()){var a=r;var o=a.getQueryModel().getModelCapabilities();var s=n.putNewList("ExtendedSortTypes");var l=e.SortType.getAllSortTypes();var u=l.size();for(var p=0;p<u;p++){var g=l.get(p);if(o.supportsSortType(g)){s.addString(e.QInAConverter.lookupSortTypeInA(g))}}var c=n.putNewList("SortTypesBreakGrouping");for(var m=0;m<u;m++){var y=l.get(m);if(o.supportsBreakGrouping(y)){c.addString(e.QInAConverter.lookupSortTypeInA(y))}}}return n};e.QInAMdUniversalDisplayHierarchies=function(){};e.QInAMdUniversalDisplayHierarchies.prototype=new e.QInAComponentMetadata;e.QInAMdUniversalDisplayHierarchies.prototype._ff_c="QInAMdUniversalDisplayHierarchies";e.QInAMdUniversalDisplayHierarchies.importUdhDimension=function(t,r,n){if(!r.getDimensionNames().contains(n)){var i=e.PrFactory.createStructure();i.putString("Name",n);i.putString("AxisDefault","Virtual");var a=i.putNewList("AxisConstraints");a.addString("Virtual");e.QInAMdQuery.importDimension(t,i,r)}};e.QInAMdUniversalDisplayHierarchies.importHierarchy=function(t,r){var n=r.getListByKey("DimensionNames");var i=e.PrUtils.asListOfString(n);var a=r.getStringByKey("Name");var o=r.getIntegerByKey("InitialDrillLevel");var s=e.QInAConverter.lookupLowerLevelNodeAlignment(r.getStringByKey("LowerLevelNodeAlignment"));var l=r.getBooleanByKeyExt("Active",false);var u=r.getBooleanByKeyExt("CustomDimensions",false);t.addHierarchy(a,i,o,s,l,null,u)};e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies=function(t){var r=t.getQueryModel();var n=t.getHierarchies();var i=e.XList.create();var a=n.size();for(var o=0;o<a;o++){var s=n.get(o);if(s.getHierarchyDedicatedAxis()!==null){i.add(s.getHierarchyDedicatedAxis().getType());continue}var l=e.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList(s.getDimensionNames(),r);if(e.notNull(l)&&!i.contains(l.getType())){s.setAxis(l);i.add(l.getType())}}for(var u=0;u<a;u++){var p=n.get(u);if(p.getHierarchyDedicatedAxis()===null){p.setAxis(i.contains(e.AxisType.ROWS)?r.getColumnsAxis():r.getRowsAxis())}}};e.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList=function(t,r){if(e.notNull(t)){for(var n=0;n<t.size();n++){var i=r.getDimensionByNameFromExistingMetadata(t.get(n));if(e.notNull(i)){var a=i.getAxisType();if(a===e.AxisType.ROWS||a===e.AxisType.COLUMNS){return i.getAxis()}}}}return null};e.QInAMdUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInAMdUniversalDisplayHierarchies.prototype.newModelComponent=function(t,r,n,i){return e.QFactory.createUniversalDisplayHierarchies(i)};e.QInAMdUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;if(e.notNull(r)&&t.capabilities.supportsUniversalDisplayHierarchies()){var s=r.getStructureByKey("UniversalDisplayHierarchies");if(e.notNull(s)){var l=s.getListByKey("DefinedHierarchies");var u=l.size();var p=o.getQueryModel();for(var g=0;g<u;g++){var c=l.getStructureAt(g);e.QInAMdUniversalDisplayHierarchies.importHierarchy(o,c);e.QInAMdUniversalDisplayHierarchies.importUdhDimension(t,p,c.getStringByKey("Name"))}}}e.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(o);return o};e.QInAMdUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(e,t,r,n){return r};e.QInAMdVarDimMember=function(){};e.QInAMdVarDimMember.prototype=new e.QInAComponentMetadata;e.QInAMdVarDimMember.prototype._ff_c="QInAMdVarDimMember";e.QInAMdVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInAMdVarDimMember.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a;var s=e.VariableType.DIMENSION_MEMBER_VARIABLE;if(r.containsKey("isHierarchical")){if(r.getBooleanByKeyExt("isHierarchical",false)){s=e.VariableType.HIERARCHY_NODE_VARIABLE}}else{var l=e.PrUtils.getStringValueProperty(r,"SemanticType",null);if(e.notNull(l)){if(e.XString.isEqual(l,"HierarchyNodeVariable")){s=e.VariableType.HIERARCHY_NODE_VARIABLE}else if(e.XString.isEqual(l,"HierarchyNameVariable")){s=e.VariableType.HIERARCHY_NAME_VARIABLE}}}var u;var p=r.getStringByKey("Name");var g=o.getVariables();if(g.containsKey(p)){u=g.getByKey(p)}else{if(s===e.VariableType.HIERARCHY_NODE_VARIABLE){u=e.QHierarchyNodeVariable.createHierarchyNodeVariable(a,o,p,null)}else if(s===e.VariableType.HIERARCHY_NAME_VARIABLE){u=e.QHierarchyNameVariable.createDimensionHierarchyVariable(a,o,p,null)}else{u=e.QDimensionMemberVariable.createDimensionMemberVariable(a,o,p,null)}}e.QInAMdVarMisc.importMd(r,u);var c=r.getBooleanByKeyExt("SupportsValueHelp",true);u.setSupportsValueHelp(c);var m=null;var y=e.PrUtils.getStructureProperty(r,"DimensionReference");if(e.notNull(y)){var d=y.getStringByKey("Name");if(e.notNull(d)){var A=o.getDimensionAccessor();if(e.notNull(A)){m=A.getDimensionByNameFromExistingMetadata(d)}}}if(e.isNull(m)){var I=o.getQueryModel()!==null&&o.getQueryModel().isPartialResponse();if(!I){var S=e.XStringUtils.concatenate3("Error in importing Variables: No dimension specified for variable ",p," !");if(u.isInputEnabled()){t.addError(e.ErrorCodes.INVALID_STATE,S);return null}t.addInfo(e.ErrorCodes.IMPORT_VARIABE_NO_DIMENSION,S)}}else{u.setDimension(m)}e.QInAMdVarSelectionCap.importMd(t,r,u,a);var f=r.getListByKey("RuntimeReferences");if(e.notNull(f)&&f.size()>0){var v=f.size();for(var C=0;C<v;C++){u.addRuntimeReferences(f.getStringAt(C))}}e.QInAMdVarHierInfo.importMd(t,r,u,a);u.setIsUsedInFixedFilter(r.getBooleanByKeyExt("UsedInFixedFilter",false));u.setIsUsedInDynamicFilter(r.getBooleanByKeyExt("UsedInDynamicFilter",false));var N=u.getQueryModel();var E=null;if(e.notNull(N)){E=N.getQueryManager()}var M=r.getStructureByKey("Values");if(e.notNull(M)&&e.notNull(E)&&E.getVariableProcessorState()!==e.VariableProcessorState.PROCESSING_REINIT){var h=e.QFactory.createFilterExpression(a,u);var D=t.mode;t.mode=e.QModelFormat.INA_DATA;var T=t.importFilterExpression(h,M,u,a);t.mode=D;var Q=T.getCartesianProduct();if(e.notNull(Q)){var R=Q.getCartesianList(u.getDimension());if(e.notNull(R)){u.setDefaultMemberFilter(R.cloneOlapComponent(u,null))}}}return u};e.QInAMdVarDimMember.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("VariableType","DimensionMemberVariable");var o=a.getVariableType();if(o===e.VariableType.HIERARCHY_NAME_VARIABLE){n.putString("SemanticType","HierarchyNameVariable")}else if(o===e.VariableType.HIERARCHY_NODE_VARIABLE){n.putString("SemanticType","HierarchyNodeVariable")}else{n.putString("SemanticType","DimensionMemberVariable")}e.QInAMdVarMisc.exportMd(t,a,n);n.putBoolean("SupportsValueHelp",a.supportsValueHelp());if(a.getDimension()!==null){var s=n.putNewStructure("DimensionReference");s.putString("Name",a.getDimension().getName())}e.QInAMdVarSelectionCap.exportMd(t,n,a);e.QInAMdVarHierInfo.exportMd(n,a);n.putBoolean("UsedInFixedFilter",a.isUsedInFixedFilter());n.putBoolean("UsedInDynamicFilter",a.isUsedInDynamicFilter());var l=a.getDefaultMemberFilter();if(e.notNull(l)&&l.hasElements()){var u=t.mode;t.mode=e.QModelFormat.INA_DATA;var p=n.putNewStructure("Values");var g=p.putNewStructure("Selection");t.exportCartesianList(l,g);t.mode=u}var c=a.getRuntimeReferences();if(e.notNull(c)){var m=c.size();if(m>0){var y=n.putNewList("RuntimeReferences");for(var d=0;d<m;d++){y.addString(c.get(d))}}}return n};e.QInAMdVarHierInfo=function(){};e.QInAMdVarHierInfo.prototype=new e.QInAComponentMetadata;e.QInAMdVarHierInfo.prototype._ff_c="QInAMdVarHierInfo";e.QInAMdVarHierInfo.importMd=function(t,r,n,i){n.setHierarchyName(null);n.setHierarchyVersion(null);n.setHierarchyKeyDate(null);n.setHierarchyBaseDimension(null);var a=e.PrUtils.getStructureProperty(r,"Hierarchy");if(e.notNull(a)){n.setHierarchyBaseDimension(a.getStringByKey("BaseDimension"));n.setHierarchyName(a.getStringByKey("Name"));n.setHierarchyVersion(a.getStringByKey("Version"));var o=a.getStringByKey("DueDate");if(e.isNull(o)){o=a.getStringByKey("DateTo")}n.setHierarchyKeyDate(o)}var s=n.getName();var l=n.getVariableType();var u=n.getVariableContext();var p=u.getDimensionAccessor();var g=u.getQueryManager();if(e.notNull(g)&&g.getModelCapabilities().supportsAutoVariableSubmit()){var c=n.getRuntimeReferences();for(var m=0;m<c.size();m++){var y=p.getDimensionByName(c.get(m));if(e.isNull(y)){continue}if(e.XString.isEqual(s,y.getHierarchyNameVariableName())||e.XString.isEqual(s,y.getHierarchyDueDateVariableName())||e.XString.isEqual(s,y.getHierarchyVersionVariableName())){n.setIsHierarchyInfoVariable(true)}}}if(l===e.VariableType.HIERARCHY_NAME_VARIABLE){var d=n;var A=r.getStringByKey("HierarchyBaseDimension");if(e.isNull(A)){A=r.getStringByKey("HierachyBaseDimension")}if(e.notNull(A)){var I=p.getDimensionByNameFromExistingMetadata(A);d.setHierarchyNameDimension(I)}}else if(l===e.VariableType.HIERARCHY_NODE_VARIABLE){var S=u.getVariableMode();if(S===e.VariableMode.DIRECT_VALUE_TRANSFER){var f=n.getHierarchyName();var v=n.getDimension();if(e.notNull(f)&&e.notNull(v)){var C=e.QHierarchy.create(i,v,f);var N=n.getHierarchyVersion();C.setHierarchyVersion(N);var E=n.getHierarchyKeyDate();if(!e.XString.isEqual(E,"")){var M=e.XDate.createDateFromStringWithFlag(E,t.capabilities.supportsSapDate());if(e.notNull(M)){C.setHierarchyDueDate(M)}v.setHierarchy(C)}}}}};e.QInAMdVarHierInfo.exportMd=function(t,r){var n=t.putNewStructure("Hierarchy");n.putStringNotNull("BaseDimension",r.getHierarchyBaseDimension());n.putStringNotNull("Name",r.getHierarchyName());n.putStringNotNull("Version",r.getHierarchyVersion());n.putStringNotNull("DueDate",r.getHierarchyKeyDate());var i=r.getVariableType();if(i===e.VariableType.HIERARCHY_NAME_VARIABLE){var a=r.getHierarchyNameDimension();e.QInAExportUtil.setNameIfNotNull(t,"HierarchyBaseDimension",a)}};e.QInAMdVarHierInfo.prototype.getComponentType=function(){return null};e.QInAMdVarHierInfo.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdVarHierInfo.importMd(t,r,n,a);return n};e.QInAMdVarHierInfo.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdVarHierInfo.exportMd(n,r);return n};e.QInAMdVarMisc=function(){};e.QInAMdVarMisc.prototype=new e.QInAComponentMetadata;e.QInAMdVarMisc.prototype._ff_c="QInAMdVarMisc";e.QInAMdVarMisc.importMd=function(t,r){if(e.notNull(r)){r.setText(t.getStringByKey("Description"));var n=t.getBooleanByKeyExt("InputEnabled",false);r.setInputEnabled(n);r.setNameExternal(t.getStringByKey("NameExternal"));r.setCustomVariable(t.getBooleanByKey("CustomVariable"));r.setProcessingType(e.QInAConverter.lookupProcessingType(t.getStringByKey("ProcessingType")));var i=t.getStringByKeyExt("InputType","Optional");if(e.XString.isEqual(i,"Optional")){r.setMandatory(false);r.setInitialValueAllowed(true)}else if(e.XString.isEqual(i,"Mandatory")){r.setMandatory(true);r.setInitialValueAllowed(true)}else if(e.XString.isEqual(i,"MandatoryNotInitial")){r.setMandatory(true);r.setInitialValueAllowed(false)}r.setIsDynamicVariable(t.getBooleanByKeyExt("IsDynamicValue",false));var a=t.getIntegerByKeyExt("ScreenOrder",0);r.setVariableOrder(a);var o=t.getListByKey("DependentOfVariable");if(!e.PrUtils.isListEmpty(o)){var s=o.size();for(var l=0;l<s;l++){r.addDependentVariableName(o.getStringAt(l))}}if(t.containsKey("IsInputEnabledAndExit")){r.setIsInputEnabledAndExit(t.getBooleanByKey("IsInputEnabledAndExit"))}}};e.QInAMdVarMisc.exportMd=function(t,r,n){n.putString("Name",r.getName());n.putString("Description",r.getText());n.putBoolean("InputEnabled",r.isInputEnabled());n.putString("NameExternal",r.getNameExternal());n.putBoolean("CustomVariable",r.isCustomVariable());n.putStringNotNull("ProcessingType",e.QInAConverter.lookupProcessingTypeIna(r.getProcessingType()));if(r.isDynamicVariable()){n.putBoolean("IsDynamicValue",r.isDynamicVariable())}if(r.isMandatory()){if(r.isInitialValueAllowed()){n.putString("InputType","Mandatory")}else{n.putString("InputType","MandatoryNotInitial")}}else{if(r.isInitialValueAllowed()){n.putString("InputType","Optional")}else{t.addError(e.ErrorCodes.INVALID_STATE,"illegal combination: optional variables must support initial values")}}n.putInteger("ScreenOrder",r.getVariableOrder());var i=r.getDependentVariablesNames();if(e.XCollectionUtils.hasElements(i)){var a=n.putNewList("DependentOfVariable");a.addAllStrings(i)}var o=r;if(o.isInputEnabledAndExitProvidedInMd()){n.putBoolean("IsInputEnabledAndExit",r.isEnforcedDynamicValue())}};e.QInAMdVarMisc.prototype.getComponentType=function(){return null};e.QInAMdVarMisc.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdVarMisc.exportMd(t,r,n);return n};e.QInAMdVarMisc.prototype.importComponentWithStructure=e.noSupport;e.QInAMdVarOptionList=function(){};e.QInAMdVarOptionList.prototype=new e.QInAComponentMetadata;e.QInAMdVarOptionList.prototype._ff_c="QInAMdVarOptionList";e.QInAMdVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInAMdVarOptionList.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getVariableContainer();var s=r.getStringByKey("Name");var l=o.getVariables();var u;if(l.containsKey(s)){var p=l.getByKey(s);u=p}else{var g=e.PrUtils.getStringValueProperty(r,"SemanticType",null);var c=r.getBooleanByKeyExt("MultipleValues",false);if(e.XString.isEqual("HierarchyVariable",g)){u=e.QSimpleTypeVariable.createHierarchyVariable(a,o,s,null,c)}else{u=e.QSimpleTypeVariable.createOptionListVariable(a,o,s,null,c)}}e.QInAMdVarMisc.importMd(r,u);u.clearOptions();var m=r.getListByKey("Options");if(!e.PrUtils.isListEmpty(m)){var y=m.size();for(var d=0;d<y;d++){var A=m.getStructureAt(d);var I=A.getStringByKey("Name");var S=A.getStringByKey("Description");u.createAndAddOption(I,S)}}return u};e.QInAMdVarOptionList.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;n.putString("VariableType","OptionListVariable");var o=a.getVariableType();if(o===e.VariableType.HIERARCHY_VARIABLE){n.putString("SemanticType","HierarchyVariable")}else{n.putString("SemanticType","OptionListVariable")}e.QInAMdVarMisc.exportMd(t,a,n);n.putBoolean("MultipleValues",a.supportsMultipleValues());var s=a.getOptions();var l=n.putNewList("Options");var u=s.size();for(var p=0;p<u;p++){var g=s.get(p);var c=l.addNewStructure();c.putString("Name",g.getName());c.putString("Description",g.getText())}return n};e.QInAMdVarSelectionCap=function(){};e.QInAMdVarSelectionCap.prototype=new e.QInAComponentMetadata;e.QInAMdVarSelectionCap.prototype._ff_c="QInAMdVarSelectionCap";e.QInAMdVarSelectionCap.importMd=function(t,r,n,i){var a=null;var o=n.getDimension();if(e.notNull(o)){var s=r.getStructureByKey("Values");if(e.notNull(s)){var l=s.getStructureByKey("Selection");if(e.notNull(l)){var u=l.getStructureByKey("SetOperand");if(e.notNull(u)){a=o.getFieldByName(u.getStringByKey("FieldName"))}}}}var p=e.QInAMdFilterCapability.importMd(t,r,a,n,i);if(e.notNull(p)&&t.isAbap(n)&&t.getSession().hasFeature(e.FeatureToggleOlap.SINGLE_VALUE_VARIABLES_ONLY_INCLUDE)){if(p.getGroup()===e.QSetSignComparisonOperatorGroup.SINGLE_VALUE){p.setGroup(e.QSetSignComparisonOperatorGroup.SINGLE_VALUE_INCLUDE_ONLY)}}n.setFilterCapability(p);var g=e.QFilterCapabilityList.createFilterCapabilitiesForVariable(i,n);n.setFilterCapabilities(g);var c=e.PrUtils.getBooleanValueProperty(r,"MultipleValues",false);g.setSupportsMultipleValues(c);e.QInAMdVarSelectionCap.mergeCapabilities(o,p,g)};e.QInAMdVarSelectionCap.mergeCapabilities=function(t,r,n){if(e.notNull(t)&&e.notNull(r)){var i=t.getFilterCapabilities();var a=i.getSelectableFieldNames();var o=a.size();for(var s=0;s<o;s++){var l=a.get(s);var u=i.getFilterCapabilitiesByFieldName(l);if(u.supportsSetSign(e.SetSign.INCLUDING)){var p=n.createAndAddFilterCapabilitiesForFieldName(l);e.QInAMdVarSelectionCap.mergeOperators(e.SetSign.INCLUDING,p,u,r);if(u.supportsSetSign(e.SetSign.EXCLUDING)){e.QInAMdVarSelectionCap.mergeOperators(e.SetSign.EXCLUDING,p,u,r)}}}}};e.QInAMdVarSelectionCap.mergeOperators=function(t,r,n,i){if(e.notNull(i)){if(i.supportsSetSign(t)){r.addSupportedSetSign(t);var a=r.getModifiableSupportedComparisonOperators(t);var o=n.getSupportedComparisonOperators(t);var s=i.getSupportedComparisonOperators(t);var l=s.size();for(var u=0;u<l;u++){var p=s.get(u);if(o.contains(p)){a.add(p)}}}}};e.QInAMdVarSelectionCap.exportMd=function(t,r,n){var i=n.getFilterCapability();e.QInAMdFilterCapability.exportMd(t,i,r,n.getQueryModel());var a=n.getFilterCapabilities();if(e.notNull(a)){r.putBoolean("MultipleValues",a.supportsMultipleValues())}};e.QInAMdVarSelectionCap.prototype.getComponentType=function(){return null};e.QInAMdVarSelectionCap.prototype.importComponentWithStructure=function(t,r,n,i,a){e.QInAMdVarSelectionCap.importMd(t,r,n,a);return n};e.QInAMdVarSelectionCap.prototype.exportComponent=function(t,r,n,i){return this.exportComponentWithStructure(t,r,e.isNull(n)?e.PrFactory.createStructure():n,i)};e.QInAMdVarSelectionCap.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInAMdVarSelectionCap.exportMd(t,n,r);return n};e.QInAMdVarSimpleType=function(){};e.QInAMdVarSimpleType.prototype=new e.QInAComponentMetadata;e.QInAMdVarSimpleType.prototype._ff_c="QInAMdVarSimpleType";e.QInAMdVarSimpleType.exportMd=function(t,r,n){n.putString("VariableType","SimpleTypeVariable");var i=r.getVariableType();if(i===e.VariableType.FORMULA_VARIABLE){n.putString("SemanticType","FormulaVariable")}else if(i===e.VariableType.TEXT_VARIABLE){n.putString("SemanticType","TextVariable")}else{n.putString("SemanticType","ValueVariable");var a=r.getValueType();n.putString("ValueType",e.QInAConverter.lookupValueTypeInA(a))}e.QInAMdVarMisc.exportMd(t,r,n);n.putInteger("Scale",r.getValueScale());n.putInteger("Length",r.getValueLength());n.putBoolean("MultipleValues",r.supportsMultipleValues());return n};e.QInAMdVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInAMdVarSimpleType.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a;var s=null;var l=e.PrUtils.getStringValueProperty(r,"Name",null);if(e.notNull(l)){var u=o.getVariables();if(u.containsKey(l)){s=u.getByKey(l)}else{var p=e.PrUtils.getStringValueProperty(r,"SemanticType",null);var g=r.getBooleanByKeyExt("MultipleValues",false);if(e.XString.isEqual("FormulaVariable",p)){s=e.QSimpleTypeVariable.createFormulaVariable(a,o,l,null,g)}else if(e.XString.isEqual("TextVariable",p)){s=e.QSimpleTypeVariable.createTextVariable(a,o,l,null,g)}else{var c=e.PrUtils.getStringValueProperty(r,"ValueType",null);var m=e.QInAConverter.lookupValueType(c);s=e.QSimpleTypeVariable.createSimpleTypeVariable(a,o,m,l,null,g)}}e.QInAMdVarMisc.importMd(r,s);var y=r.getIntegerByKeyExt("Scale",-1);if(y!==-1){s.setValueScale(y)}var d=r.getIntegerByKeyExt("Length",-1);if(d!==-1){s.setValueLength(d)}var A=r.getListByKey("SimpleNumericValues");if(e.isNull(A)){A=r.getListByKey("SimpleStringValues")}var I=e.QInAValueUtils.importValueList(t,A,s.getValueType());if(s.supportsMultipleValues()||I.size()<=1){s.setDefaultValues(I)}}return s};e.QInAMdVarSimpleType.prototype.exportComponentWithStructure=function(t,r,n,i){return e.QInAMdVarSimpleType.exportMd(t,r,n)};e.QInAMdVariable=function(){};e.QInAMdVariable.prototype=new e.QInAComponentMetadata;e.QInAMdVariable.prototype._ff_c="QInAMdVariable";e.QInAMdVariable.prototype.getComponentType=function(){return e.VariableType.ANY_VARIABLE};e.QInAMdVariable.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s;var l=e.PrUtils.getStringValueProperty(r,"VariableType",null);if(e.XString.isEqual("DimensionMemberVariable",l)){s=t.importDimensionMemberVariable(r,null,o)}else if(e.XString.isEqual("OptionListVariable",l)){s=t.importOptionListVariable(r,null,o)}else if(e.XString.isEqual("SimpleTypeVariable",l)){s=t.importSimpleTypeVariable(r,null,o)}else{t.addError(0,e.XStringUtils.concatenate2("Variable type not supported: ",l));return null}return s};e.QInAMdVariable.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getVariableType();if(o.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){return t.exportDimensionMemberVariable(a,n)}else if(o.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){e.QInAMdVarSimpleType.exportMd(t,a,n)}else if(o.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.exportOptionListVariable(a,n)}else{t.addError(0,e.XStringUtils.concatenate2("Variable type not supported: ",o.getName()))}return n};e.QInAMdVariableContainer=function(){};e.QInAMdVariableContainer.prototype=new e.QInAComponentMetadata;e.QInAMdVariableContainer.prototype._ff_c="QInAMdVariableContainer";e.QInAMdVariableContainer.resolveVariableDependencies=function(e){var t=e.getVariables();var r=t.size();for(var n=0;n<r;n++){var i=t.get(n);var a=i.getDependentVariablesNames();var o=a.size();for(var s=0;s<o;s++){var l=t.getByKey(a.get(s));i.addDependentVariable(l)}}};e.QInAMdVariableContainer.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInAMdVariableContainer.prototype.importComponentWithStructure=function(t,r,n,i,a){if(e.notNull(r)){var o=n;var s=r.getListByKey("VariablesMd");if(e.isNull(s)){s=r.getListByKey("Variables")}this.importVariableList(t,s,o)}return n};e.QInAMdVariableContainer.prototype.importVariableList=function(t,r,n){var i=n;var a=r;if(e.notNull(a)){var o=i.getVariables();var s=a.size();for(var l=0;l<s;l++){var u=e.PrUtils.getStructureElement(a,l);if(e.notNull(u)){var p=t.importVariable(u,i);if(e.notNull(p)&&!o.contains(p)){i.addVariable(p)}}}e.QInAMdVariableContainer.resolveVariableDependencies(i)}};e.QInAMdVariableContainer.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;var a=r.putNewList("VariablesMd");var o=i.getVariables();var s=o.size();for(var l=0;l<s;l++){a.add(e.exportVariable(o.get(l),null))}return r};e.QInACalculatedDimension=function(){};e.QInACalculatedDimension.prototype=new e.QInADimension;e.QInACalculatedDimension.prototype._ff_c="QInACalculatedDimension";e.QInACalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.CALCULATED_DIMENSION};e.QInACalculatedDimension.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=a.getQueryModel();var s=n;var l=r.getStringByKey("Name");if(e.isNull(s)&&e.notNull(o)){s=o.getDimensionManagerBase().getDimensionByNameInternal(l)}if(e.isNull(s)){s=e.QCalculatedDimension._createCalculatedDimension(a,i,l)}s.setDimensionType(e.DimensionType.CALCULATED_DIMENSION);s.setName(l);s.setTopEntries(r.getIntegerByKeyExt("Top",0));s.setSkipEntries(r.getIntegerByKeyExt("Skip",0));var u=r.getStructureByKey("DataSource");s.setPreQueryName(u.getStringByKey("ObjectName"));s.setJoinType(e.JoinType.lookup(r.getStringByKey("JoinType")));var p=r.getListByKey("JoinFields");var g=p.size();var c;for(c=0;c<g;c++){var m=p.getStructureAt(c);s.addJoinFieldByString(m.getStringByKey("JoinFieldName"),m.getStringByKey("JoinFieldNameInReferencedData"))}var y=r.getListByKey("FieldMappings");g=y.size();for(c=0;c<g;c++){var d=y.getStructureAt(c);s.addFieldMappingByString(d.getStringByKey("FieldName"),d.getStringByKey("FieldNameInReferencedData"));if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(d.getStringByKey("CalculatedDimensionFieldValueType")!==null){var A=s.getFieldByName(d.getStringByKey("FieldName"));A.setValueType(e.QInAConverter.lookupValueType(d.getStringByKey("CalculatedDimensionFieldValueType")))}}}this.importFieldsLayout(t,r,s,a);t.importTotals(r,s.getResultStructureControllerBase(),a);return s};e.QInACalculatedDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(a.isHidden()){return null}n.putString("Name",a.getName());var o=a.getAxisType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o));var s=a.getTopEntries();if(s>0){n.putInteger("Top",s)}var l=a.getSkipEntries();if(l>0){n.putInteger("Skip",l)}var u=n.putNewStructure("DataSource");u.putString("ObjectName",a.getPreQueryName());u.putString("Type","Query");n.putString("JoinType",a.getJoinType().getName());var p=n.putNewList("JoinFields");var g=a.getJoinFields();var c=g.size();var m;for(m=0;m<c;m++){var y=g.get(m);var d=p.addNewStructure();d.putString("JoinFieldName",y.getLocaleFieldName());d.putString("JoinFieldNameInReferencedData",y.getReferencedFieldName())}var A=n.putNewList("FieldMappings");var I=a.getFieldMappings();var S=e.XList.create();c=I.size();for(m=0;m<c;m++){var f=I.get(m);if(e.XString.isEqual(a.getKeyField().getName(),f.getLocaleFieldName())){S.insert(0,f)}else{S.add(f)}}for(m=0;m<c;m++){var v=S.get(m);var C=A.addNewStructure();C.putString("FieldName",v.getLocaleFieldName());C.putString("FieldNameInReferencedData",v.getReferencedFieldName());if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var N=v.getLocaleFieldName();if(a.getFieldByName(N).getValueType()!==e.XValueType.STRING){var E=e.QInAConverter.lookupValueTypeInA(a.getFieldByName(N).getValueType());C.putString("CalculatedDimensionFieldValueType",E)}}}e.QInADimension.exportFieldLayout(t,n,a);t.exportTotals(a,n);return n};e.QInAFilterDynamic=function(){};e.QInAFilterDynamic.prototype=new e.QInAFilter;e.QInAFilterDynamic.prototype._ff_c="QInAFilterDynamic";e.QInAFilterDynamic.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_DYNAMIC};e.QInAFilterDynamic.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=r.getStructureByKey("DynamicFilter");if(e.isNull(o)){o=r.getStructureByKey("Filter")}var s=i;var l=null;if(e.notNull(s)){if(s.isDynamicFilterInitialized()){l=s.getDynamicFilter();l.setComplexRoot(null);if(l.getModelCapabilities().supportsCellValueOperand()){l.setIsSuppressingNulls(false)}}s.resetEffectiveFilter()}if(e.notNull(o)&&!o.isEmpty()){l=t.importFilterExpression(l,o,s,a)}if(e.notNull(s)){s.setDynamicFilter(l)}return l};e.QInAFilterDynamic.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a;var s=o;var l=null;if(s.isDynamicFilterInitialized()){l=s.getDynamicFilter()}var u=o.getQueryModel();var p=t.isAbap(o);var g;if(p){g="Filter"}else{g="DynamicFilter"}var c=e.notNull(t.variableProcessingDirective)&&u.getModelCapabilities().supportsVariableMasking();if(c){var m=t.exportFilterExpression(l);if(e.notNull(m)){n.put(g,m)}}else{var y=null;if(s.isTmpFilterInitialized()){y=s.getTmpFilter()}var d=this.exportFilter(t,s,l,s.getLinkedFilters(),y,s.getTransientZoomDisplayFilter(),s.getZoomDataFilter());if(e.notNull(d)){n.put(g,d)}}return n};e.QInAFilterVisibility=function(){};e.QInAFilterVisibility.prototype=new e.QInAFilter;e.QInAFilterVisibility.prototype._ff_c="QInAFilterVisibility";e.QInAFilterVisibility.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_VISIBILITY};e.QInAFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter"};e.QInAFilterVisibility.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;if(e.notNull(o)&&o.isVisibilityFilterInitialized()){var s=o.getVisibilityFilter();s.setComplexRoot(null);if(s.getModelCapabilities().supportsCellValueOperand()){s.setIsSuppressingNulls(false)}}if(e.isNull(r)){return null}var l=t.importFilterExpression(null,r,o,a);if(e.notNull(o)&&e.notNull(l)){o.setVisibilityFilter(l)}return l};e.QInAFilterVisibility.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;if(a.getModelCapabilities().supportsVisibilityFilter()){if(t.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP)){return a.isValueHelpVisibilityFilterInitialized()?this.exportFilter(t,a,a.getValuehelpVisibilityFilter(),null,null,null,null):null}var o=null;if(a.isTmpVisibilityFilterInitialized()){o=a.getTmpVisibilityFilter()}var s=null;if(a.isVisibilityFilterInitialized()){s=a.getVisibilityFilter()}return this.exportFilter(t,a,s,a.getLinkedVisibilityFilters(),o,a.getTransientZoomVisibilityFilter(),null)}return null};e.QInAFilterVisibility.prototype.isValidFilterExpression=function(t,r){return e.notNull(t)};e.QInAMemberFormulaMeasure=function(){};e.QInAMemberFormulaMeasure.prototype=new e.QInAFormulaMeasure;e.QInAMemberFormulaMeasure.prototype._ff_c="QInAMemberFormulaMeasure";e.QInAMemberFormulaMeasure.importIteration=function(t,r,n,i){var a=e.QFactory.createIteration(n);r.setIteration(a);a.setStartValueMemberName(i.getStringByKey("StartValueMember"));var o=i.getListByKey("IterationDimensions");if(e.XCollectionUtils.hasElements(o)){var s=o.size();for(var l=0;l<s;l++){var u=o.getStructureAt(l);var p=e.QFactory.createIterationDimension(n);p.setDimensionName(u.getStringByKey("Name"));p.setPartitionLevelName(u.getStringByKey("PartitionLevel"));a.addIterationDimension(p)}}};e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers=function(t,r){if(e.notNull(r)){var n=r.getChildren();var i=0;while(n.hasNext()){var a=n.next();if(a.getOlapComponentType()===e.OlapComponentType.FORMULA_ITEM_MEMBER){var o=a;if(t.getMeasureDimension().getStructureMemberByAliasOrMember(o.getMemberName())!==null){var s=r;if(!e.XString.isEqual(s.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())){s.set(i,e.QInAFormulaMeasure.signFlipMember(o))}}}else{e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(t,a);if(a.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){var l=a;if(e.XString.isEqual(l.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())&&r.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){var u=r;u.set(i,e.QInAFormulaMeasure.signFlipMember(a))}}}i++}}};e.QInAMemberFormulaMeasure.isAccountModelCrossCalculation=function(t){var r=t.getQueryModel();if(e.notNull(r)&&r.getAccountDimension()!==null&&r.getAccountDimension().getAccountTypeAttributeName()!==null){return t.getDimension()!==r.getAccountDimension()}return false};e.QInAMemberFormulaMeasure.exportCrossCalcSignFlip=function(t,r,n){var i=r.getContext();var a=r.getQueryModel();var o=r.getFormula();var s=o.cloneOlapComponent(i,null);if(s.getOlapComponentType()===e.OlapComponentType.FORMULA_ITEM_MEMBER){var l=s;var u=a.getMeasureDimension().getStructureMemberByAliasOrMember(l.getMemberName());if(e.notNull(u)){if((u.getExceptionAggregationType()===null||u.getMemberType()===e.MemberType.EXCEPTION_AGGREGATION)&&r.getExceptionAggregationType()===null){s=e.QInAFormulaMeasure.signFlipMember(s)}}}else{e.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(a,s);if(s.getOlapComponentType()===e.OlapComponentType.FORMULA_FUNCTION){var p=s;if(e.XString.isEqual(p.getFunctionName(),e.FormulaOperator.GRAND_TOTAL.getName())){s=e.QInAFormulaMeasure.signFlipMember(s)}}}var g=o.cloneOlapComponent(i,null);var c=e.QFactory.createFormulaFunctionWithName(i,e.FormulaOperator.IF.getName());var m=e.QFactory.createFormulaFunctionWithName(i,e.FormulaOperator.OR.getName());c.add(m);var y=a.getAccountDimension().getAccountTypeAttributeName();var d=e.QFactory.createFormulaOperation(i);d.setOperator(e.ComparisonOperator.EQUAL);d.setLeftSide(e.QFactory.createFormulaAttributeWithName(i,y));d.setRightSide(e.QFactory.createFormulaConstantWithStringValue(i,e.AccountType.INC.getName()));m.add(d);var A=e.QFactory.createFormulaOperation(i);A.setOperator(e.ComparisonOperator.EQUAL);A.setLeftSide(e.QFactory.createFormulaAttributeWithName(i,y));A.setRightSide(e.QFactory.createFormulaConstantWithStringValue(i,e.AccountType.LEQ.getName()));m.add(A);var I=e.QFactory.createFormulaOperation(i);I.setOperator(e.MathOperator.MULT);I.setLeftSide(s);I.setRightSide(e.QFactory.createFormulaConstantWithIntValue(i,-1));c.add(I);c.add(g);e.QInAFormulaMeasure.exportFormulaItemSignFlip(t,c,n,i,true,false,r.getName())};e.QInAMemberFormulaMeasure.exportIteration=function(t,r,n){var i=n.putNewStructure("Iteration");var a=r.getIteration();var o=e.QInAExportUtil.getMeasureMemberNameByAlias(r.getQueryModel(),a.getStartValueMemberName(),t);i.putString("StartValueMember",o);var s=a.getIterationDimensions();var l=i.putNewList("IterationDimensions");var u=s.size();for(var p=0;p<u;p++){var g=s.get(p);var c=l.addNewStructure();c.putStringNotNullAndNotEmpty("Name",g.getDimensionName());c.putStringNotNullAndNotEmpty("PartitionLevel",g.getPartitionLevelName())}};e.QInAMemberFormulaMeasure.exportInverseFormulas=function(t,r,n){var i=n.putNewList("InverseFormulas");var a=r.getInverseFormulaList();var o=a.size();for(var s=0;s<o;s++){var l=e.PrFactory.createStructure();i.add(l);var u=a.get(s);var p=e.PrFactory.createStructure();e.QInAFormulaMeasure.exportFormulaItem(t,u.getInternalFormulaItem(),p,r.getContext());l.put("Formula",p);var g=u.getTarget();if(e.notNull(g)){var c=e.PrFactory.createStructure();l.put("Target",c);e.QInAFormulaMeasure.exportFormulaItem(t,g,c,r.getContext())}var m=u.getCondition();if(e.notNull(m)){var y=e.PrFactory.createStructure();l.put("Condition",y);e.QInAFormulaMeasure.exportFormulaItem(t,m,y,r.getContext())}}};e.QInAMemberFormulaMeasure.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=i;var s=a.getQueryModel();if(e.isNull(o)){o=s.getMeasureDimension()}var l;var u=e.QInAMember.getNameForImport(r,o);var p;if(o.getModelCapabilities().supportsCustomMeasuresInMetadata()&&o.getStructureMember(u)!==null){l=o.getStructureMember(u);p=r.getStructureByKey("[Measures].[MemberDetails]").getStructureByKey("Formula")}else{l=e.QFormulaMeasure._createFormulaMeasure(a,o);e.QInAFormulaMeasure.importNameAndText(r,l,o);p=r.getStructureByKey("Formula")}t.importExceptions(r,l);var g=e.QInAFormulaMeasure.importFormulaMeasure(t,o,p,null,a);l.setFormula(g);if(l.supportsCalculatedBeforeAggregation()){l.setIsCalculatedBeforeAggregation(e.XString.isEqual("CalculationBeforeAggregation",r.getStringByKey("ExecutionStep")))}if(e.notNull(p)){var c=p.getListByKey("InverseFormulas");if(e.XCollectionUtils.hasElements(c)){this.importInverseFormula(t,a,l,c)}}var m=p.getStructureByKey("Iteration");if(e.XCollectionUtils.hasElements(m)){e.QInAMemberFormulaMeasure.importIteration(t,l,a,m)}return l};e.QInAMemberFormulaMeasure.prototype.importInverseFormula=function(t,r,n,i){var a=n.getDimension();var o=i.size();var s=n.getInverseFormulaList();for(var l=0;l<o;l++){var u=i.get(l);var p=u.getStructureByKey("Target");var g=u.getStructureByKey("Condition");var c=u.getStructureByKey("Formula");var m=e.QInAFormulaMeasure.importFormulaMeasure(t,a,c,null,r);var y=null;if(e.notNull(g)){y=e.QInAFormulaMeasure.importFormulaMeasure(t,a,g,null,r)}var d=e.QInAFormulaMeasure.importFormulaMeasure(t,a,p,null,r);var A=e.QFormulaInverseFormula.createInverseFormula(r,n,y,d,m);s.add(A)}};e.QInAMemberFormulaMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=e.QInAMember.exportingInOldFormat(t,a);var s=o?"Name":"MemberName";n.putString(s,a.getName());e.QInAMember.exportText(t,n,a);var l=e.PrFactory.createStructure();if(a.isAutoSignFlip()&&e.QInAMemberFormulaMeasure.isAccountModelCrossCalculation(a)){e.QInAMemberFormulaMeasure.exportCrossCalcSignFlip(t,a,l)}else if(o){e.QInAFormulaMeasure.exportFormulaMeasure(t,a,l)}if(e.XCollectionUtils.hasElements(a.getInverseFormulaList())&&o){e.QInAMemberFormulaMeasure.exportInverseFormulas(t,a,l)}if(a.getIteration()!==null&&o){e.QInAMemberFormulaMeasure.exportIteration(t,a,l)}if(l.hasElements()){n.put("Formula",l)}if(a.supportsCalculatedBeforeAggregation()&&a.isCalculatedBeforeAggregation()){n.putString("ExecutionStep","CalculationBeforeAggregation")}return n};e.QInAVarHierNode=function(){};e.QInAVarHierNode.prototype=new e.QInAVarDimMember;e.QInAVarHierNode.prototype._ff_c="QInAVarHierNode";e.QInAVarHierNode.prototype.getComponentType=function(){return e.VariableType.HIERARCHY_NODE_VARIABLE};e.QInAVarHierNode.prototype.importComponentWithStructure=function(t,r,n,i,a){var o=n;var s=r.getStructureByKey("Values");var l=e.QFactory.createFilterExpression(a,o);t.importFilterExpression(l,s,o,a);o.setFilter(l);return o};e.QInAValueHelpFilter=function(){};e.QInAValueHelpFilter.prototype=new e.QInAFilter;e.QInAValueHelpFilter.prototype._ff_c="QInAValueHelpFilter";e.QInAValueHelpFilter.getValueHelpFilter=function(t,r){var n=t.getSelectorFilterUsage();var i=null;if(n===e.QueryFilterUsage.QUERY_FILTER&&r.isDynamicFilterInitialized()){i=r.getDynamicFilter()}else if(n===e.QueryFilterUsage.QUERY_FILTER_EFFECTIVE){i=r.getEffectiveFilter()}else if(n===e.QueryFilterUsage.QUERY_FILTER_EXCLUDING_DIMENSION&&r.isDynamicFilterInitialized()){i=r.getDynamicFilter();e.QInAValueHelpFilter.removeFilterOnDimensionVh(i,t)}else if(n===e.QueryFilterUsage.SELECTOR_FILTER&&r.isValueHelpFilterInitialized()){i=r.getValuehelpFilter()}return i};e.QInAValueHelpFilter.removeFilterOnDimensionVh=function(t,r){var n=t.getCartesianProduct();if(e.notNull(n)){var i=0;while(i<n.size()){var a=n.getCartesianChild(i);if(a.getDimension().isEqualTo(r)){n.removeAt(i)}else{i++}}}};e.QInAValueHelpFilter.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInAValueHelpFilter.prototype.getModelFormat=function(){return e.QModelFormat.INA_VALUE_HELP};e.QInAValueHelpFilter.prototype.importComponentWithStructure=function(e,t,r,n,i){return null};e.QInAValueHelpFilter.prototype.exportComponentWithStructure=function(t,r,n,i){var a=r;var o=a.getQueryModel().getFilter();var s=e.QInAValueHelpFilter.getValueHelpFilter(a,o);if(e.notNull(s)){var l=a.getSelectorFilterUsage();if(l===e.QueryFilterUsage.QUERY_FILTER_EFFECTIVE&&o.isIgnoreInternalNonMeasureFilter()){return this.exportFilter(t,o,o.getDynamicFilter(),o.getLinkedFilters(),o.getTmpFilter(),o.getTransientZoomDisplayFilter(),o.getZoomDataFilter())}else if(a.isSelectorUseQueryDrillOperations()){return this.exportFilter(t,o,s,null,null,o.getTransientZoomDisplayFilter(),o.getZoomDataFilter())}else{return t.exportFilterExpression(s)}}return null};e.DfDocumentsStoreService=function(){};e.DfDocumentsStoreService.prototype=new e.MessageManagerSimple;e.DfDocumentsStoreService.prototype._ff_c="DfDocumentsStoreService";e.DfDocumentsStoreService.createDocumentStoreService=function(t,r,n){var i=new e.DfDocumentsStoreService;i.initialize(t,r,n);return i};e.DfDocumentsStoreService.prototype.m_documentServiceRequest=null;e.DfDocumentsStoreService.prototype.m_documentsDirectoryRequest=null;e.DfDocumentsStoreService.prototype.m_connectionContainer=null;e.DfDocumentsStoreService.prototype.m_documentFetchRequests=null;e.DfDocumentsStoreService.prototype.m_documentStoreRequests=null;e.DfDocumentsStoreService.prototype.m_documentDeleteRequests=null;e.DfDocumentsStoreService.prototype.m_path=null;e.DfDocumentsStoreService.prototype.m_withVersions=false;e.DfDocumentsStoreService.prototype.m_context=null;e.DfDocumentsStoreService.prototype.m_activeDocumentStoreAction=null;e.DfDocumentsStoreService.prototype.m_fileStore=null;e.DfDocumentsStoreService.prototype.m_dataArea=null;e.DfDocumentsStoreService.prototype.m_writeEnabled=false;e.DfDocumentsStoreService.prototype.initialize=function(t,r,n){e.MessageManagerSimple.prototype.setup.call(this);this.m_connectionContainer=t.getQueryManager().getQueryServiceConfig().getConnectionContainer();this.m_path=t.getDocumentsServicePath();this.m_dataArea=n;this.m_withVersions=r;this.m_context=t.getQueryModel();this.m_fileStore=e.XHashMapByString.create();this.m_writeEnabled=t.getSupportsDocuments()===e.DocumentsSupportType.READ_WRITE;this.setupRequests()};e.DfDocumentsStoreService.prototype.setupRequests=function(){this.m_documentServiceRequest=e.DocumentsServiceRequest.create();this.m_documentServiceRequest.setDataArea(this.m_dataArea);this.m_documentsDirectoryRequest=this.m_documentServiceRequest.addDocumentsDirectoryRequestByPath(this.m_path);this.m_documentFetchRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.GET);this.m_documentFetchRequests.setWithVersions(this.m_withVersions);this.m_documentStoreRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.PUT);this.m_documentDeleteRequests=this.m_documentsDirectoryRequest.addDocumentsRequestByType(e.DocumentsRequestAction.DELETE)};e.DfDocumentsStoreService.prototype.releaseRequests=function(){this.m_documentServiceRequest=e.XObjectExt.release(this.m_documentServiceRequest);this.m_documentsDirectoryRequest=null;this.m_documentFetchRequests=null;this.m_documentStoreRequests=null;this.m_documentDeleteRequests=null};e.DfDocumentsStoreService.prototype.addToFetchList=function(e){this.m_documentFetchRequests.addDocumentFileByName(e)};e.DfDocumentsStoreService.prototype.addToDeleteList=function(t){if(!this.m_writeEnabled){throw e.XException.createIllegalStateException("Document Store Service is Read-Only")}this.m_documentDeleteRequests.addDocumentFileByName(t)};e.DfDocumentsStoreService.prototype.addToPutList=function(t,r){if(!this.m_writeEnabled){throw e.XException.createIllegalStateException("Document Store Service is Read-Only")}this.m_documentStoreRequests.addDocumentFileByName(t).setContent(r)};e.DfDocumentsStoreService.prototype.evictDocument=function(t){e.XObjectExt.release(this.m_fileStore.remove(t))};e.DfDocumentsStoreService.prototype.evictAllDocuments=function(){e.XObjectExt.release(this.m_fileStore);this.m_fileStore=e.XHashMapByString.create()};e.DfDocumentsStoreService.prototype.getContentForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getContent():null};e.DfDocumentsStoreService.prototype.getContentForFileAndVersion=function(e,t){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersionByName(t).getContent():null};e.DfDocumentsStoreService.prototype.getDocumentVersionsForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersions():null};e.DfDocumentsStoreService.prototype.getDocumentVersionForFileAndVersion=function(e,t){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersionByName(t):null};e.DfDocumentsStoreService.prototype.getActiveVersionForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getActiveVersion():null};e.DfDocumentsStoreService.prototype.getActiveDocumentVersionForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getActiveDocumentVersion():null};e.DfDocumentsStoreService.prototype.getVersionNamesForFile=function(e){return this.m_fileStore.containsKey(e)?this.m_fileStore.getByKey(e).getVersionNames():null};e.DfDocumentsStoreService.prototype.isWriteEnabled=function(){return this.m_writeEnabled};e.DfDocumentsStoreService.prototype.resetRequests=function(){this.releaseRequests();this.setupRequests()};e.DfDocumentsStoreService.prototype.performRequests=function(t,r,n){e.XObjectExt.release(this.m_activeDocumentStoreAction);this.m_activeDocumentStoreAction=e.DfDocumentsStoreAction.create(t,this,n,this.m_context,this.m_connectionContainer,this.m_documentServiceRequest);this.m_activeDocumentStoreAction.attachListener(r,e.ListenerType.SPECIFIC,n);this.m_activeDocumentStoreAction.process();return this.m_activeDocumentStoreAction};e.DfDocumentsStoreService.prototype.onProviderFetch=function(t,r,n){this.clearMessages();this.addAllMessages(t);var i=null;if(t.isValid()){var a=r.getDocumentDirectories();if(e.XCollectionUtils.hasElements(a)){i=a.get(0);var o=i.getDocumentFiles();for(var s=0;s<o.size();s++){var l=o.get(s);this.m_fileStore.put(l.getName(),l)}}}this.releaseRequests();if(e.notNull(i)){i.clearFilesWithoutReleasing()}e.XObjectExt.release(r);this.setupRequests()};e.DfDocumentsStoreService.prototype.releaseObject=function(){this.releaseRequests();e.MessageManagerSimple.prototype.releaseObject.call(this);this.m_activeDocumentStoreAction=e.XObjectExt.release(this.m_activeDocumentStoreAction);this.m_path=null;this.m_withVersions=false;this.m_context=null;this.m_dataArea=null;this.m_fileStore=e.XObjectExt.release(this.m_fileStore)};e.InAFusionResult=function(){};e.InAFusionResult.prototype=new e.DfProcessContext;e.InAFusionResult.prototype._ff_c="InAFusionResult";e.InAFusionResult.create=function(t,r){var n=new e.InAFusionResult;n.setupProcessContext(t.getProcess());n.m_config=r;n.m_application=t;n.m_layers=e.XList.create();return n};e.InAFusionResult.prototype.m_config=null;e.InAFusionResult.prototype.m_application=null;e.InAFusionResult.prototype.m_connectionContainer=null;e.InAFusionResult.prototype.m_serverMetadata=null;e.InAFusionResult.prototype.m_capabilities=null;e.InAFusionResult.prototype.m_exporter=null;e.InAFusionResult.prototype.m_metadataContent=null;e.InAFusionResult.prototype.m_modelContent=null;e.InAFusionResult.prototype.m_repoContent=null;e.InAFusionResult.prototype.m_layers=null;e.InAFusionResult.prototype.m_cubeDataSource=null;e.InAFusionResult.prototype.getConfig=function(){return this.m_config};e.InAFusionResult.prototype.getApplication=function(){return this.m_application};e.InAFusionResult.prototype.getConnectionContainer=function(){return this.m_connectionContainer};e.InAFusionResult.prototype.getServerMetadata=function(){return this.m_serverMetadata};e.InAFusionResult.prototype.setServerMetadata=function(e){this.m_serverMetadata=e};e.InAFusionResult.prototype.setConnectionContainer=function(e){this.m_connectionContainer=e};e.InAFusionResult.prototype.getCapabilities=function(){return this.m_capabilities};e.InAFusionResult.prototype.setCapabilities=function(e){this.m_capabilities=e};e.InAFusionResult.prototype.getMainCapabilities=function(){return this.m_capabilities.getActiveCapabilities()};e.InAFusionResult.prototype.getExporter=function(){return this.m_exporter};e.InAFusionResult.prototype.setExporter=function(e){this.m_exporter=e};e.InAFusionResult.prototype.getMetadataContent=function(){return this.m_metadataContent};e.InAFusionResult.prototype.setMetadataContent=function(e){this.m_metadataContent=e};e.InAFusionResult.prototype.getModelContent=function(){return this.m_modelContent};e.InAFusionResult.prototype.setModelResponse=function(e){this.m_modelContent=e};e.InAFusionResult.prototype.getRepositoryContent=function(){return this.m_repoContent};e.InAFusionResult.prototype.setRepositoryContent=function(e){this.m_repoContent=e};e.InAFusionResult.prototype.addLayer=function(e){this.m_layers.add(e)};e.InAFusionResult.prototype.getLayer=function(e){for(var t=0;t<this.m_layers.size();t++){var r=this.m_layers.get(t);if(r.getComponentType()===e){return r}}return null};e.InAFusionResult.prototype.getDataSource=function(){return this.m_cubeDataSource};e.InAFusionResult.prototype.setDataSource=function(e){this.m_cubeDataSource=e};e.InARsDataCellProvider=function(){};e.InARsDataCellProvider.prototype=new e.DfApplicationContext;e.InARsDataCellProvider.prototype._ff_c="InARsDataCellProvider";e.InARsDataCellProvider.create=function(t,r){var n=new e.InARsDataCellProvider;n.setupProvider(t,r);return n};e.InARsDataCellProvider.prototype.m_supportsDataCellMixedValues=false;e.InARsDataCellProvider.prototype.m_supportsSAPDateFormat=false;e.InARsDataCellProvider.prototype.m_supportsInputReadinessStates=false;e.InARsDataCellProvider.prototype.m_ocpStructure=null;e.InARsDataCellProvider.prototype.m_exceptionSettings=null;e.InARsDataCellProvider.prototype.m_rowsCount=0;e.InARsDataCellProvider.prototype.m_columnsCount=0;e.InARsDataCellProvider.prototype.m_csValueException=null;e.InARsDataCellProvider.prototype.m_csMaxAlertLevelName=null;e.InARsDataCellProvider.prototype.m_csMaxAlertLevel=null;e.InARsDataCellProvider.prototype.m_csExceptionSetting=null;e.InARsDataCellProvider.prototype.m_csExceptionPriority=null;e.InARsDataCellProvider.prototype.m_lastX=0;e.InARsDataCellProvider.prototype.m_lastY=0;e.InARsDataCellProvider.prototype.m_valueType=null;e.InARsDataCellProvider.prototype.m_csStringValue=null;e.InARsDataCellProvider.prototype.m_csFormattedValue=null;e.InARsDataCellProvider.prototype.m_csFormatString=null;e.InARsDataCellProvider.prototype.m_csPlanningCommandIds=null;e.InARsDataCellProvider.prototype.m_csQueryDataCellReference=null;e.InARsDataCellProvider.prototype.m_csFormattedCurrencyUnit=null;e.InARsDataCellProvider.prototype.m_csCurrencyUnit=null;e.InARsDataCellProvider.prototype.m_csDoubleValue=0;e.InARsDataCellProvider.prototype.m_csCurrencyUnitType=0;e.InARsDataCellProvider.prototype.m_csCurrencyUnitPosition=0;e.InARsDataCellProvider.prototype.m_csComplexUnitIndex=0;e.InARsDataCellProvider.prototype.m_csDocumentId=null;e.InARsDataCellProvider.prototype.m_csInputReadinessIndex=0;e.InARsDataCellProvider.prototype.m_csInputEnabled=false;e.InARsDataCellProvider.prototype.m_csLockedValue=false;e.InARsDataCellProvider.prototype.m_csIsInsideBounds=false;e.InARsDataCellProvider.prototype.m_exceptions=null;e.InARsDataCellProvider.prototype.m_inputEnabled=null;e.InARsDataCellProvider.prototype.m_inputReadinessIndex=null;e.InARsDataCellProvider.prototype.m_lockedValue=null;e.InARsDataCellProvider.prototype.m_unitDescriptions=null;e.InARsDataCellProvider.prototype.m_unitTypes=null;e.InARsDataCellProvider.prototype.m_unitPositions=null;e.InARsDataCellProvider.prototype.m_units=null;e.InARsDataCellProvider.prototype.m_values=null;e.InARsDataCellProvider.prototype.m_roundedValues=null;e.InARsDataCellProvider.prototype.m_valuesFormatted=null;e.InARsDataCellProvider.prototype.m_formatStrings=null;e.InARsDataCellProvider.prototype.m_cellValueTypes=null;e.InARsDataCellProvider.prototype.m_cellDataTypes=null;e.InARsDataCellProvider.prototype.m_queryDataCellReferences=null;e.InARsDataCellProvider.prototype.m_exceptionNameWithSettings=null;e.InARsDataCellProvider.prototype.m_exceptionName=null;e.InARsDataCellProvider.prototype.m_exceptionAlertLevel=null;e.InARsDataCellProvider.prototype.m_exceptionSettingIndex=null;e.InARsDataCellProvider.prototype.m_planningCommandIds=null;e.InARsDataCellProvider.prototype.m_complexUnitIndices=null;e.InARsDataCellProvider.prototype.m_documentIds=null;e.InARsDataCellProvider.prototype.m_supportsUnifiedDataCells=false;e.InARsDataCellProvider.prototype.m_csDecimalPlaces=0;e.InARsDataCellProvider.prototype.m_csScalingFactor=0;e.InARsDataCellProvider.prototype.m_decimalPlaces=null;e.InARsDataCellProvider.prototype.m_scalingFactors=null;e.InARsDataCellProvider.prototype.m_explainQueryNames=null;e.InARsDataCellProvider.prototype.m_explainQueryName=null;e.InARsDataCellProvider.prototype.copyInARsDataCellProvider=function(t){this.m_supportsDataCellMixedValues=t.m_supportsDataCellMixedValues;this.m_supportsSAPDateFormat=t.m_supportsSAPDateFormat;this.m_supportsInputReadinessStates=t.m_supportsInputReadinessStates;this.m_supportsUnifiedDataCells=t.m_supportsUnifiedDataCells;var r=e.isNull(t.m_exceptionSettings)?null:t.m_exceptionSettings.getPermaCopy();var n=e.isNull(t.m_ocpStructure)?null:t.m_ocpStructure.getPermaCopy();this.setOcpStructure(n,t.m_columnsCount,t.m_rowsCount,r)};e.InARsDataCellProvider.prototype.setupProvider=function(e,t){this.setupApplicationContext(e);this.m_supportsSAPDateFormat=t.getCapabilitiesBase().supportsSapDate();this.m_supportsUnifiedDataCells=t.getCapabilitiesBase().supportsUnifiedDataCells();this.m_supportsDataCellMixedValues=t.getCapabilitiesBase().supportsDataCellMixedValues();this.m_supportsInputReadinessStates=t.supportsInputReadinessStates()};e.InARsDataCellProvider.prototype.releaseObject=function(){this.m_ocpStructure=null;this.m_exceptionSettings=null;this.m_csValueException=null;this.m_csMaxAlertLevelName=null;this.m_csExceptionSetting=e.XObjectExt.release(this.m_csExceptionSetting);this.m_csExceptionPriority=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_csExceptionPriority);this.m_csMaxAlertLevel=null;this.m_csFormattedValue=null;this.m_csFormatString=null;this.m_csPlanningCommandIds=null;this.m_csQueryDataCellReference=null;this.m_csFormattedCurrencyUnit=null;this.m_csCurrencyUnit=null;this.m_exceptions=e.XObjectExt.release(this.m_exceptions);this.m_inputEnabled=e.XObjectExt.release(this.m_inputEnabled);this.m_inputReadinessIndex=e.XObjectExt.release(this.m_inputReadinessIndex);this.m_lockedValue=e.XObjectExt.release(this.m_lockedValue);this.m_unitDescriptions=e.XObjectExt.release(this.m_unitDescriptions);this.m_unitTypes=e.XObjectExt.release(this.m_unitTypes);this.m_unitPositions=e.XObjectExt.release(this.m_unitPositions);this.m_units=e.XObjectExt.release(this.m_units);this.m_values=e.XObjectExt.release(this.m_values);this.m_valuesFormatted=e.XObjectExt.release(this.m_valuesFormatted);this.m_formatStrings=e.XObjectExt.release(this.m_formatStrings);this.m_cellValueTypes=e.XObjectExt.release(this.m_cellValueTypes);this.m_cellDataTypes=e.XObjectExt.release(this.m_cellDataTypes);this.m_queryDataCellReferences=e.XObjectExt.release(this.m_queryDataCellReferences);this.m_exceptionNameWithSettings=null;this.m_exceptionName=e.XObjectExt.release(this.m_exceptionName);this.m_exceptionAlertLevel=e.XObjectExt.release(this.m_exceptionAlertLevel);this.m_exceptionSettingIndex=e.XObjectExt.release(this.m_exceptionSettingIndex);this.m_planningCommandIds=e.XObjectExt.release(this.m_planningCommandIds);this.m_decimalPlaces=e.XObjectExt.release(this.m_decimalPlaces);this.m_scalingFactors=e.XObjectExt.release(this.m_scalingFactors);this.m_complexUnitIndices=e.XObjectExt.release(this.m_complexUnitIndices);this.m_documentIds=e.XObjectExt.release(this.m_documentIds);this.m_explainQueryNames=e.XObjectExt.release(this.m_explainQueryNames);e.DfApplicationContext.prototype.releaseObject.call(this)};e.InARsDataCellProvider.prototype.setOcpStructure=function(t,r,n,i){this.m_ocpStructure=t;this.m_rowsCount=n;this.m_columnsCount=r;if(e.notNull(this.m_ocpStructure)){this.m_exceptions=this.getColumn("Exceptions");if(e.isNull(i)){this.m_exceptionName=this.getColumn("ExceptionName");this.m_exceptionAlertLevel=this.getColumn("ExceptionAlertLevel")}else{this.m_exceptionSettings=i;this.m_exceptionSettingIndex=this.getColumn("ExceptionSettingIndex")}if(this.m_supportsInputReadinessStates){this.m_inputReadinessIndex=this.getColumn("InputReadinessIndex")}else{this.m_inputEnabled=this.getColumn("InputEnabled")}this.m_lockedValue=this.getColumn("LockedValue");this.m_unitDescriptions=this.getColumn("UnitDescriptions");this.m_unitTypes=this.getColumn("UnitTypes");this.m_unitPositions=this.getColumn("UnitPositions");this.m_units=this.getColumn("Units");this.m_complexUnitIndices=this.getColumn("UnitIndex");this.m_documentIds=this.getColumn("DocumentsIds");this.m_values=this.getColumn("Values");this.m_valuesFormatted=this.getColumn("ValuesFormatted");if(this.m_supportsDataCellMixedValues){this.m_roundedValues=this.getColumn("ValuesRounded")}else{this.m_roundedValues=null}this.m_planningCommandIds=this.getColumn("Actions");this.m_formatStrings=this.getColumn("CellFormat");this.m_cellValueTypes=this.getColumn("CellValueTypes");this.m_cellDataTypes=this.getColumn("CellDataType");this.m_queryDataCellReferences=this.getColumn("QueryDataCellReferences");this.m_explainQueryNames=this.getColumn("ExplainQueryName");if(this.m_supportsUnifiedDataCells){this.m_decimalPlaces=this.getColumn("NumericRounding");this.m_scalingFactors=this.getColumn("NumericShift")}}this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.m_csMaxAlertLevel=e.AlertLevel.NORMAL};e.InARsDataCellProvider.prototype.getColumn=function(t){var r=this.m_ocpStructure.getStructureByKey(t);if(e.isNull(r)){return null}return e.InARsEncodedValues.createByStructure(r)};e.InARsDataCellProvider.prototype.resetIfNotNull=function(t){if(e.notNull(t)){t.resetCursor()}};e.InARsDataCellProvider.prototype.resetCursor=function(){this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.resetIfNotNull(this.m_exceptions);this.resetIfNotNull(this.m_exceptionName);this.resetIfNotNull(this.m_exceptionAlertLevel);this.resetIfNotNull(this.m_exceptionSettingIndex);this.resetIfNotNull(this.m_inputEnabled);this.resetIfNotNull(this.m_inputReadinessIndex);this.resetIfNotNull(this.m_lockedValue);this.resetIfNotNull(this.m_unitDescriptions);this.resetIfNotNull(this.m_unitTypes);this.resetIfNotNull(this.m_unitPositions);this.resetIfNotNull(this.m_units);this.resetIfNotNull(this.m_values);this.resetIfNotNull(this.m_roundedValues);this.resetIfNotNull(this.m_valuesFormatted);this.resetIfNotNull(this.m_planningCommandIds);this.resetIfNotNull(this.m_formatStrings);this.resetIfNotNull(this.m_cellValueTypes);this.resetIfNotNull(this.m_queryDataCellReferences);this.resetIfNotNull(this.m_cellDataTypes);this.resetIfNotNull(this.m_decimalPlaces);this.resetIfNotNull(this.m_scalingFactors);this.resetIfNotNull(this.m_explainQueryNames);this.resetIfNotNull(this.m_complexUnitIndices);this.resetIfNotNull(this.m_documentIds)};e.InARsDataCellProvider.prototype.notifyCursorChange=function(t,r,n){t.setColumn(r);t.setRow(n);t.reset();if(n<this.m_lastY||n===this.m_lastY&&r<this.m_lastX){this.resetCursor()}while(this.m_csIsInsideBounds&&(n>this.m_lastY||r>this.m_lastX)){this.readNextIndex();this.m_lastX++;if(this.m_lastX>=this.m_columnsCount||this.m_lastY===-1){this.m_lastX=0;this.m_lastY++}}if(!this.m_csIsInsideBounds){t.setValueException(e.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){t.setFormattedValue("")}else{t.setFormattedValue(e.ValueException.NULL_VALUE.getName())}t.setInitialValue(null)}else if(n===this.m_lastY&&r===this.m_lastX){this.updateValidCell(t)}else{t.setValueException(e.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){t.setFormattedValue("")}else{t.setFormattedValue(e.ValueException.NULL_VALUE.getName())}t.setInitialValue(null)}};e.InARsDataCellProvider.prototype.updateValidCell=function(t){t.setValueType(this.m_valueType);var r=this.m_supportsUnifiedDataCells&&this.m_csValueException!==e.ValueException.NORMAL&&this.m_csValueException!==e.ValueException.ZERO&&this.m_csValueException!==e.ValueException.MIXED_CURRENCIES_OR_UNITS;if(this.m_csValueException===e.ValueException.NULL_VALUE||this.m_csValueException===e.ValueException.UNDEFINED||r){t.setInitialValue(null)}else{t.setInitialValue(this.getXValue())}if(r){t.setFormattedValue("")}else{t.setFormattedValue(this.m_csFormattedValue)}t.setFormatString(this.m_csFormatString);t.setValueException(this.m_csValueException);if(e.isNull(this.m_csMaxAlertLevelName)){t.setMaxAlertLevelName(this.m_exceptionNameWithSettings)}else{t.setMaxAlertLevelName(this.m_csMaxAlertLevelName)}t.setMaxAlertLevel(this.m_csMaxAlertLevel);t.setDataEntryEnabled(this.m_csInputEnabled);t.setInputReadinessIndex(this.m_csInputReadinessIndex);t.setExceptionSettings(this.m_csExceptionSetting);t.setExceptionPriorities(this.m_csExceptionPriority);t.setOriginalValueLock(this.m_csLockedValue);t.setQueryDataCellReference(this.m_csQueryDataCellReference);if(e.notNull(this.m_complexUnitIndices)){t.setUnitIndex(this.m_csComplexUnitIndex)}if(e.notNull(this.m_documentIds)){t.setDocumentId(this.m_csDocumentId)}this.updateCurrencyUnit(t.getCurrencyUnitBase());var n=t.getPlanningCommandIdsBase();n.clear();if(e.XStringUtils.isNotNullAndNotEmpty(this.m_csPlanningCommandIds)){var i=e.XStringTokenizer.splitString(this.m_csPlanningCommandIds," ");if(e.notNull(i)){n.addAll(i)}}if(this.m_supportsUnifiedDataCells&&!this.m_valueType.isNumber()){t.setDecimalPlaces(0);t.setScalingFactor(0)}else{t.setDecimalPlaces(this.m_csDecimalPlaces);t.setScalingFactor(this.m_csScalingFactor)}if(e.notNull(this.m_explainQueryNames)){t.setExplainQueryName(this.m_explainQueryName)}};e.InARsDataCellProvider.prototype.updateCurrencyUnit=function(t){if(this.m_csCurrencyUnitType===1){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(false);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===2){t.setIsEmpty(false);t.setHasCurrency(false);t.setHasUnit(true);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===3){t.setIsEmpty(false);t.setHasCurrency(true);t.setHasUnit(true);t.setIsMixed(false)}else if(this.m_csCurrencyUnitType===-1){t.setIsEmpty(false);t.setIsMixed(true);t.setHasCurrency(true);t.setHasUnit(true)}else{t.setIsEmpty(true);t.setHasCurrency(false);t.setHasUnit(false);t.setIsMixed(false)}if(!t.isEmpty()){if(e.notNull(this.m_csFormattedCurrencyUnit)){t.setFormatted(this.m_csFormattedCurrencyUnit)}if(e.notNull(this.m_csCurrencyUnit)){if(this.m_csCurrencyUnitPosition===2){t.setPrefix(this.m_csCurrencyUnit)}else{t.setSuffix(this.m_csCurrencyUnit)}}}};e.InARsDataCellProvider.prototype.getXValue=function(){if(this.m_valueType.isNumber()){return e.XDoubleValue.create(this.m_csDoubleValue)}else if(this.m_valueType===e.XValueType.TIMESPAN){return e.XTimeSpan.create(e.XDouble.convertToLong(this.m_csDoubleValue))}else if(this.m_valueType===e.XValueType.DATE){return e.XDate.createDateFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.TIME){return e.XTime.createTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.DATE_TIME){return e.XDateTime.createDateTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat)}else if(this.m_valueType===e.XValueType.STRING){if(e.XStringUtils.isNotNullAndNotEmpty(this.m_csStringValue)){return e.XStringValue.create(this.m_csStringValue)}return null}throw e.XException.createIllegalArgumentException(e.XStringUtils.concatenate2("Unsupported type:",this.m_valueType.getName()))};e.InARsDataCellProvider.prototype.setExceptionSettings=function(t){var r=false;if(t===-1){this.m_csExceptionSetting=null;this.m_csExceptionPriority=null;this.m_exceptionNameWithSettings=null}else{var n=this.m_exceptionSettings.getListAt(t);this.m_csExceptionSetting=e.XHashMapOfStringByString.create();this.m_csExceptionPriority=e.XHashMapByString.create();var i=n.size();for(var a=0;a<i;a++){var o=n.getStructureAt(a);var s=o.getStringByKey("SettingName");var l=o.getStringByKey("Value");this.m_csExceptionSetting.put(s,l);this.m_csExceptionPriority.put(s,e.XIntegerValue.create(o.getIntegerByKey("Priority")));if(e.ExceptionSetting.getByName(s)===e.ExceptionSetting.ALERT_LEVEL){r=true;var u=e.XInteger.convertFromStringWithRadix(l,10);this.m_csMaxAlertLevel=e.QInAConverter.lookupAlertLevel(u);this.m_exceptionNameWithSettings=o.getStringByKey("ExceptionName")}}}if(!r){this.m_csMaxAlertLevel=e.AlertLevel.NORMAL}};e.InARsDataCellProvider.prototype.readNextIndex=function(){if(e.notNull(this.m_values)&&this.m_values.hasNextValue()){if(e.isNull(this.m_exceptions)){this.m_csValueException=e.ValueException.NORMAL}else{this.m_csValueException=e.QInAConverter.lookupException(this.m_exceptions.getNextIntegerValue())}if(e.notNull(this.m_exceptionSettingIndex)){this.setExceptionSettings(this.m_exceptionSettingIndex.getNextIntegerValue())}else if(e.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevel=e.QInAConverter.lookupAlertLevel(this.m_exceptionAlertLevel.getNextIntegerValue())}if(e.notNull(this.m_exceptionSettingIndex)){this.m_csMaxAlertLevelName=this.m_exceptionNameWithSettings}else if(e.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevelName=this.m_exceptionName.getNextStringValue()}if(e.notNull(this.m_valuesFormatted)){this.m_csFormattedValue=this.m_valuesFormatted.getNextStringValue()}if(e.notNull(this.m_planningCommandIds)){this.m_csPlanningCommandIds=this.m_planningCommandIds.getNextStringValue()}if(e.notNull(this.m_formatStrings)){this.m_csFormatString=this.m_formatStrings.getNextStringValue()}if(e.notNull(this.m_queryDataCellReferences)){this.m_csQueryDataCellReference=this.m_queryDataCellReferences.getNextStringValue()}if(e.notNull(this.m_units)){this.m_csFormattedCurrencyUnit=this.m_units.getNextStringValue();this.m_csCurrencyUnitType=1}if(e.notNull(this.m_unitTypes)){this.m_csCurrencyUnitType=this.m_unitTypes.getNextIntegerValue()}if(e.notNull(this.m_unitPositions)){this.m_csCurrencyUnitPosition=this.m_unitPositions.getNextIntegerValue()}if(e.notNull(this.m_unitDescriptions)){this.m_csCurrencyUnit=this.m_unitDescriptions.getNextStringValue()}if(e.notNull(this.m_complexUnitIndices)){this.m_csComplexUnitIndex=this.m_complexUnitIndices.getNextIntegerValue()}if(e.notNull(this.m_documentIds)){this.m_csDocumentId=this.m_documentIds.getNextStringValue()}this.readNextValues();if(e.isNull(this.m_inputEnabled)){this.m_csInputEnabled=false}else{this.m_csInputEnabled=this.m_inputEnabled.getNextIntegerValue()!==0}if(e.notNull(this.m_inputReadinessIndex)){this.m_csInputReadinessIndex=this.m_inputReadinessIndex.getNextIntegerValue()}if(e.isNull(this.m_lockedValue)){this.m_csLockedValue=false}else{this.m_csLockedValue=this.m_lockedValue.getNextIntegerValue()!==0}if(e.notNull(this.m_decimalPlaces)){this.m_csDecimalPlaces=this.m_decimalPlaces.getNextIntegerValue()}if(e.notNull(this.m_scalingFactors)){this.m_csScalingFactor=this.m_scalingFactors.getNextIntegerValue()}if(e.notNull(this.m_explainQueryNames)){this.m_explainQueryName=this.m_explainQueryNames.getNextStringValue()}}else{this.m_csIsInsideBounds=false}};e.InARsDataCellProvider.prototype.readNextValues=function(){if(this.m_supportsDataCellMixedValues){this.m_valueType=e.XValueType.DOUBLE;if(e.notNull(this.m_cellValueTypes)){this.m_valueType=e.QInAConverter.lookupValueTypeByInt(this.m_cellValueTypes.getNextIntegerValue())}if(this.m_csValueException===e.ValueException.NORMAL||this.m_csValueException===e.ValueException.MIXED_CURRENCIES_OR_UNITS){if(this.m_valueType.isNumber()){this.m_csDoubleValue=this.m_values.getNextDoubleValue()}else{this.m_csDoubleValue=0;this.m_values.skip()}if(e.notNull(this.m_roundedValues)){this.m_csStringValue=this.m_roundedValues.getNextStringValue()}}else{this.m_csDoubleValue=0;this.m_csStringValue=null;this.m_values.skip();if(e.notNull(this.m_roundedValues)){this.m_roundedValues.skip()}}}else{if(e.notNull(this.m_cellDataTypes)){var t=this.m_cellDataTypes.getNextStringValue();var r=e.QInAConverter.lookupValueType(t);this.m_valueType=r;if(r.isNumber()){this.m_csDoubleValue=this.m_values.getNextDoubleValue();this.m_csStringValue=null}else{this.m_csStringValue=this.m_values.getNextStringValue();this.m_csDoubleValue=0}}else if(e.notNull(this.m_cellValueTypes)){var n=this.m_cellValueTypes.getNextIntegerValue();this.m_valueType=e.QInAConverter.lookupValueTypeByInt(n);this.m_csDoubleValue=this.m_values.getNextDoubleValue()}else{throw e.XException.createIllegalStateException("Bad protocol: Values cannot be retrieved")}}};e.InARsDataCellProvider.prototype.getAvailableDataCellCount=function(){return this.m_columnsCount*this.m_rowsCount};e.InARsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return this.m_columnsCount};e.InARsDataCellProvider.prototype.getAvailableDataCellRows=function(){return this.m_rowsCount};e.InARsDimension=function(){};e.InARsDimension.prototype=new e.DfNameTextObject;e.InARsDimension.prototype._ff_c="InARsDimension";e.InARsDimension.create=function(t,r,n,i,a){var o=new e.InARsDimension;var s=t.getStringByKey("Name");var l=t.getStructureByKey("Hierarchy");var u;var p;if(e.isNull(l)){u=e.notNull(a)?a.getHierarchyName():null;p=e.Alignment.DEFAULT_VALUE}else{u=l.getStringByKey("Name");if(l.hasStringByKey("LowerLevelNodeAlignment")){var g=l.getStringByKeyExt("LowerLevelNodeAlignment","Default");p=e.QInAConverter.lookupLowerLevelNodeAlignment(g)}else{var c=l.getBooleanByKeyExt("ExpandBottomUp",false);p=c?e.Alignment.CHILDREN_ABOVE_PARENT:e.Alignment.CHILDREN_BELOW_PARENT}}var m=t.getListByKey("Attributes");var y=e.QInAConverter.lookupDimensionType(t.getIntegerByKeyExt("DimensionType",0));var d=t.getBooleanByKeyExt("IsClustered",false);o.setupExt(s,m,r,n,i,u,y,p,a,d);return o};e.InARsDimension.prototype.m_fields=null;e.InARsDimension.prototype.m_displayValues=null;e.InARsDimension.prototype.m_drillStates=null;e.InARsDimension.prototype.m_memberIndexes=null;e.InARsDimension.prototype.m_parentIndexes=null;e.InARsDimension.prototype.m_drillGroupIndexes=null;e.InARsDimension.prototype.m_nodeIds=null;e.InARsDimension.prototype.m_childCountValues=null;e.InARsDimension.prototype.m_memberTypesEncoded=null;e.InARsDimension.prototype.m_memberTypes=null;e.InARsDimension.prototype.m_keyFieldIndex=0;e.InARsDimension.prototype.m_hierarchyNavigationFieldIndex=0;e.InARsDimension.prototype.m_textFieldIndex=0;e.InARsDimension.prototype.m_hierarchyPathFieldIndex=0;e.InARsDimension.prototype.m_namePathFieldIndex=0;e.InARsDimension.prototype.m_isClustered=false;e.InARsDimension.prototype.m_absoluteLevels=null;e.InARsDimension.prototype.m_lbhToUdhConversionProperties=null;e.InARsDimension.prototype.m_isHierarchyActive=false;e.InARsDimension.prototype.m_hierarchyName=null;e.InARsDimension.prototype.m_dimensionType=null;e.InARsDimension.prototype.m_childAlignment=null;e.InARsDimension.prototype.cloneExt=function(t){var r=new e.InARsDimension;r.copyInARsDimension(this);return r};e.InARsDimension.prototype.isClustered=function(){return this.m_isClustered};e.InARsDimension.prototype.copyInARsDimension=function(t){this.setupWithNameText(t.getName(),t.getText());this.m_fields=e.XCollectionUtils.createListOfClones(t.m_fields);if(e.notNull(t.m_displayValues)){this.m_displayValues=t.m_displayValues.clone()}if(e.notNull(t.m_drillStates)){this.m_drillStates=t.m_drillStates.clone()}this.m_memberIndexes=t.m_memberIndexes.clone();if(e.notNull(t.m_parentIndexes)){this.m_parentIndexes=t.m_parentIndexes.clone()}if(e.notNull(t.m_drillGroupIndexes)){this.m_drillGroupIndexes=t.m_drillGroupIndexes.clone()}if(e.notNull(t.m_nodeIds)){this.m_nodeIds=t.m_nodeIds.clone()}if(e.notNull(t.m_childCountValues)){this.m_childCountValues=t.m_childCountValues.clone()}this.m_memberTypesEncoded=t.m_memberTypesEncoded.clone();this.m_memberTypes=t.m_memberTypes.createArrayCopy();this.m_keyFieldIndex=t.m_keyFieldIndex;this.m_hierarchyNavigationFieldIndex=t.m_hierarchyNavigationFieldIndex;this.m_textFieldIndex=t.m_textFieldIndex;this.m_hierarchyPathFieldIndex=t.m_hierarchyPathFieldIndex;this.m_namePathFieldIndex=t.m_namePathFieldIndex;this.m_isClustered=t.m_isClustered;if(e.notNull(this.m_absoluteLevels)){this.m_absoluteLevels=t.m_absoluteLevels.clone()}this.m_isHierarchyActive=t.m_isHierarchyActive;this.m_hierarchyName=t.m_hierarchyName;this.m_dimensionType=t.m_dimensionType;this.m_childAlignment=t.m_childAlignment;if(e.notNull(t.m_lbhToUdhConversionProperties)){this.m_lbhToUdhConversionProperties=t.m_lbhToUdhConversionProperties.clone()}};e.InARsDimension.prototype.releaseObject=function(){this.m_fields=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fields);this.m_displayValues=e.XObjectExt.release(this.m_displayValues);this.m_drillStates=e.XObjectExt.release(this.m_drillStates);this.m_memberIndexes=e.XObjectExt.release(this.m_memberIndexes);this.m_parentIndexes=e.XObjectExt.release(this.m_parentIndexes);this.m_drillGroupIndexes=e.XObjectExt.release(this.m_drillGroupIndexes);this.m_nodeIds=e.XObjectExt.release(this.m_nodeIds);this.m_memberTypesEncoded=e.XObjectExt.release(this.m_memberTypesEncoded);this.m_memberTypes=e.XObjectExt.release(this.m_memberTypes);this.m_childCountValues=e.XObjectExt.release(this.m_childCountValues);this.m_absoluteLevels=e.XObjectExt.release(this.m_absoluteLevels);this.m_dimensionType=null;this.m_hierarchyName=null;this.m_childAlignment=null;e.DfNameTextObject.prototype.releaseObject.call(this)};e.InARsDimension.prototype.setupExt=function(t,r,n,i,a,o,s,l,u,p){this._setupInternal(t);this.m_keyFieldIndex=-1;this.m_hierarchyNavigationFieldIndex=-1;this.m_textFieldIndex=-1;this.m_hierarchyPathFieldIndex=-1;this.m_namePathFieldIndex=-1;this.m_hierarchyName=o;this.m_dimensionType=s;this.m_childAlignment=l;this.m_lbhToUdhConversionProperties=u;this.m_isClustered=p;var g=i===e.QContextType.SELECTOR;var c=e.XCollectionUtils.getByName(a.getRsDimensions(),t);this.m_isHierarchyActive=this._isHierarchyActiveForContext(c,o,g);if(e.notNull(r)){var m=null;var y=null;var d=null;var A=null;var I=null;var S=null;if(e.notNull(n)){m=n.getFlatKeyField();A=n.getTextField();S=n.getNamePathField();this.m_dimensionType=n.getDimensionType();if(this.m_isHierarchyActive||g){y=n.getHierarchyKeyField();d=n.getHierarchyNavigationField();I=n.getHierarchyPathField()}}this.extractFieldIndices(r,a,n,m,y,d,A,I,S)}};e.InARsDimension.prototype.extractFieldIndices=function(t,r,n,i,a,o,s,l,u){var p=e.isNull(n)?0:-1;var g=-1;var c=-1;this.m_fields=e.XList.create();var m=t.size();for(var y=0;y<m;y++){var d=t.getStructureAt(y);var A=this.getFieldName(d);var I=e.QInAConverter.lookupPresentationType(d.getStringByKey("PresentationType"));if((e.isNull(i)||p<0)&&I===e.PresentationType.KEY||e.notNull(i)&&e.XString.isEqual(A,i.getName())){p=y}if((e.isNull(a)||g<0)&&I===e.PresentationType.HIERARCHY_KEY||e.notNull(a)&&e.XString.isEqual(A,a.getName())){g=y}if(e.notNull(o)&&e.XString.isEqual(A,o.getName())){this.m_hierarchyNavigationFieldIndex=y}if((e.isNull(l)||this.m_hierarchyPathFieldIndex<0)&&I===e.PresentationType.HIERARCHY_PATH||e.notNull(l)&&e.XString.isEqual(A,l.getName())){this.m_hierarchyPathFieldIndex=y}if(e.notNull(s)&&e.XString.isEqual(A,s.getName())){this.m_textFieldIndex=y}if(e.isNull(s)&&I===e.PresentationType.HIERARCHY_TEXT){this.m_textFieldIndex=y}if(e.isNull(s)&&this.m_textFieldIndex===-1&&I===e.PresentationType.TEXT){this.m_textFieldIndex=y}if(e.isNull(s)&&this.m_textFieldIndex===-1&&(I===e.PresentationType.SHORT_TEXT||I===e.PresentationType.MEDIUM_TEXT||I===e.PresentationType.LONG_TEXT||I===e.PresentationType.XL_LONG_TEXT)){c=y}if((e.isNull(u)||this.m_namePathFieldIndex<0)&&I===e.PresentationType.NAME_PATH||e.notNull(u)&&e.XString.isEqual(A,u.getName())){this.m_namePathFieldIndex=y}if(e.notNull(n)&&n.isMeasureStructure()&&e.XString.startsWith(A,"1ROWCOUNT")){var S=e.XStringTokenizer.splitString(A,".").get(1);if(e.XString.endsWith(n.getKeyField().getName(),S)){p=y}}else if(e.isNull(n)&&r.getConvenienceCommands().getQueryManager().isShallow()&&e.XString.isEqual(A,"1ROWCOUNT.KEY")){p=y}this.m_fields.add(e.InARsField.create(A,d))}this.m_keyFieldIndex=g===-1?p:g;if(this.m_textFieldIndex===-1&&c!==-1){this.m_textFieldIndex=c}};e.InARsDimension.prototype._isHierarchyActiveForContext=function(t,r,n){if(e.isNull(t)){return e.XStringUtils.isNotNullAndNotEmpty(r)}return n?t.isSelectorHierarchyActive():t.isHierarchyActive()};e.InARsDimension.prototype.getFieldName=function(t){var r=t.getStringByKey("Name");if(e.notNull(this.m_lbhToUdhConversionProperties)){r=e.XString.replace(r,this.m_lbhToUdhConversionProperties.getUdhName(),this.m_lbhToUdhConversionProperties.getDimensionName());t.putString("Name",r)}return r};e.InARsDimension.prototype.getHierarchyName=function(){return this.m_hierarchyName};e.InARsDimension.prototype.getDimensionType=function(){return this.m_dimensionType};e.InARsDimension.prototype.getFields=function(){return this.m_fields};e.InARsDimension.prototype.getMemberIndexes=function(){return this.m_memberIndexes};e.InARsDimension.prototype.getParentIndexes=function(){return this.m_parentIndexes};e.InARsDimension.prototype.getDrillGroupIndexes=function(){return this.m_drillGroupIndexes};e.InARsDimension.prototype.getDisplayValues=function(){return this.m_displayValues};e.InARsDimension.prototype.getAbsoluteLevelValues=function(){return this.m_absoluteLevels};e.InARsDimension.prototype.getDrillStates=function(){return this.m_drillStates};e.InARsDimension.prototype.getNodeIds=function(){return this.m_nodeIds};e.InARsDimension.prototype.setMemberTypes=function(t){this.m_memberTypesEncoded=t;this.m_memberTypes=e.XArray.create(this.m_memberTypesEncoded.size());for(var r=0;this.m_memberTypesEncoded.hasNextValue();r++){var n=this.m_memberTypesEncoded.getNextIntegerValue();this.m_memberTypes.set(r,e.QInAConverter.lookupMemberType(n))}};e.InARsDimension.prototype.getMemberType=function(t){if(e.isNull(this.m_memberTypes)||t>=this.m_memberTypes.size()){return e.MemberType.MEMBER}return this.m_memberTypes.get(t)};e.InARsDimension.prototype.getKeyFieldIndex=function(){return this.m_keyFieldIndex};e.InARsDimension.prototype.getHierarchyNavigationKeyIndex=function(){return this.m_hierarchyNavigationFieldIndex};e.InARsDimension.prototype.getTextFieldIndex=function(){return this.m_textFieldIndex};e.InARsDimension.prototype.getHierarchyPathFieldIndex=function(){return this.m_hierarchyPathFieldIndex};e.InARsDimension.prototype.getNamePathFieldIndex=function(){return this.m_namePathFieldIndex};e.InARsDimension.prototype.getChildCountValues=function(){return this.m_childCountValues};e.InARsDimension.prototype.setupFromRsTuple=function(t){var r=t.getStructureByKey("DisplayLevel");if(e.notNull(r)){this.m_displayValues=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("Level");if(e.notNull(r)){this.m_absoluteLevels=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("DrillState");if(e.notNull(r)){this.m_drillStates=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("MemberIndexes");if(e.notNull(r)){this.m_memberIndexes=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("ParentIndexes");if(e.notNull(r)){this.m_parentIndexes=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("DrillGroupIndexes");if(e.notNull(r)){this.m_drillGroupIndexes=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("TupleElementIds");if(e.notNull(r)){this.m_nodeIds=e.InARsEncodedValues.createByStructure(r)}r=t.getStructureByKey("ChildCount");if(e.notNull(r)){this.m_childCountValues=e.InARsEncodedValues.createByStructure(r)}};e.InARsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_childAlignment};e.InARsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_childAlignment===e.Alignment.DEFAULT_VALUE};e.InARsDimension.prototype.isHierarchyActive=function(){return this.m_isHierarchyActive};e.InARsDimension.prototype.setName=function(e){this.m_name=e};e.InARsField=function(){};e.InARsField.prototype=new e.DfNameTextObject;e.InARsField.prototype._ff_c="InARsField";e.InARsField.create=function(t,r){var n=new e.InARsField;var i=r.getStringByKey("Description");var a=e.QInAConverter.lookupValueType(r.getStringByKey("ValueType"));var o;var s=r.getStringByKey("PresentationType");if(e.isNull(s)){o=e.PresentationType.UNDEFINED}else{o=e.QInAConverter.lookupPresentationType(s)}var l=r.getStringByKeyExt("Obtainability","Always");var u=e.XString.isEqual("Always",l);var p=r.getListByKey("ValuesException");var g=r.getListByKey("Values");n.setupExt(t,i,g,u,p,a,o);return n};e.InARsField.prototype.m_values=null;e.InARsField.prototype.m_valueExceptions=null;e.InARsField.prototype.m_isVisible=false;e.InARsField.prototype.m_valueType=null;e.InARsField.prototype.m_presentationType=null;e.InARsField.prototype.cloneExt=function(t){var r=new e.InARsField;var n=e.isNull(this.m_values)?null:this.m_values.getPermaCopy();var i=e.isNull(this.m_valueExceptions)?null:this.m_valueExceptions.getPermaCopy();r.setupExt(this.getName(),this.getText(),n,this.m_isVisible,i,this.m_valueType,this.m_presentationType);return r};e.InARsField.prototype.setupExt=function(e,t,r,n,i,a,o){this.setupWithNameText(e,t);this.m_values=r;this.m_isVisible=n;this.m_valueExceptions=i;this.m_valueType=a;this.m_presentationType=o};e.InARsField.prototype.releaseObject=function(){this.m_valueType=null;this.m_presentationType=null;this.m_values=e.XObjectExt.release(this.m_values);this.m_valueExceptions=e.XObjectExt.release(this.m_valueExceptions);e.DfNameTextObject.prototype.releaseObject.call(this)};e.InARsField.prototype.getValues=function(){return this.m_values};e.InARsField.prototype.getValueExceptionAt=function(t){return e.isNull(this.m_valueExceptions)?-1:this.m_valueExceptions.getIntegerAt(t)};e.InARsField.prototype.isVisible=function(){return this.m_isVisible};e.InARsField.prototype.getValueType=function(){return this.m_valueType};e.InARsField.prototype.getPresentationType=function(){return this.m_presentationType};e.QInAImportAction=function(){};e.QInAImportAction.prototype=new e.SyncAction;e.QInAImportAction.prototype._ff_c="QInAImportAction";e.QInAImportAction.create=function(t,r,n,i,a,o){var s=new e.QInAImportAction;s.setupAction(null,null,null,t);return s};e.QInAImportAction.prototype.m_componentType=null;e.QInAImportAction.prototype.m_inaElement=null;e.QInAImportAction.prototype.m_modelComponent=null;e.QInAImportAction.prototype.m_parentComponent=null;e.QInAImportAction.prototype.m_modelContext=null;e.QInAImportAction.prototype.releaseObject=function(){this.m_componentType=null;this.m_inaElement=null;this.m_modelComponent=null;this.m_parentComponent=null;this.m_modelContext=null;e.SyncAction.prototype.releaseObject.call(this)};e.QInAImportAction.prototype.processSynchronization=function(e){var t=this.getActionContext();var r=t.importComponent(this.m_componentType,this.m_inaElement,this.m_modelComponent,this.m_parentComponent,this.m_modelContext);this.setData(r);this.endSync();return false};e.QInAImportAction.prototype.callListener=function(e,t,r,n){t.onImportDone(e,r,n)};e.DfFunctionalValueHelpSyncAction=function(){};e.DfFunctionalValueHelpSyncAction.prototype=new e.SyncAction;e.DfFunctionalValueHelpSyncAction.prototype._ff_c="DfFunctionalValueHelpSyncAction";e.DfFunctionalValueHelpSyncAction.prototype.setupFunctionalValueHelp=function(e){this.setupAction(null,null,null,e)};e.DfFunctionalValueHelpSyncAction.prototype.processSynchronization=function(t){var r=this.getActionContext().getQueryManager();var n=r.getServiceConfig().getConnectionContainer();var i=e.XUri.createFromUrl(this.getPath(n).toString());i.addQueryElements(this.getUriParameters());var a=n.newRpcFunctionByServiceAndPath(e.ServerService.DIMENSION_EXTENSION,i);var o=a.getRpcRequest();o.setUseStaticUrl(true);o.setMethod(e.HttpRequestMethod.HTTP_GET);o.setAcceptContentType(e.ContentType.APPLICATION_JSON);a.processFunctionExecution(t,this,null);return true};e.DfFunctionalValueHelpSyncAction.prototype.onFunctionExecuted=function(t,r,n){this.clearMessages();if(t.getServerStatusCode()===e.HttpStatusCode.SC_NOT_FOUND){this.setData(e.XList.create());this.endSync();return}this.addAllMessages(t);if(this.isValid()){this.setData(this.createDataFromResponse(r.getRootElementGeneric()))}this.endSync()};e.DfFunctionalValueHelpSyncAction.prototype.getUriParameters=function(){return null};e.DfFunctionalValueHelpSyncAction.prototype.getPath=function(t){var r=this.getActionContext().getExternalName();if(e.XStringUtils.isNullOrEmpty(r)){r=this.getActionContext().getName()}var n=e.XStringBuffer.create();n.append("/dimension").append("/").append(r);n.append("/rsel");return n};e.DfDocumentsStoreAction=function(){};e.DfDocumentsStoreAction.prototype=new e.SyncAction;e.DfDocumentsStoreAction.prototype._ff_c="DfDocumentsStoreAction";e.DfDocumentsStoreAction.DEFAULT_MIME_TYPE="text/plain";e.DfDocumentsStoreAction.create=function(t,r,n,i,a,o){var s=new e.DfDocumentsStoreAction;s.setupDocumentStoreAction(t,r,n,i,a,o);return s};e.DfDocumentsStoreAction.createAndRun=function(t,r,n,i,a,o){var s=new e.DfDocumentsStoreAction;s.setupDocumentStoreActionAndRun(t,r,n,i,a,o);return s};e.DfDocumentsStoreAction.prototype.m_documentServiceRequest=null;e.DfDocumentsStoreAction.prototype.m_connectionContainer=null;e.DfDocumentsStoreAction.prototype.releaseObject=function(){e.SyncAction.prototype.releaseObject.call(this);this.m_connectionContainer=null;this.m_documentServiceRequest=null};e.DfDocumentsStoreAction.prototype.setupDocumentStoreAction=function(e,t,r,n,i,a){this.m_connectionContainer=i;this.m_documentServiceRequest=a;this.setupAction(e,t,r,n)};e.DfDocumentsStoreAction.prototype.setupDocumentStoreActionAndRun=function(e,t,r,n,i,a){this.m_connectionContainer=i;this.m_documentServiceRequest=a;this.setupActionAndRun(e,t,r,n)};e.DfDocumentsStoreAction.prototype.processSynchronization=function(t){var r=this.m_connectionContainer.newRpcFunctionByService(e.ServerService.DOCUMENTS);var n=r.getRpcRequest();n.setRequestStructure(this.serialize());r.processFunctionExecution(t,this,null);return true};e.DfDocumentsStoreAction.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);if(t.isValid()){var i=null;if(e.notNull(r)&&r.getRootElement()!==null){var a=e.PrFactory.createStructureDeepCopy(r.getRootElement());e.InAHelper.importMessages(a,this);if(this.isValid()){i=this.parseDocumentsServiceResponse(a)}else{this.log(this.getMessages().toString())}}this.setData(i)}this.endSync()};e.DfDocumentsStoreAction.prototype.parseDocumentsServiceResponse=function(t){var r=e.DocumentsServiceResponse.create();var n=t.getListByKey("Directories");for(var i=0;i<n.size();i++){var a=n.getStructureAt(i);var o=a.getStringByKey("Path");var s=a.getListByKey("Files");var l=r.addDirectoryByPath(o);this.parseFileListToDirectory(s,l)}return r};e.DfDocumentsStoreAction.prototype.parseFileListToDirectory=function(t,r){for(var n=0;n<t.size();n++){var i=t.getStructureAt(n);var a=r.addFileByName(i.getStringByKey("Name"));a.setActiveVersion(i.getStringByKey("ActiveVersion"));var o=i.getListByKey("Versions");for(var s=0;s<o.size();s++){var l=o.getStructureAt(s);var u=a.addVersionByName(l.getStringByKey("Version"));u.setOwner(l.getStringByKey("Owner"));u.setTimestamp(e.XDateTime.createDateTimeSafe(l.getStringByKey("Timestamp")));var p=e.XContent.createContent();p.setString(l.getStringByKey("Content"));u.setContent(p)}}};e.DfDocumentsStoreAction.prototype.callListener=function(e,t,r,n){t.onProviderFetch(e,r,n)};e.DfDocumentsStoreAction.prototype.serialize=function(){var t=e.PrFactory.createStructure();var r=t.putNewStructure("Documents");var n=this.m_connectionContainer.getSystemConnect().getServerMetadata();var i=e.InACapabilitiesProvider.create(this.getSession(),n,e.ProviderType.DOCUMENTS,null).getDocumentCapabilities();this.serializeCapabilitiesStructure(r,i);this.serializeDocumentsRequest(r);return t};e.DfDocumentsStoreAction.prototype.serializeDocumentsRequest=function(e){e.putStringNotNullAndNotEmpty("DataArea",this.m_documentServiceRequest.getDataArea());var t=e.putNewList("DocumentsRequest");var r=this.m_documentServiceRequest.getDocumentsDirectoryRequests();for(var n=0;n<r.size();n++){this.serializeDocumentDirectoryRequest(t.addNewStructure(),r.get(n))}};e.DfDocumentsStoreAction.prototype.serializeDocumentDirectoryRequest=function(t,r){t.putString("Path",r.getPath());var n=t.putNewList("Request");var i=r.getDocumentsRequests();for(var a=0;a<i.size();a++){var o=i.get(a);if(e.XCollectionUtils.hasElements(o.getDocuments())){this.serializeDocumentRequest(n.addNewStructure(),o)}}};e.DfDocumentsStoreAction.prototype.serializeDocumentRequest=function(t,r){var n=r.getDocumentRequestAction();if(n===e.DocumentsRequestAction.GET){t.putString("Action","Get");t.putBoolean("WithVersions",r.isWithVersions())}else if(n===e.DocumentsRequestAction.PUT){t.putString("Action","Put")}else if(n===e.DocumentsRequestAction.DELETE){t.putString("Action","Delete")}var i=t.putNewList("Files");var a=r.getDocuments();for(var o=0;o<a.size();o++){this.serializeDocumentFile(i.addNewStructure(),a.get(o))}};e.DfDocumentsStoreAction.prototype.serializeDocumentFile=function(t,r){t.putString("Name",r.getName());if(r.getContent()!==null){t.putString("Content",r.getContent().getString());t.putString("MimeType",e.DfDocumentsStoreAction.DEFAULT_MIME_TYPE)}};e.DfDocumentsStoreAction.prototype.serializeCapabilitiesStructure=function(e,t){var r=e.putNewList("Capabilities");r.addAllStrings(t.getSortedCapabilityNames());return r};e.InARsAxisProvider=function(){};e.InARsAxisProvider.prototype=new e.DfRsAxisProvider;e.InARsAxisProvider.prototype._ff_c="InARsAxisProvider";e.InARsAxisProvider.create=function(t,r,n,i,a){if(e.AxisType.ROWS!==r&&e.AxisType.COLUMNS!==r){throw e.XException.createIllegalStateException("illegal axis type")}var o=new e.InARsAxisProvider;o.setupProvider(t,n,i,a);return o};e.InARsAxisProvider.prototype.m_dataCount=0;e.InARsAxisProvider.prototype.m_tuplesCount=0;e.InARsAxisProvider.prototype.m_tuplesCountTotal=0;e.InARsAxisProvider.prototype.m_tupleElementsCount=0;e.InARsAxisProvider.prototype.m_rsDimensionsList=null;e.InARsAxisProvider.prototype.m_supportsObtainability=false;e.InARsAxisProvider.prototype.m_supportsSapDateFormat=false;e.InARsAxisProvider.prototype.m_currentIndex=0;e.InARsAxisProvider.prototype.m_alertLevel=null;e.InARsAxisProvider.prototype.m_exceptionNames=null;e.InARsAxisProvider.prototype.m_requestContext=null;e.InARsAxisProvider.prototype.m_lbhToUdhConversionProperties=null;e.InARsAxisProvider.prototype.copyInARsAxisProvider=function(t){this.m_dataCount=t.m_dataCount;this.m_tuplesCount=t.m_tuplesCount;this.m_tuplesCountTotal=t.m_tuplesCountTotal;this.m_tupleElementsCount=t.m_tupleElementsCount;if(e.notNull(t.m_rsDimensionsList)){var r=t.m_rsDimensionsList.size();this.m_rsDimensionsList=e.XArray.create(r);for(var n=0;n<r;n++){var i=t.m_rsDimensionsList.get(n);this.m_rsDimensionsList.set(n,i.clone())}}this.m_supportsObtainability=t.m_supportsObtainability;this.m_supportsSapDateFormat=t.m_supportsSapDateFormat;this.m_currentIndex=-1;if(e.notNull(t.m_alertLevel)){this.m_alertLevel=t.m_alertLevel.getPermaCopy()}if(e.notNull(t.m_exceptionNames)){this.m_exceptionNames=t.m_exceptionNames.getPermaCopy()}this.m_requestContext=t.m_requestContext;if(e.notNull(t.m_lbhToUdhConversionProperties)){this.m_lbhToUdhConversionProperties=t.m_lbhToUdhConversionProperties.clone()}};e.InARsAxisProvider.prototype.setupProvider=function(e,t,r,n){this.setupApplicationContext(e);this.m_supportsObtainability=n;this.m_supportsSapDateFormat=r;this.m_requestContext=t;this.m_currentIndex=-1};e.InARsAxisProvider.prototype.releaseObject=function(){if(e.notNull(this.m_rsDimensionsList)){var t=this.m_rsDimensionsList.size();for(var r=0;r<t;r++){e.XObjectExt.release(this.m_rsDimensionsList.get(r));this.m_rsDimensionsList.set(r,null)}e.XObjectExt.release(this.m_rsDimensionsList);this.m_rsDimensionsList=null}this.m_alertLevel=e.XObjectExt.release(this.m_alertLevel);this.m_exceptionNames=e.XObjectExt.release(this.m_exceptionNames);this.m_lbhToUdhConversionProperties=e.XObjectExt.release(this.m_lbhToUdhConversionProperties);this.m_requestContext=null;e.DfRsAxisProvider.prototype.releaseObject.call(this)};e.InARsAxisProvider.prototype.getElementAsListByName=function(t,r){var n=t.getByKey(r);if(e.isNull(n)){return null}if(n.isStructure()){var i=n;var a=i.getListByKey("Values");var o=i.getIntegerByKey("Size");if(o!==a.size()){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Indicated size of ",r," names and actual size differ!"))}if(o!==this.m_tuplesCount){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Indicated size of ",r," names and tuple count differ!"))}return a}return n.isList()?n:null};e.InARsAxisProvider.prototype.importRsDimensions=function(t,r,n){this.m_tuplesCount=t.getIntegerByKey("TupleCount");this.m_tuplesCountTotal=t.getIntegerByKeyExt("TupleCountTotal",-1);var i=t.getListByKey("Dimensions");var a=i.size();this.m_rsDimensionsList=e.XArray.create(a);var o=t.getListByKey("Tuples");if(a!==o.size()){throw e.XException.createIllegalStateException("Indicated dimension count and tuple element count is not the same")}var s=null;for(var l=0;l<a;l++){var u=i.getStructureAt(l);var p=this.getDimensionName(u);var g=u.getStructureByKey("Hierarchy");var c=null;if(e.notNull(r)){c=r.getDimensionByNameFromExistingMetadata(p);if(e.notNull(g)&&e.notNull(c)&&this.m_requestContext!==e.QContextType.SELECTOR){var m=g.getIntegerByKeyExt("MaxDrillLevel",-1);var y=g.getIntegerByKeyExt("MaxRuntimeLevel",-1);var d=r.getModelCapabilities();var A=e.notNull(d)&&d.supportsMaxDrillLevel()&&(m!==c.getMaxDrillLevel()||y!==c.getMaxRuntimeLevel());var I=c.getModelCapabilities()!==null&&c.getModelCapabilities().supportsDimensionHierarchyLevels()&&!e.PrUtils.isListEmpty(g.getListByKey("Levels"));if(I||A){if(e.isNull(s)){s=e.QInAImportFactory.createWithQueryManagerCapabilities(this.getApplication(),e.QModelFormat.INA_DATA,r.getQueryManager())}if(e.notNull(s)){r.stopEventing();s.importHierarchy(c,u);r.resumeEventing()}}}}var S=e.notNull(this.m_lbhToUdhConversionProperties)&&e.XString.isEqual(p,this.m_lbhToUdhConversionProperties.getDimensionName())?this.m_lbhToUdhConversionProperties:null;var f=e.InARsDimension.create(u,c,this.m_requestContext,n,S);if(e.isNull(c)){f.setName(p);f.setText(u.getStringByKey("Description"))}var v=u.getStructureByKey("MemberTypes");if(e.notNull(v)){f.setMemberTypes(e.InARsEncodedValues.createByStructure(v))}f.setupFromRsTuple(o.getStructureAt(l));this.m_rsDimensionsList.set(l,f)}this.m_alertLevel=this.getElementAsListByName(t,"ExceptionAlertLevel");this.m_exceptionNames=this.getElementAsListByName(t,"ExceptionName");this.m_tupleElementsCount=a};e.InARsAxisProvider.prototype.getDimensionName=function(t){var r=t.getStringByKey("Name");if(e.notNull(this.m_lbhToUdhConversionProperties)&&e.XString.isEqual(r,this.m_lbhToUdhConversionProperties.getUdhName())){r=this.m_lbhToUdhConversionProperties.getDimensionName();t.putString("Name",r)}return r};e.InARsAxisProvider.prototype.setOcpStructure=function(t,r,n,i,a){this.m_dataCount=n;this.m_lbhToUdhConversionProperties=a;if(e.notNull(r)){this.importRsDimensions(r,t,i)}};e.InARsAxisProvider.prototype.getRsDimensionSize=function(){return e.isNull(this.m_rsDimensionsList)?0:this.m_rsDimensionsList.size()};e.InARsAxisProvider.prototype.notifySetAxisMetadata=function(){var e=this.getCursorAxis();var t=this.getRsDimensionSize();e.startAddMetadata(t);for(var r=0;r<t;r++){var n=this.m_rsDimensionsList.get(r);e.addNextTupleElementMetadata(r,n);var i=n.getFields();var a=i.size();for(var o=0;o<a;o++){var s=i.get(o);var l=!this.m_supportsObtainability||s.isVisible();e.addNextFieldMetadata(s.getName(),s.getText(),l,s.getPresentationType(),s.getValueType())}}e.endAddMetadata()};e.InARsAxisProvider.prototype.resetIfNotNull=function(t){if(e.notNull(t)){t.resetCursor()}};e.InARsAxisProvider.prototype.resetAxisCursor=function(t){if(t!==0){throw e.XException.createIllegalStateException("The axis cursor can only be resetted to 0.")}var r=this.getRsDimensionSize();for(var n=0;n<r;n++){var i=this.m_rsDimensionsList.get(n);this.resetIfNotNull(i.getMemberIndexes());this.resetIfNotNull(i.getParentIndexes());this.resetIfNotNull(i.getDrillGroupIndexes());this.resetIfNotNull(i.getDisplayValues());this.resetIfNotNull(i.getAbsoluteLevelValues());this.resetIfNotNull(i.getDrillStates());this.resetIfNotNull(i.getNodeIds());this.resetIfNotNull(i.getChildCountValues())}};e.InARsAxisProvider.prototype.getFieldValues=function(t,r){var n=this.getRsDimensionSize();for(var i=0;i<n;i++){var a=this.m_rsDimensionsList.get(i);if(e.XString.isEqual(a.getName(),t)){var o=e.XCollectionUtils.findFirst(a.getFields(),function(t){return e.XString.isEqual(t.getName(),r)}.bind(this));if(e.notNull(o)){return e.PrUtils.asListOfString(o.getValues())}}}return e.XListOfString.create()};e.InARsAxisProvider.prototype.notifyAxisCursorChange=function(t){if(this.m_currentIndex>=t){this.resetAxisCursor(t)}this.m_currentIndex=t;var r=this.getCursorAxis();r.setTupleElementCursorBeforeStart();var n=!e.PrUtils.isListEmpty(this.m_alertLevel);var i=!e.PrUtils.isListEmpty(this.m_exceptionNames);var a=this.getRsDimensionSize();for(var o=0;o<a;o++){r.nextTupleElement();var s=this.m_rsDimensionsList.get(o);var l=s.getMemberIndexes();var u=l.getNextIntegerValue();var p=-1;r.setDimensionMemberType(s.getMemberType(u));var g=s.getParentIndexes();if(e.notNull(g)){p=g.getNextIntegerValue();r.setParentNodeIndex(l.getIndexForIntegerValue(p))}var c=s.getDrillGroupIndexes();if(e.notNull(c)){r.setDrillGroupIndex(c.getNextIntegerValue())}var m=s.getDisplayValues();if(e.notNull(m)){r.setDisplayLevel(m.getNextIntegerValue())}var y=s.getDrillStates();if(e.notNull(y)){r.setDrillState(e.QInAConverter.lookupDrillState(y.getNextIntegerValue(),e.notNull(this.m_lbhToUdhConversionProperties)))}var d=s.getAbsoluteLevelValues();if(e.notNull(d)&&d.hasNextValue()){r.setAbsoluteLevel(d.getNextIntegerValue())}else{r.setAbsoluteLevel(-1)}var A=s.getNodeIds();if(e.notNull(A)){r.setNodeId(A.getNextStringValue())}var I=s.getChildCountValues();if(e.notNull(I)){var S=I.getNextIntegerValue();r.setChildCount(S)}else{r.setChildCount(-1)}if(n&&i){r.setAlertLevel(this.m_alertLevel.getIntegerAtExt(u,0));r.setExceptionName(this.m_exceptionNames.getStringAtExt(u,null))}this.iterateFields(r,s,u,p)}};e.InARsAxisProvider.prototype.iterateFields=function(t,r,n,i){var a=r.getKeyFieldIndex();var o=r.getHierarchyNavigationKeyIndex();var s=r.getFields();var l=s.size();var u=r.getTextFieldIndex();var p=this.getOverrideTextForTextField(t,r,n);var g=r.getHierarchyPathFieldIndex();var c=this.getOverrideTextForHierarchyPathField(t,r,n);for(var m=0;m<l;m++){t.nextFieldValue();var y=s.get(m);var d=y.getValueExceptionAt(n);if(d!==-1){t.setValueException(e.QInAConverter.lookupException(d))}var A=this.setValueAndReturnFormattedValue(t,y.getValues(),n,y.getValueType());if(e.notNull(p)&&u===m){A=p;t.setString(p)}if(e.notNull(c)&&g===m){A=c;t.setString(c)}if(m===a){t.setDimensionMemberName(A);t.setDimensionMemberNameValueException(t.getValueException());if(i>-1&&i<y.getValues().size()){t.setParentDimensionMemberName(this.getFormattedValue(t,y.getValues(),i,y.getValueType()))}else{t.setParentDimensionMemberName(null)}}if(m===o){t.setValueOfHierarchyNavigationKey(A)}t.setFormattedValue(A)}};e.InARsAxisProvider.prototype.getMemberOverrideText=function(t,r,n){var i=this.getCursorAxis().getCursorResultSet();var a=i.getDimensionMemberOverrideText(r.getName(),n);if(e.isNull(a)){var o=t.getRsDimensionAtCurrentPosition();if(e.notNull(o)&&e.notNull(n)){var s=o.getStructureMember(n);if(e.notNull(s)){if(s.hasOverrideTextDefined()){a=s.getText()}else{var l=s.getQueryModel();var u=o.getName();if(e.notNull(l)&&l.getDimensionByName(u)!==null){var p=l.getDimensionByName(u).getStructureMember(n);if(e.notNull(p)&&p.isModelDefinedMember()){a=s.getText()}}}}}}return a};e.InARsAxisProvider.prototype.getOverrideTextForTextField=function(t,r,n){var i=null;var a=r.getDimensionType();if(this.getApplication().getSession().hasFeature(e.FeatureToggleOlap.MEMBER_OVERRIDE_TEXTS)&&(a===e.DimensionType.ACCOUNT||a===e.DimensionType.MEASURE_STRUCTURE||a===e.DimensionType.SECONDARY_STRUCTURE)&&r.getTextFieldIndex()!==-1){var o=r.getKeyFieldIndex();var s=r.getFields();var l=s.get(o);var u=l.getValues().getStringAt(n);i=this.getMemberOverrideText(t,r,u)}return i};e.InARsAxisProvider.prototype.getOverrideTextForHierarchyPathField=function(t,r,n){var i=null;var a=r.getHierarchyPathFieldIndex();if(this.getApplication().getSession().hasFeature(e.FeatureToggleOlap.MEMBER_OVERRIDE_TEXTS)&&r.getDimensionType()===e.DimensionType.ACCOUNT&&a!==-1){var o=r.getFields();var s=o.get(a);var l=s.getValues().getStringAt(n);var u=e.HierarchyPathUtil.parsePathValues(l);var p=e.PrUtils.getListProperty(u,e.HierarchyPathUtil.PATH_ELEMENT_UNIQUE_NAME);var g=e.PrUtils.getListProperty(u,e.HierarchyPathUtil.PATH_ELEMENT_DESCRIPTION);var c=false;var m=null;for(var y=0;y<e.PrUtils.getListSize(p,0);y++){var d=e.PrUtils.getStringValueElement(p,y,null);m=this.getMemberOverrideText(t,r,d);if(e.notNull(m)){c=true;g.setStringAt(y,m)}}if(c){i=e.PrUtils.serialize(u,false,false,0)}}return i};e.InARsAxisProvider.prototype.setValueAndReturnFormattedValue=function(t,r,n,i){if(e.isNull(r)){return"InA Error: No data available"}var a=i;if(a===e.XValueType.UNSUPPORTED){var o=t.getField();if(e.isNull(o)||o.getMetadata()===null){a=e.XValueType.STRING}else{a=o.getValueType()}}var s;var l=t.getDimensionMemberType();var u=l===e.MemberType.RESULT||l===e.MemberType.CONDITION_RESULT||l===e.MemberType.CONDITION_OTHERS_RESULT;var p=t.getValueException();var g=p===e.ValueException.NULL_VALUE;if(a===e.XValueType.STRING||u){s=r.getStringAt(n);if(u&&e.notNull(p)){if(l===e.MemberType.RESULT){s="Total"}else if(l===e.MemberType.CONDITION_RESULT){s="Total Including"}else{s="Total Remaining"}t.setValueException(e.ValueException.NORMAL)}if(t.getValueException()===e.ValueException.NULL_VALUE){s=""}t.setString(s)}else if(a===e.XValueType.BOOLEAN){var c=r.getBooleanAt(n);t.setBoolean(c);s=e.XBoolean.convertToString(c)}else if(a===e.XValueType.INTEGER){var m=r.getIntegerAt(n);t.setInteger(m);s=e.XInteger.convertToString(m)}else if(a===e.XValueType.LONG){var y=r.getLongAt(n);t.setLong(y);s=e.XLong.convertToString(y)}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT){var d=r.getDoubleAt(n);t.setDouble(d);s=e.XDouble.convertToString(d)}else if(a===e.XValueType.DATE){s=r.getStringAt(n);if(g){t.setNullByType(a)}else{var A=e.XDate.createDateFromStringWithFlag(s,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(A)){s=A.toIsoFormat()}t.setDate(A)}}else if(a===e.XValueType.TIME){s=r.getStringAt(n);if(g){t.setNullByType(a)}else{var I=e.XTime.createTimeFromStringWithFlag(s,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(I)){s=I.toIsoFormat()}t.setTime(I)}}else if(a===e.XValueType.DATE_TIME){s=r.getStringAt(n);if(g){t.setNullByType(a)}else{var S=e.XDateTime.createDateTimeFromStringWithFlag(s,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&e.notNull(S)){s=S.toIsoFormat()}t.setDateTime(S)}}else if(a.isSpatial()){s=r.getStringAt(n);var f=e.XGeometryValue.createGeometryValueWithWkt(s);if(e.isNull(f)){t.setString(s)}else{var v=f.getValueType();if(v===e.XValueType.MULTI_POLYGON){t.setMultiPolygon(f)}else if(v===e.XValueType.LINE_STRING){t.setLineString(f)}else if(v===e.XValueType.MULTI_LINE_STRING){t.setMultiLineString(f)}else if(v===e.XValueType.POINT){t.setPoint(f)}else if(v===e.XValueType.POLYGON){t.setPolygon(f)}else if(v===e.XValueType.MULTI_POINT){t.setMultiPoint(f)}}}else{var C=e.XMessage.createErrorWithCode(e.OriginLayer.UTILITY,e.ErrorCodes.INVALID_DATATYPE,"Unsupported datatype",null,false,a);t.setErrorValue(C);s=C.getText()}return s};e.InARsAxisProvider.prototype.getFormattedValue=function(t,r,n,i){if(e.isNull(r)){return"InA Error: No data available"}var a=i;if(a===e.XValueType.UNSUPPORTED){var o=t.getField();if(e.isNull(o)||o.getMetadata()===null){a=e.XValueType.STRING}else{a=o.getValueType()}}var s=r.get(n);var l=e.isNull(s)?null:s.copyAsPrimitiveXValue();var u=t.getValueException();var p=u===e.ValueException.NULL_VALUE;var g;if(!p){try{l=e.XValueUtil.getValueFromString(e.XValueUtil.getString(l),a);g=e.XValueUtil.getString(l)}catch(t){g=e.XValueUtil.getString(l)}}else{g=e.XValueUtil.getString(l)}return g};e.InARsAxisProvider.prototype.getTuplesCount=function(){return this.m_tuplesCount};e.InARsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tuplesCountTotal};e.InARsAxisProvider.prototype.getTupleElementsCount=function(){return this.m_tupleElementsCount};e.InARsAxisProvider.prototype.getDataCount=function(){return this.m_dataCount};e.InARsAxisProvider.prototype.setTuplesCount=function(e,t){if(e<=this.m_tuplesCount){this.m_tuplesCount=e;this.m_tuplesCountTotal=t}};e.MeasureValueHelpRsAxisProvider=function(){};e.MeasureValueHelpRsAxisProvider.prototype=new e.DfRsAxisProvider;e.MeasureValueHelpRsAxisProvider.prototype._ff_c="MeasureValueHelpRsAxisProvider";e.MeasureValueHelpRsAxisProvider.create=function(t){var r=new e.MeasureValueHelpRsAxisProvider;r.m_isCorrectDrillState=t.getQueryManager().getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);return r};e.MeasureValueHelpRsAxisProvider.prototype.m_nodes=null;e.MeasureValueHelpRsAxisProvider.prototype.m_rsDimension=null;e.MeasureValueHelpRsAxisProvider.prototype.m_tupleCountTotal=0;e.MeasureValueHelpRsAxisProvider.prototype.m_isCorrectDrillState=false;e.MeasureValueHelpRsAxisProvider.prototype.releaseObject=function(){e.DfRsAxisProvider.prototype.releaseObject.call(this);this.m_nodes=e.XObjectExt.release(this.m_nodes);this.m_rsDimension=e.XObjectExt.release(this.m_rsDimension)};e.MeasureValueHelpRsAxisProvider.prototype.setValueHelpNodes=function(t,r){if(e.notNull(t)&&e.notNull(r)){this.m_nodes=t;this.m_rsDimension=e.MeasureValueHelpRsDimension.create(r);var n=r.getAllStructureMembers();this.m_tupleCountTotal=e.notNull(n)?n.size():t.size();this.m_isCorrectDrillState=r.getQueryManager().getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET)}};e.MeasureValueHelpRsAxisProvider.prototype.copyValueHelpRsAxisProvider=function(t){this.m_isCorrectDrillState=t.m_isCorrectDrillState;if(e.notNull(t.m_nodes)){this.m_nodes=e.XList.create();for(var r=0;r<t.m_nodes.size();r++){var n=t.m_nodes.get(r);this.m_nodes.add(e.QValueHelpNode2.createValueHelpNode(n.getName(),n.getDimensionMember(),n.getDrillState(),n.getDisplayLevel(),n.getChildCount(),n.getAbsoluteLevel(),t.m_isCorrectDrillState))}}if(e.notNull(t.m_rsDimension)){this.m_rsDimension=t.m_rsDimension.clone()}};e.MeasureValueHelpRsAxisProvider.prototype.notifySetAxisMetadata=function(){var t=this.getCursorAxis();if(e.notNull(this.m_nodes)&&e.notNull(this.m_rsDimension)){t.startAddMetadata(1);t.addNextTupleElementMetadata(0,this.m_rsDimension);var r=this.m_rsDimension.getFields();for(var n=0;n<r.size();n++){var i=r.get(n);t.addNextFieldMetadata(i.getName(),i.getText(),true,i.getPresentationType(),i.getValueType())}}else{t.startAddMetadata(0)}t.endAddMetadata()};e.MeasureValueHelpRsAxisProvider.prototype.notifyAxisCursorChange=function(t){if(!e.XCollectionUtils.hasElements(this.m_nodes)||t>=this.m_nodes.size()){return}var r=this.m_nodes.get(t);var n=r.getDimensionMember();var i=this.getCursorAxis();i.setTupleElementCursorBeforeStart();i.nextTupleElement();i.setDimensionMemberType(n.getMemberType());i.setNodeId(r.getName());i.setAbsoluteLevel(-1);i.setChildCount(-1);var a=r.getDimension();var o=a.getFields();for(var s=0;s<o.size();s++){i.nextFieldValue();var l=o.get(s);var u=n.getFieldValue(l);var p=e.notNull(u)?u.getString():"";i.setString(p);i.setFormattedValue(p);if(l===a.getKeyField()){i.setDimensionMemberName(p)}}};e.MeasureValueHelpRsAxisProvider.prototype.getTuplesCount=function(){return e.notNull(this.m_nodes)?this.m_nodes.size():0};e.MeasureValueHelpRsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tupleCountTotal};e.MeasureValueHelpRsAxisProvider.prototype.getTupleElementsCount=function(){return e.notNull(this.m_rsDimension)?1:0};e.MeasureValueHelpRsAxisProvider.prototype.getDataCount=function(){return this.getTuplesCount()};e.MeasureValueHelpRsAxisProvider.prototype.setTuplesCount=e.noSupport;e.MeasureValueHelpRsAxisProvider.prototype.getFieldValues=e.noSupport;e.RuntimeRemoteBlendingQueryUpdaterAction=function(){};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype=new e.SyncAction;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype._ff_c="RuntimeRemoteBlendingQueryUpdaterAction";e.RuntimeRemoteBlendingQueryUpdaterAction.create=function(t,r){var n=new e.RuntimeRemoteBlendingQueryUpdaterAction;n.setupAction(null,null,null,r);n.m_systemToDependentQueriesMap=t;n.m_queryNameToRpcFunctionMap=e.XHashMapByString.create();return n};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_queryNameToRpcFunctionMap=null;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_systemToDependentQueriesMap=null;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.remainingQueries=0;e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.releaseObject=function(){this.m_systemToDependentQueriesMap=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_systemToDependentQueriesMap);this.m_queryNameToRpcFunctionMap=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_queryNameToRpcFunctionMap);this.remainingQueries=0;e.SyncAction.prototype.releaseObject.call(this)};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.processSynchronization=function(t){var r=this.getActionContext();if(r.getInitSettings().getMode()!==e.QueryManagerMode.RAW_QUERY){this.addErrorWithMessage("processMetadataSerializedQuery is only supported for query managers in raw query mode.")}var n=this.m_systemToDependentQueriesMap.getKeysAsIteratorOfString();while(n.hasNext()){var i=n.next();var a=this.m_systemToDependentQueriesMap.getByKey(i).getIterator();while(a.hasNext()){var o=e.XContent.createStringContent(e.QModelFormat.INA_DATA,a.next()).getJsonContent();var s=e.PrUtils.getPropertyAsList(o,e.ConnectionConstants.INA_BATCH);if(e.isNull(s)){if(!this.processInaRequest(o,i)){return false}}else{for(var l=0;l<s.size();l++){if(!this.processInaRequest(s.getStructureAt(l),i)){return false}}}}}var u=!this.hasErrors()&&this.m_queryNameToRpcFunctionMap.size()>0;if(u){this.remainingQueries=this.m_queryNameToRpcFunctionMap.size();var p=this.m_queryNameToRpcFunctionMap.getKeysAsIteratorOfString();while(p.hasNext()){var g=p.next();this.m_queryNameToRpcFunctionMap.getByKey(g).processFunctionExecution(t,this,e.XStringValue.create(g))}}return u};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.processInaRequest=function(t,r){var n=false;var i=null;var a=e.PrUtils.getStructureProperty(t,"Analytics");var o=e.PrUtils.getStructureProperty(a,"Definition");var s=e.PrUtils.getStructureProperty(a,"DataSource");i=e.PrUtils.getStringValueProperty(s,"InstanceId",null);var l=e.PrUtils.getStructureProperty(o,"ResultSetFeatureRequest");if(e.PrUtils.getBooleanValueProperty(l,"IsCubeBlendingSubquery",false)&&e.XString.isEqual(e.PrUtils.getStringValueProperty(l,"ResultFormat",null),"SerializedData")){n=true}var u=this.getActionContext().getApplication().getConnectionPool();var p=u.getOpenConnection(r);var g=l.getStringByKey("ResultSetPersistanceTable");var c=l.getStringByKey("ResultSetPersistanceSchema");var m=!e.XStringUtils.isNullOrEmpty(g)&&!e.XStringUtils.isNullOrEmpty(c);if(m){var y=!m;if(e.notNull(p)){var d=this.getActionContext().getSystemDescription().getSystemMapping(p.getSystemName());var A=p.getSystemDescription().getSystemMapping(this.getActionContext().getSystemName());if(e.notNull(d)&&e.notNull(A)){y=d.isValid(A)}}if(!y){this.addErrorWithMessage("query not issued for SDI remote blending");return false}}if(n&&e.notNull(i)&&e.notNull(p)){var I=p.getSystemConnect().getServerMetadata();var S=I.getMetadataForService(e.ServerService.ANALYTIC);var f=S.getByKey(e.InACapabilities.C032_FAST_PATH);var v;if(e.notNull(f)&&f.getValue()!==null){v=f.getValue()}else{v=p.getSystemDescription().getSystemType().getInAPath()}var C=p.newRpcFunction(v);var N=C.getRpcRequest();N.setSapPassportTransactionId(this.getActionContext().getInstanceId());N.setMethod(e.HttpRequestMethod.HTTP_POST);N.setRequestStructure(t);this.m_queryNameToRpcFunctionMap.put(i,C)}else{this.addErrorWithMessage("Unable to issue dependent remote query for main blending persisted query.")}return true};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.callListener=function(e,t,r,n){t.onRuntimeRemoteBlendingQueryUpdated(e,r,n)};e.RuntimeRemoteBlendingQueryUpdaterAction.prototype.onFunctionExecuted=function(t,r,n){if(t.getData()!==null){e.InAHelper.importMessages(t.getData().getRootElementGeneric(),this)}this.addAllMessages(t);this.remainingQueries--;if(t.isValid()&&e.notNull(r)){var i=r.getRootElement().getStructureByKey("SerializedData");if(e.notNull(i)){var a=i.getStringByKey("View");var o=i.getStringByKey("Cube");var s=this.getActionContext().getQueryServiceConfig().getDefinitionAsStructure();if(e.notNull(s)){var l=e.PrUtils.getStructureProperty(s,"Analytics");l=e.PrUtils.getStructureProperty(l,"DataSource");var u=e.PrUtils.getPropertyAsList(l,"Sources");if(e.notNull(u)){e.XCollectionUtils.findFirst(u,function(t){var r=e.PrUtils.asStructure(t);if(e.XString.isEqual(e.PrUtils.getStringValueProperty(r,"AliasName",null),n.getString())){r=e.PrUtils.getStructureProperty(r,"DefiningContext");r=e.PrUtils.getStructureProperty(r,"Definition");r=e.PrUtils.getStructureProperty(r,"DataSource");r=e.PrUtils.getStructureProperty(r,"SerializedData");if(e.notNull(a)&&e.PrUtils.getStringProperty(r,"View")!==null){r.putString("View",a)}if(e.notNull(o)&&e.PrUtils.getStringProperty(r,"Cube")!==null){r.putString("Cube",o)}return true}return false}.bind(this))}}this.getActionContext().getQueryServiceConfig().setDefinitionByStructure(e.QModelFormat.INA_DATA,s)}}if(this.remainingQueries===0){this.setData(e.RuntimeRemoteBlendingQueryUpdateResult.create(!this.hasErrors()));this.endSync()}};e.QInAExportImpl=function(){};e.QInAExportImpl.prototype=new e.QInAExport;e.QInAExportImpl.prototype._ff_c="QInAExportImpl";e.QInAExportImpl.prototype.exportMemberHelpRequest=function(t,r,n){return e.QInAValueHelp.exportMemberHelpRequest(this,t,r,n)};e.QInAExportImpl.prototype.exportPlanningVariableHelpRequest=function(t,r,n){return e.QInAValueHelp.exportPlanningVariableHelpRequest(this,t,r,n)};e.QInAExportImpl.prototype.exportVariableHelpRequest=function(t,r,n){return e.QInAValueHelp.exportVariableHelpRequest(this,t,r,n)};e.QInAExportImpl.prototype.exportComponent=function(t,r,n,i){var a=t;if(e.isNull(a)&&e.notNull(r)){a=r.getOlapComponentType()}var o=null;if(e.isNull(a)){this.addError(0,"No component type given for export")}else{var s;if(this.mode.isComplexModelFormat()){var l=this.mode;var u=n;if(e.isNull(u)){u=e.PrFactory.createStructure()}for(var p=0;p<l.getSizeOfComplexModelFormat();p++){this.mode=l.getSubModelFormat(p);var g=e.QModelFormat.getInAKeyForModelFormat(this.mode);s=this.lookupInAComponent(a,null);if(e.notNull(s)){var c=s.exportComponent(this,r,n,i);if(e.notNull(c)){u.put(g,c)}this.addDataRequest(l,a,r,u)}}o=u;this.mode=l}else{s=this.lookupInAComponent(a,null);if(e.notNull(s)){o=s.exportComponent(this,r,n,i)}}}return o};e.QInAExportImpl.prototype.addDataRequest=function(t,r,n,i){if(r===e.OlapComponentType.QUERY_MODEL&&t===e.QModelFormat.INA_CLONE_RENDERING&&this.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING){var a=n;var o=a.getQueryManager().serializeToContentExt(e.QModelFormat.INA_PERSISTED_QUERY_DATA,a.getModelCapabilities());if(e.notNull(o)){var s=o.getJsonContent();i.put(e.InAConstantsBios.QY_DATA_REQUEST,s)}}};e.QInAExportImpl.prototype.exportQueryModel=function(t,r,n){var i=e.QImExFlag.DEFAULT_ALL;if(!n){i=e.XMath.binaryXOr(i,e.QImExFlag.DATASOURCE)}if(!r){i=e.XMath.binaryXOr(i,e.QImExFlag.VARIABLES)}return this.exportComponent(null,t,null,i)};e.QInAExportImpl.prototype.exportLovRequest=function(t,r,n,i){return e.QInAValueHelp.exportResultSetRequest(this,i,t,r,n)};e.QInAExportImpl.prototype.exportQuerySettings=function(t,r){this.exportComponent(e.OlapComponentType.QUERY_SETTINGS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportTotals=function(t,r){this.exportComponent(e.OlapComponentType.TOTALS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportAxesSettings=function(t,r){this.exportComponent(e.OlapComponentType.AXES_SETTINGS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportAxis=function(t,r){return this.exportComponent(e.OlapComponentType.AXIS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataCell=function(t,r){return this.exportComponent(e.OlapComponentType.DATA_CELL,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataCells=function(t,r){this.exportComponent(e.OlapComponentType.DATA_CELLS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDrillPathElement=function(t,r){var n=e.QImExFlag.DEFAULT_ALL;if(r){n=e.XMath.binaryXOr(n,e.QImExFlag.DRILL_CONTEXT)}return this.exportComponent(e.MemberType.DRILL_PATH_ELEMENT,t,null,n)};e.QInAExportImpl.prototype.exportDrillOperation=function(t){return this.exportComponent(e.OlapComponentType.DRILL_OPERATION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDrillManager=function(t,r){this.exportComponent(e.OlapComponentType.DRILL_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellContextManager=function(t,r){this.exportComponent(e.OlapComponentType.CELL_CONTEXT_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellContext=function(t){return this.exportComponent(e.OlapComponentType.CELL_CONTEXT,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptionAggregationManager=function(t,r){this.exportComponent(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportStructureDimension=function(t){return this.exportComponent(null,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariables=function(t,r){return this.exportComponent(null,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariableContainer=function(t,r){this.exportComponent(e.OlapComponentType.VARIABLE_CONTAINER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariableList=function(t){return this.exportComponent(e.OlapComponentType.VARIABLE_LIST,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDataSource=function(t,r){var n=e.QImExFlag.DEFAULT_ALL;if(r){n=e.XMath.binaryXOr(n,e.QImExFlag.RUN_AS_USER)}return this.exportComponent(null,t,null,n)};e.QInAExportImpl.prototype.exportCurrencyTranslationManager=function(t,r){if(e.notNull(t)){if(t.shouldExportInAStructure(this.getMode())){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)}if(t.shouldExportInAList(this.getMode())){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_LIST,t,r,e.QImExFlag.DEFAULT_ALL)}}};e.QInAExportImpl.prototype.exportCurrencyTranslationElement=function(t,r){this.exportComponent(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportSortingManager=function(t,r){this.exportComponent(e.OlapComponentType.SORT_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCondition=function(t){return this.exportComponent(e.OlapComponentType.CONDITION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportMembers=function(t,r){this.exportComponent(e.OlapComponentType.MEMBERS,t,r,e.QImExFlag.DEFAULT_ALL);if(this.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var n=t.getOrderedStructureMemberNames();if(e.notNull(n)){var i=null;if(t.getDimensionType()===e.DimensionType.ACCOUNT){for(var a=0;a<n.size();a++){var o=n.get(a);var s=t.getLoadedStructureMember(o);if(e.notNull(s)&&!s.isModelDefinedMember()){if(e.isNull(i)){i=r.putNewList("OrderedStructureMemberNames")}i.addString(o)}}}else{i=r.putNewList("OrderedStructureMemberNames");i.addAllStrings(n)}}if(this.mode===e.QModelFormat.INA_REPOSITORY_DELTA){var l=t.getStructureLayout().getKeysAsReadOnlyListOfString();if(e.XCollectionUtils.hasElements(n)&&e.XCollectionUtils.hasElements(l)&&!e.XListUtils.isListOfStringEquals(n,l)){var u=r.putNewList("OrderedStructureLayoutMemberNames");u.addAllStrings(l)}}}};e.QInAExportImpl.prototype.exportConditionThreshold=function(t){return this.exportComponent(e.OlapComponentType.CONDITIONS_THRESHOLD,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDimensionMemberVariable=function(t,r){return this.exportComponent(e.VariableType.DIMENSION_MEMBER_VARIABLE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportOptionListVariable=function(t,r){this.exportComponent(e.VariableType.OPTION_LIST_VARIABLE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportRestrictedMeasure=function(t,r){this.exportComponent(e.MemberType.RESTRICTED_MEASURE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVarianceMeasure=function(t,r){this.exportComponent(e.MemberType.VARIANCE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptionAggregationMeasure=function(t,r){this.exportComponent(e.MemberType.EXCEPTION_AGGREGATION,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCurrencyMeasure=function(t,r){this.exportComponent(e.MemberType.CURRENCY_MEASURE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportBasicMeasure=function(t,r){this.exportComponent(e.MemberType.BASIC_MEASURE,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaMeasure=function(t,r){this.exportComponent(e.MemberType.FORMULA,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterTuple=function(t){return this.exportComponent(e.FilterComponentType.TUPLE,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterVirtualDatasource=function(t){return this.exportComponent(e.FilterComponentType.VIRTUAL_DATASOURCE,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterElement=function(t){return this.exportComponent(e.OlapComponentType.FILTER_ELEMENT,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterAlgebra=function(t,r){this.exportComponent(e.FilterComponentType.BOOLEAN_ALGEBRA,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportStructureMember=function(t){var r;if(this.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var n=this.exportComponent(null,t,null,e.QImExFlag.DEFAULT_ALL);r=n}else{r=this.exportComponent(e.MemberType.ABSTRACT_MEMBER,t,null,e.QImExFlag.DEFAULT_ALL)}return r};e.QInAExportImpl.prototype.exportCartesianList=function(t,r){return this.exportComponent(e.FilterComponentType.CARTESIAN_LIST,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportConvertedTimeCartesianList=function(t,r){return this.exportComponent(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterExpression=function(t){return this.exportComponent(e.OlapComponentType.FILTER_EXPRESSION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFixedFilter=function(t,r){this.exportComponent(e.OlapComponentType.FILTER_FIXED,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDynamicFilter=function(t,r){this.exportComponent(e.OlapComponentType.FILTER_DYNAMIC,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisibilityFilter=function(t,r){this.exportComponent(e.OlapComponentType.FILTER_VISIBILITY,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilter=function(t,r){this.exportComponent(e.OlapComponentType.SELECTOR,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportValueHelpFilter=function(t,r){return this.exportComponent(e.OlapComponentType.SELECTOR,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterOperation=function(t,r){this.exportComponent(e.FilterComponentType.OPERATION,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCellValueOperand=function(t){return this.exportComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterGeo=function(t,r){this.exportComponent(e.FilterComponentType.SPATIAL_FILTER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFilterCartesianProduct=function(t,r){this.exportComponent(e.FilterComponentType.CARTESIAN_PRODUCT,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportConditionManager=function(t,r){this.exportComponent(e.OlapComponentType.CONDITIONS_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDimension=function(t,r){var n=t.getDimensionType();if(n===e.DimensionType.FORMULA_CALCULATED_DIMENSION||n===e.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION){return this.exportComponent(e.DimensionType.FORMULA_CALCULATED_DIMENSION,t,r,e.QImExFlag.DEFAULT_ALL)}else if(n===e.DimensionType.CALCULATED_DIMENSION||n===e.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION){return this.exportCalculatedDimension(t,r)}return this.exportComponent(e.OlapComponentType.ABSTRACT_DIMENSION,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCalculatedDimension=function(t,r){return this.exportComponent(e.DimensionType.CALCULATED_DIMENSION,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVariable=function(t,r){return this.exportComponent(t.getVariableType(),t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportHierarchy=function(t,r){this.exportComponent(e.OlapComponentType.HIERARCHY,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportDimensions=function(t,r){this.exportComponent(e.OlapComponentType.DIMENSIONS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportExceptions=function(t,r){this.exportComponent(e.OlapComponentType.EXCEPTION_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaExceptionManager=function(t,r){this.exportComponent(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportFormulaException=function(t,r){this.exportComponent(e.OlapComponentType.FORMULA_EXCEPTION,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportPreQuery=function(t){return this.exportComponent(e.OlapComponentType.QUERY_MODEL,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportUniversalDisplayHierarchies=function(t,r){this.exportComponent(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportCustomHierarchyDefinition=function(t){return this.exportComponent(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,t,null,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportBlendingMappings=function(t){return e.QInADataSourceBlending.exportBlendingMappings(t)};e.QInAExportImpl.prototype.exportQueryCells=function(t,r){this.exportComponent(e.OlapComponentType.QUERY_CELLS,t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationDefinition=function(t,r){this.exportComponent(t.getOlapComponentType(),t,r,e.QImExFlag.DEFAULT_ALL)};e.QInAExportImpl.prototype.exportVisualizationManager=function(t,r){if(e.notNull(t)&&t.isRepoSerializationActive()){this.exportComponent(e.OlapComponentType.VISUALIZATION_MANAGER,t,r,e.QImExFlag.DEFAULT_ALL)}};e.QInAImportImpl=function(){};e.QInAImportImpl.prototype=new e.QInAImport;e.QInAImportImpl.prototype._ff_c="QInAImportImpl";e.QInAImportImpl.prototype.importComponent=function(t,r,n,i,a){if(e.notNull(n)){if(this.mode===e.QModelFormat.INA_METADATA||this.mode===e.QModelFormat.INA_CLONE||this.mode===e.QModelFormat.INA_CLONE_RENDERING||this.mode===e.QModelFormat.INA_METADATA_CORE||this.mode===e.QModelFormat.INA_METADATA_RENDERING||n.isEventingStopped()){n.stopEventing()}else{n.queueEventing()}}var o=true;var s=e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.QUERY_MODEL&&this.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(s&&e.notNull(n)){var l=n.getDrillManager();if(e.notNull(r)&&r.asStructure().containsKey("ValidateContextFreeNavigations")){o=r.asStructure().getBooleanByKey("ValidateContextFreeNavigations")}else{o=l.isValidatingContextFreeNavigations()}l.setValidateContextFreeNavigations(false)}var u=this.innerImportComponent(t,r,n,i,a);if(e.notNull(n)){n.resumeEventing();if(s){n.getDrillManager().setValidateContextFreeNavigations(o)}}if(t===e.OlapComponentType.QUERY_MODEL&&e.notNull(n)&&e.notNull(r)){var p=n;if(this.mode===e.QModelFormat.INA_METADATA||this.mode===e.QModelFormat.INA_METADATA_CORE||this.mode===e.QModelFormat.INA_METADATA_RENDERING){p.setServerBaseSerialization(this.mode,e.QModelOrigin.IMPORTER,r.asStructure())}}return u};e.QInAImportImpl.prototype.innerImportComponent=function(t,r,n,i,a){var o=t;if(e.isNull(o)&&e.notNull(n)){o=n.getOlapComponentType()}if(e.isNull(o)&&e.notNull(r)&&r.isStructure()){var s=r;var l=s.getStringByKey("CType");if(e.notNull(l)){o=e.QInAConverter.lookupComponentType(l)}}if(e.isNull(o)){this.addError(0,"Cannot find olap component type for import");return n}var u;var p=n;if(this.mode===e.QModelFormat.INA_METADATA){this.mode=e.QModelFormat.INA_METADATA_CORE;u=this.lookupInAComponent(o,r);if(e.isNull(u)){return n}p=u.importComponent(this,r,p,i,a);this.mode=e.QModelFormat.INA_DATA;u=this.lookupInAComponent(o,r);if(e.isNull(u)){return n}p=u.importComponent(this,r,p,i,a);this.mode=e.QModelFormat.INA_METADATA}else if(this.mode.isComplexModelFormat()){var g=this.mode;var c=r;for(var m=0;m<g.getSizeOfComplexModelFormat();m++){this.mode=g.getSubModelFormat(m);var y=e.QModelFormat.getInAKeyForModelFormat(this.mode);var d=c.getByKey(y);u=this.lookupInAComponent(o,d);if(e.isNull(u)){return n}p=u.importComponent(this,d,p,i,a)}this.mode=g}else{u=this.lookupInAComponent(o,r);if(e.isNull(u)){return n}p=u.importComponent(this,r,p,i,a)}return p};e.QInAImportImpl.prototype.importQueryModel=function(t,r){this.importComponent(e.OlapComponentType.QUERY_MODEL,t,r,null,r)};e.QInAImportImpl.prototype.importQuerySettings=function(t,r){this.importComponent(e.OlapComponentType.QUERY_SETTINGS,t,null,null,r)};e.QInAImportImpl.prototype.importDataSource=function(t){return this.importComponent(e.OlapComponentType.DATA_SOURCE,t,null,null,null)};e.QInAImportImpl.prototype.importDocumentsInfo=function(t){return this.importComponent(e.OlapComponentType.DOCUMENTS_INFO,t,null,null,null)};e.QInAImportImpl.prototype.importTotals=function(t,r,n){this.importComponent(e.OlapComponentType.TOTALS,t,r,null,n)};e.QInAImportImpl.prototype.importAttribute=function(t,r,n){this.importComponent(e.OlapComponentType.ATTRIBUTE,t,null,r,n)};e.QInAImportImpl.prototype.importAxesSettings=function(t,r){this.importComponent(e.OlapComponentType.AXES_SETTINGS,t,r,null,r)};e.QInAImportImpl.prototype.importAxis=function(t,r,n){this.importComponent(e.OlapComponentType.AXIS,t,r,null,n)};e.QInAImportImpl.prototype.importExceptionAggregationManager=function(t,r,n){this.importComponent(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importSortingManager=function(t,r,n){this.importComponent(e.OlapComponentType.SORT_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importCurrencyTranslationManager=function(t,r,n){this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,t,r,null,n);this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_LIST,t,r,null,n);this.importComponent(e.OlapComponentType.MEASURE_TRANSLATIONS,t,r,null,n)};e.QInAImportImpl.prototype.importCurrencyTranslationElement=function(t,r,n){this.importComponent(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM,t,r,null,n)};e.QInAImportImpl.prototype.importQueryCells=function(t,r,n){this.importComponent(e.OlapComponentType.QUERY_CELLS,t,r,null,n)};e.QInAImportImpl.prototype.importHierarchy=function(t,r){this.importComponent(e.OlapComponentType.HIERARCHY,r,t,null,t.getContext())};e.QInAImportImpl.prototype.importExceptions=function(t,r){this.importComponent(e.OlapComponentType.EXCEPTION_MANAGER,t,r,null,null)};e.QInAImportImpl.prototype.importFormulaExceptionManager=function(t,r,n){this.importComponent(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importFormulaException=function(t,r,n,i){return this.importComponent(e.OlapComponentType.FORMULA_EXCEPTION,t,r,n,i)};e.QInAImportImpl.prototype.importUniversalDisplayHierarchies=function(t,r,n){this.importComponent(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,t,r,null,n)};e.QInAImportImpl.prototype.importFixedFilter=function(t,r,n){this.importComponent(e.OlapComponentType.FILTER_FIXED,t,null,r,n)};e.QInAImportImpl.prototype.importDynamicFilter=function(t,r,n){this.importComponent(e.OlapComponentType.FILTER_DYNAMIC,t,null,r,n)};e.QInAImportImpl.prototype.importVisibilityFilter=function(t,r,n){this.importComponent(e.OlapComponentType.FILTER_VISIBILITY,t,null,r,n)};e.QInAImportImpl.prototype.importFilterElement=function(t,r,n,i){return this.importComponent(e.OlapComponentType.FILTER_ELEMENT,t,r,n,i)};e.QInAImportImpl.prototype.importFilterAlgebra=function(t,r,n){return this.importComponent(e.FilterComponentType.BOOLEAN_ALGEBRA,r,null,t,n)};e.QInAImportImpl.prototype.importCartesianList=function(t,r,n,i){return this.importComponent(e.FilterComponentType.CARTESIAN_LIST,t,r,n,i)};e.QInAImportImpl.prototype.importConvertedTimeCartesianList=function(t,r,n,i){return this.importComponent(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,t,r,n,i)};e.QInAImportImpl.prototype.importFilterExpression=function(t,r,n,i){return this.importComponent(e.OlapComponentType.FILTER_EXPRESSION,r,t,n,i)};e.QInAImportImpl.prototype.importFilter=function(t,r,n){this.importComponent(e.OlapComponentType.SELECTOR,t,r,null,n)};e.QInAImportImpl.prototype.importFilterOperation=function(t,r,n){return this.importComponent(e.FilterComponentType.OPERATION,t,null,r,n)};e.QInAImportImpl.prototype.importFilterCellValueOperand=function(t,r){return this.importComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,t,null,null,r)};e.QInAImportImpl.prototype.importFilterGeo=function(t,r,n){return this.importComponent(e.FilterComponentType.SPATIAL_FILTER,r,null,t,n)};e.QInAImportImpl.prototype.importDrillManager=function(t,r,n){this.importComponent(e.OlapComponentType.DRILL_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importDrillPathElement=function(t,r,n){return this.importComponent(e.MemberType.DRILL_PATH_ELEMENT,t,null,r,n)};e.QInAImportImpl.prototype.importDrillOperation=function(t,r,n){this.importComponent(e.OlapComponentType.DRILL_OPERATION,t,null,r,n)};e.QInAImportImpl.prototype.importVariableManager=function(t,r,n){this.importComponent(e.OlapComponentType.VARIABLE_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importVariables=function(t,r){this.importComponent(e.OlapComponentType.VARIABLE_CONTAINER,t,r,null,null)};e.QInAImportImpl.prototype.importVariableList=function(t,r){this.importComponent(e.OlapComponentType.VARIABLE_LIST,t,r,null,null)};e.QInAImportImpl.prototype.importSimpleTypeVariable=function(t,r,n){return this.importComponent(e.VariableType.SIMPLE_TYPE_VARIABLE,t,r,null,n)};e.QInAImportImpl.prototype.importDimensionMemberVariable=function(t,r,n){return this.importComponent(e.VariableType.DIMENSION_MEMBER_VARIABLE,t,r,null,n)};e.QInAImportImpl.prototype.importOptionListVariable=function(t,r,n){return this.importComponent(e.VariableType.OPTION_LIST_VARIABLE,t,r,null,n)};e.QInAImportImpl.prototype.importConditionManager=function(t,r,n){this.importComponent(e.OlapComponentType.CONDITIONS_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importCondition=function(t,r,n){return this.importComponent(e.OlapComponentType.CONDITION,r,n,t.getConditionManager(),t)};e.QInAImportImpl.prototype.importConditionThreshold=function(t,r,n,i){return this.importComponent(e.OlapComponentType.CONDITIONS_THRESHOLD,r,n,i,t)};e.QInAImportImpl.prototype.importDataCell=function(t,r){this.importComponent(e.OlapComponentType.DATA_CELL,t,null,null,r)};e.QInAImportImpl.prototype.importDataCells=function(t,r){this.importComponent(e.OlapComponentType.DATA_CELLS,t,null,null,r)};e.QInAImportImpl.prototype.importMembers=function(t,r,n){this.importComponent(e.OlapComponentType.MEMBERS,t,r,null,n);var i=null;if(this.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var a=e.PrUtils.getListProperty(t,"OrderedStructureMemberNames");if(e.notNull(a)){i=this.getOrderedList(a);r.reOrderStructureMembers(i)}}if(this.mode===e.QModelFormat.INA_REPOSITORY_DELTA){var o=e.PrUtils.getListProperty(t,"OrderedStructureLayoutMemberNames");if(e.notNull(o)){i=this.getOrderedList(o)}e.XListUtils.reorderList(r.getStructureLayout(),i)}};e.QInAImportImpl.prototype.getOrderedList=function(t){var r;r=e.XListOfString.create();var n=e.PrUtils.getListSize(t,0);for(var i=0;i<n;i++){var a=e.PrUtils.getStringElement(t,i);e.XObjectExt.assertNotNullExt(a,"illegal state");r.add(a.getString())}return r};e.QInAImportImpl.prototype.importRestrictedMeasure=function(t,r,n){return this.importComponent(e.MemberType.RESTRICTED_MEASURE,t,null,r,n)};e.QInAImportImpl.prototype.importVarianceMeasure=function(t,r,n){return this.importComponent(e.MemberType.VARIANCE,t,null,r,n)};e.QInAImportImpl.prototype.importExceptionAggregationMeasure=function(t,r,n){return this.importComponent(e.MemberType.EXCEPTION_AGGREGATION,t,null,r,n)};e.QInAImportImpl.prototype.importCurrencyMeasure=function(t,r,n){return this.importComponent(e.MemberType.CURRENCY_MEASURE,t,null,r,n)};e.QInAImportImpl.prototype.importBasicMeasure=function(t,r,n){return this.importComponent(e.MemberType.BASIC_MEASURE,t,null,r,n)};e.QInAImportImpl.prototype.importFormulaMeasure=function(t,r,n){return this.importComponent(e.MemberType.FORMULA,t,null,r,n)};e.QInAImportImpl.prototype.importStructureMember=function(t,r,n){return this.importComponent(e.MemberType.ABSTRACT_MEMBER,r,null,t,n)};e.QInAImportImpl.prototype.importDimensions=function(t,r,n){this.importComponent(e.OlapComponentType.DIMENSIONS,t,r,null,n)};e.QInAImportImpl.prototype.importDimension=function(t,r){return this.importComponent(e.OlapComponentType.ABSTRACT_DIMENSION,t,null,null,r)};e.QInAImportImpl.prototype.importCalculatedDimension=function(t,r){return this.importComponent(e.DimensionType.CALCULATED_DIMENSION,t,null,null,r)};e.QInAImportImpl.prototype.importFormulaCalculatedDimension=function(t,r,n){return this.importComponent(e.DimensionType.FORMULA_CALCULATED_DIMENSION,t,n,null,r)};e.QInAImportImpl.prototype.importModellerDimensions=function(t,r,n){this.importComponent(e.OlapComponentType.MODELLER_DIMENSIONS,t,r,null,n)};e.QInAImportImpl.prototype.importModellerCurrencyTranslation=function(t,r,n){this.importComponent(e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION,t,r,null,n)};e.QInAImportImpl.prototype.importModellerMetadataProperties=function(t,r,n){this.importComponent(e.OlapComponentType.MODELLER_METADATA_PROPERTIES,t,r,null,n)};e.QInAImportImpl.prototype.importModellerDefinedVariables=function(t,r,n){this.importComponent(e.OlapComponentType.MODELLER_VARIABLES,t,r,null,n)};e.QInAImportImpl.prototype.importVariable=function(t,r){return this.importComponent(e.VariableType.ANY_VARIABLE,t,null,r,r)};e.QInAImportImpl.prototype.importBasicQueryModelCapabilities=function(t){this.importComponent(e.OlapComponentType.QUERY_MODEL,null,t,null,t)};e.QInAImportImpl.prototype.importPreQuery=function(e,t){this.importQueryModel(e,t)};e.QInAImportImpl.prototype.importCellContext=function(t,r,n){return this.importComponent(e.OlapComponentType.CELL_CONTEXT,t,null,r,n)};e.QInAImportImpl.prototype.importCellContextManager=function(t,r,n){this.importComponent(e.OlapComponentType.CELL_CONTEXT_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importVisualizationDefinition=function(e,t){this.importComponent(t.getOlapComponentType(),e,t,null,t.getQueryModel())};e.QInAImportImpl.prototype.importVisualizationManager=function(t,r,n){this.importComponent(e.OlapComponentType.VISUALIZATION_MANAGER,t,r,null,n)};e.QInAImportImpl.prototype.importDataSourceExternalDimensions=function(t,r){e.QInADataSourceExtDims.importQd(this,r,t)};e.QInAImportImpl.prototype.importCustomHierarchyDefinition=function(t){return this.importComponent(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,t,null,null,null)};e.QInAImportImpl.prototype.processImport=function(t,r,n,i,a,o,s,l){var u=e.QInAImportAction.create(this,i,a,o,s,l);u.processSyncAction(t,r,n);return u};e.FunctionalValueHelpParameterValues=function(){};e.FunctionalValueHelpParameterValues.prototype=new e.DfFunctionalValueHelpSyncAction;e.FunctionalValueHelpParameterValues.prototype._ff_c="FunctionalValueHelpParameterValues";e.FunctionalValueHelpParameterValues.create=function(t){var r=new e.FunctionalValueHelpParameterValues;r.setupFunctionalValueHelp(t.getFunction().getDimension());r.m_parameter=t;return r};e.FunctionalValueHelpParameterValues.prototype.m_parameter=null;e.FunctionalValueHelpParameterValues.prototype.releaseObject=function(){e.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_parameter=null};e.FunctionalValueHelpParameterValues.prototype.getPath=function(t){var r=e.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,t);r.append("/").append(this.m_parameter.getFunction().getName());r.append("/parameter");r.append("/").append(this.m_parameter.getName());return r};e.FunctionalValueHelpParameterValues.prototype.createDataFromResponse=function(t){var r=e.PrUtils.asList(t);if(e.PrUtils.isListEmpty(r)){this.addErrorWithMessage("No parameter values available");return null}var n=e.XList.create();for(var i=0;i<r.size();i++){var a=e.PrUtils.getStructureElement(r,i);var o=e.PrUtils.getStringValueProperty(a,"name",null);var s=e.PrUtils.getStringValueProperty(a,"description",null);if(e.XStringUtils.isNotNullAndNotEmpty(o)){n.add(e.QFValueHelpParameterValue.createParameterValue(o,s,this.m_parameter))}}return n};e.FunctionalValueHelpParameterValues.prototype.callListener=function(e,t,r,n){t.onParameterValuesLoaded(e,r,n)};e.FunctionalValueHelpParameters=function(){};e.FunctionalValueHelpParameters.prototype=new e.DfFunctionalValueHelpSyncAction;e.FunctionalValueHelpParameters.prototype._ff_c="FunctionalValueHelpParameters";e.FunctionalValueHelpParameters.create=function(t){var r=new e.FunctionalValueHelpParameters;r.setupFunctionalValueHelp(t.getDimension());r.m_selectFunction=t;return r};e.FunctionalValueHelpParameters.prototype.m_selectFunction=null;e.FunctionalValueHelpParameters.prototype.releaseObject=function(){e.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_selectFunction=null};e.FunctionalValueHelpParameters.prototype.getPath=function(t){var r=e.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,t);r.append("/").append(this.m_selectFunction.getName());r.append("/parameter");return r};e.FunctionalValueHelpParameters.prototype.createDataFromResponse=function(t){var r=e.XList.create();var n=e.PrUtils.asList(t);if(!e.PrUtils.isListEmpty(n)){for(var i=0;i<n.size();i++){var a=e.PrUtils.getStructureElement(n,i);var o=e.PrUtils.getStringValueProperty(a,"parameterName",null);var s=e.PrUtils.getStringValueProperty(a,"description",null);if(e.XStringUtils.isNotNullAndNotEmpty(o)){r.add(e.QFValueHelpParameter.createParameter(o,s,this.m_selectFunction))}}}return r};e.FunctionalValueHelpParameters.prototype.callListener=function(e,t,r,n){t.onParametersLoaded(e,r,n)};e.FunctionalValueHelpResolveValues=function(){};e.FunctionalValueHelpResolveValues.prototype=new e.DfFunctionalValueHelpSyncAction;e.FunctionalValueHelpResolveValues.prototype._ff_c="FunctionalValueHelpResolveValues";e.FunctionalValueHelpResolveValues.create=function(t,r){var n=new e.FunctionalValueHelpResolveValues;n.setupFunctionalValueHelp(t.getDimension());n.m_selectFunction=t;n.m_parameterValues=r;return n};e.FunctionalValueHelpResolveValues.prototype.m_selectFunction=null;e.FunctionalValueHelpResolveValues.prototype.m_parameterValues=null;e.FunctionalValueHelpResolveValues.prototype.releaseObject=function(){e.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_selectFunction=null;this.m_parameterValues=null};e.FunctionalValueHelpResolveValues.prototype.getPath=function(t){var r=e.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,t);r.append("/").append(this.m_selectFunction.getName());r.append("/value");return r};e.FunctionalValueHelpResolveValues.prototype.getUriParameters=function(){var t=e.XList.create();for(var r=0;r<this.m_parameterValues.size();r++){var n=this.m_parameterValues.get(r);t.add(e.XNameValuePair.create(n.getParameter().getName(),n.getName()))}return t};e.FunctionalValueHelpResolveValues.prototype.createDataFromResponse=function(t){e.InAHelper.importMessages(t,this);var r=e.PrUtils.getListProperty(e.PrUtils.asStructure(t),"range");var n=e.XList.create();if(!e.PrUtils.isListEmpty(r)){for(var i=0;i<r.size();i++){var a=r.getStructureAt(i);n.add(e.QFValueHelpResolvedValue.create(a.getStringByKey("low"),a.getStringByKey("high")))}}return n};e.FunctionalValueHelpResolveValues.prototype.callListener=function(e,t,r,n){t.onFunctionalValueResolved(e,r,n)};e.FunctionalValueHelpSelectFunctions=function(){};e.FunctionalValueHelpSelectFunctions.prototype=new e.DfFunctionalValueHelpSyncAction;e.FunctionalValueHelpSelectFunctions.prototype._ff_c="FunctionalValueHelpSelectFunctions";e.FunctionalValueHelpSelectFunctions.create=function(t){var r=new e.FunctionalValueHelpSelectFunctions;r.setupFunctionalValueHelp(t);return r};e.FunctionalValueHelpSelectFunctions.prototype.createDataFromResponse=function(t){var r=this.getActionContext();var n=e.XList.create();var i=e.PrUtils.asList(t);var a=e.PrUtils.getListSize(i,0);for(var o=0;o<a;o++){var s=e.PrUtils.getStructureElement(i,o);var l=e.PrUtils.getStringValueProperty(s,"functionName",null);var u=e.PrUtils.getStringValueProperty(s,"description",null);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.add(e.QFValueHelpSelectFunction.createSelect(l,u,r))}}return n};e.FunctionalValueHelpSelectFunctions.prototype.callListener=function(e,t,r,n){t.onFunctionsLoaded(e,r,n)};e.InAFusionLayer=function(){};e.InAFusionLayer.prototype=new e.SyncActionExt;e.InAFusionLayer.prototype._ff_c="InAFusionLayer";e.InAFusionLayer.URL_ACTION=null;e.InAFusionLayer.METADATA_ACTION=null;e.InAFusionLayer.MODEL_ACTION=null;e.InAFusionLayer.REPO_ACTION=null;e.InAFusionLayer.DATASOURCE_ACTION=null;e.InAFusionLayer.staticSetup=function(){e.InAFusionLayer.URL_ACTION=e.XComponentType.createType("QDocUrlAction",e.OlapComponentType.OLAP);e.InAFusionLayer.METADATA_ACTION=e.XComponentType.createType("QDocMetadataAction",e.OlapComponentType.OLAP);e.InAFusionLayer.MODEL_ACTION=e.XComponentType.createType("QDocModelAction",e.OlapComponentType.OLAP);e.InAFusionLayer.REPO_ACTION=e.XComponentType.createType("QDocRepoAction",e.OlapComponentType.OLAP);e.InAFusionLayer.DATASOURCE_ACTION=e.XComponentType.createType("QDocDataSourceAction",e.OlapComponentType.OLAP)};e.InAFusionLayer.prototype.m_queryServiceConfig=null;e.InAFusionLayer.prototype.m_dataSource=null;e.InAFusionLayer.prototype.m_connectionContainer=null;e.InAFusionLayer.prototype.m_serverMetadata=null;e.InAFusionLayer.prototype.m_content=null;e.InAFusionLayer.prototype.m_nextActionType=null;e.InAFusionLayer.prototype.m_nextDataSource=null;e.InAFusionLayer.prototype.m_nextDocument=null;e.InAFusionLayer.prototype.endSync=function(){this.setData(this);e.SyncActionExt.prototype.endSync.call(this)};e.InAFusionLayer.prototype.getConfig=function(){return this.m_queryServiceConfig};e.InAFusionLayer.prototype.setConfig=function(e){this.m_queryServiceConfig=e};e.InAFusionLayer.prototype.getConnectionContainer=function(){return this.m_connectionContainer};e.InAFusionLayer.prototype.getServerMetadata=function(){return this.m_serverMetadata};e.InAFusionLayer.prototype.setServerMetadata=function(e){this.m_serverMetadata=e};e.InAFusionLayer.prototype.setConnection=function(e){this.m_connectionContainer=e};e.InAFusionLayer.prototype.getConnection=function(){return this.m_connectionContainer};e.InAFusionLayer.prototype.getContent=function(){return this.m_content};e.InAFusionLayer.prototype.setContent=function(e){this.m_content=e};e.InAFusionLayer.prototype.setContentExt=function(t,r){var n=e.DocConverterFactory.createDocConverter(r,e.QModelFormat.INA_REPOSITORY);if(e.notNull(n)){var i=n.convert(this.getApplication(),t,e.QModelFormat.INA_REPOSITORY);this.addAllMessages(i);if(this.isValid()){var a=i.getData();this.m_content=a}}else{this.addErrorExt(e.OriginLayer.APPLICATION,0,e.XStringUtils.concatenate2("Cannot find document to ina_repo converter for ",r.getName()),null)}};e.InAFusionLayer.prototype.callListener=function(e,t,r,n){t.onDocFusionLayerDone(e,r,n)};e.InAFusionLayer.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InAFusionLayer.prototype.getSystemName=function(){return this.getSystemDescription().getSystemName()};e.InAFusionLayer.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType()};e.InAFusionLayer.prototype.getSystemDescription=function(){return this.getConfig().getSystemDescription()};e.InAFusionLayer.prototype.hasPrivateConnection=function(){return this.getConfig().hasPrivateConnection()};e.InAFusionLayer.prototype.getConnectionName=function(){return this.getConfig().getConnectionName()};e.InAFusionLayer.prototype.getDataSource=function(){return this.m_dataSource};e.InAFusionLayer.prototype.setDataSource=function(e){this.m_dataSource=e};e.InAFusionLayer.prototype.getOlapEnv=function(){return this.getApplication().getOlapEnvironment()};e.InAFusionLayer.prototype.getNextDataSource=function(){return this.m_nextDataSource};e.InAFusionLayer.prototype.setNextDataSource=function(e){this.m_nextDataSource=e};e.InAFusionLayer.prototype.getNextActionType=function(){return this.m_nextActionType};e.InAFusionLayer.prototype.setNextActionType=function(e){this.m_nextActionType=e};e.InAFusionLayer.prototype.getNextDocument=function(){return this.m_nextDocument};e.InAFusionLayer.prototype.setNextDocument=function(e){this.m_nextDocument=e};e.InAFusionMainAction=function(){};e.InAFusionMainAction.prototype=new e.SyncActionExt;e.InAFusionMainAction.prototype._ff_c="InAFusionMainAction";e.InAFusionMainAction.createAndRun=function(t,r,n,i){var a=new e.InAFusionMainAction;a.setupActionAndRun(t,r,n,i);return a};e.InAFusionMainAction.prototype.m_nextDataSource=null;e.InAFusionMainAction.prototype.m_nextActionType=null;e.InAFusionMainAction.prototype.m_nextDocument=null;e.InAFusionMainAction.prototype.m_connections=null;e.InAFusionMainAction.prototype.processSynchronization=function(t){var r=this.getActionContext();this.setData(r);var n=this.getConfig();this.m_connections=e.XHashMapByString.create();var i=n.getConnectionContainer();if(e.notNull(i)){this.m_connections.put(i.getSystemName(),i)}var a=n.getDefinitionContent();if(e.notNull(a)){var o=a.getContentType();if(o.isTypeOf(e.QModelFormat.INA_REPOSITORY)||o.isTypeOf(e.QModelFormat.INA_CLONE)){this.m_nextActionType=e.InAFusionLayer.REPO_ACTION;this.m_nextDocument=a}else if(o.isTypeOf(e.QModelFormat.INA_METADATA)){this.m_nextActionType=e.InAFusionLayer.METADATA_ACTION;this.m_nextDocument=a}}var s=n.getDataSource();if(e.isNull(this.m_nextActionType)&&e.notNull(s)){if(e.XStringUtils.isNotNullAndNotEmpty(s.getName())){this.m_nextDataSource=s;this.m_nextActionType=e.InAFusionLayer.DATASOURCE_ACTION}}if(this.getActiveSyncType()===e.SyncType.BLOCKING){while(e.notNull(this.m_nextActionType)){this.processLayer()}this.endSync()}else{this.processLayer()}return true};e.InAFusionMainAction.prototype.processLayer=function(){if(e.isNull(this.m_nextActionType)){this.endSync()}else{var t=this.getConfig();var r=this;var n=this.getActiveSyncType();var i=null;if(n===e.SyncType.BLOCKING){r=null}if(this.m_nextActionType===e.InAFusionLayer.URL_ACTION){i=e.InAFusionUrlAction.createAndRun(n,r,null,this,t,this.m_nextDataSource)}else if(this.m_nextActionType===e.InAFusionLayer.MODEL_ACTION){i=e.InAFusionModelAction.createAndRun(n,r,null,this,t,this.m_nextDataSource)}else if(this.m_nextActionType===e.InAFusionLayer.METADATA_ACTION){i=e.InAFusionMetadataAction.createAndRun(n,r,null,this,t,this.m_nextDataSource,this.m_nextDocument)}else if(this.m_nextActionType===e.InAFusionLayer.REPO_ACTION){i=e.InAFusionRepoAction.createAndRun(n,r,null,this,t,this.m_nextDataSource,this.m_nextDocument)}else if(this.m_nextActionType===e.InAFusionLayer.DATASOURCE_ACTION){i=e.InAFusionDataSourceAction.createAndRun(n,r,null,this,t,this.m_nextDataSource,this.m_nextDocument)}if(e.notNull(i)){if(n===e.SyncType.BLOCKING){var a=i.getData();this.onDocFusionLayerDone(i,a,null)}}else{this.m_nextActionType=null;this.addError(0,"Cannot find action type for fusion");if(n===e.SyncType.NON_BLOCKING){this.endSync()}}}};e.InAFusionMainAction.prototype.onDocFusionLayerDone=function(t,r,n){this.addAllMessages(t);this.getActionContext().addLayer(r);this.m_nextDataSource=null;this.m_nextActionType=null;this.m_nextDocument=null;if(this.isValid()){var i=r.getComponentType();var a=this.getActionContext();var o=r.getContent();this.m_nextActionType=r.getNextActionType();this.m_nextDataSource=r.getNextDataSource();this.m_nextDocument=r.getNextDocument();if(i===e.InAFusionLayer.METADATA_ACTION){var s=r;a.setConnectionContainer(s.getConnectionContainer());a.setServerMetadata(s.getServerMetadata());a.setMetadataContent(o);a.setDataSource(this.m_nextDataSource)}else if(i===e.InAFusionLayer.REPO_ACTION){a.setRepositoryContent(o)}}if(this.getActiveSyncType()===e.SyncType.NON_BLOCKING){if(e.notNull(this.m_nextActionType)){this.processLayer()}else{this.endSync()}}};e.InAFusionMainAction.prototype.callListener=function(e,t,r,n){t.onDocFusionDone(this,r,n)};e.InAFusionMainAction.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InAFusionMainAction.prototype.getConfig=function(){return this.getActionContext().getConfig()};e.InAFusionMainAction.prototype.getConnectionExt=function(t,r,n){var i=this.m_connections.getByKey(t);if(e.isNull(i)){var a=this.getApplication();var o=a.getConnectionPool();i=o.getConnectionExt(t,r,n);this.m_connections.put(t,i)}return i};e.InACustomHierarchyProvider=function(){};e.InACustomHierarchyProvider.prototype=new e.SyncActionExt;e.InACustomHierarchyProvider.prototype._ff_c="InACustomHierarchyProvider";e.InACustomHierarchyProvider.create=function(t,r,n){var i=new e.InACustomHierarchyProvider;i.setupAction(null,null,null,t);i.m_queryProvider=e.XWeakReferenceUtil.getWeakRef(t);i.m_customHierarchyDefinition=e.XWeakReferenceUtil.getWeakRef(r);i.m_enforceRequest=n;return i};e.InACustomHierarchyProvider.prototype.m_queryProvider=null;e.InACustomHierarchyProvider.prototype.m_customHierarchyDefinition=null;e.InACustomHierarchyProvider.prototype.m_enforceRequest=false;e.InACustomHierarchyProvider.prototype.releaseObject=function(){e.SyncActionExt.prototype.releaseObject.call(this);this.m_queryProvider=e.XObjectExt.release(this.m_queryProvider);this.m_customHierarchyDefinition=e.XObjectExt.release(this.m_customHierarchyDefinition)};e.InACustomHierarchyProvider.prototype.getApplication=function(){return this.getActionContext().getApplication()};e.InACustomHierarchyProvider.prototype.getCustomHierarchyDefinition=function(){return e.XWeakReferenceUtil.getHardRef(this.m_customHierarchyDefinition)};e.InACustomHierarchyProvider.prototype.getQueryProvider=function(){return e.XWeakReferenceUtil.getHardRef(this.m_queryProvider)};e.InACustomHierarchyProvider.prototype.getCustomHierarchyRepo=function(){return this.getQueryProvider().getOlapEnv().getCustomHierarchyRepository()};e.InACustomHierarchyProvider.prototype.getCustomHierarchySessionData=function(){var t=null;var r=this.getQueryProvider().getConnection();if(e.notNull(r)){t=r.getCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA);if(e.isNull(t)){t=e.CustomHierarchySessionData.create();r.addCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA,t)}}return t};e.InACustomHierarchyProvider.prototype.processExecution=function(t,r,n){var i=this.getCustomHierarchyDefinition();if(e.isNull(i)||e.XStringUtils.isNullOrEmpty(i.getDimensionName())||!e.XCollectionUtils.hasElements(i.getChildNodes())){this.addError(e.ErrorCodes.INVALID_STATE,"Invalid custom hierarchy definition!");return this}return this.processSyncAction(t,r,n)};e.InACustomHierarchyProvider.prototype.processSynchronization=function(t){var r=this.getQueryProvider();var n=this.getCustomHierarchyDefinition();var i=this.getCustomHierarchySessionData();var a=!this.m_enforceRequest&&e.notNull(i)?i.getHierarchyInAResponse(n):null;if(e.notNull(a)){this.applyCustomHierarchy(this.createCustomHierarchy(n,a));return false}else if(e.notNull(i)&&i.registerOnActiveHierarchySubmit(n,this)){return true}else{if(e.notNull(i)){i.flagHierarchySubmitActive(n)}var o=r.createFunction();this.setSyncChild(o);var s=o.getRpcRequest();s.setRequestStructure(this.fillCustomHierarchyRequestStructure(n));o.processFunctionExecution(t,this,null);return true}};e.InACustomHierarchyProvider.prototype.fillCustomHierarchyRequestStructure=function(t){this.addProfileStep("fillCustomHierarchyRequestStructure");var r=e.PrFactory.createStructure();var n=this.getQueryProvider().setInnerStructure(r,"Analytics",e.ProcessingStep.HIERARCHY_SUBMIT);var i=e.QInAExportFactory.createForData(this.getApplication(),this.getQueryProvider().getModelCapabilities());var a=i.exportCustomHierarchyDefinition(t);n.put("Definition",a);this.addAllMessages(i);var o=r.getStructureByKey("Analytics");var s=o.putNewStructure("ProcessingDirectives");s.putString("ProcessingStep","TransientHierarchySubmit");this.endProfileStep();return r};e.InACustomHierarchyProvider.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);var i=this.getCustomHierarchyDefinition();var a=null;if(t.isValid()&&e.notNull(r)&&e.notNull(i)){var o=e.PrUtils.getListProperty(r.getRootElement(),"Grids");var s=e.PrUtils.getStructureElement(o,0);var l=e.PrUtils.getListProperty(s,"Axes");var u=e.PrUtils.getStructureElement(l,0);var p=e.PrUtils.getListProperty(u,"Dimensions");var g=e.PrUtils.getStructureElement(p,0);var c=i.getDimensionName();var m=this.getQueryProvider().getQueryModel().getDimensionByName(c);if(e.isNull(m)||e.isNull(g)||!e.XString.isEqual(c,g.getStringByKey("Name"))){this.addError(e.ErrorCodes.OTHER_ERROR,"Invalid custom hierarchy submit response");this.finalizeCustomHierarchyProcessing(i,null);return}a=g.getStructureByKey("Hierarchy");if(e.isNull(a)||a.getStringByKey("Name")===null){this.addError(e.ErrorCodes.OTHER_ERROR,e.XStringUtils.concatenate2("Invalid custom hierarchy submit response for dimension ",c));this.finalizeCustomHierarchyProcessing(i,null);return}i.setName(a.getStringByKey("Name"));this.getCustomHierarchyRepo().addCustomHierarchy(i);this.applyCustomHierarchy(this.createCustomHierarchy(i,a))}this.finalizeCustomHierarchyProcessing(i,a)};e.InACustomHierarchyProvider.prototype.finalizeCustomHierarchyProcessing=function(t,r){var n=this.getCustomHierarchySessionData();if(e.notNull(n)){n.finishHierarchySubmit(t,r)}this.endSync()};e.InACustomHierarchyProvider.prototype.onCustomHierarchySubmitted=function(t,r){if(e.notNull(t)&&t.isEqualTo(this.getCustomHierarchyDefinition())&&this.getSyncState()===e.SyncState.PROCESSING){if(e.notNull(r)){this.applyCustomHierarchy(this.createCustomHierarchy(t,r))}this.endSync()}};e.InACustomHierarchyProvider.prototype.createCustomHierarchy=function(t,r){var n=this.getQueryProvider().getQueryModel().getDimensionByName(t.getDimensionName());var i=e.PrUtils.getStringProperty(r,"Name");var a=e.PrUtils.getStringProperty(r,"Version");var o=e.PrUtils.getStringProperty(r,"DueDate");var s=e.QHierarchy.createCustomHierarchy(n.getContext(),n,i.getString(),t.getDescription());if(e.notNull(a)){s.setHierarchyVersion(a.getString())}if(e.notNull(o)){var l=n.getQueryModel().getSystemType().isTypeOf(e.SystemType.ABAP);var u=l?e.XDate.createDateFromSAPFormat(o.getString()):e.XDate.createDateFromIsoFormat(o.getString());s.setHierarchyDueDate(u)}return s};e.InACustomHierarchyProvider.prototype.applyCustomHierarchy=function(t){var r=t.getDimension();r.getHierarchyManager().addCustomHierarchy(t);var n=r.getCustomHierarchyDefinition();if(e.notNull(n)&&e.XString.isEqual(n.getName(),t.getName())){r.setHierarchy(t);var i=r.getQueryManager();if(e.notNull(i)){if(i.isExecuteAutoVariableSubmit()&&!i.isProcessingAutoSubmit()){var a=r.getHierarchyNameVariableName();if(e.XStringUtils.isNotNullAndNotEmpty(a)){i.getVariable(a).setWinControlInAutoSubmit(false)}}}}this.setData(t)};e.InAUpdatedMDProcessor=function(){};e.InAUpdatedMDProcessor.prototype=new e.DfQContext;e.InAUpdatedMDProcessor.prototype._ff_c="InAUpdatedMDProcessor";e.InAUpdatedMDProcessor.create=function(t,r,n){var i=new e.InAUpdatedMDProcessor;i.setupProcessor(t,r,n);return i};e.InAUpdatedMDProcessor.merge=function(t,r,n,i){n.metadataUpdateEventing();var a=e.InAQMgrMergeSettings.create(true);e.InAUpdatedMDProcessor.updateCubeInfo(r,n);e.InAUpdatedMDProcessor.updateDimensions(t,r,n,i,a);e.InAUpdatedMDProcessor.updateVariables(t,r,n,a);e.InAUpdatedMDProcessor.updateFilters(t,r,n,a);e.InAUpdatedMDProcessor.updateConditions(t,r,n,a);e.InAUpdatedMDProcessor.updateSorting(t,r,n,a);e.InAUpdatedMDProcessor.updateUniversalDisplayHierarchies(t,r,n,a);n.resumeEventing()};e.InAUpdatedMDProcessor.updateCubeInfo=function(t,r){var n=r.getCubeInfo();if(e.notNull(n)&&e.notNull(t)){var i=t.getStringByKey("CreatedOn");var a=e.XDateTime.createDateTimeSafe(i);n.setCreatedOn(a);n.setCreatedBy(t.getStringByKey("CreatedBy"));var o=t.getStringByKey("LastDataUpdate");var s=e.XDateTime.createDateTimeSafe(o);n.setLastUpdateOn(s);var l=t.getStringByKey("DueDate");var u=e.XDateTime.createDateTimeSafe(l);n.setDueDate(u)}};e.InAUpdatedMDProcessor.updateFilters=function(t,r,n,i){var a=n.getFilterBase();var o=r.getStructureByKey("FixedFilter");e.InAUpdatedMDProcessor.updateFilter(t,e.OlapComponentType.FILTER_FIXED,o,a,i);var s=r.getStructureByKey("DynamicFilter");e.InAUpdatedMDProcessor.updateFilter(t,e.OlapComponentType.FILTER_DYNAMIC,s,a,i)};e.InAUpdatedMDProcessor.updateFilter=function(t,r,n,i,a){if(e.notNull(i)){var o=null;if(r===e.OlapComponentType.FILTER_DYNAMIC&&i.isDynamicFilterInitialized()){o=i.getDynamicFilter()}else if(r===e.OlapComponentType.FILTER_FIXED&&i.isFixedFilterInitialized()){o=i.getFixedFilter()}var s=e.isNull(n)?null:t.importComponent(e.OlapComponentType.FILTER_EXPRESSION,n,null,null,i.getQueryModel());if(e.notNull(o)){var l=e.isNull(s)?null:s.getCartesianProduct();var u=o.getCartesianProduct();if(e.notNull(u)){var p=e.InAUpdatedMDProcessor.getDimensionNamesForPlaceholderFilters(u);var g=p.getIterator();while(g.hasNext()){var c=g.next();var m=e.isNull(l)?null:l.getCartesianListByDimensionName(c);if(e.notNull(m)){u.getCartesianListByDimensionName(c).copyFrom(m,null)}else{u.removeByDimensionName(c)}}}}}};e.InAUpdatedMDProcessor.getDimensionNamesForPlaceholderFilters=function(t){return e.XStream.of(t).filter(function(t){var r=t;return e.notNull(r)&&r.size()===1&&r.getCartesianElement(0).getLow()!==null&&r.getCartesianElement(0).getLow().getValueType()!==null&&r.getCartesianElement(0).getLow().getValueType().isVariable()}.bind(this)).collect(e.XStreamCollector.toSetOfString(function(e){return e.getDimensionName()}.bind(this)))};e.InAUpdatedMDProcessor.updateDimensions=function(t,r,n,i,a){var o=r.getListByKey("Dimensions");if(e.notNull(o)){var s=o.size();for(var l=0;l<s;l++){var u=o.getStructureAt(l);var p=u.getStringByKey("Name");var g=n.getDimensionByName(p);var c=i.getDimensionByName(p);e.InAUpdatedMDProcessor.updateDimension(t,u,g,c,a)}}};e.InAUpdatedMDProcessor.updateDimension=function(t,r,n,i,a){if(e.notNull(n)&&e.notNull(r)){n.setText(r.getStringByKey("Description"));e.InAUpdatedMDProcessor.updateHierarchy(t,r,n);e.InAUpdatedMDProcessor.updateMembers(t,r,n,a);e.InAUpdatedMDProcessor.updateRsDimension(n,i)}};e.InAUpdatedMDProcessor.updateHierarchy=function(t,r,n){var i=r.getStructureByKey("Hierarchy");if(e.notNull(i)){t.importHierarchy(n,r)}};e.InAUpdatedMDProcessor.updateMembers=function(t,r,n,i){var a=r.getListByKey("Members");if(!e.PrUtils.isListEmpty(a)&&n.isStructure()){var o=n.getKeyField().getName();var s=n.getTextField();var l=e.isNull(s)?null:s.getName();if(e.XStringUtils.isNotNullAndNotEmpty(l)){var u=a.size();for(var p=0;p<u;p++){var g=a.getStructureAt(p);var c=g.getStringByKey(o);var m=g.getStringByKey(l);var y=n.getDimensionMember(c);if(e.notNull(y)&&!e.XString.isEqual(y.getText(),m)){y.setText(m);y.getFieldValue(s).setString(m)}}}}};e.InAUpdatedMDProcessor.updateRsDimension=function(t,r){if(e.notNull(r)&&e.notNull(t)){r.setText(t.getText());r.setHierarchyName(t.getHierarchyName());r.setHierarchyActive(t.isHierarchyActive());r.setSelectorHierarchyActive(t.isSelectorHierarchyActive());r.setSelectorHierarchyName(t.getSelectorHierarchyName());r.setLowerLevelNodeAlignment(t.getLowerLevelNodeAlignment())}};e.InAUpdatedMDProcessor.updateVariables=function(t,r,n,i){var a=n.getVariableContainer();var o=r.getListByKey("Variables");if(e.notNull(a)&&e.notNull(o)){var s=o.size();for(var l=0;l<s;l++){var u=e.PrUtils.getStructureElement(o,l);if(e.notNull(u)){var p=u.getStringByKey("Name");var g=a.getVariable(p);e.InAUpdatedMDProcessor.updateVariable(t,a,u,g,i)}}}};e.InAUpdatedMDProcessor.updateVariable=function(t,r,n,i,a){if(e.notNull(i)&&e.notNull(n)){i.setText(n.getStringByKey("Description"));var o=n.getBooleanByKeyExt("InputEnabled",false);i.setInputEnabled(o);if(i.getVariableType().isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)&&n.containsKey("IsInputEnabledAndExit")){i.setIsInputEnabledAndExit(n.getBooleanByKey("IsInputEnabledAndExit"))}e.InAUpdatedMDProcessor.updateVariableValues(t,r,n,i,a)}};e.InAUpdatedMDProcessor.updateVariableValues=function(t,r,n,i,a){var o=t.mode;t.mode=e.QModelFormat.INA_DATA;var s=i.getVariableType();if(s.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){var l=n.getStructureByKey("Values");if(e.notNull(l)){var u=i;t.importDimensionMemberVariable(n,u,r)}}else if(s.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(n,i,r)}t.mode=o};e.InAUpdatedMDProcessor.updateConditions=function(t,r,n,i){var a=n.getConditionManagerBase();var o=r.getListByKey("Conditions");if(e.notNull(a)&&e.notNull(o)){t.importConditionManager(r,a,n)}};e.InAUpdatedMDProcessor.updateSorting=function(t,r,n,i){var a=n.getSortingManagerBase();var o=r.getListByKey("Sort");if(e.notNull(a)&&e.notNull(o)){var s=e.QSortingManager.create(n);t.importComponent(e.OlapComponentType.SORT_MANAGER,r,s,n,n);var l=s.getSortingOperations();var u=l.size();for(var p=0;p<u;p++){var g=l.get(p);var c=g.getComponentType();var m=null;if(c===e.OlapComponentType.FIELD_SORTING){var y=g.getField();m=a.getFieldSorting(y,true)}else if(c===e.OlapComponentType.MEASURE_SORTING){var d=g.getMeasure();m=a.getMeasureSorting(d,true);var A=g.getStructure();if(e.notNull(A)&&e.notNull(m)&&m.getStructure()!==A){m.setStructure(A)}}else if(c===e.OlapComponentType.DATA_CELL_SORTING){var I=g.getElementPath();m=a.getDataCellSorting(I,true)}else if(c===e.OlapComponentType.COMPLEX_SORTING){var S=g.getElementPath();m=a.getComplexSorting(S,true)}else if(c===e.OlapComponentType.DIMENSION_SORTING){var f=g.getDimension();m=a.getDimensionSorting(f,true);var v=g.getSortingType();if(v===e.SortType.FILTER){m.setSortByFilter()}else if(v===e.SortType.MEMBER_KEY){m.setSortByKey();var C=g.getCustomSort();var N=g.getCustomSortPosition();if(e.notNull(C)&&!C.isEmpty()){if(C!==m.getCustomSort()){m.setCustomSort(C)}if(N!==m.getCustomSortPosition()){m.setCustomSortPosition(g.getCustomSortPosition())}}}else if(v===e.SortType.MEMBER_TEXT){m.setSortByText()}else if(v===e.SortType.HIERARCHY){m.setSortByHierarchy()}}if(e.notNull(m)){var E=g.getDirection();if(E!==m.getDirection()){m.setDirection(E)}if(g.isPreserveGroupingEnabled()!==m.isPreserveGroupingEnabled()){m.setPreserveGrouping(g.isPreserveGroupingEnabled())}}}e.XObjectExt.release(s)}};e.InAUpdatedMDProcessor.updateUniversalDisplayHierarchies=function(t,r,n,i){var a=r.getStructureByKey("UniversalDisplayHierarchies");if(e.notNull(a)){var o=a.getListByKey("DefinedHierarchies");if(!e.PrUtils.isListEmpty(o)){var s=n.getUniversalDisplayHierarchiesBase();var l=o.size();for(var u=0;u<l;u++){var p=o.getStructureAt(u);var g=p.getStringByKey("Name");var c=e.isNull(s)?null:s.getByName(g);if(e.notNull(c)){var m=p.getBooleanByKeyExt("Active",c.isActive());c.setActive(m)}}}}};e.InAUpdatedMDProcessor.prototype.m_inaUpdatedMetadata=null;e.InAUpdatedMDProcessor.prototype.m_rsQueryModelDef=null;e.InAUpdatedMDProcessor.prototype.setupProcessor=function(t,r,n){this.setupContext(t);this.m_inaUpdatedMetadata=e.PrFactory.createStructureDeepCopy(n);this.m_rsQueryModelDef=r};e.InAUpdatedMDProcessor.prototype.releaseObject=function(){this.m_inaUpdatedMetadata=e.XObjectExt.release(this.m_inaUpdatedMetadata);this.m_rsQueryModelDef=null};e.InAUpdatedMDProcessor.prototype.importMetadataAndUpdateState=function(){var t=this.getContext();if(e.notNull(t)){var r=t.getQueryModel();if(e.notNull(r)){r.setIsMetadataUpdatedByAutoSubmit(false);if(t.isProcessingAutoSubmit()){if(this.m_rsQueryModelDef.isExecuteAutoVariableSubmit()){this.updateModelMetadata(r);this.updateState()}else{this.rollbackState()}}}}};e.InAUpdatedMDProcessor.prototype.updateState=function(){var t=this.getContext();e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(t,t.getVariableProcessorState()===e.VariableProcessorState.PROCESSING_AUTO_SUBMIT,false);t.setVariableProcessorState(e.VariableProcessorState.SUBMITTED);t.prepareAfterVariables()};e.InAUpdatedMDProcessor.prototype.rollbackState=function(){var t=this.getContext();if(t.isProcessingAutoSubmit()){var r=t.getPreviousVariableProcessorState();if(r===e.VariableProcessorState.CHANGEABLE_STARTUP){t.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_STARTUP);t.setPreviousVariableProcessorState(null)}else if(r===e.VariableProcessorState.CHANGEABLE_REINIT){t.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_REINIT);t.setPreviousVariableProcessorState(e.VariableProcessorState.PROCESSING_REINIT)}}};e.InAUpdatedMDProcessor.prototype.updateModelMetadata=function(t){if(e.notNull(this.m_inaUpdatedMetadata)){var r=t.getApplication();var n=t.getModelCapabilities();var i=e.QInAImportFactory.createForMetadata(r,n);e.InAUpdatedMDProcessor.merge(i,this.m_inaUpdatedMetadata,t,this.m_rsQueryModelDef);t.setIsMetadataUpdatedByAutoSubmit(true)}};e.InAValueHelpProvider=function(){};e.InAValueHelpProvider.prototype=new e.DfQContext;e.InAValueHelpProvider.prototype._ff_c="InAValueHelpProvider";e.InAValueHelpProvider.prototype.m_valuehelpCallbacks=null;e.InAValueHelpProvider.prototype.m_valuehelpResults=null;e.InAValueHelpProvider.prototype.m_valuehelpResultNodes=null;e.InAValueHelpProvider.prototype.m_valuehelpIdentifiers=null;e.InAValueHelpProvider.prototype.m_valuehelpProcessedKeys=null;e.InAValueHelpProvider.prototype.m_valuehelpIdentifier=0;e.InAValueHelpProvider.prototype.m_exportValueHelp=null;e.InAValueHelpProvider.prototype.m_isBwHierarchyNameVariable=false;e.InAValueHelpProvider.prototype.setupExt=function(e){this.setContext(e);this.m_valuehelpIdentifier=0};e.InAValueHelpProvider.prototype.releaseObject=function(){this.m_valuehelpCallbacks=e.XObjectExt.release(this.m_valuehelpCallbacks);this.m_valuehelpResults=e.XObjectExt.release(this.m_valuehelpResults);this.m_valuehelpResultNodes=e.XObjectExt.release(this.m_valuehelpResultNodes);this.m_valuehelpIdentifiers=e.XObjectExt.release(this.m_valuehelpIdentifiers);this.m_valuehelpProcessedKeys=e.XObjectExt.release(this.m_valuehelpProcessedKeys);this.m_exportValueHelp=e.XObjectExt.release(this.m_exportValueHelp)};e.InAValueHelpProvider.prototype.lazyLoadValueHelpObjects=function(){if(e.isNull(this.m_exportValueHelp)){this.m_exportValueHelp=e.QInAExportFactory.createForValueHelp(this.getApplication(),this.getModelCapabilities());this.m_valuehelpCallbacks=e.XHashMapByString.create();this.m_valuehelpResults=e.XHashMapByString.create();this.m_valuehelpResultNodes=e.XHashMapByString.create();this.m_valuehelpIdentifiers=e.XHashMapByString.create();this.m_valuehelpProcessedKeys=e.XHashSetOfString.create()}var t=this.m_valuehelpProcessedKeys.getIterator();while(t.hasNext()){var r=t.next();this.m_valuehelpResults.remove(r);this.m_valuehelpResultNodes.remove(r);this.m_valuehelpCallbacks.remove(r);this.m_valuehelpIdentifiers.remove(r)}this.m_valuehelpProcessedKeys.clear()};e.InAValueHelpProvider.prototype.getExport=function(){return this.m_exportValueHelp};e.InAValueHelpProvider.prototype.getValueHelpResultSetNode=function(e){return this.m_valuehelpResultNodes.getByKey(e)};e.InAValueHelpProvider.prototype.getValueHelpResult=function(e){return this.m_valuehelpResults.getByKey(e)};e.InAValueHelpProvider.prototype.getNextValueHelpIdentifier=function(){this.m_valuehelpIdentifier++;return e.XInteger.convertToString(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.getValueHelpIdentifier=function(){return e.XIntegerValue.create(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.getValueHelpIdentifierString=function(){return e.XInteger.convertToString(this.m_valuehelpIdentifier)};e.InAValueHelpProvider.prototype.putValueHelpCallback=function(e,t){this.m_valuehelpCallbacks.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpIdentifier=function(e,t){this.m_valuehelpIdentifiers.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpResult=function(e,t){this.m_valuehelpResults.put(e,t)};e.InAValueHelpProvider.prototype.putValueHelpResultNode=function(e,t){this.m_valuehelpResultNodes.put(e,t)};e.InAValueHelpProvider.prototype.transform=function(t){if(t.hasErrors()){return e.ExtResult.create(null,t)}var r=t.getData();if(e.isNull(r)||r.hasErrors()){return e.ExtResult.create(null,t)}var n=r.getCursorResultSet();if(n.hasErrors()||n.getState()===e.ResultSetState.ERROR){return e.ExtResult.create(null,t)}var i=e.ProfileNode.create("ValueHelp",0);i.addProfileStep("Transforming ResultSet to List");var a=this.m_isBwHierarchyNameVariable?this.getOlapEnv().getCustomHierarchyRepository().getCustomHierarchyDefinitions().getValuesAsReadOnlyList():null;var o=e.XListOfString.create();if(e.notNull(a)){for(var s=0;s<a.size();s++){var l=a.get(s).getName();e.XCollectionUtils.addIfNotPresent(o,l)}}var u=r.getQueryManager();var p=u.getConnection();var g=e.notNull(p)?p.getCustomObject(e.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA):null;if(e.notNull(g)){var c=g.getHierarchyDefinitionNames();for(var m=0;m<c.size();m++){var y=c.get(m);e.XCollectionUtils.addIfNotPresent(o,y)}}var d=e.XList.create();var A=e.XList.create();var I=n.getCursorRowsAxis();var S=u.getSession().hasFeature(e.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);while(I.hasNextTuple()){I.nextTuple();while(I.hasNextTupleElement()){var f=I.nextTupleElement();var v=f.getDimensionMemberName();var C=f.getDimensionAtCurrentPositionFromQueryModel();var N=C.getDimensionMemberWithFormat(v,null);N.setName(v);N.setDimensionMemberNameValueException(f.getDimensionMemberNameValueException());while(I.hasNextFieldValue()){var E=I.nextFieldValue();var M=E.getField();var h=E.getValue();var D=null;if(e.notNull(h)){D=N.createAndAddFieldWithValue(M,h)}else if(M.getValueType().isDateBased()){D=N.createAndAddField(M)}if(e.notNull(D)){D.setValueException(E.getValueException());D.setFormattedValue(E.getFormattedValue())}if(e.notNull(h)){var T=h.toString();if(M.isEqualTo(C.getSelectorTextField())){N.setText(T)}else if(M.isEqualTo(C.getSelectorKeyField())){N.setName(T)}}}var Q=N.getName();if(this.m_isBwHierarchyNameVariable){if(!o.contains(Q)){d.add(e.XIntegerValue.create(f.getParentNodeIndex()));A.add(e.QValueHelpNode2.createValueHelpNode(Q,N,f.getDrillState(),f.getDisplayLevel(),f.getChildCount(),f.getAbsoluteLevel(),S))}}else{d.add(e.XIntegerValue.create(f.getParentNodeIndex()));A.add(e.QValueHelpNode2.createValueHelpNode(Q,N,f.getDrillState(),f.getDisplayLevel(),f.getChildCount(),f.getAbsoluteLevel(),S))}}}i.addProfileStep("Assign parent nodes");var R=A.size();for(var _=0;_<R;_++){var F=d.get(_).getInteger();if(F>=0){var x=A.get(F);x.addChildNode(A.get(_))}}e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(d);i.endProfileStep();t.getRootProfileNode().addProfileNode(i);return e.ExtResult.create(A,t)};e.InAValueHelpProvider.prototype.onQueryExecuted=function(t,r,n){var i=n.toString();var a=this.m_valuehelpCallbacks.getByKey(i);var o=this.m_valuehelpIdentifiers.getByKey(i);if(this.m_valuehelpResultNodes.containsKey(i)){var s=this.m_valuehelpResultNodes.getByKey(i);if(e.isNull(s)){s=this.transform(t);this.m_valuehelpResultNodes.put(i,s)}if(e.notNull(a)){a.onValuehelpExecuted(s,r,o)}}else{this.m_valuehelpResults.put(i,t);if(e.notNull(a)){a.onValuehelpExecuted(t,r,o)}}this.m_valuehelpProcessedKeys.add(i)};e.InAValueHelpProvider.prototype.hasValueHelpResultNodeForKey=function(e){return this.m_valuehelpResultNodes.containsKey(e)};e.InAValueHelpProvider.prototype.checkVariableType=function(t){this.m_isBwHierarchyNameVariable=this.getQueryManager()!==null&&this.getQueryManager().getSystemType().isTypeOf(e.SystemType.ABAP)&&t.getVariableType()===e.VariableType.HIERARCHY_NAME_VARIABLE};e.InAValueHelpProvider.prototype.requiresMeasureValueHelp=function(t){return e.notNull(t)&&t.isStructure()&&!t.isHierarchyActive()};e.InAValueHelpProvider.prototype.createResultSetProvider=function(t,r,n){e.XBooleanUtils.checkTrue(this.getQueryManagerBase().getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");var i=n.getRowsAxisDef().getRsDimensions().get(0);if(this.requiresMeasureValueHelp(i)){var a=e.MeasureValueHelpRsProvider.create(this.getDimensionAccessor().getDimensionByName(i.getName()));var o=this.getValueHelpIdentifierString();if(this.hasValueHelpResultNodeForKey(o)){this.putValueHelpResultNode(o,a.getMeasureHelpNodes())}return a}return e.InARsEnProvider.create(this.getQueryManager(),t,r,e.QContextType.SELECTOR)};e.InAFusionDataSourceAction=function(){};e.InAFusionDataSourceAction.prototype=new e.InAFusionLayer;e.InAFusionDataSourceAction.prototype._ff_c="InAFusionDataSourceAction";e.InAFusionDataSourceAction.createAndRun=function(t,r,n,i,a,o,s){var l=new e.InAFusionDataSourceAction;l.setConfig(a);l.setDataSource(o);if(e.notNull(s)){l.setContent(s)}l.setupActionAndRun(t,r,n,i);return l};e.InAFusionDataSourceAction.prototype.getComponentType=function(){return e.InAFusionLayer.DATASOURCE_ACTION};e.InAFusionDataSourceAction.prototype.processSynchronization=function(t){var r=this.getDataSource();var n=r.getType();if(n===e.MetaObjectType.URL){this.setNextActionType(e.InAFusionLayer.URL_ACTION)}else if(n===e.MetaObjectType.SFX){this.setNextActionType(e.InAFusionLayer.MODEL_ACTION)}else{if(e.isNull(n)){var i=this.getConfig();var a=i.getMode();if(a===e.QueryManagerMode.BLENDING){var o=e.QDataSource.create();o.copyFrom(r,null);o.setType(e.MetaObjectType.BLENDING);var s=o.getBlendingDefinition();if(e.isNull(s)){s=i.getBlendingDefinition();o.setBlendingDefinition(s)}if(e.notNull(s)&&e.XStringUtils.isNullOrEmpty(o.getObjectName())){var l=e.XStringBuffer.create();for(var u=0;u<s.getSources().size();u++){l.append(s.getSources().get(u).getQueryAliasName())}var p=l.toString();if(l.length()>=256){p=e.XSha1.createSHA1(p)}o.setObjectName(p)}r=o}}this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}this.setNextDataSource(r);return false};e.InAFusionLayerRpc=function(){};e.InAFusionLayerRpc.prototype=new e.InAFusionLayer;e.InAFusionLayerRpc.prototype._ff_c="InAFusionLayerRpc";e.InAFusionLayerRpc.prototype.processSynchronization=function(t){var r=this.getSystemDescription();if(e.notNull(r)){this.processServerMetadataFetch(r)}else{this.processMainContentFetch()}return true};e.InAFusionLayerRpc.prototype.processServerMetadataFetch=function(e){var t=this.getActionContext().getConnectionExt(e.getSystemName(),this.hasPrivateConnection(),this.getConnectionName());this.setConnection(t);t.getSystemConnect().getServerMetadataExt(this.getActiveSyncType(),this,null)};e.InAFusionLayerRpc.prototype.onServerMetadataLoaded=function(e,t,r){this.addAllMessages(e);if(this.isValid()){this.setServerMetadata(t);this.processMainContentFetch()}else{this.endSync()}};e.InAFusionLayerRpc.prototype.processMainContentFetch=function(){this.prepare();var e=this.createSpecificFunction();var t=e.getRpcRequest();var r=this.constructPayload();t.setRequestStructure(r);e.processFunctionExecution(this.getActiveSyncType(),this,null)};e.InAFusionLayerRpc.prototype.prepare=function(){};e.InAFusionLayerRpc.prototype.createFunction=function(t){var r=this.getConnection();if(e.isNull(r)){var n=this.getApplication().getConnectionPool();r=n.getOpenConnection(this.getSystemName())}var i=r.newRpcFunction(t);var a=i.getRpcRequest();a.setMethod(e.HttpRequestMethod.HTTP_POST);return i};e.InAFusionRepoAction=function(){};e.InAFusionRepoAction.prototype=new e.InAFusionLayer;e.InAFusionRepoAction.prototype._ff_c="InAFusionRepoAction";e.InAFusionRepoAction.createAndRun=function(t,r,n,i,a,o,s){var l=new e.InAFusionRepoAction;l.setConfig(a);l.setDataSource(o);if(e.notNull(s)){l.setContent(s)}l.setupActionAndRun(t,r,n,i);return l};e.InAFusionRepoAction.prototype.getComponentType=function(){return e.InAFusionLayer.REPO_ACTION};e.InAFusionRepoAction.prototype.processSynchronization=function(t){var r=this.getContent();if(e.notNull(r)){var n=r.getContentType();if(n.isTypeOf(e.QModelFormat.INA_CLONE)){var i=r.getJsonContent();var a=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA_CORE,i.getStructureByKey("Metadata"));var o=e.XContent.createJsonObjectContent(e.QModelFormat.INA_REPOSITORY,i.getStructureByKey("Runtime"));this.setContent(o);this.setNextDocument(a);this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}else if(n.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var s=r.getJsonContent().asStructure();var l=s.getStringByKey("CType");var u=e.QInAImportFactory.createForRepository(this.getApplication(),null);if(e.XString.isEqual("QueryManager",l)){var p=s.getStructureByKey("QueryServiceConfig");var g=u.importComponent(e.OlapComponentType.QUERY_SERVICE_CONFIG,p,null,null,null);g.getSystemName()}else{var c=u.importDataSource(s);this.addAllMessages(u);this.setNextDataSource(c);this.setNextActionType(e.InAFusionLayer.METADATA_ACTION)}}}return false};e.InAFusionUrlAction=function(){};e.InAFusionUrlAction.prototype=new e.InAFusionLayer;e.InAFusionUrlAction.prototype._ff_c="InAFusionUrlAction";e.InAFusionUrlAction.createAndRun=function(t,r,n,i,a,o){var s=new e.InAFusionUrlAction;s.setConfig(a);s.setDataSource(o);s.setupActionAndRun(t,r,n,i);return s};e.InAFusionUrlAction.prototype.getComponentType=function(){return e.InAFusionLayer.URL_ACTION};e.InAFusionUrlAction.prototype.processSynchronization=function(t){var r=this.getDataSource().getObjectName();var n=this.getSession();var i=e.XUri.createFromFilePath(n,r,e.PathFormat.AUTO_DETECT,e.VarResolveMode.PERCENT,null);var a=e.HttpClientFactory.newInstanceByConnection(n,i);a.getRequest().setFromUri(i);a.processHttpRequest(this.getActiveSyncType(),this,e.XIntegerValue.create(0));return true};e.InAFusionUrlAction.prototype.onHttpResponse=function(t,r,n){this.addAllMessages(t);if(this.isValid()){var i=r.getContentType();if(i===e.QModelFormat.SFX||i===e.QModelFormat.UQM){this.setContentExt(r,i)}else{this.setContent(r)}var a=this.getContent();if(a.getContentType()===e.QModelFormat.INA_REPOSITORY){this.setNextActionType(e.InAFusionLayer.REPO_ACTION);this.setNextDocument(a)}}this.endSync()};e.InAPlanningValueHelpProvider=function(){};e.InAPlanningValueHelpProvider.prototype=new e.InAValueHelpProvider;e.InAPlanningValueHelpProvider.prototype._ff_c="InAPlanningValueHelpProvider";e.InAPlanningValueHelpProvider.create=function(t){var r=new e.InAPlanningValueHelpProvider;r.setupExt(t);return r};e.InAPlanningValueHelpProvider.prototype.m_queryManager=null;e.InAPlanningValueHelpProvider.prototype._valHelpError=function(t,r,n){var i=e.ExtResult.createWithErrorMessage(t);if(e.notNull(r)){r.onValuehelpExecuted(i,null,n)}return i};e.InAPlanningValueHelpProvider.prototype._valHelpResultSetError=function(t,r,n){var i=e.ExtResult.createWithErrorMessage(t);if(e.notNull(r)){r.onValuehelpExecuted(i,null,n)}return i};e.InAPlanningValueHelpProvider.prototype.serializeForPersistedInA=function(e){return null};e.InAPlanningValueHelpProvider.prototype.processValueHelp=function(e,t,r,n){return this._valHelpError("Valuehelp is not supported in this context",r,n)};e.InAPlanningValueHelpProvider.prototype.processValueHelpResultSet=function(e,t,r,n){return this._valHelpResultSetError("Valuehelp is not supported in this context",r,n)};e.InAPlanningValueHelpProvider.prototype.processVarHelp=function(t,r,n,i,a){this.lazyLoadValueHelpObjects();this.applyContext(t);var o=this.getExport().exportPlanningVariableHelpRequest(this.getPlanningCommand(),t,r);this.checkVariableType(r);var s=this.getNextValueHelpIdentifier();this.putValueHelpCallback(s,i);this.putValueHelpIdentifier(s,a);this.putValueHelpResult(s,null);this.putValueHelpResultNode(s,null);var l=null;var u=null;var p=false;var g=e.RsDefQueryModel.create(null,null,l,u,t,p);var c=e.ResultSetContainer.createWithRequest(this.getQueryManager(),this,o,g);c.setOffsetRows(t.getSelectorPagingStart());c.setMaxRows(t.getSelectorPagingEnd()-t.getSelectorPagingStart());if(e.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(t)){var m=e.ValueHelpProcessingSequence.createSequence(this.getQueryManager(),t,c,this.getExport(),true,false);m.processSyncAction(n,this,this.getValueHelpIdentifier())}else{c.processExecution(n,this,this.getValueHelpIdentifier())}return!this.isReleased()?this.getValueHelpResultSetNode(s):null};e.InAPlanningValueHelpProvider.prototype.getPlanningCommand=function(){return this.getContext()};e.InAPlanningValueHelpProvider.prototype.getQueryManager=function(){if(e.isNull(this.m_queryManager)){var t=this.getPlanningCommand();var r=e.QueryServiceConfig.create(this.getApplication());r.setSystemName(t.getSystemName());var n=e.PrFactory.createStructure();var i=n.putNewStructure("Command");var a=i.putNewStructure("DataSource");var o=t.getDataArea().getDataArea();if(e.isNull(o)){o="DEFAULT"}a.putString("DataArea",o);var s=t.getPlanningOperationMetadata();var l=s.getPlanningOperationIdentifier();a.putString("ObjectName",l.getPlanningOperationName());a.putString("Type",l.getPlanningOperationType().getCamelCaseName());a.putString("InstanceId",s.getInstanceId());i.put("Dimensions",s.getDimensions());i.put("Variables",s.getVariables());r.setDefinitionByStructure(e.QModelFormat.INA_METADATA,n);r.setMode(e.QueryManagerMode.RAW_QUERY);var u=r.processQueryManagerCreation(e.SyncType.BLOCKING,null,null);e.MessageUtil.checkNoError(u);var p=u.getData().getQueryModel();p.deserializeFromElementExt(e.QModelFormat.INA_METADATA,i);u.getData().setValueHelpProvider(this);this.m_queryManager=u.getData()}return this.m_queryManager};e.InAPlanningValueHelpProvider.prototype.applyContext=function(t){if(t.getQueryModel()!==null){var r=this.getPlanningCommand().getDimensionAccessor().getDimensionByName(t.getName());var n=t.getSelectorHierarchyNode();if(e.notNull(n)){r.setSelectorHierarchyNode(n)}var i=t.getQueryModel().getFilter().getValuehelpFilter();var a=this.getPlanningCommand().getSelector().getValuehelpFilter();a.copyFrom(i,null)}};e.InAQueryValueHelpProvider=function(){};e.InAQueryValueHelpProvider.prototype=new e.InAValueHelpProvider;e.InAQueryValueHelpProvider.prototype._ff_c="InAQueryValueHelpProvider";e.InAQueryValueHelpProvider.create=function(t){var r=new e.InAQueryValueHelpProvider;r.setupExt(t);return r};e.InAQueryValueHelpProvider.prototype.serializeForPersistedInA=function(e){var t=this.getQueryManager();var r=this.getValueHelpRequest(e);this.setMiscRequest(r,t);return r};e.InAQueryValueHelpProvider.prototype.processValueHelp=function(t,r,n,i){var a=null;if(t.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)){a=t}if(e.notNull(a)){a.generateTransientObjects(this,this.getQueryManager())}this.lazyLoadValueHelpObjects();var o=this.getQueryManagerBase().variablesRequireImplicitSubmitForValueHelp(t);var s=this.internalProcessValueHelp(t,r,n,i,this.getValueHelpRequest(t),true,false,o);if(e.notNull(a)){a.destroyTransientObjects(this)}return!this.isReleased()?this.getValueHelpResultSetNode(s):null};e.InAQueryValueHelpProvider.prototype.processValueHelpResultSet=function(e,t,r,n){this.lazyLoadValueHelpObjects();var i=this.getQueryManagerBase().variablesRequireImplicitSubmitForValueHelp(e);var a=this.internalProcessValueHelp(e,t,r,n,this.getValueHelpRequest(e),false,false,i);return!this.isReleased()?this.getValueHelpResult(a):null};e.InAQueryValueHelpProvider.prototype.processVarHelp=function(e,t,r,n,i){this.lazyLoadValueHelpObjects();var a=this.getExport().exportVariableHelpRequest(this.getQueryModel(),e,t);this.checkVariableType(t);var o=this.internalProcessValueHelp(e,r,n,i,a,true,true,false);return!this.isReleased()?this.getValueHelpResultSetNode(o):null};e.InAQueryValueHelpProvider.prototype.internalProcessValueHelp=function(t,r,n,i,a,o,s,l){var u=this.getQueryManager();if(e.notNull(a)){this.setMiscRequest(a,u)}var p=this.getNextValueHelpIdentifier();this.putValueHelpCallback(p,n);this.putValueHelpIdentifier(p,i);this.putValueHelpResult(p,null);if(o){this.putValueHelpResultNode(p,null)}var g=null;var c=null;var m=u.getInitSettings();var y=m.isEnableAutoVariableSubmit();var d=u.isExecuteAutoVariableSubmit()&&!s;var A=this.requiresMeasureValueHelp(t)&&e.isNull(a);if(A){m.setIsEnableAutoVariableSubmit(false)}var I=this.getQueryModel();if(e.notNull(I)){g=I.getRowsAxis();c=I.getColumnsAxis()}var S=e.RsDefQueryModel.create(u,null,g,c,t,d);var f=e.ResultSetContainer.createWithRequest(u,this,a,S);f.setOffsetRows(t.getSelectorPagingStart());f.setMaxRows(t.getSelectorPagingEnd()-t.getSelectorPagingStart());var v=e.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(t);if(l||v){var C=e.ValueHelpProcessingSequence.createSequence(u,t,f,this.getExport(),v,l);C.processSyncAction(r,this,this.getValueHelpIdentifier())}else{f.processExecution(r,this,this.getValueHelpIdentifier())}if(A){m.setIsEnableAutoVariableSubmit(y)}return p};e.InAQueryValueHelpProvider.prototype.setMiscRequest=function(t,r){e.QInAOptions.setRequestTimeZone(t,r);var n=t.getStructureByKey("Analytics");if(e.isNull(n)){n=t.getStructureByKey("Planning")}e.QInAOptions.setLanguage(n,r);e.QInAOptions.fillOptions(t,r.getCapabilitiesBase(),r.getSession(),r.getQueryServiceConfig());r.getInaCapabilities().exportActiveCapabilities(n);var i=n.getStructureByKey("Definition");e.QInAOptions.exportOptimizerHints(i,r.getQueryModel());e.QInAOptions.exportReturnedDataSelections(i.getStructureByKey("ResultSetFeatureRequest"),r)};e.InAQueryValueHelpProvider.prototype.getValueHelpRequest=function(e){var t=false;return!this.requiresMeasureValueHelp(e)?this.getExport().exportMemberHelpRequest(this.getQueryModel(),e,t):null};e.InAFusionMetadataAction=function(){};e.InAFusionMetadataAction.prototype=new e.InAFusionLayerRpc;e.InAFusionMetadataAction.prototype._ff_c="InAFusionMetadataAction";e.InAFusionMetadataAction.createAndRun=function(t,r,n,i,a,o,s){var l=new e.InAFusionMetadataAction;l.setConfig(a);if(e.notNull(o)){var u=o.clone();u.setInstanceId(a.getInstanceId());l.setDataSource(u)}if(e.notNull(s)){l.setContent(s)}l.setupActionAndRun(t,r,n,i);return l};e.InAFusionMetadataAction.prototype.m_inaCapabilities=null;e.InAFusionMetadataAction.prototype.m_queryManagerCapabilities=null;e.InAFusionMetadataAction.prototype.m_exporter=null;e.InAFusionMetadataAction.prototype.m_importer=null;e.InAFusionMetadataAction.prototype.m_cacheKey=null;e.InAFusionMetadataAction.prototype.m_masterCacheAction=null;e.InAFusionMetadataAction.prototype.m_isCacheCall=false;e.InAFusionMetadataAction.prototype.getComponentType=function(){return e.InAFusionLayer.METADATA_ACTION};e.InAFusionMetadataAction.prototype.processMainContentFetch=function(){this.prepareInACapabilities();if(this.isValid()){var t=this.prepareQueryManagerCapabilities();var r=e.QInAExportFactory.createForData(this.getApplication(),t);var n=e.QInAImportFactory.createForData(this.getApplication(),t);this.setExporter(r);this.setImporter(n);var i=this.getContent();if(e.notNull(i)){this.generateNextDataSource(i);this.endSync()}else{this.m_masterCacheAction=this.getMasterCacheAction();if(e.notNull(this.m_masterCacheAction)&&this.m_masterCacheAction.getSyncState()!==e.SyncState.IN_SYNC_WITH_ERROR){var a=this.m_masterCacheAction.getSyncState();if(a===e.SyncState.PROCESSING){this.m_masterCacheAction.attachCubeMetadataListener(this,null)}else if(a===e.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;this.m_masterCacheAction.startProcessing(this)}else{this.onCacheFilled(this.m_masterCacheAction,this.m_masterCacheAction.getData(),null)}}else{this.m_isCacheCall=true}if(this.m_isCacheCall){e.InAFusionLayerRpc.prototype.processMainContentFetch.call(this)}}}};e.InAFusionMetadataAction.prototype.prepare=function(){this.prepareQueryManagerCapabilities();var t=this.getDataSource();if(e.notNull(t)&&t.getType()===e.MetaObjectType.CATALOG_VIEW_2&&this.m_queryManagerCapabilities.supportsCatalogServiceV2()===false){t.setType(e.MetaObjectType.CATALOG_VIEW)}};e.InAFusionMetadataAction.prototype.prepareInACapabilities=function(){var t=this.getConnection();if(e.isNull(t)){this.addError(0,"No connection given");this.endSync()}else{var r=t.getSystemConnect().getServerMetadata();var n=this.getConfig().getProviderType();var i=this.getSession();this.m_inaCapabilities=e.InACapabilitiesProvider.create(i,r,n,null);var a=this.m_inaCapabilities.getServerBetaCapabilities();var o=this.m_inaCapabilities.getServerMainCapabilities();var s=i.getFeatureToggles();if(e.notNull(s)){var l=this.m_inaCapabilities.getActiveCapabilities();var u=s.getKeysAsIteratorOfString();while(u.hasNext()){var p=u.next();if(a.containsKey(p)&&e.InACapabilitiesProvider.isDevCapabilityValid(p,i)){l.addCapability(p)}if(o.containsKey(p)){l.addCapability(p)}}}}return this.m_inaCapabilities};e.InAFusionMetadataAction.prototype.prepareQueryManagerCapabilities=function(){if(e.isNull(this.m_queryManagerCapabilities)){this.m_queryManagerCapabilities=this.getInACapabilities().getQueryCapabilities()}return this.m_queryManagerCapabilities};e.InAFusionMetadataAction.prototype.createSpecificFunction=function(){var t=this.getSystemDescription();e.XObjectExt.assertNotNullExt(t,"System description is null");var r=this.getInAMainCapabilities().getByKey(e.InACapabilities.C032_FAST_PATH);var n;if(e.notNull(r)&&r.getValue()!==null){n=r.getValue()}else{n=t.getSystemType().getInAPath()}return this.createFunction(n)};e.InAFusionMetadataAction.prototype.constructPayload=function(){var t=e.PrFactory.createStructure();var r=this.getConfig();var n=t.putNewStructure("Metadata");var i=r.getProviderType();if(i===e.ProviderType.ANALYTICS||i===e.ProviderType.CATALOG){n.putString("Context","Analytics")}else if(i===e.ProviderType.PLANNING||i===e.ProviderType.PLANNING_VALUE_HELP){n.putString("Context","Planning")}else if(i===e.ProviderType.LIST_REPORTING){n.putString("Context","ListReporting")}n.putString("Language",r.getSystemDescription().getLanguage());var a=this.getDataSource();var o=this.m_exporter.exportDataSource(a,false);e.QInAExportUtil.setNonEmptyString(o,"ValidationHash",a.getValidationHash());n.put("DataSource",o);this.m_inaCapabilities.exportActiveCapabilities(n);e.QInAOptions.fillOptions(t,this.m_queryManagerCapabilities,this.getSession(),this.getConfig());var s=a.getDataArea();if(e.XStringUtils.isNotNullAndNotEmpty(s)){var l=this.getDataAreas(s);t.putIfNotNull("DataAreas",l)}var u=e.PrFactory.createList();u.addString("Cube");if(r.isRequestingMinimizedAttributes()){u.addString("MinimizedAttributes")}n.putIfNotNull("Expand",u);return t};e.InAFusionMetadataAction.prototype.getDataAreas=function(t){var r=null;var n=this.getSystemType();if(n.isTypeOf(e.SystemType.BW)===true){var i=e.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),t);if(e.notNull(i)){if(i.isSubmitted()===false){r=e.PrFactory.createList();r.add(i.serializeToJson())}}}return r};e.InAFusionMetadataAction.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);var i=null;if(this.isValid()){var a=r.getRootElement();i=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,a);this.setContent(i);this.storeMetadataInCache(a)}if(e.notNull(this.m_masterCacheAction)){if(this.m_masterCacheAction.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){this.m_masterCacheAction.endProcessing(t,i)}}this.generateNextDataSource(i);this.endSync()};e.InAFusionMetadataAction.prototype.generateNextDataSource=function(t){var r=this.getDataSource();if(e.isNull(r)&&e.notNull(t)){var n=t.getJsonContent();var i=n.getStructureByKey("Cube");if(e.isNull(i)){i=n}var a=this.m_importer.importDataSource(i);this.addAllMessages(this.m_importer);if(e.notNull(a)){a.setInstanceId(this.getConfig().getInstanceId());a.setSystemName(this.getSystemName());r=a}}this.setNextDataSource(r)};e.InAFusionMetadataAction.prototype.onCacheFilled=function(e,t,r){this.addAllMessages(e);this.setContent(t);this.setNextDataSource(this.getDataSource());this.endSync()};e.InAFusionMetadataAction.prototype.getInACapabilities=function(){return this.m_inaCapabilities};e.InAFusionMetadataAction.prototype.getInAMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities()};e.InAFusionMetadataAction.prototype.getExporter=function(){return this.m_exporter};e.InAFusionMetadataAction.prototype.setExporter=function(e){this.m_exporter=e};e.InAFusionMetadataAction.prototype.getImporter=function(){return this.m_importer};e.InAFusionMetadataAction.prototype.setImporter=function(e){this.m_importer=e};e.InAFusionMetadataAction.prototype.getMasterCacheAction=function(){var t=null;if(this.getConfig().isCachingActive()){var r=this.getCacheKey();if(e.notNull(r)){var n=this.getOlapEnv();if(e.notNull(n)){var i=n.getCubeContainer(r);if(i.getDataSource()===null){i.setDataSource(this.getDataSource())}t=i.getMetadataAction(r)}}}return t};e.InAFusionMetadataAction.prototype.getCacheKey=function(){if(e.isNull(this.m_cacheKey)){var t=this.getConfig();var r=this.getDataSource();if(e.notNull(r)){var n=r.getCacheKeyName();var i=t.getProviderType();var a=this.getSystemDescription();var o=a.getSystemName();var s=null;var l=null;this.m_cacheKey=e.QFactory.createCacheKey(null,o,n,i,s,l,null,null)}}return this.m_cacheKey};e.InAFusionMetadataAction.prototype.storeMetadataInCache=function(t){if(e.notNull(t)){if(this.m_isCacheCall===true){if(e.notNull(this.m_cacheKey)){var r=this.getOlapEnv();var n=r.getCubeContainer(this.m_cacheKey);var i=t.getStructureByKey("Cube");if(r.isCachingEnabled()){n.setQueryMetadata(this.m_cacheKey,i)}}}}};e.InAFusionModelAction=function(){};e.InAFusionModelAction.prototype=new e.InAFusionLayerRpc;e.InAFusionModelAction.prototype._ff_c="InAFusionModelAction";e.InAFusionModelAction.createAndRun=function(t,r,n,i,a,o){var s=new e.InAFusionModelAction;s.setConfig(a);s.setDataSource(o);s.setupActionAndRun(t,r,n,i);return s};e.InAFusionModelAction.prototype.getComponentType=function(){return e.InAFusionLayer.MODEL_ACTION};e.InAFusionModelAction.prototype.createSpecificFunction=function(){return this.createFunction("/sap/fpa/services/rest/epm/contentlib")};e.InAFusionModelAction.prototype.constructPayload=function(){var t=e.PrFactory.createStructure();var r=this.getDataSource();var n=r.getObjectName();t.putString(e.ContentlibConstants.ACTION,e.ContentlibConstants.V_ACTION_GET_RES);var i=t.putNewStructure(e.ContentlibConstants.DATA);i.putNewList(e.ContentlibConstants.RESOURCE_IDS).addString(n);i.putString(e.ContentlibConstants.RESOURCE_TYPE,e.ContentlibConstants.V_RESOURCE_TYPE_CUBE);var a=i.putNewStructure(e.ContentlibConstants.METADATA);a.putBoolean(e.ContentlibConstants.NAME,true);a.putBoolean(e.ContentlibConstants.DESCRIPTION,true);a.putBoolean(e.ContentlibConstants.ACCESS,true);a.putBoolean(e.ContentlibConstants.USER_AUTH_ONLY,true);a.putBoolean(e.ContentlibConstants.RESOURCE_TYPE,true);a.putBoolean(e.ContentlibConstants.PACKAGE_ID,true);a.putBoolean(e.ContentlibConstants.CREATED_BY,true);a.putBoolean(e.ContentlibConstants.MODIFIED_BY,true);a.putBoolean(e.ContentlibConstants.UPDATE_COUNTER,true);a.putBoolean(e.ContentlibConstants.CREATED_TIME,true);a.putBoolean(e.ContentlibConstants.MODIFIED_TIME,true);a.putBoolean(e.ContentlibConstants.EXCEPTION_NOT_THROWN_FOR_NO_ACCESS,true);a.putBoolean(e.ContentlibConstants.TRANSLATION_ENABLED,true);var o=a.putNewStructure(e.ContentlibConstants.ANCHESTOR_PATH);o.putBoolean(e.ContentlibConstants.NAME,true);o.putBoolean(e.ContentlibConstants.ACCESS,true);var s=a.putNewStructure(e.ContentlibConstants.EPM_OBJECT_DATA);s.putBoolean(e.ContentlibConstants.INCLUDE_DEPENDENCIES,true);s.putBoolean(e.ContentlibConstants.INCLUDE_SUB_ITEMS,true);var l=s.putNewStructure(e.ContentlibConstants.OPTIONS);l.putBoolean(e.ContentlibConstants.DETAIL,true);l.putBoolean(e.ContentlibConstants.VISUALIZATION,true);l.putBoolean(e.ContentlibConstants.RATE,true);l.putBoolean(e.ContentlibConstants.LIST_FORMULA,true);l.putBoolean(e.ContentlibConstants.LIST_VERSION,true);l.putBoolean(e.ContentlibConstants.ADD_METADATA,true);l.putBoolean(e.ContentlibConstants.INCL_SUB_OBJECT_TYPES,true);l.putBoolean(e.ContentlibConstants.PLANNING_FEATURES,true);l.putBoolean(e.ContentlibConstants.TRANSLATED_CUSTOMIZED_DESCRIPTION,true);l.putBoolean(e.ContentlibConstants.NEED_DIMENSION_VALIDATION_RULES,true);return t};e.InAFusionModelAction.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);if(this.isValid()){var i=r.getRootElementGeneric().asList();var a=i.getStructureAt(0);var o=e.XContent.createJsonObjectContent(e.QModelFormat.SFX,a);this.setContentExt(o,e.QModelFormat.SFX);this.setNextDocument(this.getContent());this.setNextActionType(e.InAFusionLayer.REPO_ACTION)}this.endSync()};e.InAQMgrApplyStateAction=function(){};e.InAQMgrApplyStateAction.prototype=new e.QOlapSyncAction;e.InAQMgrApplyStateAction.prototype._ff_c="InAQMgrApplyStateAction";e.InAQMgrApplyStateAction.createAndRun=function(t,r,n,i,a,o){var s=new e.InAQMgrApplyStateAction;s.stateId=a;s.m_stateManager=o;s.setupActionAndRun(t,n,i,r);return s};e.InAQMgrApplyStateAction.prototype.stateId=null;e.InAQMgrApplyStateAction.prototype.m_stateManager=null;e.InAQMgrApplyStateAction.prototype.processSynchronization=function(e){var t=this.m_stateManager.applyState(this.stateId);if(t.hasErrors()){this.addAllMessages(t)}this.setData(t.getData());return false};e.InAQMgrApplyStateAction.prototype.callListener=function(e,t,r,n){t.modelStateApplied(e,r,n)};e.InAQMgrStartupCacheSync=function(){};e.InAQMgrStartupCacheSync.prototype=new e.QOlapSyncAction;e.InAQMgrStartupCacheSync.prototype._ff_c="InAQMgrStartupCacheSync";e.InAQMgrStartupCacheSync.createAndRun=function(t,r,n,i){var a=new e.InAQMgrStartupCacheSync;a.setupActionAndRun(t,r,n,i);return a};e.InAQMgrStartupCacheSync.prototype.m_isCacheCall=false;e.InAQMgrStartupCacheSync.prototype.m_cacheKey=null;e.InAQMgrStartupCacheSync.prototype.m_cubeStructure=null;e.InAQMgrStartupCacheSync.prototype.processSynchronization=function(t){var r=this.getMasterCacheAction();if(e.notNull(r)){if(r.getSyncState()===e.SyncState.PROCESSING){r.attachCubeMetadataListener(this,null);return true}else if(r.getSyncState()===e.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;r.startProcessing(this)}}return false};e.InAQMgrStartupCacheSync.prototype.onCacheFilled=function(e,t,r){this.endSync()};e.InAQMgrStartupCacheSync.prototype.onActionSequenceFinalized=function(t,r){var n=this.getMasterCacheAction();if(e.notNull(n)){if(n.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){var i=e.XContent.createJsonObjectContent(e.ContentType.APPLICATION_JSON,this.m_cubeStructure);n.endProcessing(t,i)}}};e.InAQMgrStartupCacheSync.prototype.getMasterCacheAction=function(){var t=null;var r=this.getQueryManager().getQueryServiceConfig().isCachingActive();if(r===true){var n=this.getCacheKey();if(e.notNull(n)){var i=this.getActionContext().getOlapEnv();if(e.notNull(i)){var a=i.getCubeContainer(n);t=a.getMetadataAction(n)}}}return t};e.InAQMgrStartupCacheSync.prototype.getCacheKey=function(){if(e.isNull(this.m_cacheKey)){this.m_cacheKey=e.QFactory.createCacheKeyByContext(this.getActionContext())}return this.m_cacheKey};e.InAQMgrStartupCacheSync.prototype.isMasterCacheCall=function(){return this.m_isCacheCall};e.InAQMgrStartupCacheSync.prototype.storeMetadataInCache=function(t){if(e.notNull(t)){if(this.m_isCacheCall===true){if(e.notNull(this.m_cacheKey)){var r=this.getOlapEnv();var n=r.getCubeContainer(this.m_cacheKey);this.m_cubeStructure=t.getStructureByKey("Cube");if(r.isCachingEnabled()){n.setQueryMetadata(this.m_cacheKey,this.m_cubeStructure)}}}}};e.InAQMgrStartupCacheSync.prototype.getMetadataInCache=function(){var t=null;if(e.notNull(this.m_cacheKey)){var r=this.getOlapEnv();if(r.isCachingEnabled()){var n=r.getCubeContainer(this.m_cacheKey);var i=n.getQueryMetadata(this.m_cacheKey);if(e.notNull(i)){t=e.PrFactory.createStructure();t.put("Cube",i)}}}return t};e.InAQMgrSyncAction=function(){};e.InAQMgrSyncAction.prototype=new e.QOlapSyncAction;e.InAQMgrSyncAction.prototype._ff_c="InAQMgrSyncAction";e.InAQMgrSyncAction.prototype.m_rpcFunction=null;e.InAQMgrSyncAction.prototype.releaseObject=function(){this.m_rpcFunction=e.XObjectExt.release(this.m_rpcFunction);e.QOlapSyncAction.prototype.releaseObject.call(this)};e.InAQMgrSyncAction.prototype.createFunction=function(){return this.getActionContext().createFunction()};e.InAQMgrSyncAction.prototype.cancelSynchronization=function(){e.QOlapSyncAction.prototype.cancelSynchronization.call(this);this.m_rpcFunction.cancelSynchronization()};e.InAQMgrSyncAction.prototype.fillRequestStructure=function(){var t=this.getActionContext();var r=t.getInstanceId();if(e.isNull(r)){return null}var n=e.PrFactory.createStructure();var i=this.getApplication();var a=this.getSession();if(a.hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){var o=t.getOlapSystemContainer();var s=o.getServiceCapabilities(e.ServerService.ANALYTIC);var l=this.getQueryModel();if(e.isNull(l)){e.QInAClientInfo.exportClientInfo(n,i,s.supportsClientInfo())}else{e.QInAClientInfo.exportClientInfo(n,l,s.supportsClientInfo())}}return n};e.InAQMgrSyncAction.prototype.initPlanningSupport=function(t,r){var n=this.getActionContext();var i=n.getCapabilitiesBase();var a=i.getSystemType().isTypeOf(e.SystemType.BW);var o=n.supportsDataEntryReadOnly();var s=n.isDataEntryEnabled();var l;if(a){s=e.PrUtils.getBooleanProperty(t,"DefaultInputMode")!==null;if(s){if(r){l=!e.PrUtils.getBooleanValueProperty(t,"DefaultInputMode",false)}else{l=!e.PrUtils.getBooleanValueProperty(t,"InputEnabled",false)}}else{l=true}o=s}else{if(!s){s=e.PrUtils.getBooleanValueProperty(t,"InputEnabled",false)}l=!s}n.getQueryModelBase().setSupportsDataEntryReadOnly(o);n.setDataEntryReadOnly(l);n.setDataEntryEnabled(s);if(a&&s){n.initializeDataAreaState()}};e.InARsEnProvider=function(){};e.InARsEnProvider.prototype=new e.DfResultSetProvider;e.InARsEnProvider.prototype._ff_c="InARsEnProvider";e.InARsEnProvider.create=function(t,r,n,i){var a=new e.InARsEnProvider;a.setupHanalyticsResultSetProvider(t,r,n,i);return a};e.InARsEnProvider.prototype.m_columnAxisProvider=null;e.InARsEnProvider.prototype.m_dataCellProvider=null;e.InARsEnProvider.prototype.m_rowsAxisProvider=null;e.InARsEnProvider.prototype.m_initProcedure=null;e.InARsEnProvider.prototype.m_initStructure=null;e.InARsEnProvider.prototype.m_queryProvider=null;e.InARsEnProvider.prototype.m_isTransientQueryProvider=false;e.InARsEnProvider.prototype.m_complexUnitsSetting=null;e.InARsEnProvider.prototype.m_contextType=null;e.InARsEnProvider.prototype.m_updatedMetadataProcessor=null;e.InARsEnProvider.prototype.cloneExt=function(t){var r=e.InARsEnProvider.create(this.m_queryProvider,this.m_initProcedure,this.m_initStructure,this.m_contextType);r.copyFromResultSetProvider(this);return r};e.InARsEnProvider.prototype.copyFromResultSetProvider=function(t){var r=t;this.m_columnAxisProvider.copyInARsAxisProvider(r.m_columnAxisProvider);this.m_rowsAxisProvider.copyInARsAxisProvider(r.m_rowsAxisProvider);this.m_dataCellProvider.copyInARsDataCellProvider(r.m_dataCellProvider);this.m_initProcedure=r.m_initProcedure;if(e.notNull(r.m_initStructure)){this.m_initStructure=r.m_initStructure.getPermaCopy()}this.m_queryProvider=r.m_queryProvider;this.m_isTransientQueryProvider=r.m_isTransientQueryProvider;if(e.notNull(r.m_complexUnitsSetting)){this.m_complexUnitsSetting=e.XCollectionUtils.createListOfClones(this.m_complexUnitsSetting)}};e.InARsEnProvider.prototype.setupHanalyticsResultSetProvider=function(t,r,n,i){var a=t.getApplication();this.setupAction(null,null,null,t);this.m_queryProvider=t;this.m_isTransientQueryProvider=t.getPreQueryName()!==null&&t.getTagging().containsKey(e.QStateConstants.TAG_HAS_TRANSIENT_DEPS);this.m_initProcedure=r;this.m_initStructure=n;this.m_contextType=i;this.m_dataCellProvider=e.InARsDataCellProvider.create(a,t);var o=t.getCapabilitiesBase().supportsSapDate();var s=t.getCapabilitiesBase().supportsObtainability();this.m_columnAxisProvider=e.InARsAxisProvider.create(a,e.AxisType.COLUMNS,i,o,s);this.m_rowsAxisProvider=e.InARsAxisProvider.create(a,e.AxisType.ROWS,i,o,s)};e.InARsEnProvider.prototype.releaseObject=function(){this.m_columnAxisProvider=e.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=e.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=e.XObjectExt.release(this.m_dataCellProvider);this.m_complexUnitsSetting=e.XObjectExt.release(this.m_complexUnitsSetting);this.m_contextType=null;this.m_updatedMetadataProcessor=e.XObjectExt.release(this.m_updatedMetadataProcessor);e.DfResultSetProvider.prototype.releaseObject.call(this)};e.InARsEnProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider};e.InARsEnProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider};e.InARsEnProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider};e.InARsEnProvider.prototype.processSynchronization=function(t){var r=null;if(this.m_initProcedure===e.ProviderInitProcedure.REQUEST_BY_MODEL){var n=this.m_queryProvider.getActiveResultSetContainerBase();var i=this.getResultSet().getResultSetContainer();if(n!==i){this.m_queryProvider.setActiveResultSetContainer(i);r=this.m_queryProvider.fillDataRequestStructure(true);this.m_queryProvider.setActiveResultSetContainer(n)}else{r=this.m_queryProvider.fillDataRequestStructure(true)}}else if(this.m_initProcedure===e.ProviderInitProcedure.REQUEST_BY_STRUCTURE){r=this.m_initStructure}var a=this.m_queryProvider.createFunction();this.setSyncChild(a);var o=a.getRpcRequest();var s=e.RsRequestDecoratorFactory.getResultsetRequestDecorator(this.m_queryProvider.getApplication(),this.m_queryProvider.getSystemDescription(),r);if(e.isNull(s)){o.setRequestStructure(r)}else{o.setRequestStructure(s.getDecoratedRequest())}o.setSapPassportConnectionId(this.getQueryManager().getInstanceId());o.getProcessingHint().put(e.ConnectionParameters.CACHE_HINTS_ENABLED,e.PrFactory.createBoolean(this.m_queryProvider.getQueryManager().isCacheHintEnabled()));this.m_queryProvider.collectInAMergeAndBatchFunctions(a);this.m_queryProvider.getActiveResultSetContainer().setRawRequest(o.getRequestStructure().convertToNative());a.processFunctionExecution(t,this,s);return true};e.InARsEnProvider.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);if(t.isValid()&&e.notNull(r)){var i=r.getRootElement();var a=true;var o=null;var s=null;if(e.notNull(n)){a=false;var l=n;i=l.buildResponse(i);o=l.getPlanningRequest();s=l.getPlanningResponse()}var u=this.setResultStructure(i,a);if(!u&&!this.m_isTransientQueryProvider){this.addError(e.ErrorCodes.MODEL_INFRASTRUCTURE_TERMINATED,"Model infrastructure terminated")}this.updateRawRequestResponse(r);if(e.notNull(o)&&e.notNull(s)){e.PlanningStateHandler.updateFromResponse(this.getApplication(),this.getSystemName(),o,s,this)}}this.trackRequestExecuted(t);this.endSync()};e.InARsEnProvider.prototype.updateRawRequestResponse=function(t){var r=this.getResultSet();if(e.notNull(r)&&r.getApplication()!==null){var n=this.getQueryManager();if(t.getRootElement()===null){n.getActiveResultSetContainer().addError(e.ErrorCodes.OTHER_ERROR,"No json root element in response. This can be due to a json parsing issue.")}else{var i=t.getRootElement();n.getActiveResultSetContainer().setRawResponse(i.convertToNative())}}};e.InARsEnProvider.prototype.trackRequestExecuted=function(t){var r=e.UsageTrackerProvider.getUsageTracker();if(r.isEnabled()){var n=t.getData();if(e.isNull(n)){return}try{var i=new e.UTEvent;i.setFeature("InaRequest");i.setSession(this.getSession());var a=n.getFunction().getRpcRequest();i.setEventId(a.getRequestType().getName());var o=a.getConnectionInfo();var s=o.getSystemName();var l=e.XHashMapOfStringByString.create();l.put("SystemName",s);l.put("SystemHost",o.getHost());var u=o.getSystemType();l.put("SystemType",u.getName());i.setParameters(l);if(t.hasErrors()){var p=e.XHashMapOfStringByString.create();var g=t.getErrors().getIterator();while(g.hasNext()){var c=g.next();p.put(e.XInteger.convertToString(c.getCode()),c.getText())}}r.track(i)}catch(e){return}}};e.InARsEnProvider.prototype.getSystemName=function(){return this.m_queryProvider.getSystemName()};e.InARsEnProvider.prototype.setResultStructure=function(t,r){if(e.notNull(t)){var n=this.getResultSet();if(e.isNull(n)){return false}var i=n.getApplication();if(e.isNull(i)){return false}this.addProfileStep("setResultStructure");if(r){e.PlanningStateHandler.update(i,this.getSystemName(),t,this)}if(e.InAHelper.importMessages(t,this)){n.setState(e.ResultSetState.ERROR)}var a=this.getQueryManager();var o=n.getRsQueryModelDef();if(this.isValid()){var s=t.getStructureByKey("Update");this.processAutoSubmit(a,o,s,true);var l=t.getListByKey("Grids");if(e.isNull(l)&&a.isShallow()){var u=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(u)){if(a.supportsServerState()){a.setupQueryModel();var p=e.QInAImportFactory.createForMetadata(i,a.getModelCapabilities());var g=a.getQueryModelBase();var c=g.getDataSource().getInstanceId();if(e.isNull(c)){c=a.getInstanceId();if(e.isNull(c)){c=a.getApplication().createNextInstanceId()}var m=g.getDataSourceBase();m.setInstanceId(c);m.setSystemName(a.getSystemName())}p.importQueryModel(u.getStructureAt(0).getStructureByKey("Cube"),g)}var y=u.getStructureAt(u.size()-1);l=y.getListByKey("Grids")}}this.processGrids(l,n);var d=t.getListByKey("CellContexts");this.processCellContexts(d,n)}else{this.processAutoSubmit(a,o,null,false)}this.importSerializedData(t,n);this.endProfileStep()}return true};e.InARsEnProvider.prototype.processCellContexts=function(t,r){if(!e.PrUtils.isListEmpty(t)){var n=r.getResultSetContainer();n.clearCellContexts();var i=e.QInAImportFactory.create(this.getApplication(),e.QModelFormat.INA_DATA,null);var a=t.size();for(var o=0;o<a;o++){var s=t.getStructureAt(o);var l=s.getStringByKey("Name");var u=s.getStructureByKey("CellContext");var p=i.importComponent(e.OlapComponentType.FILTER_EXPRESSION,u,null,null,this.getContext());n.putCellContext(l,p)}}};e.InARsEnProvider.prototype.processGrids=function(t,r){if(!e.PrUtils.isListEmpty(t)){var n=t.getStructureAt(0);var i=n.getIntegerByKeyExt("ResultSetState",0);var a=e.QInAConverter.lookupResultSetState(i);r.setState(a);if(a===e.ResultSetState.DATA_AVAILABLE){this.processGridData(r,n);this.assignMergeId(r,n)}}};e.InARsEnProvider.prototype.assignMergeId=function(t,r){if(this.getSession().hasFeature(e.FeatureToggleOlap.INA_MERGE_PROCESSING)){var n=r.getStringByKey(e.InAQueryMergeConstants.TAG_MERGE_ID);t.getResultSetContainer().setMergeId(n)}};e.InARsEnProvider.prototype.processGridData=function(t,r){var n=t.getQueryModel();if(e.notNull(n)){var i=r.getStructureByKey("DataSource");if(e.notNull(i)){var a;var o=null;var s=n.getCubeInfo();if(e.notNull(s)){if(n.getModelCapabilities().supportsDataRefreshAndDataTopicality()){var l=i.getStringByKey("DataRollupMin");var u=i.getStringByKey("DataRollupMax");var p=e.XDateTime.createDateTimeSafe(l);var g=e.XDateTime.createDateTimeSafe(u);s.setDataRollUpMin(p);s.setDataRollUpMax(g);a=i.getStringByKey("DataLastRefresh")}else{a=i.getStringByKey("LastDataUpdate")}if(e.notNull(a)){o=e.XDateTime.createDateTimeSafe(a);s.setLastUpdateOn(o)}}}if(this.getSession().hasFeature(e.FeatureToggleOlap.ASSERT_CONDITIONS_SIZE)){this.processRsConditions(r.getListByKey("Conditions"),n.getConditionManager())}}var c=r.getStructureByKey("DataEntryMask");this.setDataEntryMask(c);var m=r.getBooleanByKeyExt("InputEnabled",false);t.setDataEntryEnabled(m);var y=r.getListByKey("InputReadinessStates");this.setInputReadinessStates(y);this.processComplexUnitsSetting(r.getListByKey("Units"));this.connectDataCells(r);var d=null;var A=null;var I=r.getListByKey("Axes");var S=I.size();for(var f=0;f<S;f++){var v=I.getStructureAt(f);var C=v.getStringByKey("Type");if(e.notNull(C)){var N=e.QInAConverter.lookupAxisType(C);if(N===e.AxisType.ROWS){d=v}else if(N===e.AxisType.COLUMNS){A=v}else{this.addWarning(e.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis type")}}else{var E=e.XString.toLowerCase(v.getStringByKey("Name"));if(e.XString.isEqual("columns",E)){A=v}else if(e.XString.isEqual("rows",E)){d=v}else{if(f===0){d=v}else if(f===1){A=v}else{this.addWarning(e.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis index")}}}}this.importUniversalDisplayHierarchyDimensions(n,d,A);var M=t.getRsQueryModelDef();this.m_rowsAxisProvider.setOcpStructure(n,d,this.m_dataCellProvider.getAvailableDataCellRows(),M.getRowsAxisDef(),this.getLbhToUdhConversionProperties(t.getResultSetContainer(),n,e.AxisType.ROWS));this.m_columnAxisProvider.setOcpStructure(n,A,this.m_dataCellProvider.getAvailableDataCellColumns(),M.getColumnsAxisDef(),this.getLbhToUdhConversionProperties(t.getResultSetContainer(),n,e.AxisType.COLUMNS))};e.InARsEnProvider.prototype.getLbhToUdhConversionProperties=function(t,r,n){var i=null;if(t.isHierarchyToUDHConversionEnabled()){i=t.getLbhToUdhConversionProperties(n);if(e.isNull(i)&&e.notNull(r)){var a=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r.getAxis(n));if(e.notNull(a)){i=e.RsLbhToUdhConversionProperties.createByDimension(a)}}}return i};e.InARsEnProvider.prototype.processRsConditions=function(t,r){if(e.notNull(r)&&!e.PrUtils.isListEmpty(t)){var n=t.size();var i=r.getEffectiveConditions();if(n!==i.size()){this.addWarning(e.ErrorCodes.PARSING_ERROR_CONDITIONS_COUNT,"Number of conditions does not match the number of conditions returned from the server")}for(var a=0;a<n;a++){var o=t.getStructureAt(a);var s=o.getStringByKey("Name");var l=i.getByKey(s);if(e.notNull(l)){l.setUsedState(o.getStringByKey("IsUsed"))}}}};e.InARsEnProvider.prototype.processAutoSubmit=function(t,r,n,i){if(r.isExecuteAutoVariableSubmit()){this.m_updatedMetadataProcessor=e.InAUpdatedMDProcessor.create(t,r,n);if(i){this.m_updatedMetadataProcessor.importMetadataAndUpdateState()}else{this.m_updatedMetadataProcessor.rollbackState()}this.m_updatedMetadataProcessor=e.XObjectExt.release(this.m_updatedMetadataProcessor)}};e.InARsEnProvider.prototype.importSerializedData=function(t,r){if(r.getState()!==e.ResultSetState.EMPTY_JSON){var n=null;var i=null;var a=t.getStructureByKey("SerializedData");var o=r.getQueryManager();var s=r.getResultSetContainer();if(this.isValid()&&e.notNull(a)){n=a.getStringByKeyExt("View",s.getSerializedView());i=a.getStringByKey("Cube");if(s===o.getActiveResultSetContainer()){this.getOlapEnv().cacheRemoteBlendingData(o,n,i)}}s.setSerializedData(n,i)}};e.InARsEnProvider.prototype.importUniversalDisplayHierarchyDimensions=function(t,r,n){if(e.notNull(t)&&t.getModelCapabilities().supportsUniversalDisplayHierarchies()){var i=t.getUniversalDisplayHierarchies();var a=i.getHierarchies().getIterator();var o=this.getResultSet().getRsQueryModelDef();while(a.hasNext()){var s=a.next();if(s.isActive()){var l=s.getHierarchyDedicatedAxis();var u=s.getName();if(e.notNull(l)&&e.AxisType.ROWS===l.getType()){this.importUdhDimension(r,u,t,o.getRowsAxisDef())}else if(e.notNull(l)&&e.AxisType.COLUMNS===l.getType()){this.importUdhDimension(n,u,t,o.getColumnsAxisDef())}}}}};e.InARsEnProvider.prototype.importUdhDimension=function(t,r,n,i){if(e.notNull(t)){var a=t.getListByKey("Dimensions");if(e.notNull(a)){var o=a.size();for(var s=0;s<o;s++){var l=a.getStructureAt(s);var u=l.getStringByKey("Name");if(e.XString.isEqual(u,r)){var p=e.QInAImportFactory.createForMetadata(this.getApplication(),null);n.stopEventing();var g=n.getDimensionByName(r);var c=p.importDimension(l,n);g.setText(c.getText());var m=g.serializeToString(e.QModelFormat.INA_METADATA);var y=c.serializeToString(e.QModelFormat.INA_METADATA);if(!e.XString.isEqual(m,y)){g.getFieldContainer().reinit(c.getFieldContainer());g.getAttributeContainer().reinit(c.getAttributeContainer())}this.updateDimensionDefinitions(a,n,i);n.resumeEventing();return}}}}};e.InARsEnProvider.prototype.updateDimensionDefinitions=function(e,t,r){r.clearDimensions();var n=e.size();for(var i=0;i<n;i++){var a=e.getStructureAt(i);var o=t.getDimensionByName(a.getStringByKey("Name"));r.addDimension(o)}};e.InARsEnProvider.prototype.connectDataCells=function(t){var r=t.getStructureByKey("Cells");if(e.notNull(r)){var n=t.getListByKey("CellArraySizes");var i=e.PrUtils.getListSize(n,0);var a=0;var o=0;if(i>0){a=n.getIntegerAt(0)}if(i>1){o=n.getIntegerAt(1)}var s=t.getListByKey("ExceptionSettings");this.m_dataCellProvider.setOcpStructure(r,o,a,s)}};e.InARsEnProvider.prototype.setDataEntryMask=function(t){if(e.isNull(t)){return}var r=t.getListByKey("QueryCellNames");if(e.isNull(r)){return}var n=e.PrUtils.asListOfString(r);this.getResultSet().setDataEntryMask(n)};e.InARsEnProvider.prototype.setInputReadinessStates=function(t){if(e.isNull(t)){return}var r=e.XList.create();for(var n=0;n<t.size();n++){r.add(e.RsInputReadinessState.create(n,t.getListAt(n)))}if(r.isEmpty()){return}this.getResultSet().setInputReadinessStates(r)};e.InARsEnProvider.prototype.processComplexUnitsSetting=function(t){if(e.notNull(t)){var r=t.size();if(e.isNull(this.m_complexUnitsSetting)){this.m_complexUnitsSetting=e.XList.create()}for(var n=0;n<r;n++){var i=t.getStructureAt(n);if(e.notNull(i)){this.m_complexUnitsSetting.add(this.buildComplexUnit(i.getListByKey("Type"),i.getListByKey("Value"),i.getListByKey("Description"),i.getListByKey("Exp")))}}}};e.InARsEnProvider.prototype.buildComplexUnit=function(t,r,n,i){var a=e.XListOfString.create();var o=e.XListOfString.create();var s=e.XListOfString.create();var l=e.XList.create();var u=r.size();for(var p=0;p<u;p++){a.add(t.getStringAt(p));o.add(r.getStringAt(p));s.add(n.getStringAt(p));l.add(e.XIntegerValue.create(i.getIntegerAt(p)))}return e.RsComplexUnit.create(a,o,s,l)};e.InARsEnProvider.prototype.getComplexUnitsSetting=function(){return this.m_complexUnitsSetting};e.MeasureValueHelpRsProvider=function(){};e.MeasureValueHelpRsProvider.prototype=new e.DfResultSetProvider;e.MeasureValueHelpRsProvider.prototype._ff_c="MeasureValueHelpRsProvider";e.MeasureValueHelpRsProvider.create=function(t){var r=new e.MeasureValueHelpRsProvider;r.setupProvider(t);return r};e.MeasureValueHelpRsProvider.prototype.m_measureDimension=null;e.MeasureValueHelpRsProvider.prototype.m_columnAxisProvider=null;e.MeasureValueHelpRsProvider.prototype.m_rowsAxisProvider=null;e.MeasureValueHelpRsProvider.prototype.m_dataCellProvider=null;e.MeasureValueHelpRsProvider.prototype.m_measureHelpResult=null;e.MeasureValueHelpRsProvider.prototype.setupProvider=function(t){this.setupAction(null,null,null,t);this.m_measureDimension=t;this.m_columnAxisProvider=e.MeasureValueHelpRsAxisProvider.create(t);this.m_rowsAxisProvider=e.MeasureValueHelpRsAxisProvider.create(t);this.m_dataCellProvider=e.MeasureValueHelpRsDataCellProvider.create()};e.MeasureValueHelpRsProvider.prototype.releaseObject=function(){e.DfResultSetProvider.prototype.releaseObject.call(this);this.m_measureDimension=null;this.m_columnAxisProvider=e.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=e.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=e.XObjectExt.release(this.m_dataCellProvider)};e.MeasureValueHelpRsProvider.prototype.cloneExt=function(t){var r=e.MeasureValueHelpRsProvider.create(this.m_measureDimension);r.copyFromResultSetProvider(this);return r};e.MeasureValueHelpRsProvider.prototype.copyFromResultSetProvider=function(e){var t=e;this.m_measureDimension=t.m_measureDimension;this.m_columnAxisProvider.copyValueHelpRsAxisProvider(t.m_columnAxisProvider);this.m_rowsAxisProvider.copyValueHelpRsAxisProvider(t.m_rowsAxisProvider)};e.MeasureValueHelpRsProvider.prototype.processSynchronization=function(e){this.m_measureHelpResult=this.getMeasureHelpNodes();this.addAllMessages(this.m_measureHelpResult);this.m_rowsAxisProvider.setValueHelpNodes(this.m_measureHelpResult.getData(),this.m_measureDimension);this.endSync();return true};e.MeasureValueHelpRsProvider.prototype.getMeasureHelpNodes=function(){if(e.isNull(this.m_measureHelpResult)){this.m_measureHelpResult=this.m_measureDimension.getSelector().processMeasureHelp()}return this.m_measureHelpResult};e.MeasureValueHelpRsProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider};e.MeasureValueHelpRsProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider};e.MeasureValueHelpRsProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider};e.MeasureValueHelpRsProvider.prototype.getComplexUnitsSetting=function(){return null};e.InAQMgrCancelThreadsAction=function(){};e.InAQMgrCancelThreadsAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrCancelThreadsAction.prototype._ff_c="InAQMgrCancelThreadsAction";e.InAQMgrCancelThreadsAction.createAndRun=function(t,r,n,i){var a=new e.InAQMgrCancelThreadsAction;a.setupActionAndRun(t,r,n,i);return a};e.InAQMgrCancelThreadsAction.prototype.processSynchronization=function(t){this.m_rpcFunction=this.getActionContext().createFunction();var r=this.m_rpcFunction.getRpcRequest();var n=this.fillRequestStructure();if(e.isNull(n)){return false}r.setRequestStructure(n);this.m_rpcFunction.processFunctionExecution(t,this,null);return true};e.InAQMgrCancelThreadsAction.prototype.fillRequestStructure=function(){var t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}var r=t.putNewStructure("Analytics");var n=r.putNewList("Actions");var i=n.addNewStructure();i.putString("Type","Close");var a=i.putNewList("DataSources");a.addString(this.getActionContext().getInstanceId());return t};e.InAQMgrCancelThreadsAction.prototype.onFunctionExecuted=function(e,t,r){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrCancelThreadsAction.prototype.callListener=function(e,t,r,n){t.onProviderCancelThreads(e,r,n)};e.InAQMgrClearCacheAction=function(){};e.InAQMgrClearCacheAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrClearCacheAction.prototype._ff_c="InAQMgrClearCacheAction";e.InAQMgrClearCacheAction.createAndRun=function(t,r,n,i,a){var o=new e.InAQMgrClearCacheAction;o.m_timestamp=a;o.setupActionAndRun(t,r,n,i);return o};e.InAQMgrClearCacheAction.prototype.m_timestamp=null;e.InAQMgrClearCacheAction.prototype.processSynchronization=function(t){this.m_rpcFunction=this.getActionContext().createFunction();var r=this.m_rpcFunction.getRpcRequest();var n=this.fillRequestStructure();if(e.notNull(n)){r.setRequestStructure(n);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}return false};e.InAQMgrClearCacheAction.prototype.fillRequestStructure=function(){var t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}var r=t.putNewStructure("Analytics");var n=r.putNewList("Actions");var i=n.addNewStructure();i.putString("Type","ClearCache");var a=i.putNewList("DataSources");var o=this.getActionContext();a.addString(o.getInstanceId());var s=o.getSystemType();if(s===e.SystemType.UNV||s===e.SystemType.UQAS){var l=i.putNewList("DataSourceDescriptions");var u=o.getDataSource().getCustomProperties();var p=u.getKeysAsIteratorOfString();var g=l.addNewStructure();while(p.hasNext()){var c=p.next();g.putString(c,u.getByKey(c))}}if(e.isNull(this.m_timestamp)){var m=e.XDateTime.createCurrentLocalDateTime();var y=m.getTimeInMilliseconds();this.m_timestamp=e.XLong.convertToString(y)}i.putString("Id",this.m_timestamp);return t};e.InAQMgrClearCacheAction.prototype.onFunctionExecuted=function(e,t,r){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrClearCacheAction.prototype.callListener=function(e,t,r,n){t.onProviderClearCache(e,r,n)};e.InAQMgrShutdownAction=function(){};e.InAQMgrShutdownAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrShutdownAction.prototype._ff_c="InAQMgrShutdownAction";e.InAQMgrShutdownAction.createAndRun=function(t,r,n,i){var a=new e.InAQMgrShutdownAction;a.setupActionAndRun(t,r,n,i);return a};e.InAQMgrShutdownAction.prototype.processSynchronization=function(t){var r=this.getActionContext();if(r.supportsShutdown()){this.m_rpcFunction=this.getActionContext().createFunction();var n=this.m_rpcFunction.getRpcRequest();var i=this.fillRequestStructure();if(e.notNull(i)){n.setRequestStructure(i);n.setRequestType(e.HttpSemanticRequestType.CLOSE_DP);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}}return false};e.InAQMgrShutdownAction.prototype.fillRequestStructure=function(){var t=e.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(e.isNull(t)){return null}var r=t.putNewStructure("Analytics");var n=r.putNewList("Actions");var i=n.addNewStructure();i.putString("Type","Close");var a=i.putNewList("DataSources");a.addString(this.getActionContext().getInstanceId());return t};e.InAQMgrShutdownAction.prototype.onFunctionExecuted=function(e,t,r){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync()};e.InAQMgrShutdownAction.prototype.callListener=function(e,t,r,n){t.onProviderShutdown(e,r,n)};e.InAQMgrStartupAction=function(){};e.InAQMgrStartupAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrStartupAction.prototype._ff_c="InAQMgrStartupAction";e.InAQMgrStartupAction.createServiceInitAndRun=function(t,r,n,i,a){var o=e.InAQMgrStartupAction.createInitAndRun(t,r,true,n,i,a);return o};e.InAQMgrStartupAction.createMetadataInitAndRun=function(t,r,n,i,a){var o=e.InAQMgrStartupAction.createInitAndRun(t,r,false,n,i,a);return o};e.InAQMgrStartupAction.createInitAndRun=function(t,r,n,i,a,o){var s=a.getQueryServiceConfig();var l;var u;if(s.isFusionActive()){u=new e.InAQMgrStartupAction;u.m_isServiceInit=n;u.setData(o);u.setupActionAndRun(t,r,i,a);l=u}else{var p=e.SyncActionSequence.create(t,r,i,a);var g=e.InAQMgrStartupCacheSync.createAndRun(e.SyncType.DELAYED,null,null,a);p.addAction(g);p.setFinalizeListener(g);u=new e.InAQMgrStartupAction;u.m_isServiceInit=n;u.m_cacheSync=g;u.setData(o);u.setupActionAndRun(e.SyncType.DELAYED,null,null,a);p.setDataAction(u);p.setListenerAction(u);p.addAction(u);p.process();l=p}return l};e.InAQMgrStartupAction.prototype.m_isServiceInit=false;e.InAQMgrStartupAction.prototype.m_cacheSync=null;e.InAQMgrStartupAction.prototype.m_cacheKey=null;e.InAQMgrStartupAction.prototype.m_cubeStructure=null;e.InAQMgrStartupAction.prototype.processSynchronization=function(t){var r=this.getActionContext();var n=r.getQueryServiceConfig();if(this.m_isServiceInit){if(r.getLifeCycleState()!==e.LifeCycleState.INITIAL){this.addError(e.ErrorCodes.INVALID_STATE,"Query Manager is not initial");return false}r.setLifeCycleState(e.LifeCycleState.STARTING_UP)}var i=r.getMode();var a=this.getQueryModelBase();var o=r.getDataSource();if(e.isNull(a)){if(i===e.QueryManagerMode.RAW_QUERY){r.setLifeCycleState(e.LifeCycleState.ACTIVE);this.endSync();return true}r.setupDesignTimeMode();a=this.getQueryModelBase();o=r.getDataSource()}else{a.setDataSource(o)}if(i.isTypeOf(e.QueryManagerMode.DEFAULT)&&e.isNull(o)){this.addError(e.ErrorCodes.INVALID_STATE,"No datasource given");return false}var s=a.getDataSourceBase();var l=s.getInstanceId();if(e.isNull(l)){l=r.getInstanceId();if(e.isNull(l)){l=r.getApplication().createNextInstanceId()}s.setInstanceId(l)}var u=s.getSystemName();if(e.isNull(u)){s.setSystemName(r.getSystemName())}if(i===e.QueryManagerMode.RAW_QUERY&&this.m_isServiceInit){return false}var p=r.getInitSettings().getDefinitionContent();var g=null;var c=null;var m=false;if(n.isFusionActive()){c=n.getMetadataContent();if(e.notNull(c)){m=true}g=n.getRepositoryContent()}if(m===false){if(e.notNull(p)&&p.getContentType().containsMetadata()){c=p;m=true}else if(e.notNull(o)){var y=o.getExtendedDimensions();if(e.notNull(y)){if(o.getExtendedDimensions().hasElements()&&i===e.QueryManagerMode.BLENDING){this.addWarningExt(e.OriginLayer.SERVER,e.ErrorCodes.INVALID_DIMENSION,"Joining ExtendedDimensions on a BlendingQuery is not supported by the backend!")}}this.m_cacheKey=e.QFactory.createCacheKeyByContext(a);var d=n.getDefinitionType();var A;if(e.notNull(d)&&d.containsMetadata()){A=this.getApplication().getOlapEnvironment().getQueryMetadata(this.m_cacheKey);c=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,A);m=true}else{if(n.isFusionActive()===false){if(a.isPartialResponse()===false){A=this.m_cacheSync.getMetadataInCache();if(e.notNull(A)){c=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,A)}}}}}}if(e.notNull(c)){this.runApplySteps(a,c,g,i,m);return true}else if(i===e.QueryManagerMode.BLENDING){this.addProfileStep("Prepare Metadata Request");var I=e.InAQMgrStartupBlending.create(this);I.prepare(t);this.endProfileStep();I.process(this,t);return this.isValid()}else{if(r.supportsAndAllowsEmptyExtendedVarDefinition()){var S=r.emptyVariableDefinition(t,null,null);this.addAllMessages(S)}else{this.addProfileStep("Prepare Metadata Request");this.createRpcFunction(r,i);this.endProfileStep();this.m_rpcFunction.processFunctionExecution(t,this,i);return true}}return false};e.InAQMgrStartupAction.prototype.createBlendingFunction=function(){this.createRpcFunction(this.getActionContext(),e.QueryManagerMode.BLENDING);return this.m_rpcFunction};e.InAQMgrStartupAction.prototype.createRpcFunction=function(t,r){this.m_rpcFunction=t.createFunction();var n=this.m_rpcFunction.getRpcRequest();var i=e.PrFactory.createStructure();this.fillMetadataRequestStructure(i,r);n.setRequestStructure(i)};e.InAQMgrStartupAction.prototype.fillMetadataRequestStructure=function(t,r){var n=this.getActionContext();var i=n.setInnerStructure(t,"Metadata",null);var a=n.getProviderTypeProx();if(a===e.ProviderType.ANALYTICS||a===e.ProviderType.CATALOG){i.putString("Context","Analytics")}else if(a===e.ProviderType.PLANNING||a===e.ProviderType.PLANNING_VALUE_HELP){i.putString("Context","Planning")}else if(a===e.ProviderType.LIST_REPORTING){i.putString("Context","ListReporting")}if(this.getServiceConfig().isLightweight()&&n.getModelCapabilities().supportsMetadataResultFormatOptions()){var o=i.putNewStructure("ResultSetFeatureRequest");var s=o.putNewStructure("MetadataResultFormatOptions");s.putBoolean("LightWeightMetadata",true)}if(r===e.QueryManagerMode.BLENDING){var l=this.getServiceConfig();var u=l.getBlendingDefinition();var p=e.QInADataSourceBlending.exportDataSourceBlending(e.QModelFormat.INA_DATA,u,false);e.QInAExportUtil.setNonEmptyString(p,"InstanceId",l.getInstanceId());i.put("DataSource",p)}if(this.getSession().hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)){var g=n.getOlapSystemContainer();var c=g.getServiceCapabilities(e.ServerService.ANALYTIC);e.QInAClientInfo.exportClientInfo(t,n.getApplication(),c.supportsClientInfo())}};e.InAQMgrStartupAction.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);var i=n;var a=this.getActionContext();var o=this.getQueryModelBase();if(this.isValidResponse(t,r)){var s=r.getRootElement();var l=e.XContent.createJsonObjectContent(e.QModelFormat.INA_METADATA,s);this.runApplySteps(o,l,null,i,false)}else{a.setLifeCycleState(e.LifeCycleState.TERMINATED);this.endProfileStep();this.endSync()}};e.InAQMgrStartupAction.prototype.isValidResponse=function(t,r){if(!t.isValid()){return false}if(e.isNull(r)){return false}if(r.getRootElement()===null){this.addError(e.ErrorCodes.PARSER_ERROR,"No json inside");return false}return true};e.InAQMgrStartupAction.prototype.runApplySteps=function(e,t,r,n,i){e.stopEventing();if(this.isValid()){this.addProfileStep("step1ApplyMetadataStructure");this.step1ApplyMetadataStructure(e,t,n,i);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step2ApplyPlanning");this.step2ApplyPlanning(t,n);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step3ApplyQueryModel");this.step3ApplyQueryModel(r,i);this.endProfileStep()}if(this.isValid()){this.addProfileStep("step4ApplyDataRequest");this.step4ApplyDataRequest();this.endProfileStep()}if(this.isValid()){this.addProfileStep("step5ApplyBlending");this.step5ApplyBlending(n,i);this.endProfileStep()}this.step6Finalize();if(this.isValid()){this.addProfileStep("step6Variables");this.step6Variables(i);this.endProfileStep()}e.resumeEventing();this.endSync()};e.InAQMgrStartupAction.prototype.step1ApplyMetadataStructure=function(t,r,n,i){if(e.notNull(r)){var a=r.getJsonContent();var o=r.getContentType();var s=this.getActionContext();var l=s.getQueryServiceConfig();if(l.isFusionActive()===false){if(t.isPartialResponse()===false){this.m_cacheSync.storeMetadataInCache(a)}}var u=this.getApplication();if(!e.InAHelper.importMessages(a,this)){this.m_cubeStructure=a;if(o!==e.QModelFormat.INA_CLONE){if(e.notNull(a)){this.m_cubeStructure=a.getStructureByKey("Cube");if(e.isNull(this.m_cubeStructure)&&a.containsKey("Command")){this.m_cubeStructure=a.getStructureByKey("Command")}if(e.isNull(this.m_cubeStructure)){if(i){this.m_cubeStructure=a}var p=a.getStructureByKey("DataSourceValidation");if(e.notNull(p)){if(p.getBooleanByKey("Valid")){this.addInfo(e.InfoCodes.QUERY_MODEL_VERSION_VALID,"Model version valid")}else{this.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null)}return}}}}if(e.isNull(this.m_cubeStructure)){this.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.QM_CUBE_ENTRY_NOT_FOUND,"Invalid Metadata from server - Cube tag in structure not found",null)}else{var g=s.getModelCapabilities();var c;if(n===e.QueryManagerMode.BLENDING){c=e.QInAImportFactory.createForMetadata(u,g)}else{var m=this.getServiceConfig();if(o===e.QModelFormat.INA_CLONE){c=e.QInAImportFactory.createForCloning(u,g)}else if(m.isLoadingDefaultQuery()){c=e.QInAImportFactory.createForMetadata(u,g)}else{c=e.QInAImportFactory.createForMetadataCore(u,g)}}if(e.notNull(n)){var y=this.removeAlreadyLoadedDimensions(t);if(y){c.importQueryModel(this.m_cubeStructure,t)}else{var d=e.QInAImportFactory.createForMetadata(u,g);var A=e.QueryModel.create(this.getOlapEnv(),s,t.getModelCapabilitiesBase());A.setDataSource(t.getDataSource());d.importQueryModel(this.m_cubeStructure,A);var I=A.getDimensions();for(var S=0;S<I.size();S++){var f=I.get(S);var v=t.getDimensionByNameFromExistingMetadata(f.getName());if(e.notNull(v)&&v.getDimensionType()===e.DimensionType.DIMENSION_INCOMPLETE){v.copyDimension(f)}}t.setServerBaseSerialization(null,e.QModelOrigin.INITIAL_SERVER_CALL,this.m_cubeStructure);e.XObjectExt.release(A)}}if(s.getDataSource()!==null){s.getDataSource().setValidationHash(t.getDataSource().getValidationHash())}var C=a.getStructureByKey("PerformanceData");if(e.notNull(C)){var N=C.getStringByKey("UserName");var E=t.getCubeInfo();if(e.notNull(E)){E.setUserName(N)}}this.addAllMessages(c)}}}};e.InAQMgrStartupAction.prototype.removeAlreadyLoadedDimensions=function(e){if(e.isPartialResponse()){return true}for(var t=0;t<e.getLoadedDimensions().size();){e.removeDimension(e.getLoadedDimensions().get(t))}return true};e.InAQMgrStartupAction.prototype.step2ApplyPlanning=function(t,r){if(e.notNull(t)&&e.notNull(this.m_cubeStructure)){var n=this.getActionContext();var i=this.getApplication();e.PlanningStateHandler.update(i,n.getSystemName(),t.getJsonContent(),this);if(r!==e.QueryManagerMode.BLENDING){this.initPlanningSupport(this.m_cubeStructure,true)}}};e.InAQMgrStartupAction.prototype.step3ApplyQueryModel=function(t,r){var n=this.getQueryModelBase();var i=this.getActionContext();var a=i.getQueryServiceConfig();var o=a.getModellerContent();n.resumeEventing();if(e.notNull(o)){n.deserializeFromElementExt(o.getContentType(),o.getJsonContent())}if(e.notNull(t)){n.deserializeFromElementExt(t.getContentType(),t.getJsonContent())}else if(r===false){var s=i.getDeserializationStructure();var l=i.getDeserializationImporter();if(e.notNull(s)&&e.notNull(l)){l.importQueryModel(s,n)}}n.stopEventing()};e.InAQMgrStartupAction.prototype.step4ApplyDataRequest=function(){var t=this.getActionContext();var r=t.getQueryServiceConfig().getDataRequest();if(e.notNull(r)){var n=this.getQueryModelBase();n.deserializeFromElementExt(e.QModelFormat.INA_DATA,r)}};e.InAQMgrStartupAction.prototype.step5ApplyBlending=function(t,r){if(r===false){if(t===e.QueryManagerMode.BLENDING){var n=this.getServiceConfig();var i=n.getBlendingDefinition();if(e.notNull(i)){var a=this.getQueryModelBase();var o=a.getDataSourceBase();o.setBlendingDefinition(i)}}}};e.InAQMgrStartupAction.prototype.step6Variables=function(t){if(t===false){var r=this.getActionContext();if(r.isDirectVariableTransferEnabled()===false){if(r.getInitSettings().isLightweight()&&r.getInitSettings().getStartVariablesContent()!==null){r.setVariableProcessorState(e.VariableProcessorState.SUBMITTED)}else{r.setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_STARTUP)}}r.resumeEventing();r.prepareAfterVariables();r.stopEventing()}};e.InAQMgrStartupAction.prototype.step6Finalize=function(){var t=this.getActionContext();if(this.isValid()){t.setLifeCycleState(e.LifeCycleState.ACTIVE)}else{t.setLifeCycleState(e.LifeCycleState.TERMINATED)}};e.InAQMgrStartupAction.prototype.callListener=function(e,t,r,n){if(this.m_isServiceInit){var i=t;i.onServiceInitialized(e,r,n)}else{var a=t;a.onQueryModelInitialized(e,r,n)}};e.InAQMgrStartupAction.prototype.getServiceConfig=function(){return this.getQueryManager().getServiceConfig()};e.InAQMgrVarAction=function(){};e.InAQMgrVarAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrVarAction.prototype._ff_c="InAQMgrVarAction";e.InAQMgrVarAction.createAndRunDefinition=function(t,r,n,i){var a;var o=t.getVariableProcessorState();if(o===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){a=e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION}else{a=e.VariableProcessorState.PROCESSING_DEFINITION}var s=new e.InAQMgrVarAction;s.setupVarActionAndRun(r,t,null,n,i,a,e.ProcessingStep.VARIABLE_DEFINITION,true,true,true);return s};e.InAQMgrVarAction.createAndRunVariantActivation=function(t,r,n,i,a){var o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,r,i,a,e.VariableProcessorState.PROCESSING_VARIANT_ACTIVATION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return o};e.InAQMgrVarAction.createAndRunVariantDeletion=function(t,r,n,i,a){var o=new e.InAQMgrVarAction;o.setupVarActionAndRun(n,t,r,i,a,e.VariableProcessorState.PROCESSING_VARIANT_DELETION,e.ProcessingStep.VARIANT_DELETE,false,false,true);return o};e.InAQMgrVarAction.createAndRunVariantUpdate=function(t,r,n,i,a,o){var s=new e.InAQMgrVarAction;s.m_updateVariantProperties=n;s.setupVarActionAndRun(i,t,r,a,o,e.VariableProcessorState.PROCESSING_VARIANT_SAVE,e.ProcessingStep.VARIANT_SAVE,false,false,true);return s};e.InAQMgrVarAction.createAndRunSubmit=function(t,r,n,i){var a;if(t.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_REINIT){a=e.VariableProcessorState.PROCESSING_SUBMIT_AFTER_REINIT}else{a=e.VariableProcessorState.PROCESSING_SUBMIT}var o=new e.InAQMgrVarAction;o.setupVarActionAndRun(r,t,null,n,i,a,e.ProcessingStep.VARIABLE_SUBMIT,true,true,t.isVariableSubmitNeeded());return o};e.InAQMgrVarAction.createAndRunCancel=function(t,r,n,i){var a=new e.InAQMgrVarAction;a.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_CANCEL,e.ProcessingStep.VARIABLE_CANCEL,false,false,!t.isSubmitted());return a};e.InAQMgrVarAction.createAndRunCheck=function(t,r,n,i){var a=new e.InAQMgrVarAction;a.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_CHECK,null,false,false,true);return a};e.InAQMgrVarAction.createAndRunGetRuntimeInfo=function(t,r,n,i){var a=new e.InAQMgrVarAction;a.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_DEFINITION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return a};e.InAQMgrVarAction.createAndRunReInitAfterSubmit=function(t,r,n,i){if(t.getInitSettings().isExternalizedDynamicFilter()){var a=t.getOlapEnv().getFilterManager();a.projectExternalizedFilter(t)}var o=new e.InAQMgrVarAction;o.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_REINIT,e.ProcessingStep.VARIABLE_DEFINITION,true,false,t.isSubmitted());return o};e.InAQMgrVarAction.createAndRunSetGetValues=function(t,r,n,i){var a=new e.InAQMgrVarAction;a.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_UPDATE_VALUES,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return a};e.InAQMgrVarAction.createAndRunEmptyVariableDefinition=function(t,r,n,i){var a=new e.InAQMgrVarAction;a.setupVarActionAndRun(r,t,null,n,i,e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION,e.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return a};e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter=function(e,t,r){e.setStateBeforeVarScreen(null);e.setMetadataStateBeforeVarScreen(null);if(r){e.getNewResultsetContainer()}if(e.getInitSettings().isExternalizedDynamicFilter()){var n=e.getOlapEnv().getFilterManager();n.externalizeDynamicFilterAfterSubmit(e,t)}};e.InAQMgrVarAction.prototype.m_applyVariableStates=false;e.InAQMgrVarAction.prototype.m_applyVariableAndModelStates=false;e.InAQMgrVarAction.prototype.m_processingStep=null;e.InAQMgrVarAction.prototype.m_state=null;e.InAQMgrVarAction.prototype.m_variableVariant=null;e.InAQMgrVarAction.prototype.m_needsProcessing=false;e.InAQMgrVarAction.prototype.m_isProcessingEmptyDef=false;e.InAQMgrVarAction.prototype.m_updateVariantProperties=false;e.InAQMgrVarAction.prototype.setupVarActionAndRun=function(t,r,n,i,a,o,s,l,u,p){this.m_applyVariableStates=l;this.m_applyVariableAndModelStates=u;this.m_processingStep=s;this.m_state=o;this.m_needsProcessing=p;this.m_variableVariant=n;if(this.m_state===e.VariableProcessorState.PROCESSING_REINIT){var g=r.getQueryModel();r.setStateBeforeVarScreen(g.serializeToElement(e.QModelFormat.INA_REPOSITORY));r.setMetadataStateBeforeVarScreen(g.serializeToElement(e.QModelFormat.INA_METADATA))}else if(this.m_state===e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){this.m_isProcessingEmptyDef=true}e.InAQMgrSyncAction.prototype.setupActionAndRun.call(this,t,i,a,r)};e.InAQMgrVarAction.prototype.releaseObject=function(){this.m_rpcFunction=null;this.m_processingStep=null;this.m_state=null;e.InAQMgrSyncAction.prototype.releaseObject.call(this)};e.InAQMgrVarAction.prototype.processSynchronization=function(t){this.setData(this);if(this.m_needsProcessing){this.m_rpcFunction=this.createFunction();var r=e.PrFactory.createStructure();var n=this.m_state!==e.VariableProcessorState.PROCESSING_REINIT&&this.m_state!==e.VariableProcessorState.PROCESSING_VARIANT_DELETION;var i=this.getActionContext();i.fillAnalyticRequestStructure(r,e.QInAConverter.lookupContextNameForProvider(this.getQueryManager().getProviderType()),n,this.m_processingStep,this.m_variableVariant);i.setVariableProcessorState(this.m_state);this.m_rpcFunction.getRpcRequest().setRequestStructure(r);this.m_rpcFunction.processFunctionExecution(t,this,null);return true}return false};e.InAQMgrVarAction.prototype.onFunctionExecuted=function(t,r,n){this.addProfileStep("applyDataModelStructure");this.addAllMessages(t);var i=this.getActionContext();if(e.notNull(i)){var a=i.getQueryModelBase();if(t.isValid()&&e.notNull(r)){var o=r.getRootElement();if(e.isNull(o)){this.addError(e.ErrorCodes.PARSER_ERROR,"Root element is missing")}else if(!e.InAHelper.importMessages(o,this)){if(this.m_processingStep===e.ProcessingStep.VARIABLE_DEFINITION||this.m_processingStep===e.ProcessingStep.VARIABLE_SUBMIT||this.m_processingStep===e.ProcessingStep.VARIANT_SAVE){var s=o.getStructureByKey("Cube");if(e.isNull(s)){this.addError(e.ErrorCodes.PARSER_ERROR,"Invalid Metadata from server - Cannot find 'Cube' element.")}else{e.QInAMdQuery.importVariants(s,a);e.PlanningStateHandler.update(this.getApplication(),i.getSystemName(),o,this);if(this.m_applyVariableStates){this.processCubeElement(a,o,s,i)}if(this.m_state===e.VariableProcessorState.PROCESSING_VARIANT_SAVE&&this.m_updateVariantProperties){var l=e.QInAMdQuery.importActiveVariant(s,a);if(e.isNull(l)){this.addError(e.ErrorCodes.PARSER_ERROR,"Could not parse variant.")}else{var u=i.getVariableVariantByName(l);this.m_variableVariant.setName(l);this.m_variableVariant.setText(u.getText());this.m_variableVariant.setScope(u.getScope());this.m_variableVariant.applyState()}}}}if(this.m_state===e.VariableProcessorState.PROCESSING_VARIANT_DELETION){i.removeVariableVariant(this.m_variableVariant)}}}if(this.isValid()){var p=this.m_state.getNextState();if(e.notNull(p)){if(this.m_state===e.VariableProcessorState.PROCESSING_CANCEL){this.addAllMessages(a.deserializeFromElementExt(e.QModelFormat.INA_METADATA,i.getMetadataStateBeforeVarScreen()));this.addAllMessages(a.deserializeFromElementExt(e.QModelFormat.INA_REPOSITORY,i.getStateBeforeVarScreen()));i.setStateBeforeVarScreen(null);i.setMetadataStateBeforeVarScreen(null);if(i.getInitSettings().isExternalizedDynamicFilter()){i.getConvenienceCommands().clearNonMeasureFilters()}}else if(this.m_state.isTypeOf(e.VariableProcessorState.PROCESSING_SUBMIT)){e.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(i,this.m_state===e.VariableProcessorState.PROCESSING_SUBMIT,true)}i.setVariableProcessorState(p)}else{i.returnToPreviousProcessorState()}i.prepareAfterVariables()}else{if(this.m_state.isTypeOf(e.VariableProcessorState.PROCESSING_SUBMIT)){i.setVariableProcessorState(e.VariableProcessorState.SUBMIT_FAILED)}else{i.returnToPreviousProcessorState()}}}this.endProfileStep();this.endSync()};e.InAQMgrVarAction.prototype.processCubeElement=function(t,r,n,i){if(e.notNull(t)&&i.getModelCapabilities().supportsAutoVariableSubmit()){t.setIsMetadataUpdatedByAutoSubmit(false)}if(this.m_applyVariableAndModelStates){this.applyServerModel(t,r,n)}else if(this.m_isProcessingEmptyDef){var a=i.getVariablesImporter();e.QInAMdQuery.importDimensions(a,n,t);a.importDimensions(n,t,t);a.importVariables(n,i.getVariableContainerBase());e.QInAMdDataSource.importMd(a,n,t,t);this.addAllMessages(a);this.m_isProcessingEmptyDef=false;this.getActionContext().setLifeCycleState(e.LifeCycleState.ACTIVE)}else{var o=i.getVariablesImporter();o.importVariables(n,i.getVariableContainerBase());this.addAllMessages(o)}};e.InAQMgrVarAction.prototype.applyServerModel=function(t,r,n){var i=n;var a=this.getActionContext();var o=false;if(a.getPreviousVariableProcessorState()!==e.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){o=true}var s=this.getOlapEnv();var l=this.getApplication();e.PlanningStateHandler.update(l,a.getSystemName(),r,this);var u=e.QInAImportFactory.createForMetadata(l,t.getModelCapabilities());var p=e.QueryModel.create(s,a,t.getModelCapabilitiesBase());p.setDataSource(t.getDataSource());if(this.m_processingStep===e.ProcessingStep.VARIABLE_DEFINITION){u.importVariableManager(r.getStructureByKey("Cube"),t.getVariableManagerBase(),t)}else if(!o){u.importQueryModel(i,t);var g=a.getDeserializationStructure();var c=a.getDeserializationImporter();if(e.notNull(g)&&e.notNull(c)){c.importQueryModel(g,t)}}else{u.importQueryModel(i,p);i=e.PrFactory.createStructureDeepCopy(i);t.setServerBaseSerialization(null,e.QModelOrigin.VARIABLE_SUBMIT,i)}this.addAllMessages(u);if(o){t.metadataUpdateEventing();var m=a.getVariableProcessorState();var y=e.InAQMgrMergeSettings.create(m===e.VariableProcessorState.PROCESSING_SUBMIT);this.revertUdhStateOnVariableModel(p,t,y);t.mergeDeepRecursive(y,p);t.augmentSFXMetadata()}e.XObjectExt.release(p);this.initPlanningSupport(i,false);if(o){t.resumeEventing()}};e.InAQMgrVarAction.prototype.revertUdhStateOnVariableModel=function(t,r,n){if(r.getQueryManager().isHierarchyToUDHConversionEnabledForCurrentRs()){var i=r.getUniversalDisplayHierarchies();var a=i.getHierarchies();var o=t.getUniversalDisplayHierarchies();var s=o.getHierarchies();if(e.XCollectionUtils.hasElements(a)&&e.XCollectionUtils.hasElements(s)){for(var l=0;l<s.size();l++){var u=s.get(l);if(u.isActive()){var p=u.getHierarchyDedicatedAxis().getType();var g=e.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r.getAxis(p));if(e.notNull(g)){this.revertUdhState(t,g,o,i,n)}}}}}};e.InAQMgrVarAction.prototype.revertUdhState=function(t,r,n,i,a){var o=t.getDimensionByName(r.getName());if(e.notNull(o)){o.getHierarchyManager().copyFrom(r.getHierarchyManager(),null);var s=o.getFilter();if(e.notNull(s)){s.clear()}n.mergeDeepRecursive(a,i)}};e.InAQMgrVarAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAQMgrVarAction.prototype.callListener=function(e,t,r,n){t.onVariableProcessorExecuted(e,r,n)};e.InAQMgrVariantModifyAction=function(){};e.InAQMgrVariantModifyAction.prototype=new e.InAQMgrSyncAction;e.InAQMgrVariantModifyAction.prototype._ff_c="InAQMgrVariantModifyAction";e.InAQMgrVariantModifyAction.ACTIVATION_STEP="ACTIVATE";e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP="SAVE_REPLACE";e.InAQMgrVariantModifyAction.SAVE_NEW_STEP="SAVE_NEW";e.InAQMgrVariantModifyAction.SAVE_OLD_STEP="SAVE_OLD";e.InAQMgrVariantModifyAction.DELETE_STEP="DELETE";e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP="DELETE_ERROR";e.InAQMgrVariantModifyAction.createAndRunModification=function(t,r,n,i,a){var o=new e.InAQMgrVariantModifyAction;o.m_variant=r;o.setupActionAndRun(n,i,a,t);return o};e.InAQMgrVariantModifyAction.prototype.m_variant=null;e.InAQMgrVariantModifyAction.prototype.m_replacementVariant=null;e.InAQMgrVariantModifyAction.prototype.m_previousVariableValues=null;e.InAQMgrVariantModifyAction.prototype.releaseObject=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=e.XObjectExt.release(this.m_previousVariableValues);e.InAQMgrSyncAction.prototype.releaseObject.call(this)};e.InAQMgrVariantModifyAction.prototype.processSynchronization=function(t){if(!this.m_variant.isDirty()){return false}var r=this.getActionContext();if(this.m_variant.getName()===null){var n=this.m_variant.getDirtyScope();var i=n!==e.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(i,this.m_variant.getDirtyText(),n,e.InAQMgrVariantModifyAction.SAVE_NEW_STEP);return true}this.m_previousVariableValues=r.getVariableContainer().serializeToElement(e.QModelFormat.INA_DATA);r.activateVariableVariant(this.m_variant,t,this,e.XStringValue.create(e.InAQMgrVariantModifyAction.ACTIVATION_STEP));return true};e.InAQMgrVariantModifyAction.prototype.onFunctionExecuted=function(e,t,r){};e.InAQMgrVariantModifyAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAQMgrVariantModifyAction.prototype.onVariableProcessorExecuted=function(t,r,n){var i=n.toString();var a=this.getActionContext();this.addAllMessages(t);if(this.hasErrors()){this.doErrorHandling(i)}else{this.clearMessages();switch(i){case e.InAQMgrVariantModifyAction.ACTIVATION_STEP:var o=this.m_variant.getDirtyText();if(this.m_variant.isNameOrScopeDirty()){var s=this.m_variant.getDirtyScope();var l=s!==e.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(l,o,s,e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP)}else{var u=this.m_variant.getName();var p=this.m_variant.getScope();this.createAndRunReplacementSave(u,o,p,e.InAQMgrVariantModifyAction.SAVE_OLD_STEP)}break;case e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:a.deleteVariableVariant(this.m_variant,this.getActiveSyncType(),this,e.XStringValue.create(e.InAQMgrVariantModifyAction.DELETE_STEP));break;case e.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.applyVariantState();this.endSync();break;case e.InAQMgrVariantModifyAction.DELETE_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break}}};e.InAQMgrVariantModifyAction.prototype.doErrorHandling=function(t){var r=this.getActionContext();switch(t){case e.InAQMgrVariantModifyAction.ACTIVATION_STEP:this.endSync();break;case e.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.endSync();break;case e.InAQMgrVariantModifyAction.DELETE_STEP:r.deleteVariableVariant(this.m_replacementVariant,this.getActiveSyncType(),this,e.XStringValue.create(e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP));this.restorePreviousValuesAndEnd();break;case e.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break}};e.InAQMgrVariantModifyAction.prototype.createAndRunReplacementSave=function(t,r,n,i){this.m_replacementVariant=e.QVariableVariant.createVariantWithScopeInternal(this.m_variant.getDataSource(),t,r,n);e.InAQMgrVarAction.createAndRunVariantUpdate(this.getActionContext(),this.m_replacementVariant,true,this.getActiveSyncType(),this,e.XStringValue.create(i))};e.InAQMgrVariantModifyAction.prototype.applyVariantState=function(){this.m_variant.setName(this.m_replacementVariant.getName());this.m_variant.setText(this.m_replacementVariant.getText());this.m_variant.setScope(this.m_replacementVariant.getScope());this.m_variant.applyState()};e.InAQMgrVariantModifyAction.prototype.restorePreviousValuesAndEnd=function(){var t=this.getActionContext();t.getVariableContainer().deserializeFromElementExt(e.QModelFormat.INA_DATA,this.m_previousVariableValues);this.endSync()};e.InAQMgrVariantModifyAction.prototype.endSync=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=e.XObjectExt.release(this.m_previousVariableValues);e.InAQMgrSyncAction.prototype.endSync.call(this)};e.InAQMgrVariantModifyAction.prototype.callListener=function(e,t,r,n){t.onVariableProcessorExecuted(e,r,n)};e.InAQRriTargetsSyncAction=function(){};e.InAQRriTargetsSyncAction.prototype=new e.InAQMgrSyncAction;e.InAQRriTargetsSyncAction.prototype._ff_c="InAQRriTargetsSyncAction";e.InAQRriTargetsSyncAction.createAndRun=function(t,r,n){var i=new e.InAQRriTargetsSyncAction;i.m_parent=r;i.m_identifier=n;i.setupActionAndRun(t,r,null,null);return i};e.InAQRriTargetsSyncAction.extractRriTargets=function(t){var r=e.XList.create();var n=e.PrUtils.getListSize(t,0);for(var i=0;i<n;i++){var a=e.PrUtils.getStructureElement(t,i);if(e.isNull(a)){continue}var o=e.QRriTarget.create();var s=e.PrUtils.getKeysAsReadOnlyListOfString(a,null);if(e.notNull(s)){var l=o.getParameters();for(var u=0;u<s.size();u++){var p=s.get(u);var g=e.PrUtils.getStringProperty(a,p);if(e.notNull(g)){l.put(p,g.getString())}}}var c=e.PrUtils.getStructureProperty(a,"Properties");var m=e.PrUtils.getKeysAsReadOnlyListOfString(c,null);if(e.notNull(m)){var y=o.getCustomProperties();for(var d=0;d<m.size();d++){var A=m.get(d);var I=e.PrUtils.getStringProperty(c,A);if(e.notNull(I)){y.put(A,I.getString())}}}r.add(o)}return r};e.InAQRriTargetsSyncAction.prototype.m_parent=null;e.InAQRriTargetsSyncAction.prototype.m_identifier=null;e.InAQRriTargetsSyncAction.prototype.releaseObject=function(){this.m_parent=null;this.m_identifier=null;e.InAQMgrSyncAction.prototype.releaseObject.call(this)};e.InAQRriTargetsSyncAction.prototype.onFunctionExecuted=function(t,r,n){this.addAllMessages(t);var i=null;if(t.isValid()){i=e.InAQRriTargetsSyncAction.extractRriTargets(e.PrUtils.getListProperty(r.getRootElement(),"RRITargets"))}var a=e.ExtResult.create(i,t);var o=this.m_identifier.getManager();o.setResult(a,this.m_identifier);this.endSync()};e.InAQRriTargetsSyncAction.prototype.callListener=function(e,t,r,n){};e.InAQRriTargetsSyncAction.prototype.processSynchronization=function(t){var r=this.exportRequestJson();var n=this.m_parent.getConnection();var i=n.getSystemConnect().getServerMetadata();var a=i.getMetadataForService(e.ServerService.ANALYTIC);var o=a.getByKey(e.InACapabilities.C032_FAST_PATH);var s;if(e.notNull(o)){s=o.getValue()}else{s=this.m_parent.getSystemType().getInAPath()}var l=n.newRpcFunction(s);var u=l.getRpcRequest();u.setRequestStructure(r);l.processFunctionExecution(t,this,null);return true};e.InAQRriTargetsSyncAction.prototype.exportRequestJson=function(){var t=e.PrFactory.createStructure();var r=this.m_parent.setInnerStructure(t,"Analytics",null);var n=e.QInAExportFactory.createForData(this.m_parent.getApplication(),this.m_parent.getModelCapabilities());var i=this.m_parent.getQueryModel();var a=n.exportQueryModel(i,true,false);r.put("Definition",a);r.put("DataSource",n.exportDataSource(i.getDataSource(),false));r.getStructureByKey("DataSource").putString("Type","Query/RRI");var o=a.putNewStructure("ResultSetFeatureRequest");o.putBoolean("UseDefaultAttributeKey",false);if(this.m_parent.getCapabilitiesBase().supportsEncodedResultset()){o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None")}var s=i.getQueryManager().getRriTargetManager();var l=r.putNewStructure("RRIContext");l.putInteger("Column",s.getResultSetColumn());l.putInteger("Row",s.getResultSetRow());return t};e.InAQueryManagerProvider=function(){};e.InAQueryManagerProvider.prototype=new e.QueryManager;e.InAQueryManagerProvider.prototype._ff_c="InAQueryManagerProvider";e.InAQueryManagerProvider.CLAZZ=null;e.InAQueryManagerProvider.staticSetupProvider=function(){e.InAQueryManagerProvider.CLAZZ=e.XClass.create(e.InAQueryManagerProvider)};e.InAQueryManagerProvider.prototype.m_exportData=null;e.InAQueryManagerProvider.prototype.m_importMetaData=null;e.InAQueryManagerProvider.prototype.m_importer=null;e.InAQueryManagerProvider.prototype.m_isVariableSubmitNeeded=false;e.InAQueryManagerProvider.prototype.m_directVariableTransfer=false;e.InAQueryManagerProvider.prototype.m_deserializationStructure=null;e.InAQueryManagerProvider.prototype.m_inaCapabilities=null;e.InAQueryManagerProvider.prototype.m_inaCapabilitiesValueHelp=null;e.InAQueryManagerProvider.prototype.m_rriTargetManager=null;e.InAQueryManagerProvider.prototype.m_savedStateBeforeVarScreen=null;e.InAQueryManagerProvider.prototype.m_savedMetadataStateBeforeVarScreen=null;e.InAQueryManagerProvider.prototype.m_lastDataRequest=null;e.InAQueryManagerProvider.prototype.m_capabilities=null;e.InAQueryManagerProvider.prototype.m_updateRuntimeCapabilities=false;e.InAQueryManagerProvider.prototype.m_noVariableSubmitResponse=false;e.InAQueryManagerProvider.prototype.m_processingImageRequest=null;e.InAQueryManagerProvider.prototype.m_listOfRequestedResources=null;e.InAQueryManagerProvider.prototype.m_stateManager=null;e.InAQueryManagerProvider.prototype.m_indicateVariableSubmitAndRSRequestBatch=false;e.InAQueryManagerProvider.prototype.m_listenerForQueryModelReady=null;e.InAQueryManagerProvider.prototype.m_applyRepoState=false;e.InAQueryManagerProvider.prototype.m_inaRequestStructure=null;e.InAQueryManagerProvider.prototype.m_recordingQueryManagerState=false;e.InAQueryManagerProvider.prototype.m_applyingQueryManagerState=false;e.InAQueryManagerProvider.prototype.m_valueHelpProvider=null;e.InAQueryManagerProvider.prototype.setupQueryModel=function(){var t=e.QueryManager.prototype.setupQueryModel.call(this);var r=this.getApplication();var n=t.getModelCapabilities();this.m_importMetaData=e.QInAImportFactory.createForMetadata(r,n);this.m_exportData=e.QInAExportFactory.createForData(r,n);return t};e.InAQueryManagerProvider.prototype.isServiceConfigMatching=function(t,r,n){var i;var a=r.getSystemConnect().getServerMetadata();if(e.isNull(a)){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null);i=false}else{var o=t;var s=e.InACapabilitiesProvider.create(r.getSession(),a,o.getProviderType(),null);i=s.getServerMainCapabilities()!==null}return i};e.InAQueryManagerProvider.prototype.newObject=function(){return new e.InAQueryManagerProvider};e.InAQueryManagerProvider.prototype.updateQueryManager=function(t,r){var n=this.getQueryModelBase();var i=t.getQueryModel();var a=e.XHashSetOfString.create();a.addAll(r);e.DimensionUsageAnalyzer2.addDimensionsUsedByLeveledHierarchies(i,a);var o=a.getValuesAsReadOnlyListOfString();this.getDimensionsRequestedFromClient().addAll(r);this.getDimensionsToClone().addAll(o);var s=n.getDimensionManagerBase();for(var l=0;l<o.size();l++){var u=o.get(l);if(n.getDimensionByName(u)===null){var p=i.getDimensionByName(u);if(e.notNull(p)){var g=p.cloneOlapComponent(n,s);n.addDimension(g);var c=n.getAxis(g.getDefaultAxisType());c.add(g);s.finalizeDimensionMetadataSetup(g)}}}this.getQueryServiceConfig().setRequiredDimensions(e.XListOfString.createFromReadOnlyList(this.getDimensionsToClone().getValuesAsReadOnlyListOfString()))};e.InAQueryManagerProvider.prototype.cloneQueryManagerUsingExtDataSource=function(t,r){if(t!==e.QueryCloneMode.MICRO_CUBE){throw e.XException.createIllegalStateException("Cloning query manager using external datasource is supported for MicroCube use only.")}e.XObjectExt.assertNotNullExt(r,"External datasource can't be null.");this.assertLifeCycleActive();var n=new e.InAQueryManagerProvider;n.setupClone(this,t,r);return n};e.InAQueryManagerProvider.prototype.setupDesignTimeMode=function(){this.m_importMetaData=e.QInAImportFactory.createForMetadata(this.getApplication(),this.getModelCapabilities());this.setupQueryModel();var t=this.getQueryModel();e.QInAMdDataSource.importMd(this.m_importMetaData,this.m_inaRequestStructure,t,t);var r=t.getDataSource();if(this.getMode()===e.QueryManagerMode.BLENDING){var n=this.getQueryServiceConfig().getBlendingDefinition();r.setBlendingDefinition(n)}var i=r.clone();this.setDataSource(i);this.getSettingsBase().setDataRequest(null);if(e.notNull(this.m_inaRequestStructure)&&this.m_inaRequestStructure.containsKey("ListReporting")){this.getSettingsBase().setProviderType(e.ProviderType.LIST_REPORTING)}this.activateExperimentalFeatures()};e.InAQueryManagerProvider.prototype.setupValues=function(){e.QueryManager.prototype.setupValues.call(this);this.prepareExperimentalCapabilities();var t=this.getInitSettings();var r=this.getMode()===e.QueryManagerMode.RAW_QUERY&&t.getDataRequest()!==null;this.m_updateRuntimeCapabilities=true;if(!r){this.m_isVariableSubmitNeeded=true}var n=this.getDataSource();if(e.notNull(n)&&n.getType()===e.MetaObjectType.CATALOG_VIEW_2&&!this.getCapabilitiesBase().supportsCatalogServiceV2()){n.setType(e.MetaObjectType.CATALOG_VIEW)}this.setDirectVariableTransferEnabled(true);var i=t.getDefinitionType();if(e.notNull(i)&&i!==e.QModelFormat.UQM){this.m_importer=e.QInAImportFactory.create(this.getApplication(),i,null);this.m_deserializationStructure=t.getDefinitionAsStructure();if(e.notNull(this.m_deserializationStructure)){this.m_inaCapabilities.importDeserializationDocumentCapabilities(this.m_deserializationStructure);if(this.isDataSourceInitial()&&this.getMode().isTypeOf(e.QueryManagerMode.DEFAULT)){this.setDataSource(this.m_importer.importDataSource(this.m_deserializationStructure))}}}if(!r){this.setupQueryModel()}this.m_listOfRequestedResources=e.XListOfString.create();this.resetMaxResultRecords();this.m_stateManager=e.QueryModelStateManager.create(this)};e.InAQueryManagerProvider.prototype.prepareExperimentalCapabilities=function(){var t=this.getConnection().getSystemConnect().getServerMetadata();var r=this.getInitSettings().getProviderType();var n=this.getSession();this.m_inaCapabilities=e.InACapabilitiesProvider.create(n,t,r,null);var i=r.getAssociatedValueHelp();this.m_inaCapabilitiesValueHelp=e.InACapabilitiesProvider.create(n,t,i,null);var a=n.getFeatureToggles();if(this.isShallow()){a=this.extractFeatureTogglesFromRequest()}this.m_inaCapabilities.activateDevCapabilities(a.getKeysAsReadOnlyListOfString())};e.InAQueryManagerProvider.prototype.extractFeatureTogglesFromRequest=function(){var t=e.XSetOfNameObject.create();var r=this.getQueryServiceConfig().getDataRequest();var n=e.InARuntimeUtils.getRequestContext(r);if(e.isNull(n)){var i=r.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(i)){n=i.getStructureAt(i.size()-1).getStructureByKey("Analytics")}}if(e.isNull(n)){return t}var a=n.getListByKey("Capabilities");if(e.isNull(a)){return t}var o=this.getMainCapabilities();var s=a.size();for(var l=0;l<s;l++){var u=a.get(l);if(!o.containsKey(u.getString())){var p=e.FeatureToggleOlap.lookup(u.getString());if(e.notNull(p)){t.add(p)}}}return t};e.InAQueryManagerProvider.prototype.releaseObject=function(){this.m_importMetaData=e.XObjectExt.release(this.m_importMetaData);this.m_importer=e.XObjectExt.release(this.m_importer);this.m_exportData=e.XObjectExt.release(this.m_exportData);this.m_capabilities=e.XObjectExt.release(this.m_capabilities);this.m_lastDataRequest=e.XObjectExt.release(this.m_lastDataRequest);this.m_inaCapabilitiesValueHelp=e.XObjectExt.release(this.m_inaCapabilitiesValueHelp);this.m_rriTargetManager=e.XObjectExt.release(this.m_rriTargetManager);this.m_deserializationStructure=null;this.m_savedStateBeforeVarScreen=null;this.m_savedMetadataStateBeforeVarScreen=null;var t=this.getOlapEnv();if(e.XCollectionUtils.hasElements(this.m_listOfRequestedResources)){for(var r=0;r<this.m_listOfRequestedResources.size();r++){t.releaseResource(this.m_listOfRequestedResources.get(r))}}this.m_listOfRequestedResources=e.XObjectExt.release(this.m_listOfRequestedResources);if(e.notNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=e.XObject.castFromNative(this.m_valueHelpProvider)}e.QueryManager.prototype.releaseObject.call(this);this.m_inaCapabilities=null;this.m_stateManager=e.XObjectExt.release(this.m_stateManager);this.m_listenerForQueryModelReady=null;this.m_inaRequestStructure=e.XObjectExt.release(this.m_inaRequestStructure)};e.InAQueryManagerProvider.prototype.createFunction=function(){var t=this.getSystemDescription();e.XObjectExt.assertNotNullExt(t,"System description is null");var r=this.getMainCapabilities().getByKey(e.InACapabilities.C032_FAST_PATH);var n;if(e.notNull(r)&&r.getValue()!==null){n=r.getValue()}else{n=t.getSystemType().getInAPath()}var i=this.getConnection();if(e.isNull(i)){var a=this.getApplication().getConnectionPool();i=a.getOpenConnection(t.getSystemName())}var o=null;if(e.XStringUtils.isNotNullAndNotEmpty(this.getResourcePath())){o=i.newRpcFunctionForBLOB(this.getResourcePath());o.getRpcRequest().setMethod(e.HttpRequestMethod.HTTP_GET);return o}if(i.isBatchModeEnabled()&&this.getActiveResultSetContainer().isRemotePreQuery()&&this.getPreQueryName()===null&&!e.XCollectionUtils.hasElements(this.getQueryModel().getPreQueries())){o=i.newRpcFunctionForRemotePreQuery(n)}else if(this.m_indicateVariableSubmitAndRSRequestBatch){o=i.newRpcFunction(i.getBatchModePath())}else{o=i.newRpcFunction(n)}var s=o.getRpcRequest();s.setSapPassportTransactionId(this.getInstanceId());s.setMethod(e.HttpRequestMethod.HTTP_POST);s.getProcessingHint().putBoolean(e.ConnectionParameters.CACHE_HINTS_ENABLED,this.getQueryManager().isCacheHintEnabled());return o};e.InAQueryManagerProvider.prototype.collectInAMergeAndBatchFunctions=function(t){this.getActiveResultSetContainerBase().setMergeId(null);var r=this.getConnection();if(e.notNull(r)&&r.isInAMergeProcessingEnabled()&&r.getBatchModePathExt()!==null){var n=t.getRpcRequest().getRequestStructure();var i=this.isValidInAForMergeProcessing(n);if(i){var a=r.getConnectionPool();var o=a.getInAMergeProcessor();if(e.notNull(o)){var s=null;var l=null;var u=this.getSystemType();var p=r.getBatchRequestManager();if(this.isShallow()){var g=e.InAQueryMergeUtils.getInstanceId(n);if(e.notNull(g)){var c=e.PrUtilsJsonPath.getFirstElementFromPath(n,e.InAQueryMergeConstants.PA_DEFINITION_PATH);var m=c.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);var y=e.InARestrictedMeasureUtils.getMeasureStructure(m);s=y.getStructureByKey(e.InAQueryMergeConstants.TAG_MEASURE_METADATA_FOR_PERSISTED_INA);o.addInASourceQuery(g,t,r,u,null,null,s);if(e.notNull(p)){p.removeBatchFunction(t)}}}else{var d=this.getQueryModelBase();var A=d.getMeasureDimension();if(e.notNull(A)){var I=A.getName();if(!o.hasMeasureMembersMetadata(I)){var S=d.getDimensionManagerBase().getDimensionLazyLoader();if(e.notNull(S)){s=S.getInaDimension(I)}}var f=d.getDataSource();var v=f.getFullQualifiedName();if(!o.hasModelMetadata(v)){l=d.getMetadata()}var C=f.getInstanceId();if(e.isNull(C)){C=e.InAQueryMergeUtils.getInstanceId(n);if(e.isNull(C)){C=this.getInstanceId()}}if(e.notNull(C)){o.addInASourceQuery(C,t,r,u,v,l,s);if(e.notNull(p)){p.removeBatchFunction(t)}}}}}}}};e.InAQueryManagerProvider.prototype.isValidInAForMergeProcessing=function(t){var r=false;if(e.notNull(t)){var n=t.getStringRepresentation();var i=e.InAQueryMergeUtils.getQueryType(t);var a=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_ANALYTICS_SERVICE_TYPE_PATH);if(e.notNull(a)&&(e.XString.isEqual(i,e.InAQueryMergeConstants.QY_QUERY)||e.XString.isEqual(i,e.InAQueryMergeConstants.QY_VIEW)||e.XString.isEqual(i,e.InAQueryMergeConstants.QY_PLANNING)||e.XString.isEqual(i,e.InAQueryMergeConstants.QY_QUERY_VALUE_HELP)||e.XString.isEqual(i,e.InAQueryMergeConstants.QY_QUERY_INA_MODEL))&&!e.XString.containsString(n,e.InAQueryMergeConstants.QY_PROCESSING_DIRECTIVES)&&!e.XString.containsString(n,e.InAQueryMergeConstants.QY_PROCESSING_STEP)){r=true}}return r};e.InAQueryManagerProvider.prototype.processProviderShutdown=function(t,r,n){return e.InAQMgrShutdownAction.createAndRun(t,r,n,this)};e.InAQueryManagerProvider.prototype.processProviderCancelThreads=function(t,r,n){if(this.getCapabilitiesBase().supportsCancelRunningQueries()){return e.InAQMgrCancelThreadsAction.createAndRun(t,r,n,this)}return null};e.InAQueryManagerProvider.prototype.processProviderClearCache=function(t,r,n,i){if(this.getCapabilitiesBase().supportsProviderClearCache()){return e.InAQMgrClearCacheAction.createAndRun(t,r,n,this,i)}return null};e.InAQueryManagerProvider.prototype.processInitialization=function(t,r,n){this.setupValues();var i=e.InAQMgrStartupAction.createServiceInitAndRun(t,r,n,this,this);this.setupRuntimeQuery();return i};e.InAQueryManagerProvider.prototype.setupRuntimeQuery=function(){if(this.isForRendering()){var e=this.getInitSettings().getDefinitionAsStructure();this.applyStateOnQueryManager(e)}};e.InAQueryManagerProvider.prototype.isForRendering=function(){var t=this.getInitSettings();return t.getMode()===e.QueryManagerMode.RAW_QUERY&&t.getDefinitionType()===e.QModelFormat.INA_CLONE_RENDERING};e.InAQueryManagerProvider.prototype.processModelInitialization=function(t,r,n){if(this.getMode()===e.QueryManagerMode.RAW_QUERY){this.setMode(e.QueryManagerMode.DEFAULT)}this.getNewResultsetContainer();return e.InAQMgrStartupAction.createMetadataInitAndRun(t,r,n,this,this)};e.InAQueryManagerProvider.prototype.processModelInitializationAndApplyRepoState=function(t,r,n,i){if(this.getSession().hasFeature(e.FeatureToggleOlap.FUSION_SERVICE)){throw e.XException.createRuntimeException("This call is incompatible with fusion. Create a new query service config instead")}this.m_listenerForQueryModelReady=r;this.m_applyRepoState=true;if(this.isShallow()){this.m_importer.mode=e.QModelFormat.INA_REPOSITORY;var a=e.JsonParserFactory.newInstance();this.m_deserializationStructure=a.parse(i);if(a.hasErrors()){throw e.XException.createRuntimeException("Error parsing the Repository state of the QueryModel")}e.XObjectExt.release(a);var o=this.extractInADataSource();if(e.notNull(o)){if(e.XString.isEqual(e.QueryManagerMode.BLENDING.getName(),o.getStringByKey("Type"))){this.considerBlendingFlow(o)}}var s=this.processModelInitialization(t,this,n);return s}var l=this.getQueryModel().deserializeExt(e.QModelFormat.INA_REPOSITORY,i);var u=e.ExtResult.create(this,l);if(e.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(u,this,n)}return e.SyncActionExtRes.createSyncAction(this,u)};e.InAQueryManagerProvider.prototype.extractInADataSource=function(){var t=this.getDataRequest();if(e.isNull(t)){t=this.getQueryServiceConfig().getDataRequest()}var r=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.isNull(r)){this.m_inaRequestStructure=t}else{this.m_inaRequestStructure=r.getStructureAt(r.size()-1)}var n=e.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);if(e.isNull(n)){n=this.m_inaRequestStructure.getStructureByKey("Definition")}return n.getStructureByKey("DataSource")};e.InAQueryManagerProvider.prototype.considerBlendingFlow=function(t){this.setMode(e.QueryManagerMode.BLENDING);var r=e.QFactory.createBlendingDefinition();this.getQueryServiceConfig().setBlendingDefinition(r);var n=t.getListByKey("Sources");if(e.notNull(n)){var i=n.size();for(var a=0;a<i;a++){var o=n.getStructureAt(a);var s=o.getStringByKey("AliasName");var l=e.XStringValue.create(s);var u=o.getStructureByKey("DefiningContext");var p=e.QueryServiceConfig.createWithDataRequest(this.getApplication(),this.getSystemName(),u);var g=p.processQueryManagerCreation(e.SyncType.BLOCKING,null,null);var c=g.getData();var m=null;if(e.notNull(this.m_deserializationStructure)){var y=this.m_deserializationStructure.getStructureByKey("DataSource");if(e.isNull(y)){y=this.m_deserializationStructure.getStructureByKey("Definition").getStructureByKey("DataSource")}var d=y.getListByKey("Sources").getStructureAt(a);var A=d.getStructureByKey("DefiningContext");m=e.PrUtils.serialize(A,true,false,0)}c.processModelInitializationAndApplyRepoState(e.SyncType.BLOCKING,null,l,m);var I=c.getQueryModel();r.addNewSource(I,s)}}var S=t.getListByKey("Mappings");if(e.notNull(S)){var f=S.size();for(var v=0;v<f;v++){var C=S.getStructureAt(v);var N=e.BlendingLinkType.lookup(C.getStringByKey("LinkType"));var E=C.getStringByKey("DimensionName");var M=r.addNewDimensionMapping(N,E);var h=C.getListByKey("Mapping");for(var D=0;D<h.size();D++){var T=h.getStructureAt(D);var Q=T.getStringByKey("AliasName");var R=T.getStructureByKey("MappingDefinition").getStructureByKey("Member").getStringByKey("Name");var _=r.getSources().get(D);M.addNewDimensionMappingDefinition(_.getQueryModel().getDimensionByName(R),Q)}}}};e.InAQueryManagerProvider.prototype.onQueryModelInitialized=function(t,r,n){if(!t.hasErrors()){if(this.m_applyRepoState){this.applyRSFeatureRequest()}if(e.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(t,this,n)}}};e.InAQueryManagerProvider.prototype.applyRSFeatureRequest=function(){var t=e.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);var r=null;if(e.isNull(t)){r=this.m_inaRequestStructure.getStructureByKey("Definition")}else{r=t.getStructureByKey("Definition")}this.importRSFeatureRequest(r)};e.InAQueryManagerProvider.prototype.activateExperimentalFeatures=function(){if(e.notNull(this.m_deserializationStructure)){var t=this.m_deserializationStructure.getStringByKey("ExperimentalFeatures");if(e.XStringUtils.isNotNullAndNotEmpty(t)){var r=e.XStringTokenizer.splitString(t,",");this.m_inaCapabilities.activateDevCapabilities(r)}}};e.InAQueryManagerProvider.prototype.loadQueryModel=function(t,r,n){if(this.isShallow()){return this.processModelInitialization(t,r,n)}if(e.notNull(r)){r.onQueryModelInitialized(this.getQueryServiceConfig(),this,n)}return this.getQueryServiceConfig()};e.InAQueryManagerProvider.prototype.getDataAreas=function(){var t=this.getSystemType();if(!t.isTypeOf(e.SystemType.BW)){return null}var r=this.getQueryModel();if(e.isNull(r)){return null}var n=e.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),r.getDataArea());if(e.isNull(n)){return null}if(n.isSubmitted()){return null}var i=e.PrFactory.createList();i.add(n.serializeToJson());return i};e.InAQueryManagerProvider.prototype.exportDataEntryDescription=function(t){var r=this.getActiveResultSetContainer();if(e.isNull(r)){return}if(!r.hasDataEntryCollection()){return}var n=r.getDataEntryCollection();if(!n.hasChangedDataEntries()){return}var i=n.getDataCellEntryDescription();if(e.XStringUtils.isNullOrEmpty(i)){return}t.putString("ActionDescription",i)};e.InAQueryManagerProvider.prototype.createCustomHierarchyProvider=function(t,r){return e.InACustomHierarchyProvider.create(this,t,r)};e.InAQueryManagerProvider.prototype.createResultSetProvider=function(t,r,n){e.XBooleanUtils.checkTrue(this.getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");return e.InARsEnProvider.create(this,t,r,e.QContextType.RESULT_SET)};e.InAQueryManagerProvider.prototype.setInnerStructure=function(t,r,n){var i=this.getDataAreas();if(e.notNull(i)){t.put("DataAreas",i)}e.QInAOptions.fillOptions(t,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings());var a=t.putNewStructure(r);var o;var s=this.getQueryModel();var l=this.m_recordingQueryManagerState?null:this.m_inaCapabilities.exportActiveCapabilitiesAsList();if(e.XString.isEqual("Metadata",r)){e.QInAMdDataSource.exportMd(this.m_exportData,a,s);a.put("Expand",e.QInAExpand.createExpandMetadata(this))}else{if(e.notNull(s)&&s.hasExplainQueryContext()){var u=a.putNewStructure("ExplainQueryContext");var p=s.getExplainQueryContext();u.putInteger("Row",p.getRowIndex());u.putInteger("Column",p.getColumnIndex())}e.QInAOptions.setRequestTimeZone(t,this);if(this.isPersistedPreQuery()){var g=this.getConnection().getSystemDescription();e.QInADataSourceBlending.updateRemoteDataSource(a,this,true,g);e.XCollectionUtils.removeIf(l,function(t){return e.XString.isEqual(t.asString().getString(),e.InACapabilities.C121_RETURN_ERROR_FOR_INVALID_QUERYMODEL)}.bind(this))}else if(!this.m_recordingQueryManagerState){var c=this.m_exportData.exportDataSource(s.getDataSource(),this.getCapabilitiesBase().supportsRunAsUser());if(this.getProviderType()===e.ProviderType.PLANNING_VALUE_HELP){o=a.putNewStructure("Command")}else{o=a}o.put("DataSource",c)}if(n===e.ProcessingStep.VARIABLE_SUBMIT){a.putIfNotNull("Expand",e.QInAExpand.createExpandSubmit(this,this.m_noVariableSubmitResponse))}}if(e.notNull(l)){a.put("Capabilities",l)}var m=this.getInitSettings().getStartVariables();if(e.XCollectionUtils.hasElements(m)&&m.containsKey("Variables")){a.put("Variables",m.getByKey("Variables"))}e.QInAOptions.setLanguage(a,this);return a};e.InAQueryManagerProvider.prototype.isPersistedPreQuery=function(){return this.getPreQueryName()!==null&&this.getResultSetPersistenceIdentifier()!==null};e.InAQueryManagerProvider.prototype.processRriTargetSync=function(t,r){return e.InAQRriTargetsSyncAction.createAndRun(t,this,r)};e.InAQueryManagerProvider.prototype.getDeserializationStructure=function(){return this.m_deserializationStructure};e.InAQueryManagerProvider.prototype.setDeserializationStructureAsNull=function(){this.m_deserializationStructure=null};e.InAQueryManagerProvider.prototype.getDeserializationImporter=function(){return this.m_importer};e.InAQueryManagerProvider.prototype.getValueHelpProvider=function(){if(e.isNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=e.InAQueryValueHelpProvider.create(this)}return this.m_valueHelpProvider};e.InAQueryManagerProvider.prototype.setValueHelpProvider=function(e){this.m_valueHelpProvider=e};e.InAQueryManagerProvider.prototype.getInaCapabilities=function(){return this.m_inaCapabilities};e.InAQueryManagerProvider.prototype.getProviderTypeProx=function(){return this.getInitSettings().getProviderType()};e.InAQueryManagerProvider.prototype.getResultSetProviderFactory=function(){return this};e.InAQueryManagerProvider.prototype.importVariables=e.noSupport;e.InAQueryManagerProvider.prototype.exportVariables=function(e,t){this.m_exportData.exportVariables(e,t)};e.InAQueryManagerProvider.prototype.assertNotDirectValueTransfer=function(){if(this.isDirectVariableTransferEnabled()){throw e.XException.createIllegalStateException("stateful variable handling cannot be mixed with direct variable transfer")}};e.InAQueryManagerProvider.prototype.processRetrieveVariableRuntimeInformation=function(t,r,n){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunGetRuntimeInfo(this,t,r,n)};e.InAQueryManagerProvider.prototype.processSetGetVariableValues=function(t,r,n){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunSetGetValues(this,t,r,n)};e.InAQueryManagerProvider.prototype.processEmptyVariableDefinition=function(t,r,n){this.assertNotDirectValueTransfer();return e.InAQMgrVarAction.createAndRunEmptyVariableDefinition(this,t,r,n)};e.InAQueryManagerProvider.prototype.processVariableSubmit=function(t,r,n){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,r,n)}return e.InAQMgrVarAction.createAndRunSubmit(this,t,r,n)};e.InAQueryManagerProvider.prototype.processReInitVariableAfterSubmit=function(t,r,n){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,r,n)}return e.InAQMgrVarAction.createAndRunReInitAfterSubmit(this,t,r,n)};e.InAQueryManagerProvider.prototype.processVariableCancel=function(t,r,n){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return e.OlapVarImmediateCallback.createAndRun(t,r,n)}return e.InAQMgrVarAction.createAndRunCancel(this,t,r,n)};e.InAQueryManagerProvider.prototype.processCheckVariables=function(t,r,n){e.XBooleanUtils.checkTrue(this.supportsCheckVariables(),"Check variables is not supported");return e.InAQMgrVarAction.createAndRunCheck(this,t,r,n)};e.InAQueryManagerProvider.prototype.transferVariables=function(e,t,r){return this.processSetGetVariableValues(e,t,r)};e.InAQueryManagerProvider.prototype.emptyVariableDefinition=function(e,t,r){return this.processEmptyVariableDefinition(e,t,r)};e.InAQueryManagerProvider.prototype.transferVariablesByVariable=function(e,t,r,n){if(this.getVariables().contains(e)){return this.processSetGetVariableValues(t,r,n)}return null};e.InAQueryManagerProvider.prototype.getVariablesExporter=function(){return this.m_exportData};e.InAQueryManagerProvider.prototype.getVariablesImporter=function(){return this.m_importMetaData};e.InAQueryManagerProvider.prototype.isVariableValuesRuntimeNeeded=function(){return this.getSystemType().isTypeOf(e.SystemType.BW)};e.InAQueryManagerProvider.prototype.isVariableSubmitNeeded=function(){return this.m_isVariableSubmitNeeded};e.InAQueryManagerProvider.prototype.setIsVariableSubmitNeeded=function(e){this.m_isVariableSubmitNeeded=e};e.InAQueryManagerProvider.prototype.isDirectVariableTransfer=function(){return this.m_directVariableTransfer};e.InAQueryManagerProvider.prototype.setDirectVariableTransfer=function(e){this.m_directVariableTransfer=e};e.InAQueryManagerProvider.prototype.serializeToContentExt=function(t,r){var n;if(t.isTypeOf(e.QModelFormat.INA_REPOSITORY)){n=e.QueryManager.prototype.serializeToContentExt.call(this,t,r)}else{var i=this.getQueryModelBase();i.generateTransientObjects();this.checkRootNodeFetching();var a=e.PrFactory.createStructure();var o=this.getResultSetPersistenceIdentifier()!==null?null:e.QueryModelUtils.getPreQueries(i);if(e.XCollectionUtils.hasElements(o)&&t!==e.QModelFormat.INA_DATA_MERGE_PROCESSING){var s=a.putNewList(e.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(o,s,t);if(t===e.QModelFormat.INA_PERSISTED_QUERY_DATA){s.add(this.fillPersistedQueryDataRequestStructure(true))}else{s.add(this.fillDataRequestStructure(true))}i.destroyTransientObjects()}else{if(i.getDataSource().getType()===e.MetaObjectType.BLENDING){var l=i.getBlendingSources();var u=l.size();var p=null;for(var g=0;g<u;g++){var c=l.get(g);var m=c.getQueryModel().getPreQueries();if(e.XCollectionUtils.hasElements(m)){p=a.putNewList(e.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(m,p,t)}}var y=e.notNull(p);if(y){a.getListByKey(e.ConnectionConstants.INA_BATCH).add(t===e.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true));i.destroyTransientObjects()}else{a=null}}else{a=null}if(e.isNull(a)){a=t===e.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true);i.destroyTransientObjects()}}n=e.XContent.createJsonObjectContent(t,a)}return n};e.InAQueryManagerProvider.prototype.dealWithPreQuery=function(t,r,n){var i=t.size();for(var a=0;a<i;a++){var o=t.get(a);var s=o.getName();var l=o.getObject();l.generateTransientObjects();var u=l.getPreQueries();if(e.XCollectionUtils.hasElements(u)){this.dealWithPreQuery(u,r,n)}var p;if(n===e.QModelFormat.INA_PERSISTED_QUERY_DATA){p=l.getQueryManager().fillPersistedQueryDataRequestStructure(true)}else{p=l.getQueryManager().fillDataRequestStructure(true)}var g=e.InARuntimeUtils.getRequestContext(p);var c=l.getSystemName();if(!e.XString.isEqual(c,this.getSystemName())){var m=g.getStructureByKey("DataSource");m.putString("System",c)}var y=g.getStructureByKey("Definition");y.putString("Name",s);var d=y.getStructureByKey("ResultSetFeatureRequest");d.putBoolean("ReturnEmptyJsonResultSet",true);r.add(p);l.destroyTransientObjects()}};e.InAQueryManagerProvider.prototype.fillDataRequestStructure=function(t){var r=this.getMode();var n=this.getInitSettings();if(r.isTypeOf(e.QueryManagerMode.DEFAULT)||r===e.QueryManagerMode.BLENDING){this.m_lastDataRequest=e.PrFactory.createStructure();var i=n.getProviderType();var a=e.QInAConverter.lookupContextNameForProvider(i);var o=this.getProcessingDirective(i);this.fillAnalyticRequestStructure(this.m_lastDataRequest,a,t,o,null)}else if(r===e.QueryManagerMode.RAW_QUERY){this.m_lastDataRequest=n.getDataRequest();if(this.isUpdatingDataRequestCapabilities()&&this.getApplication().getConnection(this.getSystemName()).supportsAnalyticCapability(e.InACapabilities.V266_RESULTSETV2_METADATA_EXTENSION1)){if(this.m_lastDataRequest.isProxy()){this.m_lastDataRequest=e.PrUtils.deepCopyElement(this.m_lastDataRequest)}e.InARuntimeUtils.setLanguageAndAddRuntimeCapability(this.m_lastDataRequest,this.getSystemDescription().getLanguage());var s=e.InARuntimeUtils.getRequestContext(this.m_lastDataRequest);if(e.notNull(s)){var l=s.getStructureByKey("Definition");var u=l.getStructureByKey("ResultSetFeatureRequest");e.QInAOptions.importPaging(u,this);e.QInAOptions.importSuppressKeyfigureCalculation(u,this)}}else if(!this.isUpdatingDataRequestCapabilities()){var p=this.m_lastDataRequest.getStructureByKey("Analytics");var g=p.getStructureByKey("Definition");var c=g.getStructureByKey("ResultSetFeatureRequest");if(e.isNull(c)){c=g.putNewStructure("ResultSetFeatureRequest");c.putString("ResultEncoding","None");c.putString("ResultFormat","Version2")}e.QInAOptions.exportReturnedDataSelections(c,this);this.updateString(c,"ResultEncoding","None");this.updateString(c,"ResultFormat","Version2");e.QInAOptions.setLanguage(p,this);e.QInAOptions.fillOptions(this.m_lastDataRequest,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings())}this.enableRuntimeVariables();if(!this.getConnection().getConnectionPool().isInAMergeProcessingEnabled(this.getSystemName())){this.m_lastDataRequest=e.InAQueryMergeUtils.cleanTagsFromRequest(this.m_lastDataRequest)}return this.m_lastDataRequest}else{throw e.XException.createIllegalStateException("Unknown mode")}e.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.fillPersistedQueryDataRequestStructure=function(t){this.m_lastDataRequest=e.PrFactory.createStructure();var r=this.getInitSettings().getProviderType();var n=e.QInAConverter.lookupContextNameForProvider(r);var i=this.getProcessingDirective(r);this.fillPersistedQueryAnalyticRequestStructure(this.m_lastDataRequest,n,t,i);e.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.getProcessingDirective=function(t){if(t!==e.ProviderType.PLANNING&&this.getVariableProcessorState()===e.VariableProcessorState.VALUE_HELP){return e.ProcessingStep.VARIABLE_DEFINITION}return null};e.InAQueryManagerProvider.prototype.updateString=function(t,r,n){if(!e.XString.isEqual(t.getStringByKey(r),n)){t.putString(r,n)}};e.InAQueryManagerProvider.prototype.enableRuntimeVariables=function(){if(this.supportsServerState()&&this.getMode()===e.QueryManagerMode.RAW_QUERY){if(this.getModelCapabilities().supportsAutoVariableSubmit()){var t=e.InARuntimeUtils.getRequestContext(this.m_lastDataRequest);if(e.notNull(t)){var r=t.getStructureByKey("DataSource");r.putString("InstanceId",this.getQueryServiceConfig().getInstanceId());var n=t.getStructureByKey("Definition");var i=n.getStructureByKey("ResultSetFeatureRequest");i.putBoolean("IgnoreAutoSubmit",false)}}else if(this.getVariableProcessorState()===e.VariableProcessorState.SUBMITTED){var a=this.m_lastDataRequest.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(a)){this.m_lastDataRequest=a.getStructureAt(1)}}else{this.buildBatchWithVarSubmitReq()}}};e.InAQueryManagerProvider.prototype.buildBatchWithVarSubmitReq=function(){var t=this.m_lastDataRequest.getStructureByKey("Analytics");if(e.isNull(t)){return}var r=t.getStructureByKey("Definition");if(e.isNull(r)){return}var n=e.PrUtils.createDeepCopy(this.m_lastDataRequest);var i=n.getStructureByKey("Analytics").putNewStructure("ProcessingDirectives");i.putString("ProcessingStep","VariableSubmit");var a=e.PrFactory.createStructure();var o=a.putNewList(e.ConnectionConstants.INA_BATCH);o.add(n);o.add(this.m_lastDataRequest);this.m_lastDataRequest=a;this.m_indicateVariableSubmitAndRSRequestBatch=true};e.InAQueryManagerProvider.prototype.recordingStateOfQueryManager=function(){return this.m_recordingQueryManagerState};e.InAQueryManagerProvider.prototype.applyingStateOnQueryManager=function(){return this.m_applyingQueryManagerState};e.InAQueryManagerProvider.prototype.recordStateOfQueryManager=function(e){this.m_recordingQueryManagerState=true;this.fillAnalyticRequestStructure(e,"Analytics",true,null,null);this.fillQueryConfigSettings(e);e.putString("Name",this.getName());this.m_recordingQueryManagerState=false};e.InAQueryManagerProvider.prototype.fillQueryConfigSettings=function(e){var t=this.getQueryServiceConfig();var r=t.serialize();e.put("QueryServiceConfig",r)};e.InAQueryManagerProvider.prototype.applyStateOnQueryManager=function(t){this.m_applyingQueryManagerState=true;var r=e.QModelFormat.INA_REPOSITORY_DATA;if(this.isForRendering()){e.QueryManager.prototype.setupQueryModel.call(this);r=e.QModelFormat.INA_CLONE_RENDERING}var n=this.getQueryModel().deserializeFromElementExt(r,t);this.importQuerySettings(t);this.m_applyingQueryManagerState=false;return n};e.InAQueryManagerProvider.prototype.fillAnalyticRequestStructure=function(t,r,n,i,a){this.addProfileStep("fillAnalyticRequestStructure");var o=this.getResultsetContainer(false);var s=o.getRequest();if(o.getSyncState()===e.SyncState.OUT_OF_SYNC||e.isNull(s)){var l=this.getConnection();var u=e.isNull(l)?false:l.isInAMergeProcessingEnabled();var p=this.getApplication();var g=this.getModelCapabilities();var c=u?e.QInAExportFactory.createForDataMergeProcessing(p,g):e.QInAExportFactory.createForData(p,g);this.exportToInADefinition(t,r,n,i,c,a)}else{t.copyFrom(s,null)}};e.InAQueryManagerProvider.prototype.fillPersistedQueryAnalyticRequestStructure=function(t,r,n,i){this.addProfileStep("fillPersistedQueryAnalyticRequestStructure");var a=e.QInAExportFactory.createForPersistedQueryData(this.getApplication(),this.getModelCapabilities());this.exportToInADefinition(t,r,n,i,a,null)};e.InAQueryManagerProvider.prototype.exportToInADefinition=function(t,r,n,i,a,o){var s=this.getQueryModelBase();var l=this.checkRequestStructureName(r,this.hasNewValues());var u=this.setInnerStructure(t,l,i);a.variableProcessingDirective=i;s.setHasProcessingStep(e.notNull(i));var p=null;if(this.m_recordingQueryManagerState){p=this.getQueryModel().serializeToElement(e.QModelFormat.INA_REPOSITORY_DATA)}else{p=this.exportQueryModelForInARequest(n,this.getMainCapabilities(),s,a)}if(e.isNull(p)){return}p.putStringNotNull("Name",this.getPreQueryName());u.put("Definition",p);if(this.supportsDataEntryReadOnly()){var g=!this.isDataEntryReadOnly();p.putBoolean("InputEnabled",g)}var c=e.PrFactory.createStructure();e.QInAExportUtil.setNameIfNotNull(c,"PlanningMode",this.getPlanningModeEffective());e.QInAVersion.exportPlanningVersions(c,this);this.exportDataEntryDescription(c);e.QInANewValues.exportNewValues(p,c,this);e.QInANewLines.exportNewLines(p,this);e.QInADocumentsIds.exportDocumentsIds(p,this);if(c.hasElements()){p.put("PlanningExtensions",c)}this.addAllMessages(a);this.endProfileStep();if(this.isPersistedPreQuery()){p.put("ResultSetFeatureRequest",e.QInADataSourceBlending.exportResultSetFeatures(s,false))}else{var m=e.QInAOptions.exportOptions(this);e.QInAOptions.exportReturnedDataSelections(m,this);p.put("ResultSetFeatureRequest",m)}if(e.notNull(i)){var y=t.getStructureByKey(l);var d=y.putNewStructure("ProcessingDirectives");d.putString("ProcessingStep",i.getName());if(e.notNull(o)){if(i===e.ProcessingStep.VARIABLE_DEFINITION||i===e.ProcessingStep.VARIANT_DELETE||i===e.ProcessingStep.VARIANT_SAVE){e.QInAVariableVariants.exportVariableVariant(p,o)}}}e.QInAOptions.exportOptimizerHints(p,s);e.QInAClientInfo.exportClientInfo(t,this.getQueryModel(),this.getModelCapabilities().supportsClientInfo())};e.InAQueryManagerProvider.prototype.exportQueryModelForInARequest=function(t,r,n,i){var a=n.getSpatialClusterSettings();if(e.notNull(a)&&a.isActive()){var o=e.QInASpatialClustering.exportSpatialClusteringRequest(this.m_exportData,a);var s=o.getStructureByKey("Analytics");return s.getStructureByKey("Definition")}var l=r.containsKey(e.InACapabilities.C001_DATASOURCE_AT_SERVICE);var u=this.getActiveResultSetContainerBase().getLovConfig();if(e.notNull(u)){return i.exportLovRequest(n,t,!l,u)}return i.exportQueryModel(n,t,!l)};e.InAQueryManagerProvider.prototype.getPlanningModeEffective=function(){if(!this.isDataEntryEnabled()){return null}var t=this.getSystemType();if(!t.isTypeOf(e.SystemType.HANA)){return null}var r=this.getPlanningMode();if(r===e.PlanningMode.SERVER_DEFAULT){return null}if(e.isNull(r)){return e.PlanningMode.DISABLE_PLANNING}return r};e.InAQueryManagerProvider.prototype.checkRequestStructureName=function(t,r){if(!e.XString.isEqual("Analytics",t)){return t}var n=this.getSystemType();if(e.isNull(n)||!n.isTypeOf(e.SystemType.BW)){return t}if(r){return"Planning"}return t};e.InAQueryManagerProvider.prototype.getMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities()};e.InAQueryManagerProvider.prototype.getRriTargetManager=function(){if(e.isNull(this.m_rriTargetManager)&&this.getModelCapabilities().supportsReportReportInterface()){this.m_rriTargetManager=e.QRriTargetManager.create(this)}return this.m_rriTargetManager};e.InAQueryManagerProvider.prototype.getStateBeforeVarScreen=function(){return this.m_savedStateBeforeVarScreen};e.InAQueryManagerProvider.prototype.setStateBeforeVarScreen=function(e){this.m_savedStateBeforeVarScreen=e};e.InAQueryManagerProvider.prototype.getMetadataStateBeforeVarScreen=function(){return this.m_savedMetadataStateBeforeVarScreen};e.InAQueryManagerProvider.prototype.setMetadataStateBeforeVarScreen=function(e){this.m_savedMetadataStateBeforeVarScreen=e};e.InAQueryManagerProvider.prototype.applyValueHelpCapabilities=function(){if(e.notNull(this.m_inaCapabilitiesValueHelp)){this.m_inaCapabilities=this.m_inaCapabilitiesValueHelp;this.m_inaCapabilitiesValueHelp=null;var t=e.QInAImportFactory.createForMetadataCore(this.getApplication(),this.getModelCapabilities());var r=this.getQueryModelBase();t.importBasicQueryModelCapabilities(r)}};e.InAQueryManagerProvider.prototype.getDataRequest=function(){if(e.isNull(this.m_lastDataRequest)&&this.getMode()!==e.QueryManagerMode.RAW_QUERY){this.fillDataRequestStructure(true)}return this.m_lastDataRequest};e.InAQueryManagerProvider.prototype.setActiveResultSetContainer=function(t){if(this.getActiveResultSetContainer()!==t){this.m_lastDataRequest=null;if(e.notNull(t)){e.XObjectExt.release(t.getRequest())}}e.QueryManager.prototype.setActiveResultSetContainer.call(this,t)};e.InAQueryManagerProvider.prototype.getDataRequestAsString=function(){var t=this.getDataRequest();return e.isNull(t)?null:t.toString()};e.InAQueryManagerProvider.prototype.getCapabilitiesBase=function(){if(e.isNull(this.m_capabilities)){this.m_capabilities=this.m_inaCapabilities.getQueryCapabilities()}return this.m_capabilities};e.InAQueryManagerProvider.prototype.getVariableVariantsInternal=function(){var e=this.getOlapEnv().getSystemContainer(this.getSystemName());return e.getVariantsByDatasource(this.getDataSource().getFullQualifiedName())};e.InAQueryManagerProvider.prototype.getVariableVariants=function(){return this.getVariableVariantsInternal()};e.InAQueryManagerProvider.prototype.processActivateVariableVariant=function(t,r,n,i){return e.InAQMgrVarAction.createAndRunVariantActivation(this,t,r,n,i)};e.InAQueryManagerProvider.prototype.processDeleteVariableVariant=function(t,r,n,i){return e.InAQMgrVarAction.createAndRunVariantDeletion(this,t,r,n,i)};e.InAQueryManagerProvider.prototype.processUpdateVariableVariantValues=function(t,r,n,i){return e.InAQMgrVarAction.createAndRunVariantUpdate(this,t,false,r,n,i)};e.InAQueryManagerProvider.prototype.processSaveVariableVariant=function(t,r,n,i){return e.InAQMgrVariantModifyAction.createAndRunModification(this,t,r,n,i)};e.InAQueryManagerProvider.prototype.addVariableVariant=function(e){var t=this.getVariableVariantsInternal();var r=e.getName();if(t.containsKey(r)){t.removeElement(t.getByKey(r))}t.add(e)};e.InAQueryManagerProvider.prototype.removeVariableVariant=function(e){this.getVariableVariantsInternal().removeElement(e)};e.InAQueryManagerProvider.prototype.clearVariableVariants=function(){this.getVariableVariantsInternal().clear()};e.InAQueryManagerProvider.prototype.getVariableVariantByName=function(e){return this.getVariableVariantsInternal().getByKey(e)};e.InAQueryManagerProvider.prototype.activateVariableVariant=function(e,t,r,n){return this.processActivateVariableVariant(e,t,r,n)};e.InAQueryManagerProvider.prototype.deleteVariableVariant=function(t,r,n,i){if(e.isNull(t)||this.getVariableVariantByName(t.getName())===null){return e.OlapVarImmediateCallback.createAndRun(r,n,i)}if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Deleting variants is not supported",r,n,i)}return this.processDeleteVariableVariant(t,r,n,i)};e.InAQueryManagerProvider.prototype.updateVariableVariantValues=function(t,r,n,i){if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Updating variants is not supported",r,n,i)}if(t.getName()===null||t.getScope()===null){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Variant not valid for updating",r,n,i)}return this.processUpdateVariableVariantValues(t,r,n,i)};e.InAQueryManagerProvider.prototype.saveVariableVariant=function(t,r,n,i){if(!this.supportsMaintainsVariableVariants()){return e.OlapVarImmediateCallback.createAndRunError(e.ErrorCodes.INVALID_STATE,"Modifying variants is not supported",r,n,i)}return this.processSaveVariableVariant(t,r,n,i)};e.InAQueryManagerProvider.prototype.getMessageManager=function(){return this};e.InAQueryManagerProvider.prototype.getNewResultsetContainer=function(){return this.getResultsetContainer(true)};e.InAQueryManagerProvider.prototype.isUpdatingDataRequestCapabilities=function(){return this.m_updateRuntimeCapabilities};e.InAQueryManagerProvider.prototype.setUpdatingDataRequestCapabilities=function(e){this.m_updateRuntimeCapabilities=e};e.InAQueryManagerProvider.prototype.isIncludePerformanceNotDefault=function(){return this.m_includePerformanceData!==e.TriStateBool._DEFAULT};e.InAQueryManagerProvider.prototype.setNoVariableSubmitResponse=function(e){this.m_noVariableSubmitResponse=e};e.InAQueryManagerProvider.prototype.updateDynamicVariables=function(e,t,r){this.getConvenienceCommands().updateDynamicVariables(e,t,r)};e.InAQueryManagerProvider.prototype.processUpdateDynamicVariables=function(e,t,r){this.getConvenienceCommands().updateDynamicVariables(e,t,r)};e.InAQueryManagerProvider.prototype.processResetExitOrDynamicVariable=function(e,t,r,n){this.getConvenienceCommands().processResetExitOrDynamicVariable(e,t,r,n)};e.InAQueryManagerProvider.prototype.resetExitOrUpdateDynamicVariable=function(e,t,r,n){this.processResetExitOrDynamicVariable(e,t,r,n)};e.InAQueryManagerProvider.prototype.processBLOB=function(t,r,n,i){if(e.XStringUtils.isNullOrEmpty(i)){var a=e.BLOBContainer.createBLOBContainer(this.getQueryManager(),null);a.addError(e.ErrorCodes.INVALID_FIELD,"No Image path specified");if(e.notNull(r)){r.onBLOBAvailable(a,a,n)}return a}var o=this.getConnection();if(!o.supportsWebServiceForBLOBObjects()){this.getActiveResultSetContainer().addError(e.ErrorCodes.INVALID_SYSTEM,"No Support for retrieving BLOBs.");var s=e.BLOBContainer.createBLOBContainer(this,null);if(e.notNull(r)){r.onBLOBAvailable(s,s,n)}return s}this.m_processingImageRequest=i;if(this.getOlapEnv().hasBLOBForResourceId(i)){var l=e.BLOBContainer.createBLOBContainer(this,null);if(e.notNull(r)){r.onBLOBAvailable(l,l,n)}this.m_processingImageRequest=null;return l}this.m_listOfRequestedResources.add(i);var u=e.BLOBContainer.createBLOBContainer(this,this.createFunction());var p=u.processExecution(t,r,n);this.m_processingImageRequest=null;return p};e.InAQueryManagerProvider.prototype.processUpdateRuntimeBlendQueryFromDependentQueries=function(t,r,n,i){var a=e.RuntimeRemoteBlendingQueryUpdaterAction.create(t,this);return a.processSyncAction(r,n,i)};e.InAQueryManagerProvider.prototype.getResourcePath=function(){return this.m_processingImageRequest};e.InAQueryManagerProvider.prototype.getResourceDetailsFromResourceIdentifier=function(e){if(!this.m_listOfRequestedResources.contains(e)){this.m_listOfRequestedResources.add(e);return this.getOlapEnv().useBLOBDetailsForResourceId(e)}return this.getOlapEnv().getBLOBDetailsForResourceId(e)};e.InAQueryManagerProvider.prototype.recordState=function(){return this.m_stateManager.recordState()};e.InAQueryManagerProvider.prototype.applyState=function(t,r,n,i){return e.InAQMgrApplyStateAction.createAndRun(t,this,r,n,i,this.m_stateManager)};e.InAQueryManagerProvider.prototype.importQuerySettings=function(t){this.importRSFeatureRequest(t);e.QInAOptions.importOptimizerHints(t,this)};e.InAQueryManagerProvider.prototype.importRSFeatureRequest=function(t){var r=t.getStructureByKey("ResultSetFeatureRequest");e.QInAOptions.importPaging(r,this);e.QInAOptions.importSuppressKeyfigureCalculation(r,this);e.QInAOptions.importReturnedDataSelections(r,this)};e.InAQueryManagerProvider.prototype.isApplyingRepoState=function(){return this.m_applyRepoState};e.InAQueryManagerProvider.prototype.getQueryManagerProvider=function(){return this};e.InAQueryManagerProvider.prototype.removeVariable=function(e){this.assertLifeCycleActive();var t=this.getQueryModelBase().getVariableManagerBase();t.removeVariable(e)};e.InAQueryManagerProvider.prototype.clearVariables=function(){this.assertLifeCycleActive();var e=this.getQueryModelBase().getVariableManagerBase();e.clearVariables()};e.InAQueryManagerProvider.prototype.addVariable=function(e){this.assertLifeCycleActive();var t=this.getQueryModelBase().getVariableManagerBase();t.addVariable(e)};e.InAQueryManagerProvider.prototype.getVariableBaseAt=function(e){this.assertLifeCycleActive();var t=this.getQueryModelBase().getVariableManagerBase();return t.getVariableBaseAt(e)};e.InAQueryManagerProvider.prototype.getVariableBaseByName=function(e){this.assertLifeCycleActive();var t=this.getQueryModelBase().getVariableManagerBase();return t.getVariableBaseByName(e)};e.InAQueryManagerProvider.prototype.setVariableProcessorBase=e.noSupport;e.InAQueryManagerProvider.prototype.getVariableProcessorProvider=function(){return this};e.InAQueryManagerProvider.prototype.prepareMergeCandidate=function(){var t=this.serializeToElement(e.QModelFormat.INA_DATA_MERGE_PROCESSING);var r=this.createFunction();var n=r.getRpcRequest();n.setRequestStructure(t);this.collectInAMergeAndBatchFunctions(r);var i=this.getQueryModelBase();i.generateTransientObjects();var a=this.getQueryModel().getPreQueries();e.XStream.of(a).forEach(function(e){var t=e.getObject();var r=t.getQueryManager();r.setResultSetTransportEnabled(false);r.setPreQueryName(e.getName());r.prepareMergeCandidate()}.bind(this));i.destroyTransientObjects()};e.ProviderModule=function(){};e.ProviderModule.prototype=new e.DfModule;e.ProviderModule.prototype._ff_c="ProviderModule";e.ProviderModule.s_module=null;e.ProviderModule.getInstance=function(){if(e.isNull(e.ProviderModule.s_module)){e.DfModule.checkInitialized(e.OlapSerializationModule.getInstance());e.ProviderModule.s_module=e.DfModule.startExt(new e.ProviderModule);var t=e.RegistrationService.getInstance();e.QInA.staticSetup();e.QInAImportFactoryImpl.staticSetupImpl();e.QInAExportFactoryImpl.staticSetupImpl();e.FunctionalValueHelpFactory.setInstance(e.FunctionalValueHelpFactoryImpl.createFactory());e.DocumentsStoreServiceFactory.setInstance(e.DfDocumentsStoreServiceFactoryImpl.createFactory());e.PlanningStateHandler.setInstance(new e.PlanningStateHandlerDummyImpl);e.InAQueryManagerProvider.staticSetupProvider();e.QCsnConverter.staticSetup();e.InADocConverterSfxRepo.staticSetupInAConverter();e.InADocConverterUqmRepo.staticSetupInAConverter();e.InAFusion.staticSetup();e.InAFusionLayer.staticSetup();t.addService(e.OlapApiModule.XS_QUERY_CONSUMER,e.InAQueryManagerProvider.CLAZZ);e.XCmdCreateQueryManager.staticSetup();e.XCmdCreateQueryManagerResult.staticSetup();t.addCommand(e.CmdCreateQueryManager.CMD_NAME,e.XCmdCreateQueryManager.CLAZZ);e.XCmdDeserializeBlending.staticSetup();e.XCmdDeserializeBlendingResult.staticSetup();t.addCommand(e.CmdDeserializeBlending.CMD_NAME,e.XCmdDeserializeBlending.CLAZZ);e.XCmdDeserializeBlendingSources.staticSetup();e.XCmdDeserializeBlendingSourcesResult.staticSetup();t.addCommand(e.CmdDeserializeBlendingSources.CMD_NAME,e.XCmdDeserializeBlendingSources.CLAZZ);e.XCmdDeserializeBlendingNodes.staticSetup();e.XCmdDeserializeBlendingNodesResult.staticSetup();t.addCommand(e.CmdDeserializeBlendingNodes.CMD_NAME,e.XCmdDeserializeBlendingNodes.CLAZZ);e.XCmdDeserializeCalculatedDimension.staticSetup();e.XCmdDeserializeCalculatedDimensionResult.staticSetup();t.addCommand(e.CmdDeserializeCalculatedDimension.CMD_NAME,e.XCmdDeserializeCalculatedDimension.CLAZZ);e.XCmdDeserializeExtendedDimension.staticSetup();e.XCmdDeserializeExtendedDimensionResult.staticSetup();t.addCommand(e.CmdDeserializeExtendedDimension.CMD_NAME,e.XCmdDeserializeExtendedDimension.CLAZZ);e.ProviderModule.addAllComponents();e.QInA.removeEmptyContainers();e.DfModule.stopExt(e.ProviderModule.s_module)}return e.ProviderModule.s_module};e.ProviderModule.addAllComponents=function(){e.QInA.addInAComponent(new e.QCsnMdQuery);e.QInA.addInAComponent(new e.QCsnMdDimensions);e.QInA.addInAComponent(new e.QCsnMdDimension);e.QInA.addInAComponent(new e.QCsnMdDimMembers);e.QInA.addInAComponent(new e.QCsnMdVariables);e.QInA.addInAComponent(new e.QCsnMdVariable);e.QInA.addInAComponent(new e.QInAMdVariableContainer);e.QInA.addInAComponent(new e.QInAMdVarDimMember);e.QInA.addInAComponent(new e.QInAMdVarSimpleType);e.QInA.addInAComponent(new e.QInAMdVarOptionList);e.QInA.addInAComponent(new e.QInAMdVariable);e.QInA.addInAComponent(new e.QInAMdBasicMeasure);e.QInA.addInAComponent(new e.QInAMdField);e.QInA.addInAComponent(new e.QInAMdDimension);e.QInA.addInAComponent(new e.QInAMdSort);e.QInA.addInAComponent(new e.QInAMdDrillManager);e.QInA.addInAComponent(new e.QInAMdExceptionAggregationManager);e.QInA.addInAComponent(new e.QInAMdUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInAMdQuery);e.QInA.addInAComponent(new e.QInAMdGenericComponent);e.QInA.addInAComponent(new e.QInARepoField);e.QInA.addInAComponent(new e.QInARepoTotals);e.QInA.addInAComponent(new e.QInARepoTotalsLegacy);e.QInA.addInAComponent(new e.QInARepoSortOperation);e.QInA.addInAComponent(new e.QInARepoDimension);e.QInA.addInAComponent(new e.QInARepoSort);e.QInA.addInAComponent(new e.QInARepoSortLegacy);e.QInA.addInAComponent(new e.QInARepoFilterCellValueOperand);e.QInA.addInAComponent(new e.QInARepoFilterCellValueOperandLegacy);e.QInA.addInAComponent(new e.QInARepoVarHierNode);e.QInA.addInAComponent(new e.QInARepoVarDimMember);e.QInA.addInAComponent(new e.QInARepoVarDimMemberLegacy);e.QInA.addInAComponent(new e.QInARepoMembersAll);e.QInA.addInAComponent(new e.QInARepoMembersAllLegacy);e.QInA.addInAComponent(new e.QInARepoMemberRestricted);e.QInA.addInAComponent(new e.QInARepoMemberRestrictedLegacy);e.QInA.addInAComponent(new e.QInARepoMemberFormulaMeasure);e.QInA.addInAComponent(new e.QInARepoMemberBasicMeasure);e.QInA.addInAComponent(new e.QInARepoMemberCurrency);e.QInA.addInAComponent(new e.QInARepoMemberRunningTotal);e.QInA.addInAComponent(new e.QInARepoMemberExceptionAggregationMeasure);e.QInA.addInAComponent(new e.QInARepoMemberVarianceMeasure);e.QInA.addInAComponent(new e.QInARepoMemberExceptionAggregationMeasure);e.QInA.addInAComponent(new e.QInARepoMemberAbstract);e.QInA.addInAComponent(new e.QInARepoFilterOperation);e.QInA.addInAComponent(new e.QInARepoFilterOperationLegacy);e.QInA.addInAComponent(new e.QInARepoFilterCartesianList);e.QInA.addInAComponent(new e.QInARepoFilterCartesianListLegacy);e.QInA.addInAComponent(new e.QInARepoFilterConvertedTimeCartesianList);e.QInA.addInAComponent(new e.QInARepoFilterCartesianProduct);e.QInA.addInAComponent(new e.QInARepoFilterMeasureBased);e.QInA.addInAComponent(new e.QInARepoFilterExpression);e.QInA.addInAComponent(new e.QInARepoFilterExpressionLegacy);e.QInA.addInAComponent(new e.QInARepoFilterAlgebra);e.QInA.addInAComponent(new e.QInARepoFilterAlgebraLegacy);e.QInA.addInAComponent(new e.QInARepoFilterTuple);e.QInA.addInAComponent(new e.QInARepoFilterAcrossModels);e.QInA.addInAComponent(new e.QInARepoFilterDynamicTimeRegularRange);e.QInA.addInAComponent(new e.QInARepoFilterDynamicTimeToDateRange);e.QInA.addInAComponent(new e.QInARepoFilterFixedTimeRange);e.QInA.addInAComponent(new e.QInARepoFilterFixed);e.QInA.addInAComponent(new e.QInARepoFilterFixedLegacy);e.QInA.addInAComponent(new e.QInARepoFilterVirtualDatasource);e.QInA.addInAComponent(new e.QInARepoFilterAll);e.QInA.addInAComponent(new e.QInARepoFilterAllLegacy);e.QInA.addInAComponent(new e.QInARepoFilterDynamic);e.QInA.addInAComponent(new e.QInARepoFilterVisibility);e.QInA.addInAComponent(new e.QInARepoFilterGeo);e.QInA.addInAComponent(new e.QInARepoFilterGeoLegacy);e.QInA.addInAComponent(new e.QInARepoFilterElement);e.QInA.addInAComponent(new e.QInARepoFilterManager);e.QInA.addInAComponent(new e.QInARepoFilterManagerLegacy);e.QInA.addInAComponent(new e.QInARepoHierarchy);e.QInA.addInAComponent(new e.QInARepoHierarchyManager);e.QInA.addInAComponent(new e.QInARepoHierarchyLegacy);e.QInA.addInAComponent(new e.QInARepoAxis);e.QInA.addInAComponent(new e.QInARepoAxisLegacy);e.QInA.addInAComponent(new e.QInARepoAxesSettings);e.QInA.addInAComponent(new e.QInARepoAxesSettingsLegacy);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationItem);e.QInA.addInAComponent(new e.QInARepoFormulaCalculatedDimension);e.QInA.addInAComponent(new e.QInARepoFormulaExceptionManager);e.QInA.addInAComponent(new e.QInARepoFormulaException);e.QInA.addInAComponent(new e.QInARepoExceptions);e.QInA.addInAComponent(new e.QInARepoExceptionsLegacy);e.QInA.addInAComponent(new e.QInARepoConditionsThreshold);e.QInA.addInAComponent(new e.QInARepoCellContext);e.QInA.addInAComponent(new e.QInARepoCellContextManager);e.QInA.addInAComponent(new e.QInARepoConditionManager);e.QInA.addInAComponent(new e.QInARepoConditionManagerLegacy);e.QInA.addInAComponent(new e.QInARepoConditionsCondition);e.QInA.addInAComponent(new e.QInARepoConditionsConditionLegacy);e.QInA.addInAComponent(new e.QInARepoUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInARepoQueryCells);e.QInA.addInAComponent(new e.QInARepoModellerDimensions);e.QInA.addInAComponent(new e.QInARepoModellerCurrencyTranslation);e.QInA.addInAComponent(new e.QInARepoModellerVariableManager);e.QInA.addInAComponent(new e.QInARepoModellerMetadataProperties);e.QInA.addInAComponent(new e.QInARepoVarOptionList);e.QInA.addInAComponent(new e.QInARepoVarOptionListLegacy);e.QInA.addInAComponent(new e.QInARepoVariableManager);e.QInA.addInAComponent(new e.QInARepoVariableContainerLegacy);e.QInA.addInAComponent(new e.QInARepoVariablesListLegacy);e.QInA.addInAComponent(new e.QInARepoVarSimpleType);e.QInA.addInAComponent(new e.QInARepoVarSimpleTypeLegacy);e.QInA.addInAComponent(new e.QInARepoDrillManager);e.QInA.addInAComponent(new e.QInARepoDrillManagerLegacy);e.QInA.addInAComponent(new e.QInARepoDrillPathElement);e.QInA.addInAComponent(new e.QInARepoDrillPathElementLegacy);e.QInA.addInAComponent(new e.QInARepoDrillPathOperation);e.QInA.addInAComponent(new e.QInARepoDimensions);e.QInA.addInAComponent(new e.QInARepoDimensionsLegacy);e.QInA.addInAComponent(new e.QInARepoDimensionsAllLegacy);e.QInA.addInAComponent(new e.QInARepoDataCell);e.QInA.addInAComponent(new e.QInARepoCalculatedDimension);e.QInA.addInAComponent(new e.QInARepoDataCellsAll);e.QInA.addInAComponent(new e.QInARepoDataCellsAllLegacy);e.QInA.addInAComponent(new e.QInARepoQuerySettings);e.QInA.addInAComponent(new e.QInARepoQuerySettingsLegacy);e.QInA.addInAComponent(new e.QInaRepoCustomHierarchyDefinition);e.QInA.addInAComponent(new e.QInARepoCustomHierarchyDefinitionLegacy);e.QInA.addInAComponent(new e.QInARepoAttribute);e.QInA.addInAComponent(new e.QInARepoAttributeLegacy);e.QInA.addInAComponent(new e.QInARepoDataSource);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationManager);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationManagerLegacy);e.QInA.addInAComponent(new e.QInARepoCurrencyTranslationList);e.QInA.addInAComponent(new e.QInARepoTranslationsManager);e.QInA.addInAComponent(new e.QInARepoQuery);e.QInA.addInAComponent(new e.QInARepoQueryLegacy);e.QInA.addInAComponent(new e.QInARepoServiceConfig);e.QInA.addInAComponent(new e.QInARepoQueryManager);e.QInA.addInAComponent(new e.QInARepoBlendableQueryManager);e.QInA.addInAComponent(new e.QInARepoVisualizationManager);e.QInA.addInAComponent(new e.QInARepoTableDefinition);e.QInA.addInAComponent(new e.QInARepoChartDefinition);e.QInA.addInAComponent(new e.QInAQuery);e.QInA.addInAComponent(new e.QInADimension);e.QInA.addInAComponent(new e.QInACalculatedDimension);e.QInA.addInAComponent(new e.QInASort);e.QInA.addInAComponent(new e.QInACurrencyTranslationManager);e.QInA.addInAComponent(new e.QInACurrencyTranslationListManager);e.QInA.addInAComponent(new e.QInACurrencyTranslationItem);e.QInA.addInAComponent(new e.QInATranslationsManager);e.QInA.addInAComponent(new e.QInAConditionManager);e.QInA.addInAComponent(new e.QInAConditionsCondition);e.QInA.addInAComponent(new e.QInAConditionsThreshold);e.QInA.addInAComponent(new e.QInADataSource);e.QInA.addInAComponent(new e.QInAQuerySettings);e.QInA.addInAComponent(new e.QInATotals);e.QInA.addInAComponent(new e.QInAAttribute);e.QInA.addInAComponent(new e.QInAAxesSettings);e.QInA.addInAComponent(new e.QInAAxis);e.QInA.addInAComponent(new e.QInADataCell);e.QInA.addInAComponent(new e.QInADataCellsAll);e.QInA.addInAComponent(new e.QInACellContextManager);e.QInA.addInAComponent(new e.QInACellContext);e.QInA.addInAComponent(new e.QInADrillManager);e.QInA.addInAComponent(new e.QInADrillManager);e.QInA.addInAComponent(new e.QInAUniversalDisplayHierarchies);e.QInA.addInAComponent(new e.QInADrillPathElement);e.QInA.addInAComponent(new e.QInADrillPathOperation);e.QInA.addInAComponent(new e.QInAField);e.QInA.addInAComponent(new e.QInAQueryCellsAll);e.QInA.addInAComponent(new e.QInAVariableContainer);e.QInA.addInAComponent(new e.QInAVariablesList);e.QInA.addInAComponent(new e.QInAVarSimpleType);e.QInA.addInAComponent(new e.QInAVarDimMember);e.QInA.addInAComponent(new e.QInAVarOptionList);e.QInA.addInAComponent(new e.QInAVarHierNode);e.QInA.addInAComponent(new e.QInAMember);e.QInA.addInAComponent(new e.QInAMembersAll);e.QInA.addInAComponent(new e.QInAMemberRestrictedMeasure);e.QInA.addInAComponent(new e.QInAMemberBasicMeasure);e.QInA.addInAComponent(new e.QInAMemberFormulaMeasure);e.QInA.addInAComponent(new e.QInAFilterExpression);e.QInA.addInAComponent(new e.QInAFilterCellValueOperand);e.QInA.addInAComponent(new e.QInAFilterTuple);e.QInA.addInAComponent(new e.QInAFilterElement);e.QInA.addInAComponent(new e.QInAFilterAlgebra);e.QInA.addInAComponent(new e.QInAFilterCartesianList);e.QInA.addInAComponent(new e.QInAFilterConvertedTimeCartesianList);e.QInA.addInAComponent(new e.QInAFilterFixed);e.QInA.addInAComponent(new e.QInAFilterDynamic);e.QInA.addInAComponent(new e.QInAFilterVisibility);e.QInA.addInAComponent(new e.QInAValueHelpFilter);e.QInA.addInAComponent(new e.QInAFilterAll);e.QInA.addInAComponent(new e.QInAFilterOperation);e.QInA.addInAComponent(new e.QInAFilterGeo);e.QInA.addInAComponent(new e.QInAFilterCartesianProduct);e.QInA.addInAComponent(new e.QInAFilterVirtualDatasource);e.QInA.addInAComponent(new e.QInAFilterManager);e.QInA.addInAComponent(new e.QInAHierarchyValueHelp);e.QInA.addInAComponent(new e.QInAHierarchy);e.QInA.addInAComponent(new e.QInACustomHierarchyDefinition);e.QInA.addInAComponent(new e.QInADimensionsAll);e.QInA.addInAComponent(new e.QInAExceptions);e.QInA.addInAComponent(new e.QInAGenericComponent)};e.ProviderModule.prototype.getName=function(){return"ff4400.olap.providers"};e.ProviderModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff4400.olap.providers.js.map