/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff1030.kernel.impl"],function(e){"use strict";e.RpcFunctionInaDB=function(){e.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionInaDB"};e.RpcFunctionInaDB.prototype=new e.DfRpcFunction;e.RpcFunctionInaDB.prototype.setupRpcFunction=function(e,t){this.m_name=t;this.setupFunction(e,null)};e.RpcFunctionInaDB.prototype.releaseObject=function(){this.m_name=null;e.DfRpcFunction.prototype.releaseObject.call(this)};e.RpcFunctionInaDB.prototype.getName=function(){return this.m_name};e.RpcFunctionInaDB.prototype.processSynchronization=function(){var t=this.getName();var n;var r;var o;var a;var i=null;var s;var c;var l=$.trace.debug;if(e.XStringUtils.isNullOrEmpty(t)){this.addError(1001," path null");return false}n=this.getRequest();if(n===null){this.addError(1002,"request null");return false}r=this.getResponse();if(r===null){this.addError(1003,"response null");return false}o=n.getRequestStructure();if(o===null){a="{}"}else{a=e.PrUtils.serialize(o,false,false,0)}if(t==="/sap/bc/ina/service/v2/GetServerInfo"){l("Ina-Request:");l(a);i=$.db.ina.getServiceInfo(a);l("Ina-Response:");l(i)}else{if(t==="/sap/bc/ina/service/v2/GetResponse"){l("Ina-Request:");l(a);i=$.db.ina.getResponse(a);l("Ina-Response:");l(i)}else{if(t!=="/sap/hana/xs/formLogin/logout.xscfunc"){this.addError(1004,"illegal path");return false}i=null}}if(e.XStringUtils.isNotNullAndNotEmpty(i)){s=e.JsonParserFactory.newInstance();c=s.parse(i);if(s.hasErrors()){this.addAllMessages(s);return false}else if(c!==null){if(c.getType()!==e.PrElementType.STRUCTURE){this.addError(1005,"wrong json response type");return false}else{r.setRootElement(c)}}}this.setData(r);return false};e.RpcFunctionInaSql=function(){e.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionInaSql"};e.RpcFunctionInaSql.prototype=new e.DfRpcFunction;e.RpcFunctionInaSql.prototype.setupRpcFunction=function(e,t){this.m_name=t;this.setupFunction(e,null)};e.RpcFunctionInaSql.prototype.releaseObject=function(){this.m_name=null;e.DfRpcFunction.prototype.releaseObject.call(this)};e.RpcFunctionInaSql.prototype.getName=function(){return this.m_name};e.RpcFunctionInaSql.prototype.processSynchronization=function(){var t=this.getName();var n;var r;var o;var a;var i;var s;var c;var l;if(e.XStringUtils.isNullOrEmpty(t)){this.addError(1001," path null");return false}n=this.getRequest();if(n===null){this.addError(1002,"request null");return false}r=this.getResponse();if(r===null){this.addError(1003,"response null");return false}c=n.getConnectionInfo().getNativeConnection();if(typeof c.prepareCall!=="function"){this.addError(1004,"Native connection has to be a $.db connection");return false}if(t==="/sap/bc/ina/service/v2/GetServerInfo"){l=c.prepareCall("CALL SYS.EXECUTE_MDS('GetServerInfo', '', '', '', '', '', ?)");l.execute();a=l.getNClob(1)}else if(t==="/sap/bc/ina/service/v2/GetResponse"){var u=n.getRequestType();if(u===e.HttpSemanticRequestType.NONE){this.addError(1005,"No request structure was set");return false}else if(u===e.HttpSemanticRequestType.UNKNOWN){this.addError(1006,"Unknown request type: "+o);return false}else if(u===e.HttpSemanticRequestType.BATCH){u=e.HttpSemanticRequestType.ANALYTICS}o=e.PrUtils.serialize(n.getRequestStructure(),false,false,0);l=c.prepareCall("CALL EXECUTE_MDS('"+u.getName()+"', '', '', '', '', ?, ?)");l.setNClob(1,o);l.execute();a=l.getNClob(2)}else if(t==="/sap/hana/xs/formLogin/logout.xscfunc"){a=null}else{this.addError(1007,"illegal path");return false}if(e.XStringUtils.isNotNullAndNotEmpty(a)){i=e.JsonParserFactory.newInstance();s=i.parse(a);if(i.hasErrors()){this.addAllMessages(i);return false}else if(s!==null){if(s.getType()!==e.PrElementType.STRUCTURE){this.addError(1008,"wrong json response type");return false}else{r.setRootElement(s)}}}this.setData(r);return false};e.RpcFunctionInaServerFactory=function(){e.RpcFunctionFactory.call(this);this._ff_c="RpcFunctionInaServerFactory"};e.RpcFunctionInaServerFactory.prototype=new e.RpcFunctionFactory;e.RpcFunctionInaServerFactory.staticSetup=function(){if(typeof $!=="undefined"&&$.db!==undefined&&$.db.ina!==undefined){var t=new e.RpcFunctionInaServerFactory;e.RpcFunctionFactory.registerFactory(e.ProtocolType.INA_DB,null,t);e.RpcFunctionFactory.registerFactory(e.ProtocolType.INA_SQL,null,t)}};e.RpcFunctionInaServerFactory.prototype.newRpcFunction=function(t,n,r,o){var a=null;if(o===e.ProtocolType.INA_DB){a=new e.RpcFunctionInaDB}else if(o===e.ProtocolType.INA_SQL){a=new e.RpcFunctionInaSql}a.setupRpcFunction(t,n);return a};var t=typeof window!=="undefined"&&window.Promise?window.Promise:null;e.RpcFunctionWasabi=function(){e.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionWasabi"};e.RpcFunctionWasabi.prototype=new e.DfRpcFunction;e.RpcFunctionWasabi.prototype.setupRpcFunction=function(e,t){this.m_name=t;this.setupFunction(e,null)};e.RpcFunctionWasabi.prototype.releaseObject=function(){this.m_name=null;e.DfRpcFunction.prototype.releaseObject.call(this)};e.RpcFunctionWasabi.prototype.getName=function(){return this.m_name};e.RpcFunctionWasabi.prototype.processSynchronization=function(){var n=this.getName();var r;var o;var a;var i;var s;var c;var l=this;function u(t){if(e.XStringUtils.isNotNullAndNotEmpty(t)){s=e.JsonParserFactory.newInstance();c=s.parse(t);if(s.hasErrors()){l.addAllMessages(s);return false}else if(c!==null){if(c.getType()!==e.PrElementType.STRUCTURE){l.addError(1005,"wrong json response type");return false}else{o.setRootElement(c)}}}return null}if(e.XStringUtils.isNullOrEmpty(n)){l.addError(1001," path null");return false}r=l.getRequest();if(r===null){l.addError(1002,"request null");return false}o=l.getResponse();if(o===null){l.addError(1003,"response null");return false}a=r.getRequestStructure();if(a===null){i="{}"}else{i=e.PrUtils.serialize(a,false,false,0)}if(n==="/gsaInfo"){t.resolve(null).then(function(){if(sap.zen&&sap.zen.commons&&sap.zen.commons.getServerInfo){return sap.zen.commons.getServerInfo()}throw new Error("Wasabi is not available")}).then(function(e){u(e);l.setData(o);l.endSync()})["catch"](function(e){l.addError(1005,"exception: "+e.stack);l.endSync()});return true}else if(n==="/gsaIna"){t.resolve(null).then(function(){if(sap.zen&&sap.zen.commons&&sap.zen.commons.getResponse){return sap.zen.commons.getResponse(i)}throw new Error("Wasabi is not available")}).then(function(e){u(e);l.setData(o);l.endSync()})["catch"](function(t){e.XLogger.println(t.message);l.addError(1005,"exception: "+t.stack);l.endSync()})}else{if(sap.zen&&sap.zen.commons&&sap.zen.commons.logoff){sap.zen.commons.logoff()}return false}return true};e.RpcFunctionWasabiFactory=function(){e.RpcFunctionFactory.call(this);this._ff_c="RpcFunctionWasabiFactory"};e.RpcFunctionWasabiFactory.prototype=new e.RpcFunctionFactory;e.RpcFunctionWasabiFactory.staticSetup=function(){if(typeof window!=="undefined"&&window&&window.Promise){var t=new e.RpcFunctionWasabiFactory;e.RpcFunctionFactory.registerFactory(e.ProtocolType.WASABI,null,t)}};e.RpcFunctionWasabiFactory.prototype.newRpcFunction=function(t,n,r,o){var a=null;if(o===e.ProtocolType.WASABI){a=new e.RpcFunctionWasabi}a.setupRpcFunction(t,n);return a};e.NativeModuleLoader=function(){};e.NativeModuleLoader.prototype=new e.XObject;e.NativeModuleLoader.prototype._ff_c="NativeModuleLoader";e.NativeModuleLoader.staticSetup=function(){e.ModuleManager.registerModuleLoader(new e.NativeModuleLoader)};e.NativeModuleLoader.prototype.processModuleLoad=function(t,n,r,o){var a=e.MessageManagerSimple.createMessageManager();var i=typeof window!=="undefined"?window:{};if(typeof i.document!=="undefined"){var s=i.document;var c=s.createElement("script");c.type="text/javascript";c.async=true;c.onload=function(){r.onModuleLoaded(a,n.getName(),true)};var l=n.getResolvedUri(t);var u=e.XUri.createFromOther(l);if(o!==null){u.addQueryElement("v",o)}var p=u.getUrl();c.src=p;s.getElementsByTagName("head")[0].appendChild(c)}else if(!!self&&self instanceof WorkerGlobalScope&&!!self.importScripts){var f=n.getResolvedUri(t);self.importScripts(f.getUrl());r.onModuleLoaded(a,n.getName(),true)}};e.KernelNativeModule=function(){e.DfModule.call(this);this._ff_c="KernelNativeModule"};e.KernelNativeModule.prototype=new e.DfModule;e.KernelNativeModule.s_module=null;e.KernelNativeModule.getInstance=function(){var t=e.KernelNativeModule;if(t.s_module===null){if(e.KernelImplModule.getInstance()===null){throw new Error("Initialization Exception")}t.s_module=e.DfModule.startExt(new e.KernelNativeModule);e.RpcFunctionInaServerFactory.staticSetup();if(!e.XSystemUtils.isXS()){e.RpcFunctionWasabiFactory.staticSetup();e.NativeModuleLoader.staticSetup()}e.DfModule.stopExt(t.s_module)}return t.s_module};e.KernelNativeModule.prototype.getName=function(){return"ff1040.kernel.native"};e.KernelNativeModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff1040.kernel.native.js.map