/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff0060.commons.ext"],function(t){"use strict";t.JsonFilteringSerializerFactory=function(){};t.JsonFilteringSerializerFactory.prototype=new t.XObject;t.JsonFilteringSerializerFactory.prototype._ff_c="JsonFilteringSerializerFactory";t.JsonFilteringSerializerFactory.s_activeFactory=null;t.JsonFilteringSerializerFactory.newFilteringSerializer=function(){return t.JsonFilteringSerializerFactory.s_activeFactory.newInstance()};t.JsonFilteringSerializerFactory.setActiveFactory=function(e){t.JsonFilteringSerializerFactory.s_activeFactory=e};t.JsonFilteringSerializerFactory.staticSetup=function(){t.JsonFilteringSerializerFactory.setActiveFactory(new t.JsonFilteringSerializerFactory)};t.JsonFilteringSerializerFactory.prototype.newInstance=function(){return t.PrUniversalFilteringSerializer.create()};t.JsonParserErrorCode={JSON_PARSER_ROOT_ERROR:2e3,JSON_PARSER_ILLEGAL_STATE:2001};t.JsonParserGenericStackElement=function(){};t.JsonParserGenericStackElement.prototype=new t.XObject;t.JsonParserGenericStackElement.prototype._ff_c="JsonParserGenericStackElement";t.JsonParserGenericStackElement.create=function(){var e=new t.JsonParserGenericStackElement;e.reset();return e};t.JsonParserGenericStackElement.prototype.m_element=null;t.JsonParserGenericStackElement.prototype.m_name=null;t.JsonParserGenericStackElement.prototype.m_valueSet=false;t.JsonParserGenericStackElement.prototype.m_hasElements=false;t.JsonParserGenericStackElement.prototype.m_isPreparedForNextElement=false;t.JsonParserGenericStackElement.prototype.reset=function(){this.m_element=null;this.m_name=null;this.m_valueSet=false;this.m_hasElements=false;this.m_isPreparedForNextElement=false};t.JsonParserGenericStackElement.prototype.getElement=function(){return this.m_element};t.JsonParserGenericStackElement.prototype.setElement=function(t){this.m_element=t};t.JsonParserGenericStackElement.prototype.getName=function(){return this.m_name};t.JsonParserGenericStackElement.prototype.setName=function(t){this.m_name=t};t.JsonParserGenericStackElement.prototype.isNameSet=function(){return t.notNull(this.m_name)};t.JsonParserGenericStackElement.prototype.setValueSet=function(t){this.m_valueSet=t};t.JsonParserGenericStackElement.prototype.isValueSet=function(){return this.m_valueSet};t.JsonParserGenericStackElement.prototype.addElement=function(){if(this.m_hasElements===false){if(this.m_isPreparedForNextElement){return false}this.m_hasElements=true;return true}if(this.m_isPreparedForNextElement===false){return false}this.m_isPreparedForNextElement=false;return true};t.JsonParserGenericStackElement.prototype.nextElement=function(){if(this.m_isPreparedForNextElement){return false}if(this.m_hasElements===false){return false}this.m_isPreparedForNextElement=true;return true};t.JsonParserGenericStackElement.prototype.finishElements=function(){if(this.m_isPreparedForNextElement){return false}return true};t.XJson=function(){};t.XJson.prototype=new t.XObject;t.XJson.prototype._ff_c="XJson";t.XJson.s_extractor=null;t.XJson.extractJsonContent=function(e){var r=null;if(t.notNull(e)){if(t.notNull(t.XJson.s_extractor)){r=t.XJson.s_extractor.extractJsonContent(e)}else{var n=e;r=n.getElement()}}return r};t.XJson.setJsonExtractor=function(e){t.XJson.s_extractor=e};t.XJson.prototype.toString=function(){return this.getElement().toString()};t.PrSerializerFactory=function(){};t.PrSerializerFactory.prototype=new t.XObject;t.PrSerializerFactory.prototype._ff_c="PrSerializerFactory";t.PrSerializerFactory.s_activeFactory=null;t.PrSerializerFactory.newSerializer=function(e,r,n){return t.PrSerializerFactory.s_activeFactory.newInstance(e,r,n)};t.PrSerializerFactory.setActiveFactory=function(e){t.PrSerializerFactory.s_activeFactory=e};t.PrSerializerFactory.staticSetup=function(){t.PrSerializerFactory.setActiveFactory(new t.PrSerializerFactory)};t.PrSerializerFactory.prototype.newInstance=function(e,r,n){return t.PrUniversalSerializer.create(e,r,n)};t.PrFilter=function(){};t.PrFilter.prototype=new t.XObject;t.PrFilter.prototype._ff_c="PrFilter";t.PrFilter.create=function(){return new t.PrFilter};t.PrFilter.addJsonPathElementToMap=function(e,r,n){if(t.isNull(e)){return n}if(t.isNull(r)){return n}var i=n;if(t.isNull(i)){i=t.XHashMapByString.create()}i.put(e,r);return i};t.PrFilter.prototype.m_withStructures=false;t.PrFilter.prototype.m_withLists=false;t.PrFilter.prototype.m_withStrings=false;t.PrFilter.prototype.m_withBooleans=false;t.PrFilter.prototype.m_withNumbers=false;t.PrFilter.prototype.m_withDoubles=false;t.PrFilter.prototype.m_withLongs=false;t.PrFilter.prototype.m_withIntegers=false;t.PrFilter.prototype.m_withNulls=false;t.PrFilter.prototype.withStructures=function(){this.m_withStructures=true;return this};t.PrFilter.prototype.withLists=function(){this.m_withLists=true;return this};t.PrFilter.prototype.withStrings=function(){this.m_withStrings=true;return this};t.PrFilter.prototype.withBooleans=function(){this.m_withBooleans=true;return this};t.PrFilter.prototype.withNumbers=function(){this.m_withNumbers=true;return this};t.PrFilter.prototype.withDoubles=function(){this.m_withDoubles=true;return this};t.PrFilter.prototype.withLongs=function(){this.m_withLongs=true;return this};t.PrFilter.prototype.withIntegers=function(){this.m_withIntegers=true;return this};t.PrFilter.prototype.withNulls=function(){this.m_withNulls=true;return this};t.PrFilter.prototype.filterJsonPathElements=function(e){if(t.isNull(e)||e.size()<1){return null}var r=null;var n=e.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var s=n.get(i);var a=e.getByKey(s);var l=this.getElementFiltered(a);r=t.PrFilter.addJsonPathElementToMap(s,l,r)}return r};t.PrFilter.prototype.getElementFiltered=function(e){if(t.isNull(e)){return null}var r=e.getType();if(t.isNull(r)){return null}if(r===t.PrElementType.STRUCTURE&&this.m_withStructures){return e}if(r===t.PrElementType.LIST&&this.m_withLists){return e}if(r===t.PrElementType.STRING&&this.m_withStrings){return e}if(r===t.PrElementType.BOOLEAN&&this.m_withBooleans){return e}if(r===t.PrElementType.DOUBLE&&(this.m_withDoubles||this.m_withNumbers)){return e}if(r===t.PrElementType.LONG&&(this.m_withLongs||this.m_withNumbers)){return e}if(r===t.PrElementType.INTEGER&&(this.m_withIntegers||this.m_withNumbers)){return e}if(r===t.PrElementType.THE_NULL&&this.m_withNulls){return e}return null};t.PrUniversalFilteringSerializer=function(){};t.PrUniversalFilteringSerializer.prototype=new t.XObject;t.PrUniversalFilteringSerializer.prototype._ff_c="PrUniversalFilteringSerializer";t.PrUniversalFilteringSerializer.create=function(){var e=new t.PrUniversalFilteringSerializer;return e};t.PrUniversalFilteringSerializer.prototype.m_buffer=null;t.PrUniversalFilteringSerializer.prototype.serializeWithFilter=function(e,r){this.m_buffer=t.XStringBuffer.create();this.appendElementBl(e,r);var n=this.m_buffer.toString();this.m_buffer=t.XObjectExt.release(this.m_buffer);return n};t.PrUniversalFilteringSerializer.prototype.appendElementBl=function(e,r){if(t.isNull(e)){this.m_buffer.append("null")}else{var n=e.getType();if(n===t.PrElementType.STRUCTURE){this.appendStructureBl(e,r)}else if(n===t.PrElementType.LIST){this.appendListBl(e,r)}else if(n===t.PrElementType.STRING){var i=e.asString().getString();if(t.isNull(i)){this.m_buffer.append("null")}else{this.m_buffer.append('"');this.m_buffer.append(t.XStringUtils.escapeControlChars(t.XHttpUtils.escapeToJsonString(i)));this.m_buffer.append('"')}}else if(n===t.PrElementType.DOUBLE){this.m_buffer.appendDouble(e.asNumber().getDouble())}else if(n.isNumber()){this.m_buffer.appendLong(e.asNumber().getLong())}else if(n===t.PrElementType.BOOLEAN){this.m_buffer.appendBoolean(e.asBoolean().getBoolean())}else if(n===t.PrElementType.THE_NULL){this.m_buffer.append("null")}}};t.PrUniversalFilteringSerializer.prototype.appendListBl=function(e,r){this.m_buffer.append("[");var n=false;var i=e;var s=i.size();var a=t.isNull(r)?null:r.getListSubFilter();for(var l=0;l<s;l++){if(n){this.m_buffer.append(",")}n=true;var o=i.get(l);if(t.notNull(a)){a.submitIndex(l,o)}this.appendElementBl(o,a)}this.m_buffer.append("]")};t.PrUniversalFilteringSerializer.prototype.appendStructureBl=function(e,r){this.m_buffer.append("{");var n=false;var i=e;var s=i.getKeysAsReadOnlyListOfString();if(t.notNull(s)){var a=s.size();s.sortByDirection(t.XSortDirection.ASCENDING);for(var l=0;l<a;l++){var o=s.get(l);var u=i.getByKey(o);var p=t.isNull(r)?null:r.getSubFilter(o);if(t.notNull(p)&&p.isIgnore(o,u)){continue}if(n){this.m_buffer.append(",")}n=true;this.m_buffer.append('"');this.m_buffer.append(this.escapeQuote(o));this.m_buffer.append('":');this.appendElementBl(u,p)}}this.m_buffer.append("}")};t.PrUniversalFilteringSerializer.prototype.escapeQuote=function(e){return t.XString.containsString(e,'"')?t.XString.replace(e,'"','\\"'):e};t.PrUniversalSerializer=function(){};t.PrUniversalSerializer.prototype=new t.XObject;t.PrUniversalSerializer.prototype._ff_c="PrUniversalSerializer";t.PrUniversalSerializer.create=function(e,r,n){var i=new t.PrUniversalSerializer;i.m_indentation=n;i.m_pretty=r;i.m_sort=e;return i};t.PrUniversalSerializer.prototype.m_sort=false;t.PrUniversalSerializer.prototype.m_pretty=false;t.PrUniversalSerializer.prototype.m_indentation=0;t.PrUniversalSerializer.prototype.m_buffer=null;t.PrUniversalSerializer.prototype.m_indentationLevel=0;t.PrUniversalSerializer.prototype.serialize=function(e){var r=null;if(t.notNull(e)){this.m_buffer=t.XStringBuffer.create();this.appendElement(e,null);r=this.m_buffer.toString();this.m_buffer=t.XObjectExt.release(this.m_buffer)}return r};t.PrUniversalSerializer.prototype.appendElement=function(e,r){if(this.m_pretty){this.appendIndentationString()}if(t.notNull(r)){this.m_buffer.append('"');this.m_buffer.append(this.escape(r));this.m_buffer.append('":');if(this.m_pretty){this.m_buffer.append(" ")}}if(t.isNull(e)){this.m_buffer.append("null")}else{var n=e.getType();if(n===t.PrElementType.STRUCTURE){this.appendStructure(e)}else if(n===t.PrElementType.LIST){this.appendList(e)}else if(n===t.PrElementType.STRING){var i=e.asString().getString();if(t.isNull(i)){this.m_buffer.append("null")}else{this.m_buffer.append('"');this.m_buffer.append(t.XStringUtils.escapeControlChars(t.XHttpUtils.escapeToJsonString(i)));this.m_buffer.append('"')}}else if(n===t.PrElementType.DOUBLE){this.m_buffer.appendDouble(e.asNumber().getDouble())}else if(n.isNumber()){this.m_buffer.appendLong(e.asNumber().getLong())}else if(n===t.PrElementType.BOOLEAN){if(e.getBoolean()){this.m_buffer.append("true")}else{this.m_buffer.append("false")}}else if(n===t.PrElementType.THE_NULL){this.m_buffer.append("null")}}};t.PrUniversalSerializer.prototype.appendList=function(t){this.m_buffer.append("[");var e=false;var r=t;var n=r.size();for(var i=0;i<n;i++){if(e){this.m_buffer.append(",")}e=true;var s=r.get(i);if(this.m_pretty){this.m_buffer.appendNewLine();this.m_indentationLevel++;this.appendElement(s,null);this.m_indentationLevel--}else{this.appendElement(s,null)}}if(this.m_pretty&&e){this.m_buffer.appendNewLine();this.appendIndentationString()}this.m_buffer.append("]")};t.PrUniversalSerializer.prototype.appendStructure=function(e){this.m_buffer.append("{");var r=false;var n=e;var i=n.getKeysAsReadOnlyListOfString();if(t.notNull(i)){var s=i.size();if(this.m_sort&&s>1){i.sortByDirection(t.XSortDirection.ASCENDING)}for(var a=0;a<s;a++){if(r){this.m_buffer.append(",")}r=true;var l=i.get(a);var o=n.getByKey(l);if(this.m_pretty){this.m_buffer.appendNewLine();this.m_indentationLevel++;this.appendElement(o,l);this.m_indentationLevel--}else{this.appendElement(o,l)}}}if(this.m_pretty&&r){this.m_buffer.appendNewLine();this.appendIndentationString()}this.m_buffer.append("}")};t.PrUniversalSerializer.prototype.appendIndentationString=function(){if(this.m_indentation>=1&&this.m_indentationLevel>=1){var t=this.m_indentation*this.m_indentationLevel;for(var e=0;e<t;e++){this.m_buffer.append(" ")}}};t.PrUniversalSerializer.prototype.escape=function(e){var r=e;r=t.XString.replace(r,"\\","\\\\");r=t.XString.replace(r,'"','\\"');r=t.XString.replace(r,"\b","\\b");r=t.XString.replace(r,"\f","\\f");r=t.XString.replace(r,"\n","\\n");r=t.XString.replace(r,"\r","\\r");r=t.XString.replace(r,"\t","\\t");return r};t.PrUtils={asListOfString:function(e){var r=t.XListOfString.create();if(!t.PrUtils.isElementValid(e,t.PrElementType.LIST)){return r}var n=e.size();for(var i=0;i<n;i++){r.add(t.PrUtils.getStringValueElement(e,i,null))}return r},asStructure:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.STRUCTURE)?e:null},asList:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.LIST)?e:null},isListEmpty:function(e){return t.isNull(e)||e.isEmpty()},asString:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.STRING)?e:null},asBoolean:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.BOOLEAN)?e:null},asNumber:function(e){if(!t.PrUtils.isElementValid(e,t.PrElementType.DOUBLE)&&!t.PrUtils.isElementValid(e,t.PrElementType.INTEGER)&&!t.PrUtils.isElementValid(e,t.PrElementType.LONG)){return null}return e.asNumber()},asDouble:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.DOUBLE)?e:null},asInteger:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.INTEGER)?e:null},asLong:function(e){return t.PrUtils.isElementValid(e,t.PrElementType.LONG)?e:null},copyIntegerValues:function(e,r){var n=e.size();var i;if(t.isNull(r)||r.size()!==n){i=t.XArrayOfInt.create(n)}else{i=r}for(var s=0;s<n;s++){i.set(s,e.getIntegerAt(s))}return i},getProperty:function(e,r){if(t.isNull(e)||t.isNull(r)){return null}return e.getByKey(r)},isElementValid:function(e,r){return t.isNull(e)?false:e.getType()===r},getStructureProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.asStructure(n)},getListProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.asList(n)},getPropertyAsList:function(e,r){return t.PrUtils.convertToList(t.PrUtils.getProperty(e,r))},convertToList:function(e){if(t.isNull(e)){return null}if(e.isList()){return e}var r=t.PrFactory.createList();r.add(e);return r},getStringProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToString(n)},getStringValueProperty:function(e,r,n){var i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToStringValue(i,n)},getBooleanProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToBoolean(n)},getBooleanValueProperty:function(e,r,n){var i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToBooleanValue(i,n)},getNumberProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToNumber(n)},getIntegerProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToInteger(n)},getIntegerValueProperty:function(e,r,n){var i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToIntegerValue(i,n)},getDoubleProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToDouble(n)},getDoubleValueProperty:function(e,r,n){var i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToDoubleValue(i,n)},getLongProperty:function(e,r){var n=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToLong(n)},getLongValueProperty:function(e,r,n){var i=t.PrUtils.getProperty(e,r);return t.PrUtils.convertElementToLongValue(i,n)},getDateProperty:function(e,r,n,i){var s=t.PrUtils.getStringProperty(e,r);if(t.isNull(s)){return i}var a=t.XDate.createDateFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},getTimeProperty:function(e,r,n,i){var s=t.PrUtils.getStringProperty(e,r);if(t.isNull(s)){return i}var a=t.XTime.createTimeFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},getDateTimeProperty:function(e,r,n,i){var s=t.PrUtils.getStringProperty(e,r);if(t.isNull(s)){return i}var a=t.XDateTime.createDateTimeFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},getElement:function(e,r){if(t.isNull(e)||r<0||r>=e.size()){return null}return e.get(r)},getStructureElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.asStructure(n)},getListElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.asList(n)},getStringElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToString(n)},getStringValueElement:function(e,r,n){var i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToStringValue(i,n)},getBooleanElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToBoolean(n)},getBooleanValueElement:function(e,r,n){var i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToBooleanValue(i,n)},getNumberElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToNumber(n)},getIntegerElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToInteger(n)},getIntegerValueElement:function(e,r,n){var i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToIntegerValue(i,n)},getDoubleElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToDouble(n)},getDoubleValueElement:function(e,r,n){var i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToDoubleValue(i,n)},getLongElement:function(e,r){var n=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToLong(n)},getLongValueElement:function(e,r,n){var i=t.PrUtils.getElement(e,r);return t.PrUtils.convertElementToLongValue(i,n)},getDateElement:function(e,r,n,i){var s=t.PrUtils.getStringElement(e,r);if(t.isNull(s)){return i}var a=t.XDate.createDateFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},getTimeElement:function(e,r,n,i){var s=t.PrUtils.getStringElement(e,r);if(t.isNull(s)){return i}var a=t.XTime.createTimeFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},getDateTimeElement:function(e,r,n,i){var s=t.PrUtils.getStringElement(e,r);if(t.isNull(s)){return i}var a=t.XDateTime.createDateTimeFromStringWithFlag(s.getString(),n);return t.isNull(a)?i:a},convertIntegerToString:function(e){var r=e;return t.XInteger.convertToString(r.getInteger())},convertDoubleToString:function(e){var r=e;return t.XDouble.convertToString(r.getDouble())},convertLongToString:function(e){var r=e;return t.XLong.convertToString(r.getLong())},convertBoolToString:function(e){var r=e;return t.XBoolean.convertToString(r.getBoolean())},getTypeFromElement:function(e){return t.isNull(e)?null:e.getType()},convertElementToString:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}var n=null;if(r===t.PrElementType.STRING){return e}else if(r===t.PrElementType.BOOLEAN){n=t.PrUtils.convertBoolToString(e)}else if(r===t.PrElementType.INTEGER){n=t.PrUtils.convertIntegerToString(e)}else if(r===t.PrElementType.DOUBLE){n=t.PrUtils.convertDoubleToString(e)}else if(r===t.PrElementType.LONG){n=t.PrUtils.convertLongToString(e)}return t.PrFactory.createString(n)},convertElementToStringValue:function(e,r){if(t.isNull(e)){return r}var n=t.PrUtils.convertElementToString(e);return t.isNull(n)?r:n.getString()},convertElementToBoolean:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}if(r===t.PrElementType.BOOLEAN){return e}if(r===t.PrElementType.STRING){try{var n=t.XBoolean.convertFromString(e.getString());return t.PrFactory.createBoolean(n)}catch(t){return null}}return null},convertElementToBooleanValue:function(e,r){var n=t.PrUtils.convertElementToBoolean(e);return t.isNull(n)?r:n.getBoolean()},convertElementToNumber:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}if(r===t.PrElementType.STRING){try{var n=t.XDouble.convertFromString(e.getString());return t.PrFactory.createDouble(n)}catch(t){return null}}if(r.isNumber()){return e.asNumber()}return null},convertElementToInteger:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}if(r===t.PrElementType.INTEGER){return e}if(r.isNumber()){return t.PrFactory.createInteger(e.asNumber().getInteger())}if(r===t.PrElementType.STRING){try{var n=t.XInteger.convertFromStringWithRadix(e.getString(),10);return t.PrFactory.createInteger(n)}catch(t){return null}}return null},convertElementToIntegerValue:function(e,r){var n=t.PrUtils.convertElementToInteger(e);return t.isNull(n)?r:n.getInteger()},convertElementToLong:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}if(r===t.PrElementType.LONG){return e}if(r.isNumber()){return t.PrFactory.createLong(e.asNumber().getLong())}if(r===t.PrElementType.STRING){try{var n=t.XLong.convertFromString(e.getString());return t.PrFactory.createLong(n)}catch(t){return null}}return null},convertElementToLongValue:function(e,r){var n=t.PrUtils.convertElementToLong(e);return t.isNull(n)?r:n.getLong()},convertElementToDouble:function(e){var r=t.PrUtils.getTypeFromElement(e);if(t.isNull(r)){return null}if(r===t.PrElementType.DOUBLE){return e}if(r.isNumber()){return t.PrFactory.createDouble(e.asNumber().getDouble())}if(r===t.PrElementType.STRING){try{var n=t.XDouble.convertFromString(e.getString());return t.PrFactory.createDouble(n)}catch(t){return null}}return null},convertElementToDoubleValue:function(e,r){var n=t.PrUtils.convertElementToDouble(e);return t.isNull(n)?r:n.getDouble()},getListSize:function(e,r){return t.PrUtils.isElementValid(e,t.PrElementType.LIST)?e.size():r},getKeysAsReadOnlyListOfString:function(e,r){return t.PrUtils.isElementValid(e,t.PrElementType.STRUCTURE)?e.getKeysAsReadOnlyListOfString():r},getStructureSize:function(e,r){var n=t.PrUtils.getKeysAsReadOnlyListOfString(e,null);return t.isNull(n)?r:n.size()},createDeepCopy:function(e){return t.PrUtils.createDeepCopyExt(e,null)},createDeepCopyExt:function(e,r){var n=t.PrUtils.getTypeFromElement(e);if(t.isNull(n)){return null}var i=t.PrElementType.STRUCTURE;var s=t.PrElementType.LIST;var a=t.PrElementType.BOOLEAN;var l=t.PrElementType.STRING;var o=t.PrElementType.INTEGER;var u=t.PrElementType.LONG;var p=t.PrElementType.DOUBLE;var c;var m;if(n===i){var g=e;var y=r;if(t.isNull(y)){y=t.PrFactory.createStructure()}else{y.clear()}var f=g.getKeysAsReadOnlyListOfString();var P=f.size();for(var h=0;h<P;h++){var d=f.get(h);m=g.getByKey(d);c=t.PrUtils.createDeepCopyExt(m,null);y.put(d,c)}return y}else if(n===s){var S=e;var E=r;if(t.isNull(E)){E=t.PrFactory.createList()}else{E.clear()}var v=S.size();for(var T=0;T<v;T++){m=S.get(T);c=t.PrUtils.createDeepCopyExt(m,null);E.add(c)}return E}else if(n===a){var X=e;return t.PrFactory.createBoolean(X.getBoolean())}else if(n===l){var _=e;return t.PrFactory.createString(_.getString())}else if(n===o){var U=e;return t.PrFactory.createInteger(U.getInteger())}else if(n===u){var L=e;return t.PrFactory.createLong(L.getLong())}else if(n===p){var N=e;return t.PrFactory.createDouble(N.getDouble())}return null},removeProperty:function(e,r){if(t.notNull(e)&&t.PrUtils.getProperty(e,r)!==null){return e.remove(r)}return null},createElementDeepCopy:function(e){return t.isNull(e)?null:t.PrUtils.copyElement(e)},copyElement:function(e){if(t.isNull(e)){return null}var r=e.getType();if(t.PrElementType.BOOLEAN===r){return t.PrFactory.createBoolean(e.getBoolean())}else if(t.PrElementType.THE_NULL===r){return null}else if(t.PrElementType.INTEGER===r){return t.PrFactory.createInteger(e.asNumber().getInteger())}else if(t.PrElementType.LONG===r){return t.PrFactory.createLong(e.asNumber().getLong())}else if(t.PrElementType.DOUBLE===r){return t.PrFactory.createDouble(e.asNumber().getDouble())}else if(t.PrElementType.STRING===r){return t.PrFactory.createString(e.getString())}else if(t.PrElementType.STRUCTURE===r){return t.PrUtils.copyStructure(e)}else if(t.PrElementType.LIST===r){return t.PrUtils.copyList(e)}throw t.XException.createIllegalStateException("unknown type")},copyStructure:function(e){var r=t.PrFactory.createStructure();var n=e.getKeysAsReadOnlyListOfString();var i=n.size();for(var s=0;s<i;s++){var a=n.get(s);var l=e.getByKey(a);var o=t.PrUtils.copyElement(l);r.put(a,o)}return r},copyList:function(e){var r=t.PrFactory.createList();var n=e.size();for(var i=0;i<n;i++){var s=e.get(i);var a=t.PrUtils.copyElement(s);r.add(a)}return r},serialize:function(e,r,n,i){var s=t.PrSerializerFactory.newSerializer(r,n,i);return s.serialize(e)},deepCopyElement:function(e){if(t.isNull(e)){return null}var r=e.getType();if(r===t.PrElementType.STRUCTURE){return t.PrStructure.createDeepCopy(e)}else if(r===t.PrElementType.LIST){return t.PrList.createDeepCopy(e)}return e.getPermaCopy()},contains:function(e,r){return t.PrUtils.indexOf(e,r)>-1},indexOf:function(e,r){if(t.PrUtils.isListEmpty(e)){return-1}var n=e.size();for(var i=0;i<n;i++){if(t.XObjectExt.areEqual(e.get(i),r)){return i}}return-1},getStructureWithKeyValuePair:function(e,r,n){if(t.XCollectionUtils.hasElements(e)&&t.XStringUtils.isNotNullAndNotEmpty(r)&&t.XStringUtils.isNotNullAndNotEmpty(n)){var i=e.size();for(var s=0;s<i;s++){var a=e.getStructureAt(s);if(t.XString.isEqual(t.PrUtils.getStringValueProperty(a,r,null),n)){return a}}}return null}};t.PrUtilsJsonPath={getJsonPathTokens:function(e){if(t.XStringUtils.isNullOrEmpty(e)){return null}var r=t.XString.startsWith(e,".");var n=t.XString.endsWith(e,".");var i=e;if(r||n){var s=t.XStringBuffer.create();if(r){s.append("startsWithDot")}s.append(e);if(n){s.append("endsWithDot")}i=s.toString()}var a=t.XStringTokenizer.splitString(i,".");if(t.isNull(a)||a.size()<1){return null}if(r||n){var l=t.XListOfString.create();for(var o=0;o<a.size();o++){if(o===0&&r){continue}if(o+1===a.size()&&n){continue}l.add(a.get(o))}a=l}return a},getJsonPathIndexOperatorTokens:function(e){if(t.XStringUtils.isNullOrEmpty(e)){return null}var r=t.XStringTokenizer.splitString(e,",");if(t.isNull(r)||r.size()<1){return null}return r},getJsonPathSinglePath:function(e){if(t.isNull(e)||e.size()!==1){return null}return e.getKeysAsReadOnlyListOfString().get(0)},getJsonPathSingleElement:function(e){if(t.isNull(e)||e.size()!==1){return null}return e.getByKey(e.getKeysAsReadOnlyListOfString().get(0))},getFirstElementFromPath:function(e,r){return t.PrUtilsJsonPath.getJsonPathSingleElement(t.PrUtilsJsonPath.getJsonPathElements(e,r))},getJsonPathElements:function(e,r){var n=t.PrUtilsJsonPath.getJsonPathTokens(r);var i=t.PrUtilsJsonPath.getJsonPathElementsInternal(e,n,0,null,null);return i},checkJsonPathConstraints:function(e){var r=t.PrUtilsJsonPath.getJsonPathTokens(e);if(t.isNull(r)){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path null",null,false,null)}if(r.isEmpty()){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path must start with $",null,false,null)}var n=false;for(var i=0;i<r.size();i++){var s=r.get(i);if(t.isNull(s)){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not be null",null,false,null)}if(!t.XString.isEqual(s,t.XString.trim(s))){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not contain whitespaces",null,false,null)}var a;var l=t.PrUtilsJsonPath.getJsonPathIndexOperators(s);if(t.isNull(l)){a=s}else{a=t.PrUtilsJsonPath.getJsonPathNode(s)}if(!t.XString.isEqual(a,t.XString.trim(a))){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path token must not contain whitespaces",null,false,null)}if(i===0){if(!t.XString.isEqual(a,"$")){return t.XMessage.createError(t.OriginLayer.UTILITY,"json path must start with $",null,false,null)}}else{if(t.XString.isEqual(a,"$")){return t.XMessage.createError(t.OriginLayer.UTILITY,"$ must only be used at first position",null,false,null)}else if(t.XString.isEqual(s,"")){if(n){return t.XMessage.createError(t.OriginLayer.UTILITY,"... is not valid, instead use .. for recursive search",null,false,null)}n=true}else{n=false}}if(t.notNull(l)){for(var o=0;o<l.size();o++){var u=l.get(o);var p=t.PrUtilsJsonPath.getJsonPathIndexOperatorTokens(u);if(t.isNull(p)){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}for(var c=0;c<p.size();c++){var m=p.get(c);if(t.isNull(m)){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}if(!t.XString.isEqual(m,t.XString.trim(m))){return t.XMessage.createError(t.OriginLayer.UTILITY,"operator must not contain whitespaces",null,false,null)}if(t.XString.isEqual(m,"")){return t.XMessage.createError(t.OriginLayer.UTILITY,"[] empty operator is not valid",null,false,null)}if(t.XString.isEqual(m,"*")){if(c>0){return t.XMessage.createError(t.OriginLayer.UTILITY,"[*] operator is not valid in combination with other operators",null,false,null)}continue}var g=t.PrUtilsJsonPath.getJsonPathIndexOperatorFirst(m);if(g<-1){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",m,"] invalid first operator, valid is 1 to n"),null,false,null)}if(g>0){continue}var y=t.PrUtilsJsonPath.getJsonPathIndexOperatorLast(m);if(y<-1){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",m,"] invalid last operator, valid is -1 to -n"),null,false,null)}if(y>0){continue}var f=t.PrUtilsJsonPath.getJsonPathIndexOperatorNumber(m);if(f<0){return t.XMessage.createError(t.OriginLayer.UTILITY,t.XStringUtils.concatenate3("[",m,"] invalid number, valid is 0 to n"),null,false,null)}}}}}return null},sortJsonPaths:function(e){if(t.isNull(e)||e.size()<1){return null}var r=t.XHashMapByString.create();var n=0;for(var i=0;i<e.size();i++){var s=e.get(i);var a=t.PrUtilsJsonPath.getJsonPathTokens(s);r.put(s,a);var l=a.size();if(l>n){n=l}}var o=t.XArrayOfInt.create(n);for(var u=0;u<e.size();u++){var p=e.get(u);var c=r.getByKey(p);for(var m=0;m<c.size();m++){var g=t.XString.size(c.get(m));if(g>o.get(m)){o.set(m,g)}}}var y=t.XHashMapOfStringByString.create();for(var f=0;f<e.size();f++){var P=e.get(f);var h=r.getByKey(P);var d=t.XStringBuffer.create();for(var S=0;S<h.size();S++){if(S>0){d.append(".")}var E=h.get(S);d.append(E);var v=t.XString.size(E);var T=o.get(S);for(var X=0;X<T-v;X++){d.append(" ")}}y.put(d.toString(),P)}var _=t.XListOfString.createFromReadOnlyList(y.getKeysAsReadOnlyListOfString());_.sortByDirection(t.XSortDirection.ASCENDING);var U=t.XListOfString.create();for(var L=0;L<_.size();L++){var N=_.get(L);var b=y.getByKey(N);U.add(b)}return U},sortJsonPathElements:function(e){if(t.isNull(e)||e.size()<1){return null}var r=t.PrUtilsJsonPath.sortJsonPaths(e.getKeysAsReadOnlyListOfString());var n=t.XList.create();for(var i=0;i<r.size();i++){var s=e.getByKey(r.get(i));n.add(s)}return n},increaseJsonPath:function(e,r,n){var i=t.XStringBuffer.create();if(t.notNull(e)){i.append(e)}if(t.notNull(r)){if(i.length()>0){i.append(".")}i.append(r)}if(n>-1){i.append("[");i.appendInt(n);i.append("]")}if(i.length()===0){return null}return i.toString()},addJsonPathElementsRecursive:function(e,r,n,i){var s=n;var a=t.PrUtils.asStructure(r);if(t.notNull(a)){var l=a.getKeysAsReadOnlyListOfString();if(t.notNull(l)){for(var o=0;o<l.size();o++){var u=l.get(o);var p=a.getByKey(u);if(t.isNull(p)){continue}var c=t.PrUtilsJsonPath.increaseJsonPath(e,u,-1);s=t.PrUtilsJsonPath.addJsonPathElementToMap(c,p,s);if(i){s=t.PrUtilsJsonPath.addJsonPathElementsRecursive(c,p,s,i)}}}}var m=t.PrUtils.asList(r);if(t.notNull(m)){for(var g=0;g<t.PrUtils.getListSize(m,0);g++){var y=t.PrUtils.getElement(m,g);if(t.isNull(y)){continue}var f=t.PrUtilsJsonPath.increaseJsonPath(e,null,g);s=t.PrUtilsJsonPath.addJsonPathElementToMap(f,y,s);if(i){s=t.PrUtilsJsonPath.addJsonPathElementsRecursive(f,y,s,i)}}}return s},getJsonPathElementsInternal:function(e,r,n,i,s){var a=r.size();if(a<=n){return null}var l=r.get(n);var o;var u=t.PrUtilsJsonPath.getJsonPathIndexOperators(l);if(t.isNull(u)){o=l}else{o=t.PrUtilsJsonPath.getJsonPathNode(l)}var p=null;if(t.XString.isEqual(o,"$")){p=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(s,"$",-1),e,p)}else if(t.XString.isEqual(o,"*")){p=t.PrUtilsJsonPath.addJsonPathElementsRecursive(s,e,p,false)}else if(t.XString.isEqual(o,"")){p=t.PrUtilsJsonPath.addJsonPathElementToMap(s,e,p);p=t.PrUtilsJsonPath.addJsonPathElementsRecursive(s,e,p,true)}else{var c=t.PrUtils.getProperty(t.PrUtils.asStructure(e),o);if(t.notNull(c)){p=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(s,o,-1),c,p)}}if(t.notNull(u)){p=t.PrFilter.create().withLists().filterJsonPathElements(p);if(t.notNull(p)){var m=null;var g=p.getKeysAsReadOnlyListOfString();for(var y=0;y<g.size();y++){var f=g.get(y);var P=p.getByKey(f);m=t.PrUtilsJsonPath.resolveJsonPathIndexOperators(f,P,m,u,0)}p=m}}var h=i;if(t.notNull(p)&&p.size()>0){var d=n+1===a;var S=p.getKeysAsReadOnlyListOfString();for(var E=0;E<S.size();E++){var v=S.get(E);var T=p.getByKey(v);if(d){h=t.PrUtilsJsonPath.addJsonPathElementToMap(v,T,h)}else{h=t.PrUtilsJsonPath.getJsonPathElementsInternal(T,r,n+1,h,v)}}}return h},resolveJsonPathIndexOperators:function(e,r,n,i,s){if(t.isNull(r)){return n}if(t.isNull(i)){return n}if(s<0){return n}var a=i.size();if(s>=a){return n}var l=i.get(s);var o=t.PrUtilsJsonPath.getJsonPathIndexOperatorTokens(l);if(t.isNull(o)){return n}var u=null;for(var p=0;p<o.size();p++){var c=o.get(p);if(t.XString.isEqual(c,"*")){u=t.PrUtilsJsonPath.addJsonPathElementsRecursive(e,r,u,false)}else{var m=t.PrUtils.getListSize(r,0);var g=t.PrUtilsJsonPath.getJsonPathIndexOperatorFirst(c);if(g>0){if(g>m){g=m}for(var y=0;y<g;y++){u=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,y),t.PrUtils.getElement(r,y),u)}}else{var f=t.PrUtilsJsonPath.getJsonPathIndexOperatorLast(c);if(f>0){if(f>m){f=m}var P=m-f;for(var h=P;h<f+P;h++){u=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,h),t.PrUtils.getElement(r,h),u)}}else{var d=t.PrUtilsJsonPath.getJsonPathIndexOperatorNumber(c);if(d>-1){u=t.PrUtilsJsonPath.addJsonPathElementToMap(t.PrUtilsJsonPath.increaseJsonPath(e,null,d),t.PrUtils.getElement(r,d),u)}}}}}var S=n;var E=s+1===a;if(!E){u=t.PrFilter.create().withLists().filterJsonPathElements(u)}if(t.notNull(u)){var v=u.getKeysAsReadOnlyListOfString();for(var T=0;T<v.size();T++){var X=v.get(T);var _=u.getByKey(X);if(E){S=t.PrUtilsJsonPath.addJsonPathElementToMap(X,_,S)}else{S=t.PrUtilsJsonPath.resolveJsonPathIndexOperators(X,t.PrUtils.asList(_),S,i,s+1)}}}return S},getJsonPathIndexOperatorLast:function(e){if(t.isNull(e)){return-1}if(!t.XString.endsWith(e,":")){return-1}var r=t.XStringUtils.stripRight(e,1);var n=t.XInteger.convertFromStringWithDefault(r,0);if(n>-1){return-2}return n*-1},getJsonPathIndexOperatorFirst:function(e){if(t.isNull(e)){return-1}if(!t.XString.startsWith(e,":")){return-1}var r=t.XString.substring(e,1,t.XString.size(e));var n=t.XInteger.convertFromStringWithDefault(r,0);if(n<1){return-2}return n},getJsonPathIndexOperatorNumber:function(e){return t.XInteger.convertFromStringWithDefault(e,-1)},getJsonPathNode:function(e){if(t.isNull(e)){return null}if(!t.XString.endsWith(e,"]")){return e}var r=t.XString.indexOf(e,"[");if(r<0){return e}return t.XString.substring(e,0,r)},getJsonPathIndexOperators:function(e){if(t.isNull(e)){return null}if(!t.XString.endsWith(e,"]")){return null}var r=t.XString.indexOf(e,"[");if(r<0){return null}var n=t.XString.substring(e,r+1,t.XString.size(e)-1);return t.XStringTokenizer.splitString(n,"][")},addJsonPathElementToMap:function(e,r,n){if(t.isNull(e)){return n}if(t.isNull(r)){return n}var i=n;if(t.isNull(i)){i=t.XHashMapByString.create()}i.put(e,r);return i}};t.ReplaceTagHandler={charDot:46,handle:function(e,r){var n=r;while(t.XString.containsString(n,"<<")||t.XString.containsString(n,">>")){n=t.ReplaceTagHandler.handleReplaceTags(e,n)}return n},handleReplaceTags:function(e,r){var n=t.XStringBuffer.create();var i=t.XStringTokenizer.splitString(r,"<<");var s=i.size();for(var a=0;a<s;a++){var l=i.get(a);if(t.XStringUtils.isNullOrEmpty(l)){continue}var o=t.XString.indexOf(l,">>");if(o===-1){n.append(l);continue}var u=t.XString.substring(l,0,o);var p=t.ReplaceTagHandler.findTagValue(e,u);if(t.isNull(p)){return null}n.append(p);n.append(t.XString.substring(l,o+2,-1))}return n.toString()},findTagValue:function(e,r){var n=0;var i=t.XString.size(r);while(n<i&&t.XString.getCharAt(r,n)===t.ReplaceTagHandler.charDot){n++}var s=e;for(var a=0;a<n-1;a++){s=s.getParent();if(s.isList()){s=s.getParent()}}var l=t.XString.substring(r,n,-1);return t.PrUtils.convertElementToStringValue(s.asStructure().getByKey(l),null)}};t.TemplateWalker={TEMPLATES:"templates",root:null,walk:function(e){if(!e.containsKey(t.TemplateWalker.TEMPLATES)){return e}var r=t.PrUtils.deepCopyElement(e).asStructure();t.TemplateWalker.root=r;t.TemplateWalker.walkStructure(r);return r},walkStructure:function(e){var r=e.getKeysAsReadOnlyListOfString();var n=r.size();for(var i=0;i<n;i++){var s=r.get(i);var a=e.getByKey(s);if(t.isNull(a)||t.XString.isEqual(s,t.TemplateWalker.TEMPLATES)){continue}var l=a.getType();if(l===t.PrElementType.STRUCTURE){var o=a.asStructure();if(o.containsKey("$ref")){var u=t.PrTemplateStructure.createStructureWrapper(t.TemplateWalker.root,e,o);e.put(s,u)}else{t.TemplateWalker.walkStructure(o)}}else if(l===t.PrElementType.LIST){t.TemplateWalker.walkList(a.asList())}}},walkList:function(e){var r=e.size();for(var n=0;n<r;n++){var i=e.get(n);if(t.isNull(i)){continue}var s=i.getType();if(s===t.PrElementType.STRUCTURE){var a=i.asStructure();if(a.containsKey("$ref")){var l=t.PrTemplateStructure.createStructureWrapper(t.TemplateWalker.root,e,a);e.set(n,l)}else{t.TemplateWalker.walkStructure(a)}}else if(s===t.PrElementType.LIST){t.TemplateWalker.walkList(i.asList())}}}};t.XmlDocumentSerializer=function(){};t.XmlDocumentSerializer.prototype=new t.XObject;t.XmlDocumentSerializer.prototype._ff_c="XmlDocumentSerializer";t.XmlDocumentSerializer.create=function(){var e=new t.XmlDocumentSerializer;e.initialize(false,false,0);return e};t.XmlDocumentSerializer.createSort=function(){var e=new t.XmlDocumentSerializer;e.initialize(true,false,0);return e};t.XmlDocumentSerializer.createPretty=function(e){var r=new t.XmlDocumentSerializer;r.initialize(false,true,e);return r};t.XmlDocumentSerializer.createSortPretty=function(e){var r=new t.XmlDocumentSerializer;r.initialize(true,true,e);return r};t.XmlDocumentSerializer.prototype.m_prettyPrint=false;t.XmlDocumentSerializer.prototype.m_indentation=0;t.XmlDocumentSerializer.prototype.m_sortStructureElements=false;t.XmlDocumentSerializer.prototype.m_buffer=null;t.XmlDocumentSerializer.prototype.isPrettyPrint=function(){return this.m_prettyPrint};t.XmlDocumentSerializer.prototype.setPrettyPrint=function(t){this.m_prettyPrint=t};t.XmlDocumentSerializer.prototype.getIndentation=function(){return this.m_indentation};t.XmlDocumentSerializer.prototype.setIndentation=function(t){this.m_indentation=t};t.XmlDocumentSerializer.prototype.isSortStructureElements=function(){return this.m_sortStructureElements};t.XmlDocumentSerializer.prototype.setSortStructureElements=function(t){this.m_sortStructureElements=t};t.XmlDocumentSerializer.prototype.getBuffer=function(){return this.m_buffer};t.XmlDocumentSerializer.prototype.setBuffer=function(t){this.m_buffer=t};t.XmlDocumentSerializer.prototype.initialize=function(e,r,n){this.setBuffer(t.XStringBuffer.create());this.setSortStructureElements(e);this.setPrettyPrint(r);this.setIndentation(n)};t.XmlDocumentSerializer.prototype.serialize=function(e){this.getBuffer().clear();if(!e.isStructure()){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}var r=e.asStructure();var n=r.getKeysAsReadOnlyListOfString();if(t.isNull(n)){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}var i=t.XStream.ofString(n).filter(function(e){return t.XString.startsWith(e.getString(),"?")}.bind(this)).collect(t.XStreamCollector.toListOfString(function(t){return t.getString()}.bind(this)));var s=t.XStream.ofString(n).filter(function(e){return!t.XString.startsWith(e.getString(),"?")}.bind(this)).collect(t.XStreamCollector.toListOfString(function(t){return t.getString()}.bind(this)));var a=s.size();if(a!==1){throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be at most one root element")}for(var l=0;l<i.size();l++){var o=i.get(l);this.appendPrologElement(r.getStructureByKey(o),o)}var u=s.get(0);var p=r.getByKey(u);if(p.isStructure()){this.appendStructure(p,u,0)}else{throw t.XException.createIllegalArgumentException("INVALID ROOT ELEMENT: Must be Structure")}return this.getBuffer().toString()};t.XmlDocumentSerializer.prototype.appendPrologElement=function(e,r){if(t.notNull(e)){this.getBuffer().append("<").append(r);var n=e.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var s=n.get(i);var a=e.getByKey(s);if(t.XString.startsWith(s,"-")&&(a.isString()||a.isDouble()||a.isBoolean()||a.isNumeric()||a.getType()===t.PrElementType.THE_NULL)){this.appendAttribute(a,t.XString.substring(s,1,t.XString.size(s)))}else{throw t.XException.createIllegalArgumentException("INVALID PROLOG RULE")}}this.getBuffer().append("?>")}else{throw t.XException.createIllegalArgumentException("INVALID PROLOG RULE")}};t.XmlDocumentSerializer.prototype.appendIndentationString=function(t){if(this.getIndentation()>=1&&t>=1){var e=this.getIndentation()*t;for(var r=0;r<e;r++){this.getBuffer().append(" ")}}};t.XmlDocumentSerializer.prototype.appendAttribute=function(e,r){this.getBuffer().append(" ");if(t.isNull(r)){this.getBuffer().append("null")}else{this.getBuffer().append(r)}this.getBuffer().append('="');this.appendTextContent(e,t.XmlUtils.ATTRIBUTE_ESCAPE);this.getBuffer().append('"')};t.XmlDocumentSerializer.prototype.appendElement=function(e,r,n){if(this.isPrettyPrint()){this.appendIndentationString(n)}if(t.isNull(e)){this.getBuffer().append("null")}else{if(e.isStructure()){this.appendStructure(e,r,n)}else if(e.isList()){this.appendList(e,r,n)}else{if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.appendTextContent(e,t.XmlUtils.TEXT_NODE_ESCAPE)}}};t.XmlDocumentSerializer.prototype.appendStructure=function(e,r,n){var i;var s;var a;if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("<");this.getBuffer().append(r);if(e.isString()||e.isDouble()||e.isBoolean()||e.isNumeric()||e.getType()===t.PrElementType.THE_NULL){this.getBuffer().append(">");if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n+1)}this.appendTextContent(e,t.XmlUtils.TEXT_NODE_ESCAPE);if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("</");this.getBuffer().append(r);this.getBuffer().append(">");return}var l=e.asStructure();var o=t.XListOfString.createFromReadOnlyList(l.getKeysAsReadOnlyListOfString());var u=true;if(t.notNull(o)){var p=o.size();if(this.isSortStructureElements()&&p>1){o.sortByDirection(t.XSortDirection.ASCENDING)}for(i=0;i<p;i++){s=o.get(i);a=l.getByKey(s);if(t.XString.startsWith(s,"-")&&(a.isString()||a.isDouble()||a.isBoolean()||a.isNumeric()||a.getType()===t.PrElementType.THE_NULL)){this.appendAttribute(a,t.XString.substring(s,1,t.XString.size(s)))}else{u=false}}if(u){this.getBuffer().append("/")}this.getBuffer().append(">");for(i=0;i<p;i++){s=o.get(i);a=l.getByKey(s);if(t.XString.startsWith(s,"-")&&(a.isString()||a.isDouble()||a.isBoolean()||a.isNumeric()||a.getType()===t.PrElementType.THE_NULL)){continue}this.appendElement(a,s,n+1)}}else{this.getBuffer().append("/");this.getBuffer().append(">")}if(!u){if(this.isPrettyPrint()){this.getBuffer().appendNewLine();this.appendIndentationString(n)}this.getBuffer().append("</");this.getBuffer().append(r);this.getBuffer().append(">")}};t.XmlDocumentSerializer.prototype.appendTextContent=function(e,r){if(e.isString()){var n=e.asString().getString();if(t.isNull(n)){this.getBuffer().append("null")}else{this.getBuffer().append(t.XmlUtils.escapeXml(t.XmlUtils.unescapeJson(n),r))}}else if(e.isDouble()){this.getBuffer().appendDouble(e.asNumber().getDouble())}else if(e.isNumeric()){this.getBuffer().appendLong(e.asNumber().getLong())}else if(e.isBoolean()){if(e.asBoolean().getBoolean()){this.getBuffer().append("true")}else{this.getBuffer().append("false")}}else if(e.getType()===t.PrElementType.THE_NULL){this.getBuffer().append("null")}};t.XmlDocumentSerializer.prototype.appendList=function(t,e,r){var n=t.asList();var i=n.size();for(var s=0;s<i;s++){this.appendStructure(n.get(s),e,r)}};t.XmlDomPrUtil={createDocument:function(){return t.PrFactory.createStructure()},appendChildElementWithTextContent:function(e,r,n){var i=e.getElementTypeByKey(r);var s=null;if(i===t.PrElementType.THE_NULL){s=e.putNewStructure(r)}else if(i===t.PrElementType.LIST){s=e.getListByKey(r).addNewStructure()}else if(i===t.PrElementType.STRUCTURE){var a=e.getStructureByKey(r);var l=e.putNewList(r);l.add(a);s=l.addNewStructure()}if(t.isNull(s)){throw t.XException.createIllegalStateException("Cannot mix element children types")}else if(t.notNull(n)){s.putString(r,n)}return s},appendChildElement:function(e,r){return t.XmlDomPrUtil.appendChildElementWithTextContent(e,r,null)},appendPrologElement:function(e,r){return e.putNewStructure(t.XStringUtils.concatenate2("?",r))},setAttribute:function(e,r,n){e.putString(t.XStringUtils.concatenate2("-",r),n);return e},getAttribute:function(e,r){return e.getStringByKey(t.XStringUtils.concatenate2("-",r))}};t.XmlUtils={QUOT_CHAR:'"',AMP_CHAR:"&",APOS_CHAR:"'",LT_CHAR:"<",GT_CHAR:">",QUOT_ENTITY:"&quot;",AMP_ENTITY:"&amp;",APOS_ENTITY:"&apos;",LT_ENTITY:"&lt;",GT_ENTITY:"&gt;",entityMappings:null,extendedEntityMappings:null,MUST_NOT_ESCAPE:0,TEXT_NODE_ESCAPE:1,ATTRIBUTE_ESCAPE:2,FULL_ESCAPE:3,staticSetup:function(){t.XmlUtils.entityMappings=t.XHashMapOfStringByString.create();t.XmlUtils.extendedEntityMappings=t.XHashMapOfStringByString.create();t.XmlUtils.entityMappings.put("&quot;",'"');t.XmlUtils.entityMappings.put("&apos;","'");t.XmlUtils.entityMappings.put("&amp;","&");t.XmlUtils.entityMappings.put("&lt;","<");t.XmlUtils.entityMappings.put("&gt;",">");t.XmlUtils.extendedEntityMappings.put("&Acirc;","Â");t.XmlUtils.extendedEntityMappings.put("&acirc;","â");t.XmlUtils.extendedEntityMappings.put("&acute;","´");t.XmlUtils.extendedEntityMappings.put("&AElig;","Æ");t.XmlUtils.extendedEntityMappings.put("&aelig;","æ");t.XmlUtils.extendedEntityMappings.put("&Agrave;","À");t.XmlUtils.extendedEntityMappings.put("&agrave;","à");t.XmlUtils.extendedEntityMappings.put("&alefsym;","ℵ");t.XmlUtils.extendedEntityMappings.put("&Alpha;","Α");t.XmlUtils.extendedEntityMappings.put("&alpha;","α");t.XmlUtils.extendedEntityMappings.put("&amp;","&");t.XmlUtils.extendedEntityMappings.put("&and;","∧");t.XmlUtils.extendedEntityMappings.put("&ang;","∠");t.XmlUtils.extendedEntityMappings.put("&apos;","'");t.XmlUtils.extendedEntityMappings.put("&Aring;","Å");t.XmlUtils.extendedEntityMappings.put("&aring;","å");t.XmlUtils.extendedEntityMappings.put("&asymp;","≈");t.XmlUtils.extendedEntityMappings.put("&Atilde;","Ã");t.XmlUtils.extendedEntityMappings.put("&atilde;","ã");t.XmlUtils.extendedEntityMappings.put("&Auml;","Ä");t.XmlUtils.extendedEntityMappings.put("&auml;","ä");t.XmlUtils.extendedEntityMappings.put("&bdquo;","„");t.XmlUtils.extendedEntityMappings.put("&Beta;","Β");t.XmlUtils.extendedEntityMappings.put("&beta;","β");t.XmlUtils.extendedEntityMappings.put("&brvbar;","¦");t.XmlUtils.extendedEntityMappings.put("&bull;","•");t.XmlUtils.extendedEntityMappings.put("&cap;","∩");t.XmlUtils.extendedEntityMappings.put("&Ccedil;","Ç");t.XmlUtils.extendedEntityMappings.put("&ccedil;","ç");t.XmlUtils.extendedEntityMappings.put("&cedil;","¸");t.XmlUtils.extendedEntityMappings.put("&cent;","¢");t.XmlUtils.extendedEntityMappings.put("&Chi;","Χ");t.XmlUtils.extendedEntityMappings.put("&chi;","χ");t.XmlUtils.extendedEntityMappings.put("&circ;","ˆ");t.XmlUtils.extendedEntityMappings.put("&clubs;","♣");t.XmlUtils.extendedEntityMappings.put("&cong;","≅");t.XmlUtils.extendedEntityMappings.put("&copy;","©");t.XmlUtils.extendedEntityMappings.put("&crarr;","↵");t.XmlUtils.extendedEntityMappings.put("&cup;","∪");t.XmlUtils.extendedEntityMappings.put("&curren;","¤");t.XmlUtils.extendedEntityMappings.put("&Dagger;","‡");t.XmlUtils.extendedEntityMappings.put("&dagger;","†");t.XmlUtils.extendedEntityMappings.put("&dArr;","⇓");t.XmlUtils.extendedEntityMappings.put("&darr;","↓");t.XmlUtils.extendedEntityMappings.put("&deg;","°");t.XmlUtils.extendedEntityMappings.put("&Delta;","Δ");t.XmlUtils.extendedEntityMappings.put("&delta;","δ");t.XmlUtils.extendedEntityMappings.put("&diams;","♦");t.XmlUtils.extendedEntityMappings.put("&divide;","÷");t.XmlUtils.extendedEntityMappings.put("&Eacute;","É");t.XmlUtils.extendedEntityMappings.put("&eacute;","é");t.XmlUtils.extendedEntityMappings.put("&Ecirc;","Ê");t.XmlUtils.extendedEntityMappings.put("&ecirc;","ê");t.XmlUtils.extendedEntityMappings.put("&Egrave;","È");t.XmlUtils.extendedEntityMappings.put("&egrave;","è");t.XmlUtils.extendedEntityMappings.put("&empty;","∅");t.XmlUtils.extendedEntityMappings.put("&emsp;"," ");t.XmlUtils.extendedEntityMappings.put("&ensp;"," ");t.XmlUtils.extendedEntityMappings.put("&Epsilon;","Ε");t.XmlUtils.extendedEntityMappings.put("&epsilon;","ε");t.XmlUtils.extendedEntityMappings.put("&equiv;","≡");t.XmlUtils.extendedEntityMappings.put("&Eta;","Η");t.XmlUtils.extendedEntityMappings.put("&eta;","η");t.XmlUtils.extendedEntityMappings.put("&ETH;","Ð");t.XmlUtils.extendedEntityMappings.put("&eth;","ð");t.XmlUtils.extendedEntityMappings.put("&Euml;","Ë");t.XmlUtils.extendedEntityMappings.put("&euml;","ë");t.XmlUtils.extendedEntityMappings.put("&euro;","€");t.XmlUtils.extendedEntityMappings.put("&exist;","∃");t.XmlUtils.extendedEntityMappings.put("&fnof;","ƒ");t.XmlUtils.extendedEntityMappings.put("&forall;","∀");t.XmlUtils.extendedEntityMappings.put("&frac12;","½");t.XmlUtils.extendedEntityMappings.put("&frac14;","¼");t.XmlUtils.extendedEntityMappings.put("&frac34;","¾");t.XmlUtils.extendedEntityMappings.put("&frasl;","⁄");t.XmlUtils.extendedEntityMappings.put("&Gamma;","Γ");t.XmlUtils.extendedEntityMappings.put("&gamma;","γ");t.XmlUtils.extendedEntityMappings.put("&ge;","≥");t.XmlUtils.extendedEntityMappings.put("&gt;",">");t.XmlUtils.extendedEntityMappings.put("&hArr;","⇔");t.XmlUtils.extendedEntityMappings.put("&harr;","↔");t.XmlUtils.extendedEntityMappings.put("&hearts;","♥");t.XmlUtils.extendedEntityMappings.put("&hellip;","…");t.XmlUtils.extendedEntityMappings.put("&Iacute;","Í");t.XmlUtils.extendedEntityMappings.put("&iacute;","í");t.XmlUtils.extendedEntityMappings.put("&Icirc;","Î");t.XmlUtils.extendedEntityMappings.put("&icirc;","î");t.XmlUtils.extendedEntityMappings.put("&iexcl;","¡");t.XmlUtils.extendedEntityMappings.put("&Igrave;","Ì");t.XmlUtils.extendedEntityMappings.put("&igrave;","ì");t.XmlUtils.extendedEntityMappings.put("&image;","ℑ");t.XmlUtils.extendedEntityMappings.put("&infin;","∞");t.XmlUtils.extendedEntityMappings.put("&int;","∫");t.XmlUtils.extendedEntityMappings.put("&Iota;","Ι");t.XmlUtils.extendedEntityMappings.put("&iota;","ι");t.XmlUtils.extendedEntityMappings.put("&iquest;","¿");t.XmlUtils.extendedEntityMappings.put("&isin;","∈");t.XmlUtils.extendedEntityMappings.put("&Iuml;","Ï");t.XmlUtils.extendedEntityMappings.put("&iuml;","ï");t.XmlUtils.extendedEntityMappings.put("&Kappa;","Κ");t.XmlUtils.extendedEntityMappings.put("&kappa;","κ");t.XmlUtils.extendedEntityMappings.put("&Lambda;","Λ");t.XmlUtils.extendedEntityMappings.put("&lambda;","λ");t.XmlUtils.extendedEntityMappings.put("&lang;","⟨");t.XmlUtils.extendedEntityMappings.put("&laquo;","«");t.XmlUtils.extendedEntityMappings.put("&lArr;","⇐");t.XmlUtils.extendedEntityMappings.put("&larr;","←");t.XmlUtils.extendedEntityMappings.put("&lceil;","⌈");t.XmlUtils.extendedEntityMappings.put("&ldquo;","“");t.XmlUtils.extendedEntityMappings.put("&le;","≤");t.XmlUtils.extendedEntityMappings.put("&lfloor;","⌊");t.XmlUtils.extendedEntityMappings.put("&lowast;","∗");t.XmlUtils.extendedEntityMappings.put("&loz;","◊");t.XmlUtils.extendedEntityMappings.put("&lsaquo;","‹");t.XmlUtils.extendedEntityMappings.put("&lsquo;","‘");t.XmlUtils.extendedEntityMappings.put("&lt;","<");t.XmlUtils.extendedEntityMappings.put("&macr;","¯");t.XmlUtils.extendedEntityMappings.put("&mdash;","—");t.XmlUtils.extendedEntityMappings.put("&micro;","µ");t.XmlUtils.extendedEntityMappings.put("&middot;","·");t.XmlUtils.extendedEntityMappings.put("&minus;","−");t.XmlUtils.extendedEntityMappings.put("&Mu;","Μ");t.XmlUtils.extendedEntityMappings.put("&mu;","μ");t.XmlUtils.extendedEntityMappings.put("&nabla;","∇");t.XmlUtils.extendedEntityMappings.put("&nbsp;"," ");t.XmlUtils.extendedEntityMappings.put("&ndash;","–");t.XmlUtils.extendedEntityMappings.put("&ne;","≠");t.XmlUtils.extendedEntityMappings.put("&ni;","∋");t.XmlUtils.extendedEntityMappings.put("&not;","¬");t.XmlUtils.extendedEntityMappings.put("&notin;","∉");t.XmlUtils.extendedEntityMappings.put("&nsub;","⊄");t.XmlUtils.extendedEntityMappings.put("&Ntilde;","Ñ");t.XmlUtils.extendedEntityMappings.put("&ntilde;","ñ");t.XmlUtils.extendedEntityMappings.put("&Nu;","Ν");t.XmlUtils.extendedEntityMappings.put("&nu;","ν");t.XmlUtils.extendedEntityMappings.put("&Oacute;","Ó");t.XmlUtils.extendedEntityMappings.put("&oacute;","ó");t.XmlUtils.extendedEntityMappings.put("&Ocirc;","Ô");t.XmlUtils.extendedEntityMappings.put("&ocirc;","ô");t.XmlUtils.extendedEntityMappings.put("&OElig;","Œ");t.XmlUtils.extendedEntityMappings.put("&oelig;","œ");t.XmlUtils.extendedEntityMappings.put("&Ograve;","Ò");t.XmlUtils.extendedEntityMappings.put("&ograve;","ò");t.XmlUtils.extendedEntityMappings.put("&oline;","‾");t.XmlUtils.extendedEntityMappings.put("&Omega;","Ω");t.XmlUtils.extendedEntityMappings.put("&omega;","ω");t.XmlUtils.extendedEntityMappings.put("&Omicron;","Ο");t.XmlUtils.extendedEntityMappings.put("&omicron;","ο");t.XmlUtils.extendedEntityMappings.put("&oplus;","⊕");t.XmlUtils.extendedEntityMappings.put("&or;","∨");t.XmlUtils.extendedEntityMappings.put("&ordf;","ª");t.XmlUtils.extendedEntityMappings.put("&ordm;","º");t.XmlUtils.extendedEntityMappings.put("&Oslash;","Ø");t.XmlUtils.extendedEntityMappings.put("&oslash;","ø");t.XmlUtils.extendedEntityMappings.put("&Otilde;","Õ");t.XmlUtils.extendedEntityMappings.put("&otilde;","õ");t.XmlUtils.extendedEntityMappings.put("&otimes;","⊗");t.XmlUtils.extendedEntityMappings.put("&Ouml;","Ö");t.XmlUtils.extendedEntityMappings.put("&ouml;","ö");t.XmlUtils.extendedEntityMappings.put("&para;","¶");t.XmlUtils.extendedEntityMappings.put("&part;","∂");t.XmlUtils.extendedEntityMappings.put("&permil;","‰");t.XmlUtils.extendedEntityMappings.put("&perp;","⊥");t.XmlUtils.extendedEntityMappings.put("&Phi;","Φ");t.XmlUtils.extendedEntityMappings.put("&phi;","φ");t.XmlUtils.extendedEntityMappings.put("&Pi;","Π");t.XmlUtils.extendedEntityMappings.put("&pi;","π");t.XmlUtils.extendedEntityMappings.put("&piv;","ϖ");t.XmlUtils.extendedEntityMappings.put("&plusmn;","±");t.XmlUtils.extendedEntityMappings.put("&pound;","£");t.XmlUtils.extendedEntityMappings.put("&Prime;","″");t.XmlUtils.extendedEntityMappings.put("&prime;","′");t.XmlUtils.extendedEntityMappings.put("&prod;","∏");t.XmlUtils.extendedEntityMappings.put("&prop;","∝");t.XmlUtils.extendedEntityMappings.put("&Psi;","Ψ");t.XmlUtils.extendedEntityMappings.put("&psi;","ψ");t.XmlUtils.extendedEntityMappings.put("&quot;",'"');t.XmlUtils.extendedEntityMappings.put("&radic;","√");t.XmlUtils.extendedEntityMappings.put("&rang;","⟩");t.XmlUtils.extendedEntityMappings.put("&raquo;","»");t.XmlUtils.extendedEntityMappings.put("&rArr;","⇒");t.XmlUtils.extendedEntityMappings.put("&rarr;","→");t.XmlUtils.extendedEntityMappings.put("&rceil;","⌉");t.XmlUtils.extendedEntityMappings.put("&rdquo;","”");t.XmlUtils.extendedEntityMappings.put("&real;","ℜ");t.XmlUtils.extendedEntityMappings.put("&reg;","®");t.XmlUtils.extendedEntityMappings.put("&rfloor;","⌋");t.XmlUtils.extendedEntityMappings.put("&Rho;","Ρ");t.XmlUtils.extendedEntityMappings.put("&rho;","ρ");t.XmlUtils.extendedEntityMappings.put("&rsaquo;","›");t.XmlUtils.extendedEntityMappings.put("&rsquo;","’");t.XmlUtils.extendedEntityMappings.put("&sbquo;","‚");t.XmlUtils.extendedEntityMappings.put("&Scaron;","Š");t.XmlUtils.extendedEntityMappings.put("&scaron;","š");t.XmlUtils.extendedEntityMappings.put("&sdot;","⋅");t.XmlUtils.extendedEntityMappings.put("&sect;","§");t.XmlUtils.extendedEntityMappings.put("&Sigma;","Σ");t.XmlUtils.extendedEntityMappings.put("&sigma;","σ");t.XmlUtils.extendedEntityMappings.put("&sigmaf;","ς");t.XmlUtils.extendedEntityMappings.put("&sim;","∼");t.XmlUtils.extendedEntityMappings.put("&spades;","♠");t.XmlUtils.extendedEntityMappings.put("&sub;","⊂");t.XmlUtils.extendedEntityMappings.put("&sube;","⊆");t.XmlUtils.extendedEntityMappings.put("&sum;","∑");t.XmlUtils.extendedEntityMappings.put("&sup;","⊃");t.XmlUtils.extendedEntityMappings.put("&sup1;","¹");t.XmlUtils.extendedEntityMappings.put("&sup2;","²");t.XmlUtils.extendedEntityMappings.put("&sup3;","³");t.XmlUtils.extendedEntityMappings.put("&supe;","⊇");t.XmlUtils.extendedEntityMappings.put("&szlig;","ß");t.XmlUtils.extendedEntityMappings.put("&Tau;","Τ");t.XmlUtils.extendedEntityMappings.put("&tau;","τ");t.XmlUtils.extendedEntityMappings.put("&there4;","∴");t.XmlUtils.extendedEntityMappings.put("&Theta;","Θ");t.XmlUtils.extendedEntityMappings.put("&theta;","θ");t.XmlUtils.extendedEntityMappings.put("&thetasym;","ϑ");t.XmlUtils.extendedEntityMappings.put("&thinsp;"," ");t.XmlUtils.extendedEntityMappings.put("&THORN;","Þ");t.XmlUtils.extendedEntityMappings.put("&thorn;","þ");t.XmlUtils.extendedEntityMappings.put("&tilde;","˜");t.XmlUtils.extendedEntityMappings.put("&times;","×");t.XmlUtils.extendedEntityMappings.put("&trade;","™");t.XmlUtils.extendedEntityMappings.put("&Uacute;","Ú");t.XmlUtils.extendedEntityMappings.put("&uacute;","ú");t.XmlUtils.extendedEntityMappings.put("&uArr;","⇑");t.XmlUtils.extendedEntityMappings.put("&uarr;","↑");t.XmlUtils.extendedEntityMappings.put("&Ucirc;","Û");t.XmlUtils.extendedEntityMappings.put("&ucirc;","û");t.XmlUtils.extendedEntityMappings.put("&Ugrave;","Ù");t.XmlUtils.extendedEntityMappings.put("&ugrave;","ù");t.XmlUtils.extendedEntityMappings.put("&uml;","¨");t.XmlUtils.extendedEntityMappings.put("&upsih;","ϒ");t.XmlUtils.extendedEntityMappings.put("&Upsilon;","Υ");t.XmlUtils.extendedEntityMappings.put("&upsilon;","υ");t.XmlUtils.extendedEntityMappings.put("&Uuml;","Ü");t.XmlUtils.extendedEntityMappings.put("&uuml;","ü");t.XmlUtils.extendedEntityMappings.put("&weierp;","℘");t.XmlUtils.extendedEntityMappings.put("&Xi;","Ξ");t.XmlUtils.extendedEntityMappings.put("&xi;","ξ");t.XmlUtils.extendedEntityMappings.put("&Yacute;","Ý");t.XmlUtils.extendedEntityMappings.put("&yacute;","ý");t.XmlUtils.extendedEntityMappings.put("&yen;","¥");t.XmlUtils.extendedEntityMappings.put("&Yuml;","Ÿ");t.XmlUtils.extendedEntityMappings.put("&yuml;","ÿ");t.XmlUtils.extendedEntityMappings.put("&Zeta;","Ζ");t.XmlUtils.extendedEntityMappings.put("&zeta;","ζ")},unescapeJson:function(e){if(t.isNull(e)){return null}var r=t.XStringBuffer.create();t.XmlUtils.unescapeJsonToBuffer(e,r);return r.toString()},unescapeJsonToBuffer:function(e,r){if(t.isNull(e)){return}var n=0;var i=t.XString.indexOf(e,"\\");while(i>-1){r.append(t.XString.substring(e,n,i));if(i>=t.XString.size(e)-1){r.append("\\");return}n=i+2;switch(t.XString.getCharAt(e,i+1)){case 110:r.append("\n");break;case 114:r.append("\r");break;case 116:r.append("\t");break;case 98:r.append("\b");break;case 102:r.append("\f");break;case 47:r.append("/");break;case 92:r.append("\\");break;case 34:r.append('"');break;default:r.append(t.XString.substring(e,i,i+2))}if(n>=t.XString.size(e)){return}i=t.XString.indexOfFrom(e,"\\",n)}if(i===-1){r.append(t.XString.substring(e,n,t.XString.size(e)))}else{r.append(t.XString.substring(e,n,i))}},escapeXml:function(e,r){if(t.isNull(e)){return null}switch(r){case t.XmlUtils.MUST_NOT_ESCAPE:return e;case t.XmlUtils.TEXT_NODE_ESCAPE:return t.XmlUtils.escapeXmlTextNodeLazy(e);case t.XmlUtils.ATTRIBUTE_ESCAPE:return t.XmlUtils.escapeXmlAttributeLazy(e);default:return t.XmlUtils.escapeXmlString(e)}},escapeXmlString:function(e){if(t.isNull(e)){return null}var r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;r=t.XString.containsString(r,t.XmlUtils.QUOT_CHAR)?t.XString.replace(r,t.XmlUtils.QUOT_CHAR,t.XmlUtils.QUOT_ENTITY):r;r=t.XString.containsString(r,t.XmlUtils.APOS_CHAR)?t.XString.replace(r,t.XmlUtils.APOS_CHAR,t.XmlUtils.APOS_ENTITY):r;r=t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r;return t.XString.containsString(r,t.XmlUtils.GT_CHAR)?t.XString.replace(r,t.XmlUtils.GT_CHAR,t.XmlUtils.GT_ENTITY):r},escapeXmlAttributeLazy:function(e){if(t.isNull(e)){return null}var r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;r=t.XString.containsString(r,t.XmlUtils.QUOT_CHAR)?t.XString.replace(r,t.XmlUtils.QUOT_CHAR,t.XmlUtils.QUOT_ENTITY):r;return t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r},escapeXmlTextNodeLazy:function(e){if(t.isNull(e)){return null}var r=t.XString.containsString(e,t.XmlUtils.AMP_CHAR)?t.XString.replace(e,t.XmlUtils.AMP_CHAR,t.XmlUtils.AMP_ENTITY):e;return t.XString.containsString(r,t.XmlUtils.LT_CHAR)?t.XString.replace(r,t.XmlUtils.LT_CHAR,t.XmlUtils.LT_ENTITY):r},unescapeRawXmlString:function(e,r){if(t.isNull(e)){return null}var n=t.XStringBuffer.create();t.XmlUtils.unescapeRawXmlStringToBuffer(e,n,r);return n.toString()},unescapeRawXmlStringToBuffer:function(e,r,n){if(t.isNull(e)){return}var i=t.XString.indexOf(e,"&");if(i>-1){r.append(t.XString.substring(e,0,i))}else{r.append(e);return}while(i>-1){var s=t.XString.indexOfFrom(e,";",i+1);var a=false;if(s>i+1){var l=t.XString.substring(e,i,s+1);a=true;if(n&&t.XmlUtils.extendedEntityMappings.containsKey(l)){r.append(t.XmlUtils.extendedEntityMappings.getByKey(l))}else if(!n&&t.XmlUtils.entityMappings.containsKey(l)){r.append(t.XmlUtils.entityMappings.getByKey(l))}else if(t.XString.startsWith(l,"&#x")){try{r.appendChar(t.XInteger.convertFromStringWithRadix(t.XString.substring(l,3,t.XString.size(l)-1),16));a=true}catch(t){a=false}}else if(t.XString.startsWith(l,"&#")){try{r.appendChar(t.XInteger.convertFromStringWithRadix(t.XString.substring(l,2,t.XString.size(l)-1),10));a=true}catch(t){a=false}}else{a=false}}else{r.append(t.XString.substring(e,i,t.XString.size(e)));break}if(!a){r.append("&");s=i}if(s>=t.XString.size(e)){break}i=t.XString.indexOfFrom(e,"&",s+1);if(i===-1){r.append(t.XString.substring(e,s+1,t.XString.size(e)));break}r.append(t.XString.substring(e,s+1,i))}}};t.JsonParserFactory=function(){};t.JsonParserFactory.prototype=new t.XObject;t.JsonParserFactory.prototype._ff_c="JsonParserFactory";t.JsonParserFactory.s_jsonParserFactoryNative=null;t.JsonParserFactory.s_jsonParserFactoryGeneric=null;t.JsonParserFactory.staticSetupJsonParserFactory=function(){};t.JsonParserFactory.newInstance=function(){if(t.notNull(t.JsonParserFactory.s_jsonParserFactoryNative)){return t.JsonParserFactory.s_jsonParserFactoryNative.newParserInstance()}else if(t.notNull(t.JsonParserFactory.s_jsonParserFactoryGeneric)){return t.JsonParserFactory.s_jsonParserFactoryGeneric.newParserInstance()}else{return null}};t.JsonParserFactory.createFromString=function(e){return t.JsonParserFactory.createFromSafeString(e)};t.JsonParserFactory.createFromSafeString=function(e){var r=t.JsonParserFactory.newInstance();var n=r.parseUnsafe(e);if(r.hasErrors()&&t.isNull(n)){throw t.XException.createIllegalArgumentException(r.getSummary())}t.XObjectExt.release(r);return n};t.JsonParserFactory.createComplexJsonDocument=function(e){if(t.isNull(e)||!e.hasElements()){return null}var r=t.PrFactory.createStructure();var n=e.getKeysAsReadOnlyListOfString();var i=n.size();for(var s=0;s<i;s++){var a=n.get(s);r.put(a,t.JsonParserFactory.createFromString(e.getByKey(a)))}return r};t.JsonParserFactory.setJsonParserFactory=function(e){t.JsonParserFactory.s_jsonParserFactoryNative=e};t.JsonParserFactory.setJsonParserFactoryGeneric=function(e){t.JsonParserFactory.s_jsonParserFactoryGeneric=e};t.PrFactory=function(){};t.PrFactory.prototype=new t.XObject;t.PrFactory.prototype._ff_c="PrFactory";t.PrFactory.s_universalFactory=null;t.PrFactory.s_nativeFactory=null;t.PrFactory.s_activeFactory=null;t.PrFactory.createStructure=function(){return t.PrFactory.s_activeFactory.newStructure()};t.PrFactory.createStructureDeepCopy=function(e){return t.PrFactory.s_activeFactory.newStructureDeepCopy(e)};t.PrFactory.createList=function(){return t.PrFactory.s_activeFactory.newList()};t.PrFactory.createListDeepCopy=function(e){return t.PrFactory.s_activeFactory.newListDeepCopy(e)};t.PrFactory.createBoolean=function(e){return t.PrFactory.s_activeFactory.newBoolean(e)};t.PrFactory.createString=function(e){return t.PrFactory.s_activeFactory.newString(e)};t.PrFactory.createInteger=function(e){return t.PrFactory.s_activeFactory.newInteger(e)};t.PrFactory.createLong=function(e){return t.PrFactory.s_activeFactory.newLong(e)};t.PrFactory.createDouble=function(e){return t.PrFactory.s_activeFactory.newDouble(e)};t.PrFactory.createObject=function(){return t.PrFactory.s_activeFactory.newObject()};t.PrFactory.setNativeFactory=function(e){t.PrFactory.s_nativeFactory=e};t.PrFactory.getNativeParameterFactory=function(){return t.PrFactory.s_nativeFactory};t.PrFactory.setUniversalFactory=function(e){t.PrFactory.s_universalFactory=e};t.PrFactory.getUniversalParameterFactory=function(){return t.PrFactory.s_universalFactory};t.PrFactory.setActiveFactory=function(e){t.PrFactory.s_activeFactory=e};t.PrFactory.getActiveParameterFactory=function(){return t.PrFactory.s_activeFactory};t.PrFactory.prototype.newStructureDeepCopy=function(e){return t.PrStructure.createDeepCopy(e)};t.PrFactory.prototype.newListDeepCopy=function(e){return t.PrList.createDeepCopy(e)};t.PrFactory.prototype.newObject=function(){return t.PrObject.create()};t.PrPathFilter=function(){};t.PrPathFilter.prototype=new t.XObject;t.PrPathFilter.prototype._ff_c="PrPathFilter";t.PrPathFilter.createReplacerInternal=function(e,r,n,i,s){var a=new t.PrPathFilter;a.m_transientPathCollector=e;a.m_children=t.XHashMapByString.create();a.m_name=r;if(t.notNull(n)){n.m_children.put(r,a);a.m_parent=t.XWeakReferenceUtil.getWeakRef(n)}a.m_ignored=i;a.m_transient=s;return a};t.PrPathFilter.create=function(e){return t.PrPathFilter.createReplacerInternal(e,null,null,false,false)};t.PrPathFilter.prototype.m_parent=null;t.PrPathFilter.prototype.m_children=null;t.PrPathFilter.prototype.m_name=null;t.PrPathFilter.prototype.m_ignored=false;t.PrPathFilter.prototype.m_transient=false;t.PrPathFilter.prototype.m_path=null;t.PrPathFilter.prototype.m_index=-1;t.PrPathFilter.prototype.m_transientPathCollector=null;t.PrPathFilter.prototype.m_escapeIgnore=false;t.PrPathFilter.prototype.getPath=function(){if(t.isNull(this.m_path)){if(t.isNull(this.m_parent)){this.m_path=this.getLocalPath()}else{this.m_path=t.XStringUtils.concatenate2(t.XWeakReferenceUtil.getHardRef(this.m_parent).getPath(),this.getLocalPath())}}return this.m_path};t.PrPathFilter.prototype.getLocalPath=function(){if(t.isNull(this.m_name)){return"$"}if(t.XString.isEqual(this.m_name,"*")||t.XString.isEqual(this.m_name,".")){return t.XStringUtils.concatenate3("[",t.XInteger.convertToString(this.m_index),"]")}return t.XStringUtils.concatenate2(".",this.m_name)};t.PrPathFilter.prototype.addChild=function(e,r,n){return t.PrPathFilter.createReplacerInternal(this.m_transientPathCollector,e,this,r,n)};t.PrPathFilter.prototype.addListChild=function(){return this.addChild("*",false,false)};t.PrPathFilter.prototype.addListFirstElementChild=function(){return this.addChild(".",false,false)};t.PrPathFilter.prototype.addPlainChild=function(t){return this.addChild(t,false,false)};t.PrPathFilter.prototype.addNoSerializeChild=function(t){return this.addChild(t,true,false)};t.PrPathFilter.prototype.addTransientChild=function(t){return this.addChild(t,true,true)};t.PrPathFilter.prototype.getOrCreateChild=function(t){return this.m_children.containsKey(t)?this.m_children.getByKey(t):this.addPlainChild(t)};t.PrPathFilter.prototype.getOrCreateListChild=function(){return this.m_children.containsKey("*")?this.m_children.getByKey("*"):this.addListChild()};t.PrPathFilter.prototype.getOrCreateListFirstElementChild=function(){return this.m_children.containsKey(".")?this.m_children.getByKey("."):this.addListFirstElementChild()};t.PrPathFilter.prototype.isEscapeIgnore=function(){return this.m_escapeIgnore};t.PrPathFilter.prototype.getSubFilter=function(t){return this.m_children.getByKey(t)};t.PrPathFilter.prototype.hasSubFilter=function(t){return this.m_children.containsKey(t)};t.PrPathFilter.prototype.isIgnore=function(t,e){var r=this.isEscapeIgnore();if(this.m_transient&&!r){this.m_transientPathCollector.addTransientPropertyPath(this.getPath(),e.asString().getString())}return this.m_ignored&&!r};t.PrPathFilter.prototype.setEscapeIgnore=function(t){this.m_escapeIgnore=t};t.PrPathFilter.prototype.setEscapeIgnoreForChildren=function(e){t.XCollectionUtils.forEach(this.m_children,function(t){t.setEscapeIgnore(e)}.bind(this))};t.PrPathFilter.prototype.submitIndex=function(e,r){if(t.XString.isEqual(".",this.m_name)&&e!==0){this.setEscapeIgnoreForChildren(true)}else if(t.XString.isEqual("*",this.m_name)||t.XString.isEqual(".",this.m_name)){this.setEscapeIgnoreForChildren(false);this.m_index=e;this.resetPath()}};t.PrPathFilter.prototype.getListSubFilter=function(){return this.hasSubFilter("*")?this.getSubFilter("*"):this.getSubFilter(".")};t.PrPathFilter.prototype.resetPath=function(){this.m_path=null;var t=this.m_children.getValuesAsReadOnlyList();for(var e=0;e<t.size();e++){t.get(e).resetPath()}};t.XmlParserFactory=function(){};t.XmlParserFactory.prototype=new t.XObject;t.XmlParserFactory.prototype._ff_c="XmlParserFactory";t.XmlParserFactory.s_xmlParserFactory=null;t.XmlParserFactory.staticSetupXmlParserFactory=function(){t.XmlParserFactory.s_xmlParserFactory=new t.XmlParserFactory};t.XmlParserFactory.newInstance=function(){return t.XmlParserFactory.s_xmlParserFactory.newParserInstance()};t.XmlParserFactory.createFromString=function(e){var r=t.XmlParserFactory.newInstance();var n=r.parse(e);if(r.isValid()){return n}throw t.XException.createIllegalArgumentException(r.getSummary())};t.XmlParserFactory.prototype.newParserInstance=function(){return t.XmlParser.create()};t.JsonParserGenericFactory=function(){};t.JsonParserGenericFactory.prototype=new t.JsonParserFactory;t.JsonParserGenericFactory.prototype._ff_c="JsonParserGenericFactory";t.JsonParserGenericFactory.staticSetup=function(){var e=new t.JsonParserGenericFactory;t.JsonParserFactory.setJsonParserFactoryGeneric(e)};t.JsonParserGenericFactory.prototype.newParserInstance=function(){return t.JsonParserGeneric.create()};t.PrCleanup=function(){};t.PrCleanup.prototype=new t.XObjectExt;t.PrCleanup.prototype._ff_c="PrCleanup";t.PrCleanup.create=function(){var e=new t.PrCleanup;e.m_toRemove=t.XHashSetOfString.create();return e};t.PrCleanup.prototype.m_toRemove=null;t.PrCleanup.prototype.m_cdata=null;t.PrCleanup.prototype.m_ignored=null;t.PrCleanup.prototype.addCdataTags=function(e){if(t.isNull(this.m_cdata)){this.m_cdata=t.XHashSetOfString.create()}this.m_cdata.addAll(e);return this};t.PrCleanup.prototype.tagsToRemove=function(t){this.m_toRemove.addAll(t);return this};t.PrCleanup.prototype.addIgnoredTagsValue=function(e,r){if(t.isNull(this.m_ignored)){this.m_ignored=t.XProperties.create()}this.m_ignored.put(e,r);return this};t.PrCleanup.prototype.cleanupInAJson=function(e){var r=t.PrUtils.deepCopyElement(e);this.cleanupInAJsonInternal(r);return r};t.PrCleanup.prototype.cleanupInAJsonInternal=function(e){if(t.isNull(e)){return null}var r=e.getType();if(r===t.PrElementType.STRUCTURE){this.cleanupStructure(e)}else if(r===t.PrElementType.LIST){this.cleanupList(e)}else if(r===t.PrElementType.DOUBLE){var n=e.asDouble();var i=n.getDouble();var s=t.XDouble.convertToLong(i);var a=s;if(a===i){return t.PrFactory.createLong(s)}}return null};t.PrCleanup.prototype.cleanupStructure=function(e){var r=e.asStructure();var n=t.XListOfString.createFromReadOnlyList(r.getKeysAsReadOnlyListOfString());var i=n.size();for(var s=0;s<i;s++){var a=n.get(s);if(t.notNull(this.m_ignored)&&this.m_ignored.containsKey(a)){if(!t.XString.containsString(r.getStringByKey(a),this.m_ignored.getByKey(a))){r.remove(a);continue}}else if(t.notNull(this.m_cdata)&&this.m_cdata.contains(a)){var l=r.getElementTypeByKey(a);if(l===t.PrElementType.STRING){var o=r.getStringByKey(a);if(t.XStringUtils.isNotNullAndNotEmpty(o)){var u=t.JsonParserFactory.newInstance();var p=u.parse(o);if(u.isValid()&&t.notNull(p)){r.put(a,p)}else{r.putString(a,"PARSER ERROR")}t.XObjectExt.release(u)}}}else if(this.m_toRemove.contains(a)){r.remove(a);continue}var c=r.getByKey(a);var m=this.cleanupInAJsonInternal(c);if(t.notNull(m)){r.put(a,m)}}};t.PrCleanup.prototype.cleanupList=function(e){var r=e.asList();var n=r.size();for(var i=0;i<n;i++){var s=r.get(i);var a=this.cleanupInAJsonInternal(s);if(t.notNull(a)){r.set(i,a)}}};t.PrCleanup.prototype.releaseObject=function(){t.XObjectExt.prototype.releaseObject.call(this);this.m_cdata=t.XObjectExt.release(this.m_cdata);this.m_ignored=t.XObjectExt.release(this.m_ignored);this.m_toRemove=t.XObjectExt.release(this.m_toRemove)};t.PrFactoryUniversal=function(){};t.PrFactoryUniversal.prototype=new t.PrFactory;t.PrFactoryUniversal.prototype._ff_c="PrFactoryUniversal";t.PrFactoryUniversal.staticSetup=function(){t.PrInteger.staticSetup();t.PrBoolean.staticSetup();t.PrString.staticSetup();t.PrDouble.staticSetup();var e=new t.PrFactoryUniversal;t.PrFactory.setUniversalFactory(e);t.PrFactory.setActiveFactory(e)};t.PrFactoryUniversal.prototype.newBoolean=function(e){return t.PrBoolean.createWithValue(e)};t.PrFactoryUniversal.prototype.newInteger=function(e){return t.PrInteger.createWithValue(e)};t.PrFactoryUniversal.prototype.newLong=function(e){return t.PrLong.createWithValue(e)};t.PrFactoryUniversal.prototype.newDouble=function(e){return t.PrDouble.createWithValue(e)};t.PrFactoryUniversal.prototype.newString=function(e){return t.PrString.createWithValue(e)};t.PrFactoryUniversal.prototype.newStructure=function(){return t.PrStructure.create()};t.PrFactoryUniversal.prototype.newStructureDeepCopy=function(e){return t.PrStructure.createDeepCopy(e)};t.PrFactoryUniversal.prototype.newList=function(){return t.PrList.create()};t.PrFactoryUniversal.prototype.newListDeepCopy=function(e){return t.PrList.createDeepCopy(e)};t.PrFactoryUniversal.prototype.newNull=function(){return null};t.PrFactoryUniversal.prototype.newObject=function(){return t.PrObject.create()};t.DfDocumentParser=function(){};t.DfDocumentParser.prototype=new t.MessageManagerSimple;t.DfDocumentParser.prototype._ff_c="DfDocumentParser";t.DfDocumentParser.prototype.parseByteArray=function(e){var r=t.XByteArray.convertToString(e);return this.parse(r)};t.DfDocumentParser.prototype.parseUnsafe=function(t){return this.parse(t)};t.DfDocumentParser.prototype.convertFromNative=function(e){return t.XObject.castFromNative(e)};t.DfDocumentParser.prototype.convertToNative=function(t){return t};t.PrElement=function(){};t.PrElement.prototype=new t.XJson;t.PrElement.prototype._ff_c="PrElement";t.PrElement.prototype.isProxy=function(){return false};t.PrElement.prototype.getElement=function(){return this};t.PrElement.prototype.asList=function(){return null};t.PrElement.prototype.asStructure=function(){return null};t.PrElement.prototype.asString=function(){return null};t.PrElement.prototype.asNumber=function(){return null};t.PrElement.prototype.asInteger=function(){return null};t.PrElement.prototype.asLong=function(){return null};t.PrElement.prototype.asDouble=function(){return null};t.PrElement.prototype.asBoolean=function(){return null};t.PrElement.prototype.asObject=function(){return null};t.PrElement.prototype.getType=function(){return null};t.PrElement.prototype.getValueType=function(){var e=this.getType();if(e===t.PrElementType.STRUCTURE){return t.XValueType.STRUCTURE}else if(e===t.PrElementType.LIST){return t.XValueType.LIST}return null};t.PrElement.prototype.getComponentType=function(){return this.getValueType()};t.PrElement.prototype.getPermaCopy=function(){return t.PrUtils.deepCopyElement(this)};t.PrElement.prototype.isStructure=function(){return this.getType()===t.PrElementType.STRUCTURE};t.PrElement.prototype.isList=function(){return this.getType()===t.PrElementType.LIST};t.PrElement.prototype.isString=function(){return this.getType()===t.PrElementType.STRING};t.PrElement.prototype.isInteger=function(){return this.getType()===t.PrElementType.INTEGER};t.PrElement.prototype.isDouble=function(){return this.getType()===t.PrElementType.DOUBLE};t.PrElement.prototype.isLong=function(){return this.getType()===t.PrElementType.LONG};t.PrElement.prototype.isObject=function(){return this.getType()===t.PrElementType.OBJECT};t.PrElement.prototype.isBoolean=function(){return this.getType()===t.PrElementType.BOOLEAN};t.PrElement.prototype.isNumeric=function(){return this.isLong()||this.isDouble()||this.isInteger()};t.PrElement.prototype.isEqualTo=function(e){var r=false;if(t.notNull(e)){var n=e;var i=this.getType();var s=n.getType();if(i.isNumber()&&s.isNumber()){r=this.asNumber().getDouble()===n.asNumber().getDouble()}else{if(i===s){if(i===t.PrElementType.BOOLEAN){r=this.getBoolean()===n.getBoolean()}else if(i===t.PrElementType.INTEGER){r=this.getInteger()===n.getInteger()}else if(i===t.PrElementType.LONG){r=this.getLong()===n.getLong()}else if(i===t.PrElementType.DOUBLE){r=this.getDouble()===n.getDouble()}else if(i===t.PrElementType.STRING){r=t.XString.isEqual(this.getString(),n.getString())}else if(i===t.PrElementType.OBJECT){r=this.asObject().getObject()===n.asObject().getObject()}else if(i===t.PrElementType.THE_NULL){r=true}else{if(i===t.PrElementType.LIST){var a=this;var l=n;var o=a.size();if(o===l.size()){r=true;var u;var p;for(var c=0;c<o&&r===true;c++){u=a.get(c);p=l.get(c);if(t.isNull(u)||t.isNull(p)){r=u===p}else if(!u.isEqualTo(p)){r=false}}}}else if(i===t.PrElementType.STRUCTURE){var m=this;var g=n;var y=m.getKeysAsReadOnlyListOfString();var f=g.getKeysAsReadOnlyListOfString();var P=y.size();if(P===f.size()){r=true;var h;var d;for(var S=0;S<P&&r===true;S++){var E=y.get(S);if(!g.containsKey(E)){r=false}else{h=m.getByKey(E);d=g.getByKey(E);if(t.isNull(h)&&t.notNull(d)||t.notNull(h)&&t.isNull(d)){r=false}else if(t.notNull(h)){if(!h.isEqualTo(d)){r=false}}}}}}else{throw t.XException.createIllegalStateException("Unknown type")}}}}}return r};t.PrElement.prototype.getStringRepresentation=function(){return t.PrUtils.serialize(this,true,false,0)};t.PrElement.prototype.convertToNative=function(){var e=t.JsonParserFactory.newInstance();var r=e.convertToNative(this);t.XObjectExt.release(e);return r};t.PrElement.prototype.copyFrom=function(e,r){t.PrUtils.createDeepCopyExt(e,this)};t.PrElement.prototype.cloneExt=function(e){return t.PrUtils.createDeepCopyExt(this,null)};t.PrElement.prototype.toString=function(){return t.PrUtils.serialize(this,true,false,0)};t.PrElement.prototype.copyAsPrimitiveXValue=function(){var e=this.getType();var r=null;if(e===t.PrElementType.STRING){r=t.XStringValue.create(this.asString().getString())}else if(e===t.PrElementType.BOOLEAN){r=t.XBooleanValue.create(this.asBoolean().getBoolean())}else if(e===t.PrElementType.DOUBLE){r=t.XDoubleValue.create(this.asDouble().getDouble())}else if(e===t.PrElementType.LONG){r=t.XLongValue.create(this.asLong().getLong())}else if(e===t.PrElementType.INTEGER){r=t.XIntegerValue.create(this.asInteger().getInteger())}return r};t.DocumentFormatType=function(){};t.DocumentFormatType.prototype=new t.XConstant;t.DocumentFormatType.prototype._ff_c="DocumentFormatType";t.DocumentFormatType.JSON=null;t.DocumentFormatType.XML=null;t.DocumentFormatType.staticSetup=function(){t.DocumentFormatType.JSON=t.XConstant.setupName(new t.DocumentFormatType,"Json");t.DocumentFormatType.XML=t.XConstant.setupName(new t.DocumentFormatType,"Xml")};t.JsonParserGeneric=function(){};t.JsonParserGeneric.prototype=new t.DfDocumentParser;t.JsonParserGeneric.prototype._ff_c="JsonParserGeneric";t.JsonParserGeneric.create=function(){var e=new t.JsonParserGeneric;e.setupParser(null,false);return e};t.JsonParserGeneric.createEmbedded=function(e){var r=new t.JsonParserGeneric;r.setupParser(e,true);return r};t.JsonParserGeneric.prototype.m_source=null;t.JsonParserGeneric.prototype.m_isEmbedded=false;t.JsonParserGeneric.prototype.m_stringDelimiter=0;t.JsonParserGeneric.prototype.m_rootElement=null;t.JsonParserGeneric.prototype.m_elementStack=null;t.JsonParserGeneric.prototype.m_currentStackIndex=0;t.JsonParserGeneric.prototype.m_pos=0;t.JsonParserGeneric.prototype.m_isInsideString=false;t.JsonParserGeneric.prototype.m_isInsideVariable=false;t.JsonParserGeneric.prototype.m_isInsideEscape=false;t.JsonParserGeneric.prototype.m_isInsideNumber=false;t.JsonParserGeneric.prototype.m_isInsideDoubleNumber=false;t.JsonParserGeneric.prototype.m_isInsideUnicode=false;t.JsonParserGeneric.prototype.m_unicodePos=0;t.JsonParserGeneric.prototype.m_stringStartPos=0;t.JsonParserGeneric.prototype.m_escapedString=null;t.JsonParserGeneric.prototype.m_numberStartPos=0;t.JsonParserGeneric.prototype.m_structureDepth=0;t.JsonParserGeneric.prototype.setupParser=function(e,r){this.setup();this.m_isEmbedded=r;if(this.m_isEmbedded){this.m_stringDelimiter=39}else{this.m_stringDelimiter=34}if(t.notNull(e)){this.resetParsing(e)}};t.JsonParserGeneric.prototype.releaseObject=function(){t.DfDocumentParser.prototype.releaseObject.call(this);this.resetParsing(null)};t.JsonParserGeneric.prototype.resetParsing=function(e){this.m_rootElement=null;this.m_elementStack=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_elementStack);if(t.notNull(e)){this.m_elementStack=t.XList.create()}this.m_currentStackIndex=-1;this.m_pos=0;this.m_isInsideString=false;this.m_isInsideVariable=false;this.m_isInsideEscape=false;this.m_isInsideNumber=false;this.m_isInsideDoubleNumber=false;this.m_isInsideUnicode=false;this.m_unicodePos=0;this.m_stringStartPos=0;this.m_escapedString=t.XObjectExt.release(this.m_escapedString);this.m_numberStartPos=0;this.m_structureDepth=0;this.m_source=e};t.JsonParserGeneric.prototype.parse=function(e){this.resetParsing(e);if(t.notNull(e)){if(this.runWalker()){return this.m_rootElement}}return null};t.JsonParserGeneric.prototype.enterStructure=function(){return this.enter(t.PrFactory.createStructure())};t.JsonParserGeneric.prototype.raiseWrongCommaError=function(){this.raiseError("Object properties and array items must be separated by single comma.")};t.JsonParserGeneric.prototype.leaveStructure=function(){var t=this.getTopStackElement();if(!t.finishElements()){this.raiseWrongCommaError();return false}this.m_currentStackIndex--;return true};t.JsonParserGeneric.prototype.enterArray=function(){return this.enter(t.PrFactory.createList())};t.JsonParserGeneric.prototype.leaveArray=function(){var t=this.getTopStackElement();if(!t.finishElements()){this.raiseWrongCommaError();return false}this.m_currentStackIndex--;return true};t.JsonParserGeneric.prototype.checkStructure=function(t){if(!t.isNameSet()){this.raiseError("Name in structure is not set");return false}if(t.isValueSet()){this.raiseError("Value in structure is already set");return false}t.setValueSet(true);return true};t.JsonParserGeneric.prototype.checkList=function(t){if(t.isNameSet()){this.raiseError("Name cannot be set in list");return false}if(t.isValueSet()){this.raiseError("Value in list is already set");return false}t.setValueSet(true);return true};t.JsonParserGeneric.prototype.enter=function(e){if(this.m_currentStackIndex===-1){this.m_rootElement=e}else{var r=this.getTopStackElement();if(!r.addElement()){this.raiseWrongCommaError();return false}var n=r.getElement();var i=n.getType();if(i===t.PrElementType.STRUCTURE){if(!this.checkStructure(r)){return false}var s=r.getName();var a=n;a.put(s,e)}else if(i===t.PrElementType.LIST){if(!this.checkList(r)){return false}var l=n;l.add(e)}else{this.raiseError("Illegal type");return false}}var o;if(this.m_currentStackIndex===this.m_elementStack.size()-1){o=t.JsonParserGenericStackElement.create();this.m_elementStack.add(o)}else{o=this.m_elementStack.get(this.m_currentStackIndex+1);o.reset()}o.setElement(e);this.m_currentStackIndex++;return true};t.JsonParserGeneric.prototype.setVariable=function(e){var r=null;var n=false;if(t.XString.isEqual("true",e)){r=t.PrFactory.createBoolean(true);n=true}else if(t.XString.isEqual("false",e)){r=t.PrFactory.createBoolean(false);n=true}else if(t.XString.isEqual("null",e)){n=true}if(!n){if(this.m_isEmbedded){return this.setString(e)}this.raiseError(t.XStringUtils.concatenate2("Unknown value: ",e));return false}var i=this.getTopStackElement();if(!i.addElement()){this.raiseWrongCommaError();return false}var s=i.getElement();var a=s.getType();if(a===t.PrElementType.STRUCTURE){if(!this.checkStructure(i)){return false}var l=i.getName();var o=s;o.put(l,r)}else if(a===t.PrElementType.LIST){if(!this.checkList(i)){return false}var u=s;u.add(r)}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setString=function(e){var r=this.getTopStackElement();var n=r.getElement();var i=n.getType();if(i===t.PrElementType.STRUCTURE){if(!r.isNameSet()){if(r.isValueSet()){this.raiseError("Name in structure is not set");return false}r.setName(e)}else{if(r.addElement()===false){this.raiseWrongCommaError();return false}if(this.checkStructure(r)===false){return false}var s=r.getName();var a=n;a.putString(s,e)}}else if(i===t.PrElementType.LIST){if(r.addElement()===false){return false}if(this.checkList(r)===false){return false}var l=n;l.add(t.PrFactory.createString(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.leaveString=function(){return true};t.JsonParserGeneric.prototype.enterNumber=function(){return true};t.JsonParserGeneric.prototype.leaveNumber=function(){return true};t.JsonParserGeneric.prototype.setDouble=function(e){var r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}var n=r.getElement();var i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}var s=r.getName();var a=n;a.putDouble(s,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}var l=n;l.add(t.PrFactory.createDouble(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setInteger=function(e){var r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}var n=r.getElement();var i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}var s=r.getName();var a=n;a.putInteger(s,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}var l=n;l.add(t.PrFactory.createInteger(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.setLong=function(e){var r=this.getTopStackElement();if(r.addElement()===false){this.raiseWrongCommaError();return false}var n=r.getElement();var i=n.getType();if(i===t.PrElementType.STRUCTURE){if(this.checkStructure(r)===false){return false}var s=r.getName();var a=n;a.putLong(s,e)}else if(i===t.PrElementType.LIST){if(this.checkList(r)===false){return false}var l=n;l.add(t.PrFactory.createLong(e))}else{this.raiseError("Illegal type");return false}return true};t.JsonParserGeneric.prototype.enterValueZone=function(){return true};t.JsonParserGeneric.prototype.nextItem=function(){var t=this.getTopStackElement();t.setName(null);t.setValueSet(false);if(t.nextElement()===false){this.raiseWrongCommaError();return false}return true};t.JsonParserGeneric.prototype.getTopStackElement=function(){return this.m_elementStack.get(this.m_currentStackIndex)};t.JsonParserGeneric.prototype.getRootElement=function(){return this.m_rootElement};t.JsonParserGeneric.prototype.endParsing=function(){this.m_escapedString=t.XObjectExt.release(this.m_escapedString);if(this.m_currentStackIndex===-1){return true}this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,"Json does not close correctly");return false};t.JsonParserGeneric.prototype.runWalker=function(){var e=t.XString.size(this.m_source);var r;var n=true;for(var i=0;i<e&&n;){r=t.XString.getCharAt(this.m_source,i);if(i===0&&r===65279){i++}else{n=this.parseSingleCharacter(r,i);i++}}if(n){this.endParsing()}return n};t.JsonParserGeneric.prototype.unicode4=function(e){var r=t.XString.substring(this.m_source,e-3,e+1);try{var n=t.XInteger.convertFromStringWithRadix(r,16);this.m_escapedString.appendChar(n)}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}this.m_isInsideUnicode=false;this.m_isInsideEscape=false;this.m_stringStartPos=e+1;return true};t.JsonParserGeneric.prototype.escapedString=function(e,r){if(e===114){this.m_escapedString.append("\r")}else if(e===110){this.m_escapedString.append("\n")}else if(e===116){this.m_escapedString.append("\t")}else if(e===102){this.m_escapedString.append("\f")}else if(e===98){this.m_escapedString.append("\b")}else if(e===34){this.m_escapedString.append('"')}else if(e===92){this.m_escapedString.append("\\")}else if(e===47){this.m_escapedString.append("/")}else{this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,"Parser Error");return false}this.m_isInsideEscape=false;this.m_stringStartPos=r+1;return true};t.JsonParserGeneric.prototype.parseSingleCharacter=function(e,r){var n;var i=true;this.m_pos=r;var s=true;while(s){if(this.m_isInsideString){if(this.m_isInsideEscape){if(this.m_isInsideUnicode){this.m_unicodePos++;if(this.m_unicodePos===4){if(this.unicode4(r)===false){return false}}}else{if(e===117){this.m_isInsideUnicode=true;this.m_unicodePos=0}else{if(this.escapedString(e,r)===false){return false}}}}else{if(e===this.m_stringDelimiter){if(this.insideString(r)===false){return false}}else if(e===92){this.enterEscapedString(r)}}}else if(this.m_isInsideNumber){if(e>=48&&e<=57||e===43||e===45){i=true}else if(e===46||e===101||e===69){this.m_isInsideDoubleNumber=true}else{n=t.XString.substring(this.m_source,this.m_numberStartPos,r);if(this.m_isInsideDoubleNumber){if(this.insideDouble(n)===false){return false}}else{if(this.insideInt(n)===false){return false}}this.m_isInsideNumber=false;this.m_isInsideDoubleNumber=false;if(this.leaveNumber()===false){return false}continue}}else if(this.m_isInsideVariable){if(e===58||e===123||e===125||e===91||e===93||e===44||e===9||e===13||e===10||e===32){n=t.XString.substring(this.m_source,this.m_stringStartPos,r);if(this.setVariable(n)===false){return false}this.m_isInsideVariable=false;continue}}else{if(e>=48&&e<=57||e===45){if(this.enterNumber()===false){return false}this.m_isInsideNumber=true;this.m_numberStartPos=r}else if(e===46){if(this.enterNumber()===false){return false}this.m_isInsideNumber=true;this.m_isInsideDoubleNumber=true;this.m_numberStartPos=r}else if(e===123){if(this.enterStructure()===false){return false}this.m_structureDepth++}else if(e===125){if(this.leaveStructure()===false){return false}this.m_structureDepth--}else if(e===91){if(this.enterArray()===false){return false}}else if(e===93){if(this.leaveArray()===false){return false}}else if(e===58){if(this.enterValueZone()===false){return false}}else if(e===44){if(this.nextItem()===false){return false}}else if(e===32||e===9||e===10||e===13){i=true}else if(e===this.m_stringDelimiter){this.m_isInsideString=true;this.m_stringStartPos=r+1}else{this.m_isInsideVariable=true;this.m_stringStartPos=r}}break}return i};t.JsonParserGeneric.prototype.enterEscapedString=function(e){this.m_isInsideEscape=true;if(t.isNull(this.m_escapedString)){this.m_escapedString=t.XStringBuffer.create()}var r=t.XString.substring(this.m_source,this.m_stringStartPos,e);this.m_escapedString.append(r)};t.JsonParserGeneric.prototype.insideInt=function(e){try{var r=true;var n=t.XString.size(e);var i=t.XString.getCharAt(e,0);if(i===45){r=n<=10}else{r=n<=9}if(r){var s=t.XInteger.convertFromString(e);if(this.setInteger(s)===false){return false}}else{var a=t.XLong.convertFromString(e);if(this.setLong(a)===false){return false}}}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}return true};t.JsonParserGeneric.prototype.insideDouble=function(e){try{var r=t.XDouble.convertFromString(e);if(!this.setDouble(r)){return false}}catch(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,t.XException.getStackTrace(e,0));return false}return true};t.JsonParserGeneric.prototype.insideString=function(e){var r=t.XString.substring(this.m_source,this.m_stringStartPos,e);if(t.notNull(this.m_escapedString)){this.m_escapedString.append(r);r=this.m_escapedString.toString();this.m_escapedString=t.XObjectExt.release(this.m_escapedString)}if(!this.setString(r)){return false}if(!this.leaveString()){return false}this.m_isInsideString=false;return true};t.JsonParserGeneric.prototype.addParserError=function(e,r){var n=this.m_pos-10;if(n<0){n=0}var i=this.m_pos+10;if(i>t.XString.size(this.m_source)){i=t.XString.size(this.m_source)}var s=t.XString.substring(this.m_source,n,i);var a=t.XStringBuffer.create();a.append("Json Parser Error at position ");a.appendInt(this.m_pos).append(": ").appendLine(r);a.append("...").append(s).append("...");var l=a.toString();return t.DfDocumentParser.prototype.addErrorExt.call(this,t.OriginLayer.IOLAYER,e,l,null)};t.JsonParserGeneric.prototype.raiseError=function(e){this.addParserError(t.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,e)};t.JsonParserGeneric.prototype.isEmbeddedParsingFinished=function(){return this.m_structureDepth===0};t.PrElementType=function(){};t.PrElementType.prototype=new t.XConstant;t.PrElementType.prototype._ff_c="PrElementType";t.PrElementType.STRUCTURE=null;t.PrElementType.LIST=null;t.PrElementType.STRING=null;t.PrElementType.INTEGER=null;t.PrElementType.LONG=null;t.PrElementType.DOUBLE=null;t.PrElementType.BOOLEAN=null;t.PrElementType.OBJECT=null;t.PrElementType.THE_NULL=null;t.PrElementType.ANY=null;t.PrElementType.create=function(e,r){var n=new t.PrElementType;n._setupInternal(e);n.m_isNumber=r;return n};t.PrElementType.staticSetup=function(){t.PrElementType.STRUCTURE=t.PrElementType.create("Structure",false);t.PrElementType.LIST=t.PrElementType.create("List",false);t.PrElementType.STRING=t.PrElementType.create("String",false);t.PrElementType.INTEGER=t.PrElementType.create("Integer",true);t.PrElementType.LONG=t.PrElementType.create("Long",true);t.PrElementType.DOUBLE=t.PrElementType.create("Double",true);t.PrElementType.BOOLEAN=t.PrElementType.create("Boolean",false);t.PrElementType.OBJECT=t.PrElementType.create("Object",false);t.PrElementType.THE_NULL=t.PrElementType.create("Null",false);t.PrElementType.ANY=t.PrElementType.create("Any",false)};t.PrElementType.prototype.m_isNumber=false;t.PrElementType.prototype.isNumber=function(){return this.m_isNumber};t.PrBoolean=function(){};t.PrBoolean.prototype=new t.PrElement;t.PrBoolean.prototype._ff_c="PrBoolean";t.PrBoolean.TRUE=null;t.PrBoolean.FALSE=null;t.PrBoolean.createWithValue=function(e){return e?t.PrBoolean.TRUE:t.PrBoolean.FALSE};t.PrBoolean.staticSetup=function(){t.PrBoolean.TRUE=new t.PrBoolean;t.PrBoolean.TRUE.m_value=true;t.PrBoolean.FALSE=new t.PrBoolean;t.PrBoolean.FALSE.m_value=false};t.PrBoolean.prototype.m_value=false;t.PrBoolean.prototype.getPermaCopy=function(){return t.PrBoolean.createWithValue(this.m_value)};t.PrBoolean.prototype.getBoolean=function(){return this.m_value};t.PrBoolean.prototype.getType=function(){return t.PrElementType.BOOLEAN};t.PrBoolean.prototype.asBoolean=function(){return this};t.PrBoolean.prototype.asString=function(){return t.PrFactory.createString(t.XBoolean.convertToString(this.m_value))};t.PrObject=function(){};t.PrObject.prototype=new t.PrElement;t.PrObject.prototype._ff_c="PrObject";t.PrObject.create=function(){return new t.PrObject};t.PrObject.prototype.m_value=null;t.PrObject.prototype.releaseObject=function(){this.m_value=null;t.PrElement.prototype.releaseObject.call(this)};t.PrObject.prototype.getObject=function(){return this.m_value};t.PrObject.prototype.getObjectValue=function(){return this.getObject()};t.PrObject.prototype.setObject=function(t){this.m_value=t};t.PrObject.prototype.getType=function(){return t.PrElementType.OBJECT};t.PrObject.prototype.asObject=function(){return this};t.PrString=function(){};t.PrString.prototype=new t.PrElement;t.PrString.prototype._ff_c="PrString";t.PrString.EMPTY=null;t.PrString.createWithValue=function(e){if(t.isNull(e)){return null}if(t.XString.size(e)===0){return t.PrString.EMPTY}var r=new t.PrString;r.m_value=e;return r};t.PrString.staticSetup=function(){t.PrString.EMPTY=new t.PrString;t.PrString.EMPTY.m_value=""};t.PrString.prototype.m_value=null;t.PrString.prototype.getPermaCopy=function(){return t.PrString.createWithValue(this.m_value)};t.PrString.prototype.releaseObject=function(){this.m_value=null;t.PrElement.prototype.releaseObject.call(this)};t.PrString.prototype.getType=function(){return t.PrElementType.STRING};t.PrString.prototype.getString=function(){return this.m_value};t.PrString.prototype.asString=function(){return this};t.XmlParser=function(){};t.XmlParser.prototype=new t.DfDocumentParser;t.XmlParser.prototype._ff_c="XmlParser";t.XmlParser.SLASH=47;t.XmlParser.create=function(){var e=new t.XmlParser;e.setup();return e};t.XmlParser.prototype.parse=function(e){this.clearMessages();var r=t.XString.trim(e);if(t.XString.size(r)===0){this.addErrorExt(t.OriginLayer.PROTOCOL,t.ErrorCodes.PARSER_ERROR,"The XML content is empty.",t.XStringValue.create(r));return t.PrFactory.createStructure()}return this.parseInternal(r)};t.XmlParser.prototype.getClosingTag=function(e){return t.XStringUtils.concatenate3("</",e,">")};t.XmlParser.prototype.getTagName=function(e){var r=t.XString.indexOf(e," ");return t.XString.substring(e,0,r)};t.XmlParser.prototype.getAttributes=function(e){var r=t.XString.indexOf(e," ");if(r===-1){return""}var n=t.XString.substring(e,r,-1);if(t.XString.endsWith(n,"/")){return t.XStringUtils.stripRight(n,1)}return n};t.XmlParser.prototype.handleAttributes=function(e,r){if(e.isList()){return}var n=e;var i=t.XString.size(r);var s=0;while(s<i){var a=t.XString.indexOfFrom(r,"=",s);if(a===-1){break}var l;var o=t.XString.getCharAt(r,a+1);if(o===34){l=t.XString.indexOfFrom(r,'"',a+2)}else{l=t.XString.indexOfFrom(r,"'",a+2)}var u=t.XString.indexOfFrom(r," ",a)===-1;var p;if(u){p=t.XString.substring(r,a+1,i)}else{p=t.XString.substring(r,a+1,l+1)}var c=t.XStringUtils.concatenate2("-",t.XString.trim(t.XString.substring(r,s,a)));n.putString(c,t.XStringUtils.stripChars(p,1));if(u){break}s=l+1}};t.XmlParser.prototype.handleContent=function(e,r,n){if(e.isList()){var i=e;i.addString(r);return}var s=e;var a=this.getClosingTag(n);if(t.XString.endsWith(r,a)){s.putString(n,t.XStringUtils.stripRight(r,t.XString.size(a)))}else{s.putString(n,r)}};t.XmlParser.prototype.pop=function(t){return t.removeAt(t.size()-1)};t.XmlParser.prototype.peek=function(t){if(t.isEmpty()){return null}return t.get(t.size()-1)};t.XmlParser.prototype.navigateToParent=function(t,e){var r=t;for(var n=0;n<e.size();n++){if(r.isStructure()){r=r.getByKey(e.get(n));if(r.isList()){var i=r.asList();r=i.getStructureAt(i.size()-1)}}}return r};t.XmlParser.prototype.skipTag=function(e,r){var n=t.XString.getCharAt(e,r+1);return n===33||n===63};t.XmlParser.prototype.parseInternal=function(e){this.addProfileStep("Parse XML");var r=t.PrFactory.createStructure();var n=r;var i;var s=t.XListOfString.create();var a=0;var l=t.XString.size(e);while(a<l){var o=t.XString.indexOfFrom(e,"<",a);if(o===-1){break}var u=t.XString.indexOfFrom(e,">",o);if(this.skipTag(e,o)){a=u+1;continue}var p=t.XString.substring(e,o+1,u);var c=this.getTagName(p);var m=t.XString.getCharAt(c,0)===t.XmlParser.SLASH;if(m){if(!t.XString.endsWith(c,this.peek(s))){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("The tag '",c,"' is not opened properly."),t.XStringValue.create(e));break}this.pop(s);n=this.navigateToParent(r,s);a=u+1;continue}var g=this.getAttributes(p);var y=t.XStringUtils.isNotNullAndNotEmpty(g);var f=this.getClosingTag(c);var P=t.XString.getCharAt(p,t.XString.size(p)-1)===t.XmlParser.SLASH;var h=t.XString.indexOfFrom(e,f,u);if(P&&t.notNull(n)){if(!y){if(r.isEmpty()&&n.isStructure()){n.asStructure().putNull(t.XStringUtils.stripRight(c,1))}if(n.isList()){n.addNewStructure()}a=u+1;continue}}else if(t.XString.indexOf(e,f)===-1){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,t.XStringUtils.concatenate3("The tag '",c,"' is not closed properly."),t.XStringValue.create(e));break}var d="";if(!P){d=this.getContent(e,u,h)}var S=t.XString.isEqual(d,"");var E=!S&&t.XString.getCharAt(d,0)===60;i=this.getListForElement(n,c);if(t.notNull(i)){n=i;if(y||S||E){n=i.addNewStructure()}}else if(t.notNull(n)){if(y||E){n=n.putNewStructure(c)}}if(!S&&!E&&!P&&t.notNull(n)){this.handleContent(n,d,c)}if(y&&t.notNull(n)){this.handleAttributes(n,g)}if(P){n=this.navigateToParent(r,s)}else{s.add(c)}a=u}t.XObjectExt.release(s);this.endProfileStep();if(this.hasErrors()){return t.PrFactory.createStructure()}if(!r.hasElements()){this.addErrorExt(t.OriginLayer.IOLAYER,t.ErrorCodes.PARSER_ERROR,"The XML contains no tags.",t.XStringValue.create(e))}return r};t.XmlParser.prototype.getListForElement=function(e,r){if(t.notNull(e)&&e.isStructure()&&e.asStructure().containsKey(r)){var n=e.asStructure();var i=n.getByKey(r);var s=t.PrUtils.convertToList(i);n.put(r,s);return s}return null};t.XmlParser.prototype.getContent=function(e,r,n){if(n===-1){return t.XString.trim(t.XString.substring(e,r+1,-1))}return t.XString.trim(t.XString.substring(e,r+1,n))};t.PrDouble=function(){};t.PrDouble.prototype=new t.PrElement;t.PrDouble.prototype._ff_c="PrDouble";t.PrDouble.ZERO=null;t.PrDouble.staticSetup=function(){t.PrDouble.ZERO=new t.PrDouble;t.PrDouble.ZERO.m_value=0};t.PrDouble.createWithValue=function(e){if(e===0){return t.PrDouble.ZERO}var r=new t.PrDouble;r.m_value=e;return r};t.PrDouble.prototype.m_value=0;t.PrDouble.prototype.getPermaCopy=function(){return t.PrDouble.createWithValue(this.m_value)};t.PrDouble.prototype.getType=function(){return t.PrElementType.DOUBLE};t.PrDouble.prototype.getInteger=function(){return t.XDouble.convertToInt(this.m_value)};t.PrDouble.prototype.getLong=function(){return t.XDouble.convertToLong(this.m_value)};t.PrDouble.prototype.asNumber=function(){return this};t.PrDouble.prototype.asDouble=function(){return this};t.PrDouble.prototype.getDouble=function(){return this.m_value};t.PrDouble.prototype.asString=function(){return t.PrString.createWithValue(t.XDouble.convertToString(this.m_value))};t.PrInteger=function(){};t.PrInteger.prototype=new t.PrElement;t.PrInteger.prototype._ff_c="PrInteger";t.PrInteger.ints=null;t.PrInteger.staticSetup=function(){t.PrInteger.ints=t.XArray.create(128);for(var e=-63;e<64;e++){var r=new t.PrInteger;r.m_value=e;t.PrInteger.ints.set(e+63,r)}};t.PrInteger.createWithValue=function(e){if(e>=-63&&e<64){return t.PrInteger.ints.get(e+63)}var r=new t.PrInteger;r.m_value=e;return r};t.PrInteger.prototype.m_value=0;t.PrInteger.prototype.getPermaCopy=function(){return t.PrInteger.createWithValue(this.m_value)};t.PrInteger.prototype.getType=function(){return t.PrElementType.INTEGER};t.PrInteger.prototype.getInteger=function(){return this.m_value};t.PrInteger.prototype.getLong=function(){return this.m_value};t.PrInteger.prototype.asNumber=function(){return this};t.PrInteger.prototype.asInteger=function(){return this};t.PrInteger.prototype.getDouble=function(){return this.m_value};t.PrInteger.prototype.asString=function(){return t.PrString.createWithValue(t.XInteger.convertToString(this.m_value))};t.PrLong=function(){};t.PrLong.prototype=new t.PrElement;t.PrLong.prototype._ff_c="PrLong";t.PrLong.create=function(){return new t.PrLong};t.PrLong.createWithValue=function(e){var r=new t.PrLong;r.m_value=e;return r};t.PrLong.prototype.m_value=0;t.PrLong.prototype.getPermaCopy=function(){return t.PrLong.createWithValue(this.m_value)};t.PrLong.prototype.getType=function(){return t.PrElementType.LONG};t.PrLong.prototype.getInteger=function(){return t.XInteger.convertFromStringWithDefault(t.XLong.convertToString(this.m_value),0)};t.PrLong.prototype.setLong=function(t){this.m_value=t};t.PrLong.prototype.asNumber=function(){return this};t.PrLong.prototype.getDouble=function(){return this.m_value};t.PrLong.prototype.asLong=function(){return this};t.PrLong.prototype.getLong=function(){return this.m_value};t.PrStructure=function(){};t.PrStructure.prototype=new t.PrElement;t.PrStructure.prototype._ff_c="PrStructure";t.PrStructure.create=function(){var e=new t.PrStructure;e.setup();return e};t.PrStructure.createDeepCopy=function(e){return t.PrUtils.createDeepCopyExt(e,null)};t.PrStructure.prototype.m_elementValueMap=null;t.PrStructure.prototype.setup=function(){this.m_elementValueMap=t.XLinkedHashMapByString.create()};t.PrStructure.prototype.releaseObject=function(){this.m_elementValueMap=t.XObjectExt.release(this.m_elementValueMap);t.PrElement.prototype.releaseObject.call(this)};t.PrStructure.prototype.getType=function(){return t.PrElementType.STRUCTURE};t.PrStructure.prototype.asStructure=function(){return this};t.PrStructure.prototype.getStringByKey=function(t){return this.getStringByKeyExt(t,null)};t.PrStructure.prototype.putString=function(e,r){if(t.isNull(e)){throw t.XException.createRuntimeException("Missing key")}this.m_elementValueMap.put(e,t.PrString.createWithValue(r))};t.PrStructure.prototype.getIntegerByKey=function(t){return this.getIntegerByKeyExt(t,0)};t.PrStructure.prototype.getIntegerByKeyExt=function(e,r){var n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isInteger()){return n.getInteger()}else if(n.isLong()){return t.XLong.convertToInt(n.getLong())}else if(n.isDouble()){return t.XDouble.convertToInt(n.getDouble())}}return r};t.PrStructure.prototype.putInteger=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrInteger.createWithValue(r))}};t.PrStructure.prototype.getLongByKey=function(t){return this.getLongByKeyExt(t,0)};t.PrStructure.prototype.putLong=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrLong.createWithValue(r))}};t.PrStructure.prototype.getDoubleByKey=function(t){return this.getDoubleByKeyExt(t,0)};t.PrStructure.prototype.putDouble=function(e,r){if(t.XMath.isNaN(r)){this.putNull(e)}else{this.m_elementValueMap.put(e,t.PrDouble.createWithValue(r))}};t.PrStructure.prototype.getBooleanByKey=function(t){return this.getBooleanByKeyExt(t,false)};t.PrStructure.prototype.putBoolean=function(e,r){this.m_elementValueMap.put(e,t.PrBoolean.createWithValue(r))};t.PrStructure.prototype.putNull=function(t){this.m_elementValueMap.put(t,null)};t.PrStructure.prototype.hasNullByKey=function(t){return this.m_elementValueMap.containsKey(t)&&this.m_elementValueMap.getByKey(t)===null};t.PrStructure.prototype.getStructureByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.getListByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.putNotNullAndNotEmpty=function(e,r){if(t.notNull(r)&&(!r.isList()||!r.asList().isEmpty())&&(!r.isStructure()||!r.asStructure().isEmpty())&&(!r.isString()||!t.XStringUtils.isNullOrEmpty(r.asString().getString()))){this.put(e,r)}};t.PrStructure.prototype.remove=function(t){return this.m_elementValueMap.remove(t)};t.PrStructure.prototype.getElementTypeByKey=function(e){var r=this.m_elementValueMap.getByKey(e);return t.isNull(r)?t.PrElementType.THE_NULL:r.getType()};t.PrStructure.prototype.hasElements=function(){return this.m_elementValueMap.hasElements()};t.PrStructure.prototype.isEmpty=function(){return this.m_elementValueMap.isEmpty()};t.PrStructure.prototype.getBooleanByKeyExt=function(e,r){var n=this.m_elementValueMap.getByKey(e);var i=r;if(t.notNull(n)){if(n.isBoolean()){i=n.getBoolean()}else if(n.isString()){var s=n.asString().getString();i=t.XBoolean.convertFromStringWithDefault(s,r)}}return i};t.PrStructure.prototype.getStringByKeyExt=function(e,r){if(this.containsKey(e)){var n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)&&n.isString()){return n.getString()}return null}return r};t.PrStructure.prototype.getLongByKeyExt=function(e,r){var n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isLong()){return n.getLong()}else if(n.isInteger()){return n.getInteger()}else if(n.isDouble()){return t.XDouble.convertToLong(n.getDouble())}}return r};t.PrStructure.prototype.getDoubleByKeyExt=function(e,r){var n=this.m_elementValueMap.getByKey(e);if(t.notNull(n)){if(n.isDouble()){return n.getDouble()}else if(n.isInteger()){return n.getInteger()}else if(n.isLong()){return n.getLong()}}return r};t.PrStructure.prototype.putStringNotNull=function(e,r){if(t.notNull(r)){this.putString(e,r)}};t.PrStructure.prototype.putStringNotNullAndNotEmpty=function(e,r){if(t.XStringUtils.isNotNullAndNotEmpty(r)){this.putString(e,r)}};t.PrStructure.prototype.putNewList=function(e){var r=t.PrFactory.createList();this.put(e,r);return r};t.PrStructure.prototype.putNewStructure=function(e){var r=t.PrStructure.create();this.put(e,r);return r};t.PrStructure.prototype.getKeysAsReadOnlyListOfStringSorted=function(){var e=this.getKeysAsReadOnlyListOfString();if(!t.XCollectionUtils.hasElements(e)){return e}var r=t.XListOfString.createFromReadOnlyList(e);r.sortByDirection(t.XSortDirection.ASCENDING);return r};t.PrStructure.prototype.hasStringByKey=function(e){return this.containsKey(e)&&this.getElementTypeByKey(e)===t.PrElementType.STRING};t.PrStructure.prototype.size=function(){return this.m_elementValueMap.size()};t.PrStructure.prototype.containsKey=function(t){return this.m_elementValueMap.containsKey(t)};t.PrStructure.prototype.contains=function(t){return this.m_elementValueMap.contains(t)};t.PrStructure.prototype.getKeysAsIteratorOfString=function(){return this.m_elementValueMap.getKeysAsIteratorOfString()};t.PrStructure.prototype.getKeysAsReadOnlyListOfString=function(){return this.m_elementValueMap.getKeysAsReadOnlyListOfString()};t.PrStructure.prototype.put=function(t,e){this.m_elementValueMap.put(t,e)};t.PrStructure.prototype.putAll=function(e){if(t.notNull(e)){var r=e.getKeysAsReadOnlyListOfString();var n=r.size();for(var i=0;i<n;i++){var s=r.get(i);var a=e.getByKey(s);this.put(s,a)}}};t.PrStructure.prototype.clear=function(){this.m_elementValueMap.clear()};t.PrStructure.prototype.getByKey=function(t){return this.m_elementValueMap.getByKey(t)};t.PrStructure.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.PrStructure.prototype.putIfNotNull=function(e,r){if(t.notNull(r)){this.m_elementValueMap.put(e,r)}};t.PrStructure.prototype.createMapByStringCopy=function(){return this.m_elementValueMap.createMapByStringCopy()};t.PrStructure.prototype.getValuesAsReadOnlyList=function(){var e=t.XList.create();var r=this.m_elementValueMap.getIterator();while(r.hasNext()){var n=r.next();if(t.isNull(n)){continue}var i=n.getType();if(i.isNumber()||i===t.PrElementType.BOOLEAN||i===t.PrElementType.STRING){e.add(n)}}return e};t.PrTemplateStructure=function(){};t.PrTemplateStructure.prototype=new t.PrElement;t.PrTemplateStructure.prototype._ff_c="PrTemplateStructure";t.PrTemplateStructure.TEMPLATE_PATH_NAME="$ref";t.PrTemplateStructure.TEMPLATE_REPLACE_NAME="$replace";t.PrTemplateStructure.createStructureWrapper=function(e,r,n){var i=new t.PrTemplateStructure;i.setupStructureWrapper(e,r,n,null);return i};t.PrTemplateStructure.createStructureWrapperWithTemplate=function(e,r,n,i){var s=new t.PrTemplateStructure;s.setupStructureWrapper(e,r,n,i);return s};t.PrTemplateStructure.prototype.m_root=null;t.PrTemplateStructure.prototype.m_parent=null;t.PrTemplateStructure.prototype.m_structure=null;t.PrTemplateStructure.prototype.m_template=null;t.PrTemplateStructure.prototype.m_replaceTemplateFields=null;t.PrTemplateStructure.prototype.setupStructureWrapper=function(e,r,n,i){this.m_parent=r;this.m_structure=n;var s=this.m_structure.getListByKey(t.PrTemplateStructure.TEMPLATE_REPLACE_NAME);if(t.notNull(s)){this.m_replaceTemplateFields=t.XHashSetOfString.create();var a=s.size();for(var l=0;l<a;l++){this.m_replaceTemplateFields.add(s.getStringAt(l))}}this.m_root=e;this.m_template=i;if(t.isNull(this.m_template)){t.XObjectExt.assertNotNullExt(this.m_root,"root shall never be null");this.m_template=this.tryGetTemplateFromRoot()}};t.PrTemplateStructure.prototype.tryGetTemplateFromRoot=function(){var e=this.m_structure.getStringByKey(t.PrTemplateStructure.TEMPLATE_PATH_NAME);if(t.XStringUtils.isNullOrEmpty(e)||!t.XString.startsWith(e,"#")){return null}var r=this.m_root;var n=t.XStringTokenizer.splitString(e,"/");var i=n.size();for(var s=1;s<i;s++){r=r.getStructureByKey(n.get(s))}return t.PrTemplateStructure.createStructureWrapper(this.m_root,this.getParent(),r)};t.PrTemplateStructure.prototype.isStructure=function(){return true};t.PrTemplateStructure.prototype.getPermaCopy=t.noSupport;t.PrTemplateStructure.prototype.getType=function(){return this.m_structure.getType()};t.PrTemplateStructure.prototype.asStructure=function(){return this};t.PrTemplateStructure.prototype.getStringRepresentation=function(){return this.m_structure.getStringRepresentation()};t.PrTemplateStructure.prototype.getValueType=function(){return this.m_structure.getValueType()};t.PrTemplateStructure.prototype.getComponentType=function(){return this.m_structure.getComponentType()};t.PrTemplateStructure.prototype.getByKey=function(e){var r=this.m_structure.getByKey(e);if(t.isNull(r)&&this.isTemplateAvailable(e)){r=this.m_template.getByKey(e)}return r};t.PrTemplateStructure.prototype.getValuesAsReadOnlyList=function(){var e=t.XList.create();e.addAll(this.m_structure.getValuesAsReadOnlyList());if(t.notNull(this.m_template)){e.addAll(this.m_template.getValuesAsReadOnlyList())}return e};t.PrTemplateStructure.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.PrTemplateStructure.prototype.contains=function(e){var r=this.m_structure.contains(e);if(!r&&t.notNull(this.m_template)){r=this.m_template.contains(e)}return r};t.PrTemplateStructure.prototype.isEmpty=function(){var e=this.m_structure.isEmpty();if(!e&&t.notNull(this.m_template)){e=this.m_template.isEmpty()}return e};t.PrTemplateStructure.prototype.hasElements=function(){var e=this.m_structure.hasElements();if(!e&&t.notNull(this.m_template)){e=this.m_template.hasElements()}return e};t.PrTemplateStructure.prototype.size=function(){var e=this.m_structure.size();if(t.notNull(this.m_template)){e=e+this.m_template.size()}return e};t.PrTemplateStructure.prototype.containsKey=function(t){var e=this.m_structure.containsKey(t);if(!e&&this.isTemplateAvailable(t)){e=this.m_template.containsKey(t)}return e};t.PrTemplateStructure.prototype.getKeysAsReadOnlyListOfString=function(){var e=t.XListOfString.create();e.addAll(this.m_structure.getKeysAsReadOnlyListOfString());if(t.notNull(this.m_template)){e.addAll(this.m_template.getKeysAsReadOnlyListOfString())}return e};t.PrTemplateStructure.prototype.getKeysAsIteratorOfString=function(){return this.getKeysAsReadOnlyListOfString().getIterator()};t.PrTemplateStructure.prototype.getStringByKey=function(e){var r=this.getByKey(e);if(t.isNull(r)||r.getType()!==t.PrElementType.STRING){return null}return t.ReplaceTagHandler.handle(this,r.asString().getString())};t.PrTemplateStructure.prototype.getStringByKeyExt=function(e,r){var n=this.getStringByKey(e);return t.isNull(n)?r:n};t.PrTemplateStructure.prototype.getIntegerByKey=function(t){return this.getByKey(t).asNumber().getInteger()};t.PrTemplateStructure.prototype.getIntegerByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getInteger()};t.PrTemplateStructure.prototype.getLongByKey=function(t){return this.getByKey(t).asNumber().getLong()};t.PrTemplateStructure.prototype.getLongByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getLong()};t.PrTemplateStructure.prototype.getDoubleByKey=function(t){return this.getByKey(t).asNumber().getDouble()};t.PrTemplateStructure.prototype.getDoubleByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:n.asNumber().getDouble()};t.PrTemplateStructure.prototype.getBooleanByKey=function(t){return this.getByKey(t).asBoolean().getBoolean()};t.PrTemplateStructure.prototype.getBooleanByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:n.asBoolean().getBoolean()};t.PrTemplateStructure.prototype.hasNullByKey=function(t){var e=this.m_structure.hasNullByKey(t);if(!e&&this.isTemplateAvailable(t)){e=this.m_template.hasNullByKey(t)}return e};t.PrTemplateStructure.prototype.putAll=function(t){var e=t.getKeysAsReadOnlyListOfString();var r=e.size();for(var n=0;n<r;n++){var i=e.get(n);var s=t.getByKey(i);this.put(i,s)}};t.PrTemplateStructure.prototype.putString=t.noSupport;t.PrTemplateStructure.prototype.putStringNotNull=t.noSupport;t.PrTemplateStructure.prototype.putStringNotNullAndNotEmpty=t.noSupport;t.PrTemplateStructure.prototype.remove=t.noSupport;t.PrTemplateStructure.prototype.clear=t.noSupport;t.PrTemplateStructure.prototype.putInteger=t.noSupport;t.PrTemplateStructure.prototype.putLong=t.noSupport;t.PrTemplateStructure.prototype.putDouble=t.noSupport;t.PrTemplateStructure.prototype.putBoolean=t.noSupport;t.PrTemplateStructure.prototype.putNull=t.noSupport;t.PrTemplateStructure.prototype.put=t.noSupport;t.PrTemplateStructure.prototype.getStructureByKey=function(e){var r=this.m_structure.containsKey(e);var n=this.isTemplateAvailable(e);if(r&&n){var i=this.m_structure.getStructureByKey(e);var s=t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.getByKey(e).asStructure());return t.PrTemplateStructure.createStructureWrapperWithTemplate(this.m_root,this,i,s)}if(n){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.getByKey(e).asStructure())}if(r){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_structure.getStructureByKey(e))}return null};t.PrTemplateStructure.prototype.getListByKey=function(e){var r=this.m_structure.containsKey(e);var n=this.isTemplateAvailable(e);if(r&&n){var i=this.m_structure.getListByKey(e);var s=t.PrTemplateList.createListWrapper(this.m_root,this,this.m_template.getByKey(e).asList());return t.PrTemplateList.createListWrapperWithTemplate(this.m_root,this,i,s)}if(n){return t.PrTemplateList.createListWrapper(this.m_root,this,this.m_template.getByKey(e).asList())}if(r){return t.PrTemplateList.createListWrapper(this.m_root,this,this.m_structure.getListByKey(e))}return null};t.PrTemplateStructure.prototype.putNotNullAndNotEmpty=function(t,e){this.m_structure.putNotNullAndNotEmpty(t,e)};t.PrTemplateStructure.prototype.putNewList=t.noSupport;t.PrTemplateStructure.prototype.putNewStructure=t.noSupport;t.PrTemplateStructure.prototype.getElementTypeByKey=function(e){var r=this.m_structure.getElementTypeByKey(e);if((t.isNull(r)||r===t.PrElementType.THE_NULL)&&t.notNull(this.m_template)){return this.m_template.getElementTypeByKey(e)}return r};t.PrTemplateStructure.prototype.getCoreStructureElementNames=function(){return this.m_structure.getKeysAsReadOnlyListOfString()};t.PrTemplateStructure.prototype.getKeysAsReadOnlyListOfStringSorted=function(){var e=this.getKeysAsReadOnlyListOfString();e.sortByDirection(t.XSortDirection.ASCENDING);return e};t.PrTemplateStructure.prototype.hasStringByKey=function(t){var e=this.m_structure.hasStringByKey(t);if(!e&&this.isTemplateAvailable(t)){return this.m_template.hasStringByKey(t)}return e};t.PrTemplateStructure.prototype.getParent=function(){return this.m_parent};t.PrTemplateStructure.prototype.setParent=function(t){this.m_parent=t};t.PrTemplateStructure.prototype.isTemplateAvailable=function(e){return t.notNull(this.m_template)&&this.m_template.containsKey(e)&&(t.isNull(this.m_replaceTemplateFields)||!this.m_replaceTemplateFields.contains(e))};t.PrTemplateStructure.prototype.releaseObject=function(){this.m_structure=t.XObjectExt.release(this.m_structure);this.m_template=t.XObjectExt.release(this.m_template);this.m_replaceTemplateFields=t.XObjectExt.release(this.m_replaceTemplateFields);this.m_parent=null;this.m_root=null;t.PrElement.prototype.releaseObject.call(this)};t.PrTemplateStructure.prototype.putIfNotNull=t.noSupport;t.PrTemplateStructure.prototype.createMapByStringCopy=t.noSupport;t.XProperties=function(){};t.XProperties.prototype=new t.DfAbstractMapOfStringByString;t.XProperties.prototype._ff_c="XProperties";t.XProperties.create=function(){var e=new t.XProperties;e.setupExt(null,null);return e};t.XProperties.createWithParent=function(e){var r=new t.XProperties;r.setupExt(null,e);return r};t.XProperties.createByMapCopy=function(e){var r=new t.XProperties;r.setupExt(e,null);return r};t.XProperties.prototype.m_storage=null;t.XProperties.prototype.m_parent=null;t.XProperties.prototype.m_isParentEnabled=false;t.XProperties.prototype.setupExt=function(e,r){if(t.isNull(e)){this.m_storage=t.XHashMapOfStringByString.create()}else{this.m_storage=t.XHashMapOfStringByString.createMapOfStringByStringStaticCopy(e)}this.setParent(r)};t.XProperties.prototype.releaseObject=function(){this.m_storage=t.XObjectExt.release(this.m_storage);this.m_parent=null;t.DfAbstractMapOfStringByString.prototype.releaseObject.call(this)};t.XProperties.prototype.getComponentType=function(){return this.getValueType()};t.XProperties.prototype.getValueType=function(){return t.XValueType.PROPERTIES};t.XProperties.prototype.cloneExt=function(e){var r=t.XProperties.createByMapCopy(this);if(t.notNull(this.m_parent)){this.setParent(this.m_parent);this.setEnableParentProperties(this.m_isParentEnabled)}return r};t.XProperties.prototype.createMapOfStringByStringCopy=function(){var e;if(this.m_isParentEnabled===true){var r=this.getKeysAsReadOnlyListOfString();e=t.XHashMapOfStringByString.create();for(var n=0;n<r.size();n++){var i=r.get(n);var s=this.getByKey(i);e.put(i,s)}}else{e=this.m_storage.createMapOfStringByStringCopy()}return e};t.XProperties.prototype.put=function(e,r){if(t.isNull(r)){this.m_storage.remove(e)}else{this.m_storage.put(e,r)}};t.XProperties.prototype.remove=function(t){return this.m_storage.remove(t)};t.XProperties.prototype.getKeysAsReadOnlyListOfString=function(){var e;e=this.m_storage.getKeysAsReadOnlyListOfString();if(this.m_isParentEnabled===true){var r=t.XHashSetOfString.create();r.addAll(e);var n=this.m_parent.getKeysAsReadOnlyListOfString();r.addAll(n);e=r.getValuesAsReadOnlyListOfString()}return e};t.XProperties.prototype.getValuesAsReadOnlyListOfString=function(){var e;if(this.m_isParentEnabled===true){var r=this.getKeysAsReadOnlyListOfString();var n=t.XListOfString.create();for(var i=0;i<r.size();i++){var s=r.get(i);var a=this.getByKey(s);n.add(a)}n.sortByDirection(t.XSortDirection.ASCENDING);e=n}else{e=this.m_storage.getValuesAsReadOnlyListOfString()}return e};t.XProperties.prototype.clear=function(){this.m_storage.clear()};t.XProperties.prototype.size=function(){var t;if(this.m_isParentEnabled===true){t=this.getKeysAsReadOnlyListOfString().size()}else{t=this.m_storage.size()}return t};t.XProperties.prototype.hasElements=function(){var t=this.m_storage.hasElements();if(t===false&&this.m_isParentEnabled===true){t=this.m_parent.hasElements()}return t};t.XProperties.prototype.contains=function(t){var e=this.m_storage.contains(t);if(e===false&&this.m_isParentEnabled===true){e=this.m_parent.contains(t)}return e};t.XProperties.prototype.isValueDefault=function(t){return!this.isValueDefined(t)};t.XProperties.prototype.isValueDefined=function(t){return this.m_storage.containsKey(t)};t.XProperties.prototype.containsKey=function(t){var e=this.m_storage.containsKey(t);if(e===false&&this.m_isParentEnabled===true){e=this.m_parent.containsKey(t)}return e};t.XProperties.prototype.assertNameAndGet=function(e){var r=this.getByKey(e);t.XStringUtils.checkStringNotEmpty(r,t.XStringUtils.concatenate2("Property cannot be found: ",e));return r};t.XProperties.prototype.getByKey=function(e){var r=this.m_storage.getByKey(e);if(t.isNull(r)&&this.m_isParentEnabled===true){r=this.m_parent.getByKey(e)}return r};t.XProperties.prototype.getIntegerByKey=function(e){return t.XInteger.convertFromStringWithRadix(this.assertNameAndGet(e),10)};t.XProperties.prototype.getIntegerByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:t.XInteger.convertFromStringWithDefault(n,r)};t.XProperties.prototype.putInteger=function(e,r){this.put(e,t.XInteger.convertToString(r))};t.XProperties.prototype.getLongByKey=function(e){return t.XLong.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getLongByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:t.XLong.convertFromStringWithDefault(n,r)};t.XProperties.prototype.putLong=function(e,r){this.put(e,t.XLong.convertToString(r))};t.XProperties.prototype.getDoubleByKey=function(e){return t.XDouble.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getDoubleByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:t.XDouble.convertFromStringWithDefault(n,r)};t.XProperties.prototype.putDouble=function(e,r){this.put(e,t.XDouble.convertToString(r))};t.XProperties.prototype.getBooleanByKey=function(e){return t.XBoolean.convertFromString(this.assertNameAndGet(e))};t.XProperties.prototype.getBooleanByKeyExt=function(e,r){var n=this.getByKey(e);return t.isNull(n)?r:t.XBoolean.convertFromStringWithDefault(n,r)};t.XProperties.prototype.putBoolean=function(e,r){this.put(e,t.XBoolean.convertToString(r))};t.XProperties.prototype.getStringByKey=function(t){return this.getByKey(t)};t.XProperties.prototype.getStringByKeyExt=function(e,r){var n=this.getByKey(e);if(t.isNull(n)){n=r}return n};t.XProperties.prototype.putStringNotNull=function(e,r){if(t.notNull(r)){this.m_storage.put(e,r)}};t.XProperties.prototype.putStringNotNullAndNotEmpty=function(e,r){if(t.XStringUtils.isNotNullAndNotEmpty(r)){this.putString(e,r)}};t.XProperties.prototype.putString=function(e,r){if(t.isNull(r)){this.m_storage.remove(e)}else{this.m_storage.put(e,r)}};t.XProperties.prototype.putNull=function(t){this.m_storage.put(t,null)};t.XProperties.prototype.hasNullByKey=function(t){return this.containsKey(t)&&this.getByKey(t)===null};t.XProperties.prototype.serialize=function(){var e=t.XListOfString.create();e.addAll(this.getKeysAsReadOnlyListOfString());e.sortByDirection(t.XSortDirection.ASCENDING);var r=t.XStringBuffer.create();for(var n=0;n<e.size();n++){var i=e.get(n);var s=this.m_storage.getByKey(i);var a=t.XStringUtils.concatenate3(i,"=",s);r.append(t.XStringUtils.escapeLineEndings(a)).append("\n")}return r.toString()};t.XProperties.prototype.deserialize=function(e){var r=t.XStringTokenizer.splitString(e,"\n");if(t.notNull(r)){for(var n=0;n<r.size();n++){var i=r.get(n);var s=t.XStringUtils.unescapeLineEndings(i);if(t.XStringUtils.isNotNullAndNotEmpty(s)){if(!t.XString.startsWith(s,"#")){var a=t.XString.indexOf(s,"=");if(a!==-1){var l=t.XString.substring(s,a+1,-1);var o=t.XString.trim(t.XString.substring(s,0,a));this.put(o,l)}}}}}};t.XProperties.prototype.getParent=function(){return this.m_parent};t.XProperties.prototype.setParent=function(e){this.m_parent=e;this.m_isParentEnabled=t.notNull(e)};t.XProperties.prototype.setEnableParentProperties=function(e){this.m_isParentEnabled=e&&t.notNull(this.m_parent)};t.XProperties.prototype.isParentPropertiesEnabled=function(){return this.m_isParentEnabled};t.XProperties.prototype.getStringRepresentation=function(){return this.toString()};t.XProperties.prototype.toString=function(){return this.m_storage.toString()};t.DfPrProxyElement=function(){};t.DfPrProxyElement.prototype=new t.PrElement;t.DfPrProxyElement.prototype._ff_c="DfPrProxyElement";t.DfPrProxyElement.prototype.isProxy=function(){return true};t.DfPrProxyElement.prototype.getKeysAsIteratorOfString=function(){return this.getKeysAsReadOnlyListOfString().getIterator()};t.DfPrProxyElement.prototype.isEmpty=function(){return this.getKeysAsReadOnlyListOfString().size()===0};t.DfPrProxyElement.prototype.hasElements=function(){return this.getKeysAsReadOnlyListOfString().size()>0};t.DfPrProxyElement.prototype.size=function(){return this.getKeysAsReadOnlyListOfString().size()};t.DfPrProxyElement.prototype.putAll=function(e){t.XMapUtils.putAllObjects(e,this)};t.DfPrProxyElement.prototype.addAll=function(e){t.XListUtils.addAllObjects(e,this)};t.DfPrProxyElement.prototype.getIterator=function(){return this.getValuesAsReadOnlyList().getIterator()};t.DfPrProxyElement.prototype.createArrayCopy=function(){var e=this.size();var r=t.XArray.create(e);t.XArrayUtils.copyFromObjectArray(this,r,0,0,e);return r};t.DfPrProxyElement.prototype.putIfNotNull=function(e,r){if(t.notNull(r)){this.put(e,r)}};t.DfPrProxyElement.prototype.createMapByStringCopy=function(){var e=t.XHashMapByString.create();e.putAll(this);return e};t.DfPrProxyElement.prototype.hasNullByKey=function(t){return this.containsKey(t)&&this.getByKey(t)===null};t.PrList=function(){};t.PrList.prototype=new t.PrElement;t.PrList.prototype._ff_c="PrList";t.PrList.create=function(){var e=new t.PrList;e.setup();return e};t.PrList.createDeepCopy=function(e){return t.PrUtils.createDeepCopyExt(e,null)};t.PrList.prototype.m_list=null;t.PrList.prototype.setup=function(){this.m_list=t.XList.create()};t.PrList.prototype.releaseObject=function(){this.m_list=t.XObjectExt.release(this.m_list);t.PrElement.prototype.releaseObject.call(this)};t.PrList.prototype.getType=function(){return t.PrElementType.LIST};t.PrList.prototype.getStructureAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isStructure()){return null}return r};t.PrList.prototype.getListAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isList()){return null}return r};t.PrList.prototype.get=function(e){var r=this.m_list.get(e);if(t.notNull(r)&&r.getType()===t.PrElementType.THE_NULL){return null}return r};t.PrList.prototype.getStringAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isString()){return null}return r.getString()};t.PrList.prototype.getIntegerAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getInteger()};t.PrList.prototype.getDoubleAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getDouble()};t.PrList.prototype.getLongAt=function(e){var r=this.m_list.get(e);if(t.isNull(r)||!r.isNumeric()){return 0}return r.getLong()};t.PrList.prototype.getElementTypeAt=function(e){var r=this.m_list.get(e);return t.isNull(r)?t.PrElementType.THE_NULL:r.getType()};t.PrList.prototype.addAll=function(t){this.m_list.addAll(t)};t.PrList.prototype.addBoolean=function(e){this.m_list.add(t.PrBoolean.createWithValue(e))};t.PrList.prototype.setBooleanAt=function(e,r){this.m_list.set(e,t.PrBoolean.createWithValue(r))};t.PrList.prototype.addNull=function(){this.m_list.add(null)};t.PrList.prototype.setNullAt=function(t){this.m_list.set(t,null)};t.PrList.prototype.addString=function(e){this.m_list.add(t.PrString.createWithValue(e))};t.PrList.prototype.setStringAt=function(e,r){this.m_list.set(e,t.PrString.createWithValue(r))};t.PrList.prototype.addInteger=function(e){this.m_list.add(t.PrInteger.createWithValue(e))};t.PrList.prototype.setIntegerAt=function(e,r){this.m_list.set(e,t.PrInteger.createWithValue(r))};t.PrList.prototype.addLong=function(e){this.m_list.add(t.PrLong.createWithValue(e))};t.PrList.prototype.setLongAt=function(e,r){this.m_list.set(e,t.PrLong.createWithValue(r))};t.PrList.prototype.set=function(t,e){this.m_list.set(t,e)};t.PrList.prototype.addDouble=function(e){this.m_list.add(t.PrDouble.createWithValue(e))};t.PrList.prototype.setDoubleAt=function(e,r){this.m_list.set(e,t.PrDouble.createWithValue(r))};t.PrList.prototype.getBooleanAt=function(t){return this.m_list.get(t).getBoolean()};t.PrList.prototype.hasNullAt=function(t){return this.m_list.get(t)===null};t.PrList.prototype.add=function(t){this.m_list.add(t)};t.PrList.prototype.asList=function(){return this};t.PrList.prototype.size=function(){return this.m_list.size()};t.PrList.prototype.isEmpty=function(){return this.m_list.isEmpty()};t.PrList.prototype.hasElements=function(){return this.m_list.hasElements()};t.PrList.prototype.addNewStructure=function(){var e=t.PrFactory.createStructure();this.add(e);return e};t.PrList.prototype.addNewList=function(){var e=t.PrList.create();this.add(e);return e};t.PrList.prototype.getStringAtExt=function(e,r){if(this.isIndexValid(e)&&this.getElementTypeAt(e)===t.PrElementType.STRING){return this.getStringAt(e)}return r};t.PrList.prototype.isIndexValid=function(t){return this.size()>t&&t>=0};t.PrList.prototype.getIntegerAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getIntegerAt(t)}return e};t.PrList.prototype.getLongAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getLongAt(t)}return e};t.PrList.prototype.getDoubleAtExt=function(t,e){if(this.isIndexValid(t)&&this.getElementTypeAt(t).isNumber()){return this.getDoubleAt(t)}return e};t.PrList.prototype.getBooleanAtExt=function(e,r){if(this.isIndexValid(e)&&this.getElementTypeAt(e)===t.PrElementType.BOOLEAN){return this.getBooleanAt(e)}return r};t.PrList.prototype.clear=function(){this.m_list.clear()};t.PrList.prototype.addAllStrings=function(e){if(t.notNull(e)){var r=e.size();for(var n=0;n<r;n++){this.addString(e.get(n))}}return this};t.PrList.prototype.insert=function(t,e){this.m_list.insert(t,e)};t.PrList.prototype.removeAt=function(t){return this.m_list.removeAt(t)};t.PrList.prototype.removeElement=function(t){return this.m_list.removeElement(t)};t.PrList.prototype.getValuesAsReadOnlyList=function(){return this.m_list.getValuesAsReadOnlyList()};t.PrList.prototype.getIterator=function(){return this.m_list.getIterator()};t.PrList.prototype.contains=function(t){return this.m_list.contains(t)};t.PrList.prototype.getIndex=function(t){return this.m_list.getIndex(t)};t.PrList.prototype.createArrayCopy=function(){return this.m_list.createArrayCopy()};t.PrTemplateList=function(){};t.PrTemplateList.prototype=new t.PrElement;t.PrTemplateList.prototype._ff_c="PrTemplateList";t.PrTemplateList.TEMPLATE_DELETE_NAME="$delete";t.PrTemplateList.createListWrapper=function(e,r,n){var i=new t.PrTemplateList;i.setupListWrapper(e,r,n,null);return i};t.PrTemplateList.createListWrapperWithTemplate=function(e,r,n,i){var s=new t.PrTemplateList;s.setupListWrapper(e,r,n,i);return s};t.PrTemplateList.prototype.m_root=null;t.PrTemplateList.prototype.m_parent=null;t.PrTemplateList.prototype.m_list=null;t.PrTemplateList.prototype.m_template=null;t.PrTemplateList.prototype.m_size=0;t.PrTemplateList.prototype.setupListWrapper=function(e,r,n,i){this.m_parent=r;this.m_list=n;this.m_root=e;this.m_template=i;if(t.isNull(this.m_template)){this.m_size=this.m_list.size()}else{this.m_size=t.XMath.max(this.m_size,this.m_template.size());var s=this.m_list.size();for(var a=0;a<s;a++){var l=this.m_list.getStructureAt(a);if(t.isNull(l)){break}if(l.getBooleanByKeyExt(t.PrTemplateList.TEMPLATE_DELETE_NAME,false)){this.m_size=a}}}};t.PrTemplateList.prototype.isList=function(){return true};t.PrTemplateList.prototype.getPermaCopy=function(){return this.m_list.getPermaCopy()};t.PrTemplateList.prototype.getType=function(){return this.m_list.getType()};t.PrTemplateList.prototype.asList=function(){return this};t.PrTemplateList.prototype.getStringRepresentation=function(){return this.m_list.getStringRepresentation()};t.PrTemplateList.prototype.getValueType=function(){return this.m_list.getValueType()};t.PrTemplateList.prototype.getComponentType=function(){return this.m_list.getComponentType()};t.PrTemplateList.prototype.getIntegerAt=function(t){return this.m_list.getIntegerAt(t)};t.PrTemplateList.prototype.getIntegerAtExt=function(t,e){return this.m_list.getIntegerAtExt(t,e)};t.PrTemplateList.prototype.getBooleanAt=function(t){return this.m_list.getBooleanAt(t)};t.PrTemplateList.prototype.getBooleanAtExt=function(t,e){return this.m_list.getBooleanAtExt(t,e)};t.PrTemplateList.prototype.getDoubleAt=function(t){return this.m_list.getDoubleAt(t)};t.PrTemplateList.prototype.getDoubleAtExt=function(t,e){return this.m_list.getDoubleAtExt(t,e)};t.PrTemplateList.prototype.getStringAt=function(e){var r=this.m_list.getStringAt(e);return t.ReplaceTagHandler.handle(this,r)};t.PrTemplateList.prototype.getStringAtExt=function(e,r){var n=this.getStringAt(e);if(t.notNull(n)){return n}return r};t.PrTemplateList.prototype.getLongAt=function(t){return this.m_list.getLongAt(t)};t.PrTemplateList.prototype.getLongAtExt=function(t,e){return this.m_list.getLongAtExt(t,e)};t.PrTemplateList.prototype.addInteger=t.noSupport;t.PrTemplateList.prototype.setIntegerAt=t.noSupport;t.PrTemplateList.prototype.clear=t.noSupport;t.PrTemplateList.prototype.isEmpty=function(){return this.m_list.isEmpty()};t.PrTemplateList.prototype.hasElements=function(){return this.m_list.hasElements()};t.PrTemplateList.prototype.size=function(){return this.m_size};t.PrTemplateList.prototype.addLong=t.noSupport;t.PrTemplateList.prototype.setLongAt=t.noSupport;t.PrTemplateList.prototype.addBoolean=t.noSupport;t.PrTemplateList.prototype.setBooleanAt=t.noSupport;t.PrTemplateList.prototype.addDouble=t.noSupport;t.PrTemplateList.prototype.setDoubleAt=t.noSupport;t.PrTemplateList.prototype.addString=t.noSupport;t.PrTemplateList.prototype.setStringAt=t.noSupport;t.PrTemplateList.prototype.addNull=t.noSupport;t.PrTemplateList.prototype.setNullAt=t.noSupport;t.PrTemplateList.prototype.hasNullAt=function(t){return this.m_list.hasNullAt(t)};t.PrTemplateList.prototype.addAll=t.noSupport;t.PrTemplateList.prototype.add=t.noSupport;t.PrTemplateList.prototype.get=function(t){return this.m_list.get(t)};t.PrTemplateList.prototype.set=function(t,e){this.m_list.set(t,e)};t.PrTemplateList.prototype.getElementTypeAt=function(t){return this.m_list.getElementTypeAt(t)};t.PrTemplateList.prototype.getListAt=function(t){return this.m_list.getListAt(t)};t.PrTemplateList.prototype.addNewList=t.noSupport;t.PrTemplateList.prototype.getStructureAt=function(e){if(e>=this.m_size){throw t.XException.createIllegalArgumentException("Index out of range")}var r=e<this.m_list.size();var n=t.notNull(this.m_template)&&e<this.m_template.size();if(r&&n){var i=this.m_list.getStructureAt(e);var s=t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.get(e).asStructure());return t.PrTemplateStructure.createStructureWrapperWithTemplate(this.m_root,this,i,s)}if(n){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_template.get(e).asStructure())}if(r){return t.PrTemplateStructure.createStructureWrapper(this.m_root,this,this.m_list.getStructureAt(e))}return null};t.PrTemplateList.prototype.addNewStructure=t.noSupport;t.PrTemplateList.prototype.getParent=function(){return this.m_parent};t.PrTemplateList.prototype.setParent=function(t){this.m_parent=t};t.PrTemplateList.prototype.addAllStrings=t.noSupport;t.PrTemplateList.prototype.toString=function(){return this.m_list.toString()};t.PrTemplateList.prototype.releaseObject=function(){this.m_list=t.XObjectExt.release(this.m_list);this.m_template=t.XObjectExt.release(this.m_template);this.m_parent=null;this.m_root=null;t.PrElement.prototype.releaseObject.call(this)};t.PrTemplateList.prototype.insert=t.noSupport;t.PrTemplateList.prototype.removeAt=t.noSupport;t.PrTemplateList.prototype.removeElement=t.noSupport;t.PrTemplateList.prototype.getValuesAsReadOnlyList=function(){return this.m_list.getValuesAsReadOnlyList()};t.PrTemplateList.prototype.getIterator=function(){return this.m_list.getIterator()};t.PrTemplateList.prototype.contains=function(t){return this.m_list.contains(t)};t.PrTemplateList.prototype.getIndex=function(t){return this.m_list.getIndex(t)};t.PrTemplateList.prototype.createArrayCopy=function(){return this.m_list.createArrayCopy()};t.StructuresModule=function(){};t.StructuresModule.prototype=new t.DfModule;t.StructuresModule.prototype._ff_c="StructuresModule";t.StructuresModule.s_module=null;t.StructuresModule.getInstance=function(){if(t.isNull(t.StructuresModule.s_module)){t.DfModule.checkInitialized(t.CommonsExtModule.getInstance());t.StructuresModule.s_module=t.DfModule.startExt(new t.StructuresModule);t.XmlParserFactory.staticSetupXmlParserFactory();t.JsonParserGenericFactory.staticSetup();t.DocumentFormatType.staticSetup();t.XmlUtils.staticSetup();t.PrElementType.staticSetup();t.PrFactoryUniversal.staticSetup();t.PrSerializerFactory.staticSetup();t.JsonParserFactory.staticSetupJsonParserFactory();t.JsonFilteringSerializerFactory.staticSetup();t.DfModule.stopExt(t.StructuresModule.s_module)}return t.StructuresModule.s_module};t.StructuresModule.prototype.getName=function(){return"ff0070.structures"};t.StructuresModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff0070.structures.js.map