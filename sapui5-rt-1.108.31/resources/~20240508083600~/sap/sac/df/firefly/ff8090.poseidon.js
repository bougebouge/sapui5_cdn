/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff3100.system.ui","sap/sac/df/firefly/ff8050.application.ui"],function(t){"use strict";t.StoryCache=function(){};t.StoryCache.prototype=new t.XObject;t.StoryCache.prototype._ff_c="StoryCache";t.StoryCache.create=function(e,r,i){var s=new t.StoryCache;s.m_currentStory=null;s.m_repositoryManager=e;s.m_workingTaskManager=r;s.m_provider=i;s.m_storyCacheHandle=null;return s};t.StoryCache.prototype.m_currentStory=null;t.StoryCache.prototype.m_repositoryManager=null;t.StoryCache.prototype.m_workingTaskManager=null;t.StoryCache.prototype.m_storyId=null;t.StoryCache.prototype.m_provider=null;t.StoryCache.prototype.m_storyMD=null;t.StoryCache.prototype.m_storyCacheHandle=null;t.StoryCache.prototype.loadCached=function(e){this.m_storyId=e;this.m_currentStory=null;if(t.XLanguage.getLanguage()===t.XLanguage.OBJECTIVE_C&&!this.m_provider.getIsProgressCancelled()){this.m_storyMD=t.StoryCacheUtil.loadStoryInfoFromDisk(this.m_repositoryManager,e,"storyMD");if(t.notNull(this.m_storyMD)){this.m_provider.setIsCacheLoading(true);var r=this.m_workingTaskManager;this.m_storyCacheHandle=r.createHandle(this);this.m_storyCacheHandle.processSynchronization(t.SyncType.NON_BLOCKING)}}};t.StoryCache.prototype.getRepositoryManager=function(){return this.m_repositoryManager};t.StoryCache.prototype.setRepositoryManager=function(t){this.m_repositoryManager=t};t.StoryCache.prototype.releaseObject=function(){t.XObjectExt.release(this.m_currentStory);t.XObjectExt.release(this.m_storyMD)};t.StoryCache.prototype.processInputOnWorkerThread=function(e){var r=e;var i=r.getTask();var s=i.m_storyId;if(t.notNull(this.m_storyMD)&&!this.m_provider.getIsProgressCancelled()){var o=this.m_storyMD.asStructure();var a=o.getIntegerByKey("layoutType");if(a===this.m_provider.getMainLayout().getCode()){var n=o.getStringByKey("text");var l=t.OcCacheableQuasarStory.create(s,n);var c=o.getListByKey("pages");var p=t.XList.create();for(var m=0;m<c.size();m++){var g=c.getStructureAt(m).asStructure();var u=g.getKeysAsReadOnlyListOfString().get(0);var y=t.StoryCacheUtil.loadStoryInfoFromDisk(this.m_repositoryManager,s,u).asStructure();var h=t.OcQuasarStoryPage.create(u,u,y);p.add(h)}l.setPages(p);l.setMediaUrl(o.getStringByKey("mediaUrl"));l.setModifiedBy(o.getStringByKey("modifiedBy"));l.setModifiedTime(o.getStringByKey("mdTime"));l.setCreatedBy(o.getStringByKey("creatorName"));l.setCreateTime(o.getStringByKey("crTime"));l.setUpdateCounter(o.getIntegerByKeyExt("updateCounter",0));l.setDescription(o.getStringByKey("desc"));this.m_currentStory=l}else{t.XObjectExt.release(this.m_storyMD);t.XObjectExt.release(this.m_storyCacheHandle)}}};t.StoryCache.prototype.isFinishedOnWorkerThread=function(t){return true};t.StoryCache.prototype.processOutputOnMainThread=function(e){var r=e.getTask();var i=this.m_currentStory;if(t.notNull(i)&&t.XString.isEqual(i.getName(),this.m_storyId)&&!this.m_provider.getIsProgressCancelled()){r.m_provider.publishStoryDefinition(i,true);this.m_storyMD=null;this.m_storyId=null}else{t.XObjectExt.release(this.m_currentStory)}};t.StoryCache.prototype.cancelProgress=function(){if(t.notNull(this.m_storyCacheHandle)){this.m_storyCacheHandle.requestCancelling()}};t.StoryCacheUtil={loadStoryInfoFromDisk:function(e,r,i){var s=t.StoryCacheUtil.getStoryCache(e,r);return s.getByKey(i)},loadStoryListFromDisk:function(e,r){var i=t.StoryCacheUtil.getStoryCache(e,t.XStringUtils.concatenate2(r,"/"));return i.getByKey("StoryList")},saveStoryListToDisk:function(e,r,i){var s=t.StoryCacheUtil.getStoryCache(e,t.XStringUtils.concatenate2(r,"/"));s.put("StoryList",i,null)},loadSessionFromDisk:function(e,r){var i=t.StoryCacheUtil.getStoryCache(e,r);return i.getByKey(r)},saveSessionToDisk:function(e,r,i){var s=t.StoryCacheUtil.getStoryCache(e,r);s.put(r,i,null)},saveStoryPageToStore:function(e,r,i,s){var o=t.StoryCacheUtil.getStoryCache(e,r);o.put(i,s,null)},saveStoryToStore:function(e,r,i){if(t.notNull(e)&&t.XLanguage.getLanguage()===t.XLanguage.OBJECTIVE_C){var s=t.PrFactory.createStructure();s.putString("text",r.getText());s.putString("desc",r.getDescription());s.putString("id",r.getName());s.putInteger("layoutType",i.getCode());s.putString("creator",r.getCreatedBy());s.putString("crTime",r.getCreateTime());s.putString("mediaUrl",r.getMediaUrl());s.putString("mdTime",r.getModifiedTime());s.putString("modifiedBy",r.getModifiedBy());s.putInteger("updateCounter",r.getUpdateCounter());var o=s.putNewList("pages");var a=r.getPages();var n=r.getName();for(var l=0;l<a.size();l++){var c=a.get(l);var p=o.addNewStructure();p.putString(c.getName(),c.getName());t.StoryCacheUtil.saveStoryPageToStore(e,n,c.getName(),c.getPageContent())}var m=t.StoryCacheUtil.getStoryCache(e,n);m.put("storyMD",s,null)}},getStoryCache:function(e,r){var i=e.getApplication().getProcess();var s=i.getCacheManager();var o=s.getSubCache(t.Atlas.ATLAS_KEY);var a=o.getSubCache("story");var n=a.getSubCache(r);return n},main:function(){t.IoNativeModule.getInstance()}};t.StoryProvider=function(){};t.StoryProvider.prototype=new t.XObject;t.StoryProvider.prototype._ff_c="StoryProvider";t.StoryProvider.create=function(e,r,i,s){var o=new t.StoryProvider;o.setWorkingTaskManager(i);o.m_mainLayout=t.OcLayoutType.FLOW;o.m_storyHttp=t.StoryRest.create(s,i,e,o);o.m_storyCache=t.StoryCache.create(s,i,o);o.m_storyLoadListener=r;return o};t.StoryProvider.prototype.m_workingTaskManager=null;t.StoryProvider.prototype.m_storyHttp=null;t.StoryProvider.prototype.m_storyCache=null;t.StoryProvider.prototype.m_currentStory=null;t.StoryProvider.prototype.m_cacheProceeded=false;t.StoryProvider.prototype.m_triggerPublish=false;t.StoryProvider.prototype.m_cacheLoad=false;t.StoryProvider.prototype.m_isProgressCancelled=false;t.StoryProvider.prototype.m_mainLayout=null;t.StoryProvider.prototype.m_storyLoadListener=null;t.StoryProvider.prototype.getWorkingTaskManager=function(){return this.m_workingTaskManager};t.StoryProvider.prototype.setWorkingTaskManager=function(t){this.m_workingTaskManager=t};t.StoryProvider.prototype.getStoryDefinition=function(t){this.m_isProgressCancelled=false;this.m_storyCache.loadCached(t);this.m_storyHttp.fetchSelectedStory(t)};t.StoryProvider.prototype.publishStoryDefinition=function(e,r){this.m_cacheLoad=r;this.m_triggerPublish=false;if(t.notNull(e)){if(r){this.m_currentStory=e;this.m_triggerPublish=true}else{if(t.notNull(this.m_currentStory)){var i=t.StoryUtils.isStoryModified(e,this.m_currentStory);if(i){this.m_currentStory=e;this.m_triggerPublish=true}}else{this.m_currentStory=e;this.m_triggerPublish=true}}}if(t.XLanguage.getLanguage()===t.XLanguage.JAVASCRIPT){if(!this.m_isProgressCancelled){this.m_storyLoadListener.publishStory(this.m_currentStory,this.m_cacheLoad)}else{t.XObjectExt.release(this.m_currentStory)}}else{var s=this.m_workingTaskManager.createHandle(this);s.processSynchronization(t.SyncType.NON_BLOCKING)}};t.StoryProvider.prototype.getIsCacheProceed=function(){return this.m_cacheProceeded};t.StoryProvider.prototype.getStorySession=function(){return this.m_storyHttp};t.StoryProvider.prototype.setStorySession=function(t){this.m_storyHttp=t};t.StoryProvider.prototype.setIsCacheLoading=function(t){this.m_cacheProceeded=t};t.StoryProvider.prototype.processInputOnWorkerThread=function(t){};t.StoryProvider.prototype.isFinishedOnWorkerThread=function(t){return true};t.StoryProvider.prototype.processOutputOnMainThread=function(t){if(this.m_triggerPublish&&!this.m_isProgressCancelled){this.m_storyLoadListener.publishStory(this.m_currentStory,this.m_cacheLoad)}};t.StoryProvider.prototype.cancelProgress=function(){this.m_storyHttp.cancelProgress();this.m_isProgressCancelled=true;this.m_currentStory=t.XObjectExt.release(this.m_currentStory);if(t.notNull(this.m_storyCache)){this.m_storyCache.cancelProgress()}};t.StoryProvider.prototype.getIsProgressCancelled=function(){return this.m_isProgressCancelled};t.StoryProvider.prototype.setMainLayout=function(t){this.m_mainLayout=t};t.StoryProvider.prototype.getMainLayout=function(){return this.m_mainLayout};t.StoryProvider.prototype.releaseObject=function(){this.m_currentStory=t.XObjectExt.release(this.m_currentStory);this.m_storyCache=t.XObjectExt.release(this.m_storyCache);this.m_storyHttp=t.XObjectExt.release(this.m_storyHttp)};t.StoryUtils={normalizeString:function(e){var r=e;if(t.notNull(r)){r=t.XString.replace(r,"  ","_");r=t.XString.replace(r,",","_");r=t.XString.replace(r," ","_");r=t.XString.replace(r,"-","_");r=t.XString.replace(r,".","");r=t.XString.replace(r,"\\","_");r=t.XString.replace(r,"/","_");r=t.XString.replace(r,"(","_");r=t.XString.replace(r,")","_");r=t.XString.replace(r,"+","_");r=t.XString.replace(r,":","_");r=t.XString.replace(r,"<","_");r=t.XString.replace(r,">","_");r=t.XString.toLowerCase(r)}return r},isStoryModified:function(e,r){var i=t.XString.isEqual(e.getModifiedTime(),r.getModifiedTime());if(i){var s=e.getPages();var o=r.getPages();if(s.size()===o.size()){for(var a=0;a<s.size();a++){var n=s.get(a);var l=n.getPageContent().toString();var c=o.get(a);var p=c.getPageContent().toString();if(t.XString.size(l)===t.XString.size(p)){return false}}}}return true},processTime:function(e){var r=t.XString.replace(e,"T"," ");return t.XStringUtils.stripRight(r,8)},extractDomain:function(e){var r=t.XString.replace(e,".","");r=t.XString.replace(r,"-","");return t.XString.replace(r,"/","")}};t.StoryRest=function(){};t.StoryRest.prototype=new t.XObject;t.StoryRest.prototype._ff_c="StoryRest";t.StoryRest.create=function(e,r,i,s){var o=new t.StoryRest;o.m_currentStory=null;o.m_workingTaskManager=r;o.m_storyRestHandle=null;o.m_repoManager=e;o.m_storyService=i;o.m_sp=s;return o};t.StoryRest.prototype.m_currentStory=null;t.StoryRest.prototype.m_storyJson=null;t.StoryRest.prototype.m_workingTaskManager=null;t.StoryRest.prototype.m_repoManager=null;t.StoryRest.prototype.m_storyRestHandle=null;t.StoryRest.prototype.m_sp=null;t.StoryRest.prototype.m_storyId=null;t.StoryRest.prototype.m_storyService=null;t.StoryRest.prototype.m_isStoryPublished=false;t.StoryRest.prototype.getStory=function(){return this.m_currentStory};t.StoryRest.prototype.releaseObject=function(){t.XObjectExt.release(this.m_currentStory);t.XObjectExt.release(this.m_storyJson);this.m_storyId=null};t.StoryRest.prototype.fetchSelectedStory=function(e){this.m_currentStory=null;this.m_isStoryPublished=false;this.m_storyId=e;if(!this.m_sp.getIsCacheProceed()){this.m_storyService.processStoryLoad(this.m_storyService.getSession().getDefaultSyncType(),this,null,e)}else{var r=this.m_workingTaskManager.createHandle(this);r.processSynchronization(t.SyncType.NON_BLOCKING)}};t.StoryRest.prototype.processInputOnWorkerThread=function(e){if(!this.m_sp.getIsProgressCancelled()){if(t.isNull(this.m_storyJson)&&t.isNull(this.m_currentStory)){this.m_storyService.processStoryLoad(t.SyncType.NON_BLOCKING,this,null,this.m_storyId)}else if(t.notNull(this.m_storyJson)){this.m_currentStory=this.createQuasarStory();this.m_storyJson=null}if(t.notNull(this.m_currentStory)){t.StoryCacheUtil.saveStoryToStore(this.m_repoManager,this.m_currentStory,this.m_sp.getMainLayout())}}};t.StoryRest.prototype.createQuasarStory=function(){var e=this.m_storyService.getServiceConfig().getConnectionContainer();var r=t.OcOrcaContext.create(this.m_storyJson.asStructure(),null,t.OcConnection.createByConnection(e));var i=t.OcOrcaStory.create(r);var s=t.OcQuasarStory.create(i);s.setQuasarMainLayoutType(this.m_sp.getMainLayout());return s.getCacheableQuasarStory()};t.StoryRest.prototype.isFinishedOnWorkerThread=function(t){return true};t.StoryRest.prototype.processOutputOnMainThread=function(e){var r=e.getTask();if(t.notNull(this.m_currentStory)&&!this.m_isStoryPublished&&t.XString.isEqual(this.m_storyId,this.m_currentStory.getName())){r.m_sp.publishStoryDefinition(this.m_currentStory,false);this.m_isStoryPublished=true}};t.StoryRest.prototype.onStoryLoaded=function(e,r,i){if(t.notNull(r)&&!this.m_sp.getIsProgressCancelled()){var s=t.OcQuasarStory.create(r);s.setQuasarMainLayoutType(this.m_sp.getMainLayout());var o=s.getCacheableQuasarStory();this.m_sp.publishStoryDefinition(o,false);this.m_isStoryPublished=true;this.m_currentStory=o;this.m_storyRestHandle=this.m_workingTaskManager.createHandle(this);this.m_storyRestHandle.processSynchronization(t.SyncType.NON_BLOCKING)}};t.StoryRest.prototype.cancelProgress=function(){if(t.notNull(this.m_storyRestHandle)){this.m_storyRestHandle.requestCancelling()}};t.Atlas=function(){};t.Atlas.prototype=new t.XObjectExt;t.Atlas.prototype._ff_c="Atlas";t.Atlas.ATLAS_KEY="atlas";t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG="debug";t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR="error";t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING="warning";t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO="info";t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT="print";t.Atlas.SETTINGS_ORCA_URL_KEY="orcaStoryConnector_orcaUrl";t.Atlas.SETTINGS_MAIN_LAYOUT_KEY="orcaStoryConnector_mainLayout";t.Atlas.SETTINGS_LOG_LEVEL_KEY="orcaStoryConnector_logLevel";t.Atlas.SELECTED_PAGE_KEY="selectedPage";t.Atlas.create=function(e,r,i){var s=new t.Atlas;s.setupExt(e,r,i);return s};t.Atlas.prototype.m_orcaService=null;t.Atlas.prototype.m_application=null;t.Atlas.prototype.m_uiManager=null;t.Atlas.prototype.m_tridentClient=null;t.Atlas.prototype.m_navigationContainer=null;t.Atlas.prototype.m_startPage=null;t.Atlas.prototype.m_nativeParentId=null;t.Atlas.prototype.m_nativeParentObject=null;t.Atlas.prototype.m_orcaUrl=null;t.Atlas.prototype.m_currentCatalogOptions=null;t.Atlas.prototype.m_PosClientList=null;t.Atlas.prototype.m_curPosClient=null;t.Atlas.prototype.m_curNavigationPage=null;t.Atlas.prototype.m_hostDict=null;t.Atlas.prototype.m_hostNameDict=null;t.Atlas.prototype.m_hostIdList=null;t.Atlas.prototype.m_logLevel=null;t.Atlas.prototype.m_layout=null;t.Atlas.prototype.m_currentStoryListItems=null;t.Atlas.prototype.setupExt=function(e,r,i){this.m_nativeParentId=e;this.m_nativeParentObject=r;var s=t.DefaultSession.createWithVersion(t.XVersion.MAX);s.getLogWriterBase().setLogFilterSeverity(t.Severity.ERROR);s.getProxySettings().setWebdispatcherTemplate(i);this.m_application=t.ApplicationFactory.createApplication(s);this.m_application.setDefaultSyncType(t.SyncType.NON_BLOCKING);this.m_uiManager=this.m_application.getUiManager();this.m_tridentClient=t.TridentClient.create(this.m_application.newSubApplication(null),null);this.m_tridentClient.setNativeAnchorId(this.m_nativeParentId);this.m_tridentClient.setNativeAnchorObject(this.m_nativeParentObject);this.m_tridentClient.runProgram();this.setupApp();this.renderUi()};t.Atlas.prototype.setupApp=function(){this.prepareHostList();this.m_currentCatalogOptions=new t.OcStoryCatalogLoadOptions;this.setOrcaUrl(t.XLocalStorage.getInstance().getStringByKeyExt(t.Atlas.SETTINGS_ORCA_URL_KEY,""));var e=t.OcLayoutType.CANVAS;if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.IPHONE)){e=t.OcLayoutType.FLOW}this.setMainLayout(t.OcLayoutType.getByName(t.XLocalStorage.getInstance().getStringByKeyExt(t.Atlas.SETTINGS_MAIN_LAYOUT_KEY,e.getName())));this.setLogLevel(t.XLocalStorage.getInstance().getStringByKeyExt(t.Atlas.SETTINGS_LOG_LEVEL_KEY,t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR))};t.Atlas.prototype.releaseObject=function(){this.clearPoseidonClients();if(t.notNull(this.m_hostIdList)){this.m_hostIdList.clear();t.XObjectExt.release(this.m_hostIdList);this.m_hostIdList=null}if(t.notNull(this.m_hostDict)){this.m_hostDict.clear();t.XObjectExt.release(this.m_hostDict);this.m_hostDict=null}if(t.notNull(this.m_hostNameDict)){this.m_hostNameDict.clear();t.XObjectExt.release(this.m_hostNameDict);this.m_hostNameDict=null}this.m_nativeParentObject=null;this.m_navigationContainer=t.XObjectExt.release(this.m_navigationContainer);this.m_startPage=t.XObjectExt.release(this.m_startPage);this.m_curNavigationPage=t.XObjectExt.release(this.m_curNavigationPage);this.m_currentStoryListItems=t.XObjectExt.release(this.m_currentStoryListItems);this.m_orcaService=t.XObjectExt.release(this.m_orcaService);this.m_tridentClient=t.XObjectExt.release(this.m_tridentClient);this.m_currentCatalogOptions=t.XObjectExt.release(this.m_currentCatalogOptions);this.m_uiManager=null;this.m_application=t.XObjectExt.release(this.m_application);t.XObjectExt.prototype.releaseObject.call(this)};t.Atlas.prototype.reset=function(){this.logout();t.XObjectExt.release(this.m_orcaService);this.clearPoseidonClients();this.m_navigationContainer=t.XObjectExt.release(this.m_navigationContainer);this.m_startPage=t.XObjectExt.release(this.m_startPage);this.m_curNavigationPage=t.XObjectExt.release(this.m_curNavigationPage);this.m_currentStoryListItems=t.XObjectExt.release(this.m_currentStoryListItems);this.backToLoginScreen()};t.Atlas.prototype.refreshVisiblePageData=function(){if(t.notNull(this.m_curPosClient)){this.m_curPosClient.refreshBindings()}};t.Atlas.prototype.loadStoryList=function(){var e=t.OcOrcaServiceConfig.create(this.m_application,t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME);e.processOrcaServiceCreation(t.SyncType.NON_BLOCKING,this,null)};t.Atlas.prototype.setOrcaUrl=function(e){this.m_orcaUrl=e;var r=t.XUri.createFromUrl(e);var i=this.m_application.getSystemLandscape();i.setSystemByUri(t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,r,null)};t.Atlas.prototype.setMainLayout=function(t){this.m_layout=t};t.Atlas.prototype.setLogLevel=function(e){this.m_logLevel=e;var r=this.m_application.getSession();var i=t.Severity.ERROR;if(t.XString.isEqual(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG,e)){i=t.Severity.DEBUG}else if(t.XString.isEqual(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR,e)){i=t.Severity.ERROR}else if(t.XString.isEqual(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING,e)){i=t.Severity.WARNING}else if(t.XString.isEqual(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO,e)){i=t.Severity.INFO}else if(t.XString.isEqual(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT,e)){i=t.Severity.PRINT}r.getLogWriterBase().setLogFilterSeverity(i)};t.Atlas.prototype.backToLoginScreen=function(){this.renderUi()};t.Atlas.prototype.logout=function(){this.m_application.getConnectionPool().clearConnections()};t.Atlas.prototype.clearPoseidonClients=function(){if(t.notNull(this.m_PosClientList)){for(var e=0;e<this.m_PosClientList.size();e++){var r=this.m_PosClientList.get(e);t.XObjectExt.release(r)}this.m_PosClientList.clear()}this.m_PosClientList=t.XObjectExt.release(this.m_PosClientList);this.m_curPosClient=null};t.Atlas.prototype.prepareHostList=function(){this.m_hostIdList=t.XListOfString.create();this.m_hostDict=t.PrFactory.createStructure();this.m_hostNameDict=t.PrFactory.createStructure();this.m_hostIdList.add("apollo");this.m_hostDict.putString("apollo",t.XStringUtils.concatenate5("http:","//::","basic@apollo.oe","mapi.only.sa","p:8000?system_type=orca"));this.m_hostNameDict.putString("apollo","Apollo");this.m_hostIdList.add("monsunproxy");this.m_hostDict.putString("monsunproxy",t.XStringUtils.concatenate5("http:","//::basic@mo-9eeb3","641b.mo.s","ap.corp?sys","tem_type=orca"));this.m_hostNameDict.putString("monsunproxy","Monsun - proxy");this.m_hostIdList.add("monsun");this.m_hostDict.putString("monsun",t.XStringUtils.concatenate5("http:","//::","basic@bw.ac","ioem.c.eu-de-1.cloud.s","ap:8001?system_type=orca"));this.m_hostNameDict.putString("monsun","Monsun");this.m_hostIdList.add("canary");this.m_hostDict.putString("canary",t.XStringUtils.concatenate5("http:","//::","saml@master-liveconn-successf","actor.cnry.projecto","rca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("canary","Canary - SF");this.m_hostIdList.add("orcareporting");this.m_hostDict.putString("orcareporting",t.XStringUtils.concatenate5("http:","//::","saml@or","careporting.us2.sapbusinesso","bjects.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("orcareporting","Orca reporting");this.m_hostIdList.add("demoeu");this.m_hostDict.putString("demoeu",t.XStringUtils.concatenate5("http:","//::","saml@demo-stan","dard.eu1.sa","pbusinessobjects.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("demoeu","Demo EU");this.m_hostIdList.add("vand00592075a");this.m_hostDict.putString("vand00592075a",t.XStringUtils.concatenate5("http:","//::","basic@vand00592075a.amer.global.co","rp.s","ap?system_type=orca"));this.m_hostNameDict.putString("vand00592075a","Performance system (vand)");this.m_hostIdList.add("redbull");this.m_hostDict.putString("redbull",t.XStringUtils.concatenate5("http://::","basic@ld3780.w","df.sa","p.cor","p:8020?system_type=orca"));this.m_hostNameDict.putString("redbull","Red Bull test system");this.m_hostIdList.add("vandevvmwin");this.m_hostDict.putString("vandevvmwin",t.XStringUtils.concatenate5("http:","//::","saml@vandevvmwin038.dhc","p.pgdev.sa","p.corp:9074?system_type=orca_cloud"));this.m_hostNameDict.putString("vandevvmwin","A77F0 - Vandev performance");this.m_hostIdList.add("vanpgc34b9");this.m_hostDict.putString("vanpgc34b9",t.XStringUtils.concatenate5("http:","//::","basic@vanpgc34b9.d","hcp.pgdev.sa","p.corp?system_type=orca"));this.m_hostNameDict.putString("vanpgc34b9","Hana PnR system");this.m_hostIdList.add("vandevhanamdc01t13");this.m_hostDict.putString("vandevhanamdc01t13",t.XStringUtils.concatenate5("http:","//::","basic@vandevhanamdc01t13.van.sa","p.co","rp:8000?system_type=orca"));this.m_hostNameDict.putString("vandevhanamdc01t13","HANA MDC Benny");this.m_hostIdList.add("relmastercanarysf");this.m_hostDict.putString("relmastercanarysf",t.XStringUtils.concatenate5("http:","//::","saml@rel-success","factors-1.eu2cnry.projec","torca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("relmastercanarysf","SF rel master canary");this.m_hostIdList.add("s4mastercanary");this.m_hostDict.putString("s4mastercanary",t.XStringUtils.concatenate5("http:","//::","sa","ml@master-s4.eu2cnry.proje","ctorca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("s4mastercanary","S4 master canary")};t.Atlas.prototype.renderUi=function(){var e=this.m_tridentClient.createUiElement(t.UiType.ICON_TAB_BAR);e.useMaxSpace();e.setName("appTabBar");var r=e.addNewItem();r.setName("home");r.setText("Home");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){r.setIcon("home")}else{r.setIcon("fa-home")}this.createHomeTab(r);var i=e.addNewItem();i.setName("settings");i.setText("Settings");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){i.setIcon("settings")}else{i.setIcon("fa-cog")}this.createSettingsTab(i);this.m_tridentClient.setRootUiElement(e)};t.Atlas.prototype.createHomeTab=function(e){var r=e.setNewContent(t.UiType.FLEX_LAYOUT);r.useMaxSpace();r.setDirection(t.UiFlexDirection.COLUMN);r.setAlignItems(t.UiFlexAlignItems.CENTER);r.addNewItemOfType(t.UiType.SPACER).setWidth(t.UiCssLength.create("100%"));r.addNewItemOfType(t.UiType.SPACER).setHeight(t.UiCssLength.create("10px"));r.addNewItemOfType(t.UiType.LABEL).setText("Select server");var i=r.addNewItemOfType(t.UiType.DROPDOWN);i.setName("hostDropdown");i.setWidth(t.UiCssLength.createExt(350,t.UiCssSizeUnit.PIXEL));i.setHeight(t.UiCssLength.createExt(200,t.UiCssSizeUnit.PIXEL));i.registerOnSelect(this);i.addNewItem().setText("Custom").setName("custom");var s=false;for(var o=0;o<this.m_hostIdList.size();o++){var a=this.m_hostIdList.get(o);var n=this.m_hostNameDict.getStringByKey(a);var l=this.m_hostDict.getStringByKey(a);i.addNewItem().setText(n).setName(a);if(t.XString.containsString(this.m_orcaUrl,l)&&s===false){i.setSelectedName(a);s=true}}if(s===false){i.setSelectedName("custom")}r.addNewItemOfType(t.UiType.LABEL).setText("Orca URL");var c=r.addNewItemOfType(t.UiType.INPUT);c.setName("urlInput");c.setPlaceholder("URL");c.setText(this.m_orcaUrl);c.setWidth(t.UiCssLength.createExt(350,t.UiCssSizeUnit.PIXEL));c.registerOnLiveChange(this);c.registerOnEnter(this);var p=r.addNewItemOfType(t.UiType.BUTTON);p.setName("loginBtn");p.setText("Login");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){p.setIcon("visits")}else{p.setIcon("fa-sign-in-alt")}p.registerOnPress(this)};t.Atlas.prototype.createSettingsTab=function(e){var r=e.setNewContent(t.UiType.FLEX_LAYOUT);r.useMaxSpace();r.setDirection(t.UiFlexDirection.COLUMN);r.setAlignItems(t.UiFlexAlignItems.CENTER);r.addNewItemOfType(t.UiType.SPACER).setWidth(t.UiCssLength.create("100%"));r.addNewItemOfType(t.UiType.SPACER).setHeight(t.UiCssLength.create("10px"));var i=r.addNewItemOfType(t.UiType.BUTTON);i.setName("clearCacheBtn");i.setText("Clear Cache");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){i.setIcon("delete")}else{i.setIcon("fa-trash-alt")}i.setButtonType(t.UiButtonType.DESTRUCTIVE);i.registerOnPress(this);var s=r.addNewItemOfType(t.UiType.SPACER);s.setName("spacerCaccheBtn");s.setHeight(t.UiCssLength.createExt(20,t.UiCssSizeUnit.PIXEL));r.addNewItemOfType(t.UiType.LABEL).setText("Select layout");var o=r.addNewItemOfType(t.UiType.DROPDOWN);o.setName("layoutDropdown");o.setWidth(t.UiCssLength.createExt(350,t.UiCssSizeUnit.PIXEL));o.setHeight(t.UiCssLength.createExt(125,t.UiCssSizeUnit.PIXEL));o.registerOnSelect(this);o.addNewItem().setText("Canvas").setName(t.OcLayoutType.CANVAS.getName());o.addNewItem().setText("Flow").setName(t.OcLayoutType.FLOW.getName());o.addNewItem().setText("Flow simple (only charts and data grids)").setName(t.OcLayoutType.FLOW_SIMPLE.getName());o.setSelectedName(this.m_layout.getName());var a=r.addNewItemOfType(t.UiType.SPACER);a.setName("spacerLayoutDrp");a.setHeight(t.UiCssLength.createExt(20,t.UiCssSizeUnit.PIXEL));r.addNewItemOfType(t.UiType.LABEL).setText("Log level");var n=r.addNewItemOfType(t.UiType.DROPDOWN);n.setName("logLevelDropdown");n.setWidth(t.UiCssLength.createExt(350,t.UiCssSizeUnit.PIXEL));n.setHeight(t.UiCssLength.createExt(125,t.UiCssSizeUnit.PIXEL));n.registerOnSelect(this);n.addNewItem().setText("Debug").setName(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG);n.addNewItem().setText("Error").setName(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR);n.addNewItem().setText("Warning").setName(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING);n.addNewItem().setText("Info").setName(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO);n.addNewItem().setText("Print").setName(t.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT);n.setSelectedName(this.m_logLevel)};t.Atlas.prototype.loadStoryCatalog=function(e){if(t.isNull(this.m_startPage)){this.m_navigationContainer=this.m_tridentClient.createUiElement(t.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();this.m_navigationContainer.registerOnBack(this);this.m_startPage=this.m_navigationContainer.pushNewPage();this.m_startPage.setName("orcaStoryListContainer");this.m_startPage.setTitle("All stories");var r=this.m_tridentClient.createUiElement(t.UiType.SEARCH_FIELD);r.setName("storyListSearchField");r.setPlaceholder("Search story...");r.registerOnSearch(this);r.registerOnLiveChange(this);r.setDebounceTime(1e3);this.m_startPage.setSubHeader(r);var i=this.m_startPage.addNewPageButton();i.setName("startPageRefreshList");i.setText("Refresh");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){i.setIcon("refresh")}else{i.setIcon("fa-sync-alt")}i.registerOnPress(this);var s=this.m_startPage.addNewPageButton();s.setName("startPageGetFavorites");s.setText("Favorites");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){s.setIcon("favorite")}else{s.setIcon("fa-star")}s.registerOnPress(this);this.m_tridentClient.setRootUiElement(this.m_navigationContainer)}else{var o=this.m_startPage.getPageButtons().getIterator();while(o.hasNext()){var a=o.next();a.setEnabled(true)}}if(t.isNull(this.m_currentStoryListItems)){this.m_currentStoryListItems=t.XList.create()}else{this.m_currentStoryListItems.clear()}var n=this.m_startPage.setNewContent(t.UiType.LIST);n.setName("orcaStoryList");n.setSelectionMode(t.UiSelectionMode.NONE);n.useMaxSpace();var l=e.getCatalogItems().getIterator();while(l.hasNext()){var c=l.next();var p=c.getDescription();var m=c.getModifiedByDisplayName();if(t.XStringUtils.isNullOrEmpty(m)){m=c.getModifiedBy()}var g=t.XStringUtils.concatenate2(t.XStringUtils.concatenate2("Modified: ",c.getModifiedTime()),t.XStringUtils.concatenate2(" by ",m));var u=t.XStringUtils.concatenate3(g,"\n",p);var y=n.addNewItem();y.setText(c.getName());y.setListItemType(t.UiListType.NAVIGATION);y.registerOnPress(this);y.setDescription(u);y.setCustomObject(c);if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){y.setIcon("business-objects-experience")}else{y.setIcon("fa-chart-pie")}this.m_currentStoryListItems.add(y)}};t.Atlas.prototype.loadStory=function(e){var r=this.m_navigationContainer.getCustomObject();r.getPageButtonByName("storyDetailsRefreshStory").setEnabled(true);r.clearContent();this.clearPoseidonClients();this.m_PosClientList=t.XList.create();var i=t.OcQuasarStory.create(e);i.setQuasarMainLayoutType(this.m_layout);var s=i.getQuasarPages();var o=i.getMessages();if(o.hasErrors()){var a=o.getFirstError();this.m_tridentClient.showTridentErrorToast(a.getText());this.log("--==An error occured:==--");this.log(a.getText());if(a.getErrorCause()!==null){this.log("--==Error cause:==--");this.log(a.getErrorCause().getText())}this.log("--==Summary (other errors and messages):==--");this.log(o.getSummary())}else if(o.getMessages().hasElements()){var n=o.getFirstWithSeverity(t.Severity.WARNING);if(t.notNull(n)){this.m_tridentClient.showTridentWarningToast(n.getText())}this.log("--==Warnings and info messages:==--");this.log(o.getSummary())}var l=s.size();if(l>0){var c=this.generateStoryIdForCache(i);var p=this.m_application.getProcess().getCacheManager();var m=p.getSubCache(t.Atlas.SELECTED_PAGE_KEY);var g=m.getStringByKey(c);var u=r.setNewContent(t.UiType.ICON_TAB_BAR).useMaxSpace();u.setName(i.getName());u.setCustomObject(i);u.registerOnSelect(this);var y=false;for(var h=0;h<l;h++){var _=s.get(h);var d=u.addNew(t.UiType.ICON_TAB_BAR_ITEM);d.setName(_.getId());d.setText(_.getName());if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){d.setIcon("document")}else{d.setIcon("fa-file-alt")}d.setNewContent(t.UiType.ACTIVITY_INDICATOR).setText("Loading page...").useMaxSpace();var S=_.getPageContent();if(t.isNull(S)){var f=r.setNewContent(t.UiType.TEXT).setText("This page has no widgets!");f.setBackgroundColor(t.UiColor.create("#cc0033"));f.setFontColor(t.UiColor.create("#ffffff"));f.setFontSize(t.UiCssLength.createExt(15,t.UiCssSizeUnit.PIXEL))}else{var P=t.PoseidonClient.createWithDocument(this.m_application.newSubApplication(null),S);this.m_PosClientList.add(P);d.setCustomObject(P);if(t.notNull(g)){if(t.XString.isEqual(g,_.getId())){P.runOnElement(d);u.setSelectedItem(d);this.m_PosClientList.add(P);this.m_curPosClient=P;y=true}}}}if(y===false&&l>0){var C=u.get(0).getCustomObject();C.runOnElement(u.get(0));this.m_curPosClient=C}}else{var A=r.setNewContent(t.UiType.TEXT).setText("This story has no content!");A.setBackgroundColor(t.UiColor.create("#cc0033"));A.setFontColor(t.UiColor.create("#ffffff"));A.setFontSize(t.UiCssLength.createExt(15,t.UiCssSizeUnit.PIXEL))}};t.Atlas.prototype.generateStoryIdForCache=function(e){var r=t.XStringUtils.concatenate3(e.getName(),"_",e.getId());return t.XString.replace(r," ","_")};t.Atlas.prototype.filterStoryListOnStartPage=function(e,r){var i=this.m_startPage.getContent();i.clearItems();if(r===false){for(var s=0;s<this.m_currentStoryListItems.size()-1;s++){var o=this.m_currentStoryListItems.get(s);if(t.XString.containsString(t.XString.toLowerCase(o.getText()),t.XString.toLowerCase(e))){i.addItem(o)}}}else{for(var a=0;a<this.m_currentStoryListItems.size()-1;a++){i.addItem(this.m_currentStoryListItems.get(a))}}};t.Atlas.prototype.onOrcaServiceCreated=function(e,r,i){if(e.isValid()){this.m_orcaService=r;r.processSystemLandscapeLoad(t.SyncType.NON_BLOCKING,this,null,null)}else{this.log("#1 failure logon");this.log(e.getSummary())}};t.Atlas.prototype.onSystemsLoaded=function(e,r,i){if(e.isValid()){var s=this.m_application.getSystemLandscape();for(var o=0;o<r.size();o++){var a=r.get(o);s.setSystemByDescription(a)}this.m_orcaService.processStoryCatalogLoad(t.SyncType.NON_BLOCKING,this,null,null)}else{this.log("#2 failure system loaded");this.log(e.getSummary())}};t.Atlas.prototype.onStoryCatalogLoaded=function(t,e,r){if(t.isValid()){this.loadStoryCatalog(t.getData())}else{this.log("#3 failure story catalog loaded");this.log(t.getSummary())}};t.Atlas.prototype.onStoryLoaded=function(t,e,r){if(t.isValid()){this.loadStory(e)}else{this.log("#4 failure story loaded");this.log(t.getSummary())}};t.Atlas.prototype.onLiveChange=function(e){if(e.getControl().getUiType()===t.UiType.INPUT){if(t.XString.isEqual(e.getControl().getName(),"urlInput")){this.setOrcaUrl(e.getControl().getText());e.getControl().getUiManager().select("hostDropdown").setSelectedName("custom");t.XLocalStorage.getInstance().putString(t.Atlas.SETTINGS_ORCA_URL_KEY,this.m_orcaUrl)}}else if(e.getControl().getUiType()===t.UiType.SEARCH_FIELD){if(t.XString.isEqual(e.getControl().getName(),"storyListSearchField")){this.filterStoryListOnStartPage(e.getControl().getText(),false)}}};t.Atlas.prototype.onPress=function(e){if(t.XString.isEqual(e.getControl().getName(),"loginBtn")||t.XString.containsString(e.getControl().getName(),"Input")){this.m_tridentClient.showActivity("Loading stories...");this.loadStoryList()}else if(t.XString.isEqual(e.getControl().getName(),"clearCacheBtn")){if(t.notNull(this.m_application)&&this.m_application.getRepositoryManager()!==null){this.m_application.getProcess().getCacheManager().getSubCache(t.Atlas.ATLAS_KEY).clear()}}else if(t.XString.isEqual(e.getControl().getName(),"errorBackBtn")){this.backToLoginScreen()}else if(e.getControl().getUiType()===t.UiType.LIST_ITEM){var r=e.getControl().getCustomObject();this.m_curNavigationPage=this.m_navigationContainer.pushNewPage();this.m_curNavigationPage.setName(r.getId());this.m_curNavigationPage.setTitle(r.getName());this.m_curNavigationPage.setNewContent(t.UiType.ACTIVITY_INDICATOR).setText("Loading story...").useMaxSpace();this.m_navigationContainer.setCustomObject(this.m_curNavigationPage);var i=this.m_curNavigationPage.addNewPageButton();i.setName("storyDetailsRefreshStory");i.setText("Refresh");if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){i.setIcon("refresh")}else{i.setIcon("fa-sync-alt")}i.registerOnPress(this);this.m_orcaService.processStoryLoad(t.SyncType.NON_BLOCKING,this,null,r.getId())}else if(e.getControl().getUiType()===t.UiType.PAGE_BUTTON){if(t.XString.isEqual(e.getControl().getName(),"startPageRefreshList")||t.XString.containsString(e.getControl().getName(),"startPageGetFavorites")){this.m_startPage.setNewContent(t.UiType.ACTIVITY_INDICATOR).setText("Loading stories...").useMaxSpace();var s=this.m_startPage.getSubHeader();s.setText("");var o=this.m_startPage.getPageButtons().getIterator();while(o.hasNext()){var a=o.next();a.setEnabled(false)}if(t.XString.isEqual(e.getControl().getName(),"startPageRefreshList")){this.m_orcaService.processStoryCatalogLoad(t.SyncType.NON_BLOCKING,this,null,this.m_currentCatalogOptions)}else if(t.XString.isEqual(e.getControl().getName(),"startPageGetFavorites")){if(t.XString.isEqual(e.getControl().getIcon(),"fa-star")||t.XString.isEqual(e.getControl().getIcon(),"favorite")){if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){e.getControl().setIcon("globe")}else{e.getControl().setIcon("fa-globe-asia")}e.getControl().setText("All Stories");this.m_startPage.setTitle("Favorites");this.m_currentCatalogOptions.setCatalogType(t.OcStoryCatalogType.FAVORITE)}else{if(this.m_uiManager.getPlatform().isTypeOf(t.XPlatform.UI5)){e.getControl().setIcon("favorite")}else{e.getControl().setIcon("fa-star")}e.getControl().setText("Favorites");this.m_startPage.setTitle("All stories");this.m_currentCatalogOptions.setCatalogType(t.OcStoryCatalogType.SEARCH_LIST)}this.m_orcaService.processStoryCatalogLoad(t.SyncType.NON_BLOCKING,this,null,this.m_currentCatalogOptions)}}else if(t.XString.isEqual(e.getControl().getName(),"startPageLogout")){this.reset()}else if(t.XString.isEqual(e.getControl().getName(),"storyDetailsRefreshStory")){this.clearPoseidonClients();this.m_curNavigationPage.getPageButtonByName("storyDetailsRefreshStory").setEnabled(false);this.m_curNavigationPage.setNewContent(t.UiType.ACTIVITY_INDICATOR).setText("Loading story...").useMaxSpace();var n=this.m_curNavigationPage.getName();this.m_orcaService.processStoryLoad(t.SyncType.NON_BLOCKING,this,null,n)}}};t.Atlas.prototype.onEnter=function(t){this.onPress(t)};t.Atlas.prototype.onSelect=function(e){if(e.getControl().getUiType()===t.UiType.ICON_TAB_BAR){var r=e.getSelectedItem().getCustomObject();if(r.isContentRendered()===false){r.runOnElement(e.getSelectedItem())}this.m_curPosClient=r;var i=e.getControl().getCustomObject();var s=this.generateStoryIdForCache(i);var o=e.getSelectedItem().getName();var a=this.m_application.getProcess().getCacheManager();var n=a.getSubCache(t.Atlas.SELECTED_PAGE_KEY);n.putString(s,o)}else if(e.getControl().getUiType()===t.UiType.DROPDOWN){if(t.XString.isEqual(e.getControl().getName(),"hostDropdown")){if(t.XString.isEqual(e.getControl().getSelectedName(),"custom")===false){this.setOrcaUrl(this.m_hostDict.getStringByKey(e.getControl().getSelectedName()));t.XLocalStorage.getInstance().putString(t.Atlas.SETTINGS_ORCA_URL_KEY,this.m_orcaUrl)}e.getControl().getUiManager().select("urlInput").setText(this.m_orcaUrl)}else if(t.XString.isEqual(e.getControl().getName(),"layoutDropdown")){this.setMainLayout(t.OcLayoutType.getByName(e.getControl().getSelectedName()));t.XLocalStorage.getInstance().putString(t.Atlas.SETTINGS_MAIN_LAYOUT_KEY,this.m_layout.getName())}else if(t.XString.isEqual(e.getControl().getName(),"logLevelDropdown")){if(e.getControl().getSelectedName()!==null){this.setLogLevel(e.getControl().getSelectedName())}t.XLocalStorage.getInstance().putString(t.Atlas.SETTINGS_LOG_LEVEL_KEY,this.m_logLevel)}}};t.Atlas.prototype.onBack=function(e){if(t.notNull(this.m_curNavigationPage)){t.XObjectExt.release(this.m_curNavigationPage);this.m_curNavigationPage=null}this.clearPoseidonClients()};t.Atlas.prototype.onSearch=function(e){var r=e.getParameters().getBooleanByKeyExt(t.UiControlEvent.PARAM_CLEAR_BUTTON_PRESSED,false);var i=e.getParameters().getStringByKeyExt(t.UiControlEvent.PARAM_SEARCH_TEXT,"");this.filterStoryListOnStartPage(i,r)};t.PsAppInfo=function(){};t.PsAppInfo.prototype=new t.DfNameTextObject;t.PsAppInfo.prototype._ff_c="PsAppInfo";t.PsAppInfo.create=function(e){var r=new t.PsAppInfo;r._setupInternal(e);return r};t.PsAppInfo.prototype.m_imageName=null;t.PsAppInfo.prototype.m_appFile=null;t.PsAppInfo.prototype.m_imageFile=null;t.PsAppInfo.prototype.getImageName=function(){return this.m_imageName};t.PsAppInfo.prototype.setImageName=function(t){this.m_imageName=t};t.PsAppInfo.prototype.getAppFile=function(){return this.m_appFile};t.PsAppInfo.prototype.setAppFile=function(t){this.m_appFile=t};t.PsAppInfo.prototype.getImageFile=function(){return this.m_imageFile};t.PsAppInfo.prototype.setImageFile=function(t){this.m_imageFile=t};t.PsAppInfo.prototype.releaseObject=function(){this.m_appFile=null;this.m_imageFile=null;t.DfNameTextObject.prototype.releaseObject.call(this)};t.Asteria=function(){};t.Asteria.prototype=new t.DfUiProgram;t.Asteria.prototype._ff_c="Asteria";t.Asteria.DEFAULT_PROGRAM_NAME="Asteria";t.Asteria.createRunner=function(){var e=t.KernelBoot.createByName(t.Asteria.DEFAULT_PROGRAM_NAME);return e};t.Asteria.createStudioProgram=function(e){var r=t.Asteria.create(e,null);return r};t.Asteria.createPoseidonApp=function(e,r){t.ApplicationUiModule.getInstance();var i=t.Asteria.create(null,null);i.setNativeAnchorId(e);i.setNativeAnchorObject(r);return i};t.Asteria.create=function(e,r){var i=new t.Asteria;i.setup();i.setInitialSystemType(r);i.setApplication(e);i.initializeProgram();return i};t.Asteria.prototype.m_uiTestsDir=null;t.Asteria.prototype.m_navigationContainer=null;t.Asteria.prototype.newProgram=function(){var e=new t.Asteria;e.setup();return e};t.Asteria.prototype.getProgramName=function(){return t.Asteria.DEFAULT_PROGRAM_NAME};t.Asteria.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e)};t.Asteria.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this)};t.Asteria.prototype.releaseObject=function(){this.m_navigationContainer=t.XObjectExt.release(this.m_navigationContainer);this.m_uiTestsDir=t.XObjectExt.release(this.m_uiTestsDir);t.DfUiProgram.prototype.releaseObject.call(this)};t.Asteria.prototype.setupProgram=function(){return null};t.Asteria.prototype.buildUi=function(e){this.setTitle("Asteria - Quasar UI Testsuite");var r=e.newControl(t.UiType.ACTIVITY_INDICATOR).setText("Loading...");e.setRoot(r);if(t.isNull(this.m_uiTestsDir)||this.m_uiTestsDir.isDirectory()===false){this.setTestAppFilesDirByPath("/production/queries/simplex/quasarUiTestApps/")}this.m_uiTestsDir.processFetchChildren(t.SyncType.NON_BLOCKING,this,null,null)};t.Asteria.prototype.setTestAppFilesDirByPath=function(e){if(t.notNull(e)){var r=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,e);this.setDir(r)}};t.Asteria.prototype.setDir=function(t){this.m_uiTestsDir=t};t.Asteria.prototype.onChildrenFetched=function(e,r,i,s,o){if(e.isValid()){this.m_navigationContainer=this.m_genesis.newControl(t.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();var a=this.m_navigationContainer.pushNewPage();a.setTitle("Quasar Ui Tests");var n=a.setNewContent(t.UiType.FLOW_LAYOUT);for(var l=0;l<i.size();l++){var c=i.get(l);var p=c;var m=p.getName();var g=t.XString.lastIndexOf(m,".");if(g!==-1&&t.XString.isEqual(".index.json",m)===false){var u=t.XString.substring(m,0,g);var y=t.XString.substring(m,g+1,-1);if(t.XString.isEqual("qsa",y)){var h=n.addNewItemOfType(t.UiType.BUTTON);h.setText(u);h.setCustomObject(p);h.registerOnPress(this);n.addNewItemOfType(t.UiType.SPACER)}}}this.m_genesis.setRoot(this.m_navigationContainer)}else{t.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"Failed to fetch test applications!")}};t.Asteria.prototype.onPress=function(e){var r=e.getControl().getCustomObject();if(t.notNull(r)){var i=this.m_navigationContainer.pushNewPage();i.setTitle(e.getControl().getText());var s=t.PoseidonClient.createWithFile(this.getApplication().newSubApplication(null),r,null);var o=t.UiGenesis.create(i);s.renderUi(o)}};t.AtlasSimpleProgram=function(){};t.AtlasSimpleProgram.prototype=new t.DfUiProgram;t.AtlasSimpleProgram.prototype._ff_c="AtlasSimpleProgram";t.AtlasSimpleProgram.DEFAULT_PROGRAM_NAME="StoryRenderer";t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME="ExtSysUsername";t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD="ExtSysPassword";t.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME="SystemName";t.AtlasSimpleProgram.PARAM_2_STORY_ID="StoryId";t.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER="PageNumber";t.AtlasSimpleProgram.prototype.m_orcaService=null;t.AtlasSimpleProgram.prototype.m_systemName=null;t.AtlasSimpleProgram.prototype.m_storyId=null;t.AtlasSimpleProgram.prototype.m_pageNumber=0;t.AtlasSimpleProgram.prototype.m_activityIndicator=null;t.AtlasSimpleProgram.prototype.newProgram=function(){var e=new t.AtlasSimpleProgram;e.setup();return e};t.AtlasSimpleProgram.prototype.getProgramName=function(){return t.AtlasSimpleProgram.DEFAULT_PROGRAM_NAME};t.AtlasSimpleProgram.prototype.releaseObject=function(){this.m_orcaService=t.XObjectExt.release(this.m_orcaService);t.DfUiProgram.prototype.releaseObject.call(this)};t.AtlasSimpleProgram.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e);e.addOption(t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME,"Username for external data source system.","",t.XValueType.STRING);e.addOption(t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD,"Password for external data source system.","",t.XValueType.STRING);e.addParameter(t.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME,"The system name as used in the system landscape.");e.addParameter(t.AtlasSimpleProgram.PARAM_2_STORY_ID,"The story id.");e.addParameter(t.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER,"The page number, starting with 0.")};t.AtlasSimpleProgram.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this);var e=t.DfUiProgram.prototype.getSystemLandscapeUrl.call(this);if(t.isNull(e)){this.setSystemLandscapeUrl("${ff_sdk}/production/systems/SystemLandscapeAllWithPwds.json")}};t.AtlasSimpleProgram.prototype.setupProgram=function(){return null};t.AtlasSimpleProgram.prototype.buildUi=function(e){this.m_activityIndicator=e.newControl(t.UiType.ACTIVITY_INDICATOR);this.m_activityIndicator.setText("Connecting to remote system...");e.setRoot(this.m_activityIndicator);this.runApp()};t.AtlasSimpleProgram.prototype.runApp=function(){this.resolveArgs();var e=this.getApplication().getSystemLandscape();var r=this.m_systemName;if(t.XStringUtils.containsString(this.m_systemName,"http://",true)||t.XStringUtils.containsString(this.m_systemName,"https://",true)){var i=t.XUri.createFromUrl(this.m_systemName);r=t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME;e.setSystemByUri(r,i,null)}else{e.setMasterSystemName(this.m_systemName)}var s=t.OcOrcaServiceConfig.create(this.getApplication(),r);s.processOrcaServiceCreation(t.SyncType.NON_BLOCKING,this,null)};t.AtlasSimpleProgram.prototype.resolveArgs=function(){var e=this.getArgumentStructure();var r=t.XStringBuffer.create().append("AtlasSimple");if(t.notNull(e)){this.m_systemName=e.getStringByKey(t.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME);this.m_storyId=e.getStringByKey(t.AtlasSimpleProgram.PARAM_2_STORY_ID);this.m_pageNumber=t.XInteger.convertFromString(e.getStringByKeyExt(t.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER,"0"))}this.setTitle(r.toString())};t.AtlasSimpleProgram.prototype.showProgressMessage=function(e,r){if(t.notNull(this.m_activityIndicator)){if(r===false){this.m_activityIndicator.setText(e)}else{var i=this.m_genesis.newControl(t.UiType.FLEX_LAYOUT);i.setName("errorWrapperLayout");i.useMaxSpace();i.setDirection(t.UiFlexDirection.COLUMN);i.setAlignItems(t.UiFlexAlignItems.CENTER);i.setJustifyContent(t.UiFlexJustifyContent.CENTER);var s=i.newItemOfType(t.UiType.ICON);s.setIcon("alert");s.setColor(t.UiColor.RED);s.setSize(t.UiSize.createByCss("30px","30px"));i.addItem(s);var o=i.newItemOfType(t.UiType.LABEL);o.setText(e);o.setFontColor(t.UiColor.RED);i.addItem(o);this.m_genesis.setRoot(i);this.m_activityIndicator=t.XObjectExt.release(this.m_activityIndicator)}}};t.AtlasSimpleProgram.prototype.onOrcaServiceCreated=function(e,r,i){if(e.isValid()){this.log("#1 success logon");this.showProgressMessage("Loading systems...",false);this.m_orcaService=r;r.processSystemLandscapeLoad(null,this,null,null)}else{this.log("#1 failure logon");this.showProgressMessage("Connection failed!",true);this.log(e.getSummary());t.UiMessageUtils.showErrorWithMessage(this.getGenesis(),e.getSummary())}};t.AtlasSimpleProgram.prototype.onSystemsLoaded=function(e,r,i){if(e.isValid()){var s=this.getArgumentStructure();var o=s.getStringByKey(t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME);var a=s.getStringByKey(t.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD);this.log("#2 success system loaded");this.showProgressMessage("Loading story...",false);var n=this.getApplication().getSystemLandscape();for(var l=0;l<r.size();l++){var c=r.get(l);if(t.XStringUtils.isNotNullAndNotEmpty(o)&&t.XStringUtils.isNotNullAndNotEmpty(a)){c.setUser(o);c.setPassword(a)}n.setSystemByDescription(c)}this.m_orcaService.processStoryLoad(null,this,null,this.m_storyId)}else{this.log("#2 failure system loaded");this.showProgressMessage("Failed to retrieve systems!",true);this.log(e.getSummary())}};t.AtlasSimpleProgram.prototype.onStoryLoaded=function(e,r,i){if(e.isValid()){this.log("#4 success story loaded");this.showProgressMessage("Rendering story...",false);var s=t.OcQuasarStory.create(r);s.setQuasarMainLayoutType(t.OcLayoutType.CANVAS);var o=s.getQuasarPageDocuments();if(o.size()>this.m_pageNumber){var a=o.get(this.m_pageNumber);var n=t.PoseidonClient.createWithDocument(this.getApplication().newSubApplication(null),a);n.runWithGenesis(this.m_genesis)}else{this.log("The specified page doesn't exist!");this.showProgressMessage("Story rendering failed!",true)}}else{this.log("#4 failure story loaded");this.showProgressMessage("Failed to load the specified story!",true);this.log(e.getSummary())}};t.NotosSimpleProgram=function(){};t.NotosSimpleProgram.prototype=new t.DfUiProgram;t.NotosSimpleProgram.prototype._ff_c="NotosSimpleProgram";t.NotosSimpleProgram.DEFAULT_PROGRAM_NAME="NotosSimple";t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME="ExtSysUsername";t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD="ExtSysPassword";t.NotosSimpleProgram.PARAM_1_SYSTEM_NAME="SystemName";t.NotosSimpleProgram.PARAM_2_STORY_ID="StoryId";t.NotosSimpleProgram.prototype.m_orcaService=null;t.NotosSimpleProgram.prototype.m_systemName=null;t.NotosSimpleProgram.prototype.m_storyId=null;t.NotosSimpleProgram.prototype.m_activityIndicator=null;t.NotosSimpleProgram.prototype.newProgram=function(){var e=new t.NotosSimpleProgram;e.setup();return e};t.NotosSimpleProgram.prototype.getProgramName=function(){return t.NotosSimpleProgram.DEFAULT_PROGRAM_NAME};t.NotosSimpleProgram.prototype.releaseObject=function(){this.m_orcaService=t.XObjectExt.release(this.m_orcaService);t.DfUiProgram.prototype.releaseObject.call(this)};t.NotosSimpleProgram.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e);e.addOption(t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME,"Username for external data source system.","",t.XValueType.STRING);e.addOption(t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD,"Password for external data source system.","",t.XValueType.STRING);e.addParameter(t.NotosSimpleProgram.PARAM_1_SYSTEM_NAME,"The system name as used in the system landscape.");e.addParameter(t.NotosSimpleProgram.PARAM_2_STORY_ID,"The story id.")};t.NotosSimpleProgram.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this);var e=t.DfUiProgram.prototype.getSystemLandscapeUrl.call(this);if(t.isNull(e)){this.setSystemLandscapeUrl("${ff_sdk}/production/systems/SystemLandscapeAllWithPwds.json")}};t.NotosSimpleProgram.prototype.setupProgram=function(){return null};t.NotosSimpleProgram.prototype.buildUi=function(e){this.m_activityIndicator=e.newControl(t.UiType.ACTIVITY_INDICATOR);this.m_activityIndicator.setText("Connecting to remote system...");e.setRoot(this.m_activityIndicator);this.runApp()};t.NotosSimpleProgram.prototype.runApp=function(){this.resolveArgs();var e=this.getApplication().getSystemLandscape();var r=this.m_systemName;if(t.XStringUtils.containsString(this.m_systemName,"http://",true)||t.XStringUtils.containsString(this.m_systemName,"https://",true)){var i=t.XUri.createFromUrl(this.m_systemName);r=t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME;e.setSystemByUri(r,i,null)}else{e.setMasterSystemName(this.m_systemName)}var s=t.OcOrcaServiceConfig.create(this.getApplication(),r);var o=s.processOrcaServiceCreation(t.SyncType.BLOCKING,this,null);this.log(o.getSummary())};t.NotosSimpleProgram.prototype.resolveArgs=function(){var e=this.getArgumentStructure();var r=t.XStringBuffer.create().append("AtlasSimple");if(t.notNull(e)){this.m_systemName=e.getStringByKey(t.NotosSimpleProgram.PARAM_1_SYSTEM_NAME);this.m_storyId=e.getStringByKey(t.NotosSimpleProgram.PARAM_2_STORY_ID)}this.setTitle(r.toString())};t.NotosSimpleProgram.prototype.showProgressMessage=function(e,r){if(t.notNull(this.m_activityIndicator)){if(r===false){this.m_activityIndicator.setText(e)}else{var i=this.m_genesis.newControl(t.UiType.FLEX_LAYOUT);i.setName("errorWrapperLayout");i.useMaxSpace();i.setDirection(t.UiFlexDirection.COLUMN);i.setAlignItems(t.UiFlexAlignItems.CENTER);i.setJustifyContent(t.UiFlexJustifyContent.CENTER);var s=i.newItemOfType(t.UiType.ICON);s.setIcon("alert");s.setColor(t.UiColor.RED);s.setSize(t.UiSize.createByCss("30px","30px"));i.addItem(s);var o=i.newItemOfType(t.UiType.LABEL);o.setText(e);o.setFontColor(t.UiColor.RED);i.addItem(o);this.m_genesis.setRoot(i);this.m_activityIndicator=t.XObjectExt.release(this.m_activityIndicator)}}};t.NotosSimpleProgram.prototype.onOrcaServiceCreated=function(e,r,i){if(e.isValid()){this.log("#1 success logon");this.showProgressMessage("Loading systems...",false);this.m_orcaService=r;r.processSystemLandscapeLoad(null,this,null,null)}else{this.log("#1 failure logon");this.showProgressMessage("Connection failed!",true);this.log(e.getSummary());t.UiMessageUtils.showErrorWithMessage(this.getGenesis(),e.getSummary())}};t.NotosSimpleProgram.prototype.onSystemsLoaded=function(e,r,i){if(e.isValid()){var s=this.getArgumentStructure();var o=s.getStringByKey(t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME);var a=s.getStringByKey(t.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD);this.log("#2 success system loaded");this.showProgressMessage("Loading story...",false);var n=this.getApplication().getSystemLandscape();for(var l=0;l<r.size();l++){var c=r.get(l);if(t.XStringUtils.isNotNullAndNotEmpty(o)&&t.XStringUtils.isNotNullAndNotEmpty(a)){c.setUser(o);c.setPassword(a)}n.setSystemByDescription(c)}this.m_orcaService.processStoryLoad(null,this,null,this.m_storyId)}else{this.log("#2 failure system loaded");this.showProgressMessage("Failed to retrieve systems!",true);this.log(e.getSummary())}};t.NotosSimpleProgram.prototype.onStoryLoaded=function(e,r,i){if(e.isValid()){this.log("#4 success story loaded");this.showProgressMessage("Rendering story...",false);var s=t.OcQuasarStory.create(r);s.setQuasarMainLayoutType(t.OcLayoutType.CANVAS);var o=s.getQuasarAnalyticalCardDocument();if(t.notNull(o)){var a=t.PoseidonClient.createWithDocument(this.getApplication().newSubApplication(null),o);a.runWithGenesis(this.m_genesis)}else{this.log("Failed to extract KPI from story");this.showProgressMessage("Story rendering failed!",true)}}else{this.log("#4 failure story loaded");this.showProgressMessage("Failed to load the specified story!",true);this.log(e.getSummary())}};t.PoseidonClient=function(){};t.PoseidonClient.prototype=new t.DfUiProgram;t.PoseidonClient.prototype._ff_c="PoseidonClient";t.PoseidonClient.DEFAULT_PROGRAM_NAME="Poseidon";t.PoseidonClient.createRunner=function(){var e=t.KernelBoot.createByName(t.PoseidonClient.DEFAULT_PROGRAM_NAME);return e};t.PoseidonClient.createWithNativeJson=function(e,r){var i=t.PoseidonClient.create(e,null);i.setNativeJson(r);i.setFile(null);i.setDocument(null);return i};t.PoseidonClient.createWithFile=function(e,r,i){var s=t.PoseidonClient.create(e,null);s.setNativeJson(null);s.setFile(r);s.setDocument(null);s.setFileLoadedListener(i);return s};t.PoseidonClient.createWithDocument=function(e,r){var i=t.PoseidonClient.create(e,null);i.setNativeJson(null);i.setFile(null);i.setDocument(r);return i};t.PoseidonClient.createPoseidonApp=function(e,r){t.PoseidonModule.getInstance();var i=t.PoseidonClient.create(null,null);i.setNativeAnchorId(e);i.setNativeAnchorObject(r);return i};t.PoseidonClient.create=function(e,r){var i=new t.PoseidonClient;i.setup();i.setApplication(e);i.setInitialSystemType(r);i.initializeProgram();return i};t.PoseidonClient.prototype.m_nativeJson=null;t.PoseidonClient.prototype.m_file=null;t.PoseidonClient.prototype.m_fileLoadedListener=null;t.PoseidonClient.prototype.m_document=null;t.PoseidonClient.prototype.m_core=null;t.PoseidonClient.prototype.m_isContentRendered=false;t.PoseidonClient.prototype.m_internalGenesis=null;t.PoseidonClient.prototype.newProgram=function(){var e=new t.PoseidonClient;e.setup();return e};t.PoseidonClient.prototype.getProgramName=function(){return t.PoseidonClient.DEFAULT_PROGRAM_NAME};t.PoseidonClient.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e);e.addOption(t.DfProgram.PARAM_FILE,"Specify the poseidon file with a quasar template","Relative URI",t.XValueType.STRING)};t.PoseidonClient.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this);var e=this.getArgumentStructure();var r=e.getStringByKey(t.DfProgram.PARAM_FILE);if(t.notNull(r)){this.setPoseidonFileByPath(r,null)}};t.PoseidonClient.prototype.releaseObject=function(){this.m_core=t.XObjectExt.release(this.m_core);this.m_internalGenesis=t.XObjectExt.release(this.m_internalGenesis);this.m_nativeJson=null;this.m_document=null;this.m_file=null;this.m_fileLoadedListener=null;t.DfUiProgram.prototype.releaseObject.call(this)};t.PoseidonClient.prototype.getLogSeverity=function(){return t.DfUiProgram.prototype.getLogSeverity.call(this)};t.PoseidonClient.prototype.getMenuBarDisplayName=function(){return"Poseidon"};t.PoseidonClient.prototype.isOpenContainerMaximized=function(){return false};t.PoseidonClient.prototype.isShowMenuBar=function(){return true};t.PoseidonClient.prototype.setupProgram=function(){this.m_isContentRendered=false;return null};t.PoseidonClient.prototype.buildUi=function(e){this.setTitle("Poseidon Quasar Renderer");this.addMenuBarButton("Refresh","refresh",null,function(t){this.refreshCurrentDocument()}.bind(this));this.m_core=t.QuasarEngine.create(this.getApplication());this.m_core.setRenderFinishedProcedure(function(){this.m_isContentRendered=true}.bind(this));if(t.notNull(this.m_nativeJson)){this.m_core.setDocumentByNativeJson(this.m_nativeJson);this.m_core.renderUi(this.getInternalGenesis())}else if(t.notNull(this.m_document)){this.m_core.setDocument(this.m_document);this.m_core.renderUi(this.getInternalGenesis())}else if(t.notNull(this.m_file)){this.m_core.setDocumentByFile(this.m_file,this);this.setTitle(t.XStringUtils.concatenate2(this.m_file.getName(),"@Poseidon"));this.m_core.renderUi(this.getInternalGenesis())}else{t.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"No file specified!")}};t.PoseidonClient.prototype.runOnElement=function(e){this.m_genesis=t.UiGenesis.create(e);this.buildUi(this.m_genesis)};t.PoseidonClient.prototype.runWithGenesis=function(t){this.buildUi(t)};t.PoseidonClient.prototype.refreshBindings=function(){if(t.notNull(this.m_core)){this.m_core.initBindings()}};t.PoseidonClient.prototype.reset=function(){if(t.notNull(this.m_core)){this.m_core.reset()}this.m_genesis.clearUi();this.buildUi(this.m_genesis)};t.PoseidonClient.prototype.isContentRendered=function(){return this.m_isContentRendered};t.PoseidonClient.prototype.setPoseidonFileByPath=function(e,r){if(t.notNull(e)){var i=this.getProcess();var s=t.XFile.createWithVars(i,e);if(t.isNull(s)||s.hasErrors()||s.isExisting()===false){this.log2("File does not exist: ",e);return}this.setFile(s);this.setFileLoadedListener(r)}};t.PoseidonClient.prototype.setNativeJson=function(t){this.m_nativeJson=t};t.PoseidonClient.prototype.setFile=function(t){this.m_file=t};t.PoseidonClient.prototype.setDocument=function(t){this.m_document=t};t.PoseidonClient.prototype.setFileLoadedListener=function(t){this.m_fileLoadedListener=t};t.PoseidonClient.prototype.refreshCurrentDocument=function(){if(this.m_isContentRendered){this.m_core.setDocument(null);if(t.notNull(this.m_nativeJson)){this.m_core.setDocumentByNativeJson(this.m_nativeJson)}else if(t.notNull(this.m_document)){this.m_core.setDocument(this.m_document)}else if(t.notNull(this.m_file)){this.m_core.setDocumentByFile(this.m_file,this)}this.m_core.renderUi(this.getInternalGenesis());this.m_isContentRendered=true}};t.PoseidonClient.prototype.getInternalGenesis=function(){if(t.isNull(this.m_internalGenesis)){var e=this.getGenesis().newRoot(t.UiType.SCROLL_CONTAINER);e.useMaxSpace();this.m_internalGenesis=t.UiGenesis.create(e)}return this.m_internalGenesis};t.PoseidonClient.prototype.onFileLoaded=function(e,r,i,s){this.log("File loaded!");if(t.notNull(this.m_fileLoadedListener)){this.m_fileLoadedListener.onFileLoaded(e,r,i,s)}};t.TridentClient=function(){};t.TridentClient.prototype=new t.DfUiProgram;t.TridentClient.prototype._ff_c="TridentClient";t.TridentClient.createStudioProgram=function(e){var r=t.TridentClient.create(e,null);return r};t.TridentClient.createPoseidonApp=function(e,r){t.PoseidonModule.getInstance();var i=t.ApplicationFactory.createDefaultApplicationWithVersion(t.XVersion.MAX);i.getSession().setDefaultSyncType(t.SyncType.NON_BLOCKING);var s=t.TridentClient.create(i,null);s.setNativeAnchorId(e);s.setNativeAnchorObject(r);return s};t.TridentClient.create=function(e,r){var i=new t.TridentClient;i.setup();i.setInitialSystemType(r);i.setApplication(e);i.initializeProgram();return i};t.TridentClient.prototype.m_quasarDocument=null;t.TridentClient.prototype.newProgram=function(){var e=new t.TridentClient;e.setup();return e};t.TridentClient.prototype.getProgramName=function(){return"TridentClient"};t.TridentClient.prototype.releaseObject=function(){this.m_quasarDocument=null;t.DfUiProgram.prototype.releaseObject.call(this)};t.TridentClient.prototype.setupProgram=function(){return null};t.TridentClient.prototype.buildUi=function(t){this.setTitle("Embedding client");this.showActivity("")};t.TridentClient.prototype.setContentByDocument=function(e){if(t.notNull(e)){this.m_quasarDocument=e;this.m_genesis.clearUi();var r=t.PoseidonClient.createWithDocument(this.getApplication(),this.m_quasarDocument);r.runWithGenesis(this.m_genesis)}else{this.showMessage("The page has no content.")}};t.TridentClient.prototype.showMessage=function(e){this.m_quasarDocument=null;var r=this.m_genesis.newControl(t.UiType.LABEL).setText(e);this.m_genesis.setRoot(r)};t.TridentClient.prototype.showActivity=function(e){this.m_quasarDocument=null;var r=this.m_genesis.newControl(t.UiType.ACTIVITY_INDICATOR).setText(e).useMaxSpace();this.m_genesis.setRoot(r)};t.TridentClient.prototype.createUiElement=function(t){var e=this.m_genesis.newControl(t);return e};t.TridentClient.prototype.setRootUiElement=function(t){this.m_quasarDocument=null;this.m_genesis.setRoot(t)};t.TridentClient.prototype.showTridentErrorToast=function(t){this.getGenesis().showErrorToast(t)};t.TridentClient.prototype.showTridentSuccessToast=function(t){this.getGenesis().showSuccessToast(t)};t.TridentClient.prototype.showTridentWarningToast=function(t){this.getGenesis().showWarningToast(t)};t.TridentClient.prototype.showTridentInfoToast=function(t){this.getGenesis().showInfoToast(t)};t.AppGallery=function(){};t.AppGallery.prototype=new t.DfUiProgram;t.AppGallery.prototype._ff_c="AppGallery";t.AppGallery.DEFAULT_PROGRAM_NAME="AppGallery";t.AppGallery.PARAM_PATH="resourcesPath";t.AppGallery.createRunner=function(){var e=t.KernelBoot.createByName(t.AppGallery.DEFAULT_PROGRAM_NAME);return e};t.AppGallery.createStudioProgram=function(e){var r=t.AppGallery.create(e,null);return r};t.AppGallery.createPoseidonApp=function(e,r){t.PoseidonModule.getInstance();var i=t.AppGallery.create(null,null);i.setNativeAnchorId(e);i.setNativeAnchorObject(r);return i};t.AppGallery.create=function(e,r){var i=new t.AppGallery;i.setup();i.setInitialSystemType(r);i.setApplication(e);i.initializeProgram();return i};t.AppGallery.prototype.m_appGalleryDir=null;t.AppGallery.prototype.m_navigationContainer=null;t.AppGallery.prototype.m_startPage=null;t.AppGallery.prototype.m_apps=null;t.AppGallery.prototype.newProgram=function(){var e=new t.AppGallery;e.setup();return e};t.AppGallery.prototype.getProgramName=function(){return t.AppGallery.DEFAULT_PROGRAM_NAME};t.AppGallery.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e);e.addOption(t.AppGallery.PARAM_PATH,"Specify the path to the directory with the applications","Relative URI",t.XValueType.STRING)};t.AppGallery.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this);var e=this.getArgumentStructure();var r=e.getStringByKey(t.AppGallery.PARAM_PATH);if(t.notNull(r)){this.setAppGalleryDirByPath(r)}};t.AppGallery.prototype.releaseObject=function(){this.m_navigationContainer=t.XObjectExt.release(this.m_navigationContainer);this.m_startPage=t.XObjectExt.release(this.m_startPage);this.m_appGalleryDir=t.XObjectExt.release(this.m_appGalleryDir);var e=this.m_apps.getKeysAsIteratorOfString();while(e.hasNext()){var r=e.next();var i=this.m_apps.getByKey(r);t.XObjectExt.release(i)}this.m_apps.clear();this.m_apps=t.XObjectExt.release(this.m_apps);t.DfUiProgram.prototype.releaseObject.call(this)};t.AppGallery.prototype.setupProgram=function(){return null};t.AppGallery.prototype.setDir=function(t){this.m_appGalleryDir=t};t.AppGallery.prototype.getAppInfo=function(e){var r=this.m_apps.getByKey(e);if(t.isNull(r)){r=t.PsAppInfo.create(e);this.m_apps.add(r)}return r};t.AppGallery.prototype.setAppGalleryDirByPath=function(e){if(t.notNull(e)){var r=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,e);this.setDir(r)}};t.AppGallery.prototype.buildUi=function(e){this.setTitle("App Gallery");var r=e.newControl(t.UiType.ACTIVITY_INDICATOR).setText("Loading...");e.setRoot(r);if(t.isNull(this.m_appGalleryDir)||this.m_appGalleryDir.isDirectory()===false){this.setAppGalleryDirByPath("/production/queries/poseidon/")}this.m_appGalleryDir.processFetchChildren(t.SyncType.NON_BLOCKING,this,null,null)};t.AppGallery.prototype.onChildrenFetched=function(e,r,i,s,o){if(e.isValid()){this.m_apps=t.XSetOfNameObject.create();for(var a=0;a<i.size();a++){var n=i.get(a);var l=n;var c=l.getName();var p=t.XString.lastIndexOf(c,".");if(p!==-1&&t.XString.isEqual(".index.json",c)===false){var m=t.XString.substring(c,0,p);var g=t.XString.substring(c,p+1,-1);var u;if(t.XString.isEqual("manifest",g)){u=this.getAppInfo(m);u.setText(m)}else if(t.XString.isEqual("json",g)){u=this.getAppInfo(m);u.setAppFile(l)}else if(t.XString.isEqual("png",g)){u=this.getAppInfo(m);u.setImageName(t.XStringUtils.concatenate2(m,".png"));u.setImageFile(l)}}}this.m_navigationContainer=this.m_genesis.newControl(t.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();this.m_startPage=this.m_navigationContainer.pushNewPage();this.m_startPage.setTitle("Start Page");var y=this.m_startPage.setNewContent(t.UiType.TILE_CONTAINER);y.setPadding(t.UiCssBoxEdges.create("10px"));var h=this.m_apps.getKeysAsIteratorOfString();while(h.hasNext()){var _=h.next();var d=this.m_apps.getByKey(_);var S=y.addNew(t.UiType.FILE_ICON);S.setText(d.getName());S.setCustomObject(d);S.registerOnPress(this);S.setSrc(d.getImageFile().getTargetUri().getUrl())}this.m_genesis.setRoot(this.m_navigationContainer)}else{t.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"Failed to fetch application list!")}};t.AppGallery.prototype.onPress=function(e){var r=e.getControl().getCustomObject();this.log(r.getName());var i=this.m_navigationContainer.pushNewPage();i.setTitle(r.getName());var s=r.getAppFile();if(t.isNull(s)){var o=i.setNewContent(t.UiType.TEXT).setText("App file not found!");o.setBackgroundColor(t.UiColor.create("#cc0033"));o.setFontColor(t.UiColor.create("#ffffff"));o.setFontSize(t.UiCssLength.createExt(15,t.UiCssSizeUnit.PIXEL))}else{var a=t.PoseidonClient.createWithFile(this.getApplication().newSubApplication(null),s,null);var n=t.UiGenesis.create(i);a.renderUi(n)}};t.PoseidonModule=function(){};t.PoseidonModule.prototype=new t.DfModule;t.PoseidonModule.prototype._ff_c="PoseidonModule";t.PoseidonModule.s_module=null;t.PoseidonModule.getInstance=function(){if(t.isNull(t.PoseidonModule.s_module)){t.DfModule.checkInitialized(t.SystemUiModule.getInstance());t.DfModule.checkInitialized(t.ApplicationUiModule.getInstance());t.PoseidonModule.s_module=t.DfModule.startExt(new t.PoseidonModule);t.ProgramRegistration.setProgramFactory(new t.PoseidonClient);t.ProgramRegistration.setProgramFactory(new t.AppGallery);t.ProgramRegistration.setProgramFactory(new t.AtlasSimpleProgram);t.ProgramRegistration.setProgramFactory(new t.NotosSimpleProgram);t.ProgramRegistration.setProgramFactory(new t.Asteria);t.DfModule.stopExt(t.PoseidonModule.s_module)}return t.PoseidonModule.s_module};t.PoseidonModule.prototype.getName=function(){return"ff8090.poseidon"};t.PoseidonModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff8090.poseidon.js.map