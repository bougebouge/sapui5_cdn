/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff0210.io.native","sap/sac/df/firefly/ff0230.io.ext","sap/sac/df/firefly/ff1040.kernel.native","sap/sac/df/firefly/ff2010.binding"],function(e){"use strict";e.ApplicationFactory={createDefaultApplication:function(){return e.ApplicationFactory.createDefaultApplicationWithVersion(0)},createDefaultApplicationWithVersion:function(t){var r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,null,t,null,null,null,null,e.ApplicationSystemOption.AUTO,false,null,false);var n=r.getData();e.XObjectExt.release(r);return n},createApplicationWithVersionAndKernelBoot:function(t){var r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,null,t,null,null,null,null,e.ApplicationSystemOption.AUTO,true,null,false);var n=r.getData();e.XObjectExt.release(r);return n},createApplicationWithUri:function(t){return e.ApplicationFactory.createApplicationWithUriAndVersion(t,0)},createApplicationWithUriAndVersion:function(t,r){var n=e.XUri.createFromUrl(t);var i=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,null,r,null,null,n,null,e.ApplicationSystemOption.AUTO,false,null,false);var o=i.getData();e.XObjectExt.release(i);return o},createApplication:function(t){var r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,0,null,null,null,null,e.ApplicationSystemOption.AUTO,false,null,false);var n=r.getData();e.XObjectExt.release(r);return n},createApplicationWithLandscapeBlocking:function(t,r){return e.ApplicationFactory.createApplicationWithVersionAndLandscape(t,0,r)},createApplicationWithVersionAndLandscape:function(t,r,n){return e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,r,null,null,null,n,e.ApplicationSystemOption.PATH,false,null,false)},createApplicationWithDefaultSystem:function(t,r,n){return e.ApplicationFactory.createApplicationWithVersionAndDefaultSystem(t,0,r,n)},createApplicationWithVersionAndDefaultSystem:function(t,r,n,i){var o=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,r,n,i,null,null,e.ApplicationSystemOption.LOCATION_AND_TYPE,false,null,false);var s=o.getData();e.XObjectExt.release(o);return s},createApplicationFull:function(t,r,n,i,o,s,a,u){return e.ApplicationFactory.createApplicationExt2(a,u,null,null,t,r,n,i,o,s,e.ApplicationSystemOption.AUTO,false,null,false)},createApplicationExt:function(t,r,n,i,o,s,a,u,c){return e.ApplicationFactory.createApplicationExt2(t,r,n,null,i,o,s,a,u,c,e.ApplicationSystemOption.AUTO,false,null,false)},createApplicationForOrca:function(t,r,n,i,o,s){return e.ApplicationFactory.createApplicationExt2(t,r,n,i,null,o,null,null,null,s,e.ApplicationSystemOption.PATH,true,e.OrcaAppProgram.DEFAULT_PROGRAM_NAME,true)},createApplicationForDragonfly:function(t){var r=e.XEnvironment.getInstance();r.setVariable(e.XEnvironmentConstants.FIREFLY_FEATURE_TOGGLES,"+Olap.AutoVariableSubmitCapability");r.setVariable(e.XEnvironmentConstants.FIREFLY_FEATURE_TOGGLES,"+Olap.AutoVariableSubmitFunctionality");return e.ApplicationFactory.createApplicationExt2(e.SyncType.NON_BLOCKING,t,null,null,null,e.XVersion.MAX,null,null,null,null,e.ApplicationSystemOption.PATH,true,e.DragonflyAppProgram.DEFAULT_PROGRAM_NAME,false)},createApplicationExt2:function(t,r,n,i,o,s,a,u,c,p,l,g,y,A){var m=e.ApplicationFactory.createApplicationInitializeAction(t);m.setProcess(o);m.registerListener(r,n);m.setXVersion(s);m.setSystemType(a);m.setSystemName(u);m.setSystemUri(c);m.setSystemLandscapeUrl(p);m.setSystemOption(l);m.setUseKernelBoot(g);m.setKernel(i);m.setUseSingletonKernel(A);m.setProgramName(y);m.process();return m},createApplicationInitializeAction:function(t){return e.ApplicationInitializeAction.create(t)}};e.QInAClientInfo={exportClientInfo:function(t,r,n){if(e.notNull(t)){var i=r.getStoryId();var o=r.getStoryName();var s=r.getLanguageLocale();var a=r.getWidgetId();var u=e.XStringUtils.isNotNullAndNotEmpty(i)||e.XStringUtils.isNotNullAndNotEmpty(o)||e.XStringUtils.isNotNullAndNotEmpty(s)||e.XStringUtils.isNotNullAndNotEmpty(a);if(!n&&!u){return}var c=r.getClientIdentifier();if(r.getSession().hasFeature(e.FeatureToggleOlap.CLIENT_INFO_METADATA)&&e.XStringUtils.isNullOrEmpty(c)&&!u){return}var p=t.putNewStructure(e.InAConstantsBios.QY_CLIENT_INFO);if(n){p.putStringNotNull(e.InAConstantsBios.QY_CLIENT_VERSION,r.getClientVersion());p.putStringNotNull(e.InAConstantsBios.QY_CLIENT_IDENTIFIER,c);p.putStringNotNull(e.InAConstantsBios.QY_CLIENT_COMPONENT,r.getClientComponent())}var l=e.XListOfString.create();if(u){var g=p.putNewStructure(e.InAConstantsBios.QY_CLIENT_CONTEXT);g.putStringNotNull(e.InAConstantsBios.QY_STORY_ID,i);g.putStringNotNull(e.InAConstantsBios.QY_STORY_NAME,o);g.putStringNotNull(e.InAConstantsBios.QY_LANGUAGE_LOCALE,s);if(e.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a)}}var y=t.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(y)){var A=y.size();for(var m=0;m<A;m++){var _=y.getStructureAt(m);var S=_.getStructureByKey(e.InAConstantsBios.QY_CLIENT_INFO);_.remove(e.InAConstantsBios.QY_CLIENT_INFO);if(e.isNull(S)){continue}var I=S.getStructureByKey(e.InAConstantsBios.QY_CLIENT_CONTEXT);if(e.isNull(I)){continue}var f=I.getListByKey(e.InAConstantsBios.QY_WIDGET_ID);if(e.notNull(f)){l.add(f.getStringAt(0))}}}if(l.hasElements()){var M=p.getStructureByKey(e.InAConstantsBios.QY_CLIENT_CONTEXT).putNewList(e.InAConstantsBios.QY_WIDGET_ID);M.addAllStrings(l)}}}};e.BasicInAQuery=function(){};e.BasicInAQuery.prototype=new e.XObject;e.BasicInAQuery.prototype._ff_c="BasicInAQuery";e.BasicInAQuery.prototype.m_connectionContainer=null;e.BasicInAQuery.prototype.m_systemType=null;e.BasicInAQuery.prototype.m_rpcFunction=null;e.BasicInAQuery.prototype.m_instanceId=null;e.BasicInAQuery.prototype.m_inaElementHashMap=null;e.BasicInAQuery.prototype.m_groupSignature=null;e.BasicInAQuery.prototype.m_state=null;e.BasicInAQuery.prototype.m_isStandAloneQuery=false;e.BasicInAQuery.prototype.m_isInARuntimeDataProvider=false;e.BasicInAQuery.prototype.m_drillDownDimensions=null;e.BasicInAQuery.prototype.m_drillDownDimensionNames=null;e.BasicInAQuery.prototype.m_dimensionsUsedInFilter=null;e.BasicInAQuery.prototype.m_measureDimensionName=null;e.BasicInAQuery.prototype.m_measureDimensionAxisType=null;e.BasicInAQuery.prototype.m_measureDimension=null;e.BasicInAQuery.prototype.m_secondaryStructureName=null;e.BasicInAQuery.prototype.m_filter=null;e.BasicInAQuery.prototype.m_queryDataCells=null;e.BasicInAQuery.prototype.m_preQueryName=null;e.BasicInAQuery.prototype.getPreQueryName=function(){return this.m_preQueryName};e.BasicInAQuery.prototype.setPreQueryName=function(e){this.m_preQueryName=e};e.BasicInAQuery.prototype.setupBasicInAQuery=function(t,r,n,i){this.m_instanceId=t;this.m_rpcFunction=r;this.m_connectionContainer=n;this.m_systemType=i;this.m_state=e.InAQueryMergeConstants.QUERY_STATE_INIT;this.m_isStandAloneQuery=false;this.m_isInARuntimeDataProvider=false;this.m_inaElementHashMap=e.XHashMapOfStringByString.create()};e.BasicInAQuery.prototype.releaseObject=function(){this.m_instanceId=null;this.m_rpcFunction=null;this.m_connectionContainer=null;this.m_systemType=null;this.m_state=null;this.m_inaElementHashMap=e.XObjectExt.release(this.m_inaElementHashMap);this.m_drillDownDimensions=e.XObjectExt.release(this.m_drillDownDimensions);this.m_drillDownDimensionNames=e.XObjectExt.release(this.m_drillDownDimensionNames);this.m_dimensionsUsedInFilter=e.XObjectExt.release(this.m_dimensionsUsedInFilter);this.m_measureDimensionName=null;this.m_measureDimensionAxisType=null;this.m_measureDimension=e.XObjectExt.release(this.m_measureDimension);this.m_secondaryStructureName=null;this.m_filter=e.XObjectExt.release(this.m_filter);this.m_queryDataCells=e.XObjectExt.release(this.m_queryDataCells);this.m_preQueryName=null;e.XObject.prototype.releaseObject.call(this)};e.BasicInAQuery.prototype.getConnectionContainer=function(){return this.m_connectionContainer};e.BasicInAQuery.prototype.getSystemType=function(){return this.m_systemType};e.BasicInAQuery.prototype.setRpcFunction=function(e){this.m_rpcFunction=e};e.BasicInAQuery.prototype.getRpcFunction=function(){return this.m_rpcFunction};e.BasicInAQuery.prototype.getInstanceId=function(){return this.m_instanceId};e.BasicInAQuery.prototype.isInitState=function(){return e.XString.isEqual(this.m_state,e.InAQueryMergeConstants.QUERY_STATE_INIT)};e.BasicInAQuery.prototype.isPendingProcessing=function(){return e.XString.isEqual(this.m_state,e.InAQueryMergeConstants.QUERY_STATE_PENDING_PROCESSING)};e.BasicInAQuery.prototype.isMergeChecked=function(){return e.XString.isEqual(this.m_state,e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED)};e.BasicInAQuery.prototype.setQueryState=function(e){this.m_state=e};e.BasicInAQuery.prototype.isStandAloneQuery=function(){return this.m_isStandAloneQuery};e.BasicInAQuery.prototype.setIsStandAloneQuery=function(t){this.m_isStandAloneQuery=t;if(t){this.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED)}};e.BasicInAQuery.prototype.isInARuntimeDataProvider=function(){return this.m_isInARuntimeDataProvider};e.BasicInAQuery.prototype.setIsInARuntimeDataProvider=function(e){this.m_isInARuntimeDataProvider=e};e.BasicInAQuery.prototype.getRequestStructure=function(){var t=null;var r=this.m_rpcFunction.getRpcRequest();if(e.notNull(r)){t=r.getRequestStructure()}return t};e.BasicInAQuery.prototype.addInaElementSignature=function(e,t){this.m_inaElementHashMap.put(e,t)};e.BasicInAQuery.prototype.getInaElementSignature=function(e){return this.m_inaElementHashMap.getByKey(e)};e.BasicInAQuery.prototype.calculateGroupSignature=function(){var t=e.XStringBuffer.create();var r=this.m_inaElementHashMap.getValuesAsReadOnlyListOfString();var n=r.size();for(var i=0;i<n;i++){var o=r.get(i);t.append(o)}this.m_groupSignature=e.XSha1.createSHA1(t.toString())};e.BasicInAQuery.prototype.getGroupSignature=function(){return this.m_groupSignature};e.BasicInAQuery.prototype.setGroupSignature=function(e){this.m_groupSignature=e};e.BasicInAQuery.prototype.getDrillDownDimensions=function(){return this.m_drillDownDimensions};e.BasicInAQuery.prototype.setDrillDownDimensions=function(e){this.m_drillDownDimensions=e};e.BasicInAQuery.prototype.getDrillDownDimensionNames=function(){return this.m_drillDownDimensionNames};e.BasicInAQuery.prototype.setDrillDownDimensionNames=function(e){this.m_drillDownDimensionNames=e};e.BasicInAQuery.prototype.getDimensionNamesUsedInFilter=function(){return this.m_dimensionsUsedInFilter};e.BasicInAQuery.prototype.setDimensionNamesUsedInFilter=function(e){this.m_dimensionsUsedInFilter=e};e.BasicInAQuery.prototype.getMeasureDimensionName=function(){return this.m_measureDimensionName};e.BasicInAQuery.prototype.setMeasureDimensionName=function(e){this.m_measureDimensionName=e};e.BasicInAQuery.prototype.getMeasureDimensionAxis=function(){return this.m_measureDimensionAxisType};e.BasicInAQuery.prototype.setMeasureDimensionAxis=function(e){this.m_measureDimensionAxisType=e};e.BasicInAQuery.prototype.getMeasureDimension=function(){return this.m_measureDimension};e.BasicInAQuery.prototype.setMeasureDimension=function(e){this.m_measureDimension=e};e.BasicInAQuery.prototype.getSecondaryStructureName=function(){return this.m_secondaryStructureName};e.BasicInAQuery.prototype.setSecondaryStructureName=function(e){this.m_secondaryStructureName=e};e.BasicInAQuery.prototype.getFilter=function(){return this.m_filter};e.BasicInAQuery.prototype.setFilter=function(e){this.m_filter=e};e.BasicInAQuery.prototype.getQueryDataCells=function(){return this.m_queryDataCells};e.BasicInAQuery.prototype.setQueryDataCells=function(e){this.m_queryDataCells=e};e.InAMergeRegistry=function(){};e.InAMergeRegistry.prototype=new e.XObject;e.InAMergeRegistry.prototype._ff_c="InAMergeRegistry";e.InAMergeRegistry.create=function(){var t=new e.InAMergeRegistry;t.setupInAMergeRegistry();return t};e.InAMergeRegistry.prototype.m_inaSourceQueryList=null;e.InAMergeRegistry.prototype.m_inaSourceQueryRepo=null;e.InAMergeRegistry.prototype.m_inaDataProviderList=null;e.InAMergeRegistry.prototype.m_inaDataProviderRepo=null;e.InAMergeRegistry.prototype.m_signatureSourceQueryMap=null;e.InAMergeRegistry.prototype.m_modelMetadataRepo=null;e.InAMergeRegistry.prototype.m_membersMetadataRepo=null;e.InAMergeRegistry.prototype.m_dimensionKeyFieldMap=null;e.InAMergeRegistry.prototype.m_fieldDimensionMap=null;e.InAMergeRegistry.prototype.setupInAMergeRegistry=function(){this.m_inaSourceQueryList=e.XListOfString.create();this.m_inaSourceQueryRepo=e.XHashMapByString.create();this.m_inaDataProviderList=e.XListOfString.create();this.m_inaDataProviderRepo=e.XHashMapByString.create();this.m_signatureSourceQueryMap=e.XLinkedHashMapByString.create();this.m_modelMetadataRepo=e.XHashMapByString.create();this.m_membersMetadataRepo=e.XHashMapByString.create();this.m_dimensionKeyFieldMap=e.XHashMapOfStringByString.create();this.m_fieldDimensionMap=e.XHashMapOfStringByString.create()};e.InAMergeRegistry.prototype.releaseObject=function(){this.m_inaSourceQueryList=e.XObjectExt.release(this.m_inaSourceQueryList);this.m_inaSourceQueryRepo=e.XObjectExt.release(this.m_inaSourceQueryRepo);this.m_inaDataProviderList=e.XObjectExt.release(this.m_inaDataProviderList);this.m_inaDataProviderRepo=e.XObjectExt.release(this.m_inaDataProviderRepo);this.m_signatureSourceQueryMap=e.XObjectExt.release(this.m_signatureSourceQueryMap);this.m_modelMetadataRepo=e.XObjectExt.release(this.m_modelMetadataRepo);this.m_membersMetadataRepo=e.XObjectExt.release(this.m_membersMetadataRepo);this.m_dimensionKeyFieldMap=e.XObjectExt.release(this.m_dimensionKeyFieldMap);this.m_fieldDimensionMap=e.XObjectExt.release(this.m_fieldDimensionMap);e.XObject.prototype.releaseObject.call(this)};e.InAMergeRegistry.prototype.registerInASourceQuery=function(e,t){this.m_inaSourceQueryRepo.put(e,t);if(!this.m_inaSourceQueryList.contains(e)){this.m_inaSourceQueryList.add(e)}};e.InAMergeRegistry.prototype.unregisterInASourceQuery=function(e){this.m_inaSourceQueryRepo.remove(e);this.m_inaSourceQueryList.removeElement(e)};e.InAMergeRegistry.prototype.registerInADataProvider=function(e,t){this.m_inaDataProviderRepo.put(e,t);if(!this.m_inaDataProviderList.contains(e)){this.m_inaDataProviderList.add(e)}};e.InAMergeRegistry.prototype.unregisterInADataProvider=function(e,t){this.m_inaDataProviderRepo.remove(t);this.m_inaDataProviderList.removeElement(t);this.m_signatureSourceQueryMap.remove(e);if(!this.hasSourceQueries()){this.clearMetadataRepo()}};e.InAMergeRegistry.prototype.clearMetadataRepo=function(){this.m_modelMetadataRepo.clear();this.m_membersMetadataRepo.clear();this.m_dimensionKeyFieldMap.clear();this.m_fieldDimensionMap.clear()};e.InAMergeRegistry.prototype.registerModelMetadata=function(t,r){if(e.notNull(r)&&e.XStringUtils.isNotNullAndNotEmpty(t)&&!this.m_modelMetadataRepo.containsKey(t)){this.m_modelMetadataRepo.put(t,r)}};e.InAMergeRegistry.prototype.registerKeyFieldForDimension=function(t,r){if(e.notNull(r)&&e.XStringUtils.isNotNullAndNotEmpty(t)&&!this.m_dimensionKeyFieldMap.containsKey(t)){var n=r.getStringByKey(e.InAQueryMergeConstants.QY_KEY_ATTRIBUTE);if(e.XStringUtils.isNullOrEmpty(n)){n=r.getStringByKey(e.InAQueryMergeConstants.QY_DEFAULT_KEY_ATTRIBUTE)}if(e.XStringUtils.isNullOrEmpty(n)){var i=r.getListByKey(e.InAQueryMergeConstants.QY_ATTRIBUTES);for(var o=0;o<i.size();o++){var s=i.getStructureAt(o);var a=s.getStringByKey(e.InAQueryMergeConstants.QY_PRESENTATION_TYPE);if(e.XString.isEqual(a,e.InAQueryMergeConstants.QY_KEY)){n=s.getStringByKey(e.InAQueryMergeConstants.QY_NAME);break}}}this.m_dimensionKeyFieldMap.put(t,n);if(!this.m_fieldDimensionMap.containsKey(n)){this.m_fieldDimensionMap.put(n,t)}}};e.InAMergeRegistry.prototype.registerMembersMetadata=function(t,r){if(e.notNull(r)&&e.XStringUtils.isNotNullAndNotEmpty(t)&&!this.m_membersMetadataRepo.containsKey(t)){var n=r.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);if(!e.PrUtils.isListEmpty(n)){this.m_membersMetadataRepo.put(t,n)}}};e.InAMergeRegistry.prototype.groupSourceQueries=function(e){this.m_signatureSourceQueryMap.clear();for(var t=0;t<e.size();t++){var r=e.get(t);var n=r.getGroupSignature();var i=r.getInstanceId();if(!r.isStandAloneQuery()&&r.isInitState()){this.addToGroup(n,i)}}};e.InAMergeRegistry.prototype.addToGroup=function(t,r){var n=null;if(!this.m_signatureSourceQueryMap.containsKey(t)){n=e.XListOfString.create();n.add(r);this.m_signatureSourceQueryMap.put(t,n)}else{n=this.m_signatureSourceQueryMap.getByKey(t);n.add(r)}};e.InAMergeRegistry.prototype.getMergeableSourceQueries=function(){var t=e.XList.create();for(var r=0;r<this.m_inaSourceQueryList.size();r++){var n=this.m_inaSourceQueryList.get(r);var i=this.getInASourceQuery(n);if(!i.isStandAloneQuery()&&i.isInitState()){t.add(i)}}return t};e.InAMergeRegistry.prototype.getKeyFieldOfDimension=function(e){return this.m_dimensionKeyFieldMap.getByKey(e)};e.InAMergeRegistry.prototype.getDimensionNameOfField=function(e){return this.m_fieldDimensionMap.getByKey(e)};e.InAMergeRegistry.prototype.getInASourceQuery=function(e){return this.m_inaSourceQueryRepo.getByKey(e)};e.InAMergeRegistry.prototype.getInADataProvider=function(e){return this.m_inaDataProviderRepo.getByKey(e)};e.InAMergeRegistry.prototype.getModelMetadata=function(e){return this.m_modelMetadataRepo.getByKey(e)};e.InAMergeRegistry.prototype.hasModelMetadata=function(e){return this.m_modelMetadataRepo.containsKey(e)};e.InAMergeRegistry.prototype.hasMeasureMembersMetadata=function(e){return this.m_membersMetadataRepo.containsKey(e)};e.InAMergeRegistry.prototype.getMembersMetadata=function(e){return this.m_membersMetadataRepo.getByKey(e)};e.InAMergeRegistry.prototype.getGroupSignatures=function(){return this.m_signatureSourceQueryMap.getKeysAsReadOnlyListOfString()};e.InAMergeRegistry.prototype.getSourceIDsBySignature=function(e){return this.m_signatureSourceQueryMap.getByKey(e)};e.InAMergeRegistry.prototype.getInADataProviders=function(){return this.m_inaDataProviderList.getValuesAsReadOnlyListOfString()};e.InAMergeRegistry.prototype.hasSourceQueries=function(){return this.m_inaSourceQueryRepo.hasElements()};e.InAMergeRegistry.prototype.getDependentQueryInADataProviders=function(t){var r=e.XList.create();var n=this.m_inaDataProviderRepo.getValuesAsReadOnlyList();e.XStream.of(n).forEach(function(e){var n=e;var i=n.getPreQueries();if(i.contains(t)){r.add(n)}}.bind(this));return r};e.InAMergeRegistry.prototype.getAllMainQueryInADataProviders=function(){var t=e.XList.create();var r=this.m_inaDataProviderRepo.getValuesAsReadOnlyList();e.XStream.of(r).forEach(function(e){var r=e;if(r.isMainQuery()){t.add(r)}}.bind(this));return t};e.InAMergeRegistry.prototype.getPreQueryInADataProviderByName=function(t){var r=this.m_inaDataProviderRepo.getValuesAsReadOnlyList();for(var n=0;n<r.size();n++){var i=r.get(n);if(i.isPreQuery()&&e.XString.isEqual(i.getPreQueryName(),t)){return i}}return null};e.InAMergeRegistry.prototype.getPreQuerySourceByName=function(t){var r=this.m_inaSourceQueryRepo.getValuesAsReadOnlyList();for(var n=0;n<r.size();n++){var i=r.get(n);if(e.XString.isEqual(i.getPreQueryName(),t)){return i}}return null};e.InAMergeRegistryManager=function(){};e.InAMergeRegistryManager.prototype=new e.XObject;e.InAMergeRegistryManager.prototype._ff_c="InAMergeRegistryManager";e.InAMergeRegistryManager.create=function(){var t=new e.InAMergeRegistryManager;t.setupInAMergeRegistry();return t};e.InAMergeRegistryManager.prototype.m_inaMergeRegistry=null;e.InAMergeRegistryManager.prototype.m_inaSortingSerializer=null;e.InAMergeRegistryManager.prototype.m_elementsPathForMergeBreakers=null;e.InAMergeRegistryManager.prototype.setupInAMergeRegistry=function(){this.m_inaMergeRegistry=e.InAMergeRegistry.create();this.m_inaSortingSerializer=e.PrSerializerFactory.newSerializer(true,false,0);this.m_elementsPathForMergeBreakers=e.XListOfString.create();this.setupElementPathLists()};e.InAMergeRegistryManager.prototype.releaseObject=function(){this.m_inaSortingSerializer=e.XObjectExt.release(this.m_inaSortingSerializer);this.m_elementsPathForMergeBreakers=e.XObjectExt.release(this.m_elementsPathForMergeBreakers);e.XObject.prototype.releaseObject.call(this)};e.InAMergeRegistryManager.prototype.setupElementPathLists=function(){this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_CAPABILTIES_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_DATASOURCE_OBJECTNAME_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_DATASOURCE_PACKAGE_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_DATASOURCE_SCHEMA_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_DATASOURCE_TYPE_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_LANGUAGE_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_VARIABLES_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_SORT_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_EXCEPTIONS_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_CONDITIONS_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_OPTIONS_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_FIXED_FILTER_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_RS_FEATURE_REQUEST_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_CELL_CONTEXT_REQUESTS_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_CURRENCY_TRANSLATION_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_UDH_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_DRILLDOWN_DIMENSIONS_VIRTUAL_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_MEASURE_STRUCTURE_WITHOUT_MEMBERS_VIRTUAL_PATH);this.m_elementsPathForMergeBreakers.add(e.InAQueryMergeConstants.PA_QUERY_PATH)};e.InAMergeRegistryManager.prototype.buildInASourceQueryAndRegister=function(t,r,n,i,o,s,a){var u=null;if(e.notNull(r)&&e.notNull(n)){var c=this.getValidInARequest(r);if(e.notNull(c)){var p=false;var l=e.PrUtilsJsonPath.getFirstElementFromPath(c,e.InAQueryMergeConstants.PA_RS_FEATURE_REQUEST_PATH);var g=l.getBooleanByKeyExt(e.InAQueryMergeConstants.QY_RETURN_EMPTY_JSON_RESULTSET,false);if(g){var y=e.PrUtilsJsonPath.getFirstElementFromPath(c,e.InAQueryMergeConstants.PA_DEFINITION_PATH);var A=y.getStringByKey(e.InAQueryMergeConstants.QY_NAME);if(this.m_inaMergeRegistry.getPreQuerySourceByName(A)!==null){p=true}}if(!p){this.collectMeasureMetadataForRegistry(o,s,a);u=e.InASourceQuery.create(t,r,n,i);this.m_inaMergeRegistry.registerInASourceQuery(t,u);var m=this.isStandAloneQuery01(c);if(!m){this.collectElementsAndInaSignatures(u);this.collectInitialMeasureMembers(u);m=this.isStandAloneQuery02(u,c,o)}if(m){u.setIsStandAloneQuery(true)}}}}return u};e.InAMergeRegistryManager.prototype.collectMeasureMetadataForRegistry=function(t,r,n){if(e.notNull(n)){var i=n.getStringByKey(e.InAQueryMergeConstants.QY_NAME);this.m_inaMergeRegistry.registerKeyFieldForDimension(i,n);this.m_inaMergeRegistry.registerMembersMetadata(i,n)}this.m_inaMergeRegistry.registerModelMetadata(t,r)};e.InAMergeRegistryManager.prototype.collectInitialMeasureMembers=function(t){var r=t.getFilter();var n=t.getMeasureDimension();if(e.notNull(r)){var i=r.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);var o=e.InARestrictedMeasureUtils.extractMeasuresFromSelection(i,null);for(var s=0;s<o.size();s++){var a=o.get(s);t.addMeasureMemberName(a,false,true,null)}}else if(e.notNull(n)){var u=n.getStringByKey(e.InAQueryMergeConstants.QY_NAME);var c=this.m_inaMergeRegistry.getKeyFieldOfDimension(u);var p=n.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);for(var l=0;l<p.size();l++){var g=p.getStructureAt(l);var y=g.getStringByKey(c);t.addMeasureMemberName(y,false,false,null)}}};e.InAMergeRegistryManager.prototype.isStandAloneQuery01=function(t){try{var r=e.InAQueryMergeUtils.getQueryType(t);if(e.XString.isEqual(r,e.InAQueryMergeConstants.QY_QUERY_VALUE_HELP)){return true}var n=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_QUERY_AXES_PATH);if(!e.PrUtils.isListEmpty(n)){var i=n.get(0).getIntegerByKeyExt(e.InAQueryMergeConstants.QY_ZERO_SUPPRESSION_TYPE,-1);var o=n.get(1).getIntegerByKeyExt(e.InAQueryMergeConstants.QY_ZERO_SUPPRESSION_TYPE,-1);if(i!==0||o!==0){return true}}var s=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_RS_FEATURE_REQUEST_PATH);if(e.notNull(s)&&s.getBooleanByKey(e.InAQueryMergeConstants.QY_SUPPRESS_KEYFIGURE_CALCULATION)){return true}if(e.notNull(s)&&s.getBooleanByKeyExt(e.InAQueryMergeConstants.QY_RETURN_EMPTY_JSON_RESULTSET,false)){return true}var a=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_DIMENSIONS_PATH);if(e.PrUtils.isListEmpty(a)||!e.InAQueryMergeUtils.hasMeasureDimension(a)){return true}if(!e.PrUtils.isListEmpty(a)&&e.InAQueryMergeUtils.hasGeometryDimension(a)){return true}var u=e.InAQueryMergeUtils.getFilterStructure(t);var c=e.isNull(u)?null:u.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.notNull(c)){var p=c.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(p)){e.InARestrictedMeasureUtils._cleanRedundantOperatorWrapper(p,p);if(e.InAQueryMergeUtils.isComplexFilter(p)){return true}}if(e.InAQueryMergeUtils.hasGeometryOperandInFilter(c)){return true}if(e.InAQueryMergeUtils.hasVariablePlaceHolder(c)){return true}if(e.InAQueryMergeUtils.hasFilterTagValue(c,e.InAQueryMergeConstants.TAG_FILTER_SECOND_STRUCTURE)){return true}var l=c.getStringRepresentation();if(e.notNull(l)&&e.XString.containsString(l,e.InAQueryMergeConstants.QY_LEVEL_OFFSET_1)){return true}}}catch(e){return true}return false};e.InAMergeRegistryManager.prototype.isStandAloneQuery02=function(t,r,n){try{var i=t.getMeasureDimensionAxis();var o=t.getDrillDownDimensions();if(e.notNull(o)&&e.InAQueryMergeUtils.hasNonMeasureDimensionOnMeasureAxis(o,i)){return true}var s=e.InAQueryMergeUtils.getFilterStructure(r);var a=e.isNull(s)?null:s.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.notNull(a)){var u=t.getDrillDownDimensionNames();var c=e.XListOfString.create();e.InAQueryMergeUtils.collectDimensionsWithHierarchicalFilter(a,c);if(e.notNull(u)&&!c.isEmpty()&&e.InAQueryMergeUtils.isListsIntersect(c,u)){return true}var p=t.getMeasureDimension();var l=e.isNull(p)?null:p.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);if(!e.PrUtils.isListEmpty(l)){var g=t.getMeasureDimensionName();var y=t.getDimensionNamesUsedInFilter();if(e.notNull(y)){y.removeElement(g);if(!y.isEmpty()){var A=this.m_inaMergeRegistry.getModelMetadata(n);var m=t.getInaElementSignature(e.InAQueryMergeConstants.PA_CONDITIONS_PATH);var _=e.InAQueryMergeUtils.isConditionsStateChangedByClient(A,this.m_inaSortingSerializer,m);if(_){return true}var S=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_SORT_PATH);var I=e.InAQueryMergeUtils.hasMeasureSort(S);if(I){return true}var f=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_EXCEPTIONS_PATH);if(e.notNull(f)){return true}var M=e.XListOfString.create();var E=this.m_inaMergeRegistry.getMembersMetadata(g);if(e.notNull(E)){e.InAQueryMergeUtils.collectDimensionsOfBackendRestrictedMeasures(E,M);if(!M.isEmpty()&&e.InAQueryMergeUtils.isListsIntersect(M,y)){return true}}var h=e.XListOfString.create();e.InAQueryMergeUtils.collectUsedDimensionsInRestrictedMeasures(l,h);if(!h.isEmpty()&&e.InAQueryMergeUtils.isListsIntersect(h,y)){return true}var d=e.XListOfString.create();e.InAQueryMergeUtils.collectUsedDimensionsInFormulas(l,d);if(!d.isEmpty()&&e.InAQueryMergeUtils.isListsIntersect(d,y)){return true}}}}}}catch(e){return true}return false};e.InAMergeRegistryManager.prototype.collectElementsAndInaSignatures=function(t){var r=t.getRequestStructure();var n=this.m_elementsPathForMergeBreakers.size();for(var i=0;i<n;i++){var o=this.m_elementsPathForMergeBreakers.get(i);var s=e.PrUtilsJsonPath.getFirstElementFromPath(r,o);if(e.XString.isEqual(o,e.InAQueryMergeConstants.PA_DRILLDOWN_DIMENSIONS_VIRTUAL_PATH)){var a=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_DIMENSIONS_PATH);s=this.collectDrillDownDimensions(t,a);var u=s.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);t.setDrillDownDimensions(u);if(e.notNull(u)){var c=e.XListOfString.create();e.InAQueryMergeUtils.collectDrillDownDimensionNames(u,c);t.setDrillDownDimensionNames(c)}}else if(e.XString.isEqual(o,e.InAQueryMergeConstants.PA_MEASURE_STRUCTURE_WITHOUT_MEMBERS_VIRTUAL_PATH)){var p=t.getMeasureDimension();if(e.notNull(p)){s=this.collectMeasureDimensionWithoutMembers(p)}}var l=this.m_inaSortingSerializer.serialize(s);var g=e.XSha1.createSHA1(l);if(e.XStringUtils.isNotNullAndNotEmpty(o)&&e.XStringUtils.isNotNullAndNotEmpty(g)){t.addInaElementSignature(o,g)}}var y=e.InAQueryMergeUtils.getFilterStructure(r);t.setFilter(y);var A=e.isNull(y)?null:y.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.notNull(A)){var m=e.XListOfString.create();e.InAQueryMergeUtils.collectFieldNamesUsedInSelection(A,m);var _=this.getDimensionNamesForFields(m);t.setDimensionNamesUsedInFilter(_)}var S=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_QUERY_DATACELLS_PATH);t.setQueryDataCells(S);var I=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.TAG_GROUP_SIGNATURE_PATH);if(e.notNull(I)){t.setGroupSignature(I.getString())}else{t.calculateGroupSignature()}};e.InAMergeRegistryManager.prototype.getDimensionNamesForFields=function(t){var r=e.XListOfString.create();if(e.notNull(t)){for(var n=0;n<t.size();n++){var i=t.get(n);var o=this.m_inaMergeRegistry.getDimensionNameOfField(i);if(e.isNull(o)){o=e.InAQueryMergeUtils.getUsedDimensionName(i)}r.add(o)}}return r};e.InAMergeRegistryManager.prototype.collectDrillDownDimensions=function(t,r){var n=e.PrFactory.createStructure();if(!e.PrUtils.isListEmpty(r)){var i=e.PrFactory.createList();for(var o=0;o<r.size();o++){var s=r.get(o);var a=s.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);var u=s.getStringByKey(e.InAQueryMergeConstants.QY_AXIS);var c=s.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE)!==null&&s.containsKey(e.InAQueryMergeConstants.QY_JOIN_TYPE);if(e.XStringUtils.isNullOrEmpty(a)){if(!e.XString.isEqual(u,e.InAQueryMergeConstants.QY_FREE)||c){i.add(s)}}else if(e.XString.isEqual(a,e.InAQueryMergeConstants.TAG_MEASURE_STRUCTURE)){this.collectMeasureDimensionInfo(t,s,u)}else if(e.XString.isEqual(a,e.InAQueryMergeConstants.TAG_SECONDARY_STRUCTURE)){var p=s.getStringByKey(e.InAQueryMergeConstants.QY_NAME);t.setSecondaryStructureName(p);if(!e.XString.isEqual(u,e.InAQueryMergeConstants.QY_FREE)){i.add(s)}}}if(!e.PrUtils.isListEmpty(i)){n.put(e.InAQueryMergeConstants.QY_DIMENSIONS,i)}}return n};e.InAMergeRegistryManager.prototype.collectMeasureDimensionInfo=function(t,r,n){var i=r.getStringByKey(e.InAQueryMergeConstants.QY_NAME);t.setMeasureDimensionName(i);t.setMeasureDimension(r);t.setMeasureDimensionAxis(n)};e.InAMergeRegistryManager.prototype.collectMeasureDimensionWithoutMembers=function(t){var r=e.PrFactory.createStructureDeepCopy(t);r.remove(e.InAQueryMergeConstants.QY_MEMBERS);return r};e.InAMergeRegistryManager.prototype.getValidInARequest=function(t){var r=t.getRpcRequest();var n=e.isNull(r)?null:r.getRequestStructure();if(e.isNull(n)||n.isEmpty()){n=null}else{var i=e.PrUtilsJsonPath.getFirstElementFromPath(n,e.InAQueryMergeConstants.PA_ANALYTICS_SERVICE_TYPE_PATH);if(e.isNull(i)||i.containsKey(e.InAQueryMergeConstants.QY_PROCESSING_DIRECTIVES)||i.containsKey(e.InAQueryMergeConstants.QY_PROCESSING_STEP)){n=null}}return n};e.InAMergeRegistryManager.prototype.registerInASourceQuery=function(e,t){this.m_inaMergeRegistry.registerInASourceQuery(e,t)};e.InAMergeRegistryManager.prototype.unregisterInASourceQuery=function(e){this.m_inaMergeRegistry.unregisterInASourceQuery(e)};e.InAMergeRegistryManager.prototype.registerInADataProvider=function(e,t){this.m_inaMergeRegistry.registerInADataProvider(e,t)};e.InAMergeRegistryManager.prototype.unregisterInADataProvider=function(e,t){this.m_inaMergeRegistry.unregisterInADataProvider(e,t)};e.InAMergeRegistryManager.prototype.registerKeyFieldForDimension=function(e,t){this.m_inaMergeRegistry.registerKeyFieldForDimension(e,t)};e.InAMergeRegistryManager.prototype.registerModelMetadata=function(e,t){this.m_inaMergeRegistry.registerModelMetadata(e,t)};e.InAMergeRegistryManager.prototype.registerMembersMetadata=function(e,t){this.m_inaMergeRegistry.registerMembersMetadata(e,t)};e.InAMergeRegistryManager.prototype.groupSourceQueries=function(e){this.m_inaMergeRegistry.groupSourceQueries(e)};e.InAMergeRegistryManager.prototype.getInASourceQuery=function(e){return this.m_inaMergeRegistry.getInASourceQuery(e)};e.InAMergeRegistryManager.prototype.getInADataProvider=function(e){return this.m_inaMergeRegistry.getInADataProvider(e)};e.InAMergeRegistryManager.prototype.getGroupSignatures=function(){return this.m_inaMergeRegistry.getGroupSignatures()};e.InAMergeRegistryManager.prototype.getSourceIDsBySignature=function(e){return this.m_inaMergeRegistry.getSourceIDsBySignature(e)};e.InAMergeRegistryManager.prototype.getMergeableSourceQueries=function(){return this.m_inaMergeRegistry.getMergeableSourceQueries()};e.InAMergeRegistryManager.prototype.getInADataProviders=function(){return this.m_inaMergeRegistry.getInADataProviders()};e.InAMergeRegistryManager.prototype.getKeyFieldOfDimension=function(e){return this.m_inaMergeRegistry.getKeyFieldOfDimension(e)};e.InAMergeRegistryManager.prototype.getModelMetadata=function(e){return this.m_inaMergeRegistry.getModelMetadata(e)};e.InAMergeRegistryManager.prototype.getMembersMetadata=function(e){return this.m_inaMergeRegistry.getMembersMetadata(e)};e.InAMergeRegistryManager.prototype.hasMeasureMembersMetadata=function(e){return this.m_inaMergeRegistry.hasMeasureMembersMetadata(e)};e.InAMergeRegistryManager.prototype.hasModelMetadata=function(e){return this.m_inaMergeRegistry.hasModelMetadata(e)};e.InAMergeRegistryManager.prototype.getDependentQueryInADataProviders=function(e){return this.m_inaMergeRegistry.getDependentQueryInADataProviders(e)};e.InAMergeRegistryManager.prototype.getAllMainQueryInADataProviders=function(){return this.m_inaMergeRegistry.getAllMainQueryInADataProviders()};e.InAMergeRegistryManager.prototype.getPreQueryInADataProviderByName=function(e){return this.m_inaMergeRegistry.getPreQueryInADataProviderByName(e)};e.InAMergeRequestBuilder=function(){};e.InAMergeRequestBuilder.prototype=new e.XObject;e.InAMergeRequestBuilder.prototype._ff_c="InAMergeRequestBuilder";e.InAMergeRequestBuilder.create=function(t){var r=new e.InAMergeRequestBuilder;r.setupInAMergeRequestBuilder(t);return r};e.InAMergeRequestBuilder.prototype.m_inaMergeRegistryManager=null;e.InAMergeRequestBuilder.prototype.setupInAMergeRequestBuilder=function(e){this.m_inaMergeRegistryManager=e};e.InAMergeRequestBuilder.prototype.releaseObject=function(){this.m_inaMergeRegistryManager=null;e.XObject.prototype.releaseObject.call(this)};e.InAMergeRequestBuilder.prototype.createInADataProviderRequestStructure=function(t,r){var n=e.PrFactory.createStructure();if(r.isTypeOf(e.SystemType.BW)){n=this.createRequestStructureForBW(t)}else if(r.isTypeOf(e.SystemType.HANA)){n=this.createRequestStructureForHANA(t)}return n};e.InAMergeRequestBuilder.prototype.createRequestStructureForHANA=function(t){var r=e.PrFactory.createStructure();var n=t.get(0);var i=this.m_inaMergeRegistryManager.getInASourceQuery(n);var o=i.getRequestStructure();var s=o.getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS);var a=r.putNewStructure(e.InAQueryMergeConstants.QY_ANALYTICS);this.fillAnalyticsElements(s,a,t,e.SystemType.HANA);r.putIfNotNull(e.InAQueryMergeConstants.QY_CLIENT_INFO,o.getStructureByKey(e.InAQueryMergeConstants.QY_CLIENT_INFO));var u=r.putNewList(e.InAQueryMergeConstants.QY_OPTIONS);u.addAll(o.getListByKey(e.InAQueryMergeConstants.QY_OPTIONS));return r};e.InAMergeRequestBuilder.prototype.createRequestStructureForBW=function(t){var r=e.PrFactory.createStructure();var n=t.get(0);var i=this.m_inaMergeRegistryManager.getInASourceQuery(n);var o=i.getRequestStructure();var s=o.getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS);var a=r.putNewStructure(e.InAQueryMergeConstants.QY_ANALYTICS);this.fillAnalyticsElements(s,a,t,e.SystemType.BW);r.putIfNotNull(e.InAQueryMergeConstants.QY_CLIENT_INFO,o.getStructureByKey(e.InAQueryMergeConstants.QY_CLIENT_INFO));var u=r.putNewList(e.InAQueryMergeConstants.QY_OPTIONS);u.addAll(o.getListByKey(e.InAQueryMergeConstants.QY_OPTIONS));return r};e.InAMergeRequestBuilder.prototype.fillAnalyticsElements=function(t,r,n,i){r.put(e.InAQueryMergeConstants.QY_CAPABILITIES,t.getListByKey(e.InAQueryMergeConstants.QY_CAPABILITIES));var o=t.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE);r.put(e.InAQueryMergeConstants.QY_DATASOURCE,e.PrUtils.deepCopyElement(o));var s=t.getStructureByKey(e.InAQueryMergeConstants.QY_DEFINITION);var a=e.PrFactory.createStructure();r.put(e.InAQueryMergeConstants.QY_DEFINITION,a);this.fillDefinitionElements(s,a,n,i);r.putString(e.InAQueryMergeConstants.QY_LANGUAGE,t.getStringByKey(e.InAQueryMergeConstants.QY_LANGUAGE))};e.InAMergeRequestBuilder.prototype.fillDefinitionElements=function(t,r,n,i){var o=this.buildSpecialElements(n,i);r.putIfNotNull(e.InAQueryMergeConstants.QY_CONDITIONS,t.getListByKey(e.InAQueryMergeConstants.QY_CONDITIONS));r.putIfNotNull(e.InAQueryMergeConstants.QY_CELL_CONTEXT_REQUESTS,t.getListByKey(e.InAQueryMergeConstants.QY_CELL_CONTEXT_REQUESTS));r.putIfNotNull(e.InAQueryMergeConstants.QY_CURRENCY_TRANSLATION,t.getStructureByKey(e.InAQueryMergeConstants.QY_CURRENCY_TRANSLATION));var s=o.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);r.put(e.InAQueryMergeConstants.QY_DIMENSIONS,s);r.putIfNotNull(e.InAQueryMergeConstants.QY_EXCEPTIONS,t.getListByKey(e.InAQueryMergeConstants.QY_EXCEPTIONS));if(i.isTypeOf(e.SystemType.HANA)){r.putStringNotNullAndNotEmpty(e.InAQueryMergeConstants.QY_NAME,t.getStringByKey(e.InAQueryMergeConstants.QY_NAME))}var a=o.getStructureByKey(e.InAQueryMergeConstants.QY_FILTER);var u=i.isTypeOf(e.SystemType.BW)?e.InAQueryMergeConstants.QY_FILTER:e.InAQueryMergeConstants.QY_DYNAMIC_FILTER;r.putIfNotNull(u,a);r.putIfNotNull(e.InAQueryMergeConstants.QY_FIXED_FILTER,t.getStructureByKey(e.InAQueryMergeConstants.QY_FIXED_FILTER));r.putIfNotNull(e.InAQueryMergeConstants.QY_QUERY,t.getStructureByKey(e.InAQueryMergeConstants.QY_QUERY));var c=o.getListByKey(e.InAQueryMergeConstants.QY_QUERY_DATA_CELLS);r.putIfNotNull(e.InAQueryMergeConstants.QY_QUERY_DATA_CELLS,c);r.putIfNotNull(e.InAQueryMergeConstants.QY_RS_FEATURE_REQUEST,t.getStructureByKey(e.InAQueryMergeConstants.QY_RS_FEATURE_REQUEST));r.putIfNotNull(e.InAQueryMergeConstants.QY_SORT,t.getListByKey(e.InAQueryMergeConstants.QY_SORT));r.putIfNotNull(e.InAQueryMergeConstants.QY_UNIVERSAL_DISPLAY_HIERARCHIES,t.getListByKey(e.InAQueryMergeConstants.QY_UNIVERSAL_DISPLAY_HIERARCHIES));r.putIfNotNull(e.InAQueryMergeConstants.QY_VARIABLES,t.getListByKey(e.InAQueryMergeConstants.QY_VARIABLES))};e.InAMergeRequestBuilder.prototype.buildSpecialElements=function(t,r){var n=e.PrFactory.createStructure();var i=this.createMergeFilter(n);var o=null;var s=r.isTypeOf(e.SystemType.BW)?n.putNewList(e.InAQueryMergeConstants.QY_QUERY_DATA_CELLS):null;var a=null;var u=n.putNewList(e.InAQueryMergeConstants.QY_DIMENSIONS);for(var c=0;c<t.size();c++){var p=t.get(c);var l=this.m_inaMergeRegistryManager.getInASourceQuery(p);var g=l.getMeasureDimension();var y=l.getFilter().getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);var A=l.getMeasureDimensionName();var m=this.m_inaMergeRegistryManager.getKeyFieldOfDimension(A);if(c===0){i.putStringNotNullAndNotEmpty(e.InAQueryMergeConstants.QY_FIELD_NAME,m);o=i.putNewList(e.InAQueryMergeConstants.QY_ELEMENTS);if(e.notNull(s)){s.addAll(l.getQueryDataCells())}u.addAll(l.getDrillDownDimensions());if(e.notNull(g)){a=e.PrFactory.createStructureDeepCopy(g);if(e.isNull(s)){this.adjustMeasures(a,y,l,m)}u.add(a)}}else{if(e.notNull(g)&&e.notNull(a)){var _=a.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);var S=g.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);if(e.isNull(s)){this.mergeMeasureElements(_,S,y,l,m)}else{e.InAQueryMergeUtils.mergeElementsLists(_,S)}}if(l.getQueryDataCells()!==null&&e.notNull(s)){var I=l.getQueryDataCells();e.InAQueryMergeUtils.mergeElementsLists(s,I)}}var f=e.InARestrictedMeasureUtils.extractMeasuresFromSelection(y,null);var M=e.XHashMapOfStringByString.create();var E=this.getRestrictedMeasureFilter(f,y,a,s,M);this.addElementsToRmFilter(E,o);this.assignRestrictedMeasureToSourceQuery(l,M)}return n};e.InAMergeRequestBuilder.prototype.adjustMeasures=function(t,r,n,i){var o=t.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);var s=e.PrList.create();var a=e.XHashMapOfStringByString.create();for(var u=0;u<o.size();u++){var c=o.get(u);if(c.getBooleanByKeyExt(e.InAQueryMergeConstants.TAG_MEASURE_MEMBER_TOUCHED,false)){this.createRestrictedMeasure(c,i,s,a);o.removeElement(c);var p=c.getStringByKey(e.InAQueryMergeConstants.QY_MEMBER_NAME);if(e.XStringUtils.isNotNullAndNotEmpty(p)){var l=e.PrStructure.create();l.putString(e.InAQueryMergeConstants.QY_MEMBER_NAME,p);o.add(l)}}}this.replaceMeasureInSelection(r,a);this.assignRestrictedMeasureToSourceQuery(n,a);this.replaceFormulaAndSelectionReferencesWithRMName(a,o);o.addAll(s)};e.InAMergeRequestBuilder.prototype.mergeMeasureElements=function(t,r,n,i,o){var s=e.XHashMapOfStringByString.create();var a=e.PrList.create();if(e.notNull(r)){for(var u=0;u<r.size();u++){var c=r.get(u);if(!t.contains(c)){var p=c;if(p.getBooleanByKeyExt(e.InAQueryMergeConstants.TAG_MEASURE_MEMBER_TOUCHED,false)){this.createRestrictedMeasure(p,o,a,s)}else{a.add(p)}}}}this.replaceMeasureInSelection(n,s);this.assignRestrictedMeasureToSourceQuery(i,s);this.replaceFormulaAndSelectionReferencesWithRMName(s,a);t.addAll(a)};e.InAMergeRequestBuilder.prototype.replaceMeasureInSelection=function(t,r){var n=r.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var o=n.get(i);var s=r.getByKey(o);e.InARestrictedMeasureUtils.replaceMeasureInSelection(t,s,o)}};e.InAMergeRequestBuilder.prototype.createRestrictedMeasure=function(t,r,n,i){var o=true;var s=t.getStringByKey(e.InAQueryMergeConstants.QY_MEMBER_NAME);if(e.XStringUtils.isNullOrEmpty(s)){o=false;s=t.getStructureByKey(e.InAQueryMergeConstants.QY_MEMBER_OPERAND).getStringByKey(e.InAQueryMergeConstants.QY_VALUE)}var a=e.XSha1.createSHA1(t.toString());var u=a;var c=t.cloneExt(null);var p=o?e.InAQueryMergeConstants.QY_MEMBER_NAME:e.InAQueryMergeConstants.QY_MEMBER_OPERAND;c.remove(p);c.putString(e.InAQueryMergeConstants.QY_NAME,u);c.putString(e.InAQueryMergeConstants.QY_DESCRIPTION,u);var l=c.putNewStructure(e.InAQueryMergeConstants.QY_SELECTION);var g=l.putNewStructure(e.InAQueryMergeConstants.QY_SET_OPERAND);var y=g.putNewList(e.InAQueryMergeConstants.QY_ELEMENTS);var A=y.addNewStructure();A.putString(e.InAQueryMergeConstants.QY_COMPARISON,e.InAQueryMergeConstants.QY_EQUALS_SIGN);A.putString(e.InAQueryMergeConstants.QY_LOW,s);g.putString(e.InAQueryMergeConstants.QY_FIELD_NAME,r);n.add(c);i.put(u,s)};e.InAMergeRequestBuilder.prototype.replaceFormulaAndSelectionReferencesWithRMName=function(t,r){var n=t.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var o=n.get(i);var s=t.getByKey(o);for(var a=0;a<r.size();a++){var u=r.get(a);var c=u.getStringByKey(e.InAQueryMergeConstants.QY_NAME);if(e.XString.isEqual(o,c)){continue}var p=u.getStructureByKey(e.InAQueryMergeConstants.QY_FORMULA);var l=u.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.notNull(p)){var g=p.getStringRepresentation();var y=e.XString.replace(g,s,o);var A=e.JsonParserFactory.createFromString(y);u.put(e.InAQueryMergeConstants.QY_FORMULA,A)}else if(e.notNull(l)){var m=l.getStringRepresentation();var _=e.XString.replace(m,s,o);var S=e.JsonParserFactory.createFromString(_);u.put(e.InAQueryMergeConstants.QY_SELECTION,S)}}}};e.InAMergeRequestBuilder.prototype.createMergeFilter=function(t){var r=t.putNewStructure(e.InAQueryMergeConstants.QY_FILTER);var n=r.putNewStructure(e.InAQueryMergeConstants.QY_SELECTION);var i=n.putNewStructure(e.InAQueryMergeConstants.QY_OPERATOR);i.putString(e.InAQueryMergeConstants.QY_CODE,e.InAQueryMergeConstants.QY_AND);var o=i.putNewList(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);var s=o.addNewStructure().putNewStructure(e.InAQueryMergeConstants.QY_SET_OPERAND);return s};e.InAMergeRequestBuilder.prototype.getRestrictedMeasureFilter=function(t,r,n,i,o){var s=n.getStringByKey(e.InAQueryMergeConstants.QY_NAME);var a=e.XListOfString.create();e.InAQueryMergeUtils.collectFieldNamesUsedInSelection(r,a);var u=this.m_inaMergeRegistryManager.getKeyFieldOfDimension(s);if(a.contains(u)&&a.size()===1){return r}var c=e.InARestrictedMeasureUtils.processRestrictedMeasures(t,u,n,r,i,o);return c};e.InAMergeRequestBuilder.prototype.addElementsToRmFilter=function(t,r){var n=t.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);var i=null;var o=null;var s=null;if(e.notNull(n)){i=n.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);o=i.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);s=o.get(0).getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND)}else{s=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);if(e.isNull(s)){i=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);o=i.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);s=o.get(0).getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND)}}if(e.notNull(s)){var a=s.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);for(var u=0;u<a.size();u++){var c=a.get(u);if(!r.contains(c)){r.add(c)}}}};e.InAMergeRequestBuilder.prototype.assignRestrictedMeasureToSourceQuery=function(e,t){if(e.hasMeasureFilter()){var r=t.getKeysAsReadOnlyListOfString();for(var n=0;n<r.size();n++){var i=r.get(n);e.addMeasureMemberName(i,true,false,t.getByKey(i))}}};e.InAMergeResponseDispatcher=function(){};e.InAMergeResponseDispatcher.prototype=new e.XObject;e.InAMergeResponseDispatcher.prototype._ff_c="InAMergeResponseDispatcher";e.InAMergeResponseDispatcher.create=function(t){var r=new e.InAMergeResponseDispatcher;r.setupInAMergeResponseDispatcher(t);return r};e.InAMergeResponseDispatcher.prototype.m_inaMergeRegistryManager=null;e.InAMergeResponseDispatcher.prototype.setupInAMergeResponseDispatcher=function(e){this.m_inaMergeRegistryManager=e};e.InAMergeResponseDispatcher.prototype.releaseObject=function(){this.m_inaMergeRegistryManager=null;e.XObject.prototype.releaseObject.call(this)};e.InAMergeResponseDispatcher.prototype.dispatchInAResponse=function(e,t){this.processInADataProviderResponse(e,t);this.finalizeFunctionsAndCleanupQueries(e,t)};e.InAMergeResponseDispatcher.prototype.processInADataProviderResponse=function(t,r){var n=r.getData();var i=n.getRootElement();var o=i.getListByKey(e.InAQueryMergeConstants.QY_BATCH);var s=e.notNull(o)?o.getStructureAt(0):i;var a=e.PrUtilsJsonPath.getFirstElementFromPath(s,e.InAQueryMergeConstants.PA_MESSAGES_PATH);var u=false;if(e.notNull(a)){for(var c=0;c<a.size();c++){var p=a.getStructureAt(c);if(p.getIntegerByKeyExt(e.InAQueryMergeConstants.QY_TYPE,-1)===2){u=true;break}}}if(r.isValid()&&!u){this.dispatchResponse(s,t)}else{this.addResponseToAllSourceQueries(t,s)}t.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_PROCESSED)};e.InAMergeResponseDispatcher.prototype.dispatchResponse=function(t,r){var n=r.getSourceInstanceIds();var i=null;var o=null;if(r.isStandAloneQuery()){i=n.get(0);var s=this.m_inaMergeRegistryManager.getInASourceQuery(i);o=s.getInstanceId();this.finalizeResponse(o,s,t)}else{o=r.getInstanceId();for(var a=0;a<n.size();a++){i=n.get(a);var u=this.m_inaMergeRegistryManager.getInASourceQuery(i);var c=e.PrFactory.createStructureDeepCopy(t);var p=c.getListByKey(e.InAQueryMergeConstants.QY_GRIDS).get(0);var l=r.getSystemType().isTypeOf(e.SystemType.BW)?p:t;e.InAQueryMergeUtils.overwriteInstanceIdInDataSource(l,i);this.buildGridElements(i,u,p);this.finalizeResponse(o,u,c)}}};e.InAMergeResponseDispatcher.prototype.finalizeResponse=function(t,r,n){var i=n.getListByKey(e.InAQueryMergeConstants.QY_GRIDS).get(0);i.putString(e.InAQueryMergeConstants.TAG_MERGE_ID,t);this.addResponseToRpcFunction(r,n);r.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_PROCESSED)};e.InAMergeResponseDispatcher.prototype.buildGridElements=function(t,r,n){var i=r.getMeasureDimension();if(e.notNull(i)){var o=i.getStringByKey(e.InAQueryMergeConstants.QY_AXIS);var s=i.getStringByKey(e.InAQueryMergeConstants.QY_NAME);var a=e.XSimpleMap.create();var u=r.getMeasureMemberPositionMap();this.buildMeasureMembers(r,n,a,s,o,u);this.buildCells(n,a,o,u)}};e.InAMergeResponseDispatcher.prototype.buildMeasureMembers=function(t,r,n,i,o,s){var a=t.getSystemType();var u=s.size();var c=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_AXES_PATH);for(var p=0;p<c.size();p++){var l=c.get(p);var g=l.getStringByKey(e.InAQueryMergeConstants.QY_TYPE);if(e.XString.isEqual(g,o)){var y=null;var A=null;var m=e.PrUtilsJsonPath.getFirstElementFromPath(l,e.InAQueryMergeConstants.PA_DIMENSIONS_RELATIVE_PATH);for(var _=0;_<m.size();_++){var S=m.get(_);var I=S.getStringByKey(e.InAQueryMergeConstants.QY_NAME);if(e.XString.isEqual(i,I)){y=S;A=e.PrFactory.createStructureDeepCopy(l);break}}var f=-1;var M=l.getIntegerByKey(e.InAQueryMergeConstants.QY_TUPLE_COUNT);if(e.notNull(y)){var E=e.PrFactory.createStructureDeepCopy(y);var h=e.XHashMapByString.create();this.createSubElementsForParentElement(E,h);this.createSubElementsForParentElement(A,h);this.getValuesOfKeyAttribute(y,n);f=f===-1?n.size():f;for(var d=0;d<s.size();d++){var v=s.getByKey(e.XIntegerValue.create(d));var R=n.getByKey(v);if(e.isNull(R)){var T=t.getSourceMemberName(v.getString());R=n.getByKey(e.XStringValue.create(T))}var C=R.getInteger();this.buildAllGridElementsForParent(a,E,y,C,M,h);this.buildAllGridElementsForParent(a,A,l,C,M,h);var N=e.PrUtilsJsonPath.getFirstElementFromPath(A,e.InAQueryMergeConstants.PA_TUPLES_RELATIVE_PATH);for(var P=0;P<N.size();P++){var Q=N.get(P);this.createSubElementsForParentElement(Q,h);this.buildAllGridElementsForParent(a,Q,y,C,M,h)}}this.buildAttributeMembers(t,y,n,s,M)}if(f!==-1){l.remove(e.InAQueryMergeConstants.QY_TUPLE_COUNT);l.putInteger(e.InAQueryMergeConstants.QY_TUPLE_COUNT,e.XMath.div(M,f)*u);l.remove(e.InAQueryMergeConstants.QY_TUPLE_COUNT_TOTAL);l.putInteger(e.InAQueryMergeConstants.QY_TUPLE_COUNT_TOTAL,e.XMath.div(M,f)*u)}}}};e.InAMergeResponseDispatcher.prototype.createSubElementsForParentElement=function(t,r){var n=t.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var o=n.get(i);var s=e.PrFactory.createStructure();r.put(o,s)}};e.InAMergeResponseDispatcher.prototype.buildAllGridElementsForParent=function(t,r,n,i,o,s){var a=r.getKeysAsReadOnlyListOfString();for(var u=0;u<a.size();u++){var c=a.get(u);var p=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.PA_PATH_PREFIX,c);var l=e.PrUtilsJsonPath.getFirstElementFromPath(r,p);if(l.isStructure()){var g=s.getByKey(c);var y=e.PrUtilsJsonPath.getFirstElementFromPath(r,p);if(e.notNull(g)&&!g.containsKey(e.InAQueryMergeConstants.QY_ENCODING)){g.putString(e.InAQueryMergeConstants.QY_ENCODING,y.getStringByKey(e.InAQueryMergeConstants.QY_ENCODING))}this.dispatchTupleValues(y,g,i,o,null);n.remove(c);n.put(c,g)}}};e.InAMergeResponseDispatcher.prototype.buildAttributeMembers=function(t,r,n,i,o){var s=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_ATTRIBUTES_RELATIVE_PATH);var a=e.PrFactory.createList();var u=t.getMeasureDimensionName();var c=this.m_inaMergeRegistryManager.getMembersMetadata(u);for(var p=0;p<s.size();p++){var l=s.get(p);var g=e.PrFactory.createStructureDeepCopy(l);g.remove(e.InAQueryMergeConstants.QY_VALUES);g.remove(e.InAQueryMergeConstants.QY_VALUES_EXCEPTION);for(var y=0;y<i.size();y++){var A=i.getByKey(e.XIntegerValue.create(y));var m=n.getByKey(A).getInteger();this.dispatchTupleValues(l,g,m,o,null);this.mapRestrictedMeasureToSourceMember(t,g,c,u);if(l.containsKey(e.InAQueryMergeConstants.QY_VALUES_EXCEPTION)){this.dispatchTupleValues(l,g,m,o,e.InAQueryMergeConstants.QY_VALUES_EXCEPTION)}}a.add(g)}r.remove(e.InAQueryMergeConstants.QY_ATTRIBUTES);r.put(e.InAQueryMergeConstants.QY_ATTRIBUTES,a)};e.InAMergeResponseDispatcher.prototype.mapRestrictedMeasureToSourceMember=function(t,r,n,i){var o=e.PrFactory.createList();var s=r.getListByKey(e.InAQueryMergeConstants.QY_VALUES);var a=r.getStringByKey(e.InAQueryMergeConstants.QY_NAME);for(var u=0;u<s.size();u++){var c=s.getStringAt(u);var p=this.getSourceMemberName(t,c);var l=this.getMemberMetadata(n,i,p);var g=null;if(e.isNull(l)&&e.notNull(p)){var y=t.getMeasureDimension().getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);for(var A=0;A<y.size();A++){var m=y.getStructureAt(A);if(e.XString.isEqual(m.getStringByKey(e.InAQueryMergeConstants.QY_NAME),p)){var _=r.getBooleanByKey(e.InAQueryMergeConstants.QY_IS_KEY);g=_?p:m.getStringByKey(e.InAQueryMergeConstants.QY_DESCRIPTION);break}}}else{g=e.isNull(l)?c:this.getAttributeValue(a,l)}if(e.isNull(g)){g=p}o.addString(g)}r.remove(e.InAQueryMergeConstants.QY_VALUES);r.put(e.InAQueryMergeConstants.QY_VALUES,o)};e.InAMergeResponseDispatcher.prototype.getSourceMemberName=function(t,r){var n=t.getSourceMemberName(r);if(e.isNull(n)){return r}return this.getSourceMemberName(t,n)};e.InAMergeResponseDispatcher.prototype.getMemberMetadata=function(t,r,n){if(e.notNull(t)){var i=this.m_inaMergeRegistryManager.getKeyFieldOfDimension(r);for(var o=0;o<t.size();o++){var s=t.get(o);if(e.XString.isEqual(s.getStringByKey(i),n)){return s}}}return null};e.InAMergeResponseDispatcher.prototype.getAttributeValue=function(t,r){var n=e.isNull(r)?null:r.getStringByKey(t);return n};e.InAMergeResponseDispatcher.prototype.buildCells=function(t,r,n,i){var o=i.size();var s=e.XString.isEqual(n,e.InAQueryMergeConstants.QY_COLUMNS);var a=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_CELLS_ARRAY_SIZES_PATH);var u=a.getIntegerAt(0);var c=a.getIntegerAt(1);var p=s?u:c;if(s){a.clear();a.addInteger(p);a.addInteger(o)}else{a.clear();a.addInteger(o);a.addInteger(p)}var l=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_CELLS_PATH);if(e.notNull(l)){var g=l.getKeysAsReadOnlyListOfString();for(var y=0;y<g.size();y++){var A=g.get(y);var m=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.PA_PATH_PREFIX,A);var _=e.PrUtilsJsonPath.getFirstElementFromPath(l,m);this.dispatchCellValues(_,r,i,p)}}};e.InAMergeResponseDispatcher.prototype.getValuesOfKeyAttribute=function(t,r){var n=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_ATTRIBUTES_RELATIVE_PATH);for(var i=0;i<n.size();i++){var o=n.get(i);if(o.getBooleanByKey(e.InAQueryMergeConstants.QY_IS_KEY)){var s=o.getListByKey(e.InAQueryMergeConstants.QY_VALUES);for(var a=0;a<s.size();a++){var u=e.XStringValue.create(s.getStringAt(a));r.put(u,e.XIntegerValue.create(a))}}}};e.InAMergeResponseDispatcher.prototype.dispatchTupleValues=function(t,r,n,i,o){var s=e.notNull(o)?o:e.InAQueryMergeConstants.QY_VALUES;var a=e.notNull(r)?r:t;var u=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.PA_PATH_PREFIX,s);var c=e.PrUtilsJsonPath.getFirstElementFromPath(t,u);var p=e.XMath.mod(n,i);if(e.notNull(c)){var l=c.size();if(t.containsKey(e.InAQueryMergeConstants.QY_SIZE)){var g=a.getIntegerByKeyExt(e.InAQueryMergeConstants.QY_SIZE,-1);if(g!==-1){a.remove(e.InAQueryMergeConstants.QY_SIZE)}var y=g!==-1?g+1:e.XMath.div(l,i);a.putInteger(e.InAQueryMergeConstants.QY_SIZE,y)}if(t.containsKey(s)){var A=a.getListByKey(s);var m=e.notNull(A)?A:e.PrFactory.createList();for(var _=0;_<l;_++){if(e.XMath.mod(_,i)===p){m.add(c.get(_))}}if(e.isNull(A)){a.put(s,m)}}}};e.InAMergeResponseDispatcher.prototype.dispatchCellValues=function(t,r,n,i){var o=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.PA_PATH_PREFIX,e.InAQueryMergeConstants.QY_VALUES);var s=e.PrUtilsJsonPath.getFirstElementFromPath(t,o);if(e.notNull(s)){var a=n.size();var u=s.size();var c=i;var p=u/c;var l=a*i;var g=t.getIntegerByKeyExt(e.InAQueryMergeConstants.QY_SIZE,-1);if(g!==-1){t.remove(e.InAQueryMergeConstants.QY_SIZE);t.putInteger(e.InAQueryMergeConstants.QY_SIZE,l)}var y=e.PrFactory.createList();for(var A=0;A<c;A++){for(var m=0;m<a;m++){for(var _=A*p;_<(A+1)*p;_++){var S=n.getByKey(e.XIntegerValue.create(m));var I=r.getByKey(S).getInteger();if(e.XMath.mod(_,p)===I){y.add(s.get(_));break}}}}t.remove(e.InAQueryMergeConstants.QY_VALUES);t.put(e.InAQueryMergeConstants.QY_VALUES,y)}};e.InAMergeResponseDispatcher.prototype.addResponseToAllSourceQueries=function(t,r){var n=t.getSourceInstanceIds();for(var i=0;i<n.size();i++){var o=n.get(i);var s=this.m_inaMergeRegistryManager.getInASourceQuery(o);this.addResponseToRpcFunction(s,r);s.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_PROCESSED)}};e.InAMergeResponseDispatcher.prototype.addResponseToRpcFunction=function(e,t){var r=e.getRpcFunction();r.getRpcResponse().setRootElement(t,null)};e.InAMergeResponseDispatcher.prototype.finalizeFunctionsAndCleanupQueries=function(t,r){var n=true;if(t.isPreQuery()){var i=t.getPreQueryName();var o=this.m_inaMergeRegistryManager.getDependentQueryInADataProviders(i);for(var s=0;s<o.size();s++){var a=o.get(s);if(a.isMergeChecked()){n=false;break}}}var u=t.getSourceInstanceIds();for(var c=0;c<u.size();c++){var p=u.get(c);var l=this.m_inaMergeRegistryManager.getInASourceQuery(p);var g=l.getRpcFunction();g.addAllMessages(r);g.endSync();if(n){this.m_inaMergeRegistryManager.unregisterInASourceQuery(p)}else{l.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED)}}if(n){this.m_inaMergeRegistryManager.unregisterInADataProvider(t.getGroupSignature(),t.getInstanceId())}else{t.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED)}};e.InAQueryMergeConstants={QUERY_STATE_INIT:"Init",QUERY_STATE_MERGE_CHECKED:"Checked",QUERY_STATE_PENDING_PROCESSING:"Pending",QUERY_STATE_PROCESSED:"Processed",PA_PATH_START_KEY:"$",PA_PATH_SPLITER:".",PA_PATH_PREFIX:"$.",PA_OPTIONS_PATH:"$.Options",PA_ANALYTICS_SERVICE_TYPE_PATH:"$.Analytics",PA_DATASOURCE_PATH:"$.Analytics.DataSource",PA_DATASOURCE_OBJECTNAME_PATH:"$.Analytics.DataSource.ObjectName",PA_DATASOURCE_SCHEMA_PATH:"$.Analytics.DataSource.SchemaName",PA_DATASOURCE_PACKAGE_PATH:"$.Analytics.DataSource.PackageName",PA_DATASOURCE_TYPE_PATH:"$.Analytics.DataSource.Type",PA_CAPABILTIES_PATH:"$.Analytics.Capabilities",PA_LANGUAGE_PATH:"$.Analytics.Language",PA_DEFINITION_PATH:"$.Analytics.Definition",PA_DIMENSIONS_PATH:"$.Analytics.Definition.Dimensions",PA_DRILLDOWN_DIMENSIONS_VIRTUAL_PATH:"$.Analytics.Definition.DrillDown",PA_MEASURE_STRUCTURE_WITHOUT_MEMBERS_VIRTUAL_PATH:"$.Analytics.Definition.MeasureStructureWithoutMembers",PA_FILTER_PATH:"$.Analytics.Definition.Filter",PA_DYNAMIC_FILTER_PATH:"$.Analytics.Definition.DynamicFilter",PA_FIXED_FILTER_PATH:"$.Analytics.Definition.FixedFilter",PA_HIERARCHY_NAVIGATIONS_PATH:"$.Analytics.Definition.HierarchyNavigations",PA_VARIABLES_PATH:"$.Analytics.Definition.Variables",PA_SORT_PATH:"$.Analytics.Definition.Sort",PA_QUERY_PATH:"$.Analytics.Definition.Query",PA_QUERY_AXES_PATH:"$.Analytics.Definition.Query.Axes",PA_EXCEPTIONS_PATH:"$.Analytics.Definition.Exceptions",PA_CONDITIONS_PATH:"$.Analytics.Definition.Conditions",PA_CELL_CONTEXT_REQUESTS_PATH:"$.Analytics.Definition.CellContextRequests",PA_CURRENCY_TRANSLATION_PATH:"$.Analytics.Definition.CurrencyTranslation",PA_QUERY_DATACELLS_PATH:"$.Analytics.Definition.QueryDataCells",PA_UDH_PATH:"$.Analytics.Definition.UniversalDisplayHierarchies",PA_RS_FEATURE_REQUEST_PATH:"$.Analytics.Definition.ResultSetFeatureRequest",PA_MEMBER_OPERAND_RELATIVE_PATH:"$.MemberOperand",PA_MESSAGES_PATH:"$.Messages",PA_AXES_PATH:"$.Axes",PA_EXCEPTION_ALERT_LEVEL_RELATIVE_PATH:"$.ExceptionAlertLevel",PA_EXCEPTION_NAME_RELATIVE_PATH:"$.ExceptionName",PA_DIMENSIONS_RELATIVE_PATH:"$.Dimensions",PA_ATTRIBUTES_RELATIVE_PATH:"$.Attributes",PA_MEMBER_TYPES_RELATIVE_PATH:"$.MemberTypes",PA_TUPLES_RELATIVE_PATH:"$.Tuples",PA_DISPLAY_LEVEL_RELATIVE_PATH:"$.DisplayLevel",PA_DRILL_STATE_RELATIVE_PATH:"$.DrillState",PA_MEMBER_INDEXES_RELATIVE_PATH:"$.MemberIndexes",PA_PARENT_INDEXES_RELATIVE_PATH:"$.ParentIndexes",PA_CELLS_ARRAY_SIZES_PATH:"$.CellArraySizes",PA_CELLS_PATH:"$.Cells",PA_CELLS_FORMAT_RELATIVE_PATH:"$.CellFormat",PA_CELLS_VALUE_TYPES_RELATIVE_PATH:"$.CellValueTypes",PA_CELLS_EXCEPTION_ALERT_LEVEL_RELATIVE_PATH:"$.ExceptionAlertLevel",PA_CELLS_EXCEPTION_NAME_RELATIVE_PATH:"$.ExceptionName",PA_CELLS_EXCEPTIONS_RELATIVE_PATH:"$.Exceptions",PA_CELLS_INPUT_ENABLED_RELATIVE_PATH:"$.InputEnabled",PA_CELLS_LOCKED_VALUE_RELATIVE_PATH:"$.LockedValue",PA_CELLS_NUMERIC_ROUNDING_RELATIVE_PATH:"$.NumericRounding",PA_CELLS_NUMERIC_SHIFT_RELATIVE_PATH:"$.NumericShift",PA_CELLS_QUERY_DATACELL_REFERENCES_RELATIVE_PATH:"$.QueryDataCellReferences",PA_CELLS_UNIT_DESCRIPTIONS_RELATIVE_PATH:"$.UnitDescriptions",PA_CELLS_UNIT_INDEX_RELATIVE_PATH:"$.UnitIndex",PA_CELLS_UNIT_POSITIONS_RELATIVE_PATH:"$.UnitPositions",PA_CELLS_UNIT_TYPES_RELATIVE_PATH:"$.UnitTypes",PA_CELLS_UNITS_RELATIVE_PATH:"$.Units",PA_CELLS_VALUES_RELATIVE_PATH:"$.Values",PA_CELLS_VALUES_FORMATTED_RELATIVE_PATH:"$.ValuesFormatted",PA_CELLS_VALUES_ROUNDED_RELATIVE_PATH:"$.ValuesRounded",QY_ANALYTICS:"Analytics",QY_CAPABILITIES:"Capabilities",QY_INSTANCE_ID:"InstanceId",QY_DATASOURCE:"DataSource",QY_LANGUAGE:"Language",QY_DEFINITION:"Definition",QY_OPTIONS:"Options",QY_CLIENT_INFO:"ClientInfo",QY_TYPE:"Type",QY_QUERY:"Query",QY_VIEW:"View",QY_QUERY_VALUE_HELP:"Query/ValueHelp",QY_QUERY_INA_MODEL:"InAModel",QY_PLANNING:"Planning",QY_AXIS:"Axis",QY_ROWS:"Rows",QY_COLUMNS:"Columns",QY_FREE:"None",QY_ELEMENTS:"Elements",QY_LOW:"Low",QY_BATCH:"Batch",QY_BATCH_ID:"BatchId",QY_ASYNC_RESPONSE_REQUEST:"AsyncResponseRequest",QY_DIMENSIONS:"Dimensions",QY_DIMENSION:"Dimension",QY_NAME:"Name",QY_FILTER:"Filter",QY_DYNAMIC_FILTER:"DynamicFilter",QY_FIXED_FILTER:"FixedFilter",QY_RS_FEATURE_REQUEST:"ResultSetFeatureRequest",QY_SORT:"Sort",QY_CONDITIONS:"Conditions",QY_CELL_CONTEXT_REQUESTS:"CellContextRequests",QY_CURRENCY_TRANSLATION:"CurrencyTranslation",QY_HIERARCHY_NAVIGATIONS:"HierarchyNavigations",QY_EXCEPTIONS:"Exceptions",QY_VARIABLES:"Variables",QY_UNIVERSAL_DISPLAY_HIERARCHIES:"UniversalDisplayHierarchies",QY_SELECTION:"Selection",QY_SET_OPERAND:"SetOperand",QY_SUB_SELECTIONS:"SubSelections",QY_OPERATOR:"Operator",QY_MEMBERS:"Members",QY_VALUE:"Value",QY_FORMULA:"Formula",QY_ATTRIBUTE_VALUE:"AttributeValue",QY_FIELD_NAME:"FieldName",QY_HIERARCHY:"Hierarchy",QY_CONVERT_TO_FLAT_SELECTION:"ConvertToFlatSelection",QY_COMPARISON:"Comparison",QY_CODE:"Code",QY_AND:"And",QY_EQUALS_SIGN:"=",QY_VISIBILITY:"Visibility",QY_VISIBLE:"Visible",QY_DESCRIPTION:"Description",QY_CALCULATED_MEASURE:"CalculatedMeasure",QY_CELL_VALUE_TYPE:"CellValueType",QY_QUERY_DATA_CELLS:"QueryDataCells",QY_ZERO_SUPPRESSION_TYPE:"ZeroSuppressionType",QY_DEFAULT_SELECTED_DIMENSIONS:"DefaultSelectedDimensions",QY_IS_SELECTION_CANDIDATE:"IsSelectionCandidate",QY_DIMENSION_MEMBER_REFERENCES:"DimensionMemberReferences",QY_SUPPRESS_KEYFIGURE_CALCULATION:"SuppressKeyfigureCalculation",QY_LEVEL_OFFSET_1:'"LevelOffset":1',QY_ATTRIBUTES:"Attributes",QY_DEFAULT_KEY_ATTRIBUTE:"DefaultKeyAttribute",QY_KEY_ATTRIBUTE:"KeyAttribute",QY_PRESENTATION_TYPE:"PresentationType",QY_GEOMETRY_OPERAND:"GeometryOperand",QY_CLUSTER_DEFINITION:"ClusterDefinition",QY_VARIABLE_PLACEHOLDER_IN_FILTER:'"LowIs":"Variable"',QY_OR_IN_FILTER:'"Code":"Or"',QY_SORT_TYPE_MEASURE:'"SortType":"Measure"',QY_KEY:"Key",QY_PROCESSING_DIRECTIVES:"ProcessingDirectives",QY_PROCESSING_STEP:"ProcessingStep",QY_TUPLE_COUNT:"TupleCount",QY_TUPLE_COUNT_TOTAL:"TupleCountTotal",QY_VALUES_EXCEPTION:"ValuesException",QY_VALUES:"Values",QY_SIZE:"Size",QY_GRIDS:"Grids",QY_IS_KEY:"IsKey",QY_ENCODING:"Encoding",QY_MEMBER_TYPES:"MemberTypes",QY_DISPLAY_LEVEL:"DisplayLevel",QY_DRILL_STATE:"DrillState",QY_MEMBER_INDEXES:"MemberIndexes",QY_PARENT_INDEXES:"ParentIndexes",QY_EXCEPTION_ALERT_LEVEL:"ExceptionAlertLevel",QY_EXCEPTION_NAME:"ExceptionName",TAG_KEY:"InAMergeTag",TAG_MEASURE_STRUCTURE:"MeasureStructure",TAG_SECONDARY_STRUCTURE:"SecondaryStructure",TAG_FILTER_MEASURE_STRUCTURE:"FilterMeasureStructure",TAG_FILTER_SECOND_STRUCTURE:"FilterSecondStructure",TAG_HIERARCHICAL_FILTER:"HierarchicalFilter+",TAG_RESTRICTED_MEASURE:"RestrictedMeasure",TAG_BACKEND_RESTRICTED_MEASURE:"BackendRestrictedMeasure",TAG_GLOBAL_FILTER:"GlobalFilter",TAG_MERGE_ID:"MergeId",TAG_MULTI_LEVEL_RESTRICTED_MEASURE:"MultiLevelRestrictedMeasure",TAG_FILTER_SECONDARY_STRUCTURE:"FilterSecondaryStructure",TAG_ZERO_SUPPRESSION:"ZeroSuppression",TAG_GROUP_SIGNATURE:"GroupSignature",TAG_MERGED_QUERY:"MergedQuery",TAG_MERGE_QUERY_RESPONSE_RECEPIENTS:"CorrespondingRecepients",TAG_GROUP_SIGNATURE_PATH:"$.Analytics.DataSource.GroupSignature",QY_RETURN_EMPTY_JSON_RESULTSET:"ReturnEmptyJsonResultSet",QY_OBJECT_NAME:"ObjectName",QY_JOIN_TYPE:"JoinType",TAG_MEASURE_METADATA_FOR_PERSISTED_INA:"MetadataForStorage",TAG_MEASURE_MEMBER_TOUCHED:"MemberModified-CreateRMDuringMerge",QY_MEMBER_OPERAND:"MemberOperand",QY_MEMBER_NAME:"MemberName"};e.InAQueryMergeUtils={getLastToken:function(t,r){var n=null;var i=e.XStringTokenizer.splitString(t,r);if(e.notNull(i)&&i.size()>0){n=i.get(i.size()-1)}return n},getInstanceId:function(t){var r=e.InAQueryMergeUtils.getDataSource(t);if(e.notNull(r)){return r.getStringByKey(e.InAQueryMergeConstants.QY_INSTANCE_ID)}return null},getQueryType:function(t){var r=e.InAQueryMergeUtils.getDataSource(t);if(e.notNull(r)){return r.getStringByKey(e.InAQueryMergeConstants.QY_TYPE)}return null},getDataSource:function(t){var r=e.InAQueryMergeUtils.getStructureRootKey(t);if(e.notNull(r)){return t.getStructureByKey(r).getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE)}return e.notNull(t)?t.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE):null},overwriteInstanceIdInDataSource:function(t,r){var n=e.InAQueryMergeUtils.getDataSource(t);n.remove(e.InAQueryMergeConstants.QY_INSTANCE_ID);n.putString(e.InAQueryMergeConstants.QY_INSTANCE_ID,r)},getStructureRootKey:function(t){var r=e.notNull(t)&&t.containsKey(e.InAQueryMergeConstants.QY_ANALYTICS)?e.InAQueryMergeConstants.QY_ANALYTICS:null;return r},mergeElementsLists:function(t,r){if(e.notNull(r)){for(var n=0;n<r.size();n++){var i=r.get(n);if(e.notNull(t)&&!t.contains(i)){t.add(i)}}}},isConditionsStateChangedByClient:function(t,r,n){var i=null;var o=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_CONDITIONS_PATH);if(e.notNull(o)){var s=r.serialize(o);i=e.XSha1.createSHA1(s)}return!e.XString.isEqual(n,i)},hasMeasureSort:function(t){var r=false;if(e.notNull(t)){var n=t.getStringRepresentation();r=e.XString.containsString(n,e.InAQueryMergeConstants.QY_SORT_TYPE_MEASURE)}return r},hasMeasureDimension:function(t){var r=t.getStringRepresentation();return e.XString.containsString(r,e.InAQueryMergeConstants.TAG_MEASURE_STRUCTURE)},hasNonMeasureDimensionOnMeasureAxis:function(t,r){var n=false;for(var i=0;i<t.size();i++){var o=t.getStructureAt(i);var s=o.getStringByKey(e.InAQueryMergeConstants.QY_AXIS);if(e.XString.isEqual(s,r)){n=true;break}}return n},hasGeometryDimension:function(t){var r=t.getStringRepresentation();return e.XString.containsString(r,e.InAQueryMergeConstants.QY_CLUSTER_DEFINITION)},hasGeometryOperandInFilter:function(t){var r=t.getStringRepresentation();return e.XString.containsString(r,e.InAQueryMergeConstants.QY_GEOMETRY_OPERAND)},hasVariablePlaceHolder:function(t){var r=t.getStringRepresentation();return e.XString.containsString(r,e.InAQueryMergeConstants.QY_VARIABLE_PLACEHOLDER_IN_FILTER)},isComplexFilter:function(t){var r=t.getStringRepresentation();return e.XString.containsString(r,e.InAQueryMergeConstants.QY_OR_IN_FILTER)},hasFilterTagValue:function(t,r){var n=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(n)){var i=n.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var o=0;o<i.size();o++){var s=i.getStructureAt(o);e.InAQueryMergeUtils.hasFilterTagValue(s,r)}}else{var a=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var u=a.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XString.isEqual(u,r)){return true}}return false},collectDimensionsOfBackendRestrictedMeasures:function(t,r){for(var n=0;n<t.size();n++){var i=t.get(n);var o=i.getListByKey(e.InAQueryMergeConstants.QY_DEFAULT_SELECTED_DIMENSIONS);if(!e.PrUtils.isListEmpty(o)&&i.getBooleanByKeyExt(e.InAQueryMergeConstants.QY_IS_SELECTION_CANDIDATE,false)){for(var s=0;s<o.size();s++){r.add(o.getStringAt(s))}}}},collectDrillDownDimensionNames:function(t,r){for(var n=0;n<t.size();n++){var i=t.getStructureAt(n);var o=i.getStringByKey(e.InAQueryMergeConstants.QY_NAME);var s=i.getStringByKey(e.InAQueryMergeConstants.QY_AXIS);var a=i.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE)!==null&&i.containsKey(e.InAQueryMergeConstants.QY_JOIN_TYPE);if(!e.XString.isEqual(s,e.InAQueryMergeConstants.QY_FREE)||a){r.add(o)}}},collectFieldNamesUsedInSelection:function(t,r){var n=t.getStringRepresentation();e.InAQueryMergeUtils.collectFieldNames(n,r,null)},collectFieldNames:function(t,r,n){var i=e.XStringUtils.isNotNullAndNotEmpty(n)?n:e.XStringUtils.concatenate2(e.InAQueryMergeConstants.QY_FIELD_NAME,'":"');var o=e.XStringTokenizer.splitString(t,i);for(var s=1;s<o.size();s++){var a=o.get(s);var u=e.XString.substring(a,0,e.XString.indexOf(a,'"'));r.add(u)}},collectUsedDimensions:function(t,r,n){var i=e.XStringUtils.isNotNullAndNotEmpty(n)?n:e.XStringUtils.concatenate2(e.InAQueryMergeConstants.QY_FIELD_NAME,'":"');var o=e.XStringTokenizer.splitString(t,i);for(var s=1;s<o.size();s++){var a=o.get(s);var u=e.XString.substring(a,0,e.XString.indexOf(a,'"'));var c=e.InAQueryMergeUtils.getUsedDimensionName(u);r.add(c)}},getUsedDimensionName:function(t){var r=e.XString.substring(t,0,e.XString.indexOf(t,"."));if(e.XString.startsWith(r,"[")){r=e.XString.substring(r,1,-1)}if(e.XString.endsWith(r,"]")){r=e.XString.substring(r,0,e.XString.size(r)-1)}return r},collectDimensionsWithHierarchicalFilter:function(t,r){var n=t.getStringRepresentation();e.InAQueryMergeUtils.collectUsedDimensions(n,r,e.InAQueryMergeConstants.TAG_HIERARCHICAL_FILTER)},collectUsedDimensionsInRestrictedMeasures:function(t,r){var n=null;for(var i=0;i<t.size();i++){var o=t.get(i);var s=o.getStringRepresentation();if(e.XString.containsString(s,e.InAQueryMergeConstants.QY_SELECTION)){e.InAQueryMergeUtils.collectUsedDimensions(s,r,n)}}},collectUsedDimensionsInFormulas:function(t,r){var n=null;for(var i=0;i<t.size();i++){var o=t.get(i);var s=o.getStringRepresentation();if(e.XString.containsString(s,e.InAQueryMergeConstants.QY_FORMULA)){n=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.QY_ATTRIBUTE_VALUE,'":{"Name":"');e.InAQueryMergeUtils.collectUsedDimensions(s,r,n);n=e.XStringUtils.concatenate2(e.InAQueryMergeConstants.QY_DIMENSION,'":"');e.InAQueryMergeUtils.collectUsedDimensions(s,r,n)}}},isListsIntersect:function(t,r){var n=e.InAQueryMergeUtils.getListsIntersect(t,r);return!n.isEmpty()},getListsIntersect:function(t,r){var n=e.XListOfString.create();if(e.notNull(t)&&!t.isEmpty()&&e.notNull(r)&&!r.isEmpty()){for(var i=0;i<t.size();i++){if(r.contains(t.get(i))){n.add(t.get(i))}}}return n},getFilterStructure:function(t){var r=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_FILTER_PATH);if(e.isNull(r)||r.isEmpty()){r=e.PrUtilsJsonPath.getFirstElementFromPath(t,e.InAQueryMergeConstants.PA_DYNAMIC_FILTER_PATH)}return r},removeInaMergeTag:function(t,r){if(e.notNull(t)){var n=t.getType();if(n===e.PrElementType.STRUCTURE){var i=t;var o=i.getKeysAsReadOnlyListOfString();var s=o.size();for(var a=0;a<s;a++){var u=o.get(a);if(e.XString.isEqual(u,r)){i.remove(r);continue}e.InAQueryMergeUtils.removeInaMergeTag(e.PrUtils.getProperty(i,u),r)}}else if(n===e.PrElementType.LIST){var c=t;var p=e.PrUtils.getListSize(c,0);for(var l=0;l<p;l++){e.InAQueryMergeUtils.removeInaMergeTag(e.PrUtils.getElement(c,l),r)}}}},cleanTagsFromRequest:function(t){e.InAQueryMergeUtils.removeInaMergeTag(t,e.InAQueryMergeConstants.TAG_KEY);e.InAQueryMergeUtils.removeInaMergeTag(t,e.InAQueryMergeConstants.TAG_MEASURE_METADATA_FOR_PERSISTED_INA);e.InAQueryMergeUtils.removeInaMergeTag(t,e.InAQueryMergeConstants.TAG_MEASURE_MEMBER_TOUCHED);return t}};e.InARestrictedMeasureUtils={processRestrictedMeasures:function(t,r,n,i,o,s){var a=e.PrFactory.createStructure();var u=e.PrFactory.createList();for(var c=0;c<t.size();c++){var p=t.get(c);var l=e.XHashMapByString.create();e.InARestrictedMeasureUtils.mergeElementsOfSameFieldAndLevel(l,i,null,0);var g=e.InARestrictedMeasureUtils.createSingleRestrictedMeasure(p,i,null,s);u.add(g);e.InARestrictedMeasureUtils.addRestrictedMeasureToMembers(g,n);var y=u.getValuesAsReadOnlyList();a=e.InARestrictedMeasureUtils.createReferenceToRestrictedMeasureFilter(r,y);if(e.notNull(o)){e.InARestrictedMeasureUtils.createQueryDataCellForRestrictedMeasure(o,g,p,null)}}return a},createSingleRestrictedMeasure:function(t,r,n,i){var o=r.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.isNull(o)){o=r}var s=e.PrFactory.createStructureDeepCopy(o);e.InARestrictedMeasureUtils._removeAllMeasureMembersExcept(t,s);e.InARestrictedMeasureUtils._removeGlobalFilters(s,null);e.InARestrictedMeasureUtils._cleanTagsFromFilter(s);var a=s.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);e.InARestrictedMeasureUtils._cleanRedundantOperatorWrapper(a,a);e.InARestrictedMeasureUtils._addConvertToFlatForHierFilters(s);var u=s.getStringRepresentation();var c=e.XStringUtils.isNullOrEmpty(n)?e.XSha1.createSHA1(u):n;if(e.notNull(i)){i.put(c,t)}var p=e.PrFactory.createStructure();p.putString(e.InAQueryMergeConstants.QY_NAME,c);p.putString(e.InAQueryMergeConstants.QY_DESCRIPTION,c);p.put(e.InAQueryMergeConstants.QY_SELECTION,s);p.putString(e.InAQueryMergeConstants.QY_VISIBILITY,e.InAQueryMergeConstants.QY_VISIBLE);return p},addRestrictedMeasureToMembers:function(t,r){if(e.notNull(r)){var n=r.getListByKey(e.InAQueryMergeConstants.QY_MEMBERS);if(e.notNull(n)){if(!n.contains(t)){n.add(t)}}else{n=r.putNewList(e.InAQueryMergeConstants.QY_MEMBERS);n.add(t)}}},createReferenceToRestrictedMeasureFilter:function(t,r){var n=e.PrFactory.createStructure();var i=n.putNewStructure(e.InAQueryMergeConstants.QY_SELECTION);var o=i.putNewStructure(e.InAQueryMergeConstants.QY_OPERATOR);o.putString(e.InAQueryMergeConstants.QY_CODE,e.InAQueryMergeConstants.QY_AND);var s=o.putNewList(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);var a=s.addNewStructure();var u=a.putNewStructure(e.InAQueryMergeConstants.QY_SET_OPERAND);u.putString(e.InAQueryMergeConstants.QY_FIELD_NAME,t);var c=u.putNewList(e.InAQueryMergeConstants.QY_ELEMENTS);for(var p=0;p<r.size();p++){var l=r.get(p).getStringByKey(e.InAQueryMergeConstants.QY_NAME);var g=c.addNewStructure();g.putString(e.InAQueryMergeConstants.QY_COMPARISON,e.InAQueryMergeConstants.QY_EQUALS_SIGN);g.putString(e.InAQueryMergeConstants.QY_LOW,l)}return n},createQueryDataCellForRestrictedMeasure:function(t,r,n,i){var o=t.size();for(var s=0;s<o;s++){var a=t.getStructureAt(s);if(e.notNull(a)){var u=a.getListByKey(e.InAQueryMergeConstants.QY_DIMENSION_MEMBER_REFERENCES);if(e.notNull(u)&&!e.PrUtils.isListEmpty(u)){var c=u.getStringAt(0);if(e.XString.isEqual(c,n)){var p=e.XStringUtils.isNullOrEmpty(i)?null:i;var l=e.PrFactory.createStructureDeepCopy(a);l.putInteger(e.InAQueryMergeConstants.QY_CELL_VALUE_TYPE,0);l.putString(e.InAQueryMergeConstants.QY_NAME,p);var g=r.getStringByKey(e.InAQueryMergeConstants.QY_NAME);l.getListByKey(e.InAQueryMergeConstants.QY_DIMENSION_MEMBER_REFERENCES).setStringAt(0,g);t.add(l)}}}}},extractMeasuresFromSelection:function(t,r){var n=r;if(e.isNull(r)){n=e.XListOfString.create()}var i=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(i)){var o=i.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var s=0;s<o.size();s++){e.InARestrictedMeasureUtils.extractMeasuresFromSelection(o.getStructureAt(s),n)}}else{var a=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var u=a.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XString.isEqual(u,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)){var c=a.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);for(var p=0;p<c.size();p=p+1){var l=c.getStructureAt(p).getStringByKey(e.InAQueryMergeConstants.QY_LOW);n.add(l)}}}return n},extractDimensionMembersFromSelection:function(t,r,n){var i=n;var o=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(o)){var s=o.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var a=0;a<s.size();a++){e.InARestrictedMeasureUtils.extractDimensionMembersFromSelection(s.getStructureAt(a),r,i)}}else{var u=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var c=u.getStringByKey(e.InAQueryMergeConstants.QY_FIELD_NAME);if(e.XString.containsString(c,e.XStringUtils.concatenate2(r,e.InAQueryMergeConstants.PA_PATH_SPLITER))){var p=u.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);if(!e.PrUtils.isListEmpty(p)){var l=e.XStringValue.create(c);if(!n.containsKey(l)){n.put(l,p)}else{p.addAll(n.getByKey(l));n.put(l,p)}}}}},hasExpectedSelectionStructure:function(t){var r=true;var n=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(n)){var i=n.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);if(e.isNull(i)){return false}for(var o=0;o<i.size();o++){e.InARestrictedMeasureUtils.hasExpectedSelectionStructure(i.getStructureAt(o))}}else{var s=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);if(e.isNull(s)){return false}}return r},_removeGlobalFilters:function(t,r){if(e.notNull(t)){var n=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(n)){var i=n.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XString.isEqual(i,e.InAQueryMergeConstants.TAG_GLOBAL_FILTER)){r.removeElement(t)}var o=n.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var s=0;s<o.size();s++){var a=o.getStructureAt(s);e.InARestrictedMeasureUtils._removeGlobalFilters(a,o)}}}},mergeElementsOfSameFieldAndLevel:function(t,r,n,i){var o=r.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(o)){var s=o.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);var a=e.notNull(t)?t:e.XHashMapByString.create();for(var u=s.size()-1;u>=0;u--){var c=s.getStructureAt(u);e.InARestrictedMeasureUtils.mergeElementsOfSameFieldAndLevel(a,c,s,i+1)}}else{var p=r.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var l=p.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(!e.XString.isEqual(l,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)){var g=p.getStringByKey(e.InAQueryMergeConstants.QY_FIELD_NAME);var y=p.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);var A=e.XStringUtils.concatenate3(g,"_",e.XInteger.convertToString(i));if(!t.containsKey(A)){t.put(A,y)}else{var m=t.getByKey(A);m.addAll(y);n.removeElement(r)}}}},_removeAllMeasureMembersExcept:function(t,r){var n=r.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(n)){var i=n.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var o=0;o<i.size();o++){var s=i.getStructureAt(o);e.InARestrictedMeasureUtils._removeAllMeasureMembersExcept(t,s)}}else{var a=r.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var u=a.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XString.isEqual(u,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)){var c=a.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);var p=e.PrFactory.createList();for(var l=0;l<c.size();l++){var g=c.getStructureAt(l);if(!e.XString.isEqual(g.getStringByKey(e.InAQueryMergeConstants.QY_LOW),t)){p.add(g)}}for(var y=0;y<p.size();y++){var A=p.getStructureAt(y);c.removeElement(A)}}}},_cleanRedundantOperatorWrapper:function(t,r){if(e.notNull(t)&&e.notNull(r)){var n=t.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);if(e.notNull(n)&&n.size()===1){var i=n.getStructureAt(0);var o=i.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(o)){if(!e.XString.isEqual(r.getStringByKey(e.InAQueryMergeConstants.QY_CODE),o.getStringByKey(e.InAQueryMergeConstants.QY_CODE))){return}var s=o.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);r.putNewList(e.InAQueryMergeConstants.QY_SUB_SELECTIONS).addAll(s.getValuesAsReadOnlyList());e.InARestrictedMeasureUtils._cleanRedundantOperatorWrapper(o,r)}}}},_addConvertToFlatForHierFilters:function(t){if(e.notNull(t)){var r=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(r)){var n=r.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);if(e.notNull(n)){for(var i=0;i<n.size();i++){var o=n.getStructureAt(i);var s=o.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);if(e.notNull(s)){var a=s.getStructureByKey(e.InAQueryMergeConstants.QY_HIERARCHY);if(e.notNull(a)){s.putBoolean(e.InAQueryMergeConstants.QY_CONVERT_TO_FLAT_SELECTION,true)}continue}var u=o.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(u)){e.InARestrictedMeasureUtils._addConvertToFlatForHierFilters(o)}}}}}},_cleanTagsFromFilter:function(t){if(e.notNull(t)){var r=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(r)){r.remove(e.InAQueryMergeConstants.TAG_KEY);var n=r.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var i=0;i<n.size();i++){var o=n.getStructureAt(i);e.InARestrictedMeasureUtils._cleanTagsFromFilter(o)}}else{var s=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);s.remove(e.InAQueryMergeConstants.TAG_KEY)}}},extendRequestWithRestrictedMeasure:function(t,r,n){var i=e.PrFactory.createStructureDeepCopy(t);var o=e.PrUtilsJsonPath.getFirstElementFromPath(i,e.InAQueryMergeConstants.PA_DEFINITION_PATH);var s=o.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);var a=o.getListByKey(e.InAQueryMergeConstants.QY_QUERY_DATA_CELLS);var u=o.getStructureByKey(e.InAQueryMergeConstants.QY_FILTER);var c=e.InARestrictedMeasureUtils.getMeasureStructure(s);var p=e.InARestrictedMeasureUtils.extractMeasuresFromSelection(u.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION),null);var l=e.PrFactory.createList();for(var g=0;g<p.size();g++){var y=p.get(g);var A=e.InARestrictedMeasureUtils.createSingleRestrictedMeasure(y,u,r,null);l.add(A);e.InARestrictedMeasureUtils.addRestrictedMeasureToMembers(A,c);e.InARestrictedMeasureUtils.createQueryDataCellForRestrictedMeasure(a,A,y,n)}var m=c.getStringByKey(e.InAQueryMergeConstants.QY_NAME);var _=l.getValuesAsReadOnlyList();var S=e.InARestrictedMeasureUtils.createReferenceToRestrictedMeasureFilter(e.XStringUtils.concatenate2(m,".KEY"),_);o.put(e.InAQueryMergeConstants.QY_FILTER,S);e.InARestrictedMeasureUtils._cleanTagsFromDimensions(s);return i},_cleanTagsFromDimensions:function(t){var r=t.getIterator();while(r.hasNext()){var n=r.next();if(e.notNull(n)){n.remove(e.InAQueryMergeConstants.TAG_KEY)}}},cleanTagsFromRequest:function(t){var r=e.PrFactory.createStructureDeepCopy(t);var n=e.InAQueryMergeUtils.getFilterStructure(r);var i=n.getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);if(e.isNull(i)){i=n}e.InARestrictedMeasureUtils._cleanTagsFromFilter(i);var o=e.PrUtilsJsonPath.getFirstElementFromPath(r,e.InAQueryMergeConstants.PA_DEFINITION_PATH);var s=o.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);e.InARestrictedMeasureUtils._cleanTagsFromDimensions(s);return r},getMeasureStructure:function(t){var r=t.getIterator();while(r.hasNext()){var n=r.next();var i=n.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(i)&&e.XString.isEqual(i,e.InAQueryMergeConstants.TAG_MEASURE_STRUCTURE)){return n}}return null},replaceMeasureInSelection:function(t,r,n){var i=t.getStructureByKey(e.InAQueryMergeConstants.QY_OPERATOR);if(e.notNull(i)){var o=i.getListByKey(e.InAQueryMergeConstants.QY_SUB_SELECTIONS);for(var s=0;s<o.size();s++){e.InARestrictedMeasureUtils.replaceMeasureInSelection(o.getStructureAt(s),r,n)}}else{var a=t.getStructureByKey(e.InAQueryMergeConstants.QY_SET_OPERAND);var u=a.getStringByKey(e.InAQueryMergeConstants.TAG_KEY);if(e.XStringUtils.isNotNullAndNotEmpty(u)&&e.XString.isEqual(u,e.InAQueryMergeConstants.TAG_FILTER_MEASURE_STRUCTURE)){var c=a.getListByKey(e.InAQueryMergeConstants.QY_ELEMENTS);for(var p=0;p<c.size();p=p+1){var l=c.getStructureAt(p);if(e.XString.isEqual(l.getStringByKey(e.InAQueryMergeConstants.QY_LOW),r)){l.putString(e.InAQueryMergeConstants.QY_LOW,n)}}}}}};e.OlapEnvironmentFactory=function(){};e.OlapEnvironmentFactory.prototype=new e.XObject;e.OlapEnvironmentFactory.prototype._ff_c="OlapEnvironmentFactory";e.OlapEnvironmentFactory.s_olapEnvironmentFactory=null;e.OlapEnvironmentFactory.staticSetup=function(){var t=new e.OlapEnvironmentFactory;e.OlapEnvironmentFactory.registerFactory(t)};e.OlapEnvironmentFactory.newInstance=function(t){return e.OlapEnvironmentFactory.s_olapEnvironmentFactory.newOlapEnvironmentInstance(t)};e.OlapEnvironmentFactory.registerFactory=function(t){var r=e.OlapEnvironmentFactory.s_olapEnvironmentFactory;e.OlapEnvironmentFactory.s_olapEnvironmentFactory=t;return r};e.OlapEnvironmentFactory.prototype.newOlapEnvironmentInstance=function(e){return null};e.ServiceTypeInfo=function(){};e.ServiceTypeInfo.prototype=new e.XObject;e.ServiceTypeInfo.prototype._ff_c="ServiceTypeInfo";e.ServiceTypeInfo.prototype.createServiceConfigInternal=function(t){var r=this.getServiceConfigReferenceName();var n=e.RegistrationService.getInstance();var i=n.getReferences(r);if(i.size()===1){var o=i.get(0);var s=o.newInstance(t);s.setServiceTypeInfo(this);s.setupConfig(t);return s}throw e.XException.createIllegalStateException("more than one reference for service config")};e.ServiceUtils=function(){};e.ServiceUtils.prototype=new e.XObject;e.ServiceUtils.prototype._ff_c="ServiceUtils";e.ServiceUtils.getMatchingService=function(t,r,n){var i=e.RegistrationService.getInstance();var o=i.getReferences(r);for(var s=0;s<o.size();s++){var a=o.get(s);var u=a.newInstance(t);if(u.isServiceConfigMatching(t,t.getConnectionContainer(),n)){u.setupService(t);return u}}return null};e.NopUsageTracker=function(){};e.NopUsageTracker.prototype=new e.XObject;e.NopUsageTracker.prototype._ff_c="NopUsageTracker";e.NopUsageTracker.prototype.trackUsage=function(e,t,r){};e.NopUsageTracker.prototype.track=function(e){};e.NopUsageTracker.prototype.isEnabled=function(){return false};e.UsageTrackerProvider={instance:null,getUsageTracker:function(){if(e.isNull(e.UsageTrackerProvider.instance)){e.UsageTrackerProvider.instance=new e.NopUsageTracker}return e.UsageTrackerProvider.instance},setUsageTracker:function(t){e.UsageTrackerProvider.instance=t}};e.InADataProvider=function(){};e.InADataProvider.prototype=new e.BasicInAQuery;e.InADataProvider.prototype._ff_c="InADataProvider";e.InADataProvider.create=function(t,r,n,i){var o=new e.InADataProvider;o.setupInARuntimeDataProvider(t,r,n,i);return o};e.InADataProvider.prototype.m_sourceInstanceIds=null;e.InADataProvider.prototype.m_requestStructure=null;e.InADataProvider.prototype.m_isPreQuery=null;e.InADataProvider.prototype.m_preQueries=null;e.InADataProvider.prototype.setupInARuntimeDataProvider=function(t,r,n,i){e.BasicInAQuery.prototype.setupBasicInAQuery.call(this,t,null,n,i);this.setGroupSignature(t);this.setIsInARuntimeDataProvider(true);this.m_requestStructure=r;this.m_sourceInstanceIds=e.XListOfString.create();this.m_isPreQuery=e.TriStateBool._DEFAULT;this.m_preQueries=e.XListOfString.create()};e.InADataProvider.prototype.releaseObject=function(){this.m_requestStructure=e.XObjectExt.release(this.m_requestStructure);this.m_sourceInstanceIds=e.XObjectExt.release(this.m_sourceInstanceIds);this.m_preQueries=e.XObjectExt.release(this.m_preQueries);e.BasicInAQuery.prototype.releaseObject.call(this)};e.InADataProvider.prototype.getRequestStructure=function(){return e.notNull(this.m_requestStructure)?this.m_requestStructure:e.BasicInAQuery.prototype.getRequestStructure.call(this)};e.InADataProvider.prototype.addSourceInstanceId=function(t){if(e.XStringUtils.isNotNullAndNotEmpty(t)&&!this.m_sourceInstanceIds.contains(t)){this.m_sourceInstanceIds.add(t)}};e.InADataProvider.prototype.getSourceInstanceIds=function(){return this.m_sourceInstanceIds};e.InADataProvider.prototype.setAsPreQuery=function(){this.m_isPreQuery=e.TriStateBool.lookup(true)};e.InADataProvider.prototype.isPreQuery=function(){return this.m_isPreQuery.getBoolean()};e.InADataProvider.prototype.setAsMainQuery=function(){this.m_isPreQuery=e.TriStateBool.lookup(false)};e.InADataProvider.prototype.isMainQuery=function(){return this.m_isPreQuery!==e.TriStateBool._DEFAULT&&this.m_isPreQuery.getBoolean()===false};e.InADataProvider.prototype.setPreQueries=function(e){this.m_preQueries=e};e.InADataProvider.prototype.getPreQueries=function(){return this.m_preQueries};e.InAMergeProcessor=function(){};e.InAMergeProcessor.prototype=new e.XObject;e.InAMergeProcessor.prototype._ff_c="InAMergeProcessor";e.InAMergeProcessor.create=function(t){var r=new e.InAMergeProcessor;r.setupInAMergeProcessor(t);return r};e.InAMergeProcessor.prototype.m_connectionPool=null;e.InAMergeProcessor.prototype.m_processingMode=null;e.InAMergeProcessor.prototype.m_isRequestsProcessed=false;e.InAMergeProcessor.prototype.m_inaMergeRegistryManager=null;e.InAMergeProcessor.prototype.m_inaMergeRequestBuilder=null;e.InAMergeProcessor.prototype.m_inaMergeResponseDispatcher=null;e.InAMergeProcessor.prototype.m_mergePersistResponse=null;e.InAMergeProcessor.prototype.m_batchFunctions=null;e.InAMergeProcessor.prototype.setupInAMergeProcessor=function(t){this.m_connectionPool=t;this.m_processingMode=e.InAMergeProcessingMode.MERGE_EXECUTE;this.m_inaMergeRegistryManager=e.InAMergeRegistryManager.create();this.m_inaMergeRequestBuilder=e.InAMergeRequestBuilder.create(this.m_inaMergeRegistryManager);this.m_inaMergeResponseDispatcher=e.InAMergeResponseDispatcher.create(this.m_inaMergeRegistryManager);this.m_isRequestsProcessed=false;this.m_mergePersistResponse=e.XList.create()};e.InAMergeProcessor.prototype.releaseObject=function(){this.m_connectionPool=null;this.m_processingMode=null;this.m_inaMergeRegistryManager=e.XObjectExt.release(this.m_inaMergeRegistryManager);this.m_inaMergeRequestBuilder=e.XObjectExt.release(this.m_inaMergeRequestBuilder);this.m_inaMergeResponseDispatcher=e.XObjectExt.release(this.m_inaMergeResponseDispatcher);this.m_mergePersistResponse=e.XObjectExt.release(this.m_mergePersistResponse);e.XObject.prototype.releaseObject.call(this)};e.InAMergeProcessor.prototype.getConnectionPool=function(){return this.m_connectionPool};e.InAMergeProcessor.prototype.setInAMergeProcessingMode=function(e){this.m_processingMode=e};e.InAMergeProcessor.prototype.getInAMergeProcessingMode=function(){return this.m_processingMode};e.InAMergeProcessor.prototype.addInASourceQuery=function(t,r,n,i,o,s,a){var u=this.m_inaMergeRegistryManager.buildInASourceQueryAndRegister(t,r,n,i,o,s,a);if(e.notNull(u)&&u.isStandAloneQuery()){this.buildStandAloneQuery(u,t)}};e.InAMergeProcessor.prototype.hasMeasureMembersMetadata=function(e){return this.m_inaMergeRegistryManager.hasMeasureMembersMetadata(e)};e.InAMergeProcessor.prototype.hasModelMetadata=function(e){return this.m_inaMergeRegistryManager.hasModelMetadata(e)};e.InAMergeProcessor.prototype.buildInADataProvidersFromSourceQueries=function(){var e=this.m_inaMergeRegistryManager.getMergeableSourceQueries();this.m_inaMergeRegistryManager.groupSourceQueries(e);this.convertSourceQueriesToInADataProvider(e)};e.InAMergeProcessor.prototype.convertSourceQueriesToInADataProvider=function(e){if(e.size()>1){var t=this.m_inaMergeRegistryManager.getGroupSignatures();var r=t.size();for(var n=0;n<r;n++){var i=t.get(n);var o=this.m_inaMergeRegistryManager.getSourceIDsBySignature(i);if(o.size()>1){this.buildInAMergedQuery(o,i,e)}else if(o.size()===1){var s=o.get(0);var a=this.m_inaMergeRegistryManager.getInASourceQuery(s);this.buildStandAloneQuery(a,i)}}}else if(e.size()===1){var u=e.get(0);this.buildStandAloneQuery(u,u.getGroupSignature())}};e.InAMergeProcessor.prototype.buildInAMergedQuery=function(t,r,n){var i=this.getInADataProviderSystemType(t);var o;if(this.m_processingMode===e.InAMergeProcessingMode.EXECUTE_PERSISTED){var s=this.getMergedRequestByGroupSignature(r);o=s.getStructureByKey(e.InAQueryMergeConstants.TAG_MERGED_QUERY);var a=e.PrUtilsJsonPath.getFirstElementFromPath(o,e.InAQueryMergeConstants.PA_DEFINITION_PATH);var u=a.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);var c=e.InARestrictedMeasureUtils.getMeasureStructure(u);var p=a.getListByKey(e.InAQueryMergeConstants.QY_QUERY_DATA_CELLS);for(var l=0;l<t.size();l++){var g=t.get(l);var y=this.m_inaMergeRegistryManager.getInASourceQuery(g);var A=y.getFilter().getStructureByKey(e.InAQueryMergeConstants.QY_SELECTION);var m=e.InARestrictedMeasureUtils.extractMeasuresFromSelection(A,null);var _=e.XHashMapOfStringByString.create();this.m_inaMergeRequestBuilder.getRestrictedMeasureFilter(m,A,c,p,_);this.m_inaMergeRequestBuilder.assignRestrictedMeasureToSourceQuery(y,_)}}else{o=this.m_inaMergeRequestBuilder.createInADataProviderRequestStructure(t,i)}var S=this.getInADataProviderConnectionContainer(t);var I=this.createInADataProvider(r,t,o,S,i);e.InAQueryMergeUtils.overwriteInstanceIdInDataSource(o,I.getInstanceId());this.maintainSourceQueryState(t,n);this.registerAndMaintainInADataProvider(I)};e.InAMergeProcessor.prototype.getMergedRequestByGroupSignature=function(t){var r=null;var n=this.getMergedPersistResponse();var i=n.size();for(var o=0;o<i;o++){var s=n.get(o);var a=s.getStructureByKey(e.InAQueryMergeConstants.TAG_MERGED_QUERY);if(e.notNull(a)){var u=a.getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS).getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE).getStringByKey(e.InAQueryMergeConstants.QY_INSTANCE_ID);if(e.XString.isEqual(t,u)){r=s;break}}}return r};e.InAMergeProcessor.prototype.buildStandAloneQuery=function(t,r){t.setIsStandAloneQuery(true);var n=t.getInstanceId();var i=e.XListOfString.create();i.add(n);var o=this.createInADataProvider(r,i,t.getRequestStructure(),t.getConnectionContainer(),t.getSystemType());o.setIsStandAloneQuery(true);this.registerAndMaintainInADataProvider(o)};e.InAMergeProcessor.prototype.maintainSourceQueryState=function(t,r){for(var n=0;n<t.size();n++){var i=t.get(n);var o=this.m_inaMergeRegistryManager.getInASourceQuery(i);o.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED);r.removeElement(o)}};e.InAMergeProcessor.prototype.registerAndMaintainInADataProvider=function(t){this.maintainInADataProviderState(t);var r=t.getRequestStructure().getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS).getStructureByKey(e.InAQueryMergeConstants.QY_DEFINITION);var n=r.getStructureByKey(e.InAQueryMergeConstants.QY_RS_FEATURE_REQUEST).getBooleanByKeyExt(e.InAQueryMergeConstants.QY_RETURN_EMPTY_JSON_RESULTSET,false);var i=r.getListByKey(e.InAQueryMergeConstants.QY_DIMENSIONS);var o=e.XStream.of(i).filter(function(t){return t.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE)!==null}.bind(this)).mapToString(function(t){var r=t;return r.getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE).getStringByKey(e.InAQueryMergeConstants.QY_OBJECT_NAME)}.bind(this)).collect(e.XStreamCollector.toListOfString(function(e){return e.getStringRepresentation()}.bind(this)));if(n){var s=r.getStringByKey(e.InAQueryMergeConstants.QY_NAME);t.setPreQueryName(s);t.setPreQueries(o);t.setAsPreQuery()}else if(e.notNull(o)&&o.hasElements()){t.setPreQueries(o);t.setAsMainQuery()}};e.InAMergeProcessor.prototype.maintainInADataProviderState=function(t){t.setQueryState(e.InAQueryMergeConstants.QUERY_STATE_MERGE_CHECKED);var r=t.getInstanceId();this.m_inaMergeRegistryManager.registerInADataProvider(r,t)};e.InAMergeProcessor.prototype.getInADataProviderConnectionContainer=function(e){var t=e.get(0);var r=this.m_inaMergeRegistryManager.getInASourceQuery(t);var n=r.getConnectionContainer();return n};e.InAMergeProcessor.prototype.getInADataProviderSystemType=function(e){var t=e.get(0);var r=this.m_inaMergeRegistryManager.getInASourceQuery(t);var n=r.getSystemType();return n};e.InAMergeProcessor.prototype.createInADataProvider=function(t,r,n,i,o){var s=e.InADataProvider.create(t,n,i,o);for(var a=0;a<r.size();a++){var u=r.get(a);s.addSourceInstanceId(u)}return s};e.InAMergeProcessor.prototype.processInAMerge=function(e,t){this.buildInADataProvidersFromSourceQueries();this.processInADataProviders(e,t)};e.InAMergeProcessor.prototype.processInADataProviders=function(t,r){var n=this.m_processingMode;var i=this.m_inaMergeRegistryManager.getAllMainQueryInADataProviders();if(e.XCollectionUtils.hasElements(i)&&n!==e.InAMergeProcessingMode.MERGE_PERSIST){for(var o=0;o<i.size();o++){var s=i.get(o);this.m_batchFunctions=e.XList.create();if(!s.isPendingProcessing()){this.m_batchFunctions.add(this.executeInADataProvider(s,t,true))}this.addPreQueryExecution(t,s,this.m_batchFunctions);var a=e.PrFactory.createStructure();var u=a.putNewList(e.ConnectionConstants.INA_BATCH);this.addQueriesToRequestList(u,this.m_batchFunctions);var c=this.createInADataProviderRpcFunction(s.getConnectionContainer(),a,false);var p=c.getRpcRequest();p.setMethod(e.HttpRequestMethod.HTTP_POST);p.setAcceptContentType(e.ContentType.APPLICATION_JSON);p.setRequestStructure(a);c.processFunctionExecution(t,this,e.XStringValue.create("ExecutingBatchOfPreQueries"))}}var l=e.XListOfString.create();l.addAll(this.m_inaMergeRegistryManager.getInADataProviders());for(var g=0;g<l.size();g++){var y=l.get(g);var A=this.m_inaMergeRegistryManager.getInADataProvider(y);if(!A.isPendingProcessing()){if(n===e.InAMergeProcessingMode.MERGE_PERSIST){this.persistInADataProvider(A)}else{this.executeInADataProvider(A,t,false)}}}};e.InAMergeProcessor.prototype.addQueriesToRequestList=function(e,t){var r=t.size();for(var n=0;n<r;n++){var i=t.get(n);var o=i.getRpcRequest();var s=o.getRequestStructure();e.add(s)}};e.InAMergeProcessor.prototype.addPreQueryExecution=function(t,r,n){var i=r.getPreQueries();for(var o=0;o<i.size();o++){var s=i.get(o);var a=this.m_inaMergeRegistryManager.getPreQueryInADataProviderByName(s);if(e.notNull(a)&&!a.isPendingProcessing()){n.add(this.executeInADataProvider(a,t,true))}this.addPreQueryExecution(t,a,n)}};e.InAMergeProcessor.prototype.isRequestsProcessed=function(){return this.m_isRequestsProcessed};e.InAMergeProcessor.prototype.setIsRequestsProcessed=function(e){this.m_isRequestsProcessed=e};e.InAMergeProcessor.prototype.persistInADataProvider=function(t){var r=t.getRequestStructure();var n=t.getSourceInstanceIds();var i=e.PrFactory.createList();e.XStream.ofString(n).forEach(function(r){var n=r.getString();var o=this.m_inaMergeRegistryManager.getInASourceQuery(n);var s=o.getRequestStructure();if(!t.isStandAloneQuery()){s.getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS).getStructureByKey(e.InAQueryMergeConstants.QY_DATASOURCE).putString(e.InAQueryMergeConstants.TAG_GROUP_SIGNATURE,o.getGroupSignature());var a=o.getMeasureDimensionName();var u=this.m_inaMergeRegistryManager.getKeyFieldOfDimension(a);var c=o.getMeasureDimension().putNewStructure(e.InAQueryMergeConstants.TAG_MEASURE_METADATA_FOR_PERSISTED_INA);c.putString(e.InAQueryMergeConstants.QY_NAME,a);c.putString(e.InAQueryMergeConstants.QY_KEY_ATTRIBUTE,u)}this.m_inaMergeRegistryManager.unregisterInASourceQuery(n);i.add(s)}.bind(this));var o=e.PrFactory.createStructure();if(!t.isStandAloneQuery()){o.put(e.InAQueryMergeConstants.TAG_MERGED_QUERY,r)}o.put(e.InAQueryMergeConstants.TAG_MERGE_QUERY_RESPONSE_RECEPIENTS,i);this.m_inaMergeRegistryManager.unregisterInADataProvider(t.getGroupSignature(),t.getInstanceId());this.m_mergePersistResponse.add(o)};e.InAMergeProcessor.prototype.getMergedPersistResponse=function(){return this.m_mergePersistResponse};e.InAMergeProcessor.prototype.setMergedPersistResponse=function(e){this.m_mergePersistResponse=e};e.InAMergeProcessor.prototype.executeInADataProvider=function(t,r,n){var i=n?e.SyncType.NON_BLOCKING:r;var o=t.getConnectionContainer();var s=t.getRequestStructure();var a=e.InAQueryMergeUtils.cleanTagsFromRequest(s);var u=n?a:this.wrapRequestStructureAsBatch(a);var c=this.createInADataProviderRpcFunction(o,u,n);t.setRpcFunction(c);this.updateQueryState(t,e.InAQueryMergeConstants.QUERY_STATE_PENDING_PROCESSING);c.processFunctionExecution(i,this,t);return c};e.InAMergeProcessor.prototype.updateQueryState=function(e,t){var r=e.getSourceInstanceIds();for(var n=0;n<r.size();n++){var i=r.get(n);var o=this.m_inaMergeRegistryManager.getInASourceQuery(i);o.setQueryState(t)}e.setQueryState(t)};e.InAMergeProcessor.prototype.createInADataProviderRpcFunction=function(t,r,n){var i=t.getBatchRequestManager();var o=t.getBatchModePathExt();var s=n?t.newRpcFunctionByUri(o):t.newRpcFunctionInternal(o,false);var a=s.getRpcRequest();a.setMethod(e.HttpRequestMethod.HTTP_POST);a.setAcceptContentType(e.ContentType.APPLICATION_JSON);a.setRequestStructure(r);i.collectProcessingHints(s);return s};e.InAMergeProcessor.prototype.wrapRequestStructureAsBatch=function(t){var r=e.PrFactory.createStructure();var n=r.putNewList(e.InAQueryMergeConstants.QY_BATCH);n.add(t);return r};e.InAMergeProcessor.prototype.onFunctionExecuted=function(t,r,n){if(n.isEqualTo(e.XStringValue.create("ExecutingBatchOfPreQueries"))){this.updateResponsesInBatchFunctions(t)}else{var i=n;this.m_inaMergeResponseDispatcher.dispatchInAResponse(i,t)}};e.InAMergeProcessor.prototype.updateResponsesInBatchFunctions=function(t){if(t.isValid()){var r=t.getData();var n=r.getRootElement();var i=n.getListByKey(e.ConnectionConstants.INA_BATCH);this.updateAllBatchFunctions(i,n)}};e.InAMergeProcessor.prototype.updateAllBatchFunctions=function(t,r){var n=this.m_batchFunctions.size();if(e.notNull(t)){for(var i=0;i<n;i++){var o=this.m_batchFunctions.get(i);var s=o.getRpcResponse();var a=t.getStructureAt(i);s.setRootElement(a,null);o.endSync()}}else{for(var u=0;u<n;u++){this.m_batchFunctions.get(u).getRpcResponse().setRootElement(r,null)}}};e.InAMergeProcessorSetupInitiator=function(){};e.InAMergeProcessorSetupInitiator.prototype=new e.InAMergeProcessorFactory;e.InAMergeProcessorSetupInitiator.prototype._ff_c="InAMergeProcessorSetupInitiator";e.InAMergeProcessorSetupInitiator.staticSetup=function(){e.InAMergeProcessorFactory.registerFactory(new e.InAMergeProcessorSetupInitiator)};e.InAMergeProcessorSetupInitiator.prototype.newInAMergeProcessor=function(t){return e.InAMergeProcessor.create(t)};e.InASourceQuery=function(){};e.InASourceQuery.prototype=new e.BasicInAQuery;e.InASourceQuery.prototype._ff_c="InASourceQuery";e.InASourceQuery.create=function(t,r,n,i){var o=new e.InASourceQuery;o.setupInASourceQuery(t,r,n,i);return o};e.InASourceQuery.prototype.m_hasSourceMeasureFilter=false;e.InASourceQuery.prototype.m_hasMergeRestrictedMeasure=false;e.InASourceQuery.prototype.m_measureMemberPositionCounter=0;e.InASourceQuery.prototype.m_membersPositionMap=null;e.InASourceQuery.prototype.m_restrictedMeasureSourceMeasureMap=null;e.InASourceQuery.prototype.setupInASourceQuery=function(t,r,n,i){e.BasicInAQuery.prototype.setupBasicInAQuery.call(this,t,r,n,i);this.m_hasSourceMeasureFilter=false;this.m_hasMergeRestrictedMeasure=false;this.m_measureMemberPositionCounter=-1;this.m_membersPositionMap=e.XSimpleMap.create();this.m_restrictedMeasureSourceMeasureMap=e.XHashMapOfStringByString.create();var o=this.getRequestStructure().getStructureByKey(e.InAQueryMergeConstants.QY_ANALYTICS).getStructureByKey(e.InAQueryMergeConstants.QY_DEFINITION);var s=o.getStructureByKey(e.InAQueryMergeConstants.QY_RS_FEATURE_REQUEST).getBooleanByKeyExt(e.InAQueryMergeConstants.QY_RETURN_EMPTY_JSON_RESULTSET,false);if(s){this.setPreQueryName(o.getStringByKey(e.InAQueryMergeConstants.QY_NAME))}};e.InASourceQuery.prototype.releaseObject=function(){e.BasicInAQuery.prototype.releaseObject.call(this);this.m_membersPositionMap=e.XObjectExt.release(this.m_membersPositionMap);this.m_restrictedMeasureSourceMeasureMap=e.XObjectExt.release(this.m_restrictedMeasureSourceMeasureMap)};e.InASourceQuery.prototype.hasMeasureFilter=function(){return this.m_hasSourceMeasureFilter};e.InASourceQuery.prototype.hasMergeRestrictedMeasure=function(){return this.m_hasMergeRestrictedMeasure};e.InASourceQuery.prototype.addMeasureMemberName=function(t,r,n,i){if(e.XStringUtils.isNotNullAndNotEmpty(t)){if(r){this.m_hasMergeRestrictedMeasure=true}if(n){this.m_hasSourceMeasureFilter=true}if(e.XStringUtils.isNotNullAndNotEmpty(i)){this.m_restrictedMeasureSourceMeasureMap.put(t,i);var o=-1;for(var s=0;s<this.m_membersPositionMap.size();s++){var a=this.m_membersPositionMap.getByKey(e.XIntegerValue.create(s));if(e.XString.isEqual(i,a.getString())){o=s;break}}if(o!==-1){this.m_membersPositionMap.put(e.XIntegerValue.create(o),e.XStringValue.create(t))}}else{this.m_membersPositionMap.put(e.XIntegerValue.create(++this.m_measureMemberPositionCounter),e.XStringValue.create(t))}}};e.InASourceQuery.prototype.getSourceMemberName=function(e){return this.m_restrictedMeasureSourceMeasureMap.getByKey(e)};e.InASourceQuery.prototype.getMeasureMemberPositionMap=function(){return this.m_membersPositionMap};e.BatchRequestManager=function(){};e.BatchRequestManager.prototype=new e.XObject;e.BatchRequestManager.prototype._ff_c="BatchRequestManager";e.BatchRequestManager.CONSTANT_ID=null;e.BatchRequestManager.create=function(t){var r=new e.BatchRequestManager;r.m_session=t;r.m_batchFunctions=e.XList.create();r.m_preQueryNames=e.XHashSetOfString.create();r.m_microCubeNames=e.XHashSetOfString.create();return r};e.BatchRequestManager.prototype.m_session=null;e.BatchRequestManager.prototype.m_batchFunctions=null;e.BatchRequestManager.prototype.m_preQueryNames=null;e.BatchRequestManager.prototype.m_batchFunctionsIdMapping=null;e.BatchRequestManager.prototype.m_streamingGuid=null;e.BatchRequestManager.prototype.m_functionFactory=null;e.BatchRequestManager.prototype.m_batchModePath=null;e.BatchRequestManager.prototype.m_syncType=null;e.BatchRequestManager.prototype.m_microCubeNames=null;e.BatchRequestManager.prototype.m_cacheHintsEnabled=false;e.BatchRequestManager.prototype.releaseObject=function(){e.XObject.prototype.releaseObject.call(this);this.m_session=null;this.m_batchFunctions=null;this.m_batchFunctionsIdMapping=null;this.m_streamingGuid=null;this.m_functionFactory=null;this.m_batchModePath=null;this.m_syncType=null;this.m_microCubeNames=e.XObjectExt.release(this.m_microCubeNames);this.m_preQueryNames=e.XObjectExt.release(this.m_preQueryNames)};e.BatchRequestManager.prototype.getBatchFunctions=function(){var t=e.XList.create();for(var r=0;r<this.m_batchFunctions.size();r++){t.add(this.m_batchFunctions.get(r))}return t};e.BatchRequestManager.prototype.addPreQueryName=function(e){this.m_preQueryNames.add(e)};e.BatchRequestManager.prototype.containsPreQueryName=function(e){return this.m_preQueryNames.contains(e)};e.BatchRequestManager.prototype.addBatchFunction=function(e){this.m_batchFunctions.add(e)};e.BatchRequestManager.prototype.removeBatchFunction=function(e){this.m_batchFunctions.removeElement(e)};e.BatchRequestManager.prototype.getMicroCubesNames=function(){return this.m_microCubeNames};e.BatchRequestManager.prototype.addMicroCubeName=function(e){this.m_microCubeNames.add(e)};e.BatchRequestManager.prototype.isRsStreamingEnabled=function(){return e.notNull(this.m_streamingGuid)};e.BatchRequestManager.prototype.executeBatch=function(t,r,n,i){this.removeExecutedFunctions();this.m_preQueryNames.clear();var o=r.getProcess().getApplication();var s=o.getOlapEnvironment();s.clearTransientQueryManager();if(!e.XCollectionUtils.hasElements(this.m_batchFunctions)){return}this.m_syncType=t;this.m_functionFactory=r;this.m_batchModePath=n;var a=e.PrFactory.createStructure();var u=a.putNewList(e.ConnectionConstants.INA_BATCH);var c=this.addQueriesToRequestList(u);e.QInAClientInfo.exportClientInfo(a,o,r.supportsAnalyticCapability(e.InAConstantsBios.QY_CLIENT_INFO));if(i&&c){this.m_streamingGuid=this.createGuid(null);this.ensureUniqueInstanceIds();var p=a.putNewStructure(e.ConnectionConstants.INA_BATCH_ASYNC_RESPONSE_REQUEST);p.putString(e.ConnectionConstants.INA_BATCH_ID,this.m_streamingGuid)}var l=r.newRpcFunctionInternal(n,false);var g=l.getRpcRequest();g.setMethod(e.HttpRequestMethod.HTTP_POST);g.setAcceptContentType(e.ContentType.APPLICATION_JSON);g.setRequestStructure(a);this.collectProcessingHints(l);l.processFunctionExecution(t,this,null)};e.BatchRequestManager.prototype.collectProcessingHints=function(t){var r=t.getRpcRequest().getProcessingHint();this.m_cacheHintsEnabled=r.getBooleanByKeyExt(e.ConnectionParameters.CACHE_HINTS_ENABLED,false);var n=r.putNewList(e.ConnectionConstants.INA_BATCH);var i=0;while(i<this.m_batchFunctions.size()){var o=this.m_batchFunctions.get(i);var s=o.getRpcRequest().getProcessingHint();n.add(s);this.m_cacheHintsEnabled=this.m_cacheHintsEnabled||s.getBooleanByKeyExt(e.ConnectionParameters.CACHE_HINTS_ENABLED,false);i++}};e.BatchRequestManager.prototype.removeExecutedFunctions=function(){var t=0;while(t<this.m_batchFunctions.size()){var r=this.m_batchFunctions.get(t);var n=r.getRpcRequest().getRequestStructure();if(r.getSyncState()!==e.SyncState.PROCESSING||e.isNull(n)||n.isReleased()){this.m_batchFunctions.removeAt(t);continue}t++}};e.BatchRequestManager.prototype.addQueriesToRequestList=function(t){var r=this.m_batchFunctions.size();var n=r>1;for(var i=0;i<r;i++){var o=this.m_batchFunctions.get(i);var s=o.getRpcRequest();var a=s.getRequestStructure();var u=e.BatchRequestDecoratorFactory.getBatchRequestDecorator(this.m_session,a);if(e.isNull(u)){t.add(a);if(this.getInstanceId(a)===null){n=false}}else{n=false;o.setDecorator(u);var c=u.getRequestItems();if(e.notNull(c)){for(var p=0;p<c.size();p++){t.add(c.get(p))}}}}return n};e.BatchRequestManager.prototype.executeNextStreamingRequest=function(){var t=e.PrFactory.createStructure();var r=t.putNewStructure(e.ConnectionConstants.INA_ANALYTICS);var n=r.putNewList(e.ConnectionConstants.INA_ACTIONS);var i=n.addNewStructure();i.putString(e.ConnectionConstants.INA_TYPE,e.ConnectionConstants.INA_BATCH_NEXT_ASYNC_RESPONSE);i.putString(e.ConnectionConstants.INA_BATCH_ID,this.m_streamingGuid);var o=i.putNewList(e.ConnectionConstants.INA_BATCH);e.XStream.of(this.m_batchFunctions).map(function(e){return e.getRpcRequest().getRequestStructure()}.bind(this)).filter(function(e){return this.getDataSource(e)!==null}.bind(this)).forEach(function(t){var r=o.addNewStructure();var n=this.getStructureRootKey(t);if(e.notNull(n)){r=r.putNewStructure(n)}r.put(e.ConnectionConstants.INA_DATA_SOURCE,this.getDataSource(t))}.bind(this));var s=this.m_functionFactory.newRpcFunctionInternal(this.m_batchModePath,false);var a=s.getRpcRequest();a.setMethod(e.HttpRequestMethod.HTTP_POST);a.setAcceptContentType(e.ContentType.APPLICATION_JSON);a.setRequestStructure(t);a.getProcessingHint().putBoolean(e.ConnectionParameters.CACHE_HINTS_ENABLED,this.m_cacheHintsEnabled);s.processFunctionExecution(this.m_syncType,this,null)};e.BatchRequestManager.prototype.onFunctionExecuted=function(t,r,n){e.XBooleanUtils.checkFalse(this.m_batchFunctions.isReleased(),"Fatal error: Batch functions object is not valid anymore");var i=this.updateResponsesInBatchFunctions(t);var o=i.getData();this.endFunctions(o,t);this.removeExecutedFunctions();if(this.isRsStreamingEnabled()&&this.m_batchFunctions.hasElements()){if(t.isValid()&&i.isValid()){this.executeNextStreamingRequest()}else{this.endFunctions(this.m_batchFunctions,t);e.XObjectExt.release(this)}}else{e.XObjectExt.release(this)}e.XObjectExt.release(o)};e.BatchRequestManager.prototype.endFunctions=function(e,t){var r=e.size();for(var n=0;n<r;n++){var i=e.get(n);i.addAllMessages(t);i.endSync()}};e.BatchRequestManager.prototype.updateResponsesInBatchFunctions=function(t){if(t.isValid()){var r=t.getData();var n=r.getRootElement();var i=n.getListByKey(e.ConnectionConstants.INA_BATCH);if(this.isRsStreamingEnabled()){return this.updateRespondedBatchFunctions(i,n)}this.updateAllBatchFunctions(i,n)}return e.ExtResult.create(this.m_batchFunctions,null)};e.BatchRequestManager.prototype.updateAllBatchFunctions=function(t,r){var n=this.m_batchFunctions.size();if(e.notNull(t)){var i=0;for(var o=0;o<n;o++){var s=this.m_batchFunctions.get(o);var a=s.getRpcResponse();var u=s.getDecorator();if(e.isNull(u)){var c=t.getStructureAt(i);a.setRootElement(c,null);i++}else{var p=u.getItemsSize();var l=e.XList.create();for(var g=0;g<p;g++){var y=t.getStructureAt(i+g);l.add(y)}var A=u.buildResponse(l);a.setRootElement(A,null);i=i+p}}}else{for(var m=0;m<n;m++){this.m_batchFunctions.get(m).getRpcResponse().setRootElement(r,null)}}};e.BatchRequestManager.prototype.updateRespondedBatchFunctions=function(t,r){var n=e.MessageManager.createMessageManagerExt(this.m_session);var i=e.XList.create();if(e.notNull(t)&&t.hasElements()){var o=t.size();for(var s=0;s<o;s++){var a=t.getStructureAt(s);var u=this.getInstanceId(a);var c=this.m_batchFunctionsIdMapping.getByKey(u);if(e.notNull(c)){c.getRpcResponse().setRootElement(a,null);i.add(c)}else{n.addError(0,"Request not found for response")}}}if(!this.isValidBatchStreamingResponse(r)){n.addError(0,"Response does not contain correct batch id")}return e.ExtResult.create(i,n)};e.BatchRequestManager.prototype.getInstanceId=function(t){var r=this.getDataSource(t);if(e.notNull(r)){return r.getStringByKey(e.ConnectionConstants.INA_INSTANCE_ID)}return null};e.BatchRequestManager.prototype.getDataSource=function(t){var r=this.getStructureRootKey(t);if(e.notNull(r)){return t.getStructureByKey(r).getStructureByKey(e.ConnectionConstants.INA_DATA_SOURCE)}return e.notNull(t)?t.getStructureByKey(e.ConnectionConstants.INA_DATA_SOURCE):null};e.BatchRequestManager.prototype.getStructureRootKey=function(t){if(e.isNull(t)){return null}if(t.containsKey(e.ConnectionConstants.INA_ANALYTICS)){return e.ConnectionConstants.INA_ANALYTICS}if(t.containsKey(e.ConnectionConstants.INA_LIST_REPORTING)){return e.ConnectionConstants.INA_LIST_REPORTING}if(t.containsKey(e.ConnectionConstants.INA_METADATA)){return e.ConnectionConstants.INA_METADATA}if(t.containsKey(e.ConnectionConstants.INA_CUBE)){return e.ConnectionConstants.INA_CUBE}if(t.containsKey(e.ConnectionConstants.INA_DS_VALIDATION)){return e.ConnectionConstants.INA_DS_VALIDATION}return null};e.BatchRequestManager.prototype.ensureUniqueInstanceIds=function(){this.m_batchFunctionsIdMapping=e.XHashMapByString.create();var t=this.m_batchFunctions.size();for(var r=0;r<t;r++){var n=this.m_batchFunctions.get(r);var i=n.getRpcRequest().getRequestStructure();var o=this.getInstanceId(i);if(this.m_batchFunctionsIdMapping.containsKey(o)||e.XStringUtils.isNotNullAndNotEmpty(e.BatchRequestManager.CONSTANT_ID)){o=this.createGuid(e.XInteger.convertToString(r));this.getDataSource(i).putString(e.ConnectionConstants.INA_INSTANCE_ID,o)}this.m_batchFunctionsIdMapping.put(o,n)}};e.BatchRequestManager.prototype.isValidBatchStreamingResponse=function(t){var r=t.getStructureByKey(e.ConnectionConstants.INA_BATCH_ASYNC_RESPONSE_REQUEST);if(e.notNull(r)){var n=r.getStringByKey(e.ConnectionConstants.INA_BATCH_ID);return e.notNull(n)&&e.XString.isEqual(n,this.m_streamingGuid)}return false};e.BatchRequestManager.prototype.createGuid=function(t){if(e.XStringUtils.isNotNullAndNotEmpty(e.BatchRequestManager.CONSTANT_ID)){return e.XStringUtils.concatenate2(e.BatchRequestManager.CONSTANT_ID,t)}return e.XGuid.getGuid()};e.BatchRequestManagerInAFactory=function(){};e.BatchRequestManagerInAFactory.prototype=new e.BatchRequestManagerFactory;e.BatchRequestManagerInAFactory.prototype._ff_c="BatchRequestManagerInAFactory";e.BatchRequestManagerInAFactory.staticSetupBatchInAFactory=function(){e.BatchRequestManagerFactory.registerFactory(new e.BatchRequestManagerInAFactory)};e.BatchRequestManagerInAFactory.prototype.newBatchRequestManager=function(t){return e.BatchRequestManager.create(t)};e.ServiceType=function(){};e.ServiceType.prototype=new e.ServiceTypeInfo;e.ServiceType.prototype._ff_c="ServiceType";e.ServiceType.createType=function(t){var r=new e.ServiceType;var n=e.XStringUtils.concatenate3(e.RegistrationService.SERVICE_CONFIG,".",t);var i=e.XStringUtils.concatenate3(e.RegistrationService.SERVICE,".",t);r.setupExt(n,i);return r};e.ServiceType.prototype.m_srvConfigReferenceName=null;e.ServiceType.prototype.m_serviceReferenceName=null;e.ServiceType.prototype.setupExt=function(e,t){this.m_srvConfigReferenceName=e;this.m_serviceReferenceName=t};e.ServiceType.prototype.createServiceConfig=function(e){return this.createServiceConfigInternal(e)};e.ServiceType.prototype.getServiceReferenceName=function(){return this.m_serviceReferenceName};e.ServiceType.prototype.getServiceConfigReferenceName=function(){return this.m_srvConfigReferenceName};e.ServiceType.prototype.toString=function(){var t=e.XStringBuffer.create();if(e.notNull(this.m_srvConfigReferenceName)){t.appendLine(this.m_srvConfigReferenceName)}if(e.notNull(this.m_serviceReferenceName)){t.appendLine(this.m_serviceReferenceName)}return t.toString()};e.DcsUsageTracker=function(){};e.DcsUsageTracker.prototype=new e.XObject;e.DcsUsageTracker.prototype._ff_c="DcsUsageTracker";e.DcsUsageTracker.MAX_INTERVAL=6e5;e.DcsUsageTracker.create=function(){var t=new e.DcsUsageTracker;t.m_interval=2e4;t.m_enabled=false;t.m_failedCount=0;t.setup();return t};e.DcsUsageTracker.prototype.m_interval=0;e.DcsUsageTracker.prototype.m_dcsUrl=null;e.DcsUsageTracker.prototype.m_session=null;e.DcsUsageTracker.prototype.m_syncType=null;e.DcsUsageTracker.prototype.eventQueue=null;e.DcsUsageTracker.prototype.m_requestRunning=false;e.DcsUsageTracker.prototype.m_timerHandle=null;e.DcsUsageTracker.prototype.m_xlang=null;e.DcsUsageTracker.prototype.m_enabled=false;e.DcsUsageTracker.prototype.m_tenantId=null;e.DcsUsageTracker.prototype.m_productVersion=null;e.DcsUsageTracker.prototype.m_failedCount=0;e.DcsUsageTracker.prototype.m_language=null;e.DcsUsageTracker.prototype.m_dispatcher=null;e.DcsUsageTracker.prototype.setup=function(){this.eventQueue=e.XList.create();this.m_dispatcher=e.Dispatcher.getInstance()};e.DcsUsageTracker.prototype.setDispatcher=function(e){this.m_dispatcher=e};e.DcsUsageTracker.prototype.setInterval=function(e){this.m_interval=e};e.DcsUsageTracker.prototype.setDcsUrl=function(t){this.m_dcsUrl=e.XUri.createFromUrl(t)};e.DcsUsageTracker.prototype.trackUsage=function(e,t,r){if(!this.isEnabled()){return}this.addEvent(e,t,r);this.checkTimer()};e.DcsUsageTracker.prototype.track=function(t){if(!this.isEnabled()){return}if(t.getEventTime()===null){t.setEventTime(e.XDateTime.createCurrentLocalDateTime())}this.eventQueue.add(t);this.checkTimer()};e.DcsUsageTracker.prototype.checkTimer=function(){if(this.m_requestRunning){return}if(e.notNull(this.m_timerHandle)){return}var t=e.XDouble.convertToInt(this.m_interval*e.XMath.pow(2,this.m_failedCount));this.m_timerHandle=this.m_dispatcher.registerTimer(e.XMath.min(t,e.DcsUsageTracker.MAX_INTERVAL),this,null)};e.DcsUsageTracker.prototype.addEvent=function(t,r,n){var i=new e.UTEvent;i.setSession(n);i.setEventId(t);i.setEventTime(e.XDateTime.createCurrentLocalDateTime());i.setFeature(r.getByKey("feature"));i.setParameters(r);this.eventQueue.add(i)};e.DcsUsageTracker.prototype.isEnabled=function(){return this.m_enabled};e.DcsUsageTracker.prototype.setEnabled=function(e){this.m_enabled=e};e.DcsUsageTracker.prototype.process=function(){if(this.eventQueue.isEmpty()){this.cancelTimer();return}var e=this.createHttpRequest();var t=e.newHttpClient(this.getSession());this.m_requestRunning=true;t.processHttpRequest(this.getSyncType(),this,null)};e.DcsUsageTracker.prototype.cancelTimer=function(){this.m_dispatcher.unregisterInterval(this.m_timerHandle);this.m_timerHandle=e.XObjectExt.release(this.m_timerHandle)};e.DcsUsageTracker.prototype.getSyncType=function(){if(e.isNull(this.m_syncType)){this.m_syncType=e.SyncType.NON_BLOCKING}return this.m_syncType};e.DcsUsageTracker.prototype.setSyncType=function(e){this.m_syncType=e};e.DcsUsageTracker.prototype.getSession=function(){if(e.isNull(this.m_session)){this.m_session=e.DefaultSession.create()}return this.m_session};e.DcsUsageTracker.prototype.createHttpRequest=function(){var t=e.HttpRequest.create();t.setMethod(e.HttpRequestMethod.HTTP_POST);t.setFromUri(this.getDscUri());t.setContentType(e.ContentType.APPLICATION_JSON);t.setString(this.buildContent());return t};e.DcsUsageTracker.prototype.getDscUri=function(){if(e.isNull(this.m_dcsUrl)){var t=e.NetworkEnv.getLocation();if(e.isNull(t)){throw e.XException.createIllegalArgumentException("Data Collection Url must be provided")}this.m_dcsUrl=e.XUri.createFromOther(t);this.m_dcsUrl.setPath("/datacollection/api/v2/application/data");this.m_dcsUrl.setQuery("")}return this.m_dcsUrl};e.DcsUsageTracker.prototype.buildContent=function(){var t=e.PrFactory.createStructure();this.addCommonFacts(t);var r=t.getListByKey("actiondata");var n=this.eventQueue.size();for(var i=0;i<n;i++){var o=e.PrFactory.createStructure();r.add(o);var s=this.eventQueue.get(i);var a=s.getParameters();o.putString("action",s.getEventId());o.putString("feature",s.getFeature());var u=s.getErrorSize();o.putInteger("numoferrormessages",u);if(u>0){var c=e.XStringBuffer.create();var p=s.getErrors().getKeysAsIteratorOfString();while(p.hasNext()){var l=p.next();c.append(l).append(":").append(s.getErrors().getByKey(l)).append(";")}o.putString("errormessages",c.toString())}var g=s.getEventTime().toIsoFormatWithFractions(3);o.putString("actiontimestamp",e.XString.replace(g,"T"," "));o.putString("sessionid",s.getSession().getAppSessionId());o.putInteger("actionduration",0);o.putInteger("xversion",this.getSession().getXVersion());var y=o.putNewList("options");var A=a.getKeysAsIteratorOfString();while(A.hasNext()){var m=A.next();if(e.XString.compare(m,"actionId")!==0&&e.XString.compare(m,"feature")!==0){var _=y.addNewStructure();_.putString("param",m);_.putString("value",a.getByKey(m))}}}this.eventQueue.clear();return e.PrUtils.serialize(t,true,true,0)};e.DcsUsageTracker.prototype.addCommonFacts=function(t){t.putString("applicationtype","service");t.putString("applicationname","firefly");t.putString("fireflyversion",e.XLibVersionUtil.getLibVersion(this.getSession()));t.putString("productversion",this.getProductVersion());t.putString("xlang",this.mapXLang());t.putString("tenantid",this.getTenantId());t.putString("os",e.XSystemUtils.getOsName());t.putString("language",this.getLanguage());t.putString("userid","");var r=e.NetworkEnv.getLocation();var n="N/A";if(e.notNull(r)&&e.XStringUtils.isNotNullAndNotEmpty(r.getHost())){n=r.getHost()}t.putString("publichost",n);t.putNewList("actiondata")};e.DcsUsageTracker.prototype.mapXLang=function(){if(e.isNull(this.m_xlang)){var t=e.XLanguage.getLanguage();if(t===e.XLanguage.JAVASCRIPT){this.m_xlang="js"}else if(t===e.XLanguage.TYPESCRIPT){this.m_xlang="ts"}else if(t===e.XLanguage.JAVA){this.m_xlang="java"}else if(t===e.XLanguage.CSHARP){this.m_xlang="csharp"}else if(t===e.XLanguage.CPP){this.m_xlang="cpp"}else if(t===e.XLanguage.OBJECTIVE_C){this.m_xlang="objc"}}return this.m_xlang};e.DcsUsageTracker.prototype.onHttpResponse=function(e,t,r){if(t.getStatusCode()!==202){this.m_failedCount=this.m_failedCount===10?10:this.m_failedCount+1}else{this.m_failedCount=0}this.m_requestRunning=false;this.cancelTimer()};e.DcsUsageTracker.prototype.onTimerEvent=function(e,t){this.process()};e.DcsUsageTracker.prototype.getTenantId=function(){return this.m_tenantId};e.DcsUsageTracker.prototype.setTenantId=function(e){this.m_tenantId=e};e.DcsUsageTracker.prototype.getProductVersion=function(){return this.m_productVersion};e.DcsUsageTracker.prototype.setProductVersion=function(e){this.m_productVersion=e};e.DcsUsageTracker.prototype.getLanguage=function(){return e.notNull(this.m_language)?this.m_language:"N/A"};e.DcsUsageTracker.prototype.setLanguage=function(e){this.m_language=e};e.UTEvent=function(){};e.UTEvent.prototype=new e.XObject;e.UTEvent.prototype._ff_c="UTEvent";e.UTEvent.prototype.eventTime=null;e.UTEvent.prototype.host=null;e.UTEvent.prototype.tenantId=null;e.UTEvent.prototype.session=null;e.UTEvent.prototype.m_eventId=null;e.UTEvent.prototype.m_parameters=null;e.UTEvent.prototype.m_feature=null;e.UTEvent.prototype.errors=null;e.UTEvent.prototype.getEventTime=function(){return this.eventTime};e.UTEvent.prototype.setEventTime=function(e){this.eventTime=e};e.UTEvent.prototype.getHost=function(){return this.host};e.UTEvent.prototype.setHost=function(e){this.host=e};e.UTEvent.prototype.getTenantId=function(){return this.tenantId};e.UTEvent.prototype.setTenantId=function(e){this.tenantId=e};e.UTEvent.prototype.getSession=function(){return this.session};e.UTEvent.prototype.setSession=function(e){this.session=e};e.UTEvent.prototype.setEventId=function(e){this.m_eventId=e};e.UTEvent.prototype.getEventId=function(){return this.m_eventId};e.UTEvent.prototype.setParameters=function(e){this.m_parameters=e};e.UTEvent.prototype.getParameters=function(){return this.m_parameters};e.UTEvent.prototype.getFeature=function(){return this.m_feature};e.UTEvent.prototype.setFeature=function(e){this.m_feature=e};e.UTEvent.prototype.getErrorSize=function(){if(e.notNull(this.errors)){return this.errors.size()}return 0};e.UTEvent.prototype.getErrors=function(){return this.errors};e.UTEvent.prototype.setErrors=function(e){this.errors=e};e.DfApplication=function(){};e.DfApplication.prototype=new e.DfProcessContext;e.DfApplication.prototype._ff_c="DfApplication";e.DfApplication.prototype.m_undoManager=null;e.DfApplication.prototype.m_releaseProcess=false;e.DfApplication.prototype.m_olapEnvironment=null;e.DfApplication.prototype.m_serviceRegistry=null;e.DfApplication.prototype.m_dataProviders=null;e.DfApplication.prototype.m_subApplications=null;e.DfApplication.prototype.m_bindingManager=null;e.DfApplication.prototype.m_version=null;e.DfApplication.prototype.m_identifier=null;e.DfApplication.prototype.m_component=null;e.DfApplication.prototype.m_storyId=null;e.DfApplication.prototype.m_storyName=null;e.DfApplication.prototype.m_languageLocale=null;e.DfApplication.prototype.setup=function(){e.DfProcessContext.prototype.setup.call(this);this.m_dataProviders=e.XList.create();this.m_subApplications=e.XList.create();this.m_serviceRegistry=e.XHashMapByString.create()};e.DfApplication.prototype.releaseObject=function(){this.m_subApplications=e.XObjectExt.release(this.m_subApplications);this.m_serviceRegistry=e.XObjectExt.release(this.m_serviceRegistry);this.m_bindingManager=e.XObjectExt.release(this.m_bindingManager);this.m_version=null;this.m_identifier=null;this.m_component=null;this.m_storyId=null;this.m_storyName=null;this.m_languageLocale=null;if(this.m_releaseProcess){e.XObjectExt.release(this.getProcess())}e.DfProcessContext.prototype.releaseObject.call(this)};e.DfApplication.prototype.releaseManagedObjects=function(){if(!this.isReleased()){this.releaseAllSubApplications();this.releaseDataProviders();this.m_dataProviders=e.XObjectExt.release(this.m_dataProviders);this.releaseServices();this.m_olapEnvironment=e.XObjectExt.release(this.m_olapEnvironment)}};e.DfApplication.prototype.setClientInfo=function(e,t,r){this.m_version=e;this.m_identifier=t;this.m_component=r};e.DfApplication.prototype.getClientComponent=function(){return this.m_component};e.DfApplication.prototype.getClientVersion=function(){return this.m_version};e.DfApplication.prototype.getClientIdentifier=function(){return this.m_identifier};e.DfApplication.prototype.setWidgetId=function(e){};e.DfApplication.prototype.getWidgetId=function(){return null};e.DfApplication.prototype.clearClientInfo=function(){this.m_version=null;this.m_identifier=null;this.m_component=null;this.m_storyId=null;this.m_storyName=null;this.m_languageLocale=null};e.DfApplication.prototype.getOlapEnvironment=function(){return this.getDocument("DefaultOlapEnvironment",e.XComponentType._DATASOURCE)};e.DfApplication.prototype.getDocument=function(t,r){if(e.isNull(this.m_olapEnvironment)){this.m_olapEnvironment=e.OlapEnvironmentFactory.newInstance(this)}return this.m_olapEnvironment};e.DfApplication.prototype.releaseDataProviders=function(){if(e.notNull(this.m_dataProviders)){while(this.m_dataProviders.size()>0){var t=this.m_dataProviders.size();var r=this.m_dataProviders.get(0);e.XObjectExt.release(r);if(t===this.m_dataProviders.size()){throw e.XException.createIllegalStateException("DataProvider was not correctly released from storage")}}}};e.DfApplication.prototype.releaseServices=function(){if(e.notNull(this.m_serviceRegistry)){var t=this.m_serviceRegistry.getKeysAsReadOnlyListOfString();for(var r=0;r<t.size();r++){var n=t.get(r);var i=this.m_serviceRegistry.getByKey(n);if(e.notNull(i)&&!i.isReleased()){for(var o=i.size()-1;o>-1;o--){var s=i.get(o);e.XObjectExt.release(s)}i.clear();e.XObjectExt.release(i)}}this.m_serviceRegistry.clear()}};e.DfApplication.prototype.getDataProviders=function(){return this.m_dataProviders};e.DfApplication.prototype.registerDataProvider=function(t){if(e.notNull(t)){this.m_dataProviders.add(t)}};e.DfApplication.prototype.unregisterDataProvider=function(t){if(e.notNull(t)){this.m_dataProviders.removeElement(t)}};e.DfApplication.prototype.getReferenceNameFromService=function(t){if(e.notNull(t)){var r=t.getServiceConfig();if(e.notNull(r)){var n=r.getServiceTypeInfo();if(e.notNull(n)){return n.getServiceReferenceName()}}}return null};e.DfApplication.prototype.registerService=function(t){var r=this.getReferenceNameFromService(t);if(e.notNull(r)){var n=this.m_serviceRegistry.getByKey(r);if(e.isNull(n)){n=e.XList.create();this.m_serviceRegistry.put(r,n)}for(var i=0;i<n.size();i++){var o=n.get(i);if(t===o){return}}n.add(t)}};e.DfApplication.prototype.unregisterService=function(t){var r=this.getReferenceNameFromService(t);if(e.notNull(r)){if(e.notNull(this.m_serviceRegistry)){var n=this.m_serviceRegistry.getByKey(r);if(e.notNull(n)&&!n.isReleased()){for(var i=0;i<n.size();i++){var o=n.get(i);if(t===o){n.removeAt(i);break}}}}}};e.DfApplication.prototype.getServices=function(t){if(e.notNull(t)){var r=t.getServiceReferenceName();if(e.notNull(r)){if(e.notNull(this.m_serviceRegistry)){var n=this.m_serviceRegistry.getByKey(r);if(e.notNull(n)&&n.size()>0){return n}}}}return null};e.DfApplication.prototype.newSubApplication=function(t){var r=e.SubApplication.create(this,t);this.m_subApplications.add(r);return r};e.DfApplication.prototype.releaseAllSubApplications=function(){if(e.notNull(this.m_subApplications)){while(this.m_subApplications.size()>0){var t=this.m_subApplications.size();var r=this.m_subApplications.get(0);e.XObjectExt.release(r);if(t===this.m_subApplications.size()){throw e.XException.createIllegalStateException("DataProvider was not correctly released from storage")}}}};e.DfApplication.prototype.unregisterSubApplication=function(e){var t=this.m_subApplications.getIndex(e);if(t!==-1){this.m_subApplications.removeAt(t)}};e.DfApplication.prototype.createNextInstanceId=function(){return e.XGuid.getGuid()};e.DfApplication.prototype.selectProviderComponents=function(t,r,n,i){var o=t.getDomain();if(e.isNull(o)||o===e.SigSelDomain.CONTEXT){o=r}if(o===e.SigSelDomain.DATA){var s=e.XList.create();var a=t.getOperationType();var u=this.getDataProviders();if(a===e.SigSelType.MATCH_NAME){var c=t.getName();for(var p=0;p<u.size();p++){var l=u.get(p);var g=l.getComponentType();if(e.XString.isEqual(c,l.getDataProviderName())&&g.isTypeOf(e.IoComponentType.DATA_PROVIDER)){s.add(l);break}}}else if(a===e.SigSelType.MATCH){var y=t.getSelectedComponentType();if(e.notNull(y)){for(var A=0;A<u.size()&&(i===-1||s.size()<i);A++){var m=u.get(A);var _=m.getComponentType();if(_.isTypeOf(y)){s.add(m)}}}}return s}return null};e.DfApplication.prototype.setStoryId=function(e){this.m_storyId=e};e.DfApplication.prototype.getStoryId=function(){return this.m_storyId};e.DfApplication.prototype.setStoryName=function(e){this.m_storyName=e};e.DfApplication.prototype.getStoryName=function(){return this.m_storyName};e.DfApplication.prototype.setLanguageLocale=function(e){this.m_languageLocale=e};e.DfApplication.prototype.getLanguageLocale=function(){return this.m_languageLocale};e.DfApplication.prototype.setDefaultSyncType=function(e){this.getProcess().setDefaultSyncType(e)};e.DfApplication.prototype.setProcessExt=function(t,r){this.setProcess(t);this.m_releaseProcess=r;var n=t.getSelector();n.registerSelector(e.SigSelDomain.DATA,this);this.m_undoManager=e.UndoManager.create(this);this.m_bindingManager=e.DpBindingManager.create(t);t.setEntity(e.ProcessEntity.APPLICATION,this)};e.DfApplication.prototype.getDefaultSyncType=function(){return this.getProcess().getDefaultSyncType()};e.DfApplication.prototype.getXVersion=function(){return this.getProcess().getXVersion()};e.DfApplication.prototype.getBindingManager=function(){return this.m_bindingManager};e.DfApplication.prototype.getHttpExchangeEnhancer=function(){return this.getSession().getHttpExchangeEnhancer()};e.DfApplication.prototype.getUiManager=function(){return this.getUiManagerExt(true)};e.DfApplication.prototype.getUndoManager=function(){return this.m_undoManager};e.DfApplicationContext=function(){};e.DfApplicationContext.prototype=new e.XObjectExt;e.DfApplicationContext.prototype._ff_c="DfApplicationContext";e.DfApplicationContext.prototype.m_application=null;e.DfApplicationContext.prototype.setupApplicationContext=function(e){this.setApplication(e)};e.DfApplicationContext.prototype.releaseObject=function(){this.m_application=null;e.XObjectExt.prototype.releaseObject.call(this)};e.DfApplicationContext.prototype.getLogWriter=function(){var t=this.getSession();if(e.notNull(t)){return t.getLogWriter()}return null};e.DfApplicationContext.prototype.getSession=function(){var t=this.getApplication();return e.isNull(t)?null:t.getSession()};e.DfApplicationContext.prototype.getProcess=function(){var t=this.getApplication();return e.isNull(t)?null:t.getProcess()};e.DfApplicationContext.prototype.getApplication=function(){return e.XWeakReferenceUtil.getHardRef(this.m_application)};e.DfApplicationContext.prototype.setApplication=function(t){this.m_application=e.XWeakReferenceUtil.getWeakRef(t)};e.DfApplicationContext.prototype.toString=function(){return e.isNull(this.m_application)?"":this.m_application.toString()};e.DfApplicationContextHard=function(){};e.DfApplicationContextHard.prototype=new e.XObjectExt;e.DfApplicationContextHard.prototype._ff_c="DfApplicationContextHard";e.DfApplicationContextHard.prototype.m_application=null;e.DfApplicationContextHard.prototype.setupApplicationContext=function(e){this.setApplication(e)};e.DfApplicationContextHard.prototype.releaseObject=function(){this.m_application=null;e.XObjectExt.prototype.releaseObject.call(this)};e.DfApplicationContextHard.prototype.getLogWriter=function(){var t=this.getSession();if(e.notNull(t)){return t.getLogWriter()}return null};e.DfApplicationContextHard.prototype.getSession=function(){var t=this.getApplication();return e.isNull(t)?null:t.getSession()};e.DfApplicationContextHard.prototype.getApplication=function(){return this.m_application};e.DfApplicationContextHard.prototype.setApplication=function(e){this.m_application=e};e.DfApplicationContextHard.prototype.toString=function(){return e.isNull(this.m_application)?"":this.m_application.toString()};e.RepoMountPoint=function(){};e.RepoMountPoint.prototype=new e.DfNameObject;e.RepoMountPoint.prototype._ff_c="RepoMountPoint";e.RepoMountPoint.createConditional=function(t,r,n,i){var o=e.XUri.createFromFilePath(t,i,e.PathFormat.AUTO_DETECT,e.VarResolveMode.DOLLAR,null);if(e.notNull(o)){return e.RepoMountPoint.create(r,n,o)}else{return null}};e.RepoMountPoint.create=function(t,r,n){var i=new e.RepoMountPoint;i.setupExt(t,r,n);return i};e.RepoMountPoint.prototype.m_uri=null;e.RepoMountPoint.prototype.m_type=null;e.RepoMountPoint.prototype.setupExt=function(e,t,r){this._setupInternal(t);this.m_uri=r;this.m_type=e};e.RepoMountPoint.prototype.getUri=function(){return this.m_uri};e.RepoMountPoint.prototype.getMountType=function(){return this.m_type};e.ApplicationSystemOption=function(){};e.ApplicationSystemOption.prototype=new e.XConstant;e.ApplicationSystemOption.prototype._ff_c="ApplicationSystemOption";e.ApplicationSystemOption.NONE=null;e.ApplicationSystemOption.AUTO=null;e.ApplicationSystemOption.PATH=null;e.ApplicationSystemOption.LOCATION_AND_TYPE=null;e.ApplicationSystemOption.staticSetup=function(){e.ApplicationSystemOption.NONE=e.XConstant.setupName(new e.ApplicationSystemOption,"None");e.ApplicationSystemOption.AUTO=e.XConstant.setupName(new e.ApplicationSystemOption,"Auto");e.ApplicationSystemOption.PATH=e.XConstant.setupName(new e.ApplicationSystemOption,"Path");e.ApplicationSystemOption.LOCATION_AND_TYPE=e.XConstant.setupName(new e.ApplicationSystemOption,"LocationAndType")};e.Application=function(){};e.Application.prototype=new e.DfApplication;e.Application.prototype._ff_c="Application";e.Application.create=function(t,r){var n=new e.Application;n.setupApplication(t,r);return n};e.Application.prototype.m_applicationName=null;e.Application.prototype.m_applicationId=null;e.Application.prototype.m_messageManager=null;e.Application.prototype.m_repositoryManager=null;e.Application.prototype.m_connectionPool=null;e.Application.prototype.m_systemLandscape=null;e.Application.prototype.m_uiManager=null;e.Application.prototype.m_sendBottleMessages=0;e.Application.prototype.setupApplication=function(t,r){this.setup();this.setProcessExt(t,false);this.setErrorManager(e.MessageManager.createMessageManagerExt(t));this.m_repositoryManager=e.RepositoryManager.create(this);this.m_applicationId=e.XGuid.getGuid();this.m_connectionPool=e.ConnectionPool.create(t);t.setEntity(e.ProcessEntity.CONNECTION_POOL,this.m_connectionPool)};e.Application.prototype.releaseObject=function(){this.releaseManagedObjects();if(this.isReleased()===false){this.m_connectionPool=e.XObjectExt.release(this.m_connectionPool);this.m_messageManager=e.XObjectExt.release(this.m_messageManager);this.m_systemLandscape=null;this.m_uiManager=null;this.m_repositoryManager=null;this.m_applicationName=null}e.DfApplication.prototype.releaseObject.call(this)};e.Application.prototype.processBooting=e.noSupport;e.Application.prototype.getErrorManager=function(){return this.m_messageManager};e.Application.prototype.setErrorManager=function(e){this.m_messageManager=e};e.Application.prototype.getSystemLandscape=function(){return this.m_systemLandscape};e.Application.prototype.setSystemLandscape=function(t){this.m_systemLandscape=t;var r=this.getProcess();r.setEntity(e.ProcessEntity.SYSTEM_LANDSCAPE,t)};e.Application.prototype.getConnectionPool=function(){return this.m_connectionPool};e.Application.prototype.getConnection=function(e){return this.m_connectionPool.getConnection(e)};e.Application.prototype.getSystemConnect=function(e){return this.m_connectionPool.getSystemConnect(e)};e.Application.prototype.getRepositoryManager=function(){return this.m_repositoryManager};e.Application.prototype.getUiManagerExt=function(t){if(e.isNull(this.m_uiManager)&&t===true){var r=this.getProcess().openSubSystem(e.SubSystemType.GUI);this.m_uiManager=r.getMainApi()}if(e.isNull(this.m_uiManager)){var n=this.getProcess();while(e.notNull(n)&&e.isNull(this.m_uiManager)){this.m_uiManager=n.getSubSystem(e.SubSystemType.GUI);n=n.getParentProcess()}}return this.m_uiManager};e.Application.prototype.setUiManager=function(e){this.m_uiManager=e};e.Application.prototype.getApplicationName=function(){return this.m_applicationName};e.Application.prototype.setApplicationName=function(e){this.m_applicationName=e;var t=this.getProcess();t.setApplicationName(e)};e.Application.prototype.isSapStatisticsEnabled=function(){return this.getSession().isSapStatisticsEnabled()};e.Application.prototype.setSapStatisticsEnabled=function(e){this.getSession().setSapStatisticsEnabled(e)};e.Application.prototype.getUserManager=function(){return this.getProcess().getUserManager()};e.Application.prototype.getSyncManager=function(){return this};e.Application.prototype.receiveMessage=function(t){var r=e.JsonParserFactory.createFromString(t);var n=this.getConnectionPool();var i=r.getListByKey("Connections");for(var o=0;o<i.size();o++){var s=i.getStructureAt(o);var a=s.getStringByKey("SysName");var u=s.getListByKey("Shared");for(var c=0;c<u.size();c++){var p=u.getStructureAt(c);var l=p.getStringByKey("Name");var g=p.getStringByKey("CsrfToken");var y=p.getStringByKey("SessionUrlRewrite");n.setExternalSharedConnection(a,l,g,y)}}};e.Application.prototype.prepareMessage=function(){var t=e.PrFactory.createStructure();t.putString("AppId",this.m_applicationId);t.putString("Time",e.XDateTime.createCurrentLocalDateTime().toIso8601Format());t.putInteger("Number",this.m_sendBottleMessages);var r=this.getConnectionPool();var n=r.getActiveSystems();var i=t.putNewList("Connections");for(var o=0;o<n.size();o++){var s=n.get(o);var a=r.getOpenConnections(s);var u=a.size();var c=i.addNewStructure();c.putString("SysName",s);c.putInteger("OpenConn",u);var p=c.putNewList("Shared");for(var l=0;l<u;l++){var g=a.get(l);if(g.isShared()&&g.useSessionUrlRewrite()&&e.XStringUtils.isNotNullAndNotEmpty(g.getSessionUrlRewrite())){var y=p.addNewStructure();y.putString("Name",g.getName());y.putString("CsrfToken",g.getCsrfToken());y.putString("SessionUrlRewrite",g.getSessionUrlRewrite())}}}var A=e.PrUtils.serialize(t,false,false,0);return A};e.Application.prototype.toString=function(){var t=e.XStringBuffer.create();t.appendLine("Application");if(e.notNull(this.m_messageManager)){t.appendNewLine();t.append(this.m_messageManager.toString())}return t.toString()};e.SubApplication=function(){};e.SubApplication.prototype=new e.DfApplication;e.SubApplication.prototype._ff_c="SubApplication";e.SubApplication.create=function(t,r){var n=new e.SubApplication;n.setupSubApplication(t,r);return n};e.SubApplication.prototype.m_parentApplication=null;e.SubApplication.prototype.m_subUiManager=null;e.SubApplication.prototype.setupSubApplication=function(t,r){e.DfApplication.prototype.setup.call(this);var n=r;if(e.isNull(n)){var i=t.getProcess();n=i.newChildProcess(e.ProcessType.SERVICE)}this.setProcessExt(n,true);this.m_parentApplication=t;this.m_undoManager=e.UndoManager.create(this)};e.SubApplication.prototype.releaseObject=function(){this.releaseManagedObjects();this.m_subUiManager=null;this.m_parentApplication.unregisterSubApplication(this);this.m_parentApplication=null;e.DfApplication.prototype.releaseObject.call(this)};e.SubApplication.prototype.getUserManager=function(){return this.m_parentApplication.getUserManager()};e.SubApplication.prototype.getConnectionPool=function(){return this.m_parentApplication.getConnectionPool()};e.SubApplication.prototype.getConnection=function(e){return this.m_parentApplication.getConnection(e)};e.SubApplication.prototype.getSystemConnect=function(e){return this.m_parentApplication.getSystemConnect(e)};e.SubApplication.prototype.getRepositoryManager=function(){return this.m_parentApplication.getRepositoryManager()};e.SubApplication.prototype.getUiManagerExt=function(t){if(e.isNull(this.m_subUiManager)){var r=this.m_parentApplication.getUiManagerExt(t);this.m_subUiManager=r}return this.m_subUiManager};e.SubApplication.prototype.setUiManager=function(e){this.m_subUiManager=e};e.SubApplication.prototype.setSapStatisticsEnabled=function(e){this.m_parentApplication.setSapStatisticsEnabled(e)};e.SubApplication.prototype.isSapStatisticsEnabled=function(){return this.m_parentApplication.isSapStatisticsEnabled()};e.SubApplication.prototype.setApplicationName=function(e){this.m_parentApplication.setApplicationName(e)};e.SubApplication.prototype.getApplicationName=function(){return this.m_parentApplication.getApplicationName()};e.SubApplication.prototype.setErrorManager=function(e){this.m_parentApplication.setErrorManager(e)};e.SubApplication.prototype.getErrorManager=function(){return this.m_parentApplication.getErrorManager()};e.SubApplication.prototype.setSystemLandscape=function(e){this.m_parentApplication.setSystemLandscape(e)};e.SubApplication.prototype.getSystemLandscape=function(){return this.m_parentApplication.getSystemLandscape()};e.SubApplication.prototype.getSyncManager=function(){return this.m_parentApplication.getSyncManager()};e.SubApplication.prototype.getClientComponent=function(){return this.m_parentApplication.getClientComponent()};e.SubApplication.prototype.getClientVersion=function(){return this.m_parentApplication.getClientVersion()};e.SubApplication.prototype.getClientIdentifier=function(){return this.m_parentApplication.getClientIdentifier()};e.SubApplication.prototype.processBooting=e.noSupport;e.SubApplication.prototype.getUndoManager=function(){return this.m_undoManager};e.DfApplicationProgram=function(){};e.DfApplicationProgram.prototype=new e.DfProgram;e.DfApplicationProgram.prototype._ff_c="DfApplicationProgram";e.DfApplicationProgram.PARAM_TRACE_NAME="TraceName";e.DfApplicationProgram.PARAM_ENABLE_CACHES="EnableCaches";e.DfApplicationProgram.PARAM_SYS_USE_MIRRORS="UseMirrors";e.DfApplicationProgram.prototype.m_releaseApplication=false;e.DfApplicationProgram.prototype.m_application=null;e.DfApplicationProgram.prototype.m_traceName=null;e.DfApplicationProgram.prototype.m_useMirrors=false;e.DfApplicationProgram.prototype.m_masterSystemName=null;e.DfApplicationProgram.prototype.m_systemLandscapePath=null;e.DfApplicationProgram.prototype.m_systemOption=null;e.DfApplicationProgram.prototype.getDefaultContainerType=function(){return e.ProgramContainerType.NONE};e.DfApplicationProgram.prototype.setup=function(){e.DfProgram.prototype.setup.call(this);this.m_useMirrors=false;this.m_masterSystemName="gipsy";this.m_systemOption=e.ApplicationSystemOption.NONE};e.DfApplicationProgram.prototype.releaseObject=function(){this.m_traceName=null;if(this.m_releaseApplication===true){this.m_application=e.XObjectExt.release(this.m_application)}e.DfProgram.prototype.releaseObject.call(this)};e.DfApplicationProgram.prototype.getComponentType=function(){return e.RuntimeComponentType.APPLICATION_PROGRAM};e.DfApplicationProgram.prototype.initializeProgram=function(){e.DfProgram.prototype.initializeProgram.call(this);if(this.isShowHelp()===false){if(this.getApplication()===null){var t=this.getProcess();var r;var n=this.getSystemOption();var i=this.getSystemLandscapeUrl();var o=this.getInitialSystemType();if(n===e.ApplicationSystemOption.LOCATION_AND_TYPE&&e.notNull(o)){r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,e.XVersion.MAX,o,"master",null,null,n,false,null,false);this.setApplicationExt(r.getData(),true);e.XObjectExt.release(r)}else if(n===e.ApplicationSystemOption.PATH&&e.notNull(i)){r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,e.XVersion.MAX,null,null,null,i,e.ApplicationSystemOption.PATH,false,null,false);if(r.hasErrors()){this.log("Error during application initialization");this.log(r.getSummary())}else{this.setApplicationExt(r.getData(),true);var s=this.getApplication().getSystemLandscape();var a=this.getMasterSystemName();if(e.notNull(a)){s.setDefaultSystemName(e.SystemRole.MASTER,a)}if(this.useMirrors()){s.replaceOriginsWithMirror()}}e.XObjectExt.release(r)}var u=this.getApplication();if(e.isNull(u)){r=e.ApplicationFactory.createApplicationExt2(e.SyncType.BLOCKING,null,null,null,t,e.XVersion.MAX,null,null,null,null,e.ApplicationSystemOption.NONE,false,null,false);this.setApplicationExt(r.getData(),true);e.XObjectExt.release(r)}if(e.notNull(u)){if(e.notNull(this.m_traceName)){u.setApplicationName(this.m_traceName);var c=u.getConnectionPool();var p=u.getSystemLandscape().getSystemNames();for(var l=0;l<p.size();l++){var g=e.TraceInfo.create();g.setTraceType(e.TraceType.URL);g.setTraceName(this.m_traceName);c.setTraceInfo(p.get(l),g)}}}}}};e.DfApplicationProgram.prototype.doSetupProgramMetadata=function(t){e.DfProgram.prototype.doSetupProgramMetadata.call(this,t);t.addOption(e.DfApplicationProgram.PARAM_TRACE_NAME,"The trace name","name",e.XValueType.STRING);t.addOption(e.DfApplicationProgram.PARAM_ENABLE_CACHES,"Enables the cache","true|false",e.XValueType.BOOLEAN);t.addOption(e.DfApplicationProgram.PARAM_SYS_USE_MIRRORS,"Using the system mirrors","true|false",e.XValueType.BOOLEAN);t.addOption(e.DfProgram.PARAM_SYS_LANDSCAPE,"The system landscape","true|false",e.XValueType.BOOLEAN)};e.DfApplicationProgram.prototype.evalArguments=function(){e.DfProgram.prototype.evalArguments.call(this);var t=this.getArgumentStructure();this.m_traceName=t.getStringByKeyExt(e.DfApplicationProgram.PARAM_TRACE_NAME,this.m_traceName);this.m_useMirrors=t.getBooleanByKeyExt(e.DfApplicationProgram.PARAM_SYS_USE_MIRRORS,this.m_useMirrors);this.m_systemLandscapePath=t.getStringByKeyExt(e.DfProgram.PARAM_SYS_LANDSCAPE,this.m_systemLandscapePath);if(e.isNull(this.m_systemOption)){if(e.notNull(this.m_systemLandscapePath)){this.m_systemOption=e.ApplicationSystemOption.PATH}else if(this.getInitialSystemType()!==null){this.m_systemOption=e.ApplicationSystemOption.LOCATION_AND_TYPE}else{this.m_systemOption=e.ApplicationSystemOption.NONE}}};e.DfApplicationProgram.prototype.setApplication=function(e){this.setApplicationExt(e,false)};e.DfApplicationProgram.prototype.setApplicationExt=function(t,r){if(e.notNull(t)&&this.getSession()===null){this.setProcess(t.getProcess())}this.m_application=t;this.m_releaseApplication=r};e.DfApplicationProgram.prototype.getApplication=function(){return this.m_application};e.DfApplicationProgram.prototype.getTraceName=function(){return this.m_traceName};e.DfApplicationProgram.prototype.setTraceName=function(e){this.m_traceName=e};e.DfApplicationProgram.prototype.useMirrors=function(){return this.m_useMirrors};e.DfApplicationProgram.prototype.setUseMirrors=function(e){this.m_useMirrors=e};e.DfApplicationProgram.prototype.getMasterSystemName=function(){return this.m_masterSystemName};e.DfApplicationProgram.prototype.setMasterSystemName=function(e){this.m_masterSystemName=e};e.DfApplicationProgram.prototype.getSystemLandscapeUrl=function(){return this.m_systemLandscapePath};e.DfApplicationProgram.prototype.setSystemLandscapeUrl=function(e){this.m_systemLandscapePath=e};e.DfApplicationProgram.prototype.getSystemOption=function(){return this.m_systemOption};e.DfApplicationProgram.prototype.setSystemOption=function(e){this.m_systemOption=e};e.RepoMountType=function(){};e.RepoMountType.prototype=new e.XConstant;e.RepoMountType.prototype._ff_c="RepoMountType";e.RepoMountType.FILE=null;e.RepoMountType.staticSetup=function(){e.RepoMountType.FILE=e.XConstant.setupName(new e.RepoMountType,"File")};e.RepositoryManager=function(){};e.RepositoryManager.prototype=new e.DfApplicationContext;e.RepositoryManager.prototype._ff_c="RepositoryManager";e.RepositoryManager.create=function(t){var r=new e.RepositoryManager;r.setupApplicationContext(t);return r};e.RepositoryManager.prototype.m_location=null;e.RepositoryManager.prototype.setupApplicationContext=function(t){e.DfApplicationContext.prototype.setupApplicationContext.call(this,t)};e.RepositoryManager.prototype.getLocation=function(){return this.m_location};e.RepositoryManager.prototype.setLocation=function(e){this.m_location=e};e.RepositoryManager.prototype.newRpcFunction=function(t){var r=this.getApplication();var n=r.getRepositoryManager();var i=n.getLocation();var o;if(e.isNull(i)){o=e.XUri.createFromUrl(t)}else{o=e.XUri.createFromParentUriAndRelativeUrl(i,t,false)}var s=o.getUrlExt(true,true,true,true,true,true,false,false,false);var a=e.XUri.createFromUrl(s);var u=o.getUrlExt(false,false,false,false,false,false,true,true,true);var c=r.getSystemLandscape();var p=e.XStringUtils.concatenate3("##Tmp#",e.XGuid.getGuid(),"##");c.setSystemByUri(p,a,e.SystemType.GENERIC);var l=r.getConnection(p);var g=l.newRpcFunction(u);var y=g.getRpcRequest();y.setMethod(e.HttpRequestMethod.HTTP_GET);return g};e.UndoManager=function(){};e.UndoManager.prototype=new e.DfApplicationContext;e.UndoManager.prototype._ff_c="UndoManager";e.UndoManager.create=function(t){var r=new e.UndoManager;r.setupApplicationContext(t);t.getSession().registerInterruptStepListener(r,null);r.m_undoStates=e.XListOfString.create();r.m_redoStates=e.XListOfString.create();r.m_listeners=e.XList.create();return r};e.UndoManager.prototype.m_undoStates=null;e.UndoManager.prototype.m_redoStates=null;e.UndoManager.prototype.m_listeners=null;e.UndoManager.prototype.stackSize=0;e.UndoManager.prototype.processUndo=function(t,r,n){var i=null;var o=this.m_undoStates.size();if(o>1){this.m_redoStates.add(this.m_undoStates.removeAt(o-1));i=this.m_undoStates.get(o-2)}this.logStates(i);var s=e.UndoRedoAction.createAndRun(t,this,r,n,i,this.getApplication().getOlapEnvironment());this.notifyListener();return s};e.UndoManager.prototype.processRedo=function(t,r,n){var i=null;var o=this.m_redoStates.size();if(o>0){i=this.m_redoStates.removeAt(o-1);this.m_undoStates.add(i)}this.logStates(i);var s=e.UndoRedoAction.createAndRun(t,this,r,n,i,this.getApplication().getOlapEnvironment());this.notifyListener();return s};e.UndoManager.prototype.getAvailableUndoStepCount=function(){return e.XMath.max(this.m_undoStates.size()-1,0)};e.UndoManager.prototype.getAvailableRedoStepCount=function(){return this.m_redoStates.size()};e.UndoManager.prototype.registerUndoManagerListener=function(e){this.m_listeners.add(e)};e.UndoManager.prototype.unregisterUndoManagerListener=function(e){this.m_listeners.removeElement(e)};e.UndoManager.prototype.onInterruptStepStart=function(e,t){if(this.m_undoStates.isEmpty()){this.onInterruptStepEnd(e,t)}else{var r=this.m_undoStates.get(this.m_undoStates.size()-1);this.getApplication().getOlapEnvironment().getDocumentStateManager().updateDocumentState(r)}};e.UndoManager.prototype.onInterruptStepEnd=function(e,t){var r=this.getApplication().getOlapEnvironment().getDocumentStateManager().recordDocumentState();this.clear(this.m_redoStates);this.m_undoStates.add(r);this.logStates(r);this.updateStack();this.notifyListener()};e.UndoManager.prototype.reset=function(){this.clear(this.m_redoStates);this.clear(this.m_undoStates)};e.UndoManager.prototype.setMaxAvailableSteps=function(e){this.stackSize=e;this.updateStack()};e.UndoManager.prototype.updateStack=function(){if(this.stackSize>0){while(this.m_undoStates.size()-1>this.stackSize){var e=this.m_undoStates.removeAt(0);this.getApplication().getOlapEnvironment().getDocumentStateManager().clearDocumentState(e)}}};e.UndoManager.prototype.logStates=function(t){this.getSession().getLogger().log(e.XStringUtils.concatenate2("UndoManager: new currentState ->",t))};e.UndoManager.prototype.notifyListener=function(){var e=this.m_listeners.size();for(var t=0;t<e;t++){this.m_listeners.get(t).undoManagerStateChanged()}};e.UndoManager.prototype.clear=function(e){var t=e.getIterator();while(t.hasNext()){this.getApplication().getOlapEnvironment().getDocumentStateManager().clearDocumentState(t.next())}e.clear()};e.UndoManager.prototype.dump=function(){var t=this.getApplication().getOlapEnvironment().getDocumentStateManager();var r=e.PrFactory.createStructure();var n=r.putNewList("UndoStates");var i=this.m_undoStates.size();for(var o=i-1;o>=0;o--){n.add(t.dumpState(this.m_undoStates.get(o)))}var s=r.putNewList("RedoStates");var a=this.m_redoStates.size();for(var u=a-1;u>=0;u--){s.add(t.dumpState(this.m_redoStates.get(u)))}return e.PrUtils.serialize(r,false,true,2)};e.ApplicationInitializeAction=function(){};e.ApplicationInitializeAction.prototype=new e.SyncAction;e.ApplicationInitializeAction.prototype._ff_c="ApplicationInitializeAction";e.ApplicationInitializeAction.create=function(t){var r=new e.ApplicationInitializeAction;r.setupActionExt(t,null,null,null,e.XVersion.MAX,null,null,null,null,e.ApplicationSystemOption.AUTO,true);return r};e.ApplicationInitializeAction.prototype.m_application=null;e.ApplicationInitializeAction.prototype.m_xVersion=0;e.ApplicationInitializeAction.prototype.m_systemLandscapeUrl=null;e.ApplicationInitializeAction.prototype.m_systemName=null;e.ApplicationInitializeAction.prototype.m_systemUri=null;e.ApplicationInitializeAction.prototype.m_systemType=null;e.ApplicationInitializeAction.prototype.m_systemOption=null;e.ApplicationInitializeAction.prototype.m_useKernelBoot=false;e.ApplicationInitializeAction.prototype.m_kernel=null;e.ApplicationInitializeAction.prototype.m_programName=null;e.ApplicationInitializeAction.prototype.m_useSingleKernel=false;e.ApplicationInitializeAction.prototype.m_kernelBooter=null;e.ApplicationInitializeAction.prototype.setupActionExt=function(t,r,n,i,o,s,a,u,c,p,l){this.setupAction(t,r,n,i);this.m_xVersion=o;this.m_systemLandscapeUrl=c;this.m_systemName=a;this.m_systemUri=u;this.m_systemType=s;this.m_systemOption=p;this.m_useKernelBoot=l;this.m_programName=e.StandardAppProgram.DEFAULT_PROGRAM_NAME;this.m_kernelBooter=e.KernelBoot.create()};e.ApplicationInitializeAction.prototype.releaseObject=function(){this.m_systemName=null;this.m_systemUri=null;this.m_systemType=null;this.m_application=null;this.m_xVersion=0;this.m_systemOption=null;this.m_kernelBooter=null;e.SyncAction.prototype.releaseObject.call(this)};e.ApplicationInitializeAction.prototype.processSynchronization=function(t){var r;var n=this.getActionContext();if(this.m_useKernelBoot===true){if(e.XStringUtils.isNotNullAndNotEmpty(this.m_programName)){this.m_kernelBooter.addStartConfig(this.m_programName)}this.m_kernelBooter.setDefaultSyncType(t);this.m_kernelBooter.setXVersion(this.m_xVersion);this.m_kernelBooter.addProgramStartedListener(this);this.m_kernelBooter.setKernel(this.m_kernel);if(e.isNull(n)){if(e.notNull(this.m_systemLandscapeUrl)){this.m_kernelBooter.setSystemLandscapeUrl(this.m_systemLandscapeUrl)}}else{var i=n.getKernel();this.m_kernelBooter.setKernel(i)}this.m_kernelBooter.runFull();r=t===e.SyncType.NON_BLOCKING}else{if(e.isNull(n)){n=e.DefaultSession.createWithVersion(this.m_xVersion);if(e.notNull(t)){n.setDefaultSyncType(t)}}this.m_application=e.Application.create(n,n.getXVersion());if(this.m_systemOption!==e.ApplicationSystemOption.NONE){var o=n.getSystemLandscape();if(e.isNull(o)){var s=n.getEnvironment();if(e.isNull(this.m_systemLandscapeUrl)){this.m_systemLandscapeUrl=s.getVariable(e.XEnvironmentConstants.SYSTEM_LANDSCAPE_URI)}if(e.isNull(this.m_systemUri)&&e.isNull(this.m_systemName)){var a=s.getVariable(e.XEnvironmentConstants.FIREFLY_MASTER_SYSTEM_URI);if(e.XStringUtils.isNotNullAndNotEmpty(a)){this.m_systemUri=e.XUri.createFromUrl(a);if(e.XStringUtils.isNullOrEmpty(this.m_systemName)){this.m_systemName="master"}}}}}if(this.m_systemOption!==e.ApplicationSystemOption.NONE&&e.XStringUtils.isNotNullAndNotEmpty(this.m_systemLandscapeUrl)){var u=e.StandaloneSystemLandscape.create(this.m_application);this.m_application.setSystemLandscape(u);var c=e.XUri.createFromFilePath(n,this.m_systemLandscapeUrl,e.PathFormat.AUTO_DETECT,e.VarResolveMode.DOLLAR,e.ProtocolType.FILE);e.SystemLandscapeLoadAction.createAndRun(t,this,null,this.m_application,u,this.m_application.getConnectionPool(),c);r=true}else{this.configureLandscape();r=false}}return r};e.ApplicationInitializeAction.prototype.onLandscapeNodeLoaded=function(e,t,r){this.addAllMessages(e);this.configureLandscape()};e.ApplicationInitializeAction.prototype.onProgramStarted=function(e,t,r){this.addAllMessages(e);if(e.isValid()){var n=t.getProcess();this.m_application=n.getApplication()}this.configureLandscape()};e.ApplicationInitializeAction.prototype.configureLandscape=function(){if(e.notNull(this.m_application)){var t=e.NetworkEnv.getLocation();var r=this.m_application.getSystemLandscape();if(this.m_systemOption!==e.ApplicationSystemOption.NONE&&e.notNull(r)||e.notNull(this.m_systemUri)||e.notNull(t)&&e.notNull(this.m_systemType)){if(e.isNull(r)){r=e.StandaloneSystemLandscape.create(this.m_application);this.m_application.setSystemLandscape(r)}if(r.getMasterSystemName()===null){var n=this.m_systemName;if(e.isNull(n)){n="master"}if(e.notNull(this.m_systemUri)){r.setSystemByUri(n,this.m_systemUri,null)}else if(e.notNull(t)&&e.notNull(this.m_systemType)){var i=r.createSystem();i.setSystemType(this.m_systemType);var o=t.getScheme();if(e.notNull(o)){if(e.XString.startsWith(o,"https")){i.setProtocolType(e.ProtocolType.HTTPS)}else{i.setProtocolType(e.ProtocolType.HTTP)}}i.setSystemName(n);i.setSystemText(n);i.setHost(t.getHost());i.setPort(t.getPort());r.setSystemByDescription(i)}else{var s=r.getSystemNames();if(s.size()===1){n=s.get(0)}else{n=null}}if(e.notNull(n)){r.setMasterSystemName(n)}}}else{var a=this.m_application.getProcess().getSystemLandscape();this.m_application.setSystemLandscape(a)}this.setData(this.m_application)}this.endSync()};e.ApplicationInitializeAction.prototype.callListener=function(e,t,r,n){t.onApplicationReady(e,r,n)};e.ApplicationInitializeAction.prototype.registerListener=function(t,r){if(e.notNull(t)){this.attachListener(t,e.ListenerType.SPECIFIC,r)}};e.ApplicationInitializeAction.prototype.setProcess=function(e){this.setActionContext(e);this.setSession(e)};e.ApplicationInitializeAction.prototype.getProcess=function(){return this.getActionContext()};e.ApplicationInitializeAction.prototype.setXVersion=function(e){this.m_xVersion=e};e.ApplicationInitializeAction.prototype.getXVersion=function(){return this.m_xVersion};e.ApplicationInitializeAction.prototype.setSystemType=function(e){this.m_systemType=e};e.ApplicationInitializeAction.prototype.getSystemType=function(){return this.m_systemType};e.ApplicationInitializeAction.prototype.setSystemName=function(e){this.m_systemName=e};e.ApplicationInitializeAction.prototype.getSystemName=function(){return this.m_systemName};e.ApplicationInitializeAction.prototype.setSystemUri=function(e){this.m_systemUri=e};e.ApplicationInitializeAction.prototype.getSystemUri=function(){return this.m_systemUri};e.ApplicationInitializeAction.prototype.setSystemLandscapeUrl=function(e){this.m_systemLandscapeUrl=e};e.ApplicationInitializeAction.prototype.getSystemLandscapeUrl=function(){return this.m_systemLandscapeUrl};e.ApplicationInitializeAction.prototype.getSystemOption=function(){return this.m_systemOption};e.ApplicationInitializeAction.prototype.setSystemOption=function(e){this.m_systemOption=e};e.ApplicationInitializeAction.prototype.isUsingKernelBoot=function(){return this.m_useKernelBoot};e.ApplicationInitializeAction.prototype.setUseKernelBoot=function(e){this.m_useKernelBoot=e};e.ApplicationInitializeAction.prototype.setKernel=function(e){this.m_kernel=e};e.ApplicationInitializeAction.prototype.getKernel=function(){return this.m_kernel};e.ApplicationInitializeAction.prototype.setProgramName=function(e){this.m_programName=e};e.ApplicationInitializeAction.prototype.getProgramName=function(){return this.m_programName};e.ApplicationInitializeAction.prototype.setUseSingleKernel=function(e){this.m_useSingleKernel=e};e.ApplicationInitializeAction.prototype.useSingleKernel=function(){return this.m_useSingleKernel};e.ApplicationInitializeAction.prototype.setKernelReadyConsumer=function(e){this.m_kernelBooter.setKernelReadyConsumer(e)};e.ApplicationInitializeAction.prototype.setEnvironmentVariable=function(e,t){this.m_kernelBooter.setEnvironmentVariable(e,t)};e.ApplicationInitializeAction.prototype.addProgramStartedListener=function(e){this.m_kernelBooter.addProgramStartedListener(e)};e.ApplicationInitializeAction.prototype.setSccLocationId=function(e){this.m_kernelBooter.setSccLocationId(e)};e.ApplicationInitializeAction.prototype.getSccLocationId=function(){return this.m_kernelBooter.getSccLocationId()};e.ApplicationInitializeAction.prototype.doMaxDomainRelaxation=function(){this.m_kernelBooter.doMaxDomainRelaxation()};e.ApplicationInitializeAction.prototype.setWebdispatcherTemplate=function(e){this.m_kernelBooter.setWebdispatcherTemplate(e)};e.ApplicationInitializeAction.prototype.getWebdispatcherTemplate=function(){return this.m_kernelBooter.getWebdispatcherTemplate()};e.ApplicationInitializeAction.prototype.setProxyHost=function(e){this.m_kernelBooter.setProxyHost(e)};e.ApplicationInitializeAction.prototype.getProxyHost=function(){return this.m_kernelBooter.getProxyHost()};e.ApplicationInitializeAction.prototype.getProxyAuthorization=function(){return this.m_kernelBooter.getProxyAuthorization()};e.ApplicationInitializeAction.prototype.setProxyPort=function(e){this.m_kernelBooter.setProxyPort(e)};e.ApplicationInitializeAction.prototype.getProxyPort=function(){return this.m_kernelBooter.getProxyPort()};e.ApplicationInitializeAction.prototype.setProxyType=function(e){this.m_kernelBooter.setProxyType(e)};e.ApplicationInitializeAction.prototype.getProxyType=function(){return this.m_kernelBooter.getProxyType()};e.ApplicationInitializeAction.prototype.setProxyAuthorization=function(e){this.m_kernelBooter.setProxyAuthorization(e)};e.ApplicationInitializeAction.prototype.setProxyHttpHeader=function(e,t){this.m_kernelBooter.setProxyHttpHeader(e,t)};e.ApplicationInitializeAction.prototype.getProxyHttpHeaders=function(){return this.m_kernelBooter.getProxyHttpHeaders()};e.ApplicationInitializeAction.prototype.addExcludeProxyByUrl=function(e){this.m_kernelBooter.addExcludeProxyByUrl(e)};e.ApplicationInitializeAction.prototype.setNativeAnchorObject=function(e){this.m_kernelBooter.setNativeAnchorObject(e)};e.ApplicationInitializeAction.prototype.getNativeAnchorObject=function(){return this.m_kernelBooter.getNativeAnchorObject()};e.ApplicationInitializeAction.prototype.setNativeAnchorId=function(e){this.m_kernelBooter.setNativeAnchorId(e)};e.ApplicationInitializeAction.prototype.getNativeAnchorId=function(){return this.m_kernelBooter.getNativeAnchorId()};e.ApplicationInitializeAction.prototype.getDefaultSyncType=function(){return this.m_kernelBooter.getDefaultSyncType()};e.ApplicationInitializeAction.prototype.setDefaultSyncType=function(e){this.m_kernelBooter.setDefaultSyncType(e)};e.ApplicationInitializeAction.prototype.setModuleLoadUrl=function(e,t){this.m_kernelBooter.setModuleLoadUrl(e,t)};e.ApplicationInitializeAction.prototype.addModule=function(e){this.m_kernelBooter.addModule(e)};e.ApplicationInitializeAction.prototype.setHasPersistentState=function(e){this.m_kernelBooter.setHasPersistentState(e)};e.ApplicationInitializeAction.prototype.addStartConfig=function(e){return this.m_kernelBooter.addStartConfig(e)};e.ApplicationInitializeAction.prototype.setInitialSystemType=function(e){this.m_kernelBooter.setInitialSystemType(e)};e.ApplicationInitializeAction.prototype.setArgument=function(e,t){this.m_kernelBooter.setArgument(e,t)};e.ApplicationInitializeAction.prototype.setBooleanArgument=function(e,t){this.m_kernelBooter.setBooleanArgument(e,t)};e.ApplicationInitializeAction.prototype.setObjectArgument=function(e,t){this.m_kernelBooter.setObjectArgument(e,t)};e.ApplicationInitializeAction.prototype.getCurrentStartConfig=function(){return this.m_kernelBooter.getCurrentStartConfig()};e.ApplicationInitializeAction.prototype.runFull=e.noSupport;e.ApplicationInitializeAction.prototype.setUseSingletonKernel=function(e){this.m_kernelBooter.setUseSingletonKernel(e)};e.ApplicationInitializeAction.prototype.isSingletonKernelUsed=function(){return this.m_kernelBooter.isSingletonKernelUsed()};e.DfShellProgramWithApplication=function(){};e.DfShellProgramWithApplication.prototype=new e.DfApplicationProgram;e.DfShellProgramWithApplication.prototype._ff_c="DfShellProgramWithApplication";e.DfShellProgramWithApplication.prototype.getDefaultContainerType=function(){return e.ProgramContainerType.CONSOLE};e.DfShellProgramWithApplication.prototype.releaseObject=function(){e.DfApplicationProgram.prototype.releaseObject.call(this)};e.DfShellProgramWithApplication.prototype.getComponentType=function(){return e.XComponentType.PROGRAM};e.DragonflyAppProgram=function(){};e.DragonflyAppProgram.prototype=new e.DfApplicationProgram;e.DragonflyAppProgram.prototype._ff_c="DragonflyAppProgram";e.DragonflyAppProgram.DEFAULT_PROGRAM_NAME="DragonflyAppProgram";e.DragonflyAppProgram.prototype.newProgram=function(){var t=new e.DragonflyAppProgram;t.setup();return t};e.DragonflyAppProgram.prototype.getProgramName=function(){return e.DragonflyAppProgram.DEFAULT_PROGRAM_NAME};e.DragonflyAppProgram.prototype.runProcess=function(){return true};e.OrcaAppProgram=function(){};e.OrcaAppProgram.prototype=new e.DfApplicationProgram;e.OrcaAppProgram.prototype._ff_c="OrcaAppProgram";e.OrcaAppProgram.DEFAULT_PROGRAM_NAME="OrcaAppProgram";e.OrcaAppProgram.prototype.newProgram=function(){var t=new e.OrcaAppProgram;t.setup();return t};e.OrcaAppProgram.prototype.getProgramName=function(){return e.OrcaAppProgram.DEFAULT_PROGRAM_NAME};e.OrcaAppProgram.prototype.runProcess=function(){var t=this.getProcess();var r=t.getKernel();var n=r.getSubSystemContainer(e.SubSystemType.CREDENTIALS_PROVIDER);var i=n.getBootstrapSubSystem();var o=i.getMainApi();t.setEntity(e.ProcessEntity.CREDENTIALS_PROVIDER,o);return true};e.OrcaLiteViewerAppProgram=function(){};e.OrcaLiteViewerAppProgram.prototype=new e.DfApplicationProgram;e.OrcaLiteViewerAppProgram.prototype._ff_c="OrcaLiteViewerAppProgram";e.OrcaLiteViewerAppProgram.DEFAULT_PROGRAM_NAME="OrcaLiteViewerAppProgram";e.OrcaLiteViewerAppProgram.prototype.newProgram=function(){var t=new e.OrcaLiteViewerAppProgram;t.setup();return t};e.OrcaLiteViewerAppProgram.prototype.getProgramName=function(){return e.OrcaLiteViewerAppProgram.DEFAULT_PROGRAM_NAME};e.OrcaLiteViewerAppProgram.prototype.runProcess=function(){var t=this.getProcess();var r=t.getKernel();var n=r.getSubSystemContainer(e.SubSystemType.CREDENTIALS_PROVIDER_LITE);var i=n.getMainApi();t.setEntity(e.ProcessEntity.CREDENTIALS_PROVIDER,i);return true};e.StandardAppProgram=function(){};e.StandardAppProgram.prototype=new e.DfApplicationProgram;e.StandardAppProgram.prototype._ff_c="StandardAppProgram";e.StandardAppProgram.DEFAULT_PROGRAM_NAME="StandardAppProgram";e.StandardAppProgram.prototype.newProgram=function(){var t=new e.StandardAppProgram;t.setup();return t};e.StandardAppProgram.prototype.getProgramName=function(){return e.StandardAppProgram.DEFAULT_PROGRAM_NAME};e.StandardAppProgram.prototype.runProcess=function(){return true};e.UndoRedoAction=function(){};e.UndoRedoAction.prototype=new e.SyncAction;e.UndoRedoAction.prototype._ff_c="UndoRedoAction";e.UndoRedoAction.createAndRun=function(t,r,n,i,o,s){var a=new e.UndoRedoAction;a.m_stateId=o;a.m_document=s;a.setupActionAndRun(t,n,i,r);return a};e.UndoRedoAction.prototype.m_stateId=null;e.UndoRedoAction.prototype.m_document=null;e.UndoRedoAction.prototype.processSynchronization=function(t){if(e.isNull(this.m_stateId)){this.addError(1,"Undo not possible");return false}else{var r=this.m_document.getDocumentStateManager().applyDocumentState(t,this,null,this.m_stateId);if(e.isNull(r)){this.addError(1e3,"Undo failed");this.endSync();return false}}return true};e.UndoRedoAction.prototype.callListener=function(e,t,r,n){t.undoRedoActionFinished(e,r,n)};e.UndoRedoAction.prototype.documentStateApplied=function(e,t,r){if(e.hasErrors()){this.addAllMessages(e)}this.setData(e.getData());this.endSync()};e.RuntimeComponentType=function(){};e.RuntimeComponentType.prototype=new e.XComponentType;e.RuntimeComponentType.prototype._ff_c="RuntimeComponentType";e.RuntimeComponentType.APPLICATION=null;e.RuntimeComponentType.SUB_APPLICATION=null;e.RuntimeComponentType.SERVICE_DATA_PROVIDER=null;e.RuntimeComponentType.APPLICATION_PROGRAM=null;e.RuntimeComponentType.staticSetupRuntimeComponentTypes=function(){e.RuntimeComponentType.APPLICATION=e.RuntimeComponentType.createRuntimeType("Application",e.XComponentType._ROOT);e.RuntimeComponentType.SUB_APPLICATION=e.RuntimeComponentType.createRuntimeType("SubApplication",e.XComponentType._ROOT);e.RuntimeComponentType.SERVICE_DATA_PROVIDER=e.RuntimeComponentType.createRuntimeType("ServiceDataProvider",e.IoComponentType.DATA_PROVIDER);e.RuntimeComponentType.APPLICATION_PROGRAM=e.RuntimeComponentType.createRuntimeType("ApplicationProgram",e.XComponentType.PROGRAM)};e.RuntimeComponentType.createRuntimeType=function(t,r){var n=new e.RuntimeComponentType;if(e.isNull(r)){n.setupExt(t,e.XComponentType._ROOT)}else{n.setupExt(t,r)}return n};e.DfService=function(){};e.DfService.prototype=new e.SyncActionExt;e.DfService.prototype._ff_c="DfService";e.DfService.prototype.m_connectionContainer=null;e.DfService.prototype.m_isInRelease=false;e.DfService.prototype.m_serviceConfig=null;e.DfService.prototype.m_application=null;e.DfService.prototype.setupService=function(e){this.setupAction(null,null,null,e);this.m_serviceConfig=e;this.m_application=e.getApplication();if(e.isSystemBoundService()){this.setConnection(e.getConnectionContainer())}this.registerServiceAtApplication()};e.DfService.prototype.releaseObject=function(){if(!this.m_isInRelease){this.m_isInRelease=true;this.unregisterServiceAtApplication();this.m_serviceConfig=e.XObjectExt.release(this.m_serviceConfig);this.m_connectionContainer=null;this.m_application=null;e.SyncActionExt.prototype.releaseObject.call(this)}};e.DfService.prototype.processInitialization=function(e,t,r){return this.processSyncAction(e,t,r)};e.DfService.prototype.callListener=function(e,t,r,n){t.onServiceInitialized(e,r,n)};e.DfService.prototype.requiresInitialization=function(){return true};e.DfService.prototype.registerServiceAtApplication=function(){var t=this.getApplication();if(e.isNull(t)){return}t.registerService(this)};e.DfService.prototype.unregisterServiceAtApplication=function(){var t=this.getApplication();if(e.notNull(t)){t.unregisterService(this)}};e.DfService.prototype.isServiceConfigMatching=function(e,t,r){return true};e.DfService.prototype.getConnection=function(){return e.XWeakReferenceUtil.getHardRef(this.m_connectionContainer)};e.DfService.prototype.setConnection=function(t){this.m_connectionContainer=e.XWeakReferenceUtil.getWeakRef(t)};e.DfService.prototype.getServiceConfig=function(){return this.m_serviceConfig};e.DfService.prototype.getApplication=function(){return this.m_application};e.DfServiceConfig=function(){};e.DfServiceConfig.prototype=new e.SyncActionExt;e.DfServiceConfig.prototype._ff_c="DfServiceConfig";e.DfServiceConfig.prototype.m_application=null;e.DfServiceConfig.prototype.m_name=null;e.DfServiceConfig.prototype.m_connectionContainer=null;e.DfServiceConfig.prototype.m_usePrivateConnection=false;e.DfServiceConfig.prototype.m_connectionName=null;e.DfServiceConfig.prototype.m_syncTypeForInitialization=null;e.DfServiceConfig.prototype.m_serverMetadata=null;e.DfServiceConfig.prototype.m_serviceType=null;e.DfServiceConfig.prototype.m_systemName=null;e.DfServiceConfig.prototype.m_requestTimeZone=null;e.DfServiceConfig.prototype.m_serviceTemporary=null;e.DfServiceConfig.prototype.m_isInRelease=false;e.DfServiceConfig.prototype.m_tagging=null;e.DfServiceConfig.prototype.m_useAsDataProvider=false;e.DfServiceConfig.prototype.setupConfig=function(t){var r=null;this.setupAction(null,r,null,t);this.m_application=t;this.setAutoConvertDataToWeakRef(true);this.m_tagging=e.XHashMapOfStringByString.create();t.registerDataProvider(this)};e.DfServiceConfig.prototype.releaseObject=function(){if(!this.m_isInRelease){this.m_isInRelease=true;this.m_application.unregisterDataProvider(this);if(this.m_useAsDataProvider){var t=this.getData();t=e.XObjectExt.release(t);this.setData(t)}this.m_application=null;this.m_tagging=null;this.m_connectionContainer=null;this.m_connectionName=null;this.m_serverMetadata=null;this.m_serviceTemporary=e.XObjectExt.release(this.m_serviceTemporary);this.m_serviceType=null;this.m_syncTypeForInitialization=null;this.m_systemName=null;this.m_requestTimeZone=null;e.SyncActionExt.prototype.releaseObject.call(this)}};e.DfServiceConfig.prototype.copyFromInternal=function(e,t){var r=e;this.m_systemName=r.getSystemName();this.m_application=r.getApplication();this.m_requestTimeZone=r.getRequestTimeZone();this.m_useAsDataProvider=r.m_useAsDataProvider;this.m_tagging=r.m_tagging.createMapOfStringByStringCopy();this.m_syncTypeForInitialization=r.m_syncTypeForInitialization;this.m_serviceType=r.m_serviceType;this.m_connectionContainer=r.m_connectionContainer;this.m_connectionName=r.m_connectionName};e.DfServiceConfig.prototype.getComponentType=function(){return e.RuntimeComponentType.SERVICE_DATA_PROVIDER};e.DfServiceConfig.prototype.getName=function(){return this.m_name};e.DfServiceConfig.prototype.setName=function(e){this.m_name=e};e.DfServiceConfig.prototype.getDataProviderName=function(){return this.m_name};e.DfServiceConfig.prototype.setDataProviderName=function(e){this.m_name=e};e.DfServiceConfig.prototype.getTagging=function(){return this.m_tagging};e.DfServiceConfig.prototype.processSynchronization=function(t){this.m_syncTypeForInitialization=t;this.prepareDefinition();if(this.isSystemBoundService()){var r=this.getSystemDescription();if(e.isNull(r)){this.addError(0,e.XStringUtils.concatenate2("Cannot find system description: ",this.getSystemName()));return false}if(e.isNull(this.m_connectionContainer)){var n=this.getActionContext().getConnectionPool();this.m_connectionContainer=e.XWeakReferenceUtil.getWeakRef(n.getConnectionExt(r.getSystemName(),this.m_usePrivateConnection,this.m_connectionName))}var i=this.getConnectionContainer();if(t===e.SyncType.BLOCKING){var o=i.getSystemConnect().getServerMetadataExt(t,null,null);this.onServerMetadataLoaded(o,o.getData(),null)}else{i.getSystemConnect().getServerMetadataExt(t,this,null)}}else{this.onServerMetadataLoaded(null,null,null)}return true};e.DfServiceConfig.prototype.onServerMetadataLoaded=function(t,r,n){this.addAllMessages(t);this.m_serverMetadata=t;if(this.isSystemBoundService()&&this.m_serverMetadata.hasErrors()){this.endSync();return}var i=this.m_syncTypeForInitialization;this.m_syncTypeForInitialization=null;var o=this.getServiceTypeInfo();var s=e.isNull(o)?null:o.getServiceReferenceName();this.m_serviceTemporary=this.getMatchingServiceForServiceName(s);if(e.isNull(this.m_serviceTemporary)){this.addError(e.ErrorCodes.SERVICE_NOT_FOUND,s);this.endSync();return}if(this.m_serviceTemporary.requiresInitialization()){var a=this.m_serviceTemporary.processInitialization(i,this,null);if(e.isNull(a)){this.setDataFromService(this.m_serviceTemporary);this.endSync()}}else{this.setDataFromService(this.m_serviceTemporary);this.endSync()}};e.DfServiceConfig.prototype.onServiceInitialized=function(e,t,r){this.addAllMessages(e);if(e.isValid()){this.setDataFromService(this.m_serviceTemporary)}this.endSync()};e.DfServiceConfig.prototype.endSync=function(){this.m_serviceTemporary=null;e.SyncActionExt.prototype.endSync.call(this)};e.DfServiceConfig.prototype.getMatchingServiceForServiceName=function(t){return e.ServiceUtils.getMatchingService(this,t,this)};e.DfServiceConfig.prototype.hasSystemNameSet=function(){return e.notNull(this.m_systemName)};e.DfServiceConfig.prototype.getSystemName=function(){if(e.isNull(this.m_systemName)){this.m_systemName=this.getApplication().getSystemLandscape().getMasterSystemName()}return this.m_systemName};e.DfServiceConfig.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType()};e.DfServiceConfig.prototype.setSystemName=function(e){this.m_systemName=e};e.DfServiceConfig.prototype.isSystemBoundService=function(){return true};e.DfServiceConfig.prototype.getServiceTypeInfo=function(){return this.m_serviceType};e.DfServiceConfig.prototype.setServiceTypeInfo=function(e){this.m_serviceType=e};e.DfServiceConfig.prototype.getApplication=function(){return this.m_application};e.DfServiceConfig.prototype.getSystemDescription=function(){var t=this.getActionContext();var r=t.getSystemLandscape();if(e.isNull(r)){return null}var n=this.getSystemName();if(e.isNull(n)){return r.getMasterSystem()}return r.getSystemDescription(n)};e.DfServiceConfig.prototype.processSyncAction=function(t,r,n){if(this.getSyncState().isInSync()){this.resetSyncState()}return e.SyncActionExt.prototype.processSyncAction.call(this,t,r,n)};e.DfServiceConfig.prototype.setConnectionContainer=function(t){this.m_connectionContainer=e.XWeakReferenceUtil.getWeakRef(t)};e.DfServiceConfig.prototype.getConnectionContainer=function(){return e.XWeakReferenceUtil.getHardRef(this.m_connectionContainer)};e.DfServiceConfig.prototype.setConnectionName=function(e){this.m_connectionName=e};e.DfServiceConfig.prototype.getConnectionName=function(){return this.m_connectionName};e.DfServiceConfig.prototype.usePrivateConnection=function(e){this.m_usePrivateConnection=e};e.DfServiceConfig.prototype.hasPrivateConnection=function(){return this.m_usePrivateConnection};e.DfServiceConfig.prototype.setUseAsDataProvider=function(e){this.m_useAsDataProvider=e;this.setAutoConvertDataToWeakRef(!e)};e.DfServiceConfig.prototype.isDataProviderUsage=function(){return this.m_useAsDataProvider};e.DfServiceConfig.prototype.prepareDefinition=function(){};e.DfServiceConfig.prototype.setRequestTimeZone=function(e){this.m_requestTimeZone=e};e.DfServiceConfig.prototype.isRequestTimeZoneSet=function(){return e.notNull(this.m_requestTimeZone)};e.DfServiceConfig.prototype.getRequestTimeZone=function(){return this.m_requestTimeZone};e.DfServiceConfig.prototype.setDefaultTimeZone=function(){this.m_requestTimeZone=e.XTimeZone.getCurrentTimeZoneString()};e.DfServiceConfigClassic=function(){};e.DfServiceConfigClassic.prototype=new e.DfServiceConfig;e.DfServiceConfigClassic.prototype._ff_c="DfServiceConfigClassic";e.DfServiceConfigClassic.prototype.processServiceCreation=function(e,t,r){return this.processSyncAction(e,t,r)};e.DfServiceConfigClassic.prototype.callListener=function(e,t,r,n){var i=t;i.onServiceCreation(e,r,n)};e.DfServiceConfigClassic.prototype.setDataFromService=function(e){this.setData(e)};e.RuntimeModule=function(){};e.RuntimeModule.prototype=new e.DfModule;e.RuntimeModule.prototype._ff_c="RuntimeModule";e.RuntimeModule.LISTENER_SERVICE_INCUBATOR=null;e.RuntimeModule.LISTENER_SERVER_METADATA_VALID=null;e.RuntimeModule.XS_REPOSITORY="REPOSITORY";e.RuntimeModule.s_module=null;e.RuntimeModule.getInstance=function(){if(e.isNull(e.RuntimeModule.s_module)){e.DfModule.checkInitialized(e.IoExtModule.getInstance());e.DfModule.checkInitialized(e.KernelImplModule.getInstance());e.DfModule.checkInitialized(e.KernelNativeModule.getInstance());e.DfModule.checkInitialized(e.BindingModule.getInstance());e.RuntimeModule.s_module=e.DfModule.startExt(new e.RuntimeModule);var t=e.RegistrationService.getInstance();e.RuntimeModule.LISTENER_SERVICE_INCUBATOR=e.XStringValue.create("IServiceCreationListener");e.RuntimeModule.LISTENER_SERVER_METADATA_VALID=e.XStringValue.create("IServerMetadataListener");e.RuntimeComponentType.staticSetupRuntimeComponentTypes();e.OlapEnvironmentFactory.staticSetup();e.RepoMountType.staticSetup();e.ApplicationSystemOption.staticSetup();e.RpcHttpFunctionFactory.staticSetup();e.BatchRequestManagerInAFactory.staticSetupBatchInAFactory();e.InAMergeProcessorSetupInitiator.staticSetup();e.NestedBatchRequestDecoratorProvider.staticSetup();t.addReference(e.BatchRequestDecoratorFactory.BATCH_REQUEST_DECORATOR_PROVIDER,e.NestedBatchRequestDecoratorProvider.CLAZZ);e.DsrPassportFactory.staticSetup();e.ProgramRegistration.setProgramFactory(new e.StandardAppProgram);e.ProgramRegistration.setProgramFactory(new e.OrcaAppProgram);e.ProgramRegistration.setProgramFactory(new e.DragonflyAppProgram);e.ProgramRegistration.setProgramFactory(new e.OrcaLiteViewerAppProgram);e.DfModule.stopExt(e.RuntimeModule.s_module)}return e.RuntimeModule.s_module};e.RuntimeModule.prototype.getName=function(){return"ff2100.runtime"};e.RuntimeModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff2100.runtime.js.map