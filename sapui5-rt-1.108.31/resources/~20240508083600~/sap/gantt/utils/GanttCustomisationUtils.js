sap.ui.define(["sap/ui/model/json/JSONModel","sap/m/Button","sap/m/Dialog","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/m/SelectDialog","sap/m/CustomListItem","sap/m/Input","sap/ui/core/theming/Parameters","sap/ui/core/Icon","sap/m/HBox","sap/m/Text","sap/m/DateRangeSelection","sap/gantt/misc/Format","sap/gantt/library"],function(e,t,a,n,o,r,l,s,i,m,g,p,T,c,u,_){"use strict";var S=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");var d=_.palette;var C=d.SemanticColors.concat(d.LegendColors).concat(d.AccentColors);var h=function(){var t=C.map(function(e){return{color:e}});return new e({colors:t})};var E={dialogBox:function(e,_){return new Promise(function(d,E){var w="";if(_){w=new c({dateValue:u.abapTimestampToDate(e.getTimeStamp()),secondDateValue:u.abapTimestampToDate(e.getEndTimeStamp()),minDate:new Date(1900,0,1),maxDate:new Date(2100,12,31)})}else{w=new i({placeholder:S.getText("TXT_CH_AL_PH_TIMESTAMP"),value:e.getTimeStamp()})}var A=new n({editable:true,useHorizontalLayout:false,groups:[new o({groupElements:[new r({label:S.getText("TXT_CH_AL_STROKE"),elements:[new i({type:"Text",value:{path:"colors",formatter:function(t){t=C;for(var a=0;a<t.length;a++){if(e.getStroke()===m.get(t[a])){return t[a]}}}},placeholder:S.getText("TXT_CH_AL_PH_STROKE_VALUE"),showValueHelp:true,valueHelpOnly:true,valueHelpRequest:function(){if(this.oSelectDialog){this.oSelectDialog.open();return}this.oSelectDialog=new l({title:S.getText("TXT_CH_AL_DIALOG_COLOR_SELECTOR"),confirm:function(e){A.getGroups()[0].getGroupElements()[0].getElements()[0].setValue(e.getParameter("selectedItem").getContent()[0].getItems()[1].getText())},items:{growing:false,path:"colors>/colors",template:new s({content:[new p({alignItems:"Center",items:[new g({src:"sap-icon://color-fill",color:{path:"colors>color",formatter:function(e){return m.get(e)}}}).addStyleClass("sapUiTinyMargin"),new T({text:{path:"colors>color",formatter:function(e){return e}}})]})]}),templateShareable:false,showSecondaryValues:true}});this.oSelectDialog.setModel(h(),"colors");this.oSelectDialog.open()}})]}),new r({label:S.getText("TXT_CH_AL_STROKE_DASHARRAY"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_STROKE_DASHARRAY"),value:e.getStrokeDasharray()})]}),new r({label:S.getText("TXT_CH_AL_STROKE_OPACITY"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_STROKE_OPACITY"),value:e.getStrokeOpacity()})]}),new r({label:S.getText("TXT_CH_AL_TIMESTAMP"),elements:[w]}),new r({label:S.getText("TXT_CH_AL_DESCRIPTION"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_DESCRIPTION"),value:e.getDescription()})]})]})]});A.getGroups()[0].getGroupElements()[0].getElements()[0].setModel(h());var D=new t({text:S.getText("SAVE_BUTTON"),type:"Emphasized"}),f=new t({text:S.getText("CANCEL_BUTTON")});var L=new a({title:_?S.getText("TXT_CH_DL_DIALOG_TITLE"):S.getText("TXT_CH_AL_DIALOG_TITLE"),buttons:[D,f],content:[A]});f.attachPress(function(e){L.close()});D.attachPress(function(t){var a=L.getContent()[0].getGroups()[0].getGroupElements(),n={newChange:{stroke:m.get(a[0].getElements()[0].getValue()),strokeDasharray:a[1].getElements()[0].getValue(),strokeOpacity:parseFloat(a[2].getElements()[0].getValue()),description:a[4].getElements()[0].getValue()},oldChange:{stroke:e.getStroke(),strokeDasharray:e.getStrokeDasharray(),strokeOpacity:e.getStrokeOpacity(),description:e.getDescription()}};if(_){n.newChange["timeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getDateValue());n.newChange["endTimeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getSecondDateValue());n.oldChange["timeStamp"]=e.getTimeStamp();n.oldChange["endTimeStamp"]=e.getEndTimeStamp()}else{n.newChange["timeStamp"]=a[3].getElements()[0].getValue();n.oldChange["timeStamp"]=e.getTimeStamp()}L.close();d(n)});L.open()})},designTimeSettings:function(e,t){return{icon:"sap-icon://edit",name:S.getText(e),isEnabled:true,handler:t}}};return E},true);
//# sourceMappingURL=GanttCustomisationUtils.js.map