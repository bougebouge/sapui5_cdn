/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["../DefBase","sap/gantt/misc/Format","sap/gantt/simple/AggregationUtils"],function(t,e,a){"use strict";var n=t.extend("sap.gantt.def.cal.Calendar",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:"calendar"},backgroundColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"#e5e5e5"}},defaultAggregation:"timeIntervals",aggregations:{timeIntervals:{type:"sap.gantt.def.cal.TimeInterval",multiple:true,singularName:"timeInterval",bindable:"bindable"}}}});n.prototype.getDefNode=function(){var t=this.getParent()&&this.getParent().getParent()?this.getParent().getParent():null;var n=this.getTimeIntervals();var r=t?t._oStatusSet:null;var i=r?r.aViewBoundary:null;var l=r?r.aTimeBoundary:null;var g=n;if(l&&r){g=n.filter(function(t){var a=e.abapTimestampToDate(t.getStartTime());var n=e.abapTimestampToDate(t.getEndTime());var i=r.bRTL?l[1]:l[0],g=r.bRTL?l[0]:l[1];return n>i&&a<g})}var s=i&&i.length>1?i[1]-i[0]:1;var u={id:this.generateRefId(),x:0,y:0,width:s,timeIntervals:[]};var o=t&&t.getAggregation("table")?t.getTable().getRows():null;if(o&&o.length>0){o.forEach(function(t){if(!u.title||u.title===""){var e=t.getAggregation("_settings");if(e){var n=a.getAllNonLazyAggregations(e);var r=Object.keys(n).filter(function(t){return t.indexOf("calendars")===0}).map(function(t){return e.getAggregation(t)||[]});r.forEach(function(t){if(t&&t.length>0){var e=t.filter(function(t){return this.getKey()===t.getCalendarName()}.bind(this));var a=e&&e.length>0?e[0].getTitle():null;var n=e&&e.length>0?e[0]:null;u["title"]=a;u["baseCalender"]=n}}.bind(this))}}}.bind(this))}if(t&&t.isA("sap.gantt.simple.GanttChartWithTable")){g=n.filter(function(e){return t.isCalendarTimeIntervalVisible(e)})}for(var f=0;f<g.length;f++){var d=g[f].getDefNode();d.fill=this.getBackgroundColor();u.timeIntervals.push(d)}return u};n.prototype.generateRefId=function(){var t=this.getParent()&&this.getParent().getParent()?this.getParent().getParent().getId():"";return t+"_"+this.getKey()};return n},true);
//# sourceMappingURL=Calendar.js.map