{"version":3,"file":"GanttConnectExtension.js","names":["sap","ui","define","jQuery","KeyCodes","Core","library","GanttExtension","CoordinateUtils","GanttUtils","Utility","_sNamespace","RelationshipType","simple","ShapeConnectHelper","addEventListeners","oGantt","this","removeEventListeners","oExtension","_getConnectExtension","shapeConnectDoms","shapeConnectTriggers","on","beforeShapeConnect","bind","off","addShapeConnectEventListeners","removeShapeConnectEventListeners","$document","document","onMousemove","endShapeConnect","onKeydown","GanttConnectExtension","extend","_init","mSettings","_initShapeConnectStates","prototype","attachShapeConnectEvents","getGantt","isShapeConnecting","mDom","_oStartShape","_bShapeConnecting","_oScrollDistance","x","y","_bElementConnectable","getRlsStartShape","getSvgElement","getDomRefs","ganttSvg","_getShapeConnectRootNode","$shapeConnectContainer","shapeConnect","d3","select","get","setDomSelector","oDoms","connectLine","ghostRect","shapeConnectGhost","createConnectLine","oFrame","oSvgPoint","oPointerExtension","_getPointerExtension","iX","_getAutoScrollStep","oLineData","class","x1","width","y1","x2","y2","getD3Doms","shapeConnectLine","empty","oShapeConnectRootNode","append","attr","createGhostRect","oGhostRectData","height","updateShapeConnectEffect","oCursorPoint","getLatestCursorPosition","getStartShapeFrame","oSvg","getEventSVGPoint","showIndicator","oEvent","$target","target","sShapeUid","parents","SELECT_FOR_DATASET_KEY","bRTL","getConfiguration","getRTL","getBBox","sStartPoint","hasClass","startTriggerFrame","shapeUid","isRightTrigger","startPoint","toggleShapeConnectTrigger","_updateShapeSelections","getSelectedShapeUid","SHAPE_CONNECT_INDICATOR_WIDTH","$shapeConnectTrigger","startShapeConnectTrigger","length","_getAcceptableShapeElements","aAcceptableShapes","that","connectableShapes","each","index","oShape","oControl","control","getShapeUid","getDomRef","push","aIndicators","forEach","_getIndicatorData","shapeConnectContainers","data","enter","classed","d","id","SHAPE_CONNECT_FOR_DATASET_KEY","g","left","right","attachEventHandlerToIndicator","onShapeConnecting","iIndicatorWidth","fireEvent","sToShapeId","sEndPoint","sType","oEventData","fromShapeUid","toShapeUid","getElementById","type","oGanttChart","fireShapeConnect","selectAll","remove","keyCode","ESCAPE","toggleGhostRect","toggleClass","indicators","sElemId","getId","heightFactor","iY","iWidth","iHeight","bIsTransformed","gantt","BaseGroup","iTranslateY","sTransform","window","getComputedStyle","transform","match","split","parseFloat","iRectWidth","iMargin","mBias","getShapeBias","iLeftX","iLeftY","iRightX","iRightY","mCommonProp","storeScrollDistance","iStep","bHorizontal","$svg","sSelectShapePart","sTriggerPart","$shapeConnectArea","find","$selectionArea","CONNECTABLE_DATASET_KEY","oNode"],"sources":["GanttConnectExtension-dbg.js"],"mappings":"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"}