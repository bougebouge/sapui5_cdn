{"version":3,"file":"GanttPopoverExtension.js","names":["sap","ui","define","jQuery","KeyCodes","Core","Utility","GanttExtension","GanttUtils","CoordinateUtils","library","_sNamespace","sMouseDown","sMouseDownWithNamespace","aEvents","BrowserEvent","reduce","events","name","aEventWithNamespace","map","sEvent","PopoverHelper","dispatchEvent","oEvent","oExtension","this","_getPopoverExtension","type","mousemove","onMouseMove","mouseup","onMouseUp","keydown","onKeydown","entry","onMouseDown","addEventListeners","oGantt","removeEventListeners","oSvg","getDomRefs","ganttSvg","on","bind","off","addPopoverEventListeners","removePopoverEventListeners","forEach","sEventName","document","SnapMode","dragdrop","GanttPopoverExtension","extend","_init","mSettings","_initPopoverStates","_attachEvents","getGantt","_detachEvents","prototype","_iOffsetX","_iOffsetY","_bNeedReverse","snapTimer","oDragExtension","_getDragDropExtension","getShowShapeTimeOnDrag","isDraggingOrResizing","getSnapMode","None","_showPopoverOnSnap","_showPopover","isDragging","bMultipleShapes","bTimePopover","window","clearTimeout","setTimeout","oSelection","getSelection","iSelectedDraggableShapes","numberOfSelectedDraggableShapes","pageWidth","innerWidth","pageHeight","innerHeight","_hidePopover","keyCode","ESCAPE","oResizer","_getResizeExtension","isResizing","_buildPopover","sStart","getLibraryResourceBundle","getText","sEnd","sNumberOfObjects","getNumberOfDragObject","createTimeDiv","sLabel","sClass","sContent","createCountDiv","oTimePopover","oCountPopover","createAnchor","_calcPopoverOffset","oAnchor","getElementById","append","oPositionData","_getPopoverData","_updateTime","bRtl","getConfiguration","getRTL","sMarginDirction","oStyle","marginTop","offsetY","offsetX","oWrapper","css","find","text","startNewDate","endNewDate","_getDragDropOrResizingDom","dragGhost","get","children","aShapes","getShapesWithUid","getId","origin","resizeFor","length","getShapeUid","body","_oTargetDom","moveAnchor","oPoint","getEventPosition","iPageX","pageX","iPageY","pageY","iScreenWidth","iScreenHeight","iSpaceY","height","oAnchorDom","style","left","top","checkIfNeedReverse","iWidth","width","getGhostAlignment","classList","remove","oPopoverAnchorDom","parentNode","removeChild","iOffsetX","oPopoverData","oCurrentTime","_getCurrentTime","oFormater","getTimeFormaterBySmallInterval","getLowerCaseLabel","format","time","endTime","_getGhostTime","_getResizeTime","_getOffsetY","_oDraggedDom","oDragClientRect","getBoundingClientRect","iOffsetY","Math","ceil","_updatePopoverWhenAutoScroll"],"sources":["GanttPopoverExtension-dbg.js"],"mappings":";;;;;;AAMAA,IAAIC,GAAGC,OAAO,CACb,2BACA,yBACA,mBACA,yBACA,mBACA,eACA,oBACA,qBAED,SACCC,OACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAc,mBAClB,IAAIC,EAAa,YACjB,IAAIC,EAA0BD,EAAaD,EAC3C,IAAIG,EAAU,CAAC,YAAa,UAAW,WACvC,IAAIC,EAAeD,EAAQE,OAAO,SAASC,EAAQC,GAClDD,EAAOC,GAAQA,EACf,OAAOD,CACR,EAAG,CAAC,GAEJ,IAAIE,EAAsBL,EAAQM,IAAI,SAASC,GAAU,OAAOA,EAASV,CAAa,GAEtF,IAAIW,EAAgB,CACnBC,cAAe,SAASC,GACvB,IAAIC,EAAaC,KAAKC,uBACtB,GAAIH,EAAOI,OAASb,EAAac,UAAW,CAC3CJ,EAAWK,YAAYN,EACxB,MAAO,GAAIA,EAAOI,OAASb,EAAagB,QAAS,CAChDN,EAAWO,UAAUR,EACtB,MAAO,GAAIA,EAAOI,OAASb,EAAakB,QAAS,CAChDR,EAAWS,UAAUV,EACtB,CACD,EACAW,MAAO,SAASX,GACf,IAAIC,EAAaC,KAAKC,uBACtBF,EAAWW,YAAYZ,EACxB,EACAa,kBAAmB,SAASC,GAC3BZ,KAAKa,qBAAqBD,GAC1B,IAAIE,EAAOrC,OAAOmC,EAAOX,uBAAuBc,aAAaC,UAC7DF,EAAKG,GAAG9B,EAAyBS,EAAca,MAAMS,KAAKN,GAC3D,EACAC,qBAAsB,SAASD,GAC9B,IAAIE,EAAOrC,OAAOmC,EAAOX,uBAAuBc,aAAaC,UAC7DF,EAAKK,IAAIhC,EACV,EACAiC,yBAA0B,SAASR,GAClCZ,KAAKqB,4BAA4BT,GACjCnB,EAAoB6B,QAAQ,SAASC,GACpC9C,OAAO+C,UAAUP,GAAGM,EAAY3B,EAAcC,cAAcqB,KAAKN,GAClE,EACD,EACAS,4BAA6B,SAAST,GACrCnC,OAAO+C,UAAUL,IAAIlC,EACtB,GAGD,IAAIwC,EAAWzC,EAAQ0C,SAASD,SAYhC,IAAIE,EAAwB9C,EAAe+C,OAAO,yCAA0C,CAM3FC,MAAO,SAASjB,EAAQkB,GACvB9B,KAAK+B,qBACL,MAAO,kBACR,EAMAC,cAAe,WACd,IAAIpB,EAASZ,KAAKiC,WAClBrC,EAAce,kBAAkBC,EACjC,EAMAsB,cAAe,WACd,IAAItB,EAASZ,KAAKiC,WAClBrC,EAAciB,qBAAqBD,EACpC,IAGDe,EAAsBQ,UAAUJ,mBAAqB,WACpD/B,KAAKoC,UAAY,GACjBpC,KAAKqC,UAAY,GACjBrC,KAAKsC,cAAgB,MACrBtC,KAAKuC,UAAY,IAClB,EAEAZ,EAAsBQ,UAAU/B,YAAc,SAASN,GACtD,IAAI0C,EAAiBxC,KAAKiC,WAAWQ,wBACrC,GAAIzC,KAAKiC,WAAWS,0BAA4B1C,KAAK2C,qBAAqB7C,GAAS,CAClF,GAAIE,KAAKiC,WAAWW,gBAAkBnB,EAASoB,KAAM,CACpD7C,KAAK8C,mBAAmBhD,EAAQ,KACjC,KAAO,CACNE,KAAK+C,aAAajD,EAAQ,KAC3B,CACD,MAAO,GAAI0C,EAAeQ,cAAgBhD,KAAKiD,gBAAiB,CAC/D,GAAIjD,KAAKiC,WAAWW,gBAAkBnB,EAASoB,KAAM,CACpD7C,KAAK8C,mBAAmBhD,EACzB,KAAO,CACNE,KAAK+C,aAAajD,EACnB,CACD,CACD,EAKA6B,EAAsBQ,UAAUW,mBAAqB,SAAShD,EAAQoD,GACrE,GAAIlD,KAAKuC,UAAW,CACnBY,OAAOC,aAAapD,KAAKuC,WACzBvC,KAAKuC,UAAY,IAClB,CACAvC,KAAKuC,UAAYY,OAAOE,WAAW,WAClCrD,KAAK+C,aAAajD,EAAQoD,EAC3B,EAAEhC,KAAKlB,MAAM,IACd,EAEA2B,EAAsBQ,UAAUzB,YAAc,SAASZ,GACtD,IAAIwD,EAAatD,KAAKiC,WAAWsB,eACjC,IAAIC,EAA2BF,EAAWG,kCAC1CzD,KAAKiD,gBAAkBO,EAA2B,EAClDxD,KAAK0D,UAAYP,OAAOQ,WACxB3D,KAAK4D,WAAaT,OAAOU,YACzBjE,EAAcwB,yBAAyBpB,KAAKiC,WAC7C,EAGAN,EAAsBQ,UAAU7B,UAAY,SAASR,GACpDF,EAAcyB,4BAA4BrB,KAAKiC,YAC/CjC,KAAK8D,aAAahE,GAClBE,KAAK+B,oBACN,EAEAJ,EAAsBQ,UAAU3B,UAAY,SAASV,GACpD,GAAIA,EAAOiE,UAAYrF,EAASsF,OAAQ,CACvCpE,EAAcyB,4BAA4BrB,KAAKiC,YAC/CjC,KAAK8D,aAAahE,GAClBE,KAAK+B,oBACN,CACD,EAEAJ,EAAsBQ,UAAUQ,qBAAuB,SAAS7C,GAC/D,IAAI0C,EAAiBxC,KAAKiC,WAAWQ,wBACrC,IAAIwB,EAAWjE,KAAKiC,WAAWiC,sBAC/B,OAAQ1B,EAAeQ,eAAiBhD,KAAKiD,iBAAoBgB,EAASE,YAC3E,EAEAxC,EAAsBQ,UAAUiC,cAAgB,SAAStE,EAAQoD,GAChE,IAAImB,EAAS1F,EAAK2F,yBAAyB,aAAaC,QAAQ,qBAChE,IAAIC,EAAO7F,EAAK2F,yBAAyB,aAAaC,QAAQ,mBAC9D,IAAI/B,EAAiBxC,KAAKiC,WAAWQ,wBACrC,IAAIgC,EAAmBjC,EAAekC,wBAEtC,IAAIC,EAAgB,SAASC,EAAQC,GACpC,IAAIC,EAAW,8CAAgDF,EAAS,UACrE,0BAA4BC,EAAS,YACxC,MAAO,gCAAkCC,EAAW,QACrD,EAEA,IAAIC,EAAiB,SAASH,EAAQC,GACrC,IAAIC,EAAW,0BAA4BD,EAAS,KAAOD,EAAS,UACpE,MAAO,yDAA2DE,EAAW,QAC9E,EACA,GAAI5B,EAAc,CACjBlD,KAAKgF,aAAevG,OAAO,sEACxBkG,EAAcN,EAAQ,4BACtBM,EAAcH,EAAM,0BACpB,SACJ,KAAO,CACNxE,KAAKiF,cAAgBxG,OAAO,sEAC1BsG,EAAeN,EAAkB,8BACjC,SACH,CAEAzE,KAAKkF,eACLlF,KAAKmF,qBAEL,IAAIC,EAAU3G,OAAO+C,SAAS6D,eAAe,0BAC7C,GAAInC,EAAc,CACjBkC,EAAQE,OAAOtF,KAAKgF,aACrB,KAAO,CACNI,EAAQE,OAAOtF,KAAKiF,cACrB,CAEA,IAAIM,EAAgBvF,KAAKwF,gBAAgB1F,EAAQoD,GACjDlD,KAAKyF,YAAYF,EAAerC,EACjC,EAEAvB,EAAsBQ,UAAUsD,YAAc,SAASF,EAAerC,GACrE,IAAIwC,EAAO/G,EAAKgH,mBAAmBC,SACnC,IAAIC,EAAkBH,EAAO,cAAgB,aAC7C,IAAII,EAAS,CAAEC,UAAWR,EAAcS,QAAU,MAClDF,EAAOD,GAAmBN,EAAcU,QAAU,KAClD,IAAIC,EAAWzH,OAAO+C,SAAS6D,eAAe,2BAA2Bc,IAAIL,GAC7E,GAAI5C,EAAc,CACjBgD,EAASE,KAAK,6BAA6BC,KAAKd,EAAce,cAC9DJ,EAASE,KAAK,2BAA2BC,KAAKd,EAAcgB,WAC7D,CACD,EAEA5E,EAAsBQ,UAAUqE,0BAA4B,WAC3D,IAAIhE,EAAiBxC,KAAKiC,WAAWQ,wBACrC,IAAIwB,EAAWjE,KAAKiC,WAAWiC,sBAC/B,GAAI1B,EAAeQ,aAAc,CAChC,OAAOR,EAAeiE,UAAUC,IAAI,GAAGC,SAAS,EACjD,MAAO,GAAI1C,EAASE,aAAc,CACjC,IAAIyC,EAAU9H,EAAW+H,iBAAiB7G,KAAKiC,WAAW6E,QAAS,CAAC7C,EAAS8C,OAAOC,YACpF,GAAIJ,EAAQK,SAAW,GAAKL,EAAQ,GAAI,CACvC,OAAOpF,SAAS6D,eAAeuB,EAAQ,GAAGM,cAAgB,YAC3D,CACD,CACD,EAEAvF,EAAsBQ,UAAU+C,aAAe,SAASpF,GACvD,IAAIsF,EAAU3G,OAAO+C,SAAS6D,eAAe,0BAC7C,GAAID,EAAQ6B,SAAW,EAAG,CACzB7B,EAAU3G,OAAO,0CACjBA,OAAO+C,SAAS2F,MAAM7B,OAAOF,EAC9B,CACApF,KAAKoH,YAAchC,EAAQsB,IAAI,EAChC,EAEA/E,EAAsBQ,UAAUkF,WAAa,SAASvH,EAAQoD,GAC7D,IAAIoE,EAASvI,EAAgBwI,iBAAiBzH,GAC7C0H,EAASF,EAAOG,MAChBC,EAASJ,EAAOK,MAChBC,EAAe5H,KAAK0D,UACpBmE,EAAgB7H,KAAK4D,WAEtB,GAAI4D,GAAUxH,KAAKoC,UAAW,CAC7BoF,GAAUxH,KAAKoC,SAChB,MAAO,GAAIoF,EAASI,EAAe5H,KAAKoC,UAAW,CAClDoF,EAASI,EAAe5H,KAAKoC,SAC9B,CAEA,IAAI0F,EAAU9H,KAAKqC,UACnB,GAAIa,GAAgBlD,KAAKgF,aAAc,CACtC8C,GAAW9H,KAAKgF,aAAa+C,QAC9B,MAAO,IAAK7E,GAAgBlD,KAAKiF,cAAe,CAC/C6C,GAAW9H,KAAKiF,cAAc8C,QAC/B,CAEA,GAAIL,GAAU1H,KAAKqC,UAAW,CAC7BqF,GAAU1H,KAAKqC,SAChB,MAAO,GAAIqF,EAASG,EAAgBC,EAAS,CAC5CJ,EAASG,EAAgBC,CAC1B,CAEA,IAAIE,EAAaxG,SAAS6D,eAAe,yBACzC,GAAI2C,EAAY,CACfA,EAAWC,MAAMC,KAAOV,EAAS,KACjCQ,EAAWC,MAAME,IAAMT,EAAS,IACjC,CACD,EAEA/F,EAAsBQ,UAAUiG,mBAAqB,SAAStI,EAAQoD,GACrE,IAAIwC,EAAO/G,EAAKgH,mBAAmBC,SACnC,IAAI0B,EAASvI,EAAgBwI,iBAAiBzH,GAC9C,IAAIuI,EAASnF,EAAelD,KAAKgF,aAAasD,QAAU,GAAKtI,KAAKiF,cAAcqD,QAAU,GAC1F,GAAI5C,GAAQ4B,EAAOG,MAAQY,IAAW3C,GAAQ4B,EAAOG,MAAQY,GAAUrI,KAAK0D,WAAc1D,KAAKiC,WAAWsG,sBAAwB,OAASvI,KAAKiD,gBAAkB,CACjKjD,KAAKsC,cAAgB,IACtB,KAAO,CACNtC,KAAKsC,cAAgB,KACtB,CACD,EAEAX,EAAsBQ,UAAUY,aAAe,SAASjD,EAAQoD,GAC/DlD,KAAKqH,WAAWvH,EAAQoD,GACxB,GAAKA,GAAgBlD,KAAKgF,eAAmB9B,GAAgBlD,KAAKiF,cAAgB,CACjFzD,SAAS6D,eAAe,0BAA0BmD,UAAUC,OAAO,6BACnEzI,KAAKoI,mBAAmBtI,EAAQoD,GAChClD,KAAKmF,qBACL,IAAII,EAAgBvF,KAAKwF,gBAAgB1F,EAAQoD,GACjDlD,KAAKyF,YAAYF,EAAerC,EACjC,KAAO,CACNlD,KAAKoE,cAActE,EAAQoD,EAC5B,CACD,EAEAvB,EAAsBQ,UAAU2B,aAAe,WAC9C,IAAI4E,EAAoBlH,SAAS6D,eAAe,yBAChD,GAAIqD,EAAmB,CACtBA,EAAkBC,WAAWC,YAAYF,EAC1C,CACA1I,KAAKgF,aAAe,KACpBhF,KAAKiF,cAAgB,IACtB,EAEAtD,EAAsBQ,UAAUqD,gBAAkB,SAAS1F,EAAQoD,GAClE,IAAI2F,EAAW7I,KAAKoC,UACpB,GAAIpC,KAAKsC,cAAe,CACvBuG,EAAW3F,GAAgB2F,EAAW7I,KAAKgF,aAAasD,SAAWO,EAAW7I,KAAKiF,cAAcqD,OAClG,CAEA,IAAIQ,EAAe,CAClB7C,QAAS4C,EACT7C,QAAShG,KAAKqC,WAGf,GAAIa,EAAc,CACjB,IAAI6F,EAAe/I,KAAKgJ,gBAAgBlJ,GACxC,GAAIiJ,EAAc,CACjB,IAAIE,EAAYnK,EAAWoK,+BAA+BlJ,KAAKiC,YAC/D6G,EAAaxC,aAAe1H,EAAQuK,kBAAkBF,EAAUG,OAAOL,EAAaM,OACpFP,EAAavC,WAAa3H,EAAQuK,kBAAkBF,EAAUG,OAAOL,EAAaO,SACnF,CACD,CACA,OAAOR,CACR,EAEAnH,EAAsBQ,UAAU6G,gBAAkB,SAASlJ,GAC1D,IAAI0C,EAAiBxC,KAAKiC,WAAWQ,wBACrC,IAAIwB,EAAWjE,KAAKiC,WAAWiC,sBAC/B,GAAI1B,EAAeQ,aAAc,CAChC,OAAOR,EAAe+G,cAAczJ,EAAQ,KAC7C,MAAO,GAAImE,EAASE,aAAc,CACjC,OAAOF,EAASuF,eAAe1J,EAChC,CACD,EAEA6B,EAAsBQ,UAAUgD,mBAAqB,WACpDnF,KAAKqC,UAAYrC,KAAKyJ,aACvB,EAEA9H,EAAsBQ,UAAUsH,YAAc,WAC7C,IAAIC,EAAe1J,KAAKwG,4BACxB,IAAImD,EAAkBD,GAAgBA,EAAaE,wBACnD,IAAIC,EAAW,GACf,GAAIF,EAAiB,CACpBE,EAAWF,EAAgB5B,OAAS,CACrC,CACA,OAAO+B,KAAKC,KAAKF,EAClB,EAEAlI,EAAsBQ,UAAU6H,6BAA+B,SAASlK,GACvE,GAAIE,KAAKiC,WAAWS,0BAA4B1C,KAAK2C,uBAAwB,CAC5E3C,KAAK+C,aAAajD,EAAQ,KAC3B,CACD,EAEA,OAAO6B,CACR"}