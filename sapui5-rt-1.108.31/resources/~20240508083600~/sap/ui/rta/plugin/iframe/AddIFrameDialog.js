/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/rta/plugin/iframe/AddIFrameDialogController","sap/ui/fl/util/getContainerUserInfo"],function(e,t,a,i,A,_,l,o){"use strict";var n=i.ValueState;var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var E="https://help.sap.com/docs/search?q=Embedding%20Content%20%28Object%20Pages%29";var I=r.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_TEXT")+" ("+"<a href="+E+">"+r.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_LINKTEXT")+"</a>"+")";var D={dialogTitle:r.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogCreateTitle:r.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogUpdateTitle:r.getText("IFRAME_ADDIFRAME_DIALOG_UPDATE_TITLE"),sizeTitle:r.getText("IFRAME_ADDIFRAME_DIALOG_SIZE_TITLE"),widthLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_LABEL"),widthUnitLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_UNITLABEL"),heightLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_LABEL"),heightUnitLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_UNITLABEL"),percentUseLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_PERCENT_USED"),saveText:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SAVE"),cancelText:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_CANCEL"),previewUrlLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_URL_LABEL"),previewUrlMessage:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_PREVIEW_MESSAGE"),previewButtonText:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),showPreviewButton:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),updatePreviewButton:r.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_UPDATE_PREVIEW"),previewFrameLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_FRAME_LABEL"),parameterSearchLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETER_SEARCH_LABEL"),editUrlLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_EDIT_URL_LABEL"),parametersLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETERS_LABEL"),columnParameterLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_PARAMETER_LABEL"),columnUiValueLabel:r.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_UI_VALUE_LABEL"),advancedSettingsTitle:r.getText("IFRAME_ADDIFRAME_ADVANCED_SETTINGS"),useLegacyNavigationLabel:r.getText("IFRAME_ADDIFRAME_USE_LEGACY_NAVIGATION"),useLegacyNavigationInfo:r.getText("IFRAME_ADDIFRAME_USE_LEGACY_NAVIGATION_INFO")};function s(e,t){if(e){D.dialogTitle=D.dialogUpdateTitle}else{D.dialogTitle=D.dialogCreateTitle}return new A({text:D,section:{visible:false},asNewSection:{value:false},sectionName:{value:"",valueState:n.None},frameWidth:{value:100,valueState:n.None,id:"sapUiRtaAddIFrameDialog_WidthInput"},frameWidthUnit:{value:"%"},frameHeight:{value:100,valueState:n.None,id:"sapUiRtaAddIFrameDialog_HeightInput"},frameHeightUnit:{value:"%"},frameUrl:{value:"",valueState:n.None},previewUrl:{value:""},documentationLink:{HTML:I},parameters:{value:[]},unitsOfMeasure:[{name:"%"},{name:"px"},{name:"rem"}],useLegacyNavigation:{value:!!t},previewUseLegacyNavigation:{value:!!t}})}var g=t.extend("sap.ui.rta.plugin.iframe.AddIFrameDialog",{metadata:{library:"sap.ui.rta",events:{opened:{}}}});g.prototype.open=function(e){return new Promise(function(t){this._fnResolve=t;this._createDialog(e)}.bind(this))};g.prototype._createDialog=function(t){var i=false;var A=false;if(t){i=t.updateMode?t.updateMode:false;A=t.useLegacyNavigation}this._oJSONModel=s(i,A);this._oController=new l(this._oJSONModel,t);a.load({name:"sap.ui.rta.plugin.iframe.AddIFrameDialog",controller:this._oController}).then(function(e){this._oDialog=e;this._oDialog.addStyleClass(_.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel);this._openDialog()}.bind(this)).catch(function(t){e.error("Error loading fragment sap.ui.rta.plugin.iframe.AddIFrameDialog: ",t)})};g.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this._disablePanelExpand();this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null;this._fnResolve(this._oController.getSettings());this._oController=null}.bind(this));this._oDialog.open()};g.prototype._disablePanelExpand=function(){var e=sap.ui.getCore().byId("sapUiRtaAddIFrameDialog_PreviewLinkPanel").getDependents()[0];if(e){e.setEnabled(false)}};g.buildUrlBuilderParametersFor=function(e){return o().then(function(t){var a=Object.keys(t).map(function(e){return{label:e,key:"{$user>/"+e+"}",value:t[e]}});var i=e.getBindingContext();var A;if(i){var _=i.getObject();A=Object.keys(_).filter(function(e){return typeof _[e]!=="object"}).map(function(e){return{label:e,key:"{"+e+"}",value:_[e]}})}else{A=[]}return a.concat(A)})};return g});
//# sourceMappingURL=AddIFrameDialog.js.map