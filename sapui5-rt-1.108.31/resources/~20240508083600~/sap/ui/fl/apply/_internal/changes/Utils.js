/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/apply/_internal/changes/FlexCustomData","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/Utils"],function(e,r,t){"use strict";function n(e,r){if(r||e.hasApplyProcessStarted()){return false}return true}var a={getControlIfTemplateAffected:function(e,r,t){var n=t.modifier;var a={originalControl:r};var i=e.getOriginalSelector();if(e.getContent().boundAggregation&&i){a.control=n.bySelector(i,t.appComponent,t.view);a.controlType=n.getControlType(a.control);a.bTemplateAffected=true}else{a.control=r;a.controlType=n.getControlType(r);a.bTemplateAffected=false}return a},getChangeHandler:function(e,n,a){var i=a.modifier.getLibraryName(n.control);return Promise.all([t.requireAsync("sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerRegistration"),i]).then(function(e){return e[0].waitForChangeHandlerRegistration(e[1])}).then(function(){var t=e.getChangeType();var i=e.getLayer();return r.getChangeHandler(t,n.controlType,n.control,a.modifier,i)})},checkIfDependencyIsStillValidSync:function(r,a,i,l){var o=t.getChangeFromChangesMap(i.mChanges,l);var c=a.bySelector(o.getSelector(),r);var g=e.sync.hasChangeApplyFinishedCustomData(c,o);return n(o,g)},checkIfDependencyIsStillValid:function(r,a,i,l){var o=t.getChangeFromChangesMap(i.mChanges,l);var c=a.bySelector(o.getSelector(),r);if(!c){return true}return e.hasChangeApplyFinishedCustomData(c,o,a).then(n.bind(null,o))},filterChangeByView:function(e,r){var t=e.modifier;var n=e.appComponent;var a=r.getSelector();if(!a){return false}if(a.viewSelector){var i=t.getControlIdBySelector(a.viewSelector,n);return i===e.viewId}var l=a.id;if(l){var o;if(r.getSelector().idIsLocal){if(n){o=n.getLocalId(e.viewId)}}else{o=e.viewId}var c=0;var g;do{c=l.indexOf("--",c);g=l.slice(0,c);c++}while(g!==o&&c>0);return g===o}return false}};return a});
//# sourceMappingURL=Utils.js.map