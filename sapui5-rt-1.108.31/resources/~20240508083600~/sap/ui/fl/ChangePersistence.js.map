{"version":3,"file":"ChangePersistence.js","names":["sap","ui","define","union","includes","merge","UriParameters","Log","JsControlTreeModifier","Component","Applier","ChangesUtils","FlexObject","FlexObjectFactory","DependencyHandler","VariantManagementState","FlexState","StorageUtils","Settings","Condenser","Storage","Version","Cache","Change","LayerUtils","Layer","Utils","JSONModel","Measurement","ChangePersistence","mComponent","this","_mComponent","_mChanges","createEmptyDependencyMap","_bChangesMapCreated","_mChangesInitial","name","error","Error","_aDirtyChanges","_oMessagebundle","undefined","_mChangesEntries","_bHasChangesOverMaxLayer","HIGHER_LAYER_CHANGES_EXIST","getChangeInstance","oFileContent","oChangeOrChangeContent","oChange","getId","fileName","changeType","createFromFileContent","setState","states","PERSISTED","prototype","getComponentName","getCacheKey","oAppComponent","preconditionsFulfilled","sFileType","sVariantManagementReference","sVariantReference","sSelectorId","getFileType","getVariantReference","getSelector","id","oChangeContent","fileType","variantManagementReference","variantReference","selector","bControlVariantChange","getChangesForComponent","mPropertyBag","bInvalidateCache","getUShellService","then","oURLParsingService","_oUShellURLParsingService","getChangesFillingCache","bind","oWrappedChangeFileContent","oChangeFileContent","component","getAppComponentForControl","bHasFlexObjects","isStorageResponseFilled","changes","aChanges","messagebundle","getModel","some","layer","VENDOR","oModel","setModel","sCurrentLayer","currentLayer","bFilterMaxLayer","ignoreMaxLayerParameter","fnFilter","filterChangeOrChangeDefinitionsByCurrentLayer","isLayerFilteringRequired","filterChangeForMaxLayer","filter","bIncludeControlVariants","includeCtrlVariants","aFilteredVariantChanges","_getAllCtrlVariantChanges","concat","_checkAndGetChangeInstances","map","isOverMaxLayer","getLayerFromChangeOrChangeContent","sChangeLayer","isA","getLayer","bIncludeCtrlVariants","getInitialChanges","reference","reduce","aResult","sVariantChangeType","loadChangesMapForComponent","createChangeMap","start","forEach","addChangeAndUpdateDependencies","end","getChangesMapForComponent","getOpenDependentChangesForControl","oSelector","getControlIdBySelector","getInitalDependencyClone","mInitialDependencies","mDependencies","copyDependencies","oInitialDependency","aNewValidDependencies","sControlId","aNewValidControlDependencies","controlsDependencies","oDependentControlSelector","bySelector","push","mControlsWithDependencies","dependencies","length","copyDependenciesFromInitialChangesMapSync","fnDependencyValidation","call","sChangeId","mDependentChangesOnMe","copyDependenciesFromInitialChangesMap","oPreviousPromise","bDependencyIsStillValid","Promise","resolve","oReferenceChange","setInitialApplyState","insertChange","_addRunTimeCreatedChangeAndUpdateDependencies","addRuntimeChangeAndUpdateDependencies","getAllUIChanges","includeDirtyChanges","getDirtyChanges","Boolean","compareAgainstCurrentLayer","isChangeMapCreated","getChangesForView","filterChangeByView","addChange","vChange","addDirtyChange","_addPropagationListener","oNewChange","indexOf","oComponent","fnCheckIsNotFlPropagationListener","fnPropagationListener","_bIsSapUiFlFlexControllerApplyChangesOnControl","bNoFlPropagationListenerAttached","getPropagationListeners","every","oFlexControllerFactory","require","oFlexController","create","applyAllChangesForControl","addPropagationListener","_deleteNotSavedChanges","aCondensedChanges","bAlreadyDeletedViaCondense","oCondensedChange","removeChange","deleteChange","convertToFileContent","checkIfOnlyOne","sFunctionName","aProperties","aUniqueProperties","sValue","iIndex","canGivenChangesBeCondensed","bCondenseAnyLayer","bCondenserEnabled","sLayer","CUSTOMER","USER","oUriParameters","fromURL","window","location","href","has","get","isBackendCondensingEnabled","bEnabled","getInstanceOrUndef","isCondensingEnabled","updateCacheAndDeleteUnsavedChanges","aAllChanges","bSkipUpdateCache","_massUpdateCacheAndDirtyState","getAllRelevantChangesForCondensing","aDirtyChanges","aDraftFilenames","aPersistedAndSameLayerChanges","getState","canSingleRequestBeUsed","aRequests","getRequests","aStates","getStates","bCheckLayer","hasPersoConnector","aLayers","getLayers","NEW","saveDirtyChanges","sParentVersion","aRelevantChangesForCondensing","bIsCondensingEnabled","aChangesClone","slice","oCondensedChangesPromise","condense","sRequest","allChanges","condensedChanges","transport","isLegacyVariant","parentVersion","oResponse","write","flexObjects","prepareDirtyChanges","saveSequenceOfDirtyChanges","oFirstNewChange","aNewChanges","shift","oDirtyChange","performSingleSaveAction","_updateCacheAndDirtyState","oFirstChange","Number","Draft","getRequest","DELETED","remove","flexObject","oExistingDirtyChange","isChangeRelatedToVariants","updateVariantsState","changeToBeAddedOrDeleted","DIRTY","updateChange","sState","bRunTimeCreatedChange","nIndexInDirtyChanges","splice","_deleteChangeInMap","markForDeletion","sChangeKey","removeChangeFromMap","removeChangeFromDependencies","isLocalAndInLayer","oObject","isPersistedAndInLayer","getAllCompVariantsEntities","aCompVariantEntities","mCompVariantsMap","getCompVariantsMap","sPersistencyKey","sId","byId","transportAllUIChanges","oRootControl","sStyleClass","aAppVariantDescriptors","aLocalChanges","publish","transportDialogSettings","rootControl","styleClass","localChanges","appVariantDescriptors","_getChangesFromMapByNames","aNames","removeDirtyChanges","vLayer","oControl","sGenerator","aChangeTypes","aChangesToBeRemoved","bChangeValid","getSupportInformation","generator","vSelector","getChangeType","nIndex","resetChanges","aSelectorIds","bSelectorIdsProvided","bChangeTypesProvided","isPublicLayerAvailable","isApplicationReset","aCompVariantsEntries","mParams","selectorIds","changeTypes","reset","aChangesToRevert","response","oChangeContentId","removeChanges"],"sources":["ChangePersistence-dbg.js"],"mappings":"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"}