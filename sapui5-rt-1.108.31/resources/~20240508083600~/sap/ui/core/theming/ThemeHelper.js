/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log"],function(e){"use strict";var r={};var a="sap_horizon";var t=window.matchMedia("(prefers-color-scheme: dark)").matches;var n=/^([a-zA-Z0-9_]*)(_(hcb|hcw|dark))$/g;var s=["sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_belize","sap_belize_plus","sap_belize_hcb","sap_belize_hcw","sap_bluecrystal","sap_hcb"];var i={};var l={};l.reset=function(){r={}};l.getMetadata=function(a){if(!a){return null}var t=a.replace("sap-ui-theme-","").replace(/\./g,"-");if(r[t]){return r[t]}var n=document.createElement("span");n.classList.add("sapThemeMetaData-UI5-"+t);document.documentElement.appendChild(n);var s=window.getComputedStyle(n).getPropertyValue("background-image");document.documentElement.removeChild(n);var i=/\(["']?data:text\/plain;utf-8,(.*?)['"]?\)/i.exec(s);if(!i||i.length<2){return null}var l=i[1];if(l.charAt(0)!=="{"&&l.charAt(l.length-1)!=="}"){try{l=decodeURI(l)}catch(e){}}l=l.replace(/\\"/g,'"');var c=l.replace(/%20/g," ");var u;try{u=JSON.parse(c);r[t]=u}catch(r){e.error("Could not parse theme metadata for library "+t+".")}return u};l.checkAndRemoveStyle=function(r){var a=r.prefix||"",t=r.id;var n=function(r,a){var t=document.getElementById(r);try{var n=false,s=false,i=false,c=false;n=!t;s=!!(t&&(t.getAttribute("data-sap-ui-ready")==="true"||t.getAttribute("data-sap-ui-ready")==="false"));i=!!(t&&t.sheet&&t.sheet.href===t.href&&l.hasSheetCssRules(t.sheet));c=!!(t&&t.innerHTML&&t.innerHTML.length>0);var u=n||i||c||s;if(a){e.debug("ThemeHelper: "+r+": "+u+" (noLinkElement: "+n+", sheet: "+i+", innerHtml: "+c+", linkElementFinishedLoading: "+s+")")}return u}catch(t){if(a){e.error("ThemeHelper: "+r+": Error during check styles '"+r+"'",t)}}return false};var s=n(a+t,true);if(s){var i=document.querySelectorAll("link[data-sap-ui-foucmarker='"+a+t+"']");if(i.length>0){for(var c=0,u=i.length;c<u;c++){i[c].remove()}e.debug("ThemeManager: Old stylesheets removed for library: "+t)}}return s};l.safeAccessSheetCssRules=function(e){try{return e.cssRules}catch(e){return null}};l.hasSheetCssRules=function(e){var r=l.safeAccessSheetCssRules(e);return!!r&&r.length>0};l.validateAndFallbackTheme=function(r,t){var l;if(r){if(t==null&&i[r]){return i[r]}l=r;if(t==null&&r.startsWith("sap_")&&s.indexOf(r)==-1){var c=n.exec(r)||[];var u=c[2];if(u){l=a+u}else{l=a}i[r]=l;e.warning("The configured theme '"+r+"' is not yet or no longer supported in this version. "+"The valid fallback theme is '"+l+"'.","Theming")}}return l};l.getDefaultThemeInfo=function(){return{DEFAULT_THEME:a,DARK_MODE:t}};return l});
//# sourceMappingURL=ThemeHelper.js.map