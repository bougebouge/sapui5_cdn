//@ui5-bundle sap/fiori/core-min-3.js
window["sap-ui-optimized"] = true;
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ApplicationType", ["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/Config","sap/base/util/deepExtend","sap/ui/core/routing/History","sap/base/util/ObjectPath","sap/ushell/User","sap/ui/thirdparty/jquery"],function(e,t,n,a,s,r,i,o,p,u,l,c,f,jQuery){"use strict";var m=new e(document.URL).search(true)["iframe-url"];function d(e,t,n){var a=e.inbound,s=a&&a.resolutionResult,r;if(!(!a||!s||!s["sap.wda"])){r=i.constructFullWDAResolutionResult(e,t,n)}else if(!(!a||!s)){r=i.constructWDAResolutionResult(e,t,n)}if(r){r.then(function(t){L(e,t);return t})}return r}function h(e,t,n){return o.generateTRResolutionResult(e,t,n).then(function(t){L(e,t);return t})}function y(t,n,a){var i=new e(n),o=t.inbound,p=o&&o.resolutionResult,l=u({},t.mappedIntentParamsPlusSimpleDefaults),c,f;if(l["sap-system"]){c=l["sap-system"][0];delete l["sap-system"]}if(l["sap-system-src"]){f=l["sap-system-src"][0];delete l["sap-system-src"]}return new Promise(function(e,n){r.spliceSapSystemIntoURI(i,p.systemAlias,c,f,"WCF",p.systemAliasSemantics||r.SYSTEM_ALIAS_SEMANTICS.applied,a).done(function(n){var a=s.getURLParsing().paramsToString(l),r=s.appendParametersToUrl(a,n.toString());var i={url:r,text:p.text||"",additionalInformation:p.additionalInformation||"",applicationType:"WCF",fullWidth:true};L(t,i);T(i,"WCF");e(i)}).fail(function(e){n(e)})})}function g(e,n,a){var r=e.inbound,i,o,p,l,c={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(e){if(r.resolutionResult.hasOwnProperty(e)){c[e]=r.resolutionResult[e]}});c.url=n;if(c.applicationDependencies&&typeof c.url==="undefined"){c.url=""}if(typeof c.url==="undefined"){c.url="";t.warning("The component url is undefined. We set it to empty string avoid rejection of the promise")}l=u({},e.mappedIntentParamsPlusSimpleDefaults);c.reservedParameters={};var f={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(f).forEach(function(e){var t=l[e];if(t){delete l[e];c.reservedParameters[e]=t}});e.mappedDefaultedParamNames=e.mappedDefaultedParamNames.filter(function(e){return!f[e]});if(e.mappedDefaultedParamNames.length>0){l["sap-ushell-defaultedParameterNames"]=[JSON.stringify(e.mappedDefaultedParamNames)]}o=l["sap-system"]&&l["sap-system"][0];p=l["sap-system-src"]&&l["sap-system-src"][0];c["sap-system"]=o;if(typeof p==="string"){c["sap-system-src"]=p}e.effectiveParameters=l;i=s.getURLParsing().paramsToString(l);if(i){c.url=c.url+(c.url.indexOf("?")<0?"?":"&")+i}if(typeof r.resolutionResult.ui5ComponentName!=="undefined"){c.ui5ComponentName=r.resolutionResult.ui5ComponentName}c.text=r.title;return Promise.resolve(c)}function v(e){var n=undefined,a=window.hasher.getHash(),s=a.lastIndexOf("&/"),r=1;if(s>0){if(e&&e.capabilities&&e.capabilities.appFrameworkId==="UI5"){r=2}n=a.substring(s+r);try{if(n&&n.length>0){n=decodeURIComponent(n)}}catch(e){t.warning("inner route should be double encoded",e,"sap.ushell.sap.ushell.ApplicationType.getInnerAppRoute")}}return n}function P(e){var t=e.targetNavigationMode;if(t===undefined||t===""){t="inplace"}return t}function S(){var e=window.hasher&&window.hasher.getHash(),t="",n;if(e&&e.length>0&&e.indexOf("sap-iapp-state=")>0){n=/(?:sap-iapp-state=)([^&/\\]+)/.exec(e);if(n&&n.length===2){t=n[1]}}return t}function A(){return new Promise(function(e){Promise.all([sap.ushell.Container.getServiceAsync("UserInfo"),sap.ushell.Container.getServiceAsync("PluginManager"),n.getUi5VersionAsync()]).then(function(t){var n=t[0],a=t[1],s=t[2];var r=n.getUser();var i=sap.ui.getCore().getConfiguration();var o=r.getContentDensity()||(jQuery("body").hasClass("sapUiSizeCompact")?"compact":"cozy");var u=r.getTheme();if(u.indexOf("sap_")!==0){var c=f.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;u=r.getTheme(c)}var m;var d;if(i){d=i.getLanguage&&i.getLanguage();m=i.getSAPLogonLanguage&&i.getSAPLogonLanguage()}var h=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var y=0;if(p.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){y=p.last("/core/shell/sessionTimeoutIntervalInMinutes")}e({language:d,logonLanguage:m,theme:u,themeServiceRoot:h,isDebugMode:!!window["sap-ui-debug"],ui5Version:s,contentDensity:o,sapPlugins:a._getNamesOfPluginsWithAgents(),innerAppState:S(),sessionTimeout:y,historyDirection:l.getInstance().getDirection()||""})})})}function R(e){var t;switch(e){case"inplace":t="embedded";break;case"explace":t="newWindow";break;default:t=e||"newWindow"}return t}function I(e,a){var s=R(e);var r=n.getMember(a,"sap|integration.navMode");switch(r){case"inplace":return"embedded";case"explace":if(s==="embedded"){return"newWindowThenEmbedded"}if(["newWindowThenEmbedded","newWindow"].indexOf(s)>=0){return s}t.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return s}}function w(e,t,a){var s=n.clone(e);s.navigationMode=I(e.navigationMode,t);s.appId=a(e.appId||"");s.technicalAppComponentId=a(e.technicalAppComponentId||"");s.appSupportInfo=t["sap.app"]&&t["sap.app"].ach;s.appFrameworkId=e.appFrameworkId;delete s.urlTransformation;return s}function b(e,t,a){var s={appParams:{},system:undefined},r;if(a.mappedIntentParamsPlusSimpleDefaults){s.appParams=JSON.parse(JSON.stringify(a.mappedIntentParamsPlusSimpleDefaults))}r=n.getMember(t,"sap|app.destination");if(typeof r==="string"&&r.length>0){s.system=e.systemAliases[r]&&JSON.parse(JSON.stringify(e.systemAliases[r]));if(typeof s.system==="object"){s.system.alias=r}}return s}function U(t,n,a){return new Promise(function(s,r){var i=new e(t);var o=i.query(true);var p=true;var u=["sap-language","sap-theme","sap-shell","sap-ui-app-id","transaction","sap-iframe-hint","sap-keep-alive","sap-ui-versionedLibCss","sap-wd-configId"];if(a&&a.mandatoryUrlParams){u=u.concat(a.mandatoryUrlParams.split(","));u=u.filter(function(e,t){return u.indexOf(e)===t})}if(n==="explace"){p=false}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.compactParams(o,u,undefined,p).done(function(e){if(!e.hasOwnProperty("sap-intent-param")){s(t);return}var n;if(e["sap-theme"]){var a="sap-theme="+e["sap-theme"];e["sap-theme"]="sap-theme-temp-placeholder";i.query(e);n=i.toString();n=n.replace("sap-theme=sap-theme-temp-placeholder",a)}else{i.query(e);n=i.toString()}s(n)}).fail(function(e){r(e)})})})}function T(e,t){if(t){D(e,"sap-iframe-hint",t)}}function L(e,t){var n=e.intentParamsPlusAllDefaults;if(n&&n["sap-post"]&&n["sap-post"][0]==="false"){t.openWithPostByAppParam=false}}function C(e){var t=e.extendedInfo.appParams["sap-keep-alive"];if(t!==undefined){D(e,"sap-keep-alive",t[0])}}function M(e){var t=p.last("/core/spaces/enabled");if(t===true){D(e,"sap-spaces",t)}}function x(e,t,a){var s=n.getMember(t,"sap|integration.urlTemplateId");if(s==="urltemplate.url-dynamic"&&e.url.indexOf("sap-language=")===-1){D(e,"sap-language",a.env.language)}}function D(e,t,n){if(e.url){var a=e.url.indexOf("#"),s=e.url,r="";if(a>0){s=e.url.slice(0,a);r=e.url.slice(a)}e.url=s+(s.indexOf("?")>=0?"&":"?")+t+"="+n+r}}function O(e,s,r){return new Promise(function(s){var r=e.inbound,i=r.templateContext,o=i.payload.capabilities||{};if(e.mappedIntentParamsPlusSimpleDefaults&&e.mappedIntentParamsPlusSimpleDefaults.hasOwnProperty("sap-ushell-innerAppRoute")){var p=window.hasher.getHash();if(e.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"].length>0&&p.indexOf("&/")===-1){p+="&/"+e.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"];window.hasher.replaceHash(p)}}var u={innerAppRoute:v(i.payload)||e.parsedIntent.appSpecificRoute,targetNavMode:P(e),defaultParameterNames:e.mappedDefaultedParamNames,startupParameter:e.mappedIntentParamsPlusSimpleDefaults};A().then(function(p){u.env=p;if(o.appFrameworkId==="UI5"&&u.startupParameter){for(var l in u.startupParameter){if(l!=="sap-ushell-innerAppRoute"){u.startupParameter[l][0]=encodeURIComponent(u.startupParameter[l][0])}}if(e.mappedDefaultedParamNames&&e.mappedDefaultedParamNames.length>0){u.startupParameter["sap-ushell-defaultedParameterNames"]=[JSON.stringify(e.mappedDefaultedParamNames)]}}var c="/universal_search/search?query=",f=u.innerAppRoute&&u.innerAppRoute.indexOf(c),d;if(f===0){d=u.innerAppRoute.substring(c.length);u.innerAppRoute="/JAMSEARCHPATHH?JAMSEARCHVALUEE=VALUEE"}var h=a.expand(i.payload,i.site,u,i.siteAppSection,"startupParameter");if(f===0){h=h.replace("/JAMSEARCHPATHH?JAMSEARCHVALUEE=VALUEE",c+encodeURIComponent(d))}if(o.appFrameworkId==="UI5"&&document.URL.indexOf("#")>0){var y=h.split("#"),g=y[1].split("&/"),v=sap.ushell.Container.getFLPUrl(true).split("#"),P=v[1].split("&/");h=y[0]+"#"+P[0]+(g.length>1?"&/"+g[1]:"");t.debug("- created URL with fixed hash: "+h,"sap.ushell.ApplicationType")}var S=function(e){var t=n.clone(i.payload);t.urlTemplate=e;return a.expand(t,i.site,u,i.siteAppSection,"startupParameter")};var A={applicationType:"URL",text:r.title,appCapabilities:w(o,i.siteAppSection,S),url:h,extendedInfo:b(i.site,i.siteAppSection,e),contentProviderId:r.contentProviderId||"",systemAlias:i.siteAppSection["sap.app"]&&i.siteAppSection["sap.app"].destination||i.siteAppSection.destination||""};T(A,A.appCapabilities.appFrameworkId);C(A);M(A);x(A,i.siteAppSection,u);var R=new Promise(function(e){sap.ushell.Container.getServiceAsync("URLTemplate").then(function(t){sap.ui.require(["sap/ushell/components/applicationIntegration/application/BlueBoxesCache"],function(n){var a=n.get(A.url)===undefined;t.handlePostTemplateProcessing(A.url,i.siteAppSection,a).then(e)})})});R.then(function(e){if(m&&e.indexOf("ui5appruntime.html")>0){var t=e.split("?");t[0]=m;e=t.join("?")}A.url=e;E(A.url,o,i).then(function(e){A.url=e;if(A.url&&typeof A.url==="string"&&A.url.indexOf("sap-iframe-hint=GUI")>0){s(A)}else{U(A.url,u.targetNavMode,o).then(function(e){A.url=e;s(A)},function(){s(A)})}})})})})}function E(n,s,r){return new Promise(function(i){var o=s.urlTransformation||{enabled:false},p,u,l;var f=W(o,r);if(f===true){l=new e(n);p=o.transformations[0].service.uri;var m=a.prepareExpandData({urlTemplate:"",parameters:{names:p.queryOptions}},{},{urlComponent:{query:l.query(),fragment:l.fragment()}},r.siteAppSection,"");u=e.expand("{+rootPath}/{+resourcePath}{?queryParams*}",{rootPath:p.rootPath,resourcePath:p.resourcePath,queryParams:m.oResolvedParameters}).toString();sap.ui.require(["sap/ui/thirdparty/datajs"],function(e){e.read({requestUri:u,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}},function(e){var a=c.get("transformAppLaunchQueryString.value",e);if(a===undefined){a=c.get("transformAppLaunchIntent.value",e)}if(a===undefined){a=c.get("transformAppLaunchQueryString.queryString",e)}t.info("URL Transformation Succeeded",JSON.stringify({URLBeforeTransformation:n,URLAfterTransformation:a}),"sap.ushell.ApplicationType");if(o.transformations[0].sourceURLComponent===undefined){o.transformations[0].sourceURLComponent="query"}if(o.transformations[0].sourceURLComponent==="query"||o.transformations[0].sourceURLComponent==="fragment"){n=l[o.transformations[0].sourceURLComponent].apply(l,[a]).toString()}else{t.error("The "+o.transformations[0].sourceURLComponent+" component of the URL in URI.js is not transformed","","sap.ushell.ApplicationType")}i(n)},function(e){t.error("URL Transformation Failed",JSON.stringify(e),"sap.ushell.ApplicationType");i(n)})})}else{i(n)}})}function W(e,t){if(typeof e.enabled==="boolean"){return e.enabled}var n=a.prepareExpandData({urlTemplate:"",parameters:{names:{enabled:e.enabled}}},{},{},t.siteAppSection,"");return typeof n.oResolvedParameters.enabled==="boolean"?n.oResolvedParameters.enabled:false}function N(t,n,a){var i=t.inbound,o=i&&i.resolutionResult,l={};var c=new e(n);var f=u({},t.mappedIntentParamsPlusSimpleDefaults);if(t.inbound&&t.inbound.action==="launchURL"&&t.inbound.semanticObject==="Shell"){delete f["sap-external-url"]}var m=f["sap-system"]&&f["sap-system"][0];var d=f["sap-system-src"]&&f["sap-system-src"][0];l["sap-system"]=m;delete f["sap-system"];if(typeof d==="string"){l["sap-system-src"]=d;delete f["sap-system-src"]}return new Promise(function(e,t){if(s.absoluteUrlDefinedByUser(c,o.systemAlias,o.systemAliasSemantics)){e(n)}else{r.spliceSapSystemIntoURI(c,o.systemAlias,m,d,"URL",o.systemAliasSemantics||r.SYSTEM_ALIAS_SEMANTICS.applied,a).fail(t).done(function(t){var n=t.toString();e(n)})}}).then(function(e){var t=false,n,a=p.last("/core/navigation/flpURLDetectionPattern"),r=new RegExp(a);if(f&&f.hasOwnProperty("sap-params-append")){delete f["sap-params-append"];t=true}n=s.getURLParsing().paramsToString(f);return r.test(e)||t===true?s.appendParametersToIntentURL(f,e):s.appendParametersToUrl(n,e)},Promise.reject.bind(Promise)).then(function(e){["additionalInformation","applicationDependencies","systemAlias"].forEach(function(e){if(i.resolutionResult.hasOwnProperty(e)){l[e]=i.resolutionResult[e]}});l.url=e;l.text=i.title;l.applicationType="URL";return Promise.resolve(l)},Promise.reject.bind(Promise))}var F={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(e){var t=e.inbound.hasOwnProperty("templateContext");return t?O.apply(null,arguments):N.apply(null,arguments)},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,enableWdaCompatibilityMode:p.last("/core/navigation/enableWdaCompatibilityMode"),generateResolutionResult:d,easyAccessMenu:{intent:"Shell-startWDA",resolver:i.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:h,easyAccessMenu:{intent:"Shell-startGUI",resolver:o.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:y,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:g,defaultFullWidthSetting:false}};function j(){return Object.keys(F).map(function(e){return F[e]}).filter(function(e){return typeof e.easyAccessMenu==="object"})}function q(){var e={};j().forEach(function(t){e[t.easyAccessMenu.intent]=t.easyAccessMenu.resolver});return function(t,n){if(e[t]&&(!n||n!=="SAPUI5")){return e[t]}return null}}function k(e){if(!F[e]){return false}return F[e].defaultFullWidthSetting}Object.defineProperty(F,"enum",{value:Object.keys(F).reduce(function(e,t){if(F[t].type){e[t]=F[t].type}return e},{})});var H={getEasyAccessMenuResolver:q(),getEasyAccessMenuDefinitions:j,getDefaultFullWidthSetting:k,handleURLTransformation:E};Object.keys(H).forEach(function(e){Object.defineProperty(F,e,{value:H[e]})});return F},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Config", ["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(e,n,t){"use strict";var r=n.createConfigContract(window["sap-ushell-config"]);var a=e.createChannel(r);var c=Object.keys(a).reduce(function(n,t){n[t]=function(){if(!a){a=e.createChannel(r)}return a[t].apply(a,arguments)};return n},{_reset:function(){a=null},registerConfiguration:function(e,n){r=n},createModel:function(n,c){if(!a){a=e.createChannel(r)}return t.createModel(a,r,n,c)}});return c},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Container", ["sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/System","sap/ushell/Ui5ServiceFactory","sap/ushell/Ui5NativeServiceFactory","sap/ui/base/EventProvider","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ui/thirdparty/URI","sap/ui/util/Mobile","sap/base/util/uid","sap/base/assert","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/EventHub","sap/ushell/User"],function(e,t,r,n,i,o,a,s,u,l,c,f,d,g,jQuery,h,p){"use strict";var v="sap.ushell.services.Container",m="sap.ushell.Container.dirtyState.",y={},S,w,C,D=[];function P(){close()}function b(){document.location="about:blank"}function E(e){if(w&&w[e]){return w[e]}return"sap.ushell.adapters."+e}function L(e){return S.services&&S.services[e]||{}}function A(e,t,r,n,i){var o=L(e).adapter||{},a;function s(e){var n=sap.ui.requireSync(e);return new n(t,r,{config:o.config||{}})}function u(e){return new Promise(function(n,i){sap.ui.require([e],function(e){var i=new e(t,r,{config:o.config||{}});n(i)},i)})}if(i===true){a=o.module;if(a===undefined){return n?Promise.resolve():undefined}}else{a=o.module||E(t.getPlatform())+"."+e+"Adapter"}var l=a.replace(/\./g,"/");if(n){return u(l)}return s(l)}function I(n){var i=new o,a=false,c=[],p={},w="sap.ushell.Container."+n.getSystem().getPlatform()+".remoteSystem.",C={},E,I,R=t.getLocalStorage(),F=new t.Map,U=new t.Map,N="sap.ushell.Container."+n.getSystem().getPlatform()+".sessionTermination",M=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon()}};this.createRenderer=function(e,r){if(typeof e==="boolean"){r=e;e=undefined}var n={async:!!r};var o;var a;u.start("FLP:Container.InitLoading","Initial Loading","FLP");t.setPerformanceMark("FLP - renderer created");e=e||S.defaultRenderer;if(!e){throw new Error("Missing renderer name")}a=S.renderers&&S.renderers[e]||{};o=a.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);if(a.componentData&&a.componentData.config){n.config=a.componentData.config}function l(t){var r=sap.ui.requireSync(t);var o=new r({componentData:n});var a;var u=sap.ui.require("sap/ui/core/UIComponent");if(o instanceof u){a=new sap.ui.core.ComponentContainer({component:o,height:"100%",width:"100%"})}else{a=o}if(!(a instanceof s)){throw new Error("Unsupported renderer type for name "+e)}f(a);p[e]=o;i.fireEvent("rendererCreated",{renderer:o});return a}function c(t){return new Promise(function(r,o){sap.ui.require([t,"sap/ui/core/ComponentContainer","sap/ui/core/UIComponent","sap/ui/core/routing/Router"],function(t,a,u){var l=new t({componentData:n});if(l instanceof u){var c=new a({component:l,height:"100%",width:"100%",async:true});f(c);p[e]=l;l.rootControlLoaded().then(function(){i.fireEvent("rendererCreated",{renderer:l});r(c)})}else if(l instanceof s){f(l);p[e]=l;i.fireEvent("rendererCreated",{renderer:l});r(l)}else{o(new Error("Unsupported renderer type!"))}})})}function f(e){e.placeAt=function(e,t){var r=e,n="canvas",i=document.body;if(e===i.id){r=document.createElement("div");r.setAttribute("id",n);r.classList.add("sapUShellFullHeight");switch(t){case"first":if(i.firstChild){i.insertBefore(r,i.firstChild);break}case"only":i.innerHTML="";default:i.appendChild(r)}e=n;t=""}s.prototype.placeAt.call(this,e,t)}}var d=o.replace(/\./g,"/");if(r){return c(d)}g.error("sap.ushell.Container.createRenderer() should always be called with bAsync:true.");return l(d)};this.getRenderer=function(e){var t,r;e=e||S.defaultRenderer;if(e){t=p[e]}else{r=Object.keys(p);if(r.length===1){t=p[r[0]]}else{g.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",null,v)}}if(t&&t.isA("sap.ui.core.ComponentContainer")){return t.getComponentInstance()}return t};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var e,r=new jQuery.Deferred,n=f(),i,o=0,a=this.DirtyState.CLEAN;function s(){if(o===0||a===M.DirtyState.DIRTY){r.resolve(a);g.debug("getGlobalDirty() Resolving: "+a,null,"sap.ushell.Container")}}function u(e){if(e.key.indexOf(m)===0&&e.newValue!==M.DirtyState.INITIAL&&e.newValue!==M.DirtyState.PENDING){g.debug("getGlobalDirty() Receiving event key: "+e.key+" value: "+e.newValue,null,"sap.ushell.Container");if(e.newValue===M.DirtyState.DIRTY||e.newValue===M.DirtyState.MAYBE_DIRTY){a=e.newValue}o-=1;s()}}try{R.setItem(n,"CHECK");R.removeItem(n)}catch(e){g.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return r.resolve(this.DirtyState.MAYBE_DIRTY).promise()}if(E){throw new Error("getGlobalDirty already called!")}E=r;window.addEventListener("storage",u);r.always(function(){window.removeEventListener("storage",u);E=undefined});for(e=R.length-1;e>=0;e-=1){i=R.key(e);if(i.indexOf(m)===0){if(R.getItem(i)==="PENDING"){R.removeItem(i);g.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+i,null,"sap.ushell.Container")}else{o+=1;t.localStorageSetItem(i,this.DirtyState.PENDING,true);g.debug("getGlobalDirty() Requesting status for: "+i,null,"sap.ushell.Container")}}}s();setTimeout(function(){if(r.state()!=="resolved"){r.resolve("MAYBE_DIRTY");g.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container")}},o*2e3);return r.promise()};this.getLogonSystem=function(){return n.getSystem()};this.getUser=function(){return n.getUser()};this.getDirtyFlag=function(){var e=a;var t=this._oShellNavigationService.getNavigationContext();for(var r=0;r<c.length;r++){e=e||c[r](t)}return e};this.fnAsyncDirtyStateProvider=null;this.getDirtyFlagsAsync=function(){if(!this.fnAsyncDirtyStateProvider){return Promise.resolve(this.getDirtyFlag())}var e=this._oShellNavigationService.getNavigationContext();return this.fnAsyncDirtyStateProvider(e).then(function(e){return e||this.getDirtyFlag()}.bind(this))};this.isAsyncDirtyStateProviderSet=function(){return typeof this.fnAsyncDirtyStateProvider==="function"};this.setAsyncDirtyStateProvider=function(e){this.fnAsyncDirtyStateProvider=e};this.setDirtyFlag=function(e){a=e};this.sessionKeepAlive=function(){if(n.sessionKeepAlive){n.sessionKeepAlive()}};this.extendSession=function(){h.emit("nwbcUserIsActive",Date.now())};this.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}c.push(e)};this.deregisterDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function")}var t=-1;for(var r=c.length-1;r>=0;r--){if(c[r]===e){t=r;break}}if(t===-1){return}c.splice(t,1)};this.getService=function(e,t,r){return M._getService.apply(M,arguments)};this.getServiceAsync=function(e,t){return M._getService(e,t,true)};this._getService=function(e,t,r){var i={},o,a,s,u,l,c;function f(r){var n=new jQuery.Deferred;if(!r){throw new Error("Missing system")}n.resolve(A(e,r,t));sap.ushell.Container.addRemoteSystem(r);return n.promise()}if(!e){throw new Error("Missing service name")}if(e.indexOf(".")>=0){throw new Error("Unsupported service name")}l=L(e);o=l.module||"sap.ushell.services."+e;a=o+"/"+(t||"");c={config:l.config||{}};function d(e,r){i.createAdapter=f;return new e(r,i,t,c)}function h(r,o){var s;if(F.containsKey(a)){s=F.get(a)}else if(r.hasNoAdapter){s=new r(i,t,c)}else{u=A(e,n.getSystem(),t,o,r.useConfiguredAdapterOnly);if(o){return u.then(function(e){var t=d(r,e);F.put(a,t);return t})}s=d(r,u)}F.put(a,s);return o?Promise.resolve(s):s}if(!F.containsKey(a)){if(r){if(!U.containsKey(a)){var p=new Promise(function(e,t){sap.ui.require([o.replace(/[.]/g,"/")],function(t){e(h(t,true))},t)});U.put(a,p);return p}return U.get(a)}g.error("Deprecated API call of 'sap.ushell.Container.getService'. Please use 'getServiceAsync' instead",null,"sap.ushell.services.Container");s=sap.ui.requireSync(o.replace(/[.]/g,"/"));return h(s)}if(r){return Promise.resolve(F.get(a))}return F.get(a)};function T(){var e,t,n,i;for(n=R.length-1;n>=0;n-=1){i=R.key(n);if(i.indexOf(w)===0){try{e=i.substring(w.length);t=JSON.parse(R.getItem(i));C[e]=new r(t)}catch(e){R.removeItem(i)}}}return C}function _(){if(typeof OData==="undefined"){return}function e(e,t,r){g.warning(e,null,"sap.ushell.Container");if(r){setTimeout(r.bind(null,e),5e3)}return{abort:function(){return}}}OData.read=function(t,r,n){return e("OData.read('"+(t&&t.Uri?t.requestUri:t)+"') disabled during logout processing",r,n)};OData.request=function(t,r,n){return e("OData.request('"+(t?t.requestUri:"")+"') disabled during logout processing",r,n)}}this.addRemoteSystem=function(e){var r=e.getAlias(),n=C[r];if(this._isLocalSystem(e)){return}if(n){if(n.toString()===e.toString()){return}g.warning("Replacing "+n+" by "+e,null,"sap.ushell.Container")}else{g.debug("Added "+e,null,"sap.ushell.Container")}C[r]=e;t.localStorageSetItem(w+r,e)};this._isLocalSystem=function(e){var r=e.getAlias();if(r&&r.toUpperCase()==="LOCAL"){return true}var n=new l(t.getLocationHref()),i=this.getLogonSystem().getClient()||"";if(e.getBaseUrl()===n.origin()&&e.getClient()===i){return true}return false};this.addRemoteSystemForServiceUrl=function(e){var t,n={baseUrl:";o="};if(!e||e.charAt(0)!=="/"||e.indexOf("//")===0){return}t=/^[^?]*;o=([^/;?]*)/.exec(e);if(t&&t.length>=2){n.alias=t[1]}e=e.replace(/;[^/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){n.platform="hana";n.alias=n.alias||"hana"}else if(/^\/sap\/opu\//.test(e)){n.platform="abap"}if(n.alias&&n.platform){this.addRemoteSystem(new r(n))}};this.attachLogoutEvent=function(e,t){var r=false;if(t===true){d(typeof e==="function","Container.attachLogoutEvent: fnFunction must be a function");for(var n=0;n<D.length;n++){if(D[n]===e){r=true;break}}if(!r){D.push(e)}}else{i.attachEvent("Logout",e)}};this.detachLogoutEvent=function(e){i.detachEvent("Logout",e);for(var t=0;t<D.length;t++){if(D[t]===e){D.splice(t,1);break}}};this.attachRendererCreatedEvent=function(e){i.attachEvent("rendererCreated",e)};this.detachRendererCreatedEvent=function(e){i.detachEvent("rendererCreated",e)};this.defaultLogout=function(){var e=new jQuery.Deferred;function r(){n.logout(true).always(function(){R.removeItem(N);e.resolve()})}function o(){var e=new jQuery.Deferred,t=e.promise(),n=[];if(D.length>0){for(var o=0;o<D.length;o++){n.push(D[o]())}Promise.all(n).then(e.resolve);setTimeout(e.resolve,4e3)}else{e.resolve()}t.done(function(){if(i.fireEvent("Logout",true)){r()}else{setTimeout(r,1e3)}})}function a(){var e,r=[];if(I){window.removeEventListener("storage",I)}t.localStorageSetItem(N,"pending");M._suppressOData();e=M._getRemoteSystems();Object.keys(e).forEach(function(t){try{r.push(A("Container",e[t]).logout(false))}catch(e){g.warning("Could not create adapter for "+t,e.toString(),"sap.ushell.Container")}R.removeItem(w+t)});jQuery.when.apply(jQuery,r).done(o)}if(typeof n.addFurtherRemoteSystems==="function"){n.addFurtherRemoteSystems().always(a)}else{a()}return e.promise()};this.logout=this.defaultLogout;this.registerLogout=function(e){this.logout=e};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.logonFrameProvider=e}};this.setXhrLogonTimeout=function(e,t){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(e,t)}};this.getFLPConfig=function(){var e=new Promise(function(e,t){var r={URL:this.getFLPUrl()};if(y.CDMPromise){y.CDMPromise.then(function(t){t.getSiteWithoutPersonalization().then(function(t){r.scopeId=t.site.identification.id;e(r)})})}else{e(r)}}.bind(this));return e};this.getFLPUrl=function(r){var n=t.getLocationHref(),i=n.indexOf(e.getShellHash(n));if(i===-1||r===true){return n}return n.substr(0,i-1)};this.getFLPUrlAsync=function(e){return(new jQuery.Deferred).resolve(M.getFLPUrl(e)).promise()};this.inAppRuntime=function(){return false};this.runningInIframe=this.inAppRuntime;this._getAdapter=function(){return n};this.getFLPPlatform=function(e){if(e===true){return S.flpPlatform}return Promise.resolve(S.flpPlatform)};this._closeWindow=P;this._redirectWindow=b;this._getRemoteSystems=T;this._suppressOData=_;sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,t,r){M.addRemoteSystemForServiceUrl(r)});if(typeof n.logoutRedirect==="function"){I=function(e){function r(){M._closeWindow();M._redirectWindow()}if(sap.ushell.Container!==M){return}if(e.key.indexOf(w)===0&&e.newValue&&e.newValue!==R.getItem(e.key)){t.localStorageSetItem(e.key,e.newValue)}if(e.key===N){if(e.newValue==="pending"){M._suppressOData();if(i.fireEvent("Logout",true)){r()}else{setTimeout(r,1e3)}}}};window.addEventListener("storage",I)}this._getFunctionsForUnitTest=function(){return{createAdapter:A}}}function R(e,t){e.forEach(function(e){var r=n.createServiceFactory(e,t);a.register("sap.ushell.ui5service."+e,r)})}function F(e){e.forEach(function(e){var t=i.createServiceFactory(e);a.register("sap.ushell.ui5service."+e,t)})}sap.ushell=sap.ushell||{};sap.ushell.bootstrap=function(e,n){var i,o=new jQuery.Deferred;c.init();if(sap.ushell.Container!==undefined){i=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+C);g.error(i,i.stack,v);throw i}C=(new Error).stack;S=jQuery.extend({},true,window["sap-ushell-config"]||{});w=n;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"])}R(["Personalization","URLParsing","CrossApplicationNavigation"],true);R(["Configuration"],false);F(["CardNavigation","CardUserRecents","CardUserFrequents"]);var a=new r({alias:"",platform:S.platform||e});A("Container",a,null,true).then(function(e){e.load().then(function(){function t(){var e,t;var r=window["sap-ushell-config"];if(!r||!r.services){return false}e=r.services.PluginManager;t=e&&e.config;return t&&t.loadPluginsFromSite}sap.ushell.Container=new I(e);var i=[sap.ushell.Container.getServiceAsync("PluginManager")];if(t()){y.CDMPromise=sap.ushell.Container.getServiceAsync("CommonDataModel");i.push(y.CDMPromise)}Promise.all(i).then(function(e){r(e)}).then(n);var a=[];if(S.preloadServices!==undefined&&Array.isArray(S.preloadServices)){S.preloadServices.forEach(function(e){a.push(sap.ushell.Container.getServiceAsync(e))});g.error("Ushell Config's preloadServices should not be used!")}var s=sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){sap.ushell.Container._oShellNavigationService=e});a.push(s);Promise.all(a).then(function(){o.resolve()})});function r(e){var t=e[0];var r=e[1];var n=r?r.getPlugins():jQuery.when({});n.then(function(e){var r=jQuery.extend(true,{},S.bootstrapPlugins,e);t.registerPlugins(r);try{t.loadPlugins("EarlyLoading").catch(function(){g.error("Error loading S/4's my home plugin")})}catch(e){g.error("Error loading S/4's my home plugin")}})}function n(){i();sap.ui.require(["sap/ushell/Config"],function(e){a(e)})}function i(){if(t.hasFLPReady2NotificationCapability()){sap.ui.require(["sap/ushell/NWBCInterface"],function(e){t.getPrivateEpcm().doEventFlpReady2(e)})}else if(t.hasFLPReadyNotificationCapability()){t.getPrivateEpcm().doEventFlpReady()}}function a(e){if(e.last("/core/darkMode/enabled")){sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(e){if(e&&e.setup){e.setup()}})}}});return o.promise()}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/EventHub", [],function(){"use strict";var e={pendingEvents:{},subscribers:{},dispatchOperations:{},store:n(),dispatchTimeoutIds:new window.Set};function n(){return{nextKey:0,objectToKey:new window.WeakMap,keyToObject:{}}}function t(e,n,t){var r=sap.ui.require("sap/base/Log");if(r){r.error(e,n,"sap.ushell.EventHub");return}}function r(e){var n="An exception was raised while executing a registered callback on event '"+e.eventName+"'",r="Data passed to the event were: '"+e.eventData+"'";if(e.error.stack){r+=" Error details: "+e.error.stack}t(n,r,e.fnCausedBy)}function i(e,n,t){var i;try{i=n(t)}catch(i){r({eventName:e,eventData:t,fnCausedBy:n,error:i})}return i}function u(e){if(typeof arguments[2]==="function"){return P(e,arguments[2])}return arguments[2]}function o(e){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return E(e,arguments[2])}return arguments[2]}function a(e,n,r){if(typeof n==="object"||typeof n==="function"){try{var i=[n,u.bind(null,e)];if(r){i.push(3)}return JSON.stringify.apply(JSON,i)}catch(e){t(""+e,e.stack,a)}}return n}function c(e,n){try{return JSON.parse(n,o.bind(null,e))}catch(e){return n}}function s(e,n,t){if(!e.subscribers[n]){e.subscribers[n]=[]}e.subscribers[n].push(t)}function f(e,n,t){e.subscribers[n]=(e.subscribers[n]||[]).map(function(e){return e.filter(function(e){return e.fn!==t})}).filter(function(e){return e.length>0})}function l(){var e,n=new Promise(function(n){e=n}),t={dispatching:n,cancelled:false,cancel:function(){t.cancelled=true},complete:function(){e()}};return t}function d(e,n){if(!e.subscribers.hasOwnProperty(n)){return null}var t=l(),r=e.subscribers[n],i=r.map(function(r){return p(e,n,r,t,0)});Promise.all(i).then(t.complete,t.complete);return t}function p(e,n,t,r,i){var u=t.length,o=t.slice(i);return o.reduce(function(i,u){return i.then(function(i){if(r.cancelled){if(i){f(e,n,u.fn)}return i}return h(e,n,u,t).then(function(e){if(e){r.cancelled=true}return e})})},Promise.resolve(false)).then(function(i){if(!i&&u<t.length){return p(e,n,t,r,u)}return i})}function h(e,n,t,r){return new Promise(function(u){var o=c(e,e.pendingEvents[n]);var a=setTimeout(function(){e.dispatchTimeoutIds.delete(a);if(t.called&&r.offed){u(false);return}t.called=true;var c=r.offed;i(n,t.fn,o);var s=r.offed;if(s){f(e,n,t.fn)}u(!c&&s)},0);e.dispatchTimeoutIds.add(a)})}function v(e,n,t){return function(){t.forEach(function(t){if(t.called){f(e,n,t.fn)}});t.offed=true;return{off:v(e,n,[])}}}function b(e,n,t){return function(r){var i={fn:r,called:false};t.push(i);if(e.pendingEvents.hasOwnProperty(n)){var u=e.dispatchOperations[n];if(!u){h(e,n,i,t)}else{u.dispatching.then(function(){if(!i.called){h(e,n,i,t)}})}}return{do:b(e,n,t),off:v(e,n,t)}}}function y(e,n){var t=[];s(e,n,t);return{do:b(e,n,t),off:v(e,n,t)}}function m(e,n){var t=y(e,n);t.off();return t}function w(e,n,t,r){var i=a(e,t);if(!r&&e.pendingEvents.hasOwnProperty(n)&&e.pendingEvents[n]===i){return this}e.pendingEvents[n]=i;var u=e.dispatchOperations[n];if(u){u.cancel()}var o=d(e,n);e.dispatchOperations[n]=o;return this}function g(e,n){return c(e,e.pendingEvents[n])}function O(){var e=Array.prototype.slice.call(arguments);e.shift();var n=0,t=new Array(e.length).join(",").split(",").map(function(){return 1}),r=[],i={do:function(u){e.forEach(function(i,o){i.do(function(i,o){r[i]=o;n+=t[i];t[i]=0;if(n===e.length){u.apply(null,r)}}.bind(null,o))});return{off:i.off}},off:function(){var n=e.reduce(function(e,n){return n.off()},function(){});return{off:n}}};return i}function j(e,n){var t=e.dispatchOperations[n];return t?t.dispatching:Promise.resolve()}function P(e,n){if(e.store.objectToKey.has(n)){return e.store.objectToKey.get(n)}e.store.nextKey++;var t="<"+typeof n+">#"+e.store.nextKey;e.store.keyToObject[t]=n;e.store.objectToKey.set(n,t);return t}function E(e,n){return e.store.keyToObject[n]}function k(e){var t={};t.emit=w.bind(t,e);t.on=y.bind(null,e);t.once=m.bind(null,e);t.last=g.bind(null,e);t.join=O.bind(null,e);t.wait=j.bind(null,e);t._reset=function(e){e.pendingEvents={};e.subscribers={};e.dispatchOperations={};e.store=n();e.dispatchTimeoutIds.forEach(clearTimeout);e.dispatchTimeoutIds=new window.Set}.bind(null,e);return t}function T(e){var t={pendingEvents:{},subscribers:{},dispatchOperations:{},store:n(),dispatchTimeoutIds:new window.Set},r=k(t),i=c(t,a(t,e));function u(e){var n=e.charAt(0);if(n.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+n+"'. Please ensure path starts with a non alphanumeric character")}var t=e.split(n);t.shift();return t}function o(e,n){var t=e,r="";if(arguments.length===2){t=n;r=e}return r+"/"+t.join("/")}function s(e){return Object.prototype.toString.apply(e)==="[object Array]"}function f(e){return Object(e)!==e}function l(e){return(s(e)?e.length:Object.keys(e).length)===0}function d(e,n,r,i){var u="",c=e,l=[];r.reduce(function(e,n,d){u=o(u,[n]);c=c[n];if(d===r.length-1){if(!f(i)&&!f(c)&&Object.keys(c).length>0){var p,h=Object.keys(c).reduce(function(e,n){e[n]=true;return e},{}),v=Object.keys(i).some(function(e){p=e;var n=h.hasOwnProperty(e);delete h[e];var t=!f(c[e])&&Object.keys(c[e]).length>0;return!n||t}),b=Object.keys(h).length>0,y=v||b;if(y){var m=v?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+p+"'.":"Some keys are missing in the event data: "+Object.keys(h).join(", ")+".";throw new Error("Cannot write value '"+a(t,i,true)+"' to path '"+u+"'. "+m+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value")}var w=Object.keys(i).map(function(e){return{serializedPath:o(u,[e]),value:i[e]}});Array.prototype.push.apply(l,w)}e[n]=i}else if(!e.hasOwnProperty(n)){e[n]=s(c)?[]:{}}l.push({serializedPath:u,value:e[n]});return e[n]},n);return l}function p(e,n){var r="",i=n.reduce(function(e,n){r+="/"+n;if(s(e)&&!n.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+n+"' provided in path '"+r+"'")}if(!e.hasOwnProperty(n)){throw new Error("The item '"+n+"' from path "+r+" cannot be accessed in the object: "+a(t,e))}return e[n]},e);return i}function h(e,n,t){return n.reduce(function(e,r,i){var u=i===n.length-1;if(e.hasOwnProperty(r)){return e[r]}return u?t:{}},e)}function v(e,n){n.pop();var t=e,r=[];return n.reduce(function(e,n){t=t[n];r.push(n);e.push({serializedPath:o(r),value:t});return e},[])}function b(e){return e.map(function(e){var n=e.serializedPath;if(!t.subscribers.hasOwnProperty(n)||t.subscribers[n].length===0){return null}return{path:n,value:e.value}}).filter(function(e){return!!e})}function y(n,t){var o=u(n);p(e,o);var a=d(e,i,o,t);a.forEach(function(e){r.emit(e.serializedPath,e.value)})}function m(n){var t=u(n),r=p(e,t);return h(i,t,r)}function w(n){var i=u(n),s=o(i),d=r.last(s),h=t.pendingEvents.hasOwnProperty(s);if(h){return r.on(s)}d=p(e,i);if(typeof d!=="undefined"&&(f(d)||!l(c(r,a(r,d))))){r.emit(s,d)}return r.on(s)}function g(e){var n=w(e);n.off();return n}function j(e){var n=u(e),t=v(i,n),o=b(t).map(function(e){return r.wait(e.path,e.value)});return Promise.all(o.concat(r.wait(e)))}return{emit:y,on:w,once:g,last:m,wait:j,join:O.bind(null,r)}}var x=k(e);x.createChannel=T.bind(null);return x});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Fiori20Adapter", ["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher","sap/base/util/extend"],function(e,t,i,n,r,o,a){"use strict";var s;i._fnOnInstanceDestroy=function(e){if(e._fioriAdapter){e._fioriAdapter.destroy()}};var f=e.extend("AppInfo",{constructor:function(t){e.call(this);this._oComponent=t},getDefaultTitle:function(){var e,t,i=this._oComponent.getMetadata();var n=i.getManifestEntry("sap.app");if(n&&n.title){e=n.title;if(this._isLocalizationKey(e)){t=n.i18n||"i18n/i18n.properties";return this._getLocalized(e,t)}return e}var r=i.getManifestEntry("sap.ui5");if(r&&r.config&&r.config.resourceBundle&&r.config.titleResource){e=r.config.titleResource;t=r.config.resourceBundle;return this._getLocalized(e,t)}return},_getLocalized:function(e,t){var i=new n({bundleUrl:sap.ui.require.toUrl(this._oComponent.getMetadata().getComponentName())+"/"+t});return i.getResourceBundle().getText(e.replace(/^{{/,"").replace(/}}$/,""))},_isLocalizationKey:function(e){return e.indexOf("{{")===0&&e.indexOf("}}")>0}});var u=e.extend("HeaderInfo",{constructor:function(t,i,n){e.call(this);this._oConfig=i;this._oAppInfo=n;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}}},registerView:function(e){if(this._oConfig.bMoveTitle===true){if(!e.oTitleInfo&&e.oSubTitleInfo){e.oTitleInfo=e.oSubTitleInfo}this._oCurrentViewInfo=e;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==s.getTitle()){s.setTitle(t)}this._updateHierarchy()}this._setBackNavigation(e.oBackButton,e.oAdaptOptions)},_setBackNavigation:function(e,t){if(t&&t.bHideBackButton===false){return}var i;if(e){i=e.firePress.bind(e)}s.setBackNavigation(i)},_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return}if(!this._oCurrentViewInfo){return}var e=true,t="#"+o.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var n=this._aHierarchy[i],r=n.id===this._oCurrentViewInfo.sViewId,a=n.intent===t;if(r||a){e=false;n=this._updateHierarchyEntry(n);this._aHierarchy[i]=n;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(r){n.intent=t}break}}if(e){this._aHierarchy.push(this._createHierarchyEntry())}var f=[];for(var u=this._aHierarchy.length-2;u>=0;u--){f.push(this._aHierarchy[u])}s.setHierarchy(this._deleteUndefinedProperties(f))},_createHierarchyEntry:function(){var e="#"+o.getHash(),t={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:e};return t},_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e},_deleteUndefinedProperties:function(e){e.forEach(function(e){for(var t in e){if(e.hasOwnProperty(t)&&!e[t]&&t!=="title"){delete e[t]}}});return e}});var h=e.extend("sap.ushell.Fiori20Adapter",{constructor:function(t,i){e.call(this);this._oComponent=t;this._oConfig=i;this._oHeaderInfo=new u(t,i,new f(t));if(r){r.attachViewChange(this._onViewChange,this)}},init:function(){if(!r){return}var e=a({},this._oConfig);r.traverse(this._oComponent.getAggregation("rootControl"),e)},destroy:function(){if(r){r.detachViewChange(this._onViewChange,this)}},_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters())}});h.applyTo=function(e,n,r,o){var a=e instanceof i?e:t.getOwnerComponentFor(e);if(!a){a=n}if(a&&!a._fioriAdapter){s=o;a._fioriAdapter=new h(a,r);a._fioriAdapter.init()}};return h});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Fiori20AdapterTest", ["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry","sap/base/Log","sap/base/util/Version","sap/base/util/isEmptyObject"],function(e,i,t,a,n,r,s,o){"use strict";var u={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_ALLOWLIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(e){var i=this._getURLParamConfiguration();if(!i){i=this._getMetadataConfiguration(e)}if(!i){i=this._getDefaultConfiguration(e)}i.iSearchDepth=i.iSearchDepth||u.I_DEFAULT_SEARCH_DEPTH;if(typeof i.iSearchDepth==="string"&&!isNaN(i.iSearchDepth)){i.iSearchDepth=parseInt(i.iSearchDepth,10)}return i},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return}if(!this._isURLParameterSpecified(u.S_FIORI20ADAPTER_URL_PARAM_NAME)){return}var e=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),i,t;if(typeof e==="boolean"){i=e}else if(e&&e.length>=1){t=e}if(!t&&i===undefined){return}return{bStylePage:t?t.indexOf("style")>-1:i,bMoveTitle:t?t.indexOf("title")>-1:i,bHideBackButton:t?t.indexOf("back")>-1:i,bCollapseHeader:t?t.indexOf("collapse")>-1:i,bHierarchy:t?t.indexOf("hierarchy")>-1:i}},_getMetadataConfiguration:function(e){var i=e.getMetadata("config").getConfig(u.S_FIORI20ADAPTER_METADATA_PARAM_NAME),t,a;if(typeof i==="boolean"){t=i}else if(typeof i==="object"&&!o(i)){a=i}if(!a&&t===undefined){return}return{bStylePage:a?this._isSgnTrue(a.style):t,bMoveTitle:a?this._isSgnTrue(a.title):t,bHideBackButton:a?this._isSgnTrue(a.back):t,bCollapseHeader:a?this._isSgnTrue(a.collapse):t,bHierarchy:a?this._isSgnTrue(a.hierarchy):t,bLateAdaptation:a?this._isSgnTrue(a.lateAdaptation):u.B_DEFAULT_LATE_ADAPTATION}},_getDefaultConfiguration:function(e){var i=this._hasMinVersionSmallerThan(e,"1.42")&&this._isAllowed(e);return{bStylePage:i,bMoveTitle:i,bHideBackButton:i,bCollapseHeader:i,bHierarchy:i}},_isURLParameterSpecified:function(i){var t=new e(window.location.href),a=t.mParams&&t.mParams[i];return a&&a.length>0},_isAllowed:function(e){var i=e.getMetadata().getName();for(var t=0;t<u.A_ALLOWLIST.length;t++){var a=u.A_ALLOWLIST[t].substring(0,u.A_ALLOWLIST[t].length-2);if(this._isPrefixedString(i,a)){return true}}return false},_isAdaptationRequired:function(e){for(var i in e){if(e[i]===true){return true}}return false},_isPrefixedString:function(e,i){return e&&i&&e.substring(0,i.length)===i},_hasMinVersionSmallerThan:function(e,i){var t=e.getMetadata().getManifestEntry("sap.ui5"),a=true;if(t&&t.dependencies&&t.dependencies.minUI5Version){var n=new s(t.dependencies.minUI5Version);a=n.compareTo(new s(i))<0}return a},_isSgnTrue:function(e){return e===true||e==="true"}};i._fnOnInstanceInitialized=function(e){var i=e.getAggregation("rootControl");if(!i||i.getId()==="navContainerFlp"||e.getId().indexOf("application-")!==0){return}var s=u.getConfiguration(e);if(!u._isAdaptationRequired(s)){return}if(!a.service||!n||typeof n.get!=="function"){r.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return}var o={onBeforeRendering:function(){i.removeEventDelegate(o);var a=n.get("sap.ushell.ui5service.ShellUIService"),u=a&&a.createInstance();if(!a||!u){r.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return}u.then(function(a){if(a&&a.getUxdVersion()===2){t.applyTo(i,e,s,a)}},function(e){r.warning("Fiori20Adapter not loaded as ShellUIService is not available",e,"sap.ushell.Fiori20AdapterTest")})}};i.addEventDelegate(o)}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/SessionHandler", ["sap/ushell/resources","sap/ushell/Config","sap/ushell/utils","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/json/JSONModel","sap/m/VBox","sap/ui/core/library","sap/m/library","sap/ushell/ui/launchpad/LoadingDialog","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log","sap/ushell/EventHub"],function(e,i,t,s,n,o,r,a,u,l,d,jQuery,h,c,m){"use strict";var g=l.ButtonType;var f=u.ValueState;var p=false;var S=function(u){var l=this,S=false,T=false;this.init=function(e){c.debug("SessionHandler.oConfig.sessionTimeoutIntervalInMinutes: "+e.sessionTimeoutIntervalInMinutes,"","SessionHandler");c.debug("SessionHandler.oConfig.sessionTimeoutReminderInMinutes: "+e.sessionTimeoutReminderInMinutes,"","SessionHandler");c.debug("SessionHandler.oConfig.enableAutomaticSignout: "+e.enableAutomaticSignout,"","SessionHandler");if(e.enableAutomaticSignout===undefined){e.enableAutomaticSignout=false}if(e.sessionTimeoutReminderInMinutes===undefined){e.sessionTimeoutReminderInMinutes=0}if(e.sessionTimeoutIntervalInMinutes<=e.sessionTimeoutReminderInMinutes){e.sessionTimeoutReminderInMinutes=e.sessionTimeoutReminderInMinutes-1<0?0:e.sessionTimeoutReminderInMinutes-1;c.error("sessionTimeoutReminderInMinutes needs to be higher than sessionTimeoutIntervalInMinutes. sessionTimeoutReminderInMinutes adapted to: "+e.sessionTimeoutReminderInMinutes,"SessionHandler")}this.oConfig=e;this.oModel=new r;this.putTimestampInStorage(this._getCurrentDate());this.initLogout();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(e){this.oAppLifeCycleService=e;this.attachUserEvents()}.bind(this));if(e.sessionTimeoutIntervalInMinutes>0){this.initSessionTimeout()}if(e.sessionTimeoutTileStopRefreshIntervalInMinutes>0){this.initTileRequestTimeout()}m.on("nwbcUserIsActive").do(this.userActivityHandler.bind(this));S=true};this.initLogout=function(){if(T===false){sap.ushell.Container.registerLogout(this.logout);this.registerCommHandlers();T=true}};this.initSessionTimeout=function(){this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.oConfig.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.notifyServer();this.monitorUserIsInactive()};this.registerCommHandlers=function(){u.registerShellCommunicationHandler({"sap.ushell.sessionHandler":{oRequestCalls:{logout:{isActiveOnly:false,distributionType:["URL"]},extendSessionEvent:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{notifyUserActive:{executeServiceCallFn:function(){if(S===true){l.userActivityHandler()}return(new jQuery.Deferred).resolve().promise()}}}}})};this.monitorUserIsInactive=function(){c.debug("SessionHandler.monitorInactiveUser : Check started","*****","SessionHandler");var e=this.timeLastInteraction(),i=this.timePopup(),t=this.timeNow(),s=this.timeOver(),n=i-t,o=t-e,r;c.debug("SessionHandler.monitorUserIsInactive :: time since last interaction : "+o,"","SessionHandler");c.debug("SessionHandler.monitorUserIsInactive :: remaining time until dialog : "+n,"","SessionHandler");if(t<i){r=setTimeout(this.monitorUserIsInactive.bind(this),n*1e3);this.oMonitorUserIsInactiveTimer=this.oMonitorUserIsInactiveTimer||r;return}if(t>=i&&t<s&&this.oConfig.sessionTimeoutReminderInMinutes>0){this.detachUserEvents();this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();c.debug("SessionHandler.monitorUserIsInactive :: Dialog opened","","SessionHandler");this.monitorCountdown(true);this._createSystemNotification()}if(t>=s){c.debug("SessionHandler.monitorUserIsInactive :: Session over detected","","SessionHandler");this.handleSessionOver();return}c.debug("SessionHandler.monitorInactiveUser :: Check done","*****","SessionHandler")};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);sap.ui.getCore().getEventBus().publish("launchpad","sessionTimeout");if(this.oConfig.enableAutomaticSignout===true){c.debug("SessionHandler.handleSessionOver :: Automatic signout gets initiated","","SessionHandler");this.logout()}else{c.debug("SessionHandler.handleSessionOver :: Session expired dialog gets opened","","SessionHandler");this.createSessionExpiredDialog().open()}};this.notifyServer=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage());var i=e/(1e3*60);var s=this.oConfig.sessionTimeoutIntervalInMinutes*30*1e3;if(i<=this.oConfig.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();u.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{})}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),t.sanitizeTimeoutDelay(s))};this.monitorCountdown=function(e){if(e){c.debug("SessionHandler.monitorCountdown :: Initiated from outside","*****","SessionHandler")}else{c.debug("SessionHandler.monitorCountdown :: Initiated from internal call","**","SessionHandler")}var i=this.timeLastInteraction(),t=this.timePopup(),s=this.timeNow(),n=this.timeOver(),o=s-i;c.debug("SessionHandler.monitorCountdown :: timeNow : "+s,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: iTimeLastInteraction : "+i,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: timeSinceLastInteraction : "+o,"","SessionHandler");c.debug("SessionHandler.monitorCountdown :: iTimeOver : "+n,"","SessionHandler");if(s<t){c.debug("SessionHandler.monitorCountdown :: Auto-click","<=","SessionHandler");this.continueWorkingButtonPressHandler(true);return}var r=n-s;if(r>0){c.debug("SessionHandler.monitorCountdown :: Remaining seconds : "+r+" - iTimeOver : "+n,"","SessionHandler");this.oModel.setProperty("/SessionRemainingTimeInSeconds",r);this.remainingTimer=setTimeout(this.monitorCountdown.bind(this,false),500);return}if(r<=0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close()}this.handleSessionOver()}};this.initTileRequestTimeout=function(){this.checkStopBackendRequestRemainingTime();this.bBackendRequestsActive=true};this.checkStopBackendRequestRemainingTime=function(){var e=this._getCurrentDate()-new Date(this.getTimestampFromStorage());var i=e/(1e3*60);var s=this.oConfig.sessionTimeoutTileStopRefreshIntervalInMinutes;var n=(s-i)*60*1e3;if(i<s){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),t.sanitizeTimeoutDelay(n))}else if(s>0){this._setConnectionActive(false)}};this._setConnectionActive=function(e){if(e){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),0)}if(this.bBackendRequestsActive===e){return}sap.ui.getCore().getEventBus().publish("launchpad","setConnectionToServer",{active:e});if(!i.last("/core/spaces/enabled")){if(e){this._setTilesVisibleOnHomepage()}else{this._setTilesInvisibleOnHomepage()}}this.bBackendRequestsActive=e};this._setTilesVisibleOnHomepage=function(){sap.ui.require(["sap/ushell/utils"],function(e){e.handleTilesVisibility()})};this._setTilesInvisibleOnHomepage=function(){return new Promise(function(e,i){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(i){i.getGroups().then(function(t){var s=sap.ui.getCore().getEventBus();t.forEach(function(e){i.getGroupTiles(e).forEach(function(e){i.setTileVisible(e,false)})});s.publish("launchpad","visibleTilesChanged",[]);e()})})})};this.getLocalStorage=function(){if(this.oLocalStorage===undefined){var e=new h(this.oConfig&&this.oConfig.sessionType||h.Type.local);if(this._isLocalStorageSupported(e)){this.oLocalStorage=e}else{this.oLocalStorage=false}}return this.oLocalStorage};this._isLocalStorageSupported=function(e){var i;try{i=e.isSupported()}catch(e){i=false}if(!i){c.warning("SessionHandler._isLocalStorageSupported :: Failed to instantiate local storage handler: "+"Might be disabled by the browser!","","SessionHandler")}return i};this._createSystemNotification=function(){var i=function(){var i=this.oModel.getProperty("/SessionRemainingTimeInSeconds");var t=new Notification(e.i18n.getText("sessionTimeoutMessage_title"),{body:this.continueWorkingFormatter(i)});t.onclick=function(e){window.focus()}}.bind(this);if(!("Notification"in window)){return}else if(Notification.permission==="granted"){i()}else if(Notification.permission!=="denied"){Notification.requestPermission().then(function(e){if(e==="granted"){i()}})}};this.continueWorkingFormatter=function(i){var t=i>60,s,n,o;s=t?e.i18n.getText("sessionTimeoutMessage_units_minutes"):e.i18n.getText("sessionTimeoutMessage_units_seconds");n=t?Math.ceil(i/60):i;if(l.oConfig.enableAutomaticSignout){o=e.i18n.getText("sessionTimeoutMessage_kioskMode_main",[n,s])}else{o=e.i18n.getText("sessionTimeoutMessage_main",[n,s])}return o};this.createContinueWorkingDialog=function(){c.debug("SessionHandler.createContinueWorkingDialog :: Continue working dialog being created","","SessionHandler");this.oMessageVBox=new a;this.oSessionKeepAliveLabel=new o({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:this.continueWorkingFormatter}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.oConfig.enableAutomaticSignout===false){this.oLostDataReminder=new o({text:e.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder)}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new s("sapUshellKeepAliveDialog",{title:e.i18n.getText("sessionTimeoutMessage_title"),type:"Message",state:f.Warning,content:this.oMessageVBox,beginButton:this.createContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy()}.bind(this)}).addStyleClass("sapContrastPlus");if(this.oConfig.enableAutomaticSignout===true){this.oSignOutButton=new n({text:e.i18n.getText("logoutBtn_title"),tooltip:e.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton)}return this.oSessionKeepAliveDialog};this.createContinueWorkingButton=function(){return new n({text:e.i18n.getText("sessionTimeoutMessage_continue_button_title"),type:g.Emphasized,press:l.continueWorkingButtonPressHandler.bind(l,false)})};this.continueWorkingButtonPressHandler=function(e){c.debug("SessionHandler.continueWorkingButtonPressHandler :: Session was extended"+e?"automatically":"by user","","SessionHandler");if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close()}clearTimeout(this.remainingTimer);if(!e){this.putTimestampInStorage(this._getCurrentDate())}this.monitorUserIsInactive();this.attachUserEvents();u.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{})};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new s("sapUshellSessionTimedOutDialog",{title:e.i18n.getText("sessionExpiredMessage_title"),type:"Message",state:f.Warning,content:new o({text:e.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.createReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy()}.bind(this)}).addStyleClass("sapContrastPlus");return this.oSessionExpiredDialog};this.createReloadButton=function(){return new n({text:e.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){l.oSessionExpiredDialog.close();location.reload()}})};this.attachUserEvents=function(){jQuery(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));jQuery(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));this.oAppLifeCycleService.attachAppLoaded({},this.userActivityHandler,this)};this.detachUserEvents=function(){jQuery(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");jQuery(document).off("keydown.sessionTimeout");jQuery(document).off("touchstart.sessionTimeout");this.oAppLifeCycleService.detachAppLoaded(this.userActivityHandler,this)};this.putTimestampInStorage=function(e){c.debug("SessionHandler.putTimestampInStorage :: Timestamp is "+e,"","SessionHandler");var i=this.getLocalStorage();if(i){i.put("lastActivityTime",e);if(this.bBackendRequestsActive===false){this._setConnectionActive(true)}}};this.getTimestampFromStorage=function(){var e=this.getLocalStorage();if(e){return e.get("lastActivityTime")}return null};this.timeNow=function(){return Math.floor(Date.now()/1e3)};this.timeLastInteraction=function(){return Math.floor(new Date(this.getTimestampFromStorage()).getTime()/1e3)};this.timeOver=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60)};this.timePopup=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60-this.oConfig.sessionTimeoutReminderInMinutes*60)};this.userActivityHandler=function(){if(this.oUserActivityTimer!==undefined){return}this.oUserActivityTimer=setTimeout(function(){c.debug("SessionHandler.userActivityHandler :: Timed time stamp update","","SessionHandler");l.putTimestampInStorage(l._getCurrentDate());l.oUserActivityTimer=undefined},1e3)};this._getCurrentDate=function(){return new Date};this.logout=function(){c.debug("SessionHandler.logout :: Logout initiated","","SessionHandler");function i(i){if(S===true){l.detachUserEvents()}if(l.oUserActivityTimer){clearTimeout(l.oUserActivityTimer)}if(l.remainingTimer){clearTimeout(l.remainingTimer)}if(l.notifyServerTimer){clearTimeout(l.notifyServerTimer)}i.openLoadingScreen();i.showAppInfo(e.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.setDirtyFlag(false);sap.ushell.Container.defaultLogout()}var t=new d({text:""}),s;u.postMessageToIframeApp("sap.ushell.sessionHandler","logout",{},true).then(function(){if(p===false){p=true;window.clearTimeout(s);i(t)}});s=window.setTimeout(function(){p=true;i(t)},4e3)}};return S},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/System", [],function(){"use strict";var t=function(t){this._oData=t};t.prototype.getAlias=function(){return this._oData.alias};t.prototype.getBaseUrl=function(){return this._oData.baseUrl};t.prototype.getClient=function(){return this._oData.client};t.prototype.getClientRole=function(){return this._oData.clientRole};t.prototype.getName=function(){return this._oData.system};t.prototype.getPlatform=function(){return this._oData.platform};t.prototype.getProductVersion=function(){return this._oData.productVersion};t.prototype.getProductName=function(){return this._oData.productName};t.prototype.getSystemName=function(){return this._oData.systemName};t.prototype.getSystemRole=function(){return this._oData.systemRole};t.prototype.getTenantRole=function(){return this._oData.tenantRole};t.prototype.isTrial=function(){return!!this._oData.isTrialSystem};t.prototype.adjustUrl=function(t){if(t.indexOf("/")!==0||t==="/"){throw new Error("Invalid URL: "+t)}if(this._oData.baseUrl===";o="){if(this._oData.alias){t=t+";o="+this._oData.alias}}else if(this._oData.baseUrl){t=this._oData.baseUrl.replace(/\/$/,"")+t}if(this._oData.client){t+=(t.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client}return t};t.prototype.toString=function(){return JSON.stringify(this._oData)};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/TechnicalParameters", ["sap/ushell/utils/type"],function(e){"use strict";var t={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(e,t,r,a){return new Promise(function(u,s){if(a==="UI5"){u(n(e,t))}else{u(i(e,r))}})}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,u){return new Promise(function(s,o){if(u==="UI5"){s(n(e,t)||a("/sap.fiori/registrationIds",t))}else{s(i(e,r))}})}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:r},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,u){return new Promise(function(s,o){if(u==="UI5"){s(n(e,t)||a("/sap.app/ach",t))}else{s(i(e,r))}})}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:r},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:r},"sap-app-origin":{injectFrom:"startupParameter",isIntentParameter:false,getValue:r}};function r(e){return Promise.reject(e+" is reserved for shell internal usage only")}function n(e,t){var r=t.getComponentData().technicalParameters||{};return r[e]}function a(t,r){var n=r.getMetadata()?r.getMetadata():undefined;var a=n.getManifestEntry(t);if(!e.isArray(a)){a=[a]}return a}function i(e,t){var r=t.getReservedParameters();return r&&r[e]}function u(e,r,n,a){if(!t[e]){return Promise.reject(e+" is not a known technical parameter")}return t[e].getValue(e,r,n,a)}function s(e){if(!e){e={}}return Object.keys(t).filter(function(r){var n=t[r];return Object.keys(e).every(function(t){var r=e[t];var a=n.hasOwnProperty(t);if(a){return n[t]===r}return false})}).map(function(e){return Object.keys(t[e]).reduce(function(r,n){r[n]=t[e][n];return r},{name:e})})}function o(){return Object.keys(t)}function c(e){return t.hasOwnProperty(e)}function m(e,t,r,a){if(a==="UI5"){return n(e,t)}return i(e,r)}return{getParameterValue:u,getParameterValueSync:m,getParameters:s,getParameterNames:o,isTechnicalParameter:c}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UI5ComponentType", [],function(){"use strict";return{Application:"Application",Plugin:"Plugin",Visualization:"Visualization"}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor", ["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/utils"],function(e,r,t,a,n,o,s,i){"use strict";function p(r){e.debug(r,"sap.ushell.URLTemplateProcessor")}function l(e){if(typeof e==="undefined"){return"<undefined>"}if(typeof e==="string"){if(e===""){return"<empty string>"}return"'"+e+"'"}if(typeof e==="number"){return"(number) "+e}if(typeof e==="boolean"){return"(bool) "+e}var r;if(typeof e==="object"){r=JSON.stringify(e);if(r.length>255){r=r.substr(0,255)+"..."}}else{r="{other type}"}return r}function u(e){var r=Object.keys(e).filter(function(r){return typeof e[r]==="object"&&e[r].hasOwnProperty("renameTo")});var t=[];r.forEach(function(r){var a=e[r];if(a.hasOwnProperty("renameTo")){t.push(function(e,t){var n=t;n=t.replace(new RegExp(r+"=","g"),a.renameTo+"=");return n})}});return t}function f(e,r,t,a,n){var o=c(e,r,t,a,n);return m(e,o)}function c(e,r,t,u,f){p("[TEMPLATE EXPANSION] "+e.urlTemplate);var c=a.buildDefinitionParameterSet(e.parameters,r,f)||{};var m=i.removeArrayParameterNotation(t[f]||{});var d=s.parseTemplateParameterSet(c,f);var v=s.parseTemplateParameterSetAsLiterals(m);var y=i.mergeObject(v,d);p("- parsed template parameters: "+JSON.stringify(y,null,3));var P=n.buildDependencyGraph(y);p("- created dependency graph: "+JSON.stringify(P,null,3));var h=n.getDependencyResolutionOrder(P);p("- resolving in order: "+h.join(" > "));var T=o.resolveAllParameters(y,h,r,t,u,f);Object.keys(T).forEach(function(e){var r=T[e];p(e+" --\x3e "+l(r))});return{oDefinitionParamsSet:c,oResolvedParameters:T}}function m(e,t){var a=u(t.oDefinitionParamsSet||{});var n=e.urlTemplate;var o=r.expand(n,t.oResolvedParameters).toString();p("- created URL: "+o);a.forEach(function(e){o=e(n,o)});if(a.length>0){p("- created URL (post expansion): "+o)}return o}return{prepareExpandData:c,expand:f}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Ui5NativeServiceFactory", ["sap/ui/core/service/ServiceFactory"],function(e){"use strict";var r={_servicePromises:{},createServiceFactory:function(r){var i=this._servicePromises;var c=e.extend("sap.ushell.ui5Service."+r+"Factory",{createInstance:function(){var e=i[r];if(!e){e=new Promise(function(e,i){sap.ui.require(["sap/ushell/ui5service/"+r],function(r){var c;if(!r){i()}c=new r;e(c)})});i[r]=e}return e}});return new c}};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Ui5ServiceFactory", ["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/isPlainObject"],function(e,t,n,r,c){"use strict";var i;function o(e){i=e}function u(){return i}function a(e){return!!/^[^_].+/.test(e)}function s(e){var t,n=[];for(t in e){n.push(t)}return n}function f(e,t,r){var c=t[r];t[r]=function(){var i,o,a=u();if(!e||e.scopeObject.getId()!==a){n.warning("Call to "+r+" is not allowed","This may be caused by an app component other than the active '"+a+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined}o=new Array(arguments.length);for(i=0;i<o.length;++i){o[i]=arguments[i]}return c.apply(t,o)}}function p(e,t,n,r){s(e).filter(a).filter(function(n){var r=e[n];t[n]=r;return typeof r==="function"}).forEach(function(c){t[c]=t[c].bind(e);if(r){f(n,t,c)}})}function l(e){var t;if(typeof e==="undefined"){return true}if(!c(e)){return false}if(!e.scopeType){return false}t=r.get("scopeObject.getId",e);if(typeof t!=="function"){return false}return true}function v(e,t,n){var r={};if(n){n=typeof e==="object"}p(t,r,e,n);if(n&&e.scopeType==="component"&&e.scopeObject&&e.scopeObject.getId){o(e.scopeObject.getId())}return r}function h(e){return sap.ushell.Container.getServiceAsync(e)}function y(r,c){var i=e.extend("sap.ushell.ui5service."+r+"Factory",{createInstance:function(e){return new Promise(function(i,o){h(r).then(function(u){var a,s,f;if(!l(e)){n.error("Invalid context for "+r+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");o("Invalid Context for "+r+" service");return}s=v(e,u,c);f=t.extend("sap.ushell.ui5service."+r,{getInterface:function(){return s}});a=new f(e);i(a)},function(e){o(e)})})}});return new i}return{createServiceFactory:y}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/User", ["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData","sap/base/Log","sap/base/util/deepExtend"],function(e,t,n,i,o){"use strict";function r(e){if(e===undefined){return undefined}return o({},e)}function a(e){var t;if(e.host&&typeof e.host==="function"&&e.host()){t=e.host();if(typeof e.protocol==="function"&&e.protocol()){t=e.protocol()+"://"+t}return t}return""}function s(e){return e.indexOf("sap_")===0}var h=function(r){var m=[],u,c,g,p,l=new t;this.getEmail=function(){return r.email};this.getFirstName=function(){return r.firstName};this.getFullName=function(){return r.fullName};this.getTimeZone=function(){return r.timeZone};this.getTimeZoneIana=function(){return r.timeZoneIana};this.getInitials=function(){var e=r.fullName||"",t="",n=true;for(var i=0,o=e.length;i<o;++i){if(e[i]===" "){n=true}else if(n){n=false;t+=e[i]}}return t};this.getId=function(){return r.id};this.getLanguage=function(){return r.language};this.getLanguageBcp47=function(){return r.languageBcp47};this.getLanguageText=function(){var e=sap.ui.getCore().getConfiguration().getLocale(),t=new n(e),i=sap.ui.getCore().getConfiguration().getLanguageTag();i=i.replace("-","_");var o=t.getLanguages(),r=o[i]||this.getLanguage().toUpperCase();return r};this.getLastName=function(){return r.lastName};this.getImage=function(){return r.image};this.setImage=function(e){r.image=e;l.fireEvent("onSetImage",e)};this.attachOnSetImage=function(e,t){l.attachEvent("onSetImage",e,t)};this.isJamActive=function(){return r.isJamActive===true};this.isLanguagePersonalized=function(){return r.isLanguagePersonalized===true};this.getTheme=function(e){if(e===h.prototype.constants.themeFormat.ORIGINAL_THEME){return p.originalTheme.theme}if(e===h.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return g.theme+(g.locationPath?"@"+g.locationOrigin+g.locationPath:"")}if(e===h.prototype.constants.themeFormat.NWBC){if(s(g.theme)){return g.theme}return this.getTheme(h.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}return g.theme};this.getThemeRoot=function(e){if(r.ranges&&r.ranges.theme&&r.ranges.theme[e]&&r.ranges.theme[e].themeRoot){return r.ranges.theme[e].themeRoot}return""};this.setTheme=function(e){if(this.isSetThemePermitted()===false){var t="setTheme not permitted";i.error(t);throw new Error(t)}g=this._amendTheme({theme:e,root:this.getThemeRoot(e)},c);if(e!==p.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},p.originalTheme.theme,e);p=g}this.applyTheme(e)};this.applyTheme=function(e){var t=this;var n=this._amendTheme({theme:e,root:this.getThemeRoot(e)},c),i;g=n;if(n.suppliedRoot){sap.ui.getCore().applyTheme(n.theme,n.suppliedRoot+"/UI5/")}else if(n.path){sap.ui.getCore().applyTheme(n.theme,n.path+"/UI5/")}else{sap.ui.getCore().applyTheme(n.theme)}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(e){i=t.getTheme(h.prototype.constants.themeFormat.NWBC);e.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{currentThemeId:i,themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"})})};this.setLanguage=function(e){if(e){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},r.language,e);r.language=e}};this.getAccessibilityMode=function(){return r.accessibility};this.setAccessibilityMode=function(e){if(this.isSetAccessibilityPermitted()===false){var t="setAccessibilityMode not permitted";i.error(t);throw new Error(t)}r.accessibility=e};this.isAdminUser=function(){return r.isAdminUser===true};this.isSetAccessibilityPermitted=function(){return r.setAccessibilityPermitted};this.isSetThemePermitted=function(){return r.setThemePermitted};this.getContentDensity=function(){return r.contentDensity};this.setContentDensity=function(e){if(this.isSetContentDensityPermitted()===false){var t="setContentDensity not permitted";i.error(t);throw new Error(t)}i.debug("[000] setContentDensity",e,"User");this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},r.contentDensity,e);r.contentDensity=e};this.isSetContentDensityPermitted=function(){return r.setContentDensityPermitted};this.getChangedProperties=function(){i.debug("[000] user: getChangedProperties: aChangedProperties",JSON.stringify(m),"User");return o([],m)};this.setChangedProperties=function(e,t,n){i.debug("[000] setChangedProperties",[e.name,t,n],"User");m.push({propertyName:e.propertyName,name:e.name,oldValue:t,newValue:n})};this.resetChangedProperties=function(){i.debug("[000] resetChangedProperties","User");m=[]};this.resetChangedProperty=function(e){i.debug("[000] resetChangedProperty: sPropertyName:",e,"User");m=m.filter(function(t){return!(e===t.propertyName)})};this.getTrackUsageAnalytics=function(){return r.trackUsageAnalytics};this.setTrackUsageAnalytics=function(e){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},r.trackUsageAnalytics,e);r.trackUsageAnalytics=e};this.setImageConsent=function(e){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},r.isImageConsent,e);r.isImageConsent=e};this.getImageConsent=function(){return r.isImageConsent};this.getImportBookmarksFlag=function(){return r.importBookmarks||null};this.setImportBookmarksFlag=function(e){this.setChangedProperties({propertyName:"importBookmarks",name:"MYHOME_IMPORT_FROM_CLASSIC"},this.getImportBookmarksFlag()||"",e);r.importBookmarks=e};this.getShowMyHome=function(){return r.showMyHome!==false};this.setShowMyHome=function(e){e=!!e;this.setChangedProperties({propertyName:"showMyHome",name:"MYHOME_ENABLEMENT"},r.showMyHome,e);r.showMyHome=e};this.getDetectDarkMode=function(){return r.detectDarkMode!==false};this.setDetectDarkMode=function(e){e=!!e;this.setChangedProperties({propertyName:"detectDarkMode",name:"THEME_DARKMODE_AUTO_DETECTION"},r.detectDarkMode,e);r.detectDarkMode=e};c={locationPathUi5:new e(sap.ui.require.toUrl("")).absoluteTo(document.location).pathname(),locationPathCustom:r.themeRoot||"",locationOrigin:a(new e(document.location))};if(!c.locationPathUi5){i.warning("User: Could not set UI5 location path")}if(!c.locationPathCustom){i.warning("User: Could not set location path for custom themes")}if(!c.locationOrigin){i.warning("User: Could not set front-end server location origin")}u=r.bootTheme||{theme:"",root:""};g=this._amendTheme(u,c);p=g};h.prototype._amendTheme=function(t,n){var i={},o,h;function m(t,n){var i,o,r={};i=new e(t);o=a(i);if(o){r.locationOrigin=o;r.locationPath=i.path()}else{r.locationOrigin=n.locationOrigin;r.locationPath=t}return r}if(!t||!t.theme||!n){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""}}i.originalTheme=r(t);if(i.originalTheme.theme.indexOf("@")>0){o=i.originalTheme.theme.split("@",2);i.theme=o[0];i.suppliedRoot=o[1];h=m(o[1],n);i.locationPath=h.locationPath;i.path=i.locationPath;i.locationOrigin=h.locationOrigin;return i}i.theme=i.originalTheme.theme;if(i.originalTheme.root){i.suppliedRoot=i.originalTheme.root;h=m(i.originalTheme.root,n);i.locationPath=h.locationPath;i.path=i.locationPath;i.locationOrigin=h.locationOrigin;return i}i.suppliedRoot="";if(s(i.theme)){i.locationOrigin=n.locationOrigin;i.locationPath=n.locationPathUi5;i.path="";return i}i.locationOrigin=n.locationOrigin;i.locationPath=n.locationPathCustom;i.path=i.locationPath;return i};h.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return h},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UserActivityLog", ["sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub","sap/base/Log","sap/base/util/extend"],function(e,t,a,i,s,n){"use strict";var o=function(){};o.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(a,i,s){e.subscribe("launchpad",a,t._handleAction,t)});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(a,i,s){e.subscribe(a,t._handleAction,t)});this._observedEventHubEvents.forEach(function(e,a,s){t._aDoableObjects.push(i.on(e).do(t._handleActionEventHub.bind(t)))});s.addLogListener(this);t._tileOntapOrigFunc=a.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc)},deactivate:function(){if(!this._isActive){return}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(a,i,s){e.unsubscribe("launchpad",a,t._handleAction,t)});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(a,i,s){e.unsubscribe(a,t._handleAction,t)});this._aDoableObjects.forEach(function(e){e.off()});s.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc},addMessage:function(e,t,a){if(this._isActive){this._addMessageInternal(e,t,a)}},getLog:function(){return this._getLoggingQueueFromStorage()},getMessageInfo:function(){var t={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:e.getFormFactor()};return t},getMessageInfoAsString:function(e){return JSON.stringify(this.getMessageInfo(e))},onLogEntry:function(e){if(e.level<=2){var t=e.message;if(typeof e.details!=="undefined"&&e.details!==""){t=t+", "+e.details}this.addMessage(this.messageType.ERROR,t)}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(e){var a=this,i,s,n,o,r,u;return function(){var l=this.getMetadata().getName();if(l==="sap.ushell.ui.launchpad.PlusTile"){a.addMessage(a.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId())}else if(l==="sap.ushell.ui.launchpad.Tile"){i=hasher.getHash();if(i){var g=t.parseShellHash(i);i="#"+t.constructShellHash({target:{semanticObject:g.semanticObject,action:g.action}})}s=a._getLastNavActionFromStorage();s.time=new Date;s.navigationHash=i;s.tileDebugInfo=this.getDebugInfo();n=sap.ui.getCore().byId(this.getId());o=n.getModel();r=this.getBindingContext();u=r.getPath();s.tileTitle=r.getModel().getProperty(u).title;a._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(s));a.addMessage(a.messageType.ACTION,"Click on Tile: "+o.getData().title+" Tile debugInfo: "+this.getDebugInfo())}e.apply(this,arguments)}},_addMessageInternal:function(e,t,a){var i=this._getLoggingQueueFromStorage(),s={type:null},o;for(o in this.messageType){if(e===this.messageType[o]){s.type=o;break}}if(s.type===null){return}n(s,{messageID:a,messageText:t,time:new Date,toString:function(){var e=[this.type,this.time];if(typeof this.messageID!=="undefined"){e.push(this.messageID)}e.push(this.messageText);return e.join(" :: ")}});i.push(s);if(i.length>this._maxLoggedMessages){i.shift()}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(i))},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData)},_handleAction:function(e,t,a){var i;switch(t){case"deleteTile":i="Delete Tile "+(a.tileId||"");break;case"moveTile":i="Move Tile "+(a.sTileId||"")+" to Group "+(a.toGroupId||"");break;case"createGroupAt":i="Create Group";break;case"changeGroupTitle":i="Change Group Title of "+(a.groupId||"")+" to "+(a.newTitle||"");break;case"deleteGroup":i="Delete Group "+(a.groupId||"");break;case"addTile":var s=a.catalogTileContext.oModel.oData,n=a.catalogTileContext.sPath,o=this._findInModel(n,s),r=o.id,u=a.groupContext.getObject(),l=u.groupId;i="Add Tile "+(r||"")+" to Group "+(l||"");break;case"moveGroup":i="Move Group from index "+(a.fromIndex||"")+" to index "+(a.toIndex||"");break;case"appOpened":i="Open application "+a.action;var g=this._getLastNavActionFromStorage();g.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(e){g.applicationInformation[e]=a[e]});if(!this._hashSegmentsEqual(g.navigationHash,a.sShellHash)){g.tileDebugInfo=""}g.navigationHash=a.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(g));break;case"addBookmarkTile":i="Add Bookmark "+(a.title||"")+" "+(a.subtitle||"")+" for URL: "+(a.url||"");break;case"showCatalog":i="Show Catalog";break;default:break}this.addMessage(this.messageType.ACTION,i)},_findInModel:function(e,t){var a,i=t,s,n;try{a=e.split("/");for(s=0;s<a.length;s=s+1){if(n!==a[s]){continue}i=i[n]}}catch(e){return undefined}return i},_getUserDetails:function(){var e=sap.ushell.Container.getUser();return{fullName:e.getFullName()||"",userId:e.getId()||"",eMail:e.getEmail()||"",Language:e.getLanguage()||""}},_getShellState:function(){var e=sap.ui.getCore().byId("viewPortContainer"),t,a="";if(e!==undefined){t=e.getModel();a=t.getProperty("/currentState/stateName")}return a},_getLoggingQueueFromStorage:function(){var e=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var t=[];if(e){try{t=JSON.parse(e)}catch(e){}}return t},_getLastNavActionFromStorage:function(){var e=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return e?JSON.parse(e):{}},_hashSegmentsEqual:function(e,t){if(!e||!t){return false}return this._getHashSegment(e)===this._getHashSegment(t)},_getHashSegment:function(e){var t=e.indexOf("~"),a;if(t>-1){return e.substring(0,t)}a=e.indexOf("?");if(a>-1){return e.substring(0,a)}return e},_getFromSessionStorage:function(e){var t=null;try{t=sessionStorage.getItem(e)}catch(e){}return t},_putInSessionStorage:function(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}};var r=new o;return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/guiResolution", ["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,s,a,r,jQuery,n){"use strict";function i(e,t){t.forEach(function(t){delete e[t]})}function u(e,t){return t&&t.signature&&t.signature&&t.signature.parameters&&t.signature.parameters[e]&&t.signature.parameters[e].required===true}function o(e,t){var s=u("DYNP_OKCODE",t)||u("DYNP_NO1ST",t);var a=[];if(s){return[]}var r=p(e);function n(e){return e.toUpperCase()}var i=Object.keys(r).map(n).sort();function o(e,t){if(e.length!==t.length){return false}return e.every(function(s,a){return e[a]===t[a]})}if(o(["DYNP_NO1ST","DYNP_OKCODE"],i)||o(["DYNP_OKCODE"],i)||o(["DYNP_NO1ST"],i)){a=Object.keys(r)}return a}function p(e){var t=a.filterObject(e,l);return t}function l(e,t){var s;if(arguments.length===1){s=e.split(/[=](.+)?/);if(s.length>1){return l.apply(null,s)}}return!(e.indexOf("sap-")===0||e.indexOf("saml")===0||e.charAt(0)==="~")}function c(e,s,a){var r=e.inbound,n=r&&r.resolutionResult,i;if(!(!r||!n||!n["sap.gui"]||!(n.applicationType==="TR"))){i=v(e,s,a)}else if(!(!r||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/~canvas;")>=0)||!(n.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){i=S(e,s,a)}else if(!(!r||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/~canvas;")>=0)||!(n.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){i=P(e,s,a)}else if(!(!r||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/its/webgui")>=0)||!(n.url.indexOf("APB_LPD_CALL_")===-1))){i=g(e,s,a)}else if(!(!r||!n||!(n.applicationType==="TR")||!(n.url.indexOf("/its/webgui")>=0)||!(n.url.indexOf("APB_LPD_CALL_")!==-1))){i=y(e,s,a)}if(i){return i.then(function(e){if(e.url){e.url=t.appendParametersToUrl("sap-iframe-hint=GUI",e.url)}return e})}throw new Error("Cannot generate TR resolution result")}function f(t,a,r,n){var i,u;t=encodeURIComponent(t);i="/gui/sap/its/webgui?%7etransaction="+t+"&%7enosplash=1";u=new e(i);return s.spliceSapSystemIntoURI(u,s.LOCAL_SYSTEM_ALIAS,a,r,"NATIVEWEBGUI",s.SYSTEM_ALIAS_SEMANTICS.apply,n)}function m(e,s,a,r){var n,i="P_OBJECT"+r,u=132;var o=t.getURLParsing().privparamsToString(s,"%25","%21");if(!o){return e}var p="";d("P_OBJECT",e,a,r,function(e){var t=e.replace(i,"");p=decodeURIComponent(t);if(p.length>0){p=p+"%25"}return i});o=p+o;var l={pObjX:"",pObject:""};o.match(new RegExp(".{1,"+u+"}","g")).map(function(e){return encodeURIComponent(e)}).forEach(function(e,t){var s="P_OBJECT";var n="pObject";if(t>0){s="P_OBJ"+t;n="pObjX"}var i=l[n].length===0?"":a;l[n]=l[n]+i+s+r+e});n=[l.pObjX,l.pObject].filter(function(e){return e.length>0}).join(a);var c=d("P_OBJECT",e,a,r,function(e){return n});if(c.found){return c.query}return e+(e.length===0?"":a)+n}function d(e,t,s,a,r){var n=false,i=e+a;var u=t.split(s).map(function(e){if(e.indexOf(i)!==0){return e}n=true;return r(e)}).filter(function(e){return typeof e!=="undefined"}).join(s);return{found:n,query:u}}function y(a,r,n){var i=a.inbound,u=i&&i.resolutionResult,o={};var p=new e(r);var l=jQuery.extend(true,{},a.mappedIntentParamsPlusSimpleDefaults);var c=l["sap-system"]&&l["sap-system"][0];var f=l["sap-system-src"]&&l["sap-system-src"][0];o["sap-system"]=c;delete l["sap-system"];if(typeof f==="string"){o["sap-system-src"]=f;delete l["sap-system-src"]}return new Promise(function(e,a){s.spliceSapSystemIntoURI(p,u.systemAlias,c,f,"NATIVEWEBGUI",u.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,n).fail(a).done(function(s){var a=s.search();var r=a.split("&").map(function(e){var t;if(e.indexOf("?%7etransaction")===0||e.indexOf("%7etransaction")===0){t=m(e,l,"%3b","%3d");return t}return e}).join("&");s.search(r);["additionalInformation","applicationDependencies"].forEach(function(e){if(i.resolutionResult.hasOwnProperty(e)){o[e]=i.resolutionResult[e]}});o.url=s.toString();o.text=i.title;o.applicationType="TR";t.setSystemAlias(o,i.resolutionResult);e(o)})})}function v(e,s,a){var n=e.inbound,i=n&&n.resolutionResult,u=e.mappedIntentParamsPlusSimpleDefaults||{};var o=i.systemAlias;if(u["sap-system"]){o=u["sap-system"][0]}var p;if(u["sap-system-src"]){p=u["sap-system-src"][0]}return new Promise(function(s,i){f(n.resolutionResult["sap.gui"].transaction,o,p,a).done(function(a){r.mapParameterNamesAndRemoveObjects(e);var i=h(e.inbound,e.mappedIntentParamsPlusSimpleDefaults,a);if(i&&e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.platform.runtime"]){i["sap.platform.runtime"]=e.inbound.resolutionResult["sap.platform.runtime"]}i["sap-system"]=o;t.setSystemAlias(i,n.resolutionResult);s(i)}).fail(i)})}function P(a,r,n){var i=a.inbound,u=i&&i.resolutionResult;var o={};var p=new e(r);var l=jQuery.extend(true,{},a.mappedIntentParamsPlusSimpleDefaults);var c=l["sap-system"]&&l["sap-system"][0];var f=l["sap-system-src"]&&l["sap-system-src"][0];o["sap-system"]=c;delete l["sap-system"];if(typeof f==="string"){o["sap-system-src"]=f;delete l["sap-system-src"]}return new Promise(function(e,a){s.spliceSapSystemIntoURI(p,u.systemAlias,c,f,"WEBGUI",u.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,n).fail(a).done(function(s){var a=s.search();a=m(a,l,"&","=");s.search(a);["additionalInformation","applicationDependencies"].forEach(function(e){if(i.resolutionResult.hasOwnProperty(e)){o[e]=i.resolutionResult[e]}});o.url=s.toString();o.text=i.title;o.applicationType="NWBC";t.setSystemAlias(o,i.resolutionResult);e(o)})})}function S(a,r,n){var u=a.inbound,p=u&&u.resolutionResult;var l={};var c=new e(r);var f=jQuery.extend(true,{},a.mappedIntentParamsPlusSimpleDefaults);var m=f["sap-system"]&&f["sap-system"][0];var d=f["sap-system-src"]&&f["sap-system-src"][0];l["sap-system"]=m;delete f["sap-system"];if(typeof d==="string"){l["sap-system-src"]=d;delete f["sap-system-src"]}var y=o(f,u||{});i(f,y);return new Promise(function(e,a){s.spliceSapSystemIntoURI(c,p.systemAlias,m,d,"WEBGUI",l.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,n).fail(a).done(function(s){var a=t.getURLParsing().paramsToString(f);var r=s.search();if(a){r=r+(r.indexOf("?")<0?"?":"&")+a}s.search(r);["additionalInformation","applicationDependencies"].forEach(function(e){if(u.resolutionResult.hasOwnProperty(e)){l[e]=u.resolutionResult[e]}});l.url=s.toString();l.text=u.title;l.applicationType="NWBC";t.setSystemAlias(l,u.resolutionResult);e(l)})})}function g(t,a,r){var n=t.inbound,i=n&&n.resolutionResult,u={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var o=new e(a);var p=jQuery.extend(true,{},t.mappedIntentParamsPlusSimpleDefaults);var l=p["sap-system"]&&p["sap-system"][0];var c=p["sap-system-src"]&&p["sap-system-src"][0];Object.keys(p).forEach(function(e){if(u[e.toLowerCase()]){delete p[e]}});return new Promise(function(e,a){s.spliceSapSystemIntoURI(o,i.systemAlias,l,c,"NATIVEWEBGUI",i.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,r).fail(a).done(function(s){var a=h(t.inbound,t.mappedIntentParamsPlusSimpleDefaults,s);e(a)})})}function h(e,s,a){var r={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var u={};var p=jQuery.extend(true,{},s);var c=p["sap-system"]&&p["sap-system"][0];var f=p["sap-system-src"]&&p["sap-system-src"][0];u["sap-system"]=c;if(typeof f==="string"){u["sap-system-src"]=f}Object.keys(p).forEach(function(e){if(r[e.toLowerCase()]){delete p[e]}});var m=o(p,e||{});i(p,m);var d=R(p);i(p,Object.keys(d));var y=a.search();var v=y.split("&").map(function(e){var t;if(!l(e)){if(e.indexOf("=")>=0){t=e.split("=");if(!d.hasOwnProperty(t[0])){d[t[0]]=t[1]}}else{n.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+e+"'","sap.ushell.services.ClientSideTargetResolution")}return undefined}var s;if(e.indexOf("?%7etransaction")===0||e.indexOf("%7etransaction")===0){s=O(e,p,"%3b","%3d");return s}return e}).filter(function(e){return typeof e!=="undefined"}).join("&");var P=t.getURLParsing().paramsToString(d);v=[v,P.replace("~","%7e")].join("&");a.search(v);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(t){if(e.resolutionResult.hasOwnProperty(t)){u[t]=e.resolutionResult[t]}});u.url=a.toString();u.text=e.title;u.applicationType="TR";t.setSystemAlias(u,e.resolutionResult);return u}function R(e){var t;t=a.filterObject(e,function(e,t){return!l(e,t)});return t}function b(e){var t="^(.+?)(%20|(%20)(.+))?$",s=new RegExp(t,"i"),a,r={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var n=e.split("=");if(n.length>2){return{error:"Found more than one assignment ('=') in the transaction query parameter",details:"Only one '=' sign is expected in "+e}}if(n.length<2||typeof n[1]==="undefined"||n[1].length===0){return{error:"The transaction query parameter must specify at least the transaction name",details:"Got "+e+" instead."}}r.transactionParamName=n[0];a=n[1];var i=a.match(s);if(!i){return{error:"Cannot parse ~transaction query parameter value.",details:a+" should match /"+t+"/"}}r.transactionCode=i[1];if(i[2]&&i[2]!=="%20"){var u=i[4]||"";u.split("%3b").forEach(function(e){var t=e.split("%3d"),s=t[0];if(s&&typeof s==="string"&&s.length>0){r.parameters.push({name:s,value:t[1]})}})}r.hasParameters=false;if(r.parameters.length>0){r.hasParameters=true;r.transactionCode=r.transactionCode.replace(/^[*]/,"")}return r}function O(e,s){var a=b(e);if(a.error){n.error(a.error,a.details,"sap.ushell.services.ClientSideTargetResolution");return e}var r=a.parameters.map(function(e){return e.name.toUpperCase()+"%3d"+e.value});var i,u=true;if(s.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){i=s["DYNP_SKIP_SEL_SCREEN"];delete s["DYNP_SKIP_SEL_SCREEN"];if(i[0]===""||i[0]===" "||i[0]==="0"||i[0]===0||i[0]&&i[0].toLowerCase()==="false"){u=false}}var o={};Object.keys(s).forEach(function(e){o[e.toUpperCase()]=s[e]});var p=t.getURLParsing().privparamsToString(o,"%3b","%3d");if(p){if(Object.keys(s).length>0){p+="%3b"}r.push(p)}var l=r.length>0;return a.transactionParamName+"="+(l&&u?"*":"")+a.transactionCode+(l?"%20":"")+r.join("%3b")}function I(e,s,a){return new Promise(function(n,i){var u;if(e.params["sap-system-src"]){u=e.params["sap-system-src"][0]}var o=e.params["sap-system"]?e.params["sap-system"][0]:undefined;var p=e.params["sap-ui2-tcode"]?e.params["sap-ui2-tcode"][0]:undefined;f(p,o,u,a).done(function(e){delete s.intentParamsPlusAllDefaults["sap-ui2-tcode"];r.mapParameterNamesAndRemoveObjects(s);var a=h(s.inbound,s.mappedIntentParamsPlusSimpleDefaults,e);if(a&&s.inbound&&s.inbound.resolutionResult&&s.inbound.resolutionResult["sap.platform.runtime"]){a["sap.platform.runtime"]=s.inbound.resolutionResult["sap.platform.runtime"]}a["sap-system"]=o;a.text=p;a.url=t.appendParametersToUrl("sap-iframe-hint=GUI",a.url);n(a)}).fail(function(e){i(e)})})}return{generateTRResolutionResult:c,resolveEasyAccessMenuIntentWebgui:I,injectEffectiveParametersIntoWebguiQueryParam:O,injectEffectiveParametersIntoWebguiPobjectParam:m,amendGuiParam:d,parseWebguiTransactionQueryParam:b,getWebguiNonBusinessParameters:R,getWebguiBusinessParameters:p,isWebguiBusinessParameter:l,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:v}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/systemAlias", ["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/Log"],function(e,t,jQuery,n,r){"use strict";var i="";var o={apply:"apply",applied:"applied"};function a(e){return(e.protocol()||"").length>0}function s(e,n,r){var i=typeof n==="string";var o=[e];if(i){o.unshift(n)}var a=t.generateLocalStorageKey("sap-system-data",o);var s=t.getLocalStorage();var f=s.getItem(a);var p={};if(f){try{p=JSON.parse(f)}catch(e){return(new jQuery.Deferred).reject("Cannot parse system data from local storage at key '"+a+"'. Data: "+f)}return(new jQuery.Deferred).resolve(p).promise()}else if(i){return(new jQuery.Deferred).reject("Cannot find data for system '"+e+"' in local storage using key '"+a+"'")}if(!r){return(new jQuery.Deferred).reject("fallback: the adapter does not implement resolveSystemAlias").promise()}return r(e)}function f(t,n,o,a,f){var p=o,l=new jQuery.Deferred;s(t,n,f).fail(function(e){l.reject(e)}).done(function(n){var s=v(n);if(!s.isValid){g(s);l.reject("Invalid system alias definition");return l}var c=h(n,new e(window.location.toString()).protocol()),d=n[c],m,w,R;if(t===i&&d.host===""&&(d.port===0||d.port==="")){c=""}p.protocol(c);p.hostname(d.host);p.port(d.port);y(p,a,d.pathPrefix,f).fail(function(e){l.reject(e)}).done(function(e){m=e.query();if(typeof n.client==="string"&&n.client!==""){m=m+(m.length>0?"&":"")+"sap-client="+n.client}if(typeof n.language==="string"&&n.language!==""){w=n.language}else{R=sap.ushell.Container.getUser();if(!R){r.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");w="en"}else{w=R.getLanguage()}}m=m+(m.length>0?"&":"")+"sap-language="+w;e.query(m);if(n.hasOwnProperty("rfc")&&a==="NATIVEWEBGUI"){var t=u(n.rfc,d.host,e);var i=e.path()+";"+t;e.path(i);o._parts.path=i}l.resolve(e)})});return l.promise()}function p(e,t,n,r,i,a,s){var p=new jQuery.Deferred;if(a!==o.apply&&a!==o.applied){throw new Error("Invalid system alias semantic was provided: '"+a+"'")}if(a===o.applied&&(typeof n==="undefined"||t===n)){return p.resolve(e).promise()}if(a===o.apply&&typeof t==="undefined"&&typeof n==="undefined"){return p.resolve(e).promise()}if(i==="URL"&&a==o.applied){return l(e,t,n,r,s)}new Promise(function(f){if(a===o.apply){f({targetUri:e,alias:n||t,sapSystemSrc:n?r:undefined});return}c(e,t,undefined,i,s).fail(function(e){p.reject(e)}).done(function(e){f({targetUri:e,alias:n})})}).then(function(e){f(e.alias,e.sapSystemSrc,e.targetUri,i,s).fail(function(e){p.reject(e)}).done(function(e){p.resolve(e)})});return p.promise()}function l(t,n,r,o,p){var l=new jQuery.Deferred;if(n===i||typeof n==="undefined"){if(a(t)){return l.resolve(t)}f(r,o,t,"URL",p).fail(function(e){l.reject(e)}).done(function(e){l.resolve(e)});return l.promise()}s(n,o,p).fail(function(e){l.reject(e)}).done(function(n){var i=h(n,new e(window.location.toString()).protocol()),a=n[i],s;if((t.protocol()||"").toLowerCase()===i&&(t.hostname()||"")===a.host&&t.path().indexOf(a.pathPrefix)===0){t.protocol("");t.hostname("");s=t.path().replace(a.pathPrefix,"");t.path(s);m(t,["sap-language","sap-client"]);f(r,o,t,"URL",p).fail(function(e){l.reject(e)}).done(function(e){l.resolve(e)})}else{l.resolve(t)}});return l.promise()}function u(e,t){var n,i,o,a,s;o=!!e.systemId;if(o){a=[e.systemId&&"~sysid="+e.systemId,e.loginGroup&&"~loginGroup="+e.loginGroup,e.sncNameR3&&"~messageServer="+encodeURIComponent(e.sncNameR3),e.sncNameR3&&"~sncNameR3="+encodeURIComponent(e.sncNameR3),e.sncQoPR3&&"~sncQoPR3="+e.sncQoPR3].filter(function(e){return typeof e==="string"&&e!==""})}else{s=e.host||"";i=s.toLowerCase()===t.toLowerCase();n=/^[/][HGMR][/].*/.test(s);if(s.length>0&&!i&&!n){r.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(e,null,3),"sap.ushell.services.ClientSideTargetResolution")}a=[s&&!n&&!i&&"~rfcHostName="+s,n&&"~connectString="+encodeURIComponent(s),e.service&&"~service="+e.service,e.sncNameR3&&"~sncNameR3="+encodeURIComponent(e.sncNameR3),e.sncQoPR3&&"~sncQoPR3="+e.sncQoPR3].filter(function(e){return typeof e==="string"&&e!==""})}return a.join(";").replace(/(%[A-F0-9]{2})/g,function(e){return e.toLowerCase()})}function c(e,t,n,r,i){var o=new jQuery.Deferred;if(typeof t==="undefined"){d(e,t,r,undefined,i).fail(function(e){o.reject(e)}).done(function(e){o.resolve(e)});return o.promise()}s(t,n,i).fail(function(e){o.reject(e)}).done(function(n){d(e,t,r,n,i).fail(function(e){o.reject(e)}).done(function(e){o.resolve(e)})});return o.promise()}function d(t,r,i,o,a){var f,p,l,u,c=new jQuery.Deferred,d=new jQuery.Deferred;t.protocol("");t.hostname("");t.port("");m(t,["sap-client","sap-language"]);if(!n(o)||typeof r!=="string"){return c.resolve(t).promise()}p=h(o,new e(window.location.toString()).protocol());f=o[p];u=typeof f.pathPrefix==="string"&&f.pathPrefix;if(u!==""){d.resolve(u)}else{s("",undefined,a).fail(function(e){c.reject(e)}).done(function(e){var t=e[p];d.resolve(t.pathPrefix)})}d.fail(function(e){c.reject(e)}).done(function(e){if(e&&e.length>0){l=t.path();l=l.replace(e,"");if(l.indexOf("/")!==0){l="/"+l}t.path(l)}if(i==="NATIVEWEBGUI"&&o.hasOwnProperty("rfc")){l=t.path();l=l.split(";").filter(function(e){return e.indexOf("~sysid=")!==0&&e.indexOf("~service=")!==0&&e.indexOf("~loginGroup=")!==0&&e.indexOf("~messageServer=")!==0&&e.indexOf("~sncNameR3=")!==0&&e.indexOf("~sncQoPR3=")!==0}).join(";");t.path(l)}c.resolve(t)});return c.promise()}function h(e,t){if(e.hasOwnProperty("https")){return"https"}if(e.hasOwnProperty("http")){return"http"}r.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined}function g(e){r.error("Invalid system alias definition: "+e.debug,"ERRORS:"+e.errors.map(function(e){return"\n - "+e}).join(""),"sap.ushell.ApplicationType")}function v(e){function t(e){var t=[];if(typeof e.host!=="string"){t.push("host field must be a string")}if(typeof e.port!=="number"&&typeof e.port!=="string"){t.push("port field must be a number or a string")}if(typeof e.pathPrefix!=="string"){t.push("pathPrefix field must be a string")}return t}var n=[],r=e.hasOwnProperty("https"),i=e.hasOwnProperty("http");if(!i&&!r){n.push("at least one of 'http' or 'https' fields must be defined")}if(r){t(e.https).forEach(function(e){n.push("https>"+e)})}if(i){t(e.http).forEach(function(e){n.push("http>"+e)})}if(n.length>0){return{isValid:false,errors:n,debug:JSON.stringify(e,null,3)}}return{isValid:true}}function m(e,t){var n={},r;t.forEach(function(e){n[e]=true});r=e.query();r=r.split("&").filter(function(e){var t=(e.split("=")[0]||"").toLowerCase();return!n.hasOwnProperty(t)}).join("&");e.query(r)}function y(t,n,r,i){var o=new jQuery.Deferred,a;if(n==="URL"&&r.length===0){return o.resolve(t).promise()}function f(e){var n=e+t.path();t.path(n.replace(/\/+/g,"/"));o.resolve(t)}s("",undefined,i).fail(function(e){o.reject(e)}).done(function(i){var o=h(i,new e(window.location.toString()).protocol());var s=i[o].pathPrefix;var p=r===s;if(r.length>0&&!p){if((n==="WDA"||n==="WEBGUI")&&t.path().indexOf("~canvas")>=0){a=t.path();a="/~canvas"+a.split("~canvas")[1];t.path(a)}}if(r.length===0){f(s)}else{f(r)}});return o.promise()}return{LOCAL_SYSTEM_ALIAS:i,SYSTEM_ALIAS_SEMANTICS:o,spliceSapSystemIntoURI:p,isAbsoluteURI:a,stripURI:c,selectSystemAliasDataName:h,constructNativeWebguiParameters:u}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/utils", ["sap/ushell/utils/UrlParsing","sap/ushell/_ApplicationType/systemAlias"],function(e,s){"use strict";function a(){return e}function r(e,a,r){if(!r||r===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(e)&&!a}if(r===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(e)}throw new Error("Invalid system alias semantics: '"+r+"'")}function t(e,s){var a,r;if(e){var t=s.match(/#.*/);if(t){r=t;a=s.replace(t,"")}else{a=s;r=""}s=a+(s.indexOf("?")<0?"?":"&")+e+r}return s}function n(s,a){var r=a.match(/#.*/);var n=r&&r[0];if(!n){var i=e.paramsToString(s);return t(i,a)}var l=e.parseShellHash(n);Object.keys(s).forEach(function(e){var a=s[e];l.params[e]=[a]});var u=Object.keys(l.params).reduce(function(e,s){var a=l.params[s];var r=a.map(function(e){return encodeURIComponent(e)});e[encodeURIComponent(s)]=r;return e},{});l.params=u;var p=a.replace(n,"");var m=e.constructShellHash(l);return p+"#"+m}function i(e,s){if(e["sap-system"]&&e["sap-system"]!=null&&e["sap-system"]!=undefined&&e["sap-system"]!=""){e.systemAlias=e["sap-system"]}else{e.systemAlias=s.systemAlias}if(e.systemAlias===undefined){delete e.systemAlias}}return{getURLParsing:a,appendParametersToUrl:t,appendParametersToIntentURL:n,absoluteUrlDefinedByUser:r,setSystemAlias:i}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_ApplicationType/wdaResolution", ["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(s,e,a,jQuery,t){"use strict";function n(s,a){return new Promise(function(t,n){var r=jQuery.extend(true,{},s);if(a.length>0){r["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a)]}delete r["sap-system"];sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(s){s.compactParams(r,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params","sap-iframe-hint","sap-keep-alive","sap-wd-configId"],undefined,true).fail(function(s){n(s)}).done(function(s){var a=e.getURLParsing().paramsToString(s);t(a)})}).catch(function(s){n(s)})})}function r(s,e){var a=s.search();if(e){a=a+(a.indexOf("?")<0?"?":"&")+e}return s.search(a).toString()}function i(t,n,r,i,o){var l,m,c,f,d,y=jQuery.extend(true,{},i);if(n){y["sap-wd-configId"]=n}if(y["sap-system"]){l=y["sap-system"][0];delete y["sap-system"]}if(y.hasOwnProperty("sap-system-src")){m=y["sap-system-src"][0];delete y["sap-system-src"]}d=e.getURLParsing().paramsToString(y);if(r){c=p(t,d)}else{c=u(t,d)}f=new s(c);return a.spliceSapSystemIntoURI(f,a.LOCAL_SYSTEM_ALIAS,l,m,"WDA",a.SYSTEM_ALIAS_SEMANTICS.apply,o)}function p(s,e){return"/ui2/nwbc/~canvas;window=app/wda/"+s+"/"+"?"+e}function u(s,e){var a=s.indexOf("/")!==0;if(a){s="sap/"+s}return"/webdynpro/"+s+"?"+e}function o(s,a,t,n){var r={"sap-system":t,url:a,text:s.title,applicationType:"NWBC"};if(typeof n==="string"){r["sap-system-src"]=n}e.setSystemAlias(r,s.resolutionResult);["additionalInformation","applicationDependencies"].forEach(function(e){if(s.resolutionResult.hasOwnProperty(e)){r[e]=s.resolutionResult[e]}});r.url=e.appendParametersToUrl("sap-iframe-hint="+(r.url.indexOf("/ui2/nwbc/")>=0?"NWBC":"WDA"),r.url);return r}function l(s,e,a){var p=t.get("inbound.resolutionResult",s),u=s.mappedIntentParamsPlusSimpleDefaults||{};var l=p.systemAlias;if(u["sap-system"]){l=u["sap-system"][0]}var m;if(u["sap-system-src"]){m=u["sap-system-src"][0]}var c={"sap-system":[l]};if(typeof m==="string"){c["sap-system-src"]=[m]}var f=p["sap.wda"].compatibilityMode;if(f===undefined){f=true}return new Promise(function(e,t){i(p["sap.wda"].applicationId,p["sap.wda"].configId,f,c,a).done(function(a){var i=s.mappedIntentParamsPlusSimpleDefaults;n(i,s.mappedDefaultedParamNames).then(function(t){var n=r(a,t);var p=i["sap-system"]&&i["sap-system"][0];var u=i["sap-system-src"]&&i["sap-system-src"][0];var l=o(s.inbound,n,p,u);e(l)},function(s){t(s)})}).fail(function(s){t(s)})})}function m(e,t,i){var p=e.inbound,u=p&&p.resolutionResult,l=e.mappedIntentParamsPlusSimpleDefaults;var m=new s(t);var c=l["sap-system"]&&l["sap-system"][0];var f=l["sap-system-src"]&&l["sap-system-src"][0];return Promise.all([new Promise(function(s,e){a.spliceSapSystemIntoURI(m,u.systemAlias,c,f,"WDA",u.systemAliasSemantics||a.SYSTEM_ALIAS_SEMANTICS.applied,i).fail(e).done(s)}),n(l,e.mappedDefaultedParamNames)]).then(function(s){var e=s[0];var a=s[1];var t=r(e,a);var n=o(p,t,c,f);return n},function(s){return Promise.reject(s)})}function c(s,a,n,r){var p=s.params["sap-ui2-wd-app-id"][0];var u=(t.get("params.sap-ui2-wd-conf-id",s)||[])[0];var o=Object.keys(s.params).reduce(function(e,a){if(a!=="sap-ui2-wd-app-id"&&a!=="sap-ui2-wd-conf-id"){e[a]=s.params[a]}return e},{});return new Promise(function(t,l){i(p,u,r,o,n).done(function(n){var r=s.params.hasOwnProperty("sap-system-src")&&s.params["sap-system-src"][0];var i=s.params.hasOwnProperty("sap-system")&&s.params["sap-system"][0];var u={url:n.toString(),applicationType:"NWBC",text:p,additionalInformation:"","sap-system":i};if(typeof r==="string"){u["sap-system-src"]=r}if(a&&a.inbound&&a.inbound.resolutionResult&&a.inbound.resolutionResult["sap.platform.runtime"]){u["sap.platform.runtime"]=a.inbound.resolutionResult["sap.platform.runtime"]}u.url=e.appendParametersToUrl("sap-iframe-hint="+(u.url.indexOf("/ui2/nwbc/")>=0?"NWBC":"WDA"),u.url);t(u)}).fail(function(s){l(s)})})}return{resolveEasyAccessMenuIntentWDA:c,constructFullWDAResolutionResult:l,constructWDAResolutionResult:m}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_Config/utils", [],function(){"use strict";function t(t,r){var n=[];var e=[];var o=r;var a=false;var i=t.split("/");i.shift();i.forEach(function(t){if(!a&&o.hasOwnProperty(t)){o=o[t];n.push(t);return}a=true;e.push(t)});return{contractPart:"/"+n.join("/"),nonContractPart:e}}function r(t){return t&&t.isA&&t.isA("sap.ui.model.Context")}function n(t,r,n,e){var o=n;r.forEach(function(n,a){if(a===r.length-1){o[n]=e;return}if(!o.hasOwnProperty(n)){throw new Error("Cannot find "+n+" inside "+t)}o=o[n]})}function e(t){var r=function(r){return t+r};if(typeof t==="object"){var n="/";r=function(r){var e=r.split(n);e.shift();var o=e.shift();return t[o]+(e.length>0?n+e.join(n):"")}}return r}function o(t,n,o){var a=e(o);var i=a(t);if(r(n)&&t.charAt(0)!=="/"){var c=n.getPath()+"/"+t;i=a(c)}return i}function a(r,e,a,i){a.setData=function(t,r){throw new Error("not yet implemented")};a.setProperty=function(a,c,u){var f=o(a,u,i);var s=t(f,e);if(s.nonContractPart.length===0){r.emit(s.contractPart,c);return}var p=r.last(s.contractPart);n(s.contractPart,s.nonContractPart,p,c);r.emit(s.contractPart,p)};return a}function i(t,r,n,e){var o,i,c,u;if(typeof n==="string"){var f=n;u=f;var s=t.last(f);if(Object.prototype.toString.apply(s)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+f+"'")}o=new e(s);c=o.setData.bind(o);t.on(f).do(function(t){c(t)});return a(t,r,o,u)}if(Object.prototype.toString.apply(n)==="[object Object]"){var p=n;var v=Object.keys(p).reduce(function(r,n){var e=p[n];r[n]=t.last(e);t.on(e).do(function(t,r){i("/"+t,r)}.bind(null,n));return r},{});o=new e(v);i=o.setProperty.bind(o);return a(t,r,o,p)}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.")}return{createModel:i}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder", ["sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,r,t,a){"use strict";var s="/payload/parameters/names";function o(s,o,l){if(!s||!s.names){return{}}if(!s.hasOwnProperty("mergeWith")){return s.names}var u=s&&s.mergeWith;if(Array.isArray(u)===false&&typeof u!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array")}var p=s&&s.names;var h=i(s.mergeWith,o,l,{});var f=h.map(function(t){var s=e.parsePath(l,t);n(s);var i=r.resolvePath(s,{},o,{},{});if(!a.isPlainObject(i)){throw new Error("Cannot merge parameters from '"+t+"'. The path must point to an object")}return i}).reduce(function(e,r){e=t.mergeObject(e,r);return e},{});return t.mergeObject(f,p)}function n(e){if(e.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith")}e.value.forEach(function(e){if(e.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths")}})}function i(t,a,o,l){if(Array.isArray(t)){return t.slice().reverse()}if(typeof t==="string"){if(l[t]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.")}l[t]=true;var u=e.parsePath(o,t);n(u);var p=r.resolvePath(u,{},a,{},{});if(!p){throw new Error("The specified mergeWith path does cannot be resolved: '"+t+"'")}var h=s.split("/").slice(1).reduce(function(e,r){if(e.result&&e.obj&&e.obj.hasOwnProperty(r)){e.obj=e.obj[r]}else{e.result=false}return e},{obj:p,result:true}).result;if(!h){throw new Error(t+" does not contain "+s+". Please make sure "+t+" points to the root of a URL template.")}return i(p.payload.parameters.mergeWith,a,o,l).concat([t+s])}return[]}return{buildDefinitionParameterSet:o}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/DependencyGraph", ["sap/base/util/deepExtend"],function(e){"use strict";function n(e){return typeof e==="string"||e.type==="wildcard"||e.type==="literal"||e.type==="intentParameter"||e.type==="reference"}function r(e){return e.type==="reference"&&!e.namespace}function t(e,n,t){if(!e.hasOwnProperty(n)){e[n]=[]}if(r(t)){e[n].push(t.value)}}function i(e){var n={};var r=t.bind(null,n);Object.keys(e).forEach(function(n){var t=e[n];a(t,n,r)});return n}function u(e){var n=e.type;if(n==="expression"){return[e.value]}if(n==="function"){return(e.args||[]).concat(e.params||[])}if(n==="pipe"||n==="path"){return e.value}throw new Error("Unknown type encountered while building dependency graph: '"+n+"'")}function a(e,r,t){t(r,e);if(n(e)){return}var i=u(e);i.forEach(function(e){a(e,r,t)})}function c(n){var r=e({},n);var t,i,u=[],a={};do{var c=Object.keys(r);t=c.length;c.forEach(function(e){if(r[e].length>0){r[e]=r[e].filter(function(e){var n=!a[e];var t=r.hasOwnProperty(e);return n&&t})}if(r[e].length===0){delete r[e];u.push(e);a[e]=true}});i=Object.keys(r).length}while(t!==i);if(i!==0){throw new Error("Graph of dependencies contains cyclic references")}return u}return{buildDependencyGraph:i,getDependencyResolutionOrder:c}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/Functions", ["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,n,r,t){"use strict";var i={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(e){var r=new n;var t=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var i="toString";if(e.urlPart){if(t.indexOf(e.urlPart)===-1){throw new Error("The URL part '"+e.urlPart+"' is not valid. Please use one of "+t.join(", "))}i=e.urlPart}return r[i]()}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(e,n){var r=u(n);if(a(e.trueCondition)){return r.length===1?undefined:r.pop()}return r[0]}},and:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}var i=t.pop();var o=t.every(r.hasValue);return o?i:undefined}},or:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}return t.reduce(function(e,n){if(r.hasValue(e)){return e}return r.hasValue(n)?n:undefined})}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(e,n){var r=new RegExp(e.strRegExp,e.flags);var a=e.strReplace||"";if(typeof n===undefined||n===null){return n}if(t.isArray(n)){if(n.length===1){return i.replace.fn.call(this,e,n[0])}return n.map(function(n){return i.replace.fn.call(this,e,n)})}if(t.isPlainObject(n)){return Object.keys(n).reduce(function(r,t){var a=n[t];r[t]=i.replace.fn.call(this,e,a);return r},{})}if(typeof n==="string"){return n.replace(r,a)}return i.replace.fn.call(this,e,n+"")}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(e,n){var r=[n];return i.join.fn.call(this,e,r)},fn:function(e,n){var i=e.macroSeparator||"";var a=e.microSeparator||"";n=n.map(function(e){if(!t.isPlainObject(e)&&!t.isArray(e)){return e}var n=Object.prototype.toString.apply(e);if(n==="[object Object]"){var u=r.removeArrayParameterNotation(e);return Object.keys(u).sort().map(function(n){return n+a+e[n]}).join(i)}if(n==="[object Array]"){return e.join(i)}});return n.join(i)}},match:{args:["strRegex"],minValues:1,fnPipe:function(e,n){var r=e.strRegex;var t=new RegExp(r);return Object.keys(n).reduce(function(e,r){if(t.exec(r)){e[r]=n[r]}return e},{})},fn:function(e,n){if(n===undefined){return undefined}var r=e.strRegex;var i=new RegExp(r);var a=n.filter(function(e){var n;if(t.isPlainObject(e)){n=Object.keys(e)}else if(t.isArray(e)){n=e}else{n=[""+e]}return n.some(i.exec.bind(i))});return a.length===n.length?true:undefined}},not:{args:[],minValues:1,fnPipe:function(e,n){return Object.keys(n).length>0?undefined:""},fn:function(e,n){var r=i.and.fn(e,n);return r===undefined?"":undefined}},stringify:{args:[],minValues:1,fn:function(e,n){if(t.isArray(n)){if(n.length===0){return""}if(n.length===1){n=n[0]}}if(typeof n==="string"){return n}return JSON.stringify(n)}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(e,n){return Object.keys(n).reduce(function(e,r){e[r]=encodeURIComponent(n[r]);return e},{})},fn:function(e,n){var r=n[0];if(typeof r!=="string"){return r}return encodeURIComponent(r)}}};function a(e){if(typeof e==="undefined"){return true}if(typeof e==="string"){return e===""}if(typeof e==="object"){return Object.keys(e).length===0}if(typeof e==="number"){return e===0}if(typeof e==="boolean"){return e===false}throw new Error("Unexpected type for value")}function u(e){var n;if(t.isArray(e)){n=e}else if(t.isPlainObject(e)){n=[e]}else if(e===undefined){return[]}else{throw new Error("Unexpected type")}return n}function o(e,n,r){if(r!==undefined&&!t.isPlainObject(r)){throw new Error("Invalid value type passed to '"+e+"' in pipe context. An object is expected.")}}function f(e,n,i){if(i!==undefined&&!t.isArray(i)){throw new Error("Invalid value type passed to '"+e+"' in value context. An array is expected.")}var a=t.isArray(i)?i.length:0;if(r.hasValue(n.maxValues)&&a>n.maxValues){throw new Error("Too many values were passed to '"+e+"'. Please pass maximum "+n.maxValues+" values.")}if(r.hasValue(n.minValues)&&a<n.minValues){throw new Error("Too few values were passed to '"+e+"'. Please pass minimum "+n.minValues+" values.")}}function s(e){var n=false;e.map(l).reduce(function(e,r){if(!e&&r){n=true}return r},true);return n}function l(e){return e.charAt(e.length-1)!=="?"}function c(e){return e.substr(0,e.length-1)}function p(n,r){var t=e([],i[n].args);if(s(t)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.")}var a={length:r.length};var u=t.filter(l);var o=u>r.length;if(o){throw new Error(n+" requires "+u+" arguments but "+r.length+" was specified")}r.forEach(function(e){var n=t.shift();var i=!l(n);if(i){n=c(n)}if(r.length>0){a[n]=e}});return a}function d(e,n,r,t){if(!i.hasOwnProperty(n)){throw"Invalid function: "+n}var a=p(n,r);if(e){o(n,i[n],t)}else{f(n,i[n],t)}if(e){if(!i[n].fnPipe){throw new Error("The function '"+n+"' cannot be executed in pipe context")}return i[n].fnPipe(a,t)}return i[n].fn(a,t)}function m(e){return e.split("").map(function(e){if(e==="["){return"[\\[]"}return"["+e+"]"}).join("")}function h(){var e=Object.keys(i);return e.map(m).join("|")}return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:d.bind(null,false),applyFunctionInPipeContext:d.bind(null,true),_setURIDependency:function(e){n=e}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/Resolvers", ["sap/base/util/deepExtend","sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/_URLTemplateProcessor/utils"],function(e,r,n){"use strict";var t={literal:o,expression:p,reference:c,function:s,path:i,pipe:u};function a(e,r,n){var t=null;var a=[];var o=false;var i=r.join("/");t=e;if(typeof t==="undefined"){o=true}r.forEach(function(e,r){if(o){return}a.push(e);if(!t.hasOwnProperty(e)){t=undefined;o=true;return}if(!t.hasOwnProperty(e)){throw new Error("Cannot find path '"+i+"' in given structure: '"+e+"' seems to be missing in the object.")}t=t[e]});return t}function o(e){return e.value}function i(e,r,n,t,o,i){var u=e.value.map(function(e){return l(e,r,n,t,o,i)});var s=e.pathType==="relative";var p=s?t:n;return a(p,u,r)}function u(n,t,a,o,i,u){var s=n.value;if(s[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression")}if(s[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+s[0].value)}return s.slice(1).reduce(function(e,n){if(n.type!=="function"){throw new Error("Invalid operation specified in pipe expression")}return r.applyFunctionInPipeContext(n.name,n.args.map(function(e){return l(e,t,a,o,i,u)}),e)},e({},i[u]||{}))}function s(e,n,t,a,o,i){var u=e.name;var s=e.args.map(function(e){return l(e,n,t,a,o,i)});var p=e.params.map(function(e){return l(e,n,t,a,o,i)});return r.applyFunctionInValueContext(u,s,p)}function p(e,r,n,a,o,i){var u=e.value;if(t[u.type]){return l(u,r,n,a,o,i)}throw new Error("unknown expression type: "+u.type)}function c(e,r,n,t,a,o){var i=e.value;if(!e.hasOwnProperty("namespace")){return r[i]}var u=e.namespace;var s="The template attemps to take the value '"+i+"' from '"+u+"' namespace.";if(!a.hasOwnProperty(u)){throw new Error(s+" However this value was not defined at runtime. The template should reference only defined values.")}var p=a[u];var c=i===".";if(c){return p}if(typeof p!=="object"){throw new Error(s+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.")}return p[i]}function l(e,r,n,a,o,i){var u=e.type;if(t[u]){return t[u](e,r,n,a,o,i)}throw new Error("Cannot resolve unknown parameter type: '"+u+"'")}function f(e,r,n,t,a,o){var i={};r.forEach(function(r){var u=e[r];var s=l(u,i,n,a,t,o);i[r]=s});return i}return{resolveLiteral:o,resolveExpression:p,resolveReference:c,resolveFunction:s,resolvePath:i,resolvePipe:u,resolveParameterValue:l,resolveAllParameters:f}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/TemplateParameterParser", ["sap/ushell/_URLTemplateProcessor/Functions"],function(r){"use strict";function e(e,t){var a=p();var u=a.exec(t);if(u===null){throw new Error("Cannot parse expression: '"+t+"'")}var s=h(t);if(s.indexOf("*")===0){return n(e,s)}var f="^("+r.getPossibleFunctionsRegExpString()+")[^a-z]";var v=new RegExp(f);if(v.exec(s)){return o(e,s)}return i(e,s)}function n(r,e){var n=f(r,e,"|");var t=n.shift();return{type:"pipe",value:[{type:"wildcard",value:t}].concat(n.map(o.bind(null,r)))}}function t(r){var e=r.substr(1);var n;if(e.indexOf(":")>=0){var t=e.split(":");n=t[0];e=t[1]}var a={type:"reference",value:e};if(n){a.namespace=n}return a}function a(r,e){var n=e.split("/");var t="relative";if(n[0]===""){t="absolute";n.shift()}if(n[0]==="."){n.shift()}return{type:"path",pathType:t,value:n.map(u.bind(null,r))}}function i(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}if(e.indexOf(".")===0||e.indexOf("/")===0){return a(r,e)}if(e.charAt(0)==="'"&&e.charAt(e.length-1)==="'"){return s(h(e))}if(e.charAt(0)==="&"){return t(e)}return{type:"reference",value:e,namespace:r}}function u(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}return{type:"literal",value:e}}function s(r){return{type:"literal",value:r}}function o(r,e){var n=e.split(/[(\s]/)[0];var t=d(e,n);t=t.replace(/^\s+/,"");var a="";if(t.charAt(0)==="("){var u=t.search(/([)]\s)|([)]$)/);if(u===-1){throw new Error("Cannot find termination of function '"+t+"' in '"+e+"'")}a=t.substr(1,u-1);t=d(t,"("+a+")");t=t.replace(/^\s+/,"")}var s=t;return{type:"function",name:n,args:f(r,a,",").map(function(r){return r.charAt(0)==="{"?h(r):"'"+r+"'"}).map(i.bind(null,r)),params:f(r,s,",").map(i.bind(null,r))}}function f(r,e,n){if(!e){return[]}var t=e.split(n).reduce(function(r,e,t){if(t===0){r.push(e);return r}var a=r.length-1;var i=r[a];var u=i.length>0&&i.charAt(i.length-1)==="\\";var s="";if(u){s=r.pop();s=s.substr(0,s.length-1)+n}r.push(s+e);return r},[]);return t}function v(r,n){var t=n;var a=null;if(Object.prototype.toString.apply(n)==="[object Object]"){t=n.value;a=n.renameTo}var i=g(t);if(i){return s(t)}var u="expression";var o=e(r,t);var f={type:u,value:o};if(a){o.renameTo=a}return f}function c(r){var e=r.indexOf("{")===0;var n=p();var t=n.exec(r);if(!t){if(e){throw new Error("Expression was expected. But "+r+" does not look like a valid expression")}return null}return t[1]}function p(){var e="[a-zA-Z0-9]+?:";var n="((&("+e+")?)?[.a-zA-Z0-9_-]+?)";var t="('(.*?)')";var a="([^' ]*?)";var i="{("+n+")}";var u="("+"[.]?([/]("+n+"|"+i+"))+"+")";var s="("+u+"|"+t+"|"+n+"|"+i+")";var o="("+s+"(,"+s+")*)";var f="("+a+"|"+i+")";var v="("+f+"(,"+f+")*)";var c="("+"[(]"+v+"[)]"+")?";var p=r.getPossibleFunctionsRegExpString();var l="("+"("+p+")"+"("+c+")"+")";var h="([*]([|]"+l+")*)";var d="^{("+h+"|"+"(("+l+")([ ]("+o+"))?)"+"|"+"("+s+")"+")}$";var g=new RegExp(d);return g}function l(r){return c(r)!==null}function h(r){var e=r.split("");e.shift();e.pop();return e.join("")}function d(r,e){if(r.indexOf(e)===0){return r.substr(e.length)}throw new Error("Given string does not start with prefix '"+e+"'")}function g(r){return typeof r==="string"&&!l(r)}function x(r,e){return Object.keys(r).reduce(function(n,t){var a=r[t];n[t]=v(e,a);return n},{})}function m(r,e){return Object.keys(r).reduce(function(e,n){var t=r[n];e[n]=s(t);return e},{})}return{parseTemplateParameterSet:x,parseTemplateParameterSetAsLiterals:m,parsePath:a,_isExpression:l,_parseList:f,_parseParameterValue:v}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/_URLTemplateProcessor/utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e){return e!==null&&typeof e!=="undefined"}function t(e){return Object.keys(e).reduce(function(r,t){var n=e[t];if(Object.prototype.toString.apply(n)==="[object Array]"){r[t]=n[0]}else if(typeof n==="string"){r[t]=n}else{throw new Error("Parameters should be passed as strings or array of strings")}return r},{})}function n(r,t){var n=e({},r);var u=e({},t);return Object.keys(u).reduce(function(e,r){e[r]=u[r];return e},n)}return{mergeObject:n,hasValue:r,removeArrayParameterNotation:t}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter", ["sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/Log"],function(e,jQuery,t,r){"use strict";var s=function(s,n,i){this._oAdapterConfig=i&&i.config;var o=sap.ushell.Container,a="";if(o){a=o.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:a}};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=r._version&&e(r._version).getMajor()===3?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([s],function(e){var s=e.formatSite(r)||[];t._getInboundsDeferred.resolve(s)})},function(e){t._getInboundsDeferred.reject(e)})}return this._getInboundsDeferred.promise()};this._createSIDMap=function(e){return Object.keys(e).sort().reduce(function(t,r){var s=e[r];var n="SID("+s.systemId+"."+s.client+")";if(!t.hasOwnProperty(n)&&s.hasOwnProperty("systemId")&&s.hasOwnProperty("client")){t[n]=r}return t},{})};this._getSystemAliases=function(){var e=this;if(!this.oSystemAliasesDeferred){this.oSystemAliasesDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=t({},r.systemAliases||{});Object.keys(s).forEach(function(e){s[e].id=e});e.oSystemAliasesDeferred.resolve(s)},function(t){e.oSystemAliasesDeferred.reject(t)})}return this.oSystemAliasesDeferred.promise()};this.resolveSystemAlias=function(e){var s=new jQuery.Deferred,n=this;this._getSystemAliases().done(function(i){var o,a;if(i.hasOwnProperty(e)){a=i[e];if(e===""){a.properties=t({},n._oLocalSystemAlias.properties,a.properties||{})}s.resolve(a);return}if(e===""){s.resolve(n._oLocalSystemAlias);return}e=e.toUpperCase(e);if(!n._oSIDMap){n._oSIDMap=n._createSIDMap(i)}if(n._oSIDMap.hasOwnProperty(e)){var u=i[n._oSIDMap[e]];s.resolve(u);return}o="Cannot resolve system alias "+e;r.warning(o,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");s.reject(o)}).fail(function(e){s.reject(e)});return s.promise()};this.getContentProviderDataOriginsLookup=function(){var e=this;if(!this.oContentProviderDataOriginsDeferred){this.oContentProviderDataOriginsDeferred=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=null;if(r.contentProviderDataOrigins){s=t({},r.contentProviderDataOrigins)}e.oContentProviderDataOriginsDeferred.resolve(s)},function(t){e.oContentProviderDataOriginsDeferred.reject(t)})}return this.oContentProviderDataOriginsDeferred.promise()}};return s},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/CommonDataModelAdapter", ["sap/ui/thirdparty/URI","sap/base/Log","sap/base/util/Version","sap/base/util/UriParameters","sap/ui/thirdparty/jquery"],function(e,t,i,n,jQuery){"use strict";var o=function(e,t,i){this.oAdapterConfiguration=i;if(i&&i.config&&i.config.siteData){this.oCdmSiteDataRequestPromise=(new jQuery.Deferred).resolve(i.config.siteData)}else if(i&&i.config&&i.config.siteDataPromise){this.oCdmSiteDataRequestPromise=i.config.siteDataPromise}else{var n=this._identifySiteUrlFromConfig(i);var o=this._normalizeUrl(n,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(o)}};o.prototype._requestSiteData=function(e){var i=new jQuery.Deferred;if(!e){return i.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.")}jQuery.ajax({type:"GET",dataType:"json",url:e}).done(function(e){i.resolve(e)}).fail(function(e){t.error(e.responseText);i.reject("CDM Site was requested but could not be loaded.")});return i.promise()};o.prototype._normalizeUrl=function(t,i){if(typeof t!=="string"){return t}if(t.indexOf("http")===0){return t}var n=document.getElementsByTagName("base")[0];return new e(t,n).absoluteTo(i).toString()};o.prototype.getSite=function(){var e=new jQuery.Deferred;this.oCdmSiteDataRequestPromise.done(function(t){var i=jQuery.extend({},t);delete i.personalization;e.resolve(i)}).fail(function(t){e.reject(t)});return e.promise()};o.prototype.getPersonalization=function(){var e=new jQuery.Deferred,i=this;this.oCdmSiteDataRequestPromise.done(function(n){var o=jQuery.extend({},n),r=o._version,a;if(i.oAdapterConfiguration&&i.oAdapterConfiguration.config&&i.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete o.personalization}if(o.personalization){a=o.personalization._version;if(Object.keys(o.personalization).length>0&&!i._isPersonalizationVersionValid(r,a)){t.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+a+"; Site version: "+r);e.resolve();return}e.resolve(o.personalization)}else{i._readPersonalizationDataFromStorage(r).done(function(n){a=n._version;if(Object.keys(n).length>0&&!i._isPersonalizationVersionValid(r,a)){t.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+a+"; Site version: "+r);e.resolve();return}e.resolve(n)}).fail(function(t){e.reject(t)})}}).fail(function(t){e.reject(t)});return e.promise()};o.prototype._isPersonalizationVersionValid=function(e,t){if(!e){return false}var n=new i(e).getMajor(),o=new i(t);if(n>=3){return o.getMajor()===n}return o.getMajor()<3};o.prototype.setPersonalization=function(e){var n=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var r,a={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},s={container:"sap.ushell.cdm.personalization",item:"data"},l=new i(e.version);if(l.inRange("3.1.0","4.0.0")){s={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var f=o.getPersonalizer(s,a,r);f.setPersData(e).done(function(){t.info("Personalization data has been stored successfully.");n.resolve()}).fail(function(){n.reject("Writing personalization data failed.")})});return n.promise()};o.prototype._readPersonalizationDataFromStorage=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Personalization").then(function(n){var o={keyCategory:n.constants.keyCategory.FIXED_KEY,writeFrequency:n.constants.writeFrequency.LOW,clientStorageAllowed:true};var r={container:"sap.ushell.cdm.personalization",item:"data"};if(e){var a=new i(e);if(a&&a.inRange("3.1.0","4.0.0")){r={container:"sap.ushell.cdm3-1.personalization",item:"data"}}}n.getPersonalizer(r,o).getPersData().done(function(e){t.resolve(e||{})}).fail(function(){t.reject("Fetching personalization data failed.")})});return t.promise()};o.prototype._identifySiteUrlFromConfig=function(e){var t=n.fromQuery(window.location.search);var i=t.get("sap-ushell-cdm-site-url");var o=e&&e.config;if(o&&!o.allowSiteSourceFromURLParameter&&i){i=null}if(o&&!i){i=o.siteDataUrl||o.cdmSiteUrl}this.sCdmSiteUrl=i;return i};return o},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications", ["sap/base/util/ObjectPath"],function(t){"use strict";var n={};n.getId=function(n){return t.get(["sap.app","id"],n)};n.getTitle=function(n){return t.get(["sap.app","title"],n)};n.getSubTitle=function(n){return t.get(["sap.app","subTitle"],n)};n.getIcon=function(n){return t.get(["sap.ui","icons","icon"],n)};n.getInfo=function(n){return t.get(["sap.app","info"],n)};n.getKeywords=function(n){return t.get(["sap.app","tags","keywords"],n)};n.getContentProviderId=function(n){return t.get(["sap.app","contentProviderId"],n)};n.getInbounds=function(n){return t.get(["sap.app","crossNavigation","inbounds"],n)};n.getInbound=function(n,e){return t.get(["sap.app","crossNavigation","inbounds",e],n)};n.getInboundTarget=function(n,e,i){var r=t.get([e],n)||{};var u=this.getInbound(r,i);if(!r||!u){return}return{semanticObject:u.semanticObject,action:u.action}};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readHome", ["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(i,t){"use strict";var e={};e.getGroupsArrayFromSite=function(i){var t=[];i.site.payload.groupsOrder.forEach(function(e,n){var r=i.groups[e];if(r){r.payload=r.payload||{};t.push(r)}});return t};e.getGroupsMapFromSite=function(i){return i.groups};e.getGroupIdsFromSite=function(i){return i.site.payload.groupsOrder};e.getGroupFromSite=function(i,t){return i.groups[t]};e.getDefaultGroup=function(i){var t=i.filter(function(i){return i.payload.hasOwnProperty("isDefaultGroup")});if(t.length>0){return t[0]}};e.getGroupId=function(i){return i.identification&&i.identification.id};e.getGroupTitle=function(i){return i.identification.title};e.isGroupPreset=function(i){if(!i.payload.hasOwnProperty("isPreset")){return true}return!!i.payload.isPreset};e.isGroupLocked=function(i){return!!i.payload.locked};e.isGroupVisible=function(i){return!!(i.identification.isVisible===undefined||i.identification.isVisible===true)};e.getGroupTiles=function(t){if(t.payload.tiles&&i.isArray(t.payload.tiles)&&t.payload.tiles.length>0){return t.payload.tiles}return[]};e.getGroupLinks=function(t){if(t.payload.links&&i.isArray(t.payload.links)&&t.payload.links.length>0){return t.payload.links}return[]};e.getTileId=function(i){return i.id};e.getTileVizId=function(i){return i.vizId};e.getTileTitle=function(i,t){var e;if(t&&t.isBookmark){return t.title}e=i[t.id];if(e){return t.title||e.tileResolutionResult.title}};e.getContentProviderId=function(i){return i.contentProvider||undefined};e.getTileSubtitle=function(i,t){var e;if(t.isBookmark){return t.subTitle}e=i[t.id];if(e){return t.subTitle||e.tileResolutionResult.subTitle}};e.getTileInfo=function(i,t){var e;if(t.isBookmark){return t.info}e=i[t.id];if(e){return t.info||e.tileResolutionResult.info}};e.getTileIcon=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileIndicatorDataSource=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileSize=function(i,t){var e=i[t.id];if(e&&e.tileResolutionResult&&e.tileResolutionResult.size){return e.tileResolutionResult.size}};e.isLink=function(i,t){var e=i[t.id];if(e){return!!e.isLink}return false};e.isCard=function(i,t){var e=i[t.id];if(e){return!!e.tileResolutionResult.isCard}return false};e.isGroupTile=function(i){return!!(i&&i.id&&!i.isCatalogTile)};e.supportsFormFactor=function(i,t){return i.deviceTypes&&i.deviceTypes[t]};e.getInbound=function(i,e){var n=t.getInbound(i,e);return n&&{key:e,inbound:n}};return e},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ushell/library"],function(a,t,e,i,r,o,n,s,u,p,d){"use strict";var c={};var l=d.DisplayFormat;c.getVizData=function(r,n,s,p){if(n.isBookmark&&n.url){n=o(n);n.subTitle=n.subtitle;n.target=i.toTargetFromHash(n.url)}var d=this.getCdmParts(r,n);var c=d&&d[1]||{};var l=d&&d[3]||{};var v=a.get(r,e.getTileVizId(n))||{};var g={id:e.getTileId(n),vizId:e.getTileVizId(n)||"",vizType:n.vizType||a.getTypeId(v)||"",vizConfig:u({},c,n.vizConfig),title:a.getTitle(d)||"",subtitle:a.getSubTitle(d)||"",icon:a.getIcon(d)||"",keywords:a.getKeywords(d)||[],info:a.getInfo(d)||"",target:n.target||a.getTarget(v)||{},indicatorDataSource:this._getIndicatorDataSource(n,v,p),isBookmark:n.isBookmark||false,contentProviderId:n.contentProviderId||t.getContentProviderId(l)||"",displayFormatHint:n.displayFormatHint,numberUnit:a.getNumberUnit(d),_instantiationData:a.getInstantiationData(v)};g.target=this.harmonizeTarget(g.target);g.targetURL=i.toHashFromVizData(g,r.applications);if(g.indicatorDataSource){if(g.indicatorDataSource.dataSource){g.dataSource=a.getDataSource(d,g.indicatorDataSource.dataSource)}else if(n.isBookmark&&n.dataSource){g.dataSource=n.dataSource}}if(n.isBookmark){this._addBookmarkInstantiationData(g,r)}if(!g._instantiationData||!Object.keys(g._instantiationData)){g._instantiationData={platform:"CDM",vizType:a.getType(r,g.vizType)}}this._evaluateDisplayFormat(g,r);return g};c._getIndicatorDataSource=function(t,e,i){if(t.indicatorDataSource&&t.indicatorDataSource.path){if(t.contentProviderId&&i){t.indicatorDataSource.path=i.getFullyQualifiedXhrUrl(t.indicatorDataSource.path)}return t.indicatorDataSource}return a.getIndicatorDataSource(e)};c.getVizRef=function(a){var t={id:a.id,vizId:a.vizId,title:a.title,subTitle:a.subtitle,icon:a.icon,keywords:a.keywords,info:a.info,target:a.target,indicatorDataSource:a.indicatorDataSource,contentProviderId:a.contentProviderId,displayFormatHint:a.displayFormatHint,numberUnit:a.numberUnit};if(t.indicatorDataSource&&t.indicatorDataSource.originalPath){t.indicatorDataSource.path=t.indicatorDataSource.originalPath;delete t.indicatorDataSource.originalPath}if(a.isBookmark){t.isBookmark=a.isBookmark;if(a.vizConfig!==undefined&&!p(a.vizConfig)){t.vizType=a.vizType;if(a.cdmVizType){t.vizType=a.cdmVizType}t.vizConfig=a.vizConfig}}return t};c.getCdmParts=function(i,r){var o=a.get(i,e.getTileVizId(r))||{};var n=a.getConfig(o);var s=a.getAppDescriptor(i,a.getAppId(o));var u=t.getInbound(s,a.getInboundId(o));return[r,n,u,s]};c.harmonizeTarget=function(a){var t=a.parameters;if(!t||n(t)){return a}var e={};t.forEach(function(a){if(e[a.name]){if(!Array.isArray(e[a.name].value.value)){e[a.name].value.value=[e[a.name].value.value]}e[a.name].value.value.push(a.value)}else{e[a.name]={value:{value:a.value,format:"plain"}}}});a.parameters=e;return a};c._evaluateDisplayFormat=function(t,e){var i=t.displayFormatHint;var r=a.getType(e,t.vizType);var o=a.getTileSize(r);var n=o==="1x2"?l.StandardWide:l.Standard;var s=[n,l.Compact];t.supportedDisplayFormats=a.getSupportedDisplayFormats(r)||s;var u=a.getDefaultDisplayFormat(r)||n;if(t.supportedDisplayFormats.indexOf(i)===-1){t.displayFormatHint=u}};c._addBookmarkInstantiationData=function(t,e){if(t.vizType){var i=a.getType(e,t.vizType);var r=s.get(["sap.app","type"],i||{});if(i&&r!=="chipVizType"){t._instantiationData={platform:"CDM",vizType:i}}else{var n=a.getChipConfigFromVizReference(t);t._instantiationData={platform:"ABAP",chip:o(n),simplifiedChipFormat:true};t.cdmVizType=t.vizType;t.vizType=n.chipId}}else if(t.indicatorDataSource&&t.indicatorDataSource.path){t.vizType="sap.ushell.DynamicAppLauncher"}else{t.vizType="sap.ushell.StaticAppLauncher"}};c.getBookmarkVizTypeIds=function(t){var e=["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"];var i=t.vizType;if(i&&!e.includes(i)){e.push(i)}var r=a.getChipConfigFromVizReference(t);var o=r&&r.chipId;if(o&&!e.includes(o)){e.push(o)}return e};return c},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations", ["sap/ushell/utils","sap/base/util/ObjectPath"],function(t,e){"use strict";var n={};n.getMap=function(t){return t.visualizations};n.get=function(t,n){return e.get(["visualizations",n],t)};n.getTypeMap=function(t){return t.vizTypes};n.getType=function(t,n){return e.get(["vizTypes",n],t)};n.getTypeId=function(t){return e.get("vizType",t||{})};n.isStandardVizType=function(t){return t==="sap.ushell.StaticAppLauncher"||t==="sap.ushell.DynamicAppLauncher"};n.getSupportedDisplayFormats=function(t){return e.get(["sap.flp","vizOptions","displayFormats","supported"],t||{})};n.getDefaultDisplayFormat=function(t){return e.get(["sap.flp","vizOptions","displayFormats","default"],t||{})};n.getTileSize=function(t){return e.get(["sap.flp","tileSize"],t||{})};n.getConfig=function(t){return e.get("vizConfig",t||{})};n.getTarget=function(t){var n=this.getConfig(t);return e.get(["sap.flp","target"],n||{})};n.getAppId=function(t){var n=this.getTarget(t);return e.get("appId",n||{})};n.getInboundId=function(t){var n=this.getTarget(t);return e.get("inboundId",n||{})};n.getOutbound=function(t,e){var n={semanticObject:e.semanticObject,action:e.action,parameters:this.getTarget(t).parameters||{}};n.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(t)}};return n};n.startsExternalUrl=function(t){var e=this.getTarget(t);return e&&e.type==="URL"};n.getAppDescriptor=function(t,n){return e.get(["applications",n],t)};n.getKeywords=function(e){var n=t.clone(e);n.splice(2,1);n.splice(0,1);return t.getNestedObjectProperty(n,["sap|app.tags.keywords","sap|app.tags.keywords"])};n.getTitle=function(e){return t.getNestedObjectProperty(e,["title","sap|app.title","title","sap|app.title"])};n.getSubTitle=function(e){return t.getNestedObjectProperty(e,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"])};n.getIcon=function(e){return t.getNestedObjectProperty(e,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"])};n.getNumberUnit=function(e){var n=t.clone(e);n.splice(2,2);return t.getNestedObjectProperty(n,["numberUnit","sap|flp.numberUnit"])};n.getInfo=function(e){return t.getNestedObjectProperty(e,["info","sap|app.info","info","sap|app.info"])};n.getShortTitle=function(e){var n=t.clone(e);n.splice(0,1);return t.getNestedObjectProperty(n,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"])};n.getInstantiationData=function(t){return e.get(["vizConfig","sap.flp","_instantiationData"],t)};n.getIndicatorDataSource=function(t){return e.get(["vizConfig","sap.flp","indicatorDataSource"],t)};n.getDataSource=function(e,n){var i=t.clone(e);i.splice(2,1);i.splice(0,1);var r=t.getNestedObjectProperty(i,["sap|app.dataSources","sap|app.dataSources"])||{};return r[n]};n.getChipConfigFromVizReference=function(t){return e.get(["vizConfig","sap.flp","chipConfig"],t)};return n},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/utilsCdm", ["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/utils/UrlParsing","sap/base/Log"],function(e,t,jQuery,a,i,r,s,n,o,p,u){"use strict";var l={};l.getMember=function(t,a){return e.getMember(t,a)};l.getNestedObjectProperty=function(t,a,i){return e.getNestedObjectProperty(t,a,i)};l.mapOne=function(e,r,n,p,u,l){var c=false;r=a({},r);n=a({},n);p=a({},p);u=a({},u);p=p||{};u=u||{};var m={};m.semanticObject=this.getMember(r,"semanticObject");m.action=this.getMember(r,"action");var f=t.getConfig(p);m.title=t.getTitle([undefined,f,r,n]);m.info=t.getInfo([undefined,f,r,n]);m.icon=t.getIcon([undefined,f,r,n]);m.subTitle=t.getSubTitle([undefined,f,r,n]);m.shortTitle=t.getShortTitle([undefined,f,r,n]);m.keywords=t.getKeywords([undefined,f,r,n]);m.numberUnit=t.getNumberUnit([undefined,f,undefined,undefined]);m.deviceTypes=this.getMember(n,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(this.getMember(r,"deviceTypes")||{},e)){m.deviceTypes[e]=r.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(m.deviceTypes,e)){m.deviceTypes[e]=true}m.deviceTypes[e]=!!m.deviceTypes[e]}.bind(this));m.signature=this.getMember(r,"signature")||{};m.signature.parameters=this.getMember(m,"signature.parameters")||{};m.signature.additionalParameters=this.getMember(r,"signature.additionalParameters")||"allowed";var d=this.getMember(n,"sap|platform|runtime");m.resolutionResult=jQuery.extend(true,{},d);if(d){m.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},d)}if(this.getMember(n,"sap|ui.technology")==="GUI"){m.resolutionResult["sap.gui"]=this.getMember(n,"sap|gui")}if(this.getMember(n,"sap|ui.technology")==="WDA"){m.resolutionResult["sap.wda"]=this.getMember(n,"sap|wda")}if(this.getMember(n,"sap|ui.technology")==="URL"){if(n["sap.url"]){m.resolutionResult["sap.platform.runtime"]=m.resolutionResult["sap.platform.runtime"]||{};m.resolutionResult.url=n["sap.url"].uri;m.resolutionResult["sap.platform.runtime"].url=n["sap.url"].uri}else if(d&&d.uri){m.resolutionResult["sap.platform.runtime"].url=d.uri;m.resolutionResult.url=d.uri}}if(!m.resolutionResult["sap.ui"]){m.resolutionResult["sap.ui"]={}}m.resolutionResult["sap.ui"].technology=this.getMember(n,"sap|ui.technology");m.resolutionResult.applicationType=this._formatApplicationType(m.resolutionResult,n);m.resolutionResult.systemAlias=m.resolutionResult.systemAlias||this.getMember(r,"systemAlias");m.resolutionResult.systemAliasSemantics="apply";m.resolutionResult.text=m.title;m.resolutionResult.appId=this.getMember(n,"sap|app.id");var g,h;var b=this.getMember(p,"vizConfig.sap|flp.indicatorDataSource");var y={};if(!i(u)){var v=this.getMember(u,"sap|app.type");if(v==="card"){c=true;y=s({},u,p.vizConfig)}else{y.componentName=this.getMember(u,"sap|ui5.componentName");var M=this.getMember(u,"sap|platform|runtime.componentProperties");if(M){y.componentProperties=M}if(this.getMember(u,"sap|platform|runtime.includeManifest")){y.componentProperties=y.componentProperties||{};y.componentProperties.manifest=s({},u,p.vizConfig);delete y.componentProperties.manifest["sap.platform.runtime"]}}}if(this.getMember(n,"sap|app.type")==="plugin"||this.getMember(n,"sap|flp.type")==="plugin"){return undefined}var O=this.getNestedObjectProperty([f,n,u],"sap|flp.tileSize");var T=this.getNestedObjectProperty([f,n,u],"sap|app.description");if(this.getMember(n,"sap|ui.technology")==="GUI"&&this.getMember(n,"sap|gui.transaction")){g=this.getMember(n,"sap|gui.transaction")}if(this.getMember(n,"sap|ui.technology")==="WDA"&&this.getMember(n,"sap|wda.applicationId")){g=this.getMember(n,"sap|wda.applicationId")}var R=this.getNestedObjectProperty([f,n,u],"sap|app.dataSources");if(this.getMember(n,"sap|app.id")){h=this.getMember(n,"sap|app.id")}var P=o.getContentProviderId(n)||"";m.tileResolutionResult={appId:h,title:m.title,subTitle:m.subTitle,icon:m.icon,size:O,info:m.info,keywords:m.keywords,tileComponentLoadInfo:y,indicatorDataSource:b,dataSources:R,description:T,runtimeInformation:d,technicalInformation:g,deviceTypes:m.deviceTypes,isCard:c,contentProviderId:P,numberUnit:m.numberUnit};var j=this.getMember(n,"sap|integration.urlTemplateId");var I=this.getTemplatePayloadFromSite(j,l);if(I){m.templateContext={payload:I,site:l,siteAppSection:n}}return m};l.getTemplatePayloadFromSite=function(e,t){if(!t||typeof e!=="string"){return null}var a=e.replace(/[.]/g,"|");return this.getMember(t.urlTemplates,a+".payload")};l._formatApplicationType=function(e,t){var a=e.applicationType;if(a){return a}var i=this.getMember(t,"sap|platform|runtime.componentProperties.self.name")||this.getMember(t,"sap|ui5.componentName");if(this.getMember(t,"sap|flp.appType")==="UI5"||this.getMember(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+i;e.url=this.getMember(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=this.getMember(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(this.getMember(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=this.getMember(t,"sap|gui");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"TR"}if(this.getMember(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=this.getMember(t,"sap|wda");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"WDA"}if(this.getMember(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=this.getMember(t,"sap|app.destination.name")}return"URL"};l.formatSite=function(e){var t=this;if(!e){return[]}var a=[];try{var i=Object.keys(e.applications||{}).sort();i.forEach(function(i){try{var r=e.applications[i];var s=this.getMember(r,"sap|app.crossNavigation.inbounds");if(s){var n=Object.keys(s).sort();n.forEach(function(i){var n=s[i];var p=t.mapOne(i,n,r,undefined,undefined,e);if(p){p.contentProviderId=o.getContentProviderId(r)||"";a.push(p)}})}}catch(e){u.error("Error in application "+i+": "+e,e.stack)}}.bind(this))}catch(e){u.error(e);u.error(e.stack);return[]}return a};l.toHashFromInbound=function(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=r.get("signature.parameters",e)||{};Object.keys(a).forEach(function(e){if(a[e].filter&&Object.prototype.hasOwnProperty.call(a[e].filter,"value")&&(a[e].filter.format===undefined||a[e].filter.format==="plain")){t.params[e]=[a[e].filter.value]}if(a[e].launcherValue&&Object.prototype.hasOwnProperty.call(a[e].launcherValue,"value")&&(a[e].launcherValue.format===undefined||a[e].launcherValue.format==="plain")){t.params[e]=[a[e].launcherValue.value]}});i=p.constructShellHash(t);if(!i){return undefined}return i};l.toHashFromOutbound=function(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});i=p.constructShellHash(t);if(!i){return undefined}return i};l.toHashFromVizData=function(e,t){var a,i;if(!e.target){return undefined}a=e.target;if(a.type==="URL"){return a.url}var r=a.appId;var s=a.inboundId;if(r&&s){var n=o.getInboundTarget(t,r,s);i={};if(n){i.semanticObject=n.semanticObject;i.action=n.action;i.parameters=a.parameters||{};i.parameters["sap-ui-app-id-hint"]={value:{value:r,format:"plain"}};i.appSpecificRoute=a.appSpecificRoute||""}}else if(a.semanticObject&&a.action){i=a}return l.toHashFromTarget(i)};l.toHashFromTarget=function(e){try{var t={};var a=r.get("parameters",e)||{};Object.keys(a).forEach(function(e){t[e]=Array.isArray(a[e].value.value)?a[e].value.value:[a[e].value.value]});var i={target:{semanticObject:e.semanticObject,action:e.action},params:t,appSpecificRoute:e.appSpecificRoute};return"#"+p.constructShellHash(i)}catch(e){return undefined}};l.toTargetFromHash=function(e){var t=p.parseShellHash(e);if(t!==undefined){var a=t.params||{};if(Object.keys(a).length>0){t.parameters=[];Object.keys(a).forEach(function(e){var i=Array.isArray(a[e])?a[e]:[a[e]];i.forEach(function(a){var i={name:e,value:a};t.parameters.push(i)})})}delete t.params}else{t={type:"URL",url:e}}return t};l.isSameTarget=function(e,t){var a;if(e.type!==t.type){return false}if(e.type==="URL"){a=e.url===t.url}else{a=e.semanticObject===t.semanticObject&&e.action===t.action&&e.appSpecificRoute===t.appSpecificRoute&&n(e.parameters,t.parameters)}return a};return l},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter", ["sap/ui/thirdparty/jquery","sap/base/Log"],function(jQuery,e){"use strict";var r=function(e,r,t){this._oConfig=t&&t.config;this._oContainerPromises={}};r.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization")};r.prototype.saveParameterValue=function(r,t,n){var o=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error('Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"'+r+'"')}this._getUDContainer(n).done(function(e){e.setItemValue(r,t);e.saveDeferred(50).done(o.resolve.bind(o)).fail(o.reject.bind(o))}).fail(function(r){e.error(r);o.reject(r)});return o.promise()};r.prototype.deleteParameter=function(r,t){var n=new jQuery.Deferred;if(!(typeof r==="string"&&r.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(r))){e.error('Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :"'+r+'"')}this._getUDContainer(t).done(function(e){e.delItem(r);e.save().done(n.resolve.bind(n)).fail(n.reject.bind(n))}).fail(function(r){e.error(r);n.reject(r)});return n.promise()};r.prototype.loadParameterValue=function(r,t){var n=new jQuery.Deferred;this._getUDContainer(t).done(function(e){var t=e.getItemValue(r);if(t){n.resolve(t)}else{n.reject("no value ")}}).fail(function(r){e.error(r);n.reject(r)});return n.promise()};r.prototype.getStoredParameterNames=function(r){var t=new jQuery.Deferred;this._getUDContainer(r).done(function(e){var r=e.getItemKeys();t.resolve(r)}).fail(function(r){e.error(r);t.reject(r)});return t.promise()};r.prototype._getUDContainer=function(e){var r=e.id;if(r!==""){r="."+r}if(!this._oContainerPromises[e.id]){var t=new jQuery.Deferred;this._oContainerPromises[e.id]=t.promise();this._getPersonalizationService().then(function(e){e.getContainer("sap.ushell.UserDefaultParameter"+r,{keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true}).done(t.resolve).fail(t.reject)})}return this._oContainerPromises[e.id]};return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent", ["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(e,t,o,n,i,a){"use strict";var s={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var d={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var g={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){i.clear();n.clearHistory();i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var o=e.initializeSchedule();o.then(function(e){if(!e){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Configuration error!");return}t.initializeStepDoneListener(this);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived()}.bind(this))},_processStepConfiguration:function(e){var t={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(e.oConfig.loadingMode===s.CONTINUE_ON_EVENT){t.sStepType=s.CONTINUE_ON_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.continueOnEvent&&e.oConfig.continueOnEvent.eventName;t.oData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.eventName&&t.oData.stepName)}else if(e.oConfig.loadingMode===s.BY_EVENT){t.sStepType=s.BY_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.byEvent&&e.oConfig.byEvent.eventName;t.oData.eventData={};t.oData.eventData.data=e.oConfig.byEvent.eventData;t.oData.eventData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.eventName}else if(e.oConfig.loadingMode===s.BY_COMPONENT_CREATE){t.sStepType=s.BY_COMPONENT_CREATE;t.sStepName=e.oContent.LoadingStep;t.oData=e.oConfig.byComponentCreate&&e.oConfig.byComponentCreate.ui5ComponentOptions||{};t.bConfigOk=!!t.oData}else if(e.oConfig.loadingMode===s.BY_REQUIRE){t.sStepType=s.BY_REQUIRE;t.sStepName=e.oContent.LoadingStep;t.oData={};t.oData.sPath=e.oConfig.byRequire.path;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.sPath}else if(e.oConfig.loadingMode===s.WAIT_IN_MS){t.sStepType=s.WAIT_IN_MS;t.sStepName=e.oContent.LoadingStep;t.oData.iWaitingTime=e.oConfig.waitInMs&&e.oConfig.waitInMs.waitingTime;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.iWaitingTime&&t.oData.sStepName)}return t},dumpState:function(){i.dump()},dumpHistory:function(){n.dumpHistory()},dumpSchedule:function(){e.dumpSchedule()},dumpAll:function(){n.dumpHistory();e.dumpSchedule();i.dump()},eventReceived:function(){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=e.getNextLoadingStep();if(n.sStatus===d.ERROR){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");t.unregisterStepDoneListener();a.emit("FLPLoadingDone");return}if(n.sStatus===d.DONE){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Done,"Loading finished");t.unregisterStepDoneListener();a.emit("FLPLoadingDone");return}if(n.sStatus===d.BLOCKDONE){}if(n.sStatus===d.SKIPPED){}if(n.sStatus===d.STEP){var g=this._processStepConfiguration(n);if(!g.bConfigOk){i.setForLoadingStep(g.sStepName,i.id.loadingStep.Abort,"","Step configuration error");i.setForLoadingStep(g.sStepName,i.id.loadingStep.Skipped,"","Step configuration error");i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,g,"Step configuration error!")}else if(g.sStepType===s.CONTINUE_ON_EVENT){t.listenToEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.eventName,"continueOnEvent step sent to Event Processor")}else if(g.sStepType===s.BY_EVENT){o.loadComponentByEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byEvent step sent to FLP Loader")}else if(g.sStepType===s.WAIT_IN_MS){o.waitInMs(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader")}else if(g.sStepType===s.BY_REQUIRE){var p=o.loadComponentByRequire(g.oData.sPath);this.oPathsLoading[g.sStepName]=p;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.sPath,"byRequire step sent to FLP Loader");var r=g.sStepName;p.then(function(){i.setForLoadingStep(r,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[r];a.emit("StepDone",r)}.bind(this),function(){i.setForLoadingStep(r,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[r];a.emit("StepFailed",r)}.bind(this))}else if(g.sStepType===s.BY_COMPONENT_CREATE){var l=o.loadComponentByComponentCreate(g);this.oComponentsLoading[g.sStepName]=l;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byComponentCreate step sent to FLP Loader");l.then(function(e){i.setForLoadingStep(e,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];a.emit("StepDone",e)}.bind(this),function(e){i.setForLoadingStep(e,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];a.emit("StepFailed",e)}.bind(this))}}}while(n.sStatus!==d.WAIT);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Waiting,"Agent waits")}};return g},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/EventProcessor", ["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(e,t){"use strict";var n={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(n){this.SchedulingAgent=n;this.aDoableObjects=[t.on("StepDone").do(function(t){e.setForLoadingStep(t,e.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this)),t.on("StepFailed").do(function(t){e.setForLoadingStep(t,e.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this))]},listenToEvent:function(n){t.once(n.eventName).do(function(){e.setForLoadingStep(n.stepName,e.id.loadingStep.Done,n.eventName,"Event received");this.SchedulingAgent.eventReceived()}.bind(this))},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(e){e.off()})},setTimeOut:function(){}};return n},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/FLPLoader", ["sap/ushell/EventHub","sap/ui/core/Component"],function(e,n){"use strict";var t={loadComponentByEvent:function(n){e.emit(n.eventName,n.eventData)},loadComponentByComponentCreate:function(e){return n.create(e.oData).then(function(){return Promise.resolve(e.sStepName)},function(){return Promise.reject(e.sStepName)})},loadComponentByRequire:function(e){return new Promise(function(n,t){sap.ui.require([e],function(e){n(e)})})},waitInMs:function(n){setTimeout(function(){e.emit("StepDone",n.sStepName)},n.iWaitingTime)},directLoading:function(){}};return t},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler", ["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(e,o,n,i){"use strict";var t={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var d="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var a="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";function s(){return i.last("/core/shell/model/currentState/stateName")}var r={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var n=o.loadResource(a,{async:true});var i=o.loadResource(d,{async:true});var t=Promise.all([n,i]).then(function(o){var n=o[0];var i=o[1];var t=this._validateConfig(i,n);if(t){this.oSchedule.oBlocks=i.LoadingBlocks;this.oSchedule.oSteps=n;this.oSchedule.aBlockOrder=i.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.Initialized,"Schedule validated")}else{e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.WrongConfiguration,"Configuration error")}return t}.bind(this));return t},getNextLoadingStep:function(){var o={sStatus:t.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var n=this._startLoadingBlock();if(n){o.sStatus=t.Done;return o}}var i=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var d=this.oSchedule.aBlockOrder.indexOf(i);var a=this.oSchedule.aBlockOrder[d+1];if(this.oSchedule.oBlocks[i].bCanBeLoadedConcurrently&&a){this._startLoadingBlock()}var s=true;var r=false;var l,c,u,g,p,S,h,f,L;for(var k=0;k<this.oSchedule.aBlocksLoading.length;k++){l=this.oSchedule.aBlocksLoading[k];c=this.oSchedule.oBlocks[l];u=c.iStepIndex;g=c.LoadingSteps[u];p=u===c.LoadingSteps.length-1;S=this._checkAndUpdateAsyncQueue(c);L=e.isStepLoaded(g.LoadingStep)||e.isStepSkipped(g.LoadingStep);f=e.isStepLoading(g.LoadingStep);s=S.bAllStepsDone&&L;r=S.bAStepIsLoading||f;if(f&&!g.canBeLoadedAsync||r&&p){o.sStatus=t.Wait;continue}if(!p||!L&&!f){if(L||g.canBeLoadedAsync&&f){u+=1}o=this._prepareStepForLoading(c,l,u)}if(s&&p){h=this.oSchedule.aBlocksLoading.indexOf(l);this.oSchedule.aBlocksLoading.splice(h,1);o.sStatus=t.BlockDone;e.setForLoadingBlock(l,e.id.loadingBlock.Done,"","Block removed from loading queue")}if(o.sStatus!==t.wait){break}}return o},dumpSchedule:function(){n.debug(JSON.stringify(this.oSchedule))},_loadingIsEnabled:function(e){var o;if(Array.isArray(e.oConfig.excludedFLPStates)){if(e.oConfig.excludedFLPStates.indexOf(s())>-1){return false}}if(Array.isArray(e.oConfig.mandatoryFLPStates)&&e.oConfig.mandatoryFLPStates.length!==0){if(e.oConfig.mandatoryFLPStates.indexOf(s())===-1){return false}}function n(e){return e.path&&i.last(e.path)!==e.assertionValue}if(e.oConfig.configSwitch){o=[].concat(e.oConfig.configSwitch);if(o.some(n)){return false}}return true},_checkAndUpdateAsyncQueue:function(o){var n=[];var i,t,d;var a=true;var s=false;for(var r=0;r<o.aAsyncStepsLoading.length;r++){d=o.aAsyncStepsLoading[r];i=e.isStepLoaded(d)||e.isStepSkipped(d);t=e.isStepLoading(d);if(t){n.push(d)}a=a&&i;s=s||t}o.aAsyncStepsLoading=n;return{bAllStepsDone:a,bAStepIsLoading:s}},_startLoadingBlock:function(){var o=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;e.setForLoadingBlock(n,e.id.loadingBlock.Prepared,"","Block added to the loading queue.")}else{o=true}return o},_prepareStepForLoading:function(o,n,i){var d;var a={sStatus:t.Step,oContent:o.LoadingSteps[i],oConfig:this.oSchedule.oSteps[o.LoadingSteps[i].LoadingStep]};if(!this._loadingIsEnabled(a)){a.sStatus=t.Skipped;o.iStepIndex=i;e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Skipped,"","Step set to skipped");return a}var s=this._checkDependencies(a,n);if(s.bMissing){a.sStatus=t.Error}else if(s.bAllLoaded){e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Prepared,"","Step prepared for control unit");d=a.oContent.canBeLoadedAsync;o.iStepIndex=i;if(d){e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.Prepared,"","Step set on the async loading queue");o.aAsyncStepsLoading.push(a.oContent.LoadingStep)}}else{a.sStatus=t.Wait;e.setForLoadingStep(a.oContent.LoadingStep,e.id.loadingStep.WaitingForDependencies,"","Step missing dependencies")}return a},_checkDependencies:function(o,n){var i={bAllLoaded:true,bMissing:false};if(o.oConfig.Dependencies){for(var t=0;t<o.oConfig.Dependencies.length;t++){i.bAllLoaded=i.bAllLoaded&&e.isStepLoaded(o.oConfig.Dependencies[t]);if(!e.isStepLoaded(o.oConfig.Dependencies[t])&&!e.isStepLoading(o.oConfig.Dependencies[t])){e.setForLoadingStep(o.oContent.LoadingStep,e.id.loadingStep.Aborted,o.oConfig.Dependencies[t],"Missing a dependency");e.setForLoadingBlock(n,e.id.loadingBlock.Aborted,o.oConfig.Dependencies[t],"A step is missing a dependency");e.setForModule(e.id.module.flpScheduler.id,e.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");i.bMissing=true;i.bAllLoaded=false;break}}}return i},_validateConfig:function(e,o){var n=e&&e.OrderOfLoadingBlocks&&e.LoadingBlocks&&e.OrderOfLoadingBlocks.length&&o;if(!n){return false}var i=e.OrderOfLoadingBlocks.reduce(function(n,i){n=n&&e.LoadingBlocks[i];if(n){var t=e.LoadingBlocks[i];var d=true;if(t.LoadingSteps){var a;for(var s=0;s<t.LoadingSteps.length;s++){a=t.LoadingSteps[s].LoadingStep;d=d&&o[a]}}n=n&&d}return!!n},true);return i}};return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/logger", ["sap/base/Log"],function(t){"use strict";var r=[];var n=true;var e="FLPScheduler";return{getHistory:function(){return r},verboseOn:function(){n=true;return n===true},verboseOff:function(){n=false;return n===false},isVerboseOn:function(){return n===true},clearHistory:function(){r.length=0},dumpHistory:function(t){var n;if(t){n=r.filter(function(r){return r.id===t});console.table(n)}else{console.table(r)}return n||r},logError:function(n){t.error(this.stateToString(n),undefined,e);r.push(n);return true},logWarning:function(u){if(n){t.warning(this.stateToString(u),e);r.push(u)}return n},logStatus:function(u){if(n){t.info(this.stateToString(u),e);r.push(u)}return n},stateToString:function(t){return"FLP Bootstrap Scheduling Agent :: "+t.type+" '"+t.id+"' /"+t.status+(t.remark?"/ : "+t.remark:"/")}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/_SchedulingAgent/state", ["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(e,t,o){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:e,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var n={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}}},getIdBase:function(){return i},setForLoadingBlock:function(o,n,a,r,d){this.oState.ofLoadingBlock[o]={time:t(),status:n,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingBlock[o].time,type:i.module.logger.Block,id:o,status:n,parameter:a,remark:r,byModule:d})},getForLoadingBlock:function(e){return this.oState.ofLoadingBlock[e]},setForLoadingStep:function(o,n,a,r,d){this.oState.ofLoadingStep[o]={time:t(),status:n,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingStep[o].time,type:i.module.logger.Step,id:o,status:n,parameter:a,remark:r,byModule:d})},getForLoadingStep:function(e){return this.oState.ofLoadingStep[e]},setForModule:function(o,n,a){this.oState.ofModule[o]={time:t(),status:n,remark:a,byModule:undefined};e.logStatus({time:this.oState.ofModule[o].time,type:i.module.logger.Module,id:o,status:n,parameter:undefined,remark:a,byModule:undefined})},getForModule:function(e){return this.oState.ofModule[e]},isBlockWaitingForDependencies:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.WaitingForDependencies)},isBlockLoading:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.InProgress)},isBlockLoaded:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.Done)},isBlockLoadingAborted:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.Aborted)},hasBlockLoadingTimedOut:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===i.loadingBlock.TimedOut)},isStepWaitingForDependencies:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.WaitingForDependencies)},isStepLoading:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.InProgress)},isStepLoaded:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Done)},isStepLoadingAborted:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Sborted)},isStepSkipped:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===i.loadingStep.Skipped)},isAgentIdle:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.Idle)},isAgentWaiting:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.Waiting)},agentWokeUp:function(){var e=this.getForModule(i.module.schedulingAgent.id);return!!(e&&e.status===i.module.schedulingAgent.WokeUp)},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var e=o(this.oState);return e},iStartingTime:t()};n.setForModule(i.module.state.id,i.module.state.Available);return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.constants", [],function(){"use strict";return{uiDebugKey:"sap-ui-debug",bootScriptId:"sap-ui-bootstrap",bwcBootScriptId:"sap-ushell-bootstrap",configMetaPrefix:"sap.ushellConfig",ushellConfigNamespace:"sap-ushell-config"}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.create.configcontract.core", ["sap/ui/thirdparty/URI"],function(e){"use strict";var n={};function a(e){var a={};function o(n,a){var o=a.split("/");var i=o.slice(0,o.length-1).join("/");var r=o.pop();if(n.hasOwnProperty(i)){return n[i][r]}var s=o.reduce(function(e,n){if(!e||!e.hasOwnProperty(n)){return{}}return e[n]},e);n[i]=s;return s[r]}function i(e,i){var r=o(a,e);n[e]=i;return r!==undefined?r:i}function r(){var e="renderers/fiori2/componentData/config/enableBackGroundShapes";var r=!!o(a,e);if(r){r=!i("ushell/spaces/enabled",false)}n[e]=r;return r}function s(){return i("renderers/fiori2/componentData/config/enablePersonalization",i("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))}function l(){var e=i("renderers/fiori2/componentData/config/rootIntent","");if(e){e="#"+e}return e}var t=i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",true);var c={enableEasyAccessOnTablet:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuOnTablet",false),enableEasyAccessSAPMenu:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",t),enableEasyAccessSAPMenuSearch:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenuSearch",true),enableEasyAccessUserMenu:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",t),enableEasyAccessUserMenuSearch:i("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuSearch",true)};function p(e){if(t===true){return c[e]?c[e+"Search"]:false}return false}var f={core:{site:{siteId:i("ushell/site/siteId",null)},extension:{enableHelp:i("renderers/fiori2/componentData/config/enableHelp",false),SupportTicket:i("services/SupportTicket/config/enabled",false),enableTileColors:i("ushell/extension/enableTileColors",false)},services:{allMyApps:{enabled:i("services/AllMyApps/config/enabled",true),showHomePageApps:i("services/AllMyApps/config/showHomePageApps",true),showCatalogApps:i("services/AllMyApps/config/showCatalogApps",true)}},navigation:{enableInPlaceForClassicUIs:{GUI:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:i("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:i("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+"),enableWdaCompatibilityMode:i("ushell/navigation/wdaCompatibilityMode",false)},spaces:{enabled:i("ushell/spaces/enabled",false),configurable:i("ushell/spaces/configurable",false),myHome:{userEnabled:true,enabled:i("startupConfig/spacesMyhome",false),myHomeSpaceId:i("startupConfig/spacesMyhomeSpaceid",null),myHomePageId:i("startupConfig/spacesMyhomePageid",null),presetSectionId:"3WO90XZ1DX1AS32M7ZM9NBXEF"},hideEmptySpaces:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/spaces/hideEmptySpaces/enabled",false),userEnabled:true},extendedChangeDetection:{enabled:i("ushell/spaces/extendedChangeDetection/enabled",true)},homeNavigationTarget:i("renderers/fiori2/componentData/config/homeNavigationTarget",undefined)},workPages:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/workPages/enabled",false),contentApiUrl:i("ushell/workPages/contentApiUrl","/cep/graphql"),navigationApiUrl:i("ushell/workPages/navigationApiUrl","/navigation/api/v2"),myHome:{pageId:i("ushell/spaces/myHome/myHomePageId",null)}},homeApp:{enabled:i("ushell/spaces/enabled",false)&&!!i("ushell/homeApp/component",false),component:i("ushell/homeApp/component",{})},menu:{enabled:i("ushell/spaces/enabled",false)&&i("ushell/menu/enabled")!==false||i("ushell/menu/enabled",false),visibleInAllStates:i("ushell/menu/visibleInAllStates",false)},darkMode:{enabled:i("ushell/darkMode/enabled",false),supportedThemes:i("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"},{dark:"sap_fiori_3_hcb",light:"sap_fiori_3_hcw"},{dark:"sap_horizon_dark",light:"sap_horizon"},{dark:"sap_horizon_hcb",light:"sap_horizon_hcw"}])},contentProviders:{providerInfo:{show:i("ushell/contentProviders/providerInfo/show",false)}},productSwitch:{enabled:!!i("ushell/productSwitch/url",""),url:i("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:i("renderers/fiori2/componentData/config/rootIntent",""),homeUri:l(),title:""},themePreview:{sapHorizonEnabled:i("renderers/fiori2/componentData/config/sapHorizonEnabled",false)},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:i("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:i("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:s(),enableRecentActivity:i("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:i("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:i("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:i("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",true),enableOpenIframeWithPost:i("renderers/fiori2/componentData/config/enableOpenIframeWithPost",true),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:r(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,searchTerm:"",isPhoneWidth:false,enableNotifications:i("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},currentSpaceAndPage:undefined}},home:{disableSortedLockedGroups:i("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:i("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:i("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:i("renderers/fiori2/componentData/config/enableTileActionsIcon",i("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:i("ushell/home/enableTransientMode",false),featuredGroup:{enable:i("ushell/home/featuredGroup/enable",false),frequentCard:i("ushell/home/featuredGroup/frequentCard",true)&&i("ushell/home/featuredGroup/enable",false),recentCard:i("ushell/home/featuredGroup/recentCard",true)&&i("ushell/home/featuredGroup/enable",false)},homePageGroupDisplay:i("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:i("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:i("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:i("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:i("ushell/home/tilesWrappingType","Normal"),segments:i("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:s()||i("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:i("renderers/fiori2/componentData/config/applications/Shell-home/AppFinderDisplayMode",i("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined)),easyAccessNumbersOfLevels:i("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:i("renderers/fiori2/componentData/config/enableSearchFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:i("renderers/fiori2/componentData/config/enableCatalogSelection",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:i("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",i("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:t,enableEasyAccessSAPMenu:t?c.enableEasyAccessSAPMenu:false,enableEasyAccessOnTablet:t?c.enableEasyAccessOnTablet:false,enableEasyAccessSAPMenuSearch:p("enableEasyAccessSAPMenu"),enableEasyAccessUserMenu:t?c.enableEasyAccessUserMenu:false,enableEasyAccessUserMenuSearch:p("enableEasyAccessUserMenu"),enableHideGroups:i("renderers/fiori2/componentData/config/enableHideGroups",i("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:i("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:i("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:i("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:i("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)},stableIDs:{enabled:i("ushell/stableIDs/enabled",true),migratePersonalization:i("ushell/stableIDs/migratePersonalization",true)}}};return f}function o(){return n}return{createConfigContract:a,getDefaultConfiguration:o}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.debug.mode", ["./common.constants"],function(t){"use strict";var e;var a=/[?&]sap-ui-debug=(true|x|X)(&|$)/.test(window.location.search);if(!a){try{e=window.localStorage.getItem(t.uiDebugKey);a=!!e&&/^(true|x|X)$/.test(e)}catch(t){}}return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.core-min", ["./common.debug.mode","./common.load.script"],function(e,r){"use strict";var o={};o.loaded=t();o.load=function(t){var n=sap.ui.require.toUrl(t.replace(/\./g,"/"));var i;if(e){sap.ui.require(["sap/ui/core/Core"],function(e){e.boot()})}else{for(i=0;i<4;i++){r(n+"/core-min-"+i+".js");o.loaded=true}}};function t(){var e=Array.from(document.getElementsByTagName("script"));var r=e.some(function(e){var r=e.getAttribute("src");return r&&r.indexOf("core-min-0.js")>-1});return r}return o});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.model", ["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/Device","sap/base/util/extend"],function(e,n,i,t){"use strict";var s;function o(){var o=e.last("/core"),a={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:o.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:o.extension.enableHelp,enableTileActionsIcon:i.system.desktop?o.home.enableTileActionsIcon:false};a=t({},o.catalog,o.home,a);s=new n(a);s.setSizeLimit(1e4)}function a(e){s.setProperty("/isPhoneWidth",!e.matches)}function l(){var e=window.matchMedia("(min-width: 800px)");if(e.addListener){e.addListener(a);a(e)}}return{getModel:function(){if(!s){o();l()}return s},_resetModel:function(){if(s!=undefined){s.destroy();s=undefined}}}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.script", [],function(){"use strict";function e(e,r,t,n){return new Promise(function(i,d){function o(e){e.target.removeEventListener("load",o);e.target.removeEventListener("error",o);if(e.type==="error"){d()}i()}var a=document.createElement("script");a.src=e;a.async=!!n;a.addEventListener("load",o);a.addEventListener("error",o);if(r){a.id=r}if(t){a.defer=t}document.head.appendChild(a)})}return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/CatalogsManager", ["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(e,t,a,o,i,s,r,n,l,jQuery,g,u,c){"use strict";var h;var d=e.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoableObjects:[],constructor:function(e,t){this.oLaunchPageServicePromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this));this.oTileCatalogToGroupsMap={};this.tagsPool=[];this.iInitialLoad=100;this.oModel=t.model;var a={model:this.oModel};this.oHomepageManager=n.prototype.getInstance();if(!this.oHomepageManager){this.oHomepageManager=new n("dashboardMgr",a)}h=this.getInterface();this.registerEvents()},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[a.on("showCatalog").do(this.updateTilesAssociation.bind(this)),a.on("updateGroups").do(this.updateTilesAssociation.bind(this))]},unregisterEvents:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(e){e.off()})},getModel:function(){return this.oModel},loadAllCatalogs:function(){var e=new jQuery.Deferred;var t=this;var a;e.resolve();a=function(){e.done(function(){var e=t.getModel().getProperty("/groups");if(e&&e.length!==0){t.updateTilesAssociation()}})};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!c.last("/core/spaces/enabled")){e=this.oHomepageManager.loadPersonalizedGroups()}}i.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));i.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];g.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");g.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");g.pause("FLP:DashboardManager.getCatalogTiles");g.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");g.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){e.getCatalogs().done(function(e){var t=e.slice(0,this.iInitialLoad);g.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=t.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=e.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this))}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,e)).then(a)}.bind(this)).fail(r.showLocalizedErrorHelper("fail_to_load_catalog_msg"))}.bind(this))}else{a()}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap()},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var e=this.oModel.getProperty("/groups");var t,a,o,i,s;var r=this;e.forEach(function(e){["tiles","links"].forEach(function(n){a=e[n];if(a){for(t=0;t<a.length;++t){o=encodeURIComponent(r.oLaunchPageService.getCatalogTileId(a[t].object));i=r.oTileCatalogToGroupsMap[o]||[];s=r.oLaunchPageService.getGroupId(e.object);if(i.indexOf(s)===-1&&(typeof e.isGroupVisible==="undefined"||e.isGroupVisible)&&!e.isGroupLocked){i.push(s)}r.oTileCatalogToGroupsMap[o]=i}}})})},updateCatalogTilesToGroupsMap:function(){var e=this.getModel().getProperty("/catalogs");var t,a,o,i,s,r,n,l,g,u;if(e){for(t=0;t<e.length;t++){r=e[t].appBoxes;if(r){for(l=0;l<r.length;l++){g=r[l];a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(g.src));i=this.oTileCatalogToGroupsMap[a];o=i||[];g.associatedGroups=o}}s=e[t].customTiles;if(s){for(n=0;n<s.length;n++){u=s[n];a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(u.src));i=this.oTileCatalogToGroupsMap[a];o=i||[];u.associatedGroups=o}}}}this.getModel().setProperty("/catalogs",e)},addCatalogToModel:function(e){var t={title:this.oLaunchPageService.getCatalogTitle(e),id:this.oLaunchPageService.getCatalogId(e),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};g.resume("FLP:DashboardManager.getCatalogTiles");return new Promise(function(a,o){this.oLaunchPageService.getCatalogTiles(e).done(function(e){g.pause("FLP:DashboardManager.getCatalogTiles");a({oCatalogEntry:e,oCatalogModel:t})}).fail(function(e){r.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg");o(e)})}.bind(this))},getTagList:function(e){var t={};var a=0;var o=[];var i,s,r;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"))}for(a=0;a<this.tagsPool.length;a++){s=this.tagsPool[a];if(t[s]){t[s]++}else{t[s]=1}}for(i in t){o.push({tag:i,occ:t[i]})}r=o.sort(function(e,t){return t.occ-e.occ});if(e){this.oModel.setProperty("/tagList",r.slice(0,e))}else{this.oModel.setProperty("/tagList",r)}},processPendingCatalogs:function(e){var t=this.oModel.getProperty("/catalogs");var a=sap.ui.getCore().getEventBus();var i=this.oModel.getProperty("/masterCatalogs")||[{title:r.getLocalizedText("all")}];g.end("FLP:DashboardManager.getCatalogTiles");g.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");var s=e.reduce(function(e,a){return e.then(function(){var e,o;var s=a.oCatalogEntry;var r=a.oCatalogModel;var n=this.searchModelCatalogByTitle(r.title);if(n.result){o=this.oModel.getProperty("/catalogs")[n.indexOfPreviousInstanceInModel];e=false}else{e=true;o=r}var l=s.map(function(e){return this._processCatalogObjectForModel(o,e)}.bind(this));return Promise.all(l).then(function(){if(o.appBoxes.length>0||o.customTiles.length>0){if(e){t.push(r);i.push({title:r.title})}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList()}}.bind(this))}.bind(this))}.bind(this),Promise.resolve());return s.then(function(){this.oModel.setProperty("/masterCatalogs",i);this.oModel.setProperty("/catalogs",t);a.publish("launchpad","afterCatalogSegment");setTimeout(function(){o.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true})},0);g.pause("FLP:DashboardManager.BuildCatalogModelWithRendering")}.bind(this))},_processCatalogObjectForModel:function(e,t){var a;if(this._getIsIntentSupported(t)){if(this._getIsAppBox(t)){a=this.createCatalogAppBoxes(t,true);e.appBoxes.push(a);return Promise.resolve()}return this.createCatalogTiles(t).then(function(t){e.customTiles.push(t);if(!this.aFnToGetTileView){this.aFnToGetTileView=[]}}.bind(this))}return Promise.resolve()},loadCustomTilesKeyWords:function(){var e;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){e=this.aFnToGetTileView.pop();e()}}},searchModelCatalogByTitle:function(e){var t=this.oModel.getProperty("/catalogs");var a=false;var o;var i=0;var s=false;var r;for(var n=0;n<t.length;++n){r=t[n];if(r.title===l.i18n.getText("catalogsLoading")){s=true}else if(e===r.title){o=n;i=r.numberOfTiles;a=true;break}}return{result:a,indexOfPreviousInstanceInModel:o,indexOfPreviousInstanceInPage:s?o-1:o,numOfTilesInCatalog:i}},_getCatalogTileId:function(e){var t;var a=c.last("/core/stableIDs/enabled");var o=c.last("/core/spaces/enabled");if(a&&o){t=this.oLaunchPageService.getStableCatalogTileId(e)}if(!t){t=this.oLaunchPageService.getCatalogTileId(e)}return t},createCatalogAppBoxes:function(e,t){var a=encodeURIComponent(this._getCatalogTileId(e));var o=this.oTileCatalogToGroupsMap[a]||[];var i=this.oLaunchPageService.getCatalogTileTags(e)||[];if(i.length>0){this.tagsPool=this.tagsPool.concat(i)}var s;if(e.tileResolutionResult){s=e.tileResolutionResult.navigationMode}return{id:a,associatedGroups:o,src:e,title:this.oLaunchPageService.getCatalogTilePreviewTitle(e),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(e),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(e),keywords:t?(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","):[],tags:i,navigationMode:s,url:this.oLaunchPageService.getCatalogTileTargetURL(e)}},onDoneLoadingCatalogs:function(e){var t=e.map(function(e){return new Promise(function(t,a){this.oLaunchPageService.getCatalogTiles(e).done(t).fail(a)}.bind(this))}.bind(this));Promise.all(t).then(function(t){var a;var o=true;for(a=0;a<t.length;a++){if(t[a].length!==0){o=false;break}}if(o||!e.length){this.oModel.setProperty("/catalogsNoDataText",l.i18n.getText("noCatalogs"))}}.bind(this));var a=sap.ui.getCore().getEventBus();a.publish("launchpad","catalogContentLoaded");var i=e.filter(function(e){var t=this.oLaunchPageService.getCatalogError(e);if(t){u.error("A catalog could not be loaded",t,"sap.ushell.components.CatalogsManager")}return!t}.bind(this));if(i.length!==e.length){r.showLocalizedError("partialCatalogFail")}o.handleTilesVisibility()},createCatalogTiles:function(e){var a=Promise.resolve();var o=e.getChip&&e.getChip().getBaseChipId&&e.getChip().getBaseChipId();if(o&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(o)===-1){a=new Promise(function(t,a){this.oLaunchPageService.getCatalogTileViewControl(e).done(t).fail(a)}.bind(this))}return a.then(function(a){var o=encodeURIComponent(this._getCatalogTileId(e));var i=this.oTileCatalogToGroupsMap[o]||[];var s=this.oLaunchPageService.getCatalogTileTags(e)||[];if(s.length>0){this.tagsPool=this.tagsPool.concat(s)}if(!a){a=new t({state:"Loading"})}var r=this.oLaunchPageService.getCatalogTilePreviewTitle(e);if(!r){r=this.oLaunchPageService.getCatalogTileTitle(e)}return{associatedGroups:i,src:e,catalog:e.title,catalogId:e.id,title:r,tags:s,keywords:(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","),id:o,size:this.oLaunchPageService.getCatalogTileSize(e),content:[a],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(e),tileType:e.tileType}}.bind(this))},createGroupAndSaveTile:function(e){var t=this;var a=e.catalogTileContext;var i=e.newGroupName;var s=new jQuery.Deferred;var r={};if(o.validHash(i)&&a){this.createGroup(i).then(function(e){var o=t.createTile({catalogTileContext:a,groupContext:e});o.done(function(e){r={group:e.group,status:1,action:"addTileToNewGroup"};s.resolve(r)}).fail(function(e){r={group:e.group,status:0,action:"addTileToNewGroup"};s.resolve(r)})})}return s.promise()},createGroup:function(e){var t=this;var a=new jQuery.Deferred;if(!o.validHash(e)){return a.reject({status:0,action:"createNewGroup"})}var i=this.oLaunchPageService.addGroup(e);i.done(function(e){var o=t.oHomepageManager.addGroupToModel(e);a.resolve(o)});i.fail(function(){r.showLocalizedError("fail_to_create_group_msg");var e={status:0,action:"createNewGroup"};a.resolve(e)});return a.promise()},createTile:function(e){var t=this;var a=e.catalogTileContext;var o=e.groupContext;var i=this.oModel.getProperty(o.getPath());var n=i.groupId;var l;var g=new jQuery.Deferred;var c={};var h;h=sap.ui.getCore().getEventBus();h.publish("launchpad","addTile",{catalogTileContext:a,groupContext:o});if(!a){u.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);c={group:i,status:0,action:"add"};return Promise.resolve(c)}l=this.oLaunchPageService.addTile(a.getProperty("src"),o.getProperty("object"));l.done(function(e){var a=t.oModel.getProperty("/groups");var o=s.getModelPathOfGroup(a,n);var r=t.oLaunchPageService.getTileTitle(e);t.oHomepageManager.addTileToGroup(o,e);c={group:i,status:1,action:"add"};sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(e){e.logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[i.title,r])});g.resolve(c)}).fail(function(){r.showLocalizedError("fail_to_add_tile_msg");c={group:i,status:0,action:"add"};g.resolve(c)});return g.promise()},deleteCatalogTileFromGroup:function(e){var t=this;var a=decodeURIComponent(e.tileId);var o=e.groupIndex;var i=this.oModel.getProperty("/groups/"+o);var s=new jQuery.Deferred;var r=[];var n=[];var l,g;["tiles","links"].forEach(function(e){i[e].forEach(function(e){var o=t.oLaunchPageService.getCatalogTileId(e.object);if(o===a){l=new jQuery.Deferred;g=t.oLaunchPageService.removeTile(i.object,e.object);g.done(function(t){return function(){n.push(e.uuid);t.resolve({status:true})}}(l));g.fail(function(e){return function(){e.resolve({status:false})}}(l));r.push(l)}})});jQuery.when.apply(jQuery,r).done(function(e){var a=r.length===n.length;t.oHomepageManager.deleteTilesFromGroup(i.groupId,n);t.updateTilesAssociation();s.resolve({group:i,status:a,action:"remove"})});return s.promise()},calculateCatalogTileIndex:function(e,t,a){var o=parseInt(e*1e5,10);o+=(t!==undefined?t:0)+a;return o},notifyOnActionFailure:function(e,t){r.showLocalizedError(e,t)},resetAssociationOnFailure:function(e,t){this.notifyOnActionFailure(e,t);this.updateTilesAssociation()},_getIsIntentSupported:function(e){return!!this.oLaunchPageService.isTileIntentSupported(e)},_getIsAppBox:function(e){var t;var a=this.oModel.getProperty("/appFinderDisplayMode")||"appBoxes";if(a.toLowerCase()==="tiles"){t=false}else{t=!!(this.oLaunchPageService.getCatalogTileTargetURL(e)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(e)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(e)))}return t},destroy:function(){this.unregisterEvents()}});d.prototype.getInstance=function(){return h};return d});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/ComponentKeysHandler", ["sap/ushell/Config","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model"],function(e,t,jQuery,i,n,s){"use strict";var r=function(){};r._instance=undefined;r.getInstance=function(){if(r._instance===undefined){r._instance=new r;return r._instance._init().then(function(){return r._instance})}return Promise.resolve(r._instance)};r.prototype={keyCodes:t,_init:function(){this.oModel=s.getModel();return new Promise(function(e){if(!this.oLaunchPageService){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){this.oLaunchPageService=t;e()}.bind(this))}else{e()}}.bind(this))},goToLastVisitedTile:function(e,t){var i,s,r=jQuery(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(t){var l=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),o=this.oModel.getProperty("/topGroupInViewPortIndex");var a=e||jQuery(l.get(o));var u=a.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");i=u.filter(":visible").eq(0);s=u.filter("[tabindex=0]:visible").eq(0);if(!i.length){i=r.filter(":visible").eq(0)}}else{i=r.filter(":visible").eq(0);s=r.filter("[tabindex=0]:visible").eq(0)}if(s.length){this.moveScrollDashboard(s)}else if(i.length){i.attr("tabindex","0");this.moveScrollDashboard(i)}else{n.sendFocusBackToShell()}},_goToFirstTileOfNextGroup:function(e,t){this._preventDefault(t);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(e,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n)}}},_goToTileOfGroup:function(e,t){if(t){var i=t.getTiles().filter(this._filterInvisibleTiles);var n=t.getLinks().filter(this._filterInvisibleTiles);if(t.getShowPlaceholder()){i.push(t.oPlusTile)}i=i.concat(n);e=e==="first"?0:e;e=e==="last"?i.length-1:e;var s=i[e];if(s){this.moveScrollDashboard(s.$());return true}}return false},_moveTile:function(e){var t=this._getGroupAndTilesInfo();if(!t||t.oGroup.getProperty("isGroupLocked")||t.oCurTile.isA("sap.ushell.ui.launchpad.PlusTile")){return null}var i=t.oCurTile;var n=this._getNextTile(e,true);if(n){var s=i.getMode?i.getMode():"ContentMode";var r=n.getMode?n.getMode():"ContentMode";var l=i.getParent();var o=n.getParent();var a=l===o;var u=s===r;var h=r==="LineMode"?o.getLinks():o.getTiles();var f=h.indexOf(n);var d=this._getTileRect(e,i);var c=this._getTileRect(e,n);if(!c){f=0}else{var p=d.right>c.right+5;var g=f===h.length-1;if(!a||!u){if((e==="up"||e==="down")&&p&&g){f++}else if(e==="left"){f++}}}var T=sap.ui.getCore().byId("sapUshellDashboardPage").getParent();sap.ui.getCore().getEventBus().publish("launchpad",u?"movetile":"convertTile",{callBack:this.callbackSetFocus.bind(this),sTileId:T.getController()._getTileUuid(i),toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:l.getGroupId?l.getGroupId():l.groupId,toIndex:f,tile:i,sToItems:r==="LineMode"?"links":"tiles",sFromItems:s==="LineMode"?"links":"tiles",sTileType:s==="LineMode"?"link":"tile",longDrop:false})}},callbackSetFocus:function(e){setTimeout(function(){if(e.oParent&&e.oParent instanceof sap.ushell.ui.launchpad.Tile){this.moveScrollDashboard(jQuery(e.oParent.getDomRef()))}else{this.moveScrollDashboard(e.$())}}.bind(this),0)},_getTileCenter:function(e,t,i){if(!(i instanceof HTMLElement)){var n=i.$().find(".sapMGTLineStyleHelper");if(i.isLink&&n&&n.length>1){if(e==="down"){return t.right}return t.left}}return t.right-(t.right-t.left)/2},_getTileRect:function(e,t){if(t instanceof HTMLElement){return t.getBoundingClientRect()}var i=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&i&&i.length){if(e==="down"){return i.get(i.length-1).getBoundingClientRect()}return i.get(0).getBoundingClientRect()}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect()}return undefined},_findClosestTile:function(e,t,i){var n=this._getTileRect(e,i),s=this._getTileCenter(e,n,i);var r,l=Infinity,o=e==="down"?1:-1,a=t.indexOf(i)+o,u;for(;;a+=o){var h=t[a];if(!h){return r}if(!r){if(e==="down"&&a===t.length-1){return h}if(e==="up"&&a===0){return h}}var f=this._getTileRect(e,h);if(!f){return r}if(e==="down"&&n.bottom+5>=f.bottom){continue}if(e==="up"&&n.top-5<=f.top){continue}if(r&&u!==f.top){return r}u=f.top;var d=Math.min(Math.abs(f.left-s),Math.abs(f.right-s));if(l>d){l=d;r=h}else{return r}}},_filterInvisibleTiles:function(e){return e.getVisible()&&e.getDomRef()},_getNextTile:function(e,t){var i=this._getGroupAndTilesInfo();if(!i){return null}var n=i.oCurTile;var s=i.oGroup;var r=s.getTiles().filter(this._filterInvisibleTiles);var l=s.getLinks().filter(this._filterInvisibleTiles);var o=n.isLink;var a=s.getShowPlaceholder();var u=n.getBindingContext();var h=!t||u&&this.oLaunchPageService.isLinkPersonalizationSupported(u.getObject().object);var f=o?l:r;var d=f.indexOf(n);if(d<0){if(e==="right"){if(l.length){return l[0]}}if(e==="left"){if(r.length){return r[r.length-1]}}}else{if(e==="right"){if(d<f.length-1){return f[d+1]}if(!o&&a&&!t){return s.oPlusTile}if(!o&&h&&l.length){return l[0]}}if(e==="left"){if(d>0){return f[d-1]}if(o&&a){return s.oPlusTile}if(o&&r.length){return r[r.length-1]}}}var c=this._getNextGroup(e,s,t,h);var p=c?c.getTiles().filter(this._filterInvisibleTiles):[];var g=c?c.getLinks().filter(this._filterInvisibleTiles):[];var T=c&&c.getShowPlaceholder();if(c){if(e==="right"){if(p.length){return p[0]}if(T){return c.oPlusTile}if(g.length){return g[0]}return c.oPlusTile}if(e==="left"){if(h&&g.length){return g[g.length-1]}if(T&&!t){return c.oPlusTile}if(p.length){return p[p.length-1]}return c.oPlusTile}}if(e==="up"||e==="down"){if(!r.length&&t){r=[s.oPlusTile]}var v=h?r.concat(l):r;var C=[];if(c){if(!p.length&&t){p=[c.oPlusTile]}C=h?p.concat(g):p}var _=e==="up"?C.concat(v):v.concat(C);return this._findClosestTile(e,_,n)}},_getNextGroup:function(e,t,i,n){var s;var r=t.getParent().getGroups();var l=r.indexOf(t);var o=l;if(e==="down"||e==="right"){s=1}else{s=-1}o+=s;while(r[o]){var a=r[o];var u=a.getTiles().filter(this._filterInvisibleTiles);var h=a.getLinks().filter(this._filterInvisibleTiles);var f=n?u.concat(h):u;var d=a.getVisible()&&!(a.getIsGroupLocked()&&i)&&!(a.getIsGroupLocked()&&f.length===0)&&!(f.length===0&&!(i||a.getShowPlaceholder()));if(d){return a}o+=s}return undefined},_getGroupAndTilesInfo:function(){var e=this._getFocusOnTile(jQuery(document.activeElement));if(!e||!e.length){return null}var t=e.control(0);t.isLink=e.hasClass("sapUshellLinkTile")||e.hasClass("sapMGTLineMode");var i=e.closest(".sapUshellTileContainer").control(0);if(!i){return null}return{oCurTile:t,oGroup:i}},_goToSiblingElementInTileContainer:function(e,t){var i=t.closest(".sapUshellTileContainer"),n,s,r;n=t.closest(".sapUshellTileContainerBeforeContent");if(n.length){if(e==="up"||e==="left"){this._goToNextTileContainer(n,e)}else{r=i.find(".sapUshellTileContainerHeader").eq(0);r.focus()}return}n=t.closest(".sapUshellTileContainerHeader");if(n.length){if(e==="up"){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,e)}}else if(e==="down"){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,e)}}else if(e==="left"){if(t.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,"left")}}else{r=t.closest(".sapUshellTileContainerHeader");r.focus()}}else if(e==="right"){var l=t.hasClass("sapMInputBaseInner");if(!l){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,"down")}}}return}n=this._getFocusOnTile(t);if(n){this._goFromFocusedTile(e,n,true);return}n=t.closest(".sapUshellTileContainerAfterContent");if(n.length){if(e==="up"||e==="left"){this._goToTileOfGroup("first",n.control(0))}else{this._goToNextTileContainer(n,e)}}},_goToNextTileContainer:function(e,t){var i=e.closest(".sapUshellTileContainer");if(i.length===1){var n=jQuery(".sapUshellTileContainer").filter(":visible"),s=t==="down"?1:-1,r=jQuery(n[n.index(i)+s]);if(r.length===1){var l=r.find(".sapUshellTileContainerHeader");if(t==="down"){if(!this._goToTileContainerBeforeContent(r)){this._setTileContainerSelectiveFocus(r)}}else if(!this._goToTileContainerAfterContent(r)){if(t==="up"||t==="left"){var o=t==="up"?"first":"last";if(!this._goToTileOfGroup(o,r.control(0))){l.focus()}}}}}},_goToTileContainerBeforeContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goToTileContainerAfterContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goFromFocusedTile:function(e,t,i){var n=this._getNextTile(e),s=t.closest(".sapUshellTileContainer");if(n){var r=n.$(),l=r.closest(".sapUshellTileContainer");if(i&&s.get(0).id!==l.get(0).id){if(e==="down"||e==="right"){if(!this._goToTileContainerAfterContent(s)){this._setTileContainerSelectiveFocus(l)}}else if(e==="up"||e==="left"){var o=s.find(".sapUshellTileContainerHeader");o.focus()}}else{this.moveScrollDashboard(r)}}else if(i){if(e==="down"||e==="right"){this._goToTileContainerAfterContent(s)}else if(e==="up"||e==="left"){var a=s.find(".sapUshellTileContainerHeader");a.focus()}}},_setTileContainerSelectiveFocus:function(e){var t=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),i=e.find(".sapUshellTileContainerBeforeContent button"),n=e.find(".sapUshellTileContainerHeader").eq(0),s=i.length&&i.is(":visible");if(s){i.focus()}else if(e.get(0)===t.get(0)){this.goToLastVisitedTile()}else if(n.length){n.focus()}},_setTileFocus:function(e){var t=document.getElementById("catalogView");if(t&&t.contains(e)){this.setFocusOnCatalogTile(e);return}var i=document.getElementById("dashboardGroups");var n=i.querySelectorAll(".sapUshellTile[tabindex]");for(var s=0;s<n.length;++s){n[s].removeAttribute("tabindex")}var r=[".sapMGTLineMode",".sapMGT",".sapFCard"].join('[tabindex="0"], ');var l=i.querySelectorAll(r);for(var o=0;o<l.length;++o){l[o].setAttribute("tabindex","-1")}e.setAttribute("tabindex",0);var a=sap.ui.getCore().byId(e.getAttribute("id"));if(a){var u=a.getParent();if(u){var h=sap.ui.getCore().getEventBus();h.publish("launchpad","scrollToGroup",{group:u})}a.focus()}},setFocusOnCatalogTile:function(e){var t=jQuery(".sapUshellTile[tabindex=0]"),i,n;if(t.length){jQuery(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(e){jQuery(e).attr("tabindex",-1)});i=t.find("[tabindex], a").addBack().filter("[tabindex], a");i.attr("tabindex",-1)}if(!e){n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(n.length){e=n[0]}else{var s=document.getElementsByClassName("sapMMessagePageMainText");if(s.length){s[0].focus()}return}}e.setAttribute("tabindex",0);jQuery(e).find("button").attr("tabindex",0);e.focus()},moveScrollDashboard:function(e){if(e.length){this._setTileFocus(e[0])}},_moveGroupFromDashboard:function(e,t){var i,n=jQuery(".sapUshellDashboardGroupsContainerItem"),s,r;i=t.closest(".sapUshellDashboardGroupsContainerItem");s=n.index(i);r=e==="up"||e==="left"?s-1:s+1;this._moveGroup(s,r)},_moveGroup:function(e,t){if(t<0||t>=jQuery(".sapUshellDashboardGroupsContainerItem").length||t<jQuery(".sapUshellDisableDragAndDrop").length){return}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:e,toIndex:t});setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];jQuery(e).focus()},100)},_getFocusOnTile:function(e){var t;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(i){var n=e.closest(i);if(n.length){t=n}});return t},_renameGroup:function(e){if(e.closest(".sapUshellTileContainerHeader").length===1){e=e[0].tagName==="H2"?e:e.find("h2");e.click()}},_arrowsButtonsHandler:function(e,t,i){this._preventDefault(t);if(i.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(e,i);return}if(i.is("#sapUshellAnchorBarOverflowButton")){this._handleAnchorNavigationOverflowButtonArrowKeys(e);return}var n=this._getFocusOnTile(i);var s=this.oModel.getProperty("/tileActionModeActive");var r=this.oModel.getProperty("/personalization");if(t.ctrlKey===true&&r){var l=i.closest(".sapUshellTileContainerHeader");if(n){this._moveTile(e)}else if(l.length){var o=l.closest(".sapUshellTileContainerContent");if(!o.hasClass("sapUshellTileContainerDefault")||!o.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(e,l)}}}else if(s){this._goToSiblingElementInTileContainer(e,i)}else if(n){this._goFromFocusedTile(e,n,s)}else{this.goToLastVisitedTile()}},_handleAnchorNavigationOverflowButtonArrowKeys:function(e){if(e==="left"||e==="up"){var t=jQuery(".sapUshellAnchorItem").filter(":visible");this._setAnchorItemFocus(t.eq(t.length-1)[0])}},_handleAnchorNavigationItemsArrowKeys:function(e,t){var i=jQuery(".sapUshellAnchorItem").filter(":visible"),n=i.index(t);if(e==="left"||e==="up"){if(n>0){this._setAnchorItemFocus(i.eq(n-1)[0]);return}}if(e==="right"||e==="down"){if(n<i.length-1){this._setAnchorItemFocus(i.eq(n+1)[0])}else if(n===i.length-1){var s=document.getElementById("sapUshellAnchorBarOverflowButton");s.focus()}}},_setAnchorItemFocus:function(e){var t=document.getElementsByClassName("sapUshellAnchorItem");for(var i=0;i<t.length;++i){t[i].setAttribute("tabindex","-1")}if(!e){e=jQuery(".sapUshellAnchorItem").filter(":visible")[0]}e.setAttribute("tabindex","0");e.focus()},_appFinderHomeEndButtonsHandler:function(e,t,i){var n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible"),s;if(n.length){if(e==="home"){s=jQuery(n.get(0))}if(e==="end"){s=jQuery(n.get(n.length-1))}}if(s){this._preventDefault(t);this._appFinderFocusAppBox(i,s)}},_homeEndButtonsHandler:function(e,t,i){if(i.hasClass("sapUshellAnchorItem")){this._preventDefault(t);this._setAnchorItemFocus(jQuery(".sapUshellAnchorItem").filter(":visible:"+e)[0])}else if(t.ctrlKey===true){this._preventDefault(t);var n=jQuery(".sapUshellTile, .sapFCard").filter(":visible")[e]();if(n.length){this._setTileFocus(n[0])}}else{var s=i.closest(".sapUshellTileContainer");if(s){var r=s.control(0);if(r){this._preventDefault(t);this._goToTileOfGroup(e,r)}}}},_deleteButtonHandler:function(e){var t=this.oModel.getProperty("/tileActionModeActive");var i=this.oModel.getProperty("/personalization");if(t&&i){var n=this._getFocusOnTile(e);if(n&&!n.hasClass("sapUshellLockedTile")&&!n.hasClass("sapUshellPlusTile")){var s=this._getGroupAndTilesInfo();if(s&&!s.oCurTile.isLink){var r=sap.ui.getCore().byId("sapUshellDashboardPage").getParent();sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:r.getController()._getTileUuid(s.oCurTile),items:"tiles"},this)}}}},_spaceButtonHandler:function(e,t){e.preventDefault();var i=this._getFocusOnTile(t);if(!i||!i.length){t.click();return}if(i.hasClass("sapFCard")){i.control(0).getCardHeader().firePress();return}var n=t.find("[role=button], a.sapMGT");if(n.length&&!this.oModel.getProperty("/tileActionModeActive")){var s=n.control(0);if(s){s.firePress();return}}i.control(0).firePress()},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(document.getElementsByClassName("sapUshellAnchorItemSelected")[0]);return document.activeElement&&document.activeElement.classList.contains("sapUshellAnchorItemSelected")},handleFocusOnMe:function(t,i){var n=sap.ushell.Container.getRenderer("fiori2"),s=r._instance;if(n){var l=n.getCurrentCoreView();if(l==="home"&&!e.last("/core/spaces/enabled")){var o=document.activeElement?document.activeElement.tagName:"";if(o==="INPUT"||o==="TEXTAREA"){if(t.keyCode===s.keyCodes.ENTER){var a=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(a.length){setTimeout(function(){a=jQuery("#"+a[0].id);a.focus()},10)}}}else{s._dashboardKeydownHandler(t)}}if(l==="appFinder"){if(i){if(t.shiftKey){s.setFocusOnCatalogTile()}else{var u=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(u&&u.getVisible()){u.focus()}else{s.appFinderFocusMenuButtons(t)}}}else{s._appFinderKeydownHandler(t)}}}},_appFinderFocusAppBox:function(e,t){if(e&&t){e.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");t.attr("tabindex","0").focus();t.find(".sapUshellPinButton").attr("tabindex","0")}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()},_getNextCatalog:function(e,t){var n;if(e==="down"||e==="right"){n=t.next()}else if(e==="up"||e==="left"){n=t.prev()}else{i.error("Direction is unkown",e,"sap.ushell.components.ComponentKeysHandler");return null}if(n.length>0){var s=n.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(s>0){return n}return this._getNextCatalog(e,n)}return undefined},_getNextCatalogItem:function(e,t,i){var n=jQuery(t.parents()[2]),s=n.find("li.sapUshellAppBox, li.sapUshellTile").get();if(e==="right"||e==="left"){var r=s.indexOf(t.get(0)),l=e==="right"?r+1:r-1;if(s[l]){return s[l]}}var o=this._getNextCatalog(e,n),a=o?o.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(a.length>0&&e==="right"){return a[0]}if(a.length>0&&e==="left"){return a[a.length-1]}if(e==="down"||e==="up"){if(a.length>0&&i){return a[0]}var u=e==="down"?s.concat(a):a.concat(s);return this._findClosestTile(e,u,t.get(0))}return undefined},_appFinderKeysHandler:function(e,t,i,n){if(i.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(t);var s=jQuery(this._getNextCatalogItem(e,i,n));if(s){this._appFinderFocusAppBox(i,s)}}},appFinderFocusMenuButtons:function(e){var t=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(t.length){t.eq(0).focus();this._preventDefault(e);return true}return false},_appFinderKeydownHandler:function(e){var t=jQuery(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var i=e.keyCode,n=sap.ui.getCore().getConfiguration().getRTL();if(n&&i===this.keyCodes.ARROW_RIGHT){i=this.keyCodes.ARROW_LEFT}else if(n&&i===this.keyCodes.ARROW_LEFT){i=this.keyCodes.ARROW_RIGHT}switch(i){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,t);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,t);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,t);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,t);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,t,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,t,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,t);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,t);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,t);break;default:return}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return}var i=e.keyCode,n=sap.ui.getCore().getConfiguration().getRTL(),s=jQuery(document.activeElement);if(n){if(i===this.keyCodes.ARROW_RIGHT){i=this.keyCodes.ARROW_LEFT}else if(i===this.keyCodes.ARROW_LEFT){i=this.keyCodes.ARROW_RIGHT}}switch(i){case this.keyCodes.F2:this._renameGroup(s);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(s);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,s);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,s);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,s);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,s);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,s);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,s);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,s);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,s);break;default:break}}};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/DestroyHelper", [],function(){"use strict";function t(t){var e;if(t&&t.content){for(e=0;e<t.content.length;e++){if(t.content[e].destroy){t.content[e].destroy()}}}}function e(e){var n;if(e){for(n=0;n<e.length;n++){t(e[n])}}}function n(t){if(t){e(t.tiles)}}function o(t){var e;if(t){for(e=0;e<t.length;e++){n(t[e])}}}return{destroyFLPAggregationModel:n,destroyFLPAggregationModels:o,destroyTileModel:t,destroyTileModels:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/GroupsHelper", [],function(){"use strict";return{getIndexOfGroup:n,getModelPathOfGroup:r};function r(r,u){var t=n(r,u);if(t<0){return null}return"/groups/"+t}function n(r,n){for(var u=0;u<r.length;u++){if(r[u].groupId===n){return u}}return-1}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/HeaderManager", ["sap/base/util/ObjectPath","sap/ui/Device","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/ushell/components/StateHelper","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone"],function(e,t,a,n,r,o,l,s){"use strict";var i={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:r.last("/core/shellHeader/rootIntent"),homeUri:r.last("/core/shellHeader/homeUri"),title:""};var d;var u;var c="endItemsOverflowBtn";var h;var f={blank:{},"blank-home":{},home:{headItems:[]},app:{headItems:["backBtn"]},minimal:{headItems:[]},standalone:{headItems:["backBtn"]},embedded:{headItems:["backBtn"]},"embedded-home":{headItems:[]},headerless:{headItems:["backBtn"],headerVisible:false},merged:{headItems:["backBtn"]},"headerless-home":{headerVisible:false},"merged-home":{},lean:{headItems:[]},"lean-home":{}};var m=[];function p(e,a){var n=e&&e.appState?e.appState:"home";d=D(e);u=a;h=t.media.getCurrentRange(t.media.RANGESETS.SAP_STANDARD).name;I();v();k(n);B()}function S(){b()}function v(){var e=o.on("setHeaderCentralAreaElement").do(function(e){P({propertyName:"centralAreaElement",value:e.id,aStates:n.getPassStates(e.states),bCurrentState:!!e.currentState,bDoNotPropagate:!!e.bDoNotPropagate})});m.push(e);m.push(o.on("updateHeaderOverflowState").do(g));t.media.attachHandler(g,this,t.media.RANGESETS.SAP_STANDARD);m.push(r.on("/core/shellHeader/headEndItems").do(E));m.push(r.on("/core/shell/model/currentSpaceAndPage").do(A))}function b(){if(m){m.forEach(function(e){e.off()})}t.media.detachHandler(g,this,t.media.RANGESETS.SAP_STANDARD)}function g(e){if(e&&e.name){h=e.name}I();E()}function I(e){var t=r.last("/core/shell/model/currentState/stateName"),a=t==="merged"||t==="headerless",n=!a;P({propertyName:"showLogo",value:n,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true})}function A(e){if(r.last("/core/spaces/enabled")&&r.last("/core/spaces/homeNavigationTarget")==="origin_page"){var t=e?encodeURI(e.hash):i.rootIntent;var a=this&&this.updateStates||P;a({propertyName:"homeUri",value:"#"+t})}}function E(e){var t=r.last("/core/shellHeader/headEndItems"),a=t.indexOf(c)>-1,n=e&&e.name||h,o;if(n==="Phone"&&!a&&t.length>2){N([c],false,["home","app"])}else if(n!=="Phone"&&a){o=sap.ui.getCore().byId("headEndItemsOverflow");if(o){o.destroy()}H([c],false,["home","app"])}}function N(e,t,a,n){P({propertyName:"headEndItems",value:e,aStates:a,bCurrentState:!!t,bDoNotPropagate:!!n})}function H(e,t,a){P({propertyName:"headEndItems",value:e,aStates:a,bCurrentState:!!t,action:"remove",bDoNotPropagate:false})}function C(e,t){var a={};Object.keys(e).forEach(function(n){var r=e[n];a[n]=Object.keys(r).reduce(function(e,t){e[t]=r[t];return e},s(t))});return a}function P(t){var o=t.propertyName,l=!t.bCurrentState?n.getAllStateToUpdate(t.aStates,t.bDoNotPropagate):[],s=r.last("/core/shellHeader"),i=r.last("/core/shell/model/currentState/stateName"),u=t.value,c;if(o.charAt(0)==="/"){o=o.substring(1)}c=a(o,t.action);if(!c){return}if(!t.bCurrentState){d=O(d,o,c,l,u)}if(l.indexOf(i)>-1||t.bCurrentState){var h=e.get(o.split("/"),s),f=c.execute(h,u);if(h!==f){e.set(o.split("/"),f,s);w(o,s)}}if(t.bCurrentState){T(o,c,u)}}function y(e){var t;for(t in e){if(e.hasOwnProperty(t)){l.updateProperties(d[t],e[t])}}}function k(e){var t=d[e];if(!t){throw new Error("the state ("+e+") does not exist")}r.emit("/core/shellHeader",s(t))}function B(e){var t=r.last("/core/shellHeader"),a,n;if(u&&u.customShellState){a=u.customShellState.currentState}if(e&&u.extendedShellStates[e]){n=u.extendedShellStates[e].customState.currentState}r.emit("/core/shellHeader",x(t,a,n))}function x(e,t,n){var o={};Object.keys(e).forEach(function(r){var l=a(r);var i=s(e[r]);if(l){if(n){i=l.execute(i,n[r])}if(t){i=l.execute(i,t[r])}}o[r]=i});o.ShellAppTitleState=r.last("/core/shellHeader/ShellAppTitleState");return o}function D(e){if(e){i.rootIntent=e.rootIntent;i.homeUri="#"+e.rootIntent}var t=C(f,i);function a(e,t){var a,n;for(a in t){if(a==="blank"||a==="blank-home"){continue}if(e==="openCatalogBtn"&&(a==="lean"||a==="lean-home")){continue}if(e==="ContactSupportBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(a)===-1){continue}}n=t[a].headEndItems.indexOf(e);if(n===-1){t[a].headEndItems.push(e)}}}function n(e,t){var a;for(a in t){t[a].title=e}}if(e){if(e.moveContactSupportActionToShellHeader){a("ContactSupportBtn",t)}if(e.moveAppFinderActionToShellHeader){a("openCatalogBtn",t)}if(e.title){n(e.title,t)}}return t}function O(t,a,n,r,o){if(r.length===0){return t}var l=s(t);r.forEach(function(t){var r=l[t],s;if(r){s=n.execute(e.get(a.split("/"),r),o);e.set(a.split("/"),s,r)}});return l}function T(t,a,n){var r,o;if(!u){return}r=u.customShellState.currentState;o=a.execute(e.get(t.split("/"),r),n);e.set(t.split("/"),o,r)}function w(e,t){var a=e.split("/").shift();r.emit("/core/shellHeader/"+a,t[a])}function _(e){var t;try{t=d[e]}catch(e){t=undefined}return t}function R(e,t){var a;try{a=_(e)[t]}catch(e){a=undefined}return a}function U(e){d=e}return{init:p,destroy:S,switchState:k,updateStates:P,recalculateState:B,extendStates:y,handleCurrentSpaceAndPage:A,handleEndItemsOverflow:E,validateShowLogo:I,_createInitialState:D,_generateBaseHeaderState:C,_getBaseState:_,_getBaseStateMember:R,_resetBaseStates:U}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/HomepageManager", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement"],function(jQuery,e,t,i,o,r,s,n,a,l,u,d,p,h,g,c,f,b,v,m,M,P,T,G,_){"use strict";var y=M.GenericTileScope;var I={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var k=[];var w;var L=e.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:I,constructor:function(e,t){if(w){if(!w.view){w.setDashboardView(t.view)}return w}this.oServiceLoadingPromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oPageBuilderService=e;this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));this.oPageOperationAdapter=b.getInstance(e);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported()}.bind(this));sap.ui.getCore().attachThemeChanged(l.handleTilesVisibility);w=this;this.oModel=t.model;this.oRouter=t.router;this.oDashboardView=t.view;this.oSortableDeferred=new jQuery.Deferred;this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.bIsGroupsRequestPending=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new i("isGroupLocked",m.EQ,false);this.oDashboardLoadingManager=new s("loadingManager",{oDashboardManager:this});if(this.oRouter){var o=this.oRouter.getTarget("home");o.attachDisplay(function(e){this.oDashboardView=e.getParameter("view")}.bind(this))}var r=a.last("/core/home/enableTransientMode");k.push(a.on("/core/home/enableTransientMode").do(function(e){if(r===e){return}r=e;this._changeMode(e)}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined},_addRequest:function(e){this._aRequestQueue.push(e);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()()}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false}else{this._aRequestQueue.shift()()}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false},isBlindLoading:function(){var e=a.last("/core/home/homePageGroupDisplay");if((e===undefined||e==="scroll")&&this.bIsScrollModeAccordingKPI){G.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true}if(this.oModel.getProperty("/tileActionModeActive")){G.info("isBlindLoading reason TileActionModeActive : true");return true}return false},createMoveActionDialog:function(e){var t=new c(e,{title:u.i18n.getText("moveTileDialog_title"),rememberSelections:false,contentWidth:"400px",contentHeight:"auto",confirm:function(t){var i=t.getParameter("selectedContexts");this.publishMoveActionEvents(i,e)}.bind(this),cancel:function(){var e=jQuery('.sapUshellTile[tabindex="0"]')[0];if(e){e.focus()}},items:{path:"/groups",template:new f({title:"{title}"})}});return t},publishMoveActionEvents:function(e,i){var o=sap.ui.getCore().getEventBus();if(e.length){var r=this.tileType==="link"?"links":"tiles",s=e[0].getObject().groupId,n={sTileId:this.tileUuid,sToItems:r,sFromItems:r,sTileType:r,toGroupId:e[0].getObject().groupId,toIndex:e[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:i};if(t.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){n.callBack=e.callbackSetFocus.bind(e);o.publish("launchpad","scrollToGroup",{groupId:s});o.publish("launchpad","movetile",n)})})}else{o.publish("launchpad","scrollToGroup",{groupId:s});o.publish("launchpad","movetile",n)}}},_changeLinksScope:function(e){var t=this;if(this.bLinkPersonalizationSupported){var i=e.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(e,o){if(!e.isGroupLocked){t._changeGroupLinksScope(e,i?"Actions":"Display")}})}},_changeGroupLinksScope:function(e,t){var i=this;e.links.forEach(function(e,o){i._changeLinkScope(e.content[0],t)})},_changeLinkScope:function(e,t){var i;if(e.getScope){i=e}else if(e.getContent){i=e.getContent()[0]}if(this.bLinkPersonalizationSupported&&i&&i.setScope){i.setScope(t)}},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","movetile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","convertTile",this._convertTile,this)},_changeMode:function(e){var t=this.getModel().getProperty("/groups");if(e){this.oPageOperationAdapter=v.getInstance();var i=this.oPageOperationAdapter.transformGroupModel(t);this.getModel().setProperty("/groups",i)}else{this.oPageOperationAdapter=b.getInstance();d.destroyFLPAggregationModels(t);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups()}},_addFLPActionsToTile:function(e){var t=[];if(a.last("/core/shell/enablePersonalization")){var i=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(e);t.push(this._getMoveTileAction(e));if(i){t.push(this._getConvertTileAction(e))}}return t},getPersonalizableGroups:function(){var e=this.getModel().getProperty("/groups");return e.filter(function(e){return!e.isGroupLocked})},_getConvertTileAction:function(e){var i=sap.ui.getCore().getEventBus();var o=this.oPageOperationAdapter.getTileType(e);var r=o==="tile"?"ConvertToLink":"ConvertToTile";return{id:r,text:u.i18n.getText(r),press:function(e){var o={tile:e};if(t.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){o.callBack=e.callbackSetFocus.bind(e);i.publish("launchpad","convertTile",o)})})}else{i.publish("launchpad","convertTile",o)}}}},_getMoveTileAction:function(e){var t="moveTile_action";return{id:t,text:u.i18n.getText(t),press:function(t){this.tileType=this.oPageOperationAdapter.getTileType(e);var o=this.tileType==="tile";this.tileUuid=this.getModelTileById(this.oPageOperationAdapter.getTileId(e),o?"tiles":"links").uuid;var r=t.getParent().getProperty("groupId");var s=new i("groupId",m.NE,r);var n=function(e){var t=e.getParameter("value");var o=new i("title",m.Contains,t);var r=e.getSource().getBinding("items");r.filter([o,this.oGroupNotLockedFilter,s])}.bind(this);var a=o?this.moveTileDialog:this.moveLinkDialog;if(!a){a=this.createMoveActionDialog("move"+this.tileType+"Dialog");a.setModel(this.oModel);if(o){this.moveTileDialog=a}else{this.moveLinkDialog=a}}else{a.detachSearch(a._searchHandler)}a.getBinding("items").filter([this.oGroupNotLockedFilter,s]);a.attachSearch(n);a._searchHandler=n;a.open()}.bind(this)}},_handleTileAppearanceAnimation:function(e){if(!e){return}var t=["webkit",""];function i(i,o){for(var r=0;r<t.length;r++){o=o.toLowerCase();e.attachBrowserEvent(t[r]+o,function(t){if(t.originalEvent&&t.originalEvent.animationName==="sapUshellTileEntranceAnimation"){e.removeStyleClass("sapUshellTileEntrance")}},false)}}i(e,"AnimationEnd");e.addStyleClass("sapUshellTileEntrance")},destroy:function(){var t=sap.ui.getCore().getEventBus();t.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);t.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);t.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);t.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);t.unsubscribe("launchpad","resetGroup",this._resetGroup,this);t.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);t.unsubscribe("launchpad","moveGroup",this._moveGroup,this);t.unsubscribe("launchpad","deleteTile",this._deleteTile,this);t.unsubscribe("launchpad","movetile",this._moveTile,this);t.unsubscribe("launchpad","sortableStart",this._sortableStart,this);t.unsubscribe("launchpad","sortableStop",this._sortableStop,this);t.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(l.handleTilesVisibility);k.forEach(function(e){e.off()});b.destroy();v.destroy();w=undefined;e.prototype.destroy.apply(this,arguments)},_sortableStart:function(){this.oSortableDeferred=new jQuery.Deferred},_createBookmark:function(e,t,i){var o=i.group?i.group.object:"";delete i.group;function r(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(e){e.addBookmark(i,o).always(this._checkRequestQueue.bind(this)).done(function(){h.showLocalizedMessage("tile_created_msg")}).fail(function(e){G.error("Failed to add bookmark",e,"sap.ushell.ui.footerbar.AddBookmarkButton");h.showLocalizedError("fail_to_add_tile_msg")})}.bind(this))}this._addRequest(r.bind(this))},_addBookmarkToModel:function(e,t,i){var o=i.tile,r,s=i.group,n,a,u,d,p;if(!i||!o){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate()}return}if(!s){r=this.getModel().getProperty("/groups");for(p=0;p<r.length;p++){if(r[p].isDefaultGroup===true){s=r[p].object;break}}}a=this._getIndexOfGroupByObject(s);u=this.oModel.getProperty("/groups/"+a);n=this.oPageOperationAdapter.getPreparedTileModel(o,u.isGroupLocked);this.getTileView(n);u.tiles.push(n);u.visibilityModes=l.calcVisibilityModes(u,true);d=u.tiles.length;this._updateModelWithTileView(a,d);this.oModel.setProperty("/groups/"+a,u)},_refreshGroupInModel:function(e,t,i){var o=this;this.oPageOperationAdapter.refreshGroup(i).then(function(e){if(!e){return}var t=o._getIndexOfGroupByObject(e.object);e.visibilityModes=l.calcVisibilityModes(e.object,true);o.oModel.setProperty("/groups/"+t,e);if(e.tiles){e.tiles.forEach(function(e){o.getTileView(e)})}})},_sortableStop:function(){this.oSortableDeferred.resolve()},_handleAfterSortable:function(e){return function(){var t=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){e.apply(null,t)})}.bind(this)},_createGroupAt:function(e,t,i){var o=parseInt(i.location,10),r=this.oModel.getProperty("/groups"),s=this.oPageOperationAdapter.getPreparedGroupModel(null,false,o===r.length,i),n=this.oModel,a;s.index=o;r.splice(o,0,s);for(a=0;a<r.length-1;a++){r[a].isLastGroup=false}for(a=o+1;a<r.length;a++){r[a].index++}n.setProperty("/groups",r)},_getIndexOfGroupByObject:function(e){var t=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(t,e)},getTileActions:function(e){return this.oPageOperationAdapter.getTileActions(e)},addTileToGroup:function(e,t){var i=e+"/tiles",o=this.oModel.getProperty(e),r=this.oModel.getProperty(i).length;var s=this.oModel.getProperty(e+"/isGroupLocked"),n=this.oModel.getProperty("/personalization");o.tiles[r]=this.oPageOperationAdapter.getPreparedTileModel(t,s);this.getTileView(o.tiles[r]);o.visibilityModes=l.calcVisibilityModes(o,n);this._updateModelWithTileView(o.index,r);this.oModel.setProperty(e,o)},addTilesToGroupByCatalogTileId:function(e,t){var i=e.getBindingContext();for(var o=0;o<t.length;o++){this.addTileToGroupByCatalogTileId(i.sPath,t[o])}},addTileToGroupByCatalogTileId:function(e,t){var i,o,r;if(!a.last("/core/home/enableTransientMode")){return}r=this.oPageOperationAdapter.getTileModelByCatalogTileId(t);if(!r){return}this.oDashboardLoadingManager.setTileResolved(r);i=this.oModel.getProperty(e+"/tiles").length;o=this.oModel.getProperty(e);o.tiles[i]=r;this.oModel.setProperty(e,o)},_getPathOfTile:function(e){var t=this.oModel.getProperty("/groups"),i,o,r,s,n;for(var a=0;a<t.length;++a){i=t[a];o=i.tiles;r=i.links;for(s=0;s<o.length;++s){if(o[s].uuid===e){return"/groups/"+a+"/tiles/"+s}}for(n=0;n<r.length;++n){if(r[n].uuid===e){return"/groups/"+a+"/links/"+n}}}return null},_moveInArray:function(e,t,i){if(i>=e.length){var o=i-e.length;while(o--+1){e.push(undefined)}}e.splice(i,0,e.splice(t,1)[0])},_updateGroupIndices:function(e){var t;for(t=0;t<e.length;t++){e[t].index=t}},_deleteGroup:function(e,t,i){var o=this,r=this.oModel,s=i.groupId,n=r.getProperty("/groups"),a=p.getIndexOfGroup(n,s),l=n.length-1===a,u=null,g,c;g=l?a-1:a;d.destroyFLPAggregationModel(r.getProperty("/groups/"+a));u=n.splice(a,1)[0];if(l){r.setProperty("/groups/"+g+"/isLastGroup",l)}r.setProperty("/groups",n);this._updateGroupIndices(n);if(g>=0){c=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(c.publish,c,"launchpad","scrollToGroup",{groupId:r.getProperty("/groups")[g].groupId}),200)}function f(){o.oPageOperationAdapter.deleteGroup(u).then(function(){h.showLocalizedMessage("group_deleted_msg",[u.title]);o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_delete_group_msg")})}this._addRequest(f)},_resetGroup:function(e,t,i){var o=this,r=i.groupId,s=this.oModel,a=s.getProperty("/groups"),u=p.getIndexOfGroup(a,r),d=o.oModel.getProperty("/groups/indexOfDefaultGroup")===u,g=s.getProperty("/groups/"+u),c,f;s.setProperty("/groups/"+u+"/sortable",false);function b(){o.oPageOperationAdapter.resetGroup(g,d).then(function(e){o._handleAfterSortable(function(e,t,i){var r=o.oModel.getProperty("/groups"),s=p.getIndexOfGroup(r,e);o._loadGroup(s,i||t);h.showLocalizedMessage("group_reset_msg",[t.title]);o.oModel.setProperty("/groups/"+s+"/sortable",true);c=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(e);f=c.getBindingContext().getObject().links;if(f&&f.length&&!c.getIsGroupLocked()){o._changeGroupLinksScope(c.getBindingContext().getObject(),o.oModel.getProperty("/tileActionModeActive")?y.Actions:y.Display)}if(c){c.rerender();n.emit("updateGroups",Date.now());l.handleTilesVisibility()}})(r,g,e);o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_reset_group_msg")})}this._addRequest(b)},_moveGroup:function(e,t,i){if(isNaN(i.fromIndex)){return}var o=i.fromIndex,r=i.toIndex,s=this.oModel,n=s.getProperty("/groups"),a=s.getProperty("/tileActionModeActive"),l,u,d=this,h,g;if(!a){o=this._adjustFromGroupIndex(o,n)}l=n[o];u=l.groupId;if(!a){r=this._adjustToGroupIndex(r,n,u)}g=n[r];this._moveInArray(n,o,r);this._updateGroupIndices(n);for(h=0;h<n.length-1;h++){n[h].isLastGroup=false}n[n.length-1].isLastGroup=true;s.setProperty("/groups",n);function c(){n=s.getProperty("/groups");var e=s.getProperty(p.getModelPathOfGroup(n,u));if(!e.object){return}d.oPageOperationAdapter.getOriginalGroupIndex(g,n).then(function(t){var i={iFromIndex:o,iToIndex:r};return d.oPageOperationAdapter.moveGroup(e,t,i)}).then(d._checkRequestQueue.bind(d),function(){d._resetGroupsOnFailure("fail_to_move_group_msg")})}this._addRequest(c)},_adjustToGroupIndex:function(e,t,i){var o=0,r=false,s=0;for(s=0;s<t.length&&o<e;s++){if(t[s].isGroupVisible){if(t[s].groupId===i){r=true}else{o++}}}if(r){return s-1}return s},_adjustFromGroupIndex:function(e,t){var i=0,o;for(o=0;o<t.length;o++){if(t[o].isGroupVisible){i++}if(i===e+1){return o}}return e},_changeGroupTitle:function(e,t,i){var o=this,r=i.newTitle,s=this.oModel.getProperty("/groups"),n=i.groupId,a=p.getIndexOfGroup(s,n),l=o.oModel.getProperty("/groups/indexOfDefaultGroup")===a,u=this.oModel.getProperty("/groups/"+a),d=u.title;this.oModel.setProperty("/groups/"+a+"/title",r);function h(){var e;if(u.isLastGroup){e=o.oPageOperationAdapter.addGroupAt(u,undefined,l)}else{var t=o.oModel.getProperty("/groups")[a+1];e=o.oPageOperationAdapter.getOriginalGroupIndex(t,s).then(function(e){return o.oPageOperationAdapter.addGroupAt(u,e,l)})}e.then(function(e){o._handleAfterSortable(function(e,t){var i=o.oModel.getProperty("/groups");var r=p.getIndexOfGroup(i,e);var s=i[r];Object.keys(t).forEach(function(e){if(e==="tiles"||e==="links"){return}s[e]=t[e]});o.oModel.refresh();o._checkRequestQueue()})(n,e)},function(){o._resetGroupsOnFailure("fail_to_create_group_msg")})}function g(){this.oPageOperationAdapter.renameGroup(u,r,d).then(function(){o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_rename_group_msg")})}if(!u.object){this._checkRequestQueue();this._addRequest(h.bind(this))}else{this._addRequest(g.bind(this))}},addGroupToModel:function(e){var t=this.oPageOperationAdapter.getPreparedGroupModel(e,false,true,{isRendered:true}),i=this.oModel.getProperty("/groups"),o=i.length,r;if(o>0){i[o-1].isLastGroup=false}t.index=o;i.push(t);this.oModel.setProperty("/groups/",i);r=new P(this.oModel,"/groups/"+o);return r},_deleteTile:function(e,i,o){var r=o.tileId,s=this.oModel.getProperty("/groups"),n=o.items||"tiles",a,u,p,h;function g(e,t){this.oPageOperationAdapter.removeTile(e,t).then(this._checkRequestQueue.bind(this),this._resetGroupsOnFailure.bind(this,"fail_to_remove_tile_msg"))}function c(e,t,i){var o=sap.ui.getCore().byId("dashboardGroups"),r=o.getGroupControlByGroupId(t.groupId),s;if(i==="tiles"){if(e+1===t[i].length){s=r.oPlusTile}}else{var n=r.getLinks();if(e+1===n.length){if(n.length===1){s=r.oPlusTile}else{s=n[e-1]}}else{s=n[e+1]}}if(s){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.moveScrollDashboard(s.$())})})}}for(p=0;p<s.length;++p){a=s[p];for(h=0;h<a[n].length;++h){u=a[n][h];if(u.uuid===r){if(t.system.desktop){c(h,a,n)}d.destroyTileModel(this.oModel.getProperty("/groups/"+p+"/"+n+"/"+h));var f=a[n].splice(h,1)[0],b=this.oModel.getProperty("/personalization");a.visibilityModes=l.calcVisibilityModes(a,b);this.oModel.setProperty("/groups/"+p,a);this._addRequest(g.bind(this,a,f));l.handleTilesVisibility();return}}}},deleteTilesFromGroup:function(e,t){var i=this.oModel.getProperty("/groups"),o=p.getIndexOfGroup(i,e),r=this.oModel.getProperty("/groups/"+o),s=[];["tiles","links"].forEach(function(e){s=r[e].filter(function(e){if(t.indexOf(e.uuid)<0){return true}return false});r[e]=s});r.visibilityModes=l.calcVisibilityModes(r,true);this.oModel.setProperty("/groups/"+o,r)},_getGroupIndex:function(e){var t=this.oModel.getProperty("/groups"),i=this._getNewGroupInfo(t,e);if(i){return i.newGroupIndex}return undefined},_convertTile:function(e,t,i){var o=i.tile?i.tile:i,r=i.srcGroupId?this._getGroupIndex(i.srcGroupId):undefined,s=i.srcGroupId?this.oModel.getProperty("/groups/"+r):o.getParent().getBindingContext().getObject(),a=o.getBindingContext().sPath.split("/"),d=o.getBindingContext().getObject(),p=a[a.length-2],h=d.uuid,g=parseInt(a[a.length-1],10),c=i.toIndex!==undefined?i.toIndex:undefined,f=this.oModel.getProperty("/tileActionModeActive"),b=i.toGroupId?this._getGroupIndex(i.toGroupId):s.index,v=i.toGroupId?this.oModel.getProperty("/groups/"+b):s,m=this;var M=this._getIndexForConvert(p,g,c,s,v),P={tileIndex:g,groupIndex:r,group:s};function G(){d.tileIsBeingMoved=true;var e=this.oPageOperationAdapter.moveTile(d,M,s,v,p==="links"?"tile":"link");e.then(function(e){m._handleAfterSortable(function(e,t){var o=m._getPathOfTile(e);var r=t.content;if(o){if(p==="tiles"){m._attachLinkPressHandlers(r);m._changeLinkScope(r,f?"Actions":"Display")}if(s===v){T.show(u.i18n.getText("PageRuntime.Message.VisualizationConverted"))}else{T.show(u.i18n.getText("PageRuntime.Message.VisualizationMovedAndConverted"))}var a={tileIndex:c,groupIndex:b,group:v};var h={tile:d,view:r,type:p,tileObj:t.object};d.tileIsBeingMoved=true;m.replaceTileViewAfterConvert(P,a,h);n.emit("updateGroups",Date.now());l.handleTilesVisibility();if(i.callBack){i.callBack(r)}}})(h,e);m._checkRequestQueue()},function(){m._handleAfterSortable(m._resetGroupsOnFailure.bind(m))("fail_to_move_tile_msg")})}this._addRequest(G.bind(this))},replaceTileViewAfterConvert:function(e,t,i){var o=i.tile,r=o.content;o.tileIsBeingMoved=false;o.content=[i.view];o.object=i.tileObj;o.originalTileId=this.oPageOperationAdapter.getTileId(i.tileObj);e.group[i.type].splice(e.tileIndex,1);if(t.tileIndex!==undefined){t.group[i.type==="tiles"?"links":"tiles"].splice(t.tileIndex,0,o)}else{t.group[i.type==="tiles"?"links":"tiles"].push(o)}this.oModel.setProperty("/groups/"+t.groupIndex,t.group);this.oModel.setProperty("/groups/"+e.groupIndex,e.group);if(i.type==="links"){this._handleTileAppearanceAnimation(o.content[0].getParent())}else{this._handleTileAppearanceAnimation(o.content[0])}if(r&&r[0]){r[0].destroy()}},_getIndexForConvert:function(e,t,i,o,r){var s;if(e==="tiles"){if(i!==undefined){s=r[e].length+i}else{s=r[e].length+r.links.length}if(o.groupId===r.groupId){s--}}else{s=i||o.tiles.length;t+=o.tiles.length}return{tileIndex:t,newTileIndex:s}},_getIndexForMove:function(e,t,i,o,r){var s;if(e==="tiles"){s=i!==undefined?i:o[e].length}else{if(i!==undefined){s=o.tiles.length+i}else{s=o.tiles.length+o.links.length}t+=r.tiles.length}return{tileIndex:t,newTileIndex:s}},_getTileInfo:function(e,t,i){var o,r,s,n;for(o=0;o<e.length;++o){s=e[o];for(r=0;r<s[i].length;++r){n=s[i][r];if(n.uuid===t){return{oTile:n,tileIndex:r,oGroup:s,groupIndex:o}}}}return},_getNewGroupInfo:function(e,t){var i;for(var o=0;o<e.length;++o){i=e[o];if(i.groupId===t){return{oNewGroup:i,newGroupIndex:o}}}return},_moveTile:function(e,t,i){var o=i.toIndex,r=i.toGroupId,s=i.sTileId,a=i.source,d=i.sTileType==="tiles"||i.sTileType==="tile"?"tile":"link",p=i.sToItems,h=i.sFromItems,g=this.oModel.getProperty("/tileActionModeActive"),c=this.oModel.getProperty("/groups"),f,b,v,m,M,P={},G=this;m=this._getTileInfo(c,s,h);M=this._getNewGroupInfo(c,r);var _=m.tileIndex===M.oNewGroup.tiles.length-1&&o>=M.oNewGroup.tiles.length;if((m.tileIndex===o||_)&&m.oGroup.groupId===M.oNewGroup.groupId){return}if(m.oGroup.groupId===M.oNewGroup.groupId&&(a==="movetileDialog"||o===null||a==="movelinkDialog")){if(i.callBack&&m.oTile&&m.oTile.content&&m.oTile.content.length){i.callBack(m.oTile.content[0])}return}if(d==="link"){m.oTile.content[0].addStyleClass("sapUshellZeroOpacity")}if(d==="tile"&&p==="tiles"){if(o&&o>M.oNewGroup[p].length){o=M.oNewGroup[p].length}}if(m.oGroup.groupId===r&&p===h){if(o===null||o===undefined){m.oGroup[p].splice(m.tileIndex,1);o=m.oGroup[p].length;m.oGroup[p].push(m.oTile)}else{o=this._adjustTileIndex(o,m.oTile,m.oGroup,p);this._moveInArray(m.oGroup[p],m.tileIndex,o)}this.oModel.setProperty("/groups/"+m.groupIndex+"/"+p,m.oGroup[p])}else{v=this.oModel.getProperty("/personalization");m.oGroup[h].splice(m.tileIndex,1);m.oGroup.visibilityModes=l.calcVisibilityModes(m.oGroup,v);this.oModel.setProperty("/groups/"+m.groupIndex+"/"+h,m.oGroup[h]);if(o===null||o===undefined){o=M.oNewGroup[p].length;M.oNewGroup[p].push(m.oTile)}else{o=this._adjustTileIndex(o,m.oTile,M.oNewGroup,p);M.oNewGroup[p].splice(o,0,m.oTile)}M.oNewGroup.visibilityModes=l.calcVisibilityModes(M.oNewGroup,v);this.oModel.setProperty("/groups/"+M.newGroupIndex+"/"+p,M.oNewGroup[p])}n.emit("updateGroups",Date.now());l.handleTilesVisibility();function y(){f=this.oModel.getProperty("/groups/"+m.groupIndex);b=this.oModel.getProperty("/groups/"+M.newGroupIndex);P=this._getIndexForMove(h,m.tileIndex,o,M.oNewGroup,f);m.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(m.oTile,P,f,b,d).then(function(e){var t=G._getPathOfTile(s);if(t){G.oModel.setProperty(t+"/object",e.object);G.oModel.setProperty(t+"/originalTileId",e.originalTileId);var o=G.oModel.getProperty(t+"/content");var r=e.content;if(p==="links"){G._changeLinkScope(r,g?"Actions":"Display");G._attachLinkPressHandlers(r);G._handleTileAppearanceAnimation(r);m.oTile.content=[r];G.oModel.setProperty(t,jQuery.extend({},m.oTile));G.oModel.setProperty("/groups/"+M.newGroupIndex+"/"+p,G.oModel.getProperty("/groups/"+M.newGroupIndex+"/"+p))}else{G.oModel.setProperty(t+"/content",[r])}if(o&&o[0]){var n=r.onAfterRendering;r.onAfterRendering=function(){n.apply(this);o[0].destroy();r.onAfterRendering=n}}G.oModel.setProperty(t+"/tileIsBeingMoved",false);if(i.callBack){i.callBack(r)}T.show(u.i18n.getText("PageRuntime.Message.VisualizationMoved"))}G._checkRequestQueue()},function(){G._resetGroupsOnFailure("fail_to_move_tile_msg")})}this._addRequest(y.bind(this))},_adjustTileIndex:function(e,t,i,o){var r=0,s=false,n=0;for(n=0;n<i[o].length&&r<e;n++){if(i[o][n].isTileIntentSupported){if(i[o][n]===t){s=true}else{r++}}}if(s){return n-1}return n},getModel:function(){return this.oModel},getDashboardView:function(){return this.oDashboardView},setDashboardView:function(e){this.oDashboardView=e;return this},setTileVisible:function(e,t){this.oPageOperationAdapter.setTileVisible(e.object,t)},refreshTile:function(e){this.oPageOperationAdapter.refreshTile(e.object)},updateSettings:function(e){this.oModel=e.model||this.oModel;this.oConfig=e.config||this.oConfig;this.oRouter=e.router||this.oRouter;this.oDashboardView=e.view||this.oDashboardView},_resetGroupsOnFailure:function(e,t){this._requestFailed();h.showLocalizedError(e,t);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true)},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments)},_bindSegment:function(e,t){var i,o,r,s;for(i=0;i<t.length;i++){r=t[i];s=r.index;o=e[s];if(o){o.isRendered=true;o.tiles=o.tiles.concat(r.tiles);o.links=o.links.concat(r.links)}}return e},createGroupsModelFrame:function(e,t){var i,o=[],r,s;s=function(e){var t=jQuery.extend({},e);t.tiles=[];t.pendingLinks=[];t.links=[];return t};for(i=0;i<e.length;i++){r=e[i];o[i]=s(r);o[i].isRendered=false;o[i].visibilityModes=l.calcVisibilityModes(r,t)}return o},_splitGroups:function(e,t){var i,o=[],r=0,s=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",n=this.oModel.getProperty("/personalization"),a=0,l;var u=500;for(i=0;i<e.length;i++){l=e[i];o.push(l);if(!this.segmentsStore.length){r+=this.PagingManager.getGroupHeight(l,t===i,n)}else{a+=l.tiles.length+l.links.length}if(s&&!this.segmentsStore.length&&r>0){o.loadTilesView=true;this.segmentsStore.push(o);o=[];r=0}if(r>=1||a>=u){this.segmentsStore.push(o);o=[];r=0;a=0}}if(o.length){this.segmentsStore.push(o)}},_processSegment:function(e){var t=this.segmentsStore.shift();if(!t){return e}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||t.loadTilesView){this.getSegmentContentViews(t)}}e=this._bindSegment(e,t);return e},getSegmentContentViews:function(e){var t,i,o,r;for(t=0;t<e.length;t++){o=e[t];for(i=0;i<o.tiles.length;i++){r=o.tiles[i];if(r.isTileIntentSupported){this.getTileView(r)}}for(i=0;i<o.links.length;i++){r=o.links[i];if(r.isTileIntentSupported){this.getTileView(r,o.index)}}}this.bIsFirstSegmentViewLoaded=true},getSegmentTabContentViews:function(e,t,i){var o,r,s=i.iSelectedGroup,n;n=this.oModel.getProperty("/groups/"+s);for(o=0;o<n.tiles.length;o++){r=n.tiles[o];if(r.isTileIntentSupported){this.getTileView(r)}}for(o=0;o<n.links.length;o++){r=n.links[o];if(r.isTileIntentSupported){this.getTileView(r,s)}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups()},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate()}},handleFirstSegmentLoaded:function(){var e=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(e,this.aGroupsFrame);this.aGroupsFrame=null}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments()}},_initializeAnchorNavigationBar:function(){var e,t=w.getDashboardView();e=t.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:e})},_processRemainingSegments:function(){var e;if(this.segmentsStore.length>0){window.setTimeout(function(){e=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",e);this.bIsFirstSegment=false;this._processRemainingSegments()}.bind(this),0)}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);l.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");n.emit("updateGroups",Date.now())}},tabsModeVisibilityChanged:function(){if(this.bIsFirstSegmentViewLoaded===false&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardLoadingManager.manageTilesView();this.bIsFirstSegmentViewLoaded=true;n.emit("firstSegmentCompleteLoaded",true)}},_setGroupModel:function(e){if(this.bIsGroupsModelLoading){G.info("Skip set the group model, because the group model is still loading");return}var t=0,i,o=0,s=0,a=0,u,p,h=null,g,c,f=[];this.bIsGroupsModelLoading=true;try{o=this.oModel.getProperty("/groups").length}catch(e){}for(t=e.length;t<o;++t){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+t))}if(!this.PagingManager){var b=jQuery("#dashboardGroups").width();if(!b){b=window.innerWidth}var v=jQuery("#sapUshellDashboardPage-cont").height();if(v<100){v=window.innerHeight}this.PagingManager=new r("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:v,containerWidth:b})}e.forEach(function(e){if(e.isGroupVisible){s+=e.tiles.length}});this.bIsScrollModeAccordingKPI=s>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(e,this.oModel.getProperty("/personalization"));for(t=0;t<this.aGroupsFrame.length;t++){if(this.aGroupsFrame[t].isGroupVisible&&this.aGroupsFrame[t].visibilityModes[0]){if(h===null){h=t;this.aGroupsFrame[t].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",t)}a++;if(a>1){this.aGroupsFrame[h].showGroupHeader=false;break}}}this._splitGroups(e,h);p=this.segmentsStore[0]?this.segmentsStore[0].length:0;u=this.aGroupsFrame.splice(0,p);_.start("FLP:DashboardManager._processSegment","_processSegment","FLP");f=this._processSegment(u);e.every(function(e,t){if(e.isDefaultGroup){i=t;return false}return true});f.indexOfDefaultGroup=i;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){g=this.getDashboardView();if(g){c=g.oDashboardGroupsBox;var m=c.getBinding("groups");if(m){m.filter([g.oFilterSelectedGroup])}}}_.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",f);this.aGroupModel=f;if(this.oDashboardView){n.once("firstSegmentCompleteLoaded").do(function(){l.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true})}).do(this.handleFirstSegmentLoaded.bind(this))}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments()}.bind(this),0)}if(!this.bIsFirstSegmentViewLoaded&&this.isBlindLoading()){this.bIsFirstSegmentViewLoaded=!this._isAtLeastOneTileVisibleInASegment(u)}if(this.bIsFirstSegmentViewLoaded){n.emit("firstSegmentCompleteLoaded",true)}_.end("FLP:DashboardManager.loadGroupsFromArray")},_isAtLeastOneTileVisibleInASegment:function(e){var t;var i;for(var o=0;o<e.length;++o){t=e[o];for(var r=0;r<t.tiles.length;++r){i=t.tiles[r];if(i.isTileIntentSupported){return true}}}return false},getPreparedGroupModel:function(){return this.aGroupModel},_loadGroup:function(e,t){var i=this,o="/groups/"+e,r=i.oModel.getProperty(o),s=r.isLastGroup,n=r.groupId;d.destroyFLPAggregationModel(r);if(n){t.groupId=n}t.isLastGroup=s;t.index=e;t.isRendered=true;this.oModel.setProperty(o,t)},_hasPendingLinks:function(e){for(var t=0;t<e.length;t++){if(e[t].content[0]===undefined){return true}}return false},_addModelToTileViewUpdateQueue:function(e,t){this.tileViewUpdateQueue.push({uuid:e,view:t})},_updateModelWithTileView:function(e,t){var i=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID)}this.tileViewUpdateTimeoutID=window.setTimeout(function(){i.tileViewUpdateTimeoutID=undefined;i.oSortableDeferred.done(function(){i._updateModelWithTilesViews(e,t)})},50)},_updateGroupModelWithTilesViews:function(e,t,i,o){var r,s,n,a,l=t||0;for(var u=l;u<e.length;u=u+1){r=e[u];for(var d=0;d<this.tileViewUpdateQueue.length;d++){s=this.tileViewUpdateQueue[d];if(r.uuid===s.uuid){i.push(d);if(s.view){if(o){r.content=[s.view]}else{r.content[0].destroy();r.content=[s.view]}this.oDashboardLoadingManager.setTileResolved(r);n=this.oPageOperationAdapter.getTileSize(r.object);a=n!==null&&n==="1x2"||false;if(r.long!==a){r.long=a}}else{r.content[0].setState("Failed")}break}}}},_updateModelWithTilesViews:function(e,t){var i=this.oModel.getProperty("/groups"),o=e||0,r=[];if(!i||this.tileViewUpdateQueue.length===0){return}for(var s=o;s<i.length;s=s+1){this._updateGroupModelWithTilesViews(i[s].tiles,t,r);if(i[s].links){this._updateGroupModelWithTilesViews(i[s].links,t,r,true);if(i[s].pendingLinks.length>0){if(!i[s].links){i[s].links=[]}i[s].links=i[s].links.concat(i[s].pendingLinks);i[s].pendingLinks=[]}}}var n=[],a;for(a=0;a<this.tileViewUpdateQueue.length;a++){if(r.indexOf(a)===-1){n.push(this.tileViewUpdateQueue[a])}}this.tileViewUpdateQueue=n;this.oModel.setProperty("/groups",i)},getModelTileById:function(e,t){var i=this.oModel.getProperty("/groups"),o,r=false;i.every(function(i){i[t].every(function(t){if(t.uuid===e||t.originalTileId===e){o=t;r=true}return!r});return!r});return o},_attachLinkPressHandlers:function(e){var t=sap.ui.getCore().getEventBus(),i=e.attachPress?e:e.getContent()[0];i.attachPress(function(i){var o=e.getBindingContext().getObject().tileIsBeingMoved;if(!o&&this.getScope&&this.getScope()==="Actions"){switch(i.getParameters().action){case"Press":var r=e.getState?e.getState():"";if(r!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(i)}break;case"Remove":var s=e.getBindingContext().getObject().uuid;t.publish("launchpad","deleteTile",{tileId:s,items:"links"});break;default:break}}else{t.publish("launchpad","dashboardTileLinkClick")}})},handleDisplayModeChange:function(e){this.oModel.setProperty("/homePageGroupDisplay",e);switch(e){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break}},_handleDisplayModeChangeToTabs:function(){var e=this.oModel.getProperty("/iSelectedGroup"),t=this.oModel.getProperty("/groups");this.oDashboardLoadingManager.manageTilesView();if(t.length>0){for(var i=0;i<t.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false)}this.oModel.setProperty("/groups/"+e+"/isGroupSelected",true)}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return}var e=this.oModel.getProperty("/groups"),t,i,o,r=[],s,n;for(s=0;s<e.length;s++){t=e[s];i=t.tiles||[];for(n=0;n<i.length;n++){o=i[n];if(o.content.length===0){this.getTileView(o,s)}}r=t.links||[];for(n=0;n<r.length;n++){this.getTileView(r[n],s)}}this.oModel.refresh(false);var a=this.oModel.getProperty("/iSelectedGroup");if(a){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:e[a].groupId})},100)}},getTileViewsFromArray:function(e){var t=this;if(e.length===0){return}e.forEach(function(e){t.getTileView(e.oTile,e.iGroup)});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;n.emit("firstSegmentCompleteLoaded",true)}},getTileView:function(e,t){var i=this.oPageOperationAdapter.getTileType(e.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(e)){return}this.oDashboardLoadingManager.setTileInProgress(e);this.oPageOperationAdapter.setTileVisible(e.object,false);if(i==="card"){this._loadCardData(e)}else{this._loadTileData(e,t,i)}},_loadCardData:function(e){var t=sap.ui.getCore().byId(e.controlId);if(t&&t.setManifest&&this.isBlindLoading()){t.setManifest(e.manifest)}e.content=[e.manifest];this.oDashboardLoadingManager.setTileResolved(e)},getCurrentHiddenGroupIds:function(e){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(e)},_loadTileData:function(e,t,i){var r=this,s=this.oPageOperationAdapter.getTileView(e),n,a,l,u=this._addModelToTileViewUpdateQueue,d,p=false,h=e.uuid,c=false;if(s.state()==="resolved"){c=true}s.done(function(i){if(i.oController&&i.oController.navigationTargetUrl&&!e.isCustomTile){e.target=i.oController.navigationTargetUrl}d=i;if(d.getComponentInstance){_.average("FLP:getComponentInstance","get info for navMode","FLP1");var o=d.getComponentInstance().getComponentData();if(o&&o.properties){e.navigationMode=o.properties.navigationMode}_.end("FLP:getComponentInstance")}r.oDashboardLoadingManager.setTileResolved(e);n=i.getMode?i.getMode():"ContentMode";if(r.bLinkPersonalizationSupported&&n==="LineMode"){r._attachLinkPressHandlers(d);if(t>=0){a=r.oModel.getProperty("/groups");if(a[t]){e.content=[d];l=r.oModel.getProperty("/groups/"+t+"/links");r.oModel.setProperty("/groups/"+t+"/links",[]);r.oModel.setProperty("/groups/"+t+"/links",l)}}}else if(r.isBlindLoading()){if(e.content&&e.content.length>0){e.content[0].destroy()}e.content=[d];if(t>=0&&!c){r.oModel.refresh(false)}}if(r.isBlindLoading()){var s=r.oPageOperationAdapter.getTileSize(e.object);var g=s==="1x2";if(e.long!==g){e.long=g}}else if(n==="LineMode"){e.content=[d];if(p){l=r.oModel.getProperty("/groups/"+t+"/links");r.oModel.setProperty("/groups/"+t+"/links",[]);r.oModel.setProperty("/groups/"+t+"/links",l)}}else if(e.content.length===0){e.content=[d]}else{u.apply(r,[h,d]);r._updateModelWithTileView(0,0)}});s.fail(function(){if(r.oPageOperationAdapter.getTileType(e.object)==="link"&&r.bLinkPersonalizationSupported){d=r.oPageOperationAdapter.getFailedLinkView(e);r._attachLinkPressHandlers(d)}else{d=new o({state:"Failed"})}e.content=[d]});if(!d){if(r.oPageOperationAdapter.getTileType(e.object)==="link"){p=true;d=new g({mode:"LineMode"})}else{d=new o}e.content=[d]}},loadPersonalizedGroups:function(){var e=this;var t=new jQuery.Deferred;if(this.bIsGroupsRequestPending){G.info("loadPersonalizedGroups was skipped because there is already a pending request.");t.reject();return t.promise()}this.bIsGroupsRequestPending=true;this.oServiceLoadingPromise.then(function(){return e.oPageOperationAdapter.getPage()}).then(function(i){e._setGroupModel(i);e.bIsGroupsRequestPending=false;t.resolve()}).catch(function(){h.showLocalizedError("fail_to_load_groups_msg");e.bIsGroupsRequestPending=false});_.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return t.promise()}});L.prototype.getInstance=function(){return w};return L});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/MessagingHelper", ["sap/ushell/services/Message","sap/ushell/resources"],function(e,s){"use strict";return{getLocalizedText:n,showLocalizedError:o,showLocalizedErrorHelper:r,showLocalizedMessage:i};function n(e,n){return s.i18n.getText(e,n)}function i(s,i,o){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("Message").then(function(r){r.show(o||e.Type.INFO,n(s,i),i)})}}function o(s,n){i(s,n,e.Type.ERROR)}function r(e,s){return function(){o(e,s)}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/SharedComponentUtils", ["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(e,t,n,i,r,jQuery){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){t.on("/core/extension/SupportTicket").do(function(e){if(e){n.activate()}else{n.deactivate()}})},initializeAccessKeys:function(){if(e.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){t.registerAppKeysHandler(e.handleFocusOnMe)})})}},getEffectiveHomepageSetting:function(e,n){var i,r=t.last(n)!==false,s=e.split("/").reverse()[0];if(r){i=this._getPersonalization(s)}else{i=Promise.resolve()}return i.then(function(n){n=n||t.last(e);if(n!==undefined){t.emit(e,n)}return n}).catch(function(){return t.last(e)})},_getPersonalization:function(e){return s.getPersonalizer(e,sap.ushell.Container.getRenderer("fiori2")).then(function(t){return new Promise(function(n,r){t.getPersData().done(n).fail(function(t){i.error("Failed to load "+e+" from the personalization",t,"sap.ushell.components.flp.settings.FlpSettings");r()})})})},getPersonalizer:function(e,t){return sap.ushell.Container.getServiceAsync("Personalization").then(function(n){var i=r.getOwnerComponentFor(t);var s={keyCategory:n.constants.keyCategory.FIXED_KEY,writeFrequency:n.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:this.PERS_KEY,item:e};return n.getPersonalizer(o,s,i)}.bind(this))}};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/StateHelper", [],function(){"use strict";function e(e){var a=[],n;e=e||[];for(n=0;n<e.length;n++){if(e[n]!==undefined){if(e[n]!=="home"&&e[n]!=="app"){throw new Error("sLaunchpadState value is invalid")}a.push(e[n])}}if(!a.length){a=["app","home"]}return a}function a(e,a){var n=[];if(e==="app"&&!a){var t=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];n=n.concat(t)}else if(e==="home"&&!a){var r=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];n=n.concat(r)}else{n.push(e)}return n}function n(n,t){var r=t?n:e(n);return r.reduce(function(e,n){var r=a(n,t);if(r){e=e.concat(r)}return e},[])}return{getAllStateToUpdate:n,getModelStates:a,getPassStates:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy", ["sap/base/Log","sap/ui/core/Core"],function(e,r){"use strict";function t(t,n){if(!t||!n){return false}var i=n.every(function(t){var n=!!r.byId(t);if(!n){e.warning("Failed to find control with id '{id}'".replace("{id}",t))}return n});if(!i){return false}if(n.length===1&&n[0]==="endItemsOverflowBtn"){return true}var a=Array.from(new Set(t.concat(n)));var o=a.includes("endItemsOverflowBtn")?11:10;if(a.length>o){e.warning("maximum of six items has reached, cannot add more items.");return false}return true}function n(e,r){var t=Array.from(new Set(e.concat(r)));var n={sf:-3,copilotBtn:-1,NotificationsCountButton:1,endItemsOverflowBtn:2,meAreaHeaderButton:3,productSwitchBtn:4};t.sort(function(e,r){var t=n[e]||0,i=n[r]||0;if(t===i){return e.localeCompare(r)}return t-i});return t}function i(e,r){var i=e;if(t(e,r)){i=n(e,r)}return i}return{execute:i}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/AddHeadItemsStrategy", [],function(){"use strict";function n(n,t){return n.indexOf(t)===-1?n.concat(t):n}function t(t,e){return e.reduce(n,t)}function e(n){return function(t){return n.indexOf(t)===-1}}function r(n,r){return t(n,r.filter(e(["backBtn"]))).length<=3}function i(n,t){var e=[],r=n.concat(t);if(n.indexOf("backBtn")>-1||t.indexOf("backBtn")>-1){e.push("backBtn")}if(e.length<3){for(var i=0;i<r.length;i++){var u=r[i];if(e.indexOf(u)===-1){e.push(u)}if(e.length>=3){break}}}return e}function u(n,t){var e=n;if(r(n,t)){e=i(n,t)}return e}return{execute:u}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ControlManager", ["sap/m/Avatar","sap/m/library","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,a,r,s,i){"use strict";var n=t.AvatarSize;var o=[];function u(e,t,a){o.push(p(a))}function l(){o.forEach(function(e){var t=sap.ui.getCore().byId(e);if(t){if(t.destroyContent){t.destroyContent()}t.destroy()}});o=[]}function p(t){var a="meAreaHeaderButton",i=sap.ushell.Container.getUser(),o=s.i18n.getText("MeAreaToggleButtonAria",i.getFullName());var u=new e({id:a,src:"{/userImage/personPlaceHolder}",initials:i.getInitials(),ariaHasPopup:"Menu",displaySize:n.XS,tooltip:o,press:function(){r.emit("showMeArea",Date.now())}});u.setModel(t);return a}return{init:u,destroy:l}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(e,t){if(!t){t={}}return jQuery.extend(true,{},e,t)}return{execute:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/PropertyStrategiesFactory", ["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(e,a,t,r,i){"use strict";return function(s,c){var n;switch(s){case"headItems":if(c==="remove"){n=r}else{n=e}break;case"headEndItems":if(c==="remove"){n=r}else{n=a}break;case"homeUri":case"showLogo":case"headerVisible":case"centralAreaElement":case"title":n=i;break;case"application":n=t;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/title":n=i;break;default:n=null;break}return n}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/RemoveItemsStrategy", ["sap/base/Log"],function(e){"use strict";function n(e,n){return n.some(function(n){return e.indexOf(n)>=0})}function t(e,n){return e.filter(function(e){return n.indexOf(e)===-1})}function i(i,r){var u=i;if(n(i,r)){u=t(i,r)}else{e.warning("You cannot remove item: "+r+", the item does not exists.")}return u}return{execute:i}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy", [],function(){"use strict";function n(n){return n!==undefined}function e(e,u){if(n(u)){return u}return e}return{execute:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HeaderManager/ShellHeader.controller", ["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/ui/shell/OverflowListItem"],function(e,t,i,n,a,r,o,s,l){"use strict";var u=e.ListType;var d=s.FloatingNumberType;return t.extend("sap.ushell.components._HeaderManager.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(o.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(o.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(o.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)))},shellUpdateAggItem:function(e,t){return sap.ui.getCore().byId(t.getObject())},pressNavBackButton:function(){o.emit("showMeArea",false);a.service().navigateBack()},pressEndItemsOverflow:function(e){var t=sap.ui.getCore().byId("headEndItemsOverflow"),i=sap.ui.getCore().byId(e),a=Promise.resolve(),s;if(!i){return}if(!t){a=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",type:"XML",controller:this}).then(e).catch(t)}.bind(this),t)}.bind(this)).then(function(e){t=e;var i=sap.ui.getCore().byId("headEndItemsOverflowList");i.enhanceAccessibilityState=function(e,t){if(e.getFloatingNumberType()!==d.None){t.describedby=e._oAriaDescribedbyText.getId()}return t};s=new n({headEndItems:r.last("/core/shellHeader/headEndItems")});t.setModel(s)})}a.then(function(){if(t.isOpen()){t.close()}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){o.emit("showNotifications",false)}t.openBy(i)}})},headEndItemsOverflowItemFactory:function(e,t){var i=sap.ui.getCore().byId(t.getObject());var n=i.getBindingPath("floatingNumber");var a=i.getText();var r=i.getTooltip();var o=new l({id:e+"-"+i.getId(),icon:i.getIcon(),iconInset:true,tooltip:r!==a?r:null,title:a,type:u.Active,floatingNumber:n?{path:n}:undefined,floatingNumberMaxValue:i.getFloatingNumberMaxValue(),floatingNumberType:i.getFloatingNumberType(),press:function(){if(i){i.firePress();var e=i.getTarget();if(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.toExternal({target:{shellHash:e}})})}}var t=sap.ui.getCore().byId("headEndItemsOverflow");if(t.isOpen()){t.close()}}});if(i._oAriaLabel){o.addAriaLabelledBy(i._oAriaLabel)}if(n){o.setModel(i.getModel())}return o},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy()},isHeadEndItemInOverflow:function(e){return e!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(e)},isHeadEndItemNotInOverflow:function(e){var t=this.isHeadEndItemOverflow();var n=i.media.getCurrentRange(i.media.RANGESETS.SAP_STANDARD).name;if(e==="ENDITEMSOVERFLOWBTN"){return t}if(!t){return true}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(e)>-1){return true}if(n==="Phone"){return false}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(e)>-1){return true}if(n==="Desktop"&&e==="COPILOTBTN"){return true}return false},isHeadEndItemOverflow:function(){var e=0,t,n=r.last("/core/shellHeader/headEndItems");if(n.indexOf("endItemsOverflowBtn")===-1){return false}var a=i.media.getCurrentRange(i.media.RANGESETS.SAP_STANDARD).name;var o=3;if(a==="Phone"){o=1}for(var s=0;s<n.length;s++){t=sap.ui.getCore().byId(n[s]);if(t&&t.getVisible()){e++}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return e>o+1}return e>o},navigateFromShellApplicationNavigationMenu:function(e){if(window.hasher.getHash()!==e.substr(1)){o.emit("centerViewPort",Date.now());window.hasher.setHash(e)}var t=sap.ui.getCore().byId("shellAppTitle");if(t){t.close()}},onExit:function(){this.aDoables.forEach(function(e){e.off()})}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/DashboardLoadingManager", ["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(e,i,jQuery){"use strict";var s=e.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(e,i){var s=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=i.oDashboardManager;s.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);s.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);s.subscribe("launchpad","refreshTiles",this._refreshTiles,this);s.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);s.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this)},_onVisibilityChanged:function(e,i,s){this.currentVisibleTiles=s;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView()}this.oDashboardManager.tabsModeVisibilityChanged();this.manageBusyIndicatorTiles();this.manageDynamicTiles()},manageDynamicTiles:function(){var e;i.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var s,t,a,n,r={},l=jQuery.extend(true,{},{},this.oActiveDynamicTiles);for(var o=0;o<this.currentVisibleTiles.length;o++){var u=this.currentVisibleTiles[o];if(!u.bIsExtanded){delete l[u.oTile.uuid]}}for(s in l){a=this.oActiveDynamicTiles[s];n=a.object;this.oDashboardManager.setTileVisible(a,false)}for(t=0;t<this.currentVisibleTiles.length;t++){e=this.currentVisibleTiles[t];if(!e.bIsExtanded){a=e.oTile;n=a.object;if(this.oActiveDynamicTiles[a.uuid]===undefined&&n){this.oDashboardManager.setTileVisible(a,true)}r[a.uuid]=a}}this.oActiveDynamicTiles=r;i.end("DashboardLoadingManagerActiveDynamicTile")},isTileViewRequestIssued:function(e){if(this.oInProgressTiles[e.uuid]===undefined&&this.oResolvedTiles[e.uuid]===undefined){return false}return true},manageBusyIndicatorTiles:function(){i.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var e,s,t,a,n=[],r,l=[];for(s in this.oBusyIndicatorTiles){r=true;a=this.oBusyIndicatorTiles[s];if(this.oResolvedTiles[s]===undefined){for(var o=0;o<this.currentVisibleTiles.length;o++){if(this.currentVisibleTiles[o].oTile.uuid===a.oTile.uuid){r=false;break}}if(r){n.push(a)}}}for(e=0;e<this.currentVisibleTiles.length;e++){t=this.currentVisibleTiles[e];if(this.oBusyIndicatorTiles[t.oTile.uuid]===undefined&&this.oResolvedTiles[t.oTile.uuid]===undefined){l.push(t)}}for(e=0;e<n.length;e++){t=n[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState()}}else{t.oTile.content[0].setState()}}delete this.oBusyIndicatorTiles[t.oTile.uuid]}for(e=0;e<l.length;e++){t=l[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState("Loading")}}else{t.oTile.content[0].setState("Loading")}}this.oBusyIndicatorTiles[t.oTile.uuid]=t}i.end("DashboardLoadingManagerBusyIndicators")},setTileInProgress:function(e){this.oInProgressTiles[e.uuid]=e},setTileResolved:function(e){delete this.oInProgressTiles[e.uuid];this.oResolvedTiles[e.uuid]=e},_addTileToRefreshArray:function(e,i,s){this.aRefreshTiles.push(s.uuid)},_refreshTiles:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){for(var t=0;t<this.aRefreshTiles.length;t++){if(i.uuid===this.aRefreshTiles[t]){this.aRefreshTiles.splice(t,1);this.oDashboardManager.setTileVisible(i,true);this.oDashboardManager.refreshTile(i);break}}}}},_setTilesNoVisibility:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){this.oDashboardManager.setTileVisible(i,false)}delete this.oActiveDynamicTiles[i.uuid]}},manageTilesView:function(){var e,i,s=[];for(e=0;e<this.currentVisibleTiles.length;e++){i=this.currentVisibleTiles[e];if(this.oInProgressTiles[i.oTile.uuid]===undefined&&this.oResolvedTiles[i.oTile.uuid]===undefined){s.push(i)}}this.oDashboardManager.getTileViewsFromArray(s)}});return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PagingManager", ["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(e,t,i){"use strict";var n=7;var h=e.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(e,t){sap.ushell.components._HomepageManager.getPagingManager=function(e){return function(){return e}}(this.getInterface());this.currentPageIndex=0;this.containerHeight=t.containerHeight||0;this.containerWidth=t.containerWidth||0;this.supportedElements=t.supportedElements||"";this.tileHeight=0;this.tileSize={sapUshellTile:{width:100,height:100},sapUshellLinkTile:{width:40,height:20},default:{width:40,height:20}}},getTileHeight:function(){return this.tileHeight},setElementClass:function(e){this.supportedElements=e},_getTileHeight:function(e){return e?148:176},_getTileWidth:function(e,t){if(e){return t?304:360}return t?148:176},getGroupHeight:function(e,h,s){if(!e||e.isGroupVisible===false){return 0}var r=e.tiles,a=e.links,l=t.system.phone||i.last("/core/home/sizeBehavior")==="Small",o=this._getTileWidth(false,l),u=this._getTileWidth(true,l),g=48,c=8,d=this.containerWidth-c;var f=0,p=1,m,E,H;var v=r.some(function(e){return!!e&&e.isTileIntentSupported!==false});if(!v){if(e.isGroupLocked||e.isDefaultGroup||!s||t.system.phone){return 0}return(g+c)/this.containerHeight}var P=c;if(!h){P+=g}if(a&&a.length){P+=44}for(H=0;H<r.length;H++){if(P>this.containerHeight){break}m=r[H];if(!m||m.isTileIntentSupported===false){continue}E=m.long?u:o;if(f>0){f+=n}f+=E;if(f>d){p+=1;f=E}}P+=(this._getTileHeight(l)+n)*p;return P/this.containerHeight},setContainerSize:function(e,t){var i=this.getNumberOfAllocatedElements();this.containerHeight=e;this.containerWidth=t;this._changePageSize(i)},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex},_changePageSize:function(e){this.currentPageIndex=Math.ceil(e/this._calcElementsPerPage())},moveToNextPage:function(){this.currentPageIndex++},resetCurrentPageIndex:function(){this.currentPageIndex=0},getSizeofSupportedElementInUnits:function(e){return this.supportedElements[e].sizeInBaseUnits},_calcElementMatrix:function(e){var t=document.createElement("div");t.classList.add(e);document.getElementsByTagName("body")[0].appendChild(t);var i=t.clientHeight;var n=t.clientWidth;var h;if(i<20||n<40){h=this.tileSize[e]||this.tileSize.default}else{h={width:n,height:i}}this.tileHeight=i;t.remove();return h},_calcElementsPerPage:function(){var e,t,i,n,h,s,r;for(e in this.supportedElements){i=this.supportedElements[e];n=this._calcElementMatrix(i.className);i.matrix=n;if(t){t.width=t.width>n.width?n.width:t.width;t.height=t.height>n.height?n.height:t.height}else{t={width:n.width,height:n.height}}}for(e in this.supportedElements){i=this.supportedElements[e];h=i.matrix;i.sizeInBaseUnits=Math.round(h.width/t.width*h.height/t.height)}s=Math.round(this.containerWidth/t.width);r=Math.round(this.containerHeight/t.height);if(!r||!s||s===Infinity||r===Infinity||s===0||r===0){return 10}return r*s}});return h});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter", ["sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(e,r,i,t,o,n,a,u,l,s){"use strict";var d=l.GenericTileMode;var g=l.LoadState;var c={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function p(e,r){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.logCustomEvent(c.PERSONALIZATION,e,r)})}var f=e.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(r){e.call(this);this.oPageBuilderService=r},_getIsAppBox:function(e){var r=this.oPageBuilderService,i=!!(r.getCatalogTileTargetURL(e)&&(r.getCatalogTilePreviewTitle(e)||r.getCatalogTilePreviewSubtitle(e)));return i},getCurrentHiddenGroupIds:function(e){var r=e.getProperty("/groups"),i=[],t,o,n;for(o=0;o<r.length;o++){n=r[o]?r[o].isGroupVisible:true;if(r[o].object){t=this.oPageBuilderService.getGroupId(r[o].object)}if(!n&&t!==undefined){i.push(t)}}return i},getPreparedTileModel:function(e,i,t){var a=this.oPageBuilderService,u=n(),l,s=a.getTileSize(e),g=[],c;t=t||a.getTileType(e);if(t==="link"){g=[new o({mode:d.LineMode})]}l={isCustomTile:!this._getIsAppBox(e),object:e,originalTileId:a.getTileId(e),uuid:u,tileCatalogId:encodeURIComponent(a.getCatalogTileId(e)),tileCatalogIdStable:"",content:g,long:s==="1x2",target:a.getTileTarget(e)||"",debugInfo:a.getTileDebugInfo(e),isTileIntentSupported:a.isTileIntentSupported(e),rgba:"",isLocked:i,showActionsIcon:r.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:a.isLinkPersonalizationSupported(e),navigationMode:undefined};if(a.getStableCatalogTileId(e)){l.tileCatalogIdStable=a.getStableCatalogTileId(e)}if(t==="card"){c=a.getCardManifest(e);l.isCard=true;if(c){l.manifest=c}}return l},getPreparedGroupModel:function(e,i,o,u){var l=this.oPageBuilderService,s=e&&l.getGroupTiles(e)||[],d=[],g=[],c,p=r.last("/core/shell/model/personalization"),f=r.last("/core/extension/enableHelp");var P=!!(e&&l.isGroupLocked(e)),v=!!(e&&l.isGroupFeatured(e));for(c=0;c<s.length;++c){var h=s[c],T=l.getTileType(h).toLowerCase();if(T==="tile"||T==="card"){d.push(this.getPreparedTileModel(s[c],P,T))}else if(T==="link"){g.push(this.getPreparedTileModel(s[c],P,T))}else{a.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:i&&t.getLocalizedText("my_group")||e&&l.getGroupTitle(e)||u&&u.title||"",object:e,groupId:n(),helpId:f&&e?l.getGroupId(e):null,links:g,pendingLinks:[],tiles:d,isDefaultGroup:!!i,editMode:!e,isGroupLocked:P,isFeatured:v,visibilityModes:[true,true],removable:!e||l.isGroupRemovable(e),sortable:p,isGroupVisible:!e||l.isGroupVisible(e),isEnabled:!i,isLastGroup:o||false,isRendered:!!(u&&u.isRendered),isGroupSelected:false}},getPage:function(){u.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this))},_getGroupsFromServer:function(){var e=this;return new Promise(function(r,i){e.oPageBuilderService.getGroups().done(function(e){u.end("FLP:DashboardManager.loadPersonalizedGroups");r(e)}).fail(i)})},loadGroupsFromArray:function(e){var r=this;u.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");u.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(i,t){r.oPageBuilderService.getDefaultGroup().done(function(t){u.end("FLP:DashboardManager.getDefaultGroup");if(e.length===0&&t===undefined){i([]);return}var o=0,n,a=[],l,d;e=r._sortGroups(t,e);d=e.findIndex(function(e){return s(e,t)});l=e.length;u.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(o=0;o<l;++o){n=r.getPreparedGroupModel(e[o],o===d,o===l-1);n.index=o;a.push(n)}u.end("FLP:DashboardManager._getGroupModel");u.end("FLP:DashboardManager.loadGroupsFromArray");i(a)}).fail(t)})},_sortGroups:function(e,i){var t=0,o=this,n=i.findIndex(function(r){return s(r,e)}),a=[],u,l,d;if(n>-1){i.splice(n,1)}while(t<i.length){l=i[t];d=this.oPageBuilderService.isGroupLocked(l);if(d){a.push(l);i.splice(t,1)}else{t++}}if(!r.last("/core/home/disableSortedLockedGroups")){a.sort(function(e,r){var i=o.oPageBuilderService.getGroupTitle(e).toLowerCase(),t=o.oPageBuilderService.getGroupTitle(r).toLowerCase();return i<t?-1:1})}a.sort(function(e,r){var i=o.oPageBuilderService.isGroupFeatured(e),t=o.oPageBuilderService.isGroupFeatured(r);if(i===t){return 0}else if(i>t){return-1}return 1});u=a;u.push(e);u.push.apply(u,i);return u},addGroupAt:function(e,r,i){var t=this;return new Promise(function(o,n){try{if(r===undefined){t.oPageBuilderService.addGroup(e.title).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(c.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}else{t.oPageBuilderService.addGroupAt(e.title,r).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(c.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}}catch(e){n()}})},renameGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.setGroupTitle(e.object,r).done(function(){var n=t.oPageBuilderService.getGroupId(e.object);p(c.RENAME_GROUP,[i,r,n]);o()}).fail(n)}catch(e){n()}})},deleteGroup:function(e){var r=this,i=e.object,t=this.oPageBuilderService.getGroupId(i),o=this.oPageBuilderService.getGroupTitle(i);return new Promise(function(e,n){try{r.oPageBuilderService.removeGroup(i).done(function(){p(c.DELETE_GROUP,[o,t]);e()}).fail(n)}catch(e){n()}})},moveGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.moveGroup(e.object,r).done(function(){var r=t.oPageBuilderService.getGroupId(e.object);p(c.MOVE_GROUP,[e.title,i.iFromIndex,i.iToIndex,r]);o()}).fail(n)}catch(e){n()}})},resetGroup:function(e,r){var i=this,t=e.object,o=this.oPageBuilderService.getGroupId(t),n=this.oPageBuilderService.getGroupTitle(t);return new Promise(function(a,u){try{i.oPageBuilderService.resetGroup(t).done(function(u){p(c.RESET_GROUP,[n,o]);a(i.getPreparedGroupModel(u||t,r,e.isLastGroup,undefined))}).fail(u)}catch(e){u()}})},refreshGroup:function(e){var r=this,i="Failed to refresh group with id:"+e+" in the model";return new Promise(function(t){r.oPageBuilderService.getGroups().fail(function(){a.error(i,null,"sap.ushell.components.HomepageManager");t(null)}).done(function(i){var o=null;for(var n=0;n<i.length;n++){if(r.oPageBuilderService.getGroupId(i[n])===e){o=i[n];break}}if(o){r.oPageBuilderService.getDefaultGroup().done(function(i){var n=e===i.getId(),a=r.getPreparedGroupModel(o,n,false,{isRendered:true});t(a)})}else{t(null)}})})},getIndexOfGroup:function(e,r){var i=-1,t=this,o=this.oPageBuilderService.getGroupId(r);e.every(function(e,r){var n=t.oPageBuilderService.getGroupId(e.object);if(n===o){i=r;return false}return true});return i},getOriginalGroupIndex:function(e){var r=this.oPageBuilderService,i=e.object,t=this.oPageBuilderService.getGroups();return new Promise(function(e,o){t.done(function(t){var o;for(var n=0;n<t.length;n++){if(r.getGroupId(t[n])===r.getGroupId(i)){o=n;break}}e(o)}).fail(o)})},moveTile:function(e,r,i,t,o){var n=this,a,u=new Promise(function(u,l){try{var s=n.oPageBuilderService.moveTile(e.object,r.tileIndex,r.newTileIndex,i.object,t.object,o);s.done(function(r){var o=[n.oPageBuilderService.getTileTitle(e.object),n.oPageBuilderService.getGroupTitle(i.object),n.oPageBuilderService.getGroupTitle(t.object),e.uuid];p(c.MOVE_TILE,o);a=r;u(r)});s.fail(l)}catch(e){l()}});return u.then(this._getTileViewAsPromise.bind(this)).then(function(e){return Promise.resolve({content:e,originalTileId:n.oPageBuilderService.getTileId(a),object:a})})},removeTile:function(e,r){var i=this,o=r.object,n=i.oPageBuilderService.getTileTitle(o),a=i.oPageBuilderService.getCatalogTileId(o),u=i.oPageBuilderService.getCatalogTileTitle(o),l=i.oPageBuilderService.getTileId(o),s;s=new Promise(function(r,s){try{i.oPageBuilderService.removeTile(e.object,o).done(function(){t.showLocalizedMessage("tile_deleted_msg",[n,e.title]);p(c.DELETE_TILE,[n||l,a,u,e.title]);r()}).fail(s)}catch(e){s()}});return s},_getTileViewAsPromise:function(e){var r=this,i=new Promise(function(i,t){var o=r.oPageBuilderService.getTileView(e);o.done(i);o.fail(t)});return i},refreshTile:function(e){this.oPageBuilderService.refreshTile(e)},setTileVisible:function(e,r){this.oPageBuilderService.setTileVisible(e,r)},getTileType:function(e){return this.oPageBuilderService.getTileType(e)},getTileSize:function(e){return this.oPageBuilderService.getTileSize(e)},getTileTitle:function(e){return this.oPageBuilderService.getTileTitle(e.object)},getTileId:function(e){return this.oPageBuilderService.getTileId(e)},isLinkPersonalizationSupported:function(e){return this.oPageBuilderService.isLinkPersonalizationSupported(e)},getTileTarget:function(e){return this.oPageBuilderService.getTileTarget(e.object)},getTileView:function(e){return this.oPageBuilderService.getTileView(e.object)},getTileActions:function(e){return this.oPageBuilderService.getTileActions(e)},getFailedLinkView:function(e){var r=this.oPageBuilderService.getCatalogTilePreviewSubtitle(e.object);var t=this.oPageBuilderService.getCatalogTilePreviewTitle(e.object);if(!t&&!r){t=i.i18n.getText("cannotLoadLinkInformation")}return new o({mode:d.LineMode,state:g.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e){a.error("Cannot get tile with id "+e+": Method is not supported")},transformGroupModel:function(){return}});var P=null;return{getInstance:function(e){if(!P){P=new f(e)}return P},destroy:function(){P=null}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/TransientPageOperationAdapter", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(jQuery,e,t,i,r,o,n,l,a,u,s){"use strict";var g=s.GenericTileMode;var d=s.LoadState;var c=e.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(t){e.call(this);this.oPageBuilderService=t;this._createCatalogMap()},_createCatalogMap:function(){if(this.mCatalogTiles){return}var e=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(i){for(var r=0;r<i.length;r++){for(var o=0;o<i[r].length;o++){t.mCatalogTiles[e.getCatalogTileId(i[r][o])]=i[r][o]}}})},getCurrentHiddenGroupIds:function(){return[]},getTileActions:function(e){e.isStub=function(){return true};var t=this.oPageBuilderService.getTileActions(e);delete e.isStub;return t},getPreparedTileModel:function(e,i,r){var n=a(),l,u=[];r=r||e.type;if(r==="link"){u=[new o({mode:g.LineMode})]}l={isCustomTile:false,object:e,originalTileId:n,uuid:n,tileCatalogId:"",content:u,long:false,target:"",debugInfo:null,isTileIntentSupported:true,rgba:"",isLocked:i,showActionsIcon:t.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:true,navigationMode:undefined};if(r==="card"){l.isCard=true;l.manifest={}}return l},getPreparedGroupModel:function(e,t,i,o){var n=a(),l=e&&e.tiles||[],s=[],g=[],d;for(d=0;d<l.length;++d){var c=l[d],f=c.type.toLowerCase();if(f==="tile"||f==="card"){s.push(this.getPreparedTileModel(l[d],false,f))}else if(f==="link"){g.push(this.getPreparedTileModel(l[d],false,f))}else{u.error("Unknown tile type: '"+f+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:t&&r.getLocalizedText("my_group")||e&&e.title||o&&o.title||"",object:e,groupId:n,links:g,pendingLinks:[],tiles:s,isDefaultGroup:!!t,editMode:!e,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!t,isLastGroup:i||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false}},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)])},addGroupAt:function(e,t,i){var r={title:e.title};return Promise.resolve(this.getPreparedGroupModel({},i,e.isLastGroup,r))},renameGroup:function(){return Promise.resolve()},deleteGroup:function(){return Promise.resolve()},moveGroup:function(){return Promise.resolve()},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode")},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode")},getIndexOfGroup:function(){return Promise.resolve(-1)},getOriginalGroupIndex:function(e,t){var i;for(var r=0;r<t.length;r++){if(t[r].groupId===e.groupId){i=r;break}}return Promise.resolve(i)},moveTile:function(e,t,i,r,o){var n=this._findCatalogTile(e.tileCatalogId);return Promise.resolve({content:this._getTileView(n,o),originalTileId:e.uuid,object:{id:e.uuid,type:o,title:this.oPageBuilderService.getCatalogTileTitle(n)}})},removeTile:function(){return Promise.resolve()},_getTileView:function(e,t){if(t==="link"){return new o({mode:g.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e)})}return new o({header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e),tileContent:new l({content:new n({src:this.oPageBuilderService.getCatalogTilePreviewIcon(e)})})})},refreshTile:function(){return},setTileVisible:function(){return},getTileType:function(e){return e.type},getTileSize:function(){return"1x1"},getTileId:function(e){return e.id},isLinkPersonalizationSupported:function(){return true},getTileTarget:function(e){var t=this._findCatalogTile(e.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(t)},getTileTitle:function(e){return e.object.title},_getAllCatalogTiles:function(){var e=this.oPageBuilderService;function t(t){t.map(function(t){var i=e.getCatalogId(t)||"";return e.getCatalogTitle(t)||i.split(":").slice(1).join(":")});return Promise.all(t.map(function(t){return e.getCatalogTiles(t)}))}return Promise.resolve(e.getCatalogs()).then(t)},_findCatalogTile:function(e){return this.mCatalogTiles[e]},getTileView:function(e){var t=this._findCatalogTile(e.tileCatalogId),i=this._getTileView(t,e.object.type),r=new jQuery.Deferred;r.resolve(i);return r.promise()},getFailedLinkView:function(e){var t=e.object.title||i.i18n.getText("cannotLoadLinkInformation"),r="";return new o({mode:g.LineMode,state:d.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e,t){var i=this._findCatalogTile(e),r;t=t||"tile";r=this.getPreparedTileModel({},false,t);r.tileCatalogId=e;r.object={id:r.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(i)};var o=this._getTileView(i,t);r.content=[o];return r},transformGroupModel:function(e){var t=this,i;for(var r=0;r<e.length;r++){i=e[r];i.object={};i.tiles.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(i)}});i.links.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(i)}})}return e}});var f;return{getInstance:function(e){if(!f){f=new c(e)}return f},destroy:function(){f=null}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/AppLifeCycle", ["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ApplicationType","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/EventHub","sap/ushell/utils/UrlParsing","sap/m/library"],function(e,t,i,n,a,r,s,o,l,p,u,f,c,h,jQuery,d,g,C,m){"use strict";function v(){var v,A=["URL"],y,S,I,b={},E=false,T={},R={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},U,w=[],F={},P=false,B={FULL:"true",RESTRICTED:"restricted"},O;var L=m.URLHelper;this.shellElements=function(){return s};this.service=function(){return r};this.isCurrentApp=function(e){return T.appId===e};this.isAppWithSimilarShellHashInCache=function(e,i){var n=t.get(e);if(n){if(n.shellHash===i){return true}return false}return false};this.isAppInCache=function(e){return!!t.get(e)};this.normalizeAppId=function(e){var t="-component",i=e.endsWith(t);if(i){return e.substring(0,e.length-t.length)}return e};this.onComponentCreated=function(e,i,n){var a=n.component,r=this.normalizeAppId(a.getId());if(this.isAppInCache(r)){t.get(r).app=a;this.active(r)}else{T.app=a;if(a.active){a.active()}}};this.onGetMe=function(e,t,i){i.AppLifeCycle=this};this.store=function(e){var i=t.get(e);if(i){a.store(i);o.store(i.meta);i.stateStored=true}};this.destroy=function(e,n,r){var l=t.get(e),p,u;function f(){if(n&&n.getUrl){i.deleteStateFul(n.getUrl())}a.destroy(n);s.destroy(n);o.destroy(n)}this.removeControl(e);if(l){p=i.getStateFul(n.getUrl());if(p&&i.isStatefulContainerSupported(p)){var c=i.getHandler();u=c.destroy(p,e)}else{l.container.destroy();i.deleteStateFul(n.getUrl());u=Promise.resolve()}t.remove(e);if(r){u.then(r.resolve)}}else{var h=n&&n.sendBeforeAppCloseEvent&&n.sendBeforeAppCloseEvent();if(h===undefined){f();if(r){r.resolve()}}else{h.then(function(){f();if(r){r.resolve()}},function(e){f();if(r){r.resolve()}d.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",e,"sap.ushell.components.applicationIntegration.AppLifeCycle.js")})}}};this.restore=function(e){var i=t.get(e);if(i&&i.stateStored===true){a.restore(i);r.restore(i.service);o.restore(i.meta)}};this.active=function(e){var i=t.get(e);if(i){a.active(i.app)}};this.handleExitStateful=function(e,n,a){var s,o=i.getHandler();if(t.get(e)){s=i.getStorageKey(n);if(r.isBackNavigation()===true&&!a){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",n);t.remove(s);return o.destroy(n)}else{sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",n);return o.store(n,s)}}return o.destroy(n)};this.handleExitApplication=function(e,n,s,o,l){var p=this,u,f,c;if(s&&o&&o.getIframeReusedForApp&&o.getIframeReusedForApp()===true){o.setProperty("iframeReusedForApp",false,true);a.postMessageToIframeApp(o,"sap.ushell.sessionHandler","afterApplicationShow",{},false)}if(e&&n){if(n.getUrl()&&i.isStatefulContainerSupported(i.getStateFul(n.getUrl()))){f=this.handleExitStateful(e,n,l)}else if(t.get(e)){if(r.isBackNavigation()===true&&!l){c=new jQuery.Deferred;this.destroy(e,n,c);f=c.promise()}else{this.store(e)}sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",n)}else if(n.getIsStateful&&n.getIsStateful()){if(l){f=n.postMessageRequest("sap.gui.triggerCloseSessionImmediately")}}else{u=A.indexOf(n.getApplicationType)>=0;if(this.isAppOfTypeCached(e,u)===false){c=new jQuery.Deferred;this.destroy(e,n,c);f=c.promise()}}if(l===true){if(f===undefined){this.closeKeepAliveApps(x)}else{f.then(function(){p.closeKeepAliveApps(x)})}}if(e.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate")}}sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");if(f===undefined){f=(new jQuery.Deferred).resolve().promise()}return f};function x(e){return e.value.keepAliveMode===B.RESTRICTED}this.closeKeepAliveApps=function(e,i){try{var n=this,a=[];t.forEach(function(t){if(e.apply(this,[t])===true){a.push(t.value)}});a.forEach(function(e){var t;if(i){t=new jQuery.Deferred;i.push(t.promise())}n.destroy(e.appId,e.container,t)})}catch(e){d.error("Error: sap.ushell.services.appLifeCycle.closeOtherKeepAliveRestrictedApps:"+e)}};this.onBeforeNavigate=function(e,n,r,s){if(e&&n){if(n.getUrl()&&(i.isStatefulContainerSupported(i.getStateFul(n.getUrl()))||t.get(e)||n.getIsStateful&&n.getIsStateful())){a.postMessageToIframeApp(n,"sap.ushell.sessionHandler","beforeApplicationHide",{},false)}}};this.onAfterNavigate=function(e,i,n,r){var s=n.indexOf("Shell-appfinder-component")>0||n.indexOf("Shell-home-component")>0||n.indexOf("pages-component-container")>0||n.indexOf("homeApp-component-container")>0||n.indexOf("workPageRuntime-component-container")>0||n.indexOf("runtimeSwitcher-component-container")>0;this.handleExitApplication(e,i,n,r,s);if(s===true){a.setActiveAppContainer(undefined)}if(n){if(t.get(n)){this.restore(n)}else{}}};this.storeApp=function(e,n,a,r,o){if(!this.isAppInCache(e)){if(n.setProperty){n.setProperty("isKeepAlive",true,true)}t.set(e,{service:{},shellHash:r,appId:e,stt:"loading",appRelatedElements:s.getAppRelatedElement(),container:n,meta:l.getMetadata(a),app:undefined,keepAliveMode:o&&(o.globalValue||o.paramValue),appTarget:a,ui5ComponentName:a&&a.ui5ComponentName,enableRouterRetrigger:true,stateStored:false});b[r]=e;i.setStorageKey(n,e);return true}return false};this.restoreApp=function(e){if(this.isAppInCache(e)){T=t.get(e);if(i.getStorageKey(T.container)){i.setStorageKey(T.container,e)}}};this.isAppOfTypeCached=function(e,t,i){var n;if(!E&&e.indexOf(y)!==-1){return true}if(!E&&e.indexOf("Shell-appfinder")!==-1){return true}n=new h(window.location.href).get("sap-keep-alive");if(n===B.FULL||n===B.RESTRICTED){if(i){i.globalValue=n}return true}return false};this.isCachedEnabledAsAppParameter=function(e,t,i){var n;n=e&&e.params&&e.params["sap-keep-alive"];if(n===B.FULL||n===B.RESTRICTED){if(i){i.paramValue=n}return true}if(t&&t.url){n=new h(t.url).get("sap-keep-alive");if(n===B.FULL||n===B.RESTRICTED){if(i){i.paramValue=n}return true}}return false};this.calculateAppType=function(e){if(e.applicationType==="URL"&&e.additionalInformation&&e.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5"}return e.applicationType};this.getStatefulCapabilities=function(e){if(e.appCapabilities&&e.appCapabilities&&e.appCapabilities.statefulContainer){return e.appCapabilities.statefulContainer}return undefined};this.isNotifyInnerAppRouteChangeEnabled=function(e){if(e.appCapabilities&&e.appCapabilities.notifyInnerAppRouteChange){return true}return false};this.isStatefulCapabilityEnabled=function(e){var t=this.getStatefulCapabilities(e);if(t&&(t.enabled===true||t===true)){return true}return false};this.isGUICapabilityEnabled=function(e){var t=this.getStatefulCapabilities(e);if(t&&t.protocol==="GUI"){return true}return false};this.isFLPCapabilityEnabled=function(e){return!this.isGUICapabilityEnabled(e)&&this.isStatefulCapabilityEnabled(e)};this.isGUIStatefulCapabilityEnabled=function(e){return this.isGUICapabilityEnabled(e)&&this.isStatefulCapabilityEnabled(e)};this.openApp=function(e,t,n,a){var r,s,o=A.indexOf(t.applicationType)>=0,p,u,f={globalValue:undefined,paramValue:undefined};var c="application"+e;r=i.getStateFul(t.url);if(r&&i.isStatefulContainerSupported(r)){if(this.isAppOfTypeCached(c,o,f)||this.isCachedEnabledAsAppParameter(n,t,f)){if(!this.isAppInCache(c)){this.storeApp(c,r,t,a,f)}this.restoreApp(c)}else{T={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}}else if(this.isAppOfTypeCached(c,o,f)||this.isCachedEnabledAsAppParameter(n,t,f)){if(!this.isAppInCache(c)){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u)}r=this.createApplicationContainer(e,t);this.storeApp(c,r,t,a,f);i.set(t.url,r)}this.restoreApp(c)}else if(t.applicationType==="TR"||t.appCapabilities&&t.appCapabilities.appFrameworkId==="GUI"){r=this.getWebGuiV1StatefulContainer(t.url);if(n){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p&&(!r||p!==r)){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u);this.removeWebGuiV1StatefulContainer(p)}}if(!r){r=this.createApplicationContainer(e,t);i.set(t.url,r)}T={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}else{if(r){s=n.semanticObject+"-"+n.action;this.removeApplication(s)}else if(t.applicationType==="URL"||t.applicationType==="TR"||t.applicationType==="NWBC"){s=n.semanticObject+"-"+n.action;p=i.getById("application-"+s)||this.getControl(s);if(p){u=p.getUrl();i.removeCapabilities(p);this.destroy("application-"+s,p);i.deleteStateFul(u)}}r=this.createApplicationContainer(e,t);i.set(t.url,r);if(i.isCapUT(r,"isFLP")){i.setCapabilities(r,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}])}T={appId:c,stt:"loading",container:r,meta:l.getMetadata(t),app:undefined}}};this.getAppMeta=function(){return o};this.evict=function(e){var t,n=e.value,a=e.key;this.removeControl(a);if(n.container.getUrl&&n.container.getUrl()){t=i.getStateFul(n.container.getUrl())}if(t){var r=i.getHandler();r.destroy(t,a)}else{n.container.destroy()}};this.addEvents=function(){var e=false;return function(){if(!e){e=true;var i=this;g.on("disableKeepAliveRestoreRouterRetrigger").do(function(e){var i=e.intent.semanticObject+"-"+e.intent.action;var n="application-"+i;if(t.get(n)){t.get(n).enableRouterRetrigger=e.disable}});g.on("setApplicationFullWidth").do(function(e){i.setApplicationFullWidth(e.bValue)})}}}();this.init=function(e,a,r,l,p,f,c){var h=this,g;if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getServiceAsync("AppState").then(function(e){var t=e.getPersistentWhenShared();if(t===true){O=L.triggerEmail.bind(L);L.triggerEmail=function(t,i,n,a,r){var s=document.URL;e.setAppStateToPublic(s).done(function(e,s,o,l,p){i=i&&s&&l&&i.includes(s)?i.replace(s,l):i;i=i&&o&&p&&i.includes(o)?i.replace(o,p):i;n=n&&s&&l&&n.includes(s)?n.replace(s,l):n;n=n&&o&&p&&n.includes(o)?n.replace(o,p):n;O(t,i,n,a,r)}).fail(function(e,t,i,n,a){O(e,t,i,n,a)})}}})}if(u.system.phone){g=10;if(c&&c.limit&&c.limit.phone){g=c.limit.phone}}else if(u.system.tablet){g=10;if(c&&c.limit&&c.limit.tablet){g=c.limit.tablet}}else if(u.system.desktop){g=15;if(c&&c.limit&&c.limit.desktop){g=c.limit.desktop}}else{g=10}S=new n({scopeObject:p.ownerComponent,scopeType:"component"});I=e;v=a;y=r;o.init(y);E=l;i.init({oShellUIService:S},c,this);t.init(g,function(e){this.evict(e)}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{create:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){d.info("sap.ushell.services.appLifeCycle.create:"+e)}).catch(function(e){d.error("Error: sap.ushell.services.appLifeCycle.create:"+e)})}},destroy:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){d.info("sap.ushell.services.appLifeCycle.destroy:"+e)}).catch(function(e){d.error("Error: sap.ushell.services.appLifeCycle.destroy:"+e)})}},store:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){d.info("sap.ushell.services.appLifeCycle.store:"+e)}).catch(function(e){d.error("Error: sap.ushell.services.appLifeCycle.store:"+e)})}},restore:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(e){e.then(function(e){d.info("sap.ushell.services.appLifeCycle.restore:"+e)}).catch(function(e){d.error("Error: sap.ushell.services.appLifeCycle.restore:"+e)})}}},oServiceCalls:{subscribe:{executeServiceCallFn:function(e){i.mapCapabilities(e.oContainer,e.oMessageData.body);return(new jQuery.Deferred).resolve({}).promise()}},setup:{executeServiceCallFn:function(e){var t=e.oMessageData&&e.oMessageData.body,n=[],a=e.oContainer.getApplicationType(),r=e.oContainer.getFrameworkId(),s=false;if(t){if(e.oContainer.getIsKeepAlive()===true&&(a==="GUI"||a==="TR"||a==="NWBC"||a==="WDA"||a==="WCF"||r==="GUI"||r==="WDA"||r==="NWBC"||r==="WCF")){s=true}if(t.isStateful===true&&!s){n.push({action:"create",service:"sap.ushell.services.appLifeCycle"});n.push({action:"destroy",service:"sap.ushell.services.appLifeCycle"})}if(t.isIframeValid===true){n.push({action:"iframeIsValid",service:"sap.ushell.appRuntime"})}if(t.isIframeBusy===true){n.push({action:"iframeIsBusy",service:"sap.ushell.appRuntime"})}if(t.session&&t.session.bLogoutSupport===true){n.push({action:"logout",service:"sap.ushell.sessionHandler"})}if(n.length>0){i.mapCapabilities(e.oContainer,n)}}return(new jQuery.Deferred).resolve().promise()}}}},"sap.gui":{oServiceCalls:{loadFinished:{executeServiceCallFn:function(e){var t=e.oContainer.getApplicationType(),i=e.oContainer.getFrameworkId();if((t==="GUI"||t==="TR"||t==="NWBC"||i==="GUI"||i==="NWBC")&&e.oContainer.getIsKeepAlive()===false){h.setWebGuiV1StatefulContainer(e.oContainer);e.oContainer.setIsStateful(true);T={appId:e.oContainer.getId(),stt:"loading",container:e.oContainer,meta:undefined,app:undefined}}return(new jQuery.Deferred).resolve({}).promise()}}}}});sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);s.init(this.getElementsModel(),f);this.addEvents()};this.addControl=function(e){v.addCenterViewPort(e)};this.removeControl=function(e){var t=i.getById(e),n=i.isStatefulContainerSupported(t);if(!n){v.removeCenterViewPort(e,true)}};this.removeApplication=function(e){var t=this.getControl(e);if(t){this.removeControl(t.getId());t.destroy()}};this.getControl=function(e){return v&&(v.getViewPortControl("centerViewPort","application-"+e)||v.getViewPortControl("centerViewPort","applicationShellPage-"+e))};this.getViewPortContainer=function(){return v};this.navTo=function(e){v.navTo("centerViewPort",e,"show")};this.getCurrentApplication=function(){return T};this.setApplicationFullWidth=function(e){var t=this.getCurrentApplication();if(t.container){t.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e)}};this.createComponent=function(e,t){function i(t){return t.value.ui5ComponentName===e.ui5ComponentName}var n=[],r=new jQuery.Deferred;this.shellElements().setDangling(true);this.closeKeepAliveApps(i,n);Promise.all(n).then(function(){a.createComponent(e,t).done(r.resolve).fail(r.reject)});return r.promise()};this.getAppContainer=function(e,t,i,n,a){t.shellUIService=S.getInterface();t.targetNavigationMode=i?"explace":"inplace";this.openApp(e,t,n,a);if(w.length>0){T.container.registerShellCommunicationHandler(w)}if(F.UI5APP){T.container.setIframeHandlers(F.UI5APP)}return T.container};this.getShellUIService=function(){return S};this.initShellUIService=function(e){S._attachHierarchyChanged(o.onHierarchyChange.bind(this));S._attachTitleChanged(o.onTitleChange.bind(this));S._attachRelatedAppsChanged(o.onRelatedAppsChange.bind(this));S._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this))};this.getElementsModel=function(){return e};this.activeContainer=function(e){var t=this.getWebGuiV1AllApplicationContainers();t.forEach(function(e){d.info("Deactivating container "+e.getId());e.setActive(false)});i.forEach(function(t){if(t&&t!==e){try{d.info("Deactivating container "+t.getId());t.setActive(false)}catch(e){}}});if(e){d.info("Activating container "+e.getId());e.setActive(true)}};this.showApplicationContainer=function(e){this.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{e.toggleStyleClass("hidden",false)}a.setActiveAppContainer(e);d.info("New application context opened successfully in an existing transaction UI session.")};this.reuseStateFulContainerAndRestore=function(e,t,n,a,r){var s=this,o=b[a];if(i.getStorageKey(e)){i.setStorageKey(e,o)}return n.restore(e,o,r).then(function(){s.showApplicationContainer(e)},function(e){d.error(e&&e.message||e)})};this.reuseStateFulContainer=function(e,t,n,a,r,s){var o=this;b[r]=n;if(i.getStorageKey(e)){i.setStorageKey(e,n)}this.initAppMetaParams();return a.create(e,t,n,s).then(function(){o.showApplicationContainer(e)},function(e){d.error(e&&e.message||e)})};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){S.setHierarchy()}if(!this.getAppMeta().getIsTitleChanged()){S.setTitle()}if(!this.getAppMeta().getIsRelatedAppsChanged()){S.setRelatedApps()}if(!P){S.setBackNavigation()}};this.reuseApplicationContainer=function(e,t,i){var n=this;e.setProperty("iframeReusedForApp",true,true);return e.setNewApplicationContext(t,i).then(function(){n.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}else{e.toggleStyleClass("hidden",false)}d.info("New application context opened successfully in an existing transaction UI session.")},function(e){d.error(e&&e.message||e)})};this.createApplicationContainer=function(e,t){return a.createApplicationContainer(e,t)};this.publishNavigationStateEvents=function(e,t,i){var n,a=e.getId?e.getId():"",r=this;var s=l.getMetadata(),o=s.icon,p=s.title;e.addEventDelegate({onAfterRendering:i});n=e.exit;e.exit=function(){if(n){n.apply(this,arguments)}r.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var e=jQuery.extend(true,{},t);delete e.componentHandle;e.appId=a;e.usageIcon=o;e.usageTitle=p;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",e);d.info("app was closed")},0);var e=r._publicEventDataFromResolutionResult(t);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",e)}};this._publicEventDataFromResolutionResult=function(e){var t={};if(!e){return e}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(i){t[i]=e[i]});Object.freeze(t);return t};this.getInMemoryInstance=function(e,i,n,a){var r="application-"+e,s=t.get(r),o="",l=false,p;if(s){if(a!==null&&a!==undefined&&a!==""){o=a.toLowerCase();l=o.indexOf("shell-home")>=0||o.indexOf("launchpad-openflppage")>=0||o.indexOf("launchpad-openworkpage")>=0||o.indexOf("shell-appfinder")>=0}p=l&&(typeof n==="string"&&n.length>0);if(s.shellHash===i&&!p){return{isInstanceSupported:true,appId:s.appId,container:s.container}}return{isInstanceSupported:false,appId:s.appId,container:s.container}}return{isInstanceSupported:false,appId:undefined,container:undefined}};this.handleOpenStateful=function(e,n,a,r,s,o,l){var p=i.getHandler(),u;r.setProperty("iframeReusedForApp",true,true);if(t.get(a)&&e===false){u=this.reuseStateFulContainerAndRestore(r,a,p,o,s)}else{u=this.reuseStateFulContainer(r,s.url,a,p,o,s);if(n){if(!this.isAppInCache(a)){this.storeApp(a,r,s,o,l)}}}return u};this.handleControl=function(e,n,a,s,o,u,f){var h=this,g,m,y=A.indexOf(s.applicationType)>=0,S="application-"+e,I,b,E,R=false,U,w,F,P=new jQuery.Deferred,B,O,L,x,W,M=(new jQuery.Deferred).resolve().promise(),D={globalValue:undefined,paramValue:undefined},H,V,N,k;W=i.getStateFul(s.url);if(W&&i.isStatefulContainerSupported(W)){H=(new Date).getTime()-W.getIsIframeValidTime().time;if(i.isIframeBusySupported(W)&&W.getIsIframeBusy()===true||i.isIframeIsValidSupported(W)&&H>=3500){d.warning("Destroying statefull container iframe due to unresponsiveness ("+W.getId()+")","reason: "+(W.getIsIframeBusy()===true?"iframe is still creating a different app":"no ping from the iframe in the last '"+H+"' ms"),"sap.ushell.components.applicationIntegration.AppLifeCycle");i.removeCapabilities(W);this.destroy(S,W);i.deleteStateFul(s.url);W=undefined;f=undefined}}if(typeof f==="string"){V=C.parseShellHash(f);if(V){N="application-"+V.semanticObject+"-"+V.action;x=t.get(N)}if(x){L=x.container}else{k=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined;if(k){L=sap.ui.getCore().byId(k)}}}m=L?i.isStatefulContainerSupported(L):false;if(L&&L===W&&m){if(x){r.store(x.service)}M=this.handleExitApplication(N,L,undefined,undefined,false)}M.then(function(){b=h.isAppOfTypeCached(S,y,D)||h.isCachedEnabledAsAppParameter(a,s,D);E=h.calculateAppType(s);U=c.getDefaultFullWidthSetting(E);g=i.getStateFul(s.url);m=i.isStatefulContainerSupported(g);if(!m){if(T&&S!==T.appId){g=undefined}I=t.get("application"+n);if(I){g=I.container;if(!m&&b&&g!==undefined){w=true}}}var r,f;r=s.appCapabilities&&s.appCapabilities.fullWidth;O=l.getMetadata(s);if(U===true){if(s.fullWidth===false||s.fullWidth==="false"||O.fullWidth===false||O.fullWidth==="false"||r===false){f=false}}else if(s.fullWidth===true||s.fullWidth==="true"||O.fullWidth===true||O.fullWidth==="true"){f=true}if(f===undefined){f=U}if(m){if(!g){g=o(e,O,a,s,n,f,u);h.restoreApp(g.getId());h.navTo(g.getId());R=true}}else if(!h.isWebGuiV1StatefulContainer(s.url)&&g&&!b){F=new jQuery.Deferred;h.destroy(g.getId(),g,F);F.then(function(){g=o(e,O,a,s,n,f,u)})}else if(!g){g=o(e,O,a,s,n,f,u)}if(F===undefined){F=(new jQuery.Deferred).resolve()}if(g&&g.getDeffedControlCreation){B=g.getDeffedControlCreation()}else{B=Promise.resolve()}F.then(function(){B.then(function(){if(!h.isWebGuiV1StatefulContainer(s.url)&&!m){if(w===true){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",s)}h.restoreApp(g.getId());h.navTo(g.getId());if(w===true){h.initAppMetaParams();sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",s)}}var e=(new jQuery.Deferred).resolve().promise();if(m){e=h.handleOpenStateful(R,b,"application"+n,g,s,u,D)}else if(h.isWebGuiV1StatefulContainer(s.url)){e=h.reuseApplicationContainer(g,"TR",s.url)}e.then(function(){v.switchState("Center");p.setPerformanceMark("FLP -- centerViewPort");h.activeContainer(g);P.resolve()})})})});return P.promise()};this.switchViewState=function(i,n,a){var r=i,o;if(R[i]&&R[i][I]){r=R[i][I]}var l=f.last("/core/shell/model/currentState/stateName")==="home";if(!l&&(!T.appId||!t.get(T.appId))){e.destroyManageQueue()}o=t.get("application"+a);if(o){s.restore(o)}else{s.assignNew(i)}e.switchState(r,n,a);this.shellElements().setDangling(false);this.shellElements().processDangling();if(i==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var p=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+p.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(p.getProperty("/uiFilter/dataSource").getJson()))}}};this.registerShellCommunicationHandler=function(e){a.registerShellCommunicationHandler(e)};this.registerIframeCommunicationHandler=function(e,t){F[t]=e};this.postMessageToIframeApp=function(e,t,n,r){function s(i){if(e==="sap.ushell.sessionHandler"&&t==="logout"){if(i&&i.getApplicationType&&",WCF,GUI,TR,WDA,".indexOf(i.getApplicationType())>0){return false}}return true}var o,l=a.getActiveAppContainer(),p=false,u=[];if(i.hasIFrame(l)&&(i.isCapabilitySupported(l,e,t)||a.isAppTypeSupported(l,e,t))&&s(l)===true){u.push(a.postMessageToIframeApp(l,e,t,n,r));p=true}if(!a.isActiveOnly(e,t)){i.forEach(function(o){if(p===true&&o===l){return}if(i.hasIFrame(o)){if((i.isCapabilitySupported(o,e,t)||a.isAppTypeSupported(o,e,t))&&s(o)===true){u.push(a.postMessageToIframeApp(o,e,t,n,r))}}})}o=a.getResponseHandler(e,t);var f=Promise.all(u);if(o){o(f)}return f};this.postMessageToIframeAppAccordingToPolicy=function(e,t,n,r,s){var o,l=a.getActiveAppContainer(),p=[];if(i.hasIFrame(l)&&a.isAppTypeSupportedByPolicy(l,s)){p.push(a.postMessageToIframeApp(l,e,t,n,r))}if(!s.isActiveOnly){i.forEach(function(s){if(i.hasIFrame(s)){if(i.isCapabilitySupported(s,e,t)||a.isAppTypeSupported(s,e,t)){p.push(a.postMessageToIframeApp(s,e,t,n,r))}}})}o=a.getResponseHandler(e,t);var u=Promise.all(p);if(o){o(u)}return u};this.setBackNavigationChanged=function(e){P=e};this.getBackNavigationChanged=function(){return P};this.parseStatefulContainerConfiguration=function(){U={}};this.isWebGuiV1StatefulContainer=function(e){var t;if(e){t=i._getBlueBoxCacheKey(e);return U[t]!==undefined}else{return false}};this.getWebGuiV1StatefulContainer=function(e){var t;if(e){t=i._getBlueBoxCacheKey(e);return U[t]}else{return undefined}};this.setWebGuiV1StatefulContainer=function(e){var t=e.getUrl(),n;if(t){n=i._getBlueBoxCacheKey(t);U[n]=e}};this.removeWebGuiV1StatefulContainer=function(e){var t=e.getUrl(),n;if(t){n=i._getBlueBoxCacheKey(t);delete U[n]}};this.getWebGuiV1AllApplicationContainers=function(){return Object.keys(U).map(function(e){return U[e]}).filter(function(e){return!!e})}}return new v},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/Storage", [],function(){"use strict";function t(){var t,e;function i(t){this.size=0;if(typeof t=="number"){this.limit=t}else{this.limit=10}this.map={};this.head=null;this.tail=null}i.prototype.LRUnode=function(t,e){if(typeof t!="undefined"&&t!==null){this.key=t}if(typeof e!="undefined"&&e!==null){this.value=e}this.prev=null;this.next=null};i.prototype.setHead=function(t){t.next=this.head;t.prev=null;if(this.head!==null){this.head.prev=t}this.head=t;if(this.tail===null){this.tail=t}this.size++;this.map[t.key]=t};i.prototype.set=function(t,n){var s=new i.prototype.LRUnode(t,n);if(this.map[t]){this.map[t].value=s.value;this.remove(s.key)}else if(this.size>=this.limit){var h=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(h)}}this.setHead(s)};i.prototype.get=function(t){if(this.map[t]){var e=this.map[t].value;var n=new i.prototype.LRUnode(t,e);this.remove(t);this.setHead(n);return e}else{return null}};i.prototype.remove=function(t){var e=this.map[t];if(e.prev!==null){e.prev.next=e.next}else{this.head=e.next}if(e.next!==null){e.next.prev=e.prev}else{this.tail=e.prev}delete this.map[t];this.size--};i.prototype.removeAll=function(t){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof t=="number"){this.limit=t}};i.prototype.forEach=function(t){var e=this.head,i=0;while(e){t.apply(this,[e,i,this]);i++;e=e.next}};i.prototype.toJSON=function(){var t=[],e=this.head;while(e){t.push({key:e.key,value:e.value});e=e.next}return t};i.prototype.toString=function(){var t="",e=this.head;while(e){t+=String(e.key)+":"+e.value;e=e.next;if(e){t+="\n"}}return t};this.init=function(n,s){t=new i(n);e=s};this.get=function(e){return t.get(e)};this.set=function(e,i){t.set(e,i)};this.remove=function(e){t.remove(e)};this.forEach=function(e){t.forEach(e)};this.length=function(){return t.size}}return new t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/Application", ["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/UI5ComponentType","sap/base/Log","sap/base/util/ObjectPath"],function(e,t,r,jQuery,i,n,a,s){"use strict";var o,p,l=e.getMetadata().getJSONKeys();function u(){var i=this;this.handleMessageEvent=function(t,n,s){var o=n.data;if(typeof o==="string"){try{o=JSON.parse(n.data)}catch(e){a.debug("Message received from origin '"+n.origin+"' cannot be parsed: "+e,o,"sap.ushell.components.container.ApplicationContainer");return}}if(o.action==="pro54_setGlobalDirty"&&localStorage.getItem(t.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!e.prototype._isTrustedPostMessageSource(t,n)){a.warning("Received message from untrusted origin: "+n.origin,o,"sap.ushell.components.container.ApplicationContainer");return}a.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+t.globalDirtyStorageKey+" value: "+o.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");r.localStorageSetItem(t.globalDirtyStorageKey,o.parameters.globalDirty,true)}else{i.handleServiceMessageEvent(t,n,o,s)}};this.handleServiceMessageEvent=function(i,n,o,p){var l=s.get("sap-ushell-config.services.PostMessage.config")||s.create("sap-ushell-config.services.PostMessage.config"),u=o&&o.service,c,g,f,d,v=false,h=t.getAPIs(),y;a.debug("Received post message request from origin '"+n.origin+"': "+JSON.stringify(o),null,"sap.ushell.components.container.ApplicationContainer");if(o.type!=="request"||!u){return}for(var m in h){if(h.hasOwnProperty(m)){if(u.indexOf(m)!==-1){g=h[m];f=m;v=true;break}}}if(v===false){if(p.bPluginsStatusChecked===false||p.bKeepMessagesForPlugins===true){p.bApiRegistered=false}else{S("error",{code:-1,message:"Unknown service name: '"+o.service+"'"})}return}y=u.indexOf("user.postapi.")===0;c=u.split(".")[3];if(l&&l.enabled===false){a.warning("Received message for "+c+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return}if(!e.prototype._isTrustedPostMessageSource(i,n)){a.warning("Received message from untrusted origin '"+n.origin+"': "+JSON.stringify(n.data),null,"sap.ushell.components.container.ApplicationContainer");return}function b(e,t){var r;if(t===true){r={oMessage:n,oMessageData:o}}else{r={matchesLocalSid:I,getLocalSystemInSidForma:R,storeSapSystemData:C,executeSetBackNavigationService:A,sendResponseMessage:S,oMessage:n,oMessageData:o,oContainer:i}}try{e(r).done(function(e){S("success",{result:e})}).fail(function(e){S("error",{message:e})})}catch(e){S("error",{message:e.message})}}function S(e,t){var r=JSON.stringify({type:"response",service:o.service,request_id:o.request_id,status:e,body:t});a.debug("Sending post message response to origin ' "+n.origin+"': "+r,null,"sap.ushell.components.container.ApplicationContainer");if(typeof n.source!=="object"||n.source===null){a.debug("Cannot send response message to origin ' "+n.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return}n.source.postMessage(r,n.origin)}function A(t,r){var n=new jQuery.Deferred,a;if(r.body&&r.body.callbackMessage&&r.body.callbackMessage.service){a=e.prototype._backButtonPressedCallback.bind(null,t.source,r.body.callbackMessage.service,t.origin)}n.resolve(i.getShellUIService().setBackNavigation(a));return n.promise()}function C(e,t){var i,n,s,o=[e.id];if(arguments.length>1){o.unshift(t)}try{s=JSON.stringify(e)}catch(e){a.error("Cannot stringify and store expanded system data: "+e)}if(s){n=r.getLocalStorage();i=r.generateLocalStorageKey("sap-system-data",o);n.setItem(i,s)}}function R(){var e=sap.ushell.Container.getLogonSystem();var t=e.getName();var r=e.getClient();return"sid("+t+"."+r+")"}function I(e){return R().toLowerCase()===e.toLowerCase()}d=g.oServiceCalls[o.service.replace(f+".","")];if(d&&d.executeServiceCallFn){b(d.executeServiceCallFn,y)}else{S("error",{code:-1,message:"Unknown service name: '"+o.service+"'"})}};this.init=function(e){p=e};this.restoreArray=function(e){var t=[],r=0;while(e[r]){t.push(e[r]);r++}return t};this._createWaitForRendererCreatedPromise=function(){var e,t;t=sap.ushell.Container.getRenderer();if(t){a.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[]}e=new Promise(function(e,r){var i;i=function(){a.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(i)};t=sap.ushell.Container.getRenderer();if(t){a.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e()}else{sap.ushell.Container.attachRendererCreatedEvent(i)}});return[e]};this.createComponent=function(e,t){var r=this,i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(a){a.createComponent(e,t,r._createWaitForRendererCreatedPromise(),n.Application).then(i.resolve,i.reject)});return i.promise()};this.stripURL=function(e){var t=e.indexOf("?"),r=e.indexOf("#"),i;if(t>=0){i=e.substr(0,t)}else if(r>=0){i=e.substr(0,r)}else{i=e}return i};this.createApplicationContainer=function(t,r){var i={};this._cleanTargetResolution(r,i);o=new e("application"+t,r);this._restoreTargetResolution(r,i);if(r.appCapabilities){o.setProperty("frameworkId",r.appCapabilities.appFrameworkId,true)}o.setHandleMessageEvent(this.handleMessageEvent);p.setAppCapabilities(o,r);return o};this.active=function(e){if(e){if(e.active){e.active()}}};this.restore=function(e){var t;if(e.container&&e.container._getIFrame&&e.container._getIFrame()!=undefined){this.postMessageToIframeApp(e.container,"sap.ushell.appRuntime","keepAliveAppShow",{},false)}if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveActivate",e.appTarget);if(e.app.getUrl){t=e.app.getUrl();o=p.get(this.stripURL(t));if(o){p.restoreApp(o.sApplication)}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.activate()}else{if(e.app.restore){e.app.restore()}if(e.app.getRouter&&e.app.getRouter()&&e.app.getRouter().initialize){if(e.enableRouterRetrigger===false){e.app.getRouter().initialize()}else{e.app.getRouter().initialize(true)}}if(e.app.setInitialConfiguration){e.app.setInitialConfiguration()}}o=e.app}};this.store=function(e){var t;if(e.container&&e.container._getIFrame&&e.container._getIFrame()!=undefined){this.postMessageToIframeApp(e.container,"sap.ushell.appRuntime","keepAliveAppHide",{},false)}if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveDeactivate",e.appTarget);if(e.app.getUrl){t=e.app.getUrl();o=p.get(this.stripURL(t));if(o){p.storeApp(o.sApplication)}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.deactivate()}else{if(e.app.suspend){e.app.suspend()}if(e.app.getRouter&&e.app.getRouter()){e.app.getRouter().stop()}}}};this.destroy=function(e){var t,r,i=false;if(e){if(e.getUrl){t=e.getUrl();r=p.get(this.stripURL(t));if(p.isStatefulContainerSupported(r)){i=true;p.destroyApp(r.sApplication)}}if(e.destroy&&i===false){try{e.destroy()}catch(t){a.error("exception when trying to close sapui5 application with id '"+(e.sId||"<unknown>")+"'. This error must be fixed in order for FLP to operate properly.\n",t.stack,"sap.ushell.components.applicationIntegration.application.Application::destroy")}}}};this.setActiveAppContainer=function(e){o=e};this.getActiveAppContainer=function(){return o}}u.prototype._cleanTargetResolution=function(e,t){var r;if(e){for(r in e){if(l[r]===undefined){t[r]=e[r];delete e[r]}}}};u.prototype._restoreTargetResolution=function(e,t){var r;if(e){for(r in t){e[r]=t[r]}}};u.prototype.getResponseHandler=function(e,r){return t.getResponseHandler(e,r)};u.prototype.isActiveOnly=function(e,r){return t.isActiveOnly(e,r)};u.prototype.isAppTypeSupported=function(e,r,i){var n=t._getPostMesageInterface(r,i);return this.isAppTypeSupportedByPolicy(e,n)};u.prototype.isAppTypeSupportedByPolicy=function(e,t){if(e&&e.getAdditionalInformation&&e.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false}var r=t;if(!r||!r.distributionType){return false}if(r.distributionType.indexOf("all")>=0){return true}if(r.distributionType.indexOf("URL")>=0){return false}if(e.getApplicationType&&r.distributionType.indexOf(e.getApplicationType())>=0){return true}return false};u.prototype.postMessageToIframeApp=function(e,t,r,i,n){var a=t+"."+r,s=this.createPostMessageRequest(a,i);return this.postMessageToIframe(s,e,n)};u.prototype.createPostMessageRequest=function(e,t){var r=Date.now().toString();return{type:"request",request_id:r,service:e,body:t}};u.prototype.postMessageToIframe=function(e,t,r){var n=e.request_id,s=t._getIFrame();return new Promise(function(o,p){function l(t){var r;try{if(typeof t.data==="string"&&t.data.indexOf("{")===0){try{r=JSON.parse(t.data)}catch(e){r={}}}else{return}if(!r.request_id||n!==r.request_id){return}if(r.status==="success"){o(r)}else{p(r)}window.removeEventListener("message",l)}catch(r){o();a.warning("Obtained bad response from framework in response to message "+e.request_id);a.debug("Underlying framework returned invalid response data: '"+t.data+"'")}}var u=JSON.stringify(e);a.debug("Sending postMessage "+u+" to application container '"+t.getId()+"'");var c,g;if(!s){o()}else if(r){window.addEventListener("message",l,false);c=new i(t._getIFrameUrl(s));g=c.protocol()+"://"+c.host();s.contentWindow.postMessage(u,g)}else{c=new i(t._getIFrameUrl(s));g=c.protocol()+"://"+c.host();s.contentWindow.postMessage(u,g);o()}})};u.prototype.registerShellCommunicationHandler=function(e){t.registerShellCommunicationHandler(e)};u.prototype._getPostMesageInterface=function(e,r){return t._getPostMesageInterface(e,r)};return new u},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/BlueBoxHandler", ["sap/ushell/components/applicationIntegration/application/BlueBoxesCache","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/UriParameters","sap/base/security/encodeXML"],function(e,t,i,s,jQuery,a,p,r){"use strict";function n(){var s=this,a,p={isStateful:{handler:function(e,t){if(e&&(e.enabled===true||e===true)){return true}return false}},isGUI:{handler:function(e,t){if(e&&e.protocol==="GUI"){return true}return false}},isGUIStateful:{handler:function(e,t){return s.isCapUT(t,"isGUI")&&s.isCapUT(t,"isStateful")}},isFLP:{handler:function(e,t){return!s.isCapUT(t,"isGUI")&&s.isCapUT(t,"isStateful")}}},r={},n={},u={setup:function(e,t){},create:function(e,s,a,p){var n=new jQuery.Deferred,u,o;function l(){if(u){u["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);u["system-alias"]=e.getSystemAlias();o["sap-flp-params"]=u}sap.ui.getCore().getEventBus().publish("launchpad","appOpening",p);t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","create",o,true).then(function(){r[e].currentAppTarget=p;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",p);n.resolve()})}s=i.prototype._checkNwbcUrlAdjustment(e,p.applicationType,s);o={sCacheId:a,sUrl:s,sHash:window.hasher.getHash()};if(s.indexOf("sap-iframe-hint=GUI")>0||s.indexOf("sap-iframe-hint=WDA")>0){var f=[];var c=i.prototype._getParamKeys(s,f);if(c.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(c).then(function(e){u={};f.forEach(function(t,i){if(e[i][0]){u[t]=e[i][0]}});l()},function(){l()})})}else{u={};l()}}else{l()}return n.promise()},destroy:function(e,i){var s;sap.ushell.Container.setAsyncDirtyStateProvider(undefined);s=t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:i},true);s.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",r[e].currentAppTarget);r[e].currentAppTarget=undefined});return s},store:function(e,i){var s;sap.ushell.Container.setAsyncDirtyStateProvider(undefined);s=t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","store",{sCacheId:i},true);s.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",r[e].currentAppTarget);r[e].currentAppTarget=undefined});return s},restore:function(e,i,s){var a;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",s);a=t.postMessageToIframeApp(e,"sap.ushell.services.appLifeCycle","restore",{sCacheId:i,sUrl:s.url,sHash:window.hasher.getHash()},true);a.then(function(){r[e].currentAppTarget=s;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",s)});return a}},o=[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}];this.init=function(i,s,p){e.init();t.init(this);a=p;if(s){n=jQuery.extend(true,n,s.supportedTypes)}};this.isStatefulContainerSupported=function(e){var t=this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","destroy");return t};this.isKeepAliveSupported=function(e){var t=this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(e,"sap.ushell.services.appLifeCycle","restore");return t};this.isIframeIsValidSupported=function(e){return this.isCapabilitySupported(e,"sap.ushell.appRuntime","iframeIsValid")};this.isIframeBusySupported=function(e){return this.isCapabilitySupported(e,"sap.ushell.appRuntime","iframeIsBusy")};this.mapCapabilities=function(e,t){this.setCapabilities(e,t)};this.getCapabilities=function(e){return r[e].oCapMap};this.isCapabilitySupported=function(e,t,i){if(r[e]&&r[e].oCapMap&&r[e].oCapMap[t]){return!!r[e].oCapMap[t][i]}return false};this.setCapabilities=function(e,t){var i;if(!r[e]){this.initBlueBoxBD(e)}if(!r[e].oCapMap){r[e].oCapMap={}}i=r[e].oCapMap;Object.keys(t).forEach(function(e){var s=t[e],a;if(!i[s.service]){i[s.service]={}}a=i[s.service];a[s.action]=true});if(!e.getIsStateful()&&this.isStatefulContainerSupported(e)){e.setIsStateful(true)}};this.removeCapabilities=function(e){if(r[e]){r[e].oCapMap={};e.setIsStateful(false)}};this.hasIFrame=function(e){if(e&&e._getIFrame){return true}return false};this.initBlueBoxBD=function(e){r[e]={BlueBox:e}};this.setAppCapabilities=function(e,t){if(!r[e]){this.initBlueBoxBD(e)}r[e].currentAppTarget=t;r[e].appCapabilities=t.appCapabilities;if(t.appCapabilities&&t.appCapabilities.statefulContainer===true){this.setCapabilities(e,o)}};this.forEach=function(e){var t;for(t in r){if(r.hasOwnProperty(t)){e(r[t].BlueBox)}}};this.isCapByTarget=function(e,t){if(e.appCapabilities===undefined){return false}if(p[t]&&e&&e.appCapabilities){return p[t].handler(e.appCapabilities)}return e.appCapabilities[t]||false};this.isCapUT=function(e,t){var i=r[e];if(i===undefined||i.appCapabilities===undefined){return false}if(p[t]&&i){return p[t].handler(i.appCapabilities,e)}return i.appCapabilities[t]||false};this.setStorageKey=function(e,t){if(!r[e]){this.initBlueBoxBD(e)}r[e].sStorageKey=t};this.getStorageKey=function(e){if(!r[e]){return undefined}return r[e].sStorageKey};this.getHandler=function(){return u};this._getBlueBoxCacheKey=function(t){return e.getBlueBoxCacheKey(t)};this.deleteStateFul=function(e){return this.delete(e)};this.getStateFul=function(t){return e.get(t)};this.destroyApp=function(e){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:e})};this.openApp=function(e){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:e,sHash:window.hasher.getHash()})};this.storeApp=function(e){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:e,sHash:window.hasher.getHash()})};this.restoreApp=function(e){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:e,sHash:window.hasher.getHash()})};this.delete=function(t){var i=e.get(t);e.remove(t);if(i){delete r[i]}};this.get=function(t){return e.get(t)};this.getById=function(t){return e.getById(t)};this.set=function(t,i){e.add(t,i)}}return new n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/BlueBoxesCache", ["sap/ui/thirdparty/URI","sap/base/Log"],function(e,n){"use strict";var i={};function r(){i={}}function t(){return Object.keys(i).length}function a(e,n){var r=d(e);i[r]=n}function u(e){var n=d(e);if(i[n]){delete i[n]}}function f(e){if(e===undefined||t()===0){return undefined}var n=d(e);return n!==undefined?i[n]:undefined}function o(e){for(var n in i){if(i.hasOwnProperty(n)){var r=i[n];if(r.sId===e){return r}}}return undefined}function d(i){var r,t,a,u="",f="",o="",d;if(i===undefined||i===""||i==="../"){return i}try{r=new e(i);if(i.charAt(0)==="/"){t=window.location.origin}else{t=r.origin()}if(t===undefined||t===""){t=r.path();if(t===undefined||t===""){t=i}}a=r.query(true);if(a["sap-iframe-hint"]){u="@"+a["sap-iframe-hint"]}if(a["sap-ui-version"]){f="@"+a["sap-ui-version"]}if((u==="@GUI"||u==="@WDA"||u==="@WCF")&&a["sap-keep-alive"]){o="@"+a["sap-keep-alive"]+"-"+i.split("#")[0]}}catch(e){n.error("URL '"+i+"' can not be parsed: "+e,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");t=i}d=t+u+f+o;return d}return{init:r,getSize:t,add:a,remove:u,get:f,getById:o,getBlueBoxCacheKey:d}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/PostMessageAPI", ["sap/ushell/utils","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ui/thirdparty/URI","sap/base/util/deepExtend","sap/ushell/Config","sap/ushell/utils/UrlParsing"],function(e,t,jQuery,r,n,a,o,s,i,l,c,u){"use strict";var p="sap.ushell.";var d=new n;var g={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{hrefForExternal:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.hrefForExternalAsync(e.oMessageData.body.oArgs,undefined,true).then(t.resolve,t.reject)});return t.promise()}},getSemanticObjectLinks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents).then(t.resolve,t.reject)});return t.promise()}},isIntentSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.isIntentSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}},isNavigationSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.isNavigationSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}},backToPreviousApp:{executeServiceCallFn:function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.backToPreviousApp()});return(new jQuery.Deferred).resolve().promise()}},historyBack:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.historyBack(e.oMessageData.body.iSteps)});return(new jQuery.Deferred).resolve().promise()}},getAppStateData:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getAppStateData(e.oMessageData.body.sAppStateKey).then(t.resolve,t.reject)});return t.promise()}},toExternal:{executeServiceCallFn:function(t){var r=new jQuery.Deferred,n=l({},t.oMessageData.body.oArgs);e.storeSapSystemToLocalStorage(n);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal(n).then(r.resolve,r.reject)});return r.promise()}},registerBeforeAppCloseEvent:{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return(new jQuery.Deferred).resolve().promise()}},expandCompactHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.expandCompactHash(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.getDistinctSemanticObjects().then(e.resolve,e.reject)});return e.promise()}},getLinks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getLinks(e.oMessageData.body).then(t.resolve,t.reject)});return t.promise()}},getPrimaryIntent:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters).then(t.resolve,t.reject)});return t.promise()}},hrefForAppSpecificHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.hrefForAppSpecificHashAsync(e.oMessageData.body.sAppHash).then(t.resolve,t.reject)});return t.promise()}},isInitialNavigation:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.isInitialNavigationAsync().then(function(t){e.resolve(t)})});return e.promise()}},getAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.getAppState(d,e.oMessageData.body.sAppStateKey).done(function(e){delete e._oServiceInstance;t.resolve(e)})});return t.promise()}},setInnerAppRoute:{executeServiceCallFn:function(e){var t=u.parseShellHash(window.hasher.getHash()),r;if(t.appSpecificRoute===e.oMessageData.body.appSpecificRoute){return(new jQuery.Deferred).resolve().promise()}t.appSpecificRoute=e.oMessageData.body.appSpecificRoute;r="#"+u.constructShellHash(t);window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(r);window.hasher.disableBlueBoxHashChangeTrigger=false;return(new jQuery.Deferred).resolve().promise()}},setInnerAppStateData:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;f.prototype._createNewInnerAppState(e).then(t.resolve);return t.promise()}},resolveIntent:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(r){r.resolveIntent(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise()}},setBackNavigation:{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData)}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise()}},setHierarchy:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise()}},setRelatedApps:{executeServiceCallFn:function(e){return(new jQuery.Deferred).resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise()}},setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return(new jQuery.Deferred).resolve().promise()}},showShellUIBlocker:{executeServiceCallFn:function(e){h(e.oMessageData.body.bShow);return(new jQuery.Deferred).resolve().promise()}},getFLPUrl:{executeServiceCallFn:function(e){var t=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){t=true}return(new jQuery.Deferred).resolve(sap.ushell.Container.getFLPUrl(t)).promise()}},getShellGroupIDs:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.getShellGroupIDs(e.oMessageData.body?e.oMessageData.body.bGetAll:undefined).then(t.resolve,t.reject)});return t.promise()}},addBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},addBookmarkDialog:{executeServiceCallFn:function(e){sap.ui["require"](["sap/ushell/ui/footerbar/AddBookmarkButton"],function(e){var t=new e;t.firePress({})});return(new jQuery.Deferred).resolve().promise()}},getShellGroupTiles:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(r){r.getTilesByGroupId(e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},sendUrlAsEmail:{executeServiceCallFn:function(e){var t=c.last("/core/shellHeader/application").title;var r=t===undefined?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+t+"'";f.prototype._sendEmail("",r,document.URL,"","",document.URL,true);return(new jQuery.Deferred).resolve().promise()}},sendEmailWithFLPButton:{executeServiceCallFn:function(e){var t=c.last("/core/shellHeader/application").title;var r=t===undefined?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+t+"'";f.prototype._sendEmail("",r,document.URL,"","",document.URL,e.oMessageData.body.bSetAppStateToPublic);return(new jQuery.Deferred).resolve().promise()}},sendEmail:{executeServiceCallFn:function(e){f.prototype._sendEmail(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);return(new jQuery.Deferred).resolve().promise()}},processHotKey:{executeServiceCallFn:function(e){var t;try{t=new KeyboardEvent("keydown",e.oMessageData.body)}catch(a){var r=document.createEvent("KeyboardEvent"),n="";if(e.oMessageData.body.altKey){n+="Alt "}if(e.oMessageData.body.ctrlKey){n+="Control "}if(e.oMessageData.body.shiftKey){n+="Shift "}r.initKeyboardEvent("keydown",false,false,null,e.oMessageData.body.key,e.oMessageData.body.keyCode,n,0,false);t=r}document.dispatchEvent(t);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.Container":{oServiceCalls:{setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return(new jQuery.Deferred).resolve().promise()}},registerDirtyStateProvider:{executeServiceCallFn:function(e){if(e.oMessageData.body.bRegister){f.prototype.registerAsyncDirtyStateProvider(e)}else{f.prototype.deregisterAsyncDirtyStateProvider(e)}return(new jQuery.Deferred).resolve().promise()}},getFLPUrl:{executeServiceCallFn:function(e){var t=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){t=true}return(new jQuery.Deferred).resolve(sap.ushell.Container.getFLPUrl(t)).promise()}},getFLPConfig:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getFLPConfig().then(function(e){t.resolve(e)});return t.promise()}},getFLPPlatform:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getFLPPlatform().then(t.resolve);return t.promise()}},attachLogoutEvent:{executeServiceCallFn:function(e){sap.ushell.Container.attachLogoutEvent(function(){var t={type:"request",request_id:Date.now().toString(),service:"sap.ushell.appRuntime.executeLogoutFunctions",body:{}};return e.oContainer.postMessageToCurrentIframe(t,true)},true);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.AppState":{oServiceCalls:{getAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.getAppState(e.oMessageData.body.sKey).done(function(e){delete e._oServiceInstance;t.resolve(e)}).fail(function(e){delete e._oServiceInstance;t.resolve(e)})});return t.promise()}},_saveAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(t.resolve,t.reject)});return t.promise()}},_loadAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r._loadAppState(e.oMessageData.body.sKey).then(t.resolve,t.reject)});return t.promise()}},deleteAppState:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.deleteAppState(e.oMessageData.body.sKey).then(t.resolve,t.reject)});return t.promise()}},makeStatePersistent:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(t.resolve,t.reject)});return t.promise()}}},"sap.ushell.services.Bookmark":{oServiceCalls:{addBookmarkUI5:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){f.prototype._stripBookmarkServiceUrlForLocalContentProvider(e.oMessageData.body.oParameters,r);sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.vContainer,r.id).then(t.resolve,t.reject)})})});return t.promise()}},addBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(t.resolve,t.reject)});return t.promise()}},getShellGroupIDs:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(t){t.getShellGroupIDs().then(e.resolve,e.reject)});return e.promise()}},addCatalogTileToGroup:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData).then(t.resolve,t.reject)});return t.promise()}},countBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.countBookmarks(e.oMessageData.body.sUrl,r.id).then(t.resolve,t.reject)})})});return t.promise()}},deleteBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.deleteBookmarks(e.oMessageData.body.sUrl,r.id).then(t.resolve,t.reject)})})});return t.promise()}},updateBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters,r.id).then(t.resolve,t.reject)})})});return t.promise()}},getContentNodes:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Bookmark").then(function(t){t.getContentNodes().then(e.resolve,e.reject)});return e.promise()}},addCustomBookmark:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addCustomBookmark(e.oMessageData.body.sVizType,e.oMessageData.body.oConfig,e.oMessageData.body.vContentNodes,r.id).then(t.resolve,t.reject)})})});return t.promise()}},countCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.countCustomBookmarks(e.oMessageData.body.oIdentifier).then(t.resolve,t.reject)})})});return t.promise()}},updateCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.updateCustomBookmarks(e.oMessageData.body.oIdentifier,e.oMessageData.body.oConfig).then(t.resolve,t.reject)})})});return t.promise()}},deleteCustomBookmarks:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){e.oMessageData.body.oIdentifier.contentProviderId=r.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(r){r.deleteCustomBookmarks(e.oMessageData.body.oIdentifier).then(t.resolve,t.reject)})})});return t.promise()}},addBookmarkToPage:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(r){r.getCurrentApplication().getSystemContext().then(function(r){sap.ushell.Container.getServiceAsync("Bookmark").then(function(n){n.addBookmarkToPage(e.oMessageData.body.oParameters,e.oMessageData.body.sPageId,r.id).then(t.resolve,t.reject)})})});return t.promise()}}}},"sap.ushell.services.AppLifeCycle":{oServiceCalls:{getFullyQualifiedXhrUrl:{executeServiceCallFn:function(e){var t="",r="",n=new jQuery.Deferred,a=e.oMessageData.body.path;if(a!==""&&a!==undefined&&a!==null){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(e){e.getCurrentApplication().getSystemContext().then(function(e){r=e.getFullyQualifiedXhrUrl(a);var o="",s="",l="",c=sap.ushell.Container.getFLPUrl(true),u=new i(c);if(u.protocol()!==null&&u.protocol()!==undefined&&u.protocol()!==""){s=u.protocol()+"://"}if(u.hostname()!==null&&u.hostname()!==undefined&&u.hostname()!==""){o=u.hostname()}if(u.port()!==null&&u.port()!==undefined&&u.port()!==""){l=":"+u.port()}t=s+o+l+r;n.resolve(t)})})}return n.promise()}},getSystemAlias:{executeServiceCallFn:function(e){var t=e.oContainer.getSystemAlias();if(t===null||t===undefined){t=""}return(new jQuery.Deferred).resolve(t).promise()}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{setApplicationFullWidth:{executeServiceCallFn:function(e){a.setApplicationFullWidth(e.oMessageData.body.bValue);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.appRuntime":{oRequestCalls:{innerAppRouteChange:{isActiveOnly:true,distributionType:["all"]},keepAliveAppHide:{isActiveOnly:true,distributionType:["all"]},keepAliveAppShow:{isActiveOnly:true,distributionType:["all"]},hashChange:{isActiveOnly:true,distributionType:["URL"]},setDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},getDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},themeChange:{isActiveOnly:false,distributionType:["all"]},uiDensityChange:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{hashChange:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(e.oMessageData.body.newHash);window.hasher.disableBlueBoxHashChangeTrigger=false;var n=e.oMessageData.body.direction;if(n){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.fireEvent("hashReplaced",{hash:e.hashChanger.getHash(),direction:n});r.debug("PostMessageAPI.hashChange :: Informed by the Iframe, to change the "+"History direction property in FLP to: "+n);t.resolve()})}else{t.resolve()}return t.promise()}},iframeIsValid:{executeServiceCallFn:function(e){e.oContainer.setProperty("isIframeValidTime",{time:(new Date).getTime()},true);return(new jQuery.Deferred).resolve().promise()}},iframeIsBusy:{executeServiceCallFn:function(e){e.oContainer.setProperty("isIframeBusy",e.oMessageData.body.bValue,true);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{getThemeList:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.getThemeList().then(t.resolve,t.reject)});return t.promise()}},getLanguageList:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.getLanguageList().then(t.resolve,t.reject)});return t.promise()}},updateUserPreferences:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;if(e.oMessageData.body.language){sap.ushell.Container.getUser().setLanguage(e.oMessageData.body.language);sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){e.updateUserPreferences().then(function(){sap.ushell.Container.getUser().resetChangedProperty("language");t.resolve()},t.reject)})}else{t.resolve()}return t.promise()}},openThemeManager:{executeServiceCallFn:function(e){o.emit("openThemeManager",Date.now());return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{toExternal:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory)});return(new jQuery.Deferred).resolve().promise()}},toAppHash:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory)});return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(t){t.getDistinctSemanticObjects().then(e.resolve,e.reject)});return e.promise()}},expandCompactHash:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.expandCompactHash(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},resolveHashFragment:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.resolveHashFragment(e.oMessageData.body.sHashFragment).then(t.resolve,t.reject)});return t.promise()}},isNavigationSupported:{executeServiceCallFn:function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(r){r.isNavigationSupported(e.oMessageData.body.aIntents).then(t.resolve,t.reject)});return t.promise()}}}},"sap.ushell.services.Renderer":{oServiceCalls:{addHeaderItem:{executeServiceCallFn:function(e){y("addHeaderItem",e);return(new jQuery.Deferred).resolve().promise()}},addHeaderEndItem:{executeServiceCallFn:function(e){y("addHeaderEndItem",e);return(new jQuery.Deferred).resolve().promise()}},showHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},showHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},setHeaderTitle:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return(new jQuery.Deferred).resolve().promise()}},setHeaderVisibility:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},createShellHeadItem:{executeServiceCallFn:function(e){var t=e.oMessageData.body.params;t.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.id})};new sap.ushell.ui.shell.ShellHeadItem(t);return(new jQuery.Deferred).resolve().promise()}},showActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},hideActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return(new jQuery.Deferred).resolve().promise()}},addUserAction:{executeServiceCallFn:function(e){e.oMessageData.body.oParameters.oControlProperties.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.oParameters.oControlProperties.id})};sap.ushell.Container.getRenderer("fiori2").addUserAction(e.oMessageData.body.oParameters);return(new jQuery.Deferred).resolve().promise()}},addOptionsActionSheetButton:{executeServiceCallFn:function(e){var t=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];t.forEach(function(t){if(sap.ui.getCore().byId(t.id)){sap.ui.getCore().byId(t.id).destroy()}new sap.m.Button({id:t.id,text:t.text,icon:t.icon,tooltip:t.tooltip,press:function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.id})}});sap.ushell.Container.getRenderer("fiori2").showActionButton([t.id],true,t.aStates)});return(new jQuery.Deferred).resolve().promise()}},removeOptionsActionSheetButton:{executeServiceCallFn:function(e){var t=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];t.forEach(function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.id,true,e.aStates);if(sap.ui.getCore().byId(e.id)){sap.ui.getCore().byId(e.id).destroy()}});return(new jQuery.Deferred).resolve().promise()}},updateHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").updateHeaderItem(e.oMessageData.body.sId,e.oMessageData.body.oControlProperties);return(new jQuery.Deferred).resolve().promise()}},destroyButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").destroyButton(e.oMessageData.body.aIds);return(new jQuery.Deferred).resolve().promise()}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{getGroupsForBookmarks:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){t.getGroupsForBookmarks().then(e.resolve,e.reject)});return e.promise()}}}},"sap.ushell.services.Menu":{oServiceCalls:{getSpacesPagesHierarchy:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Menu").then(function(t){t.getSpacesPagesHierarchy().then(function(t){e.resolve(t)})});return e.promise()}}}},"sap.ushell.services.CommonDataModel":{oServiceCalls:{getAllPages:{executeServiceCallFn:function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(t){t.getAllPages().then(function(t){e.resolve(t)})});return e.promise()}}}}};function f(){this._getBrowserURL=function(){return document.URL};Object.keys(g).forEach(function(e){if(e.indexOf(p)!==0){throw new Error("All Post Message APIs must start with '"+p+"' - "+e)}});s.init(true,f.prototype.registerShellCommunicationHandler.bind(this))}f.prototype.getAPIs=function(){return g};function v(e,t){var r=g[e],n;if(r){if(t.oServiceCalls){Object.keys(t.oServiceCalls).forEach(function(e){r.oServiceCalls[e]=t.oServiceCalls[e]})}if(t.oRequestCalls){Object.keys(t.oRequestCalls).forEach(function(e){r.oRequestCalls[e]=t.oRequestCalls[e]})}return}n={oRequestCalls:{},oServiceCalls:{}};if(t.oServiceCalls){Object.keys(t.oServiceCalls).forEach(function(e){n.oServiceCalls[e]=t.oServiceCalls[e]})}if(t.oRequestCalls){Object.keys(t.oRequestCalls).forEach(function(e){n.oRequestCalls[e]=t.oRequestCalls[e]})}g[e]=n}f.prototype._getPostMesageInterface=function(e,t){var r,n=this.getAPIs();if(n[e]){r=n[e];if(r&&r.oRequestCalls&&r.oRequestCalls[t]){return r.oRequestCalls[t]}}return undefined};f.prototype.registerShellCommunicationHandler=function(e){Object.keys(e).forEach(function(t){v(t,e[t])})};f.prototype.isActiveOnly=function(e,t){var r=this._getPostMesageInterface(e,t);if(r){return r.isActiveOnly}return undefined};f.prototype.getResponseHandler=function(e,t){var r=this._getPostMesageInterface(e,t);if(r){return r.fnResponseHandler}return undefined};f.prototype._createNewInnerAppState=function(e){return new Promise(function(t){var r,n,a,o,s;sap.ushell.Container.getServiceAsync("AppState").then(function(i){r=i.createEmptyAppState(undefined,false);if(e.oMessageData.body.sData!==undefined){try{s=JSON.parse(e.oMessageData.body.sData)}catch(t){s=e.oMessageData.body.sData}}else{s=""}r.setData(s);r.save();o=r.getKey();n=window.hasher.getHash();if(n.indexOf("&/")>0){if(n.indexOf("sap-iapp-state=")>0){a=/(?:sap-iapp-state=)([^&/]+)/.exec(n)[1];n=n.replace(a,o)}else{n=n+"/sap-iapp-state="+o}}else{n=n+"&/sap-iapp-state="+o}window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(n);window.hasher.disableBlueBoxHashChangeTrigger=false;t(o)})})};function h(e){if(e===true){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(true);var t=jQuery("#shell-header-blockedLayer");t.addClass("sapUshellShellBlocked")}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(true);var r=jQuery("#menuBar-blockedLayer");r.addClass("sapUshellMenuBarBlocked")}}else if(e===false){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(false)}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(false)}}}function y(e,t){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:t.oMessageData.body.sId,tooltip:t.oMessageData.body.sTooltip,icon:t.oMessageData.body.sIcon,floatingNumber:t.oMessageData.body.iFloatingNumber,press:function(){t.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:t.oMessageData.body.sId})}},t.oMessageData.body.bVisible,t.oMessageData.body.bCurrentState||true,t.oMessageData.body.aStates)}f.prototype.registerAsyncDirtyStateProvider=function(e){sap.ushell.Container.setAsyncDirtyStateProvider(function(t){return new Promise(function(r){var n=e.oContainer.createPostMessageRequest("sap.ushell.appRuntime.handleDirtyStateProvider",{oNavigationContext:t}),a;e.oContainer.postMessageToCurrentIframe(n,true).then(function(e){if(a){clearTimeout(a)}r(e&&e.body&&e.body.result||false)});a=setTimeout(function(){r(false)},2500)})})};f.prototype.deregisterAsyncDirtyStateProvider=function(e){sap.ushell.Container.setAsyncDirtyStateProvider(undefined)};f.prototype._sendEmail=function(e,t,n,a,o,s,i){var l=this._getBrowserURL&&this._getBrowserURL()||document.URL;function c(e,r,a,o,s,i){t=t&&t.includes(e)?t.replace(e,r):t;n=n&&n.includes(e)?n.replace(e,r):n;t=t&&a&&s&&t.includes(a)?t.replace(a,s):t;t=t&&o&&i&&t.includes(o)?t.replace(o,i):t;n=n&&a&&s&&n.includes(a)?n.replace(a,s):n;n=n&&o&&i&&n.includes(o)?n.replace(o,i):n}if(i){sap.ushell.Container.getServiceAsync("AppState").then(function(i){i.setAppStateToPublic(s).done(function(r,i,u,p,d){if(p!==undefined){l=l.replace(i,p)}if(d!==undefined){l=l.replace(u,d)}c(s,l,i,u,p,d);sap.m.URLHelper.triggerEmail(e,t,n,a,o)}).fail(r.error)})}else{c(s,l);sap.m.URLHelper.triggerEmail(e,t,n,a,o)}};f.prototype._stripBookmarkServiceUrlForLocalContentProvider=function(e,t){if(!e||!e.serviceUrl||!t){return}if(t.id===""||t.id==="saas_approuter"){e.serviceUrl=undefined;r.warning("Dynamic data bookmarks tiles are not supported for local content providers",null,"sap/ushell/components/applicationIntegration/application/PostMessageAPI")}};return new f});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e="user.postapi.";function s(){var e,s;this.init=function(t,n){e=t;s=n};this.getInterface=function(){var i={};i.registerPostMessageAPIs=t.bind(null,s);i[e===true?"postMessageToApp":"postMessageToFlp"]=n.bind(null,e);i.createPostMessageResult=r;return i}}function t(s,t,n){var r={status:"success",desc:""};var i={isActiveOnly:true,distributionType:["all"],fnResponseHandler:function(){}};if(t===undefined||Object.keys(t).length<=0){r.status="error";r.desc="no handler was found to register";return r}if(n===undefined){n=false}Object.keys(t).forEach(function(s){if(typeof s!=="string"){r.status="error";r.desc="oPostMessageAPIs should contain only string keys"}else if(n===false&&s.indexOf(e)!==0){r.status="error";r.desc="all user custom Message APIs must start with '"+e+"'"}else{Object.keys(t[s]).forEach(function(e){if(e=="inCalls"){t[s].oServiceCalls=t[s][e];delete t[s][e]}else if(e=="outCalls"){Object.keys(t[s][e]).forEach(function(n){t[s][e][n]=jQuery.extend(true,{},i,t[s][e][n])});t[s].oRequestCalls=t[s][e];delete t[s][e]}else{r.status="error";r.desc="api should contain either 'inCalls' or 'outCalls'"}})}});if(r.status==="success"){s(t)}return r}function n(e,s,t,n){var r=new jQuery.Deferred;if(n===undefined){n={}}if(e){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(e){e.postMessageToIframeApp(s,t,n,true).then(function(e){r.resolve(e&&e[0]&&e[0].body.result)})})}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(e){e.sendMessageToOuterShell(s+"."+t,n).done(function(e){r.resolve(e)})})}return r.promise()}function r(e){if(e===undefined){e={}}return(new jQuery.Deferred).resolve(e).promise()}return new s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/configuration/AppMeta", ["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(e,t,n,i,a,s,o,r,jQuery,l,c){"use strict";function u(){var u,p=this,h,f,m;this.getIsTitleChanged=function(){return u};this.getIsRelatedAppsChanged=function(){return m};this.getHierarchyDefaultValue=function(){var e=[];var t=i.last("/core/shell/model/currentState/stateName");if(t&&(t==="app"||t==="embedded")){e=[{icon:"sap-icon://home",title:s.i18n.getText("actionHomePage"),intent:f?"#"+f:"#"}];var n=i.last("/core/shell/model/currentSpaceAndPage");if(n!==undefined){e.splice(0,0,{icon:"sap-icon://circle-task-2",title:n.pageTitle,subtitle:n.pageTitle!==n.spaceTitle?n.spaceTitle:undefined,intent:"#"+n.hash})}}return e};this.init=function(e){f=e};this.getIsHierarchyChanged=function(){return h};this.onHierarchyChange=function(e){h=true;var n=e.getParameters().data,a=[],s=i.last("/core/shell/model/currentState/stateName");if(!n){n=[]}var o=p.getHierarchyDefaultValue();n.forEach(function(e,t){a[t]=jQuery.extend({},e)});a=a.concat(o);if(s==="home"){t.updateStateProperty("application/hierarchy",a,false,["home"])}t.updateStateProperty("application/hierarchy",a,true)};this.onRelatedAppsChange=function(e){m=true;var n=e.getParameters().data,a=i.last("/core/shell/model/currentState/stateName");if(!n){n=[]}if(a==="home"){t.updateStateProperty("application/relatedApps",n,false,["home"])}t.updateStateProperty("application/relatedApps",n,true)};this.resetShellUIServiceHandlers=function(){m=false;h=false;u=false};this.onTitleChange=function(e){u=true;var n=e.getParameters().data;if(!n){n=this.getAppMeta().getTitleDefaultValue()}var s=i.last("/core/shell/model/currentState/stateName");if(s==="home"){t.updateStateProperty("application/title",n,false,["home"])}t.updateStateProperty("application/title",n,true);r.genericSetItem("application/title",n);window.document.title=n;a.setPerformanceMark("FLP -- title change");o.emit("TitleChanged",n)};this._getDefaultFavIcon=function(e){var t=e.get("sapUiShellFavicon");if(t){var n=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(t);if(n){t=n[1]}else if(t==="''"||t==="none"){t=null}}if(!t){var i=sap.ui.require.toUrl("sap/ushell");return i+"/themes/base/img/launchpad_favicon.ico"}return t};this.getFavIconHref=function(){return jQuery("link").filter('[rel="shortcut icon"]').attr("href")||""};this.getAppIcon=function(){var t="sap-icon://folder",n=e.getMetadata();if(n&&n.icon){t=n.icon}return t};this.setAppIcons=function(e){l.start("FLP:ShellController.setAppIcons","setValues","FLP");sap.ui.require(["sap/ui/core/theming/Parameters"],function(t){if(sap.ui.getCore().isThemeApplied()){this.setValues(e,t)}else{sap.ui.getCore().attachThemeChanged(function(){this.setValues(e,t)}.bind(this))}}.bind(this));l.end("FLP:ShellController.setAppIcons")};this.setValues=function(e,t){var i=sap.ui.require.toUrl("sap/ushell"),a=e&&e.homeScreenIconPhone||i+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png",s=e&&e["homeScreenIconPhone@2"]||i+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png",o=e&&e.homeScreenIconTablet||i+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png",r=e&&e["homeScreenIconTablet@2"]||i+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png",l=e&&e.favIcon||this._getDefaultFavIcon(t),u=this.getFavIconHref();if(n.os.ios){c.setIcons({phone:a,"phone@2":s,tablet:o,"tablet@2":r,favicon:l,precomposed:false})}else if(u!==l){c.setIcons({phone:"","phone@2":"",tablet:"","tablet@2":"",favicon:l,precomposed:true})}};this._applyContentDensityByPriority=function(t,i){var a=this;return new Promise(function(s){sap.ushell.Container.getServiceAsync("UserInfo").then(function(o){var r;if(t===undefined){if(n.system.combi){var l=o.getUser(),c="autoDetect";if(l){c=l.getContentDensity()}switch(c){case"cozy":t=false;break;case"compact":t=true;break;default:r=e.getMetadata();if(r.compactContentDensity&&!r.cozyContentDensity){t=true}else{t=false}}}else{r=e.getMetadata();if(r.compactContentDensity&&!r.cozyContentDensity){t=true}else if(!r.compactContentDensity&&r.cozyContentDensity){t=false}else{t=a._isCompactContentDensityByDevice()}}}a._applyContentDensityClass(t,i).then(s)})})};this._applyContentDensityClass=function(e,t){return new Promise(function(n,i){function a(e){jQuery("body").toggleClass("sapUiSizeCompact",e).toggleClass("sapUiSizeCozy",!e);if(t===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(t){t.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{isTouch:e?"0":"1"})})}n()}if(e===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(e){var t=e.getUser?e.getUser():undefined;var n;if(t&&t.getContentDensity()==="compact"){n=true}else if(t&&t.getContentDensity()==="cozy"){n=false}else{n=p._isCompactContentDensityByDevice()}a(n)})}else{a(!!e)}})};this._isCompactContentDensityByDevice=function(){return!n.support.touch||n.system.combi};this.getTitleDefaultValue=function(){var t="",n=e.getMetadata();if(n&&n.title){t=n.title}return t};this.create=function(){};this.restore=function(e){this._applyContentDensityByPriority();this.setAppIcons(e)};this.store=function(e){};this.destroy=function(e){}}return new u},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/elements/model", ["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/base/util/deepExtend","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing"],function(t,e,n,a,i,o,s,r,jQuery,l){"use strict";var h;var u;function f(){return{home:{actions:["ContactSupportBtn"]},app:{actions:["ContactSupportBtn","aboutBtn"]},minimal:{actions:["ContactSupportBtn","aboutBtn"]},standalone:{actions:["ContactSupportBtn","aboutBtn"]},embedded:{actions:["ContactSupportBtn","aboutBtn"]},"embedded-home":{actions:["ContactSupportBtn","aboutBtn"]},lean:{actions:["ContactSupportBtn","aboutBtn"]}}}function d(){return{blank:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"blank-home":{stateName:"blank-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},home:{stateName:"home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,search:"",paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},app:{stateName:"app",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],search:"",actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},minimal:{stateName:"minimal",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},standalone:{stateName:"standalone",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},embedded:{stateName:"embedded",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"embedded-home":{stateName:"embedded-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},headerless:{stateName:"headerless",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},merged:{stateName:"merged",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"headerless-home":{stateName:"headerless-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"merged-home":{stateName:"merged-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},lean:{stateName:"lean",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},"lean-home":{stateName:"lean-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}}function c(t,e){return Object.keys(t).reduce(function(n,a){if(!e[a]){n[a]=t[a]}return n},{})}function g(t,e){return e!==undefined}function m(){return true}function S(t,e){var n=e.split("/");var a=t;n.shift();n.forEach(function(t){if(!a){return}a=a[t]});return a}function p(t,e,n){var a=t.split("/");var i=n;a.shift();var o=a.pop();a.forEach(function(t){i=i[t]});i[o]=e}function C(){var C;var v;var w;var A;var I;var b;var R;var _;var y;var F;this.createDefaultTriggers=function(e){var n=function(t,e,n){if(n.sProperty==="actions"){var a=S(n.oModel,n.path);if(a&&a.length===0&&n.aIds&&n.aIds.length>0){this._renderShellState()}}}.bind(this);var a=function(t){function e(t,e){var n=l.getHash(t),a=l.getHash(e),i=l.parseShellHash(n).appSpecificRoute,o=l.parseShellHash(a).appSpecificRoute;return i!==o}var n=e(t.oldURL,t.newURL);if(n){this.addHeaderItem(["backBtn"],true)}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",n,this)},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",n,this)}}],["blank","blank-home"],e);var i=this;var o;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",a);var e=0;o=t.on("AppRendered").do(function(){e++;if(e>=2){i.addHeaderItem(["backBtn"],true)}})},fnUnRegister:function(){window.removeEventListener("hashchange",a);if(o){o.off()}}}],["lean","lean-home"],e)};this.init=function(t,n){h=d();u=f();v=e.last("/core/shell/model");C={};I={};b=false;_=false;y=[];F=true;A=n;R=undefined;if(t){o.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(t.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn")}if(t.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn")}if(t.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn")}o.end("FLP:ElementsModel.init")}var a=t&&t.appState?t.appState:"home";this.createDefaultTriggers(a);this.switchState(a)};this.destroy=function(){v=undefined;C=undefined;A=undefined;I=undefined;b=undefined;F=undefined;_=undefined;R=undefined;h=undefined;u=undefined};this.getModel=function(){var t=sap.ushell.Container.getRenderer("fiori2");if(!t){return undefined}return t._oShellView.getModel()};this._removeCustomDataActionBtnFromMeArea=function(t){for(var e in u){var n=u[e];var a=n.actions;var i=a.indexOf(t);if(i!==-1){u[e].actions.splice(i,1)}}};this._removeActionFromMeArea=function(t){var e;for(e in h){var n=h[e];if(e==="blank"||e==="blank-home"){continue}var a=n.actions;var i=a.indexOf(t);if(i!==-1){h[e].actions.splice(i,1)}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"])};this.switchState=function(t){var n=r({},h[t]);var i=c(n,{aTriggers:true});e.emit("/core/shell/model/currentState",i);a.switchState(t);w=A.customShellState;R=undefined;this._renderShellState();return n};this.setLeftPaneVisibility=function(t,e,n){this.updateStateProperty("showPane",t,e,n)};this.setHeaderHiding=function(){s.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect")};this._createHeaderEventPayload=function(t,e,n,a,i,o){var s={propertyName:t,value:e,aStates:a,bCurrentState:n,action:o,bDoNotPropagate:i};return s};this.setHeaderVisibility=function(t,e,n){var i=this._createHeaderEventPayload("headerVisible",t,e,n,false);a.updateStates(i)};this.showLogo=function(t,e){this.updateShowLogo(true,t,e,false)};this.updateShowLogo=function(t,e,n,i){var o=this._createHeaderEventPayload("showLogo",t,e,n,i);a.updateStates(o)};this.addHeaderItem=function(t,e,n){if(t.length){var i=this._createHeaderEventPayload("headItems",t,e,n,false);a.updateStates(i)}};this.removeHeaderItem=function(t,e,n){var i=this._createHeaderEventPayload("headItems",t,e,n,false,"remove");a.updateStates(i)};this.addHeaderEndItem=function(t,e,n,i){if(t.length){var o=this._createHeaderEventPayload("headEndItems",t,e,n,i);a.updateStates(o)}};this.removeHeaderEndItem=function(t,e,n){var i=this._createHeaderEventPayload("headEndItems",t,e,n,false,"remove");a.updateStates(i)};this.addSubHeader=function(t,e,n){if(t.length){this._addShellItem("subHeader",t,e,n)}};this.removeSubHeader=function(t,e,n){this._removeShellItem("subHeader",t,e,n)};this.addActionButton=function(t,e,n){this._addActionButton("actions",t,e,n)};this.removeActionButton=function(t,e,n){this._removeShellItem("actions",t,e,n)};this.addToolAreaItem=function(t,e,n,a){if(t.length){this._addToolAreaItem("toolAreaItems",t,e,n,a)}};this.removeToolAreaItem=function(t,e,n){this._removeShellItem("toolAreaItems",t,e,n)};this.addLeftPaneContent=function(t,e,n){if(t.length){this._addShellItem("paneContent",t,e,n)}};this.removeLeftPaneContent=function(t,e,n){this._removeShellItem("paneContent",t,e,n)};this.addRightFloatingContainerItem=function(t,e,n){if(t.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",t,e,n)}};this.removeRightFloatingContainerItem=function(t,e,n){this._removeShellItem("RightFloatingContainerItems",t,e,n)};this.showSettingsButton=function(t,e){this.addActionButton(["userSettingsBtn"],t,e,false)};this.showSignOutButton=function(t,e){this.addActionButton(["logoutBtn"],t,e,false)};this.showRightFloatingContainer=function(t){this._showRightFloatingContainer(t)};this.addFloatingActionButton=function(t,e,n){if(t.length){this._addShellItem("floatingActions",t,e,n)}};this.removeFloatingActionButton=function(t,e,n){this._removeShellItem("floatingActions",t,e,n)};this.updateStateProperty=function(t,e,n,i,o){if(t.startsWith("application")){var s=this._createHeaderEventPayload(t,e,n,i,false);a.updateStates(s);return}this._setShellItem(t,e,n,i,g,p,o)};this._handleTriggers=function(t){var e,n,a=[],i={};F=false;while(y.length>0){e=y.pop();if(t[e.sName]){a.push(e);i[e.sName]=e}else{e.fnUnRegister(this)}}for(var o in t){if(t.hasOwnProperty(o)){if(!i[o]){n=t[o];n.fnRegister(this);a.push(n)}}}y=a;F=true};this._registerTriggers=function(t){F=false;t.forEach(function(t){t.fnRegister(this);y.push(t)});F=true};function B(t,e){var n=[];if(!e.aTriggers){e.aTriggers=[]}t.forEach(function(t){var a={sName:t.sName,fnRegister:t.fnRegister,fnUnRegister:t.fnUnRegister};e.aTriggers.push(a);n.push(a)});return n}this.createTriggersOnState=function(t){var e=B(t,h);if(!b){this._registerTriggers(e)}};this.createTriggersOnBaseStates=function(t,e,n){var a=[];e.forEach(function(e){var n=h[e];a=B(t,n)});var i=e.indexOf(n)>=0;if(i&&!b){this._registerTriggers(a)}};this.createTriggers=function(t,e,n){var a=v.currentState;if(e===true){this.createTriggersOnState(t,a);return}this.createTriggersOnBaseStates(t,n,a.stateName)};this.showShellItem=function(t,e,n){var a=i.getModelStates(e),o="/currentState"+t,s;for(var r=0;r<a.length;r++){s=h[a[r]].stateName;h[s][t.split("/")[1]]=n}if(v.currentState.stateName===e){p(o,n,v);if(!b){this._renderShellState()}}};this.addCustomItems=function(t,e,n,a){if(this._isValidStateEntry(t)){this._isValidStateEntry(t).fnAdd(e,n,a)}else{throw new Error("Invalid state entry:"+t)}};this.removeCustomItems=function(t,e,n,a){if(this._isValidStateEntry(t)){this._isValidStateEntry(t).fnRemove(e,n,a)}else{throw new Error("Invalid state entry:"+t)}};this.applyExtendedShellState=function(t){R=t;this._renderShellState()};this.addEntryInShellStates=function(t,e,n,a,i){var o,s;if(!C[t]){C[t]={fnAdd:n,fnHide:a};var r=this._getStatesList();for(o=0;o<r.length;o++){s=r[o];h[s][t]=i[s]}this["remove"+e]=a;this["add"+e]=n}else{throw new Error("State entry already exsists:"+t)}};this.addElementToManagedQueue=function(t){var n=e.last("/core/shell/model/currentState/stateName"),a,i=t.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")}}a=A.extendedShellStates;if(!a[n]){a[n]={managedObjects:[],customState:undefined}}a[n].managedObjects.push(i);var o=I[i];if(o){o.nRefCount++}else{o={oItem:t,nRefCount:1};I[i]=o}};this.updateNeededTriggersMap=function(t,e){var n;if(!e){return}for(n=0;n<e.length;n++){t[e[n].sName]=e[n]}};this._renderShellState=function(){var t=e.last("/core/shell/model/currentState/stateName"),n,i,o=r({},h[t]),s=A,l,u={};if(b){return}if(s&&s.customShellState){l=s.customShellState.currentState}var f={currentState:r({},o)};v=f;b=true;if(R&&s.extendedShellStates&&s.extendedShellStates[R]){n=s.extendedShellStates[R].customState;i=n.currentState;this._addCustomShellStates(i)}if(l){this._addCustomShellStates(l)}v=e.last("/core/shell/model");if(o&&o.aTriggers){this.updateNeededTriggersMap(u,o.aTriggers)}if(i&&i.aTriggers){this.updateNeededTriggersMap(u,i.aTriggers)}if(l&&l.aTriggers){this.updateNeededTriggersMap(u,l.aTriggers)}if(F){this._handleTriggers(u)}delete f.currentState.aTriggers;var d=c(f.currentState,{aTriggers:true});a.recalculateState(R);e.emit("/core/shell/model/currentState",d);b=false};this._addCustomShellStates=function(t){this.addToolAreaItem(t.toolAreaItems,false,true);this.addSubHeader(t.subHeader,true);this.addRightFloatingContainerItem(t.RightFloatingContainerItems,true);this.addActionButton(t.actions,true,undefined,false);this.addLeftPaneContent(t.paneContent,true);this.addFloatingActionButton(t.floatingActions,true);this.showRightFloatingContainer(t.showRightFloatingContainer)};this._createCustomShellState=function(t){var e={currentState:{stateName:t,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}};var n=u[t];if(n){jQuery.extend(e.currentState,n)}return e};this._showRightFloatingContainer=function(t){this._setShellItem("showRightFloatingContainer",t,true,[],g,p)};this._addActionButton=function(t,e,a,i){function o(t,e,a){var i=S(a,t);var o=i.indexOf("logoutBtn");if(o>-1){i.splice.apply(i,[o,0].concat(e))}else{i=i.concat(e)}var s=n.removeDuplicatedActions(i);function r(t){var e=[],n=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","EditModeBtn","ContactSupportBtn"];for(var a=0;a<n.length;a++){var i=t.indexOf(n[a]);if(i>-1){e.push(t.splice(i,1)[0])}}e=e.concat(t);return e}var l=r(s);p(t,l,a)}this._setShellItem(t,e,a,i,m,o)};this.setFloatingContainerContent=function(t,e,n,a){function i(t,e,n){return e.length===1}function o(t,e,n){p(t,e,n)}this._setShellItem(t,e,n,a,i,o)};this._addShellItem=function(t,e,n,a){function i(t,e,n){if(t.length>0){s.warning("You can only add one item. Replacing existing item: "+t[0]+" in state: "+n+", with the new item: "+e[0]+".")}return true}function o(t,n,a){p(t,e.slice(0),a)}this._setShellItem(t,e,n,a,i,o)};this._addRightFloatingContainerItem=function(t,e,n,a){function i(t,e,n){var a=S(n,t);a=a.concat(e);p(t,a,n)}this._setShellItem(t,e,n,a,m,i)};this._addToolAreaItem=function(t,e,n,a,o){function s(t,e,n){var a=S(n,t),i,o;if(typeof e==="string"){e=[e]}for(o=0;o<e.length;o++){i=e[o];if(a.indexOf(i)<0){a.push(i)}}p(t,a,n)}if(n){var r,l=i.getPassStates(o);for(r=0;r<l.length;r++){this.showShellItem("/toolAreaVisible",l[r],true)}}this._setShellItem(t,e,a,o,m,s)};this._removeShellItem=function(t,e,n,a){function i(t,e){var n,a,i;for(i=0;i<e.length;i++){a=e[i];n=t.indexOf(a);if(n<0){s.warning("You cannot remove Item: "+a+", the Item does not exists.");return false}}return true}function o(t,e,n){var a=S(n,t),i,o,s;for(s=0;s<e.length;s++){o=e[s];i=a.indexOf(o);if(i>-1){a.splice(i,1)}}p(t,a,n)}this._setShellItem(t,e,n,a,i,o)};this._setShellItem=function(t,e,n,a,o,s,r){var l,u;var f=Array.isArray(e)?e.slice(0):e;if(n===true){l="/currentState/"+t;u=S(v,l);if(o(u,f,"currentState")===false){return}if(!_&&!b){s(l,f,w);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:v,path:l,aIds:f,sProperty:t});this._renderShellState()}else{s(l,f,v)}}else{var d=r?a:i.getPassStates(a),c,g=v.currentState.stateName;for(c=0;c<d.length;c++){var m=d[c],p;u=S(h[m],"/"+t);if(o(u,f,m)===false){continue}var C=i.getModelStates(m,r);for(p=0;p<C.length;p++){l="/"+C[p]+"/"+t;s(l,f,h);if(g===C[p]){if(!b){this._renderShellState()}}}}}};this._getStatesList=function(){return Object.keys(h)};this._destroyManageQueue=function(){var t,e,n,a,i,o;a=A.extendedShellStates;for(i in a){if(a.hasOwnProperty(i)){o=a[i].managedObjects;for(t=0;t<o.length;t++){e=o[t];n=I[e];n.nRefCount--;if(n.nRefCount===0){n.oItem.destroy();I[e]=null}}delete a[i]}}};this._isValidStateEntry=function(t){return!!C[t]};this.getModelToUpdate=function(){return v};this.setModelToUpdate=function(t,e){_=e;v=t};this._getManagedElements=function(){return I};this.extendStates=function(t){var e;for(e in t){if(t.hasOwnProperty(e)){n.updateProperties(h[e],t[e])}}};this.getBaseStateMember=function(t,e){return h[t][e]};this.getCustomStateDeltaMember=function(t,e){return u[t][e]};this.getAllStatesInDelta=function(){return Object.keys(u)}}var v=new C;return v},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/relatedServices/RelatedServices", [],function(){"use strict";function t(){var t=false,i,a=false;this.resetBackNavigationFlag=function(){a=false};sap.ui.getCore().getEventBus().subscribe("relatedServices","resetBackNavigation",this.resetBackNavigationFlag,this);this._defaultBackNavigation=function(){window.history.back()};this.isBackNavigation=function(){return a};this.navigateBack=function(){var e=this;a=true;if(t===true){this._defaultBackNavigation()}else if(i){i()}else{sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.isInitialNavigationAsync().then(function(i){if(i){t.toExternal({target:{shellHash:"#"},writeHistory:false});return}e._defaultBackNavigation()})})}};this.setNavigateBack=function(a){t=false;i=a};this.resetNavigateBack=function(){t=true;i=undefined};this.restore=function(a){t=a.bDefaultBrowserBack;i=a.fnCustomBackNavigation};this.store=function(a){a.bDefaultBrowserBack=t;a.fnCustomBackNavigation=i}}return new t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements", ["sap/ui/thirdparty/jquery","sap/base/Log"],function(jQuery,e){"use strict";function t(){var t=[],n,a,i={},s,o=false,l={},r,d=[],h={home:{actions:[]},app:{actions:["aboutBtn"]},minimal:{actions:["aboutBtn"]},standalone:{actions:["aboutBtn"]},embedded:{actions:["aboutBtn"]},"embedded-home":{actions:["aboutBtn"]},lean:{actions:["aboutBtn"]}},c={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"app"},TR:{headerless:"minimal",default:"app"},default:{default:"app"}}};this.init=function(e,t){n=e;if(t&&t.length>0){Object.keys(h).forEach(function(e){h[e].actions=t.concat(h[e].actions)})}};this.processDangling=function(){var e,n;for(e=0;e<t.length;e++){n=t.pop();n.func.apply(this,n.args)}};this.setDangling=function(e){o=e};this.calculateElementsState=function(e,t,n,a){var i=c[e]?c[e]:c.default,s=i[a?undefined:t]?i[t]:i.default,o=s[n]?s[n]:s.default;return o};this.createCustomShellState=function(e){var t={currentState:{stateName:e,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}},n=h[e];if(n){jQuery.extend(t.currentState,n)}return t};this.createExtendedShellState=function(e,t){var n,i=this.createCustomShellState(e);n=a.extendedShellStates;if(n[e]){return false}s=i;t();if(n[e]){n[e].customState=i}else{n[e]={managedObjects:[],customState:i}}s=a.customShellState;return true};this.assignNew=function(e){i=this.createCustomShellState(e);a.customShellState=i;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState};this._genericSetItem=function(e,t){var a=e.split("/");var i=a.pop();var o=a.reduce(function(e,t){return e[t]},s.currentState);o[i]=t;n._renderShellState()};this._genericAddItems=function(e,t){var a=s.currentState[e];s.currentState[e]=a.concat(t);n._renderShellState()};this.genericSetItem=function(e,n){if(o){t.push({func:this._genericSetItem,args:arguments})}else{this._genericSetItem(e,n)}};this.genericAddItems=function(e,n){if(o){t.push({func:this.genericAddItems,args:arguments})}else{this._genericAddItems(e,n)}};this.setShellModelForApplications=function(t,n){var a=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(a.indexOf(t)>-1){this.genericSetItem(t,n)}else{e.error("Not a valid attribute:"+t)}};this.addShellModelForApplications=function(t,n){var a=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(a.indexOf(t)>-1){this.genericAddItems(t,n)}else{e.error("Not a valid attribute:"+t)}};this.setStateModelToUpdate=function(e){s=e};this.getStateModelToUpdate=function(){return s};this.model=function(){if(!a){this.create()}r={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return r};this._updateModel=function(){if(r){r.customShellState=a.customShellState;r.aTriggers=a.aTriggers;r.extendedShellStates=a.extendedShellStates;r.oCheckPoints=a.oCheckPoints}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints}};this.create=function(){a={extendedShellStates:{},oCheckPoints:l,aTriggers:d,customShellState:{currentState:{stateName:"app",headEndItems:[],paneContent:[],headItems:[],actions:["aboutBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}}};s=a.customShellState;this._updateModel();return a};this.restore=function(e){if(e&&e.appRelatedElements){var t=e.appRelatedElements;a.aTriggers=t.aTriggers;a.extendedShellStates=t.extendedShellStates;a.oCheckPoints=t.oCheckPoints;a.customShellState=t.customShellState}this._updateModel();s=a.customShellState};this.store=function(e){};this.clean=function(){a=undefined};this.destroy=function(e){}}return new t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/container/ApplicationContainer", ["sap/base/Log","sap/base/security/encodeXML","sap/base/util/deepEqual","sap/base/util/uid","sap/base/util/UriParameters","sap/m/MessagePopover","sap/m/Text","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/mvc/View","sap/ui/core/routing/History","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,a,n,r,o,i,s,p,l,u,f,d,c,jQuery,g,m,h,y,v,C,I,b,_,P){"use strict";var A="sap.ushell.components.container.",S=A+"ApplicationContainer",E="sap.ushell.Container.dirtyState.",w="autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen;serial;",x,U,R,T=false,M=false,D=[],L=0,F=0;var O=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];function N(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(t){t.isUrlSupported(e.url).done(function(){e.promise.resolve({allowed:true,id:e.id})}).fail(function(){e.promise.resolve({allowed:false,id:e.id})})})}function H(e){var t={asyncURLHandler:he.prototype._adaptIsUrlSupportedResultForMessagePopover};if(o&&o.setDefaultHandlers){o.setDefaultHandlers(t)}y.emit("StepDone",e.stepName)}y.once("initMessagePopover").do(H);x=new _.Map;function V(e){return x.get(e.getId())}function j(){return U}function W(e){var t=new r(e).mParams,a=t["sap-xapp-state"],n;delete t["sap-xapp-state"];n={startupParameters:t};if(a){n["sap-xapp-state"]=a}return n}function k(e,t){return C.i18n.getText(e,t)}function q(){return new u({size:"2rem",src:"sap-icon://error",tooltip:he.prototype._getTranslatedText("an_error_has_occured")})}function B(t){var a=t.getAggregation("child"),n;if(a instanceof p){n=a.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");e.debug("unloading component "+n,null,S)}t.destroyAggregation("child")}function J(t,a,n){return new Promise(function(r){var o,i,l,u,d,c={},g,m;function h(e){e.setWidth(t.getWidth());e.setHeight(t.getHeight());e.addStyleClass("sapUShellApplicationContainer");t.setAggregation("child",e,true)}o=a.indexOf("?");if(o>=0){u=he.prototype._getParameterMap(a);c=u.startupParameters;a=a.slice(0,o)}if(a.slice(-1)!=="/"){a+="/"}if(/\.view\.(\w+)$/i.test(n)){l=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(n);if(!l){e.error("Invalid SAPUI5 URL",n,S);r(he.prototype._createErrorControl());return}d=l[1];g=l[2];m=l[3].toUpperCase();if(d){g=d+"."+g}else{i=g.lastIndexOf(".");if(i<1){e.error("Missing namespace",n,S);return he.prototype._createErrorControl()}d=g.slice(0,i)}}else{d=n.replace(/^SAPUI5=/,"")}var y={};var v=d.replace(/\./g,"/");y[d]=a+v;sap.ui.loader.config({paths:y});he.prototype._destroyChild(t);if(g){if(t.getApplicationConfiguration()){c.config=t.getApplicationConfiguration()}f.create({id:t.getId()+"-content",type:m,viewData:c||{},viewName:g}).then(function(e){t.fireEvent("applicationConfiguration");h(e);r(e)})}else{e.debug("loading component "+d,null,S);var C=u?{startupParameters:u.startupParameters}:{startupParameters:{}};if(u&&u["sap-xapp-state"]){C["sap-xapp-state"]=u["sap-xapp-state"]}if(t.getApplicationConfiguration()){C.config=t.getApplicationConfiguration()}s.create({id:t.getId()+"-component",componentData:C,name:d}).then(function(e){t.fireEvent("applicationConfiguration",{configuration:e.getMetadata().getConfig()});var a=new p({id:t.getId()+"-content",component:e});h(a);r(a)})}})}function K(e,t){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,t)},0)}function z(t,a,n){var r=this,o,i={oControl:undefined,oPromise:undefined},l,u,f,d={startupParameters:{}},c,g=t.getComponentHandle(),m,h;function y(e){t.fireEvent("applicationConfiguration",{configuration:e.getMetadata().getConfig()});u=new p({id:t.getId()+"-content",component:e});u.setHeight(t.getHeight());u.setWidth(t.getWidth());u.addStyleClass("sapUShellApplicationContainer");t._disableRouterEventHandler=he.prototype._disableRouter.bind(r,e);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",t._disableRouterEventHandler);t.setAggregation("child",u,true);sap.ushell.Container.getServiceAsync("PluginManager").then(function(t){m=t.getPluginLoadingPromise("RendererExtensions");h=m&&m.state();if(h==="pending"){m.done(function(){he.prototype._publishExternalEvent("appComponentLoaded",{component:e})}).fail(function(){he.prototype._publishExternalEvent("appComponentLoaded",{component:e})})}if(h==="resolved"||h==="rejected"){he.prototype._publishExternalEvent("appComponentLoaded",{component:e})}});return u}l=a.indexOf("?");if(l>=0){f=he.prototype._getParameterMap(a);d={startupParameters:f.startupParameters};if(f["sap-xapp-state"]){d["sap-xapp-state"]=f["sap-xapp-state"]}a=a.slice(0,l)}if(t.getApplicationConfiguration()){d.config=t.getApplicationConfiguration()}if(a.slice(-1)!=="/"){a+="/"}he.prototype._destroyChild(t);c={id:t.getId()+"-component",name:n,componentData:d};e.debug("Creating component instance for "+n,JSON.stringify(c),S);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:n});if(g){var v=g.getInstance(c);i.oControl=y(v)}else{o=new jQuery.Deferred;var C={};var I=n.replace(/\./g,"/");C[I]=a;sap.ui.loader.config({paths:C});e.error("No component handle available for '"+n+"'; fallback to component.load()",null,S);s.create({id:t.getId()+"-component",name:n,manifest:false,componentData:d}).then(function(e){o.resolve(y(e))});i.oPromise=o.promise()}return i}function G(t){var a;if(t instanceof s&&typeof t.getRouter==="function"){a=t.getRouter();if(a&&typeof a.stop==="function"){e.info("router stopped for instance "+t.getId());a.stop()}}}function $(e){var t=document.createElement("a"),a=new r(e).get("sap-client"),n;t.href=e;n=t.protocol+"//"+t.host;return new I({alias:a?n+"?sap-client="+a:n,baseUrl:n,client:a||undefined,platform:"abap"})}function Q(e,t){var a=false,n=e.getDomRef(),r,o;if(e.getIframeWithPost()===true&&n&&n.getAttribute&&n.getAttribute("sap-iframe-app")=="true"){n=jQuery("#"+n.getAttribute("id")+"-iframe")[0]}if(n){r=g(e._getIFrameUrl(n)||window.location&&window.location.href||"");o=r.protocol()+"://"+r.host();a=t.source===n.contentWindow||t.origin===o}return a}function X(t,a,r){var o=JSON.stringify({type:"request",service:a,request_id:n(),body:{}});e.debug("Sending post message request to origin ' "+r+"': "+o,null,"sap.ushell.components.container.ApplicationContainer");t.postMessage(o,r)}function Y(){var e=this.getDomRef();if(!e||e.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&e&&e.getAttribute&&e.getAttribute("sap-iframe-app")=="true"){return jQuery("#"+e.getAttribute("id")+"-iframe")[0]}return null}return e}function Z(e){var t;if(e===undefined){e=this._getIFrame()}if(this.getIframeWithPost()===true){t=jQuery("#"+e.getAttribute("id").replace("-iframe","-form"))[0].action;if(t===undefined&&(new g).query(true).hasOwnProperty("sap-isolation-enabled")){t=e.src}}else{t=e.src}return t}function ee(t,a){var n=t&&t.getUi5ComponentName&&t.getUi5ComponentName(),r=a.data,o=typeof r==="string"&&r.indexOf("sap.ushell.appRuntime.iframeIsValid")>0;if(t&&!t.getActive()&&o!==true){e.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(r)+"' on inactive container '"+t.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return}if(typeof n==="string"){e.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(r)+"' on container of UI5 application '"+n+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return}var i={bPluginsStatusChecked:T,bKeepMessagesForPlugins:M,bApiRegistered:true};R(t,a,i);he.prototype._handlePostMessagesForPluginsPostLoading(t,a,i)}function te(t,a,n){var r,o;if(n.bApiRegistered!==false){return}sap.ushell.Container.getServiceAsync("PluginManager").then(function(n){if(T===false){T=true;r=n.getPluginLoadingPromise("RendererExtensions");o=r&&r.state();if(o==="pending"){M=true;r.always(function(){var t;M=false;e.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+D.length,null,"sap.ushell.components.container.ApplicationContainer");for(var a=0;a<D.length;a++){t=D[a];try{he.prototype._handleMessageEvent.call(t.that,t.oContainer,t.oMessage)}catch(t){e.error(t.message||t,null,"sap.ushell.components.container.ApplicationContainer")}}D=[]})}}if(M===true){D.push({index:L++,that:this,oContainer:t,oMessage:a})}})}function ae(){T=false;M=false;D=[];L=0}function ne(e,t){var a=e._getIFrame(),n=e.getApplicationType();if(_.isApplicationTypeEmbeddedInIframe(e.getApplicationType(n))&&a){var r=new g(e._getIFrameUrl(a));var o=r.protocol()+"://"+r.host();a.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),o);t.preventDefault()}}function re(e,t,a){e.openStart("div",t).accessibilityState(t).class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth()).openEnd();if(a){e.renderControl(a)}e.close("div")}function oe(e,t,a){if(_.isApplicationTypeEmbeddedInIframe(t)||_.isApplicationTypeEmbeddedInIframe(e.getFrameworkId())){var n=e.getTargetNavigationMode();a=he.prototype._adjustNwbcUrl(a,t,n,e.getIsStateful());_.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL)}return a}function ie(e,t,a,n){var o,i=function(){var e=_.getParameterValueBoolean("sap-accessibility");if(e!==undefined){return e}return sap.ushell.Container.getUser().getAccessibilityMode()},s=function(){var t=new r(e)||{mParams:{}};if(t.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(b.prototype.constants.themeFormat.NWBC)}return undefined},p=function(){var t=false,a=new r(e)||{mParams:{}};t=sap.ui.getCore().getConfiguration().getStatistics()&&a.mParams["sap-statistics"]===undefined;return t},l=function(){var e=window.hasher&&window.hasher.getHash(),t="",a;if(e&&e.length>0&&e.indexOf("sap-iapp-state=")>0){a=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(a&&a.length===2){t=a[1]}}return t},u=function(){var e="";var t=!!jQuery("body.sapUiSizeCompact").length;var a=!!jQuery("body.sapUiSizeCozy").length;if(t===true){e="0"}else if(a){e="1"}return e};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";o=s();if(o){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(o)}if(a){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(a)}if(i()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X"}if(p()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true"}if(t==="TR"||t==="GUI"){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=2"}else if(n){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1"}var f=l();if(f&&f.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+f}var d=u();if(d&&d.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+d}var c=0;if(h.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){c=h.last("/core/shell/sessionTimeoutIntervalInMinutes")}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+c;return _.appendSapShellParam(e,t)}function se(e,t,a,n){var r=t.getAggregation("child"),o,i;if(!r||t._bRecreateChild){i=he.prototype._createUi5Component(t,a,n);if(i.oControl!==undefined){t._bRecreateChild=false;he.prototype._renderControlInDiv(e,t,i.oControl)}else{t.oDeferredControlCreation=new jQuery.Deferred;he.prototype._renderControlInDiv(e,t);i.oPromise.then(function(e){t._bRecreateChild=false;o=sap.ui.getCore().createRenderManager();o.renderControl(e);o.flush(jQuery("#"+t.getId())[0]);o.destroy();t.oDeferredControlCreation.resolve()})}}else{he.prototype._renderControlInDiv(e,t,r)}}function pe(e,t,n){var r=e.getProperty(t);if(a(r,n)){return}e.setProperty(t,n);e._bRecreateChild=true}function le(t,a,n,o,i){var s,p,l=false;localStorage.removeItem(a.globalDirtyStorageKey);a.oDeferredControlCreation=undefined;if(i&&i.indexOf("SAPUI5.Component=")===0&&n===m.URL.type){se(t,a,o,i.replace(/^SAPUI5\.Component=/,""));return}if(i&&i.indexOf("SAPUI5=")===0&&n===m.URL.type){he.prototype._renderControlInDiv(t,a,undefined,"open");a.oDeferredControlCreation=new jQuery.Deferred;he.prototype._createUi5View(a,o,i).then(function(e){var n,r=jQuery("#"+a.getId());if(r&&r.length>0){n=sap.ui.getCore().createRenderManager();n.renderControl(e);n.flush(jQuery("#"+a.getId())[0]);n.destroy()}else{t.renderControl(e)}a.oDeferredControlCreation.resolve()});he.prototype._renderControlInDiv(t,a,undefined,"close");return}e.debug('Not resolved as "SAPUI5.Component=" or "SAPUI5=" , '+"will attempt to load into iframe "+i);if(!a.getActive()){e.debug("Skipping rendering container iframe","Container '"+a.getId()+"' is inactive");return}try{o=a.getFrameSource(n,o)}catch(n){e.error(n.message||n,null,S);a.fireEvent("applicationConfiguration");t.renderControl(he.prototype._createErrorControl());return}if(sap.ushell.Container){s=he.prototype._getLogoutHandler(a);if(!s){if(_.isApplicationTypeEmbeddedInIframe(n)){s=he.prototype._logout.bind(null,a);x.put(a.getId(),s);sap.ushell.Container.attachLogoutEvent(s);sap.ushell.Container.addRemoteSystem(he.prototype._createSystemForUrl(o))}}else if(!_.isApplicationTypeEmbeddedInIframe(n)){sap.ushell.Container.detachLogoutEvent(s);x.remove(a.getId())}}o=he.prototype._checkNwbcUrlAdjustment(a,n,o);var u=new r(document.URL);if(u.has("sap-iframe-params")){var f=u.get("sap-iframe-params")||"",d=f.split(",");if(d.length>0){var c=new g(o);d.forEach(function(e){if(e&&e.length>0){if(u.has(e)){c.addQuery(e,u.get(e))}}});o=c.toString()}}if(n==="TR"){a.setProperty("iframePostAllParams",true,true)}p=h.last("/core/shell/enableOpenIframeWithPost");if(p===undefined){p=true}if(u.get("sap-post")==="false"){p=false}else if(window.QUnit!==undefined){p=a.getIframeWithPost()}if(p===true&&a.getOpenWithPostByAppParam()===false){p=false}if(u.get("sap-post")==="true"){l=true}if(p===true&&(n==="NWBC"||n==="TR"||n==="WDA")||l===true){a.setProperty("iframeWithPost",true,true);a.oDeferredRenderer=new jQuery.Deferred;o=he.prototype._filterURLParams(o);var y=[];var v=he.prototype._getParamKeys(o,y);he.prototype._generateRootElementForIFrame(t,a,true);if(v.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(v).then(function(e){var n;var r=jQuery("#"+a.getId());if(r.length>0){n=sap.ui.getCore().createRenderManager();he.prototype._buildHTMLElements(n,a,e,y,o);n.flush(r[0]);n.destroy()}else{he.prototype._buildHTMLElements(t,a,e,y,o)}setTimeout(a.oDeferredRenderer.resolve,0)},function(e){he.prototype._buildHTMLElements(t,a,undefined,y,o);setTimeout(a.oDeferredRenderer.resolve,0)})})}else{he.prototype._buildHTMLElements(t,a,undefined,y,o);setTimeout(a.oDeferredRenderer.resolve,0)}he.prototype._generateRootElementForIFrame(t,a,false);return}if(a.getFrameworkId&&a.getFrameworkId()==="UI5"&&a.getIsStateful&&a.getIsStateful()===true){a.setProperty("isIframeBusy",true,true)}a.fireEvent("applicationConfiguration");t.openStart("iframe",a).accessibilityState(a).attr("src",o).attr("title",C.i18n.getText("AppilcationContainer.IframeTitle")).attr("sap-iframe-idx",++F).class("sapUShellApplicationContainer").style("height",a.getHeight()).style("width",a.getWidth());if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){t.attr("allow",w)}t.openEnd().close("iframe")}function ue(e){var t=new g(e);t=t.removeSearch(O);return t.toString()}function fe(e,t){var a=[],n;if(e.indexOf("sap-intent-param=")>0){n=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(n&&n.length===2){a.push([n[1]]);t.push("sap-intent-param-data")}}if(e.indexOf("sap-xapp-state=")>0){n=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(n&&n.length===2){a.push([n[1]]);t.push("sap-xapp-state-data")}}if(e.indexOf("sap-iapp-state=")>0){n=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(n&&n.length===2){a.push([n[1]]);t.push("sap-iapp-state-data")}}return a}function de(e,t,a,n,o){var i=t.getId()+"-form",s="",p=false;if(a===undefined){a=[]}a.push([sap.ushell.Container.getFLPUrl(true)]);n.push("sap-flp-url");a.push([t.getSystemAlias()]);n.push("system-alias");var l="";var u={};n.forEach(function(e,t){if(a[t][0]){u[e]=a[t][0]}});var f=o;l=JSON.stringify(u);var d={};if(t.getIframePostAllParams()===true){d=new r(o);s=ce(t,d,false);if(s!==""){o=ge(o,d)}}t.fireEvent("applicationConfiguration");e.openStart("form").attr("id",i).attr("method","post").attr("name",i).attr("target",t.getId()+"-iframe").attr("action",o).style("display","none").openEnd();e.voidStart("input").attr("name","sap-flp-params").attr("value",l).voidEnd();if(t.getIframePostAllParams()===true){ce(t,d,true,e)}e.close("form");var c=t.sId;if(t.hasStyleClass("sapUShellApplicationContainerIframeHidden")){p=true;t.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false)}t.sId+="-iframe";e.openStart("iframe",t).attr("name",t.getId()).accessibilityState(t).attr("sap-orig-src",f).attr("title",C.i18n.getText("AppilcationContainer.IframeTitle")).attr("sap-iframe-idx",++F).class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth());if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.attr("allow",w.replaceAll(";"," "+new g(o).origin()+";"))}e.openEnd().close("iframe");t.sId=c;if(p){t.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true)}}function ce(e,t,a,n){var r="";var o="";if(t.has("sap-iframe-hint")){r=t.get("sap-iframe-hint")}var i=t.mParams;if(e.getApplicationType()==="TR"||r==="GUI"){var s,p;for(s in i){if(s==="sap-iframe-hint"||s==="sap-keep-alive"){continue}p=i[s][0];if(a===true){n.voidStart("input").attr("name",s).attr("value",p).voidEnd()}else{o+="*"}}}return o}function ge(e,t){var a=t.get("sap-iframe-hint"),n=t.get("sap-keep-alive"),r=new g(e).query("");if(typeof a==="string"){r.addSearch("sap-iframe-hint",a)}if(typeof n==="string"){r.addSearch("sap-keep-alive",n)}return r.toString()}function me(e,t,a){if(a){e.openStart("div",t).attr("sap-iframe-app","true").class("sapUShellApplicationContainer").style("height",t.getHeight()).style("width",t.getWidth()).openEnd()}else{e.close("div")}}var he=l.extend(S,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:A+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},openWithPostByAppParam:{defaultValue:true,type:"boolean"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"},extendedInfo:{type:"object"},systemAlias:{defaultValue:"",type:"string"},iframePostAllParams:{defaultValue:false,type:"boolean"},isKeepAlive:{defaultValue:false,type:"boolean"},frameworkId:{defaultValue:"",type:"string"},iframeReusedForApp:{defaultValue:false,type:"boolean"},isIframeValidTime:{defaultValue:{time:0},type:"object"},isIframeBusy:{defaultValue:false,type:"boolean"}},events:{applicationConfiguration:{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,t=this;if(sap.ushell.Container){e=he.prototype._getLogoutHandler(t);if(e){sap.ushell.Container.detachLogoutEvent(e);x.remove(t.getId())}}localStorage.removeItem(t.globalDirtyStorageKey);if(t._unloadEventListener){removeEventListener("pagehide",t._unloadEventListener)}if(t._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",t._disableRouterEventHandler)}if(t._storageEventListener){removeEventListener("storage",t._storageEventListener)}if(t._messageEventListener){removeEventListener("message",t._messageEventListener)}he.prototype._destroyChild(t);if(l.exit){l.exit.apply(t)}},setHandleMessageEvent:function(e){R=e},init:function(){var t=this;t.globalDirtyStorageKey=E+n();t._unloadEventListener=t.exit.bind(t);addEventListener("pagehide",t._unloadEventListener);t._storageEventListener=function(a){var n=t.getApplicationType();if(a.key===t.globalDirtyStorageKey&&a.newValue===sap.ushell.Container.DirtyState.PENDING&&_.isApplicationTypeEmbeddedInIframe(n)){var r=t._getIFrame();if(r){e.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var o=new g(t._getIFrameUrl(r));var i=o.protocol()+"://"+o.host();r.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),i)}}};addEventListener("storage",t._storageEventListener);t._messageEventListener=he.prototype._handleMessageEvent.bind(null,t);addEventListener("message",t._messageEventListener)},onAfterRendering:function(){var e=this;this.rerender=function(){};if(c.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto")}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var t=document.getElementById(e.getId()+"-form");if(t){t.submit()}})}},renderer:{apiVersion:2,render:function(t,a){var n=a.getApplication(),r=a.launchpadData,o;if(!a.getVisible()){he.prototype._renderControlInDiv(t,a);return}if(a.bTestControl){he.prototype._renderControlInDiv(t,a,a.oTestControl)}else if(a.error){delete a.error;he.prototype._renderControlInDiv(t,a,he.prototype._createErrorControl())}else if(!n){he.prototype._render(t,a,a.getApplicationType(),a.getUrl(),a.getAdditionalInformation())}else if(!n.isResolvable()){he.prototype._render(t,a,n.getType(),n.getUrl(),"")}else if(r){he.prototype._render(t,a,r.applicationType,r.Absolute.url.replace(/\?$/,""),r.applicationData)}else{e.debug("Resolving "+n.getUrl(),null,S);n.resolve(function(t){e.debug("Resolved "+n.getUrl(),JSON.stringify(t),S);a.launchpadData=t;he.prototype._destroyChild(a)},function(e){var t=n.getMenu().getDefaultErrorHandler();if(t){t(e)}he.prototype._destroyChild(a);a.error=e});o=new i({text:he.prototype._getTranslatedText("loading",[n.getText()])});he.prototype._destroyChild(a);a.setAggregation("child",o);he.prototype._renderControlInDiv(t,a,o)}}}});he.prototype.getFrameSource=function(e,t){if(!Object.prototype.hasOwnProperty.call(m.enum,e)){throw new Error("Illegal application type: "+e)}return t};he.prototype.setUrl=function(e){pe(this,"url",e)};he.prototype.setAdditionalInformation=function(e){pe(this,"additionalInformation",e)};he.prototype.setApplicationType=function(e){pe(this,"applicationType",e)};he.prototype.createPostMessageRequest=function(e,t){var a=Date.now().toString();return{type:"request",request_id:a,service:e,body:t}};he.prototype.setNewTRApplicationContext=function(e){var t=new jQuery.Deferred,a=this._getIFrame(),n,r,o=this;if(!a){return t.promise().reject({message:"Expected an existing TR application application frame but found none."})}function i(){if(r){r["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);r["system-alias"]=o.getSystemAlias();n["sap-flp-params"]=r}var e=o.createPostMessageRequest("sap.its.startService",n);o.postMessageToIframe(e,a,true).then(function(){t.resolve()}).catch(function(e){t.reject({eventData:e,message:"Failed to change application context."})})}e=_.appendSapShellParam(e);e=he.prototype._filterURLParams(e);n={url:e};if(this.getIframeWithPost&&this.getIframeWithPost()===true){var s=[];var p=he.prototype._getParamKeys(e,s);if(p.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.getAppStateData(p).then(function(e){r={};s.forEach(function(t,a){if(e[a][0]){r[t]=e[a][0]}});i()},function(e){i()})})}else{r={};i()}}else{i()}return t.promise()};he.prototype.postMessageToIframe=function(t,a,n){var r=this;var o=t.request_id;return new Promise(function(i,s){function p(a){var n={};try{if(typeof a.data==="string"&&a.data.indexOf("{")===0){try{n=JSON.parse(a.data)}catch(e){n={}}}else{return}if(!n.request_id||o!==n.request_id){return}if(n.status==="success"){i(n)}else{s(n)}window.removeEventListener("message",p)}catch(n){i();e.warning("Obtained bad response from framework in response to message "+t.request_id);e.debug("Underlying framework returned invalid response data: '"+a.data+"'")}}var l=JSON.stringify(t);e.debug("Sending postMessage "+l+" to application container '"+r.getId()+"'");var u=new g(r._getIFrameUrl(a));var f=u.protocol()+"://"+u.host();if(n){window.addEventListener("message",p,false);a.contentWindow.postMessage(l,f)}else{a.contentWindow.postMessage(l,f);i()}})};he.prototype.postMessageToCurrentIframe=function(e,t){if(t===undefined){t=false}var a=this._getIFrame();if(!a){if(t){return Promise.reject({message:"Expected opened iframe not found."})}return}return this.postMessageToIframe(e,a,t)};he.prototype.setNewApplicationContext=function(e,t){var a=this;var n=this["setNew"+e+"ApplicationContext"];if(!n){return Promise.reject({message:"Unsupported application type"})}var r=this._getIFrame();if(!r){return Promise.reject({message:"Expected an existing TR application application frame but found none."})}var o=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(o,r,true).then(function(){return n.call(a,t)},function(e){return Promise.reject({eventData:e,message:"Failed to change application context."})})};he.prototype.onApplicationOpened=function(e){var t=this.getIsStateful();if(!t){return Promise.resolve()}var a=this.getApplicationType();if(a==="TR"&&e!=="TR"){var n=this._getIFrame();if(!n){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."})}var r=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(r,n,false).catch(function(e){return Promise.reject({eventData:e,message:"Failed to change application context."})})}return Promise.resolve()};he.prototype.postMessageRequest=function(e,t){var a=this._getIFrame();if(!a){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."})}var n=this.createPostMessageRequest(e,t||{});return this.postMessageToIframe(n,a,false).catch(function(e){return Promise.reject({eventData:e,message:"Failed to post message."})})};he.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),t;if(e&&e.enabled&&e.enabled===true){t=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(t,this._getIFrame(),true)}return undefined};he.prototype.getDeffedControlCreation=function(e){return this.oDeferredControlCreation?this.oDeferredControlCreation.promise():jQuery.Deferred().resolve().promise()};he.prototype._getCommunicationHandlers=j;he.prototype._adaptIsUrlSupportedResultForMessagePopover=N;he.prototype._getLogoutHandler=V;he.prototype._getParameterMap=W;he.prototype._getTranslatedText=k;he.prototype._createErrorControl=q;he.prototype._destroyChild=B;he.prototype._createUi5View=J;he.prototype._publishExternalEvent=K;he.prototype._createUi5Component=z;he.prototype._disableRouter=G;he.prototype._createSystemForUrl=$;he.prototype._isTrustedPostMessageSource=Q;he.prototype._handleMessageEvent=ee;he.prototype._logout=ne;he.prototype._renderControlInDiv=re;he.prototype._checkNwbcUrlAdjustment=oe;he.prototype._adjustNwbcUrl=ie;he.prototype._render=le;he.prototype._getParamKeys=fe;he.prototype._buildHTMLElements=de;he.prototype._buildHTMLForAllPostParams=ce;he.prototype._generateRootElementForIFrame=me;he.prototype._backButtonPressedCallback=X;he.prototype._getIFrame=Y;he.prototype._getIFrameUrl=Z;he.prototype._filterURLParams=ue;he.prototype._resetPluginsLoadIndications=ae;he.prototype._handlePostMessagesForPluginsPostLoading=te;return he},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/PagesAndSpaceId", ["sap/ushell/resources","sap/ushell/Config"],function(e,n){"use strict";var t=function(){};t.prototype._getPageAndSpaceId=function(e){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(n){if(e===undefined){e=window.hasher.getHash()}var t=n.parseShellHash(e)||{};var i={semanticObject:t.semanticObject||"",action:t.action||""};var a=t.params||{};var r=a.pageId||[];var s=a.spaceId||[];return this._parsePageAndSpaceId(r,s,i)}.bind(this))};t.prototype._parsePageAndSpaceId=function(n,t,i){return new Promise(function(a,r){this.getUserMyHomeEnablement().then(function(){if(n.length<1&&t.length<1){var s=i.semanticObject==="Shell"&&i.action==="home";var c=i.semanticObject===""&&i.action==="";if(s||c){this._getUserDefaultSpaceAndPage().then(function(e){a(e)}).catch(function(e){r(e)});return}r(e.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"))}if(n.length===1&&t.length===0){r(e.i18n.getText("PageRuntime.OnlyPageIdProvided"))}if(n.length===0&&t.length===1){r(e.i18n.getText("PageRuntime.OnlySpaceIdProvided"))}if(n.length>1||t.length>1){r(e.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"))}if(n[0]===""){r(e.i18n.getText("PageRuntime.InvalidPageId"))}if(t[0]===""){r(e.i18n.getText("PageRuntime.InvalidSpaceId"))}a({pageId:n[0],spaceId:t[0]})}.bind(this))}.bind(this))};t.prototype.getUserMyHomeEnablement=function(){return new Promise(function(e,t){var i=sap.ushell.Container.getUser().getShowMyHome();n.emit("/core/spaces/myHome/userEnabled",i);e(i)})};t.prototype._getUserDefaultSpaceAndPage=function(){return new Promise(function(n,t){Promise.all([sap.ushell.Container.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(i){var a=i[0];a.getDefaultSpace().then(function(i){if(!i){t(e.i18n.getText("PageRuntime.NoAssignedSpace"));return}var a=i&&i.children&&i.children[0];if(!a){t(e.i18n.getText("PageRuntime.NoAssignedPage"));return}n({spaceId:i.id,pageId:a.id})})}).catch(function(e){t(e)})}.bind(this))};return new t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/functionBindPrototype", ["sap/base/Log"],function(e){"use strict";e.error("The application uses an obsolete sap.ushell.functionBindPrototype module.","The reference to this module has to be removed.")},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/iconfonts", ["sap/ui/core/IconPool"],function(F){"use strict";var E={};E.registerFiori2IconFont=function(){F.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts"),lazy:true});F.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});F.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var E={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},e={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},i={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},n={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},t={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},r={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},a={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},l={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},A={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},c={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(E,i,e,A,o,n,c,t,r,a,l,s)};E.registerFonts=function(){var E,e,i,o;for(e=0;e<arguments.length;e=e+1){E=arguments[e];for(i=0;i<E.icons.length;i=i+1){o={};o.fontFamily=E.fontFamily;o.content=E.icons[i][1];o.overWrite=false;o.suppressMirroring=true;F.addIcon(E.icons[i][0],E.collectionName,o)}}};return E},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/library", ["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(e,l,a){"use strict";var s=sap.ui.getCore().initLibrary({name:"sap.ushell",version:"1.108.31",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.AppBoxPreviewSize","sap.ushell.FloatingNumberType"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.components.workPageBuilder.controls.WorkPageSection","sap.ushell.components.workPageBuilder.controls.WorkPageWidgetContainer","sap.ushell.services._VisualizationInstantiation.VizInstance","sap.ushell.services._VisualizationInstantiation.VizInstanceAbap","sap.ushell.services._VisualizationInstantiation.VizInstanceCdm","sap.ushell.services._VisualizationInstantiation.VizInstanceLaunchPage","sap.ushell.services._VisualizationInstantiation.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.contentFinder.AppBox","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellLayout","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});s.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};s.AllMyAppsProviderType={HOME:0,EXTERNAL:1,CATALOG:2};s.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};s.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};s.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};s.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};s.NavigationState={InProgress:"InProgress",Finished:"Finished"};s.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};s.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};s.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};s.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};s.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};s.AppBoxPreviewSize={Small:"Small",Large:"Large"};s.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/navigationMode", ["sap/base/Log","sap/base/util/isPlainObject"],function(e,n){"use strict";var a={};var i=function(n){var a=true;if(n){if(typeof n!=="object"){a=false}else{Object.keys(n).forEach(function(e){if(["GUI","WDA","WCF"].indexOf(e)===-1){a=false}else if(typeof n[e]!=="boolean"){a=false}})}}if(!a){e.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(n),"sap.ushell.services.navigationMode")}};a._isLegacyApplicationType=function(e){switch(e){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false}};var t=function(e){switch(e){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined}};var o=function(e,a){if(n(e)){return e[t(a)]}return false};a.compute=function(n,t,d,r,l){var s,p;i(l);var f={};if(["inplace","explace"].indexOf(t)>=0){f["sap-ushell-next-navmode"]=t}if(["inplace","explace","frameless"].indexOf(d)>=0){s=a._getInternalNavigationMode(d,n);e.debug("Navigation mode was forced to "+s,"because sap-ushell-navmode parameter was set to "+d+" for target with applicationType: "+r,"sap.ushell.navigationMode");f.navigationMode=s;f.explicitNavMode=true;return f}p=a._isLegacyApplicationType(r)&&a._isLegacyApplicationType(n);if(o(l,n)===true&&!p){f.navigationMode="embedded"}return f};a._getInternalNavigationMode=function(n,a){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!i.hasOwnProperty(a)){e.error(a+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null}if(n!=="inplace"&&n!=="explace"&&n!=="frameless"){e.error(n+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null}if(a==="SAPUI5"&&n==="frameless"){e.error("'"+n+"' is not a valid external navigation mode for application type '"+a+"'","falling back to internal navigation mode '"+i.SAPUI5.frameless+"'","sap.ushell.navigationMode")}return i[a][n]};a.getExternalNavigationMode=function(n){var a={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!a.hasOwnProperty(n)){e.error(n+" is not a recognized internal navigation mode","expected one of "+Object.keys(a).join(","),"sap.ushell.navigationMode");return null}return a[n]};var d=["NWBC","WDA","TR","WCF"];a.getNavigationMode=function(n,a){var i=n.additionalInformation,t=n.applicationType,o,r;if(d.indexOf((a||{}).applicationType)>-1&&!(a||{}).explicitNavMode){return"newWindowThenEmbedded"}if(n.appCapabilities&&n.appCapabilities.navigationMode){return n.appCapabilities.navigationMode}if((i===null||typeof i==="string"||typeof i==="undefined")&&(t==="URL"||t==="SAPUI5")){if(i&&i.indexOf("managed=")===0){if(i==="managed=FioriWave1"){return"embedded"}if(i==="managed="){return"newWindow"}return undefined}if(i&&i.indexOf("SAPUI5.Component=")===0){o="[a-zA-Z0-9_]+";r=["^SAPUI5.Component=",o,"([.]",o,")*$"].join("");if(!new RegExp(r).test(i)){e.warning(["The UI5 component name in",i,"is not valid.","Please use names satisfying",r].join(" "))}return"embedded"}return"newWindow"}if(d.indexOf(t)>-1){return"newWindowThenEmbedded"}return undefined};a.computeNavigationModeForHomepageTiles=function(e,n,a){var i={applicationType:e,additionalInformation:n};if(d.indexOf(e)>-1&&a){return"embedded"}return this.getNavigationMode(i)};return a},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/override", ["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(t,e,i,n){"use strict";var r={};r.updateAggregation=function(t){if(this.isTreeBinding(t)){e.prototype.updateAggregation.apply(this,arguments)}else{var n=this.mBindingInfos[t],s=n.binding,o=s.getContexts(),a=n.factory,g=this.getMetadata().getJSONKeys()[t],u=g._sMutator+"Group",d=s.isGrouped()&&this[u],p=[],l=function(t){var e=this.getId()+"-"+i(),r=a(e,t);if(r.isA("sap.ui.integration.widgets.Card")){r.setBindingContext(t,"ushellCardModel")}else{r.setBindingContext(t,n.model)}this[g._sMutator](r)}.bind(this);if(d){e.prototype.updateAggregation.apply(this,arguments)}else{p=this[g._sGetter]();r._adaptCurrentGroup(o,p);r._updateCurrentGroup(o,p,n.model,l);p.length=o.length}}};r._adaptCurrentGroup=function(t,e){var i,n,r;for(i=0;i<t.length;i++){n=!!(e[i]&&e[i].isA("sap.ui.integration.widgets.Card"));r=!!t[i].getProperty(t[i].sPath+"/isCard");if(n||r){var s=i;for(;s<e.length;s++){e[s].destroy()}break}}};r._updateCurrentGroup=function(t,e,i,n){var r;for(r=0;r<t.length;r++){if(r<e.length&&!e[r].bIsDestroyed){e[r].setBindingContext(t[r],i)}else{n(t[r])}}for(;r<e.length;++r){e[r].destroy()}};r.updateAggregationGrouped=function(e){var i=this.mBindingInfos[e],r=i.binding,s=i.factory,o,a=null,g=null,u=null,d=this,p=d.getItems(),l=0,f=0,h,c,y=[];g=r.isGrouped()&&this.addItemGroup;n(r.getContexts(),function(e,m){if(g&&r.aSorters.length>0){a=r.aSorters[0].fnGroup(m);if(typeof a==="string"){a={key:a}}if(a.key!==u){var C,I;if(i.groupHeaderFactory){C=i.groupHeaderFactory(a)}I=C||new t({title:a.text||a.key}).addStyleClass("sapMListHdr");d.insertAggregation("items",I,f,true);f=f+1;u=a.key}}p=d.getItems();for(h=f;h<p.length;h=h+1){if(p[h].constructor===t){y.push(d.removeItem(p[h]));p=d.getItems()}}if(f<p.length){p[f].setBindingContext(m,i.model);if(p[f].aDelegates){n(p[f].aDelegates,function(t,e){e.vThis=m})}}else{c=d.getId()+"-"+f;o=s(c,m);o.setBindingContext(m,i.model);d.addItem(o)}f=f+1;l=f});for(h=p.length-1;h>=l;h=h-1){y.push(d.removeItem(p[h]))}setTimeout(function(){n(y,function(t,e){e.destroy()})},1)};r.updateAggregatesFactory=function(t){return function(){r.updateAggregation.bind(this)(t)}};return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/FesrEnhancer", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/performance/ShellAnalytics"],function(e,t,r,n){"use strict";var a={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION",CUSTOM_HOME_INITIAL:"FLPCUSTOMHOME"};var i={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};var s={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(r.getActive()){n.enable();this._fnOriginalOnBeforeCreated=r.onBeforeCreated;r.onBeforeCreated=this._onBeforeCreatedHandler.bind(this)}},reset:function(){r.onBeforeCreated=this._fnOriginalOnBeforeCreated;n.disable();this._setLastTrackedRecord(null)},_getPerformanceEntries:function(e){return performance.getEntriesByName(e)},_getLastTrackedApplicationId:function(){var e=n.getCurrentApplication();if(e){return e.id}return null},_getLastTrackedRecord:function(){return this._lastTrackedRecord},_setLastTrackedRecord:function(e){this._lastTrackedRecord=e},_onBeforeCreatedHandler:function(t,r){var n=this._detectScenario(t,r),a=this._getLastTrackedApplicationId();if(a){t.appNameShort=a}if(!n.scenario){e.debug("[fesrEnhFlp] unknown scenario, step name: "+t.stepName);return t}var i=this._enhanceRecord(n.scenario,t,n.relatedEvent);e.debug("[fesrEnhFlp] pass step name: "+i.stepName);e.debug("[fesrEnhFlp] pass short application name: "+i.appNameShort);e.debug("[fesrEnhFlp] pass long application name: "+i.appNameLong);if(/tile.*press/.test(i.stepName)){e.debug("[fesrEnhFlp] did not overwrite press step name")}if(/__cdm/.test(i.stepName)){e.debug("[fesrEnhFlp] did not overwrite press step name(cdm)")}return i},_detectScenario:function(e,t){function r(e,t){var r={scenario:e};if(t){r.relatedEvent=t}return r}if(e.stepName==="undetermined_startup"){var i=n.getLastClosedRecord();this._setLastTrackedRecord(i);if(!!i&&i.isHomeApp){return r(a.CUSTOM_HOME_INITIAL)}switch(e.appNameLong){case"sap.ushell.components.homepage":return r(a.HOME_INITIAL);case"sap.ushell.components.pages":return r(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return r(a.FINDER_INITIAL);default:return r(a.APP_INITIAL,i)}}var s=this._getLastTrackedRecord(),c=n.getNextNavigationRecords(s),o,p;if(c.length===1){p=c[0];if(p&&s&&!p.isEqual(s)||!s&&p){this._setLastTrackedRecord(p);o=p.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return r(o,p)}}else if(c.length>1){c.pop();p=c[0];this._setLastTrackedRecord(p);o=p.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return r(o,p)}return r(null)},_enhanceRecord:function(t,r,n){switch(t){case a.HOME_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-Homepage");case a.CUSTOM_HOME_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-Homepage-Custom");case a.FINDER_INITIAL:return this._enhanceInitialStart(r,t,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(r,t,n||{});case a.NAVIGATION:case a.HOME_LOADING:return this._enhanceNavigationRecord(r,t,n||{});default:break}e.warning("[fesrEnhFlp] Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return r},_enhanceInitialStart:function(r,n,s){var c,o=t({},r);if(n===a.CUSTOM_HOME_INITIAL){o.stepName=n+"@"+r.appNameShort}else{o.stepName=n}o.interactionType=i.APP_START;if(s){c=this._getPerformanceEntries(s)[0];if(c){o.timeToInteractive=c.startTime;return o}e.warning("[fesrEnhFlp] Scenario '"+n+"' detected but expected performance mark '"+s+"' does not exist",null,"sap.ushell.performance.FesrEnhancer")}return o},_enhanceNavigationRecord:function(e,r,n){var a=t({},e);if(r!=="FLP@DURING_LOAD"){a.stepName=n.step||e.stepName}a.appNameShort=n.targetApplication||"";if(n.applicationType==="UI5"){a.interactionType=i.APP_START}if(/^FLP_BACK/.test(a.stepName)){var s=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(s){if(s.startTime>n.getTimeStart()){a.timeToInteractive=s.startTime-n.getTimeStart()}}}return a},_enhanceInitialAppStart:function(e,r,n){var a=t({},e);a.stepName=r;a.appNameShort=e.appNameShort;if(n.applicationType==="UI5"){a.interactionType=i.APP_START}else{a.interactionType=i.STEP_IN_APP}return a}};return s},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/ShellAnalytics", ["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord","sap/ushell/utils","sap/ushell/Config"],function(e,n,t,a,i){"use strict";var r=[],o=[],s,c,u,l=false,p=false;var h={dashboardTileClick:"HOMEPAGE_TILE",dashboardTileLinkClick:"HOMEPAGE_LINK",catalogTileClick:"FINDER_TILE"};var f={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var d={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};var g=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];function C(){return sap.ui.getCore().getEventBus()}function v(e,n){if(n){return true}return e&&(e==="FLP_HOME"||e==="FLP_PAGE")}function m(){return r}function E(){var e=m().filter(function(e){return e.isClosed()});if(e.length>0){return e[e.length-1]}return null}function A(e){if(!e){return m()}return m().filter(function(n){return e.getTimeStart()<n.getTimeStart()&&n.isClosed()})}function I(){return c}function P(e){c=e}function T(){u=performance.now();a.setPerformanceMark("FLP -- change hash")}function L(){if(!s){s=new t;r.push(s)}return s}function H(e,n){L().setTrigger(h[n])}function N(e){L().setTargetHash(e);L().setTimeStart(u||performance.now())}function R(e){var n=e||"";if(n.slice(-7)==="(TCODE)"){return n.replace(/ .*/,"").replace(/^\*/,"").substring(0,15).concat(" (TR)")}return n}function y(e){var n="";var t=e&&e.componentInstance&&e.componentInstance.getManifest();if(t&&t["sap.app"]&&t["sap.app"].id){n=t["sap.app"].id}return n}function S(){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(e){var t=e.getCurrentApplication();if(!t){return{}}var a=t&&t.componentInstance&&t.componentInstance.sId&&t.componentInstance.sId.includes("homeApp-component");var i;if(t.getTechnicalParameter){i=t.getTechnicalParameter("sap-fiori-id")}else{i=Promise.resolve([])}return i.then(function(e){var i=e&&e[0];if(a){return{type:"UI5",id:i,isHomeApp:true}}if(t.homePage){var r=d[y(t)]||"FLP_HOME";return{type:"UI5",id:r}}if(t.applicationType==="UI5"){if(!i){i=y(t);i=d[i]||i}i=i.replace(/,/g,"");return{type:"UI5",id:i}}var o=n.getMetadata().technicalName||n.getCurrentApplication().text||t.applicationType;var s=R(o.replace(/,/g,""));return{type:t.applicationType,id:s}})})}function b(e,n,t){if(s){var a=n?n.id:null;s.setSourceApplication(e);s.setTargetApplication(a);s.setApplicationType(n?n.type:null);s.setNavigationMode(t);s.setIsHomeApp(n&&n.isHomeApp);if(!l&&v(a,n&&n.isHomeApp)){l=true;s.setHomepageLoading(true)}s.closeRecord();s=null}}function k(e){if(!s){return}S().then(function(n){var t=I();if(e&&e.technicalName){n.id=R(e.technicalName);n.type=n.id.slice(-4)==="(TR)"?"GUI":"NWBC"}P(n);b(t?t.id:undefined,n,f.INPLACE)})}function F(){var e=I();b(e?e.id:undefined,null,f.EXPLACE)}function M(){if(s){var e=I();s.setSourceApplication(e?e.id:undefined);s.closeRecordWithError();s=null}}function _(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.attachEvent("hashChanged",T);e.hashChanger.attachEvent("shellHashChanged",T)})}function O(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hashChanger.detachEvent("hashChanged",T);e.hashChanger.detachEvent("shellHashChanged",T)})}function w(){if(p){return}p=true;g.forEach(function(e){C().subscribe("launchpad",e,H)});var n;n=e.once("ShellNavigationInitialized").do(_);o.push(n);n=e.on("trackHashChange").do(N);o.push(n);n=e.on("AppRendered").do(k);o.push(n);n=e.on("CustomHomeRendered").do(k);o.push(n);n=e.on("openedAppInNewWindow").do(F);o.push(n);n=e.on("firstSegmentCompleteLoaded").do(k);o.push(n);n=e.on("doHashChangeError").do(M);o.push(n);n=e.on("PagesRuntimeRendered").do(k);o.push(n);n=e.on("CloseFesrRecord").do(k);o.push(n)}function G(){if(!p){return}g.forEach(function(e){C().unsubscribe("launchpad",e,H)});o.forEach(function(e){e.off()});O();P(null);r=[];s=null;p=false}return{enable:w,disable:G,getAllRecords:m,getCurrentApplication:I,getLastClosedRecord:E,getNextNavigationRecords:A}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/StatisticalRecord", ["sap/base/Log","sap/ushell/Config"],function(t,i){"use strict";var e={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};function o(){this.status=e.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;this.homepageLoading=false;this.applicationType=null}o.prototype._calculateStep=function(){if(this.targetApplication===undefined&&this.sourceApplication===undefined){return""}if(this.sourceApplication===undefined&&this._isHomePage(this.targetApplication)){return"FLP@DURING_LOAD"}if(this.sourceApplication===undefined&&!this._isHomePage(this.targetApplication)){return"FLP@DEEP_LINK"}if(this.sourceApplication&&!this._isHomePage(this.targetApplication)&&!this._isHomePage(this.sourceApplication)){return"A2A@"+this.sourceApplication}if(this.sourceApplication&&this._isHomePage(this.targetApplication)&&!this._isHomePage(this.sourceApplication)){return"FLP_BACK@"+this.sourceApplication}if(this._isHomePage(this.sourceApplication)){return"FLP@HOMEPAGE_TILE"}return""};o.prototype.isEqual=function(t){return this.timeStart===t.timeStart};o.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=e.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart}t.debug("[fesrEnhFlp] Close statistical record with step name: "+this.step)};o.prototype.closeRecordWithError=function(){this.status=e.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart};o.prototype.isClosed=function(){return this.status===e.CLOSED};o.prototype.getStep=function(){return this.step};o.prototype.setTrigger=function(t){this.trigger=t};o.prototype.setTargetHash=function(t){this.targetHash=t};o.prototype.setTimeStart=function(t){this.timeStart=t};o.prototype.getTimeStart=function(){return this.timeStart};o.prototype.getTimeEnd=function(){return this.timeEnd};o.prototype.setSourceApplication=function(t){this.sourceApplication=t};o.prototype.setTargetApplication=function(t){this.targetApplication=t};o.prototype.setNavigationMode=function(t){this.navigationMode=t};o.prototype.setHomepageLoading=function(t){this.homepageLoading=t};o.prototype.setApplicationType=function(t){this.applicationType=t};o.prototype.setIsHomeApp=function(t){this.isHomeApp=!!t};o.prototype._isHomePage=function(t){if(this.isHomeApp){return true}return t&&(t==="FLP_HOME"||t==="FLP_PAGE")};return o},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/AccessKeysHandler", ["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(e,t,n,s,o,i){"use strict";var r=e.extend("sap.ushell.renderers.fiori2.AccessKeysHandler",{constructor:function(){e.apply(this,arguments);o.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[]}});r.prototype.init=function(e){this.oModel=e;document.addEventListener("keydown",function(e){if(e.keyCode===16){return}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e)}.bind(this),0)}else{this._handleEventUsingExternalKeysHandler(e)}var t=s.last("/core/shell/model/currentState/stateName");if(t!=="headerless"&&t!=="headerless-home"){var n=t==="home"||t==="app"||t==="minimal";this.handleShortcuts(e,n)}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e)}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this)};r.prototype.appOpenedHandler=function(){var e=n.getHash();if(e!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null}this.sLastExternalKeysHandlerUrl=e};r.prototype._focusItemInOverflowPopover=function(e,t){var n=sap.ui.getCore().byId("headEndItemsOverflow");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=window.document.getElementById("endItemsOverflowBtn");if(s){s.click();var o=this;window.setTimeout(function(){o._focusItemInOverflowPopover(e,++t)},300)}}};r.prototype._focusItemInUserMenu=function(e,t){var n=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(n&&n.isOpen()){if(n.getContent().length){this._focusItemInPopover(e,n.getContent()[0].getItems())}}else if(t<10){var s=this;o.emit("showMeArea",Date.now());window.setTimeout(function(){s._focusItemInUserMenu(e,++t)},300)}};r.prototype._focusItemInPopover=function(e,t){for(var n=0;n<t.length;n++){var s=t[n].getId().split("-");if(s[s.length-1]===e){t[n].getDomRef().focus();return}}};r.prototype._handleAccessOverviewKey=function(e){var n=this.oModel.getProperty("/searchAvailable"),o=this.oModel.getProperty("/personalization"),r=s.last("/core/catalog/enabled"),a=s.last("/core/shell/model/enableNotifications");if(t.browser.msie){document.addEventListener("help",this._cancelHelpEvent)}var l=[];l=l.concat(this.aShortcutsDescriptions);var u;var f;if(t.os.macintosh){u=i.i18n.getText("OptionKey");f=i.i18n.getText("CommandKey")}else{u=i.i18n.getText("AltKey");f=i.i18n.getText("ControlKey")}if(window.document.getElementById("shell-header")){if(r&&e){l.push({text:u+" + A",description:i.i18n.getText("hotkeyFocusOnAppFinderButton")})}if(n){l.push({text:u+" + F",description:i.i18n.getText("hotkeyFocusOnSearchButton")})}l.push({text:u+" + H",description:i.i18n.getText("hotkeyHomePage")});l.push({text:u+" + M",description:i.i18n.getText("hotkeyFocusOnUserActionMenu")});if(a){l.push({text:u+" + N",description:i.i18n.getText("hotkeyFocusOnNotifications")})}if(e){l.push({text:u+" + S",description:i.i18n.getText("hotkeyFocusOnSettingsButton")});l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("CommaKey"),description:i.i18n.getText("hotkeyOpenSettings")})}if(o&&r){l.push({text:i.i18n.getText("ControlKey")+" + "+i.i18n.getText("EnterKey"),description:i.i18n.getText("hotkeyExitEditing")})}if(n){l.push({text:f+" + "+i.i18n.getText("ShiftKey")+" + F",description:i.i18n.getText("hotkeyFocusOnSearchField")})}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(e,t,n,s){var o=new s;l.forEach(function(t){o.addItem(new e({text:t.description}));o.addItem(new n({text:t.text}).addStyleClass("sapUiSmallMarginBottom"))});t.show(o,{id:"hotKeysGlossary",title:i.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"})})};r.prototype._focusAppFinderButton=function(){if(!s.last("/core/catalog/enabled")){return}if(this._isFocusInDialog()){return}var e=window.document.getElementById("openCatalogBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return}this._focusItemInUserMenu("openCatalogBtn",0)};r.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("userSettingsBtn");if(e){e.focus();return}var t=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(t.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return}this._focusItemInUserMenu("userSettingsBtn",0)};r.prototype._blockBrowserDefault=function(e){return new Promise(function(n){if(t.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");n()}},0)}}else{n()}e.preventDefault()})};r.prototype._handleAltShortcutKeys=function(e,t){var n=sap.ui.getCore().byId("shell-header"),s=sap.ui.getCore().byId("sapUshellMeAreaPopover"),i=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return}if(n){if(t){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this))}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this))}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("sf"),t=window.document.getElementById("searchFieldInShell-button");if(e){e.focus()}else if(t){t.focus()}else{this._focusItemInOverflowPopover("sf",0)}}.bind(this))}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=document.getElementById("shell-header-logo");if(e){e.focus();return}}.bind(this))}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(s&&s.isOpen())){o.emit("showMeArea",Date.now())}}.bind(this))}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(i&&i.isOpen())){o.emit("showNotifications",Date.now())}}.bind(this))}}};r.prototype._handleCtrlShortcutKeys=function(e,t){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var n=sap.ui.getCore().byId("sf");if(n){n.firePress();e.preventDefault();e.stopPropagation()}}}else if(e.keyCode===188&&t){if(this._isFocusInDialog()){return}var o=sap.ui.getCore().byId("userSettingsBtn");if(o&&!this._isFocusInSmartTable()){o.firePress();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}this._handleAccessOverviewKey(t)}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}var i=window.document.getElementById("appFinderSearch-I");if(i){i.focus();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return}if(s.last("/core/spaces/enabled")){this.fireEvent("editModeDone")}else{var r=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(r&&r.getDomRef()){r.firePress();e.preventDefault();e.stopPropagation()}}}};r.prototype.handleShortcuts=function(e,n){if(t.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation()}e.preventDefault()}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,n)}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,n)}};r.prototype.registerAppKeysHandler=function(e){this.fnExternalKeysHandler=e;this.sLastExternalKeysHandlerUrl=n.getHash()};r.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null};r.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler};r.prototype.registerAppShortcuts=function(e,t){this.fnExternalShortcuts=e;this.aShortcutsDescriptions=t};r.prototype._handleFocusBackToMe=function(e,t){this.bFocusOnShell=true;var n;if(t){n=window.document.getElementById(t)}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6"}var s=sap.ui.getCore().byId("shell-header");if(s){s.setFocusOnShellHeader(!this.bForwardNavigation);this.fromOutside=false}}if(n){n.focus();this.fromOutside=false}this.bFocusPassedToExternalHandlerFirstTime=true};r.prototype.setIsFocusHandledByAnotherHandler=function(e){this.isFocusHandledByAnotherHandler=e};r.prototype.sendFocusBackToShell=function(e){var t,n;if(typeof e==="string"){n=e}else if(typeof e==="object"){t=e}this._handleFocusBackToMe(t,n)};r.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false}}this.setIsFocusHandledByAnotherHandler(false)};r.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent)};r.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};r.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true}}return false};r.prototype._isFocusInSmartTable=function(){var e=document.activeElement;var t;for(;e!==document.body;e=e.parentNode){t=e.classList;if(t.contains("sapUiCompSmartTable")||t.contains("sapUiMdcTable")){return true}}return false};return new r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/History", function(){"use strict";var t=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={}};t.prototype.hashChange=function(t){var i=this._history.indexOf(t);if(i===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1)}this._history.push(t);this._historyPosition+=1;this.backwards=false;this.forwards=false}else{this.backwards=this._historyPosition>i;this.forwards=this._historyPosition<i;this._historyPosition=i}};t.prototype.pop=function(){var t;if(this._history.length>0){t=this._history.pop();this._historyPosition--}return t};t.prototype.isVirtualHashchange=function(t,i){return this._virtual.hasOwnProperty(i)&&this.getCurrentHash()===t&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===i};t.prototype.setVirtualNavigation=function(t){this._virtual[t]=true};t.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null};t.prototype.getHashIndex=function(t){return this._history.indexOf(t)};t.prototype.getHistoryLength=function(){return this._history.length};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/LogonFrameProvider", ["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(e,t,a,s,l,i){"use strict";function o(){r();var o=new t({id:"SAMLDialog",title:i.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new a("SAMLDialogFrame",{content:'<iframe id=SAMLDialogFrame src=""></iframe>'}),rightButton:new e({text:i.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(l.last("/core/extension/SupportTicket")){var u=new s;u.setWidth("150px");u.setIcon("");o.setLeftButton(u)}o.open();n(true);return document.getElementById("SAMLDialogFrame")}function n(e){var t=document.getElementById("sap-ui-blocklayer-popup");if(t){if(e){t.classList.add("sapUshellSamlDialogHidden")}else{t.classList.remove("sapUshellSamlDialogHidden")}}}function r(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.destroy()}}function u(){var e=sap.ui.getCore().byId("SAMLDialog");if(e){e.removeStyleClass("sapUshellSamlDialogHidden");n(true)}}return{create:o,show:u,destroy:r}},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Renderer", ["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(e,t,o,n,r,i,l,a,s,p,d,u,jQuery,h,c,f,g,m,y,S){"use strict";var C=f.mvc.ViewType;var w=g.AppType;var I=e.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.108.31",dependencies:{version:"1.108.31",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:function(){if(o.last("/core/homeApp/enabled")){return"homeapp"}if(o.last("/core/workPages/enabled")&&o.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(o.last("/core/workPages/enabled")&&o.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(o.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:o.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:function(){if(o.last("/core/workPages/enabled")&&o.last("/core/workPages/myHome/pageId")!==null){return"workpages"}if(o.last("/core/workPages/enabled")&&o.last("/core/workPages/myHome/pageId")===null){return"runtimeSwitcher"}if(o.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"openWorkPage",pattern:["Launchpad-openWorkPage?:hashParameters:","Launchpad-openWorkPage"],target:"workpages"}],targets:{home:{name:"homepage",type:"Component",title:d.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:o.last("/core/home/featuredGroup/enable")?["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]}}},workpages:{name:"workPageRuntime",type:"Component",id:"workPageRuntime-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}},runtimeSwitcher:{name:"runtimeSwitcher",type:"Component",id:"runtimeSwitcher-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}}}}},init:function(){e.prototype.init.apply(this,arguments);var t=this.getRouter();if(o.last("/core/homeApp/enabled")){this._getHomeAppTarget().then(function(e){t.getTargets().addTarget("homeapp",e);t.getTarget("homeapp").attachEventOnce("display",function(){n.emit("CoreResourcesComplementLoaded",{status:"success"})})})}t.getRoute("home").attachMatched(this._prepareHomepage,this);t.getRoute("openFLPPage").attachMatched(this._prepareHomepage,this);t.getRoute("openWorkPage").attachMatched(this._prepareHomepage,this);t.getRoute("appfinder-legacy").attachMatched(function(e){t.navTo("appfinder",{},true)});t.getRoute("appfinder").attachMatched(function(e){if(!o.last("/core/catalog/enabled")){h.warning("AppFinder is disabled. Re-route to the homepage.");t.navTo("home",null,true);return}n.emit("trackHashChange","Shell-appFinder");var r=sap.ui.getCore().getComponent(this.createId("Shell-appfinder-component"));var l=e.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){i.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder")}p.setCurrentApplication(null);var a=r.getRouter();r.getRootControl().loaded().then(function(){a.parse(l["innerHash*"]||"")});i.switchViewState("app",false,"Shell-appfinder");i.getAppMeta().setAppIcons();s.initializeAccessKeys()},this);var r=new a(l);r.setDefaultBindingMode("OneWay");this.setModel(r,"device");this.setModel(d.i18nModel,"i18n")}});I.prototype._prepareHomepage=function(e){n.emit("trackHashChange","Shell-home");if(p.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.setIsInitialNavigation(false)})}var t=window.hasher.getHash();if(!o.last("/core/spaces/enabled")&&t.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.replaceHashWithoutNavigation("Shell-home")})}var l=d.i18n.getText("homeBtn_tooltip");var a=this.getShellConfig().rootIntent;var u=!a||r.isFlpHomeIntent(a);i.switchViewState(u?"home":"app",false,"Shell-home");this.setCurrentCoreView("home");p.setCurrentApplication(null);i.getShellUIService().setTitle(l);i.getShellUIService().setHierarchy();i.getShellUIService().setRelatedApps();i.getAppMeta().setAppIcons();s.initializeAccessKeys()};I.prototype._getHomeAppTarget=function(){return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){var t=o.last("/core/homeApp/component");var n=e.getCoreResourcesComplementBundle();if(t.url){return{name:t.name,type:"Component",id:"homeApp-component",path:"",options:{url:t.url,componentData:{},asyncHints:Object.assign({},t.asyncHints||{},{preloadBundles:n.aResources})}}}return{name:"error",type:"Component",id:"homeApp-component",path:"sap/ushell/components/homeApp",options:{componentData:{},asyncHints:{preloadBundles:n.aResources}}}})};I.prototype.createContent=function(){var e=new u(window.location.href).get("appState")||new u(window.location.href).get("sap-ushell-config"),t,n=this.getComponentData()||{},r={applications:{"Shell-home":{}},rootIntent:"Shell-home"};t=e==="headerless-opt"?"headerless":e;if(t){if(!n.config){n.config={}}n.config.appState=t;n.config.appStateOrig=e;n.config.inHeaderLessOpt=e==="headerless-opt"}if(n.config){if(n.config.rootIntent===undefined){n.config.migrationConfig=true}n.config=jQuery.extend(true,r,n.config);jQuery.extend(n.config.applications["Shell-home"],o.last("/core/home"),o.last("/core/catalog"));if(n.config.appState==="headerless"||n.config.appState==="merged"||n.config.appState==="blank"){n.config.enablePersonalization=false;o.emit("/core/shell/enablePersonalization",false)}else{n.config.enablePersonalization=o.last("/core/shell/enablePersonalization")}if(!n.config.enablePersonalization){n.config.moveEditHomePageActionToShellHeader=false;n.config.moveAppFinderActionToShellHeader=false}}var l=o.createModel("/core/shell/model",a);n.shellModel=l;if(!this.getComponentData().async){h.error("sap/ushell/renderers/fiori2/Renderer component is created synchronously. Synchronous instantiation is not allowed. Please use async:true in component data");var s=sap.ui.view("mainShell",{type:C.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:n});s.setModel(l);this._oShellView=s;this.oShellModel=i.getElementsModel();s.loaded().then(function(e){sap.ushell.renderers.fiori2.utils.init(e.getController());this.shellCtrl=e.oController}.bind(this));return s}return m.create({id:"mainShell",viewName:"module:sap/ushell/renderers/fiori2/ShellAsync.view",viewData:n}).then(function(e){e.setModel(l);this._oShellView=e;this.oShellModel=i.getElementsModel();sap.ushell.renderers.fiori2.utils.init(e.getController());this.shellCtrl=e.getController();return e}.bind(this))};I.prototype.createExtendedShellState=function(e,t){return i.shellElements().createExtendedShellState(e,t)};I.prototype.applyExtendedShellState=function(e,t){this.oShellModel.applyExtendedShellState(e,t)};I.prototype.showLeftPaneContent=function(e,t,o){var n=typeof e==="string"?[e]:e;if(t){i.shellElements().addShellModelForApplications("paneContent",n)}else{this.oShellModel.addLeftPaneContent(n,false,o)}};I.prototype.showHeaderItem=function(e,t,o){var n=typeof e==="string"?[e]:e;if(t){i.shellElements().addShellModelForApplications("headItems",n)}else{this.oShellModel.addHeaderItem(n,false,o)}};I.prototype.showRightFloatingContainerItem=function(e,t,o){var n=typeof e==="string"?[e]:e;if(t){i.shellElements().addShellModelForApplications("RightFloatingContainerItems",n)}else{this.oShellModel.addRightFloatingContainerItem(n,false,o)}};I.prototype.showRightFloatingContainer=function(e){i.shellElements().setShellModelForApplications("showRightFloatingContainer",e)};I.prototype.showToolAreaItem=function(e,t,o){this.oShellModel.addToolAreaItem(e,true,t,o)};I.prototype.showActionButton=function(e,t,o){var n=[],r=[],l;if(typeof e==="string"){e=[e]}n=e.filter(function(e){l=sap.ui.getCore().byId(e);return l instanceof sap.m.Button&&!(l instanceof sap.ushell.ui.launchpad.ActionItem)});r=e.filter(function(e){l=sap.ui.getCore().byId(e);return l instanceof sap.ushell.ui.launchpad.ActionItem});if(n.length){this.convertButtonsToActions(n,t,o)}if(r.length){if(t){i.shellElements().addShellModelForApplications("actions",e)}else{this.oShellModel.addActionButton(e,false,o)}}};I.prototype.showFloatingActionButton=function(e,t,o){if(t){i.shellElements().addShellModelForApplications("floatingActions",typeof e==="string"?[e]:e)}else{this.oShellModel.addFloatingActionButton(typeof e==="string"?[e]:e,false,o)}};I.prototype.showHeaderEndItem=function(e,t,o){if(t){i.shellElements().addShellModelForApplications("headEndItems",typeof e==="string"?[e]:e)}else{this.oShellModel.addHeaderEndItem(typeof e==="string"?[e]:e,false,o)}};I.prototype.setHeaderVisibility=function(e,t,o){if(t){i.shellElements().setShellModelForApplications("headerVisible",e)}else{this.oShellModel.setHeaderVisibility(e,false,o)}};I.prototype.showSubHeader=function(e,t,o){if(t){i.shellElements().addShellModelForApplications("subHeader",typeof e==="string"?[e]:e)}else{this.oShellModel.addSubHeader(typeof e==="string"?[e]:e,false,o)}};I.prototype.showSignOutItem=function(e,t){if(e){i.shellElements().addShellModelForApplications("actions",["logoutBtn"],false)}else{this.oShellModel.showSignOutButton(e,t)}};I.prototype.showSettingsItem=function(e,t){this.oShellModel.showSettingsButton(e,t)};I.prototype.setFooter=function(e){this.shellCtrl.setFooter(e)};I.prototype.setShellFooter=function(e){var t=new jQuery.Deferred,o=this,n,r,i=e.controlType,l=e.oControlProperties;if(l&&l.id&&sap.ui.getCore().byId(l.id)){r=sap.ui.getCore().byId(l.id);if(r){if(this.lastFooterId){this.removeFooter()}this.lastFooterId=r.getId();this.shellCtrl.setFooter(r);t.resolve(r)}}if(i){n=i.replace(/\./g,"/");sap.ui.require([n],function(e){r=new e(l);if(o.lastFooterId){o.removeFooter()}o.lastFooterId=r.getId();o.shellCtrl.setFooter(r);t.resolve(r)})}else{h.warning("You must specify control type in order to create it")}return t.promise()};I.prototype.setFooterControl=function(e,t){var o=e.replace(/\./g,"/"),n=sap.ui.require(o),r,i=false;if(n){i=true}else if(!c.get(e||"")){h.error("Renderer.setFooterControl: the referenced control resourse "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}r=this.createItem(t,undefined,function(t){if(e){if(i){return new n(t)}var o=c.get(e||"");return new o(t)}h.warning("You must specify control type in order to create it");return undefined});if(this.lastFooterId){this.removeFooter()}this.lastFooterId=r.getId();this.shellCtrl.setFooter(r);return r};I.prototype.hideHeaderItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderItem([e],t,o)}else{this.oShellModel.removeHeaderItem(e,t,o)}};I.prototype.removeToolAreaItem=function(e,t,o){if(typeof e==="string"){e=[e]}this.oShellModel.removeToolAreaItem(e,t,o)};I.prototype.removeRightFloatingContainerItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeRightFloatingContainerItem([e],t,o)}else{this.oShellModel.removeRightFloatingContainerItem(e,t,o)}};I.prototype.hideActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeActionButton([e],t,o)}else{this.oShellModel.removeActionButton(e,t,o)}};I.prototype.hideLeftPaneContent=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeLeftPaneContent([e],t,o)}else{this.oShellModel.removeLeftPaneContent(e,t,o)}};I.prototype.hideFloatingActionButton=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeFloatingActionButton([e],t,o)}else{this.oShellModel.removeFloatingActionButton(e,t,o)}};I.prototype.hideHeaderEndItem=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeHeaderEndItem([e],t,o)}else{this.oShellModel.removeHeaderEndItem(e,t,o)}};I.prototype.hideSubHeader=function(e,t,o){if(typeof e==="string"){this.oShellModel.removeSubHeader([e],t,o)}else{this.oShellModel.removeSubHeader(e,t,o)}};I.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var e=sap.ui.getCore().byId(this.lastFooterId);if(e){e.destroy()}this.lastFooterId=undefined}};I.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState()};I.prototype.addShellSubHeader=function(e){var t=new jQuery.Deferred,o=this,n,r,i=e.controlType,l=e.oControlProperties,a=e.bIsVisible,s=e.bCurrentState,p=e.aStates;if(l&&l.id&&sap.ui.getCore().byId(l.id)){r=sap.ui.getCore().byId(l.id);if(r){if(a){this.showSubHeader(r.getId(),s,p)}t.resolve(r)}}if(i){n=i.replace(/\./g,"/");sap.ui.require([n],function(e){r=new e(l);if(a){o.showSubHeader(r.getId(),s,p);o.oShellModel.addElementToManagedQueue(r)}t.resolve(r)})}else{h.warning("You must specify control type in order to create it")}return t.promise()};I.prototype.addSubHeader=function(e,t,o,n,r){var i=e.replace(/\./g,"/"),l=sap.ui.require(i),a,s=false;if(l){s=true}else if(!c.get(e||"")){h.error("Renderer.setFooterControl: the referenced control resourse "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}a=this.createItem(t,n,function(t){if(e){if(s){return new l(t)}var o=c.get(e||"");return new o(t)}h.warning("You must specify control type in order to create it");return undefined});if(o){this.showSubHeader(a.getId(),n,r)}return a};I.prototype.addUserAction=function(e){var t=new jQuery.Deferred,o=this,n,r,l=e.controlType,a=e.oControlProperties,s=e.bIsVisible,p=e.bCurrentState,d=p?i.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),u=e.aStates,c;if(a){r=sap.ui.getCore().byId(a.id)}if(r){t.resolve(r)}if(l){if(l==="sap.m.Button"){l="sap.ushell.ui.launchpad.ActionItem"}n=l.replace(/\./g,"/");sap.ui.require([n],function(e){var n;if(p){n=i.shellElements().getStateModelToUpdate();i.shellElements().setStateModelToUpdate(d)}else{n=o.oShellModel.getModelToUpdate();o.oShellModel.setModelToUpdate(d,true)}r=r||new e(a);if(!r.getActionType){r=new e(a)}if(s){o.showActionButton(r.getId(),p,u)}if(p){i.shellElements().setStateModelToUpdate(n)}else{o.oShellModel.setModelToUpdate(n,false)}t.resolve(r)})}else{c="You must specify control type in order to create it";h.warning(c);t.reject(c)}return t.promise()};I.prototype.addActionButton=function(e,t,o,n,r){var i,l,a=false;if(e==="sap.m.Button"){e="sap.ushell.ui.launchpad.ActionItem"}i=e.replace(/\./g,"/");var s=sap.ui.require(i);if(s){a=true}else if(!c.get(e||"")){h.error("Renderer.setFooterControl: the referenced control resourse "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}l=this.createItem(t,n,function(t){if(e){if(a){return new s(t)}var o=c.get(e||"");return new o(t)}h.warning("You must specify control type in order to create it");return undefined});if(o){this.showActionButton(l.getId(),n,r)}return l};I.prototype.addFloatingButton=function(e){var t=new jQuery.Deferred,o=this,n,r,i=e.controlType,l=e.oControlProperties,a=e.bIsVisible,s=e.bCurrentState,p=e.aStates;if(l&&l.id&&sap.ui.getCore().byId(l.id)){r=sap.ui.getCore().byId(l.id);if(r){if(a){o.showFloatingActionButton(r.getId(),s,p);o.oShellModel.addElementToManagedQueue(r)}t.resolve(r)}}if(i){n=i.replace(/\./g,"/")}else{n="sap/m/Button"}sap.ui.require([n],function(e){r=new e(l);if(a){o.showFloatingActionButton(r.getId(),s,p)}t.resolve(r)});return t.promise()};I.prototype.addFloatingActionButton=function(e,t,o,n,r){var i,l,a,s=false;if(!e){e="sap.m.Button"}i=e.replace(/\./g,"/");l=sap.ui.require(i);if(l){s=true}else if(!c.get(e||"")){h.error("Renderer.setFooterControl: the referenced control resourse "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}a=this.createItem(t,n,function(t){if(e){if(s){return new l(t)}var o=c.get(e||"");return new o(t)}h.warning("You must specify control type in order to create it");return undefined});if(o){this.showFloatingActionButton(a.getId(),n,r)}return a};I.prototype.addSidePaneContent=function(e){var t=new jQuery.Deferred,o=this,n,r,i=e.controlType,l=e.oControlProperties,a=e.bIsVisible,s=e.bCurrentState,p=e.aStates;if(l&&l.id&&sap.ui.getCore().byId(l.id)){r=sap.ui.getCore().byId(l.id);if(r){t.resolve(r)}}if(i){n=i.replace(/\./g,"/");sap.ui.require([n],function(e){r=new e(l);if(a){o.oShellModel.addElementToManagedQueue(r);o.showLeftPaneContent(r.getId(),s,p)}t.resolve(r)})}else{h.warning("You must specify control type in order to create it")}return t.promise()};I.prototype.addLeftPaneContent=function(e,t,o,n,r){var i=e.replace(/\./g,"/"),l=sap.ui.require(i),a;if(l){a=true}else if(!c.get(e||"")){h.error("Renderer.setFooterControl: the referenced control resourse "+e+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined}var s=this.createItem(t,n,function(t){if(e){if(a){return new l(t)}var o=c.get(e||"");return new o(t)}h.warning("You must specify control type in order to create it");return undefined});if(o){this.showLeftPaneContent(s.getId(),n,r)}return s};I.prototype.addHeaderItem=function(e,t,o,n,r){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];n=arguments[2];r=arguments[3]}else{h.error("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!")}var i=this.createItem(t,n,function(e){return new y(e)});if(o){this.showHeaderItem(i.getId(),n,r)}return i};I.prototype.addRightFloatingContainerItem=function(e,t,o,n){var r=this.createItem(e,o,function(e){return new S(e)});if(t){this.showRightFloatingContainerItem(r.getId(),o,n)}return r};I.prototype.addToolAreaItem=function(e,o,n,r){e.visible=!!o;var i=function(e){return new t(e)},l=this.createItem(e,n,i);this.oShellModel.addToolAreaItem(l.getId(),!!o,n,r);return l};I.prototype.addHeaderEndItem=function(e,t,o,n,r){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];o=arguments[1];n=arguments[2];r=arguments[3]}var i=this.createItem(t,n,function(e){return new y(e)});if(o){this.showHeaderEndItem(i.getId(),n,r)}return i};I.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration()};I.prototype.addEndUserFeedbackCustomUI=function(e,t){if(e||t){h.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.")}};I.prototype.addUserPreferencesEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e)};I.prototype.setHeaderTitle=function(e){this.shellCtrl.setHeaderTitle(e)};I.prototype.setLeftPaneVisibility=function(e,t){this.oShellModel.setLeftPaneVisibility(t,false,[e])};I.prototype.showToolArea=function(e,t){this.oShellModel.showShellItem("/toolAreaVisible",e,t)};I.prototype.setHeaderHiding=function(e){return this.oShellModel.setHeaderHiding(e)};I.prototype.setFloatingContainerContent=function(e,t,o){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[e.getId()],t,o)};I.prototype.setFloatingContainerVisibility=function(e){this.shellCtrl.setFloatingContainerVisibility(e)};I.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState()};I.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility()};I.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility()};I.prototype.setFloatingContainerDragSelector=function(e){this.shellCtrl.setFloatingContainerDragSelector(e)};I.prototype.makeEndUserFeedbackAnonymousByDefault=jQuery.noop;I.prototype.showEndUserFeedbackLegalAgreement=jQuery.noop;I.prototype.LaunchpadState={App:"app",Home:"home"};I.prototype.createTriggers=function(e,t,o){this.oShellModel.createTriggers(e,t,o)};I.prototype.convertButtonsToActions=function(e,t,o){var n={},r,i=this;e.forEach(function(e){r=sap.ui.getCore().byId(e);n.id=r.getId();n.text=r.getText();n.icon=r.getIcon();n.tooltip=r.getTooltip();n.enabled=r.getEnabled();n.visible=r.getVisible();if(r.mEventRegistry&&r.mEventRegistry.press){n.press=r.mEventRegistry.press[0].fFunction}r.destroy();i.addActionButton("sap.ushell.ui.launchpad.ActionItem",n,n.visible,t,o)})};I.prototype.createItem=function(e,t,o){var n;if(e&&e.id){n=sap.ui.getCore().byId(e.id)}if(!n){n=o(e);if(t){this.oShellModel.addElementToManagedQueue(n)}}return n};I.prototype.addEntryInShellStates=function(e,t,o,n,r){this.oShellModel.addEntryInShellStates(e,t,o,n,r)};I.prototype.removeCustomItems=function(e,t,o,n){if(typeof t==="string"){this.oShellModel.removeCustomItems(e,[t],o,n)}else{this.oShellModel.removeCustomItems(e,t,o,n)}};I.prototype.addCustomItems=function(e,t,o,n){if(typeof t==="string"){this.oShellModel.addCustomItems(e,[t],o,n)}else{this.oShellModel.addCustomItems(e,t,o,n)}};I.prototype.addRightViewPort=function(e){this.shellCtrl.getViewPortContainer().addRightViewPort(e,false)};I.prototype.addLeftViewPort=function(e){this.shellCtrl.getViewPortContainer().addLeftViewPort(e,false)};I.prototype.getShellController=function(){return this.shellCtrl};I.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState()};I.prototype.ViewPortContainerNavTo=function(e,t,o){return this.shellCtrl.getViewPortContainer().navTo(e,t,o)};I.prototype.switchViewPortStateByControl=function(){};I.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};I.prototype.setMeAreaSelected=function(e){this.shellCtrl.setMeAreaSelected(e)};I.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected()};I.prototype.setNotificationsSelected=function(e){this.shellCtrl.setNotificationsSelected(e)};I.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected()};I.prototype.addShellDanglingControl=function(e){this.shellCtrl.getView().addDanglingControl(e)};I.prototype.getShellConfig=function(){return this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{}};I.prototype.getEndUserFeedbackConfiguration=function(){return{}};I.prototype.reorderUserPrefEntries=function(e){return this.shellCtrl._reorderUserPrefEntries(e)};I.prototype.addUserProfilingEntry=function(e){this.shellCtrl.addUserProfilingEntry(e)};I.prototype.logRecentActivity=function(e){if(!e.appType){e.appType=w.APP}if(!e.appId){e.appId=e.url}return this.shellCtrl._logRecentActivity(e)};I.prototype.setCurrentCoreView=function(e){this.currentCoreView=e};I.prototype.getCurrentCoreView=function(){return this.currentCoreView};I.prototype.registerTileActionsProvider=function(e){if(!o.last("/core/spaces/enabled")){return Promise.reject("registerTileActionsProvider is only supported with spaces enabled")}if(!this._aTileActionProviders){this._aTileActionProviders=[]}this._aTileActionProviders.push(e);return Promise.resolve()};I.prototype.getCustomTileActions=function(e){if(!o.last("/core/spaces/enabled")){return Promise.reject("getCustomTileActions is only supported with spaces enabled")}var t={controlId:e.getId(),tileId:e.getVizRefId(),stableId:e.getDataHelpId()||e.getVizRefId(),control:e,domRef:e.getDomRef()};var n=[];this._aTileActionProviders.forEach(function(e){var o=e(t)||[];n.push.apply(n,o)});return Promise.resolve(n)};I.prototype._isBuiltInIntent=function(e){if(!I._aBuiltInRoutes){var t=I.getMetadata().getRoutes();I._aBuiltInRoutes=t.reduce(function(e,t){return e.concat(t.pattern)},[])}if(!e||!e.semanticObject||!e.action){return false}var o=e.semanticObject+"-"+e.action;return I._aBuiltInRoutes.indexOf(o)!==-1};this.addTopHeaderPlaceHolder=function(){};this.removeTopHeaderPlaceHolder=function(){};I.prototype.updateHeaderItem=function(e,t){var o=sap.ui.getCore().byId(e);if(o&&t){if(t.hasOwnProperty("floatingNumber")){o.setFloatingNumber(t.floatingNumber)}}};I.prototype.destroyButton=function(e){if(!e){return}e=typeof e==="string"?[e]:e;e.forEach(function(e){var t=sap.ui.getCore().byId(e);if(t){t.destroy()}})};return I},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/RendererExtensions", ["sap/ushell/EventHub","sap/base/Log"],function(e,t){"use strict";function n(t){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"})},0);e.emit("RendererLoaded",{rendererName:"fiori2"})}function i(e,t){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",e,t)},0)}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=i;sap.ushell.renderers.fiori2.utils.init=n;function r(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.getId(),false,[t,n])}function s(e,t,n){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.getId(),false,[t,n])}function o(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.getId(),false,[t,n])}function a(e,t,n){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(e.getId(),false,[t,n])}function d(e,t){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[e,t])}function u(e,t,n){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(e.getId(),false,[t,n])}function l(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(e.getId(),false,[t,n])}function f(e,t,n){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.getId(),false,[t,n])}function h(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.getId(),false,[t,n])}function g(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration()}function c(){t.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.")}function p(e){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(e)}function C(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e)}function m(e,t){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(e,t)}function I(e){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(e)}function R(e){sap.ushell.Container.getRenderer("fiori2").setFooter(e)}function H(){sap.ushell.Container.getRenderer("fiori2").removeFooter()}function b(){this.addHeaderItem=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.getId(),false,[t,n])};this.setHeaderItemVisibility=function(e,t,n,i){var r=sap.ui.getCore().byId(e);if(i){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(r.getId(),n,[t])}};this.addSubHeader=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").showSubHeader(e.getId(),false,[t,n])};this.removeSubHeader=function(e,t,n){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(e.getId(),false,[t,n])};this.addHeaderEndItem=f;this.removeHeaderItem=r;this.removeHeaderEndItem=h;this.addEndUserFeedbackCustomUI=c;this.addOptionsActionSheetButton=s;this.removeOptionsActionSheetButton=o;this.setFooter=R;this.removeFooter=H;this.addUserPreferencesEntry=p;this.setHeaderTitle=C;this.setHeaderHiding=I;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=u;this.removeFloatingActionButton=l;this.setLeftPaneContent=a;this.removeLeftPaneContent=d;this.setLeftPaneVisibility=m;this.getConfiguration=g}var v=new b;return v},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.controller", ["./History","sap/base/Log","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/m/InstanceManager","sap/ui/core/Component","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/bootstrap/SchedulingAgent","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/HeaderManager","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/performance/FesrEnhancer","sap/ushell/renderers/fiori2/LogonFrameProvider","sap/ushell/resources","sap/ushell/services/AppConfiguration","sap/ushell/services/Message","sap/ushell/UserActivityLog","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,t,i,n,a,o,s,r,l,h,p,c,d,jQuery,g,u,f,v,C,m,w,y,S,b,A,_,P,D,H,F,U){"use strict";var I=s.routing.HistoryDirection;var N=S.AppType;var k=true;var E=false;var R;var T=v.getElementsModel();var L;var M={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0};var B={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"};var x={};b.init();return r.extend("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var t=e.getParameters();var i=t.control;var n=t.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false}i.navTo("centerViewPort",n.getId(),"show")},onInit:function(){var t=this;var i=o.getOwnerComponentFor(this.getView()).getRouter();i.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("workpages").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("runtimeSwitcher").attachDisplay(this.onComponentTargetDisplay,this);if(w.last("/core/homeApp/enabled")){i.getTarget("homeapp").attachDisplay(this.onComponentTargetDisplay,this)}i.oHashChanger=l.getInstance();i.initialize(true);this.bEnableHashChange=true;k=true;var n=this.getView();var a=window.matchMedia("(min-width: 600px)"),s;var r=(n.getViewData()?n.getViewData().config:{})||{};v.parseStatefulContainerConfiguration(r.statefulApplicationContainer);var h=v.shellElements().model();m.init(r,h);this.initShellModel(r,h);var c=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=c;sap.ui.getCore().byId("shell").updateAggregation=c;sap.ui.getCore().byId("right-floating-container").updateAggregation=c;sap.ui.getCore().byId("shell-split").updateAggregation=c;s=function(e){w.emit("/core/shell/model/isPhoneWidth",!e.matches)};if(a.addListener){a.addListener(s);s(a)}n.setModel(_.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("ESHSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();R.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var d=[];if(r&&!r.moveContactSupportActionToShellHeader){d.push("ContactSupportBtn")}this.history=new e;this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");v.init(r.appState,this.oViewPortContainer,r.rootIntent,r.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},d,r.cacheConfiguration);var g=function(e,n){this.oShellNavigation=e;this.oShellNavigation.registerPrivateFilters(n);this.oShellNavigation.registerExtraRouter(i);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(e){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return}if(e.mParameters&&t.oShellNavigation.hashChanger.isInnerAppNavigation(e.mParameters.newHash,e.mParameters.oldHash)){v.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:e.mParameters})}v.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:e.mParameters.fullHash})});y.emit("ShellNavigationInitialized")}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(e){this.oURLParsing=e[0];var t=e[1];this._oAppLifeCycleService=e[2];g(t,this._oAppLifeCycleService)}.bind(this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){e.init(L)})}window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(p.browser.name===p.browser.BROWSER.INTERNET_EXPLORER&&v.getCurrentApplication().container.getApplicationType()===sap.ushell.ApplicationType.NWBC.type)){if(!_.browserI18n){_.browserI18n=_.getTranslationModel(window.navigator.language).getResourceBundle()}return _.browserI18n.getText("dataLossExternalMessage")}return undefined};if(w.last("/core/shell/model/contentDensity")){v.getAppMeta()._applyContentDensityClass()}this.initShellUIService();if(!r.disableSignOut&&(r.sessionTimeoutTileStopRefreshIntervalInMinutes>0||r.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(r)}if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){this.oViewPortContainer.onfocusin=function(){e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false};this.oViewPortContainer.onfocusout=function(){e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true}}.bind(this))}},shellUpdateAggItem:function(e,t){return sap.ui.getCore().byId(t.getObject())},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer")},_registerAndCreateEventHubDoables:function(){var e=[y.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),y.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),y.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),y.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),y.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),y.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),y.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),y.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),y.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),y.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),y.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),y.on("centerViewPort").do(this._centerViewPort.bind(this))];return e},initShellModel:function(e,t){R=T;R.init(e,t);L=this.getView().getViewData().shellModel;w.emit("/core/shell/model/personalization",w.last("/core/shell/enablePersonalization"))},initShellUIService:function(){v.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(x.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"})}.bind(this))}},onBackNavigationChange:function(e){v.setBackNavigationChanged(true);var t=e.getParameters().data,i=w.last("/core/shell/model/currentState");if(t){v.service().setNavigateBack(t);if(i.stateName==="minimal"||i.stateName==="standalone"||i.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true)}}else{v.service().resetNavigateBack()}},toggleContentDensity:function(e){var t=e.contentDensity==="compact";v.getAppMeta()._applyContentDensityByPriority(t,true)},_handleEmptyHash:function(e){e=typeof e==="string"?e:"";e=e.split("?")[0];if(e.length===0){var t=this.getView()?this.getView().getViewData():{};x=t.config||{};if(x.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue}if(x.rootIntent){window.setTimeout(function(){window.hasher.setHash(x.rootIntent)},0);return this.oShellNavigation.NavigationFilterStatus.Abandon}}return this.oShellNavigation.NavigationFilterStatus.Continue},_setConfigurationToModel:function(){var e=this.getView().getViewData();if(e){x=e.config||{}}if(x){if(x.states){T.extendStates(x.states);m.extendStates(x.states)}if(x.enableSetTheme!==undefined){L.setProperty("/setTheme",x.enableSetTheme)}L.setProperty("/contentDensity",x.enableContentDensity===undefined?true:x.enableContentDensity);if(x.migrationConfig!==undefined){L.setProperty("/migrationConfig",x.migrationConfig)}if(x.enableUserDefaultParameters!==undefined){L.setProperty("/userDefaultParameters",x.enableUserDefaultParameters)}if(x.disableHomeAppCache!==undefined){L.setProperty("/disableHomeAppCache",x.disableHomeAppCache)}L.setProperty("/enableHelp",w.last("/core/extension/enableHelp"));L.setProperty("/searchAvailable",x.enableSearch!==false)}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(t){if(t===undefined){t=true}L.setProperty("/enableTrackingActivity",t);y.emit("StepDone",e.stepName)}).catch(function(i){y.emit("StepFailed",e.stepName);t.error("Failed to ltracking activities state state from the personalization",i,"sap.ushell.components.flp.settings.FlpSettings")})},_getPreviousPageDirty:function(){return E},_setPreviousPageDirty:function(e){E=e},getModelConfiguration:function(){var e=this.getView().getViewData(),t,i;if(e){t=e.config||{};i=jQuery.extend({},t)}delete i.applications;return i},_getLogonFrameProvider:function(){return A},onExit:function(){this._aDoableObjects.forEach(function(e){e.off()});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("ESHSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy()}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls()}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy()}m.destroy();f.destroy();H.deactivate();R.destroy();v.shellElements().clean();v.destroy();R=undefined},_getCurrentAppRouter:function(){var e=this._oAppLifeCycleService,t=e&&e.getCurrentApplication&&e.getCurrentApplication(),i=t&&t.componentInstance;if(i){return i.getRouter()}return null},_disableSourceAppRouter:function(e,t){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}var i=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,t);if(!i){var n=this._getCurrentAppRouter();if(n){n.stop()}}return this.oShellNavigation.NavigationFilterStatus.Continue},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true)}},handleDataLoss:function(e,t){var i=this.oShellNavigation.hashChanger;var n=i.getReloadApplication();if(this.bReloadApplication!==null&&this.bReloadApplication!==undefined){i.setReloadApplication(this.bReloadApplication);this.bReloadApplication=null}if(t===""||d.disableBlueBoxHashChangeTrigger===true){return this.oShellNavigation.NavigationFilterStatus.Continue}if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom}if(this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var a=this.oURLParsing.parseShellHash(e);var o=sap.ushell.Container.getRenderer()._isBuiltInIntent(a);var s=a.params["sap-ushell-navmode"];var r=s&&s[0];if(!o&&(this.bExplaceNavigation||r==="explace"||r==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue}var l=sap.ushell.Container.getDirtyFlag();var p=sap.ushell.Container.isAsyncDirtyStateProviderSet();if(!p&&!l){E=l;return this.oShellNavigation.NavigationFilterStatus.Continue}var c=h.getInstance().getHistoryStateOffset()<0;Promise.all([this._waitForHash(t),sap.ushell.Container.getServiceAsync("NavTargetResolution"),sap.ushell.Container.getDirtyFlagsAsync()]).then(function(t){var i=t[1];var a=t[2];E=a;if(!a){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");return}if(o){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}}else{var s="#"+e;i.resolveHashFragment(s).then(function(t){var i=t.targetNavigationMode==="explace"||t.targetNavigationMode==="frameless";var a=c&&t.navigationMode===B.newWindowThenEmbedded;if(i&&!a){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this.bReloadApplication=n;this._restoreHashUsingAction(e,"redo")}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}.bind(this))}}.bind(this));return this._restoreHashUsingAction(t,"undo")},_waitForHash:function(e){var t="#"+e;return new Promise(function(e){var i=function(){var n=t===decodeURIComponent(window.location.hash);if(n){window.removeEventListener("hashchange",i);e()}};window.addEventListener("hashchange",i)})},_handleDirtyStateUserConfirm:function(){if(window.confirm(_.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);v.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});if(C.isBackNavigation()===true){C.resetBackNavigationFlag()}E=true;return true}return false},_restoreHashUsingAction:function(e,t){var i=this.oShellNavigation.wasHistoryEntryReplaced();var n=this._getRestoreHashStrategy(i,t);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(n,e)},_getRestoreHashStrategy:function(e,t){if(e){return{strategy:"replaceHash",stepCount:0}}var i;var n=h.getInstance().getHistoryStateOffset();if(n===undefined||n>=0){n=1}else if(n<0){n=-1}if(t==="undo"){if(n<0){i="historyForward"}else{i="historyBack"}this.sLastUndoStrategy=i}else{switch(this.sLastUndoStrategy){case"historyBack":i="historyForward";break;case"historyForward":i="historyBack";break;default:i="replaceHash"}}return{strategy:i,stepCount:1}},_restoreHash:function(e,t){var i={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;d.replaceHash(t);break;default:throw new Error("Cannot execute unknown navigation strategy")}return i},_isColdStart:function(){var e=sap.ushell.Container.getRenderer("fiori2");var t=!e||!e.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&t){return true}this._isColdStart=function(){return false};return false},_setEnableHashChange:function(e){this.bEnableHashChange=e},_logRecentActivity:function(e){if(!this.oInitialEnableTrackingPromise){if(w.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve()}else{this.oInitialEnableTrackingPromise=new Promise(function(e,t){w.once("/core/shell/model/enableTrackingActivity").do(e)})}}return this.oInitialEnableTrackingPromise.then(function(){if(w.last("/core/shell/model/enableTrackingActivity")){return new Promise(function(t,i){P.addActivity(e).done(t).fail(i)})}t.warning("Tracking is not enabled",null,"sap.ushell.renderers.fiori2.Shell.controller");return undefined})},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(t){t.addAppUsage(e)})}},doHashChange:function(e,t,i,n,a){c.start("FLP:ShellController.doHashChange","doHashChange","FLP");y.emit("trackHashChange",e);var o=sap.ui.getCore().byId("sapUshellDashboardPage");if(o){o.setBlocked(true);o.setBusy(true)}return this._doHashChange(this,e,t,i,n,a).then(function(){c.end("FLP:ShellController.doHashChange")},function(e){c.end("FLP:ShellController.doHashChange");y.emit("doHashChangeError",Date.now());if(o){o.setBlocked(false);o.setBusy(false)}})},_doHashChange:function(e,t,i,n,o,s){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var r,l,h,p,d;if(!this.bEnableHashChange){this.bEnableHashChange=true;return jQuery.when()}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;return jQuery.when()}if(s){e.hashChangeFailure(e.history.getHistoryLength(),s.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return jQuery.when()}d=new jQuery.Deferred;if(a&&k){a.closeAllDialogs();a.closeAllPopovers()}k=true;l=e.history.getHistoryLength();h=e.fixShellHash(t);p=e.fixShellHash(n);e.history.hashChange(h,n);e.currentAppBeforeNav=P.getCurrentApplication();e._resolveHashFragment(h).then(function(t,a){var s=a?a.semanticObject+"-"+a.action:"",g=e._getConfig(),u=!!(t&&t.componentHandle),f=t&&t.ui5ComponentName;t=e._calculateNavigationMode(a,t);e._handleEarlyNavigation(h,i,t).then(function(C){if(C!==true){if(g&&g.applications&&g.applications[s]){t.applicationConfiguration=g.applications[s]}r=v.getInMemoryInstance(s,h,i,n);if(r.isInstanceSupported){e._initiateApplication(t,h,a,l,i,p,o);d.resolve();return}if(u||!f){var m=new jQuery.Deferred;if((t.applicationType==="URL"||t.applicationType==="GUI"||t.applicationType==="TR"||t.applicationType==="NWBC"||t.applicationType==="WDA"||t.applicationType==="WCF")&&r.isInstanceSupported===false&&r.appId){v.destroy(r.appId,r.container,m)}else{m.resolve()}m.done(function(){e._initiateApplication(t,h,a,l,i,p,o);d.resolve()});return}v.destroy(r.appId,r.container);v.removeApplication(s);P.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:f});c.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){v.createComponent(t,a).done(function(){c.end("FLP:ShellController.UI5createComponent");e._initiateApplication(t,h,a,l,i)}).fail(function(t){var i=_.i18n.getText("cannot_load_ui5_component_details",[h]),n="Failed to load UI5 component for navigation intent "+h;P.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(l,{title:_.i18n.getText("error"),message:_.i18n.getText("failed_to_open_ui5_component"),technicalMessage:n},{info:i,technicalMessage:t.message+"\n"+t.stack},"sap.ushell.renderers.fiori2.Shell.controller",false)})})}d.resolve()})},function(t){var i=_.i18n.getText("cannot_resolve_navigation_target_details",[h]),n="Failed to resolve navigation target: "+h+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(l,{title:_.i18n.getText("error"),message:_.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:n},{info:i,fixedShellHash:h,technicalMessage:t},"sap.ushell.renderers.fiori2.Shell.controller",false);d.reject(n)});return d.promise()},_handleEarlyNavigation:function(e,t,i){var n=this;var a;return new Promise(function(o){n._openAppViaNWBC(i).then(function(s){if(s===true){i.sFixedShellHash=e;n.logOpenAppAction(i,t);a=sap.ui.getCore().byId("sapUshellDashboardPage");if(a){a.setBlocked(false);a.setBusy(false)}o(true);return}var r=i&&i.navigationMode===B.newWindow;if(r){i.sFixedShellHash=e;n.logOpenAppAction(i,t);n._openAppInNewWindowAndRestore(i);a=sap.ui.getCore().byId("sapUshellDashboardPage");if(a){a.setBlocked(false);a.setBusy(false)}o(true);return}if(w.last("/core/shell/model/migrationConfig")){x.migrationConfig=false;n.getModel().setProperty("/migrationConfig",false);if(i&&e==="#"){x.rootIntent=""}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(x.rootIntent)},0);o(true);return}}o(false);return})})},_initiateApplication:function(e,i,n,a,o,s,r){c.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var l=P.getMetadata(e),h=w.last("/core/extension/SupportTicket"),p;if(l.title){window.document.title=l.title}else{t.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined")}if(h){window.setTimeout(function(){H.activate()},0)}try{p=this.oShellNavigation.isInitialNavigation();this.navigate(n,i,l,e,s)}catch(e){if(e.stack){t.error("Application initialization (Intent: \n"+i+"\n failed due to an Exception:\n"+e.stack)}this.oShellNavigation.setIsInitialNavigation(p);this.hashChangeFailure(a,e.name,e.message,l?l.title:"",false)}c.end("FLP:ShellController._initiateApplication")},_resolveHashFragment:function(e){c.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var t=this.oURLParsing.parseShellHash(e),i=new jQuery.Deferred,n=this._getConfig();if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(e){i.resolve(e.resolvedHashFragment,t);delete window["sap-ushell-async-libs-promise-directstart"]},function(e){i.reject(e);delete window["sap-ushell-async-libs-promise-directstart"]});return i.promise()}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(a){a.resolveHashFragment(e).done(function(e){P.setCurrentApplication(e);if(t&&t.semanticObject+"-"+t.action===n.rootIntent){e.navigationMode="embedded"}c.end("FLP:ShellController._resolveHashFragment");i.resolve(e,t)}).fail(function(e){i.reject(e)})});return i.promise()},_calculateNavigationMode:function(e,t){if(!t){return undefined}var i=t.navigationMode;if(i===B.newWindowThenEmbedded){if(this._isColdStart()||h.getInstance().getDirection()===I.Backwards){t.navigationMode=B.embedded}else{t.navigationMode=B.newWindow;if(!F.isNativeWebGuiNavigation(t)){t.url=this._getCurrentLocationHash()}}return t}if(i===B.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(t)&&t.appCapabilities.navigationMode===B.embedded){t.navigationMode=B.embedded;return t}t.navigationMode=B.replace;return t}if(i===B.newWindow&&this._hasAppCapabilitiesNavigationMode(t)&&t.appCapabilities.navigationMode===B.embedded){t.url=this._getCurrentLocationHash()}return t},_hasAppCapabilitiesNavigationMode:function(e){return F.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode")},_usesNavigationRedirect:function(e){if(!e){return(new jQuery.Deferred).reject().promise()}var i=this,n=e.getInstance({});if(n&&typeof n.navigationRedirect==="function"){var a=new jQuery.Deferred;var o=n.navigationRedirect();if(o&&typeof o.then==="function"){o.then(function(e){t.warning("Performing navigation redirect to hash "+e);n.destroy();i.history.pop();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(t){t.toExternal({target:{shellHash:e}},undefined,false);a.resolve(true)})},function(){a.reject()});return a.promise()}}return(new jQuery.Deferred).reject().promise()},navigate:function(e,t,n,a,o){c.start("FLP:ShellController.navigate","navigate","FLP");var s=i(a)?a.navigationMode:null,r=this;if(s===null){if(this._isColdStart()){window.hasher.setHash("");return}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve()}a=this._calculateNavigationMode(e,a);s=i(a)?a.navigationMode:null;if(s===B.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false)}var l=this._usesNavigationRedirect(a.componentHandle),h=new Promise(function(i,s){l.then(null,function(){r._handleEmbeddedNavMode(t,e,n,a,o).then(function(){y.emit("CloseFesrRecord",{date:Date.now(),technicalName:n.technicalName});i()})});c.end("FLP:ShellController.navigate")});return h}if(s===B.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(a.url);return Promise.resolve()}if(s===B.newWindow){this._openAppInNewWindowAndRestore(a);return Promise.resolve()}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve()},_openAppViaNWBC:function(e){var i=this;return new Promise(function(n){var a;if(e&&(F.isNativeWebGuiNavigation(e)||e.nativeNWBCNavigation)){a=true}else{a=false}if(a===false){n(false);return}var o=F.getPrivateEpcm();var s=M[e.navigationMode];var r;var l;var h;if(F.hasNavigationModeCapability()){l=s||M[B.embedded]}h=i._appendUserIdToUrl("sap-user",e.url).then(function(t){r=F.appendSapShellParam(t);return new Promise(function(t){try{var i=e.applicationType,n=e.appCapabilities&&e.appCapabilities.appFrameworkId,a={},o=[],s,l=function(){a["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);a["system-alias"]=e.systemAlias;return[{name:"sap-flp-params",value:JSON.stringify(a)}]},h=function e(t,i){var n=[],a,o=function(e,o){if(t.indexOf(e+"=")>0){a=new RegExp("(?:"+e+"=)([^&/]+)").exec(t);if(a&&a.length===2){n.push([a[1]]);i.push(o)}}};o("sap-iapp-state","sap-iapp-state-data");o("sap-xapp-state","sap-xapp-state-data");o("sap-intent-param","sap-intent-param-data");return n};if(i==="GUI"||i==="TR"||i==="NWBC"||i==="WDA"||i==="WCF"||n==="GUI"||n==="WDA"||n==="NWBC"||n==="WCF"){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){s=h(r,o);if(s.length>0){e.getAppStateData(s).then(function(e){o.forEach(function(t,i){if(e[i][0]){a[t]=e[i][0]}});t(l())},function(e){t()})}else{t(l())}})}else{t()}}catch(e){t()}})});h.then(function(a){try{sap.ui.getCore().getEventBus().publish("launchpad","appOpening",e);if(!o.doNavigate(r,l,undefined,undefined,undefined,undefined,undefined,a)){n(false);return}sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);i._restoreAfterNwbcNavigation(e).then(function(){if(i._oAppLifeCycleService.getCurrentApplication()&&i._oAppLifeCycleService.getCurrentApplication().homePage){i._toggleMenu(true)}n(true)})}catch(a){if(a.stack){t.error("Application initialization failed due to an Exception:\n"+a.stack)}i.hashChangeFailure(i.history.getHistoryLength(),a.name,a.message,e.text,false);n(false)}})})},_restoreAfterNwbcNavigation:function(e){if(this.history.getHistoryLength()===1&&!this._oAppLifeCycleService.getCurrentApplication()){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.toExternal({target:{shellHash:"#"},writeHistory:false})})}this._restorePreviousHashAfterOpenNewWindow(e);return Promise.resolve()},_appendUserIdToUrl:function(e,t){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(i){var n=i.getUser().getId(),a=t.indexOf("?")>=0?"&":"?";return t+a+e+"="+n})},_restorePreviousHashAfterOpenNewWindow:function(e){this.history.pop();var t=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(t){t.destroy()}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);P.setCurrentApplication(this.currentAppBeforeNav);y.emit("openedAppInNewWindow",Date.now())},_openAppInNewWindowAndRestore:function(e){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",e);this._openAppNewWindow(e.url);sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);this._restorePreviousHashAfterOpenNewWindow(e)},_handleEmbeddedNavMode:function(e,t,i,n,a){c.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var o=this._getConfig(),s,r,l,h;this.resetShellUIServiceHandlers();v.getAppMeta().setAppIcons(i);s="-"+t.semanticObject+"-"+t.action;l=e==="#"||o.rootIntent&&F.getBasicHash(o.rootIntent)===t.semanticObject+"-"+t.action;h=t?t.semanticObject+"-"+t.action:"";v.switchViewState(v.shellElements().calculateElementsState(l?"home":"app",n.applicationType,o.appState,n.explicitNavMode),undefined,s);if(l){v.getShellUIService().setBackNavigation()}r=v.handleControl(h,s,t,n,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e,a);if(this.currentAppBeforeNav){var p;p=v.getWebGuiV1StatefulContainer(this.currentAppBeforeNav.url);if(p){p.onApplicationOpened(n.applicationType)}}c.end("FLP:ShellController._handleEmbeddedNavMode");return r},_centerViewPort:function(){this.oViewPortContainer.switchState("Center")},_isShellHomeIntent:function(e){return e==="#"||e===x.rootIntent},getWrappedApplicationWithMoreStrictnessInIntention:function(e,i,n,a,o,s,r){var l,h,d,g=this;if(p.system.desktop){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var t=sap.ui.getCore().byId("shellAppTitle");if(t&&w.last("/core/shell/model/currentState/stateName")==="app"){var i=t.getFocusDomRef();if(i){e.sendFocusBackToShell(i.getAttribute("id"))}}})}window.setTimeout(function(){window.setTimeout(function(){g.readNavigationEnd()},600);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",a);t.info("app is being opened")},0);if(x.applications){a.applicationConfiguration=x.applications[e]}l=v.getAppContainer(o,a,this._isColdStart(),n,r);a.sFixedShellHash=r;v.publishNavigationStateEvents(l,a,this.onAppAfterRendering.bind(this,a));h=l.getApplicationType();d=l.getFrameworkId();if(h==="GUI"||h==="TR"||h==="WDA"||h==="NWBC"||h==="WCF"||d==="GUI"||d==="WDA"||d==="NWBC"||d==="WCF"){l.addStyleClass("sapUShellApplicationContainerShiftedIframe")}if(!s){l.addStyleClass("sapUShellApplicationContainerLimitedWidth")}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){l.addStyleClass("sapUShellDockingContainer");l.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}else if(this._isDock()){l.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}l.toggleStyleClass("sapUshellDefaultBackground",!i.hideLightBackground);v.getAppMeta()._applyContentDensityByPriority();v.addControl(l);F.setPerformanceMark("FLP - addAppContainer");c.end("FLP:ShellController.getWrappedApplication");return l},resetShellUIServiceHandlers:function(){v.getAppMeta().resetShellUIServiceHandlers();v.setBackNavigationChanged(false)},onAppAfterRendering:function(e){var i=v.getShellUIService();window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);t.info("app was opened")},0);var n=v._publicEventDataFromResolutionResult(e);y.emit("AppRendered",n,true);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",n);F.setPerformanceMark("FLP.appOpened");if(i){v.initAppMetaParams()}R.updateStateProperty("application/icon",v.getAppMeta().getAppIcon(),true)},_saveHomePageComponent:function(){if(this.oHomeApp){return}var e=this,t="sap.ushell",i=function(n,a,o){e.oHomeApp=o.component;sap.ui.getCore().getEventBus().unsubscribe(t,"appComponentLoaded",i)};sap.ui.getCore().getEventBus().subscribe(t,"appComponentLoaded",i)},hashChangeFailure:function(e,t,i,a,o){var s=sap.ui.getCore().byId("sapUshellDashboardPage");if(s){s.setBlocked(false);s.setBusy(false)}if(F.isPlainObject(t)){this.reportError(t.technicalMessage,i.technicalMessage,a);sap.ushell.Container.getServiceAsync("Message").then(function(e){e.show(D.Type.ERROR,t.message,{title:t.title,details:i})})}else{this.reportError(t,i,a);this.delayedMessageError(_.i18n.getText("fail_to_start_app_try_later"))}k=false;this._resumeAppRouterIgnoringCurrentHash();if(e===0){window.hasher.setHash("")}else if(new n(window.location.href).get("bFallbackToShellHome")){window.hasher.setHash("")}else{this.bEnableHashChange=o;sap.ushell.Container.setDirtyFlag(E);v.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:E});this._windowHistoryBack(1)}},reportError:function(e,i,n){t.error(e,i,n)},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(e)})}},0)},fixShellHash:function(e){if(!e){e="#"}else if(e.charAt(0)!=="#"){e="#"+e}return e},_openAppNewWindow:function(e){var t=U.openURL(e);if(!t&&!this._checkWindowLocationSearch("workzone-mobile-app=true")){var i=_.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(i)}},_checkWindowLocationSearch:function(e){return window.location.search.indexOf(e)>-1},_windowHistoryBack:function(e){window.history.go(-1*e)},_windowHistoryForward:function(e){window.history.go(e)},_changeWindowLocation:function(e){window.location.href=e},_toggleMenu:function(e){var t=sap.ui.getCore().byId("menuBarComponentContainer");var i=t&&t.getComponentInstance&&t.getComponentInstance();if(i&&i.setVisible){i.setVisible(e)}},onAppOpened:function(e,t,i){if(i.targetNavigationMode!=="explace"&&i.targetNavigationMode!=="frameless"){this._toggleMenu(false)}var n=this.oShellNavigation.hashChanger.getAppHash(),a=n?"&/"+n:null;this.logOpenAppAction(i,a)},externalSearchTriggered:function(e,t,i){w.emit("/core/shell/model/searchTerm",i.searchTerm);i.query=i.searchTerm},onBeforeNavigate:function(e){var t=e.getParameter("to");var i=this.getOwnerComponent();var n=t===i.byId("Shell-home-component-container");var a=t===i.byId("pages-component-container");var o=t===i.byId("homeApp-component-container");var s=t===i.byId("workPageRuntime-component-container");var r=t===i.byId("runtimeSwitcher-component-container");var l=n||a||o||s||r;v.onBeforeNavigate(e.getParameter("fromId"),e.getParameter("from"),e.getParameter("toId"),e.getParameter("to"));this._toggleMenu(l)},onAfterNavigate:function(e){var t=e.mParameters?e.mParameters.toId:undefined;var i=sap.ui.getCore().byId("sapUshellDashboardPage");if(i){i.setBlocked(false);i.setBusy(false)}v.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),t,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{})},logOpenAppAction:function(e,t){var i=w.last("/core/shell/enableRecentActivity")&&w.last("/core/shell/enableRecentActivityLogging");if(!i){return}var n={};var a=P.getMetadata(e);var o=e.sFixedShellHash;var s=o;if(t){s+=t}n.title=a.title;n.appType=N.APP;n.url=s;var r=this.oURLParsing.parseShellHash(o);if(r){n.appId="#"+this.oURLParsing.constructShellHash({semanticObject:r.semanticObject,action:r.action})}else{n.appId=o}if(o&&o.indexOf("#Action-search")===-1){window.setTimeout(function(){this._logRecentActivity(n)}.bind(this),1500)}},_logSearchActivity:function(){if(w.last("/core/shell/enableRecentActivity")&&w.last("/core/shell/enableRecentActivityLogging")){var e="";try{e=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm()}catch(e){t.error("Shell: last search term is not available to log a recent activity")}this._logRecentActivity({appId:"#Action-search",appType:N.SEARCH,title:e,url:"#"+window.hasher.getHash()})}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=_.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML=""},0)}},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt()}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.init(_.i18n.getText("usageAnalytics"),_.i18n.getText("i_agree"),_.i18n.getText("i_disagree"),_.i18n.getText("remind_me_later"));y.emit("StepDone",e.stepName)},function(){y.emit("StepFailed",e.stepName)})},_onCoreResourcesComplementLoaded:function(){F.setPerformanceMark("SchedulingAgent-StartOfFlow");var e=this.getView();if(e){e.createPostCoreExtControls()}u._initialize();y.emit("startScheduler")},_loadRendererExtensionPlugins:function(e){var t=new n(window.location.href),i=t.get("sap-ushell-xx-pluginmode")==="delayed";function a(t){function n(){y.emit("StepDone",e.stepName)}function a(){t.loadPlugins("RendererExtensions").always(n)}if(!x.inHeaderLessOpt){if(i){window.setTimeout(a,5e3)}else{a()}}else{n()}}sap.ushell.Container.getServiceAsync("PluginManager").then(a.bind(this))},_loadWarmupPlugins:function(e){sap.ushell.Container.getServiceAsync("PluginManager").then(function(i){i.loadPlugins("AppWarmup").always(function(){t.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");y.emit("StepDone",e.stepName);F.setPerformanceMark("SchedulingAgent-EndOfFlow");F.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow")})})},_loadCoreExt:function(){c.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){y.emit("loadCoreResourcesComplement")})},getCurrentViewportState:function(){return w.last("/core/shell/model/currentViewPortState")},_activateFloatingUIActions:function(e){if(e<417){this.oFloatingUIActions.disable()}else{this.oFloatingUIActions.enable()}},setFloatingContainerDragSelector:function(e){jQuery(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1e3,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:t.getLevel()>=t.Level.DEBUG})}else{this.oFloatingUIActions.elementsToCapture=jQuery(e)}this._activateFloatingUIActions(jQuery(window).width());var n;jQuery(window).bind("resize",function(){clearTimeout(n);n=window.setTimeout(this._activateFloatingUIActions(jQuery(window).width()),300)}.bind(this))}.bind(this))},_doDock:function(e){c.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var t=p.media.getCurrentRange(p.media.RANGESETS.SAP_STANDARD);if(t.name==="Desktop"){var i=jQuery(window).width();if(e){e.docked={};var n=e.docked;if(e.moveX>=i-64){n.dockPos="right";n.setIsDockingAreaOpen=true;this._openDockingArea(e)}else if(e.moveX<64){n.dockPos="left";n.setIsDockingAreaOpen=true;this._openDockingArea(e)}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e)}if(jQuery("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e)}}}}c.end("FLP:Shell.controller._doDock")},_finishDoDock:function(e){this._openDockingArea(false);var t=new g(g.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");t.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var i=jQuery("#sapUshellFloatingContainerWrapper");i.css("height","100%");jQuery("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked")},_onResizeWithDocking:function(){window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking")},300)},_onDragStartUI:function(e){c.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var t=new g(g.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");t.put("lastState","floating");jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");jQuery(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");jQuery("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");jQuery(jQuery(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e)}c.end("FLP:Shell.controller._onDragStartUI")},_handleAnimations:function(e){var t="sapUshellContainerDockedLaunchpad";var i=jQuery("#sapUshellFloatingContainerWrapper");if(e){jQuery("#canvas, #shell-header").addClass(t);i.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking()}else{jQuery("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot")}},_openDockingArea:function(e){var t=e?e.docked:false;var i=t?t.setIsDockingAreaOpen:false;if(i&&jQuery("#DockingAreaDiv").length===0){var n=sap.ui.getCore().getConfiguration().getRTL();if(t.dockPos==="right"&&e.clone&&!n||t.dockPos==="left"&&e.clone&&n){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaRight">').appendTo(e.clone.parentElement)}else if(t.dockPos==="left"&&e.clone&&!n||t.dockPos==="right"&&e.clone&&n){jQuery('<div id="DockingAreaDiv" class="sapUshellShellDisplayDockingAreaLeft">').appendTo(e.clone.parentElement)}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=t.dockPos}else if(!i){this._closeDockingArea()}},_closeDockingArea:function(){window.setTimeout(function(){jQuery(".sapUshellShellDisplayDockingAreaRight").remove();jQuery(".sapUshellShellDisplayDockingAreaLeft").remove()},150)},_isDock:function(){return jQuery(".sapUshellContainerDocked").length!==0},_isDockingAreaOpen:function(){return jQuery(".sapUshellShellDisplayDockingAreaRight").length!==0||jQuery(".sapUshellShellDisplayDockingAreaLeft").length!==0},_handleOpenCanvas:function(e){var t=jQuery("#canvas");var i=jQuery(".sapUshellShellHead");var n=sap.ui.getCore().getConfiguration().getRTL();if(e.dockPos==="right"&&!n||e.dockPos==="left"&&n){t.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");i.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked")}if(e.dockPos==="left"&&!n||e.dockPos==="right"&&n){t.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");i.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked")}var a=sap.ui.getCore().byId("viewPortContainer");if(a){a._handleSizeChange()}},_handleCloseCanvas:function(e){var t=jQuery("#canvas");var i=jQuery(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false}if(t.hasClass("sapUshellContainer-Narrow-Right")){t.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");i.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight()}if(t.hasClass("sapUshellContainer-Narrow-Left")){t.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");i.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight()}this._onResizeWithDocking();var n=sap.ui.getCore().byId("viewPortContainer");if(n){n._handleSizeChange()}},_setFloatingContainerHeight:function(e){var t=jQuery(window).width();var i=jQuery("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=t-64||e.clientX<64)){i.addClass(" sapUshellContainerDocked");i.addClass("sapUshellContainerDockedMinimizeCoPilot");jQuery(i).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true))}}else if(!this._isDock()){jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot")}},_handleFloatingContainerDrop:function(e,t,i){c.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var n=t.firstChild?sap.ui.getCore().byId(t.firstChild.id):undefined,a=new g(g.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),o=jQuery(window).width(),s=jQuery(window).height(),r=i.deltaX/o,l=i.deltaY/s,h=t.style.visibility,p=t.style.display,d=parseFloat(t.style.left.replace("%","")),u=parseFloat(t.style.top.replace("%",""));if(typeof d==="number"){r=d+100*i.deltaX/o}if(typeof u==="number"){l=u+100*i.deltaY/s}if(this._isDockingAreaOpen()){l=0}t.style.left=r+"%";t.style.top=l+"%";t.style.position="absolute";t.style.display="block";t.visibility=h;t.display=p;a.put("floatingContainerStyle",t.style.cssText);if(n){n.handleDrop();if(!!i.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(i.clone.oDockedProp)}}c.end("FLP:Shell.controller.handleFloatingContainerDrop")},_handleFloatingContainerUIStart:function(e,t){c.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var i=t;i.style.display="none";if(window.getSelection){var n=window.getSelection();try{n.removeAllRanges()}catch(e){}}c.end("FLP:Shell.controller._handleFloatingContainerUIStart")},getFloatingContainerState:function(){var e=new g(g.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var t="floating";if(e!==null){t=e.get("lastState");if(t===null){t="floating"}}return t},setFloatingContainerVisibility:function(e){var t=this.getFloatingContainerState();if(t){if(t==="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(e)}else if(t.indexOf("docked")!==-1){var i=sap.ui.getCore().byId("viewPortContainer");if(e===true){var n=p.media.getCurrentRange(p.media.RANGESETS.SAP_STANDARD);if(n.name==="Desktop"){var a=jQuery("#sapUshellFloatingContainerWrapper");a.addClass("sapUshellContainerDocked");jQuery("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");a.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange()}if(sap.ui.getCore().getConfiguration().getRTL()){if(t.indexOf("right")!==-1){jQuery("#canvas").addClass("sapUshellContainer-Narrow-Left");jQuery(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true)}else{jQuery("#canvas").addClass("sapUshellContainer-Narrow-Right");jQuery(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true)}}else if(t.indexOf("right")!==-1){jQuery("#canvas").addClass("sapUshellContainer-Narrow-Right");jQuery(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true)}else{jQuery("#canvas").addClass("sapUshellContainer-Narrow-Left");jQuery(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true)}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(e)}.bind(this),400)}else{new g(g.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(e)}}else{this._handleAnimations(false);if(i){i._handleSizeChange()}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(e)}.bind(this),400);jQuery("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left")}jQuery("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange()}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible()},setFloatingContainerContent:function(e,t,i,n){R.setFloatingContainerContent(e,t,i,n)},getRightFloatingContainerVisibility:function(){var e=this.getView().getOUnifiedShell().getRightFloatingContainer(),t=e&&e.getVisible();return t},setHeaderTitle:function(e){m.updateStates({propertyName:"title",value:e||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false})},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid")}if(i.getFooter()!==null){t.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".")}i.setFooter(e)},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null)},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e)},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e)},_validateUserPrefEntryConfiguration:function(e){if(!e||typeof e!=="object"){throw new Error("object oConfig was not provided")}if(!e.title){throw new Error("title was not provided")}if(!e.value){throw new Error("value was not provided")}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid")}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid")}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid")}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid")}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid")}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid")}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid")}},_createSessionHandler:function(e){var t=this,i=2e4;sap.ui.require(["sap/ushell/SessionHandler"],function(n){t.oSessionHandler=new n(v);t.oSessionHandler.initLogout();window.setTimeout(function(){t.oSessionHandler.init({sessionTimeoutReminderInMinutes:e.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:e.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:e.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:e.enableAutomaticSignout})},i)})},_getSessionHandler:function(){return this.oSessionHandler},_navBack:function(){this.setMeAreaSelected(false);v.service().navigateBack()},_updateUserPrefModel:function(e){var t=this._getModelEntryFromEntryObject(e),i=w.last("/core/userPreferences/entries");i.push(t);i=this._reorderUserPrefEntries(i);w.emit("/core/userPreferences/entries",i)},_updateProfilingModel:function(e){var t=this._getModelEntryFromEntryObject(e),i=w.last("/core/userPreferences/profiling")||[];i.push(t);w.emit("/core/userPreferences/profiling",i)},_getModelEntryFromEntryObject:function(e){return{entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper}},_reorderUserPrefEntries:function(e){var t=[],i=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"],n,a={};for(var o=e.length-1;o>=0;o--){if(i.indexOf(e[o].id)!==-1){n=e.splice(o,1)[0];a[n.id]=n}}i.forEach(function(e){var i=a[e];if(i){t.push(i)}});return t.concat(e)},getModel:function(){return L},_getConfig:function(){return x||{}},_getPersData:function(e){var t=o.getOwnerComponentFor(this.getView());return new Promise(function(i,n){sap.ushell.Container.getServiceAsync("Personalization").then(function(a){var o={keyCategory:a.constants.keyCategory.FIXED_KEY,writeFrequency:a.constants.writeFrequency.LOW,clientStorageAllowed:true};var s=a.getPersonalizer(e,o,t);s.getPersData().then(i).fail(n)})})},_getCurrentLocationHash:function(){return window.location.hash},setMeAreaSelected:function(e){y.emit("showMeArea",e)},getMeAreaSelected:function(){return w.last("/core/shell/model/currentViewPortState")==="LeftCenter"},setNotificationsSelected:function(e){y.emit("showNotifications",e)},getNotificationsSelected:function(){return w.last("/core/shell/model/currentViewPortState")==="RightCenter"}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.view", ["sap/ui/core/library","sap/ushell/library","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(e,t,i,n,l,o,a,s,r,h,d,u){"use strict";function g(e,t){return sap.ui.getCore().byId(t.getObject())}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(e){this.oController=e;var t=this.getViewData()||{},i=t.config||{};this.oConfig=i;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(i);var n=sap.ui.xmlfragment("sap.ushell.ui.ShellLayout",e),l=this.createShellHeader(i,this.getViewData().shellModel);n.setHeader(l);l.setShellLayout(n);h.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:g}});t.updateAggregation=this.updateShellAggregation;t.addEventDelegate({onAfterRendering:function(){n.applySplitContainerSecondaryContentSize()}});n.setToolArea(t)}.bind(this))}.bind(this));this.setOUnifiedShell(n);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));s.setPerformanceMark("FLP - Shell.view rendering started!");return n},_allowUpToThreeActionInShellHeader:function(e){if(Object.keys(e).length>3){var t=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],i=0,n;for(var l=0;l<5;l++){n=t[l];if(i===3){e[n]=false}else if(e[n]){i++}}}},createShellHeader:function(e,t){var i=r.createModel("/core/shellHeader",d),o=new l,s;o.onInit();s=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",o);n.init(e,o,t);if(e.appState==="embedded"){s.setNoLogo()}s.setModel(i);s.setModel(a.i18nModel,"i18n");s.createUIArea();return s},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(e,t){var n=sap.ui.getCore().byId("shell");if(!n){return}var l=new e({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:g}});if(i.system.desktop){l.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}))}l.setModel(n.getModel());this.addDanglingControl(l);var a=new t({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:g}});a.updateAggregation=this.updateShellAggregation;var s=this.getOUnifiedShell();s.setFloatingContainer(l);s.setFloatingActionsContainer(a);this._createAllMyAppsView()}.bind(this))},_createAllMyAppsView:function(){var e=function(e){if(e.isEnabled()){this._initializeAllMyAppsView()}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(e)},_initializeAllMyAppsView:function(){u.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(e){var t=this.getModel();e.setModel(t);e.setModel(a.i18nModel,"i18n");e.addCustomData(new o({key:"aria-label",value:a.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(e)}.bind(this))},getOUnifiedShell:function(){return this.oUnifiedShell},setOUnifiedShell:function(e){this.oUnifiedShell=e},updateShellAggregation:function(e){var t=this.mBindingInfos[e],i=this.getMetadata().getJSONKeys()[e],n;this[i._sGetter]().forEach(function(e){this[i._sRemoveMutator](e)}.bind(this));t.binding.getContexts().forEach(function(e,l){n=t.factory(this.getId()+"-"+l,e)?t.factory(this.getId()+"-"+l,e).setBindingContext(e,t.model):"";this[i._sMutator](n)}.bind(this))},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},addDanglingControl:function(e){this.aDanglingControls.push(e)},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(e){if(e.destroyContent){e.destroyContent()}e.destroy()})}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/resources", ["sap/ui/model/resource/ResourceModel"],function(e){"use strict";var r={};r.getTranslationModel=function(o){var u;if(r._oResourceModel){u=r._oResourceModel}else{u=new e({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources.properties"),bundleLocale:o});r._oResourceModel=u}return u};r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppConfiguration", ["sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(e,t,n,i,a,jQuery,r,s,o,u,p){"use strict";var c=p.ButtonType;function l(){var p={},l=true,f=null,h=[],g=[];n.on("AppRendered").do(m.bind(this));function m(){l=false;while(g.length>0){g.shift()()}}this.addActivity=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("UserRecents").then(function(n){n.addActivity(e).done(t.resolve).fail(t.reject)}).catch(t.reject);return t.promise()};this.setApplicationInInitMode=function(){l=true};this.getApplicationRequestQueue=function(){return g};this.getCurrentApplication=function(){return f};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(e){if(!e){e=f}if(e){var t=hasher&&hasher.getHash?hasher.getHash():"";var n=this._getMemoizationKey(t);return this._getMetadata(e,n)}return{}};this._getMemoizationKey=function(t){var n=t.split("?");var i=n[0];var a=n[1];a=this._processParams(a);if(a){return i+a}var r=e.parseShellHash(t);i=r?r.semanticObject+"-"+r.action:"";return i};this._processParams=function(e){if(e){var t="";var n={};e.split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]});var i=Object.keys(n).sort();var a="";i.forEach(function(e,i){t=i?"&":"?";a+=t+e+"="+n[e]});return a}return""};this._getMetadata=function(e,t){if(!p.hasOwnProperty(t)||!p[t].complete){this.addMetadata(e,t)}if(!p[t]){p[t]={complete:false}}if(!p[t].title){p[t].title=e.text||o.i18n.getText("default_app_title")}return p[t]};this.setCurrentApplication=function(e){f=e;g.splice(0)};this.setHeaderHiding=function(){i.warning("Application configuration headerHiding property is deprecated and has no effect")};this.addApplicationSettingsButtons=function(e){if(l){g.push(function(){d(e)})}else{d(e)}};function d(e){var t,n=[],i=sap.ushell.Container.getRenderer("fiori2");for(t=0;t<e.length;t++){var a=e[t];n.push(a.getId());a.setIcon(a.getIcon()||u.getIconURI("customize"));if(o.i18n.getText("userSettings")===a.getProperty("text")){a.setProperty("text",o.i18n.getText("userAppSettings"))}a.setType(c.Unstyled)}if(sap.ushell.Container&&i){if(h.length){i.hideActionButton(h,true)}h=n;i.showActionButton(n,true,undefined,true)}}this.setWindowTitle=function(e){window.document.title=e};this.setIcons=function(e){a.setIcons(e)};this.setApplicationFullWidth=function(e){n.emit("setApplicationFullWidth",{bValue:e,date:Date.now()})};this.getSettingsControlAsync=function(){var e=new jQuery.Deferred;sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(t){e.resolve(new t)});return e.promise()};this.getSettingsControl=function(){var e="sap/ushell/ui/footerbar/SettingsButton",t=sap.ui.require(e);if(t){return new t}i.warning("sap.ushell.services.AppConfiguration.getSettingsControl is deprecated. Use getSettingsControlasync instead.");i.error("sap.ushell.services.AppConfiguration.getSettingsControl: sap.ushell.ui.footerbar.SettingsButton must be loaded before use.");return undefined};this.getApplicationName=function(e){var t,n=e&&e.additionalInformation||null;if(n){t=/^SAPUI5\.Component=(.+)$/i.exec(n);if(t){return t[1]}}return null};this.getApplicationUrl=function(e){var t=e&&e.url||null,n="P_TCODE",i;if(t){if(e.applicationType==="NWBC"&&t.indexOf(n)){return t}i=t.indexOf("?");if(i>=0){t=t.slice(0,i)}if(t.slice(-1)!=="/"){t+="/"}}return t};this.getPropertyValueFromConfig=function(e,t,n){var i;if(n&&e.hasOwnProperty(t+"Resource")){i=n.getText(e[t+"Resource"])}else if(e.hasOwnProperty(t)){i=e[t]}return i};this.getPropertyValueFromManifest=function(e,t,n){var i=t[n].manifestEntryKey,a=t[n].path,s=e.getManifestEntry(i);return r.get(a||"",s)};this.addMetadata=function(e,n){try{var a=this.getApplicationName(e),r=this.getApplicationUrl(e),o,u,c={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}},l,f,h,g,m,d,y,I=e&&e.componentHandle;if(n){if(!p.hasOwnProperty(n)){p[n]={complete:false}}if(!p[n].complete){if(I){o=I.getMetadata()}else if(a){i.warning("No component handle available for '"+a+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return}if(o){u=o.getConfig();g=o.getManifest()!==undefined;p[n].complete=true;if(u){d=u.resourceBundle||"";if(d){if(d.slice(0,1)!=="/"){d=r+d}y=s.create({url:d,locale:sap.ui.getCore().getConfiguration().getLanguage()})}}for(m in c){if(c.hasOwnProperty(m)){if(g){p[n][m]=this.getPropertyValueFromManifest(o,c,m)}if(u&&p[n][m]===undefined){p[n][m]=this.getPropertyValueFromConfig(u,m,y)}}}p[n].version=o.getVersion();p[n].technicalName=o.getComponentName()}else if(t.isApplicationTypeEmbeddedInIframe(e.applicationType)){var v="/~canvas;window=app/wda/",x=e.url.indexOf(v),b="/sap/bc/webdynpro/sap/",A="/bc/gui/sap/its/webgui",C=e.url.indexOf(A);if(x>=0){p[n].technicalName=e.url.substring(x+v.length,e.url.indexOf("/",x+v.length))}if(e.url.indexOf(b)>=0){p[n].technicalName=new RegExp(b+"(.*)[?]").exec(e.url)[1]}p[n].complete=true;if(C>=0){var E="etransaction=",w=e.url.indexOf(E,C+A.length),P=e.url.indexOf("&",w),S=P>=0?P:e.url.length;p[n].technicalName=decodeURIComponent(e.url.substring(w+E.length,S))+" (TCODE)"}}else{i.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration")}}l=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];f=r&&r[r.length-1]==="/"?r.substring(0,r.length-1):r;h=function(e){if(e.match(/^https?:\/\/.*/)){return false}return e&&e[0]!=="/"};l.forEach(function(e){var t=p[n][e],i=null;if(t){i=h(t)?f+"/"+t:t}p[n][e]=i})}}catch(e){i.warning("Application configuration could not be parsed")}}}return new l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppLifeCycle", ["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters","sap/ushell/AppInfoParameters","sap/base/Log","sap/ushell/components/pages/controller/PagesAndSpaceId","sap/ushell/EventHub"],function(e,t,n,a,r,i){"use strict";var o="appLoaded";function p(r,p,s,c){var l,u;this.getCurrentApplication=function(){return l};this.attachAppLoaded=function(e,t,n){u.attachEvent(o,e,t,n)};this.detachAppLoaded=function(e,t){u.detachEvent(o,e,t)};this.prepareCurrentAppObject=function(e,t,n,a){g(e,t,n,a)};this.reloadCurrentApp=function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){try{e.hashChanger.treatHashChanged(window.hasher.getHash())}catch(e){a.error("Error when trying to re-load the current displayed application",e,"sap.ushell.services.AppLifeCycle")}})};u=new e;if(sap.ushell.Container.inAppRuntime()===false){if(sap.ushell.Container.getRenderer()){f()}else{var h=function(){f();sap.ushell.Container.detachRendererCreatedEvent(h)};sap.ushell.Container.attachRendererCreatedEvent(h)}}function f(){var e=sap.ui.getCore().byId("viewPortContainer");if(!e||typeof e.attachAfterNavigate!=="function"){a.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return}e.attachAfterNavigate(function(e){var t;var n;var a;var r;var i;var o=false;if(e.mParameters.toId.indexOf("applicationShellPage")===0){n=e.mParameters.to.getApp()}else if(e.mParameters.toId.indexOf("application")===0){n=e.mParameters.to}if(n&&typeof n.getComponentHandle==="function"&&n.getComponentHandle()){r=n.getComponentHandle().getInstance()}else if(n){t=n.getAggregation("child");if(t){r=t.getComponentInstance()}}else{r=sap.ui.getCore().getComponent(e.mParameters.to.getComponent())}if(r){i=r.getId();o=i.indexOf("Shell-home-component")!==-1||i.indexOf("pages-component")!==-1||i.indexOf("workPageRuntime-component")!==-1||i.indexOf("Shell-appfinder-component")!==-1||i.indexOf("homeApp-component")!==-1||i.indexOf("runtimeSwitcher-component")!==-1}a=n&&typeof n.getApplicationType==="function"&&n.getApplicationType();if((!a||a==="URL")&&r){a="UI5"}g(a,r,o,n)})}function d(){var e=hasher&&hasher.getHash();if(!e){return Promise.reject("Could not identify current application hash")}var t=sap.ushell.Container.getServiceAsync("URLParsing");return t.then(function(t){return t.parseShellHash(e)})}function g(e,a,r,p){l={applicationType:e,componentInstance:a,homePage:r,getTechnicalParameter:function(n){return t.getParameterValue(n,a,p,e)},getIntent:d,getInfo:function(e){return n.getInfo(e,l)},getSystemContext:function(){var e=sap.ushell.services.AppConfiguration.getCurrentApplication()||{};var t=e.contentProviderId||"";return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(t)})},disableKeepAliveAppRouterRetrigger:function(e){d().then(function(t){i.emit("disableKeepAliveRestoreRouterRetrigger",{disable:e,intent:t,componentId:l.componentInstance.oContainer.sId,date:Date.now()})})}};setTimeout(function(){u.fireEvent(o,l)},0)}}p.hasNoAdapter=true;return p},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppState", ["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(e,t,n,i,s,r,jQuery){"use strict";function a(e){return r.isDefined(e)&&r.isDefined(e.transient)?!!e.transient:true}function o(n,i,s,r){this._oConfig=r&&r.config;this._sSessionKey="";this._oAdapter=new t(n);this._oAdapter=new e(this,this._oAdapter,r)}o.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey()}return this._sSessionKey};o.prototype.getAppState=function(e){var t=new jQuery.Deferred,i=this,s;this._loadAppState(e).done(function(e,r,a,o){s=new n(i,e,false,r,undefined,undefined,undefined,a,o);t.resolve(s)}).fail(function(){s=new n(i,e);t.resolve(s)});return t.promise()};o.prototype._getGeneratedKey=function(e){var t=r.generateRandomKey();if(e){t=("TAS"+t).substring(0,41)}else{t=("AS"+t).substring(0,40)}return t};o.prototype.createEmptyAppState=function(e,t,i,r){var o;var p="";var d="";var f=t||a(this._oConfig);var u=this._getGeneratedKey(f);if(i!==undefined&&!this.isPersistencyMethodSupported(i)){i=undefined;r=undefined}if(e){if(!(e instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component")}if(e.getMetadata&&e.getMetadata()&&typeof e.getMetadata().getName==="function"){p=e.getMetadata().getName()||""}if(!p&&e.getMetadata&&e.getMetadata().getComponentName){p=e.getMetadata().getComponentName()}if(e.getMetadata&&e.getMetadata()&&typeof e.getMetadata().getManifest==="function"&&typeof e.getMetadata().getManifest()==="object"&&typeof e.getMetadata().getManifest()["sap.app"]==="object"){d=e.getMetadata().getManifest()["sap.app"].ach||""}}if(f===true){i=r=undefined}else if(i===undefined&&this.isPersistencyMethodSupported(s.PersonalState)){i=s.PersonalState;r=undefined}o=new n(this,u,true,undefined,p,d,f,i,r);return o};o.prototype.createEmptyUnmodifiableAppState=function(){var e=this._getGeneratedKey(),t;t=new n(this,e,false);return t};o.prototype._saveAppState=function(e,t,n,i,o,p,d){var f=this._getSessionKey(),u=r.isDefined(o)?o:a(this._oConfig);if(u){p=undefined;d=undefined}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(s.PersonalState)){p=s.PersonalState}else{p=undefined}d=undefined}}return this._oAdapter.saveAppState(e,f,t,n,i,u,p,d)};o.prototype._loadAppState=function(e){return this._oAdapter.loadAppState(e)};o.prototype.deleteAppState=function(e){return this._oAdapter.deleteAppState(e)};o._getSequentializer=function(){return new i};o.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods()}return[]};o.prototype.isPersistencyMethodSupported=function(e){var t=this.getSupportedPersistencyMethods();if(t.length>0&&e!==undefined){return t.indexOf(e)>=0}return false};o.prototype.setAppStateToPublic=function(e){var t=p(e,"sap-xapp-state"),n=p(e,"sap-iapp-state"),i=(new jQuery.Deferred).resolve(),r=(new jQuery.Deferred).resolve(),a=new jQuery.Deferred,o,d;if(t!==undefined){i=this.makeStatePersistent(t,s.PublicState).done(function(n){if(t!==n){e=e.replace(t,n);o=n}}).fail(a.reject)}if(n!==undefined){r=this.makeStatePersistent(n,s.PublicState).done(function(t){if(n!==t){e=e.replace(n,t);d=t}}).fail(a.reject)}jQuery.when(i,r).done(function(){a.resolve(e,t,n,o,d)});return a.promise()};function p(e,t){var n=new RegExp("(?:"+t+"=)([^&/]+)"),i=n.exec(e),s;if(i&&i.length===2){s=i[1]}return s}o.prototype.makeStatePersistent=function(e,t,n){var i=new jQuery.Deferred;if(this.getSupportedPersistencyMethods().length===0){return i.resolve(e)}if(this.isPersistencyMethodSupported(t)){this.getAppState(e).done(function(s){if(s._iPersistencyMethod!==t){s.bTransient=false;s._iPersistencyMethod=t;s._oPersistencySettings=n;if(e.startsWith("TAS")){e=e.substring(1,e.length)}this._saveAppState(e,s._sData,s._sAppName,s._sACHComponent,false,t,n).done(function(){i.resolve(e)}).fail(i.reject)}else{i.resolve(e)}}.bind(this)).fail(i.reject)}else{i.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+t)}return i.promise()};o.prototype.getPersistentWhenShared=function(){return this._oConfig&&this._oConfig.persistentWhenShared===true?true:false};o.WindowAdapter=e;o.hasNoAdapter=false;return o},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution", ["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/navigationMode","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,r,i,s,o,a,u,l,c,d,f,p,g,h,m,v,b,y,S,j){"use strict";function R(e,t,n,r){this._init.apply(this,arguments)}R.prototype._init=function(t,n,r,i){this._iLogId=0;if(!this._implementsServiceInterface(t)){e.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return}this._oInboundProvider=new l(t.getInbounds.bind(t));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=i;this._oAdapter=t};R.prototype._implementsServiceInterface=function(e){if(typeof e.getInbounds==="function"){return true}return false};R.prototype._extractInboundFilter=function(e){if(!this._oAdapter.hasSegmentedAccess){return undefined}if(typeof e!=="string"){return undefined}var t=e.indexOf("#")===0?e:"#"+e;var n=j.parseShellHash(t);if(!n||!n.semanticObject||!n.action){return undefined}return[{semanticObject:n.semanticObject,action:n.action}]};R.prototype.resolveHashFragment=function(e){var t=this,n=new jQuery.Deferred,r=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),i=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(i).then(function(i){t._resolveHashFragment(e,r,i).done(function(e){return n.resolve(e)}).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};R.prototype.resolveTileIntent=function(e){var t=this,n=new jQuery.Deferred,r=this._extractInboundFilter(e);this._oInboundProvider.getInbounds(r).then(function(r){t._resolveTileIntent(e,undefined,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};R.prototype.resolveTileIntentInContext=function(e,t){var n,r=new jQuery.Deferred;n=u.createIndex(e.concat(m.getInbounds()));this._resolveTileIntent(t,undefined,n).done(r.resolve.bind(r)).fail(r.reject.bind(r));return r.promise()};R.prototype._resolveHashFragment=function(t,n,r){var i=this,s=new jQuery.Deferred,o=t.indexOf("#")===0?t:"#"+t,a=j.parseShellHash(o);if(a===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject().promise()}a.formFactor=S.getFormFactor();this._getMatchingInbounds(a,r,{bExcludeTileInbounds:true}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var u;if(r.length===0){e.warning("Could not resolve "+t,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");s.reject("Could not resolve navigation target");return}r=i._applySapNavigationScopeFilter(r,a);u=r[0];if(e.getLevel()>=e.Level.DEBUG){var l=function(e,t){return this[e]===undefined?"<undefined>":t};var c=function(e,t){return e==="_original"?undefined:l.call(this,e,t)};var d=JSON.stringify(u,c,"   ");e.debug("The following target will now be resolved",d,"sap.ushell.services.ClientSideTargetResolution")}i._resolveSingleMatchingTarget(u,n,o).done(function(e){s.resolve(e)}).fail(s.reject.bind(s))});return s.promise()};R.prototype._applySapNavigationScopeFilter=function(e,t){var r=t&&t.params&&t.params["sap-navigation-scope-filter"];if(!r){return e}var i=e.filter(function(e){var t=n.get("inbound.signature.parameters",e);var i=t&&t["sap-navigation-scope"];if(i){return r[0]===i.defaultValue.value}return undefined});return i.length>0?i:e};R.prototype._resolveSingleMatchingTarget=function(t,r,a){var u=this,l=new jQuery.Deferred,f=j.parseShellHash(a),p=[f.semanticObject,f.action].join("-"),g=(t.inbound.resolutionResult||{}).applicationType;var h;if(this._oAdapter.resolveSystemAlias){h=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}var m=!!t.inbound.templateContext;var y=i.getEasyAccessMenuResolver(p,g);if(y&&!m){y(f,t,h,i.WDA.enableWdaCompatibilityMode).then(function(e){var r=o.compute(n.get("inbound.resolutionResult.applicationType",t),(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(b.getCurrentApplication()||{}).applicationType,s.last("/core/navigation/enableInPlaceForClassicUIs"));S.shallowMergeObject(e,r);e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;l.resolve(e)},function(e){l.reject(e)});return l.promise()}var R=this._getReservedParameters(t);c.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(s){v.mixAppStateIntoResolutionResultAndRename(t,s).done(function(t){var s=function(){return u._constructFallbackResolutionResult.call(u,t,r,a)};if(i[g]){s=i[g].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var o=n.get("inbound.resolutionResult.url",t);d.executePrelaunchOperations(t,R["sap-prelaunch-operations"]).then(function(){return s(t,o,h)}).then(function(e){e.reservedParameters=R;e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;return e}).then(function(n){e.debug("Intent was resolved to the following target",JSON.stringify(t.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");S.shallowMergeObject(t.resolutionResult,n);l.resolve(t.resolutionResult)},function(e){if(typeof e==="string"&&e.indexOf("fallback:")>=0){u._constructFallbackResolutionResult.call(this,t,r,a).then(function(e){S.shallowMergeObject(t.resolutionResult,e);l.resolve(t.resolutionResult)},l.reject.bind(l))}else{l.reject(e)}})})});return l.promise()};R.prototype._getReservedParameters=function(e){var t=y.getParameters({injectFrom:"startupParameter"}).map(function(e){return e.name});var n=h.extractParameters(t,e.intentParamsPlusAllDefaults);y.getParameters({injectFrom:"inboundParameter"}).forEach(function(t){var r=t.name;var i=e.inbound&&e.inbound.signature&&e.inbound.signature.parameters;if(i&&Object.keys(i).length>0){var s=i[r];var o=s&&s.defaultValue&&s.defaultValue.hasOwnProperty("value");var a=s&&s.filter&&s.filter.hasOwnProperty("value");if(s&&(a||o)){if(o){n[r]=s.defaultValue.value}else{n[r]=s.filter.value}}else{delete n[r]}delete e.intentParamsPlusAllDefaults[r];var u=e.defaultedParamNames.indexOf(r);if(u>=0){e.defaultedParamNames.splice(u,1)}}});return n};R.prototype._resolveTileIntent=function(t,n,r){var i=this,s=new jQuery.Deferred,o=t.indexOf("#")===0?t:"#"+t,a=j.parseShellHash(o);if(a===undefined){e.error("Could not parse shell hash '"+t+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return s.reject("Cannot parse shell hash").promise()}a.formFactor=S.getFormFactor();this._getMatchingInbounds(a,r,{bExcludeTileInbounds:false}).fail(function(n){e.error("Could not resolve "+t,"_getMatchingInbounds promise rejected with: "+n,"sap.ushell.services.ClientSideTargetResolution");s.reject(n)}).done(function(r){var a;if(r.length===0){e.warning("Could not resolve "+t,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");s.reject("No matching targets found");return}a=r[0];i._resolveSingleMatchingTileIntent(a,n,o).done(s.resolve.bind(s)).fail(s.reject.bind(s))});return s.promise()};R.prototype._resolveSingleMatchingTileIntent=function(t,s,a){var u=new jQuery.Deferred,l=(t.inbound.resolutionResult||{}).applicationType,d=this;var f;if(this._oAdapter.resolveSystemAlias){f=this._oAdapter.resolveSystemAlias.bind(this._oAdapter)}c.mapParameterNamesAndRemoveObjects(t);sap.ushell.Container.getServiceAsync("AppState").then(function(c){v.mixAppStateIntoResolutionResultAndRename(t,c).done(function(t){var c=function(){return d._constructFallbackResolutionResult.call(d,t,s,a)};if(i[l]){c=i[l].generateResolutionResult}delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(function(e){return e!=="sap-tag"});var p=n.get("inbound.resolutionResult.url",t);c(t,p,f).then(function(n){S.shallowMergeObject(t.resolutionResult,n);var i=r({},t.inbound.tileResolutionResult);i.startupParameters=t.effectiveParameters;i.navigationMode=t.resolutionResult.navigationMode;if(!i.navigationMode){i.navigationMode=o.getNavigationMode(t.resolutionResult)}u.resolve(i);e.debug("Tile Intent was resolved to the following target",JSON.stringify(i,null,3),"sap.ushell.services.ClientSideTargetResolution")},function(e){u.reject(e)})})});return u.promise()};R.prototype._constructFallbackResolutionResult=function(t,n,i){var s={},o;Object.keys(t.intentParamsPlusAllDefaults).forEach(function(e){if(Array.isArray(t.intentParamsPlusAllDefaults[e])){s[e]=t.intentParamsPlusAllDefaults[e]}});o=t.mappedDefaultedParamNames||t.defaultedParamNames;if(o.length>0){s["sap-ushell-defaultedParameterNames"]=[JSON.stringify(o)]}if(typeof n!=="function"){e.error("Cannot resolve hash fragment",i+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.")}e.warning("Cannot resolve hash fragment client side",i+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(e,o){n(i,r({},t.inbound),s).done(function(t){var n={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(e){if(t.hasOwnProperty(e)){n[e]=t[e]}});e(n)}).fail(o.bind(null))})};R.prototype.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(t){var n={};t.getAllInbounds().forEach(function(e){if(typeof e.semanticObject==="string"&&e.semanticObject!=="*"&&!e.hideIntentLink&&e.semanticObject.length>0){n[e.semanticObject]=true}});e.resolve(Object.keys(n).sort())},function(){e.reject.apply(e,arguments)});return e.promise()};R.prototype.getLinks=function(n){var i,s=this,o,a,u,l=new jQuery.Deferred,c;if(arguments.length===1&&t(arguments[0])){i=arguments[0];c=r({},i);["action","semanticObject"].forEach(function(e){if(i.hasOwnProperty(e)){c[e]=i[e]}});if(c.appStateKey){c.params=c.params||{};c.params["sap-xapp-state"]=[c.appStateKey];delete c.appStateKey}}else if(arguments.length<=3){e.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");o=arguments[0];a=arguments[1];u=arguments[2];c={semanticObject:o,params:a,ignoreFormFactor:u}}else{return l.reject("invalid arguments for getLinks").promise()}this._oInboundProvider.getInbounds().then(function(e){s._getLinks(c,e).done(l.resolve.bind(l)).fail(l.reject.bind(l))},function(){l.reject.apply(l,arguments)});return l.promise()};R.prototype._validateGetSemanticObjectLinksArgs=function(t){var n=t.semanticObject,r=t.action,i=!t.hasOwnProperty("action");if(typeof n!=="undefined"||i){if(typeof n!=="string"){e.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(n)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(i&&n.match(/^\s+$/)){e.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(!i&&n.length===0){e.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+n+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}}if(typeof r!=="undefined"){if(typeof r!=="string"){e.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(r)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}if(r.length===0){e.error("invalid input for _getLinks","the action must not be an empty string, got '"+r+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action"}}return undefined};R.prototype._getLinks=function(t,r){var i=t.semanticObject,s=t.action,o=t.params,a=!!t.withAtLeastOneUsedParam,u=!!t.treatTechHintAsFilter,l=t.ignoreFormFactor,c=t.hasOwnProperty("sortResultsBy")?t.sortResultsBy:"intent";if(t.hasOwnProperty("sortResultOnTexts")){e.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported","getLinks results will be sorted by '"+c+"'","sap.ushell.services.ClientSideTargetResolution")}var d={bExcludeTileInbounds:true};var f=this._validateGetSemanticObjectLinksArgs(t);if(t.tags){d.tags=t.tags}if(f){return(new jQuery.Deferred).reject(f).promise()}if(i==="*"){return jQuery.when([])}function p(e){var t=j.paramsToString(e);return t?"?"+t:""}var g=new jQuery.Deferred,m=S.getFormFactor(),v=j.parseParameters(p(o)),b={semanticObject:i===""?undefined:i,action:s,formFactor:l?undefined:m,params:v};if(u){b.treatTechHintAsFilter=true}this._getMatchingInbounds(b,r,d).done(function(r){var s={},o=r.map(function(e){var r=i||e.inbound.semanticObject,o="#"+r+"-"+e.inbound.action,u;if(r==="*"){return undefined}if(e.inbound.action==="*"){return undefined}if(e.inbound&&e.inbound.hasOwnProperty("hideIntentLink")&&e.inbound.hideIntentLink===true){return undefined}if(!s.hasOwnProperty(o)){s[o]={matchingInbound:e.inbound,count:1};if(e.inbound.signature.additionalParameters==="ignored"){u=h.filterObjectKeys(v,function(t){return t.indexOf("sap-")===0||e.inbound.signature.parameters.hasOwnProperty(t)},false)}else{u=v}if(a){var l=Object.keys(u).some(function(e){return e.indexOf("sap-")!==0});if(!l){s[o].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined}}var c=h.inboundSignatureMeetsParameterOptions(e.inbound.signature.parameters,t.paramsOptions||[]);if(!c){s[o].hideReason="inbound signature does not meet the requested parameter filter options";return undefined}var d={intent:o+p(u),text:e.inbound.title};if(e.inbound.icon){d.icon=e.inbound.icon}if(e.inbound.subTitle){d.subTitle=e.inbound.subTitle}if(e.inbound.shortTitle){d.shortTitle=e.inbound.shortTitle}var f=n.get("inbound.signature.parameters.sap-tag.defaultValue.value",e);if(f){d.tags=[f]}return d}s[o].count++;return undefined}).filter(function(e){return typeof e==="object"});if(c!=="priority"){o.sort(function(e,t){return e[c]<t[c]?-1:1})}if(o.length===0){e.debug("_getLinks returned no results")}else if(e.getLevel()>=e.Level.DEBUG){if(e.getLevel()>=e.Level.TRACE){var u=[];var l=[];o.forEach(function(e){var t=e.intent.split("?")[0];if(s[t].hideReason){l.push(["-",t+"("+s[t].hideReason+")\n"," text:",e.text+"\n"," full intent:",e.intent].join(" "))}else{u.push(["-",t,s[t].count>1?"("+(s[t].count-1)+" others matched)\n":"\n","text:",e.text+"\n","full intent:",e.intent].join(" "))}});e.debug("_getLinks filtered to the following unique intents:","\n"+u.join("\n"),"sap.ushell.services.ClientSideTargetResolution");e.debug("_getLinks would have also returned the following unique intents, but something prevented this:",l.join("\n"),"sap.ushell.services.ClientSideTargetResolution")}else{e.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(s).join("\n - "),"sap.ushell.services.ClientSideTargetResolution")}}g.resolve(o)}).fail(g.reject.bind(g));return g.promise()};R.prototype._getMatchingInbounds=function(t,n,r){var i=this,s,o,u,l,c,d,g,h=new jQuery.Deferred;if(r){s=r.tags;d=r.bExcludeTileInbounds}if(e.getLevel()>=e.Level.DEBUG){u=++i._iLogId}p.begin(function(){function e(e){var t=e.action||(typeof e.action==="undefined"?"<any>":"<invalid-value>");var n=e.semanticObject||(typeof e.semanticObject==="undefined"?"<any>":"<invalid-value>");return j.constructShellHash({semanticObject:n,action:t,params:e.params})}var n=e(t);return{logId:u,title:"Matching Intent '"+n+"' to inbounds (form factor: "+(t.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]}});c=t.semanticObject;o=t.action;this._oShellHash=t;l=s?n.getSegmentByTags(s):n.getSegment(c,o);if(d){g=l.filter(function(e){return!e.tileResolutionResult||!e.tileResolutionResult.isCustomTile})}else{g=l}var m=null;if(this._oAdapter.getContentProviderDataOriginsLookup){m=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter)}f.match(t,g,{},m,e.getLevel()>=e.Level.DEBUG).then(function(e){p.log(function(){return{logId:u,stage:1,prefix:"✘",lines:Object.keys(e.noMatchReasons||{}).map(function(t){return t+" "+e.noMatchReasons[t]})}});p.log(function(){var t=e.matchResults.map(function(e){return a.formatInbound(e.inbound)});return{logId:u,stage:1,prefix:t.length>0?"✅":"✘",lines:t.length>0?t:["No inbound was matched"]}});var t={};var n=false;var r=Object.keys(e.missingReferences);r.forEach(function(r){var i=Object.keys(e.missingReferences[r]);n=n||i.length>0;t[r]=i});r=r.filter(function(e){if(t[e].length>0){return true}delete t[e];return false});if(!n){p.log(function(){return{logId:u,stage:2,prefix:"✅",line:"No need to resolve references"}});return(new jQuery.Deferred).resolve({matchResults:e.matchResults,referencesToInclude:null}).promise()}r.forEach(function(e){p.log(function(){return{logId:u,stage:2,line:'@ Must resolve the following references with contentProviderId = "'+e+'":',prefix:"•",lines:t[e]}})});var i=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(e){var n=r.map(function(e){return this.getSystemContext(e)}.bind(this));return Promise.all(n).then(function(n){var i=r.map(function(r,i){return new Promise(function(s,o){e.resolveReferences(t[r],n[i]).done(s).fail(o)})});return Promise.all(i)})}.bind(this)).then(function(t){var n={matchResults:e.matchResults,referencesToInclude:{}};r.forEach(function(e,r){var i=t[r];n.referencesToInclude[e]=i;if(Object.keys(i).length>0){p.log(function(){return{logId:u,stage:2,line:'✅ resolved references with contentProviderId = "'+e+'" to the following values:',prefix:"•",lines:Object.keys(i).map(function(e){return e+": '"+i[e]+"'"})}})}});i.resolve(n)}).catch(function(e){p.log(function(){return{logId:u,stage:2,prefix:"❌",line:"Failed to resolve references: "+e}});h.resolve([])});return i.promise()}.bind(this)).then(function(e){var n,r,i=e.referencesToInclude;if(!i){p.log(function(){return{logId:u,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"✅"}});return(new jQuery.Deferred).resolve(e).promise()}r=e.matchResults;n=r.map(function(e){return e.inbound});return f.match(t,n,i,m,0).then(function(e){p.log(function(){var t=e.matchResults||[];if(t.length>=1){return{logId:u,stage:3,line:"The following inbounds re-matched:",lines:t.map(function(e){return a.formatInbound(e.inbound)}),prefix:"✅"}}return{logId:u,stage:3,line:"No inbounds re-matched",prefix:"-"}});return e})}).then(function(e){var t=e.matchResults||[];if(t.length<=1){p.log(function(){return{logId:u,stage:4,line:"Nothing to sort"}});h.resolve(t);return}var n=f.sortMatchingResultsDeterministic(e.matchResults||[]);p.log(function(){var e=n.map(function(e){return a.formatInbound(e.inbound||{})+(e.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+e["sap-priority"]+"'"+"\n * 2 * Sort string: '"+e.priorityString+"\n * 3 * Deterministic blob: '"+f.serializeMatchingResult(e)+"'"});return{logId:u,stage:4,line:"Sorted inbounds as follows:",lines:e,prefix:".",number:true}});h.resolve(n)});return h.promise().then(function(e){p.end(function(){return{logId:u}});return e})};R.prototype._isIntentSupportedOne=function(e,t){var n=new jQuery.Deferred,r=j.parseShellHash(e);if(e==="#"){n.resolve(true);return n.promise()}if(r===undefined){return n.reject("Could not parse shell hash '"+e+"'").promise()}r.formFactor=S.getFormFactor();this._getMatchingInbounds(r,t,{bExcludeTileInbounds:true}).done(function(e){n.resolve(e.length>0)}).fail(function(){n.reject()});return n.promise()};R.prototype.isIntentSupported=function(e){var t=this,n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._isIntentSupported(e,r).done(n.resolve.bind(n)).fail(n.reject.bind(n))},function(){n.reject.apply(n,arguments)});return n.promise()};R.prototype._isIntentSupported=function(e,t){var n=this,r=new jQuery.Deferred,i={};r.resolve();function s(e,t){i[e]={supported:t}}var o=[];e.forEach(function(e){var i=n._isIntentSupportedOne(e,t);i.fail(function(e){o.push(e)});i.done(function(t){s(e,t)});r=jQuery.when(r,i)});var a=new jQuery.Deferred;r.done(function(){a.resolve(i)}).fail(function(){a.reject("One or more input intents contain errors: "+o.join(", "))});return a.promise()};R.prototype.getUserDefaultParameterNames=function(e){var t=this,n=new jQuery.Deferred;this._oInboundProvider.getInbounds().then(function(r){t._getUserDefaultParameterNames(r.getAllInbounds(),e).then(function(e){n.resolve(e)},function(e){n.reject("Cannot get user default parameters from inbounds: "+e)})},function(){n.reject.apply(n,arguments)});return n.promise()};R.prototype._getUserDefaultParameterNames=function(e,t){var n={simple:{},extended:{}};e=e.filter(function(e){if(e.contentProviderId===undefined&&t.id===""){return true}return e.contentProviderId===t.id});return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(t){e.forEach(function(e){var r=e.signature&&e.signature.parameters||[];Object.keys(r).forEach(function(e){var i=r[e],s,o,a;if(i){if(i.filter&&i.filter.format==="reference"){a=i.filter.value}else if(i.defaultValue&&i.defaultValue.format==="reference"){a=i.defaultValue.value}if(typeof a==="string"){s=t.extractUserDefaultReferenceName(a);if(typeof s==="string"){n.simple[s]={}}o=t.extractExtendedUserDefaultReferenceName(a);if(typeof o==="string"){n.extended[o]={}}}}})});return n})};R.prototype.getEasyAccessSystems=function(r){var s={},o,u,l;r=r||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[r]){return this._oHaveEasyAccessSystemsDeferreds[r].promise()}this._oHaveEasyAccessSystemsDeferreds[r]=new jQuery.Deferred;l=this._oHaveEasyAccessSystemsDeferreds[r];function c(e,t,n){if(!e){return false}var i=[e.semanticObject,e.action].join("-");return n[r][i]&&e.deviceTypes&&t!==undefined&&e.deviceTypes[t]}o=i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent.split("-")[1];e[n]={appType:t.type,priority:t.easyAccessMenu.systemSelectionPriority};return e},{});u={userMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInUserMenu;return e},{}),sapMenu:i.getEasyAccessMenuDefinitions().reduce(function(e,t){var n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInSapMenu;return e},{})};this._oInboundProvider.getInbounds().then(function(r){var i={};r.getAllInbounds().filter(function(e){return c(e,S.getFormFactor(),u)}).forEach(function(r){var u;if(t(r.signature.parameters["sap-system"])&&r.signature.parameters["sap-system"].hasOwnProperty("filter")){u=n.get("signature.parameters.sap-system.filter.value",r)}if(typeof u==="string"){var l=o[r.action].priority;var c=o[r.action].appType;if(!s[u]){i[u]=-1;s[u]={appType:{}}}if(i[u]<l){s[u].text=r.title;i[u]=l}s[u].appType[c]=true}else{e.warning("Cannot extract sap-system from easy access menu inbound: "+a.formatInbound(r),"This parameter is supposed to be a string. Got '"+u+"' instead.","sap.ushell.services.ClientSideTargetResolution")}});l.resolve(s)},function(){l.reject.apply(l,arguments)});return l.promise()};R.prototype.getSystemContext=function(e){var t=e===undefined?"":e;return new Promise(function(e,n){var r;this._oAdapter.resolveSystemAlias(t).done(function(t){r=g.createSystemContextFromSystemAlias(t);e(r)}).fail(function(e){n(e)})}.bind(this))};R.hasNoAdapter=false;return R},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel", ["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log","sap/ui/core/Manifest"],function(e,t,jQuery,i,n,r,o,s,a,l,u,p,c,h,f,d,g,P){"use strict";var v=h.DisplayFormat;var _=h.ContentNodeType;var y="sap.ushell.services.CommonDataModel",m={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};function z(t,i,r,o){this._oAdapter=t;this._oPersonalizationProcessor=new e;this._oSiteDeferred=new jQuery.Deferred;this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new n;this._oPersonalizationDeltas={};this._bLoadPersonalization=f.isFlpHomeIntent();this._oManifestCache={};this._oGetSitePromise=t.getSite().then(function(e){this._oOriginalSite=a({},e);if(this._bLoadPersonalization){this._loadAndApplyPersonalization(e)}return e}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);this._bLoadPersonalization=true}.bind(this))}z.prototype._loadAndApplyPersonalization=function(e){var t=new l(e._version);if(t.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(t).then(function(t){if(t){this._oPersonalizationDeltas=o(t)}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"}}this._triggerMixinPersonalisationInSite(e,t)}.bind(this)).fail(this._oSiteDeferred.reject)}else{this._oPersonalizedPages={};this._ensureStandardVizTypesPresent(this._oOriginalSite).then(function(e){this._oOriginalSite=e;this._oOriginalSite=this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite)}.bind(this))}};z.prototype._applyPagePersonalization=function(e,t){var i=e.identification.id;if(Object.keys(t).length){var n=t.classicHomePage;if(n&&n.version==="3.1.0"){Object.keys(n).forEach(function(e){if(!t[e]){t[e]=n[e]}});delete t.classicHomePage;t._version=t.version}var r=new l(t._version||t.version);if(r.compareTo("3.1.0")<0){t={classicHomePage:t,_version:"3.1.0",version:"3.1.0"}}}this._oPersonalizationDeltas=t;var s=o(t[i],20)||{};var a=this._oSiteConverter.convertTo("3.0.0",o(e,20));return this._triggerMixinPersonalisationInSite(a,s).then(function(e){this._oPersonalizedPages[i]=this._oSiteConverter.convertTo("3.1.0",o(e,20));return this._oPersonalizedPages[i]}.bind(this))};z.prototype._migratePersonalizedPages=function(e){if(typeof this._oAdapter.migratePersonalizedPages!=="function"){return Promise.resolve(e)}return this._oAdapter.migratePersonalizedPages(e).then(function(e){if(e.length===0){return null}return this.save(e)}.bind(this)).then(function(){return e})};z.prototype._triggerMixinPersonalisationInSite=function(e,t){return new Promise(function(i,n){this._oPersonalizationProcessor.mixinPersonalization(e,t).done(function(e){this._oPersonalizedSite=this._ensureCompleteSite(e);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._ensureStandardVizTypesPresent(this._oPersonalizedSite).then(function(e){this._oPersonalizedSite=e;this._oPersonalizedSite=this._ensureProperDisplayFormats(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);i(this._oPersonalizedSite)}.bind(this)).catch(n)}.bind(this)).fail(function(e){this._oSiteDeferred.reject(e);n()}.bind(this))}.bind(this))};z.prototype.getHomepageGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=t&&t.site&&t.site.payload&&t.site.payload.groupsOrder?t.site.payload.groupsOrder:[];e.resolve(i)});return e.promise()};z.prototype.getGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=[];Object.keys(t.groups).forEach(function(e){i.push(t.groups[e])});e.resolve(i)});return e.promise()};z.prototype.getGroup=function(e){var t=new jQuery.Deferred;this.getSite().then(function(i){var n=i.groups[e];if(n){t.resolve(n)}else{t.reject("Group "+e+" not found")}});return t.promise()};z.prototype.getSite=function(){if(!this._bLoadPersonalization){this.getSiteWithoutPersonalization().then(this._loadAndApplyPersonalization.bind(this));this._bLoadPersonalization=true}return this._oSiteDeferred.promise()};z.prototype.getSiteWithoutPersonalization=function(){return this._oGetSitePromise};z.prototype.getPage=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");return Promise.resolve(this._oGetSitePromise).then(function(){if(this._oPersonalizedPages[e]){return this._oPersonalizedPages[e]}if(t||i&&e===n){return Promise.all([this._getPageFromAdapter(e),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get page "+e)}).then(function(e){return this._applyPagePersonalization(e[0],e[1]).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this)).then(function(e){if(r&&o){return this._migratePersonalizedPages([e]).then(function(e){return e[0]})}return e}.bind(this))}return this._getPageFromAdapter(e)}.bind(this))};z.prototype._getPageFromAdapter=function(e){if(!this._oAdapter.getPage){return Promise.resolve(o(this._oOriginalSite.pages[e],20))}return this._oAdapter.getPage(e).then(function(t){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(i){var n=i[0];var r=i[1];this._oOriginalSite.pages[e]=t;this._oOriginalSite.visualizations=n;this._oOriginalSite.vizTypes=r;return o(t,20)}.bind(this))}.bind(this))};z.prototype._filterForProperPages=function(e){return e.filter(function(e){return!!e})};z.prototype.getPages=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var n=u.last("/core/spaces/myHome/myHomePageId");var r=u.last("/core/stableIDs/enabled");var o=u.last("/core/stableIDs/migratePersonalization");return Promise.resolve(this._oGetSitePromise).then(function(){if(t||i){return Promise.all([this._getPagesFromAdapter(e),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get pages")}).then(function(e){var i=e[0];var s=e[1];return Promise.all(Object.keys(i).map(function(e){if(this._oPersonalizedPages[e]){return Promise.resolve(this._oPersonalizedPages[e])}if(!t&&e!==n){return Promise.resolve(i[e])}return this._applyPagePersonalization(i[e],s).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this))).then(function(e){if(r&&o){return this._migratePersonalizedPages(e)}return e}.bind(this)).then(function(e){return this._filterForProperPages(e)}.bind(this))}.bind(this))}return this._getPagesFromAdapter(e).then(function(e){return this._filterForProperPages(c(e))}.bind(this))}.bind(this))};z.prototype._getPagesFromAdapter=function(e){if(!this._oAdapter.getPages){var t={};for(var i in this._oOriginalSite.pages){if(p(e,this._oOriginalSite.pages[i].identification.id)){t[i]=this._oOriginalSite.pages[i]}}return Promise.resolve(o(t,20))}return this._oAdapter.getPages(e).then(function(e){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(t){var i=t[0];var n=t[1];this._oOriginalSite.visualizations=i;this._oOriginalSite.vizTypes=n;Object.keys(e).forEach(function(t){this._oOriginalSite.pages[t]=e[t]}.bind(this));return o(e,20)}.bind(this))}.bind(this))};z.prototype.getAllPages=function(e){if(e&&e.personalizedPages){return this._getAllPersonalizedPages()}return this._getAssignedPageIds().then(function(e){return this.getPages(e)}.bind(this))};z.prototype._getAssignedPageIds=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getContentNodes()}).then(function(e){var t=[];e.forEach(function(e){this._collectPageIds(e,t)}.bind(this));return t}.bind(this))};z.prototype._collectPageIds=function(e,t){if(e.type===_.Page){if(t.indexOf(e.id)===-1){t.push(e.id)}}if(e.children!==undefined){e.children.forEach(function(e){this._collectPageIds(e,t)}.bind(this))}};z.prototype._getAllPersonalizedPages=function(){return Promise.resolve(this._oGetSitePromise).then(function(){return Promise.all([this._getAssignedPageIds(),new Promise(function(e,t){this._oAdapter.getPersonalization(this._oOriginalSite._version).done(e).catch(t)}.bind(this))])}.bind(this)).then(function(e){var t=e[0];var i=e[1];var n=[];Object.keys(i).forEach(function(e){if(e==="version"||e==="_version"){return}if(!t.includes(e)){return}var r=i[e];if(Object.keys(r).length>1){n.push(e)}});if(n.length>0){return this.getPages(n)}return[]}.bind(this))};z.prototype.getApplications=function(){return new Promise(function(e,t){this.getSite().then(function(i){var n=i.applications;if(n){e(n)}else{t("CDM applications not found.")}}).fail(t)}.bind(this))};z.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(e){var t=e[0];var i=e[1];return s(t,i)})}return this.getCachedVizTypes()};z.prototype.getCachedVizTypes=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){e=this._oAdapter.getCachedVizTypes()}return Promise.all([this._getSiteProperty("vizTypes"),e]).then(function(e){var t=e[0];var i=e[1];return s(t,i)})};z.prototype.getVizType=function(e){var t=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){t=this._oAdapter.getVizType(e)}return Promise.all([this._getSiteProperty("vizTypes"),t]).then(function(t){var i=t[0];var n=t[1];if(n){i[e]=n}return i[e]})};z.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(e){var t=e[0];var i=e[1];return s(t,i)})}return this.getCachedVisualizations()};z.prototype.getCachedVisualizations=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){e=this._oAdapter.getCachedVisualizations()}return Promise.all([this._getSiteProperty("visualizations"),e]).then(function(e){var t=e[0];var i=e[1];return s(t,i)})};z.prototype._getSiteProperty=function(e){return new Promise(function(i,n){this.getSite().then(function(r){var o=t.get(e,r);if(o){i(o)}else{var s=e.toString();n("CDM "+s+" not found.")}}).fail(n)}.bind(this))};z.prototype.getGroupFromOriginalSite=function(e){var t=new jQuery.Deferred;if(typeof e==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[e]){t.resolve(jQuery.extend(true,{},this._oOriginalSite.groups[e]))}else{t.reject("Group does not exist in original site.")}return t.promise()};z.prototype.getOriginalPage=function(e){return o(this._oOriginalSite.pages[e],20)};z.prototype.save=function(e){var t=new jQuery.Deferred;if(this._oOriginalSite._version==="3.1.0"){if(!e){return t.reject("No page id was provided").promise()}if(typeof e==="string"){e=[e]}this._saveCdmVersion31(e).then(t.resolve).catch(t.reject)}else{this._saveCdmVersion30().then(t.resolve).catch(t.reject)}return t.promise()};z.prototype._saveCdmVersion30=function(){var e=this._oOriginalSite;var t=this._oPersonalizedSite;return new Promise(function(i,n){this._oPersonalizationProcessor.extractPersonalization(o(t,20),o(e,20)).done(i).fail(n)}.bind(this)).catch(function(){return Promise.reject("Personalization Processor: Cannot extract personalization.")}).then(function(e){if(!r(e)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas=e;return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._saveCdmVersion31=function(e){var t=e.map(function(e){var t=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[e]);var i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[e]);return new Promise(function(n,r){this._oPersonalizationProcessor.extractPersonalization(o(i,20),o(t,20)).done(function(t){n({pageId:e,personalization:t})}).fail(function(t){g.error("Cannot extract personalization of page "+e+": "+t,null,y);n()})}.bind(this))}.bind(this));return Promise.all(t).then(function(e){var t=false;e.forEach(function(e){if(!e){return}if(!r(e.personalization)){t=true;if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version}this._oPersonalizationDeltas[e.pageId]=e.personalization}}.bind(this));if(t){return this._setPersonalization(this._oPersonalizationDeltas)}return Promise.resolve()}.bind(this))};z.prototype._setPersonalization=function(e,t){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]}}return new Promise(function(i,n){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,e,t);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:i,reject:n})}.bind(this))}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(e,t);return new Promise(function(e,t){this._oPendingPersonalizationDeferred.then(e).fail(t).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var e=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(e,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery}}.bind(this))}.bind(this))};z.prototype._cleanupPersonalizationQueuePromises=function(e,t){t.forEach(function(t){e.then(t.resolve).catch(t.reject)})};z.prototype._getUnreferencedCatalogApplications=function(e){var t={};var i=Object.keys(e.applications).map(function(t){return e.applications[t]["sap.app"].id}).reduce(function(e,t){e[t]=true;return e},{});var n=e.catalogs;Object.keys(n).forEach(function(e){var r=n[e].payload.appDescriptors;r.map(function(e){return e.id}).filter(function(e){return!i[e]}).forEach(function(i){if(!t.hasOwnProperty(e)){t[e]={}}t[e][i]=true})});return t};z.prototype._formatUnreferencedApplications=function(e,t){return"One or more apps from "+e+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(t).map(function(e){var i=Object.keys(t[e]).map(function(e){return"'"+e+"'"});return"From catalog '"+e+"': "+i.join(", ")}).join("; ")};z.prototype._removeUnreferencedApplications=function(e,t){Object.keys(e.catalogs).forEach(function(i){var n=e.catalogs[i].payload;var r=n.appDescriptors;n.appDescriptors=r.filter(function(e){return t[i]&&!t[i][e.id]})})};z.prototype.getExtensionSites=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("PluginManager").then(function(t){t.loadPlugins("ContentProvider").done(function(){var t=Object.keys(this._oContentProviderIndex),i=t.length;if(i===0){e.resolve([]);return}var n=t.map(function(t){var i=this._oContentProviderIndex[t];var n;try{n=i.getSite();if(!n||typeof n.then!=="function"){n=Promise.reject("Call to getSite failed: getSite did not return a Promise")}}catch(e){n=Promise.reject("Call to getSite failed: "+e)}return n.then(function(t,i){var n=jQuery.extend(true,{},i);var r=this._getUnreferencedCatalogApplications(i);if(Object.keys(r).length>0){var o=this._formatUnreferencedApplications(t,r);g.error(o,null,y);this._removeUnreferencedApplications(n,r)}var s={providerId:t,success:true,site:n};e.notify(s);return s}.bind(this,t)).catch(function(e,t){return{providerId:e,success:false,error:t}}.bind(null,t))}.bind(this));Promise.all(n).then(e.resolve)}.bind(this))}.bind(this));return e.promise()};z.prototype.registerContentProvider=function(e,t){if(this._oContentProviderIndex[e]){g.error("a content provider with ID '"+e+"' is already registered",null,y);return}this._oContentProviderIndex[e]=t;g.debug("ContentProvider '"+e+"' was registered",null,y)};z.prototype._ensureCompleteSite=function(e){if(e.groups){var t=e.groups;Object.keys(t).forEach(function(e){if(!t[e]){delete t[e]}else{if(!t[e].payload){t[e].payload={}}if(!t[e].payload.links){t[e].payload.links=[]}if(!t[e].payload.tiles){t[e].payload.tiles=[]}if(!t[e].payload.groups){t[e].payload.groups=[]}}})}return e};z.prototype._ensureGroupsOrder=function(e){var i=t.get("site.payload.groupsOrder",e),n=e.groups,r,o=0;if(!i){return e}while(o<i.length){r=i[o];if(!n[r]){i.splice(o,1)}else{o++}}return e};z.prototype.getPlugins=function(){var e,n,r;n=function(e,i){var n,r=Object.keys(i).length;if(r===0){return{}}if(!i.hasOwnProperty("Shell-plugin")){g.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+e+"'","plugin startup configuration cannot be determined correctly",y);return{}}if(r>1){g.warning("Multiple inbounds are defined for plugin '"+e+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",y)}n=t.get("signature.parameters",i["Shell-plugin"])||{};return Object.keys(n).reduce(function(e,i){var r=t.get(i+".defaultValue.value",n);if(typeof r==="string"){e[i]=r}return e},{})};e=function(t){Object.keys(t).filter(function(e){return typeof t[e]==="object"}).forEach(function(i){t[i]=e(t[i])});return Object.freeze(t)};return function(o){if(o!==undefined){r=o}if(r){return jQuery.when(r)}r={};return this.getSiteWithoutPersonalization().then(function(o){var s=o.applications||{};Object.keys(s).filter(function(e){return t.get("type",this[e]["sap.flp"])==="plugin"},s).forEach(function(e){var o,s,a=this[e],l={};if(!i(a["sap.platform.runtime"])){g.error("Cannot find 'sap.platform.runtime' section for plugin '"+e+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else if(!i(a["sap.platform.runtime"].componentProperties)){g.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+e+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else{l=a["sap.platform.runtime"].componentProperties}r[e]={url:l.url,component:a["sap.ui5"].componentName};var u=t.get("crossNavigation.inbounds",a["sap.app"])||{};s=n(e,u);o=jQuery.extend(l.config||{},s);if(o){r[e].config=o}if(l.asyncHints){r[e].asyncHints=l.asyncHints}var p=t.get("deviceTypes",a["sap.ui"]);if(p){r[e].deviceTypes=p}},s);return e(r)},function(e){return e})}}();z.prototype._mapDisplayFormats=function(e){var t={tile:v.Standard,standard:v.Standard,link:v.Compact,compact:v.Compact,flat:v.Flat,flatWide:v.FlatWide,tileWide:v.StandardWide,standardWide:v.StandardWide};var i=Object.keys(t).filter(function(t){return e.indexOf(t)>-1});return i.map(function(e){return t[e]})};z.prototype._ensureProperDisplayFormats=function(e){if(e.vizTypes){Object.keys(e.vizTypes).forEach(function(i){if(e.vizTypes[i]["sap.flp"]&&e.vizTypes[i]["sap.flp"].vizOptions){var n=e.vizTypes[i];var r=t.get("vizOptions.displayFormats.supported",n["sap.flp"]);var o=t.get("vizOptions.displayFormats.default",n["sap.flp"]);if(r){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(r)}if(o){e.vizTypes[i]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([o])[0]}}}.bind(this))}if(e.hasOwnProperty("pages")){Object.keys(e.pages).forEach(function(t){var i=e.pages[t];if(i.payload&&i.payload.sections){var n=i.payload.sections;Object.keys(n).forEach(function(e){var t=n[e];Object.keys(t.viz).forEach(function(e){var i=t.viz[e];if(i.displayFormatHint){var n=this._mapDisplayFormats([i.displayFormatHint])[0];i.displayFormatHint=n||i.displayFormatHint}}.bind(this))}.bind(this))}}.bind(this))}else if(e.hasOwnProperty("groups")){Object.keys(e.groups).forEach(function(t){var i=e.groups[t];i.payload.tiles.forEach(function(e){if(e.displayFormatHint){var t=this._mapDisplayFormats([e.displayFormatHint])[0];e.displayFormatHint=t||e.displayFormatHint}}.bind(this))}.bind(this))}return e};z.prototype._ensureStandardVizTypesPresent=function(e){if(!(e._version&&e._version.startsWith("3."))){return Promise.resolve(e)}if(!e.vizTypes){e.vizTypes={}}var t=[];var i={};i[m.STATIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncher/manifest.json";i[m.DYNAMIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json";i[m.CARD]="sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json";Object.keys(i).forEach(function(n){if(!e.vizTypes[n]){var r=i[n];var o=this._loadManifest(r).then(function(t){e.vizTypes[n]=t});t.push(o)}}.bind(this));if(t.length===0){return Promise.resolve(e)}return Promise.all(t).then(function(){return e})};z.prototype._loadManifest=function(e){if(!this._oManifestCache[e]){var t=sap.ui.require.toUrl(e);this._oManifestCache[e]=P.load({manifestUrl:t,async:true}).then(function(e){return e.getRawJson()})}return this._oManifestCache[e].then(function(e){return o(e)})};z.prototype.getMenuEntries=function(e){return new Promise(function(i,n){this.getSite().then(function(n){var r=t.get("menus."+e+".payload.menuEntries",n);i(o(r)||[])})}.bind(this))};z.prototype.getContentProviderIds=function(){return new Promise(function(e,t){this.getSite().then(function(t){var i=Object.keys(t.systemAliases);var n={};c(t.applications).forEach(function(e){var t=d.getContentProviderId(e);if(p(i,t)){n[t]=true}});e(Object.keys(n))})}.bind(this))};z.hasNoAdapter=false;return z},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Container", ["sap/ushell/Container","sap/base/Log"],function(e,s){"use strict";s.warning("The use of sap/ushell/services/Container is deprecated. Please use sap/ushell/Container instead!");return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ContentExtensionAdapterFactory", ["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(e,r,jQuery,n){"use strict";var t={};t.getAdapters=function(r){var n=t._getConfigAdapters(r);var a={};var i=n.map(function(r){var n=e.last(r.configSwitch);if(!n){return Promise.resolve()}var i=t._getAdapter(r);i.then(function(e){a[r.contentProviderName]=e});return i});return new Promise(function(e){jQuery.when.apply(jQuery,i).then(function(){e(a)})})};t._getConfigAdapters=function(e){if(!e){e=r._getConfigAdapters()}if(!Array.isArray(e)){e=[e]}return e};t._getAdapter=function(e){var r=new jQuery.Deferred;var n=e.configHandler?e.configHandler():{};var a=e.adapter.replace(/\./g,"/");sap.ui.require([a],function(){var a=t._getAdapterInstance(e.adapter,e.system,null,n);r.resolve(a)});return r.promise()};t._getAdapterInstance=function(e,r,n,t){var a=sap.ui.require(e.replaceAll(".","/"));if(a){var i={config:t||{}};return new a(r,n,i)}return null};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/LaunchPage", ["sap/base/Log","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config","sap/m/library","sap/m/GenericTile"],function(e,t,jQuery,r,i,o,n,a){"use strict";var s=n.LoadState;function u(i){var n=this,u=[],l=t.getAdapters();this.oAdapters={default:i};l.then(function(e){jQuery.extend(this.oAdapters,e)}.bind(this));this.getGroups=function(){if(o.last("/core/spaces/enabled")){return(new jQuery.Deferred).resolve([]).promise()}var t=new jQuery.Deferred;l.then(function(){var r=Object.keys(n.oAdapters).map(function(e){return n._getAdapter(e).getGroups()});jQuery.when.apply(jQuery,r).done(function(){var e=[].concat.apply([],arguments);t.resolve(e)}).fail(function(){e.error("getGroups failed")})});return t.promise()};this.getGroupsForBookmarks=function(t){var i=new jQuery.Deferred;this.getGroups().then(function(o){this.getDefaultGroup().then(function(e){if(o.length>0){o=o.filter(function(e){if(t===true){return this.isGroupVisible(e)}return!this.isGroupLocked(e)&&this.isGroupVisible(e)}.bind(this));o=o.map(function(t){return{title:t===e&&r.i18n.getText("my_group")||this.getGroupTitle(t),object:t}}.bind(this))}i.resolve(o)}.bind(this),function(t){e.error("getGroupsForBookmarks - getDefaultGroup - failed: "+t.message)})}.bind(this),function(t){e.error("getGroupsForBookmarks - getGroups - failed: "+t.message)});return i.promise()};this.getGroupTilesForSearch=function(e){var t=this._getAdapter(e.contentProvider);if(t.getGroupTileClones){return t.getGroupTileClones(e)}return Promise.resolve(this.getGroupTiles(e))};this.getDefaultGroup=function(){var t=this._getAdapter().getDefaultGroup();t.fail(function(){e.error("getDefaultGroup failed")});return t};this.getGroupTitle=function(e){return this._getAdapter(e.contentProvider).getGroupTitle(e)};this.getGroupId=function(e){return this._getAdapter(e.contentProvider).getGroupId(e)};this.getGroupById=function(e){var t=new jQuery.Deferred,r=this;this.getGroups().then(function(i){i=jQuery.grep(i,function(t){return r.getGroupId(t)===e});t.resolve(i&&i.length>0?i[0]:undefined)});return t.promise()};this.getGroupTiles=function(e){return this._getAdapter(e.contentProvider).getGroupTiles(e)};this.getTilesByGroupId=function(e){var t=new jQuery.Deferred,r=this;this.getGroupById(e).then(function(i){if(i){var o=r._getAdapter(i.contentProvider).getGroupTiles(i);if(o){o=o.map(function(t){return{id:r.getTileId(t),title:r.getTileTitle(t),subtitle:r.getCatalogTilePreviewSubtitle(t),url:r.getCatalogTileTargetURL(t),icon:r.getCatalogTilePreviewIcon(t),groupId:e}})}else{o=[]}t.resolve(o)}else{t.resolve([])}});return t.promise()};this.getLinkTiles=function(e){return this._getAdapter(e.contentProvider).getLinkTiles(e)};this.addGroupAt=function(t,r){var i,o=r,n=this._getAdapter();if(n.addGroupAt){i=n.addGroupAt(t,r);i.fail(function(){e.error("addGroup "+t+" failed")})}else{var a=new jQuery.Deferred;i=n.addGroup(t);i.done(function(e){var t=this.moveGroup(e,o),r=e;t.done(function(){a.resolve(r)});t.fail(function(){a.reject()})}.bind(this));i.fail(function(){e.error("addGroup "+t+" failed");a.reject()});return a.promise()}return i};this.addGroup=function(t){var r=this._getAdapter().addGroup(t);r.fail(function(){e.error("addGroup "+t+" failed")});return r};this.removeGroup=function(t,r){var i=this._getAdapter(t.contentProvider).removeGroup(t,r);i.fail(function(){e.error("Fail to removeGroup "+n.getGroupTitle(t))});return i};this.resetGroup=function(t,r){var i=this._getAdapter(t.contentProvider).resetGroup(t,r);i.fail(function(){e.error("Fail to resetGroup "+n.getGroupTitle(t))});return i};this.isGroupRemovable=function(e){return this._getAdapter(e.contentProvider).isGroupRemovable(e)};this.isGroupLocked=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupLocked==="function"){return t.isGroupLocked(e)}return false};this.isGroupFeatured=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupFeatured==="function"){return t.isGroupFeatured(e)}return false};this.moveGroup=function(t,r){var i=this._getAdapter(t.contentProvider).moveGroup(t,r);i.fail(function(){e.error("Fail to moveGroup "+n.getGroupTitle(t))});return i};this.setGroupTitle=function(t,r){var i=this._getAdapter(t.contentProvider).setGroupTitle(t,r);i.fail(function(){e.error("Fail to set Group title: "+n.getGroupTitle(t))});return i};this.hideGroups=function(t){var r=new jQuery.Deferred,i=this._getAdapter();if(typeof i.hideGroups!=="function"){r.reject("hideGroups() is not implemented in the Adapter.")}else{i.hideGroups(t).done(function(){r.resolve()}).fail(function(t){e.error("Fail to store groups visibility."+t);r.reject()})}return r.promise()};this.isGroupVisible=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupVisible==="function"){return t.isGroupVisible(e)}return true};this.addTile=function(t,r){return this._getAdapter(r.contentProvider).addTile(t,r).fail(function(){e.error("Fail to add Tile: "+n.getCatalogTileId(t))})};this.removeTile=function(t,r,i){var o=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){this._getAdapter(t.contentProvider).removeTile(t,r,i).done(function(){var e=this.getCatalogTileTargetURL(r);this.deleteURLStatesPersistentData(e,n);o.resolve()}.bind(this)).fail(function(t){e.error("Fail to remove Tile: "+this.getTileId(r));o.reject(t)}.bind(this))}.bind(this)).catch(o.reject);return o.promise()};this.moveTile=function(t,r,i,o,a,s){var u=this._getAdapter().moveTile(t,r,i,o,a,s);u.fail(function(){e.error("Fail to move Tile: "+n.getTileId(t))});return u};this.isLinkPersonalizationSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isLinkPersonalizationSupported==="function"){return r.isLinkPersonalizationSupported(e)}return false};this.getTileId=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileId(e)};this.getTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTitle(e)};this.getTileType=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getTileType){return r.getTileType(e)}return"tile"};this.getTileView=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t).getTileView(e);if(!jQuery.isFunction(r.promise)){r=(new jQuery.Deferred).resolve(r).promise()}return r};this.getCardManifest=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCardManifest(e)};this.getAppBoxPressHandler=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getAppBoxPressHandler){return r.getAppBoxPressHandler(e)}return undefined};this.getTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileSize(e)};this.getTileTarget=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTarget(e)};this.getTileDebugInfo=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.getTileDebugInfo==="function"){return r.getTileDebugInfo(e)}return undefined};this.isTileIntentSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isTileIntentSupported==="function"){return r.isTileIntentSupported(e)}return true};this.refreshTile=function(e){var t=e&&e.contentProvider;this._getAdapter(t).refreshTile(e)};this.setTileVisible=function(e,t){var r=e&&e.contentProvider;this._getAdapter(r).setTileVisible(e,t)};this.registerTileActionsProvider=function(e){if(typeof e!=="function"){throw new Error("Tile actions Provider is not a function")}u.push(e)};this.getTileActions=function(e){var t=[],r,i=e&&e.contentProvider,o=this._getAdapter(i);if(typeof o.getTileActions==="function"){r=o.getTileActions(e);if(r&&r.length){t.push.apply(t,r)}}for(var n=0;n<u.length;n++){r=u[n](e);if(r&&r.length){t.push.apply(t,r)}}return t};this.getCatalogs=function(){return this._getAdapter().getCatalogs()};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid()};this.getCatalogData=function(t){var r=this._getAdapter();if(typeof r.getCatalogData!=="function"){e.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(t)}}return r.getCatalogData(t)};this.getCatalogError=function(e){return this._getAdapter().getCatalogError(e)};this.getCatalogId=function(e){return this._getAdapter().getCatalogId(e)};this.getCatalogTitle=function(e){return this._getAdapter().getCatalogTitle(e)};this.getCatalogTiles=function(t){var r=this._getAdapter().getCatalogTiles(t);r.fail(function(){e.error("Fail to get Tiles of Catalog: "+n.getCatalogTitle(t))});return r};this.getCatalogTileId=function(e){return this._getAdapter(e.contentProvider).getCatalogTileId(e)};this.getStableCatalogTileId=function(e){var t=this._getAdapter(e.contentProvider);if(t&&!t.getStableCatalogTileId){return null}return t.getStableCatalogTileId(e)};this.getCatalogTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTitle(e)};this.getCatalogTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileSize(e)};this.getCatalogTileViewControl=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileViewControl==="function"){return r.getCatalogTileViewControl(e)}var i=new jQuery.Deferred;var o=this.getCatalogTileView(e);i.resolve(o);return i.promise()};this.getCatalogTileView=function(t){e.error("Deprecated API call of 'sap.ushell.LaunchPage.getCatalogTileView'. Please use 'getCatalogTileViewControl' instead",null,"sap.ushell.services.LaunchPage");var r=t&&t.contentProvider;var i=this._getAdapter(r);if(i.getCatalogTileView){return i.getCatalogTileView(t)}var o=this.getTileTitle(t)||this.getCatalogTileTitle(t);return this._createErrorTile(o,"The LaunchPageAdapter does not support getCatalogTileView")};this._createErrorTile=function(e,t){var r=new a({state:s.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return r};this.getCatalogTileTargetURL=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTargetURL(e)};this.getCatalogTileTags=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTags==="function"){return r.getCatalogTileTags(e)}return[]};this.getCatalogTileKeywords=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileKeywords(e)};this.getCatalogTilePreviewTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewTitle(e)};this.getCatalogTilePreviewInfo=function(e){var t=e&&e.contentProvider;if(this._getAdapter(t).getCatalogTilePreviewInfo){return this._getAdapter(t).getCatalogTilePreviewInfo(e)}return""};this.getCatalogTilePreviewSubtitle=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(r.getCatalogTilePreviewSubtitle){return r.getCatalogTilePreviewSubtitle(e)}return undefined};this.getCatalogTilePreviewIcon=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewIcon(e)};this.addBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this.addCustomBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}this.changeURLStatesToPersistent(t.url).done(function(n){var a=r&&r.contentProvider;t.url=n;this._getAdapter(a).addCustomBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}.bind(this)).fail(function(r){e.error(r||"Fail to change url states to persistent: "+t.url);o.reject()})}return o.promise()};this._hasRequiredBookmarkParameters=function(t){if(!t.title){e.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration")}if(!t.url){e.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration")}return true};this.countBookmarks=function(t,r){if(!t||typeof t!=="string"){e.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL")}var i=this._getAdapter().countBookmarks(t,r);i.fail(function(){e.error("Fail to count bookmarks")});return i};this.countCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().countCustomBookmarks(e)};this.deleteBookmarks=function(t,r){var i=new jQuery.Deferred;if(!t||typeof t!=="string"){return i.reject(new Error("Missing URL")).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(o){this._getAdapter().deleteBookmarks(t,undefined,r).done(function(e){this.deleteURLStatesPersistentData(t,o);i.resolve(e)}.bind(this)).fail(function(r){e.error("Fail to delete bookmark for: "+t);i.reject(r)})}.bind(this)).catch(i.reject);return i.promise()};this.deleteCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().deleteCustomBookmarks(e)};this.updateBookmarks=function(t,r,i){if(!t||typeof t!=="string"){e.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL")}if(!r||typeof r!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+t);throw new Error("Missing parameters")}var o=new jQuery.Deferred;this.changeURLStatesToPersistent(r.url).done(function(n){r.url=n;this._getAdapter().updateBookmarks(t,r,undefined,i).done(o.resolve).fail(function(){e.error("Fail to update bookmark for: "+t);o.reject()})}.bind(this)).fail(function(t){e.error(t||"Fail to change url states to persistent: "+r.url);o.reject()});return o.promise()};this.updateCustomBookmarks=function(e,t){if(!e.url||!e.vizType||!t){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().updateCustomBookmarks(e,t)};this.onCatalogTileAdded=function(e){this._getAdapter().onCatalogTileAdded(e)};this.changeURLStatesToPersistent=function(t){var r=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(i){var o=i.getPersistentWhenShared();if(i.getSupportedPersistencyMethods().length===0&&o!==true){r.resolve(t);return}if(t&&t.length>0){try{i.setAppStateToPublic(t).done(r.resolve).fail(r.reject)}catch(t){e.error("error in converting transient state to personal persistent when bookmark is added",t,"sap.ushell.services.LaunchPage");r.reject()}}else{r.resolve(t)}});return r.promise()};this.deleteURLStatesPersistentData=function(t,r){if(r.getSupportedPersistencyMethods().length===0){return}if(t&&t.length>0){try{var i=d(t,"sap-xapp-state"),o=d(t,"sap-iapp-state");if(i!==undefined||o!==undefined){this.countBookmarks(t).done(function(e){if(e===0){if(i!==undefined){r.deleteAppState(i)}if(o!==undefined){r.deleteAppState(o)}}})}}catch(t){e.error("error in deleting persistent state when bookmark is deleted",t,"sap.ushell.services.LaunchPage")}}};function d(e,t){var r=new RegExp("(?:"+t+"=)([^&/]+)"),i=r.exec(e),o;if(i&&i.length===2){o=i[1]}return o}}u.prototype._getAdapter=function(e){return this.oAdapters[e]||this.oAdapters.default};u.hasNoAdapter=false;return u},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Message", ["sap/base/Log","sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/m/library","sap/ui/core/library"],function(e,t,n,i,s,o,a,r,l,c,u,d){"use strict";var p=u.ButtonType;var f=u.DialogType;var h=d.ValueState;var g=u.FlexRendertype;function m(){var u;this.init=function(e){u=e;return this};this.show=function(t,n,i){if(!n){e.error("Message must not be empty.");return}if(u&&typeof u==="function"){u(t,n,i||{})}else{this.buildMessage(t,n,i||{})}};this.buildMessage=function(e,n,i){var s={title:i.title,actions:i.actions,details:i.details,onClose:i.callback,emphasizedAction:i.emphasizedAction},o;switch(e){case m.Type.ERROR:this._createAndOpenErrorDialog(n,s);return;case m.Type.CONFIRM:if(!i.actions){o="confirm"}else if(i.actions.indexOf("DELETE")>-1){o="warning";s.emphasizedAction=t.Action.DELETE}else{s.icon=t.Icon.QUESTION;o="show"}break;case m.Type.INFO:o="info";this.buildAndSendMessageToast(n,i.duration||3e3);return;default:s={duration:i.duration||3e3};o="show";break}this.sendMessageBox(n,o,s)};this._copyToClipboard=function(e,t,n){var s=t.details;if(typeof t.details==="object"){s=JSON.stringify(t.details,null,"\t")}var o=["Title: "+(n||"-"),"Message: "+(e||"-"),"Details: "+(s||"-")];var a=document.activeElement,r=document.createElement("textarea"),l;try{r.contentEditable=true;r.readonly=false;r.innerText=o.join("\n");document.documentElement.appendChild(r);if(navigator.userAgent.match(/ipad|iphone/i)){var c=document.createRange();c.selectNodeContents(r);window.getSelection().removeAllRanges();window.getSelection().addRange(c);r.setSelectionRange(0,999999)}else{r.select()}var u=document.execCommand("copy");l=u?"CopyWasSuccessful":"CopyWasNotSuccessful"}catch(e){l="CopyWasNotSuccessful"}finally{this.buildAndSendMessageToast(i.i18n.getText(l));document.documentElement.removeChild(r);window.getSelection().removeAllRanges();a.focus()}};this._createAndOpenErrorDialog=function(e,t){var s=t.details;var o;if(s){o=new c({htmlText:typeof s==="object"?s.info:s})}var a=this.errorWithDetails(e,o,t.title);if(sap.ushell.Container&&n.last("/core/extension/SupportTicket")&&e!==i.i18n.getText("supportTicketCreationFailed")){a.addButton(new r({text:i.i18n.getText("contactSupportBtn"),press:function(){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(e){var t=new e;if(t){t.showContactSupportDialog();t.destroy()}});a.close()}}))}if(document.queryCommandSupported("copy")){a.addButton(new r({text:i.i18n.getText("CopyToClipboardBtn"),tooltip:i.i18n.getText("CopyToClipboardBtn_tooltip"),press:this._copyToClipboard.bind(this,e,t,a.getTitle())}))}a.addButton(new r({text:i.i18n.getText("closeBtn"),type:p.Emphasized,press:a.close.bind(a)}))};this.buildAndSendMessageToast=function(e,t){sap.ui.require(["sap/m/MessageToast"],function(n){n.show(e,{duration:t})})};this.sendMessageBox=function(n,i,s){if(typeof t[i]==="function"){t[i](n,s)}else{e.error("Unknown Message type: "+i,null,"Message Service")}};this.info=function(e,t){this.show(m.Type.INFO,e,{duration:t||3e3})};this.error=function(t,n){e.error(t);this.show(m.Type.ERROR,t,{title:n})};this.confirm=function(e,t,n,i){this.show(m.Type.CONFIRM,e,{title:n,callback:t,actions:i})};this.errorWithDetails=function(e,t,n,c){if(Array.isArray(t)){c=t;t=null}if(typeof t==="string"){c=n;n=t;t=null}var u=new o({text:e,visible:!!e});if(t){u.addStyleClass("sapUiSmallMarginBottom")}var d=new s({state:h.Error,type:f.Message,contentWidth:"30rem",title:n||i.i18n.getText("error"),content:[new l({renderType:g.Bare,items:[u,new a({text:i.i18n.getText("ViewDetails"),visible:!!t,press:function(){d.getContent()[0].addItem(t);this.destroy()}})]})],buttons:c,endButton:new r({text:i.i18n.getText("closeBtn"),type:p.Emphasized,press:function(){d.close()}}),afterClose:function(){this.destroy()}}).addStyleClass("sapContrastPlus");d.open();return d}}m.Type={INFO:0,ERROR:1,CONFIRM:2};m.hasNoAdapter=true;return m},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavTargetResolution", ["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/base/Log"],function(e,t,n,i,r,jQuery,a,s,o,l,u){"use strict";function c(c,p,f,h){var d=h&&h.config,g=function(e){var t=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(e):c.resolveHashFragment(e);return t}.bind(this),v,m=[{name:"DefaultAdapter",isApplicable:function(){return true},resolveHashFragment:g.bind(this)}],S;this._isClientSideTargetResolutionEnabled=function(){return!!(d&&d.enableClientSideTargetResolution)};this._nextResolveHashFragment=function(e,t){var n=e.pop();if(n.isApplicable(t)){u.info("NavTargetResolution: custom resolver "+n.name+" resolves "+t);var i=this._nextResolveHashFragment.bind(this,e);return n.resolveHashFragment(t,i)}return this._nextResolveHashFragment(e,t)};this._resolveHashFragmentClientSide=function(e){var t=this._validateHashFragment(e),n;if(!t.success){return(new jQuery.Deferred).reject(e+" is not a valid hash fragment").promise()}n=t.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(n)};this._resolveHashFragmentClientSideAndFixApplicationType=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.resolveHashFragment(e).done(function(e){if(e&&e.applicationType==="SAPUI5"){e.applicationType="URL"}t.resolve(e)}).fail(t.reject)}).catch(t.reject);return t.promise()};this._validateHashFragment=function(e){var n="",i={success:false};if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution")}n=e.substring(1);if(n){i.success=true}i.hashFragmentWithoutHash=n;return i};this.expandCompactHash=function(e){var t,r=new jQuery.Deferred;t=n.parseShellHash(e);if(t&&t.params&&t.params["sap-intent-param"]){sap.ushell.Container.getServiceAsync("AppState").then(function(n){n.getAppState(t.params["sap-intent-param"][0]).done(function(t){var n=t.getData("sap-intent-param");var a=e;if(n){a=i.expandParamGivenRetrievalFunction(e,"sap-intent-param",function(){return n})}r.resolve(a)}).fail(function(){r.resolve(e)})}).catch(r.reject)}else{r.resolve(e)}return r.promise()};var b=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(e){var t,n;if(typeof e!=="object"){return}delete e["sap.platform.runtime"];if(e&&e.applicationType&&e.applicationType==="SAPUI5"){e.applicationType="URL"}if(e.applicationType==="URL"){t=/^SAPUI5\.Component=(.*)/.exec(e.additionalInformation);n=t&&t[1];if(n){e.ui5ComponentName=n}}};this._getSapSystem=function(e,t){var n;if(t&&t["sap-system"]){return t["sap-system"]}if(t&&t.url){n=new l(t.url).get("sap-system");if(n){return n}}if(b.indexOf(t.applicationType)>=0&&e&&e.substring(1)){n=new l(e.substring(1)).get("sap-system");if(n){return n}}return undefined};this.resolveTarget=function(e){var i;var r=s({},e);var o=new jQuery.Deferred;a.average("sap.ushell.navigation.resolveTarget");t.storeSapSystemToLocalStorage(r);i=n.constructShellHash(r);sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(e){e.resolveHashFragment("#"+i).done(function(e){a.end("sap.ushell.navigation.resolveTarget");o.resolve({url:e.url,text:e.text,externalNavigationMode:e.targetNavigationMode==="explace"})}).fail(o.reject)}).catch(o.reject);return o.promise()};this.resolveHashFragment=function(t){var n=new jQuery.Deferred;a.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(t).done(function(i){var s=jQuery.when();if(i.indexOf("sap-ushell-enc-test")>=0){var l=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(i);if(l){var u=l[1];if(u!=="A%20B%2520C"){s=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("Message").then(function(e){e.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");s.resolve()}).catch(s.reject)}i=i.replace(/sap-ushell-enc-test=([^&]*)&/,"");i=i.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"")}}var p=this._invokeResolveHashChain(i);if(typeof c.processPostResolution==="function"){p=c.processPostResolution(i,p)}jQuery.when(p,s).done(function(i){this._adjustResolutionResultForUi5Components(i);if(o(i)){if(!i.hasOwnProperty("navigationMode")){i.navigationMode=r.getNavigationMode(i,e.getCurrentApplication())}i.targetNavigationMode=r.getExternalNavigationMode(i.navigationMode)}if(o(i)&&!i.hasOwnProperty("sap-system")){var s=this._getSapSystem(t,i);if(s){i["sap-system"]=s}}a.end("sap.ushell.navigation.resolveHashFragment");n.resolve(i)}.bind(this)).fail(n.reject)}.bind(this)).fail(n.reject);return n.promise()};this._invokeResolveHashChain=function(e){var t=m.map(function(e){return e});return this._nextResolveHashFragment(t,e).done(function(e){S=e})};this.baseResolveHashFragment=g.bind(this);this._getGetLinksResolver=function(e){var t;if(this._isClientSideTargetResolutionEnabled()){t=this._getLinksClientSide.bind(this);return{resolver:t,warning:undefined,isGetSemanticObjectLinksCall:false}}if(Object.prototype.toString.apply(e.paramsOptions)==="[object Array]"&&e.paramsOptions.length>0){u.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(e.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution")}t=c&&c.getLinks&&c.getLinks.bind(c);if(t){return{resolver:t,warning:undefined,isGetSemanticObjectLinksCall:false}}t=c&&c.getSemanticObjectLinks&&c.getSemanticObjectLinks.bind(c);if(t){return{resolver:t,warning:e.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true}}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined}};this.getLinks=function(e){var t=e.semanticObject;var n=e.params;var i=e.ignoreFormFactor;var r=e.ui5Component;var a=e.appStateKey;var s=e.compactIntents;var o=new jQuery.Deferred;if(/\?/.test(t)){throw new Error("Parameter must not be part of semantic object")}var l=n===undefined?undefined:JSON.parse(JSON.stringify(n));if(a){l=l||{};l["sap-xapp-state"]=encodeURIComponent(a)}var c=this._getGetLinksResolver(e);if(c.warning){u.warning("A problem occurred while determining the resolver for getLinks",c.warning,"sap.ushell.services.NavTargetResolution")}var p=c.resolver;if(p){var f=function(e){if(s){this._shortenGetSemanticObjectLinksResults(e,r).done(o.resolve)}else{o.resolve(e)}}.bind(this);if(c.isGetSemanticObjectLinksCall){var h={target:{semanticObject:t,action:"dummyAction"},params:l};sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){e.hrefForExternal(h,true,r,true).done(function(e){var n=e.params||l;p(t,n,i).done(f).fail(o.reject)}).fail(o.reject)})}else{p(e).done(f).fail(o.reject)}}else{o.resolve([])}return o.promise()};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)}).catch(e.reject);return e.promise()}if(c&&c.getDistinctSemanticObjects){return c.getDistinctSemanticObjects.call(c)}u.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return e.reject("Cannot execute getDistinctSemanticObjects").promise()};this._getLinksClientSide=function(e){var t=new jQuery.Deferred;var i=new jQuery.Deferred;if((e.params||{}).hasOwnProperty("sap-intent-param")){var r="#"+e.semanticObject+"-dummyAction?"+n.paramsToString(e.params);this.expandCompactHash(r).done(function(e){var t=n.parseShellHash(e);i.resolve(t.params)}).fail(t.reject)}else{i.resolve(e.params)}i.done(function(){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(n){n.getLinks(e).done(t.resolve).fail(t.reject)}).catch(t.reject)});return t.promise()};this._shortenGetSemanticObjectLinksResults=function(e,t){var i=[];var r=0;var a=e.length;var s=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(o){e.forEach(function(e){var l=n.parseShellHash(e.intent);var c=o.compactParams(l.params,undefined,t);i.push(c);i[r].done(function(t,r){i[t]={text:e.text,intent:"#"+l.semanticObject+"-"+l.action+"?"+n.paramsToString(r)}}.bind(null,r)).fail(function(t,n){u.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+n+"; intent had title ''"+e.title+"'' and link ''"+e.intent+"'","sap.ushell.services.NavTargetResolution");i[t]={text:e.text,intent:e.intent}}.bind(null,r)).always(function(){a--;if(a===0){s.resolve(i)}});r++})}).catch(s.reject);return s.promise()};this.isIntentSupported=function(e){var t={};var n=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(t){t.isIntentSupported(e).done(n.resolve).fail(n.reject)}).catch(n.reject);return n.promise()}if(c.isIntentSupported){return c.isIntentSupported(e)}e.forEach(function(e){t[e]={supported:undefined}});return n.resolve(t).promise()};this.isNavigationSupported=function(e){var t=new jQuery.Deferred,i=[];i=e.map(function(e){if(typeof e==="string"){return e}return"#"+n.constructShellHash(e)});this.isIntentSupported(i).done(function(e){var n=i.map(function(t){return e[t]||{supported:false}});t.resolve(n)}).fail(t.reject.bind(t));return t.promise()};this.registerCustomResolver=function(e){if(typeof e.name!=="string"){u.error("NavTargetResolution: Custom Resolver must have name {string} member");return false}if(typeof e.isApplicable!=="function"){u.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false}if(typeof e.resolveHashFragment!=="function"){u.error('NavTargetResolution: Custom Resolver must have "resolveHashFragment" member');return false}m.push(e);return true};if(d&&Array.isArray(d.resolveLocal)){v=d.resolveLocal.map(function(e){return e.linkId});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(e){if(e===""){return"#"}var t=n.parseShellHash(e.substring(1));if(!t){return"#"}e="#"+t.semanticObject+"-"+t.action;return e},_getIndex:function(e){var t=this.cleanHash(e);return v.indexOf(t.substring(1))},isApplicable:function(e){return this._getIndex(e)>=0},resolveHashFragment:function(e){var t,i=this._getIndex(e),r,a,s,o;t=new jQuery.Deferred;r=JSON.parse(JSON.stringify(d.resolveLocal[i].resolveTo));a=n.parseShellHash(e);if(a&&a.params){o=n.paramsToString(a.params);if(o){s=r.url.indexOf("?")>=0;r.url=r.url+(s?"&":"?")+o}}t.resolve(r);return t.promise()}})}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(e){if(e===""){return undefined}var t=n.parseShellHash(e.substring(1));if(!t){return undefined}e="#"+t.semanticObject+"-"+t.action;return e},isApplicable:function(e){e=this.cleanHash(e);if(!e){return false}return e==="#Test-url"||e==="#Test-local1"||e==="#Test-local2"||e==="#Test-config"||e==="#Test-clear"},parseUrl:function(e){if(!this.aElement){this.aElement=window.document.createElement("a")}this.aElement.href=e;return this.aElement},resolveHashFragment:function(e){var n=new jQuery.Deferred,i=null,r,a,s,o,c,p=this;e=this.cleanHash(e);if(!e){return false}i={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},none:{applicationType:"URL",url:"",additionalInformation:""}};function f(e){if(localStorage){return localStorage[e]}return undefined}function h(e){if(t.calculateOrigin(p.parseUrl(e))!==t.calculateOrigin(window.location)){return undefined}return e}function g(e){return new l(window.location.href).get(e)}function v(e,t){if(localStorage){localStorage[e]=t}}if(i[e]){r=i[e]}else if(e==="#Test-clear"){v("sap.ushell.#Test-local1",undefined);v("sap.ushell.#Test-local2",undefined);u.info("NavTargetResolution: Local storage keys for #Test have been cleared");r=i["#Test-config"]}else if(e==="#Test-local1"||e==="#Test-local2"||e==="#Test-url"){r=f("sap.ushell."+e);if(!r||r==="undefined"){a={applicationType:"URL"}}else{a=JSON.parse(r)}if(window.location.hostname==="localhost"||d&&d.allowTestUrlComponentConfig){o="sap-ushell-test-"+e.substring(6);s=g(o+"-additionalInformation");if(s){a.additionalInformation=s}c=g(o+"-url");if(c){a.url=h(c)}}if(!a.url){u.info("NavTargetResolution: No configured app for "+e+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");u.info("NavTargetResolution: Defaulting to config app ...\n");n.reject("URL is not resolvable");return n.promise()}a.url=h(a.url);r=a}if(r.url===undefined){n.reject("URL is not resolvable");return n.promise()}u.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent(r&&r.url||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent(r&&r.additionalInfo||"")+"#Test-local1");u.info("NavTargetResolution: Resolving "+e+" to "+JSON.stringify(r));n.resolve(r);return n.promise()}});this.getCurrentResolution=function(){return S}}c.hasNoAdapter=false;return c},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PageBuilding", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(e,t){this.getFactory=function(){return e.getFactory()};this.getPage=function(t){return e.getFactory().createPage(t)};this.getPageSet=function(t){var r=new jQuery.Deferred;e.getFactory().createPageSet(t,r.resolve.bind(r),r.reject.bind(r));return r.promise()}}e.hasNoAdapter=false;return e},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Pages", ["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(e,i,t,n,r,a,o,s,d,c,u){"use strict";var l=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oURLParsingServicePromise=sap.ushell.Container.getServiceAsync("URLParsing");this._oCSTRServicePromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new i({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[]};l.prototype._generateId=function(e){var i=[];var t=this.getModel().getProperty(this.getPagePath(e));t.sections.forEach(function(e){i.push(e.id);e.visualizations.forEach(function(e){i.push(e.id)})});return o.generateUniqueId(i)};l.prototype.getModel=function(){return this._oPagesModel};l.prototype.enableImplicitSave=function(e){this._bImplicitSaveEnabled=e};l.prototype.getPageIndex=function(e){var i=this._oPagesModel.getProperty("/pages");for(var t=0;t<i.length;++t){if(i[t].id===e){return t}}return undefined};l.prototype.getPagePath=function(e){var i=this.getPageIndex(e);if(typeof i==="undefined"){return""}return"/pages/"+i};l.prototype.loadPage=function(i){var t=this.getPagePath(i);if(t){return Promise.resolve(t)}o.setPerformanceMark(["FLP-Pages-Service-loadPage-start[",i,"]"].join(""));return this._oCdmServicePromise.catch(function(i){e.error("Pages - loadPage: Couldn't resolve CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){return Promise.all([e.getPage(i),e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];return this._getModelForPage(i,t,n,r)}.bind(this)).then(function(e){var t=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+t;this._oPagesModel._setProperty(n,e);o.setPerformanceMark(["FLP-Pages-Service-loadPage-end[",i,"]"].join(""));return n}.bind(this)).catch(function(i){e.error("Pages - loadPage: Failed to gather site data.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};l.prototype.loadPages=function(e){return this._oCdmServicePromise.then(function(i){return i.getPages(e)}).then(function(){return Promise.all(e.map(function(e){return this.loadPage(e)}.bind(this)))}.bind(this)).then(function(i){var t={};e.forEach(function(e,n){t[e]=i[n]});return t})};l.prototype.findVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(a){return Promise.all([this.loadPage(i),a.getCachedVisualizations(),a.getApplications()]).then(function(e){var a=e[0];var o=this.getModel().getProperty(a+"/sections")||[];return o.reduce(function(e,a,o){if(t&&a.id!==t){return e}var s=a.visualizations.reduce(function(e,i,t){if(n&&i.vizId===n||r&&i.id===r){e.push(t)}return e},[]);if(s.length){e.push({pageId:i,sectionIndex:o,vizIndexes:s})}return e},[])}.bind(this)).catch(function(i){e.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))}.bind(this))};l.prototype.moveVisualization=function(i,n,r,a,o){if(n===a&&r===o){return Promise.resolve({visualizationIndex:o})}this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+i);var d=s.id;var c=s.sections;var u=c[n];var l=c[a];var h=u.id;var v=l.id;var f=u.visualizations[r];var P=f.id;u.visualizations=u.visualizations.concat([]);l.visualizations=l.visualizations.concat([]);u.visualizations.splice(r,1);if(o===-1){o=l.visualizations.length}l.visualizations.splice(o,0,f);var g;if(l.visualizations[o]){g=o-1}else{g=l.visualizations.length-2}var p;if(l.visualizations[g]){p=l.visualizations[g].id}if(u.default&&!u.visualizations.length){c.splice(n,1)}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(d)}).catch(function(i){e.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[h];var r=i.layout.vizOrder;var a=i.viz;var o=e.payload.sections[v];var s=o.layout.vizOrder;var c=o.viz;var u=t(a[P]);var l=r.indexOf(P);r.splice(l,1);var f=p?s.indexOf(p)+1:0;s.splice(f,0,P);if(h!==v){delete a[P];c[P]=u}if(i.default&&!Object.keys(a).length){delete e.payload.sections[h];e.payload.layout.sectionOrder.splice(n,1)}return this._conditionalSavePersonalization(d)}.bind(this)).then(function(){return{visualizationIndex:o}}).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.deleteVisualization=function(i,t,n){var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];if(a.default&&a.visualizations.length<2){return this.deleteSection(i,t)}this.setPersonalizationActive(true);var o=a.visualizations;var s=o[n];o.splice(n,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[a.id].layout.vizOrder;var t=e.payload.sections[a.id].viz;var n=i.indexOf(s.id);delete t[s.id];if(n>-1){i.splice(n,1)}return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype._getSectionIndex=function(e,i){var t=this.getModel().getProperty(e+"/sections")||[],n=0;for(;n<t.length;n+=1){if(t[n].id===i){return n}}};l.prototype._getVisualizationData=function(e,i,t,n,r,a,o,s){var d=n||{vizId:i};var u={applications:r,visualizations:t,vizTypes:a};var l=c.getVizData(u,d,o,s);if(!l.id){l.id=this._generateId(e)}return l};l.prototype.addVisualization=function(i,t,n,r){return this._oCdmServicePromise.catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){return Promise.all([this.loadPage(i),o.getVisualizations(),o.getApplications(),o.getVizTypes(),this._oURLParsingServicePromise]).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(s){var d=s[0],c=s[4],u=this._getSectionIndex(d,t),l=this.getModel().getProperty(d+"/sections")||[],h=this._getVisualizationData(i,n,s[1],null,s[2],s[3],c);if(r){h.displayFormatHint=r}var v;for(var f=0;f<l.length;f++){if(l[f].default){v=f}}if(u!==undefined||v!==undefined){this.setPersonalizationActive(true);var P=u!==undefined?u:v||0,g=d+"/sections/"+P+"/visualizations";this.getModel().getProperty(g).push(h);this.getModel().refresh();return o.getPage(i).catch(function(i){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var a=e.payload.sections[t||e.payload.layout.sectionOrder[0]];a.layout.vizOrder.push(h.id);a.viz[h.id]={id:h.id,vizId:n};if(r){a.viz[h.id].displayFormatHint=r}return this._conditionalSavePersonalization(i)}.bind(this))}var p=parseInt(d.split("/")[2],10);return this.addSection(p,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[h]})}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.copyVisualization=function(e,i,t){var n=t.isBookmark;if(!n){return this.addVisualization(e,i,t.vizId,t.displayFormatHint)}return this.addBookmarkToPage(e,{title:t.title,subtitle:t.subtitle,url:t.targetURL,icon:t.icon,info:t.info,serviceUrl:t.indicatorDataSource?t.indicatorDataSource.path:"",serviceRefreshInterval:t.indicatorDataSource?t.indicatorDataSource.refresh:"",numberUnit:t.numberUnit,vizType:t.vizType,vizConfig:t.vizConfig},i)};l.prototype.moveSection=function(i,t,n){if(t===n){return Promise.resolve()}this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);var s=o.id;a.splice(t,1);if(t<n){n--}a.splice(n,0,o);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.layout.sectionOrder;i.splice(i.indexOf(s),1);i.splice(n,0,s);return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.addSection=function(i,t,n){this.setPersonalizationActive(true);var r=n||{},a=this._oPagesModel.getProperty("/pages/"+i+"/sections"),o=this._oPagesModel.getProperty("/pages/"+i+"/id");var s={id:r.id!==undefined?r.id:this._generateId(o),title:r.title!==undefined?r.title:"",visible:r.visible!==undefined?r.visible:true,preset:r.preset!==undefined?r.preset:false,locked:r.locked!==undefined?r.locked:false,default:r.default!==undefined?r.default:false,visualizations:r.visualizations!==undefined?r.visualizations:[]};a.splice(t,0,s);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(o)}).catch(function(i){e.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i={id:s.id,title:s.title,visible:s.visible,preset:s.preset,locked:s.locked,default:s.default,layout:{vizOrder:[]},viz:{}};if(s.visualizations){var n=0,r;for(;n<s.visualizations.length;n++){r=s.visualizations[n];i.layout.vizOrder.push(r.id);if(r.isBookmark){i.viz[r.id]=c.getVizRef(r)}else{i.viz[r.id]={id:r.id,vizId:r.vizId};if(r.displayFormatHint){i.viz[r.id].displayFormatHint=r.displayFormatHint}}}}e.payload.layout.sectionOrder.splice(t,0,s.id);e.payload.sections[s.id]=i;return this._conditionalSavePersonalization(o)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.deleteSection=function(i,t){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");var r=this._oPagesModel.getProperty("/pages/"+i+"/sections");var a=r[t].id;r.splice(t,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(n)}).catch(function(i){e.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){delete e.payload.sections[a];e.payload.layout.sectionOrder.splice(t,1);return this._conditionalSavePersonalization(n)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.setSectionVisibility=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+t);if(o.visible===n){return Promise.resolve()}o.visible=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(i){e.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a].visible=n;return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.renameSection=function(i,t,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i);var a=r.sections[t];a.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r.id)}).catch(function(i){e.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){e.payload.sections[a.id].title=n;return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.resetSection=function(i,n){this.setPersonalizationActive(true);var r=this._oPagesModel.getProperty("/pages/"+i+"/id");var a=this._oPagesModel.getProperty("/pages/"+i+"/sections/"+n+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(r),e.getOriginalPage(r),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var o=e[0];var s=e[1];var d=e[2];var c=t(o.sections.find(function(e){return e.id===a}),20);var u=c.visualizations.map(function(e){return e.id});var l=this._oPagesModel.getProperty("/pages/"+i);l.sections.forEach(function(e){if(c.id!==e.id){e.visualizations.forEach(function(i){if(u.indexOf(i.id)!==-1){var n=this._generateId(r);var a=t(s.payload.sections[e.id].viz[i.id]);delete s.payload.sections[e.id].viz[i.id];var o=s.payload.sections[e.id].layout.vizOrder.indexOf(a.id);a.id=n;s.payload.sections[e.id].viz[n]=a;s.payload.sections[e.id].layout.vizOrder[o]=n;i.id=n}}.bind(this))}}.bind(this));this._oPagesModel._setProperty("/pages/"+i+"/sections/"+n,c);s.payload.sections[c.id]=d.payload.sections[c.id];return this._conditionalSavePersonalization(s.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.resetPage=function(i){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+i+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(n),e.getOriginalPage(n),e.getCachedVizTypes()])}).catch(function(i){e.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e[0];var t=e[1];var n=e[2];var r=e[3];var a=e[4];return Promise.all([this._getModelForPage(r,i,t,a),n,r])}.bind(this)).then(function(e){var n=e[0];var r=e[1];var a=e[2];this._oPagesModel._setProperty("/pages/"+i,n);r.payload=t(a.payload);return this._conditionalSavePersonalization(r.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype.setPersonalizationActive=function(e){if(!this._bDirtyState&&e===true){this._bDirtyState=true;this._oCopiedModelData=t(this._oPagesModel.getProperty("/"),20)}else if(this._bDirtyState&&e===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false}};l.prototype.savePersonalization=function(i){var n;if(!i){n=t(this._aPagesToBeSaved)}else{n=[i]}return this._oCdmServicePromise.then(function(e){return Promise.all(n.map(function(i){var t=this._aPagesToBeSaved.indexOf(i);this._aPagesToBeSaved.splice(t,1);return new Promise(function(t,n){e.save(i).then(t,n)}).catch(function(e){if(this._aPagesToBeSaved.indexOf(i)===-1){this._aPagesToBeSaved.push(i)}return Promise.reject(e)}.bind(this))}.bind(this)))}.bind(this)).then(function(){this._bDirtyState=false}.bind(this)).catch(function(i){e.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this))};l.prototype._conditionalSavePersonalization=function(e){if(this._bImplicitSaveEnabled){return this.savePersonalization(e)}if(this._aPagesToBeSaved.indexOf(e)===-1){this._aPagesToBeSaved.push(e)}return Promise.resolve()};l.prototype._getModelForPage=function(i,t,n,r){var d={id:i&&i.identification&&i.identification.id||"",title:i&&i.identification&&i.identification.title||"",description:"",sections:[]};o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-start[",d.id,"]"].join(""));return Promise.all([this._oCSTRServicePromise,this._oURLParsingServicePromise]).catch(function(e){return Promise.reject(e)}).then(function(c){var u=c[0];var l=c[1];var h=s.last("/core/catalog/enableHideGroups");return Promise.all(i.payload.layout.sectionOrder.map(function(o){var s=i.payload.sections[o];var c={id:s.id||"",title:s.default?a.i18n.getText("DefaultSection.Title"):s.title||"",visualizations:[],visible:!h||(s.visible!==undefined?s.visible:true),locked:s.locked!==undefined?s.locked:false,preset:s.preset!==undefined?s.preset:true,default:s.default!==undefined?s.default:false};d.sections.push(c);return Promise.all(s.layout.vizOrder.map(function(a){var o=s.viz[a],d=o.vizId;return u.getSystemContext(o.contentProviderId).then(function(a){var s=this._getVisualizationData(i.identification.id,d,t,o,n,r,l,a);c.visualizations.push(s);return this._isIntentSupported(s,u).then(function(i){if(!i){var t=c.visualizations.findIndex(function(e){return e.id===s.id});c.visualizations.splice(t,1);e.warning("The visualization "+s.vizId+" is filtered out, because it does not have a supported intent.")}})}.bind(this))}.bind(this)))}.bind(this))).then(function(){o.setPerformanceMark(["FLP-Pages-Service-getModelForPage-end[",d.id,"]"].join(""));return d})}.bind(this))};l.prototype.removeUnsupportedVisualizations=function(e,i){return this._oCSTRServicePromise.then(function(t){var n=this.getModel().getProperty("/pages/"+e+"/sections/"+i+"/visualizations/");var r=[];for(var a=n.length-1;a>=0;--a){r.push(this._isIntentSupported(n[a],t).then(function(e,i){if(!i){n.splice(e,1)}return i}.bind(this,a)))}return Promise.all(r).then(function(e){if(e.indexOf(false)!==-1){this.getModel().refresh()}}.bind(this))}.bind(this))};l.prototype._isIntentSupported=function(e,i){if(e.target===undefined){return Promise.resolve(false)}if(e.target.type==="URL"){if(u.isStandardVizType(e.vizType)){return Promise.resolve(!!e.target.url)}return Promise.resolve(true)}return new Promise(function(t,n){i.isIntentSupported([e.targetURL]).then(function(i){t(i[e.targetURL].supported)}).fail(function(){t(false)})})};l.prototype.addBookmarkToPage=function(i,t,n,r){if(!i){return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.")}var o=c.getBookmarkVizTypeIds(t);this.setPersonalizationActive(true);return Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]).then(function(e){var t=e[0];var n=e[1];var a=o.map(function(e){return t.getVizType(e)});return Promise.all(a).then(function(e){var t={};e.forEach(function(e,i){t[o[i]]=e;return t});return Promise.all([this.loadPage(i),this._oURLParsingServicePromise,t,n.getSystemContext(r)])}.bind(this))}.bind(this)).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(o){var s=o[0];var u=o[1];var l=o[2];var h=o[3];var v={id:this._generateId(i),vizType:t.vizType,title:t.title,subTitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,target:d.toTargetFromHash(t.url,u),indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig,isBookmark:true};if(r){v.contentProviderId=r}var f=this._getVisualizationData(i,undefined,{},v,{},l,u,h);var P=parseInt(/pages\/(\d+)/.exec(s)[1],10);var g=this._oPagesModel.getProperty(s);var p;if(n){p=g.sections.find(function(e){return e.id===n});if(!p){e.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.")}}else{p=g.sections.find(function(e){return e.default});if(!p){return this.addSection(P,0,{title:a.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}}p.visualizations.push(f);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var t=e.payload.sections[p.id];t.layout.vizOrder.push(f.id);t.viz[f.id]=c.getVizRef(f);return this._conditionalSavePersonalization(i)}.bind(this))}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype._visitPages=function(e){return this._oCdmServicePromise.then(function(e){return e.getAllPages()}).then(function(i){i=i||[];i.forEach(function(i){e(i)})})};l.prototype._visitSections=function(e){return this._visitPages(function(i){var t=i.payload&&i.payload.sections||{};Object.keys(t).forEach(function(n){e(t[n],i)})})};l.prototype._visitVizReferences=function(e){return this._visitSections(function(i,t){var n=i.viz||{};Object.keys(n).forEach(function(r){e(n[r],i,t)})})};l.prototype._findBookmarks=function(e){var i=[];return this._oURLParsingServicePromise.then(function(t){var n=d.toTargetFromHash(e.url,t);n=c.harmonizeTarget(n);return this._visitVizReferences(function(t,r,a){if(t.isBookmark&&e.vizType===t.vizType&&(t.contentProviderId||"")===(e.contentProviderId||"")&&d.isSameTarget(n,t.target)){i.push({vizRefId:t.id,sectionId:r.id,pageId:a.identification.id})}}).then(function(){return i})}.bind(this))};l.prototype.countBookmarks=function(e){return this._findBookmarks(e).then(function(e){return e.length})};l.prototype.deleteBookmarks=function(e,i,t){var n=0;return this._findBookmarks(e).then(function(e){return e.reduce(function(e,r){if(i&&r.pageId!==i){return e}if(t&&r.sectionId!==t){return e}return e.then(function(){return this.findVisualization(r.pageId,r.sectionId,null,r.vizRefId)}.bind(this)).then(function(e){var i=e[0];var t=this.getPageIndex(i.pageId);return this.deleteVisualization(t,i.sectionIndex,i.vizIndexes[0])}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};l.prototype.updateBookmarks=function(i,t){if(!i||!i.url||typeof i.url!=="string"){e.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided")}if(!t||typeof t!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+i.url);return Promise.reject("Missing parameters")}var n=0;return Promise.all([this._oURLParsingServicePromise,this._findBookmarks(i)]).then(function(e){var i=e[0];var r=e[1];return r.reduce(function(e,r){return e.then(function(){return this.findVisualization(r.pageId,r.sectionId,null,r.vizRefId)}.bind(this)).then(function(e){var n=e[0];var r=this.getPageIndex(n.pageId);var a={subtitle:t.subtitle,icon:t.icon,info:t.info,numberUnit:t.numberUnit,indicatorDataSource:{path:t.serviceUrl,refresh:t.serviceRefreshInterval},vizConfig:t.vizConfig};if(t.title){a.title=t.title}if(t.url){a.target=c.harmonizeTarget(d.toTargetFromHash(t.url,i))}return this.updateVisualization(r,n.sectionIndex,n.vizIndexes[0],a)}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};l.prototype.updateVisualization=function(e,i,a,o){return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes(),this._oURLParsingServicePromise])}.bind(this)).then(function(s){var u=s[0];var l=s[1];var h=s[2];var v=s[3];var f=this._oPagesModel.getProperty("/pages/"+e);var P=f.sections[i];var g=P.visualizations;var p=g[a];var z={};this.setPersonalizationActive(true);if(this._isPropertyChanged(p.title,o.title)){z.title=o.title}if(o.target&&!d.isSameTarget(p.target,o.target)){z.target=o.target}if(this._isPropertyChanged(p.subtitle,o.subtitle)){z.subtitle=o.subtitle}if(this._isPropertyChanged(p.icon,o.icon)){z.icon=o.icon}if(this._isPropertyChanged(p.info,o.info)){z.info=o.info}if(this._isPropertyChanged(p.numberUnit,o.numberUnit)){z.numberUnit=o.numberUnit}if(this._isPropertyChanged(p.displayFormatHint,o.displayFormatHint)){z.displayFormatHint=o.displayFormatHint}if(o.indicatorDataSource&&p.indicatorDataSource&&(this._isPropertyChanged(p.indicatorDataSource.path,o.indicatorDataSource.path)||this._isPropertyChanged(p.indicatorDataSource.refresh,o.indicatorDataSource.refresh))){z.indicatorDataSource=t(p.indicatorDataSource);n(z.indicatorDataSource,o.indicatorDataSource)}if(o.vizConfig){p.vizConfig=r({},p.vizConfig,o.vizConfig);z.vizConfig=p.vizConfig}n(p,z);var m=c.getVizRef(p);p=this._getVisualizationData(f.id,m.vizId,u,m,l,h,v);g[a]=p;this._oPagesModel.refresh();return this._updateVisualizationCDMData(f.id,P.id,p.id,z)}.bind(this))};l.prototype._updateVisualizationCDMData=function(i,t,r,a){return this._oCdmServicePromise.then(function(e){return e.getPage(i)}).catch(function(i){e.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",i,this.COMPONENT_NAME);return Promise.reject(i)}.bind(this)).then(function(e){var i=e.payload.sections[t].viz[r];var o=c.getVizRef(a);o.vizConfig=a.vizConfig;n(i,o);return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};l.prototype._isPropertyChanged=function(e,i){if((i||i==="")&&e!==i){return true}return false};l.hasNoAdapter=true;return l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Personalization", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,r,i,a,o,s,p,d,u,c,l,jQuery,f){"use strict";function h(t,n,r,a){this._oConfig=a&&a.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new i(this,t)};this._oAdapterWindowOnly={lazy:false,instance:new i(this,undefined)};this._oContainerMap=new e.Map;this._oPendingOperationsMap=new e.Map}h.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";h.prototype.constants=n;h.prototype._configureAppVariantStorage=function(e){var t=this,n="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:n}}}if(Object.keys(e).length===0||e.enabled===false){return}var r=e.adapter&&e.adapter.module||n,a=r.split(".").join("/");var o=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||function(){var e=new jQuery.Deferred;try{sap.ui.require([a],n)}catch(t){e.reject(t)}function n(n){try{var r=new n;var a=new i(t,r);e.resolve(a)}catch(t){e.reject(t)}}return e.promise()}();return t._oAppVariantAdapterLoadPromise};return{lazy:true,create:o}};h.prototype.getGeneratedKey=function(){return e.generateRandomKey()};h.prototype.getPersonalizer=function(e,t,n){n=n||this._getApplicationComponent();return new s(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};h.prototype._getApplicationComponent=function(){var e;var t=l._sOwnerId;if(t){e=sap.ui.getCore().getComponent(t);if(e instanceof sap.ui.core.UIComponent){return e}}return undefined};h.prototype.getTransientPersonalizer=function(){return new a};h.prototype.getContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,false,n)};h.prototype.createEmptyContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,true,n)};h.prototype._createContainer=function(n,i,a,o){var s=this,p,d,u,c,l,f,h=new jQuery.Deferred;if(typeof n!=="string"){throw new e.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}f=!!(t.isAppVariant(o)&&(!i||!i.shared)&&this._oAppVariantAdapterWithBackendAdapter);c=t.adjustScope(i);l=t.addContainerPrefix(n);if(f){var _=o.getManifestObject();c.component=o;c.appVarId=_.getEntry("/sap.ui5/appVariantId");c.appVersion=_.getEntry("/sap.app/applicationVersion/version");l+="#"+_.getEntry("/sap.ui5/appVariantId")}d=f?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;p=s._oAdapterWindowOnly;u=t.pickAdapter(i,p,d);t.loadAdapter(u).then(function(e){var t,n=new r(s,e,l,c,o);var i=e&&e.supportsGetWithoutSubsequentLoad===true;if(a&&i){t=new jQuery.Deferred;t.resolve(n)}else{t=n.load()}t.fail(function(){h.reject()}).done(function(){if(a||n._isExpired()){n.clear()}h.resolve(n)})},function(e){h.reject(e)});return h.promise()};h.prototype.delContainer=function(e,n){var r={},i,a="",o=this;n=o._adjustScope(n);a=t.addContainerPrefix(e);r=new jQuery.Deferred;i=o._pendingContainerOperations_cancelAddNext(e,null);i.always(function(){o.getContainer(e,n).fail(function(){o._pendingContainerOperations_cancelAddNext(e,r);r.reject()}).done(function(){var i;o._pendingContainerOperations_cancelAddNext(e,r);i=n.validity===0?o._oAdapterWindowOnly:o._oAdapterWithBackendAdapter;t.loadAdapter(i).then(function(e){e.delAdapterContainer(a,n).fail(function(){r.reject()}).done(function(){r.resolve()})},function(){r.reject()})})});return r.promise()};h.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n,r;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){r=n._sapFnSave;n._sapFnSave=undefined;r()}return n};h.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(h.prototype.SAVE_DEFERRED_DROPPED)}return n};h.prototype.getPersonalizationContainer=function(n){var r="",i={},a={};if(typeof n!=="string"){throw new e.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}r=t.addContainerPrefix(n);if(this._oContainerMap.containsKey(r)){return this._oContainerMap.get(r).promise()}a=new jQuery.Deferred;i=new o(this._oAdapterWithBackendAdapter.instance,r);i.done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)});this._oContainerMap.put(r,a);return a.promise()};h.prototype.delPersonalizationContainer=function(e){var n={},r="",i=this;r=t.addContainerPrefix(e);n=new jQuery.Deferred;this.getPersonalizationContainer(e).fail(function(){n.reject()}).done(function(){i._oAdapterWithBackendAdapter.instance.delAdapterContainer(r).fail(function(){n.reject()}).done(function(){i._oContainerMap.remove(r);n.resolve()})});return n.promise()};h.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};h.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};h.prototype.isResetEntirePersonalizationSupported=function(){var e=this._getBackendAdapter();if(typeof e.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof e.isResetEntirePersonalizationSupported==="function"){return e.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(e){f.error("isResetEntirePersonalizationSupported failed with error: "+e.toString());return Promise.reject(e)})}return Promise.resolve(true)};h.prototype._adjustScope=t.adjustScope;h.hasNoAdapter=false;h.ContextContainer=r;h.Variant=d;h.VariantSet=u;h.VariantSetAdapter=p;h.WindowAdapter=i;h.WindowAdapterContainer=c;return h},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager", ["sap/ushell/services/_PluginManager/Extensions","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ushell/UI5ComponentType"],function(e,n,jQuery,i,t,o,r){"use strict";var a="sap.ushell.services.PluginManager";var s="sap-ushell-plugin-type";var l="RendererExtensions";var u="sap.ushell.components.shell.defaults";var g=[l,"EarlyLoading","UserDefaults","UserImage","ContentProvider","AppWarmup"];function f(f,c,p){var d=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=p&&p.config||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false}g.forEach(function(e){d._oPluginCollection[e]={};d._oCategoryLoadingProgress[e]=new jQuery.Deferred});this._handlePluginCreation=function(e,i,o,r){var s=this,l=s._oPluginCollection[e][i];t.setPerformanceMark("FLP -- PluginManager.loadPlugin["+e+"]["+i+"]");try{if(l.hasOwnProperty("component")){if(s._mInitializedComponentPromise.hasOwnProperty(l.component)){s._mInitializedComponentPromise[l.component].then(function(){s._instantiateComponent(l,o,r)},function(){s._instantiateComponent(l,o,r)})}else{s._mInitializedComponentPromise[l.component]=s._instantiateComponent(l,o,r)}}else{n.error("Invalid plugin configuration. The plugin "+i+" must contain a <component> key",a)}}catch(e){n.error("Error while loading bootstrap plugin: "+l.component||"",a);if(o){o.reject(e)}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js"};this._handleXhrAuthentication=function(e,i){var t;if(e&&["true",true,"X"].indexOf(e["sap-ushell-xhr-authentication"])>-1){if(!i){n.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,a);return jQuery.when()}if(e.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){t=parseInt(e["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(t)){n.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",i,"': '",e["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,a)}else{sap.ushell.Container.setXhrLogonTimeout(i,t)}}return jQuery.ajax(i+"/"+this._getFileNameForXhrAuth(),{dataType:"text"})}return jQuery.when()};this._instantiateComponent=function(i,t,o){var s=new jQuery.Deferred,l=JSON.parse(JSON.stringify(i)),u={ui5ComponentName:l.component,url:l.url,getExtensions:e.bind(null,i.component)};function g(e){return function(i){e=e||"Cannot create UI5 plugin component: (componentId/appdescrId :"+u.ui5ComponentName+")\n"+i+" properties "+JSON.stringify(u)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";i=i||"";n.error(e,i.stack,a);if(t){t.reject.apply(this,arguments)}s.reject.apply(this,arguments)}}l.name=l.component;delete l.component;u.applicationDependencies=l;if(l.config){u.applicationConfiguration=l.config;delete l.config}u.loadDefaultDependencies=false;if(o!==undefined){u.oPostMessageInterface=o}sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){this._handleXhrAuthentication(u.applicationConfiguration,l.url).done(function(){e.createComponent(u,{},[],r.Plugin).done(function(e){if(t){t.resolve(e)}s.resolve.apply(this,arguments)}).fail(g())}).fail(g("XHR logon for FLP plugin failed"))}.bind(this)).catch(g());return s.promise()};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(g))};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection))};this.registerPlugins=function(e){var t=this,o,r,u,f=[],c,p;if(!e){return}if(this._oConfig.isBlueBox===true){c=new i(window.location.href).get("sap-plugins");if(c&&c.length>0){c=","+c+","}else{c=undefined}}Object.keys(e).sort().forEach(function(i){o=e[i]||{};r=o.config||{};u=r[s]||"";if(o.enabled===false){return}if(!t._isFormFactorSupported(o)){n.info("Plugin '"+i+"' filtered from result: form factor not supported");return}if(t._oConfig.isBlueBox===true){if(o.config&&o.config["sap-plugin-agent"]===true){p=o.config["sap-plugin-agent-id"]||i;if(c){if(c.indexOf(","+p+",")<0){return}}else{return}}}if(o.enabled===undefined){o.enabled=true}if(o.hasOwnProperty("module")){var d=(o.module||"").replace(/\./g,"/");n.error("Plugin "+i+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",a);try{sap.ui.requireSync(d)}catch(e){n.error("Plugin module "+d+" is not found.")}return}if(r&&r.hasOwnProperty(s)){if(g&&Array.prototype.indexOf.call(g,u)!==-1){if(f.indexOf(u)===-1){f.push(u)}t._oPluginCollection[u][i]=JSON.parse(JSON.stringify(o))}else{n.warning("Plugin "+i+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+u,a)}}else{t._oPluginCollection[l][i]=JSON.parse(JSON.stringify(o));if(f.indexOf(l)===-1){f.push(l)}}});try{if(t._oConfig.isBlueBox!==true){t._buildNamesOfPluginsWithAgents()}}catch(e){n.error("failed to build plugin agents names list",e.message||e.toString(),"sap.ushell.services.PluginManager")}f.forEach(function(e){if(t._oCategoryLoadingProgress.hasOwnProperty(e)&&t._oCategoryLoadingProgress[e].state()==="resolved"){t.loadPlugins(e)}})};this._isFormFactorSupported=function(e){var n=e.deviceTypes,i=t.getFormFactor();if(n&&n[i]===false){return false}return true};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise()}};this.loadPlugins=function(e){var r=this,s,f,c,p;t.setPerformanceMark("FLP -- PluginManager.startLoadPlugins["+e+"]");if(e===l){p=o.getInterface()}if(g&&Array.prototype.indexOf.call(g,e)!==-1){if(r._oCategoryLoadingProgress[e].pluginLoadingTriggered===undefined){r._oCategoryLoadingProgress[e].pluginLoadingTriggered=true}if(Object.keys(r._oPluginCollection[e]).length>0){s=[];c=Object.keys(r._oPluginCollection[e]);if(new i(window.location.href).get("sap-ushell-xx-pluginmode")==="discard"&&(e==="RendererExtensions"||e==="AppWarmup")){c=c.filter(function(n){return r._oPluginCollection[e][n].component===u})}c.forEach(function(n){var i=r._oPluginCollection[e][n];if(!i.loaded){i.loaded=true;f=new jQuery.Deferred;s.push(f.promise());r._handlePluginCreation(e,n,f,p)}});if(s.length>0){jQuery.when.apply(undefined,s).done(function(){t.setPerformanceMark("FLP -- PluginManager.endLoadPlugins["+e+"]");r._oCategoryLoadingProgress[e].resolve()}).fail(r._oCategoryLoadingProgress[e].reject.bind())}}else{r._oCategoryLoadingProgress[e].resolve()}}else{n.error("Plugins with category "+e+" cannot be loaded by the PluginManager",a);r._oCategoryLoadingProgress[e].reject("Plugins with category "+e+" cannot be loaded by the PluginManager")}return r._oCategoryLoadingProgress[e].promise()};this._buildNamesOfPluginsWithAgents=function(){var e=this,n="",i;Object.keys(e._oPluginCollection).forEach(function(t){Object.keys(e._oPluginCollection[t]).forEach(function(o){i=e._oPluginCollection[t][o];if(i&&i.enabled&&i.enabled===true){if(i.config&&i.config["sap-plugin-agent"]===true){n+=(i.config["sap-plugin-agent-id"]||o)+","}}})});if(n.endsWith(",")){n=n.slice(0,-1)}this._sPluginAgentsNames=n};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames}}f.hasNoAdapter=true;return f},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ReferenceResolver", ["sap/ushell/User","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log"],function(e,t,jQuery,r,n){"use strict";function a(){this.getValue=function(t){var r=new jQuery.Deferred;var n;if(t==="User.env.sap-ui-legacy-date-format"){n=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat()}if(t==="User.env.sap-ui-legacy-number-format"){n=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat()}if(t==="User.env.sap-ui-legacy-time-format"){n=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat()}if(t==="User.env.sap-language"){n=sap.ushell.Container.getUser().getLanguage()}if(t==="User.env.sap-languagebcp47"){n=sap.ushell.Container.getUser().getLanguageBcp47()}if(t==="User.env.sap-accessibility"){n=sap.ushell.Container.getUser().getAccessibilityMode()?"X":undefined}if(t==="User.env.sap-statistics"){n=sap.ui.getCore().getConfiguration().getStatistics()?"true":undefined}if(t==="User.env.sap-theme"){n=sap.ushell.Container.getUser().getTheme(e.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}if(t==="User.env.sap-theme-name"){n=sap.ushell.Container.getUser().getTheme()}if(t==="User.env.sap-theme-NWBC"){n=sap.ushell.Container.getUser().getTheme(e.prototype.constants.themeFormat.NWBC)}r.resolve({value:n});return r.promise()}}function s(e,s,i){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a}return this.oUserEnvReferenceResolver};this.resolveReferences=function(e,t){var a=this;var s=new jQuery.Deferred;var i=[];var u=true;var f={};var l={};var o=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var c,g;if(!t){g=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}else{g=Promise.resolve(t)}var p=e.map(function(e){var t;if(e.indexOf("User.env.")===0){t=e;l[t]=1}if(e.indexOf("UserDefault.")===0){t=a._extractAnyUserDefaultReferenceName(e);f[t]=1}if(typeof t!=="string"){u=false;n.error("'"+e+"' is not a legal reference name",null,"sap.ushell.services.ReferenceResolver")}return{full:e,name:t}});if(!u){return s.reject("One or more references could not be resolved").promise()}Promise.all([g,o]).then(function(e){var t=e[0];var n=e[1];Object.keys(f).forEach(function(e){i.push(n.getValue(e,t))});Object.keys(l).forEach(function(e){c=c||a._getUserEnvReferenceResolver();i.push(c.getValue(e))});jQuery.when.apply(jQuery,i).done(function(){var e={};var t=0,n=arguments;Object.keys(f).forEach(function(e){f[e]=n[t];t=t+1});Object.keys(l).forEach(function(e){l[e]=n[t];t=t+1});p.forEach(function(t){var n;if(t.full.indexOf("UserDefault.extended.")===0){n=a.mergeSimpleAndExtended(f[t.name]);if(!r(n)){e[t.full]=n}else{e[t.full]=undefined}}else if(t.full.indexOf("UserDefault.")===0){e[t.full]=f[t.name].value}else if(t.full.indexOf("User.env.")===0){e[t.full]=l[t.name].value}});s.resolve(e)})});return s.promise()};this._extractAnyUserDefaultReferenceName=function(e){var t=this.extractExtendedUserDefaultReferenceName(e);if(typeof t==="string"){return t}return this.extractUserDefaultReferenceName(e)};this.extractExtendedUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.extended.")!==0){return undefined}return e.replace(/^UserDefault[.]extended[.]/,"")};this.extractUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.")!==0||e.indexOf("UserDefault.extended.")===0){return undefined}return e.replace(/^UserDefault[.]/,"")};this.mergeSimpleAndExtended=function(e){var t=jQuery.extend(true,{},e.extendedValue);if(typeof e.value==="string"){if(!Array.isArray(t.Ranges)){t.Ranges=[]}t.Ranges.push({Sign:"I",Option:"EQ",Low:e.value,High:null})}return t};function u(e){var t=/{([^}%]*%%[^%]+%%)}?/g,r=/([^%]*)%%/,n=/%%([^%]+)%%/,a,s,i,u=[];a=t.exec(e);while(a){s=r.exec(a[1]);i=n.exec(a[1]);u.push({edmType:s[1],name:i[1]});a=t.exec(e)}return u}this.resolveUserDefaultParameters=function(e,r){var n=new jQuery.Deferred,a,s,i=[],f;f=/[^(?]*/.exec(e);a=f===null?[]:u(f[0]);a.forEach(function(e){i.push(e.name)});f=/[(?][^]*/.exec(e);a=f===null?[]:u(f[0]);var l=[],o={};a.forEach(function(e){l.push(e.name);o[e.name]=e.edmType});s=l.filter(function(e){if(/^UserDefault\.(?!extended\.).+/.test(e)){return true}i.push(e);return false});if(s.length>0){this.resolveReferences(s,r).done(function(r){var a=e,s=[];Object.keys(r).forEach(function(e){var n,i=false;while(n!=a){n=a;if(r[e]!==undefined){var u=t.formatValue(r[e],o[e]);a=a.replace("{"+o[e]+"%%"+e+"%%}",window.encodeURIComponent(u))}else{i=true;a=a.replace("{"+o[e]+"%%"+e+"%%}","")}}if(i){s.push(e)}});n.resolve({url:a,defaultsWithoutValue:s,ignoredReferences:i})})}else{n.resolve({url:e,defaultsWithoutValue:[],ignoredReferences:i})}return n.promise()}}s.hasNoAdapter=true;return s},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigation", ["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(t,i,e){"use strict";var a=i.Action;var n=i.Icon;function s(i,s,h){function r(){sap.ui.require(["sap/m/MessageBox"],function(t){t.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:n.ERROR,title:"Client out of sync with server.",actions:[a.YES,a.NO],onClose:function(t){if(t===a.YES){window.setTimeout(function(){window.location.reload()},0)}}})})}var o=h&&h.config;this.hashChanger=new t(o);this._navigationFilterForForwardingToRegisteredRouters=function(t,i){var e=this._aRouters.some(function(t){return t.match(i)});if(e){var a=t.getCurrentApplication();var n=a&&a.componentInstance&&!a.homePage;if(n){var s=a.componentInstance.getRouter();if(s){s.stop()}}return this.NavigationFilterStatus.Keep}return this.NavigationFilterStatus.Continue};this.getNavigationContext=function(){var t=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(t.oldHash,t.newHash);return{status:t.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()}};this.isInitialNavigation=function(){return this._bIsInitialNavigation};this.setIsInitialNavigation=function(t){this._bIsInitialNavigation=t};this.hrefForExternal=function(t,i,e,a){return this.hashChanger.hrefForExternal(t,i,e,a)};this.hrefForAppSpecificHash=function(t){return this.hashChanger.hrefForAppSpecificHash(t)};this.compactParams=function(t,i,e,a){return this.hashChanger.compactParams(t,i,e,a)};this.toExternal=function(t,i,e){return this.hashChanger.toExternal(t,i,e)};this.toAppHash=function(t,i){this.hashChanger.toAppHash(t,i)};this.init=function(t){this._bIsInitialNavigation=true;hasher.prependHash="";e.replaceHashChanger(this.hashChanger);var i=sap.ui.getCore().getEventBus();i.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(t);this._enableHistoryEntryReplacedDetection();return this};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments)}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments)}.bind(this)};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash"};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null};this.replaceHashWithoutNavigation=function(t){hasher.changed.active=false;this._fnOriginalSetHash(t);hasher.changed.active=true};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(t){this.hashChanger.registerNavigationFilter(t)};this._aRouters=[];this.registerExtraRouter=function(t){this._aRouters.push(t)};this.unregisterNavigationFilter=function(t){this.hashChanger.unregisterNavigationFilter(t)};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced()}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue}.bind(this));this.registerPrivateFilters=function(t){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,t))}}s.hasNoAdapter=true;return s},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigationHashChanger", ["sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher","sap/ushell/TechnicalParameters","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepEqual"],function(e,t,a,i,r,n,s,o,jQuery,p,h){"use strict";var l=e.NavigationState;var u={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};var c=i.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(e){this.oServiceConfig=e;this._oNavigationState={};i.apply(this);this._initializedByShellNav=false;this._bReloadApplication=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection}).map(function(e){var t={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){t.updateHashOnly=e.updateHashOnly}return t})}}});c.prototype.privgetCurrentShellHash=function(){var e=this.privsplitHash(r.getHash());return{hash:"#"+(e&&e.shellPart?e.shellPart:"")}};c.prototype.privconstructHash=function(e){var t=this.privgetCurrentShellHash();t.hash+=e;return t};c.prototype.privconstructShellHash=function(e){return a.constructShellHash(e)};c.prototype.privsplitHash=function(e){var t,i,r;if(e===undefined||e===null||e===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null}}t=a.parseShellHash(e);if(t===undefined||t===null){return null}i=t.params&&!o(t.params)?t.params:null;r=t.appSpecificRoute;t.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(t))||null,appSpecificRoute:r||null,intent:t.semanticObject&&t.action&&t.semanticObject+"-"+t.action+(t.contextRaw||"")||null,params:i}};c.prototype.privsetHash=function(e,t,a){r.prependHash="";e=this.privstripLeadingHash(e);t=t||"";if(a===undefined){a=true}if(a){this.fireEvent(u.HASH_SET.name,{sHash:t});r.setHash(e)}else{this.fireEvent(u.HASH_REPLACED.name,{sHash:t});r.replaceHash(e)}};c.prototype.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};c.prototype.registerNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters.push(e)};c.prototype.unregisterNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters=this.aNavigationFilters.filter(function(t){return t!==e})};function f(e,t,a){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred).resolve();this.getNextKey=function(){this.oAppState=e.createEmptyAppState(t,a);return this.oAppState.getKey()};this.store=function(e){var t;this.oAppState.setData(e);t=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,t)};this.getPromise=function(){return this.oPromise}}c.prototype.compactParams=function(e,i,r,n){var s=new jQuery.Deferred;var o=a.constructShellHash({target:{semanticObject:"SO",action:"action"},params:e});if(e===undefined||Object.keys(e).length===0){return s.resolve(e).promise()}sap.ushell.Container.getServiceAsync("AppState").then(function(e){var p=new f(e,r,n);var h=t.compactHash(o,i,p);var l=a.parseParameters(h.hash.match(/\?.*/)[0]);var u=p.getPromise();u.done(function(){s.resolve(l)}).fail(function(e){s.reject(e)})});return s.promise()};c.prototype.hrefForExternal=function(e,t,a,i){var r=this.hrefForExternalNoEnc(e,t,a,i);function n(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}if(!i){return n(r,t)}var s=new jQuery.Deferred;r.then(function(e){s.resolve(n(e,t))}).catch(s.reject.bind(s));return s};c.prototype.hrefForExternalNoEnc=function(e,t,a,i){if(i){var r=new jQuery.Deferred;this.hrefForExternalNoEncAsync(e,t,a).then(r.resolve).catch(r.reject);return r.promise()}p.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.ShellNavigationHashChanger");var n;var s=sap.ushell.Container.getService("AppState");var o=new f(s,a);var h=this.privhrefForExternalNoEnc(e,o);if(t===true){n={hash:h.hash,params:h.params,skippedParams:h.skippedParams}}else{n=h.hash}return n};c.prototype.hrefForExternalNoEncAsync=function(e,t,a){return sap.ushell.Container.getServiceAsync("AppState").then(function(i){var r;var n=new f(i,a);var s=this.privhrefForExternalNoEnc(e,n);if(t===true){r={hash:s.hash,params:s.params,skippedParams:s.skippedParams}}else{r=s.hash}return new Promise(function(e,t){n.getPromise().done(function(){e(r)}).fail(t)})}.bind(this))};c.prototype.privhrefForExternalNoEnc=function(e,a){var i;if(e===undefined){return this.privgetCurrentShellHash()}if(e&&e.target&&(typeof e.target.semanticObject==="string"||typeof e.target.shellHash==="string")){i="#"+this.privconstructShellHash(e);return t.compactHash(i,undefined,a)}return this.privgetCurrentShellHash()};c.prototype.privgetAppHash=function(e){var t,i;if(e&&e.target&&typeof e.target.shellHash==="string"){i=a.parseShellHash(e.target.shellHash);t=i&&i.appSpecificRoute;t=t&&t.substring(2)}return t};c.prototype.hrefForAppSpecificHash=function(e){return encodeURI(this.privconstructHash(this.privappHashPrefix+e).hash)};c.prototype.toExternal=function(e,t,a){return sap.ushell.Container.getServiceAsync("AppState").then(function(i){var r=new f(i,t);var n=this.privhrefForExternalNoEnc(e,r).hash;var s=this.privgetAppHash(e);this.privsetHash(n,s,a)}.bind(this))};c.prototype.toAppHash=function(e,t){var a=this.privconstructHash(this.privappHashPrefix+e).hash;this.privsetHash(a,e,t)};c.prototype.initShellNavigation=function(e){if(this._initializedByShellNav){p.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false}this.privfnShellCallback=e;r.changed.add(this.treatHashChanged,this);if(!r.isActive()){r.initialized.addOnce(this.treatHashChanged,this);r.init()}else{this.treatHashChanged(r.getHash())}this._initializedByShellNav=true;return true};c.prototype.init=function(){if(this._initialized){p.info("init already called on this ShellNavigationHashChanger instance.");return false}var e=this.privsplitHash(r.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);var a=t?"&/":"";var i=e&&e.shellPart||"";this.fireEvent(u.HASH_CHANGED.name,{newHash:t,fullHash:i+a+t});this._initialized=true;return true};c.prototype._removeInnerAppSeparator=function(e){return(e||"").replace("&/","")};c.prototype._setNavigationStatus=function(e){this._oNavigationState.status=e};c.prototype._trackNavigation=function(e,t){this._oNavigationState.newHash=e;this._oNavigationState.oldHash=t};c.prototype.getCurrentNavigationState=function(){return this._oNavigationState};c.prototype.treatHashChanged=function(e,i){this._trackNavigation(e,i);this._setNavigationStatus(l.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var n;e=t.expandHash(e);i=t.expandHash(i);var s=this.privsplitHash(e);var o=this.privsplitHash(i);if(!s){var h=new Error("Illegal new hash - cannot be parsed: '"+e+"'");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:e,newAppSpecificRoute:null,fullHash:e,oldShellHash:o?o.shellPart:i,error:h});this.privfnShellCallback(e,null,o?o.shellPart:i,o?o.appSpecificRoute:null,h);this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(!o){o={shellPart:i,appSpecificRoute:null}}for(var c=0;c<this.aNavigationFilters.length;c++){try{var f;var v=this.aNavigationFilters[c].call(undefined,e,i);var H=v;if(typeof v!=="string"){H=v.status;f=v.hash}if(H===this.NavigationFilterStatus.Custom){if(f&&f.length>0){this.inAbandonFlow=true;r.replaceHash(f);this.inAbandonFlow=false}this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;r.replaceHash(i);this.inAbandonFlow=false;this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Keep){n=true}}catch(e){p.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation")}}if(n){this.fireEvent(u.HASH_CHANGED.name,{newHash:e,oldHash:i,fullHash:e});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var S=i===undefined;var g=this._compareHashes(s,o,S);var d=g.sameIntent&&g.sameParameters&&g.sameAppSpecificRoute;if(d){p.info("Navigation happened but hash stayed the same",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.HASH_CHANGED.name,{newHash:this._removeInnerAppSeparator(s.appSpecificRoute),oldHash:this._removeInnerAppSeparator(o.appSpecificRoute),fullHash:e});this._setNavigationStatus(l.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");this.setReloadApplication(false);return}var m=g.sameIntent&&g.sameParameters;if(m){if(this.getReloadApplication()){this.setReloadApplication(false)}else{var A=this._removeInnerAppSeparator(s.appSpecificRoute);var y=this._removeInnerAppSeparator(o.appSpecificRoute);p.info("Inner App Hash changed from '"+y+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.HASH_CHANGED.name,{newHash:A,oldHash:y,fullHash:e});this._setNavigationStatus(l.Finished);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");return}}if(g.sameIntent&&this.hasListeners(u.SHELL_HASH_PARAMETER_CHANGED.name)){var E=a.paramsToString(s.params);var N=a.paramsToString(o.params);p.info("Shell hash parameters changed from '"+N+"' to '"+E+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:s.params,oOldParameters:o.params});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}p.info("Outer shell hash changed from '"+i+"' to '"+e+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:s.shellPart,newAppSpecificRoute:s.appSpecificRoute,fullHash:e,oldShellHash:o.shellPart,oldAppSpecificRoute:o.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(o.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(s.appSpecificRoute)});this.privfnShellCallback(s.shellPart,s.appSpecificRoute,o.shellPart,o.appSpecificRoute);if(g.sameIntent){sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation")}this._setNavigationStatus(l.Finished);this.setReloadApplication(false)};c.prototype._parametersChanged=function(e,t){return!h(e,t)};c.prototype._compareHashes=function(e,t,a){return{sameIntent:this._haveSameIntent(e,t)&&!a,sameParameters:this.haveSameIntentParameters(e.params,t.params),sameAppSpecificRoute:e.appSpecificRoute===t.appSpecificRoute}};c.prototype.setHash=function(e){this.toAppHash(e,true)};c.prototype.replaceHash=function(e){this.toAppHash(e,false)};c.prototype.getHash=function(){return this.getAppHash()};c.prototype.getAppHash=function(){var e=this.privsplitHash(r.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);return t};c.prototype.destroy=function(){r.changed.remove(this.treatHashChanged,this);i.prototype.destroy.apply(this,arguments)};c.prototype._getAllEvents=function(){return Object.keys(u).map(function(e){return u[e]})};c.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false}).map(function(e){return e.name})};c.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true}).map(function(e){return e.name})};c.prototype.isInnerAppNavigation=function(e,t){var a=this.privsplitHash(e)||{};var i=this.privsplitHash(t)||{};var r=t===undefined;var n=this._haveSameIntent(a,i)&&!r;var s=this.haveSameIntentParameters(a.params,i.params);return n&&s};c.prototype._haveSameIntent=function(e,t){return e.intent===t.intent};c.prototype._removeNonIntentParameters=function(e){var t=n.getParameters({isIntentParameter:false});var a;if(e){for(var i=0;i<t.length;i++){a=t[i];if(e[a.name]){delete e[a.name]}}}return e||{}};c.prototype.haveSameIntentParameters=function(e,t){var a=s({},e);var i=s({},t);return!this._parametersChanged(this._removeNonIntentParameters(a),this._removeNonIntentParameters(i))};c.prototype.getReloadApplication=function(){return this._bReloadApplication};c.prototype.setReloadApplication=function(e){this._bReloadApplication=e};return c},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SupportTicket", ["sap/ushell/Config"],function(e){"use strict";function t(t,n,i,r){this.createTicket=function(e){return t.createTicket(e)};this.isEnabled=function(){return e.last("/core/extension/SupportTicket")}}t.hasNoAdapter=false;return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLParsing", ["sap/ushell/utils","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing","sap/base/Log"],function(t,e,s,r){"use strict";function n(){this.getShellHash=function(t){return s.getShellHash(t)};this.getHash=function(t){return s.getHash(t)};this.isIntentUrl=function(t){r.error("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return s.isIntentUrl(t)};this.isIntentUrlAsync=function(t){return s.isIntentUrlAsync(t)};this.parseParameters=function(t){return s.parseParameters(t)};this.paramsToString=function(t){return s.paramsToString(t)};this.privparamsToString=function(t,e,r){return s.privparamsToString(t,e,r)};this.parseShellHash=function(t){return s.parseShellHash(t)};this.privstripLeadingHash=function(t){return s.privstripLeadingHash(t)};this.splitHash=function(t){return s.splitHash(t)};this.constructShellHash=function(t){return s.constructShellHash(t)};this.addSystemToServiceUrl=function(s,r){var n,a,i=r;if(!s||s.indexOf("/")!==0||s.indexOf("//")===0){throw new t.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing")}if(r instanceof sap.ui.core.Component){a=typeof r.getComponentData==="function"&&r.getComponentData();i=a&&a.startupParameters&&a.startupParameters["sap-system"]&&a.startupParameters["sap-system"][0]}n=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!i&&!r&&n&&n.url){i=new e(n.url).get("sap-system")}if(/^[^?]*(;mo([/;?]|$))/.test(s)){}else if(/^[^?]*(;o=([/;?]|$))/.test(s)){s=s.replace(/;o=([/;?]|$)/,(i?";o="+i:"")+"$1")}else if(!/^[^?]*;o=/.test(s)&&i){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+i+"$2")}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s}}n.hasNoAdapter=true;return n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLShortening", ["sap/ushell/utils/UrlShortening"],function(n){"use strict";function e(){this.compactHash=n.compactHash.bind(n);this.checkHashLength=n.checkHashLength.bind(n);this.expandHash=n.expandHash.bind(n);this.expandParamGivenRetrievalFunction=n.expandParamGivenRetrievalFunction.bind(n)}e.hasNoAdapter=true;return e},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentHandle", function(){"use strict";var t=function(t){this._oComponent=t};t.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){})};t.prototype.getInstance=function(){return this._oComponent};t.prototype.getMetadata=function(){return this._oComponent.getMetadata()};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentLoader", ["sap/ushell/Config","sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(e,o,t,n,s,jQuery){"use strict";function r(e,r,i,a){this._oConfig=a&&a.config||{};this._oAdapter=e;this._logStackTrace=function(e,o){var t=JSON.stringify(e,null,4);n.logInstantiateComponentError(e.name,o+"",o.status,o.stack,t);return Promise.reject(o)};this.modifyComponentProperties=function(e,o){if(!this._oAdapter.modifyComponentProperties){return Promise.resolve(e)}return this._oAdapter.modifyComponentProperties(e.componentProperties,o).then(function(o){e.componentProperties=o;return e})};this.createComponent=function(e,o,t,n){var s=new jQuery.Deferred,r=this;this.createComponentData(e,o,t).then(function(e){return r.modifyComponentProperties(e,n)}).then(function(e){r.instantiateComponent(e).then(s.resolve,s.reject)},function(){s.resolve(e)});return s.promise()};this.createComponentData=function(e,t,s){var r=this;return new Promise(function(i,a){var c={},p=e||{},l=n.shouldLoadCoreExt(p),u=n.shouldUseAmendedLoading(r._oConfig),m=n.shouldLoadDefaultDependencies(p,r._oConfig,u),d=o.getParameterValueBoolean("sap-ushell-nocb"),C=p.applicationDependencies||{};n.logAnyApplicationDependenciesMessages(C.name,C.messages);if(!p.ui5ComponentName){a();return}delete p.loadCoreExt;delete p.loadDefaultDependencies;var f=n.createComponentData(p.componentData||{},p.url,p.applicationConfiguration,p.reservedParameters);if(p.getExtensions){f.getExtensions=p.getExtensions;delete p.getExtensions}if(p.oPostMessageInterface){f.oPostMessageInterface=p.oPostMessageInterface;delete p.oPostMessageInterface}var h=n.constructAppComponentId(t||{}),g=l&&u,P=n.prepareBundle(r._oConfig.coreResourcesComplement),v=n.createComponentProperties(g,m,d,s,p.applicationDependencies||{},p.ui5ComponentName,p.url,h,P);c.componentData=f;c.componentProperties=v;c.appPropertiesSafe=p;c.loadCoreExt=l;i(c)})};this.instantiateComponent=function(e){var o=e.componentProperties;var r=e.componentData;var i=e.appPropertiesSafe;var a=e.loadCoreExt;t.onBeforeApplicationInstanceCreated.call(null,o);var c=new jQuery.Deferred;n.createUi5Component(o,r).then(function(e){var o=new t(e);i.componentHandle=o;var n=a;if(n){i.coreResourcesFullyLoaded=n;s.emit("CoreResourcesComplementLoaded",{status:"success"})}c.resolve(i)}).fail(this._logStackTrace.bind(this,o)).catch(c.reject);return c.promise()};this.getCoreResourcesComplementBundle=function(){return n.prepareBundle(this._oConfig.coreResourcesComplement)};this.loadCoreResourcesComplement=function(){if(!this.loadCoreResourcesComplementPromise){this.loadCoreResourcesComplementPromise=new Promise(function(e,o){var t=n.prepareBundle(this._oConfig.coreResourcesComplement);n.loadBundle(t).then(function(){s.emit("CoreResourcesComplementLoaded",{status:"success"});e()}).catch(function(){s.emit("CoreResourcesComplementLoaded",{status:"failed"});o()})}.bind(this));this.loadCoreResourcesComplementPromise.finally(function(){this.loadCoreResourcesComplementPromise=undefined}.bind(this))}return this.loadCoreResourcesComplementPromise};s.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement()}.bind(this))}r.hasNoAdapter=false;return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameterPersistence", ["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log"],function(jQuery,e,t){"use strict";var r=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function n(e){this._oAdapter=e;this._oData={}}n.prototype._cleanseValue=function(e){var t=jQuery.extend(true,{},e);for(var n in t){if(t.hasOwnProperty(n)&&r.indexOf(n)<0){delete t[n]}}return t};n.prototype._getSystemContextPromise=function(e){if(!e){t.warning("UserDefaultParameterPersistence: The systemContext was not provided, using defaultSystemContext as fallback");return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext()})}return Promise.resolve(e)};n.prototype.loadParameterValue=function(r,n){var i=new jQuery.Deferred;this._getSystemContextPromise(n).then(function(n){var s=e.get([n.id,r],this._oData);if(s!==undefined){i.resolve(s)}else{this._oAdapter.loadParameterValue(r,n).done(function(s){var a=this._cleanseValue(s);e.set([n.id,r],a,this._oData);t.debug('[UserDefaults] Fetched "'+r+'" for SystemContext='+n.id+" from Persistence",JSON.stringify(a,null,2));i.resolve(a)}.bind(this)).fail(i.reject.bind(this))}}.bind(this));return i.promise()};n.prototype.saveParameterValue=function(r,n,i){var s=new jQuery.Deferred;var a;this._getSystemContextPromise(i).then(function(i){if(!n){return this.deleteParameter(r,i).done(s.resolve).fail(s.reject)}a=this._cleanseValue(n);if(n&&n.noStore===true){t.debug('[UserDefaults] Skipped Save "'+r+'" for SystemContext='+i.id,"noStore=true");return s.resolve()}t.debug('[UserDefaults] Saving "'+r+'" for SystemContext='+i.id+" to Persistence",JSON.stringify(a,null,2));e.set([i.id,r],a,this._oData);return this._oAdapter.saveParameterValue(r,a,i).done(s.resolve).fail(s.reject)}.bind(this));return s.promise()};n.prototype.deleteParameter=function(e,r){var n=new jQuery.Deferred;this._getSystemContextPromise(r).then(function(r){if(this._oData[r.id]){t.debug('[UserDefaults] Deleting "'+e+'" for SystemContext='+r.id+" from Persistence");delete this._oData[r.id][e]}return this._oAdapter.deleteParameter(e,r).done(n.resolve).fail(n.reject)}.bind(this));return n.promise()};n.prototype.getStoredParameterNames=function(e){var t=new jQuery.Deferred;this._getSystemContextPromise(e).then(function(e){this._oAdapter.getStoredParameterNames(e).done(function(e){e.sort();t.resolve(e)}).fail(t.reject.bind(t))}.bind(this));return t.promise()};n.hasNoAdapter=false;return n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameters", ["sap/ui/base/EventProvider","sap/base/Log","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/deepEqual","sap/base/util/isEmptyObject"],function(e,t,a,jQuery,n,r){"use strict";var i="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function o(o,u,l,f){this._aPlugins=[];this._oUserDefaultParametersNames={};this._oWasParameterPersisted={};var d=this;var c=new e;function h(e){var t=typeof e.getComponentData==="function"&&e.getComponentData()&&e.getComponentData().config&&e.getComponentData().config["sap-priority"]||0;if(typeof t!=="number"||isNaN(t)){return 0}return t}this._insertPluginOrdered=function(e,t){var a=h(t),n,r;for(n=0;n<e.length&&t;++n){r=h(e[n]);if(t&&a>r){e.splice(n,0,t);t=undefined}}if(t){e.push(t)}return e};this.registerPlugin=function(e){this._aPlugins=this._insertPluginOrdered(this._aPlugins,e)};this._getUserDefaultValueFromPlugin=function(e,a,n,r){var i;if(typeof e.getUserDefault==="function"){i=new Promise(function(i,s){e.getUserDefault(a,r,n).done(function(s){var o=s||r;var u=this._getComponentNameOfPlugin(e);t.debug('[UserDefaults] Fetched "'+a+'" for SystemContext='+n.id+" from Plugin="+u,JSON.stringify(o,null,2));i(o)}.bind(this)).fail(function(){t.error('invocation of getUserDefault("'+a+'") for plugin '+d._getComponentNameOfPlugin(e)+" rejected.",null,"sap.ushell.services.UserDefaultParameters");i(r)})}.bind(this))}else{i=Promise.resolve(r)}return i};this._iterateOverPluginsToGetDefaultValue=function(e,a,n,r){return new Promise(function(i,s){r.loadPlugins("UserDefaults").done(function(){var t=this._aPlugins.reduce(function(t,a){var r=t.then(this._getUserDefaultValueFromPlugin.bind(this,a,e,n));return r}.bind(this),Promise.resolve(a));t.then(i)}.bind(this)).fail(function(){t.error("Cannot get value for "+e+". One or more plugins could not be loaded.");s("Initialization of plugins failed")})}.bind(this))};this._getStoreDate=function(){return(new Date).toString()};this._storeValue=function(e,t,a,n){if(a&&t.extendedValue){return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(r){return new Promise(function(i){r.getUserDefaultParameterNames(n).done(function(r){var s=this._extractKeyArrays(r);var o=s.extended.indexOf(e)<0;this._saveParameterValue(e,t,a,o,n).then(i)}.bind(this)).fail(function(){this._saveParameterValue(e,t,a,false,n).then(i)}.bind(this))}.bind(this))}.bind(this))}return this._saveParameterValue(e,t,a,false,n)};this._saveParameterValue=function(e,t,n,r,s){if(r){t.extendedValue=undefined}if(n&&this._valueIsEmpty(t)){t=undefined;this._oWasParameterPersisted[e]=false}else{t._shellData=jQuery.extend(true,{storeDate:this._getStoreDate()},t._shellData)}return sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(n){return new Promise(function(r){n.saveParameterValue(e,t,s).always(function(){var n={parameterName:e,parameterValue:a.clone(t||{}),systemContext:s};c.fireEvent(i,n);r(e)})})})};this._getPersistedValue=function(e,t){return new Promise(function(a,n){sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(r){r.loadParameterValue(e,t).done(a).fail(n)})})};this._valueIsEmpty=function(e){return!e||!e.value&&!e.extendedValue};this._haveSameMembersValue=function(e,t,a){return a.every(function(a){return e[a]===t[a]||n(e[a],t[a])})};this._getUserDefaultParameterNames=function(e){if(!this._oUserDefaultParametersNames[e.id]){this._oUserDefaultParametersNames[e.id]=new Promise(function(t){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.getUserDefaultParameterNames(e).done(function(e){var a=this._extractKeyArrays(e);var n=a.extended;var r=a.allParameters;var i=this._arrayToObject(r);t({aAllParameterNames:r,aExtendedParameterNames:n,oMetadataObject:i})}.bind(this))}.bind(this))}.bind(this))}return this._oUserDefaultParametersNames[e.id]};this._isRelevantParameter=function(e,t){return this._getUserDefaultParameterNames(t).then(function(t){if(!t.aAllParameterNames||t.aAllParameterNames.indexOf(e)===-1){throw new Error('The given parameter "'+e+'" is not part of the list of parameters for the given system context.')}})};this.hasRelevantMaintainableParameters=function(e){var t=false;var a=[];return new Promise(function(n){this._getUserDefaultParameterNames(e).then(function(i){if(!r(i)&&i.aAllParameterNames){i.aAllParameterNames.forEach(function(n){var r=this.getValue(n,e);a.push(r);r.done(function(e){if(e&&!e.hasOwnProperty("noEdit")){t=true}})}.bind(this));jQuery.when.apply(undefined,a).done(function(){n(t)}).fail(function(){n()})}else{n()}}.bind(this))}.bind(this))};this.getValue=function(e,t){var n=new jQuery.Deferred;this._isRelevantParameter(e,t).then(function(){return this._getPersistedValue(e,t).then(function(t){this._oWasParameterPersisted[e]=true;return t||{}}.bind(this)).catch(function(){return{value:undefined}})}.bind(this)).then(function(e){var t=a.clone(e);var r=!e._shellData&&this._valueIsEmpty(e)||e.noStore||e.alwaysAskPlugin;if(!r){n.resolve(e);return}return Promise.all([t,e,sap.ushell.Container.getServiceAsync("PluginManager")])}.bind(this)).then(function(a){var r=a[0];var i=a[1];var o=a[2];return this._iterateOverPluginsToGetDefaultValue(e,i,t,o).then(function(a){if(!this._oWasParameterPersisted[e]||!this._haveSameMembersValue(r,a,s)){this._oWasParameterPersisted[e]=true;this._storeValue(e,a,false,t).then(function(){n.resolve(a)})}else{n.resolve(a)}}.bind(this)).catch(n.reject)}.bind(this)).catch(function(){n.resolve({value:undefined})});return n.promise()};this._addParameterValuesToParameters=function(e,t,a){var n=new jQuery.Deferred;var r=[];t.forEach(function(t){var n=this.getValue(t,a);r.push(n);n.done(function(a){e[t].valueObject=a})}.bind(this));jQuery.when.apply(jQuery,r).done(n.resolve.bind(n,e)).fail(n.reject.bind(n,e));return n.promise()};this._arrayToObject=function(e){var t={};e.forEach(function(e){t[e]={}});return t};this._getComponentNameOfPlugin=function(e){try{return e.getMetadata().getComponentName()||""}catch(e){return"'name of plugin could not be determined'"}};this._getEditorDataAndValue=function(e,a,n,r,i){var s=this;var o=[];var u=[];this._aPlugins.forEach(function(e){if(typeof e.getEditorMetadata==="function"){var a=new jQuery.Deferred;o.push(a);try{var n=o.length-1;e.getEditorMetadata(r,i).done(function(e){u[n]=e}).always(a.resolve).fail(function(){t.error("EditorMetadata for plugin "+s._getComponentNameOfPlugin(e)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");a.resolve()})}catch(e){t.error("Error invoking getEditorMetaData on plugin: "+e+e.stack,null,"sap.ushell.services.UserDefaultParameters");a.resolve()}}});jQuery.when.apply(jQuery,o).done(function(){var o=[];var l=u.reverse().reduce(function(e,t){a.forEach(function(a){if(t[a]&&t[a].editorMetadata){e[a].editorMetadata=t[a].editorMetadata}});return e},r);a.forEach(function(e){if(!(l[e]&&l[e].editorMetadata)){o.push(e)}});s._addParameterValuesToParameters(l,a,i).done(function(a){var r=jQuery.extend(true,{},a),i;n.forEach(function(e){if(r[e]){r[e].editorMetadata=r[e].editorMetadata||{};r[e].editorMetadata.extendedUsage=true}});i=Object.keys(r).splice(0);i.forEach(function(e){var t;if(r[e].valueObject&&r[e].valueObject.noEdit===true){delete r[e];t=o.indexOf(e);if(t>=0){o.splice(t,1)}}});if(o.length>0){t.error('The following parameter names have no editor metadata and thus likely no configured plugin:\n"'+o.join('",\n"')+'".')}e.resolve(r)}).fail(e.reject.bind(e))})};this.editorGetParameters=function(e){var a=new jQuery.Deferred;Promise.all([sap.ushell.Container.getServiceAsync("PluginManager"),this._getUserDefaultParameterNames(e)]).then(function(n){var r=n[0];var i=n[1];if(i.oMetadataObject.length===0){a.resolve({})}else{r.loadPlugins("UserDefaults").done(function(){this._getEditorDataAndValue(a,i.aAllParameterNames,i.aExtendedParameterNames,i.oMetadataObject,e)}.bind(this)).fail(function(){t.error("One or more plugins could not be loaded");a.reject("Initialization of plugins failed")})}}.bind(this));return a.promise()};this._extractKeyArrays=function(e){var t={simple:e&&e.simple&&Object.keys(e.simple).sort()||[],extended:e&&e.extended&&Object.keys(e.extended).sort()||[]};var a=t.extended.filter(function(e){return t.simple.indexOf(e)<0});t.allParameters=t.simple.concat(a).sort();return t};this.editorSetValue=function(e,t,a){var n=new jQuery.Deferred;this._storeValue(e,t,true,a).then(n.resolve);return n.promise()};this.attachValueStored=function(e){c.attachEvent(i,e)};this.detachValueStored=function(e){c.detachEvent(i,e)}}o.hasNoAdapter=true;return o},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserInfo", ["sap/base/Log","sap/ushell/Config","sap/ushell/User"],function(e,t,r){"use strict";function s(t,r){this.getId=function(){return sap.ushell.Container.getUser().getId()};this.getFirstName=function(){return sap.ushell.Container.getUser().getFirstName()};this.getLastName=function(){return sap.ushell.Container.getUser().getLastName()};this.getFullName=function(){return sap.ushell.Container.getUser().getFullName()};this.getEmail=function(){return sap.ushell.Container.getUser().getEmail()};this.getUser=function(){return sap.ushell.Container.getUser()};this.getThemeList=function(){var r=t.getThemeList();r.fail(function(){e.error("getThemeList failed")});return r};this.updateUserPreferences=function(){var r=t.updateUserPreferences(sap.ushell.Container.getUser());r.fail(function(){e.error("updateAttributes: ")});return r};this.getLanguageList=function(){var r=t.getLanguageList();r.fail(function(){e.error("getLanguageList failed")});return r};this.getUserSettingList=function(){var r=t.getUserProfilePropertyValueLists();r.fail(function(){e.error("getUserProfilePropertyValueLists failed")});return r};this.getUserSettingListEditSupported=function(){if(typeof t.getUserProfilePropertyValueLists!=="undefined"){return true}return false}}s.hasNoAdapter=false;return s},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppState", ["sap/base/Log","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(e,n,r,a,o,h,c,p,_){this._oServiceInstance=e;this._sKey=n;this._sData=a;this._sAppName=o;this._sACHComponent=h;this._bTransient=c;this._bModifiable=r;this._sPersistencyMethod=p;this._oPersistencySettings=_;if(this._bModifiable){this.setData=function(e){try{this._sData=JSON.stringify(e)}catch(e){t.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined}};this.save=s.bind(this);this.delete=i.bind(this)}}function s(){var t=new jQuery.Deferred;this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}function i(){var t=new jQuery.Deferred;this._oServiceInstance._deleteAppState(this._sKey).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}e.prototype.getData=function(){var e;if(this._sData===undefined||this._sData===""){return undefined}try{e=JSON.parse(this._sData)}catch(e){t.error("Could not parse ["+this._sData+"]"+e)}return e};e.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod};e.prototype.getPersistencySettings=function(){return this._oPersistencySettings};e.prototype.getKey=function(){return this._sKey};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppStatePersistencyMethod", [],function(){"use strict";function t(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState"}return new t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/LimitedBuffer", [],function(){"use strict";function t(t){this.index=-1;this.capacity=t;this.array=[]}t.prototype._clear=function(){this.array=[];this.index=-1};t.prototype.addAsHead=function(t,i,e,a){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:t,value:i,persistencyMethod:e,persistencySettings:a}};t.prototype.getByKey=function(t){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){return this.array[e]}}return undefined};t.prototype.deleteByKey=function(t){var i,e,a=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){delete this.array[e];a=true}}return a};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/Sequentializer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this.oLastPromise=new jQuery.Deferred;this.oLastPromise.resolve()}e.prototype.addToQueue=function(e){var r=new jQuery.Deferred;this.oLastPromise.always(function(){var t=e();t.done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})});this.oLastPromise=r;return r.promise()};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/SequentializingAdapter", ["sap/ushell/services/_AppState/Sequentializer"],function(e){"use strict";function t(t){this._oSequentializer=new e;this._oUnderlyingAdapter=t}t.prototype.saveAppState=function(e,t,r,n,i,p,d){var o;o=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,e,t,r,n,i,p,d);return this._oSequentializer.addToQueue(o)};t.prototype.loadAppState=function(e){return this._oUnderlyingAdapter.loadAppState(e)};t.prototype.deleteAppState=function(e){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(e)}};t.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods()}return[]};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/WindowAdapter", ["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";var r=500;var a=18;function o(){this._init.apply(this,arguments)}o.prototype._init=function(t,a,p){var n=p&&p.config&&p.config.initialAppStates||{};var i=p&&p.config&&p.config.initialAppStatesPromise;this._oServiceInstance=t;this._oBackendAdapter=a;if(!o.prototype.data){o.prototype.data=new e(r)}if(i){i.then(function(e){if(typeof e==="object"){Object.keys(e).forEach(function(t){o.prototype.data.addAsHead(t,e[t])})}})}Object.keys(n).forEach(function(e){o.prototype.data.addAsHead(e,n[e])})};o.prototype.saveAppState=function(e,t,r,a,p,n,i,s){this.sComponent=p;var d=new jQuery.Deferred;o.prototype.data.addAsHead(e,r,i,s);if(this._oBackendAdapter&&!n){return this._oBackendAdapter.saveAppState(e,t,r,a,p,i,s)}d.resolve();return d.promise()};o.prototype._checkIfTransient=function(e){return e.startsWith("TAS")};o.prototype.loadAppState=function(e){var r=new jQuery.Deferred,p=o.prototype.data.getByKey(e);if(p){setTimeout(function(){r.resolve(e,p.value,p.persistencyMethod,p.persistencySettings)},0);return r.promise()}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var n=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(e);if(n){r.resolve(e,n.value);return r.promise()}}}catch(e){if(e.code===a){t.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.")}else{t.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.")}}if(this._oBackendAdapter&&!this._checkIfTransient(e)){this._oBackendAdapter.loadAppState(e).done(function(e,t,a,p){o.prototype.data.addAsHead(e,t);r.resolve(e,t,a,p)}).fail(r.reject.bind(r));return r.promise()}r.reject("AppState.js - loadAppState: Application State could not be loaded");return r.promise()};o.prototype.deleteAppState=function(e){var t=new jQuery.Deferred;o.prototype.data.deleteByKey(e);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState&&!this._checkIfTransient(e)){return this._oBackendAdapter.deleteAppState(e)}t.resolve();return t.promise()};o.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods()}return[]};return o});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Formatter", [],function(){"use strict";function e(e){return"#"+e.semanticObject+"-"+e.action+"{"+n(e.signature)+"}"}function r(e){var r=e.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!r){throw"Cannot parse inbound"}var n={semanticObject:r[1],action:r[2],signature:{parameters:{}}};if(!r[3]){return n}n.signature=a(r[4]);return n}function n(e){var r=e||{},n=r.parameters||{},a={optional:"[FORMAT]",required:"FORMAT"},t={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},u={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var i=n&&Object.prototype.toString.apply(n)==="[object Object]"&&Object.keys(n).length>0;if(!i){return"<no params>"+(u[r.additionalParameters]||u._unknown)}var o=[];Object.keys(n).forEach(function(e){var r=n[e],u=r.required?"required":"optional",i=r.filter&&r.filter.value,l=r.defaultValue&&r.defaultValue.value,f=r.filter&&r.filter.format||"plain",s=r.defaultValue&&r.defaultValue.format||"plain";var c=[],p=t[f]||t._unknown,d=t[s]||t._unknown;if(i){c.push(a["required"].replace("FORMAT",p.replace("VALUE",i)))}if(l){c.push(a["optional"].replace("FORMAT",d.replace("VALUE",l)))}o.push(a[u].replace("FORMAT",e+":"+c.join("")))});return o.join(",")+(u[r.additionalParameters]||u._unknown)}function a(e){function r(e){var r=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,n){var a=e.match(n.re);if(r){return r}if(!a){return null}return{format:n.format,value:a[1]}},null);if(r){return r}return{value:e}}function n(e){var n,a,t,u,i,o,l,f,s,c,p,d;d="<no params>";n="[^\\]\\[]";p="("+n+"+?):("+n+"*)(.*)";c="\\["+p+"\\]";s=d+"|"+c+"|"+p;f=new RegExp("^"+s+"$");i={success:false,name:null,value:{}};l=e.match(f);if(!l){return i}o=l.shift();while(l.length>0){u=l.shift();t=l.shift();a=l.shift();if(u){i.name=u;if(t){i.value.filter=r(t)}if(a){i.value.defaultValue=r(a.replace(/\[(.+)\]/,"$1"))}i.value.required=o.charAt(0)!=="["}}i.success=true;return i}function a(e){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(r,n,a,t){if(r){return r}var u=Object.keys(n)[0];if(e===u){return n[u]}return null},null)}function t(e){var r=[];e.split(":").reduce(function(e,n,a,t){var u,i,o;if(a===0){return n}if(a<t.length-1){o=n.split(",");if(o.length>1){i=o.pop();u=o.join(",")}else{return e+":"+n}}else{u=n}r.push([e,u].join(":"));return i},"");return r}var u={parameters:{}};var i=e.substr(e.length-3,3);var o=!!i.match(/<[?o+-]>/);var l=e;if(o){l=e.substr(0,e.length-3)}var f=t(l);f.forEach(function(r){var a=n(r);if(!a.success){throw new Error("Cannot parse parameters from "+e)}if(a.name){u.parameters[a.name]=a.value}});if(o){var s=a(i);if(s){u.additionalParameters=a(i)}}else{u.additionalParameters="ignored"}return u}return{formatInboundSignature:n,parseInboundSignature:a,parseInbound:r,formatInbound:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundIndex", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,n){"use strict";function t(){return this.index.all}function i(e){if(e==="*"||e===undefined){return this.index.all}return(this.index.segment[e]||[]).concat(this.index.always)}function a(e){return e.map(function(e){return this.index.tag[e]||[]},this).reduce(function(e,n){Array.prototype.push.apply(e,n.filter(function(e){return e.isAlreadyInUnion?false:e.isAlreadyInUnion=true}));return e},[]).map(function(e){delete e.isAlreadyInUnion;return e})}var r={getSegment:i,getAllInbounds:t,getSegmentByTags:a};function u(n,t){var i=e.get("signature.parameters.sap-tag.defaultValue.value",n);if(!i){return}if(!t.tag[i]){t.tag[i]=[]}t.tag[i].push(n)}function s(e,n){var t=e.semanticObject;if(t==="*"){n.always.push(e)}else{if(!n.segment[t]){n.segment[t]=[]}n.segment[t].push(e)}}function o(e){var t={all:e,segment:{},always:[],tag:{}};e.forEach(function(e,i){if(!e){n.warning("Void inbound provided to indexer","the inbound will be skipped");return}u(e,t);s(e,t)});r.index=t;return r}return{createIndex:o,private:{tagInbound:u,createIndex:o,segmentInbound:s}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/InboundProvider", ["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(n,e){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(n){this._fnRetrieveInbounds=n;this._oInboundsRetrievalPromise=null};t.prototype.getInbounds=function(n){if(n){return this._getSomeInbounds(n)}return this._getAllInbounds()};t.prototype._getSomeInbounds=function(t){var i=this;return new Promise(function(o,s){i._fnRetrieveInbounds(t).done(function(t){o(e.createIndex(t.concat(n.getInbounds())))}).fail(function(){s.apply(null,arguments)})})};t.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise}this._oInboundsRetrievalPromise=new Promise(function(i,o){t._fnRetrieveInbounds().done(function(t){i(e.createIndex((t||[]).concat(n.getInbounds())))}).fail(function(){o.apply(null,arguments)})});return this._oInboundsRetrievalPromise};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/ParameterMapping", ["sap/base/Log"],function(e){"use strict";function a(a){var t={},n=a.intentParamsPlusAllDefaults;Object.keys(n).sort().forEach(function(s){var i=r(s,a.inbound.signature,n[s]);if(Array.isArray(a.intentParamsPlusAllDefaults[s])){if(t[i]){e.error('collision of values during parameter mapping : "'+s+'" -> "'+i+'"')}else{t[i]=a.intentParamsPlusAllDefaults[s]}}});a.mappedIntentParamsPlusSimpleDefaults=t}function r(e,a,r){if(!r||!Array.isArray(r)){return e}if(a&&a.parameters&&a.parameters[e]&&a.parameters[e].renameTo){return a.parameters[e].renameTo}return e}return{mapParameterNamesAndRemoveObjects:a,getRenameParameterName:r}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/generic/app/navigation/service/SelectionVariant"],function(e,t,r){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";function n(e){if(!e){return Promise.resolve(null)}return sap.ushell.Container.getServiceAsync("AppState").then(function(t){return new Promise(function(r,a){t.getAppState(e).done(function(e){r(e)}).fail(function(e){a(e)})})})}function i(e,t,r,a,n){if(e.startupParametersModified){t.mappedIntentParamsPlusSimpleDefaults=a}if(e.defaultedParameterNamesModified){t.mappedDefaultedParamNames=n}if(e.selectionVariantModified){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var a=e.createEmptyAppState(undefined,true);a.setData({selectionVariant:r.toJSONObject()});return new Promise(function(e,r){a.save().done(function(){t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[a.getKey()];e(t)}).fail(function(e){r(e)})})})}return Promise.resolve(t)}function o(e){var t=e.type;switch(t){case"merge":case"split":return t+" - source: "+e.source+" & target: "+e.target;case"delete":return t+" - target: "+e.target;default:return""}}function s(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].Low}return undefined}function u(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].High}return undefined}function l(e,t){if(t[e]){return t[e][0]}return undefined}function f(e,t,r){var a=e.source[0],n=e.source[1],i=s(a,t),o=s(n,t),u=l(a,r),f=l(n,r),d,p,c=e.target;function m(e,t){if(t===undefined||e===t){return e}return undefined}if(i&&o){d=m(i,u);p=m(o,f)}else if(u&&f){d=m(u,i);p=m(f,o)}if(d&&p&&!t.getSelectOption(c)&&!r.hasOwnProperty(c)){t.addSelectOption(c,"I","BT",d,p);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false}}return{}}function d(t,r,a){var n=t.target,i=t.source;if(!r.getSelectOption(i)){e.error("Invalid split operation: "+i+" does not exist in selection variant");return false}if(r.getSelectOption(n[0])){e.error("Invalid split operation: "+n[0]+" already exists in selection variant");return false}if(r.getSelectOption(n[1])){e.error("Invalid split operation: "+n[1]+" already exists in selection variant");return false}if(a[n[0]]){e.error("Invalid split operation: "+n[0]+" already exists in startup parameters");return false}if(a[n[1]]){e.error("Invalid split operation: "+n[1]+" already exists in startup parameters");return false}return true}function p(e,t,r){var a=e.target,n=e.source,i=d(e,t,r);if(i){var o=s(n,t),l=u(n,t);t.addSelectOption(a[0],"I","EQ",o,null);r[a[0]]=[o];t.addSelectOption(a[1],"I","EQ",l||o,null);r[a[1]]=[l||o];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false}}return{}}function c(t,r,a,n){var i=t.target,o={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var s=0;s<i.length;s++){var u=i[s];if(u==="sap-xapp-state"){e.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue}if(r.getParameter(u)){r.removeParameter(u);o.selectionVariantModified=true}if(r.getSelectOption(u)){r.removeSelectOption(u);o.selectionVariantModified=true}if(a[u]){delete a[u];o.startupParametersModified=true}var l=n.indexOf(u);if(l>-1){n.splice(l,1);o.defaultedParameterNamesModified=true}}return o}function m(t){var r;if(t===""){return[]}try{r=JSON.parse(t)}catch(t){e.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[]}if(!Array.isArray(r)){e.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[]}return r}function g(t){if(t.length===0){return null}var r={split:true,merge:true,delete:true};var a=t.filter(function(e){return!r[e.type]});if(a.length>0){e.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+a.join(", "));return null}var n=t.some(function(e){return e.type==="split"&&e.target[0]===e.target[1]});if(n){e.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null}var i=t.some(function(e){if(e.type==="split"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.source!=="string"||!Array.isArray(e.target)||Object.keys(e).length!==3||Object.keys(e.target).length!==2}if(e.type==="merge"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.target!=="string"||!Array.isArray(e.source)||Object.keys(e).length!==3||Object.keys(e.source).length!==2}if(e.type==="delete"){return!e.hasOwnProperty("target")||!Array.isArray(e.target)||Object.keys(e).length!==2}});if(i){e.error("Invalid operation: one or more operations are specified in an incorrect format.");return null}return t}function v(e){var t=m(e);return g(t)}function y(t,r,n,i){var s=e.getLevel()>=e.Level.DEBUG?[]:null,u={selectionVariantModified:false,startupParametersModified:false};r.forEach(function(r){var a={};switch(r.type){case"split":a=p(r,t,n);break;case"merge":a=f(r,t,n);break;case"delete":a=c(r,t,n,i);break;default:e.error("Invalid operation: "+r.type+" prelaunch operation type is not supported")}if(s){var l=Object.keys(a).length!==0?"✅":"❌";s.push(l+" "+o(r))}if(Object.keys(a).length===0){e.warning("Cannot execute "+o(r))}u.selectionVariantModified=u.selectionVariantModified||a.selectionVariantModified;u.startupParametersModified=u.startupParametersModified||a.startupParametersModified;u.defaultedParameterNamesModified=u.defaultedParameterNamesModified||a.defaultedParameterNamesModified});if(s){e.debug(a+"\n"+s.join("\n"))}return u}function P(e,a){if(!a){return Promise.resolve(e)}var o=e.mappedIntentParamsPlusSimpleDefaults,s=e.mappedDefaultedParamNames,u=o["sap-xapp-state"]&&o["sap-xapp-state"][0],l=v(a);if(!l||l.length===0){return Promise.resolve(e)}return n(u).then(function(a){var n=a?a.getData():{},u=t({},o),f=t([],s),d;if(n.selectionVariant){d=new r(JSON.stringify(n.selectionVariant))}else{d=new r}var p=y(d,l,u,f);return i(p,e,d,u,f)})}return{executePrelaunchOperations:P,parseAndValidateOperations:v}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Search", ["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,r,n,a,i,jQuery){"use strict";var u=[undefined,"GUI","WDA","UI5"];function s(e,t){var r=e.inbound.resolutionResult;if(!r){return""}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(e){if(t){return r.hasOwnProperty(e)?e+":"+r[e]:""}return r.hasOwnProperty(e)?r[e]:""}).join("")}function o(e){return e.sort(function(e,t){if((e["sap-priority"]||0)-(t["sap-priority"]||0)!==0){return-((e["sap-priority"]||0)-(t["sap-priority"]||0))}if(e.priorityString<t.priorityString){return 1}if(e.priorityString>t.priorityString){return-1}var r=s(e);var n=s(t);if(r<n){return 1}else if(r>n){return-1}return 0})}function l(e,t){var r;if(e&&e["sap-priority"]&&e["sap-priority"][0]){r=parseInt(e["sap-priority"][0],10);if(!isNaN(r)){t["sap-priority"]=r}}return}function f(e,t,r,n){var a;if(!t){return true}if(!e&&e!==""){return false}a=t.value;if(t.format==="reference"){if(/UserDefault\.extended\./.test(a)){i.error("Illegal inbound: extended user default '"+a+"' used as filter");return false}if(r.hasOwnProperty(a)){return e===r[a]}n[a]=true;return true}if(t.format==="value"||t.format==="plain"||t.format===undefined){return e===t.value}else if(t.format==="regexp"){return!!e.match("^"+t.value+"$")}i.error("Illegal oFilter format");return false}function c(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.ui"]&&e.inbound.resolutionResult["sap.ui"].technology}function d(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult.appId}function p(e,t,r,n,a){var i={},u={};Object.keys(e).forEach(function(t){if(t!=="sap-ushell-defaultedParameterNames"){i[t]=e[t]}});if(!t){return i}Object.keys(t).forEach(function(e){var a=t[e],s,o=false;if(!i[e]&&a.hasOwnProperty("defaultValue")){if(a.defaultValue.format&&a.defaultValue.format==="reference"){s=a.defaultValue.value;if(r.hasOwnProperty(s)){if(typeof r[s]==="string"){i[e]=[r[s]];o=true}else if(typeof r[s]==="object"){i[e]=r[s];o=true}}else{i[e]=[a.defaultValue];n.push(a.defaultValue.value)}}else{i[e]=[a.defaultValue.value];o=true}if(o){u[e]=true}}});Object.keys(u).sort().forEach(function(e){a.push(e)});return i}function m(e,t){e.resolutionResult={contentProviderId:t.contentProviderId};if(t&&t.resolutionResult&&t.resolutionResult.hasOwnProperty("sap.platform.runtime")){e.resolutionResult["sap.platform.runtime"]=t.resolutionResult["sap.platform.runtime"]}Object.keys(e.intentParamsPlusAllDefaults).slice(0).forEach(function(t){if(!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!e.resolutionResult.oNewAppStateMembers){e.resolutionResult.oNewAppStateMembers={}}e.resolutionResult.oNewAppStateMembers[t]=e.intentParamsPlusAllDefaults[t]}})}function h(e,t){e.forEach(function(e){t[e]=true})}function v(e){var t=e.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var r=e.defaultedParamNames&&e.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0;if(t&&c(e)===t){return r?1:2}return 0}function P(e){var t=e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(t&&t===d(e)){return 1}return 0}function g(e,t){function r(e){var t="000"+e;return t.substr(t.length-3)}return["AIDM="+P(e),"CURCP="+(t.isCurrentContentProvider?"1":"0"),e.genericSO?"g":"x","TECM="+v(e),"MTCH="+r(t.countMatchingParams),"MREQ="+r(t.countMatchingRequiredParams),"NFIL="+r(t.countMatchingFilterParams),"NDEF="+r(t.countDefaultedParams),"POT="+r(t.countPotentiallyMatchingParams),"RFRE="+r(999-t.countFreeInboundParams),"TECP="+y(e)].join(" ")}function y(e){var t=c(e);var r=u.indexOf(t);return Math.max(0,r)}function b(e,t){var r=false;if(e.signature.additionalParameters==="allowed"||e.signature.additionalParameters==="ignored"){return true}if(e.signature.additionalParameters==="notallowed"||e.signature.additionalParameters===undefined){r=Object.keys(t).every(function(t){return!(!e.signature.parameters[t]&&t.indexOf("sap-")!==0)})}else{i.error("Unexpected value of inbound for signature.additionalParameters")}return r}function R(e,t,r,a,i){function u(e,t,r){var a=n.formatInbound(r);e[a]=t.noMatchReason+(t.noMatchDebug?"| DEBUG: "+t.noMatchDebug:"")}var s=a?a():(new jQuery.Deferred).resolve(null).promise();return s.then(function(n){var a=t.reduce(function(t,a){var s=a.contentProviderId||"";var o=r[s]||{};if(!t.missingReferences[s]){t.missingReferences[s]={}}var l=M(e,a,o,t.missingReferences[s],n?n[s]:null);if(l.matches){t.matchResults.push(l)}else if(i){u(t.noMatchReasons,l,a)}return t},{matchResults:[],noMatchReasons:{},missingReferences:{}});return jQuery.when(a)})}function O(e,t,r,n,a,i){var u=Object.keys(e).every(function(r){var n=t[r],u=n&&n[0],s=e[r];if(s.required&&(u===null||u===undefined)){return false}if(s.filter){if(!f(u,s.filter,a,i)){return false}}return true});return u}function I(e,t,r,n,i){var u=e.signature.parameters,s=0,o=0,l=0,f=0,c=false,d={};function p(e){return!a.isTechnicalParameter(e)}var m=Object.keys(r).filter(p);var h=n.filter(p);Object.keys(u).filter(p).forEach(function(e){var n=t[e],a=n&&n[0],i=u[e],c=r.hasOwnProperty(e);if(c){++s;if(i.filter){++l}if(i.required){++o}}else if(a===null||a===undefined){++f}});if(i){d.countPotentiallyMatchingParams=m.filter(function(e){return u.hasOwnProperty(e)}).length}else{d.countPotentiallyMatchingParams=m.length}if(r&&r["sap-app-origin-hint"]&&(r["sap-app-origin-hint"][0]||r["sap-app-origin-hint"][0]==="")){var v=r["sap-app-origin-hint"][0];c=v===e.contentProviderId}d.countDefaultedParams=h.length;d.countMatchingParams=s;d.countMatchingRequiredParams=o;d.countMatchingFilterParams=l;d.countFreeInboundParams=f;d.isCurrentContentProvider=c;return d}function M(e,a,i,u,s){var o={inbound:a};function f(e,t,r){e.matches=false;e.noMatchReason=t;e.noMatchDebug=r;return e}function d(t){t.matches=true;t.matchesVirtualInbound=r.isVirtualInbound(a);t.parsedIntent=e;return t}var v=a.semanticObject==="*";o.genericSO=v;var P=e.semanticObject===undefined||e.semanticObject===a.semanticObject||v;if(!P){return f(o,'Semantic object "'+e.semanticObject+'" did not match')}var y=e.action===undefined||e.action===a.action;if(!y){return f(o,'Action "'+e.action+'" did not match')}var R=!a.deviceTypes||e.formFactor===undefined||a.deviceTypes[e.formFactor];if(!R){return f(o,'Form factor "'+e.formFactor+'" did not match',"Inbound: ["+Object.keys(a.deviceTypes).filter(function(e){return!!a.deviceTypes[e]}).join(", ")+"]")}var M=e.params&&e.params["sap-ui-tech-hint"]&&e.params["sap-ui-tech-hint"][0];if(e.treatTechHintAsFilter&&M){var D=c({inbound:a});if(D!==M){return f(o,'Tech Hint as filter "'+M+'" did not match',"Inbound: ["+D+"]")}}var j=[],A=[],w=e.params||{};var S=p(w,a.signature&&a.signature.parameters,i,j,A);var T=S["sap-system"]&&S["sap-system"][0],F=S["sap-app-origin"]&&S["sap-app-origin"][0],C=a.contentProviderId;if(F&&F!==C){return f(o,'Contetn provider as filter "'+F+'" did not match',"Inbound: ["+C+"]")}if(T&&typeof C==="string"&&s&&!s[T]){return f(o,'Data origin "'+T+'" is not compatible with the content provider "'+C+'"',"Inbound: ["+Object.keys(s).join(", ")+"]")}o.intentParamsPlusAllDefaults=S;o.defaultedParamNames=A;l(S,o);var N=O(a.signature.parameters,S,w,A,i,u);if(!N){return f(o,"Inbound parameter signature did not match",n.formatInboundSignature(a.signature))}var x=t.constructParameterDominatorMap(a.signature.parameters);var E=t.findDominatedDefaultParameters(S,A,x);var k=A.filter(function(e){return!E[e]});var V=t.filterObjectKeys(S,function(e){return!E[e]});if(!b(a,V)){return f(o,"Additional parameters not allowed",n.formatInboundSignature(a.signature))}var U=a.signature.additionalParameters==="ignored";if(U){t.filterObjectKeys(V,function(e){if(e.indexOf("sap-")===0){return true}if(a.signature.parameters.hasOwnProperty(e)){return true}return false},true)}var q=I(a,S,w,A,U);m(o,a);o.intentParamsPlusAllDefaults=V;o.defaultedParamNames=k;o.priorityString=g(o,q);h(j,u);return d(o)}return{match:R,matchOne:M,sortMatchingResultsDeterministic:o,matchesFilter:f,checkAdditionalParameters:b,addDefaultParameterValues:p,extractSapPriority:l,serializeMatchingResult:s}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/StagedLogger", ["sap/base/Log","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(e,n){"use strict";var o={};function r(e){var n;var r;var t=e();if(!t.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.")}n=t.logId;if(o[n]){throw new Error("'cannot call #begin twice with same log id: '"+n+"'")}else{o[n]={}}r=o[n];r.title=t.title||null;r.moduleName=t.moduleName||null;var l=function(e,n){if(n===1){return e}return l(e,n-1)+e};r.stages=t.stages.map(function(e){return[e,l("-",e.length)]});return n}function t(e){var n,r,t,l,i,a,g,u;u=e();if(!u.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}n=u.logId;a=u.stage;i=u.prefix;l=u.lines;t=u.line;g=u.number;if(!l&&t&&i){t=i+" "+t}r=o[n].stages[a-1];if(t){r.push(t)}if(l){if(i){i=(t?" ":"")+i}var d=l.map(function(e,n){return(g?n+1:"")+(i?i+" ":"")+e});r.push.apply(r,d)}}function l(n){var r,t,l;r=n();if(!r.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}l=r.logId;t=o[l];if(typeof t!=="object"){throw new Error("Logger .end was called on an already ended logger")}var i=t.stages.map(function(e){return e.join("\n")}).join("\n\n");e.debug("[REPORT #"+l+"] "+t.title,"\n"+i+"\n",t.moduleName);delete o[l]}function i(){return o}return{begin:function(){if(e.getLevel()>=e.Level.DEBUG){r.apply(null,arguments)}},log:function(){if(e.getLevel()>=e.Level.DEBUG){t.apply(null,arguments)}},end:function(){if(e.getLevel()>=e.Level.DEBUG){l.apply(null,arguments)}},_getLogs:i}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/SystemContext", ["sap/base/util/ObjectPath","sap/ui/thirdparty/URI"],function(t,r){"use strict";var e={};e._getProtocol=function(){return new r(window.location.toString()).protocol()};e.createSystemContextFromSystemAlias=function(e){return{id:e.id,label:e.label||e.id,getFullyQualifiedXhrUrl:function(i){var n=new r(i).protocol();if(n==="http"||n==="https"){return i}var o=this._getProtocol();var a="";if(o==="https"){a=t.get("https.xhr.pathPrefix",e)||""}else if(o==="http"){a=t.get("http.xhr.pathPrefix",e)||""}if(a){if(i.indexOf("dynamic_dest")>-1){return i}return r.joinPaths(a,i).path()}return i}.bind(this),getProperty:function(r){var i=t.get("properties",e)||{};return i[r]}}};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/Utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e,r,t){var n={};r.forEach(function(a){var i=t[a].dominatedBy;var u=i.some(function(t){var n=!!e[t];var i=t!==a;var u=r.indexOf(t)===-1;return n&&u&&i});if(u){n[a]=true}});return n}function t(e){var r={},t={};Object.keys(e).forEach(function(n){var a=e[n].renameTo||n;t[a]=t[a]||{renameTo:a,dominatedBy:[]};t[a].dominatedBy.push(n);t[a].dominatedBy=t[a].dominatedBy.sort();r[n]=t[a]});return r}function n(r,t,n){var a=n?r:e({},r);Object.keys(a).forEach(function(e){if(t(e)===false){delete a[e]}});return a}function a(e,r){var t;t=Object.keys(e).reduce(function(t,n){var a=e[n];if(r(n,a)){t[n]=a}return t},{});return t}function i(e,r){return r.every(function(r){var t,n,a;a=r.name;n=r.options;t=e[a];return Object.keys(n).every(function(e){var r=n[e];if(e==="required"){return!!(t||{}).required===r}return false})})}function u(e,r){var t={};e.forEach(function(e){if(r[e]){t[e]=r[e];delete r[e]}});return t}return{inboundSignatureMeetsParameterOptions:i,filterObjectKeys:n,filterObject:a,constructParameterDominatorMap:t,findDominatedDefaultParameters:r,extractParameters:u}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds", [],function(){"use strict";var e={};var a=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.searchComponent",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.searchComponent",url:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/search/searchComponent"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:false,phone:false},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"URL",ui5ComponentName:"nw.core.flp.pagecomposer.conf",additionalInformation:"SAPUI5.Component=nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man",applicationDependencies:{manifest:"/sap/bc/lrep/content/apps/nw.core.flp.pagecomposer.conf/app/sap/sui_paget_man/manifest.appdescr",name:"nw.core.flp.pagecomposer.conf",self:{name:"nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man"},asyncHints:{libs:[{name:"nw.core.flp.transport.cust",url:{final:false,url:"/sap/bc/ui5_ui5/sap/sui_tr_cust"}}]}},async:true,loadDefaultDependencies:false}}];e.isVirtualInbound=function(e){return a.some(function(a){return a===e})};e.getInbounds=function(){return a};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing", ["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/navigationMode","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/generic/app/navigation/service/SelectionVariant","sap/base/Log"],function(e,t,a,n,r,jQuery,i,s,o,u,l){"use strict";function p(e,a){var n=new jQuery.Deferred,r,i=e.resolutionResult,s=e.inbound&&(e.inbound.signature||{}),o=c(i)||s.additionalParameters==="ignored"||b(e);if(!o){m(n,e);return n.promise()}var u=e.intentParamsPlusAllDefaults["sap-xapp-state"]&&e.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(u){v(a,u).then(h).then(function(o){if(c(i)){var u=t.constructParameterDominatorMap(s.parameters);Object.keys(i.oNewAppStateMembers).forEach(function(e){var t=u[e].dominatedBy;if(g(o,t)){delete i.oNewAppStateMembers[e]}})}var l=s.additionalParameters==="ignored";if(!c(i)&&!b(e)&&!l){m(n,e);return}r=a.createEmptyAppState(undefined,true);if(r){r.setData(o);f(r,e,n)}},function(){delete i.oNewAppStateMembers;m(n,e);return});return n.promise()}if(c(i)){var l=a.createEmptyAppState(undefined,true);f(l,e,n);return n.promise()}m(n,e);return n.promise()}function f(e,t,a){var n=e.getData()||{},r,i={},s=t.inbound.signature,o=t.resolutionResult;if(n.selectionVariant){r=new u(JSON.stringify(n.selectionVariant))}else{r=new u}if(c(o)){Object.keys(o.oNewAppStateMembers).forEach(function(e){r.massAddSelectOption(e,o.oNewAppStateMembers[e].Ranges)})}var l=s.additionalParameters==="ignored";r=P(r,i,s.parameters,l);if(r.getParameterNames().length!==0||r.getSelectOptionsPropertyNames().length!==0||i.deleted){n.selectionVariant=r.toJSONObject()}if(!i.changed&&!i.deleted&&!c(o)){m(a,t);return}e.setData(n);e.save().done(function(){t.intentParamsPlusAllDefaults["sap-xapp-state"]=[e.getKey()];t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[e.getKey()];m(a,t)})}function m(t,s){var o;A(s);O(s);o=a.compute(i.get("inbound.resolutionResult.applicationType",s),(s.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(s.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(n.getCurrentApplication()||{}).applicationType,r.last("/core/navigation/enableInPlaceForClassicUIs"));e.shallowMergeObject(s.resolutionResult,o);delete s.resolutionResult.oNewAppStateMembers;t.resolve(s)}function c(e){return e.oNewAppStateMembers&&!s(e.oNewAppStateMembers)}function d(e,t){return Array.isArray(e)&&e.some(function(e){return t.indexOf(e)!==-1})}function g(e,t){if(e&&e.selectionVariant){var a=new u(JSON.stringify(e.selectionVariant)),n=a.getSelectOptionsPropertyNames()||[],r=a.getParameterNames()||[];if(d(n,t)||d(r,t)){return true}}return false}function P(e,t,a,n){var r=new u,i=e.getParameterNames()||[],s=e.getSelectOptionsPropertyNames()||[],o,p;i.forEach(function(i){o=e.getParameter(i);if(n&&!a[i]){t.deleted=true;return}if(a[i]&&a[i].renameTo){if(r.getParameter(a[i].renameTo)===undefined&&r.getSelectOption(a[i].renameTo)===undefined){r.addParameter(a[i].renameTo,o);t.changed=true}else{l.error("renaming of appstate creates duplicates "+i+"->"+a[i].renameTo)}}else if(r.getParameter(i)===undefined&&r.getSelectOption(i)===undefined){r.addParameter(i,o)}});s.forEach(function(i){p=e.getSelectOption(i);if(n&&!a[i]){t.deleted=true;return}if(a[i]&&a[i].renameTo){if(r.getSelectOption(a[i].renameTo)===undefined&&r.getParameter(a[i].renameTo)===undefined){r.massAddSelectOption(a[i].renameTo,p);t.changed=true}else{l.error("renaming of appstate creates duplicates "+i+"->"+a[i].renameTo)}}else if(r.getSelectOption(i)===undefined&&r.getParameter(i)===undefined){r.massAddSelectOption(i,p)}});i.forEach(function(t){e.removeParameter(t)});s.forEach(function(t){e.removeSelectOption(t)});r.getParameterNames().forEach(function(t){e.addParameter(t,r.getParameter(t))});r.getSelectOptionsPropertyNames().forEach(function(t){e.massAddSelectOption(t,r.getSelectOption(t))});return e}function S(e){if(e===undefined||o(e)){return false}return true}function b(e){return e.inbound&&e.inbound.signature&&e.inbound.signature.parameters&&Object.keys(e.inbound.signature.parameters).some(function(t){return!!e.inbound.signature.parameters[t].renameTo})}function A(e){e.defaultedParamNames=e.defaultedParamNames.filter(function(t){if(e.intentParamsPlusAllDefaults[t]&&!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!(e.resolutionResult.oNewAppStateMembers&&e.resolutionResult.oNewAppStateMembers[t])){return false}}return true})}function O(e){var t=i.get("inbound.signature.parameters",e)||{},a={};e.defaultedParamNames.forEach(function(e){var n=t[e]&&t[e].renameTo||e;if(a[n]){l.error("renaming of defaultedParamNames creates duplicates"+e+"->"+n)}else{a[n]=true}});e.mappedDefaultedParamNames=Object.keys(a).sort()}function h(e){if(S(e)){return Promise.reject()}return Promise.resolve(e)}function v(e,t){return new Promise(function(a,n){e.getAppState(t).done(function(e){a(e.getData())}).fail(function(e){n(e)})})}return{mixAppStateIntoResolutionResultAndRename:p,_hasRenameTo:b}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/PersonalizationProcessor", ["sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/deepClone"],function(jQuery,e,r,i,o){"use strict";function t(){}t.prototype._getItemIndex=function(e,r){var i;for(i=0;i<e.length;i++){if(e[i].id===r){break}}i=i>=e.length?-1:i;return i};t.prototype._applyRenameGroup=function(e,r,i){var o,t=false;if(!r){return false}if(e&&i&&i.groups&&i.groups[e]){o=i.groups[e];if(o.identification&&o.identification.title){i.groups[e].identification.title=r;t=true}}return t};t.prototype._applyGroupVisibility=function(e,r,i){var o=false;if(r===undefined){return false}if(e&&i&&i.groups&&i.groups[e]){i.groups[e].identification.isVisible=r;o=true}return o};t.prototype.mixinPersonalization=function(r,i){var o=new jQuery.Deferred,t=this;if(!i||e(i)){return o.resolve(r).promise()}if(i.groups){Object.keys(i.groups).forEach(function(e){var o=i.groups[e];if(r.groups[e]){if(o.identification){if(o.identification.title){t._applyRenameGroup(e,o.identification.title,r)}if(o.identification.hasOwnProperty("isVisible")&&o.identification.isVisible===false){t._applyGroupVisibility(e,false,r)}}}})}this._applyAddGroups(r,i);if(i.removedGroups&&Array.isArray(i.removedGroups)){i.removedGroups.forEach(function(e){t._applyRemoveGroup(r,e)})}this._applyMoveGroup(r,i);this._applyItemChanges(r,i);this._applyTileSettings(r,i);return o.resolve(r).promise()};t.prototype._applyAddGroups=function(e,r){var i=[];e.site=e.site||{};e.site.payload=e.site.payload||{};e.site.payload.groupsOrder=e.site.payload.groupsOrder||[];e.groups=e.groups||{};if(Array.isArray(r.groupOrder)){e.site.payload.groupsOrder.forEach(function(e){if(r.groupOrder.indexOf(e)===-1){if(r.removedGroups&&r.removedGroups.indexOf(e)===-1||!r.removedGroups){i.push(e)}}})}if(Array.isArray(r.groupOrder)&&r.addedGroups&&Object.keys(r.addedGroups).length>0){Object.keys(r.addedGroups).forEach(function(i){e.groups[i]=o(r.addedGroups[i],20);e.groups[i].payload.isPreset=false});e.site.payload.groupsOrder=r.groupOrder}i.forEach(function(r){e.site.payload.groupsOrder.push(r)})};t.prototype._checkRenameGroup=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.title!==i[e].identification.title){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.title=r[e].identification.title}}}return o};t.prototype._applyTileSettings=function(e,r){var i,o;if(!r.modifiedTiles){return}i=Object.keys(e.groups).map(function(e){return this[e]},e.groups);o=Object.keys(r.modifiedTiles).map(function(e){return this[e]},r.modifiedTiles);i.some(function(e){["tiles","links"].forEach(function(r){if(e.payload[r]){e.payload[r].some(function(e){var r;o.some(function(i,o){if(i.id===e.id){if(i.title!==undefined){e.title=i.title}if(i.subTitle!==undefined){e.subTitle=i.subTitle}if(i.info!==undefined){e.info=i.info}if(i.displayFormatHint!==undefined){e.displayFormatHint=i.displayFormatHint}r=o;return true}return false});if(r!==undefined){o.splice(r,1)}return o.length===0})}});return o.length===0})};t.prototype._checkGroupVisibility=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.isVisible!==i[e].identification.isVisible&&typeof r[e].identification.isVisible==="boolean"){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.isVisible=r[e].identification.isVisible}}}return o};t.prototype._addGroupToPersonalizationDelta=function(e,r,i){var o=false,t,a;if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&e.groups&&i&&e.groups[i]&&r){t=e.site.payload.groupsOrder;a=e.groups[i];r.addedGroups=r.addedGroups||{};r.addedGroups[i]={};r.addedGroups[i].identification=jQuery.extend({},a.identification);r.addedGroups[i].payload=jQuery.extend({},a.payload);r.addedGroups[i].payload.tiles=[];r.addedGroups[i].payload.links=[];r.groupOrder=t;o=true}return o};t.prototype.extractPersonalization=function(r,i){var o=new jQuery.Deferred,t,a={},s,p,n=this;if(r&&r.groups&&i&&i.groups){t=r.groups;s=i.groups;p=this._getExtractHelperObject(i,r,a);Object.keys(s).forEach(function(e){n._checkRemoveGroup(r,a,e);n._extractFromOriginalSiteOneGroup(i,p,e,"tiles");n._extractFromOriginalSiteOneGroup(i,p,e,"links")});Object.keys(t).forEach(function(e){if(s[e]){n._checkRenameGroup(e,t,s,a);n._checkGroupVisibility(e,t,s,a)}else{n._addGroupToPersonalizationDelta(r,a,e)}n._extractFromPersonalizedSiteOneGroup(r,p,e,"tiles");n._extractFromPersonalizedSiteOneGroup(r,p,e,"links")});this._checkMoveGroup(r,i,a);this._cleanupRemovedGroups(i,a);if(p.oPersonalizationDelta.movedTiles&&e(p.oPersonalizationDelta.movedTiles)){delete p.oPersonalizationDelta.movedTiles}if(p.oPersonalizationDelta.movedLinks&&e(p.oPersonalizationDelta.movedLinks)){delete p.oPersonalizationDelta.movedLinks}}if(i._version){a._version=i._version}return o.resolve(a).promise()};t.prototype._checkRemoveGroup=function(e,r,i){var o=false;if(e&&e.groups&&r&&i){if(!e.groups[i]){r.removedGroups=r.removedGroups||[];r.groupOrder=r.groupOrder||[];if(r.removedGroups.indexOf(i)===-1){r.removedGroups.push(i)}if(e.site&&e.site.payload&&e.site.payload.groupsOrder&&Array.isArray(e.site.payload.groupsOrder)){r.groupOrder=e.site.payload.groupsOrder.slice(0)}}o=true}return o};t.prototype._applyRemoveGroup=function(e,r){var i,o,t;if(e&&e.groups&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&r){i=e.groups;o=e.site.payload.groupsOrder;t=o.indexOf(r);if(!(t===-1)){o.splice(t,1);delete i[r];return true}}return false};t.prototype._checkMoveGroup=function(e,r,i){var o,t,a=false,s=false;if(e.site&&e.site.payload&&Array.isArray(e.site.payload.groupsOrder)&&r.site&&r.site.payload&&Array.isArray(r.site.payload.groupsOrder)){o=e.site.payload.groupsOrder;t=r.site.payload.groupsOrder;if(o.length===t.length){a=function(){var e=false,r;for(r=0;r<t.length;r++){if(t[r]!==o[r]){e=true;break}}return e}();if(a){i.groupOrder=o;s=true}}}return s};t.prototype._applyMoveGroup=function(e,r){var i=false;if(Array.isArray(r.groupOrder)){e.site=e.site||{};e.site.payload=e.site.payload||{};if(!Array.isArray(e.site.payload.groupsOrder)){e.site.payload.groupsOrder=[]}if(e.site.payload.groupsOrder.length===r.groupOrder.length){e.site.payload.groupsOrder=r.groupOrder;i=true}}return i};t.prototype._getHashedItemsFromSite=function(e){var r=null;if(e&&e.groups){if(Object.keys(e.groups).length>0){r={};Object.keys(e.groups).forEach(function(i){var o=e.groups[i],t;r[i]={};if(o.payload){["tiles","links"].forEach(function(e){r[i][e]={};if(Array.isArray(o.payload[e])){t=o.payload[e];t.forEach(function(o,t){var a;if(o&&o.id){a=o.id;r[i][e][a]={iIndex:t,sItemId:o}}})}})}})}}return r};t.prototype._getExtractHelperObject=function(e,r,i){var o=null;o={};o.oHashedItemsOriginal=this._getHashedItemsFromSite(e)||{};o.oHashedItemsPersonalized=this._getHashedItemsFromSite(r);o.oPersonalizationDelta=i;return o};t.prototype._extractFromOriginalSiteOneGroup=function(e,r,i,o){var t=false,a,s,p,n="movedTiles";o=o||"tiles";if(o!=="tiles"){n="movedLinks"}p=function(e,r){s[e]=s[e]?s[e]:{};s[e].fromGroup=r;s[e].toGroup=null};if(r&&r.oHashedItemsPersonalized&&r.oPersonalizationDelta&&e&&e.groups&&e.groups[i]&&e.groups[i].payload&&Array.isArray(e.groups[i].payload[o])){a=e.groups[i].payload[o];r.oPersonalizationDelta[n]=r.oPersonalizationDelta[n]?r.oPersonalizationDelta[n]:{};s=r.oPersonalizationDelta[n];if(r.oHashedItemsPersonalized[i]){a.forEach(function(e){if(!r.oHashedItemsPersonalized[i][o][e.id]){p(e.id,i)}});t=true}else{a.forEach(function(e){p(e.id,i)});t=true}}return t};t.prototype._extractPersonalizationDeltaForTile=function(r,o,t,a){var s=i.get(["oHashedItemsOriginal",t,a,r.id,"sItemId"],o);if(!s){return false}var p={};if(r.title!==s.title){p.title=r.title}if(r.subTitle!==s.subTitle){p.subTitle=r.subTitle}if(r.info!==s.info){p.info=r.info}if(r.displayFormatHint!==s.displayFormatHint&&!(r.displayFormatHint==="default"&&!s.displayFormatHint)){p.displayFormatHint=r.displayFormatHint}if(e(p)){return false}if(!o.oPersonalizationDelta.modifiedTiles){o.oPersonalizationDelta.modifiedTiles={}}var n=o.oPersonalizationDelta.modifiedTiles;p.id=r.id;n[r.id]=p;return true};t.prototype._extractFromPersonalizedSiteOneGroup=function(e,i,o,t){var a=false,s,p,n=false,l,u=this,d="movedTiles";t=t||"tiles";if(t!=="tiles"&&t!=="links"){return a}if(t!=="tiles"){d="movedLinks"}if(i&&i.oPersonalizationDelta&&e&&e.groups&&e.groups[o]&&e.groups[o].payload&&Array.isArray(e.groups[o].payload[t])){l=e.groups[o].payload[t];i.oPersonalizationDelta[d]=i.oPersonalizationDelta[d]?i.oPersonalizationDelta[d]:{};s=i.oPersonalizationDelta[d];p=[];l.forEach(function(e,a){if(!e){return}p.push(e.id);if(i.oHashedItemsOriginal[o]&&i.oHashedItemsOriginal[o][t][e.id]){if(s[e.id]){r.error("Extract personalization failed","The Tile ID "+e.id+" is not unique in the site","PersonalizationProcessor");delete s[e.id]}if(i.oHashedItemsOriginal[o][t][e.id].iIndex!==a){n=true}u._extractPersonalizationDeltaForTile(e,i,o,t)}else{n=true;if(s[e.id]){if(s[e.id].fromGroup&&s[e.id].fromGroup!==o){if(!s[e.id].toGroup){s[e.id].toGroup=o;u._extractPersonalizationDeltaForTile(e,i,s[e.id].fromGroup,t)}}}else{s[e.id]={};s[e.id].fromGroup=null;s[e.id].toGroup=o;s[e.id].item=e}}});if(n){i.oPersonalizationDelta.groups=i.oPersonalizationDelta.groups||{};i.oPersonalizationDelta.groups[o]=i.oPersonalizationDelta.groups[o]||{};i.oPersonalizationDelta.groups[o].payload=i.oPersonalizationDelta.groups[o].payload||{};if(t==="tiles"){i.oPersonalizationDelta.groups[o].payload.tileOrder=p}else{i.oPersonalizationDelta.groups[o].payload.linkOrder=p}}a=true}return a};t.prototype._cleanupRemovedGroups=function(e,r){var i,o;if(r.removedGroups&&r&&Array.isArray(r.removedGroups)&&r.removedGroups.length>0){r.removedGroups.forEach(function(t){if(e&&e.groups&&e.groups[t]&&e.groups[t].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(a){if(Array.isArray(e.groups[t].payload[a.sType])){i=e.groups[t].payload[a.sType];i.forEach(function(e){if(r[a.sPersonalizationDeltaType]){o=r[a.sPersonalizationDeltaType][e.id];if(o&&o.fromGroup&&o.fromGroup===t&&!o.toGroup){delete r[a.sPersonalizationDeltaType][e.id]}}})}})}})}};t.prototype._setItemOrderOnSiteCollection=function(e,r){var i=true,o=e.length,t,a={},s,p,n,l;if(!Array.isArray(e)||!Array.isArray(e)||e.length!==r.length){return false}t=e.splice(0,e.length);for(s=0;s<r.length;s++){n=r[s];p=t.shift();if(p&&n===p.id){e.push(p)}else if(a[n]){e.push(a[n]);delete a[n];if(p){a[p.id]=p}}else if(p){a[p.id]=p;l=false;while(t.length>0){p=t.shift();if(n===p.id){e.push(p);l=true;break}else{a[p.id]=p}}if(!l){i=false}}}if(e.length!==o){i=false}return i};t.prototype._setItemOrderOnSiteGroupForItemType=function(e,r,i){var o=true,t,a;if(i==="tiles"||i==="links"){a=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(r.payload&&Array.isArray(r.payload[a])&&r.payload[a].length>0){if(e.payload&&Array.isArray(e.payload[i])&&e.payload[i].length>0){t=this._setItemOrderOnSiteCollection(e.payload[i],r.payload[a]);if(!t){o=false}}else{o=false}}return o};t.prototype._setItemOrderOnSite=function(e,r){var i=true,o,t=this;if(e.groups&&r.groups){Object.keys(r.groups).forEach(function(a){if(r.groups[a]&&e.groups[a]){o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"tiles");if(!o){i=false}o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"links");if(!o){i=false}}})}return i};t.prototype._applyMoveItemsWithoutOrder=function(r,i,o){var t=true,a,s,p="tileOrder",n,l,u,d=[],f=this;function y(e,t){var a=true;if(r.groups[t]&&r.groups[t].payload&&i.groups&&i.groups[t]&&i.groups[t].payload&&Array.isArray(i.groups[t].payload[p])&&i.groups[t].payload[p].length>0){if(!Array.isArray(r.groups[t].payload[o])){r.groups[t].payload[o]=[]}r.groups[t].payload[o].push(e)}else{a=false}return a}if(o==="tiles"||o==="links"){s=o==="tiles"?"movedTiles":"movedLinks";p=o==="tiles"?"tileOrder":"linkOrder"}else{return false}if(!r||!r.groups||!r.site||!r.site.payload||!Array.isArray(r.site.payload.groupsOrder)||!i){return false}if(i[s]){Object.keys(i[s]).forEach(function(p){n=i[s][p];if(n.fromGroup){if(n.toGroup){if(n.fromGroup!==n.toGroup){if(r.groups[n.fromGroup]&&r.groups[n.fromGroup].payload&&Array.isArray(r.groups[n.fromGroup].payload[o])){d=r.groups[n.fromGroup].payload[o];l=f._getItemIndex(d,p);if(l>=0){u=d.splice(l,1);a=y(u[0],n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}}else{t=false}}else if(r.groups[n.fromGroup]&&r.groups[n.fromGroup].payload&&Array.isArray(r.groups[n.fromGroup].payload[o])){d=r.groups[n.fromGroup].payload[o];l=f._getItemIndex(d,p);if(l>=0){d.splice(l,1)}else{t=false}}else{t=false}}else if(n.toGroup){if(n.item&&!e(n.item)){a=y(n.item,n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}})}return t};t.prototype._applyItemChanges=function(e,r){var i=true,o;o=this._applyMoveItemsWithoutOrder(e,r,"tiles");if(!o){i=false}o=this._applyMoveItemsWithoutOrder(e,r,"links");if(!o){i=false}if(r.groups){o=this._setItemOrderOnSite(e,r);if(!o){i=false}}return i};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CommonDataModel/SiteConverter", ["sap/base/Log"],function(e){"use strict";var i=function(){};i.prototype.convertTo=function(i,t){if(t._version==="3.0.0"||t.identification&&t.payload){switch(i){case"3.0.0":return this._convertPageToSite(t);case"3.1.0":return this._convertSiteToPage(t);default:e.error("The received version for the site/page conversion is not supported");return{}}}else{e.error("The site converter did not receive a correct page/site object.");return{}}};i.prototype._convertPageToSite=function(e){var i={groups:{},_version:"3.0.0",site:{identification:e.identification,payload:{groupsOrder:e.payload.layout.sectionOrder}}};var t=e.payload.sections;for(var o=0;o<Object.keys(t).length;o++){var r=Object.keys(t)[o];var a=e.payload.sections[r];i.groups[r]={identification:{id:a.id,title:a.title},payload:{tiles:this._convertVizPayloadObjectToArray(a)}};if("visible"in a){i.groups[r].identification.isVisible=a.visible}if("preset"in a){i.groups[r].payload.isPreset=a.preset}if("locked"in a){i.groups[r].payload.locked=a.locked}if("default"in a){i.groups[r].payload.isDefaultGroup=a.default}}return i};i.prototype._convertSiteToPage=function(e){var i={identification:e.site.identification,payload:{layout:{sectionOrder:e.site.payload.groupsOrder},sections:{}}};var t=e.groups;var o;var r;var a;for(var n=0;n<Object.keys(t).length;n++){o=Object.keys(t)[n];r=e.groups[o];a=this._createVizPayloadObject(r.payload.tiles);i.payload.sections[o]={id:r.identification.id,title:r.identification.title,layout:a.layout,viz:a.viz};var s=i.payload.sections[o];if("isVisible"in r.identification){s.visible=r.identification.isVisible}if("isPreset"in r.payload){s.preset=r.payload.isPreset}if("locked"in r.payload){s.locked=r.payload.locked}if("isDefaultGroup"in r.payload){s.default=r.payload.isDefaultGroup}}return i};i.prototype._createVizPayloadObject=function(e){var i=[];var t={};var o=e.reduce(function(e,t){i.push(t.id);e[t.id]=t;return e},{});t.layout={vizOrder:i};t.viz=o;return t};i.prototype._convertVizPayloadObjectToArray=function(e){return e.layout.vizOrder.reduce(function(i,t){i.push(e.viz[t]);return i},[])};return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig", ["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(e,t,r){"use strict";var a={};var n=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var t=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/model/currentState/showRecentActivity"),a=t&&e.last("/core/home/featuredGroup/frequentCard"),n=t&&e.last("/core/home/featuredGroup/recentCard");return r.getMockAdapterConfig(a,n)}}];a._getConfigAdapters=function(){n.forEach(function(e){e.system=new t(e.system)});return n};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig", ["sap/ushell/resources"],function(e){"use strict";var t={},a=e.i18n.getText("featuredGroup.title"),i=e.i18n.getText("recentActivities"),r=e.i18n.getText("frequentActivities"),n=e.i18n.getText("top",4),s={_version:"3.0.0",site:{identification:{version:"3.0",id:"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce",title:"Featured Group",description:"Sample site for featured group cards"},payload:{groupsOrder:["FeaturedGroupCards"]}},catalogs:{},vizTypes:{"sap.ushell.Card":{"sap.app":{id:"sap.ushell.Card",type:"card",applicationVersion:{version:"1.0.0"}},"sap.ui":{deviceTypes:{desktop:true,tablet:true,phone:true}}}},visualizations:{FrequentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"FrequentCard",type:"card"},"sap.ui5":{services:{CardNavigationService:{factoryName:"sap.ushell.ui5service.CardNavigation"},CardUserFrequentsService:{factoryName:"sap.ushell.ui5service.CardUserFrequents"}}},"sap.card":{type:"List",header:{title:r,status:{text:n},actions:[{type:"Navigation",service:"CardNavigationService",parameters:{openUI:"FrequentActivities"}}]},content:{maxItems:4,data:{service:{name:"CardUserFrequentsService"}},item:{title:{value:"{Name}"},description:{value:"{Description}"},highlight:"{Highlight}",icon:{src:"{Icon}",label:"icon"},actions:[{type:"Navigation",service:"CardNavigationService",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}},RecentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"RecentCard",type:"card"},"sap.ui5":{services:{CardNavigationService:{factoryName:"sap.ushell.ui5service.CardNavigation"},CardUserRecentsService:{factoryName:"sap.ushell.ui5service.CardUserRecents"}}},"sap.card":{type:"List",header:{title:i,status:{text:n},actions:[{type:"Navigation",service:"CardNavigationService",parameters:{openUI:"RecentActivities"}}]},content:{maxItems:4,data:{service:{name:"CardUserRecentsService"}},item:{title:{label:"{{title_label}}",value:"{Name}"},description:{label:"{{description_label}}",value:"{Description}"},icon:{src:"{Icon}",label:"icon"},highlight:"{Highlight}",actions:[{type:"Navigation",service:"CardNavigationService",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}}},applications:{},groups:{FeaturedGroupCards:{identification:{id:"FeaturedGroupCards",title:a},contentProvider:"featured",isFeatured:true,payload:{locked:true,tiles:[{id:"frequentCard",vizId:"FrequentCard",contentProvider:"featured"},{id:"recentCard",vizId:"RecentCard",contentProvider:"featured"}],links:[],groups:[]}}},systemAliases:{}};t.getMockAdapterConfig=function(e,t){var a=s.groups.FeaturedGroupCards.payload.tiles,i=s.visualizations;for(var r=0;r<a.length;r++){var n=a[r],c=!e&&n.vizId==="FrequentCard",p=!t&&n.vizId==="RecentCard";if(c||p){delete i[n.vizId];a.splice(r,1);r--}}return s};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/ContextContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(n,i,r,a,s){this._oService=n;this._sContainerKey=r;this._oAdapterContainer={};this._oScope=a||t.adjustScope(a);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var p;if(!(s instanceof o)&&s!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined")}if(s&&s.getMetadata&&s.getMetadata().getComponentName){p=s.getMetadata().getComponentName()}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=i.getAdapterContainer(this._sContainerKey,this._oScope,p);return this};a.prototype.getValidity=function(){return this._oScope.validity};a.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new e.Map};a.prototype.load=function(){var t={},n,i=this;t=new jQuery.Deferred;if(!this._sContainerKey){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this.clear();n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,t);n.always(function(){i._oAdapterContainer.load().fail(function(){t.reject()}).done(function(){i._copyFromAdapter();if(i._isExpired()){i.clear()}t.resolve()})});return t.promise()};a.prototype._copyFromAdapter=function(){var e=this,t;t=e._oAdapterContainer.getItemKeys().splice(0);t.forEach(function(t){e._oItemMap.put(t,JSON.stringify(e._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=e._oItemMap.keys().splice(0)};a.prototype._isExpired=function(){var e,t,o;if(this.getValidity()===Infinity||this.getValidity()===0){return false}t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});o=e.format(this._getNow(),true);return t&&o>t};a.prototype._getNow=function(){return new Date};a.prototype._copyToAdapterUpdatingValidity=function(){var e=[],o=[],r=this,a,s,p,_;if(this._clear){e=this._oAdapterContainer.getItemKeys().splice(0);e.forEach(function(e){r._oAdapterContainer.delItem(e)});this._clear=false}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{s=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});a=this._getNow();_=s.format(a,true);p=s.format(new Date(a.getTime()+this.getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,p);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,_)}e=this._oItemMap.keys();e.forEach(function(e){r._oAdapterContainer.setItemValue(e,t.cloneToObject(r._oItemMap.get(e)))});o=this._aLoadedItemKeys.filter(function(t){return!(e.indexOf(t)>-1)});o.forEach(function(e){r._oAdapterContainer.delItem(e)})};a.prototype.save=function(){var e,t,n=this;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,e);t.always(function(){try{n._oAdapterContainer.save().fail(function(){e.reject()}).done(function(){e.resolve()})}catch(t){e.reject()}});return e.promise()};a.prototype.saveDeferred=function(e){var t,n,i=this;this._copyToAdapterUpdatingValidity();t=new jQuery.Deferred;n=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,t);function o(){n.always(function(){try{i._oAdapterContainer.save().fail(function(){t.reject()}).done(function(){t.resolve()})}catch(e){t.reject()}})}t._sapFnSave=o;t._sapTimeoutId=setTimeout(o,e);return t.promise()};a.prototype.flush=function(){var e,t;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);t.fail(function(){e.reject()}).done(function(){e.resolve()});return e.promise()};a.prototype.getItemKeys=function(){var e=this._oItemMap.keys().filter(function(e){return e.indexOf(n.S_ITEM_PREFIX)===0});return e.map(function(e){return e.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(e){return this._getItemValueInternal(n.S_ITEM_PREFIX,e)};a.prototype._getItemValueInternal=function(e,n){if(typeof n!=="string"||typeof e!=="string"){return undefined}return t.cloneToObject(this._oItemMap.get(e+n))};a.prototype.containsItem=function(e){if(typeof e!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+e)};a.prototype.setItemValue=function(e,t){this._setItemValueInternal(n.S_ITEM_PREFIX,e,t)};a.prototype._setItemValueInternal=function(t,n,i){if(typeof n!=="string"||typeof t!=="string"){throw new e.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ")}if(n.length>40){r.error('Personalization Service item key/variant set name ("'+n+'") should be less than 40 characters [current :'+n.length+"]")}this._oItemMap.put(t+n,JSON.stringify(i))};a.prototype.delItem=function(e){this._delItemInternal(n.S_ITEM_PREFIX,e)};a.prototype._delItemInternal=function(e,t){if(typeof t!=="string"){return undefined}if(typeof e!=="string"){return undefined}this._oItemMap.remove(e+t)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};a.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=function(){var n={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(t){n[t]=function(t){throw new e.Error("Function "+t+" can't be called on unmodifiable container","ContextContainer"," ")}.bind(undefined,t)});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(e){if(t[e]){n[e]=t[e].bind(t)}});return n}()}return this._oUnmodifiableContainer};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(t,e,n,r,jQuery){"use strict";function i(e,n){this._sContainerKey=n;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var r={},i=this;this._init();r=new jQuery.Deferred;if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=e.getAdapterContainer(this._sContainerKey);this.load().fail(function(){r.reject()}).done(function(){r.resolve(i)});return r.promise()}i.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new t.Map;this._oItemMap=new t.Map};i.prototype.load=function(){var i={},a=[],o=[],s=[],p=[],u=this;function _(t){var r=[],i=[];r=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)!==0});if(r.length===0){return t}i=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)===0});r.forEach(function(t){var r={},a="";a=n.S_ITEM_PREFIX+t;r=e.clone(u._oAdapterContainer.getItemValue(t));u._oAdapterContainer.setItemValue(a,r);u._oAdapterContainer.delItem(t);if(i&&Array.prototype.indexOf.call(i,a)===-1){i.push(a)}});return i}i=new jQuery.Deferred;if(!this._sContainerKey){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._init();this._oAdapterContainer.load().fail(function(){i.reject()}).done(function(){a=u._oAdapterContainer.getItemKeys().splice(0);o=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)===0});o.forEach(function(t){var e={};e=new r(t,u._oAdapterContainer);u._oVariantSetMap.put(t,e)});s=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)!==0});p=_(s);p.forEach(function(t){u._oItemMap.put(t,e.clone(u._oAdapterContainer.getItemValue(t)))});u._aLoadedVariantSetKeys=u._oVariantSetMap.keys().splice(0);u._aLoadedItemKeys=u._oItemMap.keys().splice(0);i.resolve()});return i.promise()};i.prototype.save=function(){var t,e;this._serializeVariantSets();this._serializeItems();t=new jQuery.Deferred;function n(){t.resolve()}function r(){t.reject()}try{e=this._oAdapterContainer.save();e.fail(r);e.done(n)}catch(e){t.reject()}return t.promise()};i.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};i.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(n.S_ITEM_PREFIX+t)};i.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};i.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}this._oItemMap.put(n.S_ITEM_PREFIX+e,r)};i.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}if(this.containsItem(t)){this._oItemMap.remove(n.S_ITEM_PREFIX+t)}};i.prototype._serializeItems=function(){var t=[],n=[],r=this;t=this._oItemMap.keys();t.forEach(function(t){r._oAdapterContainer.setItemValue(t,e.clone(r._oItemMap.get(t)))});n=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.getVariantSetKeys=function(){var t=[],e=[];e=this._oVariantSetMap.keys();t=e.map(function(t){return t.replace(n.S_VARIANT_PREFIX,"","")});return t};i.prototype.containsVariantSet=function(t){return this._oVariantSetMap.containsKey(n.S_VARIANT_PREFIX+t)};i.prototype.getVariantSet=function(t){var e,r={};e=n.S_VARIANT_PREFIX+t;r=this._oVariantSetMap.get(e);return r};i.prototype.addVariantSet=function(e){var i={},a={},o="";if(this.containsVariantSet(e)){throw new t.Error("Container already contains a variant set with key '"+e+"': sap.ushell.services.Personalization"," ")}o=n.S_VARIANT_PREFIX+e;i={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(o,i);a=new r(o,this._oAdapterContainer);this._oVariantSetMap.put(o,a);return a};i.prototype._serializeVariantSets=function(){var t=[],n=[],r=this;t=this._oVariantSetMap.keys();t.forEach(function(t){var n={},i={};n=r._oVariantSetMap.get(t);i=n._serialize();r._oAdapterContainer.setItemValue(t,e.clone(i))});n=this._aLoadedVariantSetKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.delVariantSet=function(t){var e="";e=n.S_VARIANT_PREFIX+t;this._oVariantSetMap.remove(e);return this._oAdapterContainer.delItem(e)};return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariant", ["sap/ushell/utils"],function(t){"use strict";function e(e,r,n){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(n&&typeof n!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantKey=e;this._oVariantName=r;this._oItemMap=new t.Map;this._oItemMap.entries=n||{}}e.prototype.getVariantKey=function(){return this._oVariantKey};e.prototype.getVariantName=function(){return this._oVariantName};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(t)};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}return this._oItemMap.put(e,r)};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(t)};e.prototype.getItemKeys=function(){return this._oItemMap.keys()};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.remove(t)};e.prototype._serialize=function(){var t=[],e={},r={},n=this;e.name=this.getVariantName();t=this._oItemMap.keys();t.forEach(function(t){r[t]=n.getItemValue(t)});e.variantData=r;return e};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(t,a,r){"use strict";function e(e,n){var i,s,o,p,u;this._sVariantSetKey=e;this._oAdapterContainer=n;this._oVariantNameMap=new t.Map;this._oVariantMap=new t.Map;i=a.clone(this._oAdapterContainer.getItemValue(e));if(i.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=i.currentVariant}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(i.hasOwnProperty("variants")){for(s in i.variants){if(i.variants.hasOwnProperty(s)){o=i.variants[s].name;p=i.variants[s].variantData;if(this._oVariantNameMap.containsKey(o)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{this._oVariantNameMap.put(o,s);u=new r(s,o,p);this._oVariantMap.put(s,u)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}e.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey};e.prototype.setCurrentVariantKey=function(t){this._sCurrentVariantKey=t};e.prototype.getVariantKeys=function(){return this._oVariantMap.keys()};e.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries))};e.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.get(t)};e.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}return this._oVariantNameMap.get(t)};e.prototype.containsVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.containsKey(t)};e.prototype.addVariant=function(a){var e=0,n="",i={};e=parseInt(this._oVariantMap.keys().sort(function(t,a){return t-a}).reverse()[0],10);n=isNaN(e)?"0":(e+1).toString();if(this._oVariantMap.containsKey(n)){throw new t.Error("Variant key '"+n+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantNameMap.containsKey(a)){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(a)+"' New key: '"+n+"') ': sap.ushell.services.Personalization"," ")}i=new r(n,a);this._oVariantMap.put(n,i);this._oVariantNameMap.put(a,n);return i};e.prototype._serialize=function(){var t=[],a={},r={},e=this;a.currentVariant=this._sCurrentVariantKey;t=this.getVariantKeys();t.forEach(function(t){var a={};a=e._oVariantMap.get(t);r[t]=a._serialize()});a.variants=r;return a};e.prototype.delVariant=function(t){var a=this._oVariantMap.get(t);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(t)}};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Personalizer", ["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,jQuery,t){"use strict";function n(t,n,r,i,o){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=n;this._oService=t;this._oScope=i;this._oComponent=o;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new e.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ")}this._sPersContainer=r.container;this._sPersItem=r.item}n.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};n.prototype.getPersData=function(){var e={},n=this;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){e.resolve(t.getItemValue(n._sPersItem))});e.fail(function(){t.error("Fail to get Personalization data for Personalizer container: "+n._sPersContainer)});return e.promise()};n.prototype.setPersData=function(e){var n={},r=this;n=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){n.reject()}).done(function(t){t.setItemValue(r._sPersItem,e);t.save().fail(function(){n.reject()}).done(function(){n.resolve()})});n.fail(function(){t.error("Fail to set Personalization data for Personalizer container: "+r._sPersContainer)});return n.promise()};n.prototype.delPersData=function(){var e={},n=this,r;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){t.delItem(n._sPersItem);t.save().fail(function(){e.reject()}).done(function(){e.resolve()})});r=e.promise();r.fail(function(){t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer)});return r};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/TransientPersonalizer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this._oValue=undefined}e.prototype.getPersData=function(){var e;e=new jQuery.Deferred;e.resolve(this._oValue);return e.promise()};e.prototype.setPersData=function(e){var t;t=new jQuery.Deferred;this._oValue=e;t.resolve();return t.promise()};e.prototype.delPersData=function(){var e;e=new jQuery.Deferred;this._oValue=undefined;e.resolve();return e.promise()};e.prototype.setValue=function(e){this._oValue=e};e.prototype.getValue=function(){return this._oValue};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Variant", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(t,a){"use strict";function e(a,e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantSet=a;this._sVariantKey=e;this._sVariantName=r}e.prototype.getVariantKey=function(){return this._sVariantKey};e.prototype.getVariantName=function(){return this._sVariantName};e.prototype.setVariantName=function(a){var e=this._oVariantSet._getVariantSet(),r;if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantSet.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant with name '"+a+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(e,"variants")&&Object.prototype.hasOwnProperty.call(e.variants,this._sVariantKey)){r=e.variants[this._sVariantKey];r.name=a;this._sVariantName=a;this._oVariantSet._serialize()}else{throw new t.Error("Variant does not longer exist"," ")}};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}var e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(e,t)&&a.clone(e[t])};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}var i,n=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!n){throw new t.Error("Variant does not longer exist"," ")}if(!n.variantData){n.variantData={}}i=n.variantData;i[e]=a.clone(r);this._oVariantSet._serialize()};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}var a=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,t)};e.prototype.getItemKeys=function(){var t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,a,e=[];for(a in t){if(Object.prototype.hasOwnProperty.call(t,a)){e.push(a)}}e.sort();return e};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(t,a,e,r){"use strict";function n(r,n){var i,s,o=new t.Map,p=new t.Map,l,h;this._oContextContainer=n;this._sVariantSetKey=r;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(i in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,i)){s=this._oVariantSetData.variants[i].name;l=this._oVariantSetData.variants[i].variantData;if(o.containsKey(s)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{o.put(s,i);h=new e(i,s,l);p.put(i,h)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}n.prototype._getVariantSet=function(){return this._oVariantSetData};n.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};n.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};n.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};n.prototype.getVariantKeys=function(){var a=new t.Map,e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){a.put(r,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.keys()};n.prototype.getVariantNamesAndKeys=function(){var a=new t.Map,e=new t.Map,r=this._getVariantSet(this._sVariantSetKey),n,i;if(Object.prototype.hasOwnProperty.call(r,"variants")){for(n in r.variants){if(Object.prototype.hasOwnProperty.call(r.variants,n)){i=r.variants[n].name;if(a.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{a.put(i,n)}e.put(n,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.entries};n.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}var a=this._getVariantSet(this._sVariantSetKey),e,n,i;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)){e=a.variants[t].name;i=a.variants[t].variantData;n=new r(this,t,e,i);return n}return undefined};n.prototype.getVariantKeyByName=function(a){if(typeof a!=="string"){return undefined}var e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){if(a===e.variants[r].name){return r}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return undefined};n.prototype.containsVariant=function(t){var a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)};n.prototype.addVariant=function(a){var e=[],n=0,i="",s={};e=this.getVariantKeys();n=parseInt(e.sort(function(t,a){return t-a}).reverse()[0],10);i=isNaN(n)?"0":(n+1).toString();if(e.indexOf(i)>=0){throw new t.Error("Variant key '"+i+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(a)+"' New key: '"+i+"') ': sap.ushell.services.Personalization"," ")}s=new r(this,i,a);this._getVariantSet(this._sVariantSetKey).variants[i]={name:a,variantData:{}};this._serialize();return s};n.prototype.delVariant=function(t){var a;if(typeof t!=="string"){return undefined}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSetAdapter", ["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(t,n,e){"use strict";function r(t){this._oContextContainer=t}r.prototype.save=function(){return this._oContextContainer.save()};r.prototype.getVariantSetKeys=function(){var n=this._oContextContainer._getInternalKeys(),e=[];e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};r.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};r.prototype.getVariantSet=function(n){var r=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,n);if(!r){return undefined}return new e(n,this._oContextContainer)};r.prototype.addVariantSet=function(r){var a={},i={};if(this.containsVariantSet(r)){throw new n.Error("Container already contains a variant set with key '"+r+"': sap.ushell.services.Personalization"," ")}a={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,r,a);i=new e(r,this._oContextContainer);return i};r.prototype.delVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/WindowAdapter", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e=function(e,t){this._oBackendAdapter=t;if(t){this.supportsGetWithoutSubsequentLoad=t.supportsGetWithoutSubsequentLoad}};e.prototype.data={};e.prototype.getAdapterContainer=function(e,t,r){var n=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(e,t,r);var a=sap.ui.require("sap/ushell/services/_Personalization/WindowAdapterContainer");return new a(e,t,n)};e.prototype.delAdapterContainer=function(t,r){var n=new jQuery.Deferred;delete e.prototype.data[t];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(t,r).done(function(){n.resolve()}).fail(function(e){n.reject(e)})}else{n.resolve()}return n.promise()};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/WindowAdapterContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/WindowAdapter","sap/ui/thirdparty/jquery"],function(e,t,n,jQuery){"use strict";function o(t,n,o){this._oBackendContainer=o;this._oItemMap=new e.Map;this._sContainerKey=t}function i(e){var t,n=e.getItemKeys();for(t=0;t<n.length;t=t+1){e.delItem(n[t])}}o.prototype.load=function(){var e=new jQuery.Deferred,o,a,s=this;if(n.prototype.data[this._sContainerKey]){this._oItemMap.entries=t.clone(n.prototype.data[this._sContainerKey]);if(this._oBackendContainer){i(this._oBackendContainer);a=this.getItemKeys();for(o=0;o<a.length;o=o+1){this._oBackendContainer.setItemValue(a[o],this._oItemMap.get(a[o]))}}e.resolve()}else if(this._oBackendContainer){this._oBackendContainer.load().done(function(){a=s._oBackendContainer.getItemKeys();for(o=0;o<a.length;o=o+1){s.setItemValue(a[o],s._oBackendContainer.getItemValue(a[o]))}n.prototype.data[s._sContainerKey]=t.clone(s._oItemMap.entries);e.resolve()}).fail(function(t){e.reject(t)})}else{n.prototype.data[this._sContainerKey]={};e.resolve()}return e.promise()};o.prototype.save=function(){var e=new jQuery.Deferred;n.prototype.data[this._sContainerKey]=t.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){e.resolve()}).fail(function(t){e.reject(t)})}else{e.resolve()}return e.promise()};o.prototype.getItemKeys=function(){return this._oItemMap.keys()};o.prototype.containsItem=function(e){this._oItemMap.containsKey(e)};o.prototype.getItemValue=function(e){return this._oItemMap.get(e)};o.prototype.setItemValue=function(e,t){this._oItemMap.put(e,t);if(this._oBackendContainer){this._oBackendContainer.setItemValue(e,t)}};o.prototype.delItem=function(e){this._oItemMap.remove(e);if(this._oBackendContainer){this._oBackendContainer.delItem(e)}};return o});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants", [],function(){"use strict";return{keyCategory:{FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"},writeFrequency:{HIGH:"HIGH",LOW:"LOW"}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/utils", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,r){"use strict";function n(e,t){var r;for(r in t){if(typeof t[r]!=="function"){if(t.hasOwnProperty(r)){if(r===e){return true}}}}return false}function i(e){if(e.length>40){r.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function a(e,t,r){if(e&&e.validity===0){return t}return r}function u(t){var r={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){r.validity=t.validity;if(r.validity===null||r.validity===undefined||typeof r.validity!=="number"){r.validity=Infinity}if(!(typeof r.validity==="number"&&(r.validity>=0&&r.validity<1e3||r.validity===Infinity))){r.liftime=Infinity}r.keyCategory=n(t.keyCategory,e.keyCategory)?t.keyCategory:r.keyCategory;r.writeFrequency=n(t.writeFrequency,e.writeFrequency)?t.writeFrequency:r.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){r.clientStorageAllowed=t.clientStorageAllowed}}return r}function l(e){if(!e.lazy){return jQuery.when(e.instance)}try{return e.create.call(null)}catch(e){return(new jQuery.Deferred).reject(e).promise()}}function o(e){if(!e){return false}var t=e.getManifestObject();if(!t){return false}var r=t.getEntry("/sap.ui5/appVariantId");if(!r){return false}var n=t.getComponentName();if(r===n){return false}return true}function f(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:u,cloneToObject:f,clone:y,addContainerPrefix:i,pickAdapter:a,isAppVariant:o,loadAdapter:l}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/Extensions", ["sap/ushell/services/_PluginManager/HeaderExtensions","sap/ushell/services/_PluginManager/MenuExtensions"],function(e,n){"use strict";var r={Header:i,Menu:s};function s(e){return Promise.resolve(n(e))}function i(){return Promise.resolve(e)}function u(e,n){var s=r[n];if(!s){return Promise.reject("Unsupported extension: '"+n+"'")}return s(e)}return u});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/HeaderExtensions", ["sap/ushell/EventHub"],function(e){"use strict";function t(t,n,r){e.emit("setHeaderCentralAreaElement",{id:t,currentState:n,states:r})}return{setHeaderCentralAreaElement:t}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_PluginManager/MenuExtensions", [],function(){"use strict";function n(n){return function e(r){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.getEntryProvider(n,r)})}}return function(e){return{getMenuEntryProvider:n(e)}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Ui5ComponentLoader/utils", ["sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ui/core/util/AsyncHintsHelper","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(jQuery,e,r,n,a,t,o){"use strict";var s=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getLogonSystem().getPlatform()==="abap";var i={name:"core-ext-light",count:4,debugName:undefined,path:s?"sap/ushell_abap/bootstrap/evo/":"sap/fiori/"};function u(e,r){var n=new jQuery.Deferred;e.componentData=r;if(e.manifest===undefined){e.manifest=false}else if(r.technicalParameters&&r.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var o=new t(e.manifest);o.addQuery("version",r.technicalParameters["sap-ui-fl-version"][0]);e.manifest=o.toString()}}a.create(e).then(function(e){n.resolve(e)},function(e){n.reject(e)});return n.promise()}function p(e){var r=e&&e.hasOwnProperty("amendedLoading")?e.amendedLoading:true;return r}function l(e){var r=true;if(e.hasOwnProperty("loadCoreExt")){r=e.loadCoreExt}return r}function c(e,r,n){var a=true;if(e.hasOwnProperty("loadDefaultDependencies")){a=e.loadDefaultDependencies}if(r&&r.hasOwnProperty("loadDefaultDependencies")){a=a&&r.loadDefaultDependencies}a=a&&n;return a}function f(e){var r=e.semanticObject||null;var n=e.action||null;if(!r||!n){return null}return"application-"+r+"-"+n+"-component"}function d(e){return e&&e.indexOf("?")>=0}function m(e){var r=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(r,"")}function y(e){if(!e){return e}var r=e.indexOf("?");if(r>=0){return e.slice(0,r)}return e}function h(e,r,a,t,o){var s="The issue is most likely caused by application "+e,i="Failed to load UI5 component with properties: '"+o+"'.";if(t){i+=" Error likely caused by:\n"+t}else{i+=" Error: '"+r+"'"}if(a==="parsererror"){s+=", as one or more of its resources could not be parsed"}s+=". Please create a support incident and assign it to the support component of the respective application.";n.error(s,i,e)}function g(r){var n=new e(r||window.location.href).mParams,a=n["sap-xapp-state"],t;delete n["sap-xapp-state"];t={startupParameters:n};if(a){t["sap-xapp-state"]=a}return t}function C(e,r){if(!Array.isArray(r)){return}r.forEach(function(r){var a=String.prototype.toLowerCase.call(r.severity||"");a=["trace","debug","info","warning","error","fatal"].indexOf(a)!==-1?a:"error";n[a](r.text,r.details,e)})}function v(e){var r,n={name:"CoreResourcesComplement"};if(P(e)){r=e}else{r=i}if(window["sap-ui-debug"]===true){if(r.debugName!==undefined){n.aResources=[r.path+r.debugName+".js"]}else{n.aResources=[]}}else if(o.loaded){n.aResources=b(r.name,r.path,r.count)}else{n.aResources=[]}return n}function b(e,r,a){var t=arguments[3]||[],o=r;if(typeof e!=="string"||typeof o!=="string"||typeof a!=="number"){n.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null}if(o.substr(-1)!=="/"){o+="/"}if(a===1){t.push(o+e+".js")}if(t.length>=a){return t}t.push(o+e+"-"+t.length+".js");return b(e,o,a,t)}function P(e){var r=true;if(!e){return false}if(!e.name||typeof e.name!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");r=false}if(!e.count||typeof e.count!=="number"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");r=false}if(!e.debugName||typeof e.debugName!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");r=false}if(!e.path||typeof e.path!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");r=false}return r}function w(e){if(!e||!Array.isArray(e.aResources)||!e.name){n.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(e.aResources.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(){n.error("Ui5ComponentLoader: failed to load bundle: "+e.name);return Promise.reject()})}function x(e,n,a,t,o,s,i,u,p){var l=jQuery.extend(true,{},o);if(!l.asyncHints){l.asyncHints=n?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{}}if(e){l.asyncHints.preloadBundles=l.asyncHints.preloadBundles||[];l.asyncHints.preloadBundles=l.asyncHints.preloadBundles.concat(p.aResources)}if(t){l.asyncHints.waitFor=t}if(!l.name){l.name=s}if(i){l.url=y(i)}if(u){l.id=u}if(a&&l.asyncHints){r.modifyUrls(l.asyncHints,m)}return l}function R(e,r,n,a){var t=jQuery.extend(true,{startupParameters:{}},e);if(n){t.config=n}if(a){t.technicalParameters=a}if(d(r)){var o=g(r);t.startupParameters=o.startupParameters;if(o["sap-xapp-state"]){t["sap-xapp-state"]=o["sap-xapp-state"]}}return t}return{constructAppComponentId:f,getParameterMap:g,logAnyApplicationDependenciesMessages:C,logInstantiateComponentError:h,shouldLoadCoreExt:l,shouldLoadDefaultDependencies:c,shouldUseAmendedLoading:p,urlHasParameters:d,removeParametersFromUrl:y,createUi5Component:u,prepareBundle:v,loadBundle:w,createComponentProperties:x,createComponentData:R,buildBundleResourcesArray:b}},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/AppContainer", ["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/Device","sap/base/Log","./AppContainerRenderer"],function(jQuery,e,t,r){"use strict";var i=e.extend("sap.ushell.ui.AppContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"pages"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}}});i.prototype.addPages=function(e){if(this.getPages().indexOf(e)>-1){return}if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true)}else{e.toggleStyleClass("hidden",true)}this.addAggregation("pages",e,true);var t,r=this.getDomRef();if(r){t=sap.ui.getCore().createRenderManager();t.render(e,r);t.destroy()}};i.prototype.addCenterViewPort=i.prototype.addPages;i.prototype.removeCenterViewPort=function(e){this.removeAggregation("pages",e,true)};i.prototype.getCurrentCenterPage=function(){return this.getPages().reduce(function(e,t){if(t&&t.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){return!t.hasStyleClass("sapUShellApplicationContainerIframeHidden")?t.getId():e}return t&&!t.hasStyleClass("hidden")?t.getId():e},null)};i.prototype.navTo=function(e,i){var o=sap.ui.getCore().byId(i),a=this.getCurrentCenterPage(),n=sap.ui.getCore().byId(a)||null,s=sap.ushell.Container.getRenderer("fiori2").byId("Shell-home-component-container"),p=s&&s.getId(),l=a&&p===a,d=p===i;if(e!=="centerViewPort"){r.error("Navigation to "+e+" is not allowed in Fiori3");return}if(this.getPages().indexOf(o)===-1){r.error("AppContainer: invalid navigation target");return}if(t.system.desktop&&l){this._saveFocus()}if(a!==i){this.fireBeforeNavigate({toId:i,to:o,fromId:a,from:n})}this.getPages().forEach(function(e){if(e){if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",e.getId()!==i)}else{e.toggleStyleClass("hidden",e.getId()!==i)}}});if(t.system.desktop&&d){this._restoreFocus()}if(a!==i){this.fireAfterNavigate({toId:i,to:o,fromId:a,from:n})}};i.prototype._restoreFocus=function(){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var t;if(this.sLastFocusId){e.registerAppKeysHandler(this.fnLastAppKeyHandler);t=sap.ui.getCore().byId(this.sLastFocusId);if(t){t.focus()}}}.bind(this))};i.prototype._saveFocus=function(){sap.ui.require(["sap/ushell/renderers/fiori2/AccessKeysHandler"],function(e){var t=jQuery(document.activeElement).control(0);this.sLastFocusId=t?t.getId():null;this.fnLastAppKeyHandler=e.getAppKeysHandler()}.bind(this))};i.prototype.getViewPortControl=function(e,t){return this.getPages().reduce(function(r,i){return e==="centerViewPort"&&i&&i.getId()===t?i:r},null)};var o=function(){};i.prototype.switchState=o;i.prototype._handleSizeChange=o;i.prototype.shiftCenterTransitionEnabled=o;i.prototype.shiftCenterTransition=o;i.prototype.addLeftViewPort=o;i.prototype.addRightViewPort=o;i.prototype.attachAfterSwitchState=o;i.prototype.detachAfterSwitchState=o;i.prototype.attachAfterSwitchStateAnimationFinished=o;i.prototype.detachAfterSwitchStateAnimationFinished=o;i.prototype.getCurrentState=function(){return"Center"};return i});
/*!
 * Copyright (c) 2009-2022 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/AppContainerRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){if(!n.getVisible()){return}e.openStart("div",n);e.openEnd();n.getPages().forEach(function(n){e.renderControl(n)});e.close("div")};return e},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeader", ["sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/base/Log","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/shell/ShellAppTitle","sap/ushell/ui/ShellHeaderRenderer","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(e,t,i,a,r,o,n,s,l,h,p,d,u){"use strict";var g="sapUshellShellShowSearchOverlay";var f=0;var c;var m=sap.ui.require.toUrl("sap/ushell")+"/themes/base/img/SAPLogo.svg";var y=e.extend("sap.ushell.ui.ShellHeader",{metadata:{library:"sap.ushell",properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ui.core.Control",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{shellLayout:{type:"sap.ui.base.ManagedObject",multiple:false}},events:{searchSizeChanged:{}}}});y.prototype.setHomeUri=function(e){if(u.hasInvalidProtocol(e)){r.fatal("Tried to set a URL with an invalid protocol as the home uri. Setting to an empty string instead.",null,"sap/ushell/ui/ShellHeader");e=""}return this.setProperty("homeUri",e)};y.prototype.getShellLayoutControl=function(){return sap.ui.getCore().byId(this.getShellLayout())};y.prototype.createUIArea=function(){var e=window.document.getElementById("shell-hdr");if(!e){window.document.body.insertAdjacentHTML("afterbegin",'<div id="shell-hdr" class="sapContrastPlus sapUshellShellHead"></div>');this.placeAt("shell-hdr")}};y.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};y.prototype.FLPRangeSet={name:"Ushell",rangeBorders:[600,1024,1440,1920],rangeNames:["Phone","Tablet","Desktop","LargeDesktop","ExtraLargeDesktop"]};y.prototype.init=function(){i.media.initRangeSet(this.FLPRangeSet.name,this.FLPRangeSet.rangeBorders,"px",this.FLPRangeSet.rangeNames);i.media.attachHandler(this.invalidate,this,this.FLPRangeSet.name);i.resize.attachHandler(this.refreshLayout,this);o.once("ShellNavigationInitialized").do(function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){this._rerenderLogoNavigationFilterBound=this._rerenderLogoNavigationFilter.bind(this,e);e.registerNavigationFilter(this._rerenderLogoNavigationFilterBound);this._rerenderLogoNavigationFilterBound.detach=function(){e.unregisterNavigationFilter(this._rerenderLogoNavigationFilterBound)}}.bind(this))}.bind(this))};y.prototype.exit=function(){i.media.detachHandler(this.invalidate,this,this.FLPRangeSet.name);i.resize.detachHandler(this.refreshLayout,this);var e=window.document.getElementById("shell-hdr");if(e){e.parentElement.removeChild(e)}if(this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter){this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter.detach()}};y.prototype.setFocusOnShellHeader=function(e){if(e){var t=this.getHeadEndItems();if(t.length>0){t[t.length-1].focus()}else{this.getAppTitle().focus()}}else{var i=this.getHeadItems();if(i.length>0){i[0].focus()}else{this.getAppTitle().focus()}}};y.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){this._setLocationHref(e.target.href)}};y.prototype._setLocationHref=function(e){if(u.hasInvalidProtocol(e)){r.fatal("Tried to navigate to URL with an invalid protocol. Preventing navigation.",null,"sap/ushell/ui/ShellHeader");return}window.location.href=e};y.prototype.onAfterRendering=function(){var e=this.getDomRef();if(!c&&e.parentElement.getBoundingClientRect().height>0){e.style.visibility="hidden";e.style.height="2.75rem";return}this.refreshLayout()};y.prototype.onThemeChanged=function(e){c=e.theme;this.invalidate()};y.prototype.getLogo=function(){return this.getProperty("logo")||(sap.ui.getCore().isThemeApplied()?t._getThemeImage()||m:undefined)};y.prototype.refreshLayout=function(){if(!this.getDomRef()){return}this._setAppTitleFontSize();this._adjustAppTitleTooltip();if(this.getSearchVisible()){var e=this.getDomRef("hdr-search");e.style.display="none";this._hideElementsForSearch();e.style.display="";e.style["max-width"]=f+"rem";this.fireSearchSizeChanged({remSize:a.fromPx(e.getBoundingClientRect().width),isFullWidth:this.isPhoneState()||this.getDomRef("hdr-end").style.display==="none"})}};y.prototype._setAppTitleFontSize=function(){if(this.isExtraLargeState()){return}var e=this.getDomRef("hdr-begin"),t=window.document.getElementById("shellAppTitle"),i="sapUshellHeadTitleWithSmallerFontSize";if(e&&t){t.classList.remove(i);t.style.overflow="visible";var a=e.getBoundingClientRect(),r=a.x+a.width,o=t.getBoundingClientRect(),n=o.x+o.width;if(n>r){t.classList.add(i)}t.style.overflow=""}};y.prototype._adjustAppTitleTooltip=function(){var e=sap.ui.getCore().byId("shellAppTitle");if(e){var t=e.getDomRef("button");var i=t&&t.firstChild;if(i){var a;var r=n.last("/core/shell/model/currentState/stateName");var o=n.last("/core/services/allMyApps/enabled");var s=(r==="app"||r==="home")&&o;var h=sap.ui.getCore().byId(e.getNavigationMenu());var p=h&&h.getItems()&&h.getItems().length>0;if(s||p){a=l.i18n.getText("shellNavMenu_openMenuTooltip")}else{var d=i.offsetWidth<i.scrollWidth;a=d?e.getText():null}if(e.getTooltip()!==a){e.setTooltip(a)}}}};y.prototype.removeHeadItem=function(e){if(typeof e==="number"){e=this.getHeadItems()[e]}this.removeAggregation("headItems",e)};y.prototype.addHeadItem=function(e){this.addAggregation("headItems",e)};y.prototype.isExtraLargeState=function(){return i.media.getCurrentRange(this.FLPRangeSet.name).from===this.FLPRangeSet.rangeBorders[3]};y.prototype.isMediumOrBiggerState=function(){return i.media.getCurrentRange(this.FLPRangeSet.name).from>=this.FLPRangeSet.rangeBorders[0]};y.prototype.isPhoneState=function(){var e=i.media.getCurrentRange(i.media.RANGESETS.SAP_STANDARD).name;var t=this.getDomRef().getBoundingClientRect().width>f;return i.system.phone||e==="Phone"||!t};y.prototype.setSearchState=function(e,t,i){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof t==="boolean"){i=t;t=undefined}this.setProperty("searchState",e,false);var a=e!=="COL";var r=this.getShellLayoutControl();if(r){r.toggleStyleClass(g,a&&i)}f=a?t||35:0}};y.prototype._hideElementsForSearch=function(){if(this.isExtraLargeState()){return}var e,t=this.getDomRef("hdr-search-container"),i=this.getDomRef("hdr-begin"),r=this.getDomRef("hdr-center"),o=this.getDomRef("hdr-end");if(this.getSearchState()==="EXP"||this.isPhoneState()){e=a.toPx(f+3)}else{e=a.toPx(9+.5)}var n=[i];Array.prototype.forEach.call(i.childNodes,function(e){n.unshift(e)});if(r){n.unshift(r)}i.style.flexBasis="";o.style.display="";n.forEach(function(e){if(e.getAttribute("id")==="shellAppTitle"){e.classList.remove("sapUiPseudoInvisibleText")}else{e.style.display=""}});var s;for(var l=0;l<n.length;l++){s=n[l];if(e>t.getBoundingClientRect().width){if(s.getAttribute("id")==="shellAppTitle"){s.classList.add("sapUiPseudoInvisibleText")}else{s.style.display="none";if(r&&l===0){i.style.flexBasis="auto"}}}else{return}}if(a.toPx(f)>t.getBoundingClientRect().width){o.style.display="none"}};y.prototype.getSearchWidth=function(){return f};y.prototype.isHomepage=function(){var e=window.hasher&&"#"+window.hasher.getHash()||"";var t=new RegExp("[?]"+"(?:"+"(?!&[/])."+")*");var i=e.replace(t,"");return d.isRootIntent(i)||i==="#Launchpad-openFLPPage"};y.prototype._rerenderLogoNavigationFilter=function(e,t,i){var a=e.hashChanger.isInnerAppNavigation(t,i);if(a){this.invalidate()}return e.NavigationFilterStatus.Continue};y.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL};y.prototype.getCentralControl=function(){return sap.ui.getCore().byId(this.getCentralAreaElement())};y.prototype.setNoLogo=function(){this.setLogo(undefined)};y.prototype._getLeanMode=function(){return(window.location.search||"").indexOf("appState=lean")>=0};return y},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeaderRenderer", ["sap/ushell/resources","sap/ui/Device"],function(e,t){"use strict";var r={apiVersion:2};r.render=function(t,r){var a=r.getId();var l=r.getCentralControl();t.openStart("header",r);if(!r.getVisible()){t.style("display","none")}t.class("sapUshellShellHeader");t.class("sapUshellShellCntnt");t.attr("aria-label",e.i18n.getText("Shell_Header_AriaLabel"));t.attr("data-sap-ui-customfastnavgroup","true");t.openEnd();t.openStart("div");t.attr("id",a+"-hdr-begin");t.class("sapUshellShellHeadBegin");if(l){t.class("sapUshellHeadWithCenter")}t.openEnd();this.renderHeaderItems(t,r);this.renderLogo(t,r);this.renderTitle(t,r);t.close("div");if(l){t.openStart("div",l);t.attr("id",a+"-hdr-center");t.class("sapUshellShellHeadCenter");t.openEnd();t.renderControl(l);t.close("div")}t.openStart("div");t.attr("id",a+"-hdr-search-container");t.class("sapUshellShellHeadSearchContainer");t.openEnd();this.renderSearch(t,r);t.close("div");t.openStart("div");t.attr("id",a+"-hdr-end");t.class("sapUshellShellHeadEnd");t.openEnd();this.renderHeaderEndItems(t,r);t.close("div");t.close("header")};r.renderSearch=function(e,t){var r=t.getSearch();e.openStart("div");e.attr("id",t.getId()+"-hdr-search");e.class("sapUshellShellSearch");e.style("max-width",t.getSearchWidth()+"rem");if(t.getSearchState()==="COL"){e.style("display","none")}e.openEnd();if(r){e.renderControl(r)}e.close("div")};r.renderTitle=function(e,t){var r=t.getTitle();e.renderControl(t.getAppTitle());if(r&&t.isMediumOrBiggerState()){e.openStart("div");e.attr("id",t.getId()+"-hdr-shell-title");e.class(t.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");e.openEnd();e.openStart("h2");e.class("sapUshellHeadTitle");e.attr("aria-level","2");e.attr("title",r);e.openEnd();e.text(r);e.close("h2");e.close("div")}};r.renderHeaderItems=function(e,t){var r=t.getHeadItems();r.forEach(function(t){e.renderControl(t)})};r.renderHeaderEndItems=function(e,t){t.getHeadEndItems().forEach(e.renderControl)};r.renderLogo=function(t,r){var a=r.getLogo();if(!r.getShowLogo()||a===undefined){return}var l=r._getLeanMode();var n=e.i18n.getText("homeBtn_tooltip");var d=e.i18n.getText("homeBtn_tooltip_text");t.openStart(l?"div":"a");t.attr("id",r.getId()+"-logo");t.class("sapUshellShellIco");if(l){t.class("sapUshellLean")}else{t.attr("href",r.getHomeUri());t.attr("title",d);t.attr("aria-label",n);t.attr("role","button")}t.openEnd();t.voidStart("img");t.attr("id",r.getId()+"-icon");t.attr("alt",e.i18n.getText("SHELL_LOGO_TOOLTIP"));t.attr("src",a);t.voidEnd();t.close(l?"div":"a")};return r},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/ContactSupportButton", ["sap/base/Log","sap/m/ButtonRenderer","sap/m/library","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem"],function(t,e,n,i,jQuery,a,o,s,l){"use strict";var r=n.ButtonType;var u=l.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"},renderer:"sap.m.ButtonRenderer"});u.prototype.init=function(){if(l.prototype.init){l.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://email");this.setText(o.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled()};u.prototype.showContactSupportDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/TextArea","sap/m/Input","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/ushell/UserActivityLog"],function(t,e,n,a,l,u,h,p,d,c){var x="",g="",m="",C=[],f,b;b=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){x=this.oClientContext.navigationData.applicationInformation.applicationType;g=this.oClientContext.navigationData.applicationInformation.url;m=this.oClientContext.navigationData.applicationInformation.additionalInformation}C.push(new h({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("userFld")}));C.push(new h({text:this.oClientContext.userDetails.fullName||""}));C.push(new u({text:this.translationBundle.getText("serverFld")}));C.push(new h({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==""){C.push(new u({text:this.translationBundle.getText("eMailFld")}));C.push(new h({text:this.oClientContext.userDetails.eMail||""}))}C.push(new u({text:this.translationBundle.getText("languageFld")}));C.push(new h({text:this.oClientContext.userDetails.Language||""}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){C.push(new h({text:""}));C.push(new h({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("hashFld")}));C.push(new h({text:this.oClientContext.navigationData.navigationHash||""}));C.push(new h({text:""}));C.push(new h({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));C.push(new u({text:this.translationBundle.getText("applicationTypeFld")}));C.push(new h({text:x}));C.push(new u({text:this.translationBundle.getText("urlFld")}));C.push(new h({text:g}));C.push(new u({text:this.translationBundle.getText("additionalInfoFld")}));C.push(new h({text:m}))}this.oBottomSimpleForm=new t("technicalInfoBox",{layout:e.ResponsiveLayout,content:C}).addStyleClass("sapUshellTechnicalInfoBox");if(i.os.ios&&i.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth")}f=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){f.apply(this,arguments);var t=jQuery(this.getDomRef());t.attr("tabIndex",0);setTimeout(function(){this.focus()}.bind(t),700)};this.oDialog.addContent(this.oBottomSimpleForm)}.bind(this);this._embedLoginDetailsInBottomForm=b;this.translationBundle=o.i18n;this.oClientContext=c.getMessageInfo();this.oLink=new l({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new t("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new d("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),type:r.Emphasized,enabled:true,press:function(){this.oSubjectInput.fireChange();this.oTextArea.fireChange();if(this.oSubjectInput.getValueState()!=="Error"&&this.oTextArea.getValueState()!=="Error"){sap.ushell.Container.getServiceAsync("SupportTicket").then(function(t){var e=this.oSubjectInput.getValue();var n=this.oTextArea.getValue();t.createTicket({subject:e,text:n,clientContext:this.oClientContext}).done(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.info(this.translationBundle.getText("supportTicketCreationSuccess"))}.bind(this))}.bind(this)).fail(function(){sap.ushell.Container.getServiceAsync("Message").then(function(t){t.error(this.translationBundle.getText("supportTicketCreationFailed"))}.bind(this))}.bind(this));this.oDialog.close()}.bind(this))}}.bind(this)});this.cancelButton=new d("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close()}.bind(this)});var S=function(t){var e=t.getSource();if(!e.getValue()){if(e.getId()==="subjectInput"){e.setValueStateText(this.translationBundle.getText("subjectEmptyErrorMessage"))}if(e.getId()==="textArea"){e.setValueStateText(this.translationBundle.getText("txtAreaEmptyErrorMessage"))}e.setValueState("Error")}else{e.setValueState("None")}}.bind(this);this.oSubjectLabel=new u("subjectLabel",{text:this.translationBundle.getText("subjectLabel"),required:true});this.oSubjectInput=new a("subjectInput",{});this.oSubjectInput.attachLiveChange(S);this.oSubjectInput.attachChange(S);this.oTextAreaLabel=new u("textAreaLabel",{text:this.translationBundle.getText("txtAreaLabel"),required:true});this.oTextArea=new n("textArea",{rows:7});this.oTextArea.attachLiveChange(S);this.oTextArea.attachChange(S);this.oTopSimpleForm=new t("topForm",{editable:false,content:[this.oSubjectLabel,this.oSubjectInput,this.oTextAreaLabel,this.oTextArea],layout:e.ResponsiveGridLayout});this.oDialog=new p({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"subjectInput",afterOpen:function(){jQuery("#textArea").on("focusout",function(){window.scrollTo(0,0)})},afterClose:function(){this.oDialog.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus()}}.bind(this)}).addStyleClass("sapUshellContactSupportDialog").addStyleClass("sapContrastPlus");this.oSubjectInput.setPlaceholder(this.translationBundle.getText("subjectPlaceHolderHeader"));this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(b.bind(this));this.oDialog.addCustomData(new s({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open()}.bind(this))};u.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){t.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton")}e=false}l.prototype.setEnabled.call(this,e)};return u});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AccessibilityCustomData", ["sap/ui/core/CustomData"],function(e){"use strict";var t=e.extend("sap.ushell.ui.launchpad.AccessibilityCustomData",{metadata:{library:"sap.ushell"}});t.prototype._checkWriteToDom=function(){var t=sap.ui.getCore().getConfiguration().getAccessibility();if(!t){return null}var a=this.getKey();var i=e.prototype._checkWriteToDom.apply(this,arguments);if(i&&(a.indexOf("aria-")===0||a==="role"||a==="tabindex")){i.key=i.key.replace(/^data-/,"")}return i};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ActionItem", ["sap/m/Button","sap/m/ButtonRenderer","sap/m/library"],function(e,t,r){"use strict";var s=r.ButtonType;var a=e.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}},renderer:"sap.m.ButtonRenderer"});a.prototype.setActionType=function(e){if(!this.sOrigType){this.sOrigType=this.getType()}this.setType(e==="action"?s.Unstyled:this.sOrigType||s.Standard);this.setProperty("actionType",e,true)};return a});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialog", ["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./LoadingDialogRenderer"],function(e,t,i,s,o,a,n){"use strict";var l=t.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}}});l.prototype.init=function(){this._oPopup=new s;this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new i;this._oLabel=new e(this.getId()+"loadingLabel").addStyleClass("sapUshellLoadingDialogLabel");this.sState="idle";this.sLoadingString=a.i18n.getText("genericLoading").replace("..."," ")};l.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy()};l.prototype.isOpen=function(){return this._oPopup.isOpen()};l.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy"}if(this.getLoadAnimationWithInterval()){this.addStyleClass("sapUshellVisibilityHidden");this._iTimeoutId=setTimeout(function(){this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}.bind(this),3e3)}else{this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}if(!this.getVisible()){this.setVisible(true);this.$().show()}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open()}};l.prototype.showAppInfo=function(e,t,i){this.setText(e);this.setIconUri(t);this.oIcon.setSrc(t);this._oLabel.setText(e);this._oLabel.addCustomData(new n({key:"aria-hidden",value:"true",writeToDom:true}));var s=this.getDomRef("accessibility-helper");if(s&&i){s.innerText=this.sLoadingString}};l.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId)}if(this.getVisible()){this.sState="idle";this.setVisible(false);this.$().hide();this._oPopup.close()}};return l});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialogRenderer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e={apiVersion:2,render:function(e,i){var r=i.getTooltip_AsString();e.openStart("div",i);e.class("sapUshellLoadingDialogControl");if(r){e.attr("title",r)}e.openEnd();if(jQuery.os.ios||!i._isPlatformDependent){this.renderAppInfo(e,i);this.renderFioriFlower(e)}else{this.renderFioriFlower(e);this.renderAppInfo(e,i)}e.close("div")},renderAppInfo:function(e,i){e.openStart("div");e.class("sapUshellLoadingDialogAppData");e.openEnd();if(i.getIconUri()){e.renderControl(i.oIcon)}e.openStart("span",i.getId()+"-accessibility-helper");e.class("sapUshellAccessibilityHelper");e.attr("aria-live","rude");e.attr("aria-relevant","additions text");e.openEnd();e.close("span");e.renderControl(i._oLabel);e.close("div")},renderFioriFlower:function(e){var i=/Android\s4\.2.+GT-I9505.+Chrome\/18/,r=navigator.userAgent&&i.test(navigator.userAgent);if(jQuery.support.cssAnimations&&!r){e.openStart("div","fiori2-loader");e.openEnd();e.openStart("div");e.class("fiori2-blossom");e.openEnd();for(var o=1;o<6;++o){e.openStart("div");e.class("fiori2-leafContainer");e.class("fiori2-leafContainer"+o);e.openEnd();e.openStart("div");e.class("fiori2-leaf");e.class("fiori2-leaf"+o);e.openEnd();e.close("div");e.close("div")}e.close("div");e.close("div")}}};return e},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Tile", ["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],function(e,t,i,o,s,jQuery,n,a,l){"use strict";var r=o.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}}});r.prototype.init=function(){this.addDelegate({onsapenter:this._launchTileViaKeyboard,onsapspace:this._launchTileViaKeyboard},this)};r.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy()}if(this.actionIcon){this.actionIcon.destroy()}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy()}};r.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new t({text:a.i18n.getText("Tile.failedToLoadView")})}return this.failedToLoadViewText};r.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined}if(!this.actionSheetIcon){this.actionSheetIcon=new s({src:"sap-icon://overflow",tooltip:a.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner")}return this.actionSheetIcon};r.prototype.ontap=function(){e.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress()};r.prototype.destroy=function(e){this.destroyTileViews();o.prototype.destroy.call(this,e)};r.prototype.addTileView=function(e,t){e.setParent(null);i.prototype.addAggregation.call(this,"tileViews",e,t)};r.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};r.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=null}if(document.activeElement===e){this.bFocused=true}this.sTabIndex=e.getAttribute("tabindex");if(this.sTabIndex){e.removeAttribute("tabindex")}}};r.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var e=this.getParent();e.removeAggregation("tiles",this,false)}var t=this.getDomRef();if(t){if(this.sTabIndex){t.setAttribute("tabindex",this.sTabIndex);delete this.sTabIndex}if(this.bFocused){t.focus();delete this.bFocused}}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering()};r.prototype._disableInnerLink=function(){var e=this.getDomRef();var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=function(e){e.preventDefault()}}};r.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()})}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],i=false,o,s;if(t.firePress){t.firePress({id:this.getId()})}else if(t.getComponentInstance){o=t.getComponentInstance();if(o._oController&&o._oController.oView.getContent()){s=o._oController.oView.getContent()[0];if(s&&s.firePress){s.firePress({id:this.getId()})}}}else{while(t.getContent&&!i){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});i=true}}}}}};r.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var i=this.$().prevUntil("h3"),o;if(i.length>0){o=i[i.length-1].previousSibling}else{o=t.previousSibling}var s=t.querySelector(".sapUshellTileInner");if(s&&s.children&&s.children[0]){var n=[];if(o){n.push("sapUshellCatalogAccessibilityTileText")}else{n.push("sapUshellDashboardAccessibilityTileText")}var l=this.getNavigationMode();if(l){var r=a.i18n.getText(l+"NavigationMode");if(r){var c=this.getId()+"-navigationMode";if(!document.getElementById(c)){var u=document.createElement("div");u.setAttribute("id",c);u.style.display="none";u.innerText=r;s.appendChild(u)}n.push(c)}else{e.warning("The navigation mode is of a unkown mode, it can not be read!")}}n.push(s.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){n.push(d.id)}if(o){n.push(o.getAttribute("id"))}if(this.getTileActionModeActive()){n.push("sapUshellDashboardAccessibilityTileEditModeText")}t.setAttribute("aria-labelledby",n.join(" "))}}};r.prototype.onclick=function(e){if(this.getTileActionModeActive()){var t=e.originalEvent.srcElement;if(jQuery(t).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress()}else{this.fireCoverDivPress({id:this.getId()})}}else{this._announceLoadingApplication()}};r.prototype._announceLoadingApplication=function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),t=a.i18n.getText("screenReaderNavigationLoading");if(e){e.setAttribute("role","alert");e.innerText=t;setTimeout(function(){e.removeAttribute("role");e.innerText=""},0)}};r.prototype._initDeleteAction=function(){var e=this;if(!this.deleteIcon){this.deleteIcon=new s({src:"sap-icon://decline",tooltip:a.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(t){e.fireDeletePress();t.stopPropagation()}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new l({key:"aria-label",value:a.i18n.getText("removeButtonLabel"),writeToDom:true}))}return this.deleteIcon};r.prototype.setShowActionsIcon=function(e){if(e){if(!this.actionIcon){this.actionIcon=new s({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=sap.ui.getCore().getEventBus(),t=function(i,o,s){s.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",t)};e.subscribe("dashboard","actionSheetClose",t)}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass")}}this.setProperty("showActionsIcon",e)};r.prototype.setIsDraggedInTabBarToSourceGroup=function(e){this.setProperty("isDraggedInTabBarToSourceGroup",e);this.setVisible(!e)};r.prototype.setRgba=function(e){this.setProperty("rgba",e);this._redrawRGBA()};r.prototype._redrawRGBA=function(){var e=this.getRgba(),t=this.$();if(e&&t){var i=this.getModel();t.css("background-color",e);t.unbind("mouseenter mouseleave");var o,s=t.css("border").split("px")[0];if(s>0){o=t.css("border-color")}else{o=e}t.hover(function(){if(i&&!i.getProperty("/tileActionModeActive")){var e=t.css("box-shadow"),s=e?e.split(") ")[1]:null;if(s){t.css("box-shadow",s+" "+o)}}},function(){t.css("box-shadow","")})}};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileRenderer", ["sap/ushell/Config","sap/base/Log","sap/m/Text"],function(e,t,i){"use strict";var l={apiVersion:2};l.render=function(i,l){var n=null,s;try{n=l.getTileViews()[0]}catch(e){t.warning("Failed to load tile view: ",e.message);n=l.getFailedtoLoadViewText()}var a=l.getParent();var o=[];if(a&&a.getTiles){o=a.getTiles()}else if(a&&a.getAppBoxesContainer&&a.getCustomTilesContainer){o=a.getAppBoxesContainer().concat(a.getCustomTilesContainer())}var r=o.filter(function(e){return e.getVisible()});var d=r.indexOf(l)>-1?r.indexOf(l)+1:"";if(!a){return}i.openStart("li",l);if(e.last("/core/shell/model/enableHelp")){i.attr("data-help-id",l.getTileCatalogId());if(l.getTileCatalogIdStable()){i.attr("data-help-id2",l.getTileCatalogIdStable())}}i.class("sapUshellTile");if(l.getTileActionModeActive()){i.class("sapUshellTileWrapper")}if(n&&n.getContent){s=n.getContent();s.forEach(function(e){if(e.isA("sap.m.GenericTile")){i.class("sapUshellFeedTileBG")}})}if(l.getLong()){i.class("sapUshellLong")}if(!l.getVisible()){i.class("sapUshellHidden")}if(l.getIsLocked()){i.class("sapUshellLockedTile")}if(e.last("/core/home/sizeBehavior")==="Small"){i.class("sapUshellSmall")}i.attr("aria-posinset",d);i.attr("aria-setsize",r.length);var c=a.getId()+"-titleText";i.attr("aria-describedby",c);i.openEnd();if(l.getTileActionModeActive()){this.renderTileActionMode(i,l);this.renderTileView(i,l,n)}else{i.openStart("div");i.class("sapUshellTileWrapper");i.openEnd();this.renderTileView(i,l,n);if(l.getShowActionsIcon()){i.renderControl(l.actionIcon)}i.close("div");this.renderTileActionsContainer(i,n,l.getPinButton())}i.close("li")};l.renderTileActionsContainer=function(e,t,i){i=i.length?i[0]:undefined;if(i){i.addStyleClass("sapUshellActionButton");e.openStart("div");e.class("sapUshellTilePinButtonOverlay");if(t.getHeader){e.attr("role","toolbar");e.attr("aria-label",t.getHeader())}e.openEnd();e.renderControl(i);e.close("div")}};l.renderTileView=function(e,t,i){e.openStart("div");e.class("sapUshellTileInner");if(t.getTileActionModeActive()){e.class("sapUshellTileActionBG")}e.openEnd();e.renderControl(i);e.close("div")};l.renderTileActionMode=function(e,t){e.openStart("div");e.class("sapUshellTileActionLayerDiv");e.openEnd();if(!t.getIsLocked()){e.openStart("div");e.class("sapUshellTileDeleteClickArea");e.openEnd();e.openStart("div");e.class("sapUshellTileDeleteIconOuterClass");e.openEnd();e.renderControl(t._initDeleteAction());e.close("div");e.close("div")}e.openStart("div");e.class("sapUshellTileActionDivCenter");e.openEnd();e.close("div");e.openStart("div");e.class("sapUshellTileActionIconDivBottom");e.openEnd();e.openStart("div");e.class("sapUshellTileActionIconDivBottomInnerDiv");e.openEnd();e.renderControl(t.getActionSheetIcon());e.close("div");e.close("div");e.close("div")};return l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileState", ["sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/resources","sap/ui/core/HTML","sap/ushell/library","./TileStateRenderer"],function(t,e,i,s){"use strict";var n=t.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:"Loaded"}},events:{press:{}}}});n.prototype.init=function(){this._rb=i.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new e(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"}).addStyleClass("sapSuiteGTFtrFldIcnMrk");this.attachPress(this._onPress)};n.prototype.onclick=function(){this.firePress()};n.prototype._onPress=function(t){if(this.getState()!=="Failed"){return}if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onPress(t)}.bind(this))}else{this.FailedTileDialog.openFor(this)}};n.prototype._getBusyContainer=function(){if(!this._oBusyContainer){this._oBusyContainer=new s({content:"<div class='sapUshellTileStateLoading'><div>"});this._oBusyContainer.setBusy(true)}return this._oBusyContainer};n.prototype.exit=function(){this._oWarningIcon.destroy();if(this._oBusyContainer){this._oBusyContainer.destroy()}};n.prototype.setState=function(t,e){this.setProperty("state",t,e);return this};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileStateRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){e.openStart("div",t);e.class("sapUshellGT");e.openEnd();var a=t.getState();e.openStart("div",t.getId()+"-overlay");e.class("sapUshellOverlay");if(a==="Failed"){e.attr("title",t._sFailedToLoad)}e.openEnd();switch(a){case"Loading":var l=t._getBusyContainer();e.renderControl(l);break;case"Failed":e.openStart("div",t.getId()+"-failed-ftr");e.class("sapUshellTileStateFtrFld");e.openEnd();e.openStart("div",t.getId()+"-failed-icon");e.class("sapUshellTileStateFtrFldIcn");e.openEnd();e.renderControl(t._oWarningIcon);e.close("div");e.openStart("div",t.getId()+"-failed-text");e.class("sapUshellTileStateFtrFldTxt");e.openEnd();e.text(t._sFailedToLoad);e.close("div");e.close("div");break;default:}e.close("div");e.close("div")};return e},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ContentRenderer", ["sap/ui/base/Object"],function(e){"use strict";var t=e.extend("sap.ushell.ui.shell.ContentRenderer",{constructor:function(t,r,i,n){e.apply(this);this._id=r;this._cntnt=i;this._ctrl=t;this._rm=sap.ui.getCore().createRenderManager();this._cb=n||function(){}},destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer}e.prototype.destroy.apply(this,arguments)},render:function(){if(!this._rm){return}if(this._rerenderTimer){clearTimeout(this._rerenderTimer)}this._rerenderTimer=setTimeout(function(){var e=document.getElementById(this._id);var t=e!=null;if(t){if(typeof this._cntnt==="string"){var r=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<r.length;i++){this._rm.renderControl(r[i])}}else{this._cntnt(this._rm)}this._rm.flush(e)}this._cb(t)}.bind(this),0)}});return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/OverflowListItem", ["sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,a,r){"use strict";var o=r.getMetadata().getProperties();var l=e.extend("sap.ushell.ui.shell.OverflowListItem",{metadata:{library:"sap.ushell",properties:{floatingNumber:{type:o.floatingNumber.type,group:o.floatingNumber.group,defaultValue:o.floatingNumber.defaultValue},floatingNumberMaxValue:{type:o.floatingNumberMaxValue.type,group:o.floatingNumberMaxValue.group,defaultValue:o.floatingNumberMaxValue.defaultValue},floatingNumberType:{type:o.floatingNumberType.type,group:o.floatingNumberType.group,defaultValue:o.floatingNumberType.defaultValue}}},renderer:{apiVersion:2}});l.prototype.init=r.prototype.init;l.prototype.onBeforeRendering=r.prototype.onBeforeRendering;l.prototype.tooltipFormatter=r.prototype.tooltipFormatter;l.prototype.floatingNumberFormatter=r.prototype.floatingNumberFormatter;l.prototype._getImage=function(){var a=this._oImage;if(!a){a=e.prototype._getImage.call(this)}if(this.getFloatingNumber()>0){a.addStyleClass("sapUshellShellHeadItmCounter");a.addCustomData(new t({key:"counter-content",value:this.floatingNumberFormatter(),writeToDom:true}))}else{a.removeStyleClass("sapUshellShellHeadItmCounter")}this._oImage=a;return this._oImage};return l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/RightFloatingContainer", ["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library"],function(e,jQuery){"use strict";var t=e.extend("sap.ushell.ui.shell.RightFloatingContainer",{metadata:{library:"sap.ushell",properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"56px"},top:{type:"string",group:"Appearance",defaultValue:"0"},right:{type:"string",group:"Appearance",defaultValue:"0"},textVisible:{type:"boolean",group:"Appearance",defaultValue:true},insertItemsWithAnimation:{type:"boolean",group:"Appearance",defaultValue:true,deprecated:true},hideItemsAfterPresentation:{type:"boolean",group:"Appearance",defaultValue:false},enableBounceAnimations:{type:"boolean",group:"Appearance",defaultValue:false},actAsPreviewContainer:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{floatingContainerItems:{type:"sap.ui.core.Control",multiple:true}},events:{afterRendering:{}}},renderer:{apiVersion:2,render:function(e,t){var i=sap.ui.getCore().getConfiguration().getRTL();e.openStart("div",t);e.class("sapUshellRightFloatingContainer");e.style("top",t.getTop()+"rem");e.style(i?"left":"right",t.getRight());e.attr("data-role","alert");e.openEnd();e.openStart("ul");e.class("sapUshellNotificationListContainer");e.attr("role","list");e.openEnd();this.renderFloatingContainerItems(e,t);e.close("ul");e.close("div")},renderFloatingContainerItems:function(e,t){var i=t.getInsertItemsWithAnimation(),n=t.getActAsPreviewContainer(),a=t.getFloatingContainerItems(),s;for(s=0;s<a.length;s++){if(n&&!i){a[s].addStyleClass("sapUshellNonAnimatedNotificationListItem")}else if(a[s].hasStyleClass("sapUshellNonAnimatedNotificationListItem")){a[s].addStyleClass("sapUshellNotificationsListItem");a[s].addStyleClass("sapUshellRightFloatingContainerItemBackToViewport");a[s].addStyleClass("sapUshellRightFloatingContainerItemHidden");a[s].addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");a[s].removeStyleClass("sapUshellNonAnimatedNotificationListItem")}e.renderControl(a[s])}}}});t.prototype.init=function(){var e;jQuery(window).bind("resize",function(){clearTimeout(e);e=setTimeout(this._handleResize.bind(this),100)}.bind(this));this.iRequiredItemsNumber=5};t.prototype.onBeforeRendering=function(){};t.prototype._setSize=function(){};t.prototype._handleResize=function(){if(this.getDomRef()&&this.getFloatingContainerItems().length){var e=this.iRequiredItemsNumber,t=window.innerHeight,i=this.getDomRef(),n=i.getBoundingClientRect().top,a=jQuery(".sapUiSizeCompact").length>0?56:64,s=this.$().find("li").eq(0),o,l;if(!s.length){return}o=s[0].clientHeight;var r=jQuery("#sapUshellDashboardFooter").outerHeight();this.iRequiredItemsNumber=Math.min(parseInt((t-n-a-r)/o,10),5);if(e!==this.iRequiredItemsNumber){l=this.getFloatingContainerItems();for(var u=0;u<l.length;u++){if(u<this.iRequiredItemsNumber||isNaN(this.iRequiredItemsNumber)){l[u].removeStyleClass("sapUshellShellHidden")}else{l[u].addStyleClass("sapUshellShellHidden")}}}}};t.prototype.onAfterRendering=function(){this.fireAfterRendering();setTimeout(function(){this._handleResize()}.bind(this),500);this.addStyleClass("sapContrastPlus");this.addStyleClass("sapContrast");this.addStyleClass("sapUshellNotificationsListItem")};t.prototype.setVisible=function(e){this.setProperty("visible",e,true);if(e){jQuery(this.getDomRef()).css("visibility","visible")}else{jQuery(this.getDomRef()).css("visibility","hidden")}};t.prototype.setFloatingContainerItemsVisiblity=function(e){var t=this.getFloatingContainerItems(),i=e?300:0,n=this.getInsertItemsWithAnimation(),a=function(i){if(e){t[i].removeStyleClass("sapUshellRightFloatingContainerItemBounceOut").addStyleClass("sapUshellRightFloatingContainerItemBounceIn")}else{t[i].removeStyleClass("sapUshellRightFloatingContainerItemBounceIn").addStyleClass("sapUshellRightFloatingContainerItemBounceOut")}};for(var s=0;s<t.length;s++){(function(s){return function(){if(n){setTimeout(function(){a(s)},i+s*100)}else{t[s].setVisible(e)}}})(s)()}};t.prototype._animationBouncer=function e(t){var i=function(){if(!e._animationQueue.length){e._itemTimeoutId=undefined;return}var t=e._animationQueue.shift();t.addStyleClass("sapUshellRightFloatingContainerItmHeightVisible").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");e._itemTimeoutId=setTimeout(i,100)};if(!e._animationQueue){e._animationQueue=[]}e._animationQueue.push(t);if(e._mainTimeoutId||e._itemTimeoutId){return}e._mainTimeoutId=setTimeout(function(){e._mainTimeoutId=undefined;i()},500)};t.prototype.addFloatingContainerItem=function(e){this.addAggregation("floatingContainerItems",e);e.addStyleClass("sapContrastPlus");if(this.getInsertItemsWithAnimation()){e.addStyleClass("sapUshellNotificationsListItem");e.addStyleClass("sapUshellRightFloatingContainerItemHidden");if(this.getEnableBounceAnimations()){t.prototype._animationBouncer(e)}else{setTimeout(function(){var t=this.getFloatingContainerItems();if(t.length>5){var i=t[t.length-1];i.addStyleClass("sapUshellRightFloatingContainerHideLastItem")}e.addStyleClass("sapUshellRightFloatingContainerItemBackToViewport").addStyleClass("sapUshellRightFloatingContainerItmHeightVisible")}.bind(this),500)}}else if(this.getActAsPreviewContainer()){e.addStyleClass("sapUshellNonAnimatedNotificationListItem")}if(this.getHideItemsAfterPresentation()){setTimeout(function(){e.removeStyleClass("sapUshellRightFloatingContainerItemBackToViewport")},5e3)}};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellAppTitle", ["sap/m/Bar","sap/m/Button","sap/m/Label","sap/m/library","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/OverflowToolbarPriority","sap/m/Popover","sap/m/ResponsivePopover","sap/m/Title","sap/m/ToggleButton","sap/ui/core/Core","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/Device","sap/ui/performance/Measurement","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData"],function(e,t,o,l,s,i,n,p,a,r,h,u,c,v,y,A,d,f,g,M){"use strict";var S=f.AppTitleState;var P=f.AllMyAppsState;var T=l.PlacementType;var b=t.extend("sap.ushell.ui.shell.ShellAppTitle",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subTitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:"sap-icon://folder"}},associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.View"}},events:{textChanged:{deprecated:true}}},renderer:{apiVersion:2,render:function(e,t){var o=t._getControlVisibilityAndState();var l=t.getText();var s=t.getModel();e.openStart("h1");e.class("sapUiPseudoInvisibleText");e.attr("aria-level","1");e.openEnd();e.text(l||"");e.close("h1");e.openStart("div",t);e.class("sapUshellHeadTitle");if(o||y.system.phone){e.class("sapUshellAppTitleClickable")}e.openEnd();e.openStart("div",t.getId()+"-button");e.class("sapUshellAppTitle");if(o||y.system.phone){e.attr("tabindex","0")}if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(o){e.attr("role","button");e.attr("aria-haspopup","dialog");if(s&&b._getCurrentState()===S.AllMyAppsOnly){e.attr("aria-label",g.i18n.getText("ShowAllMyApps_AriaLabel",[l]))}else{e.attr("aria-label",g.i18n.getText("ShellNavigationMenu_AriaLabel",[l]))}}e.openEnd();if(y.media.getCurrentRange(y.media.RANGESETS.SAP_STANDARD).name!=="Phone"){e.openStart("span");e.class("sapUshellAppTitleText");e.openEnd();e.text(l||"");e.close("span")}if(o&&l){e.openStart("span");e.class("sapUshellShellHeadAction");e.openEnd();e.renderControl(t.oIcon);e.close("span")}e.close("div");e.close("div")}}});b.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oIcon=v.createControlByURI(v.getIconURI("slim-arrow-down"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(y.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e)}}.bind(this)})}};b.prototype.getFocusDomRef=function(){return this.getDomRef("button")};b._getCurrentState=function(){return d.last("/core/shellHeader/ShellAppTitleState")};b.prototype.onclick=function(e){e.preventDefault();this.firePress();if(!this._getControlVisibilityAndState()){if(y.system.phone){window.hasher.setHash(d.last("/core/shellHeader/rootIntent"))}return}if(b._getCurrentState()===S.AllMyAppsOnly){A.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return}this._openCloseNavMenuPopover()};b.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover()}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}else{this.oAllMyAppsPopover.openBy(this)}}};b.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover()}this.getModel().setProperty("/ShellAppTitleState",S.ShellNavMenu);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}else{this.oNavMenuPopover.openBy(this)}if(this.oNavMenuPopover.getFooter()){var e=d.last("/core/shell/model/currentState/stateName");this.oNavMenuPopover.getFooter().setVisible(e==="home"||e==="app")}};b.prototype._getControlVisibilityAndState=function(){A.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var e=this.getModel();var t=d.last("/core/shell/model/currentState/stateName");var o=this._isNavMenuEnabled();var l=o;if(!e){return false}if(t==="app"||t==="home"){var s=d.last("/core/services/allMyApps/enabled");l=s||o;if(s&&o){e.setProperty("/ShellAppTitleState",S.ShellNavMenu)}else if(!s&&o){e.setProperty("/ShellAppTitleState",S.ShellNavMenuOnly)}else if(s&&!o){e.setProperty("/ShellAppTitleState",S.AllMyAppsOnly)}}else{e.setProperty("/ShellAppTitleState",S.ShellNavMenuOnly)}A.end("FLP:ShellAppTitle.getControlVisibilityAndState");return l};b.prototype._createAllMyAppsPopover=function(){var e=u.byId(this.getAllMyApps());if(!e){return null}var t=new a("sapUshellAllMyAppsPopover",{placement:T.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),verticalScrolling:false,showHeader:{path:"/ShellAppTitleState",formatter:function(e){return e!==S.ShellNavMenu}},content:[e],contentHeight:"28rem",contentWidth:"56rem"}).addStyleClass("sapContrastPlus");t.setModel(this.getModel());t.attachAfterOpen(function(){e.getController()._afterOpen();var o=t.getCustomHeader();var l=o.getContentLeft()[0];var s=o.getContentLeft()[1];if(s.getVisible()){s.firePress();s.setPressed(true)}l.focus()});t.attachAfterClose(this._afterCloseAllMyAppsPopover.bind(this));return t};b.prototype._afterCloseAllMyAppsPopover=function(){this._bPressedSpace=false;if(this._bOpenNavigationMenu===true){this._bOpenNavigationMenu=false;this.oNavMenuPopover.openBy(this)}else if(!y.system.phone){this.focus()}};b.prototype._createNavMenuPopover=function(){var e=u.byId(this.getNavigationMenu());this.oTitle=new o("navMenuInnerTitle",{design:"Bold",text:"{/application/title}",layoutData:new i({priority:n.High,shrinkable:false})});this.oSecondTitle=new o("navMenuInnerSecondTitle",{text:"{/title}",layoutData:new i({priority:n.Low,shrinkable:false})});this.oIconControl=new c({src:"{/application/icon}",layoutData:new i({priority:n.NeverOverflow,shrinkable:false})});this.oTitleBar=new s("navMenuTitleBar",{content:[this.oIconControl,this.oTitle,this.oSecondTitle]});var t=new p("sapUshellAppTitlePopover",{placement:T.Bottom,showArrow:true,showHeader:false,contentWidth:"20rem",horizontalScrolling:false,content:[this.oTitleBar,e]}).addStyleClass("sapContrastPlus");if(d.last("/core/services/allMyApps/enabled")){t.setFooter(this._getPopoverFooterContent())}t.addStyleClass("sapUshellAppTitleNavigationMenuPopover");t.setModel(this.getModel());d.emit("/core/shell/model/allMyAppsMasterLevel",P.FirstLevel);t.attachBeforeOpen(function(){e._beforeOpen()});t.attachAfterOpen(function(){e.$().on("touchmove.scrollFix",function(e){e.stopPropagation()});e._afterOpen()});t.attachAfterClose(this._afterCloseNavigationMenuPopover.bind(this));return t};b.prototype._afterCloseNavigationMenuPopover=function(){this._bPressedSpace=false;if(this._bOpenAllMyApps){this._bOpenAllMyApps=false;this._openCloseAllMyAppsPopover()}else if(!y.system.phone){this.focus()}};b.prototype._setAllMyAppsTitle=function(e){var t=d.last("/core/shellHeader");if(t.title&&t.ShellAppTitleState==="AllMyAppsOnly"||t.ShellAppTitleState==="AllMyApps"){e=e+" - "+t.title}r.prototype.setText.apply(this,[e])};b.prototype._getPopoverHeader=function(){var t=new r({text:g.i18n.getText("allMyApps_headerTitle"),level:"H1"});t.setText=this._setAllMyAppsTitle.bind(t);var o=new e("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[t]});return o};b.prototype.onAfterRendering=function(){var e=u.byId("shell-header");if(e){e.refreshLayout()}};b.prototype._createPopoverBackButton=function(){var e=new t("sapUshellAppTitleBackButton",{icon:v.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:g.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});e.addStyleClass("sapUshellCatalogNewGroupBackButton");return e};b.prototype._popoverBackButtonPressHandler=function(){var e=this.getAllMyAppsController();var t=e.getCurrentState();if(t===P.FirstLevel||t===P.FirstLevelSpread){if(b._getCurrentState()!==S.AllMyAppsOnly){this.getModel().setProperty("/ShellAppTitleState",S.ShellNavMenu);this.oAllMyAppsPopover.close();this._bOpenNavigationMenu=true}}else if(t===P.SecondLevel){e.switchToInitialState()}else{e.handleSwitchToMasterAreaOnPhone()}e.updateHeaderButtonsState()};b.prototype._createPopoverToggleButton=function(){var e=this.getAllMyAppsController();var t=new h("sapUshellAllMyAppsToggleListButton",{icon:v.getIconURI("sap-icon://menu2"),press:function(t){e.switchToInitialState();this.setTooltip(t.getParameter("pressed")?g.i18n.getText("ToggleButtonHide"):g.i18n.getText("ToggleButtonShow"))},tooltip:g.i18n.getText("ToggleButtonShow"),visible:e.getToggleListButtonVisible()});y.media.attachHandler(function(){t.setVisible(e.getToggleListButtonVisible())},this,y.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t};b.prototype._getPopoverFooterContent=function(){var o=new t("allMyAppsButton",{text:g.i18n.getText("allMyApps_launchingButtonTitle"),press:this._allMyAppsButtonPressHandler.bind(this),visible:{path:"/ShellAppTitleState",formatter:function(e){return e===S.ShellNavMenu}}});var l=new e("shellpopoverFooter",{contentMiddle:[o]});this.addCustomData(o,"role","button");this.addCustomData(o,"aria-label",g.i18n.getText("allMyApps_launchingButtonTitle"));return l};b.prototype._allMyAppsButtonPressHandler=function(){if(u.byId(this.getAllMyApps())){A.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");this.getModel().setProperty("/ShellAppTitleState",S.AllMyApps);this.oNavMenuPopover.close();this._bOpenAllMyApps=true}};b.prototype._isNavMenuEnabled=function(){var e=u.byId(this.getNavigationMenu());return e?e.getItems()&&e.getItems().length>0:false};b.prototype.addCustomData=function(e,t,o){e.addCustomData(new M({key:t,value:o,writeToDom:true}))};b.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}};b.prototype.setTooltip=function(e){this.setAggregation("tooltip",e);this.oIcon.setTooltip(e)};b.prototype.getAllMyAppsController=function(){var e=u.byId(this.getAllMyApps());return e.getController()};b.prototype.onkeyup=function(e){if(e.keyCode===32){this.onclick(e)}};b.prototype.onsapenter=b.prototype.onclick;b.prototype.exit=function(){var e=u.byId(this.getNavigationMenu());var t=u.byId(this.getAllMyApps());if(e){e.destroy()}if(t){t.destroy()}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy()}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy()}if(this.oIcon){this.oIcon.destroy()}};return b},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellHeadItem", ["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ushell/library","sap/ushell/resources"],function(e,t,a,i,r,o){"use strict";var n=r.FloatingNumberType;var l=t.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{library:"sap.ushell",properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"string",group:"Appearance",defaultValue:n.None}},events:{press:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getTarget();e.openStart("a",t);e.attr("tabindex","0");if(i){e.attr("href",i)}e.attr("role",i?"link":"button");var r=t.getAriaLabel();if(r){e.attr("aria-label",r)}var o=t.getAriaHidden();if(o){e.attr("aria-hidden",o)}var n=t.getAriaHaspopup();if(n){e.attr("aria-haspopup",n)}e.attr("aria-describedby",t._oAriaDescribedbyText.getId());if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getFloatingNumber()>0){e.attr("data-counter-content",t.floatingNumberFormatter());e.class("sapUshellShellHeadItmCounter")}e.class("sapUshellShellHeadItm");if(!t.getEnabled()){e.class("sapUshellShellHeadItmDisabled")}if(t.getSelected()){e.class("sapUshellShellHeadItmSel")}var l=t.getText();var s=t.getTooltip_AsString();if(l&&s&&l!==s){e.attr("title",l+" "+s)}else if(l||s){e.attr("title",l||s)}e.openEnd();e.openStart("span");e.class("sapUshellShellHeadItmCntnt");var u=t.getIcon();var p=a.isIconURI(u)&&a.getIconInfo(u);if(p){e.style("font-family",p.fontFamily);e.openEnd();e.text(p.content)}else{e.openEnd();e.voidStart("img");e.attr("id",t.getId()+"-img-inner");e.attr("src",u);e.voidEnd()}e.close("span");e.close("a")}}});l.prototype.init=function(){this._oAriaDescribedbyText=new i(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText)};l.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case n.None:this._oAriaDescribedbyText.setText("");break;default:var e=this.getFloatingNumber();if(!e){this._oAriaDescribedbyText.setText("")}else{var t=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText(e>t?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",t):o.i18n.getText("NotificationToggleButton.NewNotifications",e))}break}};l.prototype.tooltipFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case n.None:return"";case n.Notifications:if(!t){return o.i18n.getText("NotificationToggleButton.NoNewNotifications")}return t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",a):o.i18n.getText("NotificationToggleButton.NewNotifications",t);case n.OverflowButton:var i=o.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!t){return i}i+=" ("+(t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",a):o.i18n.getText("NotificationToggleButton.NewNotifications",t))+")";return i}};l.prototype.floatingNumberFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();return t>a?a+"+":t.toString()};l.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault()}}};l.prototype.onkeyup=function(e){var t=e.originalEvent;var a=t.key;var i=t.shiftKey;if(["Enter"," "].includes(a)&&!i){this.onclick(e)}};e.set("sap.ui.unified.ShellHeadItem",l);return l},true);
/*!
 * Copyright (c) 2009-2022 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/shell/ShellLayout", ["sap/base/Log","sap/ui/core/Control","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/Config","sap/ushell/library","sap/ushell/ui/shell/ToolArea","sap/ushell/ui/shell/ShellLayoutRenderer"],function(e,t,a,jQuery,i,o){"use strict";var l=t.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{library:"sap.ushell",properties:{headerHiding:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},floatingContainerVisible:{type:"boolean",group:"Appearance",defaultValue:false},backgroundColorForce:{type:"boolean",group:"Appearance",defaultValue:true,deprecated:true},showBrandLine:{type:"boolean",group:"Appearance",defaultValue:true,deprecated:true},showAnimation:{type:"boolean",group:"Appearance",defaultValue:true,deprecated:true},enableCanvasShapes:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},rightFloatingContainer:{type:"sap.ushell.ui.shell.RightFloatingContainer",multiple:false},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false},floatingActionsContainer:{type:"sap.ushell.ui.shell.ShellFloatingActions",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{header:{type:"sap.ushell.ui.shell.ShellHeader",multiple:false},floatingContainer:{type:"sap.ushell.ui.shell.FloatingContainer",multiple:false}}}});l._SIDEPANE_WIDTH_PHONE=13;l._SIDEPANE_WIDTH_TABLET=13;l._SIDEPANE_WIDTH_DESKTOP=15;l.prototype.getHeader=function(){return sap.ui.getCore().byId(this.getAssociation("header"))};l.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._showHeader=true;this._useStrongBG=false;a.media.attachHandler(this._handleMediaChange,this,a.media.RANGESETS.SAP_STANDARD);this._oDoable=o.on("/core/shellHeader/headerVisible").do(this.setHeaderVisible.bind(this));this._oStorage=new i(i.Type.local,"com.sap.ushell.adapters.local.FloatingContainer")};l.prototype.destroy=function(){a.media.detachHandler(this._handleMediaChange,this,a.media.RANGESETS.SAP_STANDARD);if(this._oDoable){this._oDoable.off();this._oDoable=null}if(this._oRm){this._oRm.destroy();this._oRm=null}t.prototype.destroy.apply(this,arguments)};l.prototype.onAfterRendering=function(){this._setSidePaneWidth();if(this.getEnableCanvasShapes()){sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){if(sap.ui.getCore().isThemeApplied()){e.drawShapes()}})}};l.prototype.renderFloatingContainerWrapper=function(){this._oFloatingContainerWrapper=document.getElementById("sapUshellFloatingContainerWrapper");if(!this._oFloatingContainerWrapper){this._oFloatingContainerWrapper=document.createElement("DIV");this._oFloatingContainerWrapper.setAttribute("id","sapUshellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden");window.document.body.appendChild(this._oFloatingContainerWrapper)}if(this._oStorage&&this._oStorage.get("floatingContainerStyle")){this._oFloatingContainerWrapper.style.cssText=this._oStorage.get("floatingContainerStyle")}};l.prototype.renderFloatingContainer=function(e){this.renderFloatingContainerWrapper();if(e&&!e.getDomRef()){if(!this._oFloatingContainerWrapper.classList.contains("sapUshellShellHidden")){this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden")}e.placeAt("sapUshellFloatingContainerWrapper")}};l.prototype.onThemeChanged=function(){return!!this.getDomRef()};l.prototype.setToolAreaVisible=function(t){this.setProperty("toolAreaVisible",!!t,true);if(this.getToolArea()){this.getToolArea().toggleStyleClass("sapUshellShellHidden",!t);this.applySplitContainerSecondaryContentSize();return this}if(t){sap.ui.require(["sap/ushell/EventHub"],function(e){e.emit("CreateToolArea")});return this}e.debug("Tool area not created but visibility updated",null,"sap.ushell.ShellLayout");return this};l.prototype.getToolAreaSize=function(){if(this.getToolAreaVisible()){if(this.getToolArea().hasItemsWithText()){return"15rem"}return"3.0625rem"}return"0"};l.prototype.setFooter=function(e){this.setAggregation("footer",e,true);this._renderFooter(e)};l.prototype.applySplitContainerSecondaryContentSize=function(){var e=this.getToolAreaSize();this.getCanvasSplitContainer().applySecondaryContentSize(e)};l.prototype.setFloatingContainer=function(e){this.setAssociation("floatingContainer",e,true);this.renderFloatingContainer(e)};l.prototype.setFloatingContainerVisible=function(e){this.setProperty("floatingContainerVisible",!!e,true);if(this.getDomRef()){var t=window.document.getElementById("sapUshellFloatingContainerWrapper");if(e&&this._oStorage&&!this._oStorage.get("floatingContainerStyle")){var a=jQuery(".sapUshellShellHeadItm").position()?jQuery(".sapUshellShellHeadItm").position().left:0;var i=(jQuery(window).width()-jQuery("#shell-floatingContainer").width()-a)*100/jQuery(window).width();var o=jQuery(".sapUshellShellHeader").height()*100/jQuery(window).height();t.style.left=i+"%";t.style.top=o+"%";t.style.position="absolute";this._oStorage.put("floatingContainerStyle",t.style.cssText)}var l=window.document.querySelector(".sapUshellShellFloatingContainerWrapper");if(l&&e===l.classList.contains("sapUshellShellHidden")){l.classList.toggle("sapUshellShellHidden")}}return this};l.prototype.setFloatingActionsContainer=function(e){this.setAggregation("floatingActionsContainer",e,true)};l.prototype.setHeaderVisible=function(e){this.setProperty("headerVisible",e,true);var t=this.getDomRef();if(t){if(e===true){t.classList.remove("sapUshellShellNoHead")}else{t.classList.add("sapUshellShellNoHead")}}};l.prototype._setSidePaneWidth=function(e){var t=this.getCanvasSplitContainer();if(t){if(!e){e=a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name}var i=l["_SIDEPANE_WIDTH_"+e.toUpperCase()]+"rem";t.setSecondaryContentSize(i)}};l.prototype._hideFooter=function(e,t){e.classList.remove("sapUshellShellFooterVisible");t.classList.add("sapUiHidden")};l.prototype._showFooter=function(e,t,a){if(a._applyContextClassFor){a._applyContextClassFor("footer")}this._oRm=this._oRm||sap.ui.getCore().createRenderManager();e.classList.add("sapUshellShellFooterVisible");t.classList.remove("sapUiHidden");this._oRm.render(a,t)};l.prototype._renderFooter=function(e){var t=this.getDomRef();if(!t){return}var a=t.querySelector("#"+this.getId()+"-footer");a.innerHTML="";if(!e){this._hideFooter(t,a);return}this._showFooter(t,a,e)};l.prototype._handleMediaChange=function(e){if(!this.getDomRef()){return}this._setSidePaneWidth(e.name)};return l},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellLayoutRenderer", ["sap/ushell/resources"],function(e){"use strict";var a={apiVersion:2};a.render=function(a,t){var n=t.getId();a.openStart("div",t);a.class("sapUshellShell");if(!t.getHeaderVisible()){a.class("sapUshellShellNoHead")}a.class("sapUshellShellHead"+(t._showHeader?"Visible":"Hidden"));a.openEnd();a.openStart("div");a.style("z-index","-2");a.class("sapUiShellBackgroundImage");a.class("sapUiGlobalBackgroundImageForce");a.class("sapUshellShellBG");a.class("sapContrastPlus");a.openEnd();a.close("div");if(t.getEnableCanvasShapes()){a.openStart("canvas",n+"-shapes");a.attr("height",window.innerHeight>0?window.innerHeight:screen.height);a.attr("width",window.innerWidth>0?window.innerWidth:screen.width);a.attr("role","presentation");a.style("position","absolute");a.style("z-index","-1");a.openEnd();a.close("canvas")}if(t.getToolArea()){a.openStart("aside");a.attr("aria-label",e.i18n.getText("ToolArea_AriaLabel"));a.openEnd();a.renderControl(t.getToolArea());a.close("aside")}if(t.getRightFloatingContainer()){a.openStart("aside");a.attr("aria-label",e.i18n.getText("FloatingContainer_AriaLabel"));a.openEnd();a.renderControl(t.getRightFloatingContainer());a.close("aside")}a.openStart("main",n+"-cntnt");a.attr("role","main");a.attr("aria-label",e.i18n.getText("ShellLayout.AriaLabel"));a.class("sapUshellShellCntnt");a.class("sapUshellShellCanvas");a.openEnd();a.renderControl(t.getCanvasSplitContainer());a.close("main");a.renderControl(t.getFloatingActionsContainer());var l=t.getFooter();a.openStart("footer",n+"-footer");a.class("sapMPageFooter");if(!l){a.class("sapUiHidden")}a.openEnd();if(l){if(l._applyContextClassFor){l._applyContextClassFor("footer")}a.renderControl(l)}a.close("footer");a.close("div")};return a},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SplitContainer", ["sap/base/Log","sap/ui/core/Control","sap/ui/core/library","sap/ushell/library","sap/ushell/ui/shell/ContentRenderer","sap/ushell/ui/shell/SplitContainerRenderer"],function(e,t,n,r,o){"use strict";var i=n.Orientation;var a=t.extend("sap.ushell.ui.shell.SplitContainer",{metadata:{library:"sap.ushell",properties:{showSecondaryContent:{type:"boolean",group:"Appearance",defaultValue:false},secondaryContentSize:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px"},secondaryContentWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px",deprecated:true},orientation:{type:"sap.ui.core.Orientation",group:"Appearance",defaultValue:i.Horizontal}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},secondaryContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondaryContent"},subHeader:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"}}}});(function(){a.prototype.init=function(){this._paneRenderer=new o(this,this.getId()+"-panecntnt","secondaryContent");this._canvasRenderer=new o(this,this.getId()+"-canvasrootContent","content");this.aSubHeaders=[];this.sTopOfShellContent=undefined};a.prototype.exit=function(){this._paneRenderer.destroy();delete this._paneRenderer;this._canvasRenderer.destroy();delete this._canvasRenderer;this.destroySubHeader();delete this.aSubHeaders;delete this.sTopOfShellContent};a.prototype.onAfterRendering=function(){var e=this.getParent()?this.getParent().getToolAreaSize():"0";this.applySecondaryContentSize(e)};a.prototype.applySecondaryContentSize=function(e){if(this.getDomRef()){var t=this.getSecondaryContentSize(),n=this.getShowSecondaryContent(),r=sap.ui.getCore().getConfiguration().getRTL()?"right":"left",o=this.getDomRef("pane"),a,s;if(this.getOrientation()===i.Vertical){a="top";s=r;o.style.height=t;o.style.width=""}else{a=r;s="top";o.style.height="";o.style.width=t}o.style[a]=n?e:"-"+t;o.style[s]="";this.$("pane").toggleClass("sapUshellSplitContSecondClosed",!n);t=parseFloat(t)+parseFloat(e)+"rem";this.getDomRef("canvas").style[a]=n?t:e}};a.prototype._modifyAggregationOrProperty=function(e,t){var n=!!this.getDomRef();var r=e.apply(this,[n]);if(n&&t){t.render()}return r};a.prototype.getSecondaryContentWidth=function(){e.warning('SplitContainer: Use of deprecated property "SecondaryContentWidth", please use '+'"SecondaryContentSize" instead.');return this.getSecondaryContentSize.apply(this,arguments)};a.prototype.setSecondaryContentWidth=function(){e.warning('SplitContainer: Use of deprecated property "SecondaryContentWidth", please use '+'"SecondaryContentSize" instead.');return this.setSecondaryContentSize.apply(this,arguments)};a.prototype.insertContent=function(e,t){return this._modifyAggregationOrProperty(function(n){return this.insertAggregation("content",e,t,n)},this._canvasRenderer)};a.prototype.addContent=function(e){return this._modifyAggregationOrProperty(function(t){return this.addAggregation("content",e,t)},this._canvasRenderer)};a.prototype.removeContent=function(e){return this._modifyAggregationOrProperty(function(t){return this.removeAggregation("content",e,t)},this._canvasRenderer)};a.prototype.removeAllContent=function(){return this._modifyAggregationOrProperty(function(e){return this.removeAllAggregation("content",e)},this._canvasRenderer)};a.prototype.destroyContent=function(){return this._modifyAggregationOrProperty(function(e){return this.destroyAggregation("content",e)},this._canvasRenderer)};a.prototype.insertSecondaryContent=function(e,t){return this._modifyAggregationOrProperty(function(n){return this.insertAggregation("secondaryContent",e,t,n)},this._paneRenderer)};a.prototype.addSecondaryContent=function(e){return this._modifyAggregationOrProperty(function(t){return this.addAggregation("secondaryContent",e,t)},this._paneRenderer)};a.prototype.removeSecondaryContent=function(e){return this._modifyAggregationOrProperty(function(t){return this.removeAggregation("secondaryContent",e,t)},this._paneRenderer)};a.prototype.removeAllSecondaryContent=function(){return this._modifyAggregationOrProperty(function(e){return this.removeAllAggregation("secondaryContent",e)},this._paneRenderer)};a.prototype.destroySecondaryContent=function(){return this._modifyAggregationOrProperty(function(e){return this.destroyAggregation("secondaryContent",e)},this._paneRenderer)};a.prototype.addSubHeader=function(e){var t=this.getParent()&&this.getParent().getId();if(!t||!window.document.getElementById(t+"-subhdr")){var n=document.getElementById("shell-header")?document.getElementById("shell-header").offsetHeight:0;window.document.getElementById("canvas").insertAdjacentHTML("beforebegin",'<div id="'+t+'-subhdr" class="sapUshellSpltContainerSubHeader"></div>');document.getElementById(t+"-subhdr").style.top=n+"px";if(this.getParent()){this.getParent().addEventDelegate({onAfterRendering:function(){if(this.sTopOfShellContent){var e=document.getElementById(this.getParent().getId()+"-cntnt");e.style.top=this.sTopOfShellContent}}.bind(this)})}}this.aSubHeaders.push(e);this.sOriginalTopOfShellContent=t&&document.getElementById(t+"-cntnt")?document.getElementById(t+"-cntnt").offsetTop:0;e.addEventDelegate({onAfterRendering:function(e){if(document.getElementById(this.getParent().getId()+"-cntnt")){var t=document.getElementById(this.getParent().getId()+"-cntnt");this.sTopOfShellContent=t.style.top=this.sOriginalTopOfShellContent+this.aSubHeaders[0].getDomRef().offsetHeight+"px"}}.bind(this)});window.document.getElementById(t+"-subhdr").style.display="block";e.placeAt(t+"-subhdr","only")};a.prototype.removeSubHeader=function(){var e=this.aSubHeaders;this.aSubHeaders=[];var t=document.getElementById(this.getParent().getId()+"-cntnt");t.style.top=this.sOriginalTopOfShellContent+"px";var n=this.getParent()&&this.getParent().getId();window.document.getElementById(n+"-subhdr").style.display="none";return e};a.prototype.getSubHeader=function(){return this.aSubHeaders};a.prototype.destroySubHeader=function(){for(var e=0;this.aSubHeaders.length>e;e++){this.aSubHeaders[e].destroy();delete this.aSubHeaders[e]}this.aSubHeaders=[]};a.prototype.setSecondaryContentSize=function(e){this.setProperty("secondaryContentSize",e,true);this.onAfterRendering()};a.prototype.setShowSecondaryContent=function(e){this.setProperty("showSecondaryContent",!!e,!!this.getDomRef());this.onAfterRendering();return this}})();return a});
//Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/SplitContainerRenderer", ["sap/ui/core/library","sap/ushell/resources"],function(t,n){"use strict";var e=t.Orientation;var o={apiVersion:2};o.render=function(t,o){var a=o.getId();var s=o.getShowSecondaryContent();t.openStart("div",o);t.class("sapUshellSpltCont");if(o.getOrientation()===e.Vertical){t.class("sapUshellSpltContV")}else{t.class("sapUshellSpltContH")}if(!s){t.class("sapUshellSpltContPaneHidden")}t.openEnd();var r=a+"-pane";var l=s?o.getSecondaryContentSize():"0";t.openStart("aside",r);t.class("sapUshellSpltContPane");if(!s){t.class("sapUshellSplitContSecondClosed")}t.attr("aria-label",n.i18n.getText("SecondaryContent_AriaLabel"));t.style("width",l);t.openEnd();this.renderSecondaryContent(t,r,o.getSecondaryContent());t.close("aside");var i=a+"-canvas";t.openStart("section",i);t.class("sapUshellSpltContCanvas");t.openEnd();this.renderRootContent(t,i,o.getContent());t.close("section");t.close("div")};o.renderRootContent=function(t,n,e){t.openStart("div",n+"cntnt");t.class("sapUshellSpltContCntnt");t.attr("data-sap-ui-root-content","true");t.openEnd();if(e&&e.length){t.openStart("div",n+"rootContent");t.class("sapUshellSpltContainerContentWrapper");t.openEnd();e.forEach(function(n){t.renderControl(n)});t.close("div")}t.close("div")};o.renderSecondaryContent=function(t,n,e){t.openStart("div",n+"cntnt");t.class("sapUshellSpltContCntnt");t.attr("data-sap-ui-root-content","true");t.openEnd();e.forEach(function(n){t.renderControl(n)});t.close("div")};return o},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolArea", ["sap/ui/core/Control","sap/ushell/library"],function(e){"use strict";var t=e.extend("sap.ushell.ui.shell.ToolArea",{metadata:{library:"sap.ushell",aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.class("sapUshellToolArea");if(!t.hasItemsWithText()){e.class("sapUshellToolAreaTextHidden")}e.openEnd();e.openStart("div");e.attr("id",t.getId()+"-cntnt");e.class("sapUshellToolAreaContainer");e.openEnd();var l=t.getToolAreaItems(),s,o;for(s=0;s<l.length;s++){o=l[s];if(o.getVisible()){e.openStart("div");e.class("sapUshellToolAreaContent");if(o.getSelected()){e.class("sapUshellToolAreaItemSelected")}e.openEnd();e.renderControl(o);e.close("div");e.openStart("div");e.class("sapUshellToolAreaContentSeparator");e.openEnd();e.close("div")}}e.close("div");e.close("div")}}});t.prototype.hasItemsWithText=function(){var e=this.getToolAreaItems(),t,l;for(t=0;t<e.length;t++){l=e[t];if(l.getVisible()&&l.getText()){return true}}return false};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolAreaItem", ["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(jQuery,e,t){"use strict";var a=e.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{apiVersion:2,render:function(e,a){var l;e.openStart("div",a);if(!a.getIcon()){e.class("sapUshellToolAreaItmTextOnly")}else{e.class("sapUshellToolAreaItm")}if(!a.getVisible()){e.class("sapUshellShellHidden")}if(a.getAriaLabel()){e.accessibilityState(a,{label:this.getAriaLabel(),role:"button"})}var s=a.getTooltip_AsString();if(s){e.attr("title",s)}e.openEnd();if(a.getIcon()){l=t.createControlByURI(a.getIcon());l.setUseIconTooltip(false);l.addStyleClass("sapUshellToolAreaItemIcon");e.renderControl(l)}if(a.getText()){e.openStart("span");e.class("sapUshellToolAreaItemText");e.openEnd();e.text(a.getText());e.close("span")}if(a.getExpandable()){this.renderExpandable(e)}e.close("div")},renderExpandable:function(e){var a=t.createControlByURI("sap-icon://icon-dropdown");a.addStyleClass("sapUshellToolAreaItemExpandable");e.renderControl(a)}}});a.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false)}else{this.setSelected(true)}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand()}else{this.firePress()}};a.prototype.onsapenter=a.prototype.onclick;a.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e)};a.prototype.setSelected=function(e){e=!!e;if(e){var t=jQuery(".sapUshellToolAreaItemSelected");t.each(function(){jQuery(this).removeClass("sapUshellToolAreaItemSelected")})}this.setProperty("selected",e,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",e)};a.prototype.setVisible=function(e){var t=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!e,t);this.$().toggleClass("sapUshellShellHidden",!e)};a.prototype.setAriaLabel=function(e){this.setProperty("ariaLabel",e);return this};return a},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/CardNavigation", ["sap/ui/core/service/Service","sap/ushell/Config","sap/ushell/library","sap/base/Log","sap/ushell/utils/WindowUtils"],function(e,t,i,n,r){"use strict";var s=i.AppType;var o=e.extend("sap.ushell.ui5service.CardNavigation",{constructor:function(){this.oCrossAppNavPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation")}});o.prototype.navigate=function(e){var i=e.parameters;if(i.openUI){if(i.openUI==="RecentActivities"||i.openUI==="FrequentActivities"){sap.ui.require(["sap/ushell/ui/QuickAccess"],function(e){var t=i.openUI==="RecentActivities"?"recentActivityFilter":"frequentlyUsedFilter";e.openQuickAccessDialog(t)})}else{n.error("Request to open unknown User Interface: '"+i.openUI+"'")}return Promise.resolve()}else if(i.url&&i.url!==""){var o=t.last("/core/shell/enableRecentActivity")&&t.last("/core/shell/enableRecentActivityLogging");if(o){var a={title:i.title,url:i.url,appType:s.URL,appId:i.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(a)}r.openURL(i.url,"_blank");return Promise.resolve()}return this.oCrossAppNavPromise.then(function(e){return e.toExternal({target:{semanticObject:i.intentSemanticObject,action:i.intentAction},params:i.intentParameters,appSpecificRoute:i.intentAppRoute})})};o.prototype.enabled=function(e){var t=e.parameters;if(t.openUI){if(["RecentActivities","FrequentActivities"].indexOf(t.openUI)>-1){return Promise.resolve(true)}return Promise.resolve(false)}var i={target:{semanticObject:t.intentSemanticObject,action:t.intentAction},params:t.intentParameters};return this.oCrossAppNavPromise.then(function(e){return new Promise(function(t){e.isNavigationSupported([i]).done(function(e){t(e[0].supported)}).fail(function(){t(false)})})})};return o});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/CardUserFrequents", ["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(e,t,n){"use strict";var i=e.extend("sap.ushell.ui5service.CardUserFrequents");i.prototype.getData=function(){if(!n.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([])}return this.oUserRecentsPromise.then(function(e){return new Promise(function(t,n){e.getFrequentActivity().done(function(e){t(this._getActivitiesAsCardItems(e))}.bind(this)).fail(function(e){n(e)})}.bind(this))}.bind(this))};i.prototype.attachDataChanged=function(e){t.on("newUserRecentsItem").do(function(t){var n=this._sortAsFrequentActivities(t.recentUsageArray);var i=[];for(var s=0;s<n.length;s++){i.push(n[s].oItem)}var r=this._getActivitiesAsCardItems(i);e({data:r})}.bind(this));t.on("userRecentsCleared").do(function(){e({data:[]})})};i.prototype._sortAsFrequentActivities=function(e){var t,n=0,i=[],s,r=e[0]?new Date(e[0].iTimestamp):undefined,o;for(t=0;t<e.length&&n<30;t++){s=e[t];if(s.iCount>1){i.push(s)}o=new Date(s.iTimestamp);if(r.toDateString()!==o.toDateString()){n++;r=o}}i.sort(function(e,t){return t.iCount-e.iCount});return i.slice(0,30)};i.prototype.detachDataChanged=function(){t.on("newUserRecentsItem").off();t.on("userRecentsCleared").off()};i.hasNoAdapter=true;return i},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/CardUserRecents", ["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(e,t,n){"use strict";var s=e.extend("sap.ushell.ui5service.CardUserRecents");s.prototype.getData=function(){if(!n.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([])}return this.oUserRecentsPromise.then(function(e){return new Promise(function(t,n){e.getRecentActivity().done(function(e){t(this._getActivitiesAsCardItems(e))}.bind(this)).fail(function(e){n(e)})}.bind(this))}.bind(this))};s.prototype.attachDataChanged=function(e){t.on("newUserRecentsItem").do(function(t){var n=t.recentUsageArray;var s=[];for(var r=0;r<n.length;r++){s.push(n[r].oItem)}var i=this._getActivitiesAsCardItems(s);e({data:i})}.bind(this));t.on("userRecentsCleared").do(function(){e({data:[]})})};s.prototype.detachDataChanged=function(){t.on("newUserRecentsItem").off();t.on("userRecentsCleared").off()};s.hasNoAdapter=true;return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/ShellUIService", ["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(e,r,c,i){"use strict";return i({serviceRegistry:e,serviceFactory:r,service:c})},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase", ["sap/ui/core/service/Service","sap/ushell/resources","sap/ushell/library","sap/ushell/utils/AppType","sap/ushell/utils/UrlParsing"],function(e,r,t,s,i){"use strict";var n=t.AppType;function c(e,r){if(r===n.SEARCH){return'"'+e+'"'}return e}function p(e){if(e===n.SEARCH){return r.i18n.getText("recentActivitiesSearchDescription")}return s.getDisplayName(e)}var a=e.extend("sap.ushell.ui5service._CardUserRecents.CardUserRecentsBase",{constructor:function(){e.apply(this);this.oUserRecentsPromise=sap.ushell.Container.getServiceAsync("UserRecents")}});a.prototype._getActivitiesAsCardItems=function(e){var r=[],t={},s;for(var n=0;n<e.length;n++){if(e[n].url&&e[n].url!==""){t=i.parseShellHash(e[n].url);s={Name:c(e[n].title,e[n].appType),Description:p(e[n].appType),Icon:e[n].icon||"sap-icon://product"};if(t){s.Intent={SemanticObject:t.semanticObject,Action:t.action,Parameters:t.params,AppSpecificRoute:t.appSpecificRoute}}else{s.Url=e[n].url}r.push(s)}}return r};return a},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory", ["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/util/isPlainObject","sap/base/util/Version","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,n,r,i,a){"use strict";return function(o){var s=o.serviceRegistry,c=o.serviceFactory,l=o.service;var u;var h=new e;var d={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var p;var v=l.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var e=this,t=this.getInterface();t.init=function(){e._amendPublicServiceInstance.call(e,this)};s.register("sap.ushell.ui5service.ShellUIService",new c(t))},_setActiveComponentId:function(e){p=e},_getActiveComponentId:function(){return p},_shouldEnableAutoHierarchy:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto"},_shouldEnableAutoTitle:function(e){return typeof e.getManifestEntry==="function"&&e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto"},_enableAutoHierarchy:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}n.attachTitleChanged(function(e){var n=e.getParameter("history");t.setHierarchy(n.reverse().map(function(e){var n=t._getCurrentShellHashWithoutAppRoute();return{title:e.title,intent:n+"&/"+e.hash}}))})},_enableAutoTitle:function(e){var t=this;var n=e.getRouter&&e.getRouter();if(!n){i.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}var r=n.getTitleHistory()[0];if(r&&r.title){setTimeout(function(){t.setTitle(r.title)},0)}n.attachTitleChanged(function(e){var n=e.getParameter("title");t.setTitle(n)})},_getCurrentShellHashWithoutAppRoute:function(){var e="#"+t.getHash();var n=a.getShellHash(e);if(!n){i.error("Cannot get the current shell hash","UrlParsing service returned a falsy value for "+e,"sap.ushell.ui5service.ShellUIService");return""}return"#"+n},_getEventProvider:function(){return h},_getLastSetTitle:function(){return u},_ensureArrayOfObjectOfStrings:function(e,t){var r=Array.isArray(e)&&e.every(function(e){return n(e)&&Object.keys(e).length>0&&Object.keys(e).every(function(t){return typeof e[t]==="string"})});if(!r){i.error("'"+t+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService")}return r},_ensureFunction:function(e,t){var n=typeof e;if(n!=="function"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a function, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_ensureString:function(e,t){var n=typeof e;if(n!=="string"){i.error("'"+t+"' was called with invalid arguments","the parameter should be a string, got '"+n+"' instead","sap.ushell.ui5service.ShellUIService");return false}return true},_addCallAllowedCheck:function(e,t){var n=this;e[t]=function(){var r=e.getContext();if(!r||r.scopeObject.getId()!==p){i.warning("Call to "+t+" is not allowed","This may be caused by an app component other than the active '"+p+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setHierarchy"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoHierarchy(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}if(t==="setTitle"&&r.scopeType==="component"&&r.scopeObject&&n._shouldEnableAutoTitle(r.scopeObject)){i.warning("Call to "+t+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined}return n[t].apply(e,arguments)}},_amendPublicServiceInstance:function(e){var t=this,n;n=e.getContext();if(typeof n==="undefined"){return}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(n){t._addCallAllowedCheck(e,n)});var r=n.scopeObject;if(n.scopeType==="component"&&r){this._setActiveComponentId(r.getId());if(this._shouldEnableAutoHierarchy(r)){this._enableAutoHierarchy(r)}if(this._shouldEnableAutoTitle(r)){this._enableAutoTitle(r)}return}i.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService")},setHierarchy:function(e){if(typeof e!=="undefined"&&!v.prototype._ensureArrayOfObjectOfStrings(e,"setHierarchy")){return}var t=this.getContext().scopeObject;h.fireEvent(d.hierarchyChanged,{data:e,component:t})},setTitle:function(e){if(typeof e!=="undefined"&&!v.prototype._ensureString(e,"setTitle")){return}var t=this.getContext().scopeObject;u=e;h.fireEvent(d.titleChanged,{data:e,component:t})},setBackNavigation:function(e){if(typeof e!=="undefined"&&!v.prototype._ensureFunction(e,"setBackNavigation")){return}var t=this.getContext().scopeObject;h.fireEvent(d.backNavigationChanged,{data:e,component:t})},getTitle:function(){return this._getLastSetTitle()},setRelatedApps:function(e){if(typeof e!=="undefined"&&!v.prototype._ensureArrayOfObjectOfStrings(e,"setRelatedApps")){return}var t=this.getContext().scopeObject;h.fireEvent(d.relatedAppsChanged,{data:e,component:t})},getUxdVersion:function(){if(new r(sap.ui.version).compareTo("1.37.0")>=0){return 2}return 1},_attachHierarchyChanged:function(e){this._getEventProvider().attachEvent(d.hierarchyChanged,e)},_detachHierarchyChanged:function(e){this._getEventProvider().detachEvent(d.hierarchyChanged,e)},_attachTitleChanged:function(e){this._getEventProvider().attachEvent(d.titleChanged,e)},_attachBackNavigationChanged:function(e){this._getEventProvider().attachEvent(d.backNavigationChanged,e)},_detachBackNavigationChanged:function(e){this._getEventProvider().detachEvent(d.backNavigationChanged,e)},_detachTitleChanged:function(e){this._getEventProvider().detachEvent(d.titleChanged,e)},_attachRelatedAppsChanged:function(e){this._getEventProvider().attachEvent(d.relatedAppsChanged,e)},_detachRelatedAppsChanged:function(e){this._getEventProvider().detachEvent(d.relatedAppsChanged,e)}});return v}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils", ["sap/base/Log","sap/base/util/ObjectPath","sap/base/util/uid","sap/base/util/UriParameters","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/utils/clone","sap/ushell/utils/UrlParsing","sap/ushell/utils/objectOperations","sap/ushell/utils/type"],function(e,t,r,n,i,jQuery,a,o,s,u,l){"use strict";var c={};c.isArray=l.isArray;c.isPlainObject=l.isPlainObject;c.isDefined=l.isDefined;c.clone=o;c.getMember=u.getMember;c.updateProperties=u.updateProperties;c.getNestedObjectProperty=u.getNestedObjectProperty;c.removeDuplicatedActions=function(e){if(Array.isArray(e)){var t=e.reduce(function(e,t){if(e.indexOf(t)<0){e.push(t)}return e},[]);return t}return e};c.storeSapSystemData=function(t,r){var n,i,a,o=[t.id];if(arguments.length>1){o.unshift(r)}try{a=JSON.stringify(t)}catch(t){e.error("Cannot stringify and store expanded system data: "+t)}if(a){i=c.getLocalStorage();n=c.generateLocalStorageKey("sap-system-data",o);i.setItem(n,a)}};c.getLocalSystemInSidFormat=function(){var e=sap.ushell.Container.getLogonSystem(),t=e.getName(),r=e.getClient();return"sid("+t+"."+r+")"};c.matchesLocalSid=function(e){return c.getLocalSystemInSidFormat().toLowerCase()===e.toLowerCase()};c.storeSapSystemToLocalStorage=function(e){var t=(e||{}).params;if(!t||!t.hasOwnProperty("sap-system")){return}if(c.isPlainObject(t["sap-system"])){var r=t["sap-system"],n=t["sap-system-src"];if(typeof n==="string"){c.storeSapSystemData(r,n);t["sap-system-src"]=n}else{c.storeSapSystemData(r)}t["sap-system"]=r.id}else if(c.matchesLocalSid(t["sap-system"])){delete t["sap-system"]}};c.setPerformanceMark=function(e,t){if(performance&&performance.mark){if(!t){t={}}if(t.bUseUniqueMark){if(t.bUseLastMark){performance.clearMarks(e)}else if(performance.getEntriesByName(e,"mark").length>0){return}}performance.mark(e)}};c.setPerformanceMeasure=function(e,t,r){if(performance&&performance.measure&&t&&r){performance.measure(e,t,r)}};c.Error=function(t,r){this.name="sap.ushell.utils.Error";this.message=t;e.error(t,null,r)};c.Error.prototype=new Error;c.localStorageSetItem=function(t,r,n){var i;try{localStorage.setItem(t,r);if(n){i=document.createEvent("StorageEvent");i.initStorageEvent("storage",false,false,t,"",r,"",localStorage);dispatchEvent(i)}}catch(t){e.warning("Error calling localStorage.setItem(): "+t,null,"sap.ushell.utils")}};c.getLocalStorage=function(){return window.localStorage};c.getLocalStorageItem=function(e){return window.localStorage.getItem(e)};c.generateUniqueId=function(e){var t,r,n;if(Array.isArray(e)){r=e;n=function(e){return r.indexOf(e)===-1}}else{n=e}do{t=c._getUid()}while(!n(t));return t};c._getUid=function(){return r()};c.reload=function(){location.reload()};c.calculateOrigin=function(e){var t;if(e.origin){return e.origin}if(e.protocol&&e.hostname){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}if(e.href){t=new a(e.href);return t.protocol()+"://"+t.hostname()+(t.port()?":"+t.port():"")}return undefined};c.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm()}return undefined};c.hasNativeNavigationCapability=function(){return c.isFeatureBitEnabled(1)};c.getShellType=function(){return c.isFeatureBitEnabled(1)?"NWBC":"FLP"};c.hasNativeLogoutCapability=function(){return c.isFeatureBitEnabled(2)};c.hasNavigationModeCapability=function(){return c.isFeatureBitEnabled(4)};c.hasFLPReadyNotificationCapability=function(){return c.isFeatureBitEnabled(8)};c.hasFLPReady2NotificationCapability=function(){return c.isFeatureBitEnabled(16)};c.isFeatureBitEnabled=function(t){var r="0",n;n=c.getPrivateEpcm();if(n){try{r=n.getNwbcFeatureBits();e.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+r)}catch(t){e.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",t.stack,"sap.ushell.utils")}}return(parseInt(r,16)&t)>0};c.isApplicationTypeEmbeddedInIframe=function(e){return e==="NWBC"||e==="TR"||e==="WCF"};c.appendSapShellParam=function(e,t){var r=t==="TR"?"":"-NWBC",n=c.getUi5Version();if(n){e+=e.indexOf("?")>=0?"&":"?";e+="sap-shell="+encodeURIComponent("FLP"+n+r)}return e};function f(e){var t=/\d+\.\d+\.\d+/.exec(e);if(t&&t[0]){return t[0]}return undefined}c.getUi5VersionAsync=function(){return new Promise(function(t,r){sap.ui.require(["sap/ui/VersionInfo"],function(r){r.load().then(function(e){t(f(e.version))}).catch(function(){e.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback");t(f(sap.ui.version))})})})};c.getUi5Version=function(){var t;try{t=sap.ui.getVersionInfo().version}catch(r){e.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback "+r);t=sap.ui.version}return f(t)};c.isNativeWebGuiNavigation=function(e){var r=t.get("applicationType",e);var n=t.get("appCapabilities.nativeNWBCNavigation",e);if(this.hasNativeNavigationCapability()&&(r==="TR"||n)){return true}return false};c.Map=function(){this.entries={}};c.Map.prototype.put=function(e,t){var r=this.get(e);this.entries[e]=t;return r};c.Map.prototype.containsKey=function(e){if(typeof e!=="string"){throw new c.Error("Not a string key: "+e,"sap.ushell.utils.Map")}return Object.prototype.hasOwnProperty.call(this.entries,e)};c.Map.prototype.get=function(e){if(this.containsKey(e)){return this.entries[e]}};c.Map.prototype.keys=function(){return Object.keys(this.entries)};c.Map.prototype.remove=function(e){delete this.entries[e]};c.Map.prototype.toString=function(){var e=["sap.ushell.utils.Map("];e.push(JSON.stringify(this.entries));e.push(")");return e.join("")};c.getParameterValueBoolean=function(e,t){var r=n.fromQuery(t||window.location.search),i=r.getAll(e),a=["true","x"],o=["false",""],s;if(!i||i.length===0){return undefined}s=i[0].toLowerCase();if(a.indexOf(s)>=0){return true}if(o.indexOf(s)>=0){return false}return undefined};c.call=function(t,r,n){var i;if(n){setTimeout(function(){c.call(t,r,false)},0);return}try{t()}catch(t){i=t.message||t.toString();e.error("Call to success handler failed: "+i,t.stack,"sap.ushell.utils");if(r){r(i)}}};c.handleTilesVisibility=function(){c.getVisibleTiles()};c.refreshTiles=function(){sap.ui.getCore().getEventBus().publish("launchpad","refreshTiles")};c.setTilesNoVisibility=function(){sap.ui.getCore().getEventBus().publish("launchpad","setTilesNoVisibility")};c.getBasicHash=function(t){if(!c.validHash(t)){e.debug("Utils ; getBasicHash ; Got invalid hash");return false}var r=s.parseShellHash(t);return r?r.semanticObject+"-"+r.action:t};c.validHash=function(e){return e&&e.constructor===String&&jQuery.trim(e)!==""};c.getFormFactor=function(){var e=sap.ui.Device.system;if(e.desktop){return e.SYSTEMTYPE.DESKTOP}if(e.tablet){return e.SYSTEMTYPE.TABLET}if(e.phone){return e.SYSTEMTYPE.PHONE}return undefined};c.getVisibleTiles=function(){var e=document.body.clientHeight,t=sap.ui.getCore().byId("dashboardGroups"),r=sap.ui.getCore().byId("viewPortContainer"),n,i,a,o,s,u,l,f,p,d,g,h=jQuery("#shell-hdr").height(),m=[],y,v,b=[],w=sap.ui.getCore().getEventBus(),S,E,C,T;if(window.document.hidden){w.publish("launchpad","onHiddenTab")}if(t&&t.getGroups()&&r){y=jQuery(t.getDomRef());v=y?y.is(":visible"):false;S=t.getGroups();for(n=0;n<S.length;n=n+1){o=S[n];s=o.getTiles();u=o.getLinks();E=[s,u];for(a=0;a<E.length;a++){C=E[a];if(C){for(i=0;i<C.length;i++){l=C[i];if(!v||window.document.hidden){m.push(l)}else{f=jQuery(l.getDomRef());p=f.offset();if(p){d=f.offset().top;g=d+f.height();T=o.getVisible()&&g>h-300&&d<e+300;if(T){b.push({oTile:c.getTileModel(l),iGroup:n,bIsExtanded:!(g>h)||!(d<e)})}else if(b.length>0){w.publish("launchpad","visibleTilesChanged",b);return m}m.push(l)}}}}}}}if(b.length>0){w.publish("launchpad","visibleTilesChanged",b)}return m};c.getTileModel=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject():null};c.getTileObject=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject().object:null};c.recalculateBottomSpace=function(){var e=jQuery("#dashboardGroups").find(".sapUshellTileContainer:visible"),t=e.last(),r=jQuery(".sapUshellShellHead > header").height(),n=t.parent().height(),i=parseInt(t.find(".sapUshellContainerTitle").css("margin-top"),10),a=parseInt(jQuery(".sapUshellDashboardGroupsContainer").css("padding-bottom"),10),o;if(e.length===1){o=0}else{o=jQuery(window).height()-r-n-i-a;o=o<0?0:o}jQuery(".sapUshellDashboardGroupsContainer").css("margin-bottom",o+"px")};c.calcVisibilityModes=function(e,t){var r=true,n=true,a=e.pendingLinks&&e.pendingLinks.length?e.pendingLinks:e.links,o=c.groupHasVisibleTiles(e.tiles,a);if(!o&&(!t||e.isGroupLocked||e.isDefaultGroup||i.system.phone||i.system.tablet&&!i.system.desktop)){r=false}if(!o&&!t){n=false}return[r,n]};c.groupHasVisibleTiles=function(e,t){var r=false,n,i,a=!e?[]:e,o=!t?[]:t;a=a.concat(o);if(!a.length){return false}for(n=0;n<a.length;n=n+1){i=a[n];if(i.isTileIntentSupported){r=true;break}}return r};c.invokeUnfoldingArrayArguments=function(t,r){var n=this,i,a,o,s,u;if(!Array.isArray(r[0])){return t.apply(this,r)}i=r[0];if(i.length===0){return(new jQuery.Deferred).resolve([]).promise()}a=new jQuery.Deferred;o=[];s=[];u=(new jQuery.Deferred).resolve();i.forEach(function(r,i){if(!Array.isArray(r)){var a="Expected Array as nTh Argument of multivalue invocation: "+"first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : "+"multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]";e.error(a);throw new Error(a)}var l=t.apply(n,r),c=new jQuery.Deferred;l.done(function(){var e=Array.prototype.slice.call(arguments);s[i]=e;c.resolve()}).fail(c.reject.bind(c));o.push(c.promise());u=jQuery.when(u,c)});jQuery.when.apply(jQuery,o).done(function(){a.resolve(s)}).fail(function(){a.reject("failure")});return a.promise()};c._getCurrentDate=function(){return new Date};c._convertToUTC=function(e){return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())};c.formatDate=function(e){var t,r,n,i,a,o;var s=sap.ui.require("sap/ushell/resources");t=c._convertToUTC(new Date(e));r=c._convertToUTC(c._getCurrentDate());n=r-t;i=parseInt(n/(1e3*60*60*24),10);if(i>0){if(i===1){return s.i18n.getText("time_day",i)}return s.i18n.getText("time_days",i)}a=parseInt(n/(1e3*60*60),10);if(a>0){if(a===1){return s.i18n.getText("time_hour",a)}return s.i18n.getText("time_hours",a)}o=parseInt(n/(1e3*60),10);if(o>0){if(o===1){return s.i18n.getText("time_minute",o)}return s.i18n.getText("time_minutes",o)}return s.i18n.getText("just_now")};c.toExternalWithParameters=function(e,t,r){return Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CrossApplicationNavigation")]).then(function(n){var i=n[0];var a=n[1];var o={};var s=t.split("&/");if(s.length>1){o.appSpecificRoute="&/"+s[1]}o.target={semanticObject:e,action:s[0]};if(r&&r.length>0){o.params={};r.forEach(function(e){o.params[e.Key]=e.Value})}return a.toExternal({target:{shellHash:i.constructShellHash(o)}})})};c.moveElementInsideOfArray=function(e,t,r){if(!c.isArray(e)||t===undefined||r===undefined){throw new Error("Incorrect input parameters passed")}if(t>=e.length||r>=e.length||r<0||t<0){throw new Error("Index out of bounds")}var n=e.splice(t,1)[0];e.splice(r,0,n);return e};c.shallowMergeObject=function(e){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(e){return{sourceObject:e,properties:Object.keys(e)}}).reduce(function(e,t){t.properties.forEach(function(r){e[r]=t.sourceObject[r]});return e},e)};c.getLocationHref=function(){return window.location.href};c.generateLocalStorageKey=function(e,t){var r=t.length;if(r===0){throw new Error("At least one id should be provided when generating the local storage key")}var n="$";if(r===2){n="#"}else if(r>2){n="@"+r+"@"}return e+n+t.join(":")};c.urlParametersToString=function(e,t,r){return s.privparamsToString(e,t,r)};c.isRootIntent=function(e){if(typeof e!=="string"){throw new Error("The given intent must be a string")}var r="renderers.fiori2.componentData.config.rootIntent";var n=t.get(r,window["sap-ushell-config"])||"#Shell-home";var i=n.replace("#","");var a=e.replace("#","");return a===""||a===i};c.isFlpHomeIntent=function(e){if(!e){e=window.location.hash;if(!e){e=t.get("renderers.fiori2.componentData.config.rootIntent",window["sap-ushell-config"])||"Shell-home"}}else if(typeof e!=="string"){throw new Error("The given intent must be a string")}var r=e.replace("#","");return r.indexOf("Shell-home")===0||r.indexOf("Launchpad-openFLPPage")===0||r.indexOf("Launchpad-openWorkPage")===0};c.generateRandomKey=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var t="";var r=new window.Uint32Array(40);window.crypto.getRandomValues(r);var n=function(t){var n=r[t]%e.length;return e[n]};while(t.length<40){t+=n(t.length)}return t};c.copyToClipboard=function(e){var t;var r=document.createElement("textarea");try{r.contentEditable=true;r.readonly=false;r.textContent=e;document.documentElement.appendChild(r);r.select();document.execCommand("copy");t=true}catch(e){t=false}finally{r.parentNode.removeChild(r)}return t};c._getUserSettingPersContainer=function(){return sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t={container:"sap.ushell.usersettings.personalization",item:"data"};var r={validity:"Infinity",keyCategory:e.constants.keyCategory.GENERATED_KEY,writeFrequency:e.constants.writeFrequency.HIGH,clientStorageAllowed:false};return e.getPersonalizer(t,r)})};c.getHideEmptySpacesEnabled=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(e){var t=e.last("/core/spaces/hideEmptySpaces/enabled");if(!t){return Promise.resolve(false)}return c._getUserSettingPersContainer().then(function(e){return new Promise(function(t,r){e.getPersData().done(t).fail(r)})}).then(function(t){var r=(t||{}).hideEmptySpaces!==false;if(e.last("/core/spaces/hideEmptySpaces/userEnabled")!==r){e.emit("/core/spaces/hideEmptySpaces/userEnabled",r)}return r})})};c.setHideEmptySpacesEnabled=function(e){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(t){var r=t.last("/core/spaces/hideEmptySpaces/enabled");if(!r){return Promise.resolve()}return c._getUserSettingPersContainer().then(function(r){return new Promise(function(e,t){r.getPersData().done(e).fail(t)}).then(function(n){n=n||{};var i=n.hideEmptySpaces!==false;if(i===!!e){return Promise.resolve()}n.hideEmptySpaces=e;return new Promise(function(e,t){r.setPersData(n).done(e).fail(t)}).then(function(){t.emit("/core/spaces/hideEmptySpaces/userEnabled",e)})})})})};c.sanitizeTimeoutDelay=function(e){if(typeof e!=="number"){throw new Error("Invalid type! Expected type 'number'.")}var t=2147483647;return e>t?t:e};return c},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/AppType", ["sap/ushell/library","sap/ushell/resources"],function(e,t){"use strict";var p=e.AppType;var r={};r.getDisplayName=function(e){switch(e){case p.OVP:return t.i18n.getText("Apptype.OVP");case p.SEARCH:return t.i18n.getText("Apptype.SEARCH");case p.FACTSHEET:return t.i18n.getText("Apptype.FACTSHEET");case p.COPILOT:return t.i18n.getText("Apptype.COPILOT");case p.URL:return t.i18n.getText("Apptype.URL");default:return t.i18n.getText("Apptype.APP")}};return r});
//Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/RestrictedJSONModel", ["sap/ui/model/json/JSONModel"],function(t){"use strict";function e(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported")}return t.extend("sap.ushell.utils.RestrictedJSONModel",{constructor:function(){t.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=e;this.setData=e;this.setJSON=e;this.setProperty=e;this.loadData=e},_setData:function(){t.prototype.setData.apply(this,arguments)},_setJSON:function(){this.setData=t.prototype.setData;t.prototype.setJSON.apply(this,arguments);this.setData=e},_setProperty:function(){this.setData=t.prototype.setData;t.prototype.setProperty.apply(this,arguments);this.setData=e}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlParsing", ["sap/ui/thirdparty/URI","sap/base/util/UriParameters","sap/base/Log"],function(e,t,n){"use strict";function r(){}var a=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;r.getShellHash=function(e){var t=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/,n=t.exec(e);if(n){return n[1]}return undefined};r.getHash=function(e){var t=/#(.*)/,n=t.exec(e);if(n){return n[1]}return undefined};r.isIntentUrl=function(e){return this._isIntentUrl(e,window.location.href)};r.isIntentUrlAsync=function(e){return new Promise(function(e,t){sap.ushell.Container.getFLPUrlAsync(true).done(e).fail(t)}).then(function(t){return this._isIntentUrl(e,t)}.bind(this))};r._isIntentUrl=function(t,n){var a=/^#/,i,s,o,u,p,c;if(typeof t!=="string"){return false}if(!a.test(t)){i=new e(t).normalize();o=i.protocol()+"://"+i.host()+i.pathname();s=new e(n).normalize();u=s.protocol()+"://"+s.host()+s.pathname();if(o!==u){return false}}p=r.getHash(t);if(!p){return false}c=r.parseShellHash(p);if(c&&c.semanticObject&&c.action){return true}return false};r.parseParameters=function(e){var n=t.fromQuery(e);var r=n.keys();var a=r.next();var i={};while(a.done===false){i[decodeURIComponent(a.value)]=n.getAll(a.value);a=r.next()}return i};function i(e,t,n){var r,a,i,s,o,u="";t=t||"&";n=n||"=";r="";a=null;o=[];for(a in e){if(e.hasOwnProperty(a)){o.push(a)}}o.sort();for(i=0;i<o.length;i=i+1){a=o[i];if(Array.isArray(e[a])){for(s=0;s<e[a].length;s=s+1){u+=r+encodeURIComponent(a)+n+encodeURIComponent(e[a][s]);r=t}}else{u+=r+encodeURIComponent(a)+n+encodeURIComponent(e[a]);r=t}}return u}r.paramsToString=function(e){return i(e)};r.privparamsToString=function(e,t,n){return i(e,t,n)};r.parseShellHash=function(e){var t=a,n,i,s,o,u,p,c;if(!e){return undefined}n=r.splitHash(e);p=t.exec(n.shellPart);if(p){i=p[2];s=p[3];o=p[5];u=p[6];c=r.parseParameters(u);return{semanticObject:i,action:s,contextRaw:o,params:c,appSpecificRoute:n.appSpecificRoute}}if(n.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:n.appSpecificRoute}}return undefined};r.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};r.splitHash=function(e){var t=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,n,r,i;if(e===undefined||e===null||e===""){return{}}n=t.exec(e);r=n[1];if(r!==""&&!a.test(r)){return{}}i=n[2];if(r||i){return{shellPart:r,appSpecificRoute:i}}return{}};function s(e,t){if(t){return e+t}return e}r.constructShellHash=function(e){var t,a,i,o=null,u,p=[],c="?",f=null;if(!e){return""}if(!e.target){e.target={};e.target.semanticObject=e.semanticObject;e.target.action=e.action;e.target.contextRaw=e.contextRaw}if(e.target.shellHash||e.target.shellHash===""){i=r.privstripLeadingHash(e.target.shellHash);return s(i,e.appSpecificRoute)}if(e.target.semanticObject&&e.target.action){t=e.target.semanticObject+"-"+e.target.action.replace(/[?].*/,"")}else{return s("",e.appSpecificRoute)}if(e.target.contextRaw){t+="~"+e.target.contextRaw}c="?";f=null;p=[];for(f in e.params){if(e.params.hasOwnProperty(f)){p.push(f)}}a=e.params&&JSON.parse(JSON.stringify(e.params))||{};if(e.appStateKey){p.push("sap-xapp-state");a["sap-xapp-state"]=e.appStateKey}p.sort();for(u=0;u<p.length;u=u+1){f=p[u];if(Array.isArray(a[f])){if(a[f].length>1){n.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(o=0;o<a[f].length;o=o+1){t+=c+encodeURIComponent(f)+"="+encodeURIComponent(a[f][o]);c="&"}}else{t+=c+encodeURIComponent(f)+"="+encodeURIComponent(a[f]);c="&"}}return s(t,e.appSpecificRoute)};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlShortening", ["sap/base/Log","sap/ushell/utils/UrlParsing"],function(t,e){"use strict";function a(){var a=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(e,a){var r,s;if(typeof e!=="string"||/^[A-Z0-9]{40,41}$/.test(e)){return e}try{r=JSON.parse(e)}catch(a){t.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return e}s=a&&a.getNextKey();this._storeValue(s,r,a);return s};this.compactHash=function(r,s,i){var n,p,h,c,o,u=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(s){s.forEach(function(t){u.push(t)})}n=e.parseShellHash(r);if(!n){t.error("the URL "+r+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:r}}c="";if(r.charAt(0)==="#"){c="#"}var f=n&&n.params&&n.params["sap-xapp-state"]&&n.params["sap-xapp-state"][0];if(f){n.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(f,i)];r=c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:n.params,appSpecificRoute:n.appSpecificRoute})}if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}if(n&&(n.params&&n.params[a.ABBREV_PARAM_NAME])){return{hash:r}}p=i&&i.getNextKey();h=this._splitParameters(n.params,u,p);if(!h.key){return{hash:r}}o=e.paramsToString(h.tailParams);this._storeValue(h.key,o,i);return{hash:c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:h.headParams,appSpecificRoute:n.appSpecificRoute}),params:h.headParams,skippedParams:h.tailParams}};this.checkHashLength=function(r){var s,i,n;if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}s=e.parseShellHash(r);n="";if(r.charAt(0)==="#"){n="#"}i=this._splitParameters(s.params,[],"DummyKey");if(i.key){t.error("Application startup parameter length exceeds "+a.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete i.headParams[this.ABBREV_PARAM_NAME];return{hash:n+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:i.headParams,appSpecificRoute:s.appSpecificRoute}),params:i.headParams,skippedParams:i.tailParams}}t.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:r}};this._findIndex=function(t,e){var a=t.indexOf(e);if(a>=0){return a}a=-1;t.every(function(t,r){if(t.length>0&&t[t.length-1]==="*"&&t.substring(0,t.length-1)===e.substring(0,t.length-1)){a=r;return false}return true});return a};this._cmpByList=function(t,e,a){var r,s;t=t||[];if(e===a){return 0}r=this._findIndex(t,e);s=this._findIndex(t,a);if(r>=0&&s>=0){if(r-s!==0){return r-s}if(e<a){return-1}if(e>a){return+1}return 0}if(r>=0){return-1}if(s>=0){return+1}if(e<a){return-1}return+1};this._sortByPriority=function(t,e){return t.sort(this._cmpByList.bind(this,e))};this._splitParameters=function(e,a,r){var s,i,n,p={},h={},c=false,o,u,f=0,l,m=[];if(!r||typeof r!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!")}for(s in e){if(Object.prototype.hasOwnProperty.call(e,s)){m.push(s)}}m.sort();m=this._sortByPriority(m,a);for(n=0;n<m.length;n=n+1){s=m[n];o=e[s];if(o.length>1){t.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<o.length;i=i+1){u=e[s][i];l=s.length+u.length;if(l+f>this.URL_PARAMS_LENGTH_LIMIT){if(h[s]){h[s].push(u)}else{h[s]=[u]}c=true}else if(p[s]){p[s].push(u)}else{p[s]=[u]}f=f+l+1}}if(c){p[this.ABBREV_PARAM_NAME]=[r]}return{key:r,tailParams:h,headParams:p}};this.expandHash=function(t){var e=function(t){return a._retrieveValue(t)};return this.expandParamGivenRetrievalFunction(t,this.ABBREV_PARAM_NAME,e)};this.expandParamGivenRetrievalFunction=function(t,a,r){var s,i,n,p,h;if(typeof t!=="string"){return t}s=e.parseShellHash(t);n=s&&s.params&&s.params[a]&&s.params[a][0];if(!n){return t}p="";if(t.charAt(0)==="#"){p="#"}i=r(n);if(!i){return t}h=this._blendParameters(s.params,a,i);return p+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:h,appSpecificRoute:s.appSpecificRoute})};this._retrieveValue=function(){return undefined};this._storeValue=function(t,e,a){if(a&&typeof a.store==="function"){a.store(e)}};this._blendParameters=function(t,a,r){var s=e.parseParameters("?"+r),i;delete t[a];for(i in s){if(Object.prototype.hasOwnProperty.call(s,i)){if(t[i]){t[i]=t[i].concat(s[i])}else{t[i]=s[i]}}}return t}}var r=new a;return r},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/WindowUtils", ["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/base/util/UriParameters"],function(r,e,n,t){"use strict";var i={};i.hasInvalidProtocol=function(r){var e=document.createElement("a");e.setAttribute("href",r);if(e.protocol==="javascript:"){return true}return false};i.isCrossOriginUrl=function(r){return e(r)};i.openURL=function(e,n,t,i){var o=i===undefined?true:i,a=this.isCrossOriginUrl(e);t=t||"";if(o&&this.hasInvalidProtocol(e)){r.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(a){if(t.toLowerCase().indexOf("noopener")===-1){if(t!==""){t+=","}t+="noopener"}if(t.toLowerCase().indexOf("noreferrer")===-1){t+=",noreferrer"}window.open(e,n,t);return true}return window.open(e,n,t)};i.getLeanURL=function(e,n){var t=e||n;if(this.hasInvalidProtocol(t)){r.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((t||"").charAt(0)!=="#"){return t}var i=window.location.search;if(!i){i="?appState=lean"}else if(i.indexOf("appState=")>=-1){i+="&appState=lean"}return window.location.origin+window.location.pathname+i+t};i._getAdjustedQueryString=function(r){if(r&&r.length>0){var e=t.fromQuery(window.location.search);var i=Array.from(e.keys()).reduce(function(r,n){r[n]=e.getAll(n);return r},{});r.forEach(function(r){var e=Object.keys(r)[0];if(e){i[e]=r[e]}});return n.urlParametersToString(i)}return null};i.refreshBrowser=function(r){var e=n.getLocationHref(),t=i._getAdjustedQueryString(r);if(t){e=e.replace(location.search,"?"+t)}if(n.getLocationHref()===e){window.location.reload(true)}else{window.location=e}};return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/clone", ["sap/ushell/utils/type"],function(e){"use strict";function r(r){function n(r){return e.isPlainObject(r)?{}:[]}function t(r){if(r instanceof Promise){return false}return e.isPlainObject(r)||e.isArray(r)}function a(r){if(e.isPlainObject(r)){return Object.keys(r).map(function(e){return{key:e,value:r[e]}})}var n=r.length;var t=[];for(var a=0;a<n;a++){t.push({value:r[a]})}return t}function u(r,n){var t=e.isPlainObject(n)?function(e,r){r[e.key]=e.value}:function(e,r){r.push(e.value)};t(r,n)}function i(e,r,n){r.push(e.length);Array.prototype.push.apply(n,e)}if(!t(r)){return r}var s=n(r);var f=[s];var l=[];var v=[];var c=new WeakMap;c.set(r,s);i(a(r),v,l);while(f.length>0){var o=f.shift();var p=v.shift();l.splice(0,p).forEach(function(e){var r=e.value;if(!t(r)){u(e,o);return}var s=r;var p=c.get(s);if(p){u({key:e.key,value:p},o);return}var h=n(s);c.set(s,h);u({key:e.key,value:h},o);f.push(h);i(a(s),v,l)})}return s}return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/objectOperations", [],function(){"use strict";var r={};r.getMember=function(r,e){var n=e.split("."),t=r;if(!r){return undefined}n.forEach(function(r){if(typeof t!=="object"){return undefined}t=t[r.replace(/[|]/g,".")]});return t};r.updateProperties=function(r,e){Object.keys(r).forEach(function(n){if(e.hasOwnProperty(n)){r[n]=e[n]}})};r.getNestedObjectProperty=function(r,e,n){var t="Missing or invalid parameter";if(!r||!Array.isArray(r)||r.length==0||!e){throw new Error(t)}if(Array.isArray(e)&&e.length!=r.length){throw new Error(t)}var i=e;if(!Array.isArray(e)){i=Array.apply(null,Array(r.length)).map(function(){return e})}var u=r.reduce(function(r,e,n){if(r!==undefined){return r}return this.getMember(e,i[n])}.bind(this),undefined);return u!=undefined?u:n};return r},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/type", [],function(){"use strict";function t(t){return Object.prototype.toString.apply(t)==="[object Array]"}function e(t){return Object.prototype.toString.apply(t)==="[object Object]"}function n(t){return typeof t!=="undefined"}return{isArray:t,isPlainObject:e,isDefined:n}},false);
sap.ui.require.preload({
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui"\n    xmlns:core="sap.ui.core"\n    xmlns:shell="sap.ushell.ui.shell"><ShellHeader\n        id="shell-header"\n        showLogo="{/showLogo}"\n        visible="{/headerVisible}"\n        homeUri="{/homeUri}"\n        headItems="{ path: \'/headItems\', factory: \'.shellUpdateAggItem\' }"\n        headEndItems="{ path: \'/headEndItems\', factory: \'.shellUpdateAggItem\', filters: [{ path: \'\', test: \'.isHeadEndItemNotInOverflow\' }] }"\n        centralAreaElement="{/centralAreaElement}"\n        title="{/title}"><appTitle><shell:ShellAppTitle\n                id="shellAppTitle"\n                text="{/application/title}"\n                title="{/application/title}"\n                icon="{/application/icon}"\n                subTitle="{/title}"\n            /></appTitle></ShellHeader></core:FragmentDefinition>\n',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui.shell"\n    xmlns:core="sap.ui.core"\n    xmlns:ui="sap.ushell.ui"><ShellLayout\n        id="shell"\n        floatingContainerVisible="false"\n        toolAreaVisible="{/currentState/toolAreaVisible}"\n        enableCanvasShapes="{/enableBackGroundShapes}"><canvasSplitContainer><SplitContainer\n                id="shell-split"\n                showSecondaryContent="{/currentState/showPane}"\n                subHeader="{ path: \'/currentState/subHeader\', factory: \'.shellUpdateAggItem\' }"\n                secondaryContent="{ path: \'/currentState/paneContent\', factory: \'.shellUpdateAggItem\' }"><content><core:ComponentContainer id="menuBarComponentContainer" async="true" /><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate" /></content><secondaryContent /></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer\n                id="right-floating-container"\n                top="8"\n                hideItemsAfterPresentation="true"\n                visible="{/currentState/showRightFloatingContainer}"\n                floatingContainerItems="{ path: \'/currentState/RightFloatingContainerItems\', factory: \'.shellUpdateAggItem\' }" /></rightFloatingContainer></ShellLayout></core:FragmentDefinition>\n'
},"sap/ui/core/library-preload");
sap.ui.requireSync("sap/ui/core/Core");
// as this module contains the Core, we ensure that the Core has been booted
sap.ui.getCore().boot && sap.ui.getCore().boot();
//# sourceMappingURL=core-min-3.js.map
