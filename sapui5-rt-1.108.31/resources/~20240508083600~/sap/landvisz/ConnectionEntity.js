/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2013 SAP AG. All rights reserved
 */
sap.ui.define(["sap/landvisz/library","sap/landvisz/internal/LinearRowField","sap/ui/core/Control","sap/ui/core/HTML","sap/ui/core/Popup","sap/ui/commons/Image","sap/ui/commons/Label","sap/ui/commons/layout/VerticalLayout","sap/ui/ux3/ToolPopup","./ConnectionEntityRenderer"],function(t,o,e,i,n,s,a,l,p,u){"use strict";var r=n.Dock;var h=t.ConnectionType;var d=t.EntityCSSSize;var c=t.DependencyType;var y=t.ViewType;var g=e.extend("sap.landvisz.ConnectionEntity",{metadata:{library:"sap.landvisz",properties:{connectionId:{type:"string",group:"Data",defaultValue:null},size:{type:"string",group:"Data",defaultValue:null},type:{type:"sap.landvisz.ConnectionType",group:"Identification",defaultValue:null},linkId:{type:"string",group:"Data",defaultValue:null},linkedHeader:{type:"string",group:"Data",defaultValue:null},dependencyTooltip:{type:"string",group:"Data",defaultValue:null},showOverlay:{type:"boolean",group:"Data",defaultValue:true}},aggregations:{connectionData:{type:"sap.landvisz.internal.LinearRowField",multiple:true,singularName:"connectionData"}}}});g.prototype.init=function(){this.viewType;this.top=0;this.left=0;this.width=0;this.height=90;this.innerTop=0;this.innerLeft=0;this.innerWidth=0;this.innerHeight=0;this.holdDisplay=false;this.initializationDone=false};g.prototype.initControls=function(){if(!this.oVLayoutRows)this.oVLayoutRows=new l(this.getId()+"-ConnectionRowVLayout");if(!this.connectionLabel)this.connectionLabel=new a(this.getId()+"-connectionLabel");if(!this.connectionImage)this.connectionImage=new s(this.getId()+"-connectionImage");if(!this.oVLayoutCallout)this.oVLayoutCallout=new l(this.getId()+"-calloutVLayout");if(!this.oVLayoutToolPopup)this.oVLayoutToolPopup=new l(this.getId()+"-toolPopupVLayout");if(!this.calloutLabel)this.calloutLabel=new a(this.getId()+"-calloutLabel");if(!this.toolPopup){this.toolPopup=new p(this.getId()+"toolpopup");this.toolPopup.addContent(this.oVLayoutToolPopup)}if(this.getType()==h.ProductSystem)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS productSystemPopup");if(this.getType()==h.TechnicalSystem)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS technicalSystemPopup");if(this.getType()==h.MobileSolution)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutPS mobileSolutionPopup");this.toolPopup.addStyleClass("sapLandviszCalloutPS");if(this.getSize()==d.Small)this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutRowFieldSmall");else this.oVLayoutToolPopup.addStyleClass("sapLandviszCalloutRowField")};g.prototype.onclick=function(t){if(t.target.id==this.getId()+"connectionRow")t.srcControl.holdDisplay=!t.srcControl.holdDisplay;else this.holdDisplay=!this.holdDisplay;if(this.holdDisplay){if(this.viewType==c.NETWORK_VIEW){var o=jQuery(document.getElementById(this.getId()+"connectionRow"));this.toolPopup.setOpener(o);if(!this.toolPopup.isOpen()){this.toolPopup.setPosition(r.CenterBottom,r.CenterTop,o,"-10 0","fit");var e=jQuery(document.getElementById(this.getId()+"toolpopup"));this.toolPopup.open()}}this.fireEvent("connectionMouseover")}};g.prototype.onmouseenter=function(t){if(this.viewType==y.SOLUTION_VIEW)t.stopImmediatePropagation();else if(t.target.id==this.getId()+"connectionRow"){var o=false;var e=false;for(var i=0;i<this.getParent().getConnectionEntities().length;i++){if(this.getParent().getConnectionEntities()[i].holdDisplay==true){if(this.getParent().getConnectionEntities()[i].getId()==this.getId()){o=true;e=true}else{o=true}}}if(!o||e&&o){if(this.viewType==c.NETWORK_VIEW){var n=jQuery(document.getElementById(this.getId()+"connectionRow"));this.toolPopup.setOpener(n);if(!this.toolPopup.isOpen()){this.toolPopup.setPosition(r.CenterBottom,r.CenterTop,n,"-10 0","fit");var s=jQuery(document.getElementById(this.getId()+"toolpopup"));this.toolPopup.open()}}}if(this.getShowOverlay()==true&&this.getLinkId()&&""!=this.getLinkId())this.fireEvent("connectionMouseover")}};g.prototype.onmouseleave=function(t){if(this.viewType==y.SOLUTION_VIEW)t.stopImmediatePropagation();else{if(this.holdDisplay==false&&this.toolPopup.isOpen()){this.toolPopup.close()}if(this.getLinkId()&&""!=this.getLinkId())this.fireEvent("connectionMouseout")}};g.prototype.onAfterRendering=function(){var t=this;jQuery(document.getElementById(this.getId()+"connectionRow")).mouseleave(function(o){t.onmouseleave(o)});jQuery(document.getElementById(this.getId()+"connectionRow")).mouseenter(function(o){t.onmouseenter(o)})};return g});
//# sourceMappingURL=ConnectionEntity.js.map