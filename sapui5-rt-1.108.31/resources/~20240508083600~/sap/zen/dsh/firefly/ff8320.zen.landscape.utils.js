/*
* SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
*/
sap.ui.define(["jquery.sap.global","sap/zen/dsh/firefly/ff8310.zen.buddha","jquery.sap.resources"],function(jQuery){"use strict";(function(t,e){sap.zen.DesignStudio=function(){};sap.zen.DesignStudio.prototype=new t.XObject;sap.zen.DesignStudio.prototype._ff_c="DesignStudio";sap.zen.DesignStudio.prototype.moWindow=null;sap.zen.DesignStudio.prototype.mLanguage=null;sap.zen.DesignStudio.prototype.mSDKLoaderPath=null;sap.zen.DesignStudio.prototype.mApplicationName=null;sap.zen.DesignStudio.prototype.mBIAppPath=null;sap.zen.DesignStudio.prototype.mRepositoryUrl=null;sap.zen.DesignStudio.prototype.mtUrlParameters=null;sap.zen.DesignStudio.prototype.mDesignMode=false;sap.zen.DesignStudio.prototype.mDshControlId=null;sap.zen.DesignStudio.prototype.mPageId=null;sap.zen.DesignStudio.prototype.moLandscapeUtils=null;sap.zen.DesignStudio.prototype.mHost=null;sap.zen.DesignStudio.prototype.mPort=0;sap.zen.DesignStudio.prototype.mProtocol=null;sap.zen.DesignStudio.prototype.mHanaMode=false;sap.zen.DesignStudio.prototype.mClient=null;sap.zen.DesignStudio.prototype.moTemplateLoader=null;sap.zen.DesignStudio.prototype.mLocaleString=null;sap.zen.DesignStudio.prototype.moSDKLoader=null;sap.zen.DesignStudio.prototype.moBookmarkService=null;sap.zen.DesignStudio.prototype.moBookmarkRequestHandler=null;sap.zen.DesignStudio.prototype.mUser=null;sap.zen.DesignStudio.prototype.mPassword=null;sap.zen.DesignStudio.prototype.mUserAgent=null;sap.zen.DesignStudio.prototype.mOptimizeDSRequests=false;sap.zen.DesignStudio.prototype.mStaticMimesRootPath=null;sap.zen.DesignStudio.prototype.moLogging=null;sap.zen.DesignStudio.prototype.mSystemAlias=null;sap.zen.DesignStudio.prototype.moLocalization=null;sap.zen.DesignStudio.prototype.mNewBW=false;sap.zen.DesignStudio.prototype.mRightToLeft=false;sap.zen.DesignStudio.prototype.setLogging=function(t){this.moLogging=t};sap.zen.DesignStudio.prototype.setLocalization=function(t){this.moLocalization=t};sap.zen.DesignStudio.prototype.setSdkLoader=function(t){this.moSDKLoader=t};sap.zen.DesignStudio.prototype.setXWindow=function(t){this.moWindow=t};sap.zen.DesignStudio.prototype.setLanguage=function(t){this.mLanguage=t};sap.zen.DesignStudio.prototype.setSdkLoaderPath=function(t){this.mSDKLoaderPath=t};sap.zen.DesignStudio.prototype.setApplicationName=function(t){this.mApplicationName=t};sap.zen.DesignStudio.prototype.setApplicationPath=function(t){this.mBIAppPath=t};sap.zen.DesignStudio.prototype.setRepositoryUrl=function(t){this.mRepositoryUrl=t};sap.zen.DesignStudio.prototype.setUrlParameter=function(t){this.mtUrlParameters=t};sap.zen.DesignStudio.prototype.setDesignMode=function(t){this.mDesignMode=t};sap.zen.DesignStudio.prototype.setDshControlId=function(t){this.mDshControlId=t};sap.zen.DesignStudio.prototype.setPageId=function(t){this.mPageId=t};sap.zen.DesignStudio.prototype.setLandscapeUtils=function(t){this.moLandscapeUtils=t};sap.zen.DesignStudio.prototype.setHost=function(t){this.mHost=t};sap.zen.DesignStudio.prototype.setPort=function(t){this.mPort=t};sap.zen.DesignStudio.prototype.setProtocol=function(t){this.mProtocol=t};sap.zen.DesignStudio.prototype.setHanaMode=function(t){this.mHanaMode=t};sap.zen.DesignStudio.prototype.setClient=function(t){this.mClient=t};sap.zen.DesignStudio.prototype.setTemplateLoader=function(t){this.moTemplateLoader=t};sap.zen.DesignStudio.prototype.setBookmarkRequestHandler=function(t){this.moBookmarkRequestHandler=t};sap.zen.DesignStudio.prototype.setUser=function(t){this.mUser=t};sap.zen.DesignStudio.prototype.setPassword=function(t){this.mPassword=t};sap.zen.DesignStudio.prototype.setUserAgent=function(t){this.mUserAgent=t};sap.zen.DesignStudio.prototype.setOptimizeDSRequests=function(t){this.mOptimizeDSRequests=t};sap.zen.DesignStudio.prototype.setStaticMimesRootPath=function(t){this.mStaticMimesRootPath=t};sap.zen.DesignStudio.prototype.setSystemAlias=function(t){this.mSystemAlias=t};sap.zen.DesignStudio.prototype.setNewBW=function(t){this.mNewBW=t};sap.zen.DesignStudio.prototype.setRightToLeft=function(t){this.mRightToLeft=t};sap.zen.DesignStudio.prototype.createPage=function(){if(t.isNull(this.moSDKLoader)){this.moSDKLoader=new sap.zen.SDKLoader}if(t.isNull(this.moLogging)){this.moLogging=sap.buddha.XLogging.create()}if(t.isNull(this.moLocalization)){this.moLocalization=sap.buddha.XLocalization.create()}this.moSDKLoader.setRelativePath(this.mSDKLoaderPath);this.moSDKLoader.setRuntimePath(this.mStaticMimesRootPath);if(t.isNull(this.moLandscapeUtils)){this.moLandscapeUtils=new sap.zen.LandscapeUtils}if(t.isNull(this.mLanguage)||t.XString.size(this.mLanguage)===0){this.mLanguage="EN"}this.moLandscapeUtils.doInit(this.mLanguage);if(t.isNull(this.moWindow)){this.moWindow=sap.buddha.XWindow.create()}if(t.isNull(this.mHost)||t.XString.size(this.mHost)===0){this.mHost="localhost"}if(!t.XString.endsWith(this.mBIAppPath,"/")){this.mBIAppPath=t.XStringUtils.concatenate2(this.mBIAppPath,"/")}this.moWindow.setLocale(this.mLocaleString);var e=this.moLandscapeUtils.getSelf();if(t.isNull(e)){if(this.mNewBW||t.XStringUtils.isNotNullAndNotEmpty(this.mClient)){e=this.moLandscapeUtils.addSelfBW(this.mHost,this.mPort,this.mProtocol,this.mClient,this.mSystemAlias,this.mNewBW)}else{e=this.moLandscapeUtils.addSelf(this.mHost,this.mPort,this.mProtocol)}if(t.notNull(this.mUser)&&t.XString.size(this.mUser)>0){e.setUser(this.mUser)}if(t.notNull(this.mPassword)&&t.XString.size(this.mPassword)>0){e.setPassword(this.mPassword)}if(t.isNull(this.moTemplateLoader)&&t.isNull(this.moBookmarkRequestHandler)){this.moTemplateLoader=new sap.zen.TemplateLoader;this.moBookmarkRequestHandler=new sap.zen.BookmarkRequestHandler;var s=e.getSystemType();if(s.isTypeOf(t.SystemType.ABAP)){this.adaptFFForWebDispatcher(e);this.moTemplateLoader.initBaseBW(this.moLandscapeUtils.getApplication(),e,this.mApplicationName,this.mRepositoryUrl);this.moBookmarkRequestHandler.initBaseBW(this.moLandscapeUtils.getApplication(),e)}else{var o=this.mBIAppPath;if(t.XString.startsWith(o,"http://")){o=t.XString.substring(o,7,-1);var i=t.XString.indexOf(o,"/");o=t.XString.substring(o,i,-1)}else if(t.XString.startsWith(o,"https://")){o=t.XString.substring(o,8,-1);var n=t.XString.indexOf(o,"/");o=t.XString.substring(o,n,-1)}o=t.XStringUtils.concatenate2(o,"content.biapp");this.moTemplateLoader.initBase(this.moLandscapeUtils.getApplication(),e,o);this.moBookmarkRequestHandler.initBase(this.moLandscapeUtils.getApplication(),e,o)}}}if(t.isNull(this.moBookmarkService)){this.moBookmarkService=new sap.zen.BookmarkService;this.moBookmarkService.setup()}if(t.isNull(this.mDshControlId)){this.mDshControlId=""}var a=new sap.zen.ZenTemplateService;var p=a.createPage(this.moLandscapeUtils.getApplication(),this.moWindow,this.mApplicationName,this.mBIAppPath,this.mHanaMode,this.mtUrlParameters,this.mDesignMode,this.mDshControlId,this.moSDKLoader,this.mPageId,this.moTemplateLoader,this.mUserAgent,this.moBookmarkService,this.moBookmarkRequestHandler,this.mOptimizeDSRequests,this.moLogging,this.moLocalization,this.mRightToLeft);p.setLocalPort(this.mPort);return p};sap.zen.DesignStudio.prototype.setLocaleString=function(t){this.mLocaleString=t};sap.zen.DesignStudio.prototype.setBookmarkService=function(t){this.moBookmarkService=t};sap.zen.DesignStudio.prototype.adaptFFForWebDispatcher=function(e){if(!e.getSystemType().isTypeOf(t.SystemType.BW)){var s=t.XUri.create();s.setProtocolType(e.getProtocolType());var o=t.HttpClientFactory.newInstanceByConnection(this.moLandscapeUtils.getApplication().getSession(),s);var i=o.getRequest();i.setFromConnectionInfo(e);i.setPath(t.SystemType.BW.getServerInfoPath());i.setMethod(t.HttpRequestMethod.HTTP_GET);i.setAcceptContentType(t.ContentType.APPLICATION_JSON);var n=o.processHttpRequest(t.SyncType.BLOCKING,null,null);if(!n.hasErrors()&&n.getData()!==null&&n.getData().getStatusCode()<400){var a=n.getData().getJsonContent();if(t.notNull(a)&&a.isStructure()){var p=a.asStructure();var r=p.getStructureByKey("ServerInfo");if(t.notNull(r)){var l=r.getStringByKey("Client");if(t.notNull(l)){this.mClient=l;e.setClient(l)}}}}}};sap.zen.LandscapeUtils=function(){};sap.zen.LandscapeUtils.prototype=new t.XObject;sap.zen.LandscapeUtils.prototype._ff_c="LandscapeUtils";sap.zen.LandscapeUtils.registerComponentFactory=function(t,e){sap.zen.ZenTemplateService.soFactory.registerFactory(t,e)};sap.zen.LandscapeUtils.prototype.moApplication=null;sap.zen.LandscapeUtils.prototype.moLandscape=null;sap.zen.LandscapeUtils.prototype.mLanguage=null;sap.zen.LandscapeUtils.prototype.mInitialized=false;sap.zen.LandscapeUtils.prototype.doInit=function(e){if(this.mInitialized){return}this.mInitialized=true;t.IpProviderModule.getInstance();sap.zen.BuddhaModule.getInstance();this.moApplication=t.ApplicationFactory.createDefaultApplicationWithVersion(t.XVersion.DEFAULT_VALUE);this.moLandscape=t.StandaloneSystemLandscape.create(this.getApplication());this.mLanguage=e;this.getApplication().setSystemLandscape(this.moLandscape)};sap.zen.LandscapeUtils.prototype.addSelf=function(e,s,o){var i=this.moLandscape.createSystem();i.setLanguage(this.mLanguage);i.setSystemType(t.SystemType.HANA);i.setName("self");i.setText("self");i.setHost(e);i.setPort(s);i.setAuthenticationType(t.AuthenticationType.BASIC);i.setProtocolType(t.XString.isEqual("https",o)?t.ProtocolType.HTTPS:t.ProtocolType.HTTP);this.moLandscape.setSystemByDescription(i);return i};sap.zen.LandscapeUtils.prototype.addSelfBW=function(e,s,o,i,n,a){var p=this.moLandscape.createSystem();p.setLanguage(this.mLanguage);p.setSystemType(a?t.SystemType.BW:t.SystemType.ABAP);p.setName("self");p.setText("self");p.setHost(e);p.setPort(s);if(t.XStringUtils.isNotNullAndNotEmpty(i)){p.setClient(i)}p.setTimeout(6e4);p.setAuthenticationType(t.AuthenticationType.BASIC);p.setProtocolType(t.XString.isEqual("https",o)?t.ProtocolType.HTTPS:t.ProtocolType.HTTP);p.setAlias(n);this.moLandscape.setSystemByDescription(p);return p};sap.zen.LandscapeUtils.prototype.getApplication=function(){return this.moApplication};sap.zen.LandscapeUtils.prototype.getSelf=function(){return this.moLandscape.getSystemDescription("self")};sap.zen.LandscapeUtils.prototype.getSystem=function(t){return this.moLandscape.getSystemDescription(t)}})(sap.firefly,sap.zen)});
//# sourceMappingURL=ff8320.zen.landscape.utils.js.map