//@ui5-bundle sap/ovp/library-preload.js
sap.ui.predefine("sap/ovp/app/Component", ["sap/fe/core/AppComponent","sap/base/util/ObjectPath","sap/ui/model/json/JSONModel","sap/ovp/ui/DashboardLayoutUtil","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/ui/core/CustomData","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ovp/cards/ovpLogger","sap/ui/Device","sap/ovp/cards/CommonUtils","sap/ovp/placeholder/placeholderHelper","sap/m/App","sap/m/DynamicDateUtil","sap/ovp/cards/MetadataAnalyser","sap/ui/core/mvc/XMLView","sap/ui/core/Core","sap/insights/CardHelper","sap/ui/VersionInfo","sap/suite/ui/commons/collaboration/CollaborationHelper","sap/ovp/cards/charts/OVPChartFormatter","sap/ui/rta/RuntimeAuthoring"],function(e,t,i,r,n,a,o,s,l,u,p,g,c,f,d,h,v,y,m,b,C,P,E,O){"use strict";var S=new p("OVP.app.Component");return e.extend("sap.ovp.app.Component",{metadata:{manifest:"json",routing:{config:{routerClass:"sap.m.routing.Router"},targets:{},routes:[]},properties:{cardContainerFragment:{type:"string",defaultValue:"sap.ovp.app.CardContainer"},dashboardLayoutUtil:{type:"sap.ovp.ui.DashboardLayoutUtil"},designtimePath:{type:"string",defaultValue:"sap/ovp/ui/OVPWrapper.designtime"}},designtime:{actions:{},aggregations:{rootControl:{actions:{},propagateMetadata:function(){return{}}}}},version:"1.108.11",library:"sap.ovp.app",dependencies:{libs:["sap.ovp"],components:[]},config:{fullWidth:true,hideLightBackground:true}},onServicesStarted:function(){},getRoutingService:function(){return{beforeExit:function(){}}},_getOvpCardOriginalConfig:function(e){var t=this.getOvpConfig();return t.cards[e]},suspend:function(){},restore:function(){var e=this.ovpConfig.cards,t=this.createId("mainView"),i=this.byId(t);var r=this.ovpConfig.refreshStrategyOnAppRestore&&this.ovpConfig.refreshStrategyOnAppRestore.entitySets;if(typeof r==="object"){var n=Object.keys(r);var a=e.filter(function(e){return n.includes(e.settings.entitySet)});for(var o=0;o<a.length;o++){var s=a[o];var l=i.createId(s.id);var u=this.byId(l);var p=u.getComponentInstance()&&u.getComponentInstance().getRootControl()&&u.getComponentInstance().getRootControl().getController();if(p){p.refreshCardContent()}}}E.registerCustomFormatters()},getOvpConfig:function(){var e;var t=[];var i=this.getMetadata();while(i&&i.getComponentName()!=="sap.ovp.app"){e=i.getManifestEntry("sap.ovp");if(e){t.unshift(e)}i=i.getParent()}t.unshift({});t.unshift(true);e=l.apply(l,t);return e},_removeExtraArrayElements:function(e,t){var i=e["staticContent"],r=t["staticContent"],n=e["tabs"],a=t["tabs"];if(i&&r){if(i.length>r.length){e["staticContent"].splice(r.length,i.length-r.length)}}if(n&&a){if(n.length>a.length){e["tabs"].splice(a.length,n.length-a.length)}}},_emptyAllArrayElements:function(e,t){var i=e["staticContent"],r=t["staticContent"],n=e["tabs"],a=t["tabs"];if(i&&r){for(var o=0;o<i.length;o++){e["staticContent"][o]={}}}if(n&&a){for(var o=0;o<n.length;o++){e["tabs"][o]={}}}},_mergeObjects:function(e,t){for(var i in t){if(t.hasOwnProperty(i)){var r=t[i];if(typeof r=="object"&&e[i]){if(r.operation==="DELETE"){delete e[i]}else{this._mergeObjects(e[i],r)}}else{if(typeof r=="object"&&!e[i]&&r.operation==="DELETE"){continue}e[i]=r}}}return e},_mergeLayerObject:function(e,t){if(!e[t+".settings"]){return e}var i=l({},e["settings"]),r=l({},e[t+".settings"]);this._removeExtraArrayElements(i,r);this._emptyAllArrayElements(i,r);e["settings"]=this._mergeObjects(i,r);return e},_mergeKeyUserChanges:function(e){if(!e.hasOwnProperty("customer.settings")&&!e.hasOwnProperty("customer_base.settings")&&!e.hasOwnProperty("vendor.settings")){return e}e=this._mergeLayerObject(e,"vendor");e=this._mergeLayerObject(e,"customer_base");e=this._mergeLayerObject(e,"customer");return e},_getFullyQualifiedNameForEntity:function(e,t){var i="",r;if(!e){return""}if(e.indexOf(".")>-1){return e}var n=t.getMetaModel();if(c.isODataV4(t)){var a=n.getObject("/");var o=a[e];i=o.$Type;return i}else{var s=n&&n.getODataEntityContainer();i=s&&s.namespace;if(i&&!(e.indexOf(i)>-1)){r=i+"."+e}else{r=e}return r}},_getDatePropertiesFromEntitySet:function(e,t,i){var r=[],n=[];var a=e.getMetaModel();var o=a&&a.getODataEntityContainer();var s=o.entitySet.filter(function(e){return e.entityType===i});var l=s.length>0?s[0]:{};var p=v.checkAnalyticalParameterisedEntitySet(e,l.name);if(p){var g=v.getParametersByEntitySet(e,l.name);if(g.entitySetName){r=v.getPropertyOfEntitySet(e,g.entitySetName);r.forEach(function(e){e._filterRestriction="single-value"})}}r=r.concat(t.property);for(var f in r){var d={};if(c.isDate(r[f])){d.PropertyPath=r[f].name}if(!u(d)){n.push(d)}}return n},_getAllControlConfiguration:function(e,t,i){for(var r=0;r<e.length;r++){if(i[e[r].PropertyPath]){var n=false;for(var a=0;a<t.length;a++){if(t[a].PropertyPath===e[r].PropertyPath){n=true}}if(!n){e[r].bNotPartOfSelectionField=true;t.push(e[r])}}}return t},_getSettingsForDateProperties:function(e,t){var i={};for(var r in e){if(t.fields&&t.fields[e[r].PropertyPath]){i[e[r].PropertyPath]=this.getConditionTypeForDateSetting(t.fields[e[r].PropertyPath])}else{if(t.customDateRangeImplementation||t.filter||t.selectedValues){i[e[r].PropertyPath]=this.getConditionTypeForDateSetting(t)}}}return i},getConditionTypeForDateSetting:function(e){if(e.customDateRangeImplementation){return{customDateRangeImplementation:e.customDateRangeImplementation}}else if(e.filter){return{filter:e.filter}}else if(e.selectedValues){return{selectedValues:e.selectedValues,exclude:e.exclude!==undefined?e.exclude:true}}else if(e.defaultValue){return{defaultValue:e.defaultValue}}return undefined},createXMLView:function(e){if(this.getRouter()){this.getRouter().initialize()}var a=this.getMetadata().getManifestEntry("sap.app");var o=this.getMetadata().getManifestEntry("sap.ui");var p=t.get("icons.icon",o);var f=this.getModel(e.globalFilterModel);var d=f&&f.getMetaModel();this.setModel(f);var v=this.getMetadata().getComponentName();var m=v.replace(/\./g,"/");e.baseUrl=sap.ui.require.toUrl(m);e.useMacroFilterBar=f?c.isODataV4(f):false;if(e.smartVariantRequired===undefined||e.smartVariantRequired===null){e.smartVariantRequired=true}if(e.enableLiveFilter===undefined||e.enableLiveFilter===null){e.enableLiveFilter=true}if(e.showDateInRelativeFormat===undefined||e.showDateInRelativeFormat===null){e.showDateInRelativeFormat=true}if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined&&e.useDateRangeType!==undefined){throw new Error("Defining both useDateRange and useDateRangeType in the manifest is not allowed")}e.useDateRangeType=e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.useDateRange!==undefined?e.filterSettings.dateSettings.useDateRange:e.useDateRangeType;if(e.useDateRangeType===undefined||e.useDateRangeType===null){e.useDateRangeType=false}if(e.bHeaderExpanded===undefined||e.bHeaderExpanded===null){e.bHeaderExpanded=g.system.desktop?true:false}if(e.chartSettings===undefined||e.chartSettings===null){e.chartSettings={}}if(e.chartSettings.showDataLabel===undefined||e.chartSettings.showDataLabel===null){e.chartSettings.showDataLabel=false}if(e.globalFilterEntitySet&&e.globalFilterEntitySet!==" "){var b=d&&d.getODataEntitySet(e.globalFilterEntitySet);e.globalFilterEntityType=b&&b.entityType}var C=e.globalFilterEntityType;if(e.globalFilterEntityType&&e.globalFilterEntityType!==" "&&e.globalFilterEntityType.length>0){e.globalFilterEntityType=this._getFullyQualifiedNameForEntity(e.globalFilterEntityType,f);e.globalFilterEntityTypeNQ=e.globalFilterEntityType.split(".").pop()}var P=new i(e);P.setProperty("/applicationId",t.get("id",a));P.setProperty("/title",t.get("title",a));P.setProperty("/description",t.get("description",a));if(e.globalFilterEntityType){var E,O;if(c.isODataV4(f)){E=d.getObject("/"+e.globalFilterEntityType+"@com.sap.vocabularies.UI.v1.SelectionFields");O=d.getObject("/"+e.globalFilterEntityType);P.setProperty("/mainEntityVersion","ODataV4")}else{O=d.getODataEntityType(e.globalFilterEntityType);E=l([],O["com.sap.vocabularies.UI.v1.SelectionFields"]);P.setProperty("/mainEntityVersion","ODataV2");if(e.filterSettings&&e.filterSettings.dateSettings){var S=this._getDatePropertiesFromEntitySet(f,O,e.globalFilterEntityType);var T=this._getSettingsForDateProperties(S,e.filterSettings.dateSettings);if(P.getProperty("/useDateRangeType")&&T&&!u(T)){P.setProperty("/useDateRangeType",false);S.forEach(function(e){if(!T.hasOwnProperty(e["PropertyPath"])||!T[e["PropertyPath"]]){var t=e["PropertyPath"];T[t]={selectedValues:h.getAllOptionKeys().toString(),exclude:false}}})}E=this._getAllControlConfiguration(S,E,T);P.setProperty("/datePropertiesSettings",T)}}P.setProperty("/allControlConfiguration",E);P.setProperty("/mainEntityType",O)}if(p){if(p.indexOf("sap-icon")<0&&p.charAt(0)!=="/"){p=e.baseUrl+"/"+p}P.setProperty("/icon",p)}var F=e.cards;var D=[];var _;for(var R in F){if(F.hasOwnProperty(R)&&F[R]){_=this._mergeKeyUserChanges(F[R]);_.id=R;D.push(_)}}D.sort(function(e,t){if(e.id<t.id){return-1}else if(e.id>t.id){return 1}else{return 0}});P.setProperty("/cards",D);if(this.inResizableTestMode()===true){e.containerLayout="resizable"}if(e.containerLayout&&e.containerLayout==="resizable"){P.setProperty("/cardContainerFragment","sap.ovp.app.DashboardCardContainer");P.setProperty("/dashboardLayout",e.resizableLayout);var M=new r(P);this.setDashboardLayoutUtil(M)}else{P.setProperty("/cardContainerFragment",this.getCardContainerFragment())}this.setModel(P,"ui");var w=this._getOvpLibResourceBundle();this.setModel(w,"ovplibResourceBundle");var O;if(c.isODataV4(f)){O="/"+e.globalFilterEntityType}else{O=d&&d.getODataEntityType(e.globalFilterEntityType,true)}var A=this.createId("mainView");var V=new i({});var I=new y(A,{height:"100%",preprocessors:{xml:{bindingContexts:{ui:P.createBindingContext("/"),meta:d.createBindingContext(O),contextPath:d.createBindingContext("/"+C),entitySet:C,converterContext:V.createBindingContext("/")},models:{ui:P,meta:d,contextPath:d,metaModel:d,converterContext:V}}},type:n.XML,viewName:"sap.ovp.app.Main",async:true,customData:[new s({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{designtime:"sap/ovp/ui/OVPWrapper.designtime"}}})]});return I},_showErrorPage:function(){var e=new y({height:"100%",type:n.XML,viewName:"sap.ovp.app.Error"});var t=this._getOvpLibResourceBundle();e.setModel(t,"ovplibResourceBundle");this.setAggregation("rootControl",e);if(this.oContainer){this.oContainer.invalidate()}},_formParamString:function(e){var t=Object.keys(e);var i;var r="?";for(i=0;i<t.length;i++){r=r+t[i]+"="+e[t[i]]+"&"}return r.slice(0,-1)},_checkForAuthorizationForCards:function(e){var t=m.getConfiguration();var i=t&&t.getDesignMode();if(i){return Promise.resolve(e)}var r=[];var n=[];for(var a in e.cards){var o=e.cards[a];if(o&&o.settings&&o.settings.requireAppAuthorization){n.push(a);r.push({target:{shellHash:o.settings.requireAppAuthorization}})}}if(r.length>0&&sap.ushell&&sap.ushell.Container){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){return e.isNavigationSupported(r)}).then(function(t){var i=n.filter(function(e,i){if(!t[i].supported){return e}});for(var r=0;r<i.length;r++){for(var a in e.cards){if(i[r]===a){delete e.cards[a];break}}}return Promise.resolve(e)}).catch(function(e){S.error(e);return Promise.reject(e)})}else{return Promise.resolve(e)}},_checkForAuthorizationForLineItems:function(){return new Promise(function(e,t){var i=[],r=[];var n=this.getOvpConfig();var a=n["cards"];for(var o in a){if(a.hasOwnProperty(o)&&a[o]){var s=a[o];var l=s.settings;if((s.template==="sap.ovp.cards.linklist"||s.template==="sap.ovp.cards.v4.linklist")&&l.listFlavor==="standard"&&l.staticContent){var u=l.staticContent;for(var p=0;p<u.length;p++){if(u[p].semanticObject||u[p].action){var g="#"+u[p].semanticObject+"-"+u[p].action;if(u[p].params){var c=this._formParamString(u[p].params);g=g+c}if(r.indexOf(o)===-1){r.push(o)}if(i.indexOf(g)===-1){i.push(g)}}}}}}this._oCardsWithStaticContent=r;if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(i).done(function(t){var i=this.getOvpConfig();for(var r in t){if(t.hasOwnProperty(r)&&t[r].supported===false){for(var n=0;n<this._oCardsWithStaticContent.length;n++){var a=i["cards"][this._oCardsWithStaticContent[n]].settings.staticContent;for(var o=a.length-1;o>=0;o--){var s="#"+a[o].semanticObject+"-"+a[o].action;if(a[o].params){var l=this._formParamString(a[o].params);s=s+l}if(r===s){a.splice(o,1)}}i["cards"][this._oCardsWithStaticContent[n]].settings.staticContent=a}}}delete this._oCardsWithStaticContent;e(i)}.bind(this)).fail(function(e){S.error(e);t(e)})}else{e(n)}}.bind(this))},createContent:function(){if(P&&P.processAndExpandHash&&typeof P.processAndExpandHash==="function"){P.processAndExpandHash().catch(function(e){S.error(e)}).finally(function(){this._createContent()}.bind(this))}else{this._createContent()}},_createContent:function(){var e=this.getOvpConfig();var t=this.getModel(e.globalFilterModel);var i=[this._checkForAuthorizationForLineItems(e),o.pResourcePromise,this._isInsightRTEnabled(),C.load({library:"sap.ui.core"}),this._isTeamsModeActive()];if(c.isODataV4(t)){i.unshift(t&&t.getMetaModel().requestObject("/"+e.globalFilterModel))}else{i.unshift(t&&t.getMetaModel().loaded())}if(t&&!this.getAggregation("rootControl")){Promise.all(i).then(function(e){var t=e[3];this.ovpConfig=e[1];this.ovpConfig.sapUICoreVersionInfo=e[4];this.ovpConfig.isTeamsModeActive=e[5];if(this._isInsightDTEnabled()){this.ovpConfig.bInsightDTEnabled=true;return Promise.resolve(this.ovpConfig)}else{if(t){this.ovpConfig.bInsightRTEnabled=true}return this._checkForAuthorizationForCards(this.ovpConfig)}}.bind(this)).then(function(e){this.oOvpConfig=e;this.runAsOwner(function(){var e=this.createId("host"),t=new d(e),i=this.createXMLView(this.oOvpConfig);i.loaded().then(function(){if(f.isPlaceHolderEnabled()){t.addPage(i);this.setAggregation("rootControl",t);f.showPlaceholder(t)}else{this.setAggregation("rootControl",i)}this.oContainer.invalidate()}.bind(this))}.bind(this))}.bind(this));if(!c.isODataV4(t)){t.attachMetadataFailed(function(){this._showErrorPage()}.bind(this))}}},_getOvpLibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=m.getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=e?new a({bundleUrl:e.oUrlInfo.url,bundle:e}):null}return this.ovplibResourceBundle},createMapForEntityContainer:function(e){var t={};var i=e.entitySet;for(var r=0;r<i.length;r++){t[i[r].name]=i[r].entityType}return t},inResizableTestMode:function(){return this._getQueryParamUpToTop("resizableTest")=="true"},_isInsightDTEnabled:function(){return this._getQueryParamUpToTop("mode")==="myInsight"||this._getQueryParamUpToTop("mode")==="DT"},_isInsightRTEnabled:function(){var e=this._getQueryParamUpToTop("mode")==="RT";return new Promise(function(t,i){if(!b||!b.getServiceAsync){t(e);return}return b.getServiceAsync().then(function(i){t(!!i||e)}).catch(function(i){S.error("Failed to get CardHelperServiceInstance."+i);t(e)})})},_isTeamsModeActive:function(){var e=false;return new Promise(function(t,i){if(P&&P.isTeamsModeActive&&typeof P.isTeamsModeActive==="function"){return P.isTeamsModeActive().then(function(t){e=t}).catch(function(e){S.error("Failed to get Collaboration Helper."+e)}).finally(function(){t(e)})}else{t(e)}})},_getQueryParamUpToTop:function(e){var t=window;var i=this.getQueryParam(t.location.search,e);if(i!=null){return i}if(t==t.parent){return null}t=t.parent;return null},getQueryParam:function(e,t){var i=null;if(!e){return i}if(e.indexOf("?")!=-1){e=e.substring(e.indexOf("?"))}if(e.length>1&&e.indexOf(t)!=-1){e=e.substring(1);var r=e.split("&");for(var n=0;n<r.length;n++){var a=r[n].split("=");if(a[0]==t){i=a[1];break}}}return i}})});
sap.ui.predefine("sap/ovp/app/FilterHelper", ["sap/ui/model/Filter"],function(t){"use strict";function n(t,n,r,a){var i=[];if(n.length>0&&t){var o=t.entityType;var f=e(t.property,n[0],t.name,o,r,a);if(f){i.push(f)}}return i}function e(n,a,i,o,f,p){if(!a._bMultiFilter){a.sPath=a.sPath.split("/").pop();var s=r(n,a.sPath,i,o,f,p);if(s){a.sPath=s;return a}}else{var u=a.aFilters;var m,v=[];if(u){for(var c=0;c<u.length;c++){m=e(n,u[c],i,o,f,p);if(m){v.push(m)}}if(v.length>0){return new t(v,a.bAnd)}}}}function r(t,n,e,r,a,i){var o,f;for(o=0;o<t.length;o++){if(t[o].name===n){f=t[o].name;return f}if("P_"+t[o].name===n||t[o].name==="P_"+n){f=t[o].name;return f}}if(!e||!r||!a||!i){return}var p=a&&a.oMetadata&&a.oMetadata._getEntityTypeByName(e);var s=i.oMetadata._getEntityTypeByName(r);if(!p||!s){return}var u="com.sap.vocabularies.Common.v1.SemanticObject";var m="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var v=a.oAnnotations.getAnnotationsData();if(!v||!v.propertyAnnotations){return}var c=v.propertyAnnotations[p.namespace+"."+p.name];var l=i.oAnnotations.getAnnotationsData();if(!l||!l.propertyAnnotations){return}var y=l.propertyAnnotations[s.namespace+"."+s.name];var g=y&&y[n];if(!g||!g[u]){return}var h,P,A,b,d;for(h in c){P=c[h];if(P[u]&&P[u].String===g[u].String){A=P[m];if(!A){continue}b=A.length;d="";while(b--){if(A[b].SemanticObjectProperty.String===n){d=A[b].LocalProperty.PropertyPath;break}}if(d!==""){for(o=0;o<t.length;o++){if(t[o].name===d){f=t[o].name;return f}}}}}return f}function a(t,n){return t}return{getEntityRelevantFilters:n,mergeFilters:a}});
sap.ui.predefine("sap/ovp/app/Main.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/odata/ODataUtils","sap/ovp/cards/generic/Component","sap/ovp/cards/v4/generic/Component","sap/ui/generic/app/navigation/service/NavigationHandler","sap/m/MessageBox","sap/ovp/cards/CommonUtils","sap/ovp/cards/PersonalizationUtils","sap/ovp/cards/charts/VizAnnotationManager","sap/m/BusyDialog","sap/ui/model/Filter","sap/fe/navigation/SelectionVariant","sap/ui/comp/state/UIState","sap/m/ColumnListItem","sap/m/Text","sap/m/Switch","sap/m/Table","sap/m/Column","sap/m/Button","sap/m/Dialog","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ovp/ui/SmartphoneHeaderToggle","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ui/model/analytics/odata4analytics","sap/ovp/support/lib/CommonMethods","sap/ovp/app/resources","sap/ovp/app/TemplateBaseExtension","sap/ui/core/mvc/ControllerExtension","sap/ovp/app/OVPUtils","sap/ovp/app/ShareUtils","sap/base/security/encodeURL","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/core/CustomData","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/cards/semanticDateRangeTypeHelper","sap/ovp/placeholder/placeholderHelper","sap/ui/core/Fragment","sap/ui/core/Component","sap/ui/base/Event","sap/ui/core/Core"],function(t,e,a,i,r,s,n,o,l,d,h,g,f,u,c,p,v,m,y,b,C,P,F,S,M,O,V,_,A,w,E,I,L,D,T,jQuery,R,x,B,G,N,U,j,k,H,z,K){"use strict";var q=new G("OVP.app.Main");var J="sap.ovp.app.customData",W="sap.ovp.app.extensionData",$;return t.extend("sap.ovp.app.Main",{getCustomAppStateDataExtension:function(t){},restoreCustomAppStateDataExtension:function(t){},getCustomFilters:function(){},onCustomActionPress:function(t){},onCustomParams:function(t){},modifyStartupExtension:function(t){},getCustomMessage:function(t,e){},onBeforeRebindPageExtension:function(){},oRefreshTimer:null,nRefreshInterval:0,filterItemInFocus:null,bFinishedCardsCreationProcess:false,storeIncomingDeltaChanges:function(t){this.deltaCardsInfo=t?t:[]},appendIncomingDeltaChange:function(t){this.deltaChanges.push(t)},templateBaseExtension:w,onInit:function(){this.bDeltaChangesEnabled=false;this.bRTAActive=false;this.bResetChartAxisFormatter=false;this.deltaChanges=[];this._initFlexibilityPersonalization();this.globalEventBus=K.getEventBus();this.oShareUtils=new L(this);this.getView().loaded().then(function(){var t=this.getOwnerComponent();var e=t.getMetadata();if(t&&e&&e.getManifest()){_.setAppComponent(this.getOwnerComponent())}_.setApplicationStatus(_.mApplicationStatus.LOADING);_.publishEvent("elements","ViewRenderingStarted",{});this.oContainer=sap.ushell&&sap.ushell.Container;this.aErrorCards=[];this.oCardsModels={};this.aFilters=[];this.errorHandlingObject={atLeastOneRequestSuccess:false,errorLoadingTimeout:{}};this.sPreviousEntityType="";this.sCurrentEntityType="";this.oLoadedComponents={};this.bGlobalFilterLoaded=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this.fnMacroFilterBarLoaded=undefined;this.isInitialLoading=true;this.isMacroFilterBar;this.bSkipIAppStateGeneration=false;var a=this.getUIModel();this.bDisableErrorPage=a&&a.getProperty("/disableErrorPage");this.oNavigationHandler=this.oNavigationHandler||new r(this);this.getLayout().addStyleClass("ovpLayoutElement");this.oState={};this.oState.oSmartFilterbar=this.byId("ovpGlobalFilter");this._initGlobalFilter();this.oShareUtils.init();n.enable(this,this.oNavigationHandler);this._loadCardComponent("sap.ovp.cards.error");$=this.getView().byId("sapOvpShareButton");if($){$.attachBrowserEvent("click",function(){this.onShareButtonPress()}.bind(this))}}.bind(this))},onShareButtonPress:function(){if($&&$.getVisible()&&$.getEnabled()){this.oShareUtils.onShareButtonAvailableAndPressed($)}},performRecreationOfCard:function(t){t.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(t.model);t=this._getTemplateForChart(t);this._loadCardComponent(t.template);this._createModelViewMap(t);if(t.settings.tabs&&t.settings.selectedKey){var e=t.settings.selectedKey-1;t.settings.measureAggregate=t.settings.tabs[e].measureAggregate}jQuery.when(this.createCard(t)).then(function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var e=this.getLayout().getDashboardLayoutUtil();if(e){var a=e.getDashboardLayoutModel();var i=a.getCardById(t.id);e._sizeCard(i);a.extractCurrentLayoutVariant()}}}.bind(this))},onExit:function(){this.bResetChartAxisFormatter=true},_getOriginalCardDescriptorById:function(t){if(!t){return null}var e=this.getView().byId(t);var a=e.getComponentInstance();var i=a.getComponentData();var r=i.appComponent;return r._getOvpCardOriginalConfig(t)},recreateCard:function(t){var e=t.cardId;var a=this._getCardFromManifest(e);var i=this._getOriginalCardDescriptorById(e);if(a.template=="sap.ovp.cards.charts.analytical"||a.template=="sap.ovp.cards.charts.smart.chart"||a.template=="sap.ovp.cards.v4.charts.analytical"){a.settings.chartAnnotationPath=t.chartAnnotationPath;a.settings.colorPalette=t.colorPalette;a.settings.bEnableStableColors=t.bEnableStableColors;if(t.navigation){a.settings.navigation=t.navigation}}if(t.entitySet){a.settings.entitySet=t.entitySet}a.settings.annotationPath=t.annotationPath;a.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;a.settings.presentationAnnotationPath=t.presentationAnnotationPath;a.settings.selectionAnnotationPath=t.selectionAnnotationPath;a.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;a.settings.kpiAnnotationPath=t.kpiAnnotationPath;a.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;a.settings.identificationAnnotationPath=t.identificationAnnotationPath;a.settings.headerAnnotationPath=t.headerAnnotationPath;a.settings.staticParameters=i&&i.settings&&i.settings.staticParameters;if(t.staticParameters){a.settings.staticParameters=t.staticParameters}if(t.customParams){a.settings.customParams=t.customParams}var r=a.settings.selectedKey;a.settings.selectedKey=t.selectedKey;if(a){this.performRecreationOfCard(a)}var s={changeType:"viewSwitch",content:{cardId:t.cardId,selectedKey:t.selectedKey,oldKey:r},isUserDependent:true};o.savePersonalization(s,this.getView());if(this.getView()){this.getView().getModel("ui").setProperty("/bEnableResetBtn",true)}},recreateRTAClonedCard:function(t){var e=this._getCardFromManifest(t.id);if(e){e.settings=t.settings;this.performRecreationOfCard(e)}},onBeforeRendering:function(){},onRequestSent:function(t){this.destroyErrorCardsAndReplaceWithOriginal()},onRequestCompleted:function(t){if(t&&t.getParameters()&&t.getParameters().success){var e=t.getParameters().response&&t.getParameters().response.responseText?JSON.parse(t.getParameters().response.responseText):"";if(e&&e.d&&e.d.results&&e.d.results.length==0){this.fVerifyAndSetErrorOrCustomMessageCard(t,true)}}else if(t&&t.getParameters()&&t.getParameters().response&&t.getParameters().response.statusCode!==0){this.fVerifyAndSetErrorOrCustomMessageCard(t,false)}},fVerifyAndSetErrorOrCustomMessageCard:function(t,a){var i;var r=this.getView().getModel("ui").getProperty("/aOrderedCards");for(i in r){var s=this.getView().byId(r[i].id);var o=s&&s.getComponentInstance();var l=o&&o.getComponentData();var d=o&&o.getRootControl();var h=d&&d.getController();var g=h&&h.getCardItemsBinding();if(g&&!n.isODataV4(h.oView.getModel())){var f=t.getParameters().url;var u=g.sCustomParams;var c=g.sFilterParams;var p=g.sPath.replace("/","");var v=g.sRangeParams;var m=g.sCountMode&&g.sCountMode.indexOf("Inline");var y=g.sSortParams;var b=t.getSource().sServiceUrl;var C=t.oSource&&t.oSource.oMetadata;var P=h.getEntityType();var F=this.getView().getModel();var S=h.oView.getModel();var M=this._getEntityRelevantFilters(P,this.aFilters,S,F);var O;try{O=e.createFilterParams(M,C,P)}catch(t){q.error("applying filter on a card which is not valid")}if(c&&O){c="("+c.replaceAll("$filter=","")+")";O="("+O.replaceAll("$filter=","")+")";c="$filter="+c+"%20and%20"+O}f=f.split(p).join("").split(u).join("").split(c).join("").split(v).join("").split(y).join("").split(b).join("").split(O).join("").split("?").join("").split("&").join("").split("/").join("");if(!m){f=f.split("$inlinecount=allpages").join("")}var V=l&&l.cardId;var _=this._getCardFromManifest(V);if(f){var A=/sap-client=[0-9][0-9][0-9]/i;f=f.replace(A,"")}if(_&&!f){var w=R({},t);var E=R({},_);var I=this.getCustomMessage(w,E.id);I=I&&typeof I==="object"?I:"";if(a&&!I){return}if(I){if(a&&I.hasOwnProperty("sMessage")&&I.sMessage&&typeof I.sMessage==="string"){t.getParameters().response.statusText=I.sMessage;if(I.hasOwnProperty("sIcon")&&I.sIcon&&typeof I.sIcon==="string"&&I.sIcon.indexOf("sap-icon")!==-1){t.getParameters().response.sIcon=I.sIcon}}else if(!a&&I.hasOwnProperty("sMessage")&&I.sMessage&&typeof I.sMessage==="string"){t.getParameters().response.statusText=I.sMessage}}if(this.aErrorCards.indexOf(V)==-1){this.aErrorCards.push(_.id)}else{o.destroy()}this.createErrorCard(_,t)}}}},onAfterRendering:function(){_.setApplicationStatus(_.mApplicationStatus.RENDERED);_.publishEvent("elements","ViewRendered",{});this.oModelViewMap={};this.oAppStatePromise=null;if(this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes")){this.nRefreshInterval=this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes");this.nRefreshInterval=(this.nRefreshInterval<=1?1:this.nRefreshInterval)*6e4}var t=this._getCardsModel();var e=[];var a;for(a in t){if(e.indexOf(t[a].model)==-1){e.push(t[a].model)}}var i=this.getOwnerComponent();if(i){for(a in e){var r=i.getModel(e[a]);if(r&&n.isODataV4(r)){setTimeout(this.destroyErrorCardsAndReplaceWithOriginal.bind(this),0)}else if(r){r.attachRequestCompleted(this.onRequestCompleted.bind(this));r.attachRequestSent(this.onRequestSent.bind(this))}}}if(this.initialized){return}this.initialized=true;Promise.all([this.oFlexibilityPersonalizationPromise,this.oGlobalFilterLoadedPromise]).then(function(){this.isMacroFilterBar=this.getMacroFilterBar()!==undefined;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.getView().byId("ovpCardPage").setVisible(true);this.persistencyVariantLoaded=true;if(this.deltaChanges.length>0){this.getView().getModel("ui").setProperty("/bEnableResetBtn",true)}var t;var e=[],a=[];this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent());for(var i=0;i<this.aManifestOrderedCards.length;i++){t=this._getCardFromManifest(this.aManifestOrderedCards[i].id);if(t&&t.settings&&t.settings.requireAppAuthorization){e.push({id:t.id,cardIntent:t.settings.requireAppAuthorization});a.push(t.settings.requireAppAuthorization)}}var r=this._mergeLREPContent(this.aManifestOrderedCards);this.getView().getModel("ui").setProperty("/aOrderedCards",r);var s=r.some(function(t){return t.visibility});this.organizeCards(r);if(!s){j.hidePlaceholder()}}.bind(this));if(P.system.phone){F.enable(this)}},organizeCards:function(t){var e;var a=[];this._updateLayoutWithOrderedCards();this._updateDashboardLayoutCards(t);if(this.isDragAndDropEnabled()){if(sap.ushell&&sap.ushell.Container){this._initShowHideCardsButton()}}this._clearStoredEntities();t=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var i=0;i<t.length;i++){if(t[i].visibility){e=this._getCardFromManifest(t[i].id);if(e){a.push(e)}}}for(var i=0;i<a.length;i++){this._initCardModel(a[i].model);this._loadCardComponent(a[i].template);this._createModelViewMap(a[i])}setTimeout(function(){this.getLayout().addStyleClass("ovpLayoutElementShow")}.bind(this),0);var r=this.fGetViewSwitchIndex(a);var s=[];for(var i=0,n=0;n<a.length;i++,n++){while(a[n].id!==t[i].id){i++}e=a[n];if(!e.settings.title){q.error("title is mandatory for card ID : "+e.id)}if(e.settings.tabs){var o=0;var l=r&&r.hasOwnProperty(e.id)?r[e.id]:"";if(l&&typeof l=="number"&&l>0&&l<=e.settings.tabs.length){o=l>=1?l-1:l;this.setOrderedCardsSelectedKey(e.id,l)}else if(t[i].selectedKey&&e.settings.tabs.length>=t[i].selectedKey){o=t[i].selectedKey-1}this.initializeTabbedCard(e,o)}e=this._getTemplateForChart(e);this._loadCardComponent(e.template);e.settings.baseUrl=this._getBaseUrl();s.push(this.createCard(e))}Promise.all(s).then(function(){this.bFinishedCardsCreationProcess=true}.bind(this));if(this.busyDialog){this.busyDialog.close()}},_getTemplateForChart:function(t){if(t.template==="sap.ovp.cards.charts.smart.chart"){var e=this.getView();var a=e.getModel(t.model);var i=a.getMetaModel();var r=i.getODataEntitySet(t.settings.entitySet);var s=i.getODataEntityType(r.entityType);var n;var o;var l;var d=false;var h;if(t&&t.settings){if(!d&&t.settings.kpiAnnotationPath){var g=s[t.settings.kpiAnnotationPath];h=g.Detail.DefaultPresentationVariant&&g.Detail.DefaultPresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}}if(!d&&t.settings.selectionPresentationAnnotationPath){var f=s[t.settings.selectionPresentationAnnotationPath];if(f){h=f.PresentationVariant&&f.PresentationVariant.Path;if(h){l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}}}if(!d&&t.settings.presentationAnnotationPath){h=t.settings.presentationAnnotationPath;l=this._getTemplateForChartFromVisualization(h,t,a,r,s);d=l.bTemplateUpdated;if(d){t=l.oCard;return t}}if(!d&&t.settings.chartAnnotationPath){n=s[t.settings.chartAnnotationPath];o=n&&n.ChartType&&n.ChartType.EnumMember;if(o&&o.split("/")[1]==="Donut"){t.template="sap.ovp.cards.charts.analytical"}else{t.template="sap.ovp.cards.charts.smart.chart"}}}}return t},_getTemplateForChartFromVisualization:function(t,e,a,i,r){if(/^@/.test(t)){t=t.slice(1)}e.settings.presentationAnnotationPath=t;var s=r[t]&&r[t].Visualizations;var n;var o;var l;var d=false;if(s&&s.length>0){for(n=0;n<s.length;n++){var h=s[n].AnnotationPath;if(!h){return{oCard:e,bTemplateUpdated:d}}h.trim();if(h.startsWith("@")){h=h.slice(1)}if(h.indexOf("Chart")!=-1){e.settings.chartAnnotationPath=h;o=r[h];l=o&&o.ChartType&&o.ChartType.EnumMember;if(l&&l.split("/")[1]==="Donut"){e.template="sap.ovp.cards.charts.analytical"}else{e.template="sap.ovp.cards.charts.smart.chart"}}d=true}}return{oCard:e,bTemplateUpdated:d}},_createModelViewMap:function(t){if(!t||!t.settings||!t.model){return}if(!t.settings.entitySet||t.settings.entitySet===""){return}if(!t.template.startsWith("sap.ovp.cards")){return}var e=t.model;if(!this.oModelViewMap[e]){this.oModelViewMap[e]={}}this.oModelViewMap[e][t.id]=true},setTabIndex:function(t){if(typeof t=="object"){this.oTabIndexList=t}else{this.oTabIndexList={}}},getTabIndex:function(){return this.oTabIndexList},fGetViewSwitchIndex:function(t){var e=this.getGlobalFilter();var a=e&&e.getUiState();var i=a?JSON.stringify(a.getSelectionVariant()):"{}";var r=JSON.parse(i);var s=R({},r);var n=[];if(t&&t.length>0){for(var o=0;o<t.length;o++){var l=R({},t[o]);n.push(l)}}this.onBeforeRebindPageExtension(n,s);return this.getTabIndex()},changeViewSwitchForVisibleCard:function(){var t=this.getView().getModel("ui").getProperty("/aOrderedCards");if(t&&t.length>0){var e=[],a=[];for(var i=0;i<t.length;i++){e.push(this._getCardFromManifest(t[i].id))}var r=this.fGetViewSwitchIndex(e);if(r&&typeof r=="object"){a=Object.keys(r)}if(a&&a.length>0){for(var i=0;i<t.length;i++){if(t[i]&&t[i].visibility==true){var s=this._getCardFromManifest(t[i].id);if(s&&s.settings&&s.settings.tabs&&s.settings.hasOwnProperty("selectedKey")){var n=r&&r.hasOwnProperty(s.id)?r[s.id]:"";var o=s.settings.selectedKey;if(n&&typeof n=="number"&&n<=s.settings.tabs.length&&n!==o){this.setOrderedCardsSelectedKey(s.id,n);var l={};l=s.settings.tabs[n-1];var d={cardId:s.id,selectedKey:n};for(var h in l){d[h]=l[h]}this.recreateCard(d)}}}}}}},setOrderedCardsSelectedKey:function(t,e){var a=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var i=0;i<a.length;i++){if(a[i]&&a[i].id==t){a[i].selectedKey=e;break}}this.getView().getModel("ui").setProperty("/aOrderedCards",a)},getOrderedCardsSelectedKey:function(t){var e=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var a=0;a<e.length;a++){if(e[a]&&e[a].id==t){return e[a].selectedKey}}},initializeTabbedCard:function(t,e){if(t.template=="sap.ovp.cards.charts.analytical"||t.template=="sap.ovp.cards.charts.smart.chart"||t.template=="sap.ovp.cards.v4.charts.analytical"){t.settings.chartAnnotationPath=t.settings.tabs[e].chartAnnotationPath;t.settings.colorPalette=t.settings.tabs[e].colorPalette;t.settings.bEnableStableColors=t.settings.tabs[e].bEnableStableColors;if(t.settings.tabs[e].navigation){t.settings.navigation=t.settings.tabs[e].navigation}}if(t.settings.tabs[e].entitySet){t.settings.entitySet=t.settings.tabs[e].entitySet}t.settings.annotationPath=t.settings.tabs[e].annotationPath;t.settings.dynamicSubtitleAnnotationPath=t.settings.tabs[e].dynamicSubtitleAnnotationPath;t.settings.presentationAnnotationPath=t.settings.tabs[e].presentationAnnotationPath;t.settings.selectionAnnotationPath=t.settings.tabs[e].selectionAnnotationPath;t.settings.selectionPresentationAnnotationPath=t.settings.tabs[e].selectionPresentationAnnotationPath;t.settings.kpiAnnotationPath=t.settings.tabs[e].kpiAnnotationPath;t.settings.dataPointAnnotationPath=t.settings.tabs[e].dataPointAnnotationPath;t.settings.identificationAnnotationPath=t.settings.tabs[e].identificationAnnotationPath;t.settings.params=t.settings.tabs[e].params;t.settings.measureAggregate=t.settings.tabs[e].measureAggregate;t.settings.selectedKey=e+1;if(!t.settings.staticParameters){t.settings.staticParameters=t.settings.tabs[e].staticParameters}if(!t.settings.customParams){t.settings.customParams=t.settings.tabs[e].customParams}},_getLibraryResourceBundle:function(){if(!this.oLibraryResourceBundle){this.oLibraryResourceBundle=K.getLibraryResourceBundle("sap.ovp")}return this.oLibraryResourceBundle},_getOvplibResourceBundle:function(){return this.getOwnerComponent()._getOvpLibResourceBundle()},_getCardsModel:function(){if(!this.oCards){var t=this.getUIModel();this.oCards=t.getProperty("/cards")}return this.oCards},_getBaseUrl:function(){var t=this.getUIModel();if(!this.sBaseUrl){this.sBaseUrl=t.getProperty("/baseUrl")}return this.sBaseUrl},_getApplicationId:function(){var t=this.getUIModel();return t.getProperty("/applicationId")},_getCardFromManifest:function(t){var e=this._getCardsModel();for(var a=0;a<e.length;a++){if(e[a].id===t){return e[a]}}if(!t.includes("ObjectStream")){q.error("Card id "+t+" is not available in the manifest")}return null},_getCardArrayAsVariantFormat:function(t){var e=[];for(var a=0;a<t.length;a++){var i=this._getCardId(t[a].getId());e.push({id:i,visibility:t[a].getVisible()});var r;if(this.getView()&&this.getView().byId){if(this.getView().byId(i).getComponentInstance()){r=this.getView().byId(i).getComponentInstance().getComponentData().settings.selectedKey}}if(r){e[e.length-1].selectedKey=r}}return e},_mergeLREPContent:function(t){var e=[];var a=false;if(this.bDeltaChangesEnabled&&Array.isArray(this.deltaCardsInfo)&&this.deltaCardsInfo.length>0){t=o.addMissingCardsFromManifest(t,this.deltaCardsInfo);a=true}if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(!a){t=this.getLayout().getLayoutDataJSON()}e=o.mergeChanges(t,this.deltaChanges);this._bDashboardLayoutLrepActive=true;this.getLayout().getDashboardLayoutModel().setLayoutVars(e)}else{e=o.mergeChanges(t,this.deltaChanges)}return e?e:[]},_updateLayoutWithOrderedCards:function(){var t=this.getLayout();var e=this.getView().getModel("ui").getProperty("/aOrderedCards");t.removeAllContent();var a,i=false;if(this.getView().getModel("ui")&&this.getView().getModel("ui").getProperty("/cards")){a=this.getView().getModel("ui").getProperty("/cards");for(var r=0;r<a.length;r++){i=false;for(var s=0;s<e.length;s++){if(a[r].id==e[s].id){i=true;break}}if(!i&&this.getView().byId(a[r].id)){this.getView().byId(a[r].id).destroy()}}}for(var r=0;r<e.length;r++){var n=this.getView().byId(e[r].id);if(n){n.setVisible(e[r].visibility);t.addContent(n)}}},_updateErrorCardsArray:function(t){var e;for(e=0;e<t.length;e++){var a=this.aErrorCards.indexOf(t[e].id);if(a>-1&&t[e].visibility==false){this.aErrorCards.splice(a,1)}}},_updateDashboardLayoutCards:function(t){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().updateCardVisibility(t)}}},_resetDashboardLayout:function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().resetToManifest();this.getView().getModel("ui").setProperty("/bEnableResetBtn",false)}this.getLayout().rerender()}},_getCardArrayAsVariantFormatDashboard:function(){var t=[];var e=this.getLayout();var a=e.dashboardLayoutUtil.aCards;e.dashboardLayoutUtil.dashboardLayoutModel._sortCardsByRow(a);a.forEach(function(e){t.push({id:e.id,visibility:e.dashboardLayout.visible})});return t},_fnIsLoadDataOnGoButton:function(t){var e=this.getView().byId("ovpFilterNotFulfilledPage");var a;e.setVisible(true);var i=this.getUIModel().getProperty("/smartVariantRequired");if(!i){j.hidePlaceholder();return false}var r=this&&this.getView().byId("ovpMain");if(!this.oState.oSmartFilterbar.isCurrentVariantStandard()){a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();j.hidePlaceholder();if(!a){r.setHeaderExpanded(true)}if(t&&!a){e.setVisible(false)}return false}var s=this.getUIModel().getProperty("/dataLoadSettings");var n=s?s.loadDataOnAppLaunch:"ifAnyFilterExist";if(!["ifAnyFilterExist","always","never"].includes(n)){q.error("dataLoadSetting is incorrect. It should be one of ifAnyFilterExist,always,never")}var o=false,l=true;if(n==="ifAnyFilterExist"){var d=this.oState.oSmartFilterbar.getFiltersWithValues();o=true;l=d.length?true:false}else if(n==="always"){o=true}else if(n==="never"){o=false}if(o){var h=this.oState.oSmartFilterbar.getSmartVariant();if(h){h.setExecuteOnStandard(true);o=h.getExecuteOnStandard();a=this.oState.oSmartFilterbar.isCurrentVariantExecuteOnSelectEnabled();if(a){this.oState.oSmartFilterbar.search()}}}if(!a||!o){r.setHeaderExpanded(true)}if(t&&(!a||!o)){e.setVisible(false)}I.loadingState.GLOBALFILTERFILLED=o;if(!o||!t||!l){j.hidePlaceholder()}return o&&t&&l},verifyGlobalFilterLoaded:function(){var t=this.getUIModel().getProperty("/enableLiveFilter");var e=this.getGlobalFilter();var a=true;var i=e.determineMandatoryFilterItems();var r,s=e.getFilterData(),n;if(i&&s){var o=i.length;while(o--){r=i[o];n=e.determineControlByFilterItem(r,true);if(n){if(!e._checkForValues(s,r,n)){a=false;break}}}}if(!this.bGlobalFilterLoaded&&t===false){if(!a){var l=P&&P.system&&P.system.phone;if(l){var d=this&&this.getView().byId("ovpMain"),h=d&&d.getHeaderExpanded();if(!h){d.setHeaderExpanded(true)}}if(j.hidePlaceholderNeeded()){j.hidePlaceholder()}}return this._fnIsLoadDataOnGoButton(a)}if(a){if(e.validateMandatoryFields()){I.loadingState.GLOBALFILTERFILLED=true;return true}}else if(!a){if(j.hidePlaceholderNeeded()){j.hidePlaceholder()}}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);I.loadingState.GLOBALFILTERFILLED=false;return false},onGlobalFilterChange:function(t){this.filterChanged=true;this.bSkipIAppStateGeneration=false;if(this.bGlobalFilterInitialized){var e=this.getGlobalFilter();var a=e.getLiveMode();var i=this.getLayout();var r=t.getParameter("afterFilterDataUpdate");if(!a&&i&&!r){i.setActive(false)}else{i.setActive(true);this.changeViewSwitchForVisibleCard()}}},destroyErrorCardsAndReplaceWithOriginal:function(){if(this.isModelRefreshTriggered||this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var t;var e=Object.assign({},this.aErrorCards);for(t in e){var a=this.getView().byId(e[t]);var i=a&&a.getComponentInstance();var r=i&&i.getComponentData();var s=r&&r.cardId;var n=this._getCardFromManifest(s);i.destroy();var o=this.aErrorCards.indexOf(s);if(o>-1){this.aErrorCards.splice(o,1)}this.createCard(n)}this.isModelRefreshTriggered=false}},onTriggerFilterSearch:function(){if(this.getGlobalFilter()&&this.oGlobalFilter.validateMandatoryFields()){this.onGlobalFilterSearch()}if(this.getMacroFilterBar()){this.onMacroFilterBarSearch()}},onGlobalFilterSearch:function(){if(this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var t=this.getGlobalFilter();var e=this.getLayout();if(e){e.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}if(t&&!t.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}if(t&&t.getLiveMode()&&t._bResetFiltersDialogTriggered){this._storeCurrentAppStateAndAdjustURL()}this._clearStoredEntities();var a=[];if(this.oGlobalFilter["_aFields"].length>0){a=this.oGlobalFilter["_aFields"]}else{var i=this.oGlobalFilter["_aFilterBarViewMetadata"];for(var r=0;r<i.length;r++){var s=i[r];for(var o=0;o<s.fields.length;o++){a.push(s.fields[o])}}}for(var r=0;r<a.length;r++){if(a[r].control){var l=document.getElementById(a[r].control.sId);if(jQuery(l).hasClass("sapMFocus")){this.filterItemInFocus=a[r].control;break}}}var d="ovp-"+(new Date).getTime();this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);if(this.nRefreshInterval!==0){if(this.oRefreshTimer!==null){clearTimeout(this.oRefreshTimer)}this.attachRefreshInterval(this.nRefreshInterval)}for(var h in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(h)&&!n.isODataV4(this.oCardsModels[h])){try{this.oCardsModels[h].refresh(false,false,d)}catch(t){q.warning(t)}}}this.filterChanged=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this._clearStoredEntities()}},_clearStoredEntities:function(){if(this.sPreviousEntityType){this.sPreviousEntityType=""}if(this.sCurrentEntityType){this.sCurrentEntityType=""}},_processSFBFilters:function(){var t=this.getGlobalFilter();var e=t.getFilters();var a=this.getCustomFilters();var i=true;var r;var s=function(t,e){if(!(t instanceof E)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!i){throw new Error("State must always be provided synchronously")}if(e){r=e}};this.templateBaseExtension.addFilters(s);i=false;var n=[];if(a&&a instanceof h){n.push(a)}if(r&&r instanceof h){n.push(r)}if(n.length!==0){var o=[];if(e&&e.length>0){n.push(e[0])}o.push(new h(n,true));if(o.length>0){e=o}}this.aFilters=e},_processFilters:function(){this.aFilters=[];if(this.getGlobalFilter()){this._processSFBFilters()}},_processSearch:function(){var t,e;var a=this.getGlobalFilter();if(!a){return}var i=a.getParameters();var e=i&&i["custom"];if(!e){return}for(var r in e){t=r+"="+D(e[r])}return t},_collapseHeaderForPage:function(){var t=P&&P.system&&P.system.phone;if(t){var e=this.getGlobalFilter();var a=this&&this.getView().byId("ovpMain"),i=a&&a.getHeaderExpanded();if(i&&e.validateMandatoryFields()){a.setHeaderExpanded(false)}}},_initGlobalFilter:function(){var t=this.getGlobalFilter();if(!t){var e=this.getLayout();var a=this.getOwnerComponent().oOvpConfig;if(e&&a&&(a.globalFilterEntitySet||a.globalFilterEntityType)){e.setActive(false)}var i=this.getMacroFilterBar();if(!i){this.bGlobalFilterLoaded=true;this._parseNavigationVariant();return}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);I.loadingState.GLOBALFILTERFILLED=false;this.oGlobalFilterLoadedPromise=new Promise(function(t,e){this.fnMacroFilterBarLoaded=t;j.hidePlaceholder()}.bind(this));return}t.attachFiltersDialogClosed(this._storeCurrentAppStateAndAdjustURL.bind(this));var r=t.getVariantManagement();if(r){r.attachAfterSave(function(t){this._storeCurrentAppStateAndAdjustURL(undefined,true)}.bind(this))}this.oGlobalFilterLoadedPromise=new Promise(function(e,a){t.attachInitialized(function(){this._parseNavigationVariant();this.bSkipIAppStateGeneration=true;if(this.oParseNavigationPromise){var a;this.oParseNavigationPromise.then(function(t){var e=t&&t[0];var i=t&&t[1];var r=t&&t[2];if(e){a=Promise.resolve(this._setNavigationVariantToGlobalFilter(e,i,r)).then(function(){this.filterChanged=false}.bind(this))}}.bind(this));this.oParseNavigationPromise.catch(function(){q.error("Could not parse navigation variant from URL")});this.oParseNavigationPromise.finally(function(){Promise.all([a]).then(function(){this.bGlobalFilterInitialized=true;if(t&&this.verifyGlobalFilterLoaded()){e()}}.bind(this))}.bind(this))}else if(t&&this.verifyGlobalFilterLoaded()){e()}},this);t.attachSearch(function(){if(!this.bGlobalFilterLoaded){e();this.bGlobalFilterLoaded=true;if(!t.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL()}var a=this.getLayout();if(a){a.setActive(true)}return}this.onGlobalFilterSearch()},this);t.attachFilterChange(this.onGlobalFilterChange,this);t._oSearchButton&&t._oSearchButton.attachPress(function(){this.bGoButtonPressed=true;this._collapseHeaderForPage();var t=this.getLayout();if(t){t.setActive(true)}}.bind(this))}.bind(this));this.oGlobalFilterLoadedPromise.then(function(e){this.bGlobalFilterLoaded=true;this._collapseHeaderForPage();t._oBasicSearchField&&t._oBasicSearchField.attachSearch(function(){this.bSearchButtonPressed=true}.bind(this))}.bind(this))},_loadCardComponent:function(t){var e=t.replace(/\./g,"/");var a=sap.ui.require.toUrl(e);if(!this.oLoadedComponents[t]){this.oLoadedComponents[t]=H.load({name:t,url:a,manifest:false}).then(function(t){return t})}},_initCardModel:function(t){var e=false;if(this.oCardsModels[t]||!t){return}this.oCardsModels[t]=this.getView().getModel(t);if(!n.isODataV4(this.getView().getModel(t))){if(!this.oCardsModels[t].bUseBatch){this.oCardsModels[t].setUseBatch(false)}else{this.oCardsModels[t].setUseBatch(true)}}if(this.getGlobalFilter()||this.getMacroFilterBar()){e=true}if(!n.isODataV4(this.oCardsModels[t])){this._overrideCardModelRead(this.oCardsModels[t],e)}},getVisibleCustomFields:function(){var t=this.getGlobalFilter();var e=t.getAllFilterItems(true);var a,i,r=[];if(e){a=e.length;while(a--){i=e[a];if(i&&i.getVisibleInFilterBar()){r.push(i.getName())}}}var s,n,o,l=t.getFilterBarViewMetadata();var d=[];if(l){s=l.length;while(s--){o=l[s].fields;if(o){n=o.length;while(n--){if(o[n].isCustomFilterField&&r.indexOf(o[n].fieldName)>-1){d.push({name:o[n].fieldName})}}}}}return d},_showErrorPage:function(t){if(this.bDisableErrorPage){return}var e=this.getView().byId("ovpErrorPage");var a=this.getView().byId("ovpMain");if(t){e.setVisible(true);a.setVisible(false);return}e.setVisible(false);a.setVisible(true)},_removeFilter:function(t,e){var a=t.lastIndexOf(e);var i=t.indexOf(e);if(a===-1||i===-1){return t}var r="%20and%20";var s=t.substring(a).indexOf(r);s=s!==-1?a+s:s;var n=t.substring(0,i).lastIndexOf(r);if(s===-1&&n===-1){if(t.lastIndexOf("$filter=")===0){return t.slice(0,8)}else{return""}}else if(n===-1){if(t.lastIndexOf("$filter=")===0){return t.slice(0,8)+t.slice(s+r.length)}else{return t.slice(s+r.length)}}else if(s===-1){return t.slice(0,n)}else{return t.slice(0,n)+t.slice(s)}},_removeRelevantFilterRecursively:function(t,e){if(!t._bMultiFilter){if(t.sPath===e){return undefined}return t}else{t.aFilters.forEach(function(a,i){t.aFilters[i]=this._removeRelevantFilterRecursively(a,e)}.bind(this));for(var a=0;a<t.aFilters.length;a++){if(!t.aFilters[a]){t.aFilters.splice(a,1);a--}}if(t.aFilters.length>0){return t}else{return undefined}}},_removeRelevantFilter:function(t,e){if(!t||t.length===0){return t}t[0]=this._removeRelevantFilterRecursively(t[0],e);return!t[0]?undefined:t},_getFilterPreference:function(t){var e;var a=this._getCardFromManifest(t);if(a){if(a.settings.tabs){var i=0;var r=a.settings.selectedKey;if(r&&a.settings.tabs.length>=r){i=r-1}e=a.settings.tabs[i].mFilterPreference}else{e=a.settings.mFilterPreference}}return e},_getFilterPreferenceFromUrlParams:function(t){var e=t.urlParameters;var a;var i="cardId=";var r=-1;if(e){for(var s=0;s<e.length;s++){if(e[s].lastIndexOf(i)>=0){r=s;break}}if(r>=0){var n=e[r].lastIndexOf(i);var o=e[r].slice(n+i.length);a=this._getFilterPreference(o);if(n>0){e[r]=e[r].slice(0,n-1)}else{e.splice(r,1)}}}return a},_addRelevantFilters:function(t,a,i,r){var s=t.urlParameters;var n=-1;if(s){for(var o=0;o<s.length;o++){if(s[o].lastIndexOf("$filter=",0)===0){n=o;break}}}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){if(n>=0){var l=e.createFilterParams(this.aRelevantFilters,a.oMetadata,i).substr(8);if(r&&r.filterAll==="card"){s[n]=s[n]}else if(r&&r.filterAll==="global"){s[n]=s[n].slice(0,8)+l}else if(r&&(r.cardFilter||r.globalFilter)){if(Array.isArray(r.cardFilter)&&r.cardFilter.length>0){r.cardFilter.forEach(function(t){l=this._removeFilter(l,t)}.bind(this))}if(Array.isArray(r.globalFilter)&&r.globalFilter.length>0){r.globalFilter.forEach(function(t){s[n]=this._removeFilter(s[n],t)}.bind(this))}if(l===""&&s[n].length===8){s.splice(n,1)}else if(l===""){s[n]=s[n]}else if(s[n].length===8){s[n]=s[n]+l}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(this.aRelevantFilters.length===1){l="("+l+")"}s[n]=s[n].slice(0,8)+"("+s[n].slice(8,s[n].length)+")%20and%20"+l}}else{if(r&&r.filterAll==="card"){t.filters=undefined}else if(r&&r.filterAll==="global"){t.filters=this.aRelevantFilters}else if(r&&(r.cardFilter||r.globalFilter)){if(Array.isArray(r.cardFilter)&&r.cardFilter.length>0){r.cardFilter.forEach(function(t){this.aRelevantFilters=this._removeRelevantFilter(this.aRelevantFilters,t)}.bind(this))}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){t.filters=this.aRelevantFilters}}else{t.filters=this.aRelevantFilters}}}else{if(n>=0){if(r&&r.filterAll==="card"){s[n]=s[n]}else if(r&&r.filterAll==="global"){s.splice(n,1)}else if(r&&r.globalFilter){if(Array.isArray(r.globalFilter)&&r.globalFilter.length>0){r.globalFilter.forEach(function(t){s[n]=this._removeFilter(s[n],t)}.bind(this))}if(s[n].length===8){s.splice(n,1)}}}}return t},removeInternalParamValue:function(t,e){return t&&t.reduce(function(t,a){if(a&&a.includes(e)){a=a.substring(0,a.indexOf(e)-1)}if(a){t.push(a)}return t},[])},_overrideCardModelRead:function(t,e){var a=t.read;var i=this;t.read=function(){var r=arguments[1];if(!r){r={};Array.prototype.push.call(arguments,r)}var s=i._getEntityTypeFromPath(t,arguments[0],r.context,false);var n=i._getEntitySetFromEntityType(t,s);var o=r&&r.urlParameters;var l=false;if(o&&Array.isArray(o)){l=o.some(function(t){return t&&t.indexOf("_requestFrom=ovp_internal")>-1})}else if(o&&typeof o==="object"){l=o["_requestFrom"]==="ovp_internal"}if(!l){return a.apply(t,arguments)}if(o&&Array.isArray(o)){o=i.removeInternalParamValue(o,"_requestFrom=ovp_internal");r.urlParameters=o}else if(o&&typeof o==="object"&&l){delete o["_requestFrom"]}var d=i._getFilterPreferenceFromUrlParams(r);if(e){i._processFilters();var h=i.getGlobalFilter();var g=i.getMacroFilterBar();var f=h!==undefined?h.getModel():g.getModel();if(!i.aFilters){i.aFilters=[]}var u=false;var c;var p=n["Org.OData.Capabilities.V1.SearchRestrictions"];if(n["sap:searchable"]==="true"||p&&p.Searchable&&p.Searchable.Bool&&p.Searchable.Bool==="true"){c=i._processSearch()}i.sCurrentEntityType=s.entityType;if(i.sPreviousEntityType!==i.sCurrentEntityType){i.sPreviousEntityType=i.sCurrentEntityType;u=true}if(!i.aRelevantFilters){i.aRelevantFilters=[];u=true}if(u){i.aRelevantFilters=[];if(s){i.aRelevantFilters=i._getEntityRelevantFilters(s,i.aFilters,t,f)}}r=i._addRelevantFilters(r,t,s,d);var v=r.urlParameters;if(c){v[v.length]=c}if(h&&h.getConsiderAnalyticalParameters()){var m=h.getAnalyticBindingPath();var y,b,C;if(m&&m.length>0){if(s.entityType===h.getEntityType()){b=arguments[0];y=arguments[0].indexOf("$");if(y>0){b=arguments[0].substring(0,y-1)}C=m;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}else{var P=i._getParametersFromEntityPath(arguments[0]);var F=i._getParametersFromEntityPath(m);var S,M,O;if(P&&P.length>0){var V=i._getEntityTypeFromPath(t,arguments[0],r.context,true);for(var _=0;_<F.length;_++){S=i._getPropertyMapping(P,F[_].name,V.name,h.getEntityType(),t,h.getModel());if(S){M=S+"=.*?[,)]";O=arguments[0].match(new RegExp(M));if(O&&O.length>0){b=O[0].slice(0,-1);C=S+"="+F[_].sValue;if(b!==C){arguments[0]=arguments[0].replace(b,C)}}}}}}}}}var A=t.getMetaModel();var w=A.getODataEntityType(n.entityType);v=i._getExpandPropertiesForSmartCharts(v,A,w);var E=arguments[1].success;arguments[1].success=function(t,e){return function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){e.errorHandlingObject.atLeastOneRequestSuccess=true;e._showErrorPage(false)}if(e.filterItemInFocus!=null){e.filterItemInFocus.focus();e.filterItemInFocus=null}if(e.nRefreshInterval!==0){if(e.oRefreshTimer!==null){clearTimeout(e.oRefreshTimer)}e.attachRefreshInterval(e.nRefreshInterval)}return t.apply(this,arguments)}}(E,i);var I=arguments[1].error;arguments[1].error=function(t,e){return function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){clearTimeout(e.errorHandlingObject.errorLoadingTimeout);e.errorHandlingObject.errorLoadingTimeout=setTimeout(function(){if(!e.errorHandlingObject.atLeastOneRequestSuccess){e._showErrorPage(true)}},9e3)}return t.apply(this,arguments)}}(I,i);var L=a.apply(t,arguments);return L}},showErrorCardForMissingParam:function(t,e){var a=t[0];var i=t[1].urlParameters;for(var r in i){a=a+i[r]}var s=new z;s.mParameters={url:a,response:{statusText:A.getText("Missing_Param_Text")}};s.oSource=e;setTimeout(function(){this.fVerifyAndSetErrorOrCustomMessageCard(s,false)}.bind(this),0)},_checkMandatoryParams:function(t,e,a){var i=new V.Model(V.Model.ReferenceByModel(t));var r=i.findQueryResultByName(e);var s=r&&r.getParameterization();if(!s){return true}var n=s.getAllParameterNames();var o=a.match(/\(.*\)/g);if(n.length>0&&o===null){return false}var l=o[0].replace("(","").replace(")","").split(",");if(l.length===n.length){for(var d in l){var h=l[d].split("=")[1];if(h.indexOf("%27")>-1){h=h.split("%27")[1]}if(h.length===0){return false}}}else{return false}},_getExpandPropertiesForSmartCharts:function(t,e,a){var i;var r="";var s;var n;var o;var l="$expand";var d=false;var h=false;var g;var f;var u;var c="com.sap.vocabularies.Common.v1.Text";var p=a&&a.property;if(!t||!(t.length>0)){return t}for(var v=0;v<t.length;v++){if(t[v].indexOf("$expand")>-1){return t}}for(var m=0;m<t.length;m++){if(t[m].indexOf("$select")>-1){h=true;f=t[m];o=t[m].split("$select=");if(o&&o[1]){g=decodeURIComponent(o[1]);i=g.split(",");if(!i||!(i.length>1)){return t}}break}}if(!h){return t}if(!i||!(i.length>0)||!p||!(p.length>0)){return t}for(var y=0;y<i.length;y++){for(var b=0;b<p.length;b++){if(i[y]==(p[b]&&p[b].name)){if(p[b]&&p[b]["sap:aggregation-role"]&&p[b]["sap:aggregation-role"]=="dimension"){if(!p[b][c]||!p[b][c].Path||!(p[b][c].Path.indexOf("/")>0)){break}r=p[b][c].Path;s=r.split("/");if(!s.length){break}n=e.getODataAssociationEnd(a,s[0]);if(!n){break}if(!d){l=l+"="+s[0];d=true}else if(d){l=l+","+s[0]}u=f+","+r}break}}}if(u&&l){t[m]=u;t.push(l)}return t},attachRefreshInterval:function(t){this.oRefreshTimer=setTimeout(function(){this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);var t=this.getLayout();if(t&&t.getActive()){for(var e in this.oCardsModels){this.isModelRefreshTriggered=true;if(!n.isODataV4(this.oCardsModels[e])){this.oCardsModels[e].refresh(false,false)}}}}.bind(this),t)},_getEntityTypeFromPath:function(t,e,a,i){var r=S.prototype._normalizePath.apply(t,[e,a]);if(i){r=e.replace(/^\/|\/$/g,"").split("/")[0];if(r.indexOf("(")!=-1){r=r.substring(0,r.indexOf("("))}}var s=M.prototype._getEntityTypeByPath.apply(t.oMetadata,[r]);return s},_getEntitySetFromEntityType:function(t,e){if(!t||!e){return}var a=t.getMetaModel();var i=a&&a.getODataEntityContainer();var r=i&&i.entitySet;if(!r||!Array.isArray(r)){return}var s=r.length;for(var n=0;n<s;n++){if(r[n].entityType===e.entityType){return r[n]}}},_getPropertyMapping:function(t,e,a,i,r,s){var n,o;for(n=0;n<t.length;n++){if(t[n].name===e){o=t[n].name;return o}if("P_"+t[n].name===e||t[n].name==="P_"+e){o=t[n].name;return o}}if(!a||!i||!r||!s){return}var l=r.oMetadata._getEntityTypeByName(a);var d=s.oMetadata._getEntityTypeByName(i);if(!l||!d){return}var h="com.sap.vocabularies.Common.v1.SemanticObject";var g="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var f=r.oAnnotations.getAnnotationsData();if(!f||!f.propertyAnnotations){return}var u=f.propertyAnnotations[l.namespace+"."+l.name];var c=s.oAnnotations.getAnnotationsData();if(!c||!c.propertyAnnotations){return}var p=c.propertyAnnotations[d.namespace+"."+d.name];var v=p&&p[e];if(!v||!v[h]){return}var m,y,b,C,P;for(m in u){y=u[m];if(y[h]&&y[h].String===v[h].String){b=y[g];if(!b){continue}C=b.length;P="";while(C--){if(b[C].SemanticObjectProperty.String===e){P=b[C].LocalProperty.PropertyPath;break}}if(P!==""){for(n=0;n<t.length;n++){if(t[n].name===P){o=t[n].name;return o}}}}}return o},_getParametersFromEntityPath:function(t){t=t.split("?")[0];var e=t.match(/\(.*=.*\)/);var a=[];if(!e){return a}var i=e[0].slice(1,-1).trim().split(/\=|\,/);for(var r=0;r<i.length;r=r+2){a.push({name:i[r],sValue:i[r+1]})}return a},_checkRelevantFiltersRecursive:function(t,e,a,i,r,s){if(!e._bMultiFilter){e.sPath=e.sPath.split("/").pop();var n=this._getPropertyMapping(t,e.sPath,a,i,r,s);if(n){e.sPath=n;return e}}else{var o=e.aFilters;var l,d=[];if(o){for(var g=0;g<o.length;g++){l=this._checkRelevantFiltersRecursive(t,o[g],a,i,r,s);if(l){d.push(l)}}if(d.length>0){return new h(d,e.bAnd)}}}},_getEntityRelevantFilters:function(t,e,a,i){var r=[];if(e.length>0&&t){var s=this.isMacroFilterBar?t.entityType:this.getGlobalFilter().getEntityType();var n=this._checkRelevantFiltersRecursive(t.property,e[0],t.name,s,a,i);if(n){r.push(n)}}return r},_checkIsCardValid:function(t){var e=t+".Component";var r,s;sap.ui.require(e);var n=T.get(e);if(!n){return false}if(n!==a&&!(n.prototype instanceof a||n.prototype instanceof i)){return false}if((r=n.getMetadata())&&(s=r.getCustomizing())){if(s["sap.ui.viewReplacements"]&&s["sap.ui.viewReplacements"]["sap.ovp.cards.generic.Card"]){return false}}if(n.prototype.createContent!=a.prototype.createContent&&n.prototype.createContent!=i.prototype.createContent){return false}if(n.prototype.getPreprocessors!=a.prototype.getPreprocessors&&n.prototype.getPreprocessors!=i.prototype.getPreprocessors){return false}return true},_createCardComponent:function(t,e,a){var i=t.getModel("@i18n");if(a.template&&this._checkIsCardValid(a.template)){var r={name:a.template,manifest:false,componentData:{model:e,modelName:a.model,i18n:i,cardId:a.id,settings:a.settings,appComponent:this.getOwnerComponent(),mainComponent:this}};var s=this.getGlobalFilter();if(a.errorReason){r.componentData.errorReason=a.errorReason}if(s){r.componentData.globalFilter={getUiState:s.getUiState.bind(s)}}var n=t;this.getOwnerComponent().runAsOwner(function(){H.create(r).then(function(t){var e=t.getComponentData().cardId;var a=n.byId(e);a.setPropagateModel(true);var i=a.getComponentInstance();a.setComponent(t);if(i){setTimeout(function(){i.destroy()},0)}})})}else{q.error("Could not create Card from '"+a.template+"' template. Card is not valid.")}},createErrorCard:function(t,e){var a=R({},t,{template:"sap.ovp.cards.error"});a.errorReason=Object.assign({},e);a.settings.oldTemplate=t.template;a.settings.template="sap.ovp.cards.error";this.oLoadedComponents[a.settings.template].then(function(){this._createCardComponent(this.getView(),undefined,a)}.bind(this))},createCard:function(t){var e=this.getView();var a=e.getModel(t.model);var i;if(n.isODataV4(a)){i=[a.getMetaModel().requestObject("/"+t.settings.entitySet),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[t.template]]}else{i=[a.getMetaModel().loaded(),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[t.template],this.oLoadedComponents["sap.ovp.cards.error"]]}return Promise.all(i).then(function(){this._createCardComponent(e,a,t)}.bind(this),function(e){q.error("Can't load card with id:'"+t.id+"' and type:'"+t.template+"', reason:"+e)})},_getCardId:function(t){var e=this.getView().getId()+"--";var a="mainView--";if(t.indexOf(e)!=-1){var i=t.indexOf(e)+e.length;return t.substring(i)}if(t.indexOf(a)!==-1){var i=t.indexOf(a)+a.length;return t.substring(i)}return t},_initFlexibilityPersonalization:function(){var t=this.getLayout();var e="sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler";var a=t.getContent();if(a&&a.length){for(var i=0;i<a.length;i++){a[i].addCustomData(new B({key:"sap-ui-custom-settings",value:{"sap.ui.fl":{flexibility:e}}}))}a.push(t);this.oFlexibilityPersonalizationPromise=new Promise(function(t,e){x.waitForChanges({selectors:a}).then(function(){if(this.deltaChanges.length>0){this.bDeltaChangesEnabled=true}t()}.bind(this),function(e){t()})}.bind(this))}},layoutChanged:function(t){var e=t.getParameter("positionChanges");var a=[],i=[];var r,s;if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var n=this.getLayout().dashboardLayoutUtil.dashboardLayoutModel.iColCount;if(e){for(var l=e.length-1;l>=0;l--){r=e[l];s=r.content.cardId;if(r.content.dashboardLayout.oldRow===r.content.dashboardLayout.row&&r.content.dashboardLayout.oldColumn===r.content.dashboardLayout.column&&r.content.dashboardLayout.oldRowSpan===r.content.dashboardLayout.rowSpan&&r.content.dashboardLayout.oldColSpan===r.content.dashboardLayout.colSpan){continue}if(i[s]){i[s].content.dashboardLayout.oldRow=r.content.dashboardLayout.oldRow;continue}i[s]=r}Object.keys(i).forEach(function(t){var e=i[t];if(e.content.dashboardLayout.oldRow===e.content.dashboardLayout.row&&e.content.dashboardLayout.oldColumn===e.content.dashboardLayout.column&&e.content.dashboardLayout.oldRowSpan===e.content.dashboardLayout.rowSpan&&e.content.dashboardLayout.oldColSpan===e.content.dashboardLayout.colSpan){return}a.push(i[t])});a.forEach(function(t){var e=t.content.dashboardLayout;t.content.dashboardLayout={};t.content.dashboardLayout["C"+n]=e})}}else{var d=this.getLayout().getContent();var h=this._getCardArrayAsVariantFormat(d);this.getView().getModel("ui").setProperty("/aOrderedCards",h);a=e}if(a.length>0){this.getView().getModel("ui").setProperty("/bEnableResetBtn",true);o.savePersonalization(a,this.getView())}},saveVariant:function(t){var e=this;this.smartVariandManagement.getVariantsInfo(function(t){var a=null;if(t&&t.length>0){a=t[0].key}var i=a!==null;var r={name:"Personalisation",global:false,overwrite:i,key:a,def:true};e.smartVariandManagement.fireSave(r)})},getLayout:function(){return this.getView()?this.getView().byId("ovpLayout"):null},_initShowHideCardsButton:function(){var t=sap.ushell.Container.getRenderer("fiori2");if(t){var e={controlType:"sap.ushell.ui.launchpad.ActionItem",bCurrentState:true,oControlProperties:{icon:"sap-icon://dimension",text:A.getText("hideCardsBtn_title"),tooltip:A.getText("hideCardsBtn_title"),press:this._onManageCardsMenuButtonPress.bind(this)},bIsVisible:true,aStates:["app"]};t.addUserAction(e)}},createOrDestroyCards:function(t,e,a){var i=-1,r=[],s=[];for(var n=0;n<e.length;n++){if(t[n].id==e[n].id){i=n}else{i=this.getCardIndexInArray(t,e[n].id)}var o=this.getView().byId(e[n].id);var l=o.getComponentInstance();if(a){if(l){l.destroy()}}if(e[n].visibility!=t[i].visibility||a){if(e[n].visibility===true){var d=this._getCardFromManifest(e[n].id);r.push({oCard:d,sCreateOrDestroy:"create"});s.push(d)}else if(l){r.push({oCard:l,sCreateOrDestroy:"destroy"})}}}var h=this.fGetViewSwitchIndex(s);if(r&&r.length>0){var g=this.getView().getModel("ui").getProperty("/aOrderedCards");for(var f=0;f<r.length;f++){if(r[f]&&r[f].oCard&&r[f].hasOwnProperty("sCreateOrDestroy")&&r[f].sCreateOrDestroy=="create"){var u=r[f].oCard;if(u){u.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(u.model);u=this._getTemplateForChart(u);this._loadCardComponent(u.template);this._createModelViewMap(u);if(u.settings.tabs){var c=0;var p=[];p.push(u);var v=h&&h.hasOwnProperty(u.id)?h[u.id]:"";var m=this.getOrderedCardsSelectedKey(u.id);if(v&&typeof v=="number"&&v<=u.settings.tabs.length&&v!==m){c=v>=1?v-1:v;this.setOrderedCardsSelectedKey(u.id,v)}else if(g[f].selectedKey&&u.settings.tabs.length>=g[f].selectedKey){c=g[f].selectedKey-1}this.initializeTabbedCard(u,c)}this.createCard(u)}}else if(r[f]&&r[f].oCard&&r[f].hasOwnProperty("sCreateOrDestroy")&&r[f].sCreateOrDestroy=="destroy"){r[f].oCard.destroy()}}}},getCardIndexInArray:function(t,e){for(var a=0;a<t.length;a++){if(t[a].id==e){return a}}return-1},rerenderCards:function(t){var e=this.getView().getModel("ui").getProperty("/aOrderedCards");this.createOrDestroyCards.apply(this,[e,t,false]);this.getView().getModel("ui").setProperty("/aOrderedCards",t);this._updateDashboardLayoutCards(t);this._updateLayoutWithOrderedCards();o.savePersonalization(this.visibilityChanges,this.getView());for(var a=0;a<t.length;a++){var i=t[a];var r=this.aErrorCards.indexOf(i.id);if(r>-1&&i.visibility==false){this.aErrorCards.splice(r,1)}}},getManageCardsDialogModelState:function(t){var e=[];for(var a=0;a<t.length;a++){e.push({id:t[a].id,visibility:t[a].visibility})}return e},_onManageCardsMenuButtonPress:function(){this.visibilityChanges=[];var t;this.aManageCardsDialogModelState=[];var e=this.getView().getModel("ui").getProperty("/aOrderedCards");if(this.manageCardsDialog){this.openManageCardsDialog(e)}else{k.load({name:"sap.ovp.app.ManageCard",controller:{onManageCardOkButtonPressed:function(){var t=this.manageCardsDialog.getModel().getProperty("/cards");this.createOrDestroyCards.apply(this,[this.aManageCardsDialogModelState,t,false]);this.getView().getModel("ui").setProperty("/aOrderedCards",t);this._updateDashboardLayoutCards(t);this._updateLayoutWithOrderedCards();o.savePersonalization(this.visibilityChanges,this.getView());this.manageCardsDialog.close();for(var e=0;e<t.length;e++){var a=t[e];var i=this.aErrorCards.indexOf(a.id);if(i>-1&&a.visibility==false){this.aErrorCards.splice(i,1)}}this.aManageCardsDialogModelState=[]}.bind(this),onManagecardCancelButtonPressed:function(){this.manageCardsDialog.close()}.bind(this),onManageCardResetButtonPressed:function(){var t=this.getLayout().getMetadata().getName();s.show(A.getText("reset_cards_confirmation_msg"),{id:"resetCardsConfirmation",icon:s.Icon.QUESTION,title:A.getText("reset_cards_confirmation_title"),actions:[s.Action.OK,s.Action.CANCEL],onClose:function(e){if(e===s.Action.OK){this.manageCardsDialog.setBusy(true);var a=this.getView().getModel("ui").getProperty("/aOrderedCards");this.createOrDestroyCards.apply(this,[a,this.aManifestOrderedCards,t==="sap.ovp.ui.DashboardLayout"?true:false]);this.getView().getModel("ui").setProperty("/aOrderedCards",this.aManifestOrderedCards);this._resetDashboardLayout();this._updateDashboardLayoutCards(this.aManifestOrderedCards);this._updateLayoutWithOrderedCards();this.manageCardsDialog.getModel().setProperty("/cards",this.aManifestOrderedCards);var i=[];for(var r=0;r<a.length;r++){i.push(this.getView().byId(a[r].id))}O.reset({selectors:i}).finally(function(){this.manageCardsDialog.setBusy(false);this.manageCardsDialog.close()}.bind(this))}}.bind(this)})}.bind(this),onCardVisibilityChange:function(t){var e=t.oSource.getParent();e.toggleStyleClass("sapOVPHideCardsTableItem");e.getCells()[0].toggleStyleClass("sapOVPHideCardsDisabledCell");var a=t.getSource().getBindingContext().getObject();var i;this.visibilityChanges.forEach(function(t,e){if(t.content.cardId===a.id){i=e}});if(i&&i>-1){this.visibilityChanges.splice(i,1)}else{this.visibilityChanges.push({changeType:"visibility",content:{cardId:a.id,visibility:t.getParameter("state")},isUserDependent:true});this.getView().getModel("ui").setProperty("/bEnableResetBtn",true)}}.bind(this),cardTitleFormatter:function(t){var e=t!==null?this._getCardFromManifest(t):null;if(e){var a=e.settings;return a.title||a.category||a.subTitle}return t}.bind(this),afterManageCardsDialogOpen:function(){var t=this.manageCardsDialog.getButtons();var e;for(var a=0;a<t.length;a++){if(t[a].sId==="manageCardsResetBtn"){e=t[a]}}var i=this.getView().getModel("ui").getProperty("/bEnableResetBtn");e.setEnabled(!!i);this.manageCardsDialog.setProperty("stretch",P.system.phone)}.bind(this),afterManageCardsDialogClose:function(){this.visibilityChanges=[];this.manageCardsDialog.close()}.bind(this),onAfterManageCardsTableUpdated:function(t){var e=t.oSource.mAggregations.items;if(e){for(var a=0;a<e.length;a++){if(!e[a].getCells()[1].getState()){e[a].addStyleClass("sapOVPHideCardsTableItem");e[a].getCells()[0].addStyleClass("sapOVPHideCardsDisabledCell")}}}setTimeout(function(){document.querySelector(".sapMListTblRow").focus()},200)}}}).then(function(a){this.manageCardsDialog=a;t=Object.assign([],e);this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(e);var i=new C({cards:t});this.manageCardsDialog.setModel(i);this.getView().addDependent(this.manageCardsDialog);this.openManageCardsDialog(e)}.bind(this))}},openManageCardsDialog:function(t){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var e=this._getCardArrayAsVariantFormatDashboard();var a=[];t.forEach(function(t){a.push(t["id"])});var i=[];e.forEach(function(t){if(a.indexOf(t.id)!=-1){i.push({id:t.id,visibility:t.visibility})}});t=i}this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(t);this.getView().getModel("ui").setProperty("/aOrderedCards",t);this.manageCardsDialog.getModel().setProperty("/cards",t);this.manageCardsDialog.open()},isDragAndDropEnabled:function(){return!P.system.phone},getGlobalFilter:function(){if(!this.oGlobalFilter){this.oGlobalFilter=this.getView().byId("ovpGlobalFilter")}return this.oGlobalFilter},getMacroFilterBar:function(){if(!this.oMacroFilterBar){this.oMacroFilterBar=this.getView().byId("ovpGlobalMacroFilter")}return this.oMacroFilterBar},getUIModel:function(){if(!this.oUIModel){var t=this.getOwnerComponent();this.oUIModel=t&&t.getModel("ui")}return this.oUIModel},_parseNavigationVariant:function(){if(!this.oContainer){this.oParseNavigationPromise=Promise.resolve();return}var t=this.oNavigationHandler;this.oParseNavigationPromise=new Promise(function(e,a){return t.parseNavigation().done(function(t,a,i){e([t,a,i])}).fail(function(){a()})})},_setUiStateToGlobalFilter:function(t,e,a){var i=this.getGlobalFilter();var r=new f({selectionVariant:t.toJSONObject()});i.setUiState(r,{replace:a,strictMode:false});e=e.concat(t.getParameterNames().concat(t.getSelectOptionsPropertyNames()));e=e.filter(function(t,e,a){return a.indexOf(t)==e});return e},_processModifyStartupExtension:function(t){if(!t){t=[]}var e=this.getGlobalFilter();var a=e.getUiState();var i=new g(a.getSelectionVariant());var r=JSON.parse(JSON.stringify(i));return new Promise(function(e,a){Promise.all([this.modifyStartupExtension(i),this.templateBaseExtension.provideStartupExtension(i)]).then(function(){if(JSON.stringify(i)!==JSON.stringify(r)){try{t=this._setUiStateToGlobalFilter(i,t,true)}catch(e){q.error("Error with modifyStartupExtension, falling back to default behavior"+e);t=this._setUiStateToGlobalFilter(r,t,true)}}e(t)}.bind(this))}.bind(this))},_addFieldsToSFBAdvancedArea:function(t){var e;var a=this.getGlobalFilter();if(t&&t.length>0){e=t.length;while(e--){a.addFieldToAdvancedArea(t[e])}}},_restoreAppState:function(t){this.restoreCustomAppStateDataExtension(t._CUSTOM);var e=t._EXTENSION;if(!e){return}var a=true;var i=function(t){if(!(t instanceof E)){throw new Error("State must always be retrieved with respect to a ControllerExtension")}var i=t.getMetadata().getNamespace();if(!a){throw new Error("State must always be restored synchronously")}return e[i]};this.templateBaseExtension.restoreExtensionAppStateData(i);a=false},_setNavigationVariantToGlobalFilter:function(t,e,a){return new Promise(function(i,r){var s=this.getGlobalFilter();var n=this.getUIModel()&&this.getUIModel().oData;var o=this.oState&&this.oState.oSmartFilterbar;var l=this.oGlobalFilter&&this.oGlobalFilter.getUiState().getSemanticDates();if(!s){return}switch(a){case"iAppState":if(t.selectionVariant){var d=JSON.parse(t.selectionVariant);if(d.SelectionVariantID.length!==0){var h=s.getVariantManagement().getVariantItems().map(function(t){return t.getKey()});var u=d.SelectionVariantID;if(h.indexOf(u)===-1){i();break}}var c,p,v=false;var m,y,b,C;var P,F,S;s.clearVariantSelection();d=JSON.parse(t.selectionVariant);s.setCurrentVariantId(d.SelectionVariantID);F=s.getUiState({allFilters:false});y=F&&JSON.stringify(F.getSelectionVariant());C=s.getFilterData()._CUSTOM;C=typeof C=="undefined"?{}:C;P=new f({selectionVariant:t.oSelectionVariant.toJSONObject(),semanticDates:t.semanticDates});s.setUiState(P,{replace:true,strictMode:false});c=new g(t.selectionVariant);p=c.getParameterNames().concat(c.getSelectOptionsPropertyNames());for(var M=0;M<p.length;M++){s.addFieldToAdvancedArea(p[M])}S=s.getUiState({allFilters:false});m=S&&JSON.stringify(S.getSelectionVariant());if(y!==m){v=true}if(t.customData&&Object.keys(t.customData).length>0){var b=t.customData;this._restoreAppState(b);if(JSON.stringify(C)!==JSON.stringify(b)){v=true}}s.getSmartVariant().currentVariantSetModified(v);s._updateToolbarText()}i();break;case"xAppState":case"URLParams":var O=[];var V=new g(t.oSelectionVariant.toJSONObject());var _=new g(t.oDefaultedSelectionVariant.toJSONObject());if(!t.bNavSelVarHasDefaultsOnly&&!V.isEmpty()){s.clearVariantSelection();s.clear();O=this._setUiStateToGlobalFilter(V,O,true)}if(t.bNavSelVarHasDefaultsOnly&&!_.isEmpty()&&s.getCurrentVariantId()===""){var A=this._mergeDefaultWithSFBVariant(_,new g(JSON.stringify(s.getUiState().getSelectionVariant())));O=this._setUiStateToGlobalFilter(A,O,true)}if(s.getCurrentVariantId()!==""){this._setDisplayCurrency(_)}Promise.resolve(this._processModifyStartupExtension(O)).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&t.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){U.setSemanticDateRangeDefaultValue(n,o,l,e||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}i()}.bind(this));break;case"initial":Promise.resolve(this._processModifyStartupExtension()).then(function(a){this._addFieldsToSFBAdvancedArea(a);if(this.oGlobalFilter.isCurrentVariantStandard()&&t.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){U.setSemanticDateRangeDefaultValue(n,o,l,e||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false)}i()}.bind(this));break;default:break}}.bind(this))},_mergeDefaultWithSFBVariant:function(t,e){if(t.isEmpty()){return e}var a=new g;var i,r;[e,t].forEach(function(t){i=t.getSelectOptionsPropertyNames();i.forEach(function(e){a.removeSelectOption(e);if(!a.getParameter(e)){a.massAddSelectOption(e,t.getSelectOption(e))}});r=t.getParameterNames();r.forEach(function(e){a.removeParameter(e);if(!a.getSelectOption(e)){a.addParameter(e,t.getParameter(e))}})});return a},_setDisplayCurrency:function(t){var e=this.getGlobalFilter();if(!e){return}var a,i;var r=e.getAnalyticalParameters();if(r&&r.length>0){a=r.length;while(a--){if(r[a].name==="P_DisplayCurrency"||r[a].name==="DisplayCurrency"){i=r[a];break}}}if(!i){return}var s=e.getFilters([i.fieldName]);var n=s&&s[0]&&s[0].oValue1;if(n&&n!==" "){return}var o,l;if(i.name.indexOf("P_")===0){l=i.name;o=i.name.substr(2)}else{l="P_"+i.name;o=i.name}if(t&&!t.isEmpty()){var d;n=t.getParameter(o);if(!n||n===" "){n=t.getParameter(l)}if(!n||n===" "){d=t.getSelectOption(o);n=d&&d[0]&&d[0].Low}if(!n||n===" "){d=t.getSelectOption(l);n=d&&d[0]&&d[0].Low}}if(!n||n===" "){n=i.defaultPropertyValue}if(!n||n===" "){return}var h=new g;h.addParameter(i.name,n);var u=new f({selectionVariant:h.toJSONObject()});e.setUiState(u,{replace:false,strictMode:false})},_getCustomAppState:function(){var t={},e={};this.getCustomAppStateDataExtension(t);if(!N(t)){e[J]=t}var a;var i=true;var r=function(t,e){if(!(t instanceof E)){throw new Error("State must always be set with respect to a ControllerExtension")}if(!i){throw new Error("State must always be provided synchronously")}if(e){a=a||Object.create(null);var r=t.getMetadata().getNamespace();a[r]=e}};this.templateBaseExtension.provideExtensionAppStateData(r);i=false;if(a){e[W]=a}return e},onBeforeSFBVariantSave:function(){var t=this._getCustomAppState();var e=this.getGlobalFilter().getFilterData();var a,i=this.getGlobalFilter().getBasicSearchControl();if(i&&i.getValue){a=i.getValue()}e._CUSTOM=t[J];e._EXTENSION=t[W];this.getGlobalFilter().setFilterData(e,true);if(a){this.getGlobalFilter().getBasicSearchControl().setValue(a)}this.getGlobalFilter().fireFilterChange()},onAfterSFBVariantLoad:function(){var t=this.getGlobalFilter().getFilterData();var e=this.getUIModel().getProperty("/enableLiveFilter");if(e){this.getGlobalFilter().fireFilterChange()}if(t){this._restoreAppState(t)}},onAssignedFiltersChanged:function(t){if(t.getSource()&&this.getView().byId("ovpFilterText")){this.getView().byId("ovpFilterText").setText(t.getSource().retrieveFiltersWithValuesAsText())}},_CustomFilterField:function(t,e){for(var a in t){if(t.hasOwnProperty(a)){e[a]=t[a]}}},_getCurrentAppState:function(t){var e=this.getGlobalFilter();if(!e){return}var a={};var i=this._getCustomAppState();var r={_CUSTOM:i[J],_EXTENSION:i[W]};if(!t){if(r._CUSTOM){this._CustomFilterField(r._CUSTOM,a)}if(r._EXTENSION){var s=Object.keys(r._EXTENSION);if(s){this._CustomFilterField(r._EXTENSION[s],a)}}if(!N(a)){var n=this.getGlobalFilter().getFilterData();n._CUSTOM=a;this.getGlobalFilter().setFilterData(n,true)}}var o=e.getUiState({allFilters:false});var l=o&&o.getSelectionVariant();if(e.getSmartVariant().currentVariantGetModified()){l.SelectionVariantID=""}var d=l&&JSON.stringify(l);var h=new g(d);return{selectionVariant:h.toJSONString(),semanticDates:o.getSemanticDates(),customData:r}},_storeCurrentAppStateAndAdjustURL:function(t,e){if(t&&!t.oSource._bDirtyViaDialog){return}if(!this.bGlobalFilterLoaded){return}if(!this.oNavigationHandler){return}if(this.oAppStatePromise){this.rejectPreviousPromise&&this.rejectPreviousPromise("skip")}this.oAppStatePromise=new Promise(function(t,a){this.rejectPreviousPromise=a;var i=this._getCurrentAppState(e);var r=this.oNavigationHandler.storeInnerAppStateWithImmediateReturn(i,true);r.promise.then(function(e){t(e)},function(t){a(t.getErrorCode())})}.bind(this));if(!this.bSkipIAppStateGeneration){var a=function(t){this.oAppStatePromise=null;if(t&&t.length>0){this.oNavigationHandler.replaceHash(t);return}throw"AppState key is empty"};var i=function(t){this.oAppStatePromise=null;if(t==="skip"){throw t}throw"Something went wrong while storing AppState - "+t};this.oAppStatePromise.then(a.bind(this),i.bind(this)).catch(function(t){if(t==="skip"){return}})}this.bSkipIAppStateGeneration=false},setTitle:function(t,e,a){var i="";if(t){i=t}else if(e){i=e}else{i=a}return i},onMacroFilterBarSearch:function(t){this._collapseHeaderForPage();if(this.fnMacroFilterBarLoaded!==undefined){this.fnMacroFilterBarLoaded();I.loadingState.GLOBALFILTERFILLED=true;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.bGlobalFilterLoaded=true}this.bGoButtonPressed=true;var e=this.getLayout();if(e){e.setActive(true)}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal()}this._clearStoredEntities();this.aFilters=t.getParameter("filters");var a="ovp-"+(new Date).getTime();for(var i in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(i)&&!n.isODataV4(this.oCardsModels[i])){try{this.oCardsModels[i].refresh(false,false,a)}catch(t){q.warning(t)}}}this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters)}})});
sap.ui.predefine("sap/ovp/app/NavigationHelper", ["sap/fe/navigation/SelectionVariant","sap/fe/navigation/PresentationVariant","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/CommonUtils","sap/ui/model/FilterOperator","sap/ovp/cards/Integration/Helpers/Filters","sap/base/util/merge","sap/ui/thirdparty/jquery","sap/fe/navigation/library"],function(t,e,a,r,i,n,o,jQuery,s){"use strict";var p=s.SuppressionBehavior;function l(t){if(t.startsWith("#")){t=t.slice(1)}var e=t.split("-");var a=e[0]||"";var r=e[1]?e[1].split("?")[0]:"";var i={};var n=e[1]?e[1].split("?")[1]:undefined;if(n){var o=n.split("&");for(var s=0;s<o.length;s++){var p=o[s];var l=p.split("=")[0];var v=p.split("=")[1];i[l]=v}}return{semanticObject:a,action:r,parameters:i}}function v(t){if(!t){return false}var e=t.getEntityType();var a=t.getCardPropertiesModel();if(e&&a){var r=a.getProperty("/identificationAnnotationPath");var i=e[r];if(t.isNavigationInAnnotation(i)){return true}}var a=t.getCardPropertiesModel();var n=a&&a.getProperty("/template");var o=["sap.ovp.cards.table","sap.ovp.cards.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.list"];if(o.indexOf(n)>-1&&t.checkLineItemNavigation()){return true}return false}function c(t,e){var a=t.getEntityNavigationEntries()||[];var r=a.length>0?a[0]:{};if(e.cardComponentName==="List"||e.cardComponentName==="Table"){var i=t.getCardItemsBinding(),n=i&&i.getAllCurrentContexts(),o=n&&n[0],s=t.getCardPropertiesModel().getProperty("/annotationPath"),p=t.getEntityNavigationEntries(o,s),l=p.length>0?p[0]:{};var v={};var c={};if(r&&r.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){c=u(t,r)}else if(r&&r.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){c=P(t,r)}if(l&&l.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){v=u(t,l)}else if(l&&l.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){v=P(t,l)}if(v&&v.semanticObject&&v.action){c["lineItemSemanticObject"]=v.semanticObject;c["lineItemAction"]=v.action}return c}if(r&&r.type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return u(t,r)}if(r&&r.type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return P(t,r)}}function u(t,e){if(!sap.ushell.Container){return}var a=sap.ushell.Container.getService("URLParsing");if(!a.isIntentUrl(e.url)){return{type:"url",url:e.url}}else{var r=P(t,e);if(r.semanticObject){return r}else{var i=a.parseShellHash(e.url);return P(t,i)}}}function f(t){var e=t.getCardPropertiesModel(),a=e.getProperty("/customParams"),i=t.getView().getBindingContext(),o=i?i.getObject():null,s;if(i&&typeof i.getAllData==="function"&&a){s=i.getAllData()}var p=h(o,s,i,t);var l=p&&p["navSelectionVariant"];if(l&&!r.isJSONData(l)){p["navSelectionVariant"]=n.removeExtraInfoVariant(l)}var v=p&&p["sNavPresentationVariant"];if(v&&!r.isJSONData(v)){p["sNavPresentationVariant"]=n.removeExtraInfoVariant(v)}return p}function g(t){var e=[];for(var a=0;a<t.property.length;a++){if(t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool){e.push(t.property[a].name)}}return e}function d(e,a){var r="{}";var i=new t(r);var n,o,s,p;var l=a._getFilterPreference();var v=e.filters;var c=e.parameters;for(var u=0;u<v.length;u++){n=v[u];if(n.path&&n.operator&&typeof n.value1!=="undefined"){o=n.value1.toString();s=typeof n.value2!=="undefined"?n.value2.toString():undefined;if(a._checkIfCardFiltersAreValid(l,n.path)){i.addSelectOption(n.path,n.sign,n.operator,o,s)}}}var f,g,d;for(var m=0;m<c.length;m++){p=c[m];if(!p.path||!p.value){continue}f=p.path.split("/").pop();f=f.split(".").pop();if(f.indexOf("P_")===0){g=f;d=f.substr(2)}else{g="P_"+f;d=f}if(i.getParameter(g)){continue}if(i.getParameter(d)){continue}i.addParameter(f,p.value)}return i}function m(t,e){var a={selectionVariant:"",staticPropertyMap:{}};var r=o({},t);var i={};if(t&&t.SelectOptions&&t.SelectOptions.length){r.SelectOptions=[];t.SelectOptions.forEach(function(t){var a=t&&t.Ranges;var n=t&&t.PropertyName;var o=a&&a.length===1;var s=a&&a[0];if(o&&s["Option"]==="EQ"&&!s["High"]&&s["Low"]&&!e.includes(n)&&s["Sign"]==="I"){i[n]=s["Low"]}else if(!e.includes(n)){r.SelectOptions.push(t)}})}a.selectionVariant=r||"";a.staticPropertyMap=i;return a}function h(t,n,o,s){var l=s.getCardPropertiesModel(),v=l&&l.getProperty("/staticContent"),c={};var u,f,h;if(!v){var P=a.getCardSelections(s.getCardPropertiesModel()),y=P.filters,S=P.parameters,b=s.getEntityType();y&&y.forEach(function(t){t.path=t.path.replace("/",".");switch(t.operator){case i.NE:t.operator=i.EQ;t.sign="E";break;case i.Contains:t.operator="CP";var e=t.value1;t.value1="*"+e+"*";break;case i.EndsWith:t.operator="CP";var e=t.value1;t.value1="*"+e;break;case i.StartsWith:t.operator="CP";var e=t.value1;t.value1=e+"*"}});P.filters=y;if(o&&t&&t.hasOwnProperty("$isOthers")){var O=o.getOtherNavigationDimensions();for(var C in O){var I=O[C];for(var N=0;N<I.length;N++){P.filters.push({path:C,operator:"EQ",value1:I[N],sign:"E"})}}}S&&S.forEach(function(t){t.path=t.path.replace("/",".")});P.parameters=S;var E=a.getCardSorters(s.getCardPropertiesModel());if(t){var C;for(var N=0;b.property&&N<b.property.length;N++){C=b.property[N].name;var V=t[C];if(t.hasOwnProperty(C)){if(Array.isArray(t[C])&&t[C].length===1){c[C]=t[C][0]}else if(jQuery.type(V)!=="object"){c[C]=V}}}}var D=l&&l.getProperty("/kpiAnnotationPath");var F=l&&l.getProperty("/template");if(D&&F==="sap.ovp.cards.charts.analytical"){var A=b[D];var U=A&&A.Detail;if(U&&U.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){c["kpiID"]=A.ID.String}}h=E&&new e(E);u=d(P,s);f=l&&l.getProperty("/staticParameters")}var j;if(n&&!n.bStaticLinkListIndex){j=s._processCustomParameters(n,u,c)}else if(n&&n.bStaticLinkListIndex){j=s._processCustomParameters(n,u)}else{j=s._processCustomParameters(c,u)}var M=j?p.ignoreEmptyString:null;if(f){for(var C in f){if(!c.hasOwnProperty(C)){c[C]=f[C]}}}var k=r.getNavigationHandler(),w=k&&k.mixAttributesAndSelectionVariant(c,u.toJSONString(),M),x=g(b);w=w&&w.toJSONObject();var L=m(w,x);return{sensitiveProperties:x,navSelectionVariant:L&&L.selectionVariant&&L.selectionVariant.SelectOptions.length?L.selectionVariant:null,staticPropertyMap:L&&L.staticPropertyMap,sNavPresentationVariant:h?h.toJSONObject():null}}function P(t,e){return{type:"intent",semanticObject:e.semanticObject,action:e.action,staticParams:f(t)}}return{getNavigationIntentFromAuthString:l,bCheckNavigationForCard:v,getNavigationParameters:c}},true);
sap.ui.predefine("sap/ovp/app/OVPUtils", ["sap/base/util/isPlainObject"],function(e){"use strict";var t={bCRTLPressed:false};t.constants={explace:"explace",inplace:"inplace"};t.Annotations={dataPoint:"dataPoint",title:"title",subTitle:"subtitle",valueSelectionInfo:"value Selection Info",listFlavor:"listFlavor"};t.Layers={vendor:"VENDOR",customer:"CUSTOMER",customer_base:"CUSTOMER_BASE"};t.loadingState={ERROR:"Error",LOADING:"Loading",GLOBALFILTERFILLED:false};t.merge=function(){var t,i,n,a,o,r,l=arguments[0]||{},s=1,f=arguments.length,u=false;if(typeof l==="boolean"){u=l;l=arguments[1]||{};s=2}if(typeof l!=="object"&&typeof l!=="function"){l={}}if(f===s){l=this;--s}for(;s<f;s++){if((t=arguments[s])==null){continue}for(i in t){n=l[i];a=t[i];if(l===a){continue}if(u&&a&&(e(a)||(o=Array.isArray(a)))){if(o){o=false;r=n&&Array.isArray(n)?n:[]}else{r=n&&e(n)?n:{}}l[i]=this.merge(u,r,a)}else if(a!==undefined){l[i]=a}}}return l};return t},true);
sap.ui.predefine("sap/ovp/app/ShareUtils", ["sap/ui/base/Object","sap/m/library","sap/m/MenuItem","sap/ui/core/Core","sap/ui/core/Fragment","sap/ui/core/CustomData","sap/base/util/ObjectPath","sap/ui/thirdparty/hasher","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/performance/trace/FESRHelper"],function(e,t,r,o,a,i,n,s,l,c,u){"use strict";return e.extend("sap.ovp.app.ShareUtils",{constructor:function(e){if(!e){throw new Error("controller is undefined!")}this.oController=e},init:function(){this._createModelForTile();this._checkJamAuth()},onShareButtonAvailableAndPressed:function(e){var n=this.oController._getLibraryResourceBundle();var s=this.oController.getUIModel();var h=s&&s.getProperty("/title");var p=this;var m;var d={shareEmailPressed:function(){t.URLHelper.triggerEmail(null,n.getText("Email_Subject",[h]),document.URL)},shareMSTeamsPressed:function(){var e="";var t=s.getProperty("/subtitle");if(t&&t.length>0){e=s.getProperty("/appTitle")||"";t=h+" - "+t}else{t="";e=h}var r={url:document.URL,appTitle:e,subTitle:t,minifyUrlForChat:true};p.oSuiteCollaborationService.share(this.getCustomData()[0].getValue(),r)},shareJamPressed:function(){var e=o.createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:h}}});e.open()},shareTilePressed:function(){m.firePress()}};if(this.oShareActionSheet){this.oShareActionSheet.destroy()}this.oSharePageFragment=a.load({name:"sap.ovp.app.SharePage",controller:d}).then(function(e){p.oController.getView().addDependent(e);return e});this.oSharePageFragment.then(function(t){p.oShareActionSheet=t;m=new l("",{customUrl:s.getProperty("/tileInfo").tileCustomURL(),title:h,tileIcon:s.getProperty("/icon")||"sap-icon://bookmark"});s.setProperty("/tileVisible",m.getEnabled());s.setProperty("/tileIcon",m.getIcon());s.setProperty("/tileText",m.getText());var o=2;if(!s.getProperty("/jamVisible")){o=1}c.getServiceAsync().then(function(t){p.oSuiteCollaborationService=t;var a=p.oSuiteCollaborationService.getOptions();if(Array.isArray(a)&&a.length>0){a.forEach(function(e){if(Array.isArray(e.subOptions)&&e.subOptions.length>1){var t=[];e.subOptions.forEach(function(e){var o=new r({text:e.text,icon:e.icon,press:d.shareMSTeamsPressed});o.addCustomData(new i({key:"data",value:e}));u.setSemanticStepname(o,"press",e.fesrStepName);t.push(o)});p.oShareActionSheet.insertItem(new r({text:e.text,icon:e.icon,items:t}),o)}else{var a=new r({text:e.text,icon:e.icon,press:d.shareMSTeamsPressed});a.addCustomData(new i({key:"data",value:e}));u.setSemanticStepname(a,"press",e.fesrStepName);p.oShareActionSheet.insertItem(a,o)}o++})}p.oShareActionSheet.openBy(e)})})},_checkJamAuth:function(){var e=n.get("sap.ushell.Container.getUser");var t=this.oController.getUIModel();if(t){t.setProperty("/jamVisible",!!e&&e().isJamActive())}},_createModelForTile:function(){var e=this.oController.getUIModel();var t,r=e&&e.getProperty("/title");var o={tileTitle:r,tileCustomURL:function(){t=s.getHash();return t?"#"+t:window.location.href}};if(e){e.setProperty("/tileInfo",o)}}})});
sap.ui.predefine("sap/ovp/app/TemplateBaseExtension", ["sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(e,t){"use strict";return e.extend("sap.ovp.app.TemplateBaseExtension",{metadata:{methods:{provideExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},restoreExtensionAppStateData:{public:true,final:false,overrideExecution:t.After},addFilters:{public:true,final:false,overrideExecution:t.After},provideStartupExtension:{public:true,final:false,overrideExecution:t.After},provideExtensionNavigation:{public:true,final:false,overrideExecution:t.After},provideCustomActionPress:{public:true,final:false,overrideExecution:t.After},provideCustomParameter:{public:true,final:false,overrideExecution:t.After}}},provideExtensionAppStateData:function(e){},restoreExtensionAppStateData:function(e){},addFilters:function(e){},provideStartupExtension:function(e){},provideExtensionNavigation:function(e,t,i){},provideCustomActionPress:function(e){},provideCustomParameter:function(e){}})});
sap.ui.predefine("sap/ovp/app/resources", ["sap/ui/model/resource/ResourceModel","sap/ovp/cards/ovpLogger","sap/ui/core/Core"],function(e,r,o){"use strict";var u={};u.oResourceBundle=null;u.oResourceModel=null;var n=new r("OVP.app.resources");u.pResourcePromise=o.getLibraryResourceBundle("sap.ovp",true).then(function(r){if(!r){return Promise.reject("Bundle creation failure")}u.oResourceBundle=r;u.oResourceModel=new e({bundleUrl:r.oUrlInfo.url,bundle:r});return Promise.resolve()},function(e){throw e});u.pResourcePromise.catch(function(e){n.error("sap.ovp resource library bundle error:"+e)});u.getText=function(e,r){if(r&&r.length>0){return this.oResourceBundle?this.oResourceBundle.getText(e,r):null}else{return this.oResourceBundle?this.oResourceBundle.getText(e):null}};u.getProperty=function(e){return this.oResourceModel?this.oResourceModel.getProperty(e):null};return u},true);
sap.ui.predefine("sap/ovp/cards/ActionUtils", ["sap/ui/layout/form/SimpleForm","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/library"],function(a,e,r,t){"use strict";var n=t.smartfield.JSONType;return{getActionInfo:function(a,e,r){var t=a.getModel().getMetaModel();var n=e.action.split("/")[1];var o=a.getObject();var i={oContext:a,sFunctionImportPath:e.action,sFunctionLabel:e.label,oFunctionImport:t.getODataFunctionImport(n),parameterData:{},allParameters:[]};var l;if(i.oFunctionImport.parameter){var s=this._getKeyProperties(r);for(var m=0;m<i.oFunctionImport.parameter.length;m++){var u=i.oFunctionImport.parameter[m];this._addParamLabel(u,r,t);if(s[u.name]){u.isKey=true}if(typeof u.nullable==="undefined"){u.nullable=true}if(o.hasOwnProperty(u.name)){l=o[u.name]}else{l=""}i.parameterData[u.name]=l;i.allParameters.push(u)}}return i},_getKeyProperties:function(a){var e={};if(a&&a.key&&a.key.propertyRef){for(var r=0;r<a.key.propertyRef.length;r++){var t=a.key.propertyRef[r].name;e[t]=true}}return e},_addParamLabel:function(a,e,r){if(e&&a&&!a["com.sap.vocabularies.Common.v1.Label"]){var t=r.getODataProperty(e,a.name,false);if(t&&t["com.sap.vocabularies.Common.v1.Label"]){a["com.sap.vocabularies.Common.v1.Label"]=t["com.sap.vocabularies.Common.v1.Label"]}else if(t&&t["sap:label"]){a["sap:label"]=t["sap:label"]}}},buildParametersForm:function(t,o){function i(a){var e="";if(a["com.sap.vocabularies.Common.v1.Label"]){e=a["com.sap.vocabularies.Common.v1.Label"].String}else if(a["sap:label"]){e=a["sap:label"]}else{e=a.name}return e}var l=new a({editable:true});var s=[];for(var m=0;m<t.allParameters.length;m++){var u=t.allParameters[m];var p=i(u);var v="{/"+u.name+"}";var f=null;var d=u.type;var c=u.maxLength?parseInt(u.maxLength,10):undefined;if(d==="Edm.Boolean"){f=n.Boolean}else if(d==="Edm.Byte"||d==="Edm.SByte"||d==="Edm.Int16"||d==="Edm.Int32"){f=n.Integer}else{f=n.String}var y=this._isMandatoryParameter(u);var b=new e({value:v,mandatory:y,jsontype:f,maxLength:c,editable:!u.isKey});b.attachChange(o);s.push(b);var g=new r;g.setRequired(y&&!u.isKey);g.setText(p);g.setLabelFor(b);l.addContent(g);l.addContent(b)}return l},getParameters:function(a,e){var r=this._validateParametersValue(a,e);return r.preparedParameterData},mandatoryParamsMissing:function(a,e){var r=this._validateParametersValue(a,e);return r.missingMandatoryParameters&&r.missingMandatoryParameters.length>0},_validateParametersValue:function(a,e){var r=[];var t=a.getObject("/");var n={};var o,i;for(var l=0;l<e.parameter.length;l++){var s=e.parameter[l];var m=s.name;if(t.hasOwnProperty(m)){o=t[m];i=this._isMandatoryParameter(s);if(o===undefined||o===""){if(i){if(s.type==="Edm.Boolean"){n[m]=false}else{r.push(s)}}}else{n[m]=o}}else{throw new Error("Unknown parameter: "+m)}}return{preparedParameterData:n,missingMandatoryParameters:r}},_isMandatoryParameter:function(a){return!this._toBoolean(a.nullable)},_toBoolean:function(a){if(typeof a==="string"){var e=a.toLowerCase();return!(e=="false"||e==""||e==" ")}return!!a}}},true);
sap.ui.predefine("sap/ovp/cards/AnnotationHelper", ["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/model/analytics/odata4analytics","sap/fe/navigation/SelectionVariant","sap/ovp/app/resources","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/security/encodeURL","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ui/comp/odata/type/FiscalDate","sap/ui/comp/odata/FiscalFormat","sap/ui/core/library"],function(e,t,r,a,i,n,o,u,l,s,f,c,p,v,g,m,h,P,y,d){"use strict";var C={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var b={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var T={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var D={List_condensed:{phone:5,tablet:5,desktop:5},List_extended:{phone:3,tablet:3,desktop:3},List_condensed_bar:{phone:5,tablet:5,desktop:5},List_extended_bar:{phone:3,tablet:3,desktop:3},Table:{phone:5,tablet:5,desktop:5},Stack_simple:{phone:20,tablet:20,desktop:20},Stack_complex:{phone:5,tablet:5,desktop:5}};var O=new m("OVP.cards.AnnotationHelper");function I(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/showLabelText");if(a==="true"){var i=t.Address[0];if(typeof i.country!=="undefined"){return"{path:'"+i.country.Path+"'}"}else if(typeof i.locality!=="undefined"){return"{path:'"+i.locality.Path+"'}"}else if(typeof i.street!=="undefined"){return"{path:'"+i.street.Path+"'}"}else if(typeof i.code!=="undefined"){return"{path:'"+i.code.Path+"'}"}}else{return null}}I.requiresIContext=true;function F(e,t){if(!t){return""}if(t.Label){return t.Label.String}var r=e.getSetting&&e.getSetting("ovpCardProperties");var a=r&&r.getProperty("/metaModel");var i=r&&r.getProperty("/entityType");if(!a||!i){return""}var n;if(t.Value){n=t.Value.Path}if(t.Target){var o=B(i.$path,t);var u=o&&a.getProperty(o);n=u&&u.Value.Path}if(!n||!n.length>0||n===" "){return""}var l=a.getODataProperty(i,n);if(!l){return""}var s=l["sap:label"]||(l["com.sap.vocabularies.Common.v1.Label"]||"").String||"";return s}F.requiresIContext=true;function S(e){if(e.EdmType==="Edm.DateTime"||e.EdmType==="Edm.DateTimeOffset"){return"Right"}return"Left"}S.requiresContext=true;function V(e,t){if(e.getSetting){var r=e.getSetting("_ovpCache");if(r){return r[t]}}return undefined}function N(e,t,r){if(e.getSetting){var a=e.getSetting("_ovpCache");if(a){a[t]=r}}}function x(e,t){var r;if(t){r=t.None;if(e&&e.EnumMember){var a=e.EnumMember;if(R(a,"Negative")){r=t.Negative}else if(R(a,"Critical")){r=t.Critical}else if(R(a,"Positive")){r=t.Positive}}}return r}function E(e){if(e=="Error"){e=1}else if(e=="Warning"){e=2}else if(e=="Success"){e=3}else{e=0}return e}function R(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}function M(e,t,r,a,i,n,o){var u={};u.EnumMember="None";var l=Number.NEGATIVE_INFINITY;var s=Number.POSITIVE_INFINITY;if(!i&&i!==0&&(r||r===0)){i=r}if(!n&&n!==0&&(a||a===0)){n=a}if(!r&&r!==0){r=l}if(!a&&a!==0){a=s}if(e!==undefined){e=Number(e);if(R(t,"Minimize")||R(t,"Minimizing")){if((n||n===0)&&(a||a===0)){if(e<=parseFloat(n)){u.EnumMember="Positive"}else if(e>parseFloat(a)){u.EnumMember="Negative"}else{u.EnumMember="Critical"}}}else if(R(t,"Maximize")||R(t,"Maximizing")){if((i||i===0)&&(r||r===0)){if(e>=parseFloat(i)){u.EnumMember="Positive"}else if(e<parseFloat(r)){u.EnumMember="Negative"}else{u.EnumMember="Critical"}}}else if(R(t,"Target")){if((n||n===0)&&(a||a===0)&&(i||i===0)&&(r||r===0)){if(e>=parseFloat(i)&&e<=parseFloat(n)){u.EnumMember="Positive"}else if(e<parseFloat(r)||e>parseFloat(a)){u.EnumMember="Negative"}else{u.EnumMember="Critical"}}}}return x(u,o)}function A(e,t,r,a){if(!e||!t){return}e=Number(e);if(!a&&e-t>=0){return"Up"}if(!r&&e-t<=0){return"Down"}if(t&&a&&e-t>=a){return"Up"}if(t&&r&&e-t<=r){return"Down"}}function U(e,t){var r=e.getPath(0)+"-DataFields-Sorted";var a=V(e,r);if(!a){var i=q(e,t);var n=i.map(function(e){return e.Value.Path});n=n.filter(function(e){return!!e});a=t.filter(function(e){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&n.indexOf(e.Value.Path)===-1){return true}return false});a=H(a);N(e,r,a)}return a}U.requiresIContext=true;function q(e,t,r){var a=e.getPath(0)+"-DataPoints-Sorted";var i=V(e,a);if(!i){if(r){i=t.filter(w)}else{i=t.filter(_)}i=H(i);var n;for(var o=0;o<i.length;o++){n=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);i[o]=e.getModel(0).getProperty(B(n,i[o]));n=""}N(e,a,i)}return i}q.requiresIContext=true;function _(e){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true}return false}function w(e){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.AnnotationPath.match(/@com.sap.vocabularies.Communication.v1.Contact.*/)){return true}return false}function L(e){if(!e||!e.Criticality||!e.Criticality.Path){return}return"{path:'"+e.Criticality.Path+"'}"}function B(e,t){if(e&&!R(e,"/")){e+="/"}return e+t.Target.AnnotationPath.slice(1)}function k(e){var t,r;if(e["com.sap.vocabularies.UI.v1.Importance"]){t=e["com.sap.vocabularies.UI.v1.Importance"].EnumMember;switch(t){case"com.sap.vocabularies.UI.v1.ImportanceType/High":r=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":r=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":r=3;break}}else{r=4}return r}function H(e){if(e.length<2){return e}var t=parseInt(e.length/2,10);var r=e.slice(0,t);var a=e.slice(t,e.length);return j(H(r),H(a))}function j(e,t){var r=[];while(e.length&&t.length){var a=k(e[0]),i=k(t[0]);if(a<=i){r.push(e.shift())}else{r.push(t.shift())}}while(e.length){r.push(e.shift())}while(t.length){r.push(t.shift())}return r}function Y(e,t,r){var a=U(e,t)[r];if(a){return $(e,a)}return""}function G(e,t,r){var a=U(e,t)[r];return F(e,a)}function X(e,t,r){var a=q(e,t)[r];if(a&&a.Title){return a.Title.String}return""}function z(e,t,r){var a=t.filter(_);a=H(a);if(!a||!a.length||!a.length>0){return""}return F(e,a[0])}function J(e,t,r,a){var i=q(e,t)[r];if(!i){return""}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");return K(e,i,o,u,a)}function Q(e,t,r){var a=q(e,t)[r];if(a&&a.Criticality){return true}}function W(e,t,r){var a=q(e,t)[r];var i=a.Criticality.Path;return"{path:'"+i+"'}"}function K(e,t,r,a,i){if(!t||!t.Value){return""}var n=e.getSetting("ovpCardProperties");var o=false;if(n){var u=n.getProperty("/ignoreSapText");o=u==undefined?o:u}var l=a.getODataProperty(r,t.Value.Path);var s=false;if(o==true){if(l&&(l["com.sap.vocabularies.Analytics.v1.Measure"]||l["sap:aggregation-role"]=="measure")){s=true}}if(!s&&l){var f;if(l[b.TEXT]){f=l[b.TEXT].String?l[b.TEXT].String:l[b.TEXT].Path}else if(l["sap:text"]){f=l["sap:text"]}if(f){l=a.getODataProperty(r,f);t={Value:{Path:l.name}}}}return $(e,t,i)}function $(e,t,r,i){if(t.Value.Apply){return a.format(e,t.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");return ee(e,t,o,u,r,i)}$.requiresIContext=true;function Z(e,t,r,i){if(!r||typeof i!=="string"){return i}var n=r[b.TEXT]||r["sap:text"];if(!n){return i}var o,u;o=r[b.TEXT_ARRANGEMENT];u=o&&o.EnumMember;if(!u){o=n&&n[b.TEXT_ARRANGEMENT];u=o&&o.EnumMember}if(!u){o=t&&t[b.TEXT_ARRANGEMENT];u=o&&o.EnumMember}var l;if(typeof n==="object"){l=a.format(e,n)}else{l=a.format(e,{Path:n})}if(!l||l===" "){return i}if(!u){return i+" ("+l+")"}var s;switch(u){case T.TEXT_FIRST:s=l+" ("+i+")";break;case T.TEXT_LAST:s=i+" ("+l+")";break;case T.TEXT_ONLY:s=l;break;case T.TEXT_SEPARATE:s=i+" ("+l+")";break;default:s=i;break}return s}function ee(e,t,r,i,n,o,u){if(t.Value.Apply){return a.format(e,t.Value)}var l=t.Value.Path?t.Value.Path:t.Value.String;var s=i.getODataProperty(r,l),f="",c,p;var v=e.getSetting("ovpCardProperties");var g=v&&v.getProperty("/contentFragment");if(!o){if(t.Value.Path&&t.Value.Path.split("/").length>1){s=oe(i,r,t.Value.Path)}if(!s){return""}if(s["type"]==="Edm.DateTime"||s["type"]==="Edm.DateTimeOffset"){var m={relative:true,relativeScale:"auto"},h=v&&v.getProperty("/showDateInRelativeFormat");if(h!==undefined&&!h){m={style:"medium"}}c="sap.ovp.cards.AnnotationHelper.formatDate";p={dateFormat:m,bUTC:s["type"]==="Edm.DateTime"?true:false,functionName:c};f=re([t.Value.Path?t.Value.Path:s.name],c,p)}else if(t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits||s["scale"]){var P=t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits?t.ValueFormat.NumberOfFractionalDigits.Int:0,y;var d=t.ValueFormat&&t.ValueFormat.ScaleFactor&&t.ValueFormat.ScaleFactor.Decimal;if(s[b.ISO_CURRENCY]){y=s[b.ISO_CURRENCY].Path?s[b.ISO_CURRENCY].Path:s[b.ISO_CURRENCY].String}else if(s[b.UOM]){y=s[b.UOM].Path?s[b.UOM].Path:s[b.UOM].String}else if(s["sap:unit"]){y=s["sap:unit"]}var C=y?i.getODataProperty(r,y):null,T=[t.Value.Path?t.Value.Path:s.name];if(P>2){P=2}p={numberOfFractionalDigits:P,scaleFactor:d};if(s[b.ISO_CURRENCY]){var D=s[b.ISO_CURRENCY];if(D.Path){c="sap.ovp.cards.AnnotationHelper.formatCurrency";T.push(D.Path)}else if(D.String){p.currencyString=D.String;c="sap.ovp.cards.AnnotationHelper.formatCurrency"}}else if(C&&(C[b.ISO_CURRENCY]||C["sap:semantics"]==="currency-code")){c="sap.ovp.cards.AnnotationHelper.formatCurrency";T.push(y)}else{c="sap.ovp.cards.AnnotationHelper.formatNumberCalculation"}p.functionName=c;f=re(T,c,p)}else{if(u){f=a.simplePath(e,t.Value)}else{var O=a.format(e.getModel()?e:e.getInterface(0),t.Value);var I=O.split(",");var F=[];if(I.length>1){for(var S=0;S<I.length;S++){if(I[S].indexOf("path:")>=0||I[S].indexOf("type:")>=0){F.push(I[S])}}if(F.length>0){f=f+F.join(",");if(f.substring(f.length-1)!=="}"){f=f+"}"}}}else{f=O}}}if(g){f=Z(e,r,s,f)}if(s&&s[b.UOM]){var V=s[b.UOM];if(V.Path){f+=" "+re([V.Path]);f+=" "+te(V.Path,i,r)}else if(V.String){if(V.String!=="%"){f+=" "}f+=V.String}}}if(!n){if(s[b.ISO_CURRENCY]){var D=s[b.ISO_CURRENCY];if(D){if(D.Path){f+=" "+re([D.Path]);f+=" "+te(D.Path,i,r)}else if(D.String){f+=" "+D.String}}}}if(f[0]===" "){f=f.substring(1)}return f}function te(e,t,r){if(e){var a,i,n;if(e.split("/").length>1){a=oe(t,r,e);i=Pe(t,r,e)}else{a=t.getODataProperty(r,e)}if(a){n=a[b.TEXT]&&a[b.TEXT].Path||a["sap:text"]}if(n&&i){n=i+"/"+n}if(n){return" ({"+n+"})"}return""}}function re(e,t,r){var a="",i=e.length;if(i>1||r){a="{parts:[";for(var n=0;n<i;n++){a+="{path: '"+e[n]+"'}"+(n===i-1&&!r?"]":", ")}if(r){var o="{value:"+JSON.stringify(r)+", model: 'ovpCardProperties'}";a+=o+"]"}}else{a="{path: '"+e[0]+"'"}a+=(t?", formatter: '"+t+"'":"")+"}";return a}function ae(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});return a.format(Number(r))}function ie(){var e=arguments[arguments.length-1],r=arguments[0];var a=t.getInstance(e.dateFormat);if(!r){r="";return r}return a.format(new Date(r),e.bUTC)}function ne(){var t=arguments[arguments.length-1],r=Number(arguments[0]),a=arguments[1];var i="";var n=e.getCurrencyInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(a){i=n.format(r,a)}else{i=t.currencyString?n.format(r,t.currencyString):n.format(r)}return i}function oe(e,t,r){var a=r.split("/");if(a.length>1){for(var i=0;i<a.length-1;i++){var n=e.getODataAssociationEnd(t,a[i]);if(n){t=e.getODataEntityType(n.type)}}return e.getODataProperty(t,a[a.length-1])}}function ue(e,t,r){var a=q(e,t);var i=C.StateValues;var n=a[r];if(!n){return i.None}if(n.Criticality){return ce(e,n,i)}return ve(e,n,i)}function le(e,t,r){var a=q(e,t);if(a&&a.length){var i=a[0];if(i&&(i.Criticality||i.CriticalityCalculation)){return true}}return false}function se(e,t,r){if(le(e,t,r)){return""}return"sapUiChartPaletteQualitativeHue1"}se.requiresIContext=true;function fe(e,t,r){var a=q(e,t),i=C.ColorValues;var n=i.None;if(a.length>r){var o=a[r];if(o&&o.Criticality){n=ce(e,o,i)}else{n=ve(e,o,i)}}return n}function ce(e,t,r){var i=r.None;var n;var o=t.Criticality;if(o){n="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+r.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+r.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+r.Positive+"'' : "+"''"+r.None+"'' '}'";if(o.Path){var u="$"+a.simplePath(e,o);i=s(n,u)}else if(o.EnumMember){var l="'"+o.EnumMember+"'";i=s(n,l)}else{O.warning("Case not supported, returning the default Neutral state")}}else{O.warning("Case not supported, returning the default Neutral state")}return i}function pe(e,t,r){var a=q(e,t);var i="None";if(a.length>r){var n=a[r];if(n&&n.Criticality&&n.Criticality.Path){i=W(e,t,r)}else{i=ve(e,n,C.StateValues);i=E(i)}}return i}function ve(e,t,r){var a=r.None;if(t.Criticality){a=x(t.Criticality,r)}else if(t.CriticalityCalculation&&t.Value&&t.Value&&t.Value.Path){a=ge(e,t,r)}return a}function ge(e,t,r){var a=Re(t.Value);var i=t.CriticalityCalculation.ImprovementDirection.EnumMember;var n=Re(t.CriticalityCalculation.DeviationRangeLowValue);var o=Re(t.CriticalityCalculation.DeviationRangeHighValue);var u=Re(t.CriticalityCalculation.ToleranceRangeLowValue);var l=Re(t.CriticalityCalculation.ToleranceRangeHighValue);var s=he(n);var f=he(o);var c=he(u);var p=he(l);var v="sap.ovp.cards.AnnotationHelper.formatColor";var g={deviationLow:n,deviationHigh:o,toleranceLow:u,toleranceHigh:l,bIsDeviationLowBinding:s,bIsDeviationHighBinding:f,bIsToleranceLowBinding:c,bIsToleranceHighBinding:p,sImprovementDirection:i,oCriticalityConfigValues:r,functionName:v};var m="{value:"+JSON.stringify(g)+", model: 'ovpCardProperties'}";var h="parts: ["+a;h+=s?","+n:"";h+=f?","+o:"";h+=c?","+u:"";h+=p?","+l:"";h+=","+m;h+="]";return"{"+h+", formatter: '"+v+"'}"}function me(){var e=arguments[arguments.length-1];var t=1;return M(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?arguments[t++]:e.deviationLow,e.bIsDeviationHighBinding?arguments[t++]:e.deviationHigh,e.bIsToleranceLowBinding?arguments[t++]:e.toleranceLow,e.bIsToleranceHighBinding?arguments[t++]:e.toleranceHigh,e.oCriticalityConfigValues)}function he(e){return typeof e==="string"&&e.charAt(0)==="{"}function Pe(e,t,r){var a="";var i=r.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(a){a=a+"/"}a=a+i[n]}else{return a}}}return a}function ye(e){var t;if(e&&typeof e.getData==="function"){var r=e.getData();if(r.tabs){var a=0;var i=r.selectedKey;if(i&&r.tabs.length>=i){a=i-1}t=r.tabs[a].mFilterPreference}else{t=r.mFilterPreference}}return!!t}function de(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/addODataSelect");var i=r.getProperty("/metaModel");var n=i.getODataEntityType(t.entityType);var o=n[r.getProperty("/selectionAnnotationPath")];var u=n[r.getProperty("/presentationAnnotationPath")];var l="/"+t.name;var s=Array.prototype.slice.call(arguments,2);var f=e.getSetting("ovpCardProperties"),c=f.getProperty("/parameters");if(o||!!c){if(o&&o.Parameters&&o.Parameters.length>0||!!c){l=xt(e.getSetting("dataModel"),t,o,c)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var p="{path: '"+l+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var p="{path: '"+l+"', length: "+Me(r)}var v=[];if(a){v=be(e,i,n,s);var g=r.getProperty("/template");if(g!="sap.ovp.cards.charts.analytical"&&g!="sap.ovp.cards.charts.smart.chart"){var m=Oe(u);for(var h=0;h<m.length;h++){if(v.indexOf(m[h])===-1){v.push(m[h])}}}}var P=Ce(i,n,s);var y=ye(r);var d=false;if(y||v.length>0||P.length>0){p=p+", parameters: {"}if(v.length>0||P.length>0){if(v.length>0){p=p+"select: '"+v.join(",")+"'";d=true}if(P.length>0){if(v.length>0){p=p+", "}p=p+"expand: '"+P.join(",")+"'";d=true}if(y){p=p+", "}}if(y){p=p+"custom: {cardId: '"+r.getProperty("/cardId")+"'"+", _requestFrom: 'ovp_internal'}";d=false}else if(!p.includes(", parameters: {")){p=p+", parameters: {custom: {_requestFrom: 'ovp_internal'}}";d=false}else if(d){p=p+", custom: {_requestFrom: 'ovp_internal'}"}if(y||v.length>0||P.length>0){p=p+"}"}var C=De(r,u);if(C.length>0){p=p+", sorter:"+JSON.stringify(C)}var b=Ve(r,o);if(b.length>0){p=p+", filters:"+JSON.stringify(b)}p=p+"}";return p}de.requiresIContext=true;function Ce(e,t,r){var a=[];var i,n,o,u;for(var l=0;l<r.length;l++){if(!r[l]){continue}i=t.$path+"/"+r[l];n=e.createBindingContext(i);o=n.getObject();o=o?o:[];for(var s=0;s<o.length;s++){if(o[s].Value&&o[s].Value.Path){u=Pe(e,t,o[s].Value.Path);if(u&&a.indexOf(u)===-1){a.push(u)}var f=e.getODataProperty(t,o[s].Value.Path);if(f){var c;if(f[b.UOM]){c=f[b.UOM].Path}else if(f[b.ISO_CURRENCY]){c=f[b.ISO_CURRENCY].Path}else if(f[b.TEXT]){c=f[b.TEXT].Path}if(c&&c.split("/").length>1){u=Pe(e,t,c);if(u&&a.indexOf(u)===-1){a.push(u)}}else{var p=e.getODataProperty(t,c);if(p){var v=p[b.TEXT]&&p[b.TEXT].Path;if(v&&v.split("/").length>1){u=Pe(e,t,v);if(u&&a.indexOf(u)===-1){a.push(u)}}}}}}}}return a}function be(e,t,i,n){var o=[];var u,l,s;for(var c=0;c<n.length;c++){if(!n[c]){continue}u=i.$path+"/"+n[c];l=t.createBindingContext(u);var p={};if(e&&e.bDummyContext){g(p,e,l,true)}else{p=e}s=l.getObject();if(!s){s=[]}else if(f(s)){if(s.Data){s=s.Data}else{s=[]}}var v;var m;var h;var P;for(var y=0;y<s.length;y++){m=[];v=s[y];h="";P=v.RecordType;if(P==="com.sap.vocabularies.UI.v1.DataField"){h=ee(p,v,i,t,undefined,undefined,true)}else if(P==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d=B(i.$path,v);h=K(p,t.getProperty(d),i,t);var C=L(t.getProperty(d));if(C&&C.length>0){h+=C}}else if(P==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&v.Url){var b;if(!v.Url.UrlRef){b=a.format(p,v.Url)}if(b&&b.substring(0,2)==="{="){h=b}}if(h){var T=a.simplePath(p,v.Value);if(h.indexOf("(")<0&&h!==T){h=[].concat(T,h).join(" ")}m=Te(h)}if(m&&m.length>0){var D;for(var O=0;O<m.length;O++){D=m[O];if(!o[D]){o[D]=true;var I=r.getUnitColumn(D,i);if(I&&I!==D){o[I]=true}var F=ir(t,i,D);if(F&&F!==D){o[F]=true}}}}}}return Object.keys(o)}function Te(e){var t,r=0,a=e.length,i="",n;for(t=0;t<a;t++){n=e.charAt(t);if(!n){return}switch(n){case"{":r++;break;case"}":r--;break;default:if(r<=0){continue}break}i+=n}e=i;var o=/\${([a-zA-Z0-9\_|\/]*)/g;var u=/[^[{]*[a-zA-Z0-9\_]/g;var l=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var s,f,c=[];if(e.indexOf("{parts:[")!==-1){e=e.replace("{parts:[","");e=e.replace("]","");e=e.replace(e.lastIndexOf("}",""))}if(e.substring(0,2)==="{="){s=o;f=1}else if(e.indexOf("path")!==-1){if(e.indexOf("{value")>0){var p=0;var t=e.indexOf("{value")+5;var v;while(t<a){if(e[t]==="}"&&p===0){v=t;break}if(e[t]==="{"){p+=1}if(e[t]==="}"){p-=1}t++}e=e.slice(0,e.indexOf("{value"))+e.slice(v)}if(e.indexOf("constraints:{")!==-1){var p=0;var t=e.indexOf("constraints:{")+12;var v;while(t<a){if(e[t]==="{"){p+=1}if(e[t]==="}"){p-=1;if(p===0){v=t;break}}t++}e=e.slice(0,e.indexOf("constraints:{")-1)+e.slice(v+1)}var g=u.exec(e);while(g){if(g[0].indexOf("path")===-1&&g[0].indexOf("@i18n")!==0&&g[0].indexOf("model: 'ovpCardProperties'")<=-1){c.push(g[0])}g=u.exec(e)}s=l;f=1}else{s=u;f=0}var m=s.exec(e);while(m){if(m[f]&&m[f].indexOf("@i18n")!==0){c.push(m[f])}m=s.exec(e)}return c}function De(e,t){var r=[];var a,i;var n=e.getProperty("/sortBy");if(n){var o=e.getProperty("/sortOrder");if(o&&o.toLowerCase()!=="descending"){i=false}else{i=true}a={path:n,descending:i};r.push(a)}var u=t&&t.SortOrder||undefined;var l,n;if(u){for(var s=0;s<u.length;s++){l=u[s];n=l.Property.PropertyPath;i=Ne(l.Descending,true);a={path:n,descending:i};r.push(a)}}return r}function Oe(e){var t=[];var r=e&&e.RequestAtLeast||undefined;if(r){for(var a=0;a<r.length;a++){if(r[a].PropertyPath){t.push(r[a].PropertyPath)}}}return t}function Ie(e){var t=e.getProperty("/entityType");var r=t[e.getProperty("/selectionAnnotationPath")];return{filters:Ve(e,r),parameters:Se(r)}}function Fe(e){if(!e){return}var t=e.getProperty("/entityType");var r=t[e.getProperty("/presentationAnnotationPath")];var a=De(e,r);var i=[];var n,o=a.length;for(n=0;n<o;n++){if(!a[n].path){continue}i.push({Property:a[n].path,Descending:a[n].descending})}if(i.length>0){return{SortOrder:i}}}function Se(e){var t,r=[];if(!e||!e.Parameters){return r}var a=e.Parameters.length;for(var i=0;i<a;i++){t=e.Parameters[i];if(!t.PropertyName||!t.PropertyName.PropertyPath){continue}if(!t.PropertyValue){O.error("Missing value for parameter "+t.PropertyName.PropertyPath);continue}r[r.length]={path:t.PropertyName.PropertyPath,value:Ee(t.PropertyValue)}}return r}function Ve(e,t){var r=[];var a;var n=e.getProperty("/filters");if(n){r=r.concat(n)}if(t&&t.SelectOptions){a=t.SelectOptions}else{a=t}var o,u,l;if(a){for(var s=0;s<a.length;s++){o=a[s];u=o.PropertyName.PropertyPath;for(var f=0;f<o.Ranges.length;f++){l=o.Ranges[f];if(l.Sign.EnumMember){var c={path:u,operator:l.Option.EnumMember.split("/")[1],value1:Ee(l.Low),value2:Ee(l.High),sign:l.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(c.sign==="E"&&c.operator!==i.EQ){O.error("Exclude sign is supported only with EQ operator");continue}if(c.sign==="E"&&c.operator===i.EQ){c.operator=i.NE;c.sign="I"}if(c.operator==="CP"&&c.sign==="I"){var p=i.Contains;var v=c.value1;if(v){var g=v.indexOf("*");var m=v.lastIndexOf("*");if(g>-1){if(g===0&&m!==v.length-1){p=i.EndsWith;v=v.substring(1,v.length)}else if(g!==0&&m===v.length-1){p=i.StartsWith;v=v.substring(0,v.length-1)}else{v=v.substring(1,v.length-1)}}}c.operator=p;c.value1=v}r.push(c)}}}}return r}function Ne(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function xe(e){var t;if(e){if(e.String){t=Number(e.String)}else if(e.Int){t=Number(e.Int)}else if(e.Decimal){t=Number(e.Decimal)}else if(e.Double){t=Number(e.Double)}else if(e.Single){t=Number(e.Single)}}return t}function Ee(e){var t;if(e){if(e.String||e.String===""){t=e.String}else if(e.Boolean||e.Bool){t=Ne(e)}else if(e.DateTime){t=e.DateTime}else if(e.DateTimeOffset){t=e.DateTimeOffset}else{t=xe(e)}}return t}function Re(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return Ee(e)}}else{return""}}function Me(e){var t=e.getProperty("/contentFragment");var r=e.getProperty("/listType");var a=e.getProperty("/listFlavor");var i;var o="desktop";if(n.system.phone){o="phone"}else if(n.system.tablet){o="tablet"}if(t=="sap.ovp.cards.list.List"){if(r=="extended"){if(a=="bar"){i=D["List_extended_bar"]}else{i=D["List_extended"]}}else if(a=="bar"){i=D["List_condensed_bar"]}else{i=D["List_condensed"]}}else if(t=="sap.ovp.cards.table.Table"){i=D["Table"]}else if(t=="sap.ovp.cards.stack.Stack"){if(e.getProperty("/objectStreamCardsNavigationProperty")){i=D["Stack_complex"]}else{i=D["Stack_simple"]}}if(i){return i[o]}return 5}function Ae(e){var t=e.getObject();var r=q(e,t,true);var a=r.map(function(e){if(e&&e.Value&&e.Value.Path){return e.Value.Path}else if(e&&e.fn&&e.fn.Path){return e.fn.Path}});t.filter(function(e,r){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&a.indexOf(e.Value.Path)>-1){t.splice(r,1)}})}Ae.requiresIContext=true;function Ue(e,t){if(t.charAt(0)==="/"||t.indexOf("http")===0){return t}var r=e.getModel(0).getProperty("/baseUrl");if(r){return r+"/"+t}return t}Ue.requiresIContext=true;function qe(e,t){var r=q(e,t);return r.length}qe.requiresIContext=true;function _e(e,t){return Le(e,t,0)}_e.requiresIContext=true;function we(e,t){return Le(e,t,1)}we.requiresIContext=true;function Le(e,t,r){var a=q(e,t),i=a[r];if(i&&i.Value&&i.Value.Path){return i.Value.Path}return""}function Be(e,t){return G(e,t,0)}Be.requiresIContext=true;function ke(e,t){return G(e,t,1)}ke.requiresIContext=true;function He(e,t){return G(e,t,2)}He.requiresIContext=true;function je(e,t){return G(e,t,3)}je.requiresIContext=true;function Ye(e,t){return G(e,t,4)}Ye.requiresIContext=true;function Ge(e,t,r){return Y(e,t,r)}Ge.requiresIContext=true;function Xe(e,t,r){return J(e,t,r)}Xe.requiresIContext=true;function ze(e,t,r,a){var i=qe(e,t);if(i>0){return Xe(e,t,r)}else{return Ge(e,t,a)}}ze.requiresIContext=true;function Je(e,t,r){return mt(e,t,r)}Je.requiresIContext=true;function Qe(e,t){return X(e,t,0)}Qe.requiresIContext=true;function We(e,t){return X(e,t,1)}We.requiresIContext=true;function Ke(e,t){return X(e,t,2)}Ke.requiresIContext=true;function $e(e,t){return z(e,t,0)}$e.requiresIContext=true;function Ze(e,t){for(var r=0;r<t.length;r++){var i=t[r];if(i.RecordType==="com.sap.vocabularies.UI.v1.DataField"){if(i.IconUrl&&i.IconUrl.String){return i.IconUrl.String}if(i.IconUrl&&i.IconUrl.Path){return a.simplePath(e,i.IconUrl)}}}}Ze.requiresIContext=true;function et(e,t,r){var a="";var i;if(Array.isArray(t)){i=q(e,t)[r]}else{var n=Object.assign({},t);var o=Object.assign({},e);i=vt(o,n)}if(!i||!i.Value){return a}var u=e.getSetting("ovpCardProperties");var l=u&&u.getProperty("/entityType");var s=u&&u.getProperty("/metaModel");var f=s&&s.getODataProperty(l,i.Value.Path);var c=f&&f[b.ISO_CURRENCY];if(c){if(c.Path){a+=" "+re([c.Path]);a+=" "+te(c.Path,s,l)}else if(c.String){a+=" "+c.String}}return a}et.requiresIContext=true;function tt(e,t,r,a){return J(e,t,r,a)}tt.requiresIContext=true;function rt(e,t){return ue(e,t,0)}rt.requiresIContext=true;function at(e,t){return fe(e,t,0)}at.requiresIContext=true;function it(e,t){return ue(e,t,1)}it.requiresIContext=true;function nt(e,t){return ue(e,t,2)}nt.requiresIContext=true;function ot(e,t){return pe(e,t,0)}ot.requiresIContext=true;function ut(e){var t={};t.EnumMember="None";if(Number(e)===1){t.EnumMember="Negative"}else if(Number(e)===2){t.EnumMember="Critical"}else if(Number(e)===3){t.EnumMember="Positive"}return x(t,C.ColorValues)}function lt(e,t){if(t&&t.Criticality&&t.Criticality.Path){return"{parts: [{path:'"+t.Criticality.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.kpiValueCriticality'}"}else{return ve(e,t,C.ColorValues)}}lt.requiresIContext=true;function st(e,t){return Q(e,t,0)}st.requiresIContext=true;function ft(e,t){var r=q(e,t)[0];if(r&&(r.Criticality||r.CriticalityCalculation)){return true}return false}ft.requiresIContext=true;function ct(e,t){return Q(e,t,1)}ct.requiresIContext=true;function pt(e,t){return Q(e,t,2)}pt.requiresIContext=true;function vt(e,t){var r=e.getPath(0);var a=r.slice(0,r.lastIndexOf("/"));a=a.slice(0,a.lastIndexOf("/"));var i=B(a,t);t=e.getModel(0).getProperty(i);return t}function gt(e,t){if(!t){return""}return $(e,t)}gt.requiresIContext=true;function mt(e,t,r,i){var n;var o=i==undefined?r:U(e,r)[i];var u=e.getSetting("ovpCardProperties");var l=u.getProperty("/metaModel");var s=l.getODataEntityType(t.entityType);var f=s.property;if(f){for(var c=0;c<f.length;c++){if(o.Value.Path===f[c].name){n=f[c]["com.sap.vocabularies.Common.v1.SemanticObject"];if(n){return a.format(e,n)}else{return""}}}}}function ht(e,t,r){var a=r===undefined?t.Value.Path:t[r].Value.Path;var i=a.indexOf("/")!=-1?a.split("/")[0]:"";return i}ht.requiresIContext=true;function Pt(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/metaModel");var i=a.getODataEntityType(t.entityType);if(i["com.sap.vocabularies.Communication.v1.Contact"]){return true}return false}Pt.requiresIContext=true;function yt(e,t,r){if(!t){return""}var a=e.getSetting("ovpCardProperties");var i=a.getProperty("/entityType");var n=a.getProperty("/metaModel");var o=Object.assign({},t);var u=Object.assign({},e);t=vt(u,o);return K(e,t,i,n,r)}yt.requiresIContext=true;function dt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i="None",n=C.StateValues;t=vt(a,r);if(t&&t.Criticality){i=ce(e,t,n)}else{i=ve(e,t,n)}return i}dt.requiresIContext=true;function Ct(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=vt(a,r);if(t&&t.Criticality){return true}}Ct.requiresIContext=true;function bt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");t=vt(a,r);if(!t){return}var u=o.getODataProperty(n,t.Value.Path);if(t&&u&&u.type=="Edm.String"&&(t.Criticality||t.CriticalityCalculation)){return"Center"}if(u&&(u.type=="Edm.DateTime"||u.type=="Edm.DateTimeOffset")){return"Right"}}bt.requiresIContext=true;function Tt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=vt(a,r);var i="None";if(t&&t.Criticality&&t.Criticality.Path){i="{path:'"+t.Criticality.Path+"'}"}else{i=ve(e,t,C.StateValues);i=E(i)}return i}Tt.requiresIContext=true;function Dt(e,t){var r;for(var a=0;a<t.length;a++){r=t[a];if(r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1}}return 0}Dt.requiresIContext=true;function Ot(e,t){var r=q(e,t)[0];if(r&&r.Value&&r.Value.Path){var a=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);var i=e.getModel(0);var n=i.getProperty(a);var o=i.getODataProperty(n,r.Value.Path);if(o&&o[b.UOM]){return o[b.UOM].String==="%"}}return false}Ot.requiresIContext=true;function It(e){var t=e.getObject();var r=e.getModel();var a=r.getProperty("/metaModel");var i=a.getODataEntitySet(r.getProperty("/entitySet"));var n=a.getODataEntityType(i.entityType);t=n.$path+"/"+t;return a.createBindingContext(t)}function Ft(e,t){if(e==="Edm.String"){var r=t.PropertyValue.String;return r}return t.PropertyValue.String}function St(e,t){return e.filter(function(e){if(e.name===t){return e}})}function Vt(e,t,r,a){var i="";var n=[];if(a&&a.Parameters){e.parameters.forEach(function(r){a.Parameters.forEach(function(a){var i=a.PropertyName.PropertyPath.split("/");i=i[i.length-1];if(i===r){var o=Ft(e["parameterType"][r],a);o=v(t.formatValue(o,e["parameterType"][r]));n.push(i+"="+o)}})});var o=a.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var u=p.getParametersByEntitySet(t,r.name);if(u.entitySetName){var l=p.getPropertyOfEntitySet(t,u.entitySetName);var s=u.parameters.filter(function(e){return!o.includes(e)});for(var f=0;f<s.length;f++){var c=s[f].split("/");var g=c[c.length-1];var m=St(l,g);var h=false;if(m.length>0){var P=m[0];h=P.type==="Edm.String"&&P["sap:parameter"]==="optional"}if(h){n.push(g+"="+"")}}}}else{i="/"+r.name;O.error("SelectionParameters","There are no parameters to resolve");return i}try{i="/"+e.entitySetName+"("+n.join(",")+")/"+e.navPropertyName}catch(e){i="/"+r.name;O.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return i}function Nt(e,t,r,a,i,n){var l=[];var s="";var f=new o.Model(o.Model.ReferenceByModel(e));var v=f.findQueryResultByName(t.name);var g=new o.QueryResultRequest(v);var m=v.getParameterization();if(!m){s="/"+t.name;return n?l:s}if(i){var h=i.getAnalyticalParameters()}if(m){var P;g.setParameterizationRequest(new o.ParameterizationRequest(m));if(r&&r.Parameters){c(r.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){P=this.PropertyNameFrom.PropertyPath.split("/");g.getParameterizationRequest().setParameterValue(P[P.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String)}else{P=this.PropertyName.PropertyPath.split("/");g.getParameterizationRequest().setParameterValue(P[P.length-1],this.PropertyValue.String)}});var y=r.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath});var d=p.getParametersByEntitySet(e,t.name);if(d.entitySetName){var C=p.getPropertyOfEntitySet(e,d.entitySetName);var b=d.parameters.filter(function(e){return!y.includes(e)});for(var T=0;T<b.length;T++){P=b[T].split("/");var D=P[P.length-1];var I=St(C,D);var F=false;if(I.length>0){var S=I[0];F=S.type==="Edm.String"&&S["sap:parameter"]==="optional";l.push(S)}if(F){g.getParameterizationRequest().setParameterValue(D,"")}}}}else if(a&&a.length>0){c(a,function(){g.getParameterizationRequest().setParameterValue(this.path,this.value)})}else if(h&&h.length>0){var V=i&&i.getUiState({allFilters:false});var N=V?JSON.stringify(V.getSelectionVariant()):"{}";var r=new u(N);for(var x in m.getAllParameters()){for(var T=0;T<h.length;T++){if(h[T]&&h[T].name==x){var E=h[T].name;var R=r.getParameter(E);if(!R){var M=r.getSelectOption(E);R=M&&M[0]&&M[0].Low}g.getParameterizationRequest().setParameterValue(x,R)}}}}else{s="/"+t.name;O.error("SelectionParameters","There are no parameters to resolve");return n?l:s}}try{s=g.getURIToQueryResultEntitySet()}catch(e){v=g.getQueryResult();s="/"+v.getEntitySet().getQName();O.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return n?l:s}function xt(e,t,r,a,i){var n="";if(p.checkAnalyticalParameterisedEntitySet(e,t.name)){n=Nt(e,t,r,a,i)}else{var o=p.getParametersByEntitySet(e,t.name);var u=p.getPropertyOfEntitySet(e,t.name);var l={};if(o){o["parameters"].forEach(function(e){u.forEach(function(t){if(t["name"]==e){l[e]=t["type"]}})});o["parameterType"]=l;n=Vt(o,e,t,r)}else{n="/"+t.name}}return n}function Et(e,t,r){var a=e.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<a.length;i++){if(r+"."+a[i].name===t){return a[i]}}}function Rt(e,t){var r=e.filter(function(e){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"){return true}return false});var a=H(r);if(a){return a[t]}return}function Mt(e,t,r){if(!r||!r.length||r.length===0){return false}r=Rt(r,0);return mt(e,t,r)}Mt.requiresIContext=true;function At(e,t,r){if(!r||!r.length||r.length===0){return false}r=Rt(r,1);return mt(e,t,r)}At.requiresIContext=true;function Ut(e,t){var r=e.filter(function(e){if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1){return true}return false});var a=H(r);if(a){return a[t]}return}function qt(e){if(!e||!e.length||e.length===0){return false}var t=Ut(e,0);if(t){return true}return false}function _t(e,t,a,i){var n,o,u;if(a&&a.Value&&a.Value.Path){n=a.Value.Path}else if(a&&a.Description&&a.Description.Value&&a.Description.Value.Path){n=a.Description.Value.Path}if(a&&a.Description&&a.Description.Path){o=a.Description.Path}else if(a&&a.Title&&a.Title.Path){u=a.Title.Path}var l="";var s=i&&i.Parameters;var f="";var c=e.getSetting("ovpCardProperties"),p=c.getProperty("/parameters");s=s||!!p;if(s){var v=e.getSetting("dataModel");var g=xt(v,t,i,p);l+="{path: '"+g+"'"}else{l+="{path: '/"+t.name+"'"}l+=", length: 1";var m=e.getSetting("ovpCardProperties");var h=m.getProperty("/entityType");var P=r.getUnitColumn(n,h);var y=Ve(m,i);if(y.length>0){f+=", filters: "+JSON.stringify(y)}var d=[];d.push(n);if(o){d.push(o)}else if(u){d.push(u)}if(a&&a.Criticality&&a.Criticality.Path){d.push(a.Criticality.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeLowValue&&a.CriticalityCalculation.DeviationRangeLowValue.Path){d.push(a.CriticalityCalculation.DeviationRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeLowValue&&a.CriticalityCalculation.ToleranceRangeLowValue.Path){d.push(a.CriticalityCalculation.ToleranceRangeLowValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.DeviationRangeHighValue&&a.CriticalityCalculation.DeviationRangeHighValue.Path){d.push(a.CriticalityCalculation.DeviationRangeHighValue.Path)}if(a&&a.CriticalityCalculation&&a.CriticalityCalculation.ToleranceRangeHighValue&&a.CriticalityCalculation.ToleranceRangeHighValue.Path){d.push(a.CriticalityCalculation.ToleranceRangeHighValue.Path)}if(P){d.push(P)}if(a&&a.TrendCalculation&&a.TrendCalculation.ReferenceValue&&a.TrendCalculation.ReferenceValue.Path){d.push(a.TrendCalculation.ReferenceValue.Path)}var C=ye(c);var b=C?", custom: {cardId: '"+c.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}":", custom: {_requestFrom: 'ovp_internal'}";return l+", parameters:{select:'"+d.join(",")+"'"+b+"}"+f+"}"}_t.requiresIContext=true;function wt(e){if(!e||!e.Value||!e.Value.Path){return""}var t=this.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/metaModel");var i=a.getODataProperty(r,e.Value.Path);if(i[b.UOM]){var n=i[b.UOM];if(n.String=="%"){this.getModel("ovpCardProperties").oData.percentageAvailable=true}}if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits&&e.ValueFormat.NumberOfFractionalDigits.Int){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=e.ValueFormat.NumberOfFractionalDigits.Int}var o={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var u="sap.ovp.cards.AnnotationHelper.KpiValueFormatter";var l=[e.Value.Path];return re(l,u,o)}function Lt(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({minFractionDigits:t.NumberOfFractionalDigits,maxFractionDigits:t.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:r});if(t.percentageAvailable){return a.format(Number(r))+" %"}else{return a.format(Number(r))}}function Bt(e,t){if(!t||!t.Value||!t.Value.Path||!t.TrendCalculation){return""}var r=Re(t.Value);var a=Re(t.TrendCalculation.ReferenceValue);var i=Re(t.TrendCalculation.DownDifference);var n=Re(t.TrendCalculation.UpDifference);var o=he(a);var u=he(i);var l=he(n);var s={referenceValue:a,downDifference:i,upDifference:n,bIsRefValBinding:o,bIsDownDiffBinding:u,bIsUpDiffBinding:l};var f="{value:"+JSON.stringify(s)+", model: 'ovpCardProperties'}";var c="parts: ["+r;c+=o?","+a:"";c+=u?","+i:"";c+=l?","+n:"";c+=","+f;c+="]";var p="sap.ovp.cards.AnnotationHelper.formatTrendIcon";return"{"+c+", formatter: '"+p+"'}"}Bt.requiresIContext=true;function kt(){var e=arguments[arguments.length-1];var t=1;return A(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference)}function Ht(e){if(!e||!e.TrendCalculation||!e.TrendCalculation.ReferenceValue){return""}if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits&&e.ValueFormat.NumberOfFractionalDigits.Int){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=e.ValueFormat.NumberOfFractionalDigits.Int}if(e.TrendCalculation.ReferenceValue.Path){return"{parts: [{path:'"+e.Value.Path+"'}, {path:'"+e.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}else{return"{parts: [{path:'"+e.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}"}}function jt(t,r){var a,i,n,o,u=false;if(isNaN(+t)){return""}if(t==0){o=r}else{o=t}i=this.getModel("ovpCardProperties");if(i.getProperty("/iNumberOfFractionalDigits")){n=+i.getProperty("/iNumberOfFractionalDigits")}if(i.getProperty("/bPercentageAvailableForTarget")){u=true}if(r){a=r}else{if(i.getProperty("/sManifestTargetValue")){a=i.getProperty("/sManifestTargetValue")}}if(!n||n<0){n=0}else if(n>2){n=2}if(a){var l=e.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:o});if(u){return l.format(+a)+" %"}else{return l.format(+a)}}}function Yt(e){if(!e||!e.TrendCalculation||!e.TrendCalculation.ReferenceValue){return""}if(!e||!e.Value||!e.Value.Path){return""}var t=this.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/metaModel");if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits&&e.ValueFormat.NumberOfFractionalDigits.Int){t.setProperty("/iNumberOfFractionalDigits",e.ValueFormat.NumberOfFractionalDigits.Int)}if(e.TrendCalculation.ReferenceValue){if(e.TrendCalculation.ReferenceValue.String){t.setProperty("/sManifestTargetValue",e.TrendCalculation.ReferenceValue.String);return"{parts: [{path:'"+e.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}if(e.TrendCalculation.ReferenceValue.Path){var i=a.getODataProperty(r,e.TrendCalculation.ReferenceValue.Path);if(i[b.UOM]){var n=i[b.UOM];if(n.String=="%"){t.setProperty("/bPercentageAvailableForTarget",true)}}return"{parts: [{path:'"+e.Value.Path+"'},{path:'"+e.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}"}}}function Gt(t,r){var a,i,n;if(isNaN(+t)){return""}t=+t;n=this.getModel("ovpCardProperties");if(n.getProperty("/iNumberOfFractionalDigits")){a=+n.getProperty("/iNumberOfFractionalDigits")}if(r){i=+r}else{if(n.getProperty("/sManifestTargetValue")){i=+n.getProperty("/sManifestTargetValue")}}if(!a||a<0){a=0}else if(a>2){a=2}if(i){var o=(t-i)/i;var u=e.getPercentInstance({style:"short",minFractionDigits:a,maxFractionDigits:a,showScale:true});return u.format(o)}}function Xt(e){if(e&&e.GroupBy&&!h(e.GroupBy)&&e.GroupBy[0].hasOwnProperty("PropertyPath")){return true}else{return false}}function zt(e,t){var r;for(var a=0;e&&a<e.length;a++){if(e[a].value==t){r=e[a];break}}return r?r.name:null}function Jt(e,t){return zt(e,t)}function Qt(e,t){var r=zt(e,t);return r?r:l.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}function Wt(e){var t="";var r=e&&e.GroupBy;if(!r){return t}var a=this.getModel("ovpCardProperties").getProperty("/metaModel");var i=this.getModel("ovpCardProperties").getProperty("/entityType");var n;if(e.GroupBy.constructor===Array){n=e.GroupBy}else if(!e.GroupBy.Collection){return t}else{n=e.GroupBy.Collection}var o;c(n,function(){o=ar(a,i,this.PropertyPath);if(!o){return}t+=o;t+=", "});if(t[t.length-1]===" "&&t[t.length-2]===","){t=t.substring(0,t.length-2)}return t==""?"":l.getText("By",[t])}function Kt(e,t,r){var a=true;var i=r["SelectOptions"].length-1;if(t.PropertyName.PropertyPath===r["SelectOptions"][i].PropertyName.PropertyPath){a=false}t=[t];var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");var l=Ve(n,t);if(l.length==0){return""}var s;var f;s=l[0].path;f=ir(u,o,s);if(f!==s){return""}var c=u.getODataProperty(o,t[0].PropertyName.PropertyPath)["type"];var p=tr(l,c);if(a===true){return p+", "}return p}Kt.requiresIContext=true;function $t(e,t,r){var a=!(t.index===r.length-1);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/metaModel");var o=i.getProperty("/entityType");var u=n.getODataProperty(o,r[t.index].path)["type"];var l=tr([r[t.index]],u);if(a===true){return l+", "}return l}$t.requiresIContext=true;function Zt(e){return e.id}function er(e){return e.id}function tr(e,t){var r=[];for(var a=0;a<e.length;a++){r.push(rr(e[a],t))}return r.join(", ")}function rr(e,r){var a=false;var i,n=t.getInstance({style:"medium"});if(r==="Edm.DateTime"){i=n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i=n.format(new Date(e.value1),true)}else{i=e.value1}if(e.operator[0]==="N"){a=true}if(e.value2){if(r==="Edm.DateTime"){i+=" - "+n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i+=" - "+n.format(new Date(e.value1),true)}else{i+=" - "+e.value1}}if(a){i=l.getText("kpiHeader_Filter_NotOperator",[i])}return i}function ar(e,t,r){return nr(e,t,r,"com.sap.vocabularies.Common.v1.Label")}function ir(e,t,r){return nr(e,t,r,"sap:text")}function nr(e,t,r,a){var i=e.getODataProperty(t,r);if(!i){O.error("No Property Found for with Name '"+r+" For Entity-Type '"+t.name+"'");return}var n=i[a];if(n){if(a==="com.sap.vocabularies.Common.v1.Label"){return n.String}return n}return i.name}function or(e){if(!e||!e.Value||!e.Value.Path){return""}var t={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var r="sap.ovp.cards.AnnotationHelper.KpiValueFormatter";var a=[e.Value.Path];return re(a,r,t)}function ur(e,t){if(t.hasOwnProperty(e)){return true}return false}function lr(e,t){var r;if(t[e].customDateRangeImplementation){return t[e].customDateRangeImplementation}else if(t[e].filter){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:t[e].filter}};return JSON.stringify(r)}else if(t[e].selectedValues){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:[{path:"key",contains:t[e].selectedValues,exclude:t[e].exclude}]}};return JSON.stringify(r)}else if(t[e].defaultValue){r={module:"sap.ui.comp.config.condition.DateRangeType"};return JSON.stringify(r)}}function sr(e){if(e){return undefined}return"_BASIC"}function fr(e,t){if(t==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"){var r=e.substring(0,4);var a=e.substring(4);while(a.length<3){a="0"+a}var i=P.oDateFormats[t];var n={UTC:false,style:"medium"};var o=y.getDateInstance(Object.assign({format:i,calendarType:d.CalendarType.Gregorian},n));var u=o.getPattern();if(u==="PPP/YYYY"){return a+"/"+r}else if(u==="PPP.YYYY"){return a+"."+r}else{return a+r}}else{return e}}return{getFormattedFiscalData:fr,getGroupID:sr,getConditionTypeForDateProperties:lr,isDateRangeType:ur,criticalityConstants:C,TextArrangementType:T,getLabelForDataItem:F,colorPaletteForComparisonMicroChart:se,formatField:$,checkFilterPreference:ye,formatItems:de,getCardSelections:Ie,getCardSorters:Fe,getFilters:Ve,getPrimitiveValue:Ee,getAnnotationLabel:Jt,getApplicationName:Qt,removeDuplicateDataField:Ae,formatUrl:Ue,getDataPointsCount:qe,getFirstDataPointValue:_e,getFirstDataFieldName:Be,getSecondDataFieldName:ke,getRequestFields:Oe,getThirdDataFieldName:He,formatDataFieldValueOnIndex:Ge,formatDataPointValueOnIndex:Xe,formatDataPointOrField:ze,formatsemanticObjectOfDataFieldGeneric:Je,getLabelForFirstDataPoint:$e,formatImageUrl:Ze,formatUnit:et,formatObjectNumber:tt,formatFirstDataPointState:rt,formatFirstDataPointColor:at,formatSecondDataPointState:it,formatThirdDataPointState:nt,formatFirstDataPointStateForSmartField:ot,formatKPIHeaderState:lt,isFirstDataPointCriticality:st,isFirstDataPointCriticalityForTableStatus:ft,getSortedDataFields:U,getSortedDataPoints:q,formatDataFieldValueGeneric:gt,formatDataPointValue:yt,formatDataPointStateGeneric:dt,checkCriticalityGeneric:Ct,checkCriticalityGenericForTableStatus:bt,formatDataPointStateForSmartFieldGeneric:Tt,hasActions:Dt,isFirstDataPointPercentageUnit:Ot,resolveEntityTypePath:It,resolveParameterizedEntitySet:xt,getAssociationObject:Et,semanticObjectOfFirstDataField:Mt,semanticObjectOfSecondDataField:At,isFirstContactAnnotation:qt,getAggregateNumber:_t,KpiValueFormatter:Lt,kpiValueCriticality:ut,formThePathForAggregateNumber:wt,formThePathForTrendIcon:Bt,formPathForPercentageChange:Ht,TargetValueFormatter:jt,formPathForTargetValue:Yt,returnPercentageChange:Gt,isPresentationVarientPresent:Xt,listGroupBy:Wt,formTheFilterByString:Kt,formTheFilterByStringNotFromSelVar:$t,formTheIdForFilter:Zt,formTheIdForFilterNotFromSelVar:er,_criticality2state:x,_calculateCriticalityState:M,_calculateTrendDirection:A,_getPropertiesFromBindingString:Te,sortCollectionByImportance:H,checkNavTargetForContactAnno:ht,checkForContactAnnotation:Pt,getKPIHeaderAggregateNumber:or,formatColor:me,formatTrendIcon:kt,formatNumberCalculation:ae,formatCurrency:ne,formatDate:ie,getSapTextPathForUOM:te,resolveAnalyticalParameterizedEntitySet:Nt}},true);
sap.ui.predefine("sap/ovp/cards/AppSettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/base/util/merge","sap/ui/core/mvc/XMLView","sap/ui/core/Core"],function(e,t,o,i,a,s,n,l,r){"use strict";var u={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oOvpResourceBundle:r.getLibraryResourceBundle("sap.ovp"),getDialogBox:function(a){return new Promise(function(r,u){var d,g,p,c;if(!this.dialogBox){this.oSaveButton=new t({text:s&&s.getText("save"),type:"Emphasized"});var h=new t({text:s&&s.getText("cancelBtn")});this.oResetButton=new t({text:s&&s.getText("resetButton")});this.dialogBox=new e({title:s&&s.getText("settingsDialogTitle"),buttons:[this.oSaveButton,h,this.oResetButton],afterClose:function(e){this.dialogBox.destroyContent()}.bind(this)});this.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.dialogBox.setBusyIndicatorDelay(0);h.attachPress(function(e){this.dialogBox.close()}.bind(this))}if(a.getParent()){d=a.getParent().getModel("ui").getData();g=n({},d);var B=a.getModel(g.globalFilterModel),y=B.getMetaModel(),v=y.getODataEntityContainer().entitySet;g["allEntityTypes"]=[];for(var x=0;v&&x<v.length;x++){var f=v[x].entityType;g["allEntityTypes"].push({name:y.getODataEntityType(f).name})}if(g.globalFilterEntityType){g.showGlobalFilters=true}else{g.showGlobalFilters=false}if(!g.containerLayout){g.containerLayout="fixed"}c=new o(g);p=new l("appSettingsView",{viewName:"sap.ovp.cards.rta.AppSettingsDialog",type:i.XML});p.setModel(c);var w=this.oOvpResourceBundle?s.oResourceModel:null;p.setModel(w,"ovpResourceModel");this.dialogBox.addContent(p);p.loaded().then(function(e){r(this.dialogBox)}.bind(this))}}.bind(this))}};return u},true);
sap.ui.predefine("sap/ovp/cards/CommonUtils", ["sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/Device","sap/base/util/UriParameters","sap/base/util/each","sap/ui/model/json/JSONModel","sap/ovp/cards/ovpLogger"],function(e,t,a,r,n,s){"use strict";var i=new s("OVP.cards.CommonUtils");return{app:undefined,navigationHandler:undefined,supportedCardTypes:["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"],ovpConstantModel:new n({dontIncludeUOM:true,firstDataPointIndex:0,secondDataPointIndex:1,thirdDataPointIndex:2,fourthDataPointIndex:3,fifthDataPointIndex:4,sixthDataPointIndex:5,firstDataFieldIndex:0,secondDataFieldIndex:1,thirdDataFieldIndex:2,fourthDataFieldIndex:3,fifthDataFieldIndex:4,sixthDataFieldIndex:5}),deviceModel:new n(t).setDefaultBindingMode("OneWay"),checkIfCardTypeSupported:function(e){return this.supportedCardTypes.indexOf(e)!==-1},enable:function(e,t){this.app=e;this.navigationHandler=t},getApp:function(){return this.app},getNavigationHandler:function(){return this.navigationHandler},createKeyForCB:function(e,t){return e.indexOf(t)+1},createCardComponent:function(t,a,r,n,s){return e.createCardComponent(t,a,r,n,s)},_getLayer:function(){var e=a.fromURL(window.location.href);return!!e.get("sap-ui-layer")},_getLayerNamespace:function(){var e=this._getLayer();if(!e){return"customer"}return e.toLowerCase()},getUnitColumn:function(e,t,a){var r,n=t.property;var s,i;var o="Org.OData.Measures.V1.ISOCurrency";var u="Org.OData.Measures.V1.Unit";for(var p=0,c=n.length;p<c;p++){if(n[p].name!==e){continue}if(n[p].hasOwnProperty(o)){s=n[p][o].Path;i=n[p][o].String;if(s){return s}else{return a?i:""}}if(n[p].hasOwnProperty(u)){s=n[p].hasOwnProperty(u).Path;i=n[p][u].String;if(s){r=s}else{r=a?i:""}if(r&&r!="%"){return r}else{return null}}if(n[p].hasOwnProperty("sap:unit")){return n[p]["sap:unit"]}break}return null},onHeaderClicked:function(){},onContentClicked:function(e){},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){if(document.body.classList.contains("sapUiSizeCozy")===true){this._sContentDensityClass="sapUiSizeCozy"}else if(document.body.classList.contains("sapUiSizeCompact")===true){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass=""}}else if(!t.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass},_setCardpropertyDensityAttribute:function(){var e=this.getContentDensityClass();if(e==="sapUiSizeCompact"){return"compact"}else if(e==="sapUiSizeCozy"){return"cozy"}else if(!t.support.touch){return"compact"}else{return"cozy"}},getPixelPerRem:function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize);return e},showODataErrorMessages:function(e){var t=[],a,n,s="";if(e&&e.responseText){var o=e.responseText;if(o){try{n=JSON.parse(o)}catch(e){i.error("Failed parsing response as JSON: "+o)}if(n&&n.error){a=n.error}}}if(a&&a.innererror&&a.innererror.errordetails){t=a.innererror.errordetails}if(a&&a.message&&Array.isArray(t)){t.unshift({message:a.message.value,severity:"error"})}if(t&&t.length>0){var u={};r(t,function(e,t){var a=t.message;if(a.endsWith(".")){a=a.substr(0,a.length-1)}if(!u[a]){u[a]=true;s=s+a+" "}})}return s},isODataV4:function(e){return e&&e.getODataVersion&&e.getODataVersion()=="4.0"||false},isJSONData:function(e){try{if(JSON.parse(e)){return true}}catch(e){return false}},isDate:function(e){if((e["type"]==="Edm.DateTime"&&e["sap:display-format"]==="Date"||e["type"]==="Edm.String"&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"]&&e["com.sap.vocabularies.Common.v1.IsCalendarDate"].Bool==="true")&&(e["sap:filter-restriction"]==="interval"||e["sap:filter-restriction"]==="single-value"||e["_filterRestriction"]==="single-value")){return true}return false},removePrefixAndReturnLocalId:function(e){if(e.indexOf("---")>-1){return e.split("---")[1]}return e}}},true);
sap.ui.predefine("sap/ovp/cards/Filterhelper", ["sap/base/util/isEmptyObject","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/Filter","sap/ovp/cards/v4/V4AnnotationHelper"],function(e,t,n,a,r){"use strict";function i(e){var t;if(e){if(e.settings.tabs){var n=0;var a=e.settings.selectedKey;if(a&&e.settings.tabs.length>=a){n=a-1}t=e.settings.tabs[n]["selectionAnnotationPath"]}else{t=e.settings["selectionAnnotationPath"]}}return t}return{_getEntityRelevantFilters:function(e,t){var n=[];if(t.length>0&&e){var a=this._checkRelevantFiltersRecursive(e,t[0]);if(a){n.push(a)}}return n},_checkRelevantFiltersRecursive:function(e,t){if(!t._bMultiFilter){t.sPath=t.sPath.split("/").pop();var n=this._getPropertyMapping(e,t.sPath);if(n){t.sPath=n;return t}}else{var r=t.aFilters;var i,s=[];if(r){for(var u=0;u<r.length;u++){i=this._checkRelevantFiltersRecursive(e,r[u]);if(i){s.push(i)}}if(s.length>0){return new a(s,t.bAnd)}}}},_getPropertyMapping:function(e,t){if(t in e){return t}},mergeFilters:function(t,n){if(n&&n.length===0&&n&&t.length===0){return[]}var r=[];if(n&&n.length>0){var i=[];var s={};n.forEach(function(e){if(s[e.path]){s[e.path].push(new a(e))}else{s[e.path]=[new a(e)]}});Object.keys(s).forEach(function(e){i.push(new a({filters:s[e],and:false}))});r.push(new a({filters:i,and:true}))}if(!e(t[0])){r.push(t[0])}return new a({filters:r,and:true})},getSelectionVariantFilters:function(e,t,n){var a=t.getData(),s=e.filter(function(e){return e.id===a.cardId})[0],u="@"+i(s),l=n[u];return l?r.getFilters(t,l):[]},formatLiteral:function(e,t){var n=/'/g;if(e===undefined){throw new Error("Illegal value: undefined")}if(e===null){return"null"}switch(t){case"Edm.Binary":return"binary'"+e+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(e);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Duration":return"duration'"+e+"'";case"Edm.String":return"'"+e.replace(n,"''")+"'";default:throw new Error("Unsupported type: "+t)}}}},true);
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/AnalyticalCard", ["sap/ovp/cards/charts/Utils","sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/cards/Integration/Helpers/Batch"],function(e,t,a){"use strict";var r={},n=0,i=0,s={},o={},u={};function l(e,t){if(r&&!r[e]){r[e]=t}else{var a=r[e];for(var n in t){if(t.hasOwnProperty(n)&&a.hasOwnProperty(n)&&a[n]!==t[n]){a[n]=t[n]}}}}function p(){n=0;i=0;s={}}function c(e,t){var a=e&&e.getFeeds(),r;for(var n=0;n<a.length;n++){if(a[n]&&a[n].getValues()&&a[n].getValues().indexOf(t)>-1){r=n;s[r]=s[r]+1||0}}return{sFeedNo:r,count:s[r]}}function g(e,t,a){if(!o[e]){o[e]={}}o[e][t]=a}function d(e,t){if(o){if(o[e]){return o[e][t]}}}function f(e,t){u[e]=t}function v(e){return u&&u[e]}function y(t,a,r){if(t==="date"){var n=r.property.filter(function(e){return e.name===a});var i=e.getSemanticProperties(n);var s=i&&i.propertyType;if(s){var o={propertyType:s};return"{= extension.formatters.formatDateValue(${"+a+"},"+JSON.stringify(o)+")}"}return"{= format.dateTime(${"+a+"}, {pattern: 'YYYY-MM-dd'}) }"}return"{"+a+"}"}function m(e,t,a){if(a){return a}else if(t){return"{"+t+"}"}else{return e.getProperty("displayValue")||""}}function T(e,s,o){var u=e.entityType,l=e.vizFrame,g=e.cardComponentData.cardId,f=e.view,v=a.getBatchObject(e,o["configuration"]);var T=u[s],h=T.Title&&T.Title.String||"",P=l.getVizType(),V=g,b=g,M,_;if(!h&&f.byId("ovpCT")){h=f.byId("ovpCT").getText()}if(h&&!h.startsWith("{")){M=h.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");M=g+"_"+M.replace(/ /g,"_");_=h;t.seti18nValueToMap("content.chartProperties.title.text","{{"+M+"}}",true);t.inserti18nPayLoad(g,M,h,"Title","chart Title")}else if(h.includes("@i18n&gt;")){var F=h.split("@i18n&gt;");_="{{"+F[1]+"}"}else if(h.includes("@i18n>")){var F=h.split("@i18n>");_="{{"+F[1]+"}"}var C=function(e,a,r){return function(i){var s=i.getBinding("displayValue"),o=s&&s.getPath(),u=i.getBinding("value"),l=u&&u.getPath(),p=i.getName(),g=p.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var f="";if(l){f=d(a,l)}e=e+"_"+g.replace(/ /g,"_")+"_"+n;t.inserti18nPayLoad(a,e,p,"Label","chart dimension name");t.seti18nValueToMap("content.dimensions."+n+".label","{{"+e+"}}",true);var v=i.getParent().getParent(),T=c(v,p);t.seti18nValueToMap("content.feeds."+T.sFeedNo+".values."+T.count,"{{"+e+"}}",true);n=n+1;return{label:p,value:y(i.getProperty("dataType"),l,r),dataType:i.getProperty("dataType"),displayValue:m(i,o,f)}}};var D=function(e){return function(a){var r=a.getBinding("value"),n=r&&r.getPath(),s=a.getName(),o=s.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");e=e+"_"+o.replace(/ /g,"_")+"_"+i;t.inserti18nPayLoad(g,e,s,"Label","chart measure name");t.seti18nValueToMap("content.measures."+i+".label","{{"+e+"}}",true);var u=a.getParent().getParent(),l=c(u,s);t.seti18nValueToMap("content.feeds."+l.sFeedNo+".values."+l.count,"{{"+e+"}}",true);i=i+1;return{label:s,value:"{"+n+"}"}}};p();var I={chartType:P,chartProperties:r&&r[l&&l.getId()]||{},title:{text:_,visible:true,alignment:"Left"},dimensions:l.getDataset().getDimensions().map(C(b,g,u)),measures:l.getDataset().getMeasures().map(D(V)),feeds:l.getFeeds().map(function(e){return{type:e.getType(),uid:e.getUid(),values:e.getValues()}}),data:{path:"/content/d/results"},actionableArea:"Chart"};if(!v.header){I.data.path="/d/results"}return I}return{setVizPropertyMap:l,setDimensionPath:g,setUoMForSubTitle:f,getUoMForSubTitle:v,createChartContent:T}});
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/Batch", ["sap/ovp/cards/AnnotationHelper","sap/fe/navigation/SelectionVariant","sap/ui/model/Filter","sap/ovp/cards/Integration/Helpers/Filters","sap/ovp/app/FilterHelper","sap/base/security/encodeURL","sap/ovp/cards/CommonUtils","sap/ui/model/odata/ODataUtils","sap/ui/model/FilterProcessor"],function(t,e,a,r,n,i,l,o,s){"use strict";var f={contentDataUrlUpdated:false,headerDataUrlUpdated:false};function u(t,e){var a=t.split(/\?/);var r=a[1]&&a[1].replace(/^.*\?/,"").split(/&/);var n="";r&&r.forEach(function(t){if(t.indexOf(e)===-1){if(n.length===0){n+=t}else{n+="&"+t}}});return a[0]+(n!==""?"?"+n:"")}function v(t,e){if(t&&e){if(t.indexOf("?")===-1){t+="?"+e}else{t+="&"+e}}return t}function d(t,e){var a=t.split(/\?/);if(a.length>1){var r=a[1].replace(/^.*\?/,"").split(/&/);var n=r.filter(function(t){return t.includes(e)});return n.length===1?n[0]:""}return""}function p(t,e,a,r){if(r){var n=a&&a._oFilterProvider;var i=n&&n._oParameterization;var l=i&&i.getNavigationPropertyToQueryResult();return{_entitySet:{value:i&&i.getName()},_urlSuffix:{value:"/"+l}}}else{var o=e&&e.getModel(),s=o&&o.getMetaModel(),f=s&&s.getODataEntityContainer(),u=f&&f["entitySet"];var v="",d=t&&t.startsWith("/")?t.substr(1):t;u.map(function(t){if(t&&t.name&&d&&d.startsWith(t.name)){v=t.name}});var p=t.split("/").length>2?t.substring(t.lastIndexOf("/")):"";return{_entitySet:{value:v},_urlSuffix:{value:p}}}}function g(e){var a=e.cardComponentData.mainComponent;var r=e.view.getController();var n=a.getGlobalFilter();var i=r.getCardItemsBinding().getPath();var l;if(n&&n.getConsiderAnalyticalParameters()){var o=n.getAnalyticBindingPath();var s=r.getEntitySet().entityType;var f=n.getEntityType();if(o&&o.length>0){if(s===f){l=p(o,r,n,true);return{sPath:o,_entitySet:l._entitySet,_urlSuffix:l._urlSuffix}}}else{var u=r.getCardPropertiesModel().getProperty("/selectionAnnotationPath");var v=e.entityType[u];var d=t.resolveParameterizedEntitySet(r.getModel(),e.entitySet,v);l=p(d,r,n,false);return{sPath:d,_entitySet:l._entitySet,_urlSuffix:l._urlSuffix}}}l=p(i,r,n,false);return{sPath:"",_entitySet:l._entitySet,_urlSuffix:l._urlSuffix}}function c(t,e){var a=e.oMainComponent,r=a.getGlobalFilter(),n=r&&r.getAnalyticBindingPath();var i=e.getEntityType().name;var l=e.getModel();var o=l.getMetaModel();var s=o.getODataEntityContainer();var f=s.entitySet.filter(function(t){return t.entityType===s.namespace+"."+i});var u=f.length>0?f[0]:{};if(r&&r.getConsiderAnalyticalParameters()){var n=r.getAnalyticBindingPath();var v,d,p;if(n&&n.length>0){if(u.entityType===r.getEntityType()){d=t;v=t.indexOf("$");if(v>0){d=t.substring(0,v-1)}p=n;if(p.startsWith("/")){p=p.slice(1)}if(d!==p){t=t.replace(d,p)}}else{var g=a._getParametersFromEntityPath(t);var c=a._getParametersFromEntityPath(n);var h,m,y;var U={};if(g&&g.length>0){var _=a._getEntityTypeFromPath(l,t,U.context,true);for(var P=0;P<c.length;P++){h=a._getPropertyMapping(g,c[P].name,_.name,r.getEntityType(),l,r.getModel());if(h){m=h+"=.*?[,)]";y=t.match(new RegExp(m));if(y&&y.length>0){d=y[0].slice(0,-1);p=h+"="+c[P].sValue;if(d!==p){t=t.replace(d,p)}}}}}}}}return t}function h(t,e,a,r){var n=t.view.getModel("ovpCardProperties");var l=n&&n.getProperty("/bInsightRTEnabled");var o="";if(l||r){o+=_(t)}else{o+=m(t,e)}var s=d(a,"$filter");if(s.length>0){s=decodeURIComponent(s);s=s.replace("$filter=","");s=!s.startsWith("(")?"("+s+")":s}if(o.length>0&&s.length>0){o+=" and "}o+=s;if(o.length!==0){return"$filter="+i(o)}return""}function m(t,n){var i=t.cardComponentData.mainComponent;var l=i.getGlobalFilter();var o=l&&l.getUiState();var s=l&&l.determineMandatoryFilterItems();var f=n.parameters._mandatoryODataFilters.value;var u=new e(o&&o.getSelectionVariant());if(!s||s.length===0||(!f||f.length===0)){return""}else{var v=[];for(var d=0;d<f.length;d++){var p=f[d];var g=u.getSelectOption(p);var c=new a(g);var h=c.aFilters&&c.aFilters.length||0;var m=[];for(var y=0;y<h;y++){var U=c.aFilters[y];var _=r.getSingleFilterValue(U,p);if(_.length>0){m.push(_)}}if(m.length>0){var P=m.join(" or ");P="("+P+")";v.push(P)}}return v.length>0?v.join(" and "):""}}function y(t,e){t&&t.forEach(function(t){if(t&&t.getFilters()){y(t.getFilters(),e)}else if(t&&t.getPath()&&e.indexOf(t.getPath())===-1){e.push(t.getPath())}});return e}function U(t,e){if(t&&e){var a=t&&t.property.filter(function(t){return e.indexOf(t.name)>-1})||[];a.forEach(function(t){var e=t.type||"";if(!e.startsWith("Edm")){t.type="Edm."+t.type}})}}function _(t){var e=t.view;var a=e.getController();var r=a.getEntityType(),i=a.oMainComponent.getGlobalFilter(),l=i&&i.getModel(),f=a.getView().getModel("ovpCardProperties"),u=f&&f.getProperty("/entityType"),v=u&&u.name,d=a.oMainComponent.aFilters;if(r&&l&&v){var p=n.getEntityRelevantFilters(r,d,v,l);if(p.length){var g=s.groupFilters(p),c=y(p,[]),h=e&&e.getModel()&&e.getModel().oMetadata;U(r,c);var m=o.createFilterParams(g,h,r);if(m.length){m=m.replace("$filter=","");m=decodeURIComponent(m);return m}return""}}return""}function P(t,e,a,r){var n=t.view;if(!n){return{}}var i=n.getModel("ovpCardProperties");var l=i&&i.getProperty("/bInsightRTEnabled");var o=t.cardComponentData.model.sServiceUrl;var s=n.getController();var f=a?s.getKPIBinding():s.getCardItemsBinding();var p=f&&f.sRangeParams||"";if(t.cardComponentName==="List"||t.cardComponentName==="Table"){p="$skip=0&$top=13"}var m=g(t);var y=f&&f.getDownloadUrl()||"";var U;if(y){y=u(y,"sap-client");y=u(y,"_requestFrom");y=y.split(o+"/")[1];if(l||r){y=c(y,s)}U=h(t,e,y,r);if(U.length>0){y=u(y,"$filter");y=v(y,U)}var _=d(y,"$inlinecount");if(_.length===0&&(t.cardComponentName==="List"||t.cardComponentName==="Table")){var P="$inlinecount=allpages";y=v(y,P)}if(p){y=v(y,p)}}return{sPath:y,_entitySet:m._entitySet,_urlSuffix:m._urlSuffix}}function S(t,e,a){if(!f.headerDataUrlUpdated){var r=this._getRequestUrlAndEntityInfo(t,e,true,a);e["parameters"]["_headerDataUrl"]={value:r.sPath}}if(!f.contentDataUrlUpdated){var n=this._getRequestUrlAndEntityInfo(t,e,false,a)||"";e["parameters"]["_contentDataUrl"]={value:n.sPath}}f.contentDataUrlUpdated=false;f.headerDataUrlUpdated=false}function D(t,e){var a=t.cardComponentData.settings,r=t.entitySet.name,n={};if(r.endsWith("Results")){r=r.replace("Results","")}if(a.dataPointAnnotationPath||a.kpiAnnotationPath){var i=this._getRequestUrlAndEntityInfo(t,e,true)||"";e["parameters"]["_headerDataUrl"]={value:i.sPath};if(i.sPath){n.header={method:"GET",url:i.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"},retryAfter:30}}}var l=this._getRequestUrlAndEntityInfo(t,e,false)||"";e["parameters"]["_contentDataUrl"]={value:l.sPath};if(l.sPath){n.content={method:"GET",url:l.sPath,headers:{Accept:"application/json","Accept-Language":"{{parameters.LOCALE}}"}}}if(l._entitySet||l._urlSuffix){e["parameters"]["_entitySet"]=l._entitySet;e["parameters"]["_urlSuffix"]=l._urlSuffix}return n}function C(t){var e=t.configuration.parameters;var a=e._mandatoryODataParameters.value;var r=e._mandatoryODataFilters.value;var n=r.some(function(t){var a=e[t]&&e[t].value;var r=true;if(a&&l.isJSONData(a)){a=JSON.parse(a);var n=a&&a["SelectOptions"];n.forEach(function(t){if(t&&t["Ranges"]&&t["Ranges"].length>0){r=false}});return r}return false});var i=a.some(function(t){return e[t]&&!e[t].value});if(n||i){if(!e._headerDataUrl){e._headerDataUrl={value:""}}if(!e._contentDataUrl){e._contentDataUrl={value:""}}e._headerDataUrl.value="";e._contentDataUrl.value="";f.headerDataUrlUpdated=true;f.contentDataUrlUpdated=true}}function E(t){var e=t&&t.data&&t.data.request,a=t&&t.configuration.parameters._headerDataUrl,n=t&&t.configuration.parameters._contentDataUrl,i=a&&a.value,l=n&&n.value;if(e&&e.batch){var o=e.batch.header||{},s=e.batch.content||{},u=r.IsSemanticDateExistsInUrl(i),v=r.IsSemanticDateExistsInUrl(l);if(u){o.url="{= extension.formatters.formatHeaderDataUrlForSemanticDate() }";a.value="";f.headerDataUrlUpdated=true}if(v){s.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";n.value="";f.contentDataUrlUpdated=true}}else if(e&&e.url){var d=r.IsSemanticDateExistsInUrl(l);if(d){e.url="{= extension.formatters.formatContentDataUrlForSemanticDate() }";n.value="";f.contentDataUrlUpdated=true}}}return{_getQueryParam:d,_removeQueryParam:u,_getRequestUrlAndEntityInfo:P,getBatchObject:D,enhanceHeaderAndContentURL:C,updateBatchObject:S,enhanceHeaderAndContentURLForSemanticDate:E}},true);
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/CardHeader", ["sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/app/resources"],function(t,e){"use strict";function a(e,a,r,i){var n=e.data.request.batch&&e.data.request.batch.header;if(i&&i>0){var o="";if(a.valueSelectionInfo&&n||a.description){var s=t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details");var l=s.isNew?s.text:s.key;var p=s.key;e.configuration.parameters._detailsString1={value:l};t.seti18nValueToMap("configuration.parameters._detailsString1.value",p,s.isNew);o="{{parameters._detailsString1}} | "}var d=t.createKeysFromText(r,a.tabs[i-1].value,"Label","card view switch text","header.details");var u=d.isNew?d.text:d.key;var c=d.key;e.configuration.parameters._detailsString2={value:u};t.seti18nValueToMap("configuration.parameters._detailsString2.value",c,d.isNew);o=o+"{{parameters._detailsString2}}";t.seti18nValueToMap("header.details",o,false);return o}if(a.valueSelectionInfo&&n||a.description){t.createKeysFromText(r,a.valueSelectionInfo||a.description,"Label","card valueselection info","header.details")}return n&&a.valueSelectionInfo?a.valueSelectionInfo:a.description}function r(t){var e={path:[]};if(t&&t.parts){for(var a=0;a<t.parts.length;a++){if(t.parts[a].path){e.path.push(t.parts[a].path)}else if(t.parts[a].model=="ovpCardProperties"){e.ovpProp=t.parts[a].value}}return e}}function i(t){var e=t.getBindingInfo?t.getBindingInfo("text").parts:"";var a=[];a[0]=e&&e.length?e[0].path:"";a[1]=e&&e.length>1?e[1].path:"";if(a.length){return a}else{return[]}}function n(t){if(t.cardComponentData.settings.dataPointAnnotationPath||t.cardComponentData.settings.kpiAnnotationPath){return"Numeric"}else if(t.cardComponentData.settings.tabs){return t.cardComponentData.settings.tabs[0].dataPointAnnotationPath||t.cardComponentData.settings.tabs[0].kpiAnnotationPath?"Numeric":"Default"}return"Default"}function o(a){var n=a.cardComponent.getRootControl();var o=n.byId("kpiNumberValue");if(o){var s=o.getBindingInfo?o.getBindingInfo("value"):"";var l=o.getBindingInfo?o.getBindingInfo("valueColor"):"";var p=o.getBindingInfo?o.getBindingInfo("indicator"):""}var d=n.byId("ovpTargetValue");var u=n.byId("kpiNumberPercentage");var c={path:[]};if(s&&s.parts){for(var g=0;g<s.parts.length;g++){if(s.parts[g].path){c.path.push(s.parts[g].path)}else if(s.parts[g].model=="ovpCardProperties"){c.ovpProp=s.parts[g].value}}c.valueColor=l?r(l):"";c.indicator=p?r(p):""}if(d){c.target={parts:[],text:e.getText("KPI_Target_Text")};c.target.parts=c.target.parts.concat(i(d));var f=a.cardComponentData.cardId+"_"+"KPI_Target_Text";t.seti18nValueToMap("header.sideIndicators.0.title","{{"+f+"}}",true);t.inserti18nPayLoad(a.cardComponentData.cardId,f,e.getText("KPI_Target_Text"),"Label","target Label")}if(u){c.deviation={parts:[],text:e.getText("KPI_Deviation_Text")};c.deviation.parts=c.deviation.parts.concat(i(u));var v=a.cardComponentData.cardId+"_"+"KPI_Deviation_Text";if(d){t.seti18nValueToMap("header.sideIndicators.1.title","{{"+v+"}}",true)}else{t.seti18nValueToMap("header.sideIndicators.0.title","{{"+v+"}}",true)}t.inserti18nPayLoad(a.cardComponentData.cardId,v,e.getText("KPI_Deviation_Text"),"Label","deviation label")}return c}function s(t,e,a){if(t.parts.length>1&&t.parts[1]){return"{= extension.formatters."+a+"(${"+t.parts[0]+"}, ${"+t.parts[1]+"},{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}return"{= extension.formatters."+a+"(${"+t.parts[0]+"},"+null+",{NumberOfFractionalDigits:"+e.getProperty("/iNumberOfFractionalDigits")+", manifestTarget:"+e.getProperty("/sManifestTargetValue")+"})}"}function l(t,e,a){var r="";r="{= extension.formatters.kpiformatter(${"+t[0]+"},{NumberOfFractionalDigits:"+e.NumberOfFractionalDigits+", percentageAvailable:"+e.percentageAvailable+"}";r+=a?","+a+")}":")}";return r}return{generateDetailsExpression:a,getHeaderDetails:n,mainIndicatorDetails:o,targetDeviationValuePath:s,mainIndicatorNumberPath:l}},true);
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/ContentHelper", [],function(){"use strict";var t={formatDate:"sap.ovp.cards.AnnotationHelper.formatDate",formatColor:"sap.ovp.cards.AnnotationHelper.formatColor",formatCurrency:"sap.ovp.cards.AnnotationHelper.formatCurrency",formatNumberCalculation:"sap.ovp.cards.AnnotationHelper.formatNumberCalculation"};function r(t){if(t===null||t===undefined){return}if(t.indexOf("{")!==-1){return t}return"{"+t+"}"}function e(t){if(!t){return{path:"/d/results"}}return{path:"/content/d/results"}}function a(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{")&&t.endsWith("}")}return false}function n(t){if(t&&typeof t==="string"&&t.length>0){return t.startsWith("{=")&&t.endsWith("}")}return false}function o(t,r){var e;if(n(t)){return t}if(a(t)){e="$"+t}else{e="'"+t+"'"}return"{= extension.formatters.formatCriticality("+e+", '"+r+"')}"}function i(t,e,a,n){if(!t||!e){return null}try{var o=t.getBindingInfo(e);var i;if(o){if(o.parts&&o.parts.length){i=o.parts.length===1?s(o):s(o,n);return a?i:r(i)}i=t.getBindingPath(e);return a?i:r(i)}else{return t.getProperty(e)}}catch(t){return}}function f(t){var r=[];if(Array.isArray(t)){t.forEach(function(t){r.push("${"+t+"}")})}return r.join()}function s(r,e){var a=[],n,o,i,s=false,u=false;var l,m;if(r&&r.parts){r.parts.forEach(function(t){if(t.path){if(t.model==="@i18n"&&e){e[t.path]={value:"{{"+t.path+"}}"};a.push("parameters>/"+t.path+"/value");u=true}else{a.push(t.path)}}if(t.model==="ovpCardProperties"&&t.value){i=t.value.functionName;if(t.value.dateFormat){o=t.value.dateFormat;o.bUTC=t.value.bUTC||false}else{o=t.value}}else if(t.model==="@i18n"){s=true}});if(a.length===1){n=a[0]}if(r.type&&r.type.oFormat){r.formatter={name:"formatter",textFragments:[0]};o=r.type.oFormat.oFormatOptions}if(r.formatter&&r.formatter.textFragments!==true){var c=null;if(o){var p=Object.assign({},o);delete p.functionName;c=JSON.stringify(p).replaceAll('"',"'")}switch(i){case t.formatDate:if(!n){return"{= extension.formatters.formatDate("+f(a)+", "+c+")}"}return"{= extension.formatters.formatDate(${"+n+"}, "+c+")}";case t.formatColor:if(!n){return"{= extension.formatters.formatValueColor("+f(a)+","+JSON.stringify(o)+")}"}return"{= extension.formatters.formatValueColor(${"+n+"},"+JSON.stringify(o)+")}";case t.formatCurrency:r.formatter.textFragments=[0," ",1];m=JSON.stringify(r.formatter.textFragments).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+c+","+m+","+f(a)+")}";case t.formatNumberCalculation:var l=r.formatter.textFragments||[0];m=JSON.stringify(l).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+c+","+m+","+f(a)+")}";default:var m=null;if(r.formatter.textFragments){m=JSON.stringify(r.formatter.textFragments).replaceAll('"',"'");return"{= extension.formatters.formatNumber("+c+","+m+","+f(a)+")}"}}}if(s&&!u){return"{{"+n+"}}"}return n}}function u(t){var r=t?"/content/d/__count":"/d/__count";return{text:"{= ${"+r+"} === '0' ? '' : ${"+r+"} }"}}return{getHeaderStatus:u,addBrackets:r,buildValueStateExpression:o,getBindingPathOrValue:i,getData:e,isAnExpression:n}});
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/Filters", ["sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/CommonUtils","sap/fe/navigation/SelectionVariant","sap/ovp/cards/AnnotationHelper","sap/ovp/cards/Integration/Helpers/i18n"],function(e,t,a,r,n){"use strict";var i={};function o(e){if(e){if(e.hasOwnProperty("SelectionVariantID")){delete e.SelectionVariantID}else if(e.hasOwnProperty("PresentationVariantID")){delete e.PresentationVariantID}delete e.Text;delete e.ODataFilterExpression;delete e.Version;delete e.FilterContextUrl;delete e.ParameterContextUrl;return e}return e}function l(e,t,a){var r;e.forEach(function(e){r=e&&e.Ranges;t.massAddSelectOption(a,r)})}function s(e){var r,n,i;var s=0;for(var u in e){var f=new a;if(e.hasOwnProperty(u)&&e[u]){r=e[u].value;if(r&&typeof r==="string"&&t.isJSONData(r)){r=JSON.parse(r);if(typeof r!=="object"){e[u].value=r.toString();continue}n=r.SelectOptions&&r.SelectOptions[0];if(n&&n.Ranges&&n.Ranges.length===1){i=n.Ranges[0]||{};if(i.Option==="EQ"&&!i.Low){n.Ranges=[];e[u].value=JSON.stringify(r)}}}else if(r&&Array.isArray(r)){var c,p;for(s=0;s<r.length;s++){c=JSON.parse(r[s]);p=c&&c.SelectOptions||[];l(p,f,u)}f=o(f&&f.toJSONObject());e[u].value=JSON.stringify(f)}}}}function u(e,t){var a,r="";t&&t.getAllFiltersWithValues().filter(function(n){a=n.getName();if(a.includes(e)||a===e){r=t&&t.getFilterData()&&t.getFilterData()[a]||""}});return r}function f(t,a,n,i){var o=t.getMetaModel().getODataEntityType(a.entityType)||{};var l=i.view.getModel("ovpCardProperties");var s=o[l.getProperty("/selectionAnnotationPath")]||{};var u=l.getProperty("/parameters")||[];var f=i.cardComponentData.mainComponent.oGlobalFilter;var c=[];var p=e.checkAnalyticalParameterisedEntitySet(t,a.name);if(p){c=r.resolveAnalyticalParameterizedEntitySet(t,a,s,u,f,true)||[]}else{var g=e.getParametersByEntitySet(t,a.name);if(g&&g.entitySetName){c=e.getPropertyOfEntitySet(t,g.entitySetName)||[]}}return c.filter(function(e){return e&&e.name===n})}function c(e,t,a,r){if(a){var n=f(e,t,a,r)||[],i=n[0]||{},o=i["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{},l=Object.keys(o)||[];return o[l[0]]||i.defaultValue}}function p(e,t){var a=t&&t.getFilterData();return a&&(a["$Parameter."+e]||a[e])||""}function g(e,t,a){if(e){var r=t&&t.property&&t.property.filter(function(t){return t&&t.name===e})||[];if(!r.length){r=a&&a.property&&a.property.filter(function(t){return t&&t.name===e})}}var n=r&&r.length?r[0]:{};var i=n&&n["com.sap.vocabularies.Common.v1.FilterDefaultValue"]||{};var o=Object.keys(i);return n&&(o&&o.length&&i[o[0]]||n.defaultValue)}function v(e){var a;var r=[];if(e&&Array.isArray(e)){e.forEach(function(e){if(e){a=o(JSON.parse(e));r.push(JSON.stringify(a))}});return r}else if(e&&t.isJSONData(e)){a=o(JSON.parse(e));return JSON.stringify(a)}}function d(e){var t="";if(!e){return null}if(e.type){t=e.type.startsWith("Edm.")?e.type.split("Edm.")[1]:e.type}var a={Boolean:"boolean",Byte:"integer",SByte:"integer",Int16:"integer",Int32:"integer",Int64:"number",Single:"number",Double:"number",Float:"number",Decimal:"number",Guid:"string",String:"string",Date:"date",DateTime:"datetime",DateTimeOffset:"datetime",Time:"datetime",Binary:"",Stream:"",TimeOfDay:"",Duration:""};if(t&&t==="string"){return t}else if(t&&a[t]){return a[t]}else{return"string"}}function m(e){var t=[];var a=e&&e.RequestAtLeast||undefined;if(a){for(var r=0;r<a.length;r++){if(a[r].PropertyPath){t.push(a[r].PropertyPath)}}}return t}function S(e,t,a,r){var n="";if(Array.isArray(t)){t.filter(function(t){if(t&&t.includes("("+e.Low+")")){n=t}})}else if(typeof t==="string"){n=t}if(!n&&e.Low&&e.High){var i=a&&a.getFilterData()||{},o=i[r]||{};if(o.ranges){var l=o.ranges||[];var s=l.filter(function(t){return t.value1===e.Low});var u=s[0]||{};n=u.tokenText||""}}return n}function y(e,t,a,r){var n=e&&e.getUiState(),i=n&&n.getSelectionVariant(),o=i&&i.SelectOptions||[],l=false;o.filter(function(e){return e&&e["PropertyName"]===t}).map(function(n){l=true;var i=n&&n.Ranges||[];i.forEach(function(n){var i=S(n,r,e,t);a.addSelectOption(t,n.Sign,n.Option,n.Low,n.High,i)})});if(!l){a.addSelectOption(t,"I","EQ","")}}function O(e,t){var a;var r=/'/g;switch(e.Option){case"BT":a=t+" ge "+"'"+e.Low.replace(r,"''")+"'"+" and "+t+" le "+"'"+e.High.replace(r,"''")+"'";break;case"NB":a=t+" lt "+"'"+e.Low.replace(r,"''")+"'"+" or "+t+" gt "+"'"+e.High.replace(r,"''")+"'";break;case"EQ":case"GE":case"GT":case"LE":case"LT":case"NE":a=t+" "+e.Option.toLowerCase()+" "+"'"+e.Low.replace(r,"''")+"'";break;case"Contains":case"EndsWith":case"NotContains":case"NotEndsWith":case"NotStartsWith":case"StartsWith":a=e.Option.toLowerCase().replace("not","not ")+"("+t+","+"'"+e.Low.replace(r,"''")+"'"+")";break;default:throw new Error("Unsupported operator: "+e.Option)}return a}function T(e){var t=e&&e.cardComponentData,a=t&&t.appComponent,r=a&&a.ovpConfig,n=r&&r.datePropertiesSettings;if(n){return n}}function D(e,a){var r=T(e);var n=a&&a.name;var i=r&&Object.keys(r);if(i&&i.length&&n){return i&&i.indexOf(n)>-1}else if(t.isDate(a)){var o=e.cardComponentData.appComponent.getManifestObject().getRawJson();var l=o&&o["sap.ovp"];return l&&l.useDateRangeType}}function E(e){var t=T(e);var a=t&&Object.keys(t);if(a&&a.length){a.forEach(function(e){if(i[e]){var a=t[e]&&Object.keys(t[e])||[];a.forEach(function(a){if(a&&a!=="defaultValue"&&a!=="customDateRangeImplementation"){i[e][a]=t[e][a]}})}})}return i}function h(e,t){if(t){i[e.name]={"sap:filter-restriction":"single-value"}}else{i[e.name]={"sap:filter-restriction":e["sap:filter-restriction"]}}}function b(e){var t=Object.keys(i)||[];if(t.length&&e){return t.some(function(t){return e&&e.indexOf(t)>-1})}}function P(e,t){var a=T(e);if(a&&a[t]&&a[t]["defaultValue"]){return a[t]["defaultValue"]["operation"]}else{var r=e.cardComponentData.appComponent.getManifestObject().getRawJson();var n=r&&r["sap.ovp"];var i=n.filterSettings&&n.filterSettings.dateSettings&&n.filterSettings.dateSettings.fields;return i&&i[t]&&i[t]["defaultValue"]&&i[t]["defaultValue"]["operation"]}}function R(e,t){var a=e&&e.getUiState(),r=a&&a.getSelectionVariant(),n=r&&r.SelectOptions||[];var i=n.filter(function(e){return e&&e["PropertyName"]===t});i=i&&i[0]||[];var o=i.Ranges||[];return o&&o[0]}function V(e,t,a,r,n){if(e&&a){var i=e.conditionTypeInfo;return i&&i.data&&i.data["operation"]}if(!a){var o=p(t.name,r);var i=o&&o.conditionTypeInfo;var l=i&&i.data&&i.data["operation"];var s=o&&o["ranges"];var u=s&&s[0];if(l){switch(l){case"DATE":case"DATERANGE":case"SPECIFICMONTH":case"FROM":case"TO":var f=S({Low:u.Low},n,r,t.name);var c=R(r,t.name);if(c){c.Text=f;return c}break;case"LASTDAYS":case"LASTWEEKS":case"LASTMONTHS":case"LASTQUARTERS":case"LASTYEARS":case"NEXTDAYS":case"NEXTWEEKS":case"NEXTMONTHS":case"NEXTQUARTERS":case"NEXTYEARS":var g=i&&i.data&&i.data.value1;var f=S({Low:g},n,r,t.name);return{Low:l,High:g.toString(),Option:"BT",Text:f};case"TODAYFROMTO":var v=i&&i.data&&i.data.value1;var d=i&&i.data&&i.data.value2;var f=S({Low:v},n,r,t.name);return{Low:l,High:v.toString()+","+d.toString(),Option:"BT",Text:f};default:var f=S({Low:l},n,r,t.name)||"";f=f.substring(0,f.indexOf("(")-1);return{Low:l,High:null,Option:"EQ",Text:f}}}}}function w(e,t,a,r,n){var i=e.view.getModel("ovpCardProperties"),o=i&&i.getProperty("/bInsightRTEnabled"),l=e.cardComponentData.mainComponent.oGlobalFilter,s=P(e,t.name)||a;if(o){var u=V(null,t,false,l,n);if(u){r.addSelectOption(t.name,"I",u.Option,u.Low,u.High,u.Text)}}else if(s){r.addSelectOption(t.name,"I","EQ",s,null,s)}}function L(e,t){if(t&&e){var a=t.getFiltersWithValues()||[],r="",n=a.filter(function(t){r=t&&t.getName();return r===e||"$Parameter."+e===r});var i=n&&n[0]&&n[0].getControl();if(i&&i.getMetadata()&&i.getMetadata().getName()==="sap.m.DynamicDateRange"){var o=i.getIdForLabel()||"";o=o.substring(0,o.lastIndexOf("-"));if(o){var l=sap.ui.getCore().byId(o);return l&&l.getValue()}}else if(i&&i.getProperty("value")){return i.getProperty("value")}else if(i&&typeof i.getTokens==="function"){var s=i.getTokens()||[],u=s.map(function(e){return e.getText()});return{type:"filters",value:u}}}}function N(e,t,a,r,i,o){var l=L(e,t);var s=r.view.getModel("ovpCardProperties");var u=s&&s.getProperty("/bInsightRTEnabled");if(l&&typeof l==="string"&&(u||i)){if(!a[e]){a[e]={}}a[e]["label"]=l;if(i&&!u){var f="configuration.parameters."+e+".label",c=r.cardComponentData.cardId,p=c+"_configuration_parameters_"+e+"_label";n.seti18nValueToMap(f,"{{"+p+"}}",true);l=o?i:l;n.inserti18nPayLoad(c,p,l,"Label","Configuration Parameter label")}return l}else if(l&&l.value&&l.type==="filters"){return l.value}}return{enhanceVariant:v,updateRangeValue:s,getPropertyType:d,getParameterValue:u,getRequestAtLeastFields:m,getFilterDefaultValue:g,getParameterDefaultValue:c,addFiltervalues:y,getParameterActualValue:p,removeExtraInfoVariant:o,getSingleFilterValue:O,getSemanticDateConfiguration:E,IsSemanticDateRangeValid:D,getDateRangeValue:V,getLabelForConfigParams:N,getRelatedTextToRange:S,setFilterRestrictionToSemanticDateRange:h,addDateRangeValueToSV:w,getDateRangeDefaultValue:P,IsSemanticDateExistsInUrl:b}});
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/IntegrationCardPersonalization", ["sap/m/MessageToast","sap/ovp/cards/ovpLogger","sap/ovp/app/resources","sap/ui/thirdparty/jquery"],function(e,t,n,jQuery){"use strict";var r="ovp-based-integration-cards";var o=new t("sap.ovp.cards.Integration.Helpers.IntegrationCardPersonalization");var a=function(e){this.oContainer=e};a.prototype.writeManifest=function(t,r){var a=false;if(a){jQuery.ajax({type:"POST",url:"/editor/card/"+t.split(":")[0],headers:{"Content-Type":"application/json"},data:JSON.stringify(r),success:function(e){o.info("Success:",e)},error:function(e){o.error("Error:",e)}})}else{try{this.oContainer.setItemValue(t,r);this.oContainer.save().then(function(){e.show(n.getText("INT_CARD_ADD_SUCCESS"))}).catch(function(t){e.show(n.getText("INT_CARD_ADD_ERROR"))})}catch(t){e.show(n.getText("INT_CARD_ADD_ERROR"))}}};a.prototype.readManifest=function(e){var t=this.oContainer.getItemValue(e);return t};a.prototype.readAllManifests=function(){var e=this.oContainer.getItemKeys()||[];return e.map(function(e){return this.readManifest(e)}.bind(this))};a.prototype.deleteAllManifests=function(){this.oContainer.clear();this.oContainer.save().then(function(){e.show("All Cards have been removed from my insights")}).catch(function(t){e.show("Error: Cards couldn't be removed")})};return{create:function(e){return sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var t={shared:true};return e.getContainer(r,t)}).then(function(e){return new a(e)})}}},true);
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/ListContentHelper", ["sap/ovp/cards/Integration/Helpers/ContentHelper"],function(e){"use strict";function a(a){var t=a.view.byId("DataField")||a.view.byId("DataField1");var r=a.itemBindingInfo.template;if(t){return e.getBindingPathOrValue(t,"text",false,a.parameters)}else{return e.getBindingPathOrValue(r,"title",false,a.parameters)}}function t(a){var t=a.itemBindingInfo.template,r=a.cardComponentData.settings.listType,i,n;if(r==="condensed"){if(t.getMetadata().getName()==="sap.m.StandardListItem"){i=e.getBindingPathOrValue(t,"info",false,a.parameters);n=e.getBindingPathOrValue(t,"infoState",false,a.parameters)}else{var s=a.view.byId("DataPoint2");i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}}else{if(t.getMetadata().getName()==="sap.m.CustomListItem"){var s=a.view.byId("DataPoint2");if(s){i=e.getBindingPathOrValue(s,"number",false,a.parameters);n=e.getBindingPathOrValue(s,"state",false,a.parameters)}var l=a.view.byId("DataField2Link");if(l){i=e.getBindingPathOrValue(l,"text",false,a.parameters)}}else{i=e.getBindingPathOrValue(t,"number",false,a.parameters);n=e.getBindingPathOrValue(t,"numberState",false,a.parameters)}}return{value:i,state:n?e.buildValueStateExpression(n,"state"):"None"}}function r(e,a){if(Array.isArray(e)&&a){e.push({value:a})}}function i(e){for(var a=e.length-1;a>-1;a--){var t=e[a];if(!t.value){e.pop()}else{return}}}function n(a){var t=[];if(a&&a.itemBindingInfo){var n=a.itemBindingInfo.template;if(n.getMetadata().getName()==="sap.m.CustomListItem"){var s=e.getBindingPathOrValue(a.view.byId("DataField2"),"text",false,a.parameters);r(t,s);var l=e.getBindingPathOrValue(a.view.byId("DataPoint3"),"number",false,a.parameters);r(t,l)}var u=n.getAggregation("attributes");if(u&&u.length){t.push({value:e.getBindingPathOrValue(u[0],"text",false,a.parameters)})}var g=n.getAggregation("firstStatus");if(g){t.push({value:e.getBindingPathOrValue(g,"text",false,a.parameters),state:e.getBindingPathOrValue(g,"state",false,a.parameters)||"None"})}if(u&&u.length>1){t.push({value:e.getBindingPathOrValue(u[1],"text",false,a.parameters)})}var d=n.getAggregation("secondStatus");if(d){t.push({value:e.getBindingPathOrValue(d,"text",false,a.parameters),state:e.getBindingPathOrValue(d,"state",false,a.parameters)||"None"})}}i(t);return t}function s(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return e.getBindingPathOrValue(t,"description",false,a.parameters)}if(t&&t.getMetadata().getName()==="sap.m.CustomListItem"){var r=a.view.byId("contactLink");return e.getBindingPathOrValue(r,"text",false,a.parameters)}}function l(a){var t=a.itemBindingInfo.template;if(t&&t.getMetadata().getName()==="sap.m.StandardListItem"){return{src:e.getBindingPathOrValue(t,"icon",false,a.parameters)||"default",shape:"Square"}}}function u(e){var r={title:a(e)};var i=t(e);if(i.value){r.info=i}var u=s(e);if(u){r.description=u}var g=n(e);if(g.length){r.attributesLayoutType="TwoColumns";r.attributes=g}if(e.cardComponentData.settings.imageSupported){r.icon=l(e)}if(m(e)){r.chart=d(e)}return r}function g(a,t){return"{= extension.formatters.getMinMax('"+a+"', '"+t+"', $"+e.addBrackets(a)+")}"}function d(a){var t={type:"Bullet"};var r=a.view.byId("BarChartDataPoint");var i=a.view.byId("DataPoint1")||a.view.byId("BarChartStateValue")||a.view.byId("BarChartValue");var n=e.getBindingPathOrValue(r.getData()[0],"value",true,a.parameters);var s=e.getBindingPathOrValue(i,"number",false,a.parameters);var l=e.getBindingPathOrValue(r.getData()[0],"value",false,a.parameters);var u=e.getBindingPathOrValue(r.getData()[0],"color",false,a.parameters);t.value=l?"{= parseFloat($"+e.addBrackets(l)+")}":null;t.displayValue=e.isAnExpression(s)?s:t.value;t.color=u?e.buildValueStateExpression(u,"color"):"None";var d=a.view.getModel("minMaxModel").getProperty("/isPercentage");t.minValue=d?0:g(n,"min");t.maxValue=d?100:g(n,"max");return t}function m(e){return e.view.byId("BarChartDataPoint")}function f(a,t){if(!a){return{}}var r={};a.parameters=t.configuration.parameters;r.data=e.getData(t.data.request.batch);r.item=u(a);return r}return{getListContent:f}});
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/TableContentHelper", ["sap/ovp/cards/Integration/Helpers/ContentHelper","sap/ovp/cards/Integration/Helpers/i18n"],function(e,t){"use strict";function a(e,t){var a=[],n=0;var r=e.view.byId("ovpTable").getAggregation("columns");for(var i=0;i<r.length&&a.length<t;i++){if(r[i].getVisible()){a[n]=i;n++}}return a}function n(a,n,r,i,l){var s=a[n[r]];if(s){var g=e.getBindingPathOrValue(s.getHeader(),"text",false,l);var o,u;if(g&&!g.startsWith("{")){o=g.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");o=i+"_"+o.replace(/ /g,"_");u=g;t.seti18nValueToMap("content.row.columns."+r+".title","{{"+o+"}}",true);t.inserti18nPayLoad(i,o,u,"Column header","column "+r+" title value")}return{header:g,hAlign:s.getHAlign()}}return{}}function r(t,a){if(!t){return{}}var n,r,i,l,s,g={};n=t.getMetadata().getName();switch(n){case"sap.m.VBox":var o=t.getAggregation("items");if(o.length){o.forEach(function(t){r=e.getBindingPathOrValue(t,"text",false,a);if(r){g.value=r}})}break;case"sap.ui.comp.navpopover.SmartLink":g.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.m.Text":g.value=e.getBindingPathOrValue(t,"text",false,a);break;case"sap.ui.comp.smartfield.SmartField":g.value=e.getBindingPathOrValue(t,"value",false,a);i=t.getControlProposal().getObjectStatus?t.getControlProposal().getObjectStatus():"None";l=e.getBindingPathOrValue(i,"criticality",false,a);g.state=l&&l!=="None"?e.buildValueStateExpression(l,"state"):"None";break;case"sap.m.ObjectNumber":g.value=e.getBindingPathOrValue(t,"number",false,a);s=e.getBindingPathOrValue(t,"state",false,a);g.state=s&&s!=="None"?e.buildValueStateExpression(s,"state"):"None";break}return g}function i(t,i){if(!t){return{}}var l=t.cardComponentData.cardId;var s=i.configuration.parameters;var g=t.view.byId("ovpTable").getAggregation("columns");var o=t.itemBindingInfo&&t.itemBindingInfo.template.getAggregation("cells");var u=a(t,3);var c=[];for(var v=0;v<u.length;v++){var d=n(g,u,v,l,s);var f=r(o[u[v]],s);if(Object.keys(d).length||Object.keys(f).length){c.push({title:d.header,value:f.value,state:f.state,actions:f.actions,hAlign:d.hAlign})}}return{data:e.getData(i.data.request.batch),row:{columns:c}}}return{getTableContent:i}});
sap.ui.predefine("sap/ovp/cards/Integration/Helpers/i18n", ["sap/ovp/cards/ovpLogger","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";var e=new t("sap.ovp.cards.Integration.Helpers.i18n");var r={"content.chartProperties.color.title.text":{keyType:"Label",comment:"Colour text label for chart"},"content.chartProperties.size.title.text":{keyType:"Label",comment:"Size text label for chart"},"content.chartProperties.categoryAxis.title.text":{keyType:"Title",comment:"Category Axis text title for chart"},"content.chartProperties.valueAxis.title.text":{keyType:"Title",comment:"Value Axis text title for chart"},"content.chartProperties.actualValues.title.text":{keyType:"Title",comment:"Actual Values text title for chart"},"content.chartProperties.targetValues.title.text":{keyType:"Title",comment:"Target Values text title for chart"}};var i={};var a=[];function n(t,e,r){if(e.startsWith("{{")&&r){e="{{INT_CARD_"+e.split("{{")[1]}i[t]=e}function s(t,e){if(typeof t[e]==="object"){return t[e]}return{object:t,key:e}}function o(t){var e=i;var r;for(var a in e){r=a.split(".").reduce(s,t);if(!r.object[r["key"]]&&e[a]){r.object[r["key"]]=e[a]}else if(r.object[r["key"]].trim().length>0){r.object[r["key"]]=e[a]}}}function l(t,e){var r={Title:"XTIT:",Label:"XFLD:",Button:"XBUT:","Column header":"XCOL:"};var i=r[t]||"";return i+" "+e}function c(t,e,r,i,n){var s={comment:l(i,t+" "+n),key:"INT_CARD_"+e,value:r};if(s.value.trim().length>0){a.push(s)}}function u(t,e){var r=[],i=-1;while((i=t.indexOf(e,i+1))!==-1){r.push(i)}return r}function p(){if(a.length>0){var t=a.map(function(t){return t.key+t.comment});for(var r=0;r<t.length;r++){var i=u(t,t[r]),n;if(i.length>1){n=0;for(var s=1;s<i.length;s++){a.splice(i[s]-n,1);t.splice(i[s]-n,1);n++}}}jQuery.ajax({type:"POST",url:"/editor/i18n",headers:{"Content-Type":"application/json"},data:JSON.stringify(a),success:function(t){e.info("Success:",t)},error:function(t){e.error("Error:",t)}}).done(function(t){e.info("Data Saved: "+t)})}}function f(){a=[];i={}}function v(t,e){if(!t||!e){return}for(var i in r){var a=h(t,i);if(!a){continue}var n=a.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_")+"_"+i.replaceAll(".","_");var o=r[i].keyType;var l=r[i].comment;this.seti18nValueToMap(i,"{{"+s+"}}",true);this.inserti18nPayLoad(e,s,a,o,l)}}function h(t,e){return e.split(".").reduce(function(t,e){return(t||{})[e]},t)}function y(t,e,r,i){var a="INT_CARD_";var n=i.replace(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/g,"");var s=e+"_"+n.replace(/ /g,"_");this.inserti18nPayLoad(e,s,t,r,i);return"{{"+a+s+"}}"}function g(t,e,r){var i=e&&e["sap.app"];var a={title:"",subtitle:""};if(i){var n=i.title||"";var s=i["subtitle"]||i["description"]||"";var o=r.cardComponentData.cardId;if(n&&n.startsWith("{")){a.title=n}else if(n){n=t.title;a.title=y(n,o,"Title","App Title")}if(s&&s.startsWith("{")){a.subtitle=s}else if(s){s=t.subtitle||t.description;a.subtitle=y(s,o,"Title","App Subtitle")}}return a}function T(t,e,r,i,a){if(e&&!e.startsWith("{")){var n=a&&a.split(".").join("_");var s=t+"_"+n+"_"+i.replace(/ /g,"_");this.seti18nValueToMap(a,"{{"+s+"}}",true);this.inserti18nPayLoad(t,s,e,r,i);return{key:"{{"+s+"}}",text:e,isNew:true}}return{key:e,isNew:false}}function d(t,e,r){var i=t.substring(2,t.length-2),a="configuration."+i,n=h(e["sap.card"],a),s=n&&n.value;if(s&&s.startsWith("{{")){s=s.substring(2,s.length-2);n.value=r.getProperty(s)}}function m(t,e){var r=t["sap.card"]["header"],i=r.details;if(i&&i.startsWith("{{")){if(i.indexOf("parameters")>-1){var a=i.indexOf("|")>-1;if(a){var n=i.split("|")||[];n.forEach(function(r){r=r.trim();d(r,t,e)})}else{d(i,t,e)}}else{var s=i.substring(2,i.length-2);r.details=e.getProperty(s)}}}function b(t,e){var r="";if(t&&t.startsWith("{{")){r=t.substring(2,t.length-2);return e.getProperty(r)}return t}function x(t,e){if(t&&e){var r=t["sap.app"],i=t["sap.card"]["header"];r.title=b(r.title,e);r.subTitle=b(r.subTitle,e);i.title=b(i.title,e);i.subTitle=b(i.subTitle,e);m(t,e)}}return{seti18nValueToMap:n,inserti18nKeysManifest:o,inserti18nPayLoad:c,writei18nPayload:p,reseti18nProperties:f,replaceStringsWithKeys:v,getKeysForAppProperties:g,createKeysFromText:T,fnReplacei18nKeysWithText:x,getI18nValueOrDefaultString:b}});
sap.ui.predefine("sap/ovp/cards/Integration/IntegrationCard", ["sap/ui/integration/widgets/Card","sap/ovp/cards/Integration/Helpers/IntegrationCardPersonalization","sap/ovp/cards/ovpLogger","sap/ovp/cards/AnnotationHelper","sap/ui/model/FilterOperator","sap/ovp/app/NavigationHelper","sap/ovp/cards/Integration/Helpers/AnalyticalCard","sap/ovp/cards/Integration/Helpers/i18n","sap/ovp/cards/Integration/Helpers/Batch","sap/ovp/cards/Integration/Helpers/Filters","sap/ovp/app/resources","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ovp/cards/MetadataAnalyser","sap/ovp/cards/Integration/Helpers/CardHeader","sap/fe/navigation/SelectionVariant","sap/ovp/cards/CommonUtils","sap/ui/core/Core","sap/ovp/cards/Integration/Helpers/ListContentHelper","sap/ovp/cards/Integration/Helpers/ContentHelper","sap/ovp/cards/Integration/Helpers/TableContentHelper","sap/m/MessageBox","sap/insights/CardHelper","sap/m/MessageToast"],function(e,t,a,r,n,i,o,s,l,p,c,d,u,v,f,g,m,h,y,P,b,C,S,T){"use strict";var O=new a("sap.ovp.cards.Integration.IntegrationCard");var w="module:sap/insights/CardExtension";var I="";var D=function(e,t,a,r,n){var i=e&&e.getBinding(t);var o,s,l,p,c,d;var u,v,f;var g=r&&n!="sap.ovp.cards.charts.analytical"&&n!="sap.ovp.cards.charts.smart.chart";if(i){o=i.aApplicationFilters;s=i.getPath();l=i.mParameters.select;p=_(l&&l.split(","));l=p&&p.join();c=i.sSortParams;d=i.sRangeParams;u=i&&i.sCustomParams;v=u&&u.split("&");v=v&&v.filter(function(e){return e.indexOf("$expand")>-1});f=v&&v[0]}var m=d&&d.split("&")||[];var h,y;for(var P=0;P<m.length;P++){var b=m[P];if(b.indexOf("$skip")>-1){h=b.split("&")[0]}if(b.indexOf("$top")>-1){y=b.split("&")[0]}}if(g&&a&&a.length){var C=l&&l.split(",")||[];a.forEach(function(e){if(!C.includes(e)){C.push(e)}});l=C.join(",")}return{sBindingPath:s,aApplicationFilters:o,sSelect:l?"$select="+l:"",sSortParameters:c?c:"",skip:h?h:"",top:y?y:"",sExpandParam:f||""}};var x=function(e){var t=[],a=new g;if(e&&e.SelectOptions){t=e.SelectOptions}else{t=e}var i,o,s;if(t){for(var l=0;l<t.length;l++){i=t[l];o=i.PropertyName.PropertyPath;for(var p=0;p<i.Ranges.length;p++){s=i.Ranges[p];if(s.Sign.EnumMember){var c={Option:s.Option.EnumMember.split("/")[1],Low:r.getPrimitiveValue(s.Low),High:r.getPrimitiveValue(s.High),Sign:s.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(c.Low!==undefined&&c.Low!==null&&typeof c.Low!=="string"){c.Low=c.Low.toString()}if(c.High!==undefined&&c.High!==null&&typeof c.High!=="string"){c.High=c.High.toString()}if(c.Sign==="E"&&c.Option!==n.EQ){O.error("Exclude sign is supported only with EQ operator");continue}if(c.Sign==="E"&&c.Option===n.EQ){c.Option=n.NE;c.Sign="I"}if(c.Option==="CP"&&c.Sign==="I"){var d=n.Contains;var u=c.Low;if(u){var v=u.indexOf("*");var f=u.lastIndexOf("*");if(v>-1){if(v===0&&f!==u.length-1){d=n.EndsWith;u=u.substring(1,u.length)}else if(v!==0&&f===u.length-1){d=n.StartsWith;u=u.substring(0,u.length-1)}else{u=u.substring(1,u.length-1)}}}c.Option=d;c.Low=u}if(c.Option==="Contains"){c.Option="CP"}a.massAddSelectOption(o,[c])}}}}return a};var N=function(e,t,a,r,n){var i=n.view.getModel(),o=n&&n.entityType,s=o&&o.property;var l,p=[],c,d,u=o&&o.name,f=t&&t.name;var g=i.oMetadata._getEntityTypeByName(u);var m=a&&a.oMetadata._getEntityTypeByName(f);if(!g&&!m){return}else if(g&&!m){p=[g.property]}else if(g&&m){p=[g.property,m.property]}for(var h=0;h<p.length;h++){s=JSON.parse(JSON.stringify(p[h]));for(var y=0;y<s.length;y++){if(s[y].name===e){l=s[y];return l}if("P_"+s[y].name===e||s[y].name==="P_"+e||"$Parameter.P_"+s[y].name===e||s[y].name==="$Parameter.P_"+e){l=s[y];if(l&&v.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){c=r.length&&E(e,r)}return c&&c.length?c[0]:l}}}if(v.checkAnalyticalParameterisedEntitySet(i,n.entitySet.name)){d=r.length&&E(e,r);if((!d||!d.length)&&e.includes("/")){var P=e.split("/");d=P.length&&E(P[P.length-1],r)}}if(d&&d.length){return d[0]}return undefined};var M=function(e,t){var a;if(e&&e[t]){return e[t]}else if(e&&e.extensions){a=e.extensions;for(var r=0;r<a.length;r++){if(a[r].name===t){return a[r].value}}}return undefined};var E=function(e,t){return t.filter(function(t){if(t.name===e||"P_"+t.name===e||t.name==="P_"+e||"$Parameter.P_"+t.name===e||t.name==="$Parameter.P_"+e||t.name==="$Parameter."+e||"$Parameter."+t.name===e){return t}})};var V=function(e){return e["sap:filterable"]?e["sap:filterable"]!=="false":true};var A=function(e,t,a){var r=e.filter(function(e){var a=t.some(function(t){return t.name===e.name});return V(e)&&a})||[];if(a&&a.length>0){e.forEach(function(e){var t="P_"+e.name;if(a.includes(t)){r.push(e)}})}return r};var R=function(e){var t=[];if(e&&e.extensions){t=e.extensions;for(var a=0;a<t.length;a++){if(t[a].name==="parameter"&&t[a].value==="mandatory"){return e.name}else if(t[a].name==="required-in-filter"&&t[a].value==="true"){return e.name}}}};var F=function(e,t,a,r,n,i,o){var s=o.cardComponentData.mainComponent.oGlobalFilter,l=o.view.getModel("ovpCardProperties"),c=l&&l.getProperty("/bInsightRTEnabled");if(e["PropertyName"]&&e["PropertyName"]["PropertyPath"]){var d=e["PropertyName"]["PropertyPath"];if(e["PropertyValue"]&&e["PropertyValue"]["String"]){var u=N(d,undefined,undefined,a,o);d=u&&u.name?u.name:d;var v=R(u);var f=p.getParameterActualValue(d,s);if(v&&r.includes(v)){n.push(v);t[d]={value:c&&f?f:e["PropertyValue"]["String"],type:p.getPropertyType(u),description:u&&u.description?u.description:null,label:p.getLabelForConfigParams(d,s,t,o,e["PropertyValue"]["String"])};t[d]["description"]=M(u,"description")}else if(v){i.push(v);var m=new g;var h=p.getLabelForConfigParams(d,s,t,o,e["PropertyValue"]["String"])||[];var y="";if(c&&f){y=p.getRelatedTextToRange({Low:f},h,s,d);m.addSelectOption(d,"I","EQ",f,null,y)}else{y=p.getRelatedTextToRange({Low:e["PropertyValue"]["String"]},h,s,d);m.addSelectOption(d,"I","EQ",e["PropertyValue"]["String"],null,y)}t[d]={value:m.toJSONString(),type:p.getPropertyType(u),description:u&&u.description?u.description:null};t[d].value=p.enhanceVariant(t[d].value);t[d]["description"]=M(u,"description")}}}};var _=function(e){return e&&e.filter(function(t,a){return e.indexOf(t)===a})};var k=function(e){var t={filters:{}};var a=t.filters;var r=e.cardComponentData.mainComponent.oGlobalFilter;var n=r&&r.getModel();var i=r&&r.getEntityType();var o=e.view.getModel();var s=e.entityType,l,c=[];var d=[],u=[],f=[],m=[],h,y,P=[];var b=r&&r.getModel().getMetaModel().getODataEntityType(i);var C=[];var S=n&&n.getMetaModel();var T=S&&S.getODataEntityContainer();var O=T&&T.entitySet&&T.entitySet.filter(function(e){return e.entityType===i});var w=O&&O.length>0?O[0]:{};var I=[];if(n){var D=v.checkAnalyticalParameterisedEntitySet(n,w&&w.name);if(D){var E=v.getParametersByEntitySet(n,w&&w.name);if(E.entitySetName){I=E.parameters||[]}}}var V=v.getParametersByEntitySet(o,e.entitySet.name,true).parameters;var k=e.view.getModel("ovpCardProperties");var L=k&&k.getProperty("/bInsightRTEnabled");var H="";V.forEach(function(t){var i=R(t);var s=p.getParameterDefaultValue(n,w,i,e);var l=p.getParameterDefaultValue(o,e.entitySet,i,e);var d=s||l||t.defaultValue||"";var u=p.getParameterActualValue(t.name,r);H=p.getLabelForConfigParams(t.name,r,a,e,d);var v=p.IsSemanticDateRangeValid(e,t);if(v){p.setFilterRestrictionToSemanticDateRange(t,true);d=p.getDateRangeDefaultValue(e,t.name)||d;u=p.getDateRangeValue(u,t,true)||u;if(L&&H&&typeof H==="string"){H=H.substring(0,H.indexOf("(")-1)}else if(d){H=d;p.getLabelForConfigParams(t.name,r,a,e,d,true)}}if(i){f.push(t.name)}a[t.name]={value:L&&u?u:d,type:p.getPropertyType(t),description:t&&t.description,label:H};a[t.name]["description"]=M(t,"description");c.push(t.name);P.push(t.name)});I=I.filter(function(e){return!P.includes(e)});if(s&&s.property&&b&&b.property){C=A(s.property,b.property,I)}for(var j=0;j<C.length;j++){var J=C[j],$="";var Q=R(J);var U=p.getFilterDefaultValue(J.name,b,s)||J.defaultValue||"";var B=p.getParameterActualValue(J.name,r);if(P.includes(J.name)){H=p.getLabelForConfigParams(J.name,r,a,e,U);var q=p.IsSemanticDateRangeValid(e,J);if(q){p.setFilterRestrictionToSemanticDateRange(J,true);U=p.getDateRangeDefaultValue(e,J.name)||U;B=p.getDateRangeValue(B,J,true)||B;if(L&&H&&typeof H==="string"){H=H.substring(0,H.indexOf("(")-1)}else if(U){H=U;p.getLabelForConfigParams(J.name,r,a,e,U,true)}}a[J.name]={value:L&&B?B:U,type:p.getPropertyType(J),description:J&&J.description,label:H};if(Q){f.push(Q)}c.push(J.name)}else{h=new g;var W=p.getLabelForConfigParams(J.name,r,a,e,U);var B;var q=p.IsSemanticDateRangeValid(e,J);if(q){p.setFilterRestrictionToSemanticDateRange(J,false);p.addDateRangeValueToSV(e,J,U,h,W)}else{if(L){p.addFiltervalues(r,J.name,h,W)}else if(U){var K=p.getRelatedTextToRange({Low:U},W,r,J.name);h.addSelectOption(J.name,"I","EQ",U,null,K)}else{h.addSelectOption(J.name,"I","EQ",$)}}a[J.name]={value:h.toJSONString(),type:p.getPropertyType(J),description:J&&J.description};a[J.name].value=p.enhanceVariant(a[J.name].value);if(Q){m.push(Q)}d.push(J.name)}a[J.name]["description"]=M(J,"description")}var z=e.cardComponentData.settings["selectionAnnotationPath"];var X=e.entityType[z]&&JSON.parse(JSON.stringify(e.entityType[z]));var G=[],Y;for(var Z in X){if(X.hasOwnProperty(Z)){Y="";var ee=Array.isArray(X[Z])&&X[Z];if(Z==="Parameters"){for(var te=0;ee&&te<ee.length;te++){if(ee[te]["PropertyName"][["PropertyPath"]].includes("/")){var ae=ee[te]["PropertyName"][["PropertyPath"]].split("/");c.push(ae[ae.length-1])}else{c.push(ee[te]["PropertyName"][["PropertyPath"]])}Y=ee[te];F(Y,a,V,P,f,m,e)}}else if(Z==="SelectOptions"){G=X["SelectOptions"];for(var re=0;ee&&re<ee.length;re++){if(G[re].Ranges){u.push(X["SelectOptions"][re]["PropertyName"]["PropertyPath"])}d.push(X["SelectOptions"][re]["PropertyName"]["PropertyPath"]);Y=ee[re];F(Y,a,V,P,f,m,e)}y=x(X)}}}if(y){y=p.removeExtraInfoVariant(y.toJSONObject());var G=y&&y.SelectOptions||[];G.forEach(function(t){var i=t&&t.PropertyName;var o=p.getLabelForConfigParams(i,r,a,e)||[];var s=t&&t.Ranges||[];s.forEach(function(e){var t=p.getRelatedTextToRange(e,o,r,i);if(t){e.Text=t}});var c={Parameters:[],SelectOptions:[t]};var d=N(i,b,n,V,e);if(d){i=d.name}a[i]={value:JSON.stringify(c),type:p.getPropertyType(d),description:d&&d.description};a[i]["description"]=M(l,"description");var u=R(d);if(u&&P.includes(u)){f.push(u)}else if(u){m.push(u)}})}var ne=_(d);var ie=_(c);var oe=_(f);var se=_(m);p.updateRangeValue(a);a["_relevantODataFilters"]={value:ne};a["_relevantODataParameters"]={value:ie};a["_mandatoryODataParameters"]={value:oe};a["_mandatoryODataFilters"]={value:se};return t};var L=function(e,t,a){var r="";if(t){for(var n=0;n<e.length;n++){r=r+"${"+e[n]+"},"}}if(a){if(t){return"{= extension.formatters.formatValueColor("+r+JSON.stringify(t)+")}"}else if(e.length){return"{= extension.formatters.kpiValueCriticality(${"+e[0]+"})}"}}else{return"{= extension.formatters.formatTrendIcon("+r+JSON.stringify(t)+")}"}};var H=function(e,t,a){var r=e.view.getModel("ovpCardProperties");var n=e.entityType[r.getProperty("/presentationAnnotationPath")];var i=p.getRequestAtLeastFields(n);var o=r.getProperty("/addODataSelect");var s=r.getProperty("/template");if(e){var l,c="";switch(e.cardComponentName){case"Analytical":var d=e.vizFrame;l=d&&d.getParent();c="data";break;case"List":l=e.view.byId("ovpList");c="items";break;case"Table":l=e.view.byId("ovpTable");c="items";break}var u=D(l,c,i,o,s);a["_contentSkipQuery"]={value:u.skip};a["_contentTopQuery"]={value:u.top};a["_contentSortQuery"]={value:u.sSortParameters};a["_contentSelectQuery"]={value:u.sSelect};a["_contentExpandQuery"]={value:u.sExpandParam}}if(t==="Numeric"){var v=e.view.byId("kpiHBoxNumeric");var f=D(v,"items",i,o,s);a["_headerSkipQuery"]={value:f.skip};a["_headerTopQuery"]={value:f.top};a["_headerSortQuery"]={value:f.sSortParameters};a["_headerSelectQuery"]={value:f.sSelect};a["_headerExpandQuery"]={value:f.sExpandParam}}};var j=function(e,t){var a=e.cardComponentData.settings;var r=e.view;var n=r&&r.getController();var o=n._getEntityNavigationParameters().sNavSelectionVariant;o=o?JSON.parse(o):"";var s=o&&o.SelectOptions;var l=a.requireAppAuthorization;var p={},c={},d={},u={};if(l){p=i.getNavigationIntentFromAuthString(l);d=p.parameters}var v=Object.keys(d);if(v.length>0){for(var f=0;f<v.length;f++){if(!Array.isArray(d[v[f]])){c[v[f]]={defaultValue:{value:d[v[f]]}}}}}if(s&&s.length){s.forEach(function(e){var a=e["PropertyName"];var r=t.filters._relevantODataFilters.value.includes(a),n=t.filters._relevantODataParameters.value.includes(e["PropertyName"]);var i;if(e&&a&&!c[a]&&e.Ranges.length&&e.Ranges[0].Option==="EQ"&&!(r||n)){i=e.Ranges[0].Low;if(i!==undefined||i!==null){try{i=JSON.parse(e.Ranges[0].Low)}catch(e){}if(!Array.isArray(i)){c[a]=i}}}})}u={inbounds:{intent:{signature:{additionalParameters:"allowed"}}}};U(u.inbounds.intent,p.semanticObject,"semanticObject");U(u.inbounds.intent,p.action,"action");U(u.inbounds.intent.signature,c&&Object.keys(c).length?c:null,"parameters");return u};var J=function(e,t){var a={header:{enabled:false,actions:[]},content:{enabled:false,actions:[]}};var r=false,n=false;var o=e.view;var s=o.getController();var l={};if(e.cardComponentName==="Analytical"){n=!s.checkHeaderNavForChart()}r=i.bCheckNavigationForCard(s);if(!r){return a}else{if(e.cardComponentName==="List"||e.cardComponentName==="Table"){n=true}}l=i.getNavigationParameters(s,e);if(l===undefined){return a}var p={parameters:{ibnTarget:{},ibnParams:{}}};var c={type:"Navigation"};var d={type:"Navigation"};if(l&&l.type==="url"){p={type:"Navigation",parameters:{target:"_self"}};U(p.parameters,l.url,"url")}else{if(l.semanticObject||l.action||l.staticParams){p.parameters.ibnTarget={semanticObject:l.semanticObject,action:l.action};if(!t.configuration.parameters.state){t.configuration.parameters.state={value:""}}var u={};if(l.staticParams.navSelectionVariant){u.selectionVariant=l.staticParams.navSelectionVariant}if(l.staticParams.sNavPresentationVariant){u.presentationVariant=l.staticParams.sNavPresentationVariant}if(l.staticParams.sensitiveProperties){var v=l.staticParams.sensitiveProperties;var f={};v&&v.forEach(function(e){f[e]=e});u.sensitiveProps=f}p.parameters.ibnParams=u;var g=l.staticParams.staticPropertyMap;var m=g&&Object.keys(g);for(var h=0;h<m.length;h++){if(m[h]&&g[m[h]]){p.parameters.ibnParams[m[h]]=g[m[h]]}}}}a.content.enabled=true;a.content.actions.push(d);if(n){a.header.enabled=true;a.header.actions.push(c)}if(e.cardComponentName==="Analytical"){U(c,"{= extension.formatters.getNavigationContext(${parameters>/state/value})}","parameters");U(d,"{= extension.formatters.getNavigationContext(${parameters>/state/value}, ${})}","parameters");t.configuration.parameters.state.value=JSON.stringify(p)}else{U(c,"{= extension.formatters.getNavigationContext(${parameters>/headerState/value})}","parameters");t.configuration.parameters.headerState={value:""};t.configuration.parameters.headerState.value=JSON.stringify(p);U(d,"{= extension.formatters.getNavigationContext(${parameters>/lineItemState/value}, ${})}","parameters");t.configuration.parameters.lineItemState={value:""};if(l["lineItemSemanticObject"]&&l["lineItemAction"]){p.parameters.ibnTarget["semanticObject"]=l["lineItemSemanticObject"];p.parameters.ibnTarget["action"]=l["lineItemAction"]}t.configuration.parameters.lineItemState.value=JSON.stringify(p)}return a};var $=function(e,t){if(!e||!t){return}var a=e.getMetaModel();var r=a&&a.getODataEntityContainer();var n=r&&r.entitySet;if(!n||!Array.isArray(n)){return}var i=n.length;for(var o=0;o<i;o++){if(n[o].entityType===t){return n[o].name}}};var Q=function(e,t,a){if(e.startsWith("/sap/opu/odata")&&!e.endsWith(".xml")){return{uri:e,type:"ODataAnnotation"}}else if((!e.startsWith("/sap/opu/odata")||e.startsWith("/sap/opu/odata"))&&e.endsWith(".xml")){if(t&&a["sap.platform.abap"]){var r=a["sap.platform.abap"].uri;if(e.indexOf("./")===0){e=e.replace("./","")}else if(e.indexOf("/")===0){e=e.replace("/","")}else if(e.indexOf("../")===0){e=e.replace("../","")}e=r+"/"+e}return{uri:e,type:"XML"}}};var U=function(e,t,a){if(e&&t&&a){if(a==="unitOfMeasurement"){e["unitOfMeasurement"]="{"+t+"}"}else if(Array.isArray(t)&&t.length){e[a]=t}else if(!Array.isArray(t)){e[a]=t}}};var B=function(e,t){var a=e.cardComponentData.model.sServiceUrl;var r={};var n=l.getBatchObject(e,t["configuration"]);r["request"]={url:"{{destinations.service}}"+a+"/$batch",method:"POST",headers:{"X-CSRF-Token":"{{csrfTokens.token1}}"},batch:n};if(r.request.batch.header){r.request.batch.header.url="{{parameters._headerDataUrl}}"}r.request.batch.content.url="{{parameters._contentDataUrl}}";if(!n.header){var i=r["request"].batch.content;i.headers["X-CSRF-Token"]="{{csrfTokens.token1}}";i.url="{{destinations.service}}"+a+"/"+i.url;r["request"]=i}return r};var q=function(e){var t=e.cardComponentData.model.sServiceUrl;var a={};a["parameters"]=k(e)["filters"];a["destinations"]={service:{name:"(default)",defaultUrl:"/"}};a["csrfTokens"]={token1:{data:{request:{url:"{{destinations.service}}"+t,method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}}}}};return a};var W=function(e,t,a){var r=f.getHeaderDetails(e),n=e.cardComponentData.cardId,i=e.cardComponentData.appComponent.getManifestObject().getRawJson(),l=i["sap.ovp"]["cards"][n].settings,p=e.cardComponentData.settings,c=p&&p.selectedKey,d;H(e,r,t["configuration"]["parameters"]);var u=t.extension&&r==="Numeric"?f.mainIndicatorDetails(e):"";var v=u&&u.path&&u.path.length?f.mainIndicatorNumberPath(u.path,u.ovpProp):"";s.createKeysFromText(n,l.title,"Title","card Title","header.title");s.createKeysFromText(n,l.subTitle,"Title","card subTitle","header.subTitle");var g=u&&u.valueColor?L(u.valueColor.path,u.valueColor.ovpProp,true):null;var m=u&&u.indicator?L(u.indicator.path,u.indicator.ovpProp,false):null;var h=u&&u.target?u.target:null;var y=u&&u.deviation?u.deviation:null;var b="",C,S="",T,O=[],w={},I={};if(h&&h.parts.length){b=f.targetDeviationValuePath(h,e.view.getModel("ovpCardProperties"),"targetValueFormatter");C=e.view.getModel("ovpCardProperties").getProperty("/bPercentageAvailableForTarget")?"%":null;if(b){U(I,u.target.text,"title");U(I,b,"number");U(I,C,"unit");O.push(I)}}if(u&&u.ovpProp){T=f.mainIndicatorNumberPath(u.path,u.ovpProp,true)}if(y&&y.parts.length){S=f.targetDeviationValuePath(y,e.view.getModel("ovpCardProperties"),"returnPercentageChange");I={};if(S){U(I,u.deviation.text,"title");U(I,S,"number");O.push(I)}}var D=o.getUoMForSubTitle(n);if(r!=="Default"){w={type:r,title:l.title,subTitle:l.subTitle,details:f.generateDetailsExpression(t,l,n,c)};U(w,D,"unitOfMeasurement");U(w,O,"sideIndicators");if(v){w["mainIndicator"]={};U(w.mainIndicator,v,"number");U(w.mainIndicator,g,"state");U(w.mainIndicator,m,"trend");U(w.mainIndicator,T,"unit")}d=w}else{d={type:r,title:l.title,subTitle:l.subTitle,details:f.generateDetailsExpression(t,l,n,c)}}if(a){d.data={path:"/header/d/results/0"}}if(d.details){d.type="Numeric"}if(t["type"]==="List"||t["type"]==="Table"){d.status=P.getHeaderStatus(a)}return d};var K=function(e,t){var a=e.cardComponentData.settings;var r;switch(t["type"]){case"Analytical":r=o.createChartContent(e,a.chartAnnotationPath,t);r.chartProperties["title"]=r.title;delete r.title;break;case"List":r=y.getListContent(e,t);break;case"Table":r=b.getTableContent(e,t);break;default:r={};break}return r};var z=function(e){var t={},a=e.cardComponentData.cardId;t["extension"]=w;t["type"]=e.cardComponentName;t["configuration"]=q(e);t["data"]=B(e,t);t["header"]=W(e,t,t["data"].request.batch);t["content"]=K(e,t);var r=p.getSemanticDateConfiguration(e)||{};if(Object.keys(r).length){t["configuration"]["parameters"]["_semanticDateRangeSetting"]={value:JSON.stringify(r)}}s.replaceStringsWithKeys(t,a);var n=e.view.getModel("ovpCardProperties");var i=n&&n.getProperty("/bInsightDTEnabled");if(i){l.updateBatchObject(e,t["configuration"],true)}return t};var X=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,r=e.cardComponentData.settings,n=e.cardComponentData.cardId,i=e.cardComponentData.appComponent.getManifestObject().getRawJson(),o=i["sap.app"].i18n&&i["sap.app"].i18n.bundleUrl||i["sap.app"].i18n,l=i["sap.platform.abap"]&&i["sap.platform.abap"].uri,p=r&&r.selectedKey,c=e.view.getModel("ovpCardProperties"),d=c&&c.getProperty("/bInsightRTEnabled");var u=i["sap.fiori"]&&i["sap.fiori"].registrationIds&&i["sap.fiori"].registrationIds[0]||a,v=p?u+".cards."+n+".tab_"+p:u+".cards."+n;var f=p?"../../../":"../../";I=f+o;if(l){if(l.startsWith("/")){l=l.substring(1)}o=l+"/"+o}if(d){v="user."+v+"."+Date.now()}var g;if(d){g={title:t&&t.title||"",subtitle:t&&(t.subtitle||t.description)||""}}else{g=s.getKeysForAppProperties(t,i,e)}var m=g&&g.title,h=g&&g.subtitle,y=k(e),P={id:v,type:"card",embeddedBy:f,i18n:f+o,tags:{keywords:["Analytical","Card","Line","Sample"]},crossNavigation:j(e,y),dataSources:{}};if(m){P.title=m}if(h){P.subTitle=h}var b=e.cardComponentData.appComponent.getManifest()["sap.ovp"];var C=b.globalFilterModel;var S=e.cardComponentData.appComponent.getManifest()["sap.ui5"].models[C].dataSource;var T=t.dataSources;var O=T[S];var w={},D=[],x="",N;if(O&&O.settings){var M=O.settings.annotations,E;M.length&&M.forEach(function(e){for(var t in T){E=T[e].uri;if(t===e&&E){D.push(t);w[t]=Q(E,d,i);break}}});if(O&&O.uri){N=Q(O.uri,d,i)}x=O.settings&&O.settings["odataVersion"]}P.dataSources=w;P.dataSources["filterService"]={uri:O&&O.uri,settings:{annotations:D,odataVersion:x?x:"2.0"},type:N&&N.type};return P};var G=function(e){var t=e.cardComponentData.appComponent.getManifest()["sap.app"],a=t.id,r=e.cardComponentData.appComponent.getManifest()["sap.ovp"],n=e.view.getModel("ovpCardProperties"),i=n&&n.getProperty("/bInsightRTEnabled"),o="",s=e.cardComponentData.mainComponent.oGlobalFilter,l=s&&s.getEntityType(),p=e.cardComponentData.mainComponent.getOwnerComponent(),c=p.oOvpConfig.sapUICoreVersionInfo;if(!r.globalFilterEntitySet){o=$(s&&s.getModel(),l)}return{templateName:"OVP",parentAppId:a,filterEntitySet:r.globalFilterEntitySet?r.globalFilterEntitySet:o,cardType:i?"RT":"DT",versions:{ui5:c.version+"-"+c.buildTimestamp}}};var Y=function(e){var t={};t["sap.card"]=z(e);t["sap.app"]=X(e);t["sap.insights"]=G(e);var a=J(e,t["sap.card"]);if(a.header.enabled){t["sap.card"].header.actions=a.header.actions}if(a.content.enabled){switch(e.cardComponentName){case"Analytical":t["sap.card"].content.actions=a.content.actions;break;case"List":t["sap.card"].content.item.actions=a.content.actions;break;case"Table":t["sap.card"].content.row.actions=a.content.actions;break}}return t};var Z=function(e,t,a){var r=e["sap.card"]["header"][a];if(r&&r.startsWith("{{")){var n=r.split("{{")[1].split("}}")[0];var i=t.view.getModel("@i18n")?t.view.getModel("@i18n"):t.view.getModel("i18n");r=i?i.getProperty(n):undefined}return r?r:""};var ee=function(e,t,a,r){r.valueState=t;r.valueStateText=a;e.setValueState(r.valueState);e.setValueStateText(r.valueStateText)};var te={createManifestFor:Y,saveCardManifest:function(e,a){t.create().then(function(t){if(!a){var r=e["sap.app"].id;t.writeManifest(r,e)}})},downloadCardManifest:function(e){},createCard:function(t){var a=Y(t),r=window.location.origin,n=r+"/resources",i=new e({height:"533px",width:"314px",manifest:a,baseUrl:n});return i},UpdateManifestDeltaChanges:function(e,t,a,r){var n={_version:"1.1.0",contentDensities:{compact:true,cozy:true},dependencies:{libs:{"sap.insights":{lazy:false}}}};e["sap.ui5"]=n;if(e["sap.app"]["i18n"]!==I){e["sap.app"]["i18n"]=I}l.enhanceHeaderAndContentURLForSemanticDate(e["sap.card"]);l.enhanceHeaderAndContentURL(e["sap.card"]);var i=t.view.getModel("ovpCardProperties");var o=i&&i.getProperty("/bInsightRTEnabled");var p=i&&i.getProperty("/bInsightDTEnabled");if(p){var c=Z(e,t,"title");var d=Z(e,t,"subTitle");var u=h.byId(a+"--titleTextInput");if(u&&u.getValue()){var v=h.byId(a+"--subTitleTextInput");var f=t.cardComponentData.cardId;if(this.titleChanged&&u.getValue()!==c){s.createKeysFromText(f,u.getValue(),"Title","card Title","header.title");this.titleChanged=false}var g=v.getValue();var m=v&&g&&this.subTitleChanged&&g!==d;if(m){s.createKeysFromText(f,g,"Title","card subTitle","header.subTitle");this.subTitleChanged=false}else if(v&&!g){this.subTitleChanged=false;delete e["sap.card"].header.subTitle}}s.inserti18nKeysManifest(e["sap.card"]);s.writei18nPayload();l.updateBatchObject(t,e["sap.card"]["configuration"],true);if(r==="Create"){this.saveCardManifest(e,o)}else if(r==="Download"){this.downloadCardManifest(e)}s.reseti18nProperties()}else if(o){var y=t.view.getModel("@i18n");if(e["sap.card"].type==="Analytical"){e["sap.card"]["content"].chartProperties.title.text=s.getI18nValueOrDefaultString(e["sap.card"]["content"].chartProperties.title.text,y)}else if(e["sap.card"].type==="Table"){var P=e["sap.card"].content.row.columns;if(Array.isArray(P)&&P.length){P.forEach(function(e,t){P[t].title=s.getI18nValueOrDefaultString(e.title,y)})}}s.fnReplacei18nKeysWithText(e,y)}},checkIfActionExistsForCard:function(e,t){var a=e["sap.card"].content.actions||[],r=e["sap.card"].header.actions||[],n=e["sap.card"].content.item&&e["sap.card"].content.item.actions||[],i=e["sap.card"].content.row&&e["sap.card"].content.row.actions||[],o=a.length>0||r.length>0||n.length>0||i.length>0;if(!o){t.close();t.destroy();C.error(c.getText("INT_Preview_Action_ValidationText"))}return o},showCard:function(e){var t=e.view.getModel("ovpCardProperties"),a=t&&t.getProperty("/bInsightRTEnabled"),r=t&&t.getProperty("/bInsightDTEnabled"),n=this.createCard(e),i=n.getManifest();if(a){this.UpdateManifestDeltaChanges(i,e);return S.getServiceAsync("UIService").then(function(e){return e.showCardPreview(i).then(function(){return Promise.resolve(i)})}).catch(function(e){T.show(e.message)})}else if(r){return new Promise(function(t,a){var r=c.oResourceModel,o=Z(i,e,"title"),l=Z(i,e,"subTitle"),p={draggable:true,cardTitle:o,cardSubTitle:l,valueState:o?"None":"Error",valueStateText:o?"":c.getText("INT_Preview_Title_ValueStateText")},v=new u({dialogSettings:p}),f=m.getApp().getOwnerComponent(),g=f.createId("integrationCardPreview");this.handleCancel=function(){this.previewDialogPromise.then(function(e){e.close();s.reseti18nProperties();e.destroy();this.titleChanged=false;this.subTitleChanged=false}.bind(this))};this.handleTitleLiveChange=function(e){var t=e.getSource();var a=t.getValue();this.previewDialogPromise.then(function(){if(a&&n.getCardHeader().getTitle()!==a){ee(t,"None","",p);n.getCardHeader().setTitle(a);this.titleChanged=true}else if(!a){this.titleChanged=true;ee(t,"Error",c.getText("INT_Preview_Title_ValueStateText"),p)}else{ee(t,"None","",p)}}.bind(this))};this.handleSubTitleLiveChange=function(e){var t=e.getSource();var a=t.getValue();this.previewDialogPromise.then(function(){if(n.getCardHeader().getSubtitle()!==a){n.getCardHeader().setSubtitle(a);this.subTitleChanged=true}}.bind(this))};this.confirmActionHandler=function(){this.previewDialogPromise.then(function(a){if(!this.checkIfActionExistsForCard(i,a)){return}this.UpdateManifestDeltaChanges(i,e,g,"Create");a.close();a.destroy();t(i)}.bind(this))};this.downloadCardManifestHandler=function(){this.previewDialogPromise.then(function(a){if(!this.checkIfActionExistsForCard(i,a)){return}this.UpdateManifestDeltaChanges(i,e,g,"Download");a.close();a.destroy();t(i)}.bind(this))};this.previewDialogPromise=d.load({id:g,type:"XML",name:"sap.ovp.cards.Integration.Preview",controller:this}).then(function(t){t.setModel(v);t.setModel(e.view.getModel("i18n"),"i18n");t.setModel(r,"ovpResourceModel");var a=h.byId(g+"--subFlexBoxNew");a.addItem(n);this.titleChanged=false;this.subTitleChanged=false;if(e.cardComponentName!=="Analytical"){h.byId(g+"--ovpIntPreviewOverflowLayer").setVisible(true)}t.open();return t}.bind(this)).catch(function(e){O.error("Integration card preview fragment failed to load, "+e)})}.bind(this))}}};return te},true);
sap.ui.predefine("sap/ovp/cards/MetadataAnalyser", [],function(){"use strict";return{getPropertyOfEntitySet:function(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);var n=a.getODataEntityType(r.entityType);return n.property?Array.from(n.property):[]},getParametersByEntitySet:function(e,t,a){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var r=e.getMetaModel();var n={entitySetName:null,parameters:[],navPropertyName:null};var i=r.getODataEntitySet(t);var o=r.getODataEntityType(i.entityType);var y=o.navigationProperty;if(!y){return n}y.filter(function(e){var t=r.getODataAssociationEnd(o,e.name);var y=r.getODataEntityType(t.type);if(y["sap:semantics"]==="parameters"&&y.key){n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet;for(var p=0;p<y.key.propertyRef.length;p++){if(a){var s=y.property;for(var m=0;m<s.length;m++){if(s[m].name===y.key.propertyRef[p].name){n.parameters.push(s[m]);n.entitySetName=r.getODataAssociationSetEnd(o,e.name).entitySet}}}else{n.parameters.push(y.key.propertyRef[p].name)}}var g=y.navigationProperty;var f=g.some(function(e){var t=r.getODataAssociationEnd(y,e.name).type;t===i.entityType?n.navPropertyName=e.name:Function.prototype();return n.navPropertyName});return f&&n.navPropertyName&&n.entitySetName}return false});return n},checkAnalyticalParameterisedEntitySet:function(e,t){if(!e||!e.getMetaModel){throw new Error("OData Model needs to be passed as an argument")}var a=e.getMetaModel();var r=a.getODataEntitySet(t);if(r&&r.entityType){var n=a.getODataEntityType(r.entityType);if(n["sap:semantics"]&&n["sap:semantics"]==="aggregate"){return true}}return false}}});
sap.ui.predefine("sap/ovp/cards/OVPCardAsAPIUtils", ["sap/ovp/cards/ovpLogger","sap/ui/core/Component"],function(t,e){"use strict";var a=new t("OVP.cards.OVPCardsAsAPIUtils");var n=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.charts.smart.chart","sap.ovp.cards.v4.charts.bubble","sap.ovp.cards.v4.charts.donut","sap.ovp.cards.v4.charts.line","sap.ovp.cards.error"];function s(){return n}function i(t,e,n){var s={};s.message=t;if(n){s._oError=n;s.getActualError=function(){return s._oError}}a.error(s.message);e(s)}function r(t){var e=false;var a=t.getOwnerComponent();if(!!a){var n=a.getComponentData();if(!!n&&n.ovpCardsAsApi){e=true}}return e}function o(t,e){var a=e.manifest;var n;for(var s in a.cards){n=s}var i=a.cards[n];if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.settings.chartAnnotationPath=t.chartAnnotationPath;i.settings.navigation=t.navigation}if(t.entitySet){i.settings.entitySet=t.entitySet}i.settings.annotationPath=t.annotationPath;i.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;i.settings.presentationAnnotationPath=t.presentationAnnotationPath;i.settings.selectionAnnotationPath=t.selectionAnnotationPath;i.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;i.settings.kpiAnnotationPath=t.kpiAnnotationPath;i.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;i.settings.identificationAnnotationPath=t.identificationAnnotationPath;i.settings.headerAnnotationPath=t.headerAnnotationPath;i.settings.selectedKey=t.selectedKey;if(i){a.cards[n]=i;d.createCardComponent(e.parentView,a,e.containerId,e.selectionVariant)}}function l(t){var e=true;if(t.template==="sap.ovp.cards.error"||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.staticContent){e=false}return e}function p(t,e){var a=[],n=[],s,i;var r=e.getSelectOptionsPropertyNames();for(s=0;s<r.length;s++){var o=e.getSelectOption(r[s]);if(o&&o.length>0){for(i=0;i<o.length;i++){if(o[i]){var l={path:r[s],operator:o[i].Option,value1:o[i].Low,sign:o[i].Sign};if(o[i].High){l.value2=o[i].High}a.push(l)}}}}var p=e.getParameterNames();for(s=0;s<p.length;s++){var c={path:p[s],value:e.getParameter(p[s])};n.push(c)}t.settings.filters=a;t.settings.parameters=n;return t}function c(t,a,s,r,o){return new Promise(function(c,d){var v,f,h="";if(!!a){for(var u in a.cards){if(a.cards.hasOwnProperty(u)){v=a.cards[u];f=u}}if(!!v&&!!f){if(!!v.template&&!!v.settings&&(!!v.model||!l(v))){if(n.indexOf(v.template)!==-1){if(!!s&&typeof s==="string"){if(!!t){var g=!v.model?undefined:t.getModel(v.model);var m;if(!l(v)){m=Promise.resolve()}else{if(g&&g.getODataVersion&&g.getODataVersion()=="4.0"){m=g.getMetaModel().requestObject("/"+v.settings.entitySet)}else{m=g.getMetaModel().loaded()}}m.then(function(){var n=false;if(r){v=p(v,r);n=true}v.settings.ignoreSelectionVariant=n;var l={name:v.template,componentData:{model:g,ovpCardsAsApi:true,parentView:t,manifest:a,containerId:s,selectionVariant:r,fnCheckNavigation:o,showDateInRelativeFormat:a.showDateInRelativeFormat,disableTableCardFlexibility:a.disableTableCardFlexibility,template:v.template,i18n:t.getModel("@i18n"),cardId:f,settings:v.settings,appComponent:null,mainComponent:null}};e.create(l).then(function(e){var a=t.byId(s);if(!!a){var n=a.getComponentInstance();e.setModel(g);a.setComponent(e);if(n){setTimeout(function(){n.destroy()},0)}c(true)}else{h="Component Container '"+s+"' is not present in the current View";i(h,d)}},function(t){h="Component creation failed";i(h,d,t)})},function(t){h="MetaModel was not loaded";i(h,d,t)})}else{h="First argument oView is null";i(h,d)}}else{h="ContainerId should be of type string and not null";i(h,d)}}else{h=v.template+" card type is not supported in the API";i(h,d)}}else{h="Cards template or model or settings are not defined";i(h,d)}}else{h="Cards manifest entry or cardId is null";i(h,d)}}else{h="Second argument oManifest is null";i(h,d)}})}var d={createCardComponent:c,recreateCard:o,checkIfAPIIsUsed:r,getSupportedCardTypes:s};return d},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/PayLoadUtils", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ui/model/odata/CountMode"],function(jQuery,t,e,i,a,s){"use strict";function n(t,e,i,a){return t+"_sap.ovp.cards."+e+"."+i+"."+a}function r(t){return{type:"XTIT",maxLength:40,value:{"":t}}}function o(){return{i18n:"../i18n/i18n.properties"}}function d(t,e,i){var a=t+"["+e+"]";if(i){a+="/"+i}return a}function f(t,e){var i=e._getCardsModel();for(var a=0;a<i.length;a++){if(i[a].id===t){return true}}return false}function l(t,e,i){var a={propertyPath:t,operation:e};if(i){a["propertyValue"]=i}return a}function g(t){delete t.id;delete t.dashboardLayout;delete t.settings.baseUrl;delete t.settings.cloneCard;delete t.settings.newCard;delete t["customer.settings"];delete t["customer_base.settings"];delete t["vendor.settings"];if(t.settings["staticContent"]){for(var e=0;e<t.settings["staticContent"].length;e++){delete t.settings["staticContent"][e].id}}}function c(e,i,a,s){if(a){if(e===t._getLayerNamespace()+".settings"){a[s]={operation:"DELETE"}}}else{if(e===t._getLayerNamespace()+".settings"){K.aEntityPropertyChange.push(l(i,"UPSERT",{operation:"DELETE"}))}else{K.aEntityPropertyChange.push(l(i,"DELETE"))}}}function p(e){K.aEntityPropertyChange.push(l(t._getLayerNamespace()+".settings","UPSERT",e[t._getLayerNamespace()+".settings"]))}function u(e,a,s,o,d,f){var g;var c=t._getLayer();if(!K.oText){K.oText={}}if(!c||c===i.Layers.customer){g=n(K.sApplicationId,K.sCardId,e,s);K.oText[g]=r(o)}else{var p=false;for(var u in d.ai18nProperties){if(d.ai18nProperties[u].value===o){g=d.ai18nProperties[u].key;p=true;break}}if(!p){g=n(K.sApplicationId,K.sCardId,e,s)}K.oText[g]=r(o)}if(f){f[s]="{{"+g+"}}"}else{var h=a+"/"+s;K.aEntityPropertyChange.push(l(h,"UPSERT","{{"+g+"}}"))}}function h(a,s,n,r){var o=this._oCardManifestSettings,d=this._oOriginalCardManifestSettings;for(var f=0;f<n.length;f++){if(!d[n[f]]&&o[n[f]]||d[n[f]]&&o[n[f]]&&d[n[f]]!=o[n[f]]){if(r){u(a,a,n[f],o[n[f]],o,s[a])}else{u(a,a,n[f],o[n[f]],o)}var l=t._getLayer();if(!l||l===i.Layers.customer){s.settings[n[f]]=o[n[f]]}else{var g=e.oI18nValueProperty;if(g[n[f]]){s.settings[n[f]]=this._oCardManifestSettings[g[n[f]]]}else{s.settings[n[f]]=o[n[f]]}}}else if(!o[n[f]]&&d[n[f]]){if(r){c(a,a+"/"+n[f],s[a],n[f])}else{c(a,a+"/"+n[f])}delete s.settings[n[f]]}}}function C(t,e,i,a){var s=t+"/"+e;if(a){a[e]=i}else{K.aEntityPropertyChange.push(l(s,"UPSERT",i))}}function v(t,e,i,a){var s=this._oCardManifestSettings,n=this._oOriginalCardManifestSettings;for(var r=0;r<i.length;r++){if(!n[i[r]]&&s[i[r]]||n[i[r]]&&s[i[r]]&&n[i[r]]!=s[i[r]]){if(a){C(t,i[r],s[i[r]],e[t])}else{C(t,i[r],s[i[r]])}e.settings[i[r]]=s[i[r]]}else if(!s[i[r]]&&n[i[r]]){if(a){c(t,t+"/"+i[r],e[t],i[r])}else{c(t,t+"/"+i[r])}delete e.settings[i[r]]}}}function y(i,a){var s=e.cardSettings["settings"],n=e.cardSettings["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false)}}function m(t,e,i,a,s,n){var r=this._oCardManifestSettings;var o=r[s];for(var f=0;f<o.length;f++){for(var l=0;l<a.length;l++){if(o[f][a[l]]){var g=d(t+"/"+s,f),c=t+"."+s+"."+f;if(n){u(c,g,a[l],o[f][a[l]],r,e[t][s][f])}else{u(c,g,a[l],o[f][a[l]],r,i[f])}}}}if(!n){C(t,s,i)}}function S(t,i){var a=e.cardSettingsArrayLevel[i]["onlyTabLevelProps"],s=false;for(var n=0;a&&n<a.length;n++){if(a[n]===t){s=true;break}}return s}function _(t,e,i,a,s,n){var r=this._oCardManifestSettings,o;for(o=0;o<i.length;o++){if(r[i[o]]&&!S(i[o],s)){if(n){u(t,t,i[o],r[i[o]],r,e[t])}else{u(t,t,i[o],r[i[o]],r)}e.settings[i[o]]=r[i[o]]}}for(o=0;o<a.length;o++){if(r[a[o]]&&!S(a[o],s)){if(n){C(t,a[o],r[a[o]],e[t])}else{C(t,a[o],r[a[o]])}e.settings[a[o]]=r[a[o]]}}if(n){c(t,t+"/"+s,e[t],s)}else{c(t,t+"/"+s)}delete e.settings[s]}function b(t,e,i,a,s,n,r){var o;for(o=0;o<a.length;o++){if(e[t][a[o]]){if(r){c(t,t+"/"+a[o],e[t],a[o])}else{c(t,t+"/"+a[o])}delete e.settings[a[o]]}}for(o=0;o<s.length;o++){if(e[t][s[o]]){if(r){c(t,t+"/"+s[o],e[t],s[o])}else{c(t,t+"/"+s[o])}delete e.settings[s[o]]}}m.bind(this)(t,e,i,a,n,r)}function M(t,i){return jQuery.map(a({},t),function(t){var a=e.cardSettingsArrayLevel[i]["text"],s,n=e.cardSettingsArrayLevel[i]["settings"],r={};for(s=0;s<a.length;s++){if(t[a[s]]){r[a[s]]=t[a[s]]}}for(s=0;s<n.length;s++){if(t[n[s]]||t[n[s]]===""){r[n[s]]=t[n[s]]}}return r})}function L(t,i,a,s){var n=e.cardSettingsArrayLevel[a]["checkForRemoval"],r,o;for(r=0;r<n.length;r++){if(!i[0][n[r]]){o=t.indexOf(n[r]);if(s==="remove"){if(o>-1){t.splice(o,1)}}else if(s==="add"){if(o===-1){t.push(n[r])}}}}return t}function P(i,a,s,n,r,o){var d=e.cardSettingsArrayLevel[r]["text"],f=e.cardSettingsArrayLevel[r]["settings"],l=M(s,r);if(s&&n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}m.bind(this)(i,a,l,d,r,o)}else if(!s&&n){_.bind(this)(i,a,d,f,r,o)}else if(s&&!n){a.settings[r]=M(s,r);if(i===t._getLayerNamespace()+".settings"){a[i][r]=M(s,r)}f=L(f,l,r,"remove");b.bind(this)(i,a,l,d,f,r,o);f=L(f,l,r,"add")}}function I(t,e,i){var a=this._oCardManifestSettings["staticContent"],s=this._oOriginalCardManifestSettings["staticContent"],n=this._oCardManifestSettings["tabs"],r=this._oOriginalCardManifestSettings["tabs"];if(a||s){P.bind(this)(t,e,a,s,"staticContent",i)}else if(n||r){P.bind(this)(t,e,n,r,"tabs",i)}}function A(i,a){var s=e.cardSettingsForComplex["settings"],n=e.cardSettingsForComplex["text"];if(i===t._getLayerNamespace()+".settings"){if(a[t._getLayerNamespace()+".settings"]){h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);I.bind(this)(i,a,false)}else{a[t._getLayerNamespace()+".settings"]={};h.bind(this)(i,a,n,true);v.bind(this)(i,a,s,true);I.bind(this)(i,a,true);p(a)}}else{h.bind(this)(i,a,n,false);v.bind(this)(i,a,s,false);I.bind(this)(i,a,false)}}function x(t,e){var i=this._oCardManifestSettings["staticContent"],a=this._oOriginalCardManifestSettings["staticContent"],s=this._oCardManifestSettings["tabs"],n=this._oOriginalCardManifestSettings["tabs"];if(i||a||s||n){A.bind(this)(t,e)}else{y.bind(this)(t,e)}}function N(i){var a=e.AllCardSettingsForKPICard,s,n=this._oCardManifestSettings,r={model:t._getLayerNamespace()+".kpi_card_model_"+i.getTrimmedDataURIName(n.selectedKPI.ODataURI),template:"sap.ovp.cards.charts.analytical",settings:{}};for(s=0;s<a.length;s++){if(n[a[s]]){r.settings[a[s]]=n[a[s]]}}if(n["addCustomParameters"]){r.settings.staticParameters={};var o=n["aAllStaticParameters"];if(Array.isArray(o)&&o.length>0){for(var d=0;d<o.length;d++){var f=o[d];r.settings.staticParameters[f.key]=f.value}}}return r}function w(){var t=this._oCardManifestSettings["staticContent"],i=e.cardSettingsArrayLevel["staticContent"]["text"],a,s,n=e.cardSettingsArrayLevel["staticContent"]["settings"],r=this._oCardManifestSettings,o=e.cardSettingsForStaticLinkListCard,d={template:"sap.ovp.cards.linklist",settings:{staticContent:[]}};for(s=0;s<o.length;s++){if(r[o[s]]){d.settings[o[s]]=r[o[s]]}}for(s=0;s<t.length;s++){d.settings["staticContent"].push({});for(a=0;a<i.length;a++){if(t[s][i[a]]){d.settings["staticContent"][s][i[a]]=t[s][i[a]]}}for(a=0;a<n.length;a++){if(t[s][n[a]]){d.settings["staticContent"][s][n[a]]=t[s][n[a]]}}}return d}function D(t){var i=e.NewCardSettings,a;var s=this._oCardManifestSettings;i.forEach(function(t){if(t.template===this._oCardManifestSettings.template){a=t}}.bind(this));var n={model:this._oCardManifestSettings.model,template:a.template,settings:{}};if(!this._oCardManifestSettings["tabs"]){var r=a.cardSettings;var o=e.oI18nValueProperty;for(var d=0;d<r.length;d++){if(!t.bAddNewCardFlag){if(s[r[d]]){n.settings[r[d]]=s[r[d]]}}else{if(s[r[d]]){if(o[r[d]]){n.settings[r[d]]=this._oCardManifestSettings[o[r[d]]]}else{n.settings[r[d]]=s[r[d]]}}}}}else{var f=a.text;for(var d=0;d<f.length;d++){if(s[f[d]]){n.settings[f[d]]=s[f[d]]}}var l=this._oCardManifestSettings["tabs"],g=M(l,"tabs"),c=this._oCardManifestSettings.defaultViewSelected;n.settings["tabs"]=g;n.settings.selectedKey=c}return n}function T(t,e){var i=[];if(e){for(var a in e){var s=e[a];i.push({key:a,value:s.value[""],textType:s.type})}if(i.length){writeToI18n("/"+t+"/webapp/i18n",i)}}}function E(t,i,a,s){var o,d,f,l,g,c=a.settings["staticContent"],p=a.settings["tabs"];var u=e.cardSettingsWithText;var h=e.oI18nKeyValueProperty;for(d=0;d<u.length;d++){var C;if(typeof u[d]=="string"){if(a.settings[u[d]]){if(!o){o={}}if(s){if(!s.bAddNewCardFlag){C=n(t,i,"settings",u[d])}else{for(var v in h){if(u[d]===v){C=this._oCardManifestSettings[h[v]]?this._oCardManifestSettings[h[v]]:n(t,i,"settings",u[d]);break}}}}else{C=n(t,i,"settings",u[d])}o[C]=r(a.settings[u[d]]);a.settings[u[d]]="{{"+C+"}}"}}else if(typeof u[d]=="object"){if(u[d].hasOwnProperty("staticContent")){if(c){for(f=0;f<c.length;f++){for(l=0;l<u[d]["staticContent"].length;l++){g=u[d]["staticContent"][l];if(c[f][g]){if(!o){o={}}C=n(t,i,"settings.staticContent."+f,g);o[C]=r(c[f][g]);a.settings["staticContent"][f][g]="{{"+C+"}}"}}}}}else if(u[d].hasOwnProperty("tabs")){if(p){for(f=0;f<p.length;f++){for(l=0;l<u[d]["tabs"].length;l++){g=u[d]["tabs"][l];if(p[f][g]){if(!o){o={}}C=n(t,i,"settings.tabs."+f,g);o[C]=r(p[f][g]);a.settings["tabs"][f][g]="{{"+C+"}}"}}}}}}}return o}function F(t,e,i){var a=false;for(var s=0;s<i.length;s++){if(i[s].id!==e&&i[s].model===t){a=true;break}}return a}function O(t,e,i,a,s){var n={};n["appDescriptorChange"]={parameters:t};if(e){n["appDescriptorChange"]["texts"]=e}if(a){n["flexibilityChange"]={newAppDescriptor:i,oldAppDescriptor:a}}else{n["flexibilityChange"]=i}if(s){n["viewSwitchChange"]=s}return n}function U(e,s){var n={card:{}},r={},d=e.oMainComponent,l=d._getApplicationId(),c,p={},u=t._getLayer();if(e.bAddNewCardFlag){c=D.bind(this)(e)}else if(e.bNewStaticLinkListCardFlag){c=w.bind(this)(e)}else if(e.bNewKPICardFlag){c=N.bind(this)(e)}var h=t._getLayerNamespace()+s,C=1;while(f(h+"_N"+C,d)){C++}h=h+"_N"+C;g(c);r=a({},c);r.id=h;if(this._oCardManifestSettings.selectedKPI){r.settings.selectedKPI=a({},this._oCardManifestSettings.selectedKPI)}p.oFlexCardManifest=r;p.oText=E.bind(this)(l,h,c,e);if(u===i.Layers.vendor){T(l,a({},p.oText));p.oText=o()}n.card[h]=c;p.oParameters=n;return p}var K={sApplicationId:"",sCardId:"",aEntityPropertyChange:[],oText:undefined,getPayLoadForEditCard:function(e){var s=e.oAppDescriptor.id,n={cardId:s},r,d,f=a({},e.oAppDescriptor),l=a({},e.oAppDescriptor),g,c,p=t._getLayer();g=s.lastIndexOf(t._getLayerNamespace()+".",0)===0?"settings":t._getLayerNamespace()+".settings";K.sApplicationId=e.sApplicationId;K.sCardId=s;K.aEntityPropertyChange=[];K.oText=undefined;x.bind(this)(g,f);r=a({},K.oText);if(p===i.Layers.vendor){T(K.sApplicationId,K.oText);r=o()}d=K.aEntityPropertyChange;if(d.length===1){n["entityPropertyChange"]=d[0]}else{n["entityPropertyChange"]=d}if(this._oCardManifestSettings["tabs"]){var u=this._oCardManifestSettings.defaultViewSelected,h=this._oOriginalCardManifestSettings.selectedKey;h=h&&h>0?h:1;if(u&&u>0&&u!==h){c={cardId:s,selectedKey:u,oldKey:h}}f.settings.selectedKey=u}return O(n,r,f,l,c)},getPayLoadForCloneCard:function(e){return new Promise(function(s,n){var r={card:{}},d,l={},c=e.getComponentInstance().getComponentData(),p=c.mainComponent,u=p._getApplicationId(),h=a({},p._getCardFromManifest(c.cardId)),C=t._getLayer();var v=t._getLayerNamespace()+"."+h.id,y=1;while(f(v+"_C"+y,p)){y++}v=v+"_C"+y;g(h);l=a({},h);l.id=v;l.settings.title=l.settings.title+" "+y;h.settings.title=h.settings.title+" "+y;if(h.settings.defaultSpan&&h.settings.defaultSpan.showOnlyHeader){h.settings.defaultSpan.rows=12}d=E(u,v,h);if(C===i.Layers.vendor){T(u,a({},d));d=o()}r.card[v]=h;s(O(r,d,l))})},getPayLoadForNewStaticLinkListCard:function(t){var e=U.bind(this)(t,".newStaticLinkListCard");return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForNewKPICard:function(t){var e=U.bind(this)(t,".newKPICard"),i=t.oAppComponent,a=e.oFlexCardManifest,n=e.oParameters,r=a.model+"_ANNO",o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==this._oCardManifestSettings.selectedKPI.ModelURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=i.getModel(a.model);if(!l){n["model"]={};n["model"][a.model]={dataSource:a.model,settings:{defaultCountMode:s.None}};n["dataSource"]={};n["dataSource"][a.model]={uri:this._oCardManifestSettings.selectedKPI.ODataURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){n["dataSource"][r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};a.settings["sAnnoKey"]=r}}var g=O(n,e.oText,e.oFlexCardManifest);if(d&&l){g["addODataAnnotation"]={parameters:{dataSourceId:a.model,annotations:[r],dataSource:{}}};g["addODataAnnotation"].parameters.dataSource[r]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};g["flexibilityChange"].settings["sAnnoKey"]=r}return g},getPayLoadForNewCard:function(t){var e=U.bind(this)(t,".newCard"),i=e.oParameters;if(t.newDataSource){var a=t.oAppComponent,n=e.oFlexCardManifest,r=t.newDataSourceModel.serviceAnnotation,o=t.getDataSources(r),d=true,f=0;if(o[r]){if(o[r].uri!==t.newDataSourceModel.serviceAnnotationURI){while(o[r+"_"+f]){f++}r=r+"_"+f}else{d=false}}var l=a.getModel(n.model);if(!l){i["model"]={};i["model"][n.model]={dataSource:n.model,settings:{defaultCountMode:s.None}};i["dataSource"]={};i["dataSource"][n.model]={uri:t.newDataSourceModel.serviceURI,type:"OData",settings:{annotations:[r],localUri:""}};if(d){i["dataSource"][r]={uri:t.newDataSourceModel.serviceAnnotationURI,type:"ODataAnnotation",settings:{localUri:""}}}}}return O(e.oParameters,e.oText,e.oFlexCardManifest)},getPayLoadForRemoveCard:function(t){var e={},i={},a=t.getComponentInstance().getComponentData(),s=a.cardId;e["cardId"]=s;i.id=t.getId();var n=O(e,null,i),r=a.mainComponent.getUIModel().getProperty("/cards");if(!F(a.modelName,s,r)&&!!a.modelName){n["removeDataSourceChange"]=[];var o=a.appComponent.getMetadata(),d=o.getManifestEntry("sap.ui5").models[a.modelName].dataSource,f=o.getManifestEntry("sap.app").dataSources[d].settings.annotations;f.forEach(function(t){n["removeDataSourceChange"].push({parameters:{dataSourceId:t}})})}return n}};return K},true);
sap.ui.predefine("sap/ovp/cards/PersonalizationUtils", ["sap/ovp/cards/CommonUtils","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ovp/cards/ovpLogger"],function(a,r,n){"use strict";var e=new n("OVP.cards.PersonanlizationUtils");function t(a,r){r.every(function(r){if(r.id===a.cardId){r.selectedKey=a.selectedKey;return false}return true});return r}function o(a,r){r.every(function(r){if(r.id===a.cardId){r.visibility=a.visibility;return false}return true});return r}function i(r,n,e){var t=a.getApp(),o=t._getCardId(r.id);n.every(function(a){if(a.id===o){a.visibility=e;return false}return true});return n}function s(a,r){var n=[];var e,t;e=r.filter(function(a){return a.visibility});r.forEach(function(a,r){if(!a.visibility){n.push({card:a,index:r})}});if(!e[a.oldPosition]||!e[a.position]){return r}t=e[a.oldPosition];e[a.oldPosition]=e[a.position];e[a.position]=t;n.forEach(function(a){e.splice(a.index,0,a.card)});r=e;return r}function u(a,r){r.every(function(r){if(r.id===a.cardId){Object.keys(a.dashboardLayout).forEach(function(n){if(!r.dashboardLayout[n]){r.dashboardLayout[n]={}}if(a.dashboardLayout[n].rowSpan){r.dashboardLayout[n].rowSpan=a.dashboardLayout[n].rowSpan}if(a.dashboardLayout[n].colSpan){r.dashboardLayout[n].colSpan=a.dashboardLayout[n].colSpan}if(a.dashboardLayout[n].maxColSpan){r.dashboardLayout[n].maxColSpan=a.dashboardLayout[n].maxColSpan}if(a.dashboardLayout[n].noOfItems){r.dashboardLayout[n].noOfItems=a.dashboardLayout[n].noOfItems}if(a.dashboardLayout[n].hasOwnProperty("autoSpan")){r.dashboardLayout[n].autoSpan=a.dashboardLayout[n].autoSpan}if(a.dashboardLayout[n].row){r.dashboardLayout[n].row=a.dashboardLayout[n].row}if(a.dashboardLayout[n].column){r.dashboardLayout[n].col=a.dashboardLayout[n].column}if(a.dashboardLayout[n].hasOwnProperty("showOnlyHeader")){r.dashboardLayout[n].showOnlyHeader=a.dashboardLayout[n].showOnlyHeader}});return false}return true});return r}function d(a,r){if(!Array.isArray(r)||!a){return a}var n=[];a.forEach(function(a){var r={};Object.keys(a).forEach(function(n){r[n]=a[n]});n.push(r)});var e={VENDOR:[],CUSTOMER_BASE:[],CUSTOMER:[],USER:[]};var d=r.reduce(function(a,r){a[r.getLayer()].push(r);return a},e);var c=[].concat(d["VENDOR"],d["CUSTOMER_BASE"],d["CUSTOMER"],d["USER"]);c.forEach(function(a){switch(a.getChangeType()){case"viewSwitch":n=t(a.getContent(),n);break;case"visibility":n=o(a.getContent(),n);break;case"hideCardContainer":n=i(a.getContent().card,n,false);break;case"unhideCardContainer":n=i(a.getContent().card,n,true);break;case"position":n=s(a.getContent(),n);break;case"dragOrResize":n=u(a.getContent(),n);break;default:break}});return n}function c(a,r){var n=a.filter(function(a){var n=false;r.forEach(function(r){if(a.id===r.id){n=true;return}});return!n});return r.concat(n)}function f(n,t){var o=a.getApp();var i={};if(o.getOwnerComponent()){i=o.getOwnerComponent().oOvpConfig}if(o.bRTAActive||i.bInsightDTEnabled){return}var s=t?t.byId("ovpLayout"):null;var u=[],d=[],c=[];if(!Array.isArray(n)){n=[n]}n.forEach(function(a){var r=a.content.cardId;a.jsOnly=true;u.push({selectorElement:t.byId(r),changeSpecificData:a});d.push(t.byId(r));c.push(a.changeType)});r.isCondensingEnabled().then(function(a){if(a){return y(u,s)}else{return h(d,c).finally(function(){return y(u,s)})}}).then(function(){e.info("Personalization changes have been saved in lrep backend")}).catch(function(a){e.error("Personalization changes were not saved",a)})}function h(a,n){return r.reset({selectors:a,changeTypes:n})}function y(a,n){return r.add({changes:a},true).then(function(a){return r.save({changes:a,selector:n})})}var l={mergeChanges:d,addMissingCardsFromManifest:c,savePersonalization:f};return l},true);
sap.ui.predefine("sap/ovp/cards/SettingsUtils", ["sap/m/Dialog","sap/m/Button","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/m/MessagePopover","sap/m/MessagePopoverItem","sap/m/Link","sap/m/MessageBox","sap/ovp/cards/AnnotationHelper","sap/ui/core/mvc/ViewType","sap/ui/model/json/JSONModel","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode","sap/ui/core/mvc/XMLView","sap/ui/core/Core"],function(e,t,a,i,r,n,s,o,l,d,p,c,u,f,h,g,v,y,m,C,b,S){"use strict";var P=h;var w=new y("OVP.cards.SettingsUtils");function O(e,t,a){var r=e.getComponentInstance(),s=r.getComponentData(),o=s.appComponent,l=s.mainComponent,d=a?"":s.cardId,p=d+"Dialog",c=a?"":s.modelName,u=!c?undefined:o.getModel(c),f=t.getModel().getData(),h={cards:{}};h.cards[p]={template:f.template,settings:f};if(ce.bNewKPICardFlag){var g=f.selectedKPI;u=new m(g.ODataURI,{annotationURI:g.ModelURI,defaultCountMode:C.None});c=n._getLayerNamespace()+".kpi_card_model_"+D(g.ODataURI)}if(u&&!!c){h.cards[p].model=c;t.setModel(u,c)}h.cards[p]=l._getTemplateForChart(h.cards[p]);t.getController()._oManifest=h;if(ce.bNewKPICardFlag){u.getMetaModel().loaded().then(function(){var e=i.createCardComponent(t,h,"dialogCard");e.then(function(){t.setBusy(false)}).catch(function(){L(h.cards[p].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");V(t,h,p)})},function(e){w.error(e)});u.attachMetadataFailed(function(){L(h.cards[p].settings,"OVP_KEYUSER_METADATA_FAILURE");V(t,h,p)})}else{i.createCardComponent(t,h,"dialogCard")}}function I(e,t){if(!this.oNewDataSources[e]){this.oNewDataSources[e]={uri:t}}}function E(e){if(this.oNewDataSources[e]){delete this.oNewDataSources[e]}}function T(e){var t=this.oAppComponent.getMetadata(),a=t.getManifestEntry("sap.app").dataSources;if(this.oNewDataSources[e]){return this.oNewDataSources}return a}function D(e){var t=e.split("/");return t[t.length-1]?t[t.length-1]:t[t.length-2]}function V(e,t,a){t.cards[a].template="sap.ovp.cards.error";t.cards[a].model=undefined;var r=i.createCardComponent(e,t,"dialogCard");var n=e.getController();r.then(function(){e.setBusy(false);n.setBusy(false)}).catch(function(){e.setBusy(false);n.setBusy(false)})}function L(e,t){if(e){e.errorStatusText=h.getText(t)}}function A(e){if(e.indexOf("#")!==-1){return e.split("#")[1]}else{return"Default"}}function x(e,t){if(e){var a,i,r;if(e.indexOf("{")===0&&e.indexOf("}")===e.length-1){e=e.slice(1,-1);if(e.indexOf(">")!=-1){a=e.split(">");r=a[0];i=a[1]}else if(e.indexOf("&gt;")!=-1){a=e.split("&gt;");r=a[0];i=a[1]}if(!!i&&r==="@i18n"&&ce.oi18nModel){return ce.oi18nModel.getProperty(i)}else{return e}}else{return e}}else{return t}}function _(e,t,a,i){if(t[e]&&t[e][a]){var r=typeof t[e][a]==="string"?t[e][a]:t[e][a].String;return x(r,i)}else{return i}}function k(e,t){var a=A(t),i=h.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var r=c.sortCollectionByImportance(e[t]);for(var n=0;n<r.length;n++){var s=r[n];if(s.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(s&&s["Label"]){return x(s["Label"].String,i)}else{return s["SemanticObject"].String+"-"+s["Action"].String}}if(s.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(s&&s["Label"]){return x(s["Label"].String,i)}else{return s["Url"].String}}}}return h.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var o=c.sortCollectionByImportance(e[t]);o.forEach(function(e,t){if(e["RecordType"]&&e["RecordType"].indexOf(".DataField")!==-1&&e["Label"]){o[t]["Label"]={String:x(e["Label"].String,i)}}});return o}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return x(e[t]["Description"].Label.String,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return _(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return _(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return _(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return _(t,e,"Label",i)}else{var l="";if(a!=="Default"){l="#"+a}var d="com.sap.vocabularies.Common.v1.Label"+l;if(e[t]&&e[t][d]){return x(e[t][d].String,i)}else{return i}}}function N(e,t){var a=A(t),i=h.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[a]);i=i?i:a;if(t.indexOf(",")!==-1){t=t.split(",")[0]}if(t.indexOf(".Identification")!==-1){if(e[t]){var r=c.sortCollectionByImportance(e[t]);for(var n=0;n<r.length;n++){var s=r[n];if(s.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(s&&s["Label"]){return x(s["Label"],i)}else{return s["SemanticObject"]+"-"+s["Action"]}}if(s.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(s&&s["Label"]){return x(s["Label"],i)}else{return s["Url"]}}}}return h.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}else if(t.indexOf(".LineItem")!==-1){var r=c.sortCollectionByImportance(e[t]);r.forEach(function(e,t){if(e["$Type"]&&e["$Type"].indexOf(".DataField")!==-1&&e["Label"]){r[t]["Label"]=x(e["Label"],i)}});return r}else if(t.indexOf(".HeaderInfo")!==-1){if(e[t]&&e[t]["Description"]&&e[t]["Description"].Label){return x(e[t]["Description"].Label,i)}else{return i}}else if(t.indexOf(".PresentationVariant")!==-1||t.indexOf(".SelectionVariant")!==-1||t.indexOf(".SelectionPresentationVariant")!==-1){return _(t,e,"Text",i)}else if(t.indexOf(".DataPoint")!==-1){return _(t,e,"Title",i)}else if(t.indexOf(".Chart")!==-1){return _(t,e,"Description",i)}else if(t.indexOf(".FieldGroup")!==-1){return _(t,e,"Label",i)}else{var o="";if(a!=="Default"){o="#"+a}var l="com.sap.vocabularies.Common.v1.Label"+o;if(e[t]&&e[t][l]){return x(e[t][l],i)}else{return i}}}function R(e,t,a){switch(t){case"cardPreview":return i.getSupportedCardTypes().indexOf(e)!==-1;case"noOfRows":case"noOfColumns":case"stopResizing":var r=["sap.ovp.cards.stack"];return r.indexOf(e)===-1;case"listType":case"listFlavor":var n=["sap.ovp.cards.list","sap.ovp.cards.v4.list"];return n.indexOf(e)!==-1;case"listFlavorForLinkList":var s=["sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return s.indexOf(e)!==-1;case"isViewSwitchSupportedCard":case"showViewSwitch":case"kpiHeader":var o=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return o.indexOf(e)!==-1;case"chartSPVorKPI":case"chart":var l=["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return l.indexOf(e)!==-1;case"sortOrder":case"sortBy":case"lineItem":if(!a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return d.indexOf(e)!==-1}else{var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;case"identification":var p=["sap.ovp.cards.stack"];return p.indexOf(e)!==-1;case"addViewSwitch":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return c.indexOf(e)!==-1;case"addKPIHeader":var c=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical"];return c.indexOf(e)!==-1;case"selecionOrPresentation":var u=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return u.indexOf(e)!==-1;case"addODataSelect":var f=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"addCustomActions":var f=["sap.ovp.cards.stack"];return f.indexOf(e)!==-1;case"setCardProperties":if(a){var d=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return d.indexOf(e)!==-1}break;default:break}}function M(e){return!!e.kpiAnnotationPath}function F(e){return!!e.selectionPresentationAnnotationPath}function B(e){return F(e)||M(e)}function K(e){return e.substring(e.lastIndexOf("_")+1,e.length).indexOf("C")!==-1}function U(e){if(e.NewKPICard){return e.NewKPICard}else if(e.selectedKPICardID){return e.selectedKPICardID.indexOf("newKPICard")!==-1}else{return false}}function H(e,t,a,i,r){var n=true;var s=true;var o=false;var l=false;var d=false;if(a){if(e.mainViewSelected){s=false}else{n=false}}if(e.addNewCard&&e.model){var l=true;if(e.template){d=true;if(e.entitySet){o=true}}}var p;switch(t){case"cardPreview":p=R(e.template,"cardPreview");break;case"noOfRows":case"noOfColumns":case"stopResizing":p=n&&R(e.template,t);break;case"title":p=n;break;case"dynamicSwitchSubTitle":p=n&&!!e.dynamicSubTitle;break;case"dynamicSwitchStateSubTitle":p=!!e.dynamicSubtitleAnnotationPath;break;case"subTitle":if(!e.addNewCard){if(!e.subTitle){e.subTitle=" ";p=true}else{p=n&&!e.dynamicSubtitleAnnotationPath}}else{p=n}break;case"dynamicSubTitle":p=n&&!!e.dynamicSubtitleAnnotationPath;break;case"valueSelectionInfo":if(!e.addNewCard){if(!e.valueSelectionInfo){e.valueSelectionInfo=" "}p=n&&R(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath&&!U(e)}else{p=n&&l&&d&&o&&e.addKPIHeaderCheckBox&&R(e.template,"addKPIHeader")}break;case"dataPoint":if(!e.addNewCard){p=s&&!M(e)&&R(e.template,"kpiHeader")&&!!e.dataPointAnnotationPath}else{p=s&&l&&d&&o&&e.addKPIHeaderCheckBox&&R(e.template,"addKPIHeader")}break;case"listType":case"listFlavor":case"listFlavorForLinkList":if(!e.addNewCard){p=n&&R(e.template,t)}else{p=n&&l&&d&&o&&R(e.template,t)}break;case"identification":if(!e.addNewCard){p=s&&!e.staticContent&&!R(e.template,t)}else{p=s&&l&&d&&o&&!R(e.template,t)}break;case"selectionPresentationVariant":if(!e.addNewCard){p=s&&F(e)&&!M(e)&&R(e.template,"kpiHeader")}else{p=s&&l&&d&&o&&R(e.template,"selecionOrPresentation")&&!!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)}break;case"KPI":case"dataPointSelectionMode":if(!e.addNewCard){p=s&&M(e)&&!F(e)&&R(e.template,"chart")&&!U(e)}else{p=s&&l&&d&&o&&R(e.template,"chart")}break;case"presentationVariant":case"selectionVariant":if(!e.addNewCard){p=s&&!B(e)&&!e.staticContent&&R(e.template,"kpiHeader")}else{p=s&&l&&d&&o&&!(Array.isArray(e.selectionPresentationVariant)&&e.selectionPresentationVariant.length)&&R(e.template,"selecionOrPresentation")}break;case"kpiHeader":p=n&&!M(e)&&R(e.template,t);break;case"lineItem":case"chart":if(!e.addNewCard){p=s&&!B(e)&&R(e.template,t)}else{p=s&&l&&d&&o&&R(e.template,t,e.addNewCard)}break;case"chartSPVorKPI":p=s&&B(e)&&!U(e)&&R(e.template,t);break;case"presentationVariantSPVorKPI":case"selectionVariantSPVorKPI":p=s&&B(e)&&!U(e)&&!e.staticContent&&R(e.template,"kpiHeader");break;case"showViewName":p=a&&s;break;case"showDefaultView":if(a&&s){if(e.defaultViewSelected!=e.selectedKey){p=true}}else{p=false}break;case"showEntitySet":if(a&&s){if(e.selectedKey>0&&e.tabs[e.selectedKey-1].entitySet){p=true}else{p=false}}else{p=false}break;case"showMore":case"removeVisual":case"lineItemSubTitle":case"lineItemTitle":case"staticLink":case"links":var c=(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent;if(t==="staticLink"){p=c&&!!e.staticContent[i].targetUri}else if(t==="links"){p=c&&!!e.staticContent[i].semanticObject}else if(t==="removeVisual"){p=c&&(!!e.staticContent[i].targetUri||!!e.staticContent[i].semanticObject)}else{p=c}break;case"selectCardType":p=n&&l;break;case"addKPIHeader":p=n&&l&&d&&R(e.template,t);break;case"setEntitySet":p=s&&l&&d;break;case"setCardProperties":p=n&&l&&d&&o&&R(e.template,t,e.addNewCard);break;case"setGeneralCardProperties":p=n&&l&&d&&o;break;case"setAnnotationCardProperties":p=s&&l&&d&&o;break;case"subTitleRequired":p=l&&d&&o&&e.addKPIHeaderCheckBox;break;case"addODataSelect":if(!e.addNewCard){p=s&&R(e.template,t)}else{p=s&&l&&d&&o&&R(e.template,t)}break;case"isViewSwitchSupportedCard":case"showViewSwitch":p=l&&d&&(o||!!e.showViewSwitchButton)&&R(e.template,t);break;case"dataSource":p=n;break;case"dataSourceExisting":p=!e.newDataSource;break;case"dataSourceNew":p=e.newDataSource;break;case"addCustomActions":p=n&&R(e.template,t);break;default:break}return p}function W(e){var t=false;this.oVisibility.viewSwitchEnabled=false;this.oVisibility.showViewSwitch=false;if(!this.bAddNewCardFlag){if(R(e.template,"isViewSwitchSupportedCard")&&!U(e)){if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=true}this.oVisibility.viewSwitchEnabled=true}}else{if(e.tabs&&e.tabs.length){t=true;this.oVisibility.showViewSwitch=H(e,"showViewSwitch")}this.oVisibility.viewSwitchEnabled=H(e,"isViewSwitchSupportedCard")}this.oVisibility.cardPreview=H(e,"cardPreview");this.oVisibility.stopResizing=H(e,"stopResizing",t);this.oVisibility.noOfRows=H(e,"noOfRows",t);this.oVisibility.noOfColumns=H(e,"noOfColumns",t);this.oVisibility.title=H(e,"title",t);this.oVisibility.subTitle=H(e,"subTitle",t);this.oVisibility.valueSelectionInfo=H(e,"valueSelectionInfo",t);this.oVisibility.listType=H(e,"listType",t);this.oVisibility.listFlavor=H(e,"listFlavor",t);this.oVisibility.listFlavorForLinkList=H(e,"listFlavorForLinkList",t);if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&!!e.staticContent){var a=e.staticContent,i={},r={},n={},s={};for(var o=0;o<a.length;o++){var l=a[o].index;i[l]=H(e,"staticLink",null,o);r[l]=H(e,"links",null,o);n[l]=H(e,"removeVisual",null,o);s[l]=H(e,"showMore",null,o)}this.oVisibility.staticLink=i;this.oVisibility.links=r;this.oVisibility.removeVisual=n;this.oVisibility.showMore=s}this.oVisibility.lineItemTitle=H(e,"lineItemTitle");this.oVisibility.lineItemSubTitle=H(e,"lineItemSubTitle");this.oVisibility.showViewName=H(e,"showViewName",t);this.oVisibility.showDefaultView=H(e,"showDefaultView",t);this.oVisibility.showEntitySet=H(e,"showEntitySet",t);this.aVariantNames.forEach(function(a){this.oVisibility[a.sPath]=H(e,a.sPath,t)&&!!e[a.sPath]&&!!e[a.sPath].length}.bind(this));this.oVisibility.kpiHeader=H(e,"kpiHeader",t)&&!!e["dataPoint"]&&!!e["dataPoint"].length;this.oVisibility.dynamicSwitchSubTitle=H(e,"dynamicSwitchSubTitle",t);this.oVisibility.dynamicSwitchStateSubTitle=H(e,"dynamicSwitchStateSubTitle",t);this.oVisibility.dataSource=H(e,"dataSource",t);this.oVisibility.dataSourceExisting=H(e,"dataSourceExisting",t);this.oVisibility.dataSourceNew=H(e,"dataSourceNew",t);this.oVisibility.selectCardType=H(e,"selectCardType",t);this.oVisibility.addKPIHeader=H(e,"addKPIHeader",t);this.oVisibility.setEntitySet=H(e,"setEntitySet",t);this.oVisibility.setCardProperties=H(e,"setCardProperties",t);this.oVisibility.setGeneralCardProperties=H(e,"setGeneralCardProperties",t);this.oVisibility.subTitleRequired=H(e,"subTitleRequired",t);this.oVisibility.dataPointSelectionMode=H(e,"dataPointSelectionMode",t);var d;for(var o=0;o<this.aVisiblePropertiesForAnnotation.length;o++){if(this.oVisibility[this.aVisiblePropertiesForAnnotation[o].sProperty]){d=true;break}}this.oVisibility.setAnnotationCardProperties=d?H(e,"setAnnotationCardProperties",t):false;this.oVisibility.addODataSelect=H(e,"addODataSelect",t);this.oVisibility.addCustomActions=H(e,"addCustomActions",t);this.oVisibility.moveToTheTop=false;this.oVisibility.moveUp=false;this.oVisibility.moveDown=false;this.oVisibility.moveToTheBottom=false;this.oVisibility.delete=false}function Y(e){var t=e.getProperty("/staticContent");for(var a=0;a<t.length;a++){t[a].index="Index--"+(a+1)}e.setProperty("/staticContent",t)}function j(e){var t=0;for(var a=e.length-1;a>=0;a--){if(/^\d+$/.test(e[a])){t=parseInt(e[a],10);break}}return t}function z(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);if(e.lineItem){e.lineItem.forEach(function(t){if(a&&t.value==="@"+e.annotationPath||t.value===e.annotationPath){e.lineItemQualifier=t.name}})}if(e.tabs&&e.tabs.length&&e.selectedKey){e.viewName=e.tabs[e.selectedKey-1].value;e.isDefaultView=false;if(e.selectedKey===e.defaultViewSelected){e.isDefaultView=true}}var i=e.sortOrder;e.sortOrder="descending";if(i&&i.toLowerCase()!=="descending"){e.sortOrder="ascending"}e.isExtendedList=false;if(e.listType==="extended"){e.isExtendedList=true}e.isBarList=false;if(e.listFlavor==="bar"){e.isBarList=true}e.hasKPIHeader=false;if(e.dataPointAnnotationPath){e.hasKPIHeader=true}return e}function G(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);var i=e.kpiAnnotationPath;var r=e.template;var s=a?e.entityType.$Type:e.entityType;var o="";if(i&&s&&r==="sap.ovp.cards.charts.analytical"){var l=s[i];var d=l&&l.Detail;if(d&&d.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"&&d.SemanticObject&&d.Action){o="#"+d.SemanticObject.String+"-"+d.Action.String}}e["KPINav"]=o}function $(e){var t=[],a=e.metaModel,i=!!a?a.getODataEntityContainer().entitySet:[],r=a&&a.getODataEntityContainer().namespace+".";i.forEach(function(i){if(!e.addNewCard){var n=h.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),s=a.getODataEntityType(i.entityType)["sap:label"];t.push({name:x(s,n),value:i.name})}else{var n=h.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[i.name]),s=a.getODataEntityType(i.entityType)["sap:label"],o=i.entityType.split(r)[1];t.push({name:x(s,n),value:i.name,entityType:o})}});if(t.length>0){e["allEntitySet"]=t}}function Q(e){var t=e.metaModel,a=t.getObject("/"),i=Object.keys(a),r=[],n=[];for(var s=0;s<i.length;s++){if(i[s].startsWith("$")){continue}r.push({name:i[s],entityType:a[i[s]].$Type})}var o=t.getData();var l=o.$EntityContainer;var d=l?l.split("."):"";d.pop();var p=d.join(".")+".";r.forEach(function(t){var a=h.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[t.name]);var i=o&&o[t.entityType]&&o[t.entityType]["sap:label"];if(!e.addNewCard){n.push({name:x(i,a),value:t.name})}else{var r=t.entityType.split(p)[1];n.push({name:x(i,a),value:t.name,entityType:r})}});if(n.length>0){e["allEntitySet"]=n}}function X(e){var t=e.metaModel&&e.metaModel.getObject("/dataServices/schema")&&e.metaModel.getObject("/dataServices/schema")[0].entityType;if(t){t.forEach(function(t){var a=0;this.aVariantNames.forEach(function(e){for(var i in t){if(i.indexOf(e.sVariant)!==-1){a++}}});if(!a){e.allEntitySet=e.allEntitySet.filter(function(e){return e.entityType!==t.name})}}.bind(this))}}function q(e){var t=e&&e.metaModel&&e.metaModel.oModel;var a=n.isODataV4(t);var i;if(a){i=e.metaModel.getData()["$Annotations"][e.entityType.$Type]}else{i=e.entityType}if(!e["allEntitySet"]){if(a){Q(e)}else{$(e)}}G(e);if(e.addNewCard){X.call(this,e)}this.aVariantNames.forEach(function(t){var r=[],n=1;for(var s in i){if(i.hasOwnProperty(s)&&s.indexOf(t.sVariant)!==-1){if(t.sVariant===".LineItem"){var o={name:P.getText("OVP_KEYUSER_LABEL_LINEITEM_OPTIONS",[n]),value:a?s.substring(1):s,fields:a?N(i,s):k(i,s)};r.push(o);n++}else{r.push({name:a?N(i,s):k(i,s),value:a?s.substring(1):s})}}}if(r.length!==0){e[t.sPath]=r}});if(a){var r=pe(e);e["modelProperties"]=r.map(function(e){return{name:e,value:e}})}else if(e.entityType&&e.entityType.property){e["modelProperties"]=e.entityType.property.map(function(e){return{name:e.name,value:e.name}})}if(!!e.tabs&&e.tabs.length){var s=false,o=e.tabs[e.tabs.length-1].value,l=o.split(" ");e.newViewCounter=j(l);e.defaultViewSelected=e.selectedKey;e.isViewResetEnabled=false;e.aViews=[{text:P&&P.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false}];s=e.tabs.some(function(e){return e.dataPointAnnotationPath});e.tabs.forEach(function(t,a){var i=t.value;if(s&&!t.dataPointAnnotationPath&&t.dataPoint&&t.dataPoint.length){t.dataPointAnnotationPath=t.dataPoint[0].value}if(a+1===e.selectedKey){i=t.value;if(P){i+=" ("+P.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{i+=" (Default view)"}}e.aViews.push({text:i,key:a+1,initialSelectedKey:a+1,isLaterAddedView:false,isViewResetEnabled:false})})}else if(R(e.template,"isViewSwitchSupportedCard")){e.newViewCounter=0;e.aViews=[{text:P.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}]}return e}function J(e){var t=e.getData();if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService("CrossApplicationNavigation").getLinks().done(function(a){var i=[],r={};for(var n=0;n<a.length;n++){i.push(a[n].intent);r[a[n].intent]=a[n].text}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(i).done(function(a){var i=[];for(var n in a){if(a.hasOwnProperty(n)&&a[n].supported===true&&r&&r[n]){i.push({name:r[n],value:n})}}var s=t;if(i.length!==0||i.length!==0){s["links"]=i}e.refresh()}).fail(function(e){w.error(e)})}).fail(function(e){w.error(e)})}}function Z(e){this.oResetButton.setEnabled(e)}function ee(e){this.oSaveButton.setEnabled(e);var t=this.oMessagePopOver.getModel(),a=t.getProperty("/Counter/Error");this.bError=a>0}function te(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function ae(e,t){if(t==="targetUri"){return!te(e)&&(!!e||e==="")}else{return!e.trim().length}}function ie(e){var t=e.getParameter("path"),a="",i,r,n,s,o,l;if(t==="/title"||t==="title"||t==="/viewName"||t==="targetUri"||t==="value"){var d=e.getParameter("value"),p=ae(d,t),c,u=e.getParameter("context");if(t==="/viewName"){c=e.getSource().getProperty("/selectedKey");a=h.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t="/tabs/"+(c-1)+"/value"}if(t==="value"){a=h.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");t=u.getPath()+"/"+t}if(t.indexOf("/title")!==-1){a=h.getText("OVP_KEYUSER_INPUT_ERROR")}if(u&&u.getPath().indexOf("staticContent")!==-1){i=u.getPath().split("/");if(t==="title"){a=h.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE")+(parseInt(i[i.length-1],10)+1)}else if(t==="targetUri"){a=h.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_URL")+" "+(parseInt(i[i.length-1],10)+1)}t=u.getPath()+"/"+t}n=this.oMessagePopOver.getModel();s=n.getProperty("/Messages");o=n.getProperty("/Counter/All");l=n.getProperty("/Counter/Error");if(p){ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName===t){s.splice(r,1);o--;l--;r--}}s.push({type:"Error",title:a,fieldName:t,counter:l+1});o++;l++}else{ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName===t){s.splice(r,1);o--;l--;r--}}}n.setProperty("/Messages",s);n.setProperty("/Counter/All",o);n.setProperty("/Counter/Error",l);n.refresh(true)}else if(t==="/staticContent,title"||t==="/staticContent,targetUri"||t==="/tabs,value"){i=t.split(",");n=this.oMessagePopOver.getModel();s=n.getProperty("/Messages");o=n.getProperty("/Counter/All");l=n.getProperty("/Counter/Error");ee.bind(this)(true);for(r=0;r<s.length;r++){if(s[r].fieldName.indexOf(i[0])!==-1&&s[r].fieldName.indexOf(i[1])!==-1){s.splice(r,1);o--;l--;r--}}n.setProperty("/Messages",s);n.setProperty("/Counter/All",o);n.setProperty("/Counter/Error",l);n.refresh(true)}}function re(){var e=this.oMessagePopOver.getModel();e.setProperty("/Messages",[]);e.setProperty("/Counter/All",0);e.setProperty("/Counter/Error",0);e.setProperty("/Counter/Success",0);e.setProperty("/Counter/Warning",0);e.setProperty("/Counter/Information",0);e.refresh(true)}function ne(){var e=new d({text:"Show more information",href:"",target:"_blank"});var t=new l({type:"{type}",title:"{title}",description:"{description}",subtitle:"{subtitle}",counter:"{counter}",fieldName:"{fieldName}",link:e});this.oMessagePopOver=new o({items:{path:"/Messages",template:t}});var a={Counter:{All:0,Error:0,Success:0,Warning:0,Information:0},Messages:[]};var i=new f(a);this.oMessagePopOver.setModel(i);this.oMessagePopOverButton.setModel(i)}function se(e,t){var a=e.byId("sapOvpSettingsForm");if(a){var i=a.getDomRef();if(i){i.style.width=t}}}function oe(e){var t=this.dialogBox.getContent()[0],a=t.getModel(),i=t.getModel("deviceMediaProperties");switch(e.name){case"S":case"M":i.setProperty("/deviceMedia","Column");se(t,"100%");break;case"L":case"XL":default:i.setProperty("/deviceMedia","Row");se(t,"calc(100% - "+(a.getProperty("/dialogBoxWidth")+1)+"rem)");break}i.refresh(true)}function le(){s.media.detachHandler(oe.bind(this),null,"SettingsViewRangeSet");s.media.removeRangeSet("SettingsViewRangeSet")}function de(){s.media.initRangeSet("SettingsViewRangeSet",[520,760,960],"px",["S","M","L","XL"]);s.media.attachHandler(oe.bind(this),null,"SettingsViewRangeSet");oe.bind(this)(s.media.getCurrentRange("SettingsViewRangeSet"))}function pe(e){var t=e.entitySet,a=e.metaModel,i=a.getObject("/"+t),r=i.$Type,n=a.getObject("/"+r),s=Object.keys(n);var o=s.filter(function(e){return!e.startsWith("$")});return o}var ce={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oMessagePopOverButton:undefined,oMessagePopOver:undefined,oAppDescriptor:undefined,oOriginalAppDescriptor:undefined,oMainComponent:undefined,oAppComponent:undefined,oNewDataSources:{},sApplicationId:"",oi18nModel:undefined,iContentHeightForDialog:38,iContentHeightForDialogWithViewSwitch:33,aVariantNames:r.aVariantNames,aVisiblePropertiesForAnnotation:r.aVisiblePropertiesForAnnotation,getDataSources:T,removeDataSources:E,setDataSources:I,attachWindowResizeHandler:de,detachWindowResizeHandler:le,settingFormWidth:se,addKPINavApplicationName:G,addManifestSettings:z,setVisibilityForFormElements:W,getVisibilityOfElement:H,checkForEmptyString:x,enableResetButton:Z,enableSaveButton:ee,checkClonedCard:K,resetErrorHandling:re,createErrorCard:V,setErrorMessage:L,getQualifier:A,getTrimmedDataURIName:D,addSupportingObjects:q,oVisibility:r.oVisibility,bError:false,bNewStaticLinkListCardFlag:false,bNewKPICardFlag:false,bAddNewCardFlag:false,aListType:r.aListType,aListFlavour:r.aListFlavour,aDataPointSelectionMode:r.aDataPointSelectionMode,aSortOrder:r.aSortOrder,aCardType:r.aCardType,aLinkListFlavour:r.aLinkListFlavour,getDialogBox:function(a){return new Promise(function(i,o){if(!this.dialogBox){this.oSaveButton=new t("settingsSaveBtn",{text:h.getText("save"),type:"Emphasized"});var l=new t("settingsCancelBtn",{text:h.getText("cancelBtn")});this.oResetButton=new t("settingsResetBtn",{text:h.getText("resetCardBtn")});this.oMessagePopOverButton=new t("settingsMessagePopOverBtn",{text:"{/Counter/All}",type:"Emphasized",icon:"sap-icon://message-popup",visible:"{= ${/Counter/All} === 0 ? false : true}"}).addStyleClass("sapOvpSettingsMessagePopOverBtn");this.dialogBox=new e("settingsDialog",{title:h.getText("settingsDialogTitle"),buttons:[this.oMessagePopOverButton,this.oSaveButton,l,this.oResetButton],afterClose:function(e){var t=this.dialogBox.getContent()[0],a=t.byId("sapOvpSettingsLineItemTitle"),i=t.byId("sapOvpSettingsLineItemSubTitle");if(a){a.destroy()}if(i){i.destroy()}this.bNewStaticLinkListCardFlag=false;this.bNewKPICardFlag=false;this.bAddNewCardFlag=false;this.newDataSource=false;this.dialogBox.destroyContent();this.detachWindowResizeHandler()}.bind(this)});this.dialogBox.setBusyIndicatorDelay(0);l.attachPress(function(e){this.dialogBox.close()}.bind(this))}this.oResetButton.setVisible(!this.bNewKPICardFlag);ne.bind(this)();var d=this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag||this.bAddNewCardFlag;var p=a.getComponentInstance(),c=p.getRootControl().getModel("ovpCardProperties"),y;this.oi18nModel=p.getComponentData().i18n;if(this.bNewStaticLinkListCardFlag){y={title:"New Title",subTitle:"New Subtitle",staticContent:[],listFlavor:"standard",template:"sap.ovp.cards.linklist",layoutDetail:c.getProperty("/layoutDetail")}}else if(this.bNewKPICardFlag){var m=p.getComponentData().mainComponent.getView().getModel("JSONModelForSSB").getProperty("/d/results"),C=m[0];y={entitySet:C.ODataEntityset,kpiAnnotationPath:"com.sap.vocabularies.UI.v1.KPI#"+C.KPIQualifier,title:C.GroupTitle,subTitle:C.KPITitle,template:"sap.ovp.cards.charts.analytical",layoutDetail:c.getProperty("/layoutDetail"),selectedKPI:C,errorStatusText:undefined,KPIData:m}}else if(this.bAddNewCardFlag){y={addNewCard:true,newDataSource:false,title:"",subTitle:"",cardType:this.aCardType,aListType:this.aListType,aListFlavour:this.aListFlavour,valueSelectionInfo:"",navigation:this.aDataPointSelectionMode,aLinkListFlavour:this.aLinkListFlavour,authorization:""}}else{y=c.getData()}var P=v({},y);P=q.call(this,P);P=this.addManifestSettings(P);var w=new f(P),I=a.getDomRef().offsetHeight,E=new f(s.system),T=new f({deviceMedia:"Row"}),D=p.getComponentData(),V=D.mainComponent,L=D.appComponent,A=d?"":D.cardId;this.oAppComponent=L;this.oAppDescriptor=V._getCardFromManifest(A);this.sApplicationId=V._getApplicationId();this.oMainComponent=V;this.oOriginalAppDescriptor=L._getOvpCardOriginalConfig(A);E.setDefaultBindingMode("OneWay");P.dialogBoxHeight=I;P.dialogBoxWidth=20;var x=[];if(P.customParams||P.staticParameters){w.setProperty("/addCustomParameters",true);if(P.staticParameters&&Object.keys(P.staticParameters).length){for(var _ in P.staticParameters){x.push({key:_,value:P.staticParameters[_]})}w.setProperty("/aAllStaticParameters",x)}}else{w.setProperty("/addCustomParameters",false)}var k=n._getLayer();if(k===g.Layers.vendor){w.setProperty("/layer",k);if(P.objectStreamCardsSettings&&P.objectStreamCardsSettings.customActions){w.setProperty("/addCustomActions",true)}else{w.setProperty("/addCustomActions",false)}var N=p.getComponentData().appComponent.sId;var M=S.byId(N+"---mainView").getModel("i18n");var F=M.oData.bundle&&M.oData.bundle.oi18nModel;if(Array.isArray(F)&&F[0]&&F[0].aPropertyFiles[0]&&F[0].aPropertyFiles[0].mProperties){var B=F[0].aPropertyFiles[0].mProperties;var K=[];var U=[];var H=[];var W=[];if(!P.addNewCard){var j=r.oI18nKeyValueProperty;for(var _ in j){if(_==="title"){U.push({key:"",value:P[_]})}if(_==="subTitle"){H.push({key:"",value:P[_]})}if(_==="valueSelectionInfo"){W.push({key:"",value:P[_]})}}for(var _ in B){if(B.hasOwnProperty(_)){U.push({key:_,value:B[_]})}}for(var _ in B){if(B.hasOwnProperty(_)){H.push({key:_,value:B[_]})}}for(var _ in B){if(B.hasOwnProperty(_)){W.push({key:_,value:B[_]})}}w.setProperty("/ai18nPropertiesAndTitle",U);w.setProperty("/ai18nPropertiesAndSubTitle",H);w.setProperty("/ai18nPropertiesAndValSelInfo",W)}for(var _ in B){if(B.hasOwnProperty(_)){K.push({key:_,value:B[_]})}}w.setProperty("/ai18nProperties",K)}}if(P.template==="sap.ovp.cards.linklist"||P.template==="sap.ovp.cards.v4.linklist"){w.setProperty("/listFlavorName",h.getText("OVP_KEYUSER_CAROUSEL"))}else{w.setProperty("/listFlavorName",h.getText("OVP_KEYUSER_BARLIST"))}if(P.layoutDetail==="resizable"){var z=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(!P.defaultSpan){P.defaultSpan={};w.setProperty("/defaultSpan/cols",w.getProperty("/cardLayout/colSpan"));w.setProperty("/defaultSpan/rows",z.indexOf(P.template)?w.getProperty("/cardLayout/noOfItems"):w.getProperty("/cardLayout/rowSpan"))}else{if(!P.defaultSpan.rows){w.setProperty("/defaultSpan/rows",z.indexOf(P.template)?w.getProperty("/cardLayout/noOfItems"):w.getProperty("/cardLayout/rowSpan"))}if(!P.defaultSpan.cols){w.setProperty("/defaultSpan/cols",w.getProperty("/cardLayout/colSpan"))}}P.NoOfColumns=[];var G=1,$=6;for(var Q=G;Q<=$;Q++){P.NoOfColumns.push({value:Q})}if(R(P.template,"chart")||P.template==="sap.ovp.cards.linklist"||P.template==="sap.ovp.cards.v4.linklist"){var X=a.getComponentInstance().getComponentData().mainComponent,Z=X.getLayout(),ee=Z.getDashboardLayoutUtil(),te=V._getCardId(a.getId()),ae=ee.calculateCardProperties(te),re=ee._getCardController(te).getView().byId("bubbleText")?43:0,se=ae.headerHeight+ae.dropDownHeight+re+50,oe=Math.ceil(ae.minCardHeight/ee.getRowHeightPx())+1;P.NoOfRows=[];P.NoOfRows.push({name:"None",value:0});P.NoOfRows.push({name:"Small",value:oe});P.NoOfRows.push({name:"Standard",value:Math.ceil((se+480)/ee.getRowHeightPx())+1});if(this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag){w.setProperty("/defaultSpan/cols",1);w.setProperty("/defaultSpan/rows",oe)}}}if(P.addNewCard){w.setProperty("/addViewSwitchCheckBox",false);w.setProperty("/addKPIHeaderCheckBox",false);var le=[];var de=V.oCardsModels;if(de){for(var _ in de){if(_.indexOf("kpi_card_model_")<0){le.push(Object.assign({},{Title:_},de[_]))}}w.setProperty("/datasources",le);w.setProperty("/datasourcesFromManifest",le)}}var pe={};var ce=new f(pe);J(ce);if((P.template==="sap.ovp.cards.linklist"||P.template==="sap.ovp.cards.v4.linklist")&&P.staticContent){Y(w);w.setProperty("/lineItemId","linkListItem--1");w.setProperty("/lineItemIdCounter",P.staticContent.length)}if(P.template==="sap.ovp.cards.charts.analytical"){var ue=V._getCardId(a.getId());w.setProperty("/NewKPICard",this.bNewKPICardFlag);w.setProperty("/selectedKPICardID",ue)}this.setVisibilityForFormElements(P);var fe=new f(this.oVisibility);if(!this.bAddNewCardFlag){w.attachPropertyChange(ie.bind(this))}var he=new b("settingsView",{viewName:"sap.ovp.cards.rta.SettingsDialog",type:u.XML,preprocessors:{xml:{bindingContexts:{ovpCardProperties:w.createBindingContext("/")},models:{ovpCardProperties:w,deviceSystemProperties:E}}}});he.setModel(ce,"staticCardProperties");var ge=h.oResourceModel;he.setModel(w);he.setModel(ge,"ovpResourceModel");he.setModel(T,"deviceMediaProperties");he.setModel(fe,"visibility");if(this.oi18nModel){he.setModel(this.oi18nModel,"@i18n")}this.dialogBox.addContent(he);this.attachWindowResizeHandler();he.loaded().then(function(e){if(!this.bAddNewCardFlag){var t=e.byId("dialogCard");if(!t.getVisible()){t=e.byId("dialogCardNoPreview");var r=he.getModel().getProperty("/template").split("."),n=r[r.length-1],s=h.getText("OVP_KEYUSER_NO_CARD_PREVIEW_MSG",[n]);t.setText(s)}else{t.setWidth(P.dialogBoxWidth+"rem")}}O(a,e,d);this.dialogBox.open();e.getController().settingsResolve=i}.bind(this))}.bind(this))}};ce.fnEditCardHandler=function(e,t){var a=e.getComponentInstance().getComponentData().mainComponent,i=a.getLayout(),r=a.getUIModel();return ce.getDialogBox(e).then(function(t){var s=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_changeCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"editCardSettings",content:t.flexibilityChange}}];if(t.viewSwitchChange){s.push({selectorControl:n.getApp().getLayout(),changeSpecificData:{changeType:"viewSwitch",content:t.viewSwitchChange}})}if(r.getProperty("/containerLayout")==="resizable"){var o=i.getDashboardLayoutModel(),l=i.getDashboardLayoutUtil(),d=a._getCardId(e.getId()),p=o.getCardById(d),c=l.calculateCardProperties(d),u=o.getColCount(),f="C"+u,h=t.flexibilityChange.newAppDescriptor.settings.defaultSpan,g,v=[];if(h&&h.cols){s.forEach(function(e){if(e.changeSpecificData.changeType==="editCardSettings"){var t=e.changeSpecificData.content.oldAppDescriptor;t.settings.defaultSpan={rowSpan:p.dashboardLayout.rowSpan,colSpan:p.dashboardLayout.colSpan,showOnlyHeader:p.dashboardLayout.showOnlyHeader}}});if(h.rows===0){p.dashboardLayout.autoSpan=false;g=Math.ceil((c.headerHeight+2*l.CARD_BORDER_PX)/l.getRowHeightPx())}else{p.dashboardLayout.autoSpan=true;var y=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(y.indexOf(p.template>-1)){p.dashboardLayout.noOfItems=h.rows}else{g=h.rows}}o._arrangeCards(p,{row:g,column:h.cols},"resize",v);o._removeSpaceBeforeCard(v);v.forEach(function(e){var t={};t.dashboardLayout={};t.cardId=e.content.cardId;t.dashboardLayout[f]=e.content.dashboardLayout;s.push({selectorControl:n.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:t}})})}}return s})};ce.fnCloneCardHandler=function(e,t){return a.getPayLoadForCloneCard(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ce.fnAddStaticLinkListCardHandler=function(e,t){ce.bNewStaticLinkListCardFlag=true;return ce.getDialogBox(e).then(function(t){return[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}]})};ce.fnAddKPICardHandler=function(e,t){ce.bNewKPICardFlag=true;return ce.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ce.fnAddNewCardHandler=function(e,t){ce.bAddNewCardFlag=true;return ce.getDialogBox(e).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:t.flexibilityChange}}];if(t.addODataAnnotation){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:t.addODataAnnotation}})}return a})};ce.fnRemoveCardHandler=function(e,t){return new Promise(function(t,i){p.confirm(h.getText("OVP_KEYUSER_MESSAGE_BOX_WARNING_MESSAGE_DELETE"),{actions:[p.Action.DELETE,p.Action.CANCEL],icon:p.Icon.WARNING,title:h.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_DELETE"),initialFocus:p.Action.CANCEL,onClose:function(r){if(r==="DELETE"){t(a.getPayLoadForRemoveCard(e))}else{i(null)}}})}).then(function(t){var a=[{appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_removeCard",content:t.appDescriptorChange}},{selectorControl:n.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"removeCardContainer",content:t.flexibilityChange}}];if(t.removeDataSourceChange){t.removeDataSourceChange.forEach(function(t){a.push({appComponent:e.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_removeDataSource",content:t}})})}return a},function(e){return[]})};return ce},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/cards/charts/OVPChartFormatter", ["sap/viz/library","sap/viz/ui5/format/ChartFormatter","sap/viz/ui5/api/env/Format","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat"],function(t,e,r,a,n){"use strict";var i=10;var o=[{prefix:"CURR",fn:c},{prefix:"axisFormatter",fn:f},{prefix:"0.0%",fn:m},{prefix:"tooltipNoScaleFormatter",fn:u}];var s=["YearMonthDay","YearMonth","MMM","YearQuarter","Quarter","YearWeek","Week"];function c(t,e){var r;if(t===-1){r=a.getCurrencyInstance({style:"short",currencyCode:false})}else{r=a.getCurrencyInstance({style:"short",currencyCode:false,minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function f(t,e){var r;if(t===-1){r=a.getFloatInstance({style:"short"})}else{r=a.getFloatInstance({style:"short",minFractionDigits:t,maxFractionDigits:t?t:1})}return r.format(Number(e))}function m(t,e){var r;if(t===-1){r=a.getPercentInstance({style:"short",minFractionDigits:1,maxFractionDigits:1})}else{r=a.getPercentInstance({style:"short",minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function u(t,e){var r;if(t===-1){r=a.getFloatInstance({minFractionDigits:0,currencyCode:false})}else{r=a.getFloatInstance({style:"short",currencyCode:false,shortRefNumber:0,showScale:false,minFractionDigits:t,maxFractionDigits:t})}return r.format(Number(e))}function l(t,e){if(e.constructor===Date){var r=n.getDateTimeInstance({pattern:t});if(t==="YearMonthDay"){r=n.getDateInstance({style:"medium"})}if(t==="YearMonth"||t==="MMM"){r=n.getDateTimeInstance({format:"MMM"})}if(t==="YearQuarter"||t==="Quarter"){r=n.getDateTimeInstance({format:"QQQ"})}if(t==="YearWeek"||t==="Week"){r=n.getDateTimeInstance({format:"www"})}e=r.format(e,true)}return e}return{registerCustomFormatters:function(){var t=e.getInstance();var a=[];o.forEach(function(t){a.push({name:t.prefix,fn:t.fn.bind(null,2)});for(var e=-1;e<=i;e++){var r="/"+e+"/";a.push({name:t.prefix+r,fn:t.fn.bind(null,e)})}});s.forEach(function(t){a.push({name:t,fn:l.bind(null,t)})});a.forEach(function(e){t.registerCustomFormatter(e.name,e.fn)});r.numericFormatter(t)}}});
sap.ui.predefine("sap/ovp/cards/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/charts/Utils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/Integration/Helpers/AnalyticalCard"],function(e,t,a,r,s,n,i,o){"use strict";return e.extend("sap.ovp.cards.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,r){var l=this;var p=this.getModel();var u=e.mParameters;var d=i({},this.dataSet);if(u){var g=u.select.split(",")}var c=e.getPath().substring(1);var v=-1;if(c){v=c.indexOf("Parameters")}if(v>=0){c=c.substr(0,c.indexOf("Parameters"))}var f=p.getMetaModel();var h=this.getEntitySet();var y=f.getODataEntitySet(h);var m=f.getODataEntityType(y.entityType);var D=[];var b=[];for(var P=0;P<m.property.length;P++){if(m.property[P]["com.sap.vocabularies.Analytics.v1.Measure"]||m.property[P].hasOwnProperty("sap:aggregation-role")&&m.property[P]["sap:aggregation-role"]==="measure"){if(g&&g.indexOf(m.property[P].name)!==-1){D.push(m.property[P].name)}}else{if(g&&g.indexOf(m.property[P].name)!==-1){b.push(m.property[P].name)}}}if(d&&d.results){for(var P=0;P<d.results.length-2;P++){for(var S=0;S<D.length;S++){d.results[0][D[S]]=Number(d.results[0][D[S]])+Number(d.results[P+1][D[S]])}}var C=d.__count-d.results.length;var A={};A.results=[];A.results[0]=d.results[0];var O;if(d.__count>d.results.length){var x=i({},this.aggregateSet);if(x&&x.results&&d.results.length<d.__count){n(D,function(e){x.results[0][D[e]]=String(Number(l.aggregateSet.results[0][D[e]])-Number(A.results[0][D[e]]))});n(b,function(e){x.results[0][b[e]]=s.getText("OTHERS_DONUT",[C+1])});x.results[0].$isOthers=true;O=x.results[0]}}if(O){a.results.push(O)}var T=r.getModel("ovpCardProperties");var E=T&&T.getProperty("/bEnableStableColors");var k=T&&T.getProperty("/colorPalette");var I=m[T&&T.getProperty("/chartAnnotationPath")];if(I.DimensionAttributes.length===1&&E&&r.getVizType()==="donut"&&k&&k instanceof Object&&Object.keys(k).length<=10){var w=I.DimensionAttributes[0].Dimension.PropertyPath;if(k instanceof Array){var M=k.map(function(e){return e.color});var R=M.slice()}else{var V=JSON.parse(JSON.stringify(k))}var B=r.getVizProperties();if(!B){var N={plotArea:{dataPointStyle:{rules:[]}}};B=N}else if(B&&!B.plotArea){B.plotArea={dataPointStyle:{rules:[]}}}if(r&&B&&B.plotArea){if(!B.plotArea.dataPointStyle){B.plotArea.dataPointStyle={rules:[]}}else{B.plotArea.dataPointStyle.rules=[]}var _=f.getODataProperty(m,w);if(_){var j=_["com.sap.vocabularies.Common.v1.Label"]?_["com.sap.vocabularies.Common.v1.Label"].String:w;var z;if(_["com.sap.vocabularies.Common.v1.Text"]){z=_["com.sap.vocabularies.Common.v1.Text"]["Path"]}else if(_["sap:text"]){z=_["sap:text"]}else{z=_}var U=function(e,t,r,s){return{callback:function(e){if(e&&e[j]===r.dimensionValue||r.hasOwnProperty(e[j])){return true}},properties:{color:M&&M[e]||r&&r[s]},displayName:a.results[t][z]}};var H=[];if(k instanceof Array){n(k,function(e,t){for(var r=0;r<a.results.length;r++){if(a.results[r][w]===t.dimensionValue){var s=U(e,r,t);B.plotArea.dataPointStyle["rules"].push(s);R.splice(e,1);if(T&&T.getProperty("/bInsightEnabled")){var n=i({},s);delete n.callback;n.dataContext={};n.dataContext[j]=J;H.push(n)}}}})}else{for(var F=0;F<a.results.length;F++){if(k.hasOwnProperty(a.results[F][w])){var J=a.results[F][w];var L={};L[J]=k[J];var q=U(P,F,L,J);B.plotArea.dataPointStyle["rules"].push(q);delete V[J];if(T&&T.getProperty("/bInsightEnabled")){var Y=i({},q);delete Y.callback;Y.dataContext={};Y.dataContext[j]=J;H.push(Y)}}}}if(x&&x.results&&Array.isArray(x.results)){B.plotArea.dataPointStyle["rules"].push({callback:function(e){if(e&&e[j].lastIndexOf("Others")!=-1){return true}},properties:{color:R&&R.length?M[M.length-1]:Object.keys(V).length&&V[Object.keys(V)[0]]},displayName:x.results[0][w]})}}}r.setVizProperties(B);if(T&&T.getProperty("/bInsightEnabled")){var $=r.getId();var G=i({},B);if(H.length>0){G.plotArea.dataPointStyle={rules:H}}o.setVizPropertyMap($,G)}}}var K=new t;K.setData(a.results);r.setModel(K,"analyticalmodel")},updateBindingContext:function(){var s=this.getBinding("data");var o=this.getBinding("aggregateData");var l=this;if(this.chartBinding==s){return}else{this.chartBinding=s;if(s){var l=this;s.attachEvent("dataReceived",function(e){l.dataSet=e&&e.getParameter("data");l.oDataClone=i({},l.dataSet);if(l.getChartType()=="donut"&&l.getBinding("aggregateData")!==undefined){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var o=new t;if(l.dataSet){var p=l.getEntitySet();var u=s.getModel();var d=a.cacheODataMetadata(u);var g=d[p];var c=a.getSemanticProperties(g);var v=c&&c.aTimeAxisProperties||[];var f=c&&c.oTimeAxisPropertiesAndSemantics||{};if(v&&v.length){if(l.dataSet.results&&l.dataSet.results.length){n(l.dataSet.results,function(e,t){n(v,function(e,a){if(t.hasOwnProperty(a)){var s=t[a];var n,i,o,l,p,u,d;switch(f[a]["sap:semantics"]){case"yearmonth":n=parseInt(s.substr(0,4),10);i=s.substr(4);p=parseInt(i,10)-1;t[a]=new Date(Date.UTC(n,p));break;case"yearquarter":n=parseInt(s.substr(0,4),10);o=s.substr(4);l=parseInt(o,10)*3-2;p=l-1;t[a]=new Date(Date.UTC(n,p));break;case"yearweek":n=parseInt(s.substr(0,4),10);u=s.substr(4);var d=1+(parseInt(u,10)-1)*7;t[a]=new Date(Date.UTC(n,0,d));break;case"fiscalyearperiod":var g="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod";var c=r.getFormattedFiscalData(s,g);t[a]=c;break;default:break}}})})}}o.setData(l.dataSet.results);l.oDataClone=i({},l.dataSet)}l.getContent().setModel(o,"analyticalmodel");l.mergeDatasets(s,l.oDataClone,l.getContent())}})}e.prototype.updateBindingContext.apply(this,arguments)}if(this.chartAggrBinding==o){return}else{this.chartAggrBinding=o;if(o){var l=this;o.attachEvent("dataReceived",function(e){l.aggregateSet=e&&e.getParameter("data");if(l.getChartType()=="donut"){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.oDataClone=i({},l.dataSet);l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var a=new t;a.setData(l.aggregateSet.results);l.getContent().setModel(a,"analyticalmodel")}})}e.prototype.updateBindingContext.apply(this,arguments)}}})});
sap.ui.predefine("sap/ovp/cards/charts/Utils", ["sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/charts/config"],function(e,t,r,a){"use strict";var i={};var n={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:'Analytic cards require valid "chartAnnotationPath" '+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var o={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var s=new r("OVP.charts.Utils");function u(e,t){if(!t){return""}var r=e.getSetting("ovpCardProperties");if(!r){return""}var a=r.oData;if(!a){return""}var i=a&&a[t]?a[t]:"";return i===""?"":i.split("#")[1]}i.getAllColumnTexts=function(e){return l("sap:text",e)};i.formDimensionPath=function(e){var t="{"+e+"}";var r=this.getModel("ovpCardProperties").getProperty("/entityType");if(!r){return t}var a=f(r);if(!a||!a[e]){return t}var n=a[e];if(n=="Edm.DateTime"){return"{path:'"+e+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}var o=i.getAllColumnTexts(r);if(!o){return t}t="{"+(o[e]||e)+"}";return t};function l(e,t){var r={};var a=t.property;for(var i=0,n=a.length;i<n;i++){if(a[i].hasOwnProperty(e)&&e=="com.sap.vocabularies.Common.v1.Label"){r[a[i].name]=a[i][e].String}else if(a[i].hasOwnProperty(e)){r[a[i].name]=a[i][e]}else{r[a[i].name]=a[i].name}}return r}function p(e){return l("com.sap.vocabularies.Common.v1.Label",e)}function f(e){return l("type",e)}var c={};i.LineChart=function(){function t(t,i,n){var o=r(t,n).split(",");var s=a(t,i).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var p=true;var f=t.getSetting("ovpCardProperties").getProperty("/navigation");if(f=="chartNav"){p=false}var p=p?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+u.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+l.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+p+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];e(r,function(e,t){n.push(i[t.Measure.PropertyPath]||t.Measure.PropertyPath)});return n.join(",")}r.requiresIContext=true;function a(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var o=[];var s;var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){l=i[t.Dimension.PropertyPath];o.push(l?l:t.Dimension.PropertyPath)}});if(o.length<1){l=i[r[0].Dimension.PropertyPath];o.push(l?l:r[0].Dimension.PropertyPath)}s=u(t,n.CHART_QUALIFIER_KEY);c[s]=o;return o.join(",")}a.requiresIContext=true;function i(t,r){var a=[];var i;var o=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!o){return""}var s=p(o);var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){l=s[t.Dimension.PropertyPath];a.push(l?l:t.Dimension.PropertyPath)}});i=u(t,n.CHART_QUALIFIER_KEY);a=a.filter(function(e){if(!c[i]){return true}return e!==c[i][0]});return a.join(",")}i.requiresIContext=true;function o(e,t){return i(e,t)!==""}o.requiresIContext=true;return{getVizProperties:t,getValueAxisFeed:r,getCategoryAxisFeed:a,getColorFeed:i,testColorFeed:o}}();i.BubbleChart=function(){function t(t,r,n){var o=a(t,n).split(",");var s=i(t,n).split(",");var u=[];e(o,function(e,t){u.push(t)});var l=[];e(s,function(e,t){l.push(t)});var p=true;var f=t.getSetting("ovpCardProperties").getProperty("/navigation");if(f=="chartNav"){p=false}var p=p?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+u.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+l.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+p+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var a;if(!t||!t.getSetting||!(a=t.getSetting("ovpCardProperties"))){return[""]}var i=a.getProperty("/entityType");if(!i){return[""]}var n=p(i);var o=[null,null,null];var s=["Axis1","Axis2","Axis3"];e(r,function(e,t){if(s.indexOf(t.Role.EnumMember.split("/")[1])>-1){if(o[0]===null){o[0]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[1]===null){o[1]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[2]==null){o[2]=n[t.Measure.PropertyPath]||t.Measure.PropertyPath}}});return o}r.requiresIContext=true;function a(e,t){return r(e,t)[0]}a.requiresIContext=true;function i(e,t){return r(e,t)[1]}i.requiresIContext=true;function n(e,t){return r(e,t)[2]}n.requiresIContext=true;function o(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){o=i[t.Dimension.PropertyPath];n.push(o?o:t.Dimension.PropertyPath)}});return n.join(",")}o.requiresIContext=true;function s(t,r){var a=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!a){return""}var i=p(a);var n=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){o=i[t.Dimension.PropertyPath];n.push(o?o:t.Dimension.PropertyPath)}});return n.join(",")}s.requiresIContext=true;function u(e,t){return o(e,t)!==""}u.requiresIContext=true;function l(e,t){return s(e,t)!==""}l.requiresIContext=true;return{getVizProperties:t,getMeasurePriorityList:r,getValueAxisFeed:a,getValueAxis2Feed:i,getBubbleWidthFeed:n,getColorFeed:o,getShapeFeed:s,testColorFeed:u,testShapeFeed:l}}();i.validateMeasuresDimensions=function(e,t){var r=null;var a=null;if(!e.getDataset()){s.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false}r=e.getDataset().getMeasures();a=e.getDataset().getDimensions();switch(t){case"Bubble":if(r.length!==3||a.length<1||!r[0].getName()||!r[1].getName()||!r[2].getName()||!a[0].getName()){s.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false}break;case"Donut":if(r.length!==1||a.length!==1||!r[0].getName()||!a[0].getName()){s.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false}break;case"Line":if(r.length<1||a.length<1||!r[0].getName()||!a[0].getName()){s.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false}break}return true};i.getSortAnnotationCollection=function(e,t,r){if(t&&t.SortOrder&&t.SortOrder.Path&&t.SortOrder.Path.indexOf("@")>=0){var a=t.SortOrder.Path.split("@")[1];var i=e.getServiceAnnotations()[r.entityType];return i[a]}return t.SortOrder};i.oFullConfig=null;i.getConfig=function(e){if(!this.oFullConfig){try{this.oFullConfig=a.getChartsConfiguration()}catch(e){s.error(o.CONFIG_LOAD_ERROR+e)}}if(!e){return this.oFullConfig}var r;try{r=e.EnumMember.split("/")[1]}catch(e){s.error(o.CARD_ERROR+o.INVALID_CHARTTYPE+o.ANNO_REF);return{}}if(!this.oFullConfig[r]){s.error(o.INVALID_CONFIG+r+" "+o.CONFIG_JSON);return{}}var i;if((i=this.oFullConfig[r].reference)&&this.oFullConfig[i]){var n=t({},this.oFullConfig[i]);this.oFullConfig[r]=n}return this.oFullConfig[r]};i.oCachedMetaModel={};i.cacheODataMetadata=function(t){if(!t){s.error(o.CARD_ERROR+o.CACHING_ERROR);return}var r=this.oCachedMetaModel[t.getId()];if(!r){r={};var a=t.getMetaModel();var i=a&&a.getODataEntityContainer();var n,u;e(i.entitySet,function(t,i){n=a.getODataEntityType(i.entityType);u={};e(n.property,function(e,t){u[t.name]=t});r[i.name]=u});this.oCachedMetaModel[t.getId()]=r}return r};i.getSemanticProperties=function(t){var r={aTimeAxisProperties:[],oTimeAxisPropertiesAndSemantics:{},propertyType:""};if(t){var a=Object.keys(t);if(a&&a.length){e(a,function(e,a){if(t[a]["type"]==="Edm.String"){if(t[a]["sap:semantics"]==="yearmonth"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearmonth"};r.propertyType="yearmonth"}else if(t[a]["sap:semantics"]==="yearquarter"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearquarter"};r.propertyType="yearquarter"}else if(t[a]["sap:semantics"]==="yearweek"||t[a]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"yearweek"};r.propertyType="yearweek"}else if(t[a]["sap:semantics"]==="fiscalyearperiod"||t[a]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){r.aTimeAxisProperties.push(a);r.oTimeAxisPropertiesAndSemantics[a]={"sap:semantics":"fiscalyearperiod"}}}})}}return r};i.isDataSetEmpty=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){return e.getSource().getCurrentContexts().length===0}};return i},true);
sap.ui.predefine("sap/ovp/cards/charts/VizAnnotationManager", ["sap/ui/thirdparty/jquery","sap/ovp/cards/charts/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/cards/Integration/Helpers/AnalyticalCard"],function(jQuery,e,t,r,a,i,n,o,s,l,u,f,c,v,p,m,g,A,d,P,h){"use strict";var E={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut"};var C={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var _=["year","yearweek","yearmonth","yearquarter"];var y=[E.COLUMNSTACKED_CHARTTYPE,E.DONUT_CHARTTYPE,E.COLUMN_CHARTTYPE,E.BAR_CHARTTYPE,E.VERTICALBULLET_CHARTTYPE,E.LINE_CHARTTYPE,E.COMBINATION_CHARTTYPE,E.BUBBLE_CHARTTYPE];var T=[E.COLUMNSTACKED_CHARTTYPE];var I;var N=new d("OVP.charts.VizAnnotationManager");function R(a,i,n,o,s,l,u){var f="{";if(!a||!a.getSetting("ovpCardProperties")){N.error(C.ANALYTICAL_CONFIG_ERROR);f+="}";return f}var c=a.getSetting("dataModel");var v;if(u&&u.EnumMember){v=u.EnumMember.split("/");if(v&&v[1]==="Donut"){c.setDefaultCountMode(t.Inline)}if(v&&v[1]!="Donut"&&s===undefined){return null}}var p=[];var m=[];var d=[];var P=[];var h=[];var _=[];var y=[];var T=n&&n.Parameters;var I=o&&o.SortOrder;var R=o&&o.MaxItems,S=null;var O;var M;var L;var V=null;var Y=E.TEXT_KEY;var x=E.TEXT_KEY_V4;var U=E.UNIT_KEY;var F=E.UNIT_KEY_V4_ISOCurrency;var K=E.UNIT_KEY_V4_Unit;var k={};if(R){S=R.Int32?R.Int32:R.Int}if(S){if(S==="0"){N.error("OVP-AC: Analytic card Error: maxItems is configured as "+S);f+="}";return f}if(!/^\d+$/.test(S)){N.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");f+="}";return f}}var H=a.getSetting("ovpCardProperties"),z=H.getProperty("/parameters"),G=H.getProperty("/metaModel");T=T||!!z;if(T){var j=r.resolveParameterizedEntitySet(c,i,n,z);f+="path: '"+j+"'"}else{f+="path: '/"+i.name+"'"}var W=[];V=a.getSetting("ovpCardProperties").getProperty("/entitySet");if(!c||!V){return f}var X=se(c,V);var q=a.getSetting("ovpCardProperties").getProperty("/cardLayout");var Q=1,Z;var J=B();var $;var ee;if(s&&q&&q.colSpan&&q.colSpan>1){Z=q.colSpan-Q;for(var te in J){if((ee=J[te].reference)&&J[ee]){var re=A({},J[ee]);J[te]=re}if(te===v[1]||J[te].time&&J[te].time.type===v[1].toLowerCase()){$=J[te];break}}var ae=w(s,$,c,V);if(ae){$=$.time}else{$=$.default}var ie=a.getSetting("ovpCardProperties").getProperty("/dataStep");if(!ie){if($.resize&&$.resize.hasOwnProperty("dataStep")&&!isNaN($.resize.dataStep)){ie=$.resize.dataStep}}ie=parseInt(ie,10);if(Z>0&&ie&&!isNaN(ie)){S=parseInt(S,10)+ie*Z}}if(n){var H=a.getSetting("ovpCardProperties");W=r.getFilters(H,n)}if(W.length>0){f+=", filters: "+JSON.stringify(W)}if(I){var ne=o.SortOrder;if(!ne.length){ne=e.getSortAnnotationCollection(c,o,i)}if(ne.length<1){N.warning(C.CARD_WARNING+C.SORTORDER_WARNING)}else{var oe="";var le;var ue;var fe;for(var ce=0;ce<ne.length;ce++){le=ne[ce];fe=le.Property.PropertyPath;y.push(fe);if(typeof le.Descending==="undefined"){ue="true"}else{var ve=le.Descending.Bool||le.Descending.Boolean;if(!ve){N.warning(C.CARD_WARNING+C.BOOLEAN_ERROR);ue="true"}else{ue=ve.toLowerCase()==="true"?"true":"false"}}oe=oe+"{path: '"+fe+"',descending: "+ue+"},"}f+=", sorter: ["+oe.substring(0,oe.length-1)+"]"}}var pe=a.getSetting("ovpCardProperties").getProperty("/entityType");g(l,function(e,t){O=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=pe[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){var a=r.ForecastValue.PropertyPath||r.ForecastValue.Path;h.push(a);if(X&&X[a]){var i;if(X[a][F]){i=X[a][F].Path?X[a][F].Path:undefined}else if(X[a][K]){i=X[a][K].Path?X[a][K].Path:undefined}else if(X[a][U]){i=X[a][U]}if(i){if((h?Array.prototype.indexOf.call(h,i):-1)===-1){h.push(i)}}}}if(r.TargetValue&&(r.TargetValue.PropertyPath||r.TargetValue.Path)){var n=r.TargetValue.PropertyPath||r.TargetValue.Path;h.push(n);if(X&&X[n]){var i;if(X[n][F]){i=X[n][F].Path?X[n][F].Path:undefined}else if(X[n][K]){i=X[n][K].Path?X[n][K].Path:undefined}else if(X[n][U]){i=X[n][U]}if(i){if((h?Array.prototype.indexOf.call(h,i):-1)===-1){h.push(i)}}}}}h.push(O);if(X&&X[O]){if(X[O][x]){if(X[O][x].String&&O!=X[O][x].String){h.push(X[O][x].String?X[O][x].String:O)}else if(X[O][x].Path&&O!=X[O][x].Path){h.push(X[O][x].Path?X[O][x].Path:O)}}else if(X[O][Y]&&O!=X[O][Y]){h.push(X[O][Y]?X[O][Y]:O)}}if(X&&X[O]){var i;if(X[O][F]){i=X[O][F].Path?X[O][F].Path:undefined}else if(X[O][K]){i=X[O][K].Path?X[O][K].Path:undefined}else if(X[O][U]){i=X[O][U]}if(i){if((h?Array.prototype.indexOf.call(h,i):-1)===-1){h.push(i)}}}});g(s,function(e,t){O=t.Dimension.PropertyPath;p.push(O);if(X&&X[O]){if(X[O][x]){if(X[O][x].String&&O!=X[O][x].String){p.push(X[O][x].String?X[O][x].String:O)}else if(X[O][x].Path&&O!=X[O][x].Path){L=X[O][x].Path;var r=L.split("/");if(r.length>1){M=D(G,pe,L);if(M!==""){p.push(L);m.push(M);P=b(G,pe,L);if(P.length>0){d=d.concat(P)}}}else{p.push(L?L:O)}}}else if(X[O][Y]&&O!=X[O][Y]){p.push(X[O][Y]?X[O][Y]:O)}}});if(d.length>0){var me=0;while(me<d.length){if(p.indexOf(d[me])!==-1){d.splice(me,1)}else{me++}}}if(h.length>0){g(h,function(e,t){k[t]=true})}if(p.length>0){g(p,function(e,t){k[t]=true})}f+=", parameters: {select:'"+[].concat(p,h).join(",");var ge=G.getODataEntityType(i.entityType);if(ge){var Ae=r.getRequestFields(o);if(Ae&&Ae.length>0){g(Ae,function(e,t){if(!k.hasOwnProperty(t)){k[t]=true;_.push(t)}});if(_.length>0){f+=","+_.join(",")}}}if(y.length>0){var de=[];g(y,function(e,t){if(!k.hasOwnProperty(t)){de.push(t)}});if(de.length>0){f+=","+de.join(",")}}if(m.length>0){f+="'"+","+" expand:'"+m.join(",")}var Pe=r.checkFilterPreference(a.getSetting("ovpCardProperties"));if(Pe){f+="', custom: {cardId: '"+a.getSetting("ovpCardProperties").getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{f+="', custom: {_requestFrom: 'ovp_internal'}}"}if(v&&v[1]==="Donut"&&s===undefined){f+=", length: 1"}else if(v&&v[1]==="Donut"&&s&&S){f+=", length: "+(parseInt(S,10)+1)}else if(S){f+=", length: "+S}f+="}";return f}R.requiresIContext=true;function D(e,t,r){var a="";var i=r.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(a){a=a+"/"}a=a+i[n]}else{return a}}}return a}function b(e,t,r){var a=[];var i=[];var n;var o=r.split("/");if(o.length>1){for(var s=0;s<o.length-1;s++){var l=e.getODataAssociationEnd(t,o[s]);if(l){t=e.getODataEntityType(l.type);if(t){i=t&&t.key&&t.key.propertyRef;for(var u=0;u<i.length;u++){n=o[s]+"/"+i[u].name;a.push(n)}}}}}return a}function S(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){r=true;a=e}}if(r===true){return a}else{N.warning(C.CARD_WARNING+C.INVALID_FORECAST);return undefined}}function O(e,t){var r=false;var a;if(e.DataPoint&&e.DataPoint.AnnotationPath){var i=t[e.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){r=true;a=e}}if(r===true){return a}else{N.warning(C.CARD_WARNING+C.INVALID_TARGET);return undefined}}function M(e,t){var r;g(t,function(t,a){if(a.name===e){if(a["com.sap.vocabularies.Common.v1.Label"]){r=a["com.sap.vocabularies.Common.v1.Label"].String?a["com.sap.vocabularies.Common.v1.Label"].String:a["com.sap.vocabularies.Common.v1.Label"].Path}else if(a["sap:label"]){r=a["sap:label"]}return false}});return r}function L(e,t){var r=true;if(t==="line"||t==="column"||t==="bar"){g(e,function(e,t){if(t.getUid()==="valueAxis"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;N.warning(C.CARD_WARNING+C.INVALID_DIMMEAS);return false}}})}else if(t==="vertical_bullet"){g(e,function(e,t){if(t.getUid()==="actualValues"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){r=false;N.warning(C.CARD_WARNING+C.INVALID_DIMMEAS);return false}}})}if(r===true){return true}}function V(e,t,r){var a=E.TYPE_KEY;if(!e||!e[t]||!e[t][a]){return r}var i=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var n=e[t][a];if((i?Array.prototype.indexOf.call(i,n):-1)!==-1){return Number(r)}return r}function Y(e){if(e){return e}return""}function x(e,t){var r=e.getModel();var a=e.getVizType();if(a!="line"&&a!="bubble"){return}if(!t){t=a==="line"?"categoryAxis":"valueAxis"}var i=e.getModel("ovpCardProperties").getProperty("/entitySet");if(!r||!i){return}var n=se(r,i);var o=e.getFeeds();for(var s=0;s<o.length;s++){if(o[s].getUid()===t){var l=o[s].getValues();if(!l){return}for(var u=0;u<l.length;u++){if(n[l[u][E.TYPE_KEY]]!="Edm.DateTime"){return}}e.setVizProperties({categoryAxis:{title:{visible:false}}});var f=e&&e.getModel("ovpCardProperties");if(f&&f.getProperty("/bInsightEnabled")){var c=e&&e.getId();h.setVizPropertyMap(c,{categoryAxis:{title:{visible:false}}})}return}}}function U(e,t,r,a,i,n){a=typeof a==="undefined"?false:a;var o=false;var s;if(!e&&a){N.error(i+C.CARD_ERROR+r+C.IS_MANDATORY);return o}if(!e){N.warning(i+C.CARD_WARNING+r+C.IS_MISSING);o=true;return o}s=t[e];if(!s||typeof s!=="object"){var l=a?N.error:N.warning;l(i+C.CARD_ERROR+"in "+r+". ("+e+" "+C.NOT_WELL_FORMED);return o}if(n&&n==="sap.ovp.cards.charts.analytical.analyticalChart"&&r==="Chart Annotation"&&(!s.ChartType||!s.ChartType.EnumMember)){N.error(i+C.CARD_ERROR+C.MISSING_CHARTTYPE+C.CHART_ANNO);return o}o=true;return o}function F(e){var t=false;if(!e){return t}var r;var a;var i;var n;var o;var s;var l;var u="";var f;var c=e.getView();if(c){u="["+c.getId()+"] "}if(!(f=e.getCardPropertiesModel())){N.error(u+C.CARD_ERROR+"in "+C.CARD_CONFIG+C.NO_CARD_MODEL);return t}l=f.getProperty("/entityType");if(!l||P(l)){N.error(u+C.CARD_ERROR+"in "+C.CARD_ANNO);return t}r=f.getProperty("/selectionAnnotationPath");a=f.getProperty("/chartAnnotationPath");n=f.getProperty("/presentationAnnotationPath");o=f.getProperty("/identificationAnnotationPath");s=f.getProperty("/dataPointAnnotationPath");i=f.getProperty("/contentFragment");t=U(r,l,"Selection Variant",false,u);t=U(a,l,"Chart Annotation",true,u,i)&&t;t=U(n,l,"Presentation Variant",false,u)&&t;t=U(o,l,"Identification Annotation",true,u)&&t;t=U(s,l,"Data Point",false,u)&&t;return t}function K(e,t,r){}function B(t){return e.getConfig(t)}function w(e,t,r,a){var i=false;var n;var o;var s;var l;var u;var f;if(!t.time||P(t.time)){return i}if(!e){return i}for(var c=0;c<e.length;c++){if(!e[c].Dimension||!(o=e[c].Dimension.PropertyPath)){return i}n=se(r,a);if(n&&n[o]){s=n[o][E.TYPE_KEY];l=n[o][E.DISPLAY_FORMAT_KEY];u=n[o][E.SEMANTICS_KEY];f=n[o]["com.sap.vocabularies.Common.v1.IsCalendarYear"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||n[o]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]}if(s&&s.lastIndexOf("Edm.Date",0)===0){if(s.toLowerCase()==="edm.datetime"){if(l&&l.toLowerCase()==="date"){i=true}}else{i=true}}if(s==="Edm.String"&&(f||u&&_.indexOf(u)>-1)){i=true}if(i){e.unshift(e.splice(c,1)[0]);break}}return i}function k(e,t,r){var a="";var i=B(t);var n,o;if(!i){return a}a=i.default.type;n=e.getSetting("dataModel");o=e.getSetting("ovpCardProperties").getProperty("/entitySet");if(w(r,i,n,o)){a=i.time.type}return a}k.requiresIContext=true;function H(e,t,r){if(!e.length){return}var a=r==="dimension"?"Dimension":"Measure";var i=[];g(e,function(e,t){if(!t||!t[a]||!t[a].PropertyPath){N.error(C.INVALID_CHART_ANNO);return false}i.push(t[a].PropertyPath)});var n=jQuery.map(t.feeds,function(e){if(e.type===r){if(e.role){return e.role.split("|")}return[]}});n=jQuery.grep(n,function(e,t){return(n?Array.prototype.indexOf.call(n,e):-1)===t}).join(", ");N.error(C.CARD_ERROR+C.INVALID_REDUNDANT+r+"(s) "+i.join(", ")+". "+C.ALLOWED_ROLES+t.type+C.CHART_IS+n)}function z(e,t){var r;if(e){if(e.String){r=e.String}else if(e.Boolean||e.Bool){r=G(e)}else{r=j(e,t)}}return r}function G(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function j(e,t){var r;if(e){if(e.String){r=Number(e.String)}else if(e.Int){r=Number(e.Int)}else if(e.Decimal){r=Number(e.Decimal)}else if(e.Double){r=Number(e.Double)}else if(e.Single){r=Number(e.Single)}}if(t){var i=a.getFloatInstance({style:"short",minFractionDigits:2,maxFractionDigits:2});if(r){r=i.format(Number(r))}}return r}function W(e,t){function a(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return z(e)}}else{return""}}var i=e[e.measureNames];if(t&&t.CriticalityCalculation&&t.CriticalityCalculation.ImprovementDirection){var n=t.CriticalityCalculation.ImprovementDirection.EnumMember;var o=a(t.CriticalityCalculation.DeviationRangeLowValue);var s=a(t.CriticalityCalculation.DeviationRangeHighValue);var l=a(t.CriticalityCalculation.ToleranceRangeLowValue);var u=a(t.CriticalityCalculation.ToleranceRangeHighValue);return r._calculateCriticalityState(i,n,o,s,l,u,r.criticalityConstants.StateValues)}else{var f=t.Criticality.EnumMember;var c=f?f.split("/"):[];if(c){return c[1]}}}function X(e,t,r){var a,i;g(t,function(t,r){if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].String===e.measureNames){a=r.name;return false}else if(r["com.sap.vocabularies.Common.v1.Label"]&&r["com.sap.vocabularies.Common.v1.Label"].Path===e.measureNames){a=r.name;return false}else if(r["sap:label"]===e.measureNames){a=r.name;return false}});g(r,function(e,t){if(t.Measure.PropertyPath===a){if(!t.DataPoint||!t.DataPoint.AnnotationPath){return false}i=t.DataPoint.AnnotationPath;return false}});return i}function q(e,t){if(e){if(e.Path){return e.Path}else{return z(e,t)}}else{return""}}function Q(e,t){function r(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var a=false;g(e,function(e,i){if(i.DataPoint&&i.DataPoint.AnnotationPath){var n=t[i.DataPoint.AnnotationPath.substring(1)];if(n&&n.CriticalityCalculation&&n.CriticalityCalculation.ImprovementDirection&&n.CriticalityCalculation.ImprovementDirection.EnumMember){var o=n.CriticalityCalculation.ImprovementDirection.EnumMember;var s=q(n.CriticalityCalculation.DeviationRangeLowValue);var l=q(n.CriticalityCalculation.DeviationRangeHighValue);var u=q(n.CriticalityCalculation.ToleranceRangeLowValue);var f=q(n.CriticalityCalculation.ToleranceRangeHighValue);if(r(o,"Minimize")||r(o,"Minimizing")){if(f&&l){a=true;return false}else{N.warning(C.CARD_WARNING+C.INVALID_CRITICALITY)}}else if(r(o,"Maximize")||r(o,"Maximizing")){if(u&&s){a=true;return false}else{N.warning(C.CARD_WARNING+C.INVALID_CRITICALITY)}}else if(r(o,"Target")){if(u&&s&&f&&l){a=true;return false}else{N.warning(C.CARD_WARNING+C.INVALID_CRITICALITY)}}}else if(n&&n.Criticality){a=true;return false}else{N.warning(C.CARD_WARNING+C.INVALID_IMPROVEMENT_DIR)}}});if(a===true&&e.length>1){N.warning(C.CARD_WARNING+C.INVALID_SEMANTIC_MEASURES)}return a}function Z(e,t,r,a){function i(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var n=[null,null];var o=true;var s=e.Measure.PropertyPath;if(r[s]){if(r[s][E.LABEL_KEY_V4]){s=oe(r[s][E.LABEL_KEY_V4].String?r[s][E.LABEL_KEY_V4].String:r[s][E.LABEL_KEY_V4].Path,a,r)}else if(r[s][E.LABEL_KEY]){s=r[s][E.LABEL_KEY]}else if(s){s=s}}var l=e.DataPoint.AnnotationPath;var u=t[l.substring(1)];if(!u.CriticalityCalculation||!u.CriticalityCalculation.ImprovementDirection||!u.CriticalityCalculation.ImprovementDirection.EnumMember){return n}var f=u.CriticalityCalculation.ImprovementDirection.EnumMember;var c=q(u.CriticalityCalculation.DeviationRangeLowValue,o);var v=q(u.CriticalityCalculation.DeviationRangeHighValue,o);var m=q(u.CriticalityCalculation.ToleranceRangeLowValue,o);var g=q(u.CriticalityCalculation.ToleranceRangeHighValue,o);if(i(f,"Minimize")||i(f,"Minimizing")){if(g&&v){n[0]=p.getText("MINIMIZING_LESS",[s,g]);n[1]=p.getText("MINIMIZING_MORE",[s,v]);n[2]=p.getText("MINIMIZING_CRITICAL",[g,s,v])}}else if(i(f,"Maximize")||i(f,"Maximizing")){if(m&&c){n[0]=p.getText("MAXIMISING_MORE",[s,m]);n[1]=p.getText("MAXIMISING_LESS",[s,c]);n[2]=p.getText("MAXIMIZING_CRITICAL",[c,s,m])}}else if(i(f,"Target")){if(m&&c&&g&&v){n[0]=p.getText("TARGET_BETWEEN",[m,s,g]);n[1]=p.getText("TARGET_AROUND",[s,c,v]);n[2]=p.getText("TARGET_CRITICAL",[c,s,m,g,v])}}return n}function J(e,t,r){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var a=r[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(a&&a.ValueFormat){i=a.ValueFormat}else if(a&&a.NumberFormat){i=a.NumberFormat}if(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int){n=i.NumberOfFractionalDigits.Int;if(e<Number(n)){e=Number(n)}}}return e}function $(e,t,r){if(t&&t.DataPoint&&t.DataPoint.AnnotationPath){var a=r[t.DataPoint.AnnotationPath.substring(1)];var i,n;if(a&&a.ValueFormat){i=a.ValueFormat}else if(a&&a.NumberFormat){i=a.NumberFormat}if(i){if(i.ScaleFactor&&i.ScaleFactor.Decimal){n=Number(i.ScaleFactor.Decimal)}else if(i.ScaleFactor&&i.ScaleFactor.Int){n=Number(i.ScaleFactor.Int)}if(!isNaN(n)){if(e===undefined){e=Number(n)}else if(e>Number(n)){e=Number(n)}}}}return e}function ee(e,t){if(e&&e[t]&&(e[t]["Org.OData.Measures.V1.ISOCurrency"]||e[t][E.SEMANTICS_KEY]&&e[t][E.SEMANTICS_KEY]===E.CURRENCY_CODE)){return true}return false}function te(e,t,r){if(e[t[r].PropertyPath][E.EDM_TYPE]===E.EDM_INT32){return true}return false}function re(e,t,r){if(e[t[r].PropertyPath][E.EDM_TYPE]===E.EDM_INT64){return true}return false}function ae(e,t,a,i){var n,s,v,m,d;var P,_,R,D,b,V=false;var Y;var x,U,F;var K,k=[],z=[];var G;var j;var q=i&&i.getView();var ae,ne;var fe=q&&q.getModel("ui");var ce=fe&&fe.getProperty("/chartSettings");n=e.getModel("ovpCardProperties");if(l.checkIfAPIIsUsed(i)){V=n&&n.getData()&&n.getData().showDataLabel}d=ce?ce.showDataLabel:V;P=e.getVizType();_=B();for(var ve in _){if((j=_[ve].reference)&&_[j]){var pe=A({},_[j]);_[ve]=pe}if(_[ve].default.type===P||_[ve].time&&_[ve].time.type===P){R=_[ve];break}}if(!R){N.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.CARD_CONFIG_ERROR+P+" "+C.CARD_CONFIG_JSON);return}if(!n){N.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.NO_CARD_MODEL);return}var me=e.getModel();var ge=n.getProperty("/entitySet");if(!me||!ge){return}s=n.getProperty("/entityType");if(!s){N.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}var Ae=se(me,ge);v=n.getProperty("/chartAnnotationPath");if(!v||!(m=s[v])){N.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}if(!(D=m.DimensionAttributes)||!D.length){N.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.DIMENSIONS_MANDATORY);return}var de;if(!(b=m.MeasureAttributes)||!b.length){N.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return}else{var Pe=b[0].DataPoint?s[b[0].DataPoint.AnnotationPath.substring(1)]:null;var _e=Pe&&Pe.ValueFormat&&Pe.ValueFormat.NumberOfFractionalDigits&&Pe.ValueFormat.NumberOfFractionalDigits.Int;de=_e?_e:0}G=w(D,R,me,ge);if(G){R=R.time}else{R=R.default}var ye=n.getProperty("/ChartProperties")||n.getProperty("/chartProperties");if(n&&n.getProperty("/tabs")&&ye===undefined){ae=q.byId("ovp_card_dropdown");ne=parseInt(ae.getSelectedKey(),10);ye=n.getProperty("/tabs")&&n.getProperty("/tabs")[ne-1]&&(n.getProperty("/tabs")[ne-1]["ChartProperties"]||n.getProperty("/tabs")[ne-1]["chartProperties"])}var Te=false;var Ie=de>0?"tooltipNoScaleFormatter/"+de.toString()+"/":"tooltipNoScaleFormatter/-1/";var Ne=new o({formatString:Ie});Ne.connect(e.getVizUid());Ne.connect(e.getVizUid());e._oOvpVizFrameTooltip=Ne;[R.dimensions,R.measures].forEach(function(e,t){var r=t?b:D;var a=t?"measure(s)":"dimension(s)";if(e.min&&r.length<e.min){N.error(C.CARD_ERROR+"in "+P+" "+C.CARD_LEAST+e.min+" "+a);Te=true}if(e.max&&r.length>e.max){N.error(C.CARD_ERROR+"in "+P+C.CARD_MOST+e.max+" "+a);Te=true}});if(Te){return}var Re=true;if(R.properties&&R.properties.hasOwnProperty("hideLabel")&&!R.properties["hideLabel"]){Re=false}var De=true;var be=false;if(P==="donut"){be=true}e.removeAllAggregation();Y={legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:De?false:true,selectability:{legendSelection:be?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:d||be?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(R.properties&&R.properties.semanticColor===true&&Q(b,s)){var Se=p.getText("GOOD");var Oe=p.getText("BAD");var Me=p.getText("CRITICAL");var Le=p.getText("OTHERS");if(b.length===1){var Ve=Z(b[0],s,Ae,e);var Se=Ve[0]||Se,Oe=Ve[1]||Oe,Me=Ve[2]||Me,Le=p.getText("OTHERS")}Y.plotArea.dataPointStyle={rules:[{callback:function(e){var t=X(e,Ae,b);if(!t){return false}var a=s[t.substring(1)];var i=W(e,a);if(i===r.criticalityConstants.StateValues.Positive){return true}else if(i==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:Se},{callback:function(e){var t=X(e,Ae,b);if(!t){return false}var a=s[t.substring(1)];var i=W(e,a);if(i===r.criticalityConstants.StateValues.Critical){return true}else if(i==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:Me},{callback:function(e){var t=X(e,Ae,b);if(!t){return false}var a=s[t.substring(1)];var i=W(e,a);if(i===r.criticalityConstants.StateValues.Negative){return true}else if(i==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:Oe},{callback:function(e){var t=X(e,Ae,b);if(!t){return false}var a=s[t.substring(1)];var i=W(e,a);if(i===r.criticalityConstants.StateValues.None){return true}else if(i==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Le}]}}var Ye=n.getProperty("/bEnableStableColors");var xe=n.getProperty("/colorPalette");var Ue;if(!Ye&&y.indexOf(m.ChartType.EnumMember)>=0&&xe&&Object.keys(xe).length>=2&&Object.keys(xe).length<=4){g(D,function(e,t){if(t&&t.Role&&t.Role.EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){Ue=t.Dimension&&t.Dimension.PropertyPath;return}});var Fe;if(Ue){if(Ae&&Ae[Ue]){if(Ae[Ue][E.LABEL_KEY_V4]){Fe=oe(Ae[Ue][E.LABEL_KEY_V4].String?Ae[Ue][E.LABEL_KEY_V4].String:Ae[Ue][E.LABEL_KEY_V4].Path,e,Ae)}else if(Ae[Ue][E.LABEL_KEY]){Fe=Ae[Ue][E.LABEL_KEY]}else if(Ue){Fe=Ue}}if(xe instanceof Array){var Ke=xe.map(function(e){return e.color});var Be=xe.map(function(e){return e.legendText});var we=Be[0]!=undefined?Be[0]:p.getText("OTHERS");var ke=Be[1]!=undefined?Be[1]:p.getText("BAD");var He=Be[2]!=undefined?Be[2]:p.getText("CRITICAL");var ze=Be[3]!=undefined?Be[3]:p.getText("GOOD")}Y.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[Fe]==="3"||e[Fe]===3)){if(xe instanceof Array){if(xe.length<4){return false}}else if(xe&&!xe.hasOwnProperty(3)){return false}return true}},properties:{color:xe instanceof Array&&Ke.length?Ke[3]:xe[3]&&xe[3]["color"]},displayName:ze||xe[3]&&xe[3]["legendText"]},{callback:function(e){if(e&&(e[Fe]==="2"||e[Fe]===2)){if(xe instanceof Array){if(xe.length<3){return false}}else if(xe&&!xe.hasOwnProperty(2)){return false}return true}},properties:{color:xe instanceof Array&&Ke.length?Ke[2]:xe[2]&&xe[2]["color"]},displayName:He||xe[2]&&xe[2]["legendText"]},{callback:function(e){if(e&&(e[Fe]==="1"||e[Fe]===1)){return true}},properties:{color:xe instanceof Array&&Ke.length?Ke[1]:xe[1]&&xe[1]["color"]},displayName:ke||xe[1]&&xe[1]["legendText"]},{callback:function(e){if(e&&(e[Fe]==="0"||e[Fe]===0)){return true}},properties:{color:xe instanceof Array&&Ke.length?Ke[0]:xe[0]&&xe[0]["color"]},displayName:we||xe[0]&&xe[0]["legendText"]}]};var Ge;if(n&&n.getProperty("/bInsightEnabled")){Ge=A({},Y.plotArea.dataPointStyle);Ge.rules.forEach(function(e,t,r){delete e["callback"];e.dataContext={};e.dataContext[Fe]=r.length-1-t+""})}}}var je=false;var We=false;if(m.ChartType.EnumMember===E.SCATTER_CHARTTYPE||m.ChartType.EnumMember===E.BUBBLE_CHARTTYPE||m.ChartType.EnumMember===E.LINE_CHARTTYPE){if(m&&m.AxisScaling&&m.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var Xe=m.AxisScaling;if(Xe.AutoScaleBehavior&&Xe.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var qe=Xe.AutoScaleBehavior;if(qe.ZeroAlwaysVisible&&qe.ZeroAlwaysVisible.Bool=="true"){Y.plotArea.adjustScale=false;je=true}else if(qe.DataScope){Y.plotArea.adjustScale=true;je=true}}else if(Xe.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&Xe.ScaleBehavior&&Xe.ScaleBehavior.EnumMember){var Qe=Xe.ScaleBehavior.EnumMember;var Ze=Qe.substring(Qe.lastIndexOf("/")+1,Qe.length);if(Ze=="FixedScale"){We=true}}}else if(m&&m.AxisScaling&&m.AxisScaling.EnumMember){var Je=m.AxisScaling.EnumMember.substring(m.AxisScaling.EnumMember.lastIndexOf("/")+1,m.AxisScaling.EnumMember.length);switch(Je){case"AdjustToDataIncluding0":Y.plotArea.adjustScale=false;je=true;break;case"AdjustToData":Y.plotArea.adjustScale=true;je=true;break;case"MinMaxValues":We=true;break;default:break}}if(We){var $e=[];if(m["MeasureAttributes"][0]&&m["MeasureAttributes"][0].DataPoint&&m["MeasureAttributes"][0].DataPoint.AnnotationPath){var et=m["MeasureAttributes"][0].DataPoint.AnnotationPath;var tt=et.substring(et.lastIndexOf("@")+1,et.length);if(s&&s[tt]){var rt=s[tt];if(rt&&rt.MaximumValue&&rt.MaximumValue.Decimal&&rt.MinimumValue&&rt.MinimumValue.Decimal){$e.push({feed:"valueAxis",max:rt.MaximumValue.Decimal,min:rt.MinimumValue.Decimal});je=true}else{N.error(C.ERROR_MISSING_AXISSCALES)}}}if(m.ChartType.EnumMember!==E.LINE_CHARTTYPE&&m["MeasureAttributes"][1]&&m["MeasureAttributes"][1].DataPoint&&m["MeasureAttributes"][1].DataPoint.AnnotationPath){var et=m["MeasureAttributes"][1].DataPoint.AnnotationPath;var tt=et.substring(et.lastIndexOf("@")+1,et.length);if(s&&s[tt]){var rt=s[tt];if(rt&&rt.MaximumValue&&rt.MaximumValue.Decimal&&rt.MinimumValue&&rt.MinimumValue.Decimal){$e.push({feed:"valueAxis2",max:rt.MaximumValue.Decimal,min:rt.MinimumValue.Decimal});je=true}else{N.error(C.ERROR_MISSING_AXISSCALES)}}}e.setVizScales($e)}}U=D.slice();F=b.slice();var at=0;var it=0;var nt;var ot;var st=false;var lt=false;var ut;var ft=[];var ct=[],vt=[];if((P==="column"||P==="bar"||P==="vertical_bullet")&&R.feeds&&R.feeds.length>0){var pt;for(pt=0;pt<R.feeds.length;pt++){if(R.feeds[pt].uid==="color"){R.feeds.splice(pt,1);break}}for(pt=0;pt<R.feeds.length;pt++){if(R.feeds[pt].uid==="categoryAxis"){delete R.feeds[pt].role;break}}if(n.getProperty("/colorPalette")){for(pt=0;pt<R.feeds.length;pt++){if(R.feeds[pt].uid==="categoryAxis"){R.feeds[pt].role="Category";break}}R.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}g(R.feeds,function(t,r){var a=r.uid;var i=[];if(r.type){var o,l,v;if(r.type==="dimension"){o=D.length;l="Dimension";v="dimensions";x=U;K=k}else{o=b.length;l="Measure";v="measures";x=F;K=z}var p=0,m=o;if(r.min){p=p>r.min?p:r.min}if(r.max){m=m<r.max?m:r.max}if(!r.role){var A=x.length;for(var d=0;d<A&&i.length<m;++d){var _=x[d];x.splice(d,1);--A;--d;i.push(_);if(Ae[_[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){ut=Ae[_[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path?Ae[_[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[_[l].PropertyPath][E.UNIT_KEY_V4_Unit]){ut=Ae[_[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path?Ae[_[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[_[l].PropertyPath][E.UNIT_KEY]){ut=Ae[_[l].PropertyPath][E.UNIT_KEY]}if(ee(Ae,ut)){st=true}else{lt=true}if(!st){at=J(at,_,s);nt=$(nt,_,s)}else{it=J(it,_,s);ot=$(ot,_,s)}}}else{var y=r.role.split("|");g(y,function(e,t){if(i.length===m){return false}var r=x.length;for(var a=0;a<r&&i.length<m;++a){var n=x[a];if(n&&n.Role&&n.Role.EnumMember&&n.Role.EnumMember.split("/")&&n.Role.EnumMember.split("/")[1]){var o=n.Role.EnumMember.split("/")[1];if(o===t){x.splice(a,1);--r;--a;i.push(n);if(Ae[n[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){ut=Ae[n[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path?Ae[n[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[n[l].PropertyPath][E.UNIT_KEY_V4_Unit]){ut=Ae[n[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path?Ae[n[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[n[l].PropertyPath][E.UNIT_KEY]){ut=Ae[n[l].PropertyPath][E.UNIT_KEY]}if(ee(Ae,ut)){st=true}else{lt=true}if(!st){at=J(at,n,s);nt=$(nt,n,s)}else{it=J(it,n,s);ot=$(ot,n,s)}}}else if((K?Array.prototype.indexOf.call(K,n):-1)===-1){K.push(n)}}});if(i.length<m){g(K,function(e,t){var r;var a;if((r=R[v].defaultRole)&&(y?Array.prototype.indexOf.call(y,r):-1)!==-1&&(a=(x?Array.prototype.indexOf.call(x,t):-1)!==-1)){x.splice(a,1);i.push(t);if(Ae[t[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){ut=Ae[t[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path?Ae[t[l].PropertyPath][E.UNIT_KEY_V4_ISOCurrency].Path:undefined}else if(Ae[t[l].PropertyPath][E.UNIT_KEY_V4_Unit]){ut=Ae[t[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path?Ae[t[l].PropertyPath][E.UNIT_KEY_V4_Unit].Path:undefined}else if(Ae[t[l].PropertyPath][E.UNIT_KEY]){ut=Ae[t[l].PropertyPath][E.UNIT_KEY]}if(ee(Ae,ut)){st=true}else{lt=true}if(!st){at=J(at,t,s);nt=$(nt,t,s)}else{it=J(it,t,s);ot=$(ot,t,s)}if(i.length===m){return false}}})}if(i.length<p){N.error(C.CARD_ERROR+C.MIN_FEEDS+P+" "+C.FEEDS_OBTAINED+i.length+" "+C.FEEDS_REQUIRED+p+" "+C.FEEDS);return false}}if(i.length){var T=[];var S;if(!(S=e.getDataset())){N.error(C.NO_DATASET);return false}I=s;g(i,function(t,r){if(!r||!r[l]||!r[l].PropertyPath){N.error(C.INVALID_CHART_ANNO);return false}var i=r[l].PropertyPath;var o=i;var s=i;var c=null;if(Ae&&Ae[i]){if(Ae[i][E.LABEL_KEY_V4]){if(Ae[i][E.LABEL_KEY_V4].String){o=oe(Ae[i][E.LABEL_KEY_V4].String,e,Ae)}else if(Ae[i][E.LABEL_KEY_V4].Path){o=Ae[i][E.LABEL_KEY_V4].Path}else{o=i}}else if(Ae[i][E.LABEL_KEY]){o=Ae[i][E.LABEL_KEY]}else if(i){o=i}if(Ae[i][E.TEXT_KEY_V4]){s=Ae[i][E.TEXT_KEY_V4].String?Ae[i][E.TEXT_KEY_V4].String:Ae[i][E.TEXT_KEY_V4].Path}else if(Ae[i][E.TEXT_KEY]){s=Ae[i][E.TEXT_KEY]}else if(i){s=i}c=Ae[i][E.TYPE_KEY]||null}var v,p={};p[i]=s;if((c==="Edm.DateTime"||c==="Edm.DateTimeOffset")&&s===i){v="{path:'"+i+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}else{if(Ae[i]&&Ae[i][E.TEXT_KEY_V4]&&Ae[i][E.TEXT_KEY_V4][E.TEXT_ARRANGEMENT_ANNO]){var m,g;m=Ae[i][E.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember;if(!g){m=Ae[i][E.TEXT_KEY_V4][E.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember}if(!g){var A=I;m=A&&A[E.TEXT_ARRANGEMENT_ANNO];g=m&&m.EnumMember}switch(g){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":v="{"+s+"}"+" "+"("+"{"+i+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":v="{"+s+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":v="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;default:v="{"+i+"}";p[i]=i;break}}else{v="{"+s+"}"}if(n&&n.getProperty("/bInsightEnabled")){h.setDimensionPath(n.getData().cardId,i,v)}}T.push(o);if(l==="Dimension"){if(a==="waterfallType"){var d=new u({name:o,value:"{"+i+"}"})}else{var d=new u({name:o,value:"{"+i+"}",displayValue:v})}var P=Ae[i][E.SEMANTICS_KEY];var _=Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYear"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYear"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"].Bool||Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]&&Ae[i]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"].Bool;if(G&&(c==="Edm.DateTime"||_||c==="Edm.DateTimeOffset"||P&&P.lastIndexOf("year",0)===0)){d.setDataType("date")}S.addDimension(d);if((vt?Array.prototype.indexOf.call(vt,o):-1)===-1){vt.push(o)}}else{S.addMeasure(new f({name:o,value:"{"+i+"}"}));if((ct?Array.prototype.indexOf.call(ct,o):-1)===-1&&a!="bubbleWidth"){ct.push(o)}}});e.addFeed(new c({uid:a,type:l,values:T}));if(a==="categoryAxis"){Y[a]={title:{visible:Re?false:true,text:T.join(", ")},label:{formatString:st?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{Y[a]={title:{visible:Re?false:true,text:T.join(", ")},label:{formatString:st?"CURR":"axisFormatter"}}}ft.push(Y[a]);if(R.hasOwnProperty("vizProperties")){var O=0;var M=R.vizProperties.length;var L;var V;for(;O<M;O++){if(R.vizProperties[O].hasOwnProperty("value")){V=R.vizProperties[O].value}if(R.vizProperties[O].hasOwnProperty("path")){L=R.vizProperties[O].path.split(".");var B=L.length;var w,H;var j;for(var W=0,j=L[0],w=Y,H=ye;W<B;++W){if(W===B-1){if(H&&H.hasOwnProperty(j)){if(P==="donut"&&(H[j]==="value"||H[j]==="percentage")){V=H[j]}else if(P!="donut"){V=H[j]}}if(je&&j!="adjustScale"||!je&&j==="adjustScale"||!je&&j!="adjustScale"){w[j]=V}break}w[j]=w[j]||{};w=w[j];if(H){H[j]=H[j]||{};H=H[j]}j=L[W+1]}}}}if(r.hasOwnProperty("vizProperties")){var t=0;var X=r.vizProperties.length;var q;var Q;var Z;for(;t<X;t++){if(r.vizProperties[t].hasOwnProperty("method")){Q=r.vizProperties[t].method;switch(Q){case"count":q=T.length;if(r.vizProperties[t].hasOwnProperty("min")&&q<=r.vizProperties[t].min){q=r.vizProperties[t].min}else if(r.vizProperties[t].hasOwnProperty("max")&&q>=r.vizProperties[t].max){q=r.vizProperties[t].max}break;default:break}}else if(r.vizProperties[t].hasOwnProperty("value")){q=r.vizProperties[t].value}if(r.vizProperties[t].hasOwnProperty("path")){Z=r.vizProperties[t].path.split(".");var te=Z.length;for(var d=0,re=Z[0],ae=Y;d<te;++d){if(d===te-1){ae[re]=q;break}ae[re]=ae[re]||{};ae=ae[re];re=Z[d+1]}}}}}}});var mt=e.getFeeds();if(R.properties&&R.properties.semanticPattern===true&&L(mt,P)){g(mt,function(t,r){if(mt[t].getType()==="Measure"&&(mt[t].getUid()==="valueAxis"||mt[t].getUid()==="actualValues")){var a;g(b,function(e,r){var i=M(r.Measure.PropertyPath,Ae);if(i===mt[t].getValues()[0]){a=S(r,s);return false}});if(a){var i=M(a.Measure.PropertyPath,Ae);var n=s[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||s[a.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path;var o=M(n,Ae);var l=p.getText("ACTUAL",[i]);var u=p.getText("FORECAST",[o]);Y.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:i},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:o},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:u}]};e.getDataset().addMeasure(new f({name:o,value:"{"+n+"}"}));var c=mt[t].getValues();c.push(o);mt[t].setValues(c)}return false}})}var gt=false;if(xe&&xe.dimensionSettings&&Object.keys(xe.dimensionSettings).length>0){var At=Object.keys(xe.dimensionSettings);for(var dt=0;dt<At.length;dt++){var Pt=At[dt];var ht=xe.dimensionSettings[Pt];if(Object.keys(ht).length>10){gt=true;break}}}if(Ye&&T.indexOf(m.ChartType.EnumMember)>=0&&!gt){var Et=[];var Ct=true;for(var dt=0;dt<D.length;dt++){var _t=D[dt].Dimension.PropertyPath;Et.push(_t)}for(var dt=0;dt<Et.length;dt++){var Pt=Et[dt];if(At.indexOf(Pt)>-1){var yt=xe.dimensionSettings[Pt];var Tt=Object.keys(yt);var It=[];for(var dt=0;dt<Tt.length;dt++){var Nt=yt[Tt[dt]];It.push(Nt)}Ct=Ct&&It.every(Ee)}}if(Ct){var Rt=[];for(var dt=0;dt<Et.length;dt++){var Pt=Et[dt];if(At.indexOf(Pt)>-1){var yt=xe.dimensionSettings[Pt];var Tt=Object.keys(yt);var It=[];for(var dt=0;dt<Tt.length;dt++){var Nt=yt[Tt[dt]];It.push(Nt)}he(It);for(var Dt=0;Dt<It.length;Dt++){var bt=It[Dt].dimensionValue;var St=It[Dt].color;var Nt={properties:{color:St}};Nt.dataContext={};var Ot=ie(Ae,e,Pt);Nt.dataContext[Ot]=bt;Nt.displayName=bt;Rt.push(Nt)}}}Y.plotArea.dataPointStyle=Y.plotArea.dataPointStyle||{};Y.plotArea.dataPointStyle["rules"]=Rt}else{var Rt=[];for(var dt=0;dt<Et.length;dt++){var Pt=Et[dt];if(At.indexOf(Pt)>-1){var yt=xe.dimensionSettings[Pt];var Tt=Object.keys(yt);var It=[];for(var dt=0;dt<Tt.length;dt++){var Nt=yt[Tt[dt]];It.push(Nt)}he(It);var Mt=It.map(Ce)}}Y.legend.order=function(e,t){var r=Mt.indexOf(e);var a=Mt.indexOf(t);return r>a?1:-1}}}if(R.properties&&R.properties.semanticPattern===true&&L(mt,P)&&e.getVizType()==="vertical_bullet"){g(mt,function(t,r){if(mt[t].getType()==="Measure"&&(mt[t].getUid()==="valueAxis"||mt[t].getUid()==="actualValues")){var a;g(b,function(e,r){var i=M(r.Measure.PropertyPath,Ae);if(i===mt[t].getValues()[0]){a=O(r,s);return false}});if(a){var i=s[a.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||s[a.DataPoint.AnnotationPath.substring(1)].TargetValue.Path;var n=M(i,Ae);e.getDataset().addMeasure(new f({name:n,value:"{"+i+"}"}));e.addFeed(new c({uid:"targetValues",type:"Measure",values:[n]}))}return false}})}if(st&&lt){N.warning(p.getText("Currency_non_currency_measure"))}g(mt,function(e,t){var r=t.getProperty("type");if(r==="Measure"){var a=t.getProperty("values");var i=true;var n=m.MeasureAttributes.filter(function(e){return a.indexOf(Ae[e[r]["PropertyPath"]][E.LABEL_KEY])>=0||a.indexOf(Ae[e[r]["PropertyPath"]][E.LABEL_KEY_V4])>=0});g(n,function(e,t){if(te(Ae,t,r)||re(Ae,t,r)){i=false}else{i=true;return false}});if(!i){Y[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var Lt;if(ot===undefined){ot=""}if(nt===undefined){nt=""}if(st){Lt=ue(ot,st)}else{Lt=ue(nt,st)}if(t){t.setScale(Lt)}le(ct,vt,a);var Vt="";g(mt,function(e,t){var r="-1";var a=t.getProperty("type");if(a==="Measure"){var i=ft.filter(function(e){var r=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(r.length>0){return true}else{return false}});if(i&&i.length){var n=t.getValues();if(n&&n.length){g(n,function(e,t){var i=t.trim();var n=b.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(Ae[t]&&Ae[t][E.LABEL_KEY]===i||Ae[t]&&Ae[t][E.LABEL_KEY_V4]===i){return true}else{return false}}});if(n&&n.length){var o=n[0];if(!te(Ae,o,a)&&!re(Ae,o,a)){var l="";if(o&&o["DataPoint"]&&o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"]){l=o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"].substring(1);if(l!=""){var u;u=s[l]&&s[l]["ValueFormat"]&&s[l]["ValueFormat"]["NumberOfFractionalDigits"]&&s[l]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];r=u>r?u:r}}}else{r=r<"0"?"0":r}}})}}if(i&&i[0]&&i[0].label&&i[0].label.formatString){var o=i[0].label.formatString}Vt="";if(st){if(o==="CURR"){Vt="CURR/"+r.toString()+"/"}else{Vt="axisFormatter/"+r.toString()+"/"}}else{Vt="axisFormatter/"+r.toString()+"/"}if(i&&i[0]){i[0].label.formatString=Vt}}});if(P==="vertical_bullet"){Y["valueAxis"]={title:{visible:Re?false:true},label:{formatString:Vt}}}var Yt="";var xt="";if(st){Yt=it.toString();xt="CURR/"+it.toString()+"/"}else{Yt=at.toString();xt="axisFormatter/"+at.toString()+"/"}if(P==="donut"||d){Y.plotArea.dataLabel.formatString=xt;if(Y.plotArea.dataLabel.type==="percentage"){Y.plotArea.dataLabel.formatString="0.0%/"+Yt+"/"}}H(U,R,"dimension");H(F,R,"measure");if(G){var Ut=D[0].Dimension.PropertyPath;if(Ae[Ut][E.SEMANTICS_KEY]==="yearmonth"||Ae[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){Y.timeAxis.levels=["year","month"]}else if(Ae[Ut][E.SEMANTICS_KEY]==="yearquarter"||Ae[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){Y.timeAxis.levels=["year","quarter"]}else if(Ae[Ut][E.SEMANTICS_KEY]==="yearweek"||Ae[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){Y.timeAxis.levels=["year","week"]}else if(Ae[Ut][E.SEMANTICS_KEY]==="year"||Ae[Ut]["com.sap.vocabularies.Common.v1.IsCalendarYear"]){Y.timeAxis.levels=["year"]}}e.setVizProperties(Y);if(n&&n.getProperty("/bInsightEnabled")){var Ft=e&&e.getId();var Kt=A({},Y);if(Ge!==undefined){Kt.plotArea.dataPointStyle=Ge}h.setVizPropertyMap(Ft,Kt)}}function ie(e,t,r){var a="";if(e&&e[r]){if(e[r][E.LABEL_KEY_V4]){a=oe(e[r][E.LABEL_KEY_V4].String?e[r][E.LABEL_KEY_V4].String:e[r][E.LABEL_KEY_V4].Path,t,e)}else if(e[r][E.LABEL_KEY]){a=e[r][E.LABEL_KEY]}else if(r){a=r}}return a}function ne(e,t,r){if(e&&(e.getVizType()==="bubble"||e.getVizType()==="scatter")){return}var a,i,n,o;var s;var l=E.UNIT_KEY;var u=E.UNIT_KEY_V4_ISOCurrency;var f=E.UNIT_KEY_V4_Unit;var c;var v=[];if(!(a=e.getModel("ovpCardProperties"))){N.error(C.CARD_ERROR+"in "+C.CARD_CONFIG+C.NO_CARD_MODEL);return}var m=e.getModel();var A=a.getProperty("/entitySet");if(!m||!A){return}i=a.getProperty("/entityType");if(!i){N.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}var d=se(m,A);n=a.getProperty("/chartAnnotationPath");if(!n||!(o=i[n])){N.error(C.CARD_ANNO_ERROR+"in "+C.CARD_ANNO);return}if(!(s=o.MeasureAttributes)||!s.length){N.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return}g(s,function(e,t){c=t.Measure.PropertyPath;if(t.DataPoint&&t.DataPoint.AnnotationPath){var r=i[t.DataPoint.AnnotationPath.substring(1)];if(r.ForecastValue&&(r.ForecastValue.PropertyPath||r.ForecastValue.Path)){v.push(r.ForecastValue.PropertyPath||r.ForecastValue.Path)}}v.push(c)});var P=t?t.results:null;var h="";var _=true;var y=[];var T=e.getFeeds();g(T,function(e,t){if(t.getType()==="Measure"){y=y.concat(t.getValues())}});if(P){g(v,function(t,r){var a=ie(d,e,r);if((y?Array.prototype.indexOf.call(y,a):-1)!=-1){if(d&&d[r]){var i;if(d[r][u]){i=d[r][u].Path?d[r][u].Path:d[r][u].String}else if(d[r][f]){i=d[r][f].Path?d[r][f].Path:d[r][f].String}else if(d[r][l]){i=d[r][l]}if(!i){_=false;return false}if(i&&d[i]){for(var t=0;t<P.length;t++){var n=P[t];if(_){if(h&&n[i]&&n[i]!=""&&h!=""&&h!=n[i]){_=false;break}}h=n[i];if(!h){_=false;break}}}}}})}var I="";if(_){if(h!=""){I=p.getText("IN_NO_SCALE",[h]);I=" "+I}if(r){r.setText(I);r.data("aria-label",I,true);var R=e.data("aria-label");if(R&&I&&R.indexOf(I)===-1){var D=R+I;e.data("aria-label",D,true)}}}}function oe(e,t,r){var a;var i;var n;if(e&&e.indexOf("{")===0){e=e.slice(1,-1);if(e.indexOf(">")!=-1){n=e.split(">");a=n[0];i=n[1]}else if(e.indexOf("&gt;")!=-1){n=e.split("&gt;");a=n[0];i=n[1]}try{e=t.getModel(a).getProperty(i)}catch(t){e=r[e][E.LABEL_KEY_V4].String;N.error("Unable to read labels from resource file",t)}}return e}function se(t,r){var a=e.cacheODataMetadata(t);if(!a){return undefined}return a[r]}function le(e,t,r){var a="",i="",n="";if(r){a=r.getText()}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=p.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=p.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(r&&a===""){a=p.getText("NO_CHART_TITLE",[i,n]);r.setText(a);r.data("aria-label",a,true)}}function ue(e,t){var r=1;var i;if(t){var n=a.getCurrencyInstance({style:"short",currencyCode:false,shortRefNumber:e});i=n.format(Number(r))}else{var o=a.getFloatInstance({style:"short",shortRefNumber:e});i=o.format(Number(r))}var s=i.slice(-1);return s}function fe(e,t){e.attachSelectData(function(a){var n=m.bCRTLPressed?m.constants.explace:m.constants.inplace;m.bCRTLPressed=false;var o=e.getModel("ovpCardProperties");var u=e.getModel();var f=o.getProperty("/entitySet");var c=se(u,f);var v=[],p=[];var A={},d={};var P=e.getDataset().getDimensions();var h;for(var C=0;C<P.length;C++){v.push(P[C].getName())}var _=e.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(a.getParameter("data")&&a.getParameter("data")[0]&&a.getParameter("data")[0].data){p=Object.keys(a.getParameter("data")[0].data);h=a.getParameter("data")[0].data._context_row_number;var y=e.getDataset().getBinding("data").getContexts()[h];var T=t.getEntityNavigationEntries(y)[0];if(_[h].$isOthers&&_[h].$isOthers===true){var I={},N=[];for(var R=0;R<v.length;R++){for(var D=0;D<p.length;D++){if(v[R]===p[D]){for(var b in c){if(c.hasOwnProperty(b)){var S=c[b][E.LABEL_KEY]||c[b][E.NAME_KEY]||c[b][E.NAME_CAP_KEY];if(S===p[D]){N.push(b)}}}}}}for(var C=0;C<N.length;C++){I[N[C]]=[];for(var R=0;R<_.length-1;R++){if(R!=h){I[N[C]].push(_[R][N[C]])}}}var O={$isOthers:true};var M={getObject:function(){return O},getOtherNavigationDimensions:function(){return I}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(M)}}else{if(T){t.doNavigation(M,T,n)}}}else{for(var R=0;R<v.length;R++){for(var D=0;D<p.length;D++){if(v[R]===p[D]){for(var b in c){if(c.hasOwnProperty(b)){var S=c[b][E.LABEL_KEY_V4]&&c[b][E.LABEL_KEY_V4].String||c[b][E.LABEL_KEY]||c[b][E.NAME_KEY]||c[b][E.NAME_CAP_KEY];if(S.match(/{@i18n>.+}/gi)){var L=this.getModel("@i18n").getResourceBundle();S=L.getText(S.substring(S.indexOf(">")+1,S.length-1))}if(S===p[D]){A[b]=_[h][b]}}}}for(var b in _[h]){if(c.hasOwnProperty(b)){d[b]=_[h][b]}}}}if(A){g(Object.keys(A),function(e,t){if(c[t]["type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearquarter"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearweek"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(A[t]):A[t]}else if(c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=A[t];if(r.includes(".")){A[t]=r.split(".").reverse().join("")}else if(r.includes("/")){A[t]=r.split("/").reverse().join("")}}}})}if(d){g(Object.keys(d),function(e,t){if(c[t]["type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearquarter"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearweek"||c[t]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(d[t]):d[t]}else if(c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]&&c[t]["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"].Bool){var r=d[t];if(r.includes(".")){d[t]=r.split(".").reverse().join("")}else if(r.includes("/")){d[t]=r.split("/").reverse().join("")}}}})}var V=o.getProperty("/entityType"),Y=V[o.getProperty("/presentationAnnotationPath")];if(V){var x=r.getRequestFields(Y);if(x&&x.length>0){g(x,function(e,t){if(!A.hasOwnProperty(t)){A[t]=_[h][t]}})}}var M={getObject:function(){return A},getAllData:function(){return d}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(M)}}else{if(T){t.doNavigation(M,T,n)}}}}})}function ce(e){if(e.EnumMember.endsWith("Bubble")){return true}else{return false}}function ve(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.PropertyPath){N.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.DIMENSIONS_MANDATORY);return t}t=true;return t}function pe(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Measure||!e[0].Measure.PropertyPath){N.error(C.CHART_ANNO_ERROR+"in "+C.CHART_ANNO+" "+C.MEASURES_MANDATORY);return t}t=true;return t}function me(e){return e.name}function ge(e){if(e&&e.indexOf("#")!=-1){var t=e.split("#");if(t.length>1){return t[1]}}return""}function Ae(e,t){var r=t.getModel("ovpCardProperties");var a=de(t);var i=+a.itemsLength;var n=+r.getProperty("/dataStep");if(i&&n){var o=e.colSpan-1;if(o>=0){i+=n*o;Pe(t,i)}}}function de(e){var t=e.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/presentationAnnotationPath");var i=r.hasOwnProperty(a)&&r[a];var n=i&&i.MaxItems;if(n){var o=n.Int32?n.Int32:n.Int;return{itemsLength:+o,dataStep:+t.getProperty("/dataStep")}}}function Pe(e,t){var r,a={},i=[];var n=e.getVizType();var o=e.getModel("ovpCardProperties");var s=o.getProperty("/entityType");var l=o.getProperty("/chartAnnotationPath");var u=s[l];var f=e.getParent();var c=f.getBinding("data");a.path=c.getPath();a.parameters={};if(c.mParameters&&c.mParameters.select){a.parameters.select=c.mParameters.select}a.parameters.custom=a.parameters.custom||{};a.parameters.custom._requestFrom="ovp_internal";a.filters=c.aApplicationFilters;a.sorter=c.aSorters;a.length=n==="donut"?t+1:t;a.template=new v;f.bindAggregation("data",a);if(n==="donut"){g(u.MeasureAttributes,function(e,t){i.push(t.Measure.PropertyPath)});r={};r.path=c.getPath();r.parameters={};r.parameters.select=i.join(",");r.filters=c.aApplicationFilters;r.sorter=c.aSorters;r.length=1;r.template=new v;f.bindAggregation("aggregateData",r)}f.updateBindingContext()}function he(e){e.sort(function(e,t){if(e.index<t.index){return-1}if(e.index>t.index){return 1}return 0})}function Ee(e){return e.color!==undefined}function Ce(e){return e.dimensionValue}return{constants:E,errorMessages:C,formatItems:R,formatByType:V,returnDateFormat:Y,hideDateTimeAxis:x,checkExists:U,validateCardConfiguration:F,checkNoData:K,getConfig:B,hasTimeSemantics:w,getChartType:k,getPrimitiveValue:z,formThePathForCriticalityStateCalculation:W,checkFlag:Q,buildVizAttributes:ae,setChartUoMTitle:ne,getMetadata:se,getSelectedDataPoint:fe,checkBubbleChart:ce,dimensionAttrCheck:ve,measureAttrCheck:pe,getEntitySet:me,getAnnotationQualifier:ge,reprioritizeContent:Ae,getMaxItems:de,getLabelFromAnnotationPath:oe}},true);
sap.ui.predefine("sap/ovp/cards/charts/analytical/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/cards/jUtils"],function(e,a,t){"use strict";return e.extend("sap.ovp.cards.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.charts.analytical.analyticalChart"},enableAddToInsight:{type:"boolean",defaultValue:true}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){t.setAttributeToMultipleElements(".tabindex0","tabindex",0);t.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)}})});
sap.ui.predefine("sap/ovp/cards/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/cards/ovpLogger","sap/ovp/app/FilterHelper","sap/ui/core/Fragment","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/Integration/IntegrationCard","sap/ui/Device","sap/ovp/cards/charts/Utils","sap/ui/dom/units/Rem","sap/ovp/cards/charts/OVPChartFormatter"],function(t,e,a,i,r,s,o,n,d,h,l,p,u,g,v,c){"use strict";var y=new o("OVP.analytical.analyticalChart");return t.extend("sap.ovp.cards.charts.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);c.registerCustomFormatters();var e=this;this.eventhandler=function(t,a,i){h.applyFiltersToV2Card(i,e)};this.GloabalEventBus=l.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}this.iPreviousRowSpan=0},onBeforeRendering:function(){if(this.bCardProcessed){return}e.validateCardConfiguration(this);var t=this.getView().byId("analyticalChart");var i=this.getOwnerComponent().getComponentData();if(t){t.setHeight("21rem")}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&i&&i.appComponent){var r=i.appComponent.getDashboardLayoutUtil();var s=r.dashboardLayoutModel.getCardById(i.cardId);if(s.dashboardLayout.autoSpan&&t){t.setHeight("21rem")}}var o=this.getView().byId("vbLayout");var n;var h=false;var l=new a({data:{path:"/"}});this.isVizPropSet=h;this.oDataSet=l;this.vizFrame=t;this.vbLayout=o;if(!t){y.error(e.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")")}else{this.vbLayout.setBusy(true);n=t.getModel("ovpCardProperties").getProperty("/navigation");if(n===undefined||n=="datapointNav"||n!="headerNav"){e.getSelectedDataPoint(t,this)}t.destroyDataset();var p=t.getParent().getBinding("data");this._handleKPIHeader();if(p&&p.getPath()){p.attachDataReceived(this.onDataReceived.bind(this));p.attachDataRequested(this.onDataRequested.bind(this))}else{d.load("sap.ovp.cards.charts.generic.noData").then(function(t){var e=this.getCardContentContainer();e.removeAllItems();e.addItem(t)}.bind(this))}t.addEventDelegate({onmouseover:function(){var e=t._oOvpVizFrameTooltip;if(e){e._oPopup.close()}}})}this.bCardProcessed=true},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!i.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var a=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var r=document.getElementById(a);var s=this.getHeaderHeight();if(!e.dashboardLayout.autoSpan){if(r){var o=r.getElementsByClassName("sapOvpWrapper")[0];if(o){o.style.height=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}}}if(e.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}var n=this.getView().byId("analyticalChart");if(n){n.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}}},onDataReceived:function(t){var a=this;var i=this.getView().byId("analyticalChart");var o=this.getView().byId("bubbleText");var n=this.getView().byId("ovpCT");var d=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");i.setDataset(this.oDataSet);var h=i.getParent();if(!this.isVizPropSet){e.buildVizAttributes(i,h,n,this);this.isVizPropSet=true;if(o!=undefined){var l=i.getFeeds();s(l,function(t,e){if(l[t].getUid()=="bubbleWidth"){o.setText(d+" "+l[t].getValues())}})}e.hideDateTimeAxis(i)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&i.getVizType()==="stacked_column"){var p=i.getDataset().getDimensions(),v=i.getFeeds(),c,y;for(var b=0;b<v.length;b++){if(v[b].getUid()==="color"){c=v[b].getValues()[0];break}}for(var f=0;f<p.length;f++){if(p[f].getName()===c){y=p[f];break}}if(c&&y){var C={};C["bDescending"]=true;y.setSorter(C)}}var V=this.getView().byId("ovpUoMTitle");var m=t?t.getParameter("data"):null;e.setChartUoMTitle(i,m,V);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){a.vbLayout.setBusy(false);if(a.getView()&&a.getView().byId("sapOvpCardInsights")){a.getView().byId("sapOvpCardInsights").setEnabled(true)}},0)}e.checkNoData(t,this.getCardContentContainer(),i);if(u.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var P=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var I=Math.max(P.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=I}if(g.isDataSetEmpty(t)){i.setHeight(50+"px")}else{var D=this._calculateVizFrameHeight();if(D!==undefined&&typeof D==="number"){i.setHeight(D+"px")}}}},onDataRequested:function(){this.vbLayout.setBusy(true)},getCardItemsBinding:function(){var t=this.getView().byId("analyticalChart");if(t&&t.getParent()){return t.getParent().getBinding("data")}return null},resizeCard:function(t){var a=this.getCardPropertiesModel();this.newCardLayout=t;a.setProperty("/cardLayout/rowSpan",t.rowSpan);a.setProperty("/cardLayout/colSpan",t.colSpan);var i=this.getCardPropertiesModel().getProperty("/cardLayout");var o=this.getHeaderHeight();var n=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var d=0;d<n.length;d++){n[d].style.height=t.rowSpan*i.iRowHeightPx+2-(o+2*i.iCardBorderPx)+"px"}var h=this.getView().byId("analyticalChart");var l=this.getView().byId("bubbleText");var p=this.getView().byId("ovpCT");if(h){if(h.getVizType()==="timeseries_bubble"||h.getVizType()==="bubble"){if(i.colSpan>1){l.setVisible(false)}else{l.setVisible(true)}}h.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}var u=this.getView().byId("ovpCardContentContainer").getDomRef();if(u){if(!t.showOnlyHeader){u.classList.remove("sapOvpContentHidden")}else{u.classList.add("sapOvpContentHidden")}}var g=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var v=h.getParent();if(!this.isVizPropSet){e.buildVizAttributes(h,v,p,this);this.isVizPropSet=true;if(l!=undefined){var c=h.getFeeds();s(c,function(t,e){if(c[t].getUid()=="bubbleWidth"){l.setText(g+" "+c[t].getValues())}})}e.hideDateTimeAxis(h)}e.reprioritizeContent(this.newCardLayout,h)},_calculateVizFrameHeight:function(){var t;if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.getView().byId("analyticalChart");var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.getView().getController();var r=this.getItemHeight(i,"toolbar");var s=this.getHeaderHeight();var o=this.getView().byId("ovpCT")?24:0;var n=(e.getVizType()==="timeseries_bubble"||e.getVizType()==="bubble")&&a.dashboardLayout.colSpan===1?43:0;var d=u.system.phone&&this.iPreviousRowSpan>0?this.iPreviousRowSpan:a.dashboardLayout.rowSpan;t=d*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+r+o+n+30);var h=e.getVizType();var l=e.sId;if(h==="donut"){var p=this._calculateVizLegendGroupHeight(t);var g=this.getView().byId(l);if(g){g.setVizProperties(p)}}}else{t=v.toPx(21)}return t},_calculateVizLegendGroupHeight:function(t){var e;if(t<=300){e=.1}else if(t>=400){e=.4}else{e=.3}var a={legendGroup:{layout:{height:e}}};return a},_calculateWidth:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var e=this.getView().byId("analyticalChart");if(t){var a=parseInt(t.dashboardLayout.width,10);var i=e.getVizType();var r=e.sId;if(i==="donut"){var s=this._calculateVizLegendGroupWidth(a);var o=this.getView().byId(r);if(o){o.setVizProperties(s)}}}},_calculateVizLegendGroupWidth:function(t){var e;if(t<=600){e=.25}else if(t<=900){e=.55}else if(t>=1200){e=.7}else{e=.65}var a={legendGroup:{layout:{maxWidth:e}}};return a},refreshCard:function(){this.getView().rerender()},onShowInsightCardPreview:function(t){var e=t.getSource()&&t.getSource().getParent();if(e){e.close()}var a=this.getView();var i=a.getController();var r=i.oCardComponentData;var s=this;p.showCard({vizFrame:i.vizFrame,entitySet:i.entitySet,entityType:i.entityType,cardComponentName:"Analytical",cardComponentData:r,cardComponent:i.oCardComponent,view:a}).then(function(t){s.saveGeneratedCardManifest(t)})}})});
sap.ui.predefine("sap/ovp/cards/charts/config", [],function(){"use strict";var e={getChartsConfiguration:function(){return{Line:{default:{type:"line",vizProperties:[{path:"plotArea.isSmoothed",value:false}],properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"valueAxis.label.allowDecimals",value:true}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_line",vizProperties:[{path:"plotArea.isSmoothed",value:false},{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"color",type:"dimension",role:"Series"}]}},Bubble:{default:{type:"bubble",properties:{hideLabel:false},vizProperties:[{path:"plotArea.adjustScale",value:true}],dimensions:{max:4},measures:{min:3,max:3,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",min:1,max:1,type:"measure",role:"Axis2|Axis1|Axis3",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"},{uid:"shape",max:2,type:"dimension",role:"Category"},{uid:"color",max:2,type:"dimension",role:"Series",vizProperties:[{path:"plotArea.colorDepth",method:"count",min:1,max:2}]}]},time:{type:"timeseries_bubble",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"}]}},Donut:{default:{type:"donut",vizProperties:[{path:"plotArea.dataLabel.type",value:"value"}],dimensions:{min:1},measures:{min:1,max:1},resize:{dataStep:10},feeds:[{uid:"size",min:1,max:1,type:"measure"},{uid:"color",min:1,type:"dimension"}]}},Column:{default:{type:"column",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_column",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Bar:{default:{type:"bar",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category",vizProperties:[{path:"categoryAxis.layout.width",value:.33}]},{uid:"color",min:1,type:"dimension",role:"Series"}]}},ColumnStacked:{default:{type:"stacked_column",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_stacked_column",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},VerticalBullet:{default:{type:"vertical_bullet",properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1"},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_bullet",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},Combination:{default:{type:"combination",dimensions:{min:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:2,vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",role:"Series"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"timeseries_combination",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:2,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Scatter:{default:{type:"scatter",vizProperties:[{path:"plotArea.markerSize",value:""}],properties:{hideLabel:false},dimensions:{min:1,max:2},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:1,max:1,role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",type:"measure",min:1,max:1,vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",max:1,role:"Series"},{uid:"shape",type:"dimension",max:1,role:"Category"}]},time:{type:"timeseries_scatter",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],dimensions:{min:1,max:3,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"shape",type:"dimension",min:0,role:"Category2"},{uid:"color",type:"dimension",min:0,role:"Series"}]}},Waterfall:{default:{type:"waterfall",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"waterfallType",max:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_waterfall",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},CombinationDual:{default:{type:"dual_combination",properties:{hideLabel:false},dimensions:{min:1},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"dual_timeseries_combination",vizProperties:[{path:"timeAxis.levels",value:["year","month","day","hour","minute"]}],properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},vertical_bullet:{reference:"VerticalBullet"},StackedColumn:{reference:"ColumnStacked"}}}};return{getChartsConfiguration:e.getChartsConfiguration}});
sap.ui.predefine("sap/ovp/cards/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
sap.ui.predefine("sap/ovp/cards/custom/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/error/Component", ["sap/ovp/cards/generic/Component"],function(r){"use strict";var e=r.extend("sap.ovp.cards.error.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.error.Error"},state:{type:"string",defaultValue:"Error"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.error.Error"}},version:"1.108.11",library:"sap.ovp"}});return e});
sap.ui.predefine("sap/ovp/cards/error/Error.controller", ["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/ovpLogger"],function(t,a){"use strict";var e=new a("OVP.error.Error");return t.extend("sap.ovp.cards.error.Error",{onInit:function(){t.prototype.onInit.apply(this,arguments)},adjustCardSize:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);if(t.template!=="sap.ovp.cards.stack"){var a=this.oMainComponent&&this.oMainComponent.getLayout();var e=a.getDashboardLayoutUtil();var o=e.getCardDomId(this.sCardId);var r=document.getElementById(o);var n=this.getHeaderHeight();r.getElementsByClassName("contentOfError")[0].style.height=r.getElementsByClassName("sapOvpCardContentContainer")[0].style.height=t.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(n+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}},onAfterRendering:function(){if(this.oMainComponent&&this.oMainComponent.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){t.prototype.onAfterRendering.apply(this,arguments);this.adjustCardSize()}},resizeCard:function(){try{this.adjustCardSize()}catch(t){e.warning("OVP resize: "+this.cardId+" catch "+t.toString())}}})});
sap.ui.predefine("sap/ovp/cards/generic/Card.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/fe/navigation/SelectionVariant","sap/fe/navigation/PresentationVariant","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavError","sap/ui/core/CustomData","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/MessageToast","sap/ui/generic/app/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/isPlainObject","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ui/util/openWindow","sap/ovp/placeholder/placeholderHelper","sap/ovp/cards/Integration/Helpers/AnalyticalCard","sap/ui/core/Component","sap/ui/core/library","sap/insights/CardHelper","sap/ui/core/Fragment"],function(t,e,a,i,r,n,o,s,l,d,p,c,g,v,h,f,u,m,C,jQuery,y,b,P,I,S,D,N,w,O,T,k,A,E,M,V){"use strict";var F=E.TextDirection;var L=new D("OVP.generic.Card");return t.extend("sap.ovp.cards.generic.Card",{initKeyboardNavigation:function(){var t=function(t){this.init(t)};t.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var e=t.find("[aria-label]");var a,i="";if(t.find(".valueStateText").length==1){var r=t.find(".valueStateText").find(".sapMObjectNumberText").text();var n=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",r+" "+n);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var o="";var s=t.find(".cardHeaderType");if(s.length===0){var l=y.getText("CardHeaderType");o="cardHeaderType_"+(new Date).getTime();var d='<div id="'+o+'" class="cardHeaderType" aria-label="'+l+'" hidden></div>';t.append(d)}else{o=s[0].id}i+=o+" "}for(a=0;a<e.length;a++){if(e[a].getAttribute("role")==="heading"){i+=e[a].id+" "}}if(t.hasClass("sapOvpCardHeader")){var p=t.find(".cardHeaderText");if(p.length!==0){for(var a=0;a<p.length;a++){if(i.indexOf(p[a].id)===-1){i+=p[a].id+" "}}}}if(i.length){t.attr("aria-labelledby",i)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+y.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var c=t.attr("id");if(c&&c.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var g=t.closest("td").attr("data-sap-ui-column"),v=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<v.length;a++){if(v[a].getAttribute("data-sap-ui")==g&&v[a].hasChildNodes("span")){var h=v[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",h)}}}}};t.prototype.init=function(t){this.cardLayout=t;this.keyCodes=P;this.jqElement=jQuery(t.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler.bind(this))};this.keyboardNavigation=new t(this)},onInit:function(){this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var t=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData.state;if(t!=="Error"){var e=this.getView().byId("ovpCardHeader");if(!!e){e.attachBrowserEvent("click",this.onHeaderClick.bind(this));e.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&t.keyCode==13){t.preventDefault();this.onHeaderClick(t)}else if(!t.shiftKey&&t.keyCode==32){t.preventDefault()}}.bind(this)});e.addEventDelegate({onkeyup:function(t){if(!t.shiftKey&&t.keyCode==32){t.preventDefault();this.onHeaderClick(t)}}.bind(this)})}}var a=this.getView().byId("kpiNumberValue");if(a){a.addEventDelegate({onAfterRendering:function(){var t=a.$();var e=t.find(".sapMNCValueScr");var i=t.find(".sapMNCScale");e.attr("aria-label",e.text());i.attr("aria-label",i.text());var r=this.getView().byId("ovpCardHeader").getDomRef();var n=this.getOwnerComponent().getComponentData();if(!!n&&!!n.appComponent){var o=n.appComponent;if(!!o.getModel("ui")){var s=o.getModel("ui");if(!!s.getProperty("/containerLayout")&&s.getProperty("/containerLayout")==="resizable"){var l=n.appComponent.getDashboardLayoutUtil();if(!!l){l.setKpiNumericContentWidth(r)}}}}}.bind(this)})}},exit:function(){if(this.resizeHandlerId){o.deregister(this.resizeHandlerId)}},onAfterRendering:function(){var t=this.getView().byId("ovpCardHeader");var e=t&&t.getDomRef();var a=this.getView().byId("ovpHeaderTitle"),i=this.getView().byId("ovpQuickviewCardHeader");if(e&&!e.getAttribute("ariaLabelledBy")){if(a&&a.getText()){var r=a.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",r)}else if(i&&i.getText()){var s=i.getDomRef().getAttribute("id");e.setAttribute("arialabelledby",s)}}var l=this.getCardPropertiesModel();this.enableClick=true;var d=l.getProperty("/contentFragment"),p=this.getOwnerComponent().getComponentData(),c=this.getCardItemsBinding();if(!c&&T.hidePlaceholderNeeded()){T.hidePlaceholder()}this._handleCountHeader();this._handleKPIHeader();var g=l.getProperty("/selectedKey");if(g&&l.getProperty("/state")!=="Loading"){var v=this.getView().byId("ovp_card_dropdown");if(v){v.setSelectedKey(g)}}try{var p=this.getOwnerComponent().getComponentData();if(p&&p.appComponent){var h=p.appComponent;if(h.getModel("ui")){var f=h.getModel("ui");if(f.getProperty("/containerLayout")==="resizable"){var u=h.getDashboardLayoutUtil();if(u){this.oDashboardLayoutUtil=u;this.cardId=p.cardId;if(u.isCardAutoSpan(p.cardId)){this.resizeHandlerId=o.register(this.getView(),function(t){L.info("DashboardLayout autoSize:"+t.target.id+" -> "+t.size.height);u.setAutoCardSpanHeight(t)})}}}}}}catch(t){L.error("DashboardLayout autoSpan check failed.")}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var m=jQuery("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>m.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height())}}var C=0;if(p&&p.mainComponent){var y=p.mainComponent;if(y.bGlobalFilterLoaded){C=!this.checkHeaderNavForChart()&&this.checkNavigation()}}else if(n.checkIfAPIIsUsed(this)){C=this.checkAPINavigation()}var b=l.getProperty("/state");if(b!=="Loading"&&b!=="Error"){var P=l.getProperty("/template");if(P==="sap.ovp.cards.stack"){if(!C){var I=this.getView().byId("ViewAll");if(I){I=I.getDomRef();I.parentNode.removeChild(I)}}}}if(d==="sap.ovp.cards.stack.Stack"){var S=this.getView().getDomRef();var D=S&&S.querySelector(".sapOvpCardContentContainer");if(D){D.style.borderTop="none"}}var w=false;if(C){if(d?d!=="sap.ovp.cards.quickview.Quickview":true){if(d==="sap.ovp.cards.stack.Stack"){var S=this.getView().getDomRef();var O=S.querySelectorAll(".sapOvpCardContentRightHeader");if(O.length!==0){N.addClassToAllElements(O,"sapOvpCardNavigable")}}else{this.getView().addStyleClass("sapOvpCardNavigable")}}if(d&&d==="sap.ovp.cards.quickview.Quickview"){var k=this.byId("ovpCardHeader");if(k){k.addStyleClass("sapOvpCardNavigable")}}w=true}else{if(d){this.getView().addStyleClass("ovpNonNavigableItem");var k=this.byId("ovpCardHeader");if(k){k.$().removeAttr("role");k.addStyleClass("ovpNonNavigableItem")}var A=this.checkLineItemNavigation();if(!A){switch(d){case"sap.ovp.cards.list.List":var E=this.getView().byId("listItem");if(E){E.setType("Inactive")}break;case"sap.ovp.cards.table.Table":var E=this.getView().byId("tableItem");if(E){E.setType("Inactive")}break;case"sap.ovp.cards.linklist.LinkList":if(!this.checkNavigationForLinkedList()){var E=this.getView().byId("ovpCLI");if(E){E.setType("Inactive")}}break}}else if(A&&(d==="sap.ovp.cards.list.List"||d==="sap.ovp.cards.table.Table")){w=true}if(d==="sap.ovp.cards.charts.analytical.analyticalChart"&&this.checkNavigation()){w=true}}}if(!w){var M=this.getView().byId("sapOvpCardInsights");if(M&&M.getVisible()){M.setVisible(false)}}var V=this.getView().byId("ovp_card_dropdown");var F=this.getView().byId("ovp_card_dropdown_label");if(V){V.addAriaLabelledBy(F.getId())}if(n.checkIfAPIIsUsed(this)){this.initKeyboardNavigation()}},checkNavigation:function(){var t=this.getCardPropertiesModel();var e=this.getEntityType();if(e){if(t){var a=t.getProperty("/identificationAnnotationPath");var i=a;var r=t.getProperty("/contentFragment");if(r&&(r==="sap.ovp.cards.stack.Stack"||r==="sap.ovp.cards.quickview.Quickview")){var n=a?a.split(","):[];if(n&&n.length>1){if(r==="sap.ovp.cards.stack.Stack"){i=n[0]}else{i=n[1]}}}var o=e[i];if(this.isNavigationInAnnotation(o)){return 1}if(t&&t.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var s=t.getProperty("/kpiAnnotationPath");if(e&&s){var l=e[s];if(l&&l.Detail){var d=l.Detail.SemanticObject&&l.Detail.SemanticObject.String;var p=l.Detail.Action&&l.Detail.Action.String;if(d&&p){return 1}}}}}}else if(t&&t.getProperty("/template")==="sap.ovp.cards.linklist"&&t.getProperty("/staticContent")&&t.getProperty("/targetUri")){return 1}return 0},checkNavigationForLinkedList:function(){if(this.getEntityType()){var t=this.getEntityType();var e=t["com.sap.vocabularies.UI.v1.LineItem"];if(e&&(e[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){return true}}return false},checkLineItemNavigation:function(){if(this.getEntityType()){var t=this.getEntityType();var e=this.getCardPropertiesModel();if(e){var a=e.getProperty("/annotationPath");var i=t[a];return this.isNavigationInAnnotation(i)}}},isNavigationInAnnotation:function(t){if(t&&t.length){for(var e=0;e<t.length;e++){var a=t[e];if(a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1}}}return 0},checkAPINavigation:function(){var t=this.getOwnerComponent().getComponentData(),e=t.fnCheckNavigation&&typeof t.fnCheckNavigation==="function",a=e?t.fnCheckNavigation:null;if(a){if(a()){return true}}else{if(!this.checkHeaderNavForChart()&&this.checkNavigation()){return true}}return false},onHeaderClick:function(t){var e=t&&t.target&&t.target.id;if(e&&e.indexOf("sapOvpCardInsights")>-1){return}var a=t.ctrlKey||t.metaKey?b.constants.explace:b.constants.inplace;if(n.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){r.onHeaderClicked()}}else{var i=this.getCardPropertiesModel();var o=i.getProperty("/template");var s=i.getProperty("/targetUri");if(o=="sap.ovp.cards.linklist"&&i.getProperty("/staticContent")!==undefined&&s){window.location.href=s}else if(i.getProperty("/staticContent")!==undefined&&s===""){return}else if(this.checkHeaderNavForChart()){return}else{this.doNavigation(this.getView().getBindingContext(),null,a)}}},checkHeaderNavForChart:function(){var t=this.getCardPropertiesModel();var e=t.getProperty("/template");var a=t.getProperty("/navigation");if(a=="noHeaderNav"&&(e=="sap.ovp.cards.charts.analytical"||"sap.ovp.cards.charts.smart.chart")){return true}else{return false}},resizeCard:function(t){L.info(t);if(this.resizeHandlerId){o.deregister(this.resizeHandlerId);this.resizeHandlerId=null}},_handleCountHeader:function(){var t=this.getView().byId("ovpCountHeader");if(t){var e=this.getCardItemsBinding();if(e){if(e.isLengthFinal()&&e.getLength()>0){this.setHeaderCounter(e,t)}e.attachDataReceived(function(a){if(T.hidePlaceholderNeeded()){T.hidePlaceholder()}this.setHeaderCounter(e,t,a)}.bind(this));e.attachChange(function(a){this.setHeaderCounter(e,t,a)}.bind(this))}}else{var e=this.getCardItemsBinding();if(e){e.attachDataReceived(function(){if(T.hidePlaceholderNeeded()){T.hidePlaceholder()}})}}},setHeaderCounter:function(t,e,a){var i;if(t.isLengthFinal()){i=t.getLength()}else{if(a&&a.getParameters().data&&a.getParameters().data.results){i=a.getParameters().data.results.length}}var r=t.getCurrentContexts().length;var n,o="";var l=s.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});r=parseFloat(r,10);var d=this.getOwnerComponent().getComponentData();if(d&&d.appComponent){var p=d.appComponent;if(p.getModel("ui")){var c=p.getModel("ui");if(c.getProperty("/containerLayout")!=="resizable"){if(i!==0){i=l.format(Number(i))}if(r!==0){r=l.format(Number(r))}}else{n=p.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(d.cardId)}}}if(r===0){o=""}else if(n&&n.dashboardLayout.showOnlyHeader){o=y.getText("Count_Header_Total",[i])}else if(i!=r){o=y.getText("Count_Header",[r,i])}e.setText(o);e.addEventDelegate({onAfterRendering:function(){var t=e.$();t.attr("aria-label",o)}})},_handleKPIHeader:function(){var t,e;if(this.getView()&&this.getView().getDomRef()){t=this.getView().getDomRef().getElementsByClassName("numericContentHbox");e=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(t||e){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var r=i.getParameter("data")&&i.getParameter("data").results&&i.getParameter("data").results[0];var n=a.getLength();if(t[0]){t[0].style.visibility=null;if(n===0){this._setSubTitleWithUnitOfMeasure(r,false);t[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasure(r,true);t[0].style.visibility="visible"}}if(e.length!==0){e[0].style.display="none";if(n===0){e[0].style.display="flex"}}}.bind(this))}}},getKPIBinding:function(){var t=this.byId("kpiHBoxNumeric"),e=t&&t.getBindingInfo("items")&&t.getBindingInfo("items").binding;return e},_setSubTitleWithUnitOfMeasure:function(t,e){var a=this.getCardPropertiesModel();if(!!a){var i=a.getData();var n=this.getView().byId("SubTitle-Text");var o="";if(!!n){n.setText(i.subTitle);if(!!i&&!!i.entityType&&!!i.dataPointAnnotationPath&&e){var s=a.getData().entityType;var l=i.dataPointAnnotationPath.split("/");var d=l.length===1?s[i.dataPointAnnotationPath]:s[l[0]][l[1]];var p;if(d&&d.Value&&d.Value.Path){p=d.Value.Path}else if(d&&d.Description&&d.Description.Value&&d.Description.Value.Path){p=d.Description.Value.Path}if(!!p){var c=r.getUnitColumn(p,s);var g;if(!!c&&!!t){o=c;g=t[c]}else{g=r.getUnitColumn(p,s,true);o=g}if(a.getProperty("/bInsightEnabled")){k.setUoMForSubTitle(a.getData().cardId,o)}var v=y.getText("SubTitle_IN");if(!!i.subTitle&&!!v&&!!g){n.setText(i.subTitle+" "+v+" "+g);var h=n.getAggregation("customData");if(h){var f;for(f in h){var u=h[f];if(u.getKey()==="aria-label"){u.setValue(i.subTitle+" "+v+" "+g);break}}}}}}}}},getCardItemsBinding:function(){},onActionPress:function(t){var e=t.getSource(),a=this._getActionObject(e),i=e.getBindingContext();if(a.type.indexOf("DataFieldForAction")!==-1){this.doAction(i,a)}else{this.doNavigation(i,a)}},_getActionObject:function(t){var e=t.getCustomData();var a={};for(var i=0;i<e.length;i++){a[e[i].getKey()]=e[i].getValue()}return a},doNavigation:function(t,e,a){if(!a){a=b.constants.inplace}if(!this.enableClick){return}this.enableClick=false;setTimeout(function(){this.enableClick=true}.bind(this),1e3);if(!this.oMainComponent){return}if(!e){e=this.getEntityNavigationEntries(t)[0]}var i=S({},t);var r=S({},e);var n=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,i,r);var o=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,i,r);var s;if(n){s=n}if(o){s=o}if(s){var l=s.type;if(l&&typeof l==="string"&&l.length>0){l=l.split(".").pop().split("/").pop().toLowerCase();switch(l){case"datafieldwithurl":s.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":s.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break}e=s}}function d(a){if(!a){a=b.constants.inplace}if(e){switch(e.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(t,e,a);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(t,e,false,a);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(t,e,false,a);break}}}if(!this.oMainComponent.oAppStatePromise){d.call(this,a)}else{this.oMainComponent.oAppStatePromise.then(d.bind(this,a))}},doNavigationWithUrl:function(t,e,a){if(!a){a=b.constants.inplace}if(!(sap.ushell&&sap.ushell.Container)){if(e&&e.url){O(e.url,"newWindow")}return}var i=sap.ushell.Container.getService("URLParsing");if(!i.isIntentUrl(e.url)){O(e.url,"newWindow")}else{var r=i.parseShellHash(e.url);var n=r.appSpecificRoute?true:false;this.doIntentBasedNavigation(t,r,n,a)}},fnHandleError:function(t){if(t instanceof c){if(t.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){p.show(y.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:y.getText("OVP_GENERIC_ERROR_TITLE")})}else{p.show(t.getErrorCode(),{title:y.getText("OVP_GENERIC_ERROR_TITLE")})}}},doCrossApplicationNavigation:function(t,e){var a="#"+t.semanticObject+"-"+t.action;if(t.params){var i=this.oCardComponent&&this.oCardComponent.getComponentData();var r=i&&i.appComponent;if(r){var n=r._formParamString(t.params);a=a+n}}var o=this;if(!sap.ushell.Container){return}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([a]).done(function(t){if(t[a].supported===true){if(!!e.params){if(typeof e.params=="string"){try{e.params=JSON.parse(e.params)}catch(t){L.error("Could not parse the Navigation parameters");return}}}var i=o.getOwnerComponent().getComponentData();var r=i?i.globalFilter:undefined;var n=r&&r.getUiState({allFilters:false});var s=n?JSON.stringify(n.getSelectionVariant()):"{}";r=JSON.parse(s);var l=o._getFilterPreference();r=o._removeFilterFromGlobalFilters(l,r);if(!e.params){e.params={}}if(!!r&&!!r.SelectOptions){for(var d=0;d<r.SelectOptions.length;d++){var p=r.SelectOptions[d].Ranges;if(!!p){var g=[];for(var v=0;v<p.length;v++){if(p[v].Sign==="I"&&p[v].Option==="EQ"){g.push(p[v].Low)}}e.params[r.SelectOptions[d].PropertyName]=g}}}sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(e)}else{var h=new c("NavigationHandler.isIntentSupported.notSupported");o.fnHandleError(h)}}).then(function(){L.error("Could not get authorization from isIntentSupported")})},doIntentBasedNavigation:function(t,e,a,i){if(!i){i=b.constants.inplace}var n=this.oCardComponent&&this.oCardComponent.getComponentData();if(n&&n.appComponent&&n.appComponent.ovpConfig&&n.appComponent.ovpConfig.isTeamsModeActive){i=b.constants.explace}if(sap.ushell&&!sap.ushell.Container){return}var o,s,l,d=t?t.getObject():null;var p=this.getCardPropertiesModel(),c=p.getProperty("/customParams");if(t&&typeof t.getAllData==="function"&&c){l=t.getAllData()}else if(p.getProperty("/staticContent")){l={iStaticLinkListIndex:e.iStaticLinkListIndex,bStaticLinkListIndex:true}}if(d&&d.__metadata){delete d.__metadata}var g=r.getNavigationHandler();if(g){if(e){o=this._getEntityNavigationParameters(d,l,t);s={target:{semanticObject:e.semanticObject,action:e.action},appSpecificRoute:e.appSpecificRoute,params:o.sNavSelectionVariant};var v={};if(o.sNavPresentationVariant){v.presentationVariant=o.sNavPresentationVariant}if(a){if(e&&e.semanticObject&&e.action){var h=this.getCardPropertiesModel().getProperty("/staticParameters");s.params=!!h?h:{};this.doCrossApplicationNavigation(e,s)}}else{g.navigate(s.target.semanticObject,s.target.action,s.params,null,this.fnHandleError,v,i)}}}},doAction:function(t,a){this.actionData=e.getActionInfo(t,a,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm()}else{this._callFunction()}},getEntityNavigationEntries:function(t,e){var a=[];var i=this.getEntityType();var r=this.getCardPropertiesModel();var n=r.getProperty("/template");if(!i){return a}if(!e&&!t){if(!this.oCardComponentData.settings.identificationAnnotationPath){var o=r.getProperty("/kpiAnnotationPath");if(o&&n==="sap.ovp.cards.charts.analytical"){e=o;var s=i[e];var p=s&&s.Detail;var c=p.SemanticObject&&p.SemanticObject.String;var v=p.Action&&p.Action.String;if(p.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){if(c&&v){a.push({type:p.RecordType,semanticObject:c,action:v,label:""})}else{L.error("Invalid Semantic object and action configured for annotation "+p.RecordType)}}}}}if(!e){var h=r.getProperty("/identificationAnnotationPath");var f=h?h.split(","):[];if(f&&f.length>1){e=f[0]}else{e=h}}var u=i[e];if(Array.isArray(u)){u=l.sortCollectionByImportance(u);for(var m=0;m<u.length;m++){if(u[m].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){a.push({type:u[m].RecordType,semanticObject:u[m].SemanticObject.String,action:u[m].Action.String,label:u[m].Label?u[m].Label.String:null})}if(u[m].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!u[m].Url.UrlRef){var C=this.getView().getModel();var y=C.oMetaModel;var b=y.createBindingContext(i.$path);var P=d.format(b,u[m].Url);var I=new g({key:"url",value:P});if(t&&n==="sap.ovp.cards.charts.analytical"){C=t.getModel()}I.setModel(C);I.setBindingContext(t);var S=I.getValue();a.push({type:u[m].RecordType,url:S,value:u[m].Value.String,label:u[m].Label?u[m].Label.String:null})}}}return a},getModel:function(){if(this.getView()){return this.getView().getModel()}},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel()}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||w(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties")}return this.oCardPropertiesModel},getEntitySet:function(){if(!this.entitySet){var t=this.getCardPropertiesModel().getProperty("/entitySet");this.entitySet=this.getMetaModel().getODataEntitySet&&this.getMetaModel().getODataEntitySet(t)}return this.entitySet},getEntityType:function(){if(!this.entityType){if(this.getMetaModel()&&this.getEntitySet()){this.entityType=this.getMetaModel().getODataEntityType(this.getEntitySet().entityType)}}return this.entityType},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer")}return this.cardContentContainer},_processCustomParameters:function(t,e,a){var i=this.getCardPropertiesModel();if(!this.oMainComponent||!i){return}var r;if(t&&t.bStaticLinkListIndex){var n=i.getProperty("/staticContent");r=n[t.iStaticLinkListIndex]["customParams"];t=null}else{r=i.getProperty("/customParams")}if(!r||!this.oMainComponent.templateBaseExtension.provideCustomParameter||!this.oMainComponent.onCustomParams){return}var o=this.oMainComponent.templateBaseExtension.provideCustomParameter(r)?this.oMainComponent.templateBaseExtension.provideCustomParameter(r):this.oMainComponent.onCustomParams(r);if(!o||!N.checkIfFunction(o)){return}var s=S({},t);var l=S({},e);var d=o(s,l);if(!d||!Array.isArray(d)&&!I(d)){return}var p=I(d);if(p&&w(d)){return}var c=p&&(d.bIgnoreEmptyString||d.ignoreEmptyString);var g=p?d.aSelectionVariant||d.selectionVariant:d;if(!Array.isArray(g)){return}var v,h,f,u,m,C;h=g.length;for(v=0;v<h;v++){f=g[v];if(!f){continue}u=f.path;m=f.value1;C=f.value2;if(!u||typeof u!=="string"||u===""){L.error("Custom Variant property path '"+u+"' should be valid string");continue}if(!(m||m===0||m===false||m===""||m===""&&c)){continue}m=m.toString();C=C&&C.toString();if(m===""&&c){e.removeSelectOption(u)}if(t){delete t[u]}if(a){delete a[u]}e.addSelectOption(u,f.sign,f.operator,m,C)}if(c){this._removeEmptyStringsFromSelectionVariant(e)}return c},_getEntityNavigationParameters:function(t,e,n){var o={};var s,d,p;var c=this.getOwnerComponent().getComponentData();var g=c?c.globalFilter:undefined;var h=this.getCardPropertiesModel();var f=h&&h.getProperty("/staticContent");if(!f){var u=l.getCardSelections(this.getCardPropertiesModel());var m=u.filters;var y=u.parameters;var b=this.getEntityType();m&&m.forEach(function(t){t.path=t.path.replace("/",".");switch(t.operator){case v.NE:t.operator=v.EQ;t.sign="E";break;case v.Contains:t.operator="CP";var e=t.value1;t.value1="*"+e+"*";break;case v.EndsWith:t.operator="CP";var e=t.value1;t.value1="*"+e;break;case v.StartsWith:t.operator="CP";var e=t.value1;t.value1=e+"*"}});u.filters=m;if(n&&t&&t.hasOwnProperty("$isOthers")){var P=n.getOtherNavigationDimensions();for(var I in P){var S=P[I];for(var D=0;D<S.length;D++){u.filters.push({path:I,operator:"EQ",value1:S[D],sign:"E"})}}}y&&y.forEach(function(t){t.path=t.path.replace("/",".")});u.parameters=y;var N=l.getCardSorters(this.getCardPropertiesModel());if(t){var I;for(var D=0;b.property&&D<b.property.length;D++){I=b.property[D].name;var w=t[I];if(t.hasOwnProperty(I)){if(Array.isArray(t[I])&&t[I].length===1){o[I]=t[I][0]}else if(jQuery.type(w)!=="object"){o[I]=w}}}}var O=h&&h.getProperty("/kpiAnnotationPath");var T=h&&h.getProperty("/template");if(O&&T==="sap.ovp.cards.charts.analytical"){var k=b[O];var A=k&&k.Detail;if(A&&A.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){o["kpiID"]=k.ID.String}}d=N&&new i(N);s=this._buildSelectionVariant(g,u);p=h&&h.getProperty("/staticParameters")}else{var E=g&&g.getUiState({allFilters:false});var M=E?JSON.stringify(E.getSelectionVariant()):"{}";s=new a(M);var V=this._getFilterPreference();s=this._removeFilterFromGlobalFilters(V,s);if(f[e.iStaticLinkListIndex].params){p=f[e.iStaticLinkListIndex].params}else if(f[e.iStaticLinkListIndex].staticParameters){p=f[e.iStaticLinkListIndex].staticParameters}}var F;if(e&&!e.bStaticLinkListIndex){F=this._processCustomParameters(e,s,o)}else if(e&&e.bStaticLinkListIndex){F=this._processCustomParameters(e,s)}else{F=this._processCustomParameters(o,s)}var L=F?C.navigation.service.SuppressionBehavior.ignoreEmptyString:undefined;if(p){for(var I in p){if(!o.hasOwnProperty(I)){o[I]=p[I]}}}var x=r.getNavigationHandler();var _=x&&x.mixAttributesAndSelectionVariant(o,s.toJSONString(),L);if(!f){this._removeSensitiveAttributesFromNavSelectionVariant(b,_)}return{sNavSelectionVariant:_?_.toJSONString():null,sNavPresentationVariant:d?d.toJSONString():null}},_removeSensitiveAttributesFromNavSelectionVariant:function(t,e){for(var a=0;a<t.property.length;a++){if(t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&t.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool){delete e._mSelectOptions[t.property[a].name]}}},_removeEmptyStringsFromSelectionVariant:function(t){var e=t.getParameterNames();for(var a=0;a<e.length;a++){if(t.getParameter(e[a])===""){t.removeParameter(e[a])}}var i=t.getSelectOptionsPropertyNames();for(a=0;a<i.length;a++){var r=t.getSelectOption(i[a]);for(var n=0;n<r.length;n++){if(r[n].Low===""&&!r[n].High){r.splice(n,1);n--}}if(r.length===0){t.removeSelectOption(i[a])}}return t},_checkIfCardFiltersAreValid:function(t,e){var a=true;if(t&&t.filterAll==="global"){a=false}else if(t&&t.globalFilter){if(t.globalFilter.indexOf(e)>=0){a=false}}return a},_getFilterPreference:function(){var t=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;var e;if(t&&t.mainComponent){e=t.mainComponent._getFilterPreference(t.cardId)}return e},_removeFilterFromGlobalFilters:function(t,e){var a=[];if(t&&t.filterAll==="card"){a=e.getSelectOptionsPropertyNames()}else if(t&&t.cardFilter){a=t.cardFilter}a.forEach(function(t){if(t!=="$.basicSearch"){e.removeSelectOption(t)}});return e},_buildSelectionVariant:function(t,e){var i=t&&t.getUiState({allFilters:false});var r=i?JSON.stringify(i.getSelectionVariant()):"{}";var n=new a(r);var o,s,l,d;var p=this._getFilterPreference();n=this._removeFilterFromGlobalFilters(p,n);var c=e.filters;var g=e.parameters;for(var v=0;v<c.length;v++){o=c[v];if(o.path&&o.operator&&typeof o.value1!=="undefined"){s=o.value1.toString();l=typeof o.value2!=="undefined"?o.value2.toString():undefined;if(this._checkIfCardFiltersAreValid(p,o.path)){n.addSelectOption(o.path,o.sign,o.operator,s,l)}}}var h,f,u;for(var m=0;m<g.length;m++){d=g[m];if(!d.path||!d.value){continue}h=d.path.split("/").pop();h=h.split(".").pop();if(h.indexOf("P_")===0){f=h;u=h.substr(2)}else{f="P_"+h;u=h}if(n.getParameter(f)){continue}if(n.getParameter(u)){continue}n.addParameter(h,d.value)}return n},_loadParametersForm:function(){var t=new h;t.setData(this.actionData.parameterData);var a=this;var i=new f("ovpCardActionDialog",{title:this.actionData.sFunctionLabel,afterClose:function(){i.destroy()}}).addStyleClass("sapUiNoContentPadding");var r=new u({text:this.actionData.sFunctionLabel,press:function(t){var r=e.getParameters(t.getSource().getModel(),a.actionData.oFunctionImport);i.close();a._callFunction(r,a.actionData.sFunctionLabel)}});var n=new u({text:"Cancel",press:function(){i.close()}});i.setBeginButton(r);i.setEndButton(n);var o=function(t){var i=e.mandatoryParamsMissing(t.getSource().getModel(),a.actionData.oFunctionImport);r.setEnabled(!i)};var s=e.buildParametersForm(this.actionData,o);i.addContent(s);i.setModel(t);i.open()},_callFunction:function(t,e){var a={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:t,forceSubmit:true,context:this.actionData.oContext,functionImport:this.actionData.oFunctionImport};var i=this;var n=new Promise(function(t,r){var n=i.actionData.oContext.getModel();var o;o="/"+a.functionImport.name;n.callFunction(o,{method:a.functionImport.httpMethod,urlParameters:a.urlParameters,batchGroupId:a.batchGroupId,changeSetId:a.changeSetId,headers:a.headers,success:function(e,a){t(a)},error:function(t){t.actionText=e;r(t)}})});n.then(function(t){return m.show(y.getText("Toast_Action_Success"),{duration:1e3})},function(t){var e=r.showODataErrorMessages(t);if(e===""&&t.actionText){e=y.getText("Toast_Action_Error")+' "'+t.actionText+'"'+"."}return p.error(e,{title:y.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:F.Inherit})})},setErrorState:function(){var t=this.getOwnerComponent();if(!t||!t.oContainer){return}var e=t.oContainer;var a=this.getCardPropertiesModel();var i={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:a.getProperty("/category"),title:a.getProperty("/title"),description:a.getProperty("/description"),entitySet:a.getProperty("/entitySet"),state:b.loadingState.ERROR,template:a.getProperty("/template")}}};A.create(i).then(function(a){e.setComponent(a);setTimeout(function(){t.destroy()},0)})},changeSelection:function(t,e,a){if(!e){var i=this.getView().byId("ovp_card_dropdown");t=parseInt(i.getSelectedKey(),10)}var r={};if(!e){r=this.getCardPropertiesModel().getProperty("/tabs")[t-1]}else{r=a.tabs[t-1]}var o={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:t};for(var s in r){o[s]=r[s]}if(n.checkIfAPIIsUsed(this)){n.recreateCard(o,this.getOwnerComponent().getComponentData())}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(o);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,t)}},getItemHeight:function(t,e,a){if(!!t){var i=t.getView().byId(e);var r=0;if(!!i){if(a){if(i.getItems()[0]&&i.getItems()[0].getDomRef()){r=N.getOuterHeight(i.getItems()[0].getDomRef())}}else{if(i.getDomRef()){r=N.getOuterHeight(i.getDomRef())}}}return r}},getHeaderHeight:function(){var t=this.getItemHeight(this,"ovpCardHeader"),e=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(e&&e.appComponent){var a=e.appComponent.getDashboardLayoutUtil(),i=a.getDashboardLayoutModel().getCardById(e.cardId);if(t!==0){i.dashboardLayout.headerHeight=t}}return t},onShowAdditionalCardActions:function(t){var e=t.getSource();t.cancelBubble();if(!this.additionalCardActionsPopover){this.additionalCardActionsPopover=V.load({id:this.getView().getId(),name:"sap.ovp.cards.generic.HeaderActions",controller:this}).then(function(t){this.getView().addDependent(t);return t}.bind(this))}this.additionalCardActionsPopover.then(function(t){t.openBy(e)})},saveGeneratedCardManifest:function(t){var e=this.oCardComponentData.cardId,a=this.oCardComponentData.settings.selectedKey,i=this.getView(),r=i.getModel("ovpCardProperties"),n=r&&r.getProperty("/bInsightDTEnabled");if(n){var o=a?e+"/tab_"+a:e;jQuery.ajax({type:"POST",url:"/editor/card/"+o+"/manifest",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),success:function(t){L.info("Success:",t)},error:function(t){L.error("Error:",t)}})}},refreshCardContent:function(){if(this.getKPIBinding()){this.getKPIBinding().refresh()}if(this.getCardItemsBinding()){this.getCardItemsBinding().refresh()}}})});
sap.ui.predefine("sap/ovp/cards/generic/Component", ["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ui/core/mvc/XMLView","sap/ui/base/Object","sap/ui/core/Core"],function(e,t,a,n,i,o,r,s,l,d,p,c){"use strict";var u=new l("OVP.generic.Component");return e.extend("sap.ovp.cards.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsight:{type:"boolean",defaultValue:false}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},setSelectionVariant:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.selectionAnnotationPath=e},setPresentationVariant:function(e,t,a){if(/^@/.test(e)){e=e.slice(1)}t.presentationAnnotationPath=e;var n=e.split("/");var i=n.length===1?a[e].Visualizations:a[n[0]][n[1]][n[2]].Visualizations;var o;for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.LineItem/.test(r)){t.annotationPath=r;break}}}for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){t.chartAnnotationPath=r;break}}}},setDataPointAnnotationPath:function(e,t){if(/^@/.test(e)){e=e.slice(1)}t.dataPointAnnotationPath=e},getCustomPreprocessor:function(){},getPreprocessors:function(e){var i=this.getComponentData(),o=i.settings,l=i.model,d,p,c,u;if(o.description&&!o.subTitle){o.subTitle=o.description}if(l&&a.isODataV4(l)){d=l&&l.getMetaModel();var f="/"+o.entitySet;var p=d.getObject(f);u=d.createBindingContext(f);if(p&&p["$Type"]){c=d.createBindingContext("/"+p["$Type"])}}else if(l&&o.entitySet){d=l&&l.getMetaModel();var v=d.getODataEntitySet(o.entitySet);var h=d.getODataEntitySet(o.entitySet,true);p=d.getODataEntityType(v.entityType);u=d.createBindingContext(h);c=d.createBindingContext(p.$path)}var g=this._getCardPropertyDefaults();var m=this._completeLayoutDefaults(g,o);var y,C;if(i.appComponent&&i.appComponent.getModel("ui")&&i.appComponent.getModel("ui").oData){var b=i.appComponent.getModel("ui").oData;y=b.showDateInRelativeFormat;C=b.disableTableCardFlexibility}else{if(i.showDateInRelativeFormat){y=i.showDateInRelativeFormat}if(i.disableTableCardFlexibility){C=i.disableTableCardFlexibility}}if(i.ovpCardsAsApi){i.settings.enableAddToInsight=false}var P=i&&i.appComponent&&i.appComponent.ovpConfig||{};var D={metaModel:d,entityType:p,webkitSupport:n.browser.webkit,layoutDetail:m&&m.cardLayout?m.cardLayout.containerLayout:"fixed",bInsightDTEnabled:P.bInsightDTEnabled||false,bInsightRTEnabled:P.bInsightRTEnabled||false,bInsightEnabled:P.bInsightDTEnabled||P.bInsightRTEnabled||false,showDateInRelativeFormat:y,disableTableCardFlexibility:C,cardId:i.cardId};if(!!i&&!!i.cardId){var I=i.mainComponent;var T=null;if(!!I){T=I._getCardFromManifest(i.cardId)?I._getCardFromManifest(i.cardId).template:null}else{T=i.template}if(!!T){D.template=T}}g.densityStyle=a._setCardpropertyDensityAttribute();if(i.errorReason){var V=i.errorReason;var A=V.getParameters?V.getParameters():V.mParameters;var M="sap-icon://message-error";if(A&&A.response){g.errorStatusCode=A.response.statusCode;g.errorStatusText=A.response.statusText;g.responseText=A.response.responseText;g.sMessageIcon=A.response.sIcon?A.response.sIcon:M}}if(m){D.cardLayout=m.cardLayout}if(g.state!=="Error"){if(o&&o.kpiAnnotationPath){var L=p[o.kpiAnnotationPath];var S=g.contentFragment;if(L&&(S==="sap.ovp.cards.charts.analytical.analyticalChart"||S==="sap.ovp.cards.charts.smart.analyticalChart")){var x=L.SelectionVariant&&L.SelectionVariant.Path?L.SelectionVariant.Path:o.kpiAnnotationPath+"/SelectionVariant";if(x){this.setSelectionVariant(x,o)}var O=L.Detail&&L.Detail.DefaultPresentationVariant&&L.Detail.DefaultPresentationVariant.Path?L.Detail.DefaultPresentationVariant.Path:o.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(O){this.setPresentationVariant(O,o,p)}var R=L.DataPoint&&L.DataPoint.Path?L.DataPoint.Path:o.kpiAnnotationPath+"/DataPoint";if(R){this.setDataPointAnnotationPath(R,o)}}}else if(o&&o.selectionPresentationAnnotationPath){var w=p[o.selectionPresentationAnnotationPath];if(w){var x=w.SelectionVariant&&w.SelectionVariant.Path;if(x){this.setSelectionVariant(x,o)}var O=w.PresentationVariant&&w.PresentationVariant.Path;if(O){this.setPresentationVariant(O,o,p)}}}}if(i.ovpCardsAsApi&&o.ignoreSelectionVariant){o.selectionAnnotationPath="";var F=[];for(var B=0;!!o.filters&&B<o.filters.length;B++){F.push({id:"headerFilterText--"+(B+1),index:B})}o.idForExternalFilters=F}if(!!D.entityType&&!!o.selectionAnnotationPath&&!!D.entityType[o.selectionAnnotationPath]){var k=D.entityType[o.selectionAnnotationPath].SelectOptions;for(var _=0;!!k&&_<k.length;_++){k[_].id="headerFilterText--"+(_+1)}D.entityType[o.selectionAnnotationPath].SelectOptions=k}if((D.template==="sap.ovp.cards.linklist"||D.template==="sap.ovp.cards.v4.linklist")&&!!o.staticContent){for(var E=0;E<o.staticContent.length;E++){o.staticContent[E].id="linkListItem--"+(E+1)}}else if(D.template==="sap.ovp.cards.charts.analytical"){o.dataStep=o.dataStep?o.dataStep:10}g=s.merge(true,{},D,g,o);var U=new t(g);var j={xml:{bindingContexts:{entityType:c,entitySet:u},models:{device:a.deviceModel,entityType:d,entitySet:d,ovpMeta:d,ovpCardProperties:U,ovplibResourceBundle:e,ovpConstants:a.ovpConstantModel},ovpCardProperties:U,dataModel:l,_ovpCache:{}}};return r({},this.getCustomPreprocessor(),j)},_completeLayoutDefaults:function(e,t){var a={},n=this.getComponentData(),i=null,o=null;if(n.appComponent){i=n.appComponent.getOvpConfig()}if(!i){return null}if(i.containerLayout==="resizable"&&n.cardId&&e.contentFragment!=="sap.ovp.cards.quickview.Quickview"){o=n.appComponent.getDashboardLayoutUtil();var r=n.cardId;var s=o.aCards.filter(function(e){return e.id===r});a.cardLayout=s[0].dashboardLayout;a.cardLayout.containerLayout=i.containerLayout;a.cardLayout.iRowHeightPx=o.ROW_HEIGHT_PX;a.cardLayout.iCardBorderPx=o.CARD_BORDER_PX;a.cardLayout.headerHeight=s[0].dashboardLayout.headerHeight}return a},_getCardPropertyDefaults:function(){var e={};var t=this.getMetadata().getAllProperties();var a;for(var n in t){a=t[n];if(a.defaultValue!==undefined){e[a.name]=a.defaultValue}}return e},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var e=c.getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=e?new i({bundleUrl:e.oUrlInfo.url}):null}return this.ovplibResourceBundle},_getCacheKeys:function(){var e=this.getComponentData&&this.getComponentData();if(e.ovpCardsAsApi){return}if(e.appComponent&&!p.isA(e.appComponent,"sap.ui.base.ManagedObject")){return}var t=e&&e.settings&&e.settings.isObjectStream;if(t){return}var a=e&&e.model;if(a){var n=[];if(a.metadataLoaded&&typeof a.metadataLoaded==="function"){var i=a.metadataLoaded().then(function(e){var t;if(e&&e.lastModified){t=new Date(e.lastModified).getTime()+""}else{u.error("No valid cache key segment last modification date provided by the OData Model");t=(new Date).getTime()+""}return t});n.push(i)}if(a.annotationsLoaded&&typeof a.metadataLoaded==="function"){var o=a.annotationsLoaded().then(function(e){var t=0;if(e){for(var a=0;a<e.length;a++){if(e[a].lastModified){var n=new Date(e[a].lastModified).getTime();if(n>t){t=n}}}}if(t===0){u.error("No valid cache key segment last modification date provided by OData annotations");t=(new Date).getTime()}return t+""});n.push(o)}return n}},createContent:function(){var e=this.getComponentData&&this.getComponentData();var t=e.model;var a;var n;var i=e&&e.mainComponent;var r=i&&i.oModelViewMap;var s=e&&e.modelName;var l=function(){if(t&&s){t.bIncludeInCurrentBatch=false;if(r&&s&&r[s]&&r[s][e.cardId]){delete r[s][e.cardId];if(Object.keys(r[s]).length>0){t.bIncludeInCurrentBatch=true}}}};if(e&&e.mainComponent){a=e.mainComponent._getOvplibResourceBundle()}else{a=this.getOvplibResourceBundle()}n=this.getPreprocessors(a);var p={preprocessors:n,type:o.XML,viewName:"sap.ovp.cards.generic.Card"};var c=this._getCacheKeys();if(c&&c.length&&c.length>0){p.async=true;p.cache={keys:c}}var u=this._getCardPropertyDefaults().state;var f=e.cardId+(u?u:"Original");if(!u){f=f+(e.settings.selectedKey?"_Tab"+e.settings.selectedKey:"")}if(t&&t.bUseBatch&&!p.async){l()}if(e.appComponent&&typeof e.appComponent.createId==="function"){f=e.appComponent.createId(f)}var v=new d(e.containerId==="dialogCard"?undefined:f,p);if(p.async){var h=v.onControllerConnected;v.onControllerConnected=function(){if(t&&t.bUseBatch){l()}return h.apply(v,arguments)}}v.setModel(t);if(e.i18n){v.setModel(e.i18n,"@i18n")}v.setModel(n.xml.ovpCardProperties,"ovpCardProperties");v.setModel(a,"ovplibResourceBundle");return v}})});
sap.ui.predefine("sap/ovp/cards/jUtils", ["sap/base/Log"],function(e){"use strict";return{setAttributeToMultipleElements:function(e,t,n){var r=document.querySelectorAll(e);for(var o=0;o<r.length;o++){r[o].setAttribute(t,n)}},getElementWidth:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).width.replace("px",""))},getElementHeight:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).height.replace("px",""))},removeElementById:function(e){var t=document.getElementById(e);if(t){t.parentNode.removeChild(t)}return},addClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.add(t)})}else{e.classList.add(t)}}},removeClassToAllElements:function(e,t){if(e){if(e.length){e.forEach(function(e){e.classList.remove(t)})}else{e.classList.remove(t)}}},checkIfFunction:function(e){if(typeof e==="function"){return true}return false},getIndex:function(e){var t=e.parentNode.childNodes;var n=0;for(var r=0;r<t.length;r++){if(t[r]==e){return n}if(t[r].nodeType==1){n++}}return-1},addStyleToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.style[t]=n})}else{e.style[t]=n}}},addAttributeToAllElements:function(e,t,n){if(e){if(e.length){e.forEach(function(e){e.setAttribute(t,n)})}else{e.setAttribute(t,n)}}},getOuterHeight:function(e){var t=e.offsetHeight;var n=getComputedStyle(e);t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10);return t},removeAttributesFromAll:function(e,t,n){if(e){e.forEach(function(e){var r=e.querySelectorAll(t);if(r){for(var o=0;o<r.length;o++){r[o].removeAttribute(n)}}})}}}},true);
sap.ui.predefine("sap/ovp/cards/linklist/AnnotationHelper", ["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ovp/cards/ovpLogger"],function(e,t,r,n){"use strict";var a=new n("OVP.linklist.AnnotationHelper");function i(e){var t=[];var r,n;var a=e.getProperty("/sortBy");if(a){var i=e.getProperty("/sortOrder");if(i&&i.toLowerCase()!=="descending"){n=false}else{n=true}r={path:a,descending:n};t.push(r)}return t}function o(t,n){var i=[];var o=t.getProperty("/filters");if(o){i=i.concat(o)}var s=n&&n.SelectOptions;var f,l,u;if(s){for(var g=0;g<s.length;g++){f=s[g];l=f.PropertyName.PropertyPath;for(var p=0;p<f.Ranges.length;p++){u=f.Ranges[p];if(u.Sign.EnumMember){var d={path:l,operator:u.Option.EnumMember.split("/")[1],value1:e.getPrimitiveValue(u.Low),value2:e.getPrimitiveValue(u.High),sign:u.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(d.sign==="E"&&d.operator!==r.EQ){a.error("Exclude sign is supported only with EQ operator");continue}if(d.sign==="E"&&d.operator===r.EQ){d.operator=r.NE;d.sign="I"}if(d.operator==="CP"&&d.sign==="I"){var c=r.Contains;var v=d.value1;if(v){var y=v.indexOf("*");var P=v.lastIndexOf("*");if(y>-1){if(y===0&&P!==v.length-1){c=r.EndsWith;v=v.substring(1,v.length)}else if(y!==0&&P===v.length-1){c=r.StartsWith;v=v.substring(0,v.length-1)}else{v=v.substring(1,v.length-1)}}}d.operator=c;d.value1=v}i.push(d)}}}}return i}function s(t,r,n){var a=t.getSetting("ovpCardProperties");var s=a.getProperty("/metaModel");var f=s.getODataEntityType(r.entityType);var l="/"+r.name;var u=f[a.getProperty("/selectionAnnotationPath")];var g;var p=a.getProperty("/layoutDetail");if(p==="resizable"){var d=a.getProperty("/cardLayout");if(d){if(a.getProperty("/listFlavor")==="standard"){var c="";for(var v in n){c+=v}var y=a.getProperty("/cardLayout/iRowHeigthPx");if(y===undefined){y=16}var P;if(a.getProperty("/densityStyle")==="cozy"){P=72;if(c.indexOf("Description")===-1&&(c.indexOf("Title")>0&&c.indexOf("ImageUrl")>0||c.indexOf("Title")>0&&c.indexOf("TypeImageUrl")>0)){P=56}else if(c.indexOf("Description")===-1&&c.indexOf("Title")>0){P=48}}else{P=60;if(c.indexOf("Description")===-1&&(c.indexOf("Title")>0&&c.indexOf("ImageUrl")>0||c.indexOf("Title")>0&&c.indexOf("TypeImageUrl")>0)){P=48}else if(c.indexOf("Description")===-1&&c.indexOf("Title")>0){P=40}}a.setProperty("/cardLayout/itemHeight",P);if(!a.getProperty("/defaultSpan")&&a.getProperty("/cardLayout/autoSpan")){g=a.getProperty("/cardLayout/noOfItems");var m=Math.ceil((g*P+a.getProperty("/cardLayout/headerHeight")+2*a.getProperty("/cardLayout/iCardBorderPx"))/y);a.setProperty("/cardLayout/noOfItems",m)}else{var h=Math.floor(d.rowSpan*y-a.getProperty("/cardLayout/headerHeight")-2*a.getProperty("/cardLayout/iCardBorderPx"));g=Math.floor(h/P)*d.colSpan}}}}else{g=6}var O=t.getSetting("ovpCardProperties"),x=O.getProperty("/parameters");if(u||!!x){if(u&&u.Parameters||!!x){l=e.resolveParameterizedEntitySet(t.getSetting("dataModel"),r,u,x)}}var I="{path: '"+l+"', length: "+g;var S=i(a);if(S.length>0){I=I+", sorter:"+JSON.stringify(S)}var L=o(a,u);if(L.length>0){I=I+", filters:"+JSON.stringify(L)}var w=e.checkFilterPreference(a);if(w){I=I+", parameters:{custom: {cardId: '"+a.getProperty("/cardId")+"', _requestFrom: 'ovp_internal'}}"}else{I=I+", parameters:{custom: {_requestFrom: 'ovp_internal'}}"}I=I+"}";return I}s.requiresIContext=true;function f(e,t){var r=e.getModel().getProperty("/baseUrl");return v(r,t)}f.requiresIContext=true;function l(e,r){var n=true;var a=t.format(e,r);if(a.toLowerCase().indexOf("icon")>0){n=false}return n}l.requiresIContext=true;function u(e){var t=true;if(!e){return null}else if(e.toLowerCase().indexOf("icon")>0){t=false}return t}function g(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function p(e){var t;if(e.hasOwnProperty("Path")){t="{"+e.Path+"}"}else{t=e.String}return t}function d(e){var t="{"+e.String+"}";return t}function c(e){if(e){return 1}return 0}function v(e,t){if(!t){return undefined}else if(t.lastIndexOf(e,0)===0||t.indexOf("://")>0){return t}else if(t.lastIndexOf("/",0)===0){return e+t}else{return e+"/"+t}}function y(e,t,r){var n;if(typeof r==="object"){n=r[e]}else{n=typeof r==="boolean"?r:true}return!t[e]&&n}function P(e,t,r){var n="";if(e){if(t&&r){n="#"+t+"-"+r;for(var a=0;a<e.length;a++){if(e[a].value===n){return e[a].name}}n=""}else{return e[0].name}}return n}function m(e,t){return v(e.baseUrl,t)}function h(e){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","")}function O(e){return e.Path&&"{"+e.Path+"}"||e.String||""}return{formatItems:s,formatUrl:f,isImageUrl:l,isImageUrlStaticData:u,isValidURL:g,getIconPath:p,formatString:d,linkedAction:c,formUrl:v,isVisible:y,getApplicationName:P,getImageUrl:m,contentRowIndex:h,getAvatarInitials:O}},true);
sap.ui.predefine("sap/ovp/cards/linklist/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/linklist/AnnotationHelper"],function(t,e){"use strict";return t.extend("sap.ovp.cards.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}})});
sap.ui.predefine("sap/ovp/cards/linklist/LinkList.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ui/util/openWindow","sap/ovp/app/FilterHelper","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,jQuery,e,i,s,a,r,n,o,d,h,l,g,c,f){"use strict";var p=27,u=8,v=8,I=8,L="ovpLinkList",C="pictureCarousel",m="ovpCardHeader",y="sapMCrslActive";var P={onBeforeRendering:function(t){this.itemOnBeforeRendering(t)}};var _={onAfterRendering:function(t){this.itemOnAfterRendering(t)}};var b=new h("OVP.linklist.LinkList");return t.extend("sap.ovp.cards.linklist.LinkList",{onInit:function(){t.prototype.onInit.apply(this,arguments);this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false;var e=this;this.eventhandler=function(t,i,s){c.applyFiltersToV2Card(s,e)};this.GloabalEventBus=f.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}},onBeforeRendering:function(t){var e=this.getCardPropertiesModel();if(e.getProperty("/listFlavor")==="standard"&&!e.getProperty("/staticContent")){var i=this.byId("ovpCLI");if(i){i.addEventDelegate(P,this)}}},onAfterRendering:function(i){t.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var s=this.getCardPropertiesModel();var a=s.getProperty("/cardLayout/rowSpan");var r=s.getProperty("/cardLayout/colSpan");switch(s.getProperty("/listFlavor")){case"standard":if(s.getProperty("/staticContent")){if(r&&a){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList()}if(a===1){this._aLinkListIds=[L];this._setListColumnWidthInStandardCard(1)}else{this._itemOnEventBuildStandard(s,r,a,true)}}else{this._aLinkListIds=[L];this._setListColumnWidthInStandardCard(1)}}break;case"carousel":var n=this.byId(C);if(n.getId().indexOf(".")!==-1){var o=n.$();o.off("beforeSlide");o.on("beforeSlide",this.onBeforeSlide);o.trigger("beforeSlide",[1,1])}if(s.getProperty("/staticContent")){if(a&&!(!s.getProperty("/defaultSpan")&&s.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(a)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties()}else{n.addEventDelegate(_,this)}break;default:break}if(!e.checkIfAPIIsUsed(this)&&s.getProperty("/layoutDetail")==="resizable"){var d=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var h=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var l=document.getElementById(h);d.dashboardLayout.showOnlyHeader?l.classList.add("sapOvpMinHeightContainer"):l.classList.remove("sapOvpMinHeightContainer")}if(this.getView().byId("sapOvpCardInsights")){this.getView().byId("sapOvpCardInsights").setEnabled(true)}},onBeforeSlide:function(t,e,i){if(t.target!=this){return}var s=this.id+"-pageIndicator",a=document.getElementById(s);var r=a.querySelector("[data-slide='"+e+"']");r.classList.remove(y);r=a.querySelector("[data-slide='"+i+"']");r.classList.add(y)},getCardItemsBinding:function(){var t=this.getView().byId("ovpLinkList");var e=this.getView().byId("pictureCarousel");if(t){return t.getBinding("items")}else if(e){return e.getBinding("pages")}else{return null}},attachingListenerToTheEventRefresh:function(){var t=this.getCardItemsBinding();var e=this.getCardPropertiesModel();if(t){if(!this._bListenerAttached){t.attachRefresh(function(){if(this._aLinkListIds){for(var t=1;t<this._aLinkListIds.length;t++){var e=this.byId(this._aLinkListIds[t]);var i=e.getItems().length;e.getItems().splice(0,i);e.destroy()}this._aLinkListIds.splice(0,this._aLinkListIds.length)}if(this._oListRest){this._oListRest.destroy()}}.bind(this));t.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(e.getProperty("/listFlavor")==="carousel"){var i=this.byId(C);i.addEventDelegate(_,this)}if(e.getProperty("/listFlavor")==="standard"){var s=t.getLength();if(s===0){var a=this.byId(L).$().parent();a.width("100%")}}}.bind(this))}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}this._bListenerAttached=true}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var t=this.getCardPropertiesModel();var e=t.getProperty("/cardLayout/rowSpan");var i=t.getProperty("/cardLayout/colSpan");if(e){this._setListHeightInStandardCard(e)}if(i){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}}},itemOnBeforeRendering:function(t){var e,i=this.getCardPropertiesModel();switch(i.getProperty("/listFlavor")){case"standard":if(!i.getProperty("/defaultSpan")&&!i.getProperty("/staticContent")&&i.getProperty("/cardLayout/autoSpan")){e=i.getProperty("/cardLayout/noOfItems")}else{e=i.getProperty("/cardLayout/rowSpan")}var s=i.getProperty("/cardLayout/colSpan");var a=this.byId(L);var r=a.getItems();for(var n=0;n<r.length;n++){r[n].removeEventDelegate(P)}if(this._bInitialLoad){this._itemOnEventBuildStandard(i,s,e,true)}else{this._itemOnEventBuildStandard(i,s,e,false)}break;case"carousel":b.info("FYI: currently nothing special to handle here");break;default:break}},getSpansWhenNoDefaultSpanMentioned:function(){var t=this.getCardPropertiesModel();var e=t.getProperty("/staticContent");var i=e&&e.length||this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()||0;var s=e?this.getItemHeight(this,L,true):t.getProperty("/cardLayout/itemHeight");var a=0;var r=this.byId(m);if(r){a=r.$().outerHeight()}var n=t.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((s*Math.min(i,6)+(a+v+I))/n)},itemOnAfterRendering:function(t){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var s=e.getProperty("/cardLayout/colSpan");switch(e.getProperty("/listFlavor")){case"standard":try{var a=this.byId(L);var r=a.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);r[r.length-1].removeEventDelegate(_)}catch(t){b.info("FYI: Unable to remove the delagted event at the last item of the last list")}if(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan")){i=this.getSpansWhenNoDefaultSpanMentioned()}if(i){this._setListHeightInStandardCard(i)}if(s){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}break;case"carousel":try{var n=this.byId(C);n.removeEventDelegate(_)}catch(t){b.info("FYI: Unable to remove the delagted event on the carousel")}if(i&&!(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(i)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties();break;default:break}this._bInitialLoad=false},_itemOnEventBuildStandard:function(t,e,i,a){var r;var n=this.byId(L);var o=this.getView().byId(this.getView().getId()+"--RestOfData");if(o){o.destroy()}if(a&&this._oListRest===undefined){this._oListRest=new s(this.getView().getId()+"--RestOfData",{})}this._aLinkListIds=[L];this._iAvailableItems=n.getItems().length;var d=t.getProperty("/cardLayout/items");if(d!==undefined){this._iNoOfItemsPerColumn=d;r=d;this._iVisibleColums=1}else{var h=t.getProperty("/staticContent")?this.getItemHeight(this,L,true):t.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(i);this._iNoOfItemsPerColumn=Math.floor(l/h);var g=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(g,e);r=this._iVisibleColums*this._iNoOfItemsPerColumn}if(r>this._iAvailableItems){r=this._iAvailableItems}else{for(var c=r;c<this._iAvailableItems;c++){n.getItems()[c].setVisible(false)}}if(this._iVisibleColums>1){var f=this.byId("ovpListRow");var p=this._iNoOfItemsPerColumn;var u=0;for(var v=this._iNoOfItemsPerColumn;v<r;v++){if(p>=this._iNoOfItemsPerColumn){p=0;u++;var I=L+u;var C=new s(this.getView().getId()+"--"+I,{showSeparators:n.getProperty("showSeparators")});this._aLinkListIds.push(I);if(n.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){C.addStyleClass("sapOvpLinkListStandardPaddingCozy")}else{C.addStyleClass("sapOvpLinkListStandardPaddingCompact")}f.addItem(C)}C.addItem(n.getItems()[this._iNoOfItemsPerColumn]);p++}if(C){var m=C.getItems();m[m.length-1].addEventDelegate(_,this)}}else{if(a){this.itemOnAfterRendering(null)}else{var y=n.getItems();y[y.length-1].addEventDelegate(_,this)}}},resizeCard:function(t,e){var i=this.getCardPropertiesModel();i.setProperty("/cardLayout/rowSpan",t.rowSpan);i.setProperty("/cardLayout/colSpan",t.colSpan);i.setProperty("/cardLayout/itemHeight",e.itemHeight);switch(i.getProperty("/listFlavor")){case"standard":this._resizeStandard(t,i);break;case"carousel":this._resizeCarousel(t);break;default:break}if(this.resizeHandlerId){a.deregister(this.resizeHandlerId);this.resizeHandlerId=null}var s=this.getView().byId("ovpCardContentContainer").getDomRef();if(s){if(t.showOnlyHeader){s.classList.add("sapOvpContentHidden")}else{s.classList.remove("sapOvpContentHidden")}}},_mergeAllTheDataInOneList:function(){var t=this._aLinkListIds.length;var e=this.getView().byId("ovpLinkList");var i=-1;for(var s=0;s<e.getItems().length;s++){if(!e.getItems()[s].getVisible()){i=s;break}}for(var a=1;a<t;a++){var r=this.getView().byId(this._aLinkListIds[a]);var n=r.getItems().length;for(var o=0;o<n;o++){if(i===-1){e.addItem(r.getItems()[0])}else{e.insertItem(r.getItems()[0],i);i++}}r.destroy()}},_resizeStandard:function(t,e){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var i=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var s=this._oListRest.getItems().length;try{for(var a=0;a<s;a++){i.addItem(this._oListRest.getItems()[0])}}catch(t){b.info("Error: "+t)}for(var r=0;r<i.getItems().length;r++){i.getItems()[r].setVisible(true)}if(!i){var n=this.byId(L).$().parent();n.width("100%");var o=e.getProperty("/cardLayout/rowSpan");if(o){this._setListHeightInStandardCard(o)}}var d=i.getBindingInfo("items");var h=e.getProperty("/staticContent")?this.getItemHeight(this,L,true):e.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(t.rowSpan);var g=Math.floor(l/h)*t.colSpan;this._bInitialLoad=false;jQuery(this.getView().$()).find(".sapOvpWrapper").css({height:l+"px"});if(d){if(g>this._iAvailableItems&&d.length<=this._iAvailableItems){d.length=g;i.bindItems(d);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh()}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}},_resizeCarousel:function(t){this._setListHeightInCarouselCard(t.rowSpan);this._setCarouselImageProperties()},_setListHeightInCarouselCard:function(t){var e=0,i=this.byId(C);if(t!==-1){var s=0;var a=this.byId(m);if(a){s=a.$().outerHeight()}var r=this.getCardPropertiesModel();var n=r.getProperty("/cardLayout/iRowHeightPx");e=t*n-(s+p+u);i.$().height(e+16)}else{var o=i.$().width(),d=null,h=i.getPages(),l=0;for(var g=0;g<h.length;g++){d=h[g];if(d&&d.getItems().length>1){l=Math.max(l,d.getItems()[0].$().outerHeight())}}var c=i.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=o+(l+c);i.$().height(e)}},_setCarouselImageProperties:function(){var t=this.byId(C),e=t.getPages(),i=t.$().height(),s=e.length>1?t.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,a=null,r=null,o=0,d,h;for(var l=0;l<e.length;l++){a=e[l];if(a){d=a.getAggregation("items")&&a.getItems()[0];if(d){o=d.hasStyleClass("sapOvpCarouselContentHeader")?d.$().outerHeight():0;h=a.getItems()[a.getItems().length-1];r=h.getAggregation("items")&&h.getItems()[0];if(r instanceof n){this._setCarouselImageHeight(r,i-o-s)}}}}},_setCarouselImageHeight:function(t,e){var i=t.getDomRef().naturalHeight;if(i!==0){i<e?t.setHeight(i+"px"):t.setHeight(e+"px")}},_setListHeightInStandardCard:function(t){var e=0;var i;var s;i=this.byId(L);if(i){e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}if(this._aLinkListIds){for(var a=1;a<this._aLinkListIds.length;a++){i=this.byId(this._aLinkListIds[a]);e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}}},_getListHeightInStandardCard:function(t){var e=0;var i=this.getCardPropertiesModel();if(t){var s=0;var a=this.byId(m);if(a){s=a.$().outerHeight()}var r=i.getProperty("/cardLayout/iRowHeightPx");e=t*r-(s+v+I)}return e},_setListColumnWidthInStandardCard:function(t){var e;var i;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var a=0;a<this._aLinkListIds.length;a++){e=this.byId(this._aLinkListIds[a]);i=e.$().parent();s=100/t+"%";i.width(s)}}else{e=this.byId(this._aLinkListIds[0]);if(e){i=e.$().parent();i.width(s)}}}},onLinkListItemPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("targetUri");var a=t.getSource().data("openInNewWindow");var r=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(s){s=this.buildUrl(r,s);if(a==="true"){l(s,"newWindow")}else{window.location.href=s}}}},onLinkListActionPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onFuImpSuccess:function(t){r.show(o.getText("Toast_Action_Success"),{duration:3e3})},onFuImpFailed:function(t){r.show(o.getText("Toast_Action_Error"),{duration:3e3})},onLinkListItemPress:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=this.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkPopover:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":s=t.getSource().getParent().getAggregation("items")[0];break;case"carousel":s=t.getSource().getParent().getAggregation("items")[0];break;default:break}var a=this.getCardPropertiesModel();if(a.getProperty("/listFlavor")==="carousel"){var r=this.byId(C);r.addEventDelegate(_,this)}s.bindElement(t.getSource().getBindingContext().getPath());s.openBy(t.getSource());if(!this._bListeningPopOver){s.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}.bind(this))}this._bListeningPopOver=true}},onLinkListLineItemUrl:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s,a="com.sap.vocabularies.UI.v1.LineItem",r=this.entityType[a][0].Url;if(r.hasOwnProperty("String")){s=r.String}else{var n=this.getEntityNavigationEntries(t.getSource().getBindingContext(),a)[0];s=n.url}if(s){window.location.href=s}else{b.info("LinkList Standard Card: No Navigation on line item")}}},onLinkNavigationSingleTarget:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=this.getEntityNavigationEntries(t.getSource().getBindingContext(),undefined);this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkNavigation:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{if(sap.ushell.Container.getService("CrossApplicationNavigation")){var s=t.getSource().getBindingContext();if(s.getProperty("SemanticObject")){var a={target:{semanticObject:s.getProperty("SemanticObject"),action:s.getProperty("SemanticAction")}};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(a)}}}},buildUrl:function(t,e){if(e.lastIndexOf(t,0)===0||e.indexOf("://")>0){return e}else if(e.lastIndexOf("/",0)===0){return t+e}else{return t+"/"+e}},onLinkListActionPress:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onLinkListSemanticObjectPressLocalData:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=parseInt(t.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[a].semanticObject&&this._oStaticContent[a].action){var n={semanticObject:this._oStaticContent[a].semanticObject,action:this._oStaticContent[a].action,iStaticLinkListIndex:a};this.doIntentBasedNavigation(null,n,false,s)}else{r.show(o.getText("Toast_Action_Error"),{duration:3e3})}}}})});
sap.ui.predefine("sap/ovp/cards/list/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsight:{type:"boolean",defaultValue:true}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/list/List.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/app/FilterHelper","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/Integration/IntegrationCard"],function(e,jQuery,t,a,i,n,s,r,o,d,l,p,h){"use strict";var g=new r("OVP.list.List");return e.extend("sap.ovp.cards.list.List",{counter:0,arrayLength:0,minMaxModel:{},onInit:function(){e.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new t;this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel");var a=this;this.eventhandler=function(e,t,i){l.applyFiltersToV2Card(i,a)};this.GloabalEventBus=p.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",a.eventhandler)}},onContactDetailsLinkPress:function(e){var t,a,i;a=e.getSource();t=a.getParent().getAggregation("items")[0];i=a.getBindingContext();if(!i){return}t.bindElement(i.getPath());t.openBy(a)},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var t=this.getCardPropertiesModel().getProperty("/imageSupported");var i=this.getCardPropertiesModel().getProperty("/densityStyle");if(t){var n=this.byId("ovpList");n.attachUpdateFinished(function(){this._addImageCss(i)}.bind(this))}if(!a.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var s=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var r=Math.max(s.dashboardLayout.headerHeight,this.getHeaderHeight());var o=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var d=document.getElementById(o);if(!s.dashboardLayout.autoSpan){d.getElementsByClassName("sapOvpWrapper")[0].style.height=s.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(r+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(s.dashboardLayout.showOnlyHeader){d.classList.add("sapOvpMinHeightContainer")}}if(this.getView()&&this.getView().byId("sapOvpCardInsights")){this.getView().byId("sapOvpCardInsights").setEnabled(true)}},_addImageCss:function(e){var t=this.byId("ovpList");var a=t.getItems();var i=false;var n=t.getDomRef().getAttribute("class");if(e==="cozy"){n=n+" sapOvpListImageCozy"}else{n=n+" sapOvpListImageCompact"}t.getDomRef().setAttribute("class",n);a.forEach(function(e){if(e.getIcon().indexOf("icon")!=-1){i=true}});a.forEach(function(t){var a=t.getDomRef();var n;if(a&&a.children[0]&&a.children[0].children[0]){n=a.children[0].children[0]}var s=t.getDescription();var r=t.getIcon();var o=i;var d=t.getTitle();var l=d.split(" ").map(function(e){return e?e[0].toUpperCase():""}).join("").substring(0,2);if(r!=""&&r.indexOf("icon")==-1){i=false}if(i&&a.children[0]){jQuery(a.children[0]).addClass("sapOvpIconListItem")}else if(a.children[0]){jQuery(a.children[0]).addClass("sapOvpImageListItem")}if(n&&e==="cozy"&&i===false){if(n){var p=n.getAttribute("class");p=p+" sapOvpImageCozy";n.setAttribute("class",p)}}var h="";if(i===true&&s===""){h=e==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy"}else if(i===false&&s===""){h=e==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy"}else{h=e==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy"}t.addStyleClass(h);if(a&&a.children[0]&&r===""&&a.children[0].id!=="ovpIconImagePlaceHolder"){var g=document.createElement("div");g.innerText=l;g.setAttribute("id","ovpIconImagePlaceHolder");g.className=i===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(i===false&&e==="cozy"){g.className=g.className+" sapOvpImageCozy"}a.insertBefore(g,a.children[0])}i=o})},onListItemPress:function(e){var t=s.bCRTLPressed?s.constants.explace:s.constants.inplace;s.bCRTLPressed=false;if(a.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(e)}}else{var n=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0],t)}},getCardItemsBinding:function(){var e=this.getView().byId("ovpList");return e&&e.getBinding("items")},_getMinMaxObjectFromContext:function(e){this.counter++;var t=this.getEntityType(),a=this.getCardPropertiesModel().getProperty("/annotationPath"),i=t[a],s=this.getMetaModel().createBindingContext(t.$path+"/"+a),r={minValue:0,maxValue:0};if(n.isFirstDataPointPercentageUnit(s,i)){r.minValue=0;r.maxValue=100;r.isPercentage=true;return r}var o=n.getFirstDataPointValue(s,i),d=this.getView().byId("ovpList"),l=d.getBinding("items"),p=this.getModel(),h=l.getCurrentContexts();for(var g=0;e?g<e:g<h.length;g++){var c=p.getOriginalProperty(o,h[g]),u=parseFloat(c,10);if(u<r.minValue){r.minValue=u}else if(u>r.maxValue){r.maxValue=u}}return r},_updateMinMaxModel:function(e){var t=this._getMinMaxObjectFromContext(e);this.minMaxModel.setData({minValue:t.minValue,maxValue:t.maxValue,isPercentage:t.isPercentage||false});this.minMaxModel.refresh();return t},returnBarChartValue:function(e){this._updateMinMaxModel();var t=parseFloat(e,10);return t},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpList");return e.getBindingInfo("items")},resizeCard:function(e,t){var a,i,n;try{var s=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),r=this.getCardItemBindingInfo(),o=this.getHeaderHeight(),d=this.getView().byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){d.classList.add("sapOvpContentHidden");a=0}else{d.classList.remove("sapOvpContentHidden");n=o+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-n;a=Math.abs(Math.floor(i/t.itemHeight));s.style.height=e.rowSpan*e.iRowHeightPx+"px"}d.style.height=e.rowSpan*e.iRowHeightPx-(o+2*e.iCardBorderPx)+"px";if(a!==r.length){r.length=a;e.noOfItems=r.length;this._updateMinMaxModel(r.length);this.getCardItemsBinding().refresh()}else{this._handleCountHeader()}}catch(e){g.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onShowInsightCardPreview:function(e){var t=e.getSource()&&e.getSource().getParent();if(t){t.close()}var a=this.getView();var i=a.getController();var n=i.oCardComponentData;var s=this;h.showCard({entitySet:i.entitySet,entityType:i.entityType,cardComponentName:"List",cardComponentData:n,cardComponent:i.oCardComponent,itemBindingInfo:s.getCardItemBindingInfo(),view:a}).then(function(e){s.saveGeneratedCardManifest(e)})}})});
sap.ui.predefine("sap/ovp/cards/ovpLogger", ["sap/ui/base/Object","sap/base/Log"],function(e,t){"use strict";var s="FioriElements: ";return e.extend("sap.ui.base.Log",{constructor:function(e){return t.getLogger(s+e)}})});
sap.ui.predefine("sap/ovp/cards/quickview/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.quickview.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.quickview.Quickview"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Facets"},footerFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.ActionsFooter"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/quickview/Quickview.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/Button"],function(t,e){"use strict";return t.extend("sap.ovp.cards.quickview.Quickview",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.bCustomActionFlag=true},onBeforeRendering:function(){var t=this.byId("ovpQuickviewCardHeader");if(t){var n=t.getText();var o=n.substring(0);if(n[0]===":"){o=n.substring(2)}else if(n[n.length-2]===":"){o=n.substring(0,n.length-2)}t.setText(o);var r=t.getCustomData();if(r){for(var i=0;i<r.length;++i){if(r[i].getProperty("key")==="aria-label"){r[i].setValue(o)}}}}var s=this.getCardPropertiesModel();var a=s.getProperty("/showFirstActionInFooter")?s.getProperty("/showFirstActionInFooter"):false;var p=this.byId("ovpActionFooter");if(!a){if(p){var g=p.getContent();if(g&&g.length){for(var i=0,f=g.length;i<f;i++){if(g[i]instanceof e){g[i].setVisible(false);break}}}}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var n=this.getCardPropertiesModel();var o=this.byId("ovpActionFooter");if(!!this.bCustomActionFlag){var r=n.getProperty("/customActions");if(!!o&&!!r&&!!r.length){for(var i=0;i<r.length;i++){var s=r[i].text;var a=null,p;if(this.getOwnerComponent()&&this.getOwnerComponent().getComponentData()){a=this.getOwnerComponent().getComponentData().mainComponent}if(!!a&&!!s&&!!r[i].press){p=a.templateBaseExtension.provideCustomActionPress(r[i].press)?a.templateBaseExtension.provideCustomActionPress(r[i].press):a.onCustomActionPress(r[i].press);if(typeof p==="function"){var g=new e({text:s,press:p.bind(this),type:"Transparent"});var f=n.getProperty("/showFirstActionInFooter");var v=f?0:1;var l=r[i].position+v;var c=o.getContent().length;if(l<1+v&&l>c-1){o.addContent(g)}else{o.insertContent(g,l)}}}}}this.bCustomActionFlag=false}}})});
sap.ui.predefine("sap/ovp/cards/rta/AppSettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/AppSettingsUtils","sap/ui/model/json/JSONModel","sap/base/util/merge"],function(t,e,n,s){"use strict";return t.extend("sap.ovp.cards.rta.AppSettingsDialog",{onInit:function(){e.oResetButton.attachPress(this.onResetButton,this)},onAfterRendering:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=this.getView().getModel().getData();this._originalOVPManifestSettings=s({},this._ovpManifestSettings)},onResetButton:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=s({},this._originalOVPManifestSettings);var t=new n(this._ovpManifestSettings);this.getView().setModel(t);this.getView().getModel().refresh()},onChange:function(){this.setEnablePropertyForResetAndSaveButton(true)},setEnablePropertyForResetAndSaveButton:function(t){e.oResetButton.setEnabled(t);e.oSaveButton.setEnabled(t)}})});
sap.ui.predefine("sap/ovp/cards/rta/SelectIcons.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectIcons",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var g=0;g<n.length;g++){l.push(new t(n[g],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n=i.getProperty("/tableName"),r;if(n==="IconTable"){this._filterTable(e,["Icon","Name"],"IconTable");r=t.byId("IconTable").getBinding("items").getLength();i.setProperty("/NoOfIcons",r)}else if(n==="ImageTable"){this._filterTable(e,["Name"],"ImageTable");r=t.byId("ImageTable").getBinding("items").getLength();i.setProperty("/NoOfImages",r)}i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=this.getView().getModel(),r=n.getProperty("/tableName"),a;if(r==="IconTable"){a=i.getProperty("Icon")}else if(r==="ImageTable"){a=i.getProperty("Image")}this.updateIconPath(a)},onSelectionChange:function(e){var t=e.getParameter("item").getKey(),i=this.getView().getModel();i.setProperty("/tableName",t);i.refresh(true)}})});
sap.ui.predefine("sap/ovp/cards/rta/SelectKPI.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectKPI",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var o=e.getParameter("query"),a=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,o))}if(o){a=new t(l,false)}this.getView().byId(r).getBinding("items").filter(a,"Application")},onSearch:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"KPITable");n=t.byId("KPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateKPIItemPath(n,e)}})});
sap.ui.predefine("sap/ovp/cards/rta/SelectLineItem.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLineItem",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),l=null,o=[];for(var s=0;s<n.length;s++){o.push(new t(n[s],i.Contains,a))}if(a){l=new t(o,false)}this.getView().byId(r).getBinding("items").filter(l,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["Label","VisibleFields"],"LineItemTable");n=t.byId("LineItemTable").getBinding("items").getLength();i.setProperty("/NoOfLineItem",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getObject();this.updateLineItemPath(n)}})});
sap.ui.predefine("sap/ovp/cards/rta/SelectLinks.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i){"use strict";return e.extend("sap.ovp.cards.rta.SelectLinks",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,n,r){var a=e.getParameter("query"),o=null,l=[];for(var s=0;s<n.length;s++){l.push(new t(n[s],i.Contains,a))}if(a){o=new t(l,false)}this.getView().byId(r).getBinding("items").filter(o,"Application")},filterTable:function(e){var t=this.getView(),i=t.getModel(),n;this._filterTable(e,["name","value"],"LinkTable");n=t.byId("LinkTable").getBinding("items").getLength();i.setProperty("/NoOfLinks",n);i.refresh(true)},onItemPress:function(e){var t=e.getSource(),i=t.getBindingContext(),n=i.getProperty("value");this.updateLinkPath(n)}})});
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialog.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/SettingsUtils","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ChangeReason","sap/ovp/cards/linklist/AnnotationHelper","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/cards/AnnotationHelper","sap/ui/core/IconPool","sap/ui/core/mvc/ViewType","sap/m/Dialog","sap/m/Button","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/deepEqual","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ui/base/Event","sap/ui/core/mvc/XMLView","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,i,a,s,n,o,r,l,d,h,g,u,c,f,p,S,P,v,C,b,m,y,_,I,V,E,O){"use strict";var w=new _("OVP.rta.SettingDialog");return e.extend("sap.ovp.cards.rta.SettingsDialog",{_oCardManifestSettings:{},_aRefreshNotRequired:n._aRefreshNotRequired,_aRefreshRequired:n._aRefreshRequired,_updateManifestProperties:n._updateManifestProperties,aVariantNames:n.aVariantNames,oOvpResourceBundle:C,oMandatoryPropertiesKey:n.oMandatoryPropertiesKey,onInit:function(){a.oSaveButton.attachPress(this.onSaveButtonPress,this);a.oResetButton.attachPress(this.onResetButton,this);a.oMessagePopOverButton.attachPress(this.handleMessagePopoverPress,this)},onAfterRendering:function(){a.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.setEnablePropertyForResetAndSaveButton(false);this._oCardManifestSettings=this.getView().getModel().getData();this._oOriginalCardManifestSettings=y({},this._oCardManifestSettings);var e=this.getView(),t=e.getModel();if(!this._oCardManifestSettings.addNewCard){var i=e.byId("dialogCard");if(!i.getVisible()){i=e.byId("dialogCardNoPreview")}i.getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";e.byId("dialogCardOverlay").getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";a.settingFormWidth(e,"calc(100% - "+(this._oCardManifestSettings.dialogBoxWidth+1)+"rem)");setTimeout(function(){var e=this.getView().byId("dialogCard");if(e&&e.getVisible()){e.setBusy(false)}}.bind(this),2e3)}if(this._oCardManifestSettings.staticContent){this.handleErrorHandling(t,"title","/staticContent");this.handleErrorHandling(t,"targetUri","/staticContent")}if(a.bNewKPICardFlag){var s=e.getModel();var n=e.byId("sapOvpKPITable").getBinding("items").getLength();s.setProperty("/NoOfKPIItem",n);s.setProperty("/NoKPI",n)}},validateInputField:function(e){var t=e.getSource();var i=t.getValue().trim().length;if(!i){t.setValue(t.getValue().trim())}if(!this._oCardManifestSettings.addNewCard){this.updateCard(e)}else{this.setEnablePropertyForResetAndSaveButton(true)}},addView:function(e){this._oCardManifestSettings.showViewSwitchButton=true;this.setEnablePropertyForResetAndSaveButton(true);var t,i=this._oCardManifestSettings,a=this.getView().getModel();if(!i.addNewCard){if(i.dataPointAnnotationPath&&i.dataPoint&&i.dataPoint.length){t=i.dataPoint[0].value}}if(i.tabs&&i.tabs.length){i.newViewCounter++;if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter})}var s=i.tabs.length;i.aViews.push({text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter,key:s,isLaterAddedView:true,isViewResetEnabled:false});if(!i.addNewCard){var o=i.defaultViewSelected;if(i.tabs[o-1].entitySet){i.tabs[s-1].entitySet=i.allEntitySet[0].value}}this.selectViewSwitch(e,s)}else{i.tabs=[{}];n.tabFields.forEach(function(e){if(!i.addNewCard){if(e!=="entitySet"){i.tabs[0][e]=i[e]}}else{i.tabs[0][e]=i[e]}});i.tabs[0].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1";if(!i.addNewCard){if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs.push({chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}else{i.tabs.push({annotationPath:i.lineItem[0].value,dataPointAnnotationPath:t,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}}else{i.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"})}i.selectedKey=1;i.defaultViewSelected=1;i.aViews=[{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1 ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")",key:1,initialSelectedKey:1,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2",key:2,isLaterAddedView:true,isViewResetEnabled:false}];i.newViewCounter=2;this.selectViewSwitch(e,1)}this.handleErrorHandling(a,"value","/tabs")},deleteView:function(e){this.setEnablePropertyForResetAndSaveButton(true);var t=this._oCardManifestSettings,i=parseInt(t.selectedKey,10),s=this.getView().getModel();t.tabs.splice(i-1,1);t.aViews.splice(i,1);if(i===t.defaultViewSelected){t.defaultViewSelected=1;t.aViews[i].text=t.aViews[i].text+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}t.aViews.forEach(function(e,t){if(t>=i){e.key--}});this.handleErrorHandling(s,"value","/tabs");if(t.tabs.length==1){n.tabFields.forEach(function(e){var i=t.tabs[0][e];if(e!=="entitySet"||e==="entitySet"&&i){t[e]=i}});delete t.selectedKey;delete t.defaultViewSelected;delete t.tabs;delete t.aViews;t.aViews=[{text:this.oOvpResourceBundle.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}];a.addManifestSettings(t);a.setVisibilityForFormElements(t);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!t.addNewCard){this._fCardWithRefresh()}}else{t.selectedKey=1;this.selectViewSwitch(e,t.selectedKey)}},resetView:function(){var e=this._oCardManifestSettings,t=this.getView().getModel(),i=parseInt(e.selectedKey,10),s=e.aViews[i],o=e.defaultViewSelected;if(!s.isLaterAddedView){var r=e.dataPointAnnotationPath?true:false,l=this._oOriginalCardManifestSettings.dataPointAnnotationPath?true:false;if(i){var d=e.aViews[i].initialSelectedKey;n.tabFields.forEach(function(t){if(t!=="dataPointAnnotationPath"||r){if(this._oOriginalCardManifestSettings.tabs&&this._oOriginalCardManifestSettings.tabs.length){var a=this._oOriginalCardManifestSettings.tabs[d-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a;e.tabs[i-1][t]=e[t]}}else{if(t!=="entitySet"){e[t]=this._oOriginalCardManifestSettings[t];e.tabs[i-1][t]=e[t]}}}}.bind(this));if(!this._oOriginalCardManifestSettings.tabs||!this._oOriginalCardManifestSettings.tabs.length){e.newViewCounter++;e.tabs[i-1].value=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}if(i===e.defaultViewSelected){e.aViews[i].text=e.tabs[i-1].value+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=e.tabs[i-1].value}}else{n.mainFields.forEach(function(t){e[t]=this._oOriginalCardManifestSettings[t]}.bind(this));if(r!==l){if(l){e.tabs.forEach(function(t){if(t.prevDataPointAnnotationPath){t.dataPointAnnotationPath=t.prevDataPointAnnotationPath}else{t.dataPointAnnotationPath=e.dataPoint[0].value}});e.dataPointAnnotationPath=e.tabs[o].dataPointAnnotationPath}else{e.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}}}}else{var h;if(e.dataPointAnnotationPath){h=e.dataPoint[0].value}e.newViewCounter++;if(e.template==="sap.ovp.cards.charts.analytical"||e.template==="sap.ovp.cards.charts.smart.chart"){e.tabs[i-1]={chartAnnotationPath:e.chart[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}else{e.tabs[i-1]={annotationPath:e.lineItem[0].value,dataPointAnnotationPath:h,value:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}}if(i===e.defaultViewSelected){e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}else{e.aViews[i].text=this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+e.newViewCounter}n.tabFields.forEach(function(t){var a=e.tabs[i-1][t];if(t!=="entitySet"||t==="entitySet"&&a){e[t]=a}})}this.handleErrorHandling(t,"value","/tabs");e.isViewResetEnabled=false;e.aViews[i].isViewResetEnabled=false;a.addManifestSettings(e);a.setVisibilityForFormElements(e);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!e.addNewCard){this._fCardWithRefresh()}},selectViewSwitch:function(e,t){var i=this._oCardManifestSettings,s=this.getView().getModel();if(!t){t=e.getSource().getSelectedIndex()}if(this.defaultViewSwitch){this.defaultViewSwitch.setEnabled(true)}this.setEnablePropertyForResetAndSaveButton(true);var o=i.metaModel,r,l=i.defaultViewSelected;if(!t){i.selectedKey=t;i.mainViewSelected=true;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;n.tabFields.forEach(function(e){var t=i.tabs[l-1][e];if(e!=="entitySet"||e==="entitySet"&&t){i[e]=t}});this.handleErrorHandling(s,"value","/tabs");if(i.tabs[l-1].entitySet){r=o.getODataEntitySet(i.tabs[l-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}a.addManifestSettings(i);a.setVisibilityForFormElements(i);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!i.addNewCard){this._fCardWithRefresh()}}else{i.mainViewSelected=false;i.isViewResetEnabled=i.aViews[t].isViewResetEnabled;if(!i.addNewCard){var d=this.getView().byId("dialogCard");if(d.getVisible()){var h=d.getComponentInstance().getRootControl();var g=h.getController();g.changeSelection(t,true,i);this.handleErrorHandling(s,"value","/tabs");if(i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);this.resetSupportingObjectsOnEntitySetChange(i,l)}a.addManifestSettings(i);a.setVisibilityForFormElements(i);n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];if(e!=="entitySet"||e==="entitySet"&&a){i[e]=a}});if(!!i.kpiAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsKPIAnnotation",i.kpiAnnotationPath)}if(!!i.selectionPresentationAnnotationPath){this.setAnnotationPathInModel(i,"sapOvpSettingsFilterAndPresentedBy",i.selectionPresentationAnnotationPath)}this.getView().getModel("visibility").refresh();this.getView().getModel().refresh()}}else{if(!!i.tabs[t-1].entitySet){r=o.getODataEntitySet(i.tabs[t-1].entitySet);i.entityType=o.getODataEntityType(r.entityType);a.addManifestSettings(i)}this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));this.resetSupportingObjectsOnEntitySetChange(i,l);i.selectedKey=t;n.tabFields.forEach(function(e){var a=i.tabs[t-1][e];i[e]=a});a.setVisibilityForFormElements(i);this.getView().byId("sapOVPEntitySetList").setValue(i.tabs[t-1].entitySet);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}}},resetSupportingObjectsOnEntitySetChange:function(e,t){e=a.addSupportingObjects(e);var i=e.defaultViewSelected;if(i){e.aViews[i].text=e.tabs[i-1].value}e.aViews[t].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";e.defaultViewSelected=t},setAnnotationPathInModel:function(e,t,i){if(e.entityType[i]){this.setVariant(e,i)}if(t==="sapOvpSettingsKPIAnnotation"){a.addKPINavApplicationName(e)}},setCurrentActivePageForCarouselCard:function(e){var t=this.getView().byId("dialogCard");if(t.getVisible()){var i=t.getComponentInstance(),a=i.getRootControl(),s=a.byId("pictureCarousel");if(s){var n=s.getPages(),o=n[e];s.setActivePage(o)}}},onSelectionChange:function(e){var t=e.getSource(),i=t.getModel(),a=i.getData().staticContent,s=t.getSelectedItem(),n=s.getBindingContext().getObject(),o=t.getModel("visibility");for(var r=0;r<a.length;r++){if(a[r].id===n.id){o.setProperty("/moveToTheTop",!(a.length===1||r===0));o.setProperty("/moveUp",!(a.length===1||r===0));o.setProperty("/moveDown",!(a.length===1||r===a.length-1));o.setProperty("/moveToTheBottom",!(a.length===1||r===a.length-1));o.setProperty("/delete",true);i.setProperty("/selectedItemIndex",r);o.refresh(true);if(e.getParameter("listItem")){this.setCurrentActivePageForCarouselCard(r)}break}}},handleErrorForProperty:function(e,t,i){e.firePropertyChange({context:e.getContext(i?i:"/"),path:t,value:e.getProperty(i?i+"/"+t:t),reason:d.Change})},handleErrorHandling:function(e,t,i){var a=e.getProperty(i);e.firePropertyChange({context:e.getContext(i),path:i+","+t,value:e.getProperty(i),reason:d.Change});for(var s=0;s<a.length;s++){var n=i+"/"+s;e.firePropertyChange({context:e.getContext(n),path:t,value:e.getProperty(n+"/"+t),reason:d.Change})}},setEnablePropertyForResetAndSaveButton:function(e){a.enableResetButton(e);a.enableSaveButton(e)},getValueInRemString:function(e){return e+"rem"},_getSelectedItemIndex:function(e){return e.getProperty("/selectedItemIndex")},_getLastItemIndex:function(e){return this._getStaticContentArray(e).length-1},_getStaticContentArray:function(e){return e.getProperty("/staticContent")},_setStaticContentArray:function(e,t){e.setProperty("/staticContent",t)},_setSelectedItemAndScrollToElement:function(e,t){var i=this.getView(),a=i.byId("sapOvpStaticLinkListLineItem"),s=i.byId("scrollContainer"),n=i.getModel();this.handleErrorHandling(n,"title","/staticContent");this.handleErrorHandling(n,"targetUri","/staticContent");var o=a.getItems()[e];if(t){this._oList=a;this._oItem=o;this._oScrollContainer=s;var r={onAfterRendering:function(e){this._oList.removeEventDelegate(this._oDelegateOnAfter);this._oScrollContainer.scrollToElement(this._oItem);delete this._oDelegateOnAfter;delete this._oList;delete this._oScrollContainer;delete this._oItem}};this._oDelegateOnAfter=r;a.addEventDelegate(r,this)}else{s.scrollToElement(o)}a.setSelectedItem(o);a.fireSelectionChange()},_arrangeStaticContent:function(e,t,i){var a=this._getStaticContentArray(e);a.splice(i,0,a.splice(t,1)[0]);this._setStaticContentArray(e,a);this._setSelectedItemAndScrollToElement(i)},getIndexFromIdForStaticLinkList:function(e){var t=e.split("-");return t[t.length-1]},_getImageData:function(){var e=[];e.push({Name:"AW.png",Image:h.formUrl(this.getView().getModel().getProperty("/baseUrl"),"img/AW.png")});return e},_getIconData:function(e){var t=c.getIconNames(),i=[];if(e){var a=e.split("://")[1],s=t.indexOf(a);t.splice(s,1);i.push({Name:a,Icon:c.getIconURI(a)})}for(var n=0;n<t.length;n++){i.push({Name:t[n],Icon:c.getIconURI(t[n])})}return i},_getLinkListItemId:function(e,t){return e.getProperty("/staticContent/"+t+"/index")},_makeLinkListItemId:function(e){return"linkListItem--"+e},_makeLinkListItemIndex:function(e){return"Index--"+e},getIconAndImageDataModel:function(e){var i=this._getIconData(e),a=this._getImageData();return new t({Icons:i,Images:a,NoOfIcons:i.length,NoOfImages:a.length})},destroyTemplatesAndObjects:function(){var e=this.getView();var t=e.byId("tableFilterImage");if(t){t.destroy()}var i=e.byId("tableFilter");if(i){i.destroy()}var a=e.byId("tableFilterLinks");if(a){a.destroy()}delete this._oEvent;delete this._iCurrentRow;delete this._oModel;delete this._oVisibilityModel;delete this._oIconsDialogContentView;delete this._oLinksDialogContentView;delete this._oLineItemDialogContentView;delete this._oKPIItemDialogContentView},onExternalUrlChange:function(e){this.setEnablePropertyForResetAndSaveButton(true)},onLinkSourceChange:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=e.getParameter("selectedIndex"),o=a.getProperty("/staticLink"),r=a.getProperty("/links"),l=this._getLinkListItemId(i,parseInt(s,10));if(n===0){o[l]=false;r[l]=true;i.setProperty("/staticContent/"+s+"/targetUri",undefined)}else{o[l]=true;r[l]=false;i.setProperty("/staticContent/"+s+"/semanticObject",undefined);i.setProperty("/staticContent/"+s+"/action",undefined);i.setProperty("/staticContent/"+s+"/targetUri","")}a.setProperty("/staticLink",o);a.setProperty("/links",r);a.refresh(true);i.refresh(true);this.handleErrorForProperty(i,"targetUri","/staticContent/"+s);this.setEnablePropertyForResetAndSaveButton(true)},onRemoveVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/removeVisual");o[n]=false;a.setProperty("/removeVisual",o);a.refresh(true);i.setProperty("/staticContent/"+s+"/imageUri",undefined);i.refresh(true);this.updateCard(e,"sapOvpSettingsStaticLinkListRemoveVisual")},createValueHelpDialogForInternalUrl:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("staticCardProperties"),s=t.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(t.getId());this.attachBrowserHeightChangeHandler();var o=new I;this._oEvent=Object.assign(o,e);this._iCurrentRow=n;this._oModel=i;this._oVisibilityModel=s;var r=new S("linksCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.linksDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_APPLICATION_DIALOG"),buttons:[r]}).addStyleClass("sapOvpSettingsDialogBox");a.setProperty("/densityStyle",this.getDensityStyle());a.setProperty("/NoOfLinks",a.getProperty("/links").length);var l=new V("linksDialogContent",{viewName:"sap.ovp.cards.rta.SelectLinks",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:a.createBindingContext("/")},models:{tableRows:a}}}});l.setModel(a);l.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.linksDialog.addContent(l);l.loaded().then(function(e){this._oLinksDialogContentView=e;e.getController().updateLinkPath=function(e){var t=e.slice(1).split(/-(.+)/),i=t[0],a=t[1];this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/semanticObject",i);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/action",a);this._oModel.refresh(true);this.setEnablePropertyForResetAndSaveButton(true);this.cleanAndCloseDialog(r)}.bind(this);r.attachPress(function(){this.cleanAndCloseDialog(r)}.bind(this));this.linksDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},onChangeVisualPress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=i.getProperty("/staticContent/"+s+"/imageUri"),o=h.isImageUrlStaticData(n);this.attachBrowserHeightChangeHandler();var r=new I;this._oEvent=Object.assign(r,e);this._iCurrentRow=s;this._oModel=i;this._oVisibilityModel=a;var l=new S("iconsCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.iconsDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_VISUAL_DIALOG"),buttons:[l]}).addStyleClass("sapOvpSettingsDialogBox");var d=o?this.getIconAndImageDataModel():this.getIconAndImageDataModel(n);d.setProperty("/densityStyle",this.getDensityStyle());var g=new V("iconsDialogContent",{viewName:"sap.ovp.cards.rta.SelectIcons",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:d.createBindingContext("/")},models:{tableRows:d}}}});d.setProperty("/tableName","IconTable");g.setModel(d);g.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.iconsDialog.addContent(g);g.loaded().then(function(e){this._oIconsDialogContentView=e;e.getController().updateIconPath=function(e){var t=this._getLinkListItemId(this._oModel,parseInt(this._iCurrentRow,10)),i=this._oVisibilityModel.getProperty("/removeVisual");i[t]=true;this._oVisibilityModel.setProperty("/removeVisual",i);this._oVisibilityModel.refresh(true);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/imageUri",e);this._oModel.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListChangeVisual");this.cleanAndCloseDialog(l)}.bind(this);l.attachPress(function(){this.cleanAndCloseDialog(l)}.bind(this));this.iconsDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},getDensityStyle:function(){if(!v.support.touch){return"compact"}else{return"cozy"}},cleanAndCloseDialog:function(e){if(this._oIconsDialogContentView){this._oIconsDialogContentView.destroy()}if(this._oLinksDialogContentView){this._oLinksDialogContentView.destroy()}if(this._oLineItemDialogContentView){this._oLineItemDialogContentView.destroy()}if(this._oKPIItemDialogContentView){this._oKPIItemDialogContentView.destroy()}this.destroyTemplatesAndObjects();if(this.iconsDialog){this.iconsDialog.close()}if(this.linksDialog){this.linksDialog.close()}if(this.lineItemDialog){this.lineItemDialog.close()}if(this.KPIItemDialog){this.KPIItemDialog.close()}e.destroy();this.detachBrowserHeightChangeHandler()},attachBrowserHeightChangeHandler:function(){v.resize.attachHandler(this.browserHeightChange,this)},detachBrowserHeightChangeHandler:function(){v.resize.detachHandler(this.browserHeightChange,this)},browserHeightChange:function(e){var t,i,s;if(this.iconsDialog&&this._oIconsDialogContentView){t=this.iconsDialog;i=this._oIconsDialogContentView;s="iconsScrollContainer"}else if(this.linksDialog&&this._oLinksDialogContentView){t=this.linksDialog;i=this._oLinksDialogContentView;s="linksScrollContainer"}else if(this.lineItemDialog&&this._oLineItemDialogContentView){t=this.lineItemDialog;i=this._oLineItemDialogContentView;s="lineItemScrollContainer"}else if(this.KPIItemDialog&&this._oKPIItemDialogContentView){t=this.KPIItemDialog;i=this._oKPIItemDialogContentView;s="KPIItemScrollContainer"}if(t&&i&&s){var n=t.getDomRef(),o=e?e.height*93/100:a.dialogBox.getDomRef().getBoundingClientRect().height,r=n.getBoundingClientRect().height,l=Math.max(o,r)-P.getPixelPerRem()*9,d=i.byId(s);d.setHeight(l+"px")}},handleMessagePopoverPress:function(e){a.oMessagePopOver.openBy(e.getSource())},onShowMorePress:function(e){var t=e.getSource(),i=t.getModel(),a=t.getModel("visibility"),s=this.getIndexFromIdForStaticLinkList(t.getId()),n=this._getLinkListItemId(i,parseInt(s,10)),o=a.getProperty("/showMore/"+n);if(o){a.setProperty("/showMore/"+n,false)}else{a.setProperty("/showMore/"+n,true)}a.refresh(true)},onPressDelete:function(e){var t=new I;this._oEvent=Object.assign(t,e);o.confirm(this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_INFORMATION_MESSAGE_INFO"),{actions:[o.Action.OK,o.Action.CANCEL],icon:o.Icon.INFORMATION,title:this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_INFO"),initialFocus:o.Action.CANCEL,onClose:function(e){if(e==="OK"){var t=this._oEvent.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=this._getSelectedItemIndex(a),o=this._getLinkListItemId(a,n),r=i.getProperty("/staticLink"),l=i.getProperty("/links"),d=i.getProperty("/removeVisual"),h=i.getProperty("/showMore");delete r[o];delete l[o];delete d[o];delete h[o];i.setProperty("/staticLink",r);i.setProperty("/links",l);i.setProperty("/removeVisual",d);i.setProperty("/showMore",h);s.splice(n,1);this._setStaticContentArray(a,s);a.refresh(true);if(s.length>0){this._setSelectedItemAndScrollToElement(Math.min(parseInt(n,10),s.length-1),true)}if(s.length<=1){i.setProperty("/delete",false)}i.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListDelete")}delete this._oEvent}.bind(this)})},onPressAdd:function(e){var t=e.getSource(),i=t.getModel("visibility"),a=t.getModel(),s=this._getStaticContentArray(a),n=a.getProperty("/lineItemIdCounter"),o=this._makeLinkListItemId(n+1),r=this._makeLinkListItemIndex(n+1),l=i.getProperty("/staticLink"),d=i.getProperty("/links"),h=i.getProperty("/removeVisual"),g=i.getProperty("/showMore");a.setProperty("/lineItemIdCounter",n+1);s.unshift({id:o,index:r,title:"Default Title",subTitle:"Default SubTitle",imageUri:"",imageAltText:"",targetUri:"",openInNewWindow:""});l[r]=true;d[r]=false;h[r]=false;g[r]=false;i.setProperty("/staticLink",l);i.setProperty("/links",d);i.setProperty("/removeVisual",h);i.setProperty("/showMore",g);i.refresh(true);this._setStaticContentArray(a,s);a.refresh(true);this._setSelectedItemAndScrollToElement(0);this.updateCard(e,"sapOvpSettingsStaticLinkListAdd")},onPressMoveToTheTop:function(e){var t=e.getSource().getModel();this._arrangeStaticContent(t,this._getSelectedItemIndex(t),0);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveUp:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i-1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveDown:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t);this._arrangeStaticContent(t,i,i+1);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onPressMoveToTheBottom:function(e){var t=e.getSource().getModel(),i=this._getSelectedItemIndex(t),a=this._getLastItemIndex(t);this._arrangeStaticContent(t,i,a);this.updateCard(e,"sapOvpSettingsStaticLinkListSort")},onResetButton:function(){this._oCardManifestSettings=y({},this._oOriginalCardManifestSettings);var e=this.getView().getModel();e.setProperty("/",this._oCardManifestSettings);a.setVisibilityForFormElements(this._oCardManifestSettings);this.getView().getModel("visibility").refresh();if(this._oCardManifestSettings.layoutDetail==="resizable"){if(this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(false)}else if(!this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(true)}}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);if(!this._oCardManifestSettings.addNewCard){this._fCardWithRefresh()}},handleValueStateofComboBox:function(e,t,i,s){var n=a.oMessagePopOver.getModel(),o=n.getProperty("/Messages"),r=n.getProperty("/Counter/All"),l=n.getProperty("/Counter/Error");this.bError=true;var d=true;if(s){for(var h=0;h<o.length;h++){if(o[h].fieldName===t){d=false}}if(d){o.push({type:"Error",title:e,fieldName:t,counter:l+1});r++;l++;this.getView().byId(i).setValueState("Error")}}else{this.bError=false;for(var h=0;h<o.length;h++){if(o[h].fieldName===t){o.splice(h,1);r--;l--;h--}}this.getView().byId(i).setValueState("None")}if(!o.length){this.setEnablePropertyForResetAndSaveButton(true)}n.setProperty("/Messages",o);n.setProperty("/Counter/All",r);n.setProperty("/Counter/Error",l);n.refresh(true)},validateComboBox:function(e,t,i){var a;if(t==="KPICheckBox"&&i&&e.entitySet||t==="entitySet"&&e.addKPIHeaderCheckBox){if(e.title===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.title,"sapOvpCardTitle",false)}if(e.subTitle===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE");this.handleValueStateofComboBox(a,b.Annotations.subTitle,"sapOvpCardSubTitle",true)}else{this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false)}if(e.valueSelectionInfo===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO");this.handleValueStateofComboBox(a,b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",true)}else{this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false)}if(e.dataPointAnnotationPath===""){a=C.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT");this.handleValueStateofComboBox(a,b.Annotations.dataPoint,"sapOvpDataPoint",true)}else{this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}}else if(t==="entitySet"){a=C.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(a,b.Annotations.title,"sapOvpCardTitle",true);if(e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist"){a=C.getText("OVP_KEYUSER_LISTFLAVOR_ERROR");this.handleValueStateofComboBox(a,b.Annotations.listFlavor,"sapOVPLinkListFlavor",true)}}else if(t==="KPICheckBox"&&!i&&e.entitySet){this.handleValueStateofComboBox("",b.Annotations.subTitle,"sapOvpCardSubTitle",false);this.handleValueStateofComboBox("",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false);this.handleValueStateofComboBox("",b.Annotations.dataPoint,"sapOvpDataPoint",false)}else{if(t==="title"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR",b.Annotations.title,"sapOvpCardTitle")}if(t==="subTitle"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE",b.Annotations.subTitle,"sapOvpCardSubTitle")}if(t==="valueSelectionInfo"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO",b.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo")}if(t==="dataPointAnnotationPath"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT",b.Annotations.dataPoint,"sapOvpDataPoint")}if(t==="listFlavor"){this.onComboBoxSelection(e,t,"OVP_KEYUSER_LISTFLAVOR_ERROR",b.Annotations.listFlavor,"sapOVPLinkListFlavor")}}},onComboBoxSelection:function(e,t,i,a,s){var n;if(e[t]===""){n=C.getText(i);this.handleValueStateofComboBox(n,a,s,true)}else{this.handleValueStateofComboBox(n,a,s,false)}},onSaveButtonPress:function(){if(!this._oCardManifestSettings.addNewCard){if(a.bError||this.bError){a.oMessagePopOverButton.firePress()}else{this.createAndSubmitChange.bind(this)()}}else{this.createAndSubmitChange.bind(this)()}},onResizingChange:function(e){var t=e.getParameter("state");this._oCardManifestSettings.stopResizing=!t;this.updateCard(e)},onNumberOfRowsChanged:function(e){var t=+this._oCardManifestSettings.defaultSpan.rows;this._oCardManifestSettings.defaultSpan.rows=t;this._oCardManifestSettings.defaultSpan.showOnlyHeader=t===0;this._oCardManifestSettings.cardLayout.showOnlyHeader=t===0;var i=["sap.ovp.cards.list","sap.ovp.cards.table"];if(i.indexOf(this._oCardManifestSettings.template)!==-1){this._oCardManifestSettings.cardLayout.noOfItems=t}else{this._oCardManifestSettings.cardLayout.rowSpan=t}this.updateCard(e)},onNumberOfColumnsChanged:function(e){this._oCardManifestSettings.defaultSpan.cols=+this._oCardManifestSettings.defaultSpan.cols;this.updateCard(e)},setBusy:function(e){if(e){this.getView().addStyleClass("dialogContainerOverlay");var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}else{this.getView().removeStyleClass("dialogContainerOverlay");setTimeout(function(){var t=this.getView().byId("dialogCard");if(t.getVisible()&&t.getComponentInstance()){t.getComponentInstance().getRootControl().setBusy(e)}}.bind(this),2e3)}},_fCardWithoutRefresh:function(e,t){var i=this.getView(),a=this._oCardManifestSettings,s=i.byId("dialogCard").getComponentInstance(),n=s.getRootControl(),o=n.getController(),r=o.getCardPropertiesModel(),l,d,h=false,g;if(a.tabs&&a.tabs.length){h=true;g=parseInt(a.selectedKey,10)}if(t.formElementId==="sapOvpSettingsLineItemTitle"||t.formElementId==="sapOvpSettingsLineItemSubTitle"){l=n.byId(t.cardElementId+"--"+i.getModel().getProperty("/lineItemId"))}else{l=n.byId(t.cardElementId);if(!l){this._fCardWithRefresh(e,t.cardElementId)}}switch(t.formElementId){case"sapOvpSettingsLineItemTitle":case"sapOvpSettingsLineItemSubTitle":case"sapOvpSettingsTitle":case"sapOvpSettingsValueSelectionInfo":if(l){l.setText(e.getSource().getValue())}break;case"sapOvpSettingsSubTitle":r.setProperty("/subTitle",e.getSource().getValue());o._setSubTitleWithUnitOfMeasure(undefined,true);break;case"sapOvpSettingsViewName":var u=a.viewName;d=i.getModel();l.getItems()[g-1].setText(u);a.tabs[g-1].value=u;if(a.defaultViewSelected===g){u=u+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"}a.aViews[g].text=u;d.refresh();break;case"sapOvpDefaultViewSwitch":if(e.getSource().getState()){var c=a.defaultViewSelected;d=i.getModel();a.defaultViewSelected=g;a.aViews[c].text=a.tabs[c-1].value;a.aViews[g].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";d.refresh();this.defaultViewSwitch=e.getSource();this.defaultViewSwitch.setEnabled(false)}break;case"sapOvpSettingsIdentification":if(h){a.tabs[g-1][t.updateProperty]=a[t.updateProperty]}break;case"sapOvpSettingsKPIHeaderSwitch":var f=i.getModel("visibility"),p=f.getData();p.dataPoint=false;p.valueSelectionInfo=false;if(h){a.tabs.forEach(function(e){e.prevDataPointAnnotationPath=e.dataPointAnnotationPath;e.dataPointAnnotationPath=undefined})}else{var S=a.dataPointAnnotationPath;if(S){a.prevDataPointAnnotationPath=S}a.dataPointAnnotationPath=undefined}f.refresh(true);l.destroy();break;default:break}},_fCardWithRefresh:function(e,t){var s,o,r,l,d,h=this._oCardManifestSettings,g=this.getView(),u=g.byId("dialogCard"),c=!u.getComponentInstance()?undefined:u.getComponentInstance().getComponentData(),f=!c?"Dialog":c.cardId,p=!c?undefined:c.manifest.cards[f].model,S={cards:{}},v=false,C;if(h.tabs&&h.tabs.length){v=true;C=parseInt(h.selectedKey,10)}switch(t){case"subTitleSwitch":r=this.getView();l=r.getModel("visibility");if(e.getSource().getState()){if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDynamicSubtitleAnnotationPath;if(s){e.dynamicSubtitleAnnotationPath=s}else{e.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}});h.dynamicSubtitleAnnotationPath=h.tabs[o-1].dynamicSubtitleAnnotationPath}else{s=h.prevDynamicSubtitleAnnotationPath;if(s){h.dynamicSubtitleAnnotationPath=s}else{h.dynamicSubtitleAnnotationPath=h.dynamicSubTitle[0].value}}if(c.template!=="sap.ovp.cards.linklist"&&c.template!=="sap.ovp.cards.v4.linklist"){g.byId("sapOvpSettingsDynamicSubTitle").setSelectedKey(h.dynamicSubtitleAnnotationPath)}}else{if(v){h.tabs.forEach(function(e){e.prevDynamicSubtitleAnnotationPath=e.dynamicSubtitleAnnotationPath;e.dynamicSubtitleAnnotationPath=undefined});h.dynamicSubtitleAnnotationPath=undefined}else{var b=h.dynamicSubtitleAnnotationPath;if(b){h.prevDynamicSubtitleAnnotationPath=b}h.dynamicSubtitleAnnotationPath=undefined}}l.setProperty("/subTitle",a.getVisibilityOfElement(h,"subTitle",v));l.setProperty("/dynamicSubTitle",a.getVisibilityOfElement(h,"dynamicSubTitle",v)&&!!h["dynamicSubTitle"]&&!!h["dynamicSubTitle"].length);l.refresh(true);break;case"kpiHeader":r=this.getView();l=r.getModel("visibility");d=l.getData();d.valueSelectionInfo=true;d.dataPoint=true;if(h.tabs&&h.tabs.length){d.dataPoint=a.getVisibilityOfElement(h,"dataPoint",true)}if(!h.valueSelectionInfo){h.valueSelectionInfo=" "}if(v){o=h.defaultViewSelected;h.tabs.forEach(function(e){s=e.prevDataPointAnnotationPath;if(s){e.dataPointAnnotationPath=s}else{e.dataPointAnnotationPath=h.dataPoint[0].value}});h.dataPointAnnotationPath=h.tabs[o-1].dataPointAnnotationPath}else{s=h.prevDataPointAnnotationPath;if(s){h.dataPointAnnotationPath=s}else{h.dataPointAnnotationPath=h.dataPoint[0].value}}l.refresh(true);break;case"listType":h[t]=e.getSource().getState()?"extended":"condensed";break;case"listFlavor":h[t]=e.getSource().getState()?"bar":"";break;case"entitySet":if(v){h.tabs[C-1][t]=h[t];n.resetTabFields.forEach(function(e){delete h.tabs[C-1][e];delete h[e]});var m=h.metaModel,y=m.getODataEntitySet(h.tabs[C-1].entitySet),_=h.defaultViewSelected;h.entityType=m.getODataEntityType(y.entityType);this.resetSupportingObjectsOnEntitySetChange(h,_)}break;case"kpiAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsKPIAnnotation").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}a.addKPINavApplicationName(h);this.getView().getModel().refresh(true);break;case"selectionPresentationAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}var I=g.byId("sapOvpSettingsFilterAndPresentedBy").getSelectedKey();if(h.entityType[I]){this.setVariant(h,I)}this.getView().getModel().refresh(true);break;case"listFlavorForLinkList":case"annotationPath":case"chartAnnotationPath":case"presentationAnnotationPath":case"selectionAnnotationPath":case"dynamicSubtitleAnnotationPath":case"dataPointAnnotationPath":if(v){h.tabs[C-1][t]=h[t]}break;case"noOfRows":case"ovpHeaderTitle":case"add":case"removeVisual":case"changeVisual":case"sort":case"delete":break;default:break}S.cards[f]={settings:h};if(a.bNewKPICardFlag){S.cards[f].template=h.template}else{S.cards[f].template=c.template}if(a.bNewKPICardFlag){if(p&&g.getModel(p)){g.getModel(p).destroy();g.setModel(null,p)}var V=this._oCardManifestSettings.selectedKPI,M=new E(V.ODataURI,{annotationURI:V.ModelURI,defaultCountMode:O.None});p=P._getLayerNamespace()+".kpi_card_model_"+a.getTrimmedDataURIName(V.ODataURI);g.setModel(M,p)}if(!!p){S.cards[f].model=p}if(a.bNewKPICardFlag){M.getMetaModel().loaded().then(function(){var e=i.createCardComponent(g,S,"dialogCard");e.then(function(){g.setBusy(false);this.setBusy(false)}.bind(this)).catch(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");a.createErrorCard(g,S,f)})}.bind(this),function(e){w.error(e);this.setBusy(false);g.setBusy(false)}.bind(this));M.attachMetadataFailed(function(){a.setErrorMessage(S.cards[f].settings,"OVP_KEYUSER_METADATA_FAILURE");a.createErrorCard(g,S,f)})}else{this.createCard(g,S)}},setVariant:function(e,t){var i=e.entityType[t];var a=i.SelectionVariant&&i.SelectionVariant.Path;if(/^@/.test(a)){a=a.slice(1)}e.selectionAnnotationPath=a;var s;if(t.indexOf(".KPI")!==-1){s=i.Detail&&i.Detail.DefaultPresentationVariant&&i.Detail.DefaultPresentationVariant.Path}else if(t.indexOf(".SelectionPresentationVariant")!==-1){s=i.PresentationVariant&&i.PresentationVariant.Path}if(/^@/.test(s)){s=s.slice(1)}e.presentationAnnotationPath=s;var n=e.entityType[e.presentationAnnotationPath]&&e.entityType[e.presentationAnnotationPath].Visualizations;for(var o=0;o<n.length;o++){var r=n[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){e.chartAnnotationPath=r;break}}}},createCard:function(e,t){this.setBusy(true);var a=i.createCardComponent(e,t,"dialogCard");a.then(function(){this.setBusy(false);var e=this.getView().byId("sapOvpStaticLinkListLineItem");if(e){var t=e.getSelectedItem();if(t){var i=t.getId(),a=this.getIndexFromIdForStaticLinkList(i);this.setCurrentActivePageForCarouselCard(a)}}}.bind(this));a.catch(function(){this.setBusy(false)}.bind(this))},updateCard:function(e,t){var i=this._oCardManifestSettings,a=this.getView().byId("dialogCard");this.setEnablePropertyForResetAndSaveButton(true);if(a.getVisible()){if(i.tabs&&i.tabs.length){var s=parseInt(i.selectedKey,10);i.isViewResetEnabled=true;i.aViews[s].isViewResetEnabled=true}var n=e.getSource(),o=t?t:n.getId(),r=false;if(o.indexOf("sapOvpStaticLinkListLineItem")!==-1){var l=n.getModel(),d=l.getData().staticContent,h=this.getIndexFromIdForStaticLinkList(o);this.setCurrentActivePageForCarouselCard(h);l.setProperty("/lineItemId",d[h].id);if(o.indexOf("sapOvpSettingsLineItemTitle")!==-1){o="sapOvpSettingsLineItemTitle"}else if(o.indexOf("sapOvpSettingsLineItemSubTitle")!==-1){o="sapOvpSettingsLineItemSubTitle"}}for(var g=0;g<this._aRefreshNotRequired.length;g++){if(o.indexOf(this._aRefreshNotRequired[g].formElementId)>-1){if(this._aRefreshNotRequired[g].isKpiSwitch&&e.getSource().getState()){break}this._fCardWithoutRefresh(e,this._aRefreshNotRequired[g]);r=true;break}}if(!r){for(var u=0;u<this._aRefreshRequired.length;u++){if(o.indexOf(this._aRefreshRequired[u].formElementId)>-1){this.setBusy(true);this._fCardWithRefresh(e,this._aRefreshRequired[u].updateProperty);break}}}var c=P._getLayer();if(c===b.Layers.vendor){for(var f in this.oMandatoryPropertiesKey){if(o.indexOf(this.oMandatoryPropertiesKey[f])>-1){var p=false,S=f+"Key",v=f+"Property";i[f]=e.getParameter("value");i[v]=e.getParameter("value");for(var f in i.ai18nProperties){if(i.ai18nProperties[f].value===e.getParameter("value")){i[S]=i.ai18nProperties[f].key;p=true;break}}if(!p){i[S]=""}break}}}}},onExit:function(){a.oSaveButton.detachPress(this.onSaveButtonPress,this);a.oResetButton.detachPress(this.onResetButton,this);a.oMessagePopOverButton.detachPress(this.handleMessagePopoverPress,this)},getListItems:function(){var e=[],t=this._oCardManifestSettings,i=this.getView(),s=i.byId("dialogCard"),n=s.getComponentInstance().getComponentData();var o=n.model.getMetaModel();var r=P.isODataV4(n.model);var l=r?"/"+t.entityType.$Type+"/@"+t.annotationPath:t.entityType.$path+"/"+t.annotationPath;var d=o.getContext(o.resolve(l,this.oView.getBindingContext()));var h=2,c=1,f=0;if(t.listFlavor==="bar"){h=1;c=2}if(t.listType&&t.listType.toLowerCase()==="extended"){h=6;c=3;f=3;if(t.listFlavor==="bar"){h=5}}else if(t.contentFragment==="sap.ovp.cards.table.Table"||t.contentFragment==="sap.ovp.cards.table.v4.Table"){h=3;c=1;f=1}t.lineItem.forEach(function(t){var i=r?g.getSortedDataPoints(d,t.fields):u.getSortedDataPoints(d,t.fields);var s=r?g.getSortedDataFields(d,t.fields):u.getSortedDataFields(d,t.fields);var n=[],o=[],l=a.getQualifier(t.value);i.forEach(function(e){if(e.Title){var t=r?e.Title:e.Title.String;o.push(a.checkForEmptyString(t,""))}else{o.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});s.forEach(function(e){if(e.Label){var t=r?e.Label:e.Label.String;n.push(t)}else{n.push(C.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l]))}});var p=Math.min(o.length,c),S=Math.min(f,p),P=n.slice(0,h-S).concat(o.slice(0,p));P.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)});e.push({Value:t.value,Label:t.name,VisibleFields:P.toString()})});return e},onSearch:function(e){var t=this.getView(),i=t.getModel(),a;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"sapOvpKPITable");a=t.byId("sapOvpKPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",a);i.refresh(true)},_filterTable:function(e,t,i){var a=e.getParameter("query"),s=null,n=[];for(var o=0;o<t.length;o++){n.push(new r(t[o],l.Contains,a))}if(a){s=new r(n,false)}this.getView().byId(i).getBinding("items").filter(s,"Application")},onItemPress:function(e){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);var t=e.getSource(),i=t.getBindingContext(),a=i.getObject();this.getView().byId("sapOvpSettingsTitle").setValue(a.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(a.KPITitle);this.onKPIUpdate(a);this.updateCard(e,"sapOvpSettingsNewKPICard")},onKPIUpdate:function(e){this._oCardManifestSettings.entitySet=e.ODataEntityset;this._oCardManifestSettings.kpiAnnotationPath="com.sap.vocabularies.UI.v1.KPI#"+e.KPIQualifier;this._oCardManifestSettings.title=e.GroupTitle;this._oCardManifestSettings.subTitle=e.KPITitle;this._oCardManifestSettings.template="sap.ovp.cards.charts.analytical";this._oCardManifestSettings.selectedKPI=e},onSeePress:function(){this.attachBrowserHeightChangeHandler();var e=new S("KPIItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.KPIItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_KPI_DIALOG_TITLE"),buttons:[e]}).addStyleClass("sapOvpSettingsDialogBox");var i=new t({KPIItem:this._oCardManifestSettings.KPIData});i.setSizeLimit(this._oCardManifestSettings.KPIData.length);i.setProperty("/densityStyle",this.getDensityStyle());i.setProperty("/NoOfKPIItem",i.getProperty("/KPIItem").length);var a=new V("KPIItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectKPI",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:i.createBindingContext("/")},models:{tableRows:i}}}});a.setModel(i);a.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.KPIItemDialog.addContent(a);a.loaded().then(function(t){this._oKPIItemDialogContentView=t;t.getController().updateKPIItemPath=function(t,i){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);this.getView().byId("sapOvpSettingsTitle").setValue(t.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(t.KPITitle);this.onKPIUpdate(t);this.updateCard(i,"sapOvpSettingsNewKPICard");this.cleanAndCloseDialog(e)}.bind(this);e.attachPress(function(){this.cleanAndCloseDialog(e)}.bind(this));this.KPIItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},openLineItemValueHelpDialog:function(e){this.attachBrowserHeightChangeHandler();var i=new I;this._oEvent=Object.assign(i,e);var s=new S("lineItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.lineItemDialog=new p({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LINEITEM_ANNO"),buttons:[s]}).addStyleClass("sapOvpSettingsDialogBox");var n=new t({lineItem:this.getListItems()});n.setProperty("/densityStyle",this.getDensityStyle());n.setProperty("/NoOfLineItem",n.getProperty("/lineItem").length);var o=new V("lineItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectLineItem",type:f.XML,preprocessors:{xml:{bindingContexts:{tableRows:n.createBindingContext("/")},models:{tableRows:n}}}});o.setModel(n);o.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.lineItemDialog.addContent(o);o.loaded().then(function(e){this._oLineItemDialogContentView=e;e.getController().updateLineItemPath=function(e){var t=e.Value,i=this._oCardManifestSettings,n;if(i.tabs&&i.tabs.length){n=parseInt(i.selectedKey,10)}i.lineItemQualifier=a.getQualifier(t);i.annotationPath=t;if(i.tabs&&i.tabs.length){i.tabs[n-1].annotationPath=i.annotationPath}this.getView().byId("sapOvpSettingsLineItem").setValue(e.Label);this._fCardWithRefresh(this._oEvent,"annotationPath");this.setEnablePropertyForResetAndSaveButton(true);if(i.tabs&&i.tabs.length){i.isViewResetEnabled=true;i.aViews[n].isViewResetEnabled=true}this.cleanAndCloseDialog(s)}.bind(this);s.attachPress(function(){this.cleanAndCloseDialog(s)}.bind(this));this.lineItemDialog.open();setTimeout(function(){this.browserHeightChange()}.bind(this),0)}.bind(this))},createAndSubmitChange:function(){var e;if(a.bNewStaticLinkListCardFlag){e=s.getPayLoadForNewStaticLinkListCard.bind(this)(a)}else if(a.bNewKPICardFlag){e=s.getPayLoadForNewKPICard.bind(this)(a)}else if(a.bAddNewCardFlag){e=s.getPayLoadForNewCard.bind(this)(a)}else{e=s.getPayLoadForEditCard.bind(this)(a)}this.settingsResolve(e);a.dialogBox.close()},setMandatoryFieldState:function(e,t){t.setProperty("/dataPoint",e);t.setProperty("/valueSelectionInfo",e);t.setProperty("/requiredSubTitle",e);var i=t.getData(),s=false;for(var n=0;n<a.aVisiblePropertiesForAnnotation.length;n++){if(i[a.aVisiblePropertiesForAnnotation[n].sProperty]){s=true;break}}t.setProperty("/setAnnotationCardProperties",s)},EnableKPIHeaderFields:function(e){var t=this.getView().getModel("visibility");if(!e){this.setMandatoryFieldState(false,t)}else{this.setMandatoryFieldState(true,t)}},onCardTypeSelected:function(e){var t=e.getParameters().id;this._oCardManifestSettings.template=e.getSource().getSelectedKey();this.getView().byId("sapOVPAddKpiCheckBoxID").setSelected(false);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this._oCardManifestSettings.addKPIHeaderCheckBox=false;this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},onDatasourceComboboxChanged:function(e){var t=e.getParameters().id;this._oCardManifestSettings.model=e.getParameters().value;this._oCardManifestSettings.allEntitySet="";if(!a.newDataSource){var i=this._oCardManifestSettings.datasources;for(var s=0;s<i.length;s++){if(i[s].Title===this._oCardManifestSettings.model){this._oCardManifestSettings.metaModel=i[s].oMetaModel}}a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var n=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(n,"datasSourceExisting","sapOVPDataSourceExistingComboBox",true)}else{this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{var o=this._oCardManifestSettings.datasources.filter(function(e){return e.Title===this._oCardManifestSettings.model}.bind(this));getMetaModelForNewDataSource(o,a.sApplicationId).then(function(e){if(e){a.newDataSourceModel=e.modelInformation;e.getODataEntityContainer=function(){return e.oEntityContainers};e.getObject=function(t){return e.oSchema};e.getODataEntityType=function(t){var i=e.oSchema[0].entityType.filter(function(i){var a=t.substr((e.oEntityContainers.namespace+".").length);return i.name===a});return i[0]};this._oCardManifestSettings.metaModel=e;a.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}else{this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)}}else{this._oCardManifestSettings.model="";this.resetPropertiesVisibility(t,this._oCardManifestSettings);var i=C.getText("OVP_KEYUSER_UNAVAILABLE_DATASOURCE");this.handleValueStateofComboBox(i,"datasSourceNew","sapOVPDataSourceNewInput",true)}}.bind(this))}},onEntitySetChanged:function(e,t){var i=this._oCardManifestSettings.metaModel.getObject("/dataServices/schema")[0].entityType;this.aVariantNames.forEach(function(e){if(this._oCardManifestSettings[e.sPath]){this._oCardManifestSettings[e.sPath]=[]}}.bind(this));for(var s in i){if(i[s].name===e){this._oCardManifestSettings.entityType=i[s];break}}a.addSupportingObjects(this._oCardManifestSettings);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this.resetPropertiesVisibility(t,this._oCardManifestSettings)},addStaticParameterRow:function(){var e=this.getView().getModel();var t=e.getProperty("/aAllStaticParameters");if(t&&t.length){t.push({key:"",value:""})}else{t=[];t.push({key:"",value:""})}e.setProperty("/aAllStaticParameters",t)},addActionRow:function(){var e=this.getView().getModel();var t=e.getProperty("/objectStreamCardsSettings/customActions");if(t&&t.length){t.push({text:"",press:"",position:""})}else{t=[];t.push({text:"",press:"",position:""})}e.setProperty("/objectStreamCardsSettings/customActions",t)},onParameterDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/aAllStaticParameters");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["key"];i=i.filter(function(e){return e["key"]!=a});t.setProperty("/aAllStaticParameters",i);if(!m(this._oCardManifestSettings.staticParameters,this._oOriginalCardManifestSettings.staticParameters)){this.setEnablePropertyForResetAndSaveButton(true)}this.getView().getModel().refresh()},onActionDelete:function(e){var t=this.getView().getModel();var i=t.getProperty("/objectStreamCardsSettings/customActions");var a=e.getSource().getBindingContext().getObject()&&e.getSource().getBindingContext().getObject()["text"];i=i.filter(function(e){return e["text"]!=a});t.setProperty("/objectStreamCardsSettings/customActions",i);if(!m(this._oCardManifestSettings.objectStreamCardsSettings,this._oOriginalCardManifestSettings.objectStreamCardsSettings)){this.setEnablePropertyForResetAndSaveButton(true)}},updateProperty:function(e){var t=e.getSource().getId();var i=false,s;if(this._oCardManifestSettings.tabs&&this._oCardManifestSettings.tabs.length){i=true;s=parseInt(this._oCardManifestSettings.selectedKey,10);this._oCardManifestSettings.isViewResetEnabled=true;this._oCardManifestSettings.aViews[s].isViewResetEnabled=true}for(var n=0;n<this._updateManifestProperties.length;n++){if(t.indexOf(this._updateManifestProperties[n].formElementId)>-1){var o=this._updateManifestProperties[n].formElement;switch(o){case"entitySet":var r=e.getSource().getSelectedKey();if(!i){this._oCardManifestSettings["entitySet"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["entitySet"]=e.getParameter("value")}this.onEntitySetChanged(r,t);if(this._oCardManifestSettings["entitySet"].length!==0){this.validateComboBox(this._oCardManifestSettings,"entitySet")}break;case"identificationAnnotationPath":if(!i){this._oCardManifestSettings["identificationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["identificationAnnotationPath"]=e.getParameter("value")}break;case"selectionPresentationAnnotationPath":if(!i){this._oCardManifestSettings["selectionPresentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionPresentationAnnotationPath"]=e.getParameter("value")}break;case"selectionAnnotationPath":if(!i){this._oCardManifestSettings["selectionAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["selectionAnnotationPath"]=e.getParameter("value")}break;case"presentationAnnotationPath":if(!i){this._oCardManifestSettings["presentationAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["presentationAnnotationPath"]=e.getParameter("value")}break;case"annotationPath":if(!i){this._oCardManifestSettings["annotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["annotationPath"]=e.getParameter("value")}break;case"listType":this._oCardManifestSettings.listType=e.getSource().getSelectedKey();break;case"listFlavor":this._oCardManifestSettings.listFlavor=e.getSource().getSelectedKey();if(t.indexOf("sapOVPLinkListFlavor")!==-1){this.validateComboBox(this._oCardManifestSettings,"listFlavor")}break;case"KPICheckBox":this._oCardManifestSettings.addKPIHeaderCheckBox=e.getParameter("selected");this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.validateComboBox(this._oCardManifestSettings,"KPICheckBox",this._oCardManifestSettings.addKPIHeaderCheckBox);break;case"dataPointAnnotationPath":if(!i){this._oCardManifestSettings["dataPointAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["dataPointAnnotationPath"]=e.getParameter("value")}this.validateComboBox(this._oCardManifestSettings,"dataPointAnnotationPath");break;case"addODataSelectCheckBox":this._oCardManifestSettings.addODataSelectCheckBox=e.getParameter("selected");break;case"requireAppAuthorization":this._oCardManifestSettings.requireAppAuthorization=e.getParameter("value");break;case"kpiAnnotationPath":if(!i){this._oCardManifestSettings["kpiAnnotationPath"]=e.getParameter("value")}else{this._oCardManifestSettings.tabs[s-1]["kpiAnnotationPath"]=e.getParameter("value")}this._oCardManifestSettings.kpiAnnotationPath=e.getParameter("value");break;case"navigationPath":this._oCardManifestSettings.navigationPath=e.getParameter("value");break;case"title":case"subTitle":case"valueSelectionInfo":var l=false;var d=o+"Key";var h=o+"Property";this._oCardManifestSettings[o]=e.getParameter("value");this._oCardManifestSettings[h]=e.getParameter("value");for(var g in this._oCardManifestSettings.ai18nProperties){if(this._oCardManifestSettings.ai18nProperties[g].value===e.getParameter("value")){this._oCardManifestSettings[d]=this._oCardManifestSettings.ai18nProperties[g].key;l=true;break}}if(!l){this._oCardManifestSettings[d]=""}this.validateComboBox(this._oCardManifestSettings,o);break;case"existingDatasSource":if(e.mParameters.selected){a.newDataSource=false;this._oCardManifestSettings.newDataSource=false;this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);var u=this.getView().getModel();u.setProperty("/datasources",this._oCardManifestSettings.datasourcesFromManifest)}break;case"newDatasSource":if(e.mParameters.selected){a.newDataSource=true;this._oCardManifestSettings.newDataSource=true;this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(t,this._oCardManifestSettings);this.getView().setBusy(true);getNewDataSources(a.sApplicationId).then(function(e){this.getView().setBusy(false);var t=e.results;var i=this.getView().getModel();i.setSizeLimit(t.length);i.setProperty("/datasources",t)}.bind(this))}break;default:break}}}},resetPropertiesVisibility:function(e,t){if(e.indexOf("sapOVPExistingDataSource")!==-1||e.indexOf("sapOVPNewDataSource")!==-1){this._updateManifestProperties.forEach(function(e){if(!e.formElementId.includes("sapOVPExistingDataSource")&&!e.formElementId.includes("sapOVPNewDataSource")){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}});t.model=""}else if(e.indexOf("sapOVPDataSource")!==-1){this._updateManifestProperties.forEach(function(i){if(!i.formElementId.includes("sapOVPExistingDataSource")&&!i.formElementId.includes("sapOVPNewDataSource")&&!e.includes(i.formElementId)){if(i.formElementId.includes("sapOVPAddODataSelect")){t[i.formElement]=false}else{t[i.formElement]=""}}})}else if(e.indexOf("sapOVPCardType")!==-1){this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{t[e.formElement]=""}}})}else if(e.indexOf("sapOVPEntitySetList")!==-1){var i=this.getView().getModel("visibility").getData().showViewSwitch;this._updateManifestProperties.forEach(function(e){if(!(e.formElementId.includes("sapOVPDataSource")||e.formElementId.includes("sapOVPCardType")||e.formElementId.includes("sapOVPEntitySetList"))){if(e.formElementId.includes("sapOVPAddODataSelect")){t[e.formElement]=false}else{if(!i){t[e.formElement]=""}else{n.tabFields.forEach(function(e){if(e!=="entitySet"&&e!=="value"){t[e]=""}})}}}})}a.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);a.setVisibilityForFormElements(t);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh()}})});
sap.ui.predefine("sap/ovp/cards/rta/SettingsDialogConstants", [],function(){"use strict";return{aVariantNames:[{sVariant:".SelectionVariant",sPath:"selectionVariant"},{sVariant:".PresentationVariant",sPath:"presentationVariant"},{sVariant:".SelectionPresentationVariant",sPath:"selectionPresentationVariant"},{sVariant:".KPI",sPath:"KPI"},{sVariant:".Identification",sPath:"identification"},{sVariant:".DataPoint",sPath:"dataPoint",isMandatoryField:true},{sVariant:".Chart",sPath:"chart",isMandatoryField:true},{sVariant:".Chart",sPath:"chartSPVorKPI",isMandatoryField:true},{sVariant:".SelectionVariant",sPath:"selectionVariantSPVorKPI"},{sVariant:".PresentationVariant",sPath:"presentationVariantSPVorKPI"},{sVariant:".LineItem",sPath:"lineItem",isMandatoryField:true},{sVariant:".HeaderInfo",sPath:"dynamicSubTitle",isMandatoryField:true}],aVisiblePropertiesForAnnotation:[{sProperty:"selectionVariant"},{sProperty:"presentationVariant"},{sProperty:"selectionPresentationVariant"},{sProperty:"KPI"},{sProperty:"identification"},{sProperty:"dataPoint"},{sProperty:"dataPointSelectionMode"},{sProperty:"lineItem"}],tabFields:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","value"],mainFields:["title","subTitle","valueSelectionInfo","listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan"],resetTabFields:["dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","selectionPresentationAnnotationPath","kpiAnnotationPath"],cardSettingsForStaticLinkListCard:["title","subTitle","listFlavor","stopResizing","defaultSpan"],AllCardSettingsForKPICard:["title","subTitle","stopResizing","defaultSpan","entitySet","kpiAnnotationPath","identificationAnnotationPath"],allCardSettings:["entitySet","listType","listFlavor","sortOrder","sortBy","imageUri","targetUri","openInNewWindow","semanticObject","action","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan"],cardSettingsArrayLevel:{staticContent:{text:["title","subTitle","imageAltText"],settings:["imageUri","targetUri","openInNewWindow","semanticObject","action"]},tabs:{text:["value"],settings:["entitySet","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","navigation"],onlyTabLevelProps:["value"],checkForRemoval:["entitySet"]}},cardSettingsForComplex:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings"]},cardSettings:{text:["title","subTitle","valueSelectionInfo","itemText"],settings:["listType","listFlavor","sortOrder","sortBy","dynamicSubtitleAnnotationPath","annotationPath","selectionAnnotationPath","presentationAnnotationPath","identificationAnnotationPath","dataPointAnnotationPath","chartAnnotationPath","colorPalette","ChartProperties","chartProperties","selectionPresentationAnnotationPath","kpiAnnotationPath","stopResizing","defaultSpan","customParams","staticParameters","objectStreamCardsSettings"]},cardSettingsWithText:["title","subTitle","valueSelectionInfo","itemText",{staticContent:["title","subTitle","imageAltText"]},{tabs:["value"]}],oVisibility:{cardPreview:true,stopResizing:false,noOfRows:false,noOfColumns:false,title:true,showEntitySet:false,dynamicSwitchStateSubTitle:false,dynamicSwitchSubTitle:false,dynamicSubTitle:false,subTitle:true,kpiHeader:true,valueSelectionInfo:true,listType:true,listFlavor:true,selectionVariantSPVorKPI:true,presentationVariantSPVorKPI:true,chartSPVorKPI:true,selectionPresentationVariant:true,KPI:true,selectionVariant:true,presentationVariant:true,lineItem:true,identification:true,dataPoint:true,chart:true,links:false,lineItemTitle:false,lineItemSubTitle:false,staticLink:false,viewSwitch:false,moveToTheTop:false,moveUp:false,moveDown:false,moveToTheBottom:false,delete:false,showMore:true,removeVisual:false,selectCard:false,addKPIHeader:false,setEntitySet:false,setCardProperties:false,setGeneralCardProperties:false,requiredSubTitle:false,showNewCardTypes:false,addCustomActions:false},oI18nKeyValueProperty:{title:"titleKey",subTitle:"subTitleKey",valueSelectionInfo:"valueSelectionInfoKey"},oI18nValueProperty:{title:"title",subTitle:"subTitle",valueSelectionInfo:"valueSelectionInfo"},oMandatoryPropertiesKey:{title:"sapOvpSettingsTitle",subTitle:"sapOvpSettingsSubTitle",valueSelectionInfo:"sapOvpSettingsValueSelectionInfo"},_aRefreshNotRequired:[{formElementId:"sapOvpSettingsTitle",cardElementId:"ovpHeaderTitle"},{formElementId:"sapOvpSettingsViewName",cardElementId:"ovp_card_dropdown"},{formElementId:"sapOvpDefaultViewSwitch",cardElementId:""},{formElementId:"sapOvpSettingsSubTitle",cardElementId:"SubTitle-Text"},{formElementId:"sapOvpSettingsLineItemTitle",cardElementId:"linkListTitleLabel"},{formElementId:"sapOvpSettingsLineItemSubTitle",cardElementId:"linkListSubTitleLabel"},{formElementId:"sapOvpSettingsValueSelectionInfo",cardElementId:"ovpValueSelectionInfo"},{formElementId:"sapOvpSettingsIdentification",cardElementId:"",updateProperty:"identificationAnnotationPath"},{formElementId:"sapOvpSettingsKPIHeaderSwitch",cardElementId:"kpiHeader",isKpiSwitch:true}],_aRefreshRequired:[{formElementId:"sapOvpSettingsKPIHeaderSwitch",updateProperty:"kpiHeader"},{formElementId:"sapOvpSettingsSwitchSubTitle",updateProperty:"subTitleSwitch"},{formElementId:"sapOvpSettingsListType",updateProperty:"listType"},{formElementId:"sapOvpSettingsListFlavorForList",updateProperty:"listFlavor"},{formElementId:"sapOvpSettingsListFlavorForLinkList",updateProperty:"listFlavorForLinkList"},{formElementId:"sapOvpSettingsSortOrder",updateProperty:"sortOrder"},{formElementId:"sapOvpSettingsSortBy",updateProperty:"sortBy"},{formElementId:"sapOvpSettingsDynamicSubTitle",updateProperty:"dynamicSubtitleAnnotationPath"},{formElementId:"sapOvpSettingsFilterAndPresentedBy",updateProperty:"selectionPresentationAnnotationPath"},{formElementId:"sapOvpSettingsFilterBy",updateProperty:"selectionAnnotationPath"},{formElementId:"sapOvpSettingsPresentedBy",updateProperty:"presentationAnnotationPath"},{formElementId:"sapOvpSettingsDataPoint",updateProperty:"dataPointAnnotationPath"},{formElementId:"sapOvpSettingsChart",updateProperty:"chartAnnotationPath"},{formElementId:"sapOvpSettingsLineItem",updateProperty:"annotationPath"},{formElementId:"sapOvpSettingsEntitySet",updateProperty:"entitySet"},{formElementId:"sapOvpSettingsStaticLinkListDelete",updateProperty:"delete"},{formElementId:"sapOvpSettingsStaticLinkListAdd",updateProperty:"add"},{formElementId:"sapOvpSettingsStaticLinkListSort",updateProperty:"sort"},{formElementId:"sapOvpSettingsStaticLinkListChangeVisual",updateProperty:"changeVisual"},{formElementId:"sapOvpSettingsStaticLinkListRemoveVisual",updateProperty:"removeVisual"},{formElementId:"sapOvpSettingsNumberOfRows",updateProperty:"noOfRows"},{formElementId:"sapOvpSettingsKPIAnnotation",updateProperty:"kpiAnnotationPath"},{formElementId:"sapOvpSettingsNewKPICard",updateProperty:""}],aListType:[{key:"condensed",name:"Condensed"},{key:"extended",name:"Extended"}],aListFlavour:[{key:"standard",name:"Standard"},{key:"bar",name:"Bar"}],aLinkListFlavour:[{key:"carousel",name:"Carousel"},{key:"standard",name:"Standard"}],aDataPointSelectionMode:[{key:"dataPointNav",name:"Data Point Navigation"},{key:"chartNav",name:"Chart Navigation"}],_updateManifestProperties:[{formElementId:"sapOVPExistingDataSource",formElement:"existingDatasSource"},{formElementId:"sapOVPNewDataSource",formElement:"newDatasSource"},{formElementId:"sapOVPDataSourceExistingComboBox",formElement:"datasSourceExisting"},{formElementId:"sapOVPDataSourceNewInput",formElement:"datasSourceNew"},{formElementId:"sapOVPCardType",formElement:"template"},{formElementId:"sapOVPEntitySetList",formElement:"entitySet"},{formElementId:"sapOvpCardTitle",formElement:"title"},{formElementId:"sapOvpCardTitle",formElement:"titleKey"},{formElementId:"sapOvpCardTitle",formElement:"titleProperty"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitle"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleKey"},{formElementId:"sapOvpCardSubTitle",formElement:"subTitleProperty"},{formElementId:"sapOVPIdentification",formElement:"identificationAnnotationPath"},{formElementId:"sapOVPSelectionPresentationVariant",formElement:"selectionPresentationAnnotationPath"},{formElementId:"sapOVPSelectionVariant",formElement:"selectionAnnotationPath"},{formElementId:"sapOVPPresentationVariant",formElement:"presentationAnnotationPath"},{formElementId:"sapOVPAnnotationPath",formElement:"annotationPath"},{formElementId:"sapOVPListType",formElement:"listType"},{formElementId:"sapOVPListFlavor",formElement:"listFlavor"},{formElementId:"sapOVPAddKpiCheckBoxID",formElement:"KPICheckBox"},{formElementId:"sapOvpDataPoint",formElement:"dataPointAnnotationPath"},{formElementId:"sapOVPAddODataSelect",formElement:"addODataSelectCheckBox"},{formElementId:"sapOvpCardProperiesAuthorization",formElement:"requireAppAuthorization"},{formElementId:"sapOvpKpiAnnotationPath",formElement:"kpiAnnotationPath"},{formElementId:"sapOVPDataPointSelectionMode",formElement:"navigationPath"},{formElementId:"sapOVPLinkListFlavor",formElement:"listFlavor"},{formElementId:"sapOvpValueSelectionInfo",formElement:"valueSelectionInfo"},{formElementId:"sapOvpSettingsTitle",formElement:"title"},{formElementId:"sapOvpSettingsSubTitle",formElement:"subTitle"}],aCardType:[{template:"sap.ovp.cards.list",text:"List"},{template:"sap.ovp.cards.linklist",text:"Link List"},{template:"sap.ovp.cards.v4.linklist",text:"Link List"},{template:"sap.ovp.cards.table",text:"Table"},{template:"sap.ovp.cards.stack",text:"Stack"},{template:"sap.ovp.cards.charts.analytical",text:"Analytical"}],NewCardSettings:[{template:"sap.ovp.cards.linklist",cardSettings:["title","subTitle","listFlavor","entitySet","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath"],text:["title","subTitle","listFlavor","requireAppAuthorization"]},{template:"sap.ovp.cards.list",cardSettings:["title","subTitle","listType","listFlavor","entitySet","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","listType","listFlavor","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.table",cardSettings:["title","subTitle","entitySet","requireAppAuthorization","annotationPath","identificationAnnotationPath","selectionAnnotationPath","presentationAnnotationPath","selectionPresentationAnnotationPath","addODataSelect","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","requireAppAuthorization","addODataSelect","valueSelectionInfo"]},{template:"sap.ovp.cards.stack",cardSettings:["title","subTitle","entitySet","requireAppAuthorization","annotationPath","addODataSelect"],text:["title","subTitle","requireAppAuthorization","addODataSelect"]},{template:"sap.ovp.cards.charts.analytical",cardSettings:["title","subTitle","entitySet","requireAppAuthorization","kpiAnnotationPath","identificationAnnotationPath","navigationPath","dataPointAnnotationPath","valueSelectionInfo"],text:["title","subTitle","requireAppAuthorization","valueSelectionInfo"]}]}},true);
sap.ui.predefine("sap/ovp/cards/semanticDateRangeTypeHelper", [],function(){"use strict";function e(e,t,i,n){if(e.filterSettings&&e.filterSettings.dateSettings&&e.filterSettings.dateSettings.fields){var a=e.filterSettings.dateSettings.fields;Object.entries(a).forEach(function(e){var a=-1;if(i&&i.Dates){a=i.Dates.findIndex(function(t){return t.PropertyName===e[0]})}if((a===-1||Object.keys(n).indexOf(e[0])===-1)&&e[1].defaultValue){t.getConditionTypeByKey(e[0])&&t.getConditionTypeByKey(e[0]).setOperation(e[1].defaultValue.operation)}})}}return{setSemanticDateRangeDefaultValue:e}},true);
sap.ui.predefine("sap/ovp/cards/stack/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.stack.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.stack.Stack"},contentPosition:{type:"string",defaultValue:"Right"},objectStreamCardsSettings:{type:"object",defaultValue:{}},objectStreamCardsTemplate:{type:"string",defaultValue:"sap.ovp.cards.quickview"},objectStreamCardsNavigationProperty:{type:"string"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/stack/Stack.controller", ["sap/ovp/cards/generic/Card.controller","sap/m/library","sap/ui/thirdparty/jquery","sap/ovp/ui/ObjectStream","sap/ovp/cards/AnnotationHelper","sap/ui/Device","sap/ui/base/BindingParser","sap/ui/core/ComponentContainer","sap/m/Link","sap/ovp/ui/CustomData","sap/ui/core/Icon","sap/m/FlexItemData","sap/m/Text","sap/m/VBox","sap/ovp/app/resources","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ui/core/Component","sap/ui/core/Core"],function(t,e,jQuery,i,a,r,o,n,s,d,l,c,p,h,C,u,v,g,m){"use strict";var f=new v("OVP.stack.Stack");return t.extend("sap.ovp.cards.stack.Stack",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this._oCard=this.getView().byId("stackContent");e.addEventDelegate({onclick:this.openStack.bind(this),onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();this.openStack()}}.bind(this)});if(r.system.phone){this.bAfterColumnUpdateAttached=false;this.bDeviceOrientationAttached=false}this.quickViewCardContextArray=[];this.bQuickViewCardRendered=false;this.initialLoadCardLength=10;this.quickViewCardCount=0;this._createObjectStream()},onExit:function(){if(this.oObjectStream){this.oObjectStream.destroy()}},addPlaceHolder:function(t){var e=this.getView();var i=e.getModel("ovpCardProperties");var a=i.getProperty("/objectStreamCardsNavigationProperty");var r=a?true:false;if(!r){var o=this.getEntityNavigationEntries();if(o.length>0){var n=o[0].label;if(this.sPlaceHolderText==undefined){this.sPlaceHolderText=C.getText("PlaceHolder_default")}var s=this._createPlaceHolder(t,this.sPlaceHolderText,n);var d=this;s.addEventDelegate({onclick:function(){d.doNavigation(null)}});this.oObjectStream.setPlaceHolder(s)}}},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);this.ovpLayout=m.byId(this.oCardComponent._sOwnerId+"---mainView--ovpLayout");if(r.system.phone){this._cardWidth=this.getView().$().width();if(!this.bAfterColumnUpdateAttached){var e=this.getOwnerComponent().getComponentData();if(e&&e.mainComponent&&e.appComponent.oOvpConfig&&e.appComponent.oOvpConfig.containerLayout!=="resizable"){var i=e.mainComponent,a=i.byId("ovpLayout");a.attachAfterColumnUpdate(function(t){this._setObjectStreamCardsSize(false)}.bind(this));this.bAfterColumnUpdateAttached=true}}if(!this.bDeviceOrientationAttached){r.orientation.attachHandler(function(t){this._setObjectStreamCardsSize(true)}.bind(this))}}if(this.bSetErrorState&&this.bSetErrorState===true){this.setErrorState();return}var o=this.getView();if(this.oObjectStream){var n=this.oObjectStream.getBinding("content");n.attachDataRequested(function(){if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","hidden");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","hidden")}},this);n.attachDataReceived(function(){var t=this.getView().getModel("ovpCardProperties").getObject("/category"),e=n.getCurrentContexts().length,i=n.getLength();o.byId("stackSize").setText(e);o.byId("stackTotalSize").setText(C.getText("Total_Size_Stack_Card",[i]));var a=this.getView().byId("stackContent").getDomRef();jQuery(a).attr("aria-label",C.getText("stackCardContent",[e,i,t]));var r=this.getView().byId("stackSize").getDomRef();jQuery(r).attr("aria-label",C.getText("stackCard",[e]));this.addPlaceHolder(i);if(this.getView().byId("stackSize")!==undefined&&this.getView().byId("stackTotalSize")!==undefined){jQuery(this.getView().byId("stackSize").getDomRef()).css("visibility","visible");jQuery(this.getView().byId("stackTotalSize").getDomRef()).css("visibility","visible")}var s=this.getView().getDomRef();var d=jQuery(s).find(".sapOvpCardContentContainer");if(i!==0){if(d.length!==0){d.addClass("sapOvpCardNavigable")}}else{if(d.length!==0){var l=d.find("[role='button']");if(l.length!==0){l.removeAttr("role")}}}},this);this.addPlaceHolder("");if(n.bPendingRequest===false){n.fireDataReceived()}if(this.checkNavigation()){this.oObjectStream.getTitle().addStyleClass("sapOvpCardNavigable")}}},getCardItemsBinding:function(){return this&&this.oObjectStream&&this.oObjectStream.getBinding("content")},_setObjectStreamCardsSize:function(t){var e=this.getView().$().width();if(this._cardWidth!=e||t){this.oObjectStream.setCardsSize(e);this._cardWidth=e}},_createObjectStream:function(){if(this.oObjectStream instanceof i){return}var t=this.getOwnerComponent();var e=t.getComponentData&&t.getComponentData();var r;var l;if(e.i18n){this.oi18n=e.i18n}if(e&&e.mainComponent){r=e.mainComponent._getOvplibResourceBundle()}else{r=t.getOvplibResourceBundle()}l=t.getPreprocessors(r);this.oModel=e.model;this.oCardPropsModel=l.xml.ovpCardProperties;var c=this.oCardPropsModel.getProperty("/entitySet");var p=this.oCardPropsModel.getProperty("/objectStreamCardsSettings");this.oObjectStreamCardsSettings=p;var h=this.oModel.getMetaModel();var C=h.getODataEntitySet(c);var u=h.getODataEntityType(C.entityType);var v=this.oCardPropsModel.getProperty("/annotationPath");var g=v?v.split(","):[];if(e){this.oAppComponent=e.appComponent;this.oOwner=e.mainComponent}if(this.oOwner){this.oGlobalFilter=this.oOwner.getView().byId("ovpGlobalFilter")}function m(t){if(t==="ovpCardProperties"){return this.oCardPropsModel}else if(t==="dataModel"){return this.oModel}else if(t==="_ovpCache"){return{}}}var b=[{getSetting:m.bind(this),bDummyContext:true},C].concat(g);var y=a.formatItems.apply(this,b);var S=o.complexParser(y);var w=this.oCardPropsModel.getProperty("/objectStreamCardsNavigationProperty");this.bStackFlavorAssociation=w?true:false;this.oStackFilterMapping;var k=this.oCardPropsModel.getProperty("/objectStreamCardsTemplate");if(this.bStackFlavorAssociation){if(k==="sap.ovp.cards.quickview"){f.error("objectStreamCardsTemplate cannot be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is provided");this.bSetErrorState=true;return}this.oStackFilterMapping=this._determineFilterPropertyId(this.oModel,C,u,w);p.entitySet=this.oModel.getMetaModel().getODataAssociationSetEnd(u,w).entitySet}else{if(k!=="sap.ovp.cards.quickview"){f.error("objectStreamCardsTemplate must be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is not provided");this.bSetErrorState=true;return}var O=null;var P=this.oCardPropsModel.getProperty("/identificationAnnotationPath");var x=P?P.split(","):[];if(x&&x.length>1){O=x[1]}if(O){p.identificationAnnotationPath=O}if(u["com.sap.vocabularies.UI.v1.HeaderInfo"]&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName&&u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String){p.title=u["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String}else{p.title=u.name}p.entitySet=c}p.isObjectStream=true;S.factory=function(t,e){var i=new n;this.quickViewCardContextArray.push({sId:t,oContext:e,oComponentContainer:i});return i}.bind(this);S.clearQuickViewCard=function(){this.quickViewCardContextArray=[]}.bind(this);var j=this.oCardPropsModel.getObject("/title");this.sPlaceHolderText=this.oCardPropsModel.getObject("/itemText");var V=new s({text:j,subtle:true,press:this.handleObjectStreamTitlePressed.bind(this)}).addStyleClass("sapOvpObjectStreamHeader");V.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));V.addCustomData(new d({key:"aria-label",value:j,writeToDom:true}));this.oObjectStream=new i(this.getView().getId()+"_ObjectStream",{title:V,content:S});this.oObjectStream.setModel(this.oModel)},_renderQuickViewCards:function(t,e,i){return new Promise(function(a,r){var o=this.oCardPropsModel.getProperty("/objectStreamCardsSettings"),n;if(this.bStackFlavorAssociation){n={filters:[{path:this.oStackFilterMapping.foreignKey,operator:"EQ",value1:e.getProperty(this.oStackFilterMapping.key)}]};o=u({},n,this.oObjectStreamCardsSettings)}var s={name:this.oCardPropsModel.getProperty("/objectStreamCardsTemplate"),componentData:{cardId:t,model:this.oModel,settings:o,appComponent:this.oAppComponent,mainComponent:this.oOwner},manifest:false};if(this.oGlobalFilter){s.componentData.globalFilter={getUiState:this.oGlobalFilter.getUiState.bind(this.oGlobalFilter)}}var d=this.oi18n;g.create(s).then(function(t){t.setBindingContext(e);if(d){t.setModel(d,"@i18n")}i.setComponent(t);a();i.setBindingContext=function(e){t.setBindingContext(e)}})}.bind(this))},_determineFilterPropertyId:function(t,e,i,r){var o,n=i.namespace,s,d;for(var l=0;l<i.navigationProperty.length;l++){if(i.navigationProperty[l].name===r){o=i.navigationProperty[l];break}}s=o.relationship;d=a.getAssociationObject(t,s,n);var c=d.referentialConstraint,p={};if(c){p.foreignKey=c.dependent.propertyRef[0].name;p.key=c.principal.propertyRef[0].name;return p}},_createPlaceHolder:function(t,i,a){var r=new l({src:"sap-icon://display-more",useIconTooltip:false,layoutData:new c({alignSelf:e.FlexAlignSelf.Center,styleClass:"sapOvpStackPlaceHolderIconContainer"})});r.addStyleClass("sapOvpStackPlaceHolderIcon");var o=t+" "+i;var n=C.getText("SeeMoreContentAppName",[o,a]);var s=new p({text:n,textAlign:"Center",layoutData:new c({alignSelf:e.FlexAlignSelf.Center,maxWidth:"14rem"})});s.addCustomData(new d({key:"role",value:"heading",writeToDom:true}));s.addCustomData(new d({key:"aria-label",value:n,writeToDom:true}));s.addStyleClass("sapOvpStackPlaceHolderTextLine");var u=new h({items:[s]});u.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");u.addCustomData(new d({key:"tabindex",value:"0",writeToDom:true}));u.addCustomData(new d({key:"role",value:"button",writeToDom:true}));var v=new h({items:[r,u]});v.addStyleClass("sapOvpStackPlaceHolder");v.addEventDelegate({onkeydown:function(t){if(!t.shiftKey&&(t.keyCode==13||t.keyCode==32)){t.preventDefault();t.srcControl.$().click()}}});return v},_openStack:function(){if(this.oObjectStream){var t=this.oObjectStream.getBinding("content");if(t.getCurrentContexts().length>0){var e=this.getView().$().width();this.getView().addDependent(this.oObjectStream);this.oObjectStream.setModel(this.getView().getModel("@i18n"),"@i18n");this.oObjectStream.open(e,this._oCard)}}if(this.ovpLayout){this.ovpLayout.setActive(true)}if(this.oObjectStream.getNewContentAvailable()){if(this.quickViewCardContextArray.length>10){var i=[];for(var a=this.initialLoadCardLength;a<this.quickViewCardContextArray.length;a++){i.push(this._renderQuickViewCards(this.quickViewCardContextArray[a].sId,this.quickViewCardContextArray[a].oContext,this.quickViewCardContextArray[a].oComponentContainer))}}this.oObjectStream.setNewContentAvailable(false)}},openStack:function(){if(this.ovpLayout){this.ovpLayout.setActive(false)}if(this.oObjectStream.getNewContentAvailable()){var t=[];var e=this.quickViewCardContextArray.length<=this.initialLoadCardLength?this.quickViewCardContextArray.length:this.initialLoadCardLength;for(var i=this.quickViewCardCount;i<e;i++){t.push(this._renderQuickViewCards(this.quickViewCardContextArray[i].sId,this.quickViewCardContextArray[i].oContext,this.quickViewCardContextArray[i].oComponentContainer))}Promise.all(t).then(function(){this.bQuickViewCardRendered=true;this._openStack()}.bind(this))}else{this._openStack()}},handleObjectStreamTitlePressed:function(t){this.doNavigation(null)}})});
sap.ui.predefine("sap/ovp/cards/table/Component", ["sap/ovp/cards/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},enableAddToInsight:{type:"boolean",defaultValue:true}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/table/Table.controller", ["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/filter/FilterUtils","sap/ui/core/Core","sap/ovp/cards/Integration/IntegrationCard"],function(e,jQuery,t,a,i,o,n,s,r){"use strict";var d=new o("OVP.table.Table");return e.extend("sap.ovp.cards.table.Table",{onInit:function(){e.prototype.onInit.apply(this,arguments);var t=this;this.eventhandler=function(e,a,i){n.applyFiltersToV2Card(i,t)};this.GloabalEventBus=s.getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler)}},onColumnListItemPress:function(e){var o=i.bCRTLPressed?i.constants.explace:i.constants.inplace;i.bCRTLPressed=false;if(t.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e)}}else{var n=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),n[0],o)}},onContactDetailsLinkPress:function(e){if(this.oPopover){this.oPopover.setVisible(false)}var t,a;t=e.getSource();this.oPopover=t.getParent().getAggregation("items")[0];a=t.getBindingContext();if(!a){return}this.oPopover.bindElement(a.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(t)},getCardItemsBinding:function(){var e=this.getView().byId("ovpTable");return e.getBinding("items")},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);var a=this.getOwnerComponent().getComponentData();var i=this.getCardPropertiesModel();if(!t.checkIfAPIIsUsed(this)&&i.getProperty("/layoutDetail")==="resizable"){var o=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(a.cardId);var n=this.getHeaderHeight();var s=this.oDashboardLayoutUtil.getCardDomId(a.cardId);var r=document.getElementById(s);if(!o.dashboardLayout.autoSpan){r.getElementsByClassName("sapOvpWrapper")[0].style.height=o.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+1-(n+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}if(o.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}this.addColumnInTable(jQuery(r),{colSpan:o.dashboardLayout.colSpan})}else{var d=this.getView().byId("ovpTable");var l=d.getAggregation("columns");for(var g=0;g<3;g++){if(l[g]){l[g].setStyleClass("sapTableColumnShow").setVisible(true)}}}if(this.getView()&&this.getView().byId("sapOvpCardInsights")){this.getView().byId("sapOvpCardInsights").setEnabled(true)}},getCardItemBindingInfo:function(){var e=this.getView().byId("ovpTable");return e.getBindingInfo("items")},addColumnInTable:function(e,t){if(t.colSpan>=1){if(jQuery(e).find("tr").length!=0){var a=s.byId(jQuery(e).find(".sapMList").attr("id"));var i=a.getAggregation("columns");var o=t.colSpan;var n=o+1;for(var r=0;r<6;r++){if(i[r]){if(r<=n){i[r].setStyleClass("sapTableColumnShow").setVisible(true)}else{i[r].setStyleClass("sapTableColumnHide").setVisible(false)}}}}}},resizeCard:function(e,t){var a,i,o,i;try{var n=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),s=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),l=this.getView().byId("ovpCardContentContainer").getDomRef();if(e.showOnlyHeader){l.classList.add("sapOvpContentHidden");a=0}else{l.classList.remove("sapOvpContentHidden");o=r+t.dropDownHeight;i=e.rowSpan*e.iRowHeightPx-o-t.itemHeight;a=Math.abs(Math.floor(i/t.itemHeight));n.style.height=e.rowSpan*e.iRowHeightPx+"px"}l.style.height=e.rowSpan*e.iRowHeightPx-(r+2*e.iCardBorderPx)+"px";this.addColumnInTable(this.getView().getDomRef(),e);if(a!==s.length){s.length=a;e.noOfItems=s.length;this.getCardItemsBinding().refresh()}else{this._handleCountHeader()}}catch(e){d.warning("OVP resize: "+this.cardId+" catch "+e.toString())}},onShowInsightCardPreview:function(e){var t=e.getSource()&&e.getSource().getParent();if(t){t.close()}var a=this.getView();var i=a.getController();var o=i.oCardComponentData;var n=this;r.showCard({entitySet:i.entitySet,entityType:i.entityType,cardComponentName:"Table",cardComponentData:o,cardComponent:i.oCardComponent,itemBindingInfo:n.getCardItemBindingInfo(),view:a}).then(function(e){n.saveGeneratedCardManifest(e)})}})});
sap.ui.predefine("sap/ovp/cards/v4/V4AnnotationHelper", ["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/model/analytics/odata4analytics","sap/fe/navigation/SelectionVariant","sap/ovp/app/resources","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/security/encodeURL","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/app/OVPUtils","sap/ovp/helpers/V4/MetadataAnalyzer"],function(e,t,r,a,i,n,o,u,l,s,f,c,p,g,v,m,h,y,d){"use strict";var P={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var C={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement",UOM:"Org.OData.Measures.V1.Unit",ISO_CURRENCY:"Org.OData.Measures.V1.ISOCurrency"};var T={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var b={List_condensed:{phone:5,tablet:5,desktop:5},List_extended:{phone:3,tablet:3,desktop:3},List_condensed_bar:{phone:5,tablet:5,desktop:5},List_extended_bar:{phone:3,tablet:3,desktop:3},Table:{phone:5,tablet:5,desktop:5},Stack_simple:{phone:20,tablet:20,desktop:20},Stack_complex:{phone:5,tablet:5,desktop:5}};var $=new m("OVP.cards.V4AnnotationHelper");function V(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/showLabelText");if(a==="true"){var i=t.Address[0];if(typeof i.country!=="undefined"){return"{path:'"+i.country.Path+"'}"}else if(typeof i.locality!=="undefined"){return"{path:'"+i.locality.Path+"'}"}else if(typeof i.street!=="undefined"){return"{path:'"+i.street.Path+"'}"}else if(typeof i.code!=="undefined"){return"{path:'"+i.code.Path+"'}"}}else{return null}}V.requiresIContext=true;function D(e,t){if(!t){return""}if(t.Label){return t.Label}var r=e.getSetting&&e.getSetting("ovpCardProperties");var a=r&&r.getProperty("/metaModel");var i=r&&r.getProperty("/entityType");if(!a||!i){return""}var n;if(t.Value){n=t.Value.$Path}if(t.Target){var o="/"+L(i.$Type,t);var u=o&&a.getProperty(o);n=u&&u.Value.$Path}if(!n||!n.length>0||n===" "){return""}var l=a.getData()["$Annotations"][i.$Type+"/"+n];if(!l){return""}var s=l["sap:label"]||l["@com.sap.vocabularies.Common.v1.Label"]||""||"";return s}D.requiresIContext=true;function I(e){if(e.EdmType==="Edm.DateTime"||e.EdmType==="Edm.DateTimeOffset"){return"Right"}return"Left"}I.requiresContext=true;function F(e,t){if(e.getSetting){var r=e.getSetting("_ovpCache");if(r){return r[t]}}return undefined}function O(e,t,r){if(e.getSetting){var a=e.getSetting("_ovpCache");if(a){a[t]=r}}}function S(e,t){var r;if(t){r=t.None;if(e&&e.$EnumMember){var a=e.$EnumMember;if(x(a,"Negative")){r=t.Negative}else if(x(a,"Critical")){r=t.Critical}else if(x(a,"Positive")){r=t.Positive}}}return r}function N(e){if(e=="Error"){e=1}else if(e=="Warning"){e=2}else if(e=="Success"){e=3}else{e=0}return e}function x(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}function E(t,r,a,i,n,o,u){if(typeof t=="string"){t=e.getFloatInstance().parse(t)}var l={};l.$EnumMember="None";var s=Number.NEGATIVE_INFINITY;var f=Number.POSITIVE_INFINITY;if(!n&&n!==0&&(a||a===0)){n=a}if(!o&&o!==0&&(i||i===0)){o=i}if(!a&&a!==0){a=s}if(!i&&i!==0){i=f}if(t!==undefined){t=Number(t);if(x(r,"Minimize")||x(r,"Minimizing")){if((o||o===0)&&(i||i===0)){if(t<=parseFloat(o)){l.$EnumMember="Positive"}else if(t>parseFloat(i)){l.$EnumMember="Negative"}else{l.$EnumMember="Critical"}}}else if(x(r,"Maximize")||x(r,"Maximizing")){if((n||n===0)&&(a||a===0)){if(t>=parseFloat(n)){l.$EnumMember="Positive"}else if(t<parseFloat(a)){l.$EnumMember="Negative"}else{l.$EnumMember="Critical"}}}else if(x(r,"Target")){if((o||o===0)&&(i||i===0)&&(n||n===0)&&(a||a===0)){if(t>=parseFloat(n)&&t<=parseFloat(o)){l.$EnumMember="Positive"}else if(t<parseFloat(a)||t>parseFloat(i)){l.$EnumMember="Negative"}else{l.$EnumMember="Critical"}}}}return S(l,u)}function A(t,r,a,i){if(typeof t=="string"){t=e.getFloatInstance().parse(t)}if(!t||!r){return}t=Number(t);if(!i&&t-r>=0){return"Up"}if(!a&&t-r<=0){return"Down"}if(r&&i&&t-r>=i){return"Up"}if(r&&a&&t-r<=a){return"Down"}}function M(e,t){var r=e.getPath(0)+"-DataFields-Sorted";var a=F(e,r);if(!a){var i=R(e,t);var n=i.map(function(e){return e.Value.$Path});n=n.filter(function(e){return!!e});a=t.filter(function(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"&&n.indexOf(e.Value.$Path)===-1){return true}return false});a=B(a);O(e,r,a)}return a}M.requiresIContext=true;function R(e,t,r){var a=e.getPath(0)+"-DataPoints-Sorted";var i=F(e,a);if(!i){if(r){i=t.filter(w)}else{i=t.filter(U)}i=B(i);var n;for(var o=0;o<i.length;o++){n=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);i[o]=e.getModel(0).getProperty(L(n,i[o]));n=""}O(e,a,i)}return i}R.requiresIContext=true;function U(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true}return false}function w(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$AnnotationPath.match(/@com.sap.vocabularies.Communication.v1.Contact.*/)){return true}return false}function q(e){if(!e||!e.Criticality||!e.Criticality.Path){return}return"{path:'"+e.Criticality.Path+"'}"}function L(e,t){return e+t.Target.$AnnotationPath}function _(e){var t,r;if(e["@com.sap.vocabularies.UI.v1.Importance"]){t=e["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember;switch(t){case"com.sap.vocabularies.UI.v1.ImportanceType/High":r=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":r=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":r=3;break}}else{r=4}return r}function B(e){if(e.length<2){return e}var t=parseInt(e.length/2,10);var r=e.slice(0,t);var a=e.slice(t,e.length);return k(B(r),B(a))}function k(e,t){var r=[];while(e.length&&t.length){var a=_(e[0]),i=_(t[0]);if(a<=i){r.push(e.shift())}else{r.push(t.shift())}}while(e.length){r.push(e.shift())}while(t.length){r.push(t.shift())}return r}function H(e,t,r){var a=M(e,t)[r];if(a){return W(e,a)}return""}function j(e,t,r){var a=M(e,t)[r];return D(e,a)}function G(e,t,r){var a=R(e,t)[r];if(a&&a.Title){return a.Title.String}return""}function X(e,t,r){var a=t.filter(U);a=B(a);if(!a||!a.length||!a.length>0){return""}return D(e,a[0])}function Y(e,t,r,a){var i=R(e,t)[r];if(!i){return""}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");return Q(e,i,o,u,a)}function z(e,t,r){var a=R(e,t)[r];if(a&&a.Criticality){return true}}function J(e,t,r){var a=R(e,t)[r];var i=a.Criticality.Path;return"{path:'"+i+"'}"}function Q(e,t,r,a,i){if(!t||!t.Value){return""}var n=e.getSetting("ovpCardProperties");var o=false;if(n){var u=n.getProperty("/ignoreSapText");o=u==undefined?o:u}var l=a.getData()["$Annotations"][r.$Type+"/"+t.Value.$Path];var s=false;if(o==true){if(l&&(l["@com.sap.vocabularies.Analytics.v1.Measure"]||l["sap:aggregation-role"]=="measure")){s=true}}if(!s&&l){var f;if(l[C.TEXT]){f=l[C.TEXT]?l[C.TEXT]:l[C.TEXT].$Path}else if(l["sap:text"]){f=l["sap:text"]}if(f){t={Value:{$Path:f}}}}return W(e,t,i)}function W(e,t,r,i){if(t.Value.Apply){return a.format(e,t.Value)}var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");return Z(e,t,o,u,r,i)}W.requiresIContext=true;function K(e,t,r,i){var e=!e.getPath()?e.getInterface(0):e;if(!r||typeof i!=="string"){return i}var n=r["@"+C.TEXT];if(!n){return i}var o,u;o=r["@"+C.TEXT+"@"+C.TEXT_ARRANGEMENT];u=o&&o.$EnumMember;if(!u){o=n&&n["@"+C.TEXT_ARRANGEMENT];u=o&&o.$EnumMember}if(!u){o=t&&t[C.TEXT_ARRANGEMENT];u=o&&o.$EnumMember}var l=a.format(n,{context:e});if(!l||l===" "){return i}if(!u){return i+" ("+l+")"}var s;switch(u){case T.TEXT_FIRST:s=l+" ("+i+")";break;case T.TEXT_LAST:s=i+" ("+l+")";break;case T.TEXT_ONLY:s=l;break;case T.TEXT_SEPARATE:s=i+" ("+l+")";break;default:s=i;break}return s}function Z(e,t,r,i,n,o,u){if(t.Value.Apply){return a.format(e,t.Value)}var l=t.Value.$Path?t.Value.$Path:t.Value.String;var s=te(i,r,t.Value.$Path),f="",c,p;var g=e.getSetting("ovpCardProperties");var v=g&&g.getProperty("/contentFragment");if(!o){if(t.Value.$Path&&t.Value.$Path.split("/").length>1){s=oe(i,r,t.Value.$Path)}if(!s){return""}if(s&&(s.$Type==="Edm.DateTime"||s.$Type==="Edm.DateTimeOffset")){var m={relative:true,relativeScale:"auto"},h=g&&g.getProperty("/showDateInRelativeFormat");if(h!==undefined&&!h){m={style:"medium"}}p={dateFormat:m,bUTC:s.$Type==="Edm.DateTime"?true:false};c="sap.ovp.cards.AnnotationHelper.formatDate";f=re([t.Value.$Path?t.Value.$Path:l.split("/")[l.split("/").length-1]],c,p)}else if(t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits>=0||s["scale"]){var y=t.ValueFormat&&t.ValueFormat.NumberOfFractionalDigits?t.ValueFormat.NumberOfFractionalDigits:0,d;var P=t.ValueFormat&&t.ValueFormat.ScaleFactor&&t.ValueFormat.ScaleFactor.$Decimal;if(s["@"+C.ISO_CURRENCY]){d=s["@"+C.ISO_CURRENCY].$Path?s["@"+C.ISO_CURRENCY].$Path:s["@"+C.ISO_CURRENCY]}else if(s["@"+C.UOM]){d=s["@"+C.UOM].$Path?s["@"+C.UOM].$Path:s["@"+C.UOM]}else if(s["@sap:unit"]){d=s["@sap:unit"]}var T=d?i.getProperty("/"+r.$Type)[d]:null,b=[t.Value.$Path?t.Value.$Path:l.split("/")[l.split("/").length-1]];if(y>2){y=2}p={numberOfFractionalDigits:y,scaleFactor:P};if(s["@"+C.ISO_CURRENCY]){var $=s["@"+C.ISO_CURRENCY];if($.$Path){c="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency";b.push($.$Path)}else if($.String){p.currencyString=$.String;c="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency"}}else if(T&&(T[C.ISO_CURRENCY]||T["sap:semantics"]==="currency-code")){c="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency";b.push(d)}else{c="sap.ovp.cards.v4.V4AnnotationHelper.formatNumberCalculation"}f=re(b,c,p)}else{if(u){f=a.format(t.Value,{context:e})}else{var V=a.format(t.Value,e.getModel()?{context:e}:{context:e.getInterface(0)});var D=V.split(",");var I=[];if(D.length>1){for(var F=0;F<D.length;F++){if(D[F].indexOf("path:")>=0||D[F].indexOf("type:")>=0){I.push(D[F])}}if(I.length>0){f=f+I.join(",");if(f.substring(f.length-1)!=="}"){f=f+"}"}}}else{f=V}}}if(v){f=K(e,r,s,f)}if(s&&s["@"+C.UOM]){var O=s["@"+C.UOM];if(O.$Path){f+=" "+re([O.$Path]);f+=" "+ee(O.$Path,i,r)}else if(O.String){if(O.String!=="%"){f+=" "}f+=O.String}}}if(!n){if(s["@"+C.ISO_CURRENCY]){var $=s["@"+C.ISO_CURRENCY];if($){if($.$Path){f+=" "+re([$.$Path])}else{f+=" "+$}f+=" "+ee($.$Path,i,r)}}}if(f[0]===" "){f=f.substring(1)}f=f.replace("\\","");f=f.replace("\\","");f=f.replace("Unsupported: ","");f=f.replace("$P","p");return f}function ee(e,t,r){if(e){var a,i,n;if(e.split("/").length>1){a=oe(t,r,e);i=ye(t,r,e)}else{a=te(t,r,e)}if(a){n=a["@"+C.TEXT]&&a["@"+C.TEXT].$Path}if(n&&i){n=i+"/"+n}if(n){return" ({"+n+"})"}return""}}function te(e,t,r){var a=e.getData().$Annotations[t.$Type+"/"+r];var i=d.getEntitySetName(e,t.$Type);var n=e.getObject("/"+i+"/"+r);var o=y.merge(true,{},a,n);return o}function re(e,t,r,a){var i="",n=e.length;if(n>1||r){i="{parts:[";for(var o=0;o<n;o++){if(a){i+="{path: '"+e[o]+"',type:'sap.ui.model.odata.type.String'}"+(o===n-1&&!r?"]":", ")}else{i+="{path: '"+e[o]+"'}"+(o===n-1&&!r?"]":", ")}}if(r){var u="{value:"+JSON.stringify(r)+", model: 'ovpCardProperties'}";i+=u+"]"}}else{i="{path: '"+e[0]+"'"}i+=(t?", formatter: '"+t+"'":"")+"}";return i}function ae(){var t=arguments[arguments.length-1],r=arguments[0];var a=e.getFloatInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"){r=e.getFloatInstance().parse(r)}return a.format(Number(r))}function ie(){var e=arguments[arguments.length-1],r=arguments[0];var a=t.getInstance(e.dateFormat);if(!r){r="";return r}return a.format(new Date(r),e.bUTC)}function ne(){var t=arguments[arguments.length-1],r=Number(arguments[0]),a=arguments[1];var i="";var n=e.getCurrencyInstance({style:"short",showMeasure:false,shortRefNumber:t.scaleFactor,minFractionDigits:t.numberOfFractionalDigits,maxFractionDigits:t.numberOfFractionalDigits});if(typeof r=="string"){r=e.getFloatInstance().parse(r)}if(a){i=n.format(r,a)}else{i=t.currencyString?n.format(r,t.currencyString):n.format(r)}return i}function oe(e,t,r){var a=r.split("/");if(a.length>1){for(var i=0;i<a.length-1;i++){t=e.getProperty("/"+t.$Type)[a[i]]}return te(e,t,a[a.length-1])}}function ue(e,t,r){var a=R(e,t);var i=P.StateValues;var n=a[r];if(!n){return i.None}if(n.Criticality){return ce(e,n,i)}return ge(e,n,i)}function le(e,t,r){var a=R(e,t);if(a&&a.length){var i=a[0];if(i&&(i.Criticality||i.CriticalityCalculation)){return true}}return false}function se(e,t,r){if(le(e,t,r)){return""}return"sapUiChartPaletteQualitativeHue1"}se.requiresIContext=true;function fe(e,t,r){var a=R(e,t),i=P.ColorValues;var n=i.None;if(a.length>r){var o=a[r];if(o&&o.Criticality){n=ce(e,o,i)}else{n=ge(e,o,i)}}return n}function ce(e,t,r){var i=r.None;var n;var o=t.Criticality;if(o){n="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+r.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+r.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+r.Positive+"'' : "+"''"+r.None+"'' '}'";if(o.$Path){var u="$"+a.format(o,{context:e});i=s(n,u)}else if(o.$EnumMember){var l="'"+o.$EnumMember+"'";i=s(n,l)}else{$.warning("Case not supported, returning the default Neutral state")}}else{$.warning("Case not supported, returning the default Neutral state")}return i}function pe(e,t,r){var a=R(e,t);var i="None";if(a.length>r){var n=a[r];if(n&&n.Criticality&&n.Criticality.Path){i=J(e,t,r)}else{i=ge(e,n,P.StateValues);i=N(i)}}return i}function ge(e,t,r,a){var i=r.None;if(t.Criticality){i=S(t.Criticality,r)}else if(t.CriticalityCalculation&&t.Value&&t.Value&&t.Value.$Path){i=ve(e,t,r,a)}return i}function ve(e,t,r,a){var i=Ee(t.Value,a);var n=t.CriticalityCalculation.ImprovementDirection.$EnumMember;var o=Ee(t.CriticalityCalculation.DeviationRangeLowValue,a);var u=Ee(t.CriticalityCalculation.DeviationRangeHighValue,a);var l=Ee(t.CriticalityCalculation.ToleranceRangeLowValue,a);var s=Ee(t.CriticalityCalculation.ToleranceRangeHighValue,a);var f=he(o);var c=he(u);var p=he(l);var g=he(s);var v={deviationLow:o,deviationHigh:u,toleranceLow:l,toleranceHigh:s,bIsDeviationLowBinding:f,bIsDeviationHighBinding:c,bIsToleranceLowBinding:p,bIsToleranceHighBinding:g,sImprovementDirection:n,oCriticalityConfigValues:r};var m="{value:"+JSON.stringify(v)+", model: 'ovpCardProperties'}";var h="parts: ["+i;h+=f?","+o:"";h+=c?","+u:"";h+=p?","+l:"";h+=g?","+s:"";h+=","+m;h+="]";var y="sap.ovp.cards.v4.V4AnnotationHelper.formatColor";return"{"+h+", formatter: '"+y+"'}"}function me(){var e=arguments[arguments.length-1];var t=1;return E(arguments[0],e.sImprovementDirection,e.bIsDeviationLowBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationLow,e.bIsDeviationHighBinding?parseFloat(arguments[t++].split(",").join("")):e.deviationHigh,e.bIsToleranceLowBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceLow,e.bIsToleranceHighBinding?parseFloat(arguments[t++].split(",").join("")):e.toleranceHigh,e.oCriticalityConfigValues)}function he(e){return typeof e==="string"&&e.charAt(0)==="{"}function ye(e,t,r){var a="";var i=r.split("/");if(i.length>1){i.pop();a=i.join("/")}return a}function de(e){var t;if(e&&typeof e.getData==="function"){var r=e.getData();if(r.tabs){var a=0;var i=r.selectedKey;if(i&&r.tabs.length>=i){a=i-1}t=r.tabs[a].mFilterPreference}else{t=r.mFilterPreference}}return!!t}function Pe(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/addODataSelect");var i=r.getProperty("/metaModel");var n=i.getData();var o=t;var u,l,s,f;if(r.getProperty("/selectionAnnotationPath")){u="@"+r.getProperty("/selectionAnnotationPath");l=n["$Annotations"][o.$Type][u]}if(r.getProperty("/presentationAnnotationPath")){s=r.getProperty("/presentationAnnotationPath");s="@"+s;f=n["$Annotations"][o.$Type][s]}var c="/"+r.getProperty("/entitySet");var p=Array.prototype.slice.call(arguments,2);var g=e.getSetting("ovpCardProperties"),v=g.getProperty("/parameters");if(l||!!v){if(l&&l.Parameters&&l.Parameters.length>0||!!v){c=St(e.getSetting("dataModel"),t,l,v)}}if(r.getProperty("/cardLayout")&&r.getProperty("/cardLayout/noOfItems")){var m="{path: '"+c+"', length: "+ +r.getProperty("/cardLayout/noOfItems")}else{var m="{path: '"+c+"', length: "+Ae(r)}var h=[];if(a){h=Te(e,i,o,p);var y=r.getProperty("/template");if(y!="sap.ovp.cards.charts.analytical"&&y!="sap.ovp.cards.charts.smart.chart"){var d=Ve(f);for(var P=0;P<d.length;P++){if(h.indexOf(d[P])===-1){h.push(d[P])}}}}var C=Ce(i,o.$Type,p);var T=de(r);if(T||h.length>0||C.length>0){m=m+", parameters: {"}if(h.length>0||C.length>0){if(h.length>0){m=m+"select: '"+h.join(",")+"'"}if(C.length>0){if(h.length>0){m=m+", "}m=m+"$expand: '"+C.join(",")+"'"}if(T){m=m+", "}}if(T){m=m+"custom: {cardId: '"+r.getProperty("/cardId")+"'}"}if(T||h.length>0||C.length>0){m=m+", $count: true}"}else{m=m+", parameters: {$count:true}"}var b=$e(r,f);if(b.length>0){m=m+", sorter:"+JSON.stringify(b)}var $=Oe(r,l);if($.length>0){m=m+", filters:"+JSON.stringify($)}m=m+"}";return m}Pe.requiresIContext=true;function Ce(e,t,r){var a=[];var i,n;for(var o=0;o<r.length;o++){if(!r[o]){continue}i=e.getData()["$Annotations"][t]["@"+r[o]];i=i?i:[];for(var u=0;u<i.length;u++){if(i[u].Value&&i[u].Value.$Path){n=ye(e,t,i[u].Value.$Path);if(n&&a.indexOf(n)===-1){a.push(n)}}}}return a}function Te(e,t,r,i){var n=[];var o,u,l;for(var s=0;s<i.length;s++){if(!i[s]){continue}var c=d.getEntitySetName(t,r.$Type);o=c+"/@"+i[s];u=e.getModel(0);var p={};if(e&&e.bDummyContext){v(p,e,u,true)}else{p=e}l=u.getObject("/"+o);if(!l){l=[]}else if(f(l)){if(l.Data){l=l.Data}else{l=[]}}var g;var m;var h;var y;for(var P=0;P<l.length;P++){m=[];g=l[P];h="";y=g.$Type;if(y==="com.sap.vocabularies.UI.v1.DataField"){h=Z(p.getInterface(0),g,r,t,undefined,undefined,true)}else if(y==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var C=L(r.$path,g);h=Q(p,t.getProperty(C),r,t);var T=q(t.getProperty(C));if(T&&T.length>0){h+=T}}else if(y==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&g.Url){var b;if(!g.Url.UrlRef){b=a.format(p,g.Url)}if(b&&b.substring(0,2)==="{="){h=b}}if(h){var $=a.format(g.Value,{context:p.getInterface(0)});if(h.indexOf("(")<0&&h!==$){h=[].concat($,h).join(" ")}m=be(h)}if(m&&m.length>0){var V;for(var D=0;D<m.length;D++){V=m[D];if(!n[V]){n[V]=true;var I={};I[V]=te(t,r,V);var F=qt(V,I);if(F&&F!==V){n[F]=true}var O=nr(t,r,V);if(O&&O!==V){n[O]=true}}}}}}return Object.keys(n)}function be(e){var t,r=0,a=e.length,i="",n;for(t=0;t<a;t++){n=e.charAt(t);if(!n){return}switch(n){case"{":r++;break;case"}":r--;break;default:if(r<=0){continue}break}i+=n}e=i;var o=/\${([a-zA-Z0-9\_|\/]*)/g;var u=/[^[{]*[a-zA-Z0-9\_]/g;var l=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var s,f,c=[];if(e.indexOf("{parts:[")!==-1){e=e.replace("{parts:[","");e=e.replace("]","");e=e.replace(e.lastIndexOf("}",""))}if(e.substring(0,2)==="{="){s=o;f=1}else if(e.indexOf("path")!==-1){if(e.indexOf("{value")>0){var p=0;var t=e.indexOf("{value")+5;var g;while(t<a){if(e[t]==="}"&&p===0){g=t;break}if(e[t]==="{"){p+=1}if(e[t]==="}"){p-=1}t++}e=e.slice(0,e.indexOf("{value"))+e.slice(g)}var v=u.exec(e);while(v){if(v[0].indexOf("path")===-1&&v[0].indexOf("@i18n")!==0&&v[0].indexOf("model: 'ovpCardProperties'")<=-1){c.push(v[0])}v=u.exec(e)}s=l;f=1}else{s=u;f=0}var m=s.exec(e);while(m){if(m[f]&&m[f].indexOf("@i18n")!==0){c.push(m[f])}m=s.exec(e)}return c}function $e(e,t){var r=[];var a,i;var n=e.getProperty("/sortBy");if(n){var o=e.getProperty("/sortOrder");if(o&&o.toLowerCase()!=="descending"){i=false}else{i=true}a={path:n,descending:i};r.push(a)}var u=t&&t.SortOrder||undefined;var l,n;if(u){for(var s=0;s<u.length;s++){l=u[s];n=l.Property.$PropertyPath;i=Se(l.Descending,true);a={path:n,descending:i};r.push(a)}}return r}function Ve(e){var t=[];var r=e&&e.RequestAtLeast||undefined;if(r){for(var a=0;a<r.length;a++){if(r[a].PropertyPath){t.push(r[a].PropertyPath)}}}return t}function De(e){var t=e.getProperty("/entityType");var r=t[e.getProperty("/selectionAnnotationPath")];return{filters:Oe(e,r),parameters:Fe(r)}}function Ie(e){if(!e){return}var t=e.getProperty("/entityType");var r=t[e.getProperty("/presentationAnnotationPath")];var a=$e(e,r);var i=[];var n,o=a.length;for(n=0;n<o;n++){if(!a[n].path){continue}i.push({Property:a[n].path,Descending:a[n].descending})}if(i.length>0){return{SortOrder:i}}}function Fe(e){var t,r=[];if(!e||!e.Parameters){return r}var a=e.Parameters.length;for(var i=0;i<a;i++){t=e.Parameters[i];if(!t.PropertyName||!t.PropertyName.PropertyPath){continue}if(!t.PropertyValue){$.error("Missing value for parameter "+t.PropertyName.PropertyPath);continue}r[r.length]={path:t.PropertyName.PropertyPath,value:xe(t.PropertyValue)}}return r}function Oe(e,t){var r=[];var a;var n=e.getProperty("/filters");if(n){r=r.concat(n)}if(t&&t.SelectOptions){a=t.SelectOptions}else{a=t}var o,u,l;if(a){for(var s=0;s<a.length;s++){o=a[s];u=o.PropertyName.$PropertyPath;for(var f=0;f<o.Ranges.length;f++){l=o.Ranges[f];if(l.Sign.$EnumMember){var c={path:u,operator:l.Option.$EnumMember.split("/")[1],value1:xe(l.Low),value2:xe(l.High),sign:l.Sign.$EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(c.sign==="E"&&c.operator!==i.EQ){$.error("Exclude sign is supported only with EQ operator");continue}if(c.sign==="E"&&c.operator===i.EQ){c.operator=i.NE;c.sign="I"}if(c.operator==="CP"&&c.sign==="I"){var p=i.Contains;var g=c.value1;if(g){var v=g.indexOf("*");var m=g.lastIndexOf("*");if(v>-1){if(v===0&&m!==g.length-1){p=i.EndsWith;g=g.substring(1,g.length)}else if(v!==0&&m===g.length-1){p=i.StartsWith;g=g.substring(0,g.length-1)}else{g=g.substring(1,g.length-1)}}}c.operator=p;c.value1=g}r.push(c)}}}}return r}function Se(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function Ne(e){var t;if(e){if(e.String){t=Number(e.String)}else if(e.Int){t=Number(e.Int)}else if(e.$Decimal){t=Number(e.$Decimal)}else if(e.Double){t=Number(e.Double)}else if(e.Single){t=Number(e.Single)}else if(typeof e==="number"){return e}}return t}function xe(e){var t;if(e){if(e.String||e.String===""){t=e.String}else if(typeof e=="string"){t=e}else if(e.Boolean||e.Bool){t=Se(e)}else if(e.DateTime){t=e.DateTime}else if(e.DateTimeOffset){t=e.DateTimeOffset}else{t=Ne(e)}}return t}function Ee(e,t){if(e){if(e.$Path){return t?"{path:'"+e.$Path+"Agg"+"', type:'sap.ui.model.odata.type.Decimal'}":"{path:'"+e.$Path+"'}"}else{return xe(e)}}else{return""}}function Ae(e){var t=e.getProperty("/contentFragment");var r=e.getProperty("/listType");var a=e.getProperty("/listFlavor");var i;var o="desktop";if(n.system.phone){o="phone"}else if(n.system.tablet){o="tablet"}if(t=="sap.ovp.cards.list.List"){if(r=="extended"){if(a=="bar"){i=b["List_extended_bar"]}else{i=b["List_extended"]}}else if(a=="bar"){i=b["List_condensed_bar"]}else{i=b["List_condensed"]}}else if(t=="sap.ovp.cards.table.Table"){i=b["Table"]}else if(t=="sap.ovp.cards.stack.Stack"){if(e.getProperty("/objectStreamCardsNavigationProperty")){i=b["Stack_complex"]}else{i=b["Stack_simple"]}}if(i){return i[o]}return 5}function Me(e){var t=e.getObject();var r=R(e,t,true);var a=r.map(function(e){if(e&&e.Value&&e.Value.$Path){return e.Value.$Path}else if(e&&e.fn&&e.fn.$Path){return e.fn.$Path}});t.filter(function(e,r){if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"&&a.indexOf(e.Value.$Path)>-1){t.splice(r,1)}});return e.sPath}Me.requiresIContext=true;function Re(e,t){if(t.charAt(0)==="/"||t.indexOf("http")===0){return t}var r=e.getModel(0).getProperty("/baseUrl");if(r){return r+"/"+t}return t}Re.requiresIContext=true;function Ue(e,t){var r=R(e,t);return r.length}Ue.requiresIContext=true;function we(e,t){return Le(e,t,0)}we.requiresIContext=true;function qe(e,t){return Le(e,t,1)}qe.requiresIContext=true;function Le(e,t,r){var a=R(e,t),i=a[r];if(i&&i.Value&&i.Value.$Path){return i.Value.$Path}return""}function _e(e,t){return j(e,t,0)}_e.requiresIContext=true;function Be(e,t){return j(e,t,1)}Be.requiresIContext=true;function ke(e,t){return j(e,t,2)}ke.requiresIContext=true;function He(e,t){return j(e,t,3)}He.requiresIContext=true;function je(e,t){return j(e,t,4)}je.requiresIContext=true;function Ge(e,t,r){return H(e,t,r)}Ge.requiresIContext=true;function Xe(e,t,r){return Y(e,t,r)}Xe.requiresIContext=true;function Ye(e,t,r,a){var i=Ue(e,t);if(i>0){return Xe(e,t,r)}else{return Ge(e,t,a)}}Ye.requiresIContext=true;function ze(e,t,r){return mt(e,t,r)}ze.requiresIContext=true;function Je(e,t){return G(e,t,0)}Je.requiresIContext=true;function Qe(e,t){return G(e,t,1)}Qe.requiresIContext=true;function We(e,t){return G(e,t,2)}We.requiresIContext=true;function Ke(e,t){return X(e,t,0)}Ke.requiresIContext=true;function Ze(e,t){for(var r=0;r<t.length;r++){var i=t[r];if(i.$Type==="com.sap.vocabularies.UI.v1.DataField"){if(i.IconUrl&&i.IconUrl.String){return i.IconUrl.String}if(i.IconUrl&&i.IconUrl.$Path){return a.format(i.IconUrl,{context:e})}}}}Ze.requiresIContext=true;function et(e,t,r){var a="";var i;if(Array.isArray(t)){i=R(e,t)[r]}else{var n=Object.assign({},t);var o=Object.assign({},e);i=gt(o,n)}if(!i||!i.Value){return a}var u=e.getSetting("ovpCardProperties");var l=u&&u.getProperty("/entityType");var s=u&&u.getProperty("/metaModel");var f=s&&s.getData()["$Annotations"][l.$Type+"/"+i.Value.$Path];var c=f&&f["@"+C.ISO_CURRENCY];if(c){if(c.$Path){a+=" "+re([c.$Path])}else{a+=" "+c}a+=" "+ee(c.$Path,s,l)}return a}et.requiresIContext=true;function tt(e,t,r,a){return Y(e,t,r,a)}tt.requiresIContext=true;function rt(e,t){return ue(e,t,0)}rt.requiresIContext=true;function at(e,t){return fe(e,t,0)}at.requiresIContext=true;function it(e,t){return ue(e,t,1)}it.requiresIContext=true;function nt(e,t){return ue(e,t,2)}nt.requiresIContext=true;function ot(e,t){return pe(e,t,0)}ot.requiresIContext=true;function ut(e){var t={};t.$EnumMember="None";if(Number(e)===1){t.$EnumMember="Negative"}else if(Number(e)===2){t.$EnumMember="Critical"}else if(Number(e)===3){t.$EnumMember="Positive"}return S(t,P.ColorValues)}function lt(e,t){if(t&&t.Criticality&&t.Criticality.$Path){return"{parts: [{path:'"+t.Criticality.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.kpiValueCriticality'}"}else{return ge(e,t,P.ColorValues,true)}}lt.requiresIContext=true;function st(e,t){return z(e,t,0)}st.requiresIContext=true;function ft(e,t){var r=R(e,t)[0];if(r&&(r.Criticality||r.CriticalityCalculation)){return true}return false}ft.requiresIContext=true;function ct(e,t){return z(e,t,1)}ct.requiresIContext=true;function pt(e,t){return z(e,t,2)}pt.requiresIContext=true;function gt(e,t){var r=e.getPath(0);var a=r.slice(0,r.lastIndexOf("/"));a=a.slice(0,a.lastIndexOf("/"));var i=L(a,t);t=e.getModel(0).getProperty(i);return t}function vt(e,t){if(!t){return""}return W(e,t)}vt.requiresIContext=true;function mt(e,t,r,i){var n;var o=i==undefined?r:M(e,r)[i];var u=e.getSetting("ovpCardProperties");var l=u.getProperty("/metaModel");var s=t.$Type;var f=l.getData()["$Annotations"][s+"/"+o.Value.$Path];if(f){n=f["@com.sap.vocabularies.Common.v1.SemanticObject"];if(n){return a.format(n,e.getModel()?{context:e}:{context:e.getInterface(0)})}else{return""}}}function ht(e,t,r){var a=r===undefined?t.Value.$Path:t[r].Value.$Path;var i=a.indexOf("/")!=-1?a.split("/")[0]:"";return i}ht.requiresIContext=true;function yt(e,t){var r=e.getSetting("ovpCardProperties");var a=r.getProperty("/metaModel");var i=a.getData()["$Annotations"][t.$Type];if(i["@com.sap.vocabularies.Communication.v1.Contact"]){return true}return false}yt.requiresIContext=true;function dt(e,t,r){if(!t){return""}var a=e.getSetting("ovpCardProperties");var i=a.getProperty("/entityType");var n=a.getProperty("/metaModel");var o=Object.assign({},t);var u=Object.assign({},e);t=gt(u,o);return Q(e,t,i,n,r)}dt.requiresIContext=true;function Pt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i="None",n=P.StateValues;t=gt(a,r);if(t&&t.Criticality){i=ce(e,t,n)}else{i=ge(e,t,n)}return i}Pt.requiresIContext=true;function Ct(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=gt(a,r);if(t&&t.Criticality){return true}}Ct.requiresIContext=true;function Tt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/entityType");var o=i.getProperty("/metaModel");t=gt(a,r);if(!t){return}var u=o.getProperty("/"+n.$Type)[t.Value.$Path];if(t&&u&&u.$Type=="Edm.String"&&(t.Criticality||t.CriticalityCalculation)){return"Center"}if(u&&(u.$Type=="Edm.DateTime"||u.$Type=="Edm.DateTimeOffset")){return"Right"}}Tt.requiresIContext=true;function bt(e,t){var r=Object.assign({},t);var a=Object.assign({},e);t=gt(a,r);var i="None";if(t&&t.Criticality&&t.Criticality.Path){i="{path:'"+t.Criticality.Path+"'}"}else{i=ge(e,t,P.StateValues);i=N(i)}return i}bt.requiresIContext=true;function $t(e,t){var r;for(var a=0;a<t.length;a++){r=t[a];if(r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1}}return 0}$t.requiresIContext=true;function Vt(e,t){var r=R(e,t)[0];if(r&&r.Value&&r.Value.$Path){var a=e.getPath(0).substr(0,e.getPath(0).lastIndexOf("/")+1);var i=e.getModel(0);var n=i.getData(r.Value.$Path);var o=a.substr(1,a.length-2);if(n&&n[o][r.Value.$Path][C.UOM]){return n[C.UOM].String==="%"}}return false}Vt.requiresIContext=true;function Dt(e){var t=e.getObject();var r=e.getModel();var a=r.getProperty("/metaModel");var i="/"+r.getProperty("/entitySet");var n=a.getObject(i);t="/"+n.$Type+"/@"+t;return a.createBindingContext(t)}function It(e,t){if(e==="Edm.String"){var r=t.PropertyValue.String;return r}return t.PropertyValue.String}function Ft(e,t,r,a){var i="";var n=[];if(a&&a.Parameters){e.parameters.forEach(function(r){a.Parameters.forEach(function(a){var i=a.PropertyName.PropertyPath.split("/");i=i[i.length-1];if(i===r){var o=It(e["parameterType"][r],a);o=g(t.formatValue(o,e["parameterType"][r]));n.push(i+"="+o)}})})}else{i="/"+r.name;$.error("SelectionParameters","There are no parameters to resolve");return i}try{i="/"+e.entitySetName+"("+n.join(",")+")/"+e.navPropertyName}catch(e){i="/"+r.name;$.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return i}function Ot(e,t,r,a,i){var n="";var l=new o.Model(o.Model.ReferenceByModel(e));var s=l.findQueryResultByName(t.name);var f=new o.QueryResultRequest(s);var p=s.getParameterization();if(!p){n="/"+t.name;return n}if(i){var g=i.getAnalyticalParameters()}if(p){var v;f.setParameterizationRequest(new o.ParameterizationRequest(p));if(r&&r.Parameters){c(r.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){v=this.PropertyNameFrom.PropertyPath.split("/");f.getParameterizationRequest().setParameterValue(v[v.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String)}else{v=this.PropertyName.PropertyPath.split("/");f.getParameterizationRequest().setParameterValue(v[v.length-1],this.PropertyValue.String)}})}else if(a){c(a,function(){f.getParameterizationRequest().setParameterValue(this.path,this.value)})}else if(g&&g.length>0){var m=i&&i.getUiState({allFilters:false});var h=m?JSON.stringify(m.getSelectionVariant()):"{}";var r=new u(h);for(var y in p.getAllParameters()){for(var d=0;d<g.length;d++){if(g[d]&&g[d].name==y){var P=g[d].name;var C=r.getParameter(P);if(!C){var T=r.getSelectOption(P);C=T&&T[0]&&T[0].Low}f.getParameterizationRequest().setParameterValue(y,C)}}}}else{n="/"+t.name;$.error("SelectionParameters","There are no parameters to resolve");return n}}try{n=f.getURIToQueryResultEntitySet()}catch(e){s=f.getQueryResult();n="/"+s.getEntitySet().getQName();$.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return n}function St(e,t,r,a,i){var n="";if(p.checkAnalyticalParameterisedEntitySet(e,t.name)){n=Ot(e,t,r,a,i)}else{var o=p.getParametersByEntitySet(e,t.name);var u=p.getPropertyOfEntitySet(e,t.name);var l={};if(o){o["parameters"].forEach(function(e){u.forEach(function(t){if(t["name"]==e){l[e]=t["type"]}})});o["parameterType"]=l;n=Ft(o,e,t,r)}else{n="/"+t.name}}return n}function Nt(e,t,r){var a=e.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<a.length;i++){if(r+"."+a[i].name===t){return a[i]}}}function xt(e,t){var r=e.filter(function(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataField"){return true}return false});var a=B(r);if(a){return a[t]}return}function Et(e,t,r){if(!r||!r.length||r.length===0){return false}r=xt(r,0);return mt(e,t,r)}Et.requiresIContext=true;function At(e,t,r){if(!r||!r.length||r.length===0){return false}r=xt(r,1);return mt(e,t,r)}At.requiresIContext=true;function Mt(e,t){var r=e.filter(function(e){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&e.Target.$AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1){return true}return false});var a=B(r);if(a){return a[t]}return}function Rt(e){if(!e||!e.length||e.length===0){return false}var t=Mt(e,0);if(t){return true}return false}function Ut(e,t,r,a){var i;if(r&&r.Value&&r.Value.$Path){i=r.Value.$Path}else if(r&&r.Description&&r.Description.Value&&r.Description.Value.$Path){i=r.Description.Value.$Path}var n="";var o=a&&a.Parameters;var u="";var l=e.getSetting("ovpCardProperties"),s=l.getProperty("/parameters");o=o||!!s;var f=e.getSetting("dataModel");var c=e.getModel(0);var p=d.getEntitySetName(c,t.$Type);if(o){var g=St(f,t,a,s);n+="{path: '"+g+"'"}else{n+="{path: '/"+p+"'"}n+=", length: 1";var v=e.getSetting("ovpCardProperties");var m=v.getProperty("/entityType");var h=c.getObject("/"+p+"/");var y,P;for(y in h){if(y.startsWith("$")){continue}P=m.$Type.concat("/",y);h[y].annotations=c.getData(y).$Annotations[P]}var C=Oe(v,a);if(C.length>0){u+=", filters: "+JSON.stringify(C)}var T=[];var b=f.oMetaModel.getData().$Annotations;var $=wt(i,b,t.$Type);T.push("'"+i+"Agg' : { 'name' : '"+i+"', 'with' : '"+$+"'}");if(r&&r.Criticality&&r.Criticality.$Path){$=wt(r.Criticality.$Path,b,t.$Type);T.push("'"+r.Criticality.$Path+"Agg' : { 'name' : '"+r.Criticality.$Path+"', 'with' : '"+$+"'}")}if(r&&r.CriticalityCalculation&&r.CriticalityCalculation.DeviationRangeLowValue&&r.CriticalityCalculation.DeviationRangeLowValue.$Path){$=wt(r.CriticalityCalculation.DeviationRangeLowValue.$Path,b,t.$Type);T.push("'"+r.CriticalityCalculation.DeviationRangeLowValue.$Path+"Agg' : { 'name' : '"+r.CriticalityCalculation.DeviationRangeLowValue.$Path+"', 'with' : '"+$+"'}")}if(r&&r.CriticalityCalculation&&r.CriticalityCalculation.ToleranceRangeLowValue&&r.CriticalityCalculation.ToleranceRangeLowValue.$Path){var $=wt(r.CriticalityCalculation.ToleranceRangeLowValue.$Path,b,t.$Type);T.push("'"+r.CriticalityCalculation.ToleranceRangeLowValue.$Path+"Agg' : { 'name' : '"+r.CriticalityCalculation.ToleranceRangeLowValue.$Path+"', 'with' : '"+$+"'}")}if(r&&r.CriticalityCalculation&&r.CriticalityCalculation.DeviationRangeHighValue&&r.CriticalityCalculation.DeviationRangeHighValue.$Path){var $=wt(r.CriticalityCalculation.DeviationRangeHighValue.$Path,b,t.$Type);T.push("'"+r.CriticalityCalculation.DeviationRangeHighValue.$Path+"Agg' : { 'name' : '"+r.CriticalityCalculation.DeviationRangeHighValue.$Path+"', 'with' : '"+$+"'}")}if(r&&r.CriticalityCalculation&&r.CriticalityCalculation.ToleranceRangeHighValue&&r.CriticalityCalculation.ToleranceRangeHighValue.$Path){var $=wt(r.CriticalityCalculation.ToleranceRangeHighValue.$Path,b,t.$Type);T.push("'"+r.CriticalityCalculation.ToleranceRangeHighValue.$Path+"Agg' : { 'name' : '"+r.CriticalityCalculation.ToleranceRangeHighValue.$Path+"', 'with' : '"+$+"'}")}if(r&&r.TrendCalculation&&r.TrendCalculation.ReferenceValue&&r.TrendCalculation.ReferenceValue.$Path){var $=wt(r.TrendCalculation.ReferenceValue.$Path,b,t.$Type);T.push("'"+r.TrendCalculation.ReferenceValue.$Path+"Agg' : { 'name' : '"+r.TrendCalculation.ReferenceValue.$Path+"', 'with' : '"+$+"'}")}var V=de(l);var D=V?", custom: {cardId: '"+l.getProperty("/cardId")+"'}":"";var I="parameters:{'$$aggregation' : {'aggregate' : {"+T.join(",")+"}}"+D+"}";return n+", "+I+u+"}"}Ut.requiresIContext=true;function wt(e,t,r){var a=t[r+"/"+e];if(a["@Org.OData.Aggregation.V1.default"]){return a["@Org.OData.Aggregation.V1.default"].$EnumMember.split("/")[1].toLowerCase()}return"sum"}function qt(e,t,r){var a;var i,n,o;for(o in t){if(o!==e){continue}if(t[o].annotations&&t[o].annotations.hasOwnProperty("@"+C.ISO_CURRENCY)){i=t[o].annotations["@"+C.ISO_CURRENCY].$Path;n=t[o].annotations["@"+C.ISO_CURRENCY].$String;if(i){return i}else{return r?n:""}}if(t[o].annotations&&t[o].annotations.hasOwnProperty("@"+C.UOM)){i=t[o].annotations.hasOwnProperty("@"+C.UOM).$Path;n=t[o].annotations["@"+C.UOM].$String;if(i){a=i}else{a=r?n:""}if(a&&a!="%"){return a}else{return null}}if(t[o].annotations&&t[o].annotations.hasOwnProperty("sap:unit")){return t[o].annotations["sap:unit"]}break}return null}function Lt(e){if(!e||!e.Value||!e.Value.$Path){return""}var t=this.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/metaModel");var i=te(a,r,e.Value.$Path);if(i[C.UOM]){var n=i[C.UOM];if(n.String=="%"){this.getModel("ovpCardProperties").oData.percentageAvailable=true}}if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=e.ValueFormat.NumberOfFractionalDigits}var o={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var u="sap.ovp.cards.v4.V4AnnotationHelper.KpiValueFormatter";var l=[e.Value.$Path+"Agg"];return re(l,u,o,true)}function _t(){var t=arguments[arguments.length-1],r=arguments[0];r=Number(r);var a=e.getFloatInstance({minFractionDigits:t.NumberOfFractionalDigits,maxFractionDigits:t.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:r});if(t.percentageAvailable){return a.format(Number(r))+" %"}else{return a.format(Number(r))}}function Bt(e,t){if(!t||!t.Value||!t.Value.$Path||!t.TrendCalculation){return""}var r=Ee(t.Value,true);var a=Ee(t.TrendCalculation.ReferenceValue,true);var i=Ee(t.TrendCalculation.DownDifference,true);var n=Ee(t.TrendCalculation.UpDifference,true);var o=he(a);var u=he(i);var l=he(n);var s={referenceValue:a,downDifference:i,upDifference:n,bIsRefValBinding:o,bIsDownDiffBinding:u,bIsUpDiffBinding:l};var f="{value:"+JSON.stringify(s)+", model: 'ovpCardProperties'}";var c="parts: ["+r;c+=o?","+a:"";c+=u?","+i:"";c+=l?","+n:"";c+=","+f;c+="]";var p="sap.ovp.cards.v4.V4AnnotationHelper.formatTrendIcon";return"{"+c+", formatter: '"+p+"'}"}Bt.requiresIContext=true;function kt(){var e=arguments[arguments.length-1];var t=1;return A(arguments[0],e.bIsRefValBinding?arguments[t++]:e.referenceValue,e.bIsDownDiffBinding?arguments[t++]:e.downDifference,e.bIsUpDiffBinding?arguments[t++]:e.upDifference)}function Ht(e){if(!e||!e.TrendCalculation||!e.TrendCalculation.ReferenceValue){return""}if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=e.ValueFormat.NumberOfFractionalDigits}if(e.TrendCalculation.ReferenceValue.$Path){return"{parts: [{path:'"+e.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}, {path:'"+e.TrendCalculation.ReferenceValue.$Path+"'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.returnPercentageChange'}"}else{return"{parts: [{path:'"+e.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.returnPercentageChange'}"}}function jt(t,r){var a,i,n,o,u=false;if(typeof t=="string"){t=e.getFloatInstance().parse(t)}if(isNaN(+t)){return""}if(t==0){o=r}else{o=t}i=this.getModel("ovpCardProperties");if(i.getProperty("/iNumberOfFractionalDigits")){n=+i.getProperty("/iNumberOfFractionalDigits")}if(i.getProperty("/bPercentageAvailableForTarget")){u=true}if(r){a=r}else{if(i.getProperty("/sManifestTargetValue")){a=i.getProperty("/sManifestTargetValue")}}if(!n||n<0){n=0}else if(n>2){n=2}if(a){var l=e.getFloatInstance({minFractionDigits:n,maxFractionDigits:n,style:"short",showScale:true,shortRefNumber:o});if(u){return l.format(+a)+" %"}else{return l.format(+a)}}}function Gt(e){if(!e||!e.TrendCalculation||!e.TrendCalculation.ReferenceValue){return""}if(!e||!e.Value||!e.Value.$Path){return""}var t=this.getModel("ovpCardProperties");var r=t.getProperty("/entityType");var a=t.getProperty("/metaModel");if(e&&e.ValueFormat&&e.ValueFormat.NumberOfFractionalDigits){t.setProperty("/iNumberOfFractionalDigits",e.ValueFormat.NumberOfFractionalDigits)}if(e.TrendCalculation.ReferenceValue){if(e.TrendCalculation.ReferenceValue.$Path){var i=te(a,r,e.TrendCalculation.ReferenceValue.$Path);if(i[C.UOM]){var n=i[C.UOM];if(n.String=="%"){t.setProperty("/bPercentageAvailableForTarget",true)}}return"{parts: [{path:'"+e.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'},{path:'"+e.TrendCalculation.ReferenceValue.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.TargetValueFormatter'}"}if(e.TrendCalculation.ReferenceValue){t.setProperty("/sManifestTargetValue",e.TrendCalculation.ReferenceValue);return"{parts: [{path:'"+e.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.TargetValueFormatter'}"}}}function Xt(t,r){var a,i,n;if(typeof t=="string"){t=e.getFloatInstance().parse(t)}if(isNaN(+t)){return""}t=+t;n=this.getModel("ovpCardProperties");if(n.getProperty("/iNumberOfFractionalDigits")){a=+n.getProperty("/iNumberOfFractionalDigits")}if(r){i=+r}else{if(n.getProperty("/sManifestTargetValue")){i=+n.getProperty("/sManifestTargetValue")}}if(!a||a<0){a=0}else if(a>2){a=2}if(i){var o=(t-i)/i;var u=e.getPercentInstance({style:"short",minFractionDigits:a,maxFractionDigits:a,showScale:true});return u.format(o)}}function Yt(e){if(e&&e.GroupBy&&!h(e.GroupBy)&&e.GroupBy[0].hasOwnProperty("$PropertyPath")){return true}else{return false}}function zt(e,t){var r;for(var a=0;e&&a<e.length;a++){if(e[a].value==t){r=e[a];break}}return r?r.name:null}function Jt(e,t){return zt(e,t)}function Qt(e,t){var r=zt(e,t);return r?r:l.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION")}function Wt(e){var t="";var r=e&&e.GroupBy;if(!r){return t}var a=this.getModel("ovpCardProperties").getProperty("/metaModel");var i=this.getModel("ovpCardProperties").getProperty("/entityType");var n;if(e.GroupBy.constructor===Array){n=e.GroupBy}else if(!e.GroupBy.Collection){return t}else{n=e.GroupBy.Collection}var o;c(n,function(){o=ir(a,i,this.$PropertyPath);if(!o){return}t+=o;t+=", "});if(t[t.length-1]===" "&&t[t.length-2]===","){t=t.substring(0,t.length-2)}return t==""?"":l.getText("By",[t])}function Kt(e,t,r){var a=true;var i=r["SelectOptions"].length-1;if(t.PropertyName.PropertyPath===r["SelectOptions"][i].PropertyName.PropertyPath){a=false}t=[t];var n=e.getSetting("ovpCardProperties");var o=n.getProperty("/entityType");var u=n.getProperty("/metaModel");var l=Oe(n,t);if(l.length==0){return""}var s;var f;s=l[0].path;f=nr(u,o,s);if(f!==s){return""}var c=u.getODataProperty(o,t[0].PropertyName.PropertyPath)["type"];var p=rr(l,c);if(a===true){return p+", "}return p}Kt.requiresIContext=true;function Zt(e,t,r){var a=!(t.index===r.length-1);var i=e.getSetting("ovpCardProperties");var n=i.getProperty("/metaModel");var o=i.getProperty("/entityType");var u=n.getODataProperty(o,r[t.index].path)["type"];var l=rr([r[t.index]],u);if(a===true){return l+", "}return l}Zt.requiresIContext=true;function er(e){return e.id}function tr(e){return e.id}function rr(e,t){var r=[];for(var a=0;a<e.length;a++){r.push(ar(e[a],t))}return r.join(", ")}function ar(e,r){var a=false;var i,n=t.getInstance({style:"medium"});if(r==="Edm.DateTime"){i=n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i=n.format(new Date(e.value1),true)}else{i=e.value1}if(e.operator[0]==="N"){a=true}if(e.value2){if(r==="Edm.DateTime"){i+=" - "+n.format(new Date(e.value1))}else if(r==="Edm.DateTimeOffset"){i+=" - "+n.format(new Date(e.value1),true)}else{i+=" - "+e.value1}}if(a){i=l.getText("kpiHeader_Filter_NotOperator",[i])}return i}function ir(e,t,r){return or(e,t,r,"com.sap.vocabularies.Common.v1.Label")}function nr(e,t,r){return or(e,t,r,"sap:text")}function or(e,t,r,a){var i={};i[r]=te(e,t,r);if(!i){$.error("No Property Found for with Name '"+r+" For Entity-Type '"+t.name+"'");return}if(i[r].annotations){var n=i[r].annotations["@"+a]}if(n){return n}return Object.keys(i)[0]}function ur(e){if(!e||!e.Value||!e.Value.$Path){return""}var t={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var r="sap.ovp.cards.v4.V4AnnotationHelper.KpiValueFormatter";var a=[e.Value.$Path];return re(a,r,t)}function lr(e,t){if(t.hasOwnProperty(e)){return true}return false}function sr(e,t){var r;if(t[e].customDateRangeImplementation){return t[e].customDateRangeImplementation}else if(t[e].filter){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:t[e].filter}};return JSON.stringify(r)}else if(t[e].selectedValues){r={module:"sap.ui.comp.config.condition.DateRangeType",operations:{filter:[{path:"key",contains:t[e].selectedValues,exclude:t[e].exclude}]}};return JSON.stringify(r)}else if(t[e].defaultValue){r={module:"sap.ui.comp.config.condition.DateRangeType"};return JSON.stringify(r)}}function fr(e){if(e){return undefined}return"_BASIC"}function cr(e,t){for(var r=0;r<t.length;r++){if(t[r].type.$EnumMember.indexOf("ContactInformationType/work")>=0){var i=a.format(t[r].address,{context:e});return i}}return""}cr.requiresIContext=true;function pr(e,t){for(var r=0;r<t.length;r++){if(t[r].type.$EnumMember.indexOf("PhoneType/work")>=0){var i=a.format(t[r].uri,{context:e});return i}}return""}pr.requiresIContext=true;function gr(e,t){for(var r=0;r<t.length;r++){if(t[r].type.$EnumMember.indexOf("PhoneType/cell")>=0){var i=a.format(t[r].uri,{context:e});return i}}return""}gr.requiresIContext=true;function vr(e,t){for(var r=0;r<t.length;r++){if(t[r].type.$EnumMember.indexOf("PhoneType/fax")>=0){var i=a.format(t[r].uri,{context:e});return i}}return""}vr.requiresIContext=true;return{getGroupID:fr,getConditionTypeForDateProperties:sr,isDateRangeType:lr,criticalityConstants:P,TextArrangementType:T,getLabelForDataItem:D,colorPaletteForComparisonMicroChart:se,formatField:W,checkFilterPreference:de,formatItems:Pe,getCardSelections:De,getCardSorters:Ie,getFilters:Oe,getPrimitiveValue:xe,getAnnotationLabel:Jt,getApplicationName:Qt,removeDuplicateDataField:Me,formatUrl:Re,getDataPointsCount:Ue,getFirstDataPointValue:we,getFirstDataFieldName:_e,getSecondDataFieldName:Be,getRequestFields:Ve,getThirdDataFieldName:ke,formatDataFieldValueOnIndex:Ge,formatDataPointValueOnIndex:Xe,formatDataPointOrField:Ye,formatsemanticObjectOfDataFieldGeneric:ze,getLabelForFirstDataPoint:Ke,formatImageUrl:Ze,formatUnit:et,formatObjectNumber:tt,formatFirstDataPointState:rt,formatFirstDataPointColor:at,formatSecondDataPointState:it,formatThirdDataPointState:nt,formatFirstDataPointStateForSmartField:ot,formatKPIHeaderState:lt,isFirstDataPointCriticality:st,isFirstDataPointCriticalityForTableStatus:ft,getSortedDataFields:M,getSortedDataPoints:R,formatDataFieldValueGeneric:vt,formatDataPointValue:dt,formatDataPointStateGeneric:Pt,checkCriticalityGeneric:Ct,checkCriticalityGenericForTableStatus:Tt,formatDataPointStateForSmartFieldGeneric:bt,hasActions:$t,isFirstDataPointPercentageUnit:Vt,resolveEntityTypePath:Dt,resolveParameterizedEntitySet:St,getAssociationObject:Nt,semanticObjectOfFirstDataField:Et,semanticObjectOfSecondDataField:At,isFirstContactAnnotation:Rt,getAggregateNumber:Ut,KpiValueFormatter:_t,kpiValueCriticality:ut,formThePathForAggregateNumber:Lt,formThePathForTrendIcon:Bt,formPathForPercentageChange:Ht,TargetValueFormatter:jt,formPathForTargetValue:Gt,returnPercentageChange:Xt,isPresentationVarientPresent:Yt,listGroupBy:Wt,formTheFilterByString:Kt,formTheFilterByStringNotFromSelVar:Zt,formTheIdForFilter:er,formTheIdForFilterNotFromSelVar:tr,_criticality2state:S,_calculateCriticalityState:E,_calculateTrendDirection:A,_getPropertiesFromBindingString:be,sortCollectionByImportance:B,checkNavTargetForContactAnno:ht,checkForContactAnnotation:yt,getKPIHeaderAggregateNumber:ur,formatColor:me,formatTrendIcon:kt,formatNumberCalculation:ae,formatCurrency:ne,formatDate:ie,getSapTextPathForUOM:ee,getEmail:cr,getPhone:pr,getDevice:gr,getPhoneType:vr,generatePathForField:re}},true);
sap.ui.predefine("sap/ovp/cards/v4/charts/OVPVizDataHandler", ["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/v4/charts/Utils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge"],function(e,t,a,r,s,n,i){"use strict";return e.extend("sap.ovp.cards.v4.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(e,t){e.openStart("div",t).openEnd();if(t.getContent()){e.renderControl(t.getContent())}e.close("div")},mergeDatasets:function(e,a,r){var o=this;var l=this.getModel();var u=e.mParameters;var p=i([],this.dataSet);if(u){var c=u["$apply"]}var d=e.getPath().substring(1);var g=-1;if(d){g=d.indexOf("Parameters")}if(g>=0){d=d.substr(0,d.indexOf("Parameters"))}var v=l.getMetaModel();var f=this.getEntitySet();var h=v.getData("/")["$Annotations"];var m=[];var y=[];for(var D in h){if(h[D]["@com.sap.vocabularies.Analytics.v1.Measure"]){if(c&&c.includes(D.split("/")[1])){m.push(D.split("/")[1])}}else{if(c&&c.includes(D.split("/")[1])){y.push(D.split("/")[1])}}}if(p){for(var b=0;b<p.length-2;b++){for(var C=0;C<m.length;C++){if(p[0]){p[0][m[C]]=Number(p[0][m[C]])+Number(p[b+1][m[C]])}}}p.__count=p.length;var S=p.__count-p.length;var P={};P.results=[];P.results[0]=p[0];var O;if(p.__count>p.length){var A=i({},this.aggregateSet);if(A&&A.results&&p.results.length<p.__count){n(m,function(e){A.results[0][m[e]]=String(Number(o.aggregateSet.results[0][m[e]])-Number(P.results[0][m[e]]))});n(y,function(e){A.results[0][y[e]]=s.getText("OTHERS_DONUT",[S+1])});A.results[0].$isOthers=true;O=A.results[0];if(O){a.results.splice(-1,1)}}}if(O){a.results.push(O)}var k=r.getModel("ovpCardProperties");var M=k&&k.getProperty("/bEnableStableColors");var T=k&&k.getProperty("/colorPalette");var x=h[f]["@"+(k&&k.getProperty("/chartAnnotationPath"))];if(x.DimensionAttributes.length===1&&M&&r.getVizType()==="donut"&&T&&T instanceof Object&&Object.keys(T).length<=10){var E=x.DimensionAttributes[0].Dimension.$PropertyPath;if(T instanceof Array){var I=T.map(function(e){return e.color});var w=I.slice()}else{var R=JSON.parse(JSON.stringify(T))}var B=r.getVizProperties();if(!B){var N={plotArea:{dataPointStyle:{rules:[]}}};B=N}if(r&&B&&B.plotArea){if(!B.plotArea.dataPointStyle){B.plotArea.dataPointStyle={rules:[]}}else{B.plotArea.dataPointStyle.rules=[]}var V=k.getProperty("/entityType");var _=v.getData()["$Annotations"][V.$Type+"/"+E];if(_){var j=_["@com.sap.vocabularies.Common.v1.Label"]?_["@com.sap.vocabularies.Common.v1.Label"]:E;var $;if(_["@com.sap.vocabularies.Common.v1.Text"]){$=_["@com.sap.vocabularies.Common.v1.Text"]["$Path"]}else if(_["sap:text"]){$=_["sap:text"]}else{$=_}var U=function(e,t,r,s){return{callback:function(e){if(e&&e[j]===r.dimensionValue||r.hasOwnProperty(e[j])){return true}},properties:{color:I&&I[e]||r&&r[s]},displayName:a.results[t][$]}};if(T instanceof Array){n(T,function(e,t){for(var r=0;r<a.results.length;r++){if(a.results[r][E]===t.dimensionValue){var s=U(e,r,t);B.plotArea.dataPointStyle["rules"].push(s);w.splice(e,1)}}})}else{for(var Y=0;Y<a.results.length;Y++){if(T.hasOwnProperty(a.results[Y][E])){var D=a.results[Y][E];var z={};z[D]=T[D];var F=U(b,Y,z,D);B.plotArea.dataPointStyle["rules"].push(F);delete R[D]}}}if(A){B.plotArea.dataPointStyle["rules"].push({callback:function(e){if(e&&e[j].lastIndexOf("Others")!=-1){return true}},properties:{color:w&&w.length?I[I.length-1]:Object.keys(R).length&&R[Object.keys(R)[0]]},displayName:A.results[0][E]})}}}r.setVizProperties(B)}}var H=new t;var J=[];for(var b=0;b<a.results.length;b++){var q={};for(var Y=0;Y<y.length;Y++){q[y[Y]]=a.results[b]&&a.results[b][y[Y]]}for(var L=0;L<m.length;L++){q[m[L]]=a.results[b]&&(a.results[b][m[L]+"Aggregate"]||a.results[b][m[L]])}J.push(q)}H.setData(J);r.setModel(H,"analyticalmodel")},updateBindingContext:function(){var s=this.getBinding("data");var o=this.getBinding("aggregateData");var l=this;if(this.chartBinding==s){return}else{this.chartBinding=s;if(s){var l=this;s.attachEvent("dataReceived",function(e){if(a.checkIfDataExistInEvent(e)){l.dataSet=e&&e.getSource().getCurrentContexts().map(function(e){return e&&e.getObject()});l.oDataClone={results:i([],l.dataSet)};if(l.getChartType()=="donut"&&l.getBinding("aggregateData")!==undefined){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var o=new t;if(l.dataSet){var u=l.getEntitySet().split(".")[l.getEntitySet().split(".").length-1];var p=s.getModel();var c=a.cacheODataMetadata(p);var d=[];var g={};var v=c[u];if(v){var f=Object.keys(v)}if(f&&f.length){n(f,function(e,t){if(v[t].$Type==="Edm.String"){var a=l.getModel().getMetaModel().getObject("/"+l.getEntitySet()+"/"+t+"@");if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d.push(t);g[t]={"sap:semantics":"yearmonth"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d.push(t);g[t]={"sap:semantics":"yearquarter"}}else if(a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d.push(t);g[t]={"sap:semantics":"yearweek"}}else if(a["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){d.push(t);g[t]={"sap:semantics":"fiscalyearperiod"}}}})}if(d&&d.length){if(l.dataSet&&l.dataSet.length){n(l.dataSet,function(e,t){n(d,function(e,a){if(t&&t.hasOwnProperty(a)){var s=t[a];var n,i,o,l,u,p,c;switch(g[a]["sap:semantics"]){case"yearmonth":n=parseInt(s.substr(0,4),10);i=s.substr(4);u=parseInt(i,10)-1;t[a]=new Date(Date.UTC(n,u));break;case"yearquarter":n=parseInt(s.substr(0,4),10);o=s.substr(4);l=parseInt(o,10)*3-2;u=l-1;t[a]=new Date(Date.UTC(n,u));break;case"yearweek":n=parseInt(s.substr(0,4),10);p=s.substr(4);var c=1+(parseInt(p,10)-1)*7;t[a]=new Date(Date.UTC(n,0,c));break;case"fiscalyearperiod":var d="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod";var v=r.getFormattedFiscalData(s,d);t[a]=v;break;default:break}}})})}}o.setData(l.dataSet);l.oDataClone={results:i([],l.dataSet)}}l.getContent().setModel(o,"analyticalmodel");l.mergeDatasets(s,l.oDataClone,l.getContent())}}})}e.prototype.updateBindingContext.apply(this,arguments)}if(this.chartAggrBinding==o){return}else{this.chartAggrBinding=o;if(o){var l=this;o.attachEvent("dataReceived",function(e){l.aggregateSet=e&&e.getParameter("data");if(l.getChartType()=="donut"){if(l.getDependentDataReceived()===true||l.getDependentDataReceived()==="true"){l.oDataClone=i({},l.dataSet);l.mergeDatasets(s,l.oDataClone,l.getContent());l.setDependentDataReceived(false)}else{l.setDependentDataReceived(true)}}else{var a=new t;a.setData(l.aggregateSet.results);l.getContent().setModel(a,"analyticalmodel")}})}e.prototype.updateBindingContext.apply(this,arguments)}}})});
sap.ui.predefine("sap/ovp/cards/v4/charts/Utils", ["sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/v4/charts/config"],function(e,t,r,n){"use strict";var i={};var a={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:'Analytic cards require valid "chartAnnotationPath" '+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var o={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var u=new r("OVP.v4.charts.Utils");function s(e,t){if(!t){return""}var r=e.getSetting("ovpCardProperties");if(!r){return""}var n=r.oData;if(!n){return""}var i=n&&n[t]?n[t]:"";return i===""?"":i.split("#")[1]}i.getAllColumnTexts=function(e){return l("sap:text",e)};i.formDimensionPath=function(e){var t="{"+e+"}";var r=this.getModel("ovpCardProperties").getProperty("/entityType");if(!r){return t}var n=g(r);if(!n||!n[e]){return t}var a=n[e];if(a=="Edm.DateTime"){return"{path:'"+e+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}"}var o=i.getAllColumnTexts(r);if(!o){return t}t="{"+(o[e]||e)+"}";return t};function l(e,t){var r={};var n=t.property;for(var i=0,a=n.length;i<a;i++){if(n[i].hasOwnProperty(e)&&e=="com.sap.vocabularies.Common.v1.Label"){r[n[i].name]=n[i][e].String}else if(n[i].hasOwnProperty(e)){r[n[i].name]=n[i][e]}else{r[n[i].name]=n[i].name}}return r}function f(e){return l("com.sap.vocabularies.Common.v1.Label",e)}function g(e){return l("type",e)}var c={};i.LineChart=function(){function t(t,i,a){var o=r(t,a).split(",");var u=n(t,i).split(",");var s=[];e(o,function(e,t){s.push(t)});var l=[];e(u,function(e,t){l.push(t)});var f=true;var g=t.getSetting("ovpCardProperties").getProperty("/navigation");if(g=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+s.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+l.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+f+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];e(r,function(e,t){a.push(i[t.Measure.PropertyPath]||t.Measure.PropertyPath)});return a.join(",")}r.requiresIContext=true;function n(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var o=[];var u;var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){l=i[t.Dimension.PropertyPath];o.push(l?l:t.Dimension.PropertyPath)}});if(o.length<1){l=i[r[0].Dimension.PropertyPath];o.push(l?l:r[0].Dimension.PropertyPath)}u=s(t,a.CHART_QUALIFIER_KEY);c[u]=o;return o.join(",")}n.requiresIContext=true;function i(t,r){var n=[];var i;var o=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!o){return""}var u=f(o);var l;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){l=u[t.Dimension.PropertyPath];n.push(l?l:t.Dimension.PropertyPath)}});i=s(t,a.CHART_QUALIFIER_KEY);n=n.filter(function(e){if(!c[i]){return true}return e!==c[i][0]});return n.join(",")}i.requiresIContext=true;function o(e,t){return i(e,t)!==""}o.requiresIContext=true;return{getVizProperties:t,getValueAxisFeed:r,getCategoryAxisFeed:n,getColorFeed:i,testColorFeed:o}}();i.BubbleChart=function(){function t(t,r,a){var o=n(t,a).split(",");var u=i(t,a).split(",");var s=[];e(o,function(e,t){s.push(t)});var l=[];e(u,function(e,t){l.push(t)});var f=true;var g=t.getSetting("ovpCardProperties").getProperty("/navigation");if(g=="chartNav"){f=false}var f=f?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+s.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+l.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+f+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }"}t.requiresIContext=true;function r(t,r){var n;if(!t||!t.getSetting||!(n=t.getSetting("ovpCardProperties"))){return[""]}var i=n.getProperty("/entityType");if(!i){return[""]}var a=f(i);var o=[null,null,null];var u=["Axis1","Axis2","Axis3"];e(r,function(e,t){if(u.indexOf(t.Role.EnumMember.split("/")[1])>-1){if(o[0]===null){o[0]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[1]===null){o[1]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}else if(o[2]==null){o[2]=a[t.Measure.PropertyPath]||t.Measure.PropertyPath}}});return o}r.requiresIContext=true;function n(e,t){return r(e,t)[0]}n.requiresIContext=true;function i(e,t){return r(e,t)[1]}i.requiresIContext=true;function a(e,t){return r(e,t)[2]}a.requiresIContext=true;function o(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Series"){o=i[t.Dimension.PropertyPath];a.push(o?o:t.Dimension.PropertyPath)}});return a.join(",")}o.requiresIContext=true;function u(t,r){var n=t.getSetting("ovpCardProperties").getProperty("/entityType");if(!n){return""}var i=f(n);var a=[];var o;e(r,function(e,t){if(t.Role.EnumMember.split("/")[1]==="Category"){o=i[t.Dimension.PropertyPath];a.push(o?o:t.Dimension.PropertyPath)}});return a.join(",")}u.requiresIContext=true;function s(e,t){return o(e,t)!==""}s.requiresIContext=true;function l(e,t){return u(e,t)!==""}l.requiresIContext=true;return{getVizProperties:t,getMeasurePriorityList:r,getValueAxisFeed:n,getValueAxis2Feed:i,getBubbleWidthFeed:a,getColorFeed:o,getShapeFeed:u,testColorFeed:s,testShapeFeed:l}}();i.validateMeasuresDimensions=function(e,t){var r=null;var n=null;if(!e.getDataset()){u.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false}r=e.getDataset().getMeasures();n=e.getDataset().getDimensions();switch(t){case"Bubble":if(r.length!==3||n.length<1||!r[0].getName()||!r[1].getName()||!r[2].getName()||!n[0].getName()){u.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false}break;case"Donut":if(r.length!==1||n.length!==1||!r[0].getName()||!n[0].getName()){u.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false}break;case"Line":if(r.length<1||n.length<1||!r[0].getName()||!n[0].getName()){u.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false}break}return true};i.getSortAnnotationCollection=function(e,t,r){if(t&&t.SortOrder&&t.SortOrder.Path&&t.SortOrder.Path.indexOf("@")>=0){var n=t.SortOrder.Path.split("@")[1];var i=e.getServiceAnnotations()[r.entityType];return i[n]}return t.SortOrder};i.oFullConfig=null;i.getConfig=function(e){if(!this.oFullConfig){try{this.oFullConfig=t({},n.getChartsConfiguration())}catch(e){u.error(o.CONFIG_LOAD_ERROR+e)}}if(!e){return this.oFullConfig}var r;try{r=e.$EnumMember.split("/")[1]}catch(e){u.error(o.CARD_ERROR+o.INVALID_CHARTTYPE+o.ANNO_REF);return{}}if(!this.oFullConfig[r]){u.error(o.INVALID_CONFIG+r+" "+o.CONFIG_JSON);return{}}var i;if((i=this.oFullConfig[r].reference)&&this.oFullConfig[i]){var a=t({},this.oFullConfig[i]);this.oFullConfig[r]=a}return this.oFullConfig[r]};i.oCachedMetaModel={};i.cacheODataMetadata=function(t){if(!t){u.error(o.CARD_ERROR+o.CACHING_ERROR);return}var r=this.oCachedMetaModel[t.getId()];if(!r){r={};var n=t.getMetaModel();var i=n&&n.getObject("/");var a,s;e(i,function(t,i){if(t!="$kind"){a=n.getObject("/"+i.$Type);s={};e(a,function(e,t){if(t.$kind&&t.$kind=="Property"){s[e]=t}});r[t]=s}});this.oCachedMetaModel[t.getId()]=r}return r};i.checkIfDataExistInEvent=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){var t=e.getSource().getCurrentContexts().some(function(e){return typeof e==="undefined"});return!t}return false};i.isDataSetEmpty=function(e){if(e&&e.getSource()&&e.getSource().getCurrentContexts()){return e.getSource().getCurrentContexts().length===0}};return i},true);
sap.ui.predefine("sap/ovp/cards/v4/charts/VizAnnotationManager", ["sap/ui/thirdparty/jquery","sap/ovp/cards/v4/charts/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/helpers/V4/MetadataAnalyzer"],function(jQuery,e,t,a,r,i,n,o,s,l,u,f,c,v,p,g,m,A,d,h,P){"use strict";var E={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"$Type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut",V4_ANNOTATION:"annotations"};var y={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var _=["year","yearweek","yearmonth","yearquarter"];var C=[E.COLUMNSTACKED_CHARTTYPE,E.DONUT_CHARTTYPE,E.COLUMN_CHARTTYPE,E.BAR_CHARTTYPE,E.VERTICALBULLET_CHARTTYPE,E.LINE_CHARTTYPE,E.COMBINATION_CHARTTYPE,E.BUBBLE_CHARTTYPE];var T=[E.COLUMNSTACKED_CHARTTYPE];var N;var I=new d("OVP.charts.VizAnnotationManager");function R(e,t,a){var r=e.getMetaModel().getObject("/"+t+"/"+a+"@");return r["@com.sap.vocabularies.Common.v1.IsCalendarYear"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]}function D(t,r,i,n,o,s,l){var u="{";if(!t||!t.getSetting("ovpCardProperties")){I.error(y.ANALYTICAL_CONFIG_ERROR);u+="}";return u}var f=t.getSetting("dataModel");var c;if(l&&l.$EnumMember){c=l.$EnumMember.split("/");if(c&&c[1]!="Donut"&&o===undefined){return null}}var v=[];var p=[];var g=[];var d=[];var h=[];var _=[];var C=[];var T=[];var N=i&&i.Parameters;var R=n&&n.SortOrder;var D=n&&n.MaxItems,M=null;var V;var L;var Y;var x=null;var $=E.TEXT_KEY;var U=E.TEXT_KEY_V4;var F=E.UNIT_KEY;var K="@"+E.UNIT_KEY_V4_ISOCurrency;var w="@"+E.UNIT_KEY_V4_Unit;var H={};if(typeof D==="number"||typeof D==="string"&&!isNaN(D)){M=parseInt(D,10)}if(M){if(M==="0"){I.error("OVP-AC: Analytic card Error: maxItems is configured as "+M);u+="}";return u}if(!/^\d+$/.test(M)){I.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");u+="}";return u}}var G=t.getSetting("ovpCardProperties"),z=G.getProperty("/parameters");var j=G.getProperty("/metaModel");var W=G.getProperty("/measureAggregate");var X=P.getEntitySetName(j,r.$Type);N=N||!!z;if(N){var q=a.resolveParameterizedEntitySet(f,r,i,z);u+="path: '"+q+"'"}else{u+="path: '/"+X+"'"}var Q=[];x=t.getSetting("ovpCardProperties").getProperty("/entitySet");if(!f||!x){return u}var Z=ue(f,x);ye(f,Z,r.$Type);var J=t.getSetting("ovpCardProperties").getProperty("/cardLayout");var ee=1,te;var ae=B();var re;var ie;if(o&&J&&J.colSpan&&J.colSpan>1){te=J.colSpan-ee;for(var ne in ae){if((ie=ae[ne].reference)&&ae[ie]){var oe=A({},ae[ie]);ae[ne]=oe}if(ne===c[1]||ae[ne].time&&ae[ne].time.type===c[1].toLowerCase()){re=ae[ne];break}}var se=k(o,re,f,x);if(se){re=re.time}else{re=re.default}var le=t.getSetting("ovpCardProperties").getProperty("/dataStep");if(!le){if(re.resize&&re.resize.hasOwnProperty("dataStep")&&!isNaN(re.resize.dataStep)){le=re.resize.dataStep}}le=parseInt(le,10);if(te>0&&le&&!isNaN(le)){M=parseInt(M,10)+le*te}}if(i){var G=t.getSetting("ovpCardProperties");Q=a.getFilters(G,i)}if(Q.length>0){u+=", filters: "+JSON.stringify(Q)}var fe=j.getObject("/"+r.$Type+"/@");m(s,function(e,t){V=t.Measure.$PropertyPath;if(t.DataPoint&&t.DataPoint.$AnnotationPath){var a=fe[t.DataPoint.$AnnotationPath];if(a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){var r=a.ForecastValue.PropertyPath||a.ForecastValue.Path;h.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path);if(Z&&Z[r]){var i;if(Z[r].annotations&&Z[r].annotations[K]){i=Z[r].annotations[K].$Path?Z[r].annotations[K].$Path:undefined}else if(Z[r].annotations&&Z[r].annotations[w]){i=Z[r].annotations[w].$Path?Z[r].annotations[w].$Path:undefined}else if(Z[r][F]){i=Z[r][F]}if(i){if((_?Array.prototype.indexOf.call(_,i):-1)===-1){_.push(i)}}}}if(a.TargetValue&&(a.TargetValue.PropertyPath||a.TargetValue.Path)){var n=a.TargetValue.PropertyPath||a.TargetValue.Path;h.push(a.TargetValue.PropertyPath||a.TargetValue.Path);if(Z&&Z[n]){var i;if(Z[n].annotations&&Z[n].annotations[K]){i=Z[n].annotations[K].$Path?Z[n].annotations[K].$Path:undefined}else if(Z[n].annotations&&Z[n].annotations[w]){i=Z[n].annotations[w].$Path?Z[n].annotations[w].$Path:undefined}else if(Z[n][F]){i=Z[n][F]}if(i){if((_?Array.prototype.indexOf.call(_,i):-1)===-1){_.push(i)}}}}}h.push(V);if(Z&&Z[V]){if(Z[V][U]){if(Z[V][U].String&&V!=Z[V][U].String){h.push(Z[V][U].String?Z[V][U].String:V)}else if(Z[V][U].Path&&V!=Z[V][U].Path){h.push(Z[V][U].Path?Z[V][U].Path:V)}}else if(Z[V][$]&&V!=Z[V][$]){h.push(Z[V][$]?Z[V][$]:V)}}if(Z&&Z[V]){var i;if(Z[V].annotations&&Z[V].annotations[K]){i=Z[V].annotations[K].$Path?Z[V].annotations[K].$Path:undefined}else if(Z[V].annotations&&Z[V].annotations[w]){i=Z[V].annotations[w].$Path?Z[V].annotations[w].$Path:undefined}else if(Z[V][F]){i=Z[V][F]}if(i){if((_?Array.prototype.indexOf.call(_,i):-1)===-1){_.push(i)}}}});m(o,function(e,t){V=t.Dimension.$PropertyPath;v.push(V);if(Z&&Z[V]){if(Z[V]["annotations"]&&Z[V]["annotations"]["@"+U]){if(typeof Z[V]["annotations"]["@"+U]==="string"&&Z[V]["annotations"]["@"+U]&&V!=Z[V]["annotations"]["@"+U]){v.push(Z[V]["annotations"]["@"+U])}else if(Z[V]["annotations"]["@"+U].$Path&&V!=Z[V]["annotations"]["@"+U].$Path){Y=Z[V]["annotations"]["@"+U].$Path;var a=Y.split("/");if(a.length>1){L=O(j,fe,Y);if(L!==""){v.push(Y);p.push(L);d=S(j,fe,Y);if(d.length>0){g=g.concat(d)}}}else{v.push(Y?Y:V)}}}else if(Z[V][$]&&V!=Z[V][$]){v.push(Z[V][$]?Z[V][$]:V)}}});if(g.length>0){var ce=0;while(ce<g.length){if(v.indexOf(g[ce])!==-1){g.splice(ce,1)}else{ce++}}}if(h.length>0){m(h,function(e,t){t+="Aggregate";H[t]=true})}if(v.length>0){m(v,function(e,t){H[t]=true})}if(R){var ve=n.SortOrder;if(!ve.length){ve=e.getSortAnnotationCollection(f,n,r)}if(ve.length<1){I.warning(y.CARD_WARNING+y.SORTORDER_WARNING)}else{var pe="";var ge;var me;var Ae;for(var de=0;de<ve.length;de++){ge=ve[de];Ae=ge.Property.$PropertyPath;if(h.includes(Ae)){Ae+="Aggregate"}T.push(Ae);if(typeof ge.Descending==="undefined"){me="true"}else{var he=ge.Descending.Bool||ge.Descending.Boolean;if(!he){I.warning(y.CARD_WARNING+y.BOOLEAN_ERROR);me="true"}else{me=he.toLowerCase()==="true"?"true":"false"}}pe=pe+"{path: '"+Ae+"',descending: "+me+"},"}u+=", sorter: ["+pe.substring(0,pe.length-1)+"]"}}var Pe=b(_,v);if(T.length>0){m(T,function(e,t){if(!H.hasOwnProperty(t)){Pe.push(t)}})}u+=", parameters: {$apply:'groupby(("+Pe.join(",")+"),";u+="aggregate(";var Ee=[];h.forEach(function(e,t){var a=W&&W["Axis"+(t+1)];var r=a?a:"sum";var i=[e," with ",r," as ",e,"Aggregate"].join("");Ee.push(i)});u+=Ee.join(",");u+="))";var _e=j.getObject("/"+r.$Type);if(_e){var Ce=a.getRequestFields(n);if(Ce&&Ce.length>0){m(Ce,function(e,t){if(!H.hasOwnProperty(t)){H[t]=true;C.push(t)}});if(C.length>0){u+=","+C.join(",")}}}if(p.length>0){u+="'"+","+" expand:'"+p.join(",")}var Te=a.checkFilterPreference(t.getSetting("ovpCardProperties"));if(Te){u+="', custom: {cardId: '"+t.getSetting("ovpCardProperties").getProperty("/cardId")+"'}}"}else{u+="'}"}if(c&&c[1]==="Donut"&&o===undefined){u+=", length: 1"}else if(c&&c[1]==="Donut"&&o&&M){u+=", length: "+(parseInt(M,10)+1)}else if(M){u+=", length: "+M}u+="}";return u}D.requiresIContext=true;function O(e,t,a){var r="";var i=a.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(r){r=r+"/"}r=r+i[n]}else{return r}}}return r}function b(e,t){var a=e.length>0?t.concat(e):t;return a.filter(function(e,t){return a.indexOf(e)===t})}function S(e,t,a){var r=[];var i=[];var n;var o=a.split("/");if(o.length>1){for(var s=0;s<o.length-1;s++){var l=e.getODataAssociationEnd(t,o[s]);if(l){t=e.getODataEntityType(l.type);if(t){i=t&&t.key&&t.key.propertyRef;for(var u=0;u<i.length;u++){n=o[s]+"/"+i[u].name;r.push(n)}}}}}return r}function M(e,t){var a=false;var r;if(e.DataPoint&&e.DataPoint.$AnnotationPath){var i=t[e.DataPoint.$AnnotationPath];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){a=true;r=e}}if(a===true){return r}else{I.warning(y.CARD_WARNING+y.INVALID_FORECAST);return undefined}}function V(e,t){var a=false;var r;if(e.DataPoint&&e.DataPoint.$AnnotationPath){var i=t[e.DataPoint.$AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){a=true;r=e}}if(a===true){return r}else{I.warning(y.CARD_WARNING+y.INVALID_TARGET);return undefined}}function L(e,t){var a;m(t,function(t,r){if(r.name===e){if(r["com.sap.vocabularies.Common.v1.Label"]){a=r["com.sap.vocabularies.Common.v1.Label"].String?r["com.sap.vocabularies.Common.v1.Label"].String:r["com.sap.vocabularies.Common.v1.Label"].Path}else if(r["sap:label"]){a=r["sap:label"]}return false}});return a}function Y(e,t){var a=true;if(t==="line"||t==="column"||t==="bar"){m(e,function(e,t){if(t.getUid()==="valueAxis"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){a=false;I.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false}}})}else if(t==="vertical_bullet"){m(e,function(e,t){if(t.getUid()==="actualValues"||t.getUid()==="categoryAxis"){if(t.getValues().length!=1){a=false;I.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false}}})}if(a===true){return true}}function x(e,t,a){var r=E.TYPE_KEY;if(!e||!e[t]||!e[t][r]){return a}var i=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var n=e[t][r];if((i?Array.prototype.indexOf.call(i,n):-1)!==-1){return Number(a)}return a}function $(e){if(e){return e}return""}function U(e,t){var a=e.getModel();var r=e.getVizType();if(r!="line"&&r!="bubble"){return}if(!t){t=r==="line"?"categoryAxis":"valueAxis"}var i=e.getModel("ovpCardProperties").getProperty("/entitySet");if(!a||!i){return}var n=ue(a,i);var o=e.getFeeds();for(var s=0;s<o.length;s++){if(o[s].getUid()===t){var l=o[s].getValues();if(!l){return}for(var u=0;u<l.length;u++){if(n[l[u][E.TYPE_KEY]]!="Edm.DateTime"){return}}e.setVizProperties({categoryAxis:{title:{visible:false}}});return}}}function F(e,t,a,r,i,n){r=typeof r==="undefined"?false:r;var o=false;var s;if(!e&&r){I.error(i+y.CARD_ERROR+a+y.IS_MANDATORY);return o}if(!e){I.warning(i+y.CARD_WARNING+a+y.IS_MISSING);o=true;return o}s=t["@"+e];if(!s||typeof s!=="object"){var l=r?I.error:I.warning;l(i+y.CARD_ERROR+"in "+a+". (@"+e+" "+y.NOT_WELL_FORMED);return o}if(n&&n==="sap.ovp.cards.v4.charts.analytical.analyticalChart"&&a==="Chart Annotation"&&(!s.ChartType||!s.ChartType.$EnumMember)){I.error(i+y.CARD_ERROR+y.MISSING_CHARTTYPE+y.CHART_ANNO);return o}o=true;return o}function K(e){var t=false;if(!e){return t}var a;var r;var i;var n;var o;var s;var l;var u="";var f;var c=e.getView();if(c){u="["+c.getId()+"] "}if(!(f=e.getCardPropertiesModel())){I.error(u+y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return t}l=f.getProperty("/entityType");var v=e.getMetaModel();var p=v.getData().$Annotations[l.$Type];if(!l||h(l)){I.error(u+y.CARD_ERROR+"in "+y.CARD_ANNO);return t}a=f.getProperty("/selectionAnnotationPath");r=f.getProperty("/chartAnnotationPath");n=f.getProperty("/presentationAnnotationPath");o=f.getProperty("/identificationAnnotationPath");s=f.getProperty("/dataPointAnnotationPath");i=f.getProperty("/contentFragment");t=F(a,p,"Selection Variant",false,u);t=F(r,p,"Chart Annotation",true,u,i)&&t;t=F(n,p,"Presentation Variant",false,u)&&t;t=F(o,p,"Identification Annotation",true,u)&&t;t=F(s,p,"Data Point",false,u)&&t;return t}function w(e,t,a){}function B(t){return e.getConfig(t)}function k(e,t,a,r){var i=false;var n;var o;var s;var l;var u;var f;if(!t.time||h(t.time)){return i}if(!e){return i}for(var c=0;c<e.length;c++){if(!e[c].Dimension||!(o=e[c].Dimension.$PropertyPath)){return i}n=ue(a,r);if(n&&n[o]){s=n[o][E.TYPE_KEY];l=n[o][E.DISPLAY_FORMAT_KEY];u=n[o][E.SEMANTICS_KEY];f=R(a,r,o)}if(s&&s.lastIndexOf("Edm.Date",0)===0){if(s.toLowerCase()==="edm.datetime"){if(l&&l.toLowerCase()==="date"){i=true}}else{i=true}}if(s==="Edm.String"&&(f||u&&_.indexOf(u)>-1)){i=true}if(i){e.unshift(e.splice(c,1)[0]);break}}return i}function H(e,t,a){var r="";var i=B(t);var n,o;if(!i){return r}r=i.default.type;n=e.getSetting("dataModel");o=e.getSetting("ovpCardProperties").getProperty("/entitySet");if(k(a,i,n,o)){r=i.time.type}return r}H.requiresIContext=true;function G(e,t,a){if(!e.length){return}var r=a==="dimension"?"Dimension":"Measure";var i=[];m(e,function(e,t){if(!t||!t[r]||!t[r].PropertyPath){I.error(y.INVALID_CHART_ANNO);return false}i.push(t[r].PropertyPath)});var n=jQuery.map(t.feeds,function(e){if(e.type===a){if(e.role){return e.role.split("|")}return[]}});n=jQuery.grep(n,function(e,t){return(n?Array.prototype.indexOf.call(n,e):-1)===t}).join(", ");I.error(y.CARD_ERROR+y.INVALID_REDUNDANT+a+"(s) "+i.join(", ")+". "+y.ALLOWED_ROLES+t.type+y.CHART_IS+n)}function z(e,t){var a;if(e){if(e.String){a=e.String}else if(e.Boolean||e.Bool){a=j(e)}else{a=W(e,t)}}return a}function j(e,t){if(e&&e.Boolean){if(e.Boolean.toLowerCase()==="true"){return true}else if(e.Boolean.toLowerCase()==="false"){return false}}else if(e&&e.Bool){if(e.Bool.toLowerCase()==="true"){return true}else if(e.Bool.toLowerCase()==="false"){return false}}return t}function W(e,t){var a;if(e){if(e.String){a=Number(e.String)}else if(e.Int){a=Number(e.Int)}else if(e.Decimal){a=Number(e.Decimal)}else if(e.Double){a=Number(e.Double)}else if(e.Single){a=Number(e.Single)}}if(t){var i=r.getFloatInstance({style:"short",minFractionDigits:2,maxFractionDigits:2});if(a){a=i.format(Number(a))}}return a}function X(e,t){function r(e){if(e){if(e.Path){return"{path:'"+e.Path+"'}"}else{return z(e)}}else{return""}}var i=e[e.measureNames];if(t&&t.CriticalityCalculation&&t.CriticalityCalculation.ImprovementDirection){var n=t.CriticalityCalculation.ImprovementDirection.EnumMember;var o=r(t.CriticalityCalculation.DeviationRangeLowValue);var s=r(t.CriticalityCalculation.DeviationRangeHighValue);var l=r(t.CriticalityCalculation.ToleranceRangeLowValue);var u=r(t.CriticalityCalculation.ToleranceRangeHighValue);return a._calculateCriticalityState(i,n,o,s,l,u,a.criticalityConstants.StateValues)}else{var f=t.Criticality.EnumMember;var c=f?f.split("/"):[];if(c){return c[1]}}}function q(e,t,a){var r,i;m(t,function(t,a){if(a["com.sap.vocabularies.Common.v1.Label"]&&a["com.sap.vocabularies.Common.v1.Label"].String===e.measureNames){r=a.name;return false}else if(a["com.sap.vocabularies.Common.v1.Label"]&&a["com.sap.vocabularies.Common.v1.Label"].Path===e.measureNames){r=a.name;return false}else if(a["sap:label"]===e.measureNames){r=a.name;return false}});m(a,function(e,t){if(t.Measure.PropertyPath===r){if(!t.DataPoint||!t.DataPoint.$AnnotationPath){return false}i=t.DataPoint.$AnnotationPath;return false}});return i}function Q(e,t){if(e){if(e.Path){return e.Path}else{return z(e,t)}}else{return""}}function Z(e,t){function a(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var r=false;m(e,function(e,i){if(i.DataPoint&&i.DataPoint.$AnnotationPath){var n=t[i.DataPoint.$AnnotationPath.substring(1)];if(n&&n.CriticalityCalculation&&n.CriticalityCalculation.ImprovementDirection&&n.CriticalityCalculation.ImprovementDirection.EnumMember){var o=n.CriticalityCalculation.ImprovementDirection.EnumMember;var s=Q(n.CriticalityCalculation.DeviationRangeLowValue);var l=Q(n.CriticalityCalculation.DeviationRangeHighValue);var u=Q(n.CriticalityCalculation.ToleranceRangeLowValue);var f=Q(n.CriticalityCalculation.ToleranceRangeHighValue);if(a(o,"Minimize")||a(o,"Minimizing")){if(f&&l){r=true;return false}else{I.warning(y.CARD_WARNING+y.INVALID_CRITICALITY)}}else if(a(o,"Maximize")||a(o,"Maximizing")){if(u&&s){r=true;return false}else{I.warning(y.CARD_WARNING+y.INVALID_CRITICALITY)}}else if(a(o,"Target")){if(u&&s&&f&&l){r=true;return false}else{I.warning(y.CARD_WARNING+y.INVALID_CRITICALITY)}}}else if(n&&n.Criticality){r=true;return false}else{I.warning(y.CARD_WARNING+y.INVALID_IMPROVEMENT_DIR)}}});if(r===true&&e.length>1){I.warning(y.CARD_WARNING+y.INVALID_SEMANTIC_MEASURES)}return r}function J(e,t,a,r){function i(e,t){return e&&e.indexOf(t,e.length-t.length)!==-1}var n=[null,null];var o=true;var s=e.Measure.PropertyPath;if(a[s]){if(a[s][E.LABEL_KEY_V4]){s=le(a[s][E.LABEL_KEY_V4].String?a[s][E.LABEL_KEY_V4].String:a[s][E.LABEL_KEY_V4].Path,r,a)}else if(a[s][E.LABEL_KEY]){s=a[s][E.LABEL_KEY]}else if(s){s=s}}var l=e.DataPoint.$AnnotationPath;var u=t[l.substring(1)];if(!u.CriticalityCalculation||!u.CriticalityCalculation.ImprovementDirection||!u.CriticalityCalculation.ImprovementDirection.EnumMember){return n}var f=u.CriticalityCalculation.ImprovementDirection.EnumMember;var c=Q(u.CriticalityCalculation.DeviationRangeLowValue,o);var v=Q(u.CriticalityCalculation.DeviationRangeHighValue,o);var g=Q(u.CriticalityCalculation.ToleranceRangeLowValue,o);var m=Q(u.CriticalityCalculation.ToleranceRangeHighValue,o);if(i(f,"Minimize")||i(f,"Minimizing")){if(m&&v){n[0]=p.getText("MINIMIZING_LESS",[s,m]);n[1]=p.getText("MINIMIZING_MORE",[s,v]);n[2]=p.getText("MINIMIZING_CRITICAL",[m,s,v])}}else if(i(f,"Maximize")||i(f,"Maximizing")){if(g&&c){n[0]=p.getText("MAXIMISING_MORE",[s,g]);n[1]=p.getText("MAXIMISING_LESS",[s,c]);n[2]=p.getText("MAXIMIZING_CRITICAL",[c,s,g])}}else if(i(f,"Target")){if(g&&c&&m&&v){n[0]=p.getText("TARGET_BETWEEN",[g,s,m]);n[1]=p.getText("TARGET_AROUND",[s,c,v]);n[2]=p.getText("TARGET_CRITICAL",[c,s,g,m,v])}}return n}function ee(e,t,a){if(t&&t.DataPoint&&t.DataPoint.$AnnotationPath){var r=t.DataPoint.$AnnotationPath,i=a[r];var n,o;if(i&&i.ValueFormat){n=i.ValueFormat}else if(i&&i.NumberFormat){n=i.NumberFormat}if(n&&n.NumberOfFractionalDigits){o=n.NumberOfFractionalDigits;if(e<Number(o)){e=Number(o)}}}return e}function te(e,t,a){if(t&&t.DataPoint&&t.DataPoint.$AnnotationPath){var r=a[t.DataPoint.$AnnotationPath];var i,n;if(r&&r.ValueFormat){i=r.ValueFormat}else if(r&&r.NumberFormat){i=r.NumberFormat}if(i){if(i.ScaleFactor&&i.ScaleFactor.Decimal){n=Number(i.ScaleFactor.Decimal)}else if(i.ScaleFactor&&i.ScaleFactor.Int){n=Number(i.ScaleFactor.Int)}if(!isNaN(n)){if(e===undefined){e=Number(n)}else if(e>Number(n)){e=Number(n)}}}}return e}function ae(e,t){if(e&&e[t]&&(e[t]["Org.OData.Measures.V1.ISOCurrency"]||e[t][E.SEMANTICS_KEY]&&e[t][E.SEMANTICS_KEY]===E.CURRENCY_CODE)){return true}return false}function re(e,t,a){if(e[t[a].$PropertyPath].$Type===E.EDM_INT32){return true}return false}function ie(e,t,a){if(e[t[a].$PropertyPath].$Type===E.EDM_INT64){return true}return false}function ne(e,t,r,i){var n,s,v,d,h;var P,_,D,O,b,S=false;var x;var $,U,F;var K,w=[],H=[];var z;var j;var W=i&&i.getView();var Q,ne;var se=W&&W.getModel("ui");var ve=se&&se.getProperty("/chartSettings");n=e.getModel("ovpCardProperties");if(l.checkIfAPIIsUsed(i)){S=n&&n.getData()&&n.getData().showDataLabel}h=ve?ve.showDataLabel:S;P=e.getVizType();_=B();for(var pe in _){if((j=_[pe].reference)&&_[j]){var ge=A({},_[j]);_[pe]=ge}if(_[pe].default.type===P||_[pe].time&&_[pe].time.type===P){D=_[pe];break}}if(!D){I.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.CARD_CONFIG_ERROR+P+" "+y.CARD_CONFIG_JSON);return}if(!n){I.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return}var me=e.getModel();var Ae=n.getProperty("/entitySet");if(!me||!Ae){return}var de=n.getProperty("/entityType").$Type;var he=i.getMetaModel().getData().$Annotations[de];var Pe={property:i.getMetaModel().getObject("/"+de+"/")};s=g.merge(true,{},he,Pe);if(!s){I.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return}var Ee=ue(me,Ae);ye(me,Ee,de);v=n.getProperty("/chartAnnotationPath");if(!v||!(d=s["@"+v])){I.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return}if(!(O=d.DimensionAttributes)||!O.length){I.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return}var Ne;if(!(b=d.MeasureAttributes)||!b.length){I.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return}else{var Ie=b[0].DataPoint?s[b[0].DataPoint.$AnnotationPath]:null;var Re=Ie&&Ie.ValueFormat&&Ie.ValueFormat.NumberOfFractionalDigits&&Ie.ValueFormat.NumberOfFractionalDigits;Ne=Re?Re:0}z=k(O,D,me,Ae);if(z){D=D.time}else{D=D.default}var De=n.getProperty("/ChartProperties")||n.getProperty("/chartProperties");if(n&&n.getProperty("/tabs")&&De===undefined){Q=W.byId("ovp_card_dropdown");ne=parseInt(Q.getSelectedKey(),10);De=n.getProperty("/tabs")&&n.getProperty("/tabs")[ne-1]&&(n.getProperty("/tabs")[ne-1]["ChartProperties"]||n.getProperty("/tabs")[ne-1]["chartProperties"])}var Oe=false;var be=Ne>0?"tooltipNoScaleFormatter/"+Ne.toString()+"/":"tooltipNoScaleFormatter/-1/";var Se=new o({formatString:be});Se.connect(e.getVizUid());Se.connect(e.getVizUid());e._oOvpVizFrameTooltip=Se;[D.dimensions,D.measures].forEach(function(e,t){var a=t?b:O;var r=t?"measure(s)":"dimension(s)";if(e.min&&a.length<e.min){I.error(y.CARD_ERROR+"in "+P+" "+y.CARD_LEAST+e.min+" "+r);Oe=true}if(e.max&&a.length>e.max){I.error(y.CARD_ERROR+"in "+P+y.CARD_MOST+e.max+" "+r);Oe=true}});if(Oe){return}var Me=true;if(D.properties&&D.properties.hasOwnProperty("hideLabel")&&!D.properties["hideLabel"]){Me=false}var Ve=true;var Le=false;if(P==="donut"){Le=true}e.removeAllAggregation();x={legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:Ve?false:true,selectability:{legendSelection:Le?true:false,axisLabelSelection:false,mode:"EXCLUSIVE",plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:"disabled"}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"},dataLabel:{visible:h||Le?true:false,type:"value"},dataPoint:{invalidity:"ignore"},alignment:{vertical:"top"}},categoryAxis:{label:{truncatedLabelRatio:.15}},general:{groupData:false,showAsUTC:true}};if(D.properties&&D.properties.semanticColor===true&&Z(b,s)){var Ye=p.getText("GOOD");var xe=p.getText("BAD");var $e=p.getText("CRITICAL");var Ue=p.getText("OTHERS");if(b.length===1){var Fe=J(b[0],s,Ee,e);var Ye=Fe[0]||Ye,xe=Fe[1]||xe,$e=Fe[2]||$e,Ue=p.getText("OTHERS")}x.plotArea.dataPointStyle={rules:[{callback:function(e){var t=q(e,Ee,b);if(!t){return false}var r=s[t.substring(1)];var i=X(e,r);if(i===a.criticalityConstants.StateValues.Positive){return true}else if(i==="Positive"){return true}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},displayName:Ye},{callback:function(e){var t=q(e,Ee,b);if(!t){return false}var r=s[t.substring(1)];var i=X(e,r);if(i===a.criticalityConstants.StateValues.Critical){return true}else if(i==="Critical"){return true}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},displayName:$e},{callback:function(e){var t=q(e,Ee,b);if(!t){return false}var r=s[t.substring(1)];var i=X(e,r);if(i===a.criticalityConstants.StateValues.Negative){return true}else if(i==="Negative"){return true}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},displayName:xe},{callback:function(e){var t=q(e,Ee,b);if(!t){return false}var r=s[t.substring(1)];var i=X(e,r);if(i===a.criticalityConstants.StateValues.None){return true}else if(i==="Neutral"){return true}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},displayName:Ue}]}}var Ke=n.getProperty("/bEnableStableColors");var we=n.getProperty("/colorPalette");var Be;if(!Ke&&C.indexOf(d.ChartType.$EnumMember)>=0&&we&&Object.keys(we).length>=2&&Object.keys(we).length<=4){m(O,function(e,t){if(t&&t.Role&&t.Role.$EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){Be=t.Dimension&&t.Dimension.$PropertyPath;return}});var ke;if(Be){if(Ee&&Ee[Be]){if(Ee[Be][E.LABEL_KEY_V4]){ke=le(Ee[Be][E.LABEL_KEY_V4]?Ee[Be][E.LABEL_KEY_V4]:Ee[Be][E.LABEL_KEY_V4].Path,e,Ee)}else if(Ee[Be][E.LABEL_KEY]){ke=Ee[Be][E.LABEL_KEY]}else if(Be){ke=Be}}if(we instanceof Array){var He=we.map(function(e){return e.color});var Ge=we.map(function(e){return e.legendText});var ze=Ge[0]!=undefined?Ge[0]:p.getText("OTHERS");var je=Ge[1]!=undefined?Ge[1]:p.getText("BAD");var We=Ge[2]!=undefined?Ge[2]:p.getText("CRITICAL");var Xe=Ge[3]!=undefined?Ge[3]:p.getText("GOOD")}x.plotArea.dataPointStyle={rules:[{callback:function(e){if(e&&(e[ke]==="3"||e[ke]===3)){if(we instanceof Array){if(we.length<4){return false}}else if(we&&!we.hasOwnProperty(3)){return false}return true}},properties:{color:we instanceof Array&&He.length?He[3]:we[3]&&we[3]["color"]},displayName:Xe||we[3]&&we[3]["legendText"]},{callback:function(e){if(e&&(e[ke]==="2"||e[ke]===2)){if(we instanceof Array){if(we.length<3){return false}}else if(we&&!we.hasOwnProperty(2)){return false}return true}},properties:{color:we instanceof Array&&He.length?He[2]:we[2]&&we[2]["color"]},displayName:We||we[2]&&we[2]["legendText"]},{callback:function(e){if(e&&(e[ke]==="1"||e[ke]===1)){return true}},properties:{color:we instanceof Array&&He.length?He[1]:we[1]&&we[1]["color"]},displayName:je||we[1]&&we[1]["legendText"]},{callback:function(e){if(e&&(e[ke]==="0"||e[ke]===0)){return true}},properties:{color:we instanceof Array&&He.length?He[0]:we[0]&&we[0]["color"]},displayName:ze||we[0]&&we[0]["legendText"]}]}}}var qe=false;var Qe=false;if(d.ChartType.$EnumMember===E.SCATTER_CHARTTYPE||d.ChartType.$EnumMember===E.BUBBLE_CHARTTYPE||d.ChartType.$EnumMember===E.LINE_CHARTTYPE){if(d&&d.AxisScaling&&d.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var Ze=d.AxisScaling;if(Ze.AutoScaleBehavior&&Ze.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var Je=Ze.AutoScaleBehavior;if(Je.ZeroAlwaysVisible&&Je.ZeroAlwaysVisible=="true"){x.plotArea.adjustScale=false;qe=true}else if(Je.DataScope){x.plotArea.adjustScale=true;qe=true}}else if(Ze.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&Ze.ScaleBehavior&&Ze.ScaleBehavior.$EnumMember){var et=Ze.ScaleBehavior.$EnumMember;var tt=et.substring(et.lastIndexOf("/")+1,et.length);if(tt=="FixedScale"){Qe=true}}}else if(d&&d.AxisScaling&&d.AxisScaling.$EnumMember){var at=d.AxisScaling.$EnumMember.substring(d.AxisScaling.$EnumMember.lastIndexOf("/")+1,d.AxisScaling.$EnumMember.length);switch(at){case"AdjustToDataIncluding0":x.plotArea.adjustScale=false;qe=true;break;case"AdjustToData":x.plotArea.adjustScale=true;qe=true;break;case"MinMaxValues":Qe=true;break;default:break}}if(Qe){var rt=[];if(d["MeasureAttributes"][0]&&d["MeasureAttributes"][0].DataPoint&&d["MeasureAttributes"][0].DataPoint.$AnnotationPath){var it=d["MeasureAttributes"][0].DataPoint.$AnnotationPath;var nt=it.substring(it.lastIndexOf("@")+1,it.length);if(s&&s[nt]){var ot=s[nt];if(ot&&ot.MaximumValue&&ot.MinimumValue){rt.push({feed:"valueAxis",max:ot.MaximumValue,min:ot.MinimumValue});qe=true}else{I.error(y.ERROR_MISSING_AXISSCALES)}}}if(d.ChartType.$EnumMember!==E.LINE_CHARTTYPE&&d["MeasureAttributes"][1]&&d["MeasureAttributes"][1].DataPoint&&d["MeasureAttributes"][1].DataPoint.$AnnotationPath){var it=d["MeasureAttributes"][1].DataPoint.$AnnotationPath;var nt=it.substring(it.lastIndexOf("@")+1,it.length);if(s&&s[nt]){var ot=s[nt];if(ot&&ot.MaximumValue&&ot.MinimumValue){rt.push({feed:"valueAxis2",max:ot.MaximumValue,min:ot.MinimumValue});qe=true}else{I.error(y.ERROR_MISSING_AXISSCALES)}}}e.setVizScales(rt)}}U=O.slice();F=b.slice();var st=0;var lt=0;var ut;var ft;var ct=false;var vt=false;var pt;var gt=[];var mt=[],At=[];if((P==="column"||P==="bar"||P==="vertical_bullet")&&D.feeds&&D.feeds.length>0){var dt;for(dt=0;dt<D.feeds.length;dt++){if(D.feeds[dt].uid==="color"){D.feeds.splice(dt,1);break}}for(dt=0;dt<D.feeds.length;dt++){if(D.feeds[dt].uid==="categoryAxis"){delete D.feeds[dt].role;break}}if(n.getProperty("/colorPalette")){for(dt=0;dt<D.feeds.length;dt++){if(D.feeds[dt].uid==="categoryAxis"){D.feeds[dt].role="Category";break}}D.feeds.push({uid:"color",min:1,type:"dimension",role:"Series"})}}m(D.feeds,function(t,a){var r=a.uid;var i=[];if(a.type){var n,o,l;if(a.type==="dimension"){n=O.length;o="Dimension";l="dimensions";$=U;K=w}else{n=b.length;o="Measure";l="measures";$=F;K=H}var v=0,p=n;if(a.min){v=v>a.min?v:a.min}if(a.max){p=p<a.max?p:a.max}if(!a.role){var g=$.length;for(var A=0;A<g&&i.length<p;++A){var d=$[A];$.splice(A,1);--g;--A;i.push(d);if(Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){pt=Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path?Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_Unit]){pt=Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path?Ee[d[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[d[o].$PropertyPath][E.UNIT_KEY]){pt=Ee[d[o].$PropertyPath][E.UNIT_KEY]}if(ae(Ee,pt)){ct=true}else{vt=true}if(!ct){st=ee(st,d,s);ut=te(ut,d,s)}else{lt=ee(lt,d,s);ft=te(ft,d,s)}}}else{var h=a.role.split("|");m(h,function(e,t){if(i.length===p){return false}var a=$.length;for(var r=0;r<a&&i.length<p;++r){var n=$[r];if(n&&n.Role&&n.Role.$EnumMember&&n.Role.$EnumMember.split("/")&&n.Role.$EnumMember.split("/")[1]){var l=n.Role.$EnumMember.split("/")[1];if(l===t){$.splice(r,1);--a;--r;i.push(n);if(Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){pt=Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path?Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_Unit]){pt=Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path?Ee[n[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[n[o].$PropertyPath][E.UNIT_KEY]){pt=Ee[n[o].$PropertyPath][E.UNIT_KEY]}if(ae(Ee,pt)){ct=true}else{vt=true}if(!ct){st=ee(st,n,s);ut=te(ut,n,s)}else{lt=ee(lt,n,s);ft=te(ft,n,s)}}}else if((K?Array.prototype.indexOf.call(K,n):-1)===-1){K.push(n)}}});if(i.length<p){m(K,function(e,t){var a;var r;if((a=D[l].defaultRole)&&(h?Array.prototype.indexOf.call(h,a):-1)!==-1&&(r=($?Array.prototype.indexOf.call($,t):-1)!==-1)){$.splice(r,1);i.push(t);if(Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency]){pt=Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path?Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_ISOCurrency].$Path:undefined}else if(Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_Unit]){pt=Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path?Ee[t[o].$PropertyPath][E.UNIT_KEY_V4_Unit].$Path:undefined}else if(Ee[t[o].$PropertyPath][E.UNIT_KEY]){pt=Ee[t[o].$PropertyPath][E.UNIT_KEY]}if(ae(Ee,pt)){ct=true}else{vt=true}if(!ct){st=ee(st,t,s);ut=te(ut,t,s)}else{lt=ee(lt,t,s);ft=te(ft,t,s)}if(i.length===p){return false}}})}if(i.length<v){I.error(y.CARD_ERROR+y.MIN_FEEDS+P+" "+y.FEEDS_OBTAINED+i.length+" "+y.FEEDS_REQUIRED+v+" "+y.FEEDS);return false}}if(i.length){var _=[];var C;if(!(C=e.getDataset())){I.error(y.NO_DATASET);return false}N=s;m(i,function(t,a){if(!a||!a[o]||!a[o].$PropertyPath){I.error(y.INVALID_CHART_ANNO);return false}var i=a[o].$PropertyPath;var n=i;var s=i;var l=null;if(Ee&&Ee[i]){if(Ee[i]["annotations"]){if(Ee[i]["annotations"]["@"+E.LABEL_KEY_V4]){if(Ee[i]["annotations"]["@"+E.LABEL_KEY_V4]instanceof String&&Ee[i]["annotations"]["@"+E.LABEL_KEY_V4]){n=le(Ee[i]["annotations"]["@"+E.LABEL_KEY_V4],e,Ee)}else if(Ee[i]["annotations"]["@"+E.LABEL_KEY_V4].$Path){n=Ee[i]["annotations"]["@"+E.LABEL_KEY_V4].$Path}else{n=Ee[i]["annotations"]["@"+E.LABEL_KEY_V4]}}else if(Ee[i]["annotations"]["@"+E.LABEL_KEY]){n=Ee[i]["annotations"]["@"+E.LABEL_KEY]}else if(i){n=i}if(Ee[i]["annotations"]["@"+E.TEXT_KEY_V4]){s=Ee[i]["annotations"]["@"+E.TEXT_KEY_V4].$String?Ee[i]["annotations"]["@"+E.TEXT_KEY_V4].$String:Ee[i]["annotations"]["@"+E.TEXT_KEY_V4].$Path}else if(Ee[i]["annotations"]["@"+E.TEXT_KEY]){s=Ee[i]["annotations"]["@"+E.TEXT_KEY]}}else if(i){s=i}l=Ee[i].$Type||null}var c;if((l==="Edm.DateTime"||l==="Edm.DateTimeOffset")&&s===i){c="{path:'"+i+"', formatter: 'sap.ovp.cards.v4.charts.VizAnnotationManager.returnDateFormat'}"}else{if(Ee[i]&&Ee[i]["annotations"]&&Ee[i]["annotations"]["@"+E.TEXT_KEY_V4]&&Ee[i]["annotations"]["@"+E.TEXT_KEY_V4+"@"+E.TEXT_ARRANGEMENT_ANNO]){var v,p;v=Ee[i]["annotations"]["@"+E.TEXT_KEY_V4+"@"+E.TEXT_ARRANGEMENT_ANNO];p=v&&v.$EnumMember;if(!p){v=Ee[i]["annotations"]["@"+E.TEXT_KEY_V4]["@"+E.TEXT_ARRANGEMENT_ANNO];p=v&&v.$EnumMember}if(!p){var g=N;v=g&&g["@"+E.TEXT_ARRANGEMENT_ANNO];p=v&&v.$EnumMember}switch(p){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":c="{"+s+"}"+" "+"("+"{"+i+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":c="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":c="{"+s+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":c="{"+i+"}"+" "+"("+"{"+s+"}"+")";break;default:c="{"+i+"}";break}}else{c="{"+s+"}"}}_.push(n);if(o==="Dimension"){if(r==="waterfallType"){var m=new u({name:n,value:"{"+i+"}"})}else{var m=new u({name:n,value:"{"+i+"}",displayValue:c})}var A=Ee[i][E.SEMANTICS_KEY];var d=R(e.getModel(),Ae,i);if(z&&(l==="Edm.DateTime"||d||l==="Edm.DateTimeOffset"||A&&A.lastIndexOf("year",0)===0)){m.setDataType("date")}C.addDimension(m);if((At?Array.prototype.indexOf.call(At,n):-1)===-1){At.push(n)}}else{C.addMeasure(new f({name:n,value:"{"+i+"}"}));if((mt?Array.prototype.indexOf.call(mt,n):-1)===-1&&r!="bubbleWidth"){mt.push(n)}}});e.addFeed(new c({uid:r,type:o,values:_}));if(r==="categoryAxis"){x[r]={title:{visible:Me?false:true,text:_.join(", ")},label:{formatString:ct?"CURR":"axisFormatter",truncatedLabelRatio:.15}}}else{x[r]={title:{visible:Me?false:true,text:_.join(", ")},label:{formatString:ct?"CURR":"axisFormatter"}}}gt.push(x[r]);if(D.hasOwnProperty("vizProperties")){var T=0;var S=D.vizProperties.length;var M;var V;for(;T<S;T++){if(D.vizProperties[T].hasOwnProperty("value")){V=D.vizProperties[T].value}if(D.vizProperties[T].hasOwnProperty("path")){M=D.vizProperties[T].path.split(".");var L=M.length;var Y,B;var k;for(var G=0,k=M[0],Y=x,B=De;G<L;++G){if(G===L-1){if(B&&B.hasOwnProperty(k)){if(P==="donut"&&(B[k]==="value"||B[k]==="percentage")){V=B[k]}else if(P!="donut"){V=B[k]}}if(qe&&k!="adjustScale"||!qe&&k==="adjustScale"||!qe&&k!="adjustScale"){Y[k]=V}break}Y[k]=Y[k]||{};Y=Y[k];if(B){B[k]=B[k]||{};B=B[k]}k=M[G+1]}}}}if(a.hasOwnProperty("vizProperties")){var t=0;var j=a.vizProperties.length;var W;var X;var q;for(;t<j;t++){if(a.vizProperties[t].hasOwnProperty("method")){X=a.vizProperties[t].method;switch(X){case"count":W=_.length;if(a.vizProperties[t].hasOwnProperty("min")&&W<=a.vizProperties[t].min){W=a.vizProperties[t].min}else if(a.vizProperties[t].hasOwnProperty("max")&&W>=a.vizProperties[t].max){W=a.vizProperties[t].max}break;default:break}}else if(a.vizProperties[t].hasOwnProperty("value")){W=a.vizProperties[t].value}if(a.vizProperties[t].hasOwnProperty("path")){q=a.vizProperties[t].path.split(".");var Q=q.length;for(var A=0,Z=q[0],J=x;A<Q;++A){if(A===Q-1){J[Z]=W;break}J[Z]=J[Z]||{};J=J[Z];Z=q[A+1]}}}}}}});var ht=e.getFeeds();if(D.properties&&D.properties.semanticPattern===true&&Y(ht,P)){m(ht,function(t,a){if(ht[t].getType()==="Measure"&&(ht[t].getUid()==="valueAxis"||ht[t].getUid()==="actualValues")){var r;m(b,function(e,a){var i=L(a.Measure.$PropertyPath,Ee);if(i===ht[t].getValues()[0]){r=M(a,s);return false}});if(r){var i=L(r.Measure.$PropertyPath,Ee);var n=s[r.DataPoint.$AnnotationPath.substring(1)].ForecastValue.PropertyPath||s[r.DataPoint.$AnnotationPath.substring(1)].ForecastValue.Path;var o=L(n,Ee);var l=p.getText("ACTUAL",[i]);var u=p.getText("FORECAST",[o]);x.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:i},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:l},{dataContext:{MeasureNamesDimension:o},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:u}]};e.getDataset().addMeasure(new f({name:o,value:"{"+n+"}"}));var c=ht[t].getValues();c.push(o);ht[t].setValues(c)}return false}})}var Pt=false;if(we&&we.dimensionSettings&&Object.keys(we.dimensionSettings).length>0){var Et=Object.keys(we.dimensionSettings);for(var yt=0;yt<Et.length;yt++){var _t=Et[yt];var Ct=we.dimensionSettings[_t];if(Object.keys(Ct).length>10){Pt=true;break}}}if(Ke&&T.indexOf(d.ChartType.$EnumMember)>=0&&!Boolean(Pt)){var Tt=[];var Nt=true;for(var yt=0;yt<O.length;yt++){var It=O[yt].Dimension.$PropertyPath;Tt.push(It)}for(var yt=0;yt<Tt.length;yt++){var _t=Tt[yt];if(Et.indexOf(_t)>-1){var Rt=we.dimensionSettings[_t];var Dt=Object.keys(Rt);var Ot=[];for(var yt=0;yt<Dt.length;yt++){var bt=Rt[Dt[yt]];Ot.push(bt)}Nt=Nt&&Ot.every(Ce)}}if(Nt){var St=[];for(var yt=0;yt<Tt.length;yt++){var _t=Tt[yt];if(Et.indexOf(_t)>-1){var Rt=we.dimensionSettings[_t];var Dt=Object.keys(Rt);var Ot=[];for(var yt=0;yt<Dt.length;yt++){var bt=Rt[Dt[yt]];Ot.push(bt)}_e(Ot);for(var Mt=0;Mt<Ot.length;Mt++){var Vt=Ot[Mt].dimensionValue;var Lt=Ot[Mt].color;var bt={properties:{color:Lt}};bt.dataContext={};var Yt=oe(Ee,e,_t);bt.dataContext[Yt]=Vt;bt.displayName=Vt;St.push(bt)}}}x.plotArea.dataPointStyle=x.plotArea.dataPointStyle||{};x.plotArea.dataPointStyle["rules"]=St}else{var St=[];for(var yt=0;yt<Tt.length;yt++){var _t=Tt[yt];if(Et.indexOf(_t)>-1){var Rt=we.dimensionSettings[_t];var Dt=Object.keys(Rt);var Ot=[];for(var yt=0;yt<Dt.length;yt++){var bt=Rt[Dt[yt]];Ot.push(bt)}_e(Ot);var xt=Ot.map(Te)}}x.legend.order=function(e,t){var a=xt.indexOf(e);var r=xt.indexOf(t);return a>r?1:-1}}}if(D.properties&&D.properties.semanticPattern===true&&Y(ht,P)&&e.getVizType()==="vertical_bullet"){m(ht,function(t,a){if(ht[t].getType()==="Measure"&&(ht[t].getUid()==="valueAxis"||ht[t].getUid()==="actualValues")){var r;m(b,function(e,a){var i=L(a.Measure.PropertyPath,Ee);if(i===ht[t].getValues()[0]){r=V(a,s);return false}});if(r){var i=s[r.DataPoint.$AnnotationPath.substring(1)].TargetValue.PropertyPath||s[r.DataPoint.$AnnotationPath.substring(1)].TargetValue.Path;var n=L(i,Ee);e.getDataset().addMeasure(new f({name:n,value:"{"+i+"}"}));e.addFeed(new c({uid:"targetValues",type:"Measure",values:[n]}))}return false}})}if(ct&&vt){I.warning(p.getText("Currency_non_currency_measure"))}m(ht,function(e,t){var a=t.getProperty("type");if(a==="Measure"){var r=t.getProperty("values");var i=true;var n=d.MeasureAttributes.filter(function(e){var t=e[a].$PropertyPath;var i=Ee[t];return Object.keys(i).length>0&&r.indexOf(t)>=0});m(n,function(e,t){if(re(Ee,t,a)||ie(Ee,t,a)){i=false}else{i=true;return false}});if(!i){x[t.getProperty("uid")]["label"]["allowDecimals"]=false}}});var $t;if(ft===undefined){ft=""}if(ut===undefined){ut=""}if(ct){$t=ce(ft,ct)}else{$t=ce(ut,ct)}if(t){t.setScale($t)}fe(mt,At,r);var Ut="";m(ht,function(e,t){var a="-1";var r=t.getProperty("type");if(r==="Measure"){var i=gt.filter(function(e){var a=e["title"]["text"].split(",").filter(function(e){if(t.getValues().indexOf(e.trim())>=0){return true}else{return false}});if(a.length>0){return true}else{return false}});if(i&&i.length){var n=t.getValues();if(n&&n.length){m(n,function(e,t){var i=t.trim();var n=b.filter(function(e){if(e["Measure"]&&e["Measure"]["PropertyPath"]){var t=e["Measure"]["PropertyPath"];if(Ee[t]&&Ee[t][E.LABEL_KEY]===i||Ee[t]&&Ee[t][E.LABEL_KEY_V4]===i){return true}else{return false}}});if(n&&n.length){var o=n[0];if(!re(Ee,o,r)&&!ie(Ee,o,r)){var l="";if(o&&o["DataPoint"]&&o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"]){l=o["DataPoint"]["AnnotationPath"]&&o["DataPoint"]["AnnotationPath"].substring(1);if(l!=""){var u;u=s[l]&&s[l]["ValueFormat"]&&s[l]["ValueFormat"]["NumberOfFractionalDigits"]&&s[l]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];a=u>a?u:a}}}else{a=a<"0"?"0":a}}})}}if(i&&i[0]&&i[0].label&&i[0].label.formatString){var o=i[0].label.formatString}Ut="";if(ct){if(o==="CURR"){Ut="CURR/"+a.toString()+"/"}else{Ut="axisFormatter/"+a.toString()+"/"}}else{Ut="axisFormatter/"+a.toString()+"/"}if(i&&i[0]){i[0].label.formatString=Ut}}});if(P==="vertical_bullet"){x["valueAxis"]={title:{visible:Me?false:true},label:{formatString:Ut}}}var Ft="";var Kt="";if(ct){Ft=lt.toString();Kt="CURR/"+lt.toString()+"/"}else{Ft=st.toString();Kt="axisFormatter/"+st.toString()+"/"}if(P==="donut"||h){x.plotArea.dataLabel.formatString=Kt;if(x.plotArea.dataLabel.type==="percentage"){x.plotArea.dataLabel.formatString="0.0%/"+Ft+"/"}}G(U,D,"dimension");G(F,D,"measure");if(z){var wt=O[0].Dimension.$PropertyPath;var Bt=e.getModel().getMetaModel().getObject("/"+Ae+"/"+wt+"@");if(Bt["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){x.timeAxis.levels=["year","month"]}else if(Bt["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){x.timeAxis.levels=["year","quarter"]}else if(Bt["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){x.timeAxis.levels=["year","week"]}else if(Bt["@com.sap.vocabularies.Common.v1.IsCalendarYear"]){x.timeAxis.levels=["year"]}}e.setVizProperties(x)}function oe(e,t,a){var r="";if(e&&e[a]){if(e[a].annotations&&e[a].annotations["@"+E.LABEL_KEY_V4]){r=le(e[a].annotations["@"+E.LABEL_KEY_V4],t,e)}else if(e[a][E.LABEL_KEY]){r=e[a][E.LABEL_KEY]}else if(a){r=a}}return r}function se(e,t,a,r){if(e&&(e.getVizType()==="bubble"||e.getVizType()==="scatter")){return}var i,n,o,s;var l;var u=E.UNIT_KEY;var f="@"+E.UNIT_KEY_V4_ISOCurrency;var c="@"+E.UNIT_KEY_V4_Unit;var v;var g=[];if(!(i=e.getModel("ovpCardProperties"))){I.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return}var A=e.getModel();var d=i.getProperty("/entitySet");if(!A||!d){return}n=r[i.getProperty("/entityType").$Type];if(!n){I.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return}var h=ue(A,d);o=i.getProperty("/chartAnnotationPath");if(!o||!(s=n["@"+o])){I.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return}if(!(l=s.MeasureAttributes)||!l.length){I.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return}m(l,function(e,t){v=t.Measure.$PropertyPath;if(t.DataPoint&&t.DataPoint.$AnnotationPath){var a=n[t.DataPoint.$AnnotationPath.substring(1)];if(a&&a.ForecastValue&&(a.ForecastValue.PropertyPath||a.ForecastValue.Path)){g.push(a.ForecastValue.PropertyPath||a.ForecastValue.Path)}}g.push(v)});var P=t?t:null;var _="";var C=true;var T=[];var N=e.getFeeds();m(N,function(e,t){if(t.getType()==="Measure"){T=T.concat(t.getValues())}});if(P){m(g,function(t,a){var r=oe(h,e,a);if((T?Array.prototype.indexOf.call(T,r):-1)!=-1){if(h&&h[a]){var i;if(h[a].annotations[f]){i=h[a].annotations[f].$Path?h[a].annotations[f].$Path:h[a].annotations[f].$String}else if(h[a].annotations[c]){i=h[a].annotations[c].$Path?h[a].annotations[c].$Path:h[a].annotations[c].$String}else if(h[a][u]){i=h[a][u]}if(!i){C=false;return false}if(i&&h[i]){for(var t=0;t<P.length;t++){var n=P[t];if(C){if(_&&n[i]&&n[i]!=""&&_!=""&&_!=n[i]){C=false;break}}_=n[i];if(!_){C=false;break}}}}}})}var R="";if(C){if(_!=""){R=p.getText("IN_NO_SCALE",[_]);R=" "+R}if(a){a.setText(R);a.data("aria-label",R,true);var D=e.data("aria-label");if(D&&R&&D.indexOf(R)===-1){var O=D+R;e.data("aria-label",O,true)}}}}function le(e,t,a){var r;var i;var n;if(e&&e.indexOf("{")===0){e=e.slice(1,-1);if(e.indexOf(">")!=-1){n=e.split(">");r=n[0];i=n[1]}else if(e.indexOf("&gt;")!=-1){n=e.split("&gt;");r=n[0];i=n[1]}try{e=t.getModel(r).getProperty(i)}catch(t){e=a[e][E.LABEL_KEY_V4].String;I.error("Unable to read labels from resource file",t)}}return e}function ue(t,a){var r=e.cacheODataMetadata(t);if(!r){return undefined}return r[a]}function fe(e,t,a){var r="",i="",n="";if(a){r=a.getText()}if(e&&e.length>1){for(var o=0;o<e.length-1;o++){if(i!=""){i+=", "}i+=e[o]}i=p.getText("MEAS_DIM_TITLE",[i,e[o]])}else if(e){i=e[0]}if(t&&t.length>1){for(var o=0;o<t.length-1;o++){if(n!=""){n+=", "}n+=t[o]}n=p.getText("MEAS_DIM_TITLE",[n,t[o]])}else if(t){n=t[0]}if(a&&r===""){r=p.getText("NO_CHART_TITLE",[i,n]);a.setText(r);a.data("aria-label",r,true)}}function ce(e,t){var a=1;var i;if(t){var n=r.getCurrencyInstance({style:"short",currencyCode:false,shortRefNumber:e});i=n.format(Number(a))}else{var o=r.getFloatInstance({style:"short",shortRefNumber:e});i=o.format(Number(a))}var s=i.slice(-1);return s}function ve(e,t){e.attachSelectData(function(r){var n=g.bCRTLPressed?g.constants.explace:g.constants.inplace;g.bCRTLPressed=false;var o=e.getModel("ovpCardProperties");var u=e.getModel();var f=o.getProperty("/entitySet");var c=ue(u,f);var v=[],p=[];var A={},d={};var h=e.getDataset().getDimensions();var P;var y=o.getProperty("/entityType");var _=t.getMetaModel().getData()["$Annotations"];for(var C=0;C<h.length;C++){v.push(h[C].getName())}var T=e.getDataset().getBinding("data").getCurrentContexts().map(function(e){return e.getObject()});if(r.getParameter("data")&&r.getParameter("data")[0]&&r.getParameter("data")[0].data){p=Object.keys(r.getParameter("data")[0].data);P=r.getParameter("data")[0].data._context_row_number;var N=e.getDataset().getBinding("data").getContexts()[P];var I=t.getEntityNavigationEntries(N)[0];if(T[P].$isOthers&&T[P].$isOthers===true){var R={},D=[];for(var O=0;O<v.length;O++){for(var b=0;b<p.length;b++){if(v[O]===p[b]){for(var S in c){if(c.hasOwnProperty(S)){var M=c[S][E.LABEL_KEY]||c[S][E.NAME_KEY]||c[S][E.NAME_CAP_KEY];if(M===p[b]){D.push(S)}}}}}}for(var C=0;C<D.length;C++){R[D[C]]=[];for(var O=0;O<T.length-1;O++){if(O!=P){R[D[C]].push(T[O][D[C]])}}}var V={$isOthers:true};var L={getObject:function(){return V},getOtherNavigationDimensions:function(){return R}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(L)}}else{if(I){t.doNavigation(L,I,n)}}}else{for(var O=0;O<v.length;O++){for(var b=0;b<p.length;b++){if(v[O]===p[b]){for(var S in c){if(_[y.$Type+"/"+S]){var M=typeof _[y.$Type+"/"+S]["@"+E.LABEL_KEY_V4]==="string"&&_[y.$Type+"/"+S]["@"+E.LABEL_KEY_V4]||_[y.$Type+"/"+S][E.LABEL_KEY]||_[y.$Type+"/"+S][E.NAME_KEY]||_[y.$Type+"/"+S][E.NAME_CAP_KEY]||S;if(M.match(/{@i18n>.+}/gi)){var Y=this.getModel("@i18n").getResourceBundle();M=Y.getText(M.substring(M.indexOf(">")+1,M.length-1))}if(M===p[b]){A[S]=T[P][S]}}}}for(var S in T[P]){if(c.hasOwnProperty(S)){d[S]=T[P][S]}}}}if(A){m(Object.keys(A),function(e,t){var a=c[t]&&c[t]["annotations"];if(c[t]["$Type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearquarter"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(A[t]):A[t]}else if(c[t]["sap:semantics"]==="yearweek"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){A[t]=A[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(A[t]):A[t]}else if(c[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var r=A[t];if(r.includes(".")){A[t]=r.split(".").reverse().join("")}else if(r.includes("/")){A[t]=r.split("/").reverse().join("")}}}})}if(d){m(Object.keys(d),function(e,t){var a=c[t]&&c[t]["annotations"];if(c[t]["$Type"]==="Edm.String"){if(c[t]["sap:semantics"]==="yearmonth"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYMM"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearquarter"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYQ"}).format(d[t]):d[t]}else if(c[t]["sap:semantics"]==="yearweek"||a&&a["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){d[t]=d[t].constructor===Date?i.getDateTimeInstance({pattern:"YYYYww"}).format(d[t]):d[t]}else if(c[t]["@com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]){var r=d[t];if(r.includes(".")){d[t]=r.split(".").reverse().join("")}else if(r.includes("/")){d[t]=r.split("/").reverse().join("")}}}})}var x=y[o.getProperty("/presentationAnnotationPath")];if(y){var $=a.getRequestFields(x);if($&&$.length>0){m($,function(e,t){if(!A.hasOwnProperty(t)){A[t]=T[P][t]}})}}var L={getObject:function(){return A},getAllData:function(){return d}};if(l.checkIfAPIIsUsed(t)){if(t.checkAPINavigation()){s.onContentClicked(L)}}else{if(I){t.doNavigation(L,I,n)}}}}})}function pe(e){if(e.$EnumMember.endsWith("Bubble")){return true}else{return false}}function ge(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Dimension||!e[0].Dimension.$PropertyPath){I.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return t}t=true;return t}function me(e){var t=false;if(!e||e.constructor!=Array||e.length<1||e[0].constructor!=Object||!e[0].Measure||!e[0].Measure.$PropertyPath){I.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return t}t=true;return t}function Ae(e){e=e["$Type"];return e}function de(e){if(e&&e.indexOf("#")!=-1){var t=e.split("#");if(t.length>1){return t[1]}}return""}function he(e,t){var a=t.getModel("ovpCardProperties");var r=Pe(t);var i=+r.itemsLength;var n=+a.getProperty("/dataStep");if(i&&n){var o=e.colSpan-1;if(o>=0){i+=n*o;Ee(t,i)}}}function Pe(e){var t=e.getModel("ovpCardProperties");var a=t.getProperty("/entityType");var r=t.getProperty("/presentationAnnotationPath");var i=a.hasOwnProperty(r)&&a[r];var n=i&&i.MaxItems;if(typeof n==="number"||typeof n==="string"&&!isNaN(n)){var o=parseInt(n,10);return{itemsLength:+o,dataStep:+t.getProperty("/dataStep")}}}function Ee(e,t){var a,r={},i=[];var n=e.getVizType();var o=e.getModel("ovpCardProperties");var s=o.getProperty("/entityType");var l=o.getProperty("/chartAnnotationPath");var u=s[l];var f=e.getParent();var c=f.getBinding("data");r.path=c.getPath();r.parameters={};if(c.mParameters&&c.mParameters.select){r.parameters.select=c.mParameters.select}r.parameters.custom=r.parameters.custom||{};r.parameters.custom._requestFrom="ovp_internal";r.filters=c.aApplicationFilters;r.sorter=c.aSorters;r.length=n==="donut"?t+1:t;r.template=new v;f.bindAggregation("data",r);if(n==="donut"){m(u.MeasureAttributes,function(e,t){i.push(t.Measure.PropertyPath)});a={};a.path=c.getPath();a.parameters={};a.parameters.select=i.join(",");a.filters=c.aApplicationFilters;a.sorter=c.aSorters;a.length=1;a.template=new v;f.bindAggregation("aggregateData",a)}f.updateBindingContext()}function ye(e,t,a){var r=e.getMetaModel().getData().$Annotations;for(var i in t){if(r[a+"/"+i]&&!t[i]["annotations"]){t[i]["annotations"]=r[a+"/"+i]}}}function _e(e){e.sort(function(e,t){if(e.index<t.index){return-1}if(e.index>t.index){return 1}return 0})}function Ce(e){return e.color!==undefined}function Te(e){return e.dimensionValue}return{constants:E,errorMessages:y,formatItems:D,formatByType:x,returnDateFormat:$,hideDateTimeAxis:U,checkExists:F,validateCardConfiguration:K,checkNoData:w,getConfig:B,hasTimeSemantics:k,getChartType:H,getPrimitiveValue:z,formThePathForCriticalityStateCalculation:X,checkFlag:Z,buildVizAttributes:ne,setChartUoMTitle:se,getMetadata:ue,getSelectedDataPoint:ve,checkBubbleChart:pe,dimensionAttrCheck:ge,measureAttrCheck:me,getEntitySet:Ae,getAnnotationQualifier:de,reprioritizeContent:he,getMaxItems:Pe,getLabelFromAnnotationPath:le,formGroupByList:b}},true);
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/Component", ["sap/ovp/cards/v4/generic/Component","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/ovp/cards/jUtils"],function(a,e,t){"use strict";return a.extend("sap.ovp.cards.v4.charts.analytical.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"},contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.charts.analytical.analyticalChart"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){t.setAttributeToMultipleElements(".tabindex0","tabindex",0);t.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)}})});
sap.ui.predefine("sap/ovp/cards/v4/charts/analytical/analyticalChart.controller", ["sap/ovp/cards/v4/generic/Card.controller","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper","sap/ovp/cards/v4/charts/Utils","sap/ovp/filter/FilterUtils","sap/ui/core/Fragment","sap/ui/core/Core","sap/ui/Device","sap/ui/dom/units/Rem","sap/ovp/cards/charts/OVPChartFormatter"],function(t,e,a,i,r,s,o,n,d,l,h,g,p,u,v){"use strict";var c=new o("OVP.v4.analytical.analyticalChart");return t.extend("sap.ovp.cards.charts.v4.analytical.analyticalChart",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this;this.eventhandler=function(t,a,i){l.applyFiltersToV4AnalyticalCard(i,e)};this.GloabalEventBus=g.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}v.registerCustomFormatters();this.iPreviousRowSpan=0},onBeforeRendering:function(){if(this.bCardProcessed){return}e.validateCardConfiguration(this);var t=this.getView().byId("analyticalChart");var i=this.getOwnerComponent().getComponentData();if(t){t.setHeight("21rem")}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&i&&i.appComponent){var r=i.appComponent.getDashboardLayoutUtil();var s=r.dashboardLayoutModel.getCardById(i.cardId);if(s.dashboardLayout.autoSpan&&t){t.setHeight("21rem")}}var o=this.getView().byId("vbLayout");var n;var d=false;var l=new a({data:{path:"/"}});this.isVizPropSet=d;this.oDataSet=l;this.vizFrame=t;this.vbLayout=o;if(!t){c.error(e.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")")}else{this.vbLayout.setBusy(true);n=t.getModel("ovpCardProperties").getProperty("/navigation");if(n===undefined||n=="datapointNav"||n!="headerNav"){e.getSelectedDataPoint(t,this)}t.destroyDataset();var g=t.getParent().getBinding("data");this._handleKPIHeader();if(g&&g.getPath()){g.attachDataReceived(this.onDataReceived.bind(this));g.attachDataRequested(this.onDataRequested.bind(this))}else{h.load("sap.ovp.cards.charts.generic.noData").then(function(t){var e=this.getCardContentContainer();e.removeAllItems();e.addItem(t)}.bind(this))}t.addEventDelegate({onmouseover:function(){var e=t._oOvpVizFrameTooltip;if(e){e._oPopup.close()}}})}this.bCardProcessed=true},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);if(!i.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var a=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var r=document.getElementById(a);var s=this.getHeaderHeight();if(!e.dashboardLayout.autoSpan){if(r){var o=r.getElementsByClassName("sapOvpWrapper")[0];if(o){o.style.height=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px"}}}if(e.dashboardLayout.showOnlyHeader){r.classList.add("sapOvpMinHeightContainer")}var d=this.getView().byId("analyticalChart");if(d){d.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}}if(!i.checkIfAPIIsUsed(this)){var h=this.getCardPropertiesModel();var g=this.getOwnerComponent().getModel("ui").getData().cards;var p=this.getEntitySet()&&this.getEntitySet()["$Type"];var u=p&&this.getMetaModel().getContext("/"+p);if(u){this.selectionVaraintFilter=n.getSelectionVariantFilters(g,h,this.getEntityType())}var v=this.oCardComponentData.mainComponent;var c=[];if(v.getGlobalFilter()){c=v.oGlobalFilter.getFilters()}if(v.getMacroFilterBar()){c=v.aFilters}l.applyFiltersToV4AnalyticalCard(c,this)}},onDataReceived:function(t){if(d.checkIfDataExistInEvent(t)){var a=this;var i=this.getView().byId("analyticalChart");var o=this.getView().byId("bubbleText");var n=this.getView().byId("ovpCT");var l=r.getText("BUBBLESIZE");var h=a.getMetaModel().getData()["$Annotations"];this.oDataSet.bindData("analyticalmodel>/","");i.setDataset(this.oDataSet);var g=i.getParent();if(!this.isVizPropSet){e.buildVizAttributes(i,g,n,this);this.isVizPropSet=true;if(o!=undefined){var u=i.getFeeds();s(u,function(t,e){if(u[t].getUid()=="bubbleWidth"){o.setText(l+" "+u[t].getValues())}})}e.hideDateTimeAxis(i)}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&i.getVizType()==="stacked_column"){var v=i.getDataset().getDimensions(),c=i.getFeeds(),y,b;for(var f=0;f<c.length;f++){if(c[f].getUid()==="color"){y=c[f].getValues()[0];break}}for(var C=0;C<v.length;C++){if(v[C].getName()===y){b=v[C];break}}if(y&&b){var V={};V["bDescending"]=true;b.setSorter(V)}}var P=this.getView().byId("ovpUoMTitle");var m=t?t.getSource().getCurrentContexts().map(function(t){return t&&t.getObject()}):null;e.setChartUoMTitle(i,m,P,h);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false)}else{setTimeout(function(){a.vbLayout.setBusy(false)},0)}e.checkNoData(t,this.getCardContentContainer(),i);if(p.system.phone){if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var D=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var I=Math.max(D.dashboardLayout.rowSpan,this.iPreviousRowSpan);this.iPreviousRowSpan=I}if(d.isDataSetEmpty(t)){i.setHeight(50+"px")}else{var L=this._calculateVizFrameHeight();if(L!==undefined&&typeof L==="number"){i.setHeight(L+"px")}}}}},onDataRequested:function(){this.vbLayout.setBusy(true)},getCardItemsBinding:function(){var t=this.getView().byId("analyticalChart");if(t&&t.getParent()){return t.getParent().getBinding("data")}return null},resizeCard:function(t){var a=this.getCardPropertiesModel();this.newCardLayout=t;a.setProperty("/cardLayout/rowSpan",t.rowSpan);a.setProperty("/cardLayout/colSpan",t.colSpan);var i=this.getCardPropertiesModel().getProperty("/cardLayout");var o=this.getHeaderHeight();var n=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var d=0;d<n.length;d++){n[d].style.height=t.rowSpan*i.iRowHeightPx+2-(o+2*i.iCardBorderPx)+"px"}var l=this.getView().byId("analyticalChart");var h=this.getView().byId("bubbleText");var g=this.getView().byId("ovpCT");if(l){if(l.getVizType()==="timeseries_bubble"||l.getVizType()==="bubble"){if(i.colSpan>1){h.setVisible(false)}else{h.setVisible(true)}}l.setHeight(this._calculateVizFrameHeight()+"px");this._calculateWidth()}var p=this.getView().byId("ovpCardContentContainer").getDomRef();if(p){if(!t.showOnlyHeader){p.classList.remove("sapOvpContentHidden")}else{p.classList.add("sapOvpContentHidden")}}var u=r.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var v=l.getParent();if(!this.isVizPropSet){e.buildVizAttributes(l,v,g,this);this.isVizPropSet=true;if(h!=undefined){var c=l.getFeeds();s(c,function(t,e){if(c[t].getUid()=="bubbleWidth"){h.setText(u+" "+c[t].getValues())}})}e.hideDateTimeAxis(l)}e.reprioritizeContent(this.newCardLayout,l)},_calculateVizFrameHeight:function(){var t;if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.getView().byId("analyticalChart");var a=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var i=this.getView().getController();var r=this.getItemHeight(i,"toolbar");var s=this.getHeaderHeight();var o=this.getView().byId("ovpCT")?24:0;var n=(e.getVizType()==="timeseries_bubble"||e.getVizType()==="bubble")&&a.dashboardLayout.colSpan===1?43:0;var d=p.system.phone&&this.iPreviousRowSpan>0?this.iPreviousRowSpan:a.dashboardLayout.rowSpan;t=d*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+r+o+n+30);var l=e.getVizType();var h=e.sId;if(l==="donut"){var g=this._calculateVizLegendGroupHeight(t);var v=this.getView().byId(h);if(v){v.setVizProperties(g)}}}else{t=u.toPx(21)}return t},_calculateVizLegendGroupHeight:function(t){var e;if(t<=300){e=.1}else if(t>=400){e=.4}else{e=.3}var a={legendGroup:{layout:{height:e}}};return a},_calculateWidth:function(){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var e=this.getView().byId("analyticalChart");if(t){var a=parseInt(t.dashboardLayout.width,10);var i=e.getVizType();var r=e.sId;if(i==="donut"){var s=this._calculateVizLegendGroupWidth(a);var o=this.getView().byId(r);if(o){o.setVizProperties(s)}}}},_calculateVizLegendGroupWidth:function(t){var e;if(t<=600){e=.25}else if(t<=900){e=.55}else if(t>=1200){e=.7}else{e=.65}var a={legendGroup:{layout:{maxWidth:e}}};return a},refreshCard:function(){this.getView().rerender()}})});
sap.ui.predefine("sap/ovp/cards/v4/charts/config", [],function(){"use strict";var e={getChartsConfiguration:function(){return{Line:{default:{type:"line",vizProperties:[{path:"plotArea.isSmoothed",value:false}],properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"valueAxis.label.allowDecimals",value:true}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_line",vizProperties:[{path:"plotArea.isSmoothed",value:false},{path:"timeAxis.levels",value:[]}],dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"color",type:"dimension",role:"Series"}]}},Bubble:{default:{type:"bubble",properties:{hideLabel:false},vizProperties:[{path:"plotArea.adjustScale",value:true}],dimensions:{max:4},measures:{min:3,max:3,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",min:1,max:1,type:"measure",role:"Axis2|Axis1|Axis3",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"},{uid:"shape",max:2,type:"dimension",role:"Category"},{uid:"color",max:2,type:"dimension",role:"Series",vizProperties:[{path:"plotArea.colorDepth",method:"count",min:1,max:2}]}]},time:{type:"timeseries_bubble",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"},{uid:"bubbleWidth",min:1,max:1,type:"measure",role:"Axis3|Axis1|Axis2"}]}},Donut:{default:{type:"donut",vizProperties:[{path:"plotArea.dataLabel.type",value:"value"}],dimensions:{min:1},measures:{min:1,max:1},resize:{dataStep:10},feeds:[{uid:"size",min:1,max:1,type:"measure"},{uid:"color",min:1,type:"dimension"}]}},Column:{default:{type:"column",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_column",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Bar:{default:{type:"bar",properties:{semanticColor:true,semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category",vizProperties:[{path:"categoryAxis.layout.width",value:.33}]},{uid:"color",min:1,type:"dimension",role:"Series"}]}},ColumnStacked:{default:{type:"stacked_column",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",type:"dimension",role:"Series"}]},time:{type:"timeseries_stacked_column",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},VerticalBullet:{default:{type:"vertical_bullet",properties:{semanticPattern:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1"},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"color",min:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_bullet",dimensions:{min:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"actualValues",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"targetValues",type:"measure",role:"Axis2"},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"color",min:0,type:"dimension",role:"Series"}]}},Combination:{default:{type:"combination",dimensions:{min:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:2,vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",role:"Series"},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"timeseries_combination",dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:2,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},Scatter:{default:{type:"scatter",vizProperties:[{path:"plotArea.markerSize",value:""}],properties:{hideLabel:false},dimensions:{min:1,max:2},measures:{min:2,max:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",min:1,max:1,role:"Axis1|Axis2|Axis3",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"valueAxis2",type:"measure",min:1,max:1,vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.4}]},{uid:"color",type:"dimension",max:1,role:"Series"},{uid:"shape",type:"dimension",max:1,role:"Category"}]},time:{type:"timeseries_scatter",dimensions:{min:1,max:3,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension",role:"Category"},{uid:"shape",type:"dimension",min:0,role:"Category2"},{uid:"color",type:"dimension",min:0,role:"Series"}]}},Waterfall:{default:{type:"waterfall",properties:{semanticColor:true},dimensions:{min:1,defaultRole:"Category"},measures:{min:1},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"},{uid:"waterfallType",max:1,type:"dimension",role:"Series"}]},time:{type:"timeseries_waterfall",properties:{semanticColor:true},dimensions:{min:1,max:1,defaultRole:"Category"},measures:{min:1,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",type:"measure",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.4},{path:"timeAxis.levels",value:[]}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},CombinationDual:{default:{type:"dual_combination",properties:{hideLabel:false},dimensions:{min:1},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"categoryAxis",min:1,type:"dimension",role:"Category"}]},time:{type:"dual_timeseries_combination",properties:{hideLabel:false},dimensions:{min:1,max:1,defaultRole:"Series"},measures:{min:2,defaultRole:"Axis1"},resize:{dataStep:10},feeds:[{uid:"valueAxis",min:1,max:1,type:"measure",role:"Axis1",vizProperties:[{path:"valueAxis.layout.maxWidth",value:.5}]},{uid:"valueAxis2",min:1,type:"measure",role:"Axis2",vizProperties:[{path:"valueAxis2.layout.maxWidth",value:.5}]},{uid:"timeAxis",min:1,max:1,type:"dimension"}]}},vertical_bullet:{reference:"VerticalBullet"},StackedColumn:{reference:"ColumnStacked"}}}};return{getChartsConfiguration:e.getChartsConfiguration}});
sap.ui.predefine("sap/ovp/cards/v4/charts/generic/Component", ["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(t,e){"use strict";return t.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.generic.KPIHeader"},selectionAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.SelectionVariant"},chartAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Chart"},presentationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.PresentationVariant"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},dataPointAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){e.setAttributeToMultipleElements(".tabindex0","tabindex",0);e.setAttributeToMultipleElements(".tabindex-1","tabindex",-1)},onAfterRendering:function(){this.addTabindex()}})});
sap.ui.predefine("sap/ovp/cards/v4/custom/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.custom.Component",{metadata:{properties:{contentFragment:{type:"string"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/v4/generic/Card.controller", ["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/fe/navigation/SelectionVariant","sap/fe/navigation/PresentationVariant","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavError","sap/ui/core/CustomData","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/MessageToast","sap/ui/generic/app/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/isPlainObject","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ovp/cards/Filterhelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/util/openWindow","sap/ui/core/Component","sap/ovp/placeholder/placeholderHelper","sap/ui/core/library"],function(e,t,a,i,r,n,o,s,l,d,p,c,v,g,h,f,u,m,C,jQuery,y,b,P,I,S,D,N,w,O,k,T,A,E,V){"use strict";var F=V.TextDirection;var x=new D("OVP.generic.Card");return e.extend("sap.ovp.cards.v4.generic.Card",{initKeyboardNavigation:function(){var e=function(e){this.init(e)};e.prototype.layoutItemFocusHandler=function(){var e=jQuery(document.activeElement);if(e){var t=e.find("[aria-label]");var a,i="";if(e.find(".valueStateText").length==1){var r=e.find(".valueStateText").find(".sapMObjectNumberText").text();var n=e.find(".valueStateText").find(".sapUiInvisibleText").text();e.find(".valueStateText").attr("aria-label",r+" "+n);e.find(".valueStateText").attr("aria-labelledby","")}e.find("[role='listitem']").attr("aria-label","");if(e.hasClass("sapOvpCardHeader")&&!e.hasClass("sapOvpStackCardContent")){var o="";var s=e.find(".cardHeaderType");if(s.length===0){var l=y.getText("CardHeaderType");o="cardHeaderType_"+(new Date).getTime();var d='<div id="'+o+'" class="cardHeaderType" aria-label="'+l+'" hidden></div>';e.append(d)}else{o=s[0].id}i+=o+" "}for(a=0;a<t.length;a++){if(t[a].getAttribute("role")==="heading"){i+=t[a].id+" "}}if(e.hasClass("sapOvpCardHeader")){var p=e.find(".cardHeaderText");if(p.length!==0){for(var a=0;a<p.length;a++){if(i.indexOf(p[a].id)===-1){i+=p[a].id+" "}}}}if(i.length){e.attr("aria-labelledby",i)}if(e.prop("nodeName")==="LI"&&e.find(".linkListHasPopover").length!==0){if(e.find("#hasDetails").length===0){e.append("<div id='hasDetails' hidden>"+y.getText("HAS_DETAILS")+"</div>");e.attr("aria-describedby","hasDetails")}}var c=e.attr("id");if(c&&c.indexOf("ovpTable")!=-1&&e.find("[role='Link']")&&!e.hasClass("sapUiCompSmartLink")){var v=e.closest("td").attr("data-sap-ui-column"),g=e.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<g.length;a++){if(g[a].getAttribute("data-sap-ui")==v&&g[a].hasChildNodes("span")){var h=g[a].firstElementChild.getAttribute("id");e.attr("aria-labelledby",h)}}}}};e.prototype.init=function(e){this.cardLayout=e;this.keyCodes=P;this.jqElement=jQuery(e.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler.bind(this))};this.keyboardNavigation=new e(this)},onInit:function(){this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var e=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData.state;if(e!=="Error"){var t=this.getView().byId("ovpCardHeader");if(!!t){t.attachBrowserEvent("click",this.onHeaderClick.bind(this));t.addEventDelegate({onkeydown:function(e){if(!e.shiftKey&&e.keyCode==13){e.preventDefault();this.onHeaderClick(e)}else if(!e.shiftKey&&e.keyCode==32){e.preventDefault()}}.bind(this)});t.addEventDelegate({onkeyup:function(e){if(!e.shiftKey&&e.keyCode==32){e.preventDefault();this.onHeaderClick(e)}}.bind(this)})}}var a=this.getView().byId("kpiNumberValue");if(a){a.addEventDelegate({onAfterRendering:function(){var e=a.$();var t=e.find(".sapMNCValueScr");var i=e.find(".sapMNCScale");t.attr("aria-label",t.text());i.attr("aria-label",i.text());var r=this.getView().byId("ovpCardHeader").getDomRef();var n=this.getOwnerComponent().getComponentData();if(!!n&&!!n.appComponent){var o=n.appComponent;if(!!o.getModel("ui")){var s=o.getModel("ui");if(!!s.getProperty("/containerLayout")&&s.getProperty("/containerLayout")==="resizable"){var l=n.appComponent.getDashboardLayoutUtil();if(!!l){l.setKpiNumericContentWidth(r)}}}}}.bind(this)})}},exit:function(){if(this.resizeHandlerId){o.deregister(this.resizeHandlerId)}},onExit:function(){var e=this;this.GloabalEventBus.unsubscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)},onAfterRendering:function(){var e=this.getView().byId("ovpCardHeader");var t=e&&e.getDomRef();var a=this.getView().byId("ovpHeaderTitle"),i=this.getView().byId("ovpQuickviewCardHeader");if(t&&!t.getAttribute("ariaLabelledBy")){if(a&&a.getText()){var r=a.getDomRef().getAttribute("id");t.setAttribute("arialabelledby",r)}else if(i&&i.getText()){var s=i.getDomRef().getAttribute("id");t.setAttribute("arialabelledby",s)}}var l=this.getCardPropertiesModel();this.enableClick=true;var d=l.getProperty("/contentFragment");var p=this.getOwnerComponent().getComponentData();var c=l.getProperty("/selectedKey");var v=this.getCardItemsBinding();if(!v&&E.hidePlaceholderNeeded()){E.hidePlaceholder()}if(c&&l.getProperty("/state")!=="Loading"){var g=this.getView().byId("ovp_card_dropdown");if(g){g.setSelectedKey(c)}}try{var p=this.getOwnerComponent().getComponentData();if(p&&p.appComponent){var h=p.appComponent;if(h.getModel("ui")){var f=h.getModel("ui");if(f.getProperty("/containerLayout")==="resizable"){var u=h.getDashboardLayoutUtil();if(u){this.oDashboardLayoutUtil=u;this.cardId=p.cardId;if(u.isCardAutoSpan(p.cardId)){this.resizeHandlerId=o.register(this.getView(),function(e){x.info("DashboardLayout autoSize:"+e.target.id+" -> "+e.size.height);u.setAutoCardSpanHeight(e)})}}}}}}catch(e){x.error("DashboardLayout autoSpan check failed.")}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var m=jQuery("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>m.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height())}}var C=0;if(p&&p.mainComponent){var y=p.mainComponent;if(y.bGlobalFilterLoaded){C=!this.checkHeaderNavForChart()&&this.checkNavigation()}}else if(n.checkIfAPIIsUsed(this)){C=this.checkAPINavigation()}var b=this.getCardPropertiesModel();var P=b.getProperty("/state");if(P!=="Loading"&&P!=="Error"){var I=b.getProperty("/template");if(I==="sap.ovp.cards.stack"){if(!C){var S=this.getView().byId("ViewAll");if(S){S=S.getDomRef();S.parentNode.removeChild(S)}}}}var D=false;if(C){if(d?d!=="sap.ovp.cards.quickview.Quickview":true){if(d==="sap.ovp.cards.stack.Stack"){var w=this.getView().getDomRef();var O=w.querySelectorAll(".sapOvpCardContentRightHeader");if(O.length!==0){N.addClassToAllElements(O,"sapOvpCardNavigable")}}else{this.getView().addStyleClass("sapOvpCardNavigable")}}if(d&&d==="sap.ovp.cards.quickview.Quickview"){var k=this.byId("ovpCardHeader");if(k){k.addStyleClass("sapOvpCardNavigable")}}D=true}else{if(d){this.getView().addStyleClass("ovpNonNavigableItem");var k=this.byId("ovpCardHeader");if(k){k.$().removeAttr("role");k.addStyleClass("ovpNonNavigableItem")}var T=this.checkLineItemNavigation();if(!T){switch(d){case"sap.ovp.cards.v4.list.List":var A=this.getView().byId("listItem");if(A){A.setType("Inactive")}break;case"sap.ovp.cards.v4.table.Table":var A=this.getView().byId("tableItem");if(A){A.setType("Inactive")}break;case"sap.ovp.cards.v4.linklist.LinkList":if(!this.checkNavigationForLinkedList()){var A=this.getView().byId("ovpCLI");if(A){A.setType("Inactive")}}break}}else if(T&&(d==="sap.ovp.cards.list.List"||d==="sap.ovp.cards.table.Table")){D=true}if(d==="sap.ovp.cards.charts.analytical.analyticalChart"&&this.checkNavigation()){D=true}}}if(!D){var V=this.getView().byId("sapOvpCardInsights");if(V&&V.getVisible()){V.setVisible(false)}}var F=this.getView().byId("ovp_card_dropdown");var L=this.getView().byId("ovp_card_dropdown_label");if(F){F.addAriaLabelledBy(L.getId())}if(n.checkIfAPIIsUsed(this)){this.initKeyboardNavigation()}this._handleCountHeader();this._handleKPIHeader()},checkNavigation:function(){var e=this.getCardPropertiesModel();var t=this.getEntityType();if(t){if(e){var a=e.getProperty("/identificationAnnotationPath");var i=a;var r=e.getProperty("/contentFragment");if(r&&(r==="sap.ovp.cards.stack.Stack"||r==="sap.ovp.cards.quickview.Quickview")){var n=a?a.split(","):[];if(n&&n.length>1){if(r==="sap.ovp.cards.stack.Stack"){i=n[0]}else{i=n[1]}}}var o=t["@"+i];if(this.isNavigationInAnnotation(o)){return 1}if(e&&e.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var s=e.getProperty("/kpiAnnotationPath");if(t&&s){var l=t[s];if(l&&l.Detail){var d=l.Detail.SemanticObject&&l.Detail.SemanticObject.String;var p=l.Detail.Action&&l.Detail.Action.String;if(d&&p){return 1}}}}}}else if(e&&e.getProperty("/template")==="sap.ovp.cards.v4.linklist"&&e.getProperty("/staticContent")&&e.getProperty("/targetUri")){return 1}return 0},checkNavigationForLinkedList:function(){if(this.getEntityType()){var e=this.getEntityType();var t=e["com.sap.vocabularies.UI.v1.LineItem"];if(t&&(t[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||t[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){return true}}return false},checkLineItemNavigation:function(){if(this.getEntityType()){var e=this.getEntityType();var t=this.getCardPropertiesModel();if(t){var a=t.getProperty("/annotationPath");var i=e["@"+a];return this.isNavigationInAnnotation(i)}}},isNavigationInAnnotation:function(e){if(e&&e.length){for(var t=0;t<e.length;t++){var a=e[t];if(a.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||a.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||a.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1}}}return 0},checkAPINavigation:function(){var e=this.getOwnerComponent().getComponentData(),t=e.fnCheckNavigation&&typeof e.fnCheckNavigation==="function",a=t?e.fnCheckNavigation:null;if(a){if(a()){return true}}else{if(!this.checkHeaderNavForChart()&&this.checkNavigation()){return true}}return false},onHeaderClick:function(e){var t=e.ctrlKey||e.metaKey?b.constants.explace:b.constants.inplace;if(n.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){r.onHeaderClicked()}}else{var a=this.getCardPropertiesModel();var i=a.getProperty("/template");var o=a.getProperty("/targetUri");if(i=="sap.ovp.cards.v4.linklist"&&a.getProperty("/staticContent")!==undefined&&o){window.location.href=o}else if(a.getProperty("/staticContent")!==undefined&&o===""){return}else if(this.checkHeaderNavForChart()){return}else{this.doNavigation(this.getView().getBindingContext(),null,t)}}},checkHeaderNavForChart:function(){var e=this.getCardPropertiesModel();var t=e.getProperty("/template");var a=e.getProperty("/navigation");if(a=="noHeaderNav"&&(t=="sap.ovp.cards.charts.analytical"||"sap.ovp.cards.charts.smart.chart")){return true}else{return false}},resizeCard:function(e){x.info(e);if(this.resizeHandlerId){o.deregister(this.resizeHandlerId);this.resizeHandlerId=null}},_handleCountHeader:function(){var e=this.getView().byId("ovpCountHeader");if(e){var t=this.getCardItemsBinding();if(t){if(t.getLength()>0){this.setHeaderCounter(t,e)}t.attachDataReceived(function(){if(E.hidePlaceholderNeeded()){E.hidePlaceholder()}this.setHeaderCounter(t,e)}.bind(this));t.attachChange(function(){this.setHeaderCounter(t,e)}.bind(this))}}else{var t=this.getCardItemsBinding();if(t){t.attachDataReceived(function(){if(E.hidePlaceholderNeeded()){E.hidePlaceholder()}})}}},setHeaderCounter:function(e,t){var a=e.getLength();var i=e.getCurrentContexts().length;var r,n="";var o=s.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});i=parseFloat(i,10);var l=this.getOwnerComponent().getComponentData();if(l&&l.appComponent){var d=l.appComponent;if(d.getModel("ui")){var p=d.getModel("ui");if(p.getProperty("/containerLayout")!=="resizable"){if(a!==0){a=o.format(Number(a))}if(i!==0){i=o.format(Number(i))}}else{r=d.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(l.cardId)}}}if(i===0){n=""}else if(r&&r.dashboardLayout.showOnlyHeader){n=y.getText("Count_Header_Total",[a])}else if(a!=i){n=y.getText("Count_Header",[i,a])}t.setText(n);t.addEventDelegate({onAfterRendering:function(){var e=t.$();e.attr("aria-label",n)}})},_handleKPIHeader:function(){var e,t;if(this.getView()&&this.getView().getDomRef()){e=this.getView().getDomRef().getElementsByClassName("numericContentHbox");t=this.getView().getDomRef().getElementsByClassName("noDataSubtitle")}else{return}if(e||t){var a=this.getKPIBinding();if(a){a.attachDataReceived(function(i){var r=i.getParameter("data")&&i.getParameter("data").results&&i.getParameter("data").results[0];var n=a.getLength();if(e[0]){e[0].style.visibility=null;if(n===0){e[0].style.visibility="hidden"}else{this._setSubTitleWithUnitOfMeasure(r);e[0].style.visibility="visible"}}if(t.length!==0){t[0].style.display="none";if(n===0){t[0].style.display="flex"}}}.bind(this))}}},getKPIBinding:function(){var e=this.byId("kpiHBoxNumeric"),t=e&&e.getBindingInfo("items")&&e.getBindingInfo("items").binding;return t},_setSubTitleWithUnitOfMeasure:function(e){var t=this.getCardPropertiesModel();if(!!t){var a=t.getData();var i=this.getView().byId("SubTitle-Text");if(!!i){i.setText(a.subTitle);if(!!a&&!!a.entityType&&!!a.dataPointAnnotationPath){var n=t.getData().entityType;var o=a.dataPointAnnotationPath.split("/");var s=o.length===1?n[a.dataPointAnnotationPath]:n[o[0]][o[1]];var l;if(s&&s.Value&&s.Value.Path){l=s.Value.Path}else if(s&&s.Description&&s.Description.Value&&s.Description.Value.Path){l=s.Description.Value.Path}if(!!l){var d=r.getUnitColumn(l,n);var p;if(!!d&&!!e){p=e[d]}else{p=r.getUnitColumn(l,n,true)}var c=y.getText("SubTitle_IN");if(!!a.subTitle&&!!c&&!!p){i.setText(a.subTitle+" "+c+" "+p);var v=i.getAggregation("customData");if(v){var g;for(g in v){var h=v[g];if(h.getKey()==="aria-label"){h.setValue(a.subTitle+" "+c+" "+p);break}}}}}}}}},getCardItemsBinding:function(){},onActionPress:function(e){var t=e.getSource(),a=this._getActionObject(t),i=t.getBindingContext();if(a.type.indexOf("DataFieldForAction")!==-1){this.doAction(i,a)}else{this.doNavigation(i,a)}},_getActionObject:function(e){var t=e.getCustomData();var a={};for(var i=0;i<t.length;i++){a[t[i].getKey()]=t[i].getValue()}return a},doNavigation:function(e,t,a){if(!a){a=b.constants.inplace}if(!this.enableClick){return}this.enableClick=false;setTimeout(function(){this.enableClick=true}.bind(this),1e3);if(!this.oMainComponent){return}if(!t){t=this.getEntityNavigationEntries(e)[0]}var i=S({},e);var r=S({},t);var n=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,i,r);var o=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,i,r);var s;if(n){s=n}if(o){s=o}if(s){var l=s.type;if(l&&typeof l==="string"&&l.length>0){l=l.split(".").pop().split("/").pop().toLowerCase();switch(l){case"datafieldwithurl":s.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":s.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break}t=s}}function d(a){if(!a){a=b.constants.inplace}if(t){switch(t.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(e,t,a);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(e,t,false,a);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(e,t,false,a);break}}}if(!this.oMainComponent.oAppStatePromise){d.call(this,a)}else{this.oMainComponent.oAppStatePromise.then(d.bind(this,a))}},doNavigationWithUrl:function(e,t,a){if(!a){a=b.constants.inplace}if(!(sap.ushell&&sap.ushell.Container)){if(t&&t.url){T(t.url,"newWindow")}return}var i=sap.ushell.Container.getService("URLParsing");if(!i.isIntentUrl(t.url)){T(t.url,"newWindow")}else{var r=i.parseShellHash(t.url);var n=r.appSpecificRoute?true:false;this.doIntentBasedNavigation(e,r,n,a)}},fnHandleError:function(e){if(e instanceof c){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){p.show(y.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:y.getText("OVP_GENERIC_ERROR_TITLE")})}else{p.show(e.getErrorCode(),{title:y.getText("OVP_GENERIC_ERROR_TITLE")})}}},doCrossApplicationNavigation:function(e,t){var a="#"+e.semanticObject+"-"+e.action;if(e.params){var i=this.oCardComponent&&this.oCardComponent.getComponentData();var r=i&&i.appComponent;if(r){var n=r._formParamString(e.params);a=a+n}}var o=this;if(!sap.ushell.Container){return}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([a]).done(function(e){if(e[a].supported===true){if(!!t.params){if(typeof t.params=="string"){try{t.params=JSON.parse(t.params)}catch(e){x.error("Could not parse the Navigation parameters");return}}}var i=o.getOwnerComponent().getComponentData();var r=i?i.globalFilter:undefined;var n=r&&r.getUiState({allFilters:false});var s=n?JSON.stringify(n.getSelectionVariant()):"{}";r=JSON.parse(s);var l=o._getFilterPreference();r=o._removeFilterFromGlobalFilters(l,r);if(!t.params){t.params={}}if(!!r&&!!r.SelectOptions){for(var d=0;d<r.SelectOptions.length;d++){var p=r.SelectOptions[d].Ranges;if(!!p){var v=[];for(var g=0;g<p.length;g++){if(p[g].Sign==="I"&&p[g].Option==="EQ"){v.push(p[g].Low)}}t.params[r.SelectOptions[d].PropertyName]=v}}}sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(t)}else{var h=new c("NavigationHandler.isIntentSupported.notSupported");o.fnHandleError(h)}}).then(function(){x.error("Could not get authorization from isIntentSupported")})},doIntentBasedNavigation:function(e,t,a,i){if(!i){i=b.constants.inplace}var n=this.oCardComponent&&this.oCardComponent.getComponentData();if(n&&n.appComponent&&n.appComponent.ovpConfig&&n.appComponent.ovpConfig.isTeamsModeActive){i=b.constants.explace}if(sap.ushell&&!sap.ushell.Container){return}var o,s,l,d=e?e.getObject():null;var p=this.getCardPropertiesModel(),c=p.getProperty("/customParams");if(e&&typeof e.getAllData==="function"&&c){l=e.getAllData()}else if(p.getProperty("/staticContent")){l={iStaticLinkListIndex:t.iStaticLinkListIndex,bStaticLinkListIndex:true}}if(d&&d.__metadata){delete d.__metadata}var v=r.getNavigationHandler();if(v){if(t){o=this._getEntityNavigationParameters(d,l,e);s={target:{semanticObject:t.semanticObject,action:t.action},appSpecificRoute:t.appSpecificRoute,params:o.sNavSelectionVariant};var g={};if(o.sNavPresentationVariant){g.presentationVariant=o.sNavPresentationVariant}if(a){if(t&&t.semanticObject&&t.action){var h=this.getCardPropertiesModel().getProperty("/staticParameters");s.params=!!h?h:{};this.doCrossApplicationNavigation(t,s)}}else{v.navigate(s.target.semanticObject,s.target.action,s.params,null,this.fnHandleError,g,i)}}}},doAction:function(e,a){this.actionData=t.getActionInfo(e,a,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm()}else{this._callFunction()}},getEntityNavigationEntries:function(e,t){var a=[];var i=this.getEntityType();var r=this.getCardPropertiesModel();var n=r.getProperty("/template");if(!i){return a}if(!t&&!e){if(!this.oCardComponentData.settings.identificationAnnotationPath){var o=r.getProperty("/kpiAnnotationPath");if(o&&n==="sap.ovp.cards.charts.analytical"){t=o;var s=i[t];var d=s&&s.Detail;var p=d.SemanticObject&&d.SemanticObject.String;var c=d.Action&&d.Action.String;if(d.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){if(p&&c){a.push({type:d.RecordType,semanticObject:p,action:c,label:""})}else{x.error("Invalid Semantic object and action configured for annotation "+d.RecordType)}}}}}if(!t){var g=r.getProperty("/identificationAnnotationPath");var h=g?g.split(","):[];if(h&&h.length>1){t=h[0]}else{t=g}}var f=i["@"+t];if(Array.isArray(f)){f=l.sortCollectionByImportance(f);for(var u=0;u<f.length;u++){if(f[u].$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){a.push({type:f[u].$Type,semanticObject:f[u].SemanticObject,action:f[u].Action,label:f[u].Label?f[u].Label:null})}if(f[u].$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!f[u].Url.UrlRef){var m=this.getView().getModel();var C=m.getMetaModel();var y;if(e){y=e.getInterface(0).getPath()}else{y="/"+r.getInterface().getData().entitySet}var b=C.createBindingContext(y);var P=k.format(f[u].Url,{context:b});var I=new v({key:"url",value:P});if(e&&n==="sap.ovp.cards.charts.analytical"){m=e.getModel()}I.setModel(m);I.setBindingContext(e);var S=I.getValue();a.push({type:f[u].$Type,url:S,value:f[u].Value,label:f[u].Label?f[u].Label:null})}}}return a},getModel:function(){if(this.getView()){return this.getView().getModel()}},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel()}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||w(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties")}return this.oCardPropertiesModel},getEntitySet:function(){if(!this.entitySet){var e=this.getCardPropertiesModel().getProperty("/entitySet");this.entitySet=this.getMetaModel()&&this.getMetaModel().getObject("/"+e)}return this.entitySet},getEntityType:function(){if(!this.entityType){var e=this.getMetaModel();var t=this.getEntitySet();if(e&&t){var a=e.getData().$Annotations[t.$Type];var i={property:e.getObject("/"+t.$Type+"/")};this.entityType=b.merge(true,{},a,i)}}return this.entityType},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer")}return this.cardContentContainer},_processCustomParameters:function(e,t,a){var i=this.getCardPropertiesModel();if(!this.oMainComponent||!i){return}var r;if(e&&e.bStaticLinkListIndex){var n=i.getProperty("/staticContent");r=n[e.iStaticLinkListIndex]["customParams"];e=null}else{r=i.getProperty("/customParams")}if(!r||!this.oMainComponent.templateBaseExtension.provideCustomParameter||!this.oMainComponent.onCustomParams){return}var o=this.oMainComponent.templateBaseExtension.provideCustomParameter(r)?this.oMainComponent.templateBaseExtension.provideCustomParameter(r):this.oMainComponent.onCustomParams(r);if(!o||!N.checkIfFunction(o)){return}var s=S({},e);var l=S({},t);var d=o(s,l);if(!d||!Array.isArray(d)&&!I(d)){return}var p=I(d);if(p&&w(d)){return}var c=p&&(d.bIgnoreEmptyString||d.ignoreEmptyString);var v=p?d.aSelectionVariant||d.selectionVariant:d;if(!Array.isArray(v)){return}var g,h,f,u,m,C;h=v.length;for(g=0;g<h;g++){f=v[g];if(!f){continue}u=f.path;m=f.value1;C=f.value2;if(!u||typeof u!=="string"||u===""){x.error("Custom Variant property path '"+u+"' should be valid string");continue}if(!(m||m===0||m===false||m===""||m===""&&c)){continue}m=m.toString();C=C&&C.toString();if(m===""&&c){t.removeSelectOption(u)}if(e){delete e[u]}if(a){delete a[u]}t.addSelectOption(u,f.sign,f.operator,m,C)}if(c){this._removeEmptyStringsFromSelectionVariant(t)}return c},_getEntityNavigationParameters:function(e,t,n){var o={};var s,d,p;var c=this.getOwnerComponent().getComponentData();var v=c?c.globalFilter:undefined;var h=this.getCardPropertiesModel();var f=h&&h.getProperty("/staticContent");if(!f){var u=l.getCardSelections(this.getCardPropertiesModel());var m=u.filters;var y=u.parameters;var b=this.getEntityType();m&&m.forEach(function(e){e.path=e.path.replace("/",".");switch(e.operator){case g.NE:e.operator=g.EQ;e.sign="E";break;case g.Contains:e.operator="CP";var t=e.value1;e.value1="*"+t+"*";break;case g.EndsWith:e.operator="CP";var t=e.value1;e.value1="*"+t;break;case g.StartsWith:e.operator="CP";var t=e.value1;e.value1=t+"*"}});u.filters=m;if(n&&e&&e.hasOwnProperty("$isOthers")){var P=n.getOtherNavigationDimensions();for(var I in P){var S=P[I];for(var D=0;D<S.length;D++){u.filters.push({path:I,operator:"EQ",value1:S[D],sign:"E"})}}}y&&y.forEach(function(e){e.path=e.path.replace("/",".")});u.parameters=y;var N=l.getCardSorters(this.getCardPropertiesModel());if(e){var I,w=b&&b.property&&Object.keys(b.property);for(var D=0;D<w.length;D++){if(w[D].startsWith("$")){continue}I=w[D];var O=e[I];if(e.hasOwnProperty(I)){if(Array.isArray(e[I])&&e[I].length===1){o[I]=e[I][0]}else if(jQuery.type(O)!=="object"){o[I]=O}}}}var k=h&&h.getProperty("/kpiAnnotationPath");var T=h&&h.getProperty("/template");if(k&&T==="sap.ovp.cards.charts.analytical"){var A=b[k];var E=A&&A.Detail;if(E&&E.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){o["kpiID"]=A.ID.String}}d=N&&new i(N);s=this._buildSelectionVariant(v,u);p=h&&h.getProperty("/staticParameters")}else{var V=v&&v.getUiState({allFilters:false});var F=V?JSON.stringify(V.getSelectionVariant()):"{}";s=new a(F);var x=this._getFilterPreference();s=this._removeFilterFromGlobalFilters(x,s);if(f[t.iStaticLinkListIndex].params){p=f[t.iStaticLinkListIndex].params}else if(f[t.iStaticLinkListIndex].staticParameters){p=f[t.iStaticLinkListIndex].staticParameters}}var L;if(t&&!t.bStaticLinkListIndex){L=this._processCustomParameters(t,s,o)}else if(t&&t.bStaticLinkListIndex){L=this._processCustomParameters(t,s)}else{L=this._processCustomParameters(o,s)}var M=L?C.navigation.service.SuppressionBehavior.ignoreEmptyString:undefined;if(p){for(var I in p){if(!o.hasOwnProperty(I)){o[I]=p[I]}}}var _=r.getNavigationHandler();var H=_&&_.mixAttributesAndSelectionVariant(o,s.toJSONString(),M);if(!f){this._removeSensitiveAttributesFromNavSelectionVariant(b,H)}return{sNavSelectionVariant:H?H.toJSONString():null,sNavPresentationVariant:d?d.toJSONString():null}},_removeSensitiveAttributesFromNavSelectionVariant:function(e,t){for(var a=0;a<e.property.length;a++){if(e.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&e.property[a]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]){delete t._mSelectOptions[e.property[a].name]}}},_removeEmptyStringsFromSelectionVariant:function(e){var t=e.getParameterNames();for(var a=0;a<t.length;a++){if(e.getParameter(t[a])===""){e.removeParameter(t[a])}}var i=e.getSelectOptionsPropertyNames();for(a=0;a<i.length;a++){var r=e.getSelectOption(i[a]);for(var n=0;n<r.length;n++){if(r[n].Low===""&&!r[n].High){r.splice(n,1);n--}}if(r.length===0){e.removeSelectOption(i[a])}}return e},_checkIfCardFiltersAreValid:function(e,t){var a=true;if(e&&e.filterAll==="global"){a=false}else if(e&&e.globalFilter){if(e.globalFilter.indexOf(t)>=0){a=false}}return a},_getFilterPreference:function(){var e=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;var t;if(e&&e.mainComponent){t=e.mainComponent._getFilterPreference(e.cardId)}return t},_removeFilterFromGlobalFilters:function(e,t){var a=[];if(e&&e.filterAll==="card"){a=t.getSelectOptionsPropertyNames()}else if(e&&e.cardFilter){a=e.cardFilter}a.forEach(function(e){if(e!=="$.basicSearch"){t.removeSelectOption(e)}});return t},_buildSelectionVariant:function(e,t){var i=e&&e.getUiState({allFilters:false});var r=i?JSON.stringify(i.getSelectionVariant()):"{}";var n=new a(r);var o,s,l,d;var p=this._getFilterPreference();n=this._removeFilterFromGlobalFilters(p,n);var c=t.filters;var v=t.parameters;for(var g=0;g<c.length;g++){o=c[g];if(o.path&&o.operator&&typeof o.value1!=="undefined"){s=o.value1.toString();l=typeof o.value2!=="undefined"?o.value2.toString():undefined;if(this._checkIfCardFiltersAreValid(p,o.path)){n.addSelectOption(o.path,o.sign,o.operator,s,l)}}}var h,f,u;for(var m=0;m<v.length;m++){d=v[m];if(!d.path||!d.value){continue}h=d.path.split("/").pop();h=h.split(".").pop();if(h.indexOf("P_")===0){f=h;u=h.substr(2)}else{f="P_"+h;u=h}if(n.getParameter(f)){continue}if(n.getParameter(u)){continue}n.addParameter(h,d.value)}return n},_loadParametersForm:function(){var e=new h;e.setData(this.actionData.parameterData);var a=this;var i=new f("ovpCardActionDialog",{title:this.actionData.sFunctionLabel,afterClose:function(){i.destroy()}}).addStyleClass("sapUiNoContentPadding");var r=new u({text:this.actionData.sFunctionLabel,press:function(e){var r=t.getParameters(e.getSource().getModel(),a.actionData.oFunctionImport);i.close();a._callFunction(r,a.actionData.sFunctionLabel)}});var n=new u({text:"Cancel",press:function(){i.close()}});i.setBeginButton(r);i.setEndButton(n);var o=function(e){var i=t.mandatoryParamsMissing(e.getSource().getModel(),a.actionData.oFunctionImport);r.setEnabled(!i)};var s=t.buildParametersForm(this.actionData,o);i.addContent(s);i.setModel(e);i.open()},_callFunction:function(e,t){var a={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:e,forceSubmit:true,context:this.actionData.oContext,functionImport:this.actionData.oFunctionImport};var i=this;var n=new Promise(function(e,r){var n=i.actionData.oContext.getModel();var o;o="/"+a.functionImport.name;n.callFunction(o,{method:a.functionImport.httpMethod,urlParameters:a.urlParameters,batchGroupId:a.batchGroupId,changeSetId:a.changeSetId,headers:a.headers,success:function(t,a){e(a)},error:function(e){e.actionText=t;r(e)}})});n.then(function(e){return m.show(y.getText("Toast_Action_Success"),{duration:1e3})},function(e){var t=r.showODataErrorMessages(e);if(t===""&&e.actionText){t=y.getText("Toast_Action_Error")+' "'+e.actionText+'"'+"."}return p.error(t,{title:y.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:F.Inherit})})},setErrorState:function(){var e=this.getOwnerComponent();if(!e||!e.oContainer){return}var t=e.oContainer;var a=this.getCardPropertiesModel();var i={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:a.getProperty("/category"),title:a.getProperty("/title"),description:a.getProperty("/description"),entitySet:a.getProperty("/entitySet"),state:b.loadingState.ERROR,template:a.getProperty("/template")}}};A.create(i).then(function(a){t.setComponent(a);setTimeout(function(){e.destroy()},0)})},changeSelection:function(e,t,a){if(!t){var i=this.getView().byId("ovp_card_dropdown");e=parseInt(i.getSelectedKey(),10)}var r={};if(!t){r=this.getCardPropertiesModel().getProperty("/tabs")[e-1]}else{r=a.tabs[e-1]}var o={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:e};for(var s in r){o[s]=r[s]}if(n.checkIfAPIIsUsed(this)){n.recreateCard(o,this.getOwnerComponent().getComponentData())}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(o);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,e)}},getItemHeight:function(e,t,a){if(!!e){var i=e.getView().byId(t);var r=0;if(!!i){if(a){if(i.getItems()[0]&&i.getItems()[0].getDomRef()){r=N.getOuterHeight(i.getItems()[0].getDomRef())}}else{if(i.getDomRef()){r=N.getOuterHeight(i.getDomRef())}}}return r}},getHeaderHeight:function(){var e=this.getItemHeight(this,"ovpCardHeader"),t=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(t&&t.appComponent){var a=t.appComponent.getDashboardLayoutUtil(),i=a.getDashboardLayoutModel().getCardById(t.cardId);if(e!==0){i.dashboardLayout.headerHeight=e}}return e},refreshCardContent:function(){if(this.getKPIBinding()){this.getKPIBinding().refresh()}if(this.getCardItemsBinding()){this.getCardItemsBinding().refresh()}}})});
sap.ui.predefine("sap/ovp/cards/v4/generic/Component", ["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/core/mvc/XMLView","sap/ui/core/Core"],function(t,e,a,n,i,o,r,s,l,p,d,c){"use strict";return t.extend("sap.ovp.cards.v4.generic.Component",{metadata:{properties:{contentFragment:{type:"string"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Card"},headerExtensionFragment:{type:"string"},contentPosition:{type:"string",defaultValue:"Middle"},headerFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.Header"},footerFragment:{type:"string"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"},selectionAnnotationPath:{type:"string"},filters:{type:"object"},parameters:{type:"object"},addODataSelect:{type:"boolean",defaultValue:false},enableAddToInsight:{type:"boolean",defaultValue:false}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},setSelectionVariant:function(t,e){if(/^@/.test(t)){t=t.slice(1)}e.selectionAnnotationPath=t},setPresentationVariant:function(t,e,a){if(/^@/.test(t)){t=t.slice(1)}e.presentationAnnotationPath=t;var n=t.split("/");var i=n.length===1?a[t].Visualizations:a[n[0]][n[1]][n[2]].Visualizations;var o;for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.LineItem/.test(r)){e.annotationPath=r;break}}}for(o=0;o<i.length;o++){var r=i[o].AnnotationPath;if(r){if(/^@/.test(r)){r=r.slice(1)}if(/.Chart/.test(r)){e.chartAnnotationPath=r;break}}}},setDataPointAnnotationPath:function(t,e){if(/^@/.test(t)){t=t.slice(1)}e.dataPointAnnotationPath=t},getCustomPreprocessor:function(){},getPreprocessors:function(t){var i=this.getComponentData(),o=i.settings,l=i.model,p,d,c,u;if(o.description&&!o.subTitle){o.subTitle=o.description}p=l&&l.getMetaModel();if(l&&l.getODataVersion){var v="/"+o.entitySet;var d=p.getObject(v);u=p.createBindingContext(v);if(d&&d["$Type"]){c=p.createBindingContext("/"+d["$Type"])}}else{if(o.entitySet){var f=p.getODataEntitySet(o.entitySet);var h=p.getODataEntitySet(o.entitySet,true);d=p.getODataEntityType(f.entityType);u=p.createBindingContext(h);c=p.createBindingContext(d.$path)}}var y=this._getCardPropertyDefaults();var g=this._completeLayoutDefaults(y,o);var m,P;if(i.appComponent&&i.appComponent.getModel("ui")&&i.appComponent.getModel("ui").oData){var C=i.appComponent.getModel("ui").oData;m=C.showDateInRelativeFormat;P=C.disableTableCardFlexibility}else{if(i.showDateInRelativeFormat){m=i.showDateInRelativeFormat}if(i.disableTableCardFlexibility){P=i.disableTableCardFlexibility}}var b={metaModel:p,entityType:d,webkitSupport:n.browser.webkit,layoutDetail:g&&g.cardLayout?g.cardLayout.containerLayout:"fixed",showDateInRelativeFormat:m,disableTableCardFlexibility:P,cardId:i.cardId};if(!!i&&!!i.cardId){var D=i.mainComponent;var V=null;if(!!D){V=D._getCardFromManifest(i.cardId)?D._getCardFromManifest(i.cardId).template:null}else{V=i.template}if(!!V){b.template=V}}y.densityStyle=a._setCardpropertyDensityAttribute();if(i.errorReason){var I=i.errorReason;var A=I.getParameters?I.getParameters():I.mParameters;var S="sap-icon://message-error";if(A&&A.response){y.errorStatusCode=A.response.statusCode;y.errorStatusText=A.response.statusText;y.responseText=A.response.responseText;y.sMessageIcon=A.response.sIcon?A.response.sIcon:S}}if(g){b.cardLayout=g.cardLayout}if(y.state!=="Error"){if(o&&o.kpiAnnotationPath){var T=d[o.kpiAnnotationPath];var M=y.contentFragment;if(T&&(M==="sap.ovp.cards.v4.charts.analytical.analyticalChart"||M==="sap.ovp.cards.v4.charts.smart.analyticalChart")){var x=T.SelectionVariant&&T.SelectionVariant.Path?T.SelectionVariant.Path:o.kpiAnnotationPath+"/SelectionVariant";if(x){this.setSelectionVariant(x,o)}var L=T.Detail&&T.Detail.DefaultPresentationVariant&&T.Detail.DefaultPresentationVariant.Path?T.Detail.DefaultPresentationVariant.Path:o.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(L){this.setPresentationVariant(L,o,d)}var R=T.DataPoint&&T.DataPoint.Path?T.DataPoint.Path:o.kpiAnnotationPath+"/DataPoint";if(R){this.setDataPointAnnotationPath(R,o)}}}else if(o&&o.selectionPresentationAnnotationPath){var F=d[o.selectionPresentationAnnotationPath];if(F){var x=F.SelectionVariant&&F.SelectionVariant.Path;if(x){this.setSelectionVariant(x,o)}var L=F.PresentationVariant&&F.PresentationVariant.Path;if(L){this.setPresentationVariant(L,o,d)}}}}if(i.ovpCardsAsApi&&o.ignoreSelectionVariant){o.selectionAnnotationPath="";var B=[];for(var O=0;!!o.filters&&O<o.filters.length;O++){B.push({id:"headerFilterText--"+(O+1),index:O})}o.idForExternalFilters=B}if(!!b.entityType&&!!o.selectionAnnotationPath&&!!b.entityType[o.selectionAnnotationPath]){var w=b.entityType[o.selectionAnnotationPath].SelectOptions;for(var _=0;!!w&&_<w.length;_++){w[_].id="headerFilterText--"+(_+1)}b.entityType[o.selectionAnnotationPath].SelectOptions=w}if(b.template==="sap.ovp.cards.v4.linklist"&&!!o.staticContent){for(var k=0;k<o.staticContent.length;k++){o.staticContent[k].id="linkListItem--"+(k+1)}}else if(b.template==="sap.ovp.cards.v4.charts.analytical"){o.dataStep=o.dataStep?o.dataStep:10}y=s.merge(true,{},b,y,o);var U=new e(y);var E={xml:{bindingContexts:{entityType:c,entitySet:u},models:{device:a.deviceModel,entityType:p,entitySet:p,ovpMeta:p,ovpCardProperties:U,ovplibResourceBundle:t,ovpConstants:a.ovpConstantModel},ovpCardProperties:U,dataModel:l,_ovpCache:{}}};return r({},this.getCustomPreprocessor(),E)},_completeLayoutDefaults:function(t,e){var a={},n=this.getComponentData(),i=null,o=null;if(n.appComponent){i=n.appComponent.getOvpConfig()}if(!i){return null}if(i.containerLayout==="resizable"&&n.cardId&&t.contentFragment!=="sap.ovp.cards.quickview.Quickview"){o=n.appComponent.getDashboardLayoutUtil();var r=n.cardId;var s=o.aCards.filter(function(t){return t.id===r});a.cardLayout=s[0].dashboardLayout;a.cardLayout.containerLayout=i.containerLayout;a.cardLayout.iRowHeightPx=o.ROW_HEIGHT_PX;a.cardLayout.iCardBorderPx=o.CARD_BORDER_PX;a.cardLayout.headerHeight=s[0].dashboardLayout.headerHeight}return a},_getCardPropertyDefaults:function(){var t={};var e=this.getMetadata().getAllProperties();var a;for(var n in e){a=e[n];if(a.defaultValue!==undefined){t[a.name]=a.defaultValue}}return t},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var t=c.getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=t?new i({bundleUrl:t.oUrlInfo.url}):null}return this.ovplibResourceBundle},_getCacheKeys:function(){},createContent:function(){var t=this.getComponentData&&this.getComponentData();var e=t.model;var a;var n;var i=t&&t.mainComponent;var r=i&&i.oModelViewMap;var s=t&&t.modelName;var l=function(){if(e&&s){e.bIncludeInCurrentBatch=false;if(r&&s&&r[s]&&r[s][t.cardId]){delete r[s][t.cardId];if(Object.keys(r[s]).length>0){e.bIncludeInCurrentBatch=true}}}};if(t&&t.mainComponent){a=t.mainComponent._getOvplibResourceBundle()}else{a=this.getOvplibResourceBundle()}n=this.getPreprocessors(a);var p={preprocessors:n,type:o.XML,viewName:"sap.ovp.cards.v4.generic.Card"};var c=this._getCacheKeys();if(c&&c.length&&c.length>0){p.async=true;p.cache={keys:c}}var u=this._getCardPropertyDefaults().state;var v=t.cardId+(u?u:"Original");if(!u){v=v+(t.settings.selectedKey?"_Tab"+t.settings.selectedKey:"")}if(e&&e.bUseBatch&&!p.async){l()}var f=new d(t.containerId==="dialogCard"?undefined:v,p);if(p.async){var h=f.onControllerConnected;f.onControllerConnected=function(){if(e&&e.bUseBatch){l()}return h.apply(f,arguments)}}f.setModel(e);if(t.i18n){f.setModel(t.i18n,"@i18n")}f.setModel(n.xml.ovpCardProperties,"ovpCardProperties");f.setModel(a,"ovplibResourceBundle");return f}})});
sap.ui.predefine("sap/ovp/cards/v4/linklist/AnnotationHelper", ["sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ovp/cards/ovpLogger"],function(e,t,r,n){"use strict";var a=new n("OVP.v4.linklist.AnnotationHelper");function i(e){var t=[];var r,n;var a=e.getProperty("/sortBy");if(a){var i=e.getProperty("/sortOrder");if(i&&i.toLowerCase()!=="descending"){n=false}else{n=true}r={path:a,descending:n};t.push(r)}return t}function o(t,n){var i=[];var o=t.getProperty("/filters");if(o){i=i.concat(o)}var s=n&&n.SelectOptions;var f,l,u;if(s){for(var g=0;g<s.length;g++){f=s[g];l=f.PropertyName.$PropertyPath;for(var p=0;p<f.Ranges.length;p++){u=f.Ranges[p];if(u.Sign.$EnumMember){var d={path:l,operator:u.Option.$EnumMember.split("/")[1],value1:e.getPrimitiveValue(u.Low),value2:e.getPrimitiveValue(u.High),sign:u.Sign.$EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(d.sign==="E"&&d.operator!==r.EQ){a.error("Exclude sign is supported only with EQ operator");continue}if(d.sign==="E"&&d.operator===r.EQ){d.operator=r.NE;d.sign="I"}if(d.operator==="CP"&&d.sign==="I"){var c=r.Contains;var v=d.value1;if(v){var y=v.indexOf("*");var P=v.lastIndexOf("*");if(y>-1){if(y===0&&P!==v.length-1){c=r.EndsWith;v=v.substring(1,v.length)}else if(y!==0&&P===v.length-1){c=r.StartsWith;v=v.substring(0,v.length-1)}else{v=v.substring(1,v.length-1)}}}d.operator=c;d.value1=v}i.push(d)}}}}return i}function s(t,r,n){var a=t.getSetting("ovpCardProperties");var s=a.getProperty("/metaModel");var f=r;var l=s.getData();var u="/"+a.getProperty("/entitySet");var g;if(a.getProperty("/selectionAnnotationPath")){var p="@"+a.getProperty("/selectionAnnotationPath");g=l["$Annotations"][f.$Type][p]}var d;var c=a.getProperty("/layoutDetail");if(c==="resizable"){var v=a.getProperty("/cardLayout");if(v){if(a.getProperty("/listFlavor")==="standard"){var y="";for(var P in n){y+=P}var h=a.getProperty("/cardLayout/iRowHeigthPx");if(h===undefined){h=16}var m;if(a.getProperty("/densityStyle")==="cozy"){m=72;if(y.indexOf("Description")===-1&&(y.indexOf("Title")>0&&y.indexOf("ImageUrl")>0||y.indexOf("Title")>0&&y.indexOf("TypeImageUrl")>0)){m=56}else if(y.indexOf("Description")===-1&&y.indexOf("Title")>0){m=48}}else{m=60;if(y.indexOf("Description")===-1&&(y.indexOf("Title")>0&&y.indexOf("ImageUrl")>0||y.indexOf("Title")>0&&y.indexOf("TypeImageUrl")>0)){m=48}else if(y.indexOf("Description")===-1&&y.indexOf("Title")>0){m=40}}a.setProperty("/cardLayout/itemHeight",m);if(!a.getProperty("/defaultSpan")&&a.getProperty("/cardLayout/autoSpan")){d=a.getProperty("/cardLayout/noOfItems");var x=Math.ceil((d*m+a.getProperty("/cardLayout/headerHeight")+2*a.getProperty("/cardLayout/iCardBorderPx"))/h);a.setProperty("/cardLayout/noOfItems",x)}else{var O=Math.floor(v.rowSpan*h-a.getProperty("/cardLayout/headerHeight")-2*a.getProperty("/cardLayout/iCardBorderPx"));d=Math.floor(O/m)*v.colSpan}}}}else{d=6}var I=t.getSetting("ovpCardProperties"),S=I.getProperty("/parameters");if(g||!!S){if(g&&g.Parameters||!!S){u=e.resolveParameterizedEntitySet(t.getSetting("dataModel"),r,g,S)}}var L="{path: '"+u+"', length: "+d;var w=i(a);if(w.length>0){L=L+", sorter:"+JSON.stringify(w)}var C=o(a,g);if(C.length>0){L=L+", filters:"+JSON.stringify(C)}var E=e.checkFilterPreference(a);if(E){L=L+", parameters:{custom: {cardId: '"+a.getProperty("/cardId")+"'}}"}L=L+"}";return L}s.requiresIContext=true;function f(e,t){var r=e.getModel().getProperty("/baseUrl");return v(r,t)}f.requiresIContext=true;function l(e,r){var n=true;var a=t.format(e,r);if(a.toLowerCase().indexOf("icon")>0){n=false}return n}l.requiresIContext=true;function u(e){var t=true;if(!e){return null}else if(e.toLowerCase().indexOf("icon")>0){t=false}return t}function g(e){var t=new RegExp("http(s)?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?","i");return t.test(e)}function p(e){var t;if(e.hasOwnProperty("$Path")){t="{"+e.$Path+"}"}else{t=e}return t}function d(e){var t="{"+e+"}";return t}function c(e){if(e){return 1}return 0}function v(e,t){if(!t){return undefined}else if(t.lastIndexOf(e,0)===0||t.indexOf("://")>0){return t}else if(t.lastIndexOf("/",0)===0){return e+t}else{return e+"/"+t}}function y(e,t,r){var n;if(typeof r==="object"){n=r[e]}else{n=typeof r==="boolean"?r:true}return!t[e]&&n}function P(e,t,r){var n="";if(e){if(t&&r){n="#"+t+"-"+r;for(var a=0;a<e.length;a++){if(e[a].value===n){return e[a].name}}n=""}else{return e[0].name}}return n}function h(e,t){return v(e.baseUrl,t)}function m(e){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","")}function x(e){return e.$Path&&"{"+e.$Path+"}"||e||""}return{getSorters:i,getFilters:o,formatItems:s,formatUrl:f,isImageUrl:l,isImageUrlStaticData:u,isValidURL:g,getIconPath:p,formatString:d,linkedAction:c,formUrl:v,isVisible:y,getApplicationName:P,getImageUrl:h,contentRowIndex:m,getAvatarInitials:x}},true);
sap.ui.predefine("sap/ovp/cards/v4/linklist/Component", ["sap/ovp/cards/v4/generic/Component","sap/ovp/cards/v4/linklist/AnnotationHelper"],function(t,e){"use strict";return t.extend("sap.ovp.cards.v4.linklist.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.linklist.LinkList"},communicationPath:{type:"string",defaultValue:"com.sap.vocabularies.Communication.v1.Contact"},headerAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.HeaderInfo"},identificationAnnotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.Identification"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}})});
sap.ui.predefine("sap/ovp/cards/v4/linklist/LinkList.controller", ["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper","sap/ui/util/openWindow","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,jQuery,e,i,s,a,r,n,o,d,h,l,g,c,f){"use strict";var v=27,p=8,u=8,I=8,L="ovpLinkList",C="pictureCarousel",m="ovpCardHeader",y="sapMCrslActive";var P={onBeforeRendering:function(t){this.itemOnBeforeRendering(t)}};var _={onAfterRendering:function(t){this.itemOnAfterRendering(t)}};var b=new h("OVP.v4.linklist.LinkList");return t.extend("sap.ovp.cards.v4.linklist.LinkList",{onInit:function(){t.prototype.onInit.apply(this,arguments);this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false;var e=this;this.eventhandler=function(t,i,s){c.applyFiltersToV4Card(s,e)};this.GloabalEventBus=f.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}},onBeforeRendering:function(t){var e=this.getCardPropertiesModel();if(e.getProperty("/listFlavor")==="standard"&&!e.getProperty("/staticContent")){var i=this.byId("ovpCLI");if(i){i.addEventDelegate(P,this)}}},onAfterRendering:function(i){t.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var s=this.getCardPropertiesModel();var a=s.getProperty("/cardLayout/rowSpan");var r=s.getProperty("/cardLayout/colSpan");switch(s.getProperty("/listFlavor")){case"standard":if(s.getProperty("/staticContent")){if(r&&a){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList()}if(a===1){this._aLinkListIds=[L];this._setListColumnWidthInStandardCard(1)}else{this._itemOnEventBuildStandard(s,r,a,true)}}else{this._aLinkListIds=[L];this._setListColumnWidthInStandardCard(1)}}break;case"carousel":var n=this.byId(C);if(n.getId().indexOf(".")!==-1){var o=n.$();o.off("beforeSlide");o.on("beforeSlide",this.onBeforeSlide);o.trigger("beforeSlide",[1,1])}if(s.getProperty("/staticContent")){if(a&&!(!s.getProperty("/defaultSpan")&&s.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(a)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties()}else{n.addEventDelegate(_,this)}break;default:break}if(!e.checkIfAPIIsUsed(this)&&s.getProperty("/layoutDetail")==="resizable"){var d=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var h=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var g=document.getElementById(h);d.dashboardLayout.showOnlyHeader?g.classList.add("sapOvpMinHeightContainer"):g.classList.remove("sapOvpMinHeightContainer")}if(!e.checkIfAPIIsUsed(this)){var s=this.getCardPropertiesModel();var c=this.getOwnerComponent().getModel("ui").getData().cards;var f=[];var v=this.getEntitySet()&&this.getEntitySet()["$Type"];var p=v&&this.getMetaModel().getContext("/"+v);if(p){var u=p.getObject();this.selectionVaraintFilter=l.getSelectionVariantFilters(c,s,this.getEntityType())}var I=this.oCardComponentData.mainComponent;if(I.getGlobalFilter()){f=l._getEntityRelevantFilters(u,I.oGlobalFilter.getFilters())}if(I.getMacroFilterBar()){var m=I.aFilters;f=l._getEntityRelevantFilters(u,m)}f=l.mergeFilters(f,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(f)}if(this.getKPIBinding()){this.getKPIBinding().filter(f)}}},onBeforeSlide:function(t,e,i){if(t.target!=this){return}var s=this.id+"-pageIndicator",a=document.getElementById(s);var r=a.querySelector("[data-slide='"+e+"']");r.classList.remove(y);r=a.querySelector("[data-slide='"+i+"']");r.classList.add(y)},getCardItemsBinding:function(){var t=this.getView().byId("ovpLinkList");var e=this.getView().byId("pictureCarousel");if(t){return t.getBinding("items")}else if(e){return e.getBinding("pages")}else{return null}},attachingListenerToTheEventRefresh:function(){var t=this.getCardItemsBinding();var e=this.getCardPropertiesModel();if(t){if(!this._bListenerAttached){t.attachRefresh(function(){if(this._aLinkListIds){for(var t=1;t<this._aLinkListIds.length;t++){var e=this.byId(this._aLinkListIds[t]);var i=e.getItems().length;e.getItems().splice(0,i);e.destroy()}this._aLinkListIds.splice(0,this._aLinkListIds.length)}if(this._oListRest){this._oListRest.destroy()}}.bind(this));t.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(e.getProperty("/listFlavor")==="carousel"){var i=this.byId(C);i.addEventDelegate(_,this)}if(e.getProperty("/listFlavor")==="standard"){var s=t.getLength();if(s===0){var a=this.byId(L).$().parent();a.width("100%")}}}.bind(this))}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}this._bListenerAttached=true}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var t=this.getCardPropertiesModel();var e=t.getProperty("/cardLayout/rowSpan");var i=t.getProperty("/cardLayout/colSpan");if(e){this._setListHeightInStandardCard(e)}if(i){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}}},itemOnBeforeRendering:function(t){var e,i=this.getCardPropertiesModel();switch(i.getProperty("/listFlavor")){case"standard":if(!i.getProperty("/defaultSpan")&&!i.getProperty("/staticContent")&&i.getProperty("/cardLayout/autoSpan")){e=i.getProperty("/cardLayout/noOfItems")}else{e=i.getProperty("/cardLayout/rowSpan")}var s=i.getProperty("/cardLayout/colSpan");var a=this.byId(L);var r=a.getItems();for(var n=0;n<r.length;n++){r[n].removeEventDelegate(P)}if(this._bInitialLoad){this._itemOnEventBuildStandard(i,s,e,true)}else{this._itemOnEventBuildStandard(i,s,e,false)}break;case"carousel":b.info("FYI: currently nothing special to handle here");break;default:break}},getSpansWhenNoDefaultSpanMentioned:function(){var t=this.getCardPropertiesModel();var e=t.getProperty("/staticContent");var i=e&&e.length||this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()||0;var s=e?this.getItemHeight(this,L,true):t.getProperty("/cardLayout/itemHeight");var a=0;var r=this.byId(m);if(r){a=r.$().outerHeight()}var n=t.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((s*Math.min(i,6)+(a+u+I))/n)},itemOnAfterRendering:function(t){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var s=e.getProperty("/cardLayout/colSpan");switch(e.getProperty("/listFlavor")){case"standard":try{var a=this.byId(L);var r=a.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);r[r.length-1].removeEventDelegate(_)}catch(t){b.info("FYI: Unable to remove the delagted event at the last item of the last list")}if(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan")){i=this.getSpansWhenNoDefaultSpanMentioned()}if(i){this._setListHeightInStandardCard(i)}if(s){this._setListColumnWidthInStandardCard(this._iVisibleColums)}else{this._setListColumnWidthInStandardCard(1)}break;case"carousel":try{var n=this.byId(C);n.removeEventDelegate(_)}catch(t){b.info("FYI: Unable to remove the delagted event on the carousel")}if(i&&!(!e.getProperty("/defaultSpan")&&e.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(i)}else{this._setListHeightInCarouselCard(-1)}this._setCarouselImageProperties();break;default:break}this._bInitialLoad=false},_itemOnEventBuildStandard:function(t,e,i,a){var r;var n=this.byId(L);var o=this.getView().byId(this.getView().getId()+"--RestOfData");if(o){o.destroy()}if(a&&this._oListRest===undefined){this._oListRest=new s(this.getView().getId()+"--RestOfData",{})}this._aLinkListIds=[L];this._iAvailableItems=n.getItems().length;var d=t.getProperty("/cardLayout/items");if(d!==undefined){this._iNoOfItemsPerColumn=d;r=d;this._iVisibleColums=1}else{var h=t.getProperty("/staticContent")?this.getItemHeight(this,L,true):t.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(i);this._iNoOfItemsPerColumn=Math.floor(l/h);var g=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(g,e);r=this._iVisibleColums*this._iNoOfItemsPerColumn}if(r>this._iAvailableItems){r=this._iAvailableItems}else{for(var c=r;c<this._iAvailableItems;c++){n.getItems()[c].setVisible(false)}}if(this._iVisibleColums>1){var f=this.byId("ovpListRow");var v=this._iNoOfItemsPerColumn;var p=0;for(var u=this._iNoOfItemsPerColumn;u<r;u++){if(v>=this._iNoOfItemsPerColumn){v=0;p++;var I=L+p;var C=new s(this.getView().getId()+"--"+I,{showSeparators:n.getProperty("showSeparators")});this._aLinkListIds.push(I);if(n.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){C.addStyleClass("sapOvpLinkListStandardPaddingCozy")}else{C.addStyleClass("sapOvpLinkListStandardPaddingCompact")}f.addItem(C)}C.addItem(n.getItems()[this._iNoOfItemsPerColumn]);v++}if(C){var m=C.getItems();m[m.length-1].addEventDelegate(_,this)}}else{if(a){this.itemOnAfterRendering(null)}else{var y=n.getItems();y[y.length-1].addEventDelegate(_,this)}}},resizeCard:function(t){var e=this.getCardPropertiesModel();e.setProperty("/cardLayout/rowSpan",t.rowSpan);e.setProperty("/cardLayout/colSpan",t.colSpan);switch(e.getProperty("/listFlavor")){case"standard":this._resizeStandard(t,e);break;case"carousel":this._resizeCarousel(t);break;default:break}if(this.resizeHandlerId){a.deregister(this.resizeHandlerId);this.resizeHandlerId=null}var i=this.getView().byId("ovpCardContentContainer").getDomRef();if(i){if(t.showOnlyHeader){i.classList.add("sapOvpContentHidden")}else{i.classList.remove("sapOvpContentHidden")}}},_mergeAllTheDataInOneList:function(){var t=this._aLinkListIds.length;var e=this.getView().byId("ovpLinkList");var i=-1;for(var s=0;s<e.getItems().length;s++){if(!e.getItems()[s].getVisible()){i=s;break}}for(var a=1;a<t;a++){var r=this.getView().byId(this._aLinkListIds[a]);var n=r.getItems().length;for(var o=0;o<n;o++){if(i===-1){e.addItem(r.getItems()[0])}else{e.insertItem(r.getItems()[0],i);i++}}r.destroy()}},_resizeStandard:function(t,e){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var i=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var s=this._oListRest.getItems().length;try{for(var a=0;a<s;a++){i.addItem(this._oListRest.getItems()[0])}}catch(t){b.info("Error: "+t)}for(var r=0;r<i.getItems().length;r++){i.getItems()[r].setVisible(true)}if(!i){var n=this.byId(L).$().parent();n.width("100%");var o=e.getProperty("/cardLayout/rowSpan");if(o){this._setListHeightInStandardCard(o)}}var d=i.getBindingInfo("items");var h=e.getProperty("/staticContent")?this.getItemHeight(this,L,true):e.getProperty("/cardLayout/itemHeight");var l=this._getListHeightInStandardCard(t.rowSpan);var g=Math.floor(l/h)*t.colSpan;this._bInitialLoad=false;jQuery(this.getView().$()).find(".sapOvpWrapper").css({height:l+"px"});if(d){if(g>this._iAvailableItems&&d.length<=this._iAvailableItems){d.length=g;i.bindItems(d);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh()}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}else{this._itemOnEventBuildStandard(e,t.colSpan,t.rowSpan,false)}}},_resizeCarousel:function(t){this._setListHeightInCarouselCard(t.rowSpan);this._setCarouselImageProperties()},_setListHeightInCarouselCard:function(t){var e=0,i=this.byId(C);if(t!==-1){var s=0;var a=this.byId(m);if(a){s=a.$().outerHeight()}var r=this.getCardPropertiesModel();var n=r.getProperty("/cardLayout/iRowHeightPx");e=t*n-(s+v+p);i.$().height(e+16)}else{var o=i.$().width(),d=null,h=i.getPages(),l=0;for(var g=0;g<h.length;g++){d=h[g];if(d&&d.getItems().length>1){l=Math.max(l,d.getItems()[0].$().outerHeight())}}var c=i.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=o+(l+c);i.$().height(e)}},_setCarouselImageProperties:function(){var t=this.byId(C),e=t.getPages(),i=t.$().height(),s=e.length>1?t.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,a=null,r=null,o=0,d,h;for(var l=0;l<e.length;l++){a=e[l];if(a){d=a.getAggregation("items")&&a.getItems()[0];if(d){o=d.hasStyleClass("sapOvpCarouselContentHeader")?d.$().outerHeight():0;h=a.getItems()[a.getItems().length-1];r=h.getAggregation("items")&&h.getItems()[0];if(r instanceof n){this._setCarouselImageHeight(r,i-o-s)}}}}},_setCarouselImageHeight:function(t,e){var i=t.getDomRef().naturalHeight;if(i!==0){i<e?t.setHeight(i+"px"):t.setHeight(e+"px")}},_setListHeightInStandardCard:function(t){var e=0;var i;var s;i=this.byId(L);if(i){e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}if(this._aLinkListIds){for(var a=1;a<this._aLinkListIds.length;a++){i=this.byId(this._aLinkListIds[a]);e=this._getListHeightInStandardCard(t);s=i.$().parent();s.height(e)}}},_getListHeightInStandardCard:function(t){var e=0;var i=this.getCardPropertiesModel();if(t){var s=0;var a=this.byId(m);if(a){s=a.$().outerHeight()}var r=i.getProperty("/cardLayout/iRowHeightPx");e=t*r-(s+u+I)}return e},_setListColumnWidthInStandardCard:function(t){var e;var i;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var a=0;a<this._aLinkListIds.length;a++){e=this.byId(this._aLinkListIds[a]);i=e.$().parent();s=100/t+"%";i.width(s)}}else{e=this.byId(this._aLinkListIds[0]);if(e){i=e.$().parent();i.width(s)}}}},onLinkListItemPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("targetUri");var a=t.getSource().data("openInNewWindow");var r=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(s){s=this.buildUrl(r,s);if(a==="true"){g(s,"newWindow")}else{window.location.href=s}}}},onLinkListActionPressLocalData:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onFuImpSuccess:function(t){r.show(o.getText("Toast_Action_Success"),{duration:3e3})},onFuImpFailed:function(t){r.show(o.getText("Toast_Action_Error"),{duration:3e3})},onLinkListItemPress:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=this.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkPopover:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":s=t.getSource().getParent().getAggregation("items")[0];break;case"carousel":s=t.getSource().getParent().getAggregation("items")[0];break;default:break}var a=this.getCardPropertiesModel();if(a.getProperty("/listFlavor")==="carousel"){var r=this.byId(C);r.addEventDelegate(_,this)}s.bindElement(t.getSource().getBindingContext().getPath());s.openBy(t.getSource());if(!this._bListeningPopOver){s.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter()}.bind(this))}this._bListeningPopOver=true}},onLinkListLineItemUrl:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s,a="com.sap.vocabularies.UI.v1.LineItem",r=this.entityType[a][0].Url;if(r.hasOwnProperty("String")){s=r.String}else{var n=this.getEntityNavigationEntries(t.getSource().getBindingContext(),a)[0];s=n.url}if(s){window.location.href=s}else{b.info("LinkList Standard Card: No Navigation on line item")}}},onLinkNavigationSingleTarget:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=this.getEntityNavigationEntries(t.getSource().getBindingContext(),undefined);this.doNavigation(t.getSource().getBindingContext(),a[0],s)}},onLinkNavigation:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{if(sap.ushell.Container.getService("CrossApplicationNavigation")){var s=t.getSource().getBindingContext();if(s.getProperty("SemanticObject")){var a={target:{semanticObject:s.getProperty("SemanticObject"),action:s.getProperty("SemanticAction")}};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(a)}}}},buildUrl:function(t,e){if(e.lastIndexOf(t,0)===0||e.indexOf("://")>0){return e}else if(e.lastIndexOf("/",0)===0){return t+e}else{return t+"/"+e}},onLinkListActionPress:function(t){if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=t.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:this.onFuImpSuccess.bind(this),error:this.onFuImpFailed.bind(this)})}},onLinkListSemanticObjectPressLocalData:function(t){var s=d.bCRTLPressed?d.constants.explace:d.constants.inplace;d.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var a=parseInt(t.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[a].semanticObject&&this._oStaticContent[a].action){var n={semanticObject:this._oStaticContent[a].semanticObject,action:this._oStaticContent[a].action,iStaticLinkListIndex:a};this.doIntentBasedNavigation(null,n,false,s)}else{r.show(o.getText("Toast_Action_Error"),{duration:3e3})}}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
sap.ui.predefine("sap/ovp/cards/v4/list/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.list.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.list.List"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/v4/list/List.controller", ["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/cards/Filterhelper","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,jQuery,e,a,i,s,r,n,o,d,l,h){"use strict";var g=new n("OVP.v4.list.List");return t.extend("sap.ovp.cards.v4.list.List",{counter:0,arrayLength:0,minMaxModel:{},onInit:function(){t.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new e;this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel");var a=this;this.eventhandler=function(t,e,i){l.applyFiltersToV4Card(i,a)};this.GloabalEventBus=h.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",a.eventhandler)}},onContactDetailsLinkPress:function(t){var e,a,i;a=t.getSource();e=a.getParent().getAggregation("items")[0];i=a.getBindingContext();if(!i){return}e.bindElement(i.getPath());e.openBy(a)},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var e=this.getCardPropertiesModel().getProperty("/imageSupported");var i=this.getCardPropertiesModel().getProperty("/densityStyle");if(e){var s=this.byId("ovpList");s.attachUpdateFinished(function(){this._addImageCss(i)}.bind(this))}if(!a.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var r=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var n=Math.max(this.getHeaderHeight(),r.dashboardLayout.headerHeight);var o=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var l=document.getElementById(o);if(!r.dashboardLayout.autoSpan){l.getElementsByClassName("sapOvpWrapper")[0].style.height=r.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX-(n+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";r.dashboardLayout.autoSpan=true}if(r.dashboardLayout.showOnlyHeader){l.classList.add("sapOvpMinHeightContainer")}}if(!a.checkIfAPIIsUsed(this)){var h=this.getCardPropertiesModel();var g=this.getOwnerComponent().getModel("ui").getData().cards;var p=[];var c=this.getEntitySet()&&this.getEntitySet()["$Type"];var v=c&&this.getMetaModel().getContext("/"+c);if(v){var u=v.getObject();this.selectionVaraintFilter=d.getSelectionVariantFilters(g,h,this.getEntityType())}var m=this.oCardComponentData.mainComponent;if(m.getGlobalFilter()){p=d._getEntityRelevantFilters(u,m.oGlobalFilter.getFilters())}if(m.getMacroFilterBar()){var f=m.aFilters;p=d._getEntityRelevantFilters(u,f)}p=d.mergeFilters(p,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(p)}if(this.getKPIBinding()){this.getKPIBinding().filter(p)}}},_addImageCss:function(t){var e=this.byId("ovpList");var a=e.getItems();var i=false;var s=e.getDomRef().getAttribute("class");if(t==="cozy"){s=s+" sapOvpListImageCozy"}else{s=s+" sapOvpListImageCompact"}e.getDomRef().setAttribute("class",s);a.forEach(function(t){if(t.getIcon().indexOf("icon")!=-1){i=true}});a.forEach(function(e){var a=e.getDomRef();var s;if(a&&a.children[0]&&a.children[0].children[0]){s=a.children[0].children[0]}var r=e.getDescription();var n=e.getIcon();var o=i;var d=e.getTitle();var l=d.split(" ").map(function(t){return t?t[0].toUpperCase():""}).join("").substring(0,2);if(n!=""&&n.indexOf("icon")==-1){i=false}if(i&&a.children[0]){jQuery(a.children[0]).addClass("sapOvpIconListItem")}else if(a.children[0]){jQuery(a.children[0]).addClass("sapOvpImageListItem")}if(s&&t==="cozy"&&i===false){if(s){var h=s.getAttribute("class");h=h+" sapOvpImageCozy";s.setAttribute("class",h)}}var g="";if(i===true&&r===""){g=t==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy"}else if(i===false&&r===""){g=t==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy"}else{g=t==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy"}e.addStyleClass(g);if(a&&a.children[0]&&n===""&&a.children[0].id!=="ovpIconImagePlaceHolder"){var p=document.createElement("div");p.innerText=l;p.setAttribute("id","ovpIconImagePlaceHolder");p.className=i===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(i===false&&t==="cozy"){p.className=p.className+" sapOvpImageCozy"}a.insertBefore(p,a.children[0])}i=o})},onListItemPress:function(t){var e=r.bCRTLPressed?r.constants.explace:r.constants.inplace;r.bCRTLPressed=false;if(a.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var s=this.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),s[0],e)}},getCardItemsBinding:function(){var t=this.getView().byId("ovpList");return t&&t.getBinding("items")},_getMinMaxObjectFromContext:function(t){this.counter++;var e=this.getEntitySet(),a=this.getCardPropertiesModel().getProperty("/annotationPath");a="@"+a;var i=this.getMetaModel().getData(a).$Annotations[e.$Type][a];var r="/"+e.$Type+"/@"+a;var n=this.getMetaModel().createBindingContext(r),o={minValue:0,maxValue:0};if(s.isFirstDataPointPercentageUnit(n,i)){o.minValue=0;o.maxValue=100;return o}var d=s.getFirstDataPointValue(n,i),l=this.getView().byId("ovpList"),h=l.getBinding("items"),g=h.getCurrentContexts();for(var p=0;t?p<t:p<g.length;p++){var c=g[p].getValue(d);var v=parseFloat(c,10);if(v<o.minValue){o.minValue=v}else if(v>o.maxValue){o.maxValue=v}}return o},_updateMinMaxModel:function(t){var e=this._getMinMaxObjectFromContext(t);this.minMaxModel.setData({minValue:e.minValue,maxValue:e.maxValue});this.minMaxModel.refresh();return e},returnBarChartValue:function(t){this._updateMinMaxModel();var e=parseFloat(t,10);return e},getCardItemBindingInfo:function(){var t=this.getView().byId("ovpList");return t.getBindingInfo("items")},resizeCard:function(t,e){var a,i,s;try{var r=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),n=this.getCardItemBindingInfo(),o=this.getHeaderHeight(),d=this.getView().byId("ovpCardContentContainer").getDomRef();if(t.showOnlyHeader){d.classList.add("sapOvpContentHidden");a=0}else{d.classList.remove("sapOvpContentHidden");s=o+e.dropDownHeight;i=t.rowSpan*t.iRowHeightPx-s;a=Math.abs(Math.floor(i/e.itemHeight));r.style.height=t.rowSpan*t.iRowHeightPx+"px"}d.style.height=t.rowSpan*t.iRowHeightPx-(o+2*t.iCardBorderPx)+"px";if(a!==n.length){n.length=a;t.noOfItems=n.length;this.getCardItemsBinding().refresh()}else{this._handleCountHeader()}}catch(t){g.warning("OVP resize: "+this.cardId+" catch "+t.toString())}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
sap.ui.predefine("sap/ovp/cards/v4/table/Component", ["sap/ovp/cards/v4/generic/Component"],function(e){"use strict";return e.extend("sap.ovp.cards.v4.table.Component",{metadata:{properties:{contentFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},controllerName:{type:"string",defaultValue:"sap.ovp.cards.v4.table.Table"},annotationPath:{type:"string",defaultValue:"com.sap.vocabularies.UI.v1.LineItem"},countHeaderFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.CountHeader"},headerExtensionFragment:{type:"string",defaultValue:"sap.ovp.cards.v4.generic.KPIHeader"}},version:"1.108.11",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}})});
sap.ui.predefine("sap/ovp/cards/v4/table/Table.controller", ["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper","sap/ovp/filter/FilterUtils","sap/ui/core/Core"],function(t,jQuery,e,i,a,o,n,s,r){"use strict";var l=new o("OVP.table.Table");return t.extend("sap.ovp.cards.v4.table.Table",{onInit:function(){t.prototype.onInit.apply(this,arguments);var e=this;this.eventhandler=function(t,i,a){s.applyFiltersToV4Card(a,e)};this.GloabalEventBus=r.getEventBus();if(this.oMainComponent&&(this.oMainComponent.isMacroFilterBar||this.oMainComponent.oGlobalFilter)){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",e.eventhandler)}},onColumnListItemPress:function(t){var o=a.bCRTLPressed?a.constants.explace:a.constants.inplace;a.bCRTLPressed=false;if(e.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){i.onContentClicked(t)}}else{var n=this.getEntityNavigationEntries(t.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(t.getSource().getBindingContext(),n[0],o)}},onContactDetailsLinkPress:function(t){if(this.oPopover){this.oPopover.setVisible(false)}var e,i;e=t.getSource();this.oPopover=e.getParent().getAggregation("items")[0];i=e.getBindingContext();if(!i){return}this.oPopover.bindElement(i.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(e)},getCardItemsBinding:function(){var t=this.getView().byId("ovpTable");return t.getBinding("items")},onAfterRendering:function(){t.prototype.onAfterRendering.apply(this,arguments);var i=this.getOwnerComponent().getComponentData();var a=this.getCardPropertiesModel();if(!e.checkIfAPIIsUsed(this)&&a.getProperty("/layoutDetail")==="resizable"){var o=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(i.cardId);var s=Math.max(this.getHeaderHeight(),o.dashboardLayout.headerHeight);var r=this.oDashboardLayoutUtil.getCardDomId(i.cardId);var l=document.getElementById(r);if(!o.dashboardLayout.autoSpan){l.getElementsByClassName("sapOvpWrapper")[0].style.height=o.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+1-(s+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";o.dashboardLayout.autoSpan=true}if(o.dashboardLayout.showOnlyHeader){l.classList.add("sapOvpMinHeightContainer")}this.addColumnInTable(jQuery(l),{colSpan:o.dashboardLayout.colSpan})}else{var d=this.getView().byId("ovpTable");var h=d.getAggregation("columns");for(var g=0;g<3;g++){if(h[g]){h[g].setStyleClass("sapTableColumnShow").setVisible(true)}}}if(!e.checkIfAPIIsUsed(this)){var a=this.getCardPropertiesModel();var p=this.getOwnerComponent().getModel("ui").getData().cards;var v=[];var c=this.getEntitySet()&&this.getEntitySet()["$Type"];var u=c&&this.getMetaModel().getContext("/"+c);if(u){var f=u.getObject();this.selectionVaraintFilter=n.getSelectionVariantFilters(p,a,this.getEntityType())}var C=this.oCardComponentData.mainComponent;if(C.getGlobalFilter()){v=n._getEntityRelevantFilters(f,C.oGlobalFilter.getFilters())}if(C.getMacroFilterBar()){var y=C.aFilters;v=n._getEntityRelevantFilters(f,y)}v=n.mergeFilters(v,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(v)}if(this.getKPIBinding()){this.getKPIBinding().filter(v)}}},getCardItemBindingInfo:function(){var t=this.getView().byId("ovpTable");return t.getBindingInfo("items")},addColumnInTable:function(t,e){if(e.colSpan>=1){if(jQuery(t).find("tr").length!=0){var i=r.byId(jQuery(t).find(".sapMList").attr("id"));var a=i.getAggregation("columns");var o=e.colSpan;var n=o+1;for(var s=0;s<6;s++){if(a[s]){if(s<=n){a[s].setStyleClass("sapTableColumnShow").setVisible(true)}else{a[s].setStyleClass("sapTableColumnHide").setVisible(false)}}}}}},resizeCard:function(t,e){var i,a,o,a;try{var n=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),s=this.getCardItemBindingInfo(),r=this.getHeaderHeight(),d=this.getView().byId("ovpCardContentContainer").getDomRef();if(t.showOnlyHeader){d.classList.add("sapOvpContentHidden");i=0}else{d.classList.remove("sapOvpContentHidden");o=r+e.dropDownHeight;a=t.rowSpan*t.iRowHeightPx-o-e.itemHeight;i=Math.abs(Math.floor(a/e.itemHeight));n.style.height=t.rowSpan*t.iRowHeightPx+"px"}d.style.height=t.rowSpan*t.iRowHeightPx-(r+2*t.iCardBorderPx)+"px";this.addColumnInTable(this.getView().getDomRef(),t);if(i!==s.length){s.length=i;t.noOfItems=s.length;this.getCardItemsBinding().refresh()}else{this._handleCountHeader()}}catch(t){l.warning("OVP resize: "+this.cardId+" catch "+t.toString())}},onExit:function(){t.prototype.onExit.apply(this,arguments)}})});
sap.ui.predefine("sap/ovp/filter/FilterUtils", ["sap/ovp/cards/Filterhelper","sap/ovp/app/FilterHelper","sap/ovp/cards/ovpLogger","sap/ui/base/SyncPromise","sap/ui/model/FilterOperator"],function(e,t,r,a,i){"use strict";var l={applyFiltersToV2Card:function(e,a){var i=a.getEntityType(),l=a.oMainComponent.getMacroFilterBar()||a.oMainComponent.getGlobalFilter(),n=l&&l.getModel(),o=a.getView().getModel("ovpCardProperties"),s=o&&o.getProperty("/entityType"),p=s&&s.name;if(i&&n&&p){var g=t.getEntityRelevantFilters(i,e,p,n);var d=t.mergeFilters(g,a.selectionVaraintFilter);try{var c=a.getCardItemsBinding();if(c){c.filter(d)}if(a.getKPIBinding()){a.getKPIBinding().filter(d)}}catch(e){var f=new r("sap.ovp.filter.filterUtils");f.error(e)}}},applyFiltersToV4Card:function(t,a){if(a.getView().getModel().getMetaModel().getData){var i=a.getView().getModel().getMetaModel().getData();var l=a.getView().getModel("ovpCardProperties").getProperty("/entityType");var n=l&&l["$Type"];if(n){var o=e._getEntityRelevantFilters(i[n],t);o=e.mergeFilters(o,a.selectionVaraintFilter);try{a.getCardItemsBinding().filter(o);if(a.getKPIBinding()){a.getKPIBinding().filter(o)}}catch(e){var s=new r("sap.ovp.filter.filterUtils");s.error(e)}}}},applyFiltersToV4AnalyticalCard:function(t,a){if(a.getView().getModel().getMetaModel().getData){var i=a.getView().getModel().getMetaModel().getData();var l=a.getView().getModel("ovpCardProperties").getData().entityType.$Type;var n=e._getEntityRelevantFilters(i[l],t);n=e.mergeFilters(n,a.selectionVaraintFilter);var o=a.getCardItemsBinding();try{if(n&&n.aFilters){this.fetchFilter(n,o,{}).then(function(e){var t=o.mParameters.$apply.split("/").length>1?a.getCardItemsBinding().mParameters.$apply.split("/")[1]:a.getCardItemsBinding().mParameters.$apply.split("/")[0];o.mParameters.$apply="filter("+e+")/"+t;o.setAggregation()}).catch(function(e){var t=new r("sap.ovp.filter.filterUtils- v4Analytical card case");t.error(e)})}else{if(o.mParameters.$apply.split("/").length>1){o.mParameters.$apply=o.mParameters.$apply.split("/")[1];o.setAggregation()}}if(a.getKPIBinding()){a.getKPIBinding().filter(n)}}catch(e){var s=new r("sap.ovp.filter.filterUtils");s.error(e)}}},fetchFilter:function(e,t,r,l){var n;var o=t.oModel.getMetaModel();var s=o.getMetaContext(t.oModel.resolve(t.sPath,t.oContext));if(!e){return a.resolve()}if(e.aFilters){return a.all(e.aFilters.map(function(a){return this.fetchFilter(a,t,r,e.bAnd)},this)).then(function(t){return this.wrap(t.join(e.bAnd?" and ":" or "),l&&!e.bAnd)}.bind(this))}n=o.resolve(this.replaceLambdaVariables(e.sPath,r),s);return o.fetchObject(n).then(function(t){var a,o,s;if(!t){throw new Error("Type cannot be determined, no metadata for path: "+n)}s=e.sOperator;if(s===i.All||s===i.Any){a=e.oCondition;o=e.sVariable;if(s===i.Any&&!a){return e.sPath+"/any()"}r=Object.create(r);r[o]=this.replaceLambdaVariables(e.sPath,r);return this.fetchFilter(a,r).then(function(t){return e.sPath+"/"+e.sOperator.toLowerCase()+"("+o+":"+t+")"})}return this.getSingleFilterValue(e,t.$Type,l)}.bind(this))},wrap:function(e,t){return t?"("+e+")":e},replaceLambdaVariables:function(e,t){var r=e.split("/");r[0]=t[r[0]];return r[0]?r.join("/"):e},getSingleFilterValue:function(t,r,a){var l,n,o,s;function p(e){return o?"tolower("+e+")":e}o=r==="Edm.String"&&t.bCaseSensitive===false;n=p(decodeURIComponent(t.sPath));s=p(e.formatLiteral(t.oValue1,r));switch(t.sOperator){case i.BT:l=n+" ge "+s+" and "+n+" le "+p(e.formatLiteral(t.oValue2,r));break;case i.NB:l=this.wrap(n+" lt "+s+" or "+n+" gt "+p(e.formatLiteral(t.oValue2,r)),a);break;case i.EQ:case i.GE:case i.GT:case i.LE:case i.LT:case i.NE:l=n+" "+t.sOperator.toLowerCase()+" "+s;break;case i.Contains:case i.EndsWith:case i.NotContains:case i.NotEndsWith:case i.NotStartsWith:case i.StartsWith:l=t.sOperator.toLowerCase().replace("not","not ")+"("+n+","+s+")";break;default:throw new Error("Unsupported operator: "+t.sOperator)}return l}};return{applyFiltersToV2Card:l.applyFiltersToV2Card,applyFiltersToV4Card:l.applyFiltersToV4Card,applyFiltersToV4AnalyticalCard:l.applyFiltersToV4AnalyticalCard,fetchFilter:l.fetchFilter,wrap:l.wrap,replaceLambdaVariables:l.replaceLambdaVariables,getSingleFilterValue:l.getSingleFilterValue}});
sap.ui.predefine("sap/ovp/flexibility/DashboardLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,a,o,r,n,d,s,i,l,u,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=o.getView(),d=e.getContent(),i=d.newAppDescriptor,l=r.byId(i.id),u=o.getLayout(),g=u.getDashboardLayoutModel(),C=u.getDashboardLayoutUtil(),p=g.getCardById(i.id),c=C.calculateCardProperties(i.id),y=i.settings.defaultSpan&&i.settings.defaultSpan.rows,f=i.settings.defaultSpan&&i.settings.defaultSpan.cols,h=g.getColCount()+1,S=[],v=false;e.setRevertData(d.oldAppDescriptor);if(l){if(i.settings.tabs){var b=i.settings.selectedKey;if(!b||b<1){b=1}n.tabFields.forEach(function(e){var t=i.settings.tabs[b-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete i.settings[e]}if(t){i.settings[e]=t}})}if(typeof y==="number"){if(y===0){p.dashboardLayout.showOnlyHeader=true;y=Math.ceil((c.headerHeight+2*C.CARD_BORDER_PX)/C.getRowHeightPx())}else{p.dashboardLayout.showOnlyHeader=false;if(i.template==="sap.ovp.cards.list"||i.template==="sap.ovp.cards.table"){p.dashboardLayout.noOfItems=y}}}if(f){if(p.dashboardLayout.column+f>h){p.dashboardLayout.maxColSpan=f;f=h-p.dashboardLayout.column}v=true}if(v){g._arrangeCards(p,{row:y,column:f},"resize",S);g._removeSpaceBeforeCard(S);C._positionCards(g.aCards);v=false}var m=l.getComponentInstance();m.destroy()}o.recreateRTAClonedCard(i);return true},revertChange:function(e,t,a){var o=s.getApp(),r=o.getView(),n=e.getRevertData(),d=r.byId(n.id),i=o.getLayout(),l=i.getDashboardLayoutModel(),u=i.getDashboardLayoutUtil(),g=l.getCardById(n.id),C=n.settings.defaultSpan&&n.settings.defaultSpan.rowSpan,p=n.settings.defaultSpan&&n.settings.defaultSpan.colSpan,c=n.settings.defaultSpan&&n.settings.defaultSpan.showOnlyHeader,y=[];if(d){g.dashboardLayout.rowSpan=C;g.dashboardLayout.colSpan=p;g.dashboardLayout.showOnlyHeader=c;l._arrangeCards(g,{row:C,column:p},"resize",y);l._removeSpaceBeforeCard(y);u._positionCards(l.aCards);var f=d.getComponentInstance();f.destroy()}o.recreateRTAClonedCard(n);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,n){var C=s.getApp(),p=C.getView(),c=e.getContent();e.setRevertData(c.id);var y=new o(p.getId()+"--"+c.id),f=n.appComponent,h=C.getUIModel(),S=h.getProperty("/cards"),v=C.getLayout(),b=v.getDashboardLayoutUtil(),m=v.getDashboardLayoutModel(),L=c.id.indexOf("newStaticLinkListCard_N")!==-1&&!d.checkClonedCard(c.id),R=c.id.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(c.id),D=c.id.indexOf("newCard_N")!==-1&&!d.checkClonedCard(c.id),w=d.newDataSource;if(R){var M=c.settings.selectedKPI,U=new u(M.ODataURI,{annotationURI:M.ModelURI,defaultCountMode:g.None}),_=c.model;if(c.settings["sAnnoKey"]){d.setDataSources(c.settings["sAnnoKey"],M.ModelURI)}p.setModel(U,_);f.setModel(U,_)}if(w&&!f.getModel(c.model)){var I=new u(d.newDataSourceModel.serviceURI,{annotationURI:d.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),_=c.model;d.setDataSources(d.newDataSourceModel.serviceAnnotation,d.newDataSourceModel.serviceAnnotationURI);p.setModel(I,_);f.setModel(I,_)}c.settings.baseUrl=C._getBaseUrl();if(L||R||D){c.settings.newCard=true;m._setCardSpanFromDefault(c);c.dashboardLayout.row=1;c.dashboardLayout.column=1}else{c.settings.cloneCard=true}var O=-1,A;for(A=0;A<S.length;A++){if(c.id.lastIndexOf(s._getLayerNamespace()+"."+S[A].id,0)===0){O=A;var E=m.getCardById(S[A].id);c.dashboardLayout=l({},E.dashboardLayout);var T=c.dashboardLayout.column+c.dashboardLayout.colSpan;c.dashboardLayout.column=T<m.getColCount()?T:1;break}}S.splice(O+1,0,c);b.getCards().splice(O+1,0,c);h.setProperty("/cards",S);v.insertContent(y,O+1);setTimeout(function(){var e=a.getOverlay(y);e.setSelected(true);e.focus();var t=L||R||D?i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):i.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);C.recreateRTAClonedCard(c);return true},revertChange:function(e,t,a){var o=a.appComponent,r=s.getApp(),n=r.getView(),i=e.getRevertData(),l=e.getContent();var u=n.byId(i),g=r.getUIModel(),C=g.getProperty("/cards"),p=r.getLayout(),c=p.getDashboardLayoutUtil(),y=p.getDashboardLayoutModel(),f=c.getCards();var h=-1,S,v,b=-1;for(S=0;S<C.length;S++){if(i===C[S].id){h=S;break}}C.splice(h,1);for(v=0;v<f.length;v++){if(i===f[v].id){b=v;break}}f.splice(b,1);y._removeSpaceBeforeCard();g.setProperty("/cards",C);if(u){var m=u.getComponentInstance(),L=m.getComponentData(),R=L.cardId.indexOf("newKPICard_N")!==-1&&!d.checkClonedCard(i);if(R){var D=L.modelName,w=n.getModel(D);w.destroy();if(l.settings["sAnnoKey"]){d.removeDataSources(l.settings["sAnnoKey"])}n.setModel(null,D);o.setModel(null,D)}m.destroy()}p.removeContent(h);u.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];e.setRevertData(r);i._arrangeCards(l,{row:r.dashboardLayout[u].row,column:r.dashboardLayout[u].column},"drag",g);i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);return true},revertChange:function(e,t,a){var o=s.getApp(),r=e.getContent(),n=o.getLayout(),d=n.getDashboardLayoutUtil(),i=n.getDashboardLayoutModel(),l=i.getCardById(r.cardId),u="C"+i.getColCount(),g=[];i._arrangeCards(l,{row:r.dashboardLayout[u].oldRow,column:r.dashboardLayout[u].oldColumn},"drag",g);if(r.dashboardLayout[u].oldColSpan){i._arrangeCards(l,{row:r.dashboardLayout[u].rowSpan,column:r.dashboardLayout[u].oldColSpan},"resize",g)}i._removeSpaceBeforeCard(g);d._positionCards(i.aCards);e.resetRevertData();return true},completeChangeContent:function(e,t,a){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,dragOrResize:e.PersonalizationDefaultConfig}},true);
sap.ui.predefine("sap/ovp/flexibility/EasyScanLayout.flexibility", ["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/CountMode"],function(e,t,n,o,r,a,i,s,d,l,C,g){"use strict";return{moveControls:{changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},unhideControl:e.UnhideControlConfig,unhideCardContainer:e.UnhideCardContainer,hideCardContainer:e.HideCardContainer,removeCardContainer:t,editCardSettings:{changeHandler:{applyChange:function(e,t,n){var o=s.getApp(),r=o.getView(),i=e.getContent(),d=i.newAppDescriptor,l=r.byId(d.id);e.setRevertData(i.oldAppDescriptor);if(l){if(d.settings.tabs){var C=d.settings.selectedKey;if(!C||C<1){C=1}a.tabFields.forEach(function(e){var t=d.settings.tabs[C-1][e];if(e!=="entitySet"||e==="entitySet"&&t){delete d.settings[e]}if(t){d.settings[e]=t}})}var g=l.getComponentInstance();g.destroy()}o.recreateRTAClonedCard(d);return true},revertChange:function(e,t,n){var o=s.getApp(),r=o.getView(),a=e.getRevertData(),i=r.byId(a.id);if(i){var d=i.getComponentInstance();d.destroy()}o.recreateRTAClonedCard(a);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},newCardSettings:{changeHandler:{applyChange:function(e,t,a){var l=s.getApp(),u=l.getView(),p=e.getContent();e.setRevertData(p.id);var c=new o(u.getId()+"--"+p.id),v=a.appComponent,f=l.getUIModel(),y=f.getProperty("/cards"),S=l.getLayout(),R=p.id.indexOf("newStaticLinkListCard_N")!==-1&&!i.checkClonedCard(p.id),m=p.id.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(p.id),M=p.id.indexOf("newCard_N")!==-1&&!i.checkClonedCard(p.id),U=i.newDataSource;if(m){var h=p.settings.selectedKPI,A=new C(h.ODataURI,{annotationURI:h.ModelURI,defaultCountMode:g.None}),D=p.model;if(p.settings["sAnnoKey"]){i.setDataSources(p.settings["sAnnoKey"],h.ModelURI)}u.setModel(A,D);v.setModel(A,D)}if(U&&!v.getModel(p.model)){var E=new C(i.newDataSourceModel.serviceURI,{annotationURI:i.newDataSourceModel.serviceAnnotationURI,defaultCountMode:g.None}),D=p.model;i.setDataSources(i.newDataSourceModel.serviceAnnotation,i.newDataSourceModel.serviceAnnotationURI);u.setModel(E,D);v.setModel(E,D)}p.settings.baseUrl=l._getBaseUrl();if(R||m||M){p.settings.newCard=true}else{p.settings.cloneCard=true}var O=-1,P;for(P=0;P<y.length;P++){if(p.id.lastIndexOf(s._getLayerNamespace()+"."+y[P].id,0)===0){O=P;break}}y.splice(O+1,0,p);f.setProperty("/cards",y);S.insertContent(c,O+1);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus();var t=R||m||M?d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");r.show(t,{duration:1e4})},0);l.recreateRTAClonedCard(p);return true},revertChange:function(e,t,n){var o=n.appComponent,r=s.getApp(),a=r.getView(),d=e.getRevertData(),l=e.getContent();var C=a.byId(d),g=r.getUIModel(),u=g.getProperty("/cards"),p=r.getLayout();var c=-1,v;for(v=0;v<u.length;v++){if(d===u[v].id){c=v;break}}u.splice(c,1);g.setProperty("/cards",u);if(C){var f=C.getComponentInstance(),y=f.getComponentData(),S=y.cardId.indexOf("newKPICard_N")!==-1&&!i.checkClonedCard(d);if(S){var R=y.modelName,m=a.getModel(R);m.destroy();if(l.settings["sAnnoKey"]){i.removeDataSources(l.settings["sAnnoKey"])}a.setModel(null,R);o.setModel(null,R)}f.destroy()}p.removeContent(c);C.destroy();e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},dragAndDropUI:{changeHandler:{applyChange:function(e,t,o){var r=s.getApp(),a=e.getContent(),i=l({},a),d=r.getUIModel(),C=d.getProperty("/cards"),g=r.getLayout(),u;u=i.position;i.position=i.oldPosition;i.oldPosition=u;e.setRevertData(i);u=C[a.position];C[a.position]=C[a.oldPosition];C[a.oldPosition]=u;d.setProperty("/cards",C);var p=g.getContent()[a.position],c=g.getContent()[a.oldPosition];g.removeContent(c);g.insertContent(c,a.position);g.removeContent(p);g.insertContent(p,a.oldPosition);setTimeout(function(){var e=n.getOverlay(c);e.setSelected(true);e.focus()},0);return true},revertChange:function(e,t,o){var r=s.getApp(),a=e.getRevertData(),i=r.getUIModel(),d=i.getProperty("/cards"),l=r.getLayout(),C;C=d[a.position];d[a.position]=d[a.oldPosition];d[a.oldPosition]=C;i.setProperty("/cards",d);var g=l.getContent()[a.position],u=l.getContent()[a.oldPosition];l.removeContent(u);l.insertContent(u,a.position);l.removeContent(g);l.insertContent(g,a.oldPosition);setTimeout(function(){var e=n.getOverlay(u);e.setSelected(true);e.focus()},0);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}},viewSwitch:e.PersonalizationDefaultConfig,visibility:e.PersonalizationDefaultConfig,position:e.PersonalizationDefaultConfig}},true);
sap.ui.predefine("sap/ovp/flexibility/changeHandler/CardChangeHandler", ["sap/ovp/cards/CommonUtils"],function(e){"use strict";function r(){return{changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}}}function t(r){var t=r.getContent();if(!t.card){var n={card:{id:e.removePrefixAndReturnLocalId(t.id),idIsLocal:true}};return n}return t}var n={changeHandler:{applyChange:function(r,t,n){var a=e.getApp();a.appendIncomingDeltaChange(r);return},completeChangeContent:function(e,r,t){return},revertChange:function(e,r,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var a={changeHandler:"default",layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};var i=r();var o=r();i.changeHandler.applyChange=function(e,r,n){e.setContent(t(e));return l(e,r,n,false)};i.changeHandler.revertChange=function(e,r,t){return d(e,r,t,true)};i.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.removedElement.id);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i)})};o.changeHandler.applyChange=function(e,r,n){e.setContent(t(e));return l(e,r,n,true)};o.changeHandler.revertChange=function(e,r,t){return d(e,r,t,false)};o.changeHandler.completeChangeContent=function(r,t,n){var a=e.removePrefixAndReturnLocalId(t.revealedElementId);var i={card:{id:a,idIsLocal:true}};return Promise.resolve().then(function(){r.setContent(i)})};function d(r,t,n,a){var i=n.modifier,o=n.appComponent,d=e.getApp(),l=d.getUIModel(),s=d.getLayout(),u=o.createId(r.getRevertData().id),C=i.bySelector(r.getRevertData(),o);i.setVisible(C,a);r.resetRevertData();if(l.getProperty("/containerLayout")==="resizable"){var c=s.getDashboardLayoutUtil();c.updateCardVisibility([{id:c.getCardIdFromComponent(u),visibility:a}])}s.rerender();return Promise.resolve(true)}function l(r,t,n,a){var i=n.modifier,o=e.getApp(),d=o&&o.getView();if(!d){throw new Error("Main view is not initialized yet.")}var l=o.getUIModel(),s=o.getLayout(),u=r.getContent(),C=n.appComponent,c=C.createId(u.card.id),g=i.bySelector(u.card,C,d);var f=o.deltaChanges.filter(function(e){return e.getSelector().id===u.card.id&&e.getChangeType()==="visibility"});if(o.aManifestOrderedCards){for(var v=0;v<o.aManifestOrderedCards.length;v++){var p=c;var h=p.indexOf("---")+3;var m=p.substring(h);if(o.aManifestOrderedCards[v].id===m.split("--")[1]){o.oView.oController.aManifestOrderedCards[v].visibility=r.getChangeType()==="hideCardContainer"?false:true}}}if(!o.aManifestOrderedCards||f.length===0){r.setRevertData(u.card);i.setVisible(g,a);if(l.getProperty("/containerLayout")==="resizable"){var y=s.getDashboardLayoutUtil();if(y.aCards){y.updateCardVisibility([{id:y.getCardIdFromComponent(c),visibility:a}])}o.appendIncomingDeltaChange(r)}if(a){var I=d.byId(c);if(!I.getComponentInstance()&&o.bFinishedCardsCreationProcess){var R=o._getCardFromManifest(o._getCardId(c));o.recreateRTAClonedCard(R)}}s.rerender();return Promise.resolve(true)}return Promise.resolve(false)}return{HideCardContainer:i,UnhideCardContainer:o,PersonalizationDefaultConfig:n,UnhideControlConfig:a}});
sap.ui.predefine("sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler", ["sap/ovp/cards/CommonUtils","sap/ui/fl/changeHandler/condenser/Classification"],function(e,n){"use strict";var t={changeHandler:{applyChange:function(n,t,i){var r=e.getApp();r.appendIncomingDeltaChange(n);return},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:n.LastOneWins,uniqueKey:e.getSelector().id+"-"+e.getChangeType()}},completeChangeContent:function(e,n,t){return},revertChange:function(e,n,t){return}},layers:{CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};return{viewSwitch:t,visibility:t,position:t,dragOrResize:t}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/flexibility/changeHandler/RemoveCardContainer", ["sap/m/MessageToast","sap/ovp/app/resources","sap/ovp/cards/CommonUtils"],function(e,t,r){"use strict";var a={changeHandler:{},layers:{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,USER:true}};a.changeHandler.applyChange=function(a,i,o){var n=o.modifier,s=r.getApp(),d=s.getView(),p=s.getUIModel(),g=p.getProperty("/cards"),l=s.getLayout(),u=a.getContent().id,c=s._getCardId(u),C=o.appComponent,y={id:u,isLocalId:false},f=n.bySelector(y,C,d),v;for(v=0;v<g.length;v++){if(g[v].id===c){break}}var b=g.splice(v,1);p.setProperty("/cards",g);a.setRevertData({id:u,oCard:b[0],index:v});n.setVisible(f,false);if(p.getProperty("/containerLayout")==="resizable"){var m=l.getDashboardLayoutUtil();if(m.aCards){m.updateCardVisibility([{id:m.getCardIdFromComponent(u),visibility:false}])}}var h=t.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[f.getComponentInstance().getComponentData().settings.title]);e.show(h,{duration:1e4});l.rerender();return true};a.changeHandler.revertChange=function(e,t,a){var i=a.modifier,o=r.getApp(),n=o.getUIModel(),s=n.getProperty("/cards"),d=o.getLayout(),p=e.getRevertData(),g=i.bySelector(p.id);s.splice(p.index,0,p.oCard);n.setProperty("/cards",s);i.setVisible(g,true);e.resetRevertData();if(n.getProperty("/containerLayout")==="resizable"){var l=d.getDashboardLayoutUtil();l.updateCardVisibility([{id:l.getCardIdFromComponent(p.id),visibility:true}])}d.rerender();return true};a.changeHandler.completeChangeContent=function(e,t,r){return};return a},true);
sap.ui.predefine("sap/ovp/helpers/V4/MetadataAnalyzer", [],function(){"use strict";function t(t,e){var n=t.getObject("/");for(var r in n){if(typeof n[r]==="object"&&n[r].$Type===e){return r}}}return{getEntitySetName:t}},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/library", ["sap/ui/core/Core","sap/ui/core/library","sap/ui/layout/library","sap/ui/generic/app/library","sap/m/library","sap/f/library","sap/ui/comp/library","sap/ui/rta/library","sap/suite/ui/microchart/library","sap/viz/library","sap/fe/placeholder/library","sap/fe/macros/library","sap/insights/library","sap/suite/ui/commons/library"],function(a){"use strict";var i=a.initLibrary({name:"sap.ovp",dependencies:["sap.ui.core","sap.ui.layout","sap.ui.generic.app","sap.m","sap.f","sap.ui.comp","sap.ui.rta","sap.suite.ui.microchart","sap.viz","sap.fe.placeholder","sap.fe.macros","sap.insights","sap.suite.ui.commons","sap.ui.integration"],types:[],interfaces:[],controls:[],elements:[],version:"1.108.11",extensions:{flChangeHandlers:{"sap.ovp.ui.EasyScanLayout":"sap/ovp/flexibility/EasyScanLayout","sap.ovp.ui.DashboardLayout":"sap/ovp/flexibility/DashboardLayout"},"sap.ui.support":{diagnosticPlugins:["sap/ovp/support/DiagnosticsTool/DiagnosticsTool"]}}});return i});
sap.ui.predefine("sap/ovp/placeholder/placeholderHelper", ["sap/base/util/UriParameters","sap/ui/core/Placeholder"],function(e,l){"use strict";var a={isPlaceHolderEnabled:function(){var l=window["sap-ushell-config"]&&window["sap-ushell-config"].apps&&window["sap-ushell-config"].apps.placeholder&&window["sap-ushell-config"].apps.placeholder.enabled,a=e.fromQuery(window.location.search).get("sap-ui-xx-placeholder");return l===false||a==="false"?false:true},getPlaceholderInfo:function(){return new l({html:"sap/fe/placeholder/view/PlaceholderOVP.fragment.html",autoClose:true})},showPlaceholder:function(e){if(this.isPlaceHolderEnabled()&&!this.bPlaceholderShown){this.navContainer=e;this.bPlaceholderShown=true;e.showPlaceholder({placeholder:this.getPlaceholderInfo()})}},hidePlaceholder:function(){if(this.bPlaceholderShown){var e=this.navContainer;e&&e.hidePlaceholder();this.bPlaceholderShown=false}},hidePlaceholderNeeded:function(){return this.bPlaceholderShown}};return a});
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/DiagnosticsTool", ["sap/ui/thirdparty/jquery","sap/ui/core/support/Plugin","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ovp/support/lib/CommonChecks","sap/ovp/support/lib/CommonMethods","sap/ui/core/mvc/XMLView","sap/ui/core/IntervalTrigger","sap/ui/core/Core"],function(jQuery,e,t,n,a,i,o,s,r){"use strict";var u="sapUiSupportFioriElementsPluginOVP";function p(e){var p,l,f=u+"-View",c=[],d=r.getEventBus(),m,v,g,h,S,w=10,R;function b(){return u}function O(e){var n=t.getDateInstance({source:{pattern:"YYYYMMdd"},style:"short"});return n.format(n.parse(String(e).substring(0,8)))}function A(e){var t=window.location.origin;var n=window.location.pathname;var i=e||a.getComponentIDByStructure();if(i){m=a.getManifestPath(i);if(m){var o=a.getManifestURL(t,n,m);if(o){return o}}}return""}function D(e,t,n,a,i){if(e==="string"){c.push({order:n,name:t,type:e,value:a});return true}else if(e==="link"){c.push({order:n,name:t,type:e,value:a,target:i});return true}else if(e==="group"){c.push({order:n,name:t,type:e});return true}return false}function E(e,t,n){return D("string",e,t,n,"")}function I(e,t,n,a){return D("link",e,t,n,a)}function j(e,t){return D("group",e,t,"","")}function C(e){if(!(e&&i.hasObjectContent(e))){return undefined}if(!(e.getMetadata()&&i.hasObjectContent(e.getMetadata()))){return undefined}var t=e.getMetadata();if(!(t.getManifest()&&i.hasObjectContent(t.getManifest()))){return undefined}return t.getManifest()}function N(e){c=[];E("Error",0,e);H()}function y(e){var t=a.getUI5VersionInfo();try{if(t&&i.hasObjectContent(t)){E("OpenUI5 Version",e,t.version+" (built at "+O(t.buildTimestamp)+")");return true}else{E("OpenUI5 Version",e,"ERROR: OpenUI5 version is not available!");return false}}catch(n){E("OpenUI5 Version",e,t&&t.version+', detailed UI5 version info is not available! Possible reason: missing file "sap-ui-version.json"');return true}}function P(e){var t=i.getApplicationName(window.location.href);if(t){I("Application URL",e,"#"+t,window.location.href);return true}else{E("Application URL",e,"ERROR: Could not extract application name (#semanticObject-action) from URL!");return false}}function L(e){if(m&&v){var t=m;if(m.indexOf("./")===0){t=m.substring(2,m.length)}I("Manifest",e,t,v);return true}else{E("Manifest",e,"ERROR: Could not generate link to manifest.json! Possible reason: The application did not finish loading or is not a Fiori Elements application.");return false}}function U(e){if(!h){return false}var t=a.getRegistrationIDsByManifest(h);if(t&&Array.isArray(t)&&t.length>0){E(t.length>1?"Fiori IDs":"Fiori ID",e,i.concatStrings(t));return true}return false}function F(e){var t=a.getApplicationComponentByManifest(h);if(t){E("Application Component (ACH)",e,t);return true}else{E("Application Component (ACH)",e,"ERROR: Path /sap.app/ach not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function M(e){var t=a.getApplicationIDByManifest(h);if(t){E("Application ID",e,t);return true}else{E("Application ID",e,"ERROR: Path /sap.app/id not found in manifest.json! Possible reason: Invalid manifest.json");return false}}function V(e){if(h){var t=a.getFloorplanByManifest(h)}else{t=a.getFloorplanByStructure()}if(!a.isValidFloorplan(t)){t=a.mFloorplans.UNKNOWN}if(t===a.mFloorplans.UNKNOWN){E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" (ERROR: Unknown floorplan! Possible reason: Invalid manifest.json)");return false}else{E("Floorplan Component (ACH)",e,a.getTicketComponentForFloorplan(t)+" ("+t+")");return true}}function T(e,t){if(!(h&&i.hasObjectContent(h))){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("OData Service Metadata",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!h["sap.app"].dataSources[e].uri){E("OData Service Metadata",t,"ERROR: Data source URI not found at /sap.app/dataSources/"+e+"/uri in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].uri;if(n.lastIndexOf("/")!==n.length-1){n+="/"}n+="$metadata";I("OData Metadata",t,n,window.location.origin+n);return true}function k(e,t){if(!(h&&i.hasObjectContent(h)&&g)){return false}if(!(h["sap.app"]&&h["sap.app"].dataSources&&h["sap.app"].dataSources[e])){E("Annotations",t,"ERROR: Data source "+e+" not found at /sap.app/dataSources/"+e+" in manifest.json! Possible reason: Invalid manifest.json");return false}if(!(h["sap.app"].dataSources[e].settings&&h["sap.app"].dataSources[e].settings.annotations&&h["sap.app"].dataSources[e].settings.annotations!==[])){E("Annotations",t,"ERROR: Data source "+e+" has no annotations at /sap.app/dataSources/"+e+"/settings/annotations in manifest.json! Possible reason: Invalid manifest.json");return false}var n=h["sap.app"].dataSources[e].settings.annotations;n=n.reverse();for(var a in n){if(!n.hasOwnProperty(a)){continue}var o=n[a];if(h["sap.app"].dataSources[o]){var s=h["sap.app"].dataSources[o].uri;if(!s){continue}var r="";var u="";if(s.indexOf("/")===0){u="Backend Annotation";r=window.location.origin}else{u="Local Annotation";r=g;if(r.lastIndexOf("/")!==r.length-1){r+="/"}}u+=" (Prio. "+parseInt(parseInt(a,10)+1,10)+")";I(u,t,h["sap.app"].dataSources[o].uri,r+h["sap.app"].dataSources[o].uri)}}return true}function B(e){if(!h){return}var t=0;function n(e){t+=.01;return e+t}if(!(h["sap.ui5"]&&h["sap.ui5"].models)){E("Data Sources",e,"ERROR: Path /sap.ui5/models not found in manifest.json! Possible reason: Invalid manifest.json");return}var a=h["sap.ui5"].models;var o=[];for(var s in a){if(!a.hasOwnProperty(s)){continue}if(a[s]&&a[s].dataSource&&a[s].dataSource!==""){var r=false;for(var u in o){if(!o.hasOwnProperty(u)){continue}if(o[u].dataSource===a[s].dataSource){r=true;break}}var p=s===""?"mainService":s;if(!r){o.push({models:[p],dataSource:a[s].dataSource})}else{o[u].models.push(p)}}}if(o.length===0){E("Data Sources",e,"ERROR: No models with data sources found in manifest.json! Possible reason: Invalid manifest.json");return}for(var l in o){if(!o.hasOwnProperty(l)){continue}if(!(h["sap.app"]&&h["sap.app"].dataSources)){E("Data Sources",e,"ERROR: No data sources found at /sap.app/dataSources in manifest.json! Possible reason: Invalid manifest.json");return}if(!h["sap.app"].dataSources[o[l].dataSource]){E("Data Sources",e,"ERROR: Data source "+o[l].dataSource+" not found at /sap.app/dataSources/"+o[l].dataSource+" in manifest.json! Possible reason: Invalid manifest.json");return}j(i.concatStrings(o[l].models),n(e));T(o[l].dataSource,n(e));k(o[l].dataSource,n(e))}}function x(e){var t=r.byId(e);if(t){return t}else{return new o(e,{viewName:"sap.ovp.support.DiagnosticsTool.view.DiagnosticsTool",viewData:{plugin:p}})}}function G(){var e=x(f);e.placeAt(u);var t=new n;e.setModel(t,"data")}function K(){p=this;l=window.location.hash.slice(1);if(e.isToolStub()){if(!e.hasListeners(u+"SetData")){e.attachEvent(u+"SetData",z)}if(!e.hasListeners(u+"UpdateStatus")){e.attachEvent(u+"UpdateStatus",Q)}if(!e.hasListeners(u+"ShowDataRefreshed")){e.attachEvent(u+"ShowDataRefreshed",Z)}window.fioriElementsPluginID=u;G()}else{if(!e.hasListeners(u+"GetData")){e.attachEvent(u+"GetData",$)}d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);d.subscribe("elements","ViewRendered",ee);d.subscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.addEventListener("hashchange",te)}}$()}function W(){if(e.isToolStub()){window.fnFEPluginToolInstanceExit=undefined;e.detachEvent(u+"SetData",z);e.detachEvent(u+"UpdateStatus",Q);e.detachEvent(u+"ShowDataRefreshed",Z);x(f).destroy()}else{window.fnFEPluginAppInstanceExit=undefined;e.detachEvent(u+"GetData",$);d.unsubscribe("elements","ViewRendered",ee);d.unsubscribe("elements","ViewRenderingStarted",ee);if("onhashchange"in window){window.removeEventListener("hashchange",te)}}}function J(){e.sendEvent(u+"GetData",{})}function H(){var t=new n;c.sort(i.getDynamicComparator("order"));var a=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});var o=true;if(!c||c.length===0){o=false}var s=i.getApplicationStatus();if(!s){i.setApplicationStatus(i.mApplicationStatus.UNKNOWN);s=i.mApplicationStatus.UNKNOWN}var r="";if(s===i.mApplicationStatus.FAILED){r="The application did not finish loading or is no Fiori Elements application! The shown data below could be collected anyway. If the application finishes loading, the data will be updated automatically."}t.setData({properties:c,url:window.location.href,origin:window.location.origin,retrieval:a,copyEnabled:o,status:s,statusMessage:r});e.sendEvent(u+"SetData",JSON.parse(t.getJSON()))}function Y(t,n){e.sendEvent(u+"UpdateStatus",{timeLeft:t,status:n})}function q(){e.sendEvent(u+"ShowDataRefreshed",{})}function X(e){if(v){g=a.getRootPath(v)}c=[];H();y(1);P(2);L(3);H();if(e&&h&&i.hasObjectContent(h)){U(3);F(4);V(5);B(6);H();q()}else if(v){jQuery.when(i.getFileFromURI(v)).done(function(e){h=e;U(3);M(4);F(5);V(6);B(7)}).fail(function(){E("Manifest",3,"ERROR: Could not access manifest.json even though link could be generated! Possible reason: missing permission to access file.")}).always(function(){H();q()})}}function $(){h=undefined;v=undefined;g=undefined;var e=i.getApplicationStatus();var t=i.getAppComponent();var n=false;if(!(e&&i.isValidApplicationStatus(e))){e=i.mApplicationStatus.UNKNOWN}if(e===i.mApplicationStatus.LOADING){ee();return}else if(e===i.mApplicationStatus.FAILED){var o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}else if(e===i.mApplicationStatus.RENDERED){v=A();if(!v){o=C(t);if(o&&i.hasObjectContent(o)){h=o;if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}}else if(e===i.mApplicationStatus.UNKNOWN){if(a.getFloorplanByStructure()!==a.mFloorplans.UNKNOWN){h=a.getManifestByStructure();if(h&&i.hasObjectContent(h)){if(h&&h["sap.app"]&&h["sap.app"].id){v=A(h["sap.app"].id);if(!v){n=true}}else{n=true}}}else{N("Could not load any data because manifest and component of current application are unknown!");q();return}}X(n)}function z(e){var t=new n;t.setJSON(JSON.stringify(e.getParameters()));var a=x(f);a.setModel(t,"data");a.invalidate()}function Q(e){var t=e.getParameters();x(f).getController().updateStatus(t.timeLeft,t.status)}function Z(){var e=x(f);e.getController().showDataRefreshed()}function _(){var e=i.getApplicationStatus();if(R>0){Y(R,e)}else{R=w;i.setApplicationStatus(i.mApplicationStatus.FAILED);Y(0,i.mApplicationStatus.FAILED);S.removeListener(_);S=undefined;$()}R--}function ee(e,t){if(t==="ViewRenderingStarted"||!t&&i.getApplicationStatus()===i.mApplicationStatus.LOADING){i.setApplicationStatus(i.mApplicationStatus.LOADING);if(!S){R=w;S=new s(1e3);S.addListener(_)}}else if(t==="ViewRendered"){i.setApplicationStatus(i.mApplicationStatus.RENDERED);R=w;if(S){S.removeListener(_);S=undefined}$()}}function te(e){function t(e){for(var t=0;t<e.length;t++){if(e[t]==="/"||e[t]==="&"||e[t]==="?"||e[t]==="~"){return t}}return e.length}function n(e,n){if(!e||!n){return false}if(e===n){return true}var a=t(e);var i=t(n);if(a!==i){return false}else if(e.substr(0,a)===n.substr(0,i)){return true}return false}var a,o,s=false;if(e.originalEvent.oldURL&&e.originalEvent.newURL){a=e.originalEvent.oldURL.split("#")[1];o=e.originalEvent.newURL.split("#")[1]}else{a=l;o=window.location.hash.slice(1);l=o}if(a.length>=o.length){s=n(o,a)}else{s=n(a,o)}if(!s){i.setApplicationStatus(i.mApplicationStatus.LOADING);i.setAppComponent(undefined);ee();R=w/2}}return{init:K,exit:W,getId:b,onRefresh:J}}return e.extend("sap.ovp.support.DiagnosticsTool.DiagnosticsTool",{constructor:function(t){e.apply(this,[u,"SAP Fiori Elements",t]);Object.assign(this,p(t))}})});
sap.ui.predefine("sap/ovp/support/DiagnosticsTool/controller/DiagnosticsTool.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ovp/support/lib/Documentation","sap/ui/thirdparty/jquery","sap/ovp/cards/ovpLogger"],function(e,t,o,a,jQuery,r){"use strict";var i=new r("OVP.controller.DiagnosticsTool");function n(){this.getView().attachAfterRendering(function(){u()})}function s(){var e=this.getView().getModel("data");if(e.getProperty("/status")==="Loading"){t.show("Application is still loading");return}var o=(new Date).toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});e.setData({properties:null,retrieval:o,copyEnabled:false});e.updateBindings();this.getView().getViewData().plugin.onRefresh()}function l(){var e="\r\n";var r="- ";var i=this.getView().getModel("data").getData();if(!(i&&i.properties&&i.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var n=i.properties;var s="*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+e;s+=r+"Extracted on "+(new Date).toUTCString()+e;s+=r+"Host: "+i.origin+e;s+=r+"Application status: "+i.status+e;if(i.statusMessage){s+=r+"Notice: "+i.statusMessage+e}s+=r+"Documentation: "+a.getDocuURL()+e;s+=e;s+="APP DATA"+e;for(var l=0,c=n.length;l<c;l++){if(n[l].type==="string"){s+=r+n[l].name+": "+n[l].value+e}else if(n[l].type==="link"){s+=r+n[l].name+": "+n[l].target+e}else if(n[l].type==="group"){s+="Group: "+n[l].name+e}}s+=e;s+="**************************"+e;s+=e;s+=e;s+="PROVIDE"+e;s+=r+"User/Password: <user>/<password>"+e;s+=r+"Steps to recreate the issue: <maybe also provide master data, pictures or video…>"+e;var d=this.getView().byId("CopyDataTextArea").getId();var u=document.getElementById(d);u.style.display="block";u.value=s;u.select();try{var p=document.execCommand("copy");if(p){t.show("Ticket relevant information copied to clip board")}else{o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}}catch(t){o.error("Could not copy data to your clipboard! You can copy it manually from here: "+e+e+s,{title:"Error"})}finally{u.style.display="none"}}function c(){var e="<br/>",r="</span>"+e,i="<span>",n=i+"- ",s=this.getView().getModel("data").getData();if(!(s&&s.properties&&s.url)){o.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return}var c=s.properties,d=document.getElementById(this.getView().byId("CopyDataHTML").getId()),u=d[0];var p=i+"*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+r;p+=n+"Extracted on "+(new Date).toUTCString()+r;p+=n+'Host: <a href="'+s.url+'" rel="noopener noreferrer">'+s.origin+"</a>"+r;p+=n+"Application status: "+s.status+r;if(s.statusMessage){p+=n+"Notice: "+s.statusMessage+r}p+=n+"Documentation: "+'<a href="'+a.getDocuURL()+'" rel="noopener noreferrer">'+a.getDocuURL()+"</a>"+r;p+=e;p+=i+"APP DATA"+r;for(var g=0,f=c.length;g<f;g++){if(c[g].type==="string"){p+=n+c[g].name+": "+c[g].value+r}else if(c[g].type==="link"){p+=n+c[g].name+': <a href="'+c[g].target+'" rel="noopener noreferrer">'+c[g].value+"</a>"+r}else if(c[g].type==="group"){p+=i+"Group: "+c[g].name+r}}p+=i+"**************************"+r;p+=e;p+=i+"PROVIDE"+r;p+=i+"User/Password: &lt;user&gt;/&lt;password&gt;"+r;p+=i+"Steps to recreate the issue: &lt;maybe also provide master data, pictures or video…&gt;"+r;function m(){try{document.getSelection().removeAllRanges()}catch(e){return function(){}}}d.empty();u.insertAdjacentHTML("beforeend",p);try{var y=document.createRange();m();y.selectNode(u);document.getSelection().addRange(y);document.execCommand("copy");m();t.show("Ticket relevant information copied to clip board with HTML format")}catch(e){m();l()}finally{d.empty()}}function d(){a.openDocumentation()}function u(){var e=jQuery(".diagnosticPropertiesGroupHeaderContent");if(e.length===0){i.debug("No headers found which should be customized");return}var t,o,a;for(var r=0;r<e.length;r++){t=jQuery(e[r]);o=t.parents("td:first");a=jQuery("#"+o[0].id);a.addClass("diagnosticPropertiesGroupHeader");a.attr("colspan",2);a.next().remove()}}function p(e,t){var o=this.getView().getModel("data");o.setData({timeLeft:e,status:t})}function g(){if(window.fioriElementsPluginID){var e=document.getElementById(window.fioriElementsPluginID);if(e&&e.parent()&&!e.parent().hasClass("sapUiSupportHidden")){t.show("Data refreshed")}}}return e.extend("sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool",{onInit:n,onRefreshData:s,onCopyDataPlain:l,onCopyDataHTML:c,onShowDocumentation:d,updateStatus:p,showDataRefreshed:g})});
sap.ui.predefine("sap/ovp/support/lib/CommonChecks", ["sap/ovp/support/lib/CommonMethods","sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ovp/cards/CommonUtils"],function(e,jQuery,t,n){"use strict";var r={UNKNOWN:"Unknown",LISTREPORT:"sap.suite.ui.generic.template.ListReport",ANALYTICALLISTPAGE:"sap.suite.ui.generic.template.AnalyticalListPage",OVERVIEWPAGE:"sap.ovp"};var i={UNKNOWN:"CA-UI5-ST",LISTREPORT:"CA-UI5-ST",ANALYTICALLISTPAGE:"CA-UI5-ST-ALP",OVERVIEWPAGE:"CA-UI5-ST-OVP"};function a(){var e=n.getApp();if(e){var t=e.getOwnerComponent().oOvpConfig;return t.sapUICoreVersionInfo}}function p(e){return e&&e["sap.app"]&&e["sap.app"].ach?e["sap.app"].ach:""}function o(e){if(e&&e["sap.app"]&&e["sap.app"].id){if(e["sap.app"].id==="${project"+".artifactId}"){return g()}return e["sap.app"].id}return""}function s(e){return e&&e["sap.fiori"]&&e["sap.fiori"].registrationIds&&e["sap.fiori"].registrationIds.length>0?e["sap.fiori"].registrationIds:[]}function u(e,t){for(var n=0;n<e.length;n++){if(e[n]&&e[n].id&&e[n].id.indexOf(t)!==-1){return e[n].id.split("::")[0]}}return""}function f(){var n=jQuery(".sapUiXMLView"),r=jQuery(".ovpWrapper"),i="::sap.suite.ui.generic.template",a;if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView");if(n&&n.length&&n.length>0&&n[0]&&n[0].id&&t.byId(n[0].id)&&t.byId(n[0].id).getController()&&t.byId(n[0].id).getController().getOwnerComponent()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata()&&t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()){a=t.byId(n[0].id).getController().getOwnerComponent().getMetadata().getManifest()}else{return undefined}}else if(n&&n.length&&n.length>0){for(var p=0;p<n.length;p++){if(n[p].id.indexOf(i)!==-1){if(t.byId(n[p].id)&&t.byId(n[p].id).getController()&&t.byId(n[p].id).getController().getOwnerComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata()&&t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest()){a=t.byId(n[p].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest();break}}}if(!a||!e.hasObjectContent(a)){return undefined}if(a&&e.hasObjectContent(a)&&a["sap.app"]&&a["sap.app"].id&&a["sap.app"].id==="${project"+".artifactId}"){a["sap.app"].id=u(n,i)}}else{return undefined}return a}function g(){var t=f(),n,r,i="::sap.suite.ui.generic.template";if(t&&e.hasObjectContent(t)&&t["sap.app"]&&t["sap.app"].id){n=jQuery(".sapUiXMLView");r=jQuery(".ovpWrapper");if(r&&r.length&&r.length>0){n=r.closest(".sapUiXMLView")}if(n&&n.length&&n.length>0){return u(n,i)}}return""}function l(e){if(!e){return""}var t=e.replace(/\./g,"/");return sap.ui.require.toUrl(t,"/manifest.json")}function c(e,t,n){if(!e||!n){return""}if(n.indexOf("./")===0||n.indexOf("../")===0){if(!t){return""}return e+t.substring(0,t.lastIndexOf("/")+1)+n}if(n.indexOf("/")===0){return e+n}return""}function d(e){if(e){return e.replace("manifest.json","")}return""}function I(e){if(!e){return false}for(var t in r){if(!r.hasOwnProperty(t)){continue}if(r[t]===e){return true}}return false}function C(e){if(e===r.UNKNOWN){return i.UNKNOWN}else if(e===r.LISTREPORT){return i.LISTREPORT}else if(e===r.ANALYTICALLISTPAGE){return i.ANALYTICALLISTPAGE}else if(e===r.OVERVIEWPAGE){return i.OVERVIEWPAGE}else{return i.UNKNOWN}}function O(e){return e&&e.hasOwnProperty("sap.ovp")&&Object.keys(e["sap.ovp"]).length!==0}function A(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.ListReport"){return true}}}return false}function m(e){if(!(e&&e["sap.ui.generic.app"]&&e["sap.ui.generic.app"].pages&&e["sap.ui.generic.app"].pages!==[])){return false}var t=e["sap.ui.generic.app"].pages;for(var n in t){if(t.hasOwnProperty(n)){if(t[n]&&t[n].component&&t[n].component.name&&t[n].component.name==="sap.suite.ui.generic.template.AnalyticalListPage"){return true}}}return false}function L(e){if(e){if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}}return r.UNKNOWN}function y(){return O(f())}function P(){return A(f())}function E(){return m(f())}function T(){var e=f();if(O(e)){return r.OVERVIEWPAGE}else if(A(e)){return r.LISTREPORT}else if(m(e)){return r.ANALYTICALLISTPAGE}return r.UNKNOWN}return{mFloorplans:r,mTicketComponents:i,getUI5VersionInfo:a,getApplicationComponentByManifest:p,getApplicationIDByManifest:o,getRegistrationIDsByManifest:s,getComponentIDByStructure:g,getManifestByStructure:f,getManifestPath:l,getManifestURL:c,getRootPath:d,isValidFloorplan:I,getTicketComponentForFloorplan:C,isOverviewPageByManifest:O,isListReportByManifest:A,isAnalyticalListPageByManifest:m,getFloorplanByManifest:L,isOverviewPageByStructure:y,isListReportByStructure:P,isAnalyticalListPageByStructure:E,getFloorplanByStructure:T}});
sap.ui.predefine("sap/ovp/support/lib/CommonMethods", ["sap/ui/thirdparty/jquery","sap/ovp/cards/ovpLogger","sap/ui/core/Core"],function(jQuery,n,e){"use strict";var t={UNKNOWN:"Unknown",FAILED:"Failed",LOADING:"Loading",RENDERED:"Rendered"};var r=t.UNKNOWN;var i={};var u=new n("OVP.lib.CommonMethods");function s(n){var e=1;if(n[0]==="-"){e=-1;n=n.substr(1)}return function(t,r){if(!t[n]){return e===1?1:-1}else if(!r[n]){return e===1?-1:1}var i=0;if(t[n]<r[n]){i=-1}else if(t[n]>r[n]){i=1}return i*e}}function f(n){if(n){return jQuery.getJSON(n)}return undefined}function o(n){for(var e in t){if(t[e]===n){return true}}return false}function a(){return r}function l(n){r=o(n)?n:t.UNKNOWN}function p(){return i}function c(n){i=n;return true}function v(n,t,r){u.info("Global event '"+t+"' published on channel '"+n+"'");e.getEventBus().publish(n,t,r)}function g(n){if(!n||n.length<1){return""}var e="";for(var t=0;t<n.length;t++){if(!n[t]||!(typeof n[t]==="string")){continue}if(e){e+=", "}e+=n[t]}return e}function d(n){if(!n){return false}return Object.keys(n).length>0}function h(n){if(!n){return""}var e=n.split("#");if(e.length<2){return""}else{var t=e[1];var r=t.indexOf("~");var i=t.indexOf("?");var u=t.indexOf("/");var s=t.indexOf("&");if(r&&r!==-1&&(r<i||i===-1)&&(r<u||u===-1)&&(r<s||s===-1)){return t.substr(0,r)}else if(i&&i!==-1&&(i<r||r===-1)&&(i<u||u===-1)&&(i<s||s===-1)){return t.substr(0,i)}else if(u&&u!==-1&&(u<r||r===-1)&&(u<i||i===-1)&&(u<s||s===-1)){return t.substr(0,u)}else if(s&&s!==-1&&(s<r||r===-1)&&(s<i||i===-1)&&(s<u||u===-1)){return t.substr(0,s)}else{return t}}}function N(n){if(!n){return""}var e=n.split("#");if(e.length<=0){return""}else if(e.length===1){return e[0]}else{return e[0]+"#"+h(n)}}return{mApplicationStatus:t,getDynamicComparator:s,getFileFromURI:f,isValidApplicationStatus:o,getApplicationStatus:a,setApplicationStatus:l,getAppComponent:p,setAppComponent:c,publishEvent:v,concatStrings:g,hasObjectContent:d,getApplicationName:h,shortenURL:N}});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/support/lib/Documentation", ["sap/m/library","sap/ui/VersionInfo"],function(e,n){"use strict";var t="https://ui5.sap.com/";var r="03265b0408e2432c9571d6b3feb6b1fd";function i(){return n.load().then(function(e){var n=e.version;if(n.indexOf("-SNAPSHOT")!==-1){return t+"#/topic/"+r}else{return t+n+"/#/topic/"+r}})}function o(){i().then(function(n){e.URLHelper.redirect(n,true)})}return{getDocuURL:i,openDocumentation:o}});
sap.ui.predefine("sap/ovp/ui/Card", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.Card",{metadata:{library:"sap.ovp",designTime:false,aggregations:{innerCard:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"innerCard"},init:function(){},renderer:function(e,r){e.openStart("div",r);e.class("sapOvpBaseCardWrapper");e.openEnd();e.renderControl(r.getAggregation("innerCard"));e.close("div")}})});
sap.ui.predefine("sap/ovp/ui/CardContentContainer", ["sap/m/FlexBox"],function(e){"use strict";var n=e.extend("sap.ovp.ui.CardContentContainer",{metadata:{library:"sap.ovp"},renderer:{render:function(e,n){e.openStart("div",n);e.class("sapOvpCardContentContainer").class("sapMTBStandard");e.openEnd();var r=n.getItems();for(var a=0;a<r.length;a++){e.renderControl(r[a])}e.close("div")}}});return n});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/ComponentContainerDesigntimeMetadata", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/SettingsUtils","sap/ui/dt/plugin/ElementMover","sap/ui/dt/OverlayRegistry","sap/ui/dt/OverlayUtil","sap/ui/rta/plugin/Plugin","sap/ui/rta/util/BindingsExtractor","sap/ui/dt/MetadataPropagationUtil","sap/ui/rta/Utils","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ui/model/json/JSONModel"],function(jQuery,e,t,a,n,r,o,i,d,s,l,u,g,c){"use strict";var p=e.getApp();var v=false;var f=new g("OVP.ui.ComponentContainerDesigntimeMetadata");var y=function(){var e="https://"+window.location.host+"/sap/opu/odata/SSB/SMART_BUSINESS_DESIGNTIME_SRV/KPIs";jQuery.ajax({type:"GET",url:e,dataType:"json",async:false,headers:"",success:function(e,t,a){var n={d:{results:[]}};n.d.results=e.d.results.filter(function(e){return!!e.ModelURI});v=n.d.results.length>0;if(v){var r=new c;r.setData(n);p.getView().setModel(r,"JSONModelForSSB")}},error:function(e){f.error(e)}})};y();var C=new a,h=function(e){e.setTargetZone(false)},m=function(e){e.setTargetZone(true)},E=function(e){var t=e.getAggregationOverlays();var a=t.filter(function(e){return e.isTargetZone()});if(a.length>0){return a[0]}else{return null}},_=function(e){var t=C.getMovedOverlay();if(!t){return false}var a=false;if(!(e.getElement()===t.getElement())){var n=E(e);if(n){a=true}else if(r.isInTargetZoneAggregation(e)){a=true}}if(a){t.setSelected(true);setTimeout(function(){t.focus()},0)}return a},O=function(e,t){var a=e.getAggregationOverlays();a.forEach(function(e){t(e)})},S=function(e,t){var a=n.getOverlay(e),o=a&&a.getParentElementOverlay(),i=o&&r.findAllSiblingOverlaysInContainer(a,o);i&&i.forEach(function(e){O(e,t)})};var I=a.prototype.checkTargetZone;a.prototype.checkTargetZone=function(e,t,a){var n=t?t:this.getMovedOverlay();var r=I.apply(this,arguments);if(!r){return Promise.resolve(false)}var l=n.getElement();var u=e.getParent();var g=n.getRelevantContainer();var c=u.getElement();var p=e.getDesignTimeMetadata();var v=d.getRelevantContainerForPropagation(p.getData(),l);v=v?v:c;if(!g||!v||!o.prototype.hasStableId(u)||g!==v){return Promise.resolve(false)}if(n.getParent().getElement()!==c){var f=i.getBindings(l,l.getModel());if(Object.keys(f).length>0&&l.getBindingContext()&&c.getBindingContext()){var y=s.getEntityTypeByPath(l.getModel(),l.getBindingContext().getPath());var C=s.getEntityTypeByPath(c.getModel(),c.getBindingContext().getPath());if(!(y===C)){return Promise.resolve(false)}}}return Promise.resolve(true)};a.prototype.deactivateAllTargetZones=function(e){S(e,h)};a.prototype.activateAllValidTargetZones=function(e){S(e,m)};var T={name:{singular:l.getText("Card"),plural:l.getText("Cards")},actions:{remove:{name:l.getText("OVP_KEYUSER_MENU_HIDE_CARD"),changeType:"hideCardContainer",changeOnRelevantContainer:true},reveal:{changeType:"unhideCardContainer",changeOnRelevantContainer:true,getLabel:function(e){var t=this._getCardId(e.getId()),a=this._getCardFromManifest(t);if(a){var n=a.settings;if(n.title){return n.title}else if(n.category){return n.category}else if(n.subTitle){return n.subTitle}return a.cardId}else{f.error("Card id "+t+" is not present in the manifest");return""}}.bind(p)}}};var L=e._getLayer();T.actions["settings"]=function(a){if(!a.getComponentInstance()){return{}}var o=a.getComponentInstance().getComponentData(),i=o.mainComponent,d=i._getCardFromManifest(o.cardId);if(!d||!e.checkIfCardTypeSupported(d.template)){return{}}var s={EditCard:{icon:"sap-icon://edit",name:l.getText("OVP_KEYUSER_MENU_EDIT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:t.fnEditCardHandler},CloneCard:{icon:"sap-icon://value-help",name:l.getText("OVP_KEYUSER_MENU_CLONE_CARD"),isEnabled:function(e){return true},handler:t.fnCloneCardHandler}};if(!L||L===u.Layers.customer){s["Cut"]={icon:"sap-icon://scissors",name:l.getText("OVP_KEYUSER_MENU_CUT_CARD"),isEnabled:function(e){return true},changeOnRelevantContainer:true,handler:function(e,t){var a=n.getOverlay(e),r=C.getMovedOverlay();if(r){r.removeStyleClass("sapUiDtOverlayCutted");C.setMovedOverlay(null);C.deactivateAllTargetZones(e)}C.setMovedOverlay(a);a.addStyleClass("sapUiDtOverlayCutted");C.activateAllValidTargetZones(e);return Promise.resolve([]).then(function(){return[]})}};s["Paste"]={icon:"sap-icon://paste",name:l.getText("OVP_KEYUSER_MENU_PASTE_CARD"),isEnabled:function(e){var t=n.getOverlay(e),a=E(t);return!!(a||r.isInTargetZoneAggregation(t))},changeOnRelevantContainer:true,handler:function(t,a){var o=n.getOverlay(t),i=C.getMovedOverlay();if(i){var d=i.getElement(),s=o.getElement(),l=r.getParentInformation(i),u=r.getParentInformation(o),g=t.getComponentInstance().getComponentData().mainComponent,c=g.getLayout(),p=g.getUIModel(),v={},f={},y=[];if(p.getProperty("/containerLayout")==="resizable"){var h=c.getDashboardLayoutModel(),m=g._getCardId(d.getId()),E=g._getCardId(t.getId()),O=h.getCardById(m),S=h.getCardById(E),I=h.getColCount(),T="C"+I,L=[];v.cardId=m;v.dashboardLayout={};v.dashboardLayout[T]={row:S.dashboardLayout.row,oldRow:O.dashboardLayout.row,column:S.dashboardLayout.column,oldColumn:O.dashboardLayout.column};if(S.dashboardLayout.column+O.dashboardLayout.colSpan>I+1){v.dashboardLayout[T].colSpan=S.dashboardLayout.colSpan;v.dashboardLayout[T].oldColSpan=O.dashboardLayout.colSpan;v.dashboardLayout[T].rowSpan=O.dashboardLayout.rowSpan;v.dashboardLayout[T].oldRowSpan=O.dashboardLayout.rowSpan}y.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:v}});y.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:v}});h._arrangeCards(O,{row:S.dashboardLayout.row,column:S.dashboardLayout.column},"drag",L);h._removeSpaceBeforeCard(L);L.forEach(function(t){var a={};a.dashboardLayout={};a.cardId=t.content.cardId;a.dashboardLayout[T]=t.content.dashboardLayout;y.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:a}})})}else{var b=u.parent.getContent().filter(function(e){return e.getVisible()});v={cardId:g._getCardId(d.getId()),position:b.indexOf(s),oldPosition:b.indexOf(d)};y.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{changeType:"position",content:v}});f={cardId:g._getCardId(d.getId()),position:u.index,oldPosition:l.index};y.push({selectorControl:e.getApp().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:f}})}}_(o);if(i){i.removeStyleClass("sapUiDtOverlayCutted");C.setMovedOverlay(null);C.deactivateAllTargetZones(t);return Promise.resolve(y).then(function(e){return e})}}};s["AddStaticLinkListCard"]={icon:"sap-icon://form",name:l.getText("OVP_KEYUSER_MENU_CREATE_LINK_LIST_CARD"),isEnabled:function(e){return true},handler:t.fnAddStaticLinkListCardHandler};if(v){s["AddKPICard"]={icon:"sap-icon://kpi-corporate-performance",name:l.getText("OVP_KEYUSER_MENU_ADD_KPI_CARD"),isEnabled:function(e){return true},handler:t.fnAddKPICardHandler}}}else if(L&&(L===u.Layers.vendor||L===u.Layers.customer_base)){s["AddCard"]={icon:"sap-icon://add-activity",name:l.getText("OVP_KEYUSER_MENU_AddCard"),isEnabled:function(e){return true},handler:t.fnAddNewCardHandler}}s["RemoveCard"]={icon:"sap-icon://delete",name:l.getText("OVP_KEYUSER_MENU_REMOVE_CARD"),isEnabled:function(t){var a=t.getComponentInstance().getComponentData().settings;return t.getId().indexOf(e._getLayerNamespace()+".")!==-1&&!a.cloneCard&&!a.newCard},handler:t.fnRemoveCardHandler};return s};return T},true);
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/CustomData", ["sap/ui/core/CustomData","sap/ovp/cards/ovpLogger","sap/ui/core/Core","sap/ui/core/library"],function(t,e,i,r){"use strict";var o=r.ID;var a=new e("OVP.ui.CustomData");var t=t.extend("sap.ovp.ui.CustomData");t.prototype._checkWriteToDom=function(t){var e=this.getKey().toLowerCase(),r=i.getConfiguration().getAccessibility();if(!r){return}if(!this.getWriteToDom()){return null}var u=this.getValue();if(typeof u!="string"){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the value is not a string.");return null}if(!o.isValid(e)||e.indexOf(":")!=-1){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null}if(e==window._FASTNAVIGATIONKEY){u=/^\s*(x|true)\s*$/i.test(u)?"true":"false"}else if(e.indexOf("sap-ui")==0){a.error("CustomData with key "+e+" should be written to HTML of "+t+" but the key is not valid (may not start with 'sap-ui').");return null}return{key:e,value:u}};return t});
sap.ui.predefine("sap/ovp/ui/DashboardLayout", ["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/ui/events/F6Navigation","sap/ui/core/Core","sap/ui/dom/jquery/Selectors"],function(t,jQuery,a,e,s,o,r,i,n){"use strict";var d=t.extend("sap.ovp.ui.DashboardLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{}},properties:{dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{apiVersion:2,render:function(t,e){var s=function(t){return t.getVisible()};var o=function(t){var a=this.getId();var e=a.indexOf("---")+3;var s=a.substring(e);return t.id===s.split("--")[1]};var r=e.$().width();var i=n.getConfiguration().getRTL();var d=e.dashboardLayoutUtil.updateLayoutData(r?r:window.innerWidth);var l=e.dashboardLayoutUtil.getCards(d.colCount);var u=e.getContent().filter(s);t.openStart("div",e);t.class("sapUshellEasyScanLayout");t.class("sapOvpDashboard");if(!a.system.phone){t.class("sapOvpDashboardDragAndDrop")}if(i){t.style("margin-right",d.marginPx+"px")}else{t.style("margin-left",d.marginPx+"px")}t.openEnd();t.openStart("div");t.class("sapUshellEasyScanLayoutInner");t.accessibilityState(undefined,{role:"list"});t.attr("aria-label","Cards");t.attr("tabindex",0);t.openEnd();if(l.length>0){var h={},p,c,y,f=e.getDashboardLayoutModel().getColCount();for(p=0,c=u.length;p<c;p++){var b=["easyScanLayoutItemWrapper","sapOvpDashboardLayoutItem"];h=l.filter(o.bind(u[p]))[0];e.dashboardLayoutUtil.setCardCssValues(h);y=h.dashboardLayout.column+h.dashboardLayout.colSpan===f+1;if(y){h.dashboardLayout.colSpan===1?b.push("sapOvpNotResizableLeftRight"):b.push("sapOvpNotResizableRight")}if(h.template==="sap.ovp.cards.stack"||h.settings.stopResizing||!a.system.desktop){b.push("sapOvpDashboardLayoutItemNoDragIcon")}t.openStart("div",e.dashboardLayoutUtil.getCardDomId(h.id));for(var g=0;g<b.length;g++){t.class(b[g])}var v="translate3d("+h.dashboardLayout.left+" ,"+h.dashboardLayout.top+" ,0px)";t.style("transform",v);t.style("-ms-transform",v);t.style("-moz-transform",v);t.style("-webkit-transform",v);t.style("height",h.dashboardLayout.height);t.style("width",h.dashboardLayout.width);t.attr("aria-setsize",c);t.attr("aria-posinset",p+1);t.attr("tabindex",0);t.accessibilityState(undefined,{role:"listitem"});t.openEnd();t.renderControl(u[p]);t.openStart("div").class("lastElement").attr("tabindex",0).openEnd();t.close("div");t.close("div")}}t.close("div");t.openStart("div").class("after").attr("tabindex",0).openEnd();t.close("div");t.close("div")}},init:function(){this.data("sap-ui-fastnavgroup","true",true);this.oColumnLayoutData={};this.resizeHandlerId=this.initResizeHandler();var t=n.getComponent(this._sOwnerId);this.dashboardLayoutUtil=t.getDashboardLayoutUtil();this.dashboardLayoutUtil.setLayout(this)},exit:function(){if(this.resizeHandlerId){e.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}},onBeforeRendering:function(){},onAfterRendering:function(){this.keyboardNavigation=new l(this);if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=this.dashboardLayoutUtil.getRearrange({rootSelector:this.getDragAndDropRootSelector(),layout:this});this.dashboardLayoutUtil.setAriaPos();this.fireAfterRendering()}},getLayoutDataJSON:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel().getLayoutVariants4Pers()},filterVisibleCards:function(t){return t.getVisible()},getDashboardLayoutUtil:function(){return this.dashboardLayoutUtil},getDashboardLayoutModel:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel()},getVisibleLayoutItems:function(){var t=this.getContent();var a=t.filter(this.filterVisibleCards);return a},initResizeHandler:function(){var t;var a=this.getDebounceTime();var s=function(e){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return e.register(this,s)},resizeHandler:function(t){this.oControl.dashboardLayoutUtil.resizeLayout(t.size.width)},setActive:function(t){if(t){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}},getActive:function(){return!this.hasStyleClass("ovpOverlay")}});var l=function(t){this.init(t)};l.prototype.init=function(t){this.layoutUtil=t.getDashboardLayoutUtil();this.layoutModel=t.getDashboardLayoutModel();this.keyCodes=r;this.jqElement=t.$();this.bIgnoreSelfFocus=false;this.sLastFocusableCard=null;this.lastFocussedElement=null;this.jqElement.on("keydown",this.keyDownHandler.bind(this));this.jqElement.on("keyup",this.keyUpHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));document.querySelector("body").addEventListener("keyup",this.bodyKeyupHandler.bind(this));document.querySelector("body").addEventListener("keydown",this.bodyKeydownHandler.bind(this));var a=this.layoutClickHandler.bind(this);var e=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent");for(var s=0;s<e.length;s++){e[s].addEventListener("click",a)}this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this))};l.prototype.spacebarHandler=function(t){o.bCRTLPressed=t.ctrlKey||t.metaKey;var a=n.byId(t.target.id);if(a&&a.mEventRegistry.hasOwnProperty("press")){var e="#"+t.target.id;var s=document.querySelectorAll(e);for(var r=0;r<s.length;r++){s[r].classList.add("sapMLIBActive")}a.firePress()}};l.prototype.bodyKeyupHandler=function(t){if(t.ctrlKey||t.metaKey){o.bCRTLPressed=false}};l.prototype.bodyKeydownHandler=function(t){if(t.ctrlKey||t.metaKey){o.bCRTLPressed=true}};l.prototype.layoutItemFocusHandler=function(){var t=jQuery(document.activeElement);if(t){var a,e="";if(t.find(".valueStateText").length==1){var o=t.find(".valueStateText").find(".sapMObjectNumberText").text();var r=t.find(".valueStateText").find(".sapUiInvisibleText").text();t.find(".valueStateText").attr("aria-label",o+" "+r);t.find(".valueStateText").attr("aria-labelledby","")}t.find("[role='listitem']").attr("aria-label","");if(t.hasClass("easyScanLayoutItemWrapper")){var i="";var n=t.find(".cardCount");if(n.length===0){i="countDiv_"+(new Date).getTime();var d='<div id="'+i+'" class="cardCount"'+'" hidden></div>';t.append(d)}else{i=n[0].id}e+=i+" ";var l=t.find(".cardType");if(l.length!==0){e+=l[0].id+" "}}var u="cardHeaderType_";if(t.hasClass("sapOvpCardHeader")&&!t.hasClass("sapOvpStackCardContent")){var h="";var p=t.find(".cardHeaderType");if(p.length===0){var c=s.getText("CardHeaderType");h=u+(new Date).getTime();var y='<div id="'+h+'" class="cardHeaderType" aria-label="'+c+'" hidden></div>';t.append(y)}else{h=p[0].id}e+=h+" "}var f,b;if(t.hasClass("easyScanLayoutItemWrapper")){b=t.find(".sapOvpCardHeader");f=b.find("[aria-label]")}else{f=t.find("[aria-label]")}var g=t.find(".sapOvpStackCardHeader").length!==1;var v=t.find(".sapOvpExtendedBarListHBox").length===0;if(g&&v){for(a=0;a<f.length;a++){if(!f[a].id.includes(u)){e+=f[a].id+" "}}}if(t.hasClass("sapOvpCardHeader")){var m=t.find(".cardHeaderText");if(m.length!==0){for(var a=0;a<m.length;a++){if(e.indexOf(m[a].id)===-1){e+=m[a].id+" "}}}}if(e.length){t.attr("aria-labelledby",e)}if(t.prop("nodeName")==="LI"&&t.find(".linkListHasPopover").length!==0){if(t.find("#hasDetails").length===0){t.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");t.attr("aria-describedby","hasDetails")}}var C=t.attr("id");if(C&&C.indexOf("ovpTable")!=-1&&t.find("[role='Link']")&&!t.hasClass("sapUiCompSmartLink")){var L=t.closest("td").attr("data-sap-ui-column"),S=t.closest("tbody").siblings().children().filter("tr").children();for(var a=0;a<S.length;a++){if(S[a].getAttribute("data-sap-ui")==L&&S[a].hasChildNodes("span")){var D=S[a].firstElementChild.getAttribute("id");t.attr("aria-labelledby",D)}}}}};l.prototype.layoutFocusHandler=function(t){if(jQuery(t.relatedTarget).hasClass("easyScanLayoutItemWrapper")){return}if(this.sLastFocusableCard){this.sLastFocusableCard=jQuery(this.sLastFocusableCard);if(!this.sLastFocusableCard.is(this.lastFocussedElement)&&t.relatedTarget){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}else{this.lastFocussedElement=undefined}return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard};l.prototype.layoutClickHandler=function(t){if(t&&t.target&&t.target.getAttribute("id")&&t.target.getAttribute("id").indexOf("mainView")!==-1){if(this.sLastFocusableCard){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;return}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};l.prototype.ctrlArrowHandler=function(t,a){var e=this.layoutUtil.dashboardLayoutModel.getCardById(a),s=t.dashboardLayout.row,o=e.dashboardLayout.row,r=e.dashboardLayout.column,i=[],n;if(o>s&&e.dashboardLayout.rowSpan>=t.dashboardLayout.rowSpan){n=s+e.dashboardLayout.rowSpan}else{n=o}this.layoutUtil.dashboardLayoutModel._arrangeCards(t,{row:n,column:r},"drag",i);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard(i);this.layoutUtil._positionCards(this.layoutModel.aCards);this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:i})};l.prototype.shiftArrowHandler=function(t,a,e){if(t.template==="sap.ovp.cards.stack"){return}this.resizeStartHandler(t,e);var s=this.layoutUtil.calculateCardProperties(t.id),o=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX,r=Math.ceil(o/this.layoutUtil.getRowHeightPx());if(a.rowSpan<=r){a.rowSpan=r;a.showOnlyHeader=true;e.classList.add("sapOvpMinHeightContainer")}else{a.showOnlyHeader=false;e.classList.remove("sapOvpMinHeightContainer")}var i=this.layoutUtil.dashboardLayoutModel.resizeCard(t.id,a,true,this.layoutUtil.dragOrResizeChanges);this.resizeStopHandler(i.resizeCard,e)};l.prototype.resizeStartHandler=function(t,a){this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.resizeStartCard={cardId:t.id,rowSpan:t.dashboardLayout.rowSpan,colSpan:t.dashboardLayout.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,autoSpan:t.dashboardLayout.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader};a.classList.add("sapOvpCardResize");t.dashboardLayout.autoSpan=false};l.prototype.resizeStopHandler=function(t,a){a.classList.remove("sapOvpCardResize");a.style.zIndex="auto";this.layoutUtil._sizeCard(t);this.layoutUtil._positionCards(this.layoutModel.aCards);t.dashboardLayout.maxColSpan=t.dashboardLayout.colSpan;this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:t.id,dashboardLayout:{rowSpan:t.dashboardLayout.rowSpan,oldRowSpan:this.layoutUtil.resizeStartCard.rowSpan,colSpan:t.dashboardLayout.colSpan,oldColSpan:this.layoutUtil.resizeStartCard.colSpan,maxColSpan:t.dashboardLayout.maxColSpan,oldMaxColSpan:this.layoutUtil.resizeStartCard.maxColSpan,noOfItems:t.dashboardLayout.noOfItems,oldNoOfItems:this.layoutUtil.resizeStartCard.noOfItems,autoSpan:t.dashboardLayout.autoSpan,oldAutoSpan:this.layoutUtil.resizeStartCard.autoSpan,showOnlyHeader:t.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:this.layoutUtil.resizeStartCard.showOnlyHeader}},isUserDependent:true});this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges})};l.prototype.keyUpHandler=function(t){switch(t.keyCode){case this.keyCodes.SPACE:this.spacebarHandler(t);break;default:break}};l.prototype.keyDownHandler=function(t){var a=document.activeElement,e=this.layoutUtil.getCardId(a.id),s=Object.assign([],this.layoutModel.aCards),o=this.layoutModel.getCardById(e),r=this.layoutModel.iColCount,d={},l,u,h,p,c,y,f,b,g=n.getConfiguration().getRTL(),v=jQuery(document.activeElement);this.layoutModel._sortCardsByRow(s);for(var m=1;m<=r;m++){d[m]=[]}for(var C=0;C<s.length;C++){l=s[C].dashboardLayout.column;u=s[C].dashboardLayout.colSpan;if(u===1){d[l].push(s[C])}else{for(var L=l;L<l+u;L++){d[L].push(s[C])}}}p=this.getCardPosition(e,d[o.dashboardLayout.column]);switch(t.keyCode){case this.keyCodes.TAB:if(t.shiftKey){this.shiftTabButtonHandler(t)}else{this.tabButtonHandler(t)}break;case this.keyCodes.F6:if(t.shiftKey){this.bIgnoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();i.handleF6GroupNavigation(t)}else{this.bIgnoreSelfFocus=true;var S=this.jqElement.scrollTop();this.jqElement.find(".after").focus();i.handleF6GroupNavigation(t);this.jqElement.scrollTop(S)}break;case this.keyCodes.F7:t.preventDefault();if(v.hasClass("easyScanLayoutItemWrapper")){v.find(":sapTabbable").first().focus()}else{v.closest(".easyScanLayoutItemWrapper").focus()}break;case this.keyCodes.ARROW_UP:t.preventDefault();h=o.dashboardLayout.column;p--;c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){b={rowSpan:o.dashboardLayout.rowSpan-3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else if(v&&v.hasClass("easyScanLayoutItemWrapper")){this.setFocusOnCard(c);this.handleScrollUp()}break;case this.keyCodes.ARROW_DOWN:t.preventDefault();h=o.dashboardLayout.column;p++;c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.rowSpan>=45){return}b={rowSpan:o.dashboardLayout.rowSpan+3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusOnCard(c)}break;case this.keyCodes.ARROW_LEFT:var D=jQuery(document.activeElement);if(!D.hasClass("easyScanLayoutItemWrapper")){return}t.preventDefault();h=o.dashboardLayout.column;h--;if(!d[h]||!d[h][p]){do{if(h===0){h=r;p--;break}if(p<0){break}h--}while(!d[h]||!d[h][p])}c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}else{if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Left");t.stopImmediatePropagation()}break;case this.keyCodes.ARROW_RIGHT:t.preventDefault();h=o.dashboardLayout.column+o.dashboardLayout.colSpan;if(!d[h]||!d[h][p]){do{if(h>r){h=1;p++;break}h++}while(!d[h]||!d[h][p])}c=d[h][p]&&d[h][p].id;if(c&&t.ctrlKey){this.ctrlArrowHandler(o,c);this.setFocusOnCard(e)}else if(t.shiftKey){if(g){if(o.dashboardLayout.colSpan===1){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1}}else{if(o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2||(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==="carousel"&&o.dashboardLayout.colSpan===3){return}b={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1}}this.shiftArrowHandler(o,b,t.target);this.setFocusOnCard(e)}else{this.setFocusInCaseOfSpace(o,"Right");t.stopImmediatePropagation()}break;case this.keyCodes.PAGE_UP:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){h===1?p=0:h=1;c=d[h][p]&&d[h][p].id}else{y=d[h].length-1;for(var m=y;m>0;m--){f=document.getElementById(this.layoutUtil.getCardDomId(d[h][m].id));if(f.getBoundingClientRect().bottom<0){c=d[h][m].id;break}}if(!c){c=d[h][0].id}}this.setFocusOnCard(c);break;case this.keyCodes.PAGE_DOWN:t.preventDefault();h=o.dashboardLayout.column;if(t.altKey==true){c=h+o.dashboardLayout.colSpan>r?s[s.length-1].id:d[r][p]&&d[r][p].id}else{var E=jQuery(window).height();y=d[h].length;for(var m=0;m<y;m++){f=document.getElementById(this.layoutUtil.getCardDomId(d[h][m].id));if(f.getBoundingClientRect().top>E){c=d[h][m].id;break}}if(!c){c=d[h][y-1].id}}this.setFocusOnCard(c);break;case this.keyCodes.HOME:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){p===0?h=1:p=0}else{h===1?p=0:h=1}c=d[h][p]&&d[h][p].id;this.setFocusOnCard(c);break;case this.keyCodes.END:t.preventDefault();h=o.dashboardLayout.column;if(t.ctrlKey==true){var w=d[h].length-1;c=w===p?s[s.length-1].id:d[h][w]&&d[h][w].id}else{c=h+o.dashboardLayout.colSpan>r?s[s.length-1].id:d[r][p]&&d[r][p].id}this.setFocusOnCard(c);break;case this.keyCodes.ENTER:t.stopImmediatePropagation();this.spacebarHandler(t);break;default:break}};l.prototype.handleScrollUp=function(){var t=this.layoutUtil.componentDomId+"--ovpMain";if(t){var a=n.byId(t);if(a){setTimeout(function(){var t=a.getScrollDelegate();if(t){var e=t.getScrollTop();var s=document.activeElement.getBoundingClientRect().top;t.scrollTo(0,e-s-32)}},0)}}};l.prototype.setFocusInCaseOfSpace=function(t,a){var e=Object.assign([],this.layoutModel.aCards),s=this.layoutUtil.ariaPos,o=s[t.id],r=e.filter(function(t){return a==="Right"?s[t.id]===o+1:s[t.id]===o-1},s);this.setFocusOnCard(r[0]&&r[0].id)};l.prototype.setFocusOnCard=function(t){if(t){var a=document.getElementById(this.layoutUtil.getCardDomId(t));a&&a.focus();this.sLastFocusableCard=a;this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard}};l.prototype.getCardPosition=function(t,a){for(var e=0;e<a.length;e++){if(a[e].id===t){break}}return e};l.prototype.tabButtonHandler=function(t){var a=jQuery(document.activeElement);this.lastFocussedElement=a;if(a.hasClass("easyScanLayoutItemWrapper")){return}var e=a.closest(".easyScanLayoutItemWrapper");if(!e.length){return}var s=e.find(jQuery(".lastElement"));if(a.is(s)){t.stopPropagation();t.stopImmediatePropagation();var o=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(o)}};l.prototype.shiftTabButtonHandler=function(t){var a=jQuery(document.activeElement);if(a.hasClass("after")&&this.lastFocussedElement){this.lastFocussedElement.focus();return}if(!a.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.lastFocussedElement=a;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};l.prototype.afterFocusHandler=function(t){t.stopImmediatePropagation();if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var a,e;if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("lastElement")){a=this.jqElement.find(this.lastFocussedElement.parent());e=a.find(":sapTabbable").last()}else if(this.lastFocussedElement&&this.lastFocussedElement.hasClass("easyScanLayoutItemWrapper")){e=this.lastFocussedElement}else{a=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();e=a.find(":sapTabbable").last()}if(!e.length){e=a}e.focus()};return d});
sap.ui.predefine("sap/ovp/ui/DashboardLayoutModel", ["sap/ovp/cards/CommonUtils","sap/base/util/merge"],function(a,o){"use strict";var t=function(a,o,t,r){this.uiModel=a;this.setColCount(o);this.aCards=[];this.oLayoutVars=null;this.iDisplaceRow=null;this.iDummyRow=999;this.iRowHeightPx=t;this.iCardBorderPx=r};t.prototype.setColCount=function(a){if(!a){this.iColCount=5}else if(a!==this.iColCount){this.iColCount=a}};t.prototype.setLayoutVars=function(a){if(Array.isArray(a)&&a.length>0){this.oLayoutVars=a}this._buildGrid()};t.prototype.updateCardVisibility=function(a){var o,t;function r(o){return o.id===a[s].id}for(var s=0;s<a.length;s++){o=this.oLayoutVars.filter(r);t=this.aCards.filter(r);if(!a[s].visibility){o[0].dashboardLayout["C"+this.iColCount].row=this._findHighestOccupiedRow();t[0].dashboardLayout.row=o[0].dashboardLayout["C"+this.iColCount].row}o[0].visibility=a[s].visibility;t[0].dashboardLayout.visible=a[s].visibility}};t.prototype.getColCount=function(){return this.iColCount};t.prototype.getCards=function(a){if(this.aCards.length===0||a&&a!==this.iColCount){if(a){this.setColCount(a)}this._buildGrid()}return this.aCards};t.prototype.getCardById=function(a){var o=null,t=0;for(t=0;t<this.aCards.length;t++){o=this.aCards[t];if(o.id===a){break}}return o};t.prototype.getLayoutVariants4Pers=function(){return JSON.parse(JSON.stringify(this.oLayoutVars))};t.prototype._readVariants=function(){var a,o,t=this.uiModel.getProperty("/dashboardLayout");function r(a){return a.id===o}if(!!t){for(var s in t){if(t.hasOwnProperty(s)&&t[s]){a=t[s];a.id=s;for(o in a){var e=this.oLayoutVars.filter(r);if(e.length>0){var d="C"+ +a.id.replace(/[^0-9\.]/g,"");var i=e[0].dashboardLayout[d];var n=this.aCards.filter(r);if(Array.isArray(n)&&n.length>0){if(i){i.row=a[o].row;i.col=a[o].col;i.colSpan=n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount);i.maxColSpan=a[o].maxColSpan;i.noOfItems=a[o].rowSpan}else{e[0].dashboardLayout[d]={row:a[o].row,col:a[o].col,colSpan:n[0].template==="sap.ovp.cards.stack"?1:Math.min(a[o].colSpan,this.iColCount),maxColSpan:a[o].maxColSpan,noOfItems:a[o].rowSpan,autoSpan:n[0].template==="sap.ovp.cards.stack"?false:true}}e[0].visibility=a[o].visible?a[o].visible:true}}}}}}};t.prototype.resetToManifest=function(){this.oLayoutVars=null;for(var a=0;a<this.aCards.length;a++){this.aCards[a].dashboardLayout={}}this._buildGrid(true)};t.prototype._buildGrid=function(a){if(this.aCards.length===0||a){this.aCards=o([],this.uiModel.getProperty("/cards"))}if(a||!this.oLayoutVars||this.oLayoutVars[0]&&!this.oLayoutVars[0].dashboardLayout){this.oLayoutVars=[];this._sliceSequenceSausage()}else{this._sliceSequenceSausage(this.oLayoutVars)}this._readVariants()};t.prototype._displaceCardToEnd=function(a){a.dashboardLayout.column=1;if(!this.iDisplaceRow){this.iDisplaceRow=this._findHighestOccupiedRow()}a.dashboardLayout.row=this.iDisplaceRow;this.iDisplaceRow+=a.dashboardLayout.rowSpan;var o=this.oLayoutVars.filter(function(o){return o.id===a.id});if(o.length>0){o[0].dashboardLayout["C"+this.iColCount].row=a.dashboardLayout.row}};t.prototype._setCardSpanFromDefault=function(a){if(!a.dashboardLayout){a.dashboardLayout={}}var o=this._getDefaultCardItemHeightAndCount(a);if(!a.settings.defaultSpan){if(a.template!=="sap.ovp.cards.linklist"&&a.template!=="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=12}else if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=1}a.dashboardLayout.colSpan=1;a.dashboardLayout.maxColSpan=1;a.dashboardLayout.noOfItems=o.noOfItems;a.dashboardLayout.autoSpan=a.template==="sap.ovp.cards.stack"?false:true;a.dashboardLayout.showOnlyHeader=false}else{if(a.settings.defaultSpan.showOnlyHeader){a.dashboardLayout.rowSpan=Math.ceil((o.headerHeight+2*this.iCardBorderPx)/this.iRowHeightPx);a.dashboardLayout.noOfItems=0;a.dashboardLayout.autoSpan=false;a.dashboardLayout.showOnlyHeader=true}else{if(a.template==="sap.ovp.cards.linklist"||a.template==="sap.ovp.cards.v4.linklist"){a.dashboardLayout.rowSpan=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.rowSpan=8;a.dashboardLayout.autoSpan=true}a.dashboardLayout.noOfItems=a.settings.defaultSpan.rows?a.settings.defaultSpan.rows:o.noOfItems;a.dashboardLayout.showOnlyHeader=false}if(a.template==="sap.ovp.cards.stack"){a.dashboardLayout.colSpan=1;a.dashboardLayout.autoSpan=false}else{a.dashboardLayout.colSpan=a.settings.defaultSpan.cols?Math.min(a.settings.defaultSpan.cols,this.iColCount):1}a.dashboardLayout.maxColSpan=a.settings.defaultSpan.cols?a.settings.defaultSpan.cols:1}a.dashboardLayout.visible=true;a.dashboardLayout.itemHeight=o.itemHeight;a.dashboardLayout.headerHeight=o.headerHeight};t.prototype._sliceSequenceSausage=function(a){var o=0,t=0,r=0,s=0,e=0,d={},i=[],n="C"+this.iColCount,u;for(o=0;o<this.iColCount;o++){i.push({col:o+1,rows:0})}function h(a){return a.id===d.id}function l(a,o){return o!==a}for(o=0;o<this.aCards.length;o++){d=this.aCards[o];if(!d.dashboardLayout){d.dashboardLayout={}}if(!a){this._setCardSpanFromDefault(d)}else{var y=a.filter(h);if(y.length>0){var p=y[0].dashboardLayout,L=p[n],b=Object.keys(p),c=b.filter(l.bind(this,n));if(c.length>0){u=p[c];if(u){this._mergeLayoutVariants(d.dashboardLayout,u)}}else{this._mergeLayoutVariants(d.dashboardLayout,L);continue}}else{d.dashboardLayout.row=this.iDummyRow;d.dashboardLayout.column=1;var f={};var C={row:d.dashboardLayout.row,col:d.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader};f[n]=C;a.push({id:d.id,visibility:d.dashboardLayout.visible,selectedKey:d.settings.selectedKey,dashboardLayout:f});continue}}d.dashboardLayout.colSpan=d.dashboardLayout.maxColSpan;d.dashboardLayout.colSpan=d.dashboardLayout.colSpan>this.iColCount?this.iColCount:d.dashboardLayout.colSpan;r=s<this.iColCount?s+1:1;if(r+d.dashboardLayout.colSpan-1>this.iColCount){d.dashboardLayout.colSpan=this.iColCount-r+1}s=r+d.dashboardLayout.colSpan-1;d.dashboardLayout.column=r;e=0;if(Array.isArray(y)&&y.length>0&&!y[0].visibility){d.dashboardLayout.row=this.iDummyRow}else{for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){if(i[t-1].rows>e){e=i[t-1].rows}}d.dashboardLayout.row=e+1;for(t=d.dashboardLayout.column;t<d.dashboardLayout.column+d.dashboardLayout.colSpan;t++){i[t-1].rows=e+d.dashboardLayout.rowSpan}}}this.extractCurrentLayoutVariant()};t.prototype._mergeLayoutVariants=function(a,o){if(o.rowSpan){a.rowSpan=o.rowSpan}if(o.colSpan){a.colSpan=o.colSpan}if(o.maxColSpan){a.maxColSpan=o.maxColSpan}if(o.noOfItems){a.noOfItems=o.noOfItems}if(o.hasOwnProperty("autoSpan")){a.autoSpan=o.autoSpan}if(o.row){a.row=o.row}if(o.col){a.column=o.col}if(o.hasOwnProperty("showOnlyHeader")){a.showOnlyHeader=o.showOnlyHeader}};t.prototype._sortCardsByRow=function(a){a.sort(function(a,o){if(!a.dashboardLayout&&o.dashboardLayout){return 1}else if(a.dashboardLayout&&!o.dashboardLayout){return-1}if(a.dashboardLayout.column&&a.dashboardLayout.row&&a.dashboardLayout.row===o.dashboardLayout.row){if(a.dashboardLayout.column<o.dashboardLayout.column){return-1}else if(a.dashboardLayout.column>o.dashboardLayout.column){return 1}}else if(a.dashboardLayout.row){return a.dashboardLayout.row-o.dashboardLayout.row}else{return 0}})};t.prototype.resizeCard=function(a,o,t,r){var s=this.getCardById(a);if(!s){return[]}var e=o.colSpan-s.dashboardLayout.colSpan;var d=o.rowSpan-s.dashboardLayout.rowSpan;s.dashboardLayout.showOnlyHeader=o.showOnlyHeader;if(e===0&&d===0){return{resizeCard:s,affectedCards:[]}}else if(t&&s.dashboardLayout.autoSpan){s.dashboardLayout.autoSpan=false}if(!t||d&&e===0){this._arrangeCards(s,{row:o.rowSpan,column:s.dashboardLayout.colSpan},"resize",r)}else{this._arrangeCards(s,{row:o.rowSpan,column:o.colSpan},"resize",r)}return{resizeCard:s,affectedCards:this._removeSpaceBeforeCard(r)}};t.prototype._removeSpaceBeforeCard=function(a){this._sortCardsByRow(this.aCards);var o={};for(var t=1;t<=this.iColCount;t++){o[t]=1}for(var r=0;r<this.aCards.length;r++){var s=this.aCards[r].dashboardLayout.column,e=this.aCards[r].dashboardLayout.column+this.aCards[r].dashboardLayout.colSpan-1;if(this.aCards[r].dashboardLayout.visible){if(e>this.iColCount){e=this.iColCount;var d=this.iColCount-this.aCards[r].dashboardLayout.column+1;if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{colSpan:d,oldColSpan:this.aCards[r].dashboardLayout.colSpan}},isUserDependent:true})}this.aCards[r].dashboardLayout.colSpan=d}if(this.aCards[r].dashboardLayout.colSpan>1){var i=[];for(var n=s;n<=e;n++){i.push(o[n])}var u=Math.max.apply(Math,i);for(var h=s;h<=e;h++){o[h]=u+this.aCards[r].dashboardLayout.rowSpan}if(a&&u!==this.aCards[r].dashboardLayout.row){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:u,oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=u}else{if(this.aCards[r].dashboardLayout.row!==o[s]){if(a){a.push({changeType:"dragOrResize",content:{cardId:this.aCards[r].id,dashboardLayout:{row:o[s],oldRow:this.aCards[r].dashboardLayout.row}},isUserDependent:true})}this.aCards[r].dashboardLayout.row=o[s]}o[s]=this.aCards[r].dashboardLayout.row+this.aCards[r].dashboardLayout.rowSpan}}}return this.aCards};t.prototype._arrangeCards=function(a,t,r,s){var e=o({},a);var d=false;if(r==="drag"&&a.dashboardLayout.column===t.column&&t.row!==a.dashboardLayout.row){d=true}this._sortCardsByRow(this.aCards);var i=[];var n=false;var u;if(r==="drag"){a.dashboardLayout.row=t.row;a.dashboardLayout.column=t.column}else if(r==="resize"){a.dashboardLayout.rowSpan=t.row;a.dashboardLayout.colSpan=t.column}i.push(a);for(var h=0;h<i.length;h++){for(var l=0;l<this.aCards.length;l++){if(i[h].id===this.aCards[l].id||!i[h].dashboardLayout.visible){continue}else{n=this._checkOverlapOfCards(i[h],this.aCards[l]);if(n===true){if(d){if(t.row<e.dashboardLayout.row&&t.row===this.aCards[l].dashboardLayout.row){i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row;u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}else if(t.row>e.dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan){u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=e.dashboardLayout.row;i[h].dashboardLayout.row=this.aCards[l].dashboardLayout.row+this.aCards[l].dashboardLayout.rowSpan;i.push(i[h]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}else{u=this.aCards[l].dashboardLayout.row;this.aCards[l].dashboardLayout.row=i[h].dashboardLayout.row+i[h].dashboardLayout.rowSpan;i.push(this.aCards[l]);if(s){s.push({changeType:"dragOrResize",content:{cardId:this.aCards[l].id,dashboardLayout:{row:this.aCards[l].dashboardLayout.row,oldRow:u}},isUserDependent:true})}}}}}}};t.prototype._checkOverlapOfCards=function(a,o){var t=a.dashboardLayout.row;var r=a.dashboardLayout.row+a.dashboardLayout.rowSpan;var s=a.dashboardLayout.column;var e=a.dashboardLayout.column+a.dashboardLayout.colSpan;var d=o.dashboardLayout.row;var i=o.dashboardLayout.row+o.dashboardLayout.rowSpan;var n=o.dashboardLayout.column;var u=o.dashboardLayout.column+o.dashboardLayout.colSpan;var h=false,l=false;if(n>=s&&n<e||u>s&&u<=e||n<=s&&u>=e){h=true}if(d>=t&&d<r||i>t&&i<=r||d<=t&&i>=r){l=true}return h&&l};t.prototype.extractCurrentLayoutVariant=function(){var a=0;var o={};var t=[];function r(a){return a.id===o.id}for(a=0;a<this.aCards.length;a++){o=this.aCards[a];t=this.oLayoutVars.filter(r);var s={};var e={row:o.dashboardLayout.row,col:o.dashboardLayout.column,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader};s["C"+this.iColCount]=e;if(!(Array.isArray(t)&&t.length!==0)){this.oLayoutVars.push({id:o.id,visibility:o.dashboardLayout.visible,selectedKey:o.settings.selectedKey,dashboardLayout:s})}else{t[0].selectedKey=o.settings.selectedKey||t[0].selectedKey;t[0].dashboardLayout={};t[0].dashboardLayout["C"+this.iColCount]=e}}};t.prototype._findHighestOccupiedRow=function(){var a=0,o=[];function t(a){return a.dashboardLayout.column===s}function r(a,o,t){return a.dashboardLayout.row===Math.max.apply(Math,t.map(function(a){return a.dashboardLayout.row}))}for(var s=1;s<=this.iColCount;s++){var e=this.aCards.filter(t);if(!!e){var d=e.filter(r)[0];if(!!d){var i=d.dashboardLayout.row===undefined?0:+d.dashboardLayout.row;var n=d.dashboardLayout.rowSpan===undefined?0:+d.dashboardLayout.rowSpan;o.push(i+n)}}}a=Math.max.apply(Math,o.map(function(a){return a}));return a};t.prototype._getDefaultCardItemHeightAndCount=function(o){var t=a._setCardpropertyDensityAttribute();var r={List_condensed:{itemLength:5,itemHeight:64},List_condensed_imageSupported_cozy:{itemLength:5,itemHeight:72},List_condensed_imageSupported_compact:{itemLength:5,itemHeight:60},List_extended:{itemLength:3,itemHeight:97},List_condensed_bar:{itemLength:5,itemHeight:65},List_extended_bar:{itemLength:3,itemHeight:95},Table:{itemLength:5,itemHeight:48},Linklist:{itemLength:6,itemHeight:0}};var s={KPIHeader:{1:{1:158,2:174},2:{1:179,2:195},3:{1:201,2:223}},NormalHeader:{1:{1:82,2:98},2:{1:103,2:119},3:{1:125,2:141}}};var e=22;var d=21;var i=0;if(o){var n=o.template,u=o.settings.listType,h=o.settings.listFlavor,l=o.settings.imageSupported,y=0,p=0;if(n=="sap.ovp.cards.list"||n=="sap.ovp.cards.v4.list"){if(u=="extended"){if(h=="bar"){y=r["List_extended_bar"]["itemLength"];p=r["List_extended_bar"]["itemHeight"]}else{y=r["List_extended"]["itemLength"];p=r["List_extended"]["itemHeight"]}}else{if(h=="bar"){y=r["List_condensed_bar"]["itemLength"];p=r["List_condensed_bar"]["itemHeight"]}else{if(l==="true"){if(t==="cozy"){p=r["List_condensed_imageSupported_cozy"]["itemHeight"]}else{p=r["List_condensed_imageSupported_compact"]["itemHeight"]}}else{p=r["List_condensed"]["itemHeight"]}y=r["List_condensed"]["itemLength"]}}}else if(n=="sap.ovp.cards.table"||n=="sap.ovp.cards.v4.table"){y=r["Table"]["itemLength"];p=r["Table"]["itemHeight"]}else if(n==="sap.ovp.cards.linklist"||n.template==="sap.ovp.cards.v4.linklist"){y=r["Linklist"]["itemLength"];p=r["Linklist"]["itemHeight"]}var L=o.settings.defaultSpan&&o.settings.defaultSpan.minimumTitleRow?o.settings.defaultSpan.minimumTitleRow:1;var b=o.settings.defaultSpan&&o.settings.defaultSpan.minimumSubTitleRow?o.settings.defaultSpan.minimumSubTitleRow:1;var c=o.settings.dataPointAnnotationPath||o.settings.tabs&&o.settings.tabs[0].dataPointAnnotationPath?"KPIHeader":"NormalHeader";i=s[c][L][b];if(c==="KPIHeader"){if(o.settings.showFilterInHeader===true){i+=e}if(o.settings.showSortingInHeader===true){i+=d}}return{noOfItems:y,itemHeight:p,headerHeight:i}}};return t},true);
sap.ui.predefine("sap/ovp/ui/DashboardLayoutRearrange", ["sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ui/core/Core"],function(t,a,jQuery,e,s,o,i){"use strict";var l=new s("OVP.ui.DashboardLayoutRearrange");var r=function(t){this.init(t)};r.prototype.init=function(a){a.beforeDragCallback=this._beforeDragHandler.bind(this);a.dragStartCallback=this._dragStartHandler.bind(this);a.dragMoveCallback=this._dragMoveHandler.bind(this);a.dragEndCallback=this._dragEndHandler.bind(this);a.resizeStartCallback=this._resizeStartHandler.bind(this);a.resizeMoveCallback=this._resizeMoveHandler.bind(this);a.resizeEndCallback=this._resizeEndHandler.bind(this);a.endCallback=this._endHandler.bind(this);this.placeHolderClass=a.placeHolderClass;this.layout=a.layout;this.settings=a;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.aCards=a.aCards;this.layoutUtil=a.layoutUtil;this.verticalMargin=null;this.horizontalMargin=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.rowHeight=a.rowHeight;this.floaterData=null;this.resizeData={};this.updatedScrollTop=0;this.SCROLL_OFFSET=16};r.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};r.prototype._resizeStartHandler=function(t,s){if(!a.system.desktop){return}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}var o=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(s.id));if(o.template==="sap.ovp.cards.stack"||o.settings.stopResizing){return}this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.startResizeCardConfig=e([],this.layoutUtil.getCards());this.layoutUtil.resizeStartCard={cardId:o.id,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader,row:o.dashboardLayout.row,column:o.dashboardLayout.column};if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}s.classList.add("sapOvpCardResize");o.dashboardLayout.autoSpan=false;this.initCardsSettings()};r.prototype._resizeEndHandler=function(t,e){if(e){e.classList.remove("sapOvpCardResize");if(this.uiActions.isResizeX&&!this.uiActions.isResizeY&&e.classList.contains("sapOvpNotResizableLeftRight")){return}this.updatedScrollTop=0;e.style.zIndex="auto";var s=this.layoutUtil.changedCards.resizeCard;if(s){s.dashboardLayout.maxColSpan=s.dashboardLayout.colSpan;this.layoutUtil._sizeCard(s);this.layoutUtil.dragOrResizeChanges=[];var i=this.layoutUtil.getCards();var l=this.layoutUtil.startResizeCardConfig;for(var r=0;r<i.length;r++){var d=i[r];var h=n(l,d.id);var u=h[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:d.id,dashboardLayout:{row:d.dashboardLayout.row,oldRow:u.dashboardLayout.row,column:d.dashboardLayout.column,oldColumn:u.dashboardLayout.column,rowSpan:d.dashboardLayout.rowSpan,oldRowSpan:u.dashboardLayout.rowSpan,colSpan:d.dashboardLayout.colSpan,oldColSpan:u.dashboardLayout.colSpan,maxColSpan:d.dashboardLayout.maxColSpan,oldMaxColSpan:u.dashboardLayout.maxColSpan,noOfItems:d.dashboardLayout.noOfItems,oldNoOfItems:u.dashboardLayout.noOfItems,autoSpan:d.dashboardLayout.autoSpan,oldAutoSpan:u.dashboardLayout.autoSpan,showOnlyHeader:d.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:u.dashboardLayout.showOnlyHeader}},isUserDependent:true})}}this.layoutUtil.changedCards={};if(a.system.desktop){document.querySelector("body").classList.remove("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");o.removeElementById("sapOvpOverlayDivForCursor");o.removeElementById("ovpResizeRubberBand");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});this.layoutUtil.setAriaPos();this.layoutUtil.startResizeCardConfig=[];if(window.getSelection){var p=window.getSelection();p.removeAllRanges()}}};r.prototype._resizeMoveHandler=function(t){if(!a.system.desktop){return}if(t.element){var e,s,o,i,r=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(t.element.id));if(r.template==="sap.ovp.cards.stack"||r.settings.stopResizing){return}var n=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var d=n.offsetHeight;var h=n.getBoundingClientRect();if(t.evt.clientY-n.offsetTop+this.SCROLL_OFFSET>d){n.scrollTop=n.scrollTop+this.SCROLL_OFFSET;this.updatedScrollTop+=this.SCROLL_OFFSET}else if(t.evt.clientY-n.offsetTop<h.top+this.SCROLL_OFFSET&&n.scrollTop!==0){n.scrollTop=n.scrollTop-this.SCROLL_OFFSET;this.updatedScrollTop-=this.SCROLL_OFFSET}s=this.layoutUtil.calculateCardProperties(r.id);e=this._calculateMinimumCardHeight(t);if(e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()&&this.uiActions.isResizeX&&!this.uiActions.isResizeY){return}i=e.ghostHeightCursor;o=e.ghostWidthCursor<=this.layoutUtil.getColWidthPx()?this.layoutUtil.getColWidthPx():e.ghostWidthCursor;if(!this.uiActions.isResizeY){if(t.element.classList.contains("sapOvpNotResizableLeftRight")||t.element.classList.contains("sapOvpNotResizableRight")&&e.ghostWidthCursor>r.dashboardLayout.colSpan*this.layoutUtil.getColWidthPx()){return}else{l.info("Not a valid scenario")}if((r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list")&&o>this.layoutUtil.getColWidthPx()*2||(r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&o>this.layoutUtil.getColWidthPx()*3){return}}if((r.template==="sap.ovp.cards.linklist"||r.template==="sap.ovp.cards.v4.linklist")&&r.settings.listFlavor==="carousel"&&i>this.layoutUtil.getRowHeightPx()*45){t.element.classList.add("sapOvpNotResizableDown");return}var u=s.leastHeight+2*this.layoutUtil.CARD_BORDER_PX;var p=s.minCardHeight+2*this.layoutUtil.CARD_BORDER_PX;t.element.classList.remove("sapOvpMinHeightContainer");if(i<=u){i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}else if(i>u&&i<=p){var y=(u+p)/2;if(i>y){i=p;this.resizeData.showOnlyHeader=false}else{i=u;t.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true}}else{if(!this.uiActions.isResizeX&&(r.template==="sap.ovp.cards.list"||r.template==="sap.ovp.cards.v4.list"||r.template==="sap.ovp.cards.table"||r.template==="sap.ovp.cards.v4.table")){var c=s.headerHeight+s.dropDownHeight+2*this.layoutUtil.CARD_BORDER_PX;var g=Math.round((i-c)/s.itemHeight);i=g*s.itemHeight+c}this.resizeData.showOnlyHeader=false}this._addOverLay(e.cursor);this.resizeData.colSpan=Math.round(o/this.layoutUtil.getColWidthPx());this.resizeData.rowSpan=Math.ceil(i/this.layoutUtil.getRowHeightPx());this.layoutUtil.updateCardSize(r.id,i,o,this.resizeData.rowSpan);this.showGhostWhileResize(t,r);if(this.resizeData.colSpan&&this.resizeData.rowSpan){this.layoutUtil.resizeCard(t.element.getAttribute("id"),this.resizeData,this.layoutUtil.dragOrResizeChanges)}this.resizeData={};this.layoutUtil.setKpiNumericContentWidth(t.element)}};r.prototype._beforeDragHandler=function(t,e){if(t.type==="mousedown"){t.preventDefault()}if(a.browser.mobile){this.selectableElemets=jQuery(e).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};r.prototype._dragStartHandler=function(t,s){if(a.system.desktop){document.querySelector("body").classList.add("sapOVPDisableUserSelect","sapOVPDisableImageDrag")}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){jQuery(this.layoutUtil.sLastFocusableCard).blur()}this.layoutUtil.dragOrResizeChanges=[];var o=this.layoutUtil.getCardId(s.id);var i=this.layoutUtil.dashboardLayoutModel.getCardById(o);this.layoutUtil.dragStartCardsConfig=e([],this.layoutUtil.getCards(this.columnCount));this.layoutUtil.dragStartCard={cardId:i.id,row:i.dashboardLayout.row,column:i.dashboardLayout.column,rowSpan:i.dashboardLayout.rowSpan,colSpan:i.dashboardLayout.colSpan,maxColSpan:i.dashboardLayout.maxColSpan,noOfItems:i.dashboardLayout.noOfItems,autoSpan:i.dashboardLayout.autoSpan,showOnlyHeader:i.dashboardLayout.showOnlyHeader};l.info(s);if(window.getSelection){var r=window.getSelection();r.removeAllRanges()}this.initCardsSettings();var n=s.children[0].getBoundingClientRect();this.floaterData={width:n.width,height:n.height,startLeft:n.left-this.layoutOffset.left,startTop:n.top-this.layoutOffset.top}};r.prototype._dragMoveHandler=function(t){if(t.element){var a=0;var e=0;var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var o=document.getElementsByClassName("sapFDynamicPageTitleWrapper")[0].offsetHeight;if(document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0]){e=document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0].offsetHeight}var i=s.offsetHeight;var l=s.getBoundingClientRect();var r;if(document.getElementsByClassName("sapFDynamicPageHeader")[0]){a=document.getElementsByClassName("sapFDynamicPageHeader")[0].offsetHeight}if(t.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>i){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET;r=s.scrollTop}else if(t.evt.clientY-s.offsetTop<l.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET;r=s.scrollTop}else{r=s.scrollTop}this.floaterData.id=t.element.id;this.floaterData.left=t.clone.getBoundingClientRect().left;this.floaterData.top=t.clone.getBoundingClientRect().top+r-(o+a+e);var n=Math.round(this.floaterData.left/this.layoutUtil.getColWidthPx());var d={row:Math.round(this.floaterData.top/this.layoutUtil.getRowHeightPx())+1,column:this.isRTLEnabled?this.columnCount-n:n+1};d.row=d.row<=0?1:d.row;d.column=d.column<=1?1:d.column;var h=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(this.floaterData.id));if(d.column+h.dashboardLayout.colSpan>this.columnCount){d.column=this.columnCount-h.dashboardLayout.colSpan+1}this.floaterData.row=d.row;this.floaterData.column=d.column;jQuery.when(this.layoutUtil.dashboardLayoutModel._arrangeCards(h,this.floaterData,"drag",this.layoutUtil.dragOrResizeChanges)).done(function(){this.layoutUtil._positionCards(this.aCards);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard()}.bind(this));this.showGhostWhileDragMove({row:h.dashboardLayout.row,column:h.dashboardLayout.column},t)}};r.prototype._dragEndHandler=function(t,e,s){if(e){var i=e.getBoundingClientRect();var l=s.getBoundingClientRect();var r=window.getComputedStyle(s).transform.split(",");var d=i.top-l.top;var h=i.left-l.left;var u=parseInt(r[4],10)+h;var p=parseInt(r[5],10)+d;s.style[this.layoutUtil.cssVendorTransition]="transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)";u=Math.abs(u)-8<0?0:u-8;p=Math.abs(p)-8<0?0:p-8;s.style[this.layoutUtil.cssVendorTransform]="translate3d("+u+"px, "+p+"px, 0px) ";this.layoutUtil._positionCards(this.aCards);jQuery(s).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){o.removeElementById("ovpDashboardLayoutMarker");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.dragOrResizeChanges=[];var s=this.layoutUtil.getCards();var i=this.layoutUtil.dragStartCardsConfig;for(var l=0;l<s.length;l++){var r=s[l];var d=n(i,r.id);var h=d[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:r.id,dashboardLayout:{row:r.dashboardLayout.row,oldRow:h.dashboardLayout.row,column:r.dashboardLayout.column,oldColumn:h.dashboardLayout.column,rowSpan:r.dashboardLayout.rowSpan,oldRowSpan:h.dashboardLayout.rowSpan,colSpan:r.dashboardLayout.colSpan,oldColSpan:h.dashboardLayout.colSpan,maxColSpan:r.dashboardLayout.maxColSpan,oldMaxColSpan:h.dashboardLayout.maxColSpan,noOfItems:r.dashboardLayout.noOfItems,oldNoOfItems:h.dashboardLayout.noOfItems,autoSpan:r.dashboardLayout.autoSpan,oldAutoSpan:h.dashboardLayout.autoSpan,showOnlyHeader:r.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:h.dashboardLayout.showOnlyHeader}},isUserDependent:true})}this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});if(a.system.desktop){document.body.classList.remove("sapOVPDisableUserSelect");document.body.classList.remove("sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(window.getSelection){var u=window.getSelection();u.removeAllRanges()}this.uiActions.removeClone();e.classList.remove(this.placeHolderClass);var p=this.layoutUtil.dashboardLayoutModel._findHighestOccupiedRow()+32;o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"height",p+"px");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"zIndex","1");o.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayout"),"height",p+"px");this.layoutUtil.setAriaPos();this.layoutUtil.dragStartCardsConfig=[]}.bind(this))}};r.prototype._endHandler=function(t,e){l.info(e);if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};r.prototype.initCardsSettings=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var t=this.jqLayout.scrollTop();var a=this.jqLayoutInner.height();this.isRTLEnabled=i.getConfiguration().getRTL();this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();this.corrY=this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();this.corrX=this.layoutOffset.left;this.columnCount=this.layoutUtil.dashboardLayoutModel.getColCount();var e=this.layout.getVisibleLayoutItems();if(!e){return}function s(t){return t.$().parent()[0]}this.aCardsOrder=e.map(s);var o=this.jqLayoutInner.children().first();var l=this.isRTLEnabled?"margin-left":"margin-right";this.verticalMargin=parseInt(o.css(l),10);var r=this.aCardsOrder[0];var n=r.getBoundingClientRect();var d=this.jqLayoutInner[0].getBoundingClientRect();this.horizontalMargin=parseInt(jQuery(r).css("margin-bottom"),10);this.verticalMargin=this.horizontalMargin;this.top=n.top-d.top;this.left=n.left-d.left;this.width=r.offsetWidth;jQuery(this.aCardsOrder).css("position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(a);this.jqLayout.scrollTop(t)};r.prototype.drawLayout=function(t){function a(t){var a=jQuery(t).position();t.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";t.style[this.layoutUtil.cssVendorTransform]="translate3d("+a.left+","+a.top+", 0px) "}var e=t.length;if(e>0){for(var s=0;s<e;s++){requestAnimationFrame(a.bind(this,t[s]))}}};r.prototype.showGhostWhileDragMove=function(t,a){var e=document.getElementById("ovpDashboardLayoutMarker"),s=(t.column-1)*this.layoutUtil.getColWidthPx(),o={top:(t.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX};if(!e){var i=document.createElement("div");i.id="ovpDashboardLayoutMarker";i.position="absolute";i.style.height=this.floaterData.height+"px";i.style.width=this.floaterData.width+"px";i.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";document.getElementsByClassName("sapUshellEasyScanLayoutInner")[0].appendChild(i)}else{e.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";e.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "}a.element.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";a.element.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) "};r.prototype.showGhostWhileResize=function(t,a){var e=document.getElementById("ovpResizeRubberBand"),s=(a.dashboardLayout.column-1)*this.layoutUtil.getColWidthPx(),o={top:(a.dashboardLayout.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-s-this.layoutUtil.CARD_BORDER_PX:s+this.layoutUtil.CARD_BORDER_PX},i=this.resizeData.rowSpan*this.layoutUtil.getRowHeightPx()-2*this.layoutUtil.CARD_BORDER_PX+2,l=this.resizeData.colSpan*this.layoutUtil.getColWidthPx()-2*this.layoutUtil.CARD_BORDER_PX+2;if(!e){var r=document.createElement("div");r.id="ovpResizeRubberBand";r.classList.add("ovpResizeRubberBand");r.position="absolute";r.style.height=i+"px";r.style.width=l+"px";r.style[this.layoutUtil.cssVendorTransition]="all 300ms ease";r.style[this.layoutUtil.cssVendorTransform]="translate3d("+o.left+"px,"+o.top+"px, 0px) ";t.element.parentElement.appendChild(r)}else{e.style.height=i+"px";e.style.width=l+"px"}};r.prototype._addOverLay=function(t){var a=document.getElementById("sapOvpOverlayDivForCursor");if(!a){var e=document.createElement("div");e.id="sapOvpOverlayDivForCursor";e.style.cursor=t;this.jqLayout[0].appendChild(e)}else{a.style.cursor=t}};r.prototype._calculateMinimumCardHeight=function(t){var a=t.element.getBoundingClientRect(),e=a.top,s=a.right,o,i,l;if(this.uiActions.isResizeX&&!this.uiActions.isResizeY){o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=a.height;l="ew-resize"}else if(!this.uiActions.isResizeX&&this.uiActions.isResizeY){o=a.width;i=t.moveY-e;l="ns-resize"}else{o=this.isRTLEnabled?s-t.moveX:t.moveX-a.left;i=t.moveY-e;l=this.isRTLEnabled?"nesw-resize":"nwse-resize"}return{ghostWidthCursor:o,ghostHeightCursor:i,cursor:l}};function n(t,a){return t.filter(function(t){return t.id===a})}return r});
sap.ui.predefine("sap/ovp/ui/DashboardLayoutUtil", ["sap/ovp/ui/DashboardLayoutRearrange","sap/ovp/ui/DashboardLayoutModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/ui/cardPositionHelper","sap/ui/core/Core"],function(t,a,o,e,jQuery,s,r,i,d,n){"use strict";var h=new r("OVP.ui.DashboardLayoutUtil");var l=function(t){this.aCards=null;this.ROW_HEIGHT_PX=16;this.MIN_COL_WIDTH_PX=320;this.CARD_BORDER_PX=8;this.EXTRA_MARGIN=8;this.oLayoutData={layoutWidthPx:1680,contentWidthPx:1600,colCount:5,previousColCount:0,colWidthPx:this.MIN_COL_WIDTH_PX,rowHeightPx:this.ROW_HEIGHT_PX,marginPx:this.convertRemToPx(3)-this.CARD_BORDER_PX};this.dashboardLayoutModel=new a(t,this.oLayoutData.colCount,this.ROW_HEIGHT_PX,this.CARD_BORDER_PX);this.layoutDomId="";this.oLayoutCtrl={};this.componentDomId="";this.lastTriggeredColWidth=0;this.changedCards={};this.isRTLEnabled=n.getConfiguration().getRTL();switch(true){case e.browser.webkit:this.cssVendorTransition="-webkit-transition";this.cssVendorTransform="-webkit-transform";break;case e.browser.msie:this.cssVendorTransition="-ms-transition";this.cssVendorTransform="-ms-transform";break;case e.browser.mozilla:this.cssVendorTransition="-moz-transition";this.cssVendorTransform="-moz-transform";break;default:this.cssVendorTransition="transition";this.cssVendorTransform="transform"}};l.prototype.setLayout=function(t){this.oLayoutCtrl=t;this.layoutDomId=t.getId();var a=this.layoutDomId.indexOf("---")+3;var o=this.layoutDomId.substring(0,a);var e=this.layoutDomId.substring(a);this.componentDomId=o+e.split("--")[0]};l.prototype.getDashboardLayoutModel=function(){return this.dashboardLayoutModel};l.prototype.updateCardVisibility=function(t){this.dashboardLayoutModel.updateCardVisibility(t);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);this.dashboardLayoutModel._removeSpaceBeforeCard();this._setCardsCssValues(this.aCards);this._positionCards(this.aCards)};l.prototype.updateLayoutData=function(t){var a=this.oLayoutData.marginPx,o=0,s=320,r=1024,i=this.CARD_BORDER_PX,d=this.EXTRA_MARGIN,n=t+a,h,l;this.oLayoutData.layoutWidthPx=t;if(n<=s){a=this.convertRemToPx(.5)-i;o=e.system.desktop?16:0}else if(n<=r){a=this.convertRemToPx(1)-i;o=e.system.desktop?8:0}else{a=this.convertRemToPx(3)-i}if(a!==this.oLayoutData.marginPx){this.oLayoutData.marginPx=a;jQuery(".sapUshellEasyScanLayout").css({"margin-left":a+"px"})}this.oLayoutData.contentWidthPx=t-a-o;this.oLayoutData.previousColCount=this.oLayoutData.colCount;this.oLayoutData.colCount=Math.round(this.oLayoutData.contentWidthPx/this.MIN_COL_WIDTH_PX);if(this.oLayoutData.colCount===0){this.oLayoutData.colCount=1}this.oLayoutData.colWidthPx=this.oLayoutData.contentWidthPx/this.oLayoutData.colCount;if(jQuery(".sapOvpDashboardDragAndDrop").length>0&&jQuery(".easyScanLayoutItemWrapper").length>0){h=jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft+d;if(jQuery(".sapOvpDashboardDragAndDrop")[0].offsetLeft<40){l=h+8}else{l=h}}else{h=a+d;l=a+o+d}if(e.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":h+"px","margin-right":l+"px"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":h+"px","margin-right":l+"px"})}jQuery(".ovpWrapper .sapFDynamicPageTitle").css({visibility:"visible"});return this.oLayoutData};l.prototype.getRearrange=function(a){var o={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"dashboardLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:500,isTouch:!e.system.desktop,debug:false,aCards:this.aCards,layoutUtil:this,rowHeight:this.oLayoutData.rowHeightPx,colWidth:this.oLayoutData.colWidthPx};return new t(s(o,a))};l.prototype.resizeLayout=function(t){var a=this.oLayoutData.colCount;var o=false;if(this.oLayoutData.layoutWidthPx!==t&&t!==0){this.updateLayoutData(t);o=Math.abs(this.lastTriggeredColWidth-this.oLayoutData.colWidthPx)>this.convertRemToPx(.5);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);for(var e=0;e<this.aCards.length;e++){var s=this.aCards[e];this.setCardCssValues(s);var r=document.getElementById(this.getCardDomId(s.id));if(r){r.style.width=s.dashboardLayout.width;r.style.height=s.dashboardLayout.height;if(a!==this.oLayoutData.colCount){r.style[this.cssVendorTransition]="all 0.25s ease"}else{r.style[this.cssVendorTransition]=""}r.style[this.cssVendorTransform]="translate3d("+s.dashboardLayout.left+" ,"+s.dashboardLayout.top+", 0px)";this.setKpiNumericContentWidth(r)}if(a!==this.oLayoutData.colCount&&o){this._triggerCardResize(s)}}this.dashboardLayoutModel._removeSpaceBeforeCard();this.oLayoutCtrl.fireAfterDragEnds();if(o){this.lastTriggeredColWidth=this.oLayoutData.colWidthPx}this.setAriaPos()}};l.prototype.getCards=function(t){if(this.aCards&&this.oLayoutData.previousColCount===t){return this.aCards}this._setColCount(t);this.aCards=this.dashboardLayoutModel.getCards(t);this._setCardsCssValues(this.aCards);return this.aCards};l.prototype.resetToManifest=function(){this.aCards=[];this.dashboardLayoutModel.resetToManifest()};l.prototype.getCardDomId=function(t){return this.layoutDomId+"--"+t};l.prototype.getCardId=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[2]:""};l.prototype.getCardIdFromComponent=function(t){var a=t.indexOf("---")+3;var o=t.substring(a);return o?o.split("--")[1]:""};l.prototype.isCardAutoSpan=function(t){return this.dashboardLayoutModel.getCardById(t).dashboardLayout.autoSpan};l.prototype.setAutoCardSpanHeight=function(t,a,o){var e,s,r;if(!a&&t&&t.target.parentElement){var i=t.target.parentElement.parentElement.id;var d=i.indexOf("---")+3;var n=i.substring(d);a=n.split("--")[1]}var h=o;if(!h&&t){h=t.size.height}if(this.isCardAutoSpan(a)){r=this.dashboardLayoutModel.getCardById(a);if(r.dashboardLayout.showOnlyHeader){e=Math.ceil((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}else{e=Math.round((h+2*this.CARD_BORDER_PX)/this.getRowHeightPx())}s=this.dashboardLayoutModel.resizeCard(a,{rowSpan:e,colSpan:1},false);this._sizeCard(s.resizeCard);this._positionCards(s.affectedCards);this.setAriaPos()}};l.prototype.calculateCardProperties=function(t){var a=this._getCardController(t);var o=this.dashboardLayoutModel.getCardById(t);var e=250,s,r,d,n,h;if(a){h=a.getItemHeight(a,"ovpCardHeader");s=h===0?o.dashboardLayout.headerHeight:h;r=a.getItemHeight(a,"toolbar");if(o.template==="sap.ovp.cards.list"||o.template==="sap.ovp.cards.v4.list"){h=a.getItemHeight(a,"ovpList",true);d=h===0?o.dashboardLayout.itemHeight:h;n=s+r+d}else if(o.template==="sap.ovp.cards.table"||o.template==="sap.ovp.cards.v4.table"){d=o.dashboardLayout.itemHeight;n=s+r+2*d}else if(o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist"){if(o.settings.listFlavor==="carousel"){n=s+i.getOuterHeight(document.querySelector(".sapOvpCarouselContentHeader"))+240+i.getOuterHeight(document.querySelector(".sapMCrslControlsBottom.sapMCrslControls"))}else{d=a.getItemHeight(a,"ovpLinkList",true);var l=a.getView().getModel("ovpCardProperties").getProperty("/densityStyle");if(l==="cozy"){n=s+r+d+8}else{n=s+r+d+4}}}else if(o.template==="sap.ovp.cards.charts.analytical"){var p=a.getView().byId("bubbleText")?43:0;n=s+r+e+p+50}else{n=s+r}return{headerHeight:s,dropDownHeight:r,itemHeight:d,minCardHeight:n,leastHeight:s}}};l.prototype._sizeCard=function(t){if(!t){return}var a=document.getElementById(this.getCardDomId(t.id));t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";if(a){a.style.height=t.dashboardLayout.height;a.style.width=t.dashboardLayout.width;this._triggerCardResize(t)}this.dashboardLayoutModel._removeSpaceBeforeCard();var o=this.dashboardLayoutModel._findHighestOccupiedRow()+32;jQuery(".sapUshellEasyScanLayoutInner").css({height:o+"px"});jQuery(".sapUshellEasyScanLayout").css({height:o+"px"})};l.prototype._triggerCardResize=function(t){var a=t.dashboardLayout,o=t.id,e=this._getCardComponentDomId(o),s=document.getElementById(e),r=this._getCardController(o),i,d,n;try{if((a.autoSpan||!a.visible)&&r){d=r.getCardItemsBinding();i=this.calculateCardProperties(o);if(d&&i){var l=d.getLength();var p=l?Math.min(l,t.dashboardLayout.noOfItems):t.dashboardLayout.noOfItems;var u=l===0?t.dashboardLayout.noOfItems:p;var y=a.rowSpan*this.ROW_HEIGHT_PX;var c=y-(i.headerHeight+2*this.CARD_BORDER_PX);if(t.template==="sap.ovp.cards.table"||t.template==="sap.ovp.cards.v4.table"){r.addColumnInTable(s,a)}else if(t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list"){n=u*i.itemHeight+i.dropDownHeight;s.style.height=Math.min(n,c)+t.dashboardLayout.headerHeight+"px"}}return}}catch(t){h.warning("Card auto span failed for card "+o+" and error is  "+t.toString())}a.iRowHeightPx=this.getRowHeightPx();a.iCardBorderPx=this.CARD_BORDER_PX;try{if(r){i=this.calculateCardProperties(o);r.resizeCard(a,i)}else{h.warning("OVP resize: no controller found for "+o)}}catch(t){h.warning("OVP resize: "+o+" catch "+t.toString())}};l.prototype._positionCards=function(t){if(!t){return}var a={},o=false;t.forEach(function(t){if(!t.dashboardLayout.visible){return}a=this._mapGridToPositionPx(t.dashboardLayout);t.dashboardLayout.top=a.top;t.dashboardLayout.left=a.left;var e=document.getElementById(this.getCardDomId(t.id));if(e){e.classList.remove("sapOvpNotResizableLeftRight","sapOvpNotResizableRight","sapOvpNotResizableDown");e.style[this.cssVendorTransition]="all 0.15s ease";e.style[this.cssVendorTransform]="translate3d("+a.left+" ,"+a.top+", 0px)";o=t.dashboardLayout.column+t.dashboardLayout.colSpan===this.oLayoutData.colCount+1;if(o){if(t.dashboardLayout.colSpan===1){e.classList.add("sapOvpNotResizableLeftRight")}else{e.classList.add("sapOvpNotResizableRight")}}if((t.template==="sap.ovp.cards.list"||t.template==="sap.ovp.cards.v4.list")&&t.dashboardLayout.colSpan===2||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.colSpan===3){e.classList.add("sapOvpNotResizableRight")}if((t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.listFlavor==="carousel"&&t.dashboardLayout.rowSpan===45){e.classList.add("sapOvpNotResizableDown")}}}.bind(this))};l.prototype.updateCardSize=function(t,a,o){var e=this.dashboardLayoutModel.getCardById(t);var s=this._getCardController(t);var r=document.getElementById(this.getCardDomId(t));r.style.height=a+"px";r.style.width=o+"px";r.style[this.cssVendorTransition]="none";r.style.zIndex=10;if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&e.settings.listFlavor==="carousel"){s.getView().byId("pictureCarousel").$().css("height",a-(e.dashboardLayout.headerHeight+2*this.CARD_BORDER_PX)+"px")}};l.prototype.resizeCard=function(t,a,o){this.changedCards=this.dashboardLayoutModel.resizeCard(this.getCardId(t),a,true,o);this._positionCards(this.changedCards.affectedCards)};l.prototype._mapGridToPositionPx=function(t){var a=(t.column-1)*this.getColWidthPx();var o={top:(t.row-1)*this.getRowHeightPx()+"px",left:(this.isRTLEnabled?-a:a)+"px"};return o};l.prototype._getCardComponentDomId=function(t){return this.componentDomId+"--"+t};l.prototype._getCardController=function(t){var a=null;var o=n.byId(this._getCardComponentDomId(t));if(o){var e=o.getComponentInstance();if(e){a=e.getAggregation("rootControl").getController()}}return a};l.prototype._setCardsCssValues=function(t){var a=0;for(a=0;a<t.length;a++){this.setCardCssValues(t[a])}};l.prototype.setCardCssValues=function(t){var a=(t.dashboardLayout.column-1)*this.oLayoutData.colWidthPx;t.dashboardLayout.top=(t.dashboardLayout.row-1)*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.width=t.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";t.dashboardLayout.height=t.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";t.dashboardLayout.left=(this.isRTLEnabled?-a:a)+"px"};l.prototype.convertRemToPx=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseInt(t.split("rem")[0],10):0}return a*o.getPixelPerRem()};l.prototype.convertPxToRem=function(t){var a=t;if(typeof t==="string"||t instanceof String){a=t.length>0?parseFloat(t.split("px")[0],10):0}return a/o.getPixelPerRem()};l.prototype.setKpiNumericContentWidth=function(t){var a=t.getElementsByClassName("sapOvpKpiContent");if(!!a&&a.length>0){var o=a[0];var e=8;var s=16;o.style.width=this.getColWidthPx()-(2*e+2*s)+"px"}};l.prototype.getLayoutWidthPx=function(){return this.oLayoutData.colCount*this.oLayoutData.colWidthPx};l.prototype.getColWidthPx=function(){return this.oLayoutData.colWidthPx};l.prototype.getRowHeightPx=function(){return this.oLayoutData.rowHeightPx};l.prototype._setColCount=function(t){this.oLayoutData.colCount=t};l.prototype.setAriaPos=function(){var t=[];this.ariaPos={};this.aCards.forEach(function(a){if(a.dashboardLayout.visible===true){a.visited=false;if(t[a.dashboardLayout.column-1]){t[a.dashboardLayout.column-1].push(a)}else{t[a.dashboardLayout.column-1]=[a]}}});t.forEach(function(t){t.sort(function(t,a){if(t.dashboardLayout.row<a.dashboardLayout.row){return-1}else if(t.dashboardLayout.row>a.dashboardLayout.row){return 1}else{return 0}})});d.setAriaPosition(t,this)};return l},true);
sap.ui.predefine("sap/ovp/ui/EasyScanLayout", ["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/F6Navigation","sap/ui/events/KeyCodes","sap/ovp/cards/jUtils","sap/ui/core/Core","sap/ui/dom/jquery/Selectors"],function(jQuery,e,t,a,i,n,s,r,o,l,d,u){"use strict";var p=function(e){this.init(e)};p.prototype.init=function(e){e.beforeDragCallback=this._beforeDragHandler.bind(this);e.dragStartCallback=this._dragStartHandler.bind(this);e.dragMoveCallback=this._dragMoveHandler.bind(this);e.dragEndCallback=this._dragEndHandler.bind(this);e.endCallback=this._endHandler.bind(this);this.layout=e.layout;this.afterReplaceElements=e.afterReplaceElements||function(){};this.settings=e;delete e.afterReplaceElements;this.destroy();this.uiActions=new t(this.settings).enable();this.aCardsOrder=null;this.verticalMargin=null;this.horizontalMargin=null;this.columnCount=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.lastCollidedEl=null;this.lastCollisionTop=null;this.SCROLL_OFFSET=16};p.prototype.findCollision=function(e,t,a){var i;for(var n=0;n<a.length;n++){var s=a[n];var r=!(s.posDnD.right<e||s.posDnD.left>e);var o=!(s.posDnD.bottom<t||s.posDnD.top>t);if(r&&o){i=s;break}}return i};p.prototype.isCollisionTop=function(e,t,a){var i=(a.posDnD.bottom-a.posDnD.top)/2+a.posDnD.top;var n=!(i<t||a.posDnD.top>t);return n};p.prototype._dragMoveHandler=function(e,t){var a=e.element;var i=e.moveX-this.layoutOffset.left;var n=e.moveY-this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();if(!t){var s=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var r=s.offsetHeight;var o=s.getBoundingClientRect();if(e.evt.clientY-s.offsetTop+this.SCROLL_OFFSET>r){s.scrollTop=s.scrollTop+this.SCROLL_OFFSET}else if(e.evt.clientY-s.offsetTop<o.top+this.SCROLL_OFFSET&&s.scrollTop!==0){s.scrollTop=s.scrollTop-this.SCROLL_OFFSET}}var l=this.findCollision(i,n,this.aCardsOrder);if(!l){return}var d=this.isCollisionTop(i,n,l);if(l===a){this.lastCollidedEl=l;return}if(l===this.lastCollidedEl){if(this.lastCollisionTop===d){return}if(this.lastCollisionTop){this.lastCollisionTop=d;if(a.posDnD.top>l.posDnD.top){return}}else{this.lastCollisionTop=d;if(a.posDnD.top<l.posDnD.top){return}}}if(this.lastCollidedEl&&this.lastCollidedEl!==l&&this.lastCollidedEl!==a&&this.lastCollidedEl.posDnD.left===l.posDnD.left&&this.lastCollidedEl.posDnD.left===a.posDnD.left){l=this.lastCollidedEl}this.dragAndDropElement(a,l);this.lastCollidedEl=this.findCollision(i,n,this.aCardsOrder);if(this.lastCollidedEl){this.lastCollisionTop=this.isCollisionTop(i,n,this.lastCollidedEl)}};p.prototype.dragAndDropElement=function(e,t){if(e&&t){this.aCardsOrder=this.dragAndDropSwapElement(e,t,this.aCardsOrder);this.drawLayout(this.aCardsOrder)}};p.prototype.dragAndDropSwapElement=function(e,t,a){var i=a.slice();var n=a.indexOf(e);var s=a.indexOf(t);i[s]=e;i[n]=t;if(!!this.positionChanges&&t&&t.children){var r=t.children[0].getAttribute("id");this.positionChanges.push({changeType:"position",content:{cardId:r.substring(r.indexOf("mainView--")+10,r.length),position:n,oldPosition:s},isUserDependent:true})}return i};p.prototype.dragAndDropSwapElementForKeyboardNavigation=function(e,t){if(e&&t){var a=this.layout.getVisibleLayoutItems().map(function(e){return e.$().parent()[0]});var i=0;for(var n=0;n<a.length;n++){if(a[n]===e){a[n]=t;i++;continue}if(a[n]===t){a[n]=e;i++;continue}}if(i===2){this.afterReplaceElements(a)}}};p.prototype.initCardsSettingsForDragAndDrop=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var e=this.jqLayout.scrollTop();var t=this.jqLayoutInner.height();this.isRTLEnabled=u.getConfiguration().getRTL()?1:-1;this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();if(a.system.tablet===true&&a.system.desktop===false){this.jqLayout.css("height",this.jqLayoutInner.height())}var i=this.layout.getVisibleLayoutItems();if(!i){return}this.aCardsOrder=i.map(function(e){var t=e.$().parent()[0];t.posDnD={width:t.offsetWidth,height:t.offsetHeight};t.style.width=t.offsetWidth+"px";return t});var n=this.jqLayoutInner.children().first();var s=this.isRTLEnabled===1?"margin-left":"margin-right";this.verticalMargin=parseInt(n.css(s),10);var r=this.aCardsOrder[0];this.horizontalMargin=parseInt(getComputedStyle(r)["margin-bottom"],10);this.columnCount=this.layout.getColumnCount();this.top=r.getBoundingClientRect().top-this.jqLayoutInner[0].getBoundingClientRect().top;this.left=r.getBoundingClientRect().left-this.jqLayoutInner[0].getBoundingClientRect().left;this.width=r.offsetWidth;d.addStyleToAllElements(this.aCardsOrder,"position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(t);this.jqLayout.scrollTop(e)};p.prototype.drawLayout=function(e){var t=[];for(var a=0;a<this.columnCount;a++){t[a]=0}for(var i=0;i<e.length;i++){var n=i%this.columnCount;var s=t[n]++;var r=this.left-this.isRTLEnabled*(n*this.verticalMargin+n*this.width);var o=this.top;var l=e[i];for(var d=0;d<s;d++){o+=this.horizontalMargin;var u=i-(d+1)*this.columnCount;o+=e[u].posDnD.height}l.posDnD.top=o;l.posDnD.bottom=o+l.posDnD.height;l.posDnD.left=r;l.posDnD.right=r+l.posDnD.width;this.updateElementCSS(e[i])}};p.prototype.updateElementCSS=function(e){d.addStyleToAllElements(e,"top",e.posDnD.top);d.addStyleToAllElements(e,"left",e.posDnD.left)};p.prototype._dragStartHandler=function(e,t){this.positionChanges=[];if(a.system.desktop){d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}if(window.getSelection){var i=window.getSelection();i.removeAllRanges()}this.initCardsSettingsForDragAndDrop()};p.prototype._beforeDragHandler=function(e,t){if(a.browser.mobile){this.selectableElemets=jQuery(t).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable")}jQuery(this.settings.wrapper).addClass("dragAndDropMode")};p.prototype._dragEndHandler=function(e,t){this.lastCollidedEl=null;if(e.type=="mouseup"||e.type=="touchend"){if(this.aCardsOrder){this.afterReplaceElements(this.aCardsOrder)}}if(a.system.desktop){d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableUserSelect");d.addClassToAllElements(document.querySelectorAll("body"),"sapOVPDisableImageDrag")}jQuery(this.settings.wrapper).removeClass("dragAndDropMode");if(this.jqLayoutInner){this.jqLayoutInner.removeAttr("style")}if(this.aCardsOrder){jQuery(this.aCardsOrder).removeAttr("style")}this.uiActions.removeClone()};p.prototype._endHandler=function(e,t){if(a.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable")}};p.prototype.getSwapItemsFunction=function(){return this.dragAndDropSwapElementForKeyboardNavigation.bind(this)};p.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null}};var h={buildReplaceItemsInstance:function(e){var t={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"easyScanLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:800,isTouch:!a.system.desktop,debug:false};e=Object.assign({},t,e);return new p(e)}};var c=function(e,t){this.init(e,t)};c.prototype.init=function(e,t){this.easyScanLayout=e;this.swapItemsFunction=typeof t==="function"?t:function(){};this.keyCodes=l;this.jqElement=e.$();this.jqElement.on("keydown",this.keydownHandler.bind(this));this.jqElement.on("keyup",this.keyupHandler.bind(this));document.querySelector("body").addEventListener("keyup",this.bodyKeyupHandler.bind(this));document.querySelector("body").addEventListener("keydown",this.bodyKeydownHandler.bind(this));this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));this._ignoreSelfFocus=false;this.swapSourceElement=null;this.lastFocussedElement=null;this.lastFocussedClassId=null;this.jqElement.on("keyup",this.ctrlArrowUpDownHandler.bind(this))};c.prototype.ctrlArrowUpDownHandler=function(e){switch(e.keyCode){case this.keyCodes.PAGE_UP:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;default:break}};c.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");this.jqElement.find(".after").off(".keyboardNavigation");this.jqElement.find(".sapUshellEasyScanLayoutInner").off(".keyboardNavigation")}delete this.jqElement;delete this.easyScanLayout};c.prototype.getVisibleLayoutItems=function(){var e=this.easyScanLayout.getContent();var t=e.filter(function(e){return e.getVisible()});return t};c.prototype.afterFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}var e=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();var t=e.find(":sapTabbable").last();if(!t.length){t=e}t.focus()};c.prototype.layoutFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return}this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first().focus()};c.prototype.layoutItemFocusHandler=function(){var e=jQuery(document.activeElement);if(e){var t,a="";if(e.find(".valueStateText").length==1){var i=e.find(".valueStateText").find(".sapMObjectNumberText").text();var n=e.find(".valueStateText").find(".sapUiInvisibleText").text();e.find(".valueStateText").attr("aria-label",i+" "+n);e.find(".valueStateText").attr("aria-labelledby","")}e.find("[role='listitem']").attr("aria-label","");if(e.hasClass("easyScanLayoutItemWrapper")){var r="";var o=e.find(".cardCount");if(o.length===0){r="countDiv_"+(new Date).getTime();var l='<div id="'+r+'" class="cardCount"'+'" hidden></div>';e.append(l)}else{r=o[0].id}a+=r+" ";var d=e.find(".cardType");if(d.length!==0){a+=d[0].id+" "}}if(e.hasClass("sapOvpCardHeader")&&!e.hasClass("sapOvpStackCardContent")){var u="";var p=e.find(".cardHeaderType");if(p.length===0){var h=s.getText("CardHeaderType");u="cardHeaderType_"+(new Date).getTime();var c='<div id="'+u+'" class="cardHeaderType" aria-label="'+h+'" hidden></div>';e.append(c)}else{u=p[0].id}a+=u+" "}var f,y;if(e.hasClass("easyScanLayoutItemWrapper")){y=e.find(".sapOvpCardHeader");f=y.find("[aria-label]")}else{f=e.find("[aria-label]")}var m=e.find(".sapOvpStackCardHeader").length!==1;var g=e.find(".sapOvpExtendedBarListHBox").length===0;if(m&&g){for(t=0;t<f.length;t++){a+=f[t].id+" "}}if(e.hasClass("sapOvpCardHeader")){var v=e.find(".cardHeaderText");if(v.length!==0){for(var t=0;t<v.length;t++){if(a.indexOf(v[t].id)===-1){a+=v[t].id+" "}}}}if(a.length){e.attr("aria-labelledby",a)}if(e.prop("nodeName")==="LI"&&e.find(".linkListHasPopover").length!==0){if(e.find("#hasDetails").length===0){e.append("<div id='hasDetails' hidden>"+s.getText("HAS_DETAILS")+"</div>");e.attr("aria-describedby","hasDetails")}}var C=e.attr("id");if(C&&C.indexOf("ovpTable")!=-1&&e.find("[role='Link']")&&!e.hasClass("sapUiCompSmartLink")){var b=e.closest("td").attr("data-sap-ui-column"),S=e.closest("tbody").siblings().children().filter("tr").children();for(var t=0;t<S.length;t++){if(S[t].getAttribute("data-sap-ui")==b&&S[t].hasChildNodes("span")){var D=S[t].firstElementChild.getAttribute("id");e.attr("aria-labelledby",D)}}}}};c.prototype._getLayoutItemIndex=function(e){if(!e.hasClass("easyScanLayoutItemWrapper")){return false}var t=e.children().attr("id");var a=false;this.getVisibleLayoutItems().forEach(function(e,i){if(t==e.getId()){a=i}});return a};c.prototype._changeItemsFocus=function(e){var t=document.querySelectorAll(".easyScanLayoutItemWrapper");d.addAttributeToAllElements(t,"tabindex","-1");e.attr("tabindex",0);setTimeout(function(){e.focus()},500)};c.prototype._swapItemsFocus=function(e,t,a){e.preventDefault();t.attr("tabindex","-1");setTimeout(function(){a.attr("tabindex","0").focus()},0)};c.prototype.tabButtonHandler=function(e){var t=jQuery(document.activeElement);this.lastFocussedElement=t;if(t.hasClass("easyScanLayoutItemWrapper")){return}var a=t.closest(".easyScanLayoutItemWrapper");if(!a.length){return}var i=a.find(jQuery(".lastElement"));if(t.is(i)){e.stopPropagation();e.stopImmediatePropagation();var n=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(n)}};c.prototype.f7Handler=function(e){var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){t.find(":sapTabbable").first().focus()}else{t.closest(".easyScanLayoutItemWrapper").focus()}e.preventDefault()};c.prototype.shiftTabButtonHandler=function(e){var t=jQuery(document.activeElement);if(t.hasClass("after")){this.lastFocussedElement.focus();return}if(!t.hasClass("easyScanLayoutItemWrapper")){return}this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus()};c.prototype.arrowUpDownHandler=function(e,t){e.preventDefault();var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpCardHeader")){var n=jQuery(i)[a](".easyScanLayoutItemWrapper");if(!n.is(i)){this._swapItemsFocus(e,i,n)}}};c.prototype.arrowRightLeftHandler=function(e,t){var a=t?1:-1;var i=jQuery(document.activeElement);var n=this._getLayoutItemIndex(i);if(n===false){return}var s=this.getVisibleLayoutItems()[n+a];if(s){this._swapItemsFocus(e,i,s.$().parent())}};c.prototype.altPageUpAndHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==0){s=r[0]}else{s=r[a-n]}this._swapItemsFocus(e,t,s.$().parent())};c.prototype.altPageDownAndEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();if(n==i-1||a+(i-n)>r.length){s=r[r.length-1]}else{s=r[a+(i-n-1)]}this._swapItemsFocus(e,t,s.$().parent())};c.prototype.ctrlHomeHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a===false){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s=this.getVisibleLayoutItems();var r=s[n];var o=r.$().parent();if(o.is(t)){o=s[0].$().parent()}this._swapItemsFocus(e,t,o)};c.prototype.ctrlEndHandler=function(e){var t=jQuery(document.activeElement);var a=this._getLayoutItemIndex(t);if(a<0){return}var i=this.easyScanLayout.getColumnCount();var n=a%i;var s;var r=this.getVisibleLayoutItems();for(var o=r.length-1;o>=0;o--){if(o%i==n){s=r[o];break}}var l=s.$().parent();if(l.is(t)){l=r[r.length-1].$().parent()}this._swapItemsFocus(e,t,l)};c.prototype.pageUpDownHandler=function(e,t){var a=t?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("easyScanLayoutItemWrapper")){return}if(!i[a]().length){return}var n=false;var s=i;var r=jQuery(window).height();while(!n){var o=s[a]();if(!o.length){n=s;break}if(!t&&o.offset().top>r){n=o;break}var l=o.offset().top;var d=0;if(l){d=l<0?-1:1}if(t&&d<=0){n=o;break}s=o}this._swapItemsFocus(e,i,n)};c.prototype.ctrlArrowHandler=function(e){if(this.swapSourceElement==null){this.swapSourceElement=jQuery(document.activeElement);if(!this.swapSourceElement.hasClass("easyScanLayoutItemWrapper")){this.endSwap()}else{this.jqElement.on("keyup.keyboardNavigation",this.keyupHandler.bind(this));this.jqElement.addClass("dragAndDropMode");this.swapSourceElement.addClass("dragHovered")}}};c.prototype.keyupHandler=function(e){if(this.swapSourceElement!=null&&e.keyCode===this.keyCodes.CONTROL){var t=jQuery(document.activeElement);if(t.hasClass("easyScanLayoutItemWrapper")){this.swapItemsFunction(this.swapSourceElement[0],t[0]);this._changeItemsFocus(this.swapSourceElement)}this.endSwap()}else if(e.keyCode===this.keyCodes.SPACE){this.spacebarHandler(e)}};c.prototype.endSwap=function(e){this.swapSourceElement.removeClass("dragHovered");this.jqElement.removeClass("dragAndDropMode");this.swapSourceElement=null;this.jqElement.off("keyup.keyboardNavigation")};c.prototype.checkIfSwapInterrupted=function(e){if(this.swapSourceElement!=null&&e.keyCode!=this.keyCodes.ARROW_LEFT&&e.keyCode!=this.keyCodes.ARROW_RIGHT&&e.keyCode!=this.keyCodes.ARROW_UP&&e.keyCode!=this.keyCodes.ARROW_DOWN){this.endSwap()}};c.prototype.spacebarHandler=function(e){r.bCRTLPressed=e.ctrlKey||e.metaKey;var t=u.byId(e.target.id);if(t&&t.mEventRegistry.hasOwnProperty("press")){var a="#"+e.target.id;d.addClassToAllElements(document.querySelectorAll(a),"sapMLIBActive");t.firePress()}};c.prototype.bodyKeyupHandler=function(e){if(e.ctrlKey||e.metaKey){r.bCRTLPressed=false}};c.prototype.bodyKeydownHandler=function(e){if(e.ctrlKey||e.metaKey){r.bCRTLPressed=true}};c.prototype.keydownHandler=function(e){this.checkIfSwapInterrupted(e);switch(e.keyCode){case this.keyCodes.TAB:e.shiftKey?this.shiftTabButtonHandler(e):this.tabButtonHandler(e);break;case this.keyCodes.F6:if(e.shiftKey){this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();o.handleF6GroupNavigation(e)}else{this._ignoreSelfFocus=true;var t=this.jqElement.scrollTop();this.jqElement.find(".after").focus();o.handleF6GroupNavigation(e);this.jqElement.scrollTop(t)}break;case this.keyCodes.F7:this.f7Handler(e);break;case this.keyCodes.ARROW_UP:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,true);this.handleScrollUp();break;case this.keyCodes.ARROW_DOWN:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowUpDownHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,true);break;case this.keyCodes.ARROW_LEFT:if(e.ctrlKey==true){this.ctrlArrowHandler(e)}this.arrowRightLeftHandler(e,false);break;case this.keyCodes.HOME:e.ctrlKey==true?this.ctrlHomeHandler(e):this.altPageUpAndHomeHandler(e);break;case this.keyCodes.END:e.ctrlKey==true?this.ctrlEndHandler(e):this.altPageDownAndEndHandler(e);break;case this.keyCodes.PAGE_UP:e.altKey==true?this.altPageUpAndHomeHandler(e):this.pageUpDownHandler(e,true);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true)}break;case this.keyCodes.PAGE_DOWN:e.altKey==true?this.altPageDownAndEndHandler(e):this.pageUpDownHandler(e,false);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false)}break;case this.keyCodes.ENTER:this.spacebarHandler(e);break;default:break}};c.prototype.handleScrollUp=function(){var e=this.easyScanLayout._sOwnerId+"---mainView--ovpMain";if(e){var t=u.byId(e);if(t){setTimeout(function(){var e=t.getScrollDelegate();if(e){var a=document.activeElement.getBoundingClientRect().height;var i=e.getScrollTop();e.scrollTo(0,i-a-32)}},0)}}};var f=i.extend("sap.ovp.ui.EasyScanLayout",{metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{},afterColumnUpdate:{}},properties:{useMediaQueries:{group:"Misc",type:"boolean",defaultValue:false},dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},renderer:{render:function(e,t){e.openStart("div",t);e.class("sapUshellEasyScanLayout");e.openEnd();e.openStart("div");e.class("sapUshellEasyScanLayoutInner");e.attr("role","list");e.attr("aria-label","Cards");e.attr("tabindex",0);e.openEnd();var a=t.columnCount;var i=Array.apply(null,new Array(a)).map(function(){return[]});var n=t.getContent().filter(function(e){return e.getVisible()});for(var s=0;s<n.length;s++){i[s%a].push(n[s])}var r=1;i.forEach(function(t){e.openStart("div");e.class("easyScanLayoutColumn");e.openEnd();t.forEach(function(t,a){e.openStart("div");if(r===1){e.attr("tabindex",0)}else{e.attr("tabindex",-1)}e.class("easyScanLayoutItemWrapper");e.accessibilityState(undefined,{role:"listitem"});e.attr("aria-setsize",n.length);e.attr("aria-posinset",r);r++;e.openEnd();e.renderControl(t);e.openStart("div").class("lastElement").attr("tabindex",0).openEnd();e.close("div");e.close("div")});e.close("div")});e.close("div");e.openStart("div").class("after").attr("tabindex",0).openEnd();e.close("div")}}});var y=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1800,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}]};f.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true);this.columnResolutionList=y();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);var e=a.browser.msie&&a.browser.version>9;if(e&&this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(this.columnResolutionList)}else{this.resizeHandlerId=this.initResizeHandler(this.columnResolutionList)}};var m;var g=function(e,t,a){var i=function(e,t){this.updateColumnClass(t);this.refreshColumnCount(e,this.getContent())};if(a.matches){window.clearTimeout(m);m=window.setTimeout(i.bind(this,e,t),this.getDebounceTime())}};var v=function(e,t){var a=e.minWidth;var i=t&&t.minWidth;return"(min-width: "+a+"px)"+(i?" and (max-width: "+(i-1)+"px)":"")};f.prototype.initMediaListeners=function(e){var t=[];for(var a=0;a<e.length;a++){var i=v(e[a],e[a+1]);var n=window.matchMedia(i);var s=g.bind(this,e[a].columnCount,e[a].styleClass);n.addListener(s);n.bindedListener=s;s(n);t.push(n)}return t};f.prototype.initResizeHandler=function(e){var t;var a=this.getDebounceTime();var i=function(){window.clearTimeout(t);t=window.setTimeout(this.oControl.resizeHandler.bind(this,e),a)};return n.register(this,i)};f.prototype.resizeHandler=function(e){var t=this.iWidth;var a=this;var i=this.oControl;var n;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){t=window.innerWidth}for(var s=0;s<e.length;s++){if(!e[s+1]){n=e[s];break}if(e[s].minWidth<=t&&e[s+1].minWidth>t){n=e[s];break}}i.refreshColumnCount(n.columnCount,i.getContent(),a);i.updateColumnClass(n.styleClass);i.fireAfterColumnUpdate(n)};f.prototype.getColumnWidth=function(e){var t;switch(e){case"columns-blank":t=0;break;case"columns-narrow":t=20;break;case"columns-wide":t=25;break;default:break}return t};f.prototype.refreshColumnCount=function(e,t,a){this.columnCount=e;var i=jQuery();for(var n=0;n<e;n++){i=i.add("<div class='easyScanLayoutColumn'></div>")}var s=t.filter(function(e){return e.getVisible()});var r=1;for(var o=0;o<s.length;o++){jQuery(s[o].getDomRef()).parent().attr("aria-posinset",r);r++;i.get(o%e).appendChild(s[o].getDomRef().parentNode)}this.$().children(".sapUshellEasyScanLayoutInner").empty().append(i);if(a&&a.iWidth){this.headerMargin(a)}};f.prototype.headerMargin=function(t){var i=0,n=0;var s=t.iWidth;var r,o,l,d=0,u,p=0;var h=y();var c=e.getPixelPerRem();var f=parseInt(window.getComputedStyle(document.querySelector(".ovpWrapper .sapFDynamicPageTitleWrapper"),null).getPropertyValue("width").split("px")[0],10)*1/c;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContent").length>0){s=window.innerWidth}for(var m=0;m<h.length;m++){if(!h[m+1]){r=h[m];break}if(h[m].minWidth<=s&&h[m+1].minWidth>s){r=h[m];break}}u=this.getColumnWidth(r.styleClass);l=r.columnCount*u+(r.columnCount-1)*1;o=(f-l)/2;if(a.system.desktop){jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":o+"rem","margin-right":o+"rem"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":o+"rem","margin-right":o+"rem"})}jQuery(".ovpWrapper .sapFDynamicPageTitle").css({visibility:"visible"});if(a.system.desktop){f=document.body.clientWidth;if(document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer").length>0){i=document.querySelectorAll(".ovpWrapper .sapFDynamicPageContentFitContainer")[0].clientWidth}if(f===i){var g=document.querySelector(".ovpWrapper .sapFDynamicPageTitle")||undefined;var v=g&&getComputedStyle(g)["margin-left"];var C=g&&getComputedStyle(g)["margin-right"];if(typeof v==="string"||v instanceof String){v=v.length>0?parseInt(v.split("px")[0],10):0}if(typeof C==="string"||C instanceof String){C=C.length>0?parseInt(C.split("px")[0],10):0}d=jQuery(".ovpWrapper .sapFDynamicPageScrollBar").css("width");if(typeof d==="string"||d instanceof String){p=d.length>0?parseInt(d.split("px")[0],10):0}d=p;n=d/2;v=(v+n)/(c*1);C=(C+n)/(c*1);jQuery(".ovpWrapper .sapFDynamicPageTitle").css({"margin-left":v+"rem","margin-right":C+"rem",visibility:"visible"});jQuery(".ovpWrapper .sapFDynamicPageHeader").css({"margin-left":v+"rem","margin-right":C+"rem"})}}};f.prototype.getColumnCount=function(){return this.columnCount};f.prototype.getVisibleLayoutItems=function(){var e=this.getContent();var t=e.filter(function(e){return e.getVisible()});return t};f.prototype.updateColumnClass=function(e){if(this.columnStyle===e){return}this.removeStyleClass(this.columnStyle);this.addStyleClass(e);this.columnStyle=e};f.prototype.afterDragAndDropHandler=function(e){var t=this.removeAllAggregation("content",true);var a=[];var i=0;e.forEach(function(e,t){var i=e.children[0].getAttribute("id");var n=u.byId(i);a.push(n);jQuery(e).attr("aria-posinset",t+1)});for(var n=0;n<t.length;n++){if(t[n].getVisible()){this.addAggregation("content",a[i],true);i++}else{this.addAggregation("content",t[n],true)}}this.fireAfterDragEnds({positionChanges:this.layoutDragAndDrop.positionChanges});this.refreshColumnCount(this.getColumnCount(),this.getContent())};f.prototype.setActive=function(e){if(e){this.removeStyleClass("ovpOverlay")}else{this.addStyleClass("ovpOverlay")}};f.prototype.getActive=function(){return!this.hasStyleClass("ovpOverlay")};f.prototype.onAfterRendering=function(){if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId())}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy()}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=h.buildReplaceItemsInstance({afterReplaceElements:this.afterDragAndDropHandler.bind(this),rootSelector:this.getDragAndDropRootSelector(),layout:this})}if(this.keyboardNavigation){this.keyboardNavigation.destroy()}var e=this.layoutDragAndDrop?this.layoutDragAndDrop.getSwapItemsFunction():null;this.keyboardNavigation=new c(this,e);this.fireAfterRendering()};f.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(e){e.removeListener(e.bindedListener)});delete this.mediaQueryList}if(this.resizeHandlerId){n.deregister(this.resizeHandlerId)}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop}};return f});
sap.ui.predefine("sap/ovp/ui/OVPControllerExtensionTemplate", ["sap/ui/core/mvc/Controller","sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast","sap/ui/util/openWindow"],function(e,n,o,s){"use strict";return n.extend("{{controllerExtensionName}}",{})});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ovp/ui/OVPWrapper", ["sap/ui/core/Control"],function(e){"use strict";return e.extend("sap.ovp.ui.OVPWrapper",{metadata:{library:"sap.ovp",designTime:true,aggregations:{DynamicPage:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"DynamicPage"},init:function(){},renderer:function(e,a){e.openStart("div",a);e.class("ovpWrapper");e.openEnd();e.renderControl(a.getAggregation("DynamicPage"));e.close("div")}})});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2014 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ovp/ui/ObjectStream", ["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/Control","sap/m/Dialog","sap/ovp/app/resources","sap/ui/events/KeyCodes","sap/base/util/uid","sap/m/Button","sap/ui/core/Core","./ObjectStreamRenderer","sap/ui/dom/jquery/Selectors"],function(jQuery,t,e,s,i,a,r,o,n,l){"use strict";var p=null;var h=function(t){this.init(t)};h.prototype.init=function(t){this.objectStream=t;this.keyCodes=a;this.jqElement=t.$();this.jqElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".sapOvpObjectStreamItem",this.ObjectStreamFocusAccessabilityHandler.bind(this))};h.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation")}delete this.jqElement;delete this.objectStream};h.prototype._swapItemsFocus=function(t,e,s){t.preventDefault();e.attr("tabindex","-1");s.attr("tabindex","0").focus()};h.prototype.ObjectStreamFocusAccessabilityHandler=function(){var t=document.activeElement;t=jQuery(t);if(t){var e=t.find("[aria-label]");var s,i="";for(s=0;s<e.length;s++){if(e[s].getAttribute("role")=="heading"){i+=e[s].id+" "}}if(i.length){t.attr("aria-labelledby",i)}if(t.hasClass("sapOvpCardHeader")){t.closest(".sapOvpObjectStreamItem").removeAttr("aria-labelledby")}}};h.prototype.tabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){return}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable").focus();return}var s=e.closest(".sapOvpObjectStreamItem");if(!s.length){return}var i=s.find(":sapTabbable");if(i.eq(i.length-1).is(e)){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}};h.prototype.shiftTabButtonHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamClose").focus()}if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus()}if(e.hasClass("sapOvpObjectStreamHeader")){t.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable *:sapTabbable").last().focus();return}};h.prototype.enterHandler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamClose")){t.preventDefault();this.objectStream.getParent().close();if(p){p.focus()}return}if(e.hasClass("sapOvpObjectStreamItem")&&!e.next().length){e.children().click();return}};h.prototype.f6Handler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamClose")){this.jqElement.find(".sapOvpObjectStreamItem").attr("tabindex","-1").first().attr("tabindex","0").focus()}else{this.jqElement.find(".sapOvpObjectStreamClose").focus()}};h.prototype.f7Handler=function(t){var e=jQuery(document.activeElement);if(e.hasClass("sapOvpObjectStreamItem")){e.find(":sapTabbable").first().focus()}else{e.closest(".sapOvpObjectStreamItem").focus()}t.preventDefault()};h.prototype.leftRightHandler=function(t,e){var s=e?"next":"prev";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return false}var a=i[s]();if(!a.length){return}this._swapItemsFocus(t,i,a)};h.prototype.homeEndHandler=function(t,e){var s=e?"first":"last";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return false}t.preventDefault();var a=this.jqElement.find(".sapOvpObjectStreamItem")[s]();this._swapItemsFocus(t,i,a)};h.prototype.pageUpDownHandler=function(t,e){var s=e?"prev":"next";var i=jQuery(document.activeElement);if(!i.hasClass("sapOvpObjectStreamItem")){return}if(!i[s]().length){return}var a=false;var r=i;var o=window.innerWidth;while(!a){var n=r[s]();if(!n.length){a=r;break}if(!e&&n.offset().left>o){a=n;break}if(e&&n.offset().left+n.outerHeight()<=0){a=n;break}r=n}this._swapItemsFocus(t,i,a)};h.prototype.keydownHandler=function(t){switch(t.keyCode){case this.keyCodes.TAB:t.shiftKey?this.shiftTabButtonHandler(t):this.tabButtonHandler(t);break;case this.keyCodes.ENTER:case this.keyCodes.SPACE:this.enterHandler(t);break;case this.keyCodes.F6:this.f6Handler(t);break;case this.keyCodes.F7:this.f7Handler(t);break;case this.keyCodes.ARROW_UP:case this.keyCodes.ARROW_LEFT:this.leftRightHandler(t,false);break;case this.keyCodes.ARROW_DOWN:case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(t,true);break;case this.keyCodes.HOME:this.homeEndHandler(t,true);break;case this.keyCodes.END:this.homeEndHandler(t,false);break;case this.keyCodes.PAGE_UP:this.pageUpDownHandler(t,true);break;case this.keyCodes.PAGE_DOWN:this.pageUpDownHandler(t,false);break;default:break}};var c=e.extend("sap.ovp.ui.ObjectStream",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},placeHolder:{type:"sap.ui.core.Control",multiple:false},title:{type:"sap.ui.core.Control",multiple:false}}},renderer:l});c.prototype.init=function(){var t=this;this._closeButton=new o({icon:"sap-icon://decline",tooltip:i.getText("close"),type:"Transparent",press:function(){t.getParent().close()}})};c.prototype._startScroll=function(t){this._direction=t;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-Math.abs(this.wrapper.scrollLeft);var s;if(t=="left"){s=this.rtl&&!this.scrollReverse?e:this.wrapper.scrollLeft;if(s<=0){return}this.jqRightEdge.css("opacity",1)}else{s=this.rtl&&!this.scrollReverse?Math.abs(this.wrapper.scrollLeft):e;if(s<=0){return}this.jqLeftEdge.css("opacity",1)}var i=s*3;var a=t=="left"?s:~s+1;jQuery(this.container).one("transitionend",function(){this._mouseLeave({data:this})}.bind(this));this.container.style.transition="transform "+i+"ms linear";this.container.style.transform="translate("+a+"px, 0px) scale(1) translateZ(0px) "};c.prototype._mouseLeave=function(e){var s=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=s;e.data.container.style.transition="";this.rtl=n.getConfiguration().getRTL();var i;var a=s.split(",");if(s.substr(0,8)=="matrix3d"){i=parseInt(a[12],10)}else if(s.substr(0,6)=="matrix"){i=parseInt(a[4],10)}if(isNaN(i)){return}e.data.container.style.transform="none";if(t.browser.msie){i=this.rtl?~i:i}e.data.wrapper.scrollLeft+=~i+(e.data._direction=="left"?-5:5);e.data._checkEdgesVisibility()};var d;c.prototype.debounceScrollHandler=function(){window.clearTimeout(d);d=window.setTimeout(this._checkEdgesVisibility.bind(this),150)};c.prototype._initScrollVariables=function(){var e=this.$();this.container=e.find(".sapOvpObjectStreamScroll").get(0);this.rtl=n.getConfiguration().getRTL();this.wrapper=e.find(".sapOvpObjectStreamCont").get(0);this.scrollReverse=this.scrollReverse||this.wrapper.scrollLeft>0;this.shouldShowScrollButton=!t.system.phone&&!t.system.tablet||t.system.combi;this.jqRightEdge=e.find(".sapOvpOSEdgeRight");this.jqLeftEdge=e.find(".sapOvpOSEdgeLeft");if(this.shouldShowScrollButton){this.jqRightEdge.add(this.jqLeftEdge).on("mouseenter.objectStream",this,this._mouseEnter).on("mouseleave.objectStream",this,this._mouseLeave);jQuery(this.wrapper).on("scroll.objectStream",this.debounceScrollHandler.bind(this))}else{this.jqLeftEdge.css("display","none");this.jqRightEdge.css("display","none")}this._checkEdgesVisibility()};c.prototype._afterOpen=function(){if(t.os.ios&&this.$().length){this.$().on("touchmove.scrollFix",function(t){t.stopPropagation()})}var e=this.$().find("a.sapOvpObjectStreamHeader");e.removeAttr("aria-describedby");e.removeAttr("href");var s=e.attr("id");e.parent("div").attr("aria-labelledby",s);e.focus();if(this.keyboardNavigation){this.keyboardNavigation.destroy()}this.keyboardNavigation=new h(this);this._initScrollVariables();this.jqBackground=jQuery("<div id='objectStreamBackgroundId' class='objectStreamNoBackground'></div>");jQuery("#sap-ui-static").prepend(this.jqBackground);this.jqBackground.on("click.closePopup",function(){this._oPopup.close()}.bind(this));jQuery(".sapUshellEasyScanLayout").addClass("bluredLayout");var i=this.$().find(".sapOvpObjectStreamItem");for(var a=0;a<i.length;a++){var r=jQuery(i[a]).find(".sapOvpActionFooter");if(r.find("button").length==0){r.attr("tabindex","-1")}}};c.prototype._beforeClose=function(){if(t.os.ios&&this.$().length){this.$().off(".scrollFix")}this.keyboardNavigation.destroy();this.jqBackground.remove();this.jqLeftEdge.add(this.jqRightEdge).add(this.wrapper).off(".objectStream");jQuery(".sapUshellEasyScanLayout").removeClass("bluredLayout");this._oPopup=undefined};c.prototype._mouseEnter=function(t){var e="right";if(t.target==t.data.jqRightEdge.get(0)||t.currentTarget==t.data.jqRightEdge.get(0)){e=n.getConfiguration().getRTL()?"left":"right"}if(t.target==t.data.jqLeftEdge.get(0)||t.currentTarget==t.data.jqLeftEdge.get(0)){e=n.getConfiguration().getRTL()?"right":"left"}t.data._startScroll(e)};c.prototype._checkEdgesVisibility=function(){var t=this.wrapper.scrollLeft;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;var s=t==0?0:1;var i=e==0?0:1;if(n.getConfiguration().getRTL()&&this.scrollReverse){this.jqLeftEdge.css("opacity",i);this.jqRightEdge.css("opacity",s);this.jqRightEdge.css("z-index",s===0?0:1)}else{this.jqLeftEdge.css("opacity",s);this.jqRightEdge.css("opacity",i);this.jqRightEdge.css("z-index",i===0?0:1)}};c.prototype._createPopup=function(){this._oPopup=new s({showHeader:false,afterOpen:this._afterOpen.bind(this),beforeClose:this._beforeClose.bind(this),content:[this],stretch:t.system.phone}).removeStyleClass("sapUiPopupWithPadding").addStyleClass("sapOvpStackedCardPopup");this._oPopup.oPopup.setModal(false)};c.prototype.open=function(t,e){if(!this._oPopup){this._createPopup()}this._cardWidth=t;p=e;this.setCardsSize(this._cardWidth);this._oPopup.open()};c.prototype.onBeforeRendering=function(){var t=this.getBinding("content");var e=this.getPlaceHolder();if(t&&t.getLength()<=20){this.setPlaceHolder(null);if(e){e.destroy()}}};c.prototype.onAfterRendering=function(){if(!this._oPopup||!this._oPopup.isOpen()||!this.getContent().length){return}setTimeout(function(){this._initScrollVariables()}.bind(this))};c.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy()}if(this.jqBackground){this.jqBackground.remove()}this._closeButton.destroy();if(this._oScroller){this._oScroller.destroy();this._oScroller=null}};c.prototype.setCardsSize=function(e){var s=parseInt(window.getComputedStyle(document.documentElement).fontSize,10);var i=t.system.phone?document.body.clientHeight/s-4.5:28.75;var a=this.getContent();a.map(function(t){t.setWidth(e+"px");t.setHeight(i+"rem")});var r=this.getPlaceHolder();if(r){r.setWidth(e+"px");r.setHeight(i+"rem")}};c.prototype.getNewContentAvailable=function(){return this.onRefreshNewContent};c.prototype.setNewContentAvailable=function(t){this.onRefreshNewContent=t};c.prototype.updateContent=function(t){var e=this.mBindingInfos["content"],s=e.binding,i=s.getContexts(e.startIndex,e.length);if(t==="change"){e.clearQuickViewCard();var a=e.factory,o=0,n=this.getContent(),l=function(t){var s=this.getId()+"-"+r(),i=a(s,t);i.setBindingContext(t,e.model);this.addContent(i)};var p=l.bind(this);if(n.length<i.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=0;this.setNewContentAvailable(true);for(o=0;o<i.length;o++){p(i[o])}}if(!this.getNewContentAvailable()){for(o=0;o<i.length;++o){n[o].setBindingContext(i[o],e.model)}}if(n.length>=i.length){for(o=0;o<n.length;++o){n[o].destroy()}n.length=i.length;this.setNewContentAvailable(true);for(o=0;o<i.length;o++){p(i[o])}}}};return c});
sap.ui.predefine("sap/ovp/ui/ObjectStreamRenderer", ["sap/ovp/app/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,i){if(!i.getVisible()){return}t.openStart("div",i);t.accessibilityState(undefined,{role:"dialog"});t.accessibilityState(i,{label:i.getTitle()});t.class("sapOvpObjectStream");t.openEnd();t.openStart("div");t.openEnd();var a=i.getTitle();if(a){t.renderControl(a)}t.close("div");t.openStart("div");t.attr("tabindex",0);t.class("sapOvpObjectStreamClose");t.accessibilityState(undefined,{role:"button"});t.accessibilityState(i,{label:"close"});t.openEnd();t.renderControl(i._closeButton);t.close("div");t.openStart("div",i.getId()+"-cont");t.class("sapOvpObjectStreamCont");t.openEnd();t.openStart("div",i.getId()+"-scroll");t.accessibilityState(undefined,{role:"list"});t.class("sapOvpObjectStreamScroll");t.openEnd();var n=i.getContent();var s=i.getPlaceHolder();n.forEach(function(e,i){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",i==0?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-label"," ");t.attr("aria-setsize",s?n.length+1:n.length);t.attr("aria-posinset",i+1);t.openEnd();t.renderControl(e);t.close("div")});if(s){t.openStart("div");t.class("sapOvpObjectStreamItem");t.attr("tabindex",!n.length?0:-1);t.accessibilityState(undefined,{role:"listitem"});t.attr("aria-setsize",n.length+1);t.attr("aria-posinset",n.length+1);t.openEnd();t.renderControl(s);t.close("div")}t.close("div");t.openStart("div",i.getId()+"-leftedge");t.class("sapOvpOSEdgeLeft");t.openEnd();t.icon("sap-icon://slim-arrow-left",[],{title:e.getText("PREVIOUS")});t.close("div");t.openStart("div",i.getId()+"-rightedge");t.class("sapOvpOSEdgeRight");t.openEnd();t.icon("sap-icon://slim-arrow-right",[],{title:e.getText("NEXT")});t.close("div");t.close("div");t.close("div")};t.renderFooterContent=function(e,t){};return t},true);
sap.ui.predefine("sap/ovp/ui/SmartphoneHeaderToggle", [],function(){"use strict";return{threshold:10,headerVisible:true,startY:undefined,app:undefined,jqView:undefined,startHandler:function(e){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=e.touches[0].pageY},resizeHandler:function(){if(!this.headerVisible){this.animateHeader.call(this,this.headerVisible)}},animateHeader:function(e){var i=this.jqView.find(".ovpApplication > .sapUiFixFlexFixed > .sapMVBox");var t=this.jqView.find(".ovpApplication > .sapUiFixFlexFlexible");var s=t.children();var a;if(e){a="translateY(0px)";i.add(t).css({transform:a,"-webkit-transform":a});t.one("transitionend",function(e){if(this.headerVisible){s.css({bottom:"0px"})}}.bind(this))}else{var r=this.getView().byId("ovpMain").getHeader();if(r){var n=r.$().height();s.css({bottom:"-"+n+"px"});a="translateY(-"+n+"px)";t.add(i).css({transform:a,"-webkit-transform":a})}}},moveHandler:function(e){var i=e.touches[0].pageY;if(typeof this.startY==="undefined"){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return}this.startY=i}if(Math.abs(this.startY-i)<this.threshold){return}if(this.startY>i&&this.headerVisible){this.headerVisible=false;this.startY=i;this.animateHeader.call(this,this.headerVisible)}if(this.startY<i&&!this.headerVisible){this.headerVisible=true;this.startY=i;this.animateHeader.call(this,this.headerVisible)}},endHandler:function(){this.startY=undefined;return},enable:function(e){this.app=e;this.view=this.app.getView();this.jqView=this.view.$();this.jqView.on("touchstart.headerHiding",this.startHandler.bind(this));this.jqView.on("touchmove.headerHiding",this.moveHandler.bind(this));this.jqView.on("touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding",this.endHandler.bind(this));window.addEventListener("resize.headerHiding",this.resizeHandler.bind(this))},disable:function(){this.jqView.off("touchstart.headerHiding touchmove.headerHiding touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding");window.removeEventListener("resize.headerHiding")}}},true);
sap.ui.predefine("sap/ovp/ui/UIActions", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/events/KeyCodes","sap/ui/core/Core"],function(jQuery,e,t,s){"use strict";return e.extend("sap.ovp.ui.UIActions",{constructor:function(e){if(!e||!e.rootSelector||!e.containerSelector||!e.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.")}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=false;this.dragMoveCallback=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.swapTargetElement=null;this.endX=null;this.endY=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.keyUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.preventClickFlag=false;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragStartCallback=null;this.dragEndCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.beforeDragCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollEdge=100;this.isRTLEnabled=null;this.resizeStartCallback=null;this.resizeMoveCallback=null;this.resizeEndCallback=null;this.isResize=null;this.isResizeX=null;this.isResizeY=null;this.resizeHandleDistance=null;this.layoutDetails=null;this.init=function(e){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.resizeHandleDistance=16;this.isResize=false;this.isResizeX=false;this.isResizeY=false;this.noop=function(){};this.isTouch=e.isTouch?!!e.isTouch:false;this.container=document.querySelector(e.containerSelector);this.scrollContainerSelector=e.scrollContainerSelector||e.containerSelector;this.switchModeDelay=e.switchModeDelay||1500;this.moveTolerance=e.moveTolerance===0?0:e.moveTolerance||1e3;this.draggableSelector=e.draggableSelector;this.mode="normal";this.debug=e.debug||false;this.root=document.querySelector(e.rootSelector);this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=e.placeHolderClass||"";this.cloneClass=e.cloneClass||"";this.wrapper=e.wrapperSelector?document.querySelector(e.wrapperSelector):this.container.parentNode;this.clickCallback=typeof e.clickCallback==="function"?e.clickCallback:this.noop;this.beforeDragCallback=typeof e.beforeDragCallback==="function"?e.beforeDragCallback:this.noop;this.doubleTapCallback=typeof e.doubleTapCallback==="function"?e.doubleTapCallback:this.noop;this.dragEndCallback=typeof e.dragEndCallback==="function"?e.dragEndCallback:this.noop;this.endCallback=typeof e.endCallback==="function"?e.endCallback:this.noop;this.dragStartCallback=typeof e.dragStartCallback==="function"?e.dragStartCallback:this.noop;this.dragMoveCallback=typeof e.dragMoveCallback==="function"?e.dragMoveCallback:this.noop;this.doubleTapDelay=e.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent="scroll";this.touchStartEvent="touchstart";this.touchMoveEvent="touchmove";this.touchEndEvent="touchend";this.mouseDownEvent="mousedown";this.mouseMoveEvent="mousemove";this.mouseUpEvent="mouseup";this.keyUpEvent="keyup";this.contextMenuEvent="contextmenu";this.touchCancelEvent="touchcancel";this.clickEvent="click";this.layoutDetails=e.layout?e.layout.dashboardLayoutUtil:null;this.isRTLEnabled=s.getConfiguration().getRTL();this.resizeStartCallback=typeof e.resizeStartCallback==="function"?e.resizeStartCallback:this.noop;this.resizeMoveCallback=typeof e.resizeMoveCallback==="function"?e.resizeMoveCallback:this.noop;this.resizeEndCallback=typeof e.resizeEndCallback==="function"?e.resizeEndCallback:this.noop;if(this.wrapper){jQuery(this.wrapper).css({position:"relative",top:0,left:0,right:0,bottom:0,"-webkit-transform":"translateZ(0)",transform:"translateZ(0)"})}};this.forEach=function(e,t){return Array.prototype.forEach.call(e,t)};this.indexOf=function(e,t){return Array.prototype.indexOf.call(e,t)};this.insertBefore=function(e,t,s){var i,l,n;n=Array.prototype.splice;i=this.indexOf(e,t);l=this.indexOf(e,s);n.call(e,l-(i<l?1:0),0,n.call(e,i,1)[0])};this.logToConsole=function(){window.console.log.apply(console,arguments)};this.getDraggableElement=function(e){var t;this.draggable=jQuery(this.draggableSelector,this.container);while(typeof t==="undefined"&&e!==this.root){if(this.indexOf(this.draggable,e)>=0){t=e}e=e.parentNode}return t};this.captureStart=function(e){var t;if(e.type==="touchstart"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousedown"){t=e;if(e.which!==1){return}}if(t){this.element=this.getDraggableElement(t.target);this.startX=t.pageX;this.startY=t.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.element){var s=jQuery(this.element);var i=s.offset().left;var l=s.offset().top;var n=s.height();var a=s.width();if(this.layoutDetails){var o=this.isRTLEnabled?this.startX-i<this.resizeHandleDistance:i+a-this.startX<this.resizeHandleDistance;var r=l+n-this.startY<this.resizeHandleDistance;if(o||r){if(o&&r){this.isResizeX=false;this.isResizeY=false}else if(!o&&r){this.isResizeX=false;this.isResizeY=true}else if(o&&!r){this.isResizeX=true;this.isResizeY=false}this.isResize=true}}else{var h=i+a-this.startX;var c=l+n-this.startY;if(h<this.resizeHandleDistance&&c<this.resizeHandleDistance){this.isResize=true}}}if(this.lastTapTime&&this.lastElement&&this.element&&this.lastElement===this.element&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element}this.log("captureStart("+this.startX+", "+this.startY+")")}};this.startHandler=function(e){this.log("startHandler");this.captureStart(e);if(this.element){this.beforeDragCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode="double-tap";return}if(e.type==="touchstart"){this.timer=setTimeout(function(){if(this.isResize){this.log("mode switched to resize");this.mode="resize";this.resizeStartCallback(e,this.element)}else{this.log("mode switched to drag");this.mode="drag";this.createClone();this.dragStartCallback(e,this.element)}}.bind(this),this.switchModeDelay)}}}}.bind(this);this.captureMove=function(e){var t;if(e.type==="touchmove"&&e.touches.length===1){t=e.touches[0]}else if(e.type==="mousemove"){t=e}if(t){this.moveX=t.pageX;this.moveY=t.pageY;this.log("captureMove("+this.moveX+", "+this.moveY+")")}};this.moveHandler=function(e){this.log("moveHandler");this.captureMove(e);switch(this.mode){case"normal":if(Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance){if(e.type==="touchmove"){this.log("-> normal");clearTimeout(this.timer);delete this.timer}else if(this.element){if(this.isResize){this.log("mode switched to resize");this.mode="resize"}else{this.log("mode switched to drag");this.mode="drag";this.createClone()}}}break;case"drag":e.preventDefault();this.log("-> drag");this.mode="drag-and-scroll";window.addEventListener(this.mouseUpEvent,this.endHandler,true);window.addEventListener(this.keyUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.dragStartCallback(e,this.element)}break;case"drag-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> drag-and-scroll");this.translateClone();this.dragMoveCallback({evt:e,clone:this.clone,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;case"resize":e.preventDefault();this.log("-> resize");this.mode="resize-and-scroll";window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.resizeStartCallback(e,this.element)}break;case"resize-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> resize-and-scroll");this.resizeMoveCallback({evt:e,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;default:break}}.bind(this);this.captureEnd=function(e){var t;if((e.type==="touchend"||e.type==="touchcancel")&&e.changedTouches.length===1){t=e.changedTouches[0]}else if(e.type==="mouseup"){t=e}if(t){this.endX=t.pageX;this.endY=t.pageY;this.log("captureEnd("+this.endX+", "+this.endY+")")}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault()}}.bind(this);this.clickHandler=function(e){var t=document.getElementsByClassName("viz-controls-chartTooltip");var i=t&&t[0]&&t[0].id;var l=s.byId(i);if(l){var n=l&&l.aDelegates[0]&&l.aDelegates[0].oDelegate;if(n){n.close()}}if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId)}this.clickCallback()}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false}.bind(this),100)};this.endHandler=function(e){this.log("endHandler");if(e.type==this.keyUpEvent&&e.which==t.ESCAPE||e.type==this.mouseUpEvent||e.type==this.touchEndEvent){this.captureEnd(e);switch(this.mode){case"normal":this.log("-> normal");break;case"drag":this.log("-> drag");this.dragEndCallback(e,this.element,this.clone);this.preventClick();break;case"drag-and-scroll":this.log("-> drag-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.dragEndCallback(e,this.element,this.clone);this.preventClick();e.stopPropagation();e.preventDefault();break;case"double-tap":this.log("-> double-tap");this.doubleTapCallback(e,this.element);break;case"resize":this.log("-> resize");this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();break;case"resize-and-scroll":this.log("-> resize-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;default:break}if(this.element){this.endCallback(e,this.element)}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.swapTargetElement=null;this.element=null;this.mode="normal"}}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault()};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false}.bind(this),500)}.bind(this);this.createClone=function(){var e,t;if(this.clone){this.removeClone()}t=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);var s=this.element.querySelectorAll("canvas");if(s.length){var i=this.clone.querySelectorAll("canvas");for(var l=0;l<s.length;l++){i[l].getContext("2d").drawImage(s[l],0,0)}}this.clone.className+=" "+this.cloneClass;if(!this.layoutDetails){this.element.className+=" "+"easyScanLayoutItemWrapper-placeHolder"}else{this.element.className+=" "+"dashboardLayoutItemWrapper-placeHolder"}e=this.clone.style;e.position="absolute";e.display="block";e.top=t.top-this.root.getBoundingClientRect().top+"px";e.left=t.left-this.root.getBoundingClientRect().left+"px";e.width=t.width+"px";e.zIndex="100";e.webkitTransition="-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.mozTransition="-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.msTransition="-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.transition="transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)";e.webkitTransform="translate3d(0px, 0px, 0px) ";e.mozTransform="translate3d(0px, 0px, 0px) ";e.msTransform="translate3d(0px, 0px, 0px) ";e.transform="translate3d(0px, 0px, 0px) ";this.root.appendChild(this.clone);this.log("createClone")};this.removeClone=function(){if(this.element!==null&&typeof this.element!=="undefined"){this.element.className=this.element.className.split(" "+this.placeHolderClass).join("")}if(this.clone!==null){this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log("removeClone")}};this.translateClone=function(){var e,t;e=this.moveX-this.startX;t=this.moveY-this.startY;if(this.clone&&e&&t){this.clone.style.webkitTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.mozTransform="translate3d("+e+"px, "+t+"px, 0px)";this.clone.style.msTransform="translate("+e+"px, "+t+"px)";this.clone.style.transform="translate3d("+e+"px, "+t+"px, 0px)";this.log("translateClone ("+e+", "+t+")")}};this.enable=function(){this.log("enable");this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.disable=function(){this.log("disable");this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this};this.init(e);this.getMove=function(){return{x:this.moveX,y:this.moveY}}}})});
sap.ui.predefine("sap/ovp/ui/cardPositionHelper", [],function(){"use strict";var t={getDependentColumns:function(t,e,o,n){var s=[];var a={};var r=function(e,o,n,s,r){if(t&&o){a[t.id]=true;e.forEach(function(t){if((t.dashboardLayout.row<o||t.dashboardLayout.row===o&&t.dashboardLayout.column<n)&&!r[t.id]&&!t.visited){s.push(t);r[t.id]=true}else if(t.dashboardLayout.row+t.dashboardLayout.rowSpan===o&&!r[t.id]&&!t.visited){r[t.id]=true;s.push(t)}},this)}}.bind(this);for(var u=0;u<this.allColumns.length;u++){r(this.allColumns[u],e,n,s,a)}return s},getNextIndexColumns:function(t,e,o,n,s,a,r){var u=function(t,e,o,n,s,a,r,u){t[e].visited=true;o[t[e].id]=n+1;s.rowValue=a+r;s.Result=true;var i=u.getCardDomId(t[e].id)&&document.getElementById(u.getCardDomId(t[e].id));if(i){i.ariaPosInSet=n+1}};var i={Result:false,rowValue:""},d=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.row,l=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.rowSpan,f=t[s]&&t[s].dashboardLayout&&t[s].dashboardLayout.column;if(d===e&&f===o&&t[s]&&!t[s].visited){u(t,s,n,a,i,d,l,r)}else{var h=this.getDependentColumns(t[s],d,l,f);if(h&&!h.length&&t[s]){u(t,s,n,a,i,d,l,r)}}return i},processAllColumns:function(t,e,o,n,s,a){var r;for(var u=0;u<t.length;u++){var i=t[u];if(i&&i.length&&i[n[u]]&&!i[n[u]].visited){r=this.getNextIndexColumns(i,e[u],i[n[u]].dashboardLayout.column,o,n[u],s,a);if(r.Result){e[u]=r.rowValue;s=s+1;n[u]=n[u]+1}}}var d=function(t){return t.some(function(t){return t.some(function(t){return t.visited===false})})};if(!d(t)){return}this.processAllColumns(t,e,o,n,s,a)},fnSetAriaPos:function(t,e){var o=e.ariaPos,n=0,s=[],a=[],r=[];for(var u=0;u<t.length;u++){s[u]=0;a[u]=1;r[u]=t[u]||[]}this.allColumns=r;this.processAllColumns(r,a,o,s,n,e)}};return{setAriaPosition:t.fnSetAriaPos,getNextIndexColumns:t.getNextIndexColumns,getDependentColumns:t.getDependentColumns,processAllColumns:t.processAllColumns}});
sap.ui.require.preload({
	"sap/ovp/app/CardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:EasyScanLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat list="{ui>/cards}" var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:EasyScanLayout></core:FragmentDefinition>\n',
	"sap/ovp/app/DashboardCardContainer.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sap.ui.fl="sap.ui.fl"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:DashboardLayout \n        id="ovpLayout" \n        dragAndDropRootSelector=".ovpApplication" \n        afterDragEnds="layoutChanged"\n        dragAndDropEnabled="{path:\'ui>\', formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat \n                list="{ui>/cards}" \n                var="card"><core:ComponentContainer id="{card>id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true" /><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>Cards}" writeToDom="true" /></ovp:customData></ovp:DashboardLayout></core:FragmentDefinition>',
	"sap/ovp/app/Error.view.xml":'<mvc:View\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:mvc="sap.ui.core.mvc"><MessagePage \r\n        icon="sap-icon://message-error" \r\n        text="{ovplibResourceBundle>LOAD_DATA_ERROR_PAGE}"\r\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\r\n        showHeader="false"></MessagePage></mvc:View>',
	"sap/ovp/app/HeaderCommands.fragment.xml":'<core:FragmentDefinition \n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:core="sap.ui.core"><core:CommandExecution execute="onShareButtonPress" command="Share"/><core:CommandExecution execute="onTriggerFilterSearch" command="Search"/></core:FragmentDefinition>',
	"sap/ovp/app/Main.view.xml":'<mvc:View\n    controllerName="sap.ovp.app.Main"\n    xmlns="sap.m"\n    xmlns:variants="sap.ui.comp.smartvariants"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:f="sap.f"\n    xmlns:v="sap.ui.fl.variants"\n    xmlns:macros="sap.fe.macros"><MessagePage \n        id="ovpErrorPage" \n        icon="sap-icon://message-error" \n        text="{ovplibResourceBundle>LOAD_DATA_ERROR_HEADER}"\n        description="{ovplibResourceBundle>LOAD_DATA_ERROR_CONTENT}"\n        showHeader="false" \n        visible="false"></MessagePage><ovp:OVPWrapper id="ovpWrapper"><f:DynamicPage \n            id="ovpMain" \n            class="ovpApplication" \n            preserveHeaderStateOnScroll="false" \n            headerExpanded="{ui>/bHeaderExpanded}"><f:dependents><core:Fragment fragmentName="sap.ovp.app.HeaderCommands" type="XML"/></f:dependents><template:if test="{= !${ui>/globalFilterEntityType} &amp;&amp; !${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} ? false : true}"><f:title><f:DynamicPageTitle id="ovpMainPageTitle" areaShrinkRatio="0:1.6:1.6"><f:heading><HBox class="ovpDescription"><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === false &amp;&amp; ${ui>/smartVariantRequired} === true || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title})}"><variants:SmartVariantManagement \n                                        id="ovpPageVariant"\n                                        persistencyKey="ovpGlobalFilter"\n                                        visible="{= ${ui>/globalFilterEntityType} ? true : false}" \n                                        showShare="true" \n                                        showExecuteOnSelection="true"\n                                        displayTextForExecuteOnSelectionForStandardVariant="{= (${ui>/dataLoadSettings/loadDataOnAppLaunch} === \'ifAnyFilterExist\' || ${ui>/dataLoadSettings/loadDataOnAppLaunch} === undefined) ? \'{ovplibResourceBundle>ST_LIST_DISPLAY_TEXT_FOR_EXECUTE_ON_SELECTION}\' : undefined}"/></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; !${ui>/smartVariantRequired}}"><template:then><Title text="{parts: [{path:\'ui>/subTitleIfVariantMgmtHidden\'}, {path:\'ui>/description\'}, {path:\'ui>/title\'}], formatter: \'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true &amp;&amp; ${ui>/smartVariantRequired} === true &amp;&amp; ${ui>/globalFilterEntityType} || (!${ui>/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui>/description} &amp;&amp; !${ui>/title} &amp;&amp; ${ui>/globalFilterEntityType})}"><v:VariantManagement id="ovpGlobalMacroFilterVariantMGMT" for="ovpGlobalMacroFilter"/></template:if></HBox></f:heading><f:actions><ToolbarSpacer /><core:ExtensionPoint name="SmartFilterBarGlobalActionExtension"/><MenuButton \n                                id="sapOvpShareButton"\n                                icon="sap-icon://action"\n                                tooltip="{ovplibResourceBundle>shareBtn} (Shift+Ctrl+S)"\n                                text=""\n                                visible="{= (${ui>/globalFilterEntityType} &amp;&amp; ${ui>/smartVariantRequired} &amp;&amp; !${ui>/isTeamsModeActive})}"\n                                type="Transparent"><layoutData><OverflowToolbarLayoutData closeOverflowOnInteraction="false"/></layoutData></MenuButton></f:actions><f:snappedContent><Text id="ovpFilterText"></Text></f:snappedContent></f:DynamicPageTitle></f:title></template:if><template:if test="{ui>/globalFilterEntityType}"><f:header><f:DynamicPageHeader id="ovpPageHeader" pinnable="true"><template:if test="{= ${ui>/useMacroFilterBar} === false }"><template:then><f:content><template:if test="{= ${ui>/smartVariantRequired} === true || !${ui>/description}}"><template:then><core:Fragment fragmentName="sap.ovp.app.SmartFilterBarWithVariant" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.app.SmarFilterBarWithoutVariant" type="XML"/></template:else></template:if></f:content></template:then></template:if><template:if test="{= ${ui>/useMacroFilterBar} === true }"><f:content><macros:FilterBar\n                                    id="ovpGlobalMacroFilter"\n                                    metaPath="@com.sap.vocabularies.UI.v1.SelectionFields"\n                                    search=".onMacroFilterBarSearch"\n                                /></f:content></template:if></f:DynamicPageHeader></f:header></template:if><f:content><VBox height="inherit"><VBox \n                        id="ovpFilterNotFulfilledPage" \n                        visible="false" \n                        fitContainer="true" \n                        alignItems="Center" \n                        justifyContent="Center" \n                        height="300px"><Text text="{ovplibResourceBundle>FILTER_NOT_FULFILLED_CONTENT}" /></VBox><VBox id="ovpCardPage" visible="true" height="inherit"><core:Fragment fragmentName="{ui>/cardContainerFragment}" type="XML"/></VBox></VBox></f:content></f:DynamicPage></ovp:OVPWrapper></mvc:View>',
	"sap/ovp/app/ManageCard.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m" \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns:core="sap.ui.core"><Dialog \n        id="manageCardsDialog" \n        class="sapOVPCardsVisibilityDialog" \n        title="{ovplibResourceBundle>hideCardsBtn_title}" \n        contentWidth="29.6rem" \n        contentHeight="50%" \n        afterOpen="afterManageCardsDialogOpen" \n        afterClose="afterManageCardsDialogClose"><content><Table \n                id="sapOVPHideCardsTable"\n                backgroundDesign="Transparent"\n                showSeparators="Inner"\n                updateFinished="onAfterManageCardsTableUpdated"\n                items="{ path: \'/cards\' }"><columns><Column vAlign="Middle"></Column><Column hAlign="Right" vAlign="Middle" width="4.94rem"></Column></columns><items><ColumnListItem><cells><Text text="{path: \'id\', formatter: \'.cardTitleFormatter\'}" /><Switch \n                                state="{visibility}"\n                                customTextOff=" " \n                                customTextOn=" " \n                                tooltip="{ovplibResourceBundle>hideCards_switchTooltip}" \n                                change="onCardVisibilityChange" /></cells></ColumnListItem></items></Table></content><buttons><Button id="manageCardsOkBtn" text="{ovplibResourceBundle>okBtn}" type="Emphasized" press="onManageCardOkButtonPressed" /><Button id="manageCardsResetBtn" text="{ovplibResourceBundle>resetBtn}" press="onManageCardResetButtonPressed" /><Button id="manageCardsCancelBtn" text="{ovplibResourceBundle>cancelBtn}" type="Transparent" press="onManagecardCancelButtonPressed" /></buttons></Dialog></core:FragmentDefinition>\n',
	"sap/ovp/app/SharePage.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"><Menu><MenuItem \n\t\t\tid="ShareEmailButton"\n\t\t\ticon="sap-icon://email"\n\t\t\tpress="shareEmailPressed"\n\t\t\ttext="{ovplibResourceBundle>Email_Text}"\n\t\t\tclass="sapMFlexBox"/><MenuItem \n\t\t\tid="shareJamButton"\n\t\t\ticon="sap-icon://share-2"\n\t\t\tpress="shareJamPressed"\n\t\t\ttext="{ovplibResourceBundle>share_jam}"\n\t\t\tclass="sapMFlexBox"\n\t\t\tvisible="{ui>/jamVisible}"/><MenuItem \n\t\t\tid="BookmarkButton"\n\t\t\ticon="{ui>/tileIcon}"\n\t\t\tpress="shareTilePressed"\n\t\t\ttext="{ui>/tileText}"\n\t\t\tvisible="{ui>/tileVisible}" \n\t\t\tclass="sapMFlexBox"/></Menu></core:FragmentDefinition>\n',
	"sap/ovp/app/SmarFilterBarWithoutVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        entityType="{ui>/globalFilterEntityType}"\n        filterBarExpanded="false"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        showMessages="false"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"\n        search="cmd:Search"\n        useDateRangeType="{ui>/useDateRangeType}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'sap.ovp.cards.AnnotationHelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}"/></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC"/></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/SmartFilterBarWithVariant.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar \n        id="ovpGlobalFilter"\n        entitySet="{ui>/globalFilterEntitySet}"\n        entityType="{ui>/globalFilterEntityType}"\n        persistencyKey="ovpGlobalFilter"\n        filterBarExpanded="true"\n        showMessages="false"\n        beforeVariantSave="onBeforeSFBVariantSave"\n        afterVariantLoad="onAfterSFBVariantLoad"\n        assignedFiltersChanged="onAssignedFiltersChanged"\n        useToolbar="false"\n        smartVariant="ovpPageVariant"\n        useDateRangeType="{ui>/useDateRangeType}"\n        liveMode="{ui>/enableLiveFilter}"\n        enableBasicSearch="{ui>/showBasicSearch}"\n        search="cmd:Search"\n        considerAnalyticalParameters="{ui>/considerAnalyticalParameters}"><template:if test="{meta>}"><smartFilterBar:controlConfiguration><template:with \n                    path=\'ui>allControlConfiguration\'\n                    var=\'selectionField\'><template:repeat list="{selectionField>}"><template:if test="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="{path: \'selectionField>bNotPartOfSelectionField\', formatter: \'sap.ovp.cards.AnnotationHelper.getGroupID\'}"\n                                    conditionType="{parts: [{path: \'selectionField>PropertyPath\'}, {path: \'ui>datePropertiesSettings\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}" /></template:then><template:else><smartFilterBar:ControlConfiguration\n                                    key="{= (${selectionField>PropertyPath}).replace(\'/\', \'.\').trim() }"\n                                    groupId="_BASIC" /></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui>globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui>globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui>globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value=\'\\{"UTC":true,"style":"medium"\\}\'/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","id":"sap.ovp.app","type":"application","i18n":{"bundleUrl":"../messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"applicationVersion":{"version":"1.108.11"},"title":"{{TITLE}}","description":"{{DESCRIPTION}}","tags":{"keywords":["{{TITLE}}"]},"ach":"CA-UI5-ST-OVP","embeddedBy":"../","offline":false,"resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"},"routingService":{"factoryName":"","startup":"none"}},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.ui.comp":{"minVersion":"1.30.1"},"sap.ui.generic.app":{"minVersion":"1.30.1"},"sap.ui.layout":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.rta":{"minVersion":"1.30.1"},"sap.f":{"minVersion":"1.41.0"},"sap.suite.ui.microchart":{"minVersion":"1.41.0"},"sap.viz":{"minVersion":"1.41.0"},"sap.fe.placeholder":{"minVersion":"1.96.0"},"sap.fe.macros":{"minVersion":"1.96.0"},"sap.insights":{"minVersion":"1.105.0"},"sap.suite.ui.commons":{"minVersion":"1.108.0"},"sap.ui.integration":{"minVersion":"1.102.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"../messagebundle.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}},"commands":{"Share":{"name":"Share","shortcut":"Shift+Ctrl+S"},"Search":{"name":"Search","shortcut":"Enter"}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ovp/cards/Integration/Preview.fragment.xml":'<Dialog\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:w="sap.ui.integration.widgets"\n    xmlns:smartForm="sap.ui.comp.smartform"\n\txmlns:smartField="sap.ui.comp.smartfield"\n    title="{ovpResourceModel>INT_Add_to_Homepage}"\n    resizable="true"\n    contentWidth= "352px"\n    contentHeight = "712px"\n    draggable="true"><content><NavContainer id="navCon"><Page id="previewPage" showHeader="false" backgroundDesign="Transparent"><FlexBox\n                    direction="Column" \n                    id="flexBoxNew" \n                    justifyContent="Center" \n                    class="sapUiNoMargin sapMPageBgSolid" ><Title \n                        id="previewTitle" \n                        text="{ovpResourceModel>INT_Preview_Title}" \n                        class="sapUiSmallMarginBegin sapUiTinyMarginTop"\n                        visible="false"/><FlexBox \n                        justifyContent="Center" \n                        id="subFlexBoxNew"  \n                        class="sapUiTinyMargin sapUiSmallMarginTopBottom"/><HBox id="ovpIntPreviewOverflowLayer" class="sapMFlexBoxJustifyCenter" height="0" visible="false"><HBox class="ovpIntPreviewOverflowLayer"/></HBox></FlexBox><VBox class="sapUiSmallMargin"><FlexBox direction="Column"><items><Label \n                                id="labelTitle" \n                                text="{ovpResourceModel>INT_Preview_TitleField_Label}"\n                                required="true"\n                                visible="true" \n                                labelFor="titleTextInput"/><Input \n                                id="titleTextInput" \n                                visible="true"\n                                liveChange=".handleTitleLiveChange" \n                                value="{/dialogSettings/cardTitle}" \n                                valueState="{/dialogSettings/valueState}" \n                                valueStateText="{/dialogSettings/valueStateText}"/><Label \n                                id="labelSubTitle" \n                                text="{ovpResourceModel>INT_Preview_SubTitleTitleField_Label}"\n                                required="false" \n                                class="sapUiTinyMarginTop"\n                                visible="true" \n                                labelFor="subTitleTextInput"/><Input  \n                                id="subTitleTextInput"\n                                visible="true" \n                                value="{/dialogSettings/cardSubTitle}"\n                                liveChange=".handleSubTitleLiveChange"/></items></FlexBox></VBox></Page><Page id="filterDetailPage"><FlexBox direction="Column" class="sapUiContentPadding" id="flexBoxFilterPage" justifyContent="Center"></FlexBox></Page></NavContainer></content><buttons><Button text="{ovpResourceModel>INT_DIALOG_Ok}" type="Emphasized" press=".confirmActionHandler"/><Button text="{ovpResourceModel>INT_DIALOG_CANCEL}" press=".handleCancel" /></buttons></Dialog>',
	"sap/ovp/cards/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.charts"><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\tvar=\'chart\'><template:with \n\t\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tvar=\'selVar\'><template:with \n\t\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><HBox class="ovpChartTitleHBox" ><items><VBox class="ovpChartTitleText"><Text \n\t\t\t\t\t\t\t\t\t\tid="ovpCT" \n\t\t\t\t\t\t\t\t\t\tclass="ovpChartTitle"  \n\t\t\t\t\t\t\t\t\t\tmaxLines="1" \n\t\t\t\t\t\t\t\t\t\ttext="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" ><customData><template:if test="{chart>Title}"><ovp:CustomData \n\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label" \n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" \n\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></customData></Text></VBox><VBox class="ovpChartTitleScaleText"><Text id="ovpUoMTitle" class="ovpChartTitle" maxLines="1"><customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label" value="" writeToDom="true" /></template:if></customData></Text></VBox></items></HBox><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="analyticalChart" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{path: \'chart>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><FlexBox alignItems="Center" justifyContent="SpaceAround" class="noDataSection"><Text maxLines="1" text="{ovplibResourceBundle>noData}"><customData><ovp:CustomData \n\t\t\t\t\tkey="aria-label"\n\t\t\t\t\tvalue="{ovplibResourceBundle>noData}"\n\t\t\t\t\twriteToDom="true" /><ovp:CustomData key="tabindex" value="0" writeToDom="true" /></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/error/Error.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessagePage \n        id="sapOvpErrorCard" \n        icon="{ovpCardProperties>/sMessageIcon}" \n        text="{ovpCardProperties>/errorStatusText}"\n        description="" \n        class="{= ${ovpCardProperties>/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }"\n        showHeader="false" /></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n                           ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button \n            text="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData moveToOverflow="true" stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData \n                        key="semanticObject"\n                        value="{path: \'dataField>SemanticObject\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData \n                        key="url"\n                        value="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData \n                    key="action"\n                    value="{path: \'dataField>Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><core:CustomData \n                    key="label"\n                    value="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true" /><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                                ],\n                                sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{path:\'identification>\',\n                                filters: [\n                                    {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                                ]\n                             }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${path: \'contact>photo\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'sap-icon://person-placeholder\'}"\n        title="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n        description="{path: \'contact>role\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{path: \'contact>title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{path: \'contact>org\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                visible="{= !!${path: \'contact>email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')>=0]/address\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')>=0]/uri\'} }"/><QuickViewGroupElement  \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')>=0]/uri\'} }"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{= ${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }"\n                visible="{= !!${path: \'contact>tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')>=0]/uri\'} }"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar id="toolbar" class="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m" \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } \n               {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'} \n               {= ${ovpCardProperties>/bInsightRTEnabled} ? \'sapOvpCardInsightRunTime\' :  \'\' } \n               {= ${ovpCardProperties>/bInsightDTEnabled} ? \'sapOvpCardInsightDesignTime\' :  \'\' }"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData key="aria-label" value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/HeaderActions.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><Popover\n        id="ovpCardAdditionalActions"\n        placement="Bottom"\n        showHeader="false"><Button \n                text="{= ${ovpCardProperties>/bInsightRTEnabled} ? ${ovplibResourceBundle>INT_PREVIEW_POPOVER_BUTTON_TITLE_RT} : ${ovplibResourceBundle>INT_PREVIEW_POPOVER_BUTTON_TITLE_DT} }"\n                iconFirst="true"\n                icon="sap-icon://add-folder"\n                press="onShowInsightCardPreview"\n                type="Transparent" /></Popover></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" ><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint>Value/Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent \n                                            id="kpiNumberValue"\n                                            size="M" \n                                            truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"\n                                            press="press"\n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id = "ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text id = "ovpTargetValue" text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}"\n                                                          class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text id= "ovpKPIDeviation" text="{ovplibResourceBundle>KPI_Deviation_Text}" class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}" writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'sap.ovp.cards.AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{path:\'preVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}" \n                                            writeToDom="true" /></customData></Text></FlexBox></template:if><template:if test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${path: \'header>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target"\n                            helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                            var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        url="{path: \'dataField>Url/UrlRef\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        url="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value"\n                                                    helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                url="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                        value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{path: \'dataFie\\ld>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                value="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><HBox justifyContent="SpaceBetween" renderType="Bare"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                        path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                        var=\'headerInfo\'><template:with \n                            path="ovpCardProperties>/selectionAnnotationPath"\n                            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                            var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                            id="ovpDescriptionValue" \n                                            maxLines="2"\n                                            text="{path: \'headerInfo>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path: \'headerInfo>Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                    id = "SubTitle-Text" \n                                    maxLines="2"\n                                    text="{ovpCardProperties>/subTitle}"\n                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                            key="aria-label" \n                                            value="{ovpCardProperties>/subTitle}"\n                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                        path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                                        var=\'dataPoint\'><template:with \n                                            path="ovpCardProperties>/selectionAnnotationPath"\n                                            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                                            var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox><FlexBox\n                                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}"\n                                                        class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                            id = "ovpDescriptionValue" \n                                                            maxLines="2"\n                                                            text="{path: \'dataPoint>Description\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                                    key="aria-label"\n                                                                    value="{path: \'dataPoint>Description\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if><template:if test="{= ${ovpCardProperties>/bInsightEnabled} &amp;&amp; ${ovpCardProperties>/enableAddToInsight} }"><Button\n                    id="sapOvpCardInsights"\n                    enabled="false"\n                    class="sapOvpCardInsights"\n                    type="Transparent"\n                    icon="sap-icon://overflow"\n                    press="onShowAdditionalCardActions"/></template:if></HBox></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{path: \'dataPoint>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{path: \'dataPoint>Title\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if\n                test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/LinkList.fragment.xml":'<core:FragmentDefinition\n\txmlns:build="sap.build"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns="sap.m"><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with \n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/headerAnnotationPath\' \n\t\t\t\tvar=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><Carousel \n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox class="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List \n\t\t\t\tshowSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n  \txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n  \txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m" \n\txmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n\t\t\tshowSeparators="None"\n\t\t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatItems\'}"><template:with \n\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active" \n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: ${path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \r\n\txmlns:build="sap.build" \r\n\txmlns:core="sap.ui.core" \r\n\txmlns:ovp="sap.ovp.ui"\r\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \r\n\txmlns="sap.m"><VBox><Carousel \r\n\t\t\tid="pictureCarousel" \r\n\t\t\tloop="true" \r\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \r\n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \r\n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \r\n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \r\n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \r\n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \r\n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \r\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \r\n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \r\n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\r\n                                                densityAware="true" \r\n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\r\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \r\n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \r\n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \r\n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \r\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \r\n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \r\n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \r\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\r\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m" \n    xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:then><template:elseif\n                                    test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                        press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                    id="DataField"\n                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                    contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                    forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart \n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                    id="DataPoint1"\n                                    class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                    textAlign="End"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target"\n                                                helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                        id = "contactLink"\n                                                        binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                        press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    id="DataField1"\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                id="DataField2"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}"\n                                var="dataField"><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target"\n                                                    helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                            id="DataField2Link"\n                                                            binding="{= ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/List.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.list.StandardListImage" type="XML"/></template:then><template:else><List \r\n                id="ovpList" \r\n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}" \r\n                class="listCardType"><template:with \r\n                    path=\'ovpCardProperties>/annotationPath\' \r\n                    helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \r\n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><ObjectListItem\n            id="listItem"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                    id="listItem3row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><StandardListItem\n            id="listItem"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\r\n    xmlns:build="sap.build"><List \r\n        id="ovpList" \r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><template:with \r\n            path=\'ovpCardProperties>/annotationPath\' \r\n            helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \r\n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\r\n                        id="listItem"\r\n                        class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\r\n                        icon="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatImageUrl\'}"\r\n                        iconInset = "false"\r\n                        title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\r\n                        description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"\r\n                        info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}"\r\n                        infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\r\n                        type="Active"\r\n                        press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\r\n',
	"sap/ovp/cards/quickview/Quickview.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewCard id="quickViewCard" class="sapMPanelContent sapOvpCardContent cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n            path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n            var="header"><QuickViewPage\n                pageId="quickViewPage"\n                header="{= ${header>TypeNamePlural} ? ${path: \'header>TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"\n                icon="{= ${header>ImageUrl} ? ${path: \'header>ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header>TypeImageUrl} ? ${path: \'header>TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }"\n                title="{= ${header>Title} ? ${path: \'header>Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }"\n                description="{= ${header>Description} ? ${path: \'header>Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }"><template:with \n                    path="ovpCardProperties>/annotationPath" \n                    helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                    var="facets"><template:repeat \n                        list="{path:\'facets>\'}" \n                        var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                                path="referenceFacet>Target"\n                                helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                var="target"><QuickViewGroup heading="{path: \'target>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat \n                                        list="{path:\'target>Data\'}" \n                                        var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                            url="{path: \'dataField>Url/UrlRef\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                            url="{path: \'dataField>Url\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                            type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                        path="dataField>Value"\n                                                        helper="sap.ui.model.odata.AnnotationHelper.resolvePath"\n                                                        var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                    url="{path: \'dataField>Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                    type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                            label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                            value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                            type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"\n                                                                                    type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                    label="{path: \'dataField>Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                                    value="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></template:with></QuickViewPage></template:with></QuickViewCard></core:FragmentDefinition>\n',
	"sap/ovp/cards/rta/AddCustomActions.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomActionsToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addActionRow"/></Toolbar><Table \n        id="sapOvpCustomActions"\n        items="{path:\'/objectStreamCardsSettings/customActions\'}"\n        sticky="ColumnHeaders"\n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column><Text text="Text"/></Column><Column><Text text="Action"/></Column><Column><Text text="Position"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{text}" change="updateCard" required="true" /><Input type="Text" value="{press}" change="updateCard" required="true"/><Input type="Text" value="{position}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onActionDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AddStaticParameters.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns="sap.m"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomParamToolbar"><ToolbarSpacer/><Button icon="sap-icon://add"  press="addStaticParameterRow"/></Toolbar><Table \n        id="sapOvpStaticParameters"\n        items="{path:\'/aAllStaticParameters\'}" \n        sticky="ColumnHeaders" \n        inset="false"\n        fixedLayout="false"\n        visible="true"><columns><Column id="1"><Text text="key"/></Column><Column id="2"><Text text="value"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{key}" change="updateCard" required="true" /><Input type="Text" value="{value}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onParameterDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AppSettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:l="sap.ui.layout"\n    controllerName="sap.ovp.cards.rta.AppSettingsDialog"><VBox class="sapOvpScrollContainer sapUiLargeMargin"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout\n                    labelSpanXL="6" \n                    labelSpanL="6" \n                    labelSpanM="6" \n                    labelSpanS="6" \n                    adjustLabelSpan="false"\n                    emptySpanXL="0" \n                    emptySpanL="0" \n                    emptySpanM="0" \n                    emptySpanS="0"\n                    singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>showGlobalFilter}"><f:fields><Switch state="{/showGlobalFilters}" type="Default" change="onChange" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_FILTER_ENTITY_TYPE}" visible="{/showGlobalFilters}"><f:fields><ComboBox \n                                    items="{path: \'/allEntityTypes\'}"\n                                    selectedKey= "{/globalFilterEntityType}"\n                                    forceSelection="false"\n                                    change="onChange" ><core:Item key="{name}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_LIVE_FILTER}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/enableLiveFilter}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_SMART_VARIANT}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/smartVariantRequired}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_CONTAINER_LAYOUT}"><f:fields><SegmentedButton selectedKey="{/containerLayout}" select="onChange" ><items><SegmentedButtonItem key="fixed" text="fixed" /><SegmentedButtonItem key="resizable" text="resizable" /></items></SegmentedButton></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RANGE_TYPE}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/useDateRangeType}"  change="onChange" type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LABEL_DATE_RELATIVE_FORMAT}"><f:fields><Switch state="{/showDateInRelativeFormat}"  change="onChange" type="Default"  /></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></mvc:View>',
	"sap/ovp/cards/rta/KPICardTable.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}"\r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><Table \r\n        id="sapOvpKPITable"\r\n        items="{path:\'/KPIData\', length:5}" \r\n        sticky="ColumnHeaders" \r\n        inset="false"\r\n        fixedLayout="false"><columns><Column id="sapOvpGroupTitle"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column id="sapOvpKPITitle" minScreenWidth="Tablet" demandPopin="true"><Text text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem press="onItemPress" type="Active"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SelectIcons.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectIcons"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_ICONS_DIALOG}({/NoOfIcons})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="iconsScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="IconTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Icons}" \r\n            visible="{= ${/tableName} === \'IconTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_ICON}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><core:Icon src="{Icon}"/><Text text="{Name}"/></cells></ColumnListItem></items></Table><Table \r\n            id="ImageTable" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/Images}" \r\n            visible="{= ${/tableName} === \'ImageTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_IMAGE}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Image src="{Image}" width="3rem" height="3rem"/><Text text="{Name}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectKPI.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectKPI"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%"\r\n            search="onSearch"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="KPIItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="KPITable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/KPIItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLineItem.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLineItem"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}({/NoOfLineItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="lineItemScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LineItemTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/lineItem}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_LINEITEM_QUAL}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_VISIBLE_FIELDS}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{Label}"/><Text text="{VisibleFields}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLinks.view.xml":'<mvc:View \r\n    xmlns:mvc="sap.ui.core.mvc" \r\n    xmlns="sap.m" \r\n    xmlns:core="sap.ui.core"\r\n    controllerName="sap.ovp.cards.rta.SelectLinks"><Toolbar><Title text="{ovpResourceModel>OVP_KEYUSER_APPLICATIONS_DIALOG}({/NoOfLinks})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField \r\n            placeholder="{ovpResourceModel>OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" \r\n            width="40%" \r\n            search="filterTable"\r\n            class="{= ${tableRows>/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer \r\n        id="linksScrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><Table \r\n            id="LinkTable" \r\n            sticky="ColumnHeaders" \r\n            inset="false" \r\n            fixedLayout="false"\r\n            items="{/links}"><columns><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_APPLICATION_NAME}" /></Column><Column><Label text="{ovpResourceModel>OVP_KEYUSER_TABLE_TITLE_TECHNICAL_NAME}" /></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{name}"/><Text text="{value}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialog.view.xml":'<mvc:View \n    xmlns:mvc="sap.ui.core.mvc" \n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:l="sap.ui.layout"\n\tcontrollerName="sap.ovp.cards.rta.SettingsDialog"><OverflowToolbar \n        width="100%" \n        visible="{visibility>/viewSwitchEnabled}" \n        class="sapOvpSettingsDialogOverFlowToolbar sapUiSmallMarginTopBottom"><ToolbarSpacer/><Select enabled="{visibility>/showViewSwitch}"\n                    items="{\n                        path: \'/aViews\'\n                    }"\n                    selectedKey="{/selectedKey}"\n                    change="selectViewSwitch"><core:Item key="{key}" text="{text}"/></Select><Button \n                id="addView" \n                text="{ovpResourceModel>OVP_KEYUSER_ADD_VIEW_BUTTON}" \n                press="addView" \n                type="Transparent"/><Button \n                id="deleteView" \n                enabled="{visibility>/showViewName}" \n                type="Transparent"\n                text="{ovpResourceModel>OVP_KEYUSER_DELETE_VIEW_BUTTON}" \n                press="deleteView"/><ToolbarSpacer/></OverflowToolbar><template:if test="{= ${deviceSystemProperties>/phone}}" ><template:then><Carousel><pages><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></l:VerticalLayout><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></l:VerticalLayout></pages></Carousel></template:then><template:else><ScrollContainer\n                id="SettingsDialogScrollContainerForForm"\n                class="sapOvpScrollContainer"\n                width="100%"\n                height="100%"\n                horizontal="false"\n                vertical="true"\n                focusable="true"><FlexBox id="dialogContainer" direction="{deviceMediaProperties>/deviceMedia}"><template:if test="{= !${ovpCardProperties>/addNewCard}}" ><VBox id="dialogCardVBox"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></VBox></template:if><VBox id="sapOvpSettingsForm"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></VBox></FlexBox></ScrollContainer></template:else></template:if></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialogCardPreview.fragment.xml":'<core:FragmentDefinition\r\n    xmlns:core="sap.ui.core"\r\n    xmlns="sap.m"><VBox class="sapUiSmallMarginTop sapUiSmallMarginBegin"><HBox id="dialogCardOverlay" class="dialogCardVBox dialogCardOverlay"><core:ComponentContainer \r\n                id="dialogCard" \r\n                busyIndicatorDelay="0" \r\n                busy="true" \r\n                visible="{visibility>/cardPreview}"/><MessagePage \r\n                id="dialogCardNoPreview" \r\n                visible="{= !${visibility>/cardPreview}}" \r\n                icon="sap-icon://map-3"\r\n                class="sapOvpSettingsDialogErrorPreviewWidth"\r\n                showHeader="false" \r\n                description=""/></HBox><HBox visible="{visibility>/showViewSwitch}"><Button \r\n                class="sapUiMediumMarginBottom" \r\n                enabled="{/isViewResetEnabled}"\r\n                press="resetView" \r\n                text="{ovpResourceModel>OVP_KEYUSER_RESET_VIEW_BUTTON}" \r\n                type="Transparent"/></HBox></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SettingsDialogForm.fragment.xml":'<core:FragmentDefinition \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \r\n    xmlns="sap.m"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout\r\n                labelSpanXL="12" \r\n                labelSpanL="12" \r\n                labelSpanM="12" \r\n                labelSpanS="12" \r\n                adjustLabelSpan="false"\r\n                emptySpanXL="0" \r\n                emptySpanL="0" \r\n                emptySpanM="0" \r\n                emptySpanS="0"\r\n                singleContainerFullSize="false" /></f:layout><f:formContainers><template:if test="{= !${ovpCardProperties>/addNewCard}}"><template:then><f:FormContainer id="sapOvpSettingsFormContainer"><f:formElements><template:if test="{= !(${ovpCardProperties>/layer} ===\'VENDOR\' || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="validateInputField"\r\n                                                editable="true" \r\n                                                required="true" \r\n                                                valueState="{= ${/title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                valueStateText="{= ${/title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VALUE_STATE} : \'\'}" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}" visible="{visibility>/title}"><f:fields><Input \r\n                                                id="sapOvpSettingsTitle" \r\n                                                value="{/title}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                required="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DYNAMIC_SUBTITLE_SWITCH}" visible="{visibility>/dynamicSwitchSubTitle}"><f:fields><Switch \r\n                                        id="sapOvpSettingsSwitchSubTitle"\r\n                                        state="{visibility>/dynamicSwitchStateSubTitle}"\r\n                                        type="Default"  \r\n                                        change="updateCard" /></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/dynamicSubTitle}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDynamicSubTitle" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dynamicSubTitle\'\r\n                                            }"\r\n                                            selectedKey= "{/dynamicSubtitleAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VIEW_NAME}" visible="{visibility>/showViewName}"><f:fields><Input \r\n                                            id="sapOvpSettingsViewName" \r\n                                            value="{/viewName}" \r\n                                            change="validateInputField"\r\n                                            required="true"\r\n                                            valueState="{= ${/viewName} === \'\' ? \'Error\' : \'None\'}"\r\n                                            valueStateText="{= ${/viewName} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_VIEW_NAME} : \'\'}" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SET_DEFAULT}" visible="{visibility>/showDefaultView}"><f:fields><Switch \r\n                                            id="sapOvpDefaultViewSwitch" \r\n                                            state="{/isDefaultView}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ENTITYSET}" visible="{visibility>/showEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsEntitySet" width="100%"\r\n                                            items="{\r\n                                                path: \'/allEntitySet\'\r\n                                            }"\r\n                                            selectedKey= "{/entitySet}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= !(${ovpCardProperties>/layer} ===\'VENDOR\' || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}" visible="{visibility>/subTitle}"><f:fields><Input \r\n                                                id="sapOvpSettingsSubTitle" \r\n                                                value="{/subTitle}" \r\n                                                change="updateCard"\r\n                                                editable="true" \r\n                                                showSuggestion="true"\r\n                                                suggestionItems="{path: \'/ai18nPropertiesAndSubTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_HEADER}" visible="{visibility>/kpiHeader}"><f:fields><Switch \r\n                                            id="sapOvpSettingsKPIHeaderSwitch"\r\n                                            state="{/hasKPIHeader}"\r\n                                            type="Default"  \r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_Value}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsDataPoint" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/dataPoint\'\r\n                                            }"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            forceSelection="false"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><template:if test="{= !(${ovpCardProperties>/layer} ===\'VENDOR\' || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true" /></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                                    id="sapOvpSettingsValueSelectionInfo" \r\n                                                    value="{/valueSelectionInfo}" \r\n                                                    change="updateCard"\r\n                                                    editable="true"\r\n                                                    showSuggestion="true"\r\n                                                    suggestionItems="{path: \'/ai18nPropertiesAndValSelInfo\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LIST_TYPE}" visible="{visibility>/listType}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListType" \r\n                                            state="{/isExtendedList}" \r\n                                            change="updateCard"\r\n                                            type="Default"  /></f:fields></f:FormElement></template:if><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavor}"><f:fields><Switch \r\n                                            id="sapOvpSettingsListFlavorForList" \r\n                                            state="{/isBarList}" \r\n                                            type="Default"\r\n                                            change="updateCard" /></f:fields></f:FormElement><f:FormElement label="{ovpCardProperties>/listFlavorName}" visible="{visibility>/listFlavorForLinkList}"><f:fields><SegmentedButton \r\n                                            id="sapOvpSettingsListFlavorForLinkList" \r\n                                            select="updateCard"\r\n                                            selectedKey="{/listFlavor}" ><items><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorList" \r\n                                                    key="standard"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_LIST_TEXT_SEG_BUTTON}" /><SegmentedButtonItem \r\n                                                    id="sapOvpSettingsListFlavorCarousel" \r\n                                                    key="carousel"\r\n                                                    text="{ovpResourceModel>OVP_KEYUSER_CAROUSEL_TEXT_SEG_BUTTON}" /></items></SegmentedButton></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties>/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties>/template} !== \'sap.ovp.cards.v4.linklist\'}" ><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_PRESENTATION_VAR}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterAndPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/selectionPresentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/selectionPresentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsKPIAnnotation"\r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/KPI\'\r\n                                            }"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsFilterByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/selectionVariant\'}, {path:\'/selectionAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariantSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsPresentedByAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/presentationVariant\'}, {path:\'/presentationAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/KPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsIdentificationForKPI" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'/KPINav\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getApplicationName\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chartSPVorKPI}"><f:fields><Text \r\n                                            id="sapOvpSettingsChartAnalytical" \r\n                                            width="100%"\r\n                                            text="{parts:[{path:\'/chart\'}, {path:\'/chartAnnotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"></Text></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTION_VAR}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsFilterBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                                path: \'/selectionVariant\'\r\n                                                            }"\r\n                                            selectedKey= "{/selectionAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsPresentedBy" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/presentationVariant\'\r\n                                            }"\r\n                                            selectedKey= "{/presentationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LINEITEM_ANNO}" visible="{visibility>/lineItem}"><f:fields><Input \r\n                                            id="sapOvpSettingsLineItem"\r\n                                            value="{\r\n                                                path: \'/lineItemQualifier\'\r\n                                            }"\r\n                                            showValueHelp="true" \r\n                                            editable="true" \r\n                                            enabled="true" \r\n                                            valueHelpOnly="true"\r\n                                            valueHelpRequest="openLineItemValueHelpDialog" /></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsIdentification" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/identification\'\r\n                                            }"\r\n                                            selectedKey= "{/identificationAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility>/chart}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsChart" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/chart\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/chartAnnotationPath}"\r\n                                            change="updateCard" ><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\') &amp;&amp; \r\n                                ${ovpCardProperties>/staticContent}}" ><f:FormElement><f:fields><Toolbar><content><ToolbarSpacer /><Button \r\n                                                    id="moveToTheTop" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_TOP}" \r\n                                                    icon="sap-icon://collapse-group" \r\n                                                    press="onPressMoveToTheTop" \r\n                                                    enabled="{visibility>/moveToTheTop}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveUp" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_UP}" \r\n                                                    icon="sap-icon://navigation-up-arrow" \r\n                                                    press="onPressMoveUp" \r\n                                                    enabled="{visibility>/moveUp}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveDown" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DOWN}" \r\n                                                    icon="sap-icon://navigation-down-arrow" \r\n                                                    press="onPressMoveDown" \r\n                                                    enabled="{visibility>/moveDown}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="moveToTheBottom" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_BOTTOM}" \r\n                                                    icon="sap-icon://expand-group" \r\n                                                    press="onPressMoveToTheBottom" \r\n                                                    enabled="{visibility>/moveToTheBottom}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="delete" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_DELETE}" \r\n                                                    icon="sap-icon://delete" \r\n                                                    press="onPressDelete" \r\n                                                    enabled="{visibility>/delete}" \r\n                                                    type="Transparent"/><Button \r\n                                                    id="add" \r\n                                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_ADD}" \r\n                                                    icon="sap-icon://add" \r\n                                                    press="onPressAdd" \r\n                                                    type="Transparent"/></content></Toolbar></f:fields></f:FormElement><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.StaticLinkListCardLineItemsPanel" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}" ><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.KPICardTable" type="XML"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link  text="{ovpResourceModel>OVP_KEYUSER_KPI_LINK}({/NoKPI})" press="onSeePress"/></FlexBox></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STOP_RESIZE}" visible="{visibility>/stopResizing}"><f:fields><Switch \r\n                                            id="sapOvpSettingsStopResize"\r\n                                            state="{= !${/stopResizing}}"\r\n                                            type="Default" \r\n                                            change="onResizingChange"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_COLUMNS}" visible="{visibility>/noOfColumns}"><f:fields><ComboBox \r\n                                            id="sapOvpSettingsNumberOfColumns" \r\n                                            width="100%"\r\n                                            items="{\r\n                                                path: \'/NoOfColumns\'\r\n                                            }"\r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/defaultSpan/cols}"\r\n                                            change="onNumberOfColumnsChanged" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DEFAULT_NUMBER_OF_ROWS}" visible="{visibility>/noOfRows}"><f:fields><template:if test="{= ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.analytical\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.smart.chart\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.bubble\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.donut\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.charts.line\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.linklist\' ||\r\n                                            ${ovpCardProperties>/template} === \'sap.ovp.cards.v4.linklist\'}" ><template:then><ComboBox \r\n                                                    id="sapOvpSettingsNumberOfRows" \r\n                                                    width="100%"\r\n                                                    items="{\r\n                                                        path: \'/NoOfRows\'\r\n                                                    }"\r\n                                                    forceSelection="false"\r\n                                                    selectedKey= "{/defaultSpan/rows}"\r\n                                                    change="onNumberOfRowsChanged" ><core:Item key="{value}" text="{name}"/></ComboBox></template:then><template:else><StepInput\r\n                                                    id="sapOvpSettingsNumberOfRows"\r\n                                                    value="{/defaultSpan/rows}"\r\n                                                    min="0"\r\n                                                    max="99"\r\n                                                    valueStateText="Number of Rows should be between 0 and 99"\r\n                                                    change="onNumberOfRowsChanged"/></template:else></template:if></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/layer} ===\'VENDOR\' || ${ovpCardProperties>/layer} ===\'CUSTOMER_BASE\')}"><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                            id="sapOvpCardProperiesAuthorization" \r\n                                            value="{/requireAppAuthorization}" \r\n                                            change="updateProperty" \r\n                                            width="100%"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPAddODataSelect" \r\n                                            width="100%" \r\n                                            visible="{visibility>/addODataSelect}"\r\n                                            text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                            selected="{/addODataSelectCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter" \r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_CUSTOM_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><Input \r\n                                            id="sapOVPCustomParams" \r\n                                            value="{/customParams}" \r\n                                            change="validateInputField"\r\n                                            editable="true"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement><f:FormElement visible="{visibility>/addCustomActions}"><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomActions"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_Actions}"\r\n                                            selected="{/addCustomActions}"\r\n                                            select="updateProperty" ></CheckBox></f:fields></f:FormElement><f:FormElement visible="{/addCustomActions}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddCustomActions" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties>/layer} !==\'VENDOR\' || ${ovpCardProperties>/layer} !==\'CUSTOMER_BASE\') &amp;&amp; ${ovpCardProperties>/NewKPICard}}"><f:FormElement><f:fields><CheckBox \r\n                                            id="sapOVPEnableCustomParameter"\r\n                                            width="100%"\r\n                                            text="{ovpResourceModel>OVP_DTA_CUSTOM_PARAMS}"\r\n                                            selected="{/addCustomParameters}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement></template:if></f:formElements></f:FormContainer></template:then><template:else><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATASOURCE}" visible="{visibility>/dataSource}"><f:fields><RadioButtonGroup id="useDatasource_RadioButtonGroup" columns="2" width="100%" class="sapUiMediumMarginBottom"><buttons><RadioButton id="sapOVPExistingDataSource" text="{ovpResourceModel>OVP_KEYUSER_EXISTING_DS}" selected="true" select="updateProperty"/><RadioButton id="sapOVPNewDataSource" text="{ovpResourceModel>OVP_KEYUSER_NEW_DS}" selected="false" select="updateProperty"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceExisting}"><f:fields><ComboBox \r\n                                            id="sapOVPDataSourceExistingComboBox" \r\n                                            width="100%"\r\n                                            items="{path: \'/datasources\'}"\r\n                                            change="onDatasourceComboboxChanged" \r\n                                            selectedKey= "{/datasSourceExisting}"\r\n                                            visible="{visibility>/dataSourceExisting}"><core:Item key="{Title}" text="{Title}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/dataSourceNew}"><f:fields><Input \r\n                                            id="sapOVPDataSourceNewInput" \r\n                                            value="{/datasSourceNew}" \r\n                                            change="onDatasourceComboboxChanged"\r\n                                            editable="true" \r\n                                            showSuggestion="true"\r\n                                            required="true"\r\n                                            suggestionItems="{path: \'/datasources\'}"\r\n                                            width="100%"\r\n                                            visible="{visibility>/dataSourceNew}"><core:Item key="{Title}" text="{Title}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>SELECTCARDTYPEWIZARDSTEP_TITLE_LABEL}" visible="{visibility>/selectCardType}"><f:fields><ComboBox \r\n                                            id="sapOVPCardType" \r\n                                            width="100%"\r\n                                            items="{path: \'/cardType\'}"\r\n                                            selectedKey="{/template}"\r\n                                            selectionChange="onCardTypeSelected" ><core:Item key="{template}" text="{text}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility>/addKPIHeader}"><f:fields><CheckBox \r\n                                            id="sapOVPAddKpiCheckBoxID" \r\n                                            width="100%" \r\n                                            text="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_LABEL}"\r\n                                            tooltip="{ovpResourceModel>CARD_CUSTOMIZATION_ADD_KPI_HEADER_TOOLTIP}"\r\n                                            selected="{/addKPIHeaderCheckBox}"\r\n                                            select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>CARD_ENTITYSET}" visible="{visibility>/setEntitySet}"><f:fields><ComboBox \r\n                                            id="sapOVPEntitySetList" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/allEntitySet\'}"\r\n                                            change="updateProperty" \r\n                                            forceSelection="false"\r\n                                            selectedKey= "{/entitySet}"><core:Item key="{entityType}" text="{value}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_GENERAL}" visible="{visibility>/setGeneralCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE}"><f:fields><Input \r\n                                        id="sapOvpCardTitle" \r\n                                        value="{/title}" \r\n                                        change="updateProperty"\r\n                                        editable="true" \r\n                                        required="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE}"><f:fields><Input \r\n                                        id="sapOvpCardSubTitle" \r\n                                        value="{/subTitle}" \r\n                                        change="updateProperty"\r\n                                        required="{visibility>/requiredSubTitle}"\r\n                                        editable="true" \r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input \r\n                                        id="sapOvpCardProperiesAuthorization" \r\n                                        value="{/requireAppAuthorization}" \r\n                                        change="updateProperty" \r\n                                        width="100%"\r\n                                        editable="true"/></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONS}" visible="{visibility>/setAnnotationCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_KPI_ANNO_PATH}" visible="{visibility>/KPI}"><f:fields><ComboBox \r\n                                            id="sapOvpKpiAnnotationPath" \r\n                                            width="100%"\r\n                                            items="{path: \'/KPI\'}"\r\n                                            selectedKey="{/kpiAnnotationPath}"\r\n                                            change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_IDENTIFICATION}" visible="{visibility>/identification}"><f:fields><ComboBox \r\n                                        id="sapOVPIdentification" \r\n                                        width="100%"\r\n                                        items="{path: \'/identification\'}"\r\n                                        selectedKey="{/identificationAnnotationPath}"\r\n                                        change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONPRESENTATIONVARIANT}" visible="{visibility>/selectionPresentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionPresentationVariant\'}"\r\n                                        selectedKey="{/selectionPresentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_SELECTIONVARIANT}" visible="{visibility>/selectionVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPSelectionVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/selectionVariant\'}"\r\n                                        selectedKey="{/selectionAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_PRESENTATIONVARIANT}" visible="{visibility>/presentationVariant}"><f:fields><ComboBox \r\n                                        id="sapOVPPresentationVariant" \r\n                                        width="100%"\r\n                                        items="{path: \'/presentationVariant\'}"\r\n                                        selectedKey="{/presentationAnnotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_ANNOTATIONPATH}" visible="{visibility>/lineItem}"><f:fields><ComboBox \r\n                                        id="sapOVPAnnotationPath" \r\n                                        width="100%"\r\n                                        items="{path: \'/lineItem\'}"\r\n                                        selectedKey="{/annotationPath}"\r\n                                        change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATAPOINT}" visible="{visibility>/dataPoint}"><f:fields><ComboBox \r\n                                            id="sapOvpDataPoint" \r\n                                            width="100%" \r\n                                            required="true"\r\n                                            items="{path: \'/dataPoint\'}"\r\n                                            selectedKey="{/dataPointAnnotationPath}"\r\n                                            change="updateProperty" ><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_DATA_POINT_SELMODE}" visible="{visibility>/dataPointSelectionMode}"><f:fields><ComboBox \r\n                                        id="sapOVPDataPointSelectionMode" \r\n                                        width="100%"\r\n                                        items="{path: \'/navigation\'}"\r\n                                        selectedKey="{/navigationPath}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel>OVP_KEYUSER_CARDPROPERTIES}" visible="{visibility>/setCardProperties}"><f:formElements><f:FormElement><f:fields><CheckBox \r\n                                        id="sapOVPAddODataSelect" \r\n                                        width="100%" \r\n                                        visible="{visibility>/addODataSelect}"\r\n                                        text="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        tooltip="{ovpResourceModel>OVP_KEYUSER_ADDODATASELECT}"\r\n                                        selected="{/addODataSelectCheckBox}"\r\n                                        select="updateProperty"></CheckBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listFlavorForLinkList}"><f:fields><ComboBox \r\n                                        id="sapOVPLinkListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aLinkListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty"\r\n                                        required="true"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTTYPE}" visible="{visibility>/listType}"><f:fields><ComboBox \r\n                                        id="sapOVPListType" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListType\'}"\r\n                                        selectedKey="{/listType}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_LISTFLAVOR}" visible="{visibility>/listFlavor}"><f:fields><ComboBox \r\n                                        id="sapOVPListFlavor" \r\n                                        width="100%"\r\n                                        items="{path: \'/aListFlavour\'}"\r\n                                        selectedKey="{/listFlavor}"\r\n                                        change="updateProperty" ><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_VALUESELECTIONINFO}" visible="{visibility>/valueSelectionInfo}"><f:fields><Input \r\n                                        id="sapOvpValueSelectionInfo" \r\n                                        value="{/valueSelectionInfo}" \r\n                                        change="updateProperty"\r\n                                        required="true"\r\n                                        editable="true"\r\n                                        showSuggestion="true"\r\n                                        suggestionItems="{path: \'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement></f:formElements></f:FormContainer></template:else></template:if></f:formContainers></f:Form></core:FragmentDefinition>',
	"sap/ovp/cards/rta/StaticLinkListCardLineItemsPanel.fragment.xml":'<core:FragmentDefinition  \r\n    xmlns:core="sap.ui.core" \r\n    xmlns:f="sap.ui.layout.form"\r\n    xmlns="sap.m"><ScrollContainer\r\n        id="scrollContainer"\r\n        class="sapOvpScrollContainer"\r\n        height="20rem"\r\n        width="100%"\r\n        horizontal="false"\r\n        vertical="true"\r\n        focusable="true"><List \r\n            id="sapOvpStaticLinkListLineItem" \r\n            class="sapOvpSettingsDialogCustomList"\r\n            items="{/staticContent}"\r\n            selectionChange="onSelectionChange"\r\n            mode="SingleSelectLeft"\r\n            includeItemInSelection="true"><items><CustomListItem type="Active"><HBox><VBox \r\n                            width="30%" \r\n                            visible="{= !${deviceSystemProperties>/phone}}"\r\n                            alignItems="Center"\r\n                            justifyContent="Center"><HBox><Image \r\n                                    class="sapUiSmallMargin"\r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true}"\r\n                                    alt="{imageAltText}"\r\n                                    tooltip="{toolTip}" \r\n                                    densityAware="true"\r\n                                    width="4rem" \r\n                                    height="4rem"\r\n                                    backgroundPosition="center center" \r\n                                    mode="Background"\r\n                                    src="{parts: [{path: \'/\'}, {path: \'imageUri\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getImageUrl\'}"/><VBox \r\n                                    visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false}"\r\n                                    class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" src="{imageUri}"/></FlexBox></VBox><VBox visible="{= !${imageUri}}"\r\n                                      class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon \r\n                                            class="sapOvpLinkListImageCenter"\r\n                                            tooltip="{toolTip}" \r\n                                            useIconTooltip="false"\r\n                                            size="3rem" \r\n                                            src="sap-icon://background"/></FlexBox></VBox></HBox><HBox visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_CHANGE_VISUAL}" \r\n                                    icon="sap-icon://edit" \r\n                                    press="onChangeVisualPress" \r\n                                    enabled="true" \r\n                                    type="Transparent"/><Button \r\n                                    class="sapOvpSettingsMiniMarginBeginEnd" \r\n                                    tooltip="{ovpResourceModel>OVP_KEYUSER_TOOLTIP_FOR_REMOVE_VISUAL}" \r\n                                    icon="sap-icon://delete" \r\n                                    press="onRemoveVisualPress"\r\n                                    enabled="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/removeVisual\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"\r\n                                    type="Transparent"/></HBox></VBox><VBox><f:Form editable="true"><f:layout><f:ResponsiveGridLayout \r\n                                        labelSpanXL="12"\r\n                                        labelSpanL="12" \r\n                                        labelSpanM="12" \r\n                                        labelSpanS="12" \r\n                                        adjustLabelSpan="false"\r\n                                        emptySpanXL="0" \r\n                                        emptySpanL="0" \r\n                                        emptySpanM="0" \r\n                                        emptySpanS="0"\r\n                                        singleContainerFullSize="false" /></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel>OVP_KEYUSER_TITLE_FOR_LINK}" visible="{visibility>/lineItemTitle}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemTitle" \r\n                                                        value="{title}" \r\n                                                        change="validateInputField"\r\n                                                        required="true" \r\n                                                        valueState="{= ${title} === \'\' ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${title} === \'\' ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_SUBTITLE_FOR_LINK}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/lineItemSubTitle\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        id="sapOvpSettingsLineItemSubTitle" \r\n                                                        value="{subTitle}" \r\n                                                        change="updateCard"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINK_TYPE}" \r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><RadioButtonGroup \r\n                                                        columns="2" \r\n                                                        select="onLinkSourceChange"\r\n                                                        selectedIndex="{= ${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} === true ? 1 : 0}"><buttons><RadioButton text="{ovpResourceModel>OVP_KEYUSER_APPLICATION_TEXT_RAD_BUTTON}"/><RadioButton text="{ovpResourceModel>OVP_KEYUSER_URL_TEXT_RAD_BUTTON}"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/staticLink\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{targetUri}" \r\n                                                        change="onExternalUrlChange"\r\n                                                        required="true" \r\n                                                        valueState="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? \'Error\' : \'None\'}"\r\n                                                        valueStateText="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? ${ovpResourceModel>OVP_KEYUSER_INPUT_ERROR_RECORD_URL} : \'\'}"/></f:fields></f:FormElement><f:FormElement \r\n                                                label="{ovpResourceModel>OVP_KEYUSER_LINKS}"\r\n                                                visible="{parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}, {path:\'visibility>/links\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input \r\n                                                        value="{parts:[{path:\'staticCardProperties>/links\'}, {path:\'semanticObject\'}, {path:\'action\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.getApplicationName\'}"\r\n                                                        showValueHelp="true" \r\n                                                        editable="true" \r\n                                                        enabled="true" \r\n                                                        valueHelpOnly="true" \r\n                                                        required="true"\r\n                                                        valueHelpRequest="createValueHelpDialogForInternalUrl"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link \r\n                                                            text="{= !${parts:[{path:\'index\'}, {path:\'visibility>/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} ? ${ovpResourceModel>OVP_KEYUSER_SHOW_MORE_LINK}: ${ovpResourceModel>OVP_KEYUSER_SHOW_LESS_LINK}}"\r\n                                                            press="onShowMorePress"/></FlexBox></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></HBox></CustomListItem></items></List></ScrollContainer></core:FragmentDefinition>',
	"sap/ovp/cards/stack/Stack.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><VBox id="stackContent" class="sapOvpStackCardContent" justifyContent="SpaceBetween"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><Label id="stackSize" class="sapOvpStackCardSize"><customData><ovp:CustomData key="role" value="" writeToDom="true"/></customData></Label><Text id="stackTotalSize" class="sapOvpStackCardTotalSize"/><core:Icon \n            id="StackCardIcon" \n            class="sapOvpStackCardIcon" \n            src="sap-icon://dimension" \n            useIconTooltip="false"></core:Icon></VBox></core:FragmentDefinition>\n',
	"sap/ovp/cards/table/Table.fragment.xml":'<core:FragmentDefinition\r\n    xmlns="sap.m"\r\n    xmlns:core="sap.ui.core"\r\n    xmlns:build="sap.build"\r\n    xmlns:ovp="sap.ovp.ui"\r\n    xmlns:sfi="sap.ui.comp.smartfield"\r\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table \r\n        id="ovpTable" \r\n        class="ovpTableClass cardType"\r\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/annotationPath\'\n        helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="sap.ovp.cards.AnnotationHelper.removeDuplicateDataField" \n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                            styleClass="sapTableColumnHide" \n                                            visible="false" \n                                            hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                                text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                                wrapping="true"\n                                                wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                                styleClass="sapTableColumnHide" \n                                                visible="false" \n                                                hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                                        class="displayBlock {= ${path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                                        text="{path: \'dataField>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                                        wrapping="true"\n                                                        wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if test="{= ${dataField2>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>com.sap.vocabularies.UI.v1.Importance/EnumMember}}"><template:then><template:if test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':\n                                            ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':\n                                                ${dataField3>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'} === ${dataField4>Label/String} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target" \n                                                        helper="sap.ui.model.odata.AnnotationHelper.resolvePath" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField5"><template:if\n                                    test="{= ${dataField5>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if\n                                            test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField5>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField5>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField5>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField5>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField6"><template:if\n                                    test="{= ${dataField6>com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if\n                                            test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField6>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField6>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField6>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField6>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem>\'}" var="dataField7"><template:if test="{=  !${dataField7>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><template:then><template:if\n                                            test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                            class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                            text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                            contactAnnotationPath="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                                                            forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif\n                                                test="{= ${dataField7>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with path="dataField7>Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails"\n                                                                        type="XML"/><Link binding="{= ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{path: \'contact>fn\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                                    editable="false" uomEditable="false" enabled="true"\n                                                                    clientSideMandatoryCheck="false"\n                                                                    value="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                            criticality="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                            criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                            class="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                            number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"\n                                                            unit="{parts:[{path:\'dataField7>\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                            state="{path: \'dataField7>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField\n                                                class="textAlignCenter"\n                                                editable="false" \n                                                uomEditable="false" \n                                                enabled="true"\n                                                clientSideMandatoryCheck="false"\n                                                value="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                criticality="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointStateForSmartField\'}"\n                                                                criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber\n                                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text\n                                    class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition \n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:suite="sap.suite.ui.commons" \n\txmlns:viz="sap.viz.ui5.controls"\n\txmlns:dataSet="sap.viz.ui5.data" \n\txmlns:feed="sap.viz.ui5.controls.common.feeds"\n\txmlns:ovp="sap.ovp.ui" \n\txmlns:charts="sap.ovp.cards.v4.charts"><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>analyticalCardType}" writeToDom="true" /></customData><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:with \n\t\t\tpath="ovpCardProperties>/selectionAnnotationPath"\n\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\tvar=\'selVar\'><template:with \n\t\t\t\tpath="ovpCardProperties>/presentationAnnotationPath"\n\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tvar=\'preVar\'><template:if test="{chart>}"><HBox class="ovpChartTitleHBox" ><items><VBox class="ovpChartTitleText"><Text id="ovpCT" class="ovpChartTitle"  maxLines="1" \n\t\t\t\t\t\t\t\t\ttext="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" ><customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label" value="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true" /></template:if></customData></Text></VBox><VBox class="ovpChartTitleScaleText"><Text id="ovpUoMTitle" class="ovpChartTitle" maxLines="1"><customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label" writeToDom="true" /></template:if></customData></Text></VBox></items></HBox><template:if test="{path:\'chart>DimensionAttributes\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart>MeasureAttributes\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart>ChartType}"><template:if test="{preVar>MaxItems}"><template:then><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"\n\t\t\t\t\t\t\t\t\t\t\taggregateData="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>undefined\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler\n\t\t\t\t\t\t\t\t\t\t\tchartType="{path: \'chart>ChartType\', formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\tentitySet="{ path:\'entitySet>\' , formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\' }"\n\t\t\t\t\t\t\t\t\t\t\tdata="{parts: [{path:\'entitySet>\'}, {path:\'selVar>\'}, {path:\'preVar>\'}, {path:\'chart>DimensionAttributes\'}, {path:\'chart>MeasureAttributes\'}, {path:\'chart>ChartType\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element /></charts:data><charts:aggregateData><core:Element /></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz"\n\t\t\t\t\t\t\t\t\t\t\t\t\tuiConfig="{applicationSet:\'fiori\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvizType="{parts: [{path: \'chart>ChartType\'}, {path: \'chart>DimensionAttributes\'}], formatter: \'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth="100%"><viz:customData><template:if test="{chart>Title}"><ovp:CustomData key="aria-label"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue="{chart>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twriteToDom="true" /></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel>/}"></dataSet:FlattenedDataset></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with \n\t\tpath="ovpCardProperties>/chartAnnotationPath"\n\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\tvar=\'chart\'><template:if test="{chart>}"><template:if test="{chart>ChartType}"><template:if test="{path:\'chart>ChartType\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/generic/noData.fragment.xml":'<core:FragmentDefinition \n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns="sap.m"><FlexBox \n\t\talignItems="Center" \n\t\tjustifyContent="SpaceAround" \n\t\tclass="noDataSection"><Text maxLines="1"\n\t\t\ttext="{ovplibResourceBundle>noData}"><customData><ovp:CustomData \n\t\t\t\t\tkey="aria-label"\n\t\t\t\t\tvalue="{ovplibResourceBundle>noData}"\n\t\t\t\t\twriteToDom="true" /><ovp:CustomData key="tabindex" value="0" writeToDom="true" /></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Action.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||\n        ${dataField>RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button \n            text="{dataField>Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"\n            press="onActionPress" \n            type="Transparent"><layoutData><OverflowToolbarLayoutData\n                    moveToOverflow="true"\n                    stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField>RecordType}"/><template:if test="{= ${dataField>SemanticObject}}"><core:CustomData key="semanticObject" value="{dataField>SemanticObject@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Url}}"><core:CustomData key="url" value="{dataField>Url@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField>Action}}"><core:CustomData key="action" value="{dataField>Action@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><core:CustomData key="label" value="{dataField>Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with \n        path=\'ovpCardProperties>/identificationAnnotationPath\' \n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'identification\'><template:if test="{path: \'identification>\', formatter: \'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true" /><ovp:CustomData key="role" value="toolbar" writeToDom="true" /></customData><ToolbarSpacer/><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'High\'},\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Medium\'}\n                            ],\n                            sorter: [{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]\n                        }" \n                        var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat\n                        list="{\n                            path:\'identification>\',\n                            filters: [\n                                {path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\', operator: \'EndsWith\', value1: \'Low\'}\n                            ]\n                            }" \n                            var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat \n                    list="{path:\'identification>\'}" \n                    var="dataField"><template:if test="{=  !${dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Card.view.xml":'<mvc:View\n    controllerName="{ovpCardProperties>/controllerName}"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"></VBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox \n        width="100%" \n        justifyContent="End" \n        class="sapOvpNewBadgeWrapper" \n        visible="{= ${ovpCardProperties>/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle>OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties>/contentPosition} === \'Right\'}" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device>/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"></core:HTML></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"></core:HTML></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"></HBox></mvc:View>',
	"sap/ovp/cards/v4/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage \n        header="{ovplibResourceBundle>CONTACT_INFO}"\n        icon="{= ${contact>photo} ? ${contact>photo@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'sap-icon://person-placeholder\'}"\n        title="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n        description="{contact>role@@sap.ui.model.odata.v4.AnnotationHelper.format}"><QuickViewGroup><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_JOB_TITLE}" \n                type="text"\n                value="{contact>title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                visible="{= !!${contact>title}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_DEPARTMENT}" \n                type="text"\n                value="{contact>org@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                visible="{= !!${contact>org}}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_EMAIL}" \n                type="email"\n                value="{path: \'contact>email\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}"\n                visible="{path: \'contact>email\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_PHONE}" \n                type="phone"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_MOBILE}" \n                type="{= (${device>/system/phone} || ${device>/system/tablet})  ? \'mobile\'  : \'phone\' }"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}"/><QuickViewGroupElement \n                label="{ovplibResourceBundle>CONTACT_FAX}" \n                type="text"\n                value="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}"\n                visible="{path: \'contact>tel\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.v4.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties>/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer \n\t\t\t\tid="ovpCardContentContainer" \n\t\t\t\tclass="{= ${ovpCardProperties>/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties>/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' || !${ovpCardProperties>/reason} || ${ovpCardProperties>/state} === \'undefined\'}" ><template:if test="{ovpCardProperties>/tabs}"><Toolbar \n\t\t\t\t\t\t\tid="toolbar" \n\t\t\t\t\t\t\tclass="sapOvpDropDown {= ${ovpCardProperties>/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle>OVP_CARD_DROP_DOWN_LABEL}" /><Select \n\t\t\t\t\t\t\t\tid="ovp_card_dropdown" \n\t\t\t\t\t\t\t\tselectedKey="1" \n\t\t\t\t\t\t\t\tchange="changeSelection"><template:repeat \n\t\t\t\t\t\t\t\t\tlist="{ovpCardProperties>/tabs}" \n\t\t\t\t\t\t\t\t\tvar="tab"><core:Item\n\t\t\t\t\t\t\t\t\t\tid ="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\tkey="{parts: [{path: \'ovpCardProperties>/tabs\'}, {path: \'tab>\'}], formatter: \'sap.ovp.cards.CommonUtils.createKeyForCB\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{tab>value}"></core:Item></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if\n\t\t\t\ttest="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties>/layoutDetail} !== \'resizable\' || ${ovpCardProperties>/state} === \'Loading\' || ${ovpCardProperties>/reason}}"><template:if test="{ovpCardProperties>/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties>/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentRight.fragment.xml":'<core:FragmentDefinition\n\tcontrollerName="sap.ovp.cards.v4.generic.Card"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class = "cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties>/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties>/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountFooter.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true" /></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountHeader.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:ovp="sap.ovp.ui"><FlexBox class = "sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Header.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox \n        id="ovpCardHeader"\n        class="{= ${ovpCardProperties>/category} || ${ovpCardProperties>/title} || ${ovpCardProperties>/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } {= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'}"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with \n                    path="entityType>com.sap.vocabularies.UI.v1.HeaderInfo" \n                    var="header"><Text \n                        id="ovpQuickviewCardHeader"\n                        text="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}"\n                        class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData \n                                key="aria-label" \n                                value="{= ${ovpCardProperties>/title} + \': \' + ${path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" \n                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties>/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties>/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text\n                    id= "ViewAll"\n                    text="{ovplibResourceBundle>View_All_Stack_Card}"\n                    class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>View_All_Stack_Card}" writeToDom="true" /></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core" \n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" ><template:with \n        path="ovpCardProperties>/dataPointAnnotationPath"\n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'dataPoint\'><template:with \n            path="ovpCardProperties>/selectionAnnotationPath"\n            helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n            var=\'selVar\'><template:with \n                path="ovpCardProperties>/presentationAnnotationPath"\n                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                var=\'preVar\'><template:if test="{dataPoint>}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint>Value/$Path}"><FlexBox \n                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                id="kpiHBoxNumeric" \n                                class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber" ><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent id="kpiNumberValue"\n                                            size="M" truncateValueTo="8"\n                                            indicator="{parts:[{path:\'dataPoint>\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formThePathForTrendIcon\'}"\n                                            value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formThePathForAggregateNumber\'}"\n                                            formatterValue="true"\n                                            valueColor="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatKPIHeaderState\'}"\n                                            state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass"\n                                            press="press"\n                                            withMargin="false"><customData><ovp:CustomData \n                                                    key="aria-label"\n                                                    value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatKPIHeaderState\'}"\n                                                    writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id="ovpKpiTarget" text="{ovplibResourceBundle>KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Target_Text}" writeToDom="true" /></customData></Text><Text \n                                                        id="ovpTargetValue" \n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForTargetValue\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForTargetValue\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text \n                                                        id= "ovpKPIDeviation" \n                                                        text="{ovplibResourceBundle>KPI_Deviation_Text}" \n                                                        class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>KPI_Deviation_Text}" writeToDom="true" /></customData></Text><Text\n                                                        id="kpiNumberPercentage"\n                                                        text="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'}"\n                                                        class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                                key="aria-label" \n                                                                value="{path:\'dataPoint>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'}" \n                                                                writeToDom="true" /></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint>Value/$Path}"><template:if test="{ovpCardProperties>/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text\n                                        id="ovpValueSelectionInfo"\n                                        maxLines="1"\n                                        text="{ovpCardProperties>/valueSelectionInfo}"\n                                        class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{ovpCardProperties>/valueSelectionInfo}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true" /><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if  \n                            test="{= (${ovpCardProperties>/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox \n                                alignItems="Start" \n                                justifyContent="SpaceBetween" \n                                class="KpiPreVarFlex" \n                                visible="{ovpCardProperties>/showSortingInHeader}"><Text \n                                    id="headerGroupByText" \n                                    maxLines="1"\n                                    text="{path:\'preVar>\', formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.listGroupBy\'}"\n                                    class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'preVar>\', formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.listGroupBy\'}" writeToDom="true" /></customData></Text></FlexBox></template:if><template:if \n                            test="{= (${ovpCardProperties>/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties>/ignoreSelectionVariant} === true}"><template:then><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'selVar>SelectOptions\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheIdForFilter\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'}"\n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData \n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'selVar>\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox \n                                        alignItems="Start" \n                                        justifyContent="flex-start" \n                                        class="KpiSelVarFlex" \n                                        visible="{ovpCardProperties>/showFilterInHeader}"><template:repeat \n                                            list="{path:\'ovpCardProperties>/idForExternalFilters\'}" \n                                            var="selectionVar"><Text \n                                                id="{path:\'selectionVar>\', formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" \n                                                text="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText" ><customData><ovp:CustomData\n                                                        key="aria-label" \n                                                        value="{parts:[{path:\'selectionVar>\'}, {path:\'ovpCardProperties>/filters\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" \n                                                        writeToDom="true" /></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m" \n    xmlns:l="sap.ui.layout"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>quickViewCard}" writeToDom="true" /></customData><template:with \n        path="entityType>@com.sap.vocabularies.UI.v1.HeaderInfo" \n        var="header"><template:with \n            path="entityType>@com.sap.vocabularies.UI.v1.Facets" \n            var="facets"><QuickViewPage\n                header="{= ${header>TypeNamePlural} ? ${header>TypeNamePlural@@sap.ui.model.odata.v4.AnnotationHelper.format} :  \'{ovplibResourceBundle>LineItem_Detail_Text}\' }"\n                icon="{= ${header>ImageUrl} ? ${header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : (${header>TypeImageUrl} ? ${header>TypeImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'\') }"\n                title="{= ${header>Title/Value} ? ${path: \'header>Title/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }"\n                description="{= ${header>Description/Value} ? ${header>Description/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }"><template:repeat \n                    list="{path:\'facets>\'}" \n                    var="referenceFacet"><template:if test="{referenceFacet>com.sap.vocabularies.UI.v1.IsSummary}"><template:with \n                            path="referenceFacet>Target/$AnnotationPath"\n                            helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                            var="target"><QuickViewGroup heading="{target>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"><template:repeat \n                                    list="{path:\'target>Data\'}" \n                                    var="dataField"><template:if test="{dataField>Url}"><template:then><template:if test="{dataField>Url/UrlRef}"><template:then><QuickViewGroupElement\n                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        url="{dataField>Url/UrlRef@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        type="link"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        url="{dataField>Url@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                        type="link"></QuickViewGroupElement></template:else></template:if></template:then><template:else><template:if test="{dataField>Value}"><template:with \n                                                    path="dataField>Value/$AnnotationPath"\n                                                    helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                    var="fValue"><template:if test="{= ${fValue>sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement\n                                                                label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                url="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                type="url"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement\n                                                                        label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                        value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                        type="email"></QuickViewGroupElement></template:then><template:else><template:if test="{= ${fValue>sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement\n                                                                                label="{dataFie\\ld>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                value="{dataField>Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                type="phone"></QuickViewGroupElement></template:then><template:else><QuickViewGroupElement\n                                                                                label="{dataField>Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"\n                                                                                value="{path: \'dataField>\', formatter: \'sap.ovp.cards.v4.AnnotationHelper.formatField\'}"></QuickViewGroupElement></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/SubTitle.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\'}"><template:if test="{ovpCardProperties>/dynamicSubtitleAnnotationPath}"><template:then><template:with \n                    path=\'ovpCardProperties>/dynamicSubtitleAnnotationPath\'\n                    helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                    var=\'headerInfo\'><template:with \n                        path="ovpCardProperties>/selectionAnnotationPath"\n                        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                        var=\'selVar\'><template:if test="{headerInfo>Description}"><HBox><FlexBox\n                                    items="{parts:[{path:\'entitySet>\'}, {path:\'headerInfo>\'}, {path:\'selVar>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                    class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                        id="ovpDescriptionValue" \n                                        maxLines="2"\n                                        text="{headerInfo>Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                        class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                key="aria-label"\n                                                value="{headerInfo>Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties>/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                id="SubTitle-Text"\n                                maxLines="2"\n                                text="{ovpCardProperties>/subTitle}"\n                                class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                        key="aria-label" \n                                        value="{ovpCardProperties>/subTitle}"\n                                        writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties>/dataPointAnnotationPath}"><template:then><template:with \n                                    path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                    helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                                    var=\'dataPoint\'><template:with \n                                    path="ovpCardProperties>/selectionAnnotationPath"\n                                    helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                                    var=\'selVar\'><template:if test="{dataPoint>Description}"><HBox><FlexBox\n                                                items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}, {path:\'selVar>\'} ], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}"\n                                                class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text\n                                                    id="ovpDescriptionValue"\n                                                    maxLines="2"\n                                                    text="{dataPoint>Description@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                    class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData \n                                                            key="aria-label"\n                                                            value="{dataPoint>Description@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"></FlexBox></template:else></template:if></template:else></template:if></template:else></template:if></template:if></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/generic/Title.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties>/title} || {ovpCardProperties>/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties>/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                    id= "ovpHeaderTitle" \n                    maxLines="3"\n                    text="{ovpCardProperties>/title}"\n                    class="sapOvpCardTitle tabindex-1"\n                    build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                            key="aria-label" \n                            value="{ovpCardProperties>/title}"\n                            writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties>/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties>/dataPointAnnotationPath}}"><template:then><template:with \n                                path=\'ovpCardProperties>/dataPointAnnotationPath\'\n                                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n                                var=\'dataPoint\'><template:if test="{dataPoint>Title}"><FlexBox \n                                        items="{parts:[{path:\'entitySet>\'}, {path:\'dataPoint>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" \n                                        class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text\n                                            id="ovpHeaderTitleFromKPI" \n                                            maxLines="3"\n                                            text="{dataPoint>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                            class="sapOvpCardTitle tabindex-1"\n                                            build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData \n                                                    key="aria-label" \n                                                    value="{dataPoint>Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                    writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if\n                test="{= ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.list.List\' || ${ovpCardProperties>/contentFragment} === \'sap.ovp.cards.v4.table.Table\'}"><template:if test="{ovpCardProperties>/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties>/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/LinkList.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n\txmlns="sap.m"><template:if test="{ovpCardProperties>/staticContent}"><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path=\'ovpCardProperties>/headerAnnotationPath\' var=\'header\'><template:if test="{= ${ovpCardProperties>/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties>/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><Carousel \n\t\tid="pictureCarousel" \n\t\tloop="true" \n\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\tarrowsPlacement="PageIndicator"\n\t\tpages="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><VBox class="sapMCrslItemTableCell"><template:with \n\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\t\tvar=\'identification\'><template:if test="{= ${header>Title/Value} || ${header>Description/Value}}"><VBox\n\t\t\t\t\t\t\tclass="{= ${header>Title/Value} || ${header>Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><Link \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\thref="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatString\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:if></template:with></template:elseif><template:else><Text \n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><Text \n\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{path: \'header>Title/Value\', formatter: \'sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4..format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><HBox \n\t\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer"\n\t\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Image \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:if></template:with></template:elseif><template:else><HBox \n\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\tid="ovpLinkLinstCarouselImg" \n\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\talt="{header>Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkNavigationSingleTarget"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPress"\n\t\t\t\t\t\t\t\t\t\tapp:dataAction="{entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPress"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif\n\t\t\t\t\t\t\t\t\ttest="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\twidth="100%" \n\t\t\t\t\t\t\t\t\t\tsize="128px"\n\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle>RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List showSeparators="None"\n\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem></CustomListItem></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:l="sap.ui.layout" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m" \n\txmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><List \n\t\t\tid="ovpLinkList"\n      \t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}"\n      \t\tshowSeparators="None"\n      \t\titems="{parts:[{path:\'entitySet>\'}, {path:\'header>\'}], formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatItems\'}"><template:with \n\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\tpath=\'ovpCardProperties>/identificationAnnotationPath\' \n\t\t\t\tvar=\'identification\'><CustomListItem \n\t\t\t\t\tid="ovpCLI" \n\t\t\t\t\ttype="Active"\n\t\t\t\t\tpress="{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'\n\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t: \'\'}"\n\t\t\t\t\tapp:dataAction="entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"><HBox\n\t\t\t\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'\n\t\t\t\t\t\t\t: ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleImage\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; !${header>Description/Value}) ? \'sapOvpCompactTitleIcon\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>ImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'\n\t\t\t\t\t\t\t: ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${header>TypeImageUrl} &amp;&amp; (${header>Title/Value} &amp;&amp; ${header>Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'\n\t\t\t\t\t\t\t: \'ovpDefaultClass\'}\n\t\t\t\t\t\t\t{= ${path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'\n\t\t\t\t\t\t\t: ${path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'\n\t\t\t\t\t\t\t: \'\'} "><template:if test="{= ${header>ImageUrl} || ${header>TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="40px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapUiSmallMarginEnd"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShape="Circle" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaySize="Custom"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustomDisplaySize="36px"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{header>ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitials="{path: \'header>Initials\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getAvatarInitials\'}"></f:Avatar></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon" \n\t\t\t\t\t\t\t\t\t\t\t\t\tsize="24px" \n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpLinkListImageCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc="{path: \'header>TypeImageUrl\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><template:if test="{path: \'identification>0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with \n\t\t\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath"\n\t\t\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path: \'entityType>@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with \n\t\t\t\t\t\t\t\t\t\thelper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n\t\t\t\t\t\t\t\t\t\tpath=\'ovpCardProperties>/communicationPath\' \n\t\t\t\t\t\t\t\t\t\tvar=\'contact\'><template:if test="{contact>}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n\t\t\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel" \n\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkPopover"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="{= ${header>Description/Value} || !${header>Description/Value} &amp;&amp; !${header>ImageUrl} &amp;&amp; !${header>TypeImageUrl} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Title\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header>Description/Value}"><template:then><Label \n\t\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel"\n\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle"\n\t\t\t\t\t\t\t\t\t\ttext="{path: \'header>Description\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition \n\txmlns:build="sap.build" \n\txmlns:core="sap.ui.core" \n\txmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n\txmlns="sap.m"><VBox><Carousel \n\t\t\tid="pictureCarousel" \n\t\t\tloop="true" \t\n\t\t\tclass="sapOvpCardLinkListCarousel cardType" \n\t\t\tarrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListCarouselType}" writeToDom="true" /></customData><pages><template:repeat \n\t\t\t\t\tlist="{ovpCardProperties>/staticContent}" \n\t\t\t\t\tvar="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow>title} || ${contentRow>subTitle}}"><VBox class="{= ${contentRow>title} || ${contentRow>subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow>dataAction}"><template:then><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:then><template:else><Link \n\t\t\t\t\t\t\t\t\t\t\tid="linkListTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListTitle sapOvpQuickLinkLabel" \n\t\t\t\t\t\t\t\t\t\t\ttext="{contentRow>title}" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow>title}" writeToDom="true" /><ovp:CustomData key="role" value="link" writeToDom="true" /></customData></Link></template:else></template:if><Text \n\t\t\t\t\t\t\t\t\tid="linkListSubTitleLabel--{contentRow>id}" \n\t\t\t\t\t\t\t\t\tclass="sapOvpCardLinkListSubTitle" \n\t\t\t\t\t\t\t\t\ttext="{contentRow>subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow>subTitle}" writeToDom="true" /><ovp:CustomData key="role" value="text" writeToDom="true" /></customData></Text></VBox></template:if><template:if test="{contentRow>dataAction}"><template:then><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}" \n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}" \n\t\t\t\t\t\t\t\t\t\t\t\tdensityAware="true"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListActionPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:dataAction="{contentRow>dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox \n\t\t\t\t\t\t\t\t\t\t\tclass="sapMCrslItemTableCell sapOVPCarouselImageContainer" \n\t\t\t\t\t\t\t\t\t\t\talignItems="Center" \n\t\t\t\t\t\t\t\t\t\t\tjustifyContent="Center"><Image \n\t\t\t\t\t\t\t\t\t\t\t\tid="linkListImage--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\t\talt="{contentRow>imageAltText}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}" \n\t\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"\n                                                densityAware="true" \n\t\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData"\n                                                src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"></Image></HBox></template:then><template:else><core:Icon \n\t\t\t\t\t\t\t\t\t\t\tid="linkListIcon--{contentRow>id}" \n\t\t\t\t\t\t\t\t\t\t\tsize="128px" \n\t\t\t\t\t\t\t\t\t\t\tsrc="{contentRow>imageUri}" \n\t\t\t\t\t\t\t\t\t\t\ttooltip="{contentRow>toolTip}" \n\t\t\t\t\t\t\t\t\t\t\tuseIconTooltip="false" \n\t\t\t\t\t\t\t\t\t\t\tpress="onLinkListItemPressLocalData" \n\t\t\t\t\t\t\t\t\t\t\tapp:targetUri="{contentRow>targetUri}"\n\t\t\t\t\t\t\t\t\t\t\tapp:openInNewWindow="{contentRow>openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true" /></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition \n    xmlns:build="sap.build" \n    xmlns:core="sap.ui.core" \n    xmlns:l="sap.ui.layout" \n    xmlns:ovp="sap.ovp.ui"\n\txmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" \n    xmlns:smartlink="sap.ui.comp.navpopover"\n\txmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" \n    xmlns="sap.m" \n    xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List \n            id="ovpLinkList"\n\t\t\tclass="{= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType"\n\t\t\tshowSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>linkListType}" writeToDom="true" /></customData><items><template:repeat \n                    list="{ovpCardProperties>/staticContent}" \n                    var="contentRow"><CustomListItem \n                        id="{contentRow>id}" \n                        type="Active"\n                        press="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow>dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow>semanticObject} &amp;&amp; !${contentRow>action} ? \'\' : \'onLinkListItemPressLocalData\'}"\n                        app:targetUri="{= ${contentRow>targetUri} ? ${contentRow>targetUri} : \'\'}"\n                        app:openInNewWindow="{=${contentRow>openInNewWindow} ? ${contentRow>openInNewWindow} :\'\' }"\n                        app:dataAction="{= ${contentRow>dataAction} ? ${contentRow>dataAction} : \'\'}"\n                        app:contentRowIndex="{path: \'contentRow>\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.contentRowIndex\'}"><HBox\n                            class="{= ${ovpCardProperties>/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCozyTitleIcon sapOvpCozyTitleIconQuickLink\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'\n                            : ${ovpCardProperties>/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleImage\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; !${contentRow>subTitle}) ? \'sapOvpCompactTitleIcon\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow>imageUri\'} &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'\n                            : ( ${ovpCardProperties>/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow>title} &amp;&amp; ${contentRow>subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'\n                            : \'ovpDefaultClass\'}"><template:if test="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' } sapOvpListItemQuickLink"><template:if test="{= ${ovpCardProperties>/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="40px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar \n                                                        id="linkListImage--{contentRow>id}"\n                                                        class="sapUiSmallMarginEnd"\n                                                        tooltip="{contentRow>toolTip}"\n                                                        displayShape="Circle" \n                                                        displaySize="Custom"\n                                                        customDisplaySize="36px"\n                                                        src="{path: \'contentRow>imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"></f:Avatar></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow>imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' } sapOvpListItemQuickLink"><FlexBox height="40px"><core:Icon \n                                                id="linkListIcon--{contentRow>id}"\n                                                class="sapOvpLinkListImageCenter"\n                                                tooltip="{contentRow>toolTip}" \n                                                useIconTooltip="false"\n                                                size="22px" \n                                                src="{contentRow>imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow>dataAction}"><template:then><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:then><template:elseif test="{= ${contentRow>semanticObject} &amp;&amp; ${contentRow>action} }"><VBox class="sapOvpLinkListItem sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label id="linkListSubTitleLabel--{contentRow>id}" class="sapOvpCardLinkListSubTitle" text="{contentRow>subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties>/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' } sapOvpListItemQuickLink"><Label \n                                            id="linkListTitleLabel--{contentRow>id}"\n                                            text="{contentRow>title}"\n                                            class="{= ${contentRow>subTitle} || !${contentRow>subTitle} &amp;&amp; !${contentRow>imageUri} ? \'sapOvpCardLinkListTitle sapOvpQuickLinkLabel\' : \'sapOvpCardLinkListTitleOnly sapOvpQuickLinkLabel\'}"/><Label \n                                            id="linkListSubTitleLabel--{contentRow>id}" \n                                            class="sapOvpCardLinkListSubTitle" \n                                            text="{contentRow>subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"\n            class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                            class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                        contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false"\n                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                        id="DataField"\n                        class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart\n                    id= "BarChartDataPoint"\n                    class="sapOvpBarListComparisonMicroChartAlignment" \n                    width="100%"\n                    shrinkable="true"\n                    colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                    minValue="{minMaxModel>/minValue}"\n                    maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                            displayValue=" "\n                            value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                            color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}" ><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="DataPoint1"\n                                class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber"\n                                textAlign="End"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                path="dataField>Target/$AnnotationPath"\n                                                helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                        binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                        text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                        press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                id="DataPoint2"\n                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem\n            id="listItem"\n            type="Active"\n            press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if\n                        test="{= ${ovpCardProperties>/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                    class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                        test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text\n                                id="DataField1"\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if\n                            test="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink\n                                class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'lineItem>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfSecondDataField\'}"\n                                contactAnnotationPath="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                enableAvailableActionsPersonalization="false"\n                                forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text\n                                id="DataField2"\n                                class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart \n                        id="BarChartDataPoint" \n                        class="sapOvpBarListComparisonMicroChartAlignment" \n                        width="100%" \n                        height="1rem"\n                        colorPalette="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.colorPaletteForComparisonMicroChart\'}"\n                        minValue="{minMaxModel>/minValue}"\n                        maxValue="{minMaxModel>/maxValue}"><micro:data><micro:ComparisonMicroChartData \n                                displayValue=" "\n                                value="{= \'{path: \\\'\' + ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }"\n                                color="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointColor\'}"></micro:ComparisonMicroChartData></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat \n                                list="{path:\'lineItem>\'}" \n                                var="dataField"><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                    path="dataField>Target/$AnnotationPath"\n                                                    helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path"\n                                                    var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                            binding="{= ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                            text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                            textAlign="Right"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 1}" ><ObjectNumber\n                                    id="DataPoint2"\n                                    class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                                    textAlign="End"\n                                    number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                    unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                    state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 2}" ><ObjectNumber\n                            id="DataPoint3"\n                            class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?\n                                        \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber"\n                            textAlign="End"\n                            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                            unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointPercentageUnit\'}}" ><template:then><ObjectNumber\n                                id="BarChartValue"\n                                class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber"\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber\n                                id="BarChartStateValue"\n                                class="sapOvpBarListObjectNumber valueStateText "\n                                textAlign="End"\n                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}"></ObjectNumber></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/List.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/imageSupported} &amp;&amp; ${ovpCardProperties>/listType} === \'condensed\' }" ><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardListImage" type="XML"/></template:then><template:else><List \n                id="ovpList" \n                items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}" \n                class = "listCardType"><template:with \n                    path=\'ovpCardProperties>/annotationPath\'\n                    helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                    var=\'lineItem\'><template:if test="{= ${ovpCardProperties>/listType} === \'extended\'}" ><template:then><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties>/listFlavor} === \'bar\'}" ><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>barChartCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>listCard}" writeToDom="true" /></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/ObjectList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><ObjectListItem\n            id="listItem"\n            class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n            numberState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"><attributes><ObjectAttribute \n                    id="listItem2Row1Column"\n                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectAttribute \n                            id="listItem3row1column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectAttribute \n                                    id="listItem3row1column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute \n                                    id="listItem3row1column" \n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                            id="listItem2row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:then><template:else><ObjectStatus\n                                    id="listItem2row2column"\n                                    text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                    state="None" /></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 2}" ><template:then><ObjectStatus\n                            id="listItem3row2column"\n                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"\n                            state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 1}" ><template:then><ObjectStatus\n                                id="listItem3row2column"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fourthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                state="None" /></template:then><template:else><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}" ><template:then><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/fifthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:then><template:else><ObjectStatus\n                                            id="listItem3row2column"\n                                            text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/sixthDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                                            state="None" /></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardList.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><items><StandardListItem\n            id="listItem"\n            class="sapOvpStandardListItem"\n            title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n            info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n            infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n            type="Active"\n            press="onListItemPress"></StandardListItem></items></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/list/StandardListImage.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"\n    xmlns:build="sap.build"><List \n        id="ovpList" \n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><template:with \n            path=\'ovpCardProperties>/annotationPath\' \n            helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n            var=\'lineItem\'><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>imageListCardType}" writeToDom="true" /></customData><items><StandardListItem\n                    id="listItem"\n                    class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons"\n                    icon="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatImageUrl\'}"\n                    iconInset = "false"\n                    title="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    description="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"\n                    info="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}"\n                    infoState="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0 ? ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }"\n                    type="Active"\n                    press="onListItemPress"></StandardListItem></items></template:with></List></core:FragmentDefinition>\n',
	"sap/ovp/cards/v4/table/Table.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table \n        id="ovpTable"\n        class="ovpTableClass cardType"\n        items="{parts:[{path:\'entitySet>\'}, {path:\'ovpCardProperties>/annotationPath\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle>tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties>/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:navpopover="sap.ui.comp.navpopover"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with\n        path=\'ovpCardProperties>/annotationPath\'           \n        helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n        var=\'eachItem\'><template:with  \n            path="eachItem>" \n            helper="sap.ovp.cards.v4.V4AnnotationHelper.removeDuplicateDataField" \n            var="lineItem"><columns><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField"><template:if test="{= ${dataField>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField1"><template:if test="{= ${dataField1>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField1>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField1>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField2"><template:if\n                        test="{= ${dataField2>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField2>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField2>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                    list="{path:\'lineItem>\'}" \n                    var="dataField3"><template:if test="{=  !${dataField3>@com.sap.vocabularies.UI.v1.Importance/$EnumMember}}"><template:then><template:if test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text \n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column \n                                        styleClass="sapTableColumnHide" \n                                        visible="false" \n                                        hAlign="{= ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3>\', \n                                            formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':\n                                            ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'Left\' : \'Right\'}"><Text \n                                            class="displayBlock {= ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3>\', \n                                                formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':\n                                                ${dataField3>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0 ? \'textAlignLeft\' : \'textAlignRight\'}"\n                                            text="{path: \'dataField3>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}"\n                                            wrapping="true"\n                                            wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem\n                    id = "tableItem"\n                    type="Active"\n                    press="onColumnListItemPress"><cells><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField4"><template:if test="{= ${dataField4>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{= (${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataFieldName\'} === ${dataField4>Label} &amp;&amp; ${ovpCardProperties>/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link\n                                                            class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                            text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                            press="onContactDetailsLinkPress"></Link></VBox></template:then><template:elseif\n                                                    test="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField4>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:elseif><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField4>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField4>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField4>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField4>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField4>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField4>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField5"><template:if\n                                test="{= ${dataField5>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField5>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField5>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField5>Target/$AnnotationPath"\n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField5>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField5>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField5>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField5>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField5>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField6"><template:if test="{= ${dataField6>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField6>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField6>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with \n                                                        path="dataField6>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField6>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField6>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField6>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField6>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField6>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat \n                            list="{path:\'lineItem>\'}" \n                            var="dataField7"><template:if test="{=  !${dataField7>@com.sap.vocabularies.UI.v1.Importance/$EnumMember} }"><template:then><template:if test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if\n                                                test="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink\n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"\n                                                        semanticObject="{parts:[{path:\'entitySet>\'}, {path:\'dataField7>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"\n                                                        contactAnnotationPath="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" \n                                                        enableAvailableActionsPersonalization="false"\n                                                        forceLinkRendering="{parts: [{path: \'entitySet>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"></navpopover:SmartLink></template:then><template:else><Text \n                                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                        text="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField7>$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7>Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') >= 0}"><template:then><template:with\n                                                        path="dataField7>Target/$AnnotationPath" \n                                                        helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" \n                                                        var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link \n                                                                binding="{= ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\') > -1 ? \'{\' + ${path: \'dataField7>Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField7>Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}"\n                                                                class="textAlignLeft {= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                                                text="{contact>fn@@sap.ui.model.odata.v4.AnnotationHelper.format}"\n                                                                press="onContactDetailsLinkPress"></Link></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField \n                                                        class="ovpSmartLink {= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                                        editable="false" \n                                                        uomEditable="false" \n                                                        enabled="true"\n                                                        clientSideMandatoryCheck="false"\n                                                        value="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                        criticality="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}"\n                                                                        criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber\n                                                        class="{= ${path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                        number="{parts:[{path:\'dataField7>\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"\n                                                        unit="{parts:[{path:\'dataField7>\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                                        state="{path: \'dataField7>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:build="sap.build"\n    xmlns:ovp="sap.ovp.ui"\n    xmlns:sfi="sap.ui.comp.smartfield"\n    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties>/disableTableCardFlexibility} === true}"><template:then><template:with \n                path=\'ovpCardProperties>/annotationPath\'\n                helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" \n                var=\'lineItem\'><columns><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><Text \n                                    class="displayBlock {= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}"\n                                    text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem\n                        id = "tableItem"\n                        type="Active"\n                        press="onColumnListItemPress"><cells><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text \n                                class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/secondDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} > 0}"><template:then><template:if\n                                        test="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties>/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField \n                                                class="textAlignCenter"\n                                                editable="false" \n                                                uomEditable="false" \n                                                enabled="true"\n                                                clientSideMandatoryCheck="false"\n                                                value="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus\n                                                                criticality="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointStateForSmartField\'}"\n                                                                criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber \n                                                class="{= ${path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber"\n                                                number="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}, {path:\'ovpConstants>/dontIncludeUOM\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}"\n                                                unit="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/firstDataPointIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"\n                                                state="{path: \'lineItem>\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text \n                                        class="{= ${ovpCardProperties>/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }"\n                                        text="{parts:[{path:\'lineItem>\'}, {path:\'ovpConstants>/thirdDataFieldIndex\'}], formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ovp","type":"library","embeds":["app"],"applicationVersion":{"version":"1.108.11"},"title":"SAP library: sap.ovp","description":"SAP library: sap.ovp","ach":"CA-UI5-ST-OVP","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.108","libs":{"sap.ui.core":{"minVersion":"1.108.27"},"sap.ui.layout":{"minVersion":"1.108.27"},"sap.ui.generic.app":{"minVersion":"1.108.0"},"sap.m":{"minVersion":"1.108.27"},"sap.f":{"minVersion":"1.108.27"},"sap.ui.comp":{"minVersion":"1.108.27"},"sap.viz":{"minVersion":"1.108.27"},"sap.suite.ui.microchart":{"minVersion":"1.108.27"},"sap.ui.rta":{"minVersion":"1.108.27"},"sap.fe.placeholder":{"minVersion":"1.108.22"},"sap.fe.macros":{"minVersion":"1.108.22"},"sap.insights":{"minVersion":"1.108.11"},"sap.suite.ui.commons":{"minVersion":"1.108.11"},"sap.ui.integration":{"minVersion":"1.108.27"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ovp/support/DiagnosticsTool/view/DiagnosticsTool.view.xml":'<mvc:View\n\tcontrollerName="sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:html="http://www.w3.org/1999/xhtml"><Panel expandable="false" class="sapUiNoContentPadding"><content><VBox \n\t\t\t\tvisible="{= ${data>/status} === \'Loading\'}"\n\t\t\t\twidth="100%"\n\t\t\t\talignItems="Center"\n\t\t\t\tclass="sapUiSmallMarginTopBottom sapUiNoMarginBegin sapUiNoMarginEnd"><BusyIndicator text="The application is still loading! Please wait a few more seconds..."/></VBox><MessageStrip\n\t\t\t\ttext="{data>/statusMessage}"\n\t\t\t\ttype="Warning"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} === \'Failed\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><MessageStrip\n\t\t\t\ttext="The current state of the application is not known by the plugin!"\n\t\t\t\ttype="Error"\n\t\t\t\tshowIcon="true"\n\t\t\t\tvisible="{= ${data>/status} !== \'Failed\' &amp;&amp; ${data>/status} !== \'Rendered\' &amp;&amp; ${data>/status} !== \'Loading\' &amp;&amp; ${data>/status} !== \'Unknown\'}"\n\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"></MessageStrip><Table\n\t\t\t\tid="diagnosticPropertiesTable"\n\t\t\t\tnoDataText="No data available! Please verify that the Fiori Elements application is still running."\n\t\t\t\titems="{data>/properties}"\n\t\t\t\tvisible="{= ${data>/status} === \'Rendered\' || ${data>/status} === \'Failed\' || ${data>/status} === \'Unknown\'}"\n\t\t\t\tclass="sapUiSizeCompact"><headerToolbar><Toolbar><Title text="Time of Retrieval: {data>/retrieval}"/><ToolbarSpacer/><Button\n\t\t\t\t\t\t\ticon="sap-icon://synchronize"\n\t\t\t\t\t\t\ttooltip="Refresh"\n\t\t\t\t\t\t\tpress="onRefreshData"/><MenuButton icon="sap-icon://copy" tooltip="Copy Plaintext" enabled="{data>/copyEnabled}" buttonMode="Split" defaultAction="onCopyDataPlain" useDefaultActionOnly="true" width="auto"><menu><Menu><items><MenuItem text="Copy Plaintext" icon="sap-icon://copy" press="onCopyDataPlain" /><MenuItem text="Copy HTML" icon="sap-icon://attachment-html" press="onCopyDataHTML" /></items></Menu></menu></MenuButton><Button\n\t\t\t\t\t\t\ticon="sap-icon://sys-help"\n\t\t\t\t\t\t\ttooltip="Documentation"\n\t\t\t\t\t\t\tpress="onShowDocumentation"/></Toolbar></headerToolbar><columns><Column id="nameCol" width="30%"/><Column id="valueCol"/></columns><items><ColumnListItem><cells><VBox><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tclass="diagnosticPropertiesGroupHeaderContent"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'group\'}"/><Text \n\t\t\t\t\t\t\t\t\ttext="{data>name}" \n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} !== \'group\'}"/></VBox><VBox><Text text="{data>value}" wrapping="true" visible="{= ${data>type} === \'string\'}"/><Link \n\t\t\t\t\t\t\t\t\ttext="{data>value}" \n\t\t\t\t\t\t\t\t\thref="{data>target}" \n\t\t\t\t\t\t\t\t\ttarget="_blank" \n\t\t\t\t\t\t\t\t\twrapping="true"\n\t\t\t\t\t\t\t\t\tvisible="{= ${data>type} === \'link\'}"/></VBox></cells></ColumnListItem></items></Table><html:textarea \n\t\t\t\tid="CopyDataTextArea"\n\t\t\t\tclass="diagnosticPropertiesCopyDataTextArea"></html:textarea><html:div id="CopyDataHTML"></html:div></content></Panel></mvc:View>\n'
});
//# sourceMappingURL=library-preload.js.map
