sap.ui.define(["sap/base/util/isEmptyObject","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/Filter","sap/ovp/cards/v4/V4AnnotationHelper"],function(e,t,n,a,r){"use strict";function i(e){var t;if(e){if(e.settings.tabs){var n=0;var a=e.settings.selectedKey;if(a&&e.settings.tabs.length>=a){n=a-1}t=e.settings.tabs[n]["selectionAnnotationPath"]}else{t=e.settings["selectionAnnotationPath"]}}return t}return{_getEntityRelevantFilters:function(e,t){var n=[];if(t.length>0&&e){var a=this._checkRelevantFiltersRecursive(e,t[0]);if(a){n.push(a)}}return n},_checkRelevantFiltersRecursive:function(e,t){if(!t._bMultiFilter){t.sPath=t.sPath.split("/").pop();var n=this._getPropertyMapping(e,t.sPath);if(n){t.sPath=n;return t}}else{var r=t.aFilters;var i,s=[];if(r){for(var u=0;u<r.length;u++){i=this._checkRelevantFiltersRecursive(e,r[u]);if(i){s.push(i)}}if(s.length>0){return new a(s,t.bAnd)}}}},_getPropertyMapping:function(e,t){if(t in e){return t}},mergeFilters:function(t,n){if(n&&n.length===0&&n&&t.length===0){return[]}var r=[];if(n&&n.length>0){var i=[];var s={};n.forEach(function(e){if(s[e.path]){s[e.path].push(new a(e))}else{s[e.path]=[new a(e)]}});Object.keys(s).forEach(function(e){i.push(new a({filters:s[e],and:false}))});r.push(new a({filters:i,and:true}))}if(!e(t[0])){r.push(t[0])}return new a({filters:r,and:true})},getSelectionVariantFilters:function(e,t,n){var a=t.getData(),s=e.filter(function(e){return e.id===a.cardId})[0],u="@"+i(s),l=n[u];return l?r.getFilters(t,l):[]},formatLiteral:function(e,t){var n=/'/g;if(e===undefined){throw new Error("Illegal value: undefined")}if(e===null){return"null"}switch(t){case"Edm.Binary":return"binary'"+e+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(e);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return e;case"Edm.Duration":return"duration'"+e+"'";case"Edm.String":return"'"+e.replace(n,"''")+"'";default:throw new Error("Unsupported type: "+t)}}}},true);
//# sourceMappingURL=Filterhelper.js.map