sap.ui.define(["sap/ovp/cards/ovpLogger","sap/ui/core/Component"],function(t,e){"use strict";var a=new t("OVP.cards.OVPCardsAsAPIUtils");var n=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.charts.smart.chart","sap.ovp.cards.v4.charts.bubble","sap.ovp.cards.v4.charts.donut","sap.ovp.cards.v4.charts.line","sap.ovp.cards.error"];function s(){return n}function i(t,e,n){var s={};s.message=t;if(n){s._oError=n;s.getActualError=function(){return s._oError}}a.error(s.message);e(s)}function r(t){var e=false;var a=t.getOwnerComponent();if(!!a){var n=a.getComponentData();if(!!n&&n.ovpCardsAsApi){e=true}}return e}function o(t,e){var a=e.manifest;var n;for(var s in a.cards){n=s}var i=a.cards[n];if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.settings.chartAnnotationPath=t.chartAnnotationPath;i.settings.navigation=t.navigation}if(t.entitySet){i.settings.entitySet=t.entitySet}i.settings.annotationPath=t.annotationPath;i.settings.dynamicSubtitleAnnotationPath=t.dynamicSubtitleAnnotationPath;i.settings.presentationAnnotationPath=t.presentationAnnotationPath;i.settings.selectionAnnotationPath=t.selectionAnnotationPath;i.settings.selectionPresentationAnnotationPath=t.selectionPresentationAnnotationPath;i.settings.kpiAnnotationPath=t.kpiAnnotationPath;i.settings.dataPointAnnotationPath=t.dataPointAnnotationPath;i.settings.identificationAnnotationPath=t.identificationAnnotationPath;i.settings.headerAnnotationPath=t.headerAnnotationPath;i.settings.selectedKey=t.selectedKey;if(i){a.cards[n]=i;d.createCardComponent(e.parentView,a,e.containerId,e.selectionVariant)}}function l(t){var e=true;if(t.template==="sap.ovp.cards.error"||(t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&t.settings.staticContent){e=false}return e}function p(t,e){var a=[],n=[],s,i;var r=e.getSelectOptionsPropertyNames();for(s=0;s<r.length;s++){var o=e.getSelectOption(r[s]);if(o&&o.length>0){for(i=0;i<o.length;i++){if(o[i]){var l={path:r[s],operator:o[i].Option,value1:o[i].Low,sign:o[i].Sign};if(o[i].High){l.value2=o[i].High}a.push(l)}}}}var p=e.getParameterNames();for(s=0;s<p.length;s++){var c={path:p[s],value:e.getParameter(p[s])};n.push(c)}t.settings.filters=a;t.settings.parameters=n;return t}function c(t,a,s,r,o){return new Promise(function(c,d){var v,f,h="";if(!!a){for(var u in a.cards){if(a.cards.hasOwnProperty(u)){v=a.cards[u];f=u}}if(!!v&&!!f){if(!!v.template&&!!v.settings&&(!!v.model||!l(v))){if(n.indexOf(v.template)!==-1){if(!!s&&typeof s==="string"){if(!!t){var g=!v.model?undefined:t.getModel(v.model);var m;if(!l(v)){m=Promise.resolve()}else{if(g&&g.getODataVersion&&g.getODataVersion()=="4.0"){m=g.getMetaModel().requestObject("/"+v.settings.entitySet)}else{m=g.getMetaModel().loaded()}}m.then(function(){var n=false;if(r){v=p(v,r);n=true}v.settings.ignoreSelectionVariant=n;var l={name:v.template,componentData:{model:g,ovpCardsAsApi:true,parentView:t,manifest:a,containerId:s,selectionVariant:r,fnCheckNavigation:o,showDateInRelativeFormat:a.showDateInRelativeFormat,disableTableCardFlexibility:a.disableTableCardFlexibility,template:v.template,i18n:t.getModel("@i18n"),cardId:f,settings:v.settings,appComponent:null,mainComponent:null}};e.create(l).then(function(e){var a=t.byId(s);if(!!a){var n=a.getComponentInstance();e.setModel(g);a.setComponent(e);if(n){setTimeout(function(){n.destroy()},0)}c(true)}else{h="Component Container '"+s+"' is not present in the current View";i(h,d)}},function(t){h="Component creation failed";i(h,d,t)})},function(t){h="MetaModel was not loaded";i(h,d,t)})}else{h="First argument oView is null";i(h,d)}}else{h="ContainerId should be of type string and not null";i(h,d)}}else{h=v.template+" card type is not supported in the API";i(h,d)}}else{h="Cards template or model or settings are not defined";i(h,d)}}else{h="Cards manifest entry or cardId is null";i(h,d)}}else{h="Second argument oManifest is null";i(h,d)}})}var d={createCardComponent:c,recreateCard:o,checkIfAPIIsUsed:r,getSupportedCardTypes:s};return d},true);
//# sourceMappingURL=OVPCardAsAPIUtils.js.map