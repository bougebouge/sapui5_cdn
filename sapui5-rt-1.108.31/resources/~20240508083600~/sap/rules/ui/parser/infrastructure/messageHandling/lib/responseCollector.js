sap.ui.define(["sap/rules/ui/parser/infrastructure/messageHandling/lib/message","sap/rules/ui/parser/infrastructure/messageHandling/lib/opMessages","sap/rules/ui/parser/infrastructure/locale/lib/constants","sap/rules/ui/parser/infrastructure/errorHandling/hrfException","sap/rules/ui/parser/infrastructure/locale/lib/resourceBundle"],function(e,r,s,n,t){"use strict";var a=e.messages;var u=r.opMessages;var i=s.propertiesEnum;var o=function(){var e={error:1,warn:2,info:3,debug:4};var r=null;function s(){var r=-1;var s={code:{},message:{},output:{},details:[]};var o=[];var c=function(){};var f={};var l=false;var g=t.getInstance();function p(){o=[];l=false}function d(e,r){if(!r||r===true){p()}f=new c;f.subject=e;s.details.push(f)}function v(){if(!f||!f.subject){jQuery.sap.log.error("ResponseCollector addMessage: no subject was defined");d("GENERAL",false)}if(!f.messages){f.messages=[]}}function m(e,r){var s="";s=g.getString(e.code,r,i.MESSAGES);return s}function S(s,n,t){if(t){s.additionalInfo=t}if(n){s.path=n}if(l===false){if(r===-1||e[s.severity]<e[r]){r=s.severity}}var a=JSON.parse(JSON.stringify(s));if(l===true){o.push(a)}else{f.messages.push(a)}return a}return{build:function(){return s},setOutput:function(e){s.output=e},addMessage:function(e,r,s,n,t){v();var u=JSON.parse(JSON.stringify(a[e]));if(t!==null&&t!==undefined){u.description=t}else{u.description=m(u,r)}return S(u,s,n)},getLastMessage:function(){if(!f.messages||f.messages.length===0){return null}return f.messages[f.messages.length-1].description},getMessage:function(e,r){var s="";var n=JSON.parse(JSON.stringify(a[e]));s=m(n,r);return s},getTopSeverity:function(){if(r===-1){return null}return r},hold:function(){o=[];l=true},unHold:function(){p()},getStandByMessagesList:function(){return o},addSubject:function(e,r){d(e,r)},setOpMessage:function(e,r){if(!e||!r){throw new n.HrfException("setOpMessage: missing patrameters")}s.code=u[e][r].code;s.message=g.getString(s.code,null,i.OP_MESSAGES)},clear:function(){r=-1;s={code:{},message:{},output:{},details:[]};o=[];c=function(){};f={};l=false},trace:function(r,s,t){if(t){n.trace(t);return}var a="HRF Trace Message: "+s;switch(r){case e.error:jQuery.sap.log.error(a+"\n\nCall stack:\n----------\n"+(new Error).stack+"\n\n-------------------------------------");break;case e.info:jQuery.sap.log.info(a);break;case e.debug:jQuery.sap.log.debug(a);break;case e.warn:jQuery.sap.log.error(a);break}}}}return{severity:function(){return e},getInstance:function(){if(!r){r=new s;r.constructor=null}return r}}}();return{ResponseCollector:o}},true);
//# sourceMappingURL=responseCollector.js.map