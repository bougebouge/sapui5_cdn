sap.ui.define(["sap/rules/ui/parser/businessLanguage/lib/constants","sap/rules/ui/parser/businessLanguage/lib/parseUtils","sap/rules/ui/parser/businessLanguage/lib/parseModel","sap/rules/ui/parser/businessLanguage/lib/utils","sap/rules/ui/parser/businessLanguage/lib/parserTokens","sap/rules/ui/parser/businessLanguage/lib/vocabularyUtils"],function(e,r,t,s,n,i){"use strict";var a=new r.parseUtilsLib;var o=new t.parseModelLib;var u=new i.vocabularyUtilsLib;var p=new s;function l(){}l.prototype.TermInfo=function(){try{this.init=function(){this.start=null;this.end=null;this.type=n.NAVIGATION;this.key=null;this.term=null;this.expression=null;this.isCalculatedType=false;this.isSet=function(){return this.isCalculatedType}};this.init();this.setKey=function(){var e=o.getModelManger();this.key=e.expression.substring(this.start,this.end)};this.calculateTermType=function(){var r=o.getModelManger();if(!r.vocaRTServ){return}this.isCalculatedType=true;this.setKey();var t=r.getCurrentNavigationObject(this.key);if(t===null){t=a.getNavigationObjectFromPath(this.term,this.key,r)}var s=a.getNavigationObjectType(t);if(s!==null){this.type=s}else{if(r[e.propertiesEnum.unknownTokens].hasOwnProperty(this.key)){r[e.propertiesEnum.unknownTokens][this.key]++}else{r[e.propertiesEnum.unknownTokens][this.key]=1}}}}catch(e){jQuery.sap.log.error("TermnInfo failure - \n"+e)}};l.prototype.setTerm=function(){var e=o.getModelManger();var r=e.terms;r[r.length-1].calculateTermType();e.clearCurrentTerm()};l.prototype.createTerm=function(e,r,t){this.getTermMode();var s=o.getModelManger();s.setCurrentTerm(t);var n=new this.TermInfo;n.start=e;n.end=r;n.term=t;s.terms.push(n)};l.prototype.updateTerm=function(e,r){var t=o.getModelManger();t.setCurrentTerm(r);var s=t.terms;s[s.length-1].term=r;s[s.length-1].end=e};l.prototype.updateTermsTokenType=function(e){var r=o.getModelManger();var t=r.terms;if(p.isEmptyArray(t)){return}if(!t[t.length-1].isSet()){this.setTerm();a.updateTokenType(t[t.length-1],r)}var s,n=0;for(s=0;s<e.length&&n<t.length;s++){if(e[s].start===t[n].start){e[s].type=t[n].type;e[s].setText(t[n].key);n++}}r.clearTermsArray()};l.prototype.getTermMode=function(){var r=null;var t=o.getModelManger();var s=null;if(!t[e.propertiesEnum.termMode]&&t.vocaRTServ){s=t.vocaRTServ.getTermModes();if(t.hasOwnProperty(e.propertiesEnum.flags)&&t[e.propertiesEnum.flags].hasOwnProperty(e.propertiesEnum.termMode)){if(t[e.propertiesEnum.flags][e.propertiesEnum.termMode].hasOwnProperty(e.propertiesEnum.convert)&&t[e.propertiesEnum.flags][e.propertiesEnum.termMode][e.propertiesEnum.convert].hasOwnProperty(e.propertiesEnum.source)){r=t[e.propertiesEnum.flags][e.propertiesEnum.termMode][e.propertiesEnum.convert]}}if(r){t[e.propertiesEnum.termMode]=r[e.propertiesEnum.source]}else if(s.indexOf("byDescription")>-1){t[e.propertiesEnum.termMode]=e.DISPLAY_TEXT}else{t[e.propertiesEnum.termMode]=e.CODE_TEXT}}if(t[e.propertiesEnum.termMode]){return t[e.propertiesEnum.termMode]}return null};l.prototype.isTermPrefix=function(e){var r=o.getModelManger();return u.isTermPrefix(e,r.vocaRTServ,r.vocabulary,this.getTermMode())};return{termsUtilsLib:l}},true);
//# sourceMappingURL=termsUtils.js.map