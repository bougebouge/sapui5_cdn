/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/core/messageObject","sap/base/security/encodeURL"],function(e,t){"use strict";var r={};r.getAbsolutePath=function(e){if(e.slice(-1)==="/"){return e}return e+"/"};r.getODataPath=function(e){var t=e.split("/");var r;var a=[];for(r=0;r<t.length;r++){if(t[r]!==""){a.push(t[r])}}var n="";var i=a.length-1;for(r=0;r<i;r++){n=n+"/"+a[r]}return n+"/"};r.addRelativeToAbsoluteURL=function(e,t){var r=e.split("/");var a=t.split("/");a.forEach(function(e){if(e===".."){r.pop()}else if(e!="."){r.push(e)}});return r.join("/")};r.getBaseURLOfComponent=function(e){var t=e.split(".");t.pop();var r=t.join(".");return jQuery.sap.getModulePath(r)};r.getApfLocation=function(){return jQuery.sap.getModulePath("sap.apf")+"/"};r.generateOdataPath=function(e,r,a,n,i){var s=p(r,n);var f=a;var u=false;var o;for(o in s){if(!u){f+="(";u=true}else{f+=","}f+=o.toString()+"="+s[o]}if(u){f+=")/"}f+=i||"";return f;function p(){var i={};var s;var f;var u;var o;var p;s=r.getParameterEntitySetKeyProperties(a);if(s!==undefined){f=s.length}else{f=0}if(f>0){for(o=0;o<f;o++){if(n&&n instanceof sap.apf.core.utils.Filter){u=n.getFilterTermsForProperty(s[o].name);p=u[u.length-1]}if(p instanceof sap.apf.core.utils.FilterTerm){l(o,p.getValue())}else if(s[o].defaultValue){l(o,s[o].defaultValue)}else if(s[o].parameter!=="optional"){e.putMessage(e.createMessageObject({code:"5016",aParameters:[s[o].name]}))}}}return i;function l(e,r){var a;if(s[e].dataType.type==="Edm.String"){a=sap.apf.utils.formatValue(r,s[e]);i[s[e].name]=t(a)}else if(s[e].dataType.type){a=sap.apf.utils.formatValue(r,s[e]);if(typeof a==="string"){i[s[e].name]=t(a)}else{i[s[e].name]=a}}else if(typeof r==="string"){i[s[e].name]=t(sap.apf.utils.escapeOdata(r))}else{i[s[e].name]=r}}}};r.getSelectString=function(e){var r="";e.forEach(function(a,n){r+=t(sap.apf.utils.escapeOdata(a));if(n<e.length-1){r+=","}});return r};r.buildUri=function(e,a,n,i,s,f,u,o,p,l,c){var g="";g+=r.generateOdataPath(e,c,a,s,l);g=g+"?";g+=v(n);g+=d(i,p);g+=y(f,n);g+=m(u);g+=h(o);return g;function v(e){if(!e[0]){return""}var t="$select=";t+=r.getSelectString(e);return t}function d(e,t){if(!(e&&e instanceof sap.apf.core.utils.Filter)||e.isEmpty()){return""}var r=e.toUrlParam({formatValue:t});if(r===""||r==="()"){return""}return"&$filter="+r}function y(r,n){var i="";var s="";var f;if(!r){return""}switch(true){case jQuery.isArray(r):for(f=0;f<r.length;f++){s=u(r[f],n);if(i.length>0&&s.length>0){i+=","}i+=s}break;case jQuery.isPlainObject(r):i+=u(r,n);break;case typeof r==="string":i+=u({property:r},n);break;default:i="";break}if(i.length>0){return"&$orderby="+i}return"";function u(r,n){var i="";if(jQuery.inArray(r.property,n)>-1){i+=r.property;if(r.ascending===false){i+=" desc"}else{i+=" asc"}}else{e.putMessage(e.createMessageObject({code:"5019",aParameters:[a,r.property]}))}return t(i)}}function m(t){function r(t){var r,n;r=Object.getOwnPropertyNames(t);for(n=0;n<r.length;n++){if(r[n]!=="top"&&r[n]!=="skip"&&r[n]!=="inlineCount"){e.putMessage(e.createMessageObject({code:"5032",aParameters:[a,r[n]]}))}}}var n="";if(!t){return n}r(t);if(t.top){n+="&$top="+t.top}if(t.skip){n+="&$skip="+t.skip}if(t.inlineCount===true){n+="&$inlinecount=allpages"}return n}function h(e){if(!e){e="json"}return"&$format="+e}};return r},true);
//# sourceMappingURL=uriGenerator.js.map