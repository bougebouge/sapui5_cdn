/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2015 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/core/constants","sap/apf/utils/utils","sap/ui/model/Filter","sap/base/security/encodeURL"],function(e,t,r,a){"use strict";var i=function(t,r,a,i,s){this.type="filterTerm";this.propertyName=r;this.operator=a;this.value=i;this.highValue=s;this.messageHandler=t;if(this.operator.length==2){this.operator=this.operator.toUpperCase()}t.check(this.operator!==undefined,"sap.apf.utils.FilterTerm.constructor operator undefined");t.check(jQuery.inArray(this.operator,e.aSelectOpt)>-1,"sap.apf.core.utils.FilterTerm operator "+this.operator+" not supported");t.check(this.propertyName!==undefined,"sap.apf.utils.core.FilterTerm propertyName undefined");t.check(this.value!==undefined,"sap.apf.utils.FilterTerm value undefined")};i.prototype.isConsistentWithFilter=function(t,r){var a;var i;if(t!==this.propertyName){return true}if(this.operator===e.FilterOperators.EQ){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()===r.valueOf()}return this.value===r}else if(this.operator===e.FilterOperators.LT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()>r.valueOf()}return this.value>r}else if(this.operator===e.FilterOperators.LE){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()>=r.valueOf()}return this.value>=r}else if(this.operator===e.FilterOperators.GT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<r.valueOf()}return this.value<r}else if(this.operator===e.FilterOperators.BT){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<=r.valueOf()&&r.valueOf()<=this.highValue.valueOf()}return this.value<=r&&r<=this.highValue}else if(this.operator===e.FilterOperators.GE){if(this.value instanceof Date&&r instanceof Date){return this.value.valueOf()<=r.valueOf()}return this.value<=r}else if(this.operator===e.FilterOperators.NE){if(this.value instanceof Date&&r instanceof Date){return!(this.value.valueOf()===r.valueOf())}return!(this.value===r)}else if(this.operator===e.FilterOperators.StartsWith){if(this.value.length>r.length){return false}a=r.slice(0,this.value.length);return a===this.value}else if(this.operator===e.FilterOperators.EndsWith){if(this.value.length>r.length){return false}a=r.slice(-this.value.length);return a===this.value}else if(this.operator===e.FilterOperators.Contains){i=r.indexOf(this.value);return i>-1}};i.prototype.toUrlParam=function(r){var i="'";var s=" ";var o="";var h,p;if(r&&r.formatValue){h=r.formatValue(this.propertyName,this.value);if(this.highValue){p=r.formatValue(this.propertyName,this.highValue)}}else{if(typeof this.value==="number"){h=this.value}else{h=i+t.escapeOdata(this.value)+i}if(this.highValue){if(typeof this.value==="number"){p=this.highValue}else{p=i+t.escapeOdata(this.highValue)+i}}}if(this.operator===e.FilterOperators.StartsWith){o="startswith("+t.escapeOdata(this.propertyName)+","+h+")";o=a(o)}else if(this.operator===e.FilterOperators.EndsWith){o="endswith("+t.escapeOdata(this.propertyName)+","+h+")";o=a(o)}else if(this.operator===e.FilterOperators.Contains){o="substringof("+h+","+t.escapeOdata(this.propertyName)+")";o=a(o)}else if(this.operator===e.FilterOperators.BT){o="(("+a(t.escapeOdata(this.propertyName)+s+"ge"+s+h)+")"+a(s+"and"+s)+"("+a(t.escapeOdata(this.propertyName)+s+"le"+s+p)+"))"}else{o="("+a(t.escapeOdata(this.propertyName)+s+this.operator.toLowerCase()+s+h)+")"}return o};i.prototype.getProperty=function(){return this.propertyName};i.prototype.getOp=function(){return this.operator};i.prototype.getValue=function(){return this.value};i.prototype.getHighValue=function(){return this.highValue};i.prototype.getHash=function(){var e=this.propertyName+this.operator+this.value;if(this.highValue){e+=this.highValue}return t.hashCode(e)};i.prototype.copy=function(){return new i(this.messageHandler,this.propertyName,this.operator,this.value,this.highValue)};i.prototype.removeTermsByProperty=function(e){return this.internalRemoveTermsByProperty(e)};i.prototype.internalRemoveTermsByProperty=function(e){var t=0;var r=0;if(e instanceof Array){r=e.length;for(t=0;t<r;t++){if(this.propertyName===e[t]){return undefined}}return this.copy()}if(this.propertyName===e){return undefined}return this.copy()};i.prototype.removeTerms=function(e,t,r){var a=0;var i=0;if(e instanceof Array){i=e.length;for(a=0;a<i;a++){if(this.propertyName===e[a]&&this.operator===t&&this.value===r){return undefined}}return this.copy()}if(this.propertyName===e&&this.operator===t&&this.value===r){return undefined}return this.copy()};i.prototype.mapToSapUI5FilterExpression=function(){if(this.operator===e.FilterOperators.BT){return new r({path:this.propertyName,operator:this.operator,value1:this.value,value2:this.highValue})}return new r({path:this.propertyName,operator:this.operator,value1:this.value})};i.prototype.traverse=function(e){return e.processTerm(this)};sap.apf.core.utils.FilterTerm=i;return i},true);
//# sourceMappingURL=filterTerm.js.map