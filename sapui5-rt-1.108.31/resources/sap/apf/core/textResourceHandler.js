/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/utils/hashtable","sap/ui/thirdparty/jquery","sap/base/security/encodeXML","sap/base/strings/formatMessage"],function(e,jQuery,t,n){"use strict";sap.apf.core.TextResourceHandler=function(e){var r=e.instances.messageHandler;var s;var a=new sap.apf.utils.Hashtable(r);var i=new sap.apf.utils.Hashtable(r);var u=new sap.apf.utils.Hashtable(r);var o={};var l=e.constructors&&e.constructors.ResourceModel||sap.ui.model.resource.ResourceModel;var c;this.getTextNotHtmlEncoded=function(e,t){var n;var s;var i;if(typeof e==="string"){s=e}else{r.check(e!==undefined&&e.kind!==undefined&&e.kind==="text"&&e.key!==undefined,"Error - oLabel is not compatible");s=e.key}i=JSON.stringify({textKey:s,parameters:t});if(a.hasItem(i)){return a.getItem(i)}n=d(s,t);a.setItem(i,n);return n};this.getTextHtmlEncoded=function(e,n){return t(this.getTextNotHtmlEncoded(e,n))};this.getMessageText=function(e,t){return f(e,t,false)};this.loadTextElements=function(e){var t,n;n=e.length;for(t=0;t<n;t++){i.setItem(e[t].TextElement,e[t].TextElementDescription)}};this.registerTextWithKey=function(e,t){o[e]=t};this.loadResourceModelAsPromise=function(e,t,n){var r=jQuery.Deferred();c=new l({bundleUrl:e,async:true});if(t!==undefined&&t!==""){c.enhance({bundleUrl:t,async:true}).then(function(){if(n!==undefined&&n!==""){c.enhance({bundleUrl:n,async:true}).then(function(){c.getResourceBundle().then(function(e){s=e;r.resolve()})})}else{c.getResourceBundle().then(function(e){s=e;r.resolve()})}})}else if(n!==undefined&&n!==""){c.enhance({bundleUrl:n,async:true}).then(function(){c.getResourceBundle().then(function(e){s=e;r.resolve()})})}else{c.getResourceBundle().then(function(e){s=e;r.resolve()})}return r.promise()};function f(e,t,n){if(t&&t.length===0){return s.getText(e,undefined,n)}return s.getText(e,t,n)}function d(e,t){var s;if(e===sap.apf.core.constants.textKeyForInitialText){return""}else if(o[e]){if(t&&t.length>0){return n(o[e],t)}return o[e]}else if(i.hasItem(e)){s=f(e,t,true);if(typeof s!=="string"||s===e){return i.getItem(e)}return s}else if(u.hasItem(e)){return u.getItem(e)}s=f(e,t,true);if(typeof s==="string"){return s}r.putMessage(r.createMessageObject({code:"3001",aParameters:[e],oCallingObject:this}));var a="# text not available: "+e;u.setItem(e,a);return a}}});
//# sourceMappingURL=textResourceHandler.js.map