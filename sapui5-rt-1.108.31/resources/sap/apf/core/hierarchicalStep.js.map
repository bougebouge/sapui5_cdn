{"version":3,"file":"hierarchicalStep.js","names":["sap","ui","define","step","uriGenerator","ODataModel","Sorter","jQuery","apf","core","HierarchicalStep","messageHandler","stepConfig","factory","representationId","coreApi","Step","call","this","selectionValidationRequest","selectString","cachedFilter","type","service","getConfigurationById","request","entitySet","entityType","annotations","getAnnotationsForService","hierarchyProperty","metadataInitialized","Deferred","selectableProperties","binding","requiredFilters","sapSystem","getStartParameterFacade","getSapSystem","model","odata","ODataUtils","setOrigin","force","alias","when","getMetadata","getEntityTypeMetadata","then","metadata","entityTypeMetadata","hierarchyAnnotations","getHierarchyAnnotationsForProperty","putMessage","getSelectString","createRequest","selectProperties","getSelectionValidationRequestProperties","id","resolve","oModel","annotationURI","selectableProperty","selectionValidationRequestProperties","textProperty","getPropertyMetadata","push","hierarchyNodeExternalKeyFor","selectStrings","key","concat","utils","update","filter","callbackAfterRequest","done","effectiveFilter","restrictToProperties","getFilterablePropertiesAndParameters","bFilterChanged","isEqual","copy","path","generateOdataPath","getUriComponents","navigationProperty","controlObject","filterForRequest","getFilterableProperties","isEmpty","filters","mapToSapUI5FilterExpression","parameters","select","operationMode","OperationMode","Server","useServerSideApplicationFilters","treeAnnotationProperties","sorter","getSorter","getBinding","updateTreetable","getFilter","filterForSelectionValidationRequest","removeTermsByProperty","sendGetInBatch","addAnd","response","responseValues","data","currentSelectedFilters","getFilterTerms","validatedValues","forEach","filterTerm","responseValue","getValue","setFilterValues","bind","requestOptions","getRequestOptions","orderby","length","property","ascending","setData","adjustCumulativeFilter","cumulativeFilter"],"sources":["hierarchicalStep-dbg.js"],"mappings":"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"}