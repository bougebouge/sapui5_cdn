/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP SE. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/utils/textPoolHelper","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/viewValidator"],function(e,t,a){"use strict";var i,n,o,r,l,s,d;var t=sap.apf.modeler.ui.utils.nullObjectChecker;function g(e){e.byId("idCategoryBasicData").setText(n("categoryData"));e.byId("idCategoryTitleLabel").setText(n("categoryTitle"));e.byId("idCategoryTitle").setPlaceholder(n("newCategory"));e.byId("idTotalStepsLabel").setText(n("totalSteps"))}function u(e){var a;if(i&&i.arguments&&i.arguments.categoryId){s=r.getCategory(i.arguments.categoryId)}if(!t.checkIsNotUndefined(s)){a=r.setCategory();s=r.getCategory(a);c(e)}}function c(e,t){var a={id:s.getId(),icon:"sap-icon://open-folder"};if(t){delete a.icon;a.name=t}e.getView().getViewData().updateSelectedNode(a)}function f(e,t){var a=n("category")+": "+t;e.getView().getViewData().updateTitleAndBreadCrumb(a)}function y(e){if(!t.checkIsNotNullOrUndefinedOrBlank(r.getCategory(i.arguments.categoryId))){return}if(t.checkIsNotNullOrUndefinedOrBlank(s.labelKey)&&l.get(s.labelKey)){e.byId("idCategoryTitle").setValue(l.get(s.labelKey).TextElementDescription)}else{e.byId("idCategoryTitle").setValue(s.getId())}}function p(e){var t=r.getCategoryStepAssignments(s.getId()).length;e.byId("idTotalSteps").setValue(t)}var I=sap.ui.core.mvc.Controller.extend("sap.apf.modeler.ui.controller.category",{onInit:function(){var e=this;var t=e.getView().getViewData();n=t.getText;i=t.oParams;o=t.oConfigurationHandler;l=o.getTextPool();r=t.oConfigurationEditor;if(!r){o.loadConfiguration(i.arguments.configId,function(e){r=e})}d=new sap.apf.modeler.ui.utils.ViewValidator(e.getView());g(e);u(e);e.setDetailData();d.addField("idCategoryTitle")},onAfterRendering:function(){if(this.getView().byId("idCategoryTitle").getValue().length===0){this.getView().byId("idCategoryTitle").focus()}},setDetailData:function(){var e=this;y(e);p(e)},handleChangeDetailValue:function(e){var a=this,i;var n=a.byId("idCategoryTitle").getValue().trim();var o=sap.apf.modeler.ui.utils.TranslationFormatMap.CATEGORY_TITLE;if(t.checkIsNotNullOrUndefinedOrBlank(n)){l.setTextAsPromise(n,o).done(function(e){i={labelKey:e};r.setCategory(i,s.getId());c(a,n);f(a,n);r.setIsUnsaved()})}else{r.setIsUnsaved()}},handleSuggestions:function(e){var t=sap.apf.modeler.ui.utils.TranslationFormatMap.CATEGORY_TITLE;var a=new sap.apf.modeler.ui.utils.SuggestionTextHandler(l);a.manageSuggestionTexts(e,t)},updateSubViewInstancesOnReset:function(e){r=e;s=r.getCategory(s.getId())},getValidationState:function(){return d.getValidationState()},onExit:function(){d=null}});return I},true);
//# sourceMappingURL=category.controller.js.map