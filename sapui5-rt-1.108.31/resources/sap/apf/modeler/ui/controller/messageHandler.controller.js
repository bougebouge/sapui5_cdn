/*!
 * SAP APF Analysis Path Framework
 * 
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/m/MessageBox","sap/ui/thirdparty/jquery","sap/base/security/encodeXML","sap/base/Log"],function(e,jQuery,t,s){"use strict";var a;function o(e){var t=e.getMessage();while(e.getPrevious()){e=e.getPrevious();t=t+"\n"+e.getMessage()}return t}function i(e,t){var s=e.getView().getViewData();var a=s.getGenericExit("closeFatalErrorDialog");if(a){a(s,e,t)}else{window.history.go(-1)}}function n(e){sap.m.MessageBox.error(e.getMessage(),{styleClass:sap.ui.Device.system.desktop?"sapUiSizeCompact":""})}function r(e){sap.m.MessageBox.information(e.getMessage(),{styleClass:sap.ui.Device.system.desktop?"sapUiSizeCompact":""})}function g(e){sap.m.MessageToast.show(e.getMessage(),{width:"20em"})}function c(e,s){var i=new sap.m.Dialog(e.createId("idShowDetailsDialog"),{contentWidth:jQuery(window).height()*.6+"px",contentHeight:jQuery(window).height()*.6+"px",title:a.getText("error"),type:sap.m.DialogType.Message,state:sap.ui.core.ValueState.Error,content:new sap.ui.core.HTML({content:["<div><p> "+t(o(s))+"</p></div>"].join(""),sanitizeContent:true}),beginButton:new sap.m.Button({text:a.getText("close"),press:function(){i.close()}}),afterClose:function(){i.destroy()}}).addStyleClass("dialogContentPadding");i.setInitialFocus(i);i.open()}function p(e,t){var s=new sap.m.Dialog(e.createId("idFatalDialog"),{title:a.getText("error"),type:sap.m.DialogType.Message,state:sap.ui.core.ValueState.Error,content:[new sap.m.Text({text:a.getText("fatalErrorMessage")}),new sap.m.VBox({alignItems:sap.m.FlexAlignItems.End,items:[new sap.m.Link({text:a.getText("showDetailsLink"),press:function(){c(e,t)}})]})],beginButton:new sap.m.Button({text:a.getText("close"),press:function(){i(e,s)}}),afterClose:function(){s.destroy()}});s.setInitialFocus(s);s.open()}var l=sap.ui.core.mvc.Controller.extend("sap.apf.modeler.ui.controller.messageHandler",{onInit:function(){a=this.getView().getViewData()},showMessage:function(e){var t=this;var a=e.getSeverity();var o=sap.apf.core.constants.message.severity;switch(a){case o.fatal:p(t,e);break;case o.error:n(e);break;case o.success:g(e);break;case o.information:r(e);break;default:s.error("Error type not defined");break}}});return l},true);
//# sourceMappingURL=messageHandler.controller.js.map