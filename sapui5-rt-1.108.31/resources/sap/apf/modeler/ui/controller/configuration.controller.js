sap.ui.define(["sap/ui/core/mvc/Controller","sap/apf/modeler/ui/utils/nullObjectChecker","sap/apf/modeler/ui/utils/viewValidator","sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/textPoolHelper"],function(e,t,i,a,n){"use strict";function o(e){e.byId("idConfigurationBasicData").setText(e.textReader("configurationData"));e.byId("idConfigTitleLabel").setText(e.textReader("configTitle"));e.byId("idConfigTitle").setPlaceholder(e.textReader("newConfiguration"));e.byId("idConfigurationIdLabel").setText(e.textReader("configurationId"));if(e.coreApi.showSemanticObject()){e.byId("idSemanticObjectLabel").setText(e.textReader("semanticObject"))}e.byId("idNoOfCategoriesLabel").setText(e.textReader("noOfCategories"));e.byId("idNoOfStepsLabel").setText(e.textReader("noOfSteps"));e.byId("idFilterTypeData").setText(e.textReader("filterType"));e.byId("idFilterTypeLabel").setText(e.textReader("type"));e.byId("smartFilterBar").setText(e.textReader("smartFilterBar"));e.byId("facetFilter").setText(e.textReader("configuredFilters"));e.byId("none").setText(e.textReader("noFilters"));e.byId("idAriaPropertyForFilterRadioGp").setText(e.textReader("type"))}function r(e){if(!e.configuration){return}e.byId("idNoOfCategories").setValue(e.configurationEditor.getCategories().length)}function d(e){if(!e.configuration){return}e.byId("idNoOfSteps").setValue(e.configurationEditor.getSteps().length)}function g(e){if(!e.configuration){return}e.byId("idConfigTitle").setValue(e.configuration.AnalyticalConfigurationName)}function u(e){if(!e.configuration){return}if(e.configuration.AnalyticalConfiguration.indexOf(a.configurationObjectTypes.ISNEWCONFIG)===-1){e.byId("idConfigurationId").setValue(e.configuration.AnalyticalConfiguration)}}function s(e){var t=e.applicationHandler.getApplication(e.params.arguments.appId);if(t){e.byId("idSemanticObject").setValue(t.SemanticObject)}}function l(e){var t;if(e.configuration){t=Object.keys(e.configurationEditor.getFilterOption())[0];e.byId("idFilterTypeRadioGroup").setEnabled(true);e.byId("idFilterTypeRadioGroup").setSelectedButton(e.byId(t))}}function f(e){if(e.params&&e.params.arguments&&e.params.arguments.configId){e.configuration=e.configurationHandler.getConfiguration(e.params.arguments.configId)}if(e.configuration){e.configurationEditor=e.getView().getViewData().oConfigurationEditor}}function c(e,t){var i=e.textReader("configuration")+": "+t;e.getView().getViewData().updateTitleAndBreadCrumb(i)}function p(e,t){var i=e.configurationHandler.getTextPool();var a=sap.apf.modeler.ui.utils.TranslationFormatMap.APPLICATION_TITLE;i.setTextAsPromise(t,a).done(function(t){e.configurationEditor.setApplicationTitle(t)})}function m(e,t,i){var a={appId:e.params.arguments.appId};var n={name:t};if(i){n.id=i;a.configId=i;e.getView().getViewData().updateSelectedNode(n,a)}else{e.getView().getViewData().updateSelectedNode(n)}}function b(e){var t={};var i=e.byId("idFilterTypeRadioGroup").getSelectedButton().getCustomData()[0].getValue();t[i]=true;e.configurationEditor.setFilterOption(t);e.configurationEditor.setIsUnsaved()}return e.extend("sap.apf.modeler.ui.controller.configuration",{onInit:function(){var e=this;var t=e.getView().getViewData();e.applicationHandler=t.oApplicationHandler;e.configurationHandler=t.oConfigurationHandler;e.textReader=t.getText;e.params=t.oParams;this.coreApi=t.oCoreApi;this.viewValidatorForConfig=new i(e.getView());o(e);if(!this.coreApi.showSemanticObject()){e.byId("idSemanticObjectLabel").setVisible(false);e.byId("idSemanticObject").setVisible(false)}f(e);e.setDetailData();this.viewValidatorForConfig.addField("idConfigTitle")},onAfterRendering:function(){var e=this;if(e.getView().byId("idConfigTitle").getValue().length===0){e.getView().byId("idConfigTitle").focus()}},setDetailData:function(){var e=this;s(e);u(e);g(e);r(e);d(e);l(e)},updateSubViewInstancesOnReset:function(e){this.configurationEditor=e},handleChangeDetailValue:function(){var e=this;var i=e.byId("idConfigTitle").getValue().trim();var a;if(t.checkIsNotNullOrUndefinedOrBlank(i)){a={AnalyticalConfigurationName:i};if(e.params&&e.params.arguments&&e.params.arguments.configId&&e.params.arguments.configId.indexOf("newConfig")===-1){e.configurationHandler.setConfiguration(a,e.params.arguments.configId);m(e,i)}else{var n=e.configurationHandler.setConfiguration(a);e.configuration=e.configurationHandler.getConfiguration(n);if(!e.configurationEditor){e.configurationHandler.loadConfiguration(n,function(t){e.configurationEditor=t})}m(e,i,n)}p(e,i);c(e,i);e.configuration=a}e.configurationEditor.setIsUnsaved()},handleChangeForFilterType:function(){var e=this,t;if(!e.configurationEditor.isDataLostByFilterOptionChange()){b(e);e.getView().getViewData().updateTree()}else{t=new sap.ui.xmlfragment("idFilterOptionChangeFragment","sap.apf.modeler.ui.fragment.dialogWithTwoButtons",e);t.setState(sap.ui.core.ValueState.Warning);t.setTitle(e.textReader("warning"));sap.ui.core.Fragment.byId("idFilterOptionChangeFragment","idLabelForDialog").setText(e.textReader("filterOptionChangeMessage"));sap.ui.core.Fragment.byId("idFilterOptionChangeFragment","idBeginButtonForDialog").setText(e.textReader("continue"));sap.ui.core.Fragment.byId("idFilterOptionChangeFragment","idEndButtonForDialog").setText(e.textReader("cancel"));t.open()}},handleBeginButtonDialogWithTwoButtons:function(){var e=this;b(e);e.getView().getViewData().updateTree();sap.ui.core.Fragment.byId("idFilterOptionChangeFragment","idDialogWithTwoButtons").destroy()},handleCancel:function(){var e=this;l(e);sap.ui.core.Fragment.byId("idFilterOptionChangeFragment","idDialogWithTwoButtons").destroy()},getValidationState:function(){return this.viewValidatorForConfig.getValidationState()}})},true);
//# sourceMappingURL=configuration.controller.js.map