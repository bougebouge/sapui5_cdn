/*!
* SAP APF Analysis Path Framework
*
* (c) Copyright 2012-2014 SAP AG. All rights reserved
*/
sap.ui.define(["sap/apf/modeler/ui/utils/constants","sap/apf/modeler/ui/utils/propertyTypeOrchestration"],function(t,e){"use strict";var r=function(t,e,r,o){this.oParentView=t;this.oStepPropertyMetadataHandler=r;this.oParentObject=e;this.oTextReader=o};function o(r,o,a){var i;var n=new e.PropertyTypeOrchestration;var p={oConfigurationEditor:r.oParentView.getViewData().oConfigurationEditor,oParentObject:r.oParentObject,oCoreApi:r.oParentView.getViewData().oCoreApi,oConfigurationHandler:r.oParentView.getViewData().oConfigurationHandler,oStepPropertyMetadataHandler:r.oStepPropertyMetadataHandler,sPropertyType:o};var s={oViewDataForPropertyType:p,aPropertiesToBeCreated:a,oPropertyOrchestration:n};i=new sap.ui.view({viewName:"sap.apf.modeler.ui.view.propertyTypeHandler",type:sap.ui.core.mvc.ViewType.XML,id:r.oParentView.getController().createId("id"+o),viewData:s});r.oParentView.getController().byId("idSortLayout").insertItem(i);r.oParentView.attachEvent(t.events.step.SETTOPNPROPERTIES,i.getController().handleSettingTopNProperties.bind(i.getController()))}function a(t){var e=[];t.forEach(function(t){e.push({sProperty:t.property,sContext:t.ascending?"true":"false"})});return e}r.prototype.instantiateRepresentationSortData=function(){var e=a(this.oParentObject.getOrderbySpecifications());if(e.length===0){e=[{sProperty:this.oTextReader("none"),sContext:"true"}]}o(this,t.propertyTypes.REPRESENTATIONSORT,e)};r.prototype.instantiateStepSortData=function(){var e;this.destroySortData();if(this.oParentObject.getTopN()&&this.oParentObject.getTopN().orderby.length!==0){e=a(this.oParentObject.getTopN().orderby)}else{e=[{sProperty:this.oStepPropertyMetadataHandler.getProperties()[0],sContext:"true"}]}o(this,t.propertyTypes.STEPSORT,e)};r.prototype.destroySortData=function(){this.oParentView.getController().byId("idSortLayout").destroyItems()};return r},true);
//# sourceMappingURL=sortDataHandler.js.map