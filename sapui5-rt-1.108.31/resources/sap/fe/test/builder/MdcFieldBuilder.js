/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["./FEBuilder","sap/ui/test/OpaBuilder","sap/ui/mdc/enum/FieldDisplay","sap/fe/test/Utils","sap/ui/mdc/enum/ConditionValidated"],function(e,t,n,i,r){"use strict";var a=/(.+?) \((.+?)\)/;function o(e,t){e=e&&[].concat(e)||[];t=t&&[].concat(t)||[];return e.every(function(e,n){return n<t.length&&(e||"")==(t[n]||"")})}function u(e,t,r,a,u){switch(e){case n.Value:return o(t,a);case n.Description:return r===undefined?o(t,u):o(r,u);case n.ValueDescription:case n.DescriptionValue:return o(t,a)&&(r===undefined||o(r,u));default:throw new Error(i.formatMessage("unsupported field display '{0}'",e))}}function s(e,t){var r={};if(i.isOfType(e,Array)){r.value=e.length>0?e[0]:null;r.description=e.length>1?e[1]:undefined}else if(i.isOfType(e,Object)){r.value=e.value;r.description=e.description}else{switch(t){case n.Description:r.value=undefined;r.description=e;break;case n.ValueDescription:case n.DescriptionValue:var o=a.exec(e);if(o){r.value=t===n.ValueDescription?o[1]:o[2];r.description=t===n.ValueDescription?o[2]:o[1];break}case n.Value:default:r.value=e;r.description=undefined}}return r}var c=function(){return e.apply(this,arguments)};c.create=function(e){return new c(e)};c.prototype=Object.create(e.prototype);c.prototype.constructor=c;c.prototype.hasValue=function(e){if(e===undefined){return this}return this.has(c.Matchers.value(e))};c.prototype.hasConditionValues=function(e,t){if(e===undefined){return this}return this.has(c.Matchers.conditionsValue(e,t))};c.prototype.doChangeValue=function(e){if(e===undefined){return this}return this.doEnterText(e)};c.prototype.getStatesMatcher=function(e){return c.Matchers.states(e)};c.prototype.doPressKeyboardShortcut=function(t){return this.do(e.Actions.keyboardShortcut(t,"input"))};c.prototype.doOpenValueHelp=function(){return this.doPressKeyboardShortcut("F4")};c.Matchers={value:function(e){return function(t){if(!t.isA("sap.ui.mdc.Field")){throw new Error("Expected sap.ui.mdc.Field but got "+t.getMetadata().getName())}var n=s(e,t.getDisplay()),i=t.getValue(),r=t.getAdditionalValue();return u(t.getDisplay(),n.value,n.description,i,r)}},conditionsValue:function(e,t){if(!i.isOfType(e,Array)){e=[e]}return function(n){var i=e.map(function(e){return s(e,n.getDisplay())}),a=n.getConditions().map(function(e){return{conditionOperator:e.operator,conditionValue:s(e.values),conditionValidated:e.validated===r.Validated}}),o=function(e){return function(i){if(t&&i.conditionOperator!==t){return false}return u(n.getDisplay(),e.value,e.description,i.conditionValue.value,i.conditionValidated?e.description:i.conditionValue.description)}};return a&&i.every(function(e){return a.some(o(e))})}},state:function(t,n){switch(t){case"content":return function(t){var i=t.getContentDisplay(),r=t.getContentEdit(),a=t.getContent(),o=(t.getAggregation("_content")||[]).concat(a||[],i||[],r||[]),u=e.Matchers.states(n);return o.some(u)};case"contentEdit":case"contentDisplay":return function(i){return e.Matchers.states(n)(i.getAggregation(t))};default:return e.Matchers.state(t,n)}},states:function(t){return e.Matchers.states(t,c.Matchers.state)}};c.Actions={};return c});
//# sourceMappingURL=MdcFieldBuilder.js.map