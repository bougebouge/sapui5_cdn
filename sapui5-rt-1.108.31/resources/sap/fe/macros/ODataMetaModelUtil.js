/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";var e={"Edm.Binary":"boolean","Edm.Boolean":"boolean","Edm.Byte":"boolean","Edm.Date":"date","Edm.DateTimeOffset":"dateTime","Edm.Decimal":"int","Edm.Double":"boolean","Edm.Duration":"float","Edm.Guid":"string","Edm.Int16":"int","Edm.Int32":"int","Edm.Int64":"int","Edm.SByte":"boolean","Edm.Single":"float","Edm.String":"string","Edm.TimeOfDay":"time"};var r={fetchAllAnnotations:function(e,r){var t=e.getMetaContext(r);return e.requestObject("@",t).then(function(e){return e})},getAllCustomAggregates:function(e){var r={};var t;for(var a in e){if(a.startsWith("@Org.OData.Aggregation.V1.CustomAggregate")){t=a.replace("@Org.OData.Aggregation.V1.CustomAggregate#","");var i=t.split("@");if(i.length==2){if(i[1]=="Org.OData.Aggregation.V1.ContextDefiningProperties"){r[i[0]].contextDefiningProperties=e[a]}if(i[1]=="com.sap.vocabularies.Common.v1.Label"){r[i[0]].label=e[a]}}else if(i.length==1){r[i[0]]={name:i[0],propertyPath:i[0],label:"Custom Aggregate (".concat(t,")"),sortable:true,sortOrder:"both",custom:true}}}}return r},getAllAggregatableProperties:function(e){var r={};var t,a;if(e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"]){t=e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"];for(var i=0;i<t.length;i++){a=t[i];r[a.Name]={name:a.Name,propertyPath:a.AggregatableProperty.$PropertyPath,aggregationMethod:a.AggregationMethod,label:a["@com.sap.vocabularies.Common.v1.Label"]||"Aggregatable property (".concat(a.Name,")"),sortable:true,sortOrder:"both",custom:false}}}return r},getAllDataPoints:function(e){var t={};for(var a in e){if(a.startsWith("@com.sap.vocabularies.UI.v1.DataPoint")){var i=a.replace("@com.sap.vocabularies.UI.v1.DataPoint#","");var n=e[a].Value.$Path;t[n]=t[n]||{};t[n][i]=r.createDataPointProperty(e[a])}}return t},createDataPointProperty:function(e){var t={};if(e.TargetValue){t.targetValue=e.TargetValue.$Path}if(e.ForeCastValue){t.foreCastValue=e.ForeCastValue.$Path}var a=null;if(e.Criticality){if(e.Criticality.$Path){a={Calculated:e.Criticality.$Path}}else{a={Static:e.Criticality.$EnumMember.replace("com.sap.vocabularies.UI.v1.CriticalityType/","")}}}else if(e.CriticalityCalculation){var i={};var n=r._buildThresholds(i,e.CriticalityCalculation);if(n){a={ConstantThresholds:i}}else{a={DynamicThresholds:i}}}if(a){t.criticality=a}return t},_buildThresholds:function(e,r){var t=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];var a=true,i,n,o;e.ImprovementDirection=r.ImprovementDirection.$EnumMember.replace("com.sap.vocabularies.UI.v1.ImprovementDirectionType/","");var l={oneSupplied:false,usedMeasures:[]};var s={oneSupplied:false};for(n=0;n<t.length;n++){i=t[n];l[i]=r[i]?r[i].$Path:undefined;l.oneSupplied=l.oneSupplied||l[i];if(!l.oneSupplied){s[i]=r[i];s.oneSupplied=s.oneSupplied||s[i]}else if(l[i]){l.usedMeasures.push(l[i])}}if(l.oneSupplied){a=false;for(n=0;n<t.length;n++){if(l[t[n]]){e[t[n]]=l[t[n]]}}e.usedMeasures=l.usedMeasures}else{var u;e.AggregationLevels=[];if(s.oneSupplied){u={VisibleDimensions:null};for(n=0;n<t.length;n++){if(s[t[n]]){u[t[n]]=s[t[n]]}}e.AggregationLevels.push(u)}if(r.ConstantThresholds&&r.ConstantThresholds.length>0){for(n=0;n<r.ConstantThresholds.length;n++){var c=r.ConstantThresholds[n];var f=c.AggregationLevel?[]:null;if(c.AggregationLevel&&c.AggregationLevel.length>0){for(o=0;o<c.AggregationLevel.length;o++){f.push(c.AggregationLevel[o].$PropertyPath)}}u={VisibleDimensions:f};for(o=0;o<t.length;o++){var g=c[t[o]];if(g){u[t[o]]=g}}e.AggregationLevels.push(u)}}}return a},getSortRestrictionsInfo:function(e){var r,t;var a={sortable:true,propertyInfo:{}};if(e){a.sortable=e.Sortable!=null?e.Sortable:true;if(e.NonSortableProperties){for(r=0;r<e.NonSortableProperties.length;r++){t=e.NonSortableProperties[r].$PropertyPath;a[t]={sortable:false}}}if(e.AscendingOnlyProperties){for(r=0;r<e.AscendingOnlyProperties.length;r++){t=e.AscendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"asc"}}}if(e.AscendingOnlyProperties){for(r=0;r<e.DescendingOnlyProperties.length;r++){t=e.DescendingOnlyProperties[r].$PropertyPath;a[t]={sortable:true,sortDirection:"desc"}}}}return a},addSortInfoForProperty:function(e,r){var t=r[e.name];e.sortable=r.sortable&&t?t.sortable:true;if(e.sortable){e.sortDirection=t?t.sortDirection:"both"}},getFilterRestrictionsInfo:function(e){var r,t;var a={filterable:true,propertyInfo:{}};if(e){a.filterable=e.Filterable!=null?e.Filterable:true;a.requiresFilter=e.RequiresFilter!=null?e.RequiresFilter:false;a.requiredProperties=[];if(a.RequiredProperties){for(r=0;r<e.RequiredProperties.length;r++){t=e.RequiredProperties[r].$PropertyPath;a.requiredProperties.push(t)}}if(e.NonFilterableProperties){for(r=0;r<e.NonFilterableProperties.length;r++){t=e.NonFilterableProperties[r].$PropertyPath;a[t]={filterable:false}}}if(e.FilterExpressionRestrictions){for(r=0;r<e.FilterExpressionRestrictions.length;r++){t=e.FilterExpressionRestrictions[r].$PropertyPath;a[t]={filterable:true,allowedExpressions:e.FilterExpressionRestrictions[r].AllowedExpressions}}}}return a},isMultiValueFilterExpression:function(e){var r=true;switch(e){case"SearchExpression":case"SingleRange":case"SingleValue":r=false;break;default:break}return r},addFilterInfoForProperty:function(e,r){var t=r[e.name];e.filterable=r.filterable&&t?t.filterable:true;if(e.filterable){e.allowedExpressions=t?t.allowedExpressions:null}},getType:function(r){return e[r]||"object"},fetchCalendarTag:function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject("".concat(t,"IsCalendarYear"),r),e.requestObject("".concat(t,"IsCalendarHalfyear"),r),e.requestObject("".concat(t,"IsCalendarQuarter"),r),e.requestObject("".concat(t,"IsCalendarMonth"),r),e.requestObject("".concat(t,"IsCalendarWeek"),r),e.requestObject("".concat(t,"IsDayOfCalendarMonth"),r),e.requestObject("".concat(t,"IsDayOfCalendarYear"),r),e.requestObject("".concat(t,"IsCalendarYearHalfyear"),r),e.requestObject("".concat(t,"IsCalendarYearQuarter"),r),e.requestObject("".concat(t,"IsCalendarYearMonth"),r),e.requestObject("".concat(t,"IsCalendarYearWeek"),r),e.requestObject("".concat(t,"IsCalendarDate"),r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"halfYear"}if(e[2]){return"quarter"}if(e[3]){return"month"}if(e[4]){return"week"}if(e[5]){return"dayOfMonth"}if(e[6]){return"dayOfYear"}if(e[7]){return"yearHalfYear"}if(e[8]){return"yearQuarter"}if(e[9]){return"yearMonth"}if(e[10]){return"yearWeek"}if(e[11]){return"date"}return undefined})},fetchFiscalTag:function(e,r){var t="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject("".concat(t,"IsFiscalYear"),r),e.requestObject("".concat(t,"IsFiscalPeriod"),r),e.requestObject("".concat(t,"IsFiscalYearPeriod"),r),e.requestObject("".concat(t,"IsFiscalQuarter"),r),e.requestObject("".concat(t,"IsFiscalYearQuarter"),r),e.requestObject("".concat(t,"IsFiscalWeek"),r),e.requestObject("".concat(t,"IsFiscalYearWeek"),r),e.requestObject("".concat(t,"IsDayOfFiscalYear"),r),e.requestObject("".concat(t,"IsFiscalYearVariant"),r)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"period"}if(e[2]){return"yearPeriod"}if(e[3]){return"quarter"}if(e[4]){return"yearQuarter"}if(e[5]){return"week"}if(e[6]){return"yearWeek"}if(e[7]){return"dayOfYear"}if(e[8]){return"yearVariant"}return undefined})},fetchCriticality:function(e,r){var t="@com.sap.vocabularies.UI.v1";return e.requestObject("".concat(t,".ValueCriticality"),r).then(function(e){var r,t;if(e){r={VeryPositive:[],Positive:[],Critical:[],VeryNegative:[],Negative:[],Neutral:[]};for(var a=0;a<e.length;a++){t=e[a];if(t.Criticality.$EnumMember.endsWith("VeryPositive")){r.VeryPositive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Positive")){r.Positive.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Critical")){r.Critical.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("VeryNegative")){r.VeryNegative.push(t.Value)}else if(t.Criticality.$EnumMember.endsWith("Negative")){r.Negative.push(t.Value)}else{r.Neutral.push(t.Value)}}for(var i in r){if(r[i].length==0){delete r[i]}}}return r})}};return r},false);
//# sourceMappingURL=ODataMetaModelUtil.js.map