/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log", "sap/fe/core/CommonUtils", "sap/fe/core/helpers/StableIdHelper", "sap/fe/core/templating/PropertyFormatters", "sap/fe/macros/field/FieldHelper", "sap/fe/macros/internal/valuehelp/ValueHelpTemplating"], function (Log, CommonUtils, StableIdHelper, PropertyFormatters, FieldHelper, ValueHelpTemplating) {
  "use strict";

  var _exports = {};
  var generateID = ValueHelpTemplating.generateID;
  var getRelativePropertyPath = PropertyFormatters.getRelativePropertyPath;
  var generate = StableIdHelper.generate;
  var getCustomDataWithModifier = function (oControl, sProperty, oModifier) {
    try {
      var aCustomData = [];
      return Promise.resolve(Promise.resolve().then(oModifier.getAggregation.bind(oModifier, oControl, "customData"))).then(function (aRetrievedCustomData) {
        var oPromise = aRetrievedCustomData.reduce(function (oPreviousPromise, oCustomData) {
          return oPreviousPromise.then(oModifier.getProperty.bind(oModifier, oCustomData, "key")).then(function (sKey) {
            if (sKey === sProperty) {
              aCustomData.push(oCustomData);
            }
          });
        }, Promise.resolve());
        return Promise.resolve(oPromise).then(function () {
          if (aCustomData.length === 1) {
            return oModifier.getProperty(aCustomData[0], "value");
          } else {
            return undefined;
          }
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var NS_MACRODATA = "http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1";
  var mDefaultTypeForEdmType = {
    "Edm.Boolean": {
      modelType: "Bool"
    },
    "Edm.Byte": {
      modelType: "Int"
    },
    "Edm.Date": {
      modelType: "Date"
    },
    "Edm.DateTime": {
      modelType: "Date"
    },
    "Edm.DateTimeOffset": {
      modelType: "DateTimeOffset"
    },
    "Edm.Decimal": {
      modelType: "Decimal"
    },
    "Edm.Double": {
      modelType: "Float"
    },
    "Edm.Float": {
      modelType: "Float"
    },
    "Edm.Guid": {
      modelType: "Guid"
    },
    "Edm.Int16": {
      modelType: "Int"
    },
    "Edm.Int32": {
      modelType: "Int"
    },
    "Edm.Int64": {
      modelType: "Int"
    },
    "Edm.SByte": {
      modelType: "Int"
    },
    "Edm.Single": {
      modelType: "Float"
    },
    "Edm.String": {
      modelType: "String"
    },
    "Edm.Time": {
      modelType: "TimeOfDay"
    },
    "Edm.TimeOfDay": {
      modelType: "TimeOfDay"
    },
    "Edm.Stream": {
      //no corresponding modelType - ignore for filtering
      modelType: undefined
    }
  };
  _exports.mDefaultTypeForEdmType = mDefaultTypeForEdmType;
  function _retrieveModel() {
    this.control.detachModelContextChange(_retrieveModel, this);
    var sModelName = this.modelName,
      oModel = this.control.getModel(sModelName);
    if (oModel) {
      this.resolve(oModel);
    } else {
      this.control.attachModelContextChange(_retrieveModel, this);
    }
  }
  var DelegateUtil = {
    getLocalizedText: function (sTextOrToken, oControl) {
      var aMatch = /{([A-Za-z0-9_.|@]+)>([A-Za-z0-9_.|]+)}/.exec(sTextOrToken);
      if (aMatch) {
        try {
          var oResourceBundle = oControl.getModel(aMatch[1]).getResourceBundle();
          return oResourceBundle.getText(aMatch[2]);
        } catch (e) {
          Log.info("Unable to retrieve localized text ".concat(sTextOrToken));
        }
      }
      return sTextOrToken;
    },
    getCustomData: function (oControl, sProperty, oModifier) {
      // If Modifier is given, the method must execute asynchronously and return a Promise
      if (oModifier) {
        return getCustomDataWithModifier(oControl, sProperty, oModifier);
      } else {
        // Delegate invoked from a non-flex change - FilterBarDelegate._addP13nItem for OP table filtering, FilterBarDelegate.fetchProperties etc.
        if (oControl && sProperty) {
          if (oControl instanceof window.Element) {
            return oControl.getAttributeNS(NS_MACRODATA, sProperty);
          }
          if (oControl.data instanceof Function) {
            return oControl.data(sProperty);
          }
        }
        return undefined;
      }
    },
    setCustomData: function (oControl, sProperty, vValue) {
      if (oControl && sProperty) {
        if (oControl instanceof window.Element) {
          return oControl.setAttributeNS(NS_MACRODATA, "customData:".concat(sProperty), vValue);
        }
        if (oControl.data instanceof Function) {
          return oControl.data(sProperty, vValue);
        }
      }
    },
    fetchPropertiesForEntity: function (sEntitySet, oMetaModel) {
      return oMetaModel.requestObject("".concat(sEntitySet, "/"));
    },
    fetchAnnotationsForEntity: function (sEntitySet, oMetaModel) {
      return oMetaModel.requestObject("".concat(sEntitySet, "@"));
    },
    fetchModel: function (oControl) {
      return new Promise(function (resolve) {
        var sModelName = oControl.getDelegate().payload && oControl.getDelegate().payload.modelName,
          oContext = {
            modelName: sModelName,
            control: oControl,
            resolve: resolve
          };
        _retrieveModel.call(oContext);
      });
    },
    loadMacroLibrary: function () {
      return new Promise(function (resolve) {
        sap.ui.require(["sap/fe/macros/macroLibrary"], function /*macroLibrary*/
        () {
          resolve();
        });
      });
    },
    templateControlFragment: function (sFragmentName, oPreprocessorSettings, oOptions, oModifier) {
      return CommonUtils.templateControlFragment(sFragmentName, oPreprocessorSettings, oOptions, oModifier);
    },
    doesValueHelpExist: function (mParameters) {
      var sPropertyName = mParameters.sPropertyName || "";
      var sValueHelpType = mParameters.sValueHelpType || "";
      var oMetaModel = mParameters.oMetaModel;
      var oModifier = mParameters.oModifier;
      var sOriginalProperty = "".concat(mParameters.sBindingPath, "/").concat(sPropertyName);
      var oPropertyContext = oMetaModel.createBindingContext(sOriginalProperty);
      var sValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext);
      var bIsAbsolute = mParameters.sBindingPath && mParameters.sBindingPath.indexOf("/") === 0;

      // unit/currency
      if (sValueHelpProperty.indexOf("$Path") > -1) {
        sValueHelpProperty = oMetaModel.getObject(sValueHelpProperty);
      }
      if (bIsAbsolute && sValueHelpProperty.indexOf("/") !== 0) {
        sValueHelpProperty = "".concat(mParameters.sBindingPath, "/").concat(sValueHelpProperty);
      }
      var sGeneratedId = generateID(mParameters.flexId, generate([oModifier ? oModifier.getId(mParameters.oControl) : mParameters.oControl.getId(), sValueHelpType]), getRelativePropertyPath(oPropertyContext.getProperty(sOriginalProperty), {
        context: {
          getModel: function () {
            return mParameters.oMetaModel;
          },
          getPath: function () {
            return sOriginalProperty;
          }
        }
      }), getRelativePropertyPath(oPropertyContext.getProperty(sValueHelpProperty), {
        context: {
          getModel: function () {
            return mParameters.oMetaModel;
          },
          getPath: function () {
            return sValueHelpProperty;
          }
        }
      }));
      return Promise.resolve().then(function () {
        if (oModifier) {
          return oModifier.getAggregation(mParameters.oControl, "dependents");
        }
        return mParameters.oControl.getAggregation("dependents");
      }).then(function (aDependents) {
        return Promise.resolve(aDependents && aDependents.some(function (oDependent) {
          return oModifier ? oModifier.getId(oDependent) === sGeneratedId : oDependent.getId() === sGeneratedId;
        }));
      });
    },
    isValueHelpRequired: function (mParameters, bInFilterField) {
      var sPropertyName = mParameters.sPropertyName || "",
        oMetaModel = mParameters.oMetaModel,
        sProperty = "".concat(mParameters.sBindingPath, "/").concat(sPropertyName),
        oPropertyContext = oMetaModel.createBindingContext(sProperty),
        sValueHelpProperty = FieldHelper.valueHelpProperty(oPropertyContext, bInFilterField);
      return this.getCustomData(mParameters.oControl, "displayModePropertyBinding", mParameters.oModifier).then(function (bReadOnly) {
        // Check whether the control is read-only. If yes, no need of a value help.
        bReadOnly = typeof bReadOnly === "boolean" ? bReadOnly : bReadOnly === "true";
        if (bReadOnly) {
          return false;
        }
        // Else, check whether Value Help relevant annotation exists for the property.
        // TODO use PropertyFormatter.hasValueHelp () => if doing so, QUnit tests fail due to mocked model implementation
        return Promise.all([oMetaModel.requestObject("".concat(sValueHelpProperty, "@com.sap.vocabularies.Common.v1.ValueListWithFixedValues")), oMetaModel.requestObject("".concat(sValueHelpProperty, "@com.sap.vocabularies.Common.v1.ValueListReferences")), oMetaModel.requestObject("".concat(sValueHelpProperty, "@com.sap.vocabularies.Common.v1.ValueListMapping")), oMetaModel.requestObject("".concat(sValueHelpProperty, "@com.sap.vocabularies.Common.v1.ValueList"))]);
      }).then(function (aResults) {
        return !!aResults[0] || !!aResults[1] || !!aResults[2] || !!aResults[3];
      }).catch(function (oError) {
        Log.warning("Error while retrieving custom data / value list annotation values", oError);
      });
    },
    isTypeFilterable: function (sType) {
      return sType && sType in mDefaultTypeForEdmType && !!mDefaultTypeForEdmType[sType].modelType;
    },
    getModelType: function (sType) {
      return sType && sType in mDefaultTypeForEdmType && mDefaultTypeForEdmType[sType].modelType;
    },
    isMultiValue: function (oProperty) {
      var bIsMultiValue = true;
      //SingleValue | MultiValue | SingleRange | MultiRange | SearchExpression | MultiRangeOrSearchExpression
      switch (oProperty.filterExpression) {
        case "SearchExpression":
        case "SingleRange":
        case "SingleValue":
          bIsMultiValue = false;
          break;
        default:
          break;
      }
      if (oProperty.type && oProperty.type.indexOf("Boolean") > 0) {
        bIsMultiValue = false;
      }
      return bIsMultiValue;
    }
  };
  return DelegateUtil;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRDdXN0b21EYXRhV2l0aE1vZGlmaWVyIiwib0NvbnRyb2wiLCJzUHJvcGVydHkiLCJvTW9kaWZpZXIiLCJhQ3VzdG9tRGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsImdldEFnZ3JlZ2F0aW9uIiwiYmluZCIsImFSZXRyaWV2ZWRDdXN0b21EYXRhIiwib1Byb21pc2UiLCJyZWR1Y2UiLCJvUHJldmlvdXNQcm9taXNlIiwib0N1c3RvbURhdGEiLCJnZXRQcm9wZXJ0eSIsInNLZXkiLCJwdXNoIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiTlNfTUFDUk9EQVRBIiwibURlZmF1bHRUeXBlRm9yRWRtVHlwZSIsIm1vZGVsVHlwZSIsIl9yZXRyaWV2ZU1vZGVsIiwiY29udHJvbCIsImRldGFjaE1vZGVsQ29udGV4dENoYW5nZSIsInNNb2RlbE5hbWUiLCJtb2RlbE5hbWUiLCJvTW9kZWwiLCJnZXRNb2RlbCIsImF0dGFjaE1vZGVsQ29udGV4dENoYW5nZSIsIkRlbGVnYXRlVXRpbCIsImdldExvY2FsaXplZFRleHQiLCJzVGV4dE9yVG9rZW4iLCJhTWF0Y2giLCJleGVjIiwib1Jlc291cmNlQnVuZGxlIiwiZ2V0UmVzb3VyY2VCdW5kbGUiLCJnZXRUZXh0IiwiZSIsIkxvZyIsImluZm8iLCJnZXRDdXN0b21EYXRhIiwid2luZG93IiwiRWxlbWVudCIsImdldEF0dHJpYnV0ZU5TIiwiZGF0YSIsIkZ1bmN0aW9uIiwic2V0Q3VzdG9tRGF0YSIsInZWYWx1ZSIsInNldEF0dHJpYnV0ZU5TIiwiZmV0Y2hQcm9wZXJ0aWVzRm9yRW50aXR5Iiwic0VudGl0eVNldCIsIm9NZXRhTW9kZWwiLCJyZXF1ZXN0T2JqZWN0IiwiZmV0Y2hBbm5vdGF0aW9uc0ZvckVudGl0eSIsImZldGNoTW9kZWwiLCJnZXREZWxlZ2F0ZSIsInBheWxvYWQiLCJvQ29udGV4dCIsImNhbGwiLCJsb2FkTWFjcm9MaWJyYXJ5Iiwic2FwIiwidWkiLCJyZXF1aXJlIiwidGVtcGxhdGVDb250cm9sRnJhZ21lbnQiLCJzRnJhZ21lbnROYW1lIiwib1ByZXByb2Nlc3NvclNldHRpbmdzIiwib09wdGlvbnMiLCJDb21tb25VdGlscyIsImRvZXNWYWx1ZUhlbHBFeGlzdCIsIm1QYXJhbWV0ZXJzIiwic1Byb3BlcnR5TmFtZSIsInNWYWx1ZUhlbHBUeXBlIiwic09yaWdpbmFsUHJvcGVydHkiLCJzQmluZGluZ1BhdGgiLCJvUHJvcGVydHlDb250ZXh0IiwiY3JlYXRlQmluZGluZ0NvbnRleHQiLCJzVmFsdWVIZWxwUHJvcGVydHkiLCJGaWVsZEhlbHBlciIsInZhbHVlSGVscFByb3BlcnR5IiwiYklzQWJzb2x1dGUiLCJpbmRleE9mIiwiZ2V0T2JqZWN0Iiwic0dlbmVyYXRlZElkIiwiZ2VuZXJhdGVJRCIsImZsZXhJZCIsImdlbmVyYXRlIiwiZ2V0SWQiLCJnZXRSZWxhdGl2ZVByb3BlcnR5UGF0aCIsImNvbnRleHQiLCJnZXRQYXRoIiwiYURlcGVuZGVudHMiLCJzb21lIiwib0RlcGVuZGVudCIsImlzVmFsdWVIZWxwUmVxdWlyZWQiLCJiSW5GaWx0ZXJGaWVsZCIsImJSZWFkT25seSIsImFsbCIsImFSZXN1bHRzIiwiY2F0Y2giLCJvRXJyb3IiLCJ3YXJuaW5nIiwiaXNUeXBlRmlsdGVyYWJsZSIsInNUeXBlIiwiZ2V0TW9kZWxUeXBlIiwiaXNNdWx0aVZhbHVlIiwib1Byb3BlcnR5IiwiYklzTXVsdGlWYWx1ZSIsImZpbHRlckV4cHJlc3Npb24iLCJ0eXBlIl0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJEZWxlZ2F0ZVV0aWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgUmVzb3VyY2VCdW5kbGUgZnJvbSBcInNhcC9iYXNlL2kxOG4vUmVzb3VyY2VCdW5kbGVcIjtcbmltcG9ydCBMb2cgZnJvbSBcInNhcC9iYXNlL0xvZ1wiO1xuaW1wb3J0IENvbW1vblV0aWxzIGZyb20gXCJzYXAvZmUvY29yZS9Db21tb25VdGlsc1wiO1xuaW1wb3J0IHsgQ29sdW1uRXhwb3J0U2V0dGluZ3MsIGNvbmZpZ1R5cGUsIFZpc3VhbFNldHRpbmdzIH0gZnJvbSBcInNhcC9mZS9jb3JlL2NvbnZlcnRlcnMvY29udHJvbHMvQ29tbW9uL1RhYmxlXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZSB9IGZyb20gXCJzYXAvZmUvY29yZS9oZWxwZXJzL1N0YWJsZUlkSGVscGVyXCI7XG5pbXBvcnQgdHlwZSBQYWdlQ29udHJvbGxlciBmcm9tIFwic2FwL2ZlL2NvcmUvUGFnZUNvbnRyb2xsZXJcIjtcbmltcG9ydCB7IERpc3BsYXlNb2RlIH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvRGlzcGxheU1vZGVGb3JtYXR0ZXJcIjtcbmltcG9ydCB7IGdldFJlbGF0aXZlUHJvcGVydHlQYXRoIH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvUHJvcGVydHlGb3JtYXR0ZXJzXCI7XG5pbXBvcnQgRmllbGRIZWxwZXIgZnJvbSBcInNhcC9mZS9tYWNyb3MvZmllbGQvRmllbGRIZWxwZXJcIjtcbmltcG9ydCB7IGdlbmVyYXRlSUQgfSBmcm9tIFwic2FwL2ZlL21hY3Jvcy9pbnRlcm5hbC92YWx1ZWhlbHAvVmFsdWVIZWxwVGVtcGxhdGluZ1wiO1xuaW1wb3J0IHR5cGUgQ29udHJvbCBmcm9tIFwic2FwL3VpL2NvcmUvQ29udHJvbFwiO1xuaW1wb3J0IHR5cGUgUmVzb3VyY2VNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL3Jlc291cmNlL1Jlc291cmNlTW9kZWxcIjtcblxuY29uc3QgTlNfTUFDUk9EQVRBID0gXCJodHRwOi8vc2NoZW1hcy5zYXAuY29tL3NhcHVpNS9leHRlbnNpb24vc2FwLnVpLmNvcmUuQ3VzdG9tRGF0YS8xXCI7XG5cbmV4cG9ydCB0eXBlIFByb3BlcnR5SW5mbyA9IHtcblx0YWRkaXRpb25hbExhYmVscz86IHN0cmluZ1tdO1xuXHRjYXNlU2Vuc2l0aXZlPzogYm9vbGVhbjtcblx0ZGVzY3JpcHRpb24/OiBzdHJpbmc7XG5cdGRlc2NyaXB0aW9uUHJvcGVydHk/OiBzdHJpbmc7XG5cdGV4cG9ydFNldHRpbmdzPzogQ29sdW1uRXhwb3J0U2V0dGluZ3MgfCBudWxsO1xuXHRmaWx0ZXJhYmxlPzogYm9vbGVhbjtcblx0Z3JvdXA/OiBzdHJpbmc7XG5cdGdyb3VwYWJsZT86IGJvb2xlYW47XG5cdGdyb3VwTGFiZWw/OiBzdHJpbmc7XG5cdGtleT86IGJvb2xlYW47XG5cdGxhYmVsPzogc3RyaW5nO1xuXHRtYXhDb25kaXRpb25zPzogbnVtYmVyO1xuXHRtZXRhZGF0YVBhdGg6IHN0cmluZztcblx0bW9kZT86IERpc3BsYXlNb2RlO1xuXHRuYW1lOiBzdHJpbmc7XG5cdHBhdGg/OiBzdHJpbmc7XG5cdHByb3BlcnR5SW5mb3M/OiBzdHJpbmdbXTtcblx0cmVsYXRpdmVQYXRoPzogc3RyaW5nO1xuXHRzb3J0YWJsZT86IGJvb2xlYW47XG5cdHNvcnREaXJlY3Rpb24/OiBzdHJpbmc7XG5cdHRleHQ/OiBzdHJpbmc7XG5cdHRvb2x0aXA/OiBzdHJpbmc7XG5cdHR5cGVDb25maWc6IGNvbmZpZ1R5cGU7XG5cdHVuaXQ/OiBzdHJpbmc7XG5cdHZhbHVlUHJvcGVydHk/OiBzdHJpbmc7XG5cdHZpc2libGU6IGJvb2xlYW47XG5cdHZpc3VhbFNldHRpbmdzPzogVmlzdWFsU2V0dGluZ3M7XG5cdGV4cG9ydERhdGFQb2ludFRhcmdldFZhbHVlPzogc3RyaW5nO1xuXHRpc1BhcmFtZXRlcj86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY29uc3QgbURlZmF1bHRUeXBlRm9yRWRtVHlwZSA9IHtcblx0XCJFZG0uQm9vbGVhblwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkJvb2xcIlxuXHR9LFxuXHRcIkVkbS5CeXRlXCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiSW50XCJcblx0fSxcblx0XCJFZG0uRGF0ZVwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkRhdGVcIlxuXHR9LFxuXHRcIkVkbS5EYXRlVGltZVwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkRhdGVcIlxuXHR9LFxuXHRcIkVkbS5EYXRlVGltZU9mZnNldFwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkRhdGVUaW1lT2Zmc2V0XCJcblx0fSxcblx0XCJFZG0uRGVjaW1hbFwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkRlY2ltYWxcIlxuXHR9LFxuXHRcIkVkbS5Eb3VibGVcIjoge1xuXHRcdG1vZGVsVHlwZTogXCJGbG9hdFwiXG5cdH0sXG5cdFwiRWRtLkZsb2F0XCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiRmxvYXRcIlxuXHR9LFxuXHRcIkVkbS5HdWlkXCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiR3VpZFwiXG5cdH0sXG5cdFwiRWRtLkludDE2XCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiSW50XCJcblx0fSxcblx0XCJFZG0uSW50MzJcIjoge1xuXHRcdG1vZGVsVHlwZTogXCJJbnRcIlxuXHR9LFxuXHRcIkVkbS5JbnQ2NFwiOiB7XG5cdFx0bW9kZWxUeXBlOiBcIkludFwiXG5cdH0sXG5cdFwiRWRtLlNCeXRlXCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiSW50XCJcblx0fSxcblx0XCJFZG0uU2luZ2xlXCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiRmxvYXRcIlxuXHR9LFxuXHRcIkVkbS5TdHJpbmdcIjoge1xuXHRcdG1vZGVsVHlwZTogXCJTdHJpbmdcIlxuXHR9LFxuXHRcIkVkbS5UaW1lXCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiVGltZU9mRGF5XCJcblx0fSxcblx0XCJFZG0uVGltZU9mRGF5XCI6IHtcblx0XHRtb2RlbFR5cGU6IFwiVGltZU9mRGF5XCJcblx0fSxcblx0XCJFZG0uU3RyZWFtXCI6IHtcblx0XHQvL25vIGNvcnJlc3BvbmRpbmcgbW9kZWxUeXBlIC0gaWdub3JlIGZvciBmaWx0ZXJpbmdcblx0XHRtb2RlbFR5cGU6IHVuZGVmaW5lZFxuXHR9XG59O1xuZnVuY3Rpb24gX3JldHJpZXZlTW9kZWwodGhpczogeyBtb2RlbE5hbWU6IHN0cmluZzsgY29udHJvbDogYW55OyByZXNvbHZlOiBGdW5jdGlvbiB9KSB7XG5cdHRoaXMuY29udHJvbC5kZXRhY2hNb2RlbENvbnRleHRDaGFuZ2UoX3JldHJpZXZlTW9kZWwsIHRoaXMpO1xuXHRjb25zdCBzTW9kZWxOYW1lID0gdGhpcy5tb2RlbE5hbWUsXG5cdFx0b01vZGVsID0gdGhpcy5jb250cm9sLmdldE1vZGVsKHNNb2RlbE5hbWUpO1xuXG5cdGlmIChvTW9kZWwpIHtcblx0XHR0aGlzLnJlc29sdmUob01vZGVsKTtcblx0fSBlbHNlIHtcblx0XHR0aGlzLmNvbnRyb2wuYXR0YWNoTW9kZWxDb250ZXh0Q2hhbmdlKF9yZXRyaWV2ZU1vZGVsLCB0aGlzKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tRGF0YVdpdGhNb2RpZmllcihvQ29udHJvbDogYW55LCBzUHJvcGVydHk6IGFueSwgb01vZGlmaWVyOiBhbnkpIHtcblx0Y29uc3QgYUN1c3RvbURhdGE6IGFueVtdID0gW107XG5cblx0Y29uc3QgYVJldHJpZXZlZEN1c3RvbURhdGEgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoKS50aGVuKFxuXHRcdG9Nb2RpZmllci5nZXRBZ2dyZWdhdGlvbi5iaW5kKG9Nb2RpZmllciwgb0NvbnRyb2wsIFwiY3VzdG9tRGF0YVwiKSBhcyAoKSA9PiBhbnlbXVxuXHQpO1xuXG5cdGNvbnN0IG9Qcm9taXNlID0gYVJldHJpZXZlZEN1c3RvbURhdGEucmVkdWNlKChvUHJldmlvdXNQcm9taXNlOiBQcm9taXNlPHZvaWQ+LCBvQ3VzdG9tRGF0YSkgPT4ge1xuXHRcdHJldHVybiBvUHJldmlvdXNQcm9taXNlLnRoZW4ob01vZGlmaWVyLmdldFByb3BlcnR5LmJpbmQob01vZGlmaWVyLCBvQ3VzdG9tRGF0YSwgXCJrZXlcIikpLnRoZW4oZnVuY3Rpb24gKHNLZXk6IGFueSkge1xuXHRcdFx0aWYgKHNLZXkgPT09IHNQcm9wZXJ0eSkge1xuXHRcdFx0XHRhQ3VzdG9tRGF0YS5wdXNoKG9DdXN0b21EYXRhKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuXHRhd2FpdCBvUHJvbWlzZTtcblxuXHRpZiAoYUN1c3RvbURhdGEubGVuZ3RoID09PSAxKSB7XG5cdFx0cmV0dXJuIG9Nb2RpZmllci5nZXRQcm9wZXJ0eShhQ3VzdG9tRGF0YVswXSwgXCJ2YWx1ZVwiKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG59XG5cbmNvbnN0IERlbGVnYXRlVXRpbCA9IHtcblx0Z2V0TG9jYWxpemVkVGV4dChzVGV4dE9yVG9rZW46IHN0cmluZywgb0NvbnRyb2w6IENvbnRyb2wgfCBQYWdlQ29udHJvbGxlcikge1xuXHRcdGNvbnN0IGFNYXRjaCA9IC97KFtBLVphLXowLTlfLnxAXSspPihbQS1aYS16MC05Xy58XSspfS8uZXhlYyhzVGV4dE9yVG9rZW4pO1xuXHRcdGlmIChhTWF0Y2gpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IG9SZXNvdXJjZUJ1bmRsZSA9IChvQ29udHJvbC5nZXRNb2RlbChhTWF0Y2hbMV0pIGFzIFJlc291cmNlTW9kZWwpLmdldFJlc291cmNlQnVuZGxlKCkgYXMgUmVzb3VyY2VCdW5kbGU7XG5cdFx0XHRcdHJldHVybiBvUmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChhTWF0Y2hbMl0pO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRMb2cuaW5mbyhgVW5hYmxlIHRvIHJldHJpZXZlIGxvY2FsaXplZCB0ZXh0ICR7c1RleHRPclRva2VufWApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gc1RleHRPclRva2VuO1xuXHR9LFxuXHRnZXRDdXN0b21EYXRhKG9Db250cm9sOiBhbnksIHNQcm9wZXJ0eTogYW55LCBvTW9kaWZpZXI/OiBhbnkpIHtcblx0XHQvLyBJZiBNb2RpZmllciBpcyBnaXZlbiwgdGhlIG1ldGhvZCBtdXN0IGV4ZWN1dGUgYXN5bmNocm9ub3VzbHkgYW5kIHJldHVybiBhIFByb21pc2Vcblx0XHRpZiAob01vZGlmaWVyKSB7XG5cdFx0XHRyZXR1cm4gZ2V0Q3VzdG9tRGF0YVdpdGhNb2RpZmllcihvQ29udHJvbCwgc1Byb3BlcnR5LCBvTW9kaWZpZXIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBEZWxlZ2F0ZSBpbnZva2VkIGZyb20gYSBub24tZmxleCBjaGFuZ2UgLSBGaWx0ZXJCYXJEZWxlZ2F0ZS5fYWRkUDEzbkl0ZW0gZm9yIE9QIHRhYmxlIGZpbHRlcmluZywgRmlsdGVyQmFyRGVsZWdhdGUuZmV0Y2hQcm9wZXJ0aWVzIGV0Yy5cblx0XHRcdGlmIChvQ29udHJvbCAmJiBzUHJvcGVydHkpIHtcblx0XHRcdFx0aWYgKG9Db250cm9sIGluc3RhbmNlb2Ygd2luZG93LkVsZW1lbnQpIHtcblx0XHRcdFx0XHRyZXR1cm4gb0NvbnRyb2wuZ2V0QXR0cmlidXRlTlMoTlNfTUFDUk9EQVRBLCBzUHJvcGVydHkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChvQ29udHJvbC5kYXRhIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcblx0XHRcdFx0XHRyZXR1cm4gb0NvbnRyb2wuZGF0YShzUHJvcGVydHkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0fSxcblx0c2V0Q3VzdG9tRGF0YShvQ29udHJvbDogYW55LCBzUHJvcGVydHk6IGFueSwgdlZhbHVlOiBhbnkpIHtcblx0XHRpZiAob0NvbnRyb2wgJiYgc1Byb3BlcnR5KSB7XG5cdFx0XHRpZiAob0NvbnRyb2wgaW5zdGFuY2VvZiB3aW5kb3cuRWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gb0NvbnRyb2wuc2V0QXR0cmlidXRlTlMoTlNfTUFDUk9EQVRBLCBgY3VzdG9tRGF0YToke3NQcm9wZXJ0eX1gLCB2VmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG9Db250cm9sLmRhdGEgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuXHRcdFx0XHRyZXR1cm4gb0NvbnRyb2wuZGF0YShzUHJvcGVydHksIHZWYWx1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRmZXRjaFByb3BlcnRpZXNGb3JFbnRpdHkoc0VudGl0eVNldDogYW55LCBvTWV0YU1vZGVsOiBhbnkpIHtcblx0XHRyZXR1cm4gb01ldGFNb2RlbC5yZXF1ZXN0T2JqZWN0KGAke3NFbnRpdHlTZXR9L2ApO1xuXHR9LFxuXHRmZXRjaEFubm90YXRpb25zRm9yRW50aXR5KHNFbnRpdHlTZXQ6IGFueSwgb01ldGFNb2RlbDogYW55KSB7XG5cdFx0cmV0dXJuIG9NZXRhTW9kZWwucmVxdWVzdE9iamVjdChgJHtzRW50aXR5U2V0fUBgKTtcblx0fSxcblx0ZmV0Y2hNb2RlbChvQ29udHJvbDogYW55KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRjb25zdCBzTW9kZWxOYW1lID0gb0NvbnRyb2wuZ2V0RGVsZWdhdGUoKS5wYXlsb2FkICYmIG9Db250cm9sLmdldERlbGVnYXRlKCkucGF5bG9hZC5tb2RlbE5hbWUsXG5cdFx0XHRcdG9Db250ZXh0ID0geyBtb2RlbE5hbWU6IHNNb2RlbE5hbWUsIGNvbnRyb2w6IG9Db250cm9sLCByZXNvbHZlOiByZXNvbHZlIH07XG5cdFx0XHRfcmV0cmlldmVNb2RlbC5jYWxsKG9Db250ZXh0KTtcblx0XHR9KTtcblx0fSxcblx0bG9hZE1hY3JvTGlicmFyeSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdHNhcC51aS5yZXF1aXJlKFtcInNhcC9mZS9tYWNyb3MvbWFjcm9MaWJyYXJ5XCJdLCBmdW5jdGlvbiAoLyptYWNyb0xpYnJhcnkqLykge1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSxcblx0dGVtcGxhdGVDb250cm9sRnJhZ21lbnQoc0ZyYWdtZW50TmFtZTogYW55LCBvUHJlcHJvY2Vzc29yU2V0dGluZ3M6IGFueSwgb09wdGlvbnM6IGFueSwgb01vZGlmaWVyPzogYW55KSB7XG5cdFx0cmV0dXJuIENvbW1vblV0aWxzLnRlbXBsYXRlQ29udHJvbEZyYWdtZW50KHNGcmFnbWVudE5hbWUsIG9QcmVwcm9jZXNzb3JTZXR0aW5ncywgb09wdGlvbnMsIG9Nb2RpZmllcik7XG5cdH0sXG5cdGRvZXNWYWx1ZUhlbHBFeGlzdChtUGFyYW1ldGVyczogYW55KSB7XG5cdFx0Y29uc3Qgc1Byb3BlcnR5TmFtZSA9IG1QYXJhbWV0ZXJzLnNQcm9wZXJ0eU5hbWUgfHwgXCJcIjtcblx0XHRjb25zdCBzVmFsdWVIZWxwVHlwZSA9IG1QYXJhbWV0ZXJzLnNWYWx1ZUhlbHBUeXBlIHx8IFwiXCI7XG5cdFx0Y29uc3Qgb01ldGFNb2RlbCA9IG1QYXJhbWV0ZXJzLm9NZXRhTW9kZWw7XG5cdFx0Y29uc3Qgb01vZGlmaWVyID0gbVBhcmFtZXRlcnMub01vZGlmaWVyO1xuXHRcdGNvbnN0IHNPcmlnaW5hbFByb3BlcnR5ID0gYCR7bVBhcmFtZXRlcnMuc0JpbmRpbmdQYXRofS8ke3NQcm9wZXJ0eU5hbWV9YDtcblx0XHRjb25zdCBvUHJvcGVydHlDb250ZXh0ID0gb01ldGFNb2RlbC5jcmVhdGVCaW5kaW5nQ29udGV4dChzT3JpZ2luYWxQcm9wZXJ0eSk7XG5cdFx0bGV0IHNWYWx1ZUhlbHBQcm9wZXJ0eSA9IEZpZWxkSGVscGVyLnZhbHVlSGVscFByb3BlcnR5KG9Qcm9wZXJ0eUNvbnRleHQpO1xuXHRcdGNvbnN0IGJJc0Fic29sdXRlID0gbVBhcmFtZXRlcnMuc0JpbmRpbmdQYXRoICYmIG1QYXJhbWV0ZXJzLnNCaW5kaW5nUGF0aC5pbmRleE9mKFwiL1wiKSA9PT0gMDtcblxuXHRcdC8vIHVuaXQvY3VycmVuY3lcblx0XHRpZiAoc1ZhbHVlSGVscFByb3BlcnR5LmluZGV4T2YoXCIkUGF0aFwiKSA+IC0xKSB7XG5cdFx0XHRzVmFsdWVIZWxwUHJvcGVydHkgPSBvTWV0YU1vZGVsLmdldE9iamVjdChzVmFsdWVIZWxwUHJvcGVydHkpO1xuXHRcdH1cblx0XHRpZiAoYklzQWJzb2x1dGUgJiYgc1ZhbHVlSGVscFByb3BlcnR5LmluZGV4T2YoXCIvXCIpICE9PSAwKSB7XG5cdFx0XHRzVmFsdWVIZWxwUHJvcGVydHkgPSBgJHttUGFyYW1ldGVycy5zQmluZGluZ1BhdGh9LyR7c1ZhbHVlSGVscFByb3BlcnR5fWA7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc0dlbmVyYXRlZElkID0gZ2VuZXJhdGVJRChcblx0XHRcdG1QYXJhbWV0ZXJzLmZsZXhJZCxcblx0XHRcdGdlbmVyYXRlKFtvTW9kaWZpZXIgPyBvTW9kaWZpZXIuZ2V0SWQobVBhcmFtZXRlcnMub0NvbnRyb2wpIDogbVBhcmFtZXRlcnMub0NvbnRyb2wuZ2V0SWQoKSwgc1ZhbHVlSGVscFR5cGVdKSxcblx0XHRcdGdldFJlbGF0aXZlUHJvcGVydHlQYXRoKG9Qcm9wZXJ0eUNvbnRleHQuZ2V0UHJvcGVydHkoc09yaWdpbmFsUHJvcGVydHkpLCB7XG5cdFx0XHRcdGNvbnRleHQ6IHtcblx0XHRcdFx0XHRnZXRNb2RlbDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG1QYXJhbWV0ZXJzLm9NZXRhTW9kZWw7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRnZXRQYXRoOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc09yaWdpbmFsUHJvcGVydHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGFzIGFueVxuXHRcdFx0fSksXG5cdFx0XHRnZXRSZWxhdGl2ZVByb3BlcnR5UGF0aChvUHJvcGVydHlDb250ZXh0LmdldFByb3BlcnR5KHNWYWx1ZUhlbHBQcm9wZXJ0eSksIHtcblx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdGdldE1vZGVsOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbVBhcmFtZXRlcnMub01ldGFNb2RlbDtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGdldFBhdGg6ICgpID0+IHtcblx0XHRcdFx0XHRcdHJldHVybiBzVmFsdWVIZWxwUHJvcGVydHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGFzIGFueVxuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdFx0XHQudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmIChvTW9kaWZpZXIpIHtcblx0XHRcdFx0XHRyZXR1cm4gb01vZGlmaWVyLmdldEFnZ3JlZ2F0aW9uKG1QYXJhbWV0ZXJzLm9Db250cm9sLCBcImRlcGVuZGVudHNcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1QYXJhbWV0ZXJzLm9Db250cm9sLmdldEFnZ3JlZ2F0aW9uKFwiZGVwZW5kZW50c1wiKTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbihmdW5jdGlvbiAoYURlcGVuZGVudHM6IGFueSkge1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFxuXHRcdFx0XHRcdGFEZXBlbmRlbnRzICYmXG5cdFx0XHRcdFx0XHRhRGVwZW5kZW50cy5zb21lKGZ1bmN0aW9uIChvRGVwZW5kZW50OiBhbnkpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG9Nb2RpZmllciA/IG9Nb2RpZmllci5nZXRJZChvRGVwZW5kZW50KSA9PT0gc0dlbmVyYXRlZElkIDogb0RlcGVuZGVudC5nZXRJZCgpID09PSBzR2VuZXJhdGVkSWQ7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdFx0fSk7XG5cdH0sXG5cdGlzVmFsdWVIZWxwUmVxdWlyZWQobVBhcmFtZXRlcnM6IGFueSwgYkluRmlsdGVyRmllbGQ/OiBib29sZWFuKSB7XG5cdFx0Y29uc3Qgc1Byb3BlcnR5TmFtZSA9IG1QYXJhbWV0ZXJzLnNQcm9wZXJ0eU5hbWUgfHwgXCJcIixcblx0XHRcdG9NZXRhTW9kZWwgPSBtUGFyYW1ldGVycy5vTWV0YU1vZGVsLFxuXHRcdFx0c1Byb3BlcnR5ID0gYCR7bVBhcmFtZXRlcnMuc0JpbmRpbmdQYXRofS8ke3NQcm9wZXJ0eU5hbWV9YCxcblx0XHRcdG9Qcm9wZXJ0eUNvbnRleHQgPSBvTWV0YU1vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KHNQcm9wZXJ0eSksXG5cdFx0XHRzVmFsdWVIZWxwUHJvcGVydHkgPSBGaWVsZEhlbHBlci52YWx1ZUhlbHBQcm9wZXJ0eShvUHJvcGVydHlDb250ZXh0LCBiSW5GaWx0ZXJGaWVsZCk7XG5cblx0XHRyZXR1cm4gdGhpcy5nZXRDdXN0b21EYXRhKG1QYXJhbWV0ZXJzLm9Db250cm9sLCBcImRpc3BsYXlNb2RlUHJvcGVydHlCaW5kaW5nXCIsIG1QYXJhbWV0ZXJzLm9Nb2RpZmllcilcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChiUmVhZE9ubHk6IGFueSkge1xuXHRcdFx0XHQvLyBDaGVjayB3aGV0aGVyIHRoZSBjb250cm9sIGlzIHJlYWQtb25seS4gSWYgeWVzLCBubyBuZWVkIG9mIGEgdmFsdWUgaGVscC5cblx0XHRcdFx0YlJlYWRPbmx5ID0gdHlwZW9mIGJSZWFkT25seSA9PT0gXCJib29sZWFuXCIgPyBiUmVhZE9ubHkgOiBiUmVhZE9ubHkgPT09IFwidHJ1ZVwiO1xuXHRcdFx0XHRpZiAoYlJlYWRPbmx5KSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIEVsc2UsIGNoZWNrIHdoZXRoZXIgVmFsdWUgSGVscCByZWxldmFudCBhbm5vdGF0aW9uIGV4aXN0cyBmb3IgdGhlIHByb3BlcnR5LlxuXHRcdFx0XHQvLyBUT0RPIHVzZSBQcm9wZXJ0eUZvcm1hdHRlci5oYXNWYWx1ZUhlbHAgKCkgPT4gaWYgZG9pbmcgc28sIFFVbml0IHRlc3RzIGZhaWwgZHVlIHRvIG1vY2tlZCBtb2RlbCBpbXBsZW1lbnRhdGlvblxuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRcdG9NZXRhTW9kZWwucmVxdWVzdE9iamVjdChgJHtzVmFsdWVIZWxwUHJvcGVydHl9QGNvbS5zYXAudm9jYWJ1bGFyaWVzLkNvbW1vbi52MS5WYWx1ZUxpc3RXaXRoRml4ZWRWYWx1ZXNgKSxcblx0XHRcdFx0XHRvTWV0YU1vZGVsLnJlcXVlc3RPYmplY3QoYCR7c1ZhbHVlSGVscFByb3BlcnR5fUBjb20uc2FwLnZvY2FidWxhcmllcy5Db21tb24udjEuVmFsdWVMaXN0UmVmZXJlbmNlc2ApLFxuXHRcdFx0XHRcdG9NZXRhTW9kZWwucmVxdWVzdE9iamVjdChgJHtzVmFsdWVIZWxwUHJvcGVydHl9QGNvbS5zYXAudm9jYWJ1bGFyaWVzLkNvbW1vbi52MS5WYWx1ZUxpc3RNYXBwaW5nYCksXG5cdFx0XHRcdFx0b01ldGFNb2RlbC5yZXF1ZXN0T2JqZWN0KGAke3NWYWx1ZUhlbHBQcm9wZXJ0eX1AY29tLnNhcC52b2NhYnVsYXJpZXMuQ29tbW9uLnYxLlZhbHVlTGlzdGApXG5cdFx0XHRcdF0pO1xuXHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChhUmVzdWx0czogYW55W10pIHtcblx0XHRcdFx0cmV0dXJuICEhYVJlc3VsdHNbMF0gfHwgISFhUmVzdWx0c1sxXSB8fCAhIWFSZXN1bHRzWzJdIHx8ICEhYVJlc3VsdHNbM107XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uIChvRXJyb3I6IGFueSkge1xuXHRcdFx0XHRMb2cud2FybmluZyhcIkVycm9yIHdoaWxlIHJldHJpZXZpbmcgY3VzdG9tIGRhdGEgLyB2YWx1ZSBsaXN0IGFubm90YXRpb24gdmFsdWVzXCIsIG9FcnJvcik7XG5cdFx0XHR9KTtcblx0fSxcblx0aXNUeXBlRmlsdGVyYWJsZShzVHlwZToga2V5b2YgdHlwZW9mIG1EZWZhdWx0VHlwZUZvckVkbVR5cGUpIHtcblx0XHRyZXR1cm4gc1R5cGUgJiYgc1R5cGUgaW4gbURlZmF1bHRUeXBlRm9yRWRtVHlwZSAmJiAhIW1EZWZhdWx0VHlwZUZvckVkbVR5cGVbc1R5cGVdLm1vZGVsVHlwZTtcblx0fSxcblx0Z2V0TW9kZWxUeXBlKHNUeXBlOiBrZXlvZiB0eXBlb2YgbURlZmF1bHRUeXBlRm9yRWRtVHlwZSkge1xuXHRcdHJldHVybiBzVHlwZSAmJiBzVHlwZSBpbiBtRGVmYXVsdFR5cGVGb3JFZG1UeXBlICYmIG1EZWZhdWx0VHlwZUZvckVkbVR5cGVbc1R5cGVdLm1vZGVsVHlwZTtcblx0fSxcblx0aXNNdWx0aVZhbHVlKG9Qcm9wZXJ0eTogYW55KSB7XG5cdFx0bGV0IGJJc011bHRpVmFsdWUgPSB0cnVlO1xuXHRcdC8vU2luZ2xlVmFsdWUgfCBNdWx0aVZhbHVlIHwgU2luZ2xlUmFuZ2UgfCBNdWx0aVJhbmdlIHwgU2VhcmNoRXhwcmVzc2lvbiB8IE11bHRpUmFuZ2VPclNlYXJjaEV4cHJlc3Npb25cblx0XHRzd2l0Y2ggKG9Qcm9wZXJ0eS5maWx0ZXJFeHByZXNzaW9uKSB7XG5cdFx0XHRjYXNlIFwiU2VhcmNoRXhwcmVzc2lvblwiOlxuXHRcdFx0Y2FzZSBcIlNpbmdsZVJhbmdlXCI6XG5cdFx0XHRjYXNlIFwiU2luZ2xlVmFsdWVcIjpcblx0XHRcdFx0YklzTXVsdGlWYWx1ZSA9IGZhbHNlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRpZiAob1Byb3BlcnR5LnR5cGUgJiYgb1Byb3BlcnR5LnR5cGUuaW5kZXhPZihcIkJvb2xlYW5cIikgPiAwKSB7XG5cdFx0XHRiSXNNdWx0aVZhbHVlID0gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiBiSXNNdWx0aVZhbHVlO1xuXHR9XG59O1xuZXhwb3J0IGRlZmF1bHQgRGVsZWdhdGVVdGlsO1xuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7Ozs7OztNQW1IZUEseUJBQXlCLGFBQUNDLFFBQWEsRUFBRUMsU0FBYyxFQUFFQyxTQUFjO0lBQUEsSUFBRTtNQUN2RixJQUFNQyxXQUFrQixHQUFHLEVBQUU7TUFBQyx1QkFFS0MsT0FBTyxDQUFDQyxPQUFPLEVBQUUsQ0FBQ0MsSUFBSSxDQUN4REosU0FBUyxDQUFDSyxjQUFjLENBQUNDLElBQUksQ0FBQ04sU0FBUyxFQUFFRixRQUFRLEVBQUUsWUFBWSxDQUFDLENBQ2hFLGlCQUZLUyxvQkFBb0I7UUFJMUIsSUFBTUMsUUFBUSxHQUFHRCxvQkFBb0IsQ0FBQ0UsTUFBTSxDQUFDLFVBQUNDLGdCQUErQixFQUFFQyxXQUFXLEVBQUs7VUFD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