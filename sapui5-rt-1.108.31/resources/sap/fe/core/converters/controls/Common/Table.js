/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/PropertyHelper","sap/fe/macros/internal/helpers/ActionHelper","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","../../ManifestSettings","./Criticality","./table/StandardActions"],function(e,t,n,i,a,o,r,l,v,u,d,s,c,f,p,g,m,y,b,h,T,I){"use strict";var D={};var P=I.isInDisplayMode;var A=I.isDraftOrStickySupported;var F=I.getStandardActionPaste;var S=I.getStandardActionMassEdit;var C=I.getStandardActionDelete;var O=I.getStandardActionCreate;var E=I.getRestrictions;var U=I.getMassEditVisibility;var M=I.getInsertUpdateActionsTemplating;var x=I.getDeleteVisibility;var w=I.getCreationRow;var N=I.getCreateVisibility;var $=I.generateStandardActionsContext;var V=T.getMessageTypeFromCriticalityType;var j=h.VisualizationType;var k=h.VariantManagementType;var L=h.TemplateType;var R=h.SelectionMode;var H=h.Importance;var B=h.HorizontalAlign;var z=h.CreationMode;var G=h.AvailabilityType;var K=h.ActionType;var W=b.getTableID;var q=y.isReferencePropertyStaticallyHidden;var Q=m.AggregationHelper;var _=p.isProperty;var Y=p.isPathExpression;var J=p.isNavigationProperty;var X=p.getTargetValueOnDataPoint;var Z=p.getAssociatedUnitProperty;var ee=p.getAssociatedTimezoneProperty;var te=p.getAssociatedCurrencyProperty;var ne=f.getNonSortablePropertiesRestrictions;var ie=c.getDisplayMode;var ae=c.EDM_TYPE_MAPPING;var oe=s.isPathUpdatable;var re=s.isPathSearchable;var le=s.isPathDeletable;var ve=s.getTargetObjectPath;var ue=s.enhanceDataModelPath;var de=d.replaceSpecialChars;var se=v.resolveBindingString;var ce=v.pathInModel;var fe=v.or;var pe=v.not;var ge=v.isConstant;var me=v.ifElse;var ye=v.getExpressionFromAnnotation;var be=v.formatResult;var he=v.equal;var Te=v.constant;var Ie=v.compileExpression;var De=v.and;var Pe=l.MessageType;var Ae=o.KeyHelper;var Fe=a.IssueType;var Se=a.IssueSeverity;var Ce=a.IssueCategoryType;var Oe=a.IssueCategory;var Ee=i.Placement;var Ue=i.insertCustomElements;var Me=n.UI;var xe=n.Entity;var we=t.removeDuplicateActions;var Ne=t.isActionNavigable;var $e=t.getActionsFromManifest;var Ve=e.isDataFieldTypes;var je=e.isDataFieldForActionAbstract;var ke=e.isDataFieldAlwaysHidden;var Le=e.getSemanticObjectPath;var Re=e.getDataFieldDataType;var He=e.collectRelatedPropertiesRecursively;var Be=e.collectRelatedProperties;function ze(e,t){return We(e)||Ke(e,t)||tt(e,t)||Ge()}function Ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ke(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,r,l=[],v=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;v=!1}else for(;!(v=(i=o.call(n)).done)&&(l.push(i.value),l.length!==t);v=!0){}}catch(e){u=!0,a=e}finally{try{if(!v&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(u)throw a}}return l}}function We(e){if(Array.isArray(e))return e}function qe(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tt(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var i=0;var a=function(){};return{s:a,n:function(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,r=false,l;return{s:function(){n=n.call(e)},n:function(){var e=n.next();o=e.done;return e},e:function(e){r=true;l=e},f:function(){try{if(!o&&n.return!=null)n.return()}finally{if(r)throw l}}}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach(function(t){Ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ye(e,t,n){t=Je(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function Je(e){var t=Xe(e,"string");return typeof t==="symbol"?t:String(t)}function Xe(e,t){if(typeof e!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var i=n.call(e,t||"default");if(typeof i!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ze(e){return it(e)||nt(e)||tt(e)||et()}function et(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tt(e,t){if(!e)return;if(typeof e==="string")return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}function nt(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function it(e){if(Array.isArray(e))return at(e)}function at(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,i=new Array(t);n<t;n++){i[n]=e[n]}return i}var ot;(function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot"})(ot||(ot={}));function rt(e,t,n,i){var a=Ft(e,t,n);var o=a.tableActions;var r=a.hiddenTableActions;var l=$e(n.getManifestControlConfiguration(t).actions,n,o,i,true,r);var v=Ue(o,l.actions,{isNavigable:"overwrite",enableOnSelect:"overwrite",enableAutoScroll:"overwrite",enabled:"overwrite",visible:"overwrite",defaultValuesExtensionFunction:"overwrite",command:"overwrite"});return{actions:v,commandActions:l.commandActions}}D.getTableActions=rt;function lt(e,t,n,i){var a=tn(e,t,n);var o=on(n.getManifestControlConfiguration(t).columns,a,n,n.getAnnotationEntityType(e),i);return Ue(a,o,{width:"overwrite",importance:"overwrite",horizontalAlign:"overwrite",availability:"overwrite",isNavigable:"overwrite",settings:"overwrite",formatOptions:"overwrite"})}D.getTableColumns=lt;var vt=function(e,t,n){var i=new Q(e,n);function a(e){return t.find(function(t){var n=t;return n.propertyInfos===undefined&&n.relativePath===e})}if(!i.isAnalyticsSupported()){return undefined}var o=new Set;t.forEach(function(e){var t=e;if(t.unit){o.add(t.unit)}});var r=i.getCustomAggregateDefinitions();var l={};r.forEach(function(e){var t=i._entityType.entityProperties.find(function(t){return t.name===e.qualifier});if(t){var n,a;var o=(n=e.annotations)===null||n===void 0?void 0:(a=n.Aggregation)===null||a===void 0?void 0:a.ContextDefiningProperties;l[t.name]=o?o.map(function(e){return e.value}):[]}});var v={};t.forEach(function(e){var t=e;if(t.propertyInfos===undefined&&t.relativePath){var n=l[t.relativePath];if(n&&!o.has(t.name)&&!t.isDataPointFakeTargetProperty){v[t.name]={defaultAggregate:{},relativePath:t.relativePath};var i=[];n.forEach(function(e){var t=a(e);if(t){i.push(t.name)}});if(i.length){v[t.name].defaultAggregate.contextDefiningProperties=i}}}});return v};D.getAggregateDefinitionsFromEntityType=vt;function ut(e,t,n,i){if(e.control.type==="AnalyticalTable"){var a=vt(t,e.columns,n),o=new Q(t,n);if(a){e.enableAnalytics=true;e.aggregates=a;var r=o.getAllowedTransformations();e.enableAnalyticsSearch=r?r.indexOf("search")>=0:true;e.annotation.groupConditions=dn(i,e.columns,e.control.type);e.annotation.aggregateConditions=sn(i,e.columns)}e.control.type="GridTable"}else if(e.control.type==="ResponsiveTable"){e.annotation.groupConditions=dn(i,e.columns,e.control.type)}}function dt(e,t){var n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){var i=n.getNavigationConfiguration(t);if(Object.keys(i).length>0){return t}}var a=e.getDataModelObjectPath();var o=e.getContextPath();var r=n.getNavigationConfiguration(o);if(r&&Object.keys(r).length>0){return o}return a.targetEntitySet?a.targetEntitySet.name:a.startingEntitySet.name}function st(e,t){function n(e){return t.find(function(t){var n=t;return n.propertyInfos===undefined&&n.relativePath===e})}t.forEach(function(t){var i=t;if(i.propertyInfos===undefined&&i.relativePath){var a=e.entityProperties.find(function(e){return e.name===i.relativePath});if(a){var o,r,l;var v=te(a)||Z(a);var u=ee(a);var d=a===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(r=o.Common)===null||r===void 0?void 0:r.Timezone;if(v){var s=n(v.name);i.unit=s===null||s===void 0?void 0:s.name}else{var c,f,p,g;var m=(a===null||a===void 0?void 0:(c=a.annotations)===null||c===void 0?void 0:(f=c.Measures)===null||f===void 0?void 0:f.ISOCurrency)||(a===null||a===void 0?void 0:(p=a.annotations)===null||p===void 0?void 0:(g=p.Measures)===null||g===void 0?void 0:g.Unit);if(m){i.unitText="".concat(m)}}if(u){var y=n(u.name);i.timezone=y===null||y===void 0?void 0:y.name}else if(d){i.timezoneText=d.toString()}var b=ie(a),h=(l=a.annotations.Common)===null||l===void 0?void 0:l.Text;if(Y(h)&&b!=="Value"){var T=n(h.path);if(T&&T.name!==i.name){i.textArrangement={textProperty:T.name,mode:b}}}}}})}D.updateLinkedProperties=st;function ct(e){var t,n,i,a,o,r,l,v,u,d,s,c,f;var p=(t=e.getAnnotationEntityType())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:(a=i.HeaderInfo)===null||a===void 0?void 0:(o=a.Title)===null||o===void 0?void 0:(r=o.Value)===null||r===void 0?void 0:r.path;var g=(l=e.getAnnotationEntityType())===null||l===void 0?void 0:(v=l.annotations)===null||v===void 0?void 0:(u=v.Common)===null||u===void 0?void 0:u.SemanticKey;var m=e===null||e===void 0?void 0:(d=e.getAnnotationEntityType())===null||d===void 0?void 0:(s=d.annotations)===null||s===void 0?void 0:(c=s.UI)===null||c===void 0?void 0:(f=c.HeaderInfo)===null||f===void 0?void 0:f.TypeName;var y=[];if(g){g.forEach(function(e){y.push(e.value)})}return{headerInfoTitlePath:p,semanticKeyColumns:y,headerInfoTypeName:m}}function ft(e,t,n,i,a,o){var r=Cn(e,t,n,a);var l=pn(t),v=l.navigationPropertyPath;var u=dt(n,v);var d=n.getManifestWrapper().getNavigationConfiguration(u);var s=lt(e,t,n,d);var c=gt(e,n);var f=ct(n);var p=rt(e,t,n,d);var g={type:j.Table,annotation:cn(e,t,n,r,s,i,o),control:r,actions:we(p.actions),commandActions:p.commandActions,columns:s,operationAvailableMap:JSON.stringify(c),operationAvailableProperties:yt(c,n),headerInfoTitle:f.headerInfoTitlePath,semanticKeys:f.semanticKeyColumns,headerInfoTypeName:f.headerInfoTypeName};st(n.getAnnotationEntityType(e),s);ut(g,n.getAnnotationEntityType(e),n,i);return g}D.createTableVisualization=ft;function pt(e){var t=Cn(undefined,"",e,false);var n=Et({},e.getEntityType(),[],[],e,t.type,[]);var i=gt(undefined,e);var a=ct(e);var o={type:j.Table,annotation:cn(undefined,"",e,t,n),control:t,actions:[],columns:n,operationAvailableMap:JSON.stringify(i),operationAvailableProperties:yt(i,e),headerInfoTitle:a.headerInfoTitlePath,semanticKeys:a.semanticKeyColumns,headerInfoTypeName:a.headerInfoTypeName};st(e.getEntityType(),n);ut(o,e.getEntityType(),e);return o}D.createDefaultTableVisualization=pt;function gt(e,t){return g.getOperationAvailableMap(e,"table",t)}function mt(e){var t,n,i;var a=E(e);var o=e.getEntitySet();var r=a.isUpdatable;var l=!ge(r.expression)&&r.navigationExpression._type==="Unresolvable";var v=o===null||o===void 0?void 0:(t=o.annotations.Capabilities)===null||t===void 0?void 0:(n=t.UpdateRestrictions)===null||n===void 0?void 0:(i=n.Updatable)===null||i===void 0?void 0:i.path;return l?v:""}function yt(e,t){var n=new Set;for(var i in e){var a=e[i];if(a===null){n.add(i)}else if(typeof a==="string"){n.add(a)}}if(n.size){var o,r,l,v,u;var d=t.getEntityType();var s=(o=d.annotations)===null||o===void 0?void 0:(r=o.UI)===null||r===void 0?void 0:(l=r.HeaderInfo)===null||l===void 0?void 0:(v=l.Title)===null||v===void 0?void 0:(u=v.Value)===null||u===void 0?void 0:u.path;if(s){n.add(s)}}return Array.from(n).join(",")}function bt(e,t,n,i){var a=[];e.forEach(function(e){var o,r;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e!==null&&e!==void 0&&(o=e.ActionTarget)!==null&&o!==void 0&&o.isBound&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&(e===null||e===void 0?void 0:(r=e.Inline)===null||r===void 0?void 0:r.valueOf())!==true){var l,v,u;if(typeof((l=e.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:(u=v.Hidden)===null||u===void 0?void 0:u.valueOf())==="object"){a.push(he(ht(e,n,i),false))}}});return a}function ht(e,t,n){var i;var a;if((e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"||(e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var o,r;a=e===null||e===void 0?void 0:(o=e.annotations)===null||o===void 0?void 0:(r=o.UI)===null||r===void 0?void 0:r.Hidden}else{a=e===null||e===void 0?void 0:e.visible}var l;if((i=a)!==null&&i!==void 0&&i.path){l=a.path}else{l=a}if(l){if(e!==null&&e!==void 0&&e.visible){l=l.substring(1,l.length-1)}if(l.indexOf("/")>0){var v;var u=l.split("/");var d=u[0];if((t===null||t===void 0?void 0:(v=t.targetObject)===null||v===void 0?void 0:v._type)==="NavigationProperty"&&t.targetObject.partner===d){return ce(u.slice(1).join("/"))}else{return Te(true)}}else if(n){return ce(l)}else{return Te(true)}}return Te(true)}function Tt(e,t){return e.some(function(e){var n,i,a,o,r,l,v;if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(e===null||e===void 0?void 0:(n=e.Inline)===null||n===void 0?void 0:n.valueOf())!==true&&(((i=e.annotations)===null||i===void 0?void 0:(a=i.UI)===null||a===void 0?void 0:(o=a.Hidden)===null||o===void 0?void 0:o.valueOf())===false||((r=e.annotations)===null||r===void 0?void 0:(l=r.UI)===null||l===void 0?void 0:(v=l.Hidden)===null||v===void 0?void 0:v.valueOf())===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var u;return(e===null||e===void 0?void 0:(u=e.ActionTarget)===null||u===void 0?void 0:u.isBound)&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return e.RequiresContext}}return false})}function It(e){return Object.keys(e).some(function(t){var n;var i=e[t];if(i.requiresSelection&&((n=i.visible)===null||n===void 0?void 0:n.toString())==="true"){return true}return false})}function Dt(e){var t=[];if(e){Object.keys(e).forEach(function(n){var i=e[n];if(i.requiresSelection===true&&i.visible!==undefined){if(typeof i.visible==="string"){var a;t.push(se(i===null||i===void 0?void 0:(a=i.visible)===null||a===void 0?void 0:a.valueOf()))}}})}return t}function Pt(e){var t=le(e.getDataModelObjectPath());var n=oe(e.getDataModelObjectPath());return{isDeletable:!(ge(t)&&t.value===false),isUpdatable:!(ge(n)&&n.value===false)}}D.getCapabilityRestriction=Pt;function At(e,t,n,i,a,o){var r;var l=arguments.length>6&&arguments[6]!==undefined?arguments[6]:Te(false);if(!e){return R.None}var v=n.getManifestControlConfiguration(t);var u=(r=v.tableSettings)===null||r===void 0?void 0:r.selectionMode;var d=[],s=[];var c=$e(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);var f,p;if(n.getTemplateType()===L.ObjectPage){f=le(n.getDataModelObjectPath());p=f?Ie(f,true):f}var g=!ge(l)||l.value!==false;if(u&&u===R.None&&o){if(n.getTemplateType()===L.ObjectPage&&g){return Ie(me(De(Me.IsEditable,l),Te("Multi"),me(o,Te("Multi"),Te("None"))))}else if(g){return R.Multi}return Ie(me(o,Te("Multi"),Te("None")))}if(!u||u===R.Auto){u=R.Multi}if(g){u=u===R.Single?R.Single:R.Multi}if(Tt(e,n.getEntityType())||It(c.actions)){return u}d=bt(e,n.getEntityType(),n.getDataModelObjectPath(),i);s=Dt(c.actions);if(d.length===0&&s.length===0&&(o||g)){if(!i){if(a.isDeletable||p!=="false"||g){var m=fe(o||true,l);return Ie(me(De(Me.IsEditable,m),Te(u),Te(R.None)))}else{return R.None}}else if(g){return u}else if(a.isDeletable&&o){return Ie(me(o,Te(u),Te("None")))}else{return R.None}}else if(!i){if(a.isDeletable||p!=="false"||g){var y=me(g&&!a.isDeletable,l,Te(true));return Ie(me(De(Me.IsEditable,y),Te(u),me(fe.apply(void 0,Ze(d.concat(s))),Te(u),Te(R.None))))}else{return Ie(me(fe.apply(void 0,Ze(d.concat(s))),Te(u),Te(R.None)))}}else if(a.isDeletable||g){return u}else{return Ie(me(fe.apply(void 0,Ze(d.concat(s)).concat([l])),Te(u),Te(R.None)))}}D.getSelectionMode=At;function Ft(e,t,n){var i=[];var a=[];if(e){e.forEach(function(e){var t,o,r,l,v,u,d,s,c,f;var p;if(je(e)&&!(((t=e.annotations)===null||t===void 0?void 0:(o=t.UI)===null||o===void 0?void 0:(r=o.Hidden)===null||r===void 0?void 0:r.valueOf())===true)&&!e.Inline&&!e.Determining){var g=Ae.generateKeyFromDataField(e);switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":p={type:K.DataFieldForAction,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:g,visible:Ie(pe(he(ye((l=e.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:v.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),isNavigable:true};break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":p={type:K.DataFieldForIntentBasedNavigation,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:g,visible:Ie(pe(he(ye((u=e.annotations)===null||u===void 0?void 0:(d=u.UI)===null||d===void 0?void 0:d.Hidden,[],undefined,n.getRelativeModelPathFunction()),true)))};break;default:break}}else if(((s=e.annotations)===null||s===void 0?void 0:(c=s.UI)===null||c===void 0?void 0:(f=c.Hidden)===null||f===void 0?void 0:f.valueOf())===true){a.push({type:K.Default,key:Ae.generateKeyFromDataField(e)})}if(p){i.push(p)}})}return{tableActions:i,hiddenTableActions:a}}function St(e,t,n){var i=Pe.None;if(e){if(typeof e==="object"){i=ye(e)}else{i=V(e)}}var a=[];n===null||n===void 0?void 0:n.keys.forEach(function(e){if(e.name!=="IsActiveEntity"){a.push(ce(e.name,undefined))}});return be([i,ce("filteredMessages","internal"),t&&xe.HasActive,t&&xe.IsActive,"".concat(t)].concat(a),r.rowHighlighting,n)}function Ct(e,t,n,i,a){var o;var r=(i===null||i===void 0?void 0:i.create)||(i===null||i===void 0?void 0:i.detail);var l=n.getManifestControlConfiguration(a);var v=l&&l.tableSettings||{};if(r!==null&&r!==void 0&&r.outbound&&r.outboundDetail&&i!==null&&i!==void 0&&i.create){return{mode:"External",outbound:r.outbound,outboundDetail:r.outboundDetail,navigationSettings:i}}var u;if(e){var d,s,c;var f=(d=n.getEntitySet())===null||d===void 0?void 0:d.annotations;var p=f===null||f===void 0?void 0:f.Common,g=f===null||f===void 0?void 0:f.Session;u=(p===null||p===void 0?void 0:(s=p.DraftRoot)===null||s===void 0?void 0:s.NewAction)||(g===null||g===void 0?void 0:(c=g.StickySessionSupported)===null||c===void 0?void 0:c.NewAction);if(t.creationMode===z.CreationRow&&u){throw Error("Creation mode '".concat(z.CreationRow,"' can not be used with a custom 'new' action (").concat(u,")"))}if(r!==null&&r!==void 0&&r.route){var m;return{mode:t.creationMode,append:t.createAtEnd,newAction:(m=u)===null||m===void 0?void 0:m.toString(),navigateToTarget:t.creationMode===z.NewPage?r.route:undefined}}}if(t.creationMode===z.NewPage){var y;t.creationMode=z.Inline;if(((y=v.creationMode)===null||y===void 0?void 0:y.createAtEnd)===undefined){t.createAtEnd=false}}return{mode:t.creationMode,append:t.createAtEnd,newAction:(o=u)===null||o===void 0?void 0:o.toString()}}var Ot=function(e,t,n,i,a){var o,l;var v=Te(Pe.None);var d=n.getEntityType();if(i&&e){var s,c,f,p;l=((s=i.display)===null||s===void 0?void 0:s.target)||((c=i.detail)===null||c===void 0?void 0:c.outbound);var g=n.getEntitySet();v=St((f=e.annotations)===null||f===void 0?void 0:(p=f.UI)===null||p===void 0?void 0:p.Criticality,!!u.getDraftRoot(g)||!!u.getDraftNode(g),d);if(l){o=".handlers.onChevronPressNavigateOutBound( $controller ,'"+l+"', ${$parameters>bindingContext})"}else if(d){var m;l=(m=i.detail)===null||m===void 0?void 0:m.route;if(l&&!u.isSingleton(g)){var y,b;v=St((y=e.annotations)===null||y===void 0?void 0:(b=y.UI)===null||b===void 0?void 0:b.Criticality,!!u.getDraftRoot(g)||!!u.getDraftNode(g),d);o="API.onTableRowPress($event, $controller, ${$parameters>bindingContext}, { callExtension: true, targetPath: '"+a+"', editable : "+(u.getDraftRoot(g)||u.getDraftNode(g)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+"})"}else{var h,T;v=St((h=e.annotations)===null||h===void 0?void 0:(T=h.UI)===null||T===void 0?void 0:T.Criticality,false,d)}}}var I=be([ce("/deepestPath","internal")],r.navigatedRow,d);return{press:o,action:o?"Navigation":undefined,rowHighlighting:Ie(v),rowNavigated:Ie(I),visible:Ie(pe(Me.IsInactive))}};var Et=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var i=arguments.length>3?arguments[3]:undefined;var a=arguments.length>4?arguments[4]:undefined;var o=arguments.length>5?arguments[5]:undefined;var r=arguments.length>6?arguments[6]:undefined;var l=n;var v=new Q(t,a);t.entityProperties.forEach(function(t){var u=n.some(function(e){return e.name===t.name});if(!t.targetType&&!u){var d=Be(t.name,t,a,true,o);var s=Object.keys(d.properties);var c=Object.keys(d.additionalProperties);if(d.textOnlyPropertiesFromTextAnnotation.length>0){r.push.apply(r,Ze(d.textOnlyPropertiesFromTextAnnotation))}var f=Ut(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,i,v,a,r);var p=a.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[a.getEntityType()])[0];var g=Yt(f.name,p,false,null);if(Object.keys(g).length>0){f.formatOptions=_e({},g)}if(s.length>0){f.propertyInfos=s;f.exportSettings=_e(_e({},f.exportSettings),{},{template:d.exportSettingsTemplate,wrap:d.exportSettingsWrapping});f.exportSettings.type=fn(t.type,s.length>1);if(d.exportUnitName){f.exportSettings.unitProperty=d.exportUnitName;f.exportSettings.type="Currency"}else if(d.exportUnitString){f.exportSettings.unit=d.exportUnitString}if(d.exportTimezoneName){f.exportSettings.timezoneProperty=d.exportTimezoneName;f.exportSettings.utc=false}else if(d.exportTimezoneString){f.exportSettings.timezone=d.exportTimezoneString}s.forEach(function(t){e[t]=d.properties[t]})}if(c.length>0){f.additionalPropertyInfos=c;c.forEach(function(t){e[t]=d.additionalProperties[t]})}l.push(f)}if(ie(t)==="Description"){i=i.concat(t.name);l.push(Ut(t,a.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,i,v,a,[]))}});var u=kt(e,l,i,a,t,r);return l.concat(u)};D.getColumnsFromEntityType=Et;var Ut=function(e,t,n,i,a,o,r,l,v){var u,d,s,c,f,p,g,m,y,b,h;var T=i?n:"Property::".concat(n);var I=(i?"DataField::":"Property::")+de(n);var D=Le(l,e);var P=((u=e.annotations)===null||u===void 0?void 0:(d=u.UI)===null||d===void 0?void 0:(s=d.Hidden)===null||s===void 0?void 0:s.valueOf())===true;var A=e.name?Bt(e.name,true,false):undefined;var F=A!=e.name;var S=T.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1;var C=fn(e.type);var O=e.type==="Edm.Date"?"YYYY-MM-DD":undefined;var E=Re(e);var U=!S?On(e,E):undefined;var M=l.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[l.getEntityType()])[0];var x=v&&v.indexOf(n)>=0;var w=(!P||x)&&o.indexOf(n)===-1&&!S;var N=!S?{className:e.type||E,oFormatOptions:U.formatOptions,oConstraints:U.constraints}:undefined;var $=S?{template:X(e)}:null;if(!S&&Mt(e)){var V,j,k,L,R,H;var B=te(e)||Z(e);var z=ee(e);var K=(e===null||e===void 0?void 0:(V=e.annotations)===null||V===void 0?void 0:(j=V.Measures)===null||j===void 0?void 0:j.ISOCurrency)||(e===null||e===void 0?void 0:(k=e.annotations)===null||k===void 0?void 0:(L=k.Measures)===null||L===void 0?void 0:L.Unit);var W=e===null||e===void 0?void 0:(R=e.annotations)===null||R===void 0?void 0:(H=R.Common)===null||H===void 0?void 0:H.Timezone;$={type:C,inputFormat:O,scale:e.scale,delimiter:e.type==="Edm.Int64"};if(B){$.unitProperty=B.name;$.type="Currency"}else if(K){$.unit="".concat(K)}if(z){$.timezoneProperty=z.name;$.utc=false}else if(W){$.timezone=W.toString()}}var q=Sn(n,l);var Q={key:I,type:ot.Annotation,label:$t(e,F),groupLabel:F?$t(e):null,group:F?A:null,annotationPath:t,semanticObjectPath:D,availability:!a||P||S?G.Hidden:G.Adaptation,name:T,relativePath:S?((c=e.annotations)===null||c===void 0?void 0:(f=c.UI)===null||f===void 0?void 0:(p=f.DataFieldDefault)===null||p===void 0?void 0:(g=p.Target)===null||g===void 0?void 0:(m=g.$target)===null||m===void 0?void 0:(y=m.Value)===null||y===void 0?void 0:y.path)||e.Value.path:n,sortable:w,isGroupable:r.isAnalyticsSupported()?r.isPropertyGroupable(e):w,isKey:e.isKey,isDataPointFakeTargetProperty:S,exportSettings:$,caseSensitive:Gt(l),typeConfig:N,visualSettings:S?{widthCalculation:null}:undefined,importance:en((b=e.annotations)===null||b===void 0?void 0:(h=b.UI)===null||h===void 0?void 0:h.DataFieldDefault,M),additionalLabels:q};var _=Vt(e);if(_){Q.tooltip=_}return Q};function Mt(e){var t,n,i;var a,o;var r=(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:(i=n.DataFieldDefault)===null||i===void 0?void 0:i.$Type;if(_(e&&r)){a=r}else{var l,v,u,d,s,c,f,p,g,m;o=e;a=o.$Type;if(a==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(l=o.Target.$target)!==null&&l!==void 0&&l.$Type){a=o.Target.$target.$Type;return"com.sap.vocabularies.UI.v1.ChartDefinitionType".indexOf(a)===-1}else if(((v=o.Value)===null||v===void 0?void 0:(u=v.$target)===null||u===void 0?void 0:(d=u.annotations)===null||d===void 0?void 0:(s=d.Core)===null||s===void 0?void 0:(c=s.MediaType)===null||c===void 0?void 0:c.term)==="Org.OData.Core.V1.MediaType"&&((f=o.Value)===null||f===void 0?void 0:(p=f.$target)===null||p===void 0?void 0:(g=p.annotations)===null||g===void 0?void 0:(m=g.Core)===null||m===void 0?void 0:m.isURL)!==true){return false}}return a?["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].indexOf(a)===-1:true}var xt=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};var wt=function(e,t){var n,i,a,o,r,l;var v=e.targetObject;var u;if(v){switch(v.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":u=v.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((v===null||v===void 0?void 0:(n=v.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var d;u=(d=v.Target.$target)===null||d===void 0?void 0:d.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:u=undefined}}var s=t!==null&&t!==void 0&&t.isAnalytics?Me.IsExpanded:Te(false);var c=t!==null&&t!==void 0&&t.isAnalytics?he(Me.NodeLevel,0):Te(false);return De.apply(void 0,[pe(he(ye(v===null||v===void 0?void 0:(a=v.annotations)===null||a===void 0?void 0:(o=a.UI)===null||o===void 0?void 0:o.Hidden),true)),me(!!u,u&&pe(he(ye((r=u.annotations)===null||r===void 0?void 0:(l=r.UI)===null||l===void 0?void 0:l.Hidden),true)),true),fe(pe(s),c)])};D._getVisibleExpression=wt;var Nt=function(e,t){var n,i;var a=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var o;(o=e.Target.$target.Data)===null||o===void 0?void 0:o.forEach(function(e){a.push(wt({targetObject:e},t))});return Ie(me(fe.apply(void 0,a),Te(true),Te(false)))}else{return undefined}};var $t=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(_(e)||J(e)){var n,i,a,o,r;var l=(n=e.annotations)===null||n===void 0?void 0:(i=n.UI)===null||i===void 0?void 0:i.DataFieldDefault;if(l&&!l.qualifier&&(a=l.Label)!==null&&a!==void 0&&a.valueOf()){var v;return Ie(ye((v=l.Label)===null||v===void 0?void 0:v.valueOf()))}return Ie(ye(((o=e.annotations.Common)===null||o===void 0?void 0:(r=o.Label)===null||r===void 0?void 0:r.valueOf())||e.name))}else if(Ve(e)){var u,d,s,c,f,p,g,m;if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var y;return Ie(ye((y=e.Label)===null||y===void 0?void 0:y.valueOf()))}return Ie(ye(((u=e.Label)===null||u===void 0?void 0:u.valueOf())||((d=e.Value)===null||d===void 0?void 0:(s=d.$target)===null||s===void 0?void 0:(c=s.annotations)===null||c===void 0?void 0:(f=c.Common)===null||f===void 0?void 0:(p=f.Label)===null||p===void 0?void 0:p.valueOf())||((g=e.Value)===null||g===void 0?void 0:(m=g.$target)===null||m===void 0?void 0:m.name)))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var b,h,T,I,D,P,A,F;return Ie(ye(((b=e.Label)===null||b===void 0?void 0:b.valueOf())||((h=e.Target)===null||h===void 0?void 0:(T=h.$target)===null||T===void 0?void 0:(I=T.Value)===null||I===void 0?void 0:(D=I.$target)===null||D===void 0?void 0:(P=D.annotations)===null||P===void 0?void 0:(A=P.Common)===null||A===void 0?void 0:(F=A.Label)===null||F===void 0?void 0:F.valueOf())))}else{var S;return Ie(ye((S=e.Label)===null||S===void 0?void 0:S.valueOf()))}};var Vt=function(e){var t,n;if(!e){return undefined}if(_(e)||(t=e.annotations)!==null&&t!==void 0&&(n=t.Common)!==null&&n!==void 0&&n.QuickInfo){var i,a;return(i=e.annotations)!==null&&i!==void 0&&(a=i.Common)!==null&&a!==void 0&&a.QuickInfo?Ie(ye(e.annotations.Common.QuickInfo.valueOf())):undefined}else if(Ve(e)){var o,r,l,v;return(o=e.Value)!==null&&o!==void 0&&(r=o.$target)!==null&&r!==void 0&&(l=r.annotations)!==null&&l!==void 0&&(v=l.Common)!==null&&v!==void 0&&v.QuickInfo?Ie(ye(e.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var u,d,s,c,f;var p=(u=e.Target)===null||u===void 0?void 0:u.$target;return p!==null&&p!==void 0&&(d=p.Value)!==null&&d!==void 0&&(s=d.$target)!==null&&s!==void 0&&(c=s.annotations)!==null&&c!==void 0&&(f=c.Common)!==null&&f!==void 0&&f.QuickInfo?Ie(ye(p.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else{return undefined}};function jt(e,t){return be([ce("semanticKeyHasDraftIndicator","internal"),ce("filteredMessages","internal"),e,t],r.getErrorStatusTextVisibilityFormatter)}D.getRowStatusVisibility=jt;var kt=function(e,t,n,i,a,o){var r=[];var l={};var v=new Q(a,i);Object.keys(e).forEach(function(a){var u=e[a],d=i.getAbsoluteAnnotationPath(a),s=t.find(function(e){return e.name===a});if(s===undefined){r.push(Ut(u,d,a,true,false,n,v,i,o))}else if(s.annotationPath!==d||s.propertyInfos){var c="Property::".concat(a);if(!t.some(function(e){return e.name===c})){var f=Ut(u,d,a,false,false,n,v,i,o);f.isPartOfLineItem=s.isPartOfLineItem;r.push(f);l[a]=c}else if(t.some(function(e){return e.name===c})&&t.some(function(e){var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(a)})){l[a]=c}}});t.forEach(function(e){var t,n;e.propertyInfos=(t=e.propertyInfos)===null||t===void 0?void 0:t.map(function(e){var t;return(t=l[e])!==null&&t!==void 0?t:e});e.additionalPropertyInfos=(n=e.additionalPropertyInfos)===null||n===void 0?void 0:n.map(function(e){var t;return(t=l[e])!==null&&t!==void 0?t:e})});return r};var Lt=function(e){var t,n,i;if(Ve(e)){var a;return(a=e.Value)===null||a===void 0?void 0:a.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(t=e.Target)!==null&&t!==void 0&&(n=t.$target)!==null&&n!==void 0&&(i=n.Value)!==null&&i!==void 0&&i.path){var o,r;return(o=e.Target)===null||o===void 0?void 0:(r=o.$target)===null||r===void 0?void 0:r.Value.path}else{return Ae.generateKeyFromDataField(e)}};var Rt=function(e,t,n){var i;var a=(i=n.getManifestControlConfiguration(t))===null||i===void 0?void 0:i.columns;var o=a&&Object.keys(a);return o&&!!o.find(function(t){return t===e&&a[t].showDataFieldsLabel})};var Ht=function(e){var t,n;var i="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":i=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":i=e===null||e===void 0?void 0:(n=e.Target)===null||n===void 0?void 0:n.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":i=Ae.generateKeyFromDataField(e);break}return i};var Bt=function(e,t,n){var i=t?e.lastIndexOf("/"):e.indexOf("/");if(i===-1){return e}return n?e.substring(i+1,e.length):e.substring(0,i)};var zt=function(e,t,n){return n.indexOf(t)===-1&&(e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};var Gt=function(e){var t=Kt(e);return Array.isArray(t)?t.indexOf("tolower")===-1:true};D.isFilteringCaseSensitive=Gt;function Kt(e){var t,n,i,a,o;if(u.isSingleton(e.getEntitySet())){return undefined}var r=(t=e.getEntitySet())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:n.Capabilities;return(r===null||r===void 0?void 0:r.FilterFunctions)||((i=e.getEntityContainer())===null||i===void 0?void 0:(a=i.annotations)===null||a===void 0?void 0:(o=a.Capabilities)===null||o===void 0?void 0:o.FilterFunctions)}function Wt(e){return e===undefined?undefined:_e({textLinesEdit:4},e)}function qt(e,t){var n=[];var i=false;for(var a=0;a<e.length;a++){n.push(e[a].value);if(e[a].value===t){i=true}}return{values:n,semanticKeyFound:i}}function Qt(e,t){var n=false;var i;if(e&&e.length>=1&&t&&t.length>=1){for(var a=0;a<e.length;a++){if([e[a]].some(function(e){return t.indexOf(e)>=0})){n=true;i=e[a];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:i}}function _t(e,t){var n,i;var a=[];var o={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(i=n.$target)===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var r;(r=e.Target.$target.Data)===null||r===void 0?void 0:r.forEach(function(e){if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){a.push(e.Value.path)}o=Qt(t,a)})}return{semanticKeyHasPropertyInFieldGroup:o.semanticKeyHasPropertyInFieldGroup,propertyPath:o.fieldGroupPropertyPath}}function Yt(e,t,n,i){if(!t){return{}}var a=qt(t,e);var o=_t(i,a.values);if(a.semanticKeyFound){var r={hasDraftIndicator:true,semantickeys:a.values,objectStatusTextVisibility:Ie(jt(e,false))};if(n&&o.semanticKeyHasPropertyInFieldGroup){r["objectStatusTextVisibility"]=Ie(jt(e,true));r["fieldGroupDraftIndicatorPropertyPath"]=o.propertyPath}return r}else if(!o.semanticKeyHasPropertyInFieldGroup){return{}}else{return{fieldGroupDraftIndicatorPropertyPath:o.propertyPath,fieldGroupName:e,objectStatusTextVisibility:Ie(jt(e,true))}}}function Jt(e){var t,n;var i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;if(i&&i.includes("UI.ImportanceType/High")){return 3}if(i&&i.includes("UI.ImportanceType/Medium")){return 2}if(i&&i.includes("UI.ImportanceType/Low")){return 1}return 0}function Xt(e){var t,n;var i=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;return i?i.split("/")[1]:H.None}function Zt(e){if(e&&e.length>0){var t=-1;var n=-1;var i;var a=qe(e),o;try{for(a.s();!(o=a.n()).done;){var r=o.value;n=Jt(r);if(n>t){t=n;i=r}}}catch(e){a.e(e)}finally{a.f()}return Xt(i)}return H.None}function en(e,t){var n;var i,a;if(t&&t.length>0){a=t.map(function(e){return e.value})}if(!e){return undefined}if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var o=e.Target["$target"]["Data"],r=o&&o.some(function(e){var t,n;return(e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path)&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&a&&a.includes(e===null||e===void 0?void 0:(n=e.Value)===null||n===void 0?void 0:n.path)});if(r){return H.High}else{var l,v;if(e!==null&&e!==void 0&&(l=e.annotations)!==null&&l!==void 0&&(v=l.UI)!==null&&v!==void 0&&v.Importance){return Xt(e)}i=o&&o.filter(function(e){var t,n;return e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance});return Zt(i)}}return e.Value&&e!==null&&e!==void 0&&(n=e.Value)!==null&&n!==void 0&&n.path&&a&&a.includes(e.Value.path)?H.High:Xt(e)}D.getImportance=en;var tn=function(e,t,n){var i;var a=n.getAnnotationEntityType(e),o=[],r={},l=ne(n.getEntitySet()),v=n.getManifestControlConfiguration(t),u=(v===null||v===void 0?void 0:(i=v.tableSettings)===null||i===void 0?void 0:i.type)||"ResponsiveTable";var d=[];var s=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){e.forEach(function(e){var i,a,v,c,f,p,g,m,y,b;if(!xt(e)){return}var h=null;var T=Ve(e)&&(i=e.Value)!==null&&i!==void 0&&(a=i.$target)!==null&&a!==void 0&&a.fullyQualifiedName?Le(n,e):undefined;var I=Ht(e);var D;var P=He(e,n,u);var A=P.properties;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((v=e.Target)===null||v===void 0?void 0:(c=v.$target)===null||c===void 0?void 0:c.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){D=Object.keys(P.properties).filter(function(e){var t;var n;if((t=A[e].annotations)!==null&&t!==void 0&&t.UI){var i,a;n=q((i=A[e].annotations)===null||i===void 0?void 0:(a=i.UI)===null||a===void 0?void 0:a.DataFieldDefault)}else{n=q(A[e])}return!n})}else{D=Object.keys(P.properties)}var F=Object.keys(P.additionalProperties);var S=Bt(I,true,false);var C=S!=I;var O=$t(e,C);var E=Lt(e);var U=S.indexOf("@com.sap.vocabularies.UI.v1.FieldGroup")>-1;var M=U?Rt(E,t,n):false;var x=Re(e);var w=x==="Edm.Date"?"YYYY-MM-DD":undefined;var N=Wt(Yt(E,s,U,e));var $;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((f=e.Target)===null||f===void 0?void 0:(p=f.$target)===null||p===void 0?void 0:p.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){$=Nt(e,N)}if(Mt(e)){h={template:P.exportSettingsTemplate,wrap:P.exportSettingsWrapping,type:x?fn(x,D.length>1):undefined,inputFormat:w,delimiter:x==="Edm.Int64"};if(P.exportUnitName){h.unitProperty=P.exportUnitName;h.type="Currency"}else if(P.exportUnitString){h.unit=P.exportUnitString}if(P.exportTimezoneName){h.timezoneProperty=P.exportTimezoneName}else if(P.exportTimezoneString){h.timezone=P.exportTimezoneString}}var V=x&&On(e,x);var j=V?{className:x,oFormatOptions:_e(_e({},N),V.formatOptions),oConstraints:V.constraints}:undefined;var k={};if(!x||!j){k.widthCalculation=null}var L={key:Ae.generateKeyFromDataField(e),type:ot.Annotation,label:O,groupLabel:C?$t(e):null,group:C?S:null,FieldGroupHiddenExpressions:$,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:T,availability:ke(e)?G.Hidden:G.Default,name:E,showDataFieldsLabel:M,relativePath:I,sortable:zt(e,I,l),propertyInfos:D.length?D:undefined,additionalPropertyInfos:F.length>0?F:undefined,exportSettings:h,width:((g=e.annotations)===null||g===void 0?void 0:(m=g.HTML5)===null||m===void 0?void 0:(y=m.CssDefaults)===null||y===void 0?void 0:y.width)||undefined,importance:en(e,s),isNavigable:true,formatOptions:N,caseSensitive:Gt(n),typeConfig:j,visualSettings:k,timezoneText:(b=h)===null||b===void 0?void 0:b.timezone,isPartOfLineItem:true};var R=Vt(e);if(R){L.tooltip=R}if(P.textOnlyPropertiesFromTextAnnotation.length>0){d.push.apply(d,Ze(P.textOnlyPropertiesFromTextAnnotation))}o.push(L);D.forEach(function(e){r[e]=P.properties[e]});F.forEach(function(e){r[e]=P.additionalProperties[e]})})}return Et(r,a,o,l,n,u,d)};var nn=function(e,t,n,i){var a;if(e){a=e.map(function(e){var a=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(a){return a.name}else{var o=kt(Ye({},e,i.resolvePath(e)),t,[],n,i,[]);t.push(o[0]);return o[0].name}})}return a};var an=function(e){return e.map(function(t){return"{".concat(e.indexOf(t),"}")}).join("\n")};var on=function(e,t,n,i,a){var o={};function r(e,n){return t.some(function(e){return e.key===n})}function l(e){return e.type===ot.Slot}function v(e){return e.type===undefined&&!!e.template}function u(e,t){var i=ne(n.getEntitySet());e.forEach(function(e){t.forEach(function(t){if(t.name===e){t.sortable=i.indexOf(e.replace("Property::",""))===-1;t.isGroupable=t.sortable}})})}for(var d in e){var s;var c=e[d];Ae.validateKey(d);var f={key:d,width:c.width||undefined,position:{anchor:(s=c.position)===null||s===void 0?void 0:s.anchor,placement:c.position===undefined?Ee.After:c.position.placement},caseSensitive:Gt(n)};if(r(c,d)){var p=_e(_e({},f),{},{importance:c===null||c===void 0?void 0:c.importance,horizontalAlign:c===null||c===void 0?void 0:c.horizontalAlign,availability:c===null||c===void 0?void 0:c.availability,type:ot.Annotation,isNavigable:r(c,d)?undefined:Ne(c,a,true),settings:c.settings,formatOptions:Wt(c.formatOptions)});o[d]=p}else{var g=nn(c.properties,t,n,i);var m=_e(_e({},f),{},{header:c.header,importance:(c===null||c===void 0?void 0:c.importance)||H.None,horizontalAlign:(c===null||c===void 0?void 0:c.horizontalAlign)||B.Begin,availability:(c===null||c===void 0?void 0:c.availability)||G.Default,template:c.template,propertyInfos:g,exportSettings:g?{template:an(g),wrap:!!(g.length>1)}:null,id:"CustomColumn::".concat(d),name:"CustomColumn::".concat(d),formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null}});if(g){u(g,t)}if(l(c)){var y=_e(_e({},m),{},{type:ot.Slot});o[d]=y}else if(v(c)){var b=_e(_e({},m),{},{type:ot.Default});o[d]=b}else{var h;var T="The annotation column '".concat(d,"' referenced in the manifest is not found");n.getDiagnostics().addIssue(Oe.Manifest,Se.Low,T,Ce,Ce===null||Ce===void 0?void 0:(h=Ce.AnnotationColumns)===null||h===void 0?void 0:h.InvalidKey)}}}return o};function rn(e,t,n){var i;var a=t.getManifestWrapper();var o=t.getManifestControlConfiguration(e);var r=a.getVariantManagement();var l=[];var v=n.type==="AnalyticalTable";var u=n.type==="ResponsiveTable";if((o===null||o===void 0?void 0:(i=o.tableSettings)===null||i===void 0?void 0:i.personalization)!==undefined){var d=o.tableSettings.personalization;if(d===true){switch(n.type){case"AnalyticalTable":return"Sort,Column,Filter,Group,Aggregate";case"ResponsiveTable":return"Sort,Column,Filter,Group";default:return"Sort,Column,Filter"}}else if(typeof d==="object"){if(d.sort){l.push("Sort")}if(d.column){l.push("Column")}if(d.filter){l.push("Filter")}if(d.group&&(v||u)){l.push("Group")}if(d.aggregate&&v){l.push("Aggregate")}return l.length>0?l.join(","):undefined}}else{l.push("Sort");l.push("Column");if(t.getTemplateType()===L.ListReport){if(r===k.Control||ln(a,t)){l.push("Filter")}}else{l.push("Filter")}if(v){l.push("Group");l.push("Aggregate")}if(u){l.push("Group")}return l.join(",")}return undefined}D.getP13nMode=rn;function ln(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==L.AnalyticalListPage}function vn(e,t,n){var i=ne(e.getEntitySet());var a;if(t!==null&&t!==void 0&&t.SortOrder){var o=[];var r={sorters:o};t.SortOrder.forEach(function(e){var t;var a=e.Property;if(a&&i.indexOf((t=a.$target)===null||t===void 0?void 0:t.name)===-1){var o=un([a],n)[0];if(o){r.sorters.push({name:o,descending:!!e.Descending})}}});a=r.sorters.length?JSON.stringify(r):undefined}return a}function un(e,t){var n=[];var i,a;e.forEach(function(e){if(e!==null&&e!==void 0&&e.value){i=t.find(function(t){a=t;return!a.propertyInfos&&a.relativePath===(e===null||e===void 0?void 0:e.value)});if(i){n.push(i.name)}}});return n}function dn(e,t,n){var i;if(e!==null&&e!==void 0&&e.GroupBy){var a=e.GroupBy;if(n==="ResponsiveTable"){a=a.slice(0,1)}var o=un(a,t).map(function(e){return{name:e}});i=o.length?JSON.stringify({groupLevels:o}):undefined}return i}function sn(e,t){var n;if(e!==null&&e!==void 0&&e.Total){var i=e.Total;var a={};un(i,t).forEach(function(e){a[e]={}});n=JSON.stringify(a)}return n}function cn(e,t,n,i,a,o,r){var l,v,u;var d=pn(t),s=d.navigationPropertyPath;var c=(l=n.getDataModelObjectPath().targetEntityType.annotations)===null||l===void 0?void 0:(v=l.UI)===null||v===void 0?void 0:(u=v.HeaderInfo)===null||u===void 0?void 0:u.TypeNamePlural;var f=n.getDataModelObjectPath().targetEntitySet;var p=n.getManifestWrapper();var g=s.length===0,m=rn(t,n,i),y=s?W(t):W(n.getContextPath(),"LineItem");var b=Pt(n);var h=dt(n,s);var T=p.getNavigationConfiguration(h);var I=Ct(e,i,n,T,t);var D=$(n,I.mode,i,r);var E=x(n,D);var V=N(n,D);var j=U(n,D);var R=M(D,A(n),Ie(V)==="false");var H=At(e,t,n,g,b,E,j);var B=s?10:30;if(o!==null&&o!==void 0&&o.MaxItems){B=o.MaxItems.valueOf()}var z=p.getVariantManagement();var G=re(n.getDataModelObjectPath());var K={create:O(n,D),delete:C(n,D),paste:F(n,D,R),massEdit:S(n,D),creationRow:w(n,D)};return{id:y,entityName:f?f.name:"",collection:ve(n.getDataModelObjectPath()),navigationPath:s,row:Ot(e,t,n,T,h),p13nMode:m,standardActions:{actions:K,isInsertUpdateTemplated:R,updatablePropertyPath:mt(n)},displayMode:P(n,r),create:I,selectionMode:H,autoBindOnInit:ln(p,n)||n.getTemplateType()!==L.ListReport&&n.getTemplateType()!==L.AnalyticalListPage&&!(r&&p.hasMultipleVisualizations(r)),variantManagement:z==="Control"&&!m?k.None:z,threshold:B,sortConditions:vn(n,o,a),title:c,searchable:i.type!=="AnalyticalTable"&&!(ge(G)&&G.value===false)}}D.getTableAnnotationConfiguration=cn;function fn(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n="String";if(t){if(e==="Edm.DateTimeOffset"){n="DateTime"}return n}else{switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":n="Number";break;case"Edm.DateOfTime":case"Edm.Date":n="Date";break;case"Edm.DateTimeOffset":n="DateTime";break;case"Edm.TimeOfDay":n="Time";break;case"Edm.Boolean":n="Boolean";break;default:n="String"}}return n}function pn(e){var t=e.split("@"),n=ze(t,2),i=n[0],a=n[1];if(i.lastIndexOf("/")===i.length-1){i=i.substr(0,i.length-1)}return{navigationPropertyPath:i,annotationPath:a}}D.splitPath=pn;function gn(e,t){var n=t.getEntityTypeAnnotation(e);var i=n.annotation;if(i){var a,o;var r=[];(a=i.SelectOptions)===null||a===void 0?void 0:a.forEach(function(e){var t=e.PropertyName;var n=t.value;if(r.indexOf(n)===-1){r.push(n)}});return{text:i===null||i===void 0?void 0:(o=i.Text)===null||o===void 0?void 0:o.toString(),propertyNames:r}}return undefined}D.getSelectionVariantConfiguration=gn;function mn(e,t,n){var i;var a=(i=e.enableFullScreen)!==null&&i!==void 0?i:n;if(!n&&a&&t.getTemplateType()===L.ListReport){a=false;t.getDiagnostics().addIssue(Oe.Manifest,Se.Low,Fe.FULLSCREENMODE_NOT_ON_LISTREPORT)}return a}function yn(e,t,n){var i;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case L.ListReport:case L.AnalyticalListPage:i=!e.selectAll?"ClearAll":"Default";break;case L.ObjectPage:i=e.selectAll===false?"ClearAll":"Default";if(n.getManifestWrapper().useIconTabBar()){i=!e.selectAll?"ClearAll":"Default"}break;default:}return i}function bn(e,t,n){var i=(e===null||e===void 0?void 0:e.type)||"ResponsiveTable";if(i==="AnalyticalTable"&&!n.getManifestWrapper().isDesktop()){i="ResponsiveTable"}return i}function hn(e,t,n){if(e==="GridTable"){if(n){return{rowCountMode:"Auto",rowCount:"3"}}else{return{rowCountMode:t.rowCountMode?t.rowCountMode:"Fixed",rowCount:t.rowCount?t.rowCount:5}}}else{return{}}}function Tn(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function In(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function Dn(e){var t,n;return(t=e.creationMode)!==null&&t!==void 0&&t.inlineCreationRowCount?(n=e.creationMode)===null||n===void 0?void 0:n.inlineCreationRowCount:2}function Pn(e,t,n,i,a){var o;if(n){t.push({annotationPath:i.annotationPath})}return{quickFilters:{enabled:a.getTemplateType()!==L.ListReport,showCounts:e===null||e===void 0?void 0:(o=e.quickVariantSelection)===null||o===void 0?void 0:o.showCounts,paths:t}}}function An(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function Fn(e,t,n){var i,a,o;if(!t){return{}}var r=[];var l=n.getAnnotationEntityType(t);var v;var u;e===null||e===void 0?void 0:(i=e.quickVariantSelection)===null||i===void 0?void 0:(a=i.paths)===null||a===void 0?void 0:a.forEach(function(t){v=l.resolvePath(t.annotationPath);u=Pn(e,r,v,t,n)});var d=false;d=!!((o=e.quickVariantSelection)!==null&&o!==void 0&&o.hideTableTitle);return{filters:u,headerVisible:!(v&&d)}}function Sn(e,t){var n=ue(t.getDataModelObjectPath(),e).navigationProperties;if((n===null||n===void 0?void 0:n.length)>0){var i=[];n.forEach(function(e){i.push($t(e)||e.name)});return i}}function Cn(e,t,n){var i,a,o,r,l,v,u;var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var s=n.getManifestWrapper();var c=n.getManifestControlConfiguration(t);var f=c&&c.tableSettings||{};var p=((i=f.creationMode)===null||i===void 0?void 0:i.name)||z.NewPage;var g=!s.isPhone();var m=f.enablePaste!==undefined?f.enablePaste:n.getTemplateType()==="ObjectPage";var y=n.getTemplateType();var b=y===L.ListReport?"API.dataStateIndicatorFilter":undefined;var h=d&&s.isCondensedLayoutCompliant();var T=Fn(f,e,n);var I=(a=f.creationMode)===null||a===void 0?void 0:a.customValidationFunction;var D=n.getEntityType();var P=new Q(D,n);var A=bn(f,P,n);var F=hn(A,f,y===L.ListReport);var S=Tn(A,f);var C={createAtEnd:((o=f.creationMode)===null||o===void 0?void 0:o.createAtEnd)!==undefined?(r=f.creationMode)===null||r===void 0?void 0:r.createAtEnd:p!==z.Inline,creationMode:p,customValidationFunction:I,dataStateIndicatorFilter:b,disableAddRowButtonForEmptyData:!I?!!((l=f.creationMode)!==null&&l!==void 0&&l.disableAddRowButtonForEmptyData):false,enableAutoColumnWidth:g,enableExport:An(f,n,m),enableFullScreen:mn(f,n,s.isPhone()),enableMassEdit:f===null||f===void 0?void 0:f.enableMassEdit,enablePaste:m,headerVisible:true,multiSelectMode:yn(f,A,n),selectionLimit:In(f),inlineCreationRowCount:Dn(f),showRowCount:!(f!==null&&f!==void 0&&(v=f.quickVariantSelection)!==null&&v!==void 0&&v.showCounts)&&!((u=s.getViewConfiguration())!==null&&u!==void 0&&u.showCounts),type:A,useCondensedTableLayout:S&&h,isCompactType:s.isCompactType()};return _e(_e(_e({},C),F),T)}D.getTableManifestConfiguration=Cn;function On(e,t){var n,i,a,o,r,l;var v=ae[e===null||e===void 0?void 0:e.type]||(t?ae[t]:undefined);if(!v&&e!==null&&e!==void 0&&e.targetType&&((n=e.targetType)===null||n===void 0?void 0:n._type)==="TypeDefinition"){v=ae[e.targetType.underlyingType]}var u={type:(i=v)===null||i===void 0?void 0:i.type,constraints:{},formatOptions:{}};if(_(e)){var d,s,c,f,p,g,m,y,b,h,T,I,D,P,A,F,S;u.constraints={scale:(d=v.constraints)!==null&&d!==void 0&&d.$Scale?e.scale:undefined,precision:(s=v.constraints)!==null&&s!==void 0&&s.$Precision?e.precision:undefined,maxLength:(c=v.constraints)!==null&&c!==void 0&&c.$MaxLength?e.maxLength:undefined,nullable:(f=v.constraints)!==null&&f!==void 0&&f.$Nullable?e.nullable:undefined,minimum:(p=v.constraints)!==null&&p!==void 0&&p["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((g=e.annotations)===null||g===void 0?void 0:(m=g.Validation)===null||m===void 0?void 0:m.Minimum)?"".concat((y=e.annotations)===null||y===void 0?void 0:(b=y.Validation)===null||b===void 0?void 0:b.Minimum):undefined,maximum:(h=v.constraints)!==null&&h!==void 0&&h["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((T=e.annotations)===null||T===void 0?void 0:(I=T.Validation)===null||I===void 0?void 0:I.Maximum)?"".concat((D=e.annotations)===null||D===void 0?void 0:(P=D.Validation)===null||P===void 0?void 0:P.Maximum):undefined,isDigitSequence:u.type==="sap.ui.model.odata.type.String"&&(A=v.constraints)!==null&&A!==void 0&&A["@com.sap.vocabularies.Common.v1.IsDigitSequence"]&&(F=e.annotations)!==null&&F!==void 0&&(S=F.Common)!==null&&S!==void 0&&S.IsDigitSequence?true:undefined}}u.formatOptions={parseAsString:(u===null||u===void 0?void 0:(a=u.type)===null||a===void 0?void 0:a.indexOf("sap.ui.model.odata.type.Int"))===0||(u===null||u===void 0?void 0:(o=u.type)===null||o===void 0?void 0:o.indexOf("sap.ui.model.odata.type.Double"))===0?false:undefined,emptyString:(u===null||u===void 0?void 0:(r=u.type)===null||r===void 0?void 0:r.indexOf("sap.ui.model.odata.type.Int"))===0||(u===null||u===void 0?void 0:(l=u.type)===null||l===void 0?void 0:l.indexOf("sap.ui.model.odata.type.Double"))===0?"":undefined,parseKeepsEmptyString:u.type==="sap.ui.model.odata.type.String"?true:undefined};return u}D.getTypeConfig=On;return{getTableActions:rt,getTableColumns:lt,getColumnsFromEntityType:Et,updateLinkedProperties:st,createTableVisualization:ft,createDefaultTableVisualization:pt,getCapabilityRestriction:Pt,getSelectionMode:At,getRowStatusVisibility:jt,getImportance:en,getP13nMode:rn,getTableAnnotationConfiguration:cn,isFilteringCaseSensitive:Gt,splitPath:pn,getSelectionVariantConfiguration:gn,getTableManifestConfiguration:Cn,getTypeConfig:On}},false);
//# sourceMappingURL=Table.js.map