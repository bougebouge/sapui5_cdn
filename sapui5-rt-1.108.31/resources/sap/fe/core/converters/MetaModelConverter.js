/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/common/AnnotationConverter","../helpers/StableIdHelper"],function(e,t){"use strict";var n={};var i=t.generate;function r(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var i=0;var r=function(){};return{s:r,n:function(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,o=false,l;return{s:function(){n=n.call(e)},n:function(){var e=n.next();a=e.done;return e},e:function(e){o=true;l=e},f:function(){try{if(!a&&n.return!=null)n.return()}finally{if(o)throw l}}}}function a(e,t,n){t=o(t);if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function o(e){var t=l(e,"string");return typeof t==="symbol"?t:String(t)}function l(e,t){if(typeof e!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var i=n.call(e,t||"default");if(typeof i!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f(e,t){return u(e)||y(e,t)||s(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(!e)return;if(typeof e==="string")return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}function p(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,i=new Array(t);n<t;n++){i[n]=e[n]}return i}function y(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],f=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;f=!1}else for(;!(f=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);f=!0){}}catch(e){c=!0,r=e}finally{try{if(!f&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return l}}function u(e){if(Array.isArray(e))return e}var d={"Org.OData.Capabilities.V1":"Capabilities","Org.OData.Core.V1":"Core","Org.OData.Measures.V1":"Measures","com.sap.vocabularies.Common.v1":"Common","com.sap.vocabularies.UI.v1":"UI","com.sap.vocabularies.Session.v1":"Session","com.sap.vocabularies.Analytics.v1":"Analytics","com.sap.vocabularies.PersonalData.v1":"PersonalData","com.sap.vocabularies.Communication.v1":"Communication"};var v={Chart:true,MicroChart:true,UShell:true,IntentBasedNavigation:true,AppState:true};n.DefaultEnvironmentCapabilities=v;function $(e,t,n,i,r){var a;var o="".concat(n,"/").concat(t);var l=typeof e;if(e===null){a={type:"Null",Null:null}}else if(l==="string"){a={type:"String",String:e}}else if(l==="boolean"){a={type:"Bool",Bool:e}}else if(l==="number"){a={type:"Int",Int:e}}else if(Array.isArray(e)){a={type:"Collection",Collection:e.map(function(e,t){return P(e,"".concat(o,"/").concat(t),i,r)})};if(e.length>0){if(e[0].hasOwnProperty("$PropertyPath")){a.Collection.type="PropertyPath"}else if(e[0].hasOwnProperty("$Path")){a.Collection.type="Path"}else if(e[0].hasOwnProperty("$NavigationPropertyPath")){a.Collection.type="NavigationPropertyPath"}else if(e[0].hasOwnProperty("$AnnotationPath")){a.Collection.type="AnnotationPath"}else if(e[0].hasOwnProperty("$Type")){a.Collection.type="Record"}else if(e[0].hasOwnProperty("$If")){a.Collection.type="If"}else if(e[0].hasOwnProperty("$Or")){a.Collection.type="Or"}else if(e[0].hasOwnProperty("$And")){a.Collection.type="And"}else if(e[0].hasOwnProperty("$Eq")){a.Collection.type="Eq"}else if(e[0].hasOwnProperty("$Ne")){a.Collection.type="Ne"}else if(e[0].hasOwnProperty("$Not")){a.Collection.type="Not"}else if(e[0].hasOwnProperty("$Gt")){a.Collection.type="Gt"}else if(e[0].hasOwnProperty("$Ge")){a.Collection.type="Ge"}else if(e[0].hasOwnProperty("$Lt")){a.Collection.type="Lt"}else if(e[0].hasOwnProperty("$Le")){a.Collection.type="Le"}else if(e[0].hasOwnProperty("$Apply")){a.Collection.type="Apply"}else if(typeof e[0]==="object"){a.Collection.type="Record"}else{a.Collection.type="String"}}}else if(e.$Path!==undefined){a={type:"Path",Path:e.$Path}}else if(e.$Decimal!==undefined){a={type:"Decimal",Decimal:parseFloat(e.$Decimal)}}else if(e.$PropertyPath!==undefined){a={type:"PropertyPath",PropertyPath:e.$PropertyPath}}else if(e.$NavigationPropertyPath!==undefined){a={type:"NavigationPropertyPath",NavigationPropertyPath:e.$NavigationPropertyPath}}else if(e.$If!==undefined){a={type:"If",If:e.$If}}else if(e.$And!==undefined){a={type:"And",And:e.$And}}else if(e.$Or!==undefined){a={type:"Or",Or:e.$Or}}else if(e.$Not!==undefined){a={type:"Not",Not:e.$Not}}else if(e.$Eq!==undefined){a={type:"Eq",Eq:e.$Eq}}else if(e.$Ne!==undefined){a={type:"Ne",Ne:e.$Ne}}else if(e.$Gt!==undefined){a={type:"Gt",Gt:e.$Gt}}else if(e.$Ge!==undefined){a={type:"Ge",Ge:e.$Ge}}else if(e.$Lt!==undefined){a={type:"Lt",Lt:e.$Lt}}else if(e.$Le!==undefined){a={type:"Le",Le:e.$Le}}else if(e.$Apply!==undefined){a={type:"Apply",Apply:e.$Apply,Function:e.$Function}}else if(e.$AnnotationPath!==undefined){a={type:"AnnotationPath",AnnotationPath:e.$AnnotationPath}}else if(e.$EnumMember!==undefined){a={type:"EnumMember",EnumMember:"".concat(h(e.$EnumMember.split("/")[0]),"/").concat(e.$EnumMember.split("/")[1])}}else if(e.$Type){a={type:"Record",Record:P(e,n,i,r)}}else{a={type:"Record",Record:P(e,n,i,r)}}return{name:t,value:a}}function h(e){var t=e.split("@"),n=f(t,2),i=n[0],r=n[1];if(!r){r=i;i=""}else{i+="@"}var a=r.lastIndexOf(".");return"".concat(i+d[r.substr(0,a)],".").concat(r.substr(a+1))}function P(e,t,n,i){var r={};var o=typeof e;if(e===null){r={type:"Null",Null:null}}else if(o==="string"){r={type:"String",String:e}}else if(o==="boolean"){r={type:"Bool",Bool:e}}else if(o==="number"){r={type:"Int",Int:e}}else if(e.$AnnotationPath!==undefined){r={type:"AnnotationPath",AnnotationPath:e.$AnnotationPath}}else if(e.$Path!==undefined){r={type:"Path",Path:e.$Path}}else if(e.$Decimal!==undefined){r={type:"Decimal",Decimal:parseFloat(e.$Decimal)}}else if(e.$PropertyPath!==undefined){r={type:"PropertyPath",PropertyPath:e.$PropertyPath}}else if(e.$If!==undefined){r={type:"If",If:e.$If}}else if(e.$And!==undefined){r={type:"And",And:e.$And}}else if(e.$Or!==undefined){r={type:"Or",Or:e.$Or}}else if(e.$Not!==undefined){r={type:"Not",Not:e.$Not}}else if(e.$Eq!==undefined){r={type:"Eq",Eq:e.$Eq}}else if(e.$Ne!==undefined){r={type:"Ne",Ne:e.$Ne}}else if(e.$Gt!==undefined){r={type:"Gt",Gt:e.$Gt}}else if(e.$Ge!==undefined){r={type:"Ge",Ge:e.$Ge}}else if(e.$Lt!==undefined){r={type:"Lt",Lt:e.$Lt}}else if(e.$Le!==undefined){r={type:"Le",Le:e.$Le}}else if(e.$Apply!==undefined){r={type:"Apply",Apply:e.$Apply,Function:e.$Function}}else if(e.$NavigationPropertyPath!==undefined){r={type:"NavigationPropertyPath",NavigationPropertyPath:e.$NavigationPropertyPath}}else if(e.$EnumMember!==undefined){r={type:"EnumMember",EnumMember:"".concat(h(e.$EnumMember.split("/")[0]),"/").concat(e.$EnumMember.split("/")[1])}}else if(Array.isArray(e)){var l=r;l.collection=e.map(function(e,r){return P(e,"".concat(t,"/").concat(r),n,i)});if(e.length>0){if(e[0].hasOwnProperty("$PropertyPath")){l.collection.type="PropertyPath"}else if(e[0].hasOwnProperty("$Path")){l.collection.type="Path"}else if(e[0].hasOwnProperty("$NavigationPropertyPath")){l.collection.type="NavigationPropertyPath"}else if(e[0].hasOwnProperty("$AnnotationPath")){l.collection.type="AnnotationPath"}else if(e[0].hasOwnProperty("$Type")){l.collection.type="Record"}else if(e[0].hasOwnProperty("$If")){l.collection.type="If"}else if(e[0].hasOwnProperty("$And")){l.collection.type="And"}else if(e[0].hasOwnProperty("$Or")){l.collection.type="Or"}else if(e[0].hasOwnProperty("$Eq")){l.collection.type="Eq"}else if(e[0].hasOwnProperty("$Ne")){l.collection.type="Ne"}else if(e[0].hasOwnProperty("$Not")){l.collection.type="Not"}else if(e[0].hasOwnProperty("$Gt")){l.collection.type="Gt"}else if(e[0].hasOwnProperty("$Ge")){l.collection.type="Ge"}else if(e[0].hasOwnProperty("$Lt")){l.collection.type="Lt"}else if(e[0].hasOwnProperty("$Le")){l.collection.type="Le"}else if(e[0].hasOwnProperty("$Apply")){l.collection.type="Apply"}else if(typeof e[0]==="object"){l.collection.type="Record"}else{l.collection.type="String"}}}else{if(e.$Type){var f=e.$Type;r.type=f}var c=[];Object.keys(e).forEach(function(r){if(r!=="$Type"&&r!=="$If"&&r!=="$Apply"&&r!=="$And"&&r!=="$Or"&&r!=="$Ne"&&r!=="$Gt"&&r!=="$Ge"&&r!=="$Lt"&&r!=="$Le"&&r!=="$Not"&&r!=="$Eq"&&!r.startsWith("@")){c.push($(e[r],r,t,n,i))}else if(r.startsWith("@")){N(a({},r,e[r]),t,n,i)}});r.propertyValues=c}return r}function m(e,t){if(!t.hasOwnProperty(e)){t[e]={target:e,annotations:[]}}return t[e]}function g(e){return e.filter(function(e){if(e.Target&&e.Target.$AnnotationPath){return e.Target.$AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.Chart")===-1}else{return true}})}function b(e){return e.filter(function(e){return e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"})}function O(e){return e.filter(function(e){return e.$AnnotationPath!=="@com.sap.vocabularies.UI.v1.Chart"})}function N(e,t,n,i){if(Object.keys(e).length===0){return}var r=m(t,n);if(!i.MicroChart){delete e["@com.sap.vocabularies.UI.v1.Chart"]}var o=function(o){var f=e[o];switch(o){case"@com.sap.vocabularies.UI.v1.HeaderFacets":if(!i.MicroChart){f=g(f);e[o]=f}break;case"@com.sap.vocabularies.UI.v1.Identification":if(!i.IntentBasedNavigation){f=b(f);e[o]=f}break;case"@com.sap.vocabularies.UI.v1.LineItem":if(!i.IntentBasedNavigation){f=b(f);e[o]=f}if(!i.MicroChart){f=g(f);e[o]=f}break;case"@com.sap.vocabularies.UI.v1.FieldGroup":if(!i.IntentBasedNavigation){f.Data=b(f.Data);e[o]=f}if(!i.MicroChart){f.Data=g(f.Data);e[o]=f}break;case"@com.sap.vocabularies.UI.v1.PresentationVariant":if(!i.Chart&&f.Visualizations){f.Visualizations=O(f.Visualizations);e[o]=f}break;default:break}var c=r;var s=o.split("@");if(s.length>2){c=m("".concat(t,"@").concat(s[1]),n);o=s[2]}else{o=s[1]}var p=o.split("#");var y=p[1];o=p[0];var u={term:"".concat(o),qualifier:y};var d="".concat(t,"@").concat(u.term);if(y){d+="#".concat(y)}var v=false;var A=typeof f;if(f===null){u.value={type:"Bool",Bool:f}}else if(A==="string"){u.value={type:"String",String:f}}else if(A==="boolean"){u.value={type:"Bool",Bool:f}}else if(A==="number"){u.value={type:"Int",Int:f}}else if(f.$If!==undefined){u.value={type:"If",If:f.$If}}else if(f.$And!==undefined){u.value={type:"And",And:f.$And}}else if(f.$Or!==undefined){u.value={type:"Or",Or:f.$Or}}else if(f.$Not!==undefined){u.value={type:"Not",Not:f.$Not}}else if(f.$Eq!==undefined){u.value={type:"Eq",Eq:f.$Eq}}else if(f.$Ne!==undefined){u.value={type:"Ne",Ne:f.$Ne}}else if(f.$Gt!==undefined){u.value={type:"Gt",Gt:f.$Gt}}else if(f.$Ge!==undefined){u.value={type:"Ge",Ge:f.$Ge}}else if(f.$Lt!==undefined){u.value={type:"Lt",Lt:f.$Lt}}else if(f.$Le!==undefined){u.value={type:"Le",Le:f.$Le}}else if(f.$Apply!==undefined){u.value={type:"Apply",Apply:f.$Apply,Function:f.$Function}}else if(f.$Path!==undefined){u.value={type:"Path",Path:f.$Path}}else if(f.$AnnotationPath!==undefined){u.value={type:"AnnotationPath",AnnotationPath:f.$AnnotationPath}}else if(f.$Decimal!==undefined){u.value={type:"Decimal",Decimal:parseFloat(f.$Decimal)}}else if(f.$EnumMember!==undefined){u.value={type:"EnumMember",EnumMember:"".concat(h(f.$EnumMember.split("/")[0]),"/").concat(f.$EnumMember.split("/")[1])}}else if(Array.isArray(f)){v=true;u.collection=f.map(function(e,t){return P(e,"".concat(d,"/").concat(t),n,i)});if(f.length>0){if(f[0].hasOwnProperty("$PropertyPath")){u.collection.type="PropertyPath"}else if(f[0].hasOwnProperty("$Path")){u.collection.type="Path"}else if(f[0].hasOwnProperty("$NavigationPropertyPath")){u.collection.type="NavigationPropertyPath"}else if(f[0].hasOwnProperty("$AnnotationPath")){u.collection.type="AnnotationPath"}else if(f[0].hasOwnProperty("$Type")){u.collection.type="Record"}else if(f[0].hasOwnProperty("$If")){u.collection.type="If"}else if(f[0].hasOwnProperty("$Or")){u.collection.type="Or"}else if(f[0].hasOwnProperty("$Eq")){u.collection.type="Eq"}else if(f[0].hasOwnProperty("$Ne")){u.collection.type="Ne"}else if(f[0].hasOwnProperty("$Not")){u.collection.type="Not"}else if(f[0].hasOwnProperty("$Gt")){u.collection.type="Gt"}else if(f[0].hasOwnProperty("$Ge")){u.collection.type="Ge"}else if(f[0].hasOwnProperty("$Lt")){u.collection.type="Lt"}else if(f[0].hasOwnProperty("$Le")){u.collection.type="Le"}else if(f[0].hasOwnProperty("$And")){u.collection.type="And"}else if(f[0].hasOwnProperty("$Apply")){u.collection.type="Apply"}else if(typeof f[0]==="object"){u.collection.type="Record"}else{u.collection.type="String"}}}else{var w={propertyValues:[]};if(f.$Type){var T=f.$Type;w.type="".concat(T)}var E=[];for(var C in f){if(C!=="$Type"&&!C.startsWith("@")){E.push($(f[C],C,d,n,i))}else if(C.startsWith("@")){N(a({},C,f[C]),d,n,i)}}w.propertyValues=E;u.record=w}u.isCollection=v;c.annotations.push(u);l=o};for(var l in e){o(l)}}function A(e,t,n){var i={_type:"Property",name:n,fullyQualifiedName:"".concat(t.fullyQualifiedName,"/").concat(n),type:e.$Type,maxLength:e.$MaxLength,precision:e.$Precision,scale:e.$Scale,nullable:e.$Nullable};return i}function w(e,t,n){var i=[];if(e.$ReferentialConstraint){i=Object.keys(e.$ReferentialConstraint).map(function(n){return{sourceTypeName:t.name,sourceProperty:n,targetTypeName:e.$Type,targetProperty:e.$ReferentialConstraint[n]}})}var r={_type:"NavigationProperty",name:n,fullyQualifiedName:"".concat(t.fullyQualifiedName,"/").concat(n),partner:e.$Partner,isCollection:e.$isCollection?e.$isCollection:false,containsTarget:e.$ContainsTarget,targetTypeName:e.$Type,referentialConstraint:i};return r}function T(e,t,n){var i={_type:"EntitySet",name:t,navigationPropertyBinding:{},entityTypeName:e.$Type,fullyQualifiedName:"".concat(n,"/").concat(t)};return i}function E(e,t,n){return{_type:"Singleton",name:t,navigationPropertyBinding:{},entityTypeName:e.$Type,fullyQualifiedName:"".concat(n,"/").concat(t),nullable:true}}function C(e,t,n){var i={_type:"TypeDefinition",name:t.replace("".concat(n,"."),""),fullyQualifiedName:t,underlyingType:e.$UnderlyingType};return i}function I(e,t,n){var i={_type:"ComplexType",name:t.replace("".concat(n,"."),""),fullyQualifiedName:t,properties:[],navigationProperties:[]};var r=Object.keys(e).filter(function(t){if(t!="$Key"&&t!="$kind"){return e[t].$kind==="Property"}}).sort(function(e,t){return e>t?1:-1}).map(function(t){return A(e[t],i,t)});i.properties=r;var a=Object.keys(e).filter(function(t){if(t!="$Key"&&t!="$kind"){return e[t].$kind==="NavigationProperty"}}).sort(function(e,t){return e>t?1:-1}).map(function(t){return w(e[t],i,t)});i.navigationProperties=a;return i}function L(e,t){if(!e.$Key&&e.$BaseType){return L(t["".concat(e.$BaseType)],t)}return e.$Key||[]}function k(e,t,n,i){var r=L(e,i);var a={_type:"EntityType",name:t.replace("".concat(n,"."),""),fullyQualifiedName:t,keys:[],entityProperties:[],navigationProperties:[],actions:{}};var o=Object.keys(e).filter(function(t){if(t!="$Key"&&t!="$kind"){return e[t].$kind==="Property"}}).map(function(t){return A(e[t],a,t)});var l=Object.keys(e).filter(function(t){if(t!="$Key"&&t!="$kind"){return e[t].$kind==="NavigationProperty"}}).map(function(t){return w(e[t],a,t)});a.keys=r.map(function(e){return o.find(function(t){return t.name===e})}).filter(function(e){return e!==undefined});a.entityProperties=o;a.navigationProperties=l;return a}function S(e,t,n,i){var r="";var a="".concat(e);var o=e.substr(n.length+1);if(t.$IsBound){var l=t.$Parameter[0];r=l.$Type;if(l.$isCollection===true){a="".concat(e,"(Collection(").concat(r,"))")}else{a="".concat(e,"(").concat(r,")")}}else{a="".concat(i,"/").concat(o)}var f=t.$Parameter||[];return{_type:"Action",name:o,fullyQualifiedName:a,isBound:t.$IsBound,isFunction:false,sourceType:r,returnType:t.$ReturnType?t.$ReturnType.$Type:"",parameters:f.map(function(e){var t;return{_type:"ActionParameter",fullyQualifiedName:"".concat(a,"/").concat(e.$Name),isCollection:(t=e.$isCollection)!==null&&t!==void 0?t:false,name:e.$Name,type:e.$Type}})}}function j(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:v;var n=e.getObject("/$");var r={};var a=[];var o=[];var l=[];var f=[];var c=[];var s=n.$EntityContainer;var p="";var y=Object.keys(n).filter(function(e){return n[e].$kind==="Schema"});if(y&&y.length>0){p=y[0].substr(0,y[0].length-1)}else if(a&&a.length){p=a[0].fullyQualifiedName.replace(a[0].name,"");p=p.substr(0,p.length-1)}Object.keys(n).forEach(function(e){if(e!=="$kind"){switch(n[e].$kind){case"EntityType":var t=k(n[e],e,p,n);if(n.$Annotations[t.fullyQualifiedName]&&n.$Annotations[t.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.FilterFacets"]){n.$Annotations[t.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.FilterFacets"].forEach(function(e){e.ID=e.ID||i([{Facet:e}])})}t.entityProperties.forEach(function(e){if(!n.$Annotations[e.fullyQualifiedName]){n.$Annotations[e.fullyQualifiedName]={}}if(!n.$Annotations[e.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]){n.$Annotations[e.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]={$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{$Path:e.name}}}});a.push(t);break;case"ComplexType":var r=I(n[e],e,p);f.push(r);break;case"TypeDefinition":var o=C(n[e],e,p);c.push(o);break}}});var u=n[s];Object.keys(u).forEach(function(e){if(e!=="$kind"){switch(u[e].$kind){case"EntitySet":var t=T(u[e],e,s);o.push(t);break;case"Singleton":var n=E(u[e],e,s);l.push(n);break}}});var d={_type:"EntityContainer",name:"",fullyQualifiedName:""};if(s){d={_type:"EntityContainer",name:s.replace("".concat(p,"."),""),fullyQualifiedName:s}}o.forEach(function(e){var t=u[e.name].$NavigationPropertyBinding;if(t){Object.keys(t).forEach(function(n){var i=o.find(function(e){return e.name===t[n]});if(i){e.navigationPropertyBinding[n]=i}})}});var $=Object.keys(n).filter(function(e){return Array.isArray(n[e])&&n[e].length>0&&n[e][0].$kind==="Action"}).reduce(function(e,t){var i=n[t];i.forEach(function(n){e.push(S(t,n,p,s))});return e},[]);for(var h in n.$Annotations){N(n.$Annotations[h],h,r,t)}var P=Object.keys(r).sort(function(e,t){return e.length>=t.length?1:-1}).map(function(e){return r[e]});var m=[];return{identification:"metamodelResult",version:"4.0",schema:{entityContainer:d,entitySets:o,entityTypes:a,complexTypes:f,typeDefinitions:c,singletons:l,associations:[],associationSets:[],actions:$,namespace:p,annotations:{metamodelResult:P}},references:m}}n.prepareEntityTypes=j;var G={};function D(t,n){var i=t.id;if(!G.hasOwnProperty(i)){var r=j(t,n);try{G[i]=e.convert(r)}catch(e){throw new Error(e)}}return G[i]}n.convertTypes=D;function M(e){var t=e.getModel();if(!t.isA("sap.ui.model.odata.v4.ODataMetaModel")){throw new Error("This should only be called on a ODataMetaModel")}return D(t)}n.getConvertedTypes=M;function B(e){delete G[e.id]}n.deleteModelCacheData=B;function F(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=D(e.getModel());var i=e.getPath();var a=i.split("/");var o=a[1];var l=2;if(n.entityContainer.fullyQualifiedName===o){o=a[2];l++}var f=n.entitySets.find(function(e){return e.name===o});if(!f){f=n.singletons.find(function(e){return e.name===o})}var c=a.slice(l).join("/");var s=[f];while(c&&c.length>0&&c.startsWith("$NavigationPropertyBinding")){var p;var y=c.split("/");var u=0;var d=void 0,v=void 0;y=y.slice(1);while(!d&&y.length>u){if(y[u]!=="$NavigationPropertyBinding"){v=y.slice(0,u+1).join("/").replace("/$NavigationPropertyBinding","");d=f&&f.navigationPropertyBinding[v]}u++}if(!d){v=y[0]}var $=((p=v)===null||p===void 0?void 0:p.split("/"))||[];var h=f&&f.entityType;var P=r($),m;try{var g=function(){var e=m.value;var t=h&&h.navigationProperties.find(function(t){return t.name===e});if(t){s.push(t);h=t.targetType}else{return"break"}};for(P.s();!(m=P.n()).done;){var b=g();if(b==="break")break}}catch(e){P.e(e)}finally{P.f()}f=f&&d||f&&f.navigationPropertyBinding[y[0]];if(f){s.push(f)}y=y.slice($.length||1);if(y.length&&y[0]==="$"){y.shift()}c=y.join("/")}if(c.startsWith("$Type")){if(c.startsWith("$Type@")){c=c.replace("$Type","")}else{c=a.slice(3).join("/")}}if(f&&c.length){var O=f.entityType.resolvePath(c,t);if(O){if(t){O.visitedObjects=s.concat(O.visitedObjects)}}else if(f.entityType&&f.entityType.actions){var N=f.entityType&&f.entityType.actions;var A=c.split("/");if(N[A[0]]){var w=N[A[0]];if(A[1]&&w.parameters){var T=A[1];return w.parameters.find(function(e){return e.fullyQualifiedName.endsWith("/".concat(T))})}else if(c.length===1){return w}}}return O}else{if(t){return{target:f,visitedObjects:s}}return f}}n.convertMetaModelContext=F;function Q(e,t){var n=D(e.getModel());var i=F(e,true);var r;if(t&&t.getPath()!=="/"){r=Q(t)}return _(i,n,r)}n.getInvolvedDataModelObjects=Q;function _(e,t,n,i){var r;var a=e.visitedObjects.filter(function(e){return e&&e.hasOwnProperty("_type")&&e._type!=="EntityType"&&e._type!=="EntityContainer"});if(e.target&&e.target.hasOwnProperty("_type")&&e.target._type!=="EntityType"&&a[a.length-1]!==e.target&&!i){a.push(e.target)}var o=[];var l=a[0];var f=l;var c=l.entityType;var s;var p=[];for(var y=1;y<a.length;y++){s=a[y];if(s._type==="NavigationProperty"){var u;p.push(s.name);o.push(s);c=s.targetType;var d=(u=f)===null||u===void 0?void 0:u.navigationPropertyBinding[p.join("/")];if(d){f=d;p=[]}}if(s._type==="EntitySet"||s._type==="Singleton"){f=s;c=f.entityType}}if(p.length>0){f=undefined}if(n&&n.startingEntitySet!==l){var v=a.indexOf(n.startingEntitySet);if(v!==-1){var $=a.slice(0,v);n.startingEntitySet=l;n.navigationProperties=$.filter(function(e){return e._type==="NavigationProperty"}).concat(n.navigationProperties)}}var h={startingEntitySet:l,targetEntitySet:f,targetEntityType:c,targetObject:e.target,navigationProperties:o,contextLocation:n,convertedTypes:t};if(!((r=h.targetObject)!==null&&r!==void 0&&r.hasOwnProperty("_type"))&&i){h.targetObject=s}if(!h.contextLocation){h.contextLocation=h}return h}n.getInvolvedDataModelObjectFromPath=_;return n},false);
//# sourceMappingURL=MetaModelConverter.js.map