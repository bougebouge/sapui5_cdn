{"version":3,"file":"ActivitySync.js","names":["sap","ui","define","CommonUtils","ActivityBase","CollaborationCommon","MessageBox","_exports","CollaborationUtils","Activity","isCollaborationConnected","initializeCollaboration","endCollaboration","broadcastCollaborationMessage","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","MYACTIVITY","ACTIVEUSERS","ACTIVITIES","isConnected","control","internalModel","getModel","send","action","content","clientContent","Array","isArray","join","LiveChange","myActivity","getProperty","setProperty","getWebSocketBaseURL","bindingContext","getMetaModel","getObject","isCollaborationEnabled","view","getBindingContext","connect","me","getMe","Promise","resolve","webSocketBaseURL","serviceUrl","getServiceUrl","requestProperty","then","sDraftUUID","message","messageReceive","e","reject","disconnect","_message$clientConten","_activities","activeUsers","activities","activityKey","metaPath","getMetaPath","userAction","clientAction","sender","id","userID","name","userDescription","initials","formatInitials","color","getUserColor","mactivity","Join","JoinEcho","findIndex","user","unshift","Leave","allActivities","removeUserActivities","bag","activity","p","Change","metaPaths","split","map","path","currentMetaPath","_message$clientConten2","_currentActivities","nesteedMessage","currentActivities","getActivityKey","update","Create","Delete","Activate","information","getText","navigate","Discard","initJSONModel","parts","concat","slice","Undo","a","appComponent","getAppComponent","metaModel","currentPage","getCurrentPage","sideEffectsService","getSideEffectsService","currentContext","currentPath","getPath","changedDocument","deletedObjects","parentDeletedIndex","deletedObject","startsWith","onClose","targetContext","bindContext","getBoundContext","getController","_routing","navigateBackFromContext","activityPath","replace","sideEffects","$PropertyPath","entityType","getEntityTypeFromContext","entityTypeSideEffects","getODataEntitySideEffects","relevantSideEffects","fromEntries","entries","x","_x$1$SourceProperties","SourceProperties","TargetProperties","targetProperty","requestSideEffects","editFlow","updateDocument","routing","getCurrentPageView","substring","lastIndexOf"],"sources":["ActivitySync-dbg.js"],"mappings":"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"}