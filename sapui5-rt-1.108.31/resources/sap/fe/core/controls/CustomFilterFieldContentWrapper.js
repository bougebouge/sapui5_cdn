/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/ClassSupport","sap/fe/core/helpers/SemanticDateOperators","sap/ui/base/ManagedObjectObserver","sap/ui/core/Control","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/ui/mdc/field/ConditionsType","sap/ui/model/json/JSONModel"],function(e,t,i,n,r,o,a,l){"use strict";var u,s,d,c,p,f,h,v,b,g,y,_,C,m,w,O;var F={};var M=e.property;var A=e.implementInterface;var I=e.event;var L=e.defineUI5Class;var S=e.aggregation;function E(e,t,i,n){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function j(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function z(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;V(e,t)}function V(e,t){V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return V(e,t)}function P(e,t,i,n,r){var o={};Object.keys(n).forEach(function(e){o[e]=n[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o);if(r&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(r):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function D(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}var T=(u=L("sap.fe.core.controls.CustomFilterFieldContentWrapper"),s=A("sap.ui.core.IFormContent"),d=M({type:"sap.ui.core.CSSSize",defaultValue:null}),c=M({type:"boolean",defaultValue:false}),p=M({type:"object[]",defaultValue:[]}),f=S({type:"sap.ui.core.Control",multiple:false,isDefault:true}),h=I(),u(v=(b=(O=function(e){z(n,e);function n(){var t;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++){n[r]=arguments[r]}t=e.call.apply(e,[this].concat(n))||this;E(t,"__implements__sap_ui_core_IFormContent",g,j(t));E(t,"width",y,j(t));E(t,"formDoNotAdjustWidth",_,j(t));E(t,"conditions",C,j(t));E(t,"content",m,j(t));E(t,"conditionsChange",w,j(t));return t}F=n;n.render=function e(t,i){t.openStart("div",i);t.style("min-height","1rem");t.style("width",i.width);t.openEnd();t.renderControl(i.getContent());t.close("div")};n._filterValuesToConditions=function e(i,n){var l={operators:[]},u=[];if(n){l={operators:[n]}}if(i===""){i=[]}else if(typeof i==="object"&&i.hasOwnProperty("operator")&&i.hasOwnProperty("values")){l={operators:[i.operator]};i=i.values}else if(i!==undefined&&typeof i!=="object"&&typeof i!=="string"){throw new Error("FilterUtils.js#_filterValuesToConditions: Unexpected type of input parameter vValues: ".concat(typeof i))}var s=new a(l);var d=Array.isArray(i)?i:[i];if(typeof n==="string"&&t.getSemanticDateOperations().includes(n)){u=[r.createCondition(n,d,null,null,o.NotValidated)]}else{u=d.map(function(e){var t=e===null||e===void 0?void 0:e.toString(),i=s.parseValue(t,"any");return i===null||i===void 0?void 0:i[0]}).filter(function(e){return e!==undefined})}return u};n._conditionsToFilterModelString=function e(t,i){var n=new a(i);return t.map(function(e){return n.formatValue([e],"any")||""}).filter(function(e){return e!==""}).join(",")};var u=n.prototype;u._handleFilterModelChange=function e(t){var i=this.getObjectBinding("filterValues").getPath(),n=t.getSource().getProperty(i);this.updateConditionsByFilterValues(n)};u._handleConditionsChange=function e(t){this.updateFilterModelByConditions(t)};u.init=function t(){e.prototype.init.call(this);this._conditionsObserver=new i(this._observeChanges.bind(this));this._conditionsObserver.observe(this,{properties:["conditions"]});this._filterModel=new l;this._filterModel.attachPropertyChange(this._handleFilterModelChange,this);this.setModel(this._filterModel,n.FILTER_MODEL_ALIAS)};u.clone=function t(i,r){var t=e.prototype.clone.call(this,i,r);t.setModel(t._filterModel,n.FILTER_MODEL_ALIAS);return t};u._observeChanges=function e(t){if(t.name==="conditions"){this._handleConditionsChange(t.current)}};u.getContent=function e(){return this.getAggregation("content")};u.getConditions=function e(){return this.getProperty("conditions")};u.setConditions=function e(t){this.setProperty("conditions",t||[]);return this};u.getFilterModelAlias=function e(){return n.FILTER_MODEL_ALIAS};u.updateConditionsByFilterValues=function e(t,i){var r=n._filterValuesToConditions(t,i);this.setConditions(r)};u.updateFilterModelByConditions=function e(t){var i;var r=((i=t[0])===null||i===void 0?void 0:i.operator)||"";var o=r!==""?{operators:[r]}:{operators:[]};if(this.getBindingContext(n.FILTER_MODEL_ALIAS)){var a;var l=n._conditionsToFilterModelString(t,o);this._filterModel.setProperty((a=this.getBindingContext(n.FILTER_MODEL_ALIAS))===null||a===void 0?void 0:a.getPath(),l)}};u.getAccessibilityInfo=function e(){var t;var i=this.getContent();return(i===null||i===void 0?void 0:(t=i.getAccessibilityInfo)===null||t===void 0?void 0:t.call(i))||{}};u.getIdForLabel=function e(){var t=this.getContent();return t===null||t===void 0?void 0:t.getIdForLabel()};return n}(n),O.FILTER_MODEL_ALIAS="filterValues",O),g=P(b.prototype,"__implements__sap_ui_core_IFormContent",[s],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),y=P(b.prototype,"width",[d],{configurable:true,enumerable:true,writable:true,initializer:null}),_=P(b.prototype,"formDoNotAdjustWidth",[c],{configurable:true,enumerable:true,writable:true,initializer:null}),C=P(b.prototype,"conditions",[p],{configurable:true,enumerable:true,writable:true,initializer:null}),m=P(b.prototype,"content",[f],{configurable:true,enumerable:true,writable:true,initializer:null}),w=P(b.prototype,"conditionsChange",[h],{configurable:true,enumerable:true,writable:true,initializer:null}),b))||v);F=T;return F},false);
//# sourceMappingURL=CustomFilterFieldContentWrapper.js.map