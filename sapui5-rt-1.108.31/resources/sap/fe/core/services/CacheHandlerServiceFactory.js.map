{"version":3,"file":"CacheHandlerServiceFactory.js","names":["sap","ui","define","hash","CacheManager","Service","ServiceFactory","_exports","_catch","body","recover","result","e","then","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","getMetadataETag","sUrl","sETag","mUpdatedMetaModelETags","Promise","resolve","jQuery","ajax","method","done","oResponse","sTextStatus","jqXHR","getResponseHeader","fail","CacheHandlerService","_Service","apply","this","arguments","_proto","init","_this","oContext","getContext","oFactory","factory","mSettings","settings","metaModel","Error","oMetaModel","oAppComponent","appComponent","oComponent","component","initPromise","fetchEntityContainer","mCacheNeedsInvalidate","exit","removeGlobalInstance","validateCacheKey","sCacheIdentifier","_this3","_temp4","bCacheNeedUpdate","sCacheKey","_temp5","get","mCacheOutput","mMetaModelETags","getETags","JSON","stringify","_temp","mCachedETags","parse","cachedETags","all","keys","map","aValidETags","indexOf","some","viewCacheKey","reject","invalidateIfNeeded","sCacheKeys","sDataSourceETags","mCacheKeys","set","forEach","sMetaModelKey","Date","toISOString","oManifestContent","getManifest","sManifestHash","sapApp","viewData","getViewData","getInterface","CacheHandlerServiceFactory","_ServiceFactory","_this4","_len","length","args","Array","_key","call","concat","_oInstanceRegistry","_proto2","createInstance","oServiceContext","_this5","sMetaModelId","getId","cacheHandlerInstance","assign","scopeObject","scopeType","catch","getInstance"],"sources":["CacheHandlerServiceFactory-dbg.js"],"mappings":"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"}