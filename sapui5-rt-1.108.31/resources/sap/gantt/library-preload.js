//@ui5-bundle sap/gantt/library-preload.js
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/AdhocLine", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.AdhocLine",{metadata:{library:"sap.gantt",properties:{stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"float",defaultValue:1},strokeDasharray:{type:"string"},strokeOpacity:{type:"float",defaultValue:1},timeStamp:{type:"string"},description:{type:"string"}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChart", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/performance/Measurement","sap/ui/events/KeyCodes","sap/ui/Device","sap/ui/core/Core","sap/ui/table/TreeTable","./GanttChartBase","./misc/Utility","./drawer/ShapeInRow","./drawer/ShapeCrossRow","./drawer/CursorLine","./drawer/NowLine","./drawer/VerticalLine","./drawer/AdhocLine","./drawer/CalendarPattern","./drawer/ExpandedBackground","./misc/AxisOrdinal","./misc/Format","./eventHandler/AutoScrollHandler","./eventHandler/MouseWheelHandler","./eventHandler/TimePeriodZoomHandler","./axistime/ProportionZoomStrategy","./config/TimeHorizon","./misc/ShapeSelectionModel","./misc/ShapeManager","./eventHandler/ShapeResizeHandler","./eventHandler/ShapeHoverHandler","./eventHandler/TimePopoverHandler","./eventHandler/BirdEyeHandler","sap/ui/thirdparty/d3"],function(jQuery,e,t,i,a,o,s,r,n,h,g,l,d,p,c,u,f,_,S,v,m,T,b,w,y,D,R,C,H,x){"use strict";var M=r.extend("sap.gantt.GanttChart",{metadata:{designtime:"sap/gantt/designtime/GanttChart.designtime",aggregations:{_treeTable:{type:"sap.ui.table.TreeTable",multiple:false,visibility:"hidden"}}}});M.prototype.init=function(){r.prototype.init.apply(this,arguments);t.start("GanttChart init","GanttPerf:GanttChart init function");this._oTT=new s(this.getId()+"-table",{visibleRowCountMode:"Auto",minAutoRowCount:1,columnHeaderVisible:false});jQuery.extend(this.mDefaultTableProperties,{selectionBehavior:sap.ui.table.SelectionBehavior.RowOnly});this.setTableProperties(jQuery.extend({},this.mDefaultTableProperties));this._oTT.setUseFlatMode(true);this._bJSONTreeBinding=true;this._oRowStatusMap={};this._oTT._bVariableRowHeightEnabled=true;var e=this;this._oTT._collectRowHeights=function(t){var i=s.prototype._collectRowHeights.apply(this,arguments);if(t){return i}e._aHeights=i;if(e._aHeights[0]!==undefined&&e._aHeights[0]!==0){e._iInferedBaseRowHeightOnTT=e._aHeights[0]}var a=e.getBaseRowHeight();var o=e._getTTFirstRenderingRowIndex();var r=e._aHeights.length;var n=a;var h=e._getDrawingData([o,o+r-1]);if(h&&h.length>0){n=h[0].rowSpan*a}for(var g=0;g<r;g++){var l=this.getContextByIndex(o+g);if(l){var d;if(e._bJSONTreeBinding){d=l.getObject()}else if(e._aFilteredRowData){d=e._aFilteredRowData[g]}var p=d?d.uid:undefined;if(p&&e._oRowStatusMap[p]){e._aHeights[g]=e._oRowStatusMap[p].visibleRowSpan*a}else{e._aHeights[g]=n}}else{e._aHeights[g]=a}}return e._aHeights};var i=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this._oColumn=new sap.ui.table.Column({template:new sap.ui.core.HTML({content:'<div tabIndex = " 0 " class=" sapGanttCellTransparent ">'+i.getText("XCEL_GANTT_CELL")+"</div>"})});this._oTT.addColumn(this._oColumn);this.setAggregation("_treeTable",this._oTT);this._oTT.attachEvent("_rowsUpdated",this._onTTRowUpdate.bind(this));this._oTT.attachRowSelectionChange(this._onRowSelectionChange,this);this._oTT.addEventDelegate({onAfterRendering:this._bindScrollLogicForTT},this);this._oTT.addEventDelegate({onAfterRendering:this._initialSvgDrawing},this);this._oShapeInRowDrawer=new h;this._oShapeCrossRowDrawer=new g;this._oCursorLineDrawer=new l;this._oCalendarPatternDrawer=new u;this._oExpandedBackgroundDrawer=new f;this._oAxisOrdinal=undefined;this._aFilteredRowData=undefined;this._oStatusSet=null;this._nLowerRange=0;this._nUpperRange=0;this._oShapeSelection=new y({selectionMode:this.getShapeSelectionMode(),ganttChart:this});this._oShapeManager=new D(this);this._bMouseDown=false;this._bDragging=false;this._bDragStart=false;this._oDraggingData=undefined;this._lastHoverRowIndex=undefined;this._oChartSchemesConfigMap={};this._oChartSchemesConfigMap[sap.gantt.config.DEFAULT_CHART_SCHEME_KEY]=sap.gantt.config.DEFAULT_CHART_SCHEME;this._oObjectTypesConfigMap={};this._oObjectTypesConfigMap[sap.gantt.config.DEFAULT_OBJECT_TYPE_KEY]=sap.gantt.config.DEFAULT_OBJECT_TYPE;this._fExtendFactor=.382;this._setAxisTimeStrategy(new b);this._mTimeouts={};this._bSuppressSetVisibleHorizon=false;this._oAutoScrollHandler=new v;this._oMouseWheelHandler=new m(this);this._oTimePeriodZoomHandler=new T(this);this._oShapeResizeHandler=new R(this);this._oShapeHoverHandler=new C(this);this._oTimePopoverHandler=new H(this);this._oBirdEyeHandler=new x(this);t.end("GanttChart init")};M.prototype.setAxisTimeStrategy=function(e){this._setAxisTimeStrategy(e);this._oStatusSet=null;this._draw(true);return this};M.prototype._setAxisTimeStrategy=function(e){this.setAggregation("axisTimeStrategy",e,true);this._createAxisTime(e);e.attachEvent("_redrawRequest",this._onRedrawRequest,this)};M.prototype._onRedrawRequest=function(e){var t=e.getParameter("forceUpdate");var i=e.getParameter("valueBeforeChange");var a=e.getParameter("reasonCode");var o=e.getParameter("originEvent");if(a!=="totalHorizonUpdated"&&i){this._oLastVisibleHorizon=i;if(a!=="syncVisibleHorizon"){var s=this.getAxisTimeStrategy();var r=s.getVisibleHorizon();var n=this.getVisibleWidth();this.fireEvent("_visibleHorizonUpdate",{reasonCode:a,visibleHorizon:r,visibleWidth:n,originEvent:o})}}this.redraw(t)};M.prototype.setTimeAxis=function(e){this.setProperty("timeAxis",e,true);if(e){var t=e.getZoomStrategy();this.setAxisTimeStrategy(new b({totalHorizon:e.getPlanHorizon().clone(),visibleHorizon:e.getInitHorizon().clone(),timeLineOption:t[e.getGranularity()],coarsestTimeLineOption:t[e.getCoarsestGranularity()],finestTimeLineOption:t[e.getFinestGranularity()],timeLineOptions:t}))}else{this.setAxisTimeStrategy(null)}};M.prototype.setLocale=function(e){this.setProperty("locale",e,true);var t=this.getAxisTime();if(t){t.setLocale(e);this._draw(true)}return this};M.prototype.setChartSchemes=function(e){this.setProperty("chartSchemes",e,true);this._oChartSchemesConfigMap={};if(e){for(var t=0;t<e.length;t++){this._oChartSchemesConfigMap[e[t].getKey()]=e[t]}}this._draw(true);return this};M.prototype.setObjectTypes=function(e){this.setProperty("objectTypes",e,true);this._oObjectTypesConfigMap={};if(e){for(var t=0;t<e.length;t++){this._oObjectTypesConfigMap[e[t].getKey()]=e[t]}}this._draw(true);return this};M.prototype.setSelectionMode=function(e){this.setProperty("selectionMode",e,true);this.setShapeSelectionMode(e);switch(e){case sap.gantt.SelectionMode.Multiple:case sap.gantt.SelectionMode.MultiWithKeyboard:this.setTableProperties({selectionMode:sap.ui.table.SelectionMode.MultiToggle});break;case sap.gantt.SelectionMode.None:case sap.gantt.SelectionMode.Single:this.setTableProperties({selectionMode:e});break}return this};M.prototype.setShapeSelectionMode=function(e){this.setProperty("shapeSelectionMode",e,true);this._oShapeSelection.setSelectionMode(e);return this};M.prototype.setTableProperties=function(t){if(t.hasOwnProperty("selectionBehavior")){if(t.selectionBehavior!==sap.ui.table.SelectionBehavior.RowOnly){delete t.selectionBehavior;e.warning("Change GanttChart's TreeTable selectionBehavior is not allowed!")}}r.prototype.setTableProperties.apply(this,arguments);return this};M.prototype._createAxisTime=function(e){if(e){e.createAxisTime(this.getLocale());this._nLowerRange=Math.ceil(this.getAxisTime().getViewRange()[0]);this._nUpperRange=Math.ceil(this.getAxisTime().getViewRange()[1])}};M.prototype.setShapes=function(e){this.setProperty("shapes",e,true);if(this.getAxisTimeStrategy().getAxisTime()&&e&&e.length>0){this._shapesInited=false;this._ensureShapesCreated(function(){this._draw(true)}.bind(this))}return this};M.prototype.setTimeZoomRate=function(e){this.setProperty("timeZoomRate",e,true);var t=this.getAxisTimeStrategy();if(t.onSetTimeZoomRate){t.onSetTimeZoomRate(e)}return this};M.prototype.redraw=function(e){if(!this._initHorizonApplied){return}if(e){this.resetWidthInfo()}this._draw(e)};M.prototype.resetWidthInfo=function(){this.getAxisTime().setViewOffset(0);this._oStatusSet=null;this._nLowerRange=Math.ceil(this.getAxisTime().getViewRange()[0]);this._nUpperRange=Math.ceil(this.getAxisTime().getViewRange()[1])};M.prototype.updateRelationships=function(e){var t=this.getBinding("relationships");if(t){var i=t.getContexts(0,0);if(i&&i.length>0){this._aRelationshipsContexts=i}}this._prepareRelationshipDataFromModel()};M.prototype.addRelationship=function(t){e.error('The control manages the relationships aggregation. The method "addRelationship" cannot be used programmatically!')};M.prototype.insertRelationship=function(t,i){e.error('The control manages the relationships aggregation. The method "insertRelationship" cannot be used programmatically!')};M.prototype.removeRelationship=function(t){e.error('The control manages the relationships aggregation. The method "removeRelationship" cannot be used programmatically!')};M.prototype.getRelationships=function(){e.error('The control manages the relationships aggregation. The method "getRelationships" cannot be used programmatically!')};M.prototype.destroyRelationships=function(){e.error('The control manages the relationships aggregation. The method "destroyRelationships" cannot be used programmatically!')};M.prototype.indexOfRelationship=function(t){e.error('The control manages the relationships aggregation. The method "indexOfRelationship" cannot be used programmatically!')};M.prototype.removeAllRelationships=function(){e.error('The control manages the relationships aggregation. The method "removeAllRelationships" cannot be used programmatically!')};M.prototype._bindAggregation=function(e,t){if(e=="rows"&&t){var i=this.getModel(t.model);var a=this.getBindingContext(t.model);if(a&&i){t.path=i.resolve(t.path,a)}this._getConfiguredRowKeys(t);this._oTT.bindRows(t);this._bJSONTreeBinding=i instanceof sap.ui.model.json.JSONModel}else{return r.prototype._bindAggregation.apply(this,arguments)}};M.prototype.onBeforeRendering=function(){this._bTableReady=false;this._iSvgHeight=0;this._detachEvents();this._shapesInited=false;this._ensureShapesCreated()};M.prototype._detachEvents=function(){var e=jQuery(this.getDomSelectorById("svg-ctn"));var t=jQuery(this.getDomSelectorById("header"));e.unbind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel);e.unbind("wheel.sapUiTableMouseWheel",this._onMouseWheel);t.unbind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel);t.unbind("wheel.sapUiTableMouseWheel",this._onMouseWheel);e.unbind("contextmenu",this._onContextMenu);e.unbind("mouseleave",this._onSvgMouseLeave);e.unbind("mouseenter",this._onSvgMouseEnter);e.unbind("mousedown",this._onSvgMouseDown);e.unbind("mousemove",this._onSvgMouseMove);e.unbind("mouseup",this._onSvgMouseUp);e.unbind("dblclick",this._onSvgDoubleClick);var i="keydown."+this.getId();jQuery(document.body).unbind(i);if(a.support.touch){e.unbind("touchstart",this._onSvgTouchstart);e.unbind("touchend",this._onSvgTouchend);e.unbind("touchmove",this._onSvgTouchmove);t.unbind("touchstart",this._onSvgTouchstart);t.unbind("touchend",this._onSvgTouchend);t.unbind("touchmove",this._onSvgTouchmove)}this._oTimePeriodZoomHandler.detachEvents()};M.prototype.onAfterRendering=function(){this._attachEvents()};M.prototype._attachEvents=function(){var e=jQuery(this.getDomSelectorById("svg-ctn"));var t=jQuery(this.getDomSelectorById("header"));if(a.browser.firefox){e.bind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel.bind(this));t.bind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel.bind(this))}else{e.bind("wheel.sapUiTableMouseWheel",this._onMouseWheel.bind(this));t.bind("wheel.sapUiTableMouseWheel",this._onMouseWheel.bind(this))}e.bind("contextmenu",this._onContextMenu);e.bind("mouseenter",this._onSvgMouseEnter.bind(this));e.bind("mouseleave",this._onSvgMouseLeave.bind(this));e.bind("mousedown",this._onSvgMouseDown.bind(this));e.bind("mousemove",this._onSvgMouseMove.bind(this));e.bind("mouseup",this._onSvgMouseUp.bind(this));e.bind("dblclick",this._onSvgDoubleClick.bind(this));var i="keydown."+this.getId();jQuery(document.body).bind(i,this._onKeyDown.bind(this));if(a.support.touch){e.bind("touchstart",this._onSvgTouchstart.bind(this));e.bind("touchend",this._onSvgTouchend.bind(this));e.bind("touchmove",this._onSvgTouchmove.bind(this));t.bind("touchstart",this._onSvgTouchstart.bind(this));t.bind("touchend",this._onSvgTouchend.bind(this));t.bind("touchmove",this._onSvgTouchmove.bind(this))}this._oTimePeriodZoomHandler.attachEvents();this.attachEvent("_autoScrolling",this._onAutoScrolling,this)};M.prototype._onAutoScrolling=function(e){if(this._oTimePeriodZoomHandler.isActive()){this._oTimePeriodZoomHandler.handleAutoScrolling(e)}this._oShapeResizeHandler._handleShapeResizingWhenAutoScroll()};M.prototype._getMouseOrTouchPoint=function(e){if(e.targetTouches&&e.targetTouches.length>0){return e.targetTouches[e.targetTouches.length-1]}else if(e.changedTouches&&e.changedTouches.length>0){return e.changedTouches[e.changedTouches.length-1]}return{pageX:e.pageX,pageY:e.pageY}};M.prototype._onTouchScrollStart=function(e){if(a.system.combi||a.system.phone||a.system.tablet){this._aTouchStartPosition=null;this._bIsScrollVertical=null;var t=this._getMouseOrTouchPoint(e);this._aTouchStartPosition=[t.pageX,t.pageY];var i=this.getTTVsbDom();if(i){this._iTouchScrollTop=i.scrollTop}var o=this.getTTHsbDom();if(o){this._iTouchScrollLeft=o.scrollLeft}}};M.prototype._onTouchScroll=function(e){if((a.system.combi||a.system.phone||a.system.tablet)&&this._aTouchStartPosition){var t=this._getMouseOrTouchPoint(e);var i=t.pageX-this._aTouchStartPosition[0];var o=t.pageY-this._aTouchStartPosition[1];if(this._bIsScrollVertical==null){this._bIsScrollVertical=Math.abs(o)>Math.abs(i)}if(this._bIsScrollVertical){var s=sap.ui.table.SharedDomRef.VerticalScrollBar;var r=this._oTT.getDomRef(s);if(r){var n=this._iTouchScrollTop-o;if(n>0&&n<this._oTT.getDomRef(s+"-content").clientHeight-r.clientHeight-1){this._preventBubbleAndDefault(e)}r.scrollTop=n}}else{var h=sap.ui.table.SharedDomRef.HorizontalScrollBar;var g=this._oTT.getDomRef(h);if(g){var l=this._iTouchScrollLeft-i;if(l>0&&l<this._oTT.getDomRef(h+"-content").clientWidth-g.clientWidth-1){this._preventBubbleAndDefault(e)}g.scrollLeft=l}}this._bScrolling=true}};M.prototype._onMouseWheel=function(e){this._oMouseWheelHandler.handleEvent(e)};M.prototype.syncMouseWheelZoom=function(e){this._oMouseWheelHandler.handleEvent(e.originEvent,true)};M.prototype.handleExpandChartChange=function(e,t,i){return this._ensureShapesCreated(function(){i=i?i:this._getSelectionHandler().getSelectedIndices();if(i.length>0){this._updateRowStatusMap(e,t,i);this._oTT.updateRows("change",{})}}.bind(this))};M.prototype.invertRowExpandStatus=function(e,t){e=e?e:this._getSelectionHandler().getSelectedIndices();if(e.length>0&&t){for(var i=0;i<e.length;i++){var a=e[i];var o=this._ifRowExpanded(a,t);if(o!==null){this._updateRowStatusMap(!o,t,[a])}}this._oTT.updateRows("change",{})}};M.prototype._ifRowExpanded=function(e,t){var i=this._oTT;var a=i.getBinding();var o=a.getContextByIndex(e);var s=null;if(o){var r=o.getObject();var n=r.uid;var h=this._getRowSpanWithData(r,t),g=h.name;if(n&&this._oRowStatusMap[n]&&this._oRowStatusMap[n][g]){s=true}else{s=false}}return s};M.prototype._updateRowStatusMap=function(e,t,i){var a=this._oTT;var o=a.getBinding();for(var s=0;s<i.length;s++){var r=i[s];var n=o.getContextByIndex(r);if(n){var h;if(this._bJSONTreeBinding){h=n.getObject()}else{h=this._aFilteredRowData[r].data}var g=h.uid;if(g){var l=this._getRowSpanWithData(h,t),d=l.name;if(e){if(this._oRowStatusMap[g]){this._oRowStatusMap[g][d]=l}else{this._oRowStatusMap[g]={};this._oRowStatusMap[g][d]=l}}else if(!e&&this._oRowStatusMap[g]){delete this._oRowStatusMap[g][d];delete this._oRowStatusMap[g].visibleRowSpan;if(jQuery.isEmptyObject(this._oRowStatusMap[g])){delete this._oRowStatusMap[g];continue}}this._getDrawingData([r,r])}}}};M.prototype.isRowExpanded=function(){var e=!jQuery.isEmptyObject(this._oRowStatusMap);return e};M.prototype._getRowSpanWithData=function(e,t){var i=1,a=null,o=null,s=this.getRowTypeName();for(var r=0;r<t.length;r++){var n=t[r];var h;if(this._oChartSchemesConfigMap[n]&&this._oChartSchemesConfigMap[n].getModeKey()){h=this._oChartSchemesConfigMap[n].getModeKey()}else{h=this.getMode()}if(this._oObjectTypesConfigMap[e[s]]&&this._oObjectTypesConfigMap[e[s]].getExpandedChartSchemeKeys().length>0){var g=this._oObjectTypesConfigMap[e[s]].getExpandedChartSchemeKeys();if(jQuery.inArray(n,g)>-1){var l=this._collectDataNameForValidChartScheme(n,h);if(l){o=l.drawData;i+=l.rowSpan;a=n}}}}return{rowSpan:i,name:a,data:o}};M.prototype._updateTableRowHeights=function(){if(this._aHeights){this._oTT._updateRowHeights(this._aHeights,false)}};M.prototype.notifySourceChange=function(){this._oTT.setFirstVisibleRow(0);this.resetRowStatusMap()};M.prototype.resetRowStatusMap=function(){this._oRowStatusMap={}};M.prototype._collectDataNameForValidChartScheme=function(e,t){if(this._oChartSchemesConfigMap[e]){var i=[];var a=this._oChartSchemesConfigMap[e].getShapeKeys();var o=this._oChartSchemesConfigMap[e].getRowSpan();var s=this._oChartSchemesConfigMap[e].getRowIndexName();var r=this._oShapeManager.mShapeConfig;jQuery.each(a,function(e,a){if(r[a]){var o=r[a].getModeKeys();if(o&&o.length>0&&jQuery.inArray(t,o)>-1||o.length==0||t==sap.gantt.config.DEFAULT_MODE_KEY){i.push(r[a].getShapeDataName())}}});if(i.length>0&&o>=1){return{drawData:i,rowSpan:o,rowIndexName:s}}}};M.prototype._composeParameterForClickPosition=function(e){var t=jQuery(this.getDomSelectorById("svg"));var i=this._getMouseXPos(e);var a=this._getSvgCoodinateByDiv(t[0],i,e.pageY);var o=i-t.offset().left||e.offsetX;var s=e.pageY-t.offset().top||e.offsetY;if(!this._oAxisOrdinalOfVisibleRow){return null}var r=this.getAxisTime().viewToTime(o);var h=this._oAxisOrdinalOfVisibleRow.viewToRowIndex(s,this._getVisibleRowCount())+this._oTT.getFirstVisibleRow();var g=n.getRowDatumByEventTarget(e.target);var l=g?g.objectInfoRef:null;var d=false;var p=this._oAxisOrdinal.viewToElementIndex(s);var c=this._aFilteredRowData[p];if(c&&c.index&&c.index!==0){d=true}var u={startTime:r,svgPoint:a,leadingRowNum:h,leadingRowInfo:l,rowIndex:p,rowInfo:c,isExpandedRow:d};return u};M.prototype.getAllRowData=function(){var e=this._oTT.getBinding("rows");return this._getDrawingData([0,e.getLength()-1])};M.prototype.getAllSelections=function(){var e=this.getSelectedRows();var t=this.getSelectedShapes();var i=this.getSelectedRelationships();return{rows:e,shapes:t,relationships:i}};M.prototype.getSelectedRows=function(){var e=this._getSelectionHandler().getSelectedIndices();var t=this._getDrawingData(undefined,e);var i=[];for(var a=0;a<t.length;a++){if(t[a]&&!t[a].parentId){i.push(t[a])}}return i};M.prototype.getSelectedShapes=function(){var e=this._oShapeSelection.getSelectedShapeDatum();var t={};e.forEach(function(e){var i=this._oShapeSelection.getRowDatumByShapeUid(e.uid,this),a=n.getShapeDataNameByUid(e.uid);var o=t[a]||[];o.push({shapeUid:e.uid,shapeData:e,objectInfoRef:i});t[a]=o}.bind(this));return t};M.prototype.getSelectedRelationships=function(){return this._oShapeSelection.getSelectedRelationships()};M.prototype.getRowByShapeUid=function(e){return this._oShapeSelection.getRowDatumByShapeUid(e,this)};M.prototype.selectShapes=function(e,t){var i=this._oShapeSelection.selectShapes(e,t);if(i){this._drawSelectedShapes()}return this};M.prototype.selectByUid=function(e){var t=this._oShapeSelection.selectShapeByUid(e,this);if(t){this._drawSelectedShapes()}return this};M.prototype.deselectShapes=function(e){var t=this._oShapeSelection.deselectShapes(e);if(t){this._drawSelectedShapes()}return this};M.prototype.selectRowsAndShapes=function(e,t){if(!e||e.length===0){this.deselectShapes();this.deselectRows();return this}var i=[];var a=n.getRowDatumById(e,this.getId());jQuery.each(a,function(e,t){var a=t.shapeData;for(var o=0;o<a.length;o++){var s=a[o];if(this.isShapeSelectable(s)){i.push(s.__id__)}}}.bind(this));this._oShapeSelection.selectUnderlyingTableRows(e,this._oTT,t);var o=this._oShapeSelection.selectShapes(i,t);if(o){this._drawSelectedShapes()}return this};M.prototype.selectRelationships=function(e,t){var i=n.getShapeDatumById(e,this.getId());var a=this._oShapeSelection.selectRelationships(i,t);if(a){this._drawSelectedShapes()}return this};M.prototype.deselectRelationships=function(e){var t=this._oShapeSelection.deselectRelationships(e);if(t){this._drawSelectedShapes()}return this};M.prototype.selectRows=function(e,t){this._oShapeSelection.selectUnderlyingTableRows(e,this._oTT,t);return this};M.prototype.deselectRows=function(e){this._oShapeSelection.deselectUnderlyingTableRows(e,this._oTT);return this};M.prototype.expandToLevel=function(e){this._oTT.expandToLevel(e);return this};M.prototype.expand=function(e){this._oTT.expand(e);return this};M.prototype.collapse=function(e){this._oTT.collapse(e);return this};M.prototype.getVisibleRowCount=function(){return this._oTT.getVisibleRowCount()};M.prototype._onRowSelectionChange=function(e){this.fireRowSelectionChange({originEvent:e})};M.prototype._selectionChange=function(e,t,i,a){var o=n.getRowDatumByEventTarget(a.target);var s=o?o.objectInfoRef:null;var r=this._oShapeSelection.changeShapeSelection(e,s,t,this._bDragging,this._oShapeResizeHandler.getIsResizing());return r};M.prototype._syncTTSelection=function(e){t.start("GanttChart syncTTSelection","GanttPerf:GanttChart syncTTSelection function");var i=e.shiftKey;var a=e.ctrlKey;var o=jQuery(this.getDomSelectorById("svg"))[0];var s=this._getSvgCoodinateByDiv(o,this._getMouseXPos(e),e.pageY-window.pageYOffset);var r=parseInt(this._oAxisOrdinalOfVisibleRow.viewToElementIndex(s.y),10);if(r<0){return false}var n=this._oTT.getRows();var h=n[r].getIndex();var g=this._getSelectionHandler();var l=typeof g.getSelectionMode==="function"?g.getSelectionMode():g._getSelectionMode();if(h>=0&&l!==sap.ui.table.SelectionMode.None){if(l===sap.ui.table.SelectionMode.Single){if(!g.isIndexSelected(h)){g.setSelectedIndex(h)}else{g.clearSelection()}}else{a=true;if(i){var d=g.getSelectedIndex();if(d>=0){if(d<h){g.addSelectionInterval(d,h)}else{g.addSelectionInterval(h,d)}}else{g.setSelectedIndex(h)}}else if(!g.isIndexSelected(h)){if(a){g.addSelectionInterval(h,h)}else{g.setSelectedIndex(h)}}else if(a){g.removeSelectionInterval(h,h)}else if(g.getSelectedIndices().length>1){g.setSelectedIndex(h)}}}t.end("GanttChart syncTTSelection")};M.prototype._setEventStatus=function(e){switch(e){case"dragEnter":this._bDragStart=true;break;case"mouseDown":this._bMouseDown=true;this._bDragging=false;this._bDragStart=false;this._bScrolling=false;break;case"mouseUp":this._bMouseDown=false;this._bScrolling=false;break;case"shapeDragStart":this._bDragStart=true;break;case"shapeDragging":if(this._bDragStart){this._bDragging=true}break;case"shapeDragEnd":this._bDragging=false;this._bDragStart=false;this._oDraggingData=undefined;break;case"dragLeave":this._bDragStart=false;break;default:break}};M.prototype._handleShapeDragStart=function(e){var t=jQuery(this.getDomSelectorById("svg"));var i=d3.select(e.target).datum();var a=e.target.getAttribute("class").split(" ")[0];var s=this._oShapeManager.isShapeDraggable(i,a);if(i&&s){var r=this._oShapeSelection.getRowDatumByShapeUid(i.uid,this);if(r){var n=this._getMouseXPos(e)-t.offset().left||e.offsetX;var h=e.pageY-t.offset().top||e.offsetY;var g,l,d,p;if(e.target.getAttribute("x")&&e.target.getAttribute("width")){g=parseInt(e.target.getAttribute("x"),10);l=parseInt(e.target.getAttribute("y"),10);d=parseInt(e.target.getAttribute("width"),10);p=parseInt(e.target.getAttribute("height"),10)}else if(i.startTime){var c=this.getAxisTime().timeToView(S.abapTimestampToDate(i.startTime));var u=this.getAxisTime().timeToView(S.abapTimestampToDate(i.endTime));if(o.getConfiguration().getRTL()){g=u;d=c-u>0?c-u:1}else{g=c;d=u-c>0?u-c:1}l=h;p=r.rowHeight/2}else{g=n;d=1;l=h;p=r.rowHeight/2}var f={x:n,y:h,shapeX:g,shapeWidth:d,shapeY:l,shapeHeight:p};var _=[];_.push({shapeData:i,objectInfo:r});var v=this._oShapeSelection.getSelectedShapeDatum();for(var m=0;m<v.length;m++){if(v[m].uid!==i.uid&&this._oShapeManager.isShapeDraggable(v[m])){_.push({shapeData:v[m],objectInfo:this._oShapeSelection.getRowDatumByShapeUid(v[m].uid,this)})}}var T=this._getDraggingDomObjs(e);this._oDraggingData={sourceShapeData:_,dragStartPoint:f,sourceSvgId:this.getId(),targetSvgId:this.getId(),domObject:T.contentDoms,groupDom:T.groupDom};this._setEventStatus("shapeDragStart");jQuery(document.body).unbind("mousemove.ganttChartDragDrop");jQuery(document).unbind("mouseup.ganttChartDragDrop");jQuery(document.body).bind("mousemove.ganttChartDragDrop",this._handleShapeDragging.bind(this));jQuery(document).bind("mouseup.ganttChartDragDrop",this._handleShapeDragEnd.bind(this));if(this.getEnableShapeTimeDisplay()){this._oTimePopoverHandler.handleTimePopover(e)}}}};M.prototype._getDraggingDomObjs=function(e){var t={};var i=d3.select(e.target)[0][0];var a;if(i.parentElement){a=i.parentElement}else if(i.parentNode){a=i.parentNode}if(a&&a.getAttribute("class")){var o=a.getAttribute("class");var s=o.split(" ")[0];if(sap.ui.getCore().byId(s)instanceof sap.gantt.shape.Group){t.groupDom=a;t.contentDoms=a.childNodes}else if(sap.ui.getCore().byId(s)instanceof sap.gantt.shape.Text){t.groupDom=a.parentElement;t.contentDoms=a.parentElement.childNodes}}else{t.groupDom=i;t.contentDoms=[i]}return t};M.prototype._handleShapeDragging=function(e){if(!a.support.touch&&(e.button!==0||e.buttons===0||e.ctrlKey)){return false}var t=o.getConfiguration().getRTL();var i=jQuery(this.getDomSelectorById("svg"));var s=Math.abs((this._getMouseXPos(e)-i.offset().left||e.offsetX)-this._oDraggingData.dragStartPoint.x);var r=Math.abs((e.pageY-i.offset().top||e.offsetY)-this._oDraggingData.dragStartPoint.y);if(s>3||r>3){var n=d3.select("#dragDropShadow");var h=n[0];if(this._oDraggingData===undefined){if(!n.empty()){n.remove()}}else{var g=this._oDraggingData.dragStartPoint.shapeX;var l=this._oDraggingData.dragStartPoint.shapeY;var d=this._oDraggingData.dragStartPoint.x;var p=this._oDraggingData.dragStartPoint.y;var c=12;var u=10;if(n.empty()||h===null){this._handleDragWithoutSelection(e);var f=this._oDraggingData.sourceShapeData.length;h=d3.select("body").append("div").attr("id","dragDropShadow");h.classed("sapGanttDraggingShadow",true);var _=12;var S=12;var v=this._oDraggingData.groupDom.getBoundingClientRect();if(v){c=v.width;u=v.height;_=t?_:Math.ceil(v.right)}if(a.browser.safari){c=this._oDraggingData.dragStartPoint.shapeWidth;u=this._oDraggingData.dragStartPoint.shapeHeight}var m=u/2;var T='width="'+(c+5)+'" '+'height="'+(u+10)+'"';var b=jQuery(this._oDraggingData.groupDom).clone();this._resetShadowRelativePosition(b,undefined,undefined,d3.select(this._oDraggingData.groupDom).data());var w="<svg "+T+">"+this._getOuterHTML(b)+"</svg>";jQuery("#dragDropShadow").append(w);var y=h.select("svg");y.select("g").attr("opacity",.5);y.append("text").attr("x",c/2-S/2).attr("y",m+4).attr("fill","blue").attr("font-size",S).text(function(){return f})}var D;var R=this._getMouseXPos(e);if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.Start){D=t?R-this._oDraggingData.dragStartPoint.shapeWidth:R}else if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.None){D=g+R-d}else if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.End){D=t?R:R-this._oDraggingData.dragStartPoint.shapeWidth}var C=e.pageY;var H=e.pageY;H=l+C-p;var x=D+"px";var M=H+"px";var I=c+5+"px";var A=u+5+"px";d3.select("#dragDropShadow").style({left:x,top:M,width:I,height:A});jQuery(document.body).addClass("sapGanttDraggingCursor sapGanttDraggingOverflow");jQuery("svg").addClass("sapGanttDraggingCursor");this._setEventStatus("shapeDragging");this._handleAutoScroll(e)}}};M.prototype._resetShadowRelativePosition=function(e,t,i,a){var o=this;if(e.attr("x")!==undefined){if(!t){e.attr("x",0);e.attr("y",2)}}var s=e.children();if(s&&s.length>0){if(!t){s=s.filter(function(e,t){var i=jQuery(t);if(i.is("text")||i.is("title")){return false}var o=null;if(t.getAttribute("class")){o=sap.ui.getCore().byId(t.getAttribute("class").split(" ")[0])}if(i.attr("x")==undefined||i.attr("y")==undefined||o==null||o.getTime(a[0])==""){return false}return true});var r,n;s.each(function(e,t){var i=jQuery(t);var a=i.attr("x");var o=i.attr("y")-2;if(!r){r=a}else{r=a<r?a:r}if(!n){n=o}else{n=o<n?o:n}});if(!r||!n){return}s.each(function(e,t){var i=jQuery(t);i.attr("x",i.attr("x")-r);i.attr("y",i.attr("y")-n);o._resetShadowRelativePosition(i,r,n)})}else{s.each(function(e,a){var s=jQuery(a);if(s.attr("x")!==undefined){s.attr("x",s.attr("x")-t);s.attr("y",s.attr("y")-i)}o._resetShadowRelativePosition(s,t,i)})}}};M.prototype._handleDragWithoutSelection=function(e){var t=this._oDraggingData.sourceShapeData[0];if(!this._oShapeSelection.isShapeSelected(t.shapeData.uid)){var i=false;if(!e.ctrlKey){this._oDraggingData.sourceShapeData.splice(1,this._oDraggingData.sourceShapeData.length-1);i=this._oShapeSelection.clearAllSelections()}this._oShapeSelection.selectByShapeData(t.shapeData);this._drawSelectedShapes();this.fireShapeSelectionChange({originEvent:e});if(i){this.fireRelationshipSelectionChange({originEvent:e})}}};M.prototype._handleAutoScroll=function(e){return this._oAutoScrollHandler.autoScroll(this,e)};M.prototype._handleShapeDragEnd=function(e){this._oAutoScrollHandler.stop();var t=d3.select("#dragDropShadow");if(!t.empty()){t.remove()}if(this._bDragging&&this._oDraggingData!==undefined){var i=this.getId();this._collectDraggingShapeData(this._oDraggingData,e);this.fireShapeDragEnd({originEvent:e,sourceSvgId:this._oDraggingData.sourceSvgId,targetSvgId:i,sourceShapeData:this._oDraggingData.sourceShapeData,targetData:this._oDraggingData.targetData})}jQuery(document.body).unbind("mousemove.ganttChartDragDrop");jQuery(document).unbind("mouseup.ganttChartDragDrop");jQuery("svg").removeClass("sapGanttDraggingCursor");jQuery(document.body).removeClass("sapGanttDraggingCursor sapGanttDraggingOverflow");this._setEventStatus("shapeDragEnd")};M.prototype._collectDraggingShapeData=function(e,t){var i=jQuery(this.getDomSelectorById("svg"));var a=parseInt(this._getMouseXPos(t)-i.offset().left||t.offsetX,10);var s=e.dragStartPoint.x;var r=a-parseInt(s,10);var n;var h=S.abapTimestampToDate(e.sourceShapeData[0].shapeData.endTime)-S.abapTimestampToDate(e.sourceShapeData[0].shapeData.startTime);if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.Start){n=a}else if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.None){n=parseInt(e.dragStartPoint.shapeX,10)+r}else if(this.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.End){n=a-parseInt(e.dragStartPoint.shapeWidth,10)}var g,l;if(o.getConfiguration().getRTL()===true){l=this.getAxisTime().viewToTime(n).getTime();g=new Date(l-h).getTime()}else{g=this.getAxisTime().viewToTime(n).getTime();l=new Date(g+h).getTime()}var d=this._composeParameterForClickPosition(t);var p=d?d.rowInfo:undefined;e.targetData={cursorTimestamp:this.getAxisTime().viewToTime(a).getTime(),shapeTimestamp:{startTime:g,endTime:l},mouseTimestamp:{startTime:g,endTime:l},mode:this.getMode(),objectInfo:p}};M.prototype.setDraggingData=function(e){if(e!==undefined){this._oDraggingData=e}if(this._oDraggingData!==undefined){this._oDraggingData.targetSvgId=this.getId();jQuery(document.body).unbind("mousemove.ganttChartDragDrop");jQuery(document).unbind("mouseup.ganttChartDragDrop");jQuery(document.body).bind("mousemove.ganttChartDragDrop",this._handleShapeDragging.bind(this));jQuery(document).bind("mouseup.ganttChartDragDrop",this._handleShapeDragEnd.bind(this));jQuery(document.body).unbind("mousemove.shapeDragDrop");jQuery(document).unbind("mouseup.shapeDragDrop");jQuery(document.body).bind("mousemove.shapeDragDrop",this._oTimePopoverHandler._handleTimePopoverDragging.bind(this._oTimePopoverHandler));jQuery(document).bind("mouseup.shapeDragDrop",this._oTimePopoverHandler._handleTimePopoverEnd.bind(this._oTimePopoverHandler));this._setEventStatus("dragEnter")}};M.prototype.setTimePopoverData=function(e){this._oTimePopoverHandler.setCurrentPopoverData(e)};M.prototype._onSvgMouseEnter=function(e){if(e.button===0&&e.buttons!==0&&e.target&&(e.target.id===this.getId()+"-svg-ctn"||e.target.id===this.getId()+"-svg"||this._mouseInSvgCtn(e))){this.fireChartDragEnter({originEvent:e})}};M.prototype._onSvgMouseLeave=function(e){if(e.target&&(e.target.id===this.getId()+"-svg-ctn"||e.target.id===this.getId()+"-svg"||!this._mouseInSvgCtn(e))){if(this._bDragStart&&this._oDraggingData!==undefined){this._handleDragLeave(e)}this._destroyCursorLine();this._handleHoverLeave();this._oShapeHoverHandler.handleShapeHover(null,e)}};M.prototype._mouseInSvgCtn=function(e){var t=jQuery(this.getDomSelectorById("svg-ctn"));var i=t.width()-(o.getConfiguration().getRTL()||jQuery(this.getTTVsbDom()).css("display")=="none"?0:jQuery(this.getTTVsbDom()).width());var a=t.height();var s=t.offset();var r=this._getMouseXPos(e)-s.left;var n=(e.pageY||e.clientY)-s.top;if(n>=0&&n<a&&r>=0&&r<i){return true}return false};M.prototype._onSvgMouseDown=function(e){this._prepareSelection(e);this._prepareDragging(e);this._oShapeResizeHandler.handleShapeResize(e)};M.prototype._onSvgMouseMove=function(e){this._drawCursorLine(e);this._handleHover(e)};M.prototype._onContextMenu=function(e){e.preventDefault()};M.prototype._onSvgMouseUp=function(e){if(e.button==2){this._handleRightClick(e)}else if(e.button==0&&!this._bDragging&&this._bMouseDown&&!this._oShapeResizeHandler.getIsResizing()){this._handleSelectionChange(e)}};M.prototype._onSvgDoubleClick=function(e){if(!this._bDragging&&!this._oShapeResizeHandler.getIsResizing()&&!e.ctrlKey&&!e.shiftKey&&!(a.os.name===a.os.OS.MACINTOSH&&e.metaKey)){var t=this._composeParameterForClickPosition(e);this.fireChartDoubleClick({objectInfo:t?t.rowInfo:undefined,leadingRowInfo:t?t.leadingRowInfo:undefined,timestamp:t?t.startTime.getTime():undefined,svgId:this.getId()+"-svg",svgCoordinate:t?t.svgPoint:undefined,effectingMode:this.getMode(),originEvent:e})}};M.prototype._onSvgTouchstart=function(e){this._prepareSelection(e);this._onTouchScrollStart(e)};M.prototype._onSvgTouchmove=function(e){this._onTouchScroll(e)};M.prototype._onSvgTouchend=function(e){if(this._bScrolling){this._setEventStatus("mouseUp")}};M.prototype._onKeyDown=function(e){if(e.which===i.Z&&this._oTimePeriodZoomHandler.isTimePeriodZoomEnabled()){this._oTimePeriodZoomHandler.invertActiveStatus()}};M.prototype._preventBubbleAndDefault=function(e){e.preventDefault();e.stopPropagation()};M.prototype._prepareSelection=function(e){if(!a.support.touch&&e.button!==0){return false}if(!this._bDragging&&!this._oShapeResizeHandler.getIsResizing()){this._setEventStatus("mouseDown")}};M.prototype._prepareDragging=function(e){if(e.button==0){if(this._oTimePeriodZoomHandler&&this._oTimePeriodZoomHandler.isActive()){this._oTimePeriodZoomHandler.handleDragStart(e);this._preventBubbleAndDefault(e)}else{var t=d3.select(e.target).data()[0];var i,a;if(e.target.getAttribute("class")){i=e.target.getAttribute("class").split(" ")[0];a=d3.select(e.target).classed("sapUiShapeResizingCursor")}if(!a&&i&&t&&this.isShapeSelectable(t,i)){if(this._bMouseDown){this._handleShapeDragStart(e)}this._preventBubbleAndDefault(e)}}}};M.prototype.syncTimePeriodZoomStatus=function(e){if(e){this._oTimePeriodZoomHandler.activate(true)}else{this._oTimePeriodZoomHandler.deactivate(true)}};M.prototype.syncTimePeriodZoomOperation=function(e,t,i){this._oTimePeriodZoomHandler.syncTimePeriodZoomOperation(e,t,i)};M.prototype._handleRightClick=function(e){var t=this._composeParameterForClickPosition(e);this.fireChartRightClick({objectInfo:t?t.rowInfo:undefined,leadingRowInfo:t?t.leadingRowInfo:undefined,timestamp:t?t.startTime.getTime():undefined,svgId:this.getId()+"-svg",svgCoordinate:t?t.svgPoint:undefined,effectingMode:this.getMode(),originEvent:e})};M.prototype._handleClick=function(e){var t=this._composeParameterForClickPosition(e);this.fireChartClick({objectInfo:t?t.rowInfo:undefined,leadingRowInfo:t?t.leadingRowInfo:undefined,timestamp:t?t.startTime.getTime():undefined,svgId:this.getId()+"-svg",svgCoordinate:t?t.svgPoint:undefined,effectingMode:this.getMode(),originEvent:e})};M.prototype._drawCursorLine=function(e){if(this.getEnableCursorLine()){var t=jQuery(this.getDomSelectorById("svg"));var i=this._getSvgCoodinateByDiv(t[0],this._getMouseXPos(e)-window.pageXOffset,e.pageY||e.clientY);this._oCursorLineDrawer.drawSvg(d3.selectAll(".sapGanttChartSvg"),d3.selectAll(".sapGanttChartHeaderSvg"),this.getLocale(),i)}};M.prototype._destroyCursorLine=function(){if(this.getEnableCursorLine()){this._oCursorLineDrawer.destroySvg(d3.selectAll(".sapGanttChartSvg"),d3.selectAll(".sapGanttChartHeaderSvg"))}};M.prototype._handleHover=function(e){var t=this._composeParameterForClickPosition(e);var i=t?t.leadingRowNum-this._oTT.getFirstVisibleRow():-1;i=i<0?-1:i;var a=t?t.isExpandedRow:false;var o=d3.select(e.target).data()[0];if(o){var s=this._getMouseXPos(e)-jQuery(this.getDomSelectorById("svg")).offset().left||e.offsetX;this._oShapeResizeHandler.checkShapeResizable(o,e.target,t.svgPoint?t.svgPoint.x:s)}this._oShapeHoverHandler.handleShapeHover(o,e);if(i>-1&&(o!==undefined&&o.uid!==this._lastHoverShapeUid||o===undefined&&this._lastHoverShapeUid!==undefined||i!==this._lastHoverRowIndex)){this.fireChartMouseOver({objectInfo:t?t.rowInfo:undefined,leadingRowInfo:t?t.leadingRowInfo:undefined,timestamp:t?t.startTime.getTime():undefined,svgId:this.getId()+"-svg",svgCoordinate:t?t.svgPoint:undefined,effectingMode:this.getMode(),originEvent:e});if(o!==undefined){this._lastHoverShapeUid=o.uid}else{this._lastHoverShapeUid=undefined}}if(i>-1&&i!==this._lastHoverRowIndex){var r=this._oTT;var n=r.getRows()[i];if(n){r.$().find(".sapUiTableRowHvr").trigger("mouseout");if(!a){n.$().trigger("mouseover")}}}if(i!==this._lastHoverRowIndex){this._lastHoverRowIndex=i}};M.prototype._handleDragLeave=function(e){this._oDraggingData.targetSvgId=undefined;this._setEventStatus("dragLeave");this.fireChartDragLeave({originEvent:e,draggingSource:this._oDraggingData,timePopoverData:this._oTimePopoverHandler.getCurrentPopoverData()})};M.prototype._handleHoverLeave=function(){var e=this._oTT;e.$().find(".sapUiTableRowHvr").trigger("mouseleave");this._lastHoverShapeUid=undefined;this._lastHoverRowIndex=-1};M.prototype._handleSelectionChange=function(e){var t=d3.select(e.target).datum();var i;if(e.target.getAttribute("class")){i=e.target.getAttribute("class").split(" ")[0]}var o={};if(t!==undefined&&this.isShapeSelectable(t,i)){var s=e.ctrlKey||a.os.name===sap.ui.Device.os.OS.MACINTOSH&&e.metaKey;o=this._selectionChange(t,s,e.shiftKey,e)}else{if(!(this.getParent()instanceof sap.gantt.GanttChartWithTable)||this.getParent().getTableProperties().selectionBehavior!==sap.ui.table.SelectionBehavior.RowSelector){var r=this._composeParameterForClickPosition(e);if(r&&!r.isExpandedRow){this._syncTTSelection(e)}else{return null}}if(this.getShapeSelectionMode()!==sap.gantt.SelectionMode.MultiWithKeyboard){o.shapeSelectionChange=this._oShapeSelection.clearShapeSelection();o.relationshipSelectionChange=this._oShapeSelection.clearRelationshipSelection()}}if(o.shapeSelectionChange||o.relationshipSelectionChange){this._drawSelectedShapes()}this._setEventStatus("mouseUp");if(o.shapeSelectionChange){this.fireShapeSelectionChange({originEvent:e})}if(o.relationshipSelectionChange){this.fireRelationshipSelectionChange({originEvent:e})}this._handleClick(e)};M.prototype._bindScrollLogicForTT=function(){this._bindHorizontalScroll();this._bindVerticalScroll()};M.prototype._bindHorizontalScroll=function(){this._updateScrollLeft();var e=jQuery(this.getTTHsbDom());e.unbind("scroll.sapUiTableHScroll");e.unbind("scroll.sapUiTableHScrollForGanttChart",this._onHSbScroll);e.bind("scroll.sapUiTableHScrollForGanttChart",jQuery.proxy(this._onHSbScroll,this))};M.prototype._bindVerticalScroll=function(){var e=jQuery(this.getTTVsbDom());e.unbind("scroll.sapUiTableVScrollForGanttChart",this._onVSbScroll);e.bind("scroll.sapUiTableVScrollForGanttChart",jQuery.proxy(this._onVSbScroll,this))};M.prototype._getSvgHeight=function(){return this._oTT.$().find(".sapUiTableCCnt").height()};M.prototype._getRowHeights=function(){return this._aHeights};M.prototype.setBaseRowHeight=function(e){this.setProperty("baseRowHeight",e,true);this._oTT.setRowHeight(e);return this};M.prototype._setInferedBaseRowHeight=function(e){this._iInferedBaseRowHeight=e};M.prototype.getBaseRowHeight=function(){return this._iInferedBaseRowHeight?this._iInferedBaseRowHeight:this._iInferedBaseRowHeightOnTT};M.prototype._initialSvgDrawing=function(){if(this.getBaseRowHeight()&&this._iSvgHeight!=this._getSvgHeight()){this._iSvgHeight=this._getSvgHeight();this._bTableReady=true;this._onTTRowUpdate()}};M.prototype._onHSbScroll=function(e){if(this._initHorizonApplied){var t=this._getHSBScrollLeft();if(!this._bSuppressSetVisibleHorizon){var i=this._getScrollRateByScrollLeft(t);var a=this._getVisibleHorizonByScrollRate(i);this._updateVisibleHorizon(a,"horizontalScroll")}this._bSuppressSetVisibleHorizon=false;var o=this.getAxisTimeStrategy();var s=o.getVisibleHorizon();var r=this.getVisibleWidth();this.fireHorizontalScroll({scrollSteps:t,startTime:s.getStartTime(),endTime:s.getEndTime(),visibleWidth:r});this._drawHeader()}};M.prototype._getScrollRateByScrollLeft=function(e){var t=this._oTT.$(sap.ui.table.SharedDomRef.HorizontalScrollBar+"-content");var i=t.width();var s=this.getVisibleWidth();var r=0;if(i!==s){if(o.getConfiguration().getRTL()===true&&a.browser.edge){r=(i-e-s)/(i-s)}else if(o.getConfiguration().getRTL()===true&&a.browser.safari){r=(i+e-s)/(i-s)}else{r=e/(i-s)}r=r<0?0:r;r=r>1?1:r}return r};M.prototype._getScrollRateByHorizon=function(e){var t=0;var i=this._nUpperRange-this._nLowerRange;var a=this.getVisibleWidth();if(this._initHorizonApplied&&i!==a){var s;if(o.getConfiguration().getRTL()){s=this.getAxisTime().timeToView(S.abapTimestampToDate(e.getEndTime()),true);t=s/(i-a)}else{s=this.getAxisTime().timeToView(S.abapTimestampToDate(e.getStartTime()),true);t=s/(i-a)}t=t<0?0:t;t=t>1?1:t}return t};M.prototype._getHSBScrollLeftByScrollRate=function(e){var t=this._oTT.$(sap.ui.table.SharedDomRef.HorizontalScrollBar+"-content");var i=t.width();var s=this.getVisibleWidth();var r=e*(i-s);if(o.getConfiguration().getRTL()&&a.browser.edge){r=i-s-r}else if(o.getConfiguration().getRTL()&&a.browser.safari){r=0-(i-s-r)}return r};M.prototype._getContentScrollLeftByScrollRate=function(e){var t=this._nUpperRange-this._nLowerRange;var i=this.getVisibleWidth();var a=e*(t-i);return a};M.prototype._getVisibleHorizonByScrollRate=function(e){var t=this._getContentScrollLeftByScrollRate(e);var i=this.getAxisTimeStrategy().getTotalHorizon();var a;var s={};var r=o.getConfiguration().getRTL();if(e===0){s.startTime=r?undefined:i.getStartTime();s.endTime=r?i.getEndTime():undefined}else if(e===1){s.startTime=r?i.getStartTime():undefined;s.endTime=r?undefined:i.getEndTime()}else{var n=this.getAxisTime().viewToTime(t,true);s.startTime=r?undefined:n;s.endTime=r?n:undefined}a=new w(s);return a};M.prototype.syncVisibleHorizon=function(e,t,i){var a=this.getAxisTimeStrategy();var o=a.getTotalHorizon();var s;if(t!==undefined){var r=this.getVisibleWidth();if(i){var h=a.getVisibleHorizon();var g=S.abapTimestampToDate(h.getStartTime());s=n.calculateHorizonByWidth(e,t,r,g)}else{s=n.calculateHorizonByWidth(e,t,r)}}else{s=e}if(o.getEndTime()<s.getEndTime()){var l=S.abapTimestampToDate(s.getEndTime()).getTime()-S.abapTimestampToDate(s.getStartTime()).getTime();var d=S.abapTimestampToDate(o.getEndTime());var p=new Date;p.setTime(d.getTime()-l);s=new w({startTime:p,endTime:d})}this._updateVisibleHorizon(s,"syncVisibleHorizon")};M.prototype._onVSbScroll=function(){if(!this._mTimeouts._drawSvg){this.$().find(".sapGanttChartSvg").css("transform","translateY("+-this._oTT.$().find(".sapUiTableCCnt").scrollTop()+"px)")}this.fireVerticalScroll({scrollSteps:this._oTT.getFirstVisibleRow(),scrollPosition:jQuery(this.getTTVsbDom()).scrollTop()})};M.prototype._hSbScrollLeft=function(e){var t=jQuery(this.getDomSelectorById("svg-ctn"));var i=jQuery(this.getDomSelectorById("header"));var s;if(o.getConfiguration().getRTL()===true){if(!a.browser.safari){s=this._oStatusSet.aViewBoundary[1]-i.width()-e;if(s<0){s=0}}else{s=0-e}}else{s=e}if(o.getConfiguration().getRTL()===true&&a.browser.firefox){if(Math.abs(t.scrollLeftRTL()-s)>1){t.scrollLeftRTL(s)}if(Math.abs(i.scrollLeftRTL()-s)>1){i.scrollLeftRTL(s)}}else{if(Math.abs(t.scrollLeft()-s)>1){t.scrollLeft(s)}if(Math.abs(i.scrollLeft()-s)>1){i.scrollLeft(s)}}};M.prototype._doBirdEye=function(e){this._oBirdEyeHandler.doBirdEye(e)};M.prototype.getLargestHorizonByDataRange=function(e,t,i){var a=this._oShapeManager.getAllShapeInstances();var o=[];if(a&&a.length>0){if(e===sap.gantt.config.BirdEyeRange.AllRows){o=o.concat(this.getAllRowData())}else if(e===sap.gantt.config.BirdEyeRange.VisibleRows){o=o.concat(this._aFilteredRowData)}else if(!e&&t>=0&&this._aFilteredRowData.length>t){o=o.concat(this._aFilteredRowData[t])}this._oShapeManager.collectDataForAllShapeInstances(o,this._oObjectTypesConfigMap,this._oChartSchemesConfigMap)}return this._oBirdEyeHandler.calculateLargestVisibleHorizon(a,i)};M.prototype.doBirdEyeOnRow=function(e){var t=this._getTTFirstRenderingRowIndex();e=e-t;this._oBirdEyeHandler.doBirdEye(null,e)};M.prototype.jumpToPosition=function(e){if(e instanceof Date){this._updateVisibleHorizon(new w({startTime:e}),"jumpToPosition")}else if(e instanceof Array){this._updateVisibleHorizon(new w({startTime:e[0],endTime:e[1]}),"jumpToPosition")}else if(e===undefined){this._updateVisibleHorizon(this.getAxisTimeStrategy().getTotalHorizon(),"jumpToPosition")}};M.prototype._updateVisibleHorizon=function(e,t){var i=this.getAxisTimeStrategy();var a=this.getVisibleWidth();i.updateGanttVisibleWidth(a);i.setVisibleHorizonWithReason(e,t)};M.prototype._onTTRowUpdate=function(){if(this._bTableReady){this._syncSvgHeightWithTT();this._syncSvgDataWithTT();this._draw(true)}};M.prototype._syncSvgHeightWithTT=function(){var e=this.$().find(".sapGanttChartSvgCtn");e.height(this._getSvgHeight());var t=this.$().find(".sapGanttChartSvg");t.height(jQuery(this._oTT.$().find(".sapUiTableCtrlRowScroll:not(.sapUiTableCHT)")).height())};M.prototype._syncSvgDataWithTT=function(){var e=this._oTT.getBinding("rows");if(!e){return false}var t=this._getTTFirstRenderingRowIndex();var i=this._getVisibleRowCount();this._aFilteredRowData=[];this._aNonVisibleShapeData=[];var a=[];var o=[];var s=[t,t+i-1];var r=this._aRelationshipsContexts&&this._aRelationshipsContexts.length>0;if(r){e.getContexts(0,0);if(t>0){a=this._getDrawingData([0,t-1])}o=this._getDrawingData([t+i,e.getLength()-1]);e.getContexts(s[0],s[1])}this._aFilteredRowData=this._getDrawingData(s);this._aNonVisibleShapeData=a.concat(o);var n=this.getBaseRowHeight();if(!n){n=0}this._oAxisOrdinal=this._createAxisOrdinal(this._aFilteredRowData,n,0);this._cacheObjectPosition(this._aFilteredRowData,this._oAxisOrdinal);this._cacheObjectPosition(a,this._oAxisOrdinal,true);this._cacheObjectPosition(o,this._oAxisOrdinal,false);if(!this._aVisibleRange||this._aVisibleRange[0]!==s[0]||this._aVisibleRange[1]!==s[1]){this._aVisibleRange=s;return true}return false};M.prototype._cacheObjectPosition=function(e,t,i){if(e&&e.length>0){if(i===true){for(var a=0;a<e.length;a++){e[a].y=-100;e[a].rowHeight=t.getViewBandWidth()}}else if(i===false){for(var o=0;o<e.length;o++){e[o].y=t.getViewRange()[1]+100;e[o].rowHeight=t.getViewBandWidth()}}else{var s=[];var r=[];for(var n=0;n<e.length;n++){e[n].y=t.elementToView(e[n].uid);if(n>0){e[n-1].rowHeight=e[n].y-e[n-1].y}if(e[n].visibleRowSpan){e[n].visibleRowHeight=e[n].visibleRowSpan*t.getViewBandWidth();s.push(e[n].uid);r.push(e[n].visibleRowSpan)}}e[e.length-1].rowHeight=t.getViewRange()[1]-e[e.length-1].y;this._oAxisOrdinalOfVisibleRow=new _(s,r,this.getBaseRowHeight(),0)}}};M.prototype._prepareRelationshipDataFromModel=function(){this._aRelationships=[];if(this._aRelationshipsContexts){for(var e=0;e<this._aRelationshipsContexts.length;e++){var t=this._aRelationshipsContexts[e].getObject();if(t!==undefined){this._aRelationships.push(t)}}}n.generateUidForRelationship(this._aRelationships,this.getRlsIdName())};M.prototype._createAxisOrdinal=function(e,t,i){var a=e.map(function(e){return e.uid});var o=e.map(function(e){if(e.rowSpan){return e.rowSpan}else{return 1}});return new _(a,o,t,i)};M.prototype.getFilteredRowData=function(e){return this._aFilteredRowData};M.prototype._getDrawingData=function(e,t){var i=function(e,t,i,a){if(!e[t]){e.push({})}if(!e[t][i]){e[t][i]=[]}e[t][i].push(a)};var a,o,s,r,h,g;var l=this.getRowIdName();var d=this.getRowTypeName();var p=this._oTT.getBinding("rows");var c=this._oTT.getBindingInfo("rows");var u=[];var f=[],_;if(t){f=t}else{for(a=e[0];a<=e[1];a++){f.push(a)}}_=f.length;if(p!==undefined){var S=p.getModel();var v=this.getShapeDataNames();for(a=0;a<_;a++){var m=this._oTT.getContextByIndex(f[a]);if(!m){continue}else{h=m.getObject();if(!h){continue}}var T=1;g=this._oObjectTypesConfigMap[h[d]]?this._oObjectTypesConfigMap[h[d]].getMainChartSchemeKey():sap.gantt.config.DEFAULT_CHART_SCHEME_KEY;if(h[d]){var b=this._oChartSchemesConfigMap[g];if(b){T=b.getRowSpan()}}var w={bindingObj:p,bindingInfo:c,contextObj:m,data:h,id:h[l],type:h[d],rowSpan:T,chartScheme:g,rowIndex:f[a],index:0,visibleRowSpan:T};u.push(w);if(!this._bJSONTreeBinding){if(v&&v.length>0){for(o=0;o<v.length;o++){var y;if(typeof v[o]==="string"){y=v[o]}else{y=v[o].name}var D=m.getProperty(y);var R;if(D){w.data[y]=[];for(s=0;s<D.length;s++){var C=D[s];if(typeof C==="string"){R=S.getData("/"+C)}else{R=C}w.data[y].push(R)}}}}}n.generateRowUid([w],this._oObjectTypesConfigMap,v,undefined,l);var H=h.uid;if(H&&this._oRowStatusMap[H]){for(g in this._oRowStatusMap[H]){var x;if(this._oChartSchemesConfigMap[g]&&this._oChartSchemesConfigMap[g].getModeKey()&&this._oChartSchemesConfigMap[g].getModeKey()!==sap.gantt.config.DEFAULT_MODE_KEY){x=this._oChartSchemesConfigMap[g].getModeKey()}else{x=this.getMode()}var M=this._collectDataNameForValidChartScheme(g,x);if(M&&M.drawData){var I=0;var A=[{}];for(o=0;o<M.drawData.length;o++){if(!h[M.drawData[o]]){continue}for(s=0;s<h[M.drawData[o]].length;s++){var L=h[M.drawData[o]][s][M.rowIndexName];if(L&&I<L){I=L}}}if(I>0){for(o=0;o<M.drawData.length;o++){if(!h[M.drawData[o]]){continue}for(s=0;s<h[M.drawData[o]].length;s++){var B=h[M.drawData[o]][s][M.rowIndexName];if(B){i(A,B,M.drawData[o],h[M.drawData[o]][s])}else{for(r=1;r<=I;r++){i(A,r,M.drawData[o],h[M.drawData[o]][s])}}}}for(o=1;o<=I;o++){var P={bindingObj:p,bindingInfo:c,data:A[o],id:h[l],type:h[d],parentId:w.id,rowSpan:M.rowSpan,chartScheme:g,rowIndex:f[a],index:o,icon:this._oChartSchemesConfigMap[g].getIcon(),closeIcon:"./image/closeChart.png",name:this._oChartSchemesConfigMap[g].getName()};n.generateRowUid([P],this._oObjectTypesConfigMap,v,undefined,l);u.push(P);w.visibleRowSpan+=M.rowSpan}}}}this._oRowStatusMap[H].visibleRowSpan=w.visibleRowSpan}}}return u};M.prototype._prepareVerticalDrawingRange=function(){var e=this._oTT.getBinding("rows").getLength()-1;if(e<0){return[0,-1]}var t=this._getTTFirstRenderingRowIndex();var i=t+this._getVisibleRowCount()-1;var a=t;var o=i<e?i:e;return[a,o]};M.prototype._prepareHorizontalDrawingRange=function(){var e=this._nUpperRange-this._nLowerRange;var t=this.getVisibleWidth();if(!this._oStatusSet){this._updateScrollWidth()}var i=this._getContentScrollLeft();if(this._oStatusSet){if(t>=e||this._oStatusSet.aViewBoundary[0]<=i-this._oStatusSet.nOffset&&this._oStatusSet.aViewBoundary[1]>=i+t-this._oStatusSet.nOffset){if(!this._mTimeouts._drawSvg){this._updateScrollLeft();this._scrollSvg()}return false}}var a=t*(1+this._fExtendFactor*2);var s=i-t*this._fExtendFactor;if(s<this._nLowerRange){a+=s;s=0}if(s+a>this._nUpperRange){a=this._nUpperRange-s}this.getAxisTime().setViewOffset(s);if(a<0){return false}this._oStatusSet={nWidth:a,nOffset:s,nScrollLeft:i,aViewBoundary:[0,a],aTimeBoundary:[this.getAxisTime().viewToTime(0),this.getAxisTime().viewToTime(a)],bRTL:o.getConfiguration().getRTL()};return true};M.prototype._draw=function(e){if(!this._bTableReady){return}this._ensureShapesCreated(function(){var t=this._nUpperRange-this._nLowerRange;if(t<=2){return}var i=this.getVisibleWidth();if(!i||i<=0||i>document.body.clientWidth){return}var a=this.getAxisTimeStrategy().syncContext(i);this.fireEvent("_zoomInfoUpdated",a);if(a.axisTimeChanged){this.setProperty("timeZoomRate",this.getAxisTime().getZoomRate(),true);this.resetWidthInfo()}if(!this._prepareHorizontalDrawingRange()&&!e){return}this._updateTableRowHeights();var o=this;this._mTimeouts._drawSvg=this._mTimeouts._drawSvg||window.setTimeout(function(){o._drawSvg()},0)}.bind(this))};M.prototype.getVisibleWidth=function(){var e=jQuery(this.getDomSelectorById("svg-ctn"));if(!e){return null}var t=this.getTTVsbDom()!=null?this.getTTVsbDom().getBoundingClientRect().width:0;var i=e.width()-(o.getConfiguration().getRTL()?0:t);if(!i||i<=0){return null}return i};M.prototype._updateScrollWidth=function(){var e=this._nUpperRange-this._nLowerRange;this._oColumn.setWidth(e-4+"px")};M.prototype._updateScrollLeft=function(e){var t=jQuery(this.getTTHsbDom());var i=this._calHSBScrollLeft();var s=this._getHSBScrollLeft(t);if(Math.abs(s-i)>1){this._bSuppressSetVisibleHorizon=!e;if(o.getConfiguration().getRTL()===true&&a.browser.firefox){t.scrollLeftRTL(i)}else{t.scrollLeft(i)}}else if(this._forceHsbScrollSync(s,i)){this._bSuppressSetVisibleHorizon=!e;this._onHSbScroll()}};M.prototype._forceHsbScrollSync=function(e,t){if(this._oLastVisibleHorizon){var i=this.getAxisTimeStrategy().getVisibleHorizon();if(i&&(this._oLastVisibleHorizon.getStartTime()!=i.getStartTime()||this._oLastVisibleHorizon.getEndTime()!=i.getEndTime())){this._oLastVisibleHorizon=i;return true}}return false};M.prototype._calHSBScrollLeft=function(){var e=this.getAxisTimeStrategy().getVisibleHorizon();var t=this._getScrollRateByHorizon(e);var i=this._getHSBScrollLeftByScrollRate(t);return i};M.prototype._getHSBScrollLeft=function(e){if(!e){e=jQuery(this.getTTHsbDom())}return o.getConfiguration().getRTL()===true&&a.browser.firefox?e.scrollLeftRTL():e.scrollLeft()};M.prototype._scrollSvg=function(){var e=jQuery(this.getDomSelectorById("svg"));var t=jQuery(this.getDomSelectorById("header-svg"));if(Math.abs(this._oStatusSet.nWidth-e.width())>1){e.width(this._oStatusSet.nWidth+(o.getConfiguration().getRTL()?0:jQuery(this.getTTVsbDom()).width()))}if(Math.abs(this._oStatusSet.nWidth-t.width())>1){t.width(this._oStatusSet.nWidth+(o.getConfiguration().getRTL()?0:jQuery(this.getTTVsbDom()).width()))}var i=this.getVisibleWidth();var s=this._getContentScrollLeft();if(o.getConfiguration().getRTL()===true&&!a.browser.edge){this._hSbScrollLeft(this._oStatusSet.nOffset-s+this._oStatusSet.nWidth-i)}else{this._hSbScrollLeft(s-this._oStatusSet.nOffset)}};M.prototype._getContentScrollLeft=function(){var e=this.getAxisTimeStrategy().getVisibleHorizon();var t=this._getScrollRateByHorizon(e);var i=this._getContentScrollLeftByScrollRate(t);return i};M.prototype._drawSvg=function(){t.start("GanttChart _drawSvg","GanttPerf:GanttChart _drawSvg function");if(!this._initHorizonApplied){this._prepareHorizontalDrawingRange();this._initHorizonApplied=true;this._updateScrollLeft(true)}else{this._updateScrollLeft()}jQuery(this.getDomSelectorById("svg-ctn")).css("visibility","hidden");this._scrollSvg();jQuery(this.getDomSelectorById("svg-ctn")).css("visibility","visible");this._sUiSizeMode=n.findSapUiSizeClass();this._drawCalendarPattern();this._drawHeader();this._drawNowLine();this._drawVerticalLine();this._drawExpandedBackground();this._drawShapes();this._drawSelectedShapes();this._drawAdhocLine();delete this._mTimeouts._drawSvg;this.$().find(".sapGanttChartSvg").css("transform","translateY("+-this._oTT.$().find(".sapUiTableCCnt").scrollTop()+"px)");this.fireEvent("_shapesUpdated",{aSvg:jQuery(this.getDomSelectorById("svg"))});t.end("GanttChart _drawSvg")};M.prototype._drawHeader=function(){var e=jQuery(this.getDomRef()).find(".sapGanttChartHeader");var t=e.height();var i=d3.select(jQuery(this.getDomRef()).find(".sapGanttChartHeaderSvg").get(0));i.attr("height",t);var s=t/5*2;var r=t/5*4;var h=t/5*4;var g=this.getAxisTimeStrategy();var l=window.screen.width;var d=this.getAxisTime().getTickTimeIntervalLabel(g.getTimeLineOption(),null,[0,this._oStatusSet.nWidth>=l?this._oStatusSet.nWidth:l]);i.selectAll("g").remove();var p=i.append("g");p.selectAll("label0").data(d[0]).enter().append("text").classed("sapGanttTimeHeaderSvgText0",true).text(function(e){return e.label}).attr("x",this._getXwithOffset).attr("y",function(e){return s}).attr("text-anchor","start");p.selectAll("label1").data(d[1]).enter().append("text").classed("sapGanttTimeHeaderSvgText1",true).text(function(e){return e.label}).attr("x",this._getXwithOffset).attr("y",function(e){return h});d3.selectAll(".sapGanttChartHeader .sapGanttTimeHeaderSvgText1").each(function(e,t){d3.select(this).append("title").text(function(e){if(e!=null){return e.largeLabel}})});if(a.browser.edge&&o.getConfiguration().getRTL()){d3.selectAll(".sapGanttChartHeader .sapGanttTimeHeaderSvgText0").each(function(e,t){d3.select(this).attr("transform",function(e){var t="translate("+-n.calculateStringLength(e.label)*parseInt(jQuery(".sapGanttTimeHeaderSvgText0").css("font-size"),10)/2+")";return t})});d3.selectAll(".sapGanttChartHeader .sapGanttTimeHeaderSvgText1").each(function(e,t){d3.select(this).attr("transform",function(e){var t="translate("+-n.calculateStringLength(e.label)*parseInt(jQuery(".sapGanttTimeHeaderSvgText1").css("font-size"),10)/2+")";return t})})}var c,u;var f="";for(u=0;u<d[1].length;u++){c=d[1][u];if(c){f+=" M"+" "+(c.value-1/2)+" "+r+" L"+" "+(c.value-1/2)+" "+t}}var _=this.getAxisTime();if(_.largeIntervalLabel&&!_.largeIntervalPath){for(u=0;u<d[0].length;u++){if(d[0][u].value===_.firstTickPosition){d[0].splice(u,1);break}}}var S="";for(u=0;u<d[0].length;u++){c=d[0][u];if(c){S+=" M"+" "+(c.value-1/2)+" 0"+" L"+" "+(c.value-1/2)+" "+t/2}}p.append("path").classed("sapGanttTimeHeaderSvgPath",true).attr("d",f);p.append("path").classed("sapGanttTimeHeaderLargeIntervalSvgPath",true).attr("d",S)};M.prototype._getXwithOffset=function(e){var t=5;if(o.getConfiguration().getRTL()){return e.value-t}else{return e.value+t}};M.prototype._drawCalendarPattern=function(){var e=d3.select(this.getDomSelectorById("svg"));this._oCalendarPatternDrawer.drawSvg(e,this.getId(),this.getCalendarDef(),this._oStatusSet,this.getBaseRowHeight())};M.prototype._drawNowLine=function(){this._oNowlineDrawer=new d(this.getAxisTime());var e=d3.select(this.getDomSelectorById("header-svg")),t=d3.select(this.getDomSelectorById("svg"));if(this.getEnableNowLine()){this._oNowlineDrawer.drawSvg(t,e,this.getNowLineInUTC())}else{this._oNowlineDrawer.destroySvg(t,e)}};M.prototype._drawVerticalLine=function(){this._oVerticalLineDrawer=new p(this.getAxisTime());var e=d3.select(this.getDomSelectorById("svg"));if(this.getEnableVerticalLine()){this._oVerticalLineDrawer.drawSvg(e)}else{this._oVerticalLineDrawer.destroySvg(e)}};M.prototype._drawAdhocLine=function(){this._oAdhocLineDrawer=new c(this.getAxisTime());var e=d3.select(this.getDomSelectorById("svg"));if(this.getEnableAdhocLine()){this._oAdhocLineDrawer.drawSvg(e,this.getAdhocLines(),this._oStatusSet,this.getAdhocLineLayer())}else{this._oAdhocLineDrawer.destroySvg(e)}};M.prototype._drawExpandedBackground=function(){var e=d3.select(this.getDomSelectorById("svg"));if(!this._oTT||!this._oTT.getRows()||this._oTT.getRows().length<=0){return}if(this._aFilteredRowData){var t=this._composeChartSchemeBackgroundConfig();this._oExpandedBackgroundDrawer.drawSvg(e,this._aFilteredRowData,t)}};M.prototype._composeChartSchemeBackgroundConfig=function(){var e=this._oChartSchemesConfigMap;var t={};if(e){for(var i in e){if(e[i].getHaveBackground()){t[i]=e[i].getBackgroundClass()}}}return t};M.prototype._drawShapes=function(){var e=d3.select(this.getDomSelectorById("svg"));var t=this._oShapeManager.getAllShapeInstances();var i=this._oShapeManager.mShapeInstance;if(this._aFilteredRowData&&t&&t.length>0){this._oShapeManager.collectDataForAllShapeInstances(this._aFilteredRowData,this._oObjectTypesConfigMap,this._oChartSchemesConfigMap);var a=this.getAxisTime();var o=this._oShapeCrossRowDrawer.generateRelationshipDataSet(e,i,this._aNonVisibleShapeData,this.getShapeDataNames(),this._aRelationships,a,this._oAxisOrdinal);for(var s=0;s<t.length;s++){var r=t[s];switch(r.getCategory(null,a,this._oAxisOrdinal)){case sap.gantt.shape.ShapeCategory.InRowShape:this._oShapeInRowDrawer.drawSvg(e,r,a,this._oAxisOrdinal,this._oStatusSet);break;case sap.gantt.shape.ShapeCategory.Relationship:r.dataSet=this._oShapeManager.isRelationshipDisplayable(r)?o:[];this._oShapeCrossRowDrawer.drawSvg(e,r,a,this._oAxisOrdinal);break;default:break}}}};M.prototype.getShapeInstance=function(e){this._ensureShapesCreatedSync();return this._oShapeManager.mShapeInstance[e]};M.prototype._drawSelectedShapes=function(){var e=d3.select(this.getDomSelectorById("svg"));var t=this._oShapeManager.mShapeInstance;this._oShapeManager.collectDataForSelectedShapes(this._oShapeSelection,this._oObjectTypesConfigMap,this._oChartSchemesConfigMap);var i=this.getAxisTime();var a=this._oShapeCrossRowDrawer.generateRelationshipDataSet(e,t,this._aNonVisibleShapeData,this.getShapeDataNames(),this._oShapeSelection.getSelectedRelationships(),i,this._oAxisOrdinal);for(var o in t){var s=t[o].getAggregation("selectedShape");var r=s.getCategory(null,this._oAxisTime,this._oAxisOrdinal);switch(r){case sap.gantt.shape.ShapeCategory.InRowShape:this._oShapeInRowDrawer.drawSvg(e,s,i,this._oAxisOrdinal,this._oStatusSet);break;case sap.gantt.shape.ShapeCategory.Relationship:s.dataSet=a;this._oShapeCrossRowDrawer.drawSvg(e,s,i,this._oAxisOrdinal);break;default:break}}};M.prototype._getSvgCoodinateByDiv=function(e,t,i){var a=e.createSVGPoint();a.x=t;a.y=i;a=a.matrixTransform(e.getScreenCTM().inverse());a.svgHeight=e.height.baseVal.value;a.svgId=this.getId()+"-svg";return a};M.prototype.isShapeSelectable=function(e,t){return this._oShapeManager.isShapeSelectable(e,t)};M.prototype.getAxisOrdinal=function(){return this._oAxisOrdinal};M.prototype._ensureAxisTimeCreated=function(){var e=this.getAxisTimeStrategy().getAxisTime();if(!e){this._createAxisTime(this.getAxisTimeStrategy());e=this.getAxisTimeStrategy().getAxisTime()}};M.prototype._ensureShapesCreatedSync=function(){this._ensureAxisTimeCreated();if(!this._shapesInited){var e=this.getProperty("shapes");if(e&&e.length>0){this._oShapeManager.instantiateShapesSync(e)}this._shapesInited=true}};M.prototype._ensureShapesCreated=function(e){e=e||function(){};this._ensureAxisTimeCreated();if(!this._shapesInited){var t=this.getProperty("shapes");if(t&&t.length>0){try{this._oShapeManager.instantiateShapesSync(t);this._shapesInited=true;e()}catch(i){this._oShapeManager.instantiateShapes(t).then(function(){this._shapesInited=true;e()}.bind(this)).catch(function(){})}}else{this._shapesInited=true;e()}}else{e()}};M.prototype.getAxisTime=function(){this._ensureAxisTimeCreated();var e=this.getAxisTimeStrategy().getAxisTime();return e};M.prototype.ondblclick=function(e){return null};M.prototype.onclick=function(e){return null};M.prototype.getSapUiSizeClass=function(){return this._sUiSizeMode};M.prototype.setFirstVisibleRow=function(e){this.setTableProperties({firstVisableRow:e});return this};M.prototype._getVisibleRowCount=function(){return this._oTT.getVisibleRowCount()+1};M.prototype._setLargeDataScrolling=function(e){if(this._oTT._setLargeDataScrolling){this._oTT._setLargeDataScrolling(!!e)}};M.prototype.exit=function(){this._oShapeManager.destroy();this._detachEvents();this._cleanUpTimers()};M.prototype._cleanUpTimers=function(){for(var e in this._mTimeouts){if(this._mTimeouts[e]){clearTimeout(this._mTimeouts[e]);this._mTimeouts[e]=undefined}}};M.prototype.getTTHsbDom=function(){return this._oTT.getDomRef(sap.ui.table.SharedDomRef.HorizontalScrollBar)};M.prototype.getTTVsbDom=function(){return this._oTT.getDomRef(sap.ui.table.SharedDomRef.VerticalScrollBar)};M.prototype._getTTFirstRenderingRowIndex=function(){if(this._oTT.getRows().length>0){return this._oTT.getRows()[0].getIndex()}return this._oTT.getFirstVisibleRow()};M.prototype._getMouseXPos=function(e){if(a.browser.edge){return e.clientX}return e.pageX};M.prototype._getOuterHTML=function(e){return e.prop("outerHTML")};return M},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartBase", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/gantt/library","sap/ui/core/Control","./misc/Utility"],function(jQuery,e,t,i,a){"use strict";var o=i.extend("sap.gantt.GanttChartBase",{metadata:{abstract:true,library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},enableCursorLine:{type:"boolean",defaultValue:true},enableNowLine:{type:"boolean",defaultValue:true},enableVerticalLine:{type:"boolean",defaultValue:true},enableAdhocLine:{type:"boolean",defaultValue:true},enableShapeTimeDisplay:{type:"boolean",defaultValue:false},timeZoomRate:{type:"float",defaultValue:1},mode:{type:"string",defaultValue:t.config.DEFAULT_MODE_KEY},selectionMode:{type:"sap.gantt.SelectionMode",defaultValue:t.SelectionMode.MultiWithKeyboard},shapeSelectionMode:{type:"sap.gantt.SelectionMode",defaultValue:t.SelectionMode.MultiWithKeyboard},selectionPanelSize:{type:"sap.ui.core.CSSSize",defaultValue:"30%"},hierarchyKey:{type:"string",defaultValue:t.config.DEFAULT_HIERARCHY_KEY},baseRowHeight:{type:"int",group:"Appearance",defaultValue:null},svgDefs:{type:"object",defaultValue:null},timeAxis:{type:"object",defaultValue:t.config.DEFAULT_TIME_AXIS},modes:{type:"object[]",defaultValue:t.config.DEFAULT_MODES},toolbarSchemes:{type:"object[]",defaultValue:t.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEMES},hierarchies:{type:"object[]",defaultValue:t.config.DEFAULT_HIERARCHYS},objectTypes:{type:"object[]",defaultValue:t.config.DEFAULT_OBJECT_TYPES},chartSchemes:{type:"object[]",defaultValue:t.config.DEFAULT_CHART_SCHEMES},locale:{type:"object",defaultValue:t.config.DEFAULT_LOCALE_CET},shapeDataNames:{type:"sap.gantt.GenericArray",defaultValue:[]},shapes:{type:"object[]",defaultValue:[]},adhocLineLayer:{type:"string",defaultValue:t.AdhocLineLayer.Top},tableProperties:{type:"object",defaultValue:{}},ghostAlignment:{type:"string",defaultValue:t.dragdrop.GhostAlignment.None},nowLineInUTC:{type:"boolean",defaultValue:true}},aggregations:{rows:{type:"sap.ui.core.Control",multiple:true,singularName:"row",bindable:"bindable",visibility:"public"},relationships:{type:"sap.ui.core.Control",multiple:true,bindable:"bindable",visibility:"public"},calendarDef:{type:"sap.gantt.def.cal.CalendarDefs",multiple:false,bindable:"bindable",visibility:"public"},axisTimeStrategy:{type:"sap.gantt.axistime.AxisTimeStrategyBase",multiple:false,bindable:"bindable",visibility:"public"},adhocLines:{type:"sap.gantt.AdhocLine",multiple:true,singularName:"adhocLine",bindable:"bindable",visibility:"public"}},events:{ganttChartSwitchRequested:{parameters:{hierarchyKey:{type:"string"}}},splitterResize:{parameters:{id:{type:"string"},oldSizes:{type:"int[]"},newSizes:{type:"int[]"},zoomInfo:{type:"object"}}},horizontalScroll:{parameters:{scrollSteps:{type:"int"},startTime:{type:"string"},endTime:{type:"string"}}},verticalScroll:{parameters:{scrollSteps:{type:"int"}}},chartMouseOver:{parameters:{objectInfo:{type:"object"},leadingRowInfo:{type:"object"},timestamp:{type:"string"},svgId:{type:"string"},svgCoordinate:{type:"int[]"},effectingMode:{type:"string"},originEvent:{type:"object"}}},chartClick:{parameters:{objectInfo:{type:"object"},leadingRowInfo:{type:"object"},timestamp:{type:"string"},svgId:{type:"string"},svgCoordinate:{type:"int[]"},effectingMode:{type:"string"},originEvent:{type:"object"}}},chartDoubleClick:{parameters:{objectInfo:{type:"object"},leadingRowInfo:{type:"object"},timestamp:{type:"string"},svgId:{type:"string"},svgCoordinate:{type:"int[]"},effectingMode:{type:"string"},originEvent:{type:"object"}}},chartRightClick:{parameters:{objectInfo:{type:"object"},leadingRowInfo:{type:"object"},timestamp:{type:"string"},svgId:{type:"string"},svgCoordinate:{type:"int[]"},effectingMode:{type:"string"},originEvent:{type:"object"}}},chartDragEnter:{parameters:{originEvent:{type:"object"}}},chartDragLeave:{parameters:{originEvent:{type:"object"},draggingSource:{type:"object"}}},rowSelectionChange:{parameters:{originEvent:{type:"object"}}},relationshipSelectionChange:{parameters:{originEvent:{type:"object"}}},shapeSelectionChange:{parameters:{originEvent:{type:"object"}}},shapeDragEnd:{parameters:{originEvent:{type:"object"},sourceShapeData:{type:"object[]"},sourceSvgId:{type:"string"},targetData:{type:"object"},targetSvgId:{type:"string"}}},treeTableToggleEvent:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},expanded:{type:"boolean"}}},shapeResizeEnd:{parameters:{shapeUid:{type:"string"},rowObject:{type:"object"},oldTime:{type:"string[]"},newTime:{type:"string[]"}}},shapeMouseEnter:{parameters:{shapeData:{type:"object"},pageX:{type:"int"},pageY:{type:"int"},originEvent:{type:"object"}}},shapeMouseLeave:{parameters:{shapeData:{type:"object"},originEvent:{type:"object"}}}}}});o.getMetadata().getAllAggregations()["rows"]._doesNotRequireFactory=true;o.getMetadata().getAllAggregations()["relationships"]._doesNotRequireFactory=true;o.prototype.init=function(){this._iBaseRowHeight=undefined;this.mDefaultTableProperties={rowHeight:33,threshold:100,firstVisibleRow:0,selectionMode:sap.ui.table.SelectionMode.MultiToggle}};o.prototype.handleExpandChartChange=function(e,t,i){};o.prototype.notifySourceChange=function(){};o.prototype._setLargeDataScrolling=function(e){};o.prototype._getConfiguredRowKeys=function(e){if(!e){e=this.getBindingInfo("rows")}var t;if(e&&e.parameters){t=e.parameters.gantt}this._configuredRowKeys={rowIdName:t&&t.rowIdName?t.rowIdName:"id",rowTypeName:t&&t.rowTypeName?t.rowTypeName:"type"};return this._configuredRowKeys};o.prototype.getRowIdName=function(){if(!this._configuredRowKeys){this._getConfiguredRowKeys()}return this._configuredRowKeys.rowIdName};o.prototype.getRowTypeName=function(){if(!this._configuredRowKeys){this._getConfiguredRowKeys()}return this._configuredRowKeys.rowTypeName};o.prototype.getRlsIdName=function(){if(!this._configuredRlsKeys){this._getConfiguredRlsKeys()}return this._configuredRlsKeys.rlsIdName};o.prototype._getConfiguredRlsKeys=function(){var e=this.getBindingInfo("relationships");var t;if(e&&e.parameters){t=e.parameters.gantt}this._configuredRlsKeys={rlsIdName:t&&t.rlsIdName?t.rlsIdName:"id"};return this._configuredRlsKeys};o.prototype.getDomSelectorById=function(e){var t=a.attributeEqualSelector("id",e?this.getId()+"-"+e:this.getId());return t};o.prototype.setTableProperties=function(t){var i=jQuery.extend({},this.getProperty("tableProperties"));Object.keys(t).forEach(function(a){if(this.mDefaultTableProperties.hasOwnProperty(a)){i[a]=t[a];var o="set"+a[0].toUpperCase()+a.slice(1);if(o==="setSelectionMode"){this._getSelectionHandler().setSelectionMode(t[a])}else{this._oTT[o](t[a])}}else{e.warning('The TreeTable property of "'+a+'" is not exposed by Gantt')}},this);this.setProperty("tableProperties",i,true);return this};o.prototype.getTableProperties=function(){var e=this.getProperty("tableProperties");Object.keys(e).forEach(function(t){if(t==="selectionMode"){var i=this._getSelectionHandler();e[t]=typeof i.getSelectionMode==="function"?i.getSelectionMode():i._getSelectionMode()}else{e[t]=this._oTT["get"+t[0].toUpperCase()+t.slice(1)]()}},this);return e};o.prototype._getSelectionHandler=function(){return this._oTT._oSelectionPlugin||this._oTT};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartContainer", ["sap/ui/performance/Measurement","sap/gantt/library","sap/ui/core/Control","sap/ui/layout/Splitter","sap/ui/layout/SplitterLayoutData","sap/ui/core/library","./control/Toolbar","./control/AssociateContainer","./config/TimeHorizon","./misc/Format"],function(t,e,a,o,n,i,r,s,h,g){"use strict";var l=i.Orientation;var u=a.extend("sap.gantt.GanttChartContainer",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},enableTimeScrollSync:{type:"boolean",defaultValue:true},enableCursorLine:{type:"boolean",defaultValue:true},enableNowLine:{type:"boolean",defaultValue:true},enableVerticalLine:{type:"boolean",defaultValue:true},enableAdhocLine:{type:"boolean",defaultValue:true},svgDefs:{type:"object",defaultValue:null},modes:{type:"object[]",defaultValue:e.config.DEFAULT_MODES},toolbarSchemes:{type:"object[]",defaultValue:e.config.DEFAULT_CONTAINER_TOOLBAR_SCHEMES},hierarchies:{type:"object[]",defaultValue:e.config.DEFAULT_HIERARCHYS},containerLayouts:{type:"object[]",defaultValue:e.config.DEFAULT_CONTAINER_LAYOUTS},containerLayoutKey:{type:"string",defaultValue:e.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY},sliderStep:{type:"int",defautValue:undefined},maxNumOfGanttCharts:{type:"int",defaultValue:3}},aggregations:{legendContainer:{type:"sap.gantt.legend.LegendContainer",multiple:false,visibility:"public"},customToolbarItems:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"customToolbarItem",bindable:"bindable"},ganttCharts:{type:"sap.gantt.GanttChartBase",multiple:true,visibility:"public",singularName:"ganttChart",bindable:"bindable"},_toolbar:{type:"sap.gantt.control.Toolbar",multiple:false,visibility:"hidden"}},events:{ganttChartChangeRequested:{parameters:{action:{type:"string"},ganttChartIndex:{type:"int"},hierarchyKey:{type:"string"},oldHierarchyKey:{type:"string"},containerLayoutKey:{type:"string"}}},customSettingChange:{parameters:{id:{type:"string"},value:{type:"boolean"}}},treeTableToggleEvent:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},expanded:{type:"boolean"}}}}}});u.prototype.init=function(){t.start("GanttChartContainer Init","GanttPerf:GanttChartContainer Init function");this._bInitHorizonApplied=false;this._oToolbar=new r({type:sap.gantt.control.ToolbarType.Global,sourceId:sap.gantt.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY});this.setAggregation("_toolbar",this._oToolbar);this._oToolbar.attachSourceChange(this._onToolbarSourceChange,this);this._oToolbar.attachLayoutChange(this._onToolbarLayoutChange,this);this._oToolbar.attachExpandChartChange(this._onToolbarExpandChartChange,this);this._oToolbar.attachZoomStopChange(this._onToolbarZoomStopChange,this);this._oToolbar.attachSettingsChange(this._onToolbarSettingsChange,this);this._oToolbar.attachBirdEye(this._onToolbarBirdEye,this);this._oToolbar.attachEvent("_zoomControlTypeChange",this._onToolbarZoomControlTypeChange,this);this._oToolbar.data("holder",this);this._oSplitter=new o({width:"100%",height:"100%",orientation:l.Vertical});this._oModesConfigMap={};this._oModesConfigMap[sap.gantt.config.DEFAULT_MODE_KEY]=sap.gantt.config.DEFAULT_MODE;this._oToolbarSchemeConfigMap={};this._oToolbarSchemeConfigMap[sap.gantt.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY]=sap.gantt.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME;this._oToolbarSchemeConfigMap[sap.gantt.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY]=sap.gantt.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME;this._oToolbarSchemeConfigMap[sap.gantt.config.EMPTY_TOOLBAR_SCHEME_KEY]=sap.gantt.config.EMPTY_TOOLBAR_SCHEME;this._oHierarchyConfigMap={};this._oHierarchyConfigMap[sap.gantt.config.DEFAULT_HIERARCHY_KEY]=sap.gantt.config.DEFAULT_HIERARCHY;this._oContainerLayoutConfigMap={};this._oContainerLayoutConfigMap[sap.gantt.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY]=sap.gantt.config.DEFAULT_CONTAINER_SINGLE_LAYOUT;this._oContainerLayoutConfigMap[sap.gantt.config.DEFAULT_CONTAINER_DUAL_LAYOUT_KEY]=sap.gantt.config.DEFAULT_CONTAINER_DUAL_LAYOUT;t.end("GanttChartContainer Init")};u.prototype.applySettings=function(t,e){var o=a.prototype.applySettings.apply(this,arguments);if(this.getContainerLayouts()&&this.getContainerLayoutKey()){this.switchOrientation(null,true)}return o};u.prototype.setModes=function(t){this.setProperty("modes",t);this._oToolbar.setModes(t);this._oModesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oModesConfigMap[t[e].getKey()]=t[e]}}return this};u.prototype.setTimeZoomRate=function(t){var e=this.getGanttCharts();var a,o;for(a=0;a<e.length;a++){o=e[a];o.setTimeZoomRate(t)}return this};u.prototype.setTimeZoomStop=function(t){var e=this.getGanttCharts();var a,o;for(a=0;a<e.length;a++){o=e[a];o.setTimeZoomStop(t)}return this};u.prototype.setToolbarSchemes=function(t){this.setProperty("toolbarSchemes",t);this._oToolbar.setToolbarSchemes(t);this._oToolbarSchemeConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oToolbarSchemeConfigMap[t[e].getKey()]=t[e]}}return this};u.prototype.setHierarchies=function(t){this.setProperty("hierarchies",t);this._oToolbar.setHierarchies(t);this._oHierarchyConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oHierarchyConfigMap[t[e].getKey()]=t[e]}}return this};u.prototype.setContainerLayouts=function(t){this.setProperty("containerLayouts",t);this._oToolbar.setContainerLayouts(t);this._oContainerLayoutConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oContainerLayoutConfigMap[t[e].getKey()]=t[e]}}if(this.getContainerLayoutKey()){this.switchOrientation(null,true)}return this};u.prototype.setEnableCursorLine=function(t){this.setProperty("enableCursorLine",t);var e=this.getGanttCharts();for(var a=0;a<e.length;a++){e[a].setEnableCursorLine(t)}this.getAggregation("_toolbar").setEnableCursorLine(t);return this};u.prototype.setEnableNowLine=function(t){this.setProperty("enableNowLine",t);var e=this.getGanttCharts();for(var a=0;a<e.length;a++){e[a].setEnableNowLine(t)}this.getAggregation("_toolbar").setEnableNowLine(t);return this};u.prototype.setEnableVerticalLine=function(t){this.setProperty("enableVerticalLine",t);var e=this.getGanttCharts();for(var a=0;a<e.length;a++){e[a].setEnableVerticalLine(t)}this.getAggregation("_toolbar").setEnableVerticalLine(t);return this};u.prototype.setEnableAdhocLine=function(t){this.setProperty("enableAdhocLine",t);var e=this.getGanttCharts();for(var a=0;a<e.length;a++){e[a].setEnableAdhocLine(t)}this.getAggregation("_toolbar").setEnableAdhocLine(t);return this};u.prototype.setEnableTimeScrollSync=function(t){this.setProperty("enableTimeScrollSync",t);this.getAggregation("_toolbar").setEnableTimeScrollSync(t);return this};u.prototype.setContainerLayoutKey=function(t){if(this.getProperty("containerLayoutKey")===t){return this}this.setProperty("containerLayoutKey",t);this._oToolbar.setSourceId(t);if(this.getContainerLayouts()){this.switchOrientation(null,true)}return this};u.prototype.setLegendContainer=function(t){this.setAggregation("legendContainer",t);if(t){this._oToolbar.setLegend(new s({content:t.getId()}))}return this};u.prototype.addGanttChart=function(t,e){if(this.getGanttCharts().length<this.getMaxNumOfGanttCharts()){this.addAggregation("ganttCharts",t);this._insertGanttChart(t,e)}};u.prototype.insertGanttChart=function(t,e){if(this.getGanttCharts().length<this.getMaxNumOfGanttCharts()){this.insertAggregation("ganttCharts",t,e);this._insertGanttChart(t,false,e)}};u.prototype.removeGanttChart=function(t){this._removeGanttChart(t);this.removeAggregation("ganttCharts",t)};u.prototype.removeAllGanttCharts=function(){var t=this.getGanttCharts();for(var e=0;e<t.length;e++){this._removeGanttChart(t[e])}this.removeAllAggregation("ganttCharts")};u.prototype._insertGanttChart=function(e,a,o){t.start("GanttChartContainer _insertGanttChart","GanttPerf:GanttChartContainer _insertGanttChart function");if(!e){return}var i=true;var r="30%";var h=this.getGanttCharts()[0];if(this._oSplitter.getContentAreas().length>0){i=false;var g=h._oSplitter;if(g&&g.getContentAreas().length>0){var l=g.getContentAreas()[0].getLayoutData();r=l?l.getSize():r}}if(e===h){this._oToolbar.setZoomLevel(e.getAxisTimeStrategy().getZoomLevel())}else{e.setSelectionPanelSize(r);e.getAxisTimeStrategy().setZoomLevel(this._oToolbar.getZoomLevel());e.getAxisTimeStrategy().setZoomLevels(this._oToolbar.getZoomLevels());e.getAxisTimeStrategy().setTimeLineOption(h.getAxisTimeStrategy().getTimeLineOption());e.getAxisTimeStrategy()._setVisibleHorizon(h.getAxisTimeStrategy().getVisibleHorizon())}var u=new s({content:e.getId(),layoutData:new n({size:"auto"})});if(o!==0&&!o){this._oSplitter.addContentArea(u)}else{this._oSplitter.insertContentArea(u,o)}this._adjustSplitterLayoutData(i,a);this._oSplitter.triggerResize(true);e.attachEvent("_visibleHorizonUpdate",this._onGanttChartVisibleHorizonUpdate,this);e.attachEvent("_timePeriodZoomStatusChange",this._onGanttChartTimePeriodZoomStatusChange,this);e.attachEvent("_timePeriodZoomOperation",this._onGanttChartTimePeriodZoomOperation,this);e.attachSplitterResize(this._onViewSplitterResize,this);e.attachGanttChartSwitchRequested(this._onGanttChartSwitchRequested,this);e.attachChartDragEnter(this._onChartDragEnter,this);e.attachChartDragLeave(this._onChartDragLeave,this);e.attachShapeDragEnd(this._onShapeDragEnd,this);e.attachTreeTableToggleEvent(this._onTreeTableToggle,this);e.attachEvent("_zoomInfoUpdated",this._onZoomInfoUpdated,this);e.getAxisTimeStrategy()._updateZoomControlType(this._oToolbar._getZoomControlType());t.end("GanttChartContainer _insertGanttChart")};u.prototype._onGanttChartVisibleHorizonUpdate=function(t){var e=t.getParameters();var a=this.getGanttCharts();if(!this.getEnableTimeScrollSync()){if(e.reasonCode==="visibleHorizonUpdated"){for(var o=0;o<a.length;o++){if(t.getSource().getId()===a[o].getId()){continue}a[o].syncVisibleHorizon(e.visibleHorizon,e.visibleWidth,true)}}else{var n;if(e.reasonCode==="mouseWheelZoom"){n="syncMouseWheelZoom"}if(n){for(var o=0;o<a.length;o++){if(t.getSource().getId()===a[o].getId()){continue}a[o][n](e)}}}}else{for(var o=0;o<a.length;o++){if(t.getSource().getId()===a[o].getId()){continue}a[o].syncVisibleHorizon(e.visibleHorizon,e.visibleWidth)}}};u.prototype._onGanttChartTimePeriodZoomStatusChange=function(t){var e=t.getParameters();var a=this.getGanttCharts();for(var o=0;o<a.length;o++){if(t.getSource().getId()===a[o].getId()){continue}a[o].syncTimePeriodZoomStatus(e.isActive)}};u.prototype._onGanttChartTimePeriodZoomOperation=function(t){var e=this.getEnableTimeScrollSync();var a=this.getGanttCharts();for(var o=0;o<a.length;o++){if(t.getSource().getId()===a[o].getId()){continue}var n=this._oSplitter.getOrientation();a[o].syncTimePeriodZoomOperation(t,e,n)}};u.prototype._adjustSplitterLayoutData=function(t,e){if(t){this._setSelectionPanelLayoutByConfiguration()}var a=this._oSplitter.getContentAreas();var o=this;if(a){a.forEach(function(t,n){if(t.getLayoutData()){if(n%2==0){var i=Math.floor(1/a.length*100);var r=t.getLayoutData().getSize();if(e){r=o.getConfiguredGanttChartLayoutSize(o.getGanttCharts()[n])}else{r=i+"%"}if(r=="auto"||e&&(r=="100%"||a.length==1)){t.getLayoutData().setSize(i+"%")}else{t.getLayoutData().setSize(r)}}else{if(t.getLayoutData().getSize()!=="auto"){t.getLayoutData().setSize("auto")}}}})}};u.prototype.getConfiguredGanttChartLayoutSize=function(t){var e=this._oContainerLayoutConfigMap[this.getContainerLayoutKey()];var a="auto";if(e){var o=e.getGanttChartLayouts();if(o){for(var n=0;n<o.length;n++){if(o[n]&&t&&o[n].getHierarchyKey()===t.getHierarchyKey()){a=o[n].getGanttChartSize()?o[n].getGanttChartSize():a;break}}}}return a};u.prototype.getConfiguredSelectionPanelLayoutSize=function(){var t="30%";var e=this._oContainerLayoutConfigMap[this.getContainerLayoutKey()];if(e){var a=e.getSelectionPanelSize();t=a&&a!=="auto"?a:t}return t};u.prototype._setSelectionPanelLayoutByConfiguration=function(t){var e=this.getConfiguredSelectionPanelLayoutSize();var a=this.getGanttCharts();if(a&&e){a.forEach(function(t,a){t.setSelectionPanelSize(e)})}};u.prototype._removeGanttChart=function(t){var e=t;if(typeof t==="number"){e=this.getGanttCharts()[t]}if(e){this._oSplitter.removeContentArea(e._oAC);this._adjustSplitterLayoutData();this._oSplitter.triggerResize(true);e.detachSplitterResize(this._onViewSplitterResize,this);e.detachGanttChartSwitchRequested(this._onGanttChartSwitchRequested,this);e.detachChartDragEnter(this._onChartDragEnter,this);e.detachChartDragLeave(this._onChartDragLeave,this);e.detachShapeDragEnd(this._onShapeDragEnd,this);e.detachTreeTableToggleEvent(this._onTreeTableToggle,this)}};u.prototype.onBeforeRendering=function(){this._detachEvents();this._oToolbar.setEnableTimeScrollSync(this.getEnableTimeScrollSync());this._oToolbar.setEnableCursorLine(this.getEnableCursorLine());this._oToolbar.setEnableNowLine(this.getEnableNowLine());this._oToolbar.setEnableVerticalLine(this.getEnableVerticalLine());this._oToolbar.setEnableAdhocLine(this.getEnableAdhocLine());var t=this.getGanttCharts();for(var e=0;e<t.length;e++){var a=t[e];a.setEnableCursorLine(this.getEnableCursorLine());a.setEnableNowLine(this.getEnableNowLine());a.setEnableVerticalLine(this.getEnableVerticalLine());a.setEnableAdhocLine(this.getEnableAdhocLine())}};u.prototype._detachEvents=function(){};u.prototype.onAfterRendering=function(){this._attachEvents()};u.prototype._attachEvents=function(){};u.prototype._detachToolbarEvents=function(){this._oToolbar.detachSourceChange(this._onToolbarSourceChange,this);this._oToolbar.detachLayoutChange(this._onToolbarLayoutChange,this);this._oToolbar.detachExpandChartChange(this._onToolbarExpandChartChange,this);this._oToolbar.detachZoomStopChange(this._onToolbarZoomStopChange,this);this._oToolbar.detachSettingsChange(this._onToolbarSettingsChange,this);this._oToolbar.detachBirdEye(this._onToolbarBirdEye,this);this._oToolbar.detachEvent("_zoomControlTypeChange",this._onToolbarZoomControlTypeChange,this)};u.prototype._onToolbarBirdEye=function(t){var e=this.getGanttCharts();var a;var o;var n=t.getParameters();var i=n.birdEyeRange;for(var r=0;r<e.length;r++){var s=e[r].getLargestHorizonByDataRange(i,undefined,true);if(s){var l=g.abapTimestampToDate(s.getStartTime());var u=g.abapTimestampToDate(s.getEndTime());if(!a&&!o){a=new Date;a.setTime(l.getTime());o=new Date;o.setTime(u.getTime())}else{if(l.getTime()<a.getTime()){a.setTime(l.getTime())}if(o.getTime()<u.getTime()){o.setTime(u.getTime())}}}}if(a&&o){var p=e[0].getVisibleWidth();var c=(o.getTime()-a.getTime())/p;var f=new Date(a.getTime()-c*5);var d=new Date(o.getTime()+c*5);var C=new h({startTime:f,endTime:d});for(r=0;r<e.length;r++){e[r].syncVisibleHorizon(C)}}};u.prototype._onViewSplitterResize=function(t){if(this._oSplitter.getOrientation()===l.Vertical){this._syncSelectionPanelSizeBetweenViews(t)}};u.prototype._onZoomInfoUpdated=function(t){var e=t.getParameter("zoomLevel");if(!isNaN(e)){this._oToolbar.updateZoomLevel(e)}};u.prototype._syncSelectionPanelSizeBetweenViews=function(t){var e=this.getGanttCharts();for(var a=0;a<e.length;a++){if(t.getSource().getId()===e[a].getId()&&e.length>1){continue}var o=t.getParameter("newSizes")[0];var n=t.getParameter("newSizes")[1];if(o>=0&&o+n!==0){if(e[a].getAxisTimeStrategy().isA("sap.gantt.axistime.StepwiseZoomStrategy")){e[a].setSelectionPanelSize(o+"px",true)}else{var i=(100*o/(o+n)).toFixed(0);e[a].setSelectionPanelSize(i+"%",true)}}}};u.prototype._onGanttChartSwitchRequested=function(t){t.getSource().notifySourceChange();this.fireGanttChartChangeRequested({action:"switchGanttChart",hierarchyKey:t.getParameter("hierarchyKey"),oldHierarchyKey:t.getParameter("oldHierarchyKey"),oldMode:t.getParameter("oldMode"),ganttChartIndex:this.getGanttCharts().indexOf(t.getSource())})};u.prototype._onTreeTableToggle=function(t){this.fireTreeTableToggleEvent({rowIndex:t.getParameter("rowIndex"),rowContext:t.getParameter("rowContext"),expanded:t.getParameter("expanded")})};u.prototype._onToolbarLayoutChange=function(t){var e=t.getParameter("id");var a=t.getParameter("value");switch(e){case"orientation":this.switchOrientation(a);break;case"add":this.fireGanttChartChangeRequested({action:"addGanttChart",hierarchyKey:a.hierarchyKey,ganttChartIndex:this.getGanttCharts().length});break;case"less":this.fireGanttChartChangeRequested({action:"lessGanttChart",hierarchyKey:a.hierarchyKey,ganttChartIndex:a.ganttChartIndex});break;default:break}};u.prototype._onToolbarSourceChange=function(t){var e=this.getGanttCharts();for(var a=0;a<e.length;a++){e[a].notifySourceChange()}this.setContainerLayoutKey(t.getParameter("id"));this.fireGanttChartChangeRequested({action:"switchContainerLayout",containerLayoutKey:t.getParameter("id")})};u.prototype._onToolbarExpandChartChange=function(t){var e=t.getParameter("isExpand"),a=t.getParameter("expandedChartSchemes");var o=this.getGanttCharts();for(var n=0;n<o.length;n++){o[n].handleExpandChartChange(e,a,null)}};u.prototype._onToolbarZoomStopChange=function(t){var e=this.getGanttCharts();e.forEach(function(e){e.getAxisTimeStrategy().updateStopInfo({index:t.getParameter("index"),selectedItem:t.getParameter("selectedItem")})})};u.prototype._onToolbarZoomControlTypeChange=function(t){this._handleZoomControlType(t.getParameter("zoomControlType"))};u.prototype._handleZoomControlType=function(t){var e=this.getGanttCharts();e.forEach(function(e){e.getAxisTimeStrategy()._updateZoomControlType(t)})};u.prototype._onChartDragEnter=function(t){var e=t.getParameter("originEvent");var a=t.getSource();if(e.button===0&&e.buttons!==0&&this._oDraggingSource!==undefined){a.setDraggingData(this._oDraggingSource);if(this._oTimePopoverData){a.setTimePopoverData(this._oTimePopoverData)}this._oDraggingSource=undefined;this._oTimePopoverData=undefined}else{this._oDraggingSource=undefined;this._oTimePopoverData=undefined;a.setDraggingData(this._oDraggingSource);a.setTimePopoverData(this._oTimePopoverData)}};u.prototype._onChartDragLeave=function(t){var e=t.getParameters();if(e.draggingSource!==undefined){this._oDraggingSource=e.draggingSource;if(e.timePopoverData){this._oTimePopoverData=e.timePopoverData}}else{this._oDraggingSource=undefined;this._oTimePopoverData=undefined}};u.prototype._onShapeDragEnd=function(t){this._oDraggingSource=undefined;this.getGanttCharts().forEach(function(t){var e=t.getAggregation("_chart");if(e&&e._setEventStatus){e._setEventStatus("shapeDragEnd")}})};u.prototype._onToolbarSettingsChange=function(t){var e=t.getParameters();for(var a=0;a<e.length;a++){switch(e[a].id){case sap.gantt.config.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC_KEY:if(this.getEnableTimeScrollSync()!==e[a].value){this.setEnableTimeScrollSync(e[a].value)}break;case sap.gantt.config.SETTING_ITEM_ENABLE_CURSOR_LINE_KEY:if(this.getEnableCursorLine()!==e[a].value){this.setEnableCursorLine(e[a].value)}break;case sap.gantt.config.SETTING_ITEM_ENABLE_NOW_LINE_KEY:if(this.getEnableNowLine()!==e[a].value){this.setEnableNowLine(e[a].value)}break;case sap.gantt.config.SETTING_ITEM_ENABLE_VERTICAL_LINE_KEY:if(this.getEnableVerticalLine()!==e[a].value){this.setEnableVerticalLine(e[a].value)}break;case sap.gantt.config.SETTING_ITEM_ENABLE_ADHOC_LINE_KEY:if(this.getEnableAdhocLine()!==e[a].value){this.setEnableAdhocLine(e[a].value)}break;default:this.fireCustomSettingChange(e[a])}}};u.prototype.switchOrientation=function(t,e){var a=this._oSplitter.getOrientation()===l.Horizontal?l.Vertical:l.Horizontal;a=t?t:a;if(e){var o=this.getContainerLayoutKey();if(this._oContainerLayoutConfigMap[o]){a=this._oContainerLayoutConfigMap[o].getOrientation()}}this._oSplitter.setOrientation(a);this._adjustSplitterLayoutData(e,e);this._oSplitter.triggerResize(true);return this};u.prototype.getToolbarSchemeKey=function(){return this._oToolbar.getToolbarSchemeKey()};u.prototype.selectShapes=function(t,e,a){var o=this.getGanttCharts(),n=false,i;if(t!=undefined&&t<o.length){i=o[t];n=i.selectShapes(e,a)}else{for(var r=0;r<o.length;r++){i=o[r];if(i.selectShapes(e,a)){n=true}}}return n};u.prototype.deselectShapes=function(t,e){var a=this.getGanttCharts(),o=false,n;if(t!=undefined&&t<this.getGanttCharts().length){n=this.getGanttCharts()[t];o=n.deselectShapes(e)}else{for(var i in a){n=a[i];if(n.deselectShapes(e)){o=true}}}return o};u.prototype.selectRelationships=function(t,e,a){var o=this.getGanttCharts(),n=false,i;if(t!=undefined&&t<o.length){i=o[t];n=i.selectRelationships(e,a)}else{for(var r=0;r<o.length;r++){i=o[r];if(i.selectRelationships(e,a)){n=true}}}return n};u.prototype.deselectRelationships=function(t,e){var a=this.getGanttCharts(),o=false,n;if(t!=undefined&&t<a.length){n=a[t];o=n.deselectRelationships(e)}else{for(var i=0;i<a.length;i++){n=a[i];if(n.deselectRelationships(e)){o=true}}}return o};u.prototype.selectRows=function(t,e,a){var o=false,n=this.getGanttCharts(),i;if(t!=undefined&&t<n.length){i=n[t];o=i.selectRows(e,a)}else{for(var r=0;r<n.length;r++){i=n[r];if(i.selectRows(e,a)){o=true}}}return o};u.prototype.deselectRows=function(t,e){var a=false,o=this.getGanttCharts(),n;if(t!=undefined&&t<o.length){n=o[t];a=n.deselectRows(e)}else{for(var i=0;i<o.length;i++){n=o[i];if(n.deselectRows(e)){a=true}}}return a};u.prototype.selectRowsAndShapes=function(t,e,a){var o=false,n=this.getGanttCharts(),i;if(t!=undefined&&t<n.length){i=n[t];o=i.selectRowsAndShapes(e,a)}else{for(var r=0;r<n.length;r++){i=n[r];if(i.selectRowsAndShapes(e,a)){o=true}}}return o};u.prototype.getSelectedShapes=function(t){var e=[],a=this.getGanttCharts(),o,n;if(t!=undefined&&t<a.length){o=a[t];n=o.getSelectedShapes();if(n!==undefined){e.push({ganttChartIndex:t,selectedShapes:n})}}else{for(var i=0;i<a.length;i++){o=a[i];n=o.getSelectedShapes();if(n!==undefined){e.push({ganttChartIndex:i,selectedShapes:n})}}}return e};u.prototype.getSelectedRows=function(t){var e=[],a=this.getGanttCharts(),o,n;if(t!=undefined&&t<a.length){o=a[t];n=o.getSelectedRows();if(n!==undefined&&n.length>0){e.push({ganttChartIndex:t,selectedRows:n})}}else{for(var i=0;i<a.length;i++){o=a[i];n=o.getSelectedRows();if(n!==undefined){e.push({ganttChartIndex:i,selectedRows:n})}}}return e};u.prototype.getSelectedRelationships=function(t){var e=[],a=this.getGanttCharts(),o,n;if(t!=undefined&&t<a.length){o=a[t];n=o.getSelectedRelationships();if(n!==undefined){e.push({ganttChartIndex:t,selectedRelationships:n})}}else{for(var i=0;i<a.length;i++){o=a[i];n=o.getSelectedRelationships();if(n!==undefined){e.push({ganttChartIndex:i,selectedRelationships:n})}}}return e};u.prototype.getAllSelections=function(t){var e=[],a=this.getGanttCharts(),o,n;if(t!=undefined&&t<a.length){o=a[t];n=o.getAllSelections();if(n!==undefined){e.push({ganttChartIndex:t,allSelection:n})}}else{for(var i=0;i<a.length;i++){o=a[i];n=o.getAllSelections();if(n!==undefined){e.push({ganttChartIndex:i,allSelection:n})}}}return e};u.prototype.exit=function(){this._detachEvents();this._oToolbar.destroy();this._oSplitter.destroy()};["addCustomToolbarItem","insertCustomToolbarItem","removeCustomToolbarItem","indexOfCustomToolbarItem","removeAllCustomToolbarItems","destroyCustomToolbarItems","getCustomToolbarItems"].forEach(function(t){u.prototype[t]=function(){return this._oToolbar[t].apply(this._oToolbar,arguments)}});return u},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartContainerRenderer", ["sap/gantt/misc/Utility","sap/ui/performance/Measurement"],function(e,t){"use strict";var r={};r.render=function(e,r){t.start("GanttChartContainerRenderer render","GanttPerf:GanttChartContainerRenderer render function");e.write("<div");e.writeControlData(r);e.addStyle("width",r.getWidth());e.addStyle("height",r.getHeight());e.writeStyles();e.addClass("sapGanttChartContainer");e.writeClasses();e.write(">");t.start("GanttChartContainerRenderer renderPaintServer","GanttPerf:GanttChartContainerRenderer renderPaintServer part");this.renderSvgDefs(e,r);t.end("GanttChartContainerRenderer renderPaintServer");t.start("GanttChartContainerRenderer renderToolbar","GanttPerf:GanttChartContainerRenderer renderToolbar part");this.renderToolbar(e,r);t.end("GanttChartContainerRenderer renderToolbar");t.start("GanttChartContainerRenderer renderGanttCharts","GanttPerf:GanttChartContainerRenderer renderGanttCharts part");this.renderGanttCharts(e,r);t.end("GanttChartContainerRenderer renderGanttCharts");e.write("</div>");t.end("GanttChartContainerRenderer render")};r.renderSvgDefs=function(e,t){var r=t.getSvgDefs();if(r){e.write("<svg");e.writeAttribute("id",t.getId()+"-svg-psdef");e.writeAttribute("aria-hidden","true");e.writeAttribute("tabindex",-1);e.writeAttribute("focusable",false);e.addClass("sapGanttInvisiblePaintServer");e.writeClasses();e.write(">");e.write(r.getDefString());e.write("</svg>")}};r.renderToolbar=function(e,t){e.renderControl(t._oToolbar)};r.renderGanttCharts=function(t,r){t.write("<div");t.addClass("sapGanttViewContainer");t.writeClasses();t.addStyle("width",r.getWidth());var n=r.getHeight();if(r._oToolbar.getAllToolbarItems().length>0){var a=e.findSapUiSizeClass();var i=a==="sapUiSizeCompact"||a==="sapUiSizeCondensed"?"32px":"48px";n="calc("+n+" - "+i+")"}t.addStyle("height",n);t.writeStyles();t.write(">");t.renderControl(r._oSplitter);t.write("</div>")};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartRenderer", ["sap/ui/performance/Measurement"],function(e){"use strict";var t={};t.render=function(t,r){e.start("GanttChartRenderer render","GanttPerf:GanttChartRenderer render function");t.write("<div");t.writeControlData(r);t.addStyle("width",r.getWidth());t.addStyle("height",r.getHeight());t.writeStyles();t.addClass("sapGanttChart");t.writeClasses();t.write(">");e.start("GanttChartRenderer renderPaintServer","GanttPerf:GanttChartRenderer renderPaintServer part");this.renderSvgDefs(t,r);e.end("GanttChartRenderer renderPaintServer");e.start("GanttChartRenderer renderChartHeader","GanttPerf:GanttChartRenderer renderChartHeader part");this.renderChartHeader(t,r);e.end("GanttChartRenderer renderChartHeader");e.start("GanttChartRenderer renderChartBody","GanttPerf:GanttChartRenderer renderChartBody part");this.renderChartBody(t,r);e.end("GanttChartRenderer renderChartBody");t.write("</div>");e.end("GanttChartRenderer render")};t.renderSvgDefs=function(e,t){var r=t.getSvgDefs();if(r){e.write("<svg");e.writeAttribute("id",t.getId()+"-svg-psdef");e.writeAttribute("aria-hidden","true");e.addStyle("float","left");e.addStyle("width","0px");e.addStyle("height","0px");e.writeStyles();e.write(">");e.write(r.getDefString());e.write("</svg>")}};t.renderChartHeader=function(e,t){e.write("<div id='"+t.getId()+"-header'");e.addClass("sapGanttChartHeader");e.writeClasses();e.write(">");e.write("<svg id='"+t.getId()+"-header-svg'");e.addClass("sapGanttChartHeaderSvg");e.writeClasses();e.write("></svg>");e.write("</div>")};t.renderChartBody=function(t,r){t.write("<div id='"+r.getId()+"-tt'");t.addClass("sapGanttChartTT");t.writeClasses();t.addStyle("width",r.getWidth());t.addStyle("flex","1 1 auto");t.writeStyles();t.write(">");e.start("GanttChartRenderer renderSvgDiv","GanttPerf:GanttChartRenderer renderPaintServer part");this.renderBodySvg(t,r);e.end("GanttChartRenderer renderSvgDiv");t.renderControl(r.getAggregation("_treeTable"));t.write("</div>")};t.renderBodySvg=function(e,t){e.write("<div id='"+t.getId()+"-svg-ctn'");e.addClass("sapGanttChartSvgCtn");e.writeClasses();e.write(">");e.write("<svg id='"+t.getId()+"-svg'");e.addClass("sapGanttChartSvg");e.writeClasses();e.addStyle("height","100%");e.writeStyles();e.write(">");e.write("</svg>");e.write("</div>")};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartWithTable", ["sap/ui/performance/Measurement","sap/ui/Device","./GanttChartBase","sap/ui/table/Column","sap/ui/table/Table","sap/ui/table/TreeTable","sap/ui/table/utils/TableUtils","sap/ui/layout/Splitter","sap/ui/layout/SplitterLayoutData","./GanttChart","./control/Cell","./control/Toolbar","./control/AssociateContainer","./drawer/SelectionPanel","./eventHandler/MouseWheelHandler","sap/ui/thirdparty/d3"],function(t,e,o,i,a,n,r,s,h,l,p,g,c,d,u){"use strict";var _=o.extend("sap.gantt.GanttChartWithTable",{metadata:{designtime:"sap/gantt/designtime/GanttChartWithTable.designtime",properties:{cellCallback:{type:"object"},fixedColumnCount:{type:"int"}},aggregations:{customToolbarItems:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"customToolbarItem",bindable:"bindable"},columns:{type:"sap.ui.table.Column",multiple:true,visibility:"public",singularName:"column"},_selectionPanel:{type:"sap.ui.table.TreeTable",multiple:false,visibility:"hidden"},_chart:{type:"sap.gantt.GanttChart",multiple:false,visibility:"hidden"}}}});_.prototype.init=function(){o.prototype.init.apply(this,arguments);t.start("GanttChartWithTable Init","GanttPerf:GanttChartWithTable Init function");this._oGanttChart=new l;this.setAggregation("_chart",this._oGanttChart);this._oGanttChartCnt=new c({enableRootDiv:true,content:this._oGanttChart});this._oTC=this._oGanttChart._oTT;var e=this;this._oTT=new n({visibleRowCountMode:"Auto",minAutoRowCount:1});jQuery.extend(this.mDefaultTableProperties,{fixedColumnCount:0,showColumnVisibilityMenu:false,selectionBehavior:sap.ui.table.SelectionBehavior.Row});this.setTableProperties(jQuery.extend({},this.mDefaultTableProperties));this._oTT._bVariableRowHeightEnabled=true;this._oTT._collectRowHeights=function(t){var o=n.prototype._collectRowHeights.apply(this,arguments);if(t){return o}e._aHeights=o;var i=e._aHeights[0];var a=e._getTTFirstRenderingRowIndex();var r=e._aHeights.length;var s=i;var h=e._oGanttChart._getDrawingData([a,a+r-1]);if(h&&h.length>0){s=h[0].rowSpan*i}for(var l=0;l<r;l++){var p=this.getContextByIndex(a+l);if(p){var g=p.getObject();var c=g?g.uid:undefined;if(c&&e._oGanttChart._oRowStatusMap[c]){e._aHeights[l]=e._oGanttChart._oRowStatusMap[c].visibleRowSpan*i}else{e._aHeights[l]=s}}else{e._aHeights[l]=i}}return e._aHeights};this._oTT._updateRowState=function(t){r.Grouping.updateGroups(this);var o=this.getRows(),i=e._getRowHeights();if(!i){return}var a=e._getTTFirstRenderingRowIndex();var n=e._aHeights.length;var s=e._oGanttChart._getDrawingData([a,a+n-1]);if(s&&s.length>0){var h=s[0].rowSpan}var l=this.$().find(".sapUiTableCtrlFixed > tbody > tr.sapUiTableTr");var p=this.$().find(".sapUiTableContentRow > div.sapUiTableRowSelectionCell");for(var g=0;g<o.length;g++){var c=o[g].$(),d=l.filter(":eq("+g+")"),u=p.filter(":eq("+g+")"),_=i[g]||0;var C=e._oGanttChart.getBaseRowHeight();var f=_/(C*h)>1;c.toggleClass("sapGanttExpandedRow",f);d.toggleClass("sapGanttExpandedRow",f);u.toggleClass("sapGanttExpandedRow",f)}};this._oTT.addEventDelegate({onAfterRendering:this._bindVerticalScrollForTT},this);this._oTT.attachToggleOpenState(function(t){e.fireTreeTableToggleEvent({rowIndex:t.getParameter("rowIndex"),rowContext:t.getParameter("rowContext"),expanded:t.getParameter("expanded")})});this._oTT.attachEvent("_rowsUpdated",this._onTTRowUpdate.bind(this));this.setAggregation("_selectionPanel",this._oTT);this._oToolbar=new g({type:sap.gantt.control.ToolbarType.Local,sourceId:sap.gantt.config.DEFAULT_HIERARCHY_KEY});this._oToolbar.data("holder",this);this._oToolbar.attachSourceChange(this._onToolbarSourceChange,this);this._oToolbar.attachExpandChartChange(this._onToolbarExpandChartChange,this);this._oToolbar.attachExpandTreeChange(this._onToolbarExpandTreeChange,this);this._oToolbar.attachModeChange(this._onToolbarModeChange,this);this._oToolbar.attachBirdEye(this._onToolbarBirdEye,this);this._oTT.addExtension(this._oToolbar);this._oSelectionPanelCnt=new c({enableRootDiv:true,content:this._oTT,layoutData:new h({size:"30%"})});this._oSplitter=new s({width:"100%",height:"100%",orientation:sap.ui.core.Orientation.Horizontal,contentAreas:[this._oSelectionPanelCnt,this._oGanttChartCnt]}).addStyleClass("sapGanttViewSplitterH");this._oSplitter.attachResize(this._onSplitterResize,this);this._oGanttChart.attachHorizontalScroll(this._onChartHSbScroll,this);this._oGanttChart.attachVerticalScroll(this._onChartVSbScroll,this);this._oGanttChart.attachRowSelectionChange(this._onRowSelectionChange,this);this._oGanttChart.attachShapeSelectionChange(this._onShapeSelectionChange,this);this._oGanttChart.attachChartMouseOver(this._onChartMouseOver,this);this._oGanttChart.attachRelationshipSelectionChange(this._onRelationshipSelectionChange,this);this._oGanttChart.attachChartClick(this._onClick,this);this._oGanttChart.attachChartDoubleClick(this._onDoubleClick,this);this._oGanttChart.attachChartRightClick(this._onRightClick,this);this._oGanttChart.attachEvent("_zoomInfoUpdated",this._onZoomInfoUpdated,this);this._oGanttChart.attachEvent("_shapesUpdated",this._onShapesUpdated,this);this._oGanttChart.attachChartDragEnter(this._onChartDragEnter,this);this._oGanttChart.attachChartDragLeave(this._onChartDragLeave,this);this._oGanttChart.attachShapeDragEnd(this._onShapeDragEnd,this);this._oGanttChart.attachEvent("_visibleHorizonUpdate",this._onGanttChartVisibleHorizonUpdate,this);this._oGanttChart.attachEvent("_timePeriodZoomStatusChange",this._onGanttChartTimePeriodZoomStatusChange,this);this._oGanttChart.attachEvent("_timePeriodZoomOperation",this._onGanttChartTimePeriodZoomOperation,this);this._oGanttChart.attachShapeResizeEnd(this._onShapeResizeEnd,this);this._oGanttChart.attachShapeMouseEnter(this._onShapeMouseEnter,this);this._oGanttChart.attachShapeMouseLeave(this._onShapeMouseLeave,this);this._oModesConfigMap={};this._oModesConfigMap[sap.gantt.config.DEFAULT_MODE_KEY]=sap.gantt.config.DEFAULT_MODE;this._oToolbarSchemeConfigMap={};this._oToolbarSchemeConfigMap[sap.gantt.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY]=sap.gantt.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME;this._oToolbarSchemeConfigMap[sap.gantt.config.EMPTY_TOOLBAR_SCHEME_KEY]=sap.gantt.config.EMPTY_TOOLBAR_SCHEME;this._oHierarchyConfigMap={};this._oHierarchyConfigMap[sap.gantt.config.DEFAULT_HIERARCHY_KEY]=sap.gantt.config.DEFAULT_HIERARCHY;this._oSelectionPanelDrawer=new d;this._oGanttChartSchemesConfigMap={};this._oGanttChartSchemesConfigMap[sap.gantt.config.DEFAULT_CHART_SCHEME_KEY]=sap.gantt.config.DEFAULT_CHART_SCHEME;this._oObjectTypesConfigMap={};this._oObjectTypesConfigMap[sap.gantt.config.DEFAULT_OBJECT_TYPE_KEY]=sap.gantt.config.DEFAULT_OBJECT_TYPE;this._oShapesConfigMap={};this._oMouseWheelHandler=new u(this);t.end("GanttChartWithTable Init")};_.prototype.setNowLineInUTC=function(t){o.prototype.setNowLineInUTC.call(this,t);this._oGanttChart.setNowLineInUTC(t)};_.prototype.setFixedColumnCount=function(t){this.setTableProperties({fixedColumnCount:t});return this};_.prototype.getFixedColumnCount=function(){return this.getTableProperties().fixedColumnCount};_.prototype.setTimeAxis=function(t){this.setProperty("timeAxis",t,true);this._oGanttChart.setTimeAxis(t);return this};_.prototype.setMode=function(t){this.setProperty("mode",t);this._oGanttChart.setMode(t);this._oToolbar.setMode(t);return this};_.prototype.setModes=function(t){this.setProperty("modes",t);this._oToolbar.setModes(t);this._oGanttChart.setModes(t);this._oModesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oModesConfigMap[t[e].getKey()]=t[e]}}return this};_.prototype.useSelectionPlugin=function(t){var e=this.getAggregation("_chart");var o=this.getAggregation("_selectionPanel");var i=e.getAggregation("_treeTable");if(this._oSelectionPlugin){this._oSelectionPlugin.detachSelectionChange(e._onRowSelectionChange,e);i.removePlugin(this._oSelectionPlugin);o.removePlugin(this._oSelectionPlugin);delete i._oSelectionPlugin;delete o._oSelectionPlugin;this._oSelectionPlugin=null}if(t){t.attachSelectionChange(e._onRowSelectionChange,e);i.addPlugin(t);o.addPlugin(t);i._oSelectionPlugin=t;o._oSelectionPlugin=t;this._oSelectionPlugin=t}};_.prototype.setSelectionMode=function(t){this.setProperty("selectionMode",t);switch(t){case sap.gantt.SelectionMode.Multiple:case sap.gantt.SelectionMode.MultiWithKeyboard:this.setTableProperties({selectionMode:sap.ui.table.SelectionMode.MultiToggle,selectionBehavior:sap.ui.table.SelectionBehavior.Row});break;case sap.gantt.SelectionMode.Single:this.setTableProperties({selectionMode:sap.ui.table.SelectionMode.Single,selectionBehavior:sap.ui.table.SelectionBehavior.Row});break;case sap.gantt.SelectionMode.None:this.setTableProperties({selectionMode:sap.ui.table.SelectionMode.None,selectionBehavior:sap.ui.table.SelectionBehavior.RowOnly});break}this._oGanttChart.setSelectionMode(t);return this};_.prototype.setShapeSelectionMode=function(t){this.setProperty("shapeSelectionMode",t);this._oGanttChart.setShapeSelectionMode(t);return this};_.prototype.setToolbarSchemes=function(t){this.setProperty("toolbarSchemes",t);this._oToolbar.setToolbarSchemes(t);this._oToolbarSchemeConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oToolbarSchemeConfigMap[t[e].getKey()]=t[e]}}return this};_.prototype.setHierarchyKey=function(t){this.setProperty("hierarchyKey",t);this._oGanttChart.setProperty("hierarchyKey",t);this._oToolbar.setSourceId(t);this._hierarchyChange();return this};_.prototype.setHierarchies=function(t){this.setProperty("hierarchies",t);this._oToolbar.setHierarchies(t);this._oGanttChart.setHierarchies(t);this._oHierarchyConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oHierarchyConfigMap[t[e].getKey()]=t[e]}}this._hierarchyChange();return this};_.prototype.setCalendarDef=function(t){this.setAggregation("calendarDef",t);var e=t.getBindingInfo("defs");if(e){e.templateShareable=true}this._oGanttChart.setCalendarDef(t.clone());return this};_.prototype.setAdhocLineLayer=function(t){this.setProperty("adhocLineLayer",t);this._oGanttChart.setAdhocLineLayer(t);return this};_.prototype.addAdhocLine=function(t){this._oGanttChart.addAdhocLine(t);return this};_.prototype.insertAdhocLine=function(t,e){this._oGanttChart.insertAdhocLine(t,e);return this};_.prototype.removeAdhocLine=function(t){return this._oGanttChart.removeAdhocLine(t)};_.prototype.getAdhocLines=function(){return this._oGanttChart.getAdhocLines()};_.prototype.removeAllAdhocLines=function(){return this._oGanttChart.removeAllAdhocLines()};_.prototype.setUseFlatMode=function(t){this._oTT.setUseFlatMode(t);return this};_.prototype._hierarchyChange=function(t){var e=this.getHierarchyKey();if(e&&this._oHierarchyConfigMap[e]){if(this._oHierarchyConfigMap[e].getColumns()&&this._oHierarchyConfigMap[e].getColumns().length>0){this._buildColumnFromCellCallback()}var o=this.getMode();if(o===sap.gantt.config.DEFAULT_MODE_KEY&&this._oHierarchyConfigMap[this.getHierarchyKey()]){o=this._oHierarchyConfigMap[this.getHierarchyKey()].getActiveModeKey()}this.setMode(o)}};_.prototype._buildColumnFromCellCallback=function(){this._oTT.removeAllColumns();var t,e;t=this._oHierarchyConfigMap[this.getHierarchyKey()];if(t){e=t.getColumns()}if(e){for(var o=0;o<e.length;o++){var a=new i({label:e[o].getTitle(),sortProperty:e[o].getSortAttribute(),filterProperty:e[o].getFilterAttribute(),width:e[o].getWidth(),template:new p({cellCallback:this.getCellCallback(),columnConfig:e[o]}).data("rowTypeName",this.getRowTypeName())});this._oTT.addColumn(a);this._oTT.addAriaLabelledBy(a.getLabel())}}};_.prototype.setObjectTypes=function(t){this.setProperty("objectTypes",t,true);this._oGanttChart.setObjectTypes(t);this._oObjectTypesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oObjectTypesConfigMap[t[e].getKey()]=t[e]}}return this};_.prototype.setChartSchemes=function(t){this.setProperty("chartSchemes",t,true);this._oGanttChart.setChartSchemes(t);this._oGanttChartSchemesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oGanttChartSchemesConfigMap[t[e].getKey()]=t[e]}}return this};_.prototype.setShapeDataNames=function(t){this.setProperty("shapeDataNames",t);this._oGanttChart.setShapeDataNames(t);return this};_.prototype.setLocale=function(t){this.setProperty("locale",t,true);this._oGanttChart.setLocale(t);return this};_.prototype.setShapes=function(t){this.setProperty("shapes",t,true);this._oGanttChart.setShapes(t);this._oShapesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oShapesConfigMap[t[e].getKey()]=t[e]}}return this};_.prototype.setSvgDefs=function(t){this.setProperty("svgDefs",t);this._oGanttChart.setSvgDefs(t);return this};_.prototype.setEnableCursorLine=function(t){this.setProperty("enableCursorLine",t);this._oGanttChart.setEnableCursorLine(t);this._oToolbar.setEnableCursorLine(t);return this};_.prototype.setEnableNowLine=function(t){this.setProperty("enableNowLine",t);this._oGanttChart.setEnableNowLine(t);this._oToolbar.setEnableNowLine(t);return this};_.prototype.setEnableVerticalLine=function(t){this.setProperty("enableVerticalLine",t);this._oGanttChart.setEnableVerticalLine(t);this._oToolbar.setEnableVerticalLine(t);return this};_.prototype.setEnableAdhocLine=function(t){this.setProperty("enableAdhocLine",t);this._oGanttChart.setEnableAdhocLine(t);this._oToolbar.setEnableAdhocLine(t);return this};_.prototype.setEnableShapeTimeDisplay=function(t){this.setProperty("enableShapeTimeDisplay",t);this._oGanttChart.setEnableShapeTimeDisplay(t);return this};_.prototype.setTimeZoomRate=function(t){this.setProperty("timeZoomRate",t,true);this._oGanttChart.setTimeZoomRate(t);return this};_.prototype.setAxisTimeStrategy=function(t){this._oGanttChart.setAxisTimeStrategy(t);return this};_.prototype.getAxisTimeStrategy=function(){return this._oGanttChart.getAxisTimeStrategy()};_.prototype.addRelationship=function(t){this._oGanttChart.addRelationship(t)};_.prototype.insertRelationship=function(t,e){this._oGanttChart.insertRelationship(t,e)};_.prototype.removeRelationship=function(t){this._oGanttChart.removeRelationship(t)};_.prototype.getRelationships=function(){this._oGanttChart.getRelationships()};_.prototype.destroyRelationships=function(){this._oGanttChart.destroyRelationships()};_.prototype.indexOfRelationship=function(t){this._oGanttChart.indexOfRelationship(t)};_.prototype.removeAllRelationships=function(){this._oGanttChart.removeAllRelationships()};_.prototype.updateRelationships=function(t){this._oGanttChart.updateRelationships(t)};_.prototype.setSelectionPanelSize=function(t,e){this.setProperty("selectionPanelSize",t,e);this._oSelectionPanelCnt.setLayoutData(new h({size:t}));return this};_.prototype.addColumn=function(t){this._oTT.addColumn(t)};_.prototype.insertColumn=function(t,e){this._oTT.insertColumn(t,e)};_.prototype.removeColumn=function(t){this._oTT.removeColumn(t)};_.prototype.removeAllColumns=function(){this._oTT.removeAllColumns()};_.prototype.getColumns=function(){return this._oTT.getColumns()};_.prototype.setGhostAlignment=function(t){this.setProperty("ghostAlignment",t);this._oGanttChart.setGhostAlignment(t);return this};_.prototype._bindAggregation=function(t,e){var i,a;if(t==="rows"&&e){i=this.getModel(e.model);a=this.getBindingContext(e.model);if(a&&i){e.path=i.resolve(e.path,a)}this._oTT.bindRows(e);this._oGanttChart.bindRows(e);this._oTC.updateRows=this._updateRows.bind(this);this._oTT._oSelectionPlugin=this._oTC._oSelectionPlugin}else if(t==="relationships"&&e){i=this.getModel(e.model);a=this.getBindingContext(e.model);if(a&&i){e.path=i.resolve(e.path,a)}this._oGanttChart.bindRelationships(e)}else if(t==="columns"&&e){i=this.getModel(e.model);a=this.getBindingContext(e.model);if(a&&i){e.path=i.resolve(e.path,a)}this._oTT.bindColumns(e)}else{return o.prototype._bindAggregation.apply(this,arguments)}};_.prototype.setTableProperties=function(t){o.prototype.setTableProperties.apply(this,arguments);this._oGanttChart.setTableProperties(t);return this};_.prototype._updateRows=function(t){if(t!=="VerticalScroll"&&(this._oTC.getFirstVisibleRow()===this._oTT.getFirstVisibleRow()||t===sap.ui.model.ChangeReason.Filter||t===sap.ui.model.ChangeReason.Sort)){a.prototype.updateRows.apply(this._oTT,arguments)}a.prototype.updateRows.apply(this._oTC,arguments)};_.prototype._detachToolbarEvents=function(){this._oToolbar.detachSourceChange(this._onToolbarSourceChange,this);this._oToolbar.detachExpandChartChange(this._onToolbarExpandChartChange,this);this._oToolbar.detachExpandTreeChange(this._onToolbarExpandTreeChange,this);this._oToolbar.detachBirdEye(this._onToolbarBirdEye,this)};_.prototype._onToolbarBirdEye=function(t){this._oGanttChart._doBirdEye(t.getParameter("birdEyeRange"))};_.prototype.doBirdEyeOnRow=function(t){this._oGanttChart.doBirdEyeOnRow(t)};_.prototype.getVisibleWidth=function(){return this._oGanttChart.getVisibleWidth()};_.prototype.onAfterRendering=function(){this._adjustChartHeaderHeight();this._attachEvents()};_.prototype.onBeforeRendering=function(){if(this._oToolbar.getAllToolbarItems().length===0){this._oTT.removeExtension(this._oToolbar)}else if(this._oTT.getExtension().length===0){this._oTT.addExtension(this._oToolbar)}};_.prototype._attachEvents=function(){var t={onAfterRendering:this._syncGanttTablesDomEvents};this._oTT.removeEventDelegate(t);this._oTT.addEventDelegate(t,this);this._oTC.removeEventDelegate(t);this._oTC.addEventDelegate(t,this);this._appendMaskSvg();var o=this.$().find(this.getDomSelectorById("spm-svg-table"));if(e.browser.firefox){o.unbind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel.bind(this));o.bind("MozMousePixelScroll.sapUiTableMouseWheel",this._onMouseWheel.bind(this))}else{o.unbind("wheel.sapUiTableMouseWheel",this._onMouseWheel.bind(this));o.bind("wheel.sapUiTableMouseWheel",this._onMouseWheel.bind(this))}};_.prototype._onMouseWheel=function(t){this._oMouseWheelHandler.handleEvent(t)};_.prototype._onRowSelectionChange=function(t){var e=this._getSelectionHandler().getSelectedIndices();this._oToolbar.toggleExpandTreeButton(e.length>0);this.fireRowSelectionChange({originEvent:t.getParameter("originEvent")});this._oTT._updateSelection()};_.prototype._onChartMouseOver=function(t){var e=t.getParameters();this.fireChartMouseOver({objectInfo:e.objectInfo,leadingRowInfo:e.leadingRowInfo,timestamp:e.timestamp,svgId:e.svgId,svgCoordinate:e.svgCoordinate,effectingMode:e.effectingMode,originEvent:e.originEvent})};_.prototype._onShapeSelectionChange=function(t){this.fireShapeSelectionChange({originEvent:t.getParameter("originEvent")})};_.prototype._onRelationshipSelectionChange=function(t){this.fireRelationshipSelectionChange({originEvent:t.getParameter("originEvent")})};_.prototype._onClick=function(t){var e=t.getParameters();this.fireChartClick({objectInfo:e.objectInfo,leadingRowInfo:e.leadingRowInfo,timestamp:e.timestamp,svgId:e.svgId,svgCoordinate:e.svgCoordinate,effectingMode:e.effectingMode,originEvent:e.originEvent})};_.prototype._onDoubleClick=function(t){var e=t.getParameters();this.fireChartDoubleClick({objectInfo:e.objectInfo,leadingRowInfo:e.leadingRowInfo,timestamp:e.timestamp,svgId:e.svgId,svgCoordinate:e.svgCoordinate,effectingMode:e.effectingMode,originEvent:e.originEvent})};_.prototype._onRightClick=function(t){var e=t.getParameters();this.fireChartRightClick({objectInfo:e.objectInfo,leadingRowInfo:e.leadingRowInfo,timestamp:e.timestamp,svgId:e.svgId,svgCoordinate:e.svgCoordinate,effectingMode:e.effectingMode,originEvent:e.originEvent})};_.prototype._onChartDragEnter=function(t){this.fireChartDragEnter({originEvent:t.getParameter("originEvent")})};_.prototype._onChartDragLeave=function(t){this.fireChartDragLeave({originEvent:t.getParameter("originEvent"),draggingSource:t.getParameter("draggingSource"),timePopoverData:t.getParameter("timePopoverData")})};_.prototype._onShapeDragEnd=function(t){var e=t.getParameters();this.fireShapeDragEnd({originEvent:e.originEvent,sourceShapeData:e.sourceShapeData,targetData:e.targetData,sourceSvgId:e.sourceSvgId,targetSvgId:e.targetSvgId})};_.prototype._onShapeResizeEnd=function(t){var e=t.getParameters();this.fireShapeResizeEnd({shapeUid:e.shapeUid,rowObject:e.rowObject,oldTime:e.oldTime,newTime:e.newTime})};_.prototype._onShapeMouseEnter=function(t){var e=t.getParameters();this.fireShapeMouseEnter({shapeData:e.shapeData,pageX:e.pageX,pageY:e.pageY,originEvent:e.originEvent})};_.prototype._onShapeMouseLeave=function(t){var e=t.getParameters();this.fireShapeMouseLeave({shapeData:e.shapeData,originEvent:e.originEvent})};_.prototype._onGanttChartVisibleHorizonUpdate=function(t){this.fireEvent("_visibleHorizonUpdate",t.getParameters())};_.prototype._onGanttChartTimePeriodZoomStatusChange=function(t){this.fireEvent("_timePeriodZoomStatusChange",t.getParameters())};_.prototype._onGanttChartTimePeriodZoomOperation=function(t){this.fireEvent("_timePeriodZoomOperation",t.getParameters())};_.prototype.syncTimePeriodZoomStatus=function(t){this._oGanttChart.syncTimePeriodZoomStatus(t)};_.prototype.syncTimePeriodZoomOperation=function(t,e,o){this._oGanttChart.syncTimePeriodZoomOperation(t,e,o)};_.prototype.syncMouseWheelZoom=function(t){this._oGanttChart.syncMouseWheelZoom(t)};_.prototype._onChartHSbScroll=function(t){this.fireHorizontalScroll(t.getParameters())};_.prototype.syncVisibleHorizon=function(t,e,o){this._oGanttChart.syncVisibleHorizon(t,e,o)};_.prototype._onChartVSbScroll=function(t){var e=jQuery(this.getTTVsbDom());var o=jQuery(this.getTCVsbDom());if(this.sScrollSource===null||this.sScrollSource!=="GanttChartWithTable"){this.sScrollSource="GanttChart";window.requestAnimationFrame(function(){e.scrollTop(o.scrollTop())})}else{this.sScrollSource=null}this.fireVerticalScroll({scrollSteps:this._oTC.getFirstVisibleRow(),scrollPosition:jQuery(this.getTCVsbDom()).scrollTop()})};_.prototype._drawSvg=function(){this._appendMaskSvg();this._updateMaskSvg();this._updateTableRowHeights();this._drawSelectionPanel()};_.prototype._onZoomInfoUpdated=function(t){var e=t.getParameters();if(e.axisTimeChanged){this.setProperty("timeZoomRate",this._oGanttChart.getAxisTime().getZoomRate(),true)}this.fireEvent("_zoomInfoUpdated",e)};_.prototype._onShapesUpdated=function(t){this.fireEvent("_shapesUpdated",{aSvg:t.getParameter("aSvg")})};_.prototype._bindVerticalScrollForTT=function(){var t=jQuery(this.getTTVsbDom());t.unbind("scroll.sapUiTableVScrollForGanttChartWithTable",this._onSelectionPanelVSbScroll);t.bind("scroll.sapUiTableVScrollForGanttChartWithTable",jQuery.proxy(this._onSelectionPanelVSbScroll,this))};_.prototype._onSelectionPanelVSbScroll=function(){var t=jQuery(this.getTTVsbDom());var e=jQuery(this.getTCVsbDom());if(this.sScrollSource===null||this.sScrollSource!=="GanttChart"){this.sScrollSource="GanttChartWithTable";window.requestAnimationFrame(function(){e.scrollTop(t.scrollTop())})}else{this.sScrollSource=null}this._applyTransform()};_.prototype._applyTransform=function(){this.$().find(this.getDomSelectorById("spm-svg-table")).css("transform","translateY("+-this._oTT.$().find(".sapUiTableCCnt").scrollTop()+"px)")};_.prototype._onSplitterResize=function(t){var e=t.getParameters();this._oGanttChart._draw();this.fireSplitterResize(e)};_.prototype._onToolbarSourceChange=function(t){var e=this.getHierarchyKey();var o=this.getMode();this.setHierarchyKey(t.getParameter("id"));this.notifySourceChange();this.fireGanttChartSwitchRequested({hierarchyKey:t.getParameter("id"),oldHierarchyKey:e,oldMode:o})};_.prototype._onToolbarExpandChartChange=function(t){var e=t.getParameter("isExpand"),o=t.getParameter("expandedChartSchemes");this.handleExpandChartChange(e,o,null)};_.prototype._onToolbarExpandTreeChange=function(t){var e=t.getParameter("action");if(e){var o=this._getSelectionHandler().getSelectedIndices();this._oTT[e](o)}};_.prototype._onToolbarModeChange=function(t){var e=this.getBinding("mode");if(e){e.setValue(t.getParameter("mode"))}this.setMode(t.getParameter("mode"))};_.prototype.handleExpandChartChange=function(t,e,o){o=o?o:this._getSelectionHandler().getSelectedIndices();this._oGanttChart.handleExpandChartChange(t,e,o)};_.prototype.invertRowExpandStatus=function(t,e){if(t&&t.length>0&&e){this._oGanttChart.invertRowExpandStatus(t,e)}};_.prototype._updateTableRowHeights=function(){var t=this._oTT;var e=this._getRowHeights();if(!e){return}t._updateRowHeights(e,false)};_.prototype._getRowHeights=function(){return this._aHeights};_.prototype.setBaseRowHeight=function(t){this.setProperty("baseRowHeight",t);this._oTT.setRowHeight(t);return this._oGanttChart.setBaseRowHeight(t)};_.prototype.getBaseRowHeight=function(){return this._oGanttChart.getBaseRowHeight()};_.prototype._onTTRowUpdate=function(){var t=this.$().find(this.getDomSelectorById("spm-svg-table-ctn"));if(this._oGanttChart.isRowExpanded()){var e=this._oTT.$();t.height(e.find(".sapUiTableCCnt").height());t.show();var o=t.find(".sapGanttSPMaskSvg");o.height(e.find(".sapUiTableCtrlCnt").height());this._drawSvg()}else{t.hide()}this._adjustGanttInferredRowHeight();this._oTT._updateRowState()};_.prototype._adjustChartHeaderHeight=function(){var t=this._oTT.$().find(".sapUiTableExt");var o=this._oTT.$().find(".sapUiTableColHdrCnt");var i=(t?t.outerHeight():0)+o.height()+1;if(e.browser.firefox){var a=this._oTT.$().find(".sapUiTableCCnt");i=parseInt(a[0].getBoundingClientRect().top-this._oTT.$()[0].getBoundingClientRect().top,10)}var n=this._oGanttChart.$().find(".sapGanttChartHeader");n.height(i);n.css("min-height",i);var r=this._oGanttChart.$().find(".sapGanttChartHeaderSvg");r.height(i);r.css("min-height",i)};_.prototype._adjustGanttInferredRowHeight=function(){var t=this._getRowHeights();var e=this._getTTFirstRenderingRowIndex();var o=this._oGanttChart._getDrawingData([e,e]);if(t&&t.length>0&&o&&o.length>0){var i=t[0]/o[0].visibleRowSpan;var a=this._oGanttChart._iInferedBaseRowHeight;if(i!==a){this._oGanttChart._setInferedBaseRowHeight(i);if(a===undefined){this._oTC.updateRows("change",{})}}}};_.prototype._syncGanttTablesDomEvents=function(t){var e=t.srcControl,o=e.getId()===this._oTT.getId()?this._oTC:this._oTT;this._adjustChartHeaderHeight();e.$().find(".sapUiTableRowHdr, .sapUiTableTr").hover(function(t){var e=jQuery(t.currentTarget).data("sapUiRowindex");o.$().find(".sapUiTableCtrlFixed > tbody > tr.sapUiTableTr").filter(":eq("+e+")").addClass("sapUiTableRowHvr");o.$().find(".sapUiTableCtrlScroll > tbody > tr.sapUiTableTr").filter(":eq("+e+")").addClass("sapUiTableRowHvr");o.$().find(".sapUiTableRowHdr").filter(":eq("+e+")").addClass("sapUiTableRowHvr")},function(t){o.$().find(".sapUiTableCtrlFixed > tbody > tr.sapUiTableTr").removeClass("sapUiTableRowHvr");o.$().find(".sapUiTableCtrlScroll > tbody > tr.sapUiTableTr").removeClass("sapUiTableRowHvr");o.$().find(".sapUiTableRowHdr").removeClass("sapUiTableRowHvr")})};_.prototype._setLargeDataScrolling=function(t){if(this._oTT._setLargeDataScrolling){this._oTT._setLargeDataScrolling(!!t)}if(this._oTC._setLargeDataScrolling){this._oTC._setLargeDataScrolling(!!t)}};_.prototype.getToolbarSchemeKey=function(){return this._oToolbar.getToolbarSchemeKey()};_.prototype.jumpToPosition=function(t){this._oGanttChart.jumpToPosition(t)};_.prototype.selectShapes=function(t,e){return this._oGanttChart.selectShapes(t,e)};_.prototype.deselectShapes=function(t){return this._oGanttChart.deselectShapes(t)};_.prototype.selectRelationships=function(t,e){return this._oGanttChart.selectRelationships(t,e)};_.prototype.deselectRelationships=function(t){return this._oGanttChart.deselectRelationships(t)};_.prototype.selectRows=function(t,e){return this._oGanttChart.selectRows(t,e)};_.prototype.deselectRows=function(t){return this._oGanttChart.deselectRows(t)};_.prototype.selectRowsAndShapes=function(t,e){return this._oGanttChart.selectRowsAndShapes(t,e)};_.prototype.getAllSelections=function(){return this._oGanttChart.getAllSelections()};_.prototype.getSelectedShapes=function(){var t=this._oGanttChart.getSelectedShapes();return t};_.prototype.getSelectedRows=function(){var t=this._oGanttChart.getSelectedRows();return t};_.prototype.getSelectedRelationships=function(){var t=this._oGanttChart.getSelectedRelationships();return t};_.prototype.setDraggingData=function(t){this._oGanttChart.setDraggingData(t)};_.prototype.setTimePopoverData=function(t){this._oGanttChart.setTimePopoverData(t)};_.prototype.getRowByShapeUid=function(t){return this._oGanttChart.getRowByShapeUid(t)};_.prototype._drawSelectionPanel=function(){var t=this._oTT.$().find(".sapUiTableRowHdrScr").width();var e=this._getVisibleRowData();if(e!==undefined){this._oSelectionPanelDrawer.drawSvg(d3.select(this.getDomSelectorById("spm-svg-table")),e,t,this);if(this._oTT.$().find(".sapUiTableCCnt").scrollTop()!=this._oTC.$().find(".sapUiTableCCnt").scrollTop()){this.$().find(this.getDomSelectorById("spm-svg-table")).css("transform","translateY("+-this._oTC.$().find(".sapUiTableCCnt").scrollTop()+"px)")}}};_.prototype._getVisibleRowData=function(){var t=this._getTTFirstRenderingRowIndex();var e=this.getVisibleRowCount()+1;var o=this._oGanttChart._getDrawingData([t,t+e-1]);var i=this._oGanttChart.getBaseRowHeight();var a=0;for(var n=0;n<o.length;n++){var r=o[n];r.rowHeight=r.rowSpan*i;r.y=a;a+=r.rowHeight}return o};_.prototype._appendMaskSvg=function(){var t=this.$().find(this.getDomSelectorById("spm-svg-table-ctn"));var e=this._oTT.$();if(t.length==0&&this._oGanttChart.isRowExpanded()){t=jQuery("<div id='"+this.getId()+"-spm-svg-table-ctn' class='sapGanttChartSPMSvgCtn' >"+"<svg id='"+this.getId()+"-spm-svg-table' class='sapGanttSPMaskSvg'>"+"</svg>"+"</div>");e.parent().append(t)}};_.prototype._updateMaskSvg=function(){var t=this.$().find(this.getDomSelectorById("spm-svg-table-ctn"));var e=this._oTT.$();t.height(e.find(".sapUiTableCCnt").height());t.width(jQuery(document).width());t.css("top",this._oGanttChart.$().find(".sapGanttChartHeader").height()+1);t.css("min-width",e.find("table").css("min-width"));var o=t.find(".sapGanttSPMaskSvg");o.width(t.width());o.height(e.find(".sapUiTableCtrlCnt").height())};_.prototype.getAxisOrdinal=function(){return this._oGanttChart.getAxisOrdinal()};_.prototype.getAxisTime=function(){return this._oGanttChart.getAxisTime()};_.prototype.expandToLevel=function(t){this._oTT.expandToLevel(t);return this};_.prototype.expand=function(t){this._oTT.expand(t);return this};_.prototype.collapse=function(t){this._oTT.collapse(t);return this};_.prototype.getVisibleRowCount=function(){return this._oTT.getVisibleRowCount()};_.prototype.getLargestHorizonByDataRange=function(t,e,o){return this._oGanttChart.getLargestHorizonByDataRange(t,e,o)};_.prototype.setSelectedIndex=function(t){this._getSelectionHandler().setSelectedIndex(t);return this};_.prototype.getSelectedIndex=function(){return this._getSelectionHandler().getSelectedIndex()};_.prototype.getFirstVisibleRow=function(){return this.getTableProperties().firstVisibleRow};_.prototype.setFirstVisibleRow=function(t){this.setTableProperties({firstVisibleRow:t});return this};_.prototype.getRows=function(){return this._oTT.getRows()};_.prototype.exit=function(){this._detachToolbarEvents();this._oSplitter.destroy()};_.prototype.notifySourceChange=function(){this._oTT.setFirstVisibleRow(0);this._oGanttChart.notifySourceChange()};_.prototype.autoResizeColumn=function(t){if(t>=0&&jQuery.isNumeric(t)){this._oTT.autoResizeColumn(t)}else{for(var e=this._oTT.getColumns().length;e>=0;e--){this._oTT.autoResizeColumn(e)}}};_.prototype._autoResizeColumn=function(){if(this._oHierarchyConfigMap[this.getHierarchyKey()].getAutoResizeColumn()){this.autoResizeColumn()}};_.prototype.redraw=function(t){this._oGanttChart.redraw(t)};_.prototype.selectByUid=function(t){this._oGanttChart.selectByUid(t)};_.prototype.getTTHsbDom=function(){return this._oTT.getDomRef(sap.ui.table.SharedDomRef.HorizontalScrollBar)};_.prototype.getTTVsbDom=function(){return this._oTT.getDomRef(sap.ui.table.SharedDomRef.VerticalScrollBar)};_.prototype.getTCVsbDom=function(){return this._oGanttChart.getTTVsbDom()};_.prototype._getTTFirstRenderingRowIndex=function(){if(this._oTT.getRows().length>0){return this._oTT.getRows()[0].getIndex()}return this._oTT.getFirstVisibleRow()};["addCustomToolbarItem","insertCustomToolbarItem","removeCustomToolbarItem","indexOfCustomToolbarItem","removeAllCustomToolbarItems","destroyCustomToolbarItems","getCustomToolbarItems"].forEach(function(t){_.prototype[t]=function(){return this._oToolbar[t].apply(this._oToolbar,arguments)}});return _},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/GanttChartWithTableRenderer", ["sap/ui/core/theming/Parameters","sap/gantt/misc/Utility"],function(e,t){"use strict";var a={};a.render=function(e,t){e.write("<div");e.writeControlData(t);e.addClass("sapGanttChartWithTable");e.writeClasses();e.addStyle("width",t.getWidth());e.addStyle("height",t.getHeight());e.writeStyles();e.write(">");this._setTableColumnHeaderHeight(t);e.renderControl(t._oSplitter);e.write("</div>")};a._setTableColumnHeaderHeight=function(a){var i=a._oToolbar.getAllToolbarItems().length===0;if(i){var r=t.findSapUiSizeClass(),n=sap.ui.getCore().getConfiguration().getTheme().endsWith("hcb"),s=0,o=n?4:2;if(r==="sapUiSizeCozy"){s=parseInt(e.get("_sap_gantt_Gantt_HeaderHeight"),10)-o}else{s=parseInt(e.get("_sap_gantt_Gantt_CompactHeaderHeight"),10)-o}a._oTT.setColumnHeaderHeight(s)}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/axistime/AxisTimeStrategyBase", ["sap/base/Log","sap/gantt/library","sap/ui/core/Core","sap/ui/core/Element","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/core/format/DateFormat","sap/base/util/ObjectPath","../misc/Utility","../misc/Format","../misc/RelativeTimeFormatter","../config/TimeHorizon","../misc/AxisTime"],function(e,t,i,a,o,n,r,s,l,m,p,g,T){"use strict";var u=a.extend("sap.gantt.axistime.AxisTimeStrategyBase",{metadata:{library:"sap.gantt",abstract:true,properties:{timeLineOptions:{type:"object"},timeLineOption:{type:"object"},coarsestTimeLineOption:{type:"object"},finestTimeLineOption:{type:"object"},zoomLevels:{type:"int",defaultValue:10},zoomLevel:{type:"int",defaultValue:0},calendarType:{type:"string",defaultValue:sap.ui.core.CalendarType.Gregorian},locale:{type:"object"},firstDayOfWeek:{type:"int"},mouseWheelZoomType:{type:"sap.gantt.MouseWheelZoomType",defaultValue:t.MouseWheelZoomType.FineGranular},calendarWeekNumbering:{type:"sap.ui.core.date.CalendarWeekNumbering",defaultValue:null}},aggregations:{totalHorizon:{type:"sap.gantt.config.TimeHorizon",multiple:false},visibleHorizon:{type:"sap.gantt.config.TimeHorizon",multiple:false},_axisTime:{type:"sap.gantt.misc.AxisTime",multiple:false,visibility:"hidden"}}}});u.prototype.applySettings=function(e){e=e||{};if(!e.visibleHorizon){e.visibleHorizon=t.config.DEFAULT_INIT_HORIZON.clone()}if(!e.totalHorizon){e.totalHorizon=t.config.DEFAULT_PLAN_HORIZON.clone()}this.checkFirstDayOfWeek(e);a.prototype.applySettings.call(this,e);this.calZoomBase();return this};u.prototype.clone=function(){var e=a.prototype.clone.apply(this,arguments);if(e.hasListeners("_redrawRequest")){e.mEventRegistry._redrawRequest.forEach(function(t){e.detachEvent("_redrawRequest",t.fFunction,t.oListener)})}return e};u.prototype.exit=function(){i.detachLocalizationChanged(this._onLocalizationChanged,this)};u.prototype.isTimePeriodZoomEnabled=function(){return true};u.prototype._setVisibleHorizon=function(e){var t=this._completeTimeHorizon(e);var i=this.getAggregation("visibleHorizon");if(i){i.setStartTime(t.getStartTime(),true);i.setEndTime(t.getEndTime(),true)}else{this.setAggregation("visibleHorizon",t,true)}return this};u.prototype.setVisibleHorizonWithReason=function(e,t,i){this._setVisibleHorizon(e);return this};u.prototype._completeTimeHorizon=function(e){var t=this.getVisibleHorizon(),i=this.getTotalHorizon();if(t===null||i===null){return e}var a=new g({startTime:t.getStartTime(),endTime:t.getEndTime()});if(e){var o=e.getStartTime(),n=e.getEndTime(),r,s=m.abapTimestampToDate(i.getStartTime()),l=m.abapTimestampToDate(i.getEndTime());if(!o&&!n){return a}var p;if(this._oZoom&&this._oZoom.base&&this._oZoom.base.scale!==undefined&&this._nGanttVisibleWidth!==undefined&&this.getAxisTime()){var T=this.getAxisTime().getZoomRate();var u=this._oZoom.base.scale/T;p=this._nGanttVisibleWidth*u}else{p=m.abapTimestampToDate(a.getEndTime()).getTime()-m.abapTimestampToDate(a.getStartTime()).getTime()}if(!o){r=m.abapTimestampToDate(n);r.setTime(r.getTime()-p);if(r<s){r=s;n=m.dateToAbapTimestamp(new Date(s+p))}o=m.dateToAbapTimestamp(r)}else if(!n){r=m.abapTimestampToDate(o);r.setTime(r.getTime()+p);if(r>l){r=l;o=m.dateToAbapTimestamp(new Date(l-p))}n=m.dateToAbapTimestamp(r)}else{r=m.abapTimestampToDate(o);if(r<s){o=this.getTotalHorizon().getStartTime()}r=m.abapTimestampToDate(n);if(r>l){n=this.getTotalHorizon().getEndTime()}}a.setStartTime(o);a.setEndTime(n)}return a};u.prototype.createAxisTime=function(t){var i=this.getTimeLineOption(),a=this.getVisibleHorizon(),o=this.getTotalHorizon();if(!l.judgeTimeHorizonValidity(a,o)){if(this.getVisibleHorizon()){this.getVisibleHorizon().setStartTime(o.getStartTime(),true);this.getVisibleHorizon().setEndTime(o.getEndTime(),true)}else{this.setAggregation("visibleHorizon",o.clone(),true)}e.warning("Visible horizon is not in total horizon, so convert visible horizon to total horizon",null,"sap.gantt.axistime.AxisTimeStrategyBase.createAxisTime()")}var n=m.getTimeStampFormatter().parse(o.getStartTime());var r=m.getTimeStampFormatter().parse(o.getEndTime());var p=r.valueOf()-n.valueOf();var g=m.getTimeStampFormatter().parse("20000101000000");var u=s.get(i.innerInterval.unit).offset(g,i.innerInterval.span).valueOf()-g.valueOf();var f=new T([n,r],[0,Math.ceil(p*i.innerInterval.range/u)],1,null,null,t,this);this.setAggregation("_axisTime",f,true)};u.prototype.syncContext=function(e){var t={zoomLevel:undefined,axisTimeChanged:false};return t};u.prototype.updateStopInfo=function(e){return null};u.prototype._setTotalHorizon=function(e,t){if(typeof t==="undefined"){t=true}if(e){var i=this.getAggregation("totalHorizon");if(i){i.setStartTime(e.getStartTime(),true);i.setEndTime(e.getEndTime(),true)}else{this.setAggregation("totalHorizon",e,t)}}return this};u.prototype.getUpperRowFormatter=function(){var e=this.getTimeLineOption();var t=e.largeInterval;var a;if(t.relativeTime){var n=m.abapTimestampToDate(this.getTotalHorizon().getStartTime());a=new p(n,t.unit,t.relativeTimePrefix)}else{var s=this.getCalendarType(),l=this.getCalendarWeekNumbering(),g=this.getLocale()?this.getLocale():new o(i.getConfiguration().getLanguage().toLowerCase());a=r.getDateTimeWithTimezoneInstance({format:t.format,pattern:t.pattern,style:t.style,calendarType:e.calendarType||s,calendarWeekNumbering:l,showTimezone:false},t.locale?new o(t.locale):g)}return a};u.prototype.getLowerRowFormatter=function(){var e=this.getTimeLineOption();var t=e.smallInterval;var a;if(t.relativeTime){var n=m.abapTimestampToDate(this.getTotalHorizon().getStartTime());a=new p(n,t.unit,t.relativeTimePrefix)}else{var s=this.getCalendarType(),l=this.getCalendarWeekNumbering(),g=this.getLocale()?this.getLocale():new o(i.getConfiguration().getLanguage().toLowerCase());a=r.getDateTimeWithTimezoneInstance({format:t.format,pattern:t.pattern,style:t.style,calendarType:s,calendarWeekNumbering:l,showTimezone:false},t.locale?new o(t.locale):g)}return a};u.prototype.isLowerRowTickHourSensitive=function(){var e=this.getTimeLineOption();var t=e.innerInterval.unit;var i=e.innerInterval.span;var a=m.getTimeStampFormatter().parse("20000101000000");var o=s.get(t).offset(a,i);return o.getTime()-a.getTime()<=60*60*1e3};u.prototype.getAxisTime=function(){return this.getAggregation("_axisTime")};u.prototype.fireRedrawRequest=function(e,t,i,a,o){this.fireEvent("_redrawRequest",{forceUpdate:e,reasonCode:t,valueBeforeChange:i,originEvent:a,subReasonCode:o})};u.prototype.updateGanttVisibleWidth=function(e){this._nGanttVisibleWidth=e};u.prototype.getGanttVisibleWidth=function(){return this._nGanttVisibleWidth};u.prototype.calZoomScale=function(e,t,i){var a=m.getTimeStampFormatter().parse("20000101000000");var o=s.get(e).offset(a,t);return this.calZoomScaleByDate(a,o,i)};u.prototype.calZoomScaleByDate=function(e,t,i){return(t.valueOf()-e.valueOf())/i};u.prototype.calZoomBase=function(){var e=this.getTimeLineOption()||this.getFinestTimeLineOption();if(e){var t=this.calZoomScale(e.innerInterval.unit,e.innerInterval.span,e.innerInterval.range);this._oZoom={base:{timeLineOption:e,rate:1,scale:t}};return true}return false};u.prototype.checkFirstDayOfWeek=function(e){if(typeof e.firstDayOfWeek==="undefined"){e.firstDayOfWeek=n.getInstance(i.getConfiguration().getLocale()).getFirstDayOfWeek();i.attachLocalizationChanged(this._onLocalizationChanged,this)}};u.prototype.updateVisibleHorizonOnMouseWheelZoom=function(e,i,a,o){var n=i<0;var r=Math.round(Math.abs(i)/100);var s=this.getMouseWheelZoomType();if(s===t.MouseWheelZoomType.FineGranular){this.updateVisibleHorizonOnFineGranularMouseWheelZoom(e,n,r,a,o)}else if(s===t.MouseWheelZoomType.Stepwise){this.updateVisibleHorizonOnStepWiseMouseWheelZoom(e,n,r,a,o)}};u.prototype.updateVisibleHorizonOnFineGranularMouseWheelZoom=function(e,t,i,a,o){var n=this.getVisibleHorizon();var r=m.abapTimestampToDate(n.getStartTime());var l=this.getTimeLineOption();var p=s.get(l.innerInterval.unit).offset(r,i*l.innerInterval.span).getTime()-r.getTime();var g=t?-1:1;var T=this.calVisibleHorizonByDelta(g*p,e);var u=o?"syncVisibleHorizon":"mouseWheelZoom";this.setVisibleHorizonWithReason(T,u,a)};u.prototype.updateVisibleHorizonOnStepWiseMouseWheelZoom=function(e,t,i,a,o){var n=t?-1:1;var r=this.getZoomLevel()-n*i;if(r>-1&&r<this.getZoomLevels()){if(this._aZoomRate[r]&&!l.floatEqual(this._aZoomRate[r],this._oZoom.rate)){this.setZoomLevel(r)}}};u.prototype.calVisibleHorizonByRate=function(e,t){var i=0;if(this._oZoom&&this._oZoom.base&&this._oZoom.base.scale!==undefined&&this._nGanttVisibleWidth!==undefined){var a=m.abapTimestampToDate(this.getVisibleHorizon().getStartTime());var o=m.abapTimestampToDate(this.getVisibleHorizon().getEndTime());var n=o.getTime()-a.getTime();var r=this._oZoom.base.scale/e;var s=this._nGanttVisibleWidth*r;i=s-n}return this.calVisibleHorizonByDelta(i,t)};u.prototype.calVisibleHorizonByDelta=function(e,t){var i=this.getVisibleHorizon();e=Math.round(e)||0;if(e!==0){var a=m.abapTimestampToDate(i.getStartTime()).getTime();var o=m.abapTimestampToDate(i.getEndTime()).getTime();var n=o-a;var r=0;var s;var l=m.abapTimestampToDate(this.getTotalHorizon().getStartTime()).getTime();var p=m.abapTimestampToDate(this.getTotalHorizon().getEndTime()).getTime();if(e>0&&a<=l){s=0;r=l}else if(e>0&&o>=p){s=1;r=p}else{if(!t){r=a+n/2}else{r=t.getTime()}s=(r-a)/n}var T=n+e;var u=Math.floor(r-s*T);if(u<=l){u=l}var f=u+T;if(f>=p){u=u-(p-f);f=p;if(u<=l){u=l}}return new g({startTime:new Date(u),endTime:new Date(f)})}return i};u.prototype.calMiddleDate=function(e,t){return new Date(e.getTime()+(t.getTime()-e.getTime())/2)};u.prototype._onLocalizationChanged=function(){this.setFirstDayOfWeek(n.getInstance(i.getConfiguration().getLocale()).getFirstDayOfWeek())};u.prototype._updateZoomControlType=function(e){return null};return u},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/axistime/FullScreenStrategy", ["sap/base/Log","sap/gantt/library","sap/ui/core/Element","sap/base/util/ObjectPath","./AxisTimeStrategyBase","../misc/Utility","../misc/Format"],function(t,e,i,o,s,a,n){"use strict";sap.gantt.axistime.FullScreenTimeLineOptions=e.config.DEFAULT_TIME_ZOOM_STRATEGY;var r=s.extend("sap.gantt.axistime.FullScreenStrategy",{metadata:{library:"sap.gantt"}});r.prototype.init=function(){this.setProperty("coarsestTimeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["1month"],true);this.setProperty("finestTimeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["5min"],true);this.setProperty("timeLineOptions",sap.gantt.axistime.FullScreenTimeLineOptions,true);this.setProperty("timeLineOption",sap.gantt.axistime.FullScreenTimeLineOptions["4day"],true);this.setProperty("zoomLevel",0,true);this.setProperty("zoomLevels",0,true);this.setProperty("mouseWheelZoomType",sap.gantt.MouseWheelZoomType.None,true)};r.prototype.applySettings=function(t){t=t||{};this.checkFirstDayOfWeek(t);i.prototype.applySettings.call(this,t);this.calZoomBase();return this};r.prototype.isTimePeriodZoomEnabled=function(){return false};r.prototype.setMouseWheelZoomType=function(e){t.warning("FullScreenStrategy does not support zoom, its zoom type is None and can not be set",null,"FullScreenStrategy.prototype.setMouseWheelZoomType()");return this};r.prototype.setVisibleHorizon=function(t){this.setVisibleHorizonWithReason(t,"visibleHorizonUpdated");return this};r.prototype.setTotalHorizon=function(t){var e=this.getTotalHorizon();if(e===t||e&&e.equals(t)){return}this.setAggregation("totalHorizon",t)};r.prototype.setVisibleHorizonWithReason=function(t,e,i){if(!this.getTotalHorizon()||!this.getTotalHorizon().equals(t)){this.setTotalHorizon(t.clone())}var o=this.getVisibleHorizon();if(o){o=o.clone()}s.prototype._setVisibleHorizon.call(this,t);if(o){this.fireRedrawRequest(true,e,o,i)}return this};r.prototype.syncContext=function(t){var e=false;var i={zoomLevel:undefined,axisTimeChanged:false};var o=this._calSuitableRateByChartWidth(t);if(o!==undefined){var s=this._oZoom.rate||-1;this._oZoom.rate=o;this.getParent().getAxisTime().setZoomRate(this._oZoom.rate);e=!a.floatEqual(s,this._oZoom.rate);if(e){i.axisTimeChanged=true}}i.zoomLevel=this.getZoomLevel();this._updateTimeLineOption();return i};r.prototype._calSuitableRateByChartWidth=function(t){var e=this.getVisibleHorizon(),i;if(e&&e.getStartTime()&&e.getEndTime()){var o=this.calZoomScaleByDate(n.abapTimestampToDate(e.getStartTime()),n.abapTimestampToDate(e.getEndTime()),t);i=this._oZoom.base.scale/o}return i};r.prototype._updateTimeLineOption=function(){var t=n.getTimeStampFormatter().parse("20000101000000"),e,i,s=this.getTimeLineOptions(),a=this.getProperty("timeLineOption");var r=this.getAxisTime();if(r){var p=r.timeToView(t);for(i in s){var l=s[i].innerInterval;var m=r.timeToView(o.get(l.unit).offset(t,l.span));var u=Math.abs(Math.ceil(m-p));if(u>=l.range){e=i;break}}a=e?s[e]:s[i];this.setProperty("timeLineOption",a,true)}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/axistime/ProportionZoomStrategy", ["sap/base/Log","sap/gantt/library","sap/base/util/ObjectPath","sap/gantt/axistime/AxisTimeStrategyBase","sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/gantt/config/TimeHorizon"],function(t,e,i,o,a,s,n){"use strict";sap.gantt.axistime.ProportionTimeLineOptions=e.config.DEFAULT_TIME_ZOOM_STRATEGY;var r=o.extend("sap.gantt.axistime.ProportionZoomStrategy",{metadata:{library:"sap.gantt"}});r.prototype.init=function(){this._aZoomRate=new Array(10);this.setProperty("coarsestTimeLineOption",sap.gantt.axistime.ProportionTimeLineOptions["1month"],true);this.setProperty("finestTimeLineOption",sap.gantt.axistime.ProportionTimeLineOptions["5min"],true);this.setProperty("timeLineOptions",sap.gantt.axistime.ProportionTimeLineOptions,true);this.setProperty("timeLineOption",sap.gantt.axistime.ProportionTimeLineOptions["4day"],true);this.setProperty("zoomLevel",0,true);this.setProperty("zoomLevels",10,true)};r.prototype.applySettings=function(t){o.prototype.applySettings.call(this,t);this.initialSettings=t;return this};r.prototype.setVisibleHorizon=function(t){this.setVisibleHorizonWithReason(t,"visibleHorizonUpdated");return this};r.prototype.setVisibleHorizonWithReason=function(t,e,i,a){if(t&&!t.getStartTime()&&!t.getEndTime()){this._bHorizontalScroll=false}else{this._bHorizontalScroll=!!(t&&(!t.getStartTime()||!t.getEndTime()))}var s=this.getVisibleHorizon();if(s){s=s.clone()}o.prototype._setVisibleHorizon.apply(this,arguments);if(s){this.fireRedrawRequest(false,e,s,i,a)}return this};r.prototype.setTotalHorizon=function(t){o.prototype._setTotalHorizon.apply(this,arguments);if(this.getAxisTime()){this.calZoomBase();this.createAxisTime(this.getAxisTime().getLocale());this.fireRedrawRequest(true,"totalHorizonUpdated")}return this};r.prototype.updateStopInfo=function(t){this.setZoomLevel(t.index);return this};r.prototype.setZoomLevel=function(t){var e=sap.gantt.simple.VisibleHorizonUpdateSubType;if(t>=0&&t!==this.getZoomLevel()){var i=t>this.getZoomLevel()?e.ZoomIn:e.ZoomOut;this.setProperty("zoomLevel",t,true);if(this._aZoomRate[t]){var o=this.calVisibleHorizonByRate(this._aZoomRate[t]);this.setVisibleHorizonWithReason(o,"zoomLevelChanged",null,i)}}return this};r.prototype.setZoomLevels=function(t){this.setProperty("zoomLevels",t,true);if(t>1){this._aZoomRate=new Array(t)}else{this._aZoomRate=[1]}this._updateZoomRateOnStops();return this};r.prototype.syncContext=function(t){var e=false,i=false;var o={zoomLevel:undefined,axisTimeChanged:false};var s=this.getParent()?this.getParent()._iLastVisibleWidth:null;var n=s?s:this.getGanttVisibleWidth();if(n&&t!==n){this._updateVisibleHorizon(t)}var r=this._determineZoomBoundaryByStrategy();var m=this._determineZoomRateByChartWidth(t);if(m){this.updateGanttVisibleWidth(t);var h=this._oZoom.minRate||-1;this._oZoom.minRate=Math.max(r.minRate,m.minRate)||r.minRate;var l=this._oZoom.maxRate||-1;this._oZoom.maxRate=r.maxRate;var p=this._oZoom.rate||-1;i=!a.floatEqual(h,this._oZoom.minRate)||!a.floatEqual(l,this._oZoom.maxRate);if(i){this._updateZoomRateOnStops();this._adjustRateByBoundary()}if(m.suitableRate&&!this._bHorizontalScroll){this._oZoom.rate=m.suitableRate;this._adjustRateByBoundary()}this._bHorizontalScroll=false;var g=this.getZoomLevel(),u=this._calcZoomLevelFromZoomRate(this._oZoom.rate);var _=g!==u&&!this.getParent()._isDisplayTypeChanged;if(_){this.setProperty("zoomLevel",u,true)}o.zoomLevel=this.getZoomLevel();e=!a.floatEqual(p,this._oZoom.rate);if(e){this.getParent().getAxisTime().setZoomRate(this._oZoom.rate);this._updateTimeLineOption()}o.axisTimeChanged=e}return o};r.prototype._updateVisibleHorizon=function(t){var e=this.getVisibleHorizon();var i=this.getGanttVisibleWidth();var s=a.calculateHorizonByWidth(e,i,t);o.prototype._setVisibleHorizon.call(this,s)};r.prototype.updateInitialVisibleHorizon=function(t,e){this.getParent().getAxisTime().setZoomRate(this._aZoomRate[e]);this._updateTimeLineOption();o.prototype._setVisibleHorizon.call(this,t)};r.prototype._adjustRateByBoundary=function(){if(this._oZoom.rate){this._oZoom.rate=Math.max(this._oZoom.rate,this._oZoom.minRate);this._oZoom.rate=Math.min(this._oZoom.rate,this._oZoom.maxRate)}};r.prototype._updateZoomRateOnStops=function(){if(this._oZoom&&this._oZoom.maxRate&&this._oZoom.minRate){var t=this._oZoom.maxRate,e=this._oZoom.minRate,i=this.getZoomLevels();this._oLog={};this._oLog.fMax=Math.log(t);this._oLog.fMin=Math.log(e);this._oLog.fStep=(this._oLog.fMax-this._oLog.fMin)/i;if(i>0){for(var o=0;o<i;o++){this._aZoomRate[o]=Math.pow(Math.E,this._oLog.fMin+this._oLog.fStep*o)}}else{this._aZoomRate[0]=1}}};r.prototype._calcZoomLevelFromZoomRate=function(t){if(this._oZoom&&this._oLog&&t){return Math.round((Math.log(t)-this._oLog.fMin)/this._oLog.fStep)}};r.prototype._determineZoomBoundaryByStrategy=function(){if(this._oZoom&&this._oZoom.base){var t=this.getCoarsestTimeLineOption(),e=this.getFinestTimeLineOption();return{minRate:this._oZoom.base.scale/this.calZoomScale(t.innerInterval.unit,t.innerInterval.span,t.innerInterval.range),maxRate:this._oZoom.base.scale/this.calZoomScale(e.innerInterval.unit,e.innerInterval.span,e.innerInterval.range*4)}}};r.prototype._determineZoomRateByChartWidth=function(e){var i=this.getTotalHorizon(),n=this.getVisibleHorizon(),r={};if(!this._oZoom){return null}if(!a.judgeTimeHorizonValidity(n,i)){this.getVisibleHorizon().setStartTime(i.getStartTime(),true);this.getVisibleHorizon().setEndTime(i.getEndTime(),true);t.warning("Visible horizon is not in total horizon, so convert visible horizon to total horizon",null,"sap.gantt.axistime.ProportionZoomStrategy.syncContext()")}if(i){var m=this.calZoomScaleByDate(s.abapTimestampToDate(i.getStartTime()),s.abapTimestampToDate(i.getEndTime()),e);r.minRate=this._oZoom.base.scale/m}if(n&&n.getStartTime()&&n.getEndTime()){var h=n.getStartTime();var l=n.getEndTime();if(h===l){o.prototype._setVisibleHorizon.call(this,i);var p=this.calVisibleHorizonByRate(this._aZoomRate[this.getZoomLevel()]);o.prototype._setVisibleHorizon.call(this,p);h=p.getStartTime();l=p.getEndTime()}var g=this.calZoomScaleByDate(s.abapTimestampToDate(h),s.abapTimestampToDate(l),e);r.suitableRate=this._oZoom.base.scale/g}return r};r.prototype._updateTimeLineOption=function(){var t=s.getTimeStampFormatter().parse("20000101000000"),e,o,a=this.getTimeLineOptions(),n=this.getProperty("timeLineOption");var r=this.getAxisTime();if(r){var m=r.timeToView(t);for(o in a){var h=a[o].innerInterval;var l=r.timeToView(i.get(h.unit).offset(t,h.span));var p=Math.abs(Math.ceil(l-m));if(p>=h.range){e=o;break}}n=e?a[e]:a[o];this.setProperty("timeLineOption",n,true)}};r.prototype.onSetTimeZoomRate=function(t){var e=this.calVisibleHorizonByRate(t);this.setVisibleHorizon(e)};r.prototype.getCurrentVisibleHorizon=function(){var t=this.getTotalHorizon(),e=this.getZoomLevel();if(!t||e===undefined){return undefined}var i=this._completeTimeHorizon(this.calVisibleHorizonByRate(this._aZoomRate[e]));return i};r.prototype.getRenderedVisibleHorizon=function(){var t=this.getTotalHorizon(),e=this.getZoomLevel(),i=this.getParent();if(!i||!t||e===undefined){return undefined}var o=i.getRenderedTimeRange();var a=new n({startTime:o[0],endTime:o[1]});return a};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/axistime/StepwiseZoomStrategy", ["sap/gantt/library","sap/base/util/ObjectPath","./AxisTimeStrategyBase","../misc/Format"],function(t,e,i,n){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");var a=t.config.TimeUnit;sap.gantt.axistime.StepwiseTimeLineOptions={FiveMinutes:{text:o.getText("SWZS_FIVE_MINUTES"),innerInterval:{unit:a.minute,span:5,range:32},largeInterval:{unit:a.hour,span:1,pattern:"ha / MMMM dd, yyyy "},smallInterval:{unit:a.minute,span:5,pattern:"mm "}},FifteenMinutes:{text:o.getText("SWZS_FIFTEEN_MINUTES"),innerInterval:{unit:a.minute,span:15,range:48},largeInterval:{unit:a.hour,span:1,pattern:"ha / MMMM dd, yyyy "},smallInterval:{unit:a.minute,span:15,pattern:"mm "}},Hour:{text:o.getText("SWZS_HOUR"),innerInterval:{unit:a.hour,span:1,range:48},largeInterval:{unit:a.day,span:1,pattern:t.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:a.hour,span:1,pattern:t.config.DEFAULT_TIME_PATTERN}},SixHours:{text:o.getText("SWZS_SIX_HOURS"),innerInterval:{unit:a.hour,span:6,range:64},largeInterval:{unit:a.day,span:1,pattern:t.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:a.hour,span:6,pattern:t.config.DEFAULT_TIME_PATTERN}},DayDate:{text:o.getText("SWZS_DATE_1"),innerInterval:{unit:a.day,span:1,range:64},largeInterval:{unit:a.week,span:1,pattern:o.getText("SWZS_DATE_PATTERN",["LLL yyyy, '","' ww  "])},smallInterval:{unit:a.day,span:1,pattern:sap.ui.getCore().getConfiguration().getRTL()?"dd EEE ":"EEE dd "}},Date:{text:o.getText("SWZS_DATE_2"),innerInterval:{unit:a.day,span:1,range:32},largeInterval:{unit:a.week,span:1,pattern:o.getText("SWZS_DATE_PATTERN",["LLL yyyy, '","' ww  "])},smallInterval:{unit:a.day,span:1,pattern:"dd "}},CWWeek:{text:o.getText("SWZS_WEEK_1"),innerInterval:{unit:a.week,span:1,range:56},largeInterval:{unit:a.month,span:1,pattern:"LLL yyyy "},smallInterval:{unit:a.week,span:1,pattern:"'"+o.getText("SWZS_CW")+"' ww  "}},WeekOfYear:{text:o.getText("SWZS_WEEK_2"),innerInterval:{unit:a.week,span:1,range:32},largeInterval:{unit:a.month,span:1,pattern:"LLL yyyy "},smallInterval:{unit:a.week,span:1,pattern:"ww "}},Month:{text:o.getText("SWZS_MONTH"),innerInterval:{unit:a.day,span:30,range:48},largeInterval:{unit:a.month,span:3,pattern:"yyyy QQQ "},smallInterval:{unit:a.month,span:1,pattern:"LLL "}},Quarter:{text:o.getText("SWZS_QUARTER"),innerInterval:{unit:a.day,span:90,range:48},largeInterval:{unit:a.year,span:1,pattern:"yyyy "},smallInterval:{unit:a.month,span:3,pattern:"QQQ "}},Year:{text:o.getText("SWZS_YEAR"),innerInterval:{unit:a.day,span:360,range:48},largeInterval:{unit:a.year,span:5,pattern:"yyyy "},smallInterval:{unit:a.year,span:1,pattern:"yyyy "}}};var r=sap.gantt.axistime.StepwiseTimeLineOptions;var s=i.extend("sap.gantt.axistime.StepwiseZoomStrategy",{metadata:{library:"sap.gantt"}});s.prototype.init=function(){this._oTotalHorizonBeforeExtension=null;this._sZoomControlType=sap.gantt.config.ZoomControlType.Select;this._aTimeLineOptions=null;this._calculatedTotalHorizon=null;this.bAxisTimeChanged=false;this.iLastZoomLevel=-1;var t=r.DayDate;this.setProperty("timeLineOption",t,true);this.setProperty("timeLineOptions",r,true);this.setProperty("mouseWheelZoomType",sap.gantt.MouseWheelZoomType.Stepwise,true);this.setProperty("finestTimeLineOption",null,true);this.setProperty("coarsestTimeLineOption",null,true);this._aZoomRate=new Array(11)};s.prototype.applySettings=function(){i.prototype.applySettings.apply(this,arguments);this._updateZoomRateArray();this._updateTimeLineOptions();this.setInitialProperties();this.initialSettings=arguments[0];return this};s.prototype.setInitialProperties=function(){this.setProperty("zoomLevels",this._getCountOfTimeLineOptions(),true);if(this._getIndexOfTimeLineOption(this.getTimeLineOption())===-1){this.setTimeLineOption(this._aTimeLineOptions[Math.floor((this._getCountOfTimeLineOptions()-1)/2)])}};s.prototype.createAxisTime=function(t){i.prototype.createAxisTime.apply(this,arguments);this.setZoomLevel(this._getIndexOfTimeLineOption(this.getTimeLineOption(),this.getTimeLineOptions()));this._Locale=t;return this};s.prototype.setVisibleHorizon=function(t){this.setVisibleHorizonWithReason(t,"visibleHorizonUpdated");return this};s.prototype.setVisibleHorizonWithReason=function(t,e,n){var o=this.getVisibleHorizon();if(o){o=o.clone()}i.prototype._setVisibleHorizon.apply(this,arguments);this.fireRedrawRequest(false,e,o,n);return this};s.prototype.setTotalHorizon=function(t){var e=this.getTotalHorizon();if(e){this.oLastTotalHorizonStartTime=e.getStartTime();this.oLastTotalHorizonEndTime=e.getEndTime()}i.prototype._setTotalHorizon.apply(this,arguments);this._setCalculatedTotalHorizon(t);if(this.getAxisTime()){this.fireRedrawRequest(true,"totalHorizonUpdated")}return this};s.prototype._setCalculatedTotalHorizon=function(t){if(t){if(this._calculatedTotalHorizon){this._calculatedTotalHorizon.setStartTime(t.getStartTime(),true);this._calculatedTotalHorizon.setEndTime(t.getEndTime(),true)}else{this._calculatedTotalHorizon=new sap.gantt.config.TimeHorizon({startTime:t.getStartTime(),endTime:t.getEndTime()})}this._updateTimeRangeAndViewRange(t)}return this};s.prototype._updateTimeRangeAndViewRange=function(t){var i=this.getAxisTime();if(i&&t){i.setTimeRange([n.getTimeStampFormatter().parse(t.getStartTime()),n.getTimeStampFormatter().parse(t.getEndTime())]);var o=n.getTimeStampFormatter().parse(t.getStartTime());var a=n.getTimeStampFormatter().parse(t.getEndTime());var r=a.valueOf()-o.valueOf();var s=this.getTimeLineOption();var p=e.get(s.innerInterval.unit).offset(o,s.innerInterval.span).valueOf()-o.valueOf();i.setViewRange([0,Math.ceil(r*s.innerInterval.range/p/this._aZoomRate[this.getZoomLevel()])])}return this};s.prototype._getCalculatedTotalHorizon=function(){if(!this._calculatedTotalHorizon||!this._calculatedTotalHorizon.getStartTime()||!this._calculatedTotalHorizon.getEndTime()){this._setCalculatedTotalHorizon(this.getAggregation("totalHorizon"))}return this._calculatedTotalHorizon};s.prototype.getTotalHorizon=function(){return this._getCalculatedTotalHorizon()};s.prototype.setZoomLevels=function(t){return this};s.prototype.setZoomLevel=function(t){if(t>=0){this.iLastZoomLevel=this.getZoomLevel();this.setProperty("zoomLevel",t,true);this.setProperty("timeLineOption",this._getTimeLineOptionByIndex(t),true);if(this._aZoomRate[t]&&this.getGanttVisibleWidth()){var e=this._updateVisibleHorizon(this.getGanttVisibleWidth());this.setVisibleHorizon(e)}}return this};s.prototype.setTimeLineOption=function(t){this.setProperty("timeLineOption",t,true);this.setZoomLevel(this._getIndexOfTimeLineOption(t))};s.prototype.setCoarsestTimeLineOption=function(t){return this};s.prototype.setFinestTimeLineOption=function(t){return this};s.prototype.setTimeLineOptions=function(t){i.prototype.setTimeLineOptions.apply(this,arguments);this._updateZoomRateArray();this._updateTimeLineOptions();return this};s.prototype._updateVisibleHorizon=function(t){if(!t){var e=this._getWidthOfTotalHorizon();this._extendTotalHorizon(e)}else{this._extendTotalHorizon(t)}var o=this.getAxisTime();if(o){o.setZoomRate(this._aZoomRate[this.getZoomLevel()]);var a=this.getVisibleHorizon();var r=this.calMiddleDate(n.getTimeStampFormatter().parse(a.getStartTime()),n.getTimeStampFormatter().parse(a.getEndTime()));var s=this.calVisibleHorizonByRate(this._aZoomRate[this.getZoomLevel()],r);i.prototype._setVisibleHorizon.call(this,s);return s}};s.prototype.updateInitialVisibleHorizon=function(t,e){this.setProperty("timeLineOption",this._getTimeLineOptionByIndex(e),true);var o=this.calMiddleDate(n.getTimeStampFormatter().parse(t.getStartTime()),n.getTimeStampFormatter().parse(t.getEndTime()));var a=this.calVisibleHorizonByRate(this._aZoomRate[this.getZoomLevel()],o);i.prototype._setVisibleHorizon.call(this,a)};s.prototype.updateGanttVisibleWidth=function(t){return this};s.prototype.isTimePeriodZoomEnabled=function(){return false};s.prototype.syncContext=function(t){var e=this.getTotalHorizon();var o={zoomLevel:undefined,axisTimeChanged:false};if(this.bBirdEyeTriggered){this.bBirdEyeTriggered=false;var a=this.getAxisTime();if(a){var r=this.getVisibleHorizon();var s=this.calZoomScaleByDate(n.abapTimestampToDate(r.getStartTime()),n.getTimeStampFormatter().parse(r.getEndTime()),t);var p=this._oZoom.base.scale/s;var l=0;while(p>=this._aZoomRate[l]){l++}if(l!==0){l=l-1}i.prototype.updateGanttVisibleWidth.apply(this,arguments);if(this.iLastZoomLevel!==l){a.setZoomRate(this._aZoomRate[l]);this.setProperty("zoomLevel",l,true);this.setProperty("timeLineOption",this._getTimeLineOptionByIndex(l),true);this._updateVisibleHorizon(this.getGanttVisibleWidth());this.iLastZoomLevel=this.getZoomLevel();o.axisTimeChanged=true}}}else if(t!==this.getGanttVisibleWidth()){this._updateVisibleHorizon(t);o.axisTimeChanged=true;i.prototype.updateGanttVisibleWidth.apply(this,arguments)}else if(this.iLastZoomLevel===this.getZoomLevel()&&(!this.oLastTotalHorizonStartTime||this.oLastTotalHorizonStartTime===e.getStartTime()&&this.oLastTotalHorizonEndTime===e.getEndTime())){o.axisTimeChanged=false}else{o.axisTimeChanged=true;this.iLastZoomLevel=this.getZoomLevel();this.oLastTotalHorizonStartTime=e.getStartTime();this.oLastTotalHorizonEndTime=e.getEndTime()}o.zoomLevel=this.getZoomLevel();return o};s.prototype._updateZoomRateArray=function(){if(this._oZoom){var t=this.getTimeLineOptions();this._aZoomRate=[];if(t){var e;if(this._sZoomControlType!==sap.gantt.config.ZoomControlType.Select){e=this._getCountOfTimeLineOptions();for(var i in t){e--;this._aZoomRate[e]=this._oZoom.base.scale/this.calZoomScale(t[i].innerInterval.unit,t[i].innerInterval.span,t[i].innerInterval.range)}}else{e=0;for(var n in t){this._aZoomRate[e]=this._oZoom.base.scale/this.calZoomScale(t[n].innerInterval.unit,t[n].innerInterval.span,t[n].innerInterval.range);e++}}}else{this._aZoomRate[0]=1}}};s.prototype._updateTimeLineOptions=function(){var t=this.getTimeLineOptions();this._aTimeLineOptions=[];if(t){for(var e in t){this._aTimeLineOptions.push(t[e])}if(this._sZoomControlType!==sap.gantt.config.ZoomControlType.Select){this._aTimeLineOptions=this._aTimeLineOptions.reverse()}}};s.prototype.updateStopInfo=function(t){this.setZoomLevel(t.index);return this};s.prototype._getIndexOfTimeLineOption=function(t,e){var i=e;if(!i){i=this.getTimeLineOptions()}if(!this._aTimeLineOptions){this._updateTimeLineOptions()}for(var n=0,o=this._aTimeLineOptions.length;n<o;n++){if(this._aTimeLineOptions[n]==t){return n}}return-1};s.prototype._getTimeLineOptionByIndex=function(t){if(!this._aTimeLineOptions){this._updateTimeLineOptions()}if(t<this._aTimeLineOptions.length){return this._aTimeLineOptions[t]}else{return null}};s.prototype._getWidthOfTotalHorizon=function(){var t=this._getCalculatedTotalHorizon();var e=n.getTimeStampFormatter().parse(t.getStartTime());var i=n.getTimeStampFormatter().parse(t.getEndTime());var o=this.getAxisTime();var a=o.timeToView(e);var r=o.timeToView(i);return Math.abs(r-a)};s.prototype._extendTotalHorizon=function(t){var e=this._getCalculatedTotalHorizon();var i=0;if(this._oZoom&&this._oZoom.base&&this._oZoom.base.scale!==undefined){var o=n.abapTimestampToDate(e.getStartTime());var a=n.abapTimestampToDate(e.getEndTime());var r=a.getTime()-o.getTime();var s=this._aZoomRate[this.getZoomLevel()];var p=this._oZoom.base.scale/s;var l=t*p;i=l-r;e=this._calTotalHorizon(i,l);this._setCalculatedTotalHorizon(e)}};s.prototype._calTotalHorizon=function(t,e){var i=this._getCalculatedTotalHorizon();if(t!==0){var o=n.abapTimestampToDate(this.getAggregation("totalHorizon").getStartTime()).getTime();var a=n.abapTimestampToDate(this.getAggregation("totalHorizon").getEndTime()).getTime();var r=(o+a)/2;var s,p;if(t>0){s=r-e/2;p=r+e/2}else{s=n.abapTimestampToDate(i.getStartTime()).getTime()-t/2;p=n.abapTimestampToDate(i.getEndTime()).getTime()+t/2;if(s>o){s=o}if(p<a){p=a}}var l=new Date;l.setTime(s);var m=new Date;m.setTime(p);return new sap.gantt.config.TimeHorizon({startTime:l,endTime:m})}return i};s.prototype._updateZoomControlType=function(t){if(t){i.prototype._updateZoomControlType.apply(this,arguments);this._sZoomControlType=t;this._updateZoomRateArray();this._updateTimeLineOptions();if(this.initialSettings.zoomLevel!=null&&this.initialSettings.zoomLevel!=0){this.setZoomLevel(this.initialSettings.zoomLevel)}else{this.setZoomLevel(this._getIndexOfTimeLineOption(this.getTimeLineOption(),this.getTimeLineOptions()))}}};s.prototype._getCountOfTimeLineOptions=function(){return Object.keys(this.getTimeLineOptions()).length};return s},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/changeHandlers/simple/AdhocLine", ["sap/gantt/utils/GanttCustomisationUtils"],function(t){"use strict";var n={getDialogBox:function(n){return t.dialogBox(n,false)}};n.fnConfigureALSettings=function(t){return n.getDialogBox(t).then(function(n){return[{selectorControl:t,changeSpecificData:{changeType:"ganttAdhocLineSettings",content:n}}]})};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/changeHandlers/simple/DeltaLine", ["sap/gantt/utils/GanttCustomisationUtils"],function(t){"use strict";var n={getDialogBox:function(n){return t.dialogBox(n,true)}};n.fnConfigureALSettings=function(t){return n.getDialogBox(t).then(function(n){return[{selectorControl:t,changeSpecificData:{changeType:"ganttDeltaLineSettings",content:n}}]})};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/changeHandlers/simple/GanttChartContainer", ["sap/m/Button","sap/m/Dialog","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/m/RadioButtonGroup","sap/m/RadioButton"],function(e,t,n,l,s,T,a){"use strict";var o=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");var i={getDialogBox:function(i){return new Promise(function(r,g){var _=new n({editable:true,useHorizontalLayout:false,groups:[new l({groupElements:[new s({label:o.getText("TXT_CH_GC_DISPLAY_TYPE"),elements:[new T({columns:3,selectedIndex:this.setSelectedIndex(i,"displayType"),buttons:[new a({text:"Both"}),new a({text:"Chart"}),new a({text:"Table"})]})]}),new s({label:o.getText("TXT_CH_GC_VERTICAL_LINE"),elements:[new T({columns:2,selectedIndex:this.setSelectedIndex(i,"enableVerticalLine"),buttons:[new a({text:o.getText("TXT_CH_GC_TRUE")}),new a({text:o.getText("TXT_CH_GC_FALSE")})]})]}),new s({label:o.getText("TXT_CH_GC_CURSOR_LINE"),elements:[new T({columns:2,selectedIndex:this.setSelectedIndex(i,"enableCursorLine"),buttons:[new a({text:o.getText("TXT_CH_GC_TRUE")}),new a({text:o.getText("TXT_CH_GC_FALSE")})]})]}),new s({label:o.getText("TXT_CH_GC_ADHOC_LINE"),elements:[new T({columns:2,selectedIndex:this.setSelectedIndex(i,"enableAdhocLine"),buttons:[new a({text:o.getText("TXT_CH_GC_TRUE")}),new a({text:o.getText("TXT_CH_GC_FALSE")})]})]}),new s({label:o.getText("TXT_CH_GC_DELTA_LINE"),elements:[new T({columns:2,selectedIndex:this.setSelectedIndex(i,"enableDeltaLine"),buttons:[new a({text:o.getText("TXT_CH_GC_TRUE")}),new a({text:o.getText("TXT_CH_GC_FALSE")})]})]}),new s({label:o.getText("TXT_CH_GC_NOW_LINE"),elements:[new T({columns:2,selectedIndex:this.setSelectedIndex(i,"enableNowLine"),buttons:[new a({text:o.getText("TXT_CH_GC_TRUE")}),new a({text:o.getText("TXT_CH_GC_FALSE")})]})]})]})]});var u=new e({text:o.getText("SAVE_BUTTON"),type:"Emphasized"}),x=new e({text:o.getText("CANCEL_BUTTON")});this.dialogBox=new t({title:o.getText("TXT_CH_GC_DIALOG_TITLE"),buttons:[u,x],content:[_]});x.attachPress(function(e){this.dialogBox.close()}.bind(this));u.attachPress(function(e){var t=this.dialogBox.getContent()[0].getGroups()[0].getGroupElements(),n={newChange:{displayType:t[0].getElements()[0].getSelectedButton().getText(),enableVerticalLine:t[1].getElements()[0].getSelectedButton().getText()===o.getText("TXT_CH_GC_TRUE")?true:false,enableCursorLine:t[2].getElements()[0].getSelectedButton().getText()===o.getText("TXT_CH_GC_TRUE")?true:false,enableAdhocLine:t[3].getElements()[0].getSelectedButton().getText()===o.getText("TXT_CH_GC_TRUE")?true:false,enableDeltaLine:t[4].getElements()[0].getSelectedButton().getText()===o.getText("TXT_CH_GC_TRUE")?true:false,enableNowLine:t[5].getElements()[0].getSelectedButton().getText()===o.getText("TXT_CH_GC_TRUE")?true:false},oldChange:{displayType:i.getDisplayType(),enableVerticalLine:i.getEnableVerticalLine(),enableCursorLine:i.getEnableCursorLine(),enableAdhocLine:i.getEnableAdhocLine(),enableDeltaLine:i.getEnableDeltaLine(),enableNowLine:i.getEnableNowLine()}};this.dialogBox.close();r(n)}.bind(this));this.dialogBox.open()}.bind(this))}};i.setSelectedIndex=function(e,t){var n=e.getProperty(t);if(t!=="displayType"){if(n===true){return 0}else{return 1}}else if(n==="Both"){return 0}else if(n==="Chart"){return 1}else{return 2}};i.fnConfigureContainerSettings=function(e){return i.getDialogBox(e).then(function(t){return[{selectorControl:e,changeSpecificData:{changeType:"ganttChartContainerSettings",content:t}}]})};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/changeHandlers/simple/GanttChartWithTable", ["sap/m/Button","sap/m/Dialog","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/m/RadioButtonGroup","sap/m/RadioButton","sap/m/Slider"],function(e,t,n,o,i,a,r,s){"use strict";var g=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");var u={getDialogBox:function(u){return new Promise(function(l,T){var c=new n({editable:true,useHorizontalLayout:false,groups:[new o({groupElements:[new i({label:g.getText("TXT_CH_GCT_ORIENATION"),elements:[new a({columns:3,selectedIndex:this.setSelectedIndex(u,"dragOrientation"),buttons:[new r({text:g.getText("TXT_CH_GCT_FREE")}),new r({text:g.getText("TXT_CH_GCT_HORIZONTAL")}),new r({text:g.getText("TXT_CH_GCT_VERTICAL")})]})]}),new i({label:g.getText("TXT_CH_GCT_HEIGHT"),elements:[new s({value:parseInt(u.getHeight().split("%")[0],10)})]})]})]});var p=new e({text:g.getText("SAVE_BUTTON"),type:"Emphasized"}),d=new e({text:g.getText("CANCEL_BUTTON")});this.dialogBox=new t({title:g.getText("TXT_CH_GCT_DIALOG_TITLE"),buttons:[p,d],content:[c]});d.attachPress(function(e){this.dialogBox.close()}.bind(this));p.attachPress(function(e){var t=this.dialogBox.getContent()[0].getGroups()[0].getGroupElements(),n={newChange:{dragOrientation:t[0].getElements()[0].getSelectedButton().getText(),height:t[1].getElements()[0].getValue()+"%"},oldChange:{dragOrientation:u.getDragOrientation(),height:u.getHeight()}};this.dialogBox.close();l(n)}.bind(this));this.dialogBox.open()}.bind(this))}};u.setSelectedIndex=function(e,t){var n=e.getProperty(t);if(t==="dragOrientation"){if(n==="Free"){return 0}else if(n==="Horizontal"){return 1}else{return 2}}};u.fnConfigureContainerSettings=function(e){return u.getDialogBox(e).then(function(t){return[{selectorControl:e,changeSpecificData:{changeType:"ganttChartWithTableSettings",content:t}}]})};return u},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/BirdEyeGroup", ["./ToolbarGroup"],function(e){"use strict";var t=e.extend("sap.gantt.config.BirdEyeGroup",{metadata:{library:"sap.gantt",properties:{birdEyeRange:{type:"string",defaultValue:null}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ChartScheme", ["sap/ui/core/Element"],function(e){"use strict";var a=e.extend("sap.gantt.config.ChartScheme",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},name:{type:"string",defaultValue:null},rowSpan:{type:"int",defaultValue:1},icon:{type:"sap.ui.core.URI",defaultValue:null},modeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_MODE_KEY},haveBackground:{type:"boolean",defaultValue:false},backgroundClass:{type:"string"},shapeKeys:{type:"string[]",defaultValue:[]},rowIndexName:{type:"string",defaultValue:"rowIndex"}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ColumnAttribute", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.config.ColumnAttribute",{metadata:{library:"sap.gantt",properties:{objectTypeKey:{type:"string",defaultValue:null},attribute:{type:"string",defaultValue:null}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ContainerLayout", ["sap/ui/core/Element","sap/ui/core/library"],function(e,t){"use strict";var a=t.Orientation;var i=e.extend("sap.gantt.config.ContainerLayout",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:sap.gantt.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY},text:{type:"string",defaultValue:sap.ui.getCore().getLibraryResourceBundle("sap.gantt").getText("XLST_SINGLE_LAYOUT")},orientation:{type:"sap.ui.core.Orientation",defaultValue:a.Vertical},activeModeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_MODE_KEY},toolbarSchemeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY},selectionPanelSize:{type:"sap.ui.core.CSSSize",defaultValue:"30%"},ganttChartLayouts:{type:"object[]",defaultValue:[]}}}});return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ExpandChart", ["sap/ui/core/Element"],function(e){"use strict";var a=e.extend("sap.gantt.config.ExpandChart",{metadata:{library:"sap.gantt",properties:{icon:{type:"sap.ui.core.URI",defaultValue:null},isExpand:{type:"boolean",defaultValue:null},chartSchemeKeys:{type:"string[]",defaultValue:[]}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ExpandChartGroup", ["./ToolbarGroup"],function(e){"use strict";var t=e.extend("sap.gantt.config.ExpandChartGroup",{metadata:{library:"sap.gantt",properties:{expandCharts:{type:"object[]",defaultValue:[]},enableRichType:{type:"boolean"},showArrowText:{type:"boolean"}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/GanttChartLayout", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.config.GanttChartLayout",{metadata:{library:"sap.gantt",properties:{ganttChartSize:{type:"sap.ui.core.CSSSize",defaultValue:null},activeModeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_MODE_KEY},hierarchyKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_HIERARCHY_KEY}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/Hierarchy", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.config.Hierarchy",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:sap.gantt.config.DEFAULT_HIERARCHY_KEY},text:{type:"string",defaultValue:"Default Hierarchy"},activeModeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_MODE_KEY},toolbarSchemeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY},columns:{type:"object[]"},expandedLevels:{type:"string[][]"}}}});e.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setText(this._oRb.getText("XLST_DEFAULT_HIE"))};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/HierarchyColumn", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.config.HierarchyColumn",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},title:{type:"string",defaultValue:null},contentType:{type:"string",defaultValue:null},sortAttribute:{type:"string",defaultValue:null},filterAttribute:{type:"string",defaultValue:null},attribute:{type:"string",defaultValue:null},attributes:{type:"object[]",defaultValue:[]},width:{type:"sap.ui.core.CSSSize"}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/LayoutGroup", ["./ToolbarGroup"],function(e){"use strict";var t=e.extend("sap.gantt.config.LayoutGroup",{metadata:{library:"sap.gantt",properties:{enableRichStyle:{type:"boolean",defaultValue:true}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/Locale", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.config.Locale",{metadata:{library:"sap.gantt",properties:{timeZone:{type:"string",defaultValue:"UTC"},utcdiff:{type:"string",defaultValue:"000000"},utcsign:{type:"string",defaultValue:"+"},dstHorizons:{type:"object[]",defaultValue:[]}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/Mode", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.gantt.config.Mode",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},text:{type:"string",defaultValue:null},icon:{type:"sap.ui.core.URI",defaultValue:null},activeIcon:{type:"sap.ui.core.URI"}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ModeGroup", ["./ToolbarGroup"],function(e){"use strict";var t=e.extend("sap.gantt.config.ModeGroup",{metadata:{library:"sap.gantt",properties:{modeKeys:{type:"string[]",defaultValue:[]}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ObjectType", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.gantt.config.ObjectType",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},description:{type:"string",defaultValue:null},mainChartSchemeKey:{type:"string",defaultValue:sap.gantt.config.DEFAULT_MAIN_CHART_SCHEME_KEY},expandedChartSchemeKeys:{type:"string[]",defaultValue:[]}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/SettingGroup", ["./ToolbarGroup","./SettingItem"],function(t,e){"use strict";var a=t.extend("sap.gantt.config.SettingGroup",{metadata:{library:"sap.gantt",properties:{items:{type:"object[]",defaultValue:sap.gantt.config.DEFAULT_TOOLBAR_SETTING_ITEMS}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/SettingItem", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.gantt.config.SettingItem",{metadata:{library:"sap.gantt",properties:{checked:{type:"boolean",defaultValue:false},key:{type:"string",defaultValue:null},displayText:{type:"string",defaultValue:null},_isStandard:{type:"boolean",defaultValue:false}}}});t.prototype.setChecked=function(e){this.setProperty("checked",e,true);if(this.oParent!==null){this.oParent._oSettingsBox.getItems().forEach(function(t){if(t.getName()===this.getKey()){t.setSelected(e,true)}}.bind(this))}return this};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/Shape", ["sap/gantt/library","sap/ui/core/Element"],function(e,t){"use strict";var a=t.extend("sap.gantt.config.Shape",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},shapeClassName:{type:"string",defaultValue:null},shapeDataName:{type:"string",defaultValue:null},modeKeys:{type:"string[]",defaultValue:[]},level:{type:"string",defaultValue:null},shapeProperties:{type:"object",defaultValue:e.config.DEFAULT_EMPTY_OBJECT},groupAggregation:{type:"object[]"},clippathAggregation:{type:"object[]"},selectedClassName:{type:"string",defaultValue:null},switchOfCheckBox:{type:"string",defaultValue:"noShow"},resizeShadowClassName:{type:"string",defaultValue:null},countInBirdEye:{type:"boolean",defaultValue:false}}}});a.prototype.hasShapeProperty=function(e){return this.getShapeProperties().hasOwnProperty(e)};a.prototype.getShapeProperty=function(e){return this.getShapeProperties()[e]};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/TimeAxis", ["sap/ui/core/Element"],function(t){"use strict";var a=t.extend("sap.gantt.config.TimeAxis",{metadata:{library:"sap.gantt",properties:{planHorizon:{type:"object",defaultValue:sap.gantt.config.DEFAULT_PLAN_HORIZON},initHorizon:{type:"object",defaultValue:sap.gantt.config.DEFAULT_INIT_HORIZON},zoomStrategy:{type:"object",defaultValue:sap.gantt.config.DEFAULT_TIME_ZOOM_STRATEGY},granularity:{type:"string",defaultValue:"4day"},finestGranularity:{type:"string",defaultValue:"5min"},coarsestGranularity:{type:"string",defaultValue:"1month"},rate:{type:"float",defaultValue:1}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/TimeHorizon", ["sap/ui/core/Element","sap/gantt/misc/Format"],function(t,e){"use strict";var i=t.extend("sap.gantt.config.TimeHorizon",{metadata:{library:"sap.gantt",properties:{startTime:{type:"string",group:"Misc",defaultValue:undefined},endTime:{type:"string",group:"Misc",defaultValue:undefined}}}});i.prototype.setStartTime=function(t,e){this._allowGanttInitialRender();return this.setProperty("startTime",this._convertTimestamp(t),e)};i.prototype.setEndTime=function(t,e){this._allowGanttInitialRender();return this.setProperty("endTime",this._convertTimestamp(t),e)};i.prototype.equals=function(t){return this.getStartTime()===t.getStartTime()&&this.getEndTime()===t.getEndTime()};i.prototype._allowGanttInitialRender=function(){var t=this.getParent();if(t&&typeof t.getParent==="function"){var e=t.getParent();if(e&&e.isA("sap.gantt.simple.GanttChartWithTable")){delete e._bPreventInitialRender}}};i.prototype._convertTimestamp=function(t){var i=t;if(i&&typeof i==="object"){i=e.dateToAbapTimestamp(i)}return i};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/TimeZoomGroup", ["./ToolbarGroup"],function(t){"use strict";var o=sap.gantt.config.ZoomControlType;var e=t.extend("sap.gantt.config.TimeZoomGroup",{metadata:{library:"sap.gantt",properties:{showZoomSlider:{type:"boolean",defaultValue:true},showZoomButtons:{type:"boolean",defaultValue:true},zoomControlType:{type:"sap.gantt.config.ZoomControlType",defaultValue:sap.gantt.config.ZoomControlType.SliderWithButtons},stepCountOfSlider:{type:"int",defaultValue:10},infoOfSelectItems:{type:"object[]"}}}});e.prototype.getZoomControlType=function(){var t=o.SliderWithButtons;var e=this.getProperty("zoomControlType");if(e==t){return this._getZoomControlTypeByDeprecatedProperties()}return e};e.prototype._getZoomControlTypeByDeprecatedProperties=function(){var t=this.getShowZoomSlider();var e=this.getShowZoomButtons();if(t&&e){return o.SliderWithButtons}if(t&&!e){return o.SliderOnly}if(!t&&e){return o.ButtonsOnly}if(!t&&!e){return o.None}return o.SliderWithButtons};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ToolbarGroup", ["sap/ui/core/Element","sap/m/library"],function(t,e){"use strict";var r=e.OverflowToolbarPriority,a=e.ButtonType;var o=t.extend("sap.gantt.config.ToolbarGroup",{metadata:{library:"sap.gantt",properties:{position:{type:"string",defaultValue:null},overflowPriority:{type:"sap.m.OverflowToolbarPriority",defaultValue:r.Low},buttonType:{type:"sap.m.ButtonType",group:"Appearance",defaultValue:a.Default}}}});return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/config/ToolbarScheme", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.gantt.config.ToolbarScheme",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},sourceSelect:{type:"object",defaultValue:null},birdEye:{type:"object",defaultValue:null},layout:{type:"object",defaultValue:null},customToolbarItems:{type:"object",defaultValue:null},expandChart:{type:"object",defaultValue:null},expandTree:{type:"object",defaultValue:null},timeZoom:{type:"object",defaultValue:null},legend:{type:"object",defaultValue:null},settings:{type:"object",defaultValue:null},mode:{type:"object",defaultValue:null},toolbarDesign:{type:"string",defaultValue:sap.m.ToolbarDesign.Auto}}}});t.prototype.setTimeZoom=function(e){var t=e;if(!(t instanceof sap.gantt.config.TimeZoomGroup)){t=new sap.gantt.config.TimeZoomGroup;t.setOverflowPriority(e.getOverflowPriority());t.setPosition(e.getPosition())}this.setProperty("timeZoom",t);return this};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/AssociateContainer", ["sap/ui/core/Control","sap/ui/core/Core","./AssociateContainerRenderer"],function(t,e){"use strict";var o=t.extend("sap.gantt.control.AssociateContainer",{metadata:{library:"sap.gantt",properties:{enableRootDiv:{type:"boolean",defaultValue:false}},associations:{content:{type:"sap.ui.core.Control",multiple:false}}}});o.prototype.setContent=function(t){this.setAssociation("content",t);if(t){var o=typeof t==="string"?e.byId(t):t;o._oAC=this}return this};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/AssociateContainerRenderer", [],function(){"use strict";var t={};t.render=function(t,e){if(e.getEnableRootDiv()){t.write("<div");t.writeControlData(e);t.addClass("sapGanttChartLayoutBG");t.writeClasses();t.addStyle("width","100%");t.addStyle("height","100%");t.addStyle("overflow","hidden");t.writeStyles();t.write(">")}t.renderControl(sap.ui.getCore().byId(e.getContent()));if(e.getEnableRootDiv()){t.write("</div>")}};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/Cell", ["sap/ui/core/Control","sap/m/Label","sap/ui/model/Context"],function(t,e,o){"use strict";var n=t.extend("sap.gantt.control.Cell",{metadata:{library:"sap.gantt",properties:{cellCallback:{type:"object"},columnConfig:{type:"object"}}}});n.prototype.setColumnConfig=function(t){this.setProperty("columnConfig",t);if(t){var e=t.getAttributes();if(e&&e.length>0){this._oMapAttributes={};e.forEach(function(t){this._oMapAttributes[t.getObjectTypeKey()]=t.getAttribute()}.bind(this))}}return this};n.prototype.createCellContent=function(t){var o=this.getCellCallback();if(o&&o.createCellContent){return o.createCellContent(t)}return new e};n.prototype.updateCellContent=function(t,e,o,n,i){var r=this.getCellCallback();if(r&&r.updateCellContent){r.updateCellContent(t,e,o,n,i)}else{t.setText(e.getProperty(o))}};n.prototype._updateTableCell=function(t,e,n,i){if(!e){return}if(!(e instanceof o)){e=e.context}if(!this._oAttributeControl){this._oAttributeControl=this.createCellContent(this.getColumnConfig())}this._oContext=e;var r=this.data("rowTypeName");r=r?r:"type";var l=e.getProperty(r);if(this._oMapAttributes){this.updateCellContent(this._oAttributeControl,e,this._oMapAttributes[l],l,this.getColumnConfig())}else{this.updateCellContent(this._oAttributeControl,e,this.getColumnConfig().getAttribute(),l,this.getColumnConfig())}if(this.bOutput){var s=sap.ui.getCore().createRenderManager(),a=this._oAttributeControl.getRenderer();a.render(s,this._oAttributeControl);if(n&&n.length>0){s.flush(this.getDomRef(),false,false)}s.destroy()}};n.prototype.getContentToRender=function(){return this._oAttributeControl};n.prototype.getAccessibilityInfo=function(){var t=this.getContentToRender();return t&&t.getAccessibilityInfo?t.getAccessibilityInfo():null};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/CellRenderer", [],function(){"use strict";var e={};e.render=function(e,r){var t=r.getContentToRender();e.write("<div");e.writeControlData(r);e.write(">");if(t){e.renderControl(t)}e.write("</div>")};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/Toolbar", ["sap/gantt/library","sap/ui/core/Control","sap/ui/core/Core","sap/ui/core/CustomData","sap/ui/base/ManagedObjectMetadata","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/ToolbarSpacer","sap/m/FlexBox","sap/m/library","sap/m/Button","sap/m/SegmentedButton","sap/m/Select","sap/m/MenuButton","sap/m/Menu","sap/m/MenuItem","sap/ui/core/Item","sap/m/ViewSettingsDialog","sap/m/ViewSettingsCustomTab","sap/m/CheckBox","sap/ui/core/library","sap/m/Slider","sap/m/Popover"],function(t,e,o,i,s,n,r,a,h,l,u,g,_,p,d,c,m,f,T,y,C,I,S){"use strict";var E=t.config,b=t.control;var L=C.Orientation;var v=l.FlexDirection;var B=l.PlacementType;var A=e.extend("sap.gantt.control.Toolbar",{metadata:{library:"sap.gantt",properties:{width:{type:"CSSSize",defaultValue:"100%"},height:{type:"CSSSize",defaultValue:"100%"},type:{type:"string",defaultValue:b.ToolbarType.Global},sourceId:{type:"string"},zoomLevel:{type:"int",defaultValue:0},enableTimeScrollSync:{type:"boolean",defaultValue:true},enableCursorLine:{type:"boolean",defaultValue:true},enableNowLine:{type:"boolean",defaultValue:true},enableVerticalLine:{type:"boolean",defaultValue:true},enableAdhocLine:{type:"boolean",defaultValue:true},enableDeltaLine:{type:"boolean",defaultValue:true},modes:{type:"object[]",defaultValue:[E.DEFAULT_MODE]},mode:{type:"string",defaultValue:E.DEFAULT_MODE_KEY},toolbarSchemes:{type:"object[]",defaultValue:[E.DEFAULT_CONTAINER_TOOLBAR_SCHEME,E.DEFAULT_GANTTCHART_TOOLBAR_SCHEME,E.EMPTY_TOOLBAR_SCHEME]},hierarchies:{type:"object[]",defaultValue:[E.DEFAULT_HIERARCHY]},containerLayouts:{type:"object[]",defaultValue:[E.DEFAULT_CONTAINER_SINGLE_LAYOUT,E.DEFAULT_CONTAINER_DUAL_LAYOUT]}},aggregations:{legend:{type:"sap.ui.core.Control",multiple:false,visibility:"public"},customToolbarItems:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"customToolbarItem"},_toolbar:{type:"sap.m.OverflowToolbar",multiple:false,visibility:"hidden"}},events:{sourceChange:{parameters:{id:{type:"string"}}},layoutChange:{parameters:{id:{type:"string"},value:{type:"string"}}},expandChartChange:{parameters:{action:{type:"string"},expandedChartSchemes:{type:"any[]"}}},expandTreeChange:{parameters:{action:{type:"string"}}},zoomStopChange:{parameters:{index:{type:"int"},selectedItem:{type:"sap.ui.core.Item"}}},settingsChange:{parameters:{id:{type:"string"},value:{type:"boolean"}}},modeChange:{parameters:{mode:{type:"string"}}},birdEye:{parameters:{birdEyeRange:{type:"string"}}}}}});A.ToolbarItemPosition={Left:"Left",Right:"Right"};A.prototype.init=function(){this._oToolbar=new n({width:"auto",design:sap.m.ToolbarDesign.Auto});this.setAggregation("_toolbar",this._oToolbar,true);this._bClearCustomItems=true;this._resetToolbarInfo();this._oModesConfigMap={};this._oModesConfigMap[E.DEFAULT_MODE_KEY]=E.DEFAULT_MODE;this._oToolbarSchemeConfigMap={};this._oToolbarSchemeConfigMap[E.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY]=E.DEFAULT_CONTAINER_TOOLBAR_SCHEME;this._oToolbarSchemeConfigMap[E.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY]=E.DEFAULT_GANTTCHART_TOOLBAR_SCHEME;this._oToolbarSchemeConfigMap[E.EMPTY_TOOLBAR_SCHEME_KEY]=E.EMPTY_TOOLBAR_SCHEME;this._oHierarchyConfigMap={};this._oHierarchyConfigMap[E.DEFAULT_HIERARCHY_KEY]=E.DEFAULT_HIERARCHY;this._oContainerLayoutConfigMap={};this._oContainerLayoutConfigMap[E.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY]=E.DEFAULT_CONTAINER_SINGLE_LAYOUT;this._oContainerLayoutConfigMap[E.DEFAULT_CONTAINER_DUAL_LAYOUT_KEY]=E.DEFAULT_CONTAINER_DUAL_LAYOUT;this._oZoomSlider=null;this._oSelect=null;this._iLiveChangeTimer=-1;this._aTimers=[];this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this._nCounterOfDefaultSliders=0;this._sZoomControlType=E.ZoomControlType.SliderWithButtons};A.prototype._resetToolbarInfo=function(){this._oItemConfiguration={Left:[],Right:[]};this._oAllItems={Left:[],Right:[]};if(this._bClearCustomItems){this._aCustomItems=[];this._iCustomItemInsertIndex=-1}};A.prototype.applySettings=function(t,o){if(this.getSourceId()&&this.getType()){this._resetAllCompositeControls()}var i=e.prototype.applySettings.apply(this,arguments);return i};A.prototype.onAfterRendering=function(){if(this._oVHButton&&jQuery("#"+this._oVHButton.getId())[0]){jQuery("#"+this._oVHButton.getId()).attr("aria-label",this._oRb.getText("TLTP_SWITCH_GANTTCHART"))}};A.prototype.setLegend=function(t){this.setAggregation("legend",t);if(!this._oLegendPop){this._oLegendPop=new S({placement:B.Bottom,showArrow:false,showHeader:false})}if(t){this._oLegendPop.removeAllContent();this._oLegendPop.addContent(t);this._oLegendPop.setOffsetX(this._calcOffsetForLegendPopover())}};A.prototype.updateZoomLevel=function(t){this._bSuppressZoomStopChange=true;this.setZoomLevel(t)};A.prototype.setZoomLevel=function(t,e){if(t>=0){var o=this.getZoomLevel();if(o!==t){this.setProperty("zoomLevel",t,e);if(this._oZoomSlider){this._oZoomSlider.setValue(t);this._oZoomSlider.setTooltip(this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+":"+t);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t})}}if(this._oSelect){this._oSelect.setSelectedItem(this._oSelect.getItems()[t]);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t,selectedItem:this._oSelect.getSelectedItem()})}}if(this._oToolbarScheme&&!isNaN(t)&&this._oZoomInButton&&this._oZoomOutButton&&this._oToolbarScheme.getTimeZoom()){var i=this._oToolbarScheme.getTimeZoom().getStepCountOfSlider()-1,s=0;if(t===i){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true)}else if(t===s){this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(false)}else{this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(true)}}}}this._bSuppressZoomStopChange=false;return this};A.prototype.setMode=function(t){this.setProperty("mode",t);if(this._oModeSegmentButton){this._oModeSegmentButton.setSelectedButton(this._oModeButtonMap[t])}return this};A.prototype.setHierarchies=function(t){this.setProperty("hierarchies",t,true);this._oHierarchyConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oHierarchyConfigMap[t[e].getKey()]=t[e]}}this._resetAllCompositeControls();return this};A.prototype.setContainerLayouts=function(t){this.setProperty("containerLayouts",t,true);this._oContainerLayoutConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oContainerLayoutConfigMap[t[e].getKey()]=t[e]}}this._resetAllCompositeControls();return this};A.prototype.setModes=function(t){this.setProperty("modes",t,true);this._oModesConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oModesConfigMap[t[e].getKey()]=t[e]}}return this};A.prototype.setToolbarDesign=function(t){this._oToolbar.setDesign(t);return this};A.prototype.setToolbarSchemes=function(t){this.setProperty("toolbarSchemes",t,true);this._oToolbarSchemeConfigMap={};if(t){for(var e=0;e<t.length;e++){this._oToolbarSchemeConfigMap[t[e].getKey()]=t[e]}}this._resetAllCompositeControls();return this};A.prototype.setSourceId=function(t){this.setProperty("sourceId",t,true);this._resetAllCompositeControls();return this};A.prototype.setType=function(t){this.setProperty("type",t,true);this._resetAllCompositeControls();return this};A.prototype.addCustomToolbarItem=function(t){if(this._iCustomItemInsertIndex==-1){this._oToolbar.insertContent(t,0);this._iCustomItemInsertIndex++}else{this._oToolbar.insertContent(t,this._iCustomItemInsertIndex+1);this._iCustomItemInsertIndex++}this._aCustomItems.push(t);this._resetAllCompositeControls();return this};A.prototype.insertCustomToolbarItem=function(t,e){var o=this._aCustomItems.length;if(e>=o){e=o}if(this._iCustomItemInsertIndex===-1){this._oToolbar.insertContent(t,0);this._aCustomItems.push(t)}else{this._oToolbar.insertContent(t,this._iCustomItemInsertIndex-this._aCustomItems.length+1+e);this._aCustomItems.splice(e,0,t)}this._iCustomItemInsertIndex++;return this};A.prototype.removeCustomToolbarItem=function(t){if(this._aCustomItems.length===0){return this._aCustomItems}if(typeof t==="number"){var e=this._aCustomItems.length;var o=t>e?e:t;this._oToolbar.removeContent(this._iCustomItemInsertIndex-e+o+1);this._iCustomItemInsertIndex--;return this._aCustomItems.splice(o,1)}else if(t){this._oToolbar.removeContent(t);this._iCustomItemInsertIndex--;return this._aCustomItems.splice(jQuery.inArray(t,this._aCustomItems),1)}};A.prototype.getCustomToolbarItems=function(){return this._aCustomItems.slice(0)};A.prototype.destroyCustomToolbarItems=function(){var t=this.removeAllCustomToolbarItems();t.forEach(function(t){t.destroy()});return t};A.prototype.removeAllCustomToolbarItems=function(){var t=[];for(var e=0;e<this._aCustomItems.length;e++){t.push(this._oToolbar.removeContent(this._aCustomItems[e]))}this._iCustomItemInsertIndex=this._iCustomItemInsertIndex-this._aCustomItems.length;this._aCustomItems.splice(0,this._aCustomItems.length);return t};A.prototype._resetAllCompositeControls=function(){this._determineToolbarSchemeConfig(this.getSourceId());this._destroyCompositeControls();if(!this._sToolbarSchemeKey){return}this._resolvePositions();var t,e,o=A.ToolbarItemPosition.Left,i=A.ToolbarItemPosition.Right;var s=this._oItemConfiguration[o];for(t=0;t<s.length;t++){if(s[t]){this._createCompositeControl(o,t,s[t])}}var n=this._oItemConfiguration[i];for(t=n.length-1;t>=0;t--){if(n[t]){this._createCompositeControl(i,t,n[t])}}var r=function(t){if(jQuery.isArray(t)){for(var e=0;e<t.length;e++){this._oToolbar.addContent(t[e])}}else if(t){this._oToolbar.addContent(t)}};for(t=0;t<this._oAllItems[o].length;t++){e=this._oAllItems[o][t];r.call(this,e)}if(this._oAllItems[o].length!==0||this._oAllItems[i].length!==0){this._oToolbar.addContent(new a)}for(t=0;t<this._oAllItems[i].length;t++){e=this._oAllItems[i][t];r.call(this,e)}};A.prototype.getAllToolbarItems=function(){return this._oToolbar.getContent()};A.prototype._determineToolbarSchemeConfig=function(t){this._sToolbarSchemeKey=null;if(this.getType()===b.ToolbarType.Global&&this._oContainerLayoutConfigMap[t]){this._sToolbarSchemeKey=this._oContainerLayoutConfigMap[t].getToolbarSchemeKey();this._sInitMode=this.getMode()!=E.DEFAULT_MODE_KEY?this.getMode():this._oContainerLayoutConfigMap[t].getActiveModeKey()}else if(this.getType()===b.ToolbarType.Local&&this._oHierarchyConfigMap[t]){this._sToolbarSchemeKey=this._oHierarchyConfigMap[t].getToolbarSchemeKey();this._sInitMode=this.getMode()!=E.DEFAULT_MODE_KEY?this.getMode():this._oHierarchyConfigMap[t].getActiveModeKey()}if(this._oToolbarScheme==this._oToolbarSchemeConfigMap[this._sToolbarSchemeKey]){this._bClearCustomItems=false}else{this._oToolbarScheme=this._oToolbarSchemeConfigMap[this._sToolbarSchemeKey];this._bClearCustomItems=true}if(this._oToolbarScheme&&this._oToolbarScheme.getProperty("toolbarDesign")){this.setToolbarDesign(this._oToolbarScheme.getProperty("toolbarDesign"))}};A.prototype._destroyCompositeControls=function(){this._oToolbar.getContent().forEach(function(t){if(this._aCustomItems.indexOf(t)<0){t.destroy()}},this);this._oToolbar.removeAllContent();this._resetToolbarInfo()};A.prototype._resolvePositions=function(){if(this._oToolbarScheme){jQuery.each(this._oToolbarScheme.getMetadata().getAllProperties(),function(t){if(t!=="key"&&t!=="toolbarDesign"){var e=this._oToolbarScheme.getProperty(t);if(e){var o=this._parsePosition(e.getPosition());this._oItemConfiguration[o.position][o.idx]=jQuery.extend({},{groupId:t},e)}}}.bind(this));var t=this._oItemConfiguration;var e=Object.keys(t);e.forEach(function(e){var o=t[e],i=[];var s=Object.keys(o).sort();s.forEach(function(t,e){i.push(o[t])});t[e]=i})}};A.prototype._parsePosition=function(t){return{position:t.toUpperCase().substr(0,1)==="L"?A.ToolbarItemPosition.Left:A.ToolbarItemPosition.Right,idx:parseInt(t.substr(1,t.length-1),10)}};A.prototype._createCompositeControl=function(t,e,o){var i;switch(o.groupId){case"sourceSelect":i=this._genSourceSelectGroup(o);break;case"birdEye":i=this._genBirdEyeGroup(o);break;case"layout":i=this._genLayoutGroup(o);break;case"expandChart":i=this._genExpandChartGroup(o);break;case"expandTree":i=this._genExpandTreeGroup(o);break;case"customToolbarItems":i=this._genCustomToolbarItemGroup(t,o);break;case"mode":i=this._genModeButtonGroup(o);break;case"timeZoom":i=this._genTimeZoomGroupControls(o);break;case"legend":i=this._genLegend(o);break;case"settings":i=this._genSettings(o);break;default:break}if(i){this._oAllItems[t]=this._oAllItems[t].concat(i)}};A.prototype._genBirdEyeGroup=function(t){var e=this;var o=new r({priority:t.getOverflowPriority()});var i=this._oRb.getText("TXT_BRIDEYE");var s=this._oRb.getText("TXT_BRIDEYE_RANGE_VISIBLE_ROWS");var n=this._oRb.getText("TXT_BRIDEYE_RANGE_ALL_ROWS");var a=this._oRb.getText("TLTP_BRIDEYE_ON_VISIBLE_ROWS");var h=this._oRb.getText("TLTP_BRIDEYE_ON_ALL_ROWS");this._oBirdEyeButton=null;if(t.getBirdEyeRange()===E.BirdEyeRange.AllRows){this._oBirdEyeButton=new u({id:this._getConfigButtonId(t),icon:"sap-icon://show",tooltip:i+"("+n+"): "+h,layoutData:o,press:function(o){e.fireBirdEye({action:"birdEye",birdEyeRange:t.getBirdEyeRange()})}})}else if(t.getBirdEyeRange()===E.BirdEyeRange.VisibleRows){this._oBirdEyeButton=new u({id:this._getConfigButtonId(t),icon:"sap-icon://show",tooltip:i+"("+s+"): "+a,layoutData:o,press:function(o){e.fireBirdEye({action:"birdEye",birdEyeRange:t.getBirdEyeRange()})}})}else{this._oBirdEyeButton=new p({width:"8rem",text:s,tooltip:i+": "+a,icon:"sap-icon://show",buttonMode:sap.m.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:function(t){e.fireBirdEye({action:"birdEye",birdEyeRange:this._currentBirdEyeRange?this._currentBirdEyeRange:E.BirdEyeRange.VisibleRows})}});var l=new d({id:this._getConfigButtonId(t),itemSelected:function(t){var o=t.getParameter("item");var i=o.birdEyeRange;e._oBirdEyeButton.setTooltip(o.getTooltip());e._oBirdEyeButton.setText(o.getText());o.setIcon("sap-icon://show");if(!this.getParent()._currentBirdEyeRange||this.getParent()._currentBirdEyeRange!==i){this.getParent()._currentBirdEyeRange=i}e.fireBirdEye({action:"birdEye",birdEyeRange:i})}});var g=new c({text:s,tooltip:i+": "+a,press:function(t){this.setIcon()}});g.birdEyeRange=E.BirdEyeRange.VisibleRows;l.addItem(g);g=new c({text:n,tooltip:i+": "+h,press:function(t){this.setIcon()}});g.birdEyeRange=E.BirdEyeRange.AllRows;l.addItem(g);this._oBirdEyeButton.setMenu(l)}return this._oBirdEyeButton};A.prototype._genSourceSelectGroup=function(t){var e=this.getSourceId();var o=this;var i;this._oSourceSelectBox=new _({id:this._getConfigButtonId(t),layoutData:new r({priority:t.getOverflowPriority()}),width:"200px",change:function(t){var e=t.getParameter("selectedItem");var i=e.oSourceConfig;o.fireSourceChange({id:e.getKey(),config:i})}});switch(this.getType()){case b.ToolbarType.Global:i=this.getContainerLayouts();this._oSourceSelectBox.setTooltip(this._oRb.getText("TLTP_GLOBAL_HIERARCHY_RESOURCES"));break;case b.ToolbarType.Local:i=this.getHierarchies();this._oSourceSelectBox.setTooltip(this._oRb.getText("TLTP_LOCAL_HIERARCHY_RESOURCES"));break;default:return null}var s;for(var n=0;n<i.length;n++){s=new m({key:i[n].getKey(),text:i[n].getText()});s.oSourceConfig=i[n];this._oSourceSelectBox.addItem(s);if(s.getKey()===e){this._oSourceSelectBox.setSelectedItem(s)}}return this._oSourceSelectBox};A.prototype._genLayoutGroup=function(t){if(this.getType==="LOCAL"){return null}var e=this,o=this.getHierarchies(),i,s;this._oAddGanttChartSelect=new _({id:this._getConfigButtonId(t,"add"),icon:"sap-icon://add",type:sap.m.SelectType.IconOnly,autoAdjustWidth:true,maxWidth:"50px",tooltip:this._oRb.getText("TLTP_ADD_GANTTCHART"),forceSelection:false,layoutData:new r({priority:t.getOverflowPriority()}),change:function(t){if(t.getParameter("selectedItem")){var o=e.data("holder");if(o.getGanttCharts().length<o.getMaxNumOfGanttCharts()){if(!e._oLessGanttChartSelect.getEnabled()){e._oLessGanttChartSelect.setEnabled(true);if(e._oVHButton){e._oVHButton.setEnabled(true)}}if(o.getGanttCharts().length==o.getMaxNumOfGanttCharts()-1){this.setEnabled(false)}t.getSource().setSelectedItemId("");e.fireLayoutChange({id:"add",value:{hierarchyKey:t.getParameter("selectedItem").getKey(),hierarchyConfig:t.getParameter("selectedItem").data("hierarchyConfig")}})}if(o.getGanttCharts().length>o.getMaxNumOfGanttCharts()){this.setEnabled(false)}}}});if(o&&o.length>0){for(s=0;s<o.length;s++){i=new m({text:o[s].getText(),key:o[s].getKey()});i.data("hierarchyConfig",o[s]);this._oAddGanttChartSelect.addItem(i)}}var n=this._oContainerLayoutConfigMap[this.getSourceId()].getGanttChartLayouts().length>1?true:false;this._oLessGanttChartSelect=new _({id:this._getConfigButtonId(t,"less"),icon:"sap-icon://less",type:sap.m.SelectType.IconOnly,tooltip:this._oRb.getText("TLTP_REMOVE_GANTTCHART"),maxWidth:"50px",autoAdjustWidth:true,forceSelection:false,enabled:n,layoutData:new r({priority:t.getOverflowPriority()}),change:function(t){if(t.getParameter("selectedItem")){var o=e.data("holder");if(o.getGanttCharts().length<=o.getMaxNumOfGanttCharts()){if(!e._oAddGanttChartSelect.getEnabled()){e._oAddGanttChartSelect.setEnabled(true)}}e.fireLayoutChange({id:"less",value:{hierarchyKey:t.getParameter("selectedItem").getKey(),hierarchyConfig:t.getParameter("selectedItem").data("hierarchyConfig"),ganttChartIndex:t.getParameter("selectedItem").data("ganttChartIndex")}});var i=t.getSource().getSelectedItem();if(i){i.setText("")}if(o.getGanttCharts().length==1){this.setEnabled(false);if(e._oVHButton){e._oVHButton.setEnabled(false)}}}}});this._oLessGanttChartSelect.addEventDelegate({onclick:this._fillLessGanttChartSelectItem},this);var a=this._oContainerLayoutConfigMap[this.getSourceId()].getOrientation()===L.Vertical?"sap-icon://resize-vertical":"sap-icon://resize-horizontal";var h=this._oContainerLayoutConfigMap[this.getSourceId()].getOrientation()===L.Vertical?this._oRb.getText("TLTP_ARRANGE_GANTTCHART_VERTICALLY"):this._oRb.getText("TLTP_ARRANGE_GANTTCHART_HORIZONTALLY");this._oVHButton=new u({id:this._getConfigButtonId(t),icon:a,tooltip:h,type:t.getButtonType(),layoutData:new r({priority:t.getOverflowPriority()}),press:function(t){switch(this.getIcon()){case"sap-icon://resize-vertical":this.setIcon("sap-icon://resize-horizontal");this.setTooltip(e._oRb.getText("TLTP_ARRANGE_GANTTCHART_HORIZONTALLY"));e.fireLayoutChange({id:"orientation",value:L.Horizontal});break;case"sap-icon://resize-horizontal":this.setIcon("sap-icon://resize-vertical");this.setTooltip(e._oRb.getText("TLTP_ARRANGE_GANTTCHART_VERTICALLY"));e.fireLayoutChange({id:"orientation",value:L.Vertical});break;default:break}}});this._oLayoutButton=[this._oAddGanttChartSelect,this._oLessGanttChartSelect,this._oVHButton];return this._oLayoutButton};A.prototype._fillLessGanttChartSelectItem=function(){var t=this.data("holder").getGanttCharts(),e;this._oLessGanttChartSelect.removeAllItems();if(t&&t.length>0){for(var o=0;o<t.length;o++){e=new m({text:this._oHierarchyConfigMap[t[o].getHierarchyKey()].getText(),key:t[o].getHierarchyKey()});e.data("hierarchyConfig",this._oHierarchyConfigMap[t[o].getHierarchyKey()]);e.data("ganttChartIndex",o);this._oLessGanttChartSelect.insertItem(e,o)}}};A.prototype._genExpandChartGroup=function(t){this._aChartExpandButtons=[];var e=function(t){this.fireExpandChartChange({isExpand:t.getSource().data("isExpand"),expandedChartSchemes:t.getSource().data("chartSchemeKeys")})};var o=t.getExpandCharts(),s;for(var n=0;n<o.length;n++){var a=o[n];s=new u({id:this._getConfigButtonId(a),icon:a.getIcon(),tooltip:a.getTooltip(),layoutData:new r({priority:t.getOverflowPriority()}),press:e.bind(this),type:t.getButtonType(),customData:[new i({key:"isExpand",value:a.getIsExpand()}),new i({key:"chartSchemeKeys",value:a.getChartSchemeKeys()})]});if(t.getShowArrowText()){s.setText(a.getIsExpand()?"ꜜ":"ꜛ")}this._aChartExpandButtons.push(s)}return this._aChartExpandButtons};A.prototype._genCustomToolbarItemGroup=function(t,e){if(this._iCustomItemInsertIndex===-1){if(t==A.ToolbarItemPosition.Left){var o=this._oAllItems[t].length;this._iCustomItemInsertIndex=o-1}else{var o=this._oAllItems[A.ToolbarItemPosition.Left].length+1+this._oAllItems[t].length;this._iCustomItemInsertIndex=o-1}}return this._aCustomItems};A.prototype._genExpandTreeGroup=function(t){var e=this;this._oTreeGroup=[new u({id:this._getConfigButtonId(t,"expand"),icon:"sap-icon://expand",tooltip:this._oRb.getText("TLTP_EXPAND"),type:t.getButtonType(),layoutData:new r({priority:t.getOverflowPriority()}),enabled:false,press:function(t){e.fireExpandTreeChange({action:"expand"})}}),new u({id:this._getConfigButtonId(t,"collapse"),icon:"sap-icon://collapse",tooltip:this._oRb.getText("TLTP_COLLAPSE"),layoutData:new r({priority:t.getOverflowPriority()}),enabled:false,press:function(t){e.fireExpandTreeChange({action:"collapse"})}})];return this._oTreeGroup};A.prototype._genModeButtonGroup=function(t){var e=function(t){var e=t.getParameter("button");this.fireModeChange({mode:e.data("mode")})};this._oModeSegmentButton=new g({select:e.bind(this)});this._oModeButtonMap={};var o=function(e,o){if(this._oModesConfigMap[o]){var s=new u({id:this._getConfigButtonId(this._oModesConfigMap[o]),icon:this._oModesConfigMap[o].getIcon(),activeIcon:this._oModesConfigMap[o].getActiveIcon(),type:t.getButtonType(),tooltip:this._oModesConfigMap[o].getText(),layoutData:new r({priority:t.getOverflowPriority()}),customData:[new i({key:"mode",value:o})]});this._oModeButtonMap[o]=s;this._oModeSegmentButton.addButton(s)}};jQuery.each(t.getModeKeys(),o.bind(this));if(this._sInitMode){this._oModeSegmentButton.setSelectedButton(this._oModeButtonMap[this._sInitMode])}return this._oModeSegmentButton};A.prototype._getCounterOfZoomLevels=function(){if(!this._nCounterOfDefaultSliders){this._nCounterOfDefaultSliders=this._oToolbarScheme.getTimeZoom().getStepCountOfSlider()}var t=this._oToolbarScheme.getTimeZoom().getInfoOfSelectItems();if(!t||t.length===0){this._oToolbarScheme.getTimeZoom().setStepCountOfSlider(this._nCounterOfDefaultSliders);return this._nCounterOfDefaultSliders}var e=t.length;this._oToolbarScheme.getTimeZoom().setStepCountOfSlider(e);return e};A.prototype._getZoomControlType=function(){return this._sZoomControlType};A.prototype._genTimeZoomGroupControls=function(t){var e=this;var o=t.getZoomControlType(),i=[],s,n,a,h;var l=new r({priority:t.getOverflowPriority()});var g=function(t){window.clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=-1;this.setZoomLevel(t,true)}.bind(this);this._sZoomControlType=o;this.fireEvent("_zoomControlTypeChange",{zoomControlType:o});if(o===E.ZoomControlType.None){return i}else if(o===E.ZoomControlType.Select){var p=[],d=this._oToolbarScheme.getTimeZoom().getInfoOfSelectItems();if(d.length>0){if(d[0]instanceof m){p=d}else{for(var c=0;c<d.length;c++){var f=new m({key:d[c].key,text:d[c].text});p.push(f)}}}s=new _({id:this._getConfigButtonId(t,"select"),items:p,selectedItem:p[this.getZoomLevel()],layoutData:l,change:function(t){var o=t.getSource();var i=o.getSelectedItem();var s=o.indexOfItem(i);this._iLiveChangeTimer=window.setTimeout(g.bind(e),200,s,i)}});this._oSelect=s;i.push(s)}else{var T=this._getCounterOfZoomLevels();if(this.data("holder")&&this.data("holder").getSliderStep()){T=this.data("holder").getSliderStep()}if(o!==E.ZoomControlType.ButtonsOnly){n=new I({tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+":"+this.getZoomLevel(),showHandleTooltip:true,showAdvancedTooltip:true,id:this._getConfigButtonId(t,"slider"),width:"200px",layoutData:l,max:T-1,value:this.getZoomLevel(),min:0,step:1,liveChange:function(t){var e=parseInt(t.getParameter("value"),10);window.clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=window.setTimeout(g.bind(this),200,e)}.bind(this)})}if(o!==E.ZoomControlType.SliderOnly){var y=function(t){return function(e){var o=parseInt(t?this._oZoomSlider.stepUp(1).getValue():this._oZoomSlider.stepDown(1).getValue(),10);this._iLiveChangeTimer=window.setTimeout(g.bind(this),200,o)}};a=new sap.m.Button({id:this._getConfigButtonId(t,"zoomIn"),icon:"sap-icon://zoom-in",type:t.getButtonType(),tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_IN"),layoutData:l.clone(),press:y(true).bind(this)});h=new u({id:this._getConfigButtonId(t,"zoomOut"),icon:"sap-icon://zoom-out",type:t.getButtonType(),tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_OUT"),layoutData:l.clone(),press:y(false).bind(this)})}if(h){i.push(h);this._oZoomOutButton=h}if(n){i.push(n);this._oZoomSlider=n}if(a){i.push(a);this._oZoomInButton=a}}return i};A.prototype._genLegend=function(t){if(!this._oLegendPop){this._oLegendPop=new S({placement:B.Bottom,showArrow:false,showHeader:false})}if(this.getLegend()){this._oLegendPop.removeAllContent();this._oLegendPop.addContent(this.getLegend())}this._oLegendButton=new u({id:this._getConfigButtonId(t),icon:"sap-icon://legend",type:t.getButtonType(),tooltip:this._oRb.getText("TLTP_SHOW_LEGEND"),layoutData:new r({priority:t.getOverflowPriority(),closeOverflowOnInteraction:false}),press:function(t){this._oLegendPop.setOffsetX(this._calcOffsetForLegendPopover());var e=this._oLegendPop;if(e.isOpen()){e.close()}else{e.openBy(this._oLegendButton)}}.bind(this)});return this._oLegendButton};A.prototype._genSettings=function(t){var e=t.getItems()||[];var o=this;var i=e.map(function(t){return new y({name:t.getKey(),text:t.getDisplayText(),tooltip:t.getTooltip(),selected:t.getChecked()}).addStyleClass("sapUiSettingBoxItem")});this._aOldSettingState=i.map(function(t){return t.getSelected()});var s=function(t){for(var e=0;e<t.length;e++){switch(t[e].getName()){case E.SETTING_ITEM_ENABLE_NOW_LINE_KEY:t[e].setSelected(this.getEnableNowLine());break;case E.SETTING_ITEM_ENABLE_CURSOR_LINE_KEY:t[e].setSelected(this.getEnableCursorLine());break;case E.SETTING_ITEM_ENABLE_VERTICAL_LINE_KEY:t[e].setSelected(this.getEnableVerticalLine());break;case E.SETTING_ITEM_ENABLE_ADHOC_LINE_KEY:t[e].setSelected(this.getEnableAdhocLine());break;case E.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC_KEY:t[e].setSelected(this.getEnableTimeScrollSync());break;default:break}}}.bind(this);var n=function(t){for(var e=0;e<t.length;e++){t[e].setSelected(true)}};this._oSettingsBox=new h({direction:v.Column,items:i}).addStyleClass("sapUiSettingBox");this._oSettingsDialog=new f({title:this._oRb.getText("SETTINGS_DIALOG_TITLE"),customTabs:[new T({content:this._oSettingsBox})],confirm:function(){var t=this._oSettingsBox.getItems();var e=[];for(var i=0;i<t.length;i++){e.push({id:t[i].getName(),value:t[i].getSelected()});o._aOldSettingState[i]=t[i].getSelected()}this.fireSettingsChange(e)}.bind(this),cancel:function(){s(i)},reset:function(){n(i)}});this._oSettingsButton=new u({id:this._getConfigButtonId(t),icon:"sap-icon://action-settings",type:t.getButtonType(),tooltip:this._oRb.getText("TXT_SETTING_BUTTON"),layoutData:new r({priority:t.getOverflowPriority()}),press:function(t){this._oSettingsDialog.open()}.bind(this)});return this._oSettingsButton};A.prototype.toggleExpandTreeButton=function(t){if(this._oTreeGroup&&this._oTreeGroup.length>0){this._oTreeGroup.forEach(function(e){e.setEnabled(t)})}};A.prototype.getToolbarSchemeKey=function(){return this._sToolbarSchemeKey};A.prototype.setEnableNowLine=function(t){this.setProperty("enableNowLine",t,true);if(this._oSettingsBox&&this._oSettingsBox.getItems().length>0){this._setSettingItemProperties(E.SETTING_ITEM_ENABLE_NOW_LINE_KEY,t)}return this};A.prototype.setEnableCursorLine=function(t){this.setProperty("enableCursorLine",t,true);if(this._oSettingsBox&&this._oSettingsBox.getItems().length>0){this._setSettingItemProperties(E.SETTING_ITEM_ENABLE_CURSOR_LINE_KEY,t)}return this};A.prototype.setEnableVerticalLine=function(t){this.setProperty("enableVerticalLine",t,true);if(this._oSettingsBox&&this._oSettingsBox.getItems().length>0){this._setSettingItemProperties(E.SETTING_ITEM_ENABLE_VERTICAL_LINE_KEY,t)}return this};A.prototype.setEnableAdhocLine=function(t){this.setProperty("enableAdhocLine",t,true);if(this._oSettingsBox&&this._oSettingsBox.getItems().length>0){this._setSettingItemProperties(E.SETTING_ITEM_ENABLE_ADHOC_LINE_KEY,t)}return this};A.prototype.setEnableTimeScrollSync=function(t){this.setProperty("enableTimeScrollSync",t,true);if(this._oSettingsBox&&this._oSettingsBox.getItems().length>0){this._setSettingItemProperties(E.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC_KEY,t)}return this};A.prototype._setSettingItemProperties=function(t,e){var o=this._oSettingsBox.getItems();for(var i=0;i<o.length;i++){if(o[i].getName()===t){o[i].setSelected(e);break}}};A.prototype.exit=function(){if(this._oLegendPop){this._oLegendPop.destroy(false)}if(this._oSettingsPop){this._oSettingsPop.destroy(false)}};A.prototype._calcOffsetForLegendPopover=function(){var t=0,e=65;var i=1;var s=1;var n=window.devicePixelRatio||1;n=Math.round(n*100)/100;if(sap.ui.Device.browser.name==="ie"){s=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100}else if(sap.ui.Device.browser.name==="cr"){s=Math.round(window.outerWidth/window.innerWidth*100)/100}else{s=n}if(s!==1){if(s<1||(s-1)%1===0){e+=e*(s-1)*.1}else{e=85}n=Math.round(n*10)/10;if(s<1){i=n+Math.floor((1-s)*10)/10}else if(s<=1.1){i=Math.round(s*10)/10*n}else{i=n-Math.floor((s-1.1)*10)/10}}if(o.getConfiguration().getRTL()===true){t=140}else{var r=this._oLegendPop.getContent();if(r&&r.length>0){var a=sap.ui.getCore().byId(r[0].getContent());t=Math.round((e-parseInt(a.getWidth(),10))*i)}}return t};A.prototype.getZoomLevels=function(){if(this._oToolbarScheme){var t=this._oToolbarScheme.getTimeZoom();if(t){switch(t.getZoomControlType()){case E.ZoomControlType.Select:return t.getTextsOfSelect()||0;case E.ZoomControlType.None:return-1;default:return t.getStepCountOfSlider()}}}return-1};A.prototype._getConfigButtonId=function(t,e){var o=null;if(s.isGeneratedId(t.getId())){return o}var i=this.getParent();if(i){i=this.getType()==="LOCAL"?i.getParent():i;if(i){o=i.getId()+"-"+t.getId();o=e?o+"-"+e:o}}return o};return A},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/control/ToolbarRenderer", [],function(){"use strict";var t={};t.render=function(t,r){var e=r.getAllToolbarItems().length;t.write("<div");t.writeControlData(r);t.addClass("sapGanttToolbar");if(e==0){t.addClass("sapGanttSkipToolbar")}t.writeClasses();t.write(">");t.renderControl(r.getAggregation("_toolbar"));t.write("</div>")};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/DefBase", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.def.DefBase",{metadata:{library:"sap.gantt",abstract:true,properties:{defString:{type:"string",defaultValue:null},refString:{type:"string",defaultValue:null}}}});e.prototype.getRefString=function(){var t=this.getProperty("refString");return t?t:"url(#"+this.generateRefId()+")"};e.prototype.generateRefId=function(){return this.getId()};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/SvgDefs", ["sap/ui/base/ManagedObject","sap/ui/core/Element"],function(e,t){"use strict";var i=t.extend("sap.gantt.def.SvgDefs",{metadata:{library:"sap.gantt",defaultAggregation:"defs",aggregations:{defs:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def",bindable:"bindable"}}}});i.prototype.getDefString=function(){var e="<defs id='"+this.getId()+"'>",t=this.getDefs();if(t&&t.length>0){t.forEach(function(t){e+=t.getDefString()})}return e+"</defs>"};i.prototype.getDefNode=function(){var e={id:this.getId(),defNodes:[]};var t=this.getDefs();for(var i=0;i<t.length;i++){e.defNodes.push(t[i].getDefNode())}return e};i.prototype._getDefString=function(e){var t="<defs id='"+this.getId()+"'>",i=this.getDefs();if(i&&i.length>0){i.forEach(function(i){t+=i.getDefString(e)})}return t+"</defs>"};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/cal/Calendar", ["../DefBase","sap/gantt/misc/Format","sap/gantt/simple/AggregationUtils"],function(t,e,a){"use strict";var n=t.extend("sap.gantt.def.cal.Calendar",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:"calendar"},backgroundColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"#e5e5e5"}},defaultAggregation:"timeIntervals",aggregations:{timeIntervals:{type:"sap.gantt.def.cal.TimeInterval",multiple:true,singularName:"timeInterval",bindable:"bindable"}}}});n.prototype.getDefNode=function(){var t=this.getParent()&&this.getParent().getParent()?this.getParent().getParent():null;var n=this.getTimeIntervals();var r=t?t._oStatusSet:null;var i=r?r.aViewBoundary:null;var l=r?r.aTimeBoundary:null;var g=n;if(l&&r){g=n.filter(function(t){var a=e.abapTimestampToDate(t.getStartTime());var n=e.abapTimestampToDate(t.getEndTime());var i=r.bRTL?l[1]:l[0],g=r.bRTL?l[0]:l[1];return n>i&&a<g})}var s=i&&i.length>1?i[1]-i[0]:1;var u={id:this.generateRefId(),x:0,y:0,width:s,timeIntervals:[]};var o=t&&t.getAggregation("table")?t.getTable().getRows():null;if(o&&o.length>0){o.forEach(function(t){if(!u.title||u.title===""){var e=t.getAggregation("_settings");if(e){var n=a.getAllNonLazyAggregations(e);var r=Object.keys(n).filter(function(t){return t.indexOf("calendars")===0}).map(function(t){return e.getAggregation(t)||[]});r.forEach(function(t){if(t&&t.length>0){var e=t.filter(function(t){return this.getKey()===t.getCalendarName()}.bind(this));var a=e&&e.length>0?e[0].getTitle():null;var n=e&&e.length>0?e[0]:null;u["title"]=a;u["baseCalender"]=n}}.bind(this))}}}.bind(this))}if(t&&t.isA("sap.gantt.simple.GanttChartWithTable")){g=n.filter(function(e){return t.isCalendarTimeIntervalVisible(e)})}for(var f=0;f<g.length;f++){var d=g[f].getDefNode();d.fill=this.getBackgroundColor();u.timeIntervals.push(d)}return u};n.prototype.generateRefId=function(){var t=this.getParent()&&this.getParent().getParent()?this.getParent().getParent().getId():"";return t+"_"+this.getKey()};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/cal/CalendarDefs", ["sap/gantt/def/SvgDefs"],function(e){"use strict";var t=e.extend("sap.gantt.def.cal.CalendarDefs",{metadata:{library:"sap.gantt",aggregations:{defs1:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def1",bindable:"bindable"},defs2:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def2",bindable:"bindable"},defs3:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def3",bindable:"bindable"},defs4:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def4",bindable:"bindable"},defs5:{type:"sap.gantt.def.DefBase",multiple:true,visibility:"public",singularName:"def5",bindable:"bindable"}}}});t.prototype.getRefString=function(e){var t="";if(this.getParent()&&this.getParent().getId()){t=this.getParent().getId()}return"url(#"+t+"_"+e+")"};t.prototype.getDefNode=function(e){var t={id:this.getId(),defNodes:[]};for(var i=0;i<e.length;i++){t.defNodes.push(e[i].getDefNode())}return t};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/cal/TimeInterval", ["../DefBase","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i){"use strict";var a=t.extend("sap.gantt.def.cal.TimeInterval",{metadata:{library:"sap.gantt",properties:{startTime:{type:"string",group:"Misc",defaultValue:null},endTime:{type:"string",group:"Misc",defaultValue:null}}}});a.prototype.setStartTime=function(t){this.setProperty("startTime",this._convertTimestamp(t));return this};a.prototype.setEndTime=function(t){this.setProperty("endTime",this._convertTimestamp(t));return this};a.prototype._convertTimestamp=function(t){var i=t;if(i&&typeof i==="object"){i=e.dateToAbapTimestamp(i)}return i};a.prototype.getDefNode=function(){var t=this.getParent()&&this.getParent().getParent()&&this.getParent().getParent().getParent()?this.getParent().getParent().getParent().getAxisTime():null;var a;var r;if(t){if(i.getConfiguration().getRTL()===true){a=t.timeToView(e.abapTimestampToDate(this.getEndTime()));r=t.timeToView(e.abapTimestampToDate(this.getStartTime()))-a}else{a=t.timeToView(e.abapTimestampToDate(this.getStartTime()));r=t.timeToView(e.abapTimestampToDate(this.getEndTime()))-a}}return{x:a,y:0,width:r}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/filter/MorphologyFilter", ["sap/gantt/library","../DefBase"],function(e,r){"use strict";var t=r.extend("sap.gantt.def.filter.MorphologyFilter",{metadata:{library:"sap.gantt",properties:{operator:{type:"string",defaultValue:e.def.filter.MorphologyOperator.Dilate},radius:{type:"string",defaultValue:"2,1"},colorMatrix:{type:"string",defaultValue:e.def.filter.ColorMatrixValue.AllToWhite}}}});t.prototype.getDefString=function(){return"<filter id='"+this.getId()+"'>"+"<feMorphology in='SourceAlpha' result='morphed' operator='"+this.getOperator()+"' radius='"+this.getRadius()+"'/>"+"<feColorMatrix in='morphed' result='recolored' type='matrix' values='"+this.getColorMatrix()+"'/>"+"<feMerge>"+"<feMergeNode in='recolored'/>"+"<feMergeNode in='SourceGraphic'/>"+"</feMerge>"+"</filter>"};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/gradient/LinearGradient", ["../DefBase"],function(t){"use strict";var e=t.extend("sap.gantt.def.gradient.LinearGradient",{metadata:{library:"sap.gantt",properties:{x1:{type:"string",defaultValue:"0"},y1:{type:"string",defaultValue:"0"},x2:{type:"string",defaultValue:"100"},y2:{type:"string",defaultValue:"15"}},aggregations:{stops:{type:"sap.gantt.def.gradient.Stop",multiple:true,singularName:"stop"}}}});e.prototype.getDefString=function(){var t="<linearGradient id='"+this.getId()+"' x1='"+this.getX1()+"' y1='"+this.getY1()+"' x2='"+this.getX2()+"' y2='"+this.getY2()+"'>";var e=this.getStops();for(var a=0;a<e.length;a++){t=t.concat(e[a].getDefString())}t=t.concat("</linearGradient>");return t};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/gradient/RadialGradient", ["../DefBase"],function(t){"use strict";var a=t.extend("sap.gantt.def.gradient.RadialGradient",{metadata:{library:"sap.gantt",properties:{cx:{type:"float",defaultValue:400},cy:{type:"float",defaultValue:200},r:{type:"float",defaultValue:300},fx:{type:"float",defaultValue:400},fy:{type:"float",defaultValue:200}},aggregations:{stops:{type:"sap.gantt.def.gradient.Stop",multiple:true,singularName:"stop"}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/gradient/Stop", ["../DefBase"],function(t){"use strict";var e=t.extend("sap.gantt.def.gradient.Stop",{metadata:{library:"sap.gantt",properties:{offSet:{type:"string",defaultValue:"5%"},stopColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"#FFFFFF"}}}});e.prototype.getDefString=function(){return"<stop id='"+this.getId()+"' offset='"+this.getOffSet()+"' stop-color='"+this.getStopColor()+"' />"};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/pattern/BackSlashPattern", ["./PatternBase"],function(t){"use strict";var e=t.extend("sap.gantt.def.pattern.BackSlashPattern",{metadata:{library:"sap.gantt",properties:{path:{type:"string"},stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"int",defaultValue:2}}}});e.prototype.getPath=function(){var t=this.getTileWidth();var e=this.getTileHeight();var c="";c=c.concat("M").concat(t/4).concat(",").concat(e/4*5).concat(" ");c=c.concat("l-").concat(t/2).concat(",-").concat(e/2).concat(" ");c=c.concat("M0,0").concat(" ");c=c.concat("l").concat(t).concat(",").concat(e).concat(" ");c=c.concat("M").concat(t/4*5).concat(",").concat(e/4).concat(" ");c=c.concat("l-").concat(t/2).concat(",-").concat(e/2).concat(" ");return c};e.prototype.getDefString=function(t){var e=this.getId();return"<pattern class='pattern' id='"+(t?e.slice(0,e.indexOf("-__clone")):e)+"' patternUnits='userSpaceOnUse' x='0' y='0' width='"+this.getTileWidth()+"' height='"+this.getTileHeight()+"'><rect x='0' width='"+this.getTileWidth()+"' height='"+(this.getTileHeight()+4)+"' stroke-width='"+this.getStrokeWidth()+"' fill='"+this.getBackgroundColor()+"' fill-opacity='"+this.getBackgroundFillOpacity()+"'></rect><path d='"+this.getPath()+"' stroke='"+this.getStroke()+"' stroke-width='"+this.getStrokeWidth()+"'></path></pattern>"};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/pattern/PatternBase", ["../DefBase"],function(t){"use strict";var e=t.extend("sap.gantt.def.pattern.PatternBase",{metadata:{library:"sap.gantt",abstract:true,properties:{tileWidth:{type:"int",defaultValue:8},tileHeight:{type:"int",defaultValue:8},backgroundColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"#fff"},backgroundFillOpacity:{type:"float",defaultValue:"1"}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/def/pattern/SlashPattern", ["./PatternBase","sap/ui/core/Core"],function(t,e){"use strict";var a=t.extend("sap.gantt.def.pattern.SlashPattern",{library:"sap.gantt",metadata:{library:"sap.gantt",properties:{path:{type:"string",defaultValue:null},stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"int",defaultValue:2}}}});a.prototype.getPath=function(){var t=this.getTileWidth();var e=this.getTileHeight();var a="";a=a.concat("M-").concat(t/4).concat(",").concat(e/4).concat(" ");a=a.concat("l").concat(t/2).concat(",-").concat(e/2).concat(" ");a=a.concat("M0").concat(",").concat(e).concat(" ");a=a.concat("l").concat(t).concat(",-").concat(e).concat(" ");a=a.concat("M").concat(t/4*3).concat(",").concat(e/4*5).concat(" ");a=a.concat("l").concat(t/2).concat(",-").concat(e/2).concat(" ");return a};a.prototype.getDefString=function(t){var a=e.getConfiguration().getTheme().indexOf("hcb"),c;if(a!==-1){if(!this.mProperties.hasOwnProperty("backgroundColor")){this.setBackgroundColor("#000")}}c=this.getId();return"<pattern class='pattern' id='"+(t?c.slice(0,c.indexOf("-__clone")):c)+"' patternUnits='userSpaceOnUse' x='0' y='0' width='"+this.getTileWidth()+"' height='"+this.getTileHeight()+"'><rect x='0' width='"+this.getTileWidth()+"' height='"+this.getTileHeight()+"' fill='"+this.getBackgroundColor()+"' fill-opacity='"+this.getBackgroundFillOpacity()+"'></rect><path d='"+this.getPath()+"' stroke='"+this.getStroke()+"' stroke-width='"+this.getStrokeWidth()+"'></path></pattern>"};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/AdhocLine", ["sap/gantt/library","sap/ui/core/Core","sap/gantt/misc/Utility","./Drawer","sap/gantt/misc/Format","sap/ui/thirdparty/d3"],function(t,e,r,a,n){"use strict";var i=a.extend("sap.gantt.drawer.AdhocLine",{constructor:function(t){this.oAxisTime=t}});i.prototype.drawSvg=function(a,i,o,s){if(!i||i.length==0){return}var u=e.getConfiguration().getRTL()?o.aTimeBoundary[1]:o.aTimeBoundary[0],c=e.getConfiguration().getRTL()?o.aTimeBoundary[0]:o.aTimeBoundary[1];var p=i.filter(function(t,e){var r=n.abapTimestampToDate(t.getTimeStamp());if(u<=r&&r<=c){return true}return false});a.selectAll(".sapGanttChartAdhocLine").remove();if(p.length==0){return}var d=jQuery(a.node()),l=Math.max.apply(null,d.map(function(){return jQuery(this).height()}).get());if(s===t.AdhocLineLayer.Top){a.append("g").classed("sapGanttChartAdhocLine",true)}else if(s===t.AdhocLineLayer.Bottom){var h=document.createElementNS(d3.ns.prefix.svg,"g");h.setAttribute("class","sapGanttChartAdhocLine");var m=r.attributeEqualSelector("id",a.attr("id"));var f=jQuery(m).find(".sapGanttChartCalendar");var g=jQuery(m).find(".sapGanttChartRowBackground");if(f.length>0){f.after(h)}else if(g.length>0){g.after(h)}else{a.insert("g",":first-child").classed("sapGanttChartAdhocLine",true)}}var h=a.select(".sapGanttChartAdhocLine");var y=h.selectAll(".sapGanttChartAdhocTimestamp").data(p);var T=this;y.enter().append("line").classed("sapGanttChartAdhocTimestamp",true).attr("x1",function(t){return T.oAxisTime.timeToView(n.abapTimestampToDate(t.getTimeStamp()))}).attr("y1",function(t){return 0}).attr("x2",function(t){return T.oAxisTime.timeToView(n.abapTimestampToDate(t.getTimeStamp()))}).attr("y2",function(t){return l}).attr("stroke",function(t){return t.getStroke()}).attr("stroke-width",function(t){return t.getStrokeWidth()}).attr("stroke-dasharray",function(t){return t.getStrokeDasharray()}).attr("stroke-opacity",function(t){return t.getStrokeOpacity()});y.selectAll("title").remove();y.insert("title",":first-child").text(function(t){return t.getDescription()})};i.prototype.destroySvg=function(t){if(t){t.selectAll(".sapGanttChartAdhocLine").remove()}};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/CalendarPattern", ["sap/ui/core/Core","sap/gantt/misc/Format","sap/ui/core/format/DateFormat","sap/gantt/drawer/Drawer","sap/gantt/misc/Utility","sap/ui/thirdparty/d3"],function(t,e,a,r,i){"use strict";var n=r.extend("sap.gantt.drawer.CalendarPattern");n.prototype.drawSvg=function(t,e,a,r,n){this._oStatusSet=r;if(a){var d=a.getDefs();if(a.getDefNode(d)&&a.getDefNode(d).defNodes){var s=a.getDefNode(d);var o=e+"-calendardefs";var u=i.attributeEqualSelector("id",o);if(!d3.select(u).empty()){jQuery(u).remove()}var c=this._oStatusSet.aViewBoundary[1]-this._oStatusSet.aViewBoundary[0];if(c<0){c=this._oStatusSet.aViewBoundary[0]-this._oStatusSet.aViewBoundary[1]}var f={height:n,width:c};var h=t.select(u);if(h.empty()){h=t.insert("defs",":first-child").attr("id",o)}var l=h.selectAll(".calendarPattern").data(s.defNodes);l.enter().append("pattern").attr("class","calendarPattern").attr("id",function(t){return t.id}).attr("patternUnits","userSpaceOnUse").attr("x",0).attr("y",0).attr("width",f.width).attr("height",f.height);l.exit().remove();var p=l.selectAll("rect").data(function(){return this.parentNode.__data__.timeIntervals});p.enter().append("rect");p.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",f.height).attr("fill",function(t){return t.fill});p.exit().remove()}}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/CursorLine", ["sap/ui/core/Core","sap/ui/Device","sap/gantt/misc/Format","sap/gantt/drawer/Drawer","sap/gantt/misc/Utility","../simple/GanttUtils","sap/ui/core/theming/Parameters","sap/ui/thirdparty/d3"],function(e,t,r,a,n,i,o){"use strict";var s=a.extend("sap.gantt.drawer.CursorLine");s.prototype.drawSvg=function(e,t,r,a){this._oLocale=r;var i=jQuery(n.attributeEqualSelector("id",a.svgId)).offset().left;var o=[];e.each(function(e,t){var r=jQuery(this),n=r.offset();o.push({x:a.x+i-n.left,y:a.y,svgId:r.attr("id"),svgHeight:r.height()})});var s=this;t.each(function(e,t){var r=s._createHeaderTopG(d3.select(this));var a=null;a=r[0]["parentNode"].getElementById("inner-header-svg");var n=null,i=null;var u=r[0]["parentNode"].getElementById("inner-header-g");if(u!==null){n=r[0]["parentNode"].getElementById("inner-header-g").style.height}if(n!==null){i=n.split("px")}if(i!==null){s._drawHeaderLabel(r,o[t],a,parseInt(i[0],10))}else{s._drawHeaderLabel(r,o[t],null,0)}});e.each(function(e,t){var r=s._createBodyTopG(d3.select(this));s._drawCursorLine(r,o[t])})};s.prototype._createBodyTopG=function(e){var t=e.selectAll(".cursorline-top").data(function(){return[{svgHeight:jQuery(this.parentNode).height()}]});t.enter().append("g").classed("cursorline-top",true);t.exit().remove();return t};s.prototype._drawCursorLine=function(e,t){var r=e.selectAll("path").data(function(e){return[{svgHeight:e.svgHeight,x:t.x,y:t.y}]});r.enter().append("path").classed("sapGanttCursorLineBody",true);r.attr("d",function(e){return"M"+e.x+",0v"+e.svgHeight+"h1h-1"});r.exit().remove()};s.prototype._createHeaderTopG=function(e){var t=e.selectAll(".cursorline-header-top").data(function(){return[{svgHeight:jQuery(this.parentNode).height()}]});t.enter().append("g").classed("cursorline-header-top",true);t.exit().remove();return t};s.prototype._drawHeaderLabel=function(e,t,a,n){var s=this;var u=this._getAxisTime(t.svgId);var l=t.x;var p=t.y;var d;var c=function(e){return s._getTimeLabel(r.dateToAbapTimestamp(u.viewToTime(e)),s._oLocale,u)};var g=e.selectAll("rect").data(function(e){if(a!==null){d=e.svgHeight-n}else{d=e.svgHeight}return[{svgHeight:d,svgId:e.svgId,x:l,y:p}]});g.enter().append("rect").classed("sapGanttCursorLineHeader",true);g.attr("width",function(e){var t=c(e.x),r=i.getShapeTextWidth(t,parseInt(o.get("sapUiFontSmallSize"),10),"Arial","normal");return r<64?64:r+10}).attr("height",function(e){return e.svgHeight>80?30:25}).attr("x",function(e){return e.x-parseFloat(g.attr("width"))/2}).attr("y",function(e){return e.svgHeight-parseFloat(g.attr("height"))-5});g.exit().remove();if(a!==null){var v=e.selectAll("path").data(function(e){return[{svgHeight:n,x:l,y:p}]});v.enter().append("path").classed("sapGanttCursorLineBody",true);v.attr("d",function(e){var t=l;return"M"+t+","+d+"v"+n+"h1h-1"});v.exit().remove()}var h=e.selectAll("text").data(function(e){return[{x:parseFloat(g.attr("x"))+parseFloat(g.attr("width")/2),y:parseFloat(g.attr("y"))+parseFloat(g.attr("height")/2)}]});h.enter().append("text").classed("sapGanttCursorLineLabel",true);h.attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).text(function(e){return c(e.x)});h.exit().remove()};s.prototype.destroySvg=function(e,t){e.selectAll(".cursorline-top").remove();t.selectAll(".cursorline-header-top").remove()};s.prototype._getAxisTime=function(e){var t=n.attributeEqualSelector("id",e);var r=jQuery(t);var a=null;if(r){a=r.control(0,true).getAxisTime()}return a};s.prototype._getTimeLabel=function(e,t,a){var i=r._convertUTCToLocalTime(e,t),o=a.getZoomStrategy();var s=n.getFormattedDate(o.getLowerRowFormatter(),i);return n.getLowerCaseLabel(s)};return s},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/Drawer", ["sap/ui/base/Object"],function(t){"use strict";var a=t.extend("sap.gantt.drawer.Drawer",{metadata:{abstract:true}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/ExpandedBackground", ["sap/gantt/drawer/Drawer","sap/ui/thirdparty/d3"],function(e,t,r){"use strict";var a=e.extend("sap.gantt.drawer.ExpandedBackground");a.prototype.drawSvg=function(e,t,r){if(!t){return null}var a=[];for(var n=0;n<t.length;n++){if(t[n].index&&t[n].index!==0||r.hasOwnProperty(t[n].chartScheme)){a.push(t[n])}}var d=e.selectAll(".sapGanttChartRowBackground").remove();d=e.insert("g",":first-child").classed("sapGanttChartRowBackground",true);var p=d.selectAll(".expandedRow").data(a);p.enter().append("g").classed("expandedRow",true);p.exit().remove();if(!p.empty()){var c=jQuery(e.node()).width();this._drawExpandedBackground(e,c,r)}};a.prototype._drawExpandedBackground=function(e,t,r){e.selectAll(".expandedRow").selectAll("rect").remove();e.selectAll(".expandedRow").append("rect").attr("x",function(e){return 0}).attr("y",function(e){return e.y}).attr("height",function(e){return e.rowHeight-1}).attr("width",function(e){return"100%"}).attr("class",function(e){var t=r[e.chartScheme];if(t&&t!==""){return t}else{return"sapGanttExpandChartCntBG"}});e.selectAll(".expandedRow").selectAll("path").remove();e.selectAll(".expandedRow").append("path").classed("sapGanttExpandChartLine",true).attr("d",function(e){return"M0 "+(e.y-1)+" H"+(t-1)})};return a},true);
sap.ui.predefine("sap/gantt/drawer/Legend", ["sap/gantt/drawer/Drawer","sap/gantt/misc/Format","sap/ui/thirdparty/d3"],function(t,e){"use strict";var r=t.extend("sap.gantt.drawer.Legend");r.prototype._recursiveDraw=function(t,e){var r=t.selectAll("."+e.getId()).data(function(t){var e=[];return e.concat(t)});this._drawPerTag(r,e)};r.prototype._drawPerTag=function(t,e){var r=e.mChartInstance;if(e.getIsDuration()){e.getTime=function(){return r.TIME_RANGE[0]};e.getEndTime=function(){return r.TIME_RANGE[1]}}else{e.getTime=function(){return r.TIME}}e.setRowYCenter(r.getScaledLegendHeight()/2);switch(e.getTag()){case"g":this._drawGroup(t,e);break;case"line":this._drawLine(t,e);break;case"rect":this._drawRect(t,e);break;case"text":this._drawText(t,e);break;case"path":this._drawPath(t,e);break;case"image":this._drawImage(t,e);break;case"polygon":this._drawPolygon(t,e);break;case"polyline":this._drawPolyline(t,e);break;case"circle":this._drawCircle(t,e);break;default:break}this._insertTitle(t,e)};r.prototype._insertTitle=function(t,e){t.select("title").remove();t.insert("title",":first-child").text(function(t){if(!e.getParent()){return e.getTitle(t)}})};r.prototype._drawGroup=function(t,e){t.enter().append("g").classed(e.getId(),true).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove();var r=e.getShapes();if(r&&r.length>0){for(var n=0;n<r.length;n++){this._recursiveDraw(t,r[n])}}};r.prototype._drawLine=function(t,e){var r=this;t.enter().append("line").attr("x1",function(t){return e.getX1(t)}).attr("y1",function(t){return e.getY1(t)}).attr("x2",function(t){return e.getX2(t)}).attr("y2",function(t){return e.getY2(t)}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("stroke",function(t){return r.determineValue("stroke",e,t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke-dasharray",function(t){return e.getStrokeDasharray(t)}).attr("fill-Opacity",function(t){return e.getFillOpacity(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawRect=function(t,e){var r=e.mChartInstance,n=this;t.enter().append("rect").classed(e.getId(),true);t.attr("x",function(t){if(r.getLegendSpace!==undefined){if(sap.ui.getCore().getConfiguration().getRTL()){var n=r.getXDomain(),a=n.length;return r.getScaledLegendWidth()*(a-t.xIndex-1)+r.getLegendSpace()*(a-t.xIndex)}return r.getScaledLegendWidth()*t.xIndex+r.getLegendSpace()*(t.xIndex+1)}return e.getX(t)}).attr("y",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendHeight()*t.yIndex+r.getLegendSpace()*(t.yIndex+1)}return e.getY(t)}).attr("width",function(t){return e.getWidth(t)}).attr("height",function(t){return e.getHeight(t)}).attr("fill",function(t){return n.determineValue("fill",e,t)}).attr("rx",function(t){return e.getRx(t)}).attr("ry",function(t){return e.getRy(t)}).attr("filter",function(t){return e.getFilter(t)}).attr("stroke",function(t){return n.determineValue("stroke",e,t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke-dasharray",function(t){return e.getStrokeDasharray(t)}).attr("opacity",function(t){return e.getFillOpacity(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawText=function(t,e){var r=e.mChartInstance,n=this;t.enter().append("text").attr("x",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendWidth()*t.xIndex+r.getLegendSpace()*(t.xIndex+1)}return e.getX(t)}).attr("y",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendHeight()*t.yIndex+r.getLegendSpace()*(t.yIndex+1)}return e.getRowYCenter(t)}).attr("text-anchor","middle").attr("font-size",function(t){return e.getFontSize(t)}).attr("fill",function(t){return n.determineValue("fill",e,t)}).attr("filter",function(t){return e.getFilter(t)}).attr("stroke",function(t){return n.determineValue("stroke",e,t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("alignment-baseline","central").attr("font-family",function(t){return e.getFontFamily(t)}).text(e.getText()).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawPath=function(t,e){var r=this;t.enter().append("path").attr("d",function(t){return e.getD(t)}).attr("fill",function(t){return r.determineValue("fill",e,t)}).attr("stroke",function(t){return r.determineValue("stroke",e,t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke-dasharray",function(t){return e.getStrokeDasharray(t)}).attr("opacity",function(t){if(e.getIsClosed()){return e.getFillOpacity(t)}}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawImage=function(t,e){var r=e.mChartInstance;t.enter().append("image").attr("xlink:href",function(t){return e.getImage(t)}).attr("x",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendWidth()*t.xIndex+r.getLegendSpace()*(t.xIndex+1)}return e.getX(t)}).attr("y",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendHeight()*t.yIndex+r.getLegendSpace()*(t.yIndex+1)}return e.getY(t)}).attr("width",function(t){return e.getWidth(t)}).attr("height",function(t){return e.getHeight(t)}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawPolygon=function(t,e){var r=this;t.enter().append("polygon").attr("fill",function(t){return r.determineValue("fill",e,t)}).attr("points",function(t){return e.getPoints(t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke",function(t){return r.determineValue("stroke",e,t)}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawPolyline=function(t,e){var r=this;t.enter().append("polyline").attr("fill",function(t){return r.determineValue("fill",e,t)}).attr("points",function(t){return e.getPoints(t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke",function(t){return r.determineValue("stroke",e,t)}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype._drawCircle=function(t,e){var r=e.mChartInstance,n=this;t.enter().append("circle").attr("fill",function(t){return n.determineValue("fill",e,t)}).attr("stroke-width",function(t){return e.getStrokeWidth(t)}).attr("stroke",function(t){return n.determineValue("stroke",e,t)}).attr("filter",function(t){return e.getFilter(t)}).attr("aria-label",function(t){return e.getAriaLabel(t)}).attr("cx",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendWidth()*(t.xIndex+.5)+r.getLegendSpace()*(t.xIndex+1)}return e.getCx(t)}).attr("cy",function(t){if(r.getLegendSpace!==undefined){return r.getScaledLegendHeight()*(t.yIndex+.5)+r.getLegendSpace()*(t.yIndex+1)}return e.getCy(t)}).attr("r",function(t){return e.getR(t)}).attr("transform",function(t){return e.getTransform(t)}).attr("role",function(t){if(!e.getParent()){return"tooltip"}}).attr("focusable",function(t){if(!e.getParent()){return true}}).attr("tabindex",function(t){if(!e.getParent()){return 0}}).attr("aria-label",function(t){if(!e.getParent()){return e.getAriaLabel(t)}});t.exit().remove()};r.prototype.determineValue=function(t,e,r){var n=null;if(t==="fill"){n=e.getFill(r)}else if(t==="stroke"){n=e.getStroke(r)}return sap.gantt.ValueSVGPaintServer.normalize(n)};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/NowLine", ["./Drawer"],function(t){"use strict";var e=8;var r=t.extend("sap.gantt.drawer.NowLine",{constructor:function(t){this.oAxisTime=t}});r.prototype.drawSvg=function(t,e,r){this.destroySvg(t,e);var n=this.oAxisTime.getNowLabel(r)[0].value;var a=jQuery(t.node()).width();if(isNaN(n)||n>a){return}var i=t,o=e;var u={x:n,y:jQuery(e.node()).height()};this._drawHeaderTriangle(u,o);this._drawBodyStaightLine(u,i)};r.prototype._drawHeaderTriangle=function(t,r){var n=e/2,a=Math.sqrt(e*e-n*n);var i=[t,{x:t.x-n,y:t.y-a},{x:t.x+n,y:t.y-a},t];var o=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linera");r.append("g").classed("sapGanttNowLineHeaderSvgPath",true).append("path").attr("d",o(i))};r.prototype._drawBodyStaightLine=function(t,e){var r=e.selectAll(".sapGanttNowLineBodySvgLine").data(function(){var e=jQuery(window).height();return[{x1:t.x,y1:0,x2:t.x,y2:t.y+e}]});r.enter().append("g").classed("sapGanttNowLineBodySvgLine",true);var n=r.selectAll("g").data(function(t){return[t]});n.enter().append("line");n.attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2});n.exit().remove()};r.prototype.destroySvg=function(t,e){if(t&&e){t.selectAll(".sapGanttNowLineBodySvgLine").remove();e.selectAll(".sapGanttNowLineHeaderSvgPath").remove()}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/SelectionPanel", ["sap/gantt/drawer/Drawer","sap/ui/core/Core","sap/ui/core/IconPool","sap/ui/Device","sap/ui/thirdparty/d3"],function(t,e,n,a){"use strict";var r=t.extend("sap.gantt.drawer.SelectionPanel");r.prototype.drawSvg=function(t,e,n,a){if(!e){return}this._oGanttChartWithTable=a;var r=[];for(var i=0;i<e.length;i++){if(e[i].index&&e[i].index!==0){r.push(e[i])}}var o=t.selectAll(".sapGanttSelectionPanel");if(o.empty()){o=t.append("g").classed("sapGanttSelectionPanel",true)}if(!o.empty()){var d=jQuery(t.node()).width();var u=a._oGanttChart._composeChartSchemeBackgroundConfig();this._drawExpandedBackground(o,d,n,r,u);this._drawExpandedContent(o,d,n,r)}};r.prototype._drawExpandedBackground=function(t,n,a,r,i){var o=t.selectAll(".sapGanttExpandChartHeader").data(r);o.enter().append("rect").classed("sapGanttExpandChartHeader",true);o.attr("x",function(){return e.getConfiguration().getRTL()?n-a+1:2}).attr("y",function(t){return t.y}).attr("height",function(t){return t.rowHeight-1}).attr("width",a-2).attr("class",function(t){var e=i?i[t.chartScheme]:undefined;if(e&&e!==""){return"sapGanttExpandChartHeader "+e}else{return"sapGanttExpandChartHeader sapGanttExpandChartHeaderBG"}});o.exit().remove();var d=t.selectAll(".sapGanttExpandChartCnt").data(r);d.enter().append("rect").classed("sapGanttExpandChartCnt",true);d.attr("x",function(){return e.getConfiguration().getRTL()?2:a+1}).attr("y",function(t){return t.y}).attr("height",function(t){return t.rowHeight-1}).attr("width",n-a-3).attr("class",function(t){var e=i?i[t.chartScheme]:undefined;if(e&&e!==""){return"sapGanttExpandChartCnt "+e}else{return"sapGanttExpandChartCnt sapGanttExpandChartCntBG"}});d.exit().remove();var u=t.selectAll("path.sapGanttExpandChartLine").data(r);u.enter().append("path").classed("sapGanttExpandChartLine",true);u.attr("d",function(t){return"M0 "+(t.y-1)+" H"+(n-1)});u.exit().remove()};r.prototype._drawExpandedContent=function(t,r,i,o){var d=this._getLevelIndentByShape;var u=[];for(var c=0;c<o.length;c++){if(o[c].index===1){var s=[];s.push(o[c]);u.push(s)}}t.selectAll("g").remove();var p=t.selectAll("g").data(u);p.enter().append("g").classed("sapGanttExpandChartContent",true);p.exit().remove();var l=p.selectAll(".sapGanttExpandChartIcon").data(function(t){return t});l.enter().append(function(t){if(n.isIconURI(t.icon)){return document.createElementNS(d3.ns.prefix.svg,"text")}return document.createElementNS(d3.ns.prefix.svg,"image")}).classed("sapGanttExpandChartIcon",true).classed("iconFont",function(t){return n.isIconURI(t.icon)}).classed("iconImage",function(t){return!n.isIconURI(t.icon)});p.selectAll(".iconImage").attr("xlink:href",function(t){return t.icon}).attr("x",function(t){return e.getConfiguration().getRTL()?r-i-d(t)-17:d(t)+i}).attr("y",function(t){return t.y+4.25}).attr("width",16).attr("height",16);p.selectAll(".iconFont").attr("x",function(t){return e.getConfiguration().getRTL()?r-i-d(t):d(t)+i}).attr("y",function(t){return t.y+19}).text(function(t){var e=n.getIconInfo(t.icon);if(e){return e.content}}).attr("font-family",function(t){var e=n.getIconInfo(t.icon);if(e){return e.fontFamily}}).attr("font-size","16px");l.exit().remove();var f=p.selectAll("sapGanttExpandChartText").data(function(t){return t});f.enter().append("text").classed("sapGanttExpandChartText",true);f.attr("x",function(t){return e.getConfiguration().getRTL()?r-i-d(t)-26:d(t)+i+27}).attr("y",function(t){return t.y+16.5}).attr("font-size",function(t){return"0.75em"}).text(function(t){return t.name}).attr("text-anchor",a.browser.edge&&e.getConfiguration().getRTL()?"end":"start");f.exit().remove();var h=this;var g=p.selectAll(".sapGanttExpandChartCloseButton").data(function(t){return t});g.enter().append("text").classed("sapGanttExpandChartCloseButton",true);g.attr("x",function(t){var n,a=jQuery(this).prev("text");if(a&&a.length>0){var o=a[0].getBoundingClientRect();if(o&&o.width>0){n=o.width}else{n=a[0].clientWidth}}if(isNaN(n)||n==null||n==0){n=60}var u=e.getConfiguration().getRTL()?r-i-d(t)-n-37:d(t)+i+n+35;return u}).attr("y",function(t){return t.y+19}).text(function(t){var e=n.getIconInfo("decline",undefined);if(e){return e.content}}).attr("font-family",function(t){var e=n.getIconInfo("decline",undefined);if(e){return e.fontFamily}}).attr("font-size","14px").attr("font-weight","bolder").on("click",function(t){var e=h._oGanttChartWithTable._oTT.getBinding("rows");var n=e.getContexts(0,e.getLength());var a=h._oGanttChartWithTable.getRowIdName();for(var r=0;r<n.length;r++){var i=n[r].getProperty();if(i&&t.id&&i[a]===t.id){h._oGanttChartWithTable.handleExpandChartChange(false,[t.chartScheme],[r])}}});g.select("title").remove();g.insert("title",":first-child").text(function(t){return sap.ui.getCore().getLibraryResourceBundle("sap.gantt").getText("TLTP_CLOSE")});g.exit().remove()};r.prototype._getLevelIndentByShape=function(t){var e=13;var n=17;var a=25;var r=0;if(t&&t.bindingObj&&t.bindingObj._aRowIndexMap&&t.rowIndex&&t.rowIndex<t.bindingObj._aRowIndexMap.length){r=t.bindingObj._aRowIndexMap[t.rowIndex].level}if(isNaN(r)||r==null){r=0}return n*r+a+e};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/ShapeCrossRow", ["sap/gantt/drawer/Drawer","sap/gantt/misc/Utility","sap/ui/thirdparty/d3"],function(t,e){"use strict";var a=t.extend("sap.gantt.drawer.ShapeCrossRow");a.prototype.drawSvg=function(t,e,a,r){this._oAxisTime=a;this._oAxisOrdinal=r;var n=t.select("."+e.getId()+"-top");if(n.empty()){n=t.append("g").classed(e.getId()+"-top",true)}var i=[];for(var o in e.dataSet){i.push(e.dataSet[o].shapeData[0])}var s=n.selectAll("."+e.getId()).data(i);this._drawPath(s,e);this._drawInsertTitle(s,e)};a.prototype._drawPath=function(t,e){var a=this._findObjectInfo;var r=this;t.enter().append("path").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,a(this,e,r))?true:false}).classed("enableSelected",function(t){return e.getEnableSelection(t,a(this,e,r))?true:false}).attr("d",function(t){return e.getD(t,a(this,e,r))}).attr("fill",function(t){if(e.getIsClosed(t,a(this,e,r))){return e.getFill(t,a(this,e,r))}}).attr("stroke",function(t){return e.getStroke(t,a(this,e,r))}).attr("stroke-width",function(t){return e.getStrokeWidth(t,a(this,e,r))}).attr("stroke-dasharray",function(t){return e.getStrokeDasharray(t,a(this,e,r))}).attr("fill-opacity",function(t){if(e.getIsClosed(t,a(this,e,r))){return e.getFillOpacity(t,a(this,e,r))}}).attr("stroke-opacity",function(t){if(e.getIsClosed(t,a(this,e,r))){return e.getStrokeOpacity(t,a(this,e,r))}});this.addDataAttributes(t);t.exit().remove()};a.prototype._drawInsertTitle=function(t,e){var a=this._findObjectInfo;t.select("title").remove();t.insert("title",":first-child").each(function(t){var r=d3.select(this);r.selectAll("tspan").remove();r.text(e.getTitle(t,a(this,e)))})};a.prototype._findObjectInfo=function(t,e,a,r){var n=t.__data__;var i=n;if(r){i=n.data.rawData}var o={from:{objectInfo:i.fromObject.objectInfoRef?i.fromObject.objectInfoRef:i.fromObject,shapeRawData:i.fromShapeRawData},to:{objectInfo:i.toObject.objectInfoRef?i.toObject.objectInfoRef:i.toObject,shapeRawData:i.toShapeRawData}};return o};a.prototype.destroySvg=function(t,e){};a.prototype.generateRelationshipDataSet=function(t,a,r,n,i,o,s){var f=i;var h=[];if(f!==undefined&&f.length>0){var p;var d;for(d in a){if(a[d].getCategory(null,o,s)===sap.gantt.shape.ShapeCategory.Relationship){p=a[d];break}}if(p){var l={};for(d in a){if(a[d].dataSet&&a[d].dataSet!=""&&a[d].mShapeConfig.getShapeDataName()!=sap.gantt.shape.ShapeCategory.Relationship){e.generateObjectPathToObjectMap(a[d].dataSet,l,null)}}e.generateObjectPathToObjectMap(r,l,null);var c;var u;for(var g=0;g<f.length;g++){c=f[g];u=c;var v=p.getFromObjectPath(u,null);var S=l[v+"-"+p.getFromExpandRowIndex(u,null)];if(!S){continue}var b=p.getToObjectPath(u,null);var m=l[b+"-"+p.getToExpandRowIndex(u,null)];if(!m){continue}var D=p.getFromShapeId(u,null);var _=p.getFromDataId(u,null);var j=a[D].mShapeConfig.getShapeDataName();var y=this._findShapeDataFromRowObjectByShapeDataName(S,_,j);if(!y){continue}var I=p.getToShapeId(u,null);var O=p.getToDataId(u,null);var w=a[I].mShapeConfig.getShapeDataName();var R=this._findShapeDataFromRowObjectByShapeDataName(m,O,w);if(!R){continue}u.fromObject=S;u.toObject=m;u.fromShapeRawData=y;u.toShapeRawData=R;var T={shapeData:[c]};h.push(T)}}}return h};a.prototype._findShapeDataFromRowObjectByShapeDataName=function(t,e,a){var r,n;if(t.shapeData){n=t.shapeData}else if(t.data&&t.data[a]){n=t.data[a]}else if(t.data){return t.data}else{n=t}for(var i=0;i<n.length;i++){if(n[i].__id__!==undefined&&n[i].__id__==e){r=n[i];break}}if(r==undefined&&n.length>0){r=n[0]}return r};a.prototype.addDataAttributes=function(t){t.attr("data-sap-gantt-shape-id",function(t){return t.__id__})};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/ShapeInRow", ["sap/gantt/drawer/Drawer","sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/ui/thirdparty/d3"],function(t,e,r){"use strict";var a=t.extend("sap.gantt.drawer.ShapeInRow",{});a.prototype.drawSvg=function(t,e,r,a,i){this._oAxisTime=r;this._oAxisOrdinal=a;this._oStatusSet=i;var n=t.select("."+e.getId()+"-top");if(n.empty()){n=t.append("g").classed(e.getId()+"-top",true)}if(sap.ui.getCore().byId(e.getId()).getMetadata().getName()==="sap.gantt.shape.cal.Calendar"){n.classed("sapGanttChartCalendar",true)}var s=e.getId()+"-row";var o=n.selectAll("."+s).data(e.dataSet);o.enter().append("g").classed(s,true);o.attr("data-sap-gantt-row-id",function(t){return t.objectInfoRef.id});o.exit().remove();if(!o.empty()){this._recursiveDraw(o,e)}};a.prototype.drawResizeShadow=function(t,e,r,a,i){this._oAxisTime=r;this._oAxisOrdinal=a;this._oStatusSet=i;if(e){var n=t.select(".resizingShadow");if(n.empty()){n=t.append("g").classed("resizingShadow",true)}var s=n.select("."+e.getId()+"-resize");if(s.empty()){s=n.append("g").classed(e.getId()+"-resize",true)}var o=s.data(e.dataSet);o.exit().remove();if(!o.empty()){this._recursiveDraw(o,e)}}};a.prototype._recursiveDraw=function(t,e,r){var a=this;var i=t.selectAll("."+e.getId()).data(function(t){return a._bindRowData(t,r,this,e)});this._drawPerTag(i,e);this._drawInsertTitle(t,e)};a.prototype._bindRowData=function(t,e,r,a){var i=this._oStatusSet&&this._oStatusSet.aViewBoundary?this._oStatusSet.aViewBoundary:undefined;var n=a.getIsBulk();var s,o;if(t){var u=[];if(t.shapeData){if(!(t.shapeData instanceof Array)){u=u.concat(t.shapeData)}else{for(o=0;o<t.shapeData.length;o++){if(t.shapeData[o]){s={};s.oShape=a;s.objectInfo=t.objectInfoRef;s.dShapeData=t.shapeData[o];s.aViewRange=i;if(!n&&i!==undefined&&this._filterDataVisibleRange(s)){continue}u=u.concat(t.shapeData[o])}}}}else if(e&&t[e]){if(t[e].length){for(o=0;o<t[e].length;o++){s={};s.oShape=a;s.objectInfo=t.objectInfoRef;s.dShapeData=t[e][o];s.aViewRange=i;if(!n&&i!==undefined&&this._filterDataVisibleRange(s)){continue}u.push(t[e][o])}}else{u.push(t[e])}}else if(t){u=u.concat(t)}if(a.filterValidData&&u.length>0){u=a.filterValidData(u,t.objectInfoRef)}return u}};a.prototype._filterDataVisibleRange=function(t){var e=this._oAxisTime;var a=this._oAxisOrdinal;var i=t.aViewRange;var n=t.oShape.getIsDuration(t.dShapeData);if(n){var s=e.timeToView(r.abapTimestampToDate(t.oShape.getTime(t.dShapeData,undefined,e,a,t.objectInfo)));var o=e.timeToView(r.abapTimestampToDate(t.oShape.getEndTime(t.dShapeData,undefined,e,a,t.objectInfo)));if(this._oStatusSet.bRTL===true){return o>i[1]||s<i[0]}else{return o<i[0]||s>i[1]}}else{var u=e.timeToView(r.abapTimestampToDate(t.oShape.getTime(t.dShapeData,undefined,e,a,t.objectInfo)));return u>i[1]||u<i[0]}return false};a.prototype._drawPerTag=function(t,e){switch(e.getTag()){case"g":this._drawGroup(t,e);break;case"line":this._drawLine(t,e);break;case"rect":this._drawRect(t,e);break;case"text":this._drawText(t,e);break;case"path":this._drawPath(t,e);break;case"clippath":this._drawClipPath(t,e);break;case"image":this._drawImage(t,e);break;case"polygon":this._drawPolygon(t,e);break;case"polyline":this._drawPolyline(t,e);break;case"circle":this._drawCircle(t,e);break;case"defs":this._drawDefinitions(t,e);break;default:break}if(e.getParent()===null){this.addDataAttributes(t)}};a.prototype._drawGroup=function(t,e){var r=this._findObjectInfo;t.enter().append("g").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false});t.exit().remove();var a=e.getShapes();if(a&&a.length>0){for(var i=0;i<a.length;i++){this._recursiveDraw(t,a[i],a[i].mShapeConfig.getShapeDataName())}}};a.prototype._drawLine=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("line").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("x1",function(t){return e.getX1(t,r(this,e))}).attr("y1",function(t){return e.getY1(t,r(this,e))}).attr("x2",function(t){return e.getX2(t,r(this,e))}).attr("y2",function(t){return e.getY2(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawRect=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("rect").classed(e.getId(),true);t.classed(e.getHtmlClass(),function(t){return e.getHtmlClass(t,r(this,e))?true:false}).classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).classed("enableClone",function(t){return e.getEnableDnD(t,r(this,e))?true:false}).attr("x",function(t){return e.getX(t,r(this,e))}).attr("y",function(t){return e.getY(t,r(this,e))}).attr("width",function(t){return e.getWidth(t,r(this,e))}).attr("height",function(t){return e.getHeight(t,r(this,e))}).attr("rx",function(t){return e.getRx(t,r(this,e))}).attr("ry",function(t){return e.getRy(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("clip-path",function(t){return e.getClipPath(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawText=function(t,e){var r=this._findObjectInfo;var a={};var i=this;t.enter().append("text").classed(e.getId(),true);t.classed("sapGanttShapeSvgText",true).classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("x",function(t){return e.getX(t,r(this,e))}).attr("y",function(t){return e.getY(t,r(this,e))}).attr("text-anchor",function(t){return e.getTextAnchor(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).text(function(t){return e.getText(t,r(this,e))}).each(function(t){var n=d3.select(this);n.selectAll("tspan").remove();var s=r(this,e);var o=e.getWrapWidth(t,s);var u=e.getTruncateWidth(t,s);if(u>-1){i._textTruncate(t,n,u,e.getEllipsisWidth(t,s),e.getId())}else if(o>-1){i._textWrap(t,this,o,e.getWrapDy(t,s))}a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._textTruncate=function(t,e,r,a,i){var n=e.node().getComputedTextLength();if(n>r){var s=e.text().trim(),o,u;if(a>-1&&a<r){u=true;o=r-a}else{u=false;o=r}var l=this._getTextTruncatCountByBinarySearch(e,n,o,s);s=s.slice(0,l).trim();e.text(s);if(u){if(sap.ui.Device.browser.name==="cr"&&sap.ui.Device.browser.version<96){e.append("tspan").classed(i,true).text("...").attr("textLength",e.node().getComputedTextLength()).attr("lengthAdjust","spacingAndGlyphs")}else{var f=sap.ui.getCore().getConfiguration().getRTL();if(f&&(sap.ui.Device.browser.edge||sap.ui.Device.browser.safari)){e.text("..."+s).classed(i,true)}else{e.append("tspan").classed(i,true).text("...").attr("textLength",a).attr("lengthAdjust","spacingAndGlyphs")}}}}};a.prototype._getTextTruncatCountByBinarySearch=function(t,e,r,a){var i=0;if(r>0&&a.length>0){var n=Math.round(r/Math.ceil(e/a.length));var s,o,u;if(n<1){s=n;o=n+1;u=n+2}else if(n==a.length){s=n-2;o=n-1;u=n}else{s=n-1;o=n;u=n+1}var l=t[0][0].getSubStringLength(0,o);var f=t[0][0].getSubStringLength(0,u);var h=t[0][0].getSubStringLength(0,s);if(l==r||l<r&&f>r){i=o}else if(f==r){i=u}else if(h==r||h<r&&l>r){i=s}else{var c=1,d=a.length;if(f<r){c=u}else if(h>r){d=s-1}while(c<=d){o=Math.floor(c+(d-c)/2);l=t[0][0].getSubStringLength(0,o);f=t[0][0].getSubStringLength(0,o+1);if(l==r||l<r&&f>r){i=o;break}else if(l>r){d=o-1}else{c=o+1}}}}return i>=0&&i<=a.length?i:0};a.prototype._textWrap=function(t,e,r,a){};a.prototype._drawPath=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("path").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("d",function(t){return e.getD(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawClipPath=function(t,e){var r=this._findObjectInfo;t.enter().append("defs").classed(e.getId(),true);t.selectAll("clipPath").remove();t.append("clipPath").attr("id",function(t){return e.getHtmlClass(t,r(this,e))}).append("path").attr("d",function(t){return e.getPaths()[0].getD(t,r(this,e))});t.exit().remove()};a.prototype._drawImage=function(t,e){var r=this._findObjectInfo;t.enter().append("image").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("xlink:href",function(t){return e.getImage(t,r(this,e))}).attr("x",function(t){return e.getX(t,r(this,e))}).attr("y",function(t){return e.getY(t,r(this,e))}).attr("width",function(t){return e.getWidth(t,r(this,e))}).attr("height",function(t){return e.getHeight(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))});t.exit().remove()};a.prototype._drawPolygon=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("polygon").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("points",function(t){return e.getPoints(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawPolyline=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("polyline").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("points",function(t){return e.getPoints(t,r(this,e))}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawCircle=function(t,e){var r=this._findObjectInfo;var a={};t.enter().append("circle").classed(e.getId(),true);t.classed("hasTitle",function(t){return e.getTitle(t,r(this,e))?true:false}).attr("filter",function(t){return e.getFilter(t,r(this,e))}).attr("transform",function(t){return e.getTransform(t,r(this,e))}).attr("aria-label",function(t){return e.getAriaLabel(t,r(this,e))}).attr("cx",function(t){return e.getCx(t,r(this,e))}).attr("cy",function(t){return e.getCy(t,r(this,e))}).attr("r",function(t){return e.getR(t,r(this,e))}).each(function(t){a=e.getStyle(t,r(this,e));d3.select(this).style(a)});t.exit().remove()};a.prototype._drawDefinitions=function(t,e){var r=this._findObjectInfo;t.enter().append("defs").classed(e.getId(),true);t.each(function(t,a){jQuery(this).empty();var i=e.getContent(t,r(this));var n="<svg xmlns='"+d3.ns.prefix.svg+"'>"+i+"</svg>";this.appendChild(jQuery(n)[0].firstChild)});t.exit().remove()};a.prototype._drawInsertTitle=function(t,e){var r=this._findObjectInfo;var a=t.selectAll("."+e.getId()+".hasTitle");a.select("title").remove();a.insert("title",":first-child").each(function(t){var a=d3.select(this);a.selectAll("tspan").remove();a.text(e.getTitle(t,r(this,e)))})};a.prototype._findObjectInfo=function(t,e,r){var a=t;while(!a.__data__.objectInfoRef){a=a.parentNode}return a.__data__.objectInfoRef};a.prototype.addDataAttributes=function(t){t.attr("data-sap-gantt-shape-id",function(t){return t.__id__})};a.prototype.destroySvg=function(t,e){};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/TimePeriodZoomRectangle", ["sap/gantt/drawer/Drawer","sap/ui/thirdparty/d3"],function(t){"use strict";var e=t.extend("sap.gantt.drawer.TimePeriodZoomRectangle");e.prototype.drawSvg=function(t,e){t.selectAll(".sapGanttChartTimePeriodZoomRectangle").remove();t.append("rect").classed("sapGanttChartTimePeriodZoomRectangle",true).attr("x",function(){return e}).attr("y",function(){return 0}).attr("height",function(){return jQuery(t.node()).height()})};e.prototype.updateSvg=function(t,e,r){t.selectAll(".sapGanttChartTimePeriodZoomRectangle").attr("x",function(){return e}).attr("width",function(){return r-e})};e.prototype.destroySvg=function(t){t.selectAll(".sapGanttChartTimePeriodZoomRectangle").remove()};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/drawer/VerticalLine", ["./Drawer","sap/ui/thirdparty/d3"],function(t){"use strict";var e=t.extend("sap.gantt.drawer.VerticalLine",{constructor:function(t){this.oAxisTime=t}});e.prototype.drawSvg=function(t){var e=jQuery(t.node()),r=e.width(),a=Math.max.apply(null,e.map(function(){return jQuery(this).height()}).get());var i=this.oAxisTime.getZoomStrategy();var n=this.oAxisTime.getTickTimeIntervalLabel(i.getTimeLineOption(),null,[0,r]);var s=n[1];var l="";for(var o=0;o<s.length;o++){l+=" M"+" "+(s[o].value-1/2)+" 0"+" L"+" "+(s[o].value-1/2)+" "+a}if(l){t.selectAll(".sapGanttChartVerticalLine").remove();t.insert("g",":first-child").classed("sapGanttChartVerticalLine",true).append("path").attr("d",l)}};e.prototype.destroySvg=function(t){if(t){t.selectAll(".sapGanttChartVerticalLine").remove()}};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/AutoScrollHandler", ["sap/ui/thirdparty/jquery","sap/ui/core/Element","sap/ui/core/Core"],function(jQuery,t,e){"use strict";var o=t.extend("sap.gantt.eventHandler.AutoScrollHandler",{metadata:{properties:{horizontalThreshold:{type:"int",defaultValue:50},verticalThreshold:{type:"int",defaultValue:50},horizontalScrollStep:{type:"int",defaultValue:50},verticalScrollStep:{type:"int",defaultValue:50},delayInMillis:{type:"int",defaultValue:200}}}});o.prototype.autoScroll=function(t,o){this.stop();var l=jQuery(t.getDomSelectorById("svg-ctn"));var r=t._oTT.$(sap.ui.table.SharedDomRef.HorizontalScrollBar);var i=t._oTT.$(sap.ui.table.SharedDomRef.VerticalScrollBar);if(l.offset()){var a=l.offset().left;var s=a+l.width();var n=l.offset().top;var c=l.offset().top+l.height();var u=this.getHorizontalThreshold();var f=this.getVerticalThreshold();var p=this.getHorizontalScrollStep();var h=this.getVerticalScrollStep();var g=this.getDelayInMillis();var v=this;if(o.pageX-a>0&&o.pageX-a<u){t._destroyCursorLine();this._iAutoScrollTimeout=window.setInterval(function(){if(e.getConfiguration().getRTL()){r.scrollLeftRTL(r.scrollLeftRTL()-p)}else{r.scrollLeft(r.scrollLeft()-p)}v.fireAutoScrollingEvent(t,"scrollLeft")},g,this);return"scrollLeft"}else if(s-o.pageX>0&&s-o.pageX<u){t._destroyCursorLine();this._iAutoScrollTimeout=window.setInterval(function(){if(e.getConfiguration().getRTL()){r.scrollLeftRTL(r.scrollLeftRTL()+p)}else{r.scrollLeft(r.scrollLeft()+p)}v.fireAutoScrollingEvent(t,"scrollRight")},g,this);return"scrollRight"}else if(o.pageY-n>0&&o.pageY-n<f-4){this._iAutoScrollTimeout=window.setInterval(function(){i.scrollTop(i.scrollTop()-h);v.fireAutoScrollingEvent(t,"scrollTop")},g,this);return"scrollTop"}else if(c-o.pageY>0&&c-o.pageY<f+4){this._iAutoScrollTimeout=window.setInterval(function(){i.scrollTop(i.scrollTop()+h);v.fireAutoScrollingEvent(t,"scrollBottom")},g,this);return"scrollBottom"}}};o.prototype.fireAutoScrollingEvent=function(t,e){t.fireEvent("_autoScrolling",{direction:e})};o.prototype.stop=function(){window.clearInterval(this._iAutoScrollTimeout)};return o},true);
sap.ui.predefine("sap/gantt/eventHandler/BirdEyeHandler", ["sap/ui/base/Object","sap/gantt/misc/Format","sap/gantt/config/TimeHorizon"],function(t,e,a){"use strict";var i=t.extend("sap.gantt.eventHandler.BirdEyeHandler",{constructor:function(e){t.call(this);this._oSourceChart=e;this._sStartTimeStamp=0;this._sEndTimeStamp=0}});i.prototype.calculateLargestVisibleHorizon=function(t,i){if(!t||t.length===0){return null}var r=this;for(var n=0;n<t.length;n++){var s=t[n];var m=s.dataSet;if(m&&m.length>0){for(var o=0;o<m.length;o++){r._collectShapeTimeRange(s,m[o])}}}if(!this._sStartTimeStamp&&!this._sEndTimeStamp){return null}var p=e.abapTimestampToDate(this._sStartTimeStamp).getTime();var S=e.abapTimestampToDate(this._sEndTimeStamp).getTime();var T=e.abapTimestampToDate(this._sStartTimeStamp);var h=e.abapTimestampToDate(this._sEndTimeStamp);if(!i){var l=this._oSourceChart.getVisibleWidth();var f=(S-p)/l;T=new Date(p-f*5);h=new Date(S+f*5)}var g=new a({startTime:T,endTime:h});this._sStartTimeStamp=0;this._sEndTimeStamp=0;return g};i.prototype._collectShapeTimeRange=function(t,e,a,i){var r=this;if(e){var n=[];if(e.shapeData){i=e.objectInfoRef;n=n.concat(e.shapeData)}else if(a&&e[a]){n=n.concat(e[a])}else if(e){n=n.concat(e)}if(t.filterValidData&&n.length>0){n=t.filterValidData(n,i)}if(t.getTag()=="g"&&n.length>0){var s=t.getShapes();if(s&&s.length>0){for(var m=0;m<s.length;m++){for(var o=0;o<n.length;o++){r._collectShapeTimeRange(s[m],n[o],s[m].mShapeConfig.getShapeDataName(),i)}}}}else if(t.mShapeConfig.getCountInBirdEye()){var p=t.getTime||t.getEndTime?true:false;if(n.length>0&&p){n.forEach(function(e){var a=t.getTime(e,i);var n=t.getEndTime(e,i);r._sStartTimeStamp=a&&(!r._sStartTimeStamp||a<r._sStartTimeStamp)?a:r._sStartTimeStamp;if(n){r._sEndTimeStamp=n&&(!r._sEndTimeStamp||n>r._sEndTimeStamp)?n:r._sEndTimeStamp}else{r._sEndTimeStamp=a&&(!r._sEndTimeStamp||a>r._sEndTimeStamp)?a:r._sEndTimeStamp}})}}}};i.prototype.doBirdEye=function(t,e){if(this._oSourceChart){var a=this._oSourceChart;var i=a.getLargestHorizonByDataRange(t,e);if(i){var r=a.getAxisTimeStrategy();if(typeof r.setVisibleHorizon==="function"){r.setVisibleHorizon(i)}else{r._setVisibleHorizon(i)}}}};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/MouseWheelHandler", ["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/base/Object"],function(jQuery,e,t){"use strict";var o=t.extend("sap.gantt.eventHandler.MouseWheelHandler",{constructor:function(e){t.call(this);this._oSourceChart=e;this._lastCalledMouseWheelZoom=0;this._iMouseWheelZoomTimer=undefined}});o.prototype.handleEvent=function(e,t){var o=e.originalEvent;var r=o.shiftKey;var i=o.ctrlKey;var a=this._getScrollDelta(o);var l=false;if(r){if(i){l=this._handleZoom(e,a,t)}else{this._handleHScroll(e,a)}}else{this._handleVScroll(e,a)}return l};o.prototype._getScrollDelta=function(t){var o=0;if(e.browser.firefox){o=t.detail}else{o=t.deltaY||t.deltaX}return o};o.prototype._handleZoom=function(e,t,o){var r=this._oSourceChart.getAxisTimeStrategy();var i=false;if(r.getMouseWheelZoomType()!==sap.gantt.MouseWheelZoomType.None){var a=t<0;if(!a&&r.getZoomLevel()>0||a&&r.getZoomLevel()<r.getZoomLevels()-1){if(this._oSourceChart._destroyCursorLine){this._oSourceChart._destroyCursorLine()}var l=!this._iMouseWheelZoomTimer&&Date.now()-this._lastCalledMouseWheelZoom>100?0:700;if(l===0){this._updateVisibleHorizon(e,t,o)}else{this._iMouseWheelZoomTimer=this._iMouseWheelZoomTimer||window.setTimeout(this._updateVisibleHorizon.bind(this),l,e,t,o)}i=true}this._preventBubbleAndDefault(e)}return i};o.prototype._updateVisibleHorizon=function(t,o,r){this._lastCalledMouseWheelZoom=Date.now();var i=this._oSourceChart.getAxisTimeStrategy();var a=t.originalEvent;var l=jQuery(this._oSourceChart.getDomSelectorById("svg"));if(l){var s=(e.browser.edge?a.clientX:a.pageX)-l.offset().left||a.offsetX;var n=i.getAxisTime().viewToTime(s);i.updateVisibleHorizonOnMouseWheelZoom(n,o,t,r)}this._iMouseWheelZoomTimer=undefined};o.prototype._handleHScroll=function(e,t){var o=this._oSourceChart.getTTHsbDom();var r=false;var i=t>0;if(o){if(i){r=Math.round(o.scrollLeft)===o.scrollWidth-o.clientWidth}else{r=o.scrollLeft===0}if(!r){this._preventBubbleAndDefault(e);o.scrollLeft+=t}}};o.prototype._handleVScroll=function(e,t){var o=this._oSourceChart.getTTVsbDom();var r=false;var i=t>0;if(o){if(i){r=Math.round(o.scrollTop)===o.scrollHeight-o.clientHeight}else{r=o.scrollTop===0}if(!r){this._preventBubbleAndDefault(e);var a=t/this._oSourceChart.getBaseRowHeight();if(a>1){a=Math.floor(a)}o.scrollTop+=a*this._getScrollingPixelsForRow()}}};o.prototype._getScrollingPixelsForRow=function(){var e=this._oSourceChart._oTT;if(e){var t=e.getVisibleRowCount();var o=Math.max(1,t-e.getFixedRowCount()-e.getFixedBottomRowCount());var r=this._oSourceChart.getBaseRowHeight();var i=o*r;var a=e.getBinding("rows").getLength();var l=Math.max(a,t+1);var s=l*r;var n=Math.max(1,s-i-this._getRowHeightsDelta());var h;if(t>a){h=a}else{h=Math.max(0,a-t-1)}return Math.ceil(n/Math.max(1,h))}return 0};o.prototype._getRowHeightsDelta=function(){var e=this._oSourceChart._oTT;if(e){var t=e.getBinding("rows").getLength();var o=e.getVisibleRowCount();var r=this._oSourceChart.getBaseRowHeight()*o;var i=this._oSourceChart._getRowHeights();if(o>t){i=i.slice(0,t)}var a=i.reduce(function(e,t){return e+t},0)-r;if(a>0){a=Math.ceil(a)}return Math.max(0,a)}return 0};o.prototype._preventBubbleAndDefault=function(e){e.preventDefault();e.stopPropagation()};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/ShapeHoverHandler", ["sap/ui/thirdparty/jquery","sap/ui/base/Object"],function(jQuery,e){"use strict";var t=e.extend("sap.gantt.eventHandler.ShapeHoverHandler",{constructor:function(t){e.call(this);this._oSourceChart=t;this._oShapeManager=t._oShapeManager;this._oLastHoverShapeUID=undefined;this._oLastHoverShapeData=undefined;this._sHoverDelayCall=undefined;this._iHoverDelayInMillionsecond=500}});t.prototype.handleShapeHover=function(e,t){if(this._oSourceChart._bDragStart){if(t&&this._oLastHoverShapeUID!==undefined){window.clearTimeout(this._sHoverDelayCall);this.fireMouseLeave(t)}}else{if(t){var a=t.target.getAttribute("class")?t.target.getAttribute("class").split(" ")[0]:undefined;window.clearTimeout(this._sHoverDelayCall);this._sHoverDelayCall=window.setTimeout(this.fireHoverEvent.bind(this),this._iHoverDelayInMillionsecond,e,a,t)}}};t.prototype.fireHoverEvent=function(e,t,a){if(!e&&this._oLastHoverShapeUID!==undefined){this.fireMouseLeave(a)}else if(this._oShapeManager.isShapeHoverable(e,t)){if(this._oLastHoverShapeUID!==e.uid){if(this._oLastHoverShapeUID!==undefined){this.fireMouseLeave(a)}this.fireMouseEnter(e,a)}}else{if(this._oLastHoverShapeUID!==undefined){this.fireMouseLeave(a)}}};t.prototype.fireMouseEnter=function(e,t){this._oLastHoverShapeUID=e.uid;this._oLastHoverShapeData=e;this._oSourceChart.fireShapeMouseEnter({shapeData:e,pageX:t.pageX,pageY:t.pageY,originEvent:t})};t.prototype.fireMouseLeave=function(e){this._oSourceChart.fireShapeMouseLeave({shapeData:this._oLastHoverShapeData,originEvent:e});this._oLastHoverShapeUID=undefined;this._oLastHoverShapeData=undefined};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/ShapeResizeHandler", ["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/base/Object","sap/gantt/misc/ShapeManager","sap/gantt/misc/Format","sap/ui/core/Core","sap/gantt/misc/Utility","sap/gantt/drawer/ShapeInRow"],function(jQuery,e,t,i,a,s,o,r){"use strict";var n=t.extend("sap.gantt.eventHandler.ShapeResizeHandler",{constructor:function(e){t.call(this);this._oSourceChart=e;this._bResizing=false;this._oResizingData=undefined;this._oShapeManager=e._oShapeManager;this._oSourceChartId=this._oSourceChart.getId();this._oShapeInRowDrawer=new r;this._DEFAULT_RESIZE_CURSOR_SHOWING_THRESHOLD=1;this._DEFAULT_MOUSE_MOVE_PIXEL=3;this._TIMESTAMP_START_TIME_KEY="time";this._TIMESTAMP_END_TIME_KEY="endTime"}});n.prototype.getIsResizing=function(){return this._bResizing};n.prototype.getResizingData=function(){return this._oResizingData};n.prototype.handleShapeResize=function(e){if(e.button===0){var t=d3.select(e.target).datum();if(e.target.getAttribute("class")&&t){var i=e.target.getAttribute("class").split(" ")[0];if(d3.select(e.target).classed("sapUiShapeResizingCursor")&&this._oShapeManager.isShapeResizable(t,i)&&this._oShapeManager.isShapeDuration(t,i)){this._handleShapeResizeStart(e);this._preventBubbleAndDefault(e)}}}};n.prototype._handleShapeResizeStart=function(e){var t=jQuery(this._oSourceChart.getDomSelectorById("svg"));var i=d3.select(e.target).datum();if(i){var a=o.getRowDatumByShapeUid(i.uid,this._oSourceChart.getId());if(a){a.y=this._oSourceChart._oAxisOrdinal.elementToView(a.uid);var r=e.pageX-t.offset().left||e.offsetX;var n=this._getTopShapeInstance(i,e.target.getAttribute("class").split(" ")[0]);var h,p;if(n){if(s.getConfiguration().getRTL()===true){h=n.getEndTime(i);p=n.getTime(i)}else{h=n.getTime(i);p=n.getEndTime(i)}}var g={shapeData:i,objectInfoRef:a};this._oResizingData={oShapeData:g,aOldTime:[h,p],resizeStartPointX:r,topShapeInstance:n};jQuery(document.body).unbind("mousemove.shapeResizing");jQuery(document.body).unbind("mouseup.shapeResizing");jQuery(document.body).bind("mousemove.shapeResizing",this._handleShapeResizing.bind(this));jQuery(document.body).bind("mouseup.shapeResizing",this._handleShapeResizeEnd.bind(this))}}};n.prototype.checkShapeResizable=function(e,t,i){if(e&&t&&i){jQuery(t).removeClass("sapUiShapeResizingCursor");var s=t.getAttribute("class")?t.getAttribute("class").split(" ")[0]:undefined;if(!s||s.indexOf("__")<0){return}if(this._oShapeManager.isShapeResizable(e,s)){var o,r,n;var h=this._getShapeInstance(e,s);if(h){var p=h.getTime(e);var g=h.getEndTime(e);r=this._oSourceChart.getAxisTime().timeToView(a.abapTimestampToDate(p));n=this._oSourceChart.getAxisTime().timeToView(a.abapTimestampToDate(g));o=Math.abs(n-i)<Math.abs(r-i)?Math.abs(n-i):Math.abs(r-i)}if(o<=this._DEFAULT_RESIZE_CURSOR_SHOWING_THRESHOLD&&!this._oSourceChart._bDragging){jQuery(t).addClass("sapUiShapeResizingCursor")}else{jQuery(t).removeClass("sapUiShapeResizingCursor")}}}};n.prototype._preventBubbleAndDefault=function(e){e.preventDefault();e.stopPropagation()};n.prototype._handleShapeResizing=function(t){if(!e.support.touch&&(t.button!==0||t.buttons===0||t.ctrlKey)){return false}var i=jQuery(this._oSourceChart.getDomSelectorById("svg"));var a=Math.abs((t.pageX-i.offset().left||t.offsetX)-this._oResizingData.resizeStartPointX);if(a>this._DEFAULT_MOUSE_MOVE_PIXEL){if(this._oResizingData!==undefined){this._updateResizingShapeData(t);this._bResizing=true;this._oSourceChart._oAutoScrollHandler.autoScroll(this._oSourceChart,t)}}};n.prototype._handleShapeResizingWhenAutoScroll=function(){if(this.getIsResizing()){this._updateResizingShapeData(this._oLastEvent)}};n.prototype._updateResizingShapeData=function(e){this._oLastEvent=e;var t=jQuery(this._oSourceChart.getDomSelectorById("svg"));var i=e.pageX-t.offset().left||e.offsetX;var a=this._calculateResizedNewTime(i);this._drawResizingShadow(a)};n.prototype._parseShapeTimeProperty=function(e,t){var i;if(e.mShapeConfig.hasShapeProperty(t)){var a=e.mShapeConfig.getShapeProperty(t);if(typeof a==="string"&&a.charAt(0)==="{"&&a.charAt(a.length-1)==="}"){i=a.substring(1,a.length-1)}}return i};n.prototype._drawResizingShadow=function(e){var t=d3.select(this._oSourceChart.getDomSelectorById("svg"));if(e){var i=jQuery.extend(true,{},this._oResizingData.oShapeData.shapeData);var a=this._oResizingData.topShapeInstance.getAggregation("resizeShadowShape");var o=this._parseShapeTimeProperty(a,this._TIMESTAMP_START_TIME_KEY);var r=this._parseShapeTimeProperty(a,this._TIMESTAMP_END_TIME_KEY);var n,h;if(s.getConfiguration().getRTL()===true){n=e[1];h=e[0]}else{n=e[0];h=e[1]}if(i[o]){i[o]=n}if(i[r]){i[r]=h}var p={objectInfoRef:this._oResizingData.oShapeData.objectInfoRef};p.shapeData=i;a.dataSet=[p];this._oShapeInRowDrawer.drawResizeShadow(t,a,this._oSourceChart.getAxisTime(),this._oSourceChart._oAxisOrdinal,this._oSourceChart._oStatusSet)}};n.prototype._calculateResizedNewTime=function(e){var t=[];var i,s;var o=this._oResizingData.aOldTime[0];var r=this._oResizingData.aOldTime[1];var n=this._oSourceChart.getAxisTime().timeToView(a.abapTimestampToDate(o));var h=this._oSourceChart.getAxisTime().timeToView(a.abapTimestampToDate(r));var p;if(this._oResizingData.isLeftSideClick!==undefined&&this._oResizingData.isLeftSideClick!==null){p=this._oResizingData.isLeftSideClick}else{p=Math.abs(this._oResizingData.resizeStartPointX-n)<Math.abs(this._oResizingData.resizeStartPointX-h)?true:false;this._oResizingData.isLeftSideClick=p}if(p){s=r;if(e>=h){i=r}else{i=a.dateToAbapTimestamp(this._oSourceChart.getAxisTime().viewToTime(e))}}else{i=o;if(e<=n){s=o}else{s=a.dateToAbapTimestamp(this._oSourceChart.getAxisTime().viewToTime(e))}}t=[i,s];return t};n.prototype._getShapeInstance=function(e,t){var i=this._oShapeManager.getShapeInstance(e,t);if(i){if(i.getId()===t){return i}else if(i.getShapes()){var a=i.getShapes();for(var o=0;o<a.length;o++){if(a[o].getId()===t){return a[o]}}}}else{var r=s.byId(t).getParent();if(r){return r}}return undefined};n.prototype._getTopShapeInstance=function(e,t){var i=this._oShapeManager.getShapeInstance(e,t);if(i){return i}else{var a=s.byId(t).getParent();if(a){return a}}return undefined};n.prototype._handleShapeResizeEnd=function(e){this._oSourceChart._oAutoScrollHandler.stop();var t=d3.selectAll(".resizingShadow");if(!t.empty()){t.remove()}if(this._bResizing&&this._oResizingData!==undefined){this._collectResizingShapeData(e);this._oSourceChart.fireShapeResizeEnd({shapeUid:this._oResizingData.oShapeData.shapeData.uid,rowObject:this._oResizingData.oShapeData.objectInfoRef,oldTime:this._oResizingData.aOldTime,newTime:this._oResizingData.aNewTime})}jQuery(document.body).unbind("mousemove.shapeResizing");jQuery(document.body).unbind("mouseup.shapeResizing");jQuery(e.target).removeClass("sapUiShapeResizingCursor");this._bResizing=false;this._oResizingData=undefined;this._oLastEvent=undefined};n.prototype._collectResizingShapeData=function(e){var t=jQuery(this._oSourceChart.getDomSelectorById("svg"));var i=e.pageX-t.offset().left||e.offsetX;var a=this._calculateResizedNewTime(i);var o,r;if(s.getConfiguration().getRTL()===true){o=a[1];r=a[0]}else{o=a[0];r=a[1]}this._oResizingData.aNewTime=[o,r]};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/TimePeriodZoomHandler", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/gantt/misc/Format","sap/gantt/config/TimeHorizon","sap/gantt/drawer/TimePeriodZoomRectangle","sap/ui/core/library","sap/gantt/misc/Utility"],function(jQuery,e,t,i,o,r,a){"use strict";var s=r.Orientation;var n=e.extend("sap.gantt.eventHandler.TimePeriodZoomHandler",{constructor:function(t){e.call(this);this._oSourceChart=t;this._oTimePeriodZoomRectangleDrawer=new o;this._bActive=false;this._bLocked=false;this._bMouseOnSvg=false;this._bEnableSetVisibleHorizon=false;this._sAutoScrollDirection=undefined;this._oLastEvent=undefined}});n.prototype.activate=function(e){this._bActive=true;var t=jQuery(this._oSourceChart.getDomSelectorById("svg"));t.css("cursor","crosshair");if(!e){this.fireActiveStatusChangeEvent(this._bActive)}};n.prototype.deactivate=function(e){this._bActive=false;var t=jQuery(this._oSourceChart.getDomSelectorById("svg"));t.css("cursor","auto");if(!e){this.fireActiveStatusChangeEvent(this._bActive)}};n.prototype.invertActiveStatus=function(){if(this._bActive){this.deactivate()}else{this.activate()}};n.prototype.fireActiveStatusChangeEvent=function(e){this._oSourceChart.fireEvent("_timePeriodZoomStatusChange",{isActive:e})};n.prototype.isTimePeriodZoomEnabled=function(){var e=this._oSourceChart.getAxisTimeStrategy();return e.isTimePeriodZoomEnabled()&&this._bMouseOnSvg};n.prototype.isActive=function(){return this._bActive};n.prototype.handleDragStart=function(e,t){var i=this._oSourceChart;this._bLocked=true;this._bEnableSetVisibleHorizon=true;this.oStartEvent=e;this.oStartTime=this._caculateEventTime(e);this.createRectangle(this.oStartTime);var o=jQuery(i.getDomSelectorById("svg"));o.unbind("mousemove.timePeriodZoomDragDrop");jQuery(document.body).unbind("mouseup.timePeriodZoomDragDrop");i.detachHorizontalScroll(this.handleAutoScroll,this);o.bind("mousemove.timePeriodZoomDragDrop",this.handleDragging.bind(this));jQuery(document.body).bind("mouseup.timePeriodZoomDragDrop",this.handleDragEnd.bind(this));i.attachHorizontalScroll(this.handleAutoScroll,this);if(!t){this._bMouseOnSvg=true;i.fireEvent("_timePeriodZoomOperation",{type:"dragStart",dragStartTime:this.oStartTime,originalEvent:e})}};n.prototype.createRectangle=function(e){var t=this._oSourceChart;var i=t.getAxisTime().timeToView(e);var o=d3.select(t.getDomSelectorById("svg"));this._oTimePeriodZoomRectangleDrawer.drawSvg(o,i)};n.prototype.handleDragging=function(e,t){var i=this._oSourceChart;this._oLastEvent=e;var o=this._caculateEventTime(e);this.updateRectangle(this.oStartTime,o);if(!t){var r=i._handleAutoScroll(e);if(r){this._sAutoScrollDirection=r}i.fireEvent("_timePeriodZoomOperation",{type:"dragging",dragStartTime:this.oStartTime,draggingTime:o,originalEvent:e})}};n.prototype.updateRectangle=function(e,t){var i=this._oSourceChart;var o=i.getAxisTime().timeToView(e);var r=i.getAxisTime().timeToView(t);var a=d3.select(i.getDomSelectorById("svg"));if(r>o){this._oTimePeriodZoomRectangleDrawer.updateSvg(a,o,r)}else{this._oTimePeriodZoomRectangleDrawer.updateSvg(a,r,o)}};n.prototype.handleDragEnd=function(e,t){var o=this._oSourceChart;o._oAutoScrollHandler.stop();this._bLocked=false;this.deactivate();this._sAutoScrollDirection=undefined;this.destoryRectangle();var r;if(this._bEnableSetVisibleHorizon){var a=o.getAxisTime().timeToView(this.oStartTime);var s=this._caculateXPosition(e);r=this._caculateEventTime(e);var n=r;var l=5;if(Math.abs(s-a)>l){var c=this.oStartTime;if(n.getTime()<c.getTime()){var m=c;c=n;n=m}var h=new i({startTime:c,endTime:n});o.syncVisibleHorizon(h)}}var g=jQuery(o.getDomSelectorById("svg"));g.unbind("mousemove.timePeriodZoomDragDrop");jQuery(document.body).unbind("mouseup.timePeriodZoomDragDrop");o.detachHorizontalScroll(this.handleAutoScroll,this);if(!t){var d=o.getVisibleWidth();o.fireEvent("_timePeriodZoomOperation",{type:"dragEnd",dragStartTime:this.oStartTime,dragEndTime:r,visibleWidth:d,originalEvent:e});this.fireActiveStatusChangeEvent(this._bActive)}};n.prototype.destoryRectangle=function(){var e=this._oSourceChart;var t=d3.select(e.getDomSelectorById("svg"));this._oTimePeriodZoomRectangleDrawer.destroySvg(t)};n.prototype.handleAutoScroll=function(e){if(this._bMouseOnSvg){var i=this._oSourceChart;var o=e.getParameters();var r;if(this._sAutoScrollDirection==="scrollLeft"){var a=t.abapTimestampToDate(o.startTime);r=a.getTime()-this.oStartTime.getTime()}else if(this._sAutoScrollDirection==="scrollRight"){var s=t.abapTimestampToDate(o.endTime);r=s.getTime()-this.oStartTime.getTime()}i.fireEvent("_timePeriodZoomOperation",{type:"autoScroll",timeBias:r,originalEvent:e})}};n.prototype.attachEvents=function(){var e=jQuery(this._oSourceChart.getDomSelectorById("svg"));e.bind("mouseenter.timePeriodZoomDragDrop",this.handleMouseEnter.bind(this));e.bind("mouseleave.timePeriodZoomDragDrop",this.handleMouseLeave.bind(this))};n.prototype.detachEvents=function(){var e=jQuery(this._oSourceChart.getDomSelectorById("svg"));e.unbind("mouseenter.timePeriodZoomDragDrop");e.unbind("mouseleave.timePeriodZoomDragDrop")};n.prototype.handleMouseEnter=function(e){this._bMouseOnSvg=true;this._bLocked=true;this.setEnableSetVisibleHorizon(true)};n.prototype.handleMouseLeave=function(e){this._bMouseOnSvg=false;this._oSourceChart._oAutoScrollHandler.stop();this._bLocked=false;this.setEnableSetVisibleHorizon(false)};n.prototype.handleAutoScrolling=function(e){if(e.getParameter("direction")==="scrollLeft"||e.getParameter("direction")==="scrollRight"){var t=this._oSourceChart;var i=this._caculateEventTime(this._oLastEvent);this.updateRectangle(this.oStartTime,i);t.fireEvent("_timePeriodZoomOperation",{type:"dragging",dragStartTime:this.oStartTime,draggingTime:i,originalEvent:this._oLastEvent})}};n.prototype.setEnableSetVisibleHorizon=function(e,t){this._bEnableSetVisibleHorizon=e;if(!t){var i=this._oSourceChart;i.fireEvent("_timePeriodZoomOperation",{type:"enableSetVisibleHorizon",enable:e})}};n.prototype.calculateTargetVisibleHorizonByTimeBias=function(e){var o;var r;if(e!==undefined){var a=this._oSourceChart;var s=a.getAxisTimeStrategy().getTotalHorizon();r=new Date;r.setTime(this.oStartTime.getTime()+e);if(e<0){var n=t.abapTimestampToDate(s.getStartTime());if(r.getTime()<n.getTime()){r=n;this.oStartTime.setTime(r.getTime()-e)}o=new i({startTime:r})}else{var l=t.abapTimestampToDate(s.getEndTime());if(r.getTime()>l.getTime()){r=l;this.oStartTime.setTime(r.getTime()-e)}o=new i({startTime:undefined,endTime:r})}}return o};n.prototype.calculateTargetVisibleHorizon=function(e,i){var o;if(e.dragEndTime){var r=this._oSourceChart;var s=r.getAxisTimeStrategy();var n=s.getVisibleHorizon();var l=r.getVisibleWidth();var c=e.dragStartTime.getTime();var m=e.dragEndTime.getTime();var h;if(i){h=c<m?e.dragStartTime:e.dragEndTime}else{h=t.abapTimestampToDate(s.getVisibleHorizon().getStartTime())}o=a.calculateHorizonByWidth(n,e.visibleWidth,l,h)}return o};n.prototype.syncTimePeriodZoomOperation=function(e,t,i){var o=this._oSourceChart;var r=e.getParameters();var a;if(i===s.Vertical){if(r.type==="dragStart"){this.handleDragStart(r.originalEvent,true)}else if(r.type==="dragging"){this.handleDragging(r.originalEvent,true)}else if(r.type==="dragEnd"){this.handleDragEnd(r.originalEvent,true)}else if(r.type==="enableSetVisibleHorizon"){this.setEnableSetVisibleHorizon(r.enable,true)}else if(r.type==="autoScroll"){if(!t){a=this.calculateTargetVisibleHorizonByTimeBias(r.timeBias);if(a){o.syncVisibleHorizon(a)}}}}else if(i===s.Horizontal){if(r.type==="dragStart"&&t){this.createRectangle(r.dragStartTime)}else if(r.type==="dragging"&&t){this.updateRectangle(r.dragStartTime,r.draggingTime)}else if(r.type==="dragEnd"){if(t){this.destoryRectangle()}a=this.calculateTargetVisibleHorizon(r,t);if(a){o.syncVisibleHorizon(a)}}}};n.prototype._caculateXPosition=function(e){var t=this._oSourceChart;var i=t._getMouseXPos(e);var o=jQuery(t.getDomSelectorById("svg"));var r=i;if(o.offset()){r=i-o.offset().left||e.offsetX}return r};n.prototype._caculateEventTime=function(e){var t=this._oSourceChart;var i=this._caculateXPosition(e);return t.getAxisTime().viewToTime(i)};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/eventHandler/TimePopoverHandler", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/core/Core","sap/gantt/misc/Format"],function(jQuery,e,t,o){"use strict";var i=e.extend("sap.gantt.eventHandler.TimePopoverHandler",{constructor:function(t){e.call(this);this._bSelectShape=false;this._bDragShape=false;this._iOffsetX=0;this._iOffsetY=28;this._oSourceChart=t;this._oTimePopoverModel=undefined}});i.prototype.handleTimePopover=function(e){this._handleTimePopoverDragStart(e)};i.prototype._handleTimePopoverDragStart=function(e){this._bSelectShape=false;this._bDragShape=false;this._calcPositionGap();jQuery(document.body).unbind("mousemove.shapeDragDrop");jQuery(document).unbind("mouseup.shapeDragDrop");jQuery(document.body).bind("mousemove.shapeDragDrop",this._handleTimePopoverDragging.bind(this));jQuery(document).bind("mouseup.shapeDragDrop",this._handleTimePopoverEnd.bind(this))};i.prototype._calcPositionGap=function(e){var o;var i=t.getConfiguration().getRTL();if(this._oSourceChart.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.Start){this._iOffsetX=i?this._oSourceChart._oDraggingData.dragStartPoint.shapeWidth:-this._oSourceChart._oDraggingData.dragStartPoint.shapeWidth}else if(this._oSourceChart.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.None){o=i?this._oSourceChart._oDraggingData.dragStartPoint.x-this._oSourceChart._oDraggingData.dragStartPoint.shapeX:this._oSourceChart._oDraggingData.dragStartPoint.x-this._oSourceChart._oDraggingData.dragStartPoint.shapeX-this._oSourceChart._oDraggingData.dragStartPoint.shapeWidth;this._iOffsetX=Math.ceil(o)}else if(this._oSourceChart.getGhostAlignment()===sap.gantt.dragdrop.GhostAlignment.End){this._iOffsetX=0}var a=this._oSourceChart.getBaseRowHeight();var s=this._oSourceChart._oDraggingData.groupDom.getBoundingClientRect();if(s){a+=s.height}this._iOffsetY=Math.ceil(a)};i.prototype._handleTimePopoverDragging=function(e){var t=d3.select("#dragDropShadow");var o=t[0];if(this._oSourceChart.getEnableShapeTimeDisplay()&&o[0]){var i=this._getPopoverPosition(e);this._displayTimePopover(i,o[0])}};i.prototype._displayTimePopover=function(e,t){if(!this._isDraggingShape()){this._changeDraggingStatus()}else if(!this._existsPopover()){this._buildPopover(e);this.oTimePopover.openBy(t)}else{if(this.oTimePopover.isOpen()){this._updatePopover(e)}else{this.oTimePopover.destroy();this.oTimePopover=undefined;this._buildPopover(e);this.oTimePopover.openBy(t)}}};i.prototype._buildPopover=function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt").getText("GNT_CURRENT_START");var o=sap.ui.getCore().getLibraryResourceBundle("sap.gantt").getText("GNT_CURRENT_END");this.oTimePopover=new sap.m.ResponsivePopover({showArrow:false,showHeader:false,offsetX:"{time>/offsetX}",offsetY:"{time>/offsetY}",placement:"{time>/placement}",content:[new sap.m.FlexBox({alignItems:"Center",items:[new sap.m.Panel({content:[new sap.m.FlexBox({alignItems:"Center",justifyContent:"End",items:[new sap.m.Label({text:t})]}).addStyleClass("sapUiTinyMargin"),new sap.m.FlexBox({alignItems:"Center",justifyContent:"End",items:[new sap.m.Label({text:o})]}).addStyleClass("sapUiTinyMargin")]}).addStyleClass("sapUiNoContentPadding"),new sap.m.Panel({content:[new sap.m.FlexBox({justifyContent:"Start",items:[new sap.m.Label({text:"{time>/startNewDate}"})]}).addStyleClass("sapUiTinyMargin"),new sap.m.FlexBox({justifyContent:"Start",items:[new sap.m.Label({text:"{time>/endNewDate}"})]}).addStyleClass("sapUiTinyMargin")]}).addStyleClass("sapUiNoContentPadding")]})]});this._oTimePopoverModel=new sap.ui.model.json.JSONModel(e);this.oTimePopover.setModel(this._oTimePopoverModel,"time")};i.prototype._updatePopover=function(e){this._oTimePopoverModel=new sap.ui.model.json.JSONModel;this._oTimePopoverModel.setData(e);this.oTimePopover.setModel(this._oTimePopoverModel,"time")};i.prototype._calPopoverPosition=function(e,t){var i=this._oSourceChart.getLocale();var a=o.abapTimestampToTimeLabel(new Date(e),i);var s=o.abapTimestampToTimeLabel(new Date(t),i);var r={startNewDate:a,endNewDate:s,offsetX:this._iOffsetX,offsetY:this._iOffsetY,placement:sap.m.PlacementType.Right};return r};i.prototype._changeDraggingStatus=function(){if(this._bSelectShape){this._bDragShape=true}if(!this._bSelectShape){this._bSelectShape=true}};i.prototype._isDraggingShape=function(){return this._bSelectShape&&this._bDragShape};i.prototype._existsPopover=function(){return this.oTimePopover!==undefined};i.prototype._getPopoverPosition=function(e){this._oSourceChart._collectDraggingShapeData(this._oSourceChart._oDraggingData,e);var t=this._oSourceChart._oDraggingData.targetData;var o=this._calPopoverPosition(t["mouseTimestamp"].startTime,t["mouseTimestamp"].endTime);return o};i.prototype._handleTimePopoverEnd=function(){if(this.oTimePopover){this.oTimePopover.destroy();this.oTimePopover=undefined}jQuery(document.body).unbind("mousemove.shapeDragDrop");jQuery(document.body).unbind("mouseup.shapeDragDrop")};i.prototype.getCurrentPopoverData=function(){return{timePopover:this.oTimePopover,offsetX:this._iOffsetX,offsetY:this._iOffsetY}};i.prototype.setCurrentPopoverData=function(e){if(e){this.oTimePopover=e.timePopover;this._iOffsetX=e.offsetX;this._iOffsetY=e.offsetY}};return i},true);
sap.ui.predefine("sap/gantt/flexibility/simple/AdhocLine.flexibility", ["sap/gantt/utils/GanttFlexibilityUtils"],function(t){"use strict";return{hideControl:"default",unhideControl:"default",moveControls:"default",ganttAdhocLineSettings:t.fnCustomisationChangeHandler("ganttAdhocLineSettings")}},true);
sap.ui.predefine("sap/gantt/flexibility/simple/DeltaLine.flexibility", ["sap/gantt/utils/GanttFlexibilityUtils"],function(t){"use strict";return{hideControl:"default",unhideControl:"default",moveControls:"default",ganttDeltaLineSettings:t.fnCustomisationChangeHandler("ganttDeltaLineSettings")}},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/flexibility/simple/GanttChartContainer.flexibility", ["sap/gantt/utils/GanttFlexibilityUtils"],function(n){"use strict";return{hideControl:"default",unhideControl:"default",moveControls:"default",GanttContainerZoomLevel:{changeHandler:{applyChange:function(n,e,t){var a=t.modifier,r=n.getContent(),i=r["propertyName"],o=r["newValue"],l=r["oldValue"];n.setRevertData(l);if(e.initialSettings){e.initialSettings.zoomLevel=o}a.setPropertyBindingOrProperty(e,i,o);return true},revertChange:function(n,e,t){var a=t.modifier;var r=n.getRevertData();var i=n.getContent(),o=i["propertyName"];if(e.initialSettings){e.initialSettings.zoomLevel=r}a.setPropertyBindingOrProperty(e,o,r);n.resetRevertData();return true},completeChangeContent:function(n,e,t){return},getCondenserInfo:function(n){return{affectedControl:n.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:"GanttContainerZoomLevel"}}},layers:{USER:true}},GanttContainerEnableTimeScrollSync:n.fnChangeHandler("GanttContainerEnableTimeScrollSync"),GanttContainerEnableCursorLine:n.fnChangeHandler("GanttContainerEnableCursorLine"),GanttContainerEnableNowLine:n.fnChangeHandler("GanttContainerEnableNowLine"),GanttContainerEnableVerticalLine:n.fnChangeHandler("GanttContainerEnableVerticalLine"),GanttContainerEnableAdhocLine:n.fnChangeHandler("GanttContainerEnableAdhocLine"),GanttContainerEnableDeltaLine:n.fnChangeHandler("GanttContainerEnableDeltaLine"),GanttContainerEnableNonWorkingTime:n.fnChangeHandler("GanttContainerEnableNonWorkingTime"),GanttContainerDisplayType:n.fnChangeHandler("GanttContainerDisplayType"),GanttContainerEnableStatusBar:n.fnChangeHandler("GanttContainerEnableStatusBar"),GanttContainerCustom:{changeHandler:{applyChange:function(n,e,t){e.getVariantHandler().apply(n,e,t);e.getToolbar().updateCustomSettingsConfig();return true},revertChange:function(n,e,t){e.getVariantHandler().revert(n,e,t);e.getToolbar().updateCustomSettingsConfig();return true},completeChangeContent:function(n,e,t){var a=e.content.dependentControls;if(a.length>0){a.forEach(function(e){n.addDependentControl(e,e.toUpperCase(),t)})}return},getCondenserInfo:function(n){return{affectedControl:n.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:"GanttContainerCustom"}}},layers:{USER:true}},ganttChartContainerSettings:n.fnCustomisationChangeHandler("ganttChartContainerSettings")}},true);
sap.ui.predefine("sap/gantt/flexibility/simple/GanttChartWithTable.flexibility", ["sap/gantt/utils/GanttFlexibilityUtils"],function(t){"use strict";return{hideControl:"default",unhideControl:"default",moveControls:"default",ganttChartWithTableSettings:t.fnCustomisationChangeHandler("ganttChartWithTableSettings")}},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/flexibility/simple/GanttTableColumn.flexibility", ["sap/gantt/utils/GanttFlexibilityUtils"],function(e){"use strict";return{hideControl:"default",unhideControl:"default",moveControls:"default",GanttTableColumnOrder:{changeHandler:{applyChange:function(e,t,n){var r=n.modifier,o=n.view,a=n.appComponent,i=e.getContent(),u=i["aggregationName"],l=i["newValue"],s=i["oldValue"];e.setRevertData(s);var f=[];l.forEach(function(e){var t=r.bySelector(e,a,o);f.push(t)});if(f.length>0){return r.removeAllAggregation(t,u).then(function(){var e=f.reduce(function(e,n,a){return e.then(function(){return r.insertAggregation(t,u,n,a,o)})},Promise.resolve());return e.then(function(){return true})})}},revertChange:function(e,t,n){var r=n.appComponent,o=n.view,a=n.modifier,i=e.getRevertData(),u=e.getContent(),l=u["aggregationName"];e.resetRevertData();var s=[];i.forEach(function(e){var t=a.bySelector(e,r,o);s.push(t)});if(s.length>0){return a.removeAllAggregation(t,l).then(function(){var e=s.reduce(function(e,n,r){return e.then(function(){return a.insertAggregation(t,l,n,r,o)})},Promise.resolve());return e.then(function(){return true})})}},completeChangeContent:function(e,t,n){return},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:"GanttTableColumnOrder"}}},layers:{USER:true}},TableColumnSortOrder:{changeHandler:{applyChange:function(e,t,n){var r=n.modifier,o=e.getContent(),a=o["propertyName"],i=o["newValue"],u=o["oldValue"];e.setRevertData(u);r.setPropertyBindingOrProperty(t,a,i);r.setPropertyBindingOrProperty(t,"sorted",true);var l=e.getDependentControl("ADDITIONAL_CONTROLS",n);if(l&&l.length>0){l.forEach(function(e){r.setPropertyBindingOrProperty(e,a,"Ascending");r.setPropertyBindingOrProperty(e,"sorted",false)})}return true},revertChange:function(e,t,n){var r=n.modifier;var o=e.getRevertData();var a=e.getContent(),i=a["propertyName"];r.setPropertyBindingOrProperty(t,i,o);r.setPropertyBindingOrProperty(t,"sorted",false);e.resetRevertData();return true},completeChangeContent:function(e,t,n){var r=t.content.affectedControls;if(r&&r.length>0){e.addDependentControl(r,"ADDITIONAL_CONTROLS",n)}return true},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:"TableColumnSortOrder"}}},layers:{USER:true}},TableColumnFilterValue:e.fnChangeHandler("TableColumnFilterValue"),TableColumnVisibility:e.fnChangeHandler("TableColumnVisibility")}},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/DimensionLegend", ["sap/ui/core/Control","./LegendBase","sap/gantt/drawer/Legend"],function(e,t,i){"use strict";var n=t.extend("sap.gantt.legend.DimensionLegend",{metadata:{library:"sap.gantt",properties:{shape:{type:"sap.gantt.config.Shape"},xDimension:{type:"string"},yDimension:{type:"string"},xDomain:{type:"any[]",defaultValue:[]},yDomain:{type:"any[]",defaultValue:[]},exclude:{type:"any[][]",defaultValue:[]},legendSpace:{type:"float",defaultValue:8}}}});n.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oDimensionLegendDrawer=new i};n.prototype.applySettings=function(){var t=e.prototype.applySettings.apply(this,arguments);this._modifyDimensionFunction();return t};n.prototype._modifyDimensionFunction=function(){var e=this.getXDimension(),t=this.getYDimension();this._oShapeInstance._oLegend=this;this._oShapeInstance._sXDimension=e;this._oShapeInstance._sYDimension=t;this._oShapeInstance["get"+this._capitalFirst(e)]=function(e){if(this.mShapeConfig.hasShapeProperty(this._sXDimension)){return this._configFirst(this._sXDimension,e)}if(e.xIndex===-1){return sap.gantt.DIMENSION_LEGEND_NIL}return this._oLegend.getXDomain()[e.xIndex]};this._oShapeInstance["get"+this._capitalFirst(t)]=function(e){if(this.mShapeConfig.hasShapeProperty(this._sYDimension)){return this._configFirst(this._sYDimension,e)}if(e.yIndex===-1){return sap.gantt.DIMENSION_LEGEND_NIL}return this._oLegend.getYDomain()[e.yIndex]}};n.prototype._capitalFirst=function(e){return e.charAt(0).toUpperCase()+(e.length>1?e.slice(1):"")};n.prototype.onAfterRendering=function(){if(this._oShapeInstance){var e=this.getParent().$();var t={width:e.width(),height:e.height()};var i=d3.select("#"+this.getId()+"-svg");var n=this._drawDimensionLegend(i,this._oShapeInstance);i.attr("width",n.width+"px");i.attr("height",n.height+"px");var a=d3.select("#"+this.getId()+"-dimension-path");var s=this._drawDimensionPath(a,this._oShapeInstance);a.attr("width",n.width+"px");a.attr("height",s.height+"px");a.style("top",n.height+"px");var r=d3.select("#"+this.getId()+"-dimension-text");this._drawDimensionText(r,this._oShapeInstance,t,n);r.style(sap.ui.getCore().getConfiguration().getRTL()?"right":"left",n.width+"px");r.attr("width",t.width-n.width-5+"px");r.attr("height",n.height+s.height+this.getLegendSpace()*2+"px");d3.select("#"+this.getId()).style("height",n.height+s.height+this.getLegendSpace()*2+"px")}};n.prototype.setShape=function(e){var t=this;this.setProperty("shape",e);if(e){try{t._oShapeInstance=t._instantShapeSync([e])[0]}catch(i){t._instantShapeAsync([e]).then(function(e){t._oShapeInstance=e[0]})}}return this};n.prototype._drawDimensionLegend=function(e,t){var i=this.getXDomain();var n=this._prepareData(t);var a=e.selectAll("."+t.getId()+"-row").data(n);a.enter().append("g").classed(t.getId()+"-row",true);a.exit().remove();if(!a.empty()){this._oDimensionLegendDrawer._recursiveDraw(a,t)}var s={};var r=i.length;if(r>0){s.width=this.getScaledLegendWidth()*r+this.getLegendSpace()*(r+1);s.height=this.getScaledLegendHeight()*n.length+this.getLegendSpace()*(n.length+1)}return s};n.prototype._prepareData=function(e){var t=[],i=this.getXDimension(),n=this.getYDimension(),a=this.getXDomain(),s=this.getYDomain(),r=this.getExclude();this.aXDimension=[];this.aYDimension=[];var h=this,o;jQuery.each(a,function(t,i){o={};o.xIndex=t;o.yIndex=-1;h.aXDimension.push(e.getLegend(o))});this.aReversedXDimension=jQuery.extend(true,[],this.aXDimension);this.aReversedXDimension.reverse();jQuery.each(s,function(t,i){o={};o.xIndex=-1;o.yIndex=t;h.aYDimension.push(e.getLegend(o))});jQuery.each(s,function(e,s){var o=[];jQuery.each(a,function(t,a){var g=false;jQuery.each(r,function(e,t){if(a==t[0]&&s==t[1]){g=true;return false}});if(!g){var p={};p.xIndex=t;p.yIndex=e;p[i]=a;p[n]=s;p.xName=h.aXDimension[t];p.yName=h.aYDimension[e];o.push(p)}});if(o.length>0){t.push(o)}});return t};n.prototype._drawDimensionPath=function(e,t){var i=this.getXDomain(),n=i.length,a=this;var s=e.selectAll(".dimension-path").data(i);s.enter().append("path").attr("d",function(e,t){var i=a.getScaledLegendWidth();var s=a.getScaledLegendHeight();var r=0,h=h=s*(n-1-t)+a.getLegendSpace()*(n-t),o=i*(n-1-t)+a.getLegendSpace()*(n-t);if(sap.ui.getCore().getConfiguration().getRTL()){r=i*(n-1-t)+a.getLegendSpace()*(n-t)+i/2;o=-o}else{r=i*t+a.getLegendSpace()*(t+1)+i/2}return"M"+r+" 0 v"+h+" h"+o}).attr("fill","none");s.exit().remove();var r={};r.height=0;if(n>0){r.height=this.getScaledLegendHeight()*n+this.getLegendSpace()*(n-1)}return r};n.prototype._drawDimensionText=function(e,t,i,n){var a=this.aYDimension.concat(this.aReversedXDimension);var s=this.aYDimension.length;var r=this;var h=i.width-n.width-5;var o=e.selectAll(".dimension-text").data(a);o.enter().append("text").attr("x",function(e){if(sap.ui.getCore().getConfiguration().getRTL()){return h}return 0}).attr("y",function(e,t){return r.getScaledLegendHeight()*t+r.getLegendSpace()*(t+1)+parseInt(r.getFontSize(),10)/2+r.getScaledLegendHeight()/2-2}).text(function(e){return e}).attr("font-size",r.getFontSize()+"px").attr("font-style",function(e,t){return t<s?"normal":"italic"}).attr("text-anchor",sap.ui.Device.browser.name==="ie"&&sap.ui.getCore().getConfiguration().getRTL()?"end":"start");o.select("title").remove();o.insert("title",":first-child").text(function(e){return e});o.exit().remove()};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/DimensionLegendRenderer", ["sap/ui/performance/Measurement","sap/ui/Device","sap/ui/core/Core"],function(e,t,i){"use strict";var r={};r.render=function(r,s){e.start("DimensionLegendRenderer render","GanttPerf:DimensionLegendRenderer render function");r.write("<div");r.writeControlData(s);r.addStyle("width","100%");r.addStyle("height","100%");r.addStyle("position","relative");r.writeStyles();r.write(">");this.renderSvgDefs(r,s);r.write("<div");r.addStyle("float",i.getConfiguration().getRTL()?"right":"left");r.writeStyles();r.write(">");r.write("<svg");r.writeAttribute("id",s.getId()+"-svg");r.writeClasses();r.writeAttributeEscaped("tabindex",t.browser.chrome?null:-1);r.writeAttributeEscaped("focusable",false);r.write("></svg>");r.write("<svg");r.writeAttribute("id",s.getId()+"-dimension-path");r.addClass("sapGanttDimensionLegendPath");r.writeClasses();r.addStyle("position","absolute");r.addStyle(i.getConfiguration().getRTL()?"right":"left","0px");r.writeStyles();r.writeAttributeEscaped("tabindex",t.browser.chrome?null:-1);r.writeAttributeEscaped("focusable",false);r.write(">");r.write("</svg>");r.write("</div>");r.write("<div><svg");r.writeAttribute("id",s.getId()+"-dimension-text");r.addClass("sapGanttDLItemTxt");r.writeClasses();r.addStyle("position","absolute");r.writeStyles();r.writeAttributeEscaped("tabindex",t.browser.chrome?null:-1);r.writeAttributeEscaped("focusable",false);r.write("></svg></div>");r.write("</div>");e.end("DimensionLegendRenderer render")};r.renderSvgDefs=function(e,i){var r=i.getSvgDefs();if(r){e.write("<svg");e.writeAttribute("id",i.getId()+"-svg-psdef");e.writeAttribute("aria-hidden","true");e.writeAttributeEscaped("tabindex",t.browser.chrome?null:-1);e.writeAttribute("focusable",false);e.addStyle("float","left");e.addStyle("width","0px");e.addStyle("height","0px");e.writeStyles();e.write(">");e.write(r.getDefString());e.write("</svg>")}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/LegendBase", ["sap/base/Log","sap/ui/core/Control","sap/base/util/ObjectPath","../misc/Utility","../misc/Format","../shape/cal/Calendar","../misc/AxisTime"],function(e,t,a,n,i,r,s){"use strict";var o=t.extend("sap.gantt.legend.LegendBase",{metadata:{library:"sap.gantt",abstract:true,properties:{svgDefs:{type:"sap.gantt.def.SvgDefs",defaultValue:null},legendWidth:{type:"float",defaultValue:32},legendHeight:{type:"float",defaultValue:32},fontSize:{type:"int",defaultValue:16}}}});o.prototype.TIME_RANGE=["20160101000000","20160103000000"];o.prototype.TIME="20160102000000";o.prototype.init=function(){this._aTimeRange=[i.getTimeStampFormatter().parse(this.TIME_RANGE[0]),i.getTimeStampFormatter().parse(this.TIME_RANGE[1])]};o.prototype.getAxisTime=function(){return this._oAxisTime};o.prototype.onBeforeRendering=function(){this._sUiSizeMode=n.findSapUiSizeClass();this._aViewRange=[0,this.getScaledLegendWidth()];this._oAxisTime=new s(this._aTimeRange,this._aViewRange)};o.prototype.getScaledLegendWidth=function(){var e=this.getSapUiSizeClass();return n.scaleBySapUiSize(e,this.getLegendWidth())};o.prototype.getScaledLegendHeight=function(){var e=this.getSapUiSizeClass();return n.scaleBySapUiSize(e,this.getLegendHeight())};o.prototype._instantShapeSync=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].getShapeClassName()){var n=this._instantiateCustomerClassSync(e[a].getShapeClassName(),a,e[a]);if(e[a].getClippathAggregation()&&e[a].getClippathAggregation()instanceof Array){var i=this._instantShapeSync(e[a].getClippathAggregation());for(var r=0;r<i.length;r++){n.addPath(i[r])}}else if(e[a].getGroupAggregation()&&e[a].getGroupAggregation()instanceof Array){var s=this._instantShapeSync(e[a].getGroupAggregation());for(var o=0;o<s.length;o++){n.addShape(s[o])}}if(this._isProperShape(n)){t.push(n)}}}return t};o.prototype._instantShapeAsync=function(e){var t=this,a=[];function n(a){return t._instantiateCustomerClassAsync(e[a].getShapeClassName(),a,e[a]).then(function(n){if(e[a].getClippathAggregation()&&e[a].getClippathAggregation()instanceof Array){return t._instantShapeAsync(e[a].getClippathAggregation()).then(function(e){for(var t=0;t<e.length;t++){n.addPath(e[t])}return n})}else if(e[a].getGroupAggregation()&&e[a].getGroupAggregation()instanceof Array){return t._instantShapeAsync(e[a].getGroupAggregation()).then(function(e){for(var t=0;t<e.length;t++){n.addShape(e[t])}return n})}else{return n}})}for(var i=0;i<e.length;i++){if(e[i].getShapeClassName()){a.push(n(i))}}return Promise.all(a).then(function(e){var a=[];e.forEach(function(e){if(t._isProperShape(e)){a.push(e)}});return a})};o.prototype._isProperShape=function(t){if(t instanceof r){e.warning("Calendar is not proper shape","key '"+t.mShapeConfig.getKey()+"'","ListLegend");return false}else if(t.getTag()=="clippath"){return false}else{return true}};o.prototype._instantiateCustomerClassSync=function(e,t,n){var i=a.get(e);if(!i){throw new Error("Class "+e+" not preloaded. Please add it to require of your"+" controller to ensure that it's initialized before this point or use Gantt 2.0.")}var r=new i;r.mShapeConfig=n;r.mChartInstance=this;return r};o.prototype._instantiateCustomerClassAsync=function(e,t,a){var n=this;return new Promise(function(t){sap.ui.require([e.replace(/\./g,"/")],function(e){var i=new e;i.mShapeConfig=a;i.mChartInstance=n;t(i)})})};o.prototype.getSapUiSizeClass=function(){return this._sUiSizeMode};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/LegendContainer", ["sap/ui/core/Control","sap/m/NavContainer","sap/m/Page","sap/m/List","sap/m/StandardListItem"],function(t,e,i,n,o){"use strict";var a=t.extend("sap.gantt.legend.LegendContainer",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"}},aggregations:{legendSections:{type:"sap.m.Page",multiple:true,visibility:"public",singularName:"legendSection"}}}});a.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this._sTitle=this._oRb.getText("LEGEND_TITLE");this._oNavContainer=new e({autoFocus:false,width:this.getWidth(),height:this.getHeight()});this._oInitNavPage=new i({title:this._oRb.getText("LEGEND_TITLE"),content:[new n]});this._aLegendSections=[]};a.prototype.setWidth=function(t){this.setProperty("width",t,true);this._oNavContainer.setWidth(t);return this};a.prototype.setHeight=function(t){this.setProperty("height",t,true);this._oNavContainer.setHeight(t);return this};a.prototype.addLegendSection=function(t){if(t){if(this._aLegendSections.length==1){this._oNavContainer.insertPage(this._oInitNavPage,0);this._aLegendSections[0].setShowNavButton(true)}if(this._aLegendSections.length!==0){t.setShowNavButton(true)}t.attachNavButtonPress(this._onNavBack,this);t.setBackgroundDesign(sap.m.PageBackgroundDesign.Solid);t.setEnableScrolling(true);var e=t.getTitle();if(e!==undefined){var i=new o({title:e,type:sap.m.ListType.Navigation});i.attachPress(this._onNavToLegendSection,this);this._oInitNavPage.getContent()[0].addItem(i)}this._aLegendSections.push(t);this._oNavContainer.addPage(t)}return this};a.prototype.insertLegendSection=function(t,e){if(t){var i=this._aLegendSections.length;if(i==1){this._oNavContainer.insertPage(this._oInitNavPage,0);this._aLegendSections[0].setShowNavButton(true)}if(i!==0){t.setShowNavButton(true)}if(e>=i){e=i}t.attachNavButtonPress(this._onNavBack,this);t.setBackgroundDesign(sap.m.PageBackgroundDesign.Solid);t.setEnableScrolling(true);var n=t.getTitle();if(n!==undefined){var a=new o({title:n,type:sap.m.ListType.Navigation});a.attachPress(this._onNavToLegendSection,this);this._oInitNavPage.getContent()[0].insertItem(a,e)}this._oNavContainer.insertPage(t,e+1);this._aLegendSections.splice(e,0,t)}return this};a.prototype.indexOfLegendSection=function(t){var e=jQuery.inArray(t,this._aLegendSections);return e};a.prototype.removeLegendSection=function(t){var e;if(typeof t==="number"){this._oNavContainer.removePage(t+1);this._oInitNavPage.getContent()[0].removeItem(t);e=this._aLegendSections.splice(t+1,1)}else if(t){this._oInitNavPage.getContent()[0].removeItem(jQuery.inArray(t,this._oNavContainer.getPages())-1);this._oNavContainer.removePage(t);e=this._aLegendSections.splice(jQuery.inArray(t,this._aLegendSections),1)}if(this._aLegendSections.length==1){if(this._oNavContainer.getCurrentPage()==this._oInitNavPage){this._oNavContainer.to(this._aLegendSections[0])}this._aLegendSections[0].setShowNavButton(false)}return e};a.prototype.removeAllLegendSection=function(){var t=this._aLegendSections.splice(0,this._aLegendSections.length);this._oInitNavPage.getContent()[0].removeAllItems();this._oNavContainer.removeAllPages();return t};a.prototype.getLegendSections=function(){var t=this._oNavContainer.getPages();var e=this;return t.filter(function(t){if(t.getTitle()!==e._sTitle){return true}})};a.prototype.getNavigationPage=function(){return this._oInitNavPage};a.prototype.getNavigationItems=function(){return this._oInitNavPage.getContent()[0].getItems()};a.prototype.getCurrentLegendSection=function(){return this._oNavContainer.getCurrentPage()};a.prototype._onNavToLegendSection=function(t){var e=t.getSource().getTitle();this._oNavContainer.setAutoFocus(true);for(var i=0;i<this._aLegendSections.length;i++){if(e==this._aLegendSections[i].getTitle()){this._oNavContainer.to(this._aLegendSections[i])}}};a.prototype._onNavBack=function(t){this._oNavContainer.to(this._oInitNavPage)};return a});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/LegendContainerRenderer", [],function(){"use strict";var t={};t.render=function(t,e){t.write("<div");t.writeControlData(e);t.addClass("sapGanttChartLegend");t.writeClasses();t.addStyle("width",e.getWidth());t.addStyle("height","100%");t.writeStyles();t.write(">");t.renderControl(e._oNavContainer);t.write("</div>")};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/legend/ListLegendRenderer", ["sap/ui/performance/Measurement","sap/ui/core/theming/Parameters"],function(e,t){"use strict";var r={};r.render=function(t,r){e.start("ListLegendRenderer render","GanttPerf:ListLegendRenderer render function");var i=r._aShapeInstance,d=r.getScaledLegendWidth(),a=r.getScaledLegendHeight();t.write("<div");t.writeControlData(r);t.addClass("sapGanttLL");t.write(">");e.start("ListLegendRenderer renderPaintServer","GanttPerf:ListLegendRenderer renderPaintServer part");this.renderSvgDefs(t,r);e.end("ListLegendRenderer renderPaintServer");for(var s=0;s<i.length;s++){var n=i[s].getLegend();t.write("<div");t.writeAttributeEscaped("title",n);t.addClass("sapGanttLLItem");t.writeClasses();t.addStyle("height",a+"px");t.addStyle("line-height",a+"px");t.writeStyles();t.write(">");if(r._aCheckBoxes[s]){if(i[s].mShapeConfig.getSwitchOfCheckBox()=="noShow"){r._aCheckBoxes[s].addStyleClass("noShowCheckBox")}t.renderControl(r._aCheckBoxes[s])}t.write("<svg");t.writeAttribute("id",r.getId()+"-svg-"+s);t.addClass("sapGanttLLSvg");t.addStyle("width",d+"px");t.writeStyles();t.writeAttributeEscaped("tabindex",-1);t.writeAttributeEscaped("focusable",false);if(r._aCheckBoxes.length==0){t.addClass("NoCheckBox")}t.writeClasses();t.write("></svg>");t.write("<div");t.writeAttribute("id",r.getId()+"-txt-"+s);t.addClass("sapGanttLLItemTxt");t.writeClasses();t.addStyle("font-size",r.getFontSize()+"px");t.writeStyles();t.write(">");if(n){t.writeEscaped(n)}t.write("</div>");t.write("</div>")}t.write("</div>");e.end("ListLegendRenderer render")};r.renderSvgDefs=function(e,t){var r=t.getSvgDefs();if(r){e.write("<svg");e.writeAttribute("id",t.getId()+"-svg-psdef");e.writeAttribute("aria-hidden","true");e.addClass("sapGanttLLSvgDefs");e.writeClasses();e.write(">");e.write(r.getDefString());e.write("</svg>")}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/library", ["sap/ui/base/DataType","sap/ui/core/theming/Parameters","sap/gantt/config/TimeHorizon","sap/gantt/simple/MarkerType","sap/gantt/simple/LegendShapeGroupOrientation","sap/ui/core/Core","sap/ui/core/library","sap/ui/layout/library","sap/ui/table/library","sap/m/library","sap/ui/export/library","sap/ui/dt/library","sap/ui/fl/library","sap/ui/comp/library"],function(t,e,n,a,i,o){"use strict";var r=o.initLibrary({name:"sap.gantt",dependencies:["sap.ui.core","sap.ui.layout","sap.ui.table","sap.m","sap.ui.export","sap.ui.dt","sap.ui.fl","sap.ui.comp"],designtime:"sap/gantt/designtime/library.designtime",types:["sap.gantt.control.ToolbarType","sap.gantt.SelectionMode","sap.gantt.shape.ShapeCategory","sap.gantt.def.filter.MorphologyOperator","sap.gantt.def.filter.ColorMatrixValue","sap.gantt.shape.ext.rls.RelationshipType","sap.gantt.config.ZoomControlType","sap.gantt.config.BirdEyeRange","sap.gantt.config.FindMode","sap.gantt.GenericArray","sap.gantt.dragdrop.GhostAlignment","sap.gantt.dragdrop.SnapMode","sap.gantt.simple.GanttChartWithTableDisplayType","sap.gantt.simple.ContainerToolbarPlaceholderType","sap.gantt.simple.VisibleHorizonUpdateType","sap.gantt.simple.MarkerType","sap.gantt.simple.LegendShapeGroupOrientation"],interfaces:[],controls:["sap.gantt.control.Toolbar","sap.gantt.GanttChart","sap.gantt.GanttChartBase","sap.gantt.GanttChartWithTable","sap.gantt.GanttChartContainer","sap.gantt.legend.LegendContainer","sap.gantt.legend.ListLegend","sap.gantt.legend.DimensionLegend","sap.gantt.simple.GanttChartWithTable","sap.gantt.simple.ContainerToolbar","sap.gantt.simple.GanttChartContainer","sap.gantt.simple.ContainerToolbarPlaceholder"],elements:["sap.gantt.axistime.ProportionZoomStrategy","sap.gantt.config.TimeHorizon","sap.gantt.config.TimeAxis","sap.gantt.config.ToolbarGroup","sap.gantt.config.Mode","sap.gantt.config.ModeGroup","sap.gantt.config.LayoutGroup","sap.gantt.config.ExpandChart","sap.gantt.config.ExpandChartGroup","sap.gantt.config.TimeZoomGroup","sap.gantt.config.BirdEyeGroup","sap.gantt.config.ToolbarScheme","sap.gantt.config.Hierarchy","sap.gantt.config.HierarchyColumn","sap.gantt.config.ColumnAttribute","sap.gantt.config.GanttChartLayout","sap.gantt.config.ContainerLayout","sap.gantt.config.SettingItem","sap.gantt.config.SettingGroup","sap.gantt.config.ObjectType","sap.gantt.config.ChartScheme","sap.gantt.config.Locale","sap.gantt.config.Shape","sap.gantt.def.SvgDefs","sap.gantt.axistime.AxisTimeStrategyBase","sap.gantt.AdhocLine","sap.gantt.simple.GanttRowSettings","sap.gantt.simple.BaseCalendar","sap.gantt.simple.BaseChevron","sap.gantt.simple.BaseDiamond","sap.gantt.simple.BaseGroup","sap.gantt.simple.BaseImage","sap.gantt.simple.BaseLine","sap.gantt.simple.BasePath","sap.gantt.simple.BaseRectangle","sap.gantt.simple.BaseShape","sap.gantt.simple.BaseText","sap.gantt.simple.BaseCursor","sap.gantt.simple.BaseConditionalShape","sap.gantt.simple.AdhocLine","sap.gantt.simple.DeltaLine","sap.gantt.simple.AdhocDiamond","sap.gantt.simple.BaseTriangle","sap.gantt.simple.LegendShapeGroup","sap.gantt.simple.BaseDeltaRectangle","sap.gantt.simple.MultiActivityGroup","sap.gantt.simple.MultiActivityRowSettings","sap.gantt.simple.UtilizationBarChart","sap.gantt.simple.UtilizationLineChart","sap.gantt.simple.StockChart","sap.gantt.simple.UtilizationChart","sap.gantt.simple.UtilizationDimension","sap.gantt.simple.UtilizationPeriod","sap.gantt.simple.StockChartDimension","sap.gantt.simple.StockChartPeriod","sap.gantt.simple.shapes.Shape","sap.gantt.simple.shapes.Task"],extensions:{flChangeHandlers:{"sap.gantt.simple.GanttChartContainer":"sap/gantt/flexibility/simple/GanttChartContainer","sap.ui.table.Column":"sap/gantt/flexibility/simple/GanttTableColumn","sap.ui.table.TreeTable":"sap/gantt/flexibility/simple/GanttTableColumn","sap.ui.table.Table":"sap/gantt/flexibility/simple/GanttTableColumn","sap.gantt.axistime.ProportionZoomStrategy":"sap/gantt/flexibility/simple/GanttChartContainer","sap.gantt.axistime.StepwiseZoomStrategy":"sap/gantt/flexibility/simple/GanttChartContainer","sap.gantt.axistime.FullScreenStrategy":"sap/gantt/flexibility/simple/GanttChartContainer","sap.gantt.simple.GanttChartWithTable":"sap/gantt/flexibility/simple/GanttChartWithTable","sap.gantt.simple.AdhocLine":"sap/gantt/flexibility/simple/AdhocLine","sap.gantt.simple.DeltaLine":"sap/gantt/flexibility/simple/DeltaLine"}},noLibraryCSS:false,version:"1.108.10"});this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");r.SelectionMode={MultiWithKeyboard:"MultiWithKeyboard",Multiple:"Multiple",MultiWithKeyboardAndLasso:"MultiWithKeyboardAndLasso",MultipleWithLasso:"MultipleWithLasso",Single:"Single",None:"None"};r.AdhocLineLayer={Top:"Top",Bottom:"Bottom"};r.DeltaLineLayer={Top:"Top",Bottom:"Bottom"};r.control.ToolbarType={Global:"GLOBAL",Local:"LOCAL"};r.ValueSVGPaintServer=t.createType("sap.gantt.ValueSVGPaintServer",{isValid:function(t){var e=t.substr(0,1)==="@"?t.substring(1):t;if(r._colorCache[e]){return true}var n=sap.m.ValueCSSColor.isValid(t);if(!n){n=/(?:url\(['|"]?)(.*?)(?:['|"]?\))|^[@|#](.*?)$|initial|transparent|none|inherit/.test(t)}return n}},t.getType("string"));r._colorCache={};r.ValueSVGPaintServer.setNormalizer(function(t){if(!t){return t}if(t.substr(0,1)==="@"){t=t.substring(1)}if(r._colorCache[t]){return r._colorCache[t]}var n=sap.m.ValueColor;var a=e.get(t)||t;switch(a){case n.Critical:r._colorCache[t]=e.get("sapUiChartCritical");return r._colorCache[t];case n.Error:r._colorCache[t]=e.get("sapUiChartBad");return r._colorCache[t];case n.Good:r._colorCache[t]=e.get("sapUiChartGood");return r._colorCache[t];case n.Neutral:r._colorCache[t]=e.get("sapUiChartNeutral");return r._colorCache[t];default:r._colorCache[t]=a;return r._colorCache[t]}});r.SVGLength=t.createType("sap.gantt.SVGLength",{isValid:function(t){if(t==="auto"||t==="inherit"){return true}return/^[-+]?([0-9]*\.?[0-9]+)(em|ex|px|in|cm|mm|pt|pc|%)?$/.test(t)}},t.getType("any"));r.palette={};r.palette.SemanticColors=["sapUiNegativeText","sapUiCriticalText","sapUiPositiveText","sapUiInformativeText","sapUiNeutralText"];r.palette.LegendColors=[];var s;for(s=1;s<=20;s++){r.palette.LegendColors.push("sapUiLegend"+s)}r.palette.AccentColors=[];for(s=1;s<=10;s++){r.palette.AccentColors.push("sapUiAccent"+s)}r.PaletteColor=t.createType("sap.gantt.PaletteColor",{isValid:function(t){var e=String(t);if(e[0].startsWith("@")){e=e.substr(1)}return r.palette.SemanticColors.indexOf(e)>=0||r.palette.LegendColors.indexOf(e)>=0||r.palette.AccentColors.indexOf(e)>=0},parseValue:function(t){var e=String(t);if(e[0].startsWith("@")){e=e.substr(1)}return e}},t.getType("string"));r.shape.ShapeCategory={InRowShape:"InRowShape",Relationship:"relationship"};r.simple.shapes.TaskType={Normal:"Normal",SummaryExpanded:"SummaryExpanded",SummaryCollapsed:"SummaryCollapsed",Error:"Error"};r.simple.shapes.ShapeAlignment={Top:"Top",Middle:"Middle",Bottom:"Bottom"};r.def.filter.MorphologyOperator={Dilate:"dilate",Erode:"erode"};r.def.filter.ColorMatrixValue={AllToWhite:"-1 0 0 0 1, 0 -1 0 0 1, 0 0 -1 0 1, 0 0 0 1 0",AllToBlack:"-1 0 0 0 0, 0 -1 0 0 0, 0 0 -1 0 0, 0 0 0 1 0"};r.shape.ext.rls.RelationshipType={FinishToFinish:0,FinishToStart:1,StartToFinish:2,StartToStart:3};r.simple.connectorType={Arrow:"Arrow",Square:"Square",Circle:"Circle",Diamond:"Diamond",HorizontalRectangle:"HorizontalRectangle",VerticalRectangle:"VerticalRectangle",None:"None"};r.simple.findByOperator={AND:"AND",OR:"OR"};r.simple.relationshipShapeSize={Small:"Small",Medium:"Medium",Large:"Large"};r.simple.RelationshipType={FinishToFinish:"FinishToFinish",FinishToStart:"FinishToStart",StartToFinish:"StartToFinish",StartToStart:"StartToStart"};r.config.ZoomControlType={SliderWithButtons:"SliderWithButtons",SliderOnly:"SliderOnly",ButtonsOnly:"ButtonsOnly",Select:"Select",None:"None"};r.config.BirdEyeRange={AllRows:"AllRows",VisibleRows:"VisibleRows"};r.config.FindMode={Toolbar:"Toolbar",SidePanel:"SidePanel",Both:"Both"};r.config.TimeUnit={minute:"d3.time.minute",hour:"d3.time.hour",day:"d3.time.day",week:"d3.time.week",month:"d3.time.month",year:"d3.time.year"};r.config.WeekFirstDay={ad:"d3.time.monday",ae:"d3.time.saturday",af:"d3.time.saturday",ag:"d3.time.sunday",ai:"d3.time.monday",al:"d3.time.monday",am:"d3.time.monday",an:"d3.time.monday",ar:"d3.time.sunday",as:"d3.time.sunday",at:"d3.time.monday",au:"d3.time.sunday",ax:"d3.time.monday",az:"d3.time.monday",ba:"d3.time.monday",bd:"d3.time.friday",be:"d3.time.monday",bg:"d3.time.monday",bh:"d3.time.saturday",bm:"d3.time.monday",bn:"d3.time.monday",br:"d3.time.sunday",bs:"d3.time.sunday",bt:"d3.time.sunday",bw:"d3.time.sunday",by:"d3.time.monday",bz:"d3.time.sunday",ca:"d3.time.sunday",ch:"d3.time.monday",cl:"d3.time.monday",cm:"d3.time.monday",cn:"d3.time.sunday",co:"d3.time.sunday",cr:"d3.time.monday",cy:"d3.time.monday",cz:"d3.time.monday",de:"d3.time.monday",dj:"d3.time.saturday",dk:"d3.time.monday",dm:"d3.time.sunday",do:"d3.time.sunday",dz:"d3.time.saturday",ec:"d3.time.monday",ee:"d3.time.monday",eg:"d3.time.saturday",es:"d3.time.monday",et:"d3.time.sunday",fi:"d3.time.monday",fj:"d3.time.monday",fo:"d3.time.monday",fr:"d3.time.monday",gb:"d3.time.monday","gb-alt-variant":"d3.time.sunday",ge:"d3.time.monday",gf:"d3.time.monday",gp:"d3.time.monday",gr:"d3.time.monday",gt:"d3.time.sunday",gu:"d3.time.sunday",hk:"d3.time.sunday",hn:"d3.time.sunday",hr:"d3.time.monday",hu:"d3.time.monday",id:"d3.time.sunday",ie:"d3.time.sunday",il:"d3.time.sunday",in:"d3.time.sunday",iq:"d3.time.saturday",ir:"d3.time.saturday",is:"d3.time.monday",it:"d3.time.monday",jm:"d3.time.sunday",jo:"d3.time.saturday",jp:"d3.time.sunday",ke:"d3.time.sunday",kg:"d3.time.monday",kh:"d3.time.sunday",kr:"d3.time.sunday",kw:"d3.time.saturday",kz:"d3.time.monday",la:"d3.time.sunday",lb:"d3.time.monday",li:"d3.time.monday",lk:"d3.time.monday",lt:"d3.time.monday",lu:"d3.time.monday",lv:"d3.time.monday",ly:"d3.time.saturday",ma:"d3.time.saturday",mc:"d3.time.monday",md:"d3.time.monday",me:"d3.time.monday",mh:"d3.time.sunday",mk:"d3.time.monday",mm:"d3.time.sunday",mn:"d3.time.monday",mo:"d3.time.sunday",mq:"d3.time.monday",mt:"d3.time.sunday",mv:"d3.time.friday",mx:"d3.time.sunday",my:"d3.time.monday",mz:"d3.time.sunday",ni:"d3.time.sunday",nl:"d3.time.monday",no:"d3.time.monday",np:"d3.time.sunday",nz:"d3.time.monday",om:"d3.time.saturday",pa:"d3.time.sunday",pe:"d3.time.sunday",ph:"d3.time.sunday",pk:"d3.time.sunday",pl:"d3.time.monday",pr:"d3.time.sunday",pt:"d3.time.monday",py:"d3.time.sunday",qa:"d3.time.saturday",re:"d3.time.monday",ro:"d3.time.monday",rs:"d3.time.monday",ru:"d3.time.monday",sa:"d3.time.sunday",sd:"d3.time.saturday",se:"d3.time.monday",sg:"d3.time.sunday",si:"d3.time.monday",sk:"d3.time.monday",sm:"d3.time.monday",sv:"d3.time.sunday",sy:"d3.time.saturday",th:"d3.time.sunday",tj:"d3.time.monday",tm:"d3.time.monday",tn:"d3.time.sunday",tr:"d3.time.monday",tt:"d3.time.sunday",tw:"d3.time.sunday",ua:"d3.time.monday",um:"d3.time.sunday",us:"d3.time.sunday",uy:"d3.time.monday",uz:"d3.time.monday",va:"d3.time.monday",ve:"d3.time.sunday",vi:"d3.time.sunday",vn:"d3.time.monday",ws:"d3.time.sunday",xk:"d3.time.monday",ye:"d3.time.sunday",za:"d3.time.sunday",zw:"d3.time.sunday"};r.config.DEFAULT_PLAN_HORIZON=new n({startTime:new Date((new Date).getTime()-31536e6),endTime:new Date((new Date).getTime()+31536e6)});r.config.DEFAULT_PLAN_HORIZON.destroy=function(){};r.config.DEFAULT_INIT_HORIZON=new n({startTime:new Date((new Date).getTime()-2628e6),endTime:new Date((new Date).getTime()+2628e6)});r.config.DEFAULT_INIT_HORIZON.destroy=function(){};var m=sap.ui.getCore().getConfiguration().getRTL()?".M.d":"d.M.";var T=sap.ui.getCore().getConfiguration().getFormatSettings().getDatePattern("short");r.config.DEFAULT_DATE_PATTERN=T?T:"EEEE, MMM d, yy";var l=sap.ui.getCore().getConfiguration().getFormatSettings().getTimePattern("short");r.config.DEFAULT_TIME_PATTERN=l?l:"HH:mm";var g=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();r.config.TIME_PATTERN_LOWERCASE=g==="2"||g==="4"?true:false;r.config.DEFAULT_TIME_ZOOM_STRATEGY={"1min":{innerInterval:{unit:r.config.TimeUnit.minute,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.minute,span:1,pattern:r.config.DEFAULT_TIME_PATTERN}},"5min":{innerInterval:{unit:r.config.TimeUnit.minute,span:5,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.minute,span:5,pattern:r.config.DEFAULT_TIME_PATTERN}},"10min":{innerInterval:{unit:r.config.TimeUnit.minute,span:10,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.minute,span:10,pattern:r.config.DEFAULT_TIME_PATTERN}},"15min":{innerInterval:{unit:r.config.TimeUnit.minute,span:15,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.minute,span:15,pattern:r.config.DEFAULT_TIME_PATTERN}},"30min":{innerInterval:{unit:r.config.TimeUnit.minute,span:30,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.minute,span:30,pattern:r.config.DEFAULT_TIME_PATTERN}},"1hour":{innerInterval:{unit:r.config.TimeUnit.hour,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.hour,span:1,pattern:r.config.DEFAULT_TIME_PATTERN}},"2hour":{innerInterval:{unit:r.config.TimeUnit.hour,span:2,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.hour,span:2,pattern:r.config.DEFAULT_TIME_PATTERN}},"4hour":{innerInterval:{unit:r.config.TimeUnit.hour,span:4,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.hour,span:4,pattern:r.config.DEFAULT_TIME_PATTERN}},"6hour":{innerInterval:{unit:r.config.TimeUnit.hour,span:6,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.hour,span:6,pattern:r.config.DEFAULT_TIME_PATTERN}},"12hour":{innerInterval:{unit:r.config.TimeUnit.hour,span:12,range:90},largeInterval:{unit:r.config.TimeUnit.day,span:1,pattern:r.config.DEFAULT_DATE_PATTERN},smallInterval:{unit:r.config.TimeUnit.hour,span:12,pattern:r.config.DEFAULT_TIME_PATTERN}},"1day":{innerInterval:{unit:r.config.TimeUnit.day,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:1,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.day,span:1,pattern:m}},"2day":{innerInterval:{unit:r.config.TimeUnit.day,span:2,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:1,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.day,span:2,pattern:m}},"4day":{innerInterval:{unit:r.config.TimeUnit.day,span:4,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:1,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.day,span:4,pattern:m}},"1week":{innerInterval:{unit:r.config.TimeUnit.week,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:1,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.week,span:1,pattern:m}},"2week":{innerInterval:{unit:r.config.TimeUnit.week,span:2,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:1,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.week,span:2,pattern:m}},"1month":{innerInterval:{unit:r.config.TimeUnit.month,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:6,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.month,span:1,pattern:m}},"2month":{innerInterval:{unit:r.config.TimeUnit.month,span:2,range:90},largeInterval:{unit:r.config.TimeUnit.month,span:6,format:"yyyyMMMM"},smallInterval:{unit:r.config.TimeUnit.month,span:2,pattern:m}},"4month":{innerInterval:{unit:r.config.TimeUnit.month,span:4,range:90},largeInterval:{unit:r.config.TimeUnit.year,span:1,format:"yyyy"},smallInterval:{unit:r.config.TimeUnit.month,span:4,pattern:"LLLL"}},"6month":{innerInterval:{unit:r.config.TimeUnit.month,span:6,range:90},largeInterval:{unit:r.config.TimeUnit.year,span:1,format:"yyyy"},smallInterval:{unit:r.config.TimeUnit.month,span:6,pattern:"LLLL"}},"1year":{innerInterval:{unit:r.config.TimeUnit.year,span:1,range:90},largeInterval:{unit:r.config.TimeUnit.year,span:1,format:"yyyy"},smallInterval:{unit:r.config.TimeUnit.year,span:1,pattern:"LLLL"}},"2year":{innerInterval:{unit:r.config.TimeUnit.year,span:2,range:90},largeInterval:{unit:r.config.TimeUnit.year,span:2,format:"yyyy"},smallInterval:{unit:r.config.TimeUnit.year,span:2,pattern:"LLLL"}},"5year":{innerInterval:{unit:r.config.TimeUnit.year,span:5,range:90},largeInterval:{unit:r.config.TimeUnit.year,span:5,format:"yyyy"},smallInterval:{unit:r.config.TimeUnit.year,span:5,pattern:"LLLL"}}};var p;Object.defineProperty(r.config,"DEFAULT_TIME_AXIS",{get:function(){if(p){return p}p=new sap.gantt.axistime.AxisTimeStrategyBase;return p},set:function(t){p=t}});r.config.DEFAULT_MODE_KEY="sap_mode";r.config.DEFAULT_MODE=new sap.gantt.config.Mode({key:r.config.DEFAULT_MODE_KEY,text:this._oRb.getText("TLTP_DEFAULT"),icon:"sap-icon://status-positive"});r.config.DEFAULT_MODES=[r.config.DEFAULT_MODE];r.config.DEFAULT_CHART_SCHEME_KEY="sap_main";r.config.DEFAULT_CHART_SCHEME=new sap.gantt.config.ChartScheme({key:r.config.DEFAULT_CHART_SCHEME_KEY,name:"Default",rowSpan:1});r.config.DEFAULT_CHART_SCHEMES=[r.config.DEFAULT_CHART_SCHEME];r.config.DEFAULT_OBJECT_TYPE_KEY="sap_object";r.config.DEFAULT_OBJECT_TYPE=new sap.gantt.config.ObjectType({key:r.config.DEFAULT_OBJECT_TYPE_KEY,description:"Default",mainChartSchemeKey:r.config.DEFAULT_CHART_SCHEME_KEY});r.config.DEFAULT_OBJECT_TYPES=[r.config.DEFAULT_OBJECT_TYPE];r.config.SETTING_ITEM_ENABLE_NOW_LINE_KEY="sap_enableNowLine";r.config.SETTING_ITEM_ENABLE_NOW_LINE=new sap.gantt.config.SettingItem({id:"enableNowLineSettingItem",key:r.config.SETTING_ITEM_ENABLE_NOW_LINE_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_NOW_LINE"),tooltip:this._oRb.getText("TLTP_NOW_LINE")});r.config.SETTING_ITEM_ENABLE_STATUS_BAR_KEY="sap_enableStatusBar";r.config.SETTING_ITEM_ENABLE_STATUS_BAR=new sap.gantt.config.SettingItem({id:"enableStatusBarSettingItem",key:r.config.SETTING_ITEM_ENABLE_STATUS_BAR_KEY,checked:false,_isStandard:true,displayText:this._oRb.getText("XCKL_STATUS_BAR"),tooltip:this._oRb.getText("XCKL_STATUS_BAR")});r.config.SETTING_ITEM_ENABLE_CURSOR_LINE_KEY="sap_enableCursorLine";r.config.SETTING_ITEM_ENABLE_CURSOR_LINE=new sap.gantt.config.SettingItem({id:"enableCurserLineSettingItem",key:r.config.SETTING_ITEM_ENABLE_CURSOR_LINE_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_CURSOR_LINE"),tooltip:this._oRb.getText("TLTP_CURSOR_LINE")});r.config.SETTING_ITEM_ENABLE_VERTICAL_LINE_KEY="sap_enableVerticalLine";r.config.SETTING_ITEM_ENABLE_ADHOC_LINE_KEY="sap_enableAdhocLine";r.config.SETTING_ITEM_ENABLE_DELTA_LINE_KEY="sap_enableDeltaLine";r.config.SETTING_ITEM_ENABLE_NON_WORKING_TIME_KEY="sap_enableNonWorkingTime";r.config.SETTING_ITEM_ENABLE_VERTICAL_LINE=new sap.gantt.config.SettingItem({id:"enableVerticalLineSettingItem",key:r.config.SETTING_ITEM_ENABLE_VERTICAL_LINE_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_VERTICAL_LINE"),tooltip:this._oRb.getText("TLTP_VERTICAL_LINE")});r.config.SETTING_ITEM_ENABLE_ADHOC_LINE=new sap.gantt.config.SettingItem({id:"enableAdhocLineSettingItem",key:r.config.SETTING_ITEM_ENABLE_ADHOC_LINE_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_ADHOC_LINE"),tooltip:this._oRb.getText("TLTP_ADHOC_LINE")});r.config.SETTING_ITEM_ENABLE_DELTA_LINE=new sap.gantt.config.SettingItem({id:"enableDeltaLineSettingItem",key:r.config.SETTING_ITEM_ENABLE_DELTA_LINE_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_DELTA_LINE"),tooltip:this._oRb.getText("TLTP_DELTA_LINE")});r.config.SETTING_ITEM_ENABLE_NON_WORKING_TIME=new sap.gantt.config.SettingItem({id:"enableNonWorkingTimeSettingItem",key:r.config.SETTING_ITEM_ENABLE_NON_WORKING_TIME_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_NON_WORKING_TIME"),tooltip:this._oRb.getText("XCKL_NON_WORKING_TIME")});r.config.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC_KEY="sap_enableTimeScrollSync";r.config.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC=new sap.gantt.config.SettingItem({id:"enableTimeScrollSyncSettingItem",key:r.config.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC_KEY,checked:true,_isStandard:true,displayText:this._oRb.getText("XCKL_TIME_SCROLL_SYNC"),tooltip:this._oRb.getText("TLTP_TIME_SCROLL_SYNC")});r.config.DEFAULT_TOOLBAR_SETTING_ITEMS=[r.config.SETTING_ITEM_ENABLE_NOW_LINE,r.config.SETTING_ITEM_ENABLE_CURSOR_LINE,r.config.SETTING_ITEM_ENABLE_VERTICAL_LINE,r.config.SETTING_ITEM_ENABLE_ADHOC_LINE,r.config.SETTING_ITEM_ENABLE_DELTA_LINE,r.config.SETTING_ITEM_ENABLE_NON_WORKING_TIME,r.config.SETTING_ITEM_ENABLE_TIME_SCROLL_SYNC,r.config.SETTING_ITEM_ENABLE_STATUS_BAR];r.config.EMPTY_TOOLBAR_SCHEME_KEY="sap_empty_toolbar";r.config.EMPTY_TOOLBAR_SCHEME=new sap.gantt.config.ToolbarScheme({key:r.config.EMPTY_TOOLBAR_SCHEME_KEY,customToolbarItems:new sap.gantt.config.ToolbarGroup({position:"L1",overflowPriority:sap.m.OverflowToolbarPriority.High})});r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY="sap_container_toolbar";r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME=new sap.gantt.config.ToolbarScheme({key:r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY,customToolbarItems:new sap.gantt.config.ToolbarGroup({position:"L1",overflowPriority:sap.m.OverflowToolbarPriority.High}),timeZoom:new sap.gantt.config.TimeZoomGroup({position:"R2",overflowPriority:sap.m.OverflowToolbarPriority.NeverOverflow}),settings:new sap.gantt.config.SettingGroup({position:"R1",overflowPriority:sap.m.OverflowToolbarPriority.Low,items:r.config.DEFAULT_TOOLBAR_SETTING_ITEMS})});r.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY="sap_ganttchart_toolbar";r.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME=new sap.gantt.config.ToolbarScheme({key:r.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME_KEY,customToolbarItems:new sap.gantt.config.ToolbarGroup({position:"L2",overflowPriority:sap.m.OverflowToolbarPriority.High}),expandTree:new sap.gantt.config.ToolbarGroup({position:"L3",overflowPriority:sap.m.OverflowToolbarPriority.Low})});r.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEMES=[r.config.DEFAULT_GANTTCHART_TOOLBAR_SCHEME,r.config.EMPTY_TOOLBAR_SCHEME];r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEMES=[r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME,r.config.EMPTY_TOOLBAR_SCHEME];r.config.DEFAULT_HIERARCHY_KEY="sap_hierarchy";r.config.DEFAULT_HIERARCHY=new sap.gantt.config.Hierarchy;r.config.DEFAULT_HIERARCHYS=[r.config.DEFAULT_HIERARCHY];r.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY="sap_container_layout_single";r.config.DEFAULT_CONTAINER_SINGLE_LAYOUT=new sap.gantt.config.ContainerLayout({key:r.config.DEFAULT_CONTAINER_SINGLE_LAYOUT_KEY,text:this._oRb.getText("XLST_SINGLE_LAYOUT"),toolbarSchemeKey:r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY,ganttChartLayouts:[new sap.gantt.config.GanttChartLayout({activeModeKey:r.config.DEFAULT_MODE_KEY,hierarchyKey:r.config.DEFAULT_HIERARCHY_KEY})]});r.config.DEFAULT_CONTAINER_DUAL_LAYOUT_KEY="sap_container_layout_dual";r.config.DEFAULT_CONTAINER_DUAL_LAYOUT=new sap.gantt.config.ContainerLayout({key:r.config.DEFAULT_CONTAINER_DUAL_LAYOUT_KEY,text:this._oRb.getText("XLST_DUAL_LAYOUT"),toolbarSchemeKey:r.config.DEFAULT_CONTAINER_TOOLBAR_SCHEME_KEY,ganttChartLayouts:[new sap.gantt.config.GanttChartLayout({activeModeKey:r.config.DEFAULT_MODE_KEY,hierarchyKey:r.config.DEFAULT_HIERARCHY_KEY}),new sap.gantt.config.GanttChartLayout({activeModeKey:r.config.DEFAULT_MODE_KEY,hierarchyKey:r.config.DEFAULT_HIERARCHY_KEY})]});r.config.DEFAULT_CONTAINER_LAYOUTS=[r.config.DEFAULT_CONTAINER_SINGLE_LAYOUT,r.config.DEFAULT_CONTAINER_DUAL_LAYOUT];r.config.DEFAULT_LOCALE_CET=new sap.gantt.config.Locale({timeZone:"CET",utcdiff:"000000",utcsign:"+"});r.config.DEFAULT_EMPTY_OBJECT={};r.DIMENSION_LEGEND_NIL="NIL";r.MouseWheelZoomType={FineGranular:"FineGranular",Stepwise:"Stepwise",None:"None"};r.GenericArray=t.createType("sap.gantt.GenericArray",{isValid:function(t){if(typeof t==="string"||t instanceof String){return true}if(Array.isArray(t)){for(var e=0;e<t.length;e++){if(!(typeof t[e]==="string"||t[e]instanceof String||typeof t[e]==="object")){return false}}return true}return false},parseValue:function(t){if(t){if(Array.isArray(t)){return t}else if(typeof t==="string"){var e;if(t.indexOf("[")>-1&&t.indexOf("{")>-1){t=t.replace(/\'/g,'"');e=JSON.parse(t)}else{if(t.indexOf("[")>-1){var n=/^\[(.*)\]$/g;var a=n.exec(t);if(a){t=a[1]}}e=t.split(",");for(var i=0;i<e.length;i++){e[i]=e[i].trim()}}return e}}return t}},t.getType("any"));r.dragdrop.GhostAlignment={Start:"Start",None:"None",End:"End"};r.dragdrop.SnapMode={Left:"Left",Right:"Right",Both:"Both",None:"None"};r.simple.GanttChartWithTableDisplayType={Both:"Both",Chart:"Chart",Table:"Table"};r.simple.ContainerToolbarPlaceholderType={VariantManagement:"VariantManagement",BirdEyeButton:"BirdEyeButton",DisplayTypeButton:"DisplayTypeButton",LegendButton:"LegendButton",SettingButton:"SettingButton",Spacer:"Spacer",TimeZoomControl:"TimeZoomControl"};r.DragOrientation={Horizontal:"Horizontal",Vertical:"Vertical",Free:"Free"};r.simple.VisibleHorizonUpdateType={HorizontalScroll:"HorizontalScroll",InitialRender:"InitialRender",MouseWheelZoom:"MouseWheelZoom",SyncVisibleHorizon:"SyncVisibleHorizon",TimePeriodZooming:"TimePeriodZooming",TotalHorizonUpdated:"TotalHorizonUpdated",ZoomLevelChanged:"ZoomLevelChanged"};r.simple.VisibleHorizonUpdateSubType={ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",NotApplicable:"NotApplicable"};r.simple.exportTableCustomDataType={Numeric:"numeric",DateTime:"dateTime",StringDate:"stringDate",Date:"date",Time:"time",Boolean:"boolean",String:"string",Currency:"currency"};r.simple.horizontalTextAlignment={Start:"Start",End:"End",Middle:"Middle",Dynamic:"Dynamic"};r.simple.verticalTextAlignment={Top:"Top",Bottom:"Bottom",Center:"Center"};r.simple.yAxisColumnContent={ThresholdwithLabelandUOM:"ThresholdwithLabelandUOM",ThresholdwithUOM:"ThresholdwithUOM",ThresholdwithLabel:"ThresholdwithLabel",OnlyThreshold:"OnlyThreshold"};r.simple.MarkerType=a;r.simple.LegendShapeGroupOrientation=i;return r});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/AxisOrdinal", ["sap/gantt/misc/Utility","sap/ui/thirdparty/d3"],function(t){"use strict";var e=function(e,i,n,a,r,s,h,o){this.elementArray=e;this.scaleArray=i;this.padding=t.assign(o,0);this.zoomRate=t.assign(s,1);this.zoomOrigin=t.assign(h,0);this.viewRangeStart=t.assign(a,0);this.viewRangeEnd=r;this.viewBandWidth=n;this.scale=d3.scale.ordinal();this._createScale()};e.prototype.CONSTANT={C_SEPARATOR:"_@@_",C_MESSAGE:{ARGUMENT_ERROR:"AxisOrdinal: Argument Error!"}};e.prototype._createScale=function(){if(typeof this.viewBandWidth!=="undefined"){this.viewRangeEnd=undefined;this.scale.domain(this._calculateInternalValuesByElements()).rangeBands(this._calculateViewRangeByViewBandWidth())}else if(typeof this.viewRangeEnd!=="undefined"){this.viewBandWidth=undefined;this.scale.domain(this._calculateInternalValuesByElements()).rangeBands([this.viewRangeStart,this.viewRangeEnd])}else{}};e.prototype._calculateInternalValuesByElements=function(){var t=[];for(var e=0;e<this.scaleArray.length;e++){var i=this.elementArray[e]+this.CONSTANT.C_SEPARATOR;for(var n=0;n<this.scaleArray[e];n++){t.push(i+n)}}return t};e.prototype._calculateViewRangeByViewBandWidth=function(){var t=0;for(var e=0;e<this.scaleArray.length;e++){t+=this.scaleArray[e]*this.viewBandWidth}return[this.viewRangeStart,this.viewRangeStart+t]};e.prototype.elementToView=function(t){return(this.scale(t+this.CONSTANT.C_SEPARATOR+0)+this.padding-this.zoomOrigin)*this.zoomRate};e.prototype.viewToElement=function(t){var e=t/this.zoomRate+this.zoomOrigin;var i=0;var n=this.elementArray.length-1;while(i<n){var a=Math.ceil((i+n)/2);var r=this.scale(this.elementArray[a]+this.CONSTANT.C_SEPARATOR+0);if(e<r){n=a-1}else{i=a}}var s=this.elementArray[i];var h=this.scale(s+this.CONSTANT.C_SEPARATOR+0);if(e<h+this.padding||e>=h+this.scale.rangeBand()*this.scaleArray[i]){return undefined}return s};e.prototype.viewToElementIndex=function(t){var e=t/this.zoomRate+this.zoomOrigin;var i=0;var n=this.elementArray.length-1;while(i<n){var a=Math.ceil((i+n)/2);var r=this.scale(this.elementArray[a]+this.CONSTANT.C_SEPARATOR+0);if(e<r){n=a-1}else{i=a}}var s=this.elementArray[i];var h=this.scale(s+this.CONSTANT.C_SEPARATOR+0);if(e<h+this.padding||e>=h+this.scale.rangeBand()*this.scaleArray[i]){return-1}return i};e.prototype.viewToBandIndex=function(t){var e=t/this.zoomRate+this.zoomOrigin;var i=this._calculateInternalValuesByElements();var n=0;var a=i.length-1;while(n<a){var r=Math.ceil((n+a)/2);var s=this.scale(i[r]);if(e<s){a=r-1}else{n=r}}var h=this.scale(i[n]);if(e<h+this.padding||e>=h+this.scale.rangeBand()){return-1}return n};e.prototype.viewToRowIndex=function(t,e){var i=t/this.zoomRate+this.zoomOrigin;var n=0;var a=this._calculateViewRangeByViewBandWidth();if(i<=a[1]&&i>=a[0]){return this.viewToElementIndex(t)}else if(jQuery.isNumeric(e)&&e>this.elementArray.length){var r=parseInt((t-a[1]-a[0])/this.viewBandWidth,10);var s=r+this.elementArray.length;n=s}else{return-1}return n};e.prototype.setElements=function(t,e){this.elementArray=t;this.scaleArray=e;this._createScale();return this};e.prototype.getElementArray=function(){return this.elementArray};e.prototype.getScaleArray=function(){return this.scaleArray};e.prototype.setViewRangeStart=function(t){this.viewBandWidth=undefined;this.viewRangeStart=sap.gantt.misc.Utility.assign(t,0);this.scale.rangeRoundBands([this.viewRangeStart,this.viewRangeEnd]);return this};e.prototype.setViewRangeEnd=function(t){this.viewBandWidth=undefined;this.viewRangeEnd=t;this.scale.rangeRoundBands([this.viewRangeStart,this.viewRangeEnd]);return this};e.prototype.getViewRange=function(){var t=this.scale.rangeExtent();return[(t[0]-this.zoomOrigin)*this.zoomRate,(t[1]-this.zoomOrigin)*this.zoomRate]};e.prototype.setViewBandWidth=function(t){this.viewRangeEnd=undefined;this.viewBandWidth=t;this.scale.rangeRoundBands(this._calculateViewRangeByViewBandWidth());return this};e.prototype.getViewBandWidth=function(){return this.scale.rangeBand()*this.zoomRate};e.prototype.setZoomRate=function(t){this.zoomRate=sap.gantt.misc.Utility.assign(t,1);return this};e.prototype.getZoomRate=function(){return this.zoomRate};e.prototype.setZoomOrigin=function(t){this.zoomOrigin=sap.gantt.misc.Utility.assign(t,0);return this};e.prototype.getZoomOrigin=function(){return this.zoomOrigin};e.prototype.clone=function(){return new e(this.elementArray.slice(0),this.scaleArray.slice(0),this.viewBandWidth,this.viewRangeStart,this.viewRangeEnd,this.zoomRate,this.zoomOrigin,this.padding)};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/AxisTime", ["sap/base/util/ObjectPath","sap/ui/core/Core","sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/gantt/simple/GanttUtils"],function(e,t,i,a,o){"use strict";var s={};var n=function(e,t,o,s,n,r,f){this.scale=d3.time.scale().domain(e).range(t).clamp(false);this.timeRange=e;this.viewRange=t;this.zoomRate=i.assign(o,1);this.zoomOrigin=i.assign(s,0);this.viewOffset=i.assign(n,0);this.locale=r;if(r&&r.getUtcdiff()){var l=a.getTimeStampFormatter();this.timeZoneOffset=Math.round((l.parse("20000101"+r.getUtcdiff()).getTime()-l.parse("20000101000000").getTime())/1e3);if(r.getUtcsign()==="-"){this.timeZoneOffset=-this.timeZoneOffset}}this._oZoomStrategy=f};n.prototype.CONSTANT={C_SEPARATOR:"_@@_",C_MESSAGE:{ARGUMENT_ERROR:"AxisOrdinal: Argument Error!"}};n.prototype.timeToView=function(e,i){if(t.getConfiguration().getRTL()!==true){return(this.scale(e)-this.zoomOrigin)*this.zoomRate-(i?0:this.viewOffset)}else{return this.viewRange[1]*this.zoomRate-((this.scale(e)+this.zoomOrigin)*this.zoomRate+(i?0:this.viewOffset))}};n.prototype.viewToTime=function(e,i){if(t.getConfiguration().getRTL()!==true){return this.scale.invert((e+(i?0:this.viewOffset))/this.zoomRate+this.zoomOrigin)}else{return this.scale.invert(this.viewRange[1]-(e+(i?0:this.viewOffset))/this.zoomRate-this.zoomOrigin)}};n.prototype.setTimeRange=function(e){this.timeRange=e;this.scale.domain(e);return this};n.prototype.getTimeRange=function(){return this.scale.domain()};n.prototype.getTimeRangeSlice=function(e,i){var a=this.timeZoneOffset?d3.time.second.offset(this.viewToTime(e),this.timeZoneOffset):this.viewToTime(e);var o=this.timeZoneOffset?d3.time.second.offset(this.viewToTime(i),this.timeZoneOffset):this.viewToTime(i);if(t.getConfiguration().getRTL()!==true){return[a,o]}else{return[o,a]}};n.prototype.setViewRange=function(e){this.viewRange=e;this.scale.range(e);return this};n.prototype.getViewRange=function(){var e=this.scale.range();return[Math.round((e[0]-this.zoomOrigin)*this.zoomRate-this.viewOffset),Math.round((e[1]-this.zoomOrigin)*this.zoomRate-this.viewOffset)]};n.prototype.getZoomStrategy=function(){return this._oZoomStrategy};n.prototype.setZoomRate=function(e){this.zoomRate=i.assign(e,1);return this};n.prototype.getZoomRate=function(){return this.zoomRate};n.prototype.setZoomOrigin=function(e){this.zoomOrigin=i.assign(e,0);return this};n.prototype.getZoomOrigin=function(){return this.zoomOrigin};n.prototype.setViewOffset=function(e){this.viewOffset=i.assign(e,0);return this};n.prototype.getViewOffset=function(){return this.viewOffset};n.prototype.setLocale=function(e){this.locale=e;if(e&&e.getUtcdiff()){var t=a.getTimeStampFormatter();this.timeZoneOffset=Math.round((t.parse("20000101"+e.getUtcdiff()).getTime()-t.parse("20000101000000").getTime())/1e3);if(e.getUtcsign()==="-"){this.timeZoneOffset=-this.timeZoneOffset}}return this};n.prototype.getLocale=function(){return this.locale};n.prototype.clone=function(){return new n([new Date(this.timeRange[0].valueOf()),new Date(this.timeRange[1].valueOf())],this.viewRange.slice(0),this.zoomRate,this.zoomOrigin,this.viewOffset,this.locale,this._oZoomStrategy)};n.prototype._get2dContext=function(e,t){if(!s.context){s.context=document.createElement("canvas").getContext("2d")}if(s.fontSize!==e||s.fontFamily!==t){s.context.font=e+"px "+t;s.fontSize=e;s.fontFamily=t}return s.context};n.prototype._getShapeTextWidth=function(e,t,i){return this._get2dContext(t,i).measureText(e).width};n.prototype.getCurrentTickTimeIntervalLevel=function(){var e=this._oZoomStrategy.getTimeLineOption(),t=this._oZoomStrategy.getTimeLineOptions(),i=0;for(var a in t){if(t[a]===e){return i}i++}};n.prototype.getCurrentTickTimeIntervalKey=function(){var e=this._oZoomStrategy.getTimeLineOption(),t=this._oZoomStrategy.getTimeLineOptions();for(var i in t){if(t[i]===e){return i}}};n.prototype.getNowLabel=function(e){var t=new Date;if(e===undefined||e){t=new Date(t.getTime()+t.getTimezoneOffset()*6e4)}var i=this.timeToView(t);var a=d3.time.second.offset(t,this.timeZoneOffset);return[{date:a,value:Math.round(i)}]};n.prototype.getFirstSmallIntervalIndex=function(e,t){for(var i=0;i<e.length;i++){var o=a.dateToAbapTimestamp(e[i].date);if(o>=t){return i}}};n.prototype.getTickTimeIntervalLabel=function(o,s,r){var f,l,g,h=null;if(this.locale&&this.locale.getDstHorizons().length>0){h=this.locale.getDstHorizons()}var m=a.getTimeStampFormatter();var u=[];if(h){for(f=0;f<h.length;f++){u[f]={};l=h[f].getStartTime();g=h[f].getEndTime();u[f].startDate=m.parse(l);u[f].endDate=m.parse(g)}}var v=this.timeZoneOffset?[d3.time.second.offset(this.timeRange[0],this.timeZoneOffset),d3.time.second.offset(this.timeRange[1],this.timeZoneOffset)]:this.timeRange;var c=new n(v,this.viewRange,this.zoomRate,this.zoomOrigin,this.viewOffset,null,this._oZoomStrategy);var T=null;var d=null;var p=null;var w=null;var O=null;var S=null;var y=null;var R=[];var Z=[];var _=null;if(s){S=this.timeZoneOffset?d3.time.second.offset(s[0],this.timeZoneOffset):s[0];y=this.timeZoneOffset?d3.time.second.offset(s[1],this.timeZoneOffset):s[1];T=this.timeZoneOffset?[d3.time.second.offset(s[0],this.timeZoneOffset),d3.time.second.offset(s[1],this.timeZoneOffset)]:s;d=[this.timeToView(s[0]),this.timeToView(s[1])];if(u&&u.length){this._calculateTimeRange(u,S,y,R)}_=this._calculateScale(R,Z,T,d,false)}else if(r){S=this.timeZoneOffset?d3.time.second.offset(this.viewToTime(r[0]),this.timeZoneOffset):this.viewToTime(r[0]);y=this.timeZoneOffset?d3.time.second.offset(this.viewToTime(r[1]),this.timeZoneOffset):this.viewToTime(r[1]);T=[S,y];d=r;if(u.length){this._calculateTimeRange(u,S,y,R)}_=this._calculateScale(R,Z,T,d,false)}else{S=v[0];y=v[1];T=v;d=this.viewRange;if(u.length){this._calculateTimeRange(u,S,y,R)}_=this._calculateScale(R,Z,T,d,v)}Z=_.viewRangeSet;p=_.visibleScale;w=_.dstScale;O=_.normalScale;var L=[];var z,D,k,b;var C={unit:this._oZoomStrategy.getTimeLineOption().largeInterval.unit,span:this._oZoomStrategy.getTimeLineOption().largeInterval.span};var I={unit:this._oZoomStrategy.getTimeLineOption().smallInterval.unit,span:this._oZoomStrategy.getTimeLineOption().smallInterval.span};var F,x;var P=this._oZoomStrategy.getUpperRowFormatter(),V=this._oZoomStrategy.getLowerRowFormatter();if(C){var M=[];var U=[];var A=[];if(!(p instanceof Array)){M[0]=this._getTimeIntervalTicks(C,p)}else{for(F=0;F<w.length;F++){U[F]=w[F].ticks(e.get(C.unit).range,C.span);A[F]=O[F].ticks(e.get(C.unit).range,C.span)}for(F=0;F<p.length;F++){M[F]=p[F].ticks(e.get(C.unit).range,C.span)}}var E=[];if(M[0]!==null){for(F=0;F<M.length;F++){for(x=0;x<M[F].length;x++){z=M[F][x];k=c.timeToView(z);b=i.getLowerCaseLabel(i.getFormattedDate(P,z));E.push({date:z,value:Math.round(k),label:b})}}}if(U[0]!==null){for(F=0;F<U.length;F++){for(x=0;x<U[F].length;x++){z=U[F][x];D=A[F][x];k=c.timeToView(d3.time.second.offset(z.getTime(),-60*60));b=i.getLowerCaseLabel(i.getFormattedDate(P,z));E.push({date:z,value:Math.round(k),label:b})}}}L.push(E)}else{L.push([])}if(I){var H=[];var G=[];var N=[];if(!(p instanceof Array)){N[0]=this._getTimeIntervalTicks(I,p)}else{for(F=0;F<w.length;F++){H[F]=w[F].ticks(e.get(I.unit).range,I.span);G[F]=O[F].ticks(e.get(I.unit).range,I.span)}for(F=0;F<p.length;F++){N[F]=p[F].ticks(e.get(I.unit).range,I.span)}}var W=[];if(N[0]){for(F=0;F<N.length;F++){for(x=0;x<N[F].length;x++){z=N[F][x];var q;var j=false;if(u.length){for(var K=0;K<u.length;K++){if(z.getTime()===u[K].startDate.getTime()){q=d3.time.second.offset(z.getTime(),60*60);if(x===N[F].length-1&&this._oZoomStrategy.isLowerRowTickHourSensitive()){j=true}}if(x===N[F].length-1&&z.getTime()===d3.time.second.offset(u[K].endDate.getTime(),60*60).getTime()){q=d3.time.second.offset(z.getTime(),-60*60)}}}k=c.timeToView(z);var B;if(j){break}else if(q){B=i.getLowerCaseLabel(i.getFormattedDate(P,q));b=i.getLowerCaseLabel(i.getFormattedDate(V,q));q=null}else{B=i.getLowerCaseLabel(i.getFormattedDate(P,z));b=i.getLowerCaseLabel(i.getFormattedDate(V,z))}W.push({date:z,value:Math.round(k),label:b,largeLabel:B})}}}if(H[0]){for(F=0;F<H.length;F++){for(x=0;x<H[F].length;x++){z=H[F][x];D=G[F][x];var J;var Q=false;if(x===H[F].length-1&&this._oZoomStrategy.isLowerRowTickHourSensitive()){if(R.length>0){for(var X=0;X<R.length;X++){if(!R[X].haveDST&&D.getTime()===R[X].range[0].getTime()){Q=true}}}}if(u.length){for(var Y=0;Y<u.length;Y++){if(z.getTime()===u[Y].startDate.getTime()){J=d3.time.second.offset(z.getTime(),60*60)}if(x===H[F].length-1&&z.getTime()===d3.time.second.offset(u[Y].endDate.getTime(),60*60).getTime()){J=d3.time.second.offset(z.getTime(),-60*60)}}}if(!this._oZoomStrategy.isLowerRowTickHourSensitive()){k=c.timeToView(d3.time.second.offset(z.getTime(),-60*60))}else{k=c.timeToView(D)}if(Q){break}else if(J){b=i.getLowerCaseLabel(i.getFormattedDate(V,J));J=null}else{b=i.getLowerCaseLabel(i.getFormattedDate(V,z))}W.push({date:z,value:Math.round(k),label:b})}}}L.push(W)}else{L.push([])}var $=L[0];var ee=L[1];var te=this.getZoomStrategy().getVisibleHorizon().getStartTime();this.largeIntervalLabel=true;this.largeIntervalPath=false;var ie=this.getFirstSmallIntervalIndex(ee,te);var ae,oe,se=30;var ne,re,fe=0;var le=t.getConfiguration().getRTL();if(ee[ie]){var ge=ee[ie].largeLabel;this.firstTickPosition=ee[ie].value;var he=false;var me=document.querySelector(".sapGanttTimeHeaderSvgText")||document.querySelector(".sapGanttTimeHeaderSvgText0");if(me){var ue=getComputedStyle(me);ne=ue.fontSize;re=ue.fontFamily;fe=Math.ceil(this._getShapeTextWidth(ge,ne,re))+se}ae=le?this.firstTickPosition-fe:this.firstTickPosition+fe;for(f=0;f<$.length;f++){fe=me?Math.ceil(this._getShapeTextWidth($[f].label,ne,re))+se:0;oe=le?$[f].value-fe:$[f].value+fe;var ve=le?$[f].value<this.firstTickPosition&&$[f].value>=ae:$[f].value>this.firstTickPosition&&$[f].value<=ae;var ce=le?this.firstTickPosition<$[f].value&&this.firstTickPosition>=oe:this.firstTickPosition>$[f].value&&this.firstTickPosition<=oe;var Te=$[f].label!==ge;if(ve||ce&&Te){this.largeIntervalLabel=false;break}}if(this.largeIntervalLabel){for(f=0;f<$.length;f++){if($[f].label===ge){if($[f].value===this.firstTickPosition){this.largeIntervalPath=true}$[f].value=this.firstTickPosition;he=true;break}}if(!he){var de={value:this.firstTickPosition,label:ge};L[0].push(de)}}}return L};n.prototype._getTimeIntervalTicks=function(t,i){if(t.unit!==sap.gantt.config.TimeUnit.week){return i.ticks(e.get(t.unit).range,t.span)}var a=["d3.time.sunday","d3.time.monday","d3.time.tuesday","d3.time.wednesday","d3.time.thursday","d3.time.friday","d3.time.saturday"];return i.ticks(e.get(a[this.getZoomStrategy().getFirstDayOfWeek()]).range,t.span)};n.prototype._calculateScale=function(e,t,i,a,o){var s=null;var r=[];var f=[];if(e.length){s=[];var l=0;var g=0;for(var h=0;h<e.length;h++){t[h]=[this.timeToView(e[h].range[0]),this.timeToView(e[h].range[1])];if(e[h].haveDST){r[l]=new n(e[h].dstRange,t[h],this.zoomRate,this.zoomOrigin,this.viewOffset,null,this._oZoomStrategy).scale;f[l]=new n(e[h].range,t[h],this.zoomRate,this.zoomOrigin,this.viewOffset,null,this._oZoomStrategy).scale;l++}else{s[g]=new n(e[h].range,t[h],this.zoomRate,this.zoomOrigin,this.viewOffset,null,this._oZoomStrategy).scale;g++}}}else if(o){s=new n(o,this.viewRange,this.zoomRate,this.zoomOrigin,this.viewOffset,null).scale}else{s=new n(i,a,this.zoomRate,this.zoomOrigin,this.viewOffset,null,this._oZoomStrategy).scale}var m={viewRangeSet:t,visibleScale:s,dstScale:r,normalScale:f};return m};n.prototype._calculateTimeRange=function(e,t,i,a){if(e.length){var o=t;var s=i;var n=[];var r=[];var f,l;f=e[0].startDate;l=e[0].endDate;this._calculateRangeItem(f,l,o,s,n,r);if(e.length>1){for(var g=1;g<e.length;g++){if(n.length){var h=[];for(var m in n){h.push(n[m])}n=[];for(var u=0;u<h.length;u++){f=e[g].startDate;l=e[g].endDate;o=h[u].range[0];s=h[u].range[1];this._calculateRangeItem(f,l,o,s,n,r)}}}}for(var v in r){a.push(r[v])}for(var c in n){a.push(n[c])}}};n.prototype._calculateRangeItem=function(e,t,i,a,o,s){var n=null;if(i<e){if(a<t){if(a>e){n={};n.haveDST=false;n.range=[i,e];o.push(n);n={};n.haveDST=true;n.range=[e,a];n.dstRange=[d3.time.second.offset(e.getTime(),60*60),d3.time.second.offset(a,60*60)];s.push(n)}else{n={};n.haveDST=false;n.range=[i,a];o.push(n)}}else{n={};n.haveDST=false;n.range=[i,e];o.push(n);n={};n.haveDST=true;n.range=[e,t];n.dstRange=[d3.time.second.offset(e.getTime(),60*60),d3.time.second.offset(t.getTime(),60*60)];s.push(n);n={};n.haveDST=false;n.range=[t,a];o.push(n)}}else if(i>=e){if(i<t){if(a<=t){n={};n.haveDST=true;n.range=[i,a];n.dstRange=[d3.time.second.offset(i,60*60),d3.time.second.offset(a,60*60)];s.push(n)}else{n={};n.haveDST=true;n.range=[i,t];n.dstRange=[d3.time.second.offset(i,60*60),d3.time.second.offset(t.getTime(),60*60)];s.push(n);n={};n.haveDST=false;n.range=[t,a];o.push(n)}}else{n={};n.haveDST=false;n.range=[i,a];o.push(n)}}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/Format", ["sap/ui/core/format/DateFormat","sap/ui/thirdparty/d3"],function(t){"use strict";var e=function(){throw new Error};e._oDefaultDateTimeFormat=t.getDateTimeInstance();e.abapTimestampToDate=function(t){if(typeof t==="string"){var e=new Date(t.substr(0,4),parseInt(t.substr(4,2),0)-1,t.substr(6,2),t.substr(8,2),t.substr(10,2),t.substr(12,2));if(!jQuery.isNumeric(e.getTime())){e=new Date(t);if(!isNaN(e.getTime())&&e.toISOString()===t){return this.abapTimestampToDate(this.isoTimestampToAbapTimestamp(t))}}return e}else if(jQuery.type(t)==="date"){return t}return null};e.isoTimestampToAbapTimestamp=function(t){if(t){var e=new Date(t);return""+e.getUTCFullYear()+(e.getUTCMonth()<9?"0":"")+(e.getUTCMonth()+1)+(e.getUTCDate()<10?"0":"")+e.getUTCDate()+(e.getUTCHours()<10?"0":"")+e.getUTCHours()+(e.getUTCMinutes()<10?"0":"")+e.getUTCMinutes()+(e.getUTCSeconds()<10?"0":"")+e.getUTCSeconds()}return""};e.dateToAbapTimestamp=function(t){if(t){return""+t.getFullYear()+(t.getMonth()<9?"0":"")+(t.getMonth()+1)+(t.getDate()<10?"0":"")+t.getDate()+(t.getHours()<10?"0":"")+t.getHours()+(t.getMinutes()<10?"0":"")+t.getMinutes()+(t.getSeconds()<10?"0":"")+t.getSeconds()}return""};e.abapTimestampToTimeLabel=function(t,e){var a=sap.gantt.misc.Format._convertUTCToLocalTime(t,e);var r=sap.gantt.misc.Format._oDefaultDateTimeFormat.format(a);return r};e.relativeTimeToAbsolutTime=function(t,e,a,r){t=t!==undefined?t:0;e=e!==undefined?e:0;a=a!==undefined?a:0;r=r!==undefined?r:0;var i=this.abapTimestampToDate("20120101000000");var n=new Date;n.setTime(i.getTime()+r*1e3+a*60*1e3+e*3600*1e3+t*24*3600*1e3);return n};e.absolutTimeToRelativeTime=function(t){var e=this.abapTimestampToDate("20120101000000");var a=t.getTime()-e.getTime();var r=Math.floor(a/(24*3600*1e3));var i=a%(24*3600*1e3);var n=Math.floor(i/(3600*1e3));i=i%(3600*1e3);var o=Math.floor(i/(60*1e3));i=i%(60*1e3);var s=Math.floor(i/1e3);var m={intervalDays:r,intervalHours:n,intervalMinutes:o,intervalSecond:s};return m};e._convertUTCToLocalTime=function(t,e){var a=0;if(e&&e.getUtcdiff()){var r=this.getTimeStampFormatter();a=Math.round((r.parse("20000101"+e.getUtcdiff()).getTime()-r.parse("20000101000000").getTime())/1e3);if(e.getUtcsign()==="-"){a=-a}}var i=sap.gantt.misc.Format.abapTimestampToDate(t);var n=d3.time.second.offset(i,a);var o=e.getDstHorizons();if(o.length>0){for(var s=0;s<o.length;s++){var m=sap.gantt.misc.Format.abapTimestampToDate(o[s].getStartTime());var T=sap.gantt.misc.Format.abapTimestampToDate(o[s].getEndTime());if(n>=m&&n<=T){n=d3.time.second.offset(n,60*60)}}}return n};e.getTimeStampFormatter=function(){return d3.time.format("%Y%m%d%H%M%S")};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/RelativeTimeFormatter", ["sap/base/util/ObjectPath"],function(t){"use strict";var e=function(e,i,s){this.oBaseTime=e;this.sUnit=i;this.sPrefix=s;this.iIntervalMillisecond=t.get(i).offset(e,1).getTime()-e.getTime()};e.prototype.format=function(t){var e;var i=Math.floor((t.getTime()-this.oBaseTime.getTime())/this.iIntervalMillisecond)+1;e=this.sPrefix+" "+i;return e};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/ShapeManager", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/base/EventProvider","./Utility","sap/gantt/shape/ResizeShadowShape","sap/gantt/shape/ext/rls/SelectedRelationship","sap/gantt/shape/SelectedShape","sap/gantt/shape/Group","sap/gantt/shape/Text"],function(jQuery,e,t,a,n){"use strict";var i=a.extend("sap.gantt.misc.ShapeManager",{constructor:function(e){a.apply(this);this.mShapeElementIds={};this.mShapeConfig={};this.mShapeInstance={};this.aShapeInstance=[];this.oGantt=e}});i.prototype.instantiateShapes=function(e){this.mShapeConfig={};for(var t=0;t<e.length;t++){this.mShapeConfig[e[t].getKey()]=e[t]}return this.recursiveInstantiateShapes(this.mShapeConfig).then(function(e){this.aShapeInstance=e;jQuery.each(this.aShapeInstance,function(e,t){this.mShapeInstance[t.mShapeConfig.getKey()]=t}.bind(this))}.bind(this))};i.prototype.getAllShapeInstances=function(){return this.aShapeInstance};i.prototype.getSelectedShapeInstance=function(e,t){if(this.bDestroyed){return Promise.reject()}var a=t.getCategory(null,this.oGantt.getAxisTime(),this.oGantt.getAxisOrdinal());var n=e.getSelectedClassName();if(!n){if(a===sap.gantt.shape.ShapeCategory.Relationship){n="sap.gantt.shape.ext.rls.SelectedRelationship"}else{n="sap.gantt.shape.SelectedShape"}}return this.instantiateShapeClass(n)};i.prototype.recursiveInstantiateShapes=function(e,t){var a=function(a){var n;var i=t?t:a;var s=t?t+"_"+a:a;var r=e[a];var h=r.getShapeClassName();if(h){return this.instantiateShapeClass(h).then(function(e){n=e;this.setSpecialProperty(n,r);this.setShapeElementId(s,i,n.getId());var a;if(!t){a=this.getSelectedShapeInstance(r,n).then(function(e){this.setSpecialProperty(e,r);n.setAggregation("selectedShape",e);s=i+"_selected"+i;this.setShapeElementId(s,undefined,e.getId());return this._createResizeShadowShape(r,n,i+"_resizeShadow"+i)}.bind(this))}else{a=Promise.resolve()}a=a.then(function(){var e=r.getGroupAggregation();if(e&&e instanceof Array){return this.recursiveInstantiateShapes(e,i).then(function(e){e.forEach(n.addShape,n)})}}.bind(this)).then(function(){var e=r.getClippathAggregation();if(e&&e instanceof Array){return this.recursiveInstantiateShapes(e,i).then(function(e){e.forEach(n.addPath,n)})}return n}.bind(this));return a}.bind(this))}else{return Promise.resolve(null)}}.bind(this);return Promise.all(Object.keys(e).map(a)).then(function(e){e=e.filter(function(e){return!!e});if(!t){this.sortByShapeLevelAccendingly(e)}return e}.bind(this))};i.prototype.setSpecialProperty=function(e,t){e.mShapeConfig=t;e.mChartInstance=this.oGantt;e.dataSet=[]};i.prototype.sortByShapeLevelAccendingly=function(e){e.sort(function(e,t){var a=e.mShapeConfig.getLevel(),n=t.mShapeConfig.getLevel();var i=jQuery.isNumeric(a)?a:99;var s=jQuery.isNumeric(n)?n:99;return s-i})};i.prototype.loadClass=function(e){return new Promise(function(a){var n=t.get(e);if(n){a(n)}else{sap.ui.require([e.replace(/\./g,"/")],function(e){a(e)})}})};i.prototype.instantiateShapeClass=function(t){return this.loadClass(t).then(function(a){var n=new a;if(!n){e.error("shapeClassName:"+t+" can't be instantiated");e.warning("shapeClassName:"+t+" fallback to sap.gantt.shape.Shape");n=new sap.gantt.shape.Shape}return n})};i.prototype.isShapeSelectable=function(e,t){return this.getShapePropertyValue("enableSelection",e,t)};i.prototype.isShapeResizable=function(e,t){return this.getShapePropertyValue("enableResize",e,t)};i.prototype.isShapeDuration=function(e,t){return this.getShapePropertyValue("isDuration",e,t)};i.prototype.isShapeHoverable=function(e,t){return this.getShapePropertyValue("enableHover",e,t)};i.prototype.getShapePropertyValue=function(e,t,a){var n,i;if(t){n=this.getShapeInstance(t,a)||sap.ui.getCore().byId(a);var s="get"+e.substr(0,1).toUpperCase()+e.substr(1);i=n&&n[s]?n[s](t):i}return i};i.prototype.isShapeDraggable=function(e,t){return this.getShapePropertyValue("enableDnD",e,t)};i.prototype.setShapeElementId=function(e,t,a){this.mShapeElementIds[e]={shapeElementId:a,shapeKey:t}};i.prototype.getShapeInstance=function(e,t){var a={};if(t){a=this._getShapeElementConfig(t)}else{var i=n.getShapeDataNameByUid(e.uid);for(var s in this.mShapeInstance){var r=this.mShapeInstance[s].mShapeConfig.getShapeDataName();if(i===r){a=this.mShapeElementIds[s];break}}}return this.mShapeInstance[a?a.shapeKey:null]};i.prototype._getShapeElementConfig=function(e){for(var t in this.mShapeElementIds){var a=this.mShapeElementIds[t];if(a.shapeElementId===e){return a}}return null};i.prototype.collectDataForSelectedShapes=function(e,t,a){var i=this.mShapeInstance;for(var s in i){var r=i[s];var h=r.mShapeConfig.getShapeDataName();var p=r.getAggregation("selectedShape");var o=p.getCategory(null,this.oGantt.getAxisTime(),this.oGantt._oAxisOrdinal);p.dataSet=[];if(o===sap.gantt.shape.ShapeCategory.Relationship){var S=e.getSelectedRelationships();p.dataSet.push({shapeData:S})}else{var l=e.getSelectedShapeDatum();for(var g=0;g<l.length;g++){var c=l[g];if(n.getShapeDataNameByUid(c.uid)!==h){continue}var u=n.getRowDatumByShapeUid(c.uid,this.oGantt.getId());var f=e.isSelectedShapeVisible(c.uid,this.oGantt.getId());if(u&&f&&this.isShapeSelectable(c,r.getId())&&this.isShapeDisplayableInRow(u,s,t,a)){p.dataSet.push({objectInfoRef:u,shapeData:[c]})}}}}};i.prototype.collectDataForAllShapeInstances=function(e,t,a){var n=true;var i=this.mShapeInstance;for(var s in i){var r=i[s];var h;var p=r.mShapeConfig.getShapeDataName();r.dataSet=[];if(r._attributeNameBindingMap){r._attributeNameBindingMap=undefined}for(var o=0;o<e.length;o++){var S=e[o];if(!p){r.dataSet.push({objectInfoRef:S,shapeData:S.data});continue}var l=this.isShapeDisplayableInRow(S,s,t,a);if(!l){continue}if(n){h=S.data[p]}else if(p===S.shapeName){h=S.shapeData}else{continue}if(h){r.dataSet.push({objectInfoRef:S,shapeData:h})}}}};i.prototype.isShapeDisplayableInRow=function(e,t,a,n){var i;if(e.chartScheme){i=e.chartScheme}else{i=a[e.type]?a[e.type].getMainChartSchemeKey():sap.gantt.config.DEFAULT_CHART_SCHEME_KEY}var s=n[i];if(s===undefined){return false}var r=s.getShapeKeys();var h=s.getModeKey()!==sap.gantt.config.DEFAULT_MODE_KEY?s.getModeKey():this.oGantt.getMode();var p=this.mShapeConfig;if(i!==sap.gantt.config.DEFAULT_CHART_SCHEME_KEY&&r.indexOf(t)===-1||h!==sap.gantt.config.DEFAULT_MODE_KEY&&p[t].getModeKeys()&&p[t].getModeKeys().length>0&&p[t].getModeKeys().indexOf(h)<0||!e.data){return false}return true};i.prototype.isRelationshipDisplayable=function(e){var t=this.mShapeConfig;var a=e.mShapeConfig.getKey();var n=t[a]?t[a].getModeKeys():[];if(jQuery.inArray(this.oGantt.getMode(),n)===-1&&this.oGantt.getMode()!==sap.gantt.config.DEFAULT_MODE_KEY){return false}return true};i.prototype.getResizeShadowShapeInstance=function(e,t){if(this.bDestroyed){return Promise.reject()}var a=t.getCategory(null,this.oGantt.getAxisTime(),this.oGantt.getAxisOrdinal());var n=e.getResizeShadowClassName();if(!n||n===""){if(a===sap.gantt.shape.ShapeCategory.InRowShape){n="sap.gantt.shape.ResizeShadowShape"}else{return Promise.resolve(null)}}return this.instantiateShapeClass(n)};i.prototype._createResizeShadowShape=function(e,t,a){return this.getResizeShadowShapeInstance(e,t).then(function(n){if(this.bDestroyed){return}if(n){this.setSpecialProperty(n,e);t.setAggregation("resizeShadowShape",n);this.setShapeElementId(a,undefined,n.getId())}}.bind(this))};i.prototype.destroy=function(){this.bDestroyed=true};i.prototype._createResizeShadowShapeSync=function(e,t,a){var n=this.getResizeShadowShapeInstanceSync(e,t);if(n){this.setSpecialProperty(n,e);t.setAggregation("resizeShadowShape",n);this.setShapeElementId(a,undefined,n.getId())}};i.prototype.getResizeShadowShapeInstanceSync=function(e,t){var a=null;var n=t.getCategory(null,this.oGantt.getAxisTime(),this.oGantt.getAxisOrdinal());var i=e.getResizeShadowClassName();if(!i||i===""){if(n===sap.gantt.shape.ShapeCategory.InRowShape){i="sap.gantt.shape.ResizeShadowShape"}else{return null}}a=this.instantiateShapeClassSync(i);return a};i.prototype.instantiateShapeClassSync=function(a){var n=t.get(a);if(!n){throw new Error("Class "+a+" not preloaded. Please add it to require of your"+" controller to ensure that it's initialized before this point or use Gantt 2.0.")}var i=new n;if(!i){e.error("shapeClassName:"+a+" can't be instantiated");e.warning("shapeClassName:"+a+" fallback to sap.gantt.shape.Shape");i=new sap.gantt.shape.Shape}return i};i.prototype.recursiveInstantiateShapesSync=function(e,t){var a=[],n;for(var i in e){var s=t?t:i;var r=t?t+"_"+i:i;var h=e[i];var p=h.getShapeClassName();if(p){n=this.instantiateShapeClassSync(p);this.setSpecialProperty(n,h);this.setShapeElementId(r,s,n.getId());if(!t){var o=this.getSelectedShapeInstanceSync(h,n);this.setSpecialProperty(o,h);n.setAggregation("selectedShape",o);r=s+"_selected"+s;this.setShapeElementId(r,undefined,o.getId());this._createResizeShadowShapeSync(h,n,s+"_resizeShadow"+s)}var S=h.getGroupAggregation();if(S&&S instanceof Array){var l=this.recursiveInstantiateShapesSync(S,s);for(var g=0;g<l.length;g++){n.addShape(l[g])}}var c=h.getClippathAggregation();if(c&&c instanceof Array){var u=this.recursiveInstantiateShapesSync(c,s);for(var f=0;f<u.length;f++){n.addPath(u[f])}}}a.push(n)}if(!t){this.sortByShapeLevelAccendingly(a)}return a};i.prototype.getSelectedShapeInstanceSync=function(e,t){var a=null;var n=t.getCategory(null,this.oGantt.getAxisTime(),this.oGantt.getAxisOrdinal());var i=e.getSelectedClassName();if(!i){if(n===sap.gantt.shape.ShapeCategory.Relationship){i="sap.gantt.shape.ext.rls.SelectedRelationship"}else{i="sap.gantt.shape.SelectedShape"}}a=this.instantiateShapeClassSync(i);return a};i.prototype.instantiateShapesSync=function(e){this.mShapeConfig={};for(var t=0;t<e.length;t++){this.mShapeConfig[e[t].getKey()]=e[t]}this.aShapeInstance=this.recursiveInstantiateShapesSync(this.mShapeConfig);jQuery.each(this.aShapeInstance,function(e,t){this.mShapeInstance[t.mShapeConfig.getKey()]=t}.bind(this))};return i});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/ShapeSelectionModel", ["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/gantt/misc/Utility"],function(jQuery,e,t){"use strict";var i=e.extend("sap.gantt.misc.ShapeSelectionModel",{constructor:function(t,i){e.apply(this,arguments);this.aSelectedRelationships=[];this.mSelectedShapes={uid:[],shapes:[]}},metadata:{properties:{selectionMode:{type:"sap.gantt.SelectionMode",defaultValue:sap.gantt.SelectionMode.MultiWithKeyboard}},associations:{ganttChart:{type:"sap.gantt.GanttChart",multiple:false}}}});var a={Row:"Row",Shape:"Shape"};i.prototype.clearAllSelections=function(){var e=this.clearShapeSelection();var t=this.clearRelationshipSelection();return e&&t};i.prototype.clearShapeSelection=function(){if(this.mSelectedShapes.uid.length===0){return false}this.mSelectedShapes.uid=[];return true};i.prototype.clearRelationshipSelection=function(){if(this.aSelectedRelationships.length===0){return false}this.aSelectedRelationships=[];return true};i.prototype.getSelectedShapeDatum=function(){var e=[];var t=this.mSelectedShapes.uid.length;for(var i=0;i<t;i++){var a=this.mSelectedShapes.uid[i];var n=this.getShapeDatumByShapeUid(a);if(n){e.push(n)}}return e};i.prototype.getSelectedRelationships=function(){return this.aSelectedRelationships};i.prototype.isShapeSelected=function(e){return jQuery.inArray(e,this.mSelectedShapes.uid)===-1?false:true};i.prototype.isRelationshipSelected=function(e){return this.aSelectedRelationships.some(function(t){return t.uid===e})};i.prototype.isSelectedShapeVisible=function(e,i){var a=t.getIdByUid(e);var n=t.getShapeDatumById(a,i);return n.some(function(t){return t.uid===e})};i.prototype.changeShapeSelection=function(e,i,a,n,r){var o,l;if(this.getSelectionMode()===sap.gantt.SelectionMode.None){return{shapeSelectionChange:false,relationshipSelectionChange:false}}var s=t.getShapeDataNameByUid(e.uid)===sap.gantt.shape.ShapeCategory.Relationship;var h=a&&this.getSelectionMode()===sap.gantt.SelectionMode.MultiWithKeyboard||this.getSelectionMode()===sap.gantt.SelectionMode.Multiple;if(h){if(s){if(this.isRelationshipSelected(e.uid)){l=this.deselectRelationship(e.uid)}else{l=this.selectRelationship(e)}}else{if(this.isShapeSelected(e.uid)&&!n&&!r){o=this.deselectShape(e.uid)}else{o=this.selectByShapeData(e)}}}else{if(s){if(!this.isRelationshipSelected(e.uid)){l=this.clearRelationshipSelection();o=this.clearShapeSelection();l=this.selectRelationship(e)?true:l}}else{if(!this.isShapeSelected(e.uid)&&!n&&!r){l=this.clearRelationshipSelection();o=this.clearShapeSelection();o=this.selectByShapeData(e)?true:o}}}return{shapeSelectionChange:o,relationshipSelectionChange:l}};i.prototype.selectByShapeData=function(e){if(!e||this.isShapeSelected(e.uid)){return false}this.mSelectedShapes.uid.push(e.uid);return true};i.prototype.selectShapeByUid=function(e){var t;if(e&&e.length>0){for(var i=0;i<e.length;i++){t=t||this.selectByShapeData(this.getShapeDatumByShapeUid(e[i]))}}return t};i.prototype.deselectShape=function(e){var t=jQuery.inArray(e,this.mSelectedShapes.uid);if(t>=0){this.mSelectedShapes.uid.splice(t,1)}else{return false}return true};i.prototype.selectShapes=function(e,t){if(!e||e.length===0){return this.clearShapeSelection()}var i;if(t){i=this.clearShapeSelection()}var a=this._getShapeDatumForSelection(e);for(var n=0;n<a.length;n++){i=this.selectByShapeData(a[n])?true:i}return i};i.prototype.deselectShapes=function(e){if(!e||e.length===0){return this.clearShapeSelection()}var t;var i=this.getSelectedShapeDatum();for(var a=0;a<i.length;a++){var n=i[a];if(jQuery.inArray(n.__id__,e)>=0){t=this.deselectShape(n.uid)?true:t}}return t};i.prototype.selectRelationship=function(e){if(this.isRelationshipSelected(e.uid)){return false}this.aSelectedRelationships.push(e);return true};i.prototype.deselectRelationship=function(e){var t=this;var i=jQuery.each(this.aSelectedRelationships,function(i,a){if(a&&a.uid===e){t.aSelectedRelationships.splice(i,1);return true}});return i?true:false};i.prototype.selectRelationships=function(e,t){if(!e||e.length===0){return this.clearRelationshipSelection()}var i;if(t){i=this.clearRelationshipSelection()}for(var a=0;a<e.length;a++){i=this.selectRelationship(e[a])?true:i}return i};i.prototype.deselectRelationships=function(e){if(!e||e.length===0){return this.clearRelationshipSelection()}else{var t;for(var i in this.aSelectedRelationships){var a=this.aSelectedRelationships[i];if(jQuery.inArray(a.id,e)>=0){t=this.deselectRelationship(a.uid)?true:t}}return t}};i.prototype.selectUnderlyingTableRows=function(e,t,i){var a=this._getSelectionHandler(t);var n=a.getSelectedIndices();if(i&&n.length>0){a.clearSelection()}var r=this._getRowDatumForSelection(e,t);for(var o=0;o<r.length;o++){var l=r[o];var s=this.getSelectionMode();if(s===sap.gantt.SelectionMode.Multiple||s===sap.gantt.SelectionMode.MultiWithKeyboard){a.addSelectionInterval(l.rowIndex,l.rowIndex)}else{a.setSelectedIndex(l.rowIndex)}}};i.prototype.deselectUnderlyingTableRows=function(e,t){if(!e||e.length===0){this._getSelectionHandler(t).clearSelection();return}var i=this._getRowDatumForSelection(e,t);for(var a=0;a<i.length;a++){var n=i[a];if(n){this._getSelectionHandler(t).removeSelectionInterval(n.rowIndex,n.rowIndex)}}};i.prototype.getShapeDatumByShapeUid=function(e){return this._getDatumByUid(e,a.Shape)};i.prototype.getRowDatumByShapeUid=function(e){return this._getDatumByUid(e,a.Row)};i.prototype._getDatumByUid=function(e,i){var n=this._getGanttChart();var r;if(a.Shape===i){r=t.getShapeDatumByShapeUid(e,n.getId())}else{r=t.getRowDatumByShapeUid(e,n.getId())}if(r){return r}var o,l;var s=t.getShapeDataNameByUid(e);var h=n._oTT.getBinding("rows").getMetadata().getName()==="sap.ui.model.json.JSONTreeBinding";var p=t.getChartSchemeByShapeUid(e);var u=n.getAllRowData();jQuery.each(u,function(t,i){var a=i;if(p===""||p===a.chartScheme){if(h&&a.data[s]){for(var n=0;n<a.data[s].length;n++){if(a.data[s][n].uid===e){o=a;l=a.data[s][n];return false}}}else if(a.data.uid===e){o=a;l=a.data;return false}}});if(i===a.Shape){return l}return o};i.prototype._getRowDatumForSelection=function(e,i){var n=e?e:[],r=t.getRowDatumRefById(n,i.getParent().getId()),o=r.length===n.length;if(!o){var l=this._lookupInvisibleDatum(n,r,a.Row);r=r.concat(l)}return r};i.prototype._getShapeDatumForSelection=function(e){var i=this._getGanttChart();var n=e?e:[];var r=t.getShapeDatumById(n,i.getId()),o=r.length===n.length;if(!o){var l=this._lookupInvisibleDatum(n,r,a.Shape);r=r.concat(l)}return r};i.prototype._lookupInvisibleDatum=function(e,t,i){var n=this._getInvisibleIds(e,t,i);var r=[];if(n.length>0){var o=this._getGanttChart(),l=o.getShapeDataNames();var s=o.getAllRowData();var h=function(e,t){var i=null;jQuery.each(l,function(a,n){var r;if(typeof n==="string"){r=n}else{r=n.name}var o=e.data[r];if(o){jQuery.each(o,function(e,a){if(a.__id__==t){i=a;return false}});if(i){return false}}});return i};var p=function(e,t){var i=null;jQuery.each(s,function(n,r){if(t===a.Shape){i=h(r,e);if(i){return false}}else{if(r.id==e){i=r;return false}}});return i};r=n.map(function(e){return p(e,i)})}return r};i.prototype._getInvisibleIds=function(e,t,i){var n=t.map(function(e){if(i===a.Shape){return e.__id__}return e.id});return e.filter(function(e){return jQuery.inArray(e,n)===-1})};i.prototype._getGanttChart=function(){return sap.ui.getCore().byId(this.getGanttChart())};i.prototype._getSelectionHandler=function(e){return e._oSelectionPlugin||e};return i});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/misc/Utility", ["sap/base/assert","sap/base/util/array/uniqueSort","sap/base/util/uid","sap/gantt/misc/Format","sap/gantt/library","sap/gantt/config/TimeHorizon","sap/base/Log","sap/ui/core/Core","sap/ui/core/format/TimezoneUtil"],function(e,t,a,i,n,r,o,u,s){"use strict";var d={};d.assign=function(e,t){if(typeof e!==typeof t){return t}else if(typeof e==="undefined"||e===null){return t}else{return e}};d.assignDeep=function(e,t){if(!e&&!t){return null}else if(e&&!t){return e}else if(!e&&t){return t}else if(typeof e==="object"&&typeof t==="object"){var a=e;for(var i in t){if(typeof a[i]!=="boolean"&&!a[i]){a[i]=t[i]}else if(typeof t[i]==="object"&&typeof a[i]==="object"){a[i]=this.assignDeep(a[i],t[i])}}return a}else{return e}};d.generateRowUid=function(e,t,i,n,r){jQuery.each(e,function(e,t){t.uid=t.id;if(n){t.uid=n+"|"+t.uid}else if(t.bindingObj&&t.bindingObj.findNode){var o=t.bindingObj.findNode(t.rowIndex);while(o.parent&&o.level>0){o=o.parent;t.uid=o.context.getObject()[r]+"|"+t.uid}}var u=t.index===undefined?-1:t.index;var s=t.chartScheme===undefined?"":t.chartScheme;t.uid="PATH:"+t.uid+"|SCHEME:"+s+"["+u+"]";t.data.uid=t.uid;for(var d=0;d<i.length;d++){var f,c;if(typeof i[d]==="string"){f=i[d];c="id"}else{f=i[d].name;c=i[d].idName?i[d].idName:"id"}if(f in t.data){for(var p=0;p<t.data[f].length;p++){var l=t.data[f][p];if(l[c]===undefined){l[c]=a()}l.uid=t.uid+"|DATA:"+f+"["+l[c]+"]";l.__id__=l[c]}}}})};d.getChartSchemeByShapeUid=function(e){return d.parseUid(e).chartScheme||""};d.generateUidForRelationship=function(e,t){var i="relationship";var n="PATH:DUMMY|SCHEME:DUMMY[0]";for(var r=0;r<e.length;r++){if(e[r][t]===undefined){e[r][t]=a()}e[r].uid=n+"|DATA:"+i+"["+e[r][t]+"]";e[r].__id__=e[r][t]}};d.generateObjectPathToObjectMap=function(e,t,a){var i;for(var n in e){var r=e[n],o,u;if(r.objectInfoRef){o=r.objectInfoRef.id;r=r.objectInfoRef}else{o=r.id}if(a&&a!=""){o=a.concat(".").concat(o)}u=o.concat("-").concat(d.parseUid(r.uid).rowIndex);t[u]=r;if(r.children&&r.children.length>0){i=this.generateObjectPathToObjectMap(r.children,t,o)}}return i};d.getShapeDataNameByUid=function(e){return d.parseUid(e).shapeDataName};d.getIdByUid=function(e,t){return t?d.parseUid(e).rowId:d.parseUid(e).shapeId};d.parseUid=function(e){var t=/(PATH:(.+)\|SCHEME:(.*?\[-?\d+\]))(?:\|DATA:(.+)\[(.*)\])?$/g;var a=t.exec(e);var i={};if(a){var n=a[3];if(n){var r=n.match(/\[-?\d+\]/)[0].slice(1,-1);n=n.replace(/\[-?\d+\]/,"")}var u=a[1],s=a[2],d=s.split("|"),f=d[d.length-1];i={rowId:f,rowPath:s,rowUid:u,chartScheme:n,shapeDataName:a[4],shapeId:a[5],rowIndex:r}}else{o.warning("UID "+e+" does not match regular expression.")}return i};d.scaleBySapUiSize=function(e,t){switch(e){case"sapUiSizeCozy":return t*1.5;case"sapUiSizeCondensed":return t*.78;default:return t}};d.findSapUiSizeClass=function(){if(document.body.classList.contains("sapUiSizeCondensed")){return"sapUiSizeCondensed"}else if(document.body.classList.contains("sapUiSizeCompact")){return"sapUiSizeCompact"}else if(document.body.classList.contains("sapUiSizeCozy")){return"sapUiSizeCozy"}else{return"sapUiSizeCozy"}};d.floatEqual=function(e,t){return Math.abs(e-t)<1e-4};d.calculateStringLength=function(e){var t=0;if(e.match("[一-鿿]")===null){t=e.length}else{t=e.length+e.match(/[\u4E00-\u9FFF]/g).length}return t};d.judgeTimeHorizonValidity=function(e,t){if(!e||!e.getStartTime()||!e.getEndTime()){return false}var a=i.abapTimestampToDate(e.getStartTime()).getTime(),n=i.abapTimestampToDate(e.getEndTime()).getTime(),r=i.abapTimestampToDate(t.getStartTime()).getTime(),o=i.abapTimestampToDate(t.getEndTime()).getTime();return a-r>=0&&o-n>=0};d.getShapeDatumById=function(e,t){return d.getDatumById(e,"sap-gantt-shape-id",t)};d.getRowDatumById=function(e,t){return d.getDatumById(e,"sap-gantt-row-id",t)||[]};d.getRowDatumRefById=function(e,t){return d.getRowDatumById(e,t).map(function(e){return e.objectInfoRef})};d.getRowDatumByShapeUid=function(e,t){var a=this.parseUid(e),i=a.rowUid,n=a.rowId;var r=null;var o=this.getRowDatumById(n,t);var u=o.filter(function(e){return e.objectInfoRef.uid.indexOf(i)>=0});if(u.length>0){r=u[0].objectInfoRef}return r};d.getShapeDatumByShapeUid=function(e,t){var a=this.parseUid(e),i=a.shapeId,n=a.rowUid;var r=this.getShapeDatumById(i,t);var o=r.filter(function(e){return e.uid.indexOf(n)>=0});return o[0]};d.getRowDatumByEventTarget=function(e){var t=null;var a=jQuery(e).closest("g[data-sap-gantt-row-id]");if(a.length){t=d3.select(a.get(0)).datum()}return t};d.getDatumById=function(a,i,n){e(typeof a==="string"||a instanceof Array,"vId must be string or array");e(n,"sContainer must specify");var r=a?a:"";var o=r;if(typeof r==="string"){o=[r]}var u=[];o.forEach(function(e){var t=["[id='",n,"']"," [data-",i,"='",e,"']"].join("");jQuery(t).each(function(e,t){var a=d3.select(t),i=a.datum();var n=u.some(function(e){var t=e.uid||e.objectInfoRef.uid,a=i.uid||i.objectInfoRef.uid;if(t!==a){return false}else{var n=e.shapeData?e.shapeData.length:0;var r=i.shapeData?i.shapeData.length:0;return n===r}});if(!n){u.push(i)}})});return t(u)};d.attributeEqualSelector=function(e,t){return"["+e+"="+"'"+t+"'"+"]"};d.calculateHorizonByWidth=function(e,t,a,n){var o=i.abapTimestampToDate(e.getStartTime());var u=i.abapTimestampToDate(e.getEndTime());var s=Math.abs(o.getTime()-u.getTime())/t;var d;if(n){d=n}else{d=o}var f=new Date;if(isFinite(s)&&typeof s==="number"&&isFinite(a)&&typeof a==="number"){f.setTime(d.getTime()+a*s)}else{f=u}return new r({startTime:d,endTime:f})};d.safeCall=function(e,t,a,i){var n=e;for(var r=0;r<t.length;r++){var o=t[r];if(!n||typeof n[o]!=="function"){return a}else if(r<t.length-1){n=n[o]()}else{n=n[o].apply(n,i)}}return n};d.getShapeBias=function(e){var t=u.getConfiguration().getRTL(),a=t?-e.getXBias():e.getXBias(),i=e.getYBias();return{x:a,y:i}};d.getLowerCaseLabel=function(e){if(n.config.TIME_PATTERN_LOWERCASE){var t=e.replaceAll("AM","am");return t.replaceAll("PM","pm")}else{return e}};d.getFormattedDate=function(e,t){var a=s.getLocalTimezone();return e.format(t,a)};return d},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Circle", ["sap/gantt/shape/Shape"],function(t){"use strict";var e=t.extend("sap.gantt.shape.Circle",{metadata:{properties:{tag:{type:"string",defaultValue:"circle"},cx:{type:"float"},cy:{type:"float"},r:{type:"float",defaultValue:5}}}});e.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_CIRCLE"))};e.prototype.getCx=function(t,e){if(this.mShapeConfig.hasShapeProperty("cx")){return this._configFirst("cx",t)}return this.getRotationCenter(t,e)[0]};e.prototype.getCy=function(t,e){if(this.mShapeConfig.hasShapeProperty("cy")){return this._configFirst("cy",t)}return this.getRowYCenter(t,e)};e.prototype.getR=function(t){return this._configFirst("r",t,true)};e.prototype.getStyle=function(e,r){var i=t.prototype.getStyle.apply(this,arguments);var a={fill:this.determineValueColor(this.getFill(e,r)),"fill-opacity":this.getFillOpacity(e,r)};var p=Object.assign(i,a);return p};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ClipPath", ["sap/gantt/shape/Shape"],function(t){"use strict";var a=t.extend("sap.gantt.shape.ClipPath",{metadata:{properties:{tag:{type:"string",defaultValue:"clippath"}},aggregations:{paths:{type:"sap.gantt.shape.Path",multiple:true,singularName:"path"}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Definitions", ["sap/gantt/shape/Shape"],function(e){"use strict";var t=e.extend("sap.gantt.shape.Definitions",{metadata:{properties:{tag:{type:"string",defaultValue:"defs"},childTagName:{type:"string"},content:{type:"string",defaultValue:""},referenceId:{type:"string"}}}});t.prototype.getChildTagName=function(e,t){if(this.mShapeConfig.hasShapeProperty("childTagName")){return this._configFirst("childTagName",e)}};t.prototype.getContent=function(e,t){if(this.mShapeConfig.hasShapeProperty("content")){return this._configFirst("content",e)}return null};t.prototype.getReferenceId=function(e,t){return this.getParentReferenceId(e,t)};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Group", ["sap/gantt/shape/Shape"],function(e){"use strict";var t=e.extend("sap.gantt.shape.Group",{metadata:{properties:{tag:{type:"string",defaultValue:"g"},RLSAnchors:{type:"object"}},aggregations:{shapes:{type:"sap.gantt.shape.Shape",multiple:true,singularName:"shape"}}}});t.prototype.getRLSAnchors=function(e,t){return this._configFirst("RLSAnchors",e)};t.prototype.genReferenceId=function(e,t){return this._configFirst("referenceId",e)};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Image", ["sap/gantt/shape/Shape","sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i,a){"use strict";var r=t.extend("sap.gantt.shape.Image",{metadata:{properties:{tag:{type:"string",defaultValue:"image"},image:{type:"string"},x:{type:"float"},y:{type:"float"},width:{type:"float",defaultValue:20},height:{type:"float",defaultValue:20}}}});r.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_IMAGE"))};r.prototype.getX=function(t,e){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",t)}var r,o=this.getAxisTime();if(a.getConfiguration().getRTL()){if(this.getIsDuration(t,e)===true){r=o.timeToView(i.abapTimestampToDate(this.getEndTime(t,e)))}else{r=o.timeToView(i.abapTimestampToDate(this.getTime(t,e)))}}else{r=o.timeToView(i.abapTimestampToDate(this.getTime(t,e)))}return(r?r:0)-this.getWidth(t,e)/2};r.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}return this.getRowYCenter(t,e)-this.getHeight(t,e)/2};r.prototype.getImage=function(t){return this._configFirst("image",t)};r.prototype.getWidth=function(t){return this._configFirst("width",t,true)};r.prototype.getHeight=function(t){return this._configFirst("height",t,true)};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Line", ["sap/gantt/shape/Shape","sap/gantt/misc/Format"],function(t,e){"use strict";var i=t.extend("sap.gantt.shape.Line",{metadata:{properties:{tag:{type:"string",defaultValue:"line"},isDuration:{type:"boolean",defaultValue:true},x1:{type:"float"},y1:{type:"float"},x2:{type:"float"},y2:{type:"float"}}}});i.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_LINE"))};i.prototype.getX1=function(t,i){if(this.mShapeConfig.hasShapeProperty("x1")){return this._configFirst("x1",t)}return this.getAxisTime().timeToView(e.abapTimestampToDate(this.getTime(t,i)))};i.prototype.getY1=function(t,e){if(this.mShapeConfig.hasShapeProperty("y1")){return this._configFirst("y1",t,true)}return this.getRowYCenter(t,e)};i.prototype.getX2=function(t,i){if(this.mShapeConfig.hasShapeProperty("x2")){return this._configFirst("x2",t)}return this.getAxisTime().timeToView(e.abapTimestampToDate(this.getEndTime(t,i)))};i.prototype.getY2=function(t,e){if(this.mShapeConfig.hasShapeProperty("y2")){return this._configFirst("y2",t,true)}return this.getRowYCenter(t,e)};i.prototype.getStyle=function(e,i){var r=t.prototype.getStyle.apply(this,arguments);var a={"stroke-dasharray":this.getStrokeDasharray(e,i),"fill-opacity":this.getFillOpacity(e,i),"stroke-opacity":this.getStrokeOpacity(e,i)};var o=Object.assign(r,a);return o};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Path", ["sap/base/Log","sap/gantt/shape/Shape","sap/gantt/misc/Utility"],function(t,e,i){"use strict";var a=e.extend("sap.gantt.shape.Path",{metadata:{properties:{tag:{type:"string",defaultValue:"path"},isClosed:{type:"boolean",defaultValue:false},fill:{type:"string",defaultValue:"none"},d:{type:"string"}}}});a.prototype.init=function(){e.prototype.init.apply(this,arguments);var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_PATH"))};a.prototype.getD=function(e,a){var r;if(this.mShapeConfig.hasShapeProperty("d")){r=this._configFirst("d",e)}else{var s=this._getCenter(e,a),n=this.getIsDuration(e,a),o=this.mChartInstance.getSapUiSizeClass();var p=i.scaleBySapUiSize(o,7.5);if(n){var l=this._getCenter(e,a,true);p=(l[0]-s[0])/2}r="M "+s[0]+" "+s[1]+" c 0,"+-p+" "+p+","+-p+" "+p+",0 c 0,"+p+" "+p+","+p+" "+p+",0"}if(this.isValid(r)){return r}else{t.warning("Path shape generated invalid d: "+r+" from the given data: "+e);return null}};a.prototype.getIsClosed=function(t){return this._configFirst("isClosed",t)};a.prototype.getStyle=function(t,i){var a=e.prototype.getStyle.apply(this,arguments);var r={fill:this.determineValueColor(this.getFill(t,i)),"stroke-dasharray":this.getStrokeDasharray(t,i)};if(this.getIsClosed(t,i)){r["fill-opacity"]=this.getFillOpacity(t,i);r["stroke-opacity"]=this.getStrokeOpacity(t,i)}var s=Object.assign(a,r);return s};a.prototype.isValid=function(t){return!!t&&t.indexOf("NaN")===-1&&t.indexOf("undefined")===-1&&t.indexOf("null")===-1};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Polygon", ["sap/gantt/shape/Shape","sap/gantt/misc/Utility"],function(t,e){"use strict";var i=t.extend("sap.gantt.shape.Polygon",{metadata:{properties:{tag:{type:"string",defaultValue:"polygon"},points:{type:"string"}}}});i.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_POLYGON"))};i.prototype.getPoints=function(t,i){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",t)}var a=this.mChartInstance.getSapUiSizeClass();var s=this.getRotationCenter(t,i),p=e.scaleBySapUiSize(a,8),r=e.scaleBySapUiSize(a,4),n=e.scaleBySapUiSize(a,4*Math.sqrt(3)),o=[];if(s&&s.length===2&&jQuery.isNumeric(p)&&jQuery.isNumeric(r)&&jQuery.isNumeric(n)){o.push([s[0]-n,s[1]-r].join(","));o.push([s[0],s[1]-p].join(","));o.push([s[0]+n,s[1]-r].join(","));o.push([s[0]+n,s[1]+r].join(","));o.push([s[0],s[1]+p].join(","));o.push([s[0]-n,s[1]+r].join(","))}return o.join(" ")};i.prototype.getStyle=function(e,i){var a=t.prototype.getStyle.apply(this,arguments);var s={fill:this.determineValueColor(this.getFill(e,i)),"fill-opacity":this.getFillOpacity(e,i)};var p=Object.assign(a,s);return p};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Polyline", ["sap/gantt/shape/Shape","sap/gantt/misc/Utility"],function(t,e){"use strict";var i=t.extend("sap.gantt.shape.Polyline",{metadata:{properties:{tag:{type:"string",defaultValue:"polyline"},fill:{type:"string",defaultValue:"none"},points:{type:"string"}}}});i.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_CIRCLE"))};i.prototype.getPoints=function(t,i){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",t)}var a=this.getRotationCenter(t,i),n=[];var p=this.mChartInstance.getSapUiSizeClass();if(a&&a.length===2){n.push([a[0]-15,a[1]].join(","));n.push([a[0]-10,a[1]].join(","));n.push([a[0]-5,a[1]-e.scaleBySapUiSize(p,7.5)].join(","));n.push([a[0]+5,a[1]+e.scaleBySapUiSize(p,7.5)].join(","));n.push([a[0]+10,a[1]].join(","));n.push([a[0]+15,a[1]].join(","))}return n.join(" ")};i.prototype.getStyle=function(e,i){var a=t.prototype.getStyle.apply(this,arguments);var n={fill:this.determineValueColor(this.getFill(e,i)),"fill-opacity":this.getFillOpacity(e,i)};var p=Object.assign(a,n);return p};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Rectangle", ["sap/base/Log","sap/gantt/shape/Shape","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i,r){"use strict";var a=e.extend("sap.gantt.shape.Rectangle",{metadata:{properties:{tag:{type:"string",defaultValue:"rect"},isDuration:{type:"boolean",defaultValue:true},x:{type:"float"},y:{type:"float"},width:{type:"float"},height:{type:"float",defaultValue:15},rx:{type:"string",defaultValue:"0"},ry:{type:"string",defaultValue:"0"}}}});a.prototype.init=function(){e.prototype.init.apply(this,arguments);var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_RECTANGLE"))};a.prototype.getX=function(e,a){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",e)}var o;var s=this.getAxisTime();if(r.getConfiguration().getRTL()){o=s.timeToView(i.abapTimestampToDate(this.getEndTime(e,a)))}else{o=s.timeToView(i.abapTimestampToDate(this.getTime(e,a)))}if(!jQuery.isNumeric(o)){t.warning("Cannot get start time or end time from shape data: "+e+", please check whether the attribute name");return 0}return o};a.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t,true)}return this.getRowYCenter(t,e)-this.getHeight(t,e)/2};a.prototype.getWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("width")){return this._configFirst("width",t)}var a=this.getAxisTime();var o,s=a.timeToView(i.abapTimestampToDate(this.getTime(t,e))),n=a.timeToView(i.abapTimestampToDate(this.getEndTime(t,e)));if(!jQuery.isNumeric(s)||!jQuery.isNumeric(n)){return 0}if(r.getConfiguration().getRTL()){o=s-n}else{o=n-s}if(o===0||o<0){o=1}return o};a.prototype.getHeight=function(t){return this._configFirst("height",t,true)};a.prototype.getRx=function(t){return this._configFirst("rx",t)};a.prototype.getRy=function(t){return this._configFirst("ry",t)};a.prototype.getStyle=function(t,i){var r=e.prototype.getStyle.apply(this,arguments);var a={fill:this.determineValueColor(this.getFill(t,i)),"stroke-dasharray":this.getStrokeDasharray(t,i),"fill-opacity":this.getFillOpacity(t,i),"stroke-opacity":this.getStrokeOpacity(t,i)};var o=Object.assign(r,a);return o};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ResizeShadowShape", ["sap/base/Log","sap/gantt/shape/Path","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i,a){"use strict";var r=e.extend("sap.gantt.shape.ResizeShadowShape",{metadata:{properties:{height:{type:"int",defaultValue:15}}}});r.prototype.getIsDuration=function(t,e){if(this.mShapeConfig.hasShapeProperty("isDuration")){return this._configFirst("isDuration",t)}return this.getParent().getIsDuration()};r.prototype.getD=function(e,r){var n,g,s,o,h;var p="";var f=this.getParent().getTag();switch(f){case"rect":case"image":n=this.getStrokeWidth(e,r);g=this.getParent().getX(e,r)-n/2;o=this.getParent().getY(e,r)-n/2;s=g+this.getParent().getWidth(e,r)+n;h=o+this.getParent().getHeight(e)+n;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break;case"line":n=this.getStrokeWidth(e,r);g=this.getParent().getX1(e,r)-n/2;o=this.getParent().getY1(e,r)-n/2;s=this.getParent().getX2(e,r)+n;h=this.getParent().getY2(e,r)+n;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break;case"path":p=this.getParent().getD(e,r);break;case"clippath":p=this.getParent().getPaths()[0].getD(e,r);break;case"polygon":case"polyline":var u=this.getParent().getPoints(e,r);var P=u.split(" ");if(P!==undefined&&P[0]==""){P.splice(0,1)}if(P!==undefined&&P.length>1){p="M ";var c;for(var l in P){c=P[l].split(",");if(P[l]!==""&&c.length>1){if(l==P.length-1){if(f==="polygon"){p=p+c[0]+" "+c[1]+" z"}else{p=p+c[0]+" "+c[1]}}else{p=p+c[0]+" "+c[1]+" L "}}}}break;case"circle":var d,m,T;d=this.getParent().getCx(e,r);m=this.getParent().getCy(e,r);T=this.getParent().getR(e);p="M "+d+" "+m+" A "+T+" "+T+", 0, 1, 1, "+d+" "+m;break;case"text":break;default:var v;var y=this.getParent().getStrokeWidth(e,r);n=this.getStrokeWidth(e,r);var S=this.getParent().getTime(e,r);var k=this.getParent().getEndTime(e,r);var b=this.getParent().getAxisTime();var L=this.getHeight(e)+y;if(a.getConfiguration().getRTL()){g=b.timeToView(i.abapTimestampToDate(k));s=b.timeToView(i.abapTimestampToDate(S))}else{g=b.timeToView(i.abapTimestampToDate(S));s=b.timeToView(i.abapTimestampToDate(k))}if(this.getParent().mShapeConfig.hasShapeProperty("y")){o=this.getParent()._configFirst("y",e)-n/2}else{o=this.getParent().getRowYCenter(e,r)-L/2-n/2}if(this.getParent().mShapeConfig.hasShapeProperty("width")){v=this.getParent()._configFirst("width",e)+n}else{v=s-g-y-1+n}if(v===0||v<0||!v){v=2}s=g+v;h=o+L;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break}if(this.isValid(p)){return p}else{t.warning("ResizeShadowShape generated invalid d: "+p+" from the given data: "+e);return null}};r.prototype.getStrokeWidth=function(t,e){var i=this.getParent().getStrokeWidth(t,e);return i?i:2};r.prototype.getTransform=function(t,e){return this.getParent().getTransform(t,e)};r.prototype.getEnableSelection=function(t,e){return false};r.prototype.getStroke=function(t,e){return"red"};r.prototype.getFill=function(t,e){return"none"};r.prototype.getHeight=function(t){return this._configFirst("height",t,true)};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/SelectedShape", ["sap/base/Log","sap/gantt/shape/Path","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i,a){"use strict";var r=e.extend("sap.gantt.shape.SelectedShape",{metadata:{properties:{fill:{type:"string",defaultValue:"none"},fillOpacity:{type:"float",defaultValue:0},strokeOpacity:{type:"float",defaultValue:0},height:{type:"int",defaultValue:15}}}});r.prototype.getFillOpacity=function(t){return this._configFirst("fillOpacity",t)};r.prototype.getStrokeOpacity=function(t){return this._configFirst("strokeOpacity",t)};r.prototype.getIsDuration=function(t,e){if(this.mShapeConfig.hasShapeProperty("isDuration")){return this._configFirst("isDuration",t)}return this.getParent().getIsDuration()};r.prototype.getD=function(e,r){var n,g,s,o,h;var p="";var f=this.getParent().getTag();switch(f){case"rect":case"image":n=this.getStrokeWidth(e,r);g=this.getParent().getX(e,r)-n/2;o=this.getParent().getY(e,r)-n/2;s=g+this.getParent().getWidth(e,r)+n;h=o+this.getParent().getHeight(e)+n;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break;case"line":n=this.getStrokeWidth(e,r);g=this.getParent().getX1(e,r)-n/2;o=this.getParent().getY1(e,r)-n/2;s=this.getParent().getX2(e,r)+n;h=this.getParent().getY2(e,r)+n;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break;case"path":p=this.getParent().getD(e,r);break;case"clippath":p=this.getParent().getPaths()[0].getD(e,r);break;case"polygon":case"polyline":var l=this.getParent().getPoints(e,r);var u=l.split(" ");if(u!==undefined&&u[0]==""){u.splice(0,1)}if(u!==undefined&&u.length>1){p="M ";var c;for(var P in u){c=u[P].split(",");if(u[P]!==""&&c.length>1){if(P==u.length-1){if(f==="polygon"){p=p+c[0]+" "+c[1]+" z"}else{p=p+c[0]+" "+c[1]}}else{p=p+c[0]+" "+c[1]+" L "}}}}break;case"circle":var d,y,m;d=this.getParent().getCx(e,r);y=this.getParent().getCy(e,r);m=this.getParent().getR(e);p="M "+d+" "+y+" A "+m+" "+m+", 0, 1, 1, "+d+" "+y;break;case"text":break;default:var S;var T=this.getParent().getStrokeWidth(e,r);n=this.getStrokeWidth(e,r);var k=this.getParent().getTime(e,r);var v=this.getParent().getEndTime(e,r);var b=this.getParent().getAxisTime();var D=this.getHeight(e);if(a.getConfiguration().getRTL()){g=b.timeToView(i.abapTimestampToDate(v));s=b.timeToView(i.abapTimestampToDate(k))}else{g=b.timeToView(i.abapTimestampToDate(k));s=b.timeToView(i.abapTimestampToDate(v))}if(this.getParent().mShapeConfig.hasShapeProperty("y")){o=this.getParent()._configFirst("y",e)-n/2}else{o=this.getParent().getRowYCenter(e,r)-D/2}if(this.getParent().mShapeConfig.hasShapeProperty("width")){S=this.getParent()._configFirst("width",e)+n}else{S=s-g-T-1+n}if(S===0||S<0||!S){S=2}s=g+S;h=o+D;p="M "+g+" "+o+" L "+s+" "+o+" L "+s+" "+h+" L "+g+" "+h+" z";break}if(this.isValid(p)){return p}else{t.warning("SelectedShape generated invalid d: "+p+" from the given data: "+e);return null}};r.prototype.getStroke=function(t,e){return"red"};r.prototype.getFill=function(t,e){return"none"};r.prototype.getStrokeWidth=function(t,e){var i=this.getParent().getStrokeWidth(t,e);return i?i:2};r.prototype.getTransform=function(t,e){return this.getParent().getTransform(t,e)};r.prototype.getEnableDnD=function(t,e){return false};r.prototype.getEnableSelection=function(t,e){return false};r.prototype.getHeight=function(t){return this._configFirst("height",t,true)};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Shape", ["sap/gantt/library","sap/ui/core/Element","sap/gantt/misc/Utility","sap/gantt/misc/Format","sap/ui/core/Core","sap/ui/core/format/NumberFormat"],function(t,e,r,i,n,a){"use strict";var o=e.extend("sap.gantt.shape.Shape",{metadata:{abstract:true,properties:{tag:{type:"string"},category:{type:"string",defaultValue:t.shape.ShapeCategory.InRowShape},htmlClass:{type:"string"},isDuration:{type:"boolean",defaultValue:false},time:{type:"string"},endTime:{type:"string"},title:{type:"string"},ariaLabel:{type:"string"},xBias:{type:"float",defaultValue:0},yBias:{type:"float",defaultValue:0},fill:{type:"sap.gantt.ValueSVGPaintServer"},strokeOpacity:{type:"float",defaultValue:1},fillOpacity:{type:"float",defaultValue:1},stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"float",defaultValue:0},strokeDasharray:{type:"string"},clipPath:{type:"string"},transform:{type:"string"},filter:{type:"string"},enableHover:{type:"boolean",defaultValue:false},enableDnD:{type:"boolean",defaultValue:false},enableSelection:{type:"boolean",defaultValue:true},enableResize:{type:"boolean",defaultValue:false},rowYCenter:{type:"float",defaultValue:7.5},rotationCenter:{type:"float[]"},rotationAngle:{type:"float"},isBulk:{type:"boolean",defaultValue:false},arrayAttribute:{type:"string"},timeFilterAttribute:{type:"string"},endTimeFilterAttribute:{type:"string"},legend:{type:"string"}},aggregations:{selectedShape:{type:"sap.gantt.shape.SelectedShape",multiple:false},resizeShadowShape:{type:"sap.gantt.shape.ResizeShadowShape",multiple:false}}}});o.prototype.init=function(){var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_SHAPE"));this.mShapeConfig=null;this.mChartInstance=null};var s={};sap.ui.getCore().attachThemeChanged(function(){s={}});o.prototype.getTag=function(t){return this._configFirst("tag",t)};o.prototype.getCategory=function(t){return this._configFirst("category",t)};o.prototype.getHtmlClass=function(t){return this._configFirst("htmlClass",t)};o.prototype.getIsDuration=function(t){return this._configFirst("isDuration",t)};o.prototype.getTime=function(t){return this._configFirst("time",t)};o.prototype.getEndTime=function(t){return this._configFirst("endTime",t)};o.prototype.getTitle=function(t){return this._configFirst("title",t)};o.prototype.getAriaLabel=function(t){return this._configFirst("ariaLabel",t)};o.prototype.getXBias=function(t){if(n.getConfiguration().getRTL()===true){return 0-this._configFirst("xBias",t)}else{return this._configFirst("xBias",t)}};o.prototype.getYBias=function(t){return this._configFirst("yBias",t,true)};o.prototype.getFill=function(t,e){return this._configFirst("fill",t)};o.prototype.getStrokeOpacity=function(t){return this._configFirst("strokeOpacity",t)};o.prototype.getFillOpacity=function(t){return this._configFirst("fillOpacity",t)};o.prototype.getStroke=function(t){return this._configFirst("stroke",t)};o.prototype.getStrokeWidth=function(t){return this._configFirst("strokeWidth",t,true)};o.prototype.getStrokeDasharray=function(t){return this._configFirst("strokeDasharray",t)};o.prototype.getClipPath=function(t){return this._configFirst("clipPath",t)};o.prototype.getTransform=function(t,e){if(this.mShapeConfig.hasShapeProperty("transform")){return this._configFirst("transform",t)}var r=[];this._translate(t,e,r);this._rotate(t,e,r);if(r.length>0){return r.join(" ")}};o.prototype._rotate=function(t,e,r){var i=this.getRotationCenter(t,e),n=this.getRotationAngle(t,e);if(i&&i.length===2&&n){r.push("rotate("+n+" "+i[0]+" "+i[1]+")")}};o.prototype._translate=function(t,e,r){var i=this.getXBias(t,e),n=this.getYBias(t,e);if(i||n){i=i?i:0;n=n?n:0;r.push("translate("+i+" "+n+")")}};o.prototype.getFilter=function(t){return this._configFirst("filter",t)};o.prototype.getEnableDnD=function(t){return this._configFirst("enableDnD",t)};o.prototype.getEnableSelection=function(t){return this._configFirst("enableSelection",t)};o.prototype.getEnableResize=function(t){return this._configFirst("enableResize",t)};o.prototype.getEnableHover=function(t){return this._configFirst("enableHover",t)};o.prototype.getRotationAngle=function(t){return this._rtlRotation(this._configFirst("rotationAngle",t))};o.prototype._rtlRotation=function(t){if(t>0||t<0){if(n.getConfiguration().getRTL()){return 360-t}else{return t}}};o.prototype.getRowYCenter=function(t,e){if(this.mShapeConfig.hasShapeProperty("rowYCenter")){return this._configFirst("rowYCenter",t)}if(e){return e.y+e.rowHeight/2}else{return this.getProperty("rowYCenter")}};o.prototype.getRotationCenter=function(t,e){if(this.mShapeConfig.hasShapeProperty("rotationCenter")){return this._configFirst("rotationCenter",t)}return this._getCenter(t,e)};o.prototype._getCenter=function(t,e,r){var n=this.getAxisTime();var a=r?this.getEndTime(t,e):this.getTime(t,e);if(!a){return undefined}var o=n.timeToView(i.abapTimestampToDate(a));if(!o&&!o==0){o=n.timeToView(0)}var s=this.getRowYCenter(t,e);return[o,s]};o.prototype.getIsBulk=function(t){return this._configFirst("isBulk",t)};o.prototype.getArrayAttribute=function(t){return this._configFirst("arrayAttribute",t)};o.prototype.getTimeFilterAttribute=function(t){return this._configFirst("timeFilterAttribute",t)};o.prototype.getEndTimeFilterAttribute=function(t){return this._configFirst("endTimeFilterAttribute",t)};o.prototype.getLegend=function(t){return this._configFirst("legend",t)};o.prototype._configFirst=function(t,e,i){var n=null;if(this.mShapeConfig.hasShapeProperty(t)){var a=this.mShapeConfig.getShapeProperty(t);if(typeof a==="string"){n=this._formatting(e,t,a)}else{n=a}}else{n=this.getProperty(t)}if(i&&this.mChartInstance){var o=this.mChartInstance.getSapUiSizeClass();n=r.scaleBySapUiSize(o,n)}return n};o.prototype.getStyle=function(t,e){var r={stroke:this.determineValueColor(this.getStroke(t,e)),"stroke-width":this.getStrokeWidth(t,e)};return r};o.prototype.getAxisTime=function(){var t=null;if(this.mChartInstance){t=this.mChartInstance.getAxisTime()}return t};o.prototype.getInlineStyle=function(t){return Object.keys(t).reduce(function(e,r){if(t[r]!==undefined&&t[r]!==null&&t[r]!==""){e+=r+":"+t[r]+"; "}return e},"")};o.prototype.determineValueColor=function(t){var e=s[t];if(!e&&t){e=sap.gantt.ValueSVGPaintServer.normalize(t);s[t]=e}return e};o.prototype.getShapeViewBoundary=function(){var t=this.mChartInstance._oStatusSet;if(t&&t.aViewBoundary){return t.aViewBoundary}return null};o.prototype._formatting=function(t,e,r){if(!r){return""}this._attributeNameBindingMap=this._attributeNameBindingMap||{};if(!this._attributeNameBindingMap[e]){this._attributeNameBindingMap[e]=this._resolveAttributeMap(r)}return this._formatFromResolvedAttributeMap(t,e)};o.prototype._resolveAttributeMap=function(t){var e=[];var r=t.match(/[^\{\}]*(\{.*?\})?/g);r.pop();r.forEach(function(t,r,i){var n={},a=t.split("{");if(a[0].length>0){n.leadingText=a[0]}if(a[1]){a=a[1].split("}")[0].split(":");if(a[0].length>0){n.attributeName=a[0].trim().split("/")}if(a[1]){n.attributeType=a[1].trim()}}e.push(n)});return e};o.prototype._formatFromResolvedAttributeMap=function(t,e){var r=this._attributeNameBindingMap[e],i=[],n,a;if(r){r.forEach(function(e,r){n=e.leadingText;if(e.attributeName){a=t;e.attributeName.forEach(function(t,e){a=a[t]});if(n){n=n+this._formatValue(a,e.attributeType)}else{n=this._formatValue(a,e.attributeType)}}i.push(n)}.bind(this))}if(i.length===1){return i[0]}return i.join("")};o.prototype._formatValue=function(t,e){var r=t;switch(e){case"Number":r=this._formatNumber(t);break;case"Timestamp":var n=this.mChartInstance.getLocale();if(n){r=i.abapTimestampToTimeLabel(t,n)}break;default:if(r===undefined||r===null){r=""}break}return r};o.prototype._formatNumber=function(t,e){var r="";if(e!==undefined){r=a.getFloatInstance({minFractionDigits:e,maxFractionDigits:e}).format(t)}else{r=a.getFloatInstance().format(t)}return r};o.prototype.getParentReferenceId=function(t,e){if(this.mShapeConfig.hasShapeProperty("referenceId")){return this._configFirst("referenceId",t)}if(this.getParent()&&this.getParent().genReferenceId){return this.getParent().genReferenceId(t,e)}};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/Text", ["sap/gantt/shape/Shape","sap/gantt/misc/Format"],function(t,e){"use strict";var i=t.extend("sap.gantt.shape.Text",{metadata:{properties:{tag:{type:"string",defaultValue:"text"},text:{type:"string"},x:{type:"float"},y:{type:"float"},fontSize:{type:"int",defaultValue:10},textAnchor:{type:"string",defaultValue:"start"},fontFamily:{type:"string"},wrapWidth:{type:"float",defaultValue:-1},wrapDy:{type:"float",defaultValue:20},truncateWidth:{type:"float",defaultValue:-1},ellipsisWidth:{type:"float",defaultValue:12}}}});i.prototype.getX=function(t,i){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",t)}var r=this.getTime(t,i);var n=this.getAxisTime();var o=n.timeToView(e.abapTimestampToDate(r));if(!jQuery.isNumeric(o)){o=n.timeToView(0).toFixed(1)}return o};i.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}return this.getRowYCenter(t,e)+this.getFontSize(t,e)/2};i.prototype.getText=function(t){return this._configFirst("text",t)};i.prototype.getTextAnchor=function(t){var e=this._configFirst("textAnchor",t);var i=sap.ui.getCore().getConfiguration().getRTL();if(i&&sap.ui.Device.browser.edge){if(e==="start"){return"end"}else if(e==="end"){return"start"}}return e};i.prototype.getFontSize=function(t){return this._configFirst("fontSize",t,true)};i.prototype.getFontFamily=function(t){return this._configFirst("fontFamily",t,false)};i.prototype.getWrapWidth=function(t){return this._configFirst("wrapWidth",t)};i.prototype.getWrapDy=function(t){return this._configFirst("wrapDy",t)};i.prototype.getTruncateWidth=function(t){return this._configFirst("truncateWidth",t)};i.prototype.getEllipsisWidth=function(t){return this._configFirst("ellipsisWidth",t)};i.prototype.getStyle=function(e,i){var r=t.prototype.getStyle.apply(this,arguments);var n={"font-size":this.getFontSize(e,i)+"px",fill:this.determineValueColor(this.getFill(e,i)),"fill-opacity":this.getFillOpacity(e,i),"font-family":this.getFontFamily(e,i)};var o=Object.assign(r,n);return o};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/cal/Calendar", ["sap/gantt/shape/Rectangle"],function(t){"use strict";var e=t.extend("sap.gantt.shape.cal.Calendar",{metadata:{properties:{isBulk:{type:"boolean",defaultValue:true},enableSelection:{type:"boolean",defaultValue:false},calendarName:{type:"string",defaultValue:"nwt"}}}});e.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_CALENDAR"))};e.prototype.getCalendarName=function(t){return this._configFirst("calendarName",t)};e.prototype.getIsBulk=function(t){if(this.mShapeConfig.isBulk){return this._configFirst("isBulk",t)}return true};e.prototype.getEnableSelection=function(t){if(this.mShapeConfig.enableSelection){return this._configFirst("enableSelection",t)}return false};e.prototype.getX=function(t){if(this.mShapeConfig.x){return this._configFirst("x",t)}return this.mChartInstance._oStatusSet.aViewBoundary[0]};e.prototype.getY=function(t,e){if(this.mShapeConfig.y){return this._configFirst("y",t)}return e.y};e.prototype.getWidth=function(t){if(this.mShapeConfig.width){return this._configFirst("width",t)}var e=this.mChartInstance._oStatusSet;if(e){return e.aViewBoundary[1]-e.aViewBoundary[0]}else{return 0}};e.prototype.getHeight=function(t,e){if(this.mShapeConfig.height){return this._configFirst("height",t)}return e.rowHeight};e.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}var i=this.getCalendarName(t,e);var n=this.mChartInstance.getCalendarDef();if(n){return n.getRefString(i)}};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Chevron", ["sap/base/Log","sap/gantt/shape/Path","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,n,a){"use strict";var i=e.extend("sap.gantt.shape.ext.Chevron",{metadata:{properties:{isClosed:{type:"boolean",defaultValue:true},isDuration:{type:"boolean",defaultValue:true},headLength:{type:"float",defaultValue:5},tailLength:{type:"float",defaultValue:5},height:{type:"float",defaultValue:15}}}});i.prototype.init=function(){this._isRTL=a.getConfiguration().getRTL();var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_CHEVRON"))};i.prototype.getD=function(e,a){var i;if(this.mShapeConfig.hasShapeProperty("d")){i=this._configFirst("d",e)}else{var r=this.getHeight(e,a);var g=this.getHeadLength(e,a),h=this.getTailLength(e,a),o=this.getAxisTime();var l=o.timeToView(n.abapTimestampToDate(this.getTime(e,a)));var s=o.timeToView(n.abapTimestampToDate(this.getEndTime(e,a)));var u=this.getRowYCenter(e,a);i=this.getDString({nStartOriginalX:l,nEndOriginalX:s,nTailLength:h,nHeadLength:g,nHeight:r,nRowYCenter:u})}if(this.isValid(i)){return i}else{t.warning("Chevron shape generated invalid d: "+i+" from the given data: "+e);return null}};i.prototype.getDString=function(t){var e=t.nHeight/2;if(this._isRTL){var n=t.nStartOriginalX-t.nEndOriginalX-t.nHeadLength;var n=n>0?n:1;var a=n===1?t.nStartOriginalX-1:t.nStartOriginalX-t.nTailLength;var i="m "+a+" "+t.nRowYCenter+" l "+t.nTailLength+" -"+e+" l -"+n+" "+0+" l -"+t.nHeadLength+" "+e+" l "+t.nHeadLength+" "+e+" l "+n+" "+0+" z"}else{var n=t.nEndOriginalX-t.nStartOriginalX-t.nHeadLength;var n=n>0?n:1;var a=n===1?t.nStartOriginalX+1:t.nStartOriginalX+t.nTailLength;var i="m "+a+" "+t.nRowYCenter+" l -"+t.nTailLength+" -"+e+" l "+n+" "+0+" l "+t.nHeadLength+" "+e+" l -"+t.nHeadLength+" "+e+" l -"+n+" "+0+" z"}return i};i.prototype.getHeadLength=function(t){return this._configFirst("headLength",t,true)};i.prototype.getTailLength=function(t){return this._configFirst("tailLength",t,true)};i.prototype.getHeight=function(t){return this._configFirst("height",t,true)};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Cursor", ["sap/base/Log","sap/gantt/shape/Path"],function(t,e){"use strict";var i=e.extend("sap.gantt.shape.ext.Cursor",{metadata:{properties:{isClosed:{type:"boolean",defaultValue:true},length:{type:"float",defaultValue:10},width:{type:"float",defaultValue:5},pointHeight:{type:"float",defaultValue:5}}}});i.prototype.init=function(){var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_CURSOR"))};i.prototype.getD=function(e,i){var r;if(this.mShapeConfig.hasShapeProperty("d")){r=this._configFirst("d",e)}else{var a=this.getPointHeight(e,i);var n=this.getWidth(e,i);var o=this.getLength(e,i);var s=o/2;var u=this.getRotationCenter(e,i);if(u&&u.length===2&&jQuery.isNumeric(a)&&jQuery.isNumeric(n)&&jQuery.isNumeric(o)&&jQuery.isNumeric(s)){r="M "+u.join(" ")+" m "+-s+" "+-(n+a)/2+" l "+o+" 0 l 0 "+n+" l -"+s+" "+a+" l -"+s+" -"+a+" z"}}if(this.isValid(r)){return r}else{t.warning("Cursor shape generated invalid d: "+r+" from the given data: "+e);return null}};i.prototype.getLength=function(t){return this._configFirst("length",t,true)};i.prototype.getWidth=function(t){return this._configFirst("width",t,true)};i.prototype.getPointHeight=function(t){return this._configFirst("pointHeight",t,true)};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Diamond", ["sap/base/Log","sap/gantt/shape/Path"],function(t,e){"use strict";var a=e.extend("sap.gantt.shape.ext.Diamond",{metadata:{properties:{isClosed:{type:"boolean",defaultValue:true},verticalDiagonal:{type:"float",defaultValue:12},horizontalDiagonal:{type:"float",defaultValue:12}}}});a.prototype.init=function(){var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_DIAMOND"))};a.prototype.getD=function(e,a){var i;if(this.mShapeConfig.hasShapeProperty("d")){i=this._configFirst("d",e)}else{var r=this.getVerticalDiagonal(e,a)/2;var n=this.getHorizontalDiagonal(e,a)/2;var o=this.getRotationCenter(e,a);if(o&&o.length===2&&jQuery.isNumeric(r)&&jQuery.isNumeric(n)){i="M "+o.join(" ")+" m "+-n+" 0"+" l "+n+" -"+r+" l "+n+" "+r+" l -"+n+" "+r+" z"}}if(this.isValid(i)){return i}else{t.warning("Diamond shape generated invalid d: "+i+" from the given data: "+e);return null}};a.prototype.getVerticalDiagonal=function(t){return this._configFirst("verticalDiagonal",t,true)};a.prototype.getHorizontalDiagonal=function(t){return this._configFirst("horizontalDiagonal",t,true)};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Iconfont", ["sap/gantt/shape/Text","sap/ui/core/IconPool"],function(t,e){"use strict";var n=t.extend("sap.gantt.shape.ext.Iconfont",{metadata:{properties:{name:{type:"string"},collectionName:{type:"string"}}}});n.prototype.getText=function(t,n){if(this.mShapeConfig.hasShapeProperty("text")){return this._configFirst("text",t)}var i=this.getName(t,n),o=this.getCollectionName(t,n);if(o===""){o=undefined}var r=e.getIconInfo(i,o);if(r){return r.content}};n.prototype.getName=function(t){return this._configFirst("name",t)};n.prototype.getCollectionName=function(t){return this._configFirst("collectionName",t)};n.prototype.getFontFamily=function(t,n){if(this.mShapeConfig.hasShapeProperty("fontFamily")){return this._configFirst("fontFamily",t)}var i=this.getName(t,n);var o=this.getCollectionName(t,n);if(o===""){o=undefined}var r=e.getIconInfo(i,o);if(r){return r.fontFamily}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Pentangle", ["sap/gantt/shape/Polygon","sap/gantt/misc/Utility"],function(t,e){"use strict";var i=t.extend("sap.gantt.shape.ext.Pentangle",{metadata:{properties:{radius:{type:"float",defaultValue:10},radius2:{type:"float",defaultValue:undefined}}}});i.prototype.init=function(){var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_PENTANGLE"))};i.prototype.getRadius=function(t){return this._configFirst("radius",t,true)};i.prototype.getRadius2=function(t,i){if(this.mShapeConfig.hasShapeProperty("radius2")){return this._configFirst("radius2",t,true)}var a=this.getProperty("radius2");if(a||a===0){var r=this.mChartInstance.getSapUiSizeClass();return e.scaleBySapUiSize(r,a)}else{return this.calRadius2ByGoldenRatio(this.getRadius(t,i))}};i.prototype.calRadius2ByGoldenRatio=function(t){return t*Math.cos(2*Math.PI/5)/Math.cos(Math.PI/5)};i.prototype.getPoints=function(t,e){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",t)}var i=this.getRotationCenter(t,e);var a=this.getRadius(t,e);var r=this.getRadius2(t,e);var n=[];if(i&&i.length===2&&jQuery.isNumeric(a)&&jQuery.isNumeric(r)){n=this._generatePentaclePoints(i,a,r)}return n.join("")};i.prototype._generatePentaclePoints=function(t,e,i){var a={},r=[],n=Math.PI/5,s=0;for(var o=0;o<10;o++){s=n*o;a.x=this._getPointX(t[0],o%2==0?e:i,s);a.y=this._getPointY(t[1],o%2==0?e:i,s);r.push(" "+a.x+","+a.y)}return r};i.prototype._getPointX=function(t,e,i){return t+e*Math.sin(i)};i.prototype._getPointY=function(t,e,i){return t-e*Math.cos(i)};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/TextRepeat", ["sap/gantt/shape/Definitions","sap/ui/core/Core","sap/gantt/misc/Format"],function(t,e,i){"use strict";var r=t.extend("sap.gantt.shape.ext.TextRepeat",{metadata:{properties:{childTagName:{type:"string",defaultValue:"pattern"},x:{type:"float"},y:{type:"float"},width:{type:"float"},height:{type:"float",defaultValue:15},dx:{type:"string"},dy:{type:"string"},text:{type:"string"},fontSize:{type:"int"},fontFamily:{type:"string"}}}});r.prototype.getChildTagName=function(t,e){if(this.mShapeConfig.hasShapeProperty("childTagName")){return this._configFirst("childTagName",t)}return"pattern"};r.prototype.getX=function(t,r){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",t)}var n;var o=this.getAxisTime();if(e.getConfiguration().getRTL()){n=o.timeToView(i.abapTimestampToDate(this.getEndTime(t,r)))}else{n=o.timeToView(i.abapTimestampToDate(this.getTime(t,r)))}if(!jQuery.isNumeric(n)){return 0}return n};r.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}return 0};r.prototype.getWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("width")){return this._configFirst("width",t)}return 0};r.prototype.getHeight=function(t,e){if(this.mShapeConfig.hasShapeProperty("height")){return this._configFirst("height",t)}return 0};r.prototype.getDx=function(t,e){if(this.mShapeConfig.hasShapeProperty("dx")){return this._configFirst("dx",t)}return"0"};r.prototype.getDy=function(t,e){if(this.mShapeConfig.hasShapeProperty("dy")){return this._configFirst("dy",t)}return"0"};r.prototype.getText=function(t,e){if(this.mShapeConfig.hasShapeProperty("text")){return this._configFirst("text",t)}return""};r.prototype.getContent=function(t,e){if(this.mShapeConfig.hasShapeProperty("content")){return this._configFirst("content",t)}var i=this.getChildTagName(t,e);return"<"+i+" id='"+this.getReferenceId(t,e)+"' patternUnits='userSpaceOnUse'"+" width="+this.getWidth(t,e)+" height="+this.getHeight(t,e)+" x="+this.getX(t,e)+" y="+this.getY(t,e)+"><text dx="+this.getDx(t,e)+" dy="+this.getDy(t,e)+" font-size="+this.getFontSize(t,e)+" font-family='"+this.getFontFamily(t,e)+"'>"+this.getText(t,e)+"</text></"+i+">"};r.prototype.getFontSize=function(t,e){if(this.mShapeConfig.hasShapeProperty("fontSize")){return this._configFirst("fontSize",t,true)}return 12};r.prototype.getFontFamily=function(t,e){if(this.mShapeConfig.hasShapeProperty("fontFamily")){return this._configFirst("fontFamily",t,true)}return""};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/Triangle", ["sap/base/Log","sap/gantt/shape/Path"],function(e,t){"use strict";var i=t.extend("sap.gantt.shape.ext.Triangle",{metadata:{properties:{isClosed:{type:"boolean",defaultValue:true},base:{type:"float",defaultValue:10},height:{type:"float",defaultValue:10},distanceOfyAxisHeight:{type:"float",defaultValue:5}}}});i.prototype.init=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",e.getText("ARIA_TRIANGLE"))};i.prototype.getD=function(t,i){var r;if(this.mShapeConfig.hasShapeProperty("d")){r=this._configFirst("d",t)}else{var a=this.getBase(t,i);var s=this.getHeight(t,i);var n=this.getDistanceOfyAxisHeight(t,i);var u=this.getHeight(t,i)/2;var o=this.getRotationCenter(t,i);if(o&&o.length===2&&jQuery.isNumeric(a)&&jQuery.isNumeric(s)&&jQuery.isNumeric(n)&&jQuery.isNumeric(u)){r="M "+o.join(" ")+" m 0 "+u+" l -"+n+" 0 l "+n+" -"+s+" l "+Number(a-n)+" "+s+" l -"+Number(a-n)+" 0 z"}}if(this.isValid(r)){return r}else{e.warning("Triangle shape generated invalid d: "+r+" from the given data: "+t);return null}};i.prototype.getBase=function(e){return this._configFirst("base",e,true)};i.prototype.getHeight=function(e){return this._configFirst("height",e,true)};i.prototype.getDistanceOfyAxisHeight=function(e){return this._configFirst("distanceOfyAxisHeight",e,true)};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/rls/Relationship", ["sap/base/Log","sap/gantt/shape/Path","sap/ui/core/Core"],function(t,e,a){"use strict";var o=e.extend("sap.gantt.shape.ext.rls.Relationship",{metadata:{properties:{htmlClass:{type:"string",defaultValue:"relationshipLine"},category:{type:"string",defaultValue:sap.gantt.shape.ShapeCategory.Relationship},isClosed:{type:"boolean",defaultValue:true},isDuration:{type:"boolean",defaultValue:false},stroke:{type:"string",defaultValue:"#000000"},fill:{type:"string",defaultValue:"#000000"},type:{type:"sap.gantt.shape.ext.rls.RelationshipType",defaultValue:sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish},fromObjectPath:{type:"string"},fromExpandRowIndex:{type:"int",defaultValue:0},fromShapeId:{type:"string"},fromDataId:{type:"string"},toObjectPath:{type:"string"},toExpandRowIndex:{type:"int",defaultValue:0},toShapeId:{type:"string"},toDataId:{type:"string"},showStart:{type:"boolean",defaultValue:false},showEnd:{type:"boolean",defaultValue:true},lShapeforTypeFS:{type:"boolean",defaultValue:true},minXLen:{type:"float",defaultValue:10},arrowSideLength:{type:"float",defaultValue:5}},aggregations:{selectedShape:{type:"sap.gantt.shape.ext.rls.SelectedRelationship",multiple:false}}}});o.prototype.init=function(){this._isRTL=a.getConfiguration().getRTL();var t=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");this.setProperty("ariaLabel",t.getText("ARIA_RELATIONSHIP"))};o.prototype.getType=function(t){return this._configFirst("type",t)};o.prototype.getFromObjectPath=function(t){return this._configFirst("fromObjectPath",t)};o.prototype.getFromExpandRowIndex=function(t){return t.hasOwnProperty("fromExpandRowIndex")?this._configFirst("fromExpandRowIndex",t):this.getProperty("fromExpandRowIndex")};o.prototype.getFromShapeId=function(t){return this._configFirst("fromShapeId",t)};o.prototype.getFromDataId=function(t){return this._configFirst("fromDataId",t)};o.prototype.getToObjectPath=function(t){return this._configFirst("toObjectPath",t)};o.prototype.getToExpandRowIndex=function(t){return t.hasOwnProperty("toExpandRowIndex")?this._configFirst("toExpandRowIndex",t):this.getProperty("toExpandRowIndex")};o.prototype.getToShapeId=function(t){return this._configFirst("toShapeId",t)};o.prototype.getToDataId=function(t){return this._configFirst("toDataId",t)};o.prototype.getLShapeforTypeFS=function(t){return this._configFirst("lShapeforTypeFS",t)};o.prototype.getHtmlClass=function(t){return this._configFirst("htmlClass",t)};o.prototype.getShowStart=function(t){return this._configFirst("showStart",t)};o.prototype.getShowEnd=function(t){return this._configFirst("showEnd",t)};o.prototype.getD=function(e,a){var o=this.getShowEnd(e,a);var i=this.getShowStart(e,a);var n,s,r,p;var h;try{h=window.parseInt(this.getType(e,a))}catch(e){t.warning("invalid relationship type")}var l=this.getLShapeforTypeFS(e,a);var c=this.getFromShapeId(e,a.from.objectInfo);var f=this.mChartInstance.getShapeInstance(c);var g=f.getRLSAnchors(a.from.shapeRawData,a.from.objectInfo);var y=this.getToShapeId(e,a.from.objectInfo);var d=this.mChartInstance.getShapeInstance(y);var u=d.getRLSAnchors(a.to.shapeRawData,a.to.objectInfo);if(this._isRTL){if(h===sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish){n=g.startPoint.x;s=g.startPoint.y;r=u.startPoint.x;p=u.startPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.FinishToStart){n=g.startPoint.x;s=g.startPoint.y;r=u.endPoint.x;p=u.endPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.StartToFinish){n=g.endPoint.x;s=g.endPoint.y;r=u.startPoint.x;p=u.startPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.StartToStart){n=g.endPoint.x;s=g.endPoint.y;r=u.endPoint.x;p=u.endPoint.y}}else if(h===sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish){n=g.endPoint.x;s=g.endPoint.y;r=u.endPoint.x;p=u.endPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.FinishToStart){n=g.endPoint.x;s=g.endPoint.y;r=u.startPoint.x;p=u.startPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.StartToFinish){n=g.startPoint.x;s=g.startPoint.y;r=u.endPoint.x;p=u.endPoint.y}else if(h===sap.gantt.shape.ext.rls.RelationshipType.StartToStart){n=g.startPoint.x;s=g.startPoint.y;r=u.startPoint.x;p=u.startPoint.y}var x="";if(i){var w=this._calculateSquareCoordinate(h,n,s);x=x.concat("M").concat(w[0].x).concat(",").concat(w[0].y).concat(" ");var T=w.length;for(var R=1;R<T;R++){x=x.concat("L").concat(w[R].x).concat(",").concat(w[R].y).concat(" ")}}var S=this._calculateLineCoordinate(l,h,n,r,s,p,a.from.objectInfo,u.startPoint.height);x=x.concat("M").concat(S[0].x).concat(",").concat(S[0].y).concat(" ");var P=S.length;for(var v=0;v<P;v++){x=x.concat("L").concat(S[v].x).concat(",").concat(S[v].y).concat(" ");x=x.concat("M").concat(S[v].x).concat(",").concat(S[v].y).concat(" ")}if(o){var F=this._calculateArrowCoordinate(l,h,n,r,s,p,u.startPoint.height);var M=F.length;for(var m=0;m<M;m++){x=x.concat("L").concat(F[m].x).concat(",").concat(F[m].y).concat(" ")}}x=x.concat("Z");if(this.isValid(x)){return x}else{t.warning("Relationship shape generated invalid d: "+x+" from the given data: "+e);return null}};o.prototype._calculateSquareCoordinate=function(t,e,a){var o=[];if(t===sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish||t===sap.gantt.shape.ext.rls.RelationshipType.FinishToStart){if(this._isRTL){o=[e,a-2,e-3,a-2,e-3,a+1.5,e,a+1.5,e,a-2]}else{o=[e-1,a-2,e-1+3,a-2,e-1+3,a+1.5,e-1,a+1.5,e-1,a-2]}}else if(this._isRTL){o=[e-1,a-2,e-1+3,a-2,e-1+3,a+1.5,e-1,a+1.5,e-1,a-2]}else{o=[e,a-2,e-3,a-2,e-3,a+1.5,e,a+1.5,e,a-2]}var i=[];var n=o.length;for(var s=0;s<n;){i[i.length]={x:o[s++],y:o[s++]}}return i};o.prototype._calculateLineCoordinate=function(t,e,a,o,i,n,s,r){var p=[];var h,l;if(i===n){p=p.concat([a,i,o,n])}else{var c=this.getMinXLen();if(e===sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish){if(this._isRTL){p=p.concat([a,i,Math.min(a,o)-c,i,Math.min(a,o)-c,n,o,n])}else{p=p.concat([a,i,Math.max(a,o)+c,i,Math.max(a,o)+c,n,o,n])}}else if(e===sap.gantt.shape.ext.rls.RelationshipType.FinishToStart){if(t){if(this._isRTL){if(a>=o){if(i<n){n=n-r/2-2}else{n=n+r/2+2}p=p.concat([a,i,o,i,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a-c,i,a-c,l,o+c,l,o+c,n,o,n])}else if(i>n){h=s.y;p=p.concat([a,i,a-c,i,a-c,h,o+c,h,o+c,n,o,n])}}else if(a<=o){if(i<n){n=n-r/2-2}else{n=n+r/2+2}p=p.concat([a,i,o,i,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a+c,i,a+c,l,o-c,l,o-c,n,o,n])}else if(i>n){h=s.y;p=p.concat([a,i,a+c,i,a+c,h,o-c,h,o-c,n,o,n])}}else if(this._isRTL){if(a-c>o){p=p.concat([a,i,a-c,i,a-c,n,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a-c,i,a-c,l,o+c,l,o+c,n,o,n])}else if(i>n){h=s.y-s.rowHeight;p=p.concat([a,i,a-c,i,a-c,h,o+c,h,o+c,n,o,n])}}else if(a+c<=o){if(this.getShowEnd()){var f=this.getArrowSideLength();c=a+c+f>o?Math.abs(c-f):c}p=p.concat([a,i,a+c,i,a+c,n,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a+c,i,a+c,l,o-c,l,o-c,n,o,n])}else if(i>n){h=s.y-s.rowHeight;p=p.concat([a,i,a+c,i,a+c,h,o-c,h,o-c,n,o,n])}}else if(e===sap.gantt.shape.ext.rls.RelationshipType.StartToFinish){if(this._isRTL){if(a<o-c){p=p.concat([a,i,a+c,i,a+c,n,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a+c,i,a+c,l,o-c,l,o-c,n,o,n])}else if(i>n){h=s.y;p=p.concat([a,i,a+c,i,a+c,h,o-c,h,o-c,n,o,n])}}else if(a>=o+c){p=p.concat([a,i,a-c,i,a-c,n,o,n])}else if(i<n){l=s.y+s.rowHeight;p=p.concat([a,i,a-c,i,a-c,l,o+c,l,o+c,n,o,n])}else if(i>n){h=s.y;p=p.concat([a,i,a-c,i,a-c,h,o+c,h,o+c,n,o,n])}}else if(e===sap.gantt.shape.ext.rls.RelationshipType.StartToStart){if(this._isRTL){p=p.concat([a,i,Math.max(a,o)+c,i,Math.max(a,o)+c,n,o,n])}else{p=p.concat([a,i,Math.min(a,o)-c,i,Math.min(a,o)-c,n,o,n])}}}var g=[];var y=p.length;for(var d=0;d<y;){g[g.length]={x:p[d++],y:p[d++]}}return g};o.prototype._calculateArrowCoordinate=function(t,e,a,o,i,n,s){var r=[];var p=this.getArrowSideLength();if(e===sap.gantt.shape.ext.rls.RelationshipType.FinishToFinish||e===sap.gantt.shape.ext.rls.RelationshipType.StartToFinish){if(this._isRTL){r=[o-p*Math.pow(3,1/2)/2,n-p/2,o-p*Math.pow(3,1/2)/2,n+p/2]}else{r=[o+p*Math.pow(3,1/2)/2,n-p/2,o+p*Math.pow(3,1/2)/2,n+p/2]}}else if(e===sap.gantt.shape.ext.rls.RelationshipType.StartToStart){if(this._isRTL){r=[o+p*Math.pow(3,1/2)/2,n-p/2,o+p*Math.pow(3,1/2)/2,n+p/2]}else{r=[o-p*Math.pow(3,1/2)/2,n-p/2,o-p*Math.pow(3,1/2)/2,n+p/2]}}else if(t){if(this._isRTL){if(a>=o){if(i<n){n=n-s/2-1}else if(i>n){n=n+s/2+1}else{}if(i<n){r=[o+p/2,n-p*Math.pow(3,1/2)/2,o-p/2,n-p*Math.pow(3,1/2)/2]}else if(i==n){r=[o+p*Math.pow(3,1/2)/2,n-p/2,o+p*Math.pow(3,1/2)/2,n+p/2]}else{r=[o+p/2,n+p*Math.pow(3,1/2)/2,o-p/2,n+p*Math.pow(3,1/2)/2]}}else{r=[o+p*Math.pow(3,1/2)/2,n-p/2,o+p*Math.pow(3,1/2)/2,n+p/2]}}else if(a<=o){if(i<n){n=n-s/2-1}else if(i>n){n=n+s/2+1}else{}if(i<n){r=[o-p/2,n-p*Math.pow(3,1/2)/2,o+p/2,n-p*Math.pow(3,1/2)/2]}else if(i==n){r=[o-p*Math.pow(3,1/2)/2,n-p/2,o-p*Math.pow(3,1/2)/2,n+p/2]}else{r=[o-p/2,n+p*Math.pow(3,1/2)/2,o+p/2,n+p*Math.pow(3,1/2)/2]}}else{r=[o-p*Math.pow(3,1/2)/2,n-p/2,o-p*Math.pow(3,1/2)/2,n+p/2]}}else if(this._isRTL){r=[o+p*Math.pow(3,1/2)/2,n-p/2,o+p*Math.pow(3,1/2)/2,n+p/2]}else{r=[o-p*Math.pow(3,1/2)/2,n-p/2,o-p*Math.pow(3,1/2)/2,n+p/2]}var h=[];var l=r.length;for(var c=0;c<l;){h[h.length]={x:r[c++],y:r[c++]}}return h};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/rls/SelectedRelationship", ["sap/gantt/shape/ext/rls/Relationship"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.rls.SelectedRelationship",{metadata:{properties:{stroke:{type:"string"},strokeWidth:{type:"int"}}}});e.prototype.getHeight=function(t){return 0};e.prototype.setHeight=function(t){return this};e.prototype.getStroke=function(t){return"red"};e.prototype.getFill=function(t){return"red"};e.prototype.getStrokeWidth=function(t){return 2};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcBorderPath", ["sap/base/Log","sap/gantt/misc/Format","sap/gantt/shape/Path"],function(t,e,a){"use strict";var i=a.extend("sap.gantt.shape.ext.ubc.UbcBorderPath",{});i.prototype.getEnableSelection=function(t,e){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",t)}return false};i.prototype.getD=function(a,i){var r="";if(this.mShapeConfig.hasShapeProperty("d")){r=this._configFirst("d",a)}else{var o=a.drawData?a.drawData:a.period;if(o.length>0){var n=this._getMaxTotalRevised(a);var s=this._getMaxY(a,i);var p=i.rowHeight-1;var h=this.getAxisTime();for(var d=0;d<o.length;d++){var f,g,u,m;f=h.timeToView(e.abapTimestampToDate(o[d].start_date)).toFixed(1);if(d<o.length-1){g=h.timeToView(e.abapTimestampToDate(o[d+1].start_date)).toFixed(1)}else{g=h.timeToView(e.abapTimestampToDate(o[d].start_date)).toFixed(1)}if(!jQuery.isNumeric(f)){f=h.timeToView(0).toFixed(1)}if(!jQuery.isNumeric(g)){f=h.timeToView(0).toFixed(1)}u=s-o[d].demand/n*p;u=u.toFixed(1);if(u<i.y){u=i.y}if(d<o.length-1){m=s-o[d+1].demand/n*p}else{g=h.timeToView(e.abapTimestampToDate(o[d].start_date)).toFixed(1);m=s-o[d].demand/n*p}m=m.toFixed(1);if(m<i.y){m=i.y}r+=" M "+f+" "+u+"L"+g+" "+u;r+=" M "+g+" "+u+"L"+g+" "+m}}}if(this.isValid(r)){return r}else{t.warning("UbcBorderPath shape generated invalid d: "+r+" from the given data: "+a);return null}};i.prototype.getStroke=function(t,e){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}return"blue"};i.prototype.getStrokeWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return.3};i.prototype._getMaxY=function(t,e){var a=e.y;var i=e.rowHeight-1;var r=a+i;return r};i.prototype._getMaxTotalRevised=function(t){var e=this._getMaxTotal(t);var a=e+this._getmaxExceedCap(t);return a};i.prototype._getMaxTotal=function(t){var e=Math.max.apply(Math,t.period.map(function(t){return t.supply}));if(e<=0){e=1}return e};i.prototype._getmaxExceedCap=function(t){var e=this._getMaxTotal(t);var a=25;if(this.mShapeConfig.hasShapeProperty("maxExceedCapacity")){a=this._configFirst("maxExceedCapacity",t)}return e*a/100};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcOverCapacityZonePolygon", ["sap/gantt/shape/ext/ubc/UbcPolygon"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ubc.UbcOverCapacityZonePolygon",{});e.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}var r,i;if(this.mShapeConfig.hasShapeProperty("backgroundColor")){r=this._configFirst("backgroundColor",t)}if(this.mShapeConfig.hasShapeProperty("pattern")){i=this._configFirst("pattern",t)}var o;if(r&&i){o="pattern_"+i+"_"+(r.indexOf("#")==0?r.substring(1,r.length):r)}if(o&&sap.ui.getCore().byId(o)){return sap.ui.getCore().byId(o).getRefString()}};e.prototype.getStroke=function(t,e){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}return"#CAC7BA"};e.prototype.getStrokeWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return.3};e.prototype.getPoints=function(t,e){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",t)}var r="";var i=this.getShapeViewBoundary();if(i){r=i[0]+","+e.y+" "+(i[1]-i[0])+","+e.y+" "+(i[1]-i[0])+","+(e.y+e.rowHeight)+" "+i[0]+","+(e.y+e.rowHeight);return r}};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcPolygon", ["sap/gantt/shape/Polygon"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ubc.UbcPolygon",{metadata:{abstract:true}});e.prototype.getEnableSelection=function(t,e){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",t)}return false};e.prototype._getMaxY=function(t,e){var a=e.y;var r=e.rowHeight-1;var n=a+r;return n};e.prototype._getMaxTotal=function(t){var e=Math.max.apply(Math,t.period.map(function(t){return t.supply}));if(e<=0){e=1}return e};e.prototype._getmaxExceedCap=function(t,e){var a;if(e){a=e}else{a=this._getMaxTotal(t)}var r=25;if(this.mShapeConfig.hasShapeProperty("maxExceedCapacity")){r=this._configFirst("maxExceedCapacity",t)}return a*r/100};e.prototype._getMaxTotalRevised=function(t){var e=this._getMaxTotal(t);var a=this._getmaxExceedCap(t,e)+e;return a};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcShortageCapacityPolygon", ["sap/gantt/misc/Format","sap/gantt/shape/ext/ubc/UbcPolygon"],function(t,e){"use strict";var i=e.extend("sap.gantt.shape.ext.ubc.UbcShortageCapacityPolygon",{});i.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}return"#FF0000"};i.prototype.getStroke=function(t,e){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}return"#CAC7BA"};i.prototype.getStrokeWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return.3};i.prototype.getPoints=function(e,i){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",e)}var r="";var a=this._getMaxY(e,i);var o=i.y;var s=this._getMaxTotalRevised(e);var n=i.rowHeight-1;var p=e.drawData?e.drawData:e.period;var h=this.getAxisTime();for(var f=0;f<p.length;f++){var g=p[f];var d,u;d=h.timeToView(t.abapTimestampToDate(g.start_date)).toFixed(1);if(f<p.length-1){u=h.timeToView(t.abapTimestampToDate(p[f+1].start_date)).toFixed(1)}else{u=h.timeToView(t.abapTimestampToDate(p[f].start_date)).toFixed(1)}if(!jQuery.isNumeric(d)){d=h.timeToView(0).toFixed(1)}if(!jQuery.isNumeric(u)){u=h.timeToView(0).toFixed(1)}if(f===0){r+=d+","+a+" "}var m=a;if(g.demand>g.supply){if(g.demand/s>1){m=o}else{m=a-g.demand/s*n}}m=m.toFixed(1);r+=d+","+m+" ";r+=u+","+m+" ";if(f===p.length-1){r+=d+","+m+" ";r+=d+","+a+" "}}return r};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcTooltipRectangle", ["sap/gantt/misc/Format","sap/gantt/shape/Rectangle"],function(t,e){"use strict";var i=e.extend("sap.gantt.shape.ext.ubc.UbcTooltipRectangle",{});i.prototype.init=function(){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.gantt")};i.prototype.getEnableSelection=function(t,e){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",t)}return false};i.prototype.getX=function(e,i){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",e)}var r=this.getAxisTime();var o=r.timeToView(t.abapTimestampToDate(e.start_date)).toFixed(1);if(!jQuery.isNumeric(o)){o=this.axisTime.timeToView(0).toFixed(1)}return o};i.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}return e.y};i.prototype.getWidth=function(e,i){if(this.mShapeConfig.hasShapeProperty("width")){return this._configFirst("width",e)}var r,o,a;var n=this.getAxisTime();o=n.timeToView(t.abapTimestampToDate(e.start_date)).toFixed(1);a=n.timeToView(t.abapTimestampToDate(e.end_date)).toFixed(1);if(!jQuery.isNumeric(o)){o=this.axisTime.timeToView(0).toFixed(1)}if(!jQuery.isNumeric(a)){a=this.axisTime.timeToView(0).toFixed(1)}r=a-o>0?a-o:o-a;if(r===0||!jQuery.isNumeric(r)){r=1}return r};i.prototype.getHeight=function(t,e){if(this.mShapeConfig.hasShapeProperty("height")){return this._configFirst("height",t)}return e.rowHeight-1};i.prototype.getStrokeOpacity=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeOpacity")){return this._configFirst("strokeOpacity",t)}return 0};i.prototype.getFillOpacity=function(t,e){if(this.mShapeConfig.hasShapeProperty("fillOpacity")){return this._configFirst("fillOpacity",t)}return 0};i.prototype.getTitle=function(t,e){if(this.mShapeConfig.hasShapeProperty("title")){return this._configFirst("title",t)}var i=this._oRb.getText("TLTP_CAPACITY",[t.supply,t.demand]);if(t.demand>t.supply){i+=this._oRb.getText("TLTP_OVER_CAPACITY",[t.demand-t.supply])}return i};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcUnderCapacityZonePolygon", ["sap/gantt/misc/Format","sap/gantt/shape/ext/ubc/UbcPolygon"],function(t,e){"use strict";var i=e.extend("sap.gantt.shape.ext.ubc.UbcUnderCapacityZonePolygon",{});i.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}return"#40d44c"};i.prototype.getPoints=function(e,i){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",e)}var a="";var r=this._getMaxY(e,i);var o=this._getMaxTotalRevised(e);var s=i.rowHeight-1;var n=e.drawData?e.drawData:e.period;var p=this.getAxisTime();for(var h=0;h<n.length;h++){var f=n[h];var g,m;g=p.timeToView(t.abapTimestampToDate(f.start_date)).toFixed(1);if(h<n.length-1){m=p.timeToView(t.abapTimestampToDate(n[h+1].start_date)).toFixed(1)}else{m=p.timeToView(t.abapTimestampToDate(n[h].start_date)).toFixed(1)}if(!jQuery.isNumeric(g)){g=p.timeToView(0).toFixed(1)}if(!jQuery.isNumeric(m)){m=p.timeToView(0).toFixed(1)}if(h===0){a+=g+","+r+" "}var u=r-f.supply/o*s;u=u.toFixed(1);a+=g+","+u+" ";a+=m+","+u+" ";if(h===n.length-1){a+=g+","+u+" ";a+=g+","+r+" "}}return a};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UbcUsedPolygon", ["sap/gantt/misc/Format","sap/gantt/shape/ext/ubc/UbcPolygon"],function(t,e){"use strict";var i=e.extend("sap.gantt.shape.ext.ubc.UbcUsedPolygon",{});i.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}return"#CAC7BA"};i.prototype.getPoints=function(e,i){if(this.mShapeConfig.hasShapeProperty("points")){return this._configFirst("points",e)}var a="";var r=this._getMaxY(e,i);var o=this._getMaxTotalRevised(e);var s=i.rowHeight-1;var n=e.drawData?e.drawData:e.period;var p=this.getAxisTime();for(var d=0;d<n.length;d++){var m=n[d];var f,h;var u;f=p.timeToView(t.abapTimestampToDate(m.start_date)).toFixed(1);if(d<n.length-1){h=p.timeToView(t.abapTimestampToDate(n[d+1].start_date)).toFixed(1)}else{h=p.timeToView(t.abapTimestampToDate(n[d].start_date)).toFixed(1)}if(!jQuery.isNumeric(f)){f=p.timeToView(0).toFixed(1)}if(!jQuery.isNumeric(h)){h=p.timeToView(0).toFixed(1)}if(d===0){a+=f+","+r+" "}if(m.demand>=m.supply){u=r-m.supply/o*s}else{u=r-m.demand/o*s}u=u.toFixed(1);a+=f+","+u+" ";a+=h+","+u+" ";if(d===n.length-1){a+=f+","+u+" ";a+=f+","+r+" "}}return a};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ubc/UtilizationBarChart", ["sap/gantt/shape/Group","sap/gantt/misc/Format"],function(e,t){"use strict";var r=e.extend("sap.gantt.shape.ext.ubc.UtilizationBarChart",{});r.prototype.getEnableSelection=function(e,t){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",e)}return false};r.prototype.filterValidData=function(e){if(!e){return[]}var t=[];for(var r=0;r<e.length;r++){var a=this.getIsBulk(e[r]);var i=this.getArrayAttribute(e[r]);var n=this.getTimeFilterAttribute(e[r]);var l=this.getEndTimeFilterAttribute(e[r]);var s=this.mChartInstance._oStatusSet.aTimeBoundary;var h=jQuery.extend(true,{},e[r]);if(a&&i&&n&&l){var u=null;var o=null;var f=this.getShapes();var p=[];for(var v=0;v<f.length;v++){var g=f[v].mShapeConfig.getShapeDataName();if(g&&jQuery.inArray(g,p)==-1){p.push(g)}}for(var c in h){if(jQuery.type(h[c])=="object"&&h[c][i]&&h[c][i].length>0){u=this._binarySearchElement(s[0],h[c][i],n,l);o=this._binarySearchElement(s[1],h[c][i],n,l,u);if(u!==null&&o!==null&&u<=o){u=u>=1?u-1:u;h[c].drawData=h[c][i].slice(u,o+2);for(var y=0;y<p.length;y++){if(c!==p[y]&&jQuery.type(h[p[y]])=="array"&&h[p[y]].length>0){h[p[y]]=h[p[y]].slice(u,o+1)}}}break}}}t.push(h)}return t};r.prototype._binarySearchElement=function(e,r,a,i,n){var l=0;var s=r.length-1;if(n&&n<s){l=n}var h;while(l<=s){h=Math.floor((l+s)/2);var u=t.abapTimestampToDate(r[h][a]);var o=t.abapTimestampToDate(r[h][i]);if(!o){o=u}if(u<=e&&e<=o){return h}else if(o<e){l=h+1}else if(u>e){s=h-1}}return h};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcBorderPath", ["sap/base/Log","sap/gantt/shape/Path","sap/gantt/misc/Format"],function(t,e,i){"use strict";var a=e.extend("sap.gantt.shape.ext.ulc.UlcBorderPath",{});a.prototype.getD=function(e,a){var r="";if(this.mShapeConfig.hasShapeProperty("d")){r=this._configFirst("d",e)}else{if(e.values){for(var s=0;s<e.values.length;s++){var o=this.getAxisTime();var n=o.timeToView(i.abapTimestampToDate(e.values[s].from));var h=o.timeToView(i.abapTimestampToDate(e.values[s].to));var p=e.values[s].value;if(isNaN(p)){p=0}var f=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){f=this._configFirst("maxVisibleRatio",e)}if(p>100+f){p=100+f}var u=a.y+a.rowHeight-a.rowHeight*(p/(100+f));var g=a.y+a.rowHeight;r=r+(e.values[s].firstOne?" M "+n+" "+g:"")+" L "+n+" "+u+" L "+h+" "+u+(e.values[s].lastOne?" L "+h+" "+g:"")}}}if(this.isValid(r)){return r}else{t.warning("UlcBorderPath shape generated invalid d: "+r+" from the given data: "+e);return null}};a.prototype.getStroke=function(t,e){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}var i;if(this.mShapeConfig.hasShapeProperty("utilizationCurves")){i=this._configFirst("utilizationCurves",t);return i[t.dimension].color}};a.prototype.getStrokeWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return 1};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcClipPath", ["sap/gantt/shape/ClipPath"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ulc.UlcClipPath",{});e.prototype.getHtmlClass=function(t,e){if(this.mShapeConfig.hasShapeProperty("htmlClass")){return this._configFirst("htmlClass",t)}var a=e.uid;var s=new RegExp("\\[|\\]|:|\\|","g");var i=a.replace(s,"_");return i+"_"+t.id+"_"+t.dimension};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcClipingPath", ["sap/base/Log","sap/gantt/shape/Path","sap/gantt/misc/Format"],function(a,e,i){"use strict";var t=e.extend("sap.gantt.shape.ext.ulc.UlcClipingPath",{});t.prototype.getD=function(e,t){var s="";if(this.mShapeConfig.hasShapeProperty("d")){s=this._configFirst("d",e)}else{if(e.values){for(var r=0;r<e.values.length;r++){var n=this.getAxisTime();var o=n.timeToView(i.abapTimestampToDate(e.values[r].from));var h=n.timeToView(i.abapTimestampToDate(e.values[r].to));var l=e.values[r].value;if(isNaN(l)){l=0}var p=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){p=this._configFirst("maxVisibleRatio",e)}if(l>100+p){l=100+p}var v=t.y+t.rowHeight-t.rowHeight*(l/(100+p));var g=t.y+t.rowHeight;s=s+(e.values[r].firstOne?" M "+o+" "+g:"")+" L "+o+" "+v+" L "+h+" "+v+(e.values[r].lastOne?" L "+h+" "+g:"")}}}if(this.isValid(s)){return s}else{a.warning("UlcClipingPath shape generated invalid d: "+s+" from the given data: "+e);return null}};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcDimension", ["sap/gantt/shape/Group"],function(e){"use strict";var t=e.extend("sap.gantt.shape.ext.ulc.UlcDimension",{});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcMiddleLine", ["sap/gantt/shape/Line"],function(t){"use strict";var r=t.extend("sap.gantt.shape.ext.ulc.UlcMiddleLine",{});r.prototype.getX1=function(t,r){if(this.mShapeConfig.hasShapeProperty("x1")){return this._configFirst("x1",t)}var e=this.mChartInstance._oStatusSet?this.mChartInstance._oStatusSet.aViewBoundary:[];if(e.length>0){return e[0]}return 0};r.prototype.getY1=function(t,r){if(this.mShapeConfig.hasShapeProperty("y1")){return this._configFirst("y1",t)}var e=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){e=this._configFirst("maxVisibleRatio",t)}return r.y+r.rowHeight*(50+e)/(100+e)};r.prototype.getX2=function(t,r){if(this.mShapeConfig.hasShapeProperty("x2")){return this._configFirst("x2",t)}var e=this.mChartInstance._oStatusSet?this.mChartInstance._oStatusSet.aViewBoundary:[];if(e.length>0){return e[1]}return 0};r.prototype.getY2=function(t,r){if(this.mShapeConfig.hasShapeProperty("y2")){return this._configFirst("y2",t)}return this.getY1(t,r)};r.prototype.getStrokeDasharray=function(t,r){if(this.mShapeConfig.hasShapeProperty("strokeDasharray")){return this._configFirst("strokeDasharray",t)}return"5,5"};r.prototype.getStroke=function(t){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}return"#CAC7BA"};r.prototype.getStrokeWidth=function(t){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return 1};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcOverCapacityZoneRectangle", ["sap/gantt/shape/ext/ulc/UlcRectangle"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ulc.UlcOverCapacityZoneRectangle",{});e.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}var r,i;if(this.mShapeConfig.hasShapeProperty("backgroundColor")){r=this._configFirst("backgroundColor",t)}if(this.mShapeConfig.hasShapeProperty("pattern")){i=this._configFirst("pattern",t)}var n;if(r&&i){n="pattern_"+i+"_"+(r.indexOf("#")==0?r.substring(1,r.length):r)}if(n&&sap.ui.getCore().byId(n)){return sap.ui.getCore().byId(n).getRefString()}return"#F6F6F6"};e.prototype.getStroke=function(t,e){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",t)}return"#CAC7BA"};e.prototype.getStrokeWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",t)}return 0};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcOverClipRectangle", ["sap/gantt/shape/ext/ulc/UlcRectangle"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ulc.UlcOverClipRectangle",{});e.prototype.getFill=function(t,e){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}return"#FF0000"};e.prototype.getClipPath=function(t,e){if(this.mShapeConfig.hasShapeProperty("clipPath")){return this._configFirst("clipPath",t)}var i=e.uid;var r=new RegExp("\\[|\\]|:|\\|","g");var n=i.replace(r,"_");return"url(#"+n+"_"+t.id+"_"+t.dimension+")"};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcRectangle", ["sap/gantt/shape/Rectangle"],function(t){"use strict";var e=t.extend("sap.gantt.shape.ext.ulc.UlcRectangle",{metadata:{abstract:true}});e.prototype.getFill=function(){return t.prototype.getFill.apply(this,arguments)||"transparent"};e.prototype.getX=function(t,e){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",t)}var i=this.getShapeViewBoundary();if(i){return i[0]}return 0};e.prototype.getY=function(t,e){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}return e.y};e.prototype.getWidth=function(t,e){if(this.mShapeConfig.hasShapeProperty("width")){return this._configFirst("width",t)}var i=this.getShapeViewBoundary();if(i){return i[1]-i[0]}return 0};e.prototype.getHeight=function(t,e){if(this.mShapeConfig.hasShapeProperty("height")){return this._configFirst("height",t)}var i=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){i=this._configFirst("maxVisibleRatio",t)}return e.rowHeight*i/(100+i)};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcTooltipRectangle", ["sap/gantt/shape/ext/ulc/UlcRectangle","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,i,e){"use strict";var r=t.extend("sap.gantt.shape.ext.ulc.UlcTooltipRectangle",{});r.prototype.getTitle=function(t,i){if(this.mShapeConfig.hasShapeProperty("title")){return this._configFirst("title",t)}var e="";var r;if(this.mShapeConfig.hasShapeProperty("utilizationCurves")){r=this._configFirst("utilizationCurves",t)}if(t){for(var a in r){if(t[r[a].ratioAttribute]||t[r[a].ratioAttribute]===0){if(t[r[a].ratioAttribute].previous!==undefined){e+=r[a].name+"\t"+t[r[a].ratioAttribute].previous+"-"+t[r[a].ratioAttribute].next+"%"+"\n"}else{e+=r[a].name+"\t"+t[r[a].ratioAttribute].value+"%"+"\n"}}}}return e};r.prototype.getX=function(t,r){if(this.mShapeConfig.hasShapeProperty("x")){return this._configFirst("x",t)}var a=this.getAxisTime();if(e.getConfiguration().getRTL()){return a.timeToView(i.abapTimestampToDate(t.to))}else{return a.timeToView(i.abapTimestampToDate(t.from))}};r.prototype.getWidth=function(t,r){if(this.mShapeConfig.hasShapeProperty("width")){return this._configFirst("width",t)}var a=this.getAxisTime();if(e.getConfiguration().getRTL()){return Math.abs(a.timeToView(i.abapTimestampToDate(t.from))-a.timeToView(i.abapTimestampToDate(t.to)))}else{return Math.abs(a.timeToView(i.abapTimestampToDate(t.to))-a.timeToView(i.abapTimestampToDate(t.from)))}};r.prototype.getHeight=function(t,i){if(this.mShapeConfig.hasShapeProperty("height")){return this._configFirst("height",t)}return i.rowHeight};r.prototype.getStrokeOpacity=function(t,i){if(this.mShapeConfig.hasShapeProperty("strokeOpacity")){return this._configFirst("strokeOpacity",t)}return 0};r.prototype.getFillOpacity=function(t,i){if(this.mShapeConfig.hasShapeProperty("fillOpacity")){return this._configFirst("fillOpacity",t)}return 0};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UlcUnderClipRectangle", ["sap/gantt/shape/ext/ulc/UlcRectangle"],function(t){"use strict";var i=t.extend("sap.gantt.shape.ext.ulc.UlcUnderClipRectangle",{});i.prototype.getY=function(t,i){if(this.mShapeConfig.hasShapeProperty("y")){return this._configFirst("y",t)}var e=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){e=this._configFirst("maxVisibleRatio",t)}return i.y+i.rowHeight*e/(100+e)};i.prototype.getHeight=function(t,i){if(this.mShapeConfig.hasShapeProperty("height")){return this._configFirst("height",t)}var e=25;if(this.mShapeConfig.hasShapeProperty("maxVisibleRatio")){e=this._configFirst("maxVisibleRatio",t)}return i.rowHeight-i.rowHeight*e/(100+e)};i.prototype.getFill=function(t,i){if(this.mShapeConfig.hasShapeProperty("fill")){return this._configFirst("fill",t)}return"#F2F2F2"};i.prototype.getStrokeOpacity=function(t,i){if(this.mShapeConfig.hasShapeProperty("strokeOpacity")){return this._configFirst("strokeOpacity",t)}return.3};i.prototype.getFillOpacity=function(t,i){if(this.mShapeConfig.hasShapeProperty("fillOpacity")){return this._configFirst("fillOpacity",t)}return.3};i.prototype.getClipPath=function(t,i){if(this.mShapeConfig.hasShapeProperty("clipPath")){return this._configFirst("clipPath",t)}var e=i.uid;var r=new RegExp("\\[|\\]|:|\\|","g");var a=e.replace(r,"_");return"url(#"+a+"_"+t.id+"_"+t.dimension+")"};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/shape/ext/ulc/UtilizationLineChart", ["sap/gantt/shape/Group"],function(e){"use strict";var t=e.extend("sap.gantt.shape.ext.ulc.UtilizationLineChart",{});t.prototype.getEnableSelection=function(e,t){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",e)}return false};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/AdhocDiamond", ["./BaseDiamond"],function(e){"use strict";var t=e.extend("sap.gantt.simple.AdhocDiamond",{metadata:{events:{press:{},mouseEnter:{},mouseLeave:{}}},renderer:{apiVersion:2}});t.prototype.onclick=function(e){this.firePress(e)};t.prototype.onmouseover=function(e){this.fireMouseEnter(e)};t.prototype.onmouseout=function(e){this.fireMouseLeave(e)};t.prototype.renderElement=function(t,o){e.prototype.renderElement.apply(this,arguments)};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/AdhocLine", ["sap/ui/core/Element","./GanttUtils","sap/gantt/simple/MarkerType"],function(e,t,r){"use strict";var a=e.extend("sap.gantt.simple.AdhocLine",{metadata:{library:"sap.gantt",properties:{stroke:{type:"sap.gantt.ValueSVGPaintServer"},_strokeWidth:{type:"float",defaultValue:1},strokeDasharray:{type:"string"},strokeOpacity:{type:"float",defaultValue:1},timeStamp:{type:"string"},description:{type:"string"},visible:{type:"boolean",defaultValue:true},markerType:{type:"sap.gantt.simple.MarkerType",defaultValue:r.None},markerPopoverDelay:{type:"int",defaultValue:300},_selected:{type:"boolean",defaultValue:false},_level:{type:"int",defaultValue:1},draggable:{type:"boolean",defaultValue:false}},events:{markerPress:{},markerMouseEnter:{},markerMouseLeave:{},adhoclineDrop:{parameters:{newTimeStamp:{type:"string"},oldTimeStamp:{type:"string"}}}},aggregations:{_line:{type:"sap.gantt.simple.BaseLine",multiple:false},_marker:{type:"sap.gantt.simple.AdhocDiamond",multiple:false},_headerLine:{type:"sap.gantt.simple.BaseLine",multiple:false}},designtime:"sap/gantt/designtime/simple/AdhocLine.designtime"}});a.prototype._getStrokeWidth=function(){return this.getProperty("_strokeWidth")};a.prototype._getMarker=function(){return this.getAggregation("_marker")};a.prototype._setMarker=function(e){this.setAggregation("_marker",e,true)};a.prototype._getLine=function(){return this.getAggregation("_line")};a.prototype._setLine=function(e){this.setAggregation("_line",e,true)};a.prototype._getHeaderLine=function(){return this.getAggregation("_headerLine")};a.prototype._setHeaderLine=function(e){this.setAggregation("_headerLine",e,true)};a.prototype._setSelected=function(e){this.setProperty("_selected",e,true)};a.prototype._getSelected=function(){return this.getProperty("_selected")};a.prototype._setLevel=function(e){this.setProperty("_level",e,true)};a.prototype._getLevel=function(){return this.getProperty("_level")};a.prototype.markerPress=function(e){if(this.getMarkerType()!==sap.gantt.simple.MarkerType.None){if(!this._getSelected()){t.resetStrokeDasharray(this.getParent());this._setSelected(true)}var r=this._getLine();var a=document.getElementById(r.sId);a.style.strokeDasharray=0;a.style.strokeWidth=this._getStrokeWidth()+1;var s=this._getHeaderLine();var i=document.getElementById(s.sId);i.style.strokeDasharray=0;i.style.strokeWidth=this._getStrokeWidth()+1;if(this.getDraggable()&&this._getSelected()){var n=document.getElementById(this._getMarker().getId());n.style.cursor="move"}}};a.prototype.markerMouseEnter=function(e){if(this.getMarkerType()!==sap.gantt.simple.MarkerType.None){var t=this._getLine();var r=document.getElementById(t.sId);r.style.strokeDasharray=0;r.style.strokeWidth=this._getStrokeWidth()+1;var a=this._getHeaderLine();var s=document.getElementById(a.sId);s.style.strokeDasharray=0;s.style.strokeWidth=this._getStrokeWidth()+1;if(this.getDraggable()&&this._getSelected()){var i=document.getElementById(this._getMarker().getId());i.style.cursor="move"}}};a.prototype.markerMouseLeave=function(e){if(this.getMarkerType()!==sap.gantt.simple.MarkerType.None){var t=this._getSelected();if(!t){var r=this._getLine();var a=document.getElementById(r.sId);var s=this.getStrokeDasharray();var i=this._getStrokeWidth();a.style.strokeDasharray=s;a.style.strokeWidth=i;var n=this._getHeaderLine();var o=document.getElementById(n.sId);o.style.strokeDasharray=s;o.style.strokeWidth=i}}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/AdhocLineRenderer", ["sap/gantt/misc/Format","./AdhocDiamond","./BaseLine"],function(e,r,t){"use strict";var a={};a.renderMarker=function(a,o,s,i,n){if(s.getEnableAdhocLine()===false){return}var k=s.getAxisTime();var u=k.timeToView(e.abapTimestampToDate(o.getTimeStamp()));var p=8;var d=o.getStrokeDasharray();var y=o._getStrokeWidth();var g=o._getSelected();if(g===true){d="solid";y=o._getStrokeWidth()+1}var l=i-n;var m=l+p/2+(o._getLevel()-1)*7;var v=o._getMarker();var h=o._getHeaderLine();var c=o.getProperty("description");if(!v&&!h){v=new r({id:o.getId()+"-marker",x:u,y:0,height:p,width:10,hoverable:true,selectable:true,rowYCenter:m,fill:o.getStroke(),press:function(e){o.markerPress(e);o.fireMarkerPress(e)},mouseEnter:function(e){o.markerMouseEnter(e);o.fireMarkerMouseEnter(e)},mouseLeave:function(e){o.markerMouseLeave(e);o.fireMarkerMouseLeave(e)}}).addStyleClass("sapGanntChartMarkerCursorPointer");if(c){v.setTooltip(c)}o._setMarker(v);h=new t({id:o.getId()+"-headerline",x1:u,y1:m,x2:u,y2:m+n,stroke:o.getStroke(),strokeWidth:y,strokeDasharray:d,strokeOpacity:o.getStrokeOpacity(),tooltip:o.getDescription()});o._setHeaderLine(h)}else{v.setProperty("x",u,true);v.setProperty("rowYCenter",m,true);v.setProperty("fill",o.getStroke(),true);h.setProperty("x1",u,true);h.setProperty("x2",u,true);h.setProperty("y1",m,true);h.setProperty("y2",m+n,true);h.setProperty("strokeDasharray",d,true);h.setProperty("strokeWidth",y,true);h.setProperty("stroke",o.getStroke(),true)}v.renderElement(a,v);h.renderElement(a,h)};a.renderLine=function(r,a,o){var s=o.getAxisTime();var i=s.timeToView(e.abapTimestampToDate(a.getTimeStamp()));var n=a.getStrokeDasharray();var k=a._getStrokeWidth();var u=a._getSelected();if(u===true){n="solid";k=a._getStrokeWidth()+1}var p=a._getLine();if(!p){p=new t({id:a.getId()+"-mainline",x1:i,y1:0,x2:i,y2:"100%",stroke:a.getStroke(),strokeWidth:k,strokeDasharray:n,strokeOpacity:a.getStrokeOpacity(),tooltip:a.getDescription()});a._setLine(p)}else{p.setProperty("x1",i,true);p.setProperty("x2",i,true);p.setProperty("strokeDasharray",n,true);p.setProperty("strokeWidth",k,true);p.setProperty("stroke",a.getStroke(),true)}p.renderElement(r,p)};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/AggregationUtils", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var t=function(t,e){if(!t||!e){return false}return t.isA(e)};var e={isParentRowSetting:function(t){return t.getParent().isA("sap.gantt.simple.GanttRowSettings")},getParentControlOf:function(e,a){if(t(a,e)){return a}var n=a.getParent(),r;while(n&&t(n,e)===false){n=n.getParent()}r=n;return r},isDeltaLine:function(t){return t.getParent().isA("sap.gantt.simple.DeltaLine")},isLazyAggregation:function(t){var e=t.getParent();if(!e){return false}var a=e.getMetadata().getAggregation(t.sParentAggregationName);return this._hasLazyConfiguration(a)},isAdhocLine:function(t){return t.getParent().isA("sap.gantt.simple.AdhocLine")},isLazy:function(t,e){return Object.keys(this.getLazyAggregations(t)).indexOf(e)!==-1},getLazyAggregations:function(t){return this._filterAggregationBy(t,function(t){return e._hasLazyConfiguration(t)})},getLazyElementsByScheme:function(t,e){var a=this.getLazyAggregations(t);var n=[];Object.keys(a).forEach(function(a){var r=t.getAggregation(a);if(r&&!jQuery.isArray(r)){r=[r]}if(r&&r.length>0&&r[0].getScheme()===e){n.push(r)}});return[].concat.apply([],n)},getNonLazyElementsByScheme:function(t,e){var a=this.getNonLazyAggregations(t);var n=[];Object.keys(a).forEach(function(a){var r=t.getAggregation(a);if(r&&!jQuery.isArray(r)){r=[r]}if(r&&r.length>0&&r[0].getScheme()===e){n.push(r)}});return[].concat.apply([],n)},_hasLazyConfiguration:function(t){return t.appData&&t.appData.sapGanttLazy===true},getNonLazyAggregations:function(t){return this._filterAggregationBy(t,function(t){return t.appData===null||!t.appData.sapGanttLazy})},getAllNonLazyAggregations:function(t){return this._filterAggregationBy(t,function(t){return t.appData===null||!t.appData.sapGanttLazy},true)},_filterAggregationBy:function(t,e,a){var n=t.getMetadata(),r;if(a){r=n.getAllAggregations()}else{r=n.getAggregations()}var i={};for(var g in r){if(r.hasOwnProperty(g)){var s=r[g];if(e(s)){i[g]=s}}}return i},_isLabelText:function(t){return t.isA("sap.gantt.simple.BaseText")&&t.getIsLabel()?true:false},_isLabelEnabled:function(){return this.oGantt&&this.oGantt.getSelectOnlyGraphicalShape()?true:false},eachNonLazyAggregation:function(t,e){var a=[],n=[];this.oGantt=t.getGanttChartBase();var r=this.getNonLazyAggregations(t);var i=Object.keys(r).sort(function(t,e){var a=r[t].appData?r[t].appData.sapGanttOrder||0:0;var n=r[e].appData?r[e].appData.sapGanttOrder||0:0;return a-n});i.forEach(function(i){var g=r[i];var s=t[g._sGetter]();if(Array.isArray(s)){s.forEach(function(t){if(this._isLabelEnabled()){if(t.getVisible()&&t.renderElement){if(this._isLabelText(t)){n.push(t)}else{a.push(t)}}}else{e(t)}}.bind(this))}else if(s){if(this._isLabelEnabled()){if(s.getVisible()&&s.renderElement){if(this._isLabelText(s)){n.push(s)}else{a.push(s)}}}else{e(s)}}}.bind(this));if(a.length>0||n.length>0){e(n,a)}}};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseCalendar", ["./BaseRectangle","./RenderUtils","./BaseShape","sap/base/Log","sap/ui/core/Core","./BaseText"],function(e,t,r,i,a,n){"use strict";var s=e.extend("sap.gantt.simple.BaseCalendar",{metadata:{library:"sap.gantt",properties:{calendarName:{type:"string"}}}});var o=["x","y","width","height","style","opacity"];s.prototype.applySettings=function(t,r){t=t||{};t.height=t.height||"inherit";e.prototype.applySettings.call(this,t,r)};s.prototype.getX=function(){if(this.getCalendarName()){return 0}else{var t=a.getConfiguration().getRTL(),r=t?this.getEndTime():this.getTime();if(r){return e.prototype.getX.apply(this,arguments)}else{i.error("Either the calendarName or the time / endTime (if application is on RTL) is required for calendar to come up")}}};s.prototype.getSelectable=function(){return false};s.prototype.getWidth=function(){if(this.getCalendarName()){return this.getGanttChartBase().iGanttRenderedWidth}else{if(this.getTime()&&this.getEndTime()){return e.prototype.getWidth.apply(this,arguments)}else{i.error("Either the calendarName or the time and endTime is required for calendar to come up")}}};s.prototype.getFill=function(){var e=this.getCalendarName();if(e){var t=this.getGanttChartBase().getCalendarDef();if(t){return t.getRefString(e)}}return this.getProperty("fill")};s.prototype.renderElement=function(e,i){if(!this._isValid()){return}e.openStart("rect",this.getId());if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){e.class(t)})}t.renderAttributes(e,i,o);e.openEnd();if(!this.getCalendarName()){t.renderTooltip(e,i)}e.close("rect");if(!this.getCalendarName()&&this.getTitle()){t.renderElementTitle(e,i,function(e){return new n(e)})}r.prototype.renderElement.apply(this,arguments)};s.prototype.isVisible=function(){if(this.getCalendarName()){return true}};return s},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseChevron", ["sap/ui/core/Core","./BaseRectangle","./BasePath","sap/gantt/library"],function(e,t,i,a){"use strict";var r=a.simple.shapes.ShapeAlignment;var n=t.extend("sap.gantt.simple.BaseChevron",{metadata:{library:"sap.gantt",properties:{headWidth:{type:"sap.gantt.SVGLength",defaultValue:10},tailWidth:{type:"sap.gantt.SVGLength",defaultValue:10},title:{type:"string",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",group:"Appearance",defaultValue:false}}}});n.prototype.getD=function(){var t=e.getConfiguration().getRTL();var i=this.getHeadWidth(),a=this.getTailWidth();var n=this.getX(),h=this.getWidth(),l=this.getHeight(),s=this.getRowYCenter(),p=1;var g=function(){var e="";for(var t=0;t<arguments.length;t++){e+=arguments[t]+" "}return e};if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==r.Top){s=this.getRowYCenter()-this._iBaseRowHeight/2+l/2+p}else if(this.getAlignShape()==r.Bottom){s=this.getRowYCenter()+this._iBaseRowHeight/2-l/2-p}s=parseInt(s,10)}if(!t){if(h-i<0){return g("M",n+h/2,s,"l",-h/2,-l/2,"h",h/2,"l",h/2,l/2,"l",-h/2,l/2,"h",-h/2)+"Z"}return g("M",n+a,s,"l",-a,-l/2,"h",h-i,"l",i,l/2,"l",-i,l/2,"h",i-h)+"Z"}else{if(h-i<0){return g("M",n,s,"l",h/2,-l/2,"h",h/2,"l",-h/2,l/2,"l",h/2,l/2,"h",-h/2)+"Z"}return g("M",n,s,"l",i,-l/2,"h",h-i,"l",-a,l/2,"l",a,l/2,"h",i-h)+"Z"}};n.prototype.renderElement=function(){if(this._isValid()){i.prototype.renderElement.apply(this,arguments)}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseConditionalShape", ["./BaseShape"],function(e){"use strict";var t=["rowYCenter","shapeUid","selected"];var a=e.extend("sap.gantt.simple.BaseConditionalShape",{metadata:{library:"sap.gantt",properties:{activeShape:{type:"int",defaultValue:0},countInBirdEye:{type:"boolean",defaultValue:false}},aggregations:{shapes:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape",sapGanttLazy:true}}}});a.prototype.renderElement=function(e,t){var a=t._getActiveShapeElement();if(a){a._iBaseRowHeight=t._iBaseRowHeight;if(a.getVisible()){a.renderElement(e,a)}}};a.prototype.setProperty=function(a,r,i){e.prototype.setProperty.apply(this,arguments);if(t.indexOf(a)>=0){this.getShapes().forEach(function(e){e.setProperty(a,r,i)})}if(a==="shapeId"){this.getShapes().forEach(function(e){var t=e.getShapeId();if(!t){e.setProperty(a,r,i)}})}return this};a.prototype.getShapeId=function(){var e=this._getActiveShapeElement(),t;if(e){t=e.getShapeId()}if(!t){t=this.getProperty("shapeId")}return t};a.prototype.getCountInBirdEye=function(){var e=this._getActiveShapeElement();if(e){return e.getCountInBirdEye()}return false};a.prototype._getActiveShapeElement=function(){var e=this.getProperty("activeShape"),t;t=this._aUnclonedShapes;if(!t){t=this.getShapes();if(e>=0&&e<t.length){return t[e]}}else if(e>=0&&e<t.length){if(this._iActiveShape===e){return this.getShapes()[0]}else{this.removeAllAggregation("shapes",true);this._iActiveShape=e;var a=t[e];var r=a.clone();this.addAggregation("shapes",r,true);var i=r.getProperty("shapeId");if(!i){r.setProperty("shapeId",this.getProperty("shapeId"),true)}return r}}return undefined};a.prototype.clone=function(){var t=arguments[0];var a=arguments[1];var r={cloneChildren:false,cloneBindings:true};var i=e.prototype.clone.call(this,t,a,r);i._aUnclonedShapes=this._aUnclonedShapes?this._aUnclonedShapes:this.getShapes();return i};a.prototype.getActiveShape=function(){if(!this._aUnclonedShapes){return this.getProperty("activeShape")}return 0};return a});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseCursor", ["sap/base/Log","./BaseRectangle","./BasePath","./RenderUtils","sap/gantt/library"],function(e,t,i,r,a){"use strict";var s=a.simple.shapes.ShapeAlignment;var n=t.extend("sap.gantt.simple.BaseCursor",{metadata:{library:"sap.gantt",properties:{length:{type:"float",defaultValue:10},width:{type:"float",defaultValue:5},pointHeight:{type:"float",defaultValue:5}}}});n.prototype.getD=function(){var t;var i=this.getPointHeight();var a=this.getWidth();var s=this.getLength();var n=s/2;var o=this._getCenter();if(this._isPropertiesValid(i,a,s,n)){t=["M ",o.join(" ")," m ",-n," ",-(a+i)/2," l ",s," 0 l 0 ",a," l -",n," ",i," l -",n," -",i," z"].join("")}if(r.isValidD(t)){return t}else{e.warning("Cursor shape generated invalid d: "+t);return null}};n.prototype._getCenter=function(){var e=t.prototype.getX.apply(this,arguments),i=this.getRowYCenter(),r=1;if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==s.Top){i=this.getRowYCenter()-this._iBaseRowHeight/2+this.getLength()/2+r}else if(this.getAlignShape()==s.Bottom){i=this.getRowYCenter()+this._iBaseRowHeight/2-this.getLength()/2-r}i=parseInt(i,10)}return[e,i]};n.prototype._isPropertiesValid=function(e,t,i,r){return jQuery.isNumeric(e)&&jQuery.isNumeric(t)&&jQuery.isNumeric(i)&&jQuery.isNumeric(r)};n.prototype.renderElement=function(){if(this._isValid()){i.prototype.renderElement.apply(this,arguments)}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseDeltaRectangle", ["./BaseShape","./RenderUtils","./GanttUtils","../misc/Format","./BaseText"],function(e,t,r,i,a){"use strict";var n=e.extend("sap.gantt.simple.BaseDeltaRectangle",{metadata:{properties:{x:{type:"sap.gantt.SVGLength"},y:{type:"sap.gantt.SVGLength"},width:{type:"sap.gantt.SVGLength"},height:{type:"sap.gantt.SVGLength"},rx:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0},ry:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0},title:{type:"string",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",group:"Appearance",defaultValue:true}},events:{press:{},mouseEnter:{},mouseLeave:{}}},renderer:{apiVersion:2}});var s=["x","y","width","height","style","rx","ry","filter","opacity","transform"];n.prototype.onmouseover=function(e){this.fireMouseEnter(e)};n.prototype.onmouseout=function(e){this.fireMouseLeave(e)};n.prototype.onclick=function(e){this.firePress(e)};n.prototype.getWidth=function(){var e=this.getProperty("width");if(e!==null&&e!==undefined){return e}var t=this.getAxisTime();if(t==null){return 0}var r,a=t.timeToView(i.abapTimestampToDate(this.getTime())),n=t.timeToView(i.abapTimestampToDate(this.getEndTime()));if(!jQuery.isNumeric(a)||!jQuery.isNumeric(n)){return 0}r=Math.abs(n-a);r=r<=0?1:r;return r};n.prototype.getStyle=function(){var t=e.prototype.getStyle.apply(this,arguments);var r={fill:this.determineValueColor(this.getFill()),"stroke-dasharray":this.getStrokeDasharray(),"fill-opacity":this.getFillOpacity(),"stroke-opacity":this.getStrokeOpacity()};return t+this.getInlineStyle(r)};n.prototype.renderElement=function(r,i){this.writeElementData(r,"rect",false);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(e){r.class(e)})}t.renderAttributes(r,i,s);r.openEnd();t.renderTooltip(r,i);r.close("rect");if(this.getShowTitle()){t.renderElementTitle(r,i,function(e){return new a(e)})}e.prototype.renderElement.apply(this,arguments)};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseDiamond", ["./BaseRectangle","./BasePath","sap/gantt/misc/Utility","sap/gantt/library"],function(t,e,i,h){"use strict";var a=h.simple.shapes.ShapeAlignment;var r=t.extend("sap.gantt.simple.BaseDiamond",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.gantt.SVGLength",defaultValue:"auto"},height:{type:"sap.gantt.SVGLength",defaultValue:"auto"}}},renderer:{apiVersion:2}});r.prototype.getD=function(){var t=this.getX(),e=this.getWidth(),i=this.getHeight(),h=this.getRowYCenter(),r=1;var s=function(){var t="";for(var e=0;e<arguments.length;e++){t+=arguments[e]+" "}return t};if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==a.Top){h=this.getRowYCenter()-this._iBaseRowHeight/2+i/2+r}else if(this.getAlignShape()==a.Bottom){h=this.getRowYCenter()+this._iBaseRowHeight/2-i/2-r}h=parseInt(h,10)}return s("M",t,h-i/2,"l",e/2,i/2,"l",-e/2,i/2,"l",-e/2,-i/2)+"Z"};r.prototype.getWidth=function(){var t=this.getProperty("width");if(t==="auto"){return parseFloat(this._iBaseRowHeight*.625,10)}if(t==="inherit"){return this._iBaseRowHeight}return t};r.prototype.renderElement=e.prototype.renderElement;r.prototype.getShapeAnchors=function(){var t=i.getShapeBias(this);return{head:{x:this.getX()-this.getWidth()/2+t.x,y:this.getY()+this.getHeight()/2+t.y,dx:this.getWidth()/2,dy:this.getHeight()/2},tail:{x:this.getX()+this.getWidth()/2+t.x,y:this.getY()+this.getHeight()/2+t.y,dx:this.getWidth()/2,dy:this.getHeight()/2}}};r.prototype.renderElement=function(){if(this._isValid()){e.prototype.renderElement.apply(this,arguments)}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseGroup", ["./BaseShape","./AggregationUtils","./RenderUtils","sap/gantt/library"],function(e,t,n,i){"use strict";var r=i.simple.shapes.ShapeAlignment;var a=e.extend("sap.gantt.simple.BaseGroup",{metadata:{library:"sap.gantt",aggregations:{shapes:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape"}}},renderer:{apiVersion:2}});var s=["filter","opacity","transform"];a.prototype.renderElement=function(t,i){this.writeElementData(t,"g",false);var a=this.getGanttChartBase();var o=0,l=1;if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(e){t.class(e)})}n.renderAttributes(t,i,s);if(i.getParent()&&i.getParent().isA("sap.gantt.simple.GanttRowSettings")){i.getParent().getParentGantt().getInnerGantt().attachEvent("_afterGanttRendered",function(){var e=document.getElementById(this.getId());if(e){if(this.getAlignShape()==r.Top){o=-((this._iBaseRowHeight-e.getBBox().height)/2)+l}else if(this.getAlignShape()==r.Bottom){o=(this._iBaseRowHeight-e.getBBox().height)/2-l}if(o){o=parseInt(o,10);e.style.transform="translate(0, "+o+"px)"}else{e.style.transform="none"}}}.bind(i))}t.openEnd();n.renderTooltip(t,i);if(a&&a.getSelectOnlyGraphicalShape()){this.renderChildElementsInGroups(t,i)}else{this.renderChildElements(t,i)}if(this.getShowAnimation()){n.renderElementAnimation(t,i)}t.close("g");e.prototype.renderElement.apply(this,arguments)};a.prototype.renderChildElements=function(e,t){this._eachChildOfGroup(t,function(n){if(n instanceof sap.gantt.simple.BaseConditionalShape&&n.getVisible()){n=n._getActiveShapeElement()}if(n&&n.renderElement&&n.getVisible()){n.setProperty("childElement",true,true);n.setProperty("rowYCenter",t.getRowYCenter(),true);n._iBaseRowHeight=t._iBaseRowHeight;n.renderElement(e,n)}})};a.prototype.renderChildElementsInGroups=function(e,t){this._eachChildOfGroup(t,function(n,i){if(i&&i.length>0){if(n&&n.length>0){e.openStart("g",this.getId()+"-nonLabelGroup");e.openEnd()}this._renderGroups(i,t,e);if(n&&n.length>0){e.close("g")}}if(n&&n.length>0){this._renderGroups(n,t,e)}}.bind(this))};a.prototype._eachChildOfGroup=function(e,n){t.eachNonLazyAggregation(e,n)};a.prototype._renderGroups=function(e,t,n){var i=e.length;for(var r=0;r<i;r++){var a=e[r];if(a instanceof sap.gantt.simple.BaseConditionalShape&&a.getVisible()){a=a._getActiveShapeElement()}if(a&&a.renderElement&&a.getVisible()){a.setProperty("childElement",true,true);a.setProperty("rowYCenter",t.getRowYCenter(),true);a._iBaseRowHeight=t._iBaseRowHeight;a.renderElement(n,a)}}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseImage", ["sap/base/Log","./BaseText","./BaseRectangle","./RenderUtils","sap/ui/core/IconPool","sap/ui/core/Core"],function(e,t,n,o,r,i){"use strict";var s=t.extend("sap.gantt.simple.BaseImage",{metadata:{library:"sap.gantt",properties:{src:{type:"sap.ui.core.URI",defaultValue:null},width:{type:"sap.gantt.SVGLength",defaultValue:20},height:{type:"sap.gantt.SVGLength",defaultValue:20}}},renderer:{apiVersion:2}});var a=["x","y","width","height","opacity"];var p={IconFont:"iconFont",Image:"bitImage"};s.prototype._needToRenderAs=function(){return r.isIconURI(this.getSrc())?p.IconFont:p.Image};s.prototype.getText=function(){if(this._needToRenderAs()===p.IconFont){var t=r.getIconInfo(this.getSrc());if(t){return t.content}}else{e.error('"getText" can not be invoked since it\'s not a icon font!',this)}};s.prototype.getFontFamily=function(){if(this._needToRenderAs()===p.IconFont){var t=r.getIconInfo(this.getSrc());if(t){return t.fontFamily}}else{e.error('"getFontFamily" can not be invoked since it\'s not a icon font!',this)}};s.prototype.getFontSize=function(){if(this._needToRenderAs()===p.IconFont){return parseFloat(this.getHeight())}else{e.error('"getFontSize" can not be invoked since it\'s not a icon font!',this)}};s.prototype.getX=function(){var e=i.getConfiguration().getRTL();if(this._needToRenderAs()===p.Image){if(e){return n.prototype.getX.apply(this)-this.getWidth()}return n.prototype.getX.apply(this)}else if(this._needToRenderAs()===p.IconFont){return t.prototype.getX.apply(this)}};s.prototype.getY=function(){if(this._needToRenderAs()===p.Image){return n.prototype.getY.apply(this)}else if(this._needToRenderAs()===p.IconFont){return t.prototype.getY.apply(this)}};s.prototype.renderElement=function(e,n){if(this._needToRenderAs()===p.Image){this.writeElementData(e,"image",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){e.class(t)})}o.renderAttributes(e,n,a);e.attr("href",this.getProperty("src"));e.openEnd();o.renderTooltip(e,n);e.close("image")}else if(this._needToRenderAs()===p.IconFont){t.prototype.renderElement.apply(this,arguments)}};return s},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseLine", ["./BaseShape","./BaseRectangle","./RenderUtils"],function(t,e,r){"use strict";var a=t.extend("sap.gantt.simple.BaseLine",{metadata:{library:"sap.gantt",properties:{x1:{type:"sap.gantt.SVGLength",defaultValue:0},y1:{type:"sap.gantt.SVGLength",defaultValue:0},x2:{type:"sap.gantt.SVGLength",defaultValue:0},y2:{type:"sap.gantt.SVGLength",defaultValue:0}}},renderer:{apiVersion:2}});a.prototype.applySettings=function(r,a){t.prototype.applySettings.apply(this,arguments);this.oDelegator=new e({},a)};var n=["x1","y1","x2","y2","stroke","stroke-width","transform","style","opacity"];a.prototype.getX1=function(){var t=this.getProperty("x1");if(t||t===0){return t}return this.oDelegator.getX()};a.prototype.getY1=function(){var t=this.getProperty("y1");if(t||t===0){return t}return this.oDelegator.getRowYCenter()};a.prototype.getX2=function(){var t=this.getProperty("x2");if(t||t===0){return t}var e=this.oDelegator.getWidth();return this.getX1()+e};a.prototype.getY2=function(){var t=this.getProperty("y2");if(t||t===0){return t}return this.getY1()};a.prototype.getStyle=function(){var e=t.prototype.getStyle.apply(this,arguments);var r={"stroke-dasharray":this.getStrokeDasharray(),"fill-opacity":this.getFillOpacity(),"stroke-opacity":this.getStrokeOpacity()};return e+this.getInlineStyle(r)};a.prototype.renderElement=function(e,a){this.writeElementData(e,"line",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){e.class(t)})}r.renderAttributes(e,a,n);e.openEnd();r.renderTooltip(e,a);if(this.getShowAnimation()){r.renderElementAnimation(e,a)}e.close("line");t.prototype.renderElement.apply(this,arguments)};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BasePath", ["./BaseShape","./RenderUtils","./BaseText"],function(e,t,r){"use strict";var n=e.extend("sap.gantt.simple.BasePath",{metadata:{library:"sap.gantt",properties:{d:{type:"string"}}},renderer:{apiVersion:2}});var a=["d","fill","stroke-dasharray","transform","style","opacity"];n.prototype.renderElement=function(e,n){this.writeElementData(e,"path",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){e.class(t)})}t.renderAttributes(e,n,a);e.attr("shape-rendering","crispedges");e.openEnd();t.renderTooltip(e,n);if(this.getShowAnimation()){t.renderElementAnimation(e,n)}e.close("path");t.renderElementTitle(e,n,function(e){return new r(e)})};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseRectangle", ["./BaseShape","./RenderUtils","./GanttUtils","../misc/Format","../misc/Utility","../library","./BaseText"],function(t,e,i,r,a,n,s){"use strict";var h=n.simple.shapes.ShapeAlignment;var o=t.extend("sap.gantt.simple.BaseRectangle",{metadata:{library:"sap.gantt",properties:{x:{type:"sap.gantt.SVGLength"},y:{type:"sap.gantt.SVGLength"},width:{type:"sap.gantt.SVGLength"},height:{type:"sap.gantt.SVGLength",defaultValue:"auto"},rx:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0},ry:{type:"sap.gantt.SVGLength",group:"Appearance",defaultValue:0}}},renderer:{apiVersion:2}});var p=["x","y","width","height","style","rx","ry","filter","opacity","transform"];o.prototype.getX=function(){return i.getValueX(this)};o.prototype.getY=function(){var t=this.getProperty("y"),e=1;if(t===null||t===undefined){var i=Number(this.getHeight());t=this.getRowYCenter()-i/2;if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==h.Top){t=this.getRowYCenter()-this._iBaseRowHeight/2+e}else if(this.getAlignShape()==h.Bottom){t=this.getRowYCenter()+this._iBaseRowHeight/2-i-e}t=parseInt(t,10)}}return t};o.prototype.getWidth=function(){var t=this.getProperty("width");if(t!==null&&t!==undefined){return t}var e=this.getAxisTime();if(e==null){return 0}var i,a=e.timeToView(r.abapTimestampToDate(this.getTime())),n=e.timeToView(r.abapTimestampToDate(this.getEndTime()));if(!jQuery.isNumeric(a)||!jQuery.isNumeric(n)){return 0}i=Math.abs(n-a);i=i<1?1:i;return i};o.prototype.getHeight=function(){var t=this.getProperty("height");if(t==="auto"){return parseFloat(this._iBaseRowHeight*.625,10)}if(t==="inherit"){return this._iBaseRowHeight}return t};o.prototype.getStyle=function(){var e=t.prototype.getStyle.apply(this,arguments);var i={fill:this.determineValueColor(this.getFill()),"stroke-dasharray":this.getStrokeDasharray(),"fill-opacity":this.getFillOpacity(),"stroke-opacity":this.getStrokeOpacity()};return e+this.getInlineStyle(i)};o.prototype._isValid=function(){var t=this.getX();return t!==undefined&&t!==null};o.prototype.renderElement=function(i,r){if(!this._isValid()){return}this.writeElementData(i,"rect",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(t){i.class(t)})}e.renderAttributes(i,r,p);i.openEnd();e.renderTooltip(i,r);if(this.getShowAnimation()){e.renderElementAnimation(i,r)}i.close("rect");if(!r.isA("sap.gantt.simple.BaseCalendar")&&this.getShowTitle()){e.renderElementTitle(i,r,function(t){return new s(t)})}t.prototype.renderElement.apply(this,arguments)};o.prototype.getShapeAnchors=function(){var t=a.getShapeBias(this);return{head:{x:this.getX()+t.x,y:this.getY()+this.getHeight()/2+t.y,dx:0,dy:this.getHeight()/2},tail:{x:this.getX()+this.getWidth()+t.x,y:this.getY()+this.getHeight()/2+t.y,dx:0,dy:this.getHeight()/2}}};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseShape", ["sap/base/Log","sap/ui/Device","sap/ui/core/Core","sap/gantt/library","sap/ui/core/Element","sap/ui/core/CustomStyleClassSupport","sap/ui/base/ManagedObjectMetadata","./GanttUtils","./CoordinateUtils","./AggregationUtils","../misc/Format"],function(e,t,i,a,r,n,s,o,l,p,h){"use strict";var u=a.simple.verticalTextAlignment;var g=a.simple.horizontalTextAlignment;var f=a.simple.shapes.ShapeAlignment;var d=r.extend("sap.gantt.simple.BaseShape",{metadata:{library:"sap.gantt",abstract:true,properties:{shapeId:{type:"string"},time:{type:"object"},endTime:{type:"object"},scheme:{type:"string",defaultValue:null},xBias:{type:"float",defaultValue:0},yBias:{type:"float",defaultValue:0},fill:{type:"sap.gantt.ValueSVGPaintServer"},strokeOpacity:{type:"float",defaultValue:1},fillOpacity:{type:"float",defaultValue:1},opacity:{type:"float",defaultValue:1},stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"float",defaultValue:0},strokeDasharray:{type:"string"},transform:{type:"string"},filter:{type:"string"},expandable:{type:"boolean",defaultValue:false},selectable:{type:"boolean",defaultValue:false},selected:{type:"boolean",defaultValue:false},draggable:{type:"boolean",defaultValue:false},resizable:{type:"boolean",defaultValue:false},hoverable:{type:"boolean",defaultValue:false},connectable:{type:"boolean",defaultValue:false},rowYCenter:{type:"float"},countInBirdEye:{type:"boolean",defaultValue:false},childElement:{type:"boolean",defaultValue:false,visibility:"hidden"},shapeUid:{type:"string",visibility:"hidden"},visible:{type:"boolean",defaultValue:true},title:{type:"string",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",group:"Appearance",defaultValue:true},enableChainSelection:{type:"boolean",defaultValue:false},selectableInChainSelection:{type:"boolean",defaultValue:true},verticalTextAlignment:{type:"sap.gantt.simple.verticalTextAlignment",defaultValue:u.Center},horizontalTextAlignment:{type:"sap.gantt.simple.horizontalTextAlignment",defaultValue:g.Start},animationSettings:{type:"object",defaultValue:null},showAnimation:{type:"boolean",defaultValue:false},titleColor:{type:"sap.gantt.ValueSVGPaintServer"},fontSize:{type:"int",defaultValue:13},fontWeight:{type:"string",defaultValue:"normal"},alignShape:{type:"sap.gantt.simple.shapes.ShapeAlignment",defaultValue:f.Middle},fontFamily:{type:"string",defaultValue:"Arial"},titleSpacing:{type:"int",defaultValue:0},selectedFill:{type:"sap.gantt.ValueSVGPaintServer"},selectedTitleColor:{type:"sap.gantt.ValueSVGPaintServer"},highlightable:{type:"boolean",defaultValue:false},highlighted:{type:"boolean",defaultValue:false},dragHighlightRows:{type:"string[]",defaultValue:[]}}},renderer:{apiVersion:2}});var c={values:null,duration:"1s",repeatCount:"indefinite"};n.apply(d.prototype);d.prototype.init=function(){this.bPreventSingleClick=false;this._level=null};var y={};i.attachThemeChanged(function(){y={}});var m=/translate\((-?\d{1,}),?\s?(-?\d{1,})?\)/gi;d.prototype.setShapeUid=function(t){e.error('The control manages the shapeUid generation. The method "setShapeUid" cannot be used programmatically!',this)};d.prototype.getTransform=function(){var e=this.getProperty("transform");if(e){return e}return this._buildTransformByXYBias()};d.prototype.setTransform=function(e){this.setProperty("transform",e);this._updateBiasFromTransform(e);return this};d.prototype._buildTransformByXYBias=function(){var e=this.getXBias(),t=this.getYBias();if(e||t){e=e?e:0;e=i.getConfiguration().getRTL()?-e:e;t=t?t:0;return"translate("+e+" "+t+")"}return null};d.prototype._updateBiasFromTransform=function(e){if(e!=null){var t=this._parseBias(e);if(t.length>0){var i=t[0]||0,a=t[1]||0;this.setProperty("xBias",i,true);this.setProperty("yBias",a,true)}}};d.prototype._parseBias=function(e){var t=m.exec(e);var i=[];if(t&&t.length>0){t.forEach(function(e,t){if(t!==0&&e){i.push(parseFloat(e))}})}return i};d.prototype.getStyle=function(){var e={stroke:this.determineValueColor(this.getStroke()),"stroke-width":this.getStrokeWidth()};var t=this.getSelectable()||this.getHoverable()||this.getTooltip()!==null;if(this.getProperty("childElement")===false&&t===false){e["pointer-events"]="none"}return this.getInlineStyle(e)};d.prototype.getXByTime=function(t){var i=this.getAxisTime();var a=i.timeToView(h.abapTimestampToDate(t));if(!jQuery.isNumeric(a)){e.warning("Cannot convert time:"+t+" to an valid coordinate. Invalid coordinate might not get rendered at all, check the property value!");return 0}return a};d.prototype.getAxisTime=function(){if(this.mAxisTime){return this.mAxisTime}else{var e=this.getGanttChartBase();return e?e.getAxisTime():null}};d.prototype.getGanttChartBase=function(){var e=this.getParentRowSettings();return e?e.getParentGantt():null};d.prototype.getParentRowSettings=function(){return p.getParentControlOf("sap.gantt.simple.GanttRowSettings",this)};d.prototype.getInlineStyle=function(e){return Object.keys(e).reduce(function(t,i){if(e[i]!==undefined&&e[i]!==null&&e[i]!==""){t+=i+":"+e[i]+"; "}return t},"")};d.prototype.determineValueColor=function(e){var t=y[e];if(!t&&e){t=a.ValueSVGPaintServer.normalize(e);y[e]=t}return t};d.prototype.destroy=function(){return r.prototype.destroy.apply(this,["KeepDom"])};d.prototype.isVisible=function(){return false};d.prototype.renderElement=function(e,t){};d.prototype.writeElementData=function(e,t,i){if(this.getProperty("childElement")){var a=s.isGeneratedId(this.getId());if(!a){e.openStart(t,this.getId())}else{e.openStart(t)}if(i){e.class("baseShapeSelection")}return}if(this._shallWriteElementData(this)){e.openStart(t,this);if(this.getShapeId()){e.attr(o.SHAPE_ID_DATASET_KEY,this.getShapeId())}if(this.getConnectable()){e.attr(o.CONNECTABLE_DATASET_KEY,this.getConnectable())}}else{e.openStart(t)}if(i){e.class("baseShapeSelection")}};d.prototype._shallWriteElementData=function(e){var t=!e.getParent();if(t===false){t=p.isParentRowSetting(e)}if(t===false){t=p.isAdhocLine(e)}if(t===false){t=p.isDeltaLine(e)}if(t===false){t=p.isLazyAggregation(e)}return t};d.prototype.ensureGanttChart=function(){if(!this.mChartInstance){this.mChartInstance=this.getGanttChartBase()}};d.prototype.setSelected=function(e,t){var i=this.getSelected();this.setProperty("selected",e,t);var a=this.getGanttChartBase(),r=this.getShapeUid();if(i!==e&&a&&r){a.getSelection().updateShape(r,{selected:e,ctrl:false,draggable:this.getDraggable(),time:this.getTime(),endTime:this.getEndTime()})}return this};d.prototype.setHighlighted=function(e,t){var i=this.getHighlighted();this.setProperty("highlighted",e,t);var a=this.getGanttChartBase(),r=this.getShapeUid();if(i!==e&&a&&r){a.getHighlight().updateShape(r,{highlighted:e,time:this.getTime(),endTime:this.getEndTime()})}return this};d.prototype.onclick=function(e){var t=function(){var t;if(this.bPreventSingleClick===false){t=this.getGanttChartBase();o.resetStrokeDasharray(t);if(!t.fireShapePress({popoverOffsetX:this._getPopoverOffsetX(e),rowSettings:this.getParentRowSettings(),shape:this,ctrlOrMeta:e.ctrlKey||e.metaKey})){return}if(!this.getEnableChainSelection()){t.handleShapePress({shape:this,ctrlOrMeta:e.ctrlKey||e.metaKey})}e.setMarked()}this.bPreventSingleClick=false}.bind(this);if(!this.getSelectable()){return}if(this._isDoubleClickEventDisabled()){t();return}this.iSingleClickTimer=window.setTimeout(t.bind(this),300)};d.prototype.ondblclick=function(e){if(this._isDoubleClickEventDisabled()){return}window.clearTimeout(this.iSingleClickTimer);this.bPreventSingleClick=true;this.getGanttChartBase().fireShapeDoubleClick({popoverOffsetX:this._getPopoverOffsetX(e),rowSettings:this.getParentRowSettings(),shape:this});e.stopImmediatePropagation()};d.prototype.oncontextmenu=function(e){e.preventDefault();e.stopImmediatePropagation();var t=l.getLatestCursorPosition();this.getGanttChartBase().fireShapeContextMenu({pageX:t.pageX,pageY:t.pageY,popoverOffsetX:this._getPopoverOffsetX(e),rowSettings:this.getParentRowSettings(),shape:this})};d.prototype.onmouseout=function(e){if(this.getHoverable()===false){return}if(this.isA("sap.gantt.simple.Relationship")&&this.bRelationshipMouseEnter){e.currentTarget.style["stroke-width"]=this.getStrokeWidth()||1;this.bRelationshipMouseEnter=false}var t=this.getGanttChartBase();this.iMouseOutTimer=window.setTimeout(function(){if(this.bShapeMouseEnterFired){this.getGanttChartBase().fireShapeMouseLeave({shape:this});t.handleShapeMouseLeave({shape:this});this.bShapeMouseEnterFired=false}window.clearTimeout(this.iMouseOutTimer)}.bind(this),500)};d.prototype.onmouseover=function(e){if(this.getHoverable()===false){return}if(this.isA("sap.gantt.simple.Relationship")&&!this.bRelationshipMouseEnter){e.currentTarget.style["stroke-width"]=this.getSelectedStrokeWidth();this.bRelationshipMouseEnter=true}var t=this.getGanttChartBase();this.iMouseOverTimer=window.setTimeout(function(){var e=l.getCursorElement();if(e===this){var i=l.getLatestCursorPosition();this.getGanttChartBase().fireShapeMouseEnter({shape:this,pageX:i.pageX,pageY:i.pageY});this.bShapeMouseEnterFired=true;t.handleShapeMouseEnter({shape:this})}window.clearTimeout(this.iMouseOverTimer)}.bind(this),500)};d.prototype.getShapeUid=function(){return this.getProperty("shapeUid")};d.prototype._getPopoverOffsetX=function(e){if(this.getTime()){var i=this.getDomRef().getBoundingClientRect().width;var a=typeof this.getX==="function"?this.getX():o.getValueX(this);var r=this.getEndTime()?this.getEndTime().getTime():this.getAxisTime().viewToTime(a+i).getTime();var n=new Date((this.getTime().getTime()+r)/2);var s=t.browser.mozilla?e.originalEvent.layerX:e.offsetX;var l=Math.round(s-this.getAxisTime().timeToView(n));return Math.abs(l)>i?0:l}};d.prototype._isDoubleClickEventDisabled=function(){var e=this.getGanttChartBase();return e&&e.getDisableShapeDoubleClickEvent()};d.prototype.getAnimationProperties=function(e){if(!this.mAnimationProperties){if(jQuery.isEmptyObject(e)||!e.values){return false}var t=jQuery.extend(true,{},c);for(var i in t){if(e[i]){t[i]=e[i]}}this.mAnimationProperties=t}return this.mAnimationProperties};return d},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/BaseText", ["sap/ui/core/Core","./BaseShape","./GanttUtils","sap/ui/Device","sap/ui/core/theming/Parameters","../library","./RenderUtils"],function(t,e,i,r,a,s,n){"use strict";var o=s.simple.shapes.ShapeAlignment;var l=e.extend("sap.gantt.simple.BaseText",{metadata:{library:"sap.gantt",properties:{text:{type:"string"},x:{type:"float"},y:{type:"float"},fontSize:{type:"int",defaultValue:13},textAnchor:{type:"string",defaultValue:"start"},fontFamily:{type:"string",defaultValue:"Arial"},truncateWidth:{type:"float"},showEllipsis:{type:"boolean",defaultValue:true},isLabel:{type:"boolean",defaultValue:false},_shapeCropped:{type:"boolean",defaultValue:false},_xBiassed:{type:"float"}}},renderer:{apiVersion:2}});var h=["x","y","text-anchor","style","filter","transform","opacity"];l.prototype.getX=function(){var t=i.getValueX(this);if(isNaN(t)&&this.getParent()&&this.getParent().getTime){t=i.getValueX(this.getParent())}return t};l.prototype.getY=function(){var t=this.getProperty("y"),e=1;if(t!==null&&t!==undefined){return t}var i=this.getFontSize();var r=this.getRowYCenter()+i/2;if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==o.Top){r=this.getRowYCenter()-this._iBaseRowHeight/2+i}else if(this.getAlignShape()==o.Bottom){r=this.getRowYCenter()+this._iBaseRowHeight/2-e}r=parseInt(r,10)}return r};l.prototype.getStyle=function(){var t=e.prototype.getStyle.apply(this,arguments);var i=this.getTitleColor()?this.getTitleColor():this.getFill()||a.get("sapUiBaseText");var r={"font-size":this.getFontSize()+"px",fill:this.determineValueColor(i),"font-family":this.getFontFamily(),"font-weight":this.getFontWeight()};return t+this.getInlineStyle(r)};l.prototype.renderElement=function(t,e){this.writeElementData(t,"text",true);if(this.aCustomStyleClasses){this.aCustomStyleClasses.forEach(function(e){t.class(e)})}n.renderAttributes(t,e,h);var i=e.getGanttChartBase();if(i&&i.getSelectOnlyGraphicalShape()&&e.getIsLabel()){t.class("sapGanttTextNoPointerEvents")}t.openEnd();n.renderTooltip(t,e);if(this.getShowAnimation()){n.renderElementAnimation(t,e)}this.writeTruncatedText(t,e);t.close("text")};l.prototype.writeTruncatedText=function(t,e){var i=e.getText(),r=this.getTruncateWidth()!=null;if(r){var a=this._truncateText(i);this.renderEllipsisIfNecessary(t,a)}else{t.text(i)}};l.prototype.getTruncateWidth=function(){var e=this.getProperty("truncateWidth");var i=this.getParent();if(i&&i.isA("sap.gantt.simple.BaseShape")){var r=0;if(i.getWidth){r=i.getWidth()}else if(i.getEndTime()&&i.getTime()){r=Math.abs(this.getXByTime(i.getEndTime())-this.getXByTime(i.getTime()))}else{r=e}if(r<e){return r}}if(this.getTextAnchor().toLowerCase()===s.simple.horizontalTextAlignment.Dynamic.toLowerCase()&&this.getProperty("_shapeCropped")){e=t.getConfiguration().getRTL()?e+this.getProperty("_xBiassed"):e-this.getProperty("_xBiassed")}return e};l.prototype.renderEllipsisIfNecessary=function(t,e){if(e.ellipsis){t.text(e.truncatedText+"...")}else{t.text(e.truncatedText)}};l.prototype._truncateText=function(t){var e=this._processTextForTruncation(t);e=e||{ellipsis:false,truncatedText:t};return e};l.prototype._processTextForTruncation=function(e){var i=this.getTruncateWidth(),r=this.measureTextWidth("..."),a=this.measureTextWidth(e);if(a>i){var s,n;if(this.getShowEllipsis()&&r<i){n=true;s=i-r}else{n=false;s=i}var o;var l=this._geNumberOfTruncatedCharacters(a,s,e);if(t.getConfiguration().getRTL()){var h=e.length-l;o=e.slice(h,e.length).trim()}else{o=e.slice(0,l).trim()}return{ellipsis:n,truncatedText:o}}return null};l.prototype.getTextAnchor=function(){var t=this.getProperty("textAnchor");return t};l.prototype._geNumberOfTruncatedCharacters=function(t,e,i){var r=0;if(t>e){if(e>0&&i.length>0){r=Math.round(e/Math.ceil(t/i.length));while(true){if(r<0){break}var a=this.measureTextWidth(i.slice(0,r));var s=this.measureTextWidth(i.slice(0,r+1));if(a>e){r--;continue}if(s<e){r++;continue}break}}}else{return i?i.length:0}return r>=0&&r<=i.length?r:0};l.prototype.measureTextWidth=function(t){return i.getShapeTextWidth(t,this.getFontSize(),this.getFontFamily(),this.getFontWeight())};return l},true);
sap.ui.predefine("sap/gantt/simple/BaseTriangle", ["./BaseRectangle","./BasePath","sap/gantt/library"],function(t,e,i){"use strict";var r=i.simple.shapes.ShapeAlignment;var n=t.extend("sap.gantt.simple.BaseTriangle",{metadata:{properties:{stroke:{type:"sap.gantt.ValueSVGPaintServer"},strokeWidth:{type:"float",defaultValue:1},strokeDasharray:{type:"string"},width:{type:"sap.gantt.SVGLength",defaultValue:0},height:{type:"sap.gantt.SVGLength",defaultValue:0},orientation:{type:"string",defaultValue:"right"}},events:{press:{},mouseEnter:{},mouseLeave:{}}},renderer:{apiVersion:2}});n.prototype._isValid=function(){var t=this.getX();return t!==undefined&&t!==null};n.prototype.onmouseover=function(t){this.fireMouseEnter(t)};n.prototype.onmouseout=function(t){this.fireMouseLeave(t)};n.prototype.onclick=function(t){var i=t.target.getAttribute("class").split(" ");if(i.indexOf("sapGanntChartMarkerCursorPointer")>-1){this.firePress(t)}else{e.prototype.onclick.apply(this,arguments)}};n.prototype.getD=function(){var t=this.getX(),e=this.getWidth(),i=this.getHeight(),n=this.getRowYCenter(),o=this.getOrientation(),s="",a=1;var p=function(){var t="";for(var e=0;e<arguments.length;e++){t+=arguments[e]+" "}return t};if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==r.Top){n=parseInt(this.getRowYCenter()-this._iBaseRowHeight/2+a,10)}else if(this.getAlignShape()==r.Bottom){n=parseInt(this.getRowYCenter()+this._iBaseRowHeight/2-i-a,10)}else if(this.getAlignShape()==r.Middle){n=this.getRowYCenter()-i/2}}if(o==="left"){s=p("M",t+1,n,"l",-e,i/2,"l",e,i/2)+"Z"}else if(o==="top"){s=p("M",t-1,n,"l",e/2,i,"l",-e,0)+"Z"}else if(o==="bottom"){s=p("M",t-1,n,"l",e,0,"l",-e/2,i)+"Z"}else{s=p("M",t-1,n,"l",e,i/2,"l",-e,i/2)+"Z"}return s};n.prototype.getWidth=function(){var t=this.getProperty("width");if(t==="auto"){return parseFloat(this._iBaseRowHeight*.625,10)}if(t==="inherit"){return this._iBaseRowHeight}return t};n.prototype.getOrientation=function(){var t=this.getProperty("orientation");return t};n.prototype.renderElement=e.prototype.renderElement;n.prototype.renderElement=function(){if(this._isValid()){e.prototype.renderElement.apply(this,arguments)}};return n},true);
sap.ui.predefine("sap/gantt/simple/ContainerToolbar", ["sap/ui/core/Core","sap/gantt/library","sap/ui/base/ManagedObjectObserver","sap/ui/core/Item","sap/ui/base/Object","sap/base/Log","sap/m/library","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/ToolbarSpacer","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/Select","sap/m/ViewSettingsDialog","sap/m/ViewSettingsCustomTab","sap/m/CheckBox","sap/m/Slider","sap/m/Popover","../control/AssociateContainer","sap/ui/fl/variants/VariantManagement","sap/ui/fl/apply/api/ControlVariantApplyAPI","./GanttSearchSidePanel","./FindAndSelectUtils","sap/ui/core/InvisibleText"],function(t,e,i,o,n,s,a,r,h,l,g,p,d,u,c,_,m,f,S,T,y,B,I,b,C,x){"use strict";var v=e.simple.GanttChartWithTableDisplayType,P=e.simple.ContainerToolbarPlaceholderType,E=a.OverflowToolbarPriority,L=a.FlexDirection,O=a.ButtonType,Z=a.PlacementType;var w=r.extend("sap.gantt.simple.ContainerToolbar",{metadata:{library:"sap.gantt",properties:{showBirdEyeButton:{type:"boolean",defaultValue:false},showDisplayTypeButton:{type:"boolean",defaultValue:false},showLegendButton:{type:"boolean",defaultValue:false},showSettingButton:{type:"boolean",defaultValue:true},showTimeZoomControl:{type:"boolean",defaultValue:true},zoomControlType:{type:"sap.gantt.config.ZoomControlType",defaultValue:e.config.ZoomControlType.SliderWithButtons},stepCountOfSlider:{type:"int",defaultValue:10},infoOfSelectItems:{type:"object[]",defaultValue:[]},zoomLevel:{type:"int",defaultValue:0},alignCustomContentToRight:{type:"boolean",defaultValue:false},showSearchButton:{type:"boolean",defaultValue:false},findMode:{type:"sap.gantt.config.FindMode",defaultValue:e.config.FindMode.Both}},aggregations:{settingItems:{type:"sap.gantt.config.SettingItem",multiple:true},legendContainer:{type:"sap.ui.core.Control",multiple:false,visibility:"public"}},events:{zoomStopChange:{parameters:{index:{type:"int"},selectedItem:{type:"sap.ui.core.Item"}}},birdEyeButtonPress:{},displayTypeChange:{parameters:{displayType:{type:"sap.gantt.simple.GanttChartWithTableDisplayType"}}},ganttSidePanel:{parameters:{updateSidePanelState:{type:"object"}}},findButtonPress:{},closeFindButtonPress:{},findPopupButtonPress:{},closeSidePanelButtonPress:{}}}});w.prototype.init=function(){r.prototype.init.apply(this,arguments);this.mSettingsConfig={};this._oRb=t.getLibraryResourceBundle("sap.gantt");this.oObserver=new i(this.observeChanges.bind(this));this.oObserver.observe(this,{properties:["showBirdEyeButton","showLegendButton","showTimeZoomControl","showSettingButton","zoomControlType","infoOfSelectItems","showDisplayTypeButton","alignCustomContentToRight","showSearchButton","findMode"],aggregations:["content"]});this.bShallUpdateContent=true;this.bZoomControlTypeChanged=false;this.bContentAlignChanged=false;this._bSuppressZoomStopChange=false;this.oToolbarSpacer=new l(this.getId()+"-toolbarSpacer")};w.prototype.observeChanges=function(t){if(!this.bShallUpdateContent){this.bShallUpdateContent=true;this.bZoomControlTypeChanged=t.name==="zoomControlType";this.bContentAlignChanged=t.name==="alignCustomContentToRight"}};w.prototype.exit=function(){this.oObserver.disconnect();this._destroyIfExists([this._oDisplayTypeSegmentedButton,this._oBirdEyeButton,this._oSelect,this._oTimeZoomFlexBox,this._oSettingsDialog,this._oSettingsButton,this._oLegendPop,this._oLegendButton,this._oVariantManagement,this._searchFlexBox,this._oSearchButton,this._oZoomSlider,this._oZoomInButton,this._oZoomOutButton]);r.prototype.exit.apply(this,arguments)};w.prototype.applySettings=function(t,i){t=t||{};if(!t.settingItems){t.settingItems=e.config.DEFAULT_TOOLBAR_SETTING_ITEMS.map(function(t){return t.clone()})}r.prototype.applySettings.apply(this,arguments);this._createControlsOnly();return this};w.prototype._isParentGanttContainer=function(){var t=this.getParent();if(t&&t.isA("sap.gantt.simple.GanttChartContainer")){return true}return false};w.prototype.onBeforeRendering=function(){if(this.bShallUpdateContent===true){this.updateToolbarContents();this.bShallUpdateContent=false;this.bZoomControlTypeChanged=false;this.bContentAlignChanged=false}};w.prototype.updateToolbarContents=function(){var t=this.getContent(),e={},i=0;var o=function(t){return this.getContent().indexOf(t)===-1}.bind(this);var a=function(t,e,i){if(!t._getControl()){t._setControl(i)}t.setProperty("_show",e)};var r=function(t,n,s){var r=e[t],h=o(s);if(r){a(r,n,s)}else if(n){i++}if(!h&&(r||!n)){this.removeContent(s)}else if(!r&&n&&h){if(t===P.VariantManagement){this.insertContent(s,0);var l=function(){var t=this.getParent();t.updateAxisTimeSettings();t.fireVariantApplied()};I.attachVariantApplied({selector:this.getParent(),vmControlId:this._oVariantManagement.getId(),callAfterInitialVariant:true,callback:l.bind(this)})}else if(t===P.Spacer){this.insertContent(s,this.getAlignCustomContentToRight()?0:this.getContent().length-i+1)}else{this.addContent(s)}}}.bind(this);t.forEach(function(t){var i;if(n.isA(t,"sap.gantt.simple.ContainerToolbarPlaceholder")){i=t.getType();if(e[i]){s.warning("There are more than one sap.gantt.simple.ContainerToolbarPlaceholder of the "+i+" type.")}e[i]=t}});if(this.bContentAlignChanged){this.removeContent(this.oToolbarSpacer)}r(P.SearchButton,this.getShowSearchButton(),this._genSearch());r(P.BirdEyeButton,this.getShowBirdEyeButton(),this._genBirdEyeButton());r(P.TimeZoomControl,this.getShowTimeZoomControl(),this._genTimeZoomFlexBox());r(P.LegendButton,this.getShowLegendButton(),this._genLegend());r(P.SettingButton,this.getShowSettingButton(),this._genSettings());r(P.DisplayTypeButton,this.getShowDisplayTypeButton(),this._genDisplayTypeButton());r(P.Spacer,true,this.oToolbarSpacer);r(P.VariantManagement,this._isParentGanttContainer()&&this.getParent().getEnableVariantManagement(),this._genVariantManagement())};w.prototype._createControlsOnly=function(){this._genBirdEyeButton();this._genTimeZoomGroupControls();this._genLegend();this._genSettings();this._genDisplayTypeButton();this._genSearch()};w.prototype._destroyIfExists=function(t){t.forEach(function(t){if(t){t.destroy()}})};w.prototype._genSearch=function(){C._ganttSearchResults=[];C._searchResultsCount=0;C.previousGanttID=0;C._selectedIndex=0;if(!this._searchFlexBox){this._searchFlexBox=new sap.m.FlexBox(this.getId()+"-findAndSelectFlexBox",{alignItems:"Center",justifyContent:"SpaceBetween",items:[new sap.m.SearchField(this.getId()+"-findAndSelectSearchField",{placeholder:this._oRb.getText("GNT_FIND_PLACEHOLDER"),search:function(t){if(t.getParameter("clearButtonPressed")){C.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),C.previousGanttID);C._ganttSearchResults=[];C._searchResultsCount=0;C._selectedIndex=0;this._searchFlexBox.getItems()[2].setText(this._oRb.getText("GNT_EMPTY_RESULT_INFO_TOOLBAR"));C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}else{var e=this._searchFlexBox.getItems()[0].getValue();C.triggerSearchEvent(e,this.getParent().getGanttCharts(),false,this)}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectNavigateBackward",{icon:"sap-icon://nav-back",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_PREVIOUS"),press:function(){if(C._selectedIndex>0){C._selectedIndex--;this._searchFlexBox.getItems()[2].setText("("+(C._selectedIndex+1)+"/"+C._searchResultsCount+")");C.navigateToSearchResult(this.getParent().getGanttCharts(),this);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}}.bind(this)}),new sap.m.Text(this.getId()+"-findAndSelectResultText",{text:this._oRb.getText("GNT_EMPTY_RESULT_INFO_TOOLBAR")}),new sap.m.Button(this.getId()+"-findAndSelectNavigateForward",{icon:"sap-icon://navigation-right-arrow",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_NEXT"),press:function(){if(C._searchResultsCount-1>C._selectedIndex){C._selectedIndex++;this._searchFlexBox.getItems()[2].setText("("+(C._selectedIndex+1)+"/"+C._searchResultsCount+")");C.navigateToSearchResult(this.getParent().getGanttCharts(),this);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectNavigateSidePanel",{icon:"sap-icon://list",type:"Transparent",tooltip:this._oRb.getText("GNT_SEARCH_SIDE_PANEL"),press:function(){if(!this.getParent().getShowSearchSidePanel()){this._openSidePanel()}}.bind(this)}),new sap.m.Button(this.getId()+"-findAndSelectClose",{text:this._oRb.getText("GNT_FIND_CLOSE"),type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_CLOSE"),press:function(){this.fireCloseFindButtonPress();C.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),C.previousGanttID);C.updateToolbarItems(this,false);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}.bind(this)}),new sap.m.ToolbarSeparator(this.getId()+"-findAndSelectSeparator",{})]})}if(this._oSearchButton){return this._oSearchButton}this._oSearchButton=new p(this.getId()+"-findAndSelectSearchButton",{icon:"sap-icon://sys-find",type:O.Transparent,text:this._oRb.getText("GNT_FIND"),tooltip:this._oRb.getText("GNT_FIND"),ariaDescribedBy:this.getId()+"-findAndSelectSearchButton",layoutData:new h({priority:E.High}),press:function(){if(this.getParent().getShowSearchSidePanel()){var i=this.getParent().getSearchSidePanel()._oSearchSidePanel.getItems()[1].getContent()[0];var o=i.getValue().length;var n=i.getDomRef().getElementsByTagName("input")[0];i.focus();n.setSelectionRange(0,o)}else{this.fireFindButtonPress();var s=e.config.FindMode;var a=this.getFindMode();if(a===s.Toolbar||a===s.Both){C.updateToolbarItems(this,true);t.byId(this.getId()+"-findAndSelectNavigateSidePanel").setVisible(a===s.Both);C.toggleNavigationState(this._searchFlexBox.getItems()[1],this._searchFlexBox.getItems()[3])}else if(a===s.SidePanel){var r=this.getAllToolbarItems(),h=false,l=-1;r.forEach(function(t,e){if(t.isA("sap.m.ToolbarSpacer")){l=e}if(t.getId().includes("findAndSelectFlexBox")){h=true}});if(!h){if(l>-1){this.insertContent(this._searchFlexBox,l+1)}else{this.insertContent(this._searchFlexBox,1)}}this._openSidePanel()}}}.bind(this)});return this._oSearchButton};w.prototype._openSidePanel=function(){this._sidePanelPromise=new Promise(function(t,e){this._resolveSidePanel=t;this._rejectSidePanel=e}.bind(this));this.fireGanttSidePanel({updateSidePanelState:{enable:this._resolveSidePanel,disable:this._rejectSidePanel}});this._sidePanelPromise.then(function(){var t=this.getAllToolbarItems();this.getParent().setShowSearchSidePanel(true);if(!this._searchSidePanel){this._searchSidePanel=new b;this.getParent().setSearchSidePanel(this._searchSidePanel)}t.forEach(function(t){if(t.getId().includes("findAndSelectFlexBox")){t.setVisible(false)}else if(t.getId().includes("findAndSelectSearchButton")){t.setVisible(true)}})}.bind(this))};w.prototype._genVariantManagement=function(){if(this._oVariantManagement==null){this._oVariantManagement=new B({id:this.getId()+"-variantManagement",for:[this.getParent()],executeOnSelectionForStandardDefault:true}).addStyleClass("sapUiCompVarMngmt").addStyleClass("sapMBarChild").addStyleClass("sapUiCompSmartTableToolbarContent")}return this._oVariantManagement};w.prototype._genDisplayTypeButton=function(){if(this._oDisplayTypeSegmentedButton){return this._oDisplayTypeSegmentedButton}this._oDisplayTypeSegmentedButton=new d(this.getId()+"-displayTypeSegmentedButton",{selectedKey:v.Both,selectionChange:function(t){this.fireDisplayTypeChange({displayType:t.getParameter("item").getKey()})}.bind(this),items:[new u(this.getId()+"-"+v.Both+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_BOTH"),icon:"sap-icon://Chart-Tree-Map",key:v.Both}),new u(this.getId()+"-"+v.Chart+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_CHART"),icon:"sap-icon://along-stacked-chart",key:v.Chart}),new u(this.getId()+"-"+v.Table+"SegmentedButtonItem",{tooltip:this._oRb.getText("TLTP_DISPLAY_TYPE_BUTTON_TABLE"),icon:"sap-icon://table-view",key:v.Table})]})};w.prototype._genBirdEyeButton=function(){if(this._oBirdEyeButton==null){var t=function(t){var e=t.getText("TXT_BRIDEYE"),i=t.getText("TXT_BRIDEYE_RANGE_VISIBLE_ROWS"),o=t.getText("TLTP_BRIDEYE_ON_VISIBLE_ROWS");return e+" ("+i+"): "+o};this._oBirdEyeButton=new p(this.getId()+"-birdEyeButton",{icon:"sap-icon://show",type:O.Transparent,text:this._oRb.getText("TXT_BIRDEYE_BUTTON"),tooltip:t(this._oRb),press:this.fireBirdEyeButtonPress.bind(this)})}return this._oBirdEyeButton};w.prototype._getSelectItems=function(){var t=[],e=this.getInfoOfSelectItems();if(e.length>0){if(e[0]instanceof o){t=e}else{for(var i=0;i<e.length;i++){t.push(new o({key:e[i].key,text:e[i].text}))}}}return t};w.prototype._genTimeZoomGroupControls=function(){var t=e.config.ZoomControlType;var i=this.getZoomControlType();var o=function(t){clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=-1;this.setZoomLevel(t,true)};this.fireEvent("_zoomControlTypeChange",{zoomControlType:i});if(i===t.None){return[]}if(i===t.Select){if(this._oSelect){return[this._oSelect]}var n=this._getSelectItems();this._oSelect=new c(this.getId()+"-zoomSelect",{items:n,selectedItem:n[this.getZoomLevel()],change:function(t){var e=t.getSource();var i=e.getSelectedItem();var n=e.indexOfItem(i);this._iLiveChangeTimer=setTimeout(o.bind(this),200,[n,i])}.bind(this)});return[this._oSelect]}else{if(!this._oZoomLevelInvisibleText){this._oZoomLevelInvisibleText=new x;this._oZoomLevelInvisibleText.toStatic()}if(this._oZoomSlider){this._oZoomSlider.setMax(this.getStepCountOfSlider()-1);if(i===t.SliderOnly){return[this._oZoomSlider]}else if(i===t.ButtonsOnly){return[this._oZoomOutButton,this._oZoomInButton]}else{return[this._oZoomOutButton,this._oZoomSlider,this._oZoomInButton]}}this._oZoomSlider=new S(this.getId()+"-zoomSlider",{width:"200px",max:this.getStepCountOfSlider()-1,value:this.getZoomLevel(),min:0,step:1,liveChange:function(t){var e=parseInt(t.getParameter("value"),10);clearTimeout(this._iLiveChangeTimer);this._iLiveChangeTimer=setTimeout(o.bind(this),200,e);this._oZoomLevelInvisibleText.setText(this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+": "+e)}.bind(this)});var s=function(t){return function(e){this._iLiveChangeTimer=setTimeout(function(){var e=parseInt(t?this._oZoomSlider.stepUp(1).getValue():this._oZoomSlider.stepDown(1).getValue(),10);o.call(this,e);var i=this._oZoomSlider.getMax(),n=this._oZoomSlider.getMin();this._oZoomLevelInvisibleText.setText(this._oRb.getText("TLTP_SLIDER_ZOOM_LEVEL")+": "+e);if(e===i){this._oZoomOutButton.focus()}else if(e===n){this._oZoomInButton.focus()}}.bind(this),200)}};this._oZoomInButton=new p(this.getId()+"-zoomInButton",{icon:"sap-icon://zoom-in",type:O.Transparent,tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_IN"),ariaDescribedBy:[this._oZoomLevelInvisibleText.getId()],press:s(true).bind(this)});this._oZoomOutButton=new p(this.getId()+"-zoomOutButton",{icon:"sap-icon://zoom-out",type:O.Transparent,tooltip:this._oRb.getText("TLTP_SLIDER_ZOOM_OUT"),ariaDescribedBy:[this._oZoomLevelInvisibleText.getId()],press:s(false).bind(this)});return[this._oZoomOutButton,this._oZoomSlider,this._oZoomInButton]}};w.prototype._genTimeZoomFlexBox=function(){if(this._oTimeZoomFlexBox){if(this.bZoomControlTypeChanged){this._oTimeZoomFlexBox.removeAllItems();this._genTimeZoomGroupControls().forEach(function(t){this._oTimeZoomFlexBox.addItem(t)}.bind(this))}return this._oTimeZoomFlexBox}this._oTimeZoomFlexBox=new g(this.getId()+"-timeZoomFlexBox",{items:this._genTimeZoomGroupControls(),layoutData:new h({priority:E.NeverOverflow})});return this._oTimeZoomFlexBox};w.prototype._genSettingItems=function(){return this.getSettingItems().map(function(t){var e=new f(this.getId()+"-"+t.getKey()+"CheckBox",{name:t.getKey(),text:t.getDisplayText(),tooltip:t.getTooltip(),selected:t.getChecked()}).addStyleClass("sapUiSettingBoxItem");e.isStandard=t.get_isStandard();return e}.bind(this))};w.prototype._genSettings=function(){if(this._oSettingsButton){if(this._oSettingsBox&&this._oSettingsBox.getItems().length===this.getSettingItems().length){var t=this.getSettingItems();if(this._aOriginalSettings){var e={};var i={};t.forEach(function(t){if(!e[t.getKey()]){e[t.getKey()]=true}});for(var o=this._aOriginalSettings.length-1;o>=0;o--){if(!e[this._aOriginalSettings[o].getKey()]){this._aOriginalSettings.splice(o,1)}else{i[this._aOriginalSettings[o].getKey()]=true}}t.forEach(function(t){if(!i[t.getKey()]){this._aOriginalSettings.push(t.clone())}}.bind(this))}var n=this._oSettingsBox.getItems(),s=this._aOriginalSettings?this._aOriginalSettings:this.getSettingItems();for(var a=0;a<n.length;a++){var r=n[a],l=s[a];r.setName(l.getKey());r.setText(l.getDisplayText());r.setTooltip(l.getTooltip());r.setSelected(l.getChecked())}}else{this._oSettingsBox.destroyItems();this._genSettingItems().forEach(function(t){this._oSettingsBox.addItem(t)}.bind(this))}return this._oSettingsButton}this._oSettingsBox=new g(this.getId()+"-settingsFlexBox",{direction:L.Column,items:this._genSettingItems()}).addStyleClass("sapUiSettingBox");this._oSettingsDialog=new _(this.getId()+"-settingsDialog",{title:this._oRb.getText("SETTINGS_DIALOG_TITLE"),customTabs:[new m({content:this._oSettingsBox})],confirm:function(){this._fireSettingItemChangedEvent();if(this._isParentGanttContainer()){this.getParent()._oSplitter.resetContentAreasSizes()}}.bind(this),cancel:function(){this.updateSettingItems(this.mSettingsConfig)}.bind(this),reset:function(){this._genSettings()}.bind(this)});this._oSettingsButton=new p(this.getId()+"-settingsButton",{icon:"sap-icon://action-settings",type:O.Transparent,text:this._oRb.getText("TXT_SETTING_BUTTON"),tooltip:this._oRb.getText("TXT_SETTING_BUTTON"),layoutData:new h({priority:E.High}),press:function(t){this._oSettingsDialog.open()}.bind(this)});return this._oSettingsButton};w.prototype._genLegend=function(){if(this._oLegendButton){return this._oLegendButton}if(!this._oLegendPop){this._oLegendPop=new T(this.getId()+"-legendPopover",{placement:Z.Bottom,showArrow:false,showHeader:false})}this._oLegendButton=new p(this.getId()+"-legendButton",{icon:"sap-icon://legend",type:O.Transparent,text:this._oRb.getText("TXT_LEGEND_BUTTON"),tooltip:this._oRb.getText("TLTP_SHOW_LEGEND"),layoutData:new h({priority:E.High,closeOverflowOnInteraction:false}),press:function(t){var e=this._oLegendPop;if(e.isOpen()){e.close()}else{e.openBy(this._oLegendButton)}}.bind(this)});return this._oLegendButton};w.prototype.updateZoomLevel=function(t){this._bSuppressZoomStopChange=true;this.setZoomLevel(t)};w.prototype.setZoomLevel=function(t,e){if(!isNaN(t)){var i=this.getZoomLevel();if(this._oZoomSlider&&this._oZoomOutButton&&this._oZoomInButton){var o=this._oZoomSlider.getMax(),n=this._oZoomSlider.getMin();if(t===o){this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true)}else if(t===n){this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(false)}else{this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(true)}}if(i!==t){this.setProperty("zoomLevel",t,e);if(this._oZoomSlider){this._oZoomSlider.setValue(t);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t})}}if(this._oSelect){this._oSelect.setSelectedItem(this._oSelect.getItems()[t]);if(!this._bSuppressZoomStopChange){this.fireZoomStopChange({index:t,selectedItem:this._oSelect.getSelectedItem()})}}}}this._bSuppressZoomStopChange=false;return this};w.prototype.setLegendContainer=function(t){this.setAggregation("legendContainer",t);if(!this._oLegendPop){this._oInvisibleLabelText=new x;this._oInvisibleLabelText.toStatic();this.addDependent(this._oInvisibleLabelText);this._oLegendPop=new T(this.getId()+"-legendPopover",{placement:Z.Bottom,showArrow:false,showHeader:false,ariaLabelledBy:this._oInvisibleLabelText.getId()})}if(t){this._oLegendPop.removeAllContent();this._oLegendPop.addContent(new y({content:t}))}};w.prototype._fireSettingItemChangedEvent=function(){var t=this._oSettingsBox.getItems();var e=[];for(var i=0;i<t.length;i++){var o=t[i].getName(),n=o.substr(4),s="",a=t[i].getSelected();if(t[i].isStandard){s=this.mSettingsConfig[n]}else{s=this.mSettingsConfig[o]}if(s!==a){e.push({name:o,value:a,isStandard:t[i].isStandard});if(!t[i].isStandard){this.mSettingsConfig[o]=a}}}if(e.length>0){this.fireEvent("_settingsChange",e)}};w.prototype.updateSettingsConfig=function(t,e){var i=this.getSettingItems();Object.keys(t).forEach(function(e){this.mSettingsConfig[e]=t[e];var o=i.filter(function(t){return t.getKey().endsWith(e)})[0];if(o){o.setChecked(t[e])}}.bind(this));this.updateSettingItems(t);this._updateMSettingsConfigWithCustom(i);if(e&&!this._aOriginalSettings){this._aOriginalSettings=[];this.getSettingItems().forEach(function(t){this._aOriginalSettings.push(t.clone())}.bind(this))}};w.prototype.updateCustomSettingsConfig=function(){var t={};var e=this.getSettingItems();this._updateMSettingsConfigWithCustom(e,t);this.updateSettingItems(t)};w.prototype.updateCustomSettings=function(t){var e=this.getSettingItems();t.forEach(function(t){this.mSettingsConfig[t.name]=t.value;var i=e.filter(function(e){return e.getKey().endsWith(t.name)})[0];if(i){i.setChecked(t.value)}}.bind(this))};w.prototype._updateMSettingsConfigWithCustom=function(t,e){t.forEach(function(t){var i=t.getKey();var o=t.getChecked();if(!t.get_isStandard()&&this.mSettingsConfig[i]!==o){if(e){e[i]=o}this.mSettingsConfig[i]=t.getChecked()}}.bind(this))};w.prototype.updateSettingItems=function(t){var e=this._oSettingsBox.getItems();Object.keys(t).forEach(function(i){var o=e.filter(function(t){return t.getName().endsWith(i)})[0];if(o){o.setSelected(t[i])}})};w.prototype.getAllToolbarItems=function(){return this.getContent()};w.prototype.setInfoOfSelectItems=function(t,e){this.setProperty("infoOfSelectItems",t,e);var i=this;if(this._oSelect){var o=this._getSelectItems();this._oSelect.removeAllItems();o.forEach(function(t){i._oSelect.addItem(t)})}};return w},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ContainerToolbarPlaceholder", ["sap/gantt/library","sap/ui/core/Control","sap/ui/base/Object","sap/m/OverflowToolbarAssociativePopoverControls"],function(t,o,e,r){"use strict";var n=t.simple.ContainerToolbarPlaceholderType;var i=o.extend("sap.gantt.simple.ContainerToolbarPlaceholder",{metadata:{library:"sap.gantt",interfaces:["sap.m.IOverflowToolbarContent"],properties:{type:{type:"sap.gantt.simple.ContainerToolbarPlaceholderType",defaultValue:null},_show:{type:"boolean",defaultValue:false}},aggregations:{_control:{type:"sap.ui.core.Control",multiple:false}}},renderer:{apiVersion:2,render:function(t,o){var e=o._getControl();if(!e||!o._getShow()){return}if(o.getType()==="Spacer"){t.renderControl(e)}else{t.openStart("div",o).openEnd();t.renderControl(e);t.close("div")}}}});i.prototype.init=function(){this._oOverflowToolbarAssociativePopoverControls=new r;this._aControlAutoCloseEvents=[]};i.prototype.getOverflowToolbarConfig=function(){var t=this._getControl(),o="sapGanttSimpleContainerToolbarPlaceholderInPopover",r=this._mapOverflowToolbarConfig();if(!t){return r}if(e.isA(t,"sap.m.SegmentedButton")){r.onBeforeEnterOverflow=function(){t._onBeforeEnterOverflow(t);this.addStyleClass(o)}.bind(this);r.onAfterExitOverflow=function(){t._onAfterExitOverflow(t);this.removeStyleClass(o)}.bind(this)}else if(e.isA(t,"sap.m.OverflowToolbarButton")){r.onBeforeEnterOverflow=function(){this.addStyleClass(o);this._oOverflowToolbarAssociativePopoverControls._preProcessSapMButton(t);t._bInOverflow=true}.bind(this);r.onAfterExitOverflow=function(){this.removeStyleClass(o);delete t._bInOverflow;this._oOverflowToolbarAssociativePopoverControls._postProcessSapMButton(t)}.bind(this)}if(r.autoCloseEvents){this._attachAutoCloseEvents(r.autoCloseEvents);r.autoCloseEvents=["_controlAutoCloseEvent"]}return r};i.prototype._mapOverflowToolbarConfig=function(){var t=this._getControl(),o={canOverflow:!(this._isTypeSpacer()||this._isTypeTimeZoomControl())},e;if(!t){return o}if(t.getMetadata().getInterfaces().indexOf("sap.m.IOverflowToolbarContent")!==-1){return t.getOverflowToolbarConfig()}e=r.getControlConfig(t);if(e){o={canOverflow:e.canOverflow,autoCloseEvents:e.listenForEvents,propsUnrelatedToSize:e.noInvalidationProps,onBeforeEnterOverflow:e.preProcess,onAfterExitOverflow:e.postProcess}}return o};i.prototype._attachAutoCloseEvents=function(t){var o=this._getControl(),e;t.forEach(function(t){e="attach"+this._capitalize(t);if(o[e]){o[e](this._fireAutoCloseEvent.bind(this))}else{o.attachEvent(t,this._fireAutoCloseEvent.bind(this))}}.bind(this));this._aControlAutoCloseEvents=t};i.prototype._detachAutoCloseEvents=function(){var t=this._getControl(),o;this._aControlAutoCloseEvents.forEach(function(e){o="detach"+this._capitalize(e);if(t[o]){t[o](this._fireAutoCloseEvent,this)}else{t.detachEvent(e,this._fireAutoCloseEvent,this)}},this);this._aControlAutoCloseEvents=[]};i.prototype._toSelectMode=function(){this._getControl()._toSelectMode()};i.prototype._toNormalMode=function(){this._getControl()._toNormalMode()};i.prototype.getIcon=function(){return this._getControl().getIcon()};i.prototype.getLayoutData=function(){var t=this._getControl();return t?t.getLayoutData():null};i.prototype._getControl=function(){return this.getAggregation("_control")};i.prototype._setControl=function(t){this.setAggregation("_control",t)};i.prototype._getShow=function(){return this.getProperty("_show")};i.prototype._isTypeSpacer=function(){return this.getType()===n.Spacer};i.prototype._isTypeTimeZoomControl=function(){return this.getType()===n.TimeZoomControl};i.prototype._fireAutoCloseEvent=function(){this.fireEvent("_controlAutoClose")};i.prototype._capitalize=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)};i.prototype.setType=function(t){var o=this.getParent();if(o&&t!==this.getType()){this._detachAutoCloseEvents();this._setControl(null);o.bShallUpdateContent=true;o.invalidate()}this.setProperty("type",t,true)};return i});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ContainerToolbarRenderer", ["sap/ui/core/Renderer","sap/m/OverflowToolbarRenderer"],function(e,r){"use strict";var n=e.extend(r);n.apiVersion=2;return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/CoordinateUtils", ["sap/ui/thirdparty/jquery","sap/ui/Device"],function(jQuery,e){"use strict";var t={};var n={xPosOfEvent:function(t){return e.browser.edge?t.clientX:t.pageX},xPosOfSvgElement:function(e,t){return this.xPosOfEvent(e)-(t.offset().left||e.offsetX)},getEventSVGPoint:function(e,t){var n=e.createSVGPoint();n.x=this.xPosOfEvent(t);n.y=t.pageY||t.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());n.svgId=e.id;return n},getSvgScreenPoint:function(e,t){var n=e.createSVGPoint();n.x=this.xPosOfEvent(t);n.y=t.pageY||t.clientY;n=n.matrixTransform(e.getScreenCTM());n.svgId=e.id;return n},getEventPosition:function(e){return{pageX:this.xPosOfEvent(e),pageY:e.pageY}},updateCursorPosition:function(e){t={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}},getLatestCursorPosition:function(){return t},getCursorElement:function(){var e=document.elementFromPoint(t.clientX,t.clientY);return jQuery(e).control(0)}};return n},true);
sap.ui.predefine("sap/gantt/simple/CustomVariantHandler", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.simple.CustomVariantHandler",{metadata:{properties:{data:{type:"object",multiple:false},dependantControlID:{type:"string[]",multiple:false,defaultValue:[]}},events:{setDataComplete:{}}},setData:function(t){this.setProperty("data",t);this.fireSetDataComplete()},apply:function(){},revert:function(){}});return e});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/DeltaLine", ["sap/ui/core/Element","./GanttUtils","sap/ui/core/theming/Parameters"],function(e,t,r){"use strict";var a=e.extend("sap.gantt.simple.DeltaLine",{metadata:{library:"sap.gantt",properties:{stroke:{type:"sap.gantt.ValueSVGPaintServer"},_strokeWidth:{type:"float",defaultValue:1},strokeDasharray:{type:"string"},strokeOpacity:{type:"float",defaultValue:1},timeStamp:{type:"string"},endTimeStamp:{type:"string"},description:{type:"string"},visible:{type:"boolean",defaultValue:true},visibleDeltaStartEndLines:{type:"boolean",defaultValue:true},timeDelay:{type:"int",defaultValue:300},draggable:{type:"boolean",defaultValue:false},resizable:{type:"boolean",defaultValue:false},_enableChartDeltaAreaHighlight:{type:"boolean",defaultValue:true},_isSelected:{type:"boolean",defaultValue:false},_level:{type:"int",defaultValue:1},_visibleMarker:{type:"boolean",defaultValue:false}},aggregations:{_startLine:{type:"sap.gantt.simple.BaseLine",multiple:false},_endLine:{type:"sap.gantt.simple.BaseLine",multiple:false},_forwardMarker:{type:"sap.gantt.simple.BaseTriangle",multiple:false},_backwardMarker:{type:"sap.gantt.simple.BaseTriangle",multiple:false},_headerDeltaArea:{type:"sap.gantt.simple.BaseDeltaRectangle",multiple:false},_headerStartLine:{type:"sap.gantt.simple.BaseLine",multiple:false},_headerEndLine:{type:"sap.gantt.simple.BaseLine",multiple:false},_chartDeltaArea:{type:"sap.gantt.simple.BaseDeltaRectangle",multiple:false}},events:{press:{},mouseEnter:{},mouseLeave:{},deltalineDrop:{parameters:{newStartTime:{type:"string"},newEndTime:{type:"string"},oldStartTime:{type:"string"},oldEndTime:{type:"string"}}},deltalineResize:{parameters:{newTimeStamp:{type:"string"},newEndTimeStamp:{type:"string"},oldTimeStamp:{type:"string"},oldEndTimeStamp:{type:"string"},deltaline:{type:"sap.gantt.simple.DeltaLine"}}}},designtime:"sap/gantt/designtime/simple/DeltaLine.designtime"},renderer:{apiVersion:2}});a.prototype._getStrokeWidth=function(){return this.getProperty("_strokeWidth")};a.prototype._setStartLine=function(e){this.setAggregation("_startLine",e,true)};a.prototype._getStartLine=function(){return this.getAggregation("_startLine")};a.prototype._setEndLine=function(e){this.setAggregation("_endLine",e,true)};a.prototype._getEndLine=function(){return this.getAggregation("_endLine")};a.prototype._setForwardMarker=function(e){this.setAggregation("_forwardMarker",e,true)};a.prototype._getForwardMarker=function(){return this.getAggregation("_forwardMarker")};a.prototype._setBackwardMarker=function(e){this.setAggregation("_backwardMarker",e,true)};a.prototype._getBackwardMarker=function(){return this.getAggregation("_backwardMarker")};a.prototype._setHeaderDeltaArea=function(e){this.setAggregation("_headerDeltaArea",e,true)};a.prototype._getHeaderDeltaArea=function(){return this.getAggregation("_headerDeltaArea")};a.prototype._setHeaderStartLine=function(e){this.setAggregation("_headerStartLine",e,true)};a.prototype._getHeaderStartLine=function(){return this.getAggregation("_headerStartLine")};a.prototype._setHeaderEndLine=function(e){this.setAggregation("_headerEndLine",e,true)};a.prototype._getHeaderEndLine=function(){return this.getAggregation("_headerEndLine")};a.prototype._setChartDeltaArea=function(e){this.setAggregation("_chartDeltaArea",e,true)};a.prototype._getChartDeltaArea=function(){return this.getAggregation("_chartDeltaArea")};a.prototype._setEnableChartDeltaAreaHighlight=function(e){this.setProperty("_enableChartDeltaAreaHighlight",e,true)};a.prototype._getEnableChartDeltaAreaHighlight=function(){return this.getProperty("_enableChartDeltaAreaHighlight")};a.prototype._setIsSelected=function(e){this.setProperty("_isSelected",e,true)};a.prototype._getIsSelected=function(){return this.getProperty("_isSelected")};a.prototype._setLevel=function(e){this.setProperty("_level",e,true)};a.prototype._getLevel=function(){return this.getProperty("_level")};a.prototype._setVisibleMarker=function(e){this.setProperty("_visibleMarker",e,true)};a.prototype._getVisibleMarker=function(){return this.getProperty("_visibleMarker")};a.prototype.press=function(e){this.onMouseClick()};a.prototype.mouseEnter=function(e){this.onMouseEnter()};a.prototype.mouseLeave=function(e){this.onMouseLeave()};a.prototype.onMouseClick=function(){if(!this._getIsSelected()){t.resetStrokeDasharray(this.getParent());this._setIsSelected(true)}var e=this._getChartDeltaArea();var a=this._getHeaderDeltaArea();var i=this._getForwardMarker();var s=this._getBackwardMarker();var n=r.get("sapUiChartDataPointBorderColor");if(e){var o=document.getElementById(e.sId);if(this._getEnableChartDeltaAreaHighlight()===true){o.style.opacity=1}if(this.getVisibleDeltaStartEndLines()){var l=this._getStartLine();var g=this._getEndLine();var d=this._getHeaderStartLine();var y=this._getHeaderEndLine();if(l&&g&&d&&y){var p=document.getElementById(l.sId);var h=document.getElementById(g.sId);var u=document.getElementById(d.sId);var _=document.getElementById(y.sId);p.style.strokeDasharray=0;h.style.strokeDasharray=0;u.style.strokeDasharray=0;_.style.strokeDasharray=0;p.style.strokeWidth=this._getStrokeWidth()+1;h.style.strokeWidth=this._getStrokeWidth()+1;u.style.strokeWidth=this._getStrokeWidth()+1;_.style.strokeWidth=this._getStrokeWidth()+1}}if(i&&s&&a){var c=document.getElementById(i.sId);var m=document.getElementById(s.sId);var k=document.getElementById(a.sId);c.style.fillOpacity=1;m.style.fillOpacity=1;c.style.stroke=n;m.style.stroke=n;k.style.opacity=1}}if(this._getIsSelected()&&this.getDraggable()){k.style.cursor="Move"}if(this._getIsSelected()&&this.getResizable()){var f=this.getParent()._getResizeExtension();f.addDeltaLineResizer(this._getHeaderDeltaArea())}};a.prototype.onMouseEnter=function(){var e=this._getForwardMarker();var t=this._getBackwardMarker();var a=this._getHeaderDeltaArea();if(this.getVisibleDeltaStartEndLines()){var i=this._getStartLine();var s=this._getEndLine();var n=this._getHeaderStartLine();var o=this._getHeaderEndLine();if(i&&s&&o&&n){var l=document.getElementById(i.sId);var g=document.getElementById(s.sId);var d=document.getElementById(n.sId);var y=document.getElementById(o.sId);l.style.strokeDasharray=0;g.style.strokeDasharray=0;d.style.strokeDasharray=0;y.style.strokeDasharray=0;l.style.strokeWidth=this._getStrokeWidth()+1;g.style.strokeWidth=this._getStrokeWidth()+1;d.style.strokeWidth=this._getStrokeWidth()+1;y.style.strokeWidth=this._getStrokeWidth()+1}}var p=document.getElementById(e.sId);var h=document.getElementById(t.sId);var u=document.getElementById(a.sId);p.style.fillOpacity=1;h.style.fillOpacity=1;p.style.stroke=r.get("sapUiChartDataPointBorderColor");h.style.stroke=r.get("sapUiChartDataPointBorderColor");u.style.opacity=1;if(this._getIsSelected()&&this.getDraggable()){u.style.cursor="move"}};a.prototype.onMouseLeave=function(){var e=this._getIsSelected();var t=this._getForwardMarker();var a=this._getBackwardMarker();var i=this._getHeaderDeltaArea();if(!e){if(this.getVisibleDeltaStartEndLines()){var s=this._getStartLine();var n=this._getEndLine();var o=this._getHeaderStartLine();var l=this._getHeaderEndLine();if(s&&n){var g=document.getElementById(s.sId);var d=document.getElementById(n.sId);var y=document.getElementById(o.sId);var p=document.getElementById(l.sId);g.style.strokeDasharray=this.getStrokeDasharray();d.style.strokeDasharray=this.getStrokeDasharray();y.style.strokeDasharray=this.getStrokeDasharray();p.style.strokeDasharray=this.getStrokeDasharray();g.style.strokeWidth=this._getStrokeWidth();d.style.strokeWidth=this._getStrokeWidth();y.style.strokeWidth=this._getStrokeWidth();p.style.strokeWidth=this._getStrokeWidth()}}if(t&&a){var h=document.getElementById(t.sId);var u=document.getElementById(a.sId);var _=document.getElementById(i.sId);_.style.opacity=1;var c=r.get("sapUiChartDataPointBorderColor");if(this._getVisibleMarker()===true){h.style.fillOpacity=1;u.style.fillOpacity=1;h.style.stroke=c;u.style.stroke=c}else{h.style.fillOpacity=0;u.style.fillOpacity=0;h.style.stroke=null;u.style.stroke=null}}}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/DeltaLineRenderer", ["sap/gantt/simple/BaseLine","sap/gantt/simple/BaseTriangle","sap/gantt/simple/BaseDeltaRectangle","sap/gantt/misc/Format","sap/ui/core/theming/Parameters","sap/ui/core/Core"],function(e,t,r,a,i,o){"use strict";var s={apiVersion:2};s.renderDeltaLineHeader=function(s,n,g,p,l){var u=g.getAxisTime();var y=o.getConfiguration().getRTL();var m=u.timeToView(a.abapTimestampToDate(y?n.getEndTimeStamp():n.getTimeStamp()));var d=u.timeToView(a.abapTimestampToDate(y?n.getTimeStamp():n.getEndTimeStamp()));var h=n.getProperty("description");if(g.getEnableDeltaLine()===false||isNaN(m)||isNaN(d)){return}else{var k=10;var f=4;var v=6;n._setEnableChartDeltaAreaHighlight(g.getEnableChartDeltaAreaHighlight());var P;var S;var c;var D;var T;var E=n.getStrokeDasharray();var L=n._getStrokeWidth();var C=Math.abs(d-m);C=C<=0?1:C;if(C<v){c=(d+m)/2;P=c-v;S=c+v;D=1;T=i.get("sapUiChartDataPointBorderColor");n._setVisibleMarker(true)}else{P=m;S=d;D=0;n._setVisibleMarker(false);T=null}if(n._getIsSelected()===true){D=1;T=i.get("sapUiChartDataPointBorderColor");E="solid";L=L+1}var w;var x=p-l;w=x+2+(n._getLevel()-1)*6;var _=n._getHeaderDeltaArea();if(!_){_=new r({id:n.getId()+"-headerDeltaArea",x:m,y:w,height:f,width:Math.abs(d-m),fill:n.getStroke(),hoverable:true,press:function(e){n.press(e);n.firePress(e)},mouseEnter:function(e){n.mouseEnter(e);n.fireMouseEnter(e)},mouseLeave:function(e){n.mouseLeave(e);n.fireMouseLeave(e)}}).addStyleClass("sapGanntChartMarkerCursorPointer");if(h){_.setAggregation("tooltip",h,true)}n._setHeaderDeltaArea(_)}else{_.setProperty("fill",n.getStroke(),true);_.setProperty("x",m,true);_.setProperty("width",Math.abs(d-m),true);_.setProperty("y",w,true);if(h){_.setAggregation("tooltip",h,true)}}_.renderElement(s,_);var A=n._getHeaderStartLine();if(!A){A=new e({x1:m,y1:w,x2:m,y2:w+l,stroke:n.getStroke(),strokeWidth:L,strokeDasharray:E,strokeOpacity:n.getStrokeOpacity(),tooltip:h});n._setHeaderStartLine(A)}else{A.setProperty("stroke",n.getStroke(),true);A.setProperty("x1",m,true);A.setProperty("x2",m,true);A.setProperty("y1",w,true);A.setProperty("y2",w+l,true);A.setProperty("strokeDasharray",E,true);A.setProperty("strokeWidth",L,true);A.setAggregation("tooltip",h,true)}if(n.getVisibleDeltaStartEndLines()){A.renderElement(s,A)}var b=n._getHeaderEndLine();if(!b){b=new e({x1:d,y1:w,x2:d,y2:w+l,stroke:n.getStroke(),strokeWidth:L,strokeDasharray:E,strokeOpacity:n.getStrokeOpacity(),tooltip:h});n._setHeaderEndLine(b)}else{b.setProperty("stroke",n.getStroke(),true);b.setProperty("x1",d,true);b.setProperty("x2",d,true);b.setProperty("y1",w,true);b.setProperty("y2",w+l,true);b.setProperty("strokeDasharray",E,true);b.setProperty("strokeWidth",L,true);b.setAggregation("tooltip",h,true)}if(n.getVisibleDeltaStartEndLines()){b.renderElement(s,b)}var M=n._getForwardMarker();if(!M){M=new t({x:P,y:0,height:k,width:v,stroke:T,rowYCenter:w-3,fill:n.getStroke(),fillOpacity:D,orientation:"right",hoverable:true,press:function(e){n.press(e);n.firePress(e)},mouseEnter:function(e){n.mouseEnter(e);n.fireMouseEnter(e)},mouseLeave:function(e){n.mouseLeave(e);n.fireMouseLeave(e)}}).addStyleClass("sapGanntChartMarkerCursorPointer");if(h){M.setAggregation("tooltip",h,true)}n._setForwardMarker(M)}else{M.setProperty("x",P,true);M.setProperty("fillOpacity",D,true);M.setProperty("rowYCenter",w-3,true);M.setProperty("stroke",T,true);if(h){M.setAggregation("tooltip",h,true)}}M.renderElement(s,M);var O=n._getBackwardMarker();if(!O){O=new t({x:S,y:0,height:k,width:v,stroke:T,rowYCenter:w-3,fill:n.getStroke(),fillOpacity:D,orientation:"left",hoverable:true,press:function(e){n.press(e);n.firePress(e)},mouseEnter:function(e){n.mouseEnter(e);n.fireMouseEnter(e)},mouseLeave:function(e){n.mouseLeave(e);n.fireMouseLeave(e)}}).addStyleClass("sapGanntChartMarkerCursorPointer");if(h){O.setAggregation("tooltip",h,true)}n._setBackwardMarker(O)}else{O.setProperty("x",S,true);O.setProperty("fillOpacity",D,true);O.setProperty("rowYCenter",w-3,true);O.setProperty("stroke",T,true);if(h){O.setAggregation("tooltip",h,true)}}O.renderElement(s,O)}};s.renderDeltaLines=function(t,r,i){var s=i.getAxisTime();var n=o.getConfiguration().getRTL();var g=s.timeToView(a.abapTimestampToDate(n?r.getEndTimeStamp():r.getTimeStamp()));var p=s.timeToView(a.abapTimestampToDate(n?r.getTimeStamp():r.getEndTimeStamp()));var l=r.getStrokeDasharray();var u=r._getStrokeWidth();if(r._getIsSelected()===true){l="solid";u=u+1}var y=r.getDescription();var m=r._getStartLine();if(!m){m=new e({x1:g,y1:0,x2:g,y2:"100%",stroke:r.getStroke(),strokeWidth:u,strokeDasharray:l,strokeOpacity:r.getStrokeOpacity(),tooltip:y});r._setStartLine(m)}else{m.setProperty("stroke",r.getStroke(),true);m.setProperty("x1",g,true);m.setProperty("x2",g,true);m.setProperty("strokeDasharray",l,true);m.setProperty("strokeWidth",u,true);m.setAggregation("tooltip",y,true)}if(r.getVisibleDeltaStartEndLines()){m.renderElement(t,m)}var d=r._getEndLine();if(!d){d=new e({x1:p,y1:0,x2:p,y2:"100%",stroke:r.getStroke(),strokeWidth:u,strokeDasharray:l,strokeOpacity:r.getStrokeOpacity(),tooltip:y});r._setEndLine(d)}else{d.setProperty("stroke",r.getStroke(),true);d.setProperty("x1",p,true);d.setProperty("x2",p,true);d.setProperty("strokeDasharray",l,true);d.setProperty("strokeWidth",u,true);d.setAggregation("tooltip",y,true)}if(r.getVisibleDeltaStartEndLines()){d.renderElement(t,d)}};s.renderChartAreaOfDeltaLines=function(e,t,i){var s=i.getAxisTime();var n=o.getConfiguration().getRTL();var g=s.timeToView(a.abapTimestampToDate(n?t.getEndTimeStamp():t.getTimeStamp()));var p=s.timeToView(a.abapTimestampToDate(n?t.getTimeStamp():t.getEndTimeStamp()));var l=0;if(t._getIsSelected()===true){l=1}var u=t._getChartDeltaArea();if(i.getDeltaAreaHighlightColor()===""){i.setDeltaAreaHighlightColor("@sapUiListSelectionBackgroundColor")}if(!u){u=new r({x:g+1,y:0,height:"100%",width:Math.abs(p-g)-2,fill:i.getDeltaAreaHighlightColor(),opacity:l});t._setChartDeltaArea(u)}else{u.setProperty("x",g+1,true);u.setProperty("width",Math.abs(p-g)-2,true);u.setProperty("opacity",l,true)}u.renderElement(e,u)};return s},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/DimensionLegend", ["sap/ui/core/Control","sap/gantt/library"],function(e,t){"use strict";var n=e.extend("sap.gantt.simple.DimensionLegend",{metadata:{library:"sap.gantt",properties:{title:{type:"string",group:"Data",defaultValue:null}},aggregations:{columnConfigs:{type:"sap.gantt.simple.LegendColumnConfig",multiple:true,singularName:"columnConfig"},rowConfigs:{type:"sap.gantt.simple.LegendRowConfig",multiple:true,singularName:"rowConfig"}},events:{}}});return n});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/DimensionLegendRenderer", ["sap/base/util/ObjectPath","sap/gantt/misc/Utility","./BasePath","sap/ui/core/Core"],function(t,e,n,a){"use strict";var r={apiVersion:2};var i=10;var s=function(){var t=32;var n=e.findSapUiSizeClass();return e.scaleBySapUiSize(n,t)};r.render=function(e,n){e.openStart("div",n);e.openEnd();var a=n.getColumnConfigs();var r=n.getRowConfigs();var i=[];for(var s=0;s<r.length;s++){var o=r[s];var l={};l.text=o.getText();var v=o.getShapeClass();var h=o.getShapeName();var p=o.getStroke();var d=o.getStrokeWidth();var g=t.get(v);var c=[];for(var f=0;f<a.length;f++){var u=a[f].getFill();if(u==null){var x=a[f].getFillFactory();if(typeof x==="function"){u=x(h)}}var y=new g({stroke:p,strokeWidth:d,fill:u});c.push(y)}l.shapeInstances=c;i.push(l)}this.renderYDimension(e,i);var S=[];for(var m=0;m<a.length;m++){var D={};D.text=a[m].getText();S.push(D)}this.renderXDimension(e,S);e.close("div")};r.renderYDimension=function(t,e){for(var n=0;n<e.length;n++){this.renderYItems(t,e[n],n)}};r.renderYItems=function(t,e,n){var a=s(),r=a+"px";var i=a/2,o=i;t.openStart("div");t.attr("title",e.text);t.class("sapGanttDLItem");t.style("height",r);t.style("line-height",r);t.style(this._getMarginStyle(),o/2+"px");t.openEnd();this.renderYSvgPart(t,e.shapeInstances,o,i);this.renderYLegendText(t,e.text);t.close("div")};r._getMarginStyle=function(){var t=a.getConfiguration().getRTL();return"margin-"+(t?"right":"left")};r.normalizeShape=function(t,e,n,a){var r=n/2;var s={x:a*(e+i)+i/2,y:0,x1:0,y1:r,x2:e,y2:r,width:e,height:n,yBias:r,rowYCenter:r};if(t.isA("sap.gantt.simple.BaseCursor")||t.isA("sap.gantt.simple.BaseDiamond")){s.x+=e/2}if(t.isA("sap.gantt.simple.shapes.Shape")){t.setWidth(e);t.setHeight(n);t.setStartX(0);t.setRowYCenter(n)}else{Object.keys(s).forEach(function(e){var n=e.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)},"set");if(t[n]){t[n](s[e])}})}};r.renderYSvgPart=function(t,e,n,a){t.openStart("svg");t.attr("tabindex",-1);t.attr("focusable",false);t.class("sapGanttDLSvg");t.style("width",(n+i)*e.length+"px");t.openEnd();for(var r=0;r<e.length;r++){this.normalizeShape(e[r],n,a,r);e[r].renderElement(t,e[r])}t.close("svg")};r.renderYLegendText=function(t,e){t.openStart("div");t.class("sapGanttDLItemTxt");t.openEnd();if(e){t.text(e)}t.close("div")};r.renderXDimension=function(t,e){var n=e.length;var a=s(),r=a+"px";var i=a/2,o=i;t.openStart("div");t.class("sapGanttDLItem");t.style("height",r*n);t.style("line-height",r);t.style(this._getMarginStyle(),o/2+"px");t.openEnd();this.renderXDimensionPath(t,e);this.renderXDimensionText(t,e);t.close("div")};r.renderXDimensionPath=function(t,e){var r=e.length;var o=s();var l=o/2,v=l;t.openStart("div");t.style("height",o*r+"px");var h=(o/2+i)*r;t.style("width",h+"px");t.style("display","block");t.openEnd();t.openStart("svg");t.attr("tabindex",-1);t.attr("focusable",false);t.attr("width",h+"px");t.class("sapGanttDLSvg");t.openEnd();var p=a.getConfiguration().getRTL();for(var d=0;d<r;d++){var g=d*(v+i)+i/2+v/2;var c="M"+g+" 0";if(p){c+=" v"+(d+.5)*o;c+=" h"+-g}else{c+=" v"+(r-d-.5)*o;c+=" h"+((o/2+i)*r-g)}var f=new n({d:c,fill:"transparent",strokeWidth:2.5}).addStyleClass("sapGanttDimensionLegendPath");f.renderElement(t,f)}t.close("svg");t.close("div")};r.renderXDimensionText=function(t,e){var n=e.length;var a=s();t.openStart("div");t.class("sapGanttDLItemTxt");t.style("height",a*n+"px");t.style("width","100%");t.openEnd();for(var r=n-1;r>=0;r--){t.openStart("div");var i=e[r].text;if(i){t.attr("title",i)}t.class("sapGanttDLItemTxt");t.style("font-style","italic");t.style("height",a+"px");t.openEnd();if(i){t.text(e[r].text)}t.close("div")}t.close("div")};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ExpandModel", ["sap/ui/thirdparty/jquery","sap/base/assert","sap/ui/base/ManagedObject","./AggregationUtils","./GanttUtils"],function(jQuery,e,t,a,n){"use strict";var i=t.extend("sap.gantt.simple.ExpandModel",{metadata:{properties:{baseRowHeight:{type:"int",group:"Appearance",defaultValue:null}}},constructor:function(){t.apply(this,arguments);this.mExpanded={}}});i.prototype.isTableRowHeightNeedChange=function(e,t,i,r,s){var o=false;this.rowMaxLevelMap={};var p=s.getKey();for(var u=0;u<i.length;u++){var h=i[u];var d=n.getSelectedTableRowSettings(t,h);var l=t.getParent(),g=l.getUseParentShapeOnExpand();if(!l._bExpandRows&&d==null){break}else if(d!=null){var f=d.getAllExpandableShapes();if(f.length===0&&!e){this.toggle(e,d,r,s,0);o=true;return o}var m=[];var c=[];var v=[];var w=[];var E;var x;f.forEach(function(e){if(g){c=a.getNonLazyElementsByScheme(e,p);c.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){var t=e._getActiveShapeElement();if(t instanceof sap.gantt.simple.BaseGroup){E=null;x=null;t.getShapes().forEach(function(e){if(!E&&!x){E=e.getTime();x=e.getEndTime()}else{if(e.getTime()>=E){E=E}else{E=e.getTime()}if(e.getEndTime()>=x){x=e.getEndTime()}else{x=x}}});t.setProperty("time",E,true);t.setProperty("endTime",x,true);v=v.concat(t)}else if(t){v=v.concat(t)}}else if(e instanceof sap.gantt.simple.BaseGroup){E=null;x=null;e.getShapes().forEach(function(e){if(!E&&!x){E=e.getTime();x=e.getEndTime()}else{if(e.getTime()>=E){E=E}else{E=e.getTime()}if(e.getEndTime()>=x){x=e.getEndTime()}else{x=x}}});e.setProperty("time",E,true);e.setProperty("endTime",x,true);v=v.concat(e)}else{v=v.concat(e)}})}else if(e.mBindingInfos.hasOwnProperty("subTasks")||typeof e.getSubTasks==="function"&&e.getSubTasks()){c=a.getLazyElementsByScheme(e,p);c.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){var t=e._getActiveShapeElement();if(t instanceof sap.gantt.simple.BaseGroup){E=null;x=null;t.getShapes().forEach(function(e){if(!E&&!x){E=e.getTime();x=e.getEndTime()}else{if(e.getTime()>=E){E=E}else{E=e.getTime()}if(e.getEndTime()>=x){x=e.getEndTime()}else{x=x}}});t.setProperty("time",E,true);t.setProperty("endTime",x,true);v=v.concat(t)}else if(t){v=v.concat(t)}}else if(e instanceof sap.gantt.simple.BaseGroup){E=null;x=null;e.getShapes().forEach(function(e){if(!E&&!x){E=e.getTime();x=e.getEndTime()}else{if(e.getTime()>=E){E=E}else{E=e.getTime()}if(e.getEndTime()>=x){x=e.getEndTime()}else{x=x}}});e.setProperty("time",E,true);e.setProperty("endTime",x,true);v=v.concat(e)}else{v=v.concat(e)}})}else{c=a.getLazyElementsByScheme(e,p);w=n.calculateLevelForShapes(c,"time","endTime");m.push(w.maxLevel)}});if(v.length!==0){w=n.calculateLevelForShapes(v,"time","endTime");m.push(w.maxLevel)}w=n.calculateLevelForShapes(v,"time","endTime");m.push(w.maxLevel);var R=Math.max.apply(null,m);if(R>0){this.toggle(e,d,r,s,R,g);this.rowMaxLevelMap["row"+h]=R;o=true}}}return o};i.prototype.refreshRowYAxis=function(e){if(this.hasExpandedRows()===false){return}var t=e.getParent();var a=e.getRows();var n=e.getParent().getTableRowHeights();var i=0;for(var r=0;r<a.length;r++){var s=a[r],o=s.getAggregation("_settings"),p=o.getRowUid();i+=n[r-1]||0;if(!this.isRowExpanded(p)){continue}var u=this.getBaseRowHeight();if(t.getExpandedRowHeight()){u=t.getExpandedRowHeight()}this.calcExpandRowYAxis({uid:o.getRowUid(),rowIndex:r,rowY:i,baseRowHeight:u,allRowHeights:n})}return this.getBaseRowHeight()};i.prototype.toggle=function(e,t,a,n,i,r){if(e){this.expand(t,a,n,i,r)}else{this.collapse(t,n)}};i.prototype.expand=function(t,a,n,i,r){e(typeof i==="number","iMaxNumberOfDetails must be a number");var s=t.getRowUid(),o=a.getKey(),p=a.getRowSpan();var u=n.getKey(),h=n.getRowSpan();var d=this.mExpanded[s];if(r){if(!d||d.length===0){this.mExpanded[s]=[{scheme:u,metadata:{numberOfRows:i,rowSpan:p,useParentOnExpand:true,main:true}}]}}else{if(!d||d.length===0){this.mExpanded[s]=[{scheme:o,metadata:{rowSpan:p,main:true}}]}if(!this.hasExpandScheme(s,u)){this.mExpanded[s].push({scheme:u,metadata:{numberOfRows:i,rowSpan:h}})}}this.updateVisibleRowSpan(s)};i.prototype.collapse=function(e,t){var a=e.getRowUid();if(!a&&!this.mExpanded[a]){return}var n=t.getKey();var i=this.mExpanded[a];for(var r=0;r<i.length;r++){var s=i[r];if(s.scheme===n){i.splice(r,1)}if(this.hasNoExpandRows(a)){delete this.mExpanded[a];break}else{this.updateVisibleRowSpan(a)}}};i.prototype.hasExpandScheme=function(e,t){return this.mExpanded[e].filter(function(e){return e.scheme===t}).length>0};i.prototype.hasExpandedRows=function(){return!jQuery.isEmptyObject(this.mExpanded)};i.prototype.isRowExpanded=function(e){return!this.hasNoExpandRows(e)};i.prototype.hasNoExpandRows=function(e){var t=this.mExpanded[e]||[];return t.every(function(e){return e.metadata.main&&!e.metadata.useParentOnExpand})};i.prototype.updateVisibleRowSpan=function(e){var t=this.mExpanded[e]||[];var a,n,i=0;for(var r=0;r<t.length;r++){var s=t[r];var o=s.scheme;var p=s.metadata;if(p.main){a=o;n=p;if(p.useParentOnExpand){i=p.rowSpan*(p.numberOfRows||1)}}else{i=p.rowSpan*(p.numberOfRows||1)}}n.numberOfSubRows=i;this.mExpanded[e][0]={scheme:a,metadata:n}};i.prototype.getMainRowScheme=function(e){var t=this.mExpanded[e]||[];return t.filter(function(e){return e.metadata.main}).map(function(e){return{key:e.scheme,value:e.metadata}})[0]};i.prototype.getExpandSchemeKeys=function(e){var t=this.mExpanded[e]||[];return t.filter(function(e){return!e.metadata.main}).map(function(e){return e.scheme})};i.prototype.getCalculatedRowHeight=function(e,t,a){var n=t;var i=a.getParent(),r=i.getExpandedRowHeight(),s=i.getShowParentRowOnExpand()&&!i.getUseParentShapeOnExpand();if(this.hasExpandedRows()){var o=e.getRowUid();if(!o){return n}var p=this.mExpanded[o];if(p){var u=this.getMainRowScheme(o);if(!r){n=s?t*(u.value.rowSpan+u.value.numberOfSubRows):t*u.value.numberOfSubRows}else{if(!s){if(r<t&&u.value.numberOfSubRows===1){n=u.value.numberOfSubRows*t}else{n=u.value.numberOfSubRows*r+.5}}else{n=t*u.value.rowSpan+u.value.numberOfSubRows*r+.5}}}}return n};i.prototype.getRowHeightByIndex=function(e,t,a){if(e==null){return a}var n=e.getRows(),i=n[t].getAggregation("_settings");return this.getCalculatedRowHeight(i,a,e)};i.prototype.calcExpandRowYAxis=function(e){var t=e.uid,a=e.baseRowHeight;var n=e.rowY;var i,r,s=[];var o=[];var p=this.mExpanded[t];if(jQuery.isEmptyObject(p)){return}for(var u=0;u<p.length;u++){var h=p[u],d=h.scheme,l=h.metadata;if(l.main){i=l;r=d;if(l.useParentOnExpand){o.push(l);s.push(d)}}else{o.push(l);s.push(d)}}var g=i?i.rowSpan:1;var f={};f[r]=[g];var m=[f];for(var c=0;c<o.length;c++){var v=o[c],w=v.rowSpan,E=v.numberOfRows;var x=[];for(var R=0;R<E;R++){x.push(w)}f={};f[s[c]]=x;m.push(f)}var y=n;for(var S=0;S<m.length;S++){var b=m[S],T=Object.keys(b)[0],O=b[T];if(S===0){this._updateRowYAxis(t,T,{rowYAxis:[y].slice()})}else{var H=[];if(O.length===1){H.push(y+this.getBaseRowHeight());y+=O[0]*a}else{for(var B=0;B<O.length;B++){if(B===0){if(this.getBaseRowHeight()!==a){y=y+O[B]*this.getBaseRowHeight()}else{y=y+O[B]*a}}else{y=y+O[B]*a}H.push(y)}}this._updateRowYAxis(t,T,{rowYAxis:H.slice()})}}};i.prototype._updateRowYAxis=function(e,t,a){var n=a.rowYAxis;var i=this.mExpanded[e]||[];for(var r=0;r<i.length;r++){var s=i[r];if(s.scheme===t){s.metadata.yAxis=n;break}}};i.prototype.getRowYCenterByUid=function(e,t,a,n,i){var r=this.isRowExpanded(e);if(r===false){return t}var s=this.mExpanded[e],o=a||this.getMainRowScheme(e).key;for(var p=0;p<s.length;p++){var u=s[p];if(u.scheme===o){var h=u.metadata.yAxis,d=i.getShowParentRowOnExpand()&&!i.getUseParentShapeOnExpand(),l=i.getExpandedRowHeight(),g=this.getBaseRowHeight();if(l&&!(u.metadata.main&&!u.metadata.useParentOnExpand)){if(h.length===1&&l<g&&!d){g=this.getBaseRowHeight()}else{g=l}}var f=g*u.metadata.rowSpan;var m=h.map(function(e){return e+f/2});var c=n===undefined?0:n;return m[c]}}};i.prototype.getExpandShapeHeightByUid=function(e,t,a){var n=this.mExpanded[e];var i=n.filter(function(e){return e.scheme===t})[0];return i?i.metadata.rowSpan*this.getBaseRowHeight():a};i.prototype.intersectRows=function(e,t){return jQuery.grep(e,function(e){return jQuery.inArray(e,t)>-1})};i.prototype.collectExpandedBgData=function(e,t,a){var n=this.intersectRows(e,Object.keys(this.mExpanded));if(jQuery.isEmptyObject(this.mExpanded)||jQuery.isEmptyObject(e)||jQuery.isEmptyObject(n)){return[]}var i=this.getBaseRowHeight();var r=[];for(var s=0;s<n.length;s++){var o=n[s],p=this.mExpanded[o]||[];for(var u=0;u<p.length;u++){var h=p[u],d=h.metadata.yAxis||[],l=h.metadata.main;if(!l||h.metadata.useParentOnExpand){var g=[];if(t){if(d.length===1&&!a&&t<this.getBaseRowHeight()){i=this.getBaseRowHeight()}else{i=t}}d.forEach(function(e){g.push({x:0,y:e,rowUid:o,rowHeight:i*h.metadata.rowSpan})});r.push(g)}}}return r};return i},true);
sap.ui.predefine("sap/gantt/simple/FindAndSelectUtils", ["./GanttUtils","sap/gantt/misc/Format","sap/gantt/misc/Utility","sap/gantt/simple/AggregationUtils","sap/ui/core/Core"],function(e,t,s,a,i){"use strict";var n=i.getLibraryResourceBundle("sap.gantt");var l={scrollToShape:function(i,n){var l=this;function h(e,t,s,a){if(!e||e.isA("sap.gantt.simple.Relationship")){return}if(e.isA("sap.gantt.simple.BaseConditionalShape")){e=e._getActiveShapeElement()}if(e&&((e.getShapeId()===s.shapeID[0]||a===s.shapeID[0])&&e.getTime())){l._oFoundShape=e}else if(e instanceof sap.gantt.simple.BaseGroup){if(t.getSelectOnlyGraphicalShape()){e._eachChildOfGroup(e,function(a,i){i.forEach(function(a){if(!l._oFoundShape){h(a,t,s,e.getShapeId())}})})}else{e._eachChildOfGroup(e,function(a){if(!l._oFoundShape){h(a,t,s,e.getShapeId())}})}}}var o=document.getElementById(n.getId());var r=o?o.querySelector("[data-sap-gantt-row-id="+"'"+i.rowID+"'"+"]"):document.querySelector("[data-sap-gantt-row-id="+"'"+i.rowID+"'"+"]");if(r){var g=null,c=[];this._oFoundShape=null;var d=sap.ui.getCore().byId(r.parentElement.id);if(d){var u=a.getAllNonLazyAggregations(d);var f=Object.keys(u).filter(function(e){return e.indexOf("calendars")===-1&&e!=="relationships"}).map(function(e){return d.getAggregation(e)||[]});f.forEach(function(e){if(e&&e.length>0&&!this._oFoundShape){var t=0;while(t<e.length&&!this._oFoundShape){h(e[t],n,i);t++}}}.bind(this))}var S=this._oFoundShape&&this._oFoundShape.getTime()||i.startTime;n.jumpToPosition(t.abapTimestampToDate(S));e.getShapeByShapeId(n.getId(),i.shapeID).forEach(function(e){if(!g){g=s.parseUid(e.getShapeUid());if(this.rowIndex!==parseInt(g.rowIndex,10)){this.rowIndex=parseInt(g.rowIndex,10);n.getTable().setFirstVisibleRow(this.rowIndex)}}if(e.getHighlightable()){this.isShapeHighlightable=true;c.push({ShapeId:e.getShapeId(),Highlighted:true})}else{this.isShapeHighlightable=false;c.push({ShapeId:e.getShapeId(),Selected:true})}}.bind(this));if(this.isShapeHighlightable){n.oHighlight.clearAllHighlightedShapeIds();n.oHighlight.updateHighlightedShapes(c)}else{n.oSelection.clearAllSelectedShapeIds();n.oSelection.updateSelectedShapes(c)}}else{var p=n.getTable(),I=p.isA("sap.ui.table.TreeTable")?p.getBinding().getNodes(0,n._iNodesLength,0):p.getBinding().getContexts(0,n._iNodesLength,0),_=function(){var e=o?o.querySelector("[data-sap-gantt-row-id='"+i.rowID+"']"):document.querySelector("[data-sap-gantt-row-id='"+i.rowID+"']");if(e){clearInterval(this.setTime);this.setTime=null;this.scrollToShape(i,n)}};for(var m=0;m<I.length;m++){var v=n._getRowIdPath();var x=(I[m].context||I[m]).getObject()[v];if(x===i.rowID){this.rowIndex=m;p.setFirstVisibleRow(m);this.setTime=setInterval(_.bind(this),100);break}}}},navigateToSearchResult:function(e,t){if(t.isA("sap.gantt.simple.GanttSearchSidePanel")){t._oSearchSidePanel.getItems()[3].getContent()[0].setSelectedItem("listItem"+this._selectedIndex);t._oSearchSidePanel.getItems()[3].getContent()[0].getSelectedItem().getDomRef().children[0].focus()}this.updateShapeSelectionANDHighlight(e,this.previousGanttID);var s=this._ganttSearchResults[this._selectedIndex],a=null;if(s){if(this.previousGanttID!==s.ganttID){this.previousGanttID=s.ganttID;a=e[this.previousGanttID]}else{a=e[this.previousGanttID]}if(t.isA("sap.gantt.simple.GanttSearchSidePanel")){t.setContainerHeight(t._oSearchSidePanel.getItems()[3].getContent()[0].getSelectedItem())}this.scrollToShape(s,a);if(!t.isA("sap.gantt.simple.GanttSearchSidePanel")){this.toggleNavigationState(t._searchFlexBox.getItems()[1],t._searchFlexBox.getItems()[3])}else{this.toggleNavigationState(t._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],t._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1],true)}}},updateShapeSelectionANDHighlight:function(e,t){if(e.length>0){var s=e[t]?e[t]:e[0];if(this.isShapeHighlightable){var a=s.getHighlight();a.clearAllHighlightedShapeIds();a.updateShape(null,{highlighted:false,ctrl:false})}else{var i=s.getSelection();i.clearAllSelectedShapeIds();i.updateShape(null,{selected:false,ctrl:false})}}},triggerSearchEvent:function(e,t,s,a,i){var h=t[0].getParent();var o=function(){var n=[],o,r;t.forEach(function(t,s){t._bTimeContinuousShapes=false;t._hasTimeContinuousShapes(t.getTable().getRowSettingsTemplate());if(!t._bTimeContinuousShapes){var a=t.getFindBy(),i=t._getRowIdPath();n=t.findAll(e,a);n.forEach(function(e){e.ganttID=s;this.aSearchData.push(e)}.bind(this));var l=t.getTable().getBinding().getNodes&&t.getTable().getBinding().getNodes(0,t._iNodesLength,0)||t.getTable().getBinding().getContexts&&t.getTable().getBinding().getContexts(0,t._iNodesLength,0),h=[],g=Object.keys(t._oExpandModel.mExpanded),c=false,d=false,u=function(e,s){if(s.includes(e)){c=true;if(t._oExpandModel.mExpanded[s].length<=1){d=true}}};o=t.getTable().isA("sap.ui.table.TreeTable")?false:true;for(var f=0;f<l.length;f++){for(var S=0;S<n.length;S++){r=o||l[f].nodeState;if(r&&(l[f].context||l[f]).getObject()[i]===n[S].rowID){var p="PATH:"+n[S].rowID+"|SCHEME:"+t.getPrimaryShapeScheme().getKey();c=false;g.forEach(u.bind(null,p));if(c){if(n[S].isExpandable){if(n[S].hasOwnProperty("isParent")){if(n[S].isParent||d){h.push(n[S])}}else{h.push(n[S])}}}else if(n[S].hasOwnProperty("isParent")){h.push(n[S])}}}}this._ganttSearchResults=this._ganttSearchResults.concat(h)}}.bind(this));h.setProperty("customSearchResults",this._ganttSearchResults,true);h.fireCustomGanttSearchResult({searchResults:this._ganttSearchResults});this._ganttSearchResults=h.getCustomSearchResults();if(s){if(i.list){i.list.destroyItems()}i.getParent().fireGanttSearchSidePanelList({searchResults:this._ganttSearchResults});i._updateContent()}h.setBusy(false);this._searchResultsCount=this._ganttSearchResults.length;for(var g=0;g<this._ganttSearchResults.length;g++){if(document.querySelector("[data-sap-gantt-shape-id='"+this._ganttSearchResults[g].shapeID[0]+"']")){this._selectedIndex=g;break}}if(this._selectedIndex<0){this._selectedIndex=0}if(s){i._oSearchSidePanel.getItems()[3].getContent()[0].setSelectedItem("listItem"+this._selectedIndex);if(i._oSearchSidePanel.getItems()[3].getContent()[0].getSelectedItem()){i._oSearchSidePanel.getItems()[3].getContent()[0].getSelectedItem().getDomRef().children[0].focus()}}if(!h._bPreventShapeScroll){this.updateShapeSelectionANDHighlight(t,this.previousGanttID)}var c=this._ganttSearchResults[this._selectedIndex],d=null;if(c){a._searchFlexBox.getItems()[2].setText("("+(this._selectedIndex+1)+"/"+this._searchResultsCount+")");if(this.previousGanttID!==c.ganttID){this.previousGanttID=c.ganttID;d=t[this.previousGanttID]}else{d=t[this.previousGanttID]}if(!h._bPreventShapeScroll){l.scrollToShape(c,d)}this._toggleNavigationStateUtil(s,a,i)}else{if(s){i.setEmptyListInfo(false)}this._toggleNavigationStateUtil(s,a,i)}h._bPreventShapeScroll=false}.bind(this);this._ganttSearchResults=[];this._selectedIndex=0;this._searchResultsCount=0;a._searchFlexBox.getItems()[0].setValue(e);a._searchFlexBox.getItems()[2].setText(n.getText("GNT_EMPTY_RESULT_INFO_TOOLBAR"));if(e){this.aSearchData=[];h.setBusyIndicatorDelay(0);h.setBusy(true);setTimeout(function(){o()},h.getBusyIndicatorDelay())}else{if(!h._bPreventShapeScroll){this.updateShapeSelectionANDHighlight(t,this.previousGanttID)}if(s){i._updateContent();i.setEmptyListInfo(true)}this._toggleNavigationStateUtil(s,a,i);h._bPreventShapeScroll=false}if(!s){setTimeout(function(){var e=a._searchFlexBox.getItems()[3];var t=a._searchFlexBox.getItems()[1];if(e.getEnabled()){e.focus()}else{t.focus()}},0)}},_toggleNavigationStateUtil:function(e,t,s){if(!e){this.toggleNavigationState(t._searchFlexBox.getItems()[1],t._searchFlexBox.getItems()[3])}else{this.toggleNavigationState(s._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],s._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1],true)}},toggleNavigationState:function(e,t,s,a){if(this._selectedIndex===0&&this._searchResultsCount>1){e.setEnabled(false);t.setEnabled(true);if(!s){t.focus()}}else if(this._selectedIndex===this._searchResultsCount-1&&this._selectedIndex>0){t.setEnabled(false);e.setEnabled(true);if(!s){e.focus()}}else if(this._selectedIndex===0&&this._searchResultsCount===0||this._selectedIndex===this._searchResultsCount-1){e.setEnabled(false);t.setEnabled(false)}else{e.setEnabled(true);t.setEnabled(true);if(a){t.focus()}}e.rerender();t.rerender()},updateToolbarItems:function(e,t,s){var a=e.getAllToolbarItems(),i=false,n=-1;a.forEach(function(e,s){if(e.isA("sap.m.ToolbarSpacer")){n=s}if(e.getId().includes("findAndSelectSearchButton")){e.setVisible(!t)}if(e.getId().includes("findAndSelectFlexBox")){i=true;e.setVisible(t)}});if(!i){if(n>-1){e.insertContent(e._searchFlexBox,n+1)}else{e.insertContent(e._searchFlexBox,1)}}setTimeout(function(){var a=e._searchFlexBox.getItems()[0];if(s&&this._searchResultsCount>1){this.toggleNavigationState(e._searchFlexBox.getItems()[1],e._searchFlexBox.getItems()[3],false,true)}else if(a.getDomRef()){var i=a.getValue().length;var n=a.getDomRef().getElementsByTagName("input")[0];a.focus();var l=s?i:0;n.setSelectionRange(l,i)}else if(!t){var h=e._oSearchButton.getDomRef();if(h){h.focus()}}}.bind(this),0)}};return l});
sap.ui.predefine("sap/gantt/simple/FullScreenUtil", ["sap/m/Dialog","sap/ui/core/HTML"],function(e,l){"use strict";var o={toggleFullScreen:function(o,t,n,a){var r;if(t){r=o.getDomRef();if(r){if(!o._oHTML){o._oHTML=new l({preferDOM:false,afterRendering:function(){if(o&&o._oHTML){o._oFullScreenDialog.getDomRef().classList.remove("sapUiPopupWithPadding");var e=o._oHTML.getDomRef();if(e){e.style.height="100%";e.append(o.getDomRef())}}}})}if(!o._oFullScreenDialog){o._oFullScreenDialog=new e({showHeader:false,stretch:true,beforeClose:function(){if(o&&o._placeHolder&&a){a.call(o.getGanttCharts()[0],false,n)}},content:[o._oHTML]});o._oFullScreenDialog.addStyleClass("sapFullScreenGanttDialog");if(n){o._oFullScreenDialog.attachAfterOpen(function(){n.focus()});o._oFullScreenDialog.attachAfterClose(function(){n.focus()})}}o._placeHolder=document.createElement("div");r.parentNode.insertBefore(o._placeHolder,r);o._oHTML.setContent("<div></div>")}o._oFullScreenDialog.open()}else if(o._placeHolder&&o._oHTML){if(o.getShowSearchSidePanel()){o.setProperty("showSearchSidePanel",false,true);window.setTimeout(function(){o.setProperty("showSearchSidePanel",true,false)},0)}var i=o.getHeight&&o.getHeight();var c=o.getDomRef();if(i&&i!==c.style.height){c.style.height=i}r=o._oHTML.getDomRef();o._placeHolder.parentNode.replaceChild(r.children[0],o._placeHolder);o._placeHolder=null;r=null;if(o._oFullScreenDialog){o._oFullScreenDialog.close();o._oFullScreenDialog=null}}},cleanUpFullScreen:function(e){if(e._oFullScreenDialog){e._oFullScreenDialog.destroy();e._oFullScreenDialog=null}e._placeHolder=null;e._oHTML=null}};return o},true);
sap.ui.predefine("sap/gantt/simple/GanttAdaptationData", ["sap/ui/core/CustomData"],function(t){"use strict";var a=t.extend("sap.gantt.simple.GanttAdaptationData");return a});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttChartContainer", ["sap/base/strings/capitalize","sap/ui/core/Control","sap/gantt/library","sap/ui/base/ManagedObjectObserver","sap/ui/layout/Splitter","sap/ui/layout/SplitterLayoutData","sap/ui/core/library","../control/AssociateContainer","../config/TimeHorizon","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/m/FlexBox","sap/m/Text","./FindAndSelectUtils","./GanttChartContainerRenderer"],function(t,e,a,n,i,o,r,s,l,h,p,g,u){"use strict";var c=a.simple.GanttChartWithTableDisplayType;var y=r.Orientation;var d=e.extend("sap.gantt.simple.GanttChartContainer",{metadata:{library:"sap.gantt",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},layoutOrientation:{type:"sap.ui.core.Orientation",group:"Behavior",defaultValue:sap.ui.core.Orientation.Vertical},enableTimeScrollSync:{type:"boolean",defaultValue:true},enableCursorLine:{type:"boolean",defaultValue:true},enableNowLine:{type:"boolean",defaultValue:true},enableVerticalLine:{type:"boolean",defaultValue:true},enableAdhocLine:{type:"boolean",defaultValue:true},enableDeltaLine:{type:"boolean",defaultValue:true},enableNonWorkingTime:{type:"boolean",defaultValue:true},displayType:{type:"sap.gantt.simple.GanttChartWithTableDisplayType",defaultValue:c.Both},enableStatusBar:{type:"boolean",defaultValue:false},statusMessage:{type:"string",defaultValue:""},statusBarDatePattern:{type:"string",defaultValue:"EEEE, MMMM d, yyyy"},statusBarTimePattern:{type:"string",defaultValue:"hh:mm:ss a"},hideSettingsItem:{type:"string[]",defaultValue:[]},enableVariantManagement:{type:"boolean",defaultValue:false},_enableRTA:{type:"boolean",defaultValue:false},showSearchSidePanel:{type:"boolean",defaultValue:false},customSearchResults:{type:"array",defaultValue:[]}},defaultAggregation:"ganttCharts",aggregations:{toolbar:{type:"sap.gantt.simple.ContainerToolbar",multiple:false},ganttCharts:{type:"sap.gantt.simple.GanttChartWithTable",multiple:true},statusBar:{type:"sap.m.FlexBox",multiple:false},svgDefs:{type:"sap.gantt.def.SvgDefs",multiple:false},variantHandler:{type:"sap.gantt.simple.CustomVariantHandler",multiple:false},searchSidePanel:{type:"sap.gantt.simple.GanttSearchSidePanel",multiple:false},searchSidePanelList:{type:"sap.tnt.NavigationList",multiple:false}},events:{customSettingChange:{parameters:{name:{type:"string"},value:{type:"boolean"}}},variantApplied:{},ganttSearchSidePanelList:{parameters:{searchResults:{type:"array"}}},customGanttSearchResult:{parameters:{searchResults:{type:"array"}}}},designtime:"sap/gantt/designtime/simple/GanttChartContainer.designtime"}});var f=["enableCursorLine","enableNowLine","enableVerticalLine","enableAdhocLine","enableDeltaLine","enableNonWorkingTime"];var m=["enableTimeScrollSync"].concat(f).concat(["enableStatusBar"]).concat(["showSearchSidePanel"]);var S={zoomLevel:0,displayType:c.Both,enableCursorLine:true,enableNowLine:true,enableVerticalLine:true,enableAdhocLine:true,enableDeltaLine:true,enableTimeScrollSync:true,enableNonWorkingTime:true,enableStatusBar:false};f.forEach(function(e){d.prototype["set"+t(e,0)]=function(t){this.setProperty(e,t);this.getGanttCharts().forEach(function(a){a.setProperty(e,t)});return this}});d.prototype.setSharedPropertiesValueToGantts=function(){f.forEach(function(t){var e=this.getProperty(t);this.getGanttCharts().forEach(function(a){a.setProperty(t,e,true)})}.bind(this))};d.prototype.init=function(){this._bInitHorizonApplied=false;this._nInitialRenderedGantts=0;this._oSplitter=new i({id:this.getId()+"-ganttContainerSplitter",orientation:this.getLayoutOrientation()});this.oObserver=new n(this.observePropertiesChanges.bind(this));this.oObserver.observe(this,{properties:m});this.oStatusBar=new p(this.getId()+"-ganttStatusBar",{renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween"}).addStyleClass("sapUiSettingBox");this.setAggregation("statusBar",this.oStatusBar,true);this.createItems().forEach(function(t){this.getStatusBar().addItem(t)}.bind(this))};d.prototype.exit=function(){this.oObserver.disconnect();this._oSplitter.destroy()};d.prototype.setSearchSidePanel=function(t){this.setAggregation("searchSidePanel",t,true);return this};d.prototype.setSearchSidePanelList=function(t){this.setAggregation("searchSidePanelList",t,true);return this};d.prototype.setDisplayType=function(t){this._setDisplayTypeForAll(t);this.setProperty("displayType",t,false);return this};d.prototype.setToolbar=function(t){this.setAggregation("toolbar",t,true);t.attachZoomStopChange(this._onToolbarZoomStopChange,this);t.attachBirdEyeButtonPress(this._onToolbarBirdEyeButtonPress,this);t.attachEvent("_settingsChange",this._onToolbarSettingsChange.bind(this));t.attachEvent("_zoomControlTypeChange",this._onToolbarZoomControlTypeChange.bind(this));t.attachDisplayTypeChange(this._onToolbarDisplayTypeChanged.bind(this),this);t._oDisplayTypeSegmentedButton.setSelectedKey(this.getDisplayType());return this};d.prototype.setVariantHandler=function(t){this.setAggregation("variantHandler",t,true);t.attachSetDataComplete(this.customVariantChange,this)};d.prototype.setLayoutOrientation=function(t){this.setProperty("layoutOrientation",t);this._oSplitter.setOrientation(t);return this};d.prototype.addGanttChart=function(t){this.addAggregation("ganttCharts",t,true);this._insertGanttChart(t)};d.prototype.insertGanttChart=function(t,e){this.insertAggregation("ganttCharts",t,e);this._insertGanttChart(t,e)};d.prototype.removeGanttChart=function(t){this._removeGanttChartFromSplitter(t);var e=this.removeAggregation("ganttCharts",t);if(this.indexOfDependent(e)===-1){this.addDependent(e)}this._adjustSplitterLayoutData();return e};d.prototype.removeAllGanttCharts=function(){var t=this.getGanttCharts();for(var e=0;e<t.length;e++){this._removeGanttChartFromSplitter(t[e])}var a=this.removeAllAggregation("ganttCharts");a.forEach(function(t){if(this.indexOfDependent(t)===-1){this.addDependent(t)}}.bind(this));return a};d.prototype._insertGanttChart=function(t,e){if(!t){return}var a=this._getOtherGanttSelectionPanelSize(t);if(a){t.setProperty("selectionPanelSize",a,"true")}var n=new s({content:t,layoutData:t.getLayoutData()?t.getLayoutData().clone():new o});if(e!==0&&!e){this._oSplitter.addContentArea(n)}else{this._oSplitter.insertContentArea(n,e)}this._sanitizeGanttChartEvents(t);this.setSharedPropertiesValueToGantts();t.setDisplayType(this.getDisplayType())};d.prototype._adjustSplitterLayoutData=function(){var t=this.getGanttCharts();var e=this._oSplitter.getContentAreas();if(t.length===1){e[0].getLayoutData().setSize("auto")}};d.prototype._getOtherGanttSelectionPanelSize=function(t){var e=this.getGanttCharts().filter(function(e){return e.getId()!==t.getId()});return e&&e.length>0?e[0].getSelectionPanelSize():null};d.prototype._sanitizeGanttChartEvents=function(t){var e={_initialRenderGanttChartsSync:this._onInitialRenderGanttChartsSync,_timePeriodZoomOperation:this._onGanttChartTimePeriodZoomOperation,_zoomInfoUpdated:this._onZoomInfoUpdated,_selectionPanelResize:this._onSelectionPanelWidthChange,_layoutDataChange:this._onGanttChartLayoutDataChange};Object.keys(e).forEach(function(a){t.detachEvent(a,e[a],this)}.bind(this));Object.keys(e).forEach(function(a){t.attachEvent(a,e[a],this)}.bind(this))};d.prototype._onGanttChartLayoutDataChange=function(t){var e=t.getSource(),a=e.getLayoutData();this._oSplitter.getContentAreas().forEach(function(t){if(t.getContent()===e.getId()){t.getLayoutData().setSize(a.getSize()).setMinSize(a.getMinSize())}})};d.prototype._onInitialRenderGanttChartsSync=function(t){var e=t.getParameters();var a=this.getGanttCharts();if(e.reasonCode==="initialRender"&&!this.getEnableTimeScrollSync()){return}if(!this.getEnableTimeScrollSync()){if(e.reasonCode==="visibleHorizonUpdated"){for(var n=0;n<a.length;n++){if(t.getSource().getId()===a[n].getId()){continue}a[n].syncVisibleHorizon(e.visibleHorizon,e.visibleWidth,true)}}else{var i;if(e.reasonCode==="mouseWheelZoom"){i="syncMouseWheelZoom"}if(i){for(var o=0;o<a.length;o++){var r=a[o];var s=r;if(t.getSource().getId()===s.getId()){continue}s[i](e)}}}}else{for(var l=0;l<a.length;l++){a[l].syncVisibleHorizon(e.visibleHorizon,e.visibleWidth)}}};d.prototype._onGanttChartTimePeriodZoomOperation=function(t){var e=this.getEnableTimeScrollSync();var a=this.getGanttCharts();for(var n=0;n<a.length;n++){if(t.getSource().getId()===a[n].getId()){continue}var i=this._oSplitter.getOrientation();a[n].syncTimePeriodZoomOperation(t,e,i)}};d.prototype._onSelectionPanelWidthChange=function(t){var e=this.getDisplayType(),a=t.getParameter("displayType");if(e!==a){this.setDisplayType(a);return}if(this.getLayoutOrientation()===y.Horizontal&&e!==c.Both){return}var n=t.getParameter("newWidth");this.getGanttCharts().forEach(function(t){t.setProperty("selectionPanelSize",n+"px",false);t._draw()})};d.prototype._removeGanttChartFromSplitter=function(t){var e=t;if(typeof t==="number"){e=this.getGanttCharts()[t]}if(e){this._oSplitter.removeContentArea(e._oAC)}};d.prototype.onBeforeRendering=function(){this.observePropertiesChanges();this.handleZoomControlTypeToAxistimeStrategy();if(this.getSvgDefs()){this._propogateSvgDefs()}};d.prototype.onAfterRendering=function(){if(this.getEnableStatusBar()){this.msgText.setText(this.getStatusMessage())}if(this._bHideToolbar&&this.getToolbar()){this.getToolbar().addStyleClass("sapToolbarContentHidden")}else if(!this._bHideToolbar&&this.getToolbar()){this.getToolbar().removeStyleClass("sapToolbarContentHidden")}if(this.getToolbar()&&this._bHideVariant&&this.getToolbar()._oVariantManagement){this.getToolbar()._oVariantManagement.addStyleClass("sapToolbarContentHidden")}else if(this.getToolbar()&&!this._bHideVariant&&this.getToolbar()._oVariantManagement){this.getToolbar()._oVariantManagement.removeStyleClass("sapToolbarContentHidden")}};d.prototype._propogateSvgDefs=function(){var t=this.getGanttCharts();t.forEach(function(t){t.setAggregation("svgDefs",this.getSvgDefs(),true)}.bind(this))};d.prototype.handleZoomControlTypeToAxistimeStrategy=function(){if(this.getToolbar()){var t=this.getGanttCharts();var e=this.getToolbar().getZoomControlType();t.forEach(function(t){t.getAxisTimeStrategy()._updateZoomControlType(e)})}};d.prototype._onZoomInfoUpdated=function(t){if(this.getToolbar()){var e=t.getParameter("zoomLevel");if(!isNaN(e)){this.getToolbar().updateZoomLevel(e)}}};d.prototype._addChangesToControlPersonalizationWriteAPI=function(t,e){var a=this.getEnableVariantManagement()||this.getProperty("_enableRTA");if(!t.bPreventDefault&&a){h.add({changes:e})}};d.prototype.updateSearch=function(){this._bPreventShapeScroll=true;if(this.getShowSearchSidePanel()){this.getSearchSidePanel()._oSearchSidePanel.getItems()[1].getContent()[0].fireSearch()}else if(this.getToolbar()&&this.getToolbar()._searchFlexBox&&this.getToolbar()._searchFlexBox.getItems()[0]){this.getToolbar()._searchFlexBox.getItems()[0].fireSearch()}};d.prototype.closeSearchSidePanel=function(){if(this.getShowSearchSidePanel()){this.getSearchSidePanel()._oSearchSidePanel.getItems()[0].getContent()[0].getItems()[2].firePress()}};d.prototype._onToolbarDisplayTypeChanged=function(t){var e=[];e.push({selectorElement:this,changeSpecificData:{changeType:"GanttContainerDisplayType",content:{propertyName:"displayType",newValue:t.getParameter("displayType"),oldValue:S.displayType}}});this.setDisplayType(t.getParameter("displayType"));this._addChangesToControlPersonalizationWriteAPI(t,e)};d.prototype._setDisplayTypeForAll=function(t){var e=this.getToolbar();if(e){e._oDisplayTypeSegmentedButton.setSelectedKey(t)}this.getGanttCharts().forEach(function(e){e.setDisplayType(t)})};d.prototype._onToolbarBirdEyeButtonPress=function(t){var e=this.getGanttCharts();var n;var i;e.forEach(function(t){var e=t._getZoomExtension().calculateBirdEyeRange(null,true);if(e.startTime&&e.endTime){if(!n||e.startTime.getTime()<n.getTime()){n=e.startTime}if(!i||i.getTime()<e.endTime.getTime()){i=e.endTime}}});if(n&&i){var o=new l({startTime:n,endTime:i});e.forEach(function(t){var e=t.getAxisTimeStrategy();if(e.getMouseWheelZoomType()===a.MouseWheelZoomType.Stepwise){e.bBirdEyeTriggered=true}t.syncVisibleHorizon(o)})}};d.prototype._onToolbarZoomStopChange=function(t){var e=this.getGanttCharts();var a=[];e.forEach(function(e){a.push({selectorElement:e.getAxisTimeStrategy(),changeSpecificData:{changeType:"GanttContainerZoomLevel",content:{propertyName:"zoomLevel",newValue:t.getParameter("index"),oldValue:S.zoomLevel}}})});this._addChangesToControlPersonalizationWriteAPI(t,a);e.forEach(function(e){e.getAxisTimeStrategy().updateStopInfo({index:t.getParameter("index"),selectedItem:t.getParameter("selectedItem")})})};d.prototype._onToolbarZoomControlTypeChange=function(t){this._handleZoomControlType(t.getParameter("zoomControlType"));var e=this.getGanttCharts()[0];if(e&&e.isA("sap.gantt.simple.GanttChartWithTable")){S={zoomLevel:e.getAggregation("axisTimeStrategy").getProperty("zoomLevel"),displayType:e.getProperty("displayType"),enableAdhocLine:e.getProperty("enableAdhocLine"),enableCursorLine:e.getProperty("enableCursorLine"),enableDeltaLine:e.getProperty("enableDeltaLine"),enableNowLine:e.getProperty("enableNowLine"),enableVerticalLine:e.getProperty("enableVerticalLine"),enableNonWorkingTime:e.getProperty("enableNonWorkingTime"),enableStatusBar:this.getEnableStatusBar()}}};d.prototype._handleZoomControlType=function(t){var e=this.getGanttCharts();e.forEach(function(e){e.getAxisTimeStrategy()._updateZoomControlType(t)})};d.prototype._onToolbarSettingsChange=function(e){var a=e.getParameters();var n=[],i=[],o="";a.forEach(function(e){if(e.isStandard){var a=e.name.substr(4);if(m.indexOf(a)>=0){this["set"+t(a,0)](e.value);this._bToolbarSettingsItemChanged=true;switch(m.indexOf(a)){case 0:o="GanttContainerEnableTimeScrollSync";break;case 1:o="GanttContainerEnableCursorLine";break;case 2:o="GanttContainerEnableNowLine";break;case 3:o="GanttContainerEnableVerticalLine";break;case 4:o="GanttContainerEnableAdhocLine";break;case 5:o="GanttContainerEnableDeltaLine";break;case 6:o="GanttContainerEnableNonWorkingTime";break;case 7:o="GanttContainerEnableStatusBar";break}i.push({selectorElement:this,changeSpecificData:{changeType:o,content:{propertyName:a,newValue:e.value,oldValue:S[a]}}})}}else{delete e.isStandard;n.push(e)}}.bind(this));if(n.length>0){this.fireCustomSettingChange(n);var r=this.getEnableVariantManagement()||this.getProperty("_enableRTA");if(!r){this.getToolbar().updateCustomSettings(n)}}this._addChangesToControlPersonalizationWriteAPI(e,i)};d.prototype.customVariantChange=function(t){var e=this.getVariantHandler(),a=e.getData(),n=[];a.dependentControls=e.getDependantControlID();n.push({selectorElement:this,changeSpecificData:{changeType:"GanttContainerCustom",content:a}});this._addChangesToControlPersonalizationWriteAPI(t,n)};d.prototype.observePropertiesChanges=function(t){var e;var a=this.getToolbar();if(!t){e=m.reduce(function(t,e){t[e]=this.getProperty(e);return t}.bind(this),{});if(a){var n=a._oSettingsBox.getItems();var i=this.getHideSettingsItem();n.forEach(function(t){var e=i.filter(function(e){return t.getName().endsWith(e)})[0];if(e){t.setVisible(false)}})}}else{e={};e[t.name]=t.current}if(a){var o=!t;a.updateSettingsConfig(e,o)}};d.prototype.createItems=function(){this.msgText=new g(this.getId()+"-ganttStatusBarMsgText",{maxLines:1}).addStyleClass("sapUiSmallMarginEnd").addStyleClass("sapGanttStatusBarText");this.dateTimeText=new g(this.getId()+"-ganttStatusBarDateTimeText",{textAlign:sap.ui.core.TextAlign.Right});return[this.msgText,this.dateTimeText]};d.prototype.updateAxisTimeSettings=function(){this.getGanttCharts().forEach(function(t){t.getAxisTimeStrategy().initialSettings.zoomLevel=t.getAxisTimeStrategy().getZoomLevel()})};d.prototype.setStatusMessage=function(t){this.setProperty("statusMessage",t,true);this.msgText.setProperty("text",t,true);if(this.getEnableStatusBar()){this.oStatusBar.invalidate()}return this};return d},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttChartContainerRenderer", [],function(){"use strict";var t={apiVersion:2};t.render=function(t,e){if(e.getGanttCharts()&&e.getGanttCharts().length>0){e.getGanttCharts().forEach(function(t){if(t._bPreventInitialRender){delete t._bPreventInitialRender}})}t.openStart("div",e);t.class("sapGanttContainer");if(e.getShowSearchSidePanel()){t.class("sapGanttContainerWithSidePanel")}t.style("width",e.getWidth());t.style("height",e.getHeight());t.openEnd();this.renderSvgDefs(t,e);this.renderToolbar(t,e);this.renderGanttCharts(t,e);if(e.getShowSearchSidePanel()){this.renderSidePanel(t,e)}if(e.getEnableStatusBar()){this.renderStatusBar(t,e)}t.close("div")};t.renderSvgDefs=function(t,e){var n=e.getSvgDefs();if(n){t.openStart("svg",e.getId()+"-svg-psdef");t.attr("aria-hidden","true");t.attr("tabindex",-1);t.attr("focusable",false);t.class("sapGanttInvisiblePaintServer");t.openEnd();t.unsafeHtml(n.getDefString());t.close("svg")}};t.renderToolbar=function(t,e){var n=e.getToolbar();if(n){t.openStart("div");t.class("sapGanttContainerTbl");t.openEnd();t.renderControl(n);t.close("div")}};t.renderStatusBar=function(t,e){var n=e.getStatusBar();if(n){t.openStart("div");t.class("sapGanttContainerStatusBar");t.openEnd();t.renderControl(n);t.close("div")}};t.renderGanttCharts=function(t,e){t.openStart("div",e.getId()+"-ganttContainerContent");if(e.getEnableStatusBar()){t.class("sapGanttContainerCntWithStatusBar")}else{t.class("sapGanttContainerCnt")}if(e.getShowSearchSidePanel()){t.class("sapGanttContainerCntWithSidePanel")}t.openEnd();t.renderControl(e._oSplitter);t.close("div")};t.renderSidePanel=function(t,e){var n=e.getSearchSidePanel();if(n){t.openStart("div",e.getId()+"-ganttSearchSidePanel");t.class("sapUiGanttSearchSidePanel");t.openEnd();t.renderControl(n);t.close("div")}};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttChartWithTable", ["sap/gantt/library","sap/ui/thirdparty/jquery","sap/base/assert","sap/base/Log","sap/ui/core/Control","sap/ui/model/ChangeReason","sap/base/util/values","sap/ui/layout/Splitter","sap/ui/layout/SplitterLayoutData","sap/ui/core/ResizeHandler","./FullScreenUtil","./InnerGanttChart","./GanttHeader","./GanttSyncedControl","../control/AssociateContainer","../axistime/ProportionZoomStrategy","./SelectionModel","./ExpandModel","./ShapeScheme","./GanttExtension","./GanttScrollExtension","./GanttZoomExtension","./GanttPointerExtension","./GanttDragDropExtension","./GanttPopoverExtension","./GanttConnectExtension","./GanttResizeExtension","./GanttLassoExtension","./GanttUtils","./RenderUtils","../misc/Format","../misc/Utility","../config/TimeHorizon","sap/ui/export/Spreadsheet","sap/m/OverflowToolbar","sap/ui/core/Core","sap/base/util/uid","sap/m/Dialog","sap/m/Input","sap/m/Label","sap/m/VBox","sap/m/Button","sap/ui/model/json/JSONModel","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/base/util/deepEqual","sap/ui/core/CustomData","sap/gantt/simple/GanttAdaptationData","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","./HighlightModel","sap/gantt/simple/AggregationUtils","./FindAndSelectUtils"],function(e,jQuery,t,i,a,n,s,o,r,l,h,p,g,d,u,c,f,S,m,y,b,T,_,v,E,x,w,C,D,R,A,P,I,V,H,z,L,O,M,G,B,U,N,F,W,k,j,J,Z,X,q,K,Y){"use strict";var Q=e.simple.GanttChartWithTableDisplayType,$=e.simple.VisibleHorizonUpdateType,ee=e.simple.VisibleHorizonUpdateSubType,te=e.simple.exportTableCustomDataType;var ie=Object.freeze({totalHorizonUpdated:$.TotalHorizonUpdated,mouseWheelZoom:$.MouseWheelZoom,syncVisibleHorizon:$.SyncVisibleHorizon,initialRender:$.InitialRender,horizontalScroll:$.HorizontalScroll,zoomLevelChanged:$.ZoomLevelChanged,timePeriodZooming:$.TimePeriodZooming});var ae=z.getLibraryResourceBundle("sap.gantt");var ne=10;var se=60;function oe(e,t){return e+t}function re(e,t){return Math.abs(e-t)<ne}var le=a.extend("sap.gantt.simple.GanttChartWithTable",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",defaultValue:"100%"},shapeSelectionMode:{type:"sap.gantt.SelectionMode",defaultValue:e.SelectionMode.MultiWithKeyboard},shapeOverRelationship:{type:"boolean",defaultValue:true},shapeSelectionSettings:{type:"object",defaultValue:null},shapeHighlightSettings:{type:"object",defaultValue:null},enableCursorLine:{type:"boolean",defaultValue:true},enableNowLine:{type:"boolean",defaultValue:true},nowLineInUTC:{type:"boolean",defaultValue:true},enableVerticalLine:{type:"boolean",defaultValue:true},enableAdhocLine:{type:"boolean",defaultValue:true},adhocLineLayer:{type:"string",defaultValue:e.AdhocLineLayer.Top},enableDeltaLine:{type:"boolean",defaultValue:true},enableNonWorkingTime:{type:"boolean",defaultValue:true},enableChartDeltaAreaHighlight:{type:"boolean",defaultValue:true},deltaLineLayer:{type:"string",defaultValue:e.DeltaLineLayer.Bottom},datePattern:{type:"string",defaultValue:e.config.DEFAULT_DATE_PATTERN},timePattern:{type:"string",defaultValue:e.config.DEFAULT_TIME_PATTERN},enableExpandedRowBorders:{type:"boolean",defaultValue:true},enableExpandedRowBackground:{type:"boolean",defaultValue:true},expandedRowHeight:{type:"int"},dragOrientation:{type:"sap.gantt.DragOrientation",defaultValue:e.DragOrientation.Free},ghostAlignment:{type:"string",defaultValue:e.dragdrop.GhostAlignment.None},showShapeTimeOnDrag:{type:"boolean",defaultValue:false},selectionPanelSize:{type:"sap.ui.core.CSSSize",defaultValue:"30%"},displayType:{type:"sap.gantt.simple.GanttChartWithTableDisplayType",defaultValue:Q.Both},disableShapeDoubleClickEvent:{type:"boolean",defaultValue:false},showExportTableToExcel:{type:"boolean",defaultValue:false},enableSelectAndDrag:{type:"boolean",defaultValue:true},deltaAreaHighlightColor:{type:"string",defaultValue:"@sapUiListSelectionBackgroundColor"},enableLassoInvert:{type:"boolean",defaultValue:false},showParentRowOnExpand:{type:"boolean",defaultValue:true},printingBatchSize:{type:"int",defaultValue:100},showGanttHeader:{type:"boolean",defaultValue:true},_enableRTA:{type:"boolean",defaultValue:false},snapMode:{type:"sap.gantt.dragdrop.SnapMode",defaultValue:e.dragdrop.SnapMode.None},snapTimeInterval:{type:"object",defaultValue:{}},enableChartOverflowToolbar:{type:"boolean",defaultValue:false},enableChartSelectionState:{type:"boolean",defaultValue:true},enableChartHoverState:{type:"boolean",defaultValue:true},selectOnlyGraphicalShape:{type:"boolean",defaultValue:false},showTextOnGhost:{type:"boolean",defaultValue:true},relationshipShapeSize:{type:"sap.gantt.simple.relationshipShapeSize",defaultValue:e.simple.relationshipShapeSize.Medium},useParentShapeOnExpand:{type:"boolean",defaultValue:false},findBy:{type:"string[]",defaultValue:[]},findByOperator:{type:"string",defaultValue:e.simple.findByOperator.OR},isConnectorDetailsVisible:{type:"boolean",defaultValue:false},rowHighlightFill:{type:"sap.gantt.ValueSVGPaintServer"},rowHighlightAndHoverFill:{type:"sap.gantt.ValueSVGPaintServer"}},aggregations:{table:{type:"sap.ui.table.Table",multiple:false},adhocLines:{type:"sap.gantt.AdhocLine",multiple:true,singularName:"adhocLine",bindable:"bindable",visibility:"public"},simpleAdhocLines:{type:"sap.gantt.simple.AdhocLine",multiple:true,singularName:"simpleAdhocLine",bindable:"bindable",visibility:"public"},deltaLines:{type:"sap.gantt.simple.DeltaLine",multiple:true,singularName:"deltaLine",bindable:"bindable",visibility:"public"},svgDefs:{type:"sap.gantt.def.SvgDefs",multiple:false,singularName:"svgDef"},shapeSchemes:{type:"sap.gantt.simple.ShapeScheme",multiple:true,singularName:"shapeScheme"},calendarDef:{type:"sap.gantt.def.cal.CalendarDefs",multiple:false,bindable:"bindable"},axisTimeStrategy:{type:"sap.gantt.axistime.AxisTimeStrategyBase",multiple:false,bindable:"bindable"},locale:{type:"sap.gantt.config.Locale",multiple:false},_splitter:{type:"sap.ui.layout.Splitter",multiple:false,visibility:"hidden"},_header:{type:"sap.gantt.simple.GanttHeader",multiple:false,defaultValue:null,visibility:"hidden"},_innerGantt:{type:"sap.gantt.simple.InnerGanttChart",multiple:false,visibility:"hidden"},ganttAdaptationData:{type:"sap.gantt.simple.GanttAdaptationData",multiple:true},overflowToolbarItems:{type:"sap.ui.core.Control",multiple:true}},events:{shapeSelectionChange:{parameters:{shapeUids:{type:"string[]"}}},shapeHighlightChange:{parameters:{shapeUids:{type:"string[]"}}},shapeResize:{parameters:{shapeUid:{type:"string"},shape:{type:"sap.gantt.simple.BaseShape"},rowObject:{type:"object"},oldTime:{type:"string[]"},newTime:{type:"string[]"}}},shapeMouseEnter:{parameters:{shape:{type:"sap.gantt.simple.BaseShape"},pageX:{type:"int"},pageY:{type:"int"}}},shapeMouseLeave:{parameters:{shape:{type:"sap.gantt.simple.BaseShape"},originEvent:{type:"object"}}},shapePress:{parameters:{popoverOffsetX:{type:"int"},rowSettings:{type:"sap.gantt.simple.GanttRowSettings"},shape:{type:"sap.gantt.simple.BaseShape"}},allowPreventDefault:true},shapeDoubleClick:{parameters:{popoverOffsetX:{type:"int"},rowSettings:{type:"sap.gantt.simple.GanttRowSettings"},shape:{type:"sap.gantt.simple.BaseShape"}}},shapeContextMenu:{parameters:{pageX:{type:"int"},pageY:{type:"int"},popoverOffsetX:{type:"int"},rowSettings:{type:"sap.gantt.simple.GanttRowSettings"},shape:{type:"sap.gantt.simple.BaseShape"}}},dragStart:{parameters:{sourceGanttChart:{type:"sap.gantt.simple.GanttChartWithTable"},draggedShapeDates:{type:"object"},lastDraggedShapeUid:{type:"string"},cursorDateTime:{type:"object"}}},shapeDrop:{parameters:{sourceGanttChart:{type:"sap.gantt.simple.GanttChartWithTable"},targetGanttChart:{type:"sap.gantt.simple.GanttChartWithTable"},draggedShapeDates:{type:"object"},lastDraggedShapeUid:{type:"string"},targetRow:{type:"sap.ui.table.Row"},cursorDateTime:{type:"object"},newDateTime:{type:"object"},targetShape:{type:"sap.gantt.simple.BaseShape"}}},shapeConnect:{parameters:{fromShapeUid:{type:"string"},toShapeUid:{type:"string"},type:{type:"sap.gantt.simple.RelationshipType"}}},visibleHorizonUpdate:{parameters:{type:{type:"sap.gantt.simple.VisibleHorizonUpdateType"},subType:{type:"sap.gantt.simple.VisibleHorizonUpdateSubType"},lastVisibleHorizon:{type:"sap.gantt.config.TimeHorizon"},currentVisibleHorizon:{type:"sap.gantt.config.TimeHorizon"},lastRenderedVisibleHorizon:{type:"sap.gantt.config.TimeHorizon"},currentRenderedVisibleHorizon:{type:"sap.gantt.config.TimeHorizon"}}},shapeConnectorList:{parameters:{pageX:{type:"int"},pageY:{type:"int"},connectorList:{type:"object"}}},renderingComplete:{}},designtime:"sap/gantt/designtime/simple/GanttChartWithTable.designtime"}});le.prototype.init=function(){this.iGanttRenderedWidth=-1;this._bExtensionsInitialized=false;this._bSupressShapeChangeEvent=false;this._bRowActionInitialRender=false;this._oExpandModel=new S;this._aExpandedIndices=[];this._oSplitter=new o({id:this.getId()+"-ganttChartSplitter"});this.setAggregation("_splitter",this._oSplitter);this._oSyncedControl=new d;var e=new p;this.setAggregation("_innerGantt",e);this.setAggregation("_header",new g);e.attachEvent("ganttReady",function(e){var t=e.getParameter("supressEvent");if(!t){this.fireRenderingComplete()}}.bind(this));this._sPreviousDisplayType=this.getDisplayType();this.searchTxt=[];this.searchProperty=[];this._createInnerGanttRenderPromise()};le.prototype.getInnerGantt=function(){return this.getAggregation("_innerGantt")};le.prototype.onSplitterResize=function(e){var t=e.getParameter("oldSizes"),i=e.getParameter("newSizes"),a=t.length>0&&i.length>0&&(t[0]!==i[0]||t[1]!==i[1]),n=this.getDisplayType(),s=i[0],o=false;if(this._sPreviousDisplayType!==n){o=true;this._isDisplayTypeChanged=true}else{this._isDisplayTypeChanged=false}if(a){if(n===Q.Both){this._onResize(a)}var r=function(e){return this.getSelectionPanelSize().startsWith("0")||e[0]!==0}.bind(this);if(re(t.reduce(oe),i.reduce(oe))&&t[0]!==i[0]&&r(t)){this.setProperty("selectionPanelSize",this._oSplitter._getContentAreas()[0].getLayoutData().getSize(),true);this.fireEvent("_selectionPanelResize",{newWidth:s,displayType:n})}if(o){this._isDisplayTypeChanged=true}else{this._isDisplayTypeChanged=false}this._draw()}};le.prototype.setLayoutData=function(e){this.setAggregation("layoutData",e,true);this.fireEvent("_layoutDataChange");return this};le.prototype.setDisplayType=function(e){this._sPreviousDisplayType=this.getDisplayType();if(this._sPreviousDisplayType===Q.Both&&e!==Q.Both){this._iLastTableAreaSize=this.getAggregation("_splitter").getContentAreas()[0]&&this.getAggregation("_splitter").getContentAreas()[0].getLayoutData().getSize()}this._isDisplayTypeChanged=true;this.setProperty("displayType",e,false);if(e===Q.Table){this._iLastVisibleWidth=this.getVisibleWidth();this.setProperty("selectionPanelSize","auto",true)}else{delete this._bPreventInitialRender}this._setupDisplayType();return this};le.prototype.setShapeSelectionSettings=function(e){this.setProperty("shapeSelectionSettings",e,true);if(this._getResizeExtension){this._getResizeExtension().updatemSelectionSettings()}};le.prototype.setShapeHighlightSettings=function(e){this.setProperty("shapeHighlightSettings",e,true);if(this._getResizeExtension){this._getResizeExtension().updatemHighlightSettings()}};le.prototype.setSelectionPanelSize=function(e){this.setProperty("selectionPanelSize",e,false);delete this._iLastTableAreaSize;this._setSplitterLayoutData(e,"auto");return this};le.prototype.applySettings=function(e,t){e=e||{};this._applyMissingSettings(e);a.prototype.applySettings.call(this,e,t);this._initSelectionModel(this.getProperty("shapeSelectionMode"));this._initHighlightModel("Single")};le.prototype._applyMissingSettings=function(t){if(!t.axisTimeStrategy){t.axisTimeStrategy=new c}if(!t.locale){t.locale=e.config.DEFAULT_LOCALE_CET.clone()}if(!t.shapeSchemes){t.shapeSchemes=[new m({key:"default",primary:true})]}else{var a=t.shapeSchemes.some(function(e){return e.getPrimary()});if(!a){i.warning("you need set a ShapeSheme with primary:true")}}};le.prototype.getPrimaryShapeScheme=function(){return this.getShapeSchemes().filter(function(e){return e.getPrimary()})[0]};le.prototype.getSyncedControl=function(){return this._oSyncedControl};le.prototype.getTableRowHeights=function(){return this.getSyncedControl().getRowHeights()};le.prototype.setTable=function(e){this.setAggregation("table",e);e.addCustomData(new J({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{designtime:"sap/gantt/designtime/simple/Table.designtime"}}}));e._bVariableRowHeightEnabled=true;var t=this._oSplitter.removeContentArea(0);this._oSplitter.insertContentArea(new u({content:e,enableRootDiv:true,layoutData:e.getLayoutData()?e.getLayoutData().clone():new r({size:this.getSelectionPanelSize()})}),0);var i=e.getRowActionTemplate();if(i&&i.isA("sap.gantt.simple.GanttRowAction")&&i.getControlTemplate()){e.setRowHeight(80)}if(t==null){this._oSyncedControl.syncWith(e);this._oSplitter.addContentArea(this._oSyncedControl)}else if(t&&t.getContent()!==e.getId()){this._oSyncedControl.syncWith(e)}e.detachEvent("_rowsUpdated",this._onTableRowsUpdated,this);e.attachEvent("_rowsUpdated",this._onTableRowsUpdated,this);e.attachEvent("columnMove",this._onTableColumnMove,this);e.attachEvent("filter",this._onTableFilter,this);e.attachEvent("sort",this._onTableSorter,this);e.attachEvent("columnVisibility",this._onColumnVisible,this);e.attachEvent("settingsChange",this._onTableSettingsChanged,this)};le.prototype.setGanttAdaptationData=function(e,t){this.addAggregation("ganttAdaptationData",new Z(e,t),true)};le.prototype.setEnableVariableRowHeight=function(e){if(this.getTable()){this.getTable()._bVariableRowHeightEnabled=e}else{i.warning("you need to set table aggregation first")}};le.prototype.setLargeDataScrolling=function(e){if(this.getTable()){this.getTable()._setLargeDataScrolling(e)}else{i.warning("you need to set table aggregation first")}};le.prototype.getRenderedTimeRange=function(){return this.getAxisTime().getTimeRangeSlice(0,this.iGanttRenderedWidth)};le.prototype._initSelectionModel=function(e){if(this.oSelection){this.oSelection.detachSelectionChanged(this._onSelectionChanged,this)}this.oSelection=new f(e);this.oSelection.attachSelectionChanged(this._onSelectionChanged,this);return this};le.prototype.setShapeSelectionMode=function(e){this.setProperty("shapeSelectionMode",e);if(this.oSelection){this.oSelection.setSelectionMode(e)}return this};le.prototype._initHighlightModel=function(e){if(this.oHighlight){this.oHighlight.detachHighlightChanged(this._onHighlightChanged,this)}this.oHighlight=new q(e);this.oHighlight.attachHighlightChanged(this._onHighlightChanged,this);return this};le.prototype.getSelectedShapeUid=function(){return this.oSelection.allUid()};le.prototype.getSelectedShapeId=function(){return this.oSelection.getSelectedShapeIDS()};le.prototype.getHighlightedShapeUid=function(){return this.oHighlight.allUid()};le.prototype.setSelectedShapeUid=function(e){return this.selectShapes(e,true)};le.prototype.selectShapes=function(e,t){if(!this.oSelection){return this}if((!e||e.length===0)&&t){this._bSupressShapeChangeEvent=false;this.oSelection.clear(true);return this}var i=this._bSupressShapeChangeEvent;this._bSupressShapeChangeEvent=true;if(t){this.oSelection.clear(false);this.getSelection().clearAllSelectedShapeIds()}else{var a=D.getShapeIdFromShapeUid(e);if(a&&a.length>0){a.forEach(function(e){this.getSelection().clearDeselectionModelById(e)}.bind(this))}}this._bSupressShapeChangeEvent=i;this._updateShapes(e,true);return this};le.prototype._getRowIdPath=function(){return this.getTable().getRowSettingsTemplate().mBindingInfos.rowId.parts[0].path};le.prototype._getShapeIdPath=function(){var e;if(this.getSelectedShapeUid()&&this.getSelectedShapeUid().length>0){var t=D.getShapesWithUid(this.sId,this.getSelectedShapeUid());t.forEach(function(t){if(!e&&t){e=t.getBindingPath("shapeId")}})}else{var i=this.getTable().getRows();i.forEach(function(t){if(!e){var i=t.getAggregation("_settings");if(i){var a=K.getAllNonLazyAggregations(i);var n=Object.keys(a).filter(function(e){return e.indexOf("shapes")===0}).map(function(e){return i.getAggregation(e)||[]});n.forEach(function(t){if(t&&t.length>0&&!e){e=t[0].getBinding("shapeId")&&t[0].getBinding("shapeId").getPath()}})}}})}return e};le.prototype.findAndSelect=function(e,t,i,a){var n=this.findAll(e,t);if(a){if(i){this.searchTxt=[];this.searchProperty=[]}if(this.searchTxt.indexOf(e)===-1){this.searchTxt.push(e)}if(Array.isArray(t)){this.searchProperty.concat(t)}else if(this.searchProperty.indexOf(t)===-1){this.searchProperty.push(t)}}var s=[];this._bDeselectShapes=false;n.forEach(function(e){if(e.rowID||e.shapeID.length>0){if(a){s.push({rowId:e.rowID,Selected:true})}else{e.shapeID.forEach(function(e){s.push({ShapeId:e,Selected:true})})}e.selected=true}});if(i){this.getSelection().clearAllSelectedShapeIds();this.getSelection().updateShape(null,{selected:false,ctrl:false})}if(s.length>0){this.oSelection.updateSelectedShapes(s,i)}};le.prototype.findAndDeselect=function(e,t,i){var a=[];if(e===""){this.getSelection().clearAllSelectedShapeIds();this.getSelection().updateShape(null,{selected:false,ctrl:false});return}var n=this.findAll(e,t);if(i){this.deSelectTxt=e;this.deSelectProperty=t;if(this.searchTxt.indexOf(e)!==-1){this.searchTxt.splice(this.searchTxt.indexOf(e),1)}if(this.searchProperty.indexOf(t)!==-1){this.searchProperty.splice(this.searchTxt.indexOf(e),1)}}n.forEach(function(e){if(e.rowID||e.shapeID.length>0){if(i){a.push({rowId:e.rowID,Selected:false})}else{e.shapeID.forEach(function(e){a.push({ShapeId:e,Selected:false})})}e.selected=false}});if(a.length>0){this.oSelection.updateSelectedShapes(a,false)}};le.prototype.findAll=function(t,i){var a=[],n=this.getTable().getBinding().getModel().oData,s=this.getFindByOperator(),o={},r=this.getTable().getBinding().sPath.split("/")[1],l=this.getTable().getBinding().mParameters?this.getTable().getBinding().mParameters.arrayNames:null,h=[],p=[],g,d=this.getTable().getRowSettingsTemplate().mBindingInfos.rowId.parts[0].path,u=this._getShapeIdPath(),c={},f=false;this.pathList={};this.pathList[r]={};this._iNodesLength=0;this._getAllBindingPaths(this.pathList[r],this.getTable().getRowSettingsTemplate());if(!this._aAllShapesFormatters){this._aAllShapesFormatters=[];var S=this.getTable().getRowSettingsTemplate();this._getAllFormatters(S);this._aAllShapesFormatters.forEach(function(e,t){this._aAllShapesFormatters.forEach(function(i,a){if(t!==a){var n=JSON.stringify(e.parts);var s=JSON.stringify(i.parts);if(e.formatter.name===i.formatter.name&&n===s){this._aAllShapesFormatters.splice(a,1)}}}.bind(this))}.bind(this))}Object.keys(n).filter(function(e){if(e.startsWith(r)){return true}}).forEach(function(e){var t=Object.assign({},n[e]);this._iNodesLength++;if(l&&l.length>0){l.forEach(function(e){if(t[e]){y.call(this,t[e],e)}}.bind(this))}else if(Array.isArray(t)){t.forEach(function(e){this._iNodesLength++;e.ganttShapeRelated=[];h.push(e)}.bind(this))}else{t.ganttShapeRelated=[];h.push(t)}}.bind(this));if(l&&l.length>0){var m=this.pathList[r];Object.keys(m).forEach(function(e){p.forEach(function(t){if(t[e]&&t[e].length>0){var i=t[d];b(t[e],i,m[e]);h=h.concat(t[e])}})});d=g}else{v(h,this.pathList)}P.call(this,h);Object.keys(o).forEach(function(e){if(e.toLowerCase().includes(t.toString().toLowerCase())){o[e].forEach(function(e){if(e.findAndSelectData.rowID&&e.findAndSelectData.shapeID.length>0){var t=JSON.parse(JSON.stringify(e.findAndSelectData));t.isExpandable=e.isExpandable;t.isParent=e.showParentRowOnExpand;a.push(t);f=true}})}});if(a.length===0){A(this)}if(f){a=a.filter(function(e){var t;if(c.hasOwnProperty(e.shapeID[0])){t=c[e.shapeID[0]];t.sMatchedValue=t.sMatchedValue+", "+e.sMatchedValue;return false}c[e.shapeID[0]]=e;return true})}return a;function y(e,t){e.forEach(function(e){this._iNodesLength++;if(e.hasOwnProperty(t)){y.call(this,e[t],t)}p.push(e)}.bind(this))}function b(e,t,i){e.forEach(function(e){g="row_"+u;e[g]=t;e["shapeIDPath"]=e[i["shapeIDPath"]];if(i.expandable){e.isExpandable=i.expandable}if(i.showParentRowOnExpand!==undefined&&typeof i.showParentRowOnExpand==="boolean"){e.showParentRowOnExpand=i.showParentRowOnExpand}})}function T(e,i){return e[i]!==undefined&&e[i]!==null&&e[i].toString().toLowerCase().indexOf(t.toString().toLowerCase())!==-1}function _(e,t,i){var a=JSON.parse(JSON.stringify(n[i]));t.shapeIDPath.forEach(function(e){if(a[e]){a.shapeIDPath=a[e]}});if(t.expandable){a.isExpandable=t.expandable}if(t.showParentRowOnExpand!==undefined&&typeof t.showParentRowOnExpand==="boolean"){a.showParentRowOnExpand=t.showParentRowOnExpand}if(!e.ganttShapeRelated){e.ganttShapeRelated=[]}e.ganttShapeRelated.push(a)}function v(e,t){e.forEach(function(e){var i=JSON.parse(JSON.stringify(t)),a=Object.keys(i);if(!a.includes("expandable")&&!a.includes("showParentRowOnExpand")){e.showParentRowOnExpand=false}while(i&&a.length>0){var n=true,s=["shapeIDPath","showParentRowOnExpand","expandable"];for(var o=0;o<a.length;o++){if(!s.includes(a[o])){n=false;if(e[i[a[o]].shapeIDPath]){e.shapeIDPath=e[i[a[o]].shapeIDPath]}if(e[a[o]]&&e[a[o]].__list){e[a[o]].__list.forEach(_.bind(null,e,i[a[o]]))}i=JSON.parse(JSON.stringify(i[a[o]]));a=Object.keys(i);if(i&&Object.keys(i).length>0&&e.ganttShapeRelated&&e.ganttShapeRelated.length>0){v(e.ganttShapeRelated,i)}}}if(n){i={};a=Object.keys(i)}}})}function E(t,a){var n=false;a.sMatchedValue="";a.oMatchedValue={};if(s===e.simple.findByOperator.AND){n=true;i.forEach(function(e){if(!n){return}if(!T(t,e)){n=false}else{a.sMatchedValue=a.sMatchedValue.concat(t[e]+" ");a.oMatchedValue[e]=t[e]}})}else if(s===e.simple.findByOperator.OR){i.forEach(function(e){if(T(t,e)){n=true;a.sMatchedValue=a.sMatchedValue.concat(t[e]+" ");a.oMatchedValue[e]=t[e]}})}if(n){return t}}function x(e,t){var a=false;t.sMatchedValue="";t.oMatchedValue={};if(T(e,i)){a=true;t.sMatchedValue=t.sMatchedValue.concat(e[i]+" ");t.oMatchedValue[i]=e[i]}if(a){return e}}function w(e,t,i){e.forEach(function(e){C(e,t,i)});return t}function C(e,t,i){if(e[d]){t.rowID=e[d]}Object.keys(e).forEach(function(n){if(n==="ganttShapeRelated"){t=w(e[n],t,i)}else if(T(e,n)){if((e[u]||e.shapeIDPath)&&!t.shapeID.includes(e[u]||e.shapeIDPath)){t.shapeID.push(e[u]||e.shapeIDPath);t.startTime=e[i._startTimePath];t.sMatchedValue=t.sMatchedValue.concat(e[n]+" ");t.oMatchedValue[n]=e[n];var s=JSON.parse(JSON.stringify(t));if(e.isExpandable){s.isExpandable=e.isExpandable}if(e.showParentRowOnExpand!==undefined&&typeof e.showParentRowOnExpand==="boolean"){s.isParent=e.showParentRowOnExpand}s.shapeID=[e[u]||e.shapeIDPath];s.sMatchedValue=e[n];s.data=e;a.push(s)}}});return t}function D(e,t,i){if(e[d]){t.rowID=e[d]}var n=E(e,t);if(n&&(n[u]||n.shapeIDPath)&&!t.shapeID.includes(n[u]||n.shapeIDPath)){t.shapeID.push(n[u]||n.shapeIDPath);t.startTime=n[i._startTimePath];var s=JSON.parse(JSON.stringify(t));if(n.isExpandable){s.isExpandable=n.isExpandable}if(n.showParentRowOnExpand!==undefined&&typeof n.showParentRowOnExpand==="boolean"){s.isParent=n.showParentRowOnExpand}s.shapeID=[n[u]||n.shapeIDPath];s.data=n;a.push(s)}if(e.ganttShapeRelated&&e.ganttShapeRelated.length>0){e.ganttShapeRelated.forEach(function(e){t=D(e,t,i)})}return t}function R(e,t,i){if(e[d]){t.rowID=e[d]}var n=x(e,t);if(n&&(n[u]||n.shapeIDPath)&&!t.shapeID.includes(n[u]||n.shapeIDPath)){t.shapeID.push(n[u]||n.shapeIDPath);t.startTime=n[i._startTimePath];if(n.isExpandable){t.isExpandable=n.isExpandable}if(n.showParentRowOnExpand!==undefined&&typeof n.showParentRowOnExpand==="boolean"){t.isParent=n.showParentRowOnExpand}t.data=n;a.push(t)}if(e.ganttShapeRelated&&e.ganttShapeRelated.length>0){e.ganttShapeRelated.forEach(function(e){t=R(e,t,i)})}return t}function A(e){h.forEach(function(t){var a={rowID:"",shapeID:[],sMatchedValue:"",startTime:null,isExpandable:false,oMatchedValue:{}};if(Array.isArray(i)&&i.length>0){a=D(t,a,e)}else if(typeof i==="string"&&i!==""){a=R(t,a,e)}else{a=C(t,a,e)}})}function P(e){e.forEach(function(e){var t=JSON.parse(JSON.stringify(e)),a={rowID:"",shapeID:[],sMatchedValue:"",startTime:null,isExpandable:false,data:e};if(t[d]){a.rowID=t[d]}if(t[this._startTimePath]){a.startTime=t[this._startTimePath]}if(t.shapeIDPath){a.shapeID.push(t.shapeIDPath)}this._aAllShapesFormatters.forEach(function(e){var n=true,s=[];e.parts.forEach(function(e){var a=e.path.split("/")[0];if(i&&i.length>0&&i.indexOf(a)===-1){n=false}else if(e.model!=="i18n"&&!t[a]){n=false}else if(e.model==="i18n"){s.push(this.getModel("i18n").getResourceBundle().getText(a))}else{var o=new Date(t[a]);if(o.toString()!=="Invalid Date"){t[a]=o;s.push(t[a])}else{s.push(t[a])}}}.bind(this));if(n){var r=e.formatter.apply(null,s);if(r!==undefined){if(!o[r.toString()]){o[r.toString()]=[]}a.sMatchedValue=a.sMatchedValue.concat(r.toString()+" ");t.findAndSelectData=a;o[r.toString()].push(t)}}}.bind(this));if(t.ganttShapeRelated&&t.ganttShapeRelated.length>0){P.call(this,t.ganttShapeRelated,a)}}.bind(this))}};le.prototype._getAllBindingPaths=function(e,t,i){var a=t.mBindingInfos,n=t.mAggregations;if(a){for(var s in a){if(s.toLowerCase().indexOf("calendars")===-1&&s.toLowerCase()!=="relationships"){var o=a[s];if(s==="shapeId"){if(e.shapeIDPath){if(!e.shapeIDPath.includes(o.parts[0].path)){e.shapeIDPath.push(o.parts[0].path)}}else{e.shapeIDPath=[o.parts[0].path]}}if(o.path){var r=o.template.mBindingInfos.shapeId&&o.template.mBindingInfos.shapeId.parts[0].path;if(!e[o.path]){e[o.path]={shapeIDPath:[]}}if(r&&!e[o.path].shapeIDPath.includes(r)){e[o.path].shapeIDPath.push(r)}if(o.template&&o.template.getExpandable()){e[o.path].expandable=o.template&&o.template.getExpandable()}if(i){e[o.path].expandable=i}else{e[o.path].showParentRowOnExpand=this.getShowParentRowOnExpand()}this._getAllBindingPaths(e[o.path],o.template,o.template.getExpandable())}}}}if(n){var l=function(t){if(!t.isA||t.isA("sap.gantt.simple.BaseShape")&&!t.isA("sap.gantt.simple.UtilizationChart")){this._getAllBindingPaths(e,t)}};for(var h in n){var p=n[h];if(Array.isArray(p)){p.forEach(l.bind(this))}else if(p.isA&&p.isA("sap.gantt.simple.BaseShape")&&!p.isA("sap.gantt.simple.UtilizationChart")){this._getAllBindingPaths(e,p)}}}if(!n&&!a){return false}return true};le.prototype._hasTimeContinuousShapes=function(e){var t=e.mBindingInfos,i=e.mAggregations;if(t){for(var a in t){if(a.toLowerCase().indexOf("calendars")===-1&&a.toLowerCase()!=="relationships"){var n=t[a],s=n.template;if(s){if(s.isA&&s.isA("sap.gantt.simple.BaseShape")&&s.isA("sap.gantt.simple.UtilizationChart")){this._bTimeContinuousShapes=true;return}if(!this._bTimeContinuousShapes){this._hasTimeContinuousShapes(s)}}}}}if(i){var o=function(e){if(e.isA&&e.isA("sap.gantt.simple.BaseShape")&&e.isA("sap.gantt.simple.UtilizationChart")){this._bTimeContinuousShapes=true;return}if(!this._bTimeContinuousShapes){this._hasTimeContinuousShapes(e)}};for(var r in i){var l=i[r];if(Array.isArray(l)){l.forEach(o.bind(this))}else if(l.isA&&l.isA("sap.gantt.simple.BaseShape")&&l.isA("sap.gantt.simple.UtilizationChart")){this._bTimeContinuousShapes=true;return}else if(!this._bTimeContinuousShapes&&l.isA&&l.isA("sap.gantt.simple.BaseShape")&&!l.isA("sap.gantt.simple.UtilizationChart")){this._hasTimeContinuousShapes(l)}}}};le.prototype._getAllFormatters=function(e){var t=e.mBindingInfos,i=e.mAggregations;if(t){for(var a in t){if(a.toLowerCase().indexOf("calendars")===-1&&a.toLowerCase()!=="relationships"){var n=t[a];if(a==="time"){this._startTimePath=n.parts[0].path}if(n.template){this._getAllFormatters(n.template)}else{var s=this._getAllFormatters(n);if(!s&&n.formatter){this._aAllShapesFormatters.push({formatter:n.formatter,parts:n.parts})}}}}}if(i){for(var o in i){var r=i[o];if(Array.isArray(r)){r.forEach(function(e){this._getAllFormatters(e)}.bind(this))}else if(r.isA&&r.isA("sap.gantt.simple.BaseShape")){this._getAllFormatters(r)}}}if(!i&&!t){return false}return true};le.prototype.deselectShapes=function(e){if(!this.oSelection||!e||e.length===0){return this}this._updateShapes(e,false);return this};le.prototype._updateShapes=function(e,t){var i={};var a=D.getShapesWithUid(this.getId(),e);for(var n=0;n<e.length;n++){i[e[n]]={selected:t,ctrl:false};if(a[n]){i.draggable=a[n].getDraggable();i.time=a[n].getTime();i.endTime=a[n].getEndTime()}}this.oSelection.updateShapes(i)};le.prototype._onSelectionChanged=function(e){var t=e.getParameter("shapeUid"),i=e.getParameter("deselectedUid"),a=e.getParameter("silent"),n=e.getParameter("deSelectAll");this._updateShapeSelections(t,i,n);if((!a||this._bDeselectShapes)&&!this._bSupressShapeChangeEvent){this.fireShapeSelectionChange({shapeUids:t})}};le.prototype._onHighlightChanged=function(e){var t=e.getParameter("shapeUid"),i=e.getParameter("deEmphasizedUid"),a=e.getParameter("silent"),n=e.getParameter("deEmphasizeAll");this.updateShapeHighlights(t,i,n);if((!a||this._bDeselectShapes)&&!this._bSupressShapeChangeEvent){this.fireShapeHighlightChange({shapeUids:t})}};le.prototype.setTimeForGroupShape=function(e){var t,i;function a(e){if(!t&&!i){t=e.getTime();i=e.getEndTime()}else{if(e.getTime()>=t){t=t}else{t=e.getTime()}if(e.getEndTime()>=i){i=e.getEndTime()}else{i=i}}}if(e instanceof sap.gantt.simple.BaseConditionalShape){var n=e._getActiveShapeElement();if(n instanceof sap.gantt.simple.BaseGroup){n.getShapes().forEach(function(e){a(e)});e.setTime(t);e.setEndTime(i)}else if(n){t=n.getTime();i=n.getEndTime();e.setTime(t);e.setEndTime(i)}}else if(e instanceof sap.gantt.simple.BaseGroup&&!(e.getTime()&&e.getEndTime())){e.getShapes().forEach(function(e){a(e)});e.setTime(t);e.setEndTime(i)}return e};le.prototype.handleShapePress=function(t){var i=t.shape,a=i.getShapeUid(),n=t.ctrlOrMeta,s=this._getDragDropExtension();var o=!i.getSelected();if(s.shapeSelectedOnMouseDown&&!s.initiallySelected&&!this.getEnableSelectAndDrag()){o=s.shapeSelectedOnMouseDown}this.setTimeForGroupShape(i);var r=this.getShapeSelectionMode();if(r!==e.SelectionMode.Multiple&&r!==e.SelectionMode.MultipleWithLasso&&!n){this.oSelection.clearAllSelectedShapeIds();this.searchTxt=[];this.searchProperty=[]}else{var l=D.getShapeIdFromShapeUid([a]);if(l&&l.length>0){l.forEach(function(e){this.getSelection().clearDeselectionModelById(e)}.bind(this))}}this.oSelection.updateShape(a,{selected:o,ctrl:n,draggable:i.getDraggable(),time:i.getTime(),endTime:i.getEndTime()});s.shapeSelectedOnMouseDown=false};le.prototype.handleShapeMouseEnter=function(e){if(!this.getEnableSelectAndDrag()){var t=e.shape,i=this._getResizeExtension();if(!t.getSelected()){i.addResizerOnMouseOver(t)}var a=this._getDragDropExtension();if(t.getDraggable()){a.updateCursorStyle("move")}}};le.prototype.handleShapeMouseLeave=function(e){if(!this.getEnableSelectAndDrag()){var t=this._getDragDropExtension();t.updateCursorStyle("default")}};le.prototype._updateShapeSelections=function(t,i,a){var n=this.getShapeSelectionMode();if(n===e.SelectionMode.None){return}if(this.oSelection.getSelectedShapeIDS().length>0||this.oSelection.getSelectedRowIDS().length>0||this.oSelection.getDeSelectedShapeIDS().length>0||this.oSelection.getDeSelectedRowIDS().length>0){R.updateShapeSelectionByShapeID(this,a)}R.updateShapeSelections(this,this.getSelection().allUid(),i)};le.prototype.updateShapeHighlights=function(e,t){if(this.oHighlight.getHighlightedShapeID().length>0||this.oHighlight.getDeEmphasizedShapeID().length>0){R.updateShapeHighlightByShapeID(this,t)}R.updateShapeHighlights(this,this.getHighlight().allUid(),e)};le.prototype._updateVsbContainers=function(){if(this.getParent().isA("sap.gantt.simple.GanttChartContainer")&&this.getParent().getGanttCharts().length>1){var e=this.getParent().getGanttCharts();var t=false;var i,a,n;for(i=0;i<e.length;i++){a=e[i];n=a.getTable()._getScrollExtension().getVerticalScrollbar();if(n&&!n.parentElement.classList.contains("sapUiTableHidden")){t=true;break}}if(t){for(i=0;i<e.length;i++){a=e[i];n=a.getTable()._getScrollExtension().getVerticalScrollbar();if(n){var s=n.parentElement.classList,o=n.classList;if(s.contains("sapUiTableHidden")){s.add("sapGanttTableVerticalScrollBarContainer");o.add("sapGanttTableVerticalScrollBar")}else{s.remove("sapGanttTableVerticalScrollBarContainer");o.remove("sapGanttTableVerticalScrollBar")}}}}else{for(i=0;i<e.length;i++){a=e[i];n=a.getTable()._getScrollExtension().getVerticalScrollbar();var s=n.parentElement.classList,o=n.classList;if(n){s.remove("sapGanttTableVerticalScrollBarContainer");o.remove("sapGanttTableVerticalScrollBar")}}}}};le.prototype.getSelection=function(){return this.oSelection};le.prototype.getHighlight=function(){return this.oHighlight};le.prototype.getExpandedBackgroundData=function(){if(this._oExpandModel.hasExpandedRows()){var e=this.getTable().getRows();var t=e.length;var i=this.getTable().getFirstVisibleRow();var a=[];for(var n=0;n<t;n++){if(e[n].getIndex()>=i){var s=e[n].getAggregation("_settings");a.push(s.getRowUid())}}return this._oExpandModel.collectExpandedBgData(a,this.getExpandedRowHeight(),this.getShowParentRowOnExpand()&&!this.getUseParentShapeOnExpand())}};le.prototype.setAxisTimeStrategy=function(e){e.attachEvent("_redrawRequest",this._onRedrawRequest,this);delete this._bPreventInitialRender;return this.setAggregation("axisTimeStrategy",e,false)};le.prototype._addChangesToControlPersonalizationWriteAPI=function(e,t){var i=this.getParent();var a=i.isA("sap.gantt.simple.GanttChartContainer");var n=a&&i.getEnableVariantManagement()||this.getProperty("_enableRTA");if(!e.bPreventDefault&&n){X.add({changes:t})}};le.prototype._onTableFilter=function(e){var t=[{selectorElement:e.mParameters.column,changeSpecificData:{changeType:"TableColumnFilterValue",content:{propertyName:"filterValue",newValue:e.mParameters.value,oldValue:""}}}];this._addChangesToControlPersonalizationWriteAPI(e,t)};le.prototype._onTableSorter=function(e){var t=e.getParameter("column");var i=t.getParent();var a=[];i.getColumns().forEach(function(e){if(e!==t){a.push(e.getId())}});var n=[{selectorElement:t,changeSpecificData:{changeType:"TableColumnSortOrder",content:{propertyName:"sortOrder",newValue:e.getParameter("sortOrder"),oldValue:t.getSortOrder(),affectedControls:a}}}];this._addChangesToControlPersonalizationWriteAPI(e,n)};le.prototype._onColumnVisible=function(e){var t=e.mParameters.newVisible;var i=[{selectorElement:e.mParameters.column,changeSpecificData:{changeType:"TableColumnVisibility",content:{propertyName:"visible",newValue:t,oldValue:!t}}}];this._addChangesToControlPersonalizationWriteAPI(e,i)};le.prototype._onTableColumnMove=function(e){var t=e.getSource().getAggregation("columns").map(function(e){return e.getId()});var i=e.getParameter("column").getIndex();var a=e.getParameter("newPos");var n=Array.from(new Set(t));var s=D.arrayMove(n,i,a);var o=[];s.forEach(function(t,i){var a=e.getSource().getAggregation("columns").find(function(e){return e.getId()===t});o.push(a.getId())});var r=[];r.push({selectorElement:this.getTable(),changeSpecificData:{changeType:"GanttTableColumnOrder",content:{aggregationName:"columns",newValue:o,oldValue:t}}});this._addChangesToControlPersonalizationWriteAPI(e,r)};le.prototype._onTableSettingsChanged=function(e){this._bRowActionInitialRender=false};le.prototype._onTableRowsUpdated=function(e){if(!this.getVisible()){return}var t=e.getParameter("reason"),i=this.getInnerGantt(),a=e.getSource();this._invalidateRowActionTemplate(a,t);var o=s(n).slice();var r=o.concat(["Render","FirstVisibleRowChange","Resize"]);if(r.indexOf(t)!==-1){this.getSyncedControl().setAllowContentScroll(false);this._oInnerGanttRenderPromiseResolve()}else if(t==="VerticalScroll"){var l=this._getDragDropExtension();if(l._bEnableRowHighlight&&l.isDragging()){l.getShapeDndRowHighlightIndex(this);this.toggleDnDRowHighlight(true)}}else{i.getRenderer().renderImmediately(this)}};le.prototype.syncVisibleHorizon=function(e,t,i,a){var n=this.getAxisTimeStrategy();var s=n.getTotalHorizon();var o;var r=this.getVisibleWidth();if(t!==undefined){if(r===undefined){return}if(i){var l=n.getVisibleHorizon();var h=A.abapTimestampToDate(l.getStartTime());o=P.calculateHorizonByWidth(e,t,r,h)}else{o=P.calculateHorizonByWidth(e,t,r)}}else{o=e}if(s.getEndTime()<o.getEndTime()){var p=A.abapTimestampToDate(o.getEndTime()).getTime()-A.abapTimestampToDate(o.getStartTime()).getTime();var g=A.abapTimestampToDate(s.getEndTime());var d=new Date;d.setTime(g.getTime()-p);o=new I({startTime:d,endTime:g})}this._updateVisibleHorizon(o,a||"syncVisibleHorizon",r)};le.prototype._updateVisibleHorizon=function(e,t,i){var a=this.getAxisTimeStrategy();a.updateGanttVisibleWidth(i);if(t==="initialRender"){if(!a.isA("sap.gantt.axistime.StepwiseZoomStrategy")){a.calZoomBase()}a.createAxisTime(a.getLocale())}if(e&&(e.getStartTime()||e.getEndTime())){a.setVisibleHorizonWithReason(e,t)}};le.prototype.syncMouseWheelZoom=function(e){this._getZoomExtension().performMouseWheelZooming(e.originEvent,true)};le.prototype.syncTimePeriodZoomOperation=function(e,t,i){this._getZoomExtension().syncTimePeriodZoomOperation(e,t,i)};le.prototype._onRedrawRequest=function(e){var t=e.getParameter("valueBeforeChange");var i=e.getParameter("reasonCode");var a=e.getParameter("subReasonCode");if(t&&i!=="totalHorizonUpdated"&&i!=="initialRender"&&i!=="syncVisibleHorizon"){this._syncContainerGanttCharts(i,e.getParameter("originEvent"))}if(this._sPreviousDisplayType!==this.getDisplayType()){this._isDisplayTypeChanged=true}else{this._isDisplayTypeChanged=false}var n,s,o,r;if(i!=="initialRender"){s=this.getRenderedTimeRange();n=new I({startTime:s[0],endTime:s[1]})}this.redraw(i);this._setupDisplayType();r=this.getRenderedTimeRange();o=new I({startTime:r[0],endTime:r[1]});this.fireVisibleHorizonUpdate({type:ie[i],subType:a?ee[a]:ee.NotApplicable,lastVisibleHorizon:t,currentVisibleHorizon:this.getAxisTimeStrategy().getVisibleHorizon(),lastRenderedVisibleHorizon:n?n:o,currentRenderedVisibleHorizon:o})};le.prototype.redraw=function(e){this._draw(e)};le.prototype._draw=function(e){if(this.getDisplayType()===Q.Table&&!this.isPrint){var t=K.getAllNonLazyAggregations(this.getParent());if(this.getParent().isA("sap.gantt.simple.GanttChartContainer")&&t.toolbar){this.getParent().getToolbar().updateZoomLevel(this.getAxisTimeStrategy().getZoomLevel())}}else{var i=this._iLastVisibleWidth?this._iLastVisibleWidth:this.getVisibleWidth();if(!i){return}var a=this.getAxisTimeStrategy().syncContext(i);if(this.getAxisTimeStrategy().initialSettings!=null&&this.getAxisTimeStrategy().initialSettings.zoomLevel!=null&&this.getAxisTimeStrategy().initialSettings.zoomLevel!=0&&e=="initialRender"&&!this.getAxisTimeStrategy().isA("sap.gantt.axistime.FullScreenStrategy")&&!this.isPrint&&this.getParent().isA("sap.gantt.simple.GanttChartContainer")&&!this.getParent().isZoomLevelUpdated){var n=this.getAxisTimeStrategy();var s=n.initialSettings.zoomLevel;n.setProperty("zoomLevel",s,true);a.zoomLevel=s;var o=n.calVisibleHorizonByRate(n._aZoomRate[s]);n.updateInitialVisibleHorizon(o,s);this.getParent().isZoomLevelUpdated=true}this.fireEvent("_zoomInfoUpdated",a);this._iLastVisibleWidth=null;var r=this._getScrollExtension();if(a.axisTimeChanged){r.clearOffsetWidth()}r.needRerenderGantt(function(){this.getInnerGantt().getRenderer().renderImmediately(this)}.bind(this),e)}};le.prototype._syncContainerGanttCharts=function(e,t){var i=this.getParent();if(i&&i.isA("sap.gantt.simple.GanttChartContainer")&&i.getGanttCharts().length>1){this.fireEvent("_initialRenderGanttChartsSync",{reasonCode:e,visibleHorizon:this.getAxisTimeStrategy().getVisibleHorizon(),visibleWidth:this.getVisibleWidth(),originEvent:t})}};le.prototype.onBeforeRendering=function(e){this._updateRowHeightInExpandModel(this.getTable());y.detachEvents(this);this._oSplitter.detachResize(this.onSplitterResize,this);if(this._sResizeHandlerId){l.deregister(this._sResizeHandlerId)}if(this.getDisplayType()!==Q.Table){if(this._bPreventInitialRender){delete this._bPreventInitialRender}this.getInnerGantt().invalidate()}var t=this.getTable();if(this.getShowExportTableToExcel()&&!this._enableOptimisation&&this.getShowGanttHeader()){if(this.oExportTableToExcelButton==null){this.oExportTableToExcelButton=new W(this.getId()+"-exportTableToExcelButton",{icon:"sap-icon://excel-attachment",tooltip:ae.getText("EXPORT_BUTTON_TEXT"),type:sap.m.ButtonType.Transparent,buttonMode:sap.m.MenuButtonMode.Split,useDefaultActionOnly:true,defaultAction:[function(){this._exportTableToExcel()},this],menu:[new F({items:[new k({text:ae.getText("QUICK_EXPORT"),press:[function(){this._exportTableToExcel()},this]}),new k({text:ae.getText("EXPORT_WITH_SETTINGS"),press:[function(){this._createExportDialogBox()},this]})]})]})}D.addToolbarToTable(this,t,true)}else if(!this.getShowExportTableToExcel()&&(t.getExtension().length>0&&!(t.getExtension()[0].getContent().indexOf(this.oExportTableToExcelButton)===-1))){if(t.getExtension()[0].getContent().length==1){t.removeExtension(t.getExtension()[0])}else if(t.getExtension()[0].getContent().length>1){t.getExtension()[0].removeContent(this.oExportTableToExcelButton)}}this._invalidateRowActionTemplate(t)};le.prototype._invalidateRowActionTemplate=function(e,t){var i=e.getRowActionTemplate();if(i&&i.isA("sap.gantt.simple.GanttRowAction")&&i.getControlTemplate()){if(!this._bRowActionInitialRender&&t==="Render"){this._bRowActionInitialRender=true;i.invalidate()}else if(t==="Unbind"){this._bRowActionInitialRender=false}else if(t!=="Render"&&t!=="Unbind"){i.invalidate()}}};le.prototype.fullScreenMode=function(){if(this._bFullScreen){return true}else{return false}};le.prototype.toggleFullScreen=function(e,t){var i;var a=this.getParent();if(!a.isA("sap.gantt.simple.GanttChartContainer")){return null}if(!a._oFullScreenUtil){a._oFullScreenUtil=h}if(this._bFullScreen){this._bFullScreen=false;a._bHideToolbar=false;a._bHideVariant=false;a.setHeight(this._fContainerHeight);for(var n in this._mGanttCharts){a.insertGanttChart(this._mGanttCharts[n],n)}i=a.getGanttCharts();var s=a.getEnableTimeScrollSync();var o=this.getAxisTimeStrategy().getVisibleHorizon();var r=this.getAxisTimeStrategy().getZoomLevel();i.forEach(function(e,t){if(s){e.getAxisTimeStrategy().getVisibleHorizon().setStartTime(o.getStartTime());e.getAxisTimeStrategy().getVisibleHorizon().setEndTime(o.getEndTime());e.getAxisTimeStrategy().setProperty("zoomLevel",r,true)}else if(e.getId()!==this.getId()){e.getAxisTimeStrategy().getVisibleHorizon().setStartTime(this._aVisibleHorizons[t].startTime);e.getAxisTimeStrategy().getVisibleHorizon().setEndTime(this._aVisibleHorizons[t].endTime)}a._oSplitter.getContentAreas()[t].getLayoutData().setSize(this._aSplitterLayoutSizes[t])}.bind(this));this._bRenderFullScreenGantt=true;a._oFullScreenUtil.toggleFullScreen(a,false,t,this.toggleFullScreen)}else{this._bFullScreen=true;i=a.getGanttCharts();this._aSplitterLayoutSizes=[];this._mGanttCharts={};this._aVisibleHorizons=[];i.forEach(function(e,t){this._aSplitterLayoutSizes.push(a._oSplitter.getContentAreas()[t].getLayoutData().getSize());this._aVisibleHorizons.push({startTime:e.getAxisTimeStrategy().getVisibleHorizon().getStartTime(),endTime:e.getAxisTimeStrategy().getVisibleHorizon().getEndTime()});if(e.getId()!==this.getId()){this._mGanttCharts[t]=e}}.bind(this));i.forEach(function(e){if(e.getId()!==this.getId()){a.removeGanttChart(e)}}.bind(this));a._bHideToolbar=!e;a._bHideVariant=true;this._fContainerHeight=a.getHeight();a.setHeight(window.innerHeight+"px");this._bRenderFullScreenGantt=true;a._oFullScreenUtil.toggleFullScreen(a,true,t,this.toggleFullScreen)}a.updateSearch()};le.prototype.onAfterRendering=function(e){this._attachExtensions();y.attachEvents(this);this._oSplitter.attachResize(this.onSplitterResize,this);this._sResizeHandlerId=l.register(this,this._onResize.bind(this));if((this.mProperties.hasOwnProperty("height")||this.getParent()&&this.getParent().mProperties.hasOwnProperty("height"))&&!this._enableOptimisation){this.getTable().setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);this.getTable().setMinAutoRowCount(1)}};le.prototype._onResize=function(e){if(this.getDisplayType()!==Q.Both){return}var t=this.getAggregation("_splitter");this._sPreviousDisplayType=this.getDisplayType();if(this._sPreviousDisplayType===Q.Both){this._iLastTableAreaSize=this.getAggregation("_splitter").getContentAreas()[0]&&this.getAggregation("_splitter").getContentAreas()[0].getLayoutData().getSize()}if(t.getContentAreas()[0]&&t.getContentAreas()[0].getLayoutData()){var i=t.getContentAreas()[0],a=i.getLayoutData(),n=this.getDomRef().offsetWidth,s;if(n>0&&n<se*2){s=n/2;s=s+"px"}else{var o=i.getDomRef().offsetWidth;if(o>se){return}if(this.getSelectionPanelSize()!=null&&o==0&&e!=true){s=this.getSelectionPanelSize()}else{s=Math.max(Math.min(o,n-se),Math.max(.3*n,se));s=s+"px"}}a.setSize(s)}};le.prototype._setupDisplayType=function(){var e=this.getDisplayType();this._isDisplayTypeChanged=true;if(e===Q.Table){var t=this.getSyncedControl().$().find(".sapGanttBackgroundVScrollContentArea").width();if(t!==null){this._setSplitterLayoutData("auto",t+"px")}}else if(e===Q.Chart){this._setSplitterLayoutData("0px","auto")}else if(e!==this._sPreviousDisplayType){this._setSplitterLayoutData(this._iLastTableAreaSize?this._iLastTableAreaSize:this.getSelectionPanelSize(),"auto")}};le.prototype._setSplitterLayoutData=function(e,t){var i=this._oSplitter.getContentAreas();if(i.length>1){var a=i[0].getLayoutData(),n=i[1].getLayoutData(),s=this.getDisplayType()===Q.Both;a.setSize(e).setResizable(s);n.setSize(t).setResizable(s)}};le.prototype._updateRowHeightInExpandModel=function(e){var t=Math.ceil(e.getRowHeight());if(t===0){t=Math.ceil(e._getDefaultRowHeight())}this._oExpandModel.setBaseRowHeight(t)};le.prototype.jumpToPosition=function(e){if(Object.prototype.toString.call(e)==="[object Date]"||typeof e==="string"){this._updateVisibleHorizon(new I({startTime:e}),"jumpToPosition",this.getVisibleWidth())}else if(Array.isArray(e)){this._updateVisibleHorizon(new I({startTime:e[0],endTime:e[1]}),"jumpToPosition",this.getVisibleWidth())}else if(e===undefined){this._updateVisibleHorizon(this.getAxisTimeStrategy().getTotalHorizon(),"jumpToPosition",this.getVisibleWidth())}};le.prototype.exit=function(){if(this._sResizeHandlerId){l.deregister(this._sResizeHandlerId)}this._detachExtensions();delete this._bPreventInitialRender};le.prototype._attachExtensions=function(){if(this._bExtensionsInitialized){return}y.enrich(this,b);y.enrich(this,T);y.enrich(this,_);y.enrich(this,v);y.enrich(this,E);y.enrich(this,x);y.enrich(this,w);y.enrich(this,C);this._bExtensionsInitialized=true};le.prototype._detachExtensions=function(){y.cleanup(this)};le.prototype.getAxisTime=function(){var e=this.getAxisTimeStrategy().getAxisTime();if(!e){this.getAxisTimeStrategy().createAxisTime(this.getLocale());e=this.getAxisTimeStrategy().getAxisTime()}return e};le.prototype.getContentWidth=function(){var e=this.getAxisTime(),t=e.getViewRange();return Math.abs(Math.ceil(t[1])-Math.ceil(t[0]))-1};le.prototype.getVisibleWidth=function(){return this._getScrollExtension?this._getScrollExtension().getVisibleWidth():undefined};le.prototype.expand=function(e,t){this.toggleShapeScheme(true,e,t);this._aExpandedIndices=this._aExpandedIndices.concat(t);this._aExpandedIndices=Array.from(new Set(this._aExpandedIndices))};le.prototype.collapse=function(e,t){this.toggleShapeScheme(false,e,t);var i=[];i=i.concat(t);this._aExpandedIndices=this._aExpandedIndices.filter(function(e){return i.indexOf(e)==-1})};le.prototype.toggleShapeScheme=function(e,i,a){var n=[];if(typeof a==="number"){n=[a]}else if(Array.isArray(a)){n=a}if(n.length===0||!i){return}var s=this.getShapeSchemes().filter(function(e){return e.getKey()===i});if(s==null||s.length===0||s.length>1){t(false,"shape scheme must not be null or not found in shapeSchemes");return}var o=this.getPrimaryShapeScheme();this._bExpandToggled=this._oExpandModel.isTableRowHeightNeedChange(e,this.getTable(),n,o,s[0]);if(this._bExpandToggled){this._createInnerGanttRenderPromise();this.getTable().invalidate()}};le.prototype.isShapeVisible=function(e){if(e&&e.isVisible()){return true}if(!e.getVisible()){return false}var t=this.getRenderedTimeRange(),i=t[0],a=t[1];var n=e.getTime(),s=e.getEndTime();if(this.getLocale()&&(n&&s)){n=A._convertUTCToLocalTime(n,this.getLocale());s=A._convertUTCToLocalTime(s,this.getLocale())}var o=function(e){return e>=i&&e<=a};if(e.getSelected()||!n||!s){return true}else if(n&&s){return o(n)||o(s)||n<=i&&s>=a}else if(n&&!s){return o(n)}else if(!n&&s){return o(s)}};le.prototype.isCalendarTimeIntervalVisible=function(e){var t=this.getRenderedTimeRange(),i=t[0],a=t[1];if(this.getLocale()&&(n&&s)){n=A._convertUTCToLocalTime(n,this.getLocale());s=A._convertUTCToLocalTime(s,this.getLocale())}else{var n=A.abapTimestampToDate(e.getStartTime()),s=A.abapTimestampToDate(e.getEndTime())}var o=function(e){return e>=i&&e<=a};if(n&&s){return o(n)||o(s)||n<=i&&s>=a}};le.prototype.doBirdEye=function(e){var t=this._getZoomExtension();t.doBirdEye(e)};le.prototype._exportTableToExcel=function(e){var t,i,a,n,s,o;s=this.getTable();if(s){o=s.getBinding(s._sAggregation)}if(o.getModel().isA("sap.ui.model.json.JSONModel")){n=true}t=this._createColumnConfig();var r=o.getModel();i={workbook:{columns:t},fileName:e&&e.fileName?e.fileName:"GanttTableExport.xlsx",worker:false};if(n){i.dataSource=this._createJSONDataSource(s)}else{i.dataSource={type:"odata",dataUrl:o.getDownloadUrl?o.getDownloadUrl():null,serviceUrl:this._sServiceUrl,headers:r.getHeaders?r.getHeaders():null,count:o.getLength?o.getLength():null}}if(s.getColumns()[0].data("exportTableColumnConfig")&&s.getColumns()[0].data("exportTableColumnConfig").hierarchyNodeLevel){i.workbook.hierarchyLevel=s.getColumns()[0].data("exportTableColumnConfig").hierarchyNodeLevel}a=new V(i);a.build().finally(function(){a.destroy()})};le.prototype._createExportDialogBox=function(){this._getExportSettingsViaDialog().then(function(e){this._exportTableToExcel(e)}.bind(this))};le.prototype._getExportSettingsViaDialog=function(e){return new Promise(function(t,a){var n;var s=new N;var o={fileName:"GanttTableExport",fileType:[{key:"xlsx"}],selectedFileType:"xlsx"};s.setData(o);var r=L();n=new O({id:r,title:ae.getText("EXPORT_SETTINGS_TITLE"),content:[new B({renderType:"Bare",width:"100%",items:[new G({text:ae.getText("FILE_NAME"),labelFor:r+"-fileName"}),new M({id:r+"-fileName",value:"{/fileName}",liveChange:function(e){var t=e.getSource();var i=e.getParameter("value");var a=/[\\/:|?"*<>]/;var n=z.byId(r+"-export");var s=a.test(i);if(s){t.setValueState(sap.ui.core.ValueState.Error);t.setValueStateText(ae.getText("FILENAME_ERROR"))}else if(i.length>100){t.setValueState(sap.ui.core.ValueState.Warning);t.setValueStateText(ae.getText("FILENAME_WARNING"))}else{t.setValueState(sap.ui.core.ValueState.None);t.setValueStateText(null)}n.setEnabled(!s)}}).addStyleClass("sapUiTinyMarginBottom")]}).addStyleClass("sapUiExportSettingsLabel")],endButton:new U({id:r+"-cancel",text:ae.getText("CANCEL_BUTTON"),press:function(){n.close()}}),beginButton:new U({id:r+"-export",text:ae.getText("QUICK_EXPORT"),type:sap.m.ButtonType.Emphasized,press:function(){if(n){n._bSuccess=true;n.close();t(s.getData())}}}),afterClose:function(){if(!n._bSuccess){i.warning("sap.gantt.simple.GanttChartWithTable ","Cancel Click on Export to Excel PopOver",this);a(null)}n.destroy();n=null}});n.addStyleClass("sapUiContentPadding sapUiExportSettings");n.setModel(s);n.open();if(e){e(n)}})};le.prototype._createColumnConfig=function(){var e,t,i,a,n,s,o,r,l,h=[],p,g,d;this._oTable=this.getTable();e=this._oTable.getColumns();i=e.length;for(t=0;t<i;t++){o=null;p=null;g=null;d=null;l=null;a=e[t];if(a.getVisible()){n=a.data("exportTableColumnConfig");if(!o&&n){o=n["leadingProperty"]}if(Array.isArray(o)){o=o[0]}if(o){s=this._getColumnLabel(a);r=a.getWidth().toLowerCase()||n.width||"";r=this._getColumnWidthNumber(r);if(n.unitProperty){l=n.isCurrency?sap.ui.export.EdmType.Currency:sap.ui.export.EdmType.Number}else if(n.isDigitSequence){l=sap.ui.export.EdmType.Number}if(!l){switch(n.dataType){case te.Numeric:l=sap.ui.export.EdmType.Number;break;case te.DateTime:l=sap.ui.export.EdmType.DateTime;d=n.displayFormat;break;case te.StringDate:case te.Date:l=sap.ui.export.EdmType.Date;d=n.displayFormat;break;case te.Boolean:l=sap.ui.export.EdmType.Boolean;p="false";g="true";break;case te.String:l=sap.ui.export.EdmType.String;break;case te.Time:l=sap.ui.export.EdmType.Time;break;default:l=sap.ui.export.EdmType.String;break}}h.push({columnId:a.getId(),property:o,type:l,format:d?d:undefined,label:s?s:o,width:r,textAlign:a.getHAlign(),trueValue:l===sap.ui.export.EdmType.Boolean&&g?g:undefined,falseValue:l===sap.ui.export.EdmType.Boolean&&p?p:undefined,unitProperty:l===sap.ui.export.EdmType.Currency||l===sap.ui.export.EdmType.Number?n.unitProperty:undefined,displayUnit:l===sap.ui.export.EdmType.Currency,unit:n.unit?n.unit:undefined,precision:n.precision?n.precision:undefined,scale:n.scale?n.scale:undefined,wrap:n.wrap?n.wrap:false})}}}return h};le.prototype._getColumnLabel=function(e){var t;if(!e){return null}if(e.getLabel){t=e.getLabel()}if(e.getHeader){t=e.getHeader()}return t&&t.getText?t.getText():null};le.prototype._getColumnWidthNumber=function(e){if(e.indexOf("em")>0){return Math.round(parseFloat(e))}if(e.indexOf("px")>0){return Math.round(parseInt(e,10)/16)}return""};le.prototype._createJSONDataSource=function(e){var t,i,a,n=[];t=e.getBinding(e._sAggregation).mParameters.arrayNames[0];i=e.getBinding().sPath;a=e.getModel().getProperty(i);n=this._generateJSONRowData(a[t],t,n);return n};le.prototype._generateJSONRowData=function(e,t,i){if(!e){return[]}if(!i){i=[]}for(var a=0;a<e.length;a++){i.push(e[a]);if(e[a][t]){this._generateJSONRowData(e[a][t],t,i)}}return i};le.prototype.setRowsHeight=function(e){this.oRowsCustomHeight=e;this.getTable().invalidate()};le.prototype.getShapeUids=function(e){var t=[],i=[];var a=this.getTable().getRows();for(var n=0;n<a.length;n++){var s=a[n].getAggregation("_settings");t=t.concat(this._getAllMatchedShapeInRow(s,[],e))}t.forEach(function(e){if(e.getShapeUid()){i.push(e.getShapeUid())}});i=Array.from(new Set(i));return i};le.prototype._getAllMatchedShapeInRow=function(e,t,i){var a=e.getMetadata(),n=a.getAllAggregations(),s=false;Object.keys(n).forEach(function(a){if(a==="calendars"){return}var n=e.getAggregation(a);if(n){n=jQuery.isArray(n)?n:[n];if(n.length>0){n.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){e=e._getActiveShapeElement();if(e instanceof sap.gantt.simple.BaseGroup){s=this._checkBaseGroup(e,"shapes",i);if(s&&e.getShapeUid()){t=t.concat(e)}}else if(this._isShapeMatched(e,i)&&e.getShapeUid()){t=t.concat(e)}}else if(e instanceof sap.gantt.simple.MultiActivityGroup){var a=this._oExpandModel.isRowExpanded(e.getParent().getRowUid());s=this._checkBaseGroup(e,"task",i);if(s&&e.getShapeUid()){if(!(a&&!(this.getShowParentRowOnExpand()&&!this.getUseParentShapeOnExpand()))){t=t.concat(e)}}if(a){t=t.concat(this._getAllMatchedShapeInRow(e,[],i))}}else if(e instanceof sap.gantt.simple.BaseGroup){s=this._checkBaseGroup(e,"shapes",i);if(s&&e.getShapeUid()){t=t.concat(e)}}else if(this._isShapeMatched(e,i)&&e.getShapeUid()){t=t.concat(e)}}.bind(this))}}}.bind(this));return t};le.prototype._checkBaseGroup=function(e,t,i){var a=false;if(this._isShapeMatched(e,i)&&e.getShapeUid()){a=true;return a}var n=e.getAggregation(t);n=jQuery.isArray(n)?n:[n];n.forEach(function(e){if(e instanceof sap.gantt.simple.BaseGroup){a=this._checkBaseGroup(e,"shapes",i)}else if(this._isShapeMatched(e,i)){a=true;return a}}.bind(this));return a};le.prototype._isShapeMatched=function(e,t){if(t&&e instanceof sap.gantt.simple.BaseShape){var i=true;for(var a in t){var n=e.getMetadata(),s=n.getAllProperties();if(s&&s.hasOwnProperty(a)&&i){var o=e.getProperty(a);if(o instanceof Date){o=o.getTime();if(t[a]instanceof Date){t[a]=t[a].getTime()}}else if(typeof o==="string"){o=o.toLowerCase();t[a]=t[a].toLowerCase()}if(typeof o==="object"){i=j(o,t[a])}else if(o!==t[a]){i=false}}else{i=false}}return i}else{return false}};le.prototype.getChartOverflowToolbar=function(){var e;if(this.getEnableChartOverflowToolbar()){e=sap.ui.getCore().byId(this.getId()+"-ganttHeaderOverflowToolbar")}return e};le.prototype.rebindTableRows=function(e){this._createInnerGanttRenderPromise();var t=this.getTable();t.bindRows(e)};le.prototype.setRowSettingsTempWithInvalid=function(e){this._createInnerGanttRenderPromise();this.getTable().invalidate();var t=this.getTable();t.setRowSettingsTemplate(e)};le.prototype._createInnerGanttRenderPromise=function(e){if(!this._oInnerGanttRenderPromise||this._oInnerGanttRenderPromise&&this._bInnerGanttRenderPromiseResolved){this._bInnerGanttRenderPromiseResolved=false;this._oInnerGanttRenderPromise=new Promise(function(e){this._oInnerGanttRenderPromiseResolve=e}.bind(this))}};le.prototype.toggleDnDRowHighlight=function(e){var t=this._getDragDropExtension();var i=document.getElementById(this.getId()+"-svg"),a=i.querySelectorAll("rect.sapGanttBackgroundSVGRow");t.oLastDraggedShapeData._highlightedRowIndex.forEach(function(t){a[t].classList.toggle("sapGanttBackgroundSVGRowHighlighted",e);if(this.getRowHighlightFill()){a[t].style.setProperty("--sapGanttBackgroundSVGRowHighlighted-fill",this.getRowHighlightFill())}if(this.getRowHighlightAndHoverFill()){a[t].style.setProperty("--sapGanttBackgroundSVGRowHighlighted-sapGanttBackgroundSVGRowHovered-fill",this.getRowHighlightAndHoverFill())}}.bind(this))};le.prototype.fireDragStart=function(e){var t=this._getDragDropExtension();if(t._bEnableRowHighlight){this.toggleDnDRowHighlight(true)}this.fireEvent("dragStart",e)};le.prototype.triggerShapeDrop=function(e){var t=this._getDragDropExtension();if(t._bEnableRowHighlight){this.toggleDnDRowHighlight(false)}if(e.dragged){this.fireEvent("shapeDrop",e)}};return le},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttChartWithTableRenderer", ["sap/gantt/library"],function(t){"use strict";var e={apiVersion:2};e.render=function(t,e){this.renderSplitter(t,e)};e.renderSplitter=function(e,a){e.openStart("div",a);e.style("width",a.getWidth());e.style("height",a.getHeight());e.class("sapGanttChartWithSingleTable");if(a.getDisplayType()===t.simple.GanttChartWithTableDisplayType.Chart){e.class("sapGanttChartWithTableShowOnlyChart")}else if(a.getDisplayType()===t.simple.GanttChartWithTableDisplayType.Table){e.class("sapGanttChartWithTableShowOnlyTable")}e.openEnd();var i=a.getAggregation("_splitter");i.getContentAreas()[0].getLayoutData().setSize(a.getSelectionPanelSize());i.triggerResize(true);e.renderControl(i);e.close("div")};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttConnectExtension", ["sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ui/core/Core","sap/gantt/library","./GanttExtension","./CoordinateUtils","./GanttUtils","sap/gantt/misc/Utility"],function(jQuery,t,e,n,o,a,i,s){"use strict";var r=".sapGanttShapeConnect";var h=n.simple.RelationshipType;var c={addEventListeners:function(t){this.removeEventListeners(t);var e=t._getConnectExtension();e.shapeConnectDoms().shapeConnectTriggers.on("mousedown"+r,e.beforeShapeConnect.bind(e))},removeEventListeners:function(t){var e=t._getConnectExtension();e.shapeConnectDoms().shapeConnectTriggers.off(r)},addShapeConnectEventListeners:function(t){this.removeShapeConnectEventListeners(t);var e=t._getConnectExtension();var n=jQuery(document);n.on("mousemove"+r,e.onMousemove.bind(e));n.on("mouseup"+r,e.endShapeConnect.bind(e));n.on("keydown"+r,e.onKeydown.bind(e))},removeShapeConnectEventListeners:function(t){jQuery(document).off(r)}};var p=o.extend("sap.gantt.simple.GanttConnectExtension",{_init:function(t,e){this._initShapeConnectStates();return"ConnectExtension"}});p.prototype.attachShapeConnectEvents=function(){var t=this.getGantt();c.addEventListeners(t);if(this.isShapeConnecting()){c.addShapeConnectEventListeners(t)}};p.prototype._initShapeConnectStates=function(){this.mDom={};this._oStartShape={};this._bShapeConnecting=false;this._oScrollDistance={x:0,y:0};this._bElementConnectable=false};p.prototype.getRlsStartShape=function(){return this._oStartShape};p.prototype.getSvgElement=function(){return this.getDomRefs().ganttSvg};p.prototype._getShapeConnectRootNode=function(){var t=this.shapeConnectDoms().shapeConnect;return d3.select(t.get(0))};p.prototype.setDomSelector=function(){var t=this.shapeConnectDoms();this.mDom.connectLine=t.connectLine;this.mDom.ghostRect=t.shapeConnectGhost};p.prototype.createConnectLine=function(t,e){var n=this.getGantt()._getPointerExtension();var o=e.x+n._getAutoScrollStep();var a={class:"shapeConnectLine",x1:t.x+t.width/2,y1:t.y+t.width/2,x2:o,y2:e.y};if(this.getD3Doms().shapeConnectLine.empty()){var i=this._getShapeConnectRootNode();i.append("line").attr(a)}};p.prototype.createGhostRect=function(t,e){var n=this.getGantt()._getPointerExtension();var o=t.x+n._getAutoScrollStep();var a={class:"shapeConnectGhost",x:o-t.width/2,y:e.y-t.width/2,width:t.width,height:t.width};if(this.getD3Doms().shapeConnectGhost.empty()){var i=this._getShapeConnectRootNode();i.append("rect").attr(a)}};p.prototype.isShapeConnecting=function(){return this._bShapeConnecting};p.prototype.updateShapeConnectEffect=function(t){if(this.isShapeConnecting()){var e=a.getLatestCursorPosition();var n=this.getStartShapeFrame();var o=this.getSvgElement();var i=a.getEventSVGPoint(o,e);this.createConnectLine(n,i);this.createGhostRect(n,i);this.showIndicator();this.setDomSelector();this.attachShapeConnectEvents()}};p.prototype.beforeShapeConnect=function(t){var n=jQuery(t.target);var o=n.parents("g").attr(i.SELECT_FOR_DATASET_KEY);this._bElementConnectable=true;var a=e.getConfiguration().getRTL();var s=t.target.getBBox();var r;if(a){r=n.hasClass("rightTrigger")?"Start":"Finish"}else{r=n.hasClass("leftTrigger")?"Start":"Finish"}this._oScrollDistance={x:0,y:0};this._oStartShape={startTriggerFrame:s,x:s.x+s.width/2,y:s.y+s.width/2,shapeUid:o,isRightTrigger:n.hasClass("rightTrigger"),startPoint:r};c.addShapeConnectEventListeners(this.getGantt())};p.prototype.toggleShapeConnectTrigger=function(){var t=this.getGantt();t._updateShapeSelections(t.getSelectedShapeUid(),[])};p.prototype.getStartShapeFrame=function(){var t={x:0,y:0,width:i.SHAPE_CONNECT_INDICATOR_WIDTH};if(this.isShapeConnecting()){var e=this.shapeConnectDoms().startShapeConnectTrigger;if(e&&e.length===1){return e.get(0).getBBox()}else{t.x=this._oStartShape.x-this._oScrollDistance.x;t.y=this._oStartShape.y-this._oScrollDistance.y}}return t};p.prototype._getAcceptableShapeElements=function(){var t=[];var e=this;this.shapeConnectDoms().connectableShapes.each(function(n,o){var a=jQuery(o).control(0,true);if(a&&e._oStartShape.shapeUid!==a.getShapeUid()&&a.getDomRef()){t.push(a)}});return t};p.prototype.showIndicator=function(){if(!this.isShapeConnecting()){return}var t=[];var e=this;this._getAcceptableShapeElements().forEach(function(n){t.push(e._getIndicatorData(n))});this.getD3Doms().shapeConnectContainers.data(t).enter().append("g").classed("shapeConnectContainer",true).attr("id",function(t){return t.id+"-shape-connect"}).attr(i.SHAPE_CONNECT_FOR_DATASET_KEY,function(t){return t.id}).each(function(t){var e=d3.select(this);e.append("rect").attr(t.left);e.append("rect").attr(t.right)});this.attachEventHandlerToIndicator()};p.prototype.onMousemove=function(t){if(this._bElementConnectable===false){return}if(!this.isShapeConnecting()){this._bShapeConnecting=true;var e=this.getSvgElement();var n=a.getEventSVGPoint(e,t);this.createConnectLine(this._oStartShape.startTriggerFrame,n);this.createGhostRect(this._oStartShape.startTriggerFrame,n);this.showIndicator();this.toggleShapeConnectTrigger();this.setDomSelector()}else{this.onShapeConnecting(t)}};p.prototype.onShapeConnecting=function(t){var e=this.getSvgElement();var n=a.getEventSVGPoint(e,t);var o=this.getGantt()._getPointerExtension();var s=n.x+o._getAutoScrollStep();this.mDom.connectLine.attr({x2:s,y2:n.y});var r=i.SHAPE_CONNECT_INDICATOR_WIDTH;this.mDom.ghostRect.attr({x:s-r/2,y:n.y-r/2})};p.prototype.fireEvent=function(t){var n=jQuery(t.target);var o=n.parents("g").attr(i.SHAPE_CONNECT_FOR_DATASET_KEY);var a=e.getConfiguration().getRTL();var s=(a?n.hasClass("rightIndicator"):n.hasClass("leftIndicator"))?"Start":"Finish";var r=this._oStartShape.startPoint+"To"+s;var c={fromShapeUid:this._oStartShape.shapeUid,toShapeUid:jQuery(document.getElementById(o)).control(0).getShapeUid(),type:h[r]};var p=this.getGantt();p.fireShapeConnect(c)};p.prototype.endShapeConnect=function(t){if(this.isShapeConnecting()){var e=this._getShapeConnectRootNode();e.selectAll("*").remove()}c.removeShapeConnectEventListeners(this.getGantt());this._initShapeConnectStates();this.toggleShapeConnectTrigger()};p.prototype.onKeydown=function(e){if(this.isShapeConnecting()&&e.keyCode===t.ESCAPE){this.endShapeConnect(e)}};p.prototype.toggleGhostRect=function(t){if(this.isShapeConnecting()){this.shapeConnectDoms().shapeConnectGhost.toggleClass("hideShapeConnectGhost");jQuery(t.target).toggleClass("hoverOnShapeConnectIndicator")}};p.prototype.attachEventHandlerToIndicator=function(){var t=this.shapeConnectDoms().indicators;t.off(r);t.on("mouseup"+r,this.fireEvent.bind(this));t.on("mouseover"+r+" mouseout"+r,this.toggleGhostRect.bind(this))};p.prototype._getIndicatorData=function(t){var e=t.getId();var n,o;if(t.getDomRef("nonLabelGroup")){n=t.getDomRef("nonLabelGroup").getBBox();o=3/4}else{n=t.getDomRef().getBBox();o=1/2}var a=n.x,r=n.y,h=n.width,c=n.height,p=false;if(t instanceof sap.gantt.simple.BaseGroup){var g=0,S;S=window.getComputedStyle(t.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(S){g=S[1].split(",")[5];p=true}r=n.y+parseFloat(g)}var C=i.SHAPE_CONNECT_INDICATOR_WIDTH-2;var l=2;var d=s.getShapeBias(t);var v=a-l-C+d.x,f=p?r+c*o-C/2:r+c*o-C/2+d.y;var u=a+h+l+d.x,m=f;var _={width:C,height:C};return{id:e,left:jQuery.extend({x:v,y:f,class:"leftIndicator shapeConnectIndicator"},_),right:jQuery.extend({x:u,y:m,class:"rightIndicator shapeConnectIndicator"},_)}};p.prototype.storeScrollDistance=function(t,e){if(e){this._oScrollDistance.x+=t}else{this._oScrollDistance.y+=t}};p.prototype.shapeConnectDoms=function(){var t=jQuery(this.getSvgElement());var e="g["+i.SELECT_FOR_DATASET_KEY+'="'+this._oStartShape.shapeUid+'"]';var n=".shapeConnectTrigger."+(this._oStartShape.isRightTrigger?"rightTrigger":"leftTrigger");var o=t.find("g.sapGanttChartShapeConnect");var a=t.find("g.sapGanttChartSelection");return{shapeConnect:o,indicators:o.find(".shapeConnectContainer .shapeConnectIndicator"),shapeConnectGhost:o.find(".shapeConnectGhost"),connectLine:o.find(".shapeConnectLine"),connectableShapes:t.find("["+i.CONNECTABLE_DATASET_KEY+"=true]"),shapeConnectTriggers:a.find(".shapeConnectTrigger"),startShapeConnectTrigger:a.find(e+" "+n)}};p.prototype.getD3Doms=function(){var t=this._getShapeConnectRootNode();return{shapeConnectLine:t.selectAll(".shapeConnectLine"),shapeConnectGhost:t.selectAll(".shapeConnectGhost"),shapeConnectContainers:t.selectAll(".shapeConnectContainer")}};return p});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttDragDropExtension", ["sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ui/core/Core","sap/gantt/library","./GanttExtension","./CoordinateUtils","./GanttUtils","sap/gantt/misc/Format","./RenderUtils","sap/gantt/misc/Utility"],function(jQuery,t,e,a,i,r,n,o,s,g){"use strict";var h=".sapGanttDragDrop";var l=["mousemove","mouseup","keydown"];var p="mousedown";var d=l.reduce(function(t,e){t[e]=e;return t},{});d[p]=p;var u=l.map(function(t){return t+h});var D=p+h;var v=3;var f=a.dragdrop.GhostAlignment;var c=a.dragdrop.SnapMode;var m=sap.gantt.DragOrientation;var S={dispatchEvent:function(t){var e=this._getDragDropExtension();if(t.type===d.mousedown){e.onMouseDown(t)}else if(t.type===d.mousemove){e.onMouseMove(t)}else if(t.type===d.mouseup){e.onMouseUp(t)}else if(t.type===d.keydown){e.onKeydown(t)}},addEventListeners:function(t){this.removeEventListeners(t);var e=jQuery(t._getDragDropExtension().getDomRefs().ganttSvg);e.on(D,S.dispatchEvent.bind(t));var a=jQuery(t._getDragDropExtension().getDomRefs().headerSvg);a.on(D,S.dispatchEvent.bind(t))},removeEventListeners:function(t){var e=jQuery(t._getDragDropExtension().getDomRefs().ganttSvg);e.off(h);var a=jQuery(t._getDragDropExtension().getDomRefs().headerSvg);a.off(h)},addDragDropEventListeners:function(t){this.removeDragDropEventListeners(t);u.forEach(function(e){jQuery(document).on(e,S.dispatchEvent.bind(t))})},removeDragDropEventListeners:function(t){u.forEach(function(t){jQuery(document).off(t)})}};var y=i.extend("sap.gantt.simple.GanttDragDropExtension",{_init:function(t,e){this._initDragStates();return"DragDropExtension"},_attachEvents:function(){var t=this.getGantt();S.addEventListeners(t)},_detachEvents:function(){var t=this.getGantt();S.removeEventListeners(t)}});y.prototype._initDragStates=function(){this.bDragging=false;this.adhocLineDrag=false;this.deltaLineDrag=false;this.adhocLineDragStart=false;this.deltaLineDragStart=false;this.isCursorlineDisabled=false;this.bElementDraggable=false;this.oAdhocLineElmDraggable=false;this.oDeltaLineElmDraggable=false;this.oMouseDownTarget=null;this.oLastDraggedShapeData=null;this.mDragPoint={};this.bDragging=false;this.dragGhost=null;this.prevDragPoint={};this.snapTimer=null;this.snapVal=0;this.isSnapping=false;this.cursorLineSnapPoint=null};y.prototype.onAdhocMarkerMouseDown=function(t){var a=r.getEventSVGPoint(this.getDomRefs().headerSvg,t),i=t.target.getBBox();this.oMouseDownTarget=t.target;var n=e.byId(this.oMouseDownTarget.id),o={x:0,y:0};if(n){o=g.getShapeBias(n)}this.mDragPoint={cursorX:a.x,cursorY:a.y,shapeX:i.x,shapeY:i.y,shapeWidth:i.width,shapeBias:o};S.addDragDropEventListeners(this.getGantt());this.adhocLineDrag=true};y.prototype.onDeltaAreaMouseDown=function(t){var a=r.getEventSVGPoint(this.getDomRefs().headerSvg,t),i=t.target.getBBox();this.oMouseDownTarget=t.target;var n=e.byId(this.oMouseDownTarget.id),o={x:0,y:0};if(n){o=g.getShapeBias(n)}this.mDragPoint={cursorX:a.x,cursorY:a.y,shapeX:i.x,shapeY:i.y,shapeWidth:i.width,shapeBias:o};var s=n.getParent();this.oLastDraggedShapeData={timeStamp:s.getTimeStamp(),endTimeStamp:s.getEndTimeStamp()};S.addDragDropEventListeners(this.getGantt());this.deltaLineDrag=true};y.prototype.onAdhocLineDrop=function(t){if(this.oMouseDownTarget){var e=jQuery(this.oMouseDownTarget).control(0,true).getParent();var a=this._getAdhocDropData(t);if(a){e.fireAdhoclineDrop(a)}if(this.isCursorlineDisabled){this.getGantt().setEnableCursorLine(true)}this.stopDragging()}};y.prototype.onDeltaLineDrop=function(t){if(this.oMouseDownTarget){var e=jQuery(this.oMouseDownTarget).control(0,true).getParent();var a=this._getDeltaMarkerDropEvent(t);if(a){e.fireDeltalineDrop(a)}if(this.isCursorlineDisabled){this.getGantt().setEnableCursorLine(true)}this.stopDragging()}};y.prototype.onAdhocLineMove=function(t){if(!this.adhocLineDragStart){this.dragGhost=this.createDragGhost(this.oMouseDownTarget);this._hideScrollBarOnBody(true);this.adhocLineDragStart=true;if(this.getGantt().getEnableCursorLine()){this.getGantt().setEnableCursorLine(false);this.isCursorlineDisabled=true}}else{this.onLineDrag(t)}};y.prototype.onDeltaLineMove=function(t){if(!this.deltaLineDragStart){this.dragGhost=this.createDragGhost(this.oMouseDownTarget);this._hideScrollBarOnBody(true);this.deltaLineDragStart=true;if(this.getGantt().getEnableCursorLine()){this.getGantt().setEnableCursorLine(false);this.isCursorlineDisabled=true}}else{this.onLineDrag(t)}};y.prototype.onLineDrag=function(t){if(this.isValidDropZoneForLines(t)){this.updateCursorStyle("Move");this.updateHeaderCursorStyle("Move")}else{this.updateCursorStyle("not-allowed");this.updateHeaderCursorStyle("not-allowed")}this.showGhost(t)};y.prototype.onMouseDown=function(t){if(t.button!==0){return}this._bGhostsPositioned=false;this.bMultipleGhosts=false;this._bEnableRowHighlight=false;var a;if(this.isEventTargetAdhocLine(t)){this.oAdhocLineElmDraggable=this.isAdhocLineDraggable(t);if(this.oAdhocLineElmDraggable){this.onAdhocMarkerMouseDown(t);return}}if(this.isEventTargetDeltaLine(t)){this.oDeltaLineElmDraggable=this.isDeltaLineDraggable(t);if(this.oDeltaLineElmDraggable){this.onDeltaAreaMouseDown(t);return}}if(!this.getGantt().getEnableSelectAndDrag()){a=this.getShapeElementByTarget(t.target);if(a){this.shapeSelectedOnMouseDown=true;this.initiallySelected=a.getSelected();if(!(a.isA("sap.gantt.simple.Relationship")&&this.getGantt().getIsConnectorDetailsVisible())){this.getGantt().getSelection().updateShape(a.getShapeUid(),{selected:true,ctrl:t.ctrlKey||t.metaKey,draggable:a.getDraggable(),time:a.getTime(),endTime:a.getEndTime()})}}}this.bElementDraggable=this.isEventTargetDraggable(t);if(this.bElementDraggable){var i=r.getEventSVGPoint(this.getDomRefs().ganttSvg,t);var o=this.getDraggableDOMElement(t.target),s=e.byId(o.id),h=s.getDomRef("nonLabelGroup")?s.getDomRef("nonLabelGroup").getBBox():o.getBBox(),l={x:0,y:0};if(s){l=g.getShapeBias(s)}this.mDragPoint={cursorX:i.x,cursorY:i.y,shapeX:h.x,shapeY:h.y,shapeWidth:h.width,shapeBias:l};a=this.getShapeElementByTarget(o);this.oMouseDownTarget=o;this.oLastDraggedShapeData={shapeUid:a.getShapeUid(),startTime:a.getTime(),endTime:a.getEndTime()};this.oSourceRow=this.getRowByShape(a);if(this.getGantt().getDragOrientation()===m.Horizontal){this.oCurrentRow=n.getRowInstancefromShape(a)}var p=n.getShapesWithUid(this._gantt.getId(),this._gantt.getSelectedShapeUid());this._aVisibleDraggableShapes=[];p.forEach(function(t){if(t&&t.getDraggable()&&t.sParentAggregationName!=="relationships"){this._aVisibleDraggableShapes.push(t)}}.bind(this));this.bMultipleGhosts=this._aVisibleDraggableShapes.length>1;this.mGhostLabelStyle={};this._bEnableRowHighlight=a.getDragHighlightRows().length>0&&!this.bMultipleGhosts;S.addDragDropEventListeners(this.getGantt())}};y.prototype.updateCursorStyle=function(t,e){document.body.style.cursor=t;this.getDomRefs().ganttSvg.style.cursor=t;if(e){this.getDomRefs().ganttChart.style.pointerEvents=e;this.getDomRefs().gantt.style.pointerEvents="auto";this._bArePointerEventsDisabled=true;if(this.getDomRefs().ganttChartContainerToolbar){this.getDomRefs().ganttChartContainerToolbar.style.pointerEvents=e}}else{if(this._bArePointerEventsDisabled){this.getDomRefs().ganttChart.style.removeProperty("pointer-Events");this.getDomRefs().gantt.style.removeProperty("pointer-Events");this._bArePointerEventsDisabled=false;if(this.getDomRefs().ganttChartContainerToolbar){this.getDomRefs().ganttChartContainerToolbar.style.removeProperty("pointer-Events")}}}};y.prototype.updateHeaderCursorStyle=function(t,e){this.getDomRefs().headerSvg.style.cursor=t;if(e){this.getDomRefs().ganttChart.style.pointerEvents=e;this.getDomRefs().gantt.style.pointerEvents="auto";this._bArePointerEventsDisabled=true;if(this.getDomRefs().ganttChartContainerToolbar){this.getDomRefs().ganttChartContainerToolbar.style.pointerEvents=e}}else{if(this._bArePointerEventsDisabled){this.getDomRefs().ganttChart.style.removeProperty("pointer-Events");this.getDomRefs().gantt.style.removeProperty("pointer-Events");this._bArePointerEventsDisabled=false;if(this.getDomRefs().ganttChartContainerToolbar){this.getDomRefs().ganttChartContainerToolbar.style.removeProperty("pointer-Events")}}}};y.prototype.onMouseMove=function(t){if(this.skipEvent(t)){return}if(!!this.adhocLineDrag&&!!this.oMouseDownTarget){this.onAdhocLineMove(t);return}if(!!this.deltaLineDrag&&!!this.oMouseDownTarget){this.onDeltaLineMove(t);return}if(this.bDragging===false){var a=this.getGantt(),i=this.getShapeElementByTarget(t.target);if(this._bEnableRowHighlight&&i){this.getShapeDndRowHighlightIndex(a,i)}var n=r.getEventSVGPoint(this.getDomRefs().ganttSvg,t),o=this.isExceedDraggingThreshold(n),s=o&&this.isAllowedVerticalOrentationDrag();this.bDragging=s;this._aShapeNodes=[];this._aGhostImages=[];if(s&&this.oMouseDownTarget){this._hideScrollBarOnBody(true);var h=e.byId(this.oMouseDownTarget.id);this.oTargetDom=h.getDomRef("nonLabelGroup")?h.getDomRef("nonLabelGroup"):this.oMouseDownTarget;this.dragGhost=this.createDragGhost(this.oTargetDom,true);var l=this.oTargetDom.getBBox();if(this.bMultipleGhosts){var p=g.getShapeBias(h);this._coordinateDiff={};var d=e.getConfiguration().getRTL();var u=d?l.x+p.x+l.width:l.x+p.x;var D=l.y+p.y;this._aVisibleDraggableShapes.forEach(function(t){if(t.getId()!==this.oMouseDownTarget.id){var e=t.getDomRef("nonLabelGroup")?t.getDomRef("nonLabelGroup"):document.getElementById(t.getId());this.createDragGhost(e,false);var a=d?e.getBBox().width:0;p=g.getShapeBias(t);var i={xDiff:e.getBBox().x+p.x+a-u,yDiff:e.getBBox().y+p.y-D,shape:t};this._coordinateDiff[t.getId()]=i}}.bind(this))}this._bFirstTimeDrag=true;var v=this._getDragStartEventData(t);if(v){this.getGantt().fireDragStart(v)}}else if(o){this.updateCursorStyle("not-allowed","none")}}else{var f=r.getEventSVGPoint(this.getDomRefs().ganttSvg,t);if(Object.keys(this.prevDragPoint).length===0||this.prevDragPoint.cursorX!==f.x||this.prevDragPoint.cursorY!==f.y){this.prevDragPoint={cursorX:f.x,cursorY:f.y};if(this.bMultipleGhosts&&this._bFirstTimeDrag){this.iGhostTimer=window.setTimeout(function(){this._updateGhostShapesPosition()}.bind(this),100);this._bGhostsPositioned=true}this._bFirstTimeDrag=false;this.onDragging(t)}}};y.prototype.getShapeDndRowHighlightIndex=function(t,e){var a=t.getTable(),i=a.getRows(),r=i[0].getIndex();var n=e?e.getDragHighlightRows():this.oLastDraggedShapeData._dragHighlightRows;this.oLastDraggedShapeData._highlightedRowIndex=[];if(n){n.forEach(function(t){var e=i.filter(function(e){return e.getAggregation("_settings").getRowId()===t})[0];if(e){this.oLastDraggedShapeData._highlightedRowIndex.push(e.getIndex()-r)}}.bind(this));this.oLastDraggedShapeData._dragHighlightRows=n}};y.prototype._updateGhostShapesPosition=function(){var t=document.getElementsByClassName("sapGanttDragGhost");var e=document.getElementById("sapGanttDragGhostWrapper");if(e){var a=[],i;for(i=0;i<t.length;i++){a.push(t[i].offsetHeight)}while(document.getElementsByClassName("sapGanttDragGhost").length>1){e.lastElementChild.remove()}var r=a[0];for(i=1;i<this._aShapeNodes.length;i++){var n=this._aShapeNodes[i];var o=this._coordinateDiff[n.id].xDiff;var s=this._coordinateDiff[n.id].yDiff;var g={left:o+"px",top:s-r+"px"};var h=this._getGhostLabel(this._coordinateDiff[n.id].shape,n);var l="<div class='sapGanttDragGhost'>"+"<img class='sapGanttDragGhostImg' src='"+this._aGhostImages[i]+"'>"+h+"</div>";e.insertAdjacentHTML("beforeend",l);e.lastElementChild.style.left=g.left;e.lastElementChild.style.top=g.top;if(h!==""){this._updateGhostLabelStyle()}r+=a[i]}e.classList.remove("sapGanttDragElementHidden")}};y.prototype._getGhostLabel=function(t,a){if(!this.getGantt().getShowTextOnGhost()){return""}var i="",r="",n="13px",o="#000",s="Arial",g="normal";var h=t.getVerticalTextAlignment();var l=a.nextSibling;if(l&&l.tagName==="text"&&t.getShowTitle()&&t.getTitle()&&t.getTitle().length&&l.textContent&&l.textContent.length){r=l.textContent;n=l.style.fontSize||n;o=l.style.fill||o;s=l.style.fontFamily||s;g=l.style.fontWeight||g}else{return i}var p=e.getConfiguration().getRTL();var d="0px",u="0px";if(p){d=a.getBBox().x-t.getXBias()+a.getBBox().width-(l.getBBox().x+l.getBBox().width)+"px"}else{u=l.getBBox().x-(a.getBBox().x+t.getXBias())+"px"}var D=a.getBBox().height-l.getBBox().height;if(h==="Top"){D=0}else if(h==="Center"){D=D/2}this.mGhostLabelStyle={fontSize:n,color:o,fontFamily:s,fontWeight:g,top:D+"px",right:d,left:u};i="<div class='sapGanttDragGhostLabel'>"+r+"</div>";return i};y.prototype._updateGhostLabelStyle=function(){var t=document.getElementsByClassName("sapGanttDragGhostLabel");var e=t[t.length-1];for(var a in this.mGhostLabelStyle){e.style[a]=this.mGhostLabelStyle[a]}};y.prototype.onMouseUp=function(t){if(this.bElementDraggable===true&&this.bDragging===false){this.stopDragging(t);this._initDragStates();return}if(!!this.adhocLineDragStart&&!!this.oMouseDownTarget){this.onAdhocLineDrop(t);this._initDragStates();return}if(!!this.deltaLineDragStart&&!!this.oMouseDownTarget){this.onDeltaLineDrop(t);this._initDragStates();return}var e=this._getShapeDropEventData(t);this.stopDragging(t);if(e){this.getGantt().triggerShapeDrop(e)}if(this.oMouseDownTarget){var a=this.getShapeElementByTarget(this.oMouseDownTarget);if(a){n.rerenderAssociatedRelationships(this.getGantt(),a)}}this._initDragStates()};y.prototype._getDragStartEventData=function(t){return{sourceGanttChart:this.getGantt(),draggedShapeDates:this._getDraggedShapeDates(),lastDraggedShapeUid:this.oLastDraggedShapeData.shapeUid,cursorDateTime:this._getGhostTime(t).cursorTime}};y.prototype._getShapeDropEventData=function(t){var e=this.getGantt();var a=e._getPointerExtension();if(this.isValidDropZone(t)&&a.isPointerInCorrectRow()){var i;var r=this._getDraggedShapeDates();var o=this.getGanttChartByTarget(t.target);if(this.getGantt().getDragOrientation()===m.Horizontal){i=this.oCurrentRow}else{i=n.getRowInstance(t,o.getTable())}var s=this.getShapeElementByTarget(t.target);var g=this._getGhostTime(t);return{dragged:true,sourceGanttChart:e,targetGanttChart:o,draggedShapeDates:r,lastDraggedShapeUid:this.oLastDraggedShapeData.shapeUid,targetRow:i,cursorDateTime:g.cursorTime,newDateTime:g.newDateTime,targetShape:s,sourceRowData:this.oSourceRow}}else{return{dragged:false}}};y.prototype._getAdhocDropData=function(t){if(this.isValidDropZoneForLines(t)){var e=this.getGantt();var a=e.getAxisTime();var i=r.getEventSVGPoint(this.getDomRefs().headerSvg,t);var n=o.dateToAbapTimestamp(a.viewToTime(this.mDragPoint.cursorX));var s=o.dateToAbapTimestamp(a.viewToTime(i.x));return{newTimeStamp:s,oldTimeStamp:n}}};y.prototype._getGhostTime=function(t,a){var i=this.getGantt();var n=this.getGanttChartByTarget(t.target);var o=n!=null?n.getId()!==i.getId():false;var s=o?n.getAxisTime():i.getAxisTime();var g=o?window.document.getElementById(n.getId()+"-svg"):window.document.getElementById(i.getId()+"-svg");var h=this.mDragPoint.shapeBias.x;var l=a?r.getEventSVGPoint(g,t).x:r.getEventSVGPoint(g,t).x-h;if(i.getSnapMode()!==c.None){l=l-this.snapVal}var p=s.viewToTime(l);var d=p;var u=e.getConfiguration().getRTL();var D=this.mDragPoint.shapeX+h,v=u?-this.mDragPoint.shapeWidth:this.mDragPoint.shapeWidth,S=this.mDragPoint.cursorX;var y=p;var T=p;var G=this.oLastDraggedShapeData.endTime-this.oLastDraggedShapeData.startTime;if(this.getGantt().getDragOrientation()===m.Vertical){y=this.oLastDraggedShapeData.startTime;T=this.oLastDraggedShapeData.endTime;d=y}else{if(this.getGantt().getGhostAlignment()===f.Start){T=G?new Date(y.getTime()+G):s.viewToTime(l+v);d=p}else if(this.getGantt().getGhostAlignment()===f.End){y=G?new Date(T.getTime()-G):s.viewToTime(l-v);d=p}else if(this.getGantt().getGhostAlignment()===f.None){var x=u?l-v-(S-D):l-(S-D);var b=s.viewToTime(x);y=b;T=G?new Date(y.getTime()+G):s.viewToTime(x+v);d=b}}return{newDateTime:d,cursorTime:p,time:y,endTime:T}};y.prototype._getDeltaMarkerDropEvent=function(t){if(this.isValidDropZoneForLines(t)){var a=jQuery(this.oMouseDownTarget).control(0,true).getParent();var i=e.getConfiguration().getRTL();var n=this.getGantt().getGhostAlignment();var s=this.getGantt().getAxisTime();var g=r.getEventSVGPoint(this.getDomRefs().headerSvg,t);var h,l;var p=this.mDragPoint.shapeWidth,d=this.mDragPoint.shapeX,u=this.mDragPoint.cursorX;if(n===f.Start){h=i?g.x-p:g.x;l=i?g.x:g.x+p}else if(n===f.None){h=g.x+(d-u);l=h+p}else if(n===f.End){h=i?g.x:g.x-p;l=i?g.x+p:g.x}return{newStartTime:o.dateToAbapTimestamp(s.viewToTime(i?l:h)),newEndTime:o.dateToAbapTimestamp(s.viewToTime(i?h:l)),oldStartTime:a.getTimeStamp(),oldEndTime:a.getEndTimeStamp()}}};y.prototype._getDraggedShapeDates=function(){var t=this.getGantt(),e=t.getSelection();var a=e.allSelectedDraggableUid();var i={};a.forEach(function(a){var r=e.getSelectedShapeDataByUid(a),o;if(!r.time||!r.endTime){o=t.setTimeForGroupShape(n.getShapesWithUid(t.getId(),[a])[0])}i[a]={time:r.time||o&&o.getTime(),endTime:r.endTime||o&&o.getEndTime()}});return i};y.prototype.getDroppedShapeStartTime=function(t,a,i){if(this.getGantt().getGhostAlignment()===f.None){var r=this.mDragPoint.shapeX,n=this.mDragPoint.shapeWidth,s=this.mDragPoint.cursorX;var g=e.getConfiguration().getRTL();var h=g?t+n-(s-r):t-(s-r);var l=a.viewToTime(h),p=o.abapTimestampToDate(l);return p}return i};y.prototype.isValidDropZone=function(t){return jQuery(t.target).closest("svg.sapGanttChartSvg").length===1};y.prototype.isValidDropZoneForLines=function(t){return jQuery(t.target).closest("svg.sapGanttChartHeaderSvg").length===1||jQuery(t.target).closest("svg.sapGanttChartSvg").length===1};y.prototype._hideScrollBarOnBody=function(t){jQuery(document.body).toggleClass("sapGanttDraggingOverflow",t)};y.prototype.onKeydown=function(e){if(this.skipEvent(e)){return}if(e.keyCode===t.ESCAPE){this.stopDragging(e);this._initDragStates()}};y.prototype.stopDragging=function(t){this._enableTextSelection();this._avoidShapeSelectionAfterDragging();this.removeGhost();this.updateCursorStyle("default");this.updateHeaderCursorStyle("default");this._hideScrollBarOnBody(false);this._stopAutoScroll();S.removeDragDropEventListeners(this.getGantt())};y.prototype._avoidShapeSelectionAfterDragging=function(){if(this.bDragging&&this.oMouseDownTarget){var t=this.getShapeElementByTarget(this.oMouseDownTarget);window.setTimeout(function(){if(t){window.clearTimeout(t.iSingleClickTimer)}},100,this)}};y.prototype.isEventTargetDraggable=function(t){var e=this.getShapeElementByTarget(t.target);if(e){return e.getDraggable()&&(e.getSelected()||!this.getGantt().getEnableSelectAndDrag())}return false};y.prototype.getShapeElementByTarget=function(t){return jQuery(this.getDraggableDOMElement(t)).control(0,true)};y.prototype.getGanttChartByTarget=function(t){return jQuery(t).closest("svg.sapGanttChartSvg").control(0,true)};y.prototype.isEventTargetAdhocLine=function(t){return jQuery(t.target).control(0,true)&&jQuery(t.target).control(0,true).sParentAggregationName==="_marker"};y.prototype.isEventTargetDeltaLine=function(t){return jQuery(t.target).control(0,true)&&jQuery(t.target).control(0,true).sParentAggregationName==="_headerDeltaArea"};y.prototype.isAdhocLineDraggable=function(t){var e=jQuery(t.target).control(0,true).getParent();return e.getDraggable()&&e._getSelected()};y.prototype.isDeltaLineDraggable=function(t){var e=jQuery(t.target).control(0,true).getParent();return e.getDraggable()&&e._getIsSelected()};y.prototype.getDraggableDOMElement=function(t){return jQuery(t).closest("["+n.SHAPE_ID_DATASET_KEY+"]").get(0)};y.prototype.isExceedDraggingThreshold=function(t){return Math.abs(t.x-this.mDragPoint.cursorX)>v||Math.abs(t.y-this.mDragPoint.cursorY)>v};y.prototype.onDragging=function(t){if(this.dragGhost){this.isSnapping=false;var e=this.getGantt()._getPointerExtension();if(e.isPointerInGanttChart()===true&&e.isPointerInCorrectRow()===true){this.updateCursorStyle("move")}else{this.updateCursorStyle("not-allowed","none");this.updateHeaderCursorStyle("not-allowed","none");this._stopAutoScroll()}this.showGhost(t);this._disableTextSelection();if(this.getGantt().getSnapMode()!==c.None){this.executeSnappingEffect(t)}}};y.prototype.executeSnappingEffect=function(t){if(this.snapTimer){window.clearTimeout(this.snapTimer);this.snapTimer=null}this.snapTimer=window.setTimeout(function(){this.showGhost(t,true)}.bind(this),100)};y.prototype._stopAutoScroll=function(){var t=this.getGantt()._getPointerExtension();t._bAutoScroll=false};y.prototype.isDragging=function(){return this.bDragging};y.prototype.isAdhocLineDragging=function(){return this.adhocLineDragStart};y.prototype.isDeltaLineDragging=function(){return this.deltaLineDragStart};y.prototype.skipEvent=function(t){return this.bElementDraggable===false&&this.oAdhocLineElmDraggable===false&&this.oDeltaLineElmDraggable===false};y.prototype.showGhost=function(t,e){var a=this.getGantt().getGhostAlignment();var i=document.getElementById("sapGanttDragGhostWrapper");var r=this.adhocLineDragStart||this.deltaLineDragStart?this.calcGhostAligmentForLines(t,a):this.calcGhostOffsetByAlignment(t,a,e);if(this.adhocLineDragStart||this.deltaLineDragStart){var o=n.getTimeLabel(t,this.getGantt().getAxisTime(),this.getGantt().getLocale(),this.getDomRefs().headerSvg);document.getElementById("sapGanttDragText").innerText=o}i.style.left=r.left;i.style.top=r.top;if(!this._bGhostsPositioned){i.classList.remove("sapGanttDragElementHidden")}};y.prototype.calcGhostAligmentForLines=function(t,a){var i=e.getConfiguration().getRTL();var n=r.xPosOfEvent(t);if(this.adhocLineDragStart){n-=this.mDragPoint.shapeWidth/2}if(this.deltaLineDragStart){var o=this.mDragPoint.shapeWidth,s=this.mDragPoint.shapeX,g=this.mDragPoint.cursorX;if(a===f.Start){n=i?n-o:n}else if(a===f.None){n=n+(s-g)}else if(a===f.End){n=i?n:n-o}}var h=r.getSvgScreenPoint(this.getDomRefs().headerSvg,{pageX:this.mDragPoint.cursorX,clientX:this.mDragPoint.cursorX,pageY:this.mDragPoint.cursorY,clientY:this.mDragPoint.cursorY});return{left:n+"px",top:h.y+"px"}};y.prototype.calcGhostOffsetByAlignment=function(t,a,i){var n=e.getConfiguration().getRTL();var o=this.mDragPoint.shapeWidth,s=this.mDragPoint.shapeX+this.mDragPoint.shapeBias.x,g=this.mDragPoint.cursorX;var h;var l=document.getElementById("sapGanttDragGhostWrapper").offsetWidth-document.getElementsByClassName("sapGanttDragGhostImg")[0].offsetWidth;var p=r.xPosOfEvent(t);if(this.getGantt().getDragOrientation()===m.Vertical){var d=r.getSvgScreenPoint(this.getDomRefs().ganttSvg,{pageX:this.mDragPoint.shapeX,clientX:this.mDragPoint.shapeX,pageY:this.mDragPoint.shapeY,clientY:this.mDragPoint.shapeY});h=d.x+this.mDragPoint.shapeBias.x}else{if(a===f.Start){h=n?p-o:p}else if(a===f.None){h=p+(s-g)}else if(a===f.End){h=n?p:p-o}}var u=r.getEventPosition(t).pageY-2;if(this.getGantt().getDragOrientation()===m.Horizontal){var D=r.getSvgScreenPoint(this.getDomRefs().ganttSvg,{pageX:this.mDragPoint.shapeX,clientX:this.mDragPoint.shapeX,pageY:this.mDragPoint.shapeY,clientY:this.mDragPoint.shapeY});u=D.y+this.mDragPoint.shapeBias.y}if(i){this._generateSnapvalue(t,o);h=h-this.snapVal}if(n&&this.bMultipleGhosts){h=h-l}return{left:h+"px",top:u+"px"}};y.prototype._getSnapOffsetByAligment=function(t,a){var i={};var r=this.mDragPoint.shapeWidth;var n=e.getConfiguration().getRTL();if(a===f.Start){i.xPosStart=t.x;i.xPosEnd=n?t.x-r:t.x+r}else if(a===f.End){i.xPosStart=n?t.x+r:t.x-r;i.xPosEnd=t.x}else if(a===f.None){i.xPosStart=t.x-(this.mDragPoint.cursorX-this.mDragPoint.shapeX-this.mDragPoint.shapeBias.x);i.xPosEnd=i.xPosStart+r}return i};y.prototype._getSnappedTime=function(t,e,a,i){var r,n;var o=t%e;if(o>e/2){n=e-o;r=new Date(a.getTime()+n*i)}else{n=o;r=new Date(a.getTime()-n*i)}return r};y.prototype._computeSnapping=function(t,a,i){var r=this.getGantt();var n=e.getConfiguration().getRTL();var o=this.getGantt().getGhostAlignment();var s=this.mDragPoint.shapeWidth;var g,h;if(r.getSnapMode()===c.Left){g=n?a-1:t-1;h=n?i.x-g-s:i.x-g}else if(r.getSnapMode()===c.Right){g=n?t+1:a+1;h=n?i.x-g:i.x-g+s}else{if(Math.abs(t)<Math.abs(a)){g=n?t-1:t-1;h=n?i.x-g:i.x-g}else{g=n?a-1:a+1;h=n?i.x-g-s:i.x-g+s}}if(Math.abs(g)<Math.abs(this.snapVal)){this.snapVal=g;if(o===f.Start){this.cursorLineSnapPoint=h}else if(o===f.End){this.cursorLineSnapPoint=n?h+s:h-s}else if(o===f.None){this.cursorLineSnapPoint=n?h-this.mDragPoint.cursorX:h-(this.mDragPoint.cursorX-this.mDragPoint.shapeX)}}};y.prototype._computeSnapByTime=function(t,a,i,r){var n=e.getConfiguration().getRTL();var o=this.getGantt();var s=o.getAxisTime();var g=r[i].timeInterval/60;var h=6e4;var l=s.viewToTime(t.xPosStart);var p=s.viewToTime(t.xPosEnd);var d=l.getMinutes();var u=p.getMinutes();if(g>60){d=l.getHours();u=p.getHours();g=g/60;if(d%g===0||u%g===0){d=l.getMinutes()%30;u=p.getMinutes()%30;l.setMinutes(d);p.setMinutes(u);g=60}else{l.setMinutes(0);p.setMinutes(0);h=36e5}}else if(g<1){d=l.getSeconds();u=p.getSeconds();h=1e3;g=g*60}else{l.setSeconds(0);p.setSeconds(0)}if(d%g!==0||u%g!==0){var D=n?this._getSnappedTime(u,g,p,h):this._getSnappedTime(d,g,l,h);var v=n?this._getSnappedTime(d,g,l,h):this._getSnappedTime(u,g,p,h);var f=s.timeToView(D);var c=s.timeToView(v);if(n){this._computeSnapping(t.xPosEnd-f-1,t.xPosStart-c+1,a)}else{this._computeSnapping(t.xPosStart-f+1,t.xPosEnd-c-1,a)}a.x=a.x-this.snapVal;o._getPointerExtension()._toggleCursorLine(true,a);this.isSnapping=true}else{this.snapVal=0}};y.prototype._generateSnapvalue=function(t){var a=e.getConfiguration().getRTL();var i=this.getGantt().getGhostAlignment();var o=this.getDomRefs().ganttSvg;var g=r.getEventSVGPoint(o,t);var h=this._getSnapOffsetByAligment(g,i);var l=h.xPosStart;var p=h.xPosEnd;var d=g.y;var u=this.getGantt();var D=u._getPointerExtension();var v=u.getAxisTime();var f=v.getCurrentTickTimeIntervalKey();var c=u.getSnapTimeInterval();var m=v.getZoomStrategy();this.snapVal=Number.MAX_SAFE_INTEGER/2;if(c[f]&&c[f].timeInterval){this._computeSnapByTime(h,g,f,c);return}var S=s.getGanttRenderWidth(u);var y=v.getTickTimeIntervalLabel(m.getTimeLineOption(),null,[0,S]);var T=y[1];T.forEach(function(t){this._computeSnapping(l-t.value,p-t.value,g)}.bind(this));var G=n.getVisibleElements(o,".sapGanttChartDeltaLine",".baseShapeSelection");G.forEach(function(t){var e=t.getBBox().x;this._computeSnapping(l-e,p-e,g)}.bind(this));var x=n.getVisibleElements(o,".sapGanttChartAdhocLine",".baseShapeSelection");x.forEach(function(t){var e=t.getBBox().x;this._computeSnapping(l-e,p-e,g)}.bind(this));var b=n.getVisibleElements(o,".sapGanttChartShapes",".baseShapeSelection");b.forEach(function(t){var e=t.getBBox().x,i=e+t.getBBox().width,r=t.getBBox().y,n=r+t.getBBox().height;var o=d+t.getBBox().height;if(d>r&&d<n||o>r&&o<n){var s=a?l-e:l-i;var h=a?p-i:p-e;this._computeSnapping(s,h,g)}}.bind(this));var E=n.getVisibleElements(o,".calendarPattern","rect");E.forEach(function(t){var e=t.getBBox().x,i=e+t.getBBox().width;var r=a?l-e:l-i;var n=a?p-i:p-e;this._computeSnapping(r,n,g)}.bind(this));g.x=this.cursorLineSnapPoint;D._toggleCursorLine(true,g);this.isSnapping=true};y.prototype.removeGhost=function(){this.dragGhost=null;var t=document.getElementById("sapGanttDragGhostWrapper");if(t){t.parentNode.removeChild(t)}};y.prototype.createDragGhost=function(t,e){var a=jQuery("<div id='sapGanttDragGhostWrapper' class='sapGanttDragElementHidden'></div>");if(!this.bMultipleGhosts||e){jQuery(document.body).append(a)}var i=document.createElement("canvas");var r=t.getBBox();i.width=this.normalizeGhostImageWidth(r.width);i.height=r.height;if(this.adhocLineDrag){var n=jQuery(this.oMouseDownTarget).control(0,true).getParent()._getLine();var o=document.getElementById(n.sId);var s=jQuery(this.oMouseDownTarget).control(0,true).getParent()._getHeaderLine();var g=document.getElementById(s.sId);var h=o.getBBox();var l=g.getBBox();i.height+=h.height+l.height}if(this.deltaLineDrag){var p=jQuery(this.oMouseDownTarget).control(0,true).getParent();if(p.getVisibleDeltaStartEndLines()){var d=p._getStartLine();var u=p._getEndLine();var D=p._getHeaderStartLine();var v=p._getHeaderEndLine();var f=document.getElementById(d.sId);var c=document.getElementById(u.sId);var m=document.getElementById(D.sId);var S=document.getElementById(v.sId);var y={headerStartLine:m,startLine:f,headerEndLine:S,endLine:c};var T=m.getBBox();var G=f.getBBox();i.height+=G.height+T.height}}this.createGhostImage(t,i,g,o,y,e);return a};y.prototype.normalizeGhostImageWidth=function(t){return t};y.prototype.createGhostImage=function(t,e,a,i,r,n){var o=this.serializeClonedSvg(e,t,a,i,r);var s=this._b64EncodeUnicode(o);var g="data:image/svg+xml;base64,"+s;this.appendGhostImageToWrapper(t,g,n)};y.prototype._b64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function t(e,a){return String.fromCharCode("0x"+a)}))};y.prototype.appendGhostImageToWrapper=function(t,a,i){var r=document.getElementById("sapGanttDragGhostWrapper");var n=this._getDragTextOverlayStyle(t);var o=i?"":"<div id='sapGanttDragText' class='sapGanttDragTextOverlay "+n.css+"'>"+"</div>";var s=e.byId(t.id);var g=!s&&t.parentNode&&e.byId(t.parentNode.id)instanceof sap.gantt.simple.BaseGroup;if(g){s=e.byId(t.parentNode.id)}if(i&&this.getGantt().getShowTextOnGhost()){o=this._getGhostLabel(s,t)}if(this.bMultipleGhosts){this._aShapeNodes.push(g?t.parentNode:t);this._aGhostImages.push(a);if(!i){o=""}}var h="<div class='sapGanttDragGhost'>"+"<img class='sapGanttDragGhostImg' src='"+a+"'>"+o+"</div>";r.insertAdjacentHTML("beforeend",h);if(i&&this.getGantt().getShowTextOnGhost()&&o!==""){this._updateGhostLabelStyle()}};y.prototype._getDragTextOverlayStyle=function(t){var a=e.getConfiguration().getRTL();var i=this.getGantt().getGhostAlignment();var r=this.mDragPoint.shapeWidth,n=this.mDragPoint.shapeX+this.mDragPoint.shapeBias.x,o=this.mDragPoint.cursorX;var s=o-n;var g=document.getElementById("sapGanttDragGhostWrapper");var h="";if(i===f.None){if(a){g.style.setProperty("--sapShapeDragTextOverlay-right-val",r-s+"px")}else{g.style.setProperty("--sapShapeDragTextOverlay-left-val",s+"px")}}else if(i===f.End){h="sapGanttDragTextOverlayGhostAlignEnd"}g.style.setProperty("--sapShapeDragTextOverlay-lineHeight",t.getBBox().height+"px");return{css:h}};y.prototype.serializeClonedSvg=function(t,a,i,r,n){var o=d3.ns.prefix.svg;var s=a.getBBox();var g=e.getConfiguration().getRTL();var h=document.createElementNS(o,"svg");h.setAttribute("width",t.width);h.setAttribute("height",t.height);var l=a.cloneNode(true);l.style.transform="translate(0, 0)";if(!this.getGantt().getShowTextOnGhost()){this.removeOriginalTextNode(l)}else if(g&&(l.tagName==="g"||l.tagName==="text")){this._aOriginalTextX=[];this._iCount=0;this._populateTextNodeX(a);this._repositionTextNode(l)}var p=document.createElementNS(o,"g");p.setAttribute("transform","translate("+-s.x+", "+-s.y+")");p.appendChild(l);if(this.adhocLineDrag){var d=i.cloneNode(true);var u=r.cloneNode(true);p.appendChild(d);p.appendChild(u)}if(this.deltaLineDrag){var D=sap.ui.getCore().byId(this.oMouseDownTarget.id).getParent();if(D.getVisibleDeltaStartEndLines()){var v=n.headerStartLine.cloneNode(true);var f=n.startLine.cloneNode(true);var c=n.headerEndLine.cloneNode(true);var m=n.endLine.cloneNode(true);p.appendChild(v);p.appendChild(f);p.appendChild(c);p.appendChild(m)}}var S=this.getGantt().getSvgDefs();if(S){var y=jQuery(document.getElementById(S.getId())).get(0).cloneNode(true);h.appendChild(y)}h.appendChild(p);return(new XMLSerializer).serializeToString(h)};y.prototype.removeOriginalTextNode=function(t){if(t.parentNode&&t.tagName==="text"){t.parentNode.removeChild(t)}var e=t.children||t.childNodes;var a=Array.prototype.slice.call(e);a.forEach(function(t){this.removeOriginalTextNode(t)}.bind(this))};y.prototype._repositionTextNode=function(t){if(t.tagName==="text"){t.setAttribute("x",this._aOriginalTextX[this._iCount]);this._iCount++}var e=t.children||t.childNodes;var a=Array.prototype.slice.call(e);a.forEach(function(t){this._repositionTextNode(t)}.bind(this))};y.prototype._populateTextNodeX=function(t){if(t.tagName==="text"){var e=0;var a=t.getAttribute("text-anchor");var i=t.getBBox();if(a==="start"){e=i.x}else if(a==="end"){e=i.x+i.width}else{e=i.x+i.width/2}this._aOriginalTextX.push(e)}var r=t.children||t.childNodes;var n=Array.prototype.slice.call(r);n.forEach(function(t){this._populateTextNodeX(t)}.bind(this))};y.prototype.getNumberOfDragObject=function(t){var a=this.getGantt().getSelection();var i=a.numberOfSelectedDraggableShapes();var r=e.getLibraryResourceBundle("sap.gantt");var n=r.getText("GNT_DRAGGED_OBJECT");var o=r.getText("GNT_DRAGGED_OBJECTS");var s=i>1?o:n;return i+" "+s};y.prototype._disableTextSelection=function(){jQuery(document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(t){t.preventDefault();return false})};y.prototype._enableTextSelection=function(){jQuery(document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart")};y.prototype.isAllowedVerticalOrentationDrag=function(){var t=this.getGantt();if(t.getDragOrientation()===m.Vertical){return t.oSelection.numberOfSelectedDraggableShapes()<2}return true};y.prototype.getRowByShape=function(t){var e=n.getRowInstancefromShape(t);var a=e.clone();a=this._addBackOriginalGanttRowProperties(e,a);return a};y.prototype._addBackOriginalGanttRowProperties=function(t,e){e.oPropagatedProperties=t._getPropertiesToPropagate();e.propagateProperties(true);e.oParent=t.getParent();return e};return y});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttExtension", ["sap/ui/base/Object"],function(t){"use strict";var n=t.extend("sap.gantt.simple.GanttExtension",{_gantt:null,_settings:null,constructor:function(n,e){t.call(this);this._gantt=n;this._settings=e||{};var i=this._init(this._gantt,this._settings);if(i){var a=this;n["_get"+i]=function(){return a}}},destroy:function(){this._detachEvents();this._gantt=null;t.prototype.destroy.apply(this,arguments)},getInterface:function(){return this}});n.prototype.getGantt=function(){return this._gantt};n.prototype.getDomRefs=function(){var t=function(t){return window.document.getElementById(this.getGantt().getId()+t)}.bind(this);var n=t("-header-svg"),e=null,i=null;if(n){e=n.parentNode}if(this.getGantt().getParent()&&this.getGantt().getParent()instanceof sap.gantt.simple.GanttChartContainer&&this.getGantt().getParent().getToolbar()){i=window.document.getElementById(this.getGantt().getParent().getToolbar().getId())}return{gantt:t("-gantt"),ganttSvg:t("-svg"),header:e,headerSvg:n,ganttChart:window.document.getElementById(this.getGantt().getId()),ganttChartContainerToolbar:i}};n.prototype._init=function(t,n){return null};n.prototype._attachEvents=function(){};n.prototype._detachEvents=function(){};n.attachEvents=function(t){if(!t._aExtensions){return}for(var n=0;n<t._aExtensions.length;n++){t._aExtensions[n]._attachEvents()}};n.detachEvents=function(t){if(!t._aExtensions){return}for(var n=0;n<t._aExtensions.length;n++){t._aExtensions[n]._detachEvents()}};n.enrich=function(t,e,i){if(!e||!(e.prototype instanceof n)){return null}var a=new e(t,i);if(!t._aExtensions){t._aExtensions=[]}t._aExtensions.push(a);return a};n.cleanup=function(t){if(!t._bExtensionsInitialized||!t._aExtensions){return}for(var n=0;n<t._aExtensions.length;n++){t._aExtensions[n].destroy()}delete t._aExtensions;delete t._bExtensionsInitialized};return n});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttHeader", ["sap/ui/core/Element","sap/ui/core/Core","sap/ui/Device","./RenderUtils","../misc/Utility","sap/gantt/misc/Format","sap/ui/core/theming/Parameters","./BaseRectangle","./AdhocLineRenderer","./GanttUtils","./DeltaLineRenderer","./BaseLine","sap/gantt/simple/GanttExtension"],function(e,t,a,r,i,n,o,l,g,s,h,d,f){"use strict";var p=e.extend("sap.gantt.simple.GanttHeader",{metadata:{library:"sap.gantt",properties:{iHeaderMinheight:{type:"int",defaultValue:33},_iHeaderHeight:{type:"int",defaultValue:0},_iHeaderHeightInitial:{type:"int",defaultValue:0}},aggregations:{_overflowToolbar:{type:"sap.m.Toolbar",multiple:false}},renderer:{apiVersion:2}}});p.prototype._setIHeaderHeight=function(e){this.setProperty("_iHeaderHeight",Math.floor(e),true)};p.prototype._getIHeaderHeight=function(){return this.getProperty("_iHeaderHeight")};p.prototype._setIHeaderHeightInitial=function(e){this.setProperty("_iHeaderHeightInitial",Math.floor(e),true)};p.prototype._getIHeaderHeightInitial=function(){return this.getProperty("_iHeaderHeightInitial")};var v=0;p.prototype.renderElement=function(){var e=t.createRenderManager(),a=this.getParent(),i;if(!a.getShowGanttHeader()){return}var d=a.getId();var p=jQuery("div.sapGanttChartWithTableHeader[data-sap-ui-related="+d.replace(/([:.\[\],=@])/g,"\\$1")+"]");var H=this.getParent().getTable(),c=H.getAggregation("extension");i=c.filter(function(e){if(e instanceof sap.m.OverflowToolbar){return e}});this.iOverflowToolbarHeight=0;if(a.getEnableChartOverflowToolbar()){this.renderOverflowToolbar(e,a);var u=t.byId(d+"-ganttHeaderOverflowToolbar").getDomRef();if(i[0]){var b=t.byId(i[0].sId).getDomRef();if(b){this.iOverflowToolbarHeight=b.clientHeight}}else if(u){this.iOverflowToolbarHeight=u.clientHeight}}if(p&&p.length>0){v=p[0].offsetHeight;if(this.iOverflowToolbarHeight&&a.getEnableChartOverflowToolbar()){v-=this.iOverflowToolbarHeight}}this._setIHeaderHeight(v);var T=r.getGanttRenderWidth(a);var m=0;var w=a.getSimpleAdhocLines().filter(function(e){return e.MarkerType!=sap.gantt.simple.MarkerType.None});var L=a.getDeltaLines().filter(function(e){return e.getVisible()});var y,E,I;y=this._getIHeaderHeight()/4;E=this._getIHeaderHeight()/5*2;I=this._getIHeaderHeight()/5*4;if(w.length>0&&a.getEnableAdhocLine()===true||L.length>0&&a.getEnableDeltaLine()===true){L=L.filter(function(e){return e.getVisible()});w=w.filter(function(e){return e});var _=0;var O=0;var M;if(w.length>0&&a.getEnableAdhocLine()===true&&(L.length>0&&a.getEnableDeltaLine()===true)){M=s.calculateLevelForMarkers(w,L);O=Math.max.apply(Math,M.adhocLines.map(function(e){return e.mProperties._level}));_=Math.max.apply(Math,M.deltaLines.map(function(e){return e.mProperties._level}));if(O>=_){m=_*4+(O-_)*8+_*3+3}else{m=_*4+_*3}}else if(w.length>0&&a.getEnableAdhocLine()===true){M=s.calculateLevelForMarkers(w,[]);O=Math.max.apply(Math,M.adhocLines.map(function(e){return e.mProperties._level}));m=O*8}else if(L.length>0&&a.getEnableDeltaLine()===true){M=s.calculateLevelForMarkers([],L);_=Math.max.apply(Math,M.deltaLines.map(function(e){return e.mProperties._level}));m=_*4+(_+1)*3}if(this.iOverflowToolbarHeight&&!!i[0]&&a.getEnableChartOverflowToolbar()){a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight()+m)}else if(this.iOverflowToolbarHeight&&(!i[0]||a.getEnableChartOverflowToolbar())){a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight()+m+this.iOverflowToolbarHeight)}else{a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight()+m)}y=(this._getIHeaderHeight()-m)/4;E=(this._getIHeaderHeight()-m)/5*2;I=(this._getIHeaderHeight()-m)/5*4}else{if(this.iOverflowToolbarHeight&&!!i[0]&&a.getEnableChartOverflowToolbar()){a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight())}else if(this.iOverflowToolbarHeight&&(!i[0]||a.getEnableChartOverflowToolbar())){a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight()+this.iOverflowToolbarHeight)}else{a.getTable().setColumnHeaderHeight(this.getIHeaderMinheight())}}var S=a.getAxisTimeStrategy(),x=S.getTimeLineOption(),C=a.getAxisTime();var A=C.getTickTimeIntervalLabel(x,null,[0,T]);e.openStart("svg",d+"-header-svg");e.class("sapGanttChartHeaderSvg");e.attr("height",this._getIHeaderHeight()+"px");e.attr("width",T);if(this.iOverflowToolbarHeight&&a.getEnableChartOverflowToolbar()){e.style("transform","translate(0,"+this.iOverflowToolbarHeight+"px)")}e.openEnd();e.openStart("g").openEnd();this.renderHeaderLabel(e,A[0],{y:E,className:"sapGanttTimeHeaderSvgText"});this.renderHeaderLabel(e,A[1],{y:I,className:"sapGanttTimeHeaderSvgTextMedium"});if(C.largeIntervalLabel&&!C.largeIntervalPath){for(var N=0;N<A[0].length;N++){if(A[0][N].value===C.firstTickPosition){A[0].splice(N,1);break}}}this.renderIntervalLine(e,A[0],{start:0,end:y,className:"sapGanttTimeHeaderLargeIntervalSvgPath"});this.renderIntervalLine(e,A[1],{start:I,end:this._getIHeaderHeight(),className:"sapGanttTimeHeaderSvgPath"});e.close("g");if(a.getEnableAdhocLine()===true&&w.length>0||a.getEnableDeltaLine()===true&&L.length>0){e.openStart("svg","inner-header-svg").openEnd();e.openStart("g","inner-header-g");e.style("height",m);e.openEnd();var P=new l({x:0,y:this._getIHeaderHeight()-m,height:"1px",width:"100%",fill:o.get("sapUiListVerticalBorderColor")});var G=this;P.renderElement(e,P);var D=a.getRenderedTimeRange(),k=D[0],R=D[1];w=w.filter(function(e){var t=n.abapTimestampToDate(e.getTimeStamp());return t>=k&&t<=R&&e.getVisible()&&e.getMarkerType()===sap.gantt.simple.MarkerType.Diamond});if(w.length>0){w.forEach(function(t){g.renderMarker(e,t,a,G._getIHeaderHeight(),m)})}if(L.length!==0){L.forEach(function(t){h.renderDeltaLineHeader(e,t,a,G._getIHeaderHeight(),m)})}e.close("g");e.close("svg")}var V=C.getNowLabel(a.getNowLineInUTC())[0].value;this.renderNowLineHeader(e,a,{headerHeight:this._getIHeaderHeight(),nowLineX:V,iMarkerArea:m});e.openStart("g");e.class("sapGanttChartHeaderSelection");e.openEnd().close("g");e.close("svg");e.flush(p.get(0));e.destroy();f.attachEvents(a)};p.prototype.renderHeaderLabel=function(e,r,n){var o=t.getConfiguration().getRTL();var l=a.browser.edge&&o;r.forEach(function(t){e.openStart("text");e.class(n.className);e.attr("text-anchor","start");e.attr("x",t.value+(o?-5:5));e.attr("y",n.y);if(l){var a=i.calculateStringLength(t.label)*(n.fontSize/2);e.attr("transform","translate("+-a+")")}e.openEnd();e.text(t.label);if(n.className==="sapGanttTimeHeaderSvgTextMedium"&&t.largeLabel){e.openStart("title").openEnd();e.text(t.largeLabel);e.close("title")}e.close("text")})};p.prototype.renderIntervalLine=function(e,t,a){var r="";for(var i=0;i<t.length;i++){var n=t[i];if(n){r+=" M"+" "+(n.value-1/2)+" "+a.start+" L"+" "+(n.value-1/2)+" "+a.end}}e.openStart("path");e.attr("d",r);e.class(a.className);e.openEnd();e.close("path")};p.prototype.renderNowLineHeader=function(e,t,a){var r=t.getAdhocLines();var i=t.getDeltaLines();var n=a.headerHeight;var o=a.iMarkerArea;var l=n;if(t.getEnableAdhocLine()===true&&r.length>0||t.getEnableDeltaLine()===true&&i.length>0){l=n-o}var g=l,s=a.nowLineX;if(t.getEnableNowLine()===false||isNaN(s)){return}var h=8;var f=h/2,p=Math.sqrt(h*h-f*f);var v=[[s,g],[s-f,g-p],[s+f,g-p],[s,g]].reduce(function(e,t,a){var r=t.join(",");return a===0?"M"+r:e+"L"+r},"");e.openStart("g");e.class("sapGanttNowLineHeaderSvgPath");e.openEnd();e.openStart("path");e.attr("d",v);e.openEnd();e.close("path");e.close("g");if(t.getEnableAdhocLine()===true&&r.length>0||t.getEnableDeltaLine()===true&&i.length>0){e.openStart("g");e.class("sapGanttNowLineBodySvgLine");e.openEnd();var H=new d({x1:s,y1:l,x2:s,y2:"100%",strokeWidth:1}).setProperty("childElement",true);H.renderElement(e,H);e.close("g")}};p.prototype.renderOverflowToolbar=function(e,t){var a=t.getId();if(!this._oOverflowToolbar){this.setAggregation("_overflowToolbar",new sap.m.OverflowToolbar(a+"-ganttHeaderOverflowToolbar",{design:"Solid"}).addStyleClass("sapGanttHeaderOverflowToolbar"));this.getAggregation("_overflowToolbar").addContent(new sap.m.ToolbarSpacer);this._oOverflowToolbar=true}var r=t.getOverflowToolbarItems();if(r.length>0){r.forEach(function(e){this.getAggregation("_overflowToolbar").addContent(e)}.bind(this))}this.getAggregation("_overflowToolbar").setWidth("100%");e.openStart("div",a+"-ganttHeaderOverflowToolbarContainer");e.style("width","100%");e.style("position","absolute");e.openEnd();e.renderControl(this.getAggregation("_overflowToolbar"));e.close("div")};p.prototype.exit=function(){if(this._oOverflowToolbar){this._oOverflowToolbar=false}};return p},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttLassoExtension", ["sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","./GanttExtension","./CoordinateUtils","sap/gantt/misc/Utility"],function(jQuery,t,e,s,o){"use strict";var a=".sapGanttLasso";var n={addEventListeners:function(t){this.removeEventListeners(t);var e=t._getLassoExtension();e.lassoDoms().rowArea.on("mousedown"+a,e.beforeLasso.bind(e))},removeEventListeners:function(t){var e=t._getLassoExtension();e.lassoDoms().rowArea.off(a)},addLassoEventListeners:function(t){this.removeLassoEventListeners(t);var e=t._getLassoExtension();var s=jQuery(e.getDomRefs().gantt);s.on("mousemove"+a,e.onMousemove.bind(e));s.on("mouseup"+a,e.endLasso.bind(e));s.on("mouseleave"+a,e.endLasso.bind(e));s.on("keydown"+a,e.onKeydown.bind(e))},removeLassoEventListeners:function(t){var e=t._getLassoExtension();jQuery(e.getDomRefs().gantt).off(a)}};var i=e.extend("sap.gantt.simple.GanttLassoExtension",{_init:function(t,e){this._initLassoStates();return"LassoExtension"},_attachEvents:function(){var t=this.getGantt();n.addEventListeners(t)},_detachEvents:function(){var t=this.getGantt();n.removeEventListeners(t)}});i.prototype._initLassoStates=function(){this.mDom={};this._oLassoStartPoint={};this._bLassoDrawing=false};i.prototype.getSvgElement=function(){return this.getDomRefs().ganttSvg};i.prototype._getShapeConnectRootNode=function(){var t=this.lassoDoms().lasso;return d3.select(t.get(0))};i.prototype.rect=function(t,e,s,o){return"M"+[t,e]+" l"+[s,0]+" l"+[0,o]+" l"+[-s,0]+"z"};i.prototype._getLassoData=function(t){var e=this._oLassoStartPoint.x<t.x?this._oLassoStartPoint.x:t.x;var s=this._oLassoStartPoint.x>t.x?this._oLassoStartPoint.x:t.x;var o=this._oLassoStartPoint.y<t.y?this._oLassoStartPoint.y:t.y;var a=this._oLassoStartPoint.y>t.y?this._oLassoStartPoint.y:t.y;var n={class:"lassoRect",d:this.rect(e,o,s-e,a-o),fill:"#9bdaff",stroke:"#4da5ff","fill-opacity":.5,"stroke-width":2};return n};i.prototype.createLasso=function(t){var e=this._getLassoData(t);if(this.getD3Doms().lassoRect.empty()){var s=this._getShapeConnectRootNode();s.append("path").attr(e)}};i.prototype.isLassoDrawing=function(){return this._bLassoDrawing};i.prototype.beforeLasso=function(t){var e=this.getGantt();if(t.button!==0||e.getSelection().sSelectionMode!==sap.gantt.SelectionMode.MultiWithKeyboardAndLasso&&e.getSelection().sSelectionMode!==sap.gantt.SelectionMode.MultipleWithLasso){return}var o=this.getSvgElement();var a=s.getEventSVGPoint(o,t);this._oLassoStartPoint={x:a.x,y:a.y};if(e.getSelection().sSelectionMode===sap.gantt.SelectionMode.MultiWithKeyboardAndLasso&&!t.ctrlKey){e._bDeselectShapes=true;e.setSelectedShapeUid([])}else{e._bDeselectShapes=false}n.addLassoEventListeners(e)};i.prototype.onMousemove=function(t){if(!this.isLassoDrawing()){this._bLassoDrawing=true;var e=this.getSvgElement();var o=s.getEventSVGPoint(e,t);this.createLasso(o);this.mDom.lassoRect=this.lassoDoms().lassoRect}else{this.onLassoDrawing(t)}};i.prototype.onLassoDrawing=function(t){var e=this.getSvgElement();var o=s.getEventSVGPoint(e,t);var a=this._getLassoData(o);this.mDom.lassoRect.attr(a)};i.prototype.shapeInLasso=function(t,e,s,o,a,n,i,r){if(t>=a&&t<=n&&s>=i&&s<=r||e>=a&&e<=n&&s>=i&&s<=r||t>=a&&t<=n&&o>=i&&o<=r||e>=a&&e<=n&&o>=i&&o<=r||t<=a&&e>=n&&s>=i&&s<=r||t<=a&&e>=n&&o>=i&&o<=r||t>=a&&t<=n&&o>=r&&s<=i||e>=a&&e<=n&&o>=r&&s<=i){return true}return false};i.prototype.getShapeElementByTarget=function(t,e){return jQuery(e.getDraggableDOMElement(t)).control(0,true)};i.prototype.getDraggableDOMElement=function(t){return jQuery(t).closest("[data-sap-gantt-shape-id]").get(0)};i.prototype.endLasso=function(t){var e=this.getGantt();var a=e._getLassoExtension();if(this.isLassoDrawing()){var i=this._getShapeConnectRootNode();i.selectAll("*").remove()}n.removeLassoEventListeners(this.getGantt());var r=this.getSvgElement();var g=s.getEventSVGPoint(r,t);var h=e._getLassoExtension()._oLassoStartPoint;var p=h.x<g.x?h.x:g.x;var v=h.x>g.x?h.x:g.x;var f=h.y<g.y?h.y:g.y;var l=h.y>g.y?h.y:g.y;var c,d,S,u,L,y,E={x:0,y:0};var m=e.getEnableLassoInvert();var x=e.getSelectedShapeUid();var _=m?[]:x;var D=[];var b=jQuery(r);var w=jQuery(b.find(".sapGanttChartShapes")).find(".baseShapeSelection").toArray();var R=jQuery(b.find(".sapGanttChartRls")).find(".baseShapeSelection").toArray();var P=false;w.forEach(function(t,e){if(!t.classList.contains("sapGanttTextNoPointerEvents")){L=a.getShapeElementByTarget(t,a);if(L){P=L.getSelectable();E=o.getShapeBias(L);y=L.getShapeUid()?L.getShapeUid():L.getParentRowSettings().getShapeUid(L)}c=t.getBBox().x+E.x;d=c+t.getBBox().width;S=t.getBBox().y+E.y;u=S+t.getBBox().height;var s=a.shapeInLasso(c,d,S,u,p,v,f,l);var n=L?x.indexOf(y):0;var i=n===-1?false:true;if(s){if(L&&P&&!i&&_.indexOf(y)===-1){_.push(y)}else if(m&&L&&P&&i){D.push(y)}}else if(m&&L&&P&&i){_.push(y)}if(L){w[e]=y}}});R.forEach(function(t,e){L=a.getShapeElementByTarget(t,a);if(L){P=L.getSelectable();y=L.getShapeUid()?L.getShapeUid():L.getParentRowSettings().getShapeUid(L)}if(m&&L&&P&&x.indexOf(y)!==-1){_.push(y)}if(L){R[e]=y}});if(m){x.forEach(function(t){if(w.indexOf(t)===-1&&R.indexOf(t)===-1){_.push(t)}})}var G=[];_.forEach(function(t){if(G.indexOf(t)===-1&&D.indexOf(t)===-1){G.push(t)}});this._initLassoStates();if(e.getSelectedShapeUid().toString()===G.toString()){e._bSupressShapeChangeEvent=true}else{e._bSupressShapeChangeEvent=false}e.setSelectedShapeUid(G)};i.prototype.onKeydown=function(e){if(this.isLassoDrawing()&&e.keyCode===t.ESCAPE){this.endLasso(e)}};i.prototype.lassoDoms=function(){var t=jQuery(this.getSvgElement());var e=t.find("g.sapGanttChartLasso");var s=t.find("rect.sapGanttBackgroundSVGRow");return{lassoRect:e.find(".lassoRect"),rowArea:s,lasso:e}};i.prototype.getD3Doms=function(){var t=this._getShapeConnectRootNode();return{lassoRect:t.selectAll(".lassoRect")}};return i});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttPointerExtension", ["sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/gantt/misc/Utility","./GanttExtension","../drawer/CursorLine","./CoordinateUtils","./GanttUtils","sap/ui/core/format/DateFormat","sap/m/Text","sap/ui/core/format/TimezoneUtil"],function(jQuery,t,e,o,r,i,n,a,l,s){"use strict";var c=".sapGanttPointer";var u="contextmenu"+c;var g=sap.gantt.DragOrientation;var h=["mouseenter","mouseleave","click","dblclick","mouseup","mousedown"],f=h.map(function(t){return t+c});var d="mousemove",p=d+c,S=p+" mouseup"+c;var v=h.reduce(function(t,e){t[e]=e;return t},{});v[d]=d;var m={Forward:"forward",Backward:"backward",Bottom:"bottom",Top:"top"};var b=50;var w=null;var A={addEventListeners:function(t){var e=t._getPointerExtension(),o=jQuery(e.getDomRefs().ganttSvg),r=jQuery(e.getDomRefs().headerSvg);A.removeEventListeners(t);if(w===null){w=n.adhocLinesPresentAndEnabled(t)}f.forEach(function(t){o.on(t,e.onGanttChartMouseEvent.bind(e));if(w){r.on(t,e.onGanttChartMouseEvent.bind(e))}else{r.off(t,e.onGanttChartMouseEvent.bind(e))}});o.on(S,e.onCrossSvgMouseEvent.bind(e));r.on(S,e.onCrossSvgMouseEvent.bind(e));o.on(p,e.updateGanttCursorLine.bind(e));this.bindBackgroundRowEvent(o,e,t);e._bIsMouseOnCorrectRow=true;e._bMouseOnSvg=true;if(w){this.bindBackgroundRowEventHeader(r,e)}else{this.unbindBackgroundRowEventHeader(r)}r.on(v.mousedown+c,function(e){var o=t._getDragDropExtension();if(!o.isEventTargetAdhocLine(e)&&!o.isEventTargetDeltaLine(e)){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false}});jQuery(document.getElementById(t.getId())).on(p,i.updateCursorPosition)},removeEventListeners:function(t){var e=t._getPointerExtension(),o=jQuery(e.getDomRefs().ganttSvg),r=jQuery(e.getDomRefs().headerSvg);o.off(c);if(w===null){w=n.adhocLinesPresentAndEnabled(t)}if(w){r.on(v.mousedown+c)}else{r.off(v.mousedown+c)}this.unbindBackgroundRowEvent(o)},doGanttAutoScroll:function(e,o,r,i){var n=e._getPointerExtension();if(n.iTableAutoScrollTimerId){window.clearTimeout(n.iTableAutoScrollTimerId);n.iTableAutoScrollTimerId=null}if(n._bAutoScroll){if(!n.allowAutoScroll()){return}if(!e._getDragDropExtension().isSnapping){n._toggleCursorLine(false)}var a=e._getResizeExtension();if(a.isResizing()){a.onResizing(r)}var l=e._getConnectExtension();if(l.isShapeConnecting()){l.onShapeConnecting(r)}var s=e._getPopoverExtension();s._updatePopoverWhenAutoScroll(r);var c=e._getZoomExtension();c._handleAutoScroll(r);var u=t.getConfiguration().getRTL();var g=30;if(m.Backward===o||m.Top===o){g=-1*g}if(m.Backward===o||m.Forward===o){n._iStep=g}else{n._iStep=0}var h=this.getScrollArea(e,o);var f,d=false;if(o===m.Forward||o===m.Backward){f=u?"scrollLeftRTL":"scrollLeft";d=true}else{f="scrollTop";d=false}l.storeScrollDistance(g,d);var p=h[f]()+g;h[f](p);var S=h[f]();if(S!==p){l.storeScrollDistance(S-p,d)}if(!(i!==undefined&&i===S)){n.iTableAutoScrollTimerId=window.setTimeout(A.doGanttAutoScroll.bind(A),b,e,o,r,S)}}},getScrollArea:function(t,e){var o;var r=t.getTable();var i=jQuery(r.getDomRef(sap.ui.table.SharedDomRef.VerticalScrollBar));if(e===m.Forward||e===m.Backward){o=jQuery(document.getElementById(t.getId()+"-hsb"))}else{o=i}return o},bindBackgroundRowEvent:function(t,e,o){function r(t){jQuery(t).on(v.mouseenter+c+" "+v.mouseleave+c,function(t){var r=e._getRowIndexFromEvent(t);var i=o._getDragDropExtension();e._bIsMouseOnCorrectRow=true;if(i._bEnableRowHighlight&&i.isDragging()){e._bIsMouseOnCorrectRow=false;if(i.oLastDraggedShapeData._highlightedRowIndex){i.oLastDraggedShapeData._highlightedRowIndex.forEach(function(t){if(t===r){e._bIsMouseOnCorrectRow=true}})}}e.onMouseHover(r,t.type===v.mouseenter)});jQuery(t).on(v.click+c+" "+v.dblclick+c,function(t){e.dispatchGanttClick(t)});jQuery(t).on(u,function(t){e.onGanttChartContextMenu(t)})}var i=t.find("rect.sapGanttBackgroundSVGRow");var n=i.length;for(var a=0;a<n;a++){r(i[a])}},bindBackgroundRowEventHeader:function(t,e){jQuery(t[0]).on(v.click+c+" "+v.dblclick+c,function(t){e.dispatchGanttClickHeader(t)})},unbindBackgroundRowEvent:function(t){var e=t.find("rect.sapGanttBackgroundSVGRow");var o=e.length;for(var r=0;r<o;r++){jQuery(e[r]).off(c)}},unbindBackgroundRowEventHeader:function(t){jQuery(t[0]).off(c)}};var T=o.extend("sap.gantt.simple.GanttPointerExtension",{_init:function(t,e){this._oCursorLineDrawer=new r;this.bPreventSingleClick=false;this.iTableAutoScrollTimerId=null;this._iStep=0;return"PointerExtension"},_attachEvents:function(){var t=this.getGantt();A.addEventListeners(t)},_detachEvents:function(){var t=this.getGantt();A.removeEventListeners(t)},destroy:function(){if(this._oCursorLineDrawer){this._oCursorLineDrawer.destroy()}delete this.bPreventSingleClick}});T.prototype.onGanttChartContextMenu=function(t){t.preventDefault();if(t.target===t.currentTarget){var e=this.getGantt();var o=this._getRowIndexFromEvent(t);var r=e.getTable().getRows()[o];e.fireShapeContextMenu({row:r,pageX:t.pageX,pageY:t.pageY})}};T.prototype.onGanttChartMouseEvent=function(t){this.updateGanttCursorLine(t);if(t.type===v.mousedown){this.oMousedownTargetElement=t.target}this.onMouseEnterLeaveEvent(t)};T.prototype.onCrossSvgMouseEvent=function(t){var e=this.getGantt();if(t.type===v.mousemove){if(this.needAutoscrollInContainerIfNecessary()){this.updateCursorStyle("move");this.tableAutoScroll(t)}else{var o=e._getDragDropExtension();var r=e._getConnectExtension();var i=e._getResizeExtension();var n=e._getZoomExtension();if(o.isDeltaLineDragging()||o.isAdhocLineDragging()||o.isDragging()||i.isResizing()||r.isShapeConnecting()||n.isTimeZooming()){this.tableAutoScroll(t)}}}if(t.type===v.mouseup){this.oMouseupTargetElement=t.target;this._bAutoScroll=false}};T.prototype.needAutoscrollInContainerIfNecessary=function(){var t=this.getGantt().getParent();if(t&&t.getGanttCharts){var e=t.getGanttCharts();var o=this.getGantt();return e.some(function(t){return t!==o&&t._getDragDropExtension().isDragging()})}return false};T.prototype.updateCursorStyle=function(t){document.body.style.cursor=t;this.getDomRefs().ganttSvg.style.cursor=t};T.prototype.isPointerInGanttChart=function(t){return this._bMouseOnSvg};T.prototype.isPointerInCorrectRow=function(t){return this._bIsMouseOnCorrectRow};T.prototype.onMouseEnterLeaveEvent=function(t){this.updateCursorStyle("default");if(t.type===v.mouseenter){this._bMouseOnSvg=true}else if(t.type===v.mouseleave){this._bMouseOnSvg=false}};T.prototype.dispatchGanttClick=function(t){if(this.isEventTargetOnGanttRow(t)===false){return}if(t.type===v.click){if(this.oMousedownTargetElement===this.oMouseupTargetElement){this.onGanttSingleClick(t);delete this.oMouseupTargetElement;delete this.oMousedownTargetElement}}else if(t.type===v.dblclick){this.onGanttDoubleClick(t)}};T.prototype.dispatchGanttClickHeader=function(t){if(t.type===v.click){this.onGanttSingleClick(t);delete this.oMouseupTargetElement;delete this.oMousedownTargetElement}};T.prototype.isEventTargetOnGanttRow=function(t){return jQuery(t.target).hasClass("sapGanttBackgroundSVGRow")};T.prototype._getRowIndexFromEvent=function(t){return parseInt(t.target.getAttribute("data-sap-ui-index"),10)};T.prototype._getRowIndexFromElement=function(t){return parseInt(t.getAttribute("data-sap-ui-index"),10)};T.prototype.onGanttSingleClick=function(t){this.getGantt().getSelection().clearAllSelectedShapeIds();this.getGantt().getSelection().updateShape(null,{selected:false,ctrl:t.ctrlKey||t.metaKey});var e=this.getGantt();n.resetStrokeDasharray(e);var o=this._getRowIndexFromEvent(t);var r=e.getTable().getRows()[o];if(!r){return}var i=function(){if(this.bPreventSingleClick===false){this._selectTableRow(e,o);e.fireShapePress({shape:null,row:r})}this.bPreventSingleClick=false}.bind(this);if(e.getDisableShapeDoubleClickEvent()){this.bPreventSingleClick=false;i();return}this.iSingleClickTimer=window.setTimeout(i.bind(this),300)};T.prototype.onGanttDoubleClick=function(t){var e=this.getGantt(),o=e.getDisableShapeDoubleClickEvent(),r,i;if(!o){window.clearTimeout(this.iSingleClickTimer);this.bPreventSingleClick=true}r=this._getRowIndexFromEvent(t);i=e.getTable().getRows()[r];this._selectTableRow(e,r);if(!o){e.fireShapeDoubleClick({shape:null,row:i})}};T.prototype._selectTableRow=function(t,e){var o=this.getGantt().getTable().getSelectionBehavior();var r=sap.ui.table.SelectionBehavior;if(r.Row===o||r.RowOnly===o){t.getSyncedControl().syncRowSelection(e)}};T.prototype.onMouseHover=function(t,e){this.getGantt().getSyncedControl().syncRowHover(t,e)};T.prototype._getAutoScrollStep=function(){if(this._bAutoScroll){return this._iStep}return 0};T.prototype.updateGanttCursorLine=function(t){if(this.getGantt().getEnableCursorLine()===false){return}if(this.getGantt()._getDragDropExtension().isSnapping){return}if(t.type===v.mousemove){var e=i.getEventSVGPoint(this.getDomRefs().ganttSvg,t);this._toggleCursorLine(true,e)}else if(t.type===v.mouseleave){this._toggleCursorLine(false)}};T.prototype._toggleCursorLine=function(t,e){var o=this._getCursorLineDOMs();var r=this.getGantt().getParent();var i=r.isA("sap.gantt.simple.GanttChartContainer")&&r.getEnableStatusBar();if(t){this._oCursorLineDrawer.drawSvg(o.allGanttSvg,o.allHeaderSvg,this.getGantt().getLocale(),e);if(i){this.customBar(r,true,this.getGantt().getAxisTime().viewToTime(e.x))}}else{this._oCursorLineDrawer.destroySvg(o.allGanttSvg,o.allHeaderSvg);if(i){this.customBar(r,false)}}};T.prototype.customBar=function(t,o,r){var i=new l({text:""});var n=a.getDateTimeWithTimezoneInstance({pattern:t.getStatusBarDatePattern(),calendarWeekNumbering:this.getGantt().getAxisTimeStrategy().getCalendarWeekNumbering(),showTimezone:false});var s=a.getDateTimeWithTimezoneInstance({pattern:t.getStatusBarTimePattern(),showTimezone:false});t.msgText.setWidth(o?"70%":"100%");t.dateTimeText.setWidth(o?"30%":"0%");t.dateTimeText.setText(o?e.getLowerCaseLabel(e.getFormattedDate(n,r)+" "+e.getFormattedDate(s,r)):i.getText())};T.prototype._getCursorLineDOMs=function(){return{allHeaderSvg:d3.selectAll(".sapGanttChartWithSingleTable .sapGanttChartHeaderSvg"),allGanttSvg:d3.selectAll(".sapGanttChartWithSingleTable .sapGanttChartSvg")}};T.prototype.tableAutoScroll=function(t){this._bAutoScroll=false;var e=this.getGantt();var o=e._getDragDropExtension();var r=o.isDragging();var i=e.getDragOrientation();var n=r&&i===g.Horizontal;var a=r&&i===g.Vertical;if(this.ifAutoScrollToRight()&&!a){window.setTimeout(function(){A.doGanttAutoScroll(this.getGantt(),m.Forward,t)}.bind(this),b)}else if(this.ifAutoScrollToLeft()&&!a){window.setTimeout(function(){A.doGanttAutoScroll(this.getGantt(),m.Backward,t)}.bind(this),b)}else if(this.ifAutoScrollToDown()&&!n){window.setTimeout(function(){A.doGanttAutoScroll(this.getGantt(),m.Bottom,t)}.bind(this),b)}else if(this.ifAutoScrollToUp()&&!n){window.setTimeout(function(){A.doGanttAutoScroll(this.getGantt(),m.Top,t)}.bind(this),b)}else{this._bAutoScroll=false}};T.prototype.ifAutoScrollToRight=function(){var t=this.getAutoScrollPosition();this._bAutoScroll=t.iLocationX>t.oScrollAreaRect.left+t.iScrollAreaWidth-t.iScrollTriggerAreaWidth&&t.iLocationX<t.oScrollAreaRect.left+t.iScrollAreaWidth&&t.iScrollAreaScrollLeft+t.iScrollAreaWidth<t.oScrollArea.scrollWidth;return this._bAutoScroll};T.prototype.ifAutoScrollToLeft=function(){var t=this.getAutoScrollPosition();this._bAutoScroll=t.iLocationX<t.oScrollAreaRect.left+t.iScrollTriggerAreaWidth&&t.iLocationX>t.oScrollAreaRect.left&&t.iScrollAreaScrollLeft>0;return this._bAutoScroll};T.prototype.ifAutoScrollToDown=function(){var t=this.getAutoScrollPosition();this._bAutoScroll=t.iLocationY>t.oVisibleScrollAreaRect.top+t.iVisibleScrollAreaHeight-t.iScrollTriggerAreaHeight&&t.iLocationY<t.oVisibleScrollAreaRect.top+t.iVisibleScrollAreaHeight&&t.iScrollAreaScrollTop+t.iScrollAreaHeight-t.iBaseRowHeight<=t.iScrollHeight;return this._bAutoScroll};T.prototype.ifAutoScrollToUp=function(){var t=this.getAutoScrollPosition();this._bAutoScroll=t.iLocationY<t.oVisibleScrollAreaRect.top+t.iScrollTriggerAreaHeight&&t.iLocationY>t.oVisibleScrollAreaRect.top;return this._bAutoScroll};T.prototype.getAutoScrollPosition=function(){var e=t.getConfiguration().getRTL();var o=this.getGantt().getTable();var r=20,n=20,a=document.getElementById(this.getGantt().getId()+"-gantt"),l=jQuery(a),s=a.getBoundingClientRect(),c=l.outerWidth(),u=l.outerHeight(),g=s,h=u,f=this.getGantt()._oExpandModel.getBaseRowHeight(),d=e?l.scrollLeftRTL():l.scrollLeft();var p=jQuery(o.getDomRef(sap.ui.table.SharedDomRef.VerticalScrollBar)),S=p.scrollTop(),v=p.get(0).scrollHeight;var m=i.getLatestCursorPosition().pageX,b=i.getLatestCursorPosition().pageY;return{iLocationX:m,iLocationY:b,oScrollAreaRect:s,oScrollArea:a,iScrollAreaWidth:c,iScrollTriggerAreaWidth:r,iScrollTriggerAreaHeight:n,iScrollAreaScrollLeft:d,oVisibleScrollAreaRect:g,iVisibleScrollAreaHeight:h,iScrollAreaScrollTop:S,iBaseRowHeight:f,iScrollHeight:v,iScrollAreaHeight:u}};T.prototype.allowAutoScroll=function(){return this.ifAutoScrollToRight()||this.ifAutoScrollToLeft()||this.ifAutoScrollToDown()||this.ifAutoScrollToUp()};return T});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttPopoverExtension", ["sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ui/core/Core","sap/gantt/misc/Utility","./GanttExtension","./GanttUtils","./CoordinateUtils","sap/gantt/library"],function(jQuery,e,t,o,i,n,s,r){"use strict";var a=".sapGanttPopover";var p="mousedown";var v=p+a;var h=["mousemove","mouseup","keydown"];var g=h.reduce(function(e,t){e[t]=t;return e},{});var f=h.map(function(e){return e+a});var u={dispatchEvent:function(e){var t=this._getPopoverExtension();if(e.type===g.mousemove){t.onMouseMove(e)}else if(e.type===g.mouseup){t.onMouseUp(e)}else if(e.type===g.keydown){t.onKeydown(e)}},entry:function(e){var t=this._getPopoverExtension();t.onMouseDown(e)},addEventListeners:function(e){this.removeEventListeners(e);var t=jQuery(e._getPopoverExtension().getDomRefs().ganttSvg);t.on(v,u.entry.bind(e))},removeEventListeners:function(e){var t=jQuery(e._getPopoverExtension().getDomRefs().ganttSvg);t.off(v)},addPopoverEventListeners:function(e){this.removePopoverEventListeners(e);f.forEach(function(t){jQuery(document).on(t,u.dispatchEvent.bind(e))})},removePopoverEventListeners:function(e){jQuery(document).off(a)}};var d=r.dragdrop.SnapMode;var c=i.extend("sap.gantt.simple.GanttPopoverExtension",{_init:function(e,t){this._initPopoverStates();return"PopoverExtension"},_attachEvents:function(){var e=this.getGantt();u.addEventListeners(e)},_detachEvents:function(){var e=this.getGantt();u.removeEventListeners(e)}});c.prototype._initPopoverStates=function(){this._iOffsetX=10;this._iOffsetY=32;this._bNeedReverse=false;this.snapTimer=null};c.prototype.onMouseMove=function(e){var t=this.getGantt()._getDragDropExtension();if(this.getGantt().getShowShapeTimeOnDrag()&&this.isDraggingOrResizing(e)){if(this.getGantt().getSnapMode()!==d.None){this._showPopoverOnSnap(e,true)}else{this._showPopover(e,true)}}else if(t.isDragging()&&this.bMultipleShapes){if(this.getGantt().getSnapMode()!==d.None){this._showPopoverOnSnap(e)}else{this._showPopover(e)}}};c.prototype._showPopoverOnSnap=function(e,t){if(this.snapTimer){window.clearTimeout(this.snapTimer);this.snapTimer=null}this.snapTimer=window.setTimeout(function(){this._showPopover(e,t)}.bind(this),100)};c.prototype.onMouseDown=function(e){var t=this.getGantt().getSelection();var o=t.numberOfSelectedDraggableShapes();this.bMultipleShapes=o>1;this.pageWidth=window.innerWidth;this.pageHeight=window.innerHeight;u.addPopoverEventListeners(this.getGantt())};c.prototype.onMouseUp=function(e){u.removePopoverEventListeners(this.getGantt());this._hidePopover(e);this._initPopoverStates()};c.prototype.onKeydown=function(t){if(t.keyCode===e.ESCAPE){u.removePopoverEventListeners(this.getGantt());this._hidePopover(t);this._initPopoverStates()}};c.prototype.isDraggingOrResizing=function(e){var t=this.getGantt()._getDragDropExtension();var o=this.getGantt()._getResizeExtension();return t.isDragging()&&!this.bMultipleShapes||o.isResizing()};c.prototype._buildPopover=function(e,o){var i=t.getLibraryResourceBundle("sap.gantt").getText("GNT_CURRENT_START");var n=t.getLibraryResourceBundle("sap.gantt").getText("GNT_CURRENT_END");var s=this.getGantt()._getDragDropExtension();var r=s.getNumberOfDragObject();var a=function(e,t){var o="<span class='sapUiTinyMarginEnd sapMLabel'>"+e+"</span>"+"<span class='sapMLabel "+t+"'></span>";return"<div class='sapUiTinyMargin'>"+o+"</div>"};var p=function(e,t){var o="<span class='sapMLabel "+t+"'>"+e+"</span>";return"<div class='sapUiTinyMargin sapGanttPopoverCountText'>"+o+"</div>"};if(o){this.oTimePopover=jQuery("<div id='sapGanttPopoverWrapper' class='sapGanttDragElementHidden'>"+a(i,"sapGanttPopoverStartTime")+a(n,"sapGanttPopoverEndTime")+"</div>")}else{this.oCountPopover=jQuery("<div id='sapGanttPopoverWrapper' class='sapGanttDragElementHidden'>"+p(r,"sapGanttPopoverObjectCount")+"</div>")}this.createAnchor();this._calcPopoverOffset();var v=jQuery(document.getElementById("sapGanttPopoverAnchor"));if(o){v.append(this.oTimePopover)}else{v.append(this.oCountPopover)}var h=this._getPopoverData(e,o);this._updateTime(h,o)};c.prototype._updateTime=function(e,o){var i=t.getConfiguration().getRTL();var n=i?"marginRight":"marginLeft";var s={marginTop:e.offsetY+"px"};s[n]=e.offsetX+"px";var r=jQuery(document.getElementById("sapGanttPopoverWrapper")).css(s);if(o){r.find(".sapGanttPopoverStartTime").text(e.startNewDate);r.find(".sapGanttPopoverEndTime").text(e.endNewDate)}};c.prototype._getDragDropOrResizingDom=function(){var e=this.getGantt()._getDragDropExtension();var t=this.getGantt()._getResizeExtension();if(e.isDragging()){return e.dragGhost.get(0).children[0]}else if(t.isResizing()){var o=n.getShapesWithUid(this.getGantt().getId(),[t.origin.resizeFor]);if(o.length===1&&o[0]){return document.getElementById(o[0].getShapeUid()+"-selected")}}};c.prototype.createAnchor=function(e){var t=jQuery(document.getElementById("sapGanttPopoverAnchor"));if(t.length===0){t=jQuery("<div id='sapGanttPopoverAnchor'></div>");jQuery(document.body).append(t)}this._oTargetDom=t.get(0)};c.prototype.moveAnchor=function(e,t){var o=s.getEventPosition(e),i=o.pageX,n=o.pageY,r=this.pageWidth,a=this.pageHeight;if(i<-this._iOffsetX){i=-this._iOffsetX}else if(i>r+this._iOffsetX){i=r+this._iOffsetX}var p=this._iOffsetY;if(t&&this.oTimePopover){p+=this.oTimePopover.height()}else if(!t&&this.oCountPopover){p+=this.oCountPopover.height()}if(n<-this._iOffsetY){n=-this._iOffsetY}else if(n>a-p){n=a-p}var v=document.getElementById("sapGanttPopoverAnchor");if(v){v.style.left=i+"px";v.style.top=n+"px"}};c.prototype.checkIfNeedReverse=function(e,o){var i=t.getConfiguration().getRTL();var n=s.getEventPosition(e);var r=o?this.oTimePopover.width()+10:this.oCountPopover.width()+10;if(i&&n.pageX<r||!i&&n.pageX+r>=this.pageWidth||this.getGantt().getGhostAlignment()!=="End"&&this.bMultipleShapes){this._bNeedReverse=true}else{this._bNeedReverse=false}};c.prototype._showPopover=function(e,t){this.moveAnchor(e,t);if(t&&this.oTimePopover||!t&&this.oCountPopover){document.getElementById("sapGanttPopoverWrapper").classList.remove("sapGanttDragElementHidden");this.checkIfNeedReverse(e,t);this._calcPopoverOffset();var o=this._getPopoverData(e,t);this._updateTime(o,t)}else{this._buildPopover(e,t)}};c.prototype._hidePopover=function(){var e=document.getElementById("sapGanttPopoverAnchor");if(e){e.parentNode.removeChild(e)}this.oTimePopover=null;this.oCountPopover=null};c.prototype._getPopoverData=function(e,t){var i=this._iOffsetX;if(this._bNeedReverse){i=t?-i-this.oTimePopover.width():-i-this.oCountPopover.width()}var s={offsetX:i,offsetY:this._iOffsetY};if(t){var r=this._getCurrentTime(e);if(r){var a=n.getTimeFormaterBySmallInterval(this.getGantt());s.startNewDate=o.getLowerCaseLabel(a.format(r.time));s.endNewDate=o.getLowerCaseLabel(a.format(r.endTime))}}return s};c.prototype._getCurrentTime=function(e){var t=this.getGantt()._getDragDropExtension();var o=this.getGantt()._getResizeExtension();if(t.isDragging()){return t._getGhostTime(e,true)}else if(o.isResizing()){return o._getResizeTime(e)}};c.prototype._calcPopoverOffset=function(){this._iOffsetY=this._getOffsetY()};c.prototype._getOffsetY=function(){var e=this._getDragDropOrResizingDom();var t=e&&e.getBoundingClientRect();var o=32;if(t){o=t.height+2}return Math.ceil(o)};c.prototype._updatePopoverWhenAutoScroll=function(e){if(this.getGantt().getShowShapeTimeOnDrag()&&this.isDraggingOrResizing()){this._showPopover(e,true)}};return c});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttPrinting", ["sap/gantt/library","sap/ui/thirdparty/jquery","sap/ui/core/Element","sap/ui/core/Core","sap/ui/core/format/NumberFormat","sap/m/Label","sap/m/Text","sap/m/Title","sap/m/Dialog","sap/m/ProgressIndicator","sap/m/Button","sap/m/Input","sap/m/FlexBox","sap/m/library","sap/m/FlexItemData","sap/m/ScrollContainer","sap/m/ComboBox","sap/m/RadioButton","sap/m/RadioButtonGroup","sap/m/CheckBox","sap/m/Slider","sap/m/ResponsiveScale","sap/m/StepInput","sap/m/DatePicker","sap/m/BusyDialog","sap/m/MessageStrip","sap/m/Switch","sap/m/Panel","sap/m/TextArea","sap/gantt/misc/Format","sap/gantt/simple/GanttChartContainer","sap/gantt/config/TimeHorizon","sap/gantt/axistime/FullScreenStrategy","sap/ui/core/Item","sap/ui/core/HTML","sap/ui/layout/VerticalLayout","sap/ui/layout/HorizontalLayout","sap/ui/layout/GridData","sap/ui/layout/form/SimpleForm","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/core/ResizeHandler","sap/gantt/thirdparty/jspdf","sap/gantt/thirdparty/html2canvas"],function(t,e,i,n,a,o,r,s,h,l,g,p,_,d,u,c,C,P,f,m,v,y,T,x,b,w,G,M,S,R,D,I,N,E,B,A,H,O,F,L,k,z,W,V){"use strict";var U=d.FlexDirection,j=t.simple.GanttChartWithTableDisplayType;V=window.html2canvas;W=window.jsPDF;var K=i.extend("sap.gantt.simple.GanttPrinting",{metadata:{library:"sap.gantt",associations:{ganttChart:{type:"sap.gantt.simple.GanttChartWithTable",multiple:false}}}});K._oPaperSizes={A5:{width:Y(148),height:Y(210)},A4:{width:Y(210),height:Y(297)},A3:{width:Y(297),height:Y(420)},A2:{width:Y(420),height:Y(594)},A1:{width:Y(594),height:Y(841)},A0:{width:Y(841),height:Y(1189)},Letter:{width:Q(8.5),height:Q(11)},Legal:{width:Q(8.5),height:Q(14)},Tabloid:{width:Q(11),height:Q(17)},Custom:{width:undefined,height:undefined}};var J="9px Arial, Helvetica, sans-serif";var $="12px Arial, Helvetica, sans-serif";var X="16384";K.prototype.init=function(){this._oRb=n.getLibraryResourceBundle("sap.gantt");var t={multiplePage:true,qualityWarning:false,showOrientationMessage:false,orientationMessage:this._oRb.getText("GNT_PRNTG_SINGLE_PAGE_LANDSCAPE"),portrait:true,paperSize:"A4",paperWidth:K._oPaperSizes.A4.width,paperHeight:K._oPaperSizes.A4.height,unit:"mm",repeatSelectionPanel:false,scale:100,duration:"all",startDate:new Date,endDate:new Date,showPageNumber:false,showHeaderText:false,headerText:"",showFooterText:false,footerText:"",exportAll:true,exportRange:"",exportAsJPEG:true,compressionQuality:75,previewPageNumber:1,lastPageNumber:undefined,marginType:"default",marginLocked:false,marginTop:Y(5),marginRight:Y(5),marginBottom:Y(5),marginLeft:Y(5),cropMarks:false,cropMarksWeight:.25,cropMarksOffset:Y(3)};this._oModel=new L(t);this._oGanttCanvas=undefined;this._iHeaderAndFooterHeight=Y(8);this._ganttChartContainer=new D};K.prototype.export=function(){this._savePdf()};K.prototype.renderGanttClone=function(t){if(n.getConfiguration().getRTL()&&!t){return Promise.resolve()}return new Promise(function(t){this._ganttChartClone.getTable().attachEventOnce("_rowsUpdated",t,this);this._ganttChartClone.invalidate()}.bind(this))};K.prototype.mergeCanvases=function(t){var e=document.createElement("canvas"),i=e.getContext("2d"),n=t[0].width,a=[],o=t.reduce(function(t,e,i,n){a.push({cnv:e,y:t});t+=n[i].height;return t},0);e.width=n;e.height=o;a.forEach(function(t){i.beginPath();i.drawImage(t.cnv,0,t.y,n,t.cnv.height)});if(e.width>X||e.height>X){this._oClonedGanttDiv.style.height=e.height+"px";this._oClonedGanttDiv.style.width=e.width+"px";return undefined}return e};K.prototype.generateCanvasAsync=function(t){var e=0;var i=this._getOriginalGanttChart().getTable()._getTotalRowCount()/this.iThreshold;this.bLast=i>1?false:true;var a=this;var o=[];var r=0;var s=25/Math.ceil(i);function h(){if(a._bMultipleBatches){r+=s;a._oProgressIndicator.setPercentValue(r)}}function l(t){if(a._bCancel){return Promise.reject()}a._oClonedGanttDiv.style.height=X+"px";var o=t*a.iThreshold;var r=a._getOriginalGanttChart().getTable()._getTotalRowCount();a.iThreshold=Math.min(a.iThreshold,r-o);a.bLast=e+1>=i?true:false;a._ganttChartClone.getTable().setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Fixed);a._ganttChartClone.getTable().setVisibleRowCount(a.iThreshold);a.bFirst=t===0?true:false;a._ganttChartClone.getTable().setFirstVisibleRow(o);if(n.getConfiguration().getRTL()){a._ganttChartClone._bRenderGanttClone=true}return a._ganttChartClone.getInnerGantt().resolveWhenReady(a._originalHasRenderedShapes)}function g(t){h();return l(t).then(function(){h();a._bExpandCollapse=true;return a._expandAndCollapse()}).then(function(){a._ganttChartClone._bExpandRows=true;h();return a._expandRowSettings()}).then(function(){a._ganttChartClone._bExpandRows=false;a._setCloneDivHeight();document.getElementById(a._ganttChartClone.getId()+"-sapGanttBackgroundTableContent").style.height=a._iContentHeight;document.getElementById(a._ganttChartClone.getTable().getId()+"-tableCCnt").style.height=a._iContentHeight;if(!a.bLast){h()}return a._createGanttCanvas()}).then(function(t){return o.push(t)}).then(function(){if(t===0){a._ganttChartClone.setShowGanttHeader(false)}e=e+1;if(e<i){g(e)}else if(!a._bCancel){a._oGanttCanvas=a.mergeCanvases(o);a._updateDialogPreview();a._oDialog.getContent()[0].setBusy(false);a._oFlexBoxPreview.setBusy(false);a._oButtonExport.setEnabled(true);if(a._bMultipleBatches){a._oProgressIndicator.setPercentValue(100);setTimeout(function(){a._closeProgressIndicator(true)},500)}}else{return Promise.reject()}}).catch(function(){})}return g(t)};K.prototype.open=function(t){if(!this.getGanttChart()||!this._getOriginalGanttChart().isA("sap.gantt.simple.GanttChartWithTable")){throw new Error("Association 'ganttChart' of type 'sap.gantt.simple.GanttChartWithTable' is not set")}var e=this;if(t){t(this._ganttChartClone.getTable())}this._createAndOpenDialog();this._oDialog.getContent()[0].setBusy(true);this._oButtonExport.setEnabled(false);if(this._ganttChartClone._enableOptimisation){this._ganttChartClone.setShowGanttHeader(true);return this._drawClonedGantt().then(function(){if(e._bMultipleBatches){e._openProgressDialog()}return e.generateCanvasAsync(0)}).catch(function(t){if(t&&t.bMaxCanvasSizeExceeded){e._updateDialogPreviewCanvas();e._oDialog.getContent()[0].setBusy(false)}})}else{if(n.getConfiguration().getRTL()){e._ganttChartClone._bRenderGanttClone=true}return this._drawClonedGantt().then(function(){e._bExpandCollapse=true;return e._expandAndCollapse()}).then(function(){e._ganttChartClone._bExpandRows=true;return e._expandRowSettings()}).then(function(){e._ganttChartClone._bExpandRows=false;e._setCloneDivHeightNonOptimised();document.getElementById(e._ganttChartClone.getId()+"-sapGanttBackgroundTableContent").style.height=e._iContentHeight;document.getElementById(e._ganttChartClone.getTable().getId()+"-tableCCnt").style.height=e._iContentHeight;return e._createGanttCanvas()}).then(function(t){e._oGanttCanvas=t;e._updateDialogPreview();e._oDialog.getContent()[0].setBusy(false);e._oButtonExport.setEnabled(true)}).catch(function(t){if(t&&t.bMaxCanvasSizeExceeded){e._updateDialogPreviewCanvas();e._oDialog.getContent()[0].setBusy(false)}})}};K.prototype.close=function(){var t=this._getOriginalGanttChart();if(this._initialDisplayType===j.Table){t.setSelectionPanelSize(this._initialSelectionPanelSize);t.setDisplayType(this._initialDisplayType);if(t.getParent()&&t.getParent().isA("sap.gantt.simple.GanttChartContainer")&&t.getParent().getToolbar()){t.getParent().getToolbar()._oDisplayTypeSegmentedButton.setSelectedKey(j.Table)}}this._ganttChartClone.destroy();this._ganttChartClone=null;this._ganttChartContainer.destroy();this._ganttChartContainer=null;document.body.removeChild(this._oClonedGanttDiv);z.deregister(this._sResizeHandlerId);this._oDialog.close();this._oDialog.destroy()};K.prototype._closeProgressIndicator=function(t){this._oProgressDialog.close();this._oProgressDialog.destroy();this._bCancel=true;if(!this._bUpdateGanttCanvas&&!t){this.close()}};K.prototype.setGanttChart=function(t){this.setAssociation("ganttChart",t);this._initialDisplayType=t.getDisplayType();this._initialSelectionPanelSize=t._iLastTableAreaSize?t._iLastTableAreaSize:t.getSelectionPanelSize();var e=this._initialDisplayType===j.Table?true:false;if(e){t.setSelectionPanelSize("100%");t.setDisplayType(j.Both)}this._ganttChartClone=t.clone();this._ganttChartClone._enableOptimisation=t.getPrintingBatchSize()>0?true:false;this._bUpdateGanttCanvas=false;this._bCancel=false;this._ganttChartClone.setEnableChartOverflowToolbar(false);this.canvasScale=2;if(this._ganttChartClone._enableOptimisation){this._ganttChartClone.getTable().destroyExtension();var i=e?1:Math.max(t.getAxisTimeStrategy().getZoomLevel(),1);this.iThreshold=Math.min(Math.round(t.getPrintingBatchSize()/i),t.getTable()._getTotalRowCount());this._bMultipleBatches=t.getTable()._getTotalRowCount()>this.iThreshold;this.bFirst=true;this._ganttChartClone.getTable().setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Fixed);this._ganttChartClone.getTable().setVisibleRowCount(this.iThreshold);this._ganttChartClone.getTable().setThreshold(this.iThreshold);this._ganttChartClone.setParent(this._getOriginalGanttChart(),"originalGanttChart",true)}else{this._ganttChartContainer.setParent(this._getOriginalGanttChart(),"originalGanttChart",true)}this._addBackOriginalGanttRowBinding(this._ganttChartClone,t);this._originalHasRenderedShapes=t.getInnerGantt().hasRenderedShapes();this._ganttChartClone.mEventRegistry={};this._ganttChartClone.setHeight("100%");var n=t._oSplitter._calculatedSizes[0];if(this._initialDisplayType===j.Chart){this._ganttChartClone.setSelectionPanelSize("1px")}else{this._ganttChartClone.setSelectionPanelSize(n.toString()+"px")}var a=t.getAxisTimeStrategy();if(!a.isA("sap.gantt.axistime.FullScreenStrategy")&&!e){t.isPrint=true;t._getScrollExtension()._updateVisibleHorizonForce();var o=this._ganttChartClone.getAxisTimeStrategy();o.setTotalHorizon(a.getTotalHorizon());o.setVisibleHorizon(a.getTotalHorizon())}var r=a.getVisibleHorizon();var s=this._getHorizonDates(r);var h=this._horizonWidthInSec(s);this._fPixelsBySec=t.getVisibleWidth()/h;this._ganttChartClone.isPrint=true;this._ganttChartClone._bClonedGantt=true;if(!this._ganttChartClone._enableOptimisation){this._ganttChartContainer.addGanttChart(this._ganttChartClone)}return this};K.prototype._expandAndCollapse=function(){var t=this;return this._expandAndCollapseRow().then(function(){if(t._bExpandCollapse){return t._expandAndCollapse()}else{return Promise.resolve()}})};K.prototype._expandAndCollapseRow=function(){if(this._bCancel){this._bExpandCollapse=false;return Promise.reject()}var t=this._getOriginalGanttChart().getTable();if(!t.isA("sap.ui.table.TreeTable")){this._bExpandCollapse=false;return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes)}var e=t.getBinding("rows"),i=this._ganttChartClone.getTable().getBinding("rows");for(var n=0;n<e.getLength();n++){if(i.findNode(n)!==undefined&&e.isExpanded(n)&&!i.isExpanded(n)){i.expand(n);return this.renderGanttClone(true)}else if(i.findNode(n)!==undefined&&!e.isExpanded(n)&&i.isExpanded(n)){i.collapse(n);return this.renderGanttClone(true)}}this._bExpandCollapse=false;return Promise.resolve()};K.prototype._expandRowSettings=function(){if(this._bCancel){return Promise.reject()}var t=this._ganttChartClone.getShapeSchemes().find(function(t){return!t.getPrimary()});if(t){this._ganttChartClone.expand(t.getKey(),this._getOriginalGanttChart()._aExpandedIndices)}return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes)};K.prototype._onResize=function(){var t=this._oHTMLDialogPreview.getDomRef();t.style.overflow="hidden";this._resizePrintingPreviewPage();t.style.overflow="visible"};function Y(t){return t*3.78}function q(t){return t/3.78}function Q(t){return t/.01042}function Z(t){return t*.01042}K.prototype._convertUnitToPx=function(t){var e=this._oModel.getProperty("/unit");if(!e){return undefined}switch(e){case"mm":return Y(t);case"cm":return Y(t)*10;case"in":return Q(t);default:return undefined}};K.prototype._convertPxToUnit=function(t){var e=this._oModel.getProperty("/unit");if(!e){return undefined}switch(e){case"mm":return q(t);case"cm":return q(t)/10;case"in":return Z(t);default:return undefined}};K.prototype._onChangeUnitComboBox=function(){this._updatePaperSizeInputs();this._updateMarginInputs()};K.prototype._updatePaperSizeInputs=function(){var t=this._oModel.getProperty("/paperWidth"),e=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(t,e)};K.prototype._setPaperSizeInputs=function(t,e){if(this._oInputPaperWidth){this._oInputPaperWidth.setValue(this._convertPxToUnit(t))}if(this._oInputPaperHeight){this._oInputPaperHeight.setValue(this._convertPxToUnit(e))}};K.prototype._setPaperSizesToModel=function(t,e){this._oModel.setProperty("/paperWidth",t);this._oModel.setProperty("/paperHeight",e)};K.prototype._updatePaperSizeValues=function(){var t=this._oModel.getProperty("/paperSize"),e=this._oModel.getProperty("/portrait"),i,n;if(!t||t==="Custom"){return}var a=K._oPaperSizes[t];if(e){i=a.width;n=a.height}else{i=a.height;n=a.width}this._setPaperSizeInputs(i,n);this._setPaperSizesToModel(i,n);if(t==="Letter"||t==="Legal"||t==="Tabloid"){this._oComboBoxUnit.setSelectedKey("in")}else{this._oComboBoxUnit.setSelectedKey("mm")}this._onChangeUnitComboBox();this._updateDialogPreview()};K.prototype._updatePaperOrientation=function(t){var e=this._oModel.getProperty("/paperWidth"),i=this._oModel.getProperty("/paperHeight");if(i>e){this._oModel.setProperty("/portrait",true);this._radioGroupOrientation.setSelectedIndex(0)}else{this._oModel.setProperty("/portrait",false);this._radioGroupOrientation.setSelectedIndex(1)}};K.prototype._onChangePaperSizeInput=function(t){var e=t.getSource();var i=this._convertUnitToPx(a.getFloatInstance().parse(e.getValue()));if(e===this._oInputPaperWidth){this._oModel.setProperty("/paperWidth",i)}else{this._oModel.setProperty("/paperHeight",i)}this._oComboBoxPaperSizes.setSelectedKey("Custom");this._updatePaperOrientation();this._updateDialogPreview()};K.prototype._onChangeCompressionSlider=function(t){var e=t.getSource();var i=e.getValue();this._setCompressionComboBoxItem(i)};K.prototype._setCompressionComboBoxItem=function(t){if(t===100){this._oComboBoxCompression.setSelectedKey("maximum")}else if(t>=75){this._oComboBoxCompression.setSelectedKey("high")}else if(t>=50){this._oComboBoxCompression.setSelectedKey("medium")}else{this._oComboBoxCompression.setSelectedKey("low")}};K.prototype._onChangeCompressionComboBox=function(t){var e=t.getSource().getSelectedKey();var i={maximum:100,high:75,medium:50,low:25};this._oModel.setProperty("/compressionQuality",i[e])};K.prototype._onChangeOrientation=function(){var t=this._oModel.getProperty("/paperWidth"),e=this._oModel.getProperty("/paperHeight");this._setPaperSizeInputs(e,t);this._setPaperSizesToModel(e,t);this._updateDialogPreview()};K.prototype._onChangeExportTypes=function(){this._updateDialogPreview()};K.prototype._setMarginInputs=function(t,e,i,n){this._oInputMarginTop.setValue(this._convertPxToUnit(t));this._oInputMarginRight.setValue(this._convertPxToUnit(e));this._oInputMarginBottom.setValue(this._convertPxToUnit(i));this._oInputMarginLeft.setValue(this._convertPxToUnit(n))};K.prototype._setMarginsToModel=function(t,e,i,n){if(t!==undefined){this._oModel.setProperty("/marginTop",t)}if(e!==undefined){this._oModel.setProperty("/marginRight",e)}if(i!==undefined){this._oModel.setProperty("/marginBottom",i)}if(n!==undefined){this._oModel.setProperty("/marginLeft",n)}};K.prototype._onChangeMarginComboBox=function(t){var e=t.getSource().getSelectedKey();var i=Y(5);if(e==="none"){i=0}this._setMarginsToModel(i,i,i,i);this._setMarginInputs(i,i,i,i);this._updateDialogPreview()};K.prototype._updateModelFromMarginInputs=function(){var t,e,i,n;if(this._oInputMarginTop.getValueState()!=="Error"){t=this._convertUnitToPx(this._oInputMarginTop.getValue())}if(this._oInputMarginRight.getValueState()!=="Error"){e=this._convertUnitToPx(this._oInputMarginRight.getValue())}if(this._oInputMarginBottom.getValueState()!=="Error"){i=this._convertUnitToPx(this._oInputMarginBottom.getValue())}if(this._oInputMarginLeft.getValueState()!=="Error"){n=this._convertUnitToPx(this._oInputMarginLeft.getValue())}this._setMarginsToModel(t,e,i,n)};K.prototype._updateMarginInputs=function(){var t=this._oModel.getProperty("/marginTop");var e=this._oModel.getProperty("/marginRight");var i=this._oModel.getProperty("/marginBottom");var n=this._oModel.getProperty("/marginLeft");this._setMarginInputs(t,e,i,n)};K.prototype._updateCropMarksOffsetInput=function(){var t=this._oModel.getProperty("/cropMarksOffset");this._oInputCropMarksOffset.setValue(this._convertPxToUnit(t))};K.prototype._onChangeMarginInput=function(t){var e=t.getSource();if(e.getValueState()==="Error"){return}if(this._oModel.getProperty("/marginLocked")){var i=this._convertUnitToPx(e.getValue());this._setMarginInputs(i,i,i,i);this._setMarginsToModel(i,i,i,i)}else{this._updateModelFromMarginInputs()}this._updateDialogPreview()};K.prototype._onChangeCropMarksInput=function(t){var e=t.getSource();var i=this._convertUnitToPx(e.getValue());this._oInputCropMarksOffset.setValue(this._convertPxToUnit(i));this._oModel.setProperty("/cropMarksOffset",i)};K.prototype._allRange=function(){this._oModel.setProperty("/startDate",this._oDatePickerFrom.getMinDate());this._oModel.setProperty("/endDate",this._oDatePickerTo.getMaxDate())};K.prototype._getFirstDayOfNextWeek=function(t){var e=this._getOriginalGanttChart().getAxisTimeStrategy().getFirstDayOfWeek();var i=(e+7-t.getDay())%7;return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(i===0?7:i))};K.prototype._nextWeekRange=function(){var t=new Date;var e=this._getFirstDayOfNextWeek(t);this._oModel.setProperty("/startDate",this._validateDate(e));this._oModel.setProperty("/endDate",this._validateDate(new Date(e.getFullYear(),e.getMonth(),e.getDate()+7)))};K.prototype._getFirstDayOfNextMonth=function(t){return new Date(t.getFullYear(),t.getMonth()+1,1)};K.prototype._nextMonthRange=function(){var t=new Date;this._oModel.setProperty("/startDate",this._validateDate(this._getFirstDayOfNextMonth(t)));this._oModel.setProperty("/endDate",this._validateDate(new Date(t.getFullYear(),t.getMonth()+2,1)))};K.prototype._validateDate=function(t){var e=this._oDatePickerTo.getMaxDate(),i=this._oDatePickerFrom.getMinDate();if(t.getTime()>e.getTime()){return e}if(t.getTime()<i.getTime()){return i}return t};K.prototype._onChangeDurationComboBox=function(){var t=this._oModel.getProperty("/duration");switch(t){case"all":{this._allRange()}break;case"week":{this._nextWeekRange()}break;case"month":{this._nextMonthRange()}break;case"custom":default:return}this._updateGanttCanvas()};K.prototype._onChangeDurationDatePicker=function(){this._oComboBoxDuration.setSelectedKey("custom");this._updateGanttCanvas()};K.prototype._setEnabledPreviousButtons=function(t){this._oButtonFirst.setEnabled(t);this._oButtonPrevious.setEnabled(t)};K.prototype._setEnabledNextButtons=function(t){this._oButtonNext.setEnabled(t);this._oButtonLast.setEnabled(t)};K.prototype._updatePageNumberButtons=function(){if(!this._oGanttCanvas){this._setEnabledNextButtons(false);this._setEnabledPreviousButtons(false);return}var t=this._oModel.getProperty("/previewPageNumber"),e=this._oModel.getProperty("/lastPageNumber");if(!e){e=Number.MAX_SAFE_INTEGER}if(t<=1){this._setEnabledPreviousButtons(false)}if(t>=e){this._setEnabledNextButtons(false)}if(t>1){this._setEnabledPreviousButtons(true)}if(t<e){this._setEnabledNextButtons(true)}};K.prototype._getHeaderHeight=function(){var t=this._oModel.getProperty("/showHeaderText");if(t){return this._iHeaderAndFooterHeight}return 0};K.prototype._isFooterMultiline=function(){if(!this._oModel.getProperty("/multiplePage")){return false}var t=this._oModel.getProperty("/showPageNumber"),e=this._oModel.getProperty("/showFooterText");if(!e||!t){return false}var i=this._oModel.getProperty("/footerText"),a=this._oModel.getProperty("/paperWidth"),o;var r=n.getConfiguration().getRTL();if(r){o=this._oModel.getProperty("/marginRight")}else{o=this._oModel.getProperty("/marginLeft")}var s=7;var h=this._oGanttCanvas.getContext("2d");h.font=J;var l=h.measureText(i).width;if(a/2>o+Y(4)+l+Y(10)+s){return false}else{return true}};K.prototype._getFooterHeight=function(){var t=this._oModel.getProperty("/showPageNumber"),e=this._oModel.getProperty("/showFooterText");if(e&&t){return this._isFooterMultiline()?2*this._iHeaderAndFooterHeight:this._iHeaderAndFooterHeight}if(e||t){return this._iHeaderAndFooterHeight}return 0};K.prototype._isShrinkableToOnePageByWidth=function(){var t=this._getPaperContentWidth()/this._getPaperContentHeight(),e=this._oGanttCanvas.width/this._oGanttCanvas.height;return t<=e};K.prototype._getPaperContentWidth=function(){var t=this._oModel.getProperty("/paperWidth"),e=this._oModel.getProperty("/marginLeft"),i=this._oModel.getProperty("/marginRight");return t-e-i};K.prototype._getPaperContentHeight=function(){var t=this._oModel.getProperty("/paperHeight"),e=this._oModel.getProperty("/marginTop"),i=this._oModel.getProperty("/marginBottom");return t-e-this._getHeaderHeight()-i-this._getFooterHeight()};K.prototype._getScale=function(){return 100/this._oModel.getProperty("/scale")*2};K.prototype._getCroppingWidth=function(){return this._getScale()*this._getPaperContentWidth()};K.prototype._getCroppingHeight=function(){return this._getScale()*this._getPaperContentHeight()};K.prototype._getPagesInARow=function(){return Math.ceil(this._oGanttCanvas.width/this._getCroppingWidth())};K.prototype._getPagesInAColumn=function(){return Math.ceil(this._oGanttCanvas.height/this._getCroppingHeight())};K.prototype._updateLastPageNumber=function(){if(!this._oGanttCanvas){return}var t=this._getPagesInARow()*this._getPagesInAColumn();this._oModel.setProperty("/lastPageNumber",t);var e=this._oModel.getProperty("/previewPageNumber");if(e>t){this._oModel.setProperty("/previewPageNumber",t)}};K.prototype._onPressButtonFirst=function(){this._oModel.setProperty("/previewPageNumber",1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas()};K.prototype._onPressButtonPrevious=function(){var t=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",t-1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas()};K.prototype._onPressButtonNext=function(){var t=this._oModel.getProperty("/previewPageNumber");this._oModel.setProperty("/previewPageNumber",t+1);this._updatePageNumberButtons();this._updateDialogPreviewCanvas()};K.prototype._onPressButtonLast=function(){var t=this._oModel.getProperty("/lastPageNumber");if(!t){return}this._oModel.setProperty("/previewPageNumber",t);this._updatePageNumberButtons();this._updateDialogPreviewCanvas()};K.prototype._getOriginalGanttChart=function(){return sap.ui.getCore().byId(this.getAssociation("ganttChart"))};K.prototype._setGanttCloneDivWidth=function(t){var e=this._getOriginalGanttChart(),i=this._getHorizonDates(t),n=this._horizonWidthInSec(i),a=Math.ceil(this._fPixelsBySec*n);var o=e.getDisplayType()===j.Both?e.getTable().getDomRef().offsetWidth:0;this._oClonedGanttDiv.style.width=(o+a+10).toString()+"px"};K.prototype._setGanttCloneDivHeight=function(){var t=this._getOriginalGanttChart().getTable();var e=t._getTotalRowCount(),i=t._aRowHeights;var n=i.reduce(function(t,e){return t+e});var a=Math.ceil(n/i.length*e);this._iGanttHeight=a+102;this._oClonedGanttDiv.style.height=this._iGanttHeight.toString()+"px"};K.prototype._setCloneDivHeight=function(){var t=this.bFirst?document.getElementById(this._ganttChartClone.getId()+"-header-svg").height.baseVal.value:0;var e=this._ganttChartClone.getTable().getVisibleRowCount();var i=0;var n=this.bLast?3:0;var a=this._ganttChartClone.getTable().getRows()[0].getIndex();var o=this._ganttChartClone.getTable().getFirstVisibleRow();var r=Math.abs(a-o);var s=this._ganttChartClone.getTable()._aRowHeights;for(var h=r;h<e+r;h++){i=i+s[h]}this._iContentHeight=i+"px";this._oClonedGanttDiv.style.height=(i+t+n).toString()+"px"};K.prototype._setCloneDivHeightNonOptimised=function(){var t=document.getElementById(this._ganttChartClone.getId()+"-header-svg").height.baseVal.value;var e=this._ganttChartClone.getTable()._getTotalRowCount();var i=1;var n=this._ganttChartClone.getTable()._aRowHeights;for(var a=0;a<e;a++){var o=n[a]?n[a]:0;i=i+o}this._iContentHeight=i.toString()+"px";this._oClonedGanttDiv.style.height=(i+t).toString()+"px"};K.prototype._createImgElementsFromSvgImages=function(){var t=this._ganttChartClone.$().find("svg.sapGanttChartSvg");if(!t.length){return}var e=this._ganttChartClone.$().find(".sapGanttChartCnt")[0];if(!e){return}e.style.position="relative";var i=t.find("image");for(var n=0;n<i.length;n++){var a=i[n];var o=document.createElement("img");o.src=a.getAttribute("href");o.style.position="absolute";o.style.top=a.getAttribute("y")+"px";o.style.left=a.getAttribute("x")+"px";o.style.width=a.getAttribute("width")+"px";o.style.height=a.getAttribute("height")+"px";e.appendChild(o)}};K.prototype._createGanttCanvas=function(){if(this._bCancel){return Promise.reject()}this._setStyleToGanttChartSvg(this._ganttChartClone);this._createImgElementsFromSvgImages();return V(this._oClonedGanttDiv,{allowTaint:true,scale:this.canvasScale,logging:false})};K.prototype._updateGanttCanvas=function(){if(this._initialDisplayType===j.Table){return}var t=this._oModel;var e=this._ganttChartClone.getAxisTimeStrategy();var i=e.getVisibleHorizon().clone();var n=e.getTotalHorizon().clone();i.setStartTime(t.getProperty("/startDate"));i.setEndTime(t.getProperty("/endDate"));n.setStartTime(t.getProperty("/startDate"));n.setEndTime(t.getProperty("/endDate"));this._bUpdateGanttCanvas=true;this._bCancel=false;if(!this._bMultipleBatches){this._oFlexBoxPreview.setBusy(true);this._oButtonExport.setEnabled(false)}this._setGanttCloneDivWidth(n);this._setGanttCloneDivHeight();if(this._oClonedGanttDiv.offsetWidth*this.canvasScale>X||this._oClonedGanttDiv.offsetHeight*this.canvasScale>X){this._oClonedGanttDiv.style.height=this._oClonedGanttDiv.offsetHeight*this.canvasScale+"px";this._oClonedGanttDiv.style.width=this._oClonedGanttDiv.offsetWidth*this.canvasScale+"px";this._oGanttCanvas=undefined;this._updateDialogPreviewCanvas();this._oFlexBoxPreview.setBusy(false);return undefined}e.setTotalHorizon(n);e.setVisibleHorizon(i);if(!this._ganttChartClone._enableOptimisation){this._ganttChartClone.invalidate()}this._ganttChartClone._bRenderGanttClone=true;if(this._ganttChartClone._enableOptimisation){var a=this._getOriginalGanttChart();var o=Math.max(a.getAxisTimeStrategy().getZoomLevel(),1);this.iThreshold=Math.min(Math.round(a.getPrintingBatchSize()/o),a.getTable()._getTotalRowCount());this._ganttChartClone.setShowGanttHeader(true);if(this._bMultipleBatches){this._openProgressDialog()}this._ganttChartClone._bRenderGanttClone=false;return this.generateCanvasAsync(0)}else{this._oClonedGanttDiv.style.height=this._iGanttHeight*2+"px";return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes).then(function(){this._ganttChartClone._bRenderGanttClone=false;return this.renderGanttClone().then(function(){this._setCloneDivHeightNonOptimised();document.getElementById(this._ganttChartClone.getId()+"-sapGanttBackgroundTableContent").style.height=this._iContentHeight;document.getElementById(this._ganttChartClone.getTable().getId()+"-tableCCnt").style.height=this._iContentHeight;this._createGanttCanvas().then(function(t){this._oGanttCanvas=t;this._updateDialogPreview();this._oFlexBoxPreview.setBusy(false)}.bind(this)).catch(function(){this._oFlexBoxPreview.setBusy(false)}.bind(this))}.bind(this))}.bind(this)).catch(function(){this._oFlexBoxPreview.setBusy(false)}.bind(this))}};K.prototype._drawClonedGantt=function(){if(this._oClonedGanttDiv){return Promise.reject()}this._oClonedGanttDiv=document.createElement("div");this._oClonedGanttDiv.id="clonedGanttDiv";if(this._getOriginalGanttChart().$().closest(".sapUiSizeCompact").length>0){this._oClonedGanttDiv.classList.add("sapUiSizeCompact")}this._oClonedGanttDiv.style.position="absolute";this._oClonedGanttDiv.style.top="-17000px";this._oClonedGanttDiv.style.left="-17000px";document.body.appendChild(this._oClonedGanttDiv);this._setGanttCloneDivWidth(this._ganttChartClone.getAxisTimeStrategy().getTotalHorizon());this._setGanttCloneDivHeight();var t=this._oModel;var e=this._ganttChartClone.getAxisTimeStrategy();e.getVisibleHorizon().setStartTime(t.getProperty("/startDate"));e.getVisibleHorizon().setEndTime(t.getProperty("/endDate"));if(this._ganttChartClone._enableOptimisation){this._ganttChartClone.placeAt("clonedGanttDiv")}else{this._ganttChartContainer.placeAt("clonedGanttDiv")}this._addBackOriginalGanttRowBinding(this._ganttChartClone,this._getOriginalGanttChart());if(this._oClonedGanttDiv.offsetWidth*this.canvasScale>X||this._oClonedGanttDiv.offsetHeight*this.canvasScale>X){this._oClonedGanttDiv.style.height=this._oClonedGanttDiv.offsetHeight*this.canvasScale+"px";this._oClonedGanttDiv.style.width=this._oClonedGanttDiv.offsetWidth*this.canvasScale+"px";return Promise.reject({bMaxCanvasSizeExceeded:true})}if(this._ganttChartClone._enableOptimisation){return Promise.resolve()}else{this._oClonedGanttDiv.style.height=this._iGanttHeight*2+"px";return this._ganttChartClone.getInnerGantt().resolveWhenReady(this._originalHasRenderedShapes)}};K.prototype._addBackOriginalGanttRowBinding=function(t,e){if(t.getTable().getBindingInfo("rows").binding==null){t.oPropagatedProperties=e._getPropertiesToPropagate();t.propagateProperties(true)}if(this._ganttChartClone._enableOptimisation){t.getTable().setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Fixed);t.getTable().setVisibleRowCount(this.iThreshold);t.getTable().setThreshold(this.iThreshold)}var i=e.getTable().getBinding("rows"),n=t.getTable().getBinding("rows");if(i){if(i.sCustomParams){n.sCustomParams=i.sCustomParams}if(i.aFilters&&i.aFilters.length>0){n.filter(i.aFilters)}if(i.aApplicationFilters&&i.aApplicationFilters.length>0){n.filter(i.aApplicationFilters,sap.ui.model.FilterType.Application)}if(i.aSorters&&i.aSorters.length>0){n.sort(i.aSorters)}}};K.prototype._resizePrintingPreviewPage=function(){var t=this._oHTMLDialogPreview.getDomRef(),e=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv")[0],i=t.offsetHeight,n=this._oModel.getProperty("/paperHeight"),a=this._oModel.getProperty("/paperWidth"),o=this._oModel.getProperty("/portrait"),r,s;if(o){r=i/n;s=a*r}else{r=i/a;s=i;i=n*r}e.style.width=s.toString()+"px";e.style.height=i.toString()+"px"};K.prototype._updateSinglePageMessages=function(t,e){if(e>t){this._oModel.setProperty("/orientationMessage",this._oRb.getText("GNT_PRNTG_SINGLE_PAGE_PORTRAIT"))}else{this._oModel.setProperty("/orientationMessage",this._oRb.getText("GNT_PRNTG_SINGLE_PAGE_LANDSCAPE"))}if(this._getPagesInARow()>3||this._getPagesInAColumn()>3){this._oModel.setProperty("/qualityWarning",true)}else{this._oModel.setProperty("/qualityWarning",false)}if(e>=t&&this._oModel.getProperty("/portrait")||e<=t&&!this._oModel.getProperty("/portrait")){this._oModel.setProperty("/showOrientationMessage",false)}else{this._oModel.setProperty("/showOrientationMessage",true)}};K.prototype._getCanvasOfPageN=function(t,e){var i=this._oModel.getProperty("/lastPageNumber");if(t>i){return null}var a=document.createElement("canvas");var o=a.getContext("2d");o.imageSmoothingEnabled=false;var r=this._getCroppingWidth(),s=this._getCroppingHeight();var h=this._getPagesInARow();var l=this._oModel.getProperty("/paperWidth"),g=this._oModel.getProperty("/paperHeight");var p=this._oModel.getProperty("/marginTop"),_=this._oModel.getProperty("/marginRight"),d=this._oModel.getProperty("/marginBottom"),u=this._oModel.getProperty("/marginLeft");var c=(t-1)%h,C=Math.floor((t-1)/h);a.width=l;a.height=g;if(!e){a.style.height="100%";a.style.width="auto"}o.fillStyle="white";o.fillRect(0,0,a.width,a.height);o.fillStyle=k.get("sapUiBaseText");o.textBaseline="middle";o.font=J;var P;var f=n.getConfiguration().getRTL();if(f){o.textAlign="right";P=l-_-Y(4)}else{o.textAlign="left";P=u+Y(4)}var m=this._oModel.getProperty("/showHeaderText");if(m){var v=this._oModel.getProperty("/headerText");o.fillText(v,P,p+this._iHeaderAndFooterHeight/2)}if(this._oModel.getProperty("/showFooterText")){o.fillText(this._oModel.getProperty("/footerText"),P,g-d-this._iHeaderAndFooterHeight/2-(this._isFooterMultiline()?this._iHeaderAndFooterHeight:0))}var y=this._oModel.getProperty("/showPageNumber"),T=this._oModel.getProperty("/multiplePage"),x;if(T&&y){o.font=$;o.textAlign="center";o.fillText(t.toString(),l/2,g-d-this._iHeaderAndFooterHeight/2)}if(T){var b=c*r,w=C*s,G=0,M=0;var S=false;if(b+r>this._oGanttCanvas.width){S=true;r=this._oGanttCanvas.width-b;M=r/this._getScale()}var R=false;if(w+s>this._oGanttCanvas.height){R=true;s=this._oGanttCanvas.height-w;G=s/this._getScale()}x=(S?M:this._getPaperContentWidth())/r;if(x<.5&&e){var D=document.createElement("canvas");D.width=r;D.height=s;var I=D.getContext("2d");I.drawImage(this._oGanttCanvas,b,w,r,s,0,0,r,s);this._downScaleCanvas(D,o,x,0,0,D.width,D.height,u,p+this._getHeaderHeight())}else{o.drawImage(this._oGanttCanvas,b,w,r,s,u,p+this._getHeaderHeight(),S?M:this._getPaperContentWidth(),R?G:this._getPaperContentHeight())}}else{var N=this._getPaperContentWidth(),E=this._getPaperContentHeight();var B=this._isShrinkableToOnePageByWidth();var A;if(B){A=N/this._oGanttCanvas.width;E=this._oGanttCanvas.height*A}else{A=E/this._oGanttCanvas.height;N=this._oGanttCanvas.width*A}this._updateSinglePageMessages(N,E);x=N/this._oGanttCanvas.width;if(x<1&&e){this._downScaleCanvas(this._oGanttCanvas,o,x,0,0,this._oGanttCanvas.width,this._oGanttCanvas.height,u,p+this._getHeaderHeight())}else{o.drawImage(this._oGanttCanvas,0,0,this._oGanttCanvas.width,this._oGanttCanvas.height,u,p+this._getHeaderHeight(),N,E)}}return a};K.prototype._downScaleCanvas=function(t,e,i,n,a,o,r,s,h){var l=document.createElement("canvas");l.width=o;l.height=r;var g=l.getContext("2d");g.drawImage(t,n,a,o,r,0,0,o,r);var p=i*i;var _=Math.floor(o*i);var d=Math.floor(r*i);var u=0,c=0,C=0;var P=0,f=0,m=0,v=0;var y=0,T=0;var x=0,b=0,w=0;var G=0,M=0,S=0;var R=false,D=false;var I=l.getContext("2d").getImageData(0,0,o,r).data;var N=new Float32Array(3*_*d);var E=0,B=0,A=0;for(c=0;c<r;c++){f=c*i;T=0|f;m=3*T*_;D=T!==(0|f+i);if(D){w=T+1-f;S=f+i-T-1}for(u=0;u<o;u++,C+=4){P=u*i;y=0|P;v=m+y*3;R=y!==(0|P+i);if(R){b=y+1-P;M=P+i-y-1}E=I[C];B=I[C+1];A=I[C+2];if(!R&&!D){N[v]+=E*p;N[v+1]+=B*p;N[v+2]+=A*p}else if(!R&&D){x=w*i;N[v]+=E*x;N[v+1]+=B*x;N[v+2]+=A*x;G=S*i;N[v+3*_]+=E*G;N[v+3*_+1]+=B*G;N[v+3*_+2]+=A*G}else if(R&&!D){x=b*i;N[v]+=E*x;N[v+1]+=B*x;N[v+2]+=A*x;G=M*i;N[v+3]+=E*G;N[v+4]+=B*G;N[v+5]+=A*G}else{x=b*w;N[v]+=E*x;N[v+1]+=B*x;N[v+2]+=A*x;G=M*w;N[v+3]+=E*G;N[v+4]+=B*G;N[v+5]+=A*G;G=b*S;N[v+3*_]+=E*G;N[v+3*_+1]+=B*G;N[v+3*_+2]+=A*G;G=M*S;N[v+3*_+3]+=E*G;N[v+3*_+4]+=B*G;N[v+3*_+5]+=A*G}}}var H=document.createElement("canvas");H.width=_;H.height=d;var O=H.getContext("2d");var F=O.getImageData(0,0,_,d);var L=F.data;var k=0;for(C=0,v=0;k<_*d;C+=3,v+=4,k++){L[v]=0|N[C];L[v+1]=0|N[C+1];L[v+2]=0|N[C+2];L[v+3]=255}e.putImageData(F,s,h);return};function tt(t){while(t.firstChild){t.removeChild(t.firstChild)}}K.prototype._createPreviewErrorMessageStrip=function(t){return new w({text:this._oRb.getText(t?"GNT_PRNTG_ERROR_TOOHIGHCHART":"GNT_PRNTG_ERROR_BIGCHART"),showIcon:true,type:"Error"})};K.prototype._updateDialogPreviewCanvas=function(){var t=this._oHTMLDialogPreview.$().find(".sapGanttPrintingPreviewPageDiv");var e=t[0];if(this._oGanttCanvas){this._oButtonExport.setEnabled(true);var i=this._oModel.getProperty("/multiplePage");if(i){this._oModel.setProperty("/qualityWarning",false);this._oModel.setProperty("/showOrientationMessage",false)}var n=this._getCanvasOfPageN(i?this._oModel.getProperty("/previewPageNumber"):1,false);tt(e);this._resizePrintingPreviewPage();e.appendChild(n)}else if(!this._oGanttCanvas&&(this._oClonedGanttDiv.offsetWidth>X||this._oClonedGanttDiv.offsetHeight>X)){this._oButtonExport.setEnabled(false);this._resizePrintingPreviewPage();this._oModel.setProperty("/qualityWarning",false);this._oModel.setProperty("/showOrientationMessage",false);if(!this._oHTMLDialogPreview.$().find("#"+this.getId()+"-previewErrorMessageStrip").length){tt(e);if(!this._oPreviewErrorMessageStrip){this._oPreviewErrorMessageStrip=this._createPreviewErrorMessageStrip(this._oClonedGanttDiv.offsetHeight>X)}var a=document.createElement("div");a.id=this.getId()+"-previewErrorMessageStrip";a.style.width="80%";e.appendChild(a);this._oPreviewErrorMessageStrip.placeAt(this.getId()+"-previewErrorMessageStrip")}}else{throw new Error("Gantt chart canvas does not exist.")}t.addClass("sapGanttPrintingPreviewPageDivBorder")};K.prototype._updateDialogPreview=function(){this._updateLastPageNumber();this._updatePageNumberButtons();this._updateDialogPreviewCanvas()};K.prototype._setStylesToDom=function(t){function e(t){var e=getComputedStyle(t);var i,n,a,o;var r=["height","width","min-height","min-width"];var s="";for(i=0,n=e.length;i<n;i++){a=e[i];if(!(t instanceof SVGElement&&r.indexOf(a)>=0)){o=e.getPropertyValue(a);s+=a+":"+o+";"}}t.style=s}function i(t){e(t);i(t);function i(t){if(t&&t.hasChildNodes()){var n=t.firstChild;while(n){if(n.nodeType===1&&n.nodeName!="SCRIPT"){e(n);i(n)}n=n.nextSibling}}}}i(t)};K.prototype._setStyleToGanttChartSvg=function(t){var e=t.$().find("svg.sapGanttChartSvg")[0];var i=t.$().find("svg.sapGanttChartHeaderSvg")[0];if(e){this._setStylesToDom(e)}if(i){this._setStylesToDom(i)}};K.prototype._getHorizonDates=function(t){var e=t.getStartTime();var i=t.getEndTime();return{startTime:new Date(R.abapTimestampToDate(e)),endTime:new Date(R.abapTimestampToDate(i))}};K.prototype._horizonWidthInSec=function(t){if(t&&t.startTime&&t.endTime){return t.endTime.getTime()-t.startTime.getTime()}return 0};K.prototype._pageToBeExported=function(){if(!this._oModel.getProperty("/multiplePage")){return[1]}var t=this._oModel.getProperty("/lastPageNumber"),e=this._oModel.getProperty("/exportAll"),i=[];if(e){for(var n=1;n<=t;n++){i.push(n)}return i}else{var o=this._oModel.getProperty("/exportRange");o=o.replace(/\s/g,"");var r=a.getIntegerInstance();var s=o.split(",");s.forEach(function(t){if(t.indexOf("-")!==-1){var e=t.split("-");var n=r.parse(e[0]);var a=r.parse(e[1]);for(var o=n;o<=a;o++){i.push(o)}}else{i.push(r.parse(t))}});return i}};K.prototype._validateFields=function(){var t=true;t&=this._validateExportRangeInput();t&=this._oInputMarginTop.getValueState()!=="Error";t&=this._oInputMarginRight.getValueState()!=="Error";t&=this._oInputMarginBottom.getValueState()!=="Error";t&=this._oInputMarginLeft.getValueState()!=="Error";return t};K.prototype._savePdf=function(){if(!this._validateFields()){return}var t=this._oModel.getProperty("/portrait")?"p":"l",e=this._oModel.getProperty("/paperWidth"),i=this._oModel.getProperty("/paperHeight"),n=this._oModel.getProperty("/exportAsJPEG"),a=this._oModel.getProperty("/compressionQuality")/100,o=this._oModel.getProperty("/paperSize");var r=new W({orientation:t,unit:"px",format:o==="Custom"?[e*.75,i*.75]:o.toLowerCase()});var s=this._pageToBeExported();for(var h=0;h<s.length;h++){var l=this._getCanvasOfPageN(s[h],true);if(!l){continue}if(h!==0){r.addPage()}if(n){r.addImage(l.toDataURL("image/jpeg",a),"JPEG",0,0)}else{r.addImage(l.toDataURL("image/png"),"PNG",0,0)}}var g=new Date;r.save("GanttChartExport-"+g.toISOString()+".pdf")};K.prototype._createPaperComboBox=function(){this._oComboBoxPaperSizes=new C({selectedKey:"{setting>/paperSize}",change:this._updatePaperSizeValues.bind(this),items:[new E({key:"A5",text:"A5"}),new E({key:"A4",text:"A4"}),new E({key:"A3",text:"A3"}),new E({key:"A2",text:"A2"}),new E({key:"A1",text:"A1"}),new E({key:"A0",text:"A0"}),new E({key:"Letter",text:"Letter"}),new E({key:"Legal",text:"Legal"}),new E({key:"Tabloid",text:"Tabloid"}),new E({key:"Custom",text:"Custom"})]});return this._oComboBoxPaperSizes};K.prototype._createPaperSizeFields=function(){this._oInputPaperWidth=new p({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._oInputPaperHeight=new p({width:"20%",type:"Number",change:this._onChangePaperSizeInput.bind(this)});this._updatePaperSizeInputs();return new _({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oInputPaperWidth,new r({text:"×"}),this._oInputPaperHeight,this._oComboBoxUnit=new C({width:"50%",selectedKey:"{setting>/unit}",change:this._onChangeUnitComboBox.bind(this),items:[new E({key:"mm",text:this._oRb.getText("GNT_PRNTG_MILLIMETERS")}),new E({key:"cm",text:this._oRb.getText("GNT_PRNTG_CENTIMETERS")}),new E({key:"in",text:this._oRb.getText("GNT_PRNTG_INCHES")})]})]})};K.prototype._createDurationComboBox=function(){var t=this._getOriginalGanttChart().getAxisTimeStrategy(),e=t.getTotalHorizon(),i=new Date(R.abapTimestampToDate(e.getEndTime())),n=new Date;this._oComboBoxDuration=new C({selectedKey:"{setting>/duration}",change:this._onChangeDurationComboBox.bind(this),items:[new E({key:"all",text:this._oRb.getText("GNT_PRNTG_DURATION_ALL")}),new E({key:"week",enabled:this._getFirstDayOfNextWeek(n).getTime()<i.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_WEEK")}),new E({key:"month",enabled:this._getFirstDayOfNextMonth(n).getTime()<i.getTime(),text:this._oRb.getText("GNT_PRNTG_DURATION_NEXT_MONTH")}),new E({key:"custom",text:this._oRb.getText("GNT_PRNTG_DURATION_CUSTOM")})]});return this._oComboBoxDuration};K.prototype._createDatePicker=function(){var t=this._getOriginalGanttChart().getAxisTimeStrategy();var e=t.getTotalHorizon();var i=new Date(R.abapTimestampToDate(e.getStartTime()));var n=new Date(R.abapTimestampToDate(e.getEndTime()));this._oModel.setProperty("/startDate",i);this._oModel.setProperty("/endDate",n);this._oDatePickerFrom=new x({width:"47%",minDate:i,maxDate:"{setting>/endDate}",dateValue:"{setting>/startDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});this._oDatePickerTo=new x({width:"47%",minDate:"{setting>/startDate}",maxDate:n,dateValue:"{setting>/endDate}",change:this._onChangeDurationDatePicker.bind(this),enabled:true});return new _({renderType:"Bare",alignItems:"Center",justifyContent:"SpaceBetween",items:[this._oDatePickerFrom,new r({text:"~"}),this._oDatePickerTo]})};K.prototype._createScale=function(){return new v({min:50,max:200,step:1,width:"25rem",value:"{setting>/scale}",visible:"{setting>/multiplePage}",liveChange:this._updateDialogPreview.bind(this),showAdvancedTooltip:true,inputsAsTooltips:true})};K.prototype._validateExportRangeInput=function(){if(this._oModel.getProperty("/exportAll")){return true}var t=this._oModel.getProperty("/exportRange").replace(/\s/g,"");if(/^((\d+),|(\d+-\d+),)*((\d+)|(\d+-\d+))+$/.test(t)){this._oInputRange.setValueState("None");return true}this._oInputRange.setValueState("Error");this._oInputRange.setValueStateText(this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ERROR"));return false};K.prototype._createPageRange=function(){var t=function(t){var e=t.getSource().getSelectedIndex();if(e===0){this._oButtonExport.setEnabled(true);this._oInputRange.setValueState("None")}};return new _({renderType:"Bare",alignItems:"Center",visible:"{setting>/multiplePage}",justifyContent:"SpaceBetween",items:[new f({layoutData:new u({shrinkFactor:0,growFactor:1}),selectedIndex:this._oModel.getProperty("/exportAll")?0:1,columns:2,select:t.bind(this),buttons:[new P({id:"all",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_ALL"),selected:"{setting>/exportAll}"}),new P({id:"range",text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE_RANGE")+" "})]}),this._oInputRange=new p({layoutData:new u({growFactor:1}),value:"{setting>/exportRange}",change:this._validateExportRangeInput.bind(this),enabled:{path:"setting>/exportAll",formatter:function(t){return!t}}}).addStyleClass("sapGanttPrintingPageRangeInput")]})};K.prototype._createLabelWithSwitch=function(t,e){return new _({renderType:"Bare",visible:"{setting>/multiplePage}",alignItems:"Center",items:[new o({text:t}),new G({state:e,change:this._updateDialogPreview.bind(this)}).addStyleClass("sapGanttPrintingSwitchPadding")]})};K.prototype._createCheckBoxWithInput=function(t,e,i){return new _({renderType:"Bare",alignItems:"Start",justifyContent:"SpaceBetween",items:[new m({selected:e,text:t,select:this._updateDialogPreview.bind(this)}),new p({width:"65%",value:i,enabled:e,change:this._updateDialogPreview.bind(this)})]})};K.prototype._createPanel=function(t,e){return new M({expandable:true,expanded:false,headerText:t,content:[new _({renderType:"Bare",direction:U.Column,items:[e]})]})};K.prototype._createCompressionSlider=function(){return new v({min:1,max:100,step:1,change:this._onChangeCompressionSlider.bind(this),value:{path:"setting>/compressionQuality",type:"sap.ui.model.type.Integer"},visible:"{setting>/exportAsJPEG}",showAdvancedTooltip:true,inputsAsTooltips:true})};K.prototype._createCompressionComboBox=function(){this._oComboBoxCompression=new C({visible:"{setting>/exportAsJPEG}",change:this._onChangeCompressionComboBox.bind(this),items:[new E({key:"maximum",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MAXIMUM")}),new E({key:"high",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_HIGH")}),new E({key:"medium",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_MEDIUM")}),new E({key:"low",text:this._oRb.getText("GNT_PRNTG_COMPRESSION_LOW")})]});var t=this._oModel.getProperty("/compressionQuality");this._setCompressionComboBoxItem(t);return this._oComboBoxCompression};K.prototype._updateInputsStep=function(t){var e=.1;if(t==="mm"){e=1}return e};K.prototype._createMargin=function(){function t(t){return Math.round(this._convertPxToUnit(t/3))}return[new o({text:this._oRb.getText("GNT_PRNTG_MARGIN")+":"}),new C({change:this._onChangeMarginComboBox.bind(this),selectedKey:"{setting>/marginType}",items:[new E({key:"default",text:this._oRb.getText("GNT_PRNTG_MARGIN_DEFAULT")}),new E({key:"none",text:this._oRb.getText("GNT_PRNTG_MARGIN_NONE")}),new E({key:"custom",text:this._oRb.getText("GNT_PRNTG_MARGIN_CUSTOM")})]}),new _({renderType:"Bare",alignItems:"Center",visible:{path:"setting>/marginType",formatter:function(t){return t==="custom"}},items:[new _({direction:U.Column,layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new o({text:this._oRb.getText("GNT_PRNTG_MARGIN_TOP")}),this._oInputMarginTop=new T({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginTop")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:t.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_MARGIN_LEFT")}),this._oInputMarginLeft=new T({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginLeft")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:t.bind(this)},description:"{setting>/unit}"})]}),new _({direction:U.Column,layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new o({text:this._oRb.getText("GNT_PRNTG_MARGIN_BOTTOM")}),this._oInputMarginBottom=new T({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginBottom")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_HEIGHT_ERROR"),max:{parts:[{path:"setting>/paperHeight"},{path:"setting>/unit"}],formatter:t.bind(this)},description:"{setting>/unit}"}).addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_MARGIN_RIGHT")}),this._oInputMarginRight=new T({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeMarginInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/marginRight")),fieldWidth:"7rem",validationMode:"LiveChange",valueStateText:this._oRb.getText("GNT_PRNTG_MARGIN_WIDTH_ERROR"),max:{parts:[{path:"setting>/paperWidth"},{path:"setting>/unit"}],formatter:t.bind(this)},description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin"),new g({icon:{path:"setting>/marginLocked",formatter:function(t){if(t){return"sap-icon://chain-link"}return"sap-icon://broken-link"}},press:function(){var t=this._oModel.getProperty("/marginLocked");this._oModel.setProperty("/marginLocked",!t)}.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingLockButton sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingTopMargin")]};K.prototype._createCropMarks=function(){return[new G({state:"{setting>/cropMarks}"}),new _({renderType:"Bare",visible:"{setting>/cropMarks}",items:[new _({direction:U.Column,layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new o({text:"Weight:"}),new T({min:0,step:.05,displayValuePrecision:2,value:"{setting>/cropMarksWeight}",fieldWidth:"7rem",description:"pt"})]}),new _({direction:U.Column,layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"8rem"}),items:[new o({text:"Offset:"}),this._oInputCropMarksOffset=new T({min:0,step:{path:"setting>/unit",formatter:this._updateInputsStep},displayValuePrecision:1,change:this._onChangeCropMarksInput.bind(this),value:this._convertPxToUnit(this._oModel.getProperty("/cropMarksOffset")),fieldWidth:"7rem",description:"{setting>/unit}"})]}).addStyleClass("sapGanttPrintingLeftMargin")]}).addStyleClass("sapGanttPrintingTopMargin")]};K.prototype._createCompression=function(){var t=this._oModel.getProperty("/exportAsJPEG");return[new o({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),new f({columns:2,selectedIndex:t?0:1,buttons:[new P({id:"jpeg",text:"JPEG",selected:"{setting>/exportAsJPEG}"}),new P({id:"png",text:"PNG"})]}).addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_QUALITY"),visible:"{setting>/exportAsJPEG}"}),this._createCompressionComboBox(),this._createCompressionSlider().addStyleClass("sapGanttPrintingTopMargin sapGanttPrintingBottomMargin"),new w({text:this._oRb.getText("GNT_PRNTG_COMPRESSION_PNG_WARNING"),showIcon:true,type:"Warning",visible:{path:"setting>/exportAsJPEG",type:"sap.ui.model.type.Boolean",formatter:function(t){return!t}}}).addStyleClass("sapGanttPrintingBottomMargin")]};K.prototype._createOptionsForm=function(){return new _({renderType:"Bare",direction:U.Column,items:[new o({text:this._oRb.getText("GNT_PRNTG_EXPORT_TYPES")}),this._radioGroupPage=new f({columns:2,selectedIndex:this._oModel.getProperty("/multiplePage")?0:1,select:this._onChangeExportTypes.bind(this),buttons:[new P({id:"Multiple",text:this._oRb.getText("GNT_PRNTG_MULTIPLE_PAGE"),selected:"{setting>/multiplePage}"}),new P({id:"Single",text:this._oRb.getText("GNT_PRNTG_SINGLE_PAGE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_ORIENTATION")}),this._radioGroupOrientation=new f({columns:2,selectedIndex:this._oModel.getProperty("/portrait")?0:1,select:this._onChangeOrientation.bind(this),buttons:[new P({id:"Portrait",text:this._oRb.getText("GNT_PRNTG_PORTRAIT"),selected:"{setting>/portrait}"}),new P({id:"Landscape",text:this._oRb.getText("GNT_PRNTG_LANDSCAPE")})]}).addStyleClass("sapGanttPrintingBottomMargin"),new w({text:"{setting>/orientationMessage}",type:"Information",showIcon:true,visible:"{setting>/showOrientationMessage}"}).addStyleClass("sapGanttPrintingSinglePageMessage"),new o({text:this._oRb.getText("GNT_PRNTG_PAPER_SIZE")}),this._createPaperComboBox(),this._createPaperSizeFields().addStyleClass("sapGanttPrintingBottomMargin"),new w({text:this._oRb.getText("GNT_PRNTG_SINGLE_PAGE_QUALITY"),type:"Information",showIcon:true,visible:"{setting>/qualityWarning}"}).addStyleClass("sapGanttPrintingSinglePageMessage"),new o({text:this._oRb.getText("GNT_PRNTG_DURATION")}),this._createDurationComboBox(),this._createDatePicker().addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_SCALE"),visible:"{setting>/multiplePage}"}),this._createScale().addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_PAGE_RANGE"),visible:"{setting>/multiplePage}"}),this._createPageRange().addStyleClass("sapGanttPrintingBottomMargin"),new o({text:this._oRb.getText("GNT_PRNTG_HEADER_AND_FOOTER")}),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_HEADER"),"{setting>/showHeaderText}","{setting>/headerText}"),this._createCheckBoxWithInput(this._oRb.getText("GNT_PRNTG_FOOTER"),"{setting>/showFooterText}","{setting>/footerText}").addStyleClass("sapGanttPrintingBottomMargin"),this._createLabelWithSwitch(this._oRb.getText("GNT_PRNTG_SHOW_PAGE_NUMBER"),"{setting>/showPageNumber}").addStyleClass("sapGanttPrintingBottomMargin"),this._createPanel(this._oRb.getText("GNT_PRNTG_MARGIN"),this._createMargin()),this._createPanel(this._oRb.getText("GNT_PRNTG_COMPRESSION"),this._createCompression())]})};K.prototype._createDialogContent=function(){var t=new _({renderType:"Bare",fitContainer:true,items:[this._oFlexBoxPreview=new _({renderType:"Bare",layoutData:new u({shrinkFactor:1,growFactor:1,baseSize:"auto"}),direction:U.Column,items:[new _({renderType:"Bare",layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"3.5rem"})}),this._oHTMLDialogPreview=new B({content:'<div class="sapGanttPrintingPreviewContentDiv"><div class="sapGanttPrintingPreviewPageDiv"></div></div>'}),new _({renderType:"Bare",justifyContent:"Center",alignItems:"Center",layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"6rem"}),items:[this._oButtonFirst=new g({icon:"sap-icon://close-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonFirst.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonPrevious=new g({icon:"sap-icon://navigation-left-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonPrevious.bind(this),type:"Transparent"}),new r({textAlign:"Center",visible:"{setting>/multiplePage}",width:"7.25rem",text:{parts:[{path:"setting>/previewPageNumber"},{path:"setting>/lastPageNumber"}],formatter:function(t,e){return e?this._oRb.getText("GNT_PRNTG_OF",[t,e]):t.toString()}.bind(this)}}).addStyleClass("sapGanttPrintingPreviewText"),this._oButtonNext=new g({icon:"sap-icon://navigation-right-arrow",visible:"{setting>/multiplePage}",press:this._onPressButtonNext.bind(this),type:"Transparent"}).addStyleClass("sapGanttPrintingPreviewIconMarginRight"),this._oButtonLast=new g({icon:"sap-icon://open-command-field",visible:"{setting>/multiplePage}",press:this._onPressButtonLast.bind(this),type:"Transparent"})]}).addStyleClass("sapGanttPrintingPreviewFooter")]}).addStyleClass("sapGanttPrintingPreviewContent"),new c({horizontal:false,vertical:true,layoutData:new u({shrinkFactor:0,growFactor:0,baseSize:"27rem"}),content:[this._createOptionsForm().addStyleClass("sapGanttPrintingDialogSettings")]})]});this._updatePageNumberButtons();return t};K.prototype._createAndOpenDialog=function(){this._oDialog=new h({title:this._oRb.getText("GNT_PRNTG_PDF_EXPORT_TITLE"),contentWidth:"100%",contentHeight:"100%",horizontalScrolling:false,verticalScrolling:false,content:[this._createDialogContent()],buttons:[this._oButtonExport=new g({text:this._oRb.getText("GNT_PRNTG_EXPORT"),type:d.ButtonType.Emphasized,press:this.export.bind(this)}),this._oButtonClose=new g({text:this._oRb.getText("GNT_PRNTG_CANCEL"),press:function(){this.close()}.bind(this)})]}).addStyleClass("sapGanttPrintingDialog");this._oDialog.onsapescape=function(t){this.close();t.preventDefault();t.stopPropagation()}.bind(this);this._oDialog.setModel(this._oModel,"setting");this._oDialog.open();this._sResizeHandlerId=z.register(this._oDialog,this._onResize.bind(this))};K.prototype._openProgressDialog=function(){this._oProgressIndicator=new l({state:"Information",percentValue:0});this._oProgressText=new r({text:this._oRb.getText("GNT_PRNTG_PDF_PREVIEW"),textAlign:"Center"}).addStyleClass("sapGanttPrintingProgressText");this._oProgressIndicatorBox=new _(this.getId()+"-progressFlexBox",{direction:"Column",alignItems:"Center",items:[this._oProgressText,this._oProgressIndicator],renderType:"Bare"}).addStyleClass("sapGanttPrintingProgressBox");this._oProgressDialog=new h(this.getId()+"-progressDialog",{contentWidth:"25%",showHeader:false,content:[this._oProgressIndicatorBox],buttons:[new g({text:this._oRb.getText("GNT_PRNTG_CANCEL"),press:function(){this._closeProgressIndicator()}.bind(this)})]});this._oProgressDialog.open()};return K});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttResizeExtension", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/events/KeyCodes","sap/ui/core/Core","./GanttExtension","./CoordinateUtils","./GanttUtils","sap/ui/core/theming/Parameters","sap/ui/Device","sap/gantt/misc/Utility","sap/gantt/misc/Format"],function(jQuery,e,t,i,r,n,a,s,o,g,h){"use strict";var l=r.extend("sap.gantt.simple.GanttResizeExtension",{_init:function(e,t){this._initResizeStatus();return"ResizeExtension"}});var p=".sapGanttResizing";var m={strokeWidth:1,strokeDasharray:"5, 1",fillOpacity:0,shapeColor:null};var d={color:"grey",strokeWidth:2,strokeDasharray:"5, 1",fillOpacity:0,shapeColor:null};var c={None:0,LeftResize:1,RightResize:2};var u=function(e,t){return parseFloat(e.attr(t),10)};l.prototype.getSelectionSettings=function(){if(!this.mSelectionSettings){return this.updatemSelectionSettings()||this.mSelectionSettings}return this.mSelectionSettings};l.prototype.updatemSelectionSettings=function(){m.color=s.get("sapUiBaseText");var e=this.getGantt().getShapeSelectionSettings();if(jQuery.isEmptyObject(e)){return m}var t=jQuery.extend(true,{},m);for(var i in t){if(e[i]){t[i]=e[i]}}if(!t.shapeColor){t.fillOpacity=0}else if(t.fillOpacity===0){t.fillOpacity=.4}this.mSelectionSettings=t};l.prototype.getSelectionInlineStyle=function(e){var t=this.getSelectionSettings();var i=t.shapeColor;var r=t.color;if(i){i=i.substr(0,1)==="@"?i.substring(1):i}if(r){r=r.substr(0,1)==="@"?r.substring(1):r}this._bShapeSelectedFill=false;this._getShapeSelectedFill(e);var n={fill:s.get(i)?s.get(i):i,stroke:s.get(r)?s.get(r):r,"fill-opacity":this._bShapeSelectedFill?0:t.fillOpacity,"stroke-width":this._bShapeSelectedFill?0:t.strokeWidth,"stroke-dasharray":t.strokeDasharray};return Object.keys(n).reduce(function(e,t){e+=t+":"+n[t]+";";return e},"")};l.prototype.getHighlightSettings=function(){if(!this.mHighlightSettings){return this.updatemHighlightSettings()||this.mHighlightSettings}return this.mHighlightSettings};l.prototype.updatemHighlightSettings=function(){var e=this.getGantt().getShapeHighlightSettings();if(e===null){return d}var t=Object.assign({},d);for(var i in t){if(e[i]){t[i]=e[i]}}if(!t.shapeColor){t.fillOpacity=0}else if(t.fillOpacity===0){t.fillOpacity=.4}this.mHighlightSettings=t};l.prototype.initDomSelector=function(){this.mDoms={}};l.prototype.updateDomSelector=function(e){if(e){this.origin.shapeUid=jQuery(e.target).parents("g").attr(a.SELECT_FOR_DATASET_KEY)}var t="g["+a.SELECT_FOR_DATASET_KEY+'="'+this.origin.shapeUid+'"]';var i={leftLine:t+" .leftLine",rightLine:t+" .rightLine",topLine:t+" .topLine",bottomLine:t+" .bottomLine",leftLineTrigger:t+" line.leftTrigger",rightLineTrigger:t+" line.rightTrigger",leftRectTrigger:t+" rect.leftTrigger",rightRectTrigger:t+" rect.rightTrigger",resizeRectCover:t+" rect.resizeCover"};for(var r in i){if(i.hasOwnProperty(r)){this.mDoms[r]=jQuery(i[r])}}};l.prototype.getSvgElement=function(){var t=jQuery(document.getElementById(this.getGantt().getId()));if(t.length===0){e.warning("can not find gantt chart, use gantt chart instance sId as the key is required")}return t.find("svg.sapGanttChartSvg").get(0)};l.prototype.getHeaderSvgElement=function(){var t=jQuery(document.getElementById(this.getGantt().getId()));if(t.length===0){e.warning("can not find gantt chart, use gantt chart instance sId as the key is required")}return t.find("svg.sapGanttChartHeaderSvg").get(0)};l.prototype._getShapeSelectionRootNode=function(){var e=this.getSvgElement(),t=jQuery(e).find("g.sapGanttChartSelection");return d3.select(t.get(0))};l.prototype._getDeltaMarkerSelectionRootNode=function(){var e=this.getHeaderSvgElement(),t=jQuery(e).find("g.sapGanttChartHeaderSelection");return d3.select(t.get(0))};l.prototype._getShapeHighlightRootNode=function(){var e=this.getSvgElement();if(e){var t=e.querySelectorAll(".sapGanttChartHighlight");return d3.select(t[0])}};l.prototype.toggleOutline=function(e){if(!e.getSelected()){this.removeOutline(e);return}this.setFrame(this._getDomRef(e).getBBox());var t=e.getConnectable(),i=e.getResizable(),r=e.getSelectable();if(r){if(t||i){this.renderResizerOutline(e)}else{this.renderPlainOutline(e)}}};l.prototype.toggleHighlight=function(e){if(!e.getHighlighted()){this.removeHighlight(e);return}this.setFrame(e.getDomRef().getBBox());var t=this.getHighlightOutLines(e);var i=this.createHighlightContainer(e);this.renderHighlightBorders(t,i);this.renderResizeTriggerAndCover(t,i,false,e)};l.prototype.addDeltaLineResizer=function(e){this.setFrame(e.getDomRef().getBBox());this.clearAllDeltaOutline();var t=this.getOutlineLines(e);var i=this.createResizeContainer(e,true);this.renderSelectionBorders(t,i);this.renderResizeTriggerAndCover(t,i,false,e);this.attachHeaderMouseEvent()};l.prototype.addResizerOnMouseOver=function(e){this.setFrame(this._getDomRef(e).getBBox());var t=e.getResizable();if(t){this.renderResizerOutlineOnMouseOver(e)}};l.prototype.clearAllOutline=function(e){this._getShapeSelectionRootNode().selectAll("*").remove()};l.prototype.clearAllDeltaOutline=function(){this._getDeltaMarkerSelectionRootNode().selectAll("*").remove()};l.prototype.clearAllHighlight=function(){if(this._getShapeHighlightRootNode()){this._getShapeHighlightRootNode().selectAll("*").remove()}};l.prototype.renderPlainOutline=function(e){var t=this._getDomRef(e);if(t){var i=!!e.getRlsAnchors;var r=g.getShapeBias(e);var n=i?e.getD():this.determineOutlineByFrame(e,r);var s=null;if(i&&e.getEnableCurvedEdge()){s=a.getPathCorners(e.getD(),5)}var o=this._getShapeSelectionRootNode();var h=i?this.createOutlineRlsNode(e,n,s):this.createOutlinePathNode(e,n);o.node().appendChild(h)}};l.prototype.createOutlineRlsNode=function(e,t,i){var r=document.createElementNS(d3.ns.prefix.svg,"g");var n=document.createElementNS(d3.ns.prefix.svg,"path");var a=document.createElementNS(d3.ns.prefix.svg,"path");var s=document.createElementNS(d3.ns.prefix.svg,"path");r.setAttribute("id",e.getShapeUid()+"-selected");r.setAttribute("aria-hidden","false");r.setAttribute("class","resizeContainer sapGanttSelectedPath");r.style=e.getSelectedStyle();if(!i){a.setAttribute("d",t)}else{a.setAttribute("fill","none");a.setAttribute("d",i)}r.appendChild(a);n.setAttribute("stroke-width",1);n.setAttribute("fill",e.getSelectedStartShapeColor());n.setAttribute("stroke-dasharray","none");n.setAttribute("d",e.getConnectorStartPath(t,e.getGanttChartBase().getId(),e.getProcessedType()));s.setAttribute("stroke-width",1);s.setAttribute("fill",e.getSelectedEndShapeColor());s.setAttribute("stroke-dasharray","none");s.setAttribute("d",e.getConnectorEndPath(t,e.getGanttChartBase().getId(),e.getProcessedType()));r.appendChild(n);r.appendChild(s);return r};l.prototype.createOutlinePathNode=function(e,t){var i=document.createElementNS(d3.ns.prefix.svg,"path");i.setAttribute("id",e.getShapeUid()+"-selected");i.setAttribute("aria-hidden","false");i.setAttribute("class","resizeContainer sapGanttSelectedPath");var r=e.getSelectedStyle?e.getSelectedStyle():this.getSelectionInlineStyle(e);i.style=r;i.setAttribute("d",t);return i};l.prototype.determineOutlineByFrame=function(e,t){var i=this._getDomRef(e).getBBox(),r=false;if(e instanceof sap.gantt.simple.BaseGroup){var n=0,a;a=window.getComputedStyle(e.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(a){n=a[1].split(",")[5];r=true}}var s=i.x,o=r?i.y+parseFloat(n):i.y,g=i.width,h=i.height,l=s+g,p=o+h;var m=this.getSelectionSettings().strokeWidth,d=m/2;s=s-d+t.x;o=r?o-d:o-d+t.y;l=l+d+t.x;p=r?p+d:p+d+t.y;var c=["M",s,o,"L",l,o,"L",l,p,"L",s,p,"z"].join(" ").trim();return c};l.prototype.removeOutline=function(e){var t=document.getElementById(e.getShapeUid()+"-selected");if(t){jQuery(t).remove()}};l.prototype.removeHighlight=function(e){var t=document.getElementById(e.getShapeUid()+"-highlighted");if(t){t.childNodes.forEach(function(e){e.remove()})}};l.prototype.removeDeltaOutline=function(e){var t=document.getElementById(e.getId()+"-selected");if(t){jQuery(t).remove()}};l.prototype.renderResizerOutline=function(e){this.removeOutline(e);var t=e.getConnectable(),i=e.getResizable();var r=this.getOutlineLines(e,true);var n=this.createResizeContainer(e);this.renderSelectionBorders(r,n);if(i){this.renderResizeTriggerAndCover(r,n,false,e,true);this.attachMousedownEvent()}if(t){this.renderShapeConnectTrigger(e,n);this.getGantt()._getConnectExtension().attachShapeConnectEvents()}if(this.isResizing()){this.updateDomSelector();this.updateOriginShapeFrame();this.attachResizeEvents()}};l.prototype.renderResizerOutlineOnMouseOver=function(e){this.removeOutline(e);var t=this.getOutlineLines(e,true);var i=this.createResizeContainer(e);this.renderSelectionBorders(t,i,true);this.renderResizeTriggerAndCover(t,i,true,false,true);this.attachMousedownEvent();if(this.isResizing()){this.updateDomSelector();this.updateOriginShapeFrame();this.attachResizeEvents()}};l.prototype.showShapeConnectTrigger=function(e){var t=this.getGantt()._getConnectExtension();var i=t.getRlsStartShape().shapeUid;return t.isShapeConnecting()?i===e.getShapeUid():true};l.prototype.renderSelectionBorders=function(e,t,i){t.selectAll(".border").data(e.border).enter().append("line").each(function(e){if(i){e.stroke="transparent"}d3.select(this).attr(e)}).attr("class",function(e){return"border "+e.class+"Line"})};l.prototype.renderResizeTriggerAndCover=function(e,t,i,r,n){t.selectAll(".lineTrigger").data(e.indicator).enter().append("line").each(function(e){d3.select(this).attr(e)}).attr("class",function(e){return"resizeTrigger lineTrigger "+e.class+"Trigger"}).attr({opacity:0,"stroke-width":3}).style({cursor:"ew-resize"});if(!i){var a=this.getResizeRectCoverAttrs(r,n);t.append("rect").attr(a).style({"pointer-events":"none"})}};l.prototype.renderHighlightBorders=function(e,t){t.selectAll(".border").data(e.border).enter().append("line").each(function(e){d3.select(this).attr(e)}).attr("class",function(e){return"border "+e.class+"Line"})};l.prototype.createResizeContainer=function(e,t){var i=t?this._getDeltaMarkerSelectionRootNode():this._getShapeSelectionRootNode();var r=t?e.getId():e.getShapeUid();var n=i.append("g").classed("resizeContainer",true).attr("id",r+"-selected").attr(a.SELECT_FOR_DATASET_KEY,r);return n};l.prototype.createHighlightContainer=function(e){var t=this._getShapeHighlightRootNode();var i=e.getShapeUid();var r=t.append("g").classed("highlightContainer",true).attr("id",i+"-highlighted").attr(a.SELECT_FOR_DATASET_KEY,i);return r};l.prototype.renderShapeConnectTrigger=function(e,t){var i=this.showShapeConnectTrigger(e);var r=this.getConnectSquaresData(i,e);t.selectAll(".rectTrigger").data(r.slice()).enter().append("rect").each(function(e){d3.select(this).attr(e)}).attr("class",function(e){return"shapeConnectTrigger rectTrigger "+e.class+"Trigger"}).attr({stroke:"#000","stroke-width":1})};l.prototype.attachMousedownEvent=function(){var e=jQuery(document.getElementById(this.getGantt().getId()+"-svg"));var t=e.find(".resizeTrigger");t.off(p);t.bind("mousedown"+p,jQuery.proxy(this.beforeResizing,this))};l.prototype.attachHeaderMouseEvent=function(){var e=jQuery(document.getElementById(this.getGantt().getId()+"-header-svg"));var t=e.find(".resizeTrigger");t.off(p);t.bind("mousedown"+p,jQuery.proxy(this.beforeDeltaResizing,this))};l.prototype.attachResizeEvents=function(){this._removeDragEvents();var e=jQuery(document);e.bind("mousemove"+p,jQuery.proxy(this.onResizing,this));e.bind("mouseup"+p,jQuery.proxy(this.endResizing,this));e.bind("keydown"+p,jQuery.proxy(this.onKeydown,this))};l.prototype.attachDeltaResizeEvents=function(){this._removeDragEvents();var e=jQuery(document);e.bind("mousemove"+p,jQuery.proxy(this.onDeltaResizing,this));e.bind("mouseup"+p,jQuery.proxy(this.onDeltaResize,this));e.bind("keydown"+p,jQuery.proxy(this.onKeydown,this))};l.prototype._removeDragEvents=function(){var e=jQuery(document);e.off(p)};l.prototype.beforeResizing=function(e){var t=jQuery(e.target),i=t.parents("g").attr(a.SELECT_FOR_DATASET_KEY);var r=this._getShapeByUid(i);if(!r||e.button!==0){return}this.setFrame(this._getDomRef(r).getBBox());this.updateDomSelector(e);this.origin.eventTarget=e.target;this.updateOriginShapeFrame();this.origin.resizeFor=i;if(t.hasClass("leftTrigger")){this.currentAction=c.LeftResize}else{this.currentAction=c.RightResize}this._updateResizingEffect(true);this.attachResizeEvents()};l.prototype.beforeDeltaResizing=function(e){var t=jQuery(e.target),i=t.parents("g").attr(a.SELECT_FOR_DATASET_KEY);var r=sap.ui.getCore().byId(i);if(!r||e.button!==0){return}var s=n.getEventSVGPoint(this.getDomRefs().headerSvg,e),o=e.target.getBBox();this.mResizePoint={cursorX:s.x,cursorY:s.y,shapeX:o.x,shapeY:o.y,shapeWidth:o.width};this.setFrame(r.getDomRef().getBBox());this.updateDomSelector(e);this.origin.eventTarget=e.target;this.updateOriginShapeFrame();this.origin.resizeFor=i;if(t.hasClass("leftTrigger")){this.currentAction=c.LeftResize}else{this.currentAction=c.RightResize}this._updateResizingEffect(true);this.attachDeltaResizeEvents();this.deltaResize=true};l.prototype.updateOriginShapeFrame=function(){var e=this.getFrame();this.origin.minX=e.x;this.origin.maxX=e.x+e.width};l.prototype.onResizing=function(e){if(this._shallSkip(e)){return}this._updateResizingEffect(true);var t=this.getSvgElement();var i=n.getEventSVGPoint(t,e).x;var r=this.getGantt()._getPointerExtension();i=i+r._getAutoScrollStep();if(this.currentAction===c.RightResize){this._updateRightPartDoms(i)}else if(this.currentAction===c.LeftResize){this._updateLeftPartDoms(i)}};l.prototype.onDeltaResizing=function(e){if(this._shallSkip(e)){return}this._updateResizingEffect(true);var t=this.getHeaderSvgElement();var i=n.getEventSVGPoint(t,e).x;var r=this.getGantt()._getPointerExtension();i=i+r._getAutoScrollStep();if(this.currentAction===c.RightResize){this._updateRightPartDoms(i,e)}else if(this.currentAction===c.LeftResize){this._updateLeftPartDoms(i,e)}if(e){if(!this.deltaResizeStart){this.$ghost=this.createResizeGhost(i,this.currentAction);this.deltaResizeStart=true}else{if(this._isValidResize(i)){this.showGhost(e)}}}};l.prototype._isValidResize=function(e){if(this.currentAction===c.LeftResize){return!(e>this.mElementFrame.x+this.mElementFrame.width)}else if(this.currentAction===c.RightResize){return!(e<this.mElementFrame.x)}};l.prototype._updateResizingEffect=function(e){var t=e?.4:0;this.mDoms.resizeRectCover.attr("opacity",t)};l.prototype.isResizing=function(){return this.currentAction===c.LeftResize||this.currentAction===c.RightResize};l.prototype.removeGhost=function(){this.$ghost=null;jQuery(document.getElementById("sapGanttDragGhostWrapper")).remove()};l.prototype._updateRightPartDoms=function(e,t){var i=function(e){if(e-this.origin.minX<=2*this.getMargin()){return this.origin.minX+2*this.getMargin()}return e}.bind(this);var r=i(e);this.mDoms.rightLine.attr({x1:r,x2:r});this.mDoms.rightLineTrigger.attr({x1:r,x2:r});this.mDoms.topLine.attr({x2:r});this.mDoms.bottomLine.attr({x2:r});this.mDoms.rightRectTrigger.attr({x:r+a.SHAPE_CONNECT_INDICATOR_WIDTH/2-2});var n=r-this.origin.minX;this.mDoms.resizeRectCover.attr({width:n})};l.prototype.showGhost=function(e){var t=this.calcGhostAligmentForLines(e);var i=a.getTimeLabel(e,this.getGantt().getAxisTime(),this.getGantt().getLocale(),this.getDomRefs().headerSvg);document.getElementById("sapGanttDragText").innerText=i;jQuery(document.getElementById("sapGanttDragGhostWrapper")).css(t).css({visibility:"visible"})};l.prototype.calcGhostAligmentForLines=function(e){var t=n.xPosOfEvent(e);var i=n.getSvgScreenPoint(this.getDomRefs().headerSvg,{pageX:this.mResizePoint.cursorX,clientX:this.mResizePoint.cursorX,pageY:this.mResizePoint.cursorY,clientY:this.mResizePoint.cursorY});return{left:t+"px",top:i.y+"px"}};l.prototype.createResizeGhost=function(e,t){var i=jQuery("<div id='sapGanttDragGhostWrapper'></div>");jQuery(document.body).append(i);var r=document.createElement("canvas");var n=this.origin.eventTarget.getBBox();r.width=1;r.height=n.height;var s=jQuery(this.origin.eventTarget),o=s.parents("g").attr(a.SELECT_FOR_DATASET_KEY);var g=sap.ui.getCore().byId(o);var h=g.getParent(),l={};if(h.getVisibleDeltaStartEndLines()){var p=h._getStartLine();var m=h._getEndLine();var d=h._getHeaderStartLine();var c=h._getHeaderEndLine();var u=document.getElementById(p.sId);var f=document.getElementById(m.sId);var v=document.getElementById(d.sId);var S=document.getElementById(c.sId);l={headerStartLine:v,startLine:u,headerEndLine:S,endLine:f};var y=v.getBBox();var T=u.getBBox();r.height+=T.height+y.height}this.createGhostImage(this.origin.eventTarget,r,l);return i};l.prototype.createGhostImage=function(e,t,i){var r=this.serializeClonedSvg(t,e,i);var n=this._b64EncodeUnicode(r);var a="data:image/svg+xml;base64,"+n;this.appendGhostImageToWrapper(e,a)};l.prototype._b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function e(t,i){return String.fromCharCode("0x"+i)}))};l.prototype.serializeClonedSvg=function(e,t,i){var r=d3.ns.prefix.svg;var n=document.createElementNS(r,"svg");n.setAttribute("width",e.width);n.setAttribute("height",e.height);var a=document.createElementNS(r,"g");var s=sap.ui.getCore().byId(this.origin.shapeUid).getParent();if(s.getVisibleDeltaStartEndLines()){var o=i.headerEndLine.getBBox();a.setAttribute("transform","translate("+-o.x+", "+-o.y+")");var g=i.headerEndLine.cloneNode(true);a.appendChild(g);var h=i.endLine.cloneNode(true);a.appendChild(h)}var l=this.getGantt().getSvgDefs();if(l){var p=jQuery(document.getElementById(l.getId())).get(0).cloneNode(true);n.appendChild(p)}n.appendChild(a);return(new XMLSerializer).serializeToString(n)};l.prototype.appendGhostImageToWrapper=function(e,t){var i=jQuery(document.getElementById("sapGanttDragGhostWrapper"));jQuery("<div class='sapGanttDragGhost'>"+"<img class='sapGanttDragGhostImg' src='"+t+"'>"+"<div id='sapGanttDragText' class='sapGanttDragTextOverlay'></div>"+"</div>").appendTo(i)};l.prototype._updateLeftPartDoms=function(e){var t=function(e){var t=this.origin.maxX;var i=2*this.getMargin();if(t-e<=i){return t-i}return e}.bind(this);var i=t(e);this.mDoms.leftLine.attr({x1:i,x2:i});this.mDoms.leftLineTrigger.attr({x1:i,x2:i});this.mDoms.topLine.attr({x1:i});this.mDoms.bottomLine.attr({x1:i});this.mDoms.leftRectTrigger.attr({x:i-this.getMargin()-a.SHAPE_CONNECT_INDICATOR_WIDTH-2});var r=Math.abs(i-u(this.mDoms.rightLineTrigger,"x1"))-2;this.mDoms.resizeRectCover.attr({x:i+this.getMargin(),width:r<0?0:r})};l.prototype.onKeydown=function(e){if(e.keyCode===t.ESCAPE){if(this.isResizing()){this._updateLeftPartDoms(this.origin.minX-this.getMargin());this._updateRightPartDoms(this.origin.maxX+this.getMargin());this._updateResizingEffect(false);this._initResizeStatus()}this._removeDragEvents()}};l.prototype.endResizing=function(e){this._removeDragEvents();if(this._shallSkip(e)){return}var t=u(this.mDoms.leftLine,"x1")+this.getMargin(),i=u(this.mDoms.rightLine,"x1")-this.getMargin();var r=this._getShapeByUid(this.origin.resizeFor),n=this.getGantt();if(r){this.renderResizerOutline(r);this._fireShapeResizeEvent(n,r,t,i);a.rerenderAssociatedRelationships(n,r)}this._initResizeStatus()};l.prototype.onDeltaResize=function(e){var t=jQuery(this.origin.eventTarget),i=t.parents("g").attr(a.SELECT_FOR_DATASET_KEY);var r=sap.ui.getCore().byId(i);var n=r.getParent();var s=this._getDeltaResizeEventData(e);if(s){n.fireDeltalineResize(s)}this.removeGhost();this._initResizeStatus();this._removeDragEvents()};l.prototype._getDeltaResizeEventData=function(e){var t=i.getConfiguration().getRTL();var r=jQuery(this.origin.eventTarget),s=r.parents("g").attr(a.SELECT_FOR_DATASET_KEY);var o=sap.ui.getCore().byId(s);var g=o.getParent();var l=n.getEventSVGPoint(this.getDomRefs().headerSvg,e);var p=this.getGantt();var m=p.getAxisTime();var d=h.dateToAbapTimestamp(m.viewToTime(l.x));if(t){if(this.currentAction===c.LeftResize){if(l.x>this.mElementFrame.x+this.mElementFrame.width){d=h.dateToAbapTimestamp(m.viewToTime(this.mElementFrame.x+this.mElementFrame.width))}return{newTimeStamp:g.getTimeStamp(),newEndTimeStamp:d,oldTimeStamp:g.getTimeStamp(),oldEndTimeStamp:g.getEndTimeStamp()}}else{if(l.x<this.mElementFrame.x){d=h.dateToAbapTimestamp(m.viewToTime(this.mElementFrame.x))}return{newTimeStamp:d,newEndTimeStamp:g.getEndTimeStamp(),oldTimeStamp:g.getTimeStamp(),oldEndTimeStamp:g.getEndTimeStamp()}}}else{if(this.currentAction===c.LeftResize){if(l.x>this.mElementFrame.x+this.mElementFrame.width){d=h.dateToAbapTimestamp(m.viewToTime(this.mElementFrame.x+this.mElementFrame.width))}return{newTimeStamp:d,newEndTimeStamp:g.getEndTimeStamp(),oldTimeStamp:g.getTimeStamp(),oldEndTimeStamp:g.getEndTimeStamp()}}else if(this.currentAction===c.RightResize){if(l.x<this.mElementFrame.x){d=h.dateToAbapTimestamp(m.viewToTime(this.mElementFrame.x))}return{newTimeStamp:g.getTimeStamp(),newEndTimeStamp:d,oldTimeStamp:g.getTimeStamp(),oldEndTimeStamp:g.getEndTimeStamp()}}}};l.prototype._getShapeByUid=function(e){var t=a.getShapesWithUid(this.getGantt().getId(),[e]);if(t.length>0){return t[0]}};l.prototype._fireShapeResizeEvent=function(e,t,r,n){var a,s;if(i.getConfiguration().getRTL()){a=n===this.origin.maxX?t.getTime():e.getAxisTime().viewToTime(n);s=r===this.origin.minX?t.getEndTime():e.getAxisTime().viewToTime(r)}else{a=r===this.origin.minX?t.getTime():e.getAxisTime().viewToTime(r);s=n===this.origin.maxX?t.getEndTime():e.getAxisTime().viewToTime(n)}e.fireShapeResize({shape:t,shapeUid:t.getShapeUid(),rowObject:t.getParent(),oldTime:[t.getTime(),t.getEndTime()],newTime:[a,s]})};l.prototype._initResizeStatus=function(){this.currentAction=c.None;this.origin={minX:-1,maxX:-1,eventTarget:null,resizeFor:null};this.mElementFrame=null;this.iOutlineMargin=0;this.initDomSelector();this.deltaResize=false;this.deltaResizeStart=false;this.$ghost=null;this.mResizePoint={}};l.prototype.setFrame=function(e){this.mElementFrame=e};l.prototype.getFrame=function(){return this.mElementFrame};l.prototype.setMargin=function(e){this.iOutlineMargin=e};l.prototype.getMargin=function(){return this.iOutlineMargin};l.prototype._shallSkip=function(e){if(!this.isResizing()){return true}if(this.origin.eventTarget&&!jQuery(this.origin.eventTarget).hasClass("resizeTrigger")){return true}return false};l.prototype.getConnectSquaresData=function(e,t){var i=this.getFrame(),r=i.x,n=i.y,s=i.width,o=i.height,h=this.getMargin(),l=false;if(t instanceof sap.gantt.simple.BaseGroup){var p=0,m;m=window.getComputedStyle(t.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(m){p=m[1].split(",")[5];l=true}n=i.y+parseFloat(p)}var d=e?a.SHAPE_CONNECT_INDICATOR_WIDTH:0;var c={width:d,height:d,stroke:"#000","stroke-width":1};var u=g.getShapeBias(t);var f;if(t.getDomRef("nonLabelGroup")){f=3/4}else{f=1/2}var v=r-h-d-2+u.x,S=l?n+o*f-d/2:n+o*f-d/2+u.y;var y=r+s+h+2+u.x,T=S;return[jQuery.extend({x:v,y:S,class:"left"},c),jQuery.extend({x:y,y:T,class:"right"},c)]};l.prototype._getShapeSelectedFill=function(e){if(e.isA("sap.gantt.simple.BaseConditionalShape")){e=e._getActiveShapeElement()}if(e&&(e.getSelectedFill()||e.getSelectedTitleColor())){this._bShapeSelectedFill=true}else if(e instanceof sap.gantt.simple.BaseGroup){if(this.getGantt().getSelectOnlyGraphicalShape()){e._eachChildOfGroup(e,function(e,t){t.forEach(function(e){if(!this._bShapeSelectedFill){this._getShapeSelectedFill(e)}}.bind(this))}.bind(this))}else{e._eachChildOfGroup(e,function(e){if(!this._bShapeSelectedFill){this._getShapeSelectedFill(e)}}.bind(this))}}};l.prototype.getResizeRectCoverAttrs=function(e,t){var i=this.getFrame(),r=this.getMargin(),n=e.getHighlightable()?this.getHighlightSettings():this.getSelectionSettings(),a=n.strokeWidth,o=false;var g=n.shapeColor;if(g){g=g.substr(0,1)==="@"?g.substring(1):g}this._bShapeSelectedFill=false;var h=t&&(this._getShapeSelectedFill(e)||this._bShapeSelectedFill);var l=s.get(g)?s.get(g):g;var p={stroke:"none","stroke-width":0,fill:h?null:l,class:"resizeCover",opacity:h?0:n.fillOpacity};if(e instanceof sap.gantt.simple.BaseGroup){var m,d=0;m=window.getComputedStyle(e.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(m){d=m[1].split(",")[5];o=true}}var c=2*r-2*a;return jQuery.extend({x:i.x-r+a,y:o?i.y-r+a+parseFloat(d):i.y-r+a,width:i.width+c,height:i.height+c},p)};l.prototype.getOutlineLines=function(e,t){var i=this.getFrame(),r=i.x,n=i.y,a=i.width,o=i.height,h=this.getMargin(),l=false;if(e instanceof sap.gantt.simple.BaseGroup){var p,m=0;p=window.getComputedStyle(e.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(p){m=p[1].split(",")[5];l=true}n=i.y+parseFloat(m)}var d=this.getSelectionSettings();var c=d.shapeColor;var u=d.color;if(c){c=c.substr(0,1)==="@"?c.substring(1):c}if(u){u=u.substr(0,1)==="@"?u.substring(1):u}this._bShapeSelectedFill=false;var f=t&&(this._getShapeSelectedFill(e)||this._bShapeSelectedFill);var v={"stroke-dasharray":d.strokeDasharray,fill:s.get(u)?s.get(c):c,"fill-opacity":d.fillOpacity,stroke:s.get(u)?s.get(u):u,"stroke-width":f?0:d.strokeWidth};var S=g.getShapeBias(e);var y={minX:r-h+S.x,minY:l?n-h:n-h+S.y,maxX:r+a+h+S.x,maxY:l?n+o+h:n+o+h+S.y};var T={top:{x1:y.minX,y1:y.minY,x2:y.maxX,y2:y.minY},right:{x1:y.maxX,y1:y.minY,x2:y.maxX,y2:y.maxY},bottom:{x1:y.minX,y1:y.maxY,x2:y.maxX,y2:y.maxY},left:{x1:y.minX,y1:y.minY,x2:y.minX,y2:y.maxY}};var R=["top","right","bottom","left"];var E=R.map(function(e){return jQuery.extend(T[e],{class:e},v)});var x=jQuery.extend(true,T);var _=["left","right"].map(function(e){return jQuery.extend(x[e],{class:e},v)});return{border:E,indicator:_}};l.prototype.getHighlightOutLines=function(e){var t=this.getFrame(),i=t.x,r=t.y,n=t.width,a=t.height;var o=this.getMargin();var h=this.getHighlightSettings();var l=h.shapeColor;var p=h.color;if(l){l=l.substr(0,1)==="@"?l.substring(1):l}if(p){p=p.substr(0,1)==="@"?p.substring(1):p}var m={"stroke-dasharray":h.strokeDasharray,fill:s.get(p)?s.get(l):l,"fill-opacity":h.fillOpacity,stroke:s.get(p)?s.get(p):p,"stroke-width":h.strokeWidth};var d=g.getShapeBias(e);var c={minX:i-o+d.x,minY:r-o+d.y,maxX:i+n+o+d.x,maxY:r+a+o+d.y};var u={top:{x1:c.minX,y1:c.minY,x2:c.maxX,y2:c.minY},right:{x1:c.maxX,y1:c.minY,x2:c.maxX,y2:c.maxY},bottom:{x1:c.minX,y1:c.maxY,x2:c.maxX,y2:c.maxY},left:{x1:c.minX,y1:c.minY,x2:c.minX,y2:c.maxY}};var f=["top","right","bottom","left"];var v=f.map(function(e){return Object.assign(u[e],{class:e},m)});var S=Object.assign({},u);var y=["left","right"].map(function(e){return Object.assign(S[e],{class:e},m)});return{border:v,indicator:y}};l.prototype._getResizeTime=function(e){var t=u(this.mDoms.leftLine,"x1")+this.getMargin(),r=u(this.mDoms.rightLine,"x1")-this.getMargin();if(isNaN(t)||isNaN(r)){return null}var n=this.getGantt();var a=n.getAxisTime().viewToTime(t),s=n.getAxisTime().viewToTime(r),o;var g=i.getConfiguration().getRTL();if(g){o=s;s=a;a=o}return{time:a,endTime:s}};l.prototype._getDomRef=function(e){return e.getDomRef("nonLabelGroup")?e.getDomRef("nonLabelGroup"):e.getDomRef()};return l});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttRowAction", ["sap/ui/table/RowAction","sap/gantt/library"],function(t,e){"use strict";var i=e.simple.yAxisColumnContent;var n=t.extend("sap.gantt.simple.GanttRowAction",{metadata:{library:"sap.gantt",properties:{rowId:{type:"string"},columnWidth:{type:"int",defaultValue:192},columnContent:{type:"sap.gantt.simple.yAxisColumnContent",defaultValue:i.ThresholdwithLabelandUOM}},aggregations:{controlTemplate:{type:"sap.ui.core.Control",multiple:false}}},init:function(){this._bFixedLayout=true;this._aActions=["",""];this._iLastCloseTime=0},onBeforeRendering:function(){var t=this.getRow().getTable().getParent();t._oSplitter.detachResize(this.setTableColumnStyle,this)},onAfterRendering:function(){var t=this.getRow().getTable().getParent();t._oSplitter.attachResize(this.setTableColumnStyle,this);this.setTableColumnStyle()},setTableColumnStyle:function(){var t=sap.ui.getCore().getConfiguration().getRTL();var e=this.getRow().getTable(),n=e.getId();var l;if(this.getColumnContent()===i.ThresholdwithLabelandUOM){l=this.mProperties.hasOwnProperty("columnWidth")&&this.getColumnWidth()>192?this.getColumnWidth()+"px":192+"px"}else if(this.getColumnContent()===i.ThresholdwithLabel){l=this.mProperties.hasOwnProperty("columnWidth")&&this.getColumnWidth()>124?this.getColumnWidth()+"px":124+"px"}else if(this.getColumnContent()===i.ThresholdwithUOM){l=this.mProperties.hasOwnProperty("columnWidth")&&this.getColumnWidth()>128?this.getColumnWidth()+"px":128+"px"}else if(this.getColumnContent()===i.OnlyThreshold){l=this.mProperties.hasOwnProperty("columnWidth")&&this.getColumnWidth()>52?this.getColumnWidth()+"px":52+"px"}if(t){document.getElementById(n+"-sapUiTableColHdrScr").style.marginLeft=l;document.getElementById(n+"-sapUiTableCtrlScr").style.marginLeft=l}else{document.getElementById(n+"-sapUiTableColHdrScr").style.marginRight=l;document.getElementById(n+"-sapUiTableCtrlScr").style.marginRight=l}document.getElementById(n+"-rowacthdr").style.width=l;document.getElementById(n+"-sapUiTableRowActionScr").style.width=l;document.getElementById(this.getId()).parentElement.style.width=l},getAccessibilityInfo:function(){return{focusable:true,enabled:true,description:""}}});return n});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttRowActionRenderer", ["sap/ui/table/Row"],function(e){"use strict";var t={};t.render=function(t,n){t.openStart("div",n);t.class("sapUiGanttTableAction");t.style("height","100%");t.style("width","100%");if(!(n.getParent()instanceof e)){t.style("display","none")}if(!n.getVisible()){t.class("sapUiTableActionHidden")}t.openEnd();var i=n.getAggregation("controlTemplate");t.renderControl(i);t.close("div")};return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttRowSettings", ["sap/base/util/uid","sap/ui/table/RowSettings","./AggregationUtils","./RenderUtils","sap/gantt/misc/Utility"],function(e,t,a,n,r){"use strict";var i=t.extend("sap.gantt.simple.GanttRowSettings",{metadata:{library:"sap.gantt",properties:{rowId:{type:"string"}},defaultAggregation:"shapes1",aggregations:{calendars:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendars"},calendars1:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar1"},calendars2:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar2"},calendars3:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar3"},calendars4:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar4"},calendars5:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar5"},relationships:{type:"sap.gantt.simple.Relationship",multiple:true,singularName:"relationship"},shapes1:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape1"},shapes2:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape2"},shapes3:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape3"},shapes4:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape4"},shapes5:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape5"}}}});i.prototype.getAllExpandableShapes=function(){var e=[];this._mapAllShapes(function(t){if(t.length>0&&t[0].getExpandable()){e.push(t)}});return[].concat.apply([],e)};i.prototype._mapAllShapes=function(e){var t=a.getNonLazyAggregations(this);Object.keys(t).map(function(a){if(t.hasOwnProperty(a)){var n=t[a];e(this[n._sGetter]())}}.bind(this))};i.prototype.getParentGantt=function(){return a.getParentControlOf("sap.gantt.simple.GanttChartWithTable",this)};i.prototype.getParentRow=function(){return a.getParentControlOf("sap.ui.table.Row",this)};i.prototype.getShapeUid=function(t){var a=t.getShapeId();if(!a){a=e();t.setProperty("shapeId",a,true)}var n=t.getScheme(),r=this.getRowUid(n);var i=this.getShapeBindingContextPath(t);var s=r+"|DATA:"+i+"["+a+"]";return s};i.prototype.getShapeBindingContextPath=function(e){var t=this.getBindingModelName();var a=e.getBindingContext(t);if(a==null){a=this.getBindingContextFromParent(e)}if(a){return a.getPath()}return""};i.prototype.getBindingModelName=function(){var e=this._getRow().getParent().getBindingInfo("rows");return e.model};i.prototype.getBindingContextFromParent=function(e,t){var a=e.getParent();var n;while(a){n=a.getBindingContext(t);if(n){return n}else{a=a.getParent()}}return n};i.prototype.getRowUid=function(e,t){var a=this.getRowId();if(a==null){return null}if(!e){e=this.getParentGantt().getPrimaryShapeScheme().getKey()}if(t===undefined){t=this.getParentRow()?this.getParentRow().getIndex():0}return"PATH:"+a+"|SCHEME:"+e+"["+t+"]"};i.prototype.renderElement=function(e,t){n.renderInlineShapes(e,this,t)};i.prototype.invalidate=function(e){return this._invalidateInnerGanttIfNeeded()};i.prototype._invalidateInnerGanttIfNeeded=function(){var e=this._getRow();r.safeCall(e,["getParent","getParent","getInnerGantt","invalidate"]);return this};return i});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttScrollExtension", ["sap/ui/thirdparty/jquery","sap/ui/core/Core","sap/ui/Device","../misc/Format","../config/TimeHorizon","./GanttExtension","./RenderUtils","./GanttUtils","sap/gantt/simple/AggregationUtils"],function(jQuery,t,e,i,n,o,r,s,a){"use strict";var l=function(e,i){var n=t.getConfiguration().getRTL();var o=n?"scrollLeftRTL":"scrollLeft";if(typeof i==="number"){e[o](i)}return e[o]()};var h=".sapGanttScroll";var f="scroll"+h;var c={onHSBScroll:function(t){if(this._iScrollTimer!==null){clearTimeout(this._iScrollTimer)}this._iScrollTimer=setTimeout(function(){this._getScrollExtension().updateVisibleHorizonIfNecessary()}.bind(this),150)},onMouseWheelScrolling:function(t){if(t.shiftKey&&t.ctrlKey){return}var e=0;if("detail"in t){e=t.detail}if("wheelDelta"in t){e=t.wheelDelta/120}if("wheelDeltaY"in t){e=t.wheelDeltaY/120}var i=Math.abs(e)>=1;var n=t.deltaX;var o=t.deltaY;if(i){n=t.deltaY;o=t.deltaX}var r=Math.abs(n)>Math.abs(o);var s=this._getScrollExtension(),a=r&&t.shiftKey;var l=r?n:o,h=l>0,f=false;if(l===0){return}if(a){var c=s.getGanttHsb();if(h){f=c.scrollLeft===c.scrollWidth-c.offsetWidth}else{f=c.scrollLeft===0}if(!f){c.scrollLeft=c.scrollLeft+l}t.preventDefault();t.stopPropagation()}},getEventListenerTargets:function(t){var e=[t.getDomRef("svg"),t.getDomRef("header-svg")];return e.filter(function(t){return t!=null})},onTouchStart:function(t){if(t.type==="touchstart"||t.pointerType==="touch"){var e=this._getScrollExtension(),i=e.getGanttHsb();var n=t.touches?t.touches[0]:t;e._mTouchSessionData={initialPageX:n.pageX,initialPageY:n.pageY,initialScrollLeft:i?i.scrollLeft:0,initialScrolledToEnd:null}}},onTouchMoveHorizontalScrolling:function(t){if(t.type==="touchmove"||t.pointerType==="touch"){var e=this._getScrollExtension();var i=e._mTouchSessionData;var n=t.touches?t.touches[0]:t;var o=n.pageX-i.initialPageX;var r=n.pageY-i.initialPageY;var s=false;var a=false;var l=Math.abs(o)>Math.abs(r);if(!i||!l){return}var h=e.getGanttHsb();if(o<0){s=h.scrollLeft===h.scrollWidth-h.offsetWidth}else{s=h.scrollLeft===0}if(!i.initialScrolledToEnd){i.initialScrolledToEnd=s}if(!s&&!i.initialScrolledToEnd){h.scrollLeft=i.initialScrollLeft-o;a=true}if(a){t.preventDefault()}}},addEventListeners:function(t){var e=t._getScrollExtension();this.removeEventListeners(t);jQuery(e.getGanttHsb()).on(f,this.onHSBScroll.bind(t));var i=this.getEventListenerTargets(t);e._mTouchEventListener=this.addTouchEventListener(i,t);e._mMouseWheelEventListener=this.addMouseWheelEventListener(i,t)},removeEventListeners:function(t){var e=t._getScrollExtension();jQuery(e.getGanttHsb()).off(h);c.removeScrollEventListeners(t)},addMouseWheelEventListener:function(t,e){var i=c.onMouseWheelScrolling.bind(e);for(var n=0;n<t.length;n++){t[n].addEventListener("wheel",i)}return{wheel:i}},addTouchEventListener:function(t,i){var n=c.onTouchStart.bind(i);var o=c.onTouchMoveHorizontalScrolling.bind(i);var r={};for(var s=0;s<t.length;s++){if(e.support.pointer&&e.system.desktop){t[s].addEventListener("pointerdown",n);t[s].addEventListener("pointermove",o,e.browser.chrome?{passive:true}:false)}else if(e.support.touch){t[s].addEventListener("touchstart",n);t[s].addEventListener("touchmove",o)}}if(e.support.pointer&&e.system.desktop){r={pointerdown:n,pointermove:o}}else if(e.support.touch){r={touchstart:n,touchmove:o}}return r},removeScrollEventListeners:function(t){var e=t._getScrollExtension();var i=c.getEventListenerTargets(t);function n(t,e){for(var i in e){var n=e[i];if(n){t.removeEventListener(i,n)}}}for(var o=0;o<i.length;o++){n(i[o],e._mTouchEventListener);n(i[o],e._mMouseWheelEventListener)}delete e._mTouchEventListener;delete e._mMouseWheelEventListener}};var g=o.extend("sap.gantt.GanttScrollExtension",{_init:function(t,e){this.oGanttHsb=null;this._bSuppressSetVisibleHorizon=false;this.mOffsetWidth=null;return"ScrollExtension"},_attachEvents:function(){var t=this.getGantt();c.addEventListeners(t)},_detachEvents:function(){var t=this.getGantt();c.removeEventListeners(t)},destroy:function(){this._detachEvents();this._delegate=null;this.oGanttHsb=null;this.mOffsetWidth=null;o.prototype.destroy.apply(this,arguments)}});g.prototype.updateVisibleHorizonIfNecessary=function(){var t=this.getGantt();if(t){if(!this._bSuppressSetVisibleHorizon){this._updateVisibleHorizonForce()}this._bSuppressSetVisibleHorizon=false;t.getAggregation("_header").renderElement();if(!this.scrollTimer){this.scrollTimer=window.setTimeout(function(){if(s.isDynamicText()){t.getTable().rerender()}var e=t._getDragDropExtension();if(e._bEnableRowHighlight&&e.isDragging()){e.getShapeDndRowHighlightIndex(t);t.toggleDnDRowHighlight(true)}this.scrollTimer=null}.bind(this),500)}}};g.prototype._updateVisibleHorizonForce=function(){var t=this._scrollLeftToVisibleHorizon();this.getGantt()._updateVisibleHorizon(t,"horizontalScroll",this.getVisibleWidth())};g.prototype.jumpToVisibleHorizon=function(t){this.getGantt()._updateVisibleHorizon(this.getGantt().getAxisTimeStrategy().getVisibleHorizon(),t||"horizontalScroll",this.getVisibleWidth())};g.prototype._getGanttHsbScrollLeft=function(){return l(jQuery(this.getGanttHsb()))};g.prototype.getContentWidth=function(){var t=this.getGantt();var e=t.getAxisTime(),i=e.getViewRange();return Math.abs(Math.ceil(i[1])-Math.ceil(i[0]))};g.prototype.updateGanttScrollWidth=function(){var t=this.getGantt();t.getSyncedControl().setInnerWidth(t.getContentWidth()+"px")};g.prototype.getVisibleWidth=function(){return jQuery(document.getElementById(this.getGantt().getId()+"-gantt")).width()};g.prototype.scrollGanttChartToVisibleHorizon=function(){var t=this._visibleHorizonToScrollLeft();var e=t-this.mOffsetWidth.svgOffset;var i=this.getDomRefs(),n=jQuery(i.gantt),o=jQuery(i.header),r=this.getGantt();if(Math.abs(l(n)-e)>(r._iDiff||0)){var s=this.getGanttHsb();if(s){if(l(jQuery(s))===0){l(n,0);l(o,0)}else{l(n,e);l(o,e)}if(l(n)!==0){r._iDiff=Math.abs(l(n)-e)}}}this.getGantt()._getConnectExtension().updateShapeConnectEffect(this)};g.prototype.clearOffsetWidth=function(){this.mOffsetWidth=null;this.getGantt().getAxisTime().setViewOffset(0)};g.prototype.needRerenderGantt=function(t,e,i){if(this.mOffsetWidth===null&&!i){this.updateGanttScrollWidth()}if(!i&&e!=="initialRender"&&this.mOffsetWidth&&this.doesSvgScrollWithinBuffer()&&!this.getGantt().getSyncedControl().getRowsHeightChanged()){this._scrollTableToVisibleHorizon(true);this.scrollGanttChartToVisibleHorizon();this.getGantt().getSyncedControl().scrollContentIfNecessary();return false}this._scrollTableToVisibleHorizon(true);this.updateSvgOffsetWidth();if((e!=="initialRender"||e==="initialRender"&&i)&&t){t.apply(this.getGantt());this.scrollGanttChartToVisibleHorizon();this.getGantt().getSyncedControl().scrollContentIfNecessary()}return true};g.prototype._scrollTableToVisibleHorizon=function(t){var e=jQuery(this.getGanttHsb()),i=l(e);var n=this._visibleHorizonToScrollLeft();if(Math.abs(i-n)>1){this._bSuppressSetVisibleHorizon=t;l(e,n)}};g.prototype.updateSvgOffsetWidth=function(){var t=this.calcSvgLatestOffsetWidth();this.getGantt().getAxisTime().setViewOffset(t.svgOffset);this.getGantt().iGanttRenderedWidth=t.svgWidth;this.mOffsetWidth={svgWidth:t.svgWidth,svgOffset:t.svgOffset}};g.prototype.doesSvgScrollWithinBuffer=function(){var t=this.getVisibleWidth(),e=this.getContentWidth(),i=this._visibleHorizonToScrollLeft();if(this.mOffsetWidth===null){return false}var n=this.mOffsetWidth.svgOffset,o=this.mOffsetWidth.svgWidth;var r=t>=e||i-n>=0&&o>=i-n+t;return r};g.prototype.calcSvgLatestOffsetWidth=function(){var t=this.getContentWidth(),e=this.getVisibleWidth();var i=this._getGanttHsbScrollLeft()||0;var n=r.getGanttRenderWidth(this.getGantt());var o=i-e*r.RENDER_EXTEND_FACTOR;if(o<0){n+=o;o=0}if(o+n>t){n=t-o}return{svgWidth:n,svgOffset:o}};g.prototype._visibleHorizonToScrollLeft=function(){var e=this.getGantt().getAxisTimeStrategy().getVisibleHorizon();var n=t.getConfiguration().getRTL(),o=e.getStartTime();var r=this.getGantt().getAxisTime().timeToView(i.abapTimestampToDate(o),true);if(n){r=r-this.getVisibleWidth()}if(r<0){r=0}return r};g.prototype._scrollLeftToVisibleHorizon=function(){var e=t.getConfiguration().getRTL(),i=this.getGantt().getAxisTime();var o=this._getGanttHsbScrollLeft();var r=i.viewToTime(o,true),s;if(e){s=i.viewToTime(o,true);r=undefined}return new n({startTime:r,endTime:s})};g.prototype.getGanttHsb=function(){var t=this.getGantt();if(t){this.oGanttHsb=t.getDomRef("hsb")}return this.oGanttHsb};return g});
sap.ui.predefine("sap/gantt/simple/GanttSearchSidePanel", ["sap/ui/core/Control","sap/ui/core/Core","./FindAndSelectUtils","sap/tnt/NavigationListItem","sap/tnt/NavigationList","sap/gantt/library"],function(e,t,s,n,a,i){"use strict";var r=e.extend("sap.gantt.simple.GanttSearchSidePanel",{metadata:{library:"sap.gantt",properties:{},aggregations:{}}});r.prototype.initSearchSidePanel=function(){this._oRb=t.getLibraryResourceBundle("sap.gantt");this.emptyListAndField=true;if(!s._ganttSearchResults){s._ganttSearchResults=[]}else{this.getParent().fireGanttSearchSidePanelList({searchResults:s._ganttSearchResults});this.list=this.getParent().getSearchSidePanelList();if(!this.list){var e=s._ganttSearchResults.map(function(e,t){var s=new n({text:("Gantt "+(e.ganttID+1)+", "+e.sMatchedValue).substring(0,200),id:"listItem"+t});return s});this.list=new a({items:[e]})}this.aSidePanelSearchResults=s._ganttSearchResults;s._searchResultsCount=this.aSidePanelSearchResults.length}var r=[];var o=new sap.m.Button(this.getId()+"-sidePanelToolbarButton",{icon:"sap-icon://drill-up",type:"Transparent",visible:this.getParent().getToolbar().getFindMode()===i.config.FindMode.Both,tooltip:this._oRb.getText("GNT_FIND_POPUP"),press:function(){var e=this.getParent().getToolbar(),t=e._searchFlexBox;e.fireFindPopupButtonPress();t.getItems()[0].setValue(this._oSearchSidePanel.getItems()[1].getContent()[0].getValue());if(s._ganttSearchResults.length>0){t.getItems()[2].setText("("+(s._selectedIndex+1)+"/"+s._searchResultsCount+")")}this.getParent().setShowSearchSidePanel(false);s.updateToolbarItems(e,true,true);e.searchResultsCount=s._searchResultsCount;s.toggleNavigationState(t.getItems()[1],t.getItems()[3]);this._oSearchSidePanel.destroy()}.bind(this)});var g=new sap.m.Button(this.getId()+"-sidePanelCloseButton",{text:this._oRb.getText("GNT_FIND_CLOSE"),type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_CLOSE"),press:function(){var e=this.getParent().getToolbar(),t=e._searchFlexBox;e.fireCloseSidePanelButtonPress();t.getItems()[0].setValue(this._oSearchSidePanel.getItems()[1].getContent()[0].getValue());this.getParent().setShowSearchSidePanel(false);s.updateToolbarItems(e,false);s.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),s.previousGanttID);if(s._ganttSearchResults.length>0){t.getItems()[2].setText("("+(s._selectedIndex+1)+"/"+s._searchResultsCount+")")}s.toggleNavigationState(this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1]);this._oSearchSidePanel.destroy()}.bind(this)});r.push(o);r.push(g);this._oSearchSidePanel=new sap.m.VBox(this.getId()+"-ganttSearchSidePanel",{items:[new sap.m.Panel({content:[new sap.m.FlexBox(this.getId()+"-sidePanelHeader",{justifyContent:"End",items:[new sap.m.Title({text:this._oRb.getText("GNT_FIND_PLACEHOLDER")}),r]}).addStyleClass("sapUiFindHeader")]}).addStyleClass("sapUiNoContentPadding"),new sap.m.Panel(this.getId()+"-sidePanelFindOperation",{content:[new sap.m.SearchField(this.getId()+"-sidePanelFindSearchField",{placeholder:this._oRb.getText("GNT_FIND_PLACEHOLDER"),value:this.getParent().getToolbar()._searchFlexBox.getItems()[0].getValue(),search:function(e){if(e.getParameter("clearButtonPressed")){var t=this._oSearchSidePanel.getItems();s.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),s.previousGanttID);s._selectedIndex=0;s._searchResultsCount=0;s._ganttSearchResults=[];t[2].getContent()[0].getItems()[0].setText(this._oRb.getText("GNT_EMPTY_RESULT_INFO_SIDE_PANEL"));t[3].getContent()[0].destroyItems();t[2].rerender();t[3].rerender();this.getParent().getToolbar()._searchFlexBox.getItems()[2].setText("("+s._selectedIndex+"/"+s._searchResultsCount+")");this.getParent().getToolbar()._searchFlexBox.getItems()[0].setValue("");this.setEmptyListInfo(this.emptyListAndField);s.toggleNavigationState(this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1])}else{var n=this._oSearchSidePanel.getItems()[1].getContent()[0].getValue();s.triggerSearchEvent(n,this.getParent().getGanttCharts(),true,this.getParent().getAggregation("toolbar"),this);this.setContainerHeight()}}.bind(this)})]}),new sap.m.Panel(this.getId()+"-sidePanelFindListHeader",{content:[new sap.m.FlexBox(this.getId()+"-sidePanelFindListHeaderBox",{alignItems:"Center",justifyContent:"SpaceBetween",items:[new sap.m.Text(this.getId()+"-sidePanelFindListHeaderTitle",{text:this._oRb.getText("GNT_RESULT")+" ("+s._searchResultsCount+")"}),new sap.m.FlexBox({items:[new sap.m.Button(this.getId()+"-sidePanelFindListNavigateUp",{icon:"sap-icon://navigation-up-arrow",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_PREVIOUS"),press:function(){if(s._selectedIndex>0){s._selectedIndex--;s.navigateToSearchResult(this.getParent().getGanttCharts(),this)}}.bind(this)}),new sap.m.Button(this.getId()+"-sidePanelFindListNavigateDown",{icon:"sap-icon://navigation-down-arrow",type:"Transparent",tooltip:this._oRb.getText("GNT_FIND_NEXT"),press:function(){if(s._ganttSearchResults.length-1>s._selectedIndex){s._selectedIndex++;s.navigateToSearchResult(this.getParent().getGanttCharts(),this)}}.bind(this)})]})]}).addStyleClass("sapUiFindResults")]}).addStyleClass("sapUiNoContentPadding"),new sap.m.ScrollContainer(this.getId()+"-searchListContainer",{height:"auto",vertical:true,focusable:true,content:[this.list]})]});this._oSearchSidePanel.getItems()[3].getContent()[0].setSelectedItem("listItem"+s._selectedIndex);this._oSearchSidePanel.getItems()[1].getContent()[0].setValue(this.getParent().getToolbar()._searchFlexBox.getItems()[0].getValue())};r.prototype.onBeforeRendering=function(){if(this._oSearchSidePanel){this._oSearchSidePanel.destroy()}this.initSearchSidePanel()};r.prototype.onAfterRendering=function(){if(this._oSearchSidePanel.getItems()[3].getContent()[0].getItems().length===0&&this._oSearchSidePanel.getItems()[1].getContent()[0].getValue()===""){this.setEmptyListInfo(this.emptyListAndField)}else if(this._oSearchSidePanel.getItems()[3].getContent()[0].getItems().length===0&&this._oSearchSidePanel.getItems()[1].getContent()[0].getValue()!==""){this.setEmptyListInfo(!this.emptyListAndField)}this.setContainerHeight();var e=document.getElementById("listItem"+s._selectedIndex);var t=this.getParent().getUIArea().getContent()[0].getDomRef().getBoundingClientRect().bottom;if(e){if(e.getBoundingClientRect().bottom>t){var n=e.offsetTop;document.getElementById(this.getId()+"-searchListContainer").scrollTop=n}}s.toggleNavigationState(this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1],true);var a=this.getParent().getToolbar().getAllToolbarItems();a.forEach(function(e){if(e.getId().includes("findAndSelectSearchButton")&&e.getDomRef()){Array.from(e.getDomRef().children).forEach(function(e){if(e.id.includes("findAndSelectSearchButton-inner")){setTimeout(function(){e.classList.add("sapMBtnEmphasized")})}})}});setTimeout(function(){if(e){e.children[0].focus()}else{var t=this._oSearchSidePanel.getItems()[1].getContent()[0];var s=t.getValue().length;var n=t.getDomRef().getElementsByTagName("input")[0];t.focus();n.setSelectionRange(s,s)}}.bind(this),0);this.addEventListener()};r.prototype.setEmptyListInfo=function(e){if(e){this.list.addItem(new n({text:this._oRb.getText("GNT_EMPTY_LIST_FIELD_INFO")}))}else{this.list.addItem(new n({text:this._oRb.getText("GNT_EMPTY_LIST_INFO")}))}this.list.getItems()[0].setEnabled(false);this.list.rerender();var t=this.list.getItems()[0].getDomRef().querySelector(".sapTntNavLIText");t.style.textAlign="center"};r.prototype.setContainerHeight=function(){var e=this._oSearchSidePanel.getItems()[2].getDomRef().getBoundingClientRect().bottom;var t=this.getParent().getUIArea().getContent()[0].getDomRef().getBoundingClientRect().bottom;var s=this.getParent().getEnableStatusBar()?64:32;var n=t-(e+s);this._oSearchSidePanel.getItems()[3].setHeight(n+"px");this._oSearchSidePanel.getItems()[3].rerender()};r.prototype._updateContent=function(){if(this.list){this.list.destroyItems()}this.list=this.getParent().getSearchSidePanelList();if(!this.list){var e=s._ganttSearchResults.map(function(e,t){var s=new n({text:("Gantt "+(e.ganttID+1)+", "+e.sMatchedValue).substring(0,200),id:"listItem"+t});return s});this.list=new a({items:[e]})}this.aSidePanelSearchResults=s._ganttSearchResults;s._searchResultsCount=this.aSidePanelSearchResults.length;this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[0].setText(this._oRb.getText("GNT_RESULT")+"("+s._searchResultsCount+")");this._oSearchSidePanel.getItems()[3].destroyContent();this._oSearchSidePanel.getItems()[3].addContent(this.list);this._oSearchSidePanel.getItems()[2].rerender();this._oSearchSidePanel.getItems()[3].rerender();this.addEventListener()};r.prototype.addEventListener=function(){var e=this._oSearchSidePanel.getItems()[3].getContent()[0]._itemNavigation.oDomRef;var t=null;e.addEventListener("keydown",function(e){if(e.target.tagName==="DIV"){t=e.target.parentElement.id}else if(e.target.tagName==="A"){t=e.target.parentElement.parentElement.id}if(e.code==="ArrowDown"){if(s._selectedIndex===s._searchResultsCount-1){s._selectedIndex=parseInt(t.replace(/\D/g,""),10)}else{s._selectedIndex=parseInt(t.replace(/\D/g,""),10)+1}}else if(e.code==="ArrowUp"){if(s._selectedIndex===0){s._selectedIndex=parseInt(t.replace(/\D/g,""),10)}else{s._selectedIndex=parseInt(t.replace(/\D/g,""),10)-1}}s.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),s.previousGanttID);this._oSearchSidePanel.getItems()[3].getContent()[0].setSelectedItem("listItem"+s._selectedIndex);var n=s._ganttSearchResults[s._selectedIndex];if(s.previousGanttID!==n.ganttID){s.previousGanttID=n.ganttID}var a=this.getParent().getGanttCharts()[s.previousGanttID];s.scrollToShape(n,a);s.toggleNavigationState(this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1],true)}.bind(this));e.addEventListener("click",function(){s._selectedIndex=parseInt(document.activeElement.id.replace(/\D/g,""),10);this._oSearchSidePanel.getItems()[3].getContent()[0].setSelectedItem("listItem"+s._selectedIndex);this._oSearchSidePanel.getItems()[3].getContent()[0].getSelectedItem().getDomRef().children[0].focus();var e=s._ganttSearchResults[s._selectedIndex];s.updateShapeSelectionANDHighlight(this.getParent().getGanttCharts(),s.previousGanttID);if(s.previousGanttID!==e.ganttID){s.previousGanttID=e.ganttID}var t=this.getParent().getGanttCharts()[s.previousGanttID];s.scrollToShape(e,t);s.toggleNavigationState(this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[0],this._oSearchSidePanel.getItems()[2].getContent()[0].getItems()[1].getItems()[1],true)}.bind(this))};r.prototype.exit=function(){this._oSearchSidePanel.destroy()};return r});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttSearchSidePanelRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){e.openStart("div",n);e.style("height","auto");e.openEnd();e.renderControl(n._oSearchSidePanel);e.close("div")};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttSyncedControl", ["sap/gantt/library","sap/ui/core/Control","sap/ui/Device","sap/ui/core/Core","./GanttUtils"],function(t,e,n,o,a){"use strict";var r=e.extend("sap.gantt.simple.GanttSyncedControl",{metadata:{library:"sap.gantt",properties:{innerWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"}}},renderer:{apiVersion:2,render:function(t,e){var n=e.getParent().getParent();t.openStart("div",e);t.class("sapGanttBackground");t.openEnd();t.openStart("div",n.getId()+"-ganttBGFlexContainer");t.class("sapGanttBackgroundFlexContainer");t.openEnd();t.openStart("div",n.getId()+"-ganttBGContainerWithScrollBar");t.class("sapGanttBackgroundContainer").class("sapGanttBackgroundScrollbar");t.openEnd();t.openStart("div",n.getId()+"-ganttSyncedControlTable");t.class("sapGanttBackgroundTable");t.openEnd();e.renderGanttHeaderPlaceholder(t,n);e.renderGanttBodyPlaceholder(t,n);e.renderHorizontalScrollbarContainer(t,n);t.close("div");t.close("div");e.renderVerticalScrollbarContainer(t,e,n);t.close("div");t.close("div")}}});r.prototype.init=function(){this.oSyncInterface=null;this.state={rows:[],innerVerticalScrollPosition:0,horizontalScrollPosition:0,layout:{top:0,headerHeight:0,contentHeight:0}};this._bRowsHeightChanged=false;this._bAllowContentScroll=true};r.prototype.onAfterRendering=function(){var t=this.getDomRefs();var e=this.getParent().getParent();if(this.oSyncInterface){var n=o.createRenderManager();this.oSyncInterface.renderHorizontalScrollbar(n,e.getId()+"-hsb",e.getContentWidth());n.flush(t.hsbContainer)}if(this.oSyncInterface&&t.content&&t.vsbContainerContent){this.oSyncInterface.registerVerticalScrolling({wheelAreas:[t.content],touchAreas:[t.content]});this.oSyncInterface.placeVerticalScrollbarAt(t.vsbContainerContent)}this.updateScrollPositions()};r.prototype.renderGanttHeaderPlaceholder=function(t,e){var n=o.getLibraryResourceBundle("sap.gantt");t.openStart("div",e.getId()+"-ganttHeader");t.style("height",this.state.layout.top+this.state.layout.headerHeight+"px");t.attr("data-sap-ui-related",e.getId());if(!e.getShowGanttHeader()){e.getTable().destroyExtension();e.getTable().setColumnHeaderVisible(false)}else{e.getTable().setColumnHeaderVisible(true)}t.class("sapGanttChartWithTableHeader");t.attr("aria-label",n.getText("ARIA_GANTT_HEADER"));t.openEnd();t.close("div")};r.prototype.renderGanttBodyPlaceholder=function(t,e){t.openStart("div",e.getId()+"-sapGanttBackgroundTableContent");t.class("sapGanttBackgroundTableContent");t.style("height",this.state.layout.contentHeight+"px");t.openEnd();t.openStart("div",e.getId()+"-gantt");t.attr("data-sap-ui-related",e.getId());t.class("sapGanttChartContentBody");t.class("sapGanttBackgroundSVG");t.openEnd();this.renderGanttChartCnt(t,e);t.close("div");t.close("div")};r.prototype.renderVerticalScrollbarContainer=function(t,e,n){t.openStart("div",n.getId()+"-sapGanttVerticalScrollBarContainer");t.class("sapGanttBackgroundVScrollContainer");t.openEnd();t.openStart("div");t.class("sapGanttBackgroundVScrollContentArea");t.style("margin-top",e.state.layout.top+e.state.layout.headerHeight+"px");t.openEnd().close("div");t.close("div")};r.prototype.syncWith=function(e){var n=e.getParent()._oExpandModel;var o=0;e._enableSynchronization().then(function(r){this.oSyncInterface=r;r.rowCount=function(t){var e=this.state.rows.length;var n;if(e<t){for(n=0;n<t-e;n++){this.state.rows.push({height:0,selected:false,hovered:false})}}else if(e>t){for(n=e-1;n>=t;n--){this.state.rows.pop()}}}.bind(this);r.rowSelection=function(t,e){if(this.state.rows[t]){this.state.rows[t].selected=e;a.updateGanttRows(this,this.state.rows,t)}}.bind(this);r.rowHover=function(t,e){if(this.state.rows[t]){this.state.rows[t].hovered=e;a.updateGanttRows(this,this.state.rows,t)}}.bind(this);r.rowHeights=function(o){var a=this.getParent().getParent();var r=a.getTable().getRows();for(var i=0;i<=o.length-1;i++){if(a.oRowsCustomHeight){var s=r[i].getAggregation("_settings").getRowId();if(a.oRowsCustomHeight.hasOwnProperty(s)&&a.oRowsCustomHeight[s]>o[i]){o[i]=a.oRowsCustomHeight[s]}}o[i]=n.getRowHeightByIndex(e,i,o[i])}this.setRowsHeightChanged(false);o.forEach(function(t,e){if(!this.state.rows[e]){this.state.rows[e]={}}if(this.state.rows[e].height!==t){this.setRowsHeightChanged(true)}this.state.rows[e].height=t}.bind(this));if((this.getRowsHeightChanged()||a._bExpandToggled)&&a.getDisplayType()!==t.simple.GanttChartWithTableDisplayType.Table){a.getInnerGantt().invalidate()}return o}.bind(this);r.innerVerticalScrollPosition=function(t){this.state.innerVerticalScrollPosition=t;this.updateScrollPositions()}.bind(this);r.layout=function(t){this.state.layout=t;this.updateLayout();var e=this.getParent().getParent();var n=this.getDomRefs();var a=false;if(e._getResizeExtension){a=e._getResizeExtension().isResizing()}var r=n.header.style.height.split("px")[0];if(e){if(parseInt(r,10)!==o&&!a){o=parseInt(r,10);e.getAggregation("_header").renderElement();if(e._getScrollExtension&&e._getScrollExtension.mOffsetWidth){e._getScrollExtension().scrollGanttChartToVisibleHorizon()}}if(e.getChartOverflowToolbar()){e.getChartOverflowToolbar().setWidth(n.header.clientWidth+"px")}}}.bind(this);this.invalidate()}.bind(this))};r.prototype.renderHorizontalScrollbarContainer=function(t,e){t.openStart("div",e.getId()+"-horizontalScrollContainer");t.class("sapGanttHSBContainer");if(e.getAxisTimeStrategy().isA("sap.gantt.axistime.FullScreenStrategy")){t.class("sapGanttHSbHidden")}t.openEnd();t.close("div")};r.prototype.renderSvgDefs=function(t,e){var n=e.getSvgDefs();if(n){t.openStart("svg",e.getId()+"-svg-psdef");t.attr("aria-hidden","true");t.style("float","left");t.style("width","0px");t.style("height","0px");t.openEnd();t.unsafeHtml(n.getDefString());t.close("svg")}};r.prototype.renderGanttChartCnt=function(t,e){t.openStart("div",e.getId()+"-cnt");t.class("sapGanttChartCnt");t.style("height","100%");t.style("width","100%");t.openEnd();t.close("div")};r.prototype.setInnerWidth=function(t){this.setProperty("innerWidth",t,true);this._toggleHSBVisibility(t);return this};r.prototype._toggleHSBVisibility=function(t){var e=this.getDomRefs();if(e.hsb==null||e.hsbContent==null){return}var n=parseFloat(t)+2>jQuery(e.contentContainer).width();if(n){e.hsbContent.style.height=null;e.hsbContent.style.width=t}else{e.hsbContent.style.cssText=null}};r.prototype.addEventListeners=function(){this.addScrollEventListeners()};r.prototype.addScrollEventListeners=function(){var t=this;this.oHSb.addEventListener("scroll",function(e){t.state.horizontalScrollPosition=e.target.scrollLeft})};r.prototype.updateLayout=function(){var t=this.getDomRefs();if(t){t.header.style.height=this.state.layout.top+this.state.layout.headerHeight+"px";t.contentContainer.style.height=this.state.layout.contentHeight+"px";t.vsbContainerContent.style.marginTop=this.state.layout.top+this.state.layout.headerHeight+"px"}};r.prototype.updateScrollPositions=function(){var t=this.getDomRefs();if(t&&this._bAllowContentScroll||t.content.scrollTop!==this.state.innerVerticalScrollPosition){t.content.scrollTop=this.state.innerVerticalScrollPosition;if(t.content.scrollTop!==this.state.innerVerticalScrollPosition){this._bAllowContentScroll=false}}};r.prototype.setAllowContentScroll=function(t){this._bAllowContentScroll=t};r.prototype.setRowsHeightChanged=function(t){this._bRowsHeightChanged=t};r.prototype.getRowsHeightChanged=function(t){return this._bRowsHeightChanged};r.prototype.scrollContentIfNecessary=function(){if(this._bAllowContentScroll===false){this._bAllowContentScroll=true;this.updateScrollPositions()}};r.prototype.getDomRefs=function(){var t=this.getDomRef();if(!t){return null}var e=t.querySelector(".sapGanttChartWithTableHeader"),n=t.querySelector(".sapGanttBackgroundTableContent"),o=n.querySelector(".sapGanttChartContentBody");var a=t.querySelector(".sapGanttBackgroundVScrollContainer"),r=a.querySelector(".sapGanttBackgroundVScrollContentArea");var i=t.querySelector(".sapGanttHSBContainer");var s=t.querySelector(".sapUiTableHSbExternal"),l=t.querySelector(".sapUiTableHSbContent");return{header:e,contentContainer:n,content:o,vsbContainer:a,vsbContainerContent:r,hsbContainer:i,hsb:s,hsbContent:l}};r.prototype.getRowStates=function(){return this.state.rows};r.prototype.getRowHeights=function(){return this.state.rows.map(function(t){return t.height})};r.prototype.syncRowSelection=function(t){if(t>-1){var e=!this.state.rows[t].selected;this.oSyncInterface.syncRowSelection(t,e)}};r.prototype.syncRowHover=function(t,e){if(t>-1){this.oSyncInterface.syncRowHover(t,e)}};return r});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttUtils", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Core","sap/ui/core/CalendarType","sap/gantt/misc/Utility","sap/ui/core/format/DateFormat","sap/ui/core/Locale","sap/m/OverflowToolbar","sap/ui/core/theming/Parameters","sap/ui/Device","./CoordinateUtils","sap/gantt/misc/Format","sap/gantt/library"],function(jQuery,e,t,r,a,n,i,s,o,l,g,c,u){"use strict";var f={};var p={};var h=false;var d=false;var m={SHAPE_ID_DATASET_KEY:"data-sap-gantt-shape-id",ROW_ID_DATASET_KEY:"data-sap-gantt-row-id",CONNECTABLE_DATASET_KEY:"data-sap-gantt-connectable",SELECT_FOR_DATASET_KEY:"sap-gantt-select-for",SHAPE_CONNECT_FOR_DATASET_KEY:"sap-gantt-shape-connect-for",SHAPE_CONNECT_INDICATOR_WIDTH:10,oDateFormat:n.getDateInstance({pattern:"yyyyMMddHHmmss",calendarType:r.Gregorian}),shapeElementById:function(e,t){var r=window.document.getElementById(t),a=r.querySelector("g.sapGanttChartShapes");var n=a.querySelectorAll("["+m.SHAPE_ID_DATASET_KEY+"='"+e+"']");var i=n[0];if(i){return jQuery(i).control(0)}return null},getValueX:function(r){var a;var n=r.getMetadata().getProperty("x");if(n){a=r.getProperty(n.name);if(a!==null&&a!==undefined){return a}}var i=t.getConfiguration().getRTL(),s=i?r.getEndTime()||r.getTime():r.getTime();if(s){a=r.getXByTime(s)}if(!jQuery.isNumeric(a)){e.warning("couldn't convert timestamp to x with value: "+s)}return a},getRowInstance:function(e,t){var r=jQuery(e.target).closest("rect.sapGanttBackgroundSVGRow").data("sapUiIndex");if(r!=null){return t.getRows()[r]}},getRowInstancefromShape:function(e){var t=e.getParentRowSettings();if(t!=null){return t.getParentRow()}},_get2dContext:function(e,t,r){if(!f.context){f.context=document.createElement("canvas").getContext("2d")}if(f.fontSize!==e||f.fontFamily!==t||f.fontWeight!==r){f.context.font=r+" "+e+"px "+t;f.fontSize=e;f.fontFamily=t;f.fontWeight=r}return f.context},getShapeTextWidth:function(e,t,r,a){return this._get2dContext(t,r,a).measureText(e).width},getSelectedTableRowSettings:function(e,t){var r=e.getRows(),a=e.getFirstVisibleRow();if(r.length===0){return null}var n=r[0].getIndex();var i=t-a;if(n!==a){i+=Math.abs(n-a)}if(!r[i]){return null}return r[i].getAggregation("_settings")},updateGanttRows:function(e,t,r){var a=e.getParent().getParent();var n=jQuery(document.getElementById(a.getId()+"-svg")),i=n.find("rect.sapGanttBackgroundSVGRow");if(a.getEnableChartSelectionState()){i.eq(r).toggleClass("sapGanttBackgroundSVGRowSelected",!!t[r].selected)}if(a.getEnableChartHoverState()){i.eq(r).toggleClass("sapGanttBackgroundSVGRowHovered",!!t[r].hovered)}},getShapesWithUid:function(e,t){var r=function(t){var r=a.parseUid(t),n=r.shapeId;var i=["[id='",e,"']"," ["+m.SHAPE_ID_DATASET_KEY+"='",n,"']"].join("");return jQuery(i).control().filter(function(e){return e.getShapeUid()===t})[0]};return t.map(r)},getShapeByShapeId:function(e,t){var r=[];t.forEach(function(t){var a=["[id='",e,"']"," ["+m.SHAPE_ID_DATASET_KEY+"='",t,"']"].join("");var n=document.querySelector(a);if(n){var i=sap.ui.getCore().byId(n.id);r.push(i)}});return r},getShapesInRowsById:function(e,t){var r=document.getElementById(e);var a=[];t.forEach(function(e){if(r){var t=r.querySelector("[data-sap-gantt-row-id='"+e+"']");if(t){a=Array.from(t.children).filter(function(e){return e.id!==""}).reduce(function(e,t){return e.concat(sap.ui.getCore().byId(t.id))},a)}}});return a},getShapeIdFromShapeUid:function(e){return e.map(function(e){var t=a.parseUid(e);return t.shapeId})},getTimeFormaterBySmallInterval:function(e){var r=e.getAxisTimeStrategy(),a=r.getTimeLineOption().smallInterval,s=a.unit;var o=r.getCalendarType(),l=r.getLocale()?r.getLocale():new i(t.getConfiguration().getLanguage().toLowerCase());var g="yyyyMMMddhhms";if(!(s===sap.gantt.config.TimeUnit.minute||s===sap.gantt.config.TimeUnit.hour)){g="yyyyMMMdd"}return n.getDateTimeInstance({format:g,style:a.style,calendarType:o},a.locale?new i(a.locale):l)},getFormatedDateByTimeZone:function(e){var t=this.oDateFormat.format(e);return c.abapTimestampToDate(t)},resetStrokeDasharray:function(e){if(!e){return}var t=e.getSimpleAdhocLines().find(function(e){return e._getSelected()});if(t){t._setSelected(false);var r=document.getElementById(t._getHeaderLine().sId);var a=document.getElementById(t._getLine().sId);var n=document.getElementById(t._getMarker().getId());n.style.cursor="pointer";if(a&&r){a.style.strokeDasharray=t.getStrokeDasharray();r.style.strokeDasharray=t.getStrokeDasharray();a.style.strokeWidth=t._getStrokeWidth();r.style.strokeWidth=t._getStrokeWidth()}}var i=e.getDeltaLines().find(function(e){return e._getIsSelected()});if(i){var s=i._getChartDeltaArea();if(s){var l=document.getElementById(s.sId);if(i._getEnableChartDeltaAreaHighlight()===true){l.style.opacity=0}}var g=document.getElementById(i._getForwardMarker().sId);var c=document.getElementById(i._getBackwardMarker().sId);var u=document.getElementById(i._getHeaderDeltaArea().sId);var f=o.get("sapUiChartDataPointBorderColor");if(i.getVisibleDeltaStartEndLines()){var p=document.getElementById(i._getStartLine().sId);var h=document.getElementById(i._getEndLine().sId);var d=document.getElementById(i._getHeaderStartLine().sId);var m=document.getElementById(i._getHeaderEndLine().sId);p.style.strokeDasharray=i.getStrokeDasharray();h.style.strokeDasharray=i.getStrokeDasharray();d.style.strokeDasharray=i.getStrokeDasharray();m.style.strokeDasharray=i.getStrokeDasharray();p.style.strokeWidth=i._getStrokeWidth();h.style.strokeWidth=i._getStrokeWidth();d.style.strokeWidth=i._getStrokeWidth();m.style.strokeWidth=i._getStrokeWidth()}g.style.fillOpacity=0;c.style.fillOpacity=0;u.style.opacity=1;u.style.cursor="pointer";g.style.stroke=null;c.style.stroke=null;if(i._getVisibleMarker()===true){g.style.fillOpacity=1;c.style.fillOpacity=1;g.style.stroke=f;c.style.stroke=f}var S=e._getResizeExtension();S.clearAllDeltaOutline();i._setIsSelected(false)}},adhocLinesPresentAndEnabled:function(e){return e.getSimpleAdhocLines().filter(function(e){return e.MarkerType!=sap.gantt.simple.MarkerType.None}).length>0&&e.getEnableAdhocLine()},addToolbarToTable:function(e,t,r){if(r){if(t.getExtension().length==0){var a=new s;a.addContent(e.oExportTableToExcelButton);t.addExtension(a)}else{t.getExtension()[0].addContent(e.oExportTableToExcelButton)}}},findSpaceInLevel:function(e,t,r,a){for(var n=0;n<p[e].length;n++){if(d){return}if(p[e].length>1){if(n===0&&(t[a]()<=p[e][n][r]()||t[a]()>p[e][n][r]()&&t[a]()-p[e][n][r]()<=1e3)&&!(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime())){p[e].push(t);h=true}else if(p[e][n+1]!==undefined&&(t[r]()>=p[e][n][a]()&&t[a]()<=p[e][n+1][r]()||t[r]()<p[e][n][a]()&&p[e][n][a]()-t[r]()<=1e3&&(t[a]()>p[e][n+1][r]()&&t[a]()-p[e][n+1][r]()<=1e3||t[a]()<=p[e][n+1][r]())||t[a]()>p[e][n+1][r]()&&t[a]()-p[e][n+1][r]()<=1e3&&(t[r]()>=p[e][n][a]()||t[r]()<p[e][n][a]()&&p[e][n][a]()-t[r]()<=1e3))&&!(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime()||t[r]().getTime()===p[e][n+1][r]().getTime()&&t[a]().getTime()===p[e][n+1][a]().getTime())){p[e].push(t);h=true}else if(n===p[e].length-1&&(t[r]()>=p[e][n][a]()||t[r]()<p[e][n][a]()&&p[e][n][a]()-t[r]()<=1e3)&&!(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime())){p[e].push(t);h=true}else if(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime()){if(parseInt(e,10)===Object.keys(p).length-1){p[parseInt(e,10)+1]=[t];h=true}else{h=false}}else{if(n===p[e].length-1&&parseInt(e,10)===Object.keys(p).length-1){p[parseInt(e,10)+1]=[t];h=true}else{h=false}}}else{if((t[r]()>=p[e][n][a]()||t[r]()<p[e][n][a]()&&p[e][n][a]()-t[r]()<=1e3||(t[a]()<=p[e][n][r]()||t[a]()>p[e][n][r]()&&t[a]()-p[e][n][r]()<=1e3))&&!(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime())){p[e].push(t);h=true}else if(t[r]().getTime()===p[e][n][r]().getTime()&&t[a]().getTime()===p[e][n][a]().getTime()){if(parseInt(e,10)===Object.keys(p).length-1){p[parseInt(e,10)+1]=[t];h=true}else{h=false}}else{if(parseInt(e,10)===Object.keys(p).length-1){p[parseInt(e,10)+1]=[t];h=true}else{h=false}}}if(h){n=p[e].length;d=true;p=this.sortShapesByTime(p,e,r)}}},sortShapesByTime:function(e,t,r){var a=e[t].length;var n;do{n=false;for(var i=0;i<a;i++){if(e[t][i+1]!==undefined){if(e[t][i][r]()>e[t][i+1][r]()){var s=e[t][i];e[t][i]=e[t][i+1];e[t][i+1]=s;n=true}}}}while(n);return e},_partitionShapesIntoOverlappingRanges:function(e,t,r){p={};var a="get"+t.charAt(0).toUpperCase()+t.slice(1);var n="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.length>0){p[0]=[e[0]]}for(var i=1,s=e.length;i<s;i++){d=false;for(var o in p){this.findSpaceInLevel(o,e[i],a,n)}}return p},calculateLevelForShapes:function(e,t,r){var a=function(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?a(t):t)},[])};var n=this._partitionShapesIntoOverlappingRanges(e,t,r);var i=0;var s=Object.values(n).map(function(e,t){e.map(function(e){var r=t+1;if(e._setLevel){e._setLevel(r)}e._level=r;if(i<r){i=r}return e});return e});var o=a(s);var l={shapes:o,maxLevel:i};return l},_partitionLinesIntoOverlappingRanges:function(e){e.sort(function(e,t){if(e.getTimeStamp()<t.getTimeStamp()){return-1}if(e.getTimeStamp()>t.getTimeStamp()){return 1}return 0});var t=function(e){if(e.length==0){return false}e.sort(function(e,t){var r;if(e instanceof sap.gantt.simple.AdhocLine){r=e.getTimeStamp()}else{r=e.getEndTimeStamp()}var a;if(t instanceof sap.gantt.simple.AdhocLine){a=t.getTimeStamp()}else{a=t.getEndTimeStamp()}if(r<a){return 1}if(r>a){return-1}return 0});if(e[0]instanceof sap.gantt.simple.AdhocLine){return e[0].getTimeStamp()}else{return e[0].getEndTimeStamp()}};var r=[];var a=0;if(e.length>0){r[a]=[e[0]]}for(var n=1,i=e.length;n<i;n++){if(e[n].getTimeStamp()>=e[n-1].getTimeStamp()&&e[n].getTimeStamp()<t(r[a])){r[a].push(e[n])}else{a++;r[a]=[e[n]]}}return r},calculateLevelForMarkers:function(e,t){var r=function(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?r(t):t)},[])};var a=e.concat(t);var n=this._partitionLinesIntoOverlappingRanges(a);var i=0;var s=n.map(function(e){e.map(function(e,t){var r=t+1;e._setLevel(r);if(i<r){i=r}return e});return e});var o=r(s);var l={adhocLines:o.filter(function(e){if(sap.gantt.simple.AdhocLine){return e instanceof sap.gantt.simple.AdhocLine}}),deltaLines:o.filter(function(e){if(sap.gantt.simple.DeltaLine){return e instanceof sap.gantt.simple.DeltaLine}}),maxLevel:i};return l},getShapeSuccessors:function(e,t){var r=[];if(e.getEnableChainSelection()){var a=this._getVisibleRelationships(t);var n=a.filter(function(t){return t.getPredecessor()===e.getShapeId()});n.forEach(function(e){var a=e.getRelatedInRowShapes(t.getId());if(a.successor){r.push(a.successor)}});r=Array.from(new Set(r))}return r},getShapePredeccessors:function(e,t){var r=[];if(e.getEnableChainSelection()){var a=this._getVisibleRelationships(t);var n=a.filter(function(t){return t.getSuccessor()===e.getShapeId()});n.forEach(function(e){var a=e.getRelatedInRowShapes(t.getId());if(a.predecessor){r.push(a.predecessor)}});r=Array.from(new Set(r))}return r},selectAssociatedShapes:function(e,t){var r=e.shape;var a=t._getDragDropExtension();var n=!r.getSelected();if(a.shapeSelectedOnMouseDown&&!a.initiallySelected&&!t.getEnableSelectAndDrag()){n=a.shapeSelectedOnMouseDown}var i=[r];if(r.getEnableChainSelection()){i=this._getShapesToSelect(r,t);i.forEach(function(e){this.oSelection.updateShape(e.getShapeUid(),{selected:n,ctrl:true,draggable:e.getDraggable(),time:e.getTime(),endTime:e.getEndTime()})}.bind(t))}return i},_getShapesToSelect:function(e,t){var r=[e];var a=this._getVisibleRelationships(t);var n=a.filter(function(t){return t.getPredecessor()===e.getShapeId()||t.getSuccessor()===e.getShapeId()});n.forEach(function(e){var a=e.getRelatedInRowShapes(t.getId());if(a.predecessor&&a.predecessor.getSelectableInChainSelection()){r.push(a.predecessor)}if(a.successor&&a.successor.getSelectableInChainSelection()){r.push(a.successor)}});r=Array.from(new Set(r));return r},_getVisibleRelationships:function(e){var t=[];e.getTable().getRows().forEach(function(e){var r=e.getAggregation("_settings").getRelationships();t=t.concat(r)});t=Array.from(new Set(t));return t},rerenderAssociatedRelationships:function(e,r){var a=t.createRenderManager();var n=[];var i=this._getVisibleRelationships(e);i.forEach(function(e){if(e.getSuccessor()===r.getShapeId()||e.getPredecessor()===r.getShapeId()){n.push(e)}});n.forEach(function(t){t.renderElement(a,t,e.getId())})},getFilteredShapeType:function(e){e=Array.from(new Set(e));return e.filter(function(e){return e!=="None"})},getPathCorners:function(e,t){var r=e.replace(/([A-Z])/g," $1");var a=[],n;var i=r.split(/[,\s]/).reduce(function(e,t){var r=t.match("([a-zA-Z])(.+)");if(r){e.push(r[1]);e.push(r[2])}else{e.push(t)}return e},[]);var s=i.reduce(function(e,t){if(parseFloat(t)==t&&e.length){e[e.length-1].push(t)}else{e.push([t])}return e},[]);function o(e,t,r){var a=t.x-e.x;var n=t.y-e.y;var i=Math.sqrt(a*a+n*n);return l(e,t,Math.min(1,r/i))}function l(e,t,r){return{x:e.x+(t.x-e.x)*r,y:e.y+(t.y-e.y)*r}}function g(e,t){if(e.length>2){e[e.length-2]=t.x;e[e.length-1]=t.y}}function c(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}if(s.length>1){var u=c(s[0]),f=null;if(s[s.length-1][0]=="Z"&&s[0].length>2){f=["L",u.x,u.y];s[s.length-1]=f}a.push(s[0]);for(var p=1;p<s.length;p++){var h=a[a.length-1],d=s[p],m=d==f?s[1]:s[p+1],S=t;if(m&&h&&h.length>2&&d[0]=="L"&&m.length>2&&m[0]=="L"){var v=c(h),y=c(d),T=c(m),E,I,A=Math.abs(v.x-y.x)+Math.abs(v.y-y.y),_=Math.abs(T.x-y.x)+Math.abs(T.y-y.y),x=Math.max(Math.min(S,A,_/2),1);E=o(y,v,x);I=o(y,T,x);g(d,E);d.origPoint=y;a.push(d);var D=l(E,y,.5),L=l(y,I,.5),b=["C",D.x,D.y,L.x,L.y,I.x,I.y];b.origPoint=y;a.push(b)}else{a.push(d)}}if(f){var k=c(a[a.length-1]);a.push(["Z"]);g(a[0],k)}}else{a=s}n=a.reduce(function(e,t){return e+t.join(" ")+" "},"");return n},arrayMove:function(e,t,r){if(r>=e.length){var a=r-e.length+1;while(a--){e.push(undefined)}}e.splice(r,0,e.splice(t,1)[0]);return e},getEdgePoint:function(e){var t=2;var r=["Arrow","None"];var a=this._getVisibleRelationships(e);a.forEach(function(a){if(a.getPredecessor()!==undefined&&a.getSuccessor()!==undefined&&(a.getShapeTypeStart()!=="None"||r.indexOf(a.getShapeTypeEnd())==-1)||e.getRelationshipShapeSize()==sap.gantt.simple.relationshipShapeSize.Large){t=3}});return t},getTimeLabel:function(e,t,r,n){var i=g.getEventSVGPoint(n,e),s=c.dateToAbapTimestamp(t.viewToTime(i.x)),o=c._convertUTCToLocalTime(s,r),l=t.getZoomStrategy();var u=l.getLowerRowFormatter().format(o);return a.getLowerCaseLabel(u)},getVisibleElements:function(e,t,r){return Array.from(e.querySelectorAll(t)).reduce(function(e,t){return e.concat(Array.from(t.querySelectorAll(r)))},[])},isDynamicText:function(){var e=u.simple.horizontalTextAlignment;var r=false;var a=Array.from(document.querySelectorAll(".sapGanttChartSvg .sapGanttChartShapes .baseShapeSelection")).filter(function(e){if(!e.classList.contains("sapGanttTextNoPointerEvents")&&e.tagName!="text"){return e}});a.forEach(function(a){var n=a.closest("[data-sap-ui]").getAttribute("data-sap-ui");var i=t.byId(n);if(i&&!r){if(i instanceof sap.gantt.simple.BaseConditionalShape){var s=i._getActiveShapeElement();if(s instanceof sap.gantt.simple.BaseGroup){s.getShapes().forEach(function(t){if(t.getHorizontalTextAlignment()===e.Dynamic){r=true}})}else{if(i.getHorizontalTextAlignment()===e.Dynamic){r=true}}}else if(i instanceof sap.gantt.simple.MultiActivityGroup){if(i.getTask().getHorizontalTextAlignment()===e.Dynamic){r=true}}else if(i instanceof sap.gantt.simple.BaseGroup){i.getShapes().forEach(function(t){if(t.getHorizontalTextAlignment()===e.Dynamic){r=true}})}else{if(i.getHorizontalTextAlignment()===e.Dynamic){r=true}}}});if(!r){var n=Array.from(document.querySelectorAll(".sapGanttChartSvg .sapGanttChartCalendar .baseShapeSelection")).filter(function(e){if(!e.classList.contains("sapGanttTextNoPointerEvents")&&e.tagName!="text"){return e}});n.forEach(function(a){if(!r){var n=a.closest("[data-sap-ui]").getAttribute("data-sap-ui");var i=t.byId(n);if(i.getHorizontalTextAlignment()===e.Dynamic){r=true}}})}return r},setLmarker:function(e,r,a){var n=r.mAnchors.predecessor.x,i=r.mAnchors.predecessor.y;var s=r.mAnchors.successor.x,o=r.mAnchors.successor.y;r.setProperty("_lMarker","",true);var l=r.getProcessedType();var g=e._edgePoint;if(l===1&&n<=s){if(t.getConfiguration().getRTL()?r.getLShapeForTypeSF():r.getLShapeForTypeFS()){if(g==2&&r.getShapeTypeStart()=="None"||g==3&&Math.abs(n-s)>=g*6){if(i>o){r.setProperty("_lMarker","rightUp",true)}else{r.setProperty("_lMarker","rightDown",true)}}}}else if(l===2&&n>=s){if(t.getConfiguration().getRTL()?r.getLShapeForTypeFS():r.getLShapeForTypeSF()){if(g==2&&r.getShapeTypeStart()=="None"||g==3&&Math.abs(n-s)>=g*6){if(i>o){r.setProperty("_lMarker","leftUp",true)}else{r.setProperty("_lMarker","leftDown",true)}}}}if(a){e.relSet[r.getShapeId()]=r}else{e.relSetFake[r.getShapeId()]=r}},relationexist:function(e,t){t.mRelatedShapes=t.getRelatedInRowShapes(e.getId());var r=t.getProcessedType();t.mAnchors=t.getRlsAnchors(r,t.mRelatedShapes);if(!t.getVisible()){return false}if(!t.mRelatedShapes.predecessor&&!t.mRelatedShapes.successor){return false}var a=function(e){return!isNaN(parseFloat(e.x))&&isFinite(e.x)&&!isNaN(parseFloat(e.y))&&isFinite(e.y)};if(!a(t.mAnchors.predecessor)||!a(t.mAnchors.successor)){return false}return true}};return m},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/GanttZoomExtension", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/events/KeyCodes","sap/gantt/config/TimeHorizon","./GanttExtension","./CoordinateUtils","./AggregationUtils"],function(jQuery,e,t,o,i,n,r){"use strict";var a=["mousedown","mousemove","mouseup","wheel","MozMousePixelScroll"];var s=a.reduce(function(e,t){e[t]=t;return e},{});s.keydown="keydown";s.periodZoom="periodZoom";var m=".sapGanttZoom";var g=function(e){return e+m};a=a.map(g);var h=s.periodZoom+m;var l=s.keydown+m;var d={start:"zoomStart",zooming:"zooming",end:"zoomEnd"};var u={dispatch:function(e,t){var o=this._getZoomExtension(),i=e.originalEvent||e;if(o.isMouseWheelZoom(e)){var n=t&&t.suppressSyncEvent;o.performMouseWheelZooming(i,n);return}if(t&&t.which){i.which=t.which}o.performTimePeriodZooming(i)},addEventListeners:function(e){var o=e._getZoomExtension(),i=o.getDomRefs(),n=i.ganttSvg,r=i.gantt,m=i.headerSvg;var g=function(t,o){jQuery(o).bind(t,u.dispatch.bind(e))};u.removeEventListeners(e);a.forEach(function(e){g(e,n);if(e.startsWith(s.wheel)){g(e,m)}});jQuery(r).on(h,u.dispatch.bind(e));jQuery(document).on(l,function(e){if(e.which===t.Z||e.which===t.ESCAPE){jQuery(this).find(".sapGanttChartContentBody").trigger(h,{which:e.which})}});if(n){var d=document.querySelectorAll(".sc-tooltips");if(!e.fnStockChartMouseMoveListener){e.fnStockChartMouseMoveListener=this.fnStockChartMouseMoveHandler.bind(this)}for(var v=0;v<d.length;v++){d[v].removeEventListener("mousemove",e.fnStockChartMouseMoveListener);d[v].addEventListener("mousemove",e.fnStockChartMouseMoveListener)}}},fnStockChartMouseMoveHandler:function(e){function t(e,t){var o=document.elementFromPoint(e,t);var i="";while(o&&o.tagName=="rect"){if(o.children&&o.children.length&&o.children[0].tagName=="title"){if(o.classList.contains("stockChartTooltip")){o.style.pointerEvents="none";o=document.elementFromPoint(e,t)}else{i=o.children[0].innerHTML+"\n"+i;o.style.pointerEvents="none";o=document.elementFromPoint(e,t)}}else{o=undefined}}return i}var o=e.currentTarget;var i=o.querySelectorAll(".sc-tooltips rect");i.forEach(function(e){e.style.pointerEvents="all"});var n=t(e.clientX,e.clientY);for(var r=0;r<o.children.length;r++){var a=o.children[r];if(a.classList.contains("stockChartTooltip")){a.getElementsByTagName("title")[0].innerHTML=n;a.style.pointerEvents="all";a.setAttribute("width",o.getBoundingClientRect().width)}}},removeEventListeners:function(e){var t=e._getZoomExtension(),o=t.getDomRefs(),i=o.ganttSvg,n=o.gantt,r=o.headerSvg;jQuery(i).unbind(m);jQuery(r).unbind(m);jQuery(n).unbind(m);jQuery(document).off(m)}};var v=i.extend("sap.gantt.GanttZoomExtension",{_init:function(e,t){this.bTimePeriodZoomMode=false;this.oZoomStartTime=null;this.iMouseWheelZoomDelayedCallId=undefined;this.iLastMouseWheelZoomTimeInMs=0;return"ZoomExtension"},_attachEvents:function(){var e=this.getGantt();u.removeEventListeners(e);u.addEventListeners(e)},_detachEvents:function(){var e=this.getGantt();u.removeEventListeners(e)}});v.prototype.isMouseWheelZoom=function(e){var t=e.shiftKey&&e.ctrlKey&&(e.type===s.wheel||e.type===s.MozMousePixelScroll);if(t){e.preventDefault();e.stopImmediatePropagation();e.stopPropagation()}return t};i.prototype.performMouseWheelZooming=function(e,t){var o=this._getWheelScrollDelta(e),i=this._getMousePositionX(e);this.decideMouseWheelZoom(e,o,i,t)};v.prototype._getWheelScrollDelta=function(e){var t=e.deltaY||e.deltaX;if(t===0||t===undefined){t=e.detail}var o=e.deltaMode===1?33:1;return t*o};v.prototype._getMousePositionX=function(e){return n.xPosOfSvgElement(e,jQuery(this.getDomRefs().ganttSvg))};v.prototype.decideMouseWheelZoom=function(e,t,o,i){var n=this.getGantt(),r=n.getAxisTimeStrategy();if(r.getMouseWheelZoomType()===sap.gantt.MouseWheelZoomType.None){return}var a=t<0,s=!a;var m=r.getZoomLevel(),g=r.getZoomLevels()-1;if(s&&m>0||a&&m<g){var h=!this.iMouseWheelZoomDelayedCallId&&Date.now()-this.iLastMouseWheelZoomTimeInMs>100?0:700;if(h===0){this.onMouseWheelZooming(e,r,o,t,i)}else{this.iMouseWheelZoomDelayedCallId=this.iMouseWheelZoomDelayedCallId||window.setTimeout(this.onMouseWheelZooming.bind(this),h,e,r,o,t,i)}}};v.prototype.onMouseWheelZooming=function(e,t,o,i,n){this.iLastMouseWheelZoomTimeInMs=Date.now();var r=t.getAxisTime().viewToTime(o);t.updateVisibleHorizonOnMouseWheelZoom(r,i,e,n);window.clearTimeout(this.iMouseWheelZoomDelayedCallId);delete this.iMouseWheelZoomDelayedCallId};v.prototype.performTimePeriodZooming=function(e){var o=this.getGantt()._getPointerExtension();var i=o.isPointerInGanttChart();var n=this.getGantt().getAxisTimeStrategy();if(!n.isTimePeriodZoomEnabled()){return}if(i===false){return}if(e.type===s.periodZoom){if(e.which===t.Z&&o.isPointerInGanttChart()){this.bTimePeriodZoomMode=!this.bTimePeriodZoomMode}if(e.which===t.ESCAPE){this.bTimePeriodZoomMode=false}this.updateCursorStyle(this.bTimePeriodZoomMode)}if(e.type===s.mousedown&&e.button===0){if(this.bTimePeriodZoomMode){this.handleZoomStart(e);this._fireTimePeriodZoomEvent({type:d.start,zoomStartTime:this.oZoomStartTime,zoomEndTime:null,originalEvent:e})}}if(e.type===s.mousemove&&this.bTimePeriodZoomMode){var r=this.timeFromEvent(e);this.handleZooming(e);this._fireTimePeriodZoomEvent({type:d.zooming,zoomStartTime:this.oZoomStartTime,zoomEndTime:r,originalEvent:e})}if(e.type===s.mouseup&&this.bTimePeriodZoomMode){this.bTimePeriodZoomMode=false;var r=this.timeFromEvent(e);this.handleZoomEnd(e);this._fireTimePeriodZoomEvent({type:d.end,zoomStartTime:this.oZoomStartTime,zoomEndTime:r,originalEvent:e})}};v.prototype.timeFromEvent=function(e){var t=jQuery(this.getDomRefs().ganttSvg),o=n.xPosOfSvgElement(e,t);var i=this.getGantt()._getPointerExtension();o+=i._getAutoScrollStep();return this.getGantt().getAxisTime().viewToTime(o)};v.prototype._fireTimePeriodZoomEvent=function(e){this.getGantt().fireEvent("_timePeriodZoomOperation",e)};v.prototype.syncTimePeriodZoomOperation=function(t,o,i){var n=t.getParameter("originalEvent");var r=t.getParameter("type");switch(r){case d.start:this.handleZoomStart(n);break;case d.zooming:this.handleZooming(n);break;case d.end:this.handleZoomEnd(n,true);break;default:e.debug("unknown time period zoom type")}};v.prototype.handleZoomStart=function(e){this.oZoomStartTime=this.timeFromEvent(e);var t=this.getGantt().getAxisTime().timeToView(this.oZoomStartTime);this.updateCursorStyle(this.bTimePeriodZoomMode);this.createZoomingRectangle(t)};v.prototype.handleZooming=function(e){this._isZooming=true;var t=this.oZoomStartTime;var o=this.timeFromEvent(e);var i=this.getGantt().getAxisTime(),n=i.timeToView(t),r=i.timeToView(o);this.updateCursorStyle(this.bTimePeriodZoomMode);if(r>n){this.updateZoomingRectangle(n,r)}else{this.updateZoomingRectangle(r,n)}};v.prototype.isZoomingRectangleNotExisted=function(){var e=d3.select(this.getDomRefs().ganttSvg);return e.selectAll(".sapGanttChartTimePeriodZoomRectangle").size()===0};v.prototype.isTimeZooming=function(){return this._isZooming};v.prototype._handleAutoScroll=function(e){if(this.isTimeZooming()){if(this.isZoomingRectangleNotExisted()){var t=this.oZoomStartTime;var o=this.getGantt().getAxisTime(),i=o.timeToView(t);this.createZoomingRectangle(i)}this.handleZooming(e)}};v.prototype.handleZoomEnd=function(e,t){this._isZooming=false;var i=this.timeFromEvent(e);this.updateCursorStyle(this.bTimePeriodZoomMode);this.destroyZoomingRectangle();var n=this.getGantt().getAxisTime(),r=n.timeToView(this.oZoomStartTime),a=n.timeToView(i);var s=5;if(Math.abs(a-r)>s){var m=this.oZoomStartTime,g=i;if(i.getTime()<m.getTime()){var h=m;m=i;g=h}var l=new o({startTime:m,endTime:g});this.getGantt().syncVisibleHorizon(l,undefined,undefined,t?undefined:"timePeriodZooming")}};v.prototype.updateCursorStyle=function(e){var t=e?"crosshair":"auto";this.getDomRefs().ganttSvg.style.cursor=t;this.getDomRefs().headerSvg.style.cursor=t};v.prototype.createZoomingRectangle=function(e){var t=d3.select(this.getDomRefs().ganttSvg);this.destroyZoomingRectangle();t.append("rect").classed("sapGanttChartTimePeriodZoomRectangle",true).attr("x",e).attr("y",0).attr("height",jQuery(t.node()).height())};v.prototype.updateZoomingRectangle=function(e,t){var o=d3.select(this.getDomRefs().ganttSvg);o.selectAll(".sapGanttChartTimePeriodZoomRectangle").attr("x",e).attr("width",t-e)};v.prototype.destroyZoomingRectangle=function(){var e=d3.select(this.getDomRefs().ganttSvg);e.selectAll(".sapGanttChartTimePeriodZoomRectangle").remove()};v.prototype.doBirdEye=function(e){var t=this.getGantt();var i=this.calculateBirdEyeRange(e);var n=new o(i);t.getAxisTimeStrategy()._setVisibleHorizon(n)};v.prototype.calculateBirdEyeRange=function(e,t){var o=this.getGantt();var i=o.getTable();var n=i.getRows();var r;var a;var s;e=e?e-n[0].getIndex():e;var m=n[e]?true:false;if(e!=null&&e>=0&&m){r=this._getBirdEyeRangeOnRow(e);a=r.startTime;s=r.endTime}else if(e!=null&&e>=0&&!m){return null}else{for(var g=0;g<n.length;g++){r=this._getBirdEyeRangeOnRow(g,t);if(r.startTime&&r.endTime){var h=this._calculateBirdEyeTimeRange(a,s,r.startTime,r.endTime);a=h.startTime;s=h.endTime}}}var l={startTime:a,endTime:s};return l};v.prototype._getBirdEyeRangeOnRow=function(e,t){var o=this.getGantt();var i=o.getTable();var n=i.getBindingInfo("rows"),r=n&&n.model;var a=i.getRows();var s=a[e];var m=s.getBindingContext(r);var g;var h;if(m){var l=s.getAggregation("_settings");var d=[];d=this._getShapeInRow(l,d);var u=this;d.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){e=e._getActiveShapeElement();if(e instanceof sap.gantt.simple.BaseGroup){e.getShapes().forEach(function(e){if(e.getCountInBirdEye&&e.getCountInBirdEye()){var t=e.getTime();var o=e.getEndTime();var i=u._calculateBirdEyeTimeRange(g,h,t,o);g=i.startTime;h=i.endTime}});return}}if(e&&e.getCountInBirdEye&&e.getCountInBirdEye()){var t=e.getTime();var o=e.getEndTime();var i=u._calculateBirdEyeTimeRange(g,h,t,o);g=i.startTime;h=i.endTime}})}if(g&&h){var v=o.getVisibleWidth();var c=(h.getTime()-g.getTime())/v;var f=o.getAxisTime();g=t?new Date(g.getTime()-c*5):f.viewToTime(f.timeToView(g)-5);h=t?new Date(h.getTime()+c*5):f.viewToTime(f.timeToView(h)+5)}var p={startTime:g,endTime:h};return p};v.prototype._getShapeInRow=function(e,t){var o=r.getNonLazyAggregations(e);var i=this;Object.keys(o).forEach(function(o){var n=e.getAggregation(o);if(n){n=jQuery.isArray(n)?n:[n];if(n.length>0){t=t.concat(n);n.forEach(function(e){t=i._getShapeInRow(e,t)})}}}.bind(e));return t};v.prototype._calculateBirdEyeTimeRange=function(e,t,o,i){if(!e||o.getTime()<e.getTime()){e=o}if(!t||t.getTime()<i.getTime()){t=i}return{startTime:e,endTime:t}};return v});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/HighlightModel", ["sap/ui/base/EventProvider"],function(i){"use strict";var h=i.extend("sap.gantt.simple.HighlightModel",{constructor:function(){i.apply(this,arguments);this.sHighlightMode="Single";this.mHighlighted={uid:{},shapeId:{},deEmphasizedShapeId:{}}}});h.prototype.getHighlightMode=function(){return this.sHighlightMode};h.prototype.updateShape=function(i,h){var e=Object.keys(this.mHighlighted.uid);if(!i){this.clear(false);return}if(h.highlighted&&!this.mHighlighted.uid[i]){this.mHighlighted.uid={};this._updateHighlightedShape(i,h);this._fireHighlightChanged(e)}else if(!h.highlighted&&this.mHighlighted.uid[i]){delete this.mHighlighted.uid[i];this._fireHighlightChanged([i])}};h.prototype.updateProperties=function(i,h,e){if(this.mHighlighted.uid[i]){this.mHighlighted.uid[i].time=h.time;this.mHighlighted.uid[i].endTime=h.endTime}else if(e){this._updateHighlightedShape(i,h)}};h.prototype._updateHighlightedShape=function(i,h){this.mHighlighted.uid[i]={shapeUid:i,time:h.time,endTime:h.endTime}};h.prototype.clear=function(i){if(this.mHighlighted.uid.length===0){return false}var h=this.allUid();this.mHighlighted.uid={};this._fireHighlightChanged(h,i);return true};h.prototype.clearAllHighlightedShapeIds=function(){this.mHighlighted.deEmphasizedShapeId=this.mHighlighted.shapeId;this.mHighlighted.shapeId={};var i=this.allUid();this._fireHighlightChanged(i,true,true,true)};h.prototype.updateHighlightedShapes=function(i,h){if(!i||i.length===0){this.mHighlighted.shapeId={}}if(h){this.mHighlighted.uid={};this.mHighlighted.shapeId={}}i.forEach(function(i){if(i.Highlighted){this.mHighlighted.deEmphasizedShapeId={};if(i.ShapeId&&!this.mHighlighted.shapeId[i.ShapeId]){this.mHighlighted.shapeId[i.ShapeId]={highlighted:i.Highlighted}}}else{if(i.ShapeId&&this.mHighlighted.shapeId[i.ShapeId]){delete this.mHighlighted.shapeId[i.ShapeId];this.mHighlighted.deEmphasizedShapeId[i.ShapeId]={highlighted:i.Highlighted}}else if(i.ShapeId&&!this.mHighlighted.shapeId[i.ShapeId]){this.mHighlighted.deEmphasizedShapeId[i.ShapeId]={highlighted:i.Highlighted}}}}.bind(this));this._fireHighlightChanged([],true,true,false)};h.prototype.getHighlightedShapeID=function(){return Object.keys(this.mHighlighted.shapeId)};h.prototype.getDeEmphasizedShapeID=function(){return Object.keys(this.mHighlighted.deEmphasizedShapeId)};h.prototype._fireHighlightChanged=function(i,h,e,t){var d={shapeUid:Object.keys(this.mHighlighted.uid),deEmphasizedUid:i,silent:!!h,deEmphasizeAll:t};if(d.shapeUid.length>0||d.deEmphasizedUid.length>0||e){this.fireHighlightChanged(d)}};h.prototype.clearHighlightByUid=function(i){if(this.existed(i)){delete this.mHighlighted.uid[i]}};h.prototype.existed=function(i){return!!this.mHighlighted.uid[i]};h.prototype.allUid=function(){return Object.keys(this.mHighlighted.uid)};h.prototype.attachHighlightChanged=function(i,h,e){this.attachEvent("highlightChanged",i,h,e)};h.prototype.detachHighlightChanged=function(i,h){this.detachEvent("highlightChanged",i,h)};h.prototype.fireHighlightChanged=function(i){this.fireEvent("highlightChanged",i);return this};return h},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/InnerGanttChart", ["sap/ui/core/Core","sap/ui/core/Control","sap/ui/table/library","sap/ui/table/utils/TableUtils","sap/gantt/simple/GanttExtension","sap/gantt/simple/InnerGanttChartRenderer"],function(e,t,n,a,r){"use strict";var i=t.extend("sap.gantt.simple.InnerGanttChart",{metadata:{library:"sap.gantt",events:{ganttReady:{parameters:{hasRenderedShapes:{type:"boolean"},totalRenderedShapes:{type:"int"},supressEvent:{type:"boolean"}}},_afterGanttRendered:{}}}});i.prototype.getDomRef=function(e){var t=this.getParent(),n;if(e){n="-"+e}else{n="-cnt"}if(t){return window.document.getElementById(t.getId()+n)}return null};i.prototype.invalidate=function(){var e=this.getParent();e._oInnerGanttRenderPromise.then(function(){e._bInnerGanttRenderPromiseResolved=true;var t=this.getUIArea();if(t){t.addInvalidatedControl(this)}}.bind(this))};i.prototype.hasRenderedShapes=function(){return this.$("svg").find(".sapGanttChartShapes").children().length>0};i.prototype.getTotalRenderedShapes=function(){return this.$("svg").find(".sapGanttChartShapes").children().length};i.prototype.resolveWhenReady=function(e){return new Promise(function(t){var r=function i(o){var s=this.getParent();if(s._enableOptimisation){s.getTable().setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Fixed)}if(e&&!o.getParameter("hasRenderedShapes")||s.getTable().getVisibleRowCountMode()===n.VisibleRowCountMode.Auto&&s.getSyncedControl().getRowStates().length<s.getTable().getVisibleRowCount()+a.getHeaderRowCount(s.getTable())){this.attachEventOnce("ganttReady",r)}else{t()}}.bind(this);var i=Object.keys(this.getUIArea().mInvalidatedControls);if(i.indexOf(this.getParent().getId())>-1||i.indexOf(this.getParent().getTable().getId())>-1){this.attachEventOnce("ganttReady",r)}else if(!e&&this.getDomRef("svg")||e&&this.hasRenderedShapes()){t()}else{this.attachEventOnce("ganttReady",r)}}.bind(this))};i.prototype._updateRowsHoverState=function(){var e=this.getParent();setTimeout(function(){e.$("svg").find("rect.sapGanttBackgroundSVGRow:hover").each(function(){var t=e._getPointerExtension(),n=t._getRowIndexFromElement(this);e.getSyncedControl().syncRowHover(n,true)});e.$("svg").find("rect.sapGanttBackgroundSVGRow:not(:hover)").each(function(){var t=e._getPointerExtension(),n=t._getRowIndexFromElement(this);e.getSyncedControl().syncRowHover(n,false)})},0)};i.prototype.onBeforeRendering=function(e){if(!this.getParent()._bPreventInitialRender||this.getParent()._bRenderGanttClone||this.getParent()._bRenderFullScreenGantt){this.getParent()._bRenderFullScreenGantt=false;this.getParent()._getScrollExtension().jumpToVisibleHorizon("initialRender")}};i.prototype.onAfterRendering=function(t){var n=this.getParent();n._updateVsbContainers();n._syncContainerGanttCharts("initialRender",t);var a=e.createRenderManager();this.getRenderer().renderRelationships(a,n);a.destroy();this.fireEvent("_afterGanttRendered");n._updateShapeSelections(n.getSelectedShapeUid(),[]);n.updateShapeHighlights(n.getHighlightedShapeUid(),[]);n._getConnectExtension().updateShapeConnectEffect(n);this._updateRowsHoverState();r.attachEvents(n);this.fireGanttReady({hasRenderedShapes:this.hasRenderedShapes(),totalRenderedShapes:this.getTotalRenderedShapes()})};return i},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/InnerGanttChartRenderer", ["sap/ui/Device","sap/ui/core/Core","sap/gantt/simple/BaseLine","sap/gantt/simple/RenderUtils","sap/gantt/simple/GanttExtension","sap/gantt/simple/Relationship","sap/gantt/misc/Format","sap/gantt/misc/Utility","sap/gantt/library","sap/m/Toolbar","./GanttUtils","./AdhocLineRenderer","sap/gantt/simple/DeltaLineRenderer","sap/gantt/simple/AggregationUtils","./BaseText"],function(e,t,n,r,a,i,o,s,l,d,g,c,p,h,f){"use strict";var u={apiVersion:2};var v=l.AdhocLineLayer;var S=l.DeltaLineLayer;u.render=function(e,t){var n=t.getParent(),r=n.getParent()._bToolbarSettingsItemChanged;if(r){n.getParent()._bToolbarSettingsItemChanged=false;n._getScrollExtension().needRerenderGantt(function(){this.renderImmediately(n)}.bind(this),"initialRender",r)}else{var a=n.getTable().getRows(),i=false;if(a.length>0){var o=a[0].getIndex(),s,l=[];s=n.getPrimaryShapeScheme();n._aExpandedIndices.forEach(function(e){var t=e-o;if(t>=0&&a.length-1>=t){l.push(t)}});l.forEach(function(e){var t=o+e;var r=a[e].getAggregation("_settings").getRowUid();var l=n._oExpandModel.mExpanded[r];if(l){var d,g=l[l.length-1]&&l[l.length-1].scheme,c;d=n.getShapeSchemes().filter(function(e){return e.getKey()===g});if(d[0]!==undefined){n._oExpandModel.isTableRowHeightNeedChange(true,n.getTable(),[t],s,d[0]);c=n._oExpandModel.getMainRowScheme(r);if(n._oExpandModel.rowMaxLevelMap&&n._oExpandModel.rowMaxLevelMap["row"+t]!==undefined&&c!==undefined&&c.value.numberOfRows!==undefined&&c.value.numberOfRows!==n._oExpandModel.rowMaxLevelMap["row"+t]){c.value.numberOfRows=n._oExpandModel.rowMaxLevelMap["row"+t];i=true}}}})}if(i===true){i=false;n.getTable().invalidate()}else{this.renderGanttChart(e,n);var d=n._getScrollExtension();if(!d.mOffsetWidth){d.updateSvgOffsetWidth()}n._getScrollExtension().scrollGanttChartToVisibleHorizon();n.getSyncedControl().scrollContentIfNecessary()}}};u.renderGanttChart=function(e,n){var r=t.getLibraryResourceBundle("sap.gantt");e.openStart("div",n.getId()+"-cnt");e.class("sapGanttChartCnt");e.style("height","100%");e.style("width","100%");e.attr("aria-label",r.getText("ARIA_GANTT_CHART"));e.openEnd();this.rerenderAllShapes(e,n);var a=n.getLocale()||n.getAxisTime().getLocale();if(a){n.setLocale(a,true);n.getAxisTime().setLocale(a,true)}e.close("div")};u.renderImmediately=function(e){var n=t.createRenderManager();this.renderGanttChart(n,e);var r=window.document.getElementById(e.getId()+"-gantt");if(r){n.flush(r,true,false)}this.renderRelationships(n,e);e._updateShapeSelections(e.getSelectedShapeUid(),[]);e.updateShapeHighlights(e.getHighlightedShapeUid(),[]);a.attachEvents(e);if(e.getParent().isA("sap.gantt.simple.GanttChartContainer")&&e.getParent().getShowSearchSidePanel()){e.getParent().getSearchSidePanel().setContainerHeight()}n.destroy();e.getInnerGantt().fireGanttReady({supressEvent:true})};u.rerenderAllShapes=function(e,t){var n=t.getSyncedControl().getRowStates();if(n.length===0){return}t.getAggregation("_header").renderElement();if(t._getScrollExtension&&t._getScrollExtension.mOffsetWidth){t._getScrollExtension().scrollGanttChartToVisibleHorizon()}var a=t.getSimpleAdhocLines().filter(function(e){return e.MarkerType!=sap.gantt.simple.MarkerType.None});var i=t.getDeltaLines();if((a.length>0||i.length>0)&&t.getShowGanttHeader()){var o=t.getAggregation("table");g.addToolbarToTable(this,o,false)}var s=n.reduce(function(e,t){return e+t.height},0);e.openStart("svg",t.getId()+"-svg");e.class("sapGanttChartSvg");e.attr("height",s+"px");var l=r.getGanttRenderWidth(t);e.attr("width",l+"px");e.openEnd();if(t.getEnableDeltaLine()){this.renderChartAreaOfDeltaLines(e,t)}this.renderGanttBackgrounds(e,t,n);this.renderGanttRowBorders(e,t,n);this.renderCalendarShapes(e,t);this.renderExpandedRowBackground(e,t);this.renderVerticalLines(e,t,s);this.renderNowLineBody(e,t);var d=r.createOrderedListOfRenderFunctionsFromTemplate(this.createTemplateForOrderedListOfRenderFunctions(t));d.forEach(function(n){n.apply(u,[e,t])});e.close("svg");e.openStart("svg",t.getId()+"-svgDefs");e.attr("width",0);e.attr("height",0);e.style("position","absolute");e.class("sapGanttChartSvgDefs");e.openEnd();this.renderHelperDefs(e,t.getId(),t);this.renderCalendarPattern(e,t);e.close("svg");if(!t._bPreventInitialRender){t._bPreventInitialRender=true}};u.createTemplateForOrderedListOfRenderFunctions=function(e){var t=[{fnCallback:this.renderAllShapesInRows},{fnCallback:this.renderRlsContainer,bUnshift:e.getShapeOverRelationship()},{fnCallback:this.renderAssistedContainer}];if(e.getEnableAdhocLine()){t.push({fnCallback:this.renderAdhocLines,bUnshift:e.getAdhocLineLayer()===v.Bottom})}if(e.getEnableDeltaLine()){t.push({fnCallback:this.renderDeltaLines,bUnshift:e.getDeltaLineLayer()===S.Bottom})}return t};u.renderHelperDefs=function(e,t,n){e.openStart("defs").openEnd();var r=t+"-helperDef-linePattern";e.openStart("pattern",r);e.attr("width",2);e.attr("height",2);e.attr("x",0);e.attr("y",0);e.attr("patternUnits","userSpaceOnUse");e.openEnd();e.openStart("line");e.attr("x1",1);e.attr("x2",1);e.attr("y1",0);e.attr("y2",2);e.attr("stroke-width",1);e.attr("stroke","white");e.attr("shape-rendering","crispEdges");e.openEnd();e.close("line");e.close("pattern");e.close("defs");var a=n?n.getSvgDefs():null;if(a){e.unsafeHtml(a._getDefString(n._bClonedGantt))}};u.renderGanttRowBorders=function(e,t,n){e.openStart("g",t.getId()+"-ganttRowBorder");e.openEnd();this.renderRowBorders(e,t,n);e.close("g")};u.renderGanttBackgrounds=function(e,t,n){e.openStart("g",t.getId()+"-bg");e.openEnd();this.renderRowBackgrounds(e,t,n);e.close("g")};u.renderRowBackgrounds=function(e,t,n){var r=0;var a=t.getTable();var i=a.getVisibleRowCount();var o=a.getRows();e.openStart("g",t.getId()+"-rowBackgrounds");e.class("rowBackgrounds");e.openEnd();n.forEach(function(n,a){e.openStart("rect",t.getId()+"-bgRow-"+a);e.attr("y",r);e.attr("width","100%");e.attr("height",n.height);e.attr("data-sap-ui-index",a);var s=o[a];if(s){e.attr("data-sap-ui-related",s.getId())}e.class("sapGanttBackgroundSVGRow");if(n.selected&&t.getEnableChartSelectionState()){e.class("sapGanttBackgroundSVGRowSelected")}if(n.hovered&&t.getEnableChartHoverState()){e.class("sapGanttBackgroundSVGRowHovered")}e.openEnd().close("rect");if(a<i){r+=n.height}});e.close("g");if(t.getDisplayType()===l.simple.GanttChartWithTableDisplayType.Chart){document.getElementById(t.getId()+"-sapGanttBackgroundTableContent").style.height=r+"px";var s=document.getElementById(t.getId()+"-sapUiTableCnt");var d=document.getElementsByClassName("sapUiTableColHdrCnt");var g=s&&s.offsetTop;var c=d&&d[0].getBoundingClientRect().height;document.getElementById(t.getId()+"-ganttHeader").style.height=g+c+"px"}};u.renderRowBorders=function(e,t,n){e.openStart("g",t.getId()+"-rowBorders");e.class("rowBorders");e.openEnd();var r=0;n.forEach(function(n,a){var i=r+n.height-.5;e.openStart("line",t.getId()+"-bgRowBorder-"+a);e.attr("x1",0);e.attr("x2","100%");e.attr("y1",i);e.attr("y2",i);e.style("pointer-events","none");e.class("sapGanttBackgroundSVGRowBorder");e.openEnd().close("line");r+=n.height});e.close("g")};u.renderAdhocLines=function(e,t){var r=t.getSimpleAdhocLines();var a=t.getRenderedTimeRange(),i=a[0],s=a[1];r=r.filter(function(e){var t=o.abapTimestampToDate(e.getTimeStamp());return t>=i&&t<=s&&e.getProperty("visible")});var l=t.getAdhocLines();l=l.filter(function(e){var t=sap.gantt.misc.Format.abapTimestampToDate(e.getTimeStamp());return t>=i&&t<=s});if(l.length===0&&r.length===0){return}var d=t.getAxisTime();e.openStart("g");e.class("sapGanttChartAdhocLine");e.openEnd();r.forEach(function(n){c.renderLine(e,n,t)});l.map(function(e){var t=d.timeToView(o.abapTimestampToDate(e.getTimeStamp()));return new n({x1:t,y1:0,x2:t,y2:"100%",stroke:e.getStroke(),strokeWidth:e.getStrokeWidth(),strokeDasharray:e.getStrokeDasharray(),strokeOpacity:e.getStrokeOpacity(),tooltip:e.getDescription()}).setProperty("childElement",true)}).forEach(function(t){t.renderElement(e,t)});e.close("g")};u.renderDeltaLines=function(e,t){var n=t.getDeltaLines();n=n.filter(function(e){return e.getVisible()});if(n.length===0){return}e.openStart("g");e.class("sapGanttChartDeltaLine");e.openEnd();n.forEach(function(n){p.renderDeltaLines(e,n,t)});e.close("g")};u.renderChartAreaOfDeltaLines=function(e,t){var n=t.getDeltaLines();n=n.filter(function(e){return e.getVisible()});if(n.length===0){return}e.openStart("g");e.class("sapGanttChartAreaDeltaLine");e.openEnd();n.forEach(function(n){p.renderChartAreaOfDeltaLines(e,n,t)});e.close("g")};u.renderVerticalLines=function(e,t,n){if(t.getEnableVerticalLine()){var a=r.getGanttRenderWidth(t),i=t.getAxisTime();var o=i.getZoomStrategy();var s=i.getTickTimeIntervalLabel(o.getTimeLineOption(),null,[0,a]);var l=s[1];var d="";for(var g=0;g<l.length;g++){d+=" M"+" "+(l[g].value-1/2)+" 0"+" v "+n}if(d){e.openStart("path");e.class("sapGanttChartVerticalLine");e.attr("d",d);e.openEnd().close("path")}}};u.renderAssistedContainer=function(e,t){e.openStart("g");e.class("sapGanttChartSelection");e.openEnd().close("g");e.openStart("g");e.class("sapGanttChartHighlight");e.openEnd().close("g");e.openStart("g");e.class("sapGanttChartShapeConnect");e.openEnd().close("g");e.openStart("g");e.class("sapGanttChartLasso");e.openEnd().close("g")};u.renderNowLineBody=function(e,t){var r=t.getAxisTime().getNowLabel(t.getNowLineInUTC())[0].value;if(t.getEnableNowLine()===false||isNaN(r)){return}e.openStart("g");e.class("sapGanttNowLineBodySvgLine");e.openEnd();var a=new n({x1:r,y1:0,x2:r,y2:"100%",strokeWidth:1}).setProperty("childElement",true);a.renderElement(e,a);e.close("g")};u.renderRlsContainer=function(e,t){e.openStart("g");e.class("sapGanttChartRls");e.openEnd().close("g")};u.renderAllShapesInRows=function(e,t){if(!jQuery(document.getElementById(t.getId()+"-gantt"))){return}e.openStart("g",t.getId()+"-shapes");e.class("sapGanttChartShapes");e.openEnd();this._eachVisibleRowSettings(t,function(n){n.renderElement(e,t)});e.close("g")};u._eachVisibleRowSettings=function(e,t){var n=e.getTable().getRows();var r=e.getTable().getBindingInfo("rows"),a=r&&r.model;for(var i=0;i<n.length;i++){var o=n[i];var s=o.getBindingContext(a);if(s&&o.getIndex()!==-1){var l=o.getAggregation("_settings");if(t){t(l)}}}};u.renderRelationships=function(e,t){t.relSet={};t.relSetFake={};t._edgePoint=g.getEdgePoint(t);var n=window.document.getElementById(t.getId()+"-svg");var r=jQuery(n).children("g.sapGanttChartRls").get(0);if(n==null||r==null){return}var a=Object.create(null);this._eachVisibleRowSettings(t,this._renderVisibleRowRelationships.bind(this,e,t,a));this._renderNonVisibleRowRelationships(e,t,a);for(var i in t.relSet){if(t.relSet[i].mAnchors.predecessor||t.relSet[i].mAnchors.successor){t.relSet[i].renderElement(e,t.relSet[i],t.getId())}}for(var o in t.relSetFake){if(t.relSetFake[o].mAnchors.predecessor||t.relSetFake[o].mAnchors.successor){t.relSetFake[o].renderElement(e,t.relSetFake[o],t.getId());t.relSetFake[o].destroy()}}e.flush(r,true,false)};u._renderVisibleRowRelationships=function(e,t,n,r){r.getRelationships().forEach(function(e){var a=e.getShapeId();var i=r.getShapeUid(e);if(!n[a]){n[a]=true;e.setProperty("shapeUid",i,true);if(g.relationexist(t,e)){g.setLmarker(t,e,true)}}})};u._renderNonVisibleRowRelationships=function(e,t,n){var r=s.safeCall(t,["getTable","getRowSettingsTemplate","getBindingInfo"],null,["relationships"]);if(!r){return}var a=r.template.getBindingInfo("shapeId");if(!a){return}var i=a.parts[0].path,o=t.getTable().getModel(r.model);var l=function(e,a){if(!n[e]){n[e]=true;var i=r.factory();i.setModel(o,r.model);i.bindObject({path:a,model:r.model});if(g.relationexist(t,i)){g.setLmarker(t,i,false)}}};if(o.isA("sap.ui.model.json.JSONModel")){var d=o.mContexts;Object.keys(d).forEach(function(e){if(e.indexOf(r.path)>0){l(d[e].getProperty(i),e[0]==="/"?e:"/"+e)}})}else{var d=o.getProperty("/");Object.keys(d).forEach(function(e){if(e.startsWith(r.path)){l(d[e][i],e[0]==="/"?e:"/"+e)}})}};u.renderSvgDefs=function(e,t){var n=t.getSvgDefs();if(n){e.openStart("svg",t.getId()+"-svg-psdef");e.attr("aria-hidden","true");e.style("float","left");e.style("width","0px");e.style("height","0px");e.openEnd();e.unsafeHtml(n.getDefString());e.close("svg")}};u.renderCalendarPattern=function(e,t){if(t.getEnableNonWorkingTime()===false){return}var n=t.getCalendarDef(),a=t.getId(),i=t.iGanttRenderedWidth;var o=t.getSyncedControl().getRowStates();if(n){var s=h.getAllNonLazyAggregations(n);var l=Object.keys(s).filter(function(e){return e.indexOf("defs")===0}).map(function(e){return n.getAggregation(e)||[]}.bind(n));var d=function(e){return new f(e)};l.forEach(function(t,s){if(t.length>0){var l=n.getDefNode(t);if(l&&l.defNodes&&i>0){var g=a+"-calendardefs-"+s;e.openStart("defs",g);e.openEnd();for(var c=0;c<l.defNodes.length;c++){var p=l.defNodes[c];e.openStart("pattern",p.id);e.class("calendarPattern");e.attr("patternUnits","userSpaceOnUse");e.attr("x",0);e.attr("y",0);e.attr("width",i);e.attr("height",o[0].height);e.openEnd();for(var h=0;h<p.timeIntervals.length;h++){var f=p.timeIntervals[h];f.height=o[0].height;e.openStart("rect");e.attr("x",f.x);e.attr("y",f.y);e.attr("width",f.width);e.attr("height",o[0].height);e.attr("fill",f.fill);e.openEnd().close("rect");if(p.title!==null){r.renderCalenderTitle(e,p,f,d)}}e.close("pattern")}e.close("defs")}}})}};u.renderCalendarShapes=function(e,t){e.openStart("g");e.class("sapGanttChartCalendar");e.openEnd();var n=t.getSyncedControl().getRowStates();this._eachVisibleRowSettings(t,function(a){var i=r.calcRowDomPosition(a,n);var o=h.getAllNonLazyAggregations(a);var s=Object.keys(o).filter(function(e){return e.indexOf("calendars")===0}).map(function(e){return a.getAggregation(e)||[]}.bind(a));s.forEach(function(n){n.forEach(function(n){if(t.isShapeVisible(n)){n.setProperty("rowYCenter",i.rowYCenter,true);n._iBaseRowHeight=i.rowHeight;if(n.getVisible()){n.renderElement(e,n)}}})})});e.close("g")};u.renderExpandedRowBackground=function(e,t){var n=t.getExpandedBackgroundData();if(jQuery.isEmptyObject(n)){return}var r=t._oExpandModel.refreshRowYAxis(t.getTable());var a=Array.prototype.concat.apply([],n);var i=t.iGanttRenderedWidth;e.openStart("g");e.class("sapGanttChartRowBackground");e.openEnd();for(var o=0;o<a.length;o++){var s=a[o];var l;var d;if(t.getEnableExpandedRowBackground()===true){l="sapGanttExpandChartCntBG"}else{l="sapGanttExpandedRowBackground"}d=s.rowHeight;e.openStart("g");e.class("expandedRow");e.openEnd();var g;if(t.getShowParentRowOnExpand()&&!t.getUseParentShapeOnExpand()){g=s.y}else{g=s.y-r}e.openStart("rect");e.attr("x",s.x);e.attr("y",g);e.attr("height",d);e.attr("width","100%");e.class(l);e.openEnd();e.close("rect");e.openStart("path");if(t.getEnableExpandedRowBorders()===true){e.class("sapGanttExpandChartLine")}e.attr("d","M0 "+g+" H"+(i-1));e.openEnd().close("path");e.close("g")}e.close("g")};return u},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendColumnConfig", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.simple.LegendColumnConfig",{metadata:{library:"sap.gantt",properties:{fill:{type:"string"},text:{type:"string"},fillFactory:{type:"function"}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendContainer", ["sap/ui/core/Control","sap/ui/core/Core","sap/m/NavContainer","sap/m/Page","sap/m/List","sap/m/StandardListItem","../control/AssociateContainer"],function(e,t,i,n,a,s,o){"use strict";var r=e.extend("sap.gantt.simple.LegendContainer",{metadata:{library:"sap.gantt",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},enableFlatLegends:{type:"boolean",defaultValue:false}},defaultAggregation:"legends",aggregations:{legends:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"legend"}}}});r.prototype.init=function(){this.initNavContainer();this._sCurrentPageTitle=null;this.oRb=t.getLibraryResourceBundle("sap.gantt")};r.prototype.initNavContainer=function(){this._oNavContainer=null;this._sCurrentPageTitle=null;this._oNavContainer=new i({autoFocus:false,afterNavigate:function(e){this._sCurrentPageTitle=e.getParameter("to").getTitle()}.bind(this)})};r.prototype.onBeforeRendering=function(e){this.initNavContainer();this._updateNavContainerSize();this._addInitialPageIfNecessary();this._addLegendsToNavContainer()};r.prototype._updateNavContainerSize=function(){this._oNavContainer.setWidth(this.getWidth());this._oNavContainer.setHeight(this.getHeight())};r.prototype._shouldRenderFlatLegendList=function(){var e=true;this.getLegends().forEach(function(t){e=e&&t.isA("sap.gantt.simple.ListLegend")});return e&&this.getEnableFlatLegends()};r.prototype._isSingleVisibleList=function(){var e=0;this.getLegends().forEach(function(t){if(t.getVisible()){e++}});return e<=1};r.prototype._addLegendsToNavContainer=function(){if(!this._shouldRenderFlatLegendList()||this.getLegends().length===1||this._isSingleVisibleList()){this.getLegends().forEach(function(e,t,i){if(e.getVisible()){var a=new n({title:e.getTitle(),backgroundDesign:sap.m.PageBackgroundDesign.Solid,enableScrolling:true,showNavButton:i.length>1&&!this._isSingleVisibleList(),content:new o({content:e}),navButtonPress:function(e){this.getParent().backToTop()}});this._oNavContainer.addPage(a);if(this.getLegends().length===1){this._setInvisibleText(e.getTitle())}}}.bind(this))}else{var e=new n({title:this.oRb.getText("LEGEND_TITLE"),backgroundDesign:sap.m.PageBackgroundDesign.Solid,enableScrolling:true});var t=this.getLegends();t.forEach(function(t){e.addContent(new o({content:t}))});this._oNavContainer.addPage(e);this._setInvisibleText(e.getTitle())}};r.prototype._addInitialPageIfNecessary=function(){var e=this.getLegends();if(e.length>1&&!this._shouldRenderFlatLegendList()&&!this._isSingleVisibleList()){var t=e.map(function(e){return new s({title:e.getTitle(),type:sap.m.ListType.Navigation,press:this._onInitialPageItemPress.bind(this)})}.bind(this));var i=new n({title:this.oRb.getText("LEGEND_TITLE"),content:[new a({items:t})]});this._setInvisibleText(i.getTitle());this._oNavContainer.addPage(i);this._oNavContainer.setInitialPage(i)}};r.prototype._onInitialPageItemPress=function(e){var t=e.getSource().getTitle();this._navToByPageTitle(t);this._setInvisibleText(t)};r.prototype._navToByPageTitle=function(e){if(!e){return}this._oNavContainer.setAutoFocus(true);var t=this._oNavContainer.getPages();for(var i=1;i<t.length;i++){if(e==t[i].getTitle()){this._oNavContainer.to(t[i]);break}}};r.prototype._setInvisibleText=function(e){if(this.getParent()&&this.getParent()._oInvisibleLabelText){this.getParent()._oInvisibleLabelText.setText(e)}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendContainerRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){e.openStart("div",t);e.class("sapGanttChartLegend");e.style("width",t.getWidth());e.style("height",t.getHeight());e.openEnd();e.renderControl(t._oNavContainer);e.close("div")};return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendRowConfig", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.simple.LegendRowConfig",{metadata:{library:"sap.gantt",properties:{shapeClass:{type:"string"},shapeName:{type:"string"},stroke:{type:"string"},strokeWidth:{type:"float"},text:{type:"string"}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendShapeGroup", ["./BaseGroup","sap/gantt/simple/LegendShapeGroupOrientation"],function(e,t){"use strict";var a=e.extend("sap.gantt.simple.LegendShapeGroup",{metadata:{library:"sap.gantt",properties:{orientation:{type:"sap.gantt.simple.LegendShapeGroupOrientation",defaultValue:t.Vertical},title:{type:"string"}},aggregations:{shapes:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape"}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/LegendShapeGroupOrientation", [],function(){"use strict";var r={Vertical:"Vertical",Horizontal:"Horizontal",Overlap:"Overlap"};return r});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ListLegend", ["sap/ui/core/Control","sap/gantt/library","sap/ui/core/delegate/ItemNavigation"],function(t,e,i){"use strict";var a=t.extend("sap.gantt.simple.ListLegend",{metadata:{library:"sap.gantt",properties:{title:{type:"string",group:"Data",defaultValue:null}},defaultAggregation:"items",aggregations:{items:{type:"sap.gantt.simple.ListLegendItem",multiple:true,singularName:"item"}}}});a.prototype.forceInvalidation=a.prototype.invalidate;a.prototype.invalidate=function(t){if(t==this){}else if(!t){this.forceInvalidation()}else if(t instanceof sap.gantt.simple.ListLegendItem){}};a.prototype.onAfterRendering=function(){if(!this._oItemNavigation){this._oItemNavigation=new i(null,null);this.addEventDelegate(this._oItemNavigation)}this._oItemNavigation.setRootDomRef(this.getDomRef());var t=this.getItems();var e=[];for(var a=0;a<t.length;a++){if(t[a].getVisible()){e.push(t[a].getDomRef())}}this._oItemNavigation.setItemDomRefs(e);this._oItemNavigation.setFocusedIndex(0)};a.prototype.exit=function(){this._destroyItemNavigation()};a.prototype._destroyItemNavigation=function(){if(this._oItemNavigation){this.removeEventDelegate(this._oItemNavigation);this._oItemNavigation.destroy();this._oItemNavigation=null}};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ListLegendItem", ["sap/ui/core/Element","sap/m/CheckBox"],function(e,t){"use strict";var a=e.extend("sap.gantt.simple.ListLegendItem",{metadata:{library:"sap.gantt",properties:{legendName:{type:"string"},interactive:{type:"boolean",defaultValue:false},selected:{type:"boolean",defaultValue:true},visible:{type:"boolean",defaultValue:true}},defaultAggregation:"shape",aggregations:{shape:{type:"sap.gantt.simple.BaseShape",group:"Misc",multiple:false,defaultValue:null},legendShapeGroup:{type:"sap.gantt.simple.LegendShapeGroup",group:"Misc",multiple:false,defaultValue:null},_checkbox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{interactiveChange:{parameters:{legendName:{type:"string"},value:{type:"boolean"}}}}}});a.prototype.init=function(){var e=new t({selected:this.getSelected()}).attachSelect(this._onInteractiveChange,this);this.setAggregation("_checkbox",e);this._getInteractiveCheckBox().setVisible(this.getInteractive())};a.prototype.setInteractive=function(e){this.setProperty("interactive",e,true);this._getInteractiveCheckBox().setVisible(e);return this};a.prototype.setSelected=function(e){this.setProperty("selected",e,true);this.getAggregation("_checkbox").setSelected(e);return this};a.prototype._getInteractiveCheckBox=function(){return this.getAggregation("_checkbox")};a.prototype._onInteractiveChange=function(e){this.fireInteractiveChange({legendName:this.getLegendName(),value:e.getParameter("selected")});this.setSelected(e.getParameter("selected"))};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ListLegendRenderer", ["sap/gantt/misc/Utility","./RenderUtils","sap/gantt/simple/LegendShapeGroupOrientation","sap/ui/core/IconPool"],function(e,t,a,i){"use strict";var r={apiVersion:2};var s=function(){var t=32;var a=e.findSapUiSizeClass();return e.scaleBySapUiSize(a,t)};r.render=function(e,t){e.openStart("div",t);e.attr("role","listbox");e.attr("tabindex",-1);e.openEnd();if(t.getParent().isA("sap.gantt.simple.LegendContainer")&&t.getParent().getEnableFlatLegends()&&!t.getParent()._isSingleVisibleList()){this.renderSubHeader(e,t)}var a=t.getItems();var i=a.some(function(e){return e.getInteractive()});for(var r=0;r<a.length;r++){if(a[r].getVisible()){this.renderLegendItem(e,a[r],i,r)}}e.close("div")};r.renderSubHeader=function(e,t){e.openStart("div",t.getId());e.class("sapGanttLLItemSectionTitle");e.class("sapUiSmallMarginBegin");e.class("sapUiSmallMarginTop");e.openEnd();e.text(t.getTitle());e.close("div");e.write("<hr>")};r.renderLegendItem=function(e,t,a,i){var r=t.getAggregation("legendShapeGroup");var s=t.getAggregation("shape");if(r){this.renderShapeGroup(e,t,a,i)}else if(s){this.renderShape(e,t,a,i)}};r.renderShape=function(e,t,a,i){var r=t.getShape();var n=s(),g=n+"px";var o=n/2,p=o;var l=r.getYBias();if(r.isA("sap.gantt.simple.BaseConditionalShape")&&r._getActiveShapeElement()){var h=r._getActiveShapeElement();var d=h.getYBias()?h.getYBias():l;this.normalizeShape(h,p,o,d)}else{this.normalizeShape(r,p,o,l)}e.openStart("div",t);e.attr("title",r.getTitle());e.attr("tabindex",-1);e.attr("role","option");e.attr("aria-posinset",i+1);e.class("sapGanttLLItem");e.style("height",g);e.style("line-height",g);var f="margin-"+(sap.ui.getCore().getConfiguration().getRTL()?"right":"left");if(a&&!t.getInteractive()){e.style(f,g)}else if(!t.getInteractive()){e.style(f,p/2+"px")}e.openEnd();e.renderControl(t.getAggregation("_checkbox"));this.renderSvgPart(e,[r],p);this.renderLegendText(e,r.getTitle());e.close("div")};r.renderShapeGroup=function(e,t,a,i){var r=t.getAggregation("legendShapeGroup");var n=r.getAggregation("shapes");var g=r.getOrientation();var o=r.getYBias();var p=r.getTitle();var l=s(),h=l+"px";var d=l/2,f=d;e.openStart("div",t);e.attr("tabindex",-1);e.attr("role","option");e.attr("aria-posinset",i+1);e.attr("title",p);e.class("sapGanttLLItem");e.style("height",h).style("line-height",h);var c="margin-"+(sap.ui.getCore().getConfiguration().getRTL()?"right":"left");if(a&&!t.getInteractive()){e.style(c,h)}else if(!t.getInteractive()){e.style(c,f/2+"px")}e.openEnd();e.renderControl(t.getAggregation("_checkbox"));n.forEach(function(e,t){var a=e.getYBias()?e.getYBias():o;this.normalizeShapeGroup(n,e,g,f,d,t,a)}.bind(this));this.renderSvgPart(e,n,f);this.renderLegendText(e,p,true,h);e.close("div")};r.normalizeShapeGroup=function(e,t,i,r,s,n,g){if(t.isA("sap.gantt.simple.BaseConditionalShape")&&t._getActiveShapeElement()){var o=t._getActiveShapeElement();if(o.isA("sap.gantt.simple.LegendShapeGroup")){this.normalizeLegendShapeGroup(o,r,s,g)}else{this.normalizeShape(o,r,s,g)}return}if(t.isA("sap.gantt.simple.LegendShapeGroup")){this.normalizeLegendShapeGroup(t,r,s,g);return}var p=s/2;var l=t.getStrokeWidth()||0;var h=0;var d=0;var f=0;var c=0;var v=g?g:p;if(i===a.Vertical){if(n>0){if(e[n-1].isA("sap.gantt.simple.BaseLine")){h=parseFloat(e[n-1].getStrokeWidth())+Math.max(parseFloat(e[n-1].getY1()),parseFloat(e[n-1].getY2()))}else if(e[n-1].isA("sap.gantt.simple.BaseCursor")){h=e[n-1].getLength()+(e[n-1].getRowYCenter()-r/4)}else if(e[n-1].isA("sap.gantt.simple.BaseImage")){h=parseFloat(e[n-1].getY())}else if(e[n-1].isA("sap.gantt.simple.BasePath")){h=0}else{h=parseFloat(e[n-1].getHeight())+parseFloat(e[n-1].getY())}}}else if(i===a.Horizontal){if(n>0){if(e[n-1].isA("sap.gantt.simple.BaseLine")){d=parseFloat(e[n-1].getStrokeWidth())+Math.max(parseFloat(e[n-1].getX1()),parseFloat(e[n-1].getX2()))}else if(e[n-1].isA("sap.gantt.simple.BaseDiamond")){d=parseFloat(e[n-1].getWidth())+parseFloat(e[n-1].getX());d-=e[n-1].getWidth()/2}else if(e[n-1].isA("sap.gantt.simple.BaseCursor")){d=parseFloat(e[n-1].getWidth())+parseFloat(e[n-1].getX());d-=e[n-1].getLength()}else if(e[n-1].isA("sap.gantt.simple.BasePath")){d=0}else{d=parseFloat(e[n-1].getWidth())+parseFloat(e[n-1].getX())}}if(t.isA("sap.gantt.simple.BaseCursor")){d+=t.getLength()/2}}if(t.isA("sap.gantt.simple.BaseLine")){d=t.getX1();f=t.getX2();h=t.getY1();c=t.getY2()}var u={x:d,y:h,x1:d,y1:h,x2:f,y2:c,yBias:v,rowYCenter:parseFloat(h)};if(t.getWidth){if(!t.getWidth()){u.width=r-2*l}else{u.width=t.getWidth()}}if(t.getHeight){if(!t.getHeight()){u.height=s-2*l}else{u.height=t.getHeight()}}if(t.isA("sap.gantt.simple.BaseCursor")){if(i===a.Horizontal){u.rowYCenter=parseFloat((t.getWidth()+t.getPointHeight())/2)}else if(i===a.Vertical){u.x=r/2;u.rowYCenter=h+r/4}}else if(t.isA("sap.gantt.simple.BaseDiamond")){u.x+=u.width/2;if(i===a.Vertical){u.rowYCenter=h+r/4}else if(i===a.Horizontal){u.rowYCenter=parseFloat(u.height/2)}}else if(t.isA("sap.gantt.simple.BaseChevron")){u.rowYCenter=h+parseFloat(u.height/2)}else if(t.isA("sap.gantt.simple.BaseImage")){if(i===a.Vertical){u.y=h+parseFloat(u.height)}else if(i===a.Horizontal){u.y=h+parseFloat(u.height/2)}}Object.keys(u).forEach(function(e){var a=e.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)},"set");if(t[a]){t[a](u[e])}})};r.normalizeLegendShapeGroup=function(e,t,a,i){var r=e.getAggregation("shapes");var s=e.getOrientation();r.forEach(function(e,n){var g=e.getYBias()?e.getYBias():i;this.normalizeShapeGroup(r,e,s,t,a,n,g)}.bind(this))};r.normalizeShape=function(e,t,a,i){var r=a/2;var s=i?i:r;var n=e.getStrokeWidth()||0;var g={x:n,y:n,x1:n,y1:r+n,x2:t,y2:r,yBias:s,rowYCenter:r};if(e.getWidth){if(!e.getWidth()){g.width=t-2*n}else{g.width=e.getWidth()}}if(e.getHeight){if(!e.getHeight()){g.height=a-2*n}else{g.height=e.getHeight()}}if(e.isA("sap.gantt.simple.BaseCursor")||e.isA("sap.gantt.simple.BaseDiamond")){g.x+=t/2}if(e.isA("sap.gantt.simple.BaseTriangle")){g.rowYCenter=0}if(e.isA("sap.gantt.simple.shapes.Shape")){e.setWidth(t);e.setHeight(a);e.setStartX(0);e.setRowYCenter(a)}else{Object.keys(g).forEach(function(t){var a=t.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)},"set");if(e[a]){e[a](g[t])}})}};r.renderSvgPart=function(e,t,a){e.openStart("svg");e.class("sapGanttLLSvg");e.style("width",a+"px");e.openEnd();t.forEach(function(t){this.renderShapeGroupRecursively(e,t)}.bind(this));e.close("svg")};r.renderShapeGroupRecursively=function(e,t){if(t.isA("sap.gantt.simple.LegendShapeGroup")){this.renderLegendShapeGroup(t,e)}else if(t.isA("sap.gantt.simple.BaseConditionalShape")&&t._getActiveShapeElement()){var a=t._getActiveShapeElement();if(a.isA("sap.gantt.simple.LegendShapeGroup")){this.renderLegendShapeGroup(a,e)}}e.openStart("g").openEnd();if(t.isA("sap.gantt.simple.BaseImage")){this.renderImage(e,t)}else{t.renderElement(e,t)}e.close("g")};r.renderLegendShapeGroup=function(e,t){var a=e.getAggregation("shapes");a.forEach(function(e){this.renderShapeGroupRecursively(t,e)}.bind(this));return};r.renderLegendText=function(e,t,a,i){e.openStart("div");e.class("sapGanttLLItemTxt");if(a){e.style("line-height",i)}e.openEnd();if(t){e.text(t)}e.close("div")};r.renderImage=function(e,a){if(i.isIconURI(a.getSrc())){var r=["x","y","text-anchor","style","filter","transform"];e.openStart("text",a);t.renderAttributes(e,a,r);e.openEnd();var s=i.getIconInfo(a.getSrc());if(s){e.text(s.content)}e.close("text")}else{var n=["x","y","width","height"];e.openStart("image",a);t.renderAttributes(e,a,n);e.attr("href",a.getProperty("src"));e.openEnd();t.renderTooltip(e,a);e.close("image")}};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/MarkerType", [],function(){"use strict";var n={None:"None",Diamond:"Diamond"};return n});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/MultiActivityGroup", ["sap/gantt/simple/BaseGroup"],function(a){"use strict";var t=a.extend("sap.gantt.simple.MultiActivityGroup",{metadata:{defaultAggregation:"task",aggregations:{task:{type:"sap.gantt.simple.BaseShape",multiple:false,sapGanttOrder:1},indicators:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"indicator",sapGanttOrder:0},subTasks:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"subTask",sapGanttLazy:true}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/MultiActivityRowSettings", ["sap/gantt/simple/GanttRowSettings"],function(t){"use strict";var a=t.extend("sap.gantt.simple.MultiActivityRowSettings",{metadata:{defaultAggregation:"tasks",aggregations:{tasks:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"task"}}}});return a});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/Relationship", ["sap/ui/Device","sap/ui/core/Core","sap/ui/core/IconPool","./GanttUtils","./RenderUtils","./BasePath","sap/ui/core/theming/Parameters","sap/gantt/library","./CoordinateUtils","./BaseShape"],function(e,t,r,s,a,i,o,n,p,h){"use strict";var l=n.simple.connectorType;var c=6,g=20,d=15,u={FinishToFinish:0,FinishToStart:1,StartToFinish:2,StartToStart:3};var S=i.extend("sap.gantt.simple.Relationship",{metadata:{library:"sap.gantt",properties:{type:{type:"sap.gantt.simple.RelationshipType",group:"Appearance"},predecessor:{type:"string",group:"Data"},successor:{type:"string",group:"Data"},selectedStroke:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"#FF0000"},selectedStrokeWidth:{type:"sap.gantt.SVGLength",defaultValue:2},lShapeForTypeFS:{type:"boolean",defaultValue:true},lShapeForTypeSF:{type:"boolean",defaultValue:true},shapeTypeStart:{type:"sap.gantt.simple.connectorType",defaultValue:l.None},shapeTypeEnd:{type:"sap.gantt.simple.connectorType",defaultValue:l.Arrow},startShapeColor:{type:"sap.gantt.ValueSVGPaintServer",group:"Appearance"},endShapeColor:{type:"sap.gantt.ValueSVGPaintServer",group:"Appearance"},selectedStartShapeColor:{type:"sap.gantt.ValueSVGPaintServer",group:"Appearance"},selectedEndShapeColor:{type:"sap.gantt.ValueSVGPaintServer",group:"Appearance"},enableCurvedEdge:{type:"boolean",defaultValue:false},relationshipOverDivider:{type:"boolean",defaultValue:false},_lMarker:{type:"string"}}},renderer:{apiVersion:2}});S.prototype.applySettings=function(e){e=e||{};i.prototype.applySettings.apply(this,arguments)};S.prototype._getLMarker=function(){return this.getProperty("_lMarker")};S.prototype.onclick=function(e){if(this.getGanttChartBase().getIsConnectorDetailsVisible()){var t=function(){var e=p.getLatestCursorPosition();var t=e.pageX,r=e.pageY;var s=document.elementsFromPoint(t,r),a=[],i=[];for(var o=0;o<s.length;o++){var n=s[o].parentNode;if(s[o].tagName==="path"&&sap.ui.getCore().byId(n.id).isA("sap.gantt.simple.Relationship")&&i.indexOf(n.id)===-1){i.push(n.id);var h=sap.ui.getCore().byId(n.id);a.push(h)}}if(a.length>0){this.getGanttChartBase().fireShapeConnectorList({pageX:t,pageY:r,connectorList:a})}};window.setTimeout(t.bind(this),300)}else{h.prototype.onclick.call(this,e)}};S.prototype.renderElement=function(e,t,r){this.oGantt=sap.ui.getCore().byId(r);var a=t.getProcessedType();if(!t.mRelatedShapes&&!t.mAnchors&&!s.relationexist(this.oGantt,t)){return}this.mRelatedShapes=t.mRelatedShapes;if(this.mRelatedShapes.predecessor){var i=this.mRelatedShapes.predecessor.getParentRowSettings().getParent().getDomRef();var o=i.clientHeight;this.predYTop=i.offsetTop;this.predYBottom=this.predYTop+o}if(this.mRelatedShapes.successor){var p=this.mRelatedShapes.successor.getParentRowSettings().getParent().getDomRef();var h=p.clientHeight;this.sucYTop=p.offsetTop;this.sucYBottom=this.sucYTop+h}if(this.mRelatedShapes.predecessor&&this.mRelatedShapes.successor&&this.predYTop==this.sucYTop&&this.predYBottom==this.sucYBottom){var l=this.mRelatedShapes.successor.getParentRowSettings().getParent().getAggregation("_settings").getRowUid();var c=this.oGantt._oExpandModel.isRowExpanded(l);var g=this.oGantt.getShowParentRowOnExpand()&&!this.oGantt.getUseParentShapeOnExpand();var d=this.mRelatedShapes.predecessor._level;var u=this.mRelatedShapes.successor._level;if(c&&d&&u){var S=this.oGantt._oExpandModel.getBaseRowHeight();var f=this.oGantt.getExpandedRowHeight()?this.oGantt.getExpandedRowHeight():S;var y=g?this.predYTop+S+(d-1)*f:this.predYTop+(d-1)*f;var v=g?this.predYTop+S+d*f:this.predYTop+d*f;var E=g?this.sucYTop+S+(u-1)*f:this.sucYTop+(u-1)*f;var P=g?this.sucYTop+S+u*f:this.sucYTop+u*f;this.predYTop=y;this.predYBottom=v;this.sucYTop=E;this.sucYBottom=P}}switch(this.oGantt.getRelationshipShapeSize()){case n.simple.relationshipShapeSize.Small:this.SHAPE_SIZE=6;break;case n.simple.relationshipShapeSize.Large:this.SHAPE_SIZE=10;break;default:this.SHAPE_SIZE=8;break}this.calcLinePathD(t.mAnchors,a);this.renderRelationship(e,t.mAnchors,a,r)};S.prototype.getRlsAnchors=function(e,t){var r,s,a;var i=this.getShapeAnchors(t);if(t.predecessor&&t.successor){if(e===u.FinishToFinish){r=i.predecessor.tail;s=i.successor.tail}else if(e===u.FinishToStart){r=i.predecessor.tail;s=i.successor.head}else if(e===u.StartToFinish){r=i.predecessor.head;s=i.successor.tail}else if(e===u.StartToStart){r=i.predecessor.head;s=i.successor.head}}else if(t.predecessor&&!t.successor){if(e===u.FinishToFinish||e===u.FinishToStart){r=i.predecessor.tail;s={x:r.x+g,y:r.y};a={x:s.x,y:s.y+d/2}}else if(e===u.StartToFinish||e===u.StartToStart){r=i.predecessor.head;s={x:r.x-g,y:r.y};a={x:s.x-d,y:s.y+d/2}}}else if(!t.predecessor&&t.successor){if(e===u.FinishToFinish||e===u.StartToFinish){s=i.successor.tail;r={x:s.x+g,y:s.y};a={x:r.x,y:r.y+d/2}}else if(e===u.FinishToStart||e===u.StartToStart){s=i.successor.head;r={x:s.x-g,y:s.y};a={x:r.x-d,y:r.y+d/2}}}return{predecessor:r,successor:s,prompter:a}};S.prototype.calcLinePathD=function(e,r){var s=e.predecessor.x,a=e.predecessor.y;var i=e.successor.x,o=e.successor.y;var n,p=[s,a,i,o];var h=this.oGantt._edgePoint;if(a===o){n=this.calcIRlsPathD}else if(a!==o){if(r===u.FinishToFinish){n=this.calcURlsPathD;p.push(false,h)}else if(r===u.FinishToStart){if(s<=i){if(t.getConfiguration().getRTL()?this.getLShapeForTypeSF():this.getLShapeForTypeFS()){if(h==2&&this.getShapeTypeStart()=="None"||h==3&&Math.abs(s-i)>=h*c){n=this.calcLRlsPathD}else{n=this.calcSRlsPathD;p.push(r,h)}}else{if(Math.abs(s-i)>=2*h*c){n=this.calcZRlsPathD;p.push(h)}else{n=this.calcSRlsPathD;p.push(r,h)}}}else if(s>i){n=this.calcSRlsPathD;p.push(r,h)}}else if(r===u.StartToFinish){if(s<i){n=this.calcSRlsPathD;p.push(r,h)}else if(s>=i){if(t.getConfiguration().getRTL()?this.getLShapeForTypeFS():this.getLShapeForTypeSF()){if(h==2&&this.getShapeTypeStart()=="None"||h==3&&Math.abs(s-i)>=h*c){n=this.calcLRlsPathD}else{n=this.calcSRlsPathD;p.push(r,h)}}else{if(Math.abs(s-i)>=2*h*c){n=this.calcZRlsPathD;p.push(h)}else{n=this.calcSRlsPathD;p.push(r,h)}}}}else if(r===u.StartToStart){n=this.calcURlsPathD;p.push(true,h)}}if(n===this.calcLRlsPathD){var l=e.successor.dyTop?e.successor.dyTop:e.successor.dy;var g=e.successor.dyBottom?e.successor.dyBottom:e.successor.dy;p[2]=s<i?i+e.successor.dx:i-e.successor.dx;p[3]=a<o?o-l:o+g}this.setProperty("d",n.apply(this,p),true)};S.prototype.calcIRlsPathD=function(e,t,r,s){return this.getLinePathD([[e,t],[r,s]])};S.prototype.calcLRlsPathD=function(e,t,r,s){return this.getLinePathD([[e,t],[r,t],[r,s]])};S.prototype.calcURlsPathD=function(e,t,r,s,a,i){var o=e<r?r+i*c:e+i*c;var n=e<r?e-i*c:r-i*c;var p=!a?o:n;if(this.getRelationshipOverDivider()){var h=e<r?e+i*c:r+i*c;var l=e<r?r-i*c:e-i*c;var g=!a?h:l;var d=t>s?this.predYTop:this.predYBottom;var u=t<s?this.sucYTop:this.sucYBottom;if(!a&&e<r||a&&e>r){return this.getLinePathD([[e,t],[g,t],[g,d],[p,d],[p,s],[r,s]])}else{return this.getLinePathD([[e,t],[p,t],[p,u],[g,u],[g,s],[r,s]])}}else{return this.getLinePathD([[e,t],[p,t],[p,s],[r,s]])}};S.prototype.calcSRlsPathD=function(e,t,r,s,a,i){var o=a==1?e+i*c:e-i*c;var n=t>s?this.predYTop:this.predYBottom;var p=a==1?r-i*c:r+i*c;return this.getLinePathD([[e,t],[o,t],[o,n],[p,n],[p,s],[r,s]])};S.prototype.calcZRlsPathD=function(e,t,r,s,a){var i=e<r?e+a*c:e-a*c;if(this.getRelationshipOverDivider()){var o=t<s?this.sucYTop:this.sucYBottom;var n=e<r?r-a*c:r+a*c;return this.getLinePathD([[e,t],[i,t],[i,o],[n,o],[n,s],[r,s]])}else{return this.getLinePathD([[e,t],[i,t],[i,s],[r,s]])}};S.prototype.getConnectorEndPath=function(e,t,r){var s=function(e){return Number(e)};var a=e.match(/-?\d+(\.\d+)?/g).map(s);var i=[];var o;var n=this.getEnableCurvedEdge()?a[a.length-4]:a[a.length/2-2];var p=this.getEnableCurvedEdge()?a[a.length-3]:a[a.length/2-1];var h=this.getEnableCurvedEdge()?a[a.length-2]:a[a.length/2+0];var l=this.getEnableCurvedEdge()?a[a.length-1]:a[a.length/2+1];if(n==h){if(p>l){i=this.getCoordinateUpDown(h,l,"up");o=a[0]<h?"rightUp":"leftUp"}else{i=this.getCoordinateUpDown(h,l,"down");o=a[0]<h?"rightDown":"leftDown"}}else if(n!=h){i=n<h?this.getCoordinate(h,l,"rightEnd"):this.getCoordinate(h,l,"leftEnd")}return this.renderSvg(i,"end",t,r,o)};S.prototype.getConnectorStartPath=function(e,t,r){var s=function(e){return Number(e)};var a=e.match(/-?\d+(\.\d+)?/g).map(s);var i=a[0],o=a[1];var n=r==0||r==1?this.getCoordinate(i,o,"rightStart"):this.getCoordinate(i,o,"leftStart");return this.renderSvg(n,"start",t,r)};S.prototype.renderSvg=function(e,t,r,s,a){var i=[];var o=this._checkConnectorOverlap(r,s,t,a);if(o==l.Arrow){if(t=="start"){i.push(e[0],e[1],e[4],e[7])}else{i.push(e[0],e[3],e[5])}return d3.svg.line().interpolate("linear-closed")(i)}else if(o==l.Square){i.push(e[0],e[1],e[3],e[5],e[7]);return d3.svg.line().interpolate("linear-closed")(i)}else if(o==l.Diamond){i.push(e[0],e[2],e[4],e[6]);return d3.svg.line().interpolate("linear-closed")(i)}else if(o==l.Circle){i.push(e[0],e[1],e[3],e[5],e[7]);return d3.svg.line().interpolate("basis-closed")(i)}else if(o===l.HorizontalRectangle){i.push(e[0],e[15],e[9],e[10],e[16]);return d3.svg.line().interpolate("linear-closed")(i)}else if(o==l.VerticalRectangle){i.push(e[0],e[11],e[12],e[13],e[14]);return d3.svg.line().interpolate("linear-closed")(i)}else if(o==l.None){i.push(e[0]);return d3.svg.line().interpolate("linear")(i)}};S.prototype._checkConnectorOverlap=function(e,r,a,i){var o=sap.ui.getCore().byId(e);var n=s._getVisibleRelationships(o);var p=this.getRelatedInRowShapes(e);var h=t.getConfiguration().getRTL();var c,g,d,S=[];var f=function(e){g=[1,2];if(p.predecessor&&p.successor){n.forEach(function(t){if(t.mProperties.successor&&t.mProperties.predecessor){if(p.successor.mProperties.shapeId===t.getSuccessor()&&g.indexOf(u[t.getType()])!==-1&&t._getLMarker()===e){S.push(t.getShapeTypeEnd())}}})}S=s.getFilteredShapeType(S);var t=S.length>1?l.HorizontalRectangle:this.getShapeTypeEnd();if(t==l.VerticalRectangle||t==l.HorizontalRectangle){t=t==l.VerticalRectangle?l.HorizontalRectangle:l.VerticalRectangle}return t}.bind(this);var y=function(e,t){return e===l.Arrow?t:e};if(a=="start"){if(h){g=r==0||r==1?[2,3]:[0,1];d=r==0||r==1?[1,3]:[0,2]}else{g=r==0||r==1?[0,1]:[2,3];d=r==0||r==1?[0,2]:[1,3]}if(p.predecessor&&p.successor){n.forEach(function(e){if(e.mProperties.successor&&e.mProperties.predecessor){if(p.predecessor.mProperties.shapeId==e.getPredecessor()&&g.indexOf(u[e.getType()])!==-1){S.push(y(e.getShapeTypeStart(),"ArrowStart"))}if(p.predecessor.mProperties.shapeId==e.getSuccessor()&&d.indexOf(u[e.getType()])!==-1&&e._getLMarker()==""){S.push(y(e.getShapeTypeEnd(),"ArrowEnd"))}}})}S=s.getFilteredShapeType(S);c=S.length>1?l.HorizontalRectangle:this.getShapeTypeStart()}else{if(i=="rightUp"||i=="rightDown"||i=="leftUp"||i=="leftDown"){c=f(i)}else{if(h){g=r==1||r==3?[0,2]:[1,3];d=r==1||r==3?[0,1]:[2,3]}else{g=r==1||r==3?[1,3]:[0,2];d=r==1||r==3?[2,3]:[0,1]}if(p.predecessor&&p.successor){n.forEach(function(e){if(e.mProperties.successor&&e.mProperties.predecessor){if(p.successor.mProperties.shapeId==e.getSuccessor()&&g.indexOf(u[e.getType()])!==-1&&e._getLMarker()==""){S.push(y(e.getShapeTypeEnd(),"ArrowEnd"))}if(p.successor.mProperties.shapeId==e.getPredecessor()&&d.indexOf(u[e.getType()])!==-1){S.push(y(e.getShapeTypeStart(),"ArrowStart"))}}})}S=s.getFilteredShapeType(S);c=S.length>1?l.HorizontalRectangle:this.getShapeTypeEnd()}}return c};S.prototype.getCoordinate=function(e,t,r){var s=r=="rightStart"||r=="leftEnd"?e+this.SHAPE_SIZE/2:e-this.SHAPE_SIZE/2;var a=r=="rightStart"||r=="leftEnd"?e+this.SHAPE_SIZE:e-this.SHAPE_SIZE;var i=r=="rightStart"||r=="leftEnd"?e+2*c:e-2*c;var o=r=="rightStart"||r=="leftEnd"?e+c:e-c;var n=[[e,t],[e,t-this.SHAPE_SIZE/2],[s,t-this.SHAPE_SIZE/2],[a,t-this.SHAPE_SIZE/2],[a,t],[a,t+this.SHAPE_SIZE/2],[s,t+this.SHAPE_SIZE/2],[e,t+this.SHAPE_SIZE/2],[s,t],[i,t-c/2],[i,t+c/2],[e,t-c],[o,t-c],[o,t+c],[e,t+c],[e,t-c/2],[e,t+c/2]];return n};S.prototype.getCoordinateUpDown=function(e,t,r){var s=r=="up"?t+this.SHAPE_SIZE/2:t-this.SHAPE_SIZE/2;var a=r=="up"?t+this.SHAPE_SIZE:t-this.SHAPE_SIZE;var i=r=="up"?t+2*c:t-2*c;var o=r=="up"?t+c:t-c;var n=[[e,t],[e+this.SHAPE_SIZE/2,t],[e+this.SHAPE_SIZE/2,s],[e+this.SHAPE_SIZE/2,a],[e,a],[e-this.SHAPE_SIZE/2,a],[e-this.SHAPE_SIZE/2,s],[e-this.SHAPE_SIZE/2,t],[e,s],[e+c/2,i],[e-c/2,i],[e+c,t],[e+c,o],[e-c,o],[e-c,t],[e+c/2,t],[e-c/2,t]];return n};S.prototype.getShapeAnchors=function(e){var t={predecessor:null,successor:null};Object.keys(e).forEach(function(r){var s=e[r];if(s==null){return}if(s.getShapeAnchors){t[r]=s.getShapeAnchors()}else{var a,i,o;if(s.getDomRef("nonLabelGroup")){a=s.getDomRef("nonLabelGroup").getBBox();i=3/4;o=1/4}else{a=s.getDomRef().getBBox();i=1/2;o=1/2}var n,p=0;n=window.getComputedStyle(s.getDomRef()).transform.match(/matrix.*\((.+)\)/);if(n){p=n[1].split(", ")[5]}t[r]={head:{x:a.x,y:a.y+a.height*i+parseFloat(p),dx:0,dyTop:a.height*i,dyBottom:a.height*o},tail:{x:a.x+a.width,y:a.y+a.height*i+parseFloat(p),dx:0,dyTop:a.height*i,dyBottom:a.height*o}}}});return t};S.prototype.renderRelationship=function(i,o,n,p){this.writeElementData(i,"g",true);a.renderAttributes(i,this,["style"]);i.openEnd();a.renderTooltip(i,this);i.openStart("path");if(!this.getEnableCurvedEdge()||o.prompter){i.attr("d",this.getD())}else{i.style("fill","none");i.attr("d",s.getPathCorners(this.getD(),5))}i.openEnd().close("path");i.openStart("path");if(!this.getEnableCurvedEdge()||o.prompter){i.attr("d",this.getD());i.style("fill","none")}else{i.style("fill","none");i.attr("d",s.getPathCorners(this.getD(),5))}i.style("stroke-width",8);i.style("stroke","none");i.style("pointer-events","stroke");i.openEnd().close("path");i.openStart("path");i.style("fill",this.getStartShapeColor());i.style("stroke-dasharray","none");i.attr("d",this.getConnectorStartPath(this.getD(),p,n));i.openEnd().close("path");i.openStart("path");i.style("fill",this.getEndShapeColor());i.style("stroke-dasharray","none");i.attr("d",this.getConnectorEndPath(this.getD(),p,n));i.openEnd().close("path");if(o.prompter){i.openStart("text");i.attr("x",o.prompter.x);i.attr("y",o.prompter.y);i.attr("font-size",d);i.attr("font-family","SAP-icons");i.attr("text-anchor",t.getConfiguration().getRTL()&&!e.browser.edge?"end":"start");i.attr("stroke-width",0);i.openEnd();i.text(r.getIconInfo("chain-link").content);i.close("text")}i.close("g")};S.prototype.getStyle=function(){return this.getInlineStyle({fill:this.getStroke()||o.get("sapUiBaseText"),stroke:this.getStroke()||o.get("sapUiBaseText"),"stroke-width":this.getStrokeWidth()||1,"stroke-dasharray":this.getStrokeDasharray(),opacity:this.getStrokeOpacity()})};S.prototype.getLinePathD=function(e){if(this.getEnableCurvedEdge()){return d3.svg.line().interpolate("linear")(e)}else{e=e.concat(e.slice(1,-1).reverse());return d3.svg.line().interpolate("linear-closed")(e)}};S.prototype.getSelectedStyle=function(){return this.getInlineStyle({fill:this.getSelectedStroke(),stroke:this.getSelectedStroke(),"stroke-width":this.getSelectedStrokeWidth(),"stroke-dasharray":this.getStrokeDasharray(),"pointer-events":"none"})};S.prototype.getBaseRowHeight=function(e){return t.byId(e).getTable()._getDefaultRowHeight()};S.prototype.getProcessedType=function(){var e=this.getProperty("type");var r=t.getConfiguration().getRTL();return r?3-u[e]:u[e]};S.prototype.getRelatedInRowShapes=function(e){return{predecessor:s.shapeElementById(this.getPredecessor(),e+"-svg"),successor:s.shapeElementById(this.getSuccessor(),e+"-svg")}};return S},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/RenderUtils", ["./AggregationUtils","./GanttUtils","sap/ui/core/Core","../library","sap/ui/Device","../misc/Utility","sap/ui/core/theming/Parameters","../misc/Format"],function(e,t,i,a,n,r,l,s){"use strict";var o=13;var g=a.simple.horizontalTextAlignment;var h={apiVersion:2,RENDER_EXTEND_FACTOR:.382,getGanttRenderWidth:function(e){var t=jQuery(document.getElementById(e.getId()+"-gantt")).width();return t*(1+2*h.RENDER_EXTEND_FACTOR)},renderAttributes:function(e,t,i){var a=i.map(function(e){var i=e.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)},"get");return{name:e,value:t[i]()}});a.forEach(function(t){if(t.value||t.value===0){if(t.name==="style"){var i=t.value.split(";");i.forEach(function(t){t=t.trim();if(t!=""){var i=t.split(/:(.*)/);if(i[0]==="fill"&&i[1].indexOf(" ")!=-1){i[1]=encodeURI(i[1])}e.style(i[0],i[1])}})}else{e.attr(t.name,t.value)}}})},renderTooltip:function(e,t){if(t.getTooltip()){e.openStart("title").openEnd();e.text(t.getTooltip());e.close("title")}},updateShapeSelections:function(e,i,a){if(e._getResizeExtension==null){return}var n=e._getResizeExtension();var r=e.getId();t.getShapesWithUid(r,a).forEach(function(t){if(t){this._bShapeSelectionProperties=false;this._hasShapeSelectionProperties(t,e);if(this._bShapeSelectionProperties){this._updateShapeStyle(t,false,e,0)}if(t.isA("sap.gantt.simple.shapes.Shape")){t.setSelected(false)}else if(t.getParent().isA("sap.gantt.simple.BaseConditionalShape")){t.getParent().setProperty("selected",false,true)}else{t.setProperty("selected",false,true)}}}.bind(this));n.clearAllOutline(r);t.getShapesWithUid(r,i).forEach(function(t){if(t){if(t.getProperty("selectable")){this._bShapeSelectionProperties=false;this._hasShapeSelectionProperties(t,e);if(this._bShapeSelectionProperties){this._updateShapeStyle(t,true,e,0)}if(t.isA("sap.gantt.simple.shapes.Shape")){t.setSelected(true)}else if(t.getParent().isA("sap.gantt.simple.BaseConditionalShape")){t.getParent().setProperty("selected",true,true);n.toggleOutline(t)}else{t.setProperty("selected",true,true);n.toggleOutline(t)}}e.getSelection().updateProperties(t.getShapeUid(),{draggable:t.getDraggable(),time:t.getTime(),endTime:t.getEndTime()})}}.bind(this))},_hasShapeSelectionProperties:function(e,t){if(!e||e.isA("sap.gantt.simple.Relationship")){return}if(e.isA("sap.gantt.simple.BaseConditionalShape")){e=e._getActiveShapeElement()}if(e&&(e.getSelectedFill()||e.getSelectedTitleColor())){this._bShapeSelectionProperties=true}else if(e instanceof sap.gantt.simple.BaseGroup){if(t.getSelectOnlyGraphicalShape()){e._eachChildOfGroup(e,function(e,i){i.forEach(function(e){if(!this._bShapeSelectionProperties){this._hasShapeSelectionProperties(e,t)}}.bind(this))}.bind(this))}else{e._eachChildOfGroup(e,function(e){if(!this._bShapeSelectionProperties){this._hasShapeSelectionProperties(e,t)}}.bind(this))}}},_updateShapeStyle:function(e,t,i,a,n,r){if(!e||e.isA("sap.gantt.simple.Relationship")||!e.getVisible()){return}if(e.isA("sap.gantt.simple.BaseConditionalShape")&&e._getActiveShapeElement()){this._updateShapeStyle(e._getActiveShapeElement(),t,i,a,n,r)}else if(e.isA("sap.gantt.simple.BaseGroup")){if(i.getSelectOnlyGraphicalShape()){e._eachChildOfGroup(e,function(e,l){l.forEach(function(e){var l=this._updateGroupShapeStyle(e,t,i,a,n,r);a=l}.bind(this))}.bind(this))}else{e._eachChildOfGroup(e,function(e){var l=this._updateGroupShapeStyle(e,t,i,a,n,r);a=l}.bind(this))}}else{this._updateShapeSelectionStyle(e,t,n,r)}},_updateGroupShapeStyle:function(e,t,i,a,n,r){if(!e||e.isA("sap.gantt.simple.Relationship")||!e.getVisible()){return a}r=r||{};var l=e.getParent();var s=l.getFill()||r.fill;var o=l.getTitleColor()||r.titleColor;var g=l.getSelectedFill()||r.selectedFill;var h=l.getSelectedTitleColor()||r.selectedTitleColor;var p=l.getDomRef("nonLabelGroup")?l.getDomRef("nonLabelGroup"):l.getDomRef()||n;if(p){var d=p.children||p.childNodes;while(a<d.length&&d[a].tagName==="title"){a+=1}this._bUpdatedTitle=false;var c=e.isA("sap.gantt.simple.BaseGroup")||e.isA("sap.gantt.simple.BaseConditionalShape")&&e._getActiveShapeElement()&&e._getActiveShapeElement().isA("sap.gantt.simple.BaseGroup");var f=c?0:a;var u={fill:s,titleColor:o,selectedFill:g,selectedTitleColor:h};this._updateShapeStyle(e,t,i,f,p.children[a],u);var S=this._bUpdatedTitle&&!c?2:1;a+=S}return a},_updateShapeSelectionStyle:function(e,t,i,a){a=a||{};var n=e.getFill()||a.fill;var r=e.getTitleColor()||a.titleColor;var s=t?e.getSelectedFill()||a.selectedFill||n:n;var o=l.get("sapUiBaseText");var g=e.isA("sap.gantt.simple.BaseText")?r||n||o:r||o;var h=e.isA("sap.gantt.simple.BaseText")?e.getSelectedFill()||a.selectedFill:null;var p=t?e.getSelectedTitleColor()||a.selectedTitleColor||h||g:g;var d=i?i:document.getElementById(e.getId());if(d){d.style.fill=e.isA("sap.gantt.simple.BaseText")?p:s;var c=d.nextSibling;if(c&&c.tagName==="text"&&e.getShowTitle()&&e.getTitle()){c.style.fill=p;this._bUpdatedTitle=true}}},updateShapeHighlights:function(e,i,a){if(e._getResizeExtension==null){return}var n=e._getResizeExtension();var r=e.getId();t.getShapesWithUid(r,a).forEach(function(e){if(e){if(e.isA("sap.gantt.simple.shapes.Shape")){e.setHighlighted(false)}else if(e.getParent().isA("sap.gantt.simple.BaseConditionalShape")){e.getParent().setProperty("highlighted",false,true)}else{e.setProperty("highlighted",false,true)}}});n.clearAllHighlight(r);t.getShapesWithUid(r,i).forEach(function(t){if(t){if(t.getProperty("highlightable")){if(t.isA("sap.gantt.simple.shapes.Shape")){t.setHighlighted(true)}else if(t.getParent().isA("sap.gantt.simple.BaseConditionalShape")){t.getParent().setProperty("highlighted",true,true);n.toggleHighlight(t)}else{t.setProperty("highlighted",true,true);n.toggleHighlight(t)}}e.getHighlight().updateProperties(t.getShapeUid(),{time:t.getTime(),endTime:t.getEndTime()})}})},updateShapeSelectionByShapeID:function(e,t){if(e._getResizeExtension==null){return}var i=e.getSelection().getSelectedShapeIDS();var a=e.getSelection().getDeSelectedShapeIDS();var n=e.getSelection().getSelectedRowIDS();var r=e.getSelection().getDeSelectedRowIDS();if(i&&i.length>0){this._updateShapeSelection(e,i,true)}if(n&&n.length>0){this._updateRowSelection(e,n,true)}if(a&&a.length>0){this._updateShapeSelection(e,a,false)}if(r&&r.length>0){this._updateRowSelection(e,r,false,t)}},_updateShapeSelection:function(e,i,a){var n=e.getId();if(!a){i.forEach(function(t){e.oSelection.mSelected.deSelectShapeId[t]={selected:a}})}t.getShapeByShapeId(n,i).forEach(function(t){this._updateShapes(t,a,e)}.bind(this))},_updateRowSelection:function(e,i,a,n){var r=e.getId();var l=e.searchTxt;if(!a){l=e.deSelectTxt}if(n){t.getShapesInRowsById(r,i).forEach(function(t){if(t&&(!a||t.getProperty("selectable"))){if(t.mProperties.shapeId){e.getSelection().updateShapeId(t.getShapeId(),a)}this._updateShapes(t,a,e)}}.bind(this))}else if(l!==null&&l!==undefined){t.getShapesInRowsById(r,i).forEach(function(t){if(t){var i=this._selectShapeBySearchText(e,t,a);if(i&&(!a||t.getProperty("selectable"))){if(t.mProperties.shapeId){e.getSelection().updateShapeId(t.getShapeId(),a)}this._updateShapes(t,a,e);if(!a){e.getSelection().clearSelectionByUid(t.getShapeUid())}}}}.bind(this))}},_updateShapes:function(e,t,i){e.setProperty("selected",t,true);if(t){i.getSelection().updateProperties(e.getShapeUid(),{draggable:e.getDraggable(),time:e.getTime(),endTime:e.getEndTime()},true)}else{i.getSelection().clearSelectionByUid(e.getShapeUid())}},updateShapeHighlightByShapeID:function(e,t){if(e._getResizeExtension==null){return}var i=e.getHighlight().getHighlightedShapeID();var a=e.getHighlight().getDeEmphasizedShapeID();if(i&&i.length>0){this._updateShapeHighlight(e,i,true)}if(a&&a.length>0){this._updateShapeHighlight(e,a,false)}},_updateShapeHighlight:function(e,i,a){var n=e.getId();t.getShapeByShapeId(n,i).forEach(function(t){this._updateShapeAttributes(t,a,e)}.bind(this))},_updateShapeAttributes:function(e,t,i){e.setProperty("highlighted",t,true);if(t){i.getHighlight().updateProperties(e.getShapeUid(),{time:e.getTime(),endTime:e.getEndTime()},true)}else{i.getHighlight().clearHighlightByUid(e.getShapeUid())}},_selectShapeBySearchText:function(e,t,i){var a=false;var n=e.getTable().getBindingInfo("rows").model;var r=e.searchProperty;if(!i){r=e.deSelectProperty}function l(t){if(i){e.searchTxt.forEach(function(e){if(t!==undefined&&t!==null&&t.toString().toLowerCase().indexOf(e.toString().toLowerCase())!==-1){a=true}})}else{if(t!==undefined&&t!==null&&t.toString().toLowerCase().indexOf(e.deSelectTxt.toString().toLowerCase())!==-1){a=true}}}if(Array.isArray(r)&&r.length>0){r.forEach(function(e){if(a){return}var i=t.getBindingContext(n).getProperty(e);l(i)})}else if(typeof r==="string"){var s=t.getBindingContext(n).getProperty(r);l(s)}else{var o=t.getBindingContext(n).getObject();if(o){Object.keys(o).forEach(function(e){if(a){return}l(o[e])})}}return a},getShapeElementByTarget:function(e){return jQuery(this.getDraggableDOMElement(e)).control(0,true)},getDraggableDOMElement:function(e){return jQuery(e).closest("["+t.SHAPE_ID_DATASET_KEY+"]").get(0)},addTitleSpacing:function(e,t){if(e.titleSpacing){e.x=t?e.x-e.titleSpacing:e.x+e.titleSpacing}},renderElementTitle:function(e,t,a){if(t.getShowTitle==null||!t.getShowTitle()){return}var n=t.getTitle();if(n){var s=0,h=0,p=0;if(t.getWidth){h=t.getWidth();p=t.getWidth()}if(t.getHeadWidth){s=t.getHeadWidth();h-=s}if(t.getTailWidth){h-=t.getTailWidth()}var d=2+s;var c={text:n,fill:t.getTitleColor()||l.get("sapUiBaseText"),showEllipsis:true,truncateWidth:h-t.getTitleSpacing(),textAnchor:t.getHorizontalTextAlignment().toLowerCase(),verticalTextAlignment:t.getVerticalTextAlignment(),fontWeight:t.getFontWeight(),fontFamily:t.getFontFamily(),fontSize:t.getFontSize()||o};var f=i.getConfiguration().getRTL();if(t.getTitleSpacing()){if(c.textAnchor===g.End.toLowerCase()){c.titleSpacing=-t.getTitleSpacing()}else{c.titleSpacing=t.getTitleSpacing()}}if(c.textAnchor===g.Start.toLowerCase()){c.x=f?t.getX()+t.getWidth()-d:t.getX()+d;this.setVerticalAlignment(t,c)}else if(c.textAnchor===g.End.toLowerCase()){c.x=f?t.getX()+d:t.getX()+t.getWidth()-d;this.setVerticalAlignment(t,c)}else if(c.textAnchor===g.Middle.toLowerCase()){c.x=t.getX()+t.getWidth()/2;this.setVerticalAlignment(t,c)}else if(c.textAnchor===g.Dynamic.toLowerCase()){this.renderDynamicText(t,c,d);this.setVerticalAlignment(t,c)}var u=r.getShapeBias(t);c.x=c.x+u.x;c.y=c.y+u.y;this.addTitleSpacing(c,f);var S=a(c).addStyleClass("sapGanttTextNoPointerEvents");S.setProperty("childElement",true,true);S.renderElement(e,S)}},renderCalenderTitle:function(e,t,a,n){var r=t.title;var s=t.baseCalender;if(r){var h=0,p=0;if(a.width){h=a.width;p=a.width}var d={text:r,fill:s.getTitleColor()||l.get("sapUiBaseText"),showEllipsis:true,truncateWidth:h-s.getTitleSpacing(),textAnchor:s.getHorizontalTextAlignment(),verticalTextAlignment:s.getVerticalTextAlignment(),fontWeight:s.getFontWeight(),fontSize:s.getFontSize()||o,fontFamily:s.getFontFamily()};var c=i.getConfiguration().getRTL();if(s.getTitleSpacing()){if(d.textAnchor.toLowerCase()===g.End.toLowerCase()){d.titleSpacing=-s.getTitleSpacing()}else{d.titleSpacing=s.getTitleSpacing()}}if(d.textAnchor.toLowerCase()===g.Start.toLowerCase()){d.x=c?a.x+a.width:a.x}else if(d.textAnchor.toLowerCase()===g.End.toLowerCase()){d.x=c?a.x:a.x+a.width}else if(d.textAnchor.toLowerCase()===g.Middle.toLowerCase()){d.x=a.x+a.width/2}else if(d.textAnchor.toLowerCase()===g.Dynamic.toLowerCase()){this.renderDynamicText(s,d,0,a)}if(d.verticalTextAlignment==="Top"){d.y=a.height/2-1}else if(d.verticalTextAlignment==="Bottom"){d.y=a.height/2+d.fontSize-1}else{d.y=a.height/2+d.fontSize/2-1}this.addTitleSpacing(d,c);var f=n(d).addStyleClass("sapGanttTextNoPointerEvents");f.setProperty("childElement",true,true);f.renderElement(e,f)}},setVerticalAlignment:function(e,t){if(t.verticalTextAlignment==="Top"){t.y=e.getY()+t.fontSize-1}else if(t.verticalTextAlignment==="Bottom"){t.y=e.getY()+parseInt(e.getHeight(),10)-1}else{t.y=e.getY()+parseInt(e.getHeight()/2,10)+t.fontSize/2.5}},renderDynamicText:function(e,t,a,n){var r=i.getConfiguration().getRTL();var l=s.abapTimestampToDate(e.getAxisTime()._oZoomStrategy.getVisibleHorizon().getStartTime());var o;if(n){t.x=r?n.x+n.width-a:n.x+a;o=t.x;if(n.x<e.getAxisTime().timeToView(l)&&n.x+n.width>e.getAxisTime().timeToView(l)){t.x=r?e.getAxisTime().timeToView(l)-a:e.getAxisTime().timeToView(l)+a;t._shapeCropped=true;t._xBiassed=t.x-o}}else{t.x=r?e.getX()+e.getWidth()-a:e.getX()+a;o=t.x;if(e.getTime()<l&&e.getEndTime()>l){t.x=r?e.getAxisTime().timeToView(l)-a:e.getAxisTime().timeToView(l)+a;t._shapeCropped=true;t._xBiassed=t.x-o}}},renderInlineShapes:function(e,i,a){var n=i.getId()+"-top";var r=i.getId()+"-row";e.openStart("g",i);e.class(n);e.attr("data-sap-ui-related",i.getParent().getId());e.openEnd();e.openStart("g");e.attr(t.ROW_ID_DATASET_KEY,i.getRowId()||"");e.class(r);e.openEnd();this.renderMainRowAllShapes(e,i,a);e.close("g");e.close("g")},renderMainRowAllShapes:function(t,i,a){var n=a.getSyncedControl().getRowStates();var r=this.calcRowDomPosition(i,n),l=r.rowYCenter,s=r.rowHeight;var o=e.getAllNonLazyAggregations(i);var g=Object.keys(o).filter(function(e){return e.indexOf("calendars")===-1&&e!=="relationships"}).map(function(e){return i.getAggregation(e)||[]}.bind(i));var p=i.getRowUid(),d=a.oSelection,c=a.oHighlight,f=a._oExpandModel,u=a.getAxisTime(),S=f.isRowExpanded(p);g.forEach(function(e,n){e.forEach(function(e){if(a.isShapeVisible(e)){h.renderMainRowShape(t,e,{expandModel:f,selectionModel:d,highlightModel:c,axisTime:u,rowSetting:i,rowUid:p,rowExpanded:S,mainRowYCenter:l,rowHeight:s},a.getShowParentRowOnExpand()&&!a.getUseParentShapeOnExpand())}})})},renderMainRowShape:function(e,t,i,a){this.setSpecialProperties(t,i);if(Object.keys(i.expandModel.mExpanded).indexOf(i.rowUid)==-1&&!i.rowExpanded||a){t.renderElement(e,t,null)}if(i.rowExpanded){this.renderExpandShapesIfNecessary(e,t,i,a)}},setSpecialProperties:function(t,i){var a=i.expandModel,n=i.rowUid,r=i.rowSetting.getShapeUid(t),l=t.getParentRowSettings().getParent().getParent(),s=l.getParent();if(!t._iBaseRowHeight){t._iBaseRowHeight=a.getBaseRowHeight();var o=e.getNonLazyAggregations(t);Object.keys(o).filter(function(e){var t=o[e];if(t.appData!==null){return t.appData.sapGanttOrder===1}}).map(function(e){if(e==="utilizationBar"||e==="utilizationLine"){t._iBaseRowHeight=t._iBaseRowHeight-1}})}t.mAxisTime=i.axisTime;t.setProperty("shapeUid",r,true);if(t.getProperty("selectable")){t.setProperty("selected",i.selectionModel.existed(r),true)}if(t.getProperty("highlightable")){t.setProperty("highlighted",i.highlightModel.existed(r),true)}t.setProperty("rowYCenter",a.getRowYCenterByUid(n,i.mainRowYCenter,t.getScheme(),0,s),true)},isValidD:function(e){return!!e&&e.indexOf("NaN")===-1&&e.indexOf("undefined")===-1&&e.indexOf("null")===-1},renderExpandShapesIfNecessary:function(i,a,n,r){var l;var s=a.getParentRowSettings().getParent().getParent(),o=s.getParent();var g=function(e){if(!e||e.length===0){return}var a=e;if(jQuery.isArray(e)===false){a=[e]}t.calculateLevelForShapes(a,"time","endTime");a.forEach(function(e,t){if(e._level){t=e._level-1}var a=r?n.expandModel.getRowYCenterByUid(n.rowUid,null,e.getScheme(),t,o):n.expandModel.getRowYCenterByUid(n.rowUid,null,e.getScheme(),t,o)-n.expandModel.getBaseRowHeight();e.setProperty("rowYCenter",a,true);e._iBaseRowHeight=n.expandModel.getExpandShapeHeightByUid(n.rowUid,e.getScheme(),n.iRowHeight);e.setProperty("shapeUid",n.rowSetting.getShapeUid(e),true);e.renderElement(i,e)})};a._isSubTasks=a.mBindingInfos.hasOwnProperty("subTasks")||typeof a.getSubTasks==="function"&&a.getSubTasks();if(o.getUseParentShapeOnExpand()){var h=a.getParent().getAllExpandableShapes();var p=a.getScheme();var d;var c;h.forEach(function(e,t){if(o.isShapeVisible(e)){l=t}});var f=h[l];if(a===f){var u=[];h.forEach(function(t){var i=e.getNonLazyElementsByScheme(t,p);i.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){var t=e._getActiveShapeElement();if(t instanceof sap.gantt.simple.BaseGroup){d=null;c=null;t.getShapes().forEach(function(e){if(!d&&!c){d=e.getTime();c=e.getEndTime()}else{if(e.getTime()>=d){d=d}else{d=e.getTime()}if(e.getEndTime()>=c){c=e.getEndTime()}else{c=c}}});t.setTime(d);t.setEndTime(c);u=u.concat(t)}else if(t){u=u.concat(t)}}else if(e instanceof sap.gantt.simple.BaseGroup){d=null;c=null;e.getShapes().forEach(function(e){if(!d&&!c){d=e.getTime();c=e.getEndTime()}else{if(e.getTime()>=d){d=d}else{d=e.getTime()}if(e.getEndTime()>=c){c=e.getEndTime()}else{c=c}}});e.setTime(d);e.setEndTime(c);u=u.concat(e)}else{u=u.concat(e)}})});if(u.length!==0){u.forEach(function(e){e.setProperty("childElement",false,true)})}g(u)}}else if(a._isSubTasks){var h=a.getParent().getAllExpandableShapes();var d;var c;h.forEach(function(e,t){if(o.isShapeVisible(e)){l=t}});var f=h[l];if(a===f){var u=[];h.forEach(function(t){var i=e.getLazyElementsByScheme(t,a.getParent().getParentGantt().getShapeSchemes()[1].getKey());i.forEach(function(e){if(e instanceof sap.gantt.simple.BaseConditionalShape){var t=e._getActiveShapeElement();if(t instanceof sap.gantt.simple.BaseGroup){d=null;c=null;t.getShapes().forEach(function(e){if(!d&&!c){d=e.getTime();c=e.getEndTime()}else{if(e.getTime()>=d){d=d}else{d=e.getTime()}if(e.getEndTime()>=c){c=e.getEndTime()}else{c=c}}});t.setTime(d);t.setEndTime(c);u=u.concat(t)}else if(t){u=u.concat(t)}}else if(e instanceof sap.gantt.simple.BaseGroup){d=null;c=null;e.getShapes().forEach(function(e){if(!d&&!c){d=e.getTime();c=e.getEndTime()}else{if(e.getTime()>=d){d=d}else{d=e.getTime()}if(e.getEndTime()>=c){c=e.getEndTime()}else{c=c}}});e.setTime(d);e.setEndTime(c);u=u.concat(e)}else{u=u.concat(e)}})});g(u)}}else if(!a._isSubTasks){var S=e.getLazyAggregations(a);Object.keys(S).forEach(function(e){var t=a.getAggregation(e);g(t)})}},calcRowDomPosition:function(e,t){var i=e._getRow(),a=i.getParent(),n=a.indexOfRow(i);var r=t[n].height;var l=0;for(var s=0;s<=n;s++){l+=t[s].height}l-=r/2;return{rowYCenter:l,rowHeight:r}},pushOrUnshift:function(e,t,i){if(i===true){e.splice(0,0,t)}else{e.push(t)}},createOrderedListOfRenderFunctionsFromTemplate:function(e){var t=[];for(var i=0;i<e.length;i++){this.pushOrUnshift(t,e[i].fnCallback,e[i].bUnshift)}return t},renderElementAnimation:function(e,t){var i=t.getAnimationProperties(t.getAnimationSettings());if(i){e.openStart("animate");e.attr("attributeName","fill");e.attr("values",i.values);e.attr("dur",i.duration);e.attr("repeatCount",i.repeatCount);e.openEnd().close("animate")}}};return h},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/SelectionModel", ["sap/gantt/library","sap/ui/base/EventProvider","./GanttUtils"],function(e,t,d){"use strict";var i=e.SelectionMode;var l=t.extend("sap.gantt.simple.SelectionModel",{constructor:function(e){t.apply(this,arguments);this.sSelectionMode=e||i.Single;this.mSelected={uid:{},shapeId:{},rowId:{},deSelectShapeId:{},deSelectRowId:{}}}});l.prototype.getSelectionMode=function(){return this.sSelectionMode};l.prototype.setSelectionMode=function(e){this.sSelectionMode=e||i.Single;return this};l.prototype.updateShape=function(e,t){var d=this.getSelectionMode();if(d==="None"){return}if(!e){if(d===i.Single||d===i.Multiple||d===i.MultiWithKeyboard&&!t.ctrl||d===i.MultipleWithLasso||d===i.MultiWithKeyboardAndLasso&&!t.ctrl){this.clear(false)}return}if(t.selected&&!this.mSelected.uid[e]){var l=Object.keys(this.mSelected.uid);if(this.sSelectionMode===i.Single){this.mSelected.uid={}}else if(this.sSelectionMode===i.MultiWithKeyboard||this.sSelectionMode===i.MultiWithKeyboardAndLasso){if(t.ctrl){l=[]}else{this.mSelected.uid={}}}else if(this.sSelectionMode===i.Multiple||this.sSelectionMode===i.MultipleWithLasso){l=[]}this._updateSelectedShape(e,t);this._fireSelectionChanged(l)}else if(!t.selected&&this.mSelected.uid[e]){delete this.mSelected.uid[e];this._fireSelectionChanged([e])}};l.prototype.updateShapes=function(e){if(!e){return}var t=[];var d=Object.keys(e);for(var i=0;i<d.length;i++){var l=d[i];var c=e[d[i]];if(c&&c.selected&&!this.mSelected.uid[l]){this._updateSelectedShape(l,c)}else if(c&&!c.selected&&this.mSelected.uid[l]){delete this.mSelected.uid[l];t.push(l)}}this._fireSelectionChanged(t)};l.prototype.updateProperties=function(e,t,d){if(this.mSelected.uid[e]){this.mSelected.uid[e].draggable=t.draggable;this.mSelected.uid[e].time=t.time;this.mSelected.uid[e].endTime=t.endTime}else if(d){this._updateSelectedShape(e,t)}};l.prototype._updateSelectedShape=function(e,t){this.mSelected.uid[e]={shapeUid:e,draggable:t.draggable,time:t.time,endTime:t.endTime}};l.prototype._fireSelectionChanged=function(e,t,d,i){var l={shapeUid:Object.keys(this.mSelected.uid),deselectedUid:e,silent:!!t,deSelectAll:i};if(l.shapeUid.length>0||l.deselectedUid.length>0||d){this.fireSelectionChanged(l)}};l.prototype.clearSelectionByUid=function(e){if(this.existed(e)){delete this.mSelected.uid[e]}};l.prototype.existed=function(e){return!!this.mSelected.uid[e]};l.prototype.clear=function(e){if(this.mSelected.uid.length===0){return false}var t=this.allUid();this.mSelected.uid={};this.mSelected.shapeId={};this.mSelected.rowId={};this._fireSelectionChanged(t,e);return true};l.prototype.allUid=function(){return Object.keys(this.mSelected.uid)};l.prototype.numberOfSelectedDraggableShapes=function(){return this.allSelectedDraggableUid().length};l.prototype.allSelectedDraggableUid=function(){return Object.keys(this.mSelected.uid).filter(function(e){return this.mSelected.uid[e].draggable}.bind(this))};l.prototype.updateSelectedShapes=function(e,t){var d=[];this.mSelected.deSelectRowId={};if(!e||e.length===0){this.mSelected.deSelectShapeId=this.mSelected.shapeId;this.mSelected.shapeId={}}if(t){d=this.allUid();this.mSelected.uid={};this.mSelected.shapeId={}}e.forEach(function(e){if(e.Selected){this.mSelected.deSelectShapeId={};if(e.ShapeId&&!this.mSelected.shapeId[e.ShapeId]){this.mSelected.shapeId[e.ShapeId]={selected:e.Selected}}else if(e.rowId&&!this.mSelected.rowId[e.rowId]){this.mSelected.rowId[e.rowId]={selected:e.Selected}}}else{if(e.ShapeId&&this.mSelected.shapeId[e.ShapeId]){delete this.mSelected.shapeId[e.ShapeId];this.mSelected.deSelectShapeId[e.ShapeId]={selected:e.Selected}}else if(e.ShapeId&&!this.mSelected.shapeId[e.ShapeId]){this.mSelected.deSelectShapeId[e.ShapeId]={selected:e.Selected}}else if(e.rowId&&this.mSelected.rowId[e.rowId]){delete this.mSelected.rowId[e.rowId];this.mSelected.deSelectRowId[e.rowId]={selected:e.Selected}}else if(e.rowId&&!this.mSelected.rowId[e.rowId]){this.mSelected.deSelectRowId[e.rowId]={selected:e.Selected}}}}.bind(this));if(e.length>0){var i=[];Object.keys(this.mSelected.deSelectShapeId).forEach(function(e){var t=jQuery("[data-sap-gantt-shape-id='"+e+"']").get(0),d=sap.ui.getCore().byId(t&&t.id);i.push(d&&d.getShapeUid())});d=i?i:d}this._fireSelectionChanged(d,true,true,false)};l.prototype.clearAllSelectedShapeIds=function(){this.mSelected.deSelectShapeId=this.mSelected.shapeId;this.mSelected.deSelectRowId=this.mSelected.rowId;this.mSelected.shapeId={};this.mSelected.rowId={};var e=this.allUid();this.mSelected.uid={};this._fireSelectionChanged(e,true,true,true)};l.prototype.getSelectedShapeIDS=function(){return Object.keys(this.mSelected.shapeId)};l.prototype.getSelectedRowIDS=function(){return Object.keys(this.mSelected.rowId)};l.prototype.getDeSelectedShapeIDS=function(){return Object.keys(this.mSelected.deSelectShapeId)};l.prototype.getDeSelectedRowIDS=function(){return Object.keys(this.mSelected.deSelectRowId)};l.prototype.updateShapeId=function(e,t){if(t){if(!this.mSelected.shapeId[e]){this.mSelected.shapeId[e]={selected:t}}if(this.mSelected.deSelectShapeId[e]){delete this.mSelected.deSelectShapeId[e]}}else{if(this.mSelected.shapeId[e]){delete this.mSelected.shapeId[e]}if(!this.mSelected.deSelectShapeId[e]){this.mSelected.deSelectShapeId[e]={selected:t}}}};l.prototype.clearDeselectionModelById=function(e){if(this.mSelected.deSelectShapeId[e]){delete this.mSelected.deSelectShapeId[e]}};l.prototype.getSelectedShapeDataByUid=function(e){return this.mSelected.uid[e]};l.prototype.attachSelectionChanged=function(e,t,d){this.attachEvent("selectionChanged",e,t,d)};l.prototype.detachSelectionChanged=function(e,t){this.detachEvent("selectionChanged",e,t)};l.prototype.fireSelectionChanged=function(e){this.fireEvent("selectionChanged",e);return this};return l},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/ShapeScheme", ["sap/ui/core/Element"],function(e){"use strict";var a=e.extend("sap.gantt.simple.ShapeScheme",{metadata:{library:"sap.gantt",properties:{key:{type:"string",defaultValue:null},primary:{type:"boolean",defaultValue:false},rowSpan:{type:"int",defaultValue:1}}}});return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/StockChart", ["sap/base/util/merge","./UtilizationChart","sap/ui/core/Core","sap/gantt/simple/StockChartPeriod"],function(e,t,i,r){"use strict";var o=t.extend("sap.gantt.simple.StockChart",{metadata:{library:"sap.gantt",properties:{showMiddleLine:{type:"boolean",defaultValue:true},relativeMiddleLinePoint:{type:"float",group:"Misc",defaultValue:50},minValue:{type:"float",group:"Misc",defaultValue:0},maxValue:{type:"float",group:"Misc",defaultValue:100},showCompactView:{type:"boolean",defaultValue:true}},defaultAggregation:"stockChartDimensions",aggregations:{stockChartDimensions:{type:"sap.gantt.simple.StockChartDimension",group:"Data"}}},renderer:{apiVersion:2}});o.prototype.applySettings=function(e,i){e=e||{};t.prototype.applySettings.call(this,e,i)};o.prototype.renderElement=function(e,t){var i=8;if(this.getStockChartDimensions().length===0){this._renderEmptyDomRefs(e,true);return}this._renderEmptyDomRefs(e,false);var r=this.getX(),o=this.getHeight(),a=this.getRowYCenter()-o/2,g=this.getWidth();var n={x:r,y:this.getShowCompactView()?a+i/2:a,width:g,height:this.getShowCompactView()?o-i:o};this._renderDefsDimensionClipPaths(e,n);this._renderMiddleLine(e,n);this._renderDimensionPaths(e,n);this._renderTooltips(e,n);e.close("g")};o.prototype._renderEmptyDomRefs=function(e,t){e.openStart("g",this);e.class("sapGanttStock");e.openEnd();if(t){e.close("g")}};o.prototype._renderDefsDimensionClipPaths=function(e,t){var i=this.getStockChartDimensions();e.openStart("defs").openEnd();for(var r=0;r<i.length;r++){e.openStart("clipPath",i[r].getId()+"-clipPath");e.openEnd();this.renderDimensionPath(e,i[r],t.y,t.height,null,i,true);e.close("clipPath")}e.close("defs")};o.prototype._createThresholdDefsPath=function(e,t){var i=e.getStockChartPeriods();var o=t.getStockChartPeriods();var a=[];var g={};for(var n=0;n<o.length;n++){var s=o[n];var h=s.getValue();if(h>t.getRelativePoint()&&e.getRelativePoint()>t.getRelativePoint()){this._createIntersectionThresholdPaths(o,i,s,t,a,n,true)}else if(h<t.getRelativePoint()&&e.getRelativePoint()<t.getRelativePoint()){this._createIntersectionThresholdPaths(o,i,s,t,a,n,false)}else if(h==t.getRelativePoint()){var l=s.getFrom();var m=s.getTo();if(o[n-1]&&o[n-1].getTo().getTime()==o[n].getFrom().getTime()){var T=this._getNearestThresholdPeriod(i,o[n].getFrom());if(T){var v=this._getCurrentThr(i,T);if(v&&v.getFrom().getTime()>l.getTime()&&T.getTo().getTime()!=v.getFrom().getTime()){var u=this._createSlantThresholdPath(T,v,o,n);g={from:s.getFrom(),to:s.getFrom(),value:u.y};a.push(new r(g))}}}if(e.getRelativePoint()>0&&o[n-1]&&o[n-1].getValue()>t.getRelativePoint()){this._createSlantPath(n,o,i,l,m,t,s,a,true)}else if(e.getRelativePoint()<0&&o[n-1]&&o[n-1].getValue()<t.getRelativePoint()){this._createSlantPath(n,o,i,l,m,t,s,a,true)}g={from:s.getFrom(),to:s.getTo(),value:s.getValue()};a.push(new r(g))}else{g={from:s.getFrom(),to:s.getTo(),value:t.getRelativePoint()};a.push(new r(g))}}return a};o.prototype._getNearestThresholdPeriod=function(e,t){var i=e.filter(function(e){return t.getTime()-e.getFrom().getTime()>0});return i[i.length-1]||null};o.prototype._getNextThresholdPeriod=function(e,t){var i=e.filter(function(e){return e.getFrom().getTime()-t.getTime()>0});return i[0]||null};o.prototype._getFilterThresholdPeriods=function(e,t,i){return e.filter(function(e,r){e._actualIndex=r;var o=t[i];var a=t[i+1];return e.getFrom().getTime()==o.getFrom().getTime()||a&&a.getFrom().getTime()!==o.getTo().getTime()&&e.getFrom().getTime()==o.getTo().getTime()||e.getFrom().getTime()>o.getFrom().getTime()&&e.getFrom().getTime()<o.getTo().getTime()})};o.prototype._getPeriodValue=function(e,t,i){var r;if(i){r=e.getValue()>t.getValue()?t.getValue():e.getValue()}else{r=e.getValue()<t.getValue()?t.getValue():e.getValue()}return r};o.prototype._createIntersectionThresholdPaths=function(e,t,i,o,a,g,n){var s=i.getFrom();var h=i.getTo();var l;var m={};if(s.getTime()!=h.getTime()){var T=this._getFilterThresholdPeriods(t,e,g);this._createSlantPath(g,e,t,s,h,o,i,a,false);if(T.length>0){for(var v=0;v<T.length;v++){if(v==0&&T[v].getFrom().getTime()>s.getTime()){l=this._getNearestThresholdPeriod(t,T[v].getFrom());var u=this._getCurrentThr(t,l);if(l.getTo().getTime()===u.getFrom().getTime()){if(l.getTo().getTime()===T[v].getFrom().getTime()){m={from:i.getFrom(),to:T[v].getFrom()};m.value=this._getPeriodValue(i,l,n)}else{var f=this._createSlantThresholdPath(l,T[v],e,g);if(l.getTo().getTime()>s.getTime()){m={from:this.getAxisTime().viewToTime(f.x),to:l.getTo(),value:l.getValue()}}else{m={from:i.getFrom(),to:i.getFrom(),value:l.getValue()<o.getRelativePoint()?-f.y:f.y}}}a.push(new r(m))}}if(T[v].getFrom().getTime()==s.getTime()){if(g!=0){if(T[v].getTo().getTime()>i.getTo().getTime()){m={from:i.getFrom(),to:i.getTo()};m.value=this._getPeriodValue(i,T[v],n)}else{m={from:i.getFrom(),to:T[v].getTo()};m.value=this._getPeriodValue(i,T[v],n)}}else{m={from:i.getFrom(),to:i.getTo()};m.value=this._getPeriodValue(i,T[v],n)}a.push(new r(m))}else if(T[v].getFrom().getTime()>s.getTime()){l=this._getNearestThresholdPeriod(t,T[v].getFrom());if(l.getTo().getTime()<s.getTime()){var f=this._createSlantThresholdPath(l,T[v],e,g);var p=this.getAxisTime().viewToTime(f.x);m={value:f.y};m.from=p;m.to=p;a.push(new r(m))}if(T[v].getTo().getTime()>i.getTo().getTime()){m={from:T[v].getFrom(),to:i.getTo()};if(i.getValue()>T[v].getValue()&&e[g+1]&&e[g+1].getValue()>T[v].getValue()){m.to=T[v].getTo()}if(e[g-1]&&s.getTime()!=e[g-1].getTo().getTime()&&l.getValue()<T[v].getValue()&&l.getTo().getTime()!=T[v].getFrom().getTime()){m.from=s}}else{m={from:T[v].getFrom(),to:T[v].getTo()}}m.value=this._getPeriodValue(i,T[v],n);a.push(new r(m))}}}else{if(!e[g-1]||s.getTime()==e[g-1].getTo().getTime()){l=this._getNearestThresholdPeriod(t,i.getFrom());var c=this._getNextThresholdPeriod(t,i.getFrom());if(l.getTo().getTime()<i.getFrom().getTime()&&c&&c.getFrom().getTime()>i.getTo().getTime()){var f=this._createSlantThresholdPath(l,c,e,g);var p=this.getAxisTime().viewToTime(f.x);m={value:f.y};m.from=i.getFrom();m.to=i.getFrom();a.push(new r(m));var f=this._createSlantThresholdPath(c,l,e,g);var p=this.getAxisTime().viewToTime(f.x);m={value:f.y};m.from=i.getTo();m.to=i.getTo();a.push(new r(m))}else{if(i.getFrom().getTime()>l.getFrom().getTime()){if(l.getTo().getTime()>i.getTo().getTime()){m={from:i.getFrom(),to:i.getTo()};m.value=this._getPeriodValue(i,l,n)}else if(l.getTo().getTime()>i.getFrom().getTime()){m={from:i.getFrom(),to:l.getTo()};m.value=this._getPeriodValue(i,l,n)}}a.push(new r(m))}}}}};o.prototype._createSlantThresholdPath=function(e,t,i,r){var o=e.getTo().getTime();var a=t.getFrom().getTime();var g=this.getAxisTime().timeToView(o);var n=this.getAxisTime().timeToView(a);var s=e.getValue();var h=t.getValue();var l=this.getAxisTime().timeToView(i[r].getTo().getTime());var m=i[r+1]?this.getAxisTime().timeToView(i[r+1].getFrom().getTime()):l;if(i[r].getFrom().getTime()>e.getTo().getTime()&&i[r].getFrom().getTime()<t.getFrom().getTime()){l=this.getAxisTime().timeToView(i[r].getFrom().getTime());m=i[r-1]?this.getAxisTime().timeToView(i[r-1].getTo().getTime()):l}var T={x:g,y:s};var v={x:n,y:h};var u={x:l,y:h};var f={x:m,y:s};return this._getIntersect(T,v,u,f)};o.prototype._getIntersect=function(e,t,i,r){var o=(e.x-t.x)*(i.y-r.y);var a=(e.y-t.y)*(i.x-r.x);var g=o-a;if(g==0){throw new Error("Number of intersection points is zero or infinity.")}var n=e.x*t.y-e.y*t.x;var s=i.x*r.y-i.y*r.x;var h=i.x-r.x;var l=e.x-t.x;var m=i.y-r.y;var T=e.y-t.y;var v=(n*h-l*s)/g;var u=(n*m-T*s)/g;var f={x:v,y:u};return f};o.prototype._getCurrentThr=function(e,t){var i,r=Number.MAX_SAFE_INTEGER/2;e.forEach(function(e){if(t.getFrom().getTime()!=e.getFrom().getTime()&&t.getTo().getTime()!=e.getTo().getTime()){var o=Math.abs(e.getFrom().getTime()-t.getTo().getTime());if(o<r){r=o;i=e}}});return i};o.prototype._createSlantPath=function(e,t,i,o,a,g,n,s,h){if(t[e-1]&&o.getTime()!=t[e-1].getTo().getTime()){var l=this._getNearestThresholdPeriod(i,o);var m=this._getCurrentThr(i,l);var T=t[e-1].getTo();var v=this.getAxisTime().timeToView(T);var u={x:v,y:t[e-1].getValue()};var f={x:this.getAxisTime().timeToView(t[e].getFrom().getTime()),y:t[e].getValue()};var p,c;if(l.getTo().getTime()>o.getTime()){p={x:this.getAxisTime().timeToView(t[e-1].getTo().getTime()),y:l.getValue()};c={x:this.getAxisTime().timeToView(l.getTo().getTime()),y:l.getValue()}}else{p={x:this.getAxisTime().timeToView(l.getTo().getTime()),y:l.getValue()};c={x:this.getAxisTime().timeToView(m.getFrom().getTime()),y:m.getValue()}}var d=this._getIntersect(u,f,p,c);var y=this.getAxisTime().viewToTime(d.x);var P={value:d.y};P.from=y;P.to=y;s.push(new r(P))}};o.prototype._renderMiddleLine=function(e,t){if(this.getShowMiddleLine()){var i=this._getMiddleLineY(t);e.openStart("path",this.getId()+"-middleLine");e.attr("d","M "+t.x+" "+i+" h "+t.width);e.class("sapGanttStockMiddleLine");e.openEnd().close("path")}};o.prototype._getMiddleLineY=function(e){var t=this._createTransform(this.getRelativeMiddleLinePoint());var i=e.height*(t/100);var r=e.y+e.height-i;return r};o.prototype._getClipPathIdOfDimension=function(e){return"url(#"+e.getId()+"-clipPath)"};o.prototype._renderDimensionPaths=function(e,t){var i=t.x,r=t.y,o=t.width,a=t.height;var g=[];var n=[];var s={};var h;var l=this.getStockChartDimensions();var m=l.filter(function(e){return e.getIsThreshold()!=true});var T=l.filter(function(e){return e.getIsThreshold()==true&&e.getRelativePoint()>m[0].getRelativePoint()}).sort(function(e,t){return t.getRelativePoint()-e.getRelativePoint()});var v=l.filter(function(e){return e.getIsThreshold()==true&&e.getRelativePoint()<m[0].getRelativePoint()}).sort(function(e,t){return e.getRelativePoint()-t.getRelativePoint()});if(m){e.openStart("g").openEnd();var u=m[0];g=[];n=[];for(var f=0;f<u.getStockChartPeriods().length;f++){var p=u.getStockChartPeriods()[f];if(p.getValue()<u.getRelativePoint()){g.push(p)}else{n.push(p)}}var c=a;if(g.length>0&&n.length>0){for(var d=0;d<2;d++){var y=this._createTransform(u.getRelativePoint());var P=a*(y/100);var V=c-P;if(d==1){if(v.length>0){h=v[0].getRemainCapacityColor()}else{h=u.getRemainCapacityColorNegative()}}else{if(T.length>0){h=T[0].getRemainCapacityColor()}else{h=u.getRemainCapacityColor()}}s={id:u.getId()+(d==1?"-scRectNegative":"-scRect"),x:i,y:d==1?r+V:r,width:o,height:d==1?a-V:a-(a-V),fill:h,"clip-path":this._getClipPathIdOfDimension(u)};this.renderRectangleWithAttributes(e,s)}}else if(n.length>0||g.length>0){var x=n.length>0?T:v;if(x.length>0){h=x[0].getRemainCapacityColor()}else{h=n.length>0?u.getRemainCapacityColor():u.getRemainCapacityColorNegative()}s={id:u.getId()+(n.length>0?"-scRect":"-scRectNegative"),x:i,y:r,width:o,height:a,fill:h,"clip-path":this._getClipPathIdOfDimension(u)};this.renderRectangleWithAttributes(e,s)}e.close("g")}if(T.length>0){for(var F=0;F<T.length;F++){e.openStart("g").openEnd();var _=T[F];s={id:_.getId()+"-scRect",x:i,y:r,width:o,height:a,fill:T[F+1]?T[F+1].getRemainCapacityColor():m[0].getRemainCapacityColor(),"clip-path":this._getClipPathIdOfDimension(_)};this.renderRectangleWithAttributes(e,s);e.close("g")}}if(v.length>0){for(var F=0;F<v.length;F++){e.openStart("g").openEnd();var C=v[F];s={id:C.getId()+"-scRect",x:i,y:r,width:o,height:a,fill:v[F+1]?v[F+1].getRemainCapacityColor():m[0].getRemainCapacityColor(),"clip-path":this._getClipPathIdOfDimension(C)};this.renderRectangleWithAttributes(e,s);e.close("g")}}if(m){e.openStart("g").openEnd();var u=m[0];this.renderDimensionPath(e,u,r,a,"scPath");e.close("g")}if(T.length>0){for(var F=0;F<T.length;F++){e.openStart("g").openEnd();var _=T[F];this.renderDimensionPath(e,_,r,a,"scPath");e.close("g")}}if(v.length>0){for(var F=0;F<v.length;F++){e.openStart("g").openEnd();var C=v[F];this.renderDimensionPath(e,C,r,a,"scPath");e.close("g")}}};o.prototype._renderTooltips=function(t,i){var r=i.y,o=i.height,a={};t.openStart("g");t.class("sc-tooltips").openEnd();var g=this.getAllDimensionPoints();g.forEach(function(i,g,n){var s=n[g+1]||i;var h=i.tooltip;var l=i.name!==s.name;if(l){h=i.tooltip+"\n"+s.tooltip}var m=this.toX(i.from),T=n.length-1===g,v=this.toX(T?s.to:s.from),u=Math.abs(v-m);if(u>0){var f={opacity:0,fillOpacity:0,strokeOpacity:0};var p=e({x:m,y:r,width:u,height:o},f);this.renderRectangleWithAttributes(t,p,h);a=p}}.bind(this));if(Object.keys(a).length!=0){a.x=i.x;a.width=0;a.class="stockChartTooltip";this.renderRectangleWithAttributes(t,a,"stockChartTooltip")}t.close("g")};o.prototype.getAllDimensionPoints=function(){var e=[];this.getStockChartDimensions().forEach(function(t){var i=t.getName();t.getStockChartPeriods().forEach(function(t,r,o){var a=t.getTooltip();if(!a){a=i+":"+t.getValue()}if(t.getFrom()!=t.getTo()){e.push({name:i,from:t.getFrom(),to:t.getFrom(),tooltip:a});e.push({name:i,from:t.getTo(),to:t.getTo(),tooltip:a})}else{e.push({name:i,from:t.getFrom(),to:t.getTo(),tooltip:a})}})});return e};o.prototype.renderDimensionPath=function(e,t,i,r,o,a,g){if(t.getIsThreshold()&&g){var n=a.filter(function(e){return e.getIsThreshold()!=true});var s=t.getStockChartPeriods().length>0?this._createThresholdDefsPath(t,n[0]):[]}var h=t.getIsThreshold()&&g?s:t.getStockChartPeriods();var l="";for(var m=0;m<h.length;m++){var T=m===0,v=m===h.length-1;var u=h[m];var f=this.toX(u.getFrom());var p=this.toX(u.getTo());var c=u.getValue();if(c>this.getMaxValue()){c=this.getMaxValue()}if(c<this.getMinValue()){c=this.getMinValue()}var d=i+r;var y=r*(this._createTransform(c)/100);var P=d-y;var V=this._createTransform(t.getIsThreshold()&&g?n[0].getRelativePoint():t.getRelativePoint());var x=r*(V/100);var F=d-x;if(g){l+=(T?" M "+f+" "+F:"")+" L "+f+" "+P+" L "+p+" "+P+(v?" L "+p+" "+F:"")}else{l+=(T?" M "+f+" "+P:"")+(T?"":" L "+f+" "+P)+" L "+p+" "+P}}if(o){e.openStart("path",t.getId()+"-"+o)}else{e.openStart("path")}e.attr("d",l);e.attr("fill","none");e.attr("stroke-width",t.getDimensionStrokeWidth());if(t.getDimensionStrokeDasharray()){e.attr("stroke-dasharray",t.getDimensionStrokeDasharray())}e.attr("stroke",t.getDimensionPathColor());e.class("sapGanttScDimensionPath");e.openEnd().close("path")};o.prototype._createTransform=function(e){var t={max:this.getMaxValue(),min:this.getMinValue()};var i={max:100,min:0};var r=(i.max-i.min)/(t.max-t.min);var o=(e-t.min)*r;return o};o.prototype.destroy=function(){t.prototype.destroy.apply(this,arguments)};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/StockChartDimension", ["sap/ui/core/Element","sap/ui/core/theming/Parameters"],function(t,e){"use strict";var a=t.extend("sap.gantt.simple.StockChartDimension",{metadata:{library:"sap.gantt",properties:{name:{type:"string"},dimensionPathColor:{type:"sap.gantt.ValueSVGPaintServer"},remainCapacityColor:{type:"sap.gantt.ValueSVGPaintServer"},remainCapacityColorNegative:{type:"sap.gantt.ValueSVGPaintServer"},relativePoint:{type:"float",defaultValue:0},isThreshold:{type:"boolean",defaultValue:false},dimensionStrokeDasharray:{type:"string"},dimensionStrokeWidth:{type:"float",defaultValue:2}},defaultAggregation:"stockChartPeriods",aggregations:{stockChartPeriods:{type:"sap.gantt.simple.StockChartPeriod"}}}});a.prototype.getDimensionPathColor=function(){return this.getProperty("dimensionPathColor")||e.get("sapUiChartNeutral")};a.prototype.getRemainCapacityColor=function(){return this.getProperty("remainCapacityColor")||e.get("sapUiChartNeutral")};a.prototype.getRemainCapacityColorNegative=function(){return this.getProperty("remainCapacityColorNegative")||e.get("sapUiChartBad")};return a},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/StockChartPeriod", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.simple.StockChartPeriod",{metadata:{library:"sap.gantt",properties:{from:{type:"object"},to:{type:"object"},value:{type:"float",group:"Data",defaultValue:0}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/UtilizationBarChart", ["sap/ui/thirdparty/jquery","./UtilizationChart","./BaseRectangle","sap/gantt/def/pattern/BackSlashPattern"],function(jQuery,t,e,r){"use strict";var o=t.extend("sap.gantt.simple.UtilizationBarChart",{metadata:{library:"sap.gantt",properties:{consumptionColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"lightgray"}},defaultAggregation:"periods",aggregations:{periods:{type:"sap.gantt.simple.UtilizationPeriod",group:"Data"}}},renderer:{apiVersion:2}});o.prototype.applySettings=function(e,r){e=e||{};e.remainCapacityColor=e.remainCapacityColor||"#fff";t.prototype.applySettings.call(this,e,r);this._createDefaultDefs()};o.prototype.renderElement=function(t,e){t.openStart("g",this);t.class("sapGanttUtilizationBar");t.openEnd();var r=this.getX(),o=this.getHeight(),n=this.getRowYCenter()-o/2,i=this.getWidth();var a={x:r,y:n,width:i,height:o};this.renderBackgroundDefs(t);this.renderUBCBackground(t,a);var s=this.filterPeriods();if(s.length>0){this._iMaxAllowedSupply=this._getMaxAllowedSupply(s);this.renderOverConsumptionPolygon(t,a,s);this.renderRemainConsumptionPolygon(t,a,s);this.renderConsumptionPolygon(t,a,s);this.renderConsumptionPath(t,a,s);this.renderTooltips(t,a,s)}t.close("g")};o.prototype.filterPeriods=function(){var t=this.getPeriods();var e=this.getGanttChartBase(),r=e.getRenderedTimeRange(),o=r[0],n=r[1];return t.filter(function(t,e,r){var i=e===0||e===r.length-1;if(i){return true}else{return t.getFrom()>=o&&t.getFrom()<=n}})};o.prototype.renderUBCBackground=function(t,e){var r=this.getFill();if(!r){r="url(#"+this.getId()+"-defaultBgPattern)"}var o=jQuery.extend({id:this.getId()+"-ubcBg",fill:r,"fill-opacity":this.getFillOpacity()},e);this.renderRectangleWithAttributes(t,o)};o.prototype.renderOverConsumptionPolygon=function(t,e,r){t.openStart("polygon",this.getId()+"-ubcOCP");t.attr("points",this.getPolygonPoints(e,function(t,r){var o=e.height,n=e.y+o;return n-t.getDemand()/r*o},r));t.attr("fill",this.getOverConsumptionColor());t.openEnd();t.close("polygon")};o.prototype.renderConsumptionPath=function(t,e,r){t.openStart("path",this.getId()+"-ubcPath");t.attr("d",this.getDemandPathD(e,r));t.attr("fill","none");t.attr("stroke",this.getStroke()||"#000");t.attr("stroke-width",this.getStrokeWidth()||2);t.attr("stroke-dasharray",this.getStrokeDasharray()||"0,0");t.openEnd();t.close("path")};o.prototype.renderRemainConsumptionPolygon=function(t,e,r){t.openStart("polygon",this.getId()+"-ubcRCP");t.attr("points",this.getPolygonPoints(e,function(t,r){var o=e.height,n=e.y+o;return n-t.getSupply()/r*o},r));t.attr("fill",this.getRemainCapacityColor());t.openEnd();t.close("polygon")};o.prototype.renderConsumptionPolygon=function(t,e,r){t.openStart("polygon",this.getId()+"-ubcCP");t.attr("points",this.getPolygonPoints(e,function(t,r){var o=e.height,n=e.y+o;var i=Math.min(t.getDemand(),t.getSupply());return n-i/r*o},r));t.attr("fill",this.getConsumptionColor());t.openEnd();t.close("polygon")};o.prototype.renderTooltips=function(t,r,o){var n=[];t.openStart("g");t.class("ubc-tooltips").openEnd();for(var i=0;i<o.length;i++){var a=o[i];var s=o[i+1];if(s){var l=this.toX(a.getFrom()),p=this.toX(s.getFrom());n.push(new e({x:parseFloat(l),y:r.y,height:r.height,width:Math.abs(p-l),fill:"transparent",tooltip:a.getTooltip()}).setProperty("childElement",true))}}n.forEach(function(e){e.renderElement(t,e)});t.close("g")};o.prototype._getMaxAllowedSupply=function(t){var e=Math.max.apply(null,t.map(function(t){return t.getSupply()}));var r=e*this.getOverConsumptionMargin()/100;return e+r};o.prototype.getPolygonPoints=function(t,e,r){var o=t.y+t.height;var n=function(t,e){return[t,e].join(",")+" "};var i="";for(var a=0;a<r.length;a++){var s=r[a],l=a===0,p=a===r.length-1,g=r[p?r.length-1:a+1];var h=this.toX(s.getFrom()),u=this.toX(g.getFrom());if(l){i+=n(h,o)}var d=e(s,this._iMaxAllowedSupply);d=d.toFixed(1);i+=n(h,d);i+=n(u,d);if(p){i+=n(h,d);i+=n(h,o)}}return i};o.prototype.getDemandPathD=function(t,e){var r="";for(var o=0;o<e.length;o++){var n=e[o],i=o===e.length-1,a=e[i?e.length-1:o+1];var s=this.toX(n.getFrom()),l=this.toX(a.getFrom());var p=this.toY(n.getDemand(),t),g=this.toY(a.getDemand(),t);r+=" M "+s+" "+p+" L "+l+" "+p;r+=" M "+l+" "+p+" L "+l+" "+g}return r};o.prototype.toY=function(t,e){var r=e.y,o=e.height,n=r+o;var i=n-t/this._iMaxAllowedSupply*o;i=i<r?r:i;return parseFloat(i.toFixed(1))};o.prototype._createDefaultDefs=function(){if(this.getFill()){return}this.mDefaultDefs=new sap.gantt.def.SvgDefs({defs:[new r({id:this.getId()+"-defaultBgPattern",tileWidth:5,tileHeight:9,backgroundColor:"#fff",stroke:"#ececec",strokeWidth:1})]})};o.prototype.renderBackgroundDefs=function(t){if(this.getFill()==null&&this.mDefaultDefs){t.unsafeHtml(this.mDefaultDefs.getDefString())}};return o},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/UtilizationChart", ["./BaseShape","./BaseRectangle","sap/gantt/misc/Format","sap/ui/core/Core"],function(t,e,i,a){"use strict";var r=t.extend("sap.gantt.simple.UtilizationChart",{metadata:{library:"sap.gantt",abstract:true,properties:{height:{type:"sap.gantt.SVGLength",defaultValue:"inherit"},overConsumptionMargin:{type:"float",defaultValue:25},overConsumptionColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"red"},remainCapacityColor:{type:"sap.gantt.ValueSVGPaintServer",defaultValue:"lightgray"}}},renderer:{apiVersion:2}});r.prototype.getX=function(){var t=a.getConfiguration().getRTL();return t?this.getXByTime(this.getEndTime()):this.getXByTime(this.getTime())};r.prototype.getWidth=function(){var t=a.getConfiguration().getRTL();return t?Math.abs(this.getXByTime(this.getTime())-this.getXByTime(this.getEndTime())):Math.abs(this.getXByTime(this.getEndTime())-this.getXByTime(this.getTime()))};r.prototype.getHeight=function(){return e.prototype.getHeight.apply(this)};r.prototype.toX=function(t){return this.getAxisTime().timeToView(i.abapTimestampToDate(t))};r.prototype.renderRectangleWithAttributes=function(t,e,i){t.openStart("rect");Object.keys(e).forEach(function(i){t.attr(i,e[i])});t.openEnd();if(i){t.openStart("title").openEnd();t.text(i,true);t.close("title")}t.close("rect")};return r},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/UtilizationDimension", ["sap/ui/core/Element"],function(e){"use strict";var t=e.extend("sap.gantt.simple.UtilizationDimension",{metadata:{library:"sap.gantt",properties:{name:{type:"string"},dimensionColor:{type:"sap.gantt.ValueSVGPaintServer"}},defaultAggregation:"periods",aggregations:{periods:{type:"sap.gantt.simple.UtilizationPeriod"}}}});return t},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/UtilizationLineChart", ["sap/ui/thirdparty/jquery","sap/ui/core/Core","./UtilizationChart","sap/gantt/def/pattern/BackSlashPattern"],function(jQuery,t,e,i){"use strict";var n=e.extend("sap.gantt.simple.UtilizationLineChart",{metadata:{library:"sap.gantt",properties:{showMiddleLine:{type:"boolean",defaultValue:true}},defaultAggregation:"dimensions",aggregations:{dimensions:{type:"sap.gantt.simple.UtilizationDimension",group:"Data"}},associations:{overConsumptionPattern:{type:"sap.gantt.def.DefBase",altTypes:["string"],multiple:false,group:"Appearance"}}},renderer:{apiVersion:2}});n.prototype.applySettings=function(t,i){t=t||{};e.prototype.applySettings.call(this,t,i);this._createDefaultDefs()};n.prototype.renderElement=function(t,e){if(this.getDimensions().length===0){this.renderEmptyDomRefs(t,true);return}this.renderEmptyDomRefs(t,false);var i=this.getX(),n=this.getHeight(),r=this.getRowYCenter()-n/2,o=this.getWidth();var s={x:i,y:r,width:o,height:n};this.renderDimensionClipPaths(t,s);this.renderDefaultDefs(t);this.renderULCBackground(t,s);this.renderMiddleLine(t,s);this.renderOverConsumptionBackground(t,s);this.renderOverConsumptionClipPath(t,s);this.renderDimensionPaths(t,s);this.renderTooltips(t,s);t.close("g")};n.prototype.renderEmptyDomRefs=function(t,e){t.openStart("g",this);t.class("sapGanttUtilizationLine");t.openEnd();if(e){t.close("g")}};n.prototype.renderDimensionClipPaths=function(t,e){var i=this.getDimensions();t.openStart("defs").openEnd();for(var n=0;n<i.length;n++){t.openStart("clipPath",i[n].getId()+"-clipPath");t.openEnd();this.renderDimensionPath(t,i[n],e.y,e.height);t.close("clipPath")}t.close("defs")};n.prototype.renderULCBackground=function(t,e){var i=jQuery.extend({id:this.getId()+"-ulcBg",fill:this.getFill()||"transparent",stroke:"none"},true,e);this.renderRectangleWithAttributes(t,i)};n.prototype.getClipPathIdOfDimension=function(t){return"url(#"+t.getId()+"-clipPath)"};n.prototype.renderOverConsumptionBackground=function(t,e){var i=jQuery.extend({id:this.getId()+"-ulcOverConsumptionBg",fill:this._getOverageFillPattern()},true,e);i.height=this.getThresholdHeight(e.height);this.renderRectangleWithAttributes(t,i)};n.prototype.renderOverConsumptionClipPath=function(t,e){var i=jQuery.extend({},true,e);i.height=this.getThresholdHeight(e.height);var n=this.getDimensions();for(var r=0;r<n.length;r++){var o=jQuery.extend({"clip-path":this.getClipPathIdOfDimension(n[r]),fill:this.getOverConsumptionColor()},true,i);this.renderRectangleWithAttributes(t,o)}};n.prototype._getOverageFillPattern=function(){var e=this.getOverConsumptionPattern();if(e){e=t.byId(e).getRefString()}else{e="url(#"+this.getId()+"-defaultPattern"+")"}return e};n.prototype.getThresholdHeight=function(t){return this.getOverConsumptionMargin()*t/(100+this.getOverConsumptionMargin())};n.prototype.renderMiddleLine=function(t,e){if(this.getShowMiddleLine()){var i=this.getMiddleLineY(e);t.openStart("path",this.getId()+"-middleLine");t.attr("d","M "+e.x+" "+i+" h "+e.width);t.class("sapGanttUtilizationMiddleLine");t.openEnd().close("path")}};n.prototype.getMiddleLineY=function(t){var e=this.getThresholdHeight(t.height);return t.y+e+(t.height-e)/2};n.prototype.renderDimensionPaths=function(t,e){var i=e.x,n=this.getThresholdHeight(e.height),r=e.y,o=e.width,s=e.height;var a=this.getDimensions();for(var h=0;h<a.length;h++){t.openStart("g").openEnd();var p=a[h];var l={id:p.getId()+"-ulcRect",x:i,y:r+n,width:o,height:s-n,fill:this.getRemainCapacityColor(),"fill-opacity":.5,"stroke-opacity":.5,"clip-path":this.getClipPathIdOfDimension(p)};this.renderRectangleWithAttributes(t,l);this.renderDimensionPath(t,p,r,s,"ulcPath");t.close("g")}};n.prototype.renderTooltips=function(t,e){var i=e.y,n=e.height;t.openStart("g");t.class("ulc-tooltips").openEnd();var r=this.getAllDimensionPoints();r.forEach(function(e,r,o){var s=o[r+1]||e;var a=e.tooltip;var h=e.name!==s.name;if(h){a=e.tooltip+"\n"+s.tooltip}var p=this.toX(e.from),l=o.length-1===r,g=this.toX(l?s.to:s.from),d=Math.abs(g-p);if(d>0){var f={opacity:0,fillOpacity:0,strokeOpacity:0};var u=jQuery.extend({x:p,y:i,width:d,height:n},f);this.renderRectangleWithAttributes(t,u,a)}}.bind(this));t.close("g")};n.prototype.getAllDimensionPoints=function(){var t=[];this.getDimensions().forEach(function(e){var i=e.getName();e.getPeriods().forEach(function(e,n,r){var o=e.getTooltip();if(!o){o=i+":"+e.getValue()}t.push({name:i,from:e.getFrom(),to:e.getTo(),tooltip:o})})});t.sort(function(t,e){return t.from-e.from});return t};n.prototype.renderDimensionPath=function(t,e,i,n,r){var o=e.getPeriods();var s="";for(var a=0;a<o.length;a++){var h=a===0,p=a===o.length-1;var l=o[a];var g=this.toX(l.getFrom());var d=this.toX(l.getTo());var f=l.getValue();var u=this.getOverConsumptionMargin();if(f>100+u){f=100+u}var c=i+n;var m=n*(f/(100+u));var v=c-m;s+=(h?" M "+g+" "+c:"")+" L "+g+" "+v+" L "+d+" "+v+(p?" L "+d+" "+c:"")}if(r){t.openStart("path",e.getId()+"-"+r)}else{t.openStart("path")}t.attr("d",s);t.attr("fill","none");t.attr("stroke-width",2);t.attr("stroke",e.getDimensionColor());t.class("sapGanttUlcDimensionPath");t.openEnd().close("path")};n.prototype._createDefaultDefs=function(){if(this.getOverConsumptionPattern()){return}this.mDefaultDefs=new sap.gantt.def.SvgDefs({defs:[new i({id:this.getId()+"-defaultPattern",tileWidth:5,tileHeight:9,backgroundColor:"#fff",stroke:"#ececec",strokeWidth:1})]})};n.prototype.renderDefaultDefs=function(t){if(this.mDefaultDefs){t.unsafeHtml(this.mDefaultDefs.getDefString())}};n.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);if(this.mDefaultDefs){this.mDefaultDefs.destroy()}};return n},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/UtilizationPeriod", ["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.gantt.simple.UtilizationPeriod",{metadata:{library:"sap.gantt",properties:{from:{type:"object"},to:{type:"object"},value:{type:"float",group:"Data",defaultValue:0},supply:{type:"float",group:"Data",defaultValue:0},demand:{type:"float",group:"Data",defaultValue:0}}}});return e},true);
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/shapes/Shape", ["sap/gantt/simple/BaseShape","sap/ui/thirdparty/jquery","sap/gantt/misc/Format","sap/ui/core/theming/Parameters"],function(e,jQuery,t,r){"use strict";var i=12;var o=e.extend("sap.gantt.simple.shapes.Shape",{metadata:{library:"sap.gantt",properties:{color:{type:"sap.gantt.PaletteColor",defaultValue:"sapUiLegend6"},height:{type:"sap.gantt.SVGLength",defaultValue:"auto"},width:{type:"sap.gantt.SVGLength",defaultValue:"auto"},startX:{type:"sap.gantt.SVGLength",defaultValue:"auto"},fill:{type:"sap.gantt.ValueSVGPaintServer"},fillOpacity:{type:"float",defaultValue:1},stroke:{type:"sap.gantt.ValueSVGPaintServer"},opacity:{type:"float",defaultValue:1},selectable:{type:"boolean",defaultValue:true},hoverable:{type:"boolean",defaultValue:true}}},renderer:{apiVersion:2}});o.prototype.init=function(){e.prototype.init.call(this);this._bHover=false;this._bIgnoreHover=false};o.prototype.getSelectable=function(){return true};o.prototype.getHoverable=function(){return true};o.prototype.getRowPadding=function(){var e=this.getHeight();if(e==="auto"||e==="inherit"){return i}else{return 0}};o.prototype.getPixelHeight=function(){var e=this.getHeight();if(e==="auto"||e==="inherit"){return this._iBaseRowHeight||0}return Number(e)};o.prototype.getTranslatedColor=function(){return r.get(this.getColor())};o.prototype.getHoverBackgroundColor=function(){if(sap.ui.getCore().getConfiguration().getTheme().indexOf("sap_horizon")>-1){return r.get("sapPrimary1")}else{return r.get("sapUiButtonHoverBackground")}};o.prototype.getHoverColor=function(){if(sap.ui.getCore().getConfiguration().getTheme().indexOf("sap_horizon")>-1){return r.get("sapPrimary6")}else{return r.get("sapUiButtonHoverBorderColor")}};o.prototype.getSelectedColor=function(){if(sap.ui.getCore().getConfiguration().getTheme().indexOf("sap_horizon")>-1){return r.get("sapPrimary2")}else{return r.get("sapUiButtonActiveBackground")}};o.prototype.getPixelWidth=function(){var e=this.getWidth();if(e!=="auto"){return Number(e)}var r=this.getAxisTime();if(!r){return 0}var i=r.timeToView(t.abapTimestampToDate(this.getTime())),o=r.timeToView(t.abapTimestampToDate(this.getEndTime()));if(jQuery.isNumeric(i)&&jQuery.isNumeric(o)){return Math.abs(o-i)}else{return 0}};o.prototype.getXStart=function(){var e=this.getProperty("startX");if(e!=="auto"){return Number(e)}var r=this.getAxisTime();if(!r){return 0}var i=sap.ui.getCore().getConfiguration().getRTL();return Number(r.timeToView(t.abapTimestampToDate(i?this.getEndTime()||this.getTime():this.getTime())))};o.prototype.getXEnd=function(){if(this.getProperty("startX")!=="auto"){return this.getXStart()+this.getPixelWidth()}var e=this.getAxisTime();if(!e){return 0}var r=sap.ui.getCore().getConfiguration().getRTL();return Number(e.timeToView(t.abapTimestampToDate(r?this.getTime()||this.getEndTime():this.getEndTime())))};o.prototype.renderElement=function(e){throw new Error("This function must be overridden in implementing classes.")};o.prototype.renderContent=function(e){throw new Error("This function must be overridden in implementing classes.")};o.prototype.generateArcRadius=function(e,t){return Math.min(3,Math.min(e,t))};o.prototype.getHoverState=function(){return this._bHover};o.prototype.hoverStateChange=function(e){if(this.getHoverState()!==e&&!this._bIgnoreHover){this._bHover=e;this.rerenderShape()}};o.prototype.setSelected=function(e){this.setProperty("selected",e,true);if(this.getHoverState()){this._bHover=false;this._bIgnoreHover=true}this.rerenderShape()};o.prototype.onmouseover=function(t){if(!this.getHoverable()){return}e.prototype.onmouseover.call(this,t);this.hoverStateChange(true)};o.prototype.onmouseout=function(t){if(!this.getHoverable()){return}e.prototype.onmouseout.call(this,t);this._bIgnoreHover=false;this.hoverStateChange(false)};o.prototype.rerenderShape=function(){var e=this.getDomRef();if(e){var t=sap.ui.getCore().createRenderManager();this.renderContent(t);t.flush(e);t.destroy()}else{this.invalidate()}};return o});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.predefine("sap/gantt/simple/shapes/Task", ["./Shape","sap/gantt/library","sap/gantt/simple/InnerGanttChartRenderer","sap/gantt/simple/RenderUtils"],function(t,e,r,a){"use strict";var i=e.simple.shapes.TaskType;var n=e.simple.shapes.ShapeAlignment;var s=10;function o(t){var e=Object.assign({},t);e.iStartX-=1;e.iEndX+=1;e.iHeight+=2;return e}var l=t.extend("sap.gantt.simple.shapes.Task",{metadata:{library:"sap.gantt",properties:{type:{type:"sap.gantt.simple.shapes.TaskType",defaultValue:i.Normal},utilizationDown:{type:"boolean",defaultValue:true},title:{type:"string",defaultValue:null},alignShape:{type:"sap.gantt.simple.shapes.ShapeAlignment",defaultValue:n.Middle}}},renderer:{apiVersion:2}});l.prototype._generateRectD=function(t){var e="";e+="M "+t.iStartX+" "+t.iAlignShapeY;var r=t.iHeight/2,a=t.iEndX-t.iStartX,i=this.generateArcRadius(r,a);e+=" l 0 "+(-r+i);e+=" a "+i+" "+i+" 0 0 1 "+i+" "+-i;a-=i;var n=this.generateArcRadius(a-i,r);a-=n;e+=" l "+a+" 0";e+=" a "+n+" "+n+" 0 0 1 "+n+" "+n;e+=" l 0 "+(2*r-n-i);e+=" a "+n+" "+n+" 0 0 1 "+-n+" "+n;e+=" l "+-a+" 0";e+=" a "+i+" "+i+" 0 0 1 "+-i+" "+-i;e+=" Z";return e};l.prototype._renderOverlappingRectangle=function(t,e){var r=this._generateRectD(o(e));t.openStart("path");t.class("sapGanttShapeOverlappingBorder");t.attr("d",r);t.openEnd().close("path")};l.prototype.renderNoramlTask=function(t,e){this._renderOverlappingRectangle(t,e);var r=this._generateRectD(e);t.openStart("path");t.attr("d",r);if(this.getHoverState()){t.attr("fill",this.getHoverBackgroundColor());t.attr("stroke-width",1);t.attr("stroke",this.getHoverColor())}else if(this.getSelected()){t.attr("fill",this.getSelectedColor())}else{t.attr("fill",this.getTranslatedColor())}t.openEnd();a.renderTooltip(t,this);if(this.getShowAnimation()){a.renderElementAnimation(t,this)}t.close("path")};l.prototype._generateSummaryD=function(t,e){var r="",a=e?7:5;r+="M "+t.iStartX+" "+t.iAlignShapeY;var i=t.iHeight/2,n=t.iEndX-t.iStartX,s=this.generateArcRadius(i,n);r+=" l 0 "+(-i+s);r+=" a "+s+" "+s+" 0 0 1 "+s+" "+-s;n-=s;var o=this.generateArcRadius(n-s,i);n-=o;r+=" l "+n+" 0";r+=" a "+o+" "+o+" 0 0 1 "+o+" "+o;r+=" l 0 "+(2*i-o-3);r+=" a 3 5 0 0 1 -"+a+" 0";r+=" l 0 "+(-2*i+o+a);r+=" l "+(-n+2*a-s-o)+" 0";r+=" l 0 "+(2*i-s-a);r+=" a 3 5 0 0 1 -"+a+" 0";r+=" Z";return r};l.prototype.renderSummaryTaskExpanded=function(t,e){if(Math.abs(e.iEndX-e.iStartX)<=s){this.renderNoramlTask(t,e)}else{var r;if(!e.bFromCollapsed){r=this._generateSummaryD(o(e),true);t.openStart("path");t.class("sapGanttShapeOverlappingBorder");t.attr("d",r);t.openEnd().close("path")}r=this._generateSummaryD(e);t.openStart("path");t.attr("d",r);if(this.getHoverState()){t.attr("fill",this.getHoverBackgroundColor());t.attr("stroke-width",1);t.attr("stroke",this.getHoverColor())}else if(this.getSelected()){t.attr("fill",this.getSelectedColor());if(e.bFromCollapsed){t.attr("stroke-width",1.0001);t.attr("stroke","white");t.attr("shape-rendering","crispEdges")}}else{t.attr("fill",this.getTranslatedColor())}t.openEnd();a.renderTooltip(t,this);if(this.getShowAnimation()){a.renderElementAnimation(t,this)}t.close("path")}};l.prototype.renderSummaryTaskCollapsed=function(t,e){if(Math.abs(e.iEndX-e.iStartX)<=s){this.renderNoramlTask(t,e)}else{this._renderOverlappingRectangle(t,e);var r=this._generateRectD(e);t.openStart("path");t.attr("d",r);if(this.getHoverState()){t.attr("fill",this.getHoverBackgroundColor());t.attr("stroke-width",1);t.attr("stroke",this.getHoverColor())}else if(this.getSelected()){t.attr("fill",this.getSelectedColor())}else{t.attr("fill",this.getTranslatedColor());t.attr("fill-opacity",.7)}t.openEnd();a.renderTooltip(t,this);if(this.getShowAnimation()){a.renderElementAnimation(t,this)}t.close("path");this.renderSummaryTaskExpanded(t,Object.assign({},e,{bFromCollapsed:true}))}};l.prototype.renderErrorTask=function(t,e){this._renderOverlappingRectangle(t,e);var i=this.getId()+"-mask",n=this._generateRectD(e),s,o,l;if(this.getGanttChartBase()){l=this.getGanttChartBase().getId()+"-helperDef-linePattern"}else{r.renderHelperDefs(t,this.getId());l=this.getId()+"-helperDef-linePattern"}if(this.getHoverState()){s=this.getHoverColor();o=this.getHoverBackgroundColor()}else if(this.getSelected()){s=o=this.getSelectedColor()}else{s=o=this.getTranslatedColor()}t.openStart("mask",i);t.openEnd();t.openStart("path");t.attr("d",n);t.attr("stroke","white");t.attr("stroke-width",1);t.attr("fill","url(#"+l+")");t.openEnd().close("path");t.close("mask");t.openStart("path");t.attr("d",n);t.attr("stroke",s);t.attr("stroke-width",1);t.attr("fill",o);t.attr("mask","url(#"+i+")");t.openEnd();a.renderTooltip(t,this);if(this.getShowAnimation()){a.renderElementAnimation(t,this)}t.close("path")};l.prototype.renderContent=function(t){var e={iHeight:this.getPixelHeight()-this.getRowPadding(),iStartX:this.getXStart(),iEndX:this.getXEnd(),iAlignShapeY:this.getRowYCenter()};switch(this.getType()){case i.Normal:this.renderNoramlTask(t,e);break;case i.Error:this.renderErrorTask(t,e);break;case i.SummaryCollapsed:this._generateAlignShapeX(e);this.renderSummaryTaskCollapsed(t,e);break;case i.SummaryExpanded:this._generateAlignShapeX(e);this.renderSummaryTaskExpanded(t,e);break;default:throw new Error("Unknown type of Task: "+this.getType())}};l.prototype.renderElement=function(t){this.writeElementData(t,"g",true);t.attr("pointer-events","bounding-box");t.openEnd();this.renderContent(t);t.close("g")};l.prototype._generateAlignShapeX=function(t){if(this._iBaseRowHeight!=undefined){if(this.getAlignShape()==n.Top){t.iAlignShapeY=this.getRowYCenter()-this._iBaseRowHeight/2+t.iHeight/2}else if(this.getAlignShape()==n.Bottom){t.iAlignShapeY=this.getRowYCenter()+this._iBaseRowHeight/2-t.iHeight/2}}};return l});
sap.ui.predefine("sap/gantt/utils/GanttCustomisationUtils", ["sap/ui/model/json/JSONModel","sap/m/Button","sap/m/Dialog","sap/ui/comp/smartform/SmartForm","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/m/SelectDialog","sap/m/CustomListItem","sap/m/Input","sap/ui/core/theming/Parameters","sap/ui/core/Icon","sap/m/HBox","sap/m/Text","sap/m/DateRangeSelection","sap/gantt/misc/Format","sap/gantt/library"],function(e,t,a,n,o,r,l,s,i,m,g,p,T,c,u,_){"use strict";var S=sap.ui.getCore().getLibraryResourceBundle("sap.gantt");var d=_.palette;var C=d.SemanticColors.concat(d.LegendColors).concat(d.AccentColors);var h=function(){var t=C.map(function(e){return{color:e}});return new e({colors:t})};var E={dialogBox:function(e,_){return new Promise(function(d,E){var w="";if(_){w=new c({dateValue:u.abapTimestampToDate(e.getTimeStamp()),secondDateValue:u.abapTimestampToDate(e.getEndTimeStamp()),minDate:new Date(1900,0,1),maxDate:new Date(2100,12,31)})}else{w=new i({placeholder:S.getText("TXT_CH_AL_PH_TIMESTAMP"),value:e.getTimeStamp()})}var A=new n({editable:true,useHorizontalLayout:false,groups:[new o({groupElements:[new r({label:S.getText("TXT_CH_AL_STROKE"),elements:[new i({type:"Text",value:{path:"colors",formatter:function(t){t=C;for(var a=0;a<t.length;a++){if(e.getStroke()===m.get(t[a])){return t[a]}}}},placeholder:S.getText("TXT_CH_AL_PH_STROKE_VALUE"),showValueHelp:true,valueHelpOnly:true,valueHelpRequest:function(){if(this.oSelectDialog){this.oSelectDialog.open();return}this.oSelectDialog=new l({title:S.getText("TXT_CH_AL_DIALOG_COLOR_SELECTOR"),confirm:function(e){A.getGroups()[0].getGroupElements()[0].getElements()[0].setValue(e.getParameter("selectedItem").getContent()[0].getItems()[1].getText())},items:{growing:false,path:"colors>/colors",template:new s({content:[new p({alignItems:"Center",items:[new g({src:"sap-icon://color-fill",color:{path:"colors>color",formatter:function(e){return m.get(e)}}}).addStyleClass("sapUiTinyMargin"),new T({text:{path:"colors>color",formatter:function(e){return e}}})]})]}),templateShareable:false,showSecondaryValues:true}});this.oSelectDialog.setModel(h(),"colors");this.oSelectDialog.open()}})]}),new r({label:S.getText("TXT_CH_AL_STROKE_DASHARRAY"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_STROKE_DASHARRAY"),value:e.getStrokeDasharray()})]}),new r({label:S.getText("TXT_CH_AL_STROKE_OPACITY"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_STROKE_OPACITY"),value:e.getStrokeOpacity()})]}),new r({label:S.getText("TXT_CH_AL_TIMESTAMP"),elements:[w]}),new r({label:S.getText("TXT_CH_AL_DESCRIPTION"),elements:[new i({placeholder:S.getText("TXT_CH_AL_PH_DESCRIPTION"),value:e.getDescription()})]})]})]});A.getGroups()[0].getGroupElements()[0].getElements()[0].setModel(h());var D=new t({text:S.getText("SAVE_BUTTON"),type:"Emphasized"}),f=new t({text:S.getText("CANCEL_BUTTON")});var L=new a({title:_?S.getText("TXT_CH_DL_DIALOG_TITLE"):S.getText("TXT_CH_AL_DIALOG_TITLE"),buttons:[D,f],content:[A]});f.attachPress(function(e){L.close()});D.attachPress(function(t){var a=L.getContent()[0].getGroups()[0].getGroupElements(),n={newChange:{stroke:m.get(a[0].getElements()[0].getValue()),strokeDasharray:a[1].getElements()[0].getValue(),strokeOpacity:parseFloat(a[2].getElements()[0].getValue()),description:a[4].getElements()[0].getValue()},oldChange:{stroke:e.getStroke(),strokeDasharray:e.getStrokeDasharray(),strokeOpacity:e.getStrokeOpacity(),description:e.getDescription()}};if(_){n.newChange["timeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getDateValue());n.newChange["endTimeStamp"]=u.dateToAbapTimestamp(a[3].getElements()[0].getSecondDateValue());n.oldChange["timeStamp"]=e.getTimeStamp();n.oldChange["endTimeStamp"]=e.getEndTimeStamp()}else{n.newChange["timeStamp"]=a[3].getElements()[0].getValue();n.oldChange["timeStamp"]=e.getTimeStamp()}L.close();d(n)});L.open()})},designTimeSettings:function(e,t){return{icon:"sap-icon://edit",name:S.getText(e),isEnabled:true,handler:t}}};return E},true);
sap.ui.predefine("sap/gantt/utils/GanttFlexibilityUtils", [],function(){"use strict";var e={fnCustomisationChangeHandler:function(e){return{changeHandler:{applyChange:function(e,t,n){var r=n.modifier,a=e.getContent()["newChange"],o=e.getContent()["oldChange"];e.setRevertData(o);for(var i in a){r.setPropertyBindingOrProperty(t,i,a[i])}return true},revertChange:function(e,t,n){var r=n.modifier;var a=e.getRevertData();for(var o in a){r.setPropertyBindingOrProperty(t,o,a[o])}e.resetRevertData();return},completeChangeContent:function(e,t,n){return},getCondenserInfo:function(t){return{affectedControl:t.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:e}}},layers:{CUSTOMER_BASE:true,CUSTOMER:true}}},fnChangeHandler:function(e){return{changeHandler:{applyChange:function(e,t,n){var r=n.modifier,a=e.getContent(),o=a["propertyName"],i=a["newValue"],u=a["oldValue"];e.setRevertData(u);r.setPropertyBindingOrProperty(t,o,i);return true},revertChange:function(e,t,n){var r=n.modifier;var a=e.getRevertData();var o=e.getContent(),i=o["propertyName"];r.setPropertyBindingOrProperty(t,i,a);e.resetRevertData();return true},completeChangeContent:function(e,t,n){return},getCondenserInfo:function(t){return{affectedControl:t.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:e}}},layers:{USER:true}}}};return e},true);
sap.ui.require.preload({
	"sap/gantt/legend/ListLegend.js":function(){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.gantt.legend=sap.gantt.legend||{};sap.gantt.legend.ListLegendItemCheckbox={NoShow:"noShow",Checked:"checked",Unchecked:"unchecked"};sap.ui.define(["./LegendBase","sap/m/CheckBox","sap/gantt/drawer/Legend"],function(e,t,a){"use strict";var n=e.extend("sap.gantt.legend.ListLegend",{metadata:{library:"sap.gantt",properties:{shapes:{type:"sap.gantt.config.Shape[]"}},events:{checkBoxChange:{parameters:{legendType:{type:"string"},value:{type:"boolean"}}}}}});n.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oListLegendDrawer=new a;this._aCheckBoxes=[]};n.prototype.onAfterRendering=function(){for(var e=0;e<this._aShapeInstance.length;e++){var t=this._aShapeInstance[e];var a=d3.select("#"+this.getId()+"-svg-"+e);var n=a.selectAll("."+t.getId()).data([e]);this._oListLegendDrawer._drawPerTag(n,t)}};n.prototype.setShapes=function(e){var a=this;this.setProperty("shapes",e);function n(){var e=false;for(var n=0;n<a._aShapeInstance.length;n++){var s=a._aShapeInstance[n].mShapeConfig.getSwitchOfCheckBox();if(s==sap.gantt.legend.ListLegendItemCheckbox.Checked||s==sap.gantt.legend.ListLegendItemCheckbox.Unchecked){e=true;break}}if(e){for(var h=0;h<a._aShapeInstance.length;h++){var g=a._aShapeInstance[h];var o=g.mShapeConfig.getSwitchOfCheckBox();var r=new t({selected:o==sap.gantt.legend.ListLegendItemCheckbox.Checked?true:false,enabled:o==sap.gantt.legend.ListLegendItemCheckbox.NoShow?false:true}).data("key",g.mShapeConfig.getKey&&g.mShapeConfig.getKey()?g.mShapeConfig.getKey():g.getLegend()).setTooltip(g.getLegend()).attachSelect(a._onCheckBoxChange,a);a._aCheckBoxes.push(r)}}}if(e&&e.length>0){this._aCheckBoxes=[];try{a._aShapeInstance=a._instantShapeSync(e);n()}catch(t){a._instantShapeAsync(e).then(function(e){a._aShapeInstance=e;n()})}}return this};n.prototype._onCheckBoxChange=function(e){var t=e.getSource();t.rerender();this.fireCheckBoxChange({legendType:t.data("key"),value:e.getParameter("selected")})};return n},true);
},
	"sap/gantt/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.gantt","type":"library","embeds":[],"applicationVersion":{"version":"1.108.10"},"title":"UI5 library: sap.gantt","description":"UI5 library: sap.gantt","ach":"CA-UI5-CTR-GNT","resources":"resources.json","offline":true,"openSourceComponents":[{"name":"jspdf","packagedWithMySelf":true,"version":"0.0.0"},{"name":"html2canvas","packagedWithMySelf":true,"version":"0.0.0"}]},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.108","libs":{"sap.ui.core":{"minVersion":"1.108.25"},"sap.ui.layout":{"minVersion":"1.108.25"},"sap.ui.table":{"minVersion":"1.108.25"},"sap.m":{"minVersion":"1.108.25"},"sap.ui.export":{"minVersion":"1.108.25"},"sap.ui.dt":{"minVersion":"1.108.25"},"sap.ui.fl":{"minVersion":"1.108.25"},"sap.ui.comp":{"minVersion":"1.108.25"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","mk","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/gantt/thirdparty/html2canvas.js":function(){
/*!
 * html2canvas 1.0.0-alpha.12 <https://html2canvas.hertzen.com>
 * Copyright (c) 2018 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
(function A(e,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else if(typeof exports==="object")exports["html2canvas"]=r();else e["html2canvas"]=r()})(this,function(){return function(A){var e={};function r(t){if(e[t]){return e[t].exports}var n=e[t]={i:t,l:false,exports:{}};A[t].call(n.exports,n,n.exports,r);n.l=true;return n.exports}r.m=A;r.c=e;r.d=function(A,e,t){if(!r.o(A,e)){Object.defineProperty(A,e,{configurable:false,enumerable:true,get:t})}};r.n=function(A){var e=A&&A.__esModule?function e(){return A["default"]}:function e(){return A};r.d(e,"a",e);return e};r.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)};r.p="";return r(r.s=27)}([function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();function a(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var B=/^#([a-f0-9]{3})$/i;var s=function A(e){var r=e.match(B);if(r){return[parseInt(r[1][0]+r[1][0],16),parseInt(r[1][1]+r[1][1],16),parseInt(r[1][2]+r[1][2],16),null]}return false};var i=/^#([a-f0-9]{6})$/i;var o=function A(e){var r=e.match(i);if(r){return[parseInt(r[1].substring(0,2),16),parseInt(r[1].substring(2,4),16),parseInt(r[1].substring(4,6),16),null]}return false};var l=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;var u=function A(e){var r=e.match(l);if(r){return[Number(r[1]),Number(r[2]),Number(r[3]),null]}return false};var c=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;var Q=function A(e){var r=e.match(c);if(r&&r.length>4){return[Number(r[1]),Number(r[2]),Number(r[3]),Number(r[4])]}return false};var w=function A(e){return[Math.min(e[0],255),Math.min(e[1],255),Math.min(e[2],255),e.length>3?e[3]:null]};var U=function A(e){var r=f[e.toLowerCase()];return r?r:false};var g=function(){function A(e){a(this,A);var r=Array.isArray(e)?w(e):s(e)||u(e)||Q(e)||U(e)||o(e)||[0,0,0,null],n=t(r,4),B=n[0],i=n[1],l=n[2],c=n[3];this.r=B;this.g=i;this.b=l;this.a=c}n(A,[{key:"isTransparent",value:function A(){return this.a===0}},{key:"toString",value:function A(){return this.a!==null&&this.a!==1?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"rgb("+this.r+","+this.g+","+this.b+")"}}]);return A}();e.default=g;var f={transparent:[0,0,0,0],aliceblue:[240,248,255,null],antiquewhite:[250,235,215,null],aqua:[0,255,255,null],aquamarine:[127,255,212,null],azure:[240,255,255,null],beige:[245,245,220,null],bisque:[255,228,196,null],black:[0,0,0,null],blanchedalmond:[255,235,205,null],blue:[0,0,255,null],blueviolet:[138,43,226,null],brown:[165,42,42,null],burlywood:[222,184,135,null],cadetblue:[95,158,160,null],chartreuse:[127,255,0,null],chocolate:[210,105,30,null],coral:[255,127,80,null],cornflowerblue:[100,149,237,null],cornsilk:[255,248,220,null],crimson:[220,20,60,null],cyan:[0,255,255,null],darkblue:[0,0,139,null],darkcyan:[0,139,139,null],darkgoldenrod:[184,134,11,null],darkgray:[169,169,169,null],darkgreen:[0,100,0,null],darkgrey:[169,169,169,null],darkkhaki:[189,183,107,null],darkmagenta:[139,0,139,null],darkolivegreen:[85,107,47,null],darkorange:[255,140,0,null],darkorchid:[153,50,204,null],darkred:[139,0,0,null],darksalmon:[233,150,122,null],darkseagreen:[143,188,143,null],darkslateblue:[72,61,139,null],darkslategray:[47,79,79,null],darkslategrey:[47,79,79,null],darkturquoise:[0,206,209,null],darkviolet:[148,0,211,null],deeppink:[255,20,147,null],deepskyblue:[0,191,255,null],dimgray:[105,105,105,null],dimgrey:[105,105,105,null],dodgerblue:[30,144,255,null],firebrick:[178,34,34,null],floralwhite:[255,250,240,null],forestgreen:[34,139,34,null],fuchsia:[255,0,255,null],gainsboro:[220,220,220,null],ghostwhite:[248,248,255,null],gold:[255,215,0,null],goldenrod:[218,165,32,null],gray:[128,128,128,null],green:[0,128,0,null],greenyellow:[173,255,47,null],grey:[128,128,128,null],honeydew:[240,255,240,null],hotpink:[255,105,180,null],indianred:[205,92,92,null],indigo:[75,0,130,null],ivory:[255,255,240,null],khaki:[240,230,140,null],lavender:[230,230,250,null],lavenderblush:[255,240,245,null],lawngreen:[124,252,0,null],lemonchiffon:[255,250,205,null],lightblue:[173,216,230,null],lightcoral:[240,128,128,null],lightcyan:[224,255,255,null],lightgoldenrodyellow:[250,250,210,null],lightgray:[211,211,211,null],lightgreen:[144,238,144,null],lightgrey:[211,211,211,null],lightpink:[255,182,193,null],lightsalmon:[255,160,122,null],lightseagreen:[32,178,170,null],lightskyblue:[135,206,250,null],lightslategray:[119,136,153,null],lightslategrey:[119,136,153,null],lightsteelblue:[176,196,222,null],lightyellow:[255,255,224,null],lime:[0,255,0,null],limegreen:[50,205,50,null],linen:[250,240,230,null],magenta:[255,0,255,null],maroon:[128,0,0,null],mediumaquamarine:[102,205,170,null],mediumblue:[0,0,205,null],mediumorchid:[186,85,211,null],mediumpurple:[147,112,219,null],mediumseagreen:[60,179,113,null],mediumslateblue:[123,104,238,null],mediumspringgreen:[0,250,154,null],mediumturquoise:[72,209,204,null],mediumvioletred:[199,21,133,null],midnightblue:[25,25,112,null],mintcream:[245,255,250,null],mistyrose:[255,228,225,null],moccasin:[255,228,181,null],navajowhite:[255,222,173,null],navy:[0,0,128,null],oldlace:[253,245,230,null],olive:[128,128,0,null],olivedrab:[107,142,35,null],orange:[255,165,0,null],orangered:[255,69,0,null],orchid:[218,112,214,null],palegoldenrod:[238,232,170,null],palegreen:[152,251,152,null],paleturquoise:[175,238,238,null],palevioletred:[219,112,147,null],papayawhip:[255,239,213,null],peachpuff:[255,218,185,null],peru:[205,133,63,null],pink:[255,192,203,null],plum:[221,160,221,null],powderblue:[176,224,230,null],purple:[128,0,128,null],rebeccapurple:[102,51,153,null],red:[255,0,0,null],rosybrown:[188,143,143,null],royalblue:[65,105,225,null],saddlebrown:[139,69,19,null],salmon:[250,128,114,null],sandybrown:[244,164,96,null],seagreen:[46,139,87,null],seashell:[255,245,238,null],sienna:[160,82,45,null],silver:[192,192,192,null],skyblue:[135,206,235,null],slateblue:[106,90,205,null],slategray:[112,128,144,null],slategrey:[112,128,144,null],snow:[255,250,250,null],springgreen:[0,255,127,null],steelblue:[70,130,180,null],tan:[210,180,140,null],teal:[0,128,128,null],thistle:[216,191,216,null],tomato:[255,99,71,null],turquoise:[64,224,208,null],violet:[238,130,238,null],wheat:[245,222,179,null],white:[255,255,255,null],whitesmoke:[245,245,245,null],yellow:[255,255,0,null],yellowgreen:[154,205,50,null]};var d=e.TRANSPARENT=new g([0,0,0,0])},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();function n(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=/([\d.]+)(px|r?em|%)/i;var B=e.LENGTH_TYPE={PX:0,PERCENTAGE:1};var s=function(){function A(e){n(this,A);this.type=e.substr(e.length-1)==="%"?B.PERCENTAGE:B.PX;var r=parseFloat(e);if(true&&isNaN(r)){console.error('Invalid value given for Length: "'+e+'"')}this.value=isNaN(r)?0:r}t(A,[{key:"isPercentage",value:function A(){return this.type===B.PERCENTAGE}},{key:"getAbsoluteValue",value:function A(e){return this.isPercentage()?e*(this.value/100):this.value}}],[{key:"create",value:function e(r){return new A(r)}}]);return A}();e.default=s;var i=function A(e){var r=e.parent;return r?A(r):parseFloat(e.style.font.fontSize)};var o=e.calculateLengthFromValueWithUnit=function A(e,r,t){switch(t){case"px":case"%":return new s(r+t);case"em":case"rem":var n=new s(r);n.value*=t==="em"?parseFloat(e.style.font.fontSize):i(e);return n;default:return new s("0")}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseBoundCurves=e.calculatePaddingBoxPath=e.calculateBorderBoxPath=e.parsePathForBorder=e.parseDocumentSize=e.calculateContentBox=e.calculatePaddingBox=e.parseBounds=e.Bounds=undefined;var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(7);var a=i(n);var B=r(32);var s=i(B);function i(A){return A&&A.__esModule?A:{default:A}}function o(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var l=0;var u=1;var c=2;var Q=3;var w=0;var U=1;var g=e.Bounds=function(){function A(e,r,t,n){o(this,A);this.left=e;this.top=r;this.width=t;this.height=n}t(A,null,[{key:"fromClientRect",value:function e(r,t,n){return new A(r.left+t,r.top+n,r.width,r.height)}}]);return A}();var f=e.parseBounds=function A(e,r,t){return g.fromClientRect(e.getBoundingClientRect(),r,t)};var d=e.calculatePaddingBox=function A(e,r){return new g(e.left+r[Q].borderWidth,e.top+r[l].borderWidth,e.width-(r[u].borderWidth+r[Q].borderWidth),e.height-(r[l].borderWidth+r[c].borderWidth))};var C=e.calculateContentBox=function A(e,r,t){var n=r[l].value;var a=r[u].value;var B=r[c].value;var s=r[Q].value;return new g(e.left+s+t[Q].borderWidth,e.top+n+t[l].borderWidth,e.width-(t[u].borderWidth+t[Q].borderWidth+s+a),e.height-(t[l].borderWidth+t[c].borderWidth+n+B))};var F=e.parseDocumentSize=function A(e){var r=e.body;var t=e.documentElement;if(!r||!t){throw new Error(true?"Unable to get document size":"")}var n=Math.max(Math.max(r.scrollWidth,t.scrollWidth),Math.max(r.offsetWidth,t.offsetWidth),Math.max(r.clientWidth,t.clientWidth));var a=Math.max(Math.max(r.scrollHeight,t.scrollHeight),Math.max(r.offsetHeight,t.offsetHeight),Math.max(r.clientHeight,t.clientHeight));return new g(0,0,n,a)};var E=e.parsePathForBorder=function A(e,r){switch(r){case l:return h(e.topLeftOuter,e.topLeftInner,e.topRightOuter,e.topRightInner);case u:return h(e.topRightOuter,e.topRightInner,e.bottomRightOuter,e.bottomRightInner);case c:return h(e.bottomRightOuter,e.bottomRightInner,e.bottomLeftOuter,e.bottomLeftInner);case Q:default:return h(e.bottomLeftOuter,e.bottomLeftInner,e.topLeftOuter,e.topLeftInner)}};var h=function A(e,r,t,n){var a=[];if(e instanceof s.default){a.push(e.subdivide(.5,false))}else{a.push(e)}if(t instanceof s.default){a.push(t.subdivide(.5,true))}else{a.push(t)}if(n instanceof s.default){a.push(n.subdivide(.5,true).reverse())}else{a.push(n)}if(r instanceof s.default){a.push(r.subdivide(.5,false).reverse())}else{a.push(r)}return a};var H=e.calculateBorderBoxPath=function A(e){return[e.topLeftOuter,e.topRightOuter,e.bottomRightOuter,e.bottomLeftOuter]};var v=e.calculatePaddingBoxPath=function A(e){return[e.topLeftInner,e.topRightInner,e.bottomRightInner,e.bottomLeftInner]};var p=e.parseBoundCurves=function A(e,r,t){var n=t[N.TOP_LEFT][w].getAbsoluteValue(e.width);var B=t[N.TOP_LEFT][U].getAbsoluteValue(e.height);var s=t[N.TOP_RIGHT][w].getAbsoluteValue(e.width);var i=t[N.TOP_RIGHT][U].getAbsoluteValue(e.height);var o=t[N.BOTTOM_RIGHT][w].getAbsoluteValue(e.width);var g=t[N.BOTTOM_RIGHT][U].getAbsoluteValue(e.height);var f=t[N.BOTTOM_LEFT][w].getAbsoluteValue(e.width);var d=t[N.BOTTOM_LEFT][U].getAbsoluteValue(e.height);var C=[];C.push((n+s)/e.width);C.push((f+o)/e.width);C.push((B+d)/e.height);C.push((i+g)/e.height);var F=Math.max.apply(Math,C);if(F>1){n/=F;B/=F;s/=F;i/=F;o/=F;g/=F;f/=F;d/=F}var E=e.width-s;var h=e.height-g;var H=e.width-o;var v=e.height-d;return{topLeftOuter:n>0||B>0?I(e.left,e.top,n,B,N.TOP_LEFT):new a.default(e.left,e.top),topLeftInner:n>0||B>0?I(e.left+r[Q].borderWidth,e.top+r[l].borderWidth,Math.max(0,n-r[Q].borderWidth),Math.max(0,B-r[l].borderWidth),N.TOP_LEFT):new a.default(e.left+r[Q].borderWidth,e.top+r[l].borderWidth),topRightOuter:s>0||i>0?I(e.left+E,e.top,s,i,N.TOP_RIGHT):new a.default(e.left+e.width,e.top),topRightInner:s>0||i>0?I(e.left+Math.min(E,e.width+r[Q].borderWidth),e.top+r[l].borderWidth,E>e.width+r[Q].borderWidth?0:s-r[Q].borderWidth,i-r[l].borderWidth,N.TOP_RIGHT):new a.default(e.left+e.width-r[u].borderWidth,e.top+r[l].borderWidth),bottomRightOuter:o>0||g>0?I(e.left+H,e.top+h,o,g,N.BOTTOM_RIGHT):new a.default(e.left+e.width,e.top+e.height),bottomRightInner:o>0||g>0?I(e.left+Math.min(H,e.width-r[Q].borderWidth),e.top+Math.min(h,e.height+r[l].borderWidth),Math.max(0,o-r[u].borderWidth),g-r[c].borderWidth,N.BOTTOM_RIGHT):new a.default(e.left+e.width-r[u].borderWidth,e.top+e.height-r[c].borderWidth),bottomLeftOuter:f>0||d>0?I(e.left,e.top+v,f,d,N.BOTTOM_LEFT):new a.default(e.left,e.top+e.height),bottomLeftInner:f>0||d>0?I(e.left+r[Q].borderWidth,e.top+v,Math.max(0,f-r[Q].borderWidth),d-r[c].borderWidth,N.BOTTOM_LEFT):new a.default(e.left+r[Q].borderWidth,e.top+e.height-r[c].borderWidth)}};var N={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_RIGHT:2,BOTTOM_LEFT:3};var I=function A(e,r,t,n,B){var i=4*((Math.sqrt(2)-1)/3);var o=t*i;var l=n*i;var u=e+t;var c=r+n;switch(B){case N.TOP_LEFT:return new s.default(new a.default(e,c),new a.default(e,c-l),new a.default(u-o,r),new a.default(u,r));case N.TOP_RIGHT:return new s.default(new a.default(e,r),new a.default(e+o,r),new a.default(u,c-l),new a.default(u,c));case N.BOTTOM_RIGHT:return new s.default(new a.default(u,r),new a.default(u,r+l),new a.default(e+o,c),new a.default(e,c));case N.BOTTOM_LEFT:default:return new s.default(new a.default(u,c),new a.default(u-o,c),new a.default(e,r+l),new a.default(e,r))}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.contains=function A(e,r){return(e&r)!==0};var n=e.distance=function A(e,r){return Math.sqrt(e*e+r*r)};var a=e.copyCSSStyles=function A(e,r,t){for(var n=e.length;n>=0;n--){var a=e.item(n);if(a!=="content"){if(t){if(a!=="top"&&a!=="left"){r.style.setProperty(a,e.getPropertyValue(a))}}else{r.style.setProperty(a,e.getPropertyValue(a))}}}return r};var B=e.SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseBackgroundImage=e.parseBackground=e.calculateBackgroundRepeatPath=e.calculateBackgroundPosition=e.calculateBackgroungPositioningArea=e.calculateBackgroungPaintingArea=e.calculateGradientBackgroundSize=e.calculateBackgroundSize=e.BACKGROUND_ORIGIN=e.BACKGROUND_CLIP=e.BACKGROUND_SIZE=e.BACKGROUND_REPEAT=undefined;var t=r(0);var n=Q(t);var a=r(1);var B=Q(a);var s=r(31);var i=Q(s);var o=r(7);var l=Q(o);var u=r(2);var c=r(17);function Q(A){return A&&A.__esModule?A:{default:A}}function w(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var U=e.BACKGROUND_REPEAT={REPEAT:0,NO_REPEAT:1,REPEAT_X:2,REPEAT_Y:3};var g=e.BACKGROUND_SIZE={AUTO:0,CONTAIN:1,COVER:2,LENGTH:3};var f=e.BACKGROUND_CLIP={BORDER_BOX:0,PADDING_BOX:1,CONTENT_BOX:2};var d=e.BACKGROUND_ORIGIN=f;var C="auto";var F=function A(e){w(this,A);switch(e){case"contain":this.size=g.CONTAIN;break;case"cover":this.size=g.COVER;break;case"auto":this.size=g.AUTO;break;default:this.value=new B.default(e)}};var E=e.calculateBackgroundSize=function A(e,r,t){var n=0;var a=0;var B=e.size;if(B[0].size===g.CONTAIN||B[0].size===g.COVER){var s=t.width/t.height;var o=r.width/r.height;return s<o!==(B[0].size===g.COVER)?new i.default(t.width,t.width/o):new i.default(t.height*o,t.height)}if(B[0].value){n=B[0].value.getAbsoluteValue(t.width)}if(B[0].size===g.AUTO&&B[1].size===g.AUTO){a=r.height}else if(B[1].size===g.AUTO){a=n/r.width*r.height}else if(B[1].value){a=B[1].value.getAbsoluteValue(t.height)}if(B[0].size===g.AUTO){n=a/r.height*r.width}return new i.default(n,a)};var h=e.calculateGradientBackgroundSize=function A(e,r){var t=e.size;var n=t[0].value?t[0].value.getAbsoluteValue(r.width):r.width;var a=t[1].value?t[1].value.getAbsoluteValue(r.height):t[0].value?n:r.height;return new i.default(n,a)};var H=new F(C);var v=e.calculateBackgroungPaintingArea=function A(e,r){switch(r){case f.BORDER_BOX:return(0,u.calculateBorderBoxPath)(e);case f.PADDING_BOX:default:return(0,u.calculatePaddingBoxPath)(e)}};var p=e.calculateBackgroungPositioningArea=function A(e,r,t,n){var a=(0,u.calculatePaddingBox)(r,n);switch(e){case d.BORDER_BOX:return r;case d.CONTENT_BOX:var B=t[c.PADDING_SIDES.LEFT].getAbsoluteValue(r.width);var s=t[c.PADDING_SIDES.RIGHT].getAbsoluteValue(r.width);var i=t[c.PADDING_SIDES.TOP].getAbsoluteValue(r.width);var o=t[c.PADDING_SIDES.BOTTOM].getAbsoluteValue(r.width);return new u.Bounds(a.left+B,a.top+i,a.width-B-s,a.height-i-o);case d.PADDING_BOX:default:return a}};var N=e.calculateBackgroundPosition=function A(e,r,t){return new l.default(e[0].getAbsoluteValue(t.width-r.width),e[1].getAbsoluteValue(t.height-r.height))};var I=e.calculateBackgroundRepeatPath=function A(e,r,t,n,a){var B=e.repeat;switch(B){case U.REPEAT_X:return[new l.default(Math.round(a.left),Math.round(n.top+r.y)),new l.default(Math.round(a.left+a.width),Math.round(n.top+r.y)),new l.default(Math.round(a.left+a.width),Math.round(t.height+n.top+r.y)),new l.default(Math.round(a.left),Math.round(t.height+n.top+r.y))];case U.REPEAT_Y:return[new l.default(Math.round(n.left+r.x),Math.round(a.top)),new l.default(Math.round(n.left+r.x+t.width),Math.round(a.top)),new l.default(Math.round(n.left+r.x+t.width),Math.round(a.height+a.top)),new l.default(Math.round(n.left+r.x),Math.round(a.height+a.top))];case U.NO_REPEAT:return[new l.default(Math.round(n.left+r.x),Math.round(n.top+r.y)),new l.default(Math.round(n.left+r.x+t.width),Math.round(n.top+r.y)),new l.default(Math.round(n.left+r.x+t.width),Math.round(n.top+r.y+t.height)),new l.default(Math.round(n.left+r.x),Math.round(n.top+r.y+t.height))];default:return[new l.default(Math.round(a.left),Math.round(a.top)),new l.default(Math.round(a.left+a.width),Math.round(a.top)),new l.default(Math.round(a.left+a.width),Math.round(a.height+a.top)),new l.default(Math.round(a.left),Math.round(a.height+a.top))]}};var K=e.parseBackground=function A(e,r){return{backgroundColor:new n.default(e.backgroundColor),backgroundImage:y(e,r),backgroundClip:T(e.backgroundClip),backgroundOrigin:m(e.backgroundOrigin)}};var T=function A(e){switch(e){case"padding-box":return f.PADDING_BOX;case"content-box":return f.CONTENT_BOX}return f.BORDER_BOX};var m=function A(e){switch(e){case"padding-box":return d.PADDING_BOX;case"content-box":return d.CONTENT_BOX}return d.BORDER_BOX};var b=function A(e){switch(e.trim()){case"no-repeat":return U.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return U.REPEAT_X;case"repeat-y":case"no-repeat repeat":return U.REPEAT_Y;case"repeat":return U.REPEAT}if(true){console.error('Invalid background-repeat value "'+e+'"')}return U.REPEAT};var y=function A(e,r){var t=_(e.backgroundImage).map(function(A){if(A.method==="url"){var e=r.loadImage(A.args[0]);A.args=e?[e]:[]}return A});var n=e.backgroundPosition.split(",");var a=e.backgroundRepeat.split(",");var B=e.backgroundSize.split(",");return t.map(function(A,e){var r=(B[e]||C).trim().split(" ").map(S);var t=(n[e]||C).trim().split(" ").map(L);return{source:A,repeat:b(typeof a[e]==="string"?a[e]:a[0]),size:r.length<2?[r[0],H]:[r[0],r[1]],position:t.length<2?[t[0],t[0]]:[t[0],t[1]]}})};var S=function A(e){return e==="auto"?H:new F(e)};var L=function A(e){switch(e){case"bottom":case"right":return new B.default("100%");case"left":case"top":return new B.default("0%");case"auto":return new B.default("0")}return new B.default(e)};var _=e.parseBackgroundImage=function A(e){var r=/^\s$/;var t=[];var n=[];var a="";var B=null;var s="";var i=0;var o=0;var l=function A(){var e="";if(a){if(s.substr(0,1)==='"'){s=s.substr(1,s.length-2)}if(s){n.push(s.trim())}var r=a.indexOf("-",1)+1;if(a.substr(0,1)==="-"&&r>0){e=a.substr(0,r).toLowerCase();a=a.substr(r)}a=a.toLowerCase();if(a!=="none"){t.push({prefix:e,method:a,args:n})}}n=[];a=s=""};e.split("").forEach(function(A){if(i===0&&r.test(A)){return}switch(A){case'"':if(!B){B=A}else if(B===A){B=null}break;case"(":if(B){break}else if(i===0){i=1;return}else{o++}break;case")":if(B){break}else if(i===1){if(o===0){i=0;l();return}else{o--}}break;case",":if(B){break}else if(i===0){l();return}else if(i===1){if(o===0&&!a.match(/^url$/i)){n.push(s.trim());s="";return}}break}if(i===0){a+=A}else{s+=A}});l();return t}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.PATH={VECTOR:0,BEZIER_CURVE:1,CIRCLE:2}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(0);var a=b(n);var B=r(3);var s=r(4);var i=r(12);var o=r(33);var l=r(34);var u=r(35);var c=r(36);var Q=r(37);var w=r(38);var U=r(8);var g=r(39);var f=r(40);var d=r(18);var C=r(17);var F=r(19);var E=r(11);var h=r(41);var H=r(20);var v=r(42);var p=r(43);var N=r(44);var I=r(45);var K=r(2);var T=r(21);var m=r(14);function b(A){return A&&A.__esModule?A:{default:A}}function y(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var S=["INPUT","TEXTAREA","SELECT"];var L=function(){function A(e,r,t,n){var B=this;y(this,A);this.parent=r;this.tagName=e.tagName;this.index=n;this.childNodes=[];this.listItems=[];if(typeof e.start==="number"){this.listStart=e.start}var b=e.ownerDocument.defaultView;var L=b.pageXOffset;var D=b.pageYOffset;var M=b.getComputedStyle(e,null);var O=(0,l.parseDisplay)(M.display);var R=e.type==="radio"||e.type==="checkbox";var P=(0,F.parsePosition)(M.position);this.style={background:R?T.INPUT_BACKGROUND:(0,s.parseBackground)(M,t),border:R?T.INPUT_BORDERS:(0,i.parseBorder)(M),borderRadius:(e instanceof b.HTMLInputElement||e instanceof HTMLInputElement)&&R?(0,T.getInputBorderRadius)(e):(0,o.parseBorderRadius)(M),color:R?T.INPUT_COLOR:new a.default(M.color),display:O,float:(0,u.parseCSSFloat)(M.float),font:(0,c.parseFont)(M),letterSpacing:(0,Q.parseLetterSpacing)(M.letterSpacing),listStyle:O===l.DISPLAY.LIST_ITEM?(0,U.parseListStyle)(M):null,lineBreak:(0,w.parseLineBreak)(M.lineBreak),margin:(0,g.parseMargin)(M),opacity:parseFloat(M.opacity),overflow:S.indexOf(e.tagName)===-1?(0,f.parseOverflow)(M.overflow):f.OVERFLOW.HIDDEN,overflowWrap:(0,d.parseOverflowWrap)(M.overflowWrap?M.overflowWrap:M.wordWrap),padding:(0,C.parsePadding)(M),position:P,textDecoration:(0,E.parseTextDecoration)(M),textShadow:(0,h.parseTextShadow)(M.textShadow),textTransform:(0,H.parseTextTransform)(M.textTransform),transform:(0,v.parseTransform)(M),visibility:(0,p.parseVisibility)(M.visibility),wordBreak:(0,N.parseWordBreak)(M.wordBreak),zIndex:(0,I.parseZIndex)(P!==F.POSITION.STATIC?M.zIndex:"auto")};if(this.isTransformed()){e.style.transform="matrix(1,0,0,1,0,0)"}if(O===l.DISPLAY.LIST_ITEM){var X=(0,m.getListOwner)(this);if(X){var z=X.listItems.length;X.listItems.push(this);this.listIndex=e.hasAttribute("value")&&typeof e.value==="number"?e.value:z===0?typeof X.listStart==="number"?X.listStart:1:X.listItems[z-1].listIndex+1}}if(e.tagName==="IMG"){e.addEventListener("load",function(){B.bounds=(0,K.parseBounds)(e,L,D);B.curvedBounds=(0,K.parseBoundCurves)(B.bounds,B.style.border,B.style.borderRadius)})}this.image=_(e,t);this.bounds=R?(0,T.reformatInputBounds)((0,K.parseBounds)(e,L,D)):(0,K.parseBounds)(e,L,D);this.curvedBounds=(0,K.parseBoundCurves)(this.bounds,this.style.border,this.style.borderRadius);if(true){this.name=""+e.tagName.toLowerCase()+(e.id?"#"+e.id:"")+e.className.toString().split(" ").map(function(A){return A.length?"."+A:""}).join("")}}t(A,[{key:"getClipPaths",value:function A(){var e=this.parent?this.parent.getClipPaths():[];var r=this.style.overflow!==f.OVERFLOW.VISIBLE;return r?e.concat([(0,K.calculatePaddingBoxPath)(this.curvedBounds)]):e}},{key:"isInFlow",value:function A(){return this.isRootElement()&&!this.isFloating()&&!this.isAbsolutelyPositioned()}},{key:"isVisible",value:function A(){return!(0,B.contains)(this.style.display,l.DISPLAY.NONE)&&this.style.opacity>0&&this.style.visibility===p.VISIBILITY.VISIBLE}},{key:"isAbsolutelyPositioned",value:function A(){return this.style.position!==F.POSITION.STATIC&&this.style.position!==F.POSITION.RELATIVE}},{key:"isPositioned",value:function A(){return this.style.position!==F.POSITION.STATIC}},{key:"isFloating",value:function A(){return this.style.float!==u.FLOAT.NONE}},{key:"isRootElement",value:function A(){return this.parent===null}},{key:"isTransformed",value:function A(){return this.style.transform!==null}},{key:"isPositionedWithZIndex",value:function A(){return this.isPositioned()&&!this.style.zIndex.auto}},{key:"isInlineLevel",value:function A(){return(0,B.contains)(this.style.display,l.DISPLAY.INLINE)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_FLEX)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_GRID)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_LIST_ITEM)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}},{key:"isInlineBlockOrInlineTable",value:function A(){return(0,B.contains)(this.style.display,l.DISPLAY.INLINE_BLOCK)||(0,B.contains)(this.style.display,l.DISPLAY.INLINE_TABLE)}}]);return A}();e.default=L;var _=function A(e,r){if(e instanceof e.ownerDocument.defaultView.SVGSVGElement||e instanceof SVGSVGElement){var t=new XMLSerializer;return r.loadImage("data:image/svg+xml,"+encodeURIComponent(t.serializeToString(e)))}switch(e.tagName){case"IMG":var n=e;return r.loadImage(n.currentSrc||n.src);case"CANVAS":var a=e;return r.loadCanvas(a);case"IFRAME":var B=e.getAttribute("data-html2canvas-internal-iframe-key");if(B){return B}break}return null}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=r(5);function n(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function A(e,r){n(this,A);this.type=t.PATH.VECTOR;this.x=e;this.y=r;if(true){if(isNaN(e)){console.error("Invalid x value given for Vector")}if(isNaN(r)){console.error("Invalid y value given for Vector")}}};e.default=a},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseListStyle=e.parseListStyleType=e.LIST_STYLE_TYPE=e.LIST_STYLE_POSITION=undefined;var t=r(4);var n=e.LIST_STYLE_POSITION={INSIDE:0,OUTSIDE:1};var a=e.LIST_STYLE_TYPE={NONE:-1,DISC:0,CIRCLE:1,SQUARE:2,DECIMAL:3,CJK_DECIMAL:4,DECIMAL_LEADING_ZERO:5,LOWER_ROMAN:6,UPPER_ROMAN:7,LOWER_GREEK:8,LOWER_ALPHA:9,UPPER_ALPHA:10,ARABIC_INDIC:11,ARMENIAN:12,BENGALI:13,CAMBODIAN:14,CJK_EARTHLY_BRANCH:15,CJK_HEAVENLY_STEM:16,CJK_IDEOGRAPHIC:17,DEVANAGARI:18,ETHIOPIC_NUMERIC:19,GEORGIAN:20,GUJARATI:21,GURMUKHI:22,HEBREW:22,HIRAGANA:23,HIRAGANA_IROHA:24,JAPANESE_FORMAL:25,JAPANESE_INFORMAL:26,KANNADA:27,KATAKANA:28,KATAKANA_IROHA:29,KHMER:30,KOREAN_HANGUL_FORMAL:31,KOREAN_HANJA_FORMAL:32,KOREAN_HANJA_INFORMAL:33,LAO:34,LOWER_ARMENIAN:35,MALAYALAM:36,MONGOLIAN:37,MYANMAR:38,ORIYA:39,PERSIAN:40,SIMP_CHINESE_FORMAL:41,SIMP_CHINESE_INFORMAL:42,TAMIL:43,TELUGU:44,THAI:45,TIBETAN:46,TRAD_CHINESE_FORMAL:47,TRAD_CHINESE_INFORMAL:48,UPPER_ARMENIAN:49,DISCLOSURE_OPEN:50,DISCLOSURE_CLOSED:51};var B=e.parseListStyleType=function A(e){switch(e){case"disc":return a.DISC;case"circle":return a.CIRCLE;case"square":return a.SQUARE;case"decimal":return a.DECIMAL;case"cjk-decimal":return a.CJK_DECIMAL;case"decimal-leading-zero":return a.DECIMAL_LEADING_ZERO;case"lower-roman":return a.LOWER_ROMAN;case"upper-roman":return a.UPPER_ROMAN;case"lower-greek":return a.LOWER_GREEK;case"lower-alpha":return a.LOWER_ALPHA;case"upper-alpha":return a.UPPER_ALPHA;case"arabic-indic":return a.ARABIC_INDIC;case"armenian":return a.ARMENIAN;case"bengali":return a.BENGALI;case"cambodian":return a.CAMBODIAN;case"cjk-earthly-branch":return a.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return a.CJK_HEAVENLY_STEM;case"cjk-ideographic":return a.CJK_IDEOGRAPHIC;case"devanagari":return a.DEVANAGARI;case"ethiopic-numeric":return a.ETHIOPIC_NUMERIC;case"georgian":return a.GEORGIAN;case"gujarati":return a.GUJARATI;case"gurmukhi":return a.GURMUKHI;case"hebrew":return a.HEBREW;case"hiragana":return a.HIRAGANA;case"hiragana-iroha":return a.HIRAGANA_IROHA;case"japanese-formal":return a.JAPANESE_FORMAL;case"japanese-informal":return a.JAPANESE_INFORMAL;case"kannada":return a.KANNADA;case"katakana":return a.KATAKANA;case"katakana-iroha":return a.KATAKANA_IROHA;case"khmer":return a.KHMER;case"korean-hangul-formal":return a.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return a.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return a.KOREAN_HANJA_INFORMAL;case"lao":return a.LAO;case"lower-armenian":return a.LOWER_ARMENIAN;case"malayalam":return a.MALAYALAM;case"mongolian":return a.MONGOLIAN;case"myanmar":return a.MYANMAR;case"oriya":return a.ORIYA;case"persian":return a.PERSIAN;case"simp-chinese-formal":return a.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return a.SIMP_CHINESE_INFORMAL;case"tamil":return a.TAMIL;case"telugu":return a.TELUGU;case"thai":return a.THAI;case"tibetan":return a.TIBETAN;case"trad-chinese-formal":return a.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return a.TRAD_CHINESE_INFORMAL;case"upper-armenian":return a.UPPER_ARMENIAN;case"disclosure-open":return a.DISCLOSURE_OPEN;case"disclosure-closed":return a.DISCLOSURE_CLOSED;case"none":default:return a.NONE}};var s=e.parseListStyle=function A(e){var r=(0,t.parseBackgroundImage)(e.getPropertyValue("list-style-image"));return{listStyleType:B(e.getPropertyValue("list-style-type")),listStyleImage:r.length?r[0]:null,listStylePosition:i(e.getPropertyValue("list-style-position"))}};var i=function A(e){switch(e){case"inside":return n.INSIDE;case"outside":default:return n.OUTSIDE}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(20);var a=r(22);function B(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function A(e,r,t){B(this,A);this.text=e;this.parent=r;this.bounds=t}t(A,null,[{key:"fromTextNode",value:function e(r,t){var n=o(r.data,t.style.textTransform);return new A(n,t,(0,a.parseTextBounds)(n,t,r))}}]);return A}();e.default=s;var i=/(^|\s|:|-|\(|\))([a-z])/g;var o=function A(e,r){switch(r){case n.TEXT_TRANSFORM.LOWERCASE:return e.toLowerCase();case n.TEXT_TRANSFORM.CAPITALIZE:return e.replace(i,l);case n.TEXT_TRANSFORM.UPPERCASE:return e.toUpperCase();default:return e}};function l(A,e,r){if(A.length>0){return e+r.toUpperCase()}return A}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=r(23);var n=function A(e){var r=123;if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=r+"px";n.style.display="block";e.body.appendChild(n);t.selectNode(n);var a=t.getBoundingClientRect();var B=Math.round(a.height);e.body.removeChild(n);if(B===r){return true}}}return false};var a=function A(e,r){var t=new Image;var n=e.createElement("canvas");var a=n.getContext("2d");return new Promise(function(A){t.src=r;var e=function e(){try{a.drawImage(t,0,0);n.toDataURL()}catch(e){return A(false)}return A(true)};t.onload=e;t.onerror=function(){return A(false)};if(t.complete===true){setTimeout(function(){e()},500)}})};var B=function A(){return typeof(new Image).crossOrigin!=="undefined"};var s=function A(){return typeof(new XMLHttpRequest).responseType==="string"};var i=function A(e){return e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")};var o=function A(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255};var l=function A(e){var r=e.createElement("canvas");var n=100;r.width=n;r.height=n;var a=r.getContext("2d");a.fillStyle="rgb(0, 255, 0)";a.fillRect(0,0,n,n);var B=new Image;var s=r.toDataURL();B.src=s;var i=(0,t.createForeignObjectSVG)(n,n,0,0,B);a.fillStyle="red";a.fillRect(0,0,n,n);return(0,t.loadSerializedSVG)(i).then(function(A){a.drawImage(A,0,0);var r=a.getImageData(0,0,n,n).data;a.fillStyle="red";a.fillRect(0,0,n,n);var B=e.createElement("div");B.style.backgroundImage="url("+s+")";B.style.height=n+"px";return o(r)?(0,t.loadSerializedSVG)((0,t.createForeignObjectSVG)(n,n,0,0,B)):Promise.reject(false)}).then(function(A){a.drawImage(A,0,0);return o(a.getImageData(0,0,n,n).data)}).catch(function(A){return false})};var u={get SUPPORT_RANGE_BOUNDS(){"use strict";var A=n(document);Object.defineProperty(u,"SUPPORT_RANGE_BOUNDS",{value:A});return A},get SUPPORT_SVG_DRAWING(){"use strict";var A=i(document);Object.defineProperty(u,"SUPPORT_SVG_DRAWING",{value:A});return A},get SUPPORT_BASE64_DRAWING(){"use strict";return function(A){var e=a(document,A);Object.defineProperty(u,"SUPPORT_BASE64_DRAWING",{value:function A(){return e}});return e}},get SUPPORT_FOREIGNOBJECT_DRAWING(){"use strict";var A=typeof Array.from==="function"&&typeof window.fetch==="function"?l(document):Promise.resolve(false);Object.defineProperty(u,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A});return A},get SUPPORT_CORS_IMAGES(){"use strict";var A=B();Object.defineProperty(u,"SUPPORT_CORS_IMAGES",{value:A});return A},get SUPPORT_RESPONSE_TYPE(){"use strict";var A=s();Object.defineProperty(u,"SUPPORT_RESPONSE_TYPE",{value:A});return A},get SUPPORT_CORS_XHR(){"use strict";var A="withCredentials"in new XMLHttpRequest;Object.defineProperty(u,"SUPPORT_CORS_XHR",{value:A});return A}};e.default=u},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseTextDecoration=e.TEXT_DECORATION_LINE=e.TEXT_DECORATION=e.TEXT_DECORATION_STYLE=undefined;var t=r(0);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=e.TEXT_DECORATION_STYLE={SOLID:0,DOUBLE:1,DOTTED:2,DASHED:3,WAVY:4};var s=e.TEXT_DECORATION={NONE:null};var i=e.TEXT_DECORATION_LINE={UNDERLINE:1,OVERLINE:2,LINE_THROUGH:3,BLINK:4};var o=function A(e){switch(e){case"underline":return i.UNDERLINE;case"overline":return i.OVERLINE;case"line-through":return i.LINE_THROUGH}return i.BLINK};var l=function A(e){if(e==="none"){return null}return e.split(" ").map(o)};var u=function A(e){switch(e){case"double":return B.DOUBLE;case"dotted":return B.DOTTED;case"dashed":return B.DASHED;case"wavy":return B.WAVY}return B.SOLID};var c=e.parseTextDecoration=function A(e){var r=l(e.textDecorationLine?e.textDecorationLine:e.textDecoration);if(r===null){return s.NONE}var t=e.textDecorationColor?new n.default(e.textDecorationColor):null;var a=u(e.textDecorationStyle);return{textDecorationLine:r,textDecorationColor:t,textDecorationStyle:a}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseBorder=e.BORDER_SIDES=e.BORDER_STYLE=undefined;var t=r(0);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=e.BORDER_STYLE={NONE:0,SOLID:1};var s=e.BORDER_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};var i=Object.keys(s).map(function(A){return A.toLowerCase()});var o=function A(e){switch(e){case"none":return B.NONE}return B.SOLID};var l=e.parseBorder=function A(e){return i.map(function(A){var r=new n.default(e.getPropertyValue("border-"+A+"-color"));var t=o(e.getPropertyValue("border-"+A+"-style"));var a=parseFloat(e.getPropertyValue("border-"+A+"-width"));return{borderColor:r,borderStyle:t,borderWidth:isNaN(a)?0:a}})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.toCodePoints=function A(e){var r=[];var t=0;var n=e.length;while(t<n){var a=e.charCodeAt(t++);if(a>=55296&&a<=56319&&t<n){var B=e.charCodeAt(t++);if((B&64512)===56320){r.push(((a&1023)<<10)+(B&1023)+65536)}else{r.push(a);t--}}else{r.push(a)}}return r};var n=e.fromCodePoint=function A(){if(String.fromCodePoint){return String.fromCodePoint.apply(String,arguments)}var e=arguments.length;if(!e){return""}var r=[];var t=-1;var n="";while(++t<e){var a=arguments.length<=t?undefined:arguments[t];if(a<=65535){r.push(a)}else{a-=65536;r.push((a>>10)+55296,a%1024+56320)}if(t+1===e||r.length>16384){n+=String.fromCharCode.apply(String,r);r.length=0}}return n};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var B=typeof Uint8Array==="undefined"?[]:new Uint8Array(256);for(var s=0;s<a.length;s++){B[a.charCodeAt(s)]=s}var i=e.decode=function A(e){var r=e.length*.75,t=e.length,n=void 0,a=0,s=void 0,i=void 0,o=void 0,l=void 0;if(e[e.length-1]==="="){r--;if(e[e.length-2]==="="){r--}}var u=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"&&typeof Uint8Array.prototype.slice!=="undefined"?new ArrayBuffer(r):new Array(r);var c=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<t;n+=4){s=B[e.charCodeAt(n)];i=B[e.charCodeAt(n+1)];o=B[e.charCodeAt(n+2)];l=B[e.charCodeAt(n+3)];c[a++]=s<<2|i>>4;c[a++]=(i&15)<<4|o>>2;c[a++]=(o&3)<<6|l&63}return u};var o=e.polyUint16Array=function A(e){var r=e.length;var t=[];for(var n=0;n<r;n+=2){t.push(e[n+1]<<8|e[n])}return t};var l=e.polyUint32Array=function A(e){var r=e.length;var t=[];for(var n=0;n<r;n+=4){t.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n])}return t}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.createCounterText=e.inlineListItemElement=e.getListOwner=undefined;var t=r(3);var n=r(6);var a=l(n);var B=r(9);var s=l(B);var i=r(8);var o=r(24);function l(A){return A&&A.__esModule?A:{default:A}}var u=7;var c=["OL","UL","MENU"];var Q=e.getListOwner=function A(e){var r=e.parent;if(!r){return null}do{var t=c.indexOf(r.tagName)!==-1;if(t){return r}r=r.parent}while(r);return e.parent};var w=e.inlineListItemElement=function A(e,r,n){var B=r.style.listStyle;if(!B){return}var o=e.ownerDocument.defaultView.getComputedStyle(e,null);var l=e.ownerDocument.createElement("html2canvaswrapper");(0,t.copyCSSStyles)(o,l);l.style.position="absolute";l.style.bottom="auto";l.style.display="block";l.style.letterSpacing="normal";switch(B.listStylePosition){case i.LIST_STYLE_POSITION.OUTSIDE:l.style.left="auto";l.style.right=e.ownerDocument.defaultView.innerWidth-r.bounds.left-r.style.margin[1].getAbsoluteValue(r.bounds.width)+u+"px";l.style.textAlign="right";break;case i.LIST_STYLE_POSITION.INSIDE:l.style.left=r.bounds.left-r.style.margin[3].getAbsoluteValue(r.bounds.width)+"px";l.style.right="auto";l.style.textAlign="left";break}var c=void 0;var Q=r.style.margin[0].getAbsoluteValue(r.bounds.width);var w=B.listStyleImage;if(w){if(w.method==="url"){var U=e.ownerDocument.createElement("img");U.src=w.args[0];l.style.top=r.bounds.top-Q+"px";l.style.width="auto";l.style.height="auto";l.appendChild(U)}else{var g=parseFloat(r.style.font.fontSize)*.5;l.style.top=r.bounds.top-Q+r.bounds.height-1.5*g+"px";l.style.width=g+"px";l.style.height=g+"px";l.style.backgroundImage=o.listStyleImage}}else if(typeof r.listIndex==="number"){c=e.ownerDocument.createTextNode(y(r.listIndex,B.listStyleType,true));l.appendChild(c);l.style.top=r.bounds.top-Q+"px"}var f=e.ownerDocument.body;f.appendChild(l);if(c){r.childNodes.push(s.default.fromTextNode(c,r));f.removeChild(l)}else{r.childNodes.push(new a.default(l,r,n,0))}};var U={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]};var g={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]};var f={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]};var d={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]};var C=function A(e,r,t,n,a,B){if(e<r||e>t){return y(e,a,B.length>0)}return n.integers.reduce(function(A,r,t){while(e>=r){e-=r;A+=n.values[t]}return A},"")+B};var F=function A(e,r,t,n){var a="";do{if(!t){e--}a=n(e)+a;e/=r}while(e*r>=r);return a};var E=function A(e,r,t,n,a){var B=t-r+1;return(e<0?"-":"")+(F(Math.abs(e),B,n,function(A){return(0,o.fromCodePoint)(Math.floor(A%B)+r)})+a)};var h=function A(e,r){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:". ";var n=r.length;return F(Math.abs(e),n,false,function(A){return r[Math.floor(A%n)]})+t};var H=1<<0;var v=1<<1;var p=1<<2;var N=1<<3;var I=function A(e,r,n,a,B,s){if(e<-9999||e>9999){return y(e,i.LIST_STYLE_TYPE.CJK_DECIMAL,B.length>0)}var o=Math.abs(e);var l=B;if(o===0){return r[0]+l}for(var u=0;o>0&&u<=4;u++){var c=o%10;if(c===0&&(0,t.contains)(s,H)&&l!==""){l=r[c]+l}else if(c>1||c===1&&u===0||c===1&&u===1&&(0,t.contains)(s,v)||c===1&&u===1&&(0,t.contains)(s,p)&&e>100||c===1&&u>1&&(0,t.contains)(s,N)){l=r[c]+(u>0?n[u-1]:"")+l}else if(c===1&&u>0){l=n[u-1]+l}o=Math.floor(o/10)}return(e<0?a:"")+l};var K="十百千萬";var T="拾佰仟萬";var m="マイナス";var b="마이너스 ";var y=e.createCounterText=function A(e,r,t){var n=t?". ":"";var a=t?"、":"";var B=t?", ":"";switch(r){case i.LIST_STYLE_TYPE.DISC:return"•";case i.LIST_STYLE_TYPE.CIRCLE:return"◦";case i.LIST_STYLE_TYPE.SQUARE:return"◾";case i.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var s=E(e,48,57,true,n);return s.length<4?"0"+s:s;case i.LIST_STYLE_TYPE.CJK_DECIMAL:return h(e,"〇一二三四五六七八九",a);case i.LIST_STYLE_TYPE.LOWER_ROMAN:return C(e,1,3999,U,i.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case i.LIST_STYLE_TYPE.UPPER_ROMAN:return C(e,1,3999,U,i.LIST_STYLE_TYPE.DECIMAL,n);case i.LIST_STYLE_TYPE.LOWER_GREEK:return E(e,945,969,false,n);case i.LIST_STYLE_TYPE.LOWER_ALPHA:return E(e,97,122,false,n);case i.LIST_STYLE_TYPE.UPPER_ALPHA:return E(e,65,90,false,n);case i.LIST_STYLE_TYPE.ARABIC_INDIC:return E(e,1632,1641,true,n);case i.LIST_STYLE_TYPE.ARMENIAN:case i.LIST_STYLE_TYPE.UPPER_ARMENIAN:return C(e,1,9999,g,i.LIST_STYLE_TYPE.DECIMAL,n);case i.LIST_STYLE_TYPE.LOWER_ARMENIAN:return C(e,1,9999,g,i.LIST_STYLE_TYPE.DECIMAL,n).toLowerCase();case i.LIST_STYLE_TYPE.BENGALI:return E(e,2534,2543,true,n);case i.LIST_STYLE_TYPE.CAMBODIAN:case i.LIST_STYLE_TYPE.KHMER:return E(e,6112,6121,true,n);case i.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return h(e,"子丑寅卯辰巳午未申酉戌亥",a);case i.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return h(e,"甲乙丙丁戊己庚辛壬癸",a);case i.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case i.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return I(e,"零一二三四五六七八九",K,"負",a,v|p|N);case i.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return I(e,"零壹貳參肆伍陸柒捌玖",T,"負",a,H|v|p|N);case i.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return I(e,"零一二三四五六七八九",K,"负",a,v|p|N);case i.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return I(e,"零壹贰叁肆伍陆柒捌玖",T,"负",a,H|v|p|N);case i.LIST_STYLE_TYPE.JAPANESE_INFORMAL:return I(e,"〇一二三四五六七八九","十百千万",m,a,0);case i.LIST_STYLE_TYPE.JAPANESE_FORMAL:return I(e,"零壱弐参四伍六七八九","拾百千万",m,a,H|v|p);case i.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return I(e,"영일이삼사오육칠팔구","십백천만",b,B,H|v|p);case i.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return I(e,"零一二三四五六七八九","十百千萬",b,B,0);case i.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return I(e,"零壹貳參四五六七八九","拾百千",b,B,H|v|p);case i.LIST_STYLE_TYPE.DEVANAGARI:return E(e,2406,2415,true,n);case i.LIST_STYLE_TYPE.GEORGIAN:return C(e,1,19999,d,i.LIST_STYLE_TYPE.DECIMAL,n);case i.LIST_STYLE_TYPE.GUJARATI:return E(e,2790,2799,true,n);case i.LIST_STYLE_TYPE.GURMUKHI:return E(e,2662,2671,true,n);case i.LIST_STYLE_TYPE.HEBREW:return C(e,1,10999,f,i.LIST_STYLE_TYPE.DECIMAL,n);case i.LIST_STYLE_TYPE.HIRAGANA:return h(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case i.LIST_STYLE_TYPE.HIRAGANA_IROHA:return h(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case i.LIST_STYLE_TYPE.KANNADA:return E(e,3302,3311,true,n);case i.LIST_STYLE_TYPE.KATAKANA:return h(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case i.LIST_STYLE_TYPE.KATAKANA_IROHA:return h(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case i.LIST_STYLE_TYPE.LAO:return E(e,3792,3801,true,n);case i.LIST_STYLE_TYPE.MONGOLIAN:return E(e,6160,6169,true,n);case i.LIST_STYLE_TYPE.MYANMAR:return E(e,4160,4169,true,n);case i.LIST_STYLE_TYPE.ORIYA:return E(e,2918,2927,true,n);case i.LIST_STYLE_TYPE.PERSIAN:return E(e,1776,1785,true,n);case i.LIST_STYLE_TYPE.TAMIL:return E(e,3046,3055,true,n);case i.LIST_STYLE_TYPE.TELUGU:return E(e,3174,3183,true,n);case i.LIST_STYLE_TYPE.THAI:return E(e,3664,3673,true,n);case i.LIST_STYLE_TYPE.TIBETAN:return E(e,3872,3881,true,n);case i.LIST_STYLE_TYPE.DECIMAL:default:return E(e,48,57,true,n)}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(5);var a=r(11);function B(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var s=function A(e,r){var t=Math.max.apply(null,e.colorStops.map(function(A){return A.stop}));var n=1/Math.max(1,t);e.colorStops.forEach(function(A){r.addColorStop(n*A.stop,A.color.toString())})};var i=function(){function A(e){B(this,A);this.canvas=e?e:document.createElement("canvas")}t(A,[{key:"render",value:function A(e){this.ctx=this.canvas.getContext("2d");this.options=e;this.canvas.width=Math.floor(e.width*e.scale);this.canvas.height=Math.floor(e.height*e.scale);this.canvas.style.width=e.width+"px";this.canvas.style.height=e.height+"px";this.ctx.scale(this.options.scale,this.options.scale);this.ctx.translate(-e.x,-e.y);this.ctx.textBaseline="bottom";e.logger.log("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+this.options.scale)}},{key:"clip",value:function A(e,r){var t=this;if(e.length){this.ctx.save();e.forEach(function(A){t.path(A);t.ctx.clip()})}r();if(e.length){this.ctx.restore()}}},{key:"drawImage",value:function A(e,r,t){this.ctx.drawImage(e,r.left,r.top,r.width,r.height,t.left,t.top,t.width,t.height)}},{key:"drawShape",value:function A(e,r){this.path(e);this.ctx.fillStyle=r.toString();this.ctx.fill()}},{key:"fill",value:function A(e){this.ctx.fillStyle=e.toString();this.ctx.fill()}},{key:"getTarget",value:function A(){this.canvas.getContext("2d").setTransform(1,0,0,1,0,0);return Promise.resolve(this.canvas)}},{key:"path",value:function A(e){var r=this;this.ctx.beginPath();if(Array.isArray(e)){e.forEach(function(A,e){var t=A.type===n.PATH.VECTOR?A:A.start;if(e===0){r.ctx.moveTo(t.x,t.y)}else{r.ctx.lineTo(t.x,t.y)}if(A.type===n.PATH.BEZIER_CURVE){r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)}})}else{this.ctx.arc(e.x+e.radius,e.y+e.radius,e.radius,0,Math.PI*2,true)}this.ctx.closePath()}},{key:"rectangle",value:function A(e,r,t,n,a){this.ctx.fillStyle=a.toString();this.ctx.fillRect(e,r,t,n)}},{key:"renderLinearGradient",value:function A(e,r){var t=this.ctx.createLinearGradient(e.left+r.direction.x1,e.top+r.direction.y1,e.left+r.direction.x0,e.top+r.direction.y0);s(r,t);this.ctx.fillStyle=t;this.ctx.fillRect(e.left,e.top,e.width,e.height)}},{key:"renderRadialGradient",value:function A(e,r){var t=this;var n=e.left+r.center.x;var a=e.top+r.center.y;var B=this.ctx.createRadialGradient(n,a,0,n,a,r.radius.x);if(!B){return}s(r,B);this.ctx.fillStyle=B;if(r.radius.x!==r.radius.y){var i=e.left+.5*e.width;var o=e.top+.5*e.height;var l=r.radius.y/r.radius.x;var u=1/l;this.transform(i,o,[1,0,0,l,0,0],function(){return t.ctx.fillRect(e.left,u*(e.top-o)+o,e.width,e.height*u)})}else{this.ctx.fillRect(e.left,e.top,e.width,e.height)}}},{key:"renderRepeat",value:function A(e,r,t,n,a){this.path(e);this.ctx.fillStyle=this.ctx.createPattern(this.resizeImage(r,t),"repeat");this.ctx.translate(n,a);this.ctx.fill();this.ctx.translate(-n,-a)}},{key:"renderTextNode",value:function A(e,r,t,n,B){var s=this;this.ctx.font=[t.fontStyle,t.fontVariant,t.fontWeight,t.fontSize,t.fontFamily].join(" ");e.forEach(function(A){s.ctx.fillStyle=r.toString();if(B&&A.text.trim().length){B.slice(0).reverse().forEach(function(e){s.ctx.shadowColor=e.color.toString();s.ctx.shadowOffsetX=e.offsetX*s.options.scale;s.ctx.shadowOffsetY=e.offsetY*s.options.scale;s.ctx.shadowBlur=e.blur;s.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)})}else{s.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)}if(n!==null){var e=n.textDecorationColor||r;n.textDecorationLine.forEach(function(r){switch(r){case a.TEXT_DECORATION_LINE.UNDERLINE:var n=s.options.fontMetrics.getMetrics(t),B=n.baseline;s.rectangle(A.bounds.left,Math.round(A.bounds.top+B),A.bounds.width,1,e);break;case a.TEXT_DECORATION_LINE.OVERLINE:s.rectangle(A.bounds.left,Math.round(A.bounds.top),A.bounds.width,1,e);break;case a.TEXT_DECORATION_LINE.LINE_THROUGH:var i=s.options.fontMetrics.getMetrics(t),o=i.middle;s.rectangle(A.bounds.left,Math.ceil(A.bounds.top+o),A.bounds.width,1,e);break}})}})}},{key:"resizeImage",value:function A(e,r){if(e.width===r.width&&e.height===r.height){return e}var t=this.canvas.ownerDocument.createElement("canvas");t.width=r.width;t.height=r.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height);return t}},{key:"setOpacity",value:function A(e){this.ctx.globalAlpha=e}},{key:"transform",value:function A(e,r,t,n){this.ctx.save();this.ctx.translate(e,r);this.ctx.transform(t[0],t[1],t[2],t[3],t[4],t[5]);this.ctx.translate(-e,-r);n();this.ctx.restore()}}]);return A}();e.default=i},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();function n(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function A(e,r,t){n(this,A);this.enabled=typeof window!=="undefined"&&e;this.start=t?t:Date.now();this.id=r}t(A,[{key:"child",value:function e(r){return new A(this.enabled,r,this.start)}},{key:"log",value:function A(){if(this.enabled&&window.console&&window.console.log){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(r,0)))}}},{key:"error",value:function A(){if(this.enabled&&window.console&&window.console.error){for(var e=arguments.length,r=Array(e),t=0;t<e;t++){r[t]=arguments[t]}Function.prototype.bind.call(window.console.error,window.console).apply(window.console,[Date.now()-this.start+"ms",this.id?"html2canvas ("+this.id+"):":"html2canvas:"].concat([].slice.call(r,0)))}}}]);return A}();e.default=a},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parsePadding=e.PADDING_SIDES=undefined;var t=r(1);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=e.PADDING_SIDES={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3};var s=["top","right","bottom","left"];var i=e.parsePadding=function A(e){return s.map(function(A){return new n.default(e.getPropertyValue("padding-"+A))})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.OVERFLOW_WRAP={NORMAL:0,BREAK_WORD:1};var n=e.parseOverflowWrap=function A(e){switch(e){case"break-word":return t.BREAK_WORD;case"normal":default:return t.NORMAL}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.POSITION={STATIC:0,RELATIVE:1,ABSOLUTE:2,FIXED:3,STICKY:4};var n=e.parsePosition=function A(e){switch(e){case"relative":return t.RELATIVE;case"absolute":return t.ABSOLUTE;case"fixed":return t.FIXED;case"sticky":return t.STICKY}return t.STATIC}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.TEXT_TRANSFORM={NONE:0,LOWERCASE:1,UPPERCASE:2,CAPITALIZE:3};var n=e.parseTextTransform=function A(e){switch(e){case"uppercase":return t.UPPERCASE;case"lowercase":return t.LOWERCASE;case"capitalize":return t.CAPITALIZE}return t.NONE}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.reformatInputBounds=e.inlineSelectElement=e.inlineTextAreaElement=e.inlineInputElement=e.getInputBorderRadius=e.INPUT_BACKGROUND=e.INPUT_BORDERS=e.INPUT_COLOR=undefined;var t=r(9);var n=d(t);var a=r(4);var B=r(12);var s=r(50);var i=d(s);var o=r(7);var l=d(o);var u=r(0);var c=d(u);var Q=r(1);var w=d(Q);var U=r(2);var g=r(22);var f=r(3);function d(A){return A&&A.__esModule?A:{default:A}}var C=e.INPUT_COLOR=new c.default([42,42,42]);var F=new c.default([165,165,165]);var E=new c.default([222,222,222]);var h={borderWidth:1,borderColor:F,borderStyle:B.BORDER_STYLE.SOLID};var H=e.INPUT_BORDERS=[h,h,h,h];var v=e.INPUT_BACKGROUND={backgroundColor:E,backgroundImage:[],backgroundClip:a.BACKGROUND_CLIP.PADDING_BOX,backgroundOrigin:a.BACKGROUND_ORIGIN.PADDING_BOX};var p=new w.default("50%");var N=[p,p];var I=[N,N,N,N];var K=new w.default("3px");var T=[K,K];var m=[T,T,T,T];var b=e.getInputBorderRadius=function A(e){return e.type==="radio"?I:m};var y=e.inlineInputElement=function A(e,r){if(e.type==="radio"||e.type==="checkbox"){if(e.checked){var t=Math.min(r.bounds.width,r.bounds.height);r.childNodes.push(e.type==="checkbox"?[new l.default(r.bounds.left+t*.39363,r.bounds.top+t*.79),new l.default(r.bounds.left+t*.16,r.bounds.top+t*.5549),new l.default(r.bounds.left+t*.27347,r.bounds.top+t*.44071),new l.default(r.bounds.left+t*.39694,r.bounds.top+t*.5649),new l.default(r.bounds.left+t*.72983,r.bounds.top+t*.23),new l.default(r.bounds.left+t*.84,r.bounds.top+t*.34085),new l.default(r.bounds.left+t*.39363,r.bounds.top+t*.79)]:new i.default(r.bounds.left+t/4,r.bounds.top+t/4,t/4))}}else{D(M(e),e,r,false)}};var S=e.inlineTextAreaElement=function A(e,r){D(e.value,e,r,true)};var L=e.inlineSelectElement=function A(e,r){var t=e.options[e.selectedIndex||0];D(t?t.text||"":"",e,r,false)};var _=e.reformatInputBounds=function A(e){if(e.width>e.height){e.left+=(e.width-e.height)/2;e.width=e.height}else if(e.width<e.height){e.top+=(e.height-e.width)/2;e.height=e.width}return e};var D=function A(e,r,t,a){var B=r.ownerDocument.body;if(e.length>0&&B){var s=r.ownerDocument.createElement("html2canvaswrapper");(0,f.copyCSSStyles)(r.ownerDocument.defaultView.getComputedStyle(r,null),s,true);s.style.position="absolute";s.style.left=t.bounds.left+"px";s.style.top=t.bounds.top+"px";if(!a){s.style.whiteSpace="nowrap"}var i=r.ownerDocument.createTextNode(e);s.appendChild(i);B.appendChild(s);t.childNodes.push(n.default.fromTextNode(i,t));B.removeChild(s)}};var M=function A(e){var r=e.type==="password"?new Array(e.value.length+1).join("•"):e.value;return r.length===0?e.placeholder||"":r}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseTextBounds=e.TextBounds=undefined;var t=r(2);var n=r(11);var a=r(10);var B=i(a);var s=r(24);function i(A){return A&&A.__esModule?A:{default:A}}function o(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var l=e.TextBounds=function A(e,r){o(this,A);this.text=e;this.bounds=r};var u=e.parseTextBounds=function A(e,r,t){var a=r.style.letterSpacing!==0;var i=a?(0,s.toCodePoints)(e).map(function(A){return(0,s.fromCodePoint)(A)}):(0,s.breakWords)(e,r);var o=i.length;var u=t.parentNode?t.parentNode.ownerDocument.defaultView:null;var w=u?u.pageXOffset:0;var U=u?u.pageYOffset:0;var g=[];var f=0;for(var d=0;d<o;d++){var C=i[d];if(r.style.textDecoration!==n.TEXT_DECORATION.NONE||C.trim().length>0){if(B.default.SUPPORT_RANGE_BOUNDS){g.push(new l(C,Q(t,f,C.length,w,U)))}else{var F=t.splitText(C.length);g.push(new l(C,c(t,w,U)));t=F}}else if(!B.default.SUPPORT_RANGE_BOUNDS){t=t.splitText(C.length)}f+=C.length}return g};var c=function A(e,r,n){var a=e.ownerDocument.createElement("html2canvaswrapper");a.appendChild(e.cloneNode(true));var B=e.parentNode;if(B){B.replaceChild(a,e);var s=(0,t.parseBounds)(a,r,n);if(a.firstChild){B.replaceChild(a.firstChild,a)}return s}return new t.Bounds(0,0,0,0)};var Q=function A(e,r,n,a,B){var s=e.ownerDocument.createRange();s.setStart(e,r);s.setEnd(e,r+n);return t.Bounds.fromClientRect(s.getBoundingClientRect(),a,B)}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();function n(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function A(e){n(this,A);this.element=e}t(A,[{key:"render",value:function A(e){var r=this;this.options=e;this.canvas=document.createElement("canvas");this.ctx=this.canvas.getContext("2d");this.canvas.width=Math.floor(e.width)*e.scale;this.canvas.height=Math.floor(e.height)*e.scale;this.canvas.style.width=e.width+"px";this.canvas.style.height=e.height+"px";e.logger.log("ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale);var t=B(Math.max(e.windowWidth,e.width)*e.scale,Math.max(e.windowHeight,e.height)*e.scale,e.scrollX*e.scale,e.scrollY*e.scale,this.element);return s(t).then(function(A){if(e.backgroundColor){r.ctx.fillStyle=e.backgroundColor.toString();r.ctx.fillRect(0,0,e.width*e.scale,e.height*e.scale)}r.ctx.drawImage(A,-e.x*e.scale,-e.y*e.scale);return r.canvas})}}]);return A}();e.default=a;var B=e.createForeignObjectSVG=function A(e,r,t,n,a){var B="http://www.w3.org/2000/svg";var s=document.createElementNS(B,"svg");var i=document.createElementNS(B,"foreignObject");s.setAttributeNS(null,"width",e);s.setAttributeNS(null,"height",r);i.setAttributeNS(null,"width","100%");i.setAttributeNS(null,"height","100%");i.setAttributeNS(null,"x",t);i.setAttributeNS(null,"y",n);i.setAttributeNS(null,"externalResourcesRequired","true");s.appendChild(i);i.appendChild(a);return s};var s=e.loadSerializedSVG=function A(e){return new Promise(function(A,r){var t=new Image;t.onload=function(){return A(t)};t.onerror=r;t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.breakWords=e.fromCodePoint=e.toCodePoints=undefined;var t=r(46);Object.defineProperty(e,"toCodePoints",{enumerable:true,get:function A(){return t.toCodePoints}});Object.defineProperty(e,"fromCodePoint",{enumerable:true,get:function A(){return t.fromCodePoint}});var n=r(18);var a=e.breakWords=function A(e,r){var a=(0,t.LineBreaker)(e,{lineBreak:r.style.lineBreak,wordBreak:r.style.overflowWrap===n.OVERFLOW_WRAP.BREAK_WORD?"break-word":r.style.wordBreak});var B=[];var s=void 0;while(!(s=a.next()).done){B.push(s.value.slice())}return B}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.FontMetrics=undefined;var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(3);function a(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var B="Hidden Text";var s=e.FontMetrics=function(){function A(e){a(this,A);this._data={};this._document=e}t(A,[{key:"_parseMetrics",value:function A(e){var r=this._document.createElement("div");var t=this._document.createElement("img");var a=this._document.createElement("span");var s=this._document.body;if(!s){throw new Error(true?"No document found for font metrics":"")}r.style.visibility="hidden";r.style.fontFamily=e.fontFamily;r.style.fontSize=e.fontSize;r.style.margin="0";r.style.padding="0";s.appendChild(r);t.src=n.SMALL_IMAGE;t.width=1;t.height=1;t.style.margin="0";t.style.padding="0";t.style.verticalAlign="baseline";a.style.fontFamily=e.fontFamily;a.style.fontSize=e.fontSize;a.style.margin="0";a.style.padding="0";a.appendChild(this._document.createTextNode(B));r.appendChild(a);r.appendChild(t);var i=t.offsetTop-a.offsetTop+2;r.removeChild(a);r.appendChild(this._document.createTextNode(B));r.style.lineHeight="normal";t.style.verticalAlign="super";var o=t.offsetTop-r.offsetTop+2;s.removeChild(r);return{baseline:i,middle:o}}},{key:"getMetrics",value:function A(e){var r=e.fontFamily+" "+e.fontSize;if(this._data[r]===undefined){this._data[r]=this._parseMetrics(e)}return this._data[r]}}]);return A}()},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Proxy=undefined;var t=r(10);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=e.Proxy=function A(e,r){if(!r.proxy){return Promise.reject(true?"No proxy defined":null)}var t=r.proxy;return new Promise(function(A,a){var B=n.default.SUPPORT_CORS_XHR&&n.default.SUPPORT_RESPONSE_TYPE?"blob":"text";var s=n.default.SUPPORT_CORS_XHR?new XMLHttpRequest:new XDomainRequest;s.onload=function(){if(s instanceof XMLHttpRequest){if(s.status===200){if(B==="text"){A(s.response)}else{var r=new FileReader;r.addEventListener("load",function(){return A(r.result)},false);r.addEventListener("error",function(A){return a(A)},false);r.readAsDataURL(s.response)}}else{a(true?"Failed to proxy resource "+e.substring(0,256)+" with status code "+s.status:"")}}else{A(s.responseText)}};s.onerror=a;s.open("GET",t+"?url="+encodeURIComponent(e)+"&responseType="+B);if(B!=="text"&&s instanceof XMLHttpRequest){s.responseType=B}if(r.imageTimeout){var i=r.imageTimeout;s.timeout=i;s.ontimeout=function(){return a(true?"Timed out ("+i+"ms) proxying "+e.substring(0,256):"")}}s.send()})}},function(A,e,r){"use strict";var t=Object.assign||function(A){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r){if(Object.prototype.hasOwnProperty.call(r,t)){A[t]=r[t]}}}return A};var n=r(15);var a=o(n);var B=r(16);var s=o(B);var i=r(28);function o(A){return A&&A.__esModule?A:{default:A}}var l=function A(e,r){var n=r||{};var B=new s.default(typeof n.logging==="boolean"?n.logging:true);B.log("html2canvas "+"1.0.0-alpha.12");if(true&&typeof n.onrendered==="function"){B.error("onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value")}var o=e.ownerDocument;if(!o){return Promise.reject("Provided element is not within a Document")}var l=o.defaultView;var u={async:true,allowTaint:false,backgroundColor:"#ffffff",imageTimeout:15e3,logging:true,proxy:null,removeContainer:true,foreignObjectRendering:false,scale:l.devicePixelRatio||1,target:new a.default(n.canvas),useCORS:false,windowWidth:l.innerWidth,windowHeight:l.innerHeight,scrollX:l.pageXOffset,scrollY:l.pageYOffset};var c=(0,i.renderElement)(e,t({},u,n),B);if(true){return c.catch(function(A){B.error(A);throw A})}return c};l.CanvasRenderer=a.default;A.exports=l},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.renderElement=undefined;var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=r(16);var a=d(n);var B=r(29);var s=r(51);var i=d(s);var o=r(23);var l=d(o);var u=r(10);var c=d(u);var Q=r(2);var w=r(54);var U=r(25);var g=r(0);var f=d(g);function d(A){return A&&A.__esModule?A:{default:A}}var C=e.renderElement=function A(e,r,n){var a=e.ownerDocument;var s=new Q.Bounds(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight);var o=a.documentElement?new f.default(getComputedStyle(a.documentElement).backgroundColor):g.TRANSPARENT;var u=a.body?new f.default(getComputedStyle(a.body).backgroundColor):g.TRANSPARENT;var d=e===a.documentElement?o.isTransparent()?u.isTransparent()?r.backgroundColor?new f.default(r.backgroundColor):null:u:o:r.backgroundColor?new f.default(r.backgroundColor):null;return(r.foreignObjectRendering?c.default.SUPPORT_FOREIGNOBJECT_DRAWING:Promise.resolve(false)).then(function(o){return o?function(A){if(true){n.log("Document cloned, using foreignObject rendering")}return A.inlineFonts(a).then(function(){return A.resourceLoader.ready()}).then(function(){var t=new l.default(A.documentElement);var B=a.defaultView;var s=B.pageXOffset;var i=B.pageYOffset;var o=e.tagName==="HTML"||e.tagName==="BODY";var u=o?(0,Q.parseDocumentSize)(a):(0,Q.parseBounds)(e,s,i),c=u.width,w=u.height,U=u.left,g=u.top;return t.render({backgroundColor:d,logger:n,scale:r.scale,x:typeof r.x==="number"?r.x:U,y:typeof r.y==="number"?r.y:g,width:typeof r.width==="number"?r.width:Math.ceil(c),height:typeof r.height==="number"?r.height:Math.ceil(w),windowWidth:r.windowWidth,windowHeight:r.windowHeight,scrollX:r.scrollX,scrollY:r.scrollY})})}(new w.DocumentCloner(e,r,n,true,A)):(0,w.cloneWindow)(a,s,e,r,n,A).then(function(A){var e=t(A,3),s=e[0],o=e[1],l=e[2];if(true){n.log("Document cloned, using computed rendering")}var u=(0,B.NodeParser)(o,l,n);var c=o.ownerDocument;if(d===u.container.style.background.backgroundColor){u.container.style.background.backgroundColor=g.TRANSPARENT}return l.ready().then(function(A){var e=new U.FontMetrics(c);if(true){n.log("Starting renderer")}var t=c.defaultView;var B=t.pageXOffset;var l=t.pageYOffset;var w=o.tagName==="HTML"||o.tagName==="BODY";var g=w?(0,Q.parseDocumentSize)(a):(0,Q.parseBounds)(o,B,l),f=g.width,C=g.height,F=g.left,E=g.top;var h={backgroundColor:d,fontMetrics:e,imageStore:A,logger:n,scale:r.scale,x:typeof r.x==="number"?r.x:F,y:typeof r.y==="number"?r.y:E,width:typeof r.width==="number"?r.width:Math.ceil(f),height:typeof r.height==="number"?r.height:Math.ceil(C)};if(Array.isArray(r.target)){return Promise.all(r.target.map(function(A){var e=new i.default(A,h);return e.render(u)}))}else{var H=new i.default(r.target,h);var v=H.render(u);if(r.removeContainer===true){if(s.parentNode){s.parentNode.removeChild(s)}else if(true){n.log("Cannot detach cloned iframe as it is not in the DOM anymore")}}return v}})})})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.NodeParser=undefined;var t=r(30);var n=c(t);var a=r(6);var B=c(a);var s=r(9);var i=c(s);var o=r(21);var l=r(14);var u=r(8);function c(A){return A&&A.__esModule?A:{default:A}}var Q=e.NodeParser=function A(e,r,t){if(true){t.log("Starting node parsing")}var a=0;var s=new B.default(e,null,r,a++);var i=new n.default(s,null,true);U(e,s,i,r,a);if(true){t.log("Finished parsing node tree")}return i};var w=["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"];var U=function A(e,r,t,a,s){if(true&&s>5e4){throw new Error("Recursion error while parsing node tree")}for(var c=e.firstChild,Q;c;c=Q){Q=c.nextSibling;var U=c.ownerDocument.defaultView;if(c instanceof U.Text||c instanceof Text||U.parent&&c instanceof U.parent.Text){if(c.data.trim().length>0){r.childNodes.push(i.default.fromTextNode(c,r))}}else if(c instanceof U.HTMLElement||c instanceof HTMLElement||U.parent&&c instanceof U.parent.HTMLElement){if(w.indexOf(c.nodeName)===-1){var d=new B.default(c,r,a,s++);if(d.isVisible()){if(c.tagName==="INPUT"){(0,o.inlineInputElement)(c,d)}else if(c.tagName==="TEXTAREA"){(0,o.inlineTextAreaElement)(c,d)}else if(c.tagName==="SELECT"){(0,o.inlineSelectElement)(c,d)}else if(d.style.listStyle&&d.style.listStyle.listStyleType!==u.LIST_STYLE_TYPE.NONE){(0,l.inlineListItemElement)(c,d,a)}var C=c.tagName!=="TEXTAREA";var F=g(d,c);if(F||f(d)){var E=F||d.isPositioned()?t.getRealParentStackingContext():t;var h=new n.default(d,E,F);E.contexts.push(h);if(C){A(c,d,h,a,s)}}else{t.children.push(d);if(C){A(c,d,t,a,s)}}}}}else if(c instanceof U.SVGSVGElement||c instanceof SVGSVGElement||U.parent&&c instanceof U.parent.SVGSVGElement){var H=new B.default(c,r,a,s++);var v=g(H,c);if(v||f(H)){var p=v||H.isPositioned()?t.getRealParentStackingContext():t;var N=new n.default(H,p,v);p.contexts.push(N)}else{t.children.push(H)}}}};var g=function A(e,r){return e.isRootElement()||e.isPositionedWithZIndex()||e.style.opacity<1||e.isTransformed()||d(e,r)};var f=function A(e){return e.isPositioned()||e.isFloating()};var d=function A(e,r){return r.nodeName==="BODY"&&e.parent instanceof B.default&&e.parent.style.background.backgroundColor.isTransparent()}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(6);var a=s(n);var B=r(19);function s(A){return A&&A.__esModule?A:{default:A}}function i(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function A(e,r,t){i(this,A);this.container=e;this.parent=r;this.contexts=[];this.children=[];this.treatAsRealStackingContext=t}t(A,[{key:"getOpacity",value:function A(){return this.parent?this.container.style.opacity*this.parent.getOpacity():this.container.style.opacity}},{key:"getRealParentStackingContext",value:function A(){return!this.parent||this.treatAsRealStackingContext?this:this.parent.getRealParentStackingContext()}}]);return A}();e.default=o},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});function t(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var n=function A(e,r){t(this,A);this.width=e;this.height=r};e.default=n},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(5);var a=r(7);var B=s(a);function s(A){return A&&A.__esModule?A:{default:A}}function i(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=function A(e,r,t){return new B.default(e.x+(r.x-e.x)*t,e.y+(r.y-e.y)*t)};var l=function(){function A(e,r,t,a){i(this,A);this.type=n.PATH.BEZIER_CURVE;this.start=e;this.startControl=r;this.endControl=t;this.end=a}t(A,[{key:"subdivide",value:function e(r,t){var n=o(this.start,this.startControl,r);var a=o(this.startControl,this.endControl,r);var B=o(this.endControl,this.end,r);var s=o(n,a,r);var i=o(a,B,r);var l=o(s,i,r);return t?new A(this.start,n,s,l):new A(l,i,B,this.end)}},{key:"reverse",value:function e(){return new A(this.end,this.endControl,this.startControl,this.start)}}]);return A}();e.default=l},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseBorderRadius=undefined;var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=r(1);var a=B(n);function B(A){return A&&A.__esModule?A:{default:A}}var s=["top-left","top-right","bottom-right","bottom-left"];var i=e.parseBorderRadius=function A(e){return s.map(function(A){var r=e.getPropertyValue("border-"+A+"-radius");var n=r.split(" ").map(a.default.create),B=t(n,2),s=B[0],i=B[1];return typeof i==="undefined"?[s,s]:[s,i]})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.DISPLAY={NONE:1<<0,BLOCK:1<<1,INLINE:1<<2,RUN_IN:1<<3,FLOW:1<<4,FLOW_ROOT:1<<5,TABLE:1<<6,FLEX:1<<7,GRID:1<<8,RUBY:1<<9,SUBGRID:1<<10,LIST_ITEM:1<<11,TABLE_ROW_GROUP:1<<12,TABLE_HEADER_GROUP:1<<13,TABLE_FOOTER_GROUP:1<<14,TABLE_ROW:1<<15,TABLE_CELL:1<<16,TABLE_COLUMN_GROUP:1<<17,TABLE_COLUMN:1<<18,TABLE_CAPTION:1<<19,RUBY_BASE:1<<20,RUBY_TEXT:1<<21,RUBY_BASE_CONTAINER:1<<22,RUBY_TEXT_CONTAINER:1<<23,CONTENTS:1<<24,INLINE_BLOCK:1<<25,INLINE_LIST_ITEM:1<<26,INLINE_TABLE:1<<27,INLINE_FLEX:1<<28,INLINE_GRID:1<<29};var n=function A(e){switch(e){case"block":return t.BLOCK;case"inline":return t.INLINE;case"run-in":return t.RUN_IN;case"flow":return t.FLOW;case"flow-root":return t.FLOW_ROOT;case"table":return t.TABLE;case"flex":return t.FLEX;case"grid":return t.GRID;case"ruby":return t.RUBY;case"subgrid":return t.SUBGRID;case"list-item":return t.LIST_ITEM;case"table-row-group":return t.TABLE_ROW_GROUP;case"table-header-group":return t.TABLE_HEADER_GROUP;case"table-footer-group":return t.TABLE_FOOTER_GROUP;case"table-row":return t.TABLE_ROW;case"table-cell":return t.TABLE_CELL;case"table-column-group":return t.TABLE_COLUMN_GROUP;case"table-column":return t.TABLE_COLUMN;case"table-caption":return t.TABLE_CAPTION;case"ruby-base":return t.RUBY_BASE;case"ruby-text":return t.RUBY_TEXT;case"ruby-base-container":return t.RUBY_BASE_CONTAINER;case"ruby-text-container":return t.RUBY_TEXT_CONTAINER;case"contents":return t.CONTENTS;case"inline-block":return t.INLINE_BLOCK;case"inline-list-item":return t.INLINE_LIST_ITEM;case"inline-table":return t.INLINE_TABLE;case"inline-flex":return t.INLINE_FLEX;case"inline-grid":return t.INLINE_GRID}return t.NONE};var a=function A(e,r){return e|n(r)};var B=e.parseDisplay=function A(e){return e.split(" ").reduce(a,0)}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.FLOAT={NONE:0,LEFT:1,RIGHT:2,INLINE_START:3,INLINE_END:4};var n=e.parseCSSFloat=function A(e){switch(e){case"left":return t.LEFT;case"right":return t.RIGHT;case"inline-start":return t.INLINE_START;case"inline-end":return t.INLINE_END}return t.NONE}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function A(e){switch(e){case"normal":return 400;case"bold":return 700}var r=parseInt(e,10);return isNaN(r)?400:r};var n=e.parseFont=function A(e){var r=e.fontFamily;var n=e.fontSize;var a=e.fontStyle;var B=e.fontVariant;var s=t(e.fontWeight);return{fontFamily:r,fontSize:n,fontStyle:a,fontVariant:B,fontWeight:s}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.parseLetterSpacing=function A(e){if(e==="normal"){return 0}var r=parseFloat(e);return isNaN(r)?0:r}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.LINE_BREAK={NORMAL:"normal",STRICT:"strict"};var n=e.parseLineBreak=function A(e){switch(e){case"strict":return t.STRICT;case"normal":default:return t.NORMAL}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseMargin=undefined;var t=r(1);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=["top","right","bottom","left"];var s=e.parseMargin=function A(e){return B.map(function(A){return new n.default(e.getPropertyValue("margin-"+A))})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.OVERFLOW={VISIBLE:0,HIDDEN:1,SCROLL:2,AUTO:3};var n=e.parseOverflow=function A(e){switch(e){case"hidden":return t.HIDDEN;case"scroll":return t.SCROLL;case"auto":return t.AUTO;case"visible":default:return t.VISIBLE}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseTextShadow=undefined;var t=r(0);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=/^([+-]|\d|\.)$/i;var s=e.parseTextShadow=function A(e){if(e==="none"||typeof e!=="string"){return null}var r="";var t=false;var a=[];var s=[];var i=0;var o=null;var l=function A(){if(r.length){if(t){a.push(parseFloat(r))}else{o=new n.default(r)}}t=false;r=""};var u=function A(){if(a.length&&o!==null){s.push({color:o,offsetX:a[0]||0,offsetY:a[1]||0,blur:a[2]||0})}a.splice(0,a.length);o=null};for(var c=0;c<e.length;c++){var Q=e[c];switch(Q){case"(":r+=Q;i++;break;case")":r+=Q;i--;break;case",":if(i===0){l();u()}else{r+=Q}break;case" ":if(i===0){l()}else{r+=Q}break;default:if(r.length===0&&B.test(Q)){t=true}r+=Q}}l();u();if(s.length===0){return null}return s}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseTransform=undefined;var t=r(1);var n=a(t);function a(A){return A&&A.__esModule?A:{default:A}}var B=function A(e){return parseFloat(e.trim())};var s=/(matrix|matrix3d)\((.+)\)/;var i=e.parseTransform=function A(e){var r=l(e.transform||e.webkitTransform||e.mozTransform||e.msTransform||e.oTransform);if(r===null){return null}return{transform:r,transformOrigin:o(e.transformOrigin||e.webkitTransformOrigin||e.mozTransformOrigin||e.msTransformOrigin||e.oTransformOrigin)}};var o=function A(e){if(typeof e!=="string"){var r=new n.default("0");return[r,r]}var t=e.split(" ").map(n.default.create);return[t[0],t[1]]};var l=function A(e){if(e==="none"||typeof e!=="string"){return null}var r=e.match(s);if(r){if(r[1]==="matrix"){var t=r[2].split(",").map(B);return[t[0],t[1],t[2],t[3],t[4],t[5]]}else{var n=r[2].split(",").map(B);return[n[0],n[1],n[4],n[5],n[12],n[13]]}}return null}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.VISIBILITY={VISIBLE:0,HIDDEN:1,COLLAPSE:2};var n=e.parseVisibility=function A(e){switch(e){case"hidden":return t.HIDDEN;case"collapse":return t.COLLAPSE;case"visible":default:return t.VISIBLE}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.WORD_BREAK={NORMAL:"normal",BREAK_ALL:"break-all",KEEP_ALL:"keep-all"};var n=e.parseWordBreak=function A(e){switch(e){case"break-all":return t.BREAK_ALL;case"keep-all":return t.KEEP_ALL;case"normal":default:return t.NORMAL}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=e.parseZIndex=function A(e){var r=e==="auto";return{auto:r,order:r?0:parseInt(e,10)}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=r(13);Object.defineProperty(e,"toCodePoints",{enumerable:true,get:function A(){return t.toCodePoints}});Object.defineProperty(e,"fromCodePoint",{enumerable:true,get:function A(){return t.fromCodePoint}});var n=r(47);Object.defineProperty(e,"LineBreaker",{enumerable:true,get:function A(){return n.LineBreaker}})},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LineBreaker=e.inlineBreakOpportunities=e.lineBreakAtIndex=e.codePointsToCharacterClasses=e.UnicodeTrie=e.BREAK_ALLOWED=e.BREAK_NOT_ALLOWED=e.BREAK_MANDATORY=e.classes=e.LETTER_NUMBER_MODIFIER=undefined;var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var a=r(48);var B=r(49);var s=o(B);var i=r(13);function o(A){return A&&A.__esModule?A:{default:A}}function l(A){if(Array.isArray(A)){for(var e=0,r=Array(A.length);e<A.length;e++){r[e]=A[e]}return r}else{return Array.from(A)}}function u(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var c=e.LETTER_NUMBER_MODIFIER=50;var Q=1;var w=2;var U=3;var g=4;var f=5;var d=6;var C=7;var F=8;var E=9;var h=10;var H=11;var v=12;var p=13;var N=14;var I=15;var K=16;var T=17;var m=18;var b=19;var y=20;var S=21;var L=22;var _=23;var D=24;var M=25;var O=26;var R=27;var P=28;var X=29;var z=30;var k=31;var x=32;var V=33;var J=34;var G=35;var Y=36;var W=37;var j=38;var q=39;var Z=40;var $=41;var AA=42;var eA=43;var rA=e.classes={BK:Q,CR:w,LF:U,CM:g,NL:f,SG:d,WJ:C,ZW:F,GL:E,SP:h,ZWJ:H,B2:v,BA:p,BB:N,HY:I,CB:K,CL:T,CP:m,EX:b,IN:y,NS:S,OP:L,QU:_,IS:D,NU:M,PO:O,PR:R,SY:P,AI:X,AL:z,CJ:k,EB:x,EM:V,H2:J,H3:G,HL:Y,ID:W,JL:j,JV:q,JT:Z,RI:$,SA:AA,XX:eA};var tA=e.BREAK_MANDATORY="!";var nA=e.BREAK_NOT_ALLOWED="×";var aA=e.BREAK_ALLOWED="÷";var BA=e.UnicodeTrie=(0,a.createTrieFromBase64)(s.default);var sA=[z,Y];var iA=[Q,w,U,f];var oA=[h,F];var lA=[R,O];var uA=iA.concat(oA);var cA=[j,q,Z,J,G];var QA=[I,p];var wA=e.codePointsToCharacterClasses=function A(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"strict";var t=[];var n=[];var a=[];e.forEach(function(A,e){var B=BA.get(A);if(B>c){a.push(true);B-=c}else{a.push(false)}if(["normal","auto","loose"].indexOf(r)!==-1){if([8208,8211,12316,12448].indexOf(A)!==-1){n.push(e);return t.push(K)}}if(B===g||B===H){if(e===0){n.push(e);return t.push(z)}var s=t[e-1];if(uA.indexOf(s)===-1){n.push(n[e-1]);return t.push(s)}n.push(e);return t.push(z)}n.push(e);if(B===k){return t.push(r==="strict"?S:W)}if(B===AA){return t.push(z)}if(B===X){return t.push(z)}if(B===eA){if(A>=131072&&A<=196605||A>=196608&&A<=262141){return t.push(W)}else{return t.push(z)}}t.push(B)});return[n,t,a]};var UA=function A(e,r,t,n){var a=n[t];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a){var B=t;while(B<=n.length){B++;var s=n[B];if(s===r){return true}if(s!==h){break}}}if(a===h){var i=t;while(i>0){i--;var o=n[i];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o){var l=t;while(l<=n.length){l++;var u=n[l];if(u===r){return true}if(u!==h){break}}}if(o!==h){break}}}return false};var gA=function A(e,r){var t=e;while(t>=0){var n=r[t];if(n===h){t--}else{return n}}return 0};var fA=function A(e,r,t,n,a){if(t[n]===0){return nA}var B=n-1;if(Array.isArray(a)&&a[B]===true){return nA}var s=B-1;var i=B+1;var o=r[B];var l=s>=0?r[s]:0;var u=r[i];if(o===w&&u===U){return nA}if(iA.indexOf(o)!==-1){return tA}if(iA.indexOf(u)!==-1){return nA}if(oA.indexOf(u)!==-1){return nA}if(gA(B,r)===F){return aA}if(BA.get(e[B])===H&&(u===W||u===x||u===V)){return nA}if(o===C||u===C){return nA}if(o===E){return nA}if([h,p,I].indexOf(o)===-1&&u===E){return nA}if([T,m,b,D,P].indexOf(u)!==-1){return nA}if(gA(B,r)===L){return nA}if(UA(_,L,B,r)){return nA}if(UA([T,m],S,B,r)){return nA}if(UA(v,v,B,r)){return nA}if(o===h){return aA}if(o===_||u===_){return nA}if(u===K||o===K){return aA}if([p,I,S].indexOf(u)!==-1||o===N){return nA}if(l===Y&&QA.indexOf(o)!==-1){return nA}if(o===P&&u===Y){return nA}if(u===y&&sA.concat(y,b,M,W,x,V).indexOf(o)!==-1){return nA}if(sA.indexOf(u)!==-1&&o===M||sA.indexOf(o)!==-1&&u===M){return nA}if(o===R&&[W,x,V].indexOf(u)!==-1||[W,x,V].indexOf(o)!==-1&&u===O){return nA}if(sA.indexOf(o)!==-1&&lA.indexOf(u)!==-1||lA.indexOf(o)!==-1&&sA.indexOf(u)!==-1){return nA}if([R,O].indexOf(o)!==-1&&(u===M||[L,I].indexOf(u)!==-1&&r[i+1]===M)||[L,I].indexOf(o)!==-1&&u===M||o===M&&[M,P,D].indexOf(u)!==-1){return nA}if([M,P,D,T,m].indexOf(u)!==-1){var c=B;while(c>=0){var Q=r[c];if(Q===M){return nA}else if([P,D].indexOf(Q)!==-1){c--}else{break}}}if([R,O].indexOf(u)!==-1){var g=[T,m].indexOf(o)!==-1?s:B;while(g>=0){var f=r[g];if(f===M){return nA}else if([P,D].indexOf(f)!==-1){g--}else{break}}}if(j===o&&[j,q,J,G].indexOf(u)!==-1||[q,J].indexOf(o)!==-1&&[q,Z].indexOf(u)!==-1||[Z,G].indexOf(o)!==-1&&u===Z){return nA}if(cA.indexOf(o)!==-1&&[y,O].indexOf(u)!==-1||cA.indexOf(u)!==-1&&o===R){return nA}if(sA.indexOf(o)!==-1&&sA.indexOf(u)!==-1){return nA}if(o===D&&sA.indexOf(u)!==-1){return nA}if(sA.concat(M).indexOf(o)!==-1&&u===L||sA.concat(M).indexOf(u)!==-1&&o===m){return nA}if(o===$&&u===$){var d=t[B];var X=1;while(d>0){d--;if(r[d]===$){X++}else{break}}if(X%2!==0){return nA}}if(o===x&&u===V){return nA}return aA};var dA=e.lineBreakAtIndex=function A(e,r){if(r===0){return nA}if(r>=e.length){return tA}var t=wA(e),a=n(t,2),B=a[0],s=a[1];return fA(e,s,B,r)};var CA=function A(e,r){if(!r){r={lineBreak:"normal",wordBreak:"normal"}}var t=wA(e,r.lineBreak),a=n(t,3),B=a[0],s=a[1],i=a[2];if(r.wordBreak==="break-all"||r.wordBreak==="break-word"){s=s.map(function(A){return[M,z,AA].indexOf(A)!==-1?W:A})}var o=r.wordBreak==="keep-all"?i.map(function(A,r){return A&&e[r]>=19968&&e[r]<=40959}):null;return[B,s,o]};var FA=e.inlineBreakOpportunities=function A(e,r){var t=(0,i.toCodePoints)(e);var a=nA;var B=CA(t,r),s=n(B,3),o=s[0],l=s[1],u=s[2];t.forEach(function(A,e){a+=(0,i.fromCodePoint)(A)+(e>=t.length-1?tA:fA(t,l,o,e+1,u))});return a};var EA=function(){function A(e,r,t,n){u(this,A);this._codePoints=e;this.required=r===tA;this.start=t;this.end=n}t(A,[{key:"slice",value:function A(){return i.fromCodePoint.apply(undefined,l(this._codePoints.slice(this.start,this.end)))}}]);return A}();var hA=e.LineBreaker=function A(e,r){var t=(0,i.toCodePoints)(e);var a=CA(t,r),B=n(a,3),s=B[0],o=B[1],l=B[2];var u=t.length;var c=0;var Q=0;return{next:function A(){if(Q>=u){return{done:true}}var e=nA;while(Q<u&&(e=fA(t,o,s,++Q,l))===nA){}if(e!==nA||Q===u){var r=new EA(t,e,c,Q);c=Q;return{value:r,done:false}}return{done:true}}}}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Trie=e.createTrieFromBase64=e.UTRIE2_INDEX_2_MASK=e.UTRIE2_INDEX_2_BLOCK_LENGTH=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=e.UTRIE2_INDEX_1_OFFSET=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=e.UTRIE2_INDEX_2_BMP_LENGTH=e.UTRIE2_LSCP_INDEX_2_LENGTH=e.UTRIE2_DATA_MASK=e.UTRIE2_DATA_BLOCK_LENGTH=e.UTRIE2_LSCP_INDEX_2_OFFSET=e.UTRIE2_SHIFT_1_2=e.UTRIE2_INDEX_SHIFT=e.UTRIE2_SHIFT_1=e.UTRIE2_SHIFT_2=undefined;var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(13);function a(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var B=e.UTRIE2_SHIFT_2=5;var s=e.UTRIE2_SHIFT_1=6+5;var i=e.UTRIE2_INDEX_SHIFT=2;var o=e.UTRIE2_SHIFT_1_2=s-B;var l=e.UTRIE2_LSCP_INDEX_2_OFFSET=65536>>B;var u=e.UTRIE2_DATA_BLOCK_LENGTH=1<<B;var c=e.UTRIE2_DATA_MASK=u-1;var Q=e.UTRIE2_LSCP_INDEX_2_LENGTH=1024>>B;var w=e.UTRIE2_INDEX_2_BMP_LENGTH=l+Q;var U=e.UTRIE2_UTF8_2B_INDEX_2_OFFSET=w;var g=e.UTRIE2_UTF8_2B_INDEX_2_LENGTH=2048>>6;var f=e.UTRIE2_INDEX_1_OFFSET=U+g;var d=e.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>s;var C=e.UTRIE2_INDEX_2_BLOCK_LENGTH=1<<o;var F=e.UTRIE2_INDEX_2_MASK=C-1;var E=e.createTrieFromBase64=function A(e){var r=(0,n.decode)(e);var t=Array.isArray(r)?(0,n.polyUint32Array)(r):new Uint32Array(r);var a=Array.isArray(r)?(0,n.polyUint16Array)(r):new Uint16Array(r);var B=24;var s=a.slice(B/2,t[4]/2);var i=t[5]===2?a.slice((B+t[4])/2):t.slice(Math.ceil((B+t[4])/4));return new h(t[0],t[1],t[2],t[3],s,i)};var h=e.Trie=function(){function A(e,r,t,n,B,s){a(this,A);this.initialValue=e;this.errorValue=r;this.highStart=t;this.highValueIndex=n;this.index=B;this.data=s}t(A,[{key:"get",value:function A(e){var r=void 0;if(e>=0){if(e<55296||e>56319&&e<=65535){r=this.index[e>>B];r=(r<<i)+(e&c);return this.data[r]}if(e<=65535){r=this.index[l+(e-55296>>B)];r=(r<<i)+(e&c);return this.data[r]}if(e<this.highStart){r=f-d+(e>>s);r=this.index[r];r+=e>>B&F;r=this.index[r];r=(r<<i)+(e&c);return this.data[r]}if(e<=1114111){return this.data[this.highValueIndex]}}return this.errorValue}}]);return A}()},function(A,e,r){"use strict";A.exports="KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=r(5);function n(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var a=function A(e,r,a){n(this,A);this.type=t.PATH.CIRCLE;this.x=e;this.y=r;this.radius=a;if(true){if(isNaN(e)){console.error("Invalid x value given for Circle")}if(isNaN(r)){console.error("Invalid y value given for Circle")}if(isNaN(a)){console.error("Invalid radius value given for Circle")}}};e.default=a},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var a=r(2);var B=r(25);var s=r(52);var i=r(9);var o=c(i);var l=r(4);var u=r(12);function c(A){return A&&A.__esModule?A:{default:A}}function Q(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var w=function(){function A(e,r){Q(this,A);this.target=e;this.options=r;e.render(r)}n(A,[{key:"renderNode",value:function A(e){if(e.isVisible()){this.renderNodeBackgroundAndBorders(e);this.renderNodeContent(e)}}},{key:"renderNodeContent",value:function A(e){var r=this;var t=function A(){if(e.childNodes.length){e.childNodes.forEach(function(A){if(A instanceof o.default){var t=A.parent.style;r.target.renderTextNode(A.bounds,t.color,t.font,t.textDecoration,t.textShadow)}else{r.target.drawShape(A,e.style.color)}})}if(e.image){var t=r.options.imageStore.get(e.image);if(t){var n=(0,a.calculateContentBox)(e.bounds,e.style.padding,e.style.border);var B=typeof t.width==="number"&&t.width>0?t.width:n.width;var s=typeof t.height==="number"&&t.height>0?t.height:n.height;if(B>0&&s>0){r.target.clip([(0,a.calculatePaddingBoxPath)(e.curvedBounds)],function(){r.target.drawImage(t,new a.Bounds(0,0,B,s),n)})}}}};var n=e.getClipPaths();if(n.length){this.target.clip(n,t)}else{t()}}},{key:"renderNodeBackgroundAndBorders",value:function A(e){var r=this;var t=!e.style.background.backgroundColor.isTransparent()||e.style.background.backgroundImage.length;var n=e.style.border.some(function(A){return A.borderStyle!==u.BORDER_STYLE.NONE&&!A.borderColor.isTransparent()});var a=function A(){var n=(0,l.calculateBackgroungPaintingArea)(e.curvedBounds,e.style.background.backgroundClip);if(t){r.target.clip([n],function(){if(!e.style.background.backgroundColor.isTransparent()){r.target.fill(e.style.background.backgroundColor)}r.renderBackgroundImage(e)})}e.style.border.forEach(function(A,t){if(A.borderStyle!==u.BORDER_STYLE.NONE&&!A.borderColor.isTransparent()){r.renderBorder(A,t,e.curvedBounds)}})};if(t||n){var B=e.parent?e.parent.getClipPaths():[];if(B.length){this.target.clip(B,a)}else{a()}}}},{key:"renderBackgroundImage",value:function A(e){var r=this;e.style.background.backgroundImage.slice(0).reverse().forEach(function(A){if(A.source.method==="url"&&A.source.args.length){r.renderBackgroundRepeat(e,A)}else if(/gradient/i.test(A.source.method)){r.renderBackgroundGradient(e,A)}})}},{key:"renderBackgroundRepeat",value:function A(e,r){var t=this.options.imageStore.get(r.source.args[0]);if(t){var n=(0,l.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border);var a=(0,l.calculateBackgroundSize)(r,t,n);var B=(0,l.calculateBackgroundPosition)(r.position,a,n);var s=(0,l.calculateBackgroundRepeatPath)(r,B,a,n,e.bounds);var i=Math.round(n.left+B.x);var o=Math.round(n.top+B.y);this.target.renderRepeat(s,t,a,i,o)}}},{key:"renderBackgroundGradient",value:function A(e,r){var t=(0,l.calculateBackgroungPositioningArea)(e.style.background.backgroundOrigin,e.bounds,e.style.padding,e.style.border);var n=(0,l.calculateGradientBackgroundSize)(r,t);var B=(0,l.calculateBackgroundPosition)(r.position,n,t);var i=new a.Bounds(Math.round(t.left+B.x),Math.round(t.top+B.y),n.width,n.height);var o=(0,s.parseGradient)(e,r.source,i);if(o){switch(o.type){case s.GRADIENT_TYPE.LINEAR_GRADIENT:this.target.renderLinearGradient(i,o);break;case s.GRADIENT_TYPE.RADIAL_GRADIENT:this.target.renderRadialGradient(i,o);break}}}},{key:"renderBorder",value:function A(e,r,t){this.target.drawShape((0,a.parsePathForBorder)(t,r),e.borderColor)}},{key:"renderStack",value:function A(e){var r=this;if(e.container.isVisible()){var t=e.getOpacity();if(t!==this._opacity){this.target.setOpacity(e.getOpacity());this._opacity=t}var n=e.container.style.transform;if(n!==null){this.target.transform(e.container.bounds.left+n.transformOrigin[0].value,e.container.bounds.top+n.transformOrigin[1].value,n.transform,function(){return r.renderStackContent(e)})}else{this.renderStackContent(e)}}}},{key:"renderStackContent",value:function A(e){var r=g(e),n=t(r,5),a=n[0],B=n[1],s=n[2],i=n[3],o=n[4];var l=U(e),u=t(l,2),c=u[0],Q=u[1];this.renderNodeBackgroundAndBorders(e.container);a.sort(f).forEach(this.renderStack,this);this.renderNodeContent(e.container);Q.forEach(this.renderNode,this);i.forEach(this.renderStack,this);o.forEach(this.renderStack,this);c.forEach(this.renderNode,this);B.forEach(this.renderStack,this);s.sort(f).forEach(this.renderStack,this)}},{key:"render",value:function A(e){var r=this;if(this.options.backgroundColor){this.target.rectangle(this.options.x,this.options.y,this.options.width,this.options.height,this.options.backgroundColor)}this.renderStack(e);var t=this.target.getTarget();if(true){return t.then(function(A){r.options.logger.log("Render completed");return A})}return t}}]);return A}();e.default=w;var U=function A(e){var r=[];var t=[];var n=e.children.length;for(var a=0;a<n;a++){var B=e.children[a];if(B.isInlineLevel()){r.push(B)}else{t.push(B)}}return[r,t]};var g=function A(e){var r=[];var t=[];var n=[];var a=[];var B=[];var s=e.contexts.length;for(var i=0;i<s;i++){var o=e.contexts[i];if(o.container.isPositioned()||o.container.style.opacity<1||o.container.isTransformed()){if(o.container.style.zIndex.order<0){r.push(o)}else if(o.container.style.zIndex.order>0){n.push(o)}else{t.push(o)}}else{if(o.container.isFloating()){a.push(o)}else{B.push(o)}}}return[r,t,n,a,B]};var f=function A(e,r){if(e.container.style.zIndex.order>r.container.style.zIndex.order){return 1}else if(e.container.style.zIndex.order<r.container.style.zIndex.order){return-1}return e.container.index>r.container.index?1:-1}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.transformWebkitRadialGradientArgs=e.parseGradient=e.RadialGradient=e.LinearGradient=e.RADIAL_GRADIENT_SHAPE=e.GRADIENT_TYPE=undefined;var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=r(6);var a=c(n);var B=r(53);var s=r(0);var i=c(s);var o=r(1);var l=c(o);var u=r(3);function c(A){return A&&A.__esModule?A:{default:A}}function Q(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var w=/^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i;var U=/^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i;var g=/(px)|%|( 0)$/i;var f=/^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i;var d=/^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i;var C=e.GRADIENT_TYPE={LINEAR_GRADIENT:0,RADIAL_GRADIENT:1};var F=e.RADIAL_GRADIENT_SHAPE={CIRCLE:0,ELLIPSE:1};var E={left:new l.default("0%"),top:new l.default("0%"),center:new l.default("50%"),right:new l.default("100%"),bottom:new l.default("100%")};var h=e.LinearGradient=function A(e,r){Q(this,A);this.type=C.LINEAR_GRADIENT;this.colorStops=e;this.direction=r};var H=e.RadialGradient=function A(e,r,t,n){Q(this,A);this.type=C.RADIAL_GRADIENT;this.colorStops=e;this.shape=r;this.center=t;this.radius=n};var v=e.parseGradient=function A(e,r,t){var n=r.args,a=r.method,B=r.prefix;if(a==="linear-gradient"){return N(n,t,!!B)}else if(a==="gradient"&&n[0]==="linear"){return N(["to bottom"].concat(_(n.slice(3))),t,!!B)}else if(a==="radial-gradient"){return I(e,B==="-webkit-"?L(n):n,t)}else if(a==="gradient"&&n[0]==="radial"){return I(e,_(L(n.slice(1))),t)}};var p=function A(e,r,t){var n=[];for(var a=r;a<e.length;a++){var B=e[a];var s=g.test(B);var o=B.lastIndexOf(" ");var u=new i.default(s?B.substring(0,o):B);var c=s?new l.default(B.substring(o+1)):a===r?new l.default("0%"):a===e.length-1?new l.default("100%"):null;n.push({color:u,stop:c})}var Q=n.map(function(A){var e=A.color,r=A.stop;var n=t===0?0:r?r.getAbsoluteValue(t)/t:null;return{color:e,stop:n}});var w=Q[0].stop;for(var U=0;U<Q.length;U++){if(w!==null){var f=Q[U].stop;if(f===null){var d=U;while(Q[d].stop===null){d++}var C=d-U+1;var F=Q[d].stop;var E=(F-w)/C;for(;U<d;U++){w=Q[U].stop=w+E}}else{w=f}}}return Q};var N=function A(e,r,t){var n=(0,B.parseAngle)(e[0]);var a=w.test(e[0]);var s=a||n!==null||U.test(e[0]);var i=s?n!==null?K(t?n-Math.PI*.5:n,r):a?m(e[0],r):b(e[0],r):K(Math.PI,r);var o=s?1:0;var l=Math.min((0,u.distance)(Math.abs(i.x0)+Math.abs(i.x1),Math.abs(i.y0)+Math.abs(i.y1)),r.width*2,r.height*2);return new h(p(e,o,l),i)};var I=function A(e,r,t){var n=r[0].match(d);var a=n&&(n[1]==="circle"||n[3]!==undefined&&n[5]===undefined)?F.CIRCLE:F.ELLIPSE;var B={};var s={};if(n){if(n[3]!==undefined){B.x=(0,o.calculateLengthFromValueWithUnit)(e,n[3],n[4]).getAbsoluteValue(t.width)}if(n[5]!==undefined){B.y=(0,o.calculateLengthFromValueWithUnit)(e,n[5],n[6]).getAbsoluteValue(t.height)}if(n[7]){s.x=E[n[7].toLowerCase()]}else if(n[8]!==undefined){s.x=(0,o.calculateLengthFromValueWithUnit)(e,n[8],n[9])}if(n[10]){s.y=E[n[10].toLowerCase()]}else if(n[11]!==undefined){s.y=(0,o.calculateLengthFromValueWithUnit)(e,n[11],n[12])}}var i={x:s.x===undefined?t.width/2:s.x.getAbsoluteValue(t.width),y:s.y===undefined?t.height/2:s.y.getAbsoluteValue(t.height)};var l=S(n&&n[2]||"farthest-corner",a,i,B,t);return new H(p(r,n?1:0,Math.min(l.x,l.y)),a,i,l)};var K=function A(e,r){var t=r.width;var n=r.height;var a=t*.5;var B=n*.5;var s=Math.abs(t*Math.sin(e))+Math.abs(n*Math.cos(e));var i=s/2;var o=a+Math.sin(e)*i;var l=B-Math.cos(e)*i;var u=t-o;var c=n-l;return{x0:o,x1:u,y0:l,y1:c}};var T=function A(e){return Math.acos(e.width/2/((0,u.distance)(e.width,e.height)/2))};var m=function A(e,r){switch(e){case"bottom":case"to top":return K(0,r);case"left":case"to right":return K(Math.PI/2,r);case"right":case"to left":return K(3*Math.PI/2,r);case"top right":case"right top":case"to bottom left":case"to left bottom":return K(Math.PI+T(r),r);case"top left":case"left top":case"to bottom right":case"to right bottom":return K(Math.PI-T(r),r);case"bottom left":case"left bottom":case"to top right":case"to right top":return K(T(r),r);case"bottom right":case"right bottom":case"to top left":case"to left top":return K(2*Math.PI-T(r),r);case"top":case"to bottom":default:return K(Math.PI,r)}};var b=function A(e,r){var n=e.split(" ").map(parseFloat),a=t(n,2),B=a[0],s=a[1];var i=B/100*r.width/(s/100*r.height);return K(Math.atan(isNaN(i)?1:i)+Math.PI/2,r)};var y=function A(e,r,t,n){var a=[{x:0,y:0},{x:0,y:e.height},{x:e.width,y:0},{x:e.width,y:e.height}];return a.reduce(function(A,e){var a=(0,u.distance)(r-e.x,t-e.y);if(n?a<A.optimumDistance:a>A.optimumDistance){return{optimumCorner:e,optimumDistance:a}}return A},{optimumDistance:n?Infinity:-Infinity,optimumCorner:null}).optimumCorner};var S=function A(e,r,t,n,a){var B=t.x;var s=t.y;var i=0;var o=0;switch(e){case"closest-side":if(r===F.CIRCLE){i=o=Math.min(Math.abs(B),Math.abs(B-a.width),Math.abs(s),Math.abs(s-a.height))}else if(r===F.ELLIPSE){i=Math.min(Math.abs(B),Math.abs(B-a.width));o=Math.min(Math.abs(s),Math.abs(s-a.height))}break;case"closest-corner":if(r===F.CIRCLE){i=o=Math.min((0,u.distance)(B,s),(0,u.distance)(B,s-a.height),(0,u.distance)(B-a.width,s),(0,u.distance)(B-a.width,s-a.height))}else if(r===F.ELLIPSE){var l=Math.min(Math.abs(s),Math.abs(s-a.height))/Math.min(Math.abs(B),Math.abs(B-a.width));var c=y(a,B,s,true);i=(0,u.distance)(c.x-B,(c.y-s)/l);o=l*i}break;case"farthest-side":if(r===F.CIRCLE){i=o=Math.max(Math.abs(B),Math.abs(B-a.width),Math.abs(s),Math.abs(s-a.height))}else if(r===F.ELLIPSE){i=Math.max(Math.abs(B),Math.abs(B-a.width));o=Math.max(Math.abs(s),Math.abs(s-a.height))}break;case"farthest-corner":if(r===F.CIRCLE){i=o=Math.max((0,u.distance)(B,s),(0,u.distance)(B,s-a.height),(0,u.distance)(B-a.width,s),(0,u.distance)(B-a.width,s-a.height))}else if(r===F.ELLIPSE){var Q=Math.max(Math.abs(s),Math.abs(s-a.height))/Math.max(Math.abs(B),Math.abs(B-a.width));var w=y(a,B,s,false);i=(0,u.distance)(w.x-B,(w.y-s)/Q);o=Q*i}break;default:i=n.x||0;o=n.y!==undefined?n.y:i;break}return{x:i,y:o}};var L=e.transformWebkitRadialGradientArgs=function A(e){var r="";var t="";var n="";var a="";var B=0;var s=/^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i;var i=/^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i;var o=/^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i;var l=e[B].match(s);if(l){B++}var u=e[B].match(i);if(u){r=u[1]||"";n=u[2]||"";if(n==="contain"){n="closest-side"}else if(n==="cover"){n="farthest-corner"}B++}var c=e[B].match(o);if(c){B++}var Q=e[B].match(s);if(Q){B++}var w=e[B].match(o);if(w){B++}var U=Q||l;if(U&&U[1]){a=U[1]+(/^\d+$/.test(U[1])?"px":"");if(U[2]){a+=" "+U[2]+(/^\d+$/.test(U[2])?"px":"")}}var g=w||c;if(g){t=g[0];if(!g[1]){t+="px"}}if(a&&!r&&!t&&!n){t=a;a=""}if(a){a="at "+a}return[[r,n,t,a].filter(function(A){return!!A}).join(" ")].concat(e.slice(B))};var _=function A(e){return e.map(function(A){return A.match(f)}).map(function(A,r){if(!A){return e[r]}switch(A[1]){case"from":return A[4]+" 0%";case"to":return A[4]+" 100%";case"color-stop":if(A[3]==="%"){return A[4]+" "+A[2]}return A[4]+" "+parseFloat(A[2])*100+"%"}})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var t=/([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;var n=e.parseAngle=function A(e){var r=e.match(t);if(r){var n=parseFloat(r[1]);switch(r[2].toLowerCase()){case"deg":return Math.PI*n/180;case"grad":return Math.PI/200*n;case"rad":return n;case"turn":return Math.PI*2*n}}return null}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.cloneWindow=e.DocumentCloner=undefined;var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var a=r(2);var B=r(26);var s=r(55);var i=w(s);var o=r(3);var l=r(4);var u=r(15);var c=w(u);var Q=r(56);function w(A){return A&&A.__esModule?A:{default:A}}function U(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var g="data-html2canvas-ignore";var f=e.DocumentCloner=function(){function A(e,r,t,n,a){U(this,A);this.referenceElement=e;this.scrolledElements=[];this.copyStyles=n;this.inlineImages=n;this.logger=t;this.options=r;this.renderer=a;this.resourceLoader=new i.default(r,t,window);this.pseudoContentData={counters:{},quoteDepth:0};this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}n(A,[{key:"inlineAllImages",value:function A(e){var r=this;if(this.inlineImages&&e){var t=e.style;Promise.all((0,l.parseBackgroundImage)(t.backgroundImage).map(function(A){if(A.method==="url"){return r.resourceLoader.inlineImage(A.args[0]).then(function(A){return A&&typeof A.src==="string"?'url("'+A.src+'")':"none"}).catch(function(A){if(true){r.logger.log("Unable to load image",A)}})}return Promise.resolve(""+A.prefix+A.method+"("+A.args.join(",")+")")})).then(function(A){if(A.length>1){t.backgroundColor=""}t.backgroundImage=A.join(",")});if(e instanceof HTMLImageElement){this.resourceLoader.inlineImage(e.src).then(function(A){if(A&&e instanceof HTMLImageElement&&e.parentNode){var r=e.parentNode;var t=(0,o.copyCSSStyles)(e.style,A.cloneNode(false));r.replaceChild(t,e)}}).catch(function(A){if(true){r.logger.log("Unable to load image",A)}})}}}},{key:"inlineFonts",value:function A(e){var r=this;return Promise.all(Array.from(e.styleSheets).map(function(A){if(A.href){return fetch(A.href).then(function(A){return A.text()}).then(function(e){return C(e,A.href)}).catch(function(A){if(true){r.logger.log("Unable to load stylesheet",A)}return[]})}return d(A,e)})).then(function(A){return A.reduce(function(A,e){return A.concat(e)},[])}).then(function(A){return Promise.all(A.map(function(A){return fetch(A.formats[0].src).then(function(A){return A.blob()}).then(function(A){return new Promise(function(e,r){var t=new FileReader;t.onerror=r;t.onload=function(){var A=t.result;e(A)};t.readAsDataURL(A)})}).then(function(e){A.fontFace.setProperty("src",'url("'+e+'")');return"@font-face {"+A.fontFace.cssText+" "})}))}).then(function(A){var t=e.createElement("style");t.textContent=A.join("\n");r.documentElement.appendChild(t)})}},{key:"createElementClone",value:function A(e){var r=this;if(this.copyStyles&&e instanceof HTMLCanvasElement){var t=e.ownerDocument.createElement("img");try{t.src=e.toDataURL();return t}catch(A){if(true){this.logger.log("Unable to clone canvas contents, canvas is tainted")}}}if(e instanceof HTMLIFrameElement){var n=e.cloneNode(false);var B=y();n.setAttribute("data-html2canvas-internal-iframe-key",B);var s=(0,a.parseBounds)(e,0,0),i=s.width,l=s.height;this.resourceLoader.cache[B]=L(e,this.options).then(function(A){return r.renderer(A,{async:r.options.async,allowTaint:r.options.allowTaint,backgroundColor:"#ffffff",canvas:null,imageTimeout:r.options.imageTimeout,logging:r.options.logging,proxy:r.options.proxy,removeContainer:r.options.removeContainer,scale:r.options.scale,foreignObjectRendering:r.options.foreignObjectRendering,useCORS:r.options.useCORS,target:new c.default,width:i,height:l,x:0,y:0,windowWidth:A.ownerDocument.defaultView.innerWidth,windowHeight:A.ownerDocument.defaultView.innerHeight,scrollX:A.ownerDocument.defaultView.pageXOffset,scrollY:A.ownerDocument.defaultView.pageYOffset},r.logger.child(B))}).then(function(A){return new Promise(function(r,t){var a=document.createElement("img");a.onload=function(){return r(A)};a.onerror=t;a.src=A.toDataURL();if(n.parentNode){n.parentNode.replaceChild((0,o.copyCSSStyles)(e.ownerDocument.defaultView.getComputedStyle(e),a),n)}})});return n}if(e instanceof HTMLStyleElement&&e.sheet&&e.sheet.cssRules){var u=[].slice.call(e.sheet.cssRules,0).reduce(function(A,e){try{if(e&&e.cssText){return A+e.cssText}return A}catch(t){r.logger.log("Unable to access cssText property",e.name);return A}},"");var Q=e.cloneNode(false);Q.textContent=u;return Q}return e.cloneNode(false)}},{key:"cloneNode",value:function A(e){var r=e.nodeType===Node.TEXT_NODE?document.createTextNode(e.nodeValue):this.createElementClone(e);var t=e.ownerDocument.defaultView;var n=e instanceof t.HTMLElement?t.getComputedStyle(e):null;var a=e instanceof t.HTMLElement?t.getComputedStyle(e,":before"):null;var B=e instanceof t.HTMLElement?t.getComputedStyle(e,":after"):null;if(this.referenceElement===e&&r instanceof t.HTMLElement){this.clonedReferenceElement=r}if(r instanceof t.HTMLBodyElement){T(r)}var s=(0,Q.parseCounterReset)(n,this.pseudoContentData);var i=(0,Q.resolvePseudoContent)(e,a,this.pseudoContentData);for(var l=e.firstChild;l;l=l.nextSibling){if(l.nodeType!==Node.ELEMENT_NODE||l.nodeName!=="SCRIPT"&&!l.hasAttribute(g)&&(typeof this.options.ignoreElements!=="function"||!this.options.ignoreElements(l))){if(!this.copyStyles||l.nodeName!=="STYLE"){r.appendChild(this.cloneNode(l))}}}var u=(0,Q.resolvePseudoContent)(e,B,this.pseudoContentData);(0,Q.popCounters)(s,this.pseudoContentData);if(e instanceof t.HTMLElement&&r instanceof t.HTMLElement){if(a){this.inlineAllImages(h(e,r,a,i,v))}if(B){this.inlineAllImages(h(e,r,B,u,p))}if(n&&this.copyStyles&&!(e instanceof HTMLIFrameElement)){(0,o.copyCSSStyles)(n,r)}this.inlineAllImages(r);if(e.scrollTop!==0||e.scrollLeft!==0){this.scrolledElements.push([r,e.scrollLeft,e.scrollTop])}switch(e.nodeName){case"CANVAS":if(!this.copyStyles){E(e,r)}break;case"TEXTAREA":case"SELECT":r.value=e.value;break}}return r}}]);return A}();var d=function A(e,r){return(e.cssRules?Array.from(e.cssRules):[]).filter(function(A){return A.type===CSSRule.FONT_FACE_RULE}).map(function(A){var e=(0,l.parseBackgroundImage)(A.style.getPropertyValue("src"));var t=[];for(var n=0;n<e.length;n++){if(e[n].method==="url"&&e[n+1]&&e[n+1].method==="format"){var a=r.createElement("a");a.href=e[n].args[0];if(r.body){r.body.appendChild(a)}var B={src:a.href,format:e[n+1].args[0]};t.push(B)}}return{formats:t.filter(function(A){return/^woff/i.test(A.format)}),fontFace:A.style}}).filter(function(A){return A.formats.length})};var C=function A(e,r){var t=document.implementation.createHTMLDocument("");var n=document.createElement("base");n.href=r;var a=document.createElement("style");a.textContent=e;if(t.head){t.head.appendChild(n)}if(t.body){t.body.appendChild(a)}return a.sheet?d(a.sheet,t):[]};var F=function A(e,r,t){if(e.defaultView&&(r!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)){e.defaultView.scrollTo(r,t)}};var E=function A(e,r){try{if(r){r.width=e.width;r.height=e.height;var t=e.getContext("2d");var n=r.getContext("2d");if(t){n.putImageData(t.getImageData(0,0,e.width,e.height),0,0)}else{n.drawImage(e,0,0)}}}catch(A){}};var h=function A(e,r,t,n,a){if(!t||!t.content||t.content==="none"||t.content==="-moz-alt-content"||t.display==="none"){return}var B=r.ownerDocument.createElement("html2canvaspseudoelement");(0,o.copyCSSStyles)(t,B);if(n){var s=n.length;for(var i=0;i<s;i++){var u=n[i];switch(u.type){case Q.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:var c=r.ownerDocument.createElement("img");c.src=(0,l.parseBackgroundImage)("url("+u.value+")")[0].args[0];c.style.opacity="1";B.appendChild(c);break;case Q.PSEUDO_CONTENT_ITEM_TYPE.TEXT:B.appendChild(r.ownerDocument.createTextNode(u.value));break}}}B.className=N+" "+I;r.className+=a===v?" "+N:" "+I;if(a===v){r.insertBefore(B,r.firstChild)}else{r.appendChild(B)}return B};var H=/^url\((.+)\)$/i;var v=":before";var p=":after";var N="___html2canvas___pseudoelement_before";var I="___html2canvas___pseudoelement_after";var K='{\n    content: "" !important;\n    display: none !important;\n}';var T=function A(e){m(e,"."+N+v+K+"\n         ."+I+p+K)};var m=function A(e,r){var t=e.ownerDocument.createElement("style");e.appendChild(t)};var b=function A(e){var r=t(e,3),n=r[0],a=r[1],B=r[2];n.scrollLeft=a;n.scrollTop=B};var y=function A(){return Math.ceil(Date.now()+Math.random()*1e7).toString(16)};var S=/^data:text\/(.+);(base64)?,(.*)$/i;var L=function A(e,r){try{return Promise.resolve(e.contentWindow.document.documentElement)}catch(A){return r.proxy?(0,B.Proxy)(e.src,r).then(function(A){var e=A.match(S);if(!e){return Promise.reject()}return e[2]==="base64"?window.atob(decodeURIComponent(e[3])):decodeURIComponent(e[3])}).then(function(A){return _(e.ownerDocument,(0,a.parseBounds)(e,0,0)).then(function(e){var r=e.contentWindow;var t=r.document;t.open();t.write(A);var n=D(e).then(function(){return t.documentElement});t.close();return n})}):Promise.reject()}};var _=function A(e,r){var t=e.createElement("iframe");t.className="html2canvas-container";t.style.visibility="hidden";t.style.position="fixed";t.style.left="-10000px";t.style.top="0px";t.style.border="0";t.width=r.width.toString();t.height=r.height.toString();t.scrolling="no";t.setAttribute(g,"true");if(!e.body){return Promise.reject(true?"Body element not found in Document that is getting rendered":"")}e.body.appendChild(t);return Promise.resolve(t)};var D=function A(e){var r=e.contentWindow;var t=r.document;return new Promise(function(A,n){r.onload=e.onload=t.onreadystatechange=function(){var r=setInterval(function(){if(t.body.childNodes.length>0&&t.readyState==="complete"){clearInterval(r);A(e)}},50)}})};var M=e.cloneWindow=function A(e,r,t,n,a,B){var s=new f(t,n,a,false,B);var i=e.defaultView.pageXOffset;var o=e.defaultView.pageYOffset;return _(e,r).then(function(A){var a=A.contentWindow;var B=a.document;var l=D(A).then(function(){s.scrolledElements.forEach(b);a.scrollTo(r.left,r.top);if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)){B.documentElement.style.top=-r.top+"px";B.documentElement.style.left=-r.left+"px";B.documentElement.style.position="absolute"}var i=Promise.resolve([A,s.clonedReferenceElement,s.resourceLoader]);var o=n.onclone;return s.clonedReferenceElement instanceof a.HTMLElement||s.clonedReferenceElement instanceof e.defaultView.HTMLElement||s.clonedReferenceElement instanceof HTMLElement?typeof o==="function"?Promise.resolve().then(function(){return o(B)}).then(function(){return i}):i:Promise.reject(true?"Error finding the "+t.nodeName+" in the cloned document":"")});B.open();B.write(O(document.doctype)+"<html></html>");F(t.ownerDocument,i,o);B.replaceChild(B.adoptNode(s.documentElement),B.documentElement);B.close();return l})};var O=function A(e){var r="";if(e){r+="<!DOCTYPE ";if(e.name){r+=e.name}if(e.internalSubset){r+=e.internalSubset}if(e.publicId){r+='"'+e.publicId+'"'}if(e.systemId){r+='"'+e.systemId+'"'}r+=">"}return r}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ResourceStore=undefined;var t=function(){function A(A,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||false;t.configurable=true;if("value"in t)t.writable=true;Object.defineProperty(A,t.key,t)}}return function(e,r,t){if(r)A(e.prototype,r);if(t)A(e,t);return e}}();var n=r(10);var a=s(n);var B=r(26);function s(A){return A&&A.__esModule?A:{default:A}}function i(A,e){if(!(A instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function A(e,r,t){i(this,A);this.options=e;this._window=t;this.origin=this.getOrigin(t.location.href);this.cache={};this.logger=r;this._index=0}t(A,[{key:"loadImage",value:function A(e){var r=this;if(this.hasResourceInCache(e)){return e}if(g(e)){this.cache[e]=d(e,this.options.imageTimeout||0);return e}if(!f(e)||a.default.SUPPORT_SVG_DRAWING){if(this.options.allowTaint===true||w(e)||this.isSameOrigin(e)){return this.addImage(e,e,false)}else if(!this.isSameOrigin(e)){if(typeof this.options.proxy==="string"){this.cache[e]=(0,B.Proxy)(e,this.options).then(function(A){return d(A,r.options.imageTimeout||0)});return e}else if(this.options.useCORS===true&&a.default.SUPPORT_CORS_IMAGES){return this.addImage(e,e,true)}}}}},{key:"inlineImage",value:function A(e){var r=this;if(w(e)){return d(e,this.options.imageTimeout||0)}if(this.hasResourceInCache(e)){return this.cache[e]}if(!this.isSameOrigin(e)&&typeof this.options.proxy==="string"){return this.cache[e]=(0,B.Proxy)(e,this.options).then(function(A){return d(A,r.options.imageTimeout||0)})}return this.xhrImage(e)}},{key:"xhrImage",value:function A(e){var r=this;this.cache[e]=new Promise(function(A,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(n.status!==200){t("Failed to fetch image "+e.substring(0,256)+" with status code "+n.status)}else{var r=new FileReader;r.addEventListener("load",function(){var e=r.result;A(e)},false);r.addEventListener("error",function(A){return t(A)},false);r.readAsDataURL(n.response)}}};n.responseType="blob";if(r.options.imageTimeout){var a=r.options.imageTimeout;n.timeout=a;n.ontimeout=function(){return t(true?"Timed out ("+a+"ms) fetching "+e.substring(0,256):"")}}n.open("GET",e,true);n.send()}).then(function(A){return d(A,r.options.imageTimeout||0)});return this.cache[e]}},{key:"loadCanvas",value:function A(e){var r=String(this._index++);this.cache[r]=Promise.resolve(e);return r}},{key:"hasResourceInCache",value:function A(e){return typeof this.cache[e]!=="undefined"}},{key:"addImage",value:function A(e,r,t){var n=this;if(true){this.logger.log("Added image "+e.substring(0,256))}var B=function A(e){return new Promise(function(A,a){var B=new Image;B.onload=function(){return A(B)};if(!e||t){B.crossOrigin="anonymous"}B.onerror=a;B.src=r;if(B.complete===true){setTimeout(function(){A(B)},500)}if(n.options.imageTimeout){var s=n.options.imageTimeout;setTimeout(function(){return a(true?"Timed out ("+s+"ms) fetching "+r.substring(0,256):"")},s)}})};this.cache[e]=U(r)&&!f(r)?a.default.SUPPORT_BASE64_DRAWING(r).then(B):B(true);return e}},{key:"isSameOrigin",value:function A(e){return this.getOrigin(e)===this.origin}},{key:"getOrigin",value:function A(e){var r=this._link||(this._link=this._window.document.createElement("a"));r.href=e;r.href=r.href;return r.protocol+r.hostname+r.port}},{key:"ready",value:function A(){var e=this;var r=Object.keys(this.cache);var t=r.map(function(A){return e.cache[A].catch(function(A){if(true){e.logger.log("Unable to load image",A)}return null})});return Promise.all(t).then(function(A){if(true){e.logger.log("Finished loading "+A.length+" images",A)}return new l(r,A)})}}]);return A}();e.default=o;var l=e.ResourceStore=function(){function A(e,r){i(this,A);this._keys=e;this._resources=r}t(A,[{key:"get",value:function A(e){var r=this._keys.indexOf(e);return r===-1?null:this._resources[r]}}]);return A}();var u=/^data:image\/svg\+xml/i;var c=/^data:image\/.*;base64,/i;var Q=/^data:image\/.*/i;var w=function A(e){return Q.test(e)};var U=function A(e){return c.test(e)};var g=function A(e){return e.substr(0,4)==="blob"};var f=function A(e){return e.substr(-3).toLowerCase()==="svg"||u.test(e)};var d=function A(e,r){return new Promise(function(A,t){var n=new Image;n.onload=function(){return A(n)};n.onerror=t;n.src=e;if(n.complete===true){setTimeout(function(){A(n)},500)}if(r){setTimeout(function(){return t(true?"Timed out ("+r+"ms) loading image":"")},r)}})}},function(A,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parseContent=e.resolvePseudoContent=e.popCounters=e.parseCounterReset=e.TOKEN_TYPE=e.PSEUDO_CONTENT_ITEM_TYPE=undefined;var t=function(){function A(A,e){var r=[];var t=true;var n=false;var a=undefined;try{for(var B=A[Symbol.iterator](),s;!(t=(s=B.next()).done);t=true){r.push(s.value);if(e&&r.length===e)break}}catch(A){n=true;a=A}finally{try{if(!t&&B["return"])B["return"]()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return A(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var n=r(14);var a=r(8);var B=e.PSEUDO_CONTENT_ITEM_TYPE={TEXT:0,IMAGE:1};var s=e.TOKEN_TYPE={STRING:0,ATTRIBUTE:1,URL:2,COUNTER:3,COUNTERS:4,OPENQUOTE:5,CLOSEQUOTE:6};var i=e.parseCounterReset=function A(e,r){if(!e||!e.counterReset||e.counterReset==="none"){return[]}var n=[];var a=e.counterReset.split(/\s*,\s*/);var B=a.length;for(var s=0;s<B;s++){var i=a[s].split(/\s+/),o=t(i,2),l=o[0],u=o[1];n.push(l);var c=r.counters[l];if(!c){c=r.counters[l]=[]}c.push(parseInt(u||0,10))}return n};var o=e.popCounters=function A(e,r){var t=e.length;for(var n=0;n<t;n++){r.counters[e[n]].pop()}};var l=e.resolvePseudoContent=function A(e,r,n){if(!r||!r.content||r.content==="none"||r.content==="-moz-alt-content"||r.display==="none"){return null}var a=u(r.content);var i=a.length;var o=[];var l="";var c=r.counterIncrement;if(c&&c!=="none"){var U=c.split(/\s+/),g=t(U,2),f=g[0],d=g[1];var C=n.counters[f];if(C){C[C.length-1]+=d===undefined?1:parseInt(d,10)}}for(var F=0;F<i;F++){var E=a[F];switch(E.type){case s.STRING:l+=E.value||"";break;case s.ATTRIBUTE:if(e instanceof HTMLElement&&E.value){l+=e.getAttribute(E.value)||""}break;case s.COUNTER:var h=n.counters[E.name||""];if(h){l+=w([h[h.length-1]],"",E.format)}break;case s.COUNTERS:var H=n.counters[E.name||""];if(H){l+=w(H,E.glue,E.format)}break;case s.OPENQUOTE:l+=Q(r,true,n.quoteDepth);n.quoteDepth++;break;case s.CLOSEQUOTE:n.quoteDepth--;l+=Q(r,false,n.quoteDepth);break;case s.URL:if(l){o.push({type:B.TEXT,value:l});l=""}o.push({type:B.IMAGE,value:E.value||""});break}}if(l){o.push({type:B.TEXT,value:l})}return o};var u=e.parseContent=function A(e,r){if(r&&r[e]){return r[e]}var t=[];var n=e.length;var a=false;var B=false;var i=false;var o="";var l="";var u=[];for(var Q=0;Q<n;Q++){var w=e.charAt(Q);switch(w){case"'":case'"':if(B){o+=w}else{a=!a;if(!i&&!a){t.push({type:s.STRING,value:o});o=""}}break;case"\\":if(B){o+=w;B=false}else{B=true}break;case"(":if(a){o+=w}else{i=true;l=o;o="";u=[]}break;case")":if(a){o+=w}else if(i){if(o){u.push(o)}switch(l){case"attr":if(u.length>0){t.push({type:s.ATTRIBUTE,value:u[0]})}break;case"counter":if(u.length>0){var U={type:s.COUNTER,name:u[0]};if(u.length>1){U.format=u[1]}t.push(U)}break;case"counters":if(u.length>0){var g={type:s.COUNTERS,name:u[0]};if(u.length>1){g.glue=u[1]}if(u.length>2){g.format=u[2]}t.push(g)}break;case"url":if(u.length>0){t.push({type:s.URL,value:u[0]})}break}i=false;o=""}break;case",":if(a){o+=w}else if(i){u.push(o);o=""}break;case" ":case"\t":if(a){o+=w}else if(o){c(t,o);o=""}break;default:o+=w}if(w!=="\\"){B=false}}if(o){c(t,o)}if(r){r[e]=t}return t};var c=function A(e,r){switch(r){case"open-quote":e.push({type:s.OPENQUOTE});break;case"close-quote":e.push({type:s.CLOSEQUOTE});break}};var Q=function A(e,r,t){var n=e.quotes?e.quotes.split(/\s+/):["'\"'","'\"'"];var a=t*2;if(a>=n.length){a=n.length-2}if(!r){++a}return n[a].replace(/^["']|["']$/g,"")};var w=function A(e,r,t){var B=e.length;var s="";for(var i=0;i<B;i++){if(i>0){s+=r||""}s+=(0,n.createCounterText)(e[i],(0,a.parseListStyleType)(t||"decimal"),false)}return s}}])});
},
	"sap/gantt/thirdparty/jspdf.js":function(){
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.789Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.jsPDF={}))})(this,function(t){"use strict";function e(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e=function(t){return typeof t}}else{e=function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return e(t)}var r=function(){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this}();function n(){if(r.console&&typeof r.console.log==="function"){r.console.log.apply(r.console,arguments)}}function i(t){if(r.console){if(typeof r.console.warn==="function"){r.console.warn.apply(r.console,arguments)}else{n.call(null,arguments)}}}function a(t){if(r.console){if(typeof r.console.error==="function"){r.console.error.apply(r.console,arguments)}else{n(t)}}}var s={log:n,warn:i,error:a};function o(t,r){if(typeof r==="undefined")r={autoBom:false};else if(e(r)!=="object"){s.warn("Deprecated: Expected third argument to be a object");r={autoBom:!r}}if(r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)){return new Blob([String.fromCharCode(65279),t],{type:t.type})}return t}function u(t,e,r){var n=new XMLHttpRequest;n.open("GET",t);n.responseType="blob";n.onload=function(){c(n.response,e,r)};n.onerror=function(){s.error("could not download file")};n.send()}function f(t){var e=new XMLHttpRequest;e.open("HEAD",t,false);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",true,true,window,0,0,0,80,20,false,false,false,false,0,null);t.dispatchEvent(e)}}var c=r.saveAs||((typeof window==="undefined"?"undefined":e(window))!=="object"||window!==r?function t(){}:typeof HTMLAnchorElement!=="undefined"&&"download"in HTMLAnchorElement.prototype?function t(e,n,i){var a=r.URL||r.webkitURL;var s=document.createElement("a");n=n||e.name||"download";s.download=n;s.rel="noopener";if(typeof e==="string"){s.href=e;if(s.origin!==location.origin){f(s.href)?u(e,n,i):l(s,s.target="_blank")}else{l(s)}}else{s.href=a.createObjectURL(e);setTimeout(function(){a.revokeObjectURL(s.href)},4e4);setTimeout(function(){l(s)},0)}}:"msSaveOrOpenBlob"in navigator?function t(e,r,n){r=r||e.name||"download";if(typeof e==="string"){if(f(e)){u(e,r,n)}else{var i=document.createElement("a");i.href=e;i.target="_blank";setTimeout(function(){l(i)})}}else{navigator.msSaveOrOpenBlob(o(e,n),r)}}:function t(n,i,a,s){s=s||open("","_blank");if(s){s.document.title=s.document.body.innerText="downloading..."}if(typeof n==="string")return u(n,i,a);var o=n.type==="application/octet-stream";var f=/constructor/i.test(r.HTMLElement)||r.safari;var l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&f)&&(typeof FileReader==="undefined"?"undefined":e(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;");if(s)s.location.href=t;else location=t;s=null};c.readAsDataURL(n)}else{var h=r.URL||r.webkitURL;var d=h.createObjectURL(n);if(s)s.location=d;else location.href=d;s=null;setTimeout(function(){h.revokeObjectURL(d)},4e4)}});
/**
   * A class to parse color values
   * @author Stoyan Stefanov <sstoo@gmail.com>
   * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
   * @license Use it if you like it
   */function h(t){t=t||"";this.ok=false;if(t.charAt(0)=="#"){t=t.substr(1,6)}t=t.replace(/ /g,"");t=t.toLowerCase();var e;var r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=r[t]||t;var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function t(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function t(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function t(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}];for(var i=0;i<n.length;i++){var a=n[i].re;var s=n[i].process;var o=a.exec(t);if(o){e=s(o);this.r=e[0];this.g=e[1];this.b=e[2];this.ok=true}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var t=this.r.toString(16);var e=this.g.toString(16);var r=this.b.toString(16);if(t.length==1)t="0"+t;if(e.length==1)e="0"+e;if(r.length==1)r="0"+r;return"#"+t+e+r}}var d,p;(function(){d=r.atob.bind(r);p=r.btoa.bind(r);return})();
/**
   * @license
   * Joseph Myers does not specify a particular license for his work.
   *
   * Author: Joseph Myers
   * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
   *
   * Modified by: Owen Leong
   */function v(t,e){var r=t[0],n=t[1],i=t[2],a=t[3];r=m(r,n,i,a,e[0],7,-680876936);a=m(a,r,n,i,e[1],12,-389564586);i=m(i,a,r,n,e[2],17,606105819);n=m(n,i,a,r,e[3],22,-1044525330);r=m(r,n,i,a,e[4],7,-176418897);a=m(a,r,n,i,e[5],12,1200080426);i=m(i,a,r,n,e[6],17,-1473231341);n=m(n,i,a,r,e[7],22,-45705983);r=m(r,n,i,a,e[8],7,1770035416);a=m(a,r,n,i,e[9],12,-1958414417);i=m(i,a,r,n,e[10],17,-42063);n=m(n,i,a,r,e[11],22,-1990404162);r=m(r,n,i,a,e[12],7,1804603682);a=m(a,r,n,i,e[13],12,-40341101);i=m(i,a,r,n,e[14],17,-1502002290);n=m(n,i,a,r,e[15],22,1236535329);r=b(r,n,i,a,e[1],5,-165796510);a=b(a,r,n,i,e[6],9,-1069501632);i=b(i,a,r,n,e[11],14,643717713);n=b(n,i,a,r,e[0],20,-373897302);r=b(r,n,i,a,e[5],5,-701558691);a=b(a,r,n,i,e[10],9,38016083);i=b(i,a,r,n,e[15],14,-660478335);n=b(n,i,a,r,e[4],20,-405537848);r=b(r,n,i,a,e[9],5,568446438);a=b(a,r,n,i,e[14],9,-1019803690);i=b(i,a,r,n,e[3],14,-187363961);n=b(n,i,a,r,e[8],20,1163531501);r=b(r,n,i,a,e[13],5,-1444681467);a=b(a,r,n,i,e[2],9,-51403784);i=b(i,a,r,n,e[7],14,1735328473);n=b(n,i,a,r,e[12],20,-1926607734);r=y(r,n,i,a,e[5],4,-378558);a=y(a,r,n,i,e[8],11,-2022574463);i=y(i,a,r,n,e[11],16,1839030562);n=y(n,i,a,r,e[14],23,-35309556);r=y(r,n,i,a,e[1],4,-1530992060);a=y(a,r,n,i,e[4],11,1272893353);i=y(i,a,r,n,e[7],16,-155497632);n=y(n,i,a,r,e[10],23,-1094730640);r=y(r,n,i,a,e[13],4,681279174);a=y(a,r,n,i,e[0],11,-358537222);i=y(i,a,r,n,e[3],16,-722521979);n=y(n,i,a,r,e[6],23,76029189);r=y(r,n,i,a,e[9],4,-640364487);a=y(a,r,n,i,e[12],11,-421815835);i=y(i,a,r,n,e[15],16,530742520);n=y(n,i,a,r,e[2],23,-995338651);r=w(r,n,i,a,e[0],6,-198630844);a=w(a,r,n,i,e[7],10,1126891415);i=w(i,a,r,n,e[14],15,-1416354905);n=w(n,i,a,r,e[5],21,-57434055);r=w(r,n,i,a,e[12],6,1700485571);a=w(a,r,n,i,e[3],10,-1894986606);i=w(i,a,r,n,e[10],15,-1051523);n=w(n,i,a,r,e[1],21,-2054922799);r=w(r,n,i,a,e[8],6,1873313359);a=w(a,r,n,i,e[15],10,-30611744);i=w(i,a,r,n,e[6],15,-1560198380);n=w(n,i,a,r,e[13],21,1309151649);r=w(r,n,i,a,e[4],6,-145523070);a=w(a,r,n,i,e[11],10,-1120210379);i=w(i,a,r,n,e[2],15,718787259);n=w(n,i,a,r,e[9],21,-343485551);t[0]=C(r,t[0]);t[1]=C(n,t[1]);t[2]=C(i,t[2]);t[3]=C(a,t[3])}function g(t,e,r,n,i,a){e=C(C(e,t),C(n,a));return C(e<<i|e>>>32-i,r)}function m(t,e,r,n,i,a,s){return g(e&r|~e&n,t,e,i,a,s)}function b(t,e,r,n,i,a,s){return g(e&n|r&~n,t,e,i,a,s)}function y(t,e,r,n,i,a,s){return g(e^r^n,t,e,i,a,s)}function w(t,e,r,n,i,a,s){return g(r^(e|~n),t,e,i,a,s)}function N(t){var e=t.length,r=[1732584193,-271733879,-1732584194,271733878],n;for(n=64;n<=t.length;n+=64){v(r,L(t.substring(n-64,n)))}t=t.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++){i[n>>2]|=t.charCodeAt(n)<<(n%4<<3)}i[n>>2]|=128<<(n%4<<3);if(n>55){v(r,i);for(n=0;n<16;n++){i[n]=0}}i[14]=e*8;v(r,i);return r}function L(t){var e=[],r;for(r=0;r<64;r+=4){e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24)}return e}var A="0123456789abcdef".split("");function x(t){var e="",r=0;for(;r<4;r++){e+=A[t>>r*8+4&15]+A[t>>r*8&15]}return e}function S(t){for(var e=0;e<t.length;e++){t[e]=x(t[e])}return t.join("")}function _(t){return String.fromCharCode((t&255)>>0,(t&65280)>>8,(t&16711680)>>16,(t&4278190080)>>24)}function P(t){return t.map(_).join("")}function k(t){return P(N(t))}function F(t){return S(N(t))}var I=F("hello")!="5d41402abc4b2a76b9719d911017c592";function C(t,e){if(I){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}else{return t+e&4294967295}}
/**
   * @license
   * FPDF is released under a permissive license: there is no usage restriction.
   * You may embed it freely in your application (commercial or not), with or
   * without modifications.
   *
   * Reference: http://www.fpdf.org/en/script/script37.php
   */function j(t,e){return new Array(e+1).join(t)}function O(t,e){var r,n;if(t!==r){var i=j(t,(256/t.length>>0)+1);var a=[];for(var s=0;s<256;s++){a[s]=s}var o=0;for(var s=0;s<256;s++){var u=a[s];o=(o+u+i.charCodeAt(s))%256;a[s]=a[o];a[o]=u}r=t;n=a}else{a=n}var f=e.length;var l=0;var c=0;var h="";for(var s=0;s<f;s++){l=(l+1)%256;u=a[l];c=(c+u)%256;a[l]=a[c];a[c]=u;i=a[(a[l]+a[c])%256];h+=String.fromCharCode(e.charCodeAt(s)^i)}return h}
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   * Author: Owen Leong (@owenl131)
   * Date: 15 Oct 2020
   * References:
   * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
   * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
   * http://www.fpdf.org/en/script/script37.php
   */var B={print:4,modify:8,copy:16,"annot-forms":32};function M(t,e,r,n){this.v=1;this.r=2;var i=192;t.forEach(function(t){if(typeof B.perm!=="undefined"){throw new Error("Invalid permission: "+t)}i+=B[t]});this.padding="(¿N^NuAd\0NVÿú\b"+"..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32);var s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s);this.P=-((i^255)+1);this.encryptionKey=k(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5);this.U=O(this.encryptionKey,this.padding)}M.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)};M.prototype.toHexString=function(t){return t.split("").map(function(t){return("0"+(t.charCodeAt(0)&255).toString(16)).slice(-2)}).join("")};M.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2){e.push(String.fromCharCode(parseInt(t.substr(r,2),16)))}return e.join("")};M.prototype.processOwnerPassword=function(t,e){var r=k(e).substr(0,5);return O(r,t)};M.prototype.encryptor=function(t,e){var r=k(this.encryptionKey+String.fromCharCode(t&255,t>>8&255,t>>16&255,e&255,e>>8&255)).substr(0,10);return function(t){return O(r,t)}};function E(t){if(/[^\u0000-\u00ff]/.test(t)){throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.")}var e="",r=t.length;for(var n=0;n<r;n++){var i=t.charCodeAt(n);if(i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126){
// "©"     169         a9       a9               #a9
var a=i.toString(16),s=("0"+a).slice(-2);e+="#"+s}else{e+=t[n]}}return e}function q(t){if(e(t)!=="object"){throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)")}var n={};this.subscribe=function(t,e,r){r=r||false;if(typeof t!=="string"||typeof e!=="function"||typeof r!=="boolean"){throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)")}if(!n.hasOwnProperty(t)){n[t]={}}var i=Math.random().toString(35);n[t][i]=[e,!!r];return i};this.unsubscribe=function(t){for(var e in n){if(n[e][t]){delete n[e][t];if(Object.keys(n[e]).length===0){delete n[e]}return true}}return false};this.publish=function(e){if(n.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var o in n[e]){var u=n[e][o];try{u[0].apply(t,i)}catch(t){if(r.console){s.error("jsPDF PubSub Error",t.message,t)}}if(u[1])a.push(o)}if(a.length)a.forEach(this.unsubscribe)}};this.getTopics=function(){return n}}function D(t){if(!(this instanceof D)){return new D(t)}var e="opacity,stroke-opacity".split(",");for(var r in t){if(t.hasOwnProperty(r)&&e.indexOf(r)>=0){this[r]=t[r]}}this.id="";this.objectNumber=-1}D.prototype.equals=function t(r){var n="id,objectNumber,equals";var i;if(!r||e(r)!==e(this))return false;var a=0;for(i in this){if(n.indexOf(i)>=0)continue;if(this.hasOwnProperty(i)&&!r.hasOwnProperty(i))return false;if(this[i]!==r[i])return false;a++}for(i in r){if(r.hasOwnProperty(i)&&n.indexOf(i)<0)a--}return a===0};function R(t,e){this.gState=t;this.matrix=e;this.id="";this.objectNumber=-1}function T(t,e,r,n,i){if(!(this instanceof T)){return new T(t,e,r,n,i)}this.type=t==="axial"?2:3;this.coords=e;this.colors=r;R.call(this,n,i)}function U(t,e,r,n,i){if(!(this instanceof U)){return new U(t,e,r,n,i)}this.boundingBox=t;this.xStep=e;this.yStep=r;this.stream="";this.cloneIndex=0;R.call(this,n,i)}function z(t){var n=typeof arguments[0]==="string"?arguments[0]:"p";var i=arguments[1];var a=arguments[2];var o=arguments[3];var u=[];var f=1;var l;var d=16;var v="S";var g=null;t=t||{};if(e(t)==="object"){n=t.orientation;i=t.unit||i;a=t.format||a;o=t.compress||t.compressPdf||o;g=t.encryption||null;if(g!==null){g.userPassword=g.userPassword||"";g.ownerPassword=g.ownerPassword||"";g.userPermissions=g.userPermissions||[]}f=typeof t.userUnit==="number"?Math.abs(t.userUnit):1;if(typeof t.precision!=="undefined"){l=t.precision}if(typeof t.floatPrecision!=="undefined"){d=t.floatPrecision}v=t.defaultPathOperation||"S"}u=t.filters||(o===true?["FlateEncode"]:u);i=i||"mm";n=(""+(n||"P")).toLowerCase();var m=t.putOnlyUsedFonts||false;var b={};var y={internal:{},__private__:{}};y.__private__.PubSub=q;var w="1.3";var N=y.__private__.getPdfVersion=function(){return w};y.__private__.setPdfVersion=function(t){w=t};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return L};var A=y.__private__.getPageFormat=function(t){return L[t]};a=a||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"};var S=x.COMPAT;function _(){this.saveGraphicsState();ct(new Vt(Bt,0,0,-Bt,0,Rr()*Bt).toString()+" cm");this.setFontSize(this.getFontSize()/Bt);v="n";S=x.ADVANCED}function P(){this.restoreGraphicsState();v="S";S=x.COMPAT}var k=y.__private__.combineFontStyleAndFontWeight=function(t,e){if(t=="bold"&&e=="normal"||t=="bold"&&e==400||t=="normal"&&e=="italic"||t=="bold"&&e=="italic"){throw new Error("Invalid Combination of fontweight and fontstyle")}if(e){t=e==400||e==="normal"?t==="italic"?"italic":"normal":(e==700||e==="bold")&&t==="normal"?"bold":(e==700?"bold":e)+""+t}return t};y.advancedAPI=function(t){var e=S===x.COMPAT;if(e){_.call(this)}if(typeof t!=="function"){return this}t(this);if(e){P.call(this)}return this};y.compatAPI=function(t){var e=S===x.ADVANCED;if(e){P.call(this)}if(typeof t!=="function"){return this}t(this);if(e){_.call(this)}return this};y.isAdvancedAPI=function(){return S===x.ADVANCED};var F=function t(e){if(S!==x.ADVANCED){throw new Error(e+" is only available in 'advanced' API mode. "+"You need to call advancedAPI() first.")}};var I=y.roundToPrecision=y.__private__.roundToPrecision=function(t,e){var r=l||e;if(isNaN(t)||isNaN(r)){throw new Error("Invalid argument passed to jsPDF.roundToPrecision")}return t.toFixed(r).replace(/0+$/,"")};var C;if(typeof d==="number"){C=y.hpf=y.__private__.hpf=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.hpf")}return I(t,d)}}else if(d==="smart"){C=y.hpf=y.__private__.hpf=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.hpf")}if(t>-1&&t<1){return I(t,16)}else{return I(t,5)}}}else{C=y.hpf=y.__private__.hpf=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.hpf")}return I(t,16)}}var j=y.f2=y.__private__.f2=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.f2")}return I(t,2)};var O=y.__private__.f3=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.f3")}return I(t,3)};var B=y.scale=y.__private__.scale=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.scale")}if(S===x.COMPAT){return t*Bt}else if(S===x.ADVANCED){return t}};var R=function t(e){if(S===x.COMPAT){return Rr()-e}else if(S===x.ADVANCED){return e}};var H=function t(e){return B(R(e))};y.__private__.setPrecision=y.setPrecision=function(t){if(typeof parseInt(t,10)==="number"){l=parseInt(t,10)}};var W="00000000000000000000000000000000";var V=y.__private__.getFileId=function(){return W};var G=y.__private__.setFileId=function(t){if(typeof t!=="undefined"&&/^[a-fA-F0-9]{32}$/.test(t)){W=t.toUpperCase()}else{W=W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(Math.random()*16))}).join("")}if(g!==null){Ye=new M(g.userPermissions,g.userPassword,g.ownerPassword,W)}return W};y.setFileId=function(t){G(t);return this};y.getFileId=function(){return V()};var Y;var J=y.__private__.convertDateToPDFDate=function(t){var e="";var r=t.getTimezoneOffset(),n=r<0?"+":"-",i=Math.floor(Math.abs(r/60)),a=Math.abs(r%60),s=[n,$(i),"'",$(a),"'"].join("");e=["D:",t.getFullYear(),$(t.getMonth()+1),$(t.getDate()),$(t.getHours()),$(t.getMinutes()),$(t.getSeconds()),s].join("");return e};var X=y.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10);var r=parseInt(t.substr(6,2),10)-1;var n=parseInt(t.substr(8,2),10);var i=parseInt(t.substr(10,2),10);var a=parseInt(t.substr(12,2),10);var s=parseInt(t.substr(14,2),10);var o=new Date(e,r,n,i,a,s,0);return o};var K=y.__private__.setCreationDate=function(t){var e;var r=/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/;if(typeof t==="undefined"){t=new Date}if(t instanceof Date){e=J(t)}else if(r.test(t)){e=t}else{throw new Error("Invalid argument passed to jsPDF.setCreationDate")}Y=e;return Y};var Z=y.__private__.getCreationDate=function(t){var e=Y;if(t==="jsDate"){e=X(Y)}return e};y.setCreationDate=function(t){K(t);return this};y.getCreationDate=function(t){return Z(t)};var $=y.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)};var Q=y.__private__.padd2Hex=function(t){t=t.toString();return("00"+t).substr(t.length)};var tt=0;var et=[];var rt=[];var nt=0;var it=[];var at=[];var st;var ot=false;var ut=rt;var ft=function t(){tt=0;nt=0;rt=[];et=[];it=[];Qt=Kt();te=Kt()};y.__private__.setCustomOutputDestination=function(t){ot=true;ut=t};var lt=function t(e){if(!ot){ut=e}};y.__private__.resetCustomOutputDestination=function(){ot=false;ut=rt};var ct=y.__private__.out=function(t){t=t.toString();nt+=t.length+1;ut.push(t);return ut};var ht=y.__private__.write=function(t){return ct(arguments.length===1?t.toString():Array.prototype.join.call(arguments," "))};var dt=y.__private__.getArrayBuffer=function(t){var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r);while(e--){n[e]=t.charCodeAt(e)}return r};var pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return pt};var vt=t.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(t){if(S===x.ADVANCED){vt=t/Bt}else{vt=t}return this};var gt=y.__private__.getFontSize=y.getFontSize=function(){if(S===x.COMPAT){return vt}else{return vt*Bt}};var mt=t.R2L||false;y.__private__.setR2L=y.setR2L=function(t){mt=t;return this};y.__private__.getR2L=y.getR2L=function(){return mt};var bt;var yt=y.__private__.setZoomMode=function(t){var e=[undefined,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t)){bt=t}else if(!isNaN(t)){bt=parseInt(t,10)}else if(e.indexOf(t)!==-1){bt=t}else{throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.')}};y.__private__.getZoomMode=function(){return bt};var wt;var Nt=y.__private__.setPageMode=function(t){var e=[undefined,null,"UseNone","UseOutlines","UseThumbs","FullScreen"];if(e.indexOf(t)==-1){throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.')}wt=t};y.__private__.getPageMode=function(){return wt};var Lt;var At=y.__private__.setLayoutMode=function(t){var e=[undefined,null,"continuous","single","twoleft","tworight","two"];if(e.indexOf(t)==-1){throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.')}Lt=t};y.__private__.getLayoutMode=function(){return Lt};y.__private__.setDisplayMode=y.setDisplayMode=function(t,e,r){yt(t);At(e);Nt(r);return this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(t){if(Object.keys(xt).indexOf(t)===-1){throw new Error("Invalid argument passed to jsPDF.getDocumentProperty")}return xt[t]};y.__private__.getDocumentProperties=function(){return xt};y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(t){for(var e in xt){if(xt.hasOwnProperty(e)&&t[e]){xt[e]=t[e]}}return this};y.__private__.setDocumentProperty=function(t,e){if(Object.keys(xt).indexOf(t)===-1){throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty")}return xt[t]=e};var St={};var _t={};var Pt;var kt=[];var Ft={};var It={};var Ct={};var jt={};var Ot=null;var Bt;var Mt=0;var Et=[];var qt=new q(y);var Dt=t.hotfixes||[];var Rt={};var Tt={};var Ut=[];var zt;var Ht;var Wt;var Vt=function t(e,r,n,i,a,s){if(!(this instanceof t)){return new t(e,r,n,i,a,s)}if(isNaN(e))e=1;if(isNaN(r))r=0;if(isNaN(n))n=0;if(isNaN(i))i=1;if(isNaN(a))a=0;if(isNaN(s))s=0;this._matrix=[e,r,n,i,a,s]};Object.defineProperty(Vt.prototype,"sx",{get:function t(){return this._matrix[0]},set:function t(e){this._matrix[0]=e}});Object.defineProperty(Vt.prototype,"shy",{get:function t(){return this._matrix[1]},set:function t(e){this._matrix[1]=e}});Object.defineProperty(Vt.prototype,"shx",{get:function t(){return this._matrix[2]},set:function t(e){this._matrix[2]=e}});Object.defineProperty(Vt.prototype,"sy",{get:function t(){return this._matrix[3]},set:function t(e){this._matrix[3]=e}});Object.defineProperty(Vt.prototype,"tx",{get:function t(){return this._matrix[4]},set:function t(e){this._matrix[4]=e}});Object.defineProperty(Vt.prototype,"ty",{get:function t(){return this._matrix[5]},set:function t(e){this._matrix[5]=e}});Object.defineProperty(Vt.prototype,"a",{get:function t(){return this._matrix[0]},set:function t(e){this._matrix[0]=e}});Object.defineProperty(Vt.prototype,"b",{get:function t(){return this._matrix[1]},set:function t(e){this._matrix[1]=e}});Object.defineProperty(Vt.prototype,"c",{get:function t(){return this._matrix[2]},set:function t(e){this._matrix[2]=e}});Object.defineProperty(Vt.prototype,"d",{get:function t(){return this._matrix[3]},set:function t(e){this._matrix[3]=e}});Object.defineProperty(Vt.prototype,"e",{get:function t(){return this._matrix[4]},set:function t(e){this._matrix[4]=e}});Object.defineProperty(Vt.prototype,"f",{get:function t(){return this._matrix[5]},set:function t(e){this._matrix[5]=e}});Object.defineProperty(Vt.prototype,"rotation",{get:function t(){return Math.atan2(this.shx,this.sx)}});Object.defineProperty(Vt.prototype,"scaleX",{get:function t(){return this.decompose().scale.sx}});Object.defineProperty(Vt.prototype,"scaleY",{get:function t(){return this.decompose().scale.sy}});Object.defineProperty(Vt.prototype,"isIdentity",{get:function t(){if(this.sx!==1){return false}if(this.shy!==0){return false}if(this.shx!==0){return false}if(this.sy!==1){return false}if(this.tx!==0){return false}if(this.ty!==0){return false}return true}});Vt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(t)};Vt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx;var r=t.sx*this.shy+t.shy*this.sy;var n=t.shx*this.sx+t.sy*this.shx;var i=t.shx*this.shy+t.sy*this.sy;var a=t.tx*this.sx+t.ty*this.shx+this.tx;var s=t.tx*this.shy+t.ty*this.sy+this.ty;return new Vt(e,r,n,i,a,s)};Vt.prototype.decompose=function(){var t=this.sx;var e=this.shy;var r=this.shx;var n=this.sy;var i=this.tx;var a=this.ty;var s=Math.sqrt(t*t+e*e);t/=s;e/=s;var o=t*r+e*n;r-=t*o;n-=e*o;var u=Math.sqrt(r*r+n*n);r/=u;n/=u;o/=u;if(t*n<e*r){t=-t;e=-e;o=-o;s=-s}return{scale:new Vt(s,0,0,u,0,0),translate:new Vt(1,0,0,1,i,a),rotate:new Vt(t,e,-e,t,0,0),skew:new Vt(1,0,o,1,0,0)}};Vt.prototype.toString=function(t){return this.join(" ")};Vt.prototype.inversed=function(){var t=this.sx,e=this.shy,r=this.shx,n=this.sy,i=this.tx,a=this.ty;var s=1/(t*n-e*r);var o=n*s;var u=-e*s;var f=-r*s;var l=t*s;var c=-o*i-f*a;var h=-u*i-l*a;return new Vt(o,u,f,l,c,h)};Vt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx;var r=t.x*this.shy+t.y*this.sy+this.ty;return new Cr(e,r)};Vt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t);var r=this.applyToPoint(new Cr(t.x+t.w,t.y+t.h));return new jr(e.x,e.y,r.x-e.x,r.y-e.y)};Vt.prototype.clone=function(){var t=this.sx;var e=this.shy;var r=this.shx;var n=this.sy;var i=this.tx;var a=this.ty;return new Vt(t,e,r,n,i,a)};y.Matrix=Vt;var Gt=y.matrixMult=function(t,e){return e.multiply(t)};var Yt=new Vt(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Yt;var Jt=function t(e,r){if(It[e])return;var n=r instanceof T?"Sh":"P";var i=n+(Object.keys(Ft).length+1).toString(10);r.id=i;It[e]=i;Ft[i]=r;qt.publish("addPattern",r)};y.ShadingPattern=T;y.TilingPattern=U;y.addShadingPattern=function(t,e){F("addShadingPattern()");Jt(t,e);return this};y.beginTilingPattern=function(t){F("beginTilingPattern()");Br(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)};y.endTilingPattern=function(t,e){F("endTilingPattern()");e.stream=at[st].join("\n");Jt(t,e);qt.publish("endTilingPattern",e);Ut.pop().restore()};var Xt=y.__private__.newObject=function(){var t=Kt();Zt(t,true);return t};var Kt=y.__private__.newObjectDeferred=function(){tt++;et[tt]=function(){return nt};return tt};var Zt=function t(e,r){r=typeof r==="boolean"?r:false;et[e]=nt;if(r){ct(e+" 0 obj")}return e};var $t=y.__private__.newAdditionalObject=function(){var t=Kt();var e={objId:t,content:""};it.push(e);return e};var Qt=Kt();var te=Kt();var ee=y.__private__.decodeColorString=function(t){var e=t.split(" ");if(e.length===2&&(e[1]==="g"||e[1]==="G")){var r=parseFloat(e[0]);e=[r,r,r,"r"]}else if(e.length===5&&(e[4]==="k"||e[4]==="K")){var n=(1-e[0])*(1-e[3]);var i=(1-e[1])*(1-e[3]);var a=(1-e[2])*(1-e[3]);e=[n,i,a,"r"]}var s="#";for(var o=0;o<3;o++){s+=("0"+Math.floor(parseFloat(e[o])*255).toString(16)).slice(-2)}return s};var re=y.__private__.encodeColorString=function(t){var r;if(typeof t==="string"){t={ch1:t}}var n=t.ch1;var i=t.ch2;var a=t.ch3;var s=t.ch4;var o=t.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof n==="string"&&n.charAt(0)!=="#"){var u=new h(n);if(u.ok){n=u.toHex()}else if(!/^\d*\.?\d*$/.test(n)){throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}}if(typeof n==="string"&&/^#[0-9A-Fa-f]{3}$/.test(n)){n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]}if(typeof n==="string"&&/^#[0-9A-Fa-f]{6}$/.test(n)){var f=parseInt(n.substr(1),16);n=f>>16&255;i=f>>8&255;a=f&255}if(typeof i==="undefined"||typeof s==="undefined"&&n===i&&i===a){if(typeof n==="string"){r=n+" "+o[0]}else{switch(t.precision){case 2:r=j(n/255)+" "+o[0];break;case 3:default:r=O(n/255)+" "+o[0]}}}else if(typeof s==="undefined"||e(s)==="object"){if(s&&!isNaN(s.a)){if(s.a===0){r=["1.","1.","1.",o[1]].join(" ");return r}}if(typeof n==="string"){r=[n,i,a,o[1]].join(" ")}else{switch(t.precision){case 2:r=[j(n/255),j(i/255),j(a/255),o[1]].join(" ");break;default:case 3:r=[O(n/255),O(i/255),O(a/255),o[1]].join(" ")}}}else{if(typeof n==="string"){r=[n,i,a,s,o[2]].join(" ")}else{switch(t.precision){case 2:r=[j(n),j(i),j(a),j(s),o[2]].join(" ");break;case 3:default:r=[O(n),O(i),O(a),O(s),o[2]].join(" ")}}}return r};var ne=y.__private__.getFilters=function(){return u};var ie=y.__private__.putStream=function(t){t=t||{};var e=t.data||"";var r=t.filters||ne();var n=t.alreadyAppliedFilters||[];var i=t.addLength1||false;var a=e.length;var s=t.objectId;var o=function t(e){return e};if(g!==null&&typeof s=="undefined"){throw new Error("ObjectId must be passed to putStream for file encryption")}if(g!==null){o=Ye.encryptor(s,0)}var u={};if(r===true){r=["FlateEncode"]}var f=t.additionalKeyValues||[];if(typeof z.API.processDataByFilters!=="undefined"){u=z.API.processDataByFilters(e,r)}else{u={data:e,reverseChain:[]}}var l=u.reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(u.data.length!==0){f.push({key:"Length",value:u.data.length});if(i===true){f.push({key:"Length1",value:a})}}if(l.length!=0){if(l.split("/").length-1===1){f.push({key:"Filter",value:l})}else{f.push({key:"Filter",value:"["+l+"]"});for(var c=0;c<f.length;c+=1){if(f[c].key==="DecodeParms"){var h=[];for(var d=0;d<u.reverseChain.split("/").length-1;d+=1){h.push("null")}h.push(f[c].value);f[c].value="["+h.join(" ")+"]"}}}}ct("<<");for(var p=0;p<f.length;p++){ct("/"+f[p].key+" "+f[p].value)}ct(">>");if(u.data.length!==0){ct("stream");ct(o(u.data));ct("endstream")}};var ae=y.__private__.putPage=function(t){var e=t.number;var r=t.data;var n=t.objId;var i=t.contentsObjId;Zt(n,true);ct("<</Type /Page");ct("/Parent "+t.rootDictionaryObjId+" 0 R");ct("/Resources "+t.resourceDictionaryObjId+" 0 R");ct("/MediaBox ["+parseFloat(C(t.mediaBox.bottomLeftX))+" "+parseFloat(C(t.mediaBox.bottomLeftY))+" "+C(t.mediaBox.topRightX)+" "+C(t.mediaBox.topRightY)+"]");if(t.cropBox!==null){ct("/CropBox ["+C(t.cropBox.bottomLeftX)+" "+C(t.cropBox.bottomLeftY)+" "+C(t.cropBox.topRightX)+" "+C(t.cropBox.topRightY)+"]")}if(t.bleedBox!==null){ct("/BleedBox ["+C(t.bleedBox.bottomLeftX)+" "+C(t.bleedBox.bottomLeftY)+" "+C(t.bleedBox.topRightX)+" "+C(t.bleedBox.topRightY)+"]")}if(t.trimBox!==null){ct("/TrimBox ["+C(t.trimBox.bottomLeftX)+" "+C(t.trimBox.bottomLeftY)+" "+C(t.trimBox.topRightX)+" "+C(t.trimBox.topRightY)+"]")}if(t.artBox!==null){ct("/ArtBox ["+C(t.artBox.bottomLeftX)+" "+C(t.artBox.bottomLeftY)+" "+C(t.artBox.topRightX)+" "+C(t.artBox.topRightY)+"]")}if(typeof t.userUnit==="number"&&t.userUnit!==1){ct("/UserUnit "+t.userUnit)}qt.publish("putPage",{objId:n,pageContext:Et[e],pageNumber:e,page:r});ct("/Contents "+i+" 0 R");ct(">>");ct("endobj");var a=r.join("\n");if(S===x.ADVANCED){a+="\nQ"}Zt(i,true);ie({data:a,filters:ne(),objectId:i});ct("endobj");return n};var se=y.__private__.putPages=function(){var t,e,r=[];for(t=1;t<=Mt;t++){Et[t].objId=Kt();Et[t].contentsObjId=Kt()}for(t=1;t<=Mt;t++){r.push(ae({number:t,data:at[t],objId:Et[t].objId,contentsObjId:Et[t].contentsObjId,mediaBox:Et[t].mediaBox,cropBox:Et[t].cropBox,bleedBox:Et[t].bleedBox,trimBox:Et[t].trimBox,artBox:Et[t].artBox,userUnit:Et[t].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:te}))}Zt(Qt,true);ct("<</Type /Pages");var n="/Kids [";for(e=0;e<Mt;e++){n+=r[e]+" 0 R "}ct(n+"]");ct("/Count "+Mt);ct(">>");ct("endobj");qt.publish("postPutPages")};var oe=function t(e){qt.publish("putFont",{font:e,out:ct,newObject:Xt,putStream:ie});if(e.isAlreadyPutted!==true){e.objectNumber=Xt();ct("<<");ct("/Type /Font");ct("/BaseFont /"+E(e.postScriptName));ct("/Subtype /Type1");if(typeof e.encoding==="string"){ct("/Encoding /"+e.encoding)}ct("/FirstChar 32");ct("/LastChar 255");ct(">>");ct("endobj")}};var ue=function t(){for(var e in St){if(St.hasOwnProperty(e)){if(m===false||m===true&&b.hasOwnProperty(e)){oe(St[e])}}}};var fe=function t(e){e.objectNumber=Xt();var r=[];r.push({key:"Type",value:"/XObject"});r.push({key:"Subtype",value:"/Form"});r.push({key:"BBox",value:"["+[C(e.x),C(e.y),C(e.x+e.width),C(e.y+e.height)].join(" ")+"]"});r.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");ie({data:n,additionalKeyValues:r,objectId:e.objectNumber});ct("endobj")};var le=function t(){for(var e in Rt){if(Rt.hasOwnProperty(e)){fe(Rt[e])}}};var ce=function t(e,r){var n=[];var i;var a=1/(r-1);for(i=0;i<1;i+=a){n.push(i)}n.push(1);if(e[0].offset!=0){var s={offset:0,color:e[0].color};e.unshift(s)}if(e[e.length-1].offset!=1){var o={offset:1,color:e[e.length-1].color};e.push(o)}var u="";var f=0;for(var l=0;l<n.length;l++){i=n[l];while(i>e[f+1].offset){f++}var c=e[f].offset;var h=e[f+1].offset;var d=(i-c)/(h-c);var p=e[f].color;var v=e[f+1].color;u+=Q(Math.round((1-d)*p[0]+d*v[0]).toString(16))+Q(Math.round((1-d)*p[1]+d*v[1]).toString(16))+Q(Math.round((1-d)*p[2]+d*v[2]).toString(16))}return u.trim()};var he=function t(e,r){r||(r=21);var n=Xt();var i=ce(e.colors,r);var a=[];a.push({key:"FunctionType",value:"0"});a.push({key:"Domain",value:"[0.0 1.0]"});a.push({key:"Size",value:"["+r+"]"});a.push({key:"BitsPerSample",value:"8"});a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"});a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"});ie({data:i,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n});ct("endobj");e.objectNumber=Xt();ct("<< /ShadingType "+e.type);ct("/ColorSpace /DeviceRGB");var s="/Coords ["+C(parseFloat(e.coords[0]))+" "+C(parseFloat(e.coords[1]))+" ";if(e.type===2){s+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))}else{s+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))+" "+C(parseFloat(e.coords[4]))+" "+C(parseFloat(e.coords[5]))}s+="]";ct(s);if(e.matrix){ct("/Matrix ["+e.matrix.toString()+"]")}ct("/Function "+n+" 0 R");ct("/Extend [true true]");ct(">>");ct("endobj")};var de=function t(e,r){var n=Kt();var i=Xt();r.push({resourcesOid:n,objectOid:i});e.objectNumber=i;var a=[];a.push({key:"Type",value:"/Pattern"});a.push({key:"PatternType",value:"1"});a.push({key:"PaintType",value:"1"});a.push({key:"TilingType",value:"1"});a.push({key:"BBox",value:"["+e.boundingBox.map(C).join(" ")+"]"});a.push({key:"XStep",value:C(e.xStep)});a.push({key:"YStep",value:C(e.yStep)});a.push({key:"Resources",value:n+" 0 R"});if(e.matrix){a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"})}ie({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber});ct("endobj")};var pe=function t(e){var r;for(r in Ft){if(Ft.hasOwnProperty(r)){if(Ft[r]instanceof T){he(Ft[r])}else if(Ft[r]instanceof U){de(Ft[r],e)}}}};var ve=function t(e){e.objectNumber=Xt();ct("<<");for(var r in e){switch(r){case"opacity":ct("/ca "+j(e[r]));break;case"stroke-opacity":ct("/CA "+j(e[r]));break}}ct(">>");ct("endobj")};var ge=function t(){var e;for(e in Ct){if(Ct.hasOwnProperty(e)){ve(Ct[e])}}};var me=function t(){ct("/XObject <<");for(var e in Rt){if(Rt.hasOwnProperty(e)&&Rt[e].objectNumber>=0){ct("/"+e+" "+Rt[e].objectNumber+" 0 R")}}qt.publish("putXobjectDict");ct(">>")};var be=function t(){Ye.oid=Xt();ct("<<");ct("/Filter /Standard");ct("/V "+Ye.v);ct("/R "+Ye.r);ct("/U <"+Ye.toHexString(Ye.U)+">");ct("/O <"+Ye.toHexString(Ye.O)+">");ct("/P "+Ye.P);ct(">>");ct("endobj")};var ye=function t(){ct("/Font <<");for(var e in St){if(St.hasOwnProperty(e)){if(m===false||m===true&&b.hasOwnProperty(e)){ct("/"+e+" "+St[e].objectNumber+" 0 R")}}}ct(">>")};var we=function t(){if(Object.keys(Ft).length>0){ct("/Shading <<");for(var e in Ft){if(Ft.hasOwnProperty(e)&&Ft[e]instanceof T&&Ft[e].objectNumber>=0){ct("/"+e+" "+Ft[e].objectNumber+" 0 R")}}qt.publish("putShadingPatternDict");ct(">>")}};var Ne=function t(e){if(Object.keys(Ft).length>0){ct("/Pattern <<");for(var r in Ft){if(Ft.hasOwnProperty(r)&&Ft[r]instanceof y.TilingPattern&&Ft[r].objectNumber>=0&&Ft[r].objectNumber<e){ct("/"+r+" "+Ft[r].objectNumber+" 0 R")}}qt.publish("putTilingPatternDict");ct(">>")}};var Le=function t(){if(Object.keys(Ct).length>0){var e;ct("/ExtGState <<");for(e in Ct){if(Ct.hasOwnProperty(e)&&Ct[e].objectNumber>=0){ct("/"+e+" "+Ct[e].objectNumber+" 0 R")}}qt.publish("putGStateDict");ct(">>")}};var Ae=function t(e){Zt(e.resourcesOid,true);ct("<<");ct("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");ye();we();Ne(e.objectOid);Le();me();ct(">>");ct("endobj")};var xe=function t(){var e=[];ue();ge();le();pe(e);qt.publish("putResources");e.forEach(Ae);Ae({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER});qt.publish("postPutResources")};var Se=function t(){qt.publish("putAdditionalObjects");for(var e=0;e<it.length;e++){var r=it[e];Zt(r.objId,true);ct(r.content);ct("endobj")}qt.publish("postPutAdditionalObjects")};var _e=function t(e){_t[e.fontName]=_t[e.fontName]||{};_t[e.fontName][e.fontStyle]=e.id};var Pe=function t(e,r,n,i,a){var s={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:e,fontName:r,fontStyle:n,encoding:i,isStandardFont:a||false,metadata:{}};qt.publish("addFont",{font:s,instance:this});St[s.id]=s;_e(s);return s.id};var ke=function t(e){for(var r=0,n=pt.length;r<n;r++){var i=Pe.call(this,e[r][0],e[r][1],e[r][2],pt[r][3],true);if(m===false){b[i]=true}var a=e[r][0].split("-");_e({id:i,fontName:a[0],fontStyle:a[1]||""})}qt.publish("addFonts",{fonts:St,dictionary:_t})};var Fe=function t(e){e.foo=function t(){try{return e.apply(this,arguments)}catch(t){var n=t.stack||"";if(~n.indexOf(" at "))n=n.split(" at ")[1];var i="Error in function "+n.split("\n")[0].split("<")[0]+": "+t.message;if(r.console){r.console.error(i,t);if(r.alert)alert(i)}else{throw new Error(i)}}};e.foo.bar=e;return e.foo};var Ie=function t(e,r){var n,i,a,s,o,u,f,l,c;r=r||{};a=r.sourceEncoding||"Unicode";o=r.outputEncoding;if((r.autoencode||o)&&St[Pt].metadata&&St[Pt].metadata[a]&&St[Pt].metadata[a].encoding){s=St[Pt].metadata[a].encoding;if(!o&&St[Pt].encoding){o=St[Pt].encoding}if(!o&&s.codePages){o=s.codePages[0]}if(typeof o==="string"){o=s[o]}if(o){f=false;u=[];for(n=0,i=e.length;n<i;n++){l=o[e.charCodeAt(n)];if(l){u.push(String.fromCharCode(l))}else{u.push(e[n])}if(u[n].charCodeAt(0)>>8){f=true}}e=u.join("")}}n=e.length;while(f===undefined&&n!==0){if(e.charCodeAt(n-1)>>8){f=true}n--}if(!f){return e}u=r.noBOM?[]:[254,255];for(n=0,i=e.length;n<i;n++){l=e.charCodeAt(n);c=l>>8;if(c>>8){throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE")}u.push(c);u.push(l-(c<<8))}return String.fromCharCode.apply(undefined,u)};var Ce=y.__private__.pdfEscape=y.pdfEscape=function(t,e){return Ie(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")};var je=y.__private__.beginPage=function(t){at[++Mt]=[];Et[Mt]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}};Me(Mt);lt(at[st])};var Oe=function t(e,r){var i,o,u;n=r||n;if(typeof e==="string"){i=A(e.toLowerCase());if(Array.isArray(i)){o=i[0];u=i[1]}}if(Array.isArray(e)){o=e[0]*Bt;u=e[1]*Bt}if(isNaN(o)){o=a[0];u=a[1]}if(o>14400||u>14400){s.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400");o=Math.min(14400,o);u=Math.min(14400,u)}a=[o,u];switch(n.substr(0,1)){case"l":if(u>o){a=[u,o]}break;case"p":if(o>u){a=[u,o]}break}je(a);dr(cr);ct(Lr);if(kr!==0){ct(kr+" J")}if(Fr!==0){ct(Fr+" j")}qt.publish("addPage",{pageNumber:Mt})};var Be=function t(e){if(e>0&&e<=Mt){at.splice(e,1);Et.splice(e,1);Mt--;if(st>Mt){st=Mt}this.setPage(st)}};var Me=function t(e){if(e>0&&e<=Mt){st=e}};var Ee=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return at.length-1};var qe=function t(e,r,n){var i=undefined,a;n=n||{};e=e!==undefined?e:St[Pt].fontName;r=r!==undefined?r:St[Pt].fontStyle;a=e.toLowerCase();if(_t[a]!==undefined&&_t[a][r]!==undefined){i=_t[a][r]}else if(_t[e]!==undefined&&_t[e][r]!==undefined){i=_t[e][r]}else{if(n.disableWarning===false){s.warn("Unable to look up font label for font '"+e+"', '"+r+"'. Refer to getFontList() for available fonts.")}}if(!i&&!n.noFallback){i=_t["times"][r];if(i==null){i=_t["times"]["normal"]}}return i};var De=y.__private__.putInfo=function(){var t=Xt();var e=function t(e){return e};if(g!==null){e=Ye.encryptor(t,0)}ct("<<");ct("/Producer ("+Ce(e("jsPDF "+z.version))+")");for(var r in xt){if(xt.hasOwnProperty(r)&&xt[r]){ct("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+Ce(e(xt[r]))+")")}}ct("/CreationDate ("+Ce(e(Y))+")");ct(">>");ct("endobj")};var Re=y.__private__.putCatalog=function(t){t=t||{};var e=t.rootDictionaryObjId||Qt;Xt();ct("<<");ct("/Type /Catalog");ct("/Pages "+e+" 0 R");if(!bt)bt="fullwidth";switch(bt){case"fullwidth":ct("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ct("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ct("/OpenAction [3 0 R /Fit]");break;case"original":ct("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+bt;if(r.substr(r.length-1)==="%")bt=parseInt(bt)/100;if(typeof bt==="number"){ct("/OpenAction [3 0 R /XYZ null null "+j(bt)+"]")}}if(!Lt)Lt="continuous";switch(Lt){case"continuous":ct("/PageLayout /OneColumn");break;case"single":ct("/PageLayout /SinglePage");break;case"two":case"twoleft":ct("/PageLayout /TwoColumnLeft");break;case"tworight":ct("/PageLayout /TwoColumnRight");break}if(wt){ct("/PageMode /"+wt)}qt.publish("putCatalog");ct(">>");ct("endobj")};var Te=y.__private__.putTrailer=function(){ct("trailer");ct("<<");ct("/Size "+(tt+1));ct("/Root "+tt+" 0 R");ct("/Info "+(tt-1)+" 0 R");if(g!==null){ct("/Encrypt "+Ye.oid+" 0 R")}ct("/ID [ <"+W+"> <"+W+"> ]");ct(">>")};var Ue=y.__private__.putHeader=function(){ct("%PDF-"+w);ct("%ºß¬à")};var ze=y.__private__.putXRef=function(){var t="0000000000";ct("xref");ct("0 "+(tt+1));ct("0000000000 65535 f ");for(var e=1;e<=tt;e++){var r=et[e];if(typeof r==="function"){ct((t+et[e]()).slice(-10)+" 00000 n ")}else{if(typeof et[e]!=="undefined"){ct((t+et[e]).slice(-10)+" 00000 n ")}else{ct("0000000000 00000 n ")}}}};var He=y.__private__.buildDocument=function(){ft();lt(rt);qt.publish("buildDocument");Ue();se();Se();xe();if(g!==null)be();De();Re();var t=nt;ze();Te();ct("startxref");ct(""+t);ct("%%EOF");lt(at[st]);return rt.join("\n")};var We=y.__private__.getBlob=function(t){return new Blob([dt(t)],{type:"application/pdf"})};var Ve=y.output=y.__private__.output=Fe(function t(e,n){n=n||{};if(typeof n==="string"){n={filename:n}}else{n.filename=n.filename||"generated.pdf"}switch(e){case undefined:return He();case"save":y.save(n.filename);break;case"arraybuffer":return dt(He());case"blob":return We(He());case"bloburi":case"bloburl":if(typeof r.URL!=="undefined"&&typeof r.URL.createObjectURL==="function"){return r.URL&&r.URL.createObjectURL(We(He()))||void 0}else{s.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.")}break;case"datauristring":case"dataurlstring":var i="";var a=He();try{i=p(a)}catch(t){i=p(unescape(encodeURIComponent(a)))}return"data:application/pdf;filename="+n.filename+";base64,"+i;case"pdfobjectnewwindow":if(Object.prototype.toString.call(r)==="[object Window]"){var o="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js";var u=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';if(n.pdfObjectUrl){o=n.pdfObjectUrl;u=""}var f="<html>"+'<style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+o+'"'+u+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(n)+");<\/script></body></html>";var l=r.open();if(l!==null){l.document.write(f)}return l}else{throw new Error("The option pdfobjectnewwindow just works in a browser-environment.")}case"pdfjsnewwindow":if(Object.prototype.toString.call(r)==="[object Window]"){var c=n.pdfJsUrl||"examples/PDF.js/web/viewer.html";var h="<html>"+"<style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style>"+'<body><iframe id="pdfViewer" src="'+c+"?file=&downloadName="+n.filename+'" width="500px" height="400px" />'+"</body></html>";var d=r.open();if(d!==null){d.document.write(h);var v=this;d.document.documentElement.querySelector("#pdfViewer").onload=function(){d.document.title=n.filename;d.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(v.output("bloburl"))}}return d}else{throw new Error("The option pdfjsnewwindow just works in a browser-environment.")}case"dataurlnewwindow":if(Object.prototype.toString.call(r)==="[object Window]"){var g="<html>"+"<style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style>"+"<body>"+'<iframe src="'+this.output("datauristring",n)+'"></iframe>'+"</body></html>";var m=r.open();if(m!==null){m.document.write(g);m.document.title=n.filename}if(m||typeof safari==="undefined")return m}else{throw new Error("The option dataurlnewwindow just works in a browser-environment.")}break;case"datauri":case"dataurl":return r.document.location.href=this.output("datauristring",n);default:return null}});var Ge=function t(e){return Array.isArray(Dt)===true&&Dt.indexOf(e)>-1};switch(i){case"pt":Bt=1;break;case"mm":Bt=72/25.4;break;case"cm":Bt=72/2.54;break;case"in":Bt=72;break;case"px":if(Ge("px_scaling")==true){Bt=72/96}else{Bt=96/72}break;case"pc":Bt=12;break;case"em":Bt=12;break;case"ex":Bt=6;break;default:if(typeof i==="number"){Bt=i}else{throw new Error("Invalid unit: "+i)}}var Ye=null;K();G();var Je=function t(e){if(g!==null){return Ye.encryptor(e,0)}return function(t){return t}};var Xe=y.__private__.getPageInfo=y.getPageInfo=function(t){if(isNaN(t)||t%1!==0){throw new Error("Invalid argument passed to jsPDF.getPageInfo")}var e=Et[t].objId;return{objId:e,pageNumber:t,pageContext:Et[t]}};var Ke=y.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!==0){throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId")}for(var e in Et){if(Et[e].objId===t){break}}return Xe(e)};var Ze=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Et[st].objId,pageNumber:st,pageContext:Et[st]}};y.addPage=function(){Oe.apply(this,arguments);return this};y.setPage=function(){Me.apply(this,arguments);lt.call(this,at[st]);return this};y.insertPage=function(t){this.addPage();this.movePage(st,t);return this};y.movePage=function(t,e){var r,n;if(t>e){r=at[t];n=Et[t];for(var i=t;i>e;i--){at[i]=at[i-1];Et[i]=Et[i-1]}at[e]=r;Et[e]=n;this.setPage(e)}else if(t<e){r=at[t];n=Et[t];for(var a=t;a<e;a++){at[a]=at[a+1];Et[a]=Et[a+1]}at[e]=r;Et[e]=n;this.setPage(e)}return this};y.deletePage=function(){Be.apply(this,arguments);return this};y.__private__.text=y.text=function(t,r,n,i,a){i=i||{};var s=i.scope||this;var o,u,f,l,c,h,d,p;if(typeof t==="number"&&typeof r==="number"&&(typeof n==="string"||Array.isArray(n))){var v=n;n=r;r=t;t=v}var g;if(arguments[3]instanceof Vt===false){d=arguments[3];f=arguments[4];l=arguments[5];if(e(d)!=="object"||d===null){if(typeof f==="string"){l=f;f=null}if(typeof d==="string"){l=d;d=null}if(typeof d==="number"){f=d;d=null}i={flags:d,angle:f,align:l}}}else{F("The transform parameter of text() with a Matrix value");g=a}if(isNaN(r)||isNaN(n)||typeof t==="undefined"||t===null){throw new Error("Invalid arguments passed to jsPDF.text")}if(t.length===0){return s}var m="";var y=false;var w=typeof i.lineHeightFactor==="number"?i.lineHeightFactor:pr;var N=s.internal.scaleFactor;function L(t){t=t.split("\t").join(Array(i.TabLen||9).join(" "));return Ce(t,d)}function A(t){var e=t.concat();var r=[];var n=e.length;var i;while(n--){i=e.shift();if(typeof i==="string"){r.push(i)}else{if(Array.isArray(t)&&(i.length===1||i[1]===undefined&&i[2]===undefined)){r.push(i[0])}else{r.push([i[0],i[1],i[2]])}}}return r}function _(t,e){var r;if(typeof t==="string"){r=e(t)[0]}else if(Array.isArray(t)){var n=t.concat();var i=[];var a=n.length;var s;var o;while(a--){s=n.shift();if(typeof s==="string"){i.push(e(s)[0])}else if(Array.isArray(s)&&typeof s[0]==="string"){o=e(s[0],s[1],s[2]);i.push([o[0],o[1],o[2]])}}r=i}return r}var P=false;var k=true;if(typeof t==="string"){P=true}else if(Array.isArray(t)){var I=t.concat();u=[];var j=I.length;var O;while(j--){O=I.shift();if(typeof O!=="string"||Array.isArray(O)&&typeof O[0]!=="string"){k=false}}P=k}if(P===false){throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.')}if(typeof t==="string"){if(t.match(/[\r?\n]/)){t=t.split(/\r\n|\r|\n/g)}else{t=[t]}}var M=vt/s.internal.scaleFactor;var E=M*(w-1);switch(i.baseline){case"bottom":n-=E;break;case"top":n+=M-E;break;case"hanging":n+=M-2*E;break;case"middle":n+=M/2-E;break}h=i.maxWidth||0;if(h>0){if(typeof t==="string"){t=s.splitTextToSize(t,h)}else if(Object.prototype.toString.call(t)==="[object Array]"){t=t.reduce(function(t,e){return t.concat(s.splitTextToSize(e,h))},[])}}o={text:t,x:r,y:n,options:i,mutex:{pdfEscape:Ce,activeFontKey:Pt,fonts:St,activeFontSize:vt}};qt.publish("preProcessText",o);t=o.text;i=o.options;f=i.angle;if(g instanceof Vt===false&&f&&typeof f==="number"){f*=Math.PI/180;if(i.rotationDirection===0){f=-f}if(S===x.ADVANCED){f=-f}var q=Math.cos(f);var D=Math.sin(f);g=new Vt(q,D,-D,q,0,0)}else if(f&&f instanceof Vt){g=f}if(S===x.ADVANCED&&!g){g=Yt}c=i.charSpace||_r;if(typeof c!=="undefined"){m+=C(B(c))+" Tc\n";this.setCharSpace(this.getCharSpace()||0)}p=i.horizontalScale;if(typeof p!=="undefined"){m+=C(p*100)+" Tz\n"}var R=i.lang;var T=-1;var U=typeof i.renderingMode!=="undefined"?i.renderingMode:i.stroke;var z=s.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case false:case"fill":T=0;break;case 1:case true:case"stroke":T=1;break;case 2:case"fillThenStroke":T=2;break;case 3:case"invisible":T=3;break;case 4:case"fillAndAddForClipping":T=4;break;case 5:case"strokeAndAddPathForClipping":T=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":T=6;break;case 7:case"addToPathForClipping":T=7;break}var H=typeof z.usedRenderingMode!=="undefined"?z.usedRenderingMode:-1;if(T!==-1){m+=T+" Tr\n"}else if(H!==-1){m+="0 Tr\n"}if(T!==-1){z.usedRenderingMode=T}l=i.align||"left";var W=vt*w;var V=s.internal.pageSize.getWidth();var G=St[Pt];c=i.charSpace||_r;h=i.maxWidth||0;var Y;d=Object.assign({autoencode:true,noBOM:true},i.flags);var J=[];if(Object.prototype.toString.call(t)==="[object Array]"){u=A(t);var X;if(l!=="left"){Y=u.map(function(t){return s.getStringUnitWidth(t,{font:G,charSpace:c,fontSize:vt,doKerning:false})*vt/N})}var K=0;var Z;if(l==="right"){r-=Y[0];t=[];j=u.length;for(var $=0;$<j;$++){if($===0){Z=br(r);X=yr(n)}else{Z=B(K-Y[$]);X=-W}t.push([u[$],Z,X]);K=Y[$]}}else if(l==="center"){r-=Y[0]/2;t=[];j=u.length;for(var Q=0;Q<j;Q++){if(Q===0){Z=br(r);X=yr(n)}else{Z=B((K-Y[Q])/2);X=-W}t.push([u[Q],Z,X]);K=Y[Q]}}else if(l==="left"){t=[];j=u.length;for(var tt=0;tt<j;tt++){t.push(u[tt])}}else if(l==="justify"){t=[];j=u.length;h=h!==0?h:V;for(var et=0;et<j;et++){X=et===0?yr(n):-W;Z=et===0?br(r):0;if(et<j-1){J.push(C(B((h-Y[et])/(u[et].split(" ").length-1))))}else{J.push(0)}t.push([u[et],Z,X])}}else{throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".')}}var rt=typeof i.R2L==="boolean"?i.R2L:mt;if(rt===true){t=_(t,function(t,e,r){return[t.split("").reverse().join(""),e,r]})}o={text:t,x:r,y:n,options:i,mutex:{pdfEscape:Ce,activeFontKey:Pt,fonts:St,activeFontSize:vt}};qt.publish("postProcessText",o);t=o.text;y=o.mutex.isHex||false;var nt=St[Pt].encoding;if(nt==="WinAnsiEncoding"||nt==="StandardEncoding"){t=_(t,function(t,e,r){return[L(t),e,r]})}u=A(t);t=[];var it=0;var at=1;var st=Array.isArray(u[0])?at:it;var ot;var ut;var ft;var lt="";var ht=function t(e,r,n){var a="";if(n instanceof Vt){if(typeof i.angle==="number"){n=Gt(n,new Vt(1,0,0,1,e,r))}else{n=Gt(new Vt(1,0,0,1,e,r),n)}if(S===x.ADVANCED){n=Gt(new Vt(1,0,0,-1,0,0),n)}a=n.join(" ")+" Tm\n"}else{a=C(e)+" "+C(r)+" Td\n"}return a};for(var dt=0;dt<u.length;dt++){lt="";switch(st){case at:ft=(y?"<":"(")+u[dt][0]+(y?">":")");ot=parseFloat(u[dt][1]);ut=parseFloat(u[dt][2]);break;case it:ft=(y?"<":"(")+u[dt]+(y?">":")");ot=br(r);ut=yr(n);break}if(typeof J!=="undefined"&&typeof J[dt]!=="undefined"){lt=J[dt]+" Tw\n"}if(dt===0){t.push(lt+ht(ot,ut,g)+ft)}else if(st===it){t.push(lt+ft)}else if(st===at){t.push(lt+ht(ot,ut,g)+ft)}}t=st===it?t.join(" Tj\nT* "):t.join(" Tj\n");t+=" Tj\n";var pt="BT\n/";pt+=Pt+" "+vt+" Tf\n";pt+=C(vt*w)+" TL\n";pt+=xr+"\n";pt+=m;pt+=t;pt+="ET";ct(pt);b[Pt]=true;return s};var $e=y.__private__.clip=y.clip=function(t){if("evenodd"===t){ct("W*")}else{ct("W")}return this};y.clipEvenOdd=function(){return $e("evenodd")};y.__private__.discardPath=y.discardPath=function(){ct("n");return this};var Qe=y.__private__.isValidStyle=function(t){var e=[undefined,null,"S","D","F","DF","FD","f","f*","B","B*","n"];var r=false;if(e.indexOf(t)!==-1){r=true}return r};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(t){if(Qe(t)){v=t}return this};var tr=y.__private__.getStyle=y.getStyle=function(t){var e=v;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t;break}return e};var er=y.close=function(){ct("h");return this};y.stroke=function(){ct("S");return this};y.fill=function(t){rr("f",t);return this};y.fillEvenOdd=function(t){rr("f*",t);return this};y.fillStroke=function(t){rr("B",t);return this};y.fillStrokeEvenOdd=function(t){rr("B*",t);return this};var rr=function t(r,n){if(e(n)==="object"){ar(n,r)}else{ct(r)}};var nr=function t(e){if(e===null||S===x.ADVANCED&&e===undefined){return}e=tr(e);ct(e)};function ir(t,e,r,n,i){var a=new U(e||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,i||this.matrix);a.stream=this.stream;var s=t+"$$"+this.cloneIndex+++"$$";Jt(s,a);return a}var ar=function t(e,r){var n=It[e.key];var i=Ft[n];if(i instanceof T){ct("q");ct(sr(r));if(i.gState){y.setGState(i.gState)}ct(e.matrix.toString()+" cm");ct("/"+n+" sh");ct("Q")}else if(i instanceof U){var a=new Vt(1,0,0,-1,0,Rr());if(e.matrix){a=a.multiply(e.matrix||Yt);n=ir.call(i,e.key,e.boundingBox,e.xStep,e.yStep,a).id}ct("q");ct("/Pattern cs");ct("/"+n+" scn");if(i.gState){y.setGState(i.gState)}ct(r);ct("Q")}};var sr=function t(e){switch(e){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}};var or=y.moveTo=function(t,e){ct(C(B(t))+" "+C(H(e))+" m");return this};var ur=y.lineTo=function(t,e){ct(C(B(t))+" "+C(H(e))+" l");return this};var fr=y.curveTo=function(t,e,r,n,i,a){ct([C(B(t)),C(H(e)),C(B(r)),C(H(n)),C(B(i)),C(H(a)),"c"].join(" "));return this};y.__private__.line=y.line=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!Qe(i)){throw new Error("Invalid arguments passed to jsPDF.line")}if(S===x.COMPAT){return this.lines([[r-t,n-e]],t,e,[1,1],i||"S")}else{return this.lines([[r-t,n-e]],t,e,[1,1]).stroke()}};y.__private__.lines=y.lines=function(t,e,r,n,i,a){var s,o,u,f,l,c,h,d,p,v,g,m;if(typeof t==="number"){m=r;r=e;e=t;t=m}n=n||[1,1];a=a||false;if(isNaN(e)||isNaN(r)||!Array.isArray(t)||!Array.isArray(n)||!Qe(i)||typeof a!=="boolean"){throw new Error("Invalid arguments passed to jsPDF.lines")}or(e,r);s=n[0];o=n[1];f=t.length;v=e;g=r;for(u=0;u<f;u++){l=t[u];if(l.length===2){v=l[0]*s+v;g=l[1]*o+g;ur(v,g)}else{c=l[0]*s+v;h=l[1]*o+g;d=l[2]*s+v;p=l[3]*o+g;v=l[4]*s+v;g=l[5]*o+g;fr(c,h,d,p,v,g)}}if(a){er()}nr(i);return this};y.path=function(t){for(var e=0;e<t.length;e++){var r=t[e];var n=r.c;switch(r.op){case"m":or(n[0],n[1]);break;case"l":ur(n[0],n[1]);break;case"c":fr.apply(this,n);break;case"h":er();break}}return this};y.__private__.rect=y.rect=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!Qe(i)){throw new Error("Invalid arguments passed to jsPDF.rect")}if(S===x.COMPAT){n=-n}ct([C(B(t)),C(H(e)),C(B(r)),C(B(n)),"re"].join(" "));nr(i);return this};y.__private__.triangle=y.triangle=function(t,e,r,n,i,a,s){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(a)||!Qe(s)){throw new Error("Invalid arguments passed to jsPDF.triangle")}this.lines([[r-t,n-e],[i-r,a-n],[t-i,e-a]],t,e,[1,1],s,true);return this};y.__private__.roundedRect=y.roundedRect=function(t,e,r,n,i,a,s){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(a)||!Qe(s)){throw new Error("Invalid arguments passed to jsPDF.roundedRect")}var o=4/3*(Math.SQRT2-1);i=Math.min(i,r*.5);a=Math.min(a,n*.5);this.lines([[r-2*i,0],[i*o,0,i,a-a*o,i,a],[0,n-2*a],[0,a*o,-(i*o),a,-i,a],[-r+2*i,0],[-(i*o),0,-i,-(a*o),-i,-a],[0,-n+2*a],[0,-(a*o),i*o,-a,i,-a]],t+i,e,[1,1],s,true);return this};y.__private__.ellipse=y.ellipse=function(t,e,r,n,i){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||!Qe(i)){throw new Error("Invalid arguments passed to jsPDF.ellipse")}var a=4/3*(Math.SQRT2-1)*r,s=4/3*(Math.SQRT2-1)*n;or(t+r,e);fr(t+r,e-s,t+a,e-n,t,e-n);fr(t-a,e-n,t-r,e-s,t-r,e);fr(t-r,e+s,t-a,e+n,t,e+n);fr(t+a,e+n,t+r,e+s,t+r,e);nr(i);return this};y.__private__.circle=y.circle=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||!Qe(n)){throw new Error("Invalid arguments passed to jsPDF.circle")}return this.ellipse(t,e,r,r,n)};y.setFont=function(t,e,r){if(r){e=k(e,r)}Pt=qe(t,e,{disableWarning:false});return this};var lr=y.__private__.getFont=y.getFont=function(){return St[qe.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var t={},e,r;for(e in _t){if(_t.hasOwnProperty(e)){t[e]=[];for(r in _t[e]){if(_t[e].hasOwnProperty(r)){t[e].push(r)}}}}return t};y.addFont=function(t,e,r,n,i){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];if(arguments[3]&&a.indexOf(arguments[3])!==-1){i=arguments[3]}else if(arguments[3]&&a.indexOf(arguments[3])==-1){r=k(r,n)}i=i||"Identity-H";return Pe.call(this,t,e,r,i)};var cr=t.lineWidth||.200025;var hr=y.__private__.getLineWidth=y.getLineWidth=function(){return cr};var dr=y.__private__.setLineWidth=y.setLineWidth=function(t){cr=t;ct(C(B(t))+" w");return this};y.__private__.setLineDash=z.API.setLineDash=z.API.setLineDashPattern=function(t,e){t=t||[];e=e||0;if(isNaN(e)||!Array.isArray(t)){throw new Error("Invalid arguments passed to jsPDF.setLineDash")}t=t.map(function(t){return C(B(t))}).join(" ");e=C(B(e));ct("["+t+"] "+e+" d");return this};var pr;var vr=y.__private__.getLineHeight=y.getLineHeight=function(){return vt*pr};y.__private__.getLineHeight=y.getLineHeight=function(){return vt*pr};var gr=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(t){t=t||1.15;if(typeof t==="number"){pr=t}return this};var mr=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return pr};gr(t.lineHeight);var br=y.__private__.getHorizontalCoordinate=function(t){return B(t)};var yr=y.__private__.getVerticalCoordinate=function(t){if(S===x.ADVANCED){return t}else{var e=Et[st].mediaBox.topRightY-Et[st].mediaBox.bottomLeftY;return e-B(t)}};var wr=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(t){return C(br(t))};var Nr=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(t){return C(yr(t))};var Lr=t.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return ee(Lr)};y.__private__.setStrokeColor=y.setDrawColor=function(t,e,r,n){var i={ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"draw",precision:2};Lr=re(i);ct(Lr);return this};var Ar=t.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return ee(Ar)};y.__private__.setFillColor=y.setFillColor=function(t,e,r,n){var i={ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"fill",precision:2};Ar=re(i);ct(Ar);return this};var xr=t.textColor||"0 g";var Sr=y.__private__.getTextColor=y.getTextColor=function(){return ee(xr)};y.__private__.setTextColor=y.setTextColor=function(t,e,r,n){var i={ch1:t,ch2:e,ch3:r,ch4:n,pdfColorType:"text",precision:3};xr=re(i);return this};var _r=t.charSpace;var Pr=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(_r||0)};y.__private__.setCharSpace=y.setCharSpace=function(t){if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.setCharSpace")}_r=t;return this};var kr=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};y.__private__.setLineCap=y.setLineCap=function(t){var e=y.CapJoinStyles[t];if(e===undefined){throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}kr=e;ct(e+" J");return this};var Fr=0;y.__private__.setLineJoin=y.setLineJoin=function(t){var e=y.CapJoinStyles[t];if(e===undefined){throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles")}Fr=e;ct(e+" j");return this};y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(t){t=t||0;if(isNaN(t)){throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit")}ct(C(B(t))+" M");return this};y.GState=D;y.setGState=function(t){if(typeof t==="string"){t=Ct[jt[t]]}else{t=Ir(null,t)}if(!t.equals(Ot)){ct("/"+t.id+" gs");Ot=t}};var Ir=function t(e,r){if(e&&jt[e])return;var n=false;for(var i in Ct){if(Ct.hasOwnProperty(i)){if(Ct[i].equals(r)){n=true;break}}}if(n){r=Ct[i]}else{var a="GS"+(Object.keys(Ct).length+1).toString(10);Ct[a]=r;r.id=a}e&&(jt[e]=r.id);qt.publish("addGState",r);return r};y.addGState=function(t,e){Ir(t,e);return this};y.saveGraphicsState=function(){ct("q");kt.push({key:Pt,size:vt,color:xr});return this};y.restoreGraphicsState=function(){ct("Q");var t=kt.pop();Pt=t.key;vt=t.size;xr=t.color;Ot=null;return this};y.setCurrentTransformationMatrix=function(t){ct(t.toString()+" cm");return this};y.comment=function(t){ct("#"+t);return this};var Cr=function t(e,r){var n=e||0;Object.defineProperty(this,"x",{enumerable:true,get:function t(){return n},set:function t(e){if(!isNaN(e)){n=parseFloat(e)}}});var i=r||0;Object.defineProperty(this,"y",{enumerable:true,get:function t(){return i},set:function t(e){if(!isNaN(e)){i=parseFloat(e)}}});var a="pt";Object.defineProperty(this,"type",{enumerable:true,get:function t(){return a},set:function t(e){a=e.toString()}});return this};var jr=function t(e,r,n,i){Cr.call(this,e,r);this.type="rect";var a=n||0;Object.defineProperty(this,"w",{enumerable:true,get:function t(){return a},set:function t(e){if(!isNaN(e)){a=parseFloat(e)}}});var s=i||0;Object.defineProperty(this,"h",{enumerable:true,get:function t(){return s},set:function t(e){if(!isNaN(e)){s=parseFloat(e)}}});return this};var Or=function t(){this.page=Mt;this.currentPage=st;this.pages=at.slice(0);this.pagesContext=Et.slice(0);this.x=zt;this.y=Ht;this.matrix=Wt;this.width=qr(st);this.height=Rr(st);this.outputDestination=ut;this.id="";this.objectNumber=-1};Or.prototype.restore=function(){Mt=this.page;st=this.currentPage;Et=this.pagesContext;at=this.pages;zt=this.x;Ht=this.y;Wt=this.matrix;Dr(st,this.width);Tr(st,this.height);ut=this.outputDestination};var Br=function t(e,r,n,i,a){Ut.push(new Or);Mt=st=0;at=[];zt=e;Ht=r;Wt=a;je([n,i])};var Mr=function t(e){if(Tt[e]){Ut.pop().restore();return}var r=new Or;var n="Xo"+(Object.keys(Rt).length+1).toString(10);r.id=n;Tt[e]=n;Rt[n]=r;qt.publish("addFormObject",r);Ut.pop().restore()};y.beginFormObject=function(t,e,r,n,i){Br(t,e,r,n,i);return this};y.endFormObject=function(t){Mr(t);return this};y.doFormObject=function(t,e){var r=Rt[Tt[t]];ct("q");ct(e.toString()+" cm");ct("/"+r.id+" Do");ct("Q");return this};y.getFormObject=function(t){var e=Rt[Tt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}};y.save=function(t,e){t=t||"generated.pdf";e=e||{};e.returnPromise=e.returnPromise||false;if(e.returnPromise===false){c(We(He()),t);if(typeof c.unload==="function"){if(r.setTimeout){setTimeout(c.unload,911)}}return this}else{return new Promise(function(e,n){try{var i=c(We(He()),t);if(typeof c.unload==="function"){if(r.setTimeout){setTimeout(c.unload,911)}}e(i)}catch(t){n(t.message)}})}};for(var Er in z.API){if(z.API.hasOwnProperty(Er)){if(Er==="events"&&z.API.events.length){(function(t,e){var r,n,i;for(i=e.length-1;i!==-1;i--){r=e[i][0];n=e[i][1];t.subscribe.apply(t,[r].concat(typeof n==="function"?[n]:n))}})(qt,z.API.events)}else{y[Er]=z.API[Er]}}}var qr=y.getPageWidth=function(t){t=t||st;return(Et[t].mediaBox.topRightX-Et[t].mediaBox.bottomLeftX)/Bt};var Dr=y.setPageWidth=function(t,e){Et[t].mediaBox.topRightX=e*Bt+Et[t].mediaBox.bottomLeftX};var Rr=y.getPageHeight=function(t){t=t||st;return(Et[t].mediaBox.topRightY-Et[t].mediaBox.bottomLeftY)/Bt};var Tr=y.setPageHeight=function(t,e){Et[t].mediaBox.topRightY=e*Bt+Et[t].mediaBox.bottomLeftY};y.internal={pdfEscape:Ce,getStyle:tr,getFont:lr,getFontSize:gt,getCharSpace:Pr,getTextColor:Sr,getLineHeight:vr,getLineHeightFactor:mr,getLineWidth:hr,write:ht,getHorizontalCoordinate:br,getVerticalCoordinate:yr,getCoordinateString:wr,getVerticalCoordinateString:Nr,collections:{},newObject:Xt,newAdditionalObject:$t,newObjectDeferred:Kt,newObjectDeferredBegin:Zt,getFilters:ne,putStream:ie,events:qt,scaleFactor:Bt,pageSize:{getWidth:function t(){return qr(st)},setWidth:function t(e){Dr(st,e)},getHeight:function t(){return Rr(st)},setHeight:function t(e){Tr(st,e)}},encryptionOptions:g,encryption:Ye,getEncryptor:Je,output:Ve,getNumberOfPages:Ee,pages:at,out:ct,f2:j,f3:O,getPageInfo:Xe,getPageInfoByObjId:Ke,getCurrentPageInfo:Ze,getPDFVersion:N,Point:Cr,Rectangle:jr,Matrix:Vt,hasHotfix:Ge};Object.defineProperty(y.internal.pageSize,"width",{get:function t(){return qr(st)},set:function t(e){Dr(st,e)},enumerable:true,configurable:true});Object.defineProperty(y.internal.pageSize,"height",{get:function t(){return Rr(st)},set:function t(e){Tr(st,e)},enumerable:true,configurable:true});ke.call(y,pt);Pt="F1";Oe(a,n);qt.publish("initialized");return y}z.API={events:[]};z.version="2.5.1";var H=z.API;var W=1;var V=function t(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")};var G=function t(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")};var Y=function t(e){return e.toFixed(2)};var J=function t(e){return e.toFixed(5)};H.__acroform__={};var X=function t(e,r){e.prototype=Object.create(r.prototype);e.prototype.constructor=e};var K=function t(e){return e*W};var Z=function t(e){var r=new Lt;var n=Et.internal.getHeight(e)||0;var i=Et.internal.getWidth(e)||0;r.BBox=[0,0,Number(Y(i)),Number(Y(n))];return r};var $=H.__acroform__.setBit=function(t,e){t=t||0;e=e||0;if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit")}var r=1<<e;t|=r;return t};var Q=H.__acroform__.clearBit=function(t,e){t=t||0;e=e||0;if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit")}var r=1<<e;t&=~r;return t};var tt=H.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit")}return(t&1<<e)===0?0:1};var et=H.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf")}return tt(t,e-1)};var rt=H.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf")}return $(t,e-1)};var nt=H.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e)){throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf")}return Q(t,e-1)};var it=H.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate;var n=e.internal.getVerticalCoordinate;var i=t[0];var a=t[1];var s=t[2];var o=t[3];var u={};u.lowerLeft_X=r(i)||0;u.lowerLeft_Y=n(a+o)||0;u.upperRight_X=r(i+s)||0;u.upperRight_Y=n(a)||0;return[Number(Y(u.lowerLeft_X)),Number(Y(u.lowerLeft_Y)),Number(Y(u.upperRight_X)),Number(Y(u.upperRight_Y))]};var at=function t(e){if(e.appearanceStreamContent){return e.appearanceStreamContent}if(!e.V&&!e.DV){return}var r=[];var n=e._V||e.DV;var i=st(e,n);var a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;r.push("/Tx BMC");r.push("q");r.push("BT");r.push(e.scope.__private__.encodeColorString(e.color));r.push("/"+a+" "+Y(i.fontSize)+" Tf");r.push("1 0 0 1 0 0 Tm");r.push(i.text);r.push("ET");r.push("Q");r.push("EMC");var s=Z(e);s.scope=e.scope;s.stream=r.join("\n");return s};var st=function t(e,r){var n=e.fontSize===0?e.maxFontSize:e.fontSize;var i={text:"",fontSize:""};r=r.substr(0,1)=="("?r.substr(1):r;r=r.substr(r.length-1)==")"?r.substr(0,r.length-1):r;var a=r.split(" ");if(e.multiline){a=a.map(function(t){return t.split("\n")})}else{a=a.map(function(t){return[t]})}var s=n;var o=2;var u=2;var f=Et.internal.getHeight(e)||0;f=f<0?-f:f;var l=Et.internal.getWidth(e)||0;l=l<0?-l:l;var c=function t(r,n,i){if(r+1<a.length){var s=n+" "+a[r+1][0];var o=ot(s,e,i).width;var f=l-2*u;return o<=f}else{return false}};s++;t:while(s>0){r="";s--;var h=ot("3",e,s).height;var d=e.multiline?f-s:(f-h)/2;d+=o;var p;var v=d;var g=0,m=0;var b;var y=0;if(s<=0){s=12;r="(...) Tj\n";r+="% Width of Text: "+ot(r,e,s).width+", FieldWidth:"+l+"\n";break}var w="";var N=0;e:for(var L=0;L<a.length;L++){if(a.hasOwnProperty(L)){var A=false;if(a[L].length!==1&&y!==a[L].length-1){if((h+o)*(N+2)+o>f){continue t}w+=a[L][y];A=true;m=L;L--}else{w+=a[L][y]+" ";w=w.substr(w.length-1)==" "?w.substr(0,w.length-1):w;var x=parseInt(L);var S=c(x,w,s);var _=L>=a.length-1;if(S&&!_){w+=" ";y=0;continue}else if(!S&&!_){if(!e.multiline){continue t}else{if((h+o)*(N+2)+o>f){continue t}m=x}}else if(_){m=x}else{if(e.multiline&&(h+o)*(N+2)+o>f){continue t}}}var P="";for(var k=g;k<=m;k++){var F=a[k];if(e.multiline){if(k===m){P+=F[y]+" ";y=(y+1)%F.length;continue}if(k===g){P+=F[F.length-1]+" ";continue}}P+=F[0]+" "}P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P;b=ot(P,e,s).width;switch(e.textAlign){case"right":p=l-b-u;break;case"center":p=(l-b)/2;break;case"left":default:p=u;break}r+=Y(p)+" "+Y(v)+" Td\n";r+="("+V(P)+") Tj\n";r+=-Y(p)+" 0 Td\n";v=-(s+o);b=0;g=A?m:m+1;N++;w="";continue e}}break}i.text=r;i.fontSize=s;return i};var ot=function t(e,r,n){var i=r.scope.internal.getFont(r.fontName,r.fontStyle);var a=r.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);var s=r.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5;return{height:s,width:a}};var ut={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:false,internal:null,isInitialized:false};var ft=function t(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=undefined;var r=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in r){if(r.hasOwnProperty(n)){var i=r[n];i.objId=undefined;if(i.hasAnnotation){ct(i,e)}}}};var lt=function t(e){if(e.scope.internal.acroformPlugin.printedOut){e.scope.internal.acroformPlugin.printedOut=false;e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null}e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e)};var ct=function t(e,r){var n={type:"reference",object:e};var i=function t(e){return e.type===n.type&&e.object===n.object};if(r.internal.getPageInfo(e.page).pageContext.annotations.find(i)===undefined){r.internal.getPageInfo(e.page).pageContext.annotations.push(n)}};var ht=function t(e){if(typeof e.internal.acroformPlugin.acroFormDictionaryRoot!=="undefined"){e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" "+0+" R")}else{throw new Error("putCatalogCallback: Root missing.")}};var dt=function t(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID);delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID;e.internal.acroformPlugin.printedOut=true};var pt=function t(r,n){var i=!r;if(!r){n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,true);n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()}r=r||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids;for(var a in r){if(r.hasOwnProperty(a)){var s=r[a];var o=[];var u=s.Rect;if(s.Rect){s.Rect=it(s.Rect,n)}n.internal.newObjectDeferredBegin(s.objId,true);s.DA=Et.createDefaultAppearanceStream(s);if(e(s)==="object"&&typeof s.getKeyValueListForStream==="function"){o=s.getKeyValueListForStream()}s.Rect=u;if(s.hasAppearanceStream&&!s.appearanceStreamContent){var f=at(s);o.push({key:"AP",value:"<</N "+f+">>"});n.internal.acroformPlugin.xForms.push(f)}if(s.appearanceStreamContent){var l="";for(var c in s.appearanceStreamContent){if(s.appearanceStreamContent.hasOwnProperty(c)){var h=s.appearanceStreamContent[c];l+="/"+c+" ";l+="<<";if(Object.keys(h).length>=1||Array.isArray(h)){for(var a in h){if(h.hasOwnProperty(a)){var d=h[a];if(typeof d==="function"){d=d.call(n,s)}l+="/"+a+" "+d+" ";if(!(n.internal.acroformPlugin.xForms.indexOf(d)>=0))n.internal.acroformPlugin.xForms.push(d)}}}else{d=h;if(typeof d==="function"){d=d.call(n,s)}l+="/"+a+" "+d;if(!(n.internal.acroformPlugin.xForms.indexOf(d)>=0))n.internal.acroformPlugin.xForms.push(d)}l+=">>"}}o.push({key:"AP",value:"<<\n"+l+">>"})}n.internal.putStream({additionalKeyValues:o,objectId:s.objId});n.internal.out("endobj")}}if(i){vt(n.internal.acroformPlugin.xForms,n)}};var vt=function t(r,n){for(var i in r){if(r.hasOwnProperty(i)){var a=i;var s=r[i];n.internal.newObjectDeferredBegin(s.objId,true);if(e(s)==="object"&&typeof s.putStream==="function"){s.putStream()}delete r[a]}}};var gt=function t(e,r){r.scope=e;if(e.internal!==undefined&&(e.internal.acroformPlugin===undefined||e.internal.acroformPlugin.isInitialized===false)){xt.FieldNum=0;e.internal.acroformPlugin=JSON.parse(JSON.stringify(ut));if(e.internal.acroformPlugin.acroFormDictionaryRoot){throw new Error("Exception while creating AcroformDictionary")}W=e.internal.scaleFactor;e.internal.acroformPlugin.acroFormDictionaryRoot=new At;e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e;e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){dt(e)});e.internal.events.subscribe("buildDocument",function(){ft(e)});e.internal.events.subscribe("putCatalog",function(){ht(e)});e.internal.events.subscribe("postPutPages",function(t){pt(t,e)});e.internal.acroformPlugin.isInitialized=true}};var mt=H.__acroform__.arrayToPdfArray=function(t,r,n){var i=function t(e){return e};if(Array.isArray(t)){var a="[";for(var s=0;s<t.length;s++){if(s!==0){a+=" "}switch(e(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":if(t[s].substr(0,1)!=="/"){if(typeof r!=="undefined"&&n)i=n.internal.getEncryptor(r);a+="("+V(i(t[s].toString()))+")"}else{a+=t[s].toString()}break}}a+="]";return a}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")};function bt(t,e,r){r||(r=1);var n=[];var i;while(i=e.exec(t)){n.push(i[r])}return n}var yt=function t(e){var r=[];if(typeof e==="string"){r=bt(e,/\((.*?)\)/g)}return r};var wt=function t(e,r,n){var i=function t(e){return e};if(typeof r!=="undefined"&&n)i=n.internal.getEncryptor(r);e=e||"";e.toString();e="("+V(i(e))+")";return e};var Nt=function t(){this._objId=undefined;this._scope=undefined;Object.defineProperty(this,"objId",{get:function t(){if(typeof this._objId==="undefined"){if(typeof this.scope==="undefined"){return undefined}this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function t(e){this._objId=e}});Object.defineProperty(this,"scope",{value:this._scope,writable:true})};Nt.prototype.toString=function(){return this.objId+" 0 R"};Nt.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId});this.scope.internal.out("endobj")};Nt.prototype.getKeyValueListForStream=function(){var t=[];var e=Object.getOwnPropertyNames(this).filter(function(t){return t!="content"&&t!="appearanceStreamContent"&&t!="scope"&&t!="objId"&&t.substring(0,1)!="_"});for(var r in e){if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===false){var n=e[r];var i=this[n];if(i){if(Array.isArray(i)){t.push({key:n,value:mt(i,this.objId,this.scope)})}else if(i instanceof Nt){i.scope=this.scope;t.push({key:n,value:i.objId+" 0 R"})}else if(typeof i!=="function"){t.push({key:n,value:i})}}}}return t};var Lt=function t(){Nt.call(this);Object.defineProperty(this,"Type",{value:"/XObject",configurable:false,writable:true});Object.defineProperty(this,"Subtype",{value:"/Form",configurable:false,writable:true});Object.defineProperty(this,"FormType",{value:1,configurable:false,writable:true});var e=[];Object.defineProperty(this,"BBox",{configurable:false,get:function t(){return e},set:function t(r){e=r}});Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:false,writable:true});var r;Object.defineProperty(this,"stream",{enumerable:false,configurable:true,set:function t(e){r=e.trim()},get:function t(){if(r){return r}else{return null}}})};X(Lt,Nt);var At=function t(){Nt.call(this);var e=[];Object.defineProperty(this,"Kids",{enumerable:false,configurable:true,get:function t(){if(e.length>0){return e}else{return undefined}}});Object.defineProperty(this,"Fields",{enumerable:false,configurable:false,get:function t(){return e}});var r;Object.defineProperty(this,"DA",{enumerable:false,configurable:false,get:function t(){if(!r){return undefined}var e=function t(e){return e};if(this.scope)e=this.scope.internal.getEncryptor(this.objId);return"("+V(e(r))+")"},set:function t(e){r=e}})};X(At,Nt);var xt=function t(){Nt.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:false,configurable:false,get:function t(){return e},set:function t(r){if(!isNaN(r)){e=r}else{throw new Error('Invalid value "'+r+'" for attribute F supplied.')}}});Object.defineProperty(this,"showWhenPrinted",{enumerable:true,configurable:true,get:function t(){return Boolean(et(e,3))},set:function t(r){if(Boolean(r)===true){this.F=rt(e,3)}else{this.F=nt(e,3)}}});var r=0;Object.defineProperty(this,"Ff",{enumerable:false,configurable:false,get:function t(){return r},set:function t(e){if(!isNaN(e)){r=e}else{throw new Error('Invalid value "'+e+'" for attribute Ff supplied.')}}});var n=[];Object.defineProperty(this,"Rect",{enumerable:false,configurable:false,get:function t(){if(n.length===0){return undefined}return n},set:function t(e){if(typeof e!=="undefined"){n=e}else{n=[]}}});Object.defineProperty(this,"x",{enumerable:true,configurable:true,get:function t(){if(!n||isNaN(n[0])){return 0}return n[0]},set:function t(e){n[0]=e}});Object.defineProperty(this,"y",{enumerable:true,configurable:true,get:function t(){if(!n||isNaN(n[1])){return 0}return n[1]},set:function t(e){n[1]=e}});Object.defineProperty(this,"width",{enumerable:true,configurable:true,get:function t(){if(!n||isNaN(n[2])){return 0}return n[2]},set:function t(e){n[2]=e}});Object.defineProperty(this,"height",{enumerable:true,configurable:true,get:function t(){if(!n||isNaN(n[3])){return 0}return n[3]},set:function t(e){n[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:true,configurable:false,get:function t(){return i},set:function t(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:true,configurable:false,get:function e(){if(!a||a.length<1){if(this instanceof jt){return undefined}a="FieldObject"+t.FieldNum++}var r=function t(e){return e};if(this.scope)r=this.scope.internal.getEncryptor(this.objId);return"("+V(r(a))+")"},set:function t(e){a=e.toString()}});Object.defineProperty(this,"fieldName",{configurable:true,enumerable:true,get:function t(){return a},set:function t(e){a=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:true,configurable:true,get:function t(){return s},set:function t(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:true,configurable:true,get:function t(){return o},set:function t(e){o=e}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:true,configurable:true,get:function t(){return u},set:function t(e){u=e}});var f=undefined;Object.defineProperty(this,"maxFontSize",{enumerable:true,configurable:true,get:function t(){if(f===undefined){return 50/W}else{return f}},set:function t(e){f=e}});var l="black";Object.defineProperty(this,"color",{enumerable:true,configurable:true,get:function t(){return l},set:function t(e){l=e}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:true,configurable:false,get:function t(){if(!c||this instanceof jt||this instanceof Bt){return undefined}return wt(c,this.objId,this.scope)},set:function t(e){e=e.toString();c=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:false,configurable:false,get:function t(){if(!h){return undefined}if(this instanceof Ft===false){return wt(h,this.objId,this.scope)}return h},set:function t(e){e=e.toString();if(this instanceof Ft===false){if(e.substr(0,1)==="("){h=G(e.substr(1,e.length-2))}else{h=G(e)}}else{h=e}}});Object.defineProperty(this,"defaultValue",{enumerable:true,configurable:true,get:function t(){if(this instanceof Ft===true){return G(h.substr(1,h.length-1))}else{return h}},set:function t(e){e=e.toString();if(this instanceof Ft===true){h="/"+e}else{h=e}}});var d=null;Object.defineProperty(this,"_V",{enumerable:false,configurable:false,get:function t(){if(!d){return undefined}return d},set:function t(e){this.V=e}});Object.defineProperty(this,"V",{enumerable:false,configurable:false,get:function t(){if(!d){return undefined}if(this instanceof Ft===false){return wt(d,this.objId,this.scope)}return d},set:function t(e){e=e.toString();if(this instanceof Ft===false){if(e.substr(0,1)==="("){d=G(e.substr(1,e.length-2))}else{d=G(e)}}else{d=e}}});Object.defineProperty(this,"value",{enumerable:true,configurable:true,get:function t(){if(this instanceof Ft===true){return G(d.substr(1,d.length-1))}else{return d}},set:function t(e){e=e.toString();if(this instanceof Ft===true){d="/"+e}else{d=e}}});Object.defineProperty(this,"hasAnnotation",{enumerable:true,configurable:true,get:function t(){return this.Rect}});Object.defineProperty(this,"Type",{enumerable:true,configurable:false,get:function t(){return this.hasAnnotation?"/Annot":null}});Object.defineProperty(this,"Subtype",{enumerable:true,configurable:false,get:function t(){return this.hasAnnotation?"/Widget":null}});var p=false;Object.defineProperty(this,"hasAppearanceStream",{enumerable:true,configurable:true,get:function t(){return p},set:function t(e){e=Boolean(e);p=e}});var v;Object.defineProperty(this,"page",{enumerable:true,configurable:true,get:function t(){if(!v){return undefined}return v},set:function t(e){v=e}});Object.defineProperty(this,"readOnly",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,1))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,1)}else{this.Ff=nt(this.Ff,1)}}});Object.defineProperty(this,"required",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,2))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,2)}else{this.Ff=nt(this.Ff,2)}}});Object.defineProperty(this,"noExport",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,3))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,3)}else{this.Ff=nt(this.Ff,3)}}});var g=null;Object.defineProperty(this,"Q",{enumerable:true,configurable:false,get:function t(){if(g===null){return undefined}return g},set:function t(e){if([0,1,2].indexOf(e)!==-1){g=e}else{throw new Error('Invalid value "'+e+'" for attribute Q supplied.')}}});Object.defineProperty(this,"textAlign",{get:function t(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right";break}return e},configurable:true,enumerable:true,set:function t(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};X(xt,Nt);var St=function t(){xt.call(this);this.FT="/Ch";this.V="()";this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:true,configurable:false,get:function t(){return e},set:function t(r){e=r}});Object.defineProperty(this,"topIndex",{enumerable:true,configurable:true,get:function t(){return e},set:function t(r){e=r}});var r=[];Object.defineProperty(this,"Opt",{enumerable:true,configurable:false,get:function t(){return mt(r,this.objId,this.scope)},set:function t(e){r=yt(e)}});this.getOptions=function(){return r};this.setOptions=function(t){r=t;if(this.sort){r.sort()}};this.addOption=function(t){t=t||"";t=t.toString();r.push(t);if(this.sort){r.sort()}};this.removeOption=function(t,e){e=e||false;t=t||"";t=t.toString();while(r.indexOf(t)!==-1){r.splice(r.indexOf(t),1);if(e===false){break}}};Object.defineProperty(this,"combo",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,18))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,18)}else{this.Ff=nt(this.Ff,18)}}});Object.defineProperty(this,"edit",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,19))},set:function t(e){if(this.combo===true){if(Boolean(e)===true){this.Ff=rt(this.Ff,19)}else{this.Ff=nt(this.Ff,19)}}}});Object.defineProperty(this,"sort",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,20))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,20);r.sort()}else{this.Ff=nt(this.Ff,20)}}});Object.defineProperty(this,"multiSelect",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,22))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,22)}else{this.Ff=nt(this.Ff,22)}}});Object.defineProperty(this,"doNotSpellCheck",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,23))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,23)}else{this.Ff=nt(this.Ff,23)}}});Object.defineProperty(this,"commitOnSelChange",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,27))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,27)}else{this.Ff=nt(this.Ff,27)}}});this.hasAppearanceStream=false};X(St,xt);var _t=function t(){St.call(this);this.fontName="helvetica";this.combo=false};X(_t,St);var Pt=function t(){_t.call(this);this.combo=true};X(Pt,_t);var kt=function t(){Pt.call(this);this.edit=true};X(kt,Pt);var Ft=function t(){xt.call(this);this.FT="/Btn";Object.defineProperty(this,"noToggleToOff",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,15))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,15)}else{this.Ff=nt(this.Ff,15)}}});Object.defineProperty(this,"radio",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,16))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,16)}else{this.Ff=nt(this.Ff,16)}}});Object.defineProperty(this,"pushButton",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,17))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,17)}else{this.Ff=nt(this.Ff,17)}}});Object.defineProperty(this,"radioIsUnison",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,26))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,26)}else{this.Ff=nt(this.Ff,26)}}});var r={};Object.defineProperty(this,"MK",{enumerable:false,configurable:false,get:function t(){var e=function t(e){return e};if(this.scope)e=this.scope.internal.getEncryptor(this.objId);if(Object.keys(r).length!==0){var n=[];n.push("<<");var i;for(i in r){n.push("/"+i+" ("+V(e(r[i]))+")")}n.push(">>");return n.join("\n")}return undefined},set:function t(n){if(e(n)==="object"){r=n}}});Object.defineProperty(this,"caption",{enumerable:true,configurable:true,get:function t(){return r.CA||""},set:function t(e){if(typeof e==="string"){r.CA=e}}});var n;Object.defineProperty(this,"AS",{enumerable:false,configurable:false,get:function t(){return n},set:function t(e){n=e}});Object.defineProperty(this,"appearanceState",{enumerable:true,configurable:true,get:function t(){return n.substr(1,n.length-1)},set:function t(e){n="/"+e}})};X(Ft,xt);var It=function t(){Ft.call(this);this.pushButton=true};X(It,Ft);var Ct=function t(){Ft.call(this);this.radio=true;this.pushButton=false;var e=[];Object.defineProperty(this,"Kids",{enumerable:true,configurable:false,get:function t(){return e},set:function t(r){if(typeof r!=="undefined"){e=r}else{e=[]}}})};X(Ct,Ft);var jt=function t(){xt.call(this);var r;Object.defineProperty(this,"Parent",{enumerable:false,configurable:false,get:function t(){return r},set:function t(e){r=e}});var n;Object.defineProperty(this,"optionName",{enumerable:false,configurable:true,get:function t(){return n},set:function t(e){n=e}});var i={};Object.defineProperty(this,"MK",{enumerable:false,configurable:false,get:function t(){var e=function t(e){return e};if(this.scope)e=this.scope.internal.getEncryptor(this.objId);var r=[];r.push("<<");var n;for(n in i){r.push("/"+n+" ("+V(e(i[n]))+")")}r.push(">>");return r.join("\n")},set:function t(r){if(e(r)==="object"){i=r}}});Object.defineProperty(this,"caption",{enumerable:true,configurable:true,get:function t(){return i.CA||""},set:function t(e){if(typeof e==="string"){i.CA=e}}});var a;Object.defineProperty(this,"AS",{enumerable:false,configurable:false,get:function t(){return a},set:function t(e){a=e}});Object.defineProperty(this,"appearanceState",{enumerable:true,configurable:true,get:function t(){return a.substr(1,a.length-1)},set:function t(e){a="/"+e}});this.caption="l";this.appearanceState="Off";this._AppearanceType=Et.RadioButton.Circle;this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};X(jt,xt);Ct.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t&&"getCA"in t)){throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!")}for(var e in this.Kids){if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName);r.caption=t.getCA()}}};Ct.prototype.createOption=function(t){var e=new jt;e.Parent=this;e.optionName=t;this.Kids.push(e);qt.call(this.scope,e);return e};var Ot=function t(){Ft.call(this);this.fontName="zapfdingbats";this.caption="3";this.appearanceState="On";this.value="On";this.textAlign="center";this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};X(Ot,Ft);var Bt=function t(){xt.call(this);this.FT="/Tx";Object.defineProperty(this,"multiline",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,13))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,13)}else{this.Ff=nt(this.Ff,13)}}});Object.defineProperty(this,"fileSelect",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,21))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,21)}else{this.Ff=nt(this.Ff,21)}}});Object.defineProperty(this,"doNotSpellCheck",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,23))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,23)}else{this.Ff=nt(this.Ff,23)}}});Object.defineProperty(this,"doNotScroll",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,24))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,24)}else{this.Ff=nt(this.Ff,24)}}});Object.defineProperty(this,"comb",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,25))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,25)}else{this.Ff=nt(this.Ff,25)}}});Object.defineProperty(this,"richText",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,26))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,26)}else{this.Ff=nt(this.Ff,26)}}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:true,configurable:false,get:function t(){return e},set:function t(r){e=r}});Object.defineProperty(this,"maxLength",{enumerable:true,configurable:true,get:function t(){return e},set:function t(r){if(Number.isInteger(r)){e=r}}});Object.defineProperty(this,"hasAppearanceStream",{enumerable:true,configurable:true,get:function t(){return this.V||this.DV}})};X(Bt,xt);var Mt=function t(){Bt.call(this);Object.defineProperty(this,"password",{enumerable:true,configurable:true,get:function t(){return Boolean(et(this.Ff,14))},set:function t(e){if(Boolean(e)===true){this.Ff=rt(this.Ff,14)}else{this.Ff=nt(this.Ff,14)}}});this.password=true};X(Mt,Bt);var Et={CheckBox:{createAppearanceStream:function t(){var e={N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}};return e},YesPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=[];var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;var a=e.scope.__private__.encodeColorString(e.color);var s=st(e,e.caption);n.push("0.749023 g");n.push("0 0 "+Y(Et.internal.getWidth(e))+" "+Y(Et.internal.getHeight(e))+" re");n.push("f");n.push("BMC");n.push("q");n.push("0 0 1 rg");n.push("/"+i+" "+Y(s.fontSize)+" Tf "+a);n.push("BT");n.push(s.text);n.push("ET");n.push("Q");n.push("EMC");r.stream=n.join("\n");return r},YesNormal:function t(e){var r=Z(e);r.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;var i=e.scope.__private__.encodeColorString(e.color);var a=[];var s=Et.internal.getHeight(e);var o=Et.internal.getWidth(e);var u=st(e,e.caption);a.push("1 g");a.push("0 0 "+Y(o)+" "+Y(s)+" re");a.push("f");a.push("q");a.push("0 0 1 rg");a.push("0 0 "+Y(o-1)+" "+Y(s-1)+" re");a.push("W");a.push("n");a.push("0 g");a.push("BT");a.push("/"+n+" "+Y(u.fontSize)+" Tf "+i);a.push(u.text);a.push("ET");a.push("Q");r.stream=a.join("\n");return r},OffPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=[];n.push("0.749023 g");n.push("0 0 "+Y(Et.internal.getWidth(e))+" "+Y(Et.internal.getHeight(e))+" re");n.push("f");r.stream=n.join("\n");return r}},RadioButton:{Circle:{createAppearanceStream:function t(e){var r={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};r.N[e]=Et.RadioButton.Circle.YesNormal;r.D[e]=Et.RadioButton.Circle.YesPushDown;return r},getCA:function t(){return"l"},YesNormal:function t(e){var r=Z(e);r.scope=e.scope;var n=[];var i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((i*.9).toFixed(5));var a=Et.internal.Bezier_C;var s=Number((i*a).toFixed(5));n.push("q");n.push("1 0 0 1 "+J(Et.internal.getWidth(e)/2)+" "+J(Et.internal.getHeight(e)/2)+" cm");n.push(i+" 0 m");n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c");n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c");n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c");n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c");n.push("f");n.push("Q");r.stream=n.join("\n");return r},YesPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=[];var i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((i*.9).toFixed(5));var a=Number((i*2).toFixed(5));var s=Number((a*Et.internal.Bezier_C).toFixed(5));var o=Number((i*Et.internal.Bezier_C).toFixed(5));n.push("0.749023 g");n.push("q");n.push("1 0 0 1 "+J(Et.internal.getWidth(e)/2)+" "+J(Et.internal.getHeight(e)/2)+" cm");n.push(a+" 0 m");n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c");n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c");n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c");n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c");n.push("f");n.push("Q");n.push("0 g");n.push("q");n.push("1 0 0 1 "+J(Et.internal.getWidth(e)/2)+" "+J(Et.internal.getHeight(e)/2)+" cm");n.push(i+" 0 m");n.push(""+i+" "+o+" "+o+" "+i+" 0 "+i+" c");n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c");n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c");n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c");n.push("f");n.push("Q");r.stream=n.join("\n");return r},OffPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=[];var i=Et.internal.getWidth(e)<=Et.internal.getHeight(e)?Et.internal.getWidth(e)/4:Et.internal.getHeight(e)/4;i=Number((i*.9).toFixed(5));var a=Number((i*2).toFixed(5));var s=Number((a*Et.internal.Bezier_C).toFixed(5));n.push("0.749023 g");n.push("q");n.push("1 0 0 1 "+J(Et.internal.getWidth(e)/2)+" "+J(Et.internal.getHeight(e)/2)+" cm");n.push(a+" 0 m");n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c");n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c");n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c");n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c");n.push("f");n.push("Q");r.stream=n.join("\n");return r}},Cross:{createAppearanceStream:function t(e){var r={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};r.N[e]=Et.RadioButton.Cross.YesNormal;r.D[e]=Et.RadioButton.Cross.YesPushDown;return r},getCA:function t(){return"8"},YesNormal:function t(e){var r=Z(e);r.scope=e.scope;var n=[];var i=Et.internal.calculateCross(e);n.push("q");n.push("1 1 "+Y(Et.internal.getWidth(e)-2)+" "+Y(Et.internal.getHeight(e)-2)+" re");n.push("W");n.push("n");n.push(Y(i.x1.x)+" "+Y(i.x1.y)+" m");n.push(Y(i.x2.x)+" "+Y(i.x2.y)+" l");n.push(Y(i.x4.x)+" "+Y(i.x4.y)+" m");n.push(Y(i.x3.x)+" "+Y(i.x3.y)+" l");n.push("s");n.push("Q");r.stream=n.join("\n");return r},YesPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=Et.internal.calculateCross(e);var i=[];i.push("0.749023 g");i.push("0 0 "+Y(Et.internal.getWidth(e))+" "+Y(Et.internal.getHeight(e))+" re");i.push("f");i.push("q");i.push("1 1 "+Y(Et.internal.getWidth(e)-2)+" "+Y(Et.internal.getHeight(e)-2)+" re");i.push("W");i.push("n");i.push(Y(n.x1.x)+" "+Y(n.x1.y)+" m");i.push(Y(n.x2.x)+" "+Y(n.x2.y)+" l");i.push(Y(n.x4.x)+" "+Y(n.x4.y)+" m");i.push(Y(n.x3.x)+" "+Y(n.x3.y)+" l");i.push("s");i.push("Q");r.stream=i.join("\n");return r},OffPushDown:function t(e){var r=Z(e);r.scope=e.scope;var n=[];n.push("0.749023 g");n.push("0 0 "+Y(Et.internal.getWidth(e))+" "+Y(Et.internal.getHeight(e))+" re");n.push("f");r.stream=n.join("\n");return r}}},createDefaultAppearanceStream:function t(e){var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;var n=e.scope.__private__.encodeColorString(e.color);var i=e.fontSize;var a="/"+r+" "+i+" Tf "+n;return a}};Et.internal={Bezier_C:.551915024494,calculateCross:function t(e){var r=Et.internal.getWidth(e);var n=Et.internal.getHeight(e);var i=Math.min(r,n);var a={x1:{x:(r-i)/2,y:(n-i)/2+i},x2:{x:(r-i)/2+i,y:(n-i)/2},x3:{x:(r-i)/2,y:(n-i)/2},x4:{x:(r-i)/2+i,y:(n-i)/2+i}};return a}};Et.internal.getWidth=function(t){var r=0;if(e(t)==="object"){r=K(t.Rect[2])}return r};Et.internal.getHeight=function(t){var r=0;if(e(t)==="object"){r=K(t.Rect[3])}return r};var qt=H.addField=function(t){gt(this,t);if(t instanceof xt){lt(t)}else{throw new Error("Invalid argument passed to jsPDF.addField.")}t.page=t.scope.internal.getCurrentPageInfo().pageNumber;return this};H.AcroFormChoiceField=St;H.AcroFormListBox=_t;H.AcroFormComboBox=Pt;H.AcroFormEditBox=kt;H.AcroFormButton=Ft;H.AcroFormPushButton=It;H.AcroFormRadioButton=Ct;H.AcroFormCheckBox=Ot;H.AcroFormTextField=Bt;H.AcroFormPasswordField=Mt;H.AcroFormAppearance=Et;H.AcroForm={ChoiceField:St,ListBox:_t,ComboBox:Pt,EditBox:kt,Button:Ft,PushButton:It,RadioButton:Ct,CheckBox:Ot,TextField:Bt,PasswordField:Mt,Appearance:Et};z.AcroForm={ChoiceField:St,ListBox:_t,ComboBox:Pt,EditBox:kt,Button:Ft,PushButton:It,RadioButton:Ct,CheckBox:Ot,TextField:Bt,PasswordField:Mt,Appearance:Et};var Dt=z.AcroForm;(function(t){var r="addImage_";t.__addimage__={};var n="UNKNOWN";var i=8192;var a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,undefined,undefined,74,70,73,70,0],[255,216,255,225,undefined,undefined,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,undefined,undefined,undefined,undefined,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]};var s=t.__addimage__.getImageFileTypeByImageData=function(t,e){e=e||n;var r;var i;var s=n;var o;var u;var f;if(e==="RGBA"||t.data!==undefined&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t){return"RGBA"}if(F(t)){for(f in a){o=a[f];for(r=0;r<o.length;r+=1){u=true;for(i=0;i<o[r].length;i+=1){if(o[r][i]===undefined){continue}if(o[r][i]!==t[i]){u=false;break}}if(u===true){s=f;break}}}}else{for(f in a){o=a[f];for(r=0;r<o.length;r+=1){u=true;for(i=0;i<o[r].length;i+=1){if(o[r][i]===undefined){continue}if(o[r][i]!==t.charCodeAt(i)){u=false;break}}if(u===true){s=f;break}}}}if(s===n&&e!==n){s=e}return s};var o=function t(e){var r=this.internal.write;var n=this.internal.putStream;var i=this.internal.getFilters;var a=i();while(a.indexOf("FlateEncode")!==-1){a.splice(a.indexOf("FlateEncode"),1)}e.objectId=this.internal.newObject();var s=[];s.push({key:"Type",value:"/XObject"});s.push({key:"Subtype",value:"/Image"});s.push({key:"Width",value:e.width});s.push({key:"Height",value:e.height});if(e.colorSpace===A.INDEXED){s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&typeof e.sMask!=="undefined"?e.objectId+2:e.objectId+1)+" 0 R]"})}else{s.push({key:"ColorSpace",value:"/"+e.colorSpace});if(e.colorSpace===A.DEVICE_CMYK){s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})}}s.push({key:"BitsPerComponent",value:e.bitsPerComponent});if("decodeParameters"in e&&typeof e.decodeParameters!=="undefined"){s.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"})}if("transparency"in e&&Array.isArray(e.transparency)){var o="",u=0,f=e.transparency.length;for(;u<f;u++){o+=e.transparency[u]+" "+e.transparency[u]+" "}s.push({key:"Mask",value:"["+o+"]"})}if(typeof e.sMask!=="undefined"){s.push({key:"SMask",value:e.objectId+1+" 0 R"})}var l=typeof e.filter!=="undefined"?["/"+e.filter]:undefined;n({data:e.data,additionalKeyValues:s,alreadyAppliedFilters:l,objectId:e.objectId});r("endobj");if("sMask"in e&&typeof e.sMask!=="undefined"){var c="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width;var h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:c,data:e.sMask};if("filter"in e){h.filter=e.filter}t.call(this,h)}if(e.colorSpace===A.INDEXED){var d=this.internal.newObject();n({data:C(new Uint8Array(e.palette)),objectId:d});r("endobj")}};var u=function t(){var e=this.internal.collections[r+"images"];for(var n in e){o.call(this,e[n])}};var f=function t(){var e=this.internal.collections[r+"images"],n=this.internal.write,i;for(var a in e){i=e[a];n("/I"+i.index,i.objectId,"0","R")}};var l=function e(r){if(r&&typeof r==="string")r=r.toUpperCase();return r in t.image_compression?r:x.NONE};var c=function t(){if(!this.internal.collections[r+"images"]){this.internal.collections[r+"images"]={};this.internal.events.subscribe("putResources",u);this.internal.events.subscribe("putXobjectDict",f)}};var h=function t(){var e=this.internal.collections[r+"images"];c.call(this);return e};var p=function t(){return Object.keys(this.internal.collections[r+"images"]).length};var v=function t(e){return typeof e==="undefined"||e===null||e.length===0};var g=function t(e){if(typeof e==="string"||F(e)){return S(e)}else if(F(e.data)){return S(e.data)}return null};var m=function e(r){return typeof t["process"+r.toUpperCase()]==="function"};var b=function t(r){return e(r)==="object"&&r.nodeType===1};var y=function e(r,n){if(r.nodeName==="IMG"&&r.hasAttribute("src")){var i=""+r.getAttribute("src");if(i.indexOf("data:image/")===0){return d(unescape(i).split("base64,").pop())}var a=t.loadFile(i,true);if(a!==undefined){return a}}if(r.nodeName==="CANVAS"){if(r.width===0||r.height===0){throw new Error("Given canvas must have data. Canvas width: "+r.width+", height: "+r.height)}var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;case"JPEG":case"JPG":default:s="image/jpeg";break}return d(r.toDataURL(s,1).split("base64,").pop())}};var w=function t(e){var n=this.internal.collections[r+"images"];if(n){for(var i in n){if(e===n[i].alias){return n[i]}}}};var N=function t(e,r,n){if(!e&&!r){e=-96;r=-96}if(e<0){e=-1*n.width*72/e/this.internal.scaleFactor}if(r<0){r=-1*n.height*72/r/this.internal.scaleFactor}if(e===0){e=r*n.width/n.height}if(r===0){r=e*n.height/n.width}return[e,r]};var L=function t(e,r,n,i,a,s){var o=N.call(this,n,i,a),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;var l=h.call(this);n=o[0];i=o[1];l[a.index]=a;if(s){s*=Math.PI/180;var c=Math.cos(s);var d=Math.sin(s);var p=function t(e){return e.toFixed(4)};var v=[p(c),p(d),p(d*-1),p(c),0,0,"cm"]}this.internal.write("q");if(s){this.internal.write([1,"0","0",1,u(e),f(r+i),"cm"].join(" "));this.internal.write(v.join(" "));this.internal.write([u(n),"0","0",u(i),"0","0","cm"].join(" "))}else{this.internal.write([u(n),"0","0",u(i),u(e),f(r+i),"cm"].join(" "))}if(this.isAdvancedAPI()){this.internal.write([1,0,0,-1,0,0,"cm"].join(" "))}this.internal.write("/I"+a.index+" Do");this.internal.write("Q")};var A=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"};var S=t.__addimage__.sHashCode=function(t){var e=0,r,n;if(typeof t==="string"){n=t.length;for(r=0;r<n;r++){e=(e<<5)-e+t.charCodeAt(r);e|=0}}else if(F(t)){n=t.byteLength/2;for(r=0;r<n;r++){e=(e<<5)-e+t[r];e|=0}}return e};var _=t.__addimage__.validateStringAsBase64=function(t){t=t||"";t.toString().trim();var e=true;if(t.length===0){e=false}if(t.length%4!==0){e=false}if(/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))===false){e=false}if(/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))===false){e=false}return e};var P=t.__addimage__.extractImageFromDataUrl=function(t){t=t||"";var e=t.split("base64,");var r=null;if(e.length===2){var n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);if(Array.isArray(n)){r={mimeType:n[1],charset:n[2],data:e[1]}}}return r};var k=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"};t.__addimage__.isArrayBuffer=function(t){return k()&&t instanceof ArrayBuffer};var F=t.__addimage__.isArrayBufferView=function(t){return k()&&typeof Uint32Array!=="undefined"&&(t instanceof Int8Array||t instanceof Uint8Array||typeof Uint8ClampedArray!=="undefined"&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)};var I=t.__addimage__.binaryStringToUint8Array=function(t){var e=t.length;var r=new Uint8Array(e);for(var n=0;n<e;n++){r[n]=t.charCodeAt(n)}return r};var C=t.__addimage__.arrayBufferToBinaryString=function(t){var e="";var r=F(t)?t:new Uint8Array(t);for(var n=0;n<r.length;n+=i){e+=String.fromCharCode.apply(null,r.subarray(n,n+i))}return e};t.addImage=function(){var t,r,i,a,s,o,u,f,l;t=arguments[0];if(typeof arguments[1]==="number"){r=n;i=arguments[1];a=arguments[2];s=arguments[3];o=arguments[4];u=arguments[5];f=arguments[6];l=arguments[7]}else{r=arguments[1];i=arguments[2];a=arguments[3];s=arguments[4];o=arguments[5];u=arguments[6];f=arguments[7];l=arguments[8]}if(e(t)==="object"&&!b(t)&&"imageData"in t){var h=t;t=h.imageData;r=h.format||r||n;i=h.x||i||0;a=h.y||a||0;s=h.w||h.width||s;o=h.h||h.height||o;u=h.alias||u;f=h.compression||f;l=h.rotation||h.angle||l}var d=this.internal.getFilters();if(f===undefined&&d.indexOf("FlateEncode")!==-1){f="SLOW"}if(isNaN(i)||isNaN(a)){throw new Error("Invalid coordinates passed to jsPDF.addImage")}c.call(this);var p=j.call(this,t,r,u,f);L.call(this,i,a,s,o,p,l);return this};var j=function e(r,i,a,o){var u,f;if(typeof r==="string"&&s(r)===n){r=unescape(r);var c=O(r,false);if(c!==""){r=c}else{c=t.loadFile(r,true);if(c!==undefined){r=c}}}if(b(r)){r=y(r,i)}i=s(r,i);if(!m(i)){throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.")}if(v(a)){a=g(r)}u=w.call(this,a);if(!u){if(k()){if(!(r instanceof Uint8Array)&&i!=="RGBA"){f=r;r=I(r)}}u=this["process"+i.toUpperCase()](r,p.call(this),a,l(o),f)}if(!u){throw new Error("An unknown error occurred whilst processing the image.")}return u};var O=t.__addimage__.convertBase64ToBinaryString=function(t,e){e=typeof e==="boolean"?e:true;var r;var n="";var i;if(typeof t==="string"){r=P(t);i=r!==null?r.data:t;try{n=d(i)}catch(t){if(e){if(!_(i)){throw new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}else{throw new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message)}}}}return n};t.getImageProperties=function(e){var r;var i="";var a;if(b(e)){e=y(e)}if(typeof e==="string"&&s(e)===n){i=O(e,false);if(i===""){i=t.loadFile(e)||""}e=i}a=s(e);if(!m(a)){throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.")}if(k()&&!(e instanceof Uint8Array)){e=I(e)}r=this["process"+a.toUpperCase()](e);if(!r){throw new Error("An unknown error occurred whilst processing the image")}r.fileType=a;return r}})(z.API);
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=function t(e){if(typeof e!="undefined"){if(e!=""){return true}}};z.API.events.push(["addPage",function(t){var e=this.internal.getPageInfo(t.pageNumber);e.pageContext.annotations=[]}]);t.events.push(["putPage",function(t){var r=this.internal.getCoordinateString;var n=this.internal.getVerticalCoordinateString;var i=this.internal.getPageInfoByObjId(t.objId);var a=t.pageContext.annotations;var s,o,u;var f=false;for(var l=0;l<a.length&&!f;l++){s=a[l];switch(s.type){case"link":if(e(s.options.url)||e(s.options.pageNumber)){f=true}break;case"reference":case"text":case"freetext":f=true;break}}if(f==false){return}this.internal.write("/Annots [");for(var c=0;c<a.length;c++){s=a[c];var h=this.internal.pdfEscape;var d=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject();var v=this.internal.newAdditionalObject();var g=this.internal.getEncryptor(p.objId);var m=s.title||"Note";o="/Rect ["+r(s.bounds.x)+" "+n(s.bounds.y+s.bounds.h)+" "+r(s.bounds.x+s.bounds.w)+" "+n(s.bounds.y)+"] ";u="<</Type /Annot /Subtype /"+"Text"+" "+o+"/Contents ("+h(g(s.contents))+")";u+=" /Popup "+v.objId+" 0 R";u+=" /P "+i.objId+" 0 R";u+=" /T ("+h(g(m))+") >>";p.content=u;var b=p.objId+" 0 R";var y=30;o="/Rect ["+r(s.bounds.x+y)+" "+n(s.bounds.y+s.bounds.h)+" "+r(s.bounds.x+s.bounds.w+y)+" "+n(s.bounds.y)+"] ";u="<</Type /Annot /Subtype /"+"Popup"+" "+o+" /Parent "+b;if(s.open){u+=" /Open true"}u+=" >>";v.content=u;this.internal.write(p.objId,"0 R",v.objId,"0 R");break;case"freetext":o="/Rect ["+r(s.bounds.x)+" "+n(s.bounds.y)+" "+r(s.bounds.x+s.bounds.w)+" "+n(s.bounds.y+s.bounds.h)+"] ";var w=s.color||"#000000";u="<</Type /Annot /Subtype /"+"FreeText"+" "+o+"/Contents ("+h(d(s.contents))+")";u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")";u+=" /Border [0 0 0]";u+=" >>";this.internal.write(u);break;case"link":if(s.options.name){var N=this.annotations._nameMap[s.options.name];s.options.pageNumber=N.page;s.options.top=N.y}else{if(!s.options.top){s.options.top=0}}o="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ";u="";if(s.options.url){u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+h(d(s.options.url))+") >>"}else if(s.options.pageNumber){var L=this.internal.getPageInfo(s.options.pageNumber);u="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+L.objId+" 0 R";s.options.magFactor=s.options.magFactor||"XYZ";switch(s.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0;u+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var A=n(s.options.top);s.options.left=s.options.left||0;if(typeof s.options.zoom==="undefined"){s.options.zoom=0}u+=" /XYZ "+s.options.left+" "+A+" "+s.options.zoom+"]";break}}if(u!=""){u+=" >>";this.internal.write(u)}break}}this.internal.write("]")}]);t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t);break}};t.link=function(t,e,r,n,i){var a=this.internal.getCurrentPageInfo();var s=this.internal.getCoordinateString;var o=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:s(t),y:o(e),w:s(t+r),h:o(e+n)},options:i,type:"link"})};t.textWithLink=function(t,e,r,n){var i=this.getTextWidth(t);var a=this.internal.getLineHeight()/this.internal.scaleFactor;var s,o;if(n.maxWidth!==undefined){var u=n.maxWidth;o=u;var f=this.splitTextToSize(t,o).length;s=Math.ceil(a*f)}else{o=i;s=a}this.text(t,e,r,n);r+=a*.2;if(n.align==="center"){e=e-i/2}if(n.align==="right"){e=e-i}this.link(e,r-a,o,s,n);return i};t.getTextWidth=function(t){var e=this.internal.getFontSize();var r=this.getStringUnitWidth(t)*e/this.internal.scaleFactor;return r};return this})(z.API);
/**
   * @license
   * Copyright (c) 2017 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]};var r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}};var n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610};var i=[1570,1571,1573,1575];var a=-1;var s=0;var o=1;var u=2;var f=3;t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(t){return typeof e[t.charCodeAt(0)]!=="undefined"};var c=t.__arabicParser__.isArabicLetter=function(t){return typeof t==="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)};var h=t.__arabicParser__.isArabicEndLetter=function(t){return c(t)&&l(t)&&e[t.charCodeAt(0)].length<=2};var d=t.__arabicParser__.isArabicAlfLetter=function(t){return c(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return c(t)&&l(t)&&e[t.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return c(t)&&l(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return c(t)&&l(t)&&e[t.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return c(t)&&l(t)&&e[t.charCodeAt(0)].length==4};var g=t.__arabicParser__.resolveLigatures=function(t){var e=0;var n=r;var i="";var a=0;for(e=0;e<t.length;e+=1){if(typeof n[t.charCodeAt(e)]!=="undefined"){a++;n=n[t.charCodeAt(e)];if(typeof n==="number"){i+=String.fromCharCode(n);n=r;a=0}if(e===t.length-1){n=r;i+=t.charAt(e-(a-1));e=e-(a-1);a=0}}else{n=r;i+=t.charAt(e-a);e=e-a;a=0}}return i};t.__arabicParser__.isArabicDiacritic=function(t){return t!==undefined&&n[t.charCodeAt(0)]!==undefined};var m=t.__arabicParser__.getCorrectForm=function(t,e,r){if(!c(t)){return-1}if(l(t)===false){return a}if(!p(t)||!c(e)&&!c(r)||!c(r)&&h(e)||h(t)&&!c(e)||h(t)&&d(e)||h(t)&&h(e)){return s}if(v(t)&&c(e)&&!h(e)&&c(r)&&p(r)){return f}if(h(t)||!c(r)){return o}return u};var b=function t(r){r=r||"";var n="";var i=0;var a=0;var s=0;var o="";var u="";var f="";var l=r.split("\\s+");var h=[];for(i=0;i<l.length;i+=1){h.push("");for(a=0;a<l[i].length;a+=1){o=l[i][a];u=l[i][a-1];f=l[i][a+1];if(c(o)){s=m(o,u,f);if(s!==-1){h[i]+=String.fromCharCode(e[o.charCodeAt(0)][s])}else{h[i]+=o}}else{h[i]+=o}}h[i]=g(h[i])}n=h.join(" ");return n};var y=t.__arabicParser__.processArabic=t.processArabic=function(){var t=typeof arguments[0]==="string"?arguments[0]:arguments[0].text;var e=[];var r;if(Array.isArray(t)){var n=0;e=[];for(n=0;n<t.length;n+=1){if(Array.isArray(t[n])){e.push([b(t[n][0]),t[n][1],t[n][2]])}else{e.push([b(t[n])])}}r=e}else{r=b(t)}if(typeof arguments[0]==="string"){return r}else{arguments[0].text=r;return arguments[0]}};t.events.push(["preProcessText",y])})(z.API);
/** @license
   * jsPDF Autoprint Plugin
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.autoPrint=function(t){var e;t=t||{};t.variant=t.variant||"non-conform";switch(t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject();this.internal.out("<<");this.internal.out("/S /Named");this.internal.out("/Type /Action");this.internal.out("/N /Print");this.internal.out(">>");this.internal.out("endobj")});this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")});break}return this}})(z.API);
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=function t(){var e=undefined;Object.defineProperty(this,"pdf",{get:function t(){return e},set:function t(r){e=r}});var r=150;Object.defineProperty(this,"width",{get:function t(){return r},set:function t(e){if(isNaN(e)||Number.isInteger(e)===false||e<0){r=150}else{r=e}if(this.getContext("2d").pageWrapXEnabled){this.getContext("2d").pageWrapX=r+1}}});var n=300;Object.defineProperty(this,"height",{get:function t(){return n},set:function t(e){if(isNaN(e)||Number.isInteger(e)===false||e<0){n=300}else{n=e}if(this.getContext("2d").pageWrapYEnabled){this.getContext("2d").pageWrapY=n+1}}});var i=[];Object.defineProperty(this,"childNodes",{get:function t(){return i},set:function t(e){i=e}});var a={};Object.defineProperty(this,"style",{get:function t(){return a},set:function t(e){a=e}});Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){t=t||"2d";var r;if(t!=="2d"){return null}for(r in e){if(this.pdf.context2d.hasOwnProperty(r)){this.pdf.context2d[r]=e[r]}}this.pdf.context2d._canvas=this;return this.pdf.context2d};e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")};t.events.push(["initialized",function(){this.canvas=new e;this.canvas.pdf=this}]);return this})(z.API);(function(t){var r={left:0,top:0,bottom:0,right:0};var n=.264583*72/25.4;var i=false;var a=function t(){if(typeof this.internal.__cell__==="undefined"){this.internal.__cell__={};this.internal.__cell__.padding=3;this.internal.__cell__.headerFunction=undefined;this.internal.__cell__.margins=Object.assign({},r);this.internal.__cell__.margins.width=this.getPageWidth();s.call(this)}};var s=function t(){this.internal.__cell__.lastCell=new o;this.internal.__cell__.pages=1};var o=function t(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:true,get:function t(){return e},set:function t(r){e=r}});var r=arguments[1];Object.defineProperty(this,"y",{enumerable:true,get:function t(){return r},set:function t(e){r=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:true,get:function t(){return n},set:function t(e){n=e}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:true,get:function t(){return i},set:function t(e){i=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:true,get:function t(){return a},set:function t(e){a=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:true,get:function t(){return s},set:function t(e){s=e}});var o=arguments[6];Object.defineProperty(this,"align",{enumerable:true,get:function t(){return o},set:function t(e){o=e}});return this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)};o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]};t.setHeaderFunction=function(t){a.call(this);this.internal.__cell__.headerFunction=typeof t==="function"?t:undefined;return this};t.getTextDimensions=function(t,e){a.call(this);e=e||{};var r=e.fontSize||this.getFontSize();var n=e.font||this.getFont();var i=e.scaleFactor||this.internal.scaleFactor;var s=0;var o=0;var u=0;var f=0;var l=this;if(!Array.isArray(t)&&typeof t!=="string"){if(typeof t==="number"){t=String(t)}else{throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.")}}var c=e.maxWidth;if(c>0){if(typeof t==="string"){t=this.splitTextToSize(t,c)}else if(Object.prototype.toString.call(t)==="[object Array]"){t=t.reduce(function(t,e){return t.concat(l.splitTextToSize(e,c))},[])}}else{t=Array.isArray(t)?t:[t]}for(var h=0;h<t.length;h++){f=this.getStringUnitWidth(t[h],{font:n})*r;if(s<f){s=f}}if(s!==0){o=t.length}s=s/i;u=Math.max((o*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/i,0);return{w:s,h:u}};t.cellAddPage=function(){a.call(this);this.addPage();var t=this.internal.__cell__.margins||r;this.internal.__cell__.lastCell=new o(t.left,t.top,undefined,undefined);this.internal.__cell__.pages+=1;return this};var u=t.cell=function(){var t;if(arguments[0]instanceof o){t=arguments[0]}else{t=new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}a.call(this);var e=this.internal.__cell__.lastCell;var n=this.internal.__cell__.padding;var s=this.internal.__cell__.margins||r;var u=this.internal.__cell__.tableHeaderRow;var f=this.internal.__cell__.printHeaders;if(typeof e.lineNumber!=="undefined"){if(e.lineNumber===t.lineNumber){t.x=(e.x||0)+(e.width||0);t.y=e.y||0}else{if(e.y+e.height+t.height+s.bottom>this.getPageHeight()){this.cellAddPage();t.y=s.top;if(f&&u){this.printHeaderRow(t.lineNumber,true);t.y+=u[0].height}}else{t.y=e.y+e.height||t.y}}}if(typeof t.text[0]!=="undefined"){this.rect(t.x,t.y,t.width,t.height,i===true?"FD":undefined);if(t.align==="right"){this.text(t.text,t.x+t.width-n,t.y+n,{align:"right",baseline:"top"})}else if(t.align==="center"){this.text(t.text,t.x+t.width/2,t.y+n,{align:"center",baseline:"top",maxWidth:t.width-n-n})}else{this.text(t.text,t.x+n,t.y+n,{align:"left",baseline:"top",maxWidth:t.width-n-n})}}this.internal.__cell__.lastCell=t;return this};t.table=function(t,i,l,c,h){a.call(this);if(!l){throw new Error("No data for PDF table.")}h=h||{};var d=[],p=[],v=[],g,m={},b={},y,w=[],N,L=[],A=h.autoSize||false,x=h.printHeaders===false?false:true,S=h.css&&typeof h.css["font-size"]!=="undefined"?h.css["font-size"]*16:h.fontSize||12,_=h.margins||Object.assign({width:this.getPageWidth()},r),P=typeof h.padding==="number"?h.padding:3,k=h.headerBackgroundColor||"#c8c8c8",F=h.headerTextColor||"#000";s.call(this);this.internal.__cell__.printHeaders=x;this.internal.__cell__.margins=_;this.internal.__cell__.table_font_size=S;this.internal.__cell__.padding=P;this.internal.__cell__.headerBackgroundColor=k;this.internal.__cell__.headerTextColor=F;this.setFontSize(S);if(c===undefined||c===null){d=Object.keys(l[0]);p=d;v=d.map(function(){return"left"})}else if(Array.isArray(c)&&e(c[0])==="object"){d=c.map(function(t){return t.name});p=c.map(function(t){return t.prompt||t.name||""});v=c.map(function(t){return t.align||"left"});for(g=0;g<c.length;g+=1){b[c[g].name]=c[g].width*n}}else if(Array.isArray(c)&&typeof c[0]==="string"){d=c;p=d;v=d.map(function(){return"left"})}if(A||Array.isArray(c)&&typeof c[0]==="string"){var I;for(g=0;g<d.length;g+=1){I=d[g];m[I]=l.map(function(t){return t[I]});this.setFont(undefined,"bold");w.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y=m[I];this.setFont(undefined,"normal");for(N=0;N<y.length;N+=1){w.push(this.getTextDimensions(y[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w)}b[I]=Math.max.apply(null,w)+P+P;w=[]}}if(x){var C={};for(g=0;g<d.length;g+=1){C[d[g]]={};C[d[g]].text=p[g];C[d[g]].align=v[g]}var j=f.call(this,C,b);L=d.map(function(e){return new o(t,i,b[e],j,C[e].text,undefined,C[e].align)});this.setTableHeaderRow(L);this.printHeaderRow(1,false)}var O=c.reduce(function(t,e){t[e.name]=e.align;return t},{});for(g=0;g<l.length;g+=1){if("rowStart"in h&&h.rowStart instanceof Function){h.rowStart({row:g,data:l[g]},this)}var B=f.call(this,l[g],b);for(N=0;N<d.length;N+=1){var M=l[g][d[N]];if("cellStart"in h&&h.cellStart instanceof Function){h.cellStart({row:g,col:N,data:M},this)}u.call(this,new o(t,i,b[d[N]],B,M,g+2,O[d[N]]))}}this.internal.__cell__.table_x=t;this.internal.__cell__.table_y=i;return this};var f=function t(e,r){var n=this.internal.__cell__.padding;var i=this.internal.__cell__.table_font_size;var a=this.internal.scaleFactor;return Object.keys(e).map(function(t){var i=e[t];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,r[t]-n-n)},this).map(function(t){return this.getLineHeightFactor()*t.length*i/a+n+n},this).reduce(function(t,e){return Math.max(t,e)},0)};t.setTableHeaderRow=function(t){a.call(this);this.internal.__cell__.tableHeaderRow=t};t.printHeaderRow=function(t,e){a.call(this);if(!this.internal.__cell__.tableHeaderRow){throw new Error("Property tableHeaderRow does not exist.")}var r;i=true;if(typeof this.internal.__cell__.headerFunction==="function"){var n=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(n[0],n[1],n[2],n[3],undefined,-1)}this.setFont(undefined,"bold");var s=[];for(var f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){r=this.internal.__cell__.tableHeaderRow[f].clone();if(e){r.y=this.internal.__cell__.margins.top||0;s.push(r)}r.lineNumber=t;var l=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor);this.setFillColor(this.internal.__cell__.headerBackgroundColor);u.call(this,r);this.setTextColor(l)}if(s.length>0){this.setTableHeaderRow(s)}this.setFont(undefined,"normal");i=false}})(z.API);function Rt(t){return t.reduce(function(t,e,r){t[e]=r;return t},{})}var Tt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]};var Ut=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"];var zt=Rt(Ut);var Ht=[100,200,300,400,500,600,700,800,900];var Wt=Rt(Ht);function Vt(t){t=t||"normal";return typeof zt[t]==="number"?t:"normal"}function Gt(t){t=t||"normal";return Tt[t]?t:"normal"}function Yt(t){if(!t){return 400}if(typeof t==="number"){return t>=100&&t<=900&&t%100===0?t:400}if(/^\d00$/.test(t)){return parseInt(t)}switch(t){case"bold":return 700;case"normal":default:return 400}}function Jt(t){var e=t.family.replace(/"|'/g,"").toLowerCase();var r=Gt(t.style);var n=Yt(t.weight);var i=Vt(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function Xt(t){var e={};for(var r=0;r<t.length;++r){var n=Jt(t[r]);var i=n.family;var a=n.stretch;var s=n.style;var o=n.weight;e[i]=e[i]||{};e[i][a]=e[i][a]||{};e[i][a][s]=e[i][a][s]||{};e[i][a][s][o]=n}return e}function Kt(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n){if(t[e[i]]){return t[e[i]]}}for(i=r;i>=0&&i<e.length;i-=n){if(t[e[i]]){return t[e[i]]}}}function Zt(t,e){if(e[t]){return e[t]}var r=zt[t];var n=r<=zt["normal"]?-1:1;var i=Kt(e,Ut,r,n);if(!i){throw new Error("Could not find a matching font-stretch value for "+t)}return i}function $t(t,e){if(e[t]){return e[t]}var r=Tt[t];for(var n=0;n<r.length;++n){if(e[r[n]]){return e[r[n]]}}throw new Error("Could not find a matching font-style for "+t)}function Qt(t,e){if(e[t]){return e[t]}if(t===400&&e[500]){return e[500]}if(t===500&&e[400]){return e[400]}var r=Wt[t];var n=t<400?-1:1;var i=Kt(e,Ht,r,n);if(!i){throw new Error("Could not find a matching font-weight for value "+t)}return i}var te={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"};var ee={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function re(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function ne(t,e,r){r=r||{};var n=r.defaultFontFamily||"times";var i=Object.assign({},te,r.genericFontFamilies||{});var a=null;var s=null;for(var o=0;o<e.length;++o){a=Jt(e[o]);if(i[a.family]){a.family=i[a.family]}if(t.hasOwnProperty(a.family)){s=t[a.family];break}}s=s||t[n];if(!s){throw new Error("Could not find a font-family for the rule '"+re(a)+"' and default family '"+n+"'.")}s=Zt(a.stretch,s);s=$t(a.style,s);s=Qt(a.weight,s);if(!s){throw new Error("Failed to resolve a font for the rule '"+re(a)+"'.")}return s}function ie(t){return t.trimLeft()}function ae(t,e){var r=0;while(r<t.length){var n=t.charAt(r);if(n===e){return[t.substring(0,r),t.substring(r+1)]}r+=1}return null}function se(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);if(e===null){return null}return[e[0],t.substring(e[0].length)]}var oe=["times"];function ue(t){var e=[];var r,n;var i=t.trim();if(i===""){return oe}if(i in ee){return[ee[i]]}while(i!==""){n=null;i=ie(i);r=i.charAt(0);switch(r){case'"':case"'":n=ae(i.substring(1),r);break;default:n=se(i);break}if(n===null){return oe}e.push(n[0]);i=ie(n[1]);if(i!==""&&i.charAt(0)!==","){return oe}i=i.replace(/^,/,"")}return e}(function(t){var r=function t(e){e=e||{};this.isStrokeTransparent=e.isStrokeTransparent||false;this.strokeOpacity=e.strokeOpacity||1;this.strokeStyle=e.strokeStyle||"#000000";this.fillStyle=e.fillStyle||"#000000";this.isFillTransparent=e.isFillTransparent||false;this.fillOpacity=e.fillOpacity||1;this.font=e.font||"10px sans-serif";this.textBaseline=e.textBaseline||"alphabetic";this.textAlign=e.textAlign||"left";this.lineWidth=e.lineWidth||1;this.lineJoin=e.lineJoin||"miter";this.lineCap=e.lineCap||"butt";this.path=e.path||[];this.transform=typeof e.transform!=="undefined"?e.transform.clone():new c;this.globalCompositeOperation=e.globalCompositeOperation||"normal";this.globalAlpha=e.globalAlpha||1;this.clip_path=e.clip_path||[];this.currentPoint=e.currentPoint||new f;this.miterLimit=e.miterLimit||10;this.lastPoint=e.lastPoint||new f;this.lineDashOffset=e.lineDashOffset||0;this.lineDash=e.lineDash||[];this.margin=e.margin||[0,0,0,0];this.prevPageLastElemOffset=e.prevPageLastElemOffset||0;this.ignoreClearRect=typeof e.ignoreClearRect==="boolean"?e.ignoreClearRect:true;return this};var n,i,a,o,u,f,l,c,d;t.events.push(["initialized",function(){this.context2d=new p(this);n=this.internal.f2;i=this.internal.getCoordinateString;a=this.internal.getVerticalCoordinateString;o=this.internal.getHorizontalCoordinate;u=this.internal.getVerticalCoordinate;f=this.internal.Point;l=this.internal.Rectangle;c=this.internal.Matrix;d=new r}]);var p=function t(e){Object.defineProperty(this,"canvas",{get:function t(){return{parentNode:false,style:false}}});var n=e;Object.defineProperty(this,"pdf",{get:function t(){return n}});var i=false;Object.defineProperty(this,"pageWrapXEnabled",{get:function t(){return i},set:function t(e){i=Boolean(e)}});var a=false;Object.defineProperty(this,"pageWrapYEnabled",{get:function t(){return a},set:function t(e){a=Boolean(e)}});var s=0;Object.defineProperty(this,"posX",{get:function t(){return s},set:function t(e){if(!isNaN(e)){s=e}}});var o=0;Object.defineProperty(this,"posY",{get:function t(){return o},set:function t(e){if(!isNaN(e)){o=e}}});Object.defineProperty(this,"margin",{get:function t(){return d.margin},set:function t(e){var r;if(typeof e==="number"){r=[e,e,e,e]}else{r=new Array(4);r[0]=e[0];r[1]=e.length>=2?e[1]:r[0];r[2]=e.length>=3?e[2]:r[0];r[3]=e.length>=4?e[3]:r[1]}d.margin=r}});var u=false;Object.defineProperty(this,"autoPaging",{get:function t(){return u},set:function t(e){u=e}});var f=0;Object.defineProperty(this,"lastBreak",{get:function t(){return f},set:function t(e){f=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function t(){return l},set:function t(e){l=e}});Object.defineProperty(this,"ctx",{get:function t(){return d},set:function t(e){if(e instanceof r){d=e}}});Object.defineProperty(this,"path",{get:function t(){return d.path},set:function t(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function t(){return c},set:function t(e){c=e}});Object.defineProperty(this,"fillStyle",{get:function t(){return this.ctx.fillStyle},set:function t(e){var r;r=v(e);this.ctx.fillStyle=r.style;this.ctx.isFillTransparent=r.a===0;this.ctx.fillOpacity=r.a;this.pdf.setFillColor(r.r,r.g,r.b,{a:r.a});this.pdf.setTextColor(r.r,r.g,r.b,{a:r.a})}});Object.defineProperty(this,"strokeStyle",{get:function t(){return this.ctx.strokeStyle},set:function t(e){var r=v(e);this.ctx.strokeStyle=r.style;this.ctx.isStrokeTransparent=r.a===0;this.ctx.strokeOpacity=r.a;if(r.a===0){this.pdf.setDrawColor(255,255,255)}else if(r.a===1){this.pdf.setDrawColor(r.r,r.g,r.b)}else{this.pdf.setDrawColor(r.r,r.g,r.b)}}});Object.defineProperty(this,"lineCap",{get:function t(){return this.ctx.lineCap},set:function t(e){if(["butt","round","square"].indexOf(e)!==-1){this.ctx.lineCap=e;this.pdf.setLineCap(e)}}});Object.defineProperty(this,"lineWidth",{get:function t(){return this.ctx.lineWidth},set:function t(e){if(!isNaN(e)){this.ctx.lineWidth=e;this.pdf.setLineWidth(e)}}});Object.defineProperty(this,"lineJoin",{get:function t(){return this.ctx.lineJoin},set:function t(e){if(["bevel","round","miter"].indexOf(e)!==-1){this.ctx.lineJoin=e;this.pdf.setLineJoin(e)}}});Object.defineProperty(this,"miterLimit",{get:function t(){return this.ctx.miterLimit},set:function t(e){if(!isNaN(e)){this.ctx.miterLimit=e;this.pdf.setMiterLimit(e)}}});Object.defineProperty(this,"textBaseline",{get:function t(){return this.ctx.textBaseline},set:function t(e){this.ctx.textBaseline=e}});Object.defineProperty(this,"textAlign",{get:function t(){return this.ctx.textAlign},set:function t(e){if(["right","end","center","left","start"].indexOf(e)!==-1){this.ctx.textAlign=e}}});var h=null;function p(t,e){if(h===null){var r=t.getFontList();var n=g(r);h=Xt(n.concat(e))}return h}function g(t){var e=[];Object.keys(t).forEach(function(r){var n=t[r];n.forEach(function(t){var n=null;switch(t){case"bold":n={family:r,weight:"bold"};break;case"italic":n={family:r,style:"italic"};break;case"bolditalic":n={family:r,weight:"bold",style:"italic"};break;case"":case"normal":n={family:r};break}if(n!==null){n.ref={name:r,style:t};e.push(n)}})});return e}var m=null;Object.defineProperty(this,"fontFaces",{get:function t(){return m},set:function t(e){h=null;m=e}});Object.defineProperty(this,"font",{get:function t(){return this.ctx.font},set:function t(e){this.ctx.font=e;var r,n;r=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i;n=r.exec(e);if(n!==null){var i=n[1];var a=n[2];var s=n[3];var o=n[4];var u=n[5];var f=n[6]}else{return}var l=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i;var c=l.exec(o)[2];if("px"===c){o=Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor)}else if("em"===c){o=Math.floor(parseFloat(o)*this.pdf.getFontSize())}else{o=Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor)}this.pdf.setFontSize(o);var h=ue(f);if(this.fontFaces){var d=p(this.pdf,this.fontFaces);var v=h.map(function(t){return{family:t,stretch:"normal",weight:s,style:i}});var g=ne(d,v);this.pdf.setFont(g.ref.name,g.ref.style);return}var m="";if(s==="bold"||parseInt(s,10)>=700||i==="bold"){m="bold"}if(i==="italic"){m+="italic"}if(m.length===0){m="normal"}var b="";var y={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"};for(var w=0;w<h.length;w++){if(this.pdf.internal.getFont(h[w],m,{noFallback:true,disableWarning:true})!==undefined){b=h[w];break}else if(m==="bolditalic"&&this.pdf.internal.getFont(h[w],"bold",{noFallback:true,disableWarning:true})!==undefined){b=h[w];m="bold"}else if(this.pdf.internal.getFont(h[w],"normal",{noFallback:true,disableWarning:true})!==undefined){b=h[w];m="normal";break}}if(b===""){for(var N=0;N<h.length;N++){if(y[h[N]]){b=y[h[N]];break}}}b=b===""?"Times":b;this.pdf.setFont(b,m)}});Object.defineProperty(this,"globalCompositeOperation",{get:function t(){return this.ctx.globalCompositeOperation},set:function t(e){this.ctx.globalCompositeOperation=e}});Object.defineProperty(this,"globalAlpha",{get:function t(){return this.ctx.globalAlpha},set:function t(e){this.ctx.globalAlpha=e}});Object.defineProperty(this,"lineDashOffset",{get:function t(){return this.ctx.lineDashOffset},set:function t(e){this.ctx.lineDashOffset=e;U.call(this)}});Object.defineProperty(this,"lineDash",{get:function t(){return this.ctx.lineDash},set:function t(e){this.ctx.lineDash=e;U.call(this)}});Object.defineProperty(this,"ignoreClearRect",{get:function t(){return this.ctx.ignoreClearRect},set:function t(e){this.ctx.ignoreClearRect=Boolean(e)}})};p.prototype.setLineDash=function(t){this.lineDash=t};p.prototype.getLineDash=function(){if(this.lineDash.length%2){return this.lineDash.concat(this.lineDash)}else{return this.lineDash.slice()}};p.prototype.fill=function(){A.call(this,"fill",false)};p.prototype.stroke=function(){A.call(this,"stroke",false)};p.prototype.beginPath=function(){this.path=[{type:"begin"}]};p.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e)){s.error("jsPDF.context2d.moveTo: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.moveTo")}var r=this.ctx.transform.applyToPoint(new f(t,e));this.path.push({type:"mt",x:r.x,y:r.y});this.ctx.lastPoint=new f(t,e)};p.prototype.closePath=function(){var t=new f(0,0);var r=0;for(r=this.path.length-1;r!==-1;r--){if(this.path[r].type==="begin"){if(e(this.path[r+1])==="object"&&typeof this.path[r+1].x==="number"){t=new f(this.path[r+1].x,this.path[r+1].y);break}}}this.path.push({type:"close"});this.ctx.lastPoint=new f(t.x,t.y)};p.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e)){s.error("jsPDF.context2d.lineTo: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.lineTo")}var r=this.ctx.transform.applyToPoint(new f(t,e));this.path.push({type:"lt",x:r.x,y:r.y});this.ctx.lastPoint=new f(r.x,r.y)};p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path));A.call(this,null,true)};p.prototype.quadraticCurveTo=function(t,e,r,n){if(isNaN(r)||isNaN(n)||isNaN(t)||isNaN(e)){s.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo")}var i=this.ctx.transform.applyToPoint(new f(r,n));var a=this.ctx.transform.applyToPoint(new f(t,e));this.path.push({type:"qct",x1:a.x,y1:a.y,x:i.x,y:i.y});this.ctx.lastPoint=new f(i.x,i.y)};p.prototype.bezierCurveTo=function(t,e,r,n,i,a){if(isNaN(i)||isNaN(a)||isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)){s.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo")}var o=this.ctx.transform.applyToPoint(new f(i,a));var u=this.ctx.transform.applyToPoint(new f(t,e));var l=this.ctx.transform.applyToPoint(new f(r,n));this.path.push({type:"bct",x1:u.x,y1:u.y,x2:l.x,y2:l.y,x:o.x,y:o.y});this.ctx.lastPoint=new f(o.x,o.y)};p.prototype.arc=function(t,e,r,n,i,a){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)){s.error("jsPDF.context2d.arc: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.arc")}a=Boolean(a);if(!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new f(t,e));t=o.x;e=o.y;var u=this.ctx.transform.applyToPoint(new f(0,r));var l=this.ctx.transform.applyToPoint(new f(0,0));r=Math.sqrt(Math.pow(u.x-l.x,2)+Math.pow(u.y-l.y,2))}if(Math.abs(i-n)>=2*Math.PI){n=0;i=2*Math.PI}this.path.push({type:"arc",x:t,y:e,radius:r,startAngle:n,endAngle:i,counterclockwise:a})};p.prototype.arcTo=function(t,e,r,n,i){throw new Error("arcTo not implemented.")};p.prototype.rect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)){s.error("jsPDF.context2d.rect: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.rect")}this.moveTo(t,e);this.lineTo(t+r,e);this.lineTo(t+r,e+n);this.lineTo(t,e+n);this.lineTo(t,e);this.lineTo(t+r,e);this.lineTo(t,e)};p.prototype.fillRect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)){s.error("jsPDF.context2d.fillRect: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.fillRect")}if(g.call(this)){return}var i={};if(this.lineCap!=="butt"){i.lineCap=this.lineCap;this.lineCap="butt"}if(this.lineJoin!=="miter"){i.lineJoin=this.lineJoin;this.lineJoin="miter"}this.beginPath();this.rect(t,e,r,n);this.fill();if(i.hasOwnProperty("lineCap")){this.lineCap=i.lineCap}if(i.hasOwnProperty("lineJoin")){this.lineJoin=i.lineJoin}};p.prototype.strokeRect=function t(e,r,n,i){if(isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)){s.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.strokeRect")}if(m.call(this)){return}this.beginPath();this.rect(e,r,n,i);this.stroke()};p.prototype.clearRect=function(t,e,r,n){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)){s.error("jsPDF.context2d.clearRect: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.clearRect")}if(this.ignoreClearRect){return}this.fillStyle="#ffffff";this.fillRect(t,e,r,n)};p.prototype.save=function(t){t=typeof t==="boolean"?t:true;var e=this.pdf.internal.getCurrentPageInfo().pageNumber;for(var n=0;n<this.pdf.internal.getNumberOfPages();n++){this.pdf.setPage(n+1);this.pdf.internal.out("q")}this.pdf.setPage(e);if(t){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new r(this.ctx);this.ctxStack.push(this.ctx);this.ctx=i}};p.prototype.restore=function(t){t=typeof t==="boolean"?t:true;var e=this.pdf.internal.getCurrentPageInfo().pageNumber;for(var r=0;r<this.pdf.internal.getNumberOfPages();r++){this.pdf.setPage(r+1);this.pdf.internal.out("Q")}this.pdf.setPage(e);if(t&&this.ctxStack.length!==0){this.ctx=this.ctxStack.pop();this.fillStyle=this.ctx.fillStyle;this.strokeStyle=this.ctx.strokeStyle;this.font=this.ctx.font;this.lineCap=this.ctx.lineCap;this.lineWidth=this.ctx.lineWidth;this.lineJoin=this.ctx.lineJoin;this.lineDash=this.ctx.lineDash;this.lineDashOffset=this.ctx.lineDashOffset}};p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function t(e){var r=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/;var n=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/;var i=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/;var a,s,o,u;if(e.isCanvasGradient===true){e=e.getColor()}if(!e){return{r:0,g:0,b:0,a:0,style:e}}if(i.test(e)){a=0;s=0;o=0;u=0}else{var f=r.exec(e);if(f!==null){a=parseInt(f[1]);s=parseInt(f[2]);o=parseInt(f[3]);u=1}else{f=n.exec(e);if(f!==null){a=parseInt(f[1]);s=parseInt(f[2]);o=parseInt(f[3]);u=parseFloat(f[4])}else{u=1;if(typeof e==="string"&&e.charAt(0)!=="#"){var l=new h(e);if(l.ok){e=l.toHex()}else{e="#000000"}}if(e.length===4){a=e.substring(1,2);a+=a;s=e.substring(2,3);s+=s;o=e.substring(3,4);o+=o}else{a=e.substring(1,3);s=e.substring(3,5);o=e.substring(5,7)}a=parseInt(a,16);s=parseInt(s,16);o=parseInt(o,16)}}}return{r:a,g:s,b:o,a:u,style:e}};var g=function t(){return this.ctx.isFillTransparent||this.globalAlpha==0};var m=function t(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(t,e,r,n){if(isNaN(e)||isNaN(r)||typeof t!=="string"){s.error("jsPDF.context2d.fillText: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.fillText")}n=isNaN(n)?undefined:n;if(g.call(this)){return}var i=q(this.ctx.transform.rotation);var a=this.ctx.transform.scaleX;C.call(this,{text:t,x:e,y:r,scale:a,angle:i,align:this.textAlign,maxWidth:n})};p.prototype.strokeText=function(t,e,r,n){if(isNaN(e)||isNaN(r)||typeof t!=="string"){s.error("jsPDF.context2d.strokeText: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.strokeText")}if(m.call(this)){return}n=isNaN(n)?undefined:n;var i=q(this.ctx.transform.rotation);var a=this.ctx.transform.scaleX;C.call(this,{text:t,x:e,y:r,scale:a,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:n})};p.prototype.measureText=function(t){if(typeof t!=="string"){s.error("jsPDF.context2d.measureText: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.measureText")}var e=this.pdf;var r=this.pdf.internal.scaleFactor;var n=e.internal.getFontSize();var i=e.getStringUnitWidth(t)*n/e.internal.scaleFactor;i*=Math.round(r*96/72*1e4)/1e4;var a=function t(e){e=e||{};var r=e.width||0;Object.defineProperty(this,"width",{get:function t(){return r}});return this};return new a({width:i})};p.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e)){s.error("jsPDF.context2d.scale: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.scale")}var r=new c(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(r)};p.prototype.rotate=function(t){if(isNaN(t)){s.error("jsPDF.context2d.rotate: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.rotate")}var e=new c(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)};p.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e)){s.error("jsPDF.context2d.translate: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.translate")}var r=new c(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(r)};p.prototype.transform=function(t,e,r,n,i,a){if(isNaN(t)||isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)||isNaN(a)){s.error("jsPDF.context2d.transform: Invalid arguments",arguments);throw new Error("Invalid arguments passed to jsPDF.context2d.transform")}var o=new c(t,e,r,n,i,a);this.ctx.transform=this.ctx.transform.multiply(o)};p.prototype.setTransform=function(t,e,r,n,i,a){t=isNaN(t)?1:t;e=isNaN(e)?0:e;r=isNaN(r)?0:r;n=isNaN(n)?1:n;i=isNaN(i)?0:i;a=isNaN(a)?0:a;this.ctx.transform=new c(t,e,r,n,i,a)};var b=function t(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(t,e,r,n,i,a,s,o,u){var f=this.pdf.getImageProperties(t);var h=1;var d=1;var p=1;var v=1;if(typeof n!=="undefined"&&typeof o!=="undefined"){p=o/n;v=u/i;h=f.width/n*o/n;d=f.height/i*u/i}if(typeof a==="undefined"){a=e;s=r;e=0;r=0}if(typeof n!=="undefined"&&typeof o==="undefined"){o=n;u=i}if(typeof n==="undefined"&&typeof o==="undefined"){o=f.width;u=f.height}var g=this.ctx.transform.decompose();var m=q(g.rotate.shx);var w=new c;w=w.multiply(g.translate);w=w.multiply(g.skew);w=w.multiply(g.scale);var A=w.applyToRectangle(new l(a-e*p,s-r*v,n*h,i*d));var S=y.call(this,A);var _=[];for(var P=0;P<S.length;P+=1){if(_.indexOf(S[P])===-1){_.push(S[P])}}L(_);var k;if(this.autoPaging){var F=_[0];var I=_[_.length-1];for(var C=F;C<I+1;C++){this.pdf.setPage(C);var j=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1];var O=C===1?this.posY+this.margin[0]:this.margin[0];var B=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2];var M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var E=C===1?0:B+(C-2)*M;if(this.ctx.clip_path.length!==0){var D=this.path;k=JSON.parse(JSON.stringify(this.ctx.clip_path));this.path=N(k,this.posX+this.margin[3],-E+O+this.ctx.prevPageLastElemOffset);x.call(this,"fill",true);this.path=D}var R=JSON.parse(JSON.stringify(A));R=N([R],this.posX+this.margin[3],-E+O+this.ctx.prevPageLastElemOffset)[0];var T=(C>F||C<I)&&b.call(this);if(T){this.pdf.saveGraphicsState();this.pdf.rect(this.margin[3],this.margin[0],j,M,null).clip().discardPath()}this.pdf.addImage(t,"JPEG",R.x,R.y,R.w,R.h,null,null,m);if(T){this.pdf.restoreGraphicsState()}}}else{this.pdf.addImage(t,"JPEG",A.x,A.y,A.w,A.h,null,null,m)}};var y=function t(e,r,n){var i=[];r=r||this.pdf.internal.pageSize.width;n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":i.push(Math.floor((e.y+a)/n)+1);break;case"arc":i.push(Math.floor((e.y+a-e.radius)/n)+1);i.push(Math.floor((e.y+a+e.radius)/n)+1);break;case"qct":var s=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);i.push(Math.floor((s.y+a)/n)+1);i.push(Math.floor((s.y+s.h+a)/n)+1);break;case"bct":var o=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);i.push(Math.floor((o.y+a)/n)+1);i.push(Math.floor((o.y+o.h+a)/n)+1);break;case"rect":i.push(Math.floor((e.y+a)/n)+1);i.push(Math.floor((e.y+e.h+a)/n)+1)}for(var u=0;u<i.length;u+=1){while(this.pdf.internal.getNumberOfPages()<i[u]){w.call(this)}}return i};var w=function t(){var e=this.fillStyle;var r=this.strokeStyle;var n=this.font;var i=this.lineCap;var a=this.lineWidth;var s=this.lineJoin;this.pdf.addPage();this.fillStyle=e;this.strokeStyle=r;this.font=n;this.lineCap=i;this.lineWidth=a;this.lineJoin=s};var N=function t(e,r,n){for(var i=0;i<e.length;i++){switch(e[i].type){case"bct":e[i].x2+=r;e[i].y2+=n;case"qct":e[i].x1+=r;e[i].y1+=n;case"mt":case"lt":case"arc":default:e[i].x+=r;e[i].y+=n}}return e};var L=function t(e){return e.sort(function(t,e){return t-e})};var A=function t(e,r){var n=this.fillStyle;var i=this.strokeStyle;var a=this.lineCap;var s=this.lineWidth;var o=Math.abs(s*this.ctx.transform.scaleX);var u=this.lineJoin;var f=JSON.parse(JSON.stringify(this.path));var l=JSON.parse(JSON.stringify(this.path));var c;var h;var d=[];for(var p=0;p<l.length;p++){if(typeof l[p].x!=="undefined"){var v=y.call(this,l[p]);for(var g=0;g<v.length;g+=1){if(d.indexOf(v[g])===-1){d.push(v[g])}}}}for(var m=0;m<d.length;m++){while(this.pdf.internal.getNumberOfPages()<d[m]){w.call(this)}}L(d);if(this.autoPaging){var A=d[0];var S=d[d.length-1];for(var _=A;_<S+1;_++){this.pdf.setPage(_);this.fillStyle=n;this.strokeStyle=i;this.lineCap=a;this.lineWidth=o;this.lineJoin=u;var P=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1];var k=_===1?this.posY+this.margin[0]:this.margin[0];var F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2];var I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var C=_===1?0:F+(_-2)*I;if(this.ctx.clip_path.length!==0){var j=this.path;c=JSON.parse(JSON.stringify(this.ctx.clip_path));this.path=N(c,this.posX+this.margin[3],-C+k+this.ctx.prevPageLastElemOffset);x.call(this,e,true);this.path=j}h=JSON.parse(JSON.stringify(f));this.path=N(h,this.posX+this.margin[3],-C+k+this.ctx.prevPageLastElemOffset);if(r===false||_===0){var O=(_>A||_<S)&&b.call(this);if(O){this.pdf.saveGraphicsState();this.pdf.rect(this.margin[3],this.margin[0],P,I,null).clip().discardPath()}x.call(this,e,r);if(O){this.pdf.restoreGraphicsState()}}this.lineWidth=s}}else{this.lineWidth=o;x.call(this,e,r);this.lineWidth=s}this.path=f};var x=function t(e,r){if(e==="stroke"&&!r&&m.call(this)){return}if(e!=="stroke"&&!r&&g.call(this)){return}var n=[];var i;var a=this.path;for(var s=0;s<a.length;s++){var o=a[s];switch(o.type){case"begin":n.push({begin:true});break;case"close":n.push({close:true});break;case"mt":n.push({start:o,deltas:[],abs:[]});break;case"lt":var u=n.length;if(a[s-1]&&!isNaN(a[s-1].x)){i=[o.x-a[s-1].x,o.y-a[s-1].y];if(u>0){for(u;u>=0;u--){if(n[u-1].close!==true&&n[u-1].begin!==true){n[u-1].deltas.push(i);n[u-1].abs.push(o);break}}}}break;case"bct":i=[o.x1-a[s-1].x,o.y1-a[s-1].y,o.x2-a[s-1].x,o.y2-a[s-1].y,o.x-a[s-1].x,o.y-a[s-1].y];n[n.length-1].deltas.push(i);break;case"qct":var f=a[s-1].x+2/3*(o.x1-a[s-1].x);var l=a[s-1].y+2/3*(o.y1-a[s-1].y);var c=o.x+2/3*(o.x1-o.x);var h=o.y+2/3*(o.y1-o.y);var d=o.x;var p=o.y;i=[f-a[s-1].x,l-a[s-1].y,c-a[s-1].x,h-a[s-1].y,d-a[s-1].x,p-a[s-1].y];n[n.length-1].deltas.push(i);break;case"arc":n.push({deltas:[],abs:[],arc:true});if(Array.isArray(n[n.length-1].abs)){n[n.length-1].abs.push(o)}break}}var v;if(!r){if(e==="stroke"){v="stroke"}else{v="fill"}}else{v=null}var b=false;for(var y=0;y<n.length;y++){if(n[y].arc){var w=n[y].abs;for(var N=0;N<w.length;N++){var L=w[N];if(L.type==="arc"){P.call(this,L.x,L.y,L.radius,L.startAngle,L.endAngle,L.counterclockwise,undefined,r,!b)}else{j.call(this,L.x,L.y)}b=true}}else if(n[y].close===true){this.pdf.internal.out("h");b=false}else if(n[y].begin!==true){var A=n[y].start.x;var x=n[y].start.y;O.call(this,n[y].deltas,A,x);b=true}}if(v){k.call(this,v)}if(r){F.call(this)}};var S=function t(e){var r=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor;var n=r*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+r-n;case"hanging":return e+r-2*n;case"middle":return e+r/2-n;case"ideographic":return e;case"alphabetic":default:return e}};var _=function t(e){var r=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor;var n=r*(this.pdf.internal.getLineHeightFactor()-1);return e+n};p.prototype.createLinearGradient=function t(){var e=function t(){};e.colorStops=[];e.addColorStop=function(t,e){this.colorStops.push([t,e])};e.getColor=function(){if(this.colorStops.length===0){return"#000000"}return this.colorStops[0][1]};e.isCanvasGradient=true;return e};p.prototype.createPattern=function t(){return this.createLinearGradient()};p.prototype.createRadialGradient=function t(){return this.createLinearGradient()};var P=function t(e,r,n,i,a,s,o,u,f){var l=M.call(this,n,i,a,s);for(var c=0;c<l.length;c++){var h=l[c];if(c===0){if(f){I.call(this,h.x1+e,h.y1+r)}else{j.call(this,h.x1+e,h.y1+r)}}B.call(this,e,r,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}if(!u){k.call(this,o)}else{F.call(this)}};var k=function t(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f");break}};var F=function t(){this.pdf.clip();this.pdf.discardPath()};var I=function t(e,r){this.pdf.internal.out(i(e)+" "+a(r)+" m")};var C=function t(e){var r;switch(e.align){case"right":case"end":r="right";break;case"center":r="center";break;case"left":case"start":default:r="left";break}var n=this.pdf.getTextDimensions(e.text);var i=S.call(this,e.y);var a=_.call(this,i);var s=a-n.h;var o=this.ctx.transform.applyToPoint(new f(e.x,i));var u=this.ctx.transform.decompose();var h=new c;h=h.multiply(u.translate);h=h.multiply(u.skew);h=h.multiply(u.scale);var d=this.ctx.transform.applyToRectangle(new l(e.x,i,n.w,n.h));var p=h.applyToRectangle(new l(e.x,s,n.w,n.h));var v=y.call(this,p);var g=[];for(var m=0;m<v.length;m+=1){if(g.indexOf(v[m])===-1){g.push(v[m])}}L(g);var w,A,P;if(this.autoPaging){var k=g[0];var F=g[g.length-1];for(var I=k;I<F+1;I++){this.pdf.setPage(I);var C=I===1?this.posY+this.margin[0]:this.margin[0];var j=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2];var O=this.pdf.internal.pageSize.height-this.margin[2];var B=O-this.margin[0];var M=this.pdf.internal.pageSize.width-this.margin[1];var E=M-this.margin[3];var q=I===1?0:j+(I-2)*B;if(this.ctx.clip_path.length!==0){var D=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path));this.path=N(w,this.posX+this.margin[3],-1*q+C);x.call(this,"fill",true);this.path=D}var R=N([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-q+C+this.ctx.prevPageLastElemOffset)[0];if(e.scale>=.01){A=this.pdf.internal.getFontSize();this.pdf.setFontSize(A*e.scale);P=this.lineWidth;this.lineWidth=P*e.scale}var T=this.autoPaging!=="text";if(T||R.y+R.h<=O){if(T||R.y>=C&&R.x<=M){var U=T?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||M-R.x)[0];var z=N([JSON.parse(JSON.stringify(d))],this.posX+this.margin[3],-q+C+this.ctx.prevPageLastElemOffset)[0];var H=T&&(I>k||I<F)&&b.call(this);if(H){this.pdf.saveGraphicsState();this.pdf.rect(this.margin[3],this.margin[0],E,B,null).clip().discardPath()}this.pdf.text(U,z.x,z.y,{angle:e.angle,align:r,renderingMode:e.renderingMode});if(H){this.pdf.restoreGraphicsState()}}}else{if(R.y<O){this.ctx.prevPageLastElemOffset+=O-R.y}}if(e.scale>=.01){this.pdf.setFontSize(A);this.lineWidth=P}}}else{if(e.scale>=.01){A=this.pdf.internal.getFontSize();this.pdf.setFontSize(A*e.scale);P=this.lineWidth;this.lineWidth=P*e.scale}this.pdf.text(e.text,o.x+this.posX,o.y+this.posY,{angle:e.angle,align:r,renderingMode:e.renderingMode,maxWidth:e.maxWidth});if(e.scale>=.01){this.pdf.setFontSize(A);this.lineWidth=P}}};var j=function t(e,r,n,s){n=n||0;s=s||0;this.pdf.internal.out(i(e+n)+" "+a(r+s)+" l")};var O=function t(e,r,n){return this.pdf.lines(e,r,n,null,null)};var B=function t(e,r,i,a,s,f,l,c){this.pdf.internal.out([n(o(i+e)),n(u(a+r)),n(o(s+e)),n(u(f+r)),n(o(l+e)),n(u(c+r)),"c"].join(" "))};var M=function t(e,r,n,i){var a=1e-5;var s=Math.PI*2;var o=Math.PI/2;while(r>n){r=r-s}var u=Math.abs(n-r);if(u<s){if(i){u=s-u}}var f=[];var l=i?-1:+1;var c=r;for(;u>a;){var h=l*Math.min(u,o);var d=c+h;f.push(E.call(this,e,c,d));u-=Math.abs(d-c);c=d}return f};var E=function t(e,r,n){var i=(n-r)/2;var a=e*Math.cos(i);var s=e*Math.sin(i);var o=a;var u=-s;var f=o*o+u*u;var l=f+o*a+u*s;var c=4/3*(Math.sqrt(2*f*l)-l)/(o*s-u*a);var h=o-c*u;var d=u+c*o;var p=h;var v=-d;var g=i+r;var m=Math.cos(g);var b=Math.sin(g);return{x1:e*Math.cos(r),y1:e*Math.sin(r),x2:h*m-d*b,y2:h*b+d*m,x3:p*m-v*b,y3:p*b+v*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}};var q=function t(e){return e*180/Math.PI};var D=function t(e,r,n,i,a,s){var o=e+(n-e)*.5;var u=r+(i-r)*.5;var f=a+(n-a)*.5;var c=s+(i-s)*.5;var h=Math.min(e,a,o,f);var d=Math.max(e,a,o,f);var p=Math.min(r,s,u,c);var v=Math.max(r,s,u,c);return new l(h,p,d-h,v-p)};var R=function t(e,r,n,i,a,s,o,u){var f=n-e;var c=i-r;var h=a-n;var d=s-i;var p=o-a;var v=u-s;var g=40;var m,b,y,w,N,L,A,x,S,_,P,k,F,I,C,j,O,B,M,E,q,D,R,T;for(b=0;b<g+1;b++){m=b/g;y=e+m*f;w=r+m*c;N=n+m*h;L=i+m*d;A=a+m*p;x=s+m*v;M=N-y;E=L-w;q=A-N;D=x-L;P=y+m*M;k=w+m*E;S=N+m*q;_=L+m*D;R=S-P;T=_-k;F=P+m*R;I=k+m*T;if(b==0){C=F;j=I;O=F;B=I}else{C=Math.min(C,F);j=Math.min(j,I);O=Math.max(O,F);B=Math.max(B,I)}}return new l(Math.round(C),Math.round(j),Math.round(O-C),Math.round(B-j))};var T=function t(e,r){return JSON.stringify({lineDash:e,lineDashOffset:r})};var U=function t(){if(!this.prevLineDash&&!this.ctx.lineDash.length&&!this.ctx.lineDashOffset){return}var e=T(this.ctx.lineDash,this.ctx.lineDashOffset);if(this.prevLineDash!==e){this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset);this.prevLineDash=e}}})(z.API);var fe;try{fe=require("worker_threads").Worker}catch(t){}var le=Uint8Array,ce=Uint16Array,he=Uint32Array;var de=new le([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]);var pe=new le([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]);var ve=new le([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);var ge=function(t,e){var r=new ce(31);for(var n=0;n<31;++n){r[n]=e+=1<<t[n-1]}var i=new he(r[30]);for(var n=1;n<30;++n){for(var a=r[n];a<r[n+1];++a){i[a]=a-r[n]<<5|n}}return[r,i]};var me=ge(de,2),be=me[0],ye=me[1];be[28]=258,ye[258]=28;var we=ge(pe,0),Ne=we[0],Le=we[1];var Ae=new ce(32768);for(var xe=0;xe<32768;++xe){var Se=(xe&43690)>>>1|(xe&21845)<<1;Se=(Se&52428)>>>2|(Se&13107)<<2;Se=(Se&61680)>>>4|(Se&3855)<<4;Ae[xe]=((Se&65280)>>>8|(Se&255)<<8)>>>1}var _e=function(t,e,r){var n=t.length;var i=0;var a=new ce(e);for(;i<n;++i)++a[t[i]-1];var s=new ce(e);for(i=0;i<e;++i){s[i]=s[i-1]+a[i-1]<<1}var o;if(r){o=new ce(1<<e);var u=15-e;for(i=0;i<n;++i){if(t[i]){var f=i<<4|t[i];var l=e-t[i];var c=s[t[i]-1]++<<l;for(var h=c|(1<<l)-1;c<=h;++c){o[Ae[c]>>>u]=f}}}}else{o=new ce(n);for(i=0;i<n;++i)o[i]=Ae[s[t[i]-1]++]>>>15-t[i]}return o};var Pe=new le(288);for(var xe=0;xe<144;++xe)Pe[xe]=8;for(var xe=144;xe<256;++xe)Pe[xe]=9;for(var xe=256;xe<280;++xe)Pe[xe]=7;for(var xe=280;xe<288;++xe)Pe[xe]=8;var ke=new le(32);for(var xe=0;xe<32;++xe)ke[xe]=5;var Fe=_e(Pe,9,0),Ie=_e(Pe,9,1);var Ce=_e(ke,5,0),je=_e(ke,5,1);var Oe=function(t){var e=t[0];for(var r=1;r<t.length;++r){if(t[r]>e)e=t[r]}return e};var Be=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(e&7)&r};var Me=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)};var Ee=function(t){return(t/8>>0)+(t&7&&1)};var qe=function(t,e,r){if(e==null||e<0)e=0;if(r==null||r>t.length)r=t.length;var n=new(t instanceof ce?ce:t instanceof he?he:le)(r-e);n.set(t.subarray(e,r));return n};var De=function(t,e,r){var n=t.length;var i=!e||r;var a=!r||r.i;if(!r)r={};if(!e)e=new le(n*3);var s=function(t){var r=e.length;if(t>r){var n=new le(Math.max(r*2,t));n.set(e);e=n}};var o=r.f||0,u=r.p||0,f=r.b||0,l=r.l,c=r.d,h=r.m,d=r.n;var p=n*8;do{if(!l){r.f=o=Be(t,u,1);var v=Be(t,u+1,3);u+=3;if(!v){var g=Ee(u)+4,m=t[g-4]|t[g-3]<<8,b=g+m;if(b>n){if(a)throw"unexpected EOF";break}if(i)s(f+m);e.set(t.subarray(g,b),f);r.b=f+=m,r.p=u=b*8;continue}else if(v==1)l=Ie,c=je,h=9,d=5;else if(v==2){var y=Be(t,u,31)+257,w=Be(t,u+10,15)+4;var N=y+Be(t,u+5,31)+1;u+=14;var L=new le(N);var A=new le(19);for(var x=0;x<w;++x){A[ve[x]]=Be(t,u+x*3,7)}u+=w*3;var S=Oe(A),_=(1<<S)-1;if(!a&&u+N*(S+7)>p)break;var P=_e(A,S,1);for(var x=0;x<N;){var k=P[Be(t,u,_)];u+=k&15;var g=k>>>4;if(g<16){L[x++]=g}else{var F=0,I=0;if(g==16)I=3+Be(t,u,3),u+=2,F=L[x-1];else if(g==17)I=3+Be(t,u,7),u+=3;else if(g==18)I=11+Be(t,u,127),u+=7;while(I--)L[x++]=F}}var C=L.subarray(0,y),j=L.subarray(y);h=Oe(C);d=Oe(j);l=_e(C,h,1);c=_e(j,d,1)}else throw"invalid block type";if(u>p)throw"unexpected EOF"}if(i)s(f+131072);var O=(1<<h)-1,B=(1<<d)-1;var M=h+d+18;while(a||u+M<p){var F=l[Me(t,u)&O],E=F>>>4;u+=F&15;if(u>p)throw"unexpected EOF";if(!F)throw"invalid length/literal";if(E<256)e[f++]=E;else if(E==256){l=null;break}else{var q=E-254;if(E>264){var x=E-257,D=de[x];q=Be(t,u,(1<<D)-1)+be[x];u+=D}var R=c[Me(t,u)&B],T=R>>>4;if(!R)throw"invalid distance";u+=R&15;var j=Ne[T];if(T>3){var D=pe[T];j+=Me(t,u)&(1<<D)-1,u+=D}if(u>p)throw"unexpected EOF";if(i)s(f+131072);var U=f+q;for(;f<U;f+=4){e[f]=e[f-j];e[f+1]=e[f+1-j];e[f+2]=e[f+2-j];e[f+3]=e[f+3-j]}f=U}}r.l=l,r.p=u,r.b=f;if(l)o=1,r.m=h,r.d=c,r.n=d}while(!o);return f==e.length?e:qe(e,0,f)};var Re=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r;t[n+1]|=r>>>8};var Te=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r;t[n+1]|=r>>>8;t[n+2]|=r>>>16};var Ue=function(t,e){var r=[];for(var n=0;n<t.length;++n){if(t[n])r.push({s:n,f:t[n]})}var i=r.length;var a=r.slice();if(!i)return[new le(0),0];if(i==1){var s=new le(r[0].s+1);s[r[0].s]=1;return[s,1]}r.sort(function(t,e){return t.f-e.f});r.push({s:-1,f:25001});var o=r[0],u=r[1],f=0,l=1,c=2;r[0]={s:-1,f:o.f+u.f,l:o,r:u};while(l!=i-1){o=r[r[f].f<r[c].f?f++:c++];u=r[f!=l&&r[f].f<r[c].f?f++:c++];r[l++]={s:-1,f:o.f+u.f,l:o,r:u}}var h=a[0].s;for(var n=1;n<i;++n){if(a[n].s>h)h=a[n].s}var d=new ce(h+1);var p=ze(r[l-1],d,0);if(p>e){var n=0,v=0;var g=p-e,m=1<<g;a.sort(function(t,e){return d[e.s]-d[t.s]||t.f-e.f});for(;n<i;++n){var b=a[n].s;if(d[b]>e){v+=m-(1<<p-d[b]);d[b]=e}else break}v>>>=g;while(v>0){var y=a[n].s;if(d[y]<e)v-=1<<e-d[y]++-1;else++n}for(;n>=0&&v;--n){var w=a[n].s;if(d[w]==e){--d[w];++v}}p=e}return[new le(d),p]};var ze=function(t,e,r){return t.s==-1?Math.max(ze(t.l,e,r+1),ze(t.r,e,r+1)):e[t.s]=r};var He=function(t){var e=t.length;while(e&&!t[--e]);var r=new ce(++e);var n=0,i=t[0],a=1;var s=function(t){r[n++]=t};for(var o=1;o<=e;++o){if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);if(a>2){s(a>10?a-11<<5|28690:a-3<<5|12305);a=0}}else if(a>3){s(i),--a;for(;a>6;a-=6)s(8304);if(a>2)s(a-3<<5|8208),a=0}while(a--)s(i);a=1;i=t[o]}}return[r.subarray(0,n),e]};var We=function(t,e){var r=0;for(var n=0;n<e.length;++n)r+=t[n]*e[n];return r};var Ve=function(t,e,r){var n=r.length;var i=Ee(e+2);t[i]=n&255;t[i+1]=n>>>8;t[i+2]=t[i]^255;t[i+3]=t[i+1]^255;for(var a=0;a<n;++a)t[i+a+4]=r[a];return(i+4+n)*8};var Ge=function(t,e,r,n,i,a,s,o,u,f,l){Re(e,l++,r);++i[256];var c=Ue(i,15),h=c[0],d=c[1];var p=Ue(a,15),v=p[0],g=p[1];var m=He(h),b=m[0],y=m[1];var w=He(v),N=w[0],L=w[1];var A=new ce(19);for(var x=0;x<b.length;++x)A[b[x]&31]++;for(var x=0;x<N.length;++x)A[N[x]&31]++;var S=Ue(A,7),_=S[0],P=S[1];var k=19;for(;k>4&&!_[ve[k-1]];--k);var F=f+5<<3;var I=We(i,Pe)+We(a,ke)+s;var C=We(i,h)+We(a,v)+s+14+3*k+We(A,_)+(2*A[16]+3*A[17]+7*A[18]);if(F<=I&&F<=C)return Ve(e,l,t.subarray(u,u+f));var j,O,B,M;Re(e,l,1+(C<I)),l+=2;if(C<I){j=_e(h,d,0),O=h,B=_e(v,g,0),M=v;var E=_e(_,P,0);Re(e,l,y-257);Re(e,l+5,L-1);Re(e,l+10,k-4);l+=14;for(var x=0;x<k;++x)Re(e,l+3*x,_[ve[x]]);l+=3*k;var q=[b,N];for(var D=0;D<2;++D){var R=q[D];for(var x=0;x<R.length;++x){var T=R[x]&31;Re(e,l,E[T]),l+=_[T];if(T>15)Re(e,l,R[x]>>>5&127),l+=R[x]>>>12}}}else{j=Fe,O=Pe,B=Ce,M=ke}for(var x=0;x<o;++x){if(n[x]>255){var T=n[x]>>>18&31;Te(e,l,j[T+257]),l+=O[T+257];if(T>7)Re(e,l,n[x]>>>23&31),l+=de[T];var U=n[x]&31;Te(e,l,B[U]),l+=M[U];if(U>3)Te(e,l,n[x]>>>5&8191),l+=pe[U]}else{Te(e,l,j[n[x]]),l+=O[n[x]]}}Te(e,l,j[256]);return l+O[256]};var Ye=new he([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]);var Je=new le(0);var Xe=function(t,e,r,n,i,a){var s=t.length;var o=new le(n+s+5*(1+Math.floor(s/7e3))+i);var u=o.subarray(n,o.length-i);var f=0;if(!e||s<8){for(var l=0;l<=s;l+=65535){var c=l+65535;if(c<s){f=Ve(u,f,t.subarray(l,c))}else{u[l]=a;f=Ve(u,f,t.subarray(l,s))}}}else{var h=Ye[e-1];var d=h>>>13,p=h&8191;var v=(1<<r)-1;var g=new ce(32768),m=new ce(v+1);var b=Math.ceil(r/3),y=2*b;var w=function(e){return(t[e]^t[e+1]<<b^t[e+2]<<y)&v};var N=new he(25e3);var L=new ce(288),A=new ce(32);var x=0,S=0,l=0,_=0,P=0,k=0;for(;l<s;++l){var F=w(l);var I=l&32767;var C=m[F];g[I]=C;m[F]=I;if(P<=l){var j=s-l;if((x>7e3||_>24576)&&j>423){f=Ge(t,u,0,N,L,A,S,_,k,l-k,f);_=x=S=0,k=l;for(var O=0;O<286;++O)L[O]=0;for(var O=0;O<30;++O)A[O]=0}var B=2,M=0,E=p,q=I-C&32767;if(j>2&&F==w(l-q)){var D=Math.min(d,j)-1;var R=Math.min(32767,l);var T=Math.min(258,j);while(q<=R&&--E&&I!=C){if(t[l+B]==t[l+B-q]){var U=0;for(;U<T&&t[l+U]==t[l+U-q];++U);if(U>B){B=U,M=q;if(U>D)break;var z=Math.min(q,U-2);var H=0;for(var O=0;O<z;++O){var W=l-q+O+32768&32767;var V=g[W];var G=W-V+32768&32767;if(G>H)H=G,C=W}}}I=C,C=g[I];q+=I-C+32768&32767}}if(M){N[_++]=268435456|ye[B]<<18|Le[M];var Y=ye[B]&31,J=Le[M]&31;S+=de[Y]+pe[J];++L[257+Y];++A[J];P=l+B;++x}else{N[_++]=t[l];++L[t[l]]}}}f=Ge(t,u,a,N,L,A,S,_,k,l-k,f);if(!a)f=Ve(u,f,Je)}return qe(o,0,n+Ee(f)+i)};var Ke=function(){var t=1,e=0;return{p:function(r){var n=t,i=e;var a=r.length;for(var s=0;s!=a;){var o=Math.min(s+5552,a);for(;s<o;++s)n+=r[s],i+=n;n%=65521,i%=65521}t=n,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}};var Ze=function(t,e,r,n,i){return Xe(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!i)};var $e=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8};var Qe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)};var tr=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function er(t,e){if(e===void 0){e={}}var r=Ke();r.p(t);var n=Ze(t,e,2,4);return Qe(n,e),$e(n,n.length-4,r.d()),n}function rr(t,e){return De((tr(t),t.subarray(2,-4)),e)}
/**
   * @license
   * jsPDF filters PlugIn
   * Copyright (c) 2014 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=function t(e){var r,n,i,a,s,o,u,f,l,c;for(!/[^\x00-\xFF]/.test(e),r="\0\0\0\0".slice(e.length%4||4),e+=r,n=[],i=0,a=e.length;a>i;i+=4){s=(e.charCodeAt(i)<<24)+(e.charCodeAt(i+1)<<16)+(e.charCodeAt(i+2)<<8)+e.charCodeAt(i+3),0!==s?(c=s%85,s=(s-c)/85,l=s%85,s=(s-l)/85,f=s%85,s=(s-f)/85,u=s%85,s=(s-u)/85,o=s%85,n.push(o+33,u+33,f+33,l+33,c+33)):n.push(122)}return function(t,e){for(var r=e;r>0;r--){t.pop()}}(n,r.length),String.fromCharCode.apply(String,n)+"~>"};var r=function t(e){var r,n,i,a,s,o=String,u="length",f=255,l="charCodeAt",c="slice",h="replace";for("~>"===e[c](-2),e=e[c](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r="uuuuu"[c](e[u]%5||5),e+=r,i=[],a=0,s=e[u];s>a;a+=5){n=52200625*(e[l](a)-33)+614125*(e[l](a+1)-33)+7225*(e[l](a+2)-33)+85*(e[l](a+3)-33)+(e[l](a+4)-33),i.push(f&n>>24,f&n>>16,f&n>>8,f&n)}return function(t,e){for(var r=e;r>0;r--){t.pop()}}(i,r[u]),o.fromCharCode.apply(o,i)};var n=function t(e){return e.split("").map(function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)}).join("")+">"};var i=function t(e){var r=new RegExp(/^([0-9A-Fa-f]{2})+$/);e=e.replace(/\s/g,"");if(e.indexOf(">")!==-1){e=e.substr(0,e.indexOf(">"))}if(e.length%2){e+="0"}if(r.test(e)===false){return""}var n="";for(var i=0;i<e.length;i+=2){n+=String.fromCharCode("0x"+(e[i]+e[i+1]))}return n};var a=function t(e){var r=new Uint8Array(e.length);var n=e.length;while(n--){r[n]=e.charCodeAt(n)}r=er(r);e=r.reduce(function(t,e){return t+String.fromCharCode(e)},"");return e};t.processDataByFilters=function(t,s){var o=0;var u=t||"";var f=[];s=s||[];if(typeof s==="string"){s=[s]}for(o=0;o<s.length;o+=1){switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u);f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u);f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u);f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u);f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u);f.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}}return{data:u,reverseChain:f.reverse().join(" ")}}})(z.API);
/**
   * @license
   * jsPDF fileloading PlugIn
   * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.loadFile=function(t,r,n){return e(t,r,n)};t.loadImageFile=t.loadFile;function e(t,e,r){e=e===false?false:true;r=typeof r==="function"?r:function(){};var n=undefined;var i=function t(e,r,n){var i=new XMLHttpRequest;var a=0;var s=function t(e){var r=e.length;var n=[];var i=String.fromCharCode;for(a=0;a<r;a+=1){n.push(i(e.charCodeAt(a)&255))}return n.join("")};i.open("GET",e,!r);i.overrideMimeType("text/plain; charset=x-user-defined");if(r===false){i.onload=function(){if(i.status===200){n(s(this.responseText))}else{n(undefined)}}}i.send(null);if(r&&i.status===200){return s(i.responseText)}};try{n=i(t,e,r)}catch(t){}return n}})(z.API);(function(n){function i(){return function(){if(r["html2canvas"]){return Promise.resolve(r["html2canvas"])}if((typeof t==="undefined"?"undefined":e(t))==="object"&&typeof module!=="undefined"){return new Promise(function(t,e){try{t(require("html2canvas"))}catch(t){e(t)}})}if(typeof define==="function"&&define.amd){return new Promise(function(t,e){try{require(["html2canvas"],t)}catch(t){e(t)}})}return Promise.reject(new Error("Could not load html2canvas"))}().catch(function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))}).then(function(t){return t.default?t.default:t})}function a(){return function(){if(r["DOMPurify"]){return Promise.resolve(r["DOMPurify"])}if((typeof t==="undefined"?"undefined":e(t))==="object"&&typeof module!=="undefined"){return new Promise(function(t,e){try{t(require("dompurify"))}catch(t){e(t)}})}if(typeof define==="function"&&define.amd){return new Promise(function(t,e){try{require(["dompurify"],t)}catch(t){e(t)}})}return Promise.reject(new Error("Could not load dompurify"))}().catch(function(t){return Promise.reject(new Error("Could not load dompurify: "+t))}).then(function(t){return t.default?t.default:t})}var s=function t(r){var n=e(r);if(n==="undefined")return"undefined";else if(n==="string"||r instanceof String)return"string";else if(n==="number"||r instanceof Number)return"number";else if(n==="function"||r instanceof Function)return"function";else if(!!r&&r.constructor===Array)return"array";else if(r&&r.nodeType===1)return"element";else if(n==="object")return"object";else return"unknown"};var o=function t(e,r){var n=document.createElement(e);if(r.className)n.className=r.className;if(r.innerHTML&&r.dompurify){n.innerHTML=r.dompurify.sanitize(r.innerHTML)}for(var i in r.style){n.style[i]=r.style[i]}return n};var u=function t(e,r){var n=e.nodeType===3?document.createTextNode(e.nodeValue):e.cloneNode(false);for(var i=e.firstChild;i;i=i.nextSibling){if(r===true||i.nodeType!==1||i.nodeName!=="SCRIPT"){n.appendChild(t(i,r))}}if(e.nodeType===1){if(e.nodeName==="CANVAS"){n.width=e.width;n.height=e.height;n.getContext("2d").drawImage(e,0,0)}else if(e.nodeName==="TEXTAREA"||e.nodeName==="SELECT"){n.value=e.value}n.addEventListener("load",function(){n.scrollTop=e.scrollTop;n.scrollLeft=e.scrollLeft},true)}return n};var f=function t(e){var r=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template)));var n=t.convert(Promise.resolve(),r);n=n.setProgress(1,t,1,[t]);n=n.set(e);return n};f.prototype=Object.create(Promise.prototype);f.prototype.constructor=f;f.convert=function t(e,r){e.__proto__=r||f.prototype;return e};f.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function t(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:true,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}};f.prototype.from=function t(e,r){function n(t){switch(s(t)){case"string":return"string";case"element":return t.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function t(){r=r||n(e);switch(r){case"string":return this.then(a).then(function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})};f.prototype.to=function t(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}};f.prototype.toContainer=function t(){var e=[function t(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function t(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(e).then(function t(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0};var r={position:"relative",display:"inline-block",width:(typeof this.opt.width==="number"&&!isNaN(this.opt.width)&&typeof this.opt.windowWidth==="number"&&!isNaN(this.opt.windowWidth)?this.opt.windowWidth:Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth))+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor};var n=u(this.prop.src,this.opt.html2canvas.javascriptEnabled);if(n.tagName==="BODY"){r.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"}this.prop.overlay=o("div",{className:"html2pdf__overlay",style:e});this.prop.container=o("div",{className:"html2pdf__container",style:r});this.prop.container.appendChild(n);this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}}));this.prop.container.style.float="none";this.prop.overlay.appendChild(this.prop.container);document.body.appendChild(this.prop.overlay);this.prop.container.firstChild.style.position="relative";this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})};f.prototype.toCanvas=function t(){var e=[function t(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(i).then(function t(e){var r=Object.assign({},this.opt.html2canvas);delete r.onrendered;return e(this.prop.container,r)}).then(function t(e){var r=this.opt.html2canvas.onrendered||function(){};r(e);this.prop.canvas=e;document.body.removeChild(this.prop.overlay)})};f.prototype.toContext2d=function t(){var e=[function t(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(i).then(function t(e){var r=this.opt.jsPDF;var n=this.opt.fontFaces;var i=typeof this.opt.width==="number"&&!isNaN(this.opt.width)&&typeof this.opt.windowWidth==="number"&&!isNaN(this.opt.windowWidth)?this.opt.width/this.opt.windowWidth:1;var a=Object.assign({async:true,allowTaint:true,scale:i,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:true,proxy:null,removeContainer:true,foreignObjectRendering:false,useCORS:false},this.opt.html2canvas);delete a.onrendered;r.context2d.autoPaging=typeof this.opt.autoPaging==="undefined"?true:this.opt.autoPaging;r.context2d.posX=this.opt.x;r.context2d.posY=this.opt.y;r.context2d.margin=this.opt.margin;r.context2d.fontFaces=n;if(n){for(var s=0;s<n.length;++s){var o=n[s];var u=o.src.find(function(t){return t.format==="truetype"});if(u){r.addFont(u.url,o.ref.name,o.ref.style)}}}a.windowHeight=a.windowHeight||0;a.windowHeight=a.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight;r.context2d.save(true);return e(this.prop.container,a)}).then(function t(e){this.opt.jsPDF.context2d.restore(true);var r=this.opt.html2canvas.onrendered||function(){};r(e);this.prop.canvas=e;document.body.removeChild(this.prop.overlay)})};f.prototype.toImg=function t(){var e=[function t(){return this.prop.canvas||this.toCanvas()}];return this.thenList(e).then(function t(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img");this.prop.img.src=e})};f.prototype.toPdf=function t(){var e=[function t(){return this.toContext2d()}];return this.thenList(e).then(function t(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})};f.prototype.output=function t(e,r,n){n=n||"pdf";if(n.toLowerCase()==="img"||n.toLowerCase()==="image"){return this.outputImg(e,r)}else{return this.outputPdf(e,r)}};f.prototype.outputPdf=function t(e,r){var n=[function t(){return this.prop.pdf||this.toPdf()}];return this.thenList(n).then(function t(){return this.prop.pdf.output(e,r)})};f.prototype.outputImg=function t(e){var r=[function t(){return this.prop.img||this.toImg()}];return this.thenList(r).then(function t(){switch(e){case undefined:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})};f.prototype.save=function t(e){var r=[function t(){return this.prop.pdf||this.toPdf()}];return this.thenList(r).set(e?{filename:e}:null).then(function t(){this.prop.pdf.save(this.opt.filename)})};f.prototype.doCallback=function t(){var e=[function t(){return this.prop.pdf||this.toPdf()}];return this.thenList(e).then(function t(){this.prop.callback(this.prop.pdf)})};f.prototype.set=function t(e){if(s(e)!=="object"){return this}var r=Object.keys(e||{}).map(function(t){if(t in f.template.prop){return function r(){this.prop[t]=e[t]}}else{switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function t(){this.opt.jsPDF=e.jsPDF;return this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function r(){this.opt[t]=e[t]}}}},this);return this.then(function t(){return this.thenList(r)})};f.prototype.get=function t(e,r){return this.then(function t(){var n=e in f.template.prop?this.prop[e]:this.opt[e];return r?r(n):n})};f.prototype.setMargin=function t(e){return this.then(function t(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(e.length===2){e=[e[0],e[1],e[0],e[1]]}if(e.length===4){break}default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)};f.prototype.setPageSize=function t(e){function r(t,e){return Math.floor(t*e/72*96)}return this.then(function t(){e=e||z.getPageSize(this.opt.jsPDF);if(!e.hasOwnProperty("inner")){e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]};e.inner.px={width:r(e.inner.width,e.k),height:r(e.inner.height,e.k)};e.inner.ratio=e.inner.height/e.inner.width}this.prop.pageSize=e})};f.prototype.setProgress=function t(e,r,n,i){if(e!=null)this.progress.val=e;if(r!=null)this.progress.state=r;if(n!=null)this.progress.n=n;if(i!=null)this.progress.stack=i;this.progress.ratio=this.progress.val/this.progress.state;return this};f.prototype.updateProgress=function t(e,r,n,i){return this.setProgress(e?this.progress.val+e:null,r?r:null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)};f.prototype.then=function t(e,r){var n=this;return this.thenCore(e,r,function t(e,r){n.updateProgress(null,null,1,[e]);return Promise.prototype.then.call(this,function t(r){n.updateProgress(null,e);return r}).then(e,r).then(function t(e){n.updateProgress(1);return e})})};f.prototype.thenCore=function t(e,r,n){n=n||Promise.prototype.then;var i=this;if(e){e=e.bind(i)}if(r){r=r.bind(i)}var a=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise";var s=a?i:f.convert(Object.assign({},i),Promise.prototype);var o=n.call(s,e,r);return f.convert(o,i.__proto__)};f.prototype.thenExternal=function t(e,r){return Promise.prototype.then.call(this,e,r)};f.prototype.thenList=function t(e){var r=this;e.forEach(function t(e){r=r.thenCore(e)});return r};f.prototype["catch"]=function(t){if(t){t=t.bind(this)}var e=Promise.prototype["catch"].call(this,t);return f.convert(e,this)};f.prototype.catchExternal=function t(e){return Promise.prototype["catch"].call(this,e)};f.prototype.error=function t(e){return this.then(function t(){throw new Error(e)})};f.prototype.using=f.prototype.set;f.prototype.saveAs=f.prototype.save;f.prototype.export=f.prototype.output;f.prototype.run=f.prototype.then;z.getPageSize=function(t,r,n){if(e(t)==="object"){var i=t;t=i.orientation;r=i.unit||r;n=i.format||n}r=r||"mm";n=n||"a4";t=(""+(t||"P")).toLowerCase();var a=(""+n).toLowerCase();var s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};var o;switch(r){case"pt":o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=72/96;break;case"pc":o=12;break;case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+r}var u=0;var f=0;if(s.hasOwnProperty(a)){u=s[a][1]/o;f=s[a][0]/o}else{try{u=n[1];f=n[0]}catch(t){throw new Error("Invalid format: "+n)}}var l;if(t==="p"||t==="portrait"){t="p";if(f>u){l=f;f=u;u=l}}else if(t==="l"||t==="landscape"){t="l";if(u>f){l=f;f=u;u=l}}else{throw"Invalid orientation: "+t}var c={width:f,height:u,unit:r,k:o,orientation:t};return c};n.html=function(t,e){e=e||{};e.callback=e.callback||function(){};e.html2canvas=e.html2canvas||{};e.html2canvas.canvas=e.html2canvas.canvas||this.canvas;e.jsPDF=e.jsPDF||this;e.fontFaces=e.fontFaces?e.fontFaces.map(Jt):null;var r=new f(e);if(!e.worker){return r.from(t).doCallback()}else{return r}}})(z.API);
/**
   * @license
   * ====================================================================
   * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */(function(t){var e,r,n;t.addJS=function(t){n=t;this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject();this.internal.out("<<");this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]");this.internal.out(">>");this.internal.out("endobj");r=this.internal.newObject();this.internal.out("<<");this.internal.out("/S /JavaScript");this.internal.out("/JS ("+n+")");this.internal.out(">>");this.internal.out("endobj")});this.internal.events.subscribe("putCatalog",function(){if(e!==undefined&&r!==undefined){this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}});return this}})(z.API);
/**
   * @license
   * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e;t.events.push(["postPutResources",function(){var t=this;var r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0){var n=t.outline.render().split(/\r\n/);for(var i=0;i<n.length;i++){var a=n[i];var s=r.exec(a);if(s!=null){var o=s[1];t.internal.newObjectDeferredBegin(o,false)}t.internal.write(a)}}if(this.outline.createNamedDestinations){var u=this.internal.pages.length;var f=[];for(var i=0;i<u;i++){var l=t.internal.newObject();f.push(l);var c=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();t.internal.write("<< /Names [ ");for(var i=0;i<f.length;i++){t.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R")}t.internal.write(" ] >>","endobj");e=t.internal.newObject();t.internal.write("<< /Dests "+h+" 0 R");t.internal.write(">>","endobj")}}]);t.events.push(["putCatalog",function(){var t=this;if(t.outline.root.children.length>0){t.internal.write("/Outlines",this.outline.makeRef(this.outline.root));if(this.outline.createNamedDestinations){t.internal.write("/Names "+e+" 0 R")}}}]);t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:false,root:{children:[]}};t.outline.add=function(t,e,r){var n={title:e,options:r,children:[]};if(t==null){t=this.root}t.children.push(n);return n};t.outline.render=function(){this.ctx={};this.ctx.val="";this.ctx.pdf=t;this.genIds_r(this.root);this.renderRoot(this.root);this.renderItems(this.root);return this.ctx.val};t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var r=0;r<e.children.length;r++){this.genIds_r(e.children[r])}};t.outline.renderRoot=function(t){this.objStart(t);this.line("/Type /Outlines");if(t.children.length>0){this.line("/First "+this.makeRef(t.children[0]));this.line("/Last "+this.makeRef(t.children[t.children.length-1]))}this.line("/Count "+this.count_r({count:0},t));this.objEnd()};t.outline.renderItems=function(e){var r=this.ctx.pdf.internal.getVerticalCoordinateString;for(var n=0;n<e.children.length;n++){var i=e.children[n];this.objStart(i);this.line("/Title "+this.makeString(i.title));this.line("/Parent "+this.makeRef(e));if(n>0){this.line("/Prev "+this.makeRef(e.children[n-1]))}if(n<e.children.length-1){this.line("/Next "+this.makeRef(e.children[n+1]))}if(i.children.length>0){this.line("/First "+this.makeRef(i.children[0]));this.line("/Last "+this.makeRef(i.children[i.children.length-1]))}var a=this.count=this.count_r({count:0},i);if(a>0){this.line("/Count "+a)}if(i.options){if(i.options.pageNumber){var s=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest "+"["+s.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}}this.objEnd()}for(var o=0;o<e.children.length;o++){this.renderItems(e.children[o])}};t.outline.line=function(t){this.ctx.val+=t+"\r\n"};t.outline.makeRef=function(t){return t.id+" 0 R"};t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"};t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj"+"\r\n<<\r\n"};t.outline.objEnd=function(){this.ctx.val+=">> \r\n"+"endobj"+"\r\n"};t.outline.count_r=function(t,e){for(var r=0;r<e.children.length;r++){t.count++;this.count_r(t,e.children[r])}return t.count}}]);return this})(z.API);
/**
   * @license
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=[192,193,194,195,196,197,198,199];var r=function t(r){var n,i,a;var s=r.charCodeAt(4)*256+r.charCodeAt(5);var o=r.length;var u={width:0,height:0,numcomponents:1};for(var f=4;f<o;f+=2){f+=s;if(e.indexOf(r.charCodeAt(f+1))!==-1){i=r.charCodeAt(f+5)*256+r.charCodeAt(f+6);n=r.charCodeAt(f+7)*256+r.charCodeAt(f+8);a=r.charCodeAt(f+9);u={width:n,height:i,numcomponents:a};break}else{s=r.charCodeAt(f+2)*256+r.charCodeAt(f+3)}}return u};t.processJPEG=function(t,e,n,i,a,s){var o=this.decode.DCT_DECODE,u=8,f,l=null;if(typeof t==="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){t=a||t;t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t;t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t;f=r(t);switch(f.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB;break}l={data:t,width:f.width,height:f.height,colorSpace:s,bitsPerComponent:u,filter:o,index:e,alias:n}}return l}})(z.API);var nr=function(){var t,e,n,i,a,s;e=1;n=2;t=0;function o(t){var e,r,n,i,a,s,o,u,f,l,c,h,d,p,v;this.data=t;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};s=null;while(true){e=this.readUInt32();l=function(){var t,e;e=[];for(o=t=0;t<4;o=++t){e.push(String.fromCharCode(this.data[this.pos++]))}return e}.call(this).join("");switch(l){case"IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":if(s){this.animation.frames.push(s)}this.pos+=4;s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();i=this.readUInt16()||100;s.delay=1e3*a/i;s.disposeOp=this.data[this.pos++];s.blendOp=this.data[this.pos++];s.data=[];break;case"IDAT":case"fdAT":if(l==="fdAT"){this.pos+=4;e-=4}t=(s!=null?s.data:void 0)||this.imgData;for(o=d=0;0<=e?d<e:d>e;o=0<=e?++d:--d){t.push(this.data[this.pos++])}break;case"tRNS":this.transparency={};switch(this.colorType){case 3:n=this.palette.length/3;this.transparency.indexed=this.read(e);if(this.transparency.indexed.length>n)throw new Error("More transparent colors than palette size");c=n-this.transparency.indexed.length;if(c>0){for(o=p=0;0<=c?p<c:p>c;o=0<=c?++p:--p){this.transparency.indexed.push(255)}}break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":h=this.read(e);u=h.indexOf(0);f=String.fromCharCode.apply(String,h.slice(0,u));this.text[f]=String.fromCharCode.apply(String,h.slice(u+1));break;case"IEND":if(s){this.animation.frames.push(s)}this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this);this.hasAlphaChannel=(v=this.colorType)===4||v===6;r=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*r;this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this);this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=e}this.pos+=4;if(this.pos>this.data.length){throw new Error("Incomplete or corrupt PNG file")}}}o.prototype.read=function(t){var e,r,n;n=[];for(e=r=0;0<=t?r<t:r>t;e=0<=t?++r:--r){n.push(this.data[this.pos++])}return n};o.prototype.readUInt32=function(){var t,e,r,n;t=this.data[this.pos++]<<24;e=this.data[this.pos++]<<16;r=this.data[this.pos++]<<8;n=this.data[this.pos++];return t|e|r|n};o.prototype.readUInt16=function(){var t,e;t=this.data[this.pos++]<<8;e=this.data[this.pos++];return t|e};o.prototype.decodePixels=function(t){var e=this.pixelBitlength/8;var r=new Uint8Array(this.width*this.height*e);var n=0;var i=this;if(t==null){t=this.imgData}if(t.length===0){return new Uint8Array(0)}t=rr(t);function a(a,s,o,u){var f,l,c,h,d,p,v,g,m,b,y,w,N,L,A,x,S,_,P,k,F;var I=Math.ceil((i.width-a)/o),C=Math.ceil((i.height-s)/u);var j=i.width==I&&i.height==C;L=e*I;w=j?r:new Uint8Array(L*C);p=t.length;N=0;l=0;while(N<C&&n<p){switch(t[n++]){case 0:for(h=S=0;S<L;h=S+=1){w[l++]=t[n++]}break;case 1:for(h=_=0;_<L;h=_+=1){f=t[n++];d=h<e?0:w[l-e];w[l++]=(f+d)%256}break;case 2:for(h=P=0;P<L;h=P+=1){f=t[n++];c=(h-h%e)/e;A=N&&w[(N-1)*L+c*e+h%e];w[l++]=(A+f)%256}break;case 3:for(h=k=0;k<L;h=k+=1){f=t[n++];c=(h-h%e)/e;d=h<e?0:w[l-e];A=N&&w[(N-1)*L+c*e+h%e];w[l++]=(f+Math.floor((d+A)/2))%256}break;case 4:for(h=F=0;F<L;h=F+=1){f=t[n++];c=(h-h%e)/e;d=h<e?0:w[l-e];if(N===0){A=x=0}else{A=w[(N-1)*L+c*e+h%e];x=c&&w[(N-1)*L+(c-1)*e+h%e]}v=d+A-x;g=Math.abs(v-d);b=Math.abs(v-A);y=Math.abs(v-x);if(g<=b&&g<=y){m=d}else if(b<=y){m=A}else{m=x}w[l++]=(f+m)%256}break;default:throw new Error("Invalid filter algorithm: "+t[n-1])}if(!j){var O=((s+N*u)*i.width+a)*e;var B=N*L;for(h=0;h<I;h+=1){for(var M=0;M<e;M+=1){r[O++]=w[B++]}O+=(o-1)*e}}N++}}if(i.interlaceMethod==1){a(0,0,8,8);a(4,0,8,8);a(0,4,4,8);a(2,0,4,4);a(0,2,2,4);a(1,0,2,2);a(0,1,1,2)}else{a(0,0,1,1)}return r};o.prototype.decodePalette=function(){var t,e,r,n,i,a,s,o,u,f;n=this.palette;s=this.transparency.indexed||[];a=new Uint8Array((s.length||0)+n.length);i=0;r=n.length;t=0;for(e=o=0,u=r;o<u;e=o+=3){a[i++]=n[e];a[i++]=n[e+1];a[i++]=n[e+2];a[i++]=(f=s[t++])!=null?f:255}return a};o.prototype.copyToImageData=function(t,e){var r,n,i,a,s,o,u,f,l,c,h;n=this.colors;l=null;r=this.hasAlphaChannel;if(this.palette.length){l=(h=this._decodedPalette)!=null?h:this._decodedPalette=this.decodePalette();n=4;r=true}i=t.data||t;f=i.length;s=l||e;a=o=0;if(n===1){while(a<f){u=l?e[a/4]*4:o;c=s[u++];i[a++]=c;i[a++]=c;i[a++]=c;i[a++]=r?s[u++]:255;o=u}}else{while(a<f){u=l?e[a/4]*4:o;i[a++]=s[u++];i[a++]=s[u++];i[a++]=s[u++];i[a++]=r?s[u++]:255;o=u}}};o.prototype.decode=function(){var t;t=new Uint8Array(this.width*this.height*4);this.copyToImageData(t,this.decodePixels());return t};var u=function t(){if(Object.prototype.toString.call(r)==="[object Window]"){try{a=r.document.createElement("canvas");s=a.getContext("2d")}catch(t){return false}return true}return false};u();i=function t(e){if(u()===true){var r;s.width=e.width;s.height=e.height;s.clearRect(0,0,e.width,e.height);s.putImageData(e,0,0);r=new Image;r.src=a.toDataURL();return r}throw new Error("This method requires a Browser with Canvas-capability.")};o.prototype.decodeFrames=function(t){var e,r,n,a,s,o,u,f;if(!this.animation){return}u=this.animation.frames;f=[];for(r=s=0,o=u.length;s<o;r=++s){e=u[r];n=t.createImageData(e.width,e.height);a=this.decodePixels(new Uint8Array(e.data));this.copyToImageData(n,a);e.imageData=n;f.push(e.image=i(n))}return f};o.prototype.renderFrame=function(r,i){var a,s,o;s=this.animation.frames;a=s[i];o=s[i-1];if(i===0){r.clearRect(0,0,this.width,this.height)}if((o!=null?o.disposeOp:void 0)===e){r.clearRect(o.xOffset,o.yOffset,o.width,o.height)}else if((o!=null?o.disposeOp:void 0)===n){r.putImageData(o.imageData,o.xOffset,o.yOffset)}if(a.blendOp===t){r.clearRect(a.xOffset,a.yOffset,a.width,a.height)}return r.drawImage(a.image,a.xOffset,a.yOffset)};o.prototype.animate=function(t){var e,r,n,i,a,s,o=this;r=0;s=this.animation,i=s.numFrames,n=s.frames,a=s.numPlays;return(e=function s(){var u,f;u=r++%i;f=n[u];o.renderFrame(t,u);if(i>1&&r/i<a){return o.animation._timeout=setTimeout(e,f.delay)}})()};o.prototype.stopAnimation=function(){var t;return clearTimeout((t=this.animation)!=null?t._timeout:void 0)};o.prototype.render=function(t){var e,r;if(t._png){t._png.stopAnimation()}t._png=this;t.width=this.width;t.height=this.height;e=t.getContext("2d");if(this.animation){this.decodeFrames(e);return this.animate(e)}else{r=e.createImageData(this.width,this.height);this.copyToImageData(r,this.decodePixels());return e.putImageData(r,0,0)}};return o}();
/**
   * @license
   *
   * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */(function(t){var e=function e(n){return n!==t.image_compression.NONE&&r()};var r=function t(){return typeof er==="function"};var n=function e(r,n,a,l){var c=4;var h=o;switch(l){case t.image_compression.FAST:c=1;h=s;break;case t.image_compression.MEDIUM:c=6;h=u;break;case t.image_compression.SLOW:c=9;h=f;break}r=i(r,n,a,h);var d=er(r,{level:c});return t.__addimage__.arrayBufferToBinaryString(d)};var i=function t(e,r,n,i){var a=e.length/r,s=new Uint8Array(e.length+a),o=c(),u,f,l;for(var d=0;d<a;d+=1){l=d*r;u=e.subarray(l,l+r);if(i){s.set(i(u,n,f),l+d)}else{var p=o.length,v=[];for(var g;g<p;g+=1){v[g]=o[g](u,n,f)}var m=h(v.concat());s.set(v[m],l+d)}f=u}return s};var a=function t(e){var r=Array.apply([],e);r.unshift(0);return r};var s=function t(e,r){var n=[],i=e.length,a;n[0]=1;for(var s=0;s<i;s+=1){a=e[s-r]||0;n[s+1]=e[s]-a+256&255}return n};var o=function t(e,r,n){var i=[],a=e.length,s;i[0]=2;for(var o=0;o<a;o+=1){s=n&&n[o]||0;i[o+1]=e[o]-s+256&255}return i};var u=function t(e,r,n){var i=[],a=e.length,s,o;i[0]=3;for(var u=0;u<a;u+=1){s=e[u-r]||0;o=n&&n[u]||0;i[u+1]=e[u]+256-(s+o>>>1)&255}return i};var f=function t(e,r,n){var i=[],a=e.length,s,o,u,f;i[0]=4;for(var c=0;c<a;c+=1){s=e[c-r]||0;o=n&&n[c]||0;u=n&&n[c-r]||0;f=l(s,o,u);i[c+1]=e[c]-f+256&255}return i};var l=function t(e,r,n){if(e===r&&r===n){return e}var i=Math.abs(r-n),a=Math.abs(e-n),s=Math.abs(e+r-n-n);return i<=a&&i<=s?e:a<=s?r:n};var c=function t(){return[a,s,o,u,f]};var h=function t(e){var r=e.map(function(t){return t.reduce(function(t,e){return t+Math.abs(e)},0)});return r.indexOf(Math.min.apply(null,r))};var d=function e(r){var n;switch(r){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12;break}return n};t.processPNG=function(t,r,i,a){var s,o=this.decode.FLATE_DECODE,u,f,l="",c,h,p,v,g,m,b,y,w,N,L,A;if(this.__addimage__.isArrayBuffer(t))t=new Uint8Array(t);if(this.__addimage__.isArrayBufferView(t)){f=new nr(t);t=f.imgData;u=f.bits;s=f.colorSpace;h=f.colors;if([4,6].indexOf(f.colorType)!==-1){if(f.bits===8){g=f.pixelBitlength==32?new Uint32Array(f.decodePixels().buffer):f.pixelBitlength==16?new Uint16Array(f.decodePixels().buffer):new Uint8Array(f.decodePixels().buffer);m=g.length;y=new Uint8Array(m*f.colors);b=new Uint8Array(m);var x=f.pixelBitlength-f.bits;L=0;A=0;var S;for(;L<m;L++){N=g[L];S=0;while(S<x){y[A++]=N>>>S&255;S=S+f.bits}b[L]=N>>>S&255}}if(f.bits===16){g=new Uint32Array(f.decodePixels().buffer);m=g.length;y=new Uint8Array(m*(32/f.pixelBitlength)*f.colors);b=new Uint8Array(m*(32/f.pixelBitlength));w=f.colors>1;L=0;A=0;var _=0;while(L<m){N=g[L++];y[A++]=N>>>0&255;if(w){y[A++]=N>>>16&255;N=g[L++];y[A++]=N>>>0&255}b[_++]=N>>>16&255}u=8}if(e(a)){t=n(y,f.width*f.colors,f.colors,a);v=n(b,f.width,1,a)}else{t=y;v=b;o=undefined}}if(f.colorType===3){s=this.color_spaces.INDEXED;p=f.palette;if(f.transparency.indexed){var P=f.transparency.indexed;var k=0;L=0;m=P.length;for(;L<m;++L){k+=P[L]}k=k/255;if(k===m-1&&P.indexOf(0)!==-1){c=[P.indexOf(0)]}else if(k!==m){g=f.decodePixels();b=new Uint8Array(g.length);L=0;m=g.length;for(;L<m;L++){b[L]=P[g[L]]}v=n(b,f.width,1)}}}var F=d(a);if(o===this.decode.FLATE_DECODE){l="/Predictor "+F+" "}l+="/Colors "+h+" /BitsPerComponent "+u+" /Columns "+f.width;if(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){t=this.__addimage__.arrayBufferToBinaryString(t)}if(v&&this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v)){v=this.__addimage__.arrayBufferToBinaryString(v)}return{alias:i,data:t,index:r,filter:o,decodeParameters:l,transparency:c,palette:p,sMask:v,predictor:F,width:f.width,height:f.height,bitsPerComponent:u,colorSpace:s}}}})(z.API);
/**
   * @license
   * (c) Dean McNamee <dean@gmail.com>, 2013.
   *
   * https://github.com/deanm/omggif
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to
   * deal in the Software without restriction, including without limitation the
   * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
   * sell copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
   * IN THE SOFTWARE.
   *
   * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
   * including animation and compression.  It does not rely on any specific
   * underlying system, so should run in the browser, Node, or Plask.
   */function ir(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!==56||t[e++]!==97){throw new Error("Invalid GIF 87a/89a header.")}var r=t[e++]|t[e++]<<8;var n=t[e++]|t[e++]<<8;var i=t[e++];var a=i>>7;var s=i&7;var o=1<<s+1;var u=t[e++];t[e++];var f=null;var l=null;if(a){f=e;l=o;e+=o*3}var c=true;var h=[];var d=0;var p=null;var v=0;var g=null;this.width=r;this.height=n;while(c&&e<t.length){switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0){e+=14;g=t[e++]|t[e++]<<8;e++}else{e+=12;while(true){var m=t[e++];if(!(m>=0))throw Error("Invalid block size");if(m===0)break;e+=m}}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];d=t[e++]|t[e++]<<8;p=t[e++];if((b&1)===0)p=null;v=b>>2&7;e++;break;case 254:while(true){var m=t[e++];if(!(m>=0))throw Error("Invalid block size");if(m===0)break;e+=m}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8;var w=t[e++]|t[e++]<<8;var N=t[e++]|t[e++]<<8;var L=t[e++]|t[e++]<<8;var A=t[e++];var x=A>>7;var S=A>>6&1;var _=A&7;var P=1<<_+1;var k=f;var F=l;var I=false;if(x){var I=true;k=e;F=P;e+=P*3}var C=e;e++;while(true){var m=t[e++];if(!(m>=0))throw Error("Invalid block size");if(m===0)break;e+=m}h.push({x:y,y:w,width:N,height:L,has_local_palette:I,palette_offset:k,palette_size:F,data_offset:C,data_length:e-C,transparent_index:p,interlaced:!!S,delay:d,disposal:v});break;case 59:c=false;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}}this.numFrames=function(){return h.length};this.loopCount=function(){return g};this.frameInfo=function(t){if(t<0||t>=h.length)throw new Error("Frame index out of range.");return h[t]};this.decodeAndBlitFrameBGRA=function(e,n){var i=this.frameInfo(e);var a=i.width*i.height;var s=new Uint8Array(a);ar(t,i.data_offset,s,a);var o=i.palette_offset;var u=i.transparent_index;if(u===null)u=256;var f=i.width;var l=r-f;var c=f;var h=(i.y*r+i.x)*4;var d=((i.y+i.height)*r+i.x)*4;var p=h;var v=l*4;if(i.interlaced===true){v+=r*4*7}var g=8;for(var m=0,b=s.length;m<b;++m){var y=s[m];if(c===0){p+=v;c=f;if(p>=d){v=l*4+r*4*(g-1);p=h+(f+l)*(g<<1);g>>=1}}if(y===u){p+=4}else{var w=t[o+y*3];var N=t[o+y*3+1];var L=t[o+y*3+2];n[p++]=L;n[p++]=N;n[p++]=w;n[p++]=255}--c}};this.decodeAndBlitFrameRGBA=function(e,n){var i=this.frameInfo(e);var a=i.width*i.height;var s=new Uint8Array(a);ar(t,i.data_offset,s,a);var o=i.palette_offset;var u=i.transparent_index;if(u===null)u=256;var f=i.width;var l=r-f;var c=f;var h=(i.y*r+i.x)*4;var d=((i.y+i.height)*r+i.x)*4;var p=h;var v=l*4;if(i.interlaced===true){v+=r*4*7}var g=8;for(var m=0,b=s.length;m<b;++m){var y=s[m];if(c===0){p+=v;c=f;if(p>=d){v=l*4+r*4*(g-1);p=h+(f+l)*(g<<1);g>>=1}}if(y===u){p+=4}else{var w=t[o+y*3];var N=t[o+y*3+1];var L=t[o+y*3+2];n[p++]=w;n[p++]=N;n[p++]=L;n[p++]=255}--c}}}function ar(t,e,r,n){var i=t[e++];var a=1<<i;var o=a+1;var u=o+1;var f=i+1;var l=(1<<f)-1;var c=0;var h=0;var d=0;var p=t[e++];var v=new Int32Array(4096);var g=null;while(true){while(c<16){if(p===0)break;h|=t[e++]<<c;c+=8;if(p===1){p=t[e++]}else{--p}}if(c<f)break;var m=h&l;h>>=f;c-=f;if(m===a){u=o+1;f=i+1;l=(1<<f)-1;g=null;continue}else if(m===o){break}var b=m<u?m:g;var y=0;var w=b;while(w>a){w=v[w]>>8;++y}var N=w;var L=d+y+(b!==m?1:0);if(L>n){s.log("Warning, gif stream longer than expected.");return}r[d++]=N;d+=y;var A=d;if(b!==m)r[d++]=N;w=b;while(y--){w=v[w];r[--A]=w&255;w>>=8}if(g!==null&&u<4096){v[u++]=g<<8|N;if(u>=l+1&&f<12){++f;l=l<<1|1}}g=m}if(d!==n){s.log("Warning, gif stream shorter than expected.")}return r}
/**
   * @license
    Copyright (c) 2008, Adobe Systems Incorporated
    All rights reserved.

    Redistribution and use in source and binary forms, with or without 
    modification, are permitted provided that the following conditions are
    met:

    * Redistributions of source code must retain the above copyright notice, 
      this list of conditions and the following disclaimer.
    
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the 
      documentation and/or other materials provided with the distribution.
    
    * Neither the name of Adobe Systems Incorporated nor the names of its 
      contributors may be used to endorse or promote products derived from 
      this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
    IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
    THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
    PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
    CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
    PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
    PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */function sr(t){var e=Math.floor;var r=new Array(64);var n=new Array(64);var i=new Array(64);var a=new Array(64);var s;var o;var u;var f;var l=new Array(65535);var c=new Array(65535);var h=new Array(64);var d=new Array(64);var p=[];var v=0;var g=7;var m=new Array(64);var b=new Array(64);var y=new Array(64);var w=new Array(256);var N=new Array(2048);var L;var A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var S=[0,1,2,3,4,5,6,7,8,9,10,11];var _=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];var P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250];var k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var F=[0,1,2,3,4,5,6,7,8,9,10,11];var I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];var C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function j(t){var s=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var o=0;o<64;o++){var u=e((s[o]*t+50)/100);u=Math.min(Math.max(u,1),255);r[A[o]]=u}var f=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var l=0;l<64;l++){var c=e((f[l]*t+50)/100);c=Math.min(Math.max(c,1),255);n[A[l]]=c}var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];var d=0;for(var p=0;p<8;p++){for(var v=0;v<8;v++){i[d]=1/(r[A[d]]*h[p]*h[v]*8);a[d]=1/(n[A[d]]*h[p]*h[v]*8);d++}}}function O(t,e){var r=0;var n=0;var i=new Array;for(var a=1;a<=16;a++){for(var s=1;s<=t[a];s++){i[e[n]]=[];i[e[n]][0]=r;i[e[n]][1]=a;n++;r++}r*=2}return i}function B(){s=O(x,S);o=O(k,F);u=O(_,P);f=O(I,C)}function M(){var t=1;var e=2;for(var r=1;r<=15;r++){for(var n=t;n<e;n++){c[32767+n]=r;l[32767+n]=[];l[32767+n][1]=r;l[32767+n][0]=n}for(var i=-(e-1);i<=-t;i++){c[32767+i]=r;l[32767+i]=[];l[32767+i][1]=r;l[32767+i][0]=e-1+i}t<<=1;e<<=1}}function E(){for(var t=0;t<256;t++){N[t]=19595*t;N[t+256>>0]=38470*t;N[t+512>>0]=7471*t+32768;N[t+768>>0]=-11059*t;N[t+1024>>0]=-21709*t;N[t+1280>>0]=32768*t+8421375;N[t+1536>>0]=-27439*t;N[t+1792>>0]=-5329*t}}function q(t){var e=t[0];var r=t[1]-1;while(r>=0){if(e&1<<r){v|=1<<g}r--;g--;if(g<0){if(v==255){D(255);D(0)}else{D(v)}g=7;v=0}}}function D(t){p.push(t)}function R(t){D(t>>8&255);D(t&255)}function T(t,e){var r,n,i,a,s,o,u,f;var l=0;var c;var d=8;var p=64;for(c=0;c<d;++c){r=t[l];n=t[l+1];i=t[l+2];a=t[l+3];s=t[l+4];o=t[l+5];u=t[l+6];f=t[l+7];var v=r+f;var g=r-f;var m=n+u;var b=n-u;var y=i+o;var w=i-o;var N=a+s;var L=a-s;var A=v+N;var x=v-N;var S=m+y;var _=m-y;t[l]=A+S;t[l+4]=A-S;var P=(_+x)*.707106781;t[l+2]=x+P;t[l+6]=x-P;A=L+w;S=w+b;_=b+g;var k=(A-_)*.382683433;var F=.5411961*A+k;var I=1.306562965*_+k;var C=S*.707106781;var j=g+C;var O=g-C;t[l+5]=O+F;t[l+3]=O-F;t[l+1]=j+I;t[l+7]=j-I;l+=8}l=0;for(c=0;c<d;++c){r=t[l];n=t[l+8];i=t[l+16];a=t[l+24];s=t[l+32];o=t[l+40];u=t[l+48];f=t[l+56];var B=r+f;var M=r-f;var E=n+u;var q=n-u;var D=i+o;var R=i-o;var T=a+s;var U=a-s;var z=B+T;var H=B-T;var W=E+D;var V=E-D;t[l]=z+W;t[l+32]=z-W;var G=(V+H)*.707106781;t[l+16]=H+G;t[l+48]=H-G;z=U+R;W=R+q;V=q+M;var Y=(z-V)*.382683433;var J=.5411961*z+Y;var X=1.306562965*V+Y;var K=W*.707106781;var Z=M+K;var $=M-K;t[l+40]=$+J;t[l+24]=$-J;t[l+8]=Z+X;t[l+56]=Z-X;l++}var Q;for(c=0;c<p;++c){Q=t[c]*e[c];h[c]=Q>0?Q+.5|0:Q-.5|0}return h}function U(){R(65504);R(16);D(74);D(70);D(73);D(70);D(0);D(1);D(1);D(0);R(1);R(1);D(0);D(0)}function z(t,e){R(65472);R(17);D(8);R(e);R(t);D(3);D(1);D(17);D(0);D(2);D(17);D(1);D(3);D(17);D(1)}function H(){R(65499);R(132);D(0);for(var t=0;t<64;t++){D(r[t])}D(1);for(var e=0;e<64;e++){D(n[e])}}function W(){R(65476);R(418);D(0);for(var t=0;t<16;t++){D(x[t+1])}for(var e=0;e<=11;e++){D(S[e])}D(16);for(var r=0;r<16;r++){D(_[r+1])}for(var n=0;n<=161;n++){D(P[n])}D(1);for(var i=0;i<16;i++){D(k[i+1])}for(var a=0;a<=11;a++){D(F[a])}D(17);for(var s=0;s<16;s++){D(I[s+1])}for(var o=0;o<=161;o++){D(C[o])}}function V(){R(65498);R(12);D(3);D(1);D(0);D(2);D(17);D(3);D(17);D(0);D(63);D(0)}function G(t,e,r,n,i){var a=i[0];var s=i[240];var o;var u=16;var f=63;var h=64;var p=T(t,e);for(var v=0;v<h;++v){d[A[v]]=p[v]}var g=d[0]-r;r=d[0];if(g==0){q(n[0])}else{o=32767+g;q(n[c[o]]);q(l[o])}var m=63;while(m>0&&d[m]==0){m--}if(m==0){q(a);return r}var b=1;var y;while(b<=m){var w=b;while(d[b]==0&&b<=m){++b}var N=b-w;if(N>=u){y=N>>4;for(var L=1;L<=y;++L){q(s)}N=N&15}o=32767+d[b];q(i[(N<<4)+c[o]]);q(l[o]);b++}if(m!=f){q(a)}return r}function Y(){var t=String.fromCharCode;for(var e=0;e<256;e++){w[e]=t(e)}}this.encode=function(t,e){if(e)J(e);p=new Array;v=0;g=7;R(65496);U();H();z(t.width,t.height);W();V();var r=0;var n=0;var l=0;v=0;g=7;this.encode.displayName="_encode_";var c=t.data;var h=t.width;var d=t.height;var w=h*4;var L,A=0;var x,S,_;var P,k,F,I,C;while(A<d){L=0;while(L<w){P=w*A+L;F=-1;I=0;for(C=0;C<64;C++){I=C>>3;F=(C&7)*4;k=P+I*w+F;if(A+I>=d){k-=w*(A+1+I-d)}if(L+F>=w){k-=L+F-w+4}x=c[k++];S=c[k++];_=c[k++];m[C]=(N[x]+N[S+256>>0]+N[_+512>>0]>>16)-128;b[C]=(N[x+768>>0]+N[S+1024>>0]+N[_+1280>>0]>>16)-128;y[C]=(N[x+1280>>0]+N[S+1536>>0]+N[_+1792>>0]>>16)-128}r=G(m,i,r,s,u);n=G(b,a,n,o,f);l=G(y,a,l,o,f);L+=32}A+=8}if(g>=0){var j=[];j[1]=g+1;j[0]=(1<<g+1)-1;q(j)}R(65497);return new Uint8Array(p)};function J(t){t=Math.min(Math.max(t,1),100);if(L==t)return;var e=t<50?Math.floor(5e3/t):Math.floor(200-t*2);j(e);L=t}function X(){t=t||50;Y();B();M();E();J(t)}X()}
/**
   * @license
   * Copyright (c) 2017 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.processGIF89A=function(e,r,n,i){var a=new ir(e);var s=a.width,o=a.height;var u=100;var f=[];a.decodeAndBlitFrameRGBA(0,f);var l={data:f,width:s,height:o};var c=new sr(u);var h=c.encode(l,u);return t.processJPEG.call(this,h,r,n,i)};t.processGIF87A=t.processGIF89A})(z.API);function or(t,e){this.pos=0;this.buffer=t;this.datav=new DataView(t.buffer);this.is_with_alpha=!!e;this.bottom_up=true;this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]);this.pos+=2;if(["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader();this.parseBGR()}or.prototype.parseHeader=function(){this.fileSize=this.datav.getUint32(this.pos,true);this.pos+=4;this.reserved=this.datav.getUint32(this.pos,true);this.pos+=4;this.offset=this.datav.getUint32(this.pos,true);this.pos+=4;this.headerSize=this.datav.getUint32(this.pos,true);this.pos+=4;this.width=this.datav.getUint32(this.pos,true);this.pos+=4;this.height=this.datav.getInt32(this.pos,true);this.pos+=4;this.planes=this.datav.getUint16(this.pos,true);this.pos+=2;this.bitPP=this.datav.getUint16(this.pos,true);this.pos+=2;this.compress=this.datav.getUint32(this.pos,true);this.pos+=4;this.rawSize=this.datav.getUint32(this.pos,true);this.pos+=4;this.hr=this.datav.getUint32(this.pos,true);this.pos+=4;this.vr=this.datav.getUint32(this.pos,true);this.pos+=4;this.colors=this.datav.getUint32(this.pos,true);this.pos+=4;this.importantColors=this.datav.getUint32(this.pos,true);this.pos+=4;if(this.bitPP===16&&this.is_with_alpha){this.bitPP=15}if(this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,true);var n=this.datav.getUint8(this.pos++,true);var i=this.datav.getUint8(this.pos++,true);var a=this.datav.getUint8(this.pos++,true);this.palette[e]={red:i,green:n,blue:r,quad:a}}}if(this.height<0){this.height*=-1;this.bottom_up=false}};or.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP;var e=this.width*this.height*4;this.data=new Uint8Array(e);this[t]()}catch(t){s.log("bit decode error:"+t)}};or.prototype.bit1=function(){var t=Math.ceil(this.width/8);var e=t%4;var r;for(r=this.height-1;r>=0;r--){var n=this.bottom_up?r:this.height-1-r;for(var i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,true);var s=n*this.width*4+i*8*4;for(var o=0;o<8;o++){if(i*8+o<this.width){var u=this.palette[a>>7-o&1];this.data[s+o*4]=u.blue;this.data[s+o*4+1]=u.green;this.data[s+o*4+2]=u.red;this.data[s+o*4+3]=255}else{break}}}if(e!==0){this.pos+=4-e}}};or.prototype.bit4=function(){var t=Math.ceil(this.width/2);var e=t%4;for(var r=this.height-1;r>=0;r--){var n=this.bottom_up?r:this.height-1-r;for(var i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,true);var s=n*this.width*4+i*2*4;var o=a>>4;var u=a&15;var f=this.palette[o];this.data[s]=f.blue;this.data[s+1]=f.green;this.data[s+2]=f.red;this.data[s+3]=255;if(i*2+1>=this.width)break;f=this.palette[u];this.data[s+4]=f.blue;this.data[s+4+1]=f.green;this.data[s+4+2]=f.red;this.data[s+4+3]=255}if(e!==0){this.pos+=4-e}}};or.prototype.bit8=function(){var t=this.width%4;for(var e=this.height-1;e>=0;e--){var r=this.bottom_up?e:this.height-1-e;for(var n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,true);var a=r*this.width*4+n*4;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red;this.data[a+1]=s.green;this.data[a+2]=s.blue;this.data[a+3]=255}else{this.data[a]=255;this.data[a+1]=255;this.data[a+2]=255;this.data[a+3]=255}}if(t!==0){this.pos+=4-t}}};or.prototype.bit15=function(){var t=this.width%3;var e=parseInt("11111",2),r=e;for(var n=this.height-1;n>=0;n--){var i=this.bottom_up?n:this.height-1-n;for(var a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,true);this.pos+=2;var o=(s&r)/r*255|0;var u=(s>>5&r)/r*255|0;var f=(s>>10&r)/r*255|0;var l=s>>15?255:0;var c=i*this.width*4+a*4;this.data[c]=f;this.data[c+1]=u;this.data[c+2]=o;this.data[c+3]=l}this.pos+=t}};or.prototype.bit16=function(){var t=this.width%3;var e=parseInt("11111",2),r=e;var n=parseInt("111111",2),i=n;for(var a=this.height-1;a>=0;a--){var s=this.bottom_up?a:this.height-1-a;for(var o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,true);this.pos+=2;var f=255;var l=(u&r)/r*255|0;var c=(u>>5&i)/i*255|0;var h=(u>>11)/r*255|0;var d=s*this.width*4+o*4;this.data[d]=h;this.data[d+1]=c;this.data[d+2]=l;this.data[d+3]=f}this.pos+=t}};or.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){var e=this.bottom_up?t:this.height-1-t;for(var r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,true);var i=this.datav.getUint8(this.pos++,true);var a=this.datav.getUint8(this.pos++,true);var s=e*this.width*4+r*4;this.data[s]=a;this.data[s+1]=i;this.data[s+2]=n;this.data[s+3]=255}this.pos+=this.width%4}};or.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--){var e=this.bottom_up?t:this.height-1-t;for(var r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,true);var i=this.datav.getUint8(this.pos++,true);var a=this.datav.getUint8(this.pos++,true);var s=this.datav.getUint8(this.pos++,true);var o=e*this.width*4+r*4;this.data[o]=a;this.data[o+1]=i;this.data[o+2]=n;this.data[o+3]=s}}};or.prototype.getData=function(){return this.data};
/**
   * @license
   * Copyright (c) 2018 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.processBMP=function(e,r,n,i){var a=new or(e,false);var s=a.width,o=a.height;var u=100;var f=a.getData();var l={data:f,width:s,height:o};var c=new sr(u);var h=c.encode(l,u);return t.processJPEG.call(this,h,r,n,i)}})(z.API);function ur(t){function e(t){if(!t)throw Error("assert :P")}function r(t,e,r){for(var n=0;4>n;n++){if(t[e+n]!=r.charCodeAt(n))return!0}return!1}function n(t,e,r,n,i){for(var a=0;a<i;a++){t[e+a]=r[n+a]}}function i(t,e,r,n){for(var i=0;i<n;i++){t[e+i]=r}}function a(t){return new Int32Array(t)}function s(t,e){for(var r=[],n=0;n<t;n++){r.push(new e)}return r}function o(){function t(e,r,n){for(var i=n[r],a=0;a<i;a++){e.push(n.length>r+1?[]:0);if(n.length<r+1)break;t(e[a],r+1,n)}}var e=[];t(e,0,[3,11]);return e}function u(t,e){function r(t,n,i){for(var a=i[n],s=0;s<a;s++){t.push(i.length>n+1?[]:new e);if(i.length<n+1)break;r(t[s],n+1,i)}}var n=[];r(n,0,t);return n}var f=function t(){var f=this;function l(t,e){for(var r=1<<e-1>>>0;t&r;){r>>>=1}return r?(t&r-1)+r:t}function c(t,r,n,i,a){e(!(i%n));do{i-=n,t[r+i]=a}while(0<i)}function h(t,r,n,i,s,o){var u=r,f=1<<n,h,d,v=a(16),g=a(16);e(0!=s);e(null!=i);e(null!=t);e(0<n);for(d=0;d<s;++d){if(15<i[d])return 0;++v[i[d]]}if(v[0]==s)return 0;g[1]=0;for(h=1;15>h;++h){if(v[h]>1<<h)return 0;g[h+1]=g[h]+v[h]}for(d=0;d<s;++d){h=i[d],0<i[d]&&(o[g[h]++]=d)}if(1==g[15])return i=new p,i.g=0,i.value=o[0],c(t,u,1,f,i),f;var m=-1,b=f-1,y=0,w=1,N=1,L,A=1<<n;d=0;h=1;for(s=2;h<=n;++h,s<<=1){N<<=1;w+=N;N-=v[h];if(0>N)return 0;for(;0<v[h];--v[h]){i=new p,i.g=h,i.value=o[d++],c(t,u+y,s,A,i),y=l(y,h)}}h=n+1;for(s=2;15>=h;++h,s<<=1){N<<=1;w+=N;N-=v[h];if(0>N)return 0;for(;0<v[h];--v[h]){i=new p;if((y&b)!=m){u+=A;m=h;for(L=1<<m-n;15>m;){L-=v[m];if(0>=L)break;++m;L<<=1}L=m-n;A=1<<L;f+=A;m=y&b;t[r+m].g=L+n;t[r+m].value=u-r-m}i.g=h-n;i.value=o[d++];c(t,u+(y>>n),s,A,i);y=l(y,h)}}return w!=2*g[15]-1?0:f}function d(t,r,n,i,s){e(2328>=s);if(512>=s)var o=a(512);else if(o=a(s),null==o)return 0;return h(t,r,n,i,s,o)}function p(){this.value=this.g=0}function v(){this.value=this.g=0}function g(){this.G=s(5,p);this.H=a(5);this.jc=this.Qb=this.qb=this.nd=0;this.pd=s(Hr,v)}function m(t,r,n,i){e(null!=t);e(null!=r);e(2147483648>i);t.Ca=254;t.I=0;t.b=-8;t.Ka=0;t.oa=r;t.pa=n;t.Jd=r;t.Yc=n+i;t.Zc=4<=i?n+i-4+1:n;F(t)}function b(t,e){for(var r=0;0<e--;){r|=C(t,128)<<e}return r}function y(t,e){var r=b(t,e);return I(t)?-r:r}function w(t,r,n,i){var a,s=0;e(null!=t);e(null!=r);e(4294967288>i);t.Sb=i;t.Ra=0;t.u=0;t.h=0;4<i&&(i=4);for(a=0;a<i;++a){s+=r[n+a]<<8*a}t.Ra=s;t.bb=i;t.oa=r;t.pa=n}function N(t){for(;8<=t.u&&t.bb<t.Sb;){t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Gr-8>>>0,++t.bb,t.u-=8}_(t)&&(t.h=1,t.u=0)}function L(t,r){e(0<=r);if(!t.h&&r<=Vr){var n=S(t)&Wr[r];t.u+=r;N(t);return n}t.h=1;return t.u=0}function A(){this.b=this.Ca=this.I=0;this.oa=[];this.pa=0;this.Jd=[];this.Yc=0;this.Zc=[];this.Ka=0}function x(){this.Ra=0;this.oa=[];this.h=this.u=this.bb=this.Sb=this.pa=0}function S(t){return t.Ra>>>(t.u&Gr-1)>>>0}function _(t){e(t.bb<=t.Sb);return t.h||t.bb==t.Sb&&t.u>Gr}function P(t,e){t.u=e;t.h=_(t)}function k(t){t.u>=Yr&&(e(t.u>=Yr),N(t))}function F(t){e(null!=t&&null!=t.oa);t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function I(t){return b(t,1)}function C(t,e){var r=t.Ca;0>t.b&&F(t);var n=t.b,i=r*e>>>8,a=(t.I>>>n>i)+0;a?(r-=i,t.I-=i+1<<n>>>0):r=i+1;n=r;for(i=0;256<=n;){i+=8,n>>=8}n=7^i+Jr[n];t.b-=n;t.Ca=(r<<n)-1;return a}function j(t,e,r){t[e+0]=r>>24&255;t[e+1]=r>>16&255;t[e+2]=r>>8&255;t[e+3]=r>>0&255}function O(t,e){return t[e+0]<<0|t[e+1]<<8}function B(t,e){return O(t,e)|t[e+2]<<16}function M(t,e){return O(t,e)|O(t,e+2)<<16}function E(t,r){var n=1<<r;e(null!=t);e(0<r);t.X=a(n);if(null==t.X)return 0;t.Mb=32-r;t.Xa=r;return 1}function q(t,r){e(null!=t);e(null!=r);e(t.Xa==r.Xa);n(r.X,0,t.X,0,1<<r.Xa)}function D(){this.X=[];this.Xa=this.Mb=0}function R(t,r,n,i){e(null!=n);e(null!=i);var a=n[0],s=i[0];0==a&&(a=(t*s+r/2)/r);0==s&&(s=(r*a+t/2)/t);if(0>=a||0>=s)return 0;n[0]=a;i[0]=s;return 1}function T(t,e){return t+(1<<e)-1>>>e}function U(t,e){return((t&4278255360)+(e&4278255360)>>>0&4278255360)+((t&16711935)+(e&16711935)>>>0&16711935)>>>0}function z(t,e){f[e]=function(e,r,n,i,a,s,o){var u;for(u=0;u<a;++u){var l=f[t](s[o+u-1],n,i+u);s[o+u]=U(e[r+u],l)}}}function H(){this.ud=this.hd=this.jd=0}function W(t,e){return(((t^e)&4278124286)>>>1)+(t&e)>>>0}function V(t){if(0<=t&&256>t)return t;if(0>t)return 0;if(255<t)return 255}function G(t,e){return V(t+(t-e+.5>>1))}function Y(t,e,r){return Math.abs(e-r)-Math.abs(t-r)}function J(t,e,r,n,i,a,s){n=a[s-1];for(r=0;r<i;++r){a[s+r]=n=U(t[e+r],n)}}function X(t,e,r,n,i){var a;for(a=0;a<r;++a){var s=t[e+a],o=s>>8&255,u=s&16711935,u=u+((o<<16)+o),u=u&16711935;n[i+a]=(s&4278255360)+u>>>0}}function K(t,e){e.jd=t>>0&255;e.hd=t>>8&255;e.ud=t>>16&255}function Z(t,e,r,n,i,a){var s;for(s=0;s<n;++s){var o=e[r+s],u=o>>>8,f=o>>>16,l=o,f=f+((t.jd<<24>>24)*(u<<24>>24)>>>5),f=f&255,l=l+((t.hd<<24>>24)*(u<<24>>24)>>>5),l=l+((t.ud<<24>>24)*(f<<24>>24)>>>5),l=l&255;i[a+s]=(o&4278255360)+(f<<16)+l}}function $(t,e,r,n,i){f[e]=function(t,e,r,a,s,o,u,f,l){for(a=u;a<f;++a){for(u=0;u<l;++u){s[o++]=i(r[n(t[e++])])}}};f[t]=function(t,e,a,s,o,u,l){var c=8>>t.b,h=t.Ea,d=t.K[0],p=t.w;if(8>c)for(t=(1<<t.b)-1,p=(1<<c)-1;e<a;++e){var v=0,g;for(g=0;g<h;++g){g&t||(v=n(s[o++])),u[l++]=i(d[v&p]),v>>=c}}else f["VP8LMapColor"+r](s,o,d,p,u,l,e,a,h)}}function Q(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>16&255;n[i++]=a>>8&255;n[i++]=a>>0&255}}function tt(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>16&255;n[i++]=a>>8&255;n[i++]=a>>0&255;n[i++]=a>>24&255}}function et(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++],s=a>>16&240|a>>12&15,a=a>>0&240|a>>28&15;n[i++]=s;n[i++]=a}}function rt(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++],s=a>>16&248|a>>13&7,a=a>>5&224|a>>3&31;n[i++]=s;n[i++]=a}}function nt(t,e,r,n,i){for(r=e+r;e<r;){var a=t[e++];n[i++]=a>>0&255;n[i++]=a>>8&255;n[i++]=a>>16&255}}function it(t,e,r,i,a,s){if(0==s)for(r=e+r;e<r;){s=t[e++],j(i,(s[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),a+=32}else n(i,a,t,e,r)}function at(t,e){f[e][0]=f[t+"0"];f[e][1]=f[t+"1"];f[e][2]=f[t+"2"];f[e][3]=f[t+"3"];f[e][4]=f[t+"4"];f[e][5]=f[t+"5"];f[e][6]=f[t+"6"];f[e][7]=f[t+"7"];f[e][8]=f[t+"8"];f[e][9]=f[t+"9"];f[e][10]=f[t+"10"];f[e][11]=f[t+"11"];f[e][12]=f[t+"12"];f[e][13]=f[t+"13"];f[e][14]=f[t+"0"];f[e][15]=f[t+"0"]}function st(t){return t==_n||t==Pn||t==kn||t==Fn}function ot(){this.eb=[];this.size=this.A=this.fb=0}function ut(){this.y=[];this.f=[];this.ea=[];this.F=[];this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ft(){this.Rd=this.height=this.width=this.S=0;this.f={};this.f.RGBA=new ot;this.f.kb=new ut;this.sd=null}function lt(){this.width=[0];this.height=[0];this.Pd=[0];this.Qd=[0];this.format=[0]}function ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ht(t){alert("todo:WebPSamplerProcessPlane");return t.T}function dt(t,e){var r=t.T,i=e.ba.f.RGBA,a=i.eb,s=i.fb+t.ka*i.A,o=Li[e.ba.S],u=t.y,f=t.O,l=t.f,c=t.N,h=t.ea,d=t.W,p=e.cc,v=e.dc,g=e.Mc,m=e.Nc,b=t.ka,y=t.ka+t.T,w=t.U,N=w+1>>1;0==b?o(u,f,null,null,l,c,h,d,l,c,h,d,a,s,null,null,w):(o(e.ec,e.fc,u,f,p,v,g,m,l,c,h,d,a,s-i.A,a,s,w),++r);for(;b+2<y;b+=2){p=l,v=c,g=h,m=d,c+=t.Rc,d+=t.Rc,s+=2*i.A,f+=2*t.fa,o(u,f-t.fa,u,f,p,v,g,m,l,c,h,d,a,s-i.A,a,s,w)}f+=t.fa;t.j+y<t.o?(n(e.ec,e.fc,u,f,w),n(e.cc,e.dc,l,c,N),n(e.Mc,e.Nc,h,d,N),r--):y&1||o(u,f,null,null,l,c,h,d,l,c,h,d,a,s+i.A,null,null,w);return r}function pt(t,r,n){var i=t.F,a=[t.J];if(null!=i){var s=t.U,o=r.ba.S,u=o==An||o==kn;r=r.ba.f.RGBA;var f=[0],l=t.ka;f[0]=t.T;t.Kb&&(0==l?--f[0]:(--l,a[0]-=t.width),t.j+t.ka+t.T==t.o&&(f[0]=t.o-t.j-l));var c=r.eb,l=r.fb+l*r.A;t=wi(i,a[0],t.width,s,f,c,l+(u?0:3),r.A);e(n==f);t&&st(o)&&bi(c,l,u,s,f,r.A)}return 0}function vt(t){var e=t.ma,r=e.ba.S,n=11>r,i=r==wn||r==Ln||r==An||r==xn||12==r||st(r);e.memory=null;e.Ib=null;e.Jb=null;e.Nd=null;if(!Tr(e.Oa,t,i?11:12))return 0;i&&st(r)&&Ar();if(t.da)alert("todo:use_scaling");else{if(n){if(e.Ib=ht,t.Kb){r=t.U+1>>1;e.memory=a(t.U+2*r);if(null==e.memory)return 0;e.ec=e.memory;e.fc=0;e.cc=e.ec;e.dc=e.fc+t.U;e.Mc=e.cc;e.Nc=e.dc+r;e.Ib=dt;Ar()}}else alert("todo:EmitYUV");i&&(e.Jb=pt,n&&Nr())}if(n&&!Ei){for(t=0;256>t;++t){qi[t]=89858*(t-128)+Ci>>Ii,Ti[t]=-22014*(t-128)+Ci,Ri[t]=-45773*(t-128),Di[t]=113618*(t-128)+Ci>>Ii}for(t=ji;t<Oi;++t){e=76283*(t-16)+Ci>>Ii,Ui[t-ji]=Xt(e,255),zi[t-ji]=Xt(e+8>>4,15)}Ei=1}return 1}function gt(t){var r=t.ma,n=t.U,i=t.T;e(!(t.ka&1));if(0>=n||0>=i)return 0;n=r.Ib(t,r);null!=r.Jb&&r.Jb(t,r,n);r.Dc+=n;return 1}function mt(t){t.ma.memory=null}function bt(t,e,r,n){if(47!=L(t,8))return 0;e[0]=L(t,14)+1;r[0]=L(t,14)+1;n[0]=L(t,1);return 0!=L(t,3)?0:!t.h}function yt(t,e){if(4>t)return t+1;var r=t-2>>1;return(2+(t&1)<<r)+L(e,r)+1}function wt(t,e){if(120<e)return e-120;var r=Mn[e-1],r=(r>>4)*t+(8-(r&15));return 1<=r?r:1}function Nt(t,e,r){var n=S(r);e+=n&255;var i=t[e].g-8;0<i&&(P(r,r.u+8),n=S(r),e+=t[e].value,e+=n&(1<<i)-1);P(r,r.u+t[e].g);return t[e].value}function Lt(t,r,n){n.g+=t.g;n.value+=t.value<<r>>>0;e(8>=n.g);return t.g}function At(t,r,n){var i=t.xc;r=0==i?0:t.vc[t.md*(n>>i)+(r>>i)];e(r<t.Wb);return t.Ya[r]}function xt(t,r,i,a){var s=t.ab,o=t.c*r,u=t.C;r=u+r;var f=i,l=a;a=t.Ta;for(i=t.Ua;0<s--;){var c=t.gc[s],h=u,d=r,p=f,v=l,l=a,f=i,g=c.Ea;e(h<d);e(d<=c.nc);switch(c.hc){case 2:en(p,v,(d-h)*g,l,f);break;case 0:var m=c,b=h,y=d,w=l,N=f,L=m.Ea;0==b&&(Xr(p,v,null,null,1,w,N),J(p,v+1,0,0,L-1,w,N+1),v+=L,N+=L,++b);for(var A=1<<m.b,x=A-1,S=T(L,m.b),_=m.K,m=m.w+(b>>m.b)*S;b<y;){var P=_,k=m,F=1;for(Kr(p,v,w,N-L,1,w,N);F<L;){var I=rn[P[k++]>>8&15],C=(F&~x)+A;C>L&&(C=L);I(p,v+ +F,w,N+F-L,C-F,w,N+F);F=C}v+=L;N+=L;++b;b&x||(m+=S)}d!=c.nc&&n(l,f-g,l,f+(d-h-1)*g,g);break;case 1:g=p;y=v;p=c.Ea;v=1<<c.b;w=v-1;N=p&~w;L=p-N;b=T(p,c.b);A=c.K;for(c=c.w+(h>>c.b)*b;h<d;){x=A;S=c;_=new H;m=y+N;for(P=y+p;y<m;){K(x[S++],_),nn(_,g,y,v,l,f),y+=v,f+=v}y<P&&(K(x[S++],_),nn(_,g,y,L,l,f),y+=L,f+=L);++h;h&w||(c+=b)}break;case 3:if(p==l&&v==f&&0<c.b){N=(d-h)*T(c.Ea,c.b);g=f+(d-h)*g-N;y=l;p=g;v=l;w=f;L=N;b=[];for(N=L-1;0<=N;--N){b[N]=v[w+N]}for(N=L-1;0<=N;--N){y[p+N]=b[N]}Zr(c,h,d,l,g,l,f)}else Zr(c,h,d,p,v,l,f)}f=a;l=i}l!=i&&n(a,i,f,l,o)}function St(t,r){var n=t.V,i=t.Ba+t.c*t.C,a=r-t.C;e(r<=t.l.o);e(16>=a);if(0<a){var s=t.l,o=t.Ta,u=t.Ua,f=s.width;xt(t,a,n,i);u=[u];n=t.C;i=r;a=u;e(n<i);e(s.v<s.va);i>s.o&&(i=s.o);if(n<s.j){var l=s.j-n,n=s.j;a[0]+=l*f}n>=i?n=0:(a[0]+=4*s.v,s.ka=n-s.j,s.U=s.va-s.v,s.T=i-n,n=1);if(n){u=u[0];n=t.ca;if(11>n.S){for(var c=n.f.RGBA,i=n.S,a=s.U,s=s.T,l=c.eb,h=c.A,d=s,c=c.fb+t.Ma*c.A;0<d--;){var p=o,v=u,g=a,m=l,b=c;switch(i){case yn:an(p,v,g,m,b);break;case wn:sn(p,v,g,m,b);break;case _n:sn(p,v,g,m,b);bi(m,b,0,g,1,0);break;case Nn:fn(p,v,g,m,b);break;case Ln:it(p,v,g,m,b,1);break;case Pn:it(p,v,g,m,b,1);bi(m,b,0,g,1,0);break;case An:it(p,v,g,m,b,0);break;case kn:it(p,v,g,m,b,0);bi(m,b,1,g,1,0);break;case xn:on(p,v,g,m,b);break;case Fn:on(p,v,g,m,b);yi(m,b,g,1,0);break;case Sn:un(p,v,g,m,b);break;default:e(0)}u+=f;c+=h}t.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=n.height)}}t.C=r;e(t.C<=t.i)}function _t(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var r=t.Ya[e].G,n=t.Ya[e].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function Pt(t,r,n,i,a,s){if(0!=t.Z){var o=t.qd,u=t.rd;for(e(null!=mi[t.Z]);r<n;++r){mi[t.Z](o,u,i,a,i,a,s),o=i,u=a,a+=s}t.qd=o;t.rd=u}}function kt(t,r){var n=t.l.ma,i=0==n.Z||1==n.Z?t.l.j:t.C,i=t.C<i?i:t.C;e(r<=t.l.o);if(r>i){var a=t.l.width,s=n.ca,o=n.tb+a*i,u=t.V,f=t.Ba+t.c*i,l=t.gc;e(1==t.ab);e(3==l[0].hc);Qr(l[0],i,r,u,f,s,o);Pt(n,i,r,s,o,a)}t.C=t.Ma=r}function Ft(t,r,n,i,a,s,o){var u=t.$/i,f=t.$%i,l=t.m,c=t.s,h=n+t.$,d=h;a=n+i*a;var p=n+i*s,v=280+c.ua,g=t.Pb?u:16777216,m=0<c.ua?c.Wa:null,b=c.wc,y=h<p?At(c,f,u):null;e(t.C<s);e(p<=a);var w=!1;t:for(;;){for(;w||h<p;){var N=0;if(u>=g){var g=t,L=h-n;e(g.Pb);g.wd=g.m;g.xd=L;0<g.s.ua&&q(g.s.Wa,g.s.vb);g=u+qn}f&b||(y=At(c,f,u));e(null!=y);y.Qb&&(r[h]=y.qb,w=!0);if(!w)if(k(l),y.jc){var N=l,L=r,A=h,x=y.pd[S(N)&Hr-1];e(y.jc);256>x.g?(P(N,N.u+x.g),L[A]=x.value,N=0):(P(N,N.u+x.g-256),e(256<=x.value),N=x.value);0==N&&(w=!0)}else N=Nt(y.G[0],y.H[0],l);if(l.h)break;if(w||256>N){if(!w)if(y.nd)r[h]=(y.qb|N<<8)>>>0;else{k(l);w=Nt(y.G[1],y.H[1],l);k(l);L=Nt(y.G[2],y.H[2],l);A=Nt(y.G[3],y.H[3],l);if(l.h)break;r[h]=(A<<24|w<<16|N<<8|L)>>>0}w=!1;++h;++f;if(f>=i&&(f=0,++u,null!=o&&u<=s&&!(u%16)&&o(t,u),null!=m))for(;d<h;){N=r[d++],m.X[(506832829*N&4294967295)>>>m.Mb]=N}}else if(280>N){N=yt(N-256,l);L=Nt(y.G[4],y.H[4],l);k(l);L=yt(L,l);L=wt(i,L);if(l.h)break;if(h-n<L||a-h<N)break t;else for(A=0;A<N;++A){r[h+A]=r[h+A-L]}h+=N;for(f+=N;f>=i;){f-=i,++u,null!=o&&u<=s&&!(u%16)&&o(t,u)}e(h<=a);f&b&&(y=At(c,f,u));if(null!=m)for(;d<h;){N=r[d++],m.X[(506832829*N&4294967295)>>>m.Mb]=N}}else if(N<v){w=N-280;for(e(null!=m);d<h;){N=r[d++],m.X[(506832829*N&4294967295)>>>m.Mb]=N}N=h;L=m;e(!(w>>>L.Xa));r[N]=L.X[w];w=!0}else break t;w||e(l.h==_(l))}if(t.Pb&&l.h&&h<a)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&q(t.s.vb,t.s.Wa);else if(l.h)break t;else null!=o&&o(t,u>s?s:u),t.a=0,t.$=h-n;return 1}t.a=3;return 0}function It(t){e(null!=t);t.vc=null;t.yc=null;t.Ya=null;var r=t.Wa;null!=r&&(r.X=null);t.vb=null;e(null!=t)}function Ct(){var t=new cr;if(null==t)return null;t.a=0;t.xb=gi;at("Predictor","VP8LPredictors");at("Predictor","VP8LPredictors_C");at("PredictorAdd","VP8LPredictorsAdd");at("PredictorAdd","VP8LPredictorsAdd_C");en=X;nn=Z;an=Q;sn=tt;on=et;un=rt;fn=nt;f.VP8LMapColor32b=$r;f.VP8LMapColor8b=tn;return t}function jt(t,r,n,o,u){var f=1,l=[t],c=[r],h=o.m,v=o.s,m=null,b=0;t:for(;;){if(n)for(;f&&L(h,1);){var y=l,w=c,N=o,A=1,x=N.m,_=N.gc[N.ab],F=L(x,2);if(N.Oc&1<<F)f=0;else{N.Oc|=1<<F;_.hc=F;_.Ea=y[0];_.nc=w[0];_.K=[null];++N.ab;e(4>=N.ab);switch(F){case 0:case 1:_.b=L(x,3)+2;A=jt(T(_.Ea,_.b),T(_.nc,_.b),0,N,_.K);_.K=_.K[0];break;case 3:var I=L(x,8)+1,C=16<I?0:4<I?1:2<I?2:3;y[0]=T(_.Ea,C);_.b=C;var A=jt(I,1,0,N,_.K),j;if(j=A){var O,B=I,M=_,q=1<<(8>>M.b),D=a(q);if(null==D)j=0;else{var R=M.K[0],z=M.w;D[0]=M.K[0][0];for(O=1;O<1*B;++O){D[O]=U(R[z+O],D[O-1])}for(;O<4*q;++O){D[O]=0}M.K[0]=null;M.K[0]=D;j=1}}A=j;break;case 2:break;default:e(0)}f=A}}l=l[0];c=c[0];if(f&&L(h,1)&&(b=L(h,4),f=1<=b&&11>=b,!f)){o.a=3;break t}var H;if(H=f)e:{var W=o,V=l,G=c,Y=b,J=n,X,K,Z=W.m,$=W.s,Q=[null],tt,et=1,rt=0,nt=En[Y];r:for(;;){if(J&&L(Z,1)){var it=L(Z,3)+2,at=T(V,it),st=T(G,it),ot=at*st;if(!jt(at,st,0,W,Q))break r;Q=Q[0];$.xc=it;for(X=0;X<ot;++X){var ut=Q[X]>>8&65535;Q[X]=ut;ut>=et&&(et=ut+1)}}if(Z.h)break r;for(K=0;5>K;++K){var ft=jn[K];!K&&0<Y&&(ft+=1<<Y);rt<ft&&(rt=ft)}var lt=s(et*nt,p);var ct=et,ht=s(ct,g);if(null==ht)var dt=null;else e(65536>=ct),dt=ht;var pt=a(rt);if(null==dt||null==pt||null==lt){W.a=1;break r}var vt=lt;for(X=tt=0;X<et;++X){var gt=dt[X],mt=gt.G,bt=gt.H,yt=0,wt=1,Nt=0;for(K=0;5>K;++K){ft=jn[K];mt[K]=vt;bt[K]=tt;!K&&0<Y&&(ft+=1<<Y);n:{var At,xt=ft,St=W,_t=pt,Pt=vt,kt=tt,Ct=0,Ot=St.m,Bt=L(Ot,1);i(_t,0,0,xt);if(Bt){var Mt=L(Ot,1)+1,Et=L(Ot,1),qt=L(Ot,0==Et?1:8);_t[qt]=1;2==Mt&&(qt=L(Ot,8),_t[qt]=1);var Dt=1}else{var Rt=a(19),Tt=L(Ot,4)+4;if(19<Tt){St.a=3;var Ut=0;break n}for(At=0;At<Tt;++At){Rt[Bn[At]]=L(Ot,3)}var zt=void 0,Ht=void 0,Wt=St,Vt=Rt,Gt=xt,Yt=_t,Jt=0,Xt=Wt.m,Kt=8,Zt=s(128,p);i:for(;;){if(!d(Zt,0,7,Vt,19))break i;if(L(Xt,1)){var $t=2+2*L(Xt,3),zt=2+L(Xt,$t);if(zt>Gt)break i}else zt=Gt;for(Ht=0;Ht<Gt&&zt--;){k(Xt);var Qt=Zt[0+(S(Xt)&127)];P(Xt,Xt.u+Qt.g);var te=Qt.value;if(16>te)Yt[Ht++]=te,0!=te&&(Kt=te);else{var ee=16==te,re=te-16,ne=Cn[re],ie=L(Xt,In[re])+ne;if(Ht+ie>Gt)break i;else for(var ae=ee?Kt:0;0<ie--;){Yt[Ht++]=ae}}}Jt=1;break i}Jt||(Wt.a=3);Dt=Jt}(Dt=Dt&&!Ot.h)&&(Ct=d(Pt,kt,8,_t,xt));Dt&&0!=Ct?Ut=Ct:(St.a=3,Ut=0)}if(0==Ut)break r;wt&&1==On[K]&&(wt=0==vt[tt].g);yt+=vt[tt].g;tt+=Ut;if(3>=K){var se=pt[0],oe;for(oe=1;oe<ft;++oe){pt[oe]>se&&(se=pt[oe])}Nt+=se}}gt.nd=wt;gt.Qb=0;wt&&(gt.qb=(mt[3][bt[3]+0].value<<24|mt[1][bt[1]+0].value<<16|mt[2][bt[2]+0].value)>>>0,0==yt&&256>mt[0][bt[0]+0].value&&(gt.Qb=1,gt.qb+=mt[0][bt[0]+0].value<<8));gt.jc=!gt.Qb&&6>Nt;if(gt.jc){var ue,fe=gt;for(ue=0;ue<Hr;++ue){var le=ue,ce=fe.pd[le],he=fe.G[0][fe.H[0]+le];256<=he.value?(ce.g=he.g+256,ce.value=he.value):(ce.g=0,ce.value=0,le>>=Lt(he,8,ce),le>>=Lt(fe.G[1][fe.H[1]+le],16,ce),le>>=Lt(fe.G[2][fe.H[2]+le],0,ce),Lt(fe.G[3][fe.H[3]+le],24,ce))}}}$.vc=Q;$.Wb=et;$.Ya=dt;$.yc=lt;H=1;break e}H=0}f=H;if(!f){o.a=3;break t}if(0<b){if(v.ua=1<<b,!E(v.Wa,b)){o.a=1;f=0;break t}}else v.ua=0;var de=o,pe=l,ve=c,ge=de.s,me=ge.xc;de.c=pe;de.i=ve;ge.md=T(pe,me);ge.wc=0==me?-1:(1<<me)-1;if(n){o.xb=vi;break t}m=a(l*c);if(null==m){o.a=1;f=0;break t}f=(f=Ft(o,m,0,l,c,c,null))&&!h.h;break t}f?(null!=u?u[0]=m:(e(null==m),e(n)),o.$=0,n||It(v)):It(v);return f}function Ot(t,r){var n=t.c*t.i,i=n+r+16*r;e(t.c<=r);t.V=a(i);if(null==t.V)return t.Ta=null,t.Ua=0,t.a=1,0;t.Ta=t.V;t.Ua=t.Ba+n+r;return 1}function Bt(t,r){var n=t.C,i=r-n,a=t.V,s=t.Ba+t.c*n;for(e(r<=t.l.o);0<i;){var o=16<i?16:i,u=t.l.ma,f=t.l.width,l=f*o,c=u.ca,h=u.tb+f*n,d=t.Ta,p=t.Ua;xt(t,o,a,s);Ni(d,p,c,h,l);Pt(u,n,n+o,c,h,f);i-=o;a+=o*t.c;n+=o}e(n==r);t.C=t.Ma=r}function Mt(t,r){var n=[0],i=[0],a=[0];t:for(;;){if(null==t)return 0;if(null==r)return t.a=2,0;t.l=r;t.a=0;w(t.m,r.data,r.w,r.ha);if(!bt(t.m,n,i,a)){t.a=3;break t}t.xb=gi;r.width=n[0];r.height=i[0];if(!jt(n[0],i[0],1,t,null))break t;return 1}e(0!=t.a);return 0}function Et(){this.ub=this.yd=this.td=this.Rb=0}function qt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dt(){this.Fb=this.Bb=this.Cb=0;this.Zb=a(4);this.Lb=a(4)}function Rt(){this.Yb=o()}function Tt(){this.jb=a(3);this.Wc=u([4,8],Rt);this.Xc=u([4,17],Rt)}function Ut(){this.Pc=this.wb=this.Tb=this.zd=0;this.vd=new a(4);this.od=new a(4)}function zt(){this.ld=this.La=this.dd=this.tc=0}function Ht(){this.Na=this.la=0}function Wt(){this.Sc=[0,0];this.Eb=[0,0];this.Qc=[0,0];this.ia=this.lc=0}function Vt(){this.ad=a(384);this.Za=0;this.Ob=a(16);this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gt(){this.uc=this.M=this.Nb=0;this.wa=Array(new zt);this.Y=0;this.ya=Array(new Vt);this.aa=0;this.l=new Kt}function Yt(){this.y=a(16);this.f=a(8);this.ea=a(8)}function Jt(){this.cb=this.a=0;this.sc="";this.m=new A;this.Od=new Et;this.Kc=new qt;this.ed=new Ut;this.Qa=new Dt;this.Ic=this.$c=this.Aa=0;this.D=new Gt;this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0;this.Jc=s(8,A);this.ia=0;this.pb=s(4,Wt);this.Pa=new Tt;this.Bd=this.kc=0;this.Ac=[];this.Bc=0;this.zc=[0,0,0,0];this.Gd=Array(new Yt);this.Hd=0;this.rb=Array(new Ht);this.sb=0;this.wa=Array(new zt);this.Y=0;this.oc=[];this.pc=0;this.sa=[];this.ta=0;this.qa=[];this.ra=0;this.Ha=[];this.B=this.R=this.Ia=0;this.Ec=[];this.M=this.ja=this.Vb=this.Fc=0;this.ya=Array(new Vt);this.L=this.aa=0;this.gd=u([4,2],zt);this.ga=null;this.Fa=[];this.Cc=this.qc=this.P=0;this.Gb=[];this.Uc=0;this.mb=[];this.nb=0;this.rc=[];this.Ga=this.Vc=0}function Xt(t,e){return 0>t?0:t>e?e:t}function Kt(){this.T=this.U=this.ka=this.height=this.width=0;this.y=[];this.f=[];this.ea=[];this.Rc=this.fa=this.W=this.N=this.O=0;this.ma="void";this.put="VP8IoPutHook";this.ac="VP8IoSetupHook";this.bc="VP8IoTeardownHook";this.ha=this.Kb=0;this.data=[];this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0;this.F=[];this.J=0}function Zt(){var t=new Jt;null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,Tn||(Tn=ee));return t}function $t(t,e,r){0==t.a&&(t.a=e,t.sc=r,t.cb=0);return 0}function Qt(t,e,r){return 3<=r&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function te(t,r){if(null==t)return 0;t.a=0;t.sc="OK";if(null==r)return $t(t,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data;var a=r.w;var s=r.ha;if(4>s)return $t(t,7,"Truncated header.");var o=n[a+0]|n[a+1]<<8|n[a+2]<<16;var u=t.Od;u.Rb=!(o&1);u.td=o>>1&7;u.yd=o>>4&1;u.ub=o>>5;if(3<u.td)return $t(t,3,"Incorrect keyframe parameters.");if(!u.yd)return $t(t,4,"Frame not displayable.");a+=3;s-=3;var f=t.Kc;if(u.Rb){if(7>s)return $t(t,7,"cannot parse picture header");if(!Qt(n,a,s))return $t(t,3,"Bad code word");f.c=(n[a+4]<<8|n[a+3])&16383;f.Td=n[a+4]>>6;f.i=(n[a+6]<<8|n[a+5])&16383;f.Ud=n[a+6]>>6;a+=7;s-=7;t.za=f.c+15>>4;t.Ub=f.i+15>>4;r.width=f.c;r.height=f.i;r.Da=0;r.j=0;r.v=0;r.va=r.width;r.o=r.height;r.da=0;r.ib=r.width;r.hb=r.height;r.U=r.width;r.T=r.height;o=t.Pa;i(o.jb,0,255,o.jb.length);o=t.Qa;e(null!=o);o.Cb=0;o.Bb=0;o.Fb=1;i(o.Zb,0,0,o.Zb.length);i(o.Lb,0,0,o.Lb)}if(u.ub>s)return $t(t,7,"bad partition length");o=t.m;m(o,n,a,u.ub);a+=u.ub;s-=u.ub;u.Rb&&(f.Ld=I(o),f.Kd=I(o));f=t.Qa;var l=t.Pa,c;e(null!=o);e(null!=f);f.Cb=I(o);if(f.Cb){f.Bb=I(o);if(I(o)){f.Fb=I(o);for(c=0;4>c;++c){f.Zb[c]=I(o)?y(o,7):0}for(c=0;4>c;++c){f.Lb[c]=I(o)?y(o,6):0}}if(f.Bb)for(c=0;3>c;++c){l.jb[c]=I(o)?b(o,8):255}}else f.Bb=0;if(o.Ka)return $t(t,3,"cannot parse segment header");f=t.ed;f.zd=I(o);f.Tb=b(o,6);f.wb=b(o,3);f.Pc=I(o);if(f.Pc&&I(o)){for(l=0;4>l;++l){I(o)&&(f.vd[l]=y(o,6))}for(l=0;4>l;++l){I(o)&&(f.od[l]=y(o,6))}}t.L=0==f.Tb?0:f.zd?1:2;if(o.Ka)return $t(t,3,"cannot parse filter header");c=a;var h=s;s=c;a=c+h;f=h;t.Xb=(1<<b(t.m,2))-1;l=t.Xb;if(h<3*l)n=7;else{c+=3*l;f-=3*l;for(h=0;h<l;++h){var d=n[s+0]|n[s+1]<<8|n[s+2]<<16;d>f&&(d=f);m(t.Jc[+h],n,c,d);c+=d;f-=d;s+=3}m(t.Jc[+l],n,c,f);n=c<a?0:5}if(0!=n)return $t(t,n,"cannot parse partitions");c=t.m;n=b(c,7);s=I(c)?y(c,4):0;a=I(c)?y(c,4):0;f=I(c)?y(c,4):0;l=I(c)?y(c,4):0;c=I(c)?y(c,4):0;h=t.Qa;for(d=0;4>d;++d){if(h.Cb){var p=h.Zb[d];h.Fb||(p+=n)}else if(0<d){t.pb[d]=t.pb[0];continue}else p=n;var v=t.pb[d];v.Sc[0]=Dn[Xt(p+s,127)];v.Sc[1]=Rn[Xt(p+0,127)];v.Eb[0]=2*Dn[Xt(p+a,127)];v.Eb[1]=101581*Rn[Xt(p+f,127)]>>16;8>v.Eb[1]&&(v.Eb[1]=8);v.Qc[0]=Dn[Xt(p+l,117)];v.Qc[1]=Rn[Xt(p+c,127)];v.lc=p+c}if(!u.Rb)return $t(t,4,"Not a key frame.");I(o);u=t.Pa;for(n=0;4>n;++n){for(s=0;8>s;++s){for(a=0;3>a;++a){for(f=0;11>f;++f){l=C(o,Gn[n][s][a][f])?b(o,8):Wn[n][s][a][f],u.Wc[n][s].Yb[a][f]=l}}}for(s=0;17>s;++s){u.Xc[n][s]=u.Wc[n][Yn[s]]}}t.kc=I(o);t.kc&&(t.Bd=b(o,8));return t.cb=1}function ee(t,e,r,n,i,a,s){var o=e[i].Yb[r];for(r=0;16>i;++i){if(!C(t,o[r+0]))return i;for(;!C(t,o[r+1]);){if(o=e[++i].Yb[0],r=0,16==i)return 16}var u=e[i+1].Yb;if(C(t,o[r+2])){var f=t,l=o,c=r;var h=0;if(C(f,l[c+3])){if(C(f,l[c+6])){o=0;h=C(f,l[c+8]);l=C(f,l[c+9+h]);c=2*h+l;h=0;for(l=Un[c];l[o];++o){h+=h+C(f,l[o])}h+=3+(8<<c)}else C(f,l[c+7])?(h=7+2*C(f,165),h+=C(f,145)):h=5+C(f,159)}else C(f,l[c+4])?h=3+C(f,l[c+5]):h=2;o=u[2]}else h=1,o=u[1];u=s+zn[i];f=t;0>f.b&&F(f);var l=f.b,c=f.Ca>>1,d=c-(f.I>>l)>>31;--f.b;f.Ca+=d;f.Ca|=1;f.I-=(c+1&d)<<l;a[u]=((h^d)-d)*n[(0<i)+0]}return 16}function re(t){var e=t.rb[t.sb-1];e.la=0;e.Na=0;i(t.zc,0,0,t.zc.length);t.ja=0}function ne(t,r){for(t.M=0;t.M<t.Va;++t.M){var s=t.Jc[t.M&t.Xb],o=t.m,u=t,f;for(f=0;f<u.za;++f){var l=o;var c=u;var h=c.Ac,d=c.Bc+4*f,p=c.zc,v=c.ya[c.aa+f];c.Qa.Bb?v.$b=C(l,c.Pa.jb[0])?2+C(l,c.Pa.jb[2]):C(l,c.Pa.jb[1]):v.$b=0;c.kc&&(v.Ad=C(l,c.Bd));v.Za=!C(l,145)+0;if(v.Za){var g=v.Ob,m=0;for(c=0;4>c;++c){var b=p[0+c];var y;for(y=0;4>y;++y){b=Vn[h[d+y]][b];for(var w=Hn[C(l,b[0])];0<w;){w=Hn[2*w+C(l,b[w])]}b=-w;h[d+y]=b}n(g,m,h,d,4);m+=4;p[0+c]=b}}else b=C(l,156)?C(l,128)?1:3:C(l,163)?2:0,v.Ob[0]=b,i(h,d,b,4),i(p,0,b,4);v.Dd=C(l,142)?C(l,114)?C(l,183)?1:3:2:0}if(u.m.Ka)return $t(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){o=t;u=s;l=o.rb[o.sb-1];h=o.rb[o.sb+o.ja];f=o.ya[o.aa+o.ja];if(d=o.kc?f.Ad:0)l.la=h.la=0,f.Za||(l.Na=h.Na=0),f.Hc=0,f.Gc=0,f.ia=0;else{var N,L,l=h,h=u,d=o.Pa.Xc,p=o.ya[o.aa+o.ja],v=o.pb[p.$b];c=p.ad;g=0;m=o.rb[o.sb-1];b=y=0;i(c,g,0,384);if(p.Za){var A=0;var x=d[3]}else{w=a(16);var S=l.Na+m.Na;S=Tn(h,d[1],S,v.Eb,0,w,0);l.Na=m.Na=(0<S)+0;if(1<S)Jn(w,0,c,g);else{var _=w[0]+3>>3;for(w=0;256>w;w+=16){c[g+w]=_}}A=1;x=d[0]}var P=l.la&15;var k=m.la&15;for(w=0;4>w;++w){var F=k&1;for(_=L=0;4>_;++_){S=F+(P&1),S=Tn(h,x,S,v.Sc,A,c,g),F=S>A,P=P>>1|F<<7,L=L<<2|(3<S?3:1<S?2:0!=c[g+0]),g+=16}P>>=4;k=k>>1|F<<7;y=(y<<8|L)>>>0}x=P;A=k>>4;for(N=0;4>N;N+=2){L=0;P=l.la>>4+N;k=m.la>>4+N;for(w=0;2>w;++w){F=k&1;for(_=0;2>_;++_){S=F+(P&1),S=Tn(h,d[2],S,v.Qc,0,c,g),F=0<S,P=P>>1|F<<3,L=L<<2|(3<S?3:1<S?2:0!=c[g+0]),g+=16}P>>=2;k=k>>1|F<<5}b|=L<<4*N;x|=P<<4<<N;A|=(k&240)<<N}l.la=x;m.la=A;p.Hc=y;p.Gc=b;p.ia=b&43690?0:v.ia;d=!(y|b)}0<o.L&&(o.wa[o.Y+o.ja]=o.gd[f.$b][f.Za],o.wa[o.Y+o.ja].La|=!d);if(u.Ka)return $t(t,7,"Premature end-of-file encountered.")}re(t);s=t;o=r;u=1;f=s.D;l=0<s.L&&s.M>=s.zb&&s.M<=s.Va;if(0==s.Aa)t:{f.M=s.M,f.uc=l,Dr(s,f),u=1;L=s.D;f=L.Nb;b=Wi[s.L];l=b*s.R;h=b/2*s.B;w=16*f*s.R;_=8*f*s.B;d=s.sa;p=s.ta-l+w;v=s.qa;c=s.ra-h+_;g=s.Ha;m=s.Ia-h+_;P=L.M;k=0==P;y=P>=s.Va-1;2==s.Aa&&Dr(s,L);if(L.uc)for(S=s,F=S.D.M,e(S.D.uc),L=S.yb;L<S.Hb;++L){var I=S;A=L;x=F;var j=I.D,O=j.Nb;N=I.R;var j=j.wa[j.Y+A],B=I.sa,M=I.ta+16*O*N+16*A,E=j.dd,q=j.tc;if(0!=q)if(e(3<=q),1==I.L)0<A&&hi(B,M,N,q+4),j.La&&pi(B,M,N,q),0<x&&ci(B,M,N,q+4),j.La&&di(B,M,N,q);else{var D=I.B,R=I.qa,T=I.ra+8*O*D+8*A,U=I.Ha,I=I.Ia+8*O*D+8*A,O=j.ld;0<A&&(ii(B,M,N,q+4,E,O),si(R,T,U,I,D,q+4,E,O));j.La&&(ui(B,M,N,q,E,O),li(R,T,U,I,D,q,E,O));0<x&&(ni(B,M,N,q+4,E,O),ai(R,T,U,I,D,q+4,E,O));j.La&&(oi(B,M,N,q,E,O),fi(R,T,U,I,D,q,E,O))}}s.ia&&alert("todo:DitherRow");if(null!=o.put){L=16*P;P=16*(P+1);k?(o.y=s.sa,o.O=s.ta+w,o.f=s.qa,o.N=s.ra+_,o.ea=s.Ha,o.W=s.Ia+_):(L-=b,o.y=d,o.O=p,o.f=v,o.N=c,o.ea=g,o.W=m);y||(P-=b);P>o.o&&(P=o.o);o.F=null;o.J=null;if(null!=s.Fa&&0<s.Fa.length&&L<P&&(o.J=gr(s,o,L,P-L),o.F=s.mb,null==o.F&&0==o.F.length)){u=$t(s,3,"Could not decode alpha data.");break t}L<o.j&&(b=o.j-L,L=o.j,e(!(b&1)),o.O+=s.R*b,o.N+=s.B*(b>>1),o.W+=s.B*(b>>1),null!=o.F&&(o.J+=o.width*b));L<P&&(o.O+=o.v,o.N+=o.v>>1,o.W+=o.v>>1,null!=o.F&&(o.J+=o.v),o.ka=L-o.j,o.U=o.va-o.v,o.T=P-L,u=o.put(o))}f+1!=s.Ic||y||(n(s.sa,s.ta-l,d,p+16*s.R,l),n(s.qa,s.ra-h,v,c+8*s.B,h),n(s.Ha,s.Ia-h,g,m+8*s.B,h))}if(!u)return $t(t,6,"Output aborted.")}return 1}function ie(t,r){if(null==t)return 0;if(null==r)return $t(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!te(t,r))return 0;e(t.cb);if(null==r.ac||r.ac(r)){r.ob&&(t.L=0);var n=Wi[t.L];2==t.L?(t.yb=0,t.zb=0):(t.yb=r.v-n>>4,t.zb=r.j-n>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0));t.Va=r.o+15+n>>4;t.Hb=r.va+15+n>>4;t.Hb>t.za&&(t.Hb=t.za);t.Va>t.Ub&&(t.Va=t.Ub);if(0<t.L){var o=t.ed;for(n=0;4>n;++n){var u;if(t.Qa.Cb){var f=t.Qa.Lb[n];t.Qa.Fb||(f+=o.Tb)}else f=o.Tb;for(u=0;1>=u;++u){var l=t.gd[n][u],c=f;o.Pc&&(c+=o.vd[0],u&&(c+=o.od[0]));c=0>c?0:63<c?63:c;if(0<c){var h=c;0<o.wb&&(h=4<o.wb?h>>2:h>>1,h>9-o.wb&&(h=9-o.wb));1>h&&(h=1);l.dd=h;l.tc=2*c+h;l.ld=40<=c?2:15<=c?1:0}else l.tc=0;l.La=u}}}n=0}else $t(t,6,"Frame setup failed"),n=t.a;if(n=0==n){if(n){t.$c=0;0<t.Aa||(t.Ic=Gi);t:{n=t.Ic;var h=t.za,o=4*h,d=32*h,p=h+1,v=0<t.L?h*(0<t.Aa?2:1):0,g=(2==t.Aa?2:1)*h;u=3*(16*n+Wi[t.L])/2*d;f=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0;l=o+832+u+f;if(l!=l)n=0;else{if(l>t.Vb){t.Vb=0;t.Ec=a(l);t.Fc=0;if(null==t.Ec){n=$t(t,1,"no memory during frame initialization.");break t}t.Vb=l}l=t.Ec;c=t.Fc;t.Ac=l;t.Bc=c;c+=o;t.Gd=s(d,Yt);t.Hd=0;t.rb=s(p+1,Ht);t.sb=1;t.wa=v?s(v,zt):null;t.Y=0;t.D.Nb=0;t.D.wa=t.wa;t.D.Y=t.Y;0<t.Aa&&(t.D.Y+=h);e(!0);t.oc=l;t.pc=c;c+=832;t.ya=s(g,Vt);t.aa=0;t.D.ya=t.ya;t.D.aa=t.aa;2==t.Aa&&(t.D.aa+=h);t.R=16*h;t.B=8*h;d=Wi[t.L];h=d*t.R;d=d/2*t.B;t.sa=l;t.ta=c+h;t.qa=t.sa;t.ra=t.ta+16*n*t.R+d;t.Ha=t.qa;t.Ia=t.ra+8*n*t.B+d;t.$c=0;c+=u;t.mb=f?l:null;t.nb=f?c:null;e(c+f<=t.Fc+t.Vb);re(t);i(t.Ac,t.Bc,0,o);n=1}}if(n){r.ka=0;r.y=t.sa;r.O=t.ta;r.f=t.qa;r.N=t.ra;r.ea=t.Ha;r.Vd=t.Ia;r.fa=t.R;r.Rc=t.B;r.F=null;r.J=0;if(!pn){for(n=-255;255>=n;++n){ln[255+n]=0>n?-n:n}for(n=-1020;1020>=n;++n){cn[1020+n]=-128>n?-128:127<n?127:n}for(n=-112;112>=n;++n){hn[112+n]=-16>n?-16:15<n?15:n}for(n=-255;510>=n;++n){dn[255+n]=0>n?0:255<n?255:n}pn=1}Jn=pe;$n=le;ti=ce;ei=he;ri=de;Qn=fe;ni=Qe;ii=tr;ai=nr;si=ir;oi=er;ui=rr;fi=ar;li=sr;ci=Ye;hi=Je;di=Xe;pi=Ke;Kn[0]=Fe;Kn[1]=ge;Kn[2]=Pe;Kn[3]=ke;Kn[4]=Ie;Kn[5]=je;Kn[6]=Ce;Kn[7]=Oe;Kn[8]=Me;Kn[9]=Be;Xn[0]=Le;Xn[1]=be;Xn[2]=ye;Xn[3]=we;Xn[4]=Ae;Xn[5]=xe;Xn[6]=Se;Zn[0]=Re;Zn[1]=me;Zn[2]=Ee;Zn[3]=qe;Zn[4]=Ue;Zn[5]=Te;Zn[6]=ze;n=1}else n=0}n&&(n=ne(t,r));null!=r.bc&&r.bc(r);n&=1}if(!n)return 0;t.cb=0;return n}function ae(t,e,r,n,i){i=t[e+r+32*n]+(i>>3);t[e+r+32*n]=i&-256?0>i?0:255:i}function se(t,e,r,n,i,a){ae(t,e,0,r,n+i);ae(t,e,1,r,n+a);ae(t,e,2,r,n-a);ae(t,e,3,r,n-i)}function oe(t){return(20091*t>>16)+t}function ue(t,e,r,n){var i=0,s;var o=a(16);for(s=0;4>s;++s){var u=t[e+0]+t[e+8];var f=t[e+0]-t[e+8];var l=(35468*t[e+4]>>16)-oe(t[e+12]);var c=oe(t[e+4])+(35468*t[e+12]>>16);o[i+0]=u+c;o[i+1]=f+l;o[i+2]=f-l;o[i+3]=u-c;i+=4;e++}for(s=i=0;4>s;++s){t=o[i+0]+4,u=t+o[i+8],f=t-o[i+8],l=(35468*o[i+4]>>16)-oe(o[i+12]),c=oe(o[i+4])+(35468*o[i+12]>>16),ae(r,n,0,0,u+c),ae(r,n,1,0,f+l),ae(r,n,2,0,f-l),ae(r,n,3,0,u-c),i++,n+=32}}function fe(t,e,r,n){var i=t[e+0]+4,a=35468*t[e+4]>>16,s=oe(t[e+4]),o=35468*t[e+1]>>16;t=oe(t[e+1]);se(r,n,0,i+s,t,o);se(r,n,1,i+a,t,o);se(r,n,2,i-a,t,o);se(r,n,3,i-s,t,o)}function le(t,e,r,n,i){ue(t,e,r,n);i&&ue(t,e+16,r,n+4)}function ce(t,e,r,n){$n(t,e+0,r,n,1);$n(t,e+32,r,n+128,1)}function he(t,e,r,n){t=t[e+0]+4;var i;for(i=0;4>i;++i){for(e=0;4>e;++e){ae(r,n,e,i,t)}}}function de(t,e,r,n){t[e+0]&&ei(t,e+0,r,n);t[e+16]&&ei(t,e+16,r,n+4);t[e+32]&&ei(t,e+32,r,n+128);t[e+48]&&ei(t,e+48,r,n+128+4)}function pe(t,e,r,n){var i=a(16),s;for(s=0;4>s;++s){var o=t[e+0+s]+t[e+12+s];var u=t[e+4+s]+t[e+8+s];var f=t[e+4+s]-t[e+8+s];var l=t[e+0+s]-t[e+12+s];i[0+s]=o+u;i[8+s]=o-u;i[4+s]=l+f;i[12+s]=l-f}for(s=0;4>s;++s){t=i[0+4*s]+3,o=t+i[3+4*s],u=i[1+4*s]+i[2+4*s],f=i[1+4*s]-i[2+4*s],l=t-i[3+4*s],r[n+0]=o+u>>3,r[n+16]=l+f>>3,r[n+32]=o-u>>3,r[n+48]=l-f>>3,n+=64}}function ve(t,e,r){var n=e-32,i=mn,a=255-t[n-1],s;for(s=0;s<r;++s){var o=i,u=a+t[e-1],f;for(f=0;f<r;++f){t[e+f]=o[u+t[n+f]]}e+=32}}function ge(t,e){ve(t,e,4)}function me(t,e){ve(t,e,8)}function be(t,e){ve(t,e,16)}function ye(t,e){var r;for(r=0;16>r;++r){n(t,e+32*r,t,e-32,16)}}function we(t,e){var r;for(r=16;0<r;--r){i(t,e,t[e-1],16),e+=32}}function Ne(t,e,r){var n;for(n=0;16>n;++n){i(e,r+32*n,t,16)}}function Le(t,e){var r=16,n;for(n=0;16>n;++n){r+=t[e-1+32*n]+t[e+n-32]}Ne(r>>5,t,e)}function Ae(t,e){var r=8,n;for(n=0;16>n;++n){r+=t[e-1+32*n]}Ne(r>>4,t,e)}function xe(t,e){var r=8,n;for(n=0;16>n;++n){r+=t[e+n-32]}Ne(r>>4,t,e)}function Se(t,e){Ne(128,t,e)}function _e(t,e,r){return t+2*e+r+2>>2}function Pe(t,e){var r=e-32,r=new Uint8Array([_e(t[r-1],t[r+0],t[r+1]),_e(t[r+0],t[r+1],t[r+2]),_e(t[r+1],t[r+2],t[r+3]),_e(t[r+2],t[r+3],t[r+4])]),i;for(i=0;4>i;++i){n(t,e+32*i,r,0,r.length)}}function ke(t,e){var r=t[e-1],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96];j(t,e+0,16843009*_e(t[e-1-32],r,n));j(t,e+32,16843009*_e(r,n,i));j(t,e+64,16843009*_e(n,i,a));j(t,e+96,16843009*_e(i,a,a))}function Fe(t,e){var r=4,n;for(n=0;4>n;++n){r+=t[e+n-32]+t[e-1+32*n]}r>>=3;for(n=0;4>n;++n){i(t,e+32*n,r,4)}}function Ie(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1-32],s=t[e+0-32],o=t[e+1-32],u=t[e+2-32],f=t[e+3-32];t[e+0+96]=_e(n,i,t[e-1+96]);t[e+1+96]=t[e+0+64]=_e(r,n,i);t[e+2+96]=t[e+1+64]=t[e+0+32]=_e(a,r,n);t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=_e(s,a,r);t[e+3+64]=t[e+2+32]=t[e+1+0]=_e(o,s,a);t[e+3+32]=t[e+2+0]=_e(u,o,s);t[e+3+0]=_e(f,u,o)}function Ce(t,e){var r=t[e+1-32],n=t[e+2-32],i=t[e+3-32],a=t[e+4-32],s=t[e+5-32],o=t[e+6-32],u=t[e+7-32];t[e+0+0]=_e(t[e+0-32],r,n);t[e+1+0]=t[e+0+32]=_e(r,n,i);t[e+2+0]=t[e+1+32]=t[e+0+64]=_e(n,i,a);t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=_e(i,a,s);t[e+3+32]=t[e+2+64]=t[e+1+96]=_e(a,s,o);t[e+3+64]=t[e+2+96]=_e(s,o,u);t[e+3+96]=_e(o,u,u)}function je(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1-32],s=t[e+0-32],o=t[e+1-32],u=t[e+2-32],f=t[e+3-32];t[e+0+0]=t[e+1+64]=a+s+1>>1;t[e+1+0]=t[e+2+64]=s+o+1>>1;t[e+2+0]=t[e+3+64]=o+u+1>>1;t[e+3+0]=u+f+1>>1;t[e+0+96]=_e(i,n,r);t[e+0+64]=_e(n,r,a);t[e+0+32]=t[e+1+96]=_e(r,a,s);t[e+1+32]=t[e+2+96]=_e(a,s,o);t[e+2+32]=t[e+3+96]=_e(s,o,u);t[e+3+32]=_e(o,u,f)}function Oe(t,e){var r=t[e+0-32],n=t[e+1-32],i=t[e+2-32],a=t[e+3-32],s=t[e+4-32],o=t[e+5-32],u=t[e+6-32],f=t[e+7-32];t[e+0+0]=r+n+1>>1;t[e+1+0]=t[e+0+64]=n+i+1>>1;t[e+2+0]=t[e+1+64]=i+a+1>>1;t[e+3+0]=t[e+2+64]=a+s+1>>1;t[e+0+32]=_e(r,n,i);t[e+1+32]=t[e+0+96]=_e(n,i,a);t[e+2+32]=t[e+1+96]=_e(i,a,s);t[e+3+32]=t[e+2+96]=_e(a,s,o);t[e+3+64]=_e(s,o,u);t[e+3+96]=_e(o,u,f)}function Be(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96];t[e+0+0]=r+n+1>>1;t[e+2+0]=t[e+0+32]=n+i+1>>1;t[e+2+32]=t[e+0+64]=i+a+1>>1;t[e+1+0]=_e(r,n,i);t[e+3+0]=t[e+1+32]=_e(n,i,a);t[e+3+32]=t[e+1+64]=_e(i,a,a);t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=a}function Me(t,e){var r=t[e-1+0],n=t[e-1+32],i=t[e-1+64],a=t[e-1+96],s=t[e-1-32],o=t[e+0-32],u=t[e+1-32],f=t[e+2-32];t[e+0+0]=t[e+2+32]=r+s+1>>1;t[e+0+32]=t[e+2+64]=n+r+1>>1;t[e+0+64]=t[e+2+96]=i+n+1>>1;t[e+0+96]=a+i+1>>1;t[e+3+0]=_e(o,u,f);t[e+2+0]=_e(s,o,u);t[e+1+0]=t[e+3+32]=_e(r,s,o);t[e+1+32]=t[e+3+64]=_e(n,r,s);t[e+1+64]=t[e+3+96]=_e(i,n,r);t[e+1+96]=_e(a,i,n)}function Ee(t,e){var r;for(r=0;8>r;++r){n(t,e+32*r,t,e-32,8)}}function qe(t,e){var r;for(r=0;8>r;++r){i(t,e,t[e-1],8),e+=32}}function De(t,e,r){var n;for(n=0;8>n;++n){i(e,r+32*n,t,8)}}function Re(t,e){var r=8,n;for(n=0;8>n;++n){r+=t[e+n-32]+t[e-1+32*n]}De(r>>4,t,e)}function Te(t,e){var r=4,n;for(n=0;8>n;++n){r+=t[e+n-32]}De(r>>3,t,e)}function Ue(t,e){var r=4,n;for(n=0;8>n;++n){r+=t[e-1+32*n]}De(r>>3,t,e)}function ze(t,e){De(128,t,e)}function He(t,e,r){var n=t[e-r],i=t[e+0],a=3*(i-n)+vn[1020+t[e-2*r]-t[e+r]],s=gn[112+(a+4>>3)];t[e-r]=mn[255+n+gn[112+(a+3>>3)]];t[e+0]=mn[255+i-s]}function We(t,e,r,n){var i=t[e+0],a=t[e+r];return bn[255+t[e-2*r]-t[e-r]]>n||bn[255+a-i]>n}function Ve(t,e,r,n){return 4*bn[255+t[e-r]-t[e+0]]+bn[255+t[e-2*r]-t[e+r]]<=n}function Ge(t,e,r,n,i){var a=t[e-3*r],s=t[e-2*r],o=t[e-r],u=t[e+0],f=t[e+r],l=t[e+2*r],c=t[e+3*r];return 4*bn[255+o-u]+bn[255+s-f]>n?0:bn[255+t[e-4*r]-a]<=i&&bn[255+a-s]<=i&&bn[255+s-o]<=i&&bn[255+c-l]<=i&&bn[255+l-f]<=i&&bn[255+f-u]<=i}function Ye(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n){Ve(t,e+n,r,i)&&He(t,e+n,r)}}function Je(t,e,r,n){var i=2*n+1;for(n=0;16>n;++n){Ve(t,e+n*r,1,i)&&He(t,e+n*r,1)}}function Xe(t,e,r,n){var i;for(i=3;0<i;--i){e+=4*r,Ye(t,e,r,n)}}function Ke(t,e,r,n){var i;for(i=3;0<i;--i){e+=4,Je(t,e,r,n)}}function Ze(t,e,r,n,i,a,s,o){for(a=2*a+1;0<i--;){if(Ge(t,e,r,a,s))if(We(t,e,r,o))He(t,e,r);else{var u=t,f=e,l=r,c=u[f-2*l],h=u[f-l],d=u[f+0],p=u[f+l],v=u[f+2*l],g=vn[1020+3*(d-h)+vn[1020+c-p]],m=27*g+63>>7,b=18*g+63>>7,g=9*g+63>>7;u[f-3*l]=mn[255+u[f-3*l]+g];u[f-2*l]=mn[255+c+b];u[f-l]=mn[255+h+m];u[f+0]=mn[255+d-m];u[f+l]=mn[255+p-b];u[f+2*l]=mn[255+v-g]}e+=n}}function $e(t,e,r,n,i,a,s,o){for(a=2*a+1;0<i--;){if(Ge(t,e,r,a,s))if(We(t,e,r,o))He(t,e,r);else{var u=t,f=e,l=r,c=u[f-l],h=u[f+0],d=u[f+l],p=3*(h-c),v=gn[112+(p+4>>3)],p=gn[112+(p+3>>3)],g=v+1>>1;u[f-2*l]=mn[255+u[f-2*l]+g];u[f-l]=mn[255+c+p];u[f+0]=mn[255+h-v];u[f+l]=mn[255+d-g]}e+=n}}function Qe(t,e,r,n,i,a){Ze(t,e,r,1,16,n,i,a)}function tr(t,e,r,n,i,a){Ze(t,e,1,r,16,n,i,a)}function er(t,e,r,n,i,a){var s;for(s=3;0<s;--s){e+=4*r,$e(t,e,r,1,16,n,i,a)}}function rr(t,e,r,n,i,a){var s;for(s=3;0<s;--s){e+=4,$e(t,e,1,r,16,n,i,a)}}function nr(t,e,r,n,i,a,s,o){Ze(t,e,i,1,8,a,s,o);Ze(r,n,i,1,8,a,s,o)}function ir(t,e,r,n,i,a,s,o){Ze(t,e,1,i,8,a,s,o);Ze(r,n,1,i,8,a,s,o)}function ar(t,e,r,n,i,a,s,o){$e(t,e+4*i,i,1,8,a,s,o);$e(r,n+4*i,i,1,8,a,s,o)}function sr(t,e,r,n,i,a,s,o){$e(t,e+4,1,i,8,a,s,o);$e(r,n+4,1,i,8,a,s,o)}function or(){this.ba=new ft;this.ec=[];this.cc=[];this.Mc=[];this.Dc=this.Nc=this.dc=this.fc=0;this.Oa=new ct;this.memory=0;this.Ib="OutputFunc";this.Jb="OutputAlphaFunc";this.Nd="OutputRowFunc"}function ur(){this.data=[];this.offset=this.kd=this.ha=this.w=0;this.na=[];this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fr(){this.nc=this.Ea=this.b=this.hc=0;this.K=[];this.w=0}function lr(){this.ua=0;this.Wa=new D;this.vb=new D;this.md=this.xc=this.wc=0;this.vc=[];this.Wb=0;this.Ya=new g;this.yc=new p}function cr(){this.xb=this.a=0;this.l=new Kt;this.ca=new ft;this.V=[];this.Ba=0;this.Ta=[];this.Ua=0;this.m=new x;this.Pb=0;this.wd=new x;this.Ma=this.$=this.C=this.i=this.c=this.xd=0;this.s=new lr;this.ab=0;this.gc=s(4,fr);this.Oc=0}function hr(){this.Lc=this.Z=this.$a=this.i=this.c=0;this.l=new Kt;this.ic=0;this.ca=[];this.tb=0;this.qd=null;this.rd=0}function dr(t,e,r,n,i,a,s){t=null==t?0:t[e+0];for(e=0;e<s;++e){i[a+e]=t+r[n+e]&255,t=i[a+e]}}function pr(t,e,r,n,i,a,s){if(null==t)dr(null,null,r,n,i,a,s);else{var o;for(o=0;o<s;++o){i[a+o]=t[e+o]+r[n+o]&255}}}function vr(t,e,r,n,i,a,s){if(null==t)dr(null,null,r,n,i,a,s);else{var o=t[e+0],u=o,f=o,l;for(l=0;l<s;++l){o=t[e+l],u=f+o-u,f=r[n+l]+(u&-256?0>u?0:255:u)&255,u=o,i[a+l]=f}}}function gr(t,r,i,s){var o=r.width,u=r.o;e(null!=t&&null!=r);if(0>i||0>=s||i+s>u)return null;if(!t.Cc){if(null==t.ga){t.ga=new hr;var f;(f=null==t.ga)||(f=r.width*r.o,e(0==t.Gb.length),t.Gb=a(f),t.Uc=0,null==t.Gb?f=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,f=1),f=!f);if(!f){f=t.ga;var l=t.Fa,c=t.P,h=t.qc,d=t.mb,p=t.nb,v=c+1,g=h-1,m=f.l;e(null!=l&&null!=d&&null!=r);mi[0]=null;mi[1]=dr;mi[2]=pr;mi[3]=vr;f.ca=d;f.tb=p;f.c=r.width;f.i=r.height;e(0<f.c&&0<f.i);if(1>=h)r=0;else if(f.$a=l[c+0]>>0&3,f.Z=l[c+0]>>2&3,f.Lc=l[c+0]>>4&3,c=l[c+0]>>6&3,0>f.$a||1<f.$a||4<=f.Z||1<f.Lc||c)r=0;else if(m.put=gt,m.ac=vt,m.bc=mt,m.ma=f,m.width=r.width,m.height=r.height,m.Da=r.Da,m.v=r.v,m.va=r.va,m.j=r.j,m.o=r.o,f.$a)t:{e(1==f.$a),r=Ct();e:for(;;){if(null==r){r=0;break t}e(null!=f);f.mc=r;r.c=f.c;r.i=f.i;r.l=f.l;r.l.ma=f;r.l.width=f.c;r.l.height=f.i;r.a=0;w(r.m,l,v,g);if(!jt(f.c,f.i,1,r,null))break e;1==r.ab&&3==r.gc[0].hc&&_t(r.s)?(f.ic=1,l=r.c*r.i,r.Ta=null,r.Ua=0,r.V=a(l),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(f.ic=0,r=Ot(r,f.c));if(!r)break e;r=1;break t}f.mc=null;r=0}else r=g>=f.c*f.i;f=!r}if(f)return null;1!=t.ga.Lc?t.Ga=0:s=u-i}e(null!=t.ga);e(i+s<=u);t:{l=t.ga;r=l.c;u=l.l.o;if(0==l.$a){v=t.rc;g=t.Vc;m=t.Fa;c=t.P+1+i*r;h=t.mb;d=t.nb+i*r;e(c<=t.P+t.qc);if(0!=l.Z)for(e(null!=mi[l.Z]),f=0;f<s;++f){mi[l.Z](v,g,m,c,h,d,r),v=h,g=d,d+=r,c+=r}else for(f=0;f<s;++f){n(h,d,m,c,r),v=h,g=d,d+=r,c+=r}t.rc=v;t.Vc=g}else{e(null!=l.mc);r=i+s;f=l.mc;e(null!=f);e(r<=f.i);if(f.C>=r)r=1;else if(l.ic||Nr(),l.ic){var l=f.V,v=f.Ba,g=f.c,b=f.i,m=1,c=f.$/g,h=f.$%g,d=f.m,p=f.s,y=f.$,N=g*b,L=g*r,A=p.wc,x=y<L?At(p,h,c):null;e(y<=N);e(r<=b);e(_t(p));e:for(;;){for(;!d.h&&y<L;){h&A||(x=At(p,h,c));e(null!=x);k(d);b=Nt(x.G[0],x.H[0],d);if(256>b)l[v+y]=b,++y,++h,h>=g&&(h=0,++c,c<=r&&!(c%16)&&kt(f,c));else if(280>b){var b=yt(b-256,d);var S=Nt(x.G[4],x.H[4],d);k(d);S=yt(S,d);S=wt(g,S);if(y>=S&&N-y>=b){var P;for(P=0;P<b;++P){l[v+y+P]=l[v+y+P-S]}}else{m=0;break e}y+=b;for(h+=b;h>=g;){h-=g,++c,c<=r&&!(c%16)&&kt(f,c)}y<L&&h&A&&(x=At(p,h,c))}else{m=0;break e}e(d.h==_(d))}kt(f,c>r?r:c);break e}!m||d.h&&y<N?(m=0,f.a=d.h?5:3):f.$=y;r=m}else r=Ft(f,f.V,f.Ba,f.c,f.i,r,Bt);if(!r){s=0;break t}}i+s>=u&&(t.Cc=1);s=1}if(!s)return null;if(t.Cc&&(s=t.ga,null!=s&&(s.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*o}function mr(t,e,r,n,i,a){for(;0<i--;){var s=t,o=e+(r?1:0),u=t,f=e+(r?0:3),l;for(l=0;l<n;++l){var c=u[f+4*l];255!=c&&(c*=32897,s[o+4*l+0]=s[o+4*l+0]*c>>23,s[o+4*l+1]=s[o+4*l+1]*c>>23,s[o+4*l+2]=s[o+4*l+2]*c>>23)}e+=a}}function br(t,e,r,n,i){for(;0<n--;){var a;for(a=0;a<r;++a){var s=t[e+2*a+0],o=t[e+2*a+1],u=o&15,f=4369*u,o=(o&240|o>>4)*f>>16;t[e+2*a+0]=(s&240|s>>4)*f>>16&240|(s&15|s<<4)*f>>16>>4&15;t[e+2*a+1]=o&240|u}e+=i}}function yr(t,e,r,n,i,a,s,o){var u=255,f,l;for(l=0;l<i;++l){for(f=0;f<n;++f){var c=t[e+f];a[s+4*f]=c;u&=c}e+=r;s+=o}return 255!=u}function wr(t,e,r,n,i){var a;for(a=0;a<i;++a){r[n+a]=t[e+a]>>8}}function Nr(){bi=mr;yi=br;wi=yr;Ni=wr}function Lr(t,r,n){f[t]=function(t,i,a,s,o,u,f,l,c,h,d,p,v,g,m,b,y){var w,N=y-1>>1;var L=o[u+0]|f[l+0]<<16;var A=c[h+0]|d[p+0]<<16;e(null!=t);var x=3*L+A+131074>>2;r(t[i+0],x&255,x>>16,v,g);null!=a&&(x=3*A+L+131074>>2,r(a[s+0],x&255,x>>16,m,b));for(w=1;w<=N;++w){var S=o[u+w]|f[l+w]<<16;var _=c[h+w]|d[p+w]<<16;var P=L+S+A+_+524296;var k=P+2*(S+A)>>3;P=P+2*(L+_)>>3;x=k+L>>1;L=P+S>>1;r(t[i+2*w-1],x&255,x>>16,v,g+(2*w-1)*n);r(t[i+2*w-0],L&255,L>>16,v,g+(2*w-0)*n);null!=a&&(x=P+A>>1,L=k+_>>1,r(a[s+2*w-1],x&255,x>>16,m,b+(2*w-1)*n),r(a[s+2*w+0],L&255,L>>16,m,b+(2*w+0)*n));L=S;A=_}y&1||(x=3*L+A+131074>>2,r(t[i+y-1],x&255,x>>16,v,g+(y-1)*n),null!=a&&(x=3*A+L+131074>>2,r(a[s+y-1],x&255,x>>16,m,b+(y-1)*n)))}}function Ar(){Li[yn]=Ai;Li[wn]=Si;Li[Nn]=xi;Li[Ln]=_i;Li[An]=Pi;Li[xn]=ki;Li[Sn]=Fi;Li[_n]=Si;Li[Pn]=_i;Li[kn]=Pi;Li[Fn]=ki}function xr(t){return t&~Mi?0>t?0:255:t>>Bi}function Sr(t,e){return xr((19077*t>>8)+(26149*e>>8)-14234)}function _r(t,e,r){return xr((19077*t>>8)-(6419*e>>8)-(13320*r>>8)+8708)}function Pr(t,e){return xr((19077*t>>8)+(33050*e>>8)-17685)}function kr(t,e,r,n,i){n[i+0]=Sr(t,r);n[i+1]=_r(t,e,r);n[i+2]=Pr(t,e)}function Fr(t,e,r,n,i){n[i+0]=Pr(t,e);n[i+1]=_r(t,e,r);n[i+2]=Sr(t,r)}function Ir(t,e,r,n,i){var a=_r(t,e,r);e=a<<3&224|Pr(t,e)>>3;n[i+0]=Sr(t,r)&248|a>>5;n[i+1]=e}function Cr(t,e,r,n,i){var a=Pr(t,e)&240|15;n[i+0]=Sr(t,r)&240|_r(t,e,r)>>4;n[i+1]=a}function jr(t,e,r,n,i){n[i+0]=255;kr(t,e,r,n,i+1)}function Or(t,e,r,n,i){Fr(t,e,r,n,i);n[i+3]=255}function Br(t,e,r,n,i){kr(t,e,r,n,i);n[i+3]=255}function Xt(t,e){return 0>t?0:t>e?e:t}function Mr(t,e,r){f[t]=function(t,n,i,a,s,o,u,f,l){for(var c=f+(l&-2)*r;f!=c;){e(t[n+0],i[a+0],s[o+0],u,f),e(t[n+1],i[a+0],s[o+0],u,f+r),n+=2,++a,++o,f+=2*r}l&1&&e(t[n+0],i[a+0],s[o+0],u,f)}}function Er(t,e,r){return 0==r?0==t?0==e?6:5:0==e?4:0:r}function qr(t,e,r,n,i){switch(t>>>30){case 3:$n(e,r,n,i,0);break;case 2:Qn(e,r,n,i);break;case 1:ei(e,r,n,i)}}function Dr(t,e){var r,a,s=e.M,o=e.Nb,u=t.oc,f=t.pc+40,l=t.oc,c=t.pc+584,h=t.oc,d=t.pc+600;for(r=0;16>r;++r){u[f+32*r-1]=129}for(r=0;8>r;++r){l[c+32*r-1]=129,h[d+32*r-1]=129}0<s?u[f-1-32]=l[c-1-32]=h[d-1-32]=129:(i(u,f-32-1,127,21),i(l,c-32-1,127,9),i(h,d-32-1,127,9));for(a=0;a<t.za;++a){var p=e.ya[e.aa+a];if(0<a){for(r=-1;16>r;++r){n(u,f+32*r-4,u,f+32*r+12,4)}for(r=-1;8>r;++r){n(l,c+32*r-4,l,c+32*r+4,4),n(h,d+32*r-4,h,d+32*r+4,4)}}var v=t.Gd,g=t.Hd+a,m=p.ad,b=p.Hc;0<s&&(n(u,f-32,v[g].y,0,16),n(l,c-32,v[g].f,0,8),n(h,d-32,v[g].ea,0,8));if(p.Za){var y=u;var w=f-32+16;0<s&&(a>=t.za-1?i(y,w,v[g].y[15],4):n(y,w,v[g+1].y,0,4));for(r=0;4>r;r++){y[w+128+r]=y[w+256+r]=y[w+384+r]=y[w+0+r]}for(r=0;16>r;++r,b<<=2){y=u,w=f+Hi[r],Kn[p.Ob[r]](y,w),qr(b,m,16*+r,y,w)}}else if(y=Er(a,s,p.Ob[0]),Xn[y](u,f),0!=b)for(r=0;16>r;++r,b<<=2){qr(b,m,16*+r,u,f+Hi[r])}r=p.Gc;y=Er(a,s,p.Dd);Zn[y](l,c);Zn[y](h,d);p=r>>0;b=m;y=l;w=c;p&255&&(p&170?ti(b,256,y,w):ri(b,256,y,w));r>>=8;p=h;b=d;r&255&&(r&170?ti(m,320,p,b):ri(m,320,p,b));s<t.Ub-1&&(n(v[g].y,0,u,f+480,16),n(v[g].f,0,l,c+224,8),n(v[g].ea,0,h,d+224,8));r=8*o*t.B;v=t.sa;g=t.ta+16*a+16*o*t.R;m=t.qa;p=t.ra+8*a+r;b=t.Ha;y=t.Ia+8*a+r;for(r=0;16>r;++r){n(v,g+r*t.R,u,f+32*r,16)}for(r=0;8>r;++r){n(m,p+r*t.B,l,c+32*r,8),n(b,y+r*t.B,h,d+32*r,8)}}}function Rr(t,n,i,a,s,o,u,f,l){var c=[0],h=[0],d=0,p=null!=l?l.kd:0,v=null!=l?l:new ur;if(null==t||12>i)return 7;v.data=t;v.w=n;v.ha=i;n=[n];i=[i];v.gb=[v.gb];t:{var g=n;var m=i;var b=v.gb;e(null!=t);e(null!=m);e(null!=b);b[0]=0;if(12<=m[0]&&!r(t,g[0],"RIFF")){if(r(t,g[0]+8,"WEBP")){b=3;break t}var y=M(t,g[0]+4);if(12>y||4294967286<y){b=3;break t}if(p&&y>m[0]-8){b=7;break t}b[0]=y;g[0]+=12;m[0]-=12}b=0}if(0!=b)return b;y=0<v.gb[0];for(i=i[0];;){g=[0];d=[d];t:{var N=t;m=n;b=i;var L=d,A=c,S=h,_=g;L[0]=0;if(8>b[0])b=7;else{if(!r(N,m[0],"VP8X")){if(10!=M(N,m[0]+4)){b=3;break t}if(18>b[0]){b=7;break t}var P=M(N,m[0]+8);var k=1+B(N,m[0]+12);N=1+B(N,m[0]+15);if(2147483648<=k*N){b=3;break t}null!=_&&(_[0]=P);null!=A&&(A[0]=k);null!=S&&(S[0]=N);m[0]+=18;b[0]-=18;L[0]=1}b=0}}d=d[0];g=g[0];if(0!=b)return b;m=!!(g&2);if(!y&&d)return 3;null!=o&&(o[0]=!!(g&16));null!=u&&(u[0]=m);null!=f&&(f[0]=0);u=c[0];g=h[0];if(d&&m&&null==l){b=0;break}if(4>i){b=7;break}if(y&&d||!y&&!d&&!r(t,n[0],"ALPH")){i=[i];v.na=[v.na];v.P=[v.P];v.Sa=[v.Sa];t:{P=t;b=n;y=i;var L=v.gb,A=v.na,S=v.P,_=v.Sa;k=22;e(null!=P);e(null!=y);N=b[0];var F=y[0];e(null!=A);e(null!=_);A[0]=null;S[0]=null;for(_[0]=0;;){b[0]=N;y[0]=F;if(8>F){b=7;break t}var I=M(P,N+4);if(4294967286<I){b=3;break t}var C=8+I+1&-2;k+=C;if(0<L&&k>L){b=3;break t}if(!r(P,N,"VP8 ")||!r(P,N,"VP8L")){b=0;break t}if(F[0]<C){b=7;break t}r(P,N,"ALPH")||(A[0]=P,S[0]=N+8,_[0]=I);N+=C;F-=C}}i=i[0];v.na=v.na[0];v.P=v.P[0];v.Sa=v.Sa[0];if(0!=b)break}i=[i];v.Ja=[v.Ja];v.xa=[v.xa];t:if(L=t,b=n,y=i,A=v.gb[0],S=v.Ja,_=v.xa,P=b[0],N=!r(L,P,"VP8 "),k=!r(L,P,"VP8L"),e(null!=L),e(null!=y),e(null!=S),e(null!=_),8>y[0])b=7;else{if(N||k){L=M(L,P+4);if(12<=A&&L>A-12){b=3;break t}if(p&&L>y[0]-8){b=7;break t}S[0]=L;b[0]+=8;y[0]-=8;_[0]=k}else _[0]=5<=y[0]&&47==L[P+0]&&!(L[P+4]>>5),S[0]=y[0];b=0}i=i[0];v.Ja=v.Ja[0];v.xa=v.xa[0];n=n[0];if(0!=b)break;if(4294967286<v.Ja)return 3;null==f||m||(f[0]=v.xa?2:1);u=[u];g=[g];if(v.xa){if(5>i){b=7;break}f=u;p=g;m=o;null==t||5>i?t=0:5<=i&&47==t[n+0]&&!(t[n+4]>>5)?(y=[0],L=[0],A=[0],S=new x,w(S,t,n,i),bt(S,y,L,A)?(null!=f&&(f[0]=y[0]),null!=p&&(p[0]=L[0]),null!=m&&(m[0]=A[0]),t=1):t=0):t=0}else{if(10>i){b=7;break}f=g;null==t||10>i||!Qt(t,n+3,i-3)?t=0:(p=t[n+0]|t[n+1]<<8|t[n+2]<<16,m=(t[n+7]<<8|t[n+6])&16383,t=(t[n+9]<<8|t[n+8])&16383,p&1||3<(p>>1&7)||!(p>>4&1)||p>>5>=v.Ja||!m||!t?t=0:(u&&(u[0]=m),f&&(f[0]=t),t=1))}if(!t)return 3;u=u[0];g=g[0];if(d&&(c[0]!=u||h[0]!=g))return 3;null!=l&&(l[0]=v,l.offset=n-l.w,e(4294967286>n-l.w),e(l.offset==l.ha-i));break}return 0==b||7==b&&d&&null==l?(null!=o&&(o[0]|=null!=v.na&&0<v.na.length),null!=a&&(a[0]=u),null!=s&&(s[0]=g),0):b}function Tr(t,e,r){var n=e.width,i=e.height,a=0,s=0,o=n,u=i;e.Da=null!=t&&0<t.Da;if(e.Da&&(o=t.cd,u=t.bd,a=t.v,s=t.j,11>r||(a&=-2,s&=-2),0>a||0>s||0>=o||0>=u||a+o>n||s+u>i))return 0;e.v=a;e.j=s;e.va=a+o;e.o=s+u;e.U=o;e.T=u;e.da=null!=t&&0<t.da;if(e.da){r=[t.ib];a=[t.hb];if(!R(o,u,r,a))return 0;e.ib=r[0];e.hb=a[0]}e.ob=null!=t&&t.ob;e.Kb=null==t||!t.Sd;e.da&&(e.ob=e.ib<3*n/4&&e.hb<3*i/4,e.Kb=0);return 1}function Ur(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A;e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function zr(t,e,r,n){if(null==n||0>=t||0>=e)return 2;if(null!=r){if(r.Da){var i=r.cd,s=r.bd,o=r.v&-2,u=r.j&-2;if(0>o||0>u||0>=i||0>=s||o+i>t||u+s>e)return 2;t=i;e=s}if(r.da){i=[r.ib];s=[r.hb];if(!R(t,e,i,s))return 2;t=i[0];e=s[0]}}n.width=t;n.height=e;t:{var f=n.width;var l=n.height;t=n.S;if(0>=f||0>=l||!(t>=yn&&13>t))t=2;else{if(0>=n.Rd&&null==n.sd){var o=s=i=e=0,u=f*Yi[t],c=u*l;11>t||(e=(f+1)/2,s=(l+1)/2*e,12==t&&(i=f,o=i*l));l=a(c+2*s+o);if(null==l){t=1;break t}n.sd=l;11>t?(f=n.f.RGBA,f.eb=l,f.fb=0,f.A=u,f.size=c):(f=n.f.kb,f.y=l,f.O=0,f.fa=u,f.Fd=c,f.f=l,f.N=0+c,f.Ab=e,f.Cd=s,f.ea=l,f.W=0+c+s,f.Db=e,f.Ed=s,12==t&&(f.F=l,f.J=0+c+2*s),f.Tc=o,f.lb=i)}e=1;i=n.S;s=n.width;o=n.height;if(i>=yn&&13>i){if(11>i)t=n.f.RGBA,u=Math.abs(t.A),e&=u*(o-1)+s<=t.size,e&=u>=s*Yi[i],e&=null!=t.eb;else{t=n.f.kb;u=(s+1)/2;c=(o+1)/2;f=Math.abs(t.fa);var l=Math.abs(t.Ab),h=Math.abs(t.Db),d=Math.abs(t.lb),p=d*(o-1)+s;e&=f*(o-1)+s<=t.Fd;e&=l*(c-1)+u<=t.Cd;e&=h*(c-1)+u<=t.Ed;e=e&f>=s&l>=u&h>=u;e&=null!=t.y;e&=null!=t.f;e&=null!=t.ea;12==i&&(e&=d>=s,e&=p<=t.Tc,e&=null!=t.F)}}else e=0;t=e?0:2}}if(0!=t)return t;null!=r&&r.fd&&(t=Ur(n));return t}var Hr=64,Wr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vr=24,Gr=32,Yr=8,Jr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0");f.Predictor0=function(){return 4278190080};f.Predictor1=function(t){return t};f.Predictor2=function(t,e,r){return e[r+0]};f.Predictor3=function(t,e,r){return e[r+1]};f.Predictor4=function(t,e,r){return e[r-1]};f.Predictor5=function(t,e,r){return W(W(t,e[r+1]),e[r+0])};f.Predictor6=function(t,e,r){return W(t,e[r-1])};f.Predictor7=function(t,e,r){return W(t,e[r+0])};f.Predictor8=function(t,e,r){return W(e[r-1],e[r+0])};f.Predictor9=function(t,e,r){return W(e[r+0],e[r+1])};f.Predictor10=function(t,e,r){return W(W(t,e[r-1]),W(e[r+0],e[r+1]))};f.Predictor11=function(t,e,r){var n=e[r+0];e=e[r-1];return 0>=Y(n>>24&255,t>>24&255,e>>24&255)+Y(n>>16&255,t>>16&255,e>>16&255)+Y(n>>8&255,t>>8&255,e>>8&255)+Y(n&255,t&255,e&255)?n:t};f.Predictor12=function(t,e,r){var n=e[r+0];e=e[r-1];return(V((t>>24&255)+(n>>24&255)-(e>>24&255))<<24|V((t>>16&255)+(n>>16&255)-(e>>16&255))<<16|V((t>>8&255)+(n>>8&255)-(e>>8&255))<<8|V((t&255)+(n&255)-(e&255)))>>>0};f.Predictor13=function(t,e,r){var n=e[r-1];t=W(t,e[r+0]);return(G(t>>24&255,n>>24&255)<<24|G(t>>16&255,n>>16&255)<<16|G(t>>8&255,n>>8&255)<<8|G(t>>0&255,n>>0&255))>>>0};var Xr=f.PredictorAdd0;f.PredictorAdd1=J;z("Predictor2","PredictorAdd2");z("Predictor3","PredictorAdd3");z("Predictor4","PredictorAdd4");z("Predictor5","PredictorAdd5");z("Predictor6","PredictorAdd6");z("Predictor7","PredictorAdd7");z("Predictor8","PredictorAdd8");z("Predictor9","PredictorAdd9");z("Predictor10","PredictorAdd10");z("Predictor11","PredictorAdd11");z("Predictor12","PredictorAdd12");z("Predictor13","PredictorAdd13");var Kr=f.PredictorAdd2;$("ColorIndexInverseTransform","MapARGB","32b",function(t){return t>>8&255},function(t){return t});$("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(t){return t},function(t){return t>>8&255});var Zr=f.ColorIndexInverseTransform,$r=f.MapARGB,Qr=f.VP8LColorIndexInverseTransformAlpha,tn=f.MapAlpha,en,rn=f.VP8LPredictorsAdd=[];rn.length=16;(f.VP8LPredictors=[]).length=16;(f.VP8LPredictorsAdd_C=[]).length=16;(f.VP8LPredictors_C=[]).length=16;var nn,an,sn,on,un,fn,ln=a(511),cn=a(2041),hn=a(225),dn=a(767),pn=0,vn=cn,gn=hn,mn=dn,bn=ln,yn=0,wn=1,Nn=2,Ln=3,An=4,xn=5,Sn=6,_n=7,Pn=8,kn=9,Fn=10,In=[2,3,7],Cn=[3,3,11],jn=[280,256,256,256,40],On=[0,1,1,1,0],Bn=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Mn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],En=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],qn=8,Dn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Rn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Tn=null,Un=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Hn=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Wn=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Vn=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Gn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Jn,Xn=[],Kn=[],Zn=[],$n,Qn,ti,ei,ri,ni,ii,ai,si,oi,ui,fi,li,ci,hi,di,pi,vi=1,gi=2,mi=[],bi,yi,wi,Ni,Li=[];Lr("UpsampleRgbLinePair",kr,3);Lr("UpsampleBgrLinePair",Fr,3);Lr("UpsampleRgbaLinePair",Br,4);Lr("UpsampleBgraLinePair",Or,4);Lr("UpsampleArgbLinePair",jr,4);Lr("UpsampleRgba4444LinePair",Cr,2);Lr("UpsampleRgb565LinePair",Ir,2);var Ai=f.UpsampleRgbLinePair,xi=f.UpsampleBgrLinePair,Si=f.UpsampleRgbaLinePair,_i=f.UpsampleBgraLinePair,Pi=f.UpsampleArgbLinePair,ki=f.UpsampleRgba4444LinePair,Fi=f.UpsampleRgb565LinePair,Ii=16,Ci=1<<Ii-1,ji=-227,Oi=482,Bi=6,Mi=(256<<Bi)-1,Ei=0,qi=a(256),Di=a(256),Ri=a(256),Ti=a(256),Ui=a(Oi-ji),zi=a(Oi-ji);Mr("YuvToRgbRow",kr,3);Mr("YuvToBgrRow",Fr,3);Mr("YuvToRgbaRow",Br,4);Mr("YuvToBgraRow",Or,4);Mr("YuvToArgbRow",jr,4);Mr("YuvToRgba4444Row",Cr,2);Mr("YuvToRgb565Row",Ir,2);var Hi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wi=[0,2,8],Vi=[8,7,6,4,4,2,2,2,1,1,1,1],Gi=1;this.WebPDecodeRGBA=function(t,r,n,i,a){var s=wn;var o=new or,u=new ft;o.ba=u;u.S=s;u.width=[u.width];u.height=[u.height];var f=u.width;var l=u.height,c=new lt;if(null==c||null==t)var h=2;else e(null!=c),h=Rr(t,r,n,c.width,c.height,c.Pd,c.Qd,c.format,null);0!=h?f=0:(null!=f&&(f[0]=c.width[0]),null!=l&&(l[0]=c.height[0]),f=1);if(f){u.width=u.width[0];u.height=u.height[0];null!=i&&(i[0]=u.width);null!=a&&(a[0]=u.height);t:{i=new Kt;a=new ur;a.data=t;a.w=r;a.ha=n;a.kd=1;r=[0];e(null!=a);t=Rr(a.data,a.w,a.ha,null,null,null,r,null,a);(0==t||7==t)&&r[0]&&(t=4);r=t;if(0==r){e(null!=o);i.data=a.data;i.w=a.w+a.offset;i.ha=a.ha-a.offset;i.put=gt;i.ac=vt;i.bc=mt;i.ma=o;if(a.xa){t=Ct();if(null==t){o=1;break t}if(Mt(t,i)){r=zr(i.width,i.height,o.Oa,o.ba);if(i=0==r){e:{i=t;r:for(;;){if(null==i){i=0;break e}e(null!=i.s.yc);e(null!=i.s.Ya);e(0<i.s.Wb);n=i.l;e(null!=n);a=n.ma;e(null!=a);if(0!=i.xb){i.ca=a.ba;i.tb=a.tb;e(null!=i.ca);if(!Tr(a.Oa,n,Ln)){i.a=2;break r}if(!Ot(i,n.width))break r;if(n.da)break r;(n.da||st(i.ca.S))&&Nr();11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&Nr());if(i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!E(i.s.vb,i.s.Wa.Xa)){i.a=1;break r}i.xb=0}if(!Ft(i,i.V,i.Ba,i.c,i.i,n.o,St))break r;a.Dc=i.Ma;i=1;break e}e(0!=i.a);i=0}i=!i}i&&(r=t.a)}else r=t.a}else{t=new Zt;if(null==t){o=1;break t}t.Fa=a.na;t.P=a.P;t.qc=a.Sa;if(te(t,i)){if(r=zr(i.width,i.height,o.Oa,o.ba),0==r){t.Aa=0;n=o.Oa;a=t;e(null!=a);if(null!=n){f=n.Md;f=0>f?0:100<f?255:255*f/100;if(0<f){for(l=c=0;4>l;++l){h=a.pb[l],12>h.lc&&(h.ia=f*Vi[0>h.lc?0:h.lc]>>3),c|=h.ia}c&&(alert("todo:VP8InitRandom"),a.ia=1)}a.Ga=n.Id;100<a.Ga?a.Ga=100:0>a.Ga&&(a.Ga=0)}ie(t,i)||(r=t.a)}}else r=t.a}0==r&&null!=o.Oa&&o.Oa.fd&&(r=Ur(o.ba))}o=r}s=0!=o?null:11>s?u.f.RGBA.eb:u.f.kb.y}else s=null;return s};var Yi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};new f;
/** @license
     * Copyright (c) 2017 Dominik Homberger
    Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
    The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
    https://webpjs.appspot.com
    WebPRiffParser dominikhlbg@gmail.com
    */function l(t,e,r,n){for(var i=0;i<n;i++){if(t[e+i]!=r.charCodeAt(i))return true}return false}function c(t,e){var r="";for(var n=0;n<4;n++){r+=String.fromCharCode(t[e++])}return r}function h(t,e){return t[e+0]<<0|t[e+1]<<8}function d(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function p(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function v(t,e){var r={};var n=0;var i=false;var a=0;var s=0;r["frames"]=[];if(l(t,e,"RIFF",4))return;e+=4;var o=p(t,e)+8;e+=8;while(e<t.length){var u=c(t,e);e+=4;var f=p(t,e);e+=4;var v=f+(f&1);switch(u){case"VP8 ":case"VP8L":if(typeof r["frames"][n]==="undefined")r["frames"][n]={};var g=r["frames"][n];var m=[0];var b=[0];g["src_off"]=i?s:e-8;g["src_size"]=a+f+8;n++;if(i){i=false;a=0;s=0}break;case"VP8X":var g=r["header"]={};var y=g["feature_flags"]=t[e];var w=e+4;var N=g["canvas_width"]=1+d(t,w);w+=3;var L=g["canvas_height"]=1+d(t,w);w+=3;break;case"ALPH":i=true;a=v+8;s=e-8;break;case"ANIM":var g=r["header"];var A=g["bgcolor"]=p(t,e);w=e+4;var x=g["loop_count"]=h(t,w);w+=2;break;case"ANMF":var S=0,_=0,b=0,m=0,P=0,k=0,F=0,I=0;var g=r["frames"][n]={};g["offset_x"]=S=2*d(t,e);e+=3;g["offset_y"]=_=2*d(t,e);e+=3;g["width"]=b=1+d(t,e);e+=3;g["height"]=m=1+d(t,e);e+=3;g["duration"]=P=d(t,e);e+=3;I=t[e++];g["dispose"]=F=I&1;g["blend"]=k=I>>1&1;break}if(u!="ANMF")e+=v}return r}var g=[0];var m=[0];var b=[];var y=new f;var w=t;var N=v(w,0);N["response"]=w;N["rgbaoutput"]=true;N["dataurl"]=false;var L=N["header"]?N["header"]:null;var A=N["frames"]?N["frames"]:null;if(L){L["loop_counter"]=L["loop_count"];g=[L["canvas_height"]];m=[L["canvas_width"]];for(var x=0;x<A.length;x++){if(A[x]["blend"]==0){break}}}var S=A[0];var _=y.WebPDecodeRGBA(w,S["src_off"],S["src_size"],m,g);S["rgba"]=_;S["imgwidth"]=m[0];S["imgheight"]=g[0];for(var P=0;P<m[0]*g[0]*4;P++){b[P]=_[P]}this.width=m;this.height=g;this.data=b;return this}ur.prototype.getData=function(){return this.data};
/**
   * @license
   * Copyright (c) 2019 Aras Abbasi
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.processWEBP=function(e,r,n,i){var a=new ur(e,false);var s=a.width,o=a.height;var u=100;var f=a.getData();var l={data:f,width:s,height:o};var c=new sr(u);var h=c.encode(l,u);return t.processJPEG.call(this,h,r,n,i)}})(z.API);
/**
   * @license
   *
   * Copyright (c) 2021 Antti Palola, https://github.com/Pantura
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */(function(t){t.processRGBA=function(t,e,r){var n=t.data;var i=n.length;var a=new Uint8Array(i/4*3);var s=new Uint8Array(i/4);var o=0;var u=0;for(var f=0;f<i;f+=4){var l=n[f];var c=n[f+1];var h=n[f+2];var d=n[f+3];a[o++]=l;a[o++]=c;a[o++]=h;s[u++]=d}var p=this.__addimage__.arrayBufferToBinaryString(a);var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:v,data:p,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}}})(z.API);
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){t.setLanguage=function(t){var e={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"};if(this.internal.languageSettings===undefined){this.internal.languageSettings={};this.internal.languageSettings.isSubscribed=false}if(e[t]!==undefined){this.internal.languageSettings.languageCode=t;if(this.internal.languageSettings.isSubscribed===false){this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")});this.internal.languageSettings.isSubscribed=true}}return this}})(z.API);(function(t){var r=t.getCharWidthsArray=function(t,r){r=r||{};var n=r.font||this.internal.getFont();var i=r.fontSize||this.internal.getFontSize();var a=r.charSpace||this.internal.getCharSpace();var s=r.widths?r.widths:n.metadata.Unicode.widths;var o=s.fof?s.fof:1;var u=r.kerning?r.kerning:n.metadata.Unicode.kerning;var f=u.fof?u.fof:1;var l=r.doKerning===false?false:true;var c=0;var h;var d=t.length;var p;var v=0;var g=s[0]||o;var m=[];for(h=0;h<d;h++){p=t.charCodeAt(h);if(typeof n.metadata.widthOfString==="function"){m.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(p))+a*(1e3/i)||0)/1e3)}else{if(l&&e(u[p])==="object"&&!isNaN(parseInt(u[p][v],10))){c=u[p][v]/f}else{c=0}m.push((s[p]||g)/o+c)}v=p}return m};var n=t.getStringUnitWidth=function(e,n){n=n||{};var i=n.fontSize||this.internal.getFontSize();var a=n.font||this.internal.getFont();var s=n.charSpace||this.internal.getCharSpace();var o=0;if(t.processArabic){e=t.processArabic(e)}if(typeof a.metadata.widthOfString==="function"){o=a.metadata.widthOfString(e,i,s)/i}else{o=r.apply(this,arguments).reduce(function(t,e){return t+e},0)}return o};var i=function t(e,r,n,i){var a=[];var s=0,o=e.length,u=0;while(s!==o&&u+r[s]<n){u+=r[s];s++}a.push(e.slice(0,s));var f=s;u=0;while(s!==o){if(u+r[s]>i){a.push(e.slice(f,s));u=0;f=s}u+=r[s];s++}if(f!==s){a.push(e.slice(f,s))}return a};var a=function t(e,a,s){if(!s){s={}}var o=[],u=[o],f=s.textIndent||0,l=0,c=0,h,d,p=e.split(" "),v=r.apply(this,[" ",s])[0],g,m,b,y;if(s.lineIndent===-1){y=p[0].length+2}else{y=s.lineIndent||0}if(y){var w=Array(y).join(" "),N=[];p.map(function(t){t=t.split(/\s*\n/);if(t.length>1){N=N.concat(t.map(function(t,e){return(e&&t.length?"\n":"")+t}))}else{N.push(t[0])}});p=N;y=n.apply(this,[w,s])}for(g=0,m=p.length;g<m;g++){var L=0;h=p[g];if(y&&h[0]=="\n"){h=h.substr(1);L=1}d=r.apply(this,[h,s]);c=d.reduce(function(t,e){return t+e},0);if(f+l+c>a||L){if(c>a){b=i.apply(this,[h,d,a-(f+l),a]);o.push(b.shift());o=[b.pop()];while(b.length){u.push([b.shift()])}c=d.slice(h.length-(o[0]?o[0].length:0)).reduce(function(t,e){return t+e},0)}else{o=[h]}u.push(o);f=c+y;l=v}else{o.push(h);f+=l+c;l=v}}var A;if(y){A=function t(e,r){return(r?w:"")+e.join(" ")}}else{A=function t(e){return e.join(" ")}}return u.map(A)};t.splitTextToSize=function(t,e,r){r=r||{};var n=r.fontSize||this.internal.getFontSize(),i=function(t){var e={0:1},r={};if(!t.widths||!t.kerning){var n=this.internal.getFont(t.fontName,t.fontStyle),i="Unicode";if(n.metadata[i]){return{widths:n.metadata[i].widths||e,kerning:n.metadata[i].kerning||r}}else{return{font:n.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}}else{return{widths:t.widths,kerning:t.kerning}}}.call(this,r);var s;if(Array.isArray(t)){s=t}else{s=String(t).split(/\r?\n/)}var o=1*this.internal.scaleFactor*e/n;i.textIndent=r.textIndent?r.textIndent*1*this.internal.scaleFactor/n:0;i.lineIndent=r.lineIndent;var u,f,l=[];for(u=0,f=s.length;u<f;u++){l=l.concat(a.apply(this,[s[u],o,i]))}return l}})(z.API);
/**
   * This file adds the standard font metrics to jsPDF.
   *
   * Font metrics data is reprocessed derivative of contents of
   * "Font Metrics for PDF Core 14 Fonts" package, which exhibits the following copyright and license:
   *
   * Copyright (c) 1989, 1990, 1991, 1992, 1993, 1997 Adobe Systems Incorporated. All Rights Reserved.
   *
   * This file and the 14 PostScript(R) AFM files it accompanies may be used,
   * copied, and distributed for any purpose and without charge, with or without
   * modification, provided that all copyright notices are retained; that the AFM
   * files are not distributed without this file; that all modifications to this
   * file or any of the AFM files are prominently noted in the modified file(s);
   * and that this paragraph is not modified. Adobe Systems has no responsibility
   * or obligation to support the use of the AFM files.
   *
   * @name standard_fonts_metrics
   * @module
   */(function(t){t.__fontmetrics__=t.__fontmetrics__||{};var r="0123456789abcdef",n="klmnopqrstuvwxyz",i={},a={};for(var s=0;s<n.length;s++){i[n[s]]=r[s];a[r[s]]=n[s]}var o=function t(e){return"0x"+parseInt(e,10).toString(16)};var u=t.__fontmetrics__.compress=function(t){var r=["{"];var n,i,s,f;for(var l in t){n=t[l];if(!isNaN(parseInt(l,10))){l=parseInt(l,10);i=o(l).slice(2);i=i.slice(0,-1)+a[i.slice(-1)]}else{i="'"+l+"'"}if(typeof n=="number"){if(n<0){s=o(n).slice(3);f="-"}else{s=o(n).slice(2);f=""}s=f+s.slice(0,-1)+a[s.slice(-1)]}else{if(e(n)==="object"){s=u(n)}else{throw new Error("Don't know what to do with value type "+e(n)+".")}}r.push(i+s)}r.push("}");return r.join("")};var f=t.__fontmetrics__.uncompress=function(t){if(typeof t!=="string"){throw new Error("Invalid argument passed to uncompress.")}var e={},r=1,n,a=e,s=[],o,u="",f="",l,c=t.length-1,h;for(var d=1;d<c;d+=1){h=t[d];if(h=="'"){if(n){l=n.join("");n=undefined}else{n=[]}}else if(n){n.push(h)}else if(h=="{"){s.push([a,l]);a={};l=undefined}else if(h=="}"){o=s.pop();o[0][o[1]]=a;l=undefined;a=o[0]}else if(h=="-"){r=-1}else{if(l===undefined){if(i.hasOwnProperty(h)){u+=i[h];l=parseInt(u,16)*r;r=+1;u=""}else{u+=h}}else{if(i.hasOwnProperty(h)){f+=i[h];a[l]=parseInt(f,16)*r;r=+1;l=undefined;f=""}else{f+=h}}}}return e};var l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")};var c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}};var h={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font;var r=h["Unicode"][e.postScriptName];if(r){e.metadata["Unicode"]={};e.metadata["Unicode"].widths=r.widths;e.metadata["Unicode"].kerning=r.kerning}var n=c["Unicode"][e.postScriptName];if(n){e.metadata["Unicode"].encoding=n;e.encoding=n.codePages[0]}}])})(z.API);
/**
   * @license
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=function t(e){var r=e.length;var n=new Uint8Array(r);for(var i=0;i<r;i++){n[i]=e.charCodeAt(i)}return n};var r=function r(n,i){if(/^\x00\x01\x00\x00/.test(i)){i=e(i)}else{i=e(d(i))}n.metadata=t.API.TTFFont.open(i);n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]};n.metadata.glyIdsUsed=[0]};t.API.events.push(["addFont",function(t){var e=undefined;var n=t.font;var i=t.instance;if(n.isStandardFont){return}if(typeof i!=="undefined"){if(i.existsFileInVFS(n.postScriptName)===false){e=i.loadFile(n.postScriptName)}else{e=i.getFileFromVFS(n.postScriptName)}if(typeof e!=="string"){throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').")}r(n,e)}else{throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').")}}])})(z);(function(n){function i(){return function(){if(r["canvg"]){return Promise.resolve(r["canvg"])}if((typeof t==="undefined"?"undefined":e(t))==="object"&&typeof module!=="undefined"){return new Promise(function(t,e){try{t(require("canvg"))}catch(t){e(t)}})}if(typeof define==="function"&&define.amd){return new Promise(function(t,e){try{require(["canvg"],t)}catch(t){e(t)}})}return Promise.reject(new Error("Could not load canvg"))}().catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}n.addSvgAsImage=function(t,e,r,n,a,o,u,f){if(isNaN(e)||isNaN(r)){s.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments);throw new Error("Invalid coordinates passed to jsPDF.addSvgAsImage")}if(isNaN(n)||isNaN(a)){s.error("jsPDF.addSvgAsImage: Invalid measurements",arguments);throw new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage")}var l=document.createElement("canvas");l.width=n;l.height=a;var c=l.getContext("2d");c.fillStyle="#fff";c.fillRect(0,0,l.width,l.height);var h={ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true};var d=this;return i().then(function(e){return e.fromString(c,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(t){return t.render(h)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,r,n,a,u,f)})}})(z.API);
/**
   * @license
   * ====================================================================
   * Copyright (c) 2013 Eduardo Menezes de Morais, eduardo.morais@usp.br
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */(function(t){t.putTotalPages=function(t){var e;var r=0;if(parseInt(this.internal.getFont().id.substr(1),10)<15){e=new RegExp(t,"g");r=this.internal.getNumberOfPages()}else{e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g");r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont())}for(var n=1;n<=this.internal.getNumberOfPages();n++){for(var i=0;i<this.internal.pages[n].length;i++){this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r)}}return this}})(z.API);(function(t){t.viewerPreferences=function(t,r){t=t||{};r=r||false;var n;var i={HideToolbar:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.3},HideMenubar:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.3},HideWindowUI:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.3},FitWindow:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.3},CenterWindow:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.3},DisplayDocTitle:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:false,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:false,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:false,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:false,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:false,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:false,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:false,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:false,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:false,value:false,type:"boolean",explicitSet:false,valueSet:[true,false],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:false,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:false,valueSet:null,pdfVersion:1.7}};var a=Object.keys(i);var s=[];var o=0;var u=0;var f=0;var l;var c;var h;function d(t,e){var r;var n=false;for(r=0;r<t.length;r+=1){if(t[r]===e){n=true}}return n}if(this.internal.viewerpreferences===undefined){this.internal.viewerpreferences={};this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i));this.internal.viewerpreferences.isSubscribed=false}n=this.internal.viewerpreferences.configuration;if(t==="reset"||r===true){var p=a.length;for(f=0;f<p;f+=1){n[a[f]].value=n[a[f]].defaultValue;n[a[f]].explicitSet=false}}if(e(t)==="object"){for(c in t){h=t[c];if(d(a,c)&&h!==undefined){if(n[c].type==="boolean"&&typeof h==="boolean"){n[c].value=h}else if(n[c].type==="name"&&d(n[c].valueSet,h)){n[c].value=h}else if(n[c].type==="integer"&&Number.isInteger(h)){n[c].value=h}else if(n[c].type==="array"){for(o=0;o<h.length;o+=1){l=true;if(h[o].length===1&&typeof h[o][0]==="number"){s.push(String(h[o]-1))}else if(h[o].length>1){for(u=0;u<h[o].length;u+=1){if(typeof h[o][u]!=="number"){l=false}}if(l===true){s.push([h[o][0]-1,h[o][1]-1].join(" "))}}}n[c].value="["+s.join(" ")+"]"}else{n[c].value=n[c].defaultValue}n[c].explicitSet=true}}}if(this.internal.viewerpreferences.isSubscribed===false){this.internal.events.subscribe("putCatalog",function(){var t=[];var e;for(e in n){if(n[e].explicitSet===true){if(n[e].type==="name"){t.push("/"+e+" /"+n[e].value)}else{t.push("/"+e+" "+n[e].value)}}}if(t.length!==0){this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}});this.internal.viewerpreferences.isSubscribed=true}this.internal.viewerpreferences.configuration=n;return this}})(z.API);
/** ====================================================================
   * @license
   * jsPDF XMP metadata plugin
   * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
   *
   * Permission is hereby granted, free of charge, to any person obtaining
   * a copy of this software and associated documentation files (the
   * "Software"), to deal in the Software without restriction, including
   * without limitation the rights to use, copy, modify, merge, publish,
   * distribute, sublicense, and/or sell copies of the Software, and to
   * permit persons to whom the Software is furnished to do so, subject to
   * the following conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
   * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
   * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
   * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
   * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
   * ====================================================================
   */(function(t){var e=function t(){var e='<x:xmpmeta xmlns:x="adobe:ns:meta/">';var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>';var n="</jspdf:metadata></rdf:Description></rdf:RDF>";var i="</x:xmpmeta>";var a=unescape(encodeURIComponent(e));var s=unescape(encodeURIComponent(r));var o=unescape(encodeURIComponent(this.internal.__metadata__.metadata));var u=unescape(encodeURIComponent(n));var f=unescape(encodeURIComponent(i));var l=s.length+o.length+u.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject();this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>");this.internal.write("stream");this.internal.write(a+s+o+u+f);this.internal.write("endstream");this.internal.write("endobj")};var r=function t(){if(this.internal.__metadata__.metadata_object_number){this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")}};t.addMetadata=function(t,n){if(typeof this.internal.__metadata__==="undefined"){this.internal.__metadata__={metadata:t,namespaceuri:n||"http://jspdf.default.namespaceuri/"};this.internal.events.subscribe("putCatalog",r);this.internal.events.subscribe("postPutResources",e)}return this}})(z.API);(function(t){var e=t.API;var r=e.pdfEscape16=function(t,e){var r=e.metadata.Unicode.widths;var n=["","0","00","000","0000"];var i=[""];for(var a=0,s=t.length,o;a<s;++a){o=e.metadata.characterToGlyph(t.charCodeAt(a));e.metadata.glyIdsUsed.push(o);e.metadata.toUnicode[o]=t.charCodeAt(a);if(r.indexOf(o)==-1){r.push(o);r.push([parseInt(e.metadata.widthOfGlyph(o),10)])}if(o=="0"){return i.join("")}else{o=o.toString(16);i.push(n[4-o.length],o)}}return i.join("")};var n=function t(e){var r,n,i,a,s,o,u;s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange";n=Object.keys(e).sort(function(t,e){return t-e});i=[];for(o=0,u=n.length;o<u;o++){r=n[o];if(i.length>=100){s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar";i=[]}if(e[r]!==undefined&&e[r]!==null&&typeof e[r].toString==="function"){a=("0000"+e[r].toString(16)).slice(-4);r=("0000"+(+r).toString(16)).slice(-4);i.push("<"+r+"><"+a+">")}}if(i.length){s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"}s+="endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend";return s};var i=function e(r){var i=r.font;var a=r.out;var s=r.newObject;var o=r.putStream;if(i.metadata instanceof t.API.TTFFont&&i.encoding==="Identity-H"){var u=i.metadata.Unicode.widths;var f=i.metadata.subset.encode(i.metadata.glyIdsUsed,1);var l=f;var c="";for(var h=0;h<l.length;h++){c+=String.fromCharCode(l[h])}var d=s();o({data:c,addLength1:true,objectId:d});a("endobj");var p=s();var v=n(i.metadata.toUnicode);o({data:v,addLength1:true,objectId:p});a("endobj");var g=s();a("<<");a("/Type /FontDescriptor");a("/FontName /"+E(i.fontName));a("/FontFile2 "+d+" 0 R");a("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox));a("/Flags "+i.metadata.flags);a("/StemV "+i.metadata.stemV);a("/ItalicAngle "+i.metadata.italicAngle);a("/Ascent "+i.metadata.ascender);a("/Descent "+i.metadata.decender);a("/CapHeight "+i.metadata.capHeight);a(">>");a("endobj");var m=s();a("<<");a("/Type /Font");a("/BaseFont /"+E(i.fontName));a("/FontDescriptor "+g+" 0 R");a("/W "+t.API.PDFObject.convert(u));a("/CIDToGIDMap /Identity");a("/DW 1000");a("/Subtype /CIDFontType2");a("/CIDSystemInfo");a("<<");a("/Supplement 0");a("/Registry (Adobe)");a("/Ordering ("+i.encoding+")");a(">>");a(">>");a("endobj");i.objectNumber=s();a("<<");a("/Type /Font");a("/Subtype /Type0");a("/ToUnicode "+p+" 0 R");a("/BaseFont /"+E(i.fontName));a("/Encoding /"+i.encoding);a("/DescendantFonts ["+m+" 0 R]");a(">>");a("endobj");i.isAlreadyPutted=true}};e.events.push(["putFont",function(t){i(t)}]);var a=function e(r){var i=r.font;var a=r.out;var s=r.newObject;var o=r.putStream;if(i.metadata instanceof t.API.TTFFont&&i.encoding==="WinAnsiEncoding"){var u=i.metadata.rawData;var f=u;var l="";for(var c=0;c<f.length;c++){l+=String.fromCharCode(f[c])}var h=s();o({data:l,addLength1:true,objectId:h});a("endobj");var d=s();var p=n(i.metadata.toUnicode);o({data:p,addLength1:true,objectId:d});a("endobj");var v=s();a("<<");a("/Descent "+i.metadata.decender);a("/CapHeight "+i.metadata.capHeight);a("/StemV "+i.metadata.stemV);a("/Type /FontDescriptor");a("/FontFile2 "+h+" 0 R");a("/Flags 96");a("/FontBBox "+t.API.PDFObject.convert(i.metadata.bbox));a("/FontName /"+E(i.fontName));a("/ItalicAngle "+i.metadata.italicAngle);a("/Ascent "+i.metadata.ascender);a(">>");a("endobj");i.objectNumber=s();for(var g=0;g<i.metadata.hmtx.widths.length;g++){i.metadata.hmtx.widths[g]=parseInt(i.metadata.hmtx.widths[g]*(1e3/i.metadata.head.unitsPerEm))}a("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+E(i.fontName)+"/FontDescriptor "+v+" 0 R"+"/Encoding/"+i.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(i.metadata.hmtx.widths)+">>");a("endobj");i.isAlreadyPutted=true}};e.events.push(["putFont",function(t){a(t)}]);var s=function t(e){var n=e.text||"";var i=e.x;var a=e.y;var s=e.options||{};var o=e.mutex||{};var u=o.pdfEscape;var f=o.activeFontKey;var l=o.fonts;var c=f;var h="",d=0,p;var v="";var g=l[c].encoding;if(l[c].encoding!=="Identity-H"){return{text:n,x:i,y:a,options:s,mutex:o}}v=n;c=f;if(Array.isArray(n)){v=n[0]}for(d=0;d<v.length;d+=1){if(l[c].metadata.hasOwnProperty("cmap")){p=l[c].metadata.cmap.unicode.codeMap[v[d].charCodeAt(0)]}if(!p){if(v[d].charCodeAt(0)<256&&l[c].metadata.hasOwnProperty("Unicode")){h+=v[d]}else{h+=""}}else{h+=v[d]}}var m="";if(parseInt(c.slice(1))<14||g==="WinAnsiEncoding"){m=u(h,c).split("").map(function(t){return t.charCodeAt(0).toString(16)}).join("")}else if(g==="Identity-H"){m=r(h,l[c])}o.isHex=true;return{text:m,x:i,y:a,options:s,mutex:o}};var o=function t(e){var r=e.text||"",n=e.x,i=e.y,a=e.options,o=e.mutex;var u=[];var f={text:r,x:n,y:i,options:a,mutex:o};if(Array.isArray(r)){var l=0;for(l=0;l<r.length;l+=1){if(Array.isArray(r[l])){if(r[l].length===3){u.push([s(Object.assign({},f,{text:r[l][0]})).text,r[l][1],r[l][2]])}else{u.push(s(Object.assign({},f,{text:r[l]})).text)}}else{u.push(s(Object.assign({},f,{text:r[l]})).text)}}e.text=u}else{e.text=s(Object.assign({},f,{text:r})).text}};e.events.push(["postProcessText",o])})(z);
/**
   * @license
   * jsPDF virtual FileSystem functionality
   *
   * Licensed under the MIT License.
   * http://opensource.org/licenses/mit-license
   */(function(t){var e=function t(){if(typeof this.internal.vFS==="undefined"){this.internal.vFS={}}return true};t.existsFileInVFS=function(t){e.call(this);return typeof this.internal.vFS[t]!=="undefined"};t.addFileToVFS=function(t,r){e.call(this);this.internal.vFS[t]=r;return this};t.getFileFromVFS=function(t){e.call(this);if(typeof this.internal.vFS[t]!=="undefined"){return this.internal.vFS[t]}return null}})(z.API);
/**
   * @license
   * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
   * MIT License
   */(function(t){var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"];t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var e=r;var n=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]];var i=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]];var a={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6};var s={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7};var o=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"];var u=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/);var f=false,l,c,h=0,d=1,p,v,g,m,b,y=h;this.__bidiEngine__={};var w=function t(e,r){if(r){for(var n=0;n<e.length;n++){r[n]=n}}if(v===undefined){v=L(e)}if(m===undefined){m=L(e)}};var N=function t(r){var n=r.charCodeAt(),i=n>>8,a=s[i];if(a!==undefined){return e[a*256+(n&255)]}else if(i===252||i===253){return"AL"}else if(u.test(i)){return"L"}else if(i===8){return"R"}return"N"};var L=function t(e){for(var r=0,n;r<e.length;r++){n=N(e.charAt(r));if(n==="L"){return false}else if(n==="R"){return true}}return false};var A=function t(e,r,n,i){var a=r[i],s,o,u,h;switch(a){case"L":case"R":f=false;break;case"N":case"AN":break;case"EN":if(f){a="AN"}break;case"AL":f=true;a="R";break;case"WS":a="N";break;case"CS":if(i<1||i+1>=r.length||(s=n[i-1])!=="EN"&&s!=="AN"||(o=r[i+1])!=="EN"&&o!=="AN"){a="N"}else if(f){o="AN"}a=o===s?o:"N";break;case"ES":s=i>0?n[i-1]:"B";a=s==="EN"&&i+1<r.length&&r[i+1]==="EN"?"EN":"N";break;case"ET":if(i>0&&n[i-1]==="EN"){a="EN";break}else if(f){a="N";break}u=i+1;h=r.length;while(u<h&&r[u]==="ET"){u++}if(u<h&&r[u]==="EN"){a="EN"}else{a="N"}break;case"NSM":if(p&&!v){h=r.length;u=i+1;while(u<h&&r[u]==="NSM"){u++}if(u<h){var d=e[i];var g=d>=1425&&d<=2303||d===64286;s=r[u];if(g&&(s==="R"||s==="AL")){a="R";break}}}if(i<1||(s=r[i-1])==="B"){a="N"}else{a=n[i-1]}break;case"B":f=false;l=true;a=y;break;case"S":c=true;a="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":f=false;break;case"BN":a="N";break}return a};var x=function t(e,r,n){for(var i=0;i<n;i++){if(e[i]==="S"){r[i]=y;for(var a=i-1;a>=0;a--){if(e[a]==="WS"){r[a]=y}else{break}}}}};var S=function t(e,r,n){var i=e.split("");if(n){_(i,n,{hiLevel:y})}i.reverse();r&&r.reverse();return i.join("")};var _=function t(e,r,s){var o,u,h,d,p,v,g=-1,m=e.length,b=0,w=[],L=y?i:n,S=[];f=false;l=false;c=false;for(h=0;h<m;h++){S[h]=N(e[h])}for(d=0;d<m;d++){v=b;w[d]=A(e,S,w,d);b=L[v][a[w[d]]];o=b&240;b&=15;r[d]=p=L[b][5];if(o>0){if(o===16){for(h=g;h<d;h++){r[h]=1}g=-1}else{g=-1}}u=L[b][6];if(u){if(g===-1){g=d}}else{if(g>-1){for(h=g;h<d;h++){r[h]=p}g=-1}}if(S[d]==="B"){r[d]=0}s.hiLevel|=p}if(c){x(S,r,m)}};var P=function t(e,r,n,i,a){if(a.hiLevel<e){return}if(e===1&&y===d&&!l){r.reverse();n&&n.reverse();return}var s,o,u,f,c=r.length,h=0;while(h<c){if(i[h]>=e){u=h+1;while(u<c&&i[u]>=e){u++}for(f=h,o=u-1;f<o;f++,o--){s=r[f];r[f]=r[o];r[o]=s;if(n){s=n[f];n[f]=n[o];n[o]=s}}h=u}h++}};var k=function t(e,r,n){if(n.hiLevel!==0&&b){for(var i=0,a;i<e.length;i++){if(r[i]===1){a=o.indexOf(e[i]);if(a>=0){e[i]=o[a+1]}}}}};var F=function t(e,r,n){var i=e.split(""),a={hiLevel:y};if(!n){n=[]}_(i,n,a);k(i,n,a);P(d+1,i,r,n,a);P(d,i,r,n,a);return i.join("")};this.__bidiEngine__.doBidiReorder=function(t,e,r){w(t,e);if(!p&&g&&!m){y=v?d:h;t=F(t,e,r)}else if(p&&g&&v^m){y=v?d:h;t=S(t,e,r)}else if(!p&&g&&m){y=v?d:h;t=F(t,e,r);t=S(t,e)}else if(p&&!v&&!g&&!m){y=h;t=F(t,e,r)}else if(p&&!g&&v^m){t=S(t,e);if(v){y=h;t=F(t,e,r)}else{y=d;t=F(t,e,r);t=S(t,e)}}else if(p&&v&&!g&&m){y=d;t=F(t,e,r);t=S(t,e)}else if(!p&&!g&&v^m){var n=b;if(v){y=d;t=F(t,e,r);y=h;b=false;t=F(t,e,r);b=n}else{y=h;t=F(t,e,r);t=S(t,e);y=d;b=false;t=F(t,e,r);b=n;t=S(t,e)}}return t};this.__bidiEngine__.setOptions=function(t){if(t){p=t.isInputVisual;g=t.isOutputVisual;v=t.isInputRtl;m=t.isOutputRtl;b=t.isSymmetricSwapping}};this.__bidiEngine__.setOptions(t);return this.__bidiEngine__};var r=e;var n=new t.__bidiEngine__({isInputVisual:true});var i=function t(e){var r=e.text;var i=e.x;var a=e.y;var s=e.options||{};var o=e.mutex||{};var u=s.lang;var f=[];s.isInputVisual=typeof s.isInputVisual==="boolean"?s.isInputVisual:true;n.setOptions(s);if(Object.prototype.toString.call(r)==="[object Array]"){var l=0;f=[];for(l=0;l<r.length;l+=1){if(Object.prototype.toString.call(r[l])==="[object Array]"){f.push([n.doBidiReorder(r[l][0]),r[l][1],r[l][2]])}else{f.push([n.doBidiReorder(r[l])])}}e.text=f}else{e.text=n.doBidiReorder(r)}n.setOptions({isInputVisual:true})};t.API.events.push(["postProcessText",i])})(z);z.API.TTFFont=function(){t.open=function(e){return new t(e)};function t(t){var e;this.rawData=t;e=this.contents=new fr(t);this.contents.pos=4;if(e.readString(4)==="ttcf"){throw new Error("TTCF not supported.")}else{e.pos=0;this.parse();this.subset=new Ir(this);this.registerTTF()}}t.prototype.parse=function(){this.directory=new lr(this.contents);this.head=new pr(this);this.name=new Nr(this);this.cmap=new gr(this);this.toUnicode={};this.hhea=new mr(this);this.maxp=new Lr(this);this.hmtx=new Ar(this);this.post=new yr(this);this.os2=new br(this);this.loca=new kr(this);this.glyf=new Sr(this);this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender;this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender;this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap;return this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]};t.prototype.registerTTF=function(){var t,e,r,n,i;this.scaleFactor=1e3/this.head.unitsPerEm;this.bbox=function(){var e,r,n,i;n=this.bbox;i=[];for(e=0,r=n.length;e<r;e++){t=n[e];i.push(Math.round(t*this.scaleFactor))}return i}.call(this);this.stemV=0;if(this.post.exists){n=this.post.italic_angle;e=n>>16;r=n&255;if((e&32768)!==0){e=-((e^65535)+1)}this.italicAngle=+(""+e+"."+r)}else{this.italicAngle=0}this.ascender=Math.round(this.ascender*this.scaleFactor);this.decender=Math.round(this.decender*this.scaleFactor);this.lineGap=Math.round(this.lineGap*this.scaleFactor);this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender;this.xHeight=this.os2.exists&&this.os2.xHeight||0;this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8;this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7;this.isScript=this.familyClass===10;this.flags=0;if(this.post.isFixedPitch){this.flags|=1<<0}if(this.isSerif){this.flags|=1<<1}if(this.isScript){this.flags|=1<<3}if(this.italicAngle!==0){this.flags|=1<<6}this.flags|=1<<5;if(!this.cmap.unicode){throw new Error("No unicode cmap for font")}};t.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0};t.prototype.widthOfGlyph=function(t){var e;e=1e3/this.head.unitsPerEm;return this.hmtx.forGlyph(t).advance*e};t.prototype.widthOfString=function(t,e,r){var n,i,a,s,o;t=""+t;s=0;for(i=0,o=t.length;0<=o?i<o:i>o;i=0<=o?++i:--i){n=t.charCodeAt(i);s+=this.widthOfGlyph(this.characterToGlyph(n))+r*(1e3/e)||0}a=e/1e3;return s*a};t.prototype.lineHeight=function(t,e){var r;if(e==null){e=false}r=e?this.lineGap:0;return(this.ascender+r-this.decender)/1e3*t};return t}();var fr=function(){function t(t){this.data=t!=null?t:[];this.pos=0;this.length=this.data.length}t.prototype.readByte=function(){return this.data[this.pos++]};t.prototype.writeByte=function(t){return this.data[this.pos++]=t};t.prototype.readUInt32=function(){var t,e,r,n;t=this.readByte()*16777216;e=this.readByte()<<16;r=this.readByte()<<8;n=this.readByte();return t+e+r+n};t.prototype.writeUInt32=function(t){this.writeByte(t>>>24&255);this.writeByte(t>>16&255);this.writeByte(t>>8&255);return this.writeByte(t&255)};t.prototype.readInt32=function(){var t;t=this.readUInt32();if(t>=2147483648){return t-4294967296}else{return t}};t.prototype.writeInt32=function(t){if(t<0){t+=4294967296}return this.writeUInt32(t)};t.prototype.readUInt16=function(){var t,e;t=this.readByte()<<8;e=this.readByte();return t|e};t.prototype.writeUInt16=function(t){this.writeByte(t>>8&255);return this.writeByte(t&255)};t.prototype.readInt16=function(){var t;t=this.readUInt16();if(t>=32768){return t-65536}else{return t}};t.prototype.writeInt16=function(t){if(t<0){t+=65536}return this.writeUInt16(t)};t.prototype.readString=function(t){var e,r;r=[];for(e=0;0<=t?e<t:e>t;e=0<=t?++e:--e){r[e]=String.fromCharCode(this.readByte())}return r.join("")};t.prototype.writeString=function(t){var e,r,n;n=[];for(e=0,r=t.length;0<=r?e<r:e>r;e=0<=r?++e:--e){n.push(this.writeByte(t.charCodeAt(e)))}return n};t.prototype.readShort=function(){return this.readInt16()};t.prototype.writeShort=function(t){return this.writeInt16(t)};t.prototype.readLongLong=function(){var t,e,r,n,i,a,s,o;t=this.readByte();e=this.readByte();r=this.readByte();n=this.readByte();i=this.readByte();a=this.readByte();s=this.readByte();o=this.readByte();if(t&128){return((t^255)*72057594037927940+(e^255)*281474976710656+(r^255)*1099511627776+(n^255)*4294967296+(i^255)*16777216+(a^255)*65536+(s^255)*256+(o^255)+1)*-1}return t*72057594037927940+e*281474976710656+r*1099511627776+n*4294967296+i*16777216+a*65536+s*256+o};t.prototype.writeLongLong=function(t){var e,r;e=Math.floor(t/4294967296);r=t&4294967295;this.writeByte(e>>24&255);this.writeByte(e>>16&255);this.writeByte(e>>8&255);this.writeByte(e&255);this.writeByte(r>>24&255);this.writeByte(r>>16&255);this.writeByte(r>>8&255);return this.writeByte(r&255)};t.prototype.readInt=function(){return this.readInt32()};t.prototype.writeInt=function(t){return this.writeInt32(t)};t.prototype.read=function(t){var e,r;e=[];for(r=0;0<=t?r<t:r>t;r=0<=t?++r:--r){e.push(this.readByte())}return e};t.prototype.write=function(t){var e,r,n,i;i=[];for(r=0,n=t.length;r<n;r++){e=t[r];i.push(this.writeByte(e))}return i};return t}();var lr=function(){var t;function e(t){var e,r,n;this.scalarType=t.readInt();this.tableCount=t.readShort();this.searchRange=t.readShort();this.entrySelector=t.readShort();this.rangeShift=t.readShort();this.tables={};for(r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r){e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()};this.tables[e.tag]=e}}e.prototype.encode=function(e){var r,n,i,a,s,o,u,f,l,c,h,d,p,v;d=Object.keys(e).length;o=Math.log(2);l=Math.floor(Math.log(d)/o)*16;a=Math.floor(l/o);f=d*16-l;n=new fr;n.writeInt(this.scalarType);n.writeShort(d);n.writeShort(l);n.writeShort(a);n.writeShort(f);i=d*16;u=n.pos+i;s=null;p=[];for(v in e){h=e[v];n.writeString(v);n.writeInt(t(h));n.writeInt(u);n.writeInt(h.length);p=p.concat(h);if(v==="head"){s=u}u+=h.length;while(u%4){p.push(0);u++}}n.write(p);c=t(n.data);r=2981146554-c;n.pos=s+8;n.writeUInt32(r);return n.data};t=function t(e){var r,n,i,a;e=xr.call(e);while(e.length%4){e.push(0)}i=new fr(e);n=0;for(r=0,a=e.length;r<a;r=r+=4){n+=i.readUInt32()}return n&4294967295};return e}();var cr,hr={}.hasOwnProperty,dr=function t(e,r){for(var n in r){if(hr.call(r,n))e[n]=r[n]}function i(){this.constructor=e}i.prototype=r.prototype;e.prototype=new i;e.__super__=r.prototype;return e};cr=function(){function t(t){var e;this.file=t;e=this.file.directory.tables[this.tag];this.exists=!!e;if(e){this.offset=e.offset,this.length=e.length;this.parse(this.file.contents)}}t.prototype.parse=function(){};t.prototype.encode=function(){};t.prototype.raw=function(){if(!this.exists){return null}this.file.contents.pos=this.offset;return this.file.contents.read(this.length)};return t}();var pr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="head";e.prototype.parse=function(t){t.pos=this.offset;this.version=t.readInt();this.revision=t.readInt();this.checkSumAdjustment=t.readInt();this.magicNumber=t.readInt();this.flags=t.readShort();this.unitsPerEm=t.readShort();this.created=t.readLongLong();this.modified=t.readLongLong();this.xMin=t.readShort();this.yMin=t.readShort();this.xMax=t.readShort();this.yMax=t.readShort();this.macStyle=t.readShort();this.lowestRecPPEM=t.readShort();this.fontDirectionHint=t.readShort();this.indexToLocFormat=t.readShort();return this.glyphDataFormat=t.readShort()};e.prototype.encode=function(t){var e;e=new fr;e.writeInt(this.version);e.writeInt(this.revision);e.writeInt(this.checkSumAdjustment);e.writeInt(this.magicNumber);e.writeShort(this.flags);e.writeShort(this.unitsPerEm);e.writeLongLong(this.created);e.writeLongLong(this.modified);e.writeShort(this.xMin);e.writeShort(this.yMin);e.writeShort(this.xMax);e.writeShort(this.yMax);e.writeShort(this.macStyle);e.writeShort(this.lowestRecPPEM);e.writeShort(this.fontDirectionHint);e.writeShort(t);e.writeShort(this.glyphDataFormat);return e.data};return e}(cr);var vr=function(){function t(t,e){var r,n,i,a,s,o,u,f,l,c,h,d,p,v,g,m,b,y;this.platformID=t.readUInt16();this.encodingID=t.readShort();this.offset=e+t.readInt();c=t.pos;t.pos=this.offset;this.format=t.readUInt16();this.length=t.readUInt16();this.language=t.readUInt16();this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4;this.codeMap={};switch(this.format){case 0:for(o=0;o<256;++o){this.codeMap[o]=t.readByte()}break;case 4:d=t.readUInt16();h=d/2;t.pos+=6;i=function(){var e,r;r=[];for(o=e=0;0<=h?e<h:e>h;o=0<=h?++e:--e){r.push(t.readUInt16())}return r}();t.pos+=2;v=function(){var e,r;r=[];for(o=e=0;0<=h?e<h:e>h;o=0<=h?++e:--e){r.push(t.readUInt16())}return r}();u=function(){var e,r;r=[];for(o=e=0;0<=h?e<h:e>h;o=0<=h?++e:--e){r.push(t.readUInt16())}return r}();f=function(){var e,r;r=[];for(o=e=0;0<=h?e<h:e>h;o=0<=h?++e:--e){r.push(t.readUInt16())}return r}();n=(this.length-t.pos+this.offset)/2;s=function(){var e,r;r=[];for(o=e=0;0<=n?e<n:e>n;o=0<=n?++e:--e){r.push(t.readUInt16())}return r}();for(o=m=0,y=i.length;m<y;o=++m){g=i[o];p=v[o];for(r=b=p;p<=g?b<=g:b>=g;r=p<=g?++b:--b){if(f[o]===0){a=r+u[o]}else{l=f[o]/2+(r-p)-(h-o);a=s[l]||0;if(a!==0){a+=u[o]}}this.codeMap[r]=a&65535}}}t.pos=c}t.encode=function(t,e){var r,n,i,a,s,o,u,f,l,c,h,d,p,v,g,m,b,y,w,N,L,A,x,S,_,P,k,F,I,C,j,O,B,M,E,q,D,R,T,U,z,H,W,V,G,Y;F=new fr;a=Object.keys(t).sort(function(t,e){return t-e});switch(e){case"macroman":p=0;v=function(){var t=[];for(d=0;d<256;++d){t.push(0)}return t}();m={0:0};i={};for(I=0,B=a.length;I<B;I++){n=a[I];if(m[W=t[n]]==null){m[W]=++p}i[n]={old:t[n],new:m[t[n]]};v[n]=m[t[n]]}F.writeUInt16(1);F.writeUInt16(0);F.writeUInt32(12);F.writeUInt16(0);F.writeUInt16(262);F.writeUInt16(0);F.write(v);return{charMap:i,subtable:F.data,maxGlyphID:p+1};case"unicode":P=[];l=[];b=0;m={};r={};g=u=null;for(C=0,M=a.length;C<M;C++){n=a[C];w=t[n];if(m[w]==null){m[w]=++b}r[n]={old:w,new:m[w]};s=m[w]-n;if(g==null||s!==u){if(g){l.push(g)}P.push(n);u=s}g=n}if(g){l.push(g)}l.push(65535);P.push(65535);x=P.length;S=x*2;A=2*Math.pow(Math.log(x)/Math.LN2,2);c=Math.log(A/2)/Math.LN2;L=2*x-A;o=[];N=[];h=[];for(d=j=0,E=P.length;j<E;d=++j){_=P[d];f=l[d];if(_===65535){o.push(0);N.push(0);break}k=r[_]["new"];if(_-k>=32768){o.push(0);N.push(2*(h.length+x-d));for(n=O=_;_<=f?O<=f:O>=f;n=_<=f?++O:--O){h.push(r[n]["new"])}}else{o.push(k-_);N.push(0)}}F.writeUInt16(3);F.writeUInt16(1);F.writeUInt32(12);F.writeUInt16(4);F.writeUInt16(16+x*8+h.length*2);F.writeUInt16(0);F.writeUInt16(S);F.writeUInt16(A);F.writeUInt16(c);F.writeUInt16(L);for(z=0,q=l.length;z<q;z++){n=l[z];F.writeUInt16(n)}F.writeUInt16(0);for(H=0,D=P.length;H<D;H++){n=P[H];F.writeUInt16(n)}for(V=0,R=o.length;V<R;V++){s=o[V];F.writeUInt16(s)}for(G=0,T=N.length;G<T;G++){y=N[G];F.writeUInt16(y)}for(Y=0,U=h.length;Y<U;Y++){p=h[Y];F.writeUInt16(p)}return{charMap:r,subtable:F.data,maxGlyphID:b+1}}};return t}();var gr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="cmap";e.prototype.parse=function(t){var e,r,n;t.pos=this.offset;this.version=t.readUInt16();n=t.readUInt16();this.tables=[];this.unicode=null;for(r=0;0<=n?r<n:r>n;r=0<=n?++r:--r){e=new vr(t,this.offset);this.tables.push(e);if(e.isUnicode){if(this.unicode==null){this.unicode=e}}}return true};e.encode=function(t,e){var r,n;if(e==null){e="macroman"}r=vr.encode(t,e);n=new fr;n.writeUInt16(0);n.writeUInt16(1);r.table=n.data.concat(r.subtable);return r};return e}(cr);var mr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="hhea";e.prototype.parse=function(t){t.pos=this.offset;this.version=t.readInt();this.ascender=t.readShort();this.decender=t.readShort();this.lineGap=t.readShort();this.advanceWidthMax=t.readShort();this.minLeftSideBearing=t.readShort();this.minRightSideBearing=t.readShort();this.xMaxExtent=t.readShort();this.caretSlopeRise=t.readShort();this.caretSlopeRun=t.readShort();this.caretOffset=t.readShort();t.pos+=4*2;this.metricDataFormat=t.readShort();return this.numberOfMetrics=t.readUInt16()};return e}(cr);var br=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="OS/2";e.prototype.parse=function(t){t.pos=this.offset;this.version=t.readUInt16();this.averageCharWidth=t.readShort();this.weightClass=t.readUInt16();this.widthClass=t.readUInt16();this.type=t.readShort();this.ySubscriptXSize=t.readShort();this.ySubscriptYSize=t.readShort();this.ySubscriptXOffset=t.readShort();this.ySubscriptYOffset=t.readShort();this.ySuperscriptXSize=t.readShort();this.ySuperscriptYSize=t.readShort();this.ySuperscriptXOffset=t.readShort();this.ySuperscriptYOffset=t.readShort();this.yStrikeoutSize=t.readShort();this.yStrikeoutPosition=t.readShort();this.familyClass=t.readShort();this.panose=function(){var e,r;r=[];for(e=0;e<10;++e){r.push(t.readByte())}return r}();this.charRange=function(){var e,r;r=[];for(e=0;e<4;++e){r.push(t.readInt())}return r}();this.vendorID=t.readString(4);this.selection=t.readShort();this.firstCharIndex=t.readShort();this.lastCharIndex=t.readShort();if(this.version>0){this.ascent=t.readShort();this.descent=t.readShort();this.lineGap=t.readShort();this.winAscent=t.readShort();this.winDescent=t.readShort();this.codePageRange=function(){var e,r;r=[];for(e=0;e<2;e=++e){r.push(t.readInt())}return r}();if(this.version>1){this.xHeight=t.readShort();this.capHeight=t.readShort();this.defaultChar=t.readShort();this.breakChar=t.readShort();return this.maxContext=t.readShort()}}};return e}(cr);var yr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="post";e.prototype.parse=function(t){var e,r,n;t.pos=this.offset;this.format=t.readInt();this.italicAngle=t.readInt();this.underlinePosition=t.readShort();this.underlineThickness=t.readShort();this.isFixedPitch=t.readInt();this.minMemType42=t.readInt();this.maxMemType42=t.readInt();this.minMemType1=t.readInt();this.maxMemType1=t.readInt();switch(this.format){case 65536:break;case 131072:r=t.readUInt16();this.glyphNameIndex=[];var i;for(i=0;0<=r?i<r:i>r;i=0<=r?++i:--i){this.glyphNameIndex.push(t.readUInt16())}this.names=[];n=[];while(t.pos<this.offset+this.length){e=t.readByte();n.push(this.names.push(t.readString(e)))}return n;case 151552:r=t.readUInt16();return this.offsets=t.read(r);case 196608:break;case 262144:return this.map=function(){var e,r,n;n=[];for(i=e=0,r=this.file.maxp.numGlyphs;0<=r?e<r:e>r;i=0<=r?++e:--e){n.push(t.readUInt32())}return n}.call(this)}};return e}(cr);
/* comment : Store copyright information, platformID, encodingID, and languageID in the NameEntry object.*/var wr=function(){function t(t,e){this.raw=t;this.length=t.length;this.platformID=e.platformID;this.encodingID=e.encodingID;this.languageID=e.languageID}return t}();var Nr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="name";e.prototype.parse=function(t){var e,r,n,i,a,s,o,u,f,l,c;t.pos=this.offset;t.readShort();e=t.readShort();s=t.readShort();r=[];for(i=0;0<=e?i<e:i>e;i=0<=e?++i:--i){r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()})}o={};for(i=f=0,l=r.length;f<l;i=++f){n=r[i];t.pos=n.offset;u=t.readString(n.length);a=new wr(u,n);if(o[c=n.nameID]==null){o[c]=[]}o[n.nameID].push(a)}this.strings=o;this.copyright=o[0];this.fontFamily=o[1];this.fontSubfamily=o[2];this.uniqueSubfamily=o[3];this.fontName=o[4];this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}this.trademark=o[7];this.manufacturer=o[8];this.designer=o[9];this.description=o[10];this.vendorUrl=o[11];this.designerUrl=o[12];this.license=o[13];this.licenseUrl=o[14];this.preferredFamily=o[15];this.preferredSubfamily=o[17];this.compatibleFull=o[18];return this.sampleText=o[19]};return e}(cr);var Lr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="maxp";e.prototype.parse=function(t){t.pos=this.offset;this.version=t.readInt();this.numGlyphs=t.readUInt16();this.maxPoints=t.readUInt16();this.maxContours=t.readUInt16();this.maxCompositePoints=t.readUInt16();this.maxComponentContours=t.readUInt16();this.maxZones=t.readUInt16();this.maxTwilightPoints=t.readUInt16();this.maxStorage=t.readUInt16();this.maxFunctionDefs=t.readUInt16();this.maxInstructionDefs=t.readUInt16();this.maxStackElements=t.readUInt16();this.maxSizeOfInstructions=t.readUInt16();this.maxComponentElements=t.readUInt16();return this.maxComponentDepth=t.readUInt16()};return e}(cr);var Ar=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="hmtx";e.prototype.parse=function(t){var e,r,n,i,a,s,o;t.pos=this.offset;this.metrics=[];for(e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e){this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()})}n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics;this.leftSideBearings=function(){var r,i;i=[];for(e=r=0;0<=n?r<n:r>n;e=0<=n?++r:--r){i.push(t.readInt16())}return i}();this.widths=function(){var t,e,r,n;r=this.metrics;n=[];for(t=0,e=r.length;t<e;t++){i=r[t];n.push(i.advance)}return n}.call(this);r=this.widths[this.widths.length-1];o=[];for(e=a=0;0<=n?a<n:a>n;e=0<=n?++a:--a){o.push(this.widths.push(r))}return o};e.prototype.forGlyph=function(t){if(t in this.metrics){return this.metrics[t]}return{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}};return e}(cr);var xr=[].slice;var Sr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="glyf";e.prototype.parse=function(){return this.cache={}};e.prototype.glyphFor=function(t){var e,r,n,i,a,s,o,u,f,l;if(t in this.cache){return this.cache[t]}i=this.file.loca;e=this.file.contents;r=i.indexOf(t);n=i.lengthOf(t);if(n===0){return this.cache[t]=null}e.pos=this.offset+r;s=new fr(e.read(n));a=s.readShort();u=s.readShort();l=s.readShort();o=s.readShort();f=s.readShort();if(a===-1){this.cache[t]=new Pr(s,u,l,o,f)}else{this.cache[t]=new _r(s,a,u,l,o,f)}return this.cache[t]};e.prototype.encode=function(t,e,r){var n,i,a,s,o,u;s=[];a=[];for(o=0,u=e.length;o<u;o++){i=e[o];n=t[i];a.push(s.length);if(n){s=s.concat(n.encode(r))}}a.push(s.length);return{table:s,offsets:a}};return e}(cr);var _r=function(){function t(t,e,r,n,i,a){this.raw=t;this.numberOfContours=e;this.xMin=r;this.yMin=n;this.xMax=i;this.yMax=a;this.compound=false}t.prototype.encode=function(){return this.raw.data};return t}();var Pr=function(){var t,e,r,n,i;t=1;n=8;e=32;r=64;i=128;function a(a,s,o,u,f){var l,c;this.raw=a;this.xMin=s;this.yMin=o;this.xMax=u;this.yMax=f;this.compound=true;this.glyphIDs=[];this.glyphOffsets=[];l=this.raw;while(true){c=l.readShort();this.glyphOffsets.push(l.pos);this.glyphIDs.push(l.readUInt16());if(!(c&e)){break}if(c&t){l.pos+=4}else{l.pos+=2}if(c&i){l.pos+=8}else if(c&r){l.pos+=4}else if(c&n){l.pos+=2}}}a.prototype.encode=function(){var t,e,r,n;e=new fr(xr.call(this.raw.data));n=this.glyphIDs;for(t=0,r=n.length;t<r;++t){e.pos=this.glyphOffsets[t]}return e.data};return a}();var kr=function(t){dr(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.tag="loca";e.prototype.parse=function(t){var e,r;t.pos=this.offset;e=this.file.head.indexToLocFormat;if(e===0){return this.offsets=function(){var e,n;n=[];for(r=0,e=this.length;r<e;r+=2){n.push(t.readUInt16()*2)}return n}.call(this)}else{return this.offsets=function(){var e,n;n=[];for(r=0,e=this.length;r<e;r+=4){n.push(t.readUInt32())}return n}.call(this)}};e.prototype.indexOf=function(t){return this.offsets[t]};e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]};e.prototype.encode=function(t,e){var r=new Uint32Array(this.offsets.length);var n=0;var i=0;for(var a=0;a<r.length;++a){r[a]=n;if(i<e.length&&e[i]==a){++i;r[a]=n;var s=this.offsets[a];var o=this.offsets[a+1]-s;if(o>0){n+=o}}}var u=new Array(r.length*4);for(var f=0;f<r.length;++f){u[4*f+3]=r[f]&255;u[4*f+2]=(r[f]&65280)>>8;u[4*f+1]=(r[f]&16711680)>>16;u[4*f]=(r[f]&4278190080)>>24}return u};return e}(cr);var Fr=function t(e){var r,n,i;n={};for(r in e){i=e[r];n[i]=r}return n};var Ir=function(){function t(t){this.font=t;this.subset={};this.unicodes={};this.next=33}t.prototype.generateCmap=function(){var t,e,r,n,i;n=this.font.cmap.tables[0].codeMap;t={};i=this.subset;for(e in i){r=i[e];t[e]=n[r]}return t};t.prototype.glyphsFor=function(t){var e,r,n,i,a,s,o;n={};for(a=0,s=t.length;a<s;a++){i=t[a];n[i]=this.font.glyf.glyphFor(i)}e=[];for(i in n){r=n[i];if(r!=null?r.compound:void 0){e.push.apply(e,r.glyphIDs)}}if(e.length>0){o=this.glyphsFor(e);for(i in o){r=o[i];n[i]=r}}return n};t.prototype.encode=function(t,e){var r,n,i,a,s,o,u,f,l,c,h,d,p,v,g;r=gr.encode(this.generateCmap(),"unicode");a=this.glyphsFor(t);h={0:0};g=r.charMap;for(n in g){o=g[n];h[o.old]=o["new"]}c=r.maxGlyphID;for(d in a){if(!(d in h)){h[d]=c++}}f=Fr(h);l=Object.keys(f).sort(function(t,e){return t-e});p=function(){var t,e,r;r=[];for(t=0,e=l.length;t<e;t++){s=l[t];r.push(f[s])}return r}();i=this.font.glyf.encode(a,p,h);u=this.font.loca.encode(i.offsets,p);v={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)};if(this.font.os2.exists){v["OS/2"]=this.font.os2.raw()}return this.font.directory.encode(v)};return t}();z.API.PDFObject=function(){var t;function e(){}t=function t(e,r){return(Array(r+1).join("0")+e).slice(-r)};e.convert=function(r){var n,i,a,s,o;if(Array.isArray(r)){i=function(){var t,i,a;a=[];for(t=0,i=r.length;t<i;t++){n=r[t];a.push(e.convert(n))}return a}().join(" ");return"["+i+"]"}else if(typeof r==="string"){return"/"+r}else if(r!=null?r.isString:void 0){return"("+r+")"}else if(r instanceof Date){return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)"}else if({}.toString.call(r)==="[object Object]"){s=["<<"];for(a in r){o=r[a];s.push("/"+a+" "+e.convert(o))}s.push(">>");return s.join("\n")}else{return""+r}};return e}();self.jsPDF=z});
}
});
//# sourceMappingURL=library-preload.js.map
