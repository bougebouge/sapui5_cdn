{"version":3,"file":"ShapeResizeHandler.js","names":["sap","ui","define","jQuery","Device","BaseObject","ShapeManager","Format","Core","Utility","ShapeInRowDrawer","ShapeResizeHandler","extend","constructor","oChart","call","this","_oSourceChart","_bResizing","_oResizingData","undefined","_oShapeManager","_oSourceChartId","getId","_oShapeInRowDrawer","_DEFAULT_RESIZE_CURSOR_SHOWING_THRESHOLD","_DEFAULT_MOUSE_MOVE_PIXEL","_TIMESTAMP_START_TIME_KEY","_TIMESTAMP_END_TIME_KEY","prototype","getIsResizing","getResizingData","handleShapeResize","oEvent","button","oShapeData","d3","select","target","datum","getAttribute","sClassId","split","classed","isShapeResizable","isShapeDuration","_handleShapeResizeStart","_preventBubbleAndDefault","aSvg","getDomSelectorById","shapeData","rowInfo","getRowDatumByShapeUid","uid","y","_oAxisOrdinal","elementToView","x","pageX","offset","left","offsetX","topShapeInstance","_getTopShapeInstance","startTime","endTime","getConfiguration","getRTL","getEndTime","getTime","objectInfoRef","aOldTime","resizeStartPointX","document","body","unbind","bind","_handleShapeResizing","_handleShapeResizeEnd","checkShapeResizable","sTarget","sPointX","removeClass","indexOf","hoverPointDistance","shapeStartX","shapeEndX","oShapeInstance","_getShapeInstance","oStartTime","oEndTime","getAxisTime","timeToView","abapTimestampToDate","Math","abs","_bDragging","addClass","preventDefault","stopPropagation","support","touch","buttons","ctrlKey","dx","_updateResizingShapeData","_oAutoScrollHandler","autoScroll","_handleShapeResizingWhenAutoScroll","_oLastEvent","currentX","aResizedNewTime","_calculateResizedNewTime","_drawResizingShadow","_parseShapeTimeProperty","sAttrName","sPropertyValue","mShapeConfig","hasShapeProperty","sConfigAttr","getShapeProperty","charAt","length","substring","oResizedNewTime","clonedShapeData","oShadowShape","getAggregation","oConfigTime","oConfigEndTime","sNewStartTime","sNewEndTime","sBaseDataSet","dataSet","drawResizeShadow","_oStatusSet","oCurrentX","aNewStartTime","aNewEndTime","oldStartTime","oldEndTime","oldStartTimeX","oldEndTimeX","isLeftSideClick","dateToAbapTimestamp","viewToTime","mShapeInstance","getShapeInstance","getShapes","shapes","i","oTopShapeInstance","byId","getParent","stop","resizeShadowG","selectAll","empty","remove","_collectResizingShapeData","fireShapeResizeEnd","shapeUid","rowObject","oldTime","newTime","aNewTime","resizedShapeData"],"sources":["ShapeResizeHandler-dbg.js"],"mappings":"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"}