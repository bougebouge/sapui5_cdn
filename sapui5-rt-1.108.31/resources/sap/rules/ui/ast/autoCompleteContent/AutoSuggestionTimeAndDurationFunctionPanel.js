sap.ui.define(["sap/ui/thirdparty/jquery","../../library","sap/ui/core/Control","sap/m/List","sap/ui/model/json/JSONModel","sap/m/ListMode","sap/ui/core/CustomData","sap/ui/model/Sorter","sap/rules/ui/parser/infrastructure/util/utilsBase","./AutoSuggestionTimeAndDurationFunctionPanelRenderer"],function(jQuery,e,t,a,i,n,r,s,l,o){"use strict";var u=t.extend("sap.rules.ui.ast.autoCompleteContent.AutoSuggestionTimeAndDurationFunctionPanel",{metadata:{library:"sap.rules.ui",properties:{reference:{type:"object",defaultValue:null},dialogOpenedCallbackReference:{type:"object",defaultValue:null},data:{type:"object",defaultValue:null},expand:{type:"boolean",defaultValue:false}},aggregations:{PanelLayout:{type:"sap.m.Panel",multiple:false}},events:{}},init:function(){this.oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.rules.ui.i18n");this.infraUtils=new sap.rules.ui.parser.infrastructure.util.utilsBase.utilsBaseLib;this.needCreateLayout=true;this.AttributeSegmentSelected=true;this.dataObjectName=""},onBeforeRendering:function(){this._reference=this.getReference();this._dialogOpenedCallbackReference=this.getDialogOpenedCallbackReference();if(this.needCreateLayout){var e=this._createLayout();this.setAggregation("PanelLayout",e,true);this.needCreateLayout=false}},initializeVariables:function(){},_createLayout:function(){var e=this;this.vocabularyData=this.getData();var t=new sap.ui.model.json.JSONModel;this.timeAndDurationFunctionlist=new sap.m.List({growingScrollToLoad:true,enableBusyIndicator:true});var a=[];for(var i=0;i<5&&i<this.vocabularyData.length;i++){a.push(this.vocabularyData[i])}t.setData(a);this.timeAndDurationFunctionlist.bindItems({path:"/",sorter:new sap.ui.model.Sorter("name"),rememberSelections:false,mode:n.SingleSelectMaster,template:new sap.m.DisplayListItem({label:"{name}",value:"{label}",type:"Active",press:function(t){e._reference(t)}})});this.timeAndDurationFunctionlist.setModel(t);var r=this.getMoreTimeAndDurationLink();var e=this;var s=new sap.m.Panel({headerText:this.oBundle.getText("timeAndDurationFunctionsPanelTitle"),expandable:true,expanded:this.getExpand(),content:this.timeAndDurationFunctionlist,width:"auto"});if(this.vocabularyData.length>=5){s.addContent(r)}return s},getMoreTimeAndDurationLink:function(){var e=this;var t=this.getData();var a=new sap.m.Link({text:this.oBundle.getText("more_link"),tooltip:this.oBundle.getText("more_link_tooltip"),enabled:true,press:function(t){e._setModal(true);e._dialogOpenedCallbackReference(true);if(e.vocabularyData){e.getTimeAndDurationDialog()}}});return a},_setModal:function(e){var t=sap.ui.getCore().byId("popover");if(t){t.setModal(e)}},getTimeAndDurationDialog:function(){var e=this;var t=this.oBundle.getText("searchTextTimeAndDuration");var a=this.getSearchField(t);this.detailedTimeAndDurationList=this.initializeTimeAndDurationList(this.vocabularyData);this.bindFilteredTermsToList(this.detailedTimeAndDurationList,"",false);var i=new sap.ui.layout.VerticalLayout({content:[a,e.detailedTimeAndDurationList]}).addStyleClass("sapAstVocabularyPanel");this.timeAndDurationDialog=new sap.m.Dialog({title:this.oBundle.getText("selectTimeAndDurationTitle"),contentWidth:"500px",contentHeight:"500px",showHeader:true,content:[i],afterClose:function(){e._dialogOpenedCallbackReference(false)},buttons:[new sap.m.Button({text:this.oBundle.getText("cancelBtn"),tooltip:this.oBundle.getText("cancelBtn"),press:function(t){e._setModal(false);e.timeAndDurationDialog.close()}})]});e.timeAndDurationDialog.open()},bindFilteredTermsToList:function(e,t,a){var i=new sap.ui.model.json.JSONModel(this.vocabularyData);var r=this;var s="/";if(!e){e=new sap.m.List({})}e.setModel(i);e.bindItems({path:s,template:new sap.m.DisplayListItem({label:"{name}",value:"{label}",type:"Active",press:function(e){r._setModal(false);if(r.timeAndDurationDialog.isOpen()){r.timeAndDurationDialog.close()}r._reference(e)}}),rememberSelections:false,mode:n.SingleSelectMaster});if(a){var l=[];var o="name";l.push(new sap.ui.model.Filter(o,sap.ui.model.FilterOperator.Contains,t));e.getBinding("items").filter(l);e.getModel().refresh(true)}},initializeTimeAndDurationList:function(e){var t=new sap.ui.model.json.JSONModel(e);var a="/";var i=new sap.m.List({headerText:this.oBundle.getText("timeAndDuration")});i.setModel(t);i.bindItems({path:a,template:new sap.m.DisplayListItem({label:"{name}",value:"{label}",type:"Active"})});return i},getSearchField:function(e){var t=this;this.searchField=new sap.m.SearchField({showSearchButton:false,width:"462px",placeholder:e,liveChange:function(e){t.bindFilteredTermsToList(t.detailedTimeAndDurationList,e.getParameter("newValue"),true)}});return this.searchField},renderer:o});return u},true);
//# sourceMappingURL=AutoSuggestionTimeAndDurationFunctionPanel.js.map