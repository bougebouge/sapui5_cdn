{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","FlUtils","oLastPromise","FakePromise","_checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","Promise","reject","Error","checkFailedSelectors","indexOfObject","failedSelectors","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","oDependentControlSelector","oDependentControl","bySelector","_checkAndAdjustChangeStatusSync","mChangesMap","oFlexController","oOriginalControl","getControlIfTemplateAffected","control","oModifier","bHasAppliedCustomData","sync","getAppliedCustomDataValue","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","fnCheckFunction","checkIfDependencyIsStillValidSync","bind","_oChangePersistence","copyDependenciesFromInitialChangesMapSync","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","_isXmlModifier","targets","_checkAndAdjustChangeStatus","bXmlModifier","mControl","oAppliedCustomData","all","aCustomDataState","oAppComponent","oPromise","checkIfDependencyIsStillValid","copyDependenciesFromInitialChangesMap","oParsedRevertDataFromCustomData","undefined","_checkPreconditions","sErrorMessage","getJsOnly","_handleAfterApply","oInitializedControl","resolve","updateAggregation","originalControl","getContent","boundAggregation","addAppliedCustomData","oResult","success","_handleAfterApplyError","oError","error","sChangeId","getId","sLogMessage","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","formatAndLogMessage","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","_logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","fnGetChangesMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn","getDependentSelectorList"],"sources":["Applier-dbg.js"],"mappings":"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"}