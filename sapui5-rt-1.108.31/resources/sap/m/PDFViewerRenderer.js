/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/base/Log","sap/base/security/URLListValidator"],function(e,r,t){"use strict";function n(e){return(!!e.getTitle()||e._isDisplayDownloadButton())&&!e._bIsPopupOpen}var i=Object.freeze(["application/pdf","application/x-google-chrome-pdf"]);var o={apiVersion:2};o._isSupportedMimeType=function(e){var r=i.indexOf(e);return r>-1};o._isPdfPluginEnabled=function(){var r=true;if(e.browser.firefox){return r}if(typeof navigator.pdfViewerEnabled!=="undefined"){if(navigator.pdfViewerEnabled||/HeadlessChrome/.test(window.navigator.userAgent)){return r}else{r=false}}else{var t=navigator.mimeTypes;r=i.some(function(e){var r=t.namedItem(e);return r!==null})}return r};o.render=function(r,t){r.openStart("div",t);r.style("width",t._getRenderWidth());r.style("height",t._getRenderHeight());this._writeAccessibilityTags(r,t);r.openEnd();if(n(t)){r.renderControl(t._objectsRegister.getOverflowToolbarControl())}var i=(t._isDisplayTypeEmbedded()||t._isDisplayTypeAuto())&&e.system.desktop;if(i){if(!this._isPdfPluginEnabled()){this.renderErrorContent(r,t)}else if(!t.getIsTrustedSource()){this.renderNonTrustedSourceContent(r,t)}else{this.renderPdfContent(r,t)}}r.close("div")};o._writeAccessibilityTags=function(e,r){e.attr("role","document");e.attr("aria-label",r._getLibraryResourceBundle().getText("PDF_VIEWER_ACCESSIBILITY_LABEL"))};o.renderPdfContent=function(r,i){if(i._shouldRenderPdfContent()&&!/HeadlessChrome/.test(window.navigator.userAgent)){r.openStart("iframe",i.getId()+"-iframe");var o=i.getSource();var s=i.getSource().indexOf("#");if(s>-1){o=o.substr(0,s)}if(!(e.browser.safari&&o.startsWith("blob:"))){o+="#view=FitH"}if(!t.validate(o)){o=encodeURI(o)}if(t.validate(o)){r.attr("src",o)}else{i._fireErrorEvent()}r.class("sapMPDFViewerContent");r.class("sapMPDFViewerLoading");r.attr("aria-label",i._getLibraryResourceBundle().getText("PDF_VIEWER_CONTENT_ACCESSIBILITY_LABEL"));if(n(i)){r.class("sapMPDFViewerReducedContent")}r.openEnd();r.close("iframe")}else{this.renderErrorContent(r,i)}};o.renderErrorContent=function(e,t){var n=t.getErrorPlaceholder()?t.getErrorPlaceholder():t._objectsRegister.getErrorPlaceholderMessagePageControl();e.openStart("div");e.class("sapMPDFViewerError");if(!t._bIsPopupOpen){e.class("sapMPDFViewerEmbeddedContent")}e.openEnd();e.renderControl(n);e.close("div");if(!o._isPdfPluginEnabled()){r.warning("Either Inline viewing of pdf is disabled or pdf plug-in is unavailable on this device.");t.fireEvent("error",{},true)}};o.renderNonTrustedSourceContent=function(e,r){e.openStart("div");e.class("sapMPDFViewerNonTrustedMessage");e.openEnd();e.renderControl(r._getNonTrustedSourceMessage());e.close("div")};return o},true);
//# sourceMappingURL=PDFViewerRenderer.js.map