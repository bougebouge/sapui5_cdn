/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2013 SAP AG. All rights reserved
 */
sap.ui.define(["sap/landvisz/library","sap/landvisz/Connector","sap/landvisz/internal/Connection","sap/landvisz/internal/DeploymentType","sap/landvisz/libs/lvsvg","sap/landvisz/OptionEntity","sap/ui/commons/layout/ResponsiveFlowLayout","sap/ui/commons/layout/ResponsiveFlowLayoutData"],function(e,t,i,n,o,r,a,s){"use strict";var d=e.ComponentType;var l=e.ConnectionLine;var w=e.DependencyType;var v=e.DependencyVisibility;var p=e.OptionType;var c=e.SolutionType;var g=e.ViewType;var u={};u.render=function(e,t){if(!this.initializationDone){t.initControls();t.initializationDone=true;e.write("<div");e.writeControlData(t);e.addClass("sapLandviszViewMainContainer");e.writeClasses();e.addStyle("width","100%");e.addStyle("height","100%");e.writeStyles();e.write(">");if(t.getVisibleDependency()==v.BOTH){t.networkViewVisible=true;t.boxViewVisible=true}else if(t.getVisibleDependency()==v.NETWORK){t.networkViewVisible=true;t.boxViewVisible=false}else if(t.getVisibleDependency()==v.BOX){t.networkViewVisible=false;t.boxViewVisible=true}this._renderTitle(e,t);if(t.getViewType()==g.SOLUTION_VIEW){this._renderSolutionView(e,t)}else{e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-viewLables");e.addClass("sapLandviszViews");e.writeClasses();e.write(">");if(t.networkViewVisible==true)this._renderNetworkViewHeader(e,t);if(t.boxViewVisible==true)this._renderBoxViewHeader(e,t);e.write("</div>");if(t.getShowDependencyNavigator()==true)this._renderNavigationPath(e,t);if(t.getShowClose()==true)this._renderCloseButton(e,t);if(t.getViewType()==g.SELECTION_VIEW)this._renderSelectionView(e,t);else if(t.getViewType()==g.DEPENDENCY_VIEW){this._renderDependencyView(e,t)}if(t.getViewType()==g.DEPENDENCY_VIEW)this._renderNavigationPanel(e,t)}e.write("</div>")}if(t.currentView==w.BOX_VIEW){var i=t.oHLayoutConnectionEntity.getContent();for(var n=0;n<i.length;n++){t.addAggregation("connectionEntities",i[n],false)}}var o=t.oHLayoutOptions.getContent();if(o.length>0){for(var n=0;n<o.length;n++)if(o[n]instanceof r)t.getSolutionOptions()[0].addOptionEntity(o[n])}t.firstTime=false};u._renderSolutionView=function(e,t){if(t.getShowDependencyNavigator()==true)this._renderNavigationPath(e,t);if(t.getShowClose()==true)this._renderCloseButton(e,t);e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-solutionViewLables");e.addClass("sapLandviszViews");e.writeClasses();e.write(">");this._renderComponentViewHeader(e,t);this._renderDeploymentViewHeader(e,t);e.write("</div>");if(t.getSolutionType()==c.DEPLOYMENT_VIEW)this._renderOptions(e,t);var i=t.getSystems();for(var n=0;n<i.length;n++)i[n].setShowEntityActions(false);this._renderSolutionViewer(e,t)};u._renderComponentViewHeader=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-compViewLabel");e.addClass("sapLandviszView");e.writeClasses();e.write(">");t.compViewBtn.setText(t.getComponentViewLabel());t.compViewBtn.setLite(true);t.compViewBtn.addStyleClass("sapLandviszSolution_view_text");t.compViewBtn.setTooltip(t.getComponentViewTooltip());t.compViewBtn.setIcon("sap-icon://tree");var i=this;if(t.firstTime==true){t.compViewBtn.attachPress(function(e){t.currentSolutionView=c.COMPONENT_VIEW;t.compViewBtn.addStyleClass("selectedView");t.depViewBtn.removeStyleClass("selectedView");t.fireLoadSolutionView()})}e.renderControl(t.compViewBtn);e.write("</div>")};u._renderDeploymentViewHeader=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-deploymentViewLable");e.addClass("sapLandviszView");e.writeClasses();e.write(">");t.depViewBtn.setText(t.getDeploymentViewLabel());t.depViewBtn.setLite(true);t.depViewBtn.addStyleClass("sapLandviszSolution_view_text");t.depViewBtn.setTooltip(t.getDeploymentViewTooltip());t.depViewBtn.setIcon("sap-icon://dimension");var i=this;if(t.firstTime==true){t.depViewBtn.attachPress(function(e){t.currentSolutionView=c.DEPLOYMENT_VIEW;t.depViewBtn.addStyleClass("selectedView");t.compViewBtn.removeStyleClass("selectedView");t.fireLoadSolutionView()})}e.renderControl(t.depViewBtn);e.write("</div>")};u._renderSolutionViewer=function(e,t){if(null!=t.getPlugContent())this._renderPlugContent(e,t);e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-solutionViewContainer");e.addClass("sapLandviszSolutionViewContainer");e.writeClasses();var i=t.windowWidth-2;e.addStyle("width",i+"px");var n;if(t.getSolutionType()==c.DEPLOYMENT_VIEW){n=t.getPlugContentHeight()+90;e.addStyle("position","absolute")}else{n=t.getPlugContentHeight()+35}e.addStyle("height","calc(100% - "+n+"px)");e.addStyle("height","-webkit-calc(100% - "+n+"px)");e.addStyle("height","-moz-calc(100% - "+n+"px)");e.addStyle("height","-o-calc(100% - "+n+"px)");e.addStyle("top",n+"px");e.writeStyles();e.write(">");this._renderSolutionContainer(e,t);this._renderSolution(e,t);if(t.getShowDeploymentTypeSection()==true)this._renderSolutionDeploymentType(e,t);if(t.getSolutionType()==c.COMPONENT_VIEW)this._renderOptions(e,t);e.write("</div>")};u._renderPlugContent=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-solutionPlugContent");e.addStyle("top","32px");e.addStyle("width","100%");e.addStyle("position","absolute");e.writeStyles();e.write(">");e.renderControl(t.getPlugContent());e.write("</div>")};u._renderSolutionContainer=function(e,t){var i=t.getConnectors();t.connection.init();var n=t.getSolutionOptions();var o;if(n.length>0&&n[0].getType()==p.VIEW)o=t.getViewConnectedLayout();else o=t.connection.getBoxViewConnectedNodesLayout(i);var r=5;var a=Number(t.entityWidth*o.maxColumnCount+(o.maxColumnCount+1)*r);var s=Number(t.boxModeHeight+t.entityHeight+r*3);if(t.getSolutionOptions().length>0&&t.getSolutionType()==c.COMPONENT_VIEW)s=s+50;if(t.getShowDeploymentTypeSection()==true)s=s+40;e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-solutionInnerContainer");e.addClass("sapLandviszBoxViewBorderContainer");e.writeClasses();e.addStyle("width",a+"px");e.addStyle("height",s+"px");e.writeStyles();e.write(">");e.write("</div>")};u._renderSolution=function(e,t){t.connection.init();var i=t.getSolutionOptions();var n;if(i.length>0&&i[0].getType()==p.VIEW)n=t.getViewConnectedLayout();else{n=t.getEntityConnectedLayout()}var o;var r;var a=5;if(n){var s=t.getId()+"-solutionInnerContainer";var d=t.$("solutionInnerContainer");setTimeout(function(){d.css("display","block")},1200);t.visibleEntities=[];var l=t.getSystems();for(var w=0;w<l.length;w++){o=l[w].getSystemId();var v=0;v=30+a;var c=30;if(n[o]){var u=0;if(n.thirdLevelEntitiesCount>0)u=30;var y=0;u+=Number(n[o].col*t.entityWidth+(n[o].col+1)*a);y+=Number((n[o].row-1)*t.entityHeight+(n[o].row+1)*a+t.boxModeHeight);l[w].left=u;l[w].top=y;l[w].viewType=g.SOLUTION_VIEW;t.visibleEntities.push(l[w]);e.renderControl(l[w])}else{l[w].viewType=g.SOLUTION_VIEW;l[w].addStyleClass("sapLandviszDisplayNone");e.renderControl(l[w])}}var h=t.getConnectionEntities();var f=0;for(var w=0;w<h.length;w++){f=0;r=h[w].getConnectionId();if(n[r]){u=Number(n[r].col*(t.entityWidth+10))+a;y=Number(n[r].row*(t.entityHeight+10))+a;f=Number(n[r].colspan*t.entityWidth+(n[r].colspan-1)*a)}h[w].viewType=g.SOLUTION_VIEW;h[w].left=u;h[w].top=y;h[w].width=f;h[w].height=90;h[w].innerLeft=0;h[w].innerTop=0;h[w].innerWidth=f;h[w].innerHeight=90;e.renderControl(h[w]);h[w].addStyleClass("connectionBox")}}var C=t.$("navigation");var V=t.$("navigation_navigator");C.animate({height:"0px"},900,"swing",function(e){C.hide()})};u._renderSolutionDeploymentType=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-deploymentTypeContainer");e.addClass("sapLandviszDeploymentTypeContainer");e.writeClasses();e.write(">");var i=t.getSolutionOptions();var n;var o;var r;var a;var s;var l;var w=0;var v;var p;var c;var g;o=t.oHLayoutOptions.getContent();for(var u=1;u<o.length;u++){g=new Array;r=o[u].getOptionSources();v=o[u].getSelected();for(var y=0;y<r.length;y++){a=r[y].getSource();s=this._getDesiredSystem(t,r[y].getSource());if(null!=s&&s.getComponentType()==d.notDefined)continue;else if(y+1<r.length){l=this._getDesiredSystem(t,r[y+1].getSource());if(s.getComponentType()==l.getComponentType()){w++}else{c=this._getDesiredSystem(t,r[y-w].getSource());p=this._renderDeploymentType(e,t,w,c.left,s.getComponentType(),s.getComponentTypeTooltip(),v,c.getSystemId());g.push(p);w=0}}else{c=this._getDesiredSystem(t,r[y-w].getSource());p=this._renderDeploymentType(e,t,w,c.left,s.getComponentType(),s.getComponentTypeTooltip(),v,c.getSystemId());g.push(p);w=0}}t.depTypeOptions[o[u].getId()]=g}e.write("</div>")};u._getDesiredSystem=function(e,t){var i=e.getSystems();for(var n=0;n<i.length;n++){if(i[n].getSystemId()==t)return i[n]}return null};u._renderDeploymentType=function(e,t,i,o,r,a,s,d){var l=new n;l.left=o;l.count=i;l.type=r;l.srcEntityId=d;l.setTooltip(a);l.standardWidth=t.entityWidth;if(s==true)l.addStyleClass("sapLandviszDisplayBlock");else l.addStyleClass("sapLandviszDisplayNone");e.renderControl(l);return l};u._renderOptions=function(e,t){var i=t.getSolutionOptions();if(i.length<=0)return;e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-optionContainer");if(t.getSolutionOptionType()==p.VIEW)e.addClass("sapLandviszOptionContainer");else if(t.getSolutionOptionType()==p.ENTITY)e.addClass("sapLandviszEntityOptionContainer");e.writeClasses();if(t.getSolutionOptionType()==p.VIEW){var n=t.windowWidth-2;e.addStyle("width",n+"px");e.writeStyles()}e.write(">");this._createOptions(e,t);e.write("</div>")};u._createOptions=function(e,t){if(t.getSolutionOptionType()==p.VIEW){this._renderViewOptions(e,t,t.getSolutionOptionType())}else if(t.getSolutionOptionType()==p.ENTITY){this._createEntityOptions(e,t)}};u._createEntityOptions=function(e,t){var i=t.getSolutionOptions();var n;var o=t.getSystems();var r;var a;var s=this;for(var d=0;d<i.length;d++){n=i[d].getOptionEntities();if(""==t.srcEntity)t.srcEntity=i[d].getCurrentEntity();for(var l=0;l<n.length;l++){for(var w=0;w<o.length;w++){if(t.srcEntity==o[w].getSystemId()){r=o[w].left;a=o[w].top;break}}r=r+t.entityWidth/2-50+50*l;n[l].left=r;n[l].optionOn=i[d].getType();n[l].optionSrcEntityId=t.srcEntity;n[l].attachEvent("optionSelected",function(o){var r=o.getSource();var a=r.getOptionSources();var d;for(var l=0;l<a.length;l++){d=a[l].getSource()}if(t.srcEntity==d)return;t.selectedOptionEntity=r;for(var l=0;l<i.length;l++){n=i[l].getOptionEntities();for(var w=0;w<n.length;w++){if(t.srcEntity==n[w].optionSrcEntityId&&r.getId()==n[w].getId()){n[w].$().css({"background-color":"#008fd3",color:"#ffffff"})}else{n[w].$().css({"background-color":"transparent",color:"#00669c"});n[w].setSelected(false)}}}s._makeOptionVisible(e,t,o)});e.renderControl(n[l])}}};u._renderViewOptions=function(e,t,i){var n=t.getSolutionOptions();var o=n[0].getOptionEntities();if(o.length>0){var r=t.getDeploymentOptionsLabel();t.deploymentOptionLabel.setText(r);t.deploymentOptionLabel.setTooltip(t.getDeploymentOptionsTooltip());t.deploymentOptionLabel.addStyleClass("sapLandviszOptionLabel");t.oHLayoutOptions.addContent(t.deploymentOptionLabel)}var a=this;for(var s=0;s<o.length;s++){o[s].optionOn=i;if(o[s].getSelected()==true){t.currentViewOptionId=o[s].getId();t.selectedOptionEntity=o[s]}o[s].attachEvent("optionSelected",function(i){var n=i.getSource();if(t.currentViewOptionId==n.getId())return;t.selectedOptionEntity=n;var r;o=t.oHLayoutOptions.getContent();o=t.getSolutionOptions()[0].getOptionEntities();for(var s=0;s<o.length;s++){r=o[s].$();r.css({"background-color":"transparent",color:"#00669c"});if(n.getId()==o[s].getId()){o[s].setSelected(true)}else{o[s].removeStyleClass("optionSelected");o[s].setSelected(false)}}a._makeOptionVisible(e,t,i)});t.oHLayoutOptions.addContent(o[s])}e.renderControl(t.oHLayoutOptions)};u._makeOptionVisible=function(e,t,i){var n=i.getSource();if(n.optionOn==p.VIEW){this._makeViewOptionVisible(e,t,n)}else if(n.optionOn==p.ENTITY){this._makeEntityOptionVisible(e,t,n)}};u._makeViewOptionVisible=function(e,i,n){if(i.currentViewOptionId==n.getId())return;i.currentViewOptionId=n.getId();var o=i.getSystems();var r;for(var a=0;a<o.length;a++){o[a].removeStyleClass("sapLandviszDisplayNone");r=o[a].$();r.hide("600")}var s=i.$("deploymentTypeContainer");var d=i.depTypeOptions[i.selectedOptionEntity.getId()];var l=s.children();var w;for(var v=0;v<l.length;v++){w=jQuery(l[v]);w.css({display:"none"})}var p=n.getOptionSources();var c;var g=i.getConnectors();var u=g[0].getSource();var y=[];var h;for(var a=0;a<p.length;a++){h=new t;c=p[a].getSource();h.setSource(u);h.setTarget(c);y.push(h)}var f;var C;var V=5;var r;var b;i.connection.init();var S=i.connection.getBoxViewConnectedNodesLayout(y);if(S){var m=Number(i.entityWidth*S.maxColumnCount+(S.maxColumnCount+1)*V);var E=Number(i.boxModeHeight+i.entityHeight+V*3);var s=i.$("deploymentTypeContainer");if(d&&d.length>0){E=E+40;s.css({display:"block"})}else{s.css({display:"none"})}var T=i.$("solutionInnerContainer");T.animate({width:m,height:E},400);setTimeout(function(){var e=i.$("solutionInnerContainer");var t=e[0].offsetLeft;var n=e[0].offsetTop;var a=0;var s=i.getConnectionEntities();for(var l=0;l<s.length;l++){C=s[l].getConnectionId();if(S[C]){h=Number(S[C].col*(i.entityWidth+10));E=Number(S[C].row*(i.entityHeight+10));h=Number(S[C].col*(i.entityWidth+10))+V;E=Number(S[C].row*(i.entityHeight+10))+V;s[l].left=h+t;a=s[l].top;s[l].top=h+n;b=Number(S[C].colspan*i.entityWidth+(S[C].colspan-1)*V);var v=s[l].$();v.animate({left:s[l].left,top:s[l].top,width:b,height:90},600,"swing");var p=jQuery(document.getElementById(s[l].getId()+"connectionRow"));p.animate({width:b,height:90},600,"swing");var c=s[l].$("connectionLabel");var g=b-68;c.css({"max-width":g})}}i.visibleEntities=[];for(var l=0;l<o.length;l++){f=o[l].getSystemId();var u=0;u=30+V;var y=30;if(S[f]){var h=0;var E=0;h+=Number(S[f].col*i.entityWidth+(S[f].col+1)*V);E+=Number((S[f].row-1)*i.entityHeight+(S[f].row+1)*V+i.boxModeHeight);o[l].left=h+t;o[l].top=E+n;r=o[l].$();r.css({left:h+t,top:E+n});r.show("700");i.visibleEntities.push(o[l])}}var T=i.$("deploymentTypeContainer");T.css({left:t,width:m});var _;var L;if(d&&d.length>0){for(var x=0;x<d.length;x++){w=d[x];for(var l=0;l<o.length;l++){if(o[l].getSystemId()==w.srcEntityId){L=o[l];break}}_=L.left-t;w.$().css({display:"block",left:_})}}},405)}};u._makeEntityOptionVisible=function(e,t,i){var n=t.getSystems();var o=i.getOptionSources();i.setSelected(true);var r;for(var a=0;a<o.length;a++){r=o[a].getSource()}if(t.srcEntity==r)return;var s;var d;var l;var w=false;for(var v=0;v<n.length;v++){if(t.srcEntity==n[v].getSystemId()){s=n[v].$();d=n[v].left;l=n[v].top;s.hide("800");break}}setTimeout(function(){for(var e=0;e<n.length;e++){if(r==n[e].getSystemId()){s=n[e].$();s.css({left:d,top:l});n[e].left=d;n[e].top=l;n[e].removeStyleClass("sapLandviszDisplayNone");t.srcEntity=n[e].getSystemId();s.show("800");break}}},810)};u._renderNavigationPath=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigationPath");e.addClass("sapLandviszDependencyPath");e.writeClasses();e.write(">");t.navigationPathLabel.setText(t.getNavigationPath());t.navigationPathLabel.setTooltip(t.getNavigationPath());t.navigationPathLabel.addStyleClass("sapLandviszDependencyPathLabel");e.renderControl(t.navigationPathLabel);e.write("</div>")};u._renderSelectionView=function(e,t){var i=t.getSystems();var n=i[0].getActionBar();for(var o=0;o<n.length;o++){n[o].attachEvent("changeView",function(e){t.resetView(i[0],e.oSource)},this)}var r=0;var a=0;var s=0;var d=0;var l=t.windowHeight-28-2;e.write("<div");e.addStyle("width","100%");e.addStyle("height",l+"px");e.addStyle("overflow","auto");e.addStyle("box-sizing","border-box");e.addStyle("top","28px");e.addStyle("position","absolute");e.writeStyles();e.writeAttributeEscaped("id",t.getId()+"-outerContainer");e.writeClasses();e.write(">");e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-container");e.writeClasses();e.addStyle("position","absolute");e.addStyle("box-sizing","border-box");if(i[0].entityMaximized==true){s=t.windowWidth-40;d=t.windowHeight-66;r=20;a=20;i[0].sViewWidth=s;i[0].sViewHeight=d}else if(i[0].expVisible==true){s=t.windowWidth-12;d=t.windowHeight;r=10;e.addStyle("position","relative");i[0].sViewWidth=s-t.entityWidth;i[0].sViewHeight=d}else{i[0].sViewWidth=0;i[0].sViewHeight=0}e.addStyle("left",r+"px");e.addStyle("top",a+"px");if(s!=0)e.addStyle("width",s+"px");else e.addStyle("width",t.entityWidth+"px");if(d!=0)e.addStyle("height",d+"px");else e.addStyle("height",t.entityHeight+"px");e.writeStyles();e.write(">");i[0].viewType=g.SELECTION_VIEW;i[0].display="block";e.renderControl(i[0]);e.write("</div>");e.write("</div>")};u._renderDependencyView=function(e,t){var i=t.getSystems();for(var n=0;n<i.length;n++)i[n].setShowEntityActions(false);e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-viewContainer");e.writeClasses();var o=t.windowWidth-2;var r=t.windowHeight-26;e.addStyle("width",o+"px");e.addStyle("height",r+"px");e.addStyle("position","absolute");e.addStyle("overflow","hidden");e.addStyle("top",26+"px");e.writeStyles();e.write(">");this._renderBoxContainer(e,t);if(t.currentView!=""&&t.currentView==w.NETWORK_VIEW)this._renderNetworkView(e,t);else if(t.currentView!=""&&t.currentView==w.BOX_VIEW)this._renderBoxView(e,t);else if(t.getVisibleDependency()==v.BOTH){if(t.getDefaultDependencyView()==w.NETWORK_VIEW)this._renderNetworkView(e,t);if(t.getDefaultDependencyView()==w.BOX_VIEW)this._renderBoxView(e,t)}else if(t.getVisibleDependency()==v.NETWORK)this._renderNetworkView(e,t);else if(t.getVisibleDependency()==v.BOX)this._renderBoxView(e,t);this._renderBoxViewLabels(e,t);e.write("</div>")};u._renderCloseButton=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-closeBtn");e.addClass("sapLandviszCloseButton");e.writeClasses();e.write(">");t.closeImg.setSrc(sap.ui.resource("sap.landvisz","themes/base/img/framework/"+"16x16"+"/close_enable_dark.png"));t.closeImg.setTooltip(t.getCloseButtonTooltip());if(t.firstTime==true)t.closeImg.attachPress(function(e){t.fireClose()});e.renderControl(t.closeImg);e.write("</div>")};u._renderNetworkViewHeader=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-netwrokViewLable");e.addClass("sapLandviszView");e.writeClasses();e.write(">");t.networkViewBtn.setText(t.getNetworkDependencyLabel());t.networkViewBtn.setLite(true);t.networkViewBtn.addStyleClass("sapLandviszView_text");t.networkViewBtn.setTooltip(t.getNetworkDependencyLabel());var i=t.getViewType();t.networkViewBtn.setIcon("sap-icon://overview-chart");if(i==g.SELECTION_VIEW){t.networkViewBtn.setEnabled(false)}else if(i==g.DEPENDENCY_VIEW){t.networkViewBtn.setEnabled(true)}var n=this;if(t.firstTime==true){t.networkViewBtn.attachPress(function(i){t.networkViewBtn.addStyleClass("selectedView");t.boxViewBtn.removeStyleClass("selectedView");n.renderAllEntities(e,t,false)})}e.renderControl(t.networkViewBtn);e.write("</div>")};u._renderBoxViewHeader=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-boxViewLable");e.addClass("sapLandviszView");e.writeClasses();e.write(">");t.boxViewBtn.setText(t.getBoxDependencyLabel());t.boxViewBtn.setLite(true);t.boxViewBtn.addStyleClass("sapLandviszView_text");t.boxViewBtn.setTooltip(t.getBoxDependencyLabel());var i=t.getViewType();t.boxViewBtn.setIcon("sap-icon://table-view");if(i==g.SELECTION_VIEW){t.boxViewBtn.setEnabled(false)}else if(i==g.DEPENDENCY_VIEW){t.boxViewBtn.setEnabled(true)}var n=this;if(t.firstTime==true){t.boxViewBtn.attachPress(function(i){t.boxViewBtn.addStyleClass("selectedView");t.networkViewBtn.removeStyleClass("selectedView");n.renderAllBoxViewEntities(e,t,false)})}e.renderControl(t.boxViewBtn);e.write("</div>")};u._renderTitle=function(e,t){var i;i=t.getTitle();e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-viewHeaderContainer");e.addClass("sapLandviszViewer_container_header");e.writeClasses();e.writeAttributeEscaped("title",i);e.write(">");e.writeEscaped(i);e.write("</div>")};u._renderNetworkView=function(e,t){this.renderAllEntities(e,t,true)};u.renderAllEntities=function(e,t,n){var r=t.getConnectors();t.currentView=w.NETWORK_VIEW;var a=t.$("boxViewContainer");if(a)a.css("display","none");var s=t.getBoxDependencyLevels();if(s){for(var d=0;d<s.length;d++){var v=t.$("boxViewLabel"+d);if(v)v.css("display","none")}}t.connection.init();var p;if(t.getConnectionLine()==l.Line)p=t.connection.getConnectedNodesLayout(r);else p=t.connection.getConnectedNodesLayoutTrack(r);var c=t.getSystems();var u=t.getConnectionEntities();var y=50;if(u.length>0)y=0;var h;var f;for(var d=0;d<c.length;d++){h=c[d].getSystemId();if(p[h]){var C=0;var V=0;C=Number(p[h].col*(t.entityWidth+10+y));V=Number(p[h].row*(t.entityHeight+10+y))}c[d].left=C;c[d].top=V;c[d].viewType=g.DEPENDENCY_VIEW;if(n==true)e.renderControl(c[d]);else this._moveEntityToPosition(C,V,c[d].getId())}for(var d=0;d<u.length;d++){f=u[d].getConnectionId();if(t.firstTime==true){u[d].attachEvent("connectionMouseover",function(e){t.onmouseenter(e)},this);u[d].attachEvent("connectionMouseout",function(e){t.onmouseleave(e)},this)}if(p[f]){C=Number(p[f].col*(t.entityWidth+10));V=Number(p[f].row*(t.entityHeight+10))}u[d].left=C;u[d].top=V;u[d].width=t.entityWidth;u[d].height=t.entityHeight;u[d].innerLeft=(t.entityWidth-50)/2;u[d].innerTop=(t.entityHeight-50)/2;u[d].innerWidth=50;u[d].innerHeight=50;u[d].viewType=t.currentView;if(n==true){u[d].addStyleClass("sapLandviszConnection_entity_container");e.renderControl(u[d])}else{u[d].addStyleClass("sapLandviszConnection_entity_container");u[d].removeStyleClass("sapLandviszConnectionBox");this._animateConnectionEntityContainer(t.entityWidth,t.entityHeight,u[d])}}if(t.connection.svgForConnections)t.connection.svgForConnections.style("display","block");else if(n==false){var b=t.$("navigation");var S=t.$("navigation_navigator");b.animate({height:"0px"},1e3,"swing",function(e){b.hide()});setTimeout(function(){if(t.svgForConnections){t.connection.svgForConnections=t.svgForConnections;t.connection.svgForConnections.style("display","block")}else{var e=t.$("viewContainer");var n=e[0].scrollWidth-10;var r=e[0].scrollHeight-10;t.svgForConnections=o.getSVG(n,r,t.getId()+"-viewContainer");t.connection=i;t.connection.svgForConnections=t.svgForConnections;t.connection.renderConnections(t.getSystems(),t.getConnectionEntities(),this.getConnectionLine())}var a=t.$("viewContainer");var s=Number(a[0].scrollHeight);var d=Number(a[0].scrollWidth);var l=Number(a.height());var w=Number(a.width());if(d>w||s>l)t.getVisibleRegion()},1500)}};u._renderBoxContainer=function(e,t){var i=t.getConnectors();t.connection.init();var n=t.connection.getBoxViewConnectedNodesLayout(i);var o=5;var r=Number(t.entityWidth*n.maxColumnCount+(n.maxColumnCount+1)*o);if(n.thirdLevelEntitiesCount>0){r+=30+o}var a=Number(t.boxModeHeight+t.entityHeight+o*3);if(n.thirdLevelEntitiesCount>0){a+=Number(t.entityHeight+o)}e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-boxViewContainer");e.addClass("sapLandviszBoxViewBorderContainer");e.writeClasses();e.addStyle("width",r+"px");e.addStyle("height",a+"px");e.addStyle("top",10+"px");e.writeStyles();e.write(">");e.write("</div>")};u._renderBoxViewLabels=function(e,t){var i=30;var n=t.entityHeight;var o=5;var r=t.boxLeftMargine+o;var a=t.boxModeHeight+o*2+t.boxTopMargine;var s=t.getBoxDependencyLevels();var d;if(s){for(var l=0;l<s.length;l++){a+=(t.entityHeight+o)*l;d=t.getId()+"-boxViewLabel"+l;e.write("<div");e.writeAttributeEscaped("id",d);e.writeAttributeEscaped("title",s[l]);e.addClass("sapLandviszBoxContainerLevelHeader");e.writeClasses();e.addStyle("left",r+"px");e.addStyle("top",a+"px");e.addStyle("height",n+"px");e.addStyle("width",i+"px");e.addStyle("display","none");e.writeStyles();e.write(">");e.write("<div");e.addClass("sapLandviszLevelLabel");e.writeClasses();e.writeAttributeEscaped("id",d+"Level");e.writeAttributeEscaped("title",s[l]);e.addStyle("height","100%");e.addStyle("width","100%");e.addStyle("left","3px");e.writeStyles();e.write(">");e.writeEscaped(s[l]);e.write("</div>");e.write("</div>")}}};u._renderNavigationPanel=function(e,t){e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigation");e.addClass("sapLandviszClv_container_frame_navigation");e.writeAttributeEscaped("draggable","true");e.addClass("no-draggable");e.addClass("no-resizable");e.addClass("ui-draggable");e.writeClasses();e.addStyle("bottom","0px");e.addStyle("right","0px");e.addStyle("height","28%");e.addStyle("background-size","100%");e.addStyle("display","block");e.writeStyles();e.write(">");e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigation_header");e.addClass("navigationHeader");e.writeClasses();e.write(">");e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigation_header_arrowup");e.addClass("navigationBarButton");e.addClass("arrowUp");e.writeClasses();e.writeAttributeEscaped("title",t.SHOW_NAV_TEXT);e.write(">");e.write("</div>");e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigation_header_arrowdown");e.addClass("navigationBarButton");e.addClass("arrowDown");e.writeClasses();e.writeAttributeEscaped("title",t.HIDE_NAV_TEXT);e.write(">");e.write("</div>");e.write("</div>");e.write("<div");e.writeAttributeEscaped("id",t.getId()+"-navigation_navigator");e.writeAttributeEscaped("draggable","true");e.addClass("navigationNavigator");e.addClass("ui-draggable");e.writeClasses();e.write(">");e.write("</div>");e.write("</div>")};u._renderBoxView=function(e,t){this.renderAllBoxViewEntities(e,t,true)};u.renderAllBoxViewEntities=function(e,t,i){t.currentView=w.BOX_VIEW;if(t.connection.svgForConnections!=null)t.connection.svgForConnections.style("display","none");var n=t.getSystems();var o=t.getConnectionEntities();var r=t.getConnectors();t.connection.init();var a=t.connection.getBoxViewConnectedNodesLayout(r);var s;var d;var l=5;if(a){var p=t.$("boxViewContainer");setTimeout(function(){p.css("display","block")},1200);for(var c=0;c<n.length;c++){s=n[c].getSystemId();var u=0;u=30+l;var y=30;if(a[s]){var h=0;if(a.thirdLevelEntitiesCount>0)h=30;var f=0;h+=Number(a[s].col*t.entityWidth+(a[s].col+1)*l);f+=Number((a[s].row-1)*t.entityHeight+(a[s].row+1)*l+t.boxModeHeight);n[c].left=h;n[c].top=f;n[c].viewType=g.DEPENDENCY_VIEW;if(i==true){n[c].left=h;n[c].top=f;e.renderControl(n[c])}else{n[c].left=h+t.boxLeftMargine;n[c].top=f+t.boxTopMargine;this._moveEntityToPosition(n[c].left,n[c].top,n[c].getId())}}}var C=0;for(var c=0;c<o.length;c++){if(t.firstTime==true){o[c].attachEvent("connectionMouseover",function(e){t.onmouseenter(e)},this);o[c].attachEvent("connectionMouseout",function(e){t.onmouseleave(e)},this)}C=0;d=o[c].getConnectionId();if(a[d]){if(t.currentView==w.BOX_VIEW){h=Number(a[d].col*(t.entityWidth+10))+l;f=Number(a[d].row*(t.entityHeight+10))+l;C=Number(a[d].colspan*t.entityWidth+(a[d].colspan-1)*l)}}o[c].viewType=t.currentView;o[c].left=h;if(a.thirdLevelEntitiesCount>0)o[c].left=h+30;o[c].top=f;o[c].width=C;o[c].height=90;o[c].innerLeft=0;o[c].innerTop=0;o[c].innerWidth=C;o[c].innerHeight=90;if(t.getVisibleDependency()==v.BOTH&&t.getDefaultDependencyView()==w.NETWORK_VIEW){if(o[c].toolPopup.isOpen())o[c].toolPopup.close()}if(i==true){e.renderControl(o[c]);o[c].left=h;if(a.thirdLevelEntitiesCount>0)o[c].left=h+30;o[c].top=f;o[c].viewType=t.currentView;o[c].width=C;o[c].height=0;o[c].addStyleClass("sapLandviszConnectionBox")}else{o[c].left=h+t.boxLeftMargine;if(a.thirdLevelEntitiesCount>0)o[c].left=h+t.boxLeftMargine+30;o[c].top=f+t.boxTopMargine;o[c].addStyleClass("sapLandviszConnectionBox");o[c].removeStyleClass("sapLandviszConnection_entity_container");this._animateConnectionEntityContainer(C,90,o[c])}}}if(a.thirdLevelEntitiesCount>0){t.hasBoxThirdLevel=true;var V=30;var b=t.entityHeight;var S=t.boxLeftMargine+l;var m=t.boxModeHeight+l*2+t.boxTopMargine;var E=t.getBoxDependencyLevels();var T="Systems";var _="Systems";if(i==false){setTimeout(function(){if(E){for(var e=0;e<E.length;e++){var i=t.$("boxViewLabel"+e);m+=(t.entityHeight+l)*e;i.css("display","block");i.css({left:S,top:m,width:V,height:b});var n=t.$("boxViewLabel"+e+"Level");n.css({width:b,height:b})}}},1e3)}}if(i==false){var L=t.$("navigation");var x=t.$("navigation_navigator");L.animate({height:"0px"},900,"swing",function(e){L.hide()});setTimeout(function(){var e=t.$("viewContainer");var i=Number(e[0].scrollHeight);var n=Number(e[0].scrollWidth);var o=Number(e.height());var r=Number(e.width());if(n>r||i>o)t.getVisibleRegion()},1e3)}};u._moveEntityToPosition=function(e,t,i){var n=jQuery(document.getElementById(i));n.animate({left:e,top:t},1e3)};u._animateConnectionEntityContainer=function(e,t,i){var n=i.$();n.animate({left:i.left,top:i.top,width:e,height:t},1e3,"swing");var o=i.getId()+"connectionRow";var r=jQuery(document.getElementById(o));r.animate({left:i.innerLeft,top:i.innerTop,width:i.innerWidth,height:i.innerHeight},1e3,"swing")};return u},true);
//# sourceMappingURL=LandscapeViewerRenderer.js.map