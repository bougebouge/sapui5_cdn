/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2260.ui.remote","sap/sac/df/firefly/ff4200.olap.api"],function(t){"use strict";t.SxActionsProvider=function(){};t.SxActionsProvider.prototype=new t.XObject;t.SxActionsProvider.prototype._ff_c="SxActionsProvider";t.SxActionsProvider.create=function(e){var r=new t.SxActionsProvider;r.m_qManager=e;return r};t.SxActionsProvider.prototype.m_qManager=null;t.SxActionsProvider.prototype.processQueryDefinition=function(t){this.getActionWithParameters(this.m_qManager.getConvenienceCommands(),t);return this.m_qManager};t.SxActionsProvider.prototype.getActionWithParameters=function(e,r){var n=t.XStringTokenizer.splitString(r,"$");var i=t.XList.create();for(var o=1;o<n.size();o++){var s=n.get(o);var a=t.XStringTokenizer.splitString(s,"'");var u=t.XListOfString.create();for(var l=1;l<a.size();l=l+2){u.add(a.get(l))}if(u.size()>0){this.processAction(e,u);i.add(u)}}return i};t.SxActionsProvider.prototype.processAction=function(e,r){var n=r.get(0);var i=r.get(2);if(t.XString.isEqual(n,"axisColumn")){e.moveMeasureDimensionToAxis(t.AxisType.COLUMNS);var o=e.moveDimensionToAxis(i,t.AxisType.COLUMNS);if(t.notNull(o)){this.setDimHierarchy(e,i,r);this.setSingleMemberSel(e,o,r)}else{this.setDimHierarchy(e,i,r);if(r.size()>3&&!t.XString.isEqual(r.get(3),"")){var s=r.get(3);e.addSingleMeasureFilter(s)}}}else if(t.XString.isEqual(n,"axisRows")){e.moveDimensionToAxis(i,t.AxisType.ROWS);this.setDimHierarchy(e,i,r)}else if(t.XString.isEqual(n,"filter")){this.setFilter(e,r)}};t.SxActionsProvider.prototype.setFilter=function(e,r){if(r.size()>3){var n=r.get(2);for(var i=3;i<r.size();i++){var o=r.get(i);if(!t.XString.isEqual(n,"")&&t.XString.isEqual(n,"IN")){e.addSingleMemberFilterByDimension(e.getDimension(r.get(1)),o,t.ComparisonOperator.EQUAL)}}}};t.SxActionsProvider.prototype.setDimHierarchy=function(e,r,n){if(n.size()>4&&!t.XString.isEqual(n.get(4),"")){e.setDimensionHierarchy(r,n.get(4),true,0)}};t.SxActionsProvider.prototype.setSingleMemberSel=function(e,r,n){if(n.size()>3&&!t.XString.isEqual(n.get(3),"")){var i=n.get(3);e.addSingleMemberFilterByDimension(r,i,t.ComparisonOperator.EQUAL)}};t.SxBinding=function(){};t.SxBinding.prototype=new t.XObject;t.SxBinding.prototype._ff_c="SxBinding";t.SxBinding.create=function(e,r){var n=new t.SxBinding;n.m_quasar=e;n.m_isNeo=r;if(n.m_isNeo){n.m_isNeo=true}return n};t.SxBinding.prototype.m_quasar=null;t.SxBinding.prototype.m_control=null;t.SxBinding.prototype.m_dataprovider=null;t.SxBinding.prototype.m_sender=null;t.SxBinding.prototype.m_receiver=null;t.SxBinding.prototype.m_type=null;t.SxBinding.prototype.m_binding=null;t.SxBinding.prototype.m_isNeo=false;t.SxBinding.prototype.m_cacheIdentifier=null;t.SxBinding.prototype.releaseObject=function(){this.m_control=null;this.m_dataprovider=null;this.m_quasar=null;this.m_binding=t.XObjectExt.release(this.m_binding);this.m_binding=null;t.XObject.prototype.releaseObject.call(this)};t.SxBinding.prototype.setCacheIdentifier=function(t){this.m_cacheIdentifier=t};t.SxBinding.prototype.processInit=function(){var e=this.m_quasar.getApplication().getBindingManager();this.m_binding=e.bindTogether(this.m_sender,t.SigSelDomain.UI,this.m_control,this.m_receiver,t.SigSelDomain.UI,this.m_control,this.m_type,this.m_cacheIdentifier,false,this.m_isNeo)};t.SxBinding.prototype.getControl=function(){return this.m_control};t.SxBinding.prototype.setControl=function(t){this.m_control=t};t.SxBinding.prototype.getDataprovider=function(){return this.m_dataprovider};t.SxBinding.prototype.setDataprovider=function(t){this.m_dataprovider=t};t.SxBinding.prototype.getSource=function(){return this.m_sender};t.SxBinding.prototype.setSource=function(t){this.m_sender=t};t.SxBinding.prototype.getTarget=function(){return this.m_receiver};t.SxBinding.prototype.setTarget=function(t){this.m_receiver=t};t.SxBinding.prototype.getType=function(){return this.m_type};t.SxBinding.prototype.setType=function(t){this.m_type=t};t.SxBinding.prototype.getSession=function(){var t=this.m_quasar.getApplication();var e=t.getSession();return e};t.SxSelection=function(){};t.SxSelection.prototype=new t.XObject;t.SxSelection.prototype._ff_c="SxSelection";t.SxSelection.create=function(e,r){var n=new t.SxSelection;n.m_component=e;n.m_property=r;return n};t.SxSelection.prototype.m_component=null;t.SxSelection.prototype.m_property=null;t.SxSelection.prototype.getComponent=function(){return this.m_component};t.SxSelection.prototype.getProperty=function(){return this.m_property};t.QsDataproviderFactory=function(){};t.QsDataproviderFactory.prototype=new t.XObject;t.QsDataproviderFactory.prototype._ff_c="QsDataproviderFactory";t.QsDataproviderFactory.s_factories=null;t.QsDataproviderFactory.staticSetup=function(){t.QsDataproviderFactory.s_factories=t.XHashMapByString.create()};t.QsDataproviderFactory.registerFactory=function(e,r){if(t.notNull(e)){t.QsDataproviderFactory.s_factories.put(e.getName(),r)}};t.QsDataproviderFactory.createDataprovider=function(e,r,n){var i=null;if(t.notNull(e)){var o=null;o=t.QsDataproviderFactory.s_factories.getByKey(e.getName());if(t.notNull(o)){i=o.newDataprovider(r,n)}}return i};t.ContentParserRegistration={s_parser:null,staticSetup:function(){t.ContentParserRegistration.s_parser=t.XHashMapByString.create()},setCustomContentParser:function(e,r){t.ContentParserRegistration.s_parser.put(e,r)},getCustomContentParser:function(e){return t.ContentParserRegistration.s_parser.getByKey(e)},getAllEntries:function(){return t.ContentParserRegistration.s_parser}};t.DfContentParser=function(){};t.DfContentParser.prototype=new t.XObject;t.DfContentParser.prototype._ff_c="DfContentParser";t.DfContentParser.prototype.getIdName=function(){return"id"};t.DfContentParser.prototype.parseContent=function(e){var r=new t.InputControlContent;var n=t.PrFactory.createStructure();this.parseContentToStructure(e,this.getIdName(),n);r.setContent(n);return r};t.DfContentParser.prototype.parseContentToStructure=function(e,r,n){var i=e.asList();if(t.notNull(i)){for(var o=0;o<i.size();o++){var s=t.PrFactory.createStructure();var a=i.get(o).asStructure();if(t.notNull(a)){s.copyFrom(a,null);this.remapSubItem(s);var u=s.getStringByKey(r);if(t.notNull(u)){n.put(u,s)}}}}};t.DfContentParser.prototype.remapSubItem=function(t){};t.QsOlapDpFactory=function(){};t.QsOlapDpFactory.prototype=new t.QsDataproviderFactory;t.QsOlapDpFactory.prototype._ff_c="QsOlapDpFactory";t.QsOlapDpFactory.staticSetupFactory=function(){var e=new t.QsOlapDpFactory;t.QsDataproviderFactory.registerFactory(t.QsDpType.OLAP,e)};t.QsOlapDpFactory.prototype.newDataprovider=function(e,r){var n=t.QsOlapDp.create(e,r);return n};t.QsRestDpFactory=function(){};t.QsRestDpFactory.prototype=new t.QsDataproviderFactory;t.QsRestDpFactory.prototype._ff_c="QsRestDpFactory";t.QsRestDpFactory.staticSetupFactory=function(){var e=new t.QsRestDpFactory;t.QsDataproviderFactory.registerFactory(t.QsDpType.REST,e)};t.QsRestDpFactory.prototype.newDataprovider=function(e,r){var n=t.QsRestDp.create(e,r);return n};t.AbstractGlobalContent=function(){};t.AbstractGlobalContent.prototype=new t.GlobalValueHolder;t.AbstractGlobalContent.prototype._ff_c="AbstractGlobalContent";t.AbstractGlobalContent.prototype.m_dps=null;t.AbstractGlobalContent.prototype.m_bnd=null;t.AbstractGlobalContent.prototype.fireChange=function(e){var r=e.getListByKey("dpNames");if(t.notNull(r)&&t.notNull(this.m_dps)&&t.notNull(this.m_bnd)){for(var n=0;n<r.size();n++){r.getStringAt(n);this.m_dps.getByKey(r.getStringAt(n)).reinit()}}for(var i=0;i<this.m_bnd.size();i++){this.m_bnd.get(i).processInit()}};t.AbstractGlobalContent.prototype.setupDpsAndBindings=function(e,r){this.m_dps=t.XHashMapByString.create();for(var n=0;n<e.size();n++){var i=e.get(n);this.m_dps.put(i.getName(),i)}this.m_bnd=r};t.FieldSelectionParser=function(){};t.FieldSelectionParser.prototype=new t.DfContentParser;t.FieldSelectionParser.prototype._ff_c="FieldSelectionParser";t.FieldSelectionParser.prototype.remapSubItem=function(e){if(t.notNull(e)){var r=e.putNewStructure("entities");if(e.containsKey("entityIds")){this.parseContentToStructure(e.getListByKey("entityIds"),"id",r);this.parseContentToStructure(e.getListByKey("entityIds"),"dimension",r)}}};t.PageFilterParser=function(){};t.PageFilterParser.prototype=new t.DfContentParser;t.PageFilterParser.prototype._ff_c="PageFilterParser";t.PageFilterParser.prototype.getIdName=function(){return"source"};t.StoryFilterParser=function(){};t.StoryFilterParser.prototype=new t.DfContentParser;t.StoryFilterParser.prototype._ff_c="StoryFilterParser";t.StoryFilterParser.prototype.getIdName=function(){return"filterId"};t.QsRestDp=function(){};t.QsRestDp.prototype=new t.SxRestDp;t.QsRestDp.prototype._ff_c="QsRestDp";t.QsRestDp.create=function(e,r){var n=new t.QsRestDp;n.setupDp(e,r);return n};t.QsRestDp.prototype.m_quasar=null;t.QsRestDp.prototype.setupDp=function(e,r){this.m_quasar=e;var n=r.getStringByKey(t.UiQuasarConstants.QSA_NAME);var i=r.getStringByKey(t.UiQuasarConstants.QSA_ENDPOINT);this.setupExt(n,i,this.m_quasar.getApplication())};t.QsRestDp.prototype.releaseObject=function(){this.m_quasar=null;t.SxRestDp.prototype.releaseObject.call(this)};t.QsRestDp.prototype.processInit=function(){this.updateData()};t.QsRestDp.prototype.getName=function(){return this.getDataProviderName()};t.QsRestDp.prototype.setName=function(t){this.setDataProviderName(t)};t.QsRestDp.prototype.setGlobalObjects=function(t){};t.InputControlContent=function(){};t.InputControlContent.prototype=new t.AbstractGlobalContent;t.InputControlContent.prototype._ff_c="InputControlContent";t.CustomAbstractWidget=function(){};t.CustomAbstractWidget.prototype=new t.XObject;t.CustomAbstractWidget.prototype._ff_c="CustomAbstractWidget";t.CustomAbstractWidget.prototype.createCustomControl=function(t,e,r){return this.mapFilterToWidget(t,e,e.getStringByKeyExt("id",e.getStringByKeyExt("source",e.getStringByKeyExt("name","unknown"))),r.getByKey(this.getGlobalId()))};t.CustomAbstractWidget.prototype.getGlobalId=function(){return""};t.CustomAbstractWidget.prototype.getPixelStringValue=function(e,r){var n=e.getByKey(r);if(t.isNull(n)){return""}if(n.isInteger()){return t.XStringUtils.concatenate2(t.XInteger.convertToString(n.asInteger().getInteger()),"px")}if(n.isString()){return n.asString().getString()}return""};t.CustomAbstractWidget.prototype.getNumberStringValue=function(e,r){var n=e.getByKey(r);if(t.isNull(n)){return"1"}if(n.isInteger()){return t.XInteger.convertToString(n.asInteger().getInteger())}if(n.isString()){return n.asString().getString()}return"1"};t.CustomAbstractWidget.prototype.mapFilterToWidget=function(e,r,n,i){var o=i.getContent().getByKey(r.getStringByKey(t.UiProperty.ID.getName()));if(o.containsKey("selectionInfos")){o=o.getStructureByKey("selectionInfos")}var s=o.getStructureByKey("filterTokenInfo");var a=o.getListByKey("possibleValues");var u=false;if(t.notNull(s)&&s.hasStringByKey("selectionType")&&t.XString.startsWith(s.getStringByKey("selectionType"),"multiple")){u=true}var l=e.newControl(t.UiType.VERTICAL_LAYOUT);l.setPropertyStringValue("X",this.getPixelStringValue(r,"X"));l.setPropertyStringValue("Y",this.getPixelStringValue(r,"Y"));l.setPropertyStringValue("Height",this.getPixelStringValue(r,"Height"));l.setPropertyStringValue("Width",this.getPixelStringValue(r,"Width"));var p=l.addNew(t.UiType.LABEL);p.setName(t.XStringUtils.concatenate3("Label","_",n));p.setText(o.getStringByKeyExt("title",o.getStringByKeyExt("customizedTitle","")));var g;var c=null;if(t.isNull(a)||a.size()===0){return null}var y=null;if(a.size()===1&&a.get(0).isStructure()&&a.getStructureAt(0).getByKey("key").isStructure()){y=a.getStructureAt(0).getStructureByKey("key")}if(t.notNull(y)){var m=a.getStructureAt(0).getStructureByKey("originalValue");var f=null;if(s.containsKey("originalRanges")){f=s.getListByKey("originalRanges").getStructureAt(0)}else{f=m}if(u){c=l.addNew(t.UiType.RANGE_SLIDER);c.setPropertyStringValue("SliderUpperValue",m.getStringByKey("end"))}else{c=l.addNew(t.UiType.SLIDER)}c.setPropertyStringValue("SliderMinimum",f.getStringByKey("start"));c.setPropertyStringValue("SliderMaximum",f.getStringByKey("end"));c.setPropertyStringValue("SliderStep",this.getNumberStringValue(f,"icSliderIncrement"));c.setPropertyStringValue("SliderValue",m.getStringByKey("start"));g=t.XHashMapByString.create();g.put("container",o);g.put("controller",i);c.setCustomObject(g);c.registerOnChange(this)}else{if(u){c=l.addNew(t.UiType.VERTICAL_LAYOUT);for(var d=0;d<a.size();d++){var S=a.getStructureAt(d);var _=c.addNew(t.UiType.CHECKBOX);g=t.XHashMapByString.create();g.put("container",o);g.put("controller",i);g.put("selection",S);_.setCustomObject(g);if(t.notNull(S)){var v=S.getListByKey("key");if(t.notNull(v)&&v.isList()){_.setName(v.getStringAt(0))}var h=S.getStructureByKey("originalValue");if(t.notNull(h)&&h.isStructure()){_.setText(h.getStringByKey("displayName"))}_.setPropertyStringValue("Checked",t.XBoolean.convertToString(S.getBooleanByKeyExt("isSelected",false)))}_.registerOnChange(this)}}else{c=l.addNew(t.UiType.DROPDOWN);for(var E=0;E<a.size();E++){var Q=a.getStructureAt(E);var N=c.addNew(t.UiType.DROPDOWN_ITEM);N.setName(Q.getListByKey("key").getStringAt(0));N.setText(Q.getStructureByKey("originalValue").getStringByKey("displayName"));g=t.XHashMapByString.create();g.put("container",o);g.put("controller",i);g.put("selection",Q);N.setCustomObject(g);if(Q.getBooleanByKey("isSelected")){var C=Q.getListByKey("key");if(t.notNull(C)&&C.isList()){c.setPropertyStringValue("SelectedName",C.getStringAt(0))}}}c.registerOnSelect(this)}}if(t.notNull(c)){c.setName(n)}return l};t.CustomAbstractWidget.prototype.onChange=function(e){var r=e.getControl().getCustomObject();var n=r.getByKey("controller");var i=r.getByKey("container");var o=r.getByKey("selection");if(t.notNull(o)){var s=i.getListByKey("possibleValues");o.putBoolean("isSelected",e.getControl().isChecked());var a=i.getListByKey("originalValues");a.clear();a.clear();var u=i.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");u.clear();for(var l=0;l<s.size();l++){var p=s.getStructureAt(l);if(p.getBooleanByKey("isSelected")){a.add(p.getStructureByKey("originalValue"));u.add(p.getListByKey("key"))}}}else{var g=i.getListByKey("originalValues").getStructureAt(0);var c=i.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");c.clear();var y=e.getControl().getSliderValue();var m=e.getControl().getSliderValue();if(t.XString.isEqual("multiple",i.getStructureByKey("filterTokenInfo").getStringByKey("selectionType"))){y=t.XMath.min(y,e.getControl().getSliderUpperValue());m=t.XMath.max(m,e.getControl().getSliderUpperValue())}c.addNewList().addString(t.XInteger.convertToString(y));c.addNewList().addString(t.XInteger.convertToString(m));g.putString("end",t.XInteger.convertToString(m));g.putString("start",t.XInteger.convertToString(y))}n.fireChange(i)};t.CustomAbstractWidget.prototype.onSelect=function(t){var e=t.getControl().getSelectedItem().getCustomObject();var r=e.getByKey("controller");var n=e.getByKey("container");var i=n.getListByKey("possibleValues");for(var o=0;o<i.size();o++){i.getStructureAt(o).putBoolean("isSelected",false)}var s=e.getByKey("selection");s.putBoolean("isSelected",true);var a=n.getListByKey("originalValues");a.clear();var u=n.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");u.clear();u.add(s.getListByKey("key"));a.add(s.getStructureByKey("originalValue"));r.fireChange(n)};t.SxDataProvider=function(){};t.SxDataProvider.prototype=new t.XComponent;t.SxDataProvider.prototype._ff_c="SxDataProvider";t.SxDataProvider.create=function(e){var r=new t.SxDataProvider;r.setupDp(e);return r};t.SxDataProvider.prototype.m_quasar=null;t.SxDataProvider.prototype.m_dataSource=null;t.SxDataProvider.prototype.m_dataProviderName=null;t.SxDataProvider.prototype.m_system=null;t.SxDataProvider.prototype.m_serviceConfig=null;t.SxDataProvider.prototype.m_vizDef=null;t.SxDataProvider.prototype.m_globalDef=null;t.SxDataProvider.prototype.m_queryDef=null;t.SxDataProvider.prototype.setupDp=function(t){this.setup();this.m_quasar=t};t.SxDataProvider.prototype.releaseObject=function(){this.m_serviceConfig=t.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;t.XComponent.prototype.releaseObject.call(this)};t.SxDataProvider.prototype.processInit=function(){this.m_serviceConfig=t.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(t.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system)}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName())}this.m_serviceConfig.setDataSourceByName(this.m_dataSource);var e=t.PrFactory.createStructure();if(t.notNull(this.m_vizDef)){e.put(t.UiQuasarConstants.QSA_VIZ_DEF,this.m_vizDef)}if(t.notNull(this.m_globalDef)){e.put(t.UiQuasarConstants.QSA_GLOBAL_DEF,this.m_globalDef)}if(t.notNull(this.m_queryDef)){e.putString(t.UiQuasarConstants.QSA_FF_QUERY,this.m_queryDef)}this.m_serviceConfig.setDefinitionByStructure(t.QModelFormat.UQM,e)};t.SxDataProvider.prototype.getComponentType=function(){return null};t.SxDataProvider.prototype.getName=function(){return this.m_dataProviderName};t.SxDataProvider.prototype.setName=function(t){this.m_dataProviderName=t};t.SxDataProvider.prototype.setSystem=function(t){this.m_system=t};t.SxDataProvider.prototype.setDataSource=function(t){this.m_dataSource=t};t.SxDataProvider.prototype.setVizDef=function(t){this.m_vizDef=t};t.SxDataProvider.prototype.setGlobalDef=function(t){this.m_globalDef=t};t.SxDataProvider.prototype.setQueryDefinition=function(t){this.m_queryDef=t};t.QsOlapDp=function(){};t.QsOlapDp.prototype=new t.XComponent;t.QsOlapDp.prototype._ff_c="QsOlapDp";t.QsOlapDp.create=function(e,r){var n=new t.QsOlapDp;n.setupDp(e,r);return n};t.QsOlapDp.prototype.m_quasar=null;t.QsOlapDp.prototype.m_dataSource=null;t.QsOlapDp.prototype.m_dataProviderName=null;t.QsOlapDp.prototype.m_system=null;t.QsOlapDp.prototype.m_serviceConfig=null;t.QsOlapDp.prototype.m_vizDef=null;t.QsOlapDp.prototype.m_globalDef=null;t.QsOlapDp.prototype.m_globalObjects=null;t.QsOlapDp.prototype.m_queryDef=null;t.QsOlapDp.prototype.m_modelFormat=null;t.QsOlapDp.prototype.m_queryDocument=null;t.QsOlapDp.prototype.m_variables=null;t.QsOlapDp.prototype.m_queryMode=null;t.QsOlapDp.prototype.setupDp=function(e,r){this.setup();this.m_quasar=e;var n=r.getStringByKey(t.UiQuasarConstants.QSA_DATA_SOURCE);if(t.XStringUtils.isNotNullAndNotEmpty(n)){this.setDataSource(n)}var i=r.getStringByKey(t.UiQuasarConstants.QSA_NAME);this.setName(i);var o=r.getStringByKey(t.UiQuasarConstants.QSA_SYSTEM);if(t.notNull(o)){this.setSystem(o)}var s=r.getStringByKey("ModelFormat");var a=null;if(t.XStringUtils.isNotNullAndNotEmpty(s)){a=t.ContentType.lookup(s)}var u=r.getStructureByKey(t.UiQuasarConstants.QSA_VIZ_DEF);if(t.isNull(a)){if(t.notNull(u)){a=t.QModelFormat.UQM}}if(a===t.QModelFormat.UQM){this.setVizDef(u);var l=r.getListByKey(t.UiQuasarConstants.VARIABLES);this.setVariables(l);var p=r.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_DEF);var g=r.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_DEFS);if(t.isNull(p)&&t.notNull(g)){p=g}this.setGlobalDef(p);var c=r.getStringByKey(t.UiQuasarConstants.QSA_FF_QUERY);if(t.notNull(c)){this.setQueryDefinition(c,t.QModelFormat.UQM)}this.m_queryMode=t.QueryManagerMode.DEFAULT}else if(t.notNull(a)){var y=r.getStructureByKey("QueryDocument");this.setQueryDocument(y,a);if(a.isTypeOf(t.QModelFormat.INA_DATA)){this.m_queryMode=t.QueryManagerMode.RAW_QUERY}}this.m_modelFormat=a};t.QsOlapDp.prototype.setVariables=function(t){this.m_variables=t};t.QsOlapDp.prototype.getVariables=function(){return this.m_variables};t.QsOlapDp.prototype.releaseObject=function(){this.m_serviceConfig=t.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;t.XComponent.prototype.releaseObject.call(this)};t.QsOlapDp.prototype.reinit=function(){var e=this.m_serviceConfig.getQueryManager();var r=e.getQueryModel();if(t.notNull(r)){r.stopEventing();e.resetPreparation();var n=r.getVizManager();var i=n.getVizDefinitions();i.clear();i.stopEventing();r.resumeEventing();if(i.isEventingStopped()){i.resumeEventing()}if(n.isEventingStopped()){n.resumeEventing()}i._notifyNodeChanged()}};t.QsOlapDp.prototype.processInit=function(){this.m_serviceConfig=t.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(t.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system)}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName())}if(t.notNull(this.m_dataSource)){this.m_serviceConfig.setDataSourceByName(this.m_dataSource)}if(this.m_modelFormat===t.QModelFormat.UQM){var e=t.PrFactory.createStructure();if(t.notNull(this.m_vizDef)){e.put(t.UiQuasarConstants.QSA_VIZ_DEF,this.m_vizDef)}if(t.notNull(this.m_globalDef)){e.put(t.UiQuasarConstants.QSA_GLOBAL_DEF,this.m_globalDef)}if(t.notNull(this.m_globalObjects)){var r=this.m_globalObjects.getKeysAsReadOnlyListOfString();var n=e.putNewStructure(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS);for(var i=0;i<r.size();i++){var o=r.get(i);n.put(o,this.m_globalObjects.getByKey(o).getContent())}}e.putStringNotNullAndNotEmpty("dpName",this.getName());if(t.notNull(this.m_queryDef)){e.putString(t.UiQuasarConstants.QSA_FF_QUERY,this.m_queryDef)}if(t.notNull(this.m_variables)){e.put(t.UiQuasarConstants.VARIABLES,this.m_variables)}this.m_serviceConfig.setDefinitionByStructure(t.QModelFormat.UQM,e)}else if(t.notNull(this.m_modelFormat)){this.m_serviceConfig.setDefinitionByStructure(this.m_modelFormat,this.m_queryDocument)}this.m_serviceConfig.setMode(this.m_queryMode)};t.QsOlapDp.prototype.getComponentType=function(){return null};t.QsOlapDp.prototype.getName=function(){return this.m_dataProviderName};t.QsOlapDp.prototype.setName=function(t){this.m_dataProviderName=t};t.QsOlapDp.prototype.setSystem=function(t){this.m_system=t};t.QsOlapDp.prototype.setDataSource=function(t){this.m_dataSource=t};t.QsOlapDp.prototype.setGlobalObjects=function(t){this.m_globalObjects=t};t.QsOlapDp.prototype.setVizDef=function(t){this.m_vizDef=t};t.QsOlapDp.prototype.setGlobalDef=function(t){this.m_globalDef=t};t.QsOlapDp.prototype.setQueryDefinition=function(t,e){this.m_queryDef=t;this.m_modelFormat=e};t.QsOlapDp.prototype.setQueryDocument=function(t,e){this.m_queryDocument=t;this.m_modelFormat=e};t.CustomCalcVarWidget=function(){};t.CustomCalcVarWidget.prototype=new t.CustomAbstractWidget;t.CustomCalcVarWidget.prototype._ff_c="CustomCalcVarWidget";t.CustomCalcVarWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES};t.CustomFieldSelectionWidget=function(){};t.CustomFieldSelectionWidget.prototype=new t.CustomAbstractWidget;t.CustomFieldSelectionWidget.prototype._ff_c="CustomFieldSelectionWidget";t.CustomFieldSelectionWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS};t.CustomPageFilterWidget=function(){};t.CustomPageFilterWidget.prototype=new t.CustomAbstractWidget;t.CustomPageFilterWidget.prototype._ff_c="CustomPageFilterWidget";t.CustomPageFilterWidget.prototype.getGlobalId=function(){return t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS};t.QuasarEngine=function(){};t.QuasarEngine.prototype=new t.DfApplicationContext;t.QuasarEngine.prototype._ff_c="QuasarEngine";t.QuasarEngine.DOC_RENDER_TEXT="Loading document...";t.QuasarEngine.createEmbedded=function(e,r,n,i){var o=t.QuasarEngine.create(e);o.setDocumentByNativeJson(i);o.setNativeParent(r,n);var s=e.getUiManager();if(t.notNull(s)){s.invokeOnEventingThread(o)}return o};t.QuasarEngine.create=function(e){var r=new t.QuasarEngine;r.setupEngine(e);return r};t.QuasarEngine.prototype.m_messages=null;t.QuasarEngine.prototype.m_genesis=null;t.QuasarEngine.prototype.m_masterSystemName=null;t.QuasarEngine.prototype.m_document=null;t.QuasarEngine.prototype.m_file=null;t.QuasarEngine.prototype.m_fileLoadedListener=null;t.QuasarEngine.prototype.m_renderFinishedProcedure=null;t.QuasarEngine.prototype.m_dataProviders=null;t.QuasarEngine.prototype.m_bindings=null;t.QuasarEngine.prototype.m_globalStyleClass=null;t.QuasarEngine.prototype.m_quasarMode=null;t.QuasarEngine.prototype.m_uiManager=null;t.QuasarEngine.prototype.m_nativeAnchorId=null;t.QuasarEngine.prototype.m_nativeAnchorObject=null;t.QuasarEngine.prototype.m_anchorGuid=null;t.QuasarEngine.prototype.m_globalLookupObjects=null;t.QuasarEngine.prototype.m_recursiveExtend=false;t.QuasarEngine.prototype.m_customLoadingText=null;t.QuasarEngine.prototype.setupEngine=function(e){this.setupApplicationContext(e);this.m_messages=t.MessageManager.createMessageManagerExt(this.getSession());this.m_recursiveExtend=true;this.m_quasarMode=t.QsMode.PRODUCTION};t.QuasarEngine.prototype.getLogSeverity=function(){return t.DfApplicationContext.prototype.getLogSeverity.call(this)};t.QuasarEngine.prototype.doExecute=function(){this.m_uiManager=this.getApplication().getUiManager();this.initializeUi(this.m_uiManager)};t.QuasarEngine.prototype.initializeUi=function(e){if(t.notNull(this.m_nativeAnchorId)||t.notNull(this.m_nativeAnchorObject)){this.m_anchorGuid=t.XGuid.getGuid();this.m_uiManager.setNativeAnchor(this.m_anchorGuid,this.m_nativeAnchorId,this.m_nativeAnchorObject)}var r;if(t.notNull(this.m_anchorGuid)){r=this.m_uiManager.getAnchorByName(this.m_anchorGuid)}else{r=this.m_uiManager.getAnchor()}var n=t.UiGenesis.create(r);this.renderUi(n)};t.QuasarEngine.prototype.renderUi=function(e){this.prepareRendering(e);try{var r=e.newControl(t.UiType.ACTIVITY_INDICATOR);r.useMaxSpace();r.setText("Loading...");e.setRoot(r);if(t.notNull(this.m_document)){r.setText(this.getDocumentLoadingText());t.XTimeout.timeout(10,function(){this.renderDocument()}.bind(this))}else if(t.notNull(this.m_file)){r.setText("Loading file...");t.XTimeout.timeout(10,function(){this.loadDocumentFromFile(this.m_file)}.bind(this))}else{this.showErrorMessage("No document given",null)}}catch(e){this.showErrorMessage(t.XErrorHelper.convertExceptionToString(e),null);this.log(t.XException.getStackTrace(e,0))}};t.QuasarEngine.prototype.prepareRendering=function(e){if(t.notNull(this.m_genesis)){this.m_genesis.clearUi()}this.m_genesis=e;if(t.notNull(this.m_genesis)){this.m_genesis.clearUi()}this.m_dataProviders=t.XList.create();this.m_bindings=t.XList.create();if(t.notNull(this.m_messages)){this.m_messages.clearMessages()}};t.QuasarEngine.prototype.renderDocument=function(){var e=this.getDocument();if(this.m_messages.hasErrors()){this.showErrorMessage("Failed to render document!",this.m_messages.getSummary())}else{if(this.validateDocument(e)===false){this.showErrorMessage("Cannot render! Not a valid quasar document!",null)}else{if(e.containsKey(t.UiQuasarConstants.QSA_MODE)){this.m_quasarMode=t.QsMode.lookupWithDefault(e.getStringByKey(t.UiQuasarConstants.QSA_MODE),t.QsMode.PRODUCTION)}if(e.containsKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM)){var r=e.getElementTypeByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM);if(r===t.PrElementType.STRING){this.m_masterSystemName=e.getStringByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM)}else if(r===t.PrElementType.STRUCTURE){var n=e.getStructureByKey(t.UiQuasarConstants.QSA_MASTER_SYSTEM);this.m_masterSystemName=n.getStringByKey(t.UiQuasarConstants.QSA_NAME);var i=n.getIntegerByKeyExt(t.UiQuasarConstants.QSA_MAX_SHARED_CONNECTIONS,-1);if(i!==-1&&t.XStringUtils.isNotNullAndNotEmpty(this.m_masterSystemName)){var o=this.getApplication().getConnectionPool();if(o.getSystemLandscape().getSystemDescription(this.m_masterSystemName)!==null){o.setMaximumSharedConnections(this.m_masterSystemName,i)}}}}if(e.containsKey(t.UiQuasarConstants.QSA_STYLE)){this.m_globalStyleClass=t.UiStyleClass.lookup(e.getStringByKey(t.UiQuasarConstants.QSA_STYLE))}this.m_globalLookupObjects=t.XHashMapByString.create();var s=e.getStructureByKey(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS);if(t.notNull(s)){this.parseGlobalObjects(s)}var a=this.parseDocument(e,null);this.m_genesis.setRoot(a);this.initDataProviders();this.initBindings();this.bindGlobalObjects()}}this.renderFinished()};t.QuasarEngine.prototype.bindGlobalObjects=function(){var t=this.m_globalLookupObjects.getKeysAsReadOnlyListOfString();for(var e=0;e<t.size();e++){this.m_globalLookupObjects.getByKey(t.get(e)).setupDpsAndBindings(this.m_dataProviders,this.m_bindings)}};t.QuasarEngine.prototype.parseGlobalObjects=function(e){var r=e.getKeysAsReadOnlyListOfString();for(var n=0;n<r.size();n++){var i=r.get(n);var o=t.ContentParserRegistration.getCustomContentParser(i);if(t.notNull(o)){var s=o.parseContent(e.getByKey(i));this.m_globalLookupObjects.put(i,s)}}};t.QuasarEngine.prototype.showErrorMessage=function(e,r){if(t.notNull(this.m_genesis)){t.UiMessageUtils.showErrorWithMessageAndDescription(this.m_genesis,e,r)}else{this.log("ERROR!");this.log(e);this.log(r)}};t.QuasarEngine.prototype.printQuasarParsingError=function(e){if(this.m_quasarMode===t.QsMode.DEVELOPMENT){this.showErrorMessage(e,null);throw t.XException.createRuntimeException(e)}else{this.logError(e)}};t.QuasarEngine.prototype.parseDocument=function(e,r){var n=e.getListByKey(t.UiQuasarConstants.QSA_FLOATING_CONTROLS);if(t.notNull(n)){for(var i=0;i<n.size();i++){var o=n.getStructureAt(i);this.parseControl(o,null)}}var s=e.getStructureByKey(t.UiQuasarConstants.QSA_CONTENT);if(t.isNull(s)){s=e}var a=this.parseControl(s,r);var u=e.getListByKey(t.UiQuasarConstants.QSA_DATA_PROVIDERS);if(t.notNull(u)){for(var l=0;l<u.size();l++){var p=u.getStructureAt(l);this.parseDataprovider(p)}}var g=e.getStructureByKey(t.UiQuasarConstants.QSA_DATA_PROVIDER);if(t.notNull(g)){this.parseDataprovider(g)}var c=e.getListByKey(t.UiQuasarConstants.QSA_BINDINGS);if(t.notNull(c)){this.parseBindings(c)}return a};t.QuasarEngine.prototype.parseBindings=function(t){for(var e=0;e<t.size();e++){var r=t.get(e);var n=this.parseBinding(r,false);this.m_bindings.add(n)}};t.QuasarEngine.prototype.parseControl=function(e,r){if(this.isPlatformSupported(e)===false){var n=e.getStringByKey(t.UiProperty.NAME.getName());if(t.XStringUtils.isNullOrEmpty(n)){this.log2("Current platform for the document element is not supported. Supported platforms: ",e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS))}else{this.log4("Current platform for the document element with name ",n," is not supported. Supported platforms: ",e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS))}return null}var i=t.UiType.lookupUiType(e.getStringByKey(t.UiQuasarConstants.QSA_CTYPE));if(t.isNull(i)){i=r}var o=e.getStringByKey(t.UiQuasarConstants.QSA_CUSTOM_CONTROL);var s=t.UiStyleClass.lookup(e.getStringByKey(t.UiQuasarConstants.QSA_STYLE));if(t.isNull(s)&&t.notNull(this.m_globalStyleClass)){s=this.m_globalStyleClass}var a=e.getStringByKey(t.UiQuasarConstants.QSA_ID);var u=e.getStringByKey(t.UiQuasarConstants.QSA_NAME);var l=null;if(t.notNull(i)){l=this.m_genesis.newControlExt(i,s,a,u,null,null,null,-1,-1);if(t.isNull(l)){this.printQuasarParsingError(t.XStringUtils.concatenate2("Failed to create control with type: ",i.getName()));return null}l.setCustomObject(e);var p=e.getKeysAsReadOnlyListOfString();var g=null;var c=null;var y=this;var m=t.SxEventScriptingDp.createListener(this.m_genesis.getUiManager(),this.getApplication().getOlapEnvironment());y=m;for(var f=0;f<p.size();f++){var d=p.get(f);if(t.XString.isEqual(t.UiQuasarConstants.QSA_ID,d)===false){if(t.XString.isEqual(t.UiQuasarConstants.QSA_DATA_PROVIDER,d)){var S=e.getStructureByKey(d);g=this.parseDataprovider(S)}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_BINDING,d)){var _=e.getByKey(d);c=this.parseBinding(_,false);this.m_bindings.add(c)}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_BINDINGS,d)){var v=e.getListByKey(d);for(var h=0;h<v.size();h++){var E=v.get(h);var Q=this.parseBinding(E,false);Q.setControl(l);this.m_bindings.add(Q)}}else if(t.UiAllOperations.lookupListener(d)!==null){var N=t.UiAllOperations.lookupListener(d);N.executeRegisterListener(l,y)}else if(t.UiAllOperations.lookupSetterProperty(d)!==null){var C=t.UiUtils.getElementAsString(e,d);l.setPropertyStringValue(d,C)}else if(t.UiAggregation.lookup(d)!==null){var D=t.UiAggregation.lookup(d);if(l.hasAggregation(D)){var O=D.getAddOp();var A=e.getListByKey(d);if(t.notNull(A)&&A.size()>0){var P=O.getAggregationItemType();var T=D===t.UiAggregation.ITEMS;if(T&&t.isNull(P)){P=l.getDefaultItemType()}for(var B=0;B<A.size();B++){var U=A.getStructureAt(B);var x=this.parseControl(U,P);if(t.notNull(x)){O.executeAddIntoAggregation(l,x)}}if(T){var L=e.getStringByKey(t.UiQuasarConstants.QSA_SELECTED_NAME);if(t.notNull(L)&&A.size()>0){l.setSelectedName(L)}}}}else{this.printQuasarParsingError(t.XStringUtils.concatenate4("The control type ",l.getUiType().getName()," does not have an aggregation with name ",d))}}}}var b=e.getStructureByKey(t.UiProperty.CONTENT.getName());if(t.notNull(b)){var M=this.parseDocument(b,null);l.setContent(M)}var F=e.getStructureByKey(t.UiProperty.FOOTER.getName());if(t.notNull(F)){var R=this.parseDocument(F,null);l.setFooter(R)}var I=e.getStructureByKey(t.UiProperty.SUB_HEADER.getName());if(t.notNull(I)){var K=this.parseDocument(I,null);l.setSubHeader(K)}var X=e.getStructureByKey(t.UiProperty.HEADER.getName());if(t.notNull(X)){var w=this.parseDocument(X,null);l.setHeader(w)}var W=e.getStructureByKey(t.UiProperty.MENU.getName());if(t.notNull(W)){var V=this.parseDocument(W,null);l.setMenu(V)}var q=e.getStructureByKey(t.UiProperty.NAV_LIST.getName());if(t.notNull(q)){var G=this.parseDocument(q,null);l.setNavList(G)}var j=e.getStructureByKey(t.UiProperty.FIXED_NAV_LIST.getName());if(t.notNull(j)){var z=this.parseDocument(j,null);l.setFixedNavList(z)}if(t.notNull(c)){c.setControl(l);c.setDataprovider(g)}}else if(t.notNull(o)){var k=t.CustomControlRegistration.getCustomControl(o);if(t.notNull(k)){l=k.createCustomControl(this.m_genesis,e,this.m_globalLookupObjects)}else{l=this.m_genesis.newControlExt(t.UiType.LABEL,s,a,u,null,null,null,-1,-1);l.setText(t.XStringUtils.concatenate2("Could not find custom control with name: ",o))}}else{var H=e.getStringByKey(t.UiQuasarConstants.QSA_CTYPE);if(t.XStringUtils.isNullOrEmpty(H)){this.printQuasarParsingError("A CType was not specified, cannot create control!")}else{this.printQuasarParsingError(t.XStringUtils.concatenate3("Cannot find a UiType with the name ",H,". The specified control does not exist!"))}}return l};t.QuasarEngine.prototype.isPlatformSupported=function(e){var r=e.getStringByKey(t.UiQuasarConstants.QSA_SUPPORTED_PLATFORMS);var n=t.XStringTokenizer.splitString(r,",");var i=this.m_genesis.getUiManager();if(t.notNull(n)&&t.notNull(i)){var o=i.getPlatform();var s=n.getIterator();while(s.hasNext()){var a=s.next();var u=t.XPlatform.lookup(a);if(t.notNull(u)&&o.isTypeOf(u)===true){return true}}return false}return true};t.QuasarEngine.prototype.parseDataprovider=function(e){var r=e.getStringByKey(t.UiQuasarConstants.QSA_TYPE);var n=t.QsDpType.lookup(r);if(t.isNull(n)){n=t.QsDpType.OLAP}var i=t.QsDataproviderFactory.createDataprovider(n,this,e);i.setGlobalObjects(this.m_globalLookupObjects);this.m_dataProviders.add(i);return i};t.QuasarEngine.prototype.parseBinding=function(e,r){var n=t.SxBinding.create(this,r);var i=null;if(e.isStructure()){var o=e;i=o.getStringByKey(t.UiQuasarConstants.QSA_CACHE_ID);if(t.XStringUtils.isNullOrEmpty(i)){var s=o.getStringByKey(t.UiQuasarConstants.QSA_SOURCE);var a=o.getStringByKey(t.UiQuasarConstants.QSA_TYPE);i=t.XStringUtils.concatenate2(s,a)}n.setCacheIdentifier(i);var u=o.getStringByKey(t.UiQuasarConstants.QSA_SOURCE);n.setSource(u);var l=o.getStringByKey(t.UiQuasarConstants.QSA_TARGET);if(t.notNull(l)){n.setTarget(l)}var p=o.getStringByKey(t.UiQuasarConstants.QSA_TYPE);if(t.notNull(p)){var g=t.SemanticBindingType.lookup(p);n.setType(g)}}else if(e.isString()){var c=e;var y=c.getString();n.setSource(y);i=y}if(t.notNull(i)){i=this.replaceAllNonAlphaNum(i);n.setCacheIdentifier(i)}return n};t.QuasarEngine.prototype.replaceAllNonAlphaNum=function(e){var r=t.XString.size(e);var n=t.XStringBuffer.create();for(var i=0;i<r;i++){var o=t.XString.getCharAt(e,i);if((o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===95)===false){o=95}n.appendChar(o)}return n.toString()};t.QuasarEngine.prototype.initDataProviders=function(){for(var t=0;t<this.m_dataProviders.size();t++){var e=this.m_dataProviders.get(t);e.processInit()}};t.QuasarEngine.prototype.initBindings=function(){for(var t=0;t<this.m_bindings.size();t++){var e=this.m_bindings.get(t);e.processInit()}};t.QuasarEngine.prototype.sendEventWithName=function(e,r){if(t.isNull(r)){throw t.XException.createRuntimeException("Missing event! Please specify an event!")}var n=e.getControl();var i=n.getCustomObject();var o=i.getStringByKey(r.getName());var s=t.ScriptEngine.create();s.setVmCallback(this);s.setCustomObject("event",e);s.setCustomObject("uicontext",n);s.setInitialRegister(n);s.compile(o);s.execute()};t.QuasarEngine.prototype.onSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECT)};t.QuasarEngine.prototype.onSelectionChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECTION_CHANGE)};t.QuasarEngine.prototype.onChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_CHANGE)};t.QuasarEngine.prototype.onLiveChange=function(e){this.sendEventWithName(e,t.UiEvent.ON_LIVE_CHANGE)};t.QuasarEngine.prototype.onDelete=function(e){this.sendEventWithName(e,t.UiEvent.ON_DELETE)};t.QuasarEngine.prototype.onDetailPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_DETAIL_PRESS)};t.QuasarEngine.prototype.onMove=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE)};t.QuasarEngine.prototype.onMoveStart=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE_START)};t.QuasarEngine.prototype.onMoveEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_MOVE_END)};t.QuasarEngine.prototype.onResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_RESIZE)};t.QuasarEngine.prototype.onSuggestionSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_SUGGESTION_SELECT)};t.QuasarEngine.prototype.onScroll=function(e){this.sendEventWithName(e,t.UiEvent.ON_SCROLL)};t.QuasarEngine.prototype.onScrollLoad=function(e){this.sendEventWithName(e,t.UiEvent.ON_SCROLL_LOAD)};t.QuasarEngine.prototype.onHover=function(e){this.sendEventWithName(e,t.UiEvent.ON_HOVER)};t.QuasarEngine.prototype.onHoverEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_HOVER_END)};t.QuasarEngine.prototype.onPaste=function(e){this.sendEventWithName(e,t.UiEvent.ON_PASTE)};t.QuasarEngine.prototype.onEnter=function(e){this.sendEventWithName(e,t.UiEvent.ON_ENTER)};t.QuasarEngine.prototype.onPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_PRESS)};t.QuasarEngine.prototype.onEditingBegin=function(e){this.sendEventWithName(e,t.UiEvent.ON_EDITING_BEGIN)};t.QuasarEngine.prototype.onEditingEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_EDITING_END)};t.QuasarEngine.prototype.onBack=function(e){this.sendEventWithName(e,t.UiEvent.ON_BACK)};t.QuasarEngine.prototype.onRefresh=function(e){this.sendEventWithName(e,t.UiEvent.ON_REFRESH)};t.QuasarEngine.prototype.onLoadFinished=function(e){this.sendEventWithName(e,t.UiEvent.ON_LOAD_FINISHED)};t.QuasarEngine.prototype.onOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_OPEN)};t.QuasarEngine.prototype.onClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_CLOSE)};t.QuasarEngine.prototype.onBeforeOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_BEFORE_OPEN)};t.QuasarEngine.prototype.onBeforeClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_BEFORE_CLOSE)};t.QuasarEngine.prototype.onAfterOpen=function(e){this.sendEventWithName(e,t.UiEvent.ON_AFTER_OPEN)};t.QuasarEngine.prototype.onAfterClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_AFTER_CLOSE)};t.QuasarEngine.prototype.onClick=function(e){this.sendEventWithName(e,t.UiEvent.ON_CLICK)};t.QuasarEngine.prototype.onContextMenu=function(e){this.sendEventWithName(e,t.UiEvent.ON_CONTEXT_MENU)};t.QuasarEngine.prototype.onDoubleClick=function(e){this.sendEventWithName(e,t.UiEvent.ON_DOUBLE_CLICK)};t.QuasarEngine.prototype.onCollapse=function(e){this.sendEventWithName(e,t.UiEvent.ON_COLLAPSE)};t.QuasarEngine.prototype.onExpand=function(e){this.sendEventWithName(e,t.UiEvent.ON_EXPAND)};t.QuasarEngine.prototype.onSelectionFinish=function(e){this.sendEventWithName(e,t.UiEvent.ON_SELECTION_FINISH)};t.QuasarEngine.prototype.onSearch=function(e){this.sendEventWithName(e,t.UiEvent.ON_SEARCH)};t.QuasarEngine.prototype.onButtonPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_BUTTON_PRESS)};t.QuasarEngine.prototype.onError=function(e){this.sendEventWithName(e,t.UiEvent.ON_ERROR)};t.QuasarEngine.prototype.onReadLineFinished=function(e){this.sendEventWithName(e,t.UiEvent.ON_READ_LINE_FINISHED)};t.QuasarEngine.prototype.onExecute=function(e){this.sendEventWithName(e,t.UiEvent.ON_EXECUTE)};t.QuasarEngine.prototype.onTerminate=function(e){this.sendEventWithName(e,t.UiEvent.ON_TERMINATE)};t.QuasarEngine.prototype.onFileDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_FILE_DROP)};t.QuasarEngine.prototype.onDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_DROP)};t.QuasarEngine.prototype.onItemClose=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_CLOSE)};t.QuasarEngine.prototype.onItemSelect=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_SELECT)};t.QuasarEngine.prototype.onTableDragAndDrop=function(e){this.sendEventWithName(e,t.UiEvent.ON_TABLE_DRAG_AND_DROP)};t.QuasarEngine.prototype.onMenuPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_MENU_PRESS)};t.QuasarEngine.prototype.onValueHelpRequest=function(e){this.sendEventWithName(e,t.UiEvent.ON_VALUE_HELP_REQUEST)};t.QuasarEngine.prototype.onColumnResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_COLUMN_RESIZE)};t.QuasarEngine.prototype.onRowResize=function(e){this.sendEventWithName(e,t.UiEvent.ON_ROW_RESIZE)};t.QuasarEngine.prototype.onItemPress=function(e){this.sendEventWithName(e,t.UiEvent.ON_ITEM_PRESS)};t.QuasarEngine.prototype.onDragStart=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_START)};t.QuasarEngine.prototype.onDragEnd=function(e){this.sendEventWithName(e,t.UiEvent.ON_DRAG_END)};t.QuasarEngine.prototype.onEscape=function(e){this.sendEventWithName(e,t.UiEvent.ON_ESCAPE)};t.QuasarEngine.prototype.beforeScriptExecution=function(t){};t.QuasarEngine.prototype.afterScriptExecution=function(t){};t.QuasarEngine.prototype.nativeCall=function(e,r,n,i,o){var s=this.fillParameters(i,o);if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR,r)){var a=s.getStringAtExt(0,null);var u=this.m_genesis.getUiManager().select(a);return u}else if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR_D,r)){var l=s.getStringAtExt(0,null);var p=this.getApplication().getOlapEnvironment();var g=p.select(l);return g}else{var c=n;if(t.isNull(c)){c=e.getCustomObject("uicontext")}if(t.isNull(c)){c=e.getCustomObject("dpcontext")}var y=c.getComponentType();if(t.notNull(y)){if(y.isTypeOf(t.XComponentType._UI)){var m=c;var f=t.UiAllOperations.lookupOp(r);if(t.notNull(f)){return f.executeOperation(null,m,s,0)}}else if(y.isTypeOf(t.OlapComponentType.CONVENIENCE_CMDS)){var d=c;var S=t.QFactory.createReflectionCommand(r,null,null,null);if(t.notNull(S)){var _=S.executeOnContext(d,s);return _}}}return null}};t.QuasarEngine.prototype.fillParameters=function(e,r){var n=t.PrFactory.createList();var i=e.size()-r;var o;var s;var a;for(var u=0;u<r;u++){o=e.get(i+u);if(t.notNull(o)){s=o;a=s.getComponentType();if(a===t.XValueType.STRING){n.addString(s.toString())}else if(a===t.XValueType.BOOLEAN){n.addBoolean(s.getBoolean())}else if(a===t.XValueType.INTEGER){n.addInteger(s.getInteger())}else if(a.isTypeOf(t.XComponentType._UI)){n.addString(s.toString())}}else{n.add(null)}}return n};t.QuasarEngine.prototype.renderFinished=function(){if(t.notNull(this.m_renderFinishedProcedure)){this.m_renderFinishedProcedure()}};t.QuasarEngine.prototype.getMasterSystemName=function(){return this.m_masterSystemName};t.QuasarEngine.prototype.renderDocumentHeadless=function(e,r){if(t.notNull(e)&&t.notNull(r)){this.m_genesis=t.UiGenesis.create(r.getAnchor());this.prepareRendering(this.m_genesis);this.setDocument(e);this.renderDocument()}};t.QuasarEngine.prototype.setDocumentByNativeJson=function(e){var r=t.JsonParserFactory.newInstance();var n=r.convertFromNative(e);t.XObjectExt.release(r);var i=t.PrUtils.deepCopyElement(n);if(t.notNull(i)&&i.isStructure()){this.setDocument(i)}};t.QuasarEngine.prototype.setDocumentByFile=function(t,e){this.m_file=t;this.m_fileLoadedListener=e};t.QuasarEngine.prototype.loadDocumentFromFile=function(e){if(t.notNull(e)&&t.notNull(this.m_genesis)){if(e.isExisting()){e.processLoad(t.SyncType.NON_BLOCKING,this,null,t.CompressionType.NONE)}else{this.m_messages.addError(0,t.XStringUtils.concatenate2("File does not exist: ",e.getNativePath()))}}return null};t.QuasarEngine.prototype.setRenderFinishedProcedure=function(t){this.m_renderFinishedProcedure=t};t.QuasarEngine.prototype.validateDocument=function(e){if(t.isNull(e)){return false}if(e.isStructure()===false){return false}if(e.containsKey(t.UiQuasarConstants.QSA_CONTENT)===false){return false}return true};t.QuasarEngine.prototype.onFileLoaded=function(e,r,n,i){if(t.notNull(this.m_fileLoadedListener)){this.m_fileLoadedListener.onFileLoaded(e,r,n,i)}if(e.isValid()){if(t.notNull(n)){var o=n.getString();var s=this.getSession().getEnvironment();var a=this.getSession().getEnvironment().getVariableNames();for(var u=0;u<a.size();++u){var l=a.get(u);var p=s.getVariable(l);var g=t.XStringUtils.concatenate3("${",l,"}");o=t.XString.replace(o,g,p)}var c=t.JsonParserFactory.newInstance();var y=c.parse(o);if(c.isValid()&&t.notNull(y)){var m=y;if(m.isProxy()){m=m.clone()}t.XObjectExt.release(c);if(t.notNull(m)&&m.isStructure()){if(this.m_recursiveExtend){var f=this.m_file.getParent();if(t.notNull(f)){m=this.recursiveExtend(f,m)}}this.setDocument(m);this.renderDocument()}}else{var d=null;if(c.hasErrors()){this.m_messages.copyAllMessages(c);d=c.getFirstError().getText()}this.showErrorMessage("Failed to parse quasar document!",d);t.XObjectExt.release(c)}}else{this.showErrorMessage("Something went wrong! File content is empty!",e.getSummary())}}else{this.showErrorMessage("Error while fetching the specified file!",e.getFirstError().getText())}};t.QuasarEngine.prototype.setDocument=function(t){this.m_document=t};t.QuasarEngine.prototype.getDocument=function(){return this.m_document};t.QuasarEngine.prototype.recursiveExtend=function(e,r){if(t.notNull(r)){if(r.isStructure()){var n=r;var i=n.getKeysAsIteratorOfString();while(i.hasNext()){var o=i.next();var s=n.getByKey(o);var a=this.recursiveExtend(e,s);if(a!==s){n.put(o,a)}}var u=n.getStringByKey(t.UiQuasarConstants.QSA_RESOURCE_REF);if(t.notNull(u)){var l=e.newChild(u);var p=this.loadDocumentFromFile(l);if(t.notNull(p)&&p.isStructure()){var g=p;i=n.getKeysAsIteratorOfString();while(i.hasNext()){var c=i.next();var y=n.getByKey(c);g.put(c,y)}return p}}}else if(r.isList()){var m=r;for(var f=0;f<m.size();f++){var d=m.get(f);var S=this.recursiveExtend(e,d);if(S!==d){m.set(f,S)}}}}return r};t.QuasarEngine.prototype.setNativeParent=function(t,e){this.m_nativeAnchorId=t;this.m_nativeAnchorObject=e};t.QuasarEngine.prototype.clearBindings=function(){if(t.notNull(this.m_bindings)){for(var e=0;e<this.m_bindings.size();e++){var r=this.m_bindings.get(e);t.XObjectExt.release(r)}this.m_bindings.clear()}if(t.notNull(this.m_dataProviders)){for(var n=0;n<this.m_dataProviders.size();n++){var i=this.m_dataProviders.get(n);t.XObjectExt.release(i)}this.m_dataProviders.clear()}};t.QuasarEngine.prototype.reset=function(){this.clearBindings();if(t.notNull(this.m_genesis)){this.m_genesis.setRoot(null)}};t.QuasarEngine.prototype.setCustomLoadingText=function(t){this.m_customLoadingText=t};t.QuasarEngine.prototype.getDocumentLoadingText=function(){if(t.XStringUtils.isNotNullAndNotEmpty(this.m_customLoadingText)){return this.m_customLoadingText}return t.QuasarEngine.DOC_RENDER_TEXT};t.QuasarEngine.prototype.releaseObject=function(){if(t.notNull(this.m_genesis)){this.m_genesis.setRoot(null)}this.clearBindings();this.m_genesis=null;this.m_document=null;this.m_messages=t.XObjectExt.release(this.m_messages);this.m_uiManager=t.XObjectExt.release(this.m_uiManager);this.m_dataProviders=t.XObjectExt.release(this.m_dataProviders);this.m_bindings=t.XObjectExt.release(this.m_bindings);this.m_file=null;this.m_fileLoadedListener=null;this.m_renderFinishedProcedure=null;t.DfApplicationContext.prototype.releaseObject.call(this)};t.SxEventScriptingDp=function(){};t.SxEventScriptingDp.prototype=new t.SxEventScripting;t.SxEventScriptingDp.prototype._ff_c="SxEventScriptingDp";t.SxEventScriptingDp.createListener=function(e,r){var n=new t.SxEventScriptingDp;n.setupEventScriptingDp(e,r);return n};t.SxEventScriptingDp.prototype.m_olapEnvironment=null;t.SxEventScriptingDp.prototype.setupEventScriptingDp=function(e,r){t.SxEventScripting.prototype.setupEventScripting.call(this,e,null);this.m_olapEnvironment=r};t.SxEventScriptingDp.prototype.executeByKeyword=function(e,r,n){if(t.XString.isEqual(t.UiQuasarConstants.QSA_DOLLAR_D,e)){var i=r.getStringAtExt(0,null);var o=this.m_olapEnvironment.select(i);n.setBoolean(true);return o}return t.SxEventScripting.prototype.executeByKeyword.call(this,e,r,n)};t.SxEventScriptingDp.prototype.lookupComponent=function(e,r){var n=t.SxEventScripting.prototype.lookupComponent.call(this,e,r);if(t.isNull(n)){n=e.getCustomObject("dpcontext")}return n};t.SxEventScriptingDp.prototype.executeOperation=function(e,r,n,i){var o=null;if(e.isTypeOf(t.OlapComponentType.CONVENIENCE_CMDS)){var s=r;var a=t.QFactory.createReflectionCommand(n,null,null,null);if(t.notNull(a)){o=a.executeOnContext(s,i)}}else{o=t.SxEventScripting.prototype.executeOperation.call(this,e,r,n,i)}return o};t.QsDpType=function(){};t.QsDpType.prototype=new t.UiBaseConstant;t.QsDpType.prototype._ff_c="QsDpType";t.QsDpType.OLAP=null;t.QsDpType.REST=null;t.QsDpType.s_lookup=null;t.QsDpType.staticSetup=function(){t.QsDpType.s_lookup=t.XHashMapByString.create();t.QsDpType.OLAP=t.QsDpType.create("Olap");t.QsDpType.REST=t.QsDpType.create("Rest")};t.QsDpType.create=function(e){return t.UiBaseConstant.createUiConstant(new t.QsDpType,e,t.QsDpType.s_lookup)};t.QsDpType.lookup=function(e){return t.UiBaseConstant.lookupConstant(e,t.QsDpType.s_lookup)};t.QsMode=function(){};t.QsMode.prototype=new t.UiBaseConstant;t.QsMode.prototype._ff_c="QsMode";t.QsMode.DEVELOPMENT=null;t.QsMode.PRODUCTION=null;t.QsMode.s_lookup=null;t.QsMode.staticSetup=function(){t.QsMode.s_lookup=t.XHashMapByString.create();t.QsMode.DEVELOPMENT=t.QsMode.create("Development");t.QsMode.PRODUCTION=t.QsMode.create("Production")};t.QsMode.create=function(e){return t.UiBaseConstant.createUiConstant(new t.QsMode,e,t.QsMode.s_lookup)};t.QsMode.lookup=function(e){return t.QsMode.s_lookup.getByKey(e)};t.QsMode.lookupWithDefault=function(e,r){return t.UiBaseConstant.lookupConstant(e,t.QsMode.s_lookup)};t.QuasarProgram=function(){};t.QuasarProgram.prototype=new t.DfUiProgram;t.QuasarProgram.prototype._ff_c="QuasarProgram";t.QuasarProgram.DEFAULT_PROGRAM_NAME="Quasar";t.QuasarProgram.createRunner=function(){var e=t.KernelBoot.createByName(t.QuasarProgram.DEFAULT_PROGRAM_NAME);return e};t.QuasarProgram.createQuasar=function(e,r,n,i,o){var s=e;if(t.notNull(s)){s=s.newSubApplication(null)}var a=new t.QuasarProgram;a.setInitialSystemType(r);a.setApplication(s);a.evalArguments();a.initializeProgram();a.m_quasarTemplateNative=n;a.m_quasarTemplate=i;a.m_quasarTemplateFile=o;return a};t.QuasarProgram.prototype.m_quasarTemplateNative=null;t.QuasarProgram.prototype.m_quasarTemplate=null;t.QuasarProgram.prototype.m_quasarTemplateFile=null;t.QuasarProgram.prototype.m_core=null;t.QuasarProgram.prototype.m_subApplication=null;t.QuasarProgram.prototype.newProgram=function(){var e=new t.QuasarProgram;e.setup();return e};t.QuasarProgram.prototype.getProgramName=function(){return t.QuasarProgram.DEFAULT_PROGRAM_NAME};t.QuasarProgram.prototype.doSetupProgramMetadata=function(e){t.DfUiProgram.prototype.doSetupProgramMetadata.call(this,e);e.addParameter(t.DfProgram.PARAM_FILE,"The file")};t.QuasarProgram.prototype.evalArguments=function(){t.DfUiProgram.prototype.evalArguments.call(this)};t.QuasarProgram.prototype.releaseObject=function(){this.m_quasarTemplateNative=null;this.m_quasarTemplateFile=null;this.m_quasarTemplate=null;this.m_subApplication=t.XObjectExt.release(this.m_subApplication);this.m_core=t.XObjectExt.release(this.m_core);t.DfUiProgram.prototype.releaseObject.call(this)};t.QuasarProgram.prototype.getLogSeverity=function(){return t.DfUiProgram.prototype.getLogSeverity.call(this)};t.QuasarProgram.prototype.getMenuBarDisplayName=function(){return"Quasar"};t.QuasarProgram.prototype.setupProgram=function(){return null};t.QuasarProgram.prototype.buildUi=function(e){this.resolveArgs();this.m_core=t.QuasarEngine.create(this.getApplication());if(t.notNull(this.m_quasarTemplateNative)){this.m_core.setDocumentByNativeJson(this.m_quasarTemplateNative)}else if(t.notNull(this.m_quasarTemplate)){this.m_core.setDocument(this.m_quasarTemplate)}else{if(t.notNull(this.m_quasarTemplateFile)){this.m_core.setDocumentByFile(this.m_quasarTemplateFile,null)}else{this.log("Core is not initialized due to missing document")}}this.m_core.renderUi(e)};t.QuasarProgram.prototype.resolveArgs=function(){var e=this.getArgumentStructure();var r=t.XStringBuffer.create().append("Quasar");if(t.notNull(e)){var n=e.getStringByKey(t.DfProgram.PARAM_FILE);if(t.notNull(n)){var i=this.getProcess();this.m_quasarTemplateFile=t.XFile.createWithVars(i,n);if(this.m_quasarTemplateFile.isExisting()===false){this.log2("File does not exist: ",this.m_quasarTemplateFile.getTargetUriPath())}r.append("@").append(this.m_quasarTemplateFile.getName())}}this.setTitle(r.toString())};t.QuasarProgram.prototype.reset=function(){if(t.notNull(this.m_core)){this.m_core.reset()}this.buildUi(this.m_genesis)};t.QuasarProgram.prototype.setFile=function(t){this.m_quasarTemplateFile=t};t.QuasarModule=function(){};t.QuasarModule.prototype=new t.DfModule;t.QuasarModule.prototype._ff_c="QuasarModule";t.QuasarModule.s_module=null;t.QuasarModule.getInstance=function(){if(t.isNull(t.QuasarModule.s_module)){t.DfModule.checkInitialized(t.UiRemoteModule.getInstance());t.QuasarModule.s_module=t.DfModule.startExt(new t.QuasarModule);t.QsMode.staticSetup();t.QsDpType.staticSetup();t.QsDataproviderFactory.staticSetup();t.QsOlapDpFactory.staticSetupFactory();t.QsRestDpFactory.staticSetupFactory();t.ProgramRegistration.setProgramFactory(new t.QuasarProgram);t.ContentParserRegistration.staticSetup();t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS,new t.FieldSelectionParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_STORY_FILTERS,new t.StoryFilterParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS,new t.PageFilterParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES,new t.DfContentParser);t.ContentParserRegistration.setCustomContentParser(t.UiQuasarConstants.QSA_GLOBAL_OBJECTS_CALCULATIONS,new t.DfContentParser);t.CustomControlRegistration.setCustomControl("FieldSelectionInputControl",new t.CustomFieldSelectionWidget);t.CustomControlRegistration.setCustomControl("PageFilter",new t.CustomPageFilterWidget);t.CustomControlRegistration.setCustomControl("CalculationInputControl",new t.CustomCalcVarWidget);t.DfModule.stopExt(t.QuasarModule.s_module)}return t.QuasarModule.s_module};t.QuasarModule.prototype.getName=function(){return"ff8000.quasar"};t.QuasarModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff8000.quasar.js.map