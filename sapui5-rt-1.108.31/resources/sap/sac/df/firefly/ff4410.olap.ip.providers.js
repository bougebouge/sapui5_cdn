/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4400.olap.providers","sap/sac/df/firefly/ff4315.olap.ip.impl"],function(e){"use strict";e.PlanningStateHandlerImpl=function(){};e.PlanningStateHandlerImpl.prototype=new e.XObject;e.PlanningStateHandlerImpl.prototype._ff_c="PlanningStateHandlerImpl";e.PlanningStateHandlerImpl.prototype.update=function(n,t,r,a){e.PlanningState.update(n,t,r,a)};e.PlanningStateHandlerImpl.prototype.updateFromResponse=function(n,t,r,a,i){e.PlanningState.updateFromResponse(n,t,r,a,i)};e.PlanningStateHandlerImpl.prototype.getDataAreaStateByName=function(n,t,r){return e.DataAreaState.getDataAreaStateByName(n,t,r)};e.PlanningVariableProcessorProviderFactory=function(){};e.PlanningVariableProcessorProviderFactory.prototype=new e.XObject;e.PlanningVariableProcessorProviderFactory.prototype._ff_c="PlanningVariableProcessorProviderFactory";e.PlanningVariableProcessorProviderFactory.staticSetup=function(){e.PlanningCommandWithId.s_variableHelpProviderFactory=new e.PlanningVariableProcessorProviderFactory};e.PlanningVariableProcessorProviderFactory.prototype.createVariableHelpProvider=function(n){return e.InAPlanningValueHelpProvider.create(n)};e.PlanningVariableProcessorProviderFactory.prototype.createProcessorProvider=function(n,t,r){return e.InAPlanningVarProcessorProvider.createInAVariableProcessorProvider(n,t,r)};e.InADataAreaRequestHelper={createGetMetadataRequestStructure:function(n){var t=e.PrFactory.createStructure();var r=e.DataAreaState.getDataAreaState(n.getDataArea());if(!r.isSubmitted()){t.putNewList("DataAreas").add(r.serializeToJson())}var a=t.putNewStructure("Metadata");n.getPlanningService().getInaCapabilities().exportActiveCapabilities(a);a.putString("Context","Planning");var i=a.putNewList("Expand");i.addString("Command");var o=a.putNewStructure("DataSource");var s=n.getDataArea().getDataArea();if(e.isNull(s)){s="DEFAULT"}o.putString("DataArea",s);o.putString("InstanceId",n.getInstanceId());return t},extractBaseDataSource:function(n){var t=e.PrUtils.getStructureProperty(n,"BaseDataSource");if(e.isNull(t)){return null}var r=e.PrUtils.getStringValueProperty(t,"ObjectName",null);if(e.isNull(r)){return null}var a=e.MetaObjectType.lookup(e.PrUtils.getStringValueProperty(t,"Type",null));if(e.isNull(a)){return null}return e.QFactory.createDataSourceWithType(a,r)}};e.InAPlanningHelper={DEFAULT_RETURN_CODE:9999,createCommandsList:function(e){var n=e.putNewStructure("Planning");return n.putNewList("commands")},getCommandResponse:function(n,t,r){var a=e.InAPlanningHelper.getCommandIndex(n,r);return e.PrUtils.getStructureElement(t,a)},getCommandIndex:function(n,t){if(e.isNull(n)){return-1}var r=t;var a=false;var i=null;if(e.XString.isEqual("get_action_parameters",t)){r="get_parameters";a=true;i="LIST_ACTIONS"}for(var o=0;o<n.size();o++){var s=e.PrUtils.getStructureElement(n,o);var l=e.PrUtils.getStringProperty(s,"command");if(e.isNull(l)){continue}if(e.XString.isEqual(l.getString(),r)){if(!a){return o}var u=e.PrUtils.getStringProperty(s,"mode");if(e.notNull(u)){if(e.XString.isEqual(u.getString(),i)){return o}}var p=e.PrUtils.getListProperty(s,"mode");var g=e.PrUtils.getListSize(p,0);for(var c=0;c<g;c++){var P=e.PrUtils.getStringElement(p,c);if(e.notNull(P)){if(e.XString.isEqual(P.getString(),i)){return o}}}}}return-1},getResponsesReturnCodeStrict:function(n,t){if(e.isNull(n)||e.isNull(t)){return-1}var r=0;var a=false;var i=e.PrUtils.getStructureProperty(n,"Planning");if(e.isNull(i)){var o=e.PrUtils.getListProperty(n,"Planning");if(e.notNull(o)){a=true;for(var s=0;s<o.size();s++){i=e.PrUtils.getStructureElement(o,s);if(e.notNull(i)){var l=e.InAPlanningHelper.isValidPlanningStructure(i,t);if(l!==0){r=l;break}}}}}else{a=true;r=e.InAPlanningHelper.isValidPlanningStructure(i,t)}if(!a){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"Planning structure is missing",n);return e.InAPlanningHelper.DEFAULT_RETURN_CODE}return r},isValidPlanningStructure:function(n,t){var r=e.PrUtils.getIntegerValueProperty(n,"return_code",e.InAPlanningHelper.DEFAULT_RETURN_CODE);if(e.isNull(n)){t.addError(e.ErrorCodes.PARSER_ERROR,"Planning structure is missing");return r}var a=e.PrUtils.getStringValueProperty(n,"exception_text",null);if(e.notNull(a)){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.OTHER_ERROR,a,n);return r}var i=e.PrUtils.getStringValueProperty(n,"message",null);if(e.notNull(i)){t.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.OTHER_ERROR,i,n);return r}return r},processResponseGetQuerySources:function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_query_sources");if(e.isNull(a)){return false}var i=r.getDataSourcesInternal();i.clear();var o=e.PrUtils.getListProperty(a,"query_sources");if(e.isNull(o)){return false}for(var s=0;s<o.size();s++){var l=e.PrUtils.getStructureElement(o,s);var u=e.PrUtils.getStringValueProperty(l,"schema",null);if(e.isNull(u)){return false}var p=e.PrUtils.getStringValueProperty(l,"name",null);if(e.isNull(p)){return false}var g=e.QFactory.createDataSourceWithType(e.MetaObjectType.PLANNING,p);g.setSchemaName(u);var c=new e.PlanningModelQueryDataSource;var P=e.PrUtils.getStringValueProperty(l,"description",null);c.setDescription(P);c.setDataSource(g);c.setPrimary(l.getBooleanByKeyExt("primary",true));i.add(c)}return true},processResponseGetActionParameters:function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_action_parameters");if(e.isNull(a)){return false}var i=e.XHashMapByString.create();var o=e.PrUtils.getListProperty(a,"parameters");var s=e.PrUtils.getListSize(o,0);for(var l=0;l<s;l++){var u=e.PrUtils.getStructureElement(o,l);var p=e.PrUtils.getStringProperty(u,"name");if(e.isNull(p)){return false}var g=p.getString();if(i.containsKey(g)){return false}i.put(g,u)}var c=r.getActionMetadataListInternal();if(e.notNull(c)){for(var P=0;P<c.size();P++){var d=c.get(P);var A=d.getActionParameterNames();var m=new e.PlanningActionParameterMetadata;m.setActionMetadata(d);var I=e.PrFactory.createList();if(e.notNull(A)){for(var S=0;S<A.size();S++){var v=A.get(S);if(!i.containsKey(v)){return false}var f=i.getByKey(v);I.add(e.PrUtils.deepCopyElement(f))}}m.setParameters(I);d.setActionParameterMetadata(m)}}return true},processResponseGetParametersForModelTemplate:function(n,t,r){if(!r.supportsVersionParameters()){return true}var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_parameters");if(e.isNull(a)){return false}var i=r.getVersionParametersMetadataInternal();i.clear();var o=e.PrUtils.getListProperty(a,"parameters");if(e.isNull(o)){return true}for(var s=0;s<o.size();s++){var l=e.PrUtils.getStructureElement(o,s);if(e.isNull(l)){continue}var u=e.PrUtils.getStringProperty(l,"name");if(e.isNull(u)){continue}var p=u.getString();if(e.XStringUtils.isNullOrEmpty(p)){continue}var g=new e.PlanningVersionParameterMetadata;g.setName(p);var c=e.PrUtils.getStringProperty(l,"description");if(e.notNull(c)){g.setDescription(c.getString())}var P=e.PrUtils.getStringProperty(l,"type");if(e.notNull(P)){g.setType(P.getString())}var d=e.PrUtils.getBooleanValueProperty(l,"valueAllowed",false);g.setValueAllowed(d);var A=e.PrUtils.getBooleanValueProperty(l,"hasValue",false);g.setHasValue(A);g.setValue(e.PrUtils.getProperty(l,"value"));i.put(g.getName(),g)}return true},processResponseGetActions:function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_actions");if(e.isNull(a)){return false}var i=r.getActionMetadataListInternal();i.clear();var o=e.PrUtils.getListProperty(a,"actions");if(e.isNull(o)){return false}for(var s=0;s<o.size();s++){var l=e.PrUtils.getStructureElement(o,s);var u=e.PrUtils.getStringValueProperty(l,"id",null);if(e.isNull(u)){return false}var p=e.PrUtils.getStringValueProperty(l,"name",null);if(e.isNull(p)){return false}var g=e.PlanningActionType.lookup(e.PrUtils.getIntegerValueProperty(l,"type",-1));if(e.PrUtils.getBooleanValueProperty(l,"publish",false)){g=e.PlanningActionType.PUBLISH}var c=new e.PlanningActionMetadata;c.setActionId(u);c.setActionName(p);var P=e.PrUtils.getStringValueProperty(l,"description",null);c.setActionDescription(P);c.setActionType(g);var d=e.PrUtils.getBooleanValueProperty(l,"default",false);c.setDefault(d);var A=null;var m=e.PrUtils.getListProperty(l,"parameters");var I=e.PrUtils.getListSize(m,0);for(var S=0;S<I;S++){var v=e.PrUtils.getStringElement(m,S);if(e.notNull(v)){if(e.isNull(A)){A=e.XListOfString.create()}A.add(v.getString())}}c.setActionParameterNames(A);i.add(c)}return true},getResponsesList:function(n){return e.PrUtils.getListProperty(n,"Planning")},getCommandsList:function(n){var t=e.PrUtils.getStructureProperty(n,"Planning");return e.PrUtils.getListProperty(t,"commands")},processResponseGetVersionState:function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_version_state");if(e.isNull(a)){return false}var i=e.PrUtils.getStructureProperty(a,"version_state");if(e.isNull(i)){return false}return e.InAPlanningHelper.setVersionState(i,r)},setVersionState:function(n,t){var r=e.PrUtils.getStringValueProperty(n,"state",null);var a=e.PlanningVersionState.lookup(r);if(e.isNull(a)){return false}var i=e.PrUtils.getIntegerValueProperty(n,"changes",0);var o=e.PrUtils.getIntegerValueProperty(n,"undo_changes",0);t.setVersionState(a);t.setTotalChangesSize(i);t.setUndoChangesSize(o);var s=e.PrUtils.getStringProperty(n,"create_time");if(e.notNull(s)){var l=e.XDateTime.createDateTimeFromIsoFormat(s.getString());t.setCreationTime(l)}var u=e.PrUtils.getStringProperty(n,"backup_time");if(e.notNull(u)){var p=e.XDateTime.createDateTimeFromIsoFormat(u.getString());t.setBackupTime(p)}e.InAPlanningHelper.resetActionState(n,t);return true},resetActionState:function(n,t){var r=false;var a=null;var i=null;var o=false;var s=null;var l=null;var u=null;var p=e.PrUtils.getStructureProperty(n,"action_state");if(e.notNull(p)){r=e.PrUtils.getBooleanValueProperty(p,"sequence_active",false);if(r){a=e.PrUtils.getStringValueProperty(p,"sequence_description",null);if(e.isNull(a)){a=e.PrUtils.getStringValueProperty(p,"description",null)}i=e.PrUtils.getDateTimeProperty(p,"sequence_create_time",false,null);l=e.PrUtils.getDateTimeProperty(p,"action_end_time",false,null);u=e.PrUtils.getStringValueProperty(p,"user_name",null)}o=e.PrUtils.getBooleanValueProperty(p,"action_active",false);if(o){s=e.PrUtils.getDateTimeProperty(p,"action_start_time",false,null)}}t.setActionSequenceActive(r);t.setActionSequenceDescription(a);t.setActionSequenceCreateTime(i);t.setActionActive(o);t.setActionStartTime(s);t.setActionEndTime(l);t.setUserName(u)},processResponseGetVersions:function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_versions");if(e.isNull(a)){return false}var i=e.PrUtils.getListProperty(a,"versions");if(e.isNull(i)){return false}r.resetAllVersionStates();r.setVersionPrivilegesInitialized();e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesServerState(r);var o=true;for(var s=0;s<i.size();s++){var l=e.PrUtils.getStructureElement(i,s);if(!e.InAPlanningHelper.processVersionStructure(l,r)){o=false}}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesClientState(r);r.updateAllInvalidPrivileges();return o},processVersionStructure:function(n,t){if(e.isNull(n)){return false}var r=e.PrUtils.getStringValueProperty(n,"schema",null);if(e.isNull(r)){return false}if(!e.XString.isEqual(e.PrUtils.getStringValueProperty(n,"model",null),t.getPlanningModelName())){return false}var a=e.PrUtils.getIntegerProperty(n,"version_id");if(e.isNull(a)){return false}var i=e.PrUtils.getBooleanProperty(n,"active");if(e.isNull(i)){return false}var o=e.PlanningVersionState.lookup(e.PrUtils.getStringValueProperty(n,"state",null));if(e.isNull(o)){return false}var s=i.getBoolean();if(s!==o.isActive()){return false}var l=e.PrUtils.getIntegerValueProperty(n,"changes",0);var u=e.PrUtils.getIntegerValueProperty(n,"undo_changes",0);var p=false;var g=e.PrUtils.getStringValueProperty(n,"owner",null);var c=e.PlanningPrivilege.lookupWithDefault(e.PrUtils.getStringValueProperty(n,"privilege",null),null);if(e.isNull(c)){if(t.isWithSharedVersions()){return false}g=null;c=e.PlanningPrivilege.OWNER}else{if(c===e.PlanningPrivilege.OWNER){g=null}else{p=true}}if(p===(c===e.PlanningPrivilege.OWNER)){return false}var P=a.getInteger();var d=e.PrUtils.getStringValueProperty(n,"description",null);var A=t.getVersionIdentifier(P,p,g);var m=t.getVersionById(A,d);m.setPrivilege(c);m.setVersionState(o);m.setTotalChangesSize(l);m.setUndoChangesSize(u);var I=e.PrUtils.getStringProperty(n,"create_time");if(e.notNull(I)){var S=e.XDateTime.createDateTimeFromIsoFormat(I.getString());m.setCreationTime(S)}var v=e.PrUtils.getStringProperty(n,"backup_time");if(e.notNull(v)){var f=e.XDateTime.createDateTimeFromIsoFormat(v.getString());m.setBackupTime(f)}e.InAPlanningHelper.resetVersionParameters(n,m);if(!A.isSharedVersion()){var V=e.PrUtils.getListProperty(n,"query_sources");var y=e.PrUtils.getListSize(V,0);for(var R=0;R<y;R++){var C=e.PrUtils.getStructureElement(V,R);var M=e.PlanningModelResponseUpdateVersionPrivileges.getVersionDataSource(C);var _=e.PrUtils.getListProperty(C,"version_privileges");e.PlanningModelResponseUpdateVersionPrivileges.updateVersionPrivileges(t,M,A,_)}}e.InAPlanningHelper.resetActionState(n,m);return true},hasErrors:function(n,t,r){var a=t.getResult();var i=e.InAPlanningHelper.getResponsesList(r);if(e.isNull(i)){n.addError(e.ErrorCodes.PARSER_ERROR,"Couldn't find command responses.");return true}e.InAHelper.importMessages(r,n);var o=e.InAPlanningHelper.getResponsesReturnCodeStrict(r,n);a.setReturnCode(o);if(n.hasErrors()||o!==0){if(o===3042){t.getPlanningModel().resetPlanningModel()}return true}return false},resetVersionParameters:function(n,t){var r=e.PrFactory.createStructure();var a=e.PrUtils.getListProperty(n,"parameters");if(e.notNull(a)){for(var i=0;i<a.size();i++){var o=e.PrUtils.getStructureElement(a,i);if(e.isNull(o)){continue}if(!e.PrUtils.getBooleanValueProperty(o,"hasValue",false)){continue}var s=e.PrUtils.getStringProperty(o,"name");if(e.isNull(s)){continue}var l=e.PrUtils.getProperty(o,"value");r.put(s.getString(),l)}}t.setParametersStructureInternal(r)},createVersionCommand:function(n,t){var r=n.getPlanningModel();var a=e.PrFactory.createStructure();a.putString("command",t);a.putString("schema",r.getPlanningModelSchema());a.putString("model",r.getPlanningModelName());a.putInteger("version_id",n.getVersionId());if(n.isSharedVersion()){a.putString("owner",n.getVersionOwner())}if(e.XString.isEqual("get_version_state",t)){var i=a.putNewList("mode");i.addString("LIST_BACKUP_TIMESTAMP");i.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_parameters",t)){a.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("init",t)){var o=n.getPlanningModel().getPersistenceType();if(e.notNull(o)&&o!==e.PlanningPersistenceType.DEFAULT){a.putString("persistent_pdcs",o.getName())}}else if(e.XString.isEqual("close",t)){a.putString("mode",e.CloseModeType.BACKUP.getName())}return a},createModelCommand:function(n,t){var r=e.PrFactory.createStructure();var a=t;if(e.XString.isEqual("get_action_parameters",t)){a="get_parameters"}r.putString("command",a);r.putString("schema",n.getPlanningModelSchema());r.putString("model",n.getPlanningModelName());if(e.XString.isEqual("get_parameters",t)){r.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("get_versions",t)){var i=r.putNewList("mode");i.addString("LIST_PERSISTENT_PARAMETERS");if(n.isWithSharedVersions()){i.addString("LIST_SHARED_VERSIONS")}i.addString("LIST_QUERY_SOURCES");i.addString("LIST_SHARED_PRIVILEGES");i.addString("LIST_BACKUP_TIMESTAMP");i.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_actions",t)){var o=r.putNewList("mode");o.addString("LIST_ACTION_PARAMETERS")}else if(e.XString.isEqual("get_action_parameters",t)){var s=r.putNewList("mode");s.addString("LIST_ACTIONS")}return r}};e.InAPlanningHelperTmp=function(){};e.InAPlanningHelperTmp.prototype=new e.XObject;e.InAPlanningHelperTmp.prototype._ff_c="InAPlanningHelperTmp";e.InAPlanningHelperTmp.staticSetup=function(){e.PlanningModelCommandHelper.SetHelper(new e.InAPlanningHelperTmp)};e.InAPlanningHelperTmp.prototype.getCommandResponse=function(n,t,r){return e.InAPlanningHelper.getCommandResponse(n,t,r)};e.InAPlanningHelperTmp.prototype.getResponsesReturnCodeStrict=function(n,t){return e.InAPlanningHelper.getResponsesReturnCodeStrict(n,t)};e.InAPlanningHelperTmp.prototype.resetVersionParameters=function(n,t){e.InAPlanningHelper.resetVersionParameters(n,t)};e.InAPlanningHelperTmp.prototype.processResponseGetVersions=function(n,t,r){return e.InAPlanningHelper.processResponseGetVersions(n,t,r)};e.InAPlanningHelperTmp.prototype.convertRequestToBatch=function(n){var t=e.PrStructure.create();var r=t.putNewList(e.ConnectionConstants.INA_BATCH);var a=n.getStructureByKey("Planning");var i=a.getListByKey("commands");for(var o=0;o<i.size();o++){var s=r.addNewStructure();s.put("Planning",i.getStructureAt(o))}return t};e.InAPlanningHelperTmp.prototype.convertResponseFromBatch=function(n){var t=e.PrStructure.create();var r=t.putNewList("Planning");var a=n.getListByKey(e.ConnectionConstants.INA_BATCH);for(var i=0;i<a.size();i++){r.add(a.getStructureAt(i).getStructureByKey("Planning"))}return t};e.InAPlanningCapabilitiesProviderFactory=function(){};e.InAPlanningCapabilitiesProviderFactory.prototype=new e.XObject;e.InAPlanningCapabilitiesProviderFactory.prototype._ff_c="InAPlanningCapabilitiesProviderFactory";e.InAPlanningCapabilitiesProviderFactory.staticSetup=function(){e.PlanningService.s_capabilitiesProviderFactory=new e.InAPlanningCapabilitiesProviderFactory};e.InAPlanningCapabilitiesProviderFactory.prototype.create=function(n,t,r){return e.InACapabilitiesProvider.create(n,t,r,null)};e.InADataAreaRequestGetPlanningFunctionMetadata=function(){};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype=new e.QInAComponentWithStructure;e.InADataAreaRequestGetPlanningFunctionMetadata.prototype._ff_c="InADataAreaRequestGetPlanningFunctionMetadata";e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_GET_FUNCTION_METADATA};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.importComponentWithStructure=function(n,t,r,a,i){e.InAHelper.importMessages(t,n);var o=r;var s=o.getResult();var l=e.PrUtils.getStructureProperty(t,"Command");if(e.isNull(l)){return null}var u=e.PrUtils.getStructureProperty(l,"DataSource");var p=e.PrUtils.getStringValueProperty(u,"DataArea","DEFAULT");var g=o.getDataArea();if(!e.XString.isEqual(g.getDataArea(),p)){return null}var c=o.getInstanceId();if(e.isNull(c)){return null}var P=e.PrUtils.getStringValueProperty(u,"ObjectName",null);var d=o.getPlanningFunctionIdentifier();if(!e.XString.isEqual(P,d.getPlanningFunctionName())){return null}var A=e.PrUtils.getStringValueProperty(u,"Type",null);if(!e.XString.isEqual(A,"PlanningFunction")){return null}var m=e.PrUtils.getListProperty(l,"Dimensions");var I=e.PrUtils.getListProperty(l,"Variables");var S=e.InADataAreaRequestHelper.extractBaseDataSource(l);var v=new e.PlanningFunctionMetadata;v.setPlanningOperationIdentifier(d);v.setDataArea(g);v.setInstanceId(c);v.setDimenstions(m);v.setVariables(I);v.setBaseDataSource(S);s.setPlanningOperationMetadata(v);return r};e.InADataAreaRequestGetPlanningFunctionMetadata.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.InADataAreaRequestHelper.createGetMetadataRequestStructure(i);var s=o.getStructureByKey("Metadata");var l=s.getStructureByKey("DataSource");l.putString("ObjectName",i.getPlanningFunctionIdentifier().getPlanningFunctionName());l.putString("Type","PlanningFunction");return o};e.InADataAreaRequestGetPlanningSequenceMetadata=function(){};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype=new e.QInAComponentWithStructure;e.InADataAreaRequestGetPlanningSequenceMetadata.prototype._ff_c="InADataAreaRequestGetPlanningSequenceMetadata";e.InADataAreaRequestGetPlanningSequenceMetadata.extractStepMetadataList=function(n){var t=e.PrUtils.getListProperty(n,"Steps");if(e.isNull(t)){return null}var r=e.XList.create();for(var a=0;a<t.size();a++){var i=e.PrUtils.getStructureElement(t,a);if(e.isNull(i)){continue}var o=e.PrUtils.getIntegerValueProperty(i,"StepNumber",0);var s=e.PlanningSequenceStepType.lookup(e.PrUtils.getStringValueProperty(i,"StepType",null));var l=e.InADataAreaRequestHelper.extractBaseDataSource(i);var u=e.PrUtils.getStringValueProperty(i,"FilterName",null);var p=e.PrUtils.getStringValueProperty(i,"PlanningFunctionName",null);var g=e.PrUtils.getStringValueProperty(i,"QueryName",null);var c=e.PrUtils.getStringValueProperty(i,"Description",null);var P=e.PrUtils.getStringValueProperty(i,"CommandType",null);var d=new e.PlanningSequenceStepMetadata;d.setNumber(o);d.setType(s);d.setBaseDataSource(l);d.setFilterName(u);d.setPlanningFunctionName(p);d.setQueryName(g);d.setPlanningFunctionDescription(c);d.setCommendType(P);r.add(d)}return r};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_GET_SEQUENCE_METADATA};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.importComponentWithStructure=function(n,t,r,a,i){e.InAHelper.importMessages(t,n);var o=r;var s=o.getResult();var l=e.PrUtils.getStructureProperty(t,"Command");if(e.isNull(l)){return null}var u=e.PrUtils.getStructureProperty(l,"DataSource");var p=e.PrUtils.getStringValueProperty(u,"DataArea","DEFAULT");var g=o.getDataArea();if(!e.XString.isEqual(g.getDataArea(),p)){return null}var c=o.getInstanceId();if(e.isNull(c)){return null}var P=e.PrUtils.getStringValueProperty(u,"InstanceId",null);if(e.isNull(P)){P=c}else{if(!e.XString.isEqual(P,c)){return null}}var d=e.PrUtils.getStringValueProperty(u,"ObjectName",null);var A=o.getPlanningSequenceIdentifier();if(!e.XString.isEqual(d,A.getPlanningSequenceName())){return null}var m=e.PrUtils.getStringValueProperty(u,"Type",null);if(!e.XString.isEqual(m,"PlanningSequence")){return null}var I=e.PrUtils.getListProperty(l,"Dimensions");var S=e.PrUtils.getListProperty(l,"Variables");var v=e.InADataAreaRequestGetPlanningSequenceMetadata.extractStepMetadataList(l);var f=new e.PlanningSequenceMetadata;f.setPlanningOperationIdentifier(A);f.setDataArea(g);f.setInstanceId(P);f.setDimenstions(I);f.setVariables(S);f.setStepMetadataList(v);s.setPlanningOperationMetadata(f);return r};e.InADataAreaRequestGetPlanningSequenceMetadata.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.InADataAreaRequestHelper.createGetMetadataRequestStructure(i);var s=o.getStructureByKey("Metadata");var l=s.getStructureByKey("DataSource");l.putString("ObjectName",i.getPlanningSequenceIdentifier().getPlanningSequenceName());l.putString("Type","PlanningSequence");return o};e.InADataAreaCommand=function(){};e.InADataAreaCommand.prototype=new e.QInAComponentWithStructure;e.InADataAreaCommand.prototype._ff_c="InADataAreaCommand";e.InADataAreaCommand.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_COMMAND};e.InADataAreaCommand.prototype.importComponentWithStructure=function(n,t,r,a,i){e.InAHelper.importMessages(t,n);if(n.hasErrors()){return null}var o=r;var s=o.getResult();var l=e.PrUtils.getListProperty(t,"CommandResults");if(e.isNull(l)||l.size()!==1){return null}var u=e.PrUtils.getStructureElement(l,0);s.setExecuted(e.PrUtils.getBooleanProperty(u,"Executed").getBoolean());return o};e.InADataAreaCommand.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=e.DataAreaState.getDataAreaState(i.getDataArea());if(!s.isSubmitted()){var l=s.serializeToJson();o.putNewList("DataAreas").add(l)}var u=o.putNewStructure("Planning");i.getPlanningService().getInaCapabilities().exportActiveCapabilities(u);var p=u.putNewList("Commands");var g=i.getPlanningContextCommandType();var c=g.toString();if(g===e.PlanningContextCommandType.PUBLISH){c="SAVE"}var P=i.getDataArea();var d=P.getDataArea();if(e.isNull(d)){d="DEFAULT"}var A=p.addNewStructure();var m=A.putNewStructure("DataSource");m.putString("ObjectName",c);m.putString("Type","DataAreaCommand");m.putString("DataArea",d);return o};e.InADataAreaCommandClose=function(){};e.InADataAreaCommandClose.prototype=new e.QInAComponentWithStructure;e.InADataAreaCommandClose.prototype._ff_c="InADataAreaCommandClose";e.InADataAreaCommandClose.prototype.getComponentType=function(){return e.OlapComponentType.DATA_AREA_COMMAND_CLOSE};e.InADataAreaCommandClose.prototype.importComponentWithStructure=function(n,t,r,a,i){e.InAHelper.importMessages(t,n);if(n.hasErrors()){return null}var o=r;var s=o.getResult();var l=o.getDataArea();var u=e.DataAreaUtil.getQueryConsumerServices(l);if(e.notNull(u)){for(var p=0;p<u.size();p++){var g=u.get(p);e.XObjectExt.release(g)}}e.DataAreaState.removeDataAreaState(l);var c=l.getPlanningService();e.XObjectExt.release(c);s.setExecuted(true);return r};e.InADataAreaCommandClose.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=i.getDataArea().getDataArea();var s=e.PrFactory.createStructure();var l=s.putNewStructure("Analytics");var u=l.putNewList("Actions");var p=u.addNewStructure();p.putString("Type","Close");var g=p.putNewList("DataAreas");g.addString(o);return s};e.InALightweightDataAreaCommand=function(){};e.InALightweightDataAreaCommand.prototype=new e.QInAComponentWithStructure;e.InALightweightDataAreaCommand.prototype._ff_c="InALightweightDataAreaCommand";e.InALightweightDataAreaCommand.prototype.getComponentType=function(){return e.OlapComponentType.LIGHTWEIGHT_DATA_AREA_COMMAND};e.InALightweightDataAreaCommand.prototype.importComponentWithStructure=function(n,t,r,a,i){e.InAHelper.importMessages(t,n);if(n.hasErrors()){return null}var o=r;var s=o.getResult();var l=e.PrUtils.getListProperty(t,"CommandResults");if(e.isNull(l)||l.size()!==1){return null}var u=e.PrUtils.getStructureElement(l,0);s.setExecuted(e.PrUtils.getBooleanProperty(u,"Executed").getBoolean());return s};e.InALightweightDataAreaCommand.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=o.putNewStructure("Planning");t.getQueryManager().getInaCapabilities().exportActiveCapabilities(s);var l=s.putNewList("Commands");var u=i.getPlanningContextCommandType();var p=u.toString();var g=i.getQueryModel().getDataArea();if(e.isNull(g)){g="DEFAULT"}var c=l.addNewStructure();var P=c.putNewStructure("DataSource");P.putString("ObjectName",p);P.putString("Type","DataAreaCommand");P.putString("DataArea",g);P.putString("InstanceId",i.getQueryManager().getInstanceId());return o};e.InaPlanningModel=function(){};e.InaPlanningModel.prototype=new e.QInAComponentWithStructure;e.InaPlanningModel.prototype._ff_c="InaPlanningModel";e.InaPlanningModel.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL};e.InaPlanningModel.prototype.importComponentWithStructure=function(e,n,t,r,a){return null};e.InaPlanningModel.prototype.exportComponentWithStructure=function(e,n,t,r){return null};e.InAPlanningModelRequestCleanup=function(){};e.InAPlanningModelRequestCleanup.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestCleanup.prototype._ff_c="InAPlanningModelRequestCleanup";e.InAPlanningModelRequestCleanup.createCleanupCommand=function(){var n=e.PrFactory.createStructure();n.putString("command","cleanup");return n};e.InAPlanningModelRequestCleanup.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_CLEANUP_COMMAND};e.InAPlanningModelRequestCleanup.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;if(e.InAPlanningHelper.hasErrors(n,o,t)){return null}var s=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());var l=e.InAPlanningHelper.getResponsesList(t);if(!e.InAPlanningHelper.processResponseGetVersions(s,l,o.getPlanningModel())){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",t);return null}return r};e.InAPlanningModelRequestCleanup.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=e.InAPlanningHelper.createCommandsList(o);s.add(e.InAPlanningModelRequestCleanup.createCleanupCommand());s.add(e.InAPlanningHelper.createModelCommand(i.getPlanningModel(),"get_versions"));return o};e.InAPlanningModelRequestRefreshActions=function(){};e.InAPlanningModelRequestRefreshActions.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestRefreshActions.prototype._ff_c="InAPlanningModelRequestRefreshActions";e.InAPlanningModelRequestRefreshActions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_REFRESH_ACTIONS_COMMAND};e.InAPlanningModelRequestRefreshActions.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;if(e.InAPlanningHelper.hasErrors(n,o,t)){return null}var s=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());var l=e.InAPlanningHelper.getResponsesList(t);if(!e.InAPlanningHelper.processResponseGetActions(s,l,o.getPlanningModel())){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",t);return null}return r};e.InAPlanningModelRequestRefreshActions.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=e.InAPlanningHelper.createCommandsList(o);var l=i.getPlanningModel();s.add(e.InAPlanningHelper.createModelCommand(l,"get_actions"));s.add(e.InAPlanningHelper.createModelCommand(l,"get_action_parameters"));return o};e.InAPlanningModelRequestRefreshVersions=function(){};e.InAPlanningModelRequestRefreshVersions.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestRefreshVersions.prototype._ff_c="InAPlanningModelRequestRefreshVersions";e.InAPlanningModelRequestRefreshVersions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_REFRESH_VERSIONS_COMMAND};e.InAPlanningModelRequestRefreshVersions.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;if(e.InAPlanningHelper.hasErrors(n,o,t)){return null}var s=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());var l=e.InAPlanningHelper.getResponsesList(t);if(!e.InAPlanningHelper.processResponseGetVersions(s,l,o.getPlanningModel())){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",t);return null}return r};e.InAPlanningModelRequestRefreshVersions.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=e.InAPlanningHelper.createCommandsList(o);s.add(e.InAPlanningHelper.createModelCommand(i.getPlanningModel(),"get_versions"));return o};e.InAPlanningModelRequestUpdateVersionPrivileges=function(){};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestUpdateVersionPrivileges.prototype._ff_c="InAPlanningModelRequestUpdateVersionPrivileges";e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommands=function(n,t){var r=t.getQueryDataSources();var a=t.getVersions();for(var i=0;i<r.size();i++){var o=r.get(i).getDataSource();for(var s=0;s<a.size();s++){var l=a.get(s);e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommand(n,t,o,l)}}};e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommand=function(e,n,t,r){var a=e.addNewStructure();a.putString("command","show_version_privileges");a.putString("schema",n.getPlanningModelSchema());a.putString("model",n.getPlanningModelName());a.putString("query_source_schema",t.getSchemaName());a.putString("query_source",t.getObjectName());a.putInteger("version_id",r.getVersionId());if(r.isSharedVersion()){a.putString("owner",r.getVersionOwner())}};e.InAPlanningModelRequestUpdateVersionPrivileges.addPrivilegeCommand=function(n,t){var r=t.getPrivilegeState();if(r!==e.PlanningPrivilegeState.TO_BE_GRANTED&&r!==e.PlanningPrivilegeState.TO_BE_REVOKED){return}var a;if(r===e.PlanningPrivilegeState.TO_BE_GRANTED){a="grant_version_privilege"}else if(r===e.PlanningPrivilegeState.TO_BE_REVOKED){a="revoke_version_privilege"}else{throw e.XException.createIllegalStateException("illegal privilege command")}var i=n.addNewStructure();i.putString("command",a);var o=t.getPlanningModel();i.putString("schema",o.getPlanningModelSchema());i.putString("model",o.getPlanningModelName());var s=t.getQueryDataSource();i.putString("query_source_schema",s.getSchemaName());i.putString("query_source",s.getObjectName());i.putInteger("version_id",t.getVersionId());if(t.isSharedVersion()){i.putString("owner",t.getVersionOwner())}i.putString("privilege",t.getPrivilege().getName());i.putString("grantee",t.getGrantee())};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_UPDATE_VERSION_PRIVILEGES_COMMAND};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;if(e.InAPlanningHelper.hasErrors(n,o,t)){return null}var s=o.getPlanningModel();s.setVersionPrivilegesInitialized();var l=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());var u=e.InAPlanningHelper.getResponsesList(t);if(e.isNull(l)&&e.isNull(u)){return r}if(e.isNull(l)||e.isNull(u)||l.size()!==u.size()){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"unexpected command response",t);return null}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesServerState(s);for(var p=0;p<l.size();p++){var g=e.PrUtils.getStructureElement(l,p);var c=e.PrUtils.getStringValueProperty(g,"command",null);if(!e.XString.isEqual(c,"show_version_privileges")){continue}var P=e.PrUtils.getStructureElement(u,p);var d=e.PrUtils.getListProperty(P,"version_privileges");if(e.isNull(d)){continue}var A=e.PlanningModelResponseUpdateVersionPrivileges.getVersionDataSource(g);var m=e.PrUtils.getIntegerValueProperty(g,"version_id",-1);var I=false;var S=null;var v=e.PrUtils.getStringProperty(g,"owner");if(e.notNull(v)){I=true;S=v.getString()}var f=s.getVersionIdentifier(m,I,S);e.PlanningModelResponseUpdateVersionPrivileges.updateVersionPrivileges(s,A,f,d)}e.PlanningModelResponseUpdateVersionPrivileges.resetVersionPrivilegesClientState(s);return r};e.InAPlanningModelRequestUpdateVersionPrivileges.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=o.putNewStructure("Planning");var l=s.putNewList("commands");var u=i.getPlanningModel();if(u.isVersionPrivilegesInitialized()){var p=u.getVersionPrivileges();if(e.notNull(p)){for(var g=0;g<p.size();g++){e.InAPlanningModelRequestUpdateVersionPrivileges.addPrivilegeCommand(l,p.get(g))}}}e.InAPlanningModelRequestUpdateVersionPrivileges.addShowVersionPrivilegesCommands(l,u);return o};e.InAPlanningModelRequestVersion=function(){};e.InAPlanningModelRequestVersion.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelRequestVersion.prototype._ff_c="InAPlanningModelRequestVersion";e.InAPlanningModelRequestVersion.processResponseEndActionSequence=function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,e.PlanningModelRequestType.END_ACTION_SEQUENCE.getName());if(e.notNull(a)){r.setActionSequenceId(null)}};e.InAPlanningModelRequestVersion.processResponseKillActionSequence=function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,e.PlanningModelRequestType.KILL_ACTION_SEQUENCE.getName());if(e.notNull(a)){r.setActionSequenceId(null)}};e.InAPlanningModelRequestVersion.processResponseGetParameters=function(n,t,r){var a=e.InAPlanningHelper.getCommandResponse(n,t,"get_parameters");if(e.notNull(a)){e.InAPlanningHelper.resetVersionParameters(a,r)}};e.InAPlanningModelRequestVersion.createGetParametersCommand=function(n){var t=n.getRequestType();if(t!==e.PlanningModelRequestType.INIT_VERSION&&t!==e.PlanningModelRequestType.RESET_VERSION&&t!==e.PlanningModelRequestType.UPDATE_PARAMETERS){return null}if(!n.getPlanningModel().supportsVersionParameters()){return null}var r=n.getPlanningVersion();if(r.isSharedVersion()){return null}return e.InAPlanningModelRequestVersion.createVersionCommand(r,"get_parameters")};e.InAPlanningModelRequestVersion.createCommandsList=function(e){var n=e.putNewStructure("Planning");return n.putNewList("commands")};e.InAPlanningModelRequestVersion.createVersionCommand=function(n,t){var r=n.getPlanningModel();var a=e.PrFactory.createStructure();a.putString("command",t);a.putString("schema",r.getPlanningModelSchema());a.putString("model",r.getPlanningModelName());a.putInteger("version_id",n.getVersionId());if(n.isSharedVersion()){a.putString("owner",n.getVersionOwner())}if(e.XString.isEqual("get_version_state",t)){var i=a.putNewList("mode");i.addString("LIST_BACKUP_TIMESTAMP");i.addString("LIST_ACTION_STATE")}else if(e.XString.isEqual("get_parameters",t)){a.putString("mode","LIST_PERSISTENT")}else if(e.XString.isEqual("init",t)){var o=n.getPlanningModel().getPersistenceType();if(e.notNull(o)&&o!==e.PlanningPersistenceType.DEFAULT){a.putString("persistent_pdcs",o.getName())}}else if(e.XString.isEqual("close",t)){a.putString("mode",e.CloseModeType.BACKUP.getName())}return a};e.InAPlanningModelRequestVersion.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_COMMAND};e.InAPlanningModelRequestVersion.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;if(e.InAPlanningHelper.hasErrors(n,o,t)){return null}if(o.isInvalidatingResultSet()){o.getPlanningContext().invalidate()}var s=o.getPlanningVersion();var l=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());var u=e.InAPlanningHelper.getResponsesList(t);e.InAPlanningModelRequestVersion.processResponseEndActionSequence(l,u,s);e.InAPlanningModelRequestVersion.processResponseKillActionSequence(l,u,s);e.InAPlanningModelRequestVersion.processResponseGetParameters(l,u,s);if(!e.InAPlanningHelper.processResponseGetVersionState(l,u,s)){if(o.getRequestType()===e.PlanningModelRequestType.DROP_VERSION){s.invalidateVersion();s.updateInvalidPrivileges()}}if(!this.importInternal(o,l,u)){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",t)}return r};e.InAPlanningModelRequestVersion.prototype.importInternal=function(e,n,t){return true};e.InAPlanningModelRequestVersion.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrStructure.create();var s=e.InAPlanningModelRequestVersion.createCommandsList(o);var l=i.getRequestType();var u=i.getPlanningVersion();if(l===e.PlanningModelRequestType.RESET_VERSION){s.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.CLOSE_VERSION.getName()));s.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.INIT_VERSION.getName()))}else if(l!==e.PlanningModelRequestType.UPDATE_PARAMETERS){if(l===e.PlanningModelRequestType.CLOSE_VERSION){var p=i;if(p.getCloseMode().isWithKillActionSequence()){s.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,e.PlanningModelRequestType.KILL_ACTION_SEQUENCE.getName()))}}var g=e.InAPlanningModelRequestVersion.createVersionCommand(u,l.getName());this.addParametersToJson(i,g);s.add(g)}e.XCollectionUtils.addIfNotNull(s,e.InAPlanningModelRequestVersion.createGetParametersCommand(i));if(i.useStateUpdate()&&l!==e.PlanningModelRequestType.DROP_VERSION){s.add(e.InAPlanningModelRequestVersion.createVersionCommand(u,"get_version_state"))}return o};e.InAPlanningModelRequestVersion.prototype.addParametersToJson=function(e,n){};e.InAPlanningModelCommand=function(){};e.InAPlanningModelCommand.prototype=new e.QInAComponentWithStructure;e.InAPlanningModelCommand.prototype._ff_c="InAPlanningModelCommand";e.InAPlanningModelCommand.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_COMMAND};e.InAPlanningModelCommand.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;var s=o.getResult();e.InAHelper.importMessages(t,n);var l=e.InAPlanningHelper.getResponsesReturnCodeStrict(t,n);s.setReturnCode(l);if(n.hasErrors()||l!==0){return null}if(!this.processResponseStructureInternal(o,t)){n.addErrorExt(e.OriginLayer.DRIVER,e.ErrorCodes.PARSER_ERROR,"error in processing response structure",t);return null}return o};e.InAPlanningModelCommand.prototype.processResponseStructureInternal=function(n,t){var r=e.InAPlanningHelper.getCommandsList(n.serializeToElement(e.QModelFormat.INA_DATA).asStructure());if(e.isNull(r)){return false}var a=e.InAPlanningHelper.getResponsesList(t);if(e.isNull(a)){return false}var i=n.getPlanningContextCommandType();if(i!==e.PlanningContextCommandType.REFRESH&&i!==e.PlanningContextCommandType.RESET&&i!==e.PlanningContextCommandType.SAVE&&i!==e.PlanningContextCommandType.BACKUP&&i!==e.PlanningContextCommandType.CLOSE&&i!==e.PlanningContextCommandType.HARD_DELETE){throw e.XException.createIllegalStateException("illegal command type")}var o=n.getPlanningModel();if(i===e.PlanningContextCommandType.REFRESH||i===e.PlanningContextCommandType.HARD_DELETE){if(!this.refreshResponseStructrue(r,a,o)){if(!o.isModelInitialized()){return false}}else{o.setModelInitialized()}}if(!e.PlanningModelCommandHelper.processResponseGetVersions(r,a,o)){return false}if(i===e.PlanningContextCommandType.HARD_DELETE){var s=o.getVersions();return s.size()<=0}return true};e.InAPlanningModelCommand.prototype.refreshResponseStructrue=function(n,t,r){if(!e.InAPlanningHelper.processResponseGetQuerySources(n,t,r)){return false}if(!e.InAPlanningHelper.processResponseGetActions(n,t,r)){return false}if(!e.InAPlanningHelper.processResponseGetParametersForModelTemplate(n,t,r)){return false}return e.InAPlanningHelper.processResponseGetActionParameters(n,t,r)};e.InAPlanningModelCommand.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=i.getPlanningModel();var s=e.PrFactory.createStructure();var l=e.InAPlanningHelper.createCommandsList(s);this.fillCommandList(i,l,i.getPlanningContextCommandType());l.add(e.InAPlanningHelper.createModelCommand(o,"get_versions"));return s};e.InAPlanningModelCommand.prototype.fillCommandList=function(n,t,r){if(r===e.PlanningContextCommandType.RESET){this.addCommandPerActiveVersionToList(n,t,"close");this.addCommandPerActiveVersionToList(n,t,"init");return}if(r===e.PlanningContextCommandType.SAVE){this.addCommandPerActiveVersionToList(n,t,"save");return}if(r===e.PlanningContextCommandType.BACKUP){this.addCommandPerActiveVersionToList(n,t,"backup");return}if(r===e.PlanningContextCommandType.CLOSE){this.addCommandPerActiveVersionToList(n,t,"close");return}if(r===e.PlanningContextCommandType.REFRESH||r===e.PlanningContextCommandType.HARD_DELETE){if(r===e.PlanningContextCommandType.HARD_DELETE){t.add(e.InAPlanningHelper.createModelCommand(n.getPlanningModel(),"delete_all_versions"))}this.addRefreshCommandsToList(n,t);return}throw e.XException.createIllegalStateException("illegal command type")};e.InAPlanningModelCommand.prototype.addCommandPerActiveVersionToList=function(n,t,r){var a=n.getPlanningModel().getActiveVersions();for(var i=0;i<a.size();i++){var o=a.get(i);var s=e.InAPlanningHelper.createVersionCommand(o,r);this.addParametersToJson(n,s);t.add(s)}};e.InAPlanningModelCommand.prototype.addRefreshCommandsToList=function(n,t){var r=n.getPlanningModel();if(!r.isModelInitialized()){t.add(e.InAPlanningHelper.createModelCommand(r,"get_query_sources"));t.add(e.InAPlanningHelper.createModelCommand(r,"get_actions"));if(r.supportsVersionParameters()){t.add(e.InAPlanningHelper.createModelCommand(r,"get_parameters"))}t.add(e.InAPlanningHelper.createModelCommand(r,"get_action_parameters"))}};e.InAPlanningModelCommand.prototype.addParametersToJson=function(e,n){};e.InAPlanningAction=function(){};e.InAPlanningAction.prototype=new e.QInAComponentWithStructure;e.InAPlanningAction.prototype._ff_c="InAPlanningAction";e.InAPlanningAction.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_ACTION};e.InAPlanningAction.prototype.importComponentWithStructure=function(n,t,r,a,i){var o=r;var s=o.getResult();e.InAHelper.importMessages(t,n);var l=e.InAPlanningHelper.getResponsesReturnCodeStrict(t,n);var u=e.InAPlanningHelper.getResponsesList(t);if(e.isNull(u)){if(l===0){l=-1}}var p=e.InAPlanningHelper.getCommandsList(o.serializeToElement(e.QModelFormat.INA_DATA).asStructure());if(e.isNull(p)){if(l===0){l=-1}}var g=o.getVersion();if(!e.InAPlanningHelper.processResponseGetVersionState(p,u,g)){if(l===0){l=-1}}s.setReturnCode(l);return o};e.InAPlanningAction.prototype.exportComponentWithStructure=function(n,t,r,a){var i=t;var o=e.PrFactory.createStructure();var s=e.InAPlanningHelper.createCommandsList(o);var l=this.addCommand(i,s,"action");var u=i.getActionIdentifier();var p=u.getActionId();l.putString("action_id",p);var g=i.getSequenceIdEffective();if(e.XStringUtils.isNotNullAndNotEmpty(g)){l.putString("sequence_id",g)}if(!i.getVersion().isActionSequenceActive()){var c=i.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(c)){l.putString("description",c)}}var P=i.getActionParameters();if(e.notNull(P)){l.put("parameters",P)}else{if(i.hasVariables()){var d=i.getVariableProcessor().getVariables();var A=l.putNewStructure("parameters");for(var m=0;m<d.size();m++){var I=d.get(m);if(I.getVariableType().isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){var S=I;var v=S.getCurrentOption();A.putInteger(I.getName(),e.XInteger.convertFromStringWithDefault(v.getName(),-1))}}}}this.addCommand(i,s,"get_version_state");return o};e.InAPlanningAction.prototype.addCommand=function(n,t,r){var a=n.getVersion();var i=e.InAPlanningHelper.createVersionCommand(a,r);t.add(i);return i};e.InAPlanningModelRequestVersionClose=function(){};e.InAPlanningModelRequestVersionClose.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionClose.prototype._ff_c="InAPlanningModelRequestVersionClose";e.InAPlanningModelRequestVersionClose.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_CLOSE_COMMAND};e.InAPlanningModelRequestVersionClose.prototype.addParametersToJson=function(n,t){var r=n;var a=r.getCloseMode();if(e.notNull(a)&&!a.isOnlyClient()){t.putString("mode",a.getName())}};e.InAPlanningModelRequestVersionEndActionSequence=function(){};e.InAPlanningModelRequestVersionEndActionSequence.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionEndActionSequence.prototype._ff_c="InAPlanningModelRequestVersionEndActionSequence";e.InAPlanningModelRequestVersionEndActionSequence.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_END_ACTION_SEQUENCE_COMMAND};e.InAPlanningModelRequestVersionEndActionSequence.prototype.addParametersToJson=function(n,t){var r=n;var a=r.getSequenceId();if(e.XStringUtils.isNullOrEmpty(a)){a=r.getPlanningVersion().getActionSequenceId()}if(e.XStringUtils.isNotNullAndNotEmpty(a)){t.putString("sequence_id",a)}var i=r.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString("description",i)}};e.InAPlanningModelRequestVersionSetParameters=function(){};e.InAPlanningModelRequestVersionSetParameters.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionSetParameters.prototype._ff_c="InAPlanningModelRequestVersionSetParameters";e.InAPlanningModelRequestVersionSetParameters.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_SET_PARAMETERS_COMMAND};e.InAPlanningModelRequestVersionSetParameters.prototype.addParametersToJson=function(n,t){var r=n;var a=r.getVersionParametersStructure();if(e.PrUtils.getStructureSize(a,0)>0){t.put("parameters",a)}};e.InAPlanningModelRequestVersionSetTimeout=function(){};e.InAPlanningModelRequestVersionSetTimeout.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionSetTimeout.prototype._ff_c="InAPlanningModelRequestVersionSetTimeout";e.InAPlanningModelRequestVersionSetTimeout.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_SET_TIMEOUT_COMMAND};e.InAPlanningModelRequestVersionSetTimeout.prototype.addParametersToJson=function(e,n){var t=e;n.putInteger("timeout_value",t.getTimeout())};e.InAPlanningModelRequestVersionStartActionSequence=function(){};e.InAPlanningModelRequestVersionStartActionSequence.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionStartActionSequence.prototype._ff_c="InAPlanningModelRequestVersionStartActionSequence";e.InAPlanningModelRequestVersionStartActionSequence.processResponseStartActionSequence=function(n,t,r){var a=r.getPlanningModelRequestVersion();var i=a.getRequestType().getName();var o=e.InAPlanningHelper.getCommandResponse(n,t,i);if(e.isNull(o)){return false}var s=e.PrUtils.getStringProperty(o,"sequence_id");if(e.isNull(s)){return false}var l=s.getString();r.setSequenceId(l);var u=a.getPlanningVersion();u.setActionSequenceId(l);return true};e.InAPlanningModelRequestVersionStartActionSequence.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_START_ACTION_SEQUENCE_COMMAND};e.InAPlanningModelRequestVersionStartActionSequence.prototype.addParametersToJson=function(n,t){var r=n;var a=r.getSequenceId();if(e.XStringUtils.isNotNullAndNotEmpty(a)){t.putString("sequence_id",a)}var i=r.getDescription();if(e.XStringUtils.isNotNullAndNotEmpty(i)){t.putString("description",i)}};e.InAPlanningModelRequestVersionStartActionSequence.prototype.importInternal=function(n,t,r){var a=n;var i=a.getResult();return e.InAPlanningModelRequestVersionStartActionSequence.processResponseStartActionSequence(t,r,i)};e.InAPlanningModelRequestVersionStateDescriptions=function(){};e.InAPlanningModelRequestVersionStateDescriptions.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionStateDescriptions.prototype._ff_c="InAPlanningModelRequestVersionStateDescriptions";e.InAPlanningModelRequestVersionStateDescriptions.processResponseStateDescriptions=function(n,t,r){var a=r.getPlanningModelRequestVersion();var i=a.getRequestType().getName();var o=e.InAPlanningHelper.getCommandResponse(n,t,i);if(e.isNull(o)){return false}var s=e.PrUtils.getStructureProperty(o,"version_state_descriptions");if(e.isNull(s)){return false}var l=a.getPlanningVersion();var u=r;u.setVersionDescription(l.getVersionDescription());var p=e.PlanningVersionIdentifier.create(l.getVersionId(),l.isSharedVersion(),l.getVersionOwner());u.setVersionIdentifier(p);var g=s.getIntegerByKey("available_undo");u.setAvailableUndos(g);var c=s.getIntegerByKey("available_redo");u.setAvailableRedos(c);var P=e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescriptionList(s);u.setVersionStateDescriptions(P);return true};e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescriptionList=function(n){var t=e.PrUtils.getListProperty(n,"states");if(e.isNull(t)){return null}var r=e.XList.create();for(var a=0;a<t.size();a++){var i=e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescription(t.getStructureAt(a));if(e.isNull(i)){continue}r.add(i)}return r};e.InAPlanningModelRequestVersionStateDescriptions.getVersionStateDescription=function(n){var t=n.getStringByKey("id");if(e.XStringUtils.isNullOrEmpty(t)){return null}var r=e.PrUtils.getIntegerProperty(n,"changes");if(e.isNull(r)){return null}var a=e.PrUtils.getDateTimeProperty(n,"start_time",false,null);if(e.isNull(a)){return null}var i=e.PrUtils.getDateTimeProperty(n,"end_time",false,null);if(e.isNull(i)){return null}var o=n.getStringByKey("description");var s=n.getStringByKey("user_name");return e.PlanningVersionStateDescription.create(t,o,s,a,i,r.getInteger())};e.InAPlanningModelRequestVersionStateDescriptions.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_STATE_DESCRIPTIONS_COMMAND};e.InAPlanningModelRequestVersionStateDescriptions.prototype.addParametersToJson=function(e,n){var t=e;var r=t.getStartIndex();if(r!==0){n.putInteger("start",r);var a=t.getCount();if(a!==0){n.putInteger("count",a)}}};e.InAPlanningModelRequestVersionStateDescriptions.prototype.importInternal=function(n,t,r){var a=n;var i=a.getResult();return e.InAPlanningModelRequestVersionStateDescriptions.processResponseStateDescriptions(t,r,i)};e.InAPlanningModelRequestVersionUndoRedo=function(){};e.InAPlanningModelRequestVersionUndoRedo.prototype=new e.InAPlanningModelRequestVersion;e.InAPlanningModelRequestVersionUndoRedo.prototype._ff_c="InAPlanningModelRequestVersionUndoRedo";e.InAPlanningModelRequestVersionUndoRedo.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_UNDO_REDO_COMMAND};e.InAPlanningModelRequestVersionUndoRedo.prototype.addParametersToJson=function(e,n){var t=e;var r=t.getSteps();if(r>0){n.putInteger("num_undo_redo_steps",r)}};e.InAPlanningModelCloseCommand=function(){};e.InAPlanningModelCloseCommand.prototype=new e.InAPlanningModelCommand;e.InAPlanningModelCloseCommand.prototype._ff_c="InAPlanningModelCloseCommand";e.InAPlanningModelCloseCommand.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_MODEL_CLOSE_COMMAND};e.InAPlanningModelCloseCommand.prototype.addParametersToJson=function(n,t){var r=n;var a=r.getCloseMode();if(e.isNull(a)){a=e.CloseModeType.BACKUP}t.putString("mode",a.getName())};e.InAPlanningVarProvider=function(){};e.InAPlanningVarProvider.prototype=new e.DfOlapEnvContext;e.InAPlanningVarProvider.prototype._ff_c="InAPlanningVarProvider";e.InAPlanningVarProvider.prototype.m_connection=null;e.InAPlanningVarProvider.prototype.m_activeMainCapabilities=null;e.InAPlanningVarProvider.prototype.m_importVariables=null;e.InAPlanningVarProvider.prototype.m_export=null;e.InAPlanningVarProvider.prototype.m_isVariableSubmitNeeded=false;e.InAPlanningVarProvider.prototype.m_supportsReInitVariables=false;e.InAPlanningVarProvider.prototype.m_directVariableTransfer=false;e.InAPlanningVarProvider.prototype.m_supportsCheckVariables=false;e.InAPlanningVarProvider.prototype.m_supportsVariableMasking=false;e.InAPlanningVarProvider.prototype.setupVariablesProvider=function(n,t,r){this.setupOlapApplicationContext(n.getOlapEnvironment());this.m_connection=t;this.m_activeMainCapabilities=r;var a=e.QCapabilities.create();e.InACapabilitiesProvider.importCapabilities(r,a);this.m_export=e.QInAExportFactory.createForData(n,a);this.m_importVariables=e.QInAImportFactory.createForMetadata(n,a);this.m_isVariableSubmitNeeded=true;this.m_supportsCheckVariables=true;this.m_supportsReInitVariables=a.supportsReInitVariables();this.m_supportsVariableMasking=a.supportsVariableMasking()};e.InAPlanningVarProvider.prototype.releaseObject=function(){this.m_connection=null;this.m_activeMainCapabilities=null;this.m_export=e.XObjectExt.release(this.m_export);this.m_importVariables=e.XObjectExt.release(this.m_importVariables);e.DfOlapEnvContext.prototype.releaseObject.call(this)};e.InAPlanningVarProvider.prototype.getConnection=function(){return this.m_connection};e.InAPlanningVarProvider.prototype.getSystemDescription=function(){return this.m_connection.getSystemDescription()};e.InAPlanningVarProvider.prototype.getSystemName=function(){var n=this.getSystemDescription();if(e.isNull(n)){return null}return n.getSystemName()};e.InAPlanningVarProvider.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType()};e.InAPlanningVarProvider.prototype.getRequestPath=function(){var n=this.m_activeMainCapabilities.getByKey(e.InACapabilities.C032_FAST_PATH);if(e.notNull(n)&&n.getValue()!==null){return n.getValue()}var t=this.m_connection.getSystemDescription();return t.getSystemType().getInAPath()};e.InAPlanningVarProvider.prototype.createFunction=function(){var n=this.getRequestPath();var t=this.m_connection.newRpcFunction(n);var r=t.getRpcRequest();r.setMethod(e.HttpRequestMethod.HTTP_POST);return t};e.InAPlanningVarProvider.prototype.getVariablesExporter=function(){return this.m_export};e.InAPlanningVarProvider.prototype.getVariablesImporter=function(){return this.m_importVariables};e.InAPlanningVarProvider.prototype.isVariableValuesRuntimeNeeded=function(){return false};e.InAPlanningVarProvider.prototype.isVariableSubmitNeeded=function(){return this.m_isVariableSubmitNeeded};e.InAPlanningVarProvider.prototype.setIsVariableSubmitNeeded=function(e){this.m_isVariableSubmitNeeded=e};e.InAPlanningVarProvider.prototype.supportsReInitVariables=function(){return this.m_supportsReInitVariables};e.InAPlanningVarProvider.prototype.supportsVariableMasking=function(){return this.m_supportsVariableMasking};e.InAPlanningVarProvider.prototype.processRetrieveVariableRuntimeInformation=e.noSupport;e.InAPlanningVarProvider.prototype.processSetGetVariableValues=e.noSupport;e.InAPlanningVarProvider.prototype.processVariableSubmit=e.noSupport;e.InAPlanningVarProvider.prototype.processReInitVariableAfterSubmit=e.noSupport;e.InAPlanningVarProvider.prototype.processVariableCancel=e.noSupport;e.InAPlanningVarProvider.prototype.importVariables=e.noSupport;e.InAPlanningVarProvider.prototype.exportVariables=e.noSupport;e.InAPlanningVarProvider.prototype.setDirectVariableTransfer=function(e){this.m_directVariableTransfer=e};e.InAPlanningVarProvider.prototype.isDirectVariableTransfer=function(){return this.m_directVariableTransfer};e.InAPlanningVarProvider.prototype.supportsCheckVariables=function(){return this.m_supportsCheckVariables&&this.isDirectVariableTransfer()};e.InAPlanningVarProvider.prototype.processCheckVariables=e.noSupport;e.InAPlanningVarProvider.prototype.supportsDirectVariableTransfer=e.noSupport;e.InAPlanningVarProvider.prototype.processActivateVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processDeleteVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processUpdateVariableVariantValues=e.noSupport;e.InAPlanningVarProvider.prototype.processSaveVariableVariant=e.noSupport;e.InAPlanningVarProvider.prototype.processEmptyVariableDefinition=e.noSupport;e.InAPlanningVarProvider.prototype.processUpdateDynamicVariables=e.noSupport;e.InAPlanningVarProvider.prototype.processResetExitOrDynamicVariable=e.noSupport;e.InAPlanningModelRequestVersionInit=function(){};e.InAPlanningModelRequestVersionInit.prototype=new e.InAPlanningModelRequestVersionSetParameters;e.InAPlanningModelRequestVersionInit.prototype._ff_c="InAPlanningModelRequestVersionInit";e.InAPlanningModelRequestVersionInit.prototype.getComponentType=function(){return e.OlapComponentType.PLANNING_VERSION_INIT_COMMAND};e.InAPlanningModelRequestVersionInit.prototype.addParametersToJson=function(n,t){e.InAPlanningModelRequestVersionSetParameters.prototype.addParametersToJson.call(this,n,t);var r=n;var a=r.getPlanningVersion().getVersionDescription();if(e.XStringUtils.isNotNullAndNotEmpty(a)){t.putString("description",a)}var i=r.getRestoreBackupType();if(e.notNull(i)){if(e.RestoreBackupType.RESTORE_TRUE===i){t.putBoolean("restore_backup",true)}else if(e.RestoreBackupType.RESTORE_FALSE===i){t.putBoolean("restore_backup",false)}}};e.InAPlanningVarProcessorProvider=function(){};e.InAPlanningVarProcessorProvider.prototype=new e.InAPlanningVarProvider;e.InAPlanningVarProcessorProvider.prototype._ff_c="InAPlanningVarProcessorProvider";e.InAPlanningVarProcessorProvider.createInAVariableProcessorProvider=function(n,t,r){var a=new e.InAPlanningVarProcessorProvider;a.setupInAVariableProcessorProvider(n,t,r);return a};e.InAPlanningVarProcessorProvider.prototype.m_processor=null;e.InAPlanningVarProcessorProvider.prototype.m_requestorProvider=null;e.InAPlanningVarProcessorProvider.prototype.m_variableRequestorBase=null;e.InAPlanningVarProcessorProvider.prototype.setupInAVariableProcessorProvider=function(n,t,r){var a=t.getApplication();var i=t.getSystemName();var o=a.getConnection(i);var s=a.getSystemConnect(i).getServerMetadata();var l=s.getMetadataForService(e.ServerService.ANALYTIC);this.setupVariablesProvider(a,o,l);this.m_requestorProvider=r;this.m_variableRequestorBase=t;var u=this.getOlapEnv().getContext();this.m_processor=e.QVariableProcessor.createVariableProcessor(u,n,this,this.m_variableRequestorBase);this.m_variableRequestorBase.setVariableProcessorBase(this.m_processor)};e.InAPlanningVarProcessorProvider.prototype.releaseObject=function(){this.m_processor=e.XObjectExt.release(this.m_processor);this.m_requestorProvider=null;this.m_variableRequestorBase=null;e.InAPlanningVarProvider.prototype.releaseObject.call(this)};e.InAPlanningVarProcessorProvider.prototype.importVariables=function(n,t){var r=e.PrFactory.createStructure();r.put("Variables",n);this.m_importVariables.importVariables(r,t)};e.InAPlanningVarProcessorProvider.prototype.exportVariables=function(e,n){var t=this.m_export.exportVariableList(e);n.putNotNullAndNotEmpty("Variables",t)};e.InAPlanningVarProcessorProvider.prototype.processRetrieveVariableRuntimeInformation=function(n,t,r){return e.InAPlanningVarGetRuntimeInfoAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.processSetGetVariableValues=function(n,t,r){return e.InAPlanningVarSetGetValuesAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.processVariableSubmit=function(n,t,r){return e.InAPlanningVarSubmitAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.processReInitVariableAfterSubmit=function(n,t,r){return e.InAPlanningVarReInitAfterSubmitAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.processVariableCancel=function(n,t,r){return e.InAPlanningVarCancelAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.processCheckVariables=function(n,t,r){return e.InAPlanningVarCheckVariablesAction.createAndRun(this,n,t,r)};e.InAPlanningVarProcessorProvider.prototype.getRequestorProvider=function(){return this.m_requestorProvider};e.InAPlanningVarProcessorProvider.prototype.getVariableProcessor=function(){return this.m_processor};e.InAPlanningVarProcessorProvider.prototype.getContext=function(){return null};e.InAPlanningVarProcessorProvider.prototype.supportsMaintainsVariableVariants=function(){return this.m_processor.supportsMaintainsVariableVariants()};e.InAPlanningVarAction=function(){};e.InAPlanningVarAction.prototype=new e.QOlapSyncAction;e.InAPlanningVarAction.prototype._ff_c="InAPlanningVarAction";e.InAPlanningVarAction.prototype.doStrictVariableProcessing=function(){var n=this.getActionContext();if(e.isNull(n)){return false}var t=n.getApplication();return e.notNull(t)};e.InAPlanningVarAction.prototype.getProcessor=function(){return this.getActionContext().getVariableProcessor()};e.InAPlanningVarAction.prototype.checkDirectValueTransfer=function(){if(!this.doStrictVariableProcessing()){return}var n=this.getActionContext().getVariableProcessor();if(e.isNull(n)){return}if(n.isDirectVariableTransferEnabled()){throw e.XException.createIllegalStateException("stateful variable handling cannot be mixed with direct variable transfer")}};e.InAPlanningVarAction.prototype.callListener=function(e,n,t,r){n.onVariableProcessorExecuted(e,t,r)};e.InAPlanningVarAction.prototype.createFunction=function(){return this.getActionContext().createFunction()};e.InAPlanningVarAction.prototype.setVariablesStructure=function(n){if(e.notNull(n)){var t=e.PrFactory.createStructureDeepCopy(n);var r=this.getActionContext();e.PlanningState.update(r.getApplication(),r.getSystemName(),t,this);if(!e.InAHelper.importMessages(t,this)){var a=t.getStructureByKey("Cube");if(e.isNull(a)){var i=t.toString();this.addError(e.ErrorCodes.PARSER_ERROR,i);return false}var o=this.getImporter();var s=this.getProcessor();o.importVariables(a,s.getVariableContainerBase());return true}}return false};e.InAPlanningVarAction.prototype.setStructure=function(n){if(e.notNull(n)){var t=e.PrFactory.createStructureDeepCopy(n);var r=this.getActionContext();e.PlanningState.update(r.getApplication(),r.getSystemName(),t,this);return!e.InAHelper.importMessages(t,this)}return false};e.InAPlanningVarAction.prototype.getImporter=function(){return this.getActionContext().getVariablesImporter()};e.InAPlanningVarAction.prototype.getExporter=function(){return this.getActionContext().getVariablesExporter()};e.InAPlanningVarAction.prototype.isSuccessfullyProcessed=function(){return this.isValid()};e.InAPlanningVarAction.prototype.getRequestorProvider=function(){return this.getActionContext().getRequestorProvider()};e.InAPlanningVarCancelAction=function(){};e.InAPlanningVarCancelAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarCancelAction.prototype._ff_c="InAPlanningVarCancelAction";e.InAPlanningVarCancelAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarCancelAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarCancelAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarCancelAction.prototype.onFunctionExecuted=function(n,t,r){this.addAllMessages(n);if(n.isValid()&&e.notNull(t)){this.getQueryManagerBase().setVariableProcessorState(e.VariableProcessorState.SUBMITTED)}this.setData(this);this.endSync()};e.InAPlanningVarCheckVariablesAction=function(){};e.InAPlanningVarCheckVariablesAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarCheckVariablesAction.prototype._ff_c="InAPlanningVarCheckVariablesAction";e.InAPlanningVarCheckVariablesAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarCheckVariablesAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarCheckVariablesAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarCheckVariablesAction.prototype.onFunctionExecuted=function(n,t,r){this.addAllMessages(n);if(n.isValid()&&e.notNull(t)){var a=t.getRootElement();this.setStructure(a)}this.setData(this);this.endSync()};e.InAPlanningVarGetRuntimeInfoAction=function(){};e.InAPlanningVarGetRuntimeInfoAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarGetRuntimeInfoAction.prototype._ff_c="InAPlanningVarGetRuntimeInfoAction";e.InAPlanningVarGetRuntimeInfoAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarGetRuntimeInfoAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarGetRuntimeInfoAction.prototype.processSynchronization=function(n){this.checkDirectValueTransfer();var t=this.createFunction();var r=e.PrFactory.createStructure();var a=this.getRequestorProvider();a.fillVariableRequestorDataRequestContext(r,false,"VariableDefinition");this.getProcessor().setVariableProcessorState(e.VariableProcessorState.PROCESSING_UPDATE_VALUES);t.getRpcRequest().setRequestStructure(r);t.processFunctionExecution(n,this,null);return true};e.InAPlanningVarGetRuntimeInfoAction.prototype.onFunctionExecuted=function(n,t,r){this.addAllMessages(n);if(n.isValid()&&e.notNull(t)){var a=t.getRootElement();var i=this.setVariablesStructure(a);if(i){this.getProcessor().setVariableProcessorState(e.VariableProcessorState.CHANGEABLE_REINIT)}else{this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.InAPlanningVarReInitAfterSubmitAction=function(){};e.InAPlanningVarReInitAfterSubmitAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarReInitAfterSubmitAction.prototype._ff_c="InAPlanningVarReInitAfterSubmitAction";e.InAPlanningVarReInitAfterSubmitAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarReInitAfterSubmitAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarReInitAfterSubmitAction.prototype.processSynchronization=function(e){return false};e.InAPlanningVarReInitAfterSubmitAction.prototype.onVariableProcessorExecuted=function(e,n,t){this.addAllMessages(e);this.setData(this);this.endSync()};e.InAPlanningVarSetGetValuesAction=function(){};e.InAPlanningVarSetGetValuesAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarSetGetValuesAction.prototype._ff_c="InAPlanningVarSetGetValuesAction";e.InAPlanningVarSetGetValuesAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarSetGetValuesAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarSetGetValuesAction.prototype.processSynchronization=function(n){var t=this.getRequestorProvider().getPlanningContext().getPlanningService();if(t.supportsPlanningValueHelp()){this.checkDirectValueTransfer();var r=this.createFunction();var a=e.PrFactory.createStructure();var i=this.getRequestorProvider();i.fillVariableRequestorDataRequestContext(a,true,"VariableDefinition");r.getRpcRequest().setRequestStructure(a);r.processFunctionExecution(n,this,null);return true}return false};e.InAPlanningVarSetGetValuesAction.prototype.onFunctionExecuted=function(n,t,r){this.addAllMessages(n);if(n.isValid()&&e.notNull(t)){var a=t.getRootElement();if(!this.setVariablesStructure(a)){this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.InAPlanningVarSubmitAction=function(){};e.InAPlanningVarSubmitAction.prototype=new e.InAPlanningVarAction;e.InAPlanningVarSubmitAction.prototype._ff_c="InAPlanningVarSubmitAction";e.InAPlanningVarSubmitAction.createAndRun=function(n,t,r,a){var i=new e.InAPlanningVarSubmitAction;i.setupActionAndRun(t,r,a,n);return i};e.InAPlanningVarSubmitAction.prototype.processSynchronization=function(n){this.checkDirectValueTransfer();if(!this.getActionContext().isVariableSubmitNeeded()){this.setData(this);return false}var t=this.createFunction();var r=e.PrFactory.createStructure();var a=this.getRequestorProvider();var i=a.fillVariableRequestorDataRequestContext(r,false,"VariableSubmit");this.getExporter().exportVariables(this.getProcessor().getVariableContainer(),i);t.getRpcRequest().setRequestStructure(r);t.processFunctionExecution(n,this,null);return true};e.InAPlanningVarSubmitAction.prototype.onFunctionExecuted=function(n,t,r){this.addAllMessages(n);if(n.isValid()&&e.notNull(t)){var a=t.getRootElement();var i=this.setStructure(a);this.getProcessor().setVariableProcessorState(e.VariableProcessorState.SUBMITTED);if(!i){this.addError(e.ErrorCodes.OTHER_ERROR,"Error when setting variable structure")}}this.setData(this);this.endSync()};e.IpProviderModule=function(){};e.IpProviderModule.prototype=new e.DfModule;e.IpProviderModule.prototype._ff_c="IpProviderModule";e.IpProviderModule.s_module=null;e.IpProviderModule.getInstance=function(){if(e.isNull(e.IpProviderModule.s_module)){e.DfModule.checkInitialized(e.IpImplModule.getInstance());e.DfModule.checkInitialized(e.ProviderModule.getInstance());e.IpProviderModule.s_module=e.DfModule.startExt(new e.IpProviderModule);e.QInA.staticSetupForPlanning();e.InAPlanningCapabilitiesProviderFactory.staticSetup();e.PlanningVariableProcessorProviderFactory.staticSetup();e.PlanningStateHandler.setInstance(new e.PlanningStateHandlerImpl);e.InAPlanningHelperTmp.staticSetup();e.IpProviderModule.addAllComponents();e.QInA.removeEmptyContainers();e.DfModule.stopExt(e.IpProviderModule.s_module)}return e.IpProviderModule.s_module};e.IpProviderModule.addAllComponents=function(){e.QInA.addInAComponent(new e.InAPlanningAction);e.QInA.addInAComponent(new e.InAPlanningModelCommand);e.QInA.addInAComponent(new e.InAPlanningModelCloseCommand);e.QInA.addInAComponent(new e.InAPlanningModelRequestCleanup);e.QInA.addInAComponent(new e.InAPlanningModelRequestRefreshActions);e.QInA.addInAComponent(new e.InAPlanningModelRequestRefreshVersions);e.QInA.addInAComponent(new e.InAPlanningModelRequestUpdateVersionPrivileges);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersion);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionClose);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionEndActionSequence);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionInit);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionSetParameters);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionSetTimeout);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionStartActionSequence);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionStateDescriptions);e.QInA.addInAComponent(new e.InAPlanningModelRequestVersionUndoRedo);e.QInA.addInAComponent(new e.InADataAreaCommand);e.QInA.addInAComponent(new e.InADataAreaCommandClose);e.QInA.addInAComponent(new e.InADataAreaRequestGetPlanningFunctionMetadata);e.QInA.addInAComponent(new e.InADataAreaRequestGetPlanningSequenceMetadata);e.QInA.addInAComponent(new e.InALightweightDataAreaCommand)};e.IpProviderModule.prototype.getName=function(){return"ff4410.olap.ip.providers"};e.IpProviderModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff4410.olap.ip.providers.js.map