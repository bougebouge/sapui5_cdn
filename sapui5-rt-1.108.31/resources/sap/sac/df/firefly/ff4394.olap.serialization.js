/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4310.olap.impl"],function(e){"use strict";e.QInAComponent=function(){};e.QInAComponent.prototype=new e.XObject;e.QInAComponent.prototype._ff_c="QInAComponent";e.QInAComponent.prototype.getModelFormat=function(){return null};e.QInAComponent.prototype.isMatching=function(e){return true};e.QInAComponent.prototype.getName=function(){return this.getComponentType().getName()};e.QInAComponent.prototype.getTagName=function(){return null};e.QInAComponent.prototype.toString=function(){return this.getName()};e.QInAExportUtil={extendStructure:function(t,r,n){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var i=r.getTagging();if(e.XCollectionUtils.hasElements(i)){var o=i.getKeysAsReadOnlyListOfString();var a=n.putNewList("ComponentTags");for(var l=0;l<o.size();l++){var p=o.get(l);var s=i.getByKey(p);var u=e.PrFactory.createStructure();a.add(u);u.putString("KEY",p);if(e.isNull(s)){u.putNull("VALUE")}else{u.putString("VALUE",s)}}}}return n},extendList:function(e,t){return t},setDate:function(t,r,n,i){if(e.notNull(i)){r.putString(n,e.QInAExportUtil.dateTimeToString(t,i))}},isNumberSafe:function(t){return e.XMath.abs(t)<9007199254740992},setNonEmptyString:function(t,r,n){if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.putString(r,n)}},setNameIfNotNull:function(t,r,n){if(e.notNull(n)){t.putString(r,n.getName())}},setIntegerIfNotNull:function(t,r,n){if(e.notNull(n)){t.putInteger(r,n.getInteger())}},dateTimeToString:function(e,t){return e.capabilities.supportsSapDate()?t.toSAPFormat():t.toIsoFormat()},getAccountDimensionMemberNameByAlias:function(t,r,n){if((n.getMode().isTypeOf(e.QModelFormat.INA_DATA)||n.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){var i=t.getConvenienceCommands().getAccountDimensionMemberNameByAlias(t,r);if(e.notNull(i)){return i}}return r},getMeasureMemberNameByAlias:function(t,r,n){var i=r;if((n.getMode().isTypeOf(e.QModelFormat.INA_DATA)||n.mode.isTypeOf(e.QModelFormat.INA_VALUE_HELP))&&e.notNull(t)){var o=t.getQueryManager();if(o.getMode()===e.QueryManagerMode.BLENDING){var a=o.getQueryModel().getBlendingSources();for(var l=0;l<a.size();l++){var p=a.get(l);var s=e.XStringUtils.concatenate2(p.getQueryAliasName(),".");if(e.XString.startsWith(r,s)){var u=e.XString.replace(r,s,"");var g=p.getQueryModel();var y=e.QInAExportUtil.getMeasureMemberNameByAlias(g,u,n);if(e.notNull(y)){if(e.XString.containsString(r,s)){y=e.XStringUtils.concatenate2(s,y)}return y}}}}else{var m=t.getConvenienceCommands().getMeasureMemberNameByAlias(t,r);if(e.notNull(m)){i=m}if(n.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&t.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.notNull(i)){var c=t.getAccountDimension();var A;var S;var d;if(e.XString.startsWith(i,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX)){A=e.XStringUtils.concatenate3("[",c.getName(),"].[");S=c.getHierarchyName()!==null?c.getHierarchyName():c.getDefaultHierarchyName();d=e.XStringUtils.concatenate3(A,S,"].&[");i=e.XStringUtils.concatenate3(d,i,"]")}}}}return i},isFormulaCalculatedDimensionHidden:function(t){if(e.notNull(t)&&t.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)){var r=t;return r.isHidden()}return false},exportComponentExtensions:function(t,r,n){if(e.isNull(r)||!r.isStructure()||e.isNull(n)||!n.canHaveExtensions()){return}var i=r;var o=n;var a=o.getExtensions();if(!a.hasElements()){return}var l=i.putNewStructure("Extensions");var p=a.getKeysAsIteratorOfString();while(p.hasNext()){var s=p.next();var u=a.getByKey(s);l.putString(s,u)}}};e.QInAImportUtil={importComponentTagging:function(t,r,n){if(e.notNull(r)){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&r.isStructure()&&e.notNull(n)){var i=r;var o=i.getListByKey("ComponentTags");if(!e.PrUtils.isListEmpty(o)){var a=n.getTagging();for(var l=0;l<o.size();l++){var p=o.getStructureAt(l);if(e.notNull(p)){var s=p.getStringByKey("KEY");if(e.XStringUtils.isNotNullAndNotEmpty(s)){a.put(s,p.getStringByKey("VALUE"))}}}}}}},importComponentExtensions:function(t,r,n){if(e.isNull(r)||!r.isStructure()||e.isNull(n)||!n.canHaveExtensions()||!t.getMode().isTypeOf(e.QModelFormat.INA_METADATA_CORE)){return}var i=r;var o=i.getStructureByKey("Extensions");if(!e.XCollectionUtils.hasElements(o)){return}var a=e.XHashMapOfStringByString.create();var l=o.getKeysAsReadOnlyListOfString();for(var p=0;p<l.size();p++){var s=l.get(p);var u=o.getStringByKey(s);if(e.isNull(u)){continue}a.put(s,u)}n.setExtensions(a)}};e.QInAValueUtils={importValueByType:function(t,r,n,i){return e.QInAValueUtils._importValueInternal(t,null,r,n,i,null,true)},importSupplementsAndValue:function(t,r,n,i,o,a){e.QInAValueUtils.importValue(t,r,n,i,o,a);var l=n.getListByKey("Supplements");if(e.notNull(l)&&l.hasElements()){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getByKey("Key");var y=u.getByKey("Value");var m=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());var c=e.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(y.getString());r.addSupplementValue(m,c)}}},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},correctRemovingUnwantedBackslashAndQuotes:function(t){var r=t;while(e.QInAValueUtils.containsEscapedQuote(r)){r=e.XStringUtils.stripChars(r,1)}return r},importValue:function(t,r,n,i,o,a){e.QInAValueUtils._importValueInternal(t,r,n,i,o,a,false)},getDouble:function(t,r){var n;var i=t.getByKey(r);if(i.isString()){var o=i.getString();n=e.XDouble.convertFromString(o)}else if(i.isDouble()){n=i.getDouble()}else if(i.isInteger()){n=i.getInteger()}else{n=0}return n},_importValueInternal:function(t,r,n,i,o,a,l){var p=t.capabilities.supportsSapDate();var s=e.PrUtils.getBooleanValueProperty(n,"FieldLiteralValue",false);var u=i;if(e.isNull(u)){u="Value"}var g=o;if(e.isNull(g)){var y=n.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));g=e.QInAConverter.lookupValueType(y);p=false}if((g===e.XValueType.DOUBLE||g===e.XValueType.DECIMAL_FLOAT)&&n.hasStringByKey(u)){g=e.XValueType.STRING}var m;var c;if(g===e.XValueType.STRING){c=n.getStringByKey(u);if(l){return e.XStringValue.create(c)}if(e.isNull(a)||!s){r.setString(c)}else{var A=a.getDimension();var S=A.getDimensionMember(c);if(A.isStructure()&&e.notNull(S)){r.setDimensionMember(S)}else{m=a.createFieldLiteralValue();m.setString(c);r.setFieldValue(m)}}}else if(g===e.XValueType.DOUBLE||g===e.XValueType.DECIMAL_FLOAT){var d=e.QInAValueUtils.getDouble(n,u);if(l){return e.XDoubleValue.create(d)}if(e.isNull(a)||!s){r.setDouble(d)}else{m=a.createFieldLiteralValue();m.setDouble(d);r.setFieldValue(m)}}else if(g===e.XValueType.INTEGER){var I=n.getIntegerByKey(u);if(l){return e.XIntegerValue.create(I)}if(e.isNull(a)||!s){r.setInteger(I)}else{m=a.createFieldLiteralValue();m.setInteger(I);r.setFieldValue(m)}}else if(g===e.XValueType.BOOLEAN){var f=n.getBooleanByKey(u);if(l){return e.XBooleanValue.create(f)}r.setBoolean(f)}else if(g===e.XValueType.LONG){var N=e.PrUtils.getLongValueProperty(n,u,0);if(l){return e.XLongValue.create(N)}if(e.isNull(a)||!s){r.setLong(N)}else{m=a.createFieldLiteralValue();m.setLong(N);r.setFieldValue(m)}}else if(g===e.XValueType.DATE){c=n.getStringByKey(u);var v=e.XDate.createDateFromStringWithFlag(c,p);if(l){return v}if(e.isNull(a)||!s){r.setDate(v)}else{m=a.createFieldLiteralValue();m.setDate(v);r.setFieldValue(m)}}else if(g===e.XValueType.TIME){c=n.getStringByKey(u);var T=e.XTime.createTimeFromStringWithFlag(c,p);if(l){return T}r.setTime(T)}else if(g===e.XValueType.DATE_TIME){c=n.getStringByKey(u);var R=e.XDateTime.createDateTimeFromStringWithFlag(c,p);if(l){return R}if(e.isNull(a)||!s){r.setDateTime(R)}else{m=a.createFieldLiteralValue();m.setDate(R);r.setFieldValue(m)}}else if(g.isSpatial()){c=n.getStringByKey(u);var E=e.XGeometryValue.createGeometryValueWithWkt(c);if(l){return E}r.setValue(E);if(t.capabilities.supportsSpatialFilterSrid()&&n.containsKey("SRID")){r.getGeometry().setSrid(e.XIntegerValue.create(n.getIntegerByKey("SRID")))}}else if(g===e.XValueType.UNSUPPORTED){return null}else if(g===e.XValueType.VARIABLE||g===e.XValueType.CURRENT_MEMBER){if(!l){r.setFilterValueType(g)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",g.getName(),"'"));return null}return null},exportValue:function(t,r,n,i,o,a){e.QInAValueUtils.exportFieldValue(t,r,n,null,i,o)},exportPlaceholderValue:function(t,r,n,i,o,a){var l=i;if(o===e.XValueType.STRING||i.getValueType()===e.XValueType.STRING){var p=e.QInAExportUtil.getMeasureMemberNameByAlias(a,i.getString(),t);if(!e.XString.isEqual(p,i.getString())){var s=e.XValueAccess.createWithType(e.XValueType.STRING);s.setString(p);l=s}}e.QInAValueUtils.exportFieldValue(t,r,n,null,l,o)},exportFieldValue:function(t,r,n,i,o,a){var l=r;if(e.isNull(l)){l="Value"}var p=a;if(e.isNull(p)){p=o.getValueType();var s=e.QInAConverter.lookupValueTypeInA(p);n.putString(e.XStringUtils.concatenate2(l,"Type"),s);t.capabilities.setSupportsSapDate(false)}var u=o.getValueType();if(u===e.XValueType.DATE||u===e.XValueType.TIME||u===e.XValueType.DATE_TIME){p=u}if(p===e.XValueType.STRING){n.putString(l,o.getString())}else if(p===e.XValueType.INTEGER){n.putInteger(l,o.getInteger())}else if(p===e.XValueType.LONG){n.putLong(l,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){if(o.getValueType()===e.XValueType.STRING||t.capabilities.supportsStringsForNumericValues()){n.putString(l,o.getString())}else{n.putDouble(l,o.getDouble())}}else if(p===e.XValueType.BOOLEAN){n.putBoolean(l,o.getBoolean())}else if(p===e.XValueType.DATE){var g=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE);if(e.notNull(g)){e.QInAExportUtil.setDate(t,n,l,g)}else{n.putStringNotNull(l,o.getString())}}else if(p===e.XValueType.TIME){var y=e.XValueUtil.convertValue(o.getValue(),e.XValueType.TIME);if(e.notNull(y)){e.QInAExportUtil.setDate(t,n,l,y)}else{n.putStringNotNull(l,o.getString())}}else if(p===e.XValueType.DATE_TIME){var m=e.XValueUtil.convertValue(o.getValue(),e.XValueType.DATE_TIME);if(e.notNull(m)){e.QInAExportUtil.setDate(t,n,l,m)}else{n.putStringNotNull(l,o.getString())}}if(e.notNull(p)&&p.isSpatial()){var c=o.getGeometry();n.putString(l,c.toWKT());var A=c.getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(A)){n.putInteger("SRID",A.getInteger())}}if(e.notNull(i)){n.putBoolean("FieldLiteralValue",true)}},exportSupplementsAndValue:function(t,r,n,i,o,a){e.QInAValueUtils.exportFieldValue(t,r,n,i,o,a);var l=o.getSupplementValues();if(e.XCollectionUtils.hasElements(l)){var p=n.putNewList("Supplements");var s=l.size();for(var u=0;u<s;u++){var g=p.addNewStructure();var y=l.get(u);g.putString("Key",y.getKey().toString());g.putString("Value",y.getValue().toString())}}},exportFilterValue:function(t,r,n,i,o){if(o===e.XValueType.VARIABLE){var a=i.getVariableValue();if(e.notNull(a)){n.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){n.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,r,n,i,o,i.getQueryModel())}},importSupplements:function(t,r,n,i,o){if(t.capabilities.supportsSupplements()&&e.notNull(i)&&e.XCollectionUtils.hasElements(o)){var a=n.getListByKey(i);if(e.notNull(a)){var l=a.size();var p=o.size();if(l===p){for(var s=0;s<l;s++){r.addSupplementValue(o.get(s),a.getStringAt(s))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},importValueCompounds:function(t,r,n,i){if(e.notNull(i)){var o=n.getListByKey(i);if(e.notNull(o)){for(var a=0;a<o.size();a++){var l=o.getStructureAt(a);var p=r.addNewFilterValueCompound(l.getBooleanByKey("Internal"));var s=l.getListByKey("Members");if(e.notNull(s)){for(var u=0;u<s.size();u++){var g=s.getStructureAt(u);p.addMember(g.getStringByKey("Component"),g.getStringByKey("Key"))}}}}}},importValueList:function(t,r,n){if(e.notNull(r)){if(n.isNumber()){return e.QInAValueUtils.importNumericValues(t,r,n)}if(n.isString()){return e.QInAValueUtils.importStringValues(r)}if(n===e.XValueType.DATE){return e.QInAValueUtils.importDateValues(t,r)}if(n===e.XValueType.TIME){return e.QInAValueUtils.importTimeValues(t,r)}if(n===e.XValueType.DATE_TIME){return e.QInAValueUtils.importDateTimeValues(t,r)}if(n===e.XValueType.BOOLEAN){return e.QInAValueUtils.importBooleanValues(r)}}return e.XList.create()},importNumericValues:function(t,r,n){var i=e.XList.create();for(var o=0;o<r.size();o++){var a=r.get(o);if(t.capabilities.supportsNumberAsString()&&e.notNull(a)&&a.getType()===e.PrElementType.STRING){var l=e.XValueAccess.createWithType(n);l.parseString(r.getStringAt(o));i.add(l.getValue());continue}if(n===e.XValueType.INTEGER){var p=r.getIntegerAt(o);i.add(e.XIntegerValue.create(p))}else if(n===e.XValueType.DOUBLE||n===e.XValueType.DECIMAL_FLOAT){var s=r.getDoubleAt(o);i.add(e.XDoubleValue.create(s))}else if(n===e.XValueType.LONG){var u=r.getLongAt(o);i.add(e.XLongValue.create(u))}}return i},importDateTimeValues:function(t,r){var n=e.XList.create();for(var i=0;i<r.size();i++){var o=r.getStringAt(i);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XDateTime.createDateTimeFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return n},importTimeValues:function(t,r){var n=e.XList.create();for(var i=0;i<r.size();i++){var o=r.getStringAt(i);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XTime.createTimeFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return n},importDateValues:function(t,r){var n=e.XList.create();for(var i=0;i<r.size();i++){var o=r.getStringAt(i);if(e.XStringUtils.isNotNullAndNotEmpty(o)){e.XCollectionUtils.addIfNotNull(n,e.XDate.createDateFromStringWithFlag(o,t.capabilities.supportsSapDate()))}}return n},importStringValues:function(t){var r=e.XList.create();for(var n=0;n<t.size();n++){r.add(e.XStringValue.create(t.getStringAt(n)))}return r},importBooleanValues:function(t){var r=e.XList.create();for(var n=0;n<t.size();n++){r.add(e.XBooleanValue.create(t.getBooleanAt(n)))}return r}};e.QInARepoDataSourceBlending={exportDataSourceBlending:function(t,r,n){var i=e.PrFactory.createStructure();var o=i.putNewStructure("Metadata");var a=o.putNewStructure("DataSource");a.putString("Type",e.QueryManagerMode.BLENDING.getName());var l=e.XStringBuffer.create();for(var p=0;p<r.getSources().size();p++){l.append(r.getSources().get(p).getQueryAliasName())}var s=l.toString();if(l.length()>=256){s=e.XSha1.createSHA1(s)}a.putString("ObjectName",s);var u=e.QInARepoDataSourceBlending.exportBlendingSources(t,r,n);a.put("Sources",u);var g=e.QInARepoDataSourceBlending.exportBlendingMappings(r.getMappings());a.put("Mappings",g);return a},exportBlendingSources:function(t,r,n){var i=t;var o=e.PrFactory.createList();var a=r.getSources().getIterator();while(a.hasNext()){var l=a.next();var p=l.getQueryModel();if(e.isNull(p)){return null}var s=o.addNewStructure();s.putString("Type","Query");s.putString("AliasName",l.getQueryAliasName());s.putString("ObjectName",l.getQueryAliasName());var u=s.putNewStructure("DefiningContext");var g=p.serializeToElement(i).asStructure();e.QInARepoDataSourceBlending.exportOptimizerHints(g,p.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS));var y=p.getQueryManager();var m=y.getResultSetPersistenceIdentifier();if(!l.isRemoteSource()&&e.XStringUtils.isNotNullAndNotEmpty(m)&&n){g.getStructureByKey("DataSource").putString("InstanceId",m)}var c=e.QInARepoDataSourceBlending.exportResultSetFeatures(p,true);g.put("ResultSetFeatureRequest",c);u.put("Definition",g)}e.XObjectExt.release(a);return o},updateRemoteDataSource:function(t,r,n,i){var o=t.putNewStructure("DataSource");o.putString("Type","SerializedData");o.putString("InstanceId",r.getResultSetPersistenceIdentifier());var a=r.getActiveResultSetContainer();var l=r.getSystemDescription();var p=e.XStringUtils.isNotNullAndNotEmpty(a.getSerializedView())&&(!n||e.XStringUtils.isNotNullAndNotEmpty(a.getSerializedCube()));if(!p&&i.isSystemMappingValid(l)){var s=l.getSystemMapping(i.getSystemName());o.putString("ObjectName",s.getDeserializeTable());o.putString("SchemaName",s.getDeserializeSchema())}else{var u=o.putNewStructure("SerializedData");u.putString("View",a.getSerializedView());if(n){u.putStringNotNullAndNotEmpty("Cube",a.getSerializedCube())}}e.QInARepoDataSourceBlending.updateBWRemoteSource(t,r.getSystemType(),r.getQueryModel())},exportOptimizerHints:function(t,r){if(e.XCollectionUtils.hasElements(r)){var n=r.getKeysAsReadOnlyListOfString();n.sortByDirection(e.XSortDirection.ASCENDING);var i=t.putNewStructure("Hints");var o=i.putNewList(e.ExecutionEngine.MDS.getName());var a=n.size();for(var l=0;l<a;l++){var p=n.get(l);var s=o.addNewStructure();s.putString("Key",p);s.putString("Value",r.getByKey(p))}}},updateBWRemoteSource:function(t,r,n){if(r.isTypeOf(e.SystemType.BW)||r.isTypeOf(e.SystemType.VIRTUAL_INA)){t.remove("FixedFilter");t.remove("DynamicFilter");t.remove("Filter");t.remove("Conditions");t.remove("Query");t.remove("QueryDataCells");t.remove("Sort");t.remove("ExtendedSortTypes");t.remove("Variables");t.remove("UniversalDisplayHierarchies");var i=e.QInARepoDataSourceBlending.getExtendedStructureMemberNames(n);var o=t.getListByKey("Dimensions");var a=e.PrUtils.getListSize(o,0);for(var l=0;l<a;l++){var p=o.getStructureAt(l).getListByKey("Members");var s=e.PrUtils.getListSize(p,0);for(var u=0;u<s;u++){var g=p.getStructureAt(u);if(i.contains(g.getStringByKey("Name"))){g.remove("Selection")}}}}},getExtendedStructureMemberNames:function(t){var r=t.getMeasureDimension().getExtendedStructureMembers();return e.XCollectionUtils.createListOfNames(r)},exportResultSetFeatures:function(t,r){var n=e.PrFactory.createStructure();n.putBoolean("UseDefaultAttributeKey",false);var i=t.getQueryManager();if(i.getMaxResultRecords()!==-1){n.putLong("MaxResultRecords",i.getMaxResultRecords())}e.QInARepoOptions.exportPaging(n,i);e.QInARepoOptions.exportSuppressKeyfigureCalculation(n,i);n.putString("ResultFormat","Version2");n.putString("ResultEncoding","None");if(r){n.putBoolean("IsCubeBlendingSubquery",true)}if(!i.isResultSetTransportEnabled()){n.putBoolean("ReturnEmptyJsonResultSet",true)}return n},exportDimensionMapping:function(t){var r=e.PrFactory.createStructure();r.putString("DimensionName",t.getMemberName());r.putString("LinkType",t.getLinkType().getName());if(t.isPreservingMembers()){r.putBoolean("PreserveMembers",true)}if(!t.isReturningOriginKeys()){r.putBoolean("ReturnOriginKeys",false)}var n=t.getMappingDefinitions().getIterator();var i=e.QInARepoDataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);r.put("Mapping",i);if((t.getLinkType()===e.BlendingLinkType.ALL_DATA||t.getLinkType()===e.BlendingLinkType.NONE)&&t.getConstantMappings().hasElements()){e.QInARepoDataSourceBlending.exportConstantMapping(i,t.getConstantMappings().getIterator())}var o=e.PrFactory.createList();var a=t.getAttributeMappings().getIterator();while(a.hasNext()){var l=a.next();var p=e.QInARepoDataSourceBlending.exportAttributeMapping(l);o.add(p)}e.XObjectExt.release(a);if(!o.isEmpty()){r.put("AttributeMappings",o)}return r},exportAttributeMapping:function(t){var r=e.PrFactory.createStructure();r.putString("AttributeName",t.getAttributeName());r.putBoolean("IsLinkKey",t.isLinkKey());var n=t.getAttributeMappingDefinitions().getIterator();var i=e.QInARepoDataSourceBlending.exportMappingDefinitions(n);e.XObjectExt.release(n);r.put("Mapping",i);e.QInARepoDataSourceBlending.exportConstantMapping(i,t.getConstantMappings().getIterator());return r},exportConstantMapping:function(t,r){while(r.hasNext()){var n=r.next();var i=e.PrFactory.createStructure();i.putString("AliasName",n.getQueryAliasName());var o=i.putNewStructure("MappingDefinition");var a=o.putNewStructure("Constant");a.putString("Value",n.getMemberName());a.putString("ValueType",e.QInAConverter.lookupValueTypeInA(n.getValueType()));t.add(i)}},exportMappingDefinitions:function(t){var r=e.PrFactory.createList();while(t.hasNext()){var n=t.next();var i=r.addNewStructure();i.putString("AliasName",n.getQueryAliasName());var o=i.putNewStructure("MappingDefinition");var a=o.putNewStructure("Member");a.putString("Name",n.getMemberName())}return r},exportBlendingMappings:function(t){var r=e.PrFactory.createList();var n=t.getIterator();while(n.hasNext()){var i=n.next();var o=e.QInARepoDataSourceBlending.exportDimensionMapping(i);r.add(o)}return r}};e.QInARepoDataSourceExtDims={importQd:function(t,r,n){if(t.capabilities.supportsExtendedDimensions()){var i=r.getExtendedDimensionsBase();i.clear();var o=n.getListByKey("ExtendedDimensions");if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("JoinFieldName");var g=p.getStringByKey("JoinFieldNameInExtendedDimension");var y=r.addNewExtendedDimension(s,u,g);y.setText(p.getStringByKey("Description"));var m=p.getStringByKey("JoinType");var c=e.JoinType.lookup(m);y.setJoinType(c);e.QInARepoDataSourceExtDims.importJoinParameter(p,y);e.QInARepoDataSourceExtDims.importExtendedDataSource(p,y);var A=p.getStringByKey("FieldRenamingMode");if(e.notNull(A)){y.setRenamingMode(A)}var S=p.getStringByKey("JoinCardinality");if(e.XStringUtils.isNotNullAndNotEmpty(S)){var d=e.JoinCardinality.lookup(S);y.setJoinCardinality(d)}var I=p.getStringByKey("Visibility");if(e.XStringUtils.isNotNullAndNotEmpty(I)){var f=e.DimensionVisibility.lookup(I);if(e.notNull(f)){y.setVisibility(f)}}}}}},importExtendedDataSource:function(t,r){var n=t.getStructureByKey("DataSource");if(e.notNull(n)){var i=e.QFactory.createDataSource();e.QInARepoDataSourceProperties.importQd(i,n);var o;var a=n.getStringByKey("Type");if(e.isNull(a)){o=e.MetaObjectType.DBVIEW}else{o=e.MetaObjectType.lookup(e.XString.toLowerCase(a))}i.setType(o);r.setDataSource(i)}},importJoinParameter:function(t,r){var n=t.getListByKey("JoinParameters");if(e.notNull(n)){var i=r.getJoinParameters();i.clear();var o=n.size();for(var a=0;a<o;a++){i.add(n.getStringAt(a))}}},checkIsValid:function(t,r){var n=r.getJoinType();if(e.isNull(n)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing a JoinType"));return false}var i=r.getDimensionType();if(i.isTypeOf(e.DimensionType.GIS_DIMENSION)&&n.isTypeOf(e.JoinType._TIME)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false}else if((i.isTypeOf(e.DimensionType.TIME)||i.isTypeOf(e.DimensionType.DATE))&&n.isTypeOf(e.JoinType._SPATIAL)){t.addError(e.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false}var o=r.getDataSource();if(e.isNull(o)){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' is missing its DataSource"));return false}var a=r.getJoinParameters();if(n===e.JoinType.WITHIN_DISTANCE&&a.isEmpty()){t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate3("Extended dimension '",r.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false}return true},exportQd:function(t,r,n){var i=r.getExtendedDimensions();if(e.XCollectionUtils.hasElements(i)){var o=n.putNewList("ExtendedDimensions");for(var a=0;a<i.size();a++){var l=i.get(a);if(!e.QInARepoDataSourceExtDims.checkIsValid(t,l)){return}var p=o.addNewStructure();p.putString("Name",l.getName());p.putString("Description",l.getText());p.putInteger("DimensionType",e.QInAConverter.lookupDimensionTypeInA(l.getDimensionType()));p.putString("JoinFieldName",l.getJoinField());p.putString("JoinFieldNameInExtendedDimension",l.getJoinFieldNameExternal());p.putString("JoinType",l.getJoinType().getName());var s=l.getJoinCardinality();if(e.notNull(s)){p.putString("JoinCardinality",s.getName())}var u=r.getQueryManager();var g=null;if(e.notNull(u)){g=u.getModelCapabilities()}if(e.isNull(g)){g=t.capabilities}if(g.supportsDimensionVisibility()&&g.supportsExtendedDimensionVisibility()){var y=l.getVisibility();if(e.notNull(y)){p.putString("Visibility",y.getName())}}var m=l.getJoinParameters();if(m.hasElements()){var c=p.putNewList("JoinParameters");c.addAllStrings(m)}var A=l.getDataSource();var S=p.putNewStructure("DataSource");e.QInARepoDataSourceProperties.exportQd(t,A,S,false);var d=A.getType();if(e.isNull(d)){S.putString("Type",e.MetaObjectType.DBVIEW.getCamelCaseName())}else{S.putString("Type",d.getCamelCaseName())}if(g.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){p.putStringNotNull("FieldRenamingMode",l.getRenamingMode())}}}}};e.QInARepoDataSourceProperties={importQd:function(t,r){var n=r.getStringByKey("ObjectName");t.setName(n);var i=r.getStringByKey("Environment");t.setEnvironmentName(i);var o=r.getStringByKey("PackageName");t.setPackageName(o);var a=r.getStringByKey("SchemaName");t.setSchemaName(a);var l=r.getStringByKey("SourceQuery");t.setSourceQuery(l);var p=r.getStringByKey("AliasName");t.setAlias(p);var s=r.getStringByKey("DataArea");t.setDataArea(s);var u=r.getStringByKey("RunAsUser");t.setRunAsUser(u);var g=r.getStringByKey("Description");t.setText(g);var y=r.getStructureByKey("CustomProperties");if(e.notNull(y)){var m=y.getKeysAsReadOnlyListOfString();var c=m.size();for(var A=0;A<c;A++){var S=m.get(A);t.addCustomProperty(S,y.getStringByKey(S))}}},exportQd:function(t,r,n,i){e.QInAExportUtil.setNonEmptyString(n,"ObjectName",r.getObjectName());e.QInAExportUtil.setNonEmptyString(n,"Environment",r.getEnvironmentName());e.QInAExportUtil.setNonEmptyString(n,"PackageName",r.getPackageName());e.QInAExportUtil.setNonEmptyString(n,"SchemaName",r.getSchemaName());e.QInAExportUtil.setNonEmptyString(n,"AliasName",r.getAlias());if(t.getSession().hasFeature(e.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)&&e.QInARepoDataSourceProperties.exportSourceQuery(r)){e.QInAExportUtil.setNonEmptyString(n,"SourceQuery",r.getSourceQuery())}var o=r.getCustomProperties();var a=o.getKeysAsIteratorOfString();if(a.hasNext()){var l=n.putNewStructure("CustomProperties");while(a.hasNext()){var p=a.next();if(!e.XString.isEqual(p,e.QDataSource.SOURCE_QUERY_INA)||e.QInARepoDataSourceProperties.exportSourceQuery(r)){e.QInAExportUtil.setNonEmptyString(l,p,o.getByKey(p))}}}var s=r.getDataArea();if(!e.XString.isEqual(s,"DEFAULT")){e.QInAExportUtil.setNonEmptyString(n,"DataArea",s)}if(i){e.QInAExportUtil.setNonEmptyString(n,"RunAsUser",r.getRunAsUser())}e.QInAExportUtil.setNonEmptyString(n,"Description",r.getText())},exportSourceQuery:function(t){var r=false;var n=t.getContext();if(e.notNull(n)){var i=n.getQueryManager();if(e.notNull(i)){var o=i.getQueryServiceConfig();r=o.isSkipSourceQueryForNonMetadataRequests()}}return!r}};e.QInARepoOptions={exportOptions:function(t){var r=e.PrFactory.createStructure();r.putBoolean("UseDefaultAttributeKey",false);var n=t.getActiveResultSetContainer();if(n.getMaxResultRecords()!==-1){r.putLong("MaxResultRecords",n.getMaxResultRecords())}var i=n.getDataRefreshEnabled();if(i===e.ActionChoice.ON||i===e.ActionChoice.ONCE){r.putBoolean("Refresh",true)}var o=false;if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceTable())){r.putString("ResultSetPersistanceTable",n.getResultSetPersistenceTable());if(e.XStringUtils.isNotNullAndNotEmpty(n.getResultSetPersistenceSchema())){r.putString("ResultSetPersistanceSchema",n.getResultSetPersistenceSchema());o=true}}if(!n.isResultSetTransportEnabled()){r.putBoolean("ReturnEmptyJsonResultSet",true)}e.QInARepoOptions.exportPaging(r,t);e.QInARepoOptions.exportSuppressKeyfigureCalculation(r,t);if(t.getExecuteRequestOnOldResultSet()){r.putBoolean("ExecuteRequestOnOldResultSet",true)}if(t.isIncludePerformanceNotDefault()){r.putBoolean("IncludePerformanceData",t.isRequestingPerformanceData())}var a=t.getCapabilitiesBase();if(a.supportsAutoVariableSubmit()){if(t.getSession().hasFeature(e.FeatureToggleOlap.PREREQUISITE_FOR_AUTO_SUBMIT_AFTER_SUBMITTED)){r.putBoolean("IgnoreAutoSubmit",!t.isProcessingAutoSubmit())}else{r.putBoolean("IgnoreAutoSubmit",!t.getInitSettings().isEnableAutoVariableSubmit())}}var l=t.getQueryModel();if(a.supportsEncodedResultset()){r.putString("ResultFormat","Version2");r.putString("ResultEncoding","None");if(n.getResultSetPersistenceIdentifier()!==null){var p=!n.isRemotePreQuery();if(p){r.putBoolean("IsCubeBlendingSubquery",true)}if(e.QInARepoOptions.isCubeCacheQuery(l)){r.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier())}else{r.putString("ResultFormat","SerializedData");if(o){r.putString("ResultSetPersistanceIdentifier",n.getResultSetPersistenceIdentifier())}if(t.getSystemType().isTypeOf(e.SystemType.BW)){if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.VIEW){r.putString("ResultSetPersistanceType","View")}else if(p&&t.getResultSetPersistenceType()===e.BlendingPersistenceType.CUBE){r.putString("ResultSetPersistanceType","Cube")}}}}}if(e.notNull(l)&&a.supportsKeepOriginalTexts()){r.putBoolean("ResultKeepOriginalTexts",l.isKeepingOriginalTexts())}if(n.getSuppressCalculatedMembersWithoutBookedData()!==-1){r.putInteger("SuppressCalculatedMembersWithoutBookedData",n.getSuppressCalculatedMembersWithoutBookedData())}return r},isCubeCacheQuery:function(t){var r=t.getOptimizerHintsByExecutionEngine(e.ExecutionEngine.MDS);return e.notNull(r)&&r.containsKey(e.OptimizerHint.CUBE_CACHE_WITH_ID.getName())},fillOptions:function(t,r,n,i){var o=e.PrFactory.createList();if(r.supportsServerState()){o.addString("StatefulServer")}var a=i.getServerCustomizations();o.addAllStrings(a.getValuesAsReadOnlyListOfString());if(n.hasFeature(e.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){t.put("Options",o)}},setRequestTimeZone:function(t,r){if(e.notNull(t)&&r.getModelCapabilities().supportsRequestTimezone()){t.putStringNotNullAndNotEmpty("Timezone",r.getQueryServiceConfig().getRequestTimeZone())}},setLanguage:function(t,r){var n=r.getConnection().getSystemDescription().getLanguage();if(e.XStringUtils.isNotNullAndNotEmpty(n)){t.putString("Language",n)}},importReturnedDataSelections:function(t,r){if(e.notNull(t)){if(r.supportsReturnedDataSelection()){var n=t.getStructureByKey("ReturnedDataSelection");if(e.notNull(n)&&n.hasElements()){var i=n.getKeysAsReadOnlyListOfString();var o=i.size();for(var a=0;a<o;a++){var l=e.QInAConverter.lookupReturnedDataSelection(i.get(a));if(e.notNull(l)){var p=r.getQueryModel();if(l===e.ReturnedDataSelection.TUPLE_ELEMENT_IDS){p.toggleReturnedDataSelection(l,true);continue}p.toggleReturnedDataSelection(l,n.getBooleanByKeyExt(l.getName(),false))}}}}}},exportReturnedDataSelections:function(t,r){if(r.supportsReturnedDataSelection()){var n=t.putNewStructure("ReturnedDataSelection");var i=r.getQueryModel().getAllReturnedDataSelections();var o=i.getKeysAsIterator();while(o.hasNext()){var a=o.next();n.putBoolean(e.QInAConverter.lookupReturnedDataSelectionInA(a),i.getByKey(a).getBoolean())}}},importOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){r.getQueryModel().clearAllOptimizerHints();var n=t.getStructureByKey("Hints");if(e.notNull(n)){e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.CALC_ENGINE,r);e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.MDS,r);e.QInARepoOptions.importOptimizerHintsByEngine(n,e.ExecutionEngine.SQL,r)}}},importOptimizerHintsByEngine:function(t,r,n){var i=n.getQueryModel();var o=t.getListByKey(r.getName());if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Key");var u=p.getStringByKey("Value");i.addOptimizerHint(r,s,u)}}},exportOptimizerHints:function(t,r){if(r.getModelCapabilities().supportsCeScenarioParams()){var n=e.PrFactory.createStructure();e.QInARepoOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.CALC_ENGINE);e.QInARepoOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.MDS);e.QInARepoOptions.exportOptimizerHintsByEngine(n,r,e.ExecutionEngine.SQL);if(n.hasElements()){t.put("Hints",n)}}},exportOptimizerHintsByEngine:function(t,r,n){var i=r.getOptimizerHintsByExecutionEngine(n);if(e.notNull(i)&&i.hasElements()){var o=i.getKeysAsReadOnlyListOfString();o.sortByDirection(e.XSortDirection.ASCENDING);var a=t.putNewList(n.getName());var l=o.size();for(var p=0;p<l;p++){var s=o.get(p);var u=a.addNewStructure();u.putString("Key",s);u.putString("Value",i.getByKey(s))}}},importSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)){r.setSuppressKeyfigureCalculation(t.getBooleanByKeyExt("SuppressKeyfigureCalculation",false))}},exportSuppressKeyfigureCalculation:function(t,r){if(e.notNull(t)&&e.notNull(r)&&r.isKeyfigureCalculationSuppressed()){t.putBoolean("SuppressKeyfigureCalculation",true)}},importPaging:function(t,r){if(e.notNull(t)){var n=r.getQueryModel();var i=t.getStructureByKey("SubSetDescription");if(e.isNull(i)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!r.isApplyingRepoState()){return}var o=i.getIntegerByKey("RowFrom");if(o>-1){r.setOffsetRows(o);r.setMaxRows(i.getIntegerByKey("RowTo")-o)}else{r.setMaxRows(i.getIntegerByKey("RowTo"))}var a=i.getIntegerByKey("ColumnFrom");if(a>-1){r.setOffsetColumns(a);r.setMaxColumns(i.getIntegerByKey("ColumnTo")-a)}else{r.setMaxColumns(i.getIntegerByKey("ColumnTo"))}}},exportPaging:function(e,t){var r=t.getActiveResultSetContainer();var n=e.putNewStructure("SubSetDescription");var i=r.getMaxRows();var o=r.getOffsetRows();n.putInteger("RowFrom",o);if(i===-1){n.putInteger("RowTo",-1)}else{n.putInteger("RowTo",o+i)}var a=r.getMaxColumns();var l=r.getOffsetColumns();n.putInteger("ColumnFrom",l);if(a===-1){n.putInteger("ColumnTo",-1)}else{n.putInteger("ColumnTo",l+a)}},exportLOVAbstractionLayerSettings:function(e,t){if(t.hasLovManager()){var r=t.getLovManager();var n=e.putNewStructure("LovAbstractionRepo");n.putBoolean("Enabled",r.isLovAbstractionEnabled());n.putBoolean("Measures",r.isIncludeMeasures());n.putBoolean("AutoVhReadModeConfig",r.isAutomaticValueHelpReadModeConfigurationEnabled());n.putBoolean("AutoVhDrillLevelConfig",r.isAutomaticValueHelpDrillLevelConfigurationEnabled());n.putBoolean("IgnoreMultipleDrillsInVh",r.isIgnoreMultipleDrillsInValueHelp());n.putBoolean("RestoreSettingsAfterImplicitSubmit",r.isRestoreSettingsAfterImplicitSubmit())}},importLOVAbstractionLayerSettings:function(t,r){var n=t.getStructureByKey("LovAbstractionRepo");if(e.notNull(n)){var i=r.getLovManager();i.setLovAbstractionEnabled(n.getBooleanByKeyExt("Enabled",false),true);i.setIncludeMeasures(n.getBooleanByKeyExt("Measures",false));i.setAutomaticValueHelpReadModeConfigurationEnabled(n.getBooleanByKeyExt("AutoVhReadModeConfig",true));i.setAutomaticValueHelpDrillLevelConfigurationEnabled(n.getBooleanByKeyExt("AutoVhReadModeConfig",true));i.setIgnoreMultipleDrillsInValueHelp(n.getBooleanByKeyExt("IgnoreMultipleDrillsInVh",false));i.setRestoreSettingsAfterImplicitSubmit(n.getBooleanByKeyExt("RestoreSettingsAfterImplicitSubmit",false))}else if(r.hasLovManager()){r.getLovManager().setLovAbstractionEnabled(false,true)}}};e.QInARepoUtils={importLayeredFilters:function(t,r,n){var i=e.XList.create();var o=n.size();for(var a=0;a<o;a++){var l=n.getStructureAt(a);var p=l.getStringByKey("Name");var s=e.QFilterExpression.create(r,r);t.importFilterExpression(s,l,r,r);r.linkFilter(p,s);i.add(s)}return i},importCacheKey:function(t){var r=t.getStringByKey("System");var n=t.getStringByKey("Providers");var i=t.getStringByKey("Cube");var o=t.getStringByKey("FieldName");var a=t.getStringByKey("DimensionName");var l=t.getStringByKey("ValidationHash");var p=t.getStringByKey("DimensionGroupNames");return e.QFactory.createCacheKey(null,r,i,e.ProviderType.getAll().getByKey(n),o,a,l,p)},importValueByType:function(t,r,n,i){return e.QInARepoUtils._importValueInternal(t,null,r,n,i,null,true)},importSupplementsAndValue:function(t,r,n,i,o,a){e.QInARepoUtils.importValue(t,r,n,i,o,a);var l=n.getListByKey("Supplements");if(e.notNull(l)&&l.hasElements()){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getByKey("Key");var y=u.getByKey("Value");var m=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());var c=e.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(y.getString());r.addSupplementValue(m,c)}}},correctRemovingUnwantedBackslashAndQuotes:function(t){var r=t;while(e.QInARepoUtils.containsEscapedQuote(r)){r=e.XStringUtils.stripChars(r,1)}return r},containsEscapedQuote:function(t){return e.XStringUtils.isNotNullAndNotEmpty(t)&&(e.XString.getCharAt(t,0)===92||e.XString.getCharAt(t,0)===34)&&(e.XString.getCharAt(t,e.XString.size(t)-1)===92||e.XString.getCharAt(t,e.XString.size(t)-1)===34)},importValue:function(t,r,n,i,o,a){e.QInARepoUtils._importValueInternal(t,r,n,i,o,a,false)},getDouble:function(t,r){var n;var i=t.getByKey(r);if(i.isString()){var o=i.getString();n=e.XDouble.convertFromString(o)}else if(i.isDouble()){n=i.getDouble()}else if(i.isInteger()){n=i.getInteger()}else{n=0}return n},_importValueInternal:function(t,r,n,i,o,a,l){var p=t.capabilities.supportsSapDate();var s=e.PrUtils.getBooleanValueProperty(n,"FieldLiteralValue",false);var u=i;if(e.isNull(u)){u="Value"}var g=o;if(e.isNull(g)){var y=n.getStringByKey(e.XStringUtils.concatenate2(u,"Type"));g=e.QInAConverter.lookupValueType(y);p=false}var m;var c;if(g===e.XValueType.STRING){c=n.getStringByKey(u);if(l){return e.XStringValue.create(c)}if(e.isNull(a)||!s){r.setString(c)}else{var A=a.getDimension();var S=A.getDimensionMember(c);if(A.isStructure()&&e.notNull(S)){r.setDimensionMember(S)}else{m=a.createFieldLiteralValue();m.setString(c);r.setFieldValue(m)}}}else if(g===e.XValueType.DOUBLE||g===e.XValueType.DECIMAL_FLOAT){var d=e.QInARepoUtils.getDouble(n,u);if(l){return e.XDoubleValue.create(d)}if(e.isNull(a)||!s){r.setDouble(d)}else{m=a.createFieldLiteralValue();m.setDouble(d);r.setFieldValue(m)}}else if(g===e.XValueType.INTEGER){var I=n.getIntegerByKey(u);if(l){return e.XIntegerValue.create(I)}if(e.isNull(a)||!s){r.setInteger(I)}else{m=a.createFieldLiteralValue();m.setInteger(I);r.setFieldValue(m)}}else if(g===e.XValueType.BOOLEAN){var f=n.getBooleanByKey(u);if(l){return e.XBooleanValue.create(f)}r.setBoolean(f)}else if(g===e.XValueType.LONG){var N=e.PrUtils.getLongValueProperty(n,u,0);if(l){return e.XLongValue.create(N)}if(e.isNull(a)||!s){r.setLong(N)}else{m=a.createFieldLiteralValue();m.setLong(N);r.setFieldValue(m)}}else if(g===e.XValueType.DATE){c=n.getStringByKey(u);var v=e.QInARepoUtils.createDate(c);if(l){return v}if(e.isNull(a)||!s){r.setDate(v)}else{m=a.createFieldLiteralValue();m.setDate(v);r.setFieldValue(m)}}else if(g===e.XValueType.TIME){c=n.getStringByKey(u);var T=e.XTime.createTimeFromStringWithFlag(c,p);if(l){return T}r.setTime(T)}else if(g===e.XValueType.DATE_TIME){c=n.getStringByKey(u);var R=e.XDateTime.createDateTimeFromStringWithFlag(c,p);if(l){return R}if(e.isNull(a)||!s){r.setDateTime(R)}else{m=a.createFieldLiteralValue();m.setDate(R);r.setFieldValue(m)}}else if(g.isSpatial()){c=n.getStringByKey(u);var E=e.XGeometryValue.createGeometryValueWithWkt(c);if(l){return E}r.setValue(E);if(t.capabilities.supportsSpatialFilterSrid()&&n.containsKey("SRID")){r.getGeometry().setSrid(e.XIntegerValue.create(n.getIntegerByKey("SRID")))}}else if(g===e.XValueType.UNSUPPORTED){return null}else if(g===e.XValueType.VARIABLE||g===e.XValueType.CURRENT_MEMBER){if(!l){r.setFilterValueType(g)}return null}else{t.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Unsupported value type '",g.getName(),"'"));return null}return null},importSupplements:function(t,r,n,i,o){if(t.capabilities.supportsSupplements()&&e.notNull(i)&&e.XCollectionUtils.hasElements(o)){var a=n.getListByKey(i);if(e.notNull(a)){var l=a.size();var p=o.size();if(l===p){for(var s=0;s<l;s++){r.addSupplementValue(o.get(s).getName(),a.getStringAt(s))}}else{t.addWarning(e.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.")}}}},createDate:function(t){return e.XDate.createDateSafe(t)},importLinkPart:function(t,r){var n=r.getStringByKey("System");var i=r.getStringByKey("DataSource");var o=r.getStringByKey("FieldName");var a=r.getStringByKey("DimensionName");var l=r.getStringByKey("HierarchyName");var p=r.getStringByKey("HierarchyId");var s=r.getStringByKey("ValidationHash");var u=r.getStringByKey("QueryManagerKey");var g=r.getBooleanByKeyExt("IsIncludeHierarchyNodeChildren",false);var y=e.QFactory.createCacheKeyWithDataSource(t,n,i,null,o,a,s,null);var m=e.QFactory.createDimensionLinkPart(t,y,l,u);m.setHierId(p);m.setIncludeHierarchyNodeChildren(g);m.setPropagateOnDefaultHierarchyKey(r.getBooleanByKeyExt("PropagateOnDefaultHierarchyKey",false));return m},importFilterTimeRange:function(e,t){t.setTimeDimensionName(e.getStringByKey("DimensionName"));t.setHierarchyName(e.getStringByKey("HierarchyName"));t.setLevelName(e.getStringByKey("LevelName"));t.setConvertToFlatFilter(e.getBooleanByKey("ConvertToFlatSelection"))},importFilterShiftableTimeRange:function(t,r){r.setLookBack(t.getIntegerByKey("LookBack"));var n=t.getStringByKey("OffsetFunction");if(e.XStringUtils.isNotNullAndNotEmpty(n)){r.setOffsetFunction(e.TimeOffsetFunction.lookup(n))}r.setOffsetLevelName(t.getStringByKey("OffsetLevelName"));r.setOffsetAmount(t.getIntegerByKey("OffsetAmount"))},exportLayeredFilters:function(t,r){return e.QInARepoUtils.exportLayeredFiltersExt(t,r,null)},exportLayeredFiltersExt:function(t,r,n){var i=e.PrFactory.createList();var o=r.getLinkedFilters();var a=o.getKeysAsIteratorOfString();while(a.hasNext()){var l=a.next();var p=r.getLinkedFilter(l);if(e.QInARepoUtils.isValidFilterExpressionForRepository(p)&&(e.isNull(n)||n(p).getBoolean())){var s=t.exportFilterExpression(p);s.putString("Name",l);i.add(s)}}return i},isValidFilterExpressionForRepository:function(t){return e.notNull(t)&&!t.isReleased()&&t.getFilterRootElement()!==null&&!t.getFilterRootElement().isReleased()},exportCacheKey:function(t,r){var n=e.PrFactory.createStructure();n.putString("System",t.getSystemName());n.putString("Providers",t.getProviderType().getName());n.putString("Cube",t.getDataSourceHashKey());n.putString("FieldName",t.getKey1());n.putString("DimensionName",t.getKey2());n.putString("ValidationHash",t.getValidationHash());n.putString("DimensionGroupNames",t.getDimensionGroupNames());if(e.notNull(r)&&r.getClientQueryObjectStorageName()!==null){n.putString("StorageName",r.getClientQueryObjectStorageName())}return n},extendStructureWithTagging:function(t,r,n){var i=r.getTagging();if(e.XCollectionUtils.hasElements(i)){var o=i.getKeysAsReadOnlyListOfString();var a=n.putNewList("ComponentTags");for(var l=0;l<o.size();l++){var p=o.get(l);var s=i.getByKey(p);var u=e.PrFactory.createStructure();a.add(u);u.putString("KEY",p);if(e.isNull(s)){u.putNull("VALUE")}else{u.putString("VALUE",s)}}}return n},setDateIfNotNull:function(t,r,n,i){if(e.notNull(i)){r.putString(n,i.toIsoFormat())}},setNameIfNotNull:function(t,r,n){if(e.notNull(n)){t.putString(r,n.getName())}},setIntegerIfNotNull:function(t,r,n){if(e.notNull(n)){t.putInteger(r,n.getInteger())}},addKeyRefStructure:function(t,r,n,i){var o=n.putNewStructure("KeyRef");if(!t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||e.isNull(i)||i.getClientQueryObjectStorageName()===null||!e.XString.isEqual(r.getStorageName(),i.getClientQueryObjectStorageName())){o.putString("StorageName",r.getStorageName())}o.putString("GroupName",r.getStorageGroupName());o.putString("ObjectName",r.getStorageObjectName());var a=r.getComponentType();var l=e.QInAConverter.lookupComponentTypeInA(a);if(e.notNull(l)){n.putString("CType",l)}},exportValue:function(t,r,n,i,o){e.QInARepoUtils.exportFieldValue(t,r,n,null,i,o)},exportFieldValue:function(t,r,n,i,o,a){var l=r;if(e.isNull(l)){l="Value"}var p=a;if(e.isNull(p)){p=o.getValueType();var s=e.QInAConverter.lookupValueTypeInA(p);n.putString(e.XStringUtils.concatenate2(l,"Type"),s)}if(p===e.XValueType.STRING){var u=o.getString();n.putString(l,u)}else if(p===e.XValueType.INTEGER){n.putInteger(l,o.getInteger())}else if(p===e.XValueType.LONG){n.putLong(l,o.getLong())}else if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){n.putDouble(l,o.getDouble())}else if(p===e.XValueType.BOOLEAN){n.putBoolean(l,o.getBoolean())}else if(p===e.XValueType.DATE){e.QInARepoUtils.setDateIfNotNull(t,n,l,o.getDate())}else if(p===e.XValueType.TIME){e.QInARepoUtils.setDateIfNotNull(t,n,l,o.getTime())}else if(p===e.XValueType.DATE_TIME){e.QInARepoUtils.setDateIfNotNull(t,n,l,o.getDateTime())}if(e.notNull(p)&&p.isSpatial()){var g=o.getGeometry();n.putString(l,g.toWKT());var y=g.getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(y)){n.putInteger("SRID",y.getInteger())}}if(e.notNull(i)){n.putBoolean("FieldLiteralValue",true)}},exportSupplementsAndValue:function(t,r,n,i,o,a){e.QInARepoUtils.exportFieldValue(t,r,n,i,o,a);var l=o.getSupplementValues();if(e.XCollectionUtils.hasElements(l)){var p=n.putNewList("Supplements");var s=l.size();for(var u=0;u<s;u++){var g=p.addNewStructure();var y=l.get(u);g.putString("Key",y.getKey().toString());g.putString("Value",y.getValue().toString())}}},exportFilterValue:function(t,r,n,i,o){if(o===e.XValueType.VARIABLE){var a=i.getVariableValue();if(e.notNull(a)){n.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){n.putString("HighIs","Variable")}}}else{e.QInARepoUtils.exportValue(t,r,n,i,o)}},setDate:function(t,r,n,i){if(e.notNull(i)){r.putString(n,i.toIsoFormat())}},exportLinkPart:function(t,r,n){r.putString("System",n.getSystemName());r.putString("DataSource",n.getCubeName());r.putString("DimensionName",n.getDimensionName());r.putString("FieldName",n.getFieldName());r.putStringNotNullAndNotEmpty("QueryManagerKey",n.getQueryManagerKey());if(n.getHierarchyName()!==null){r.putString("HierarchyName",n.getHierarchyName())}if(n.getHierId()!==null){r.putString("HierarchyId",n.getHierId())}if(n.getFieldKey().getValidationHash()!==null){r.putString("ValidationHash",n.getFieldKey().getValidationHash())}if(t.getSession().hasFeature(e.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){r.putBoolean("IsIncludeHierarchyNodeChildren",n.isIncludeHierarchyNodeChildren())}if(n.getPropagateOnDefaultHierarchyKey()){r.putBoolean("PropagateOnDefaultHierarchyKey",true)}},getFormulaCalcDimField:function(t,r,n){var i=t.getOlapEnv().getClientQueryObjectManager();var o=i.getFormulaCalcDimPropertiesByFieldName(r,n);if(e.notNull(o)){return o.getFormulaCalcFields().getFieldByName(r)}return null},exportTimeRangeFilter:function(e,t){e.putString("DimensionName",t.getTimeDimensionName());e.putString("HierarchyName",t.getHierarchyName());e.putString("LevelName",t.getLevelName());e.putBoolean("ConvertToFlatSelection",t.isConvertToFlatFilter());if(t.getLowValueType()!==null){e.putString("LowValueType",t.getLowValueType().getName())}},exportShiftableTimeRangeFilter:function(t,r){t.putInteger("LookBack",r.getLookBack());var n=r.getOffsetFunction();if(e.notNull(n)){t.putString("OffsetFunction",n.getName())}t.putString("OffsetLevelName",r.getOffsetLevelName());t.putInteger("OffsetAmount",r.getOffsetAmount())},exportTimeOperation:function(t,r){t.putString("Name",r.getDimensionName());t.putString("TimeOperationFunction",r.getFunction().getName());if(r.getGranularity()!==null){t.putString("TimeOperationGranularity",r.getGranularity().getName())}t.putInteger("TimeOperationPeriod",r.getPeriod());t.putBoolean("TimeOperationForceMemberNavGeneration",r.getForceMemberNavigationGeneration());t.putBoolean("TimeOperationUseToDateFlatRangeSelection",r.getUseToDateFlatRangeSelection());t.putString("LevelName",r.getHierarchyLevelName());if(r.getFunction()===e.QTimeOperationFunction.PREVIOUS&&r.getGranularity()===e.QTimeOperationGranularity.PERIOD){t.putString("TimePeriodOperationLevel",r.getTimePeriodOperationLevel().getName())}}};e.QInAComponentWithList=function(){};e.QInAComponentWithList.prototype=new e.QInAComponent;e.QInAComponentWithList.prototype._ff_c="QInAComponentWithList";e.QInAComponentWithList.prototype.importComponent=function(t,r,n,i,o){var a=this.getTagName();var l=null;if(e.isNull(a)){l=r}else{if(e.notNull(r)){var p=r;l=p.getListByKey(a)}}return this.importComponentWithList(t,l,n,i,o)};e.QInAComponentWithList.prototype.exportComponent=function(t,r,n,i){var o=null;if(e.notNull(r)){o=this.exportComponentWithList(t,r,i);var a=this.getTagName();if(e.notNull(a)&&e.notNull(o)){var l=n;if(e.isNull(l)){l=e.PrFactory.createStructure()}l.put(a,o);return l}}return o};e.QInAComponentWithStructure=function(){};e.QInAComponentWithStructure.prototype=new e.QInAComponent;e.QInAComponentWithStructure.prototype._ff_c="QInAComponentWithStructure";e.QInAComponentWithStructure.prototype.importComponent=function(t,r,n,i,o){var a=r;var l=this.getTagName();if(e.notNull(l)&&e.notNull(a)){var p=a.getByKey(l);a=e.notNull(p)&&p.isStructure()?p:null}var s=n;if(e.isNull(n)){var u=null;var g=null;if(e.notNull(o)){u=o.getOlapEnv();g=o.getApplication()}if(e.isNull(g)){g=t.getApplication()}if(e.notNull(a)){var y=a.getStructureByKey("KeyRef");if(e.notNull(y)&&e.notNull(o)){return this.getSharedObjectFromKeyRef(i,o,y)}}s=this.newModelComponent(g,u,i,o);if(e.notNull(s)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){s.stopEventing()}}var m=this.importComponentWithStructure(t,a,s,i,o);e.QInAImportUtil.importComponentTagging(t,a,m);e.QInAImportUtil.importComponentExtensions(t,a,m);this.importChangedProperties(m,a);if(e.isNull(n)&&e.notNull(s)&&!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){s.resumeEventing()}return m};e.QInAComponentWithStructure.prototype.importChangedProperties=function(t,r){if(e.notNull(r)&&e.notNull(t)){var n=r.getListByKey("ChangedProperties");if(e.notNull(n)&&n.size()>0){var i=e.XHashSetOfString.create();for(var o=0;o<n.size();o++){i.add(n.getStringAt(o))}t.setChangedProperties(i)}var a=r.getStructureByKey("ChangedPropertiesInDetail");if(e.notNull(a)&&a.hasElements()){var l=t.getChangedPropertiesInDetail();var p=a.getKeysAsReadOnlyListOfString();for(var s=0;s<p.size();s++){var u=p.get(s);var g=e.XHashMapByString.create();l.put(u,g);var y=a.getStructureByKey(u);var m=y.getKeysAsReadOnlyListOfString();for(var c=0;c<m.size();c++){var A=m.get(c);g.put(A,e.XStringValue.create(y.getStringByKey(A)))}}}}};e.QInAComponentWithStructure.prototype.getSharedObjectFromKeyRef=function(t,r,n){var i;var o=n.getStringByKey("StorageName");if(e.notNull(t)&&t.getQueryManager()!==null&&t.getQueryManager().getClientQueryObjectStorageName()!==null){i=e.QFactory.createKeyRef(t.getQueryManager().getClientQueryObjectStorageName(),n.getStringByKey("GroupName"),n.getStringByKey("ObjectName"))}else{i=e.QFactory.createKeyRef(o,n.getStringByKey("GroupName"),n.getStringByKey("ObjectName"))}var a=null;if(e.XString.isEqual(o,e.KeyRefConstants.MAIN_STORAGE)&&t.getKeyRefStorage()!==null){a=t.getKeyRefStorage().get(o,n.getStringByKey("GroupName"),n.getStringByKey("ObjectName"))}else{a=r.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(i,null)}return a};e.QInAComponentWithStructure.prototype.newModelComponent=function(e,t,r,n){return null};e.QInAComponentWithStructure.prototype.exportComponent=function(t,r,n,i){var o=null;if(e.notNull(r)){var a=this.getTagName();if(e.isNull(a)){o=n}if(e.isNull(o)){o=e.PrFactory.createStructure()}var l=this.exportKeyReference(t,r,o);if(!l){o=this.exportComponentWithStructure(t,r,o,i);if(e.notNull(o)){o=e.QInAExportUtil.extendStructure(t,r,o);o=this.extendCustom(t,r,o);e.QInAExportUtil.exportComponentExtensions(t,o,r)}if(e.notNull(a)){if(e.notNull(o)){var p=n;if(e.isNull(p)){p=e.PrFactory.createStructure()}p.put(a,o);o=p}}}}return o};e.QInAComponentWithStructure.prototype.extendCustom=function(e,t,r){return r};e.QInAComponentWithStructure.prototype.exportKeyReference=function(e,t,r){return false};e.QInARepoFilterCartesianListLegacy=function(){};e.QInARepoFilterCartesianListLegacy.prototype=new e.QInAComponent;e.QInARepoFilterCartesianListLegacy.prototype._ff_c="QInARepoFilterCartesianListLegacy";e.QInARepoFilterCartesianListLegacy.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCartesianListLegacy.prototype.importComponent=function(t,r,n,i,o){var a=r;var l=n;var p=i;var s=o.getFieldAccessorSingle();var u=a.getStringByKey("FieldName");var g=l;if(e.notNull(u)){var y=s.getFieldByName(u);if(e.isNull(y)){var m=p.getQueryModel();if(e.notNull(m)){var c=m.getDimensionByNameFromExistingMetadata(u);if(e.notNull(c)){var A=a.getStructureByKey("Hierarchy");if(e.isNull(A)){y=c.getFlatKeyField()}else{y=c.getHierarchyKeyField()}}}}if(e.notNull(y)){var S=a.getStructureByKey("Hierarchy");var d=null;var I=null;var f=null;if(e.notNull(S)){d=S.getStringByKey("Name");if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&t.isAbap(y)){var N=S.getStringByKey("DueDate");if(e.notNull(N)){I=e.XDate.createDateFromSAPFormat(N)}f=S.getStringByKey("Version")}}if(e.isNull(g)){g=e.QFilterCartesianList._createMd(o,p,y.getMetadata(),d);g.setHierarchyInfo(d,I,f)}else{g.clear()}var v=a.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(v);var T=a.getListByKey("SupplementsFieldNames");if(e.notNull(T)){var R=T.size();for(var E=0;E<R;E++){var C=T.getStringAt(E);var Q=s.getFieldByName(C);g.addSupplementField(Q)}}var M=a.getListByKey("Elements");if(e.notNull(M)){var D=M.size();for(var L=0;L<D;L++){var F=M.getStructureAt(L);var O=t.importFilterOperation(F,g,o);g.add(O)}}}}return g};e.QInARepoFilterCartesianListLegacy.prototype.exportComponent=e.noSupport;e.InARepoStructureMemberLazyLoader=function(){};e.InARepoStructureMemberLazyLoader.prototype=new e.XObjectExt;e.InARepoStructureMemberLazyLoader.prototype._ff_c="InARepoStructureMemberLazyLoader";e.InARepoStructureMemberLazyLoader.create=function(t,r,n){if(e.isNull(r)){throw e.XException.createIllegalArgumentException("InARepoStrucutreMemberLazyLoader - QModelFormat mode is null")}if(!r.isTypeOf(e.QModelFormat.INA_REPOSITORY)){throw e.XException.createIllegalArgumentException(e.XStringUtils.concatenate2("InARepoStrucutreMemberLazyLoader - Does not support QModelFormat:",r.getName()))}var i=new e.InARepoStructureMemberLazyLoader;i.m_dimension=t;i.m_importer=e.QInAImportFactory.createWithQueryManagerCapabilities(t.getApplication(),r,t.getQueryManager());i.m_modelFormat=r;i.m_inaStructure=n.cloneExt(null);i.m_repoMetadataMap=e.XHashMapByString.create();i.m_memberNameList=e.XListOfString.create();var o=i.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(o)){for(var a=0;a<o.size();a++){var l=o.get(a).asStructure();i.m_repoMetadataMap.put(l.getStringByKey("Name"),l);i.m_memberNameList.add(l.getStringByKey("Name"))}}return i};e.InARepoStructureMemberLazyLoader.prototype.m_dimension=null;e.InARepoStructureMemberLazyLoader.prototype.m_importer=null;e.InARepoStructureMemberLazyLoader.prototype.m_modelFormat=null;e.InARepoStructureMemberLazyLoader.prototype.m_repoMetadataMap=null;e.InARepoStructureMemberLazyLoader.prototype.m_memberNameList=null;e.InARepoStructureMemberLazyLoader.prototype.m_inaStructure=null;e.InARepoStructureMemberLazyLoader.prototype.loadStructureMember=function(t){if(this.m_repoMetadataMap.getByKey(t)!==null){var r=this.m_memberNameList.getIndex(t);if(r>=0){var n=e.PrFactory.createStructure();var i=this.m_inaStructure.getKeysAsIteratorOfString();while(i.hasNext()){var o=i.next();n.put(o,this.m_inaStructure.getByKey(o))}var a=n.putNewList("MembersRepo");a.add(this.m_repoMetadataMap.getByKey(t));this.m_repoMetadataMap.remove(t);var l=this.m_inaStructure.getListByKey("MembersRepo");l.removeAt(r);this.m_memberNameList.removeAt(r);this.loadStructureMemberStructure(n)}}};e.InARepoStructureMemberLazyLoader.prototype.loadAllStructureMembers=function(){var t=this.m_inaStructure.getListByKey("MembersRepo");if(e.notNull(t)&&t.size()>0){var r=e.PrFactory.createStructure();var n=this.m_inaStructure.getKeysAsIteratorOfString();while(n.hasNext()){var i=n.next();r.put(i,this.m_inaStructure.getByKey(i))}var o=r.putNewList("MembersRepo");o.addAll(t);this.m_repoMetadataMap.clear();this.m_memberNameList.clear();t.clear();this.loadStructureMemberStructure(r)}};e.InARepoStructureMemberLazyLoader.prototype.loadStructureMemberStructure=function(t){this.m_dimension.getQueryManager().stopEventing();var r=this.m_dimension.getQueryModel().isBasicMeasureAggregationExportedInRepo();if(!r){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(true)}var n=this.m_dimension.getQueryModel().isBasicMeasureSettingsExportedInRepo();if(!n){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(true)}this.m_importer.importComponent(e.OlapComponentType.MEMBERS,t,this.m_dimension,null,this.m_dimension.getContext());if(!r){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(false)}if(!n){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(false)}this.m_dimension.getQueryManager().resumeEventing()};e.InARepoStructureMemberLazyLoader.prototype.copyStructureMemberLazyLoader=function(t){return e.InARepoStructureMemberLazyLoader.create(t,this.m_modelFormat,this.m_inaStructure)};e.QInARepoVariableManager=function(){};e.QInARepoVariableManager.prototype=new e.QInAComponentWithList;e.QInARepoVariableManager.prototype._ff_c="QInARepoVariableManager";e.QInARepoVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_MANAGER};e.QInARepoVariableManager.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableManager.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableManager.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=a.getVariableBaseByName(u);if(e.notNull(g)){var y=g.getVariableType();if(y.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(s,g,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",u,"' of variable type '",y.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",u,"' was not found"))}}}return a};e.QInARepoVariableManager.prototype.exportComponentWithList=function(t,r,n){var i;var o=r;var a=o.getQueryModel();if(e.notNull(a)&&!a.isExportingVariables()&&!a.hasProcessingStep()){i=null}else{i=null;var l=o.getVariables();if(e.XCollectionUtils.hasElements(l)){var p=e.PrFactory.createList();var s=l.size();for(var u=0;u<s;u++){var g=l.get(u);var y=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||g.getModCounter()>0;if(y){var m=t.exportVariable(g,null);p.add(m)}}i=p}}return i};e.QInARepository=function(){};e.QInARepository.prototype=new e.QInAComponentWithStructure;e.QInARepository.prototype._ff_c="QInARepository";e.QInARepository.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepository.prototype.newComponentCreationAllowed=function(t,r){return t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&r.getBooleanByKeyExt("UserDefinedComponent",false)};e.QInARepository.prototype.isMatching=function(t){var r=e.QInAComponentWithStructure.prototype.isMatching.call(this,t);if(r&&e.notNull(t)){var n=t;var i=this.getTagName();if(e.isNull(i)){if(n.getStringByKey("CType")===null){r=false}}else{r=n.containsKey(i)}}return r};e.QInARepository.prototype.extendCustom=function(t,r,n){var i=this.getComponentType();var o=e.QInAConverter.lookupComponentTypeInA(i);if(e.isNull(o)){throw e.XException.createRuntimeException("ctype not found")}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasElements()){n.putString("CType",o);var a=r.getChangedProperties();var l=r.getApplication()!==null&&r.getSession().hasFeature(e.FeatureToggleOlap.INA_REPOSITORY_DELTA);if(e.XCollectionUtils.hasElements(a)&&l){var p=e.PrFactory.createList();var s=a.getValuesAsReadOnlyListOfString();p.addAllStrings(s);n.put("ChangedProperties",p)}var u=r.getChangedPropertiesInDetail();if(e.XCollectionUtils.hasElements(u)&&l){var g=e.PrFactory.createStructure();var y=u.getKeysAsReadOnlyListOfString();for(var m=0;m<y.size();m++){var c=y.get(m);var A=g.putNewStructure(c);var S=u.getByKey(c);if(e.notNull(S)){var d=S.getKeysAsReadOnlyListOfString();for(var I=0;I<d.size();I++){var f=d.get(I);var N=S.getByKey(f);A.putString(f,e.isNull(N)?null:N.toString())}}}n.put("ChangedPropertiesInDetail",g)}if(l&&n.hasElements()){if(r.canMaterializeCompleteObject()){n.putBoolean("UserDefinedComponent",true)}}}return n};e.QInARepository.prototype.exportKeyReference=function(t,r,n){var i=false;var o=r;var a=o.getContext();var l=null;var p=null;if(e.notNull(a)){l=a.getQueryManager();p=a.getOlapEnv()}if(e.isNull(l)||l.isKeyRefSerializationEnabled()){if(e.notNull(p)&&p.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(r,null)!==null){e.QInARepoUtils.addKeyRefStructure(t,r,n,l);i=true}else if(e.isNull(p)&&r.getStorageName()!==null&&!e.XString.isEqual(r.getStorageName(),e.KeyRefConstants.MAIN_STORAGE)||r.isReleased()){e.QInARepoUtils.addKeyRefStructure(t,r,n,l);i=true}}return i};e.QInARepository.prototype.exportComponentWithStructure=function(e,t,r,n){return r};e.QInARepository.prototype.removeModelElementsNotInInA=function(t,r,n,i){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){var o=this.getNamesOfElementsInList(r);for(var a=0;a<i.size();a++){var l=i.get(a);if(!o.contains(l.getName())){n.removeElement(l)}}}};e.QInARepository.prototype.getNamesOfElementsInList=function(t){var r=t.size();var n=e.XListOfString.create();for(var i=0;i<r;i++){var o=t.getStructureAt(i);n.add(o.getStringByKey("Name"))}return n};e.QInARepoAttributeLegacy=function(){};e.QInARepoAttributeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAttributeLegacy.prototype._ff_c="QInARepoAttributeLegacy";e.QInARepoAttributeLegacy.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttributeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAttributeLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=r.getStringByKey("Name");var p=a.getAttributeByName(l);if(e.notNull(p)){var s=r.getListByKey("ResultSetFields");if(e.notNull(s)){var u=p.getResultSetFields();u.clear();var g=s.size();for(var y=0;y<g;y++){var m=p.getFieldByName(s.getStringAt(y));if(e.notNull(m)){u.add(m)}}}}return p};e.QInARepoAttributeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoAxesSettingsLegacy=function(){};e.QInARepoAxesSettingsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoAxesSettingsLegacy.prototype._ff_c="QInARepoAxesSettingsLegacy";e.QInARepoAxesSettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettingsLegacy.prototype.getTagName=function(){return"Axes"};e.QInARepoAxesSettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxesSettingsLegacy.prototype.importComponentWithList=function(t,r,n,i,o){if(e.notNull(r)){var a=o.getQueryModel();if(t.capabilities.supportsZeroSuppression()||t.capabilities.supportsNullZeroSuppression()){var l=e.AxisType.getAll();var p=l.size();for(var s=0;s<p;s++){var u=a.getAxisBase(l.get(s));if(e.notNull(u)){u.setSupportsZeroSuppression(true)}}}var g=r.size();for(var y=0;y<g;y++){t.importAxis(r.getStructureAt(y),null,o)}}return null};e.QInARepoAxesSettingsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoAxisLegacy=function(){};e.QInARepoAxisLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoAxisLegacy.prototype._ff_c="QInARepoAxisLegacy";e.QInARepoAxisLegacy.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxisLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoAxisLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=t.capabilities.supportsZeroSuppression();var l;var p=r.getStringByKey("Axis");if(e.isNull(p)){l=e.QInAConverter.lookupAxisTypeInt(r.getIntegerByKey("Type"))}else{l=e.QInAConverter.lookupAxisType(p)}var s=o.getQueryModel();var u=s.getAxisBase(l);if(e.notNull(u)){if(a){var g=r.getIntegerByKey("ZeroSuppressionType");var y=e.QInAConverter.lookupSuppressionType(g);u.setZeroSuppressionType(y);u.setDefaultZeroSuppression(y)}t.importTotals(r,u.getResultStructureControllerBase(),o)}return u};e.QInARepoAxisLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoConditionManagerLegacy=function(){};e.QInARepoConditionManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoConditionManagerLegacy.prototype._ff_c="QInARepoConditionManagerLegacy";e.QInARepoConditionManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManagerLegacy.prototype.getTagName=function(){return"Conditions"};e.QInARepoConditionManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionManagerLegacy.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(e.notNull(a)){a.clear();if(e.notNull(r)){var l=o.getQueryModel();var p=r.size();for(var s=0;s<p;s++){var u=r.getStructureAt(s);var g=t.importCondition(l,u,null);a.add(g)}}}return a};e.QInARepoConditionManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoConditionsConditionLegacy=function(){};e.QInARepoConditionsConditionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoConditionsConditionLegacy.prototype._ff_c="QInARepoConditionsConditionLegacy";e.QInARepoConditionsConditionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsConditionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoConditionsConditionLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.isNull(r)){return n}var a;var l=r.getStringByKey("Name");if(e.isNull(n)){if(t.getMode()===e.QModelFormat.INA_REPOSITORY){var p=r.getBooleanByKeyExt("IsBackendCondition",true);a=e.QCondition.create(o,i,l,p)}else{a=e.QCondition.create(o,i,l,true)}}else{a=n;a.setConditionName(l)}a.setActive(r.getBooleanByKey("Active"));a.setUsedState(r.getStringByKey("IsUsed"));a.setDescription(r.getStringByKey("Description"));var s=r.getStringByKey("OnDisabled");a.setApplyConditionAfterVisibilityFilter(r.getBooleanByKeyExt("AfterVisibilityFilter",false));if(e.notNull(s)){if(e.XString.isEqual(s,"Error")){a.setOnDisabledToWarning(false)}}var u=r.getStringByKey("EvaluateOnDimensions");var g=e.ConditionDimensionEvaluationType.lookupName(u);if(e.notNull(g)){a.setDimensionEvaluationType(g)}var y=o.getQueryModel();var m=r.getListByKey("EvaluateOnDimensionsList");var c;var A;if(!e.PrUtils.isListEmpty(m)&&e.notNull(y)){c=m.size();for(A=0;A<c;A++){var S=m.getStringAt(A);if(e.notNull(S)){var d=y.getDimensionByNameFromExistingMetadata(S);if(e.notNull(d)){a.addEvaluationDimension(d)}}}}var I=r.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(I)){var f=I.size();for(var N=0;N<f;N++){var v=I.getStructureAt(N);if(e.notNull(v)){a.addThreshold(t.importConditionThreshold(y,v,null,a))}}}a.setBreakGroup(r.getBooleanByKeyExt("BreakGroup",false));var T=r.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(T)&&e.notNull(y)){c=T.size();for(A=0;A<c;A++){var R=T.getStringAt(A);if(e.notNull(R)){var E=y.getDimensionByNameFromExistingMetadata(R);if(e.notNull(E)){a.addBreakGroupDimension(E)}}}}return a};e.QInARepoConditionsConditionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCurrencyTranslationManagerLegacy=function(){};e.QInARepoCurrencyTranslationManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCurrencyTranslationManagerLegacy.prototype._ff_c="QInARepoCurrencyTranslationManagerLegacy";e.QInARepoCurrencyTranslationManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getTagName=function(){return"CurrencyTranslation"};e.QInARepoCurrencyTranslationManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCurrencyTranslationManagerLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(a)&&e.notNull(r)){var l=a.getCurrencyTranslationDetails();if(e.notNull(l)){l.setCurrencyTranslationName(r.getStringByKey("Name"));l.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(r.getStringByKey("Operation")));l.setCurrencyTranslationTarget(r.getStringByKey("Target"))}}return a};e.QInARepoCurrencyTranslationManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoCustomHierarchyDefinitionLegacy=function(){};e.QInARepoCustomHierarchyDefinitionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoCustomHierarchyDefinitionLegacy.prototype._ff_c="QInARepoCustomHierarchyDefinitionLegacy";e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){if(!t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){return null}var a=e.PrUtils.getListProperty(r,"Dimensions");var l=e.PrUtils.getStructureElement(a,0);if(e.notNull(l)){var p=l.getStringByKey("System");var s=l.getStringByKey("DataSource");var u=l.getStringByKey("Name");var g=l.getStructureByKey("Hierarchy");if(e.notNull(g)&&e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var y=true;var m=t.getApplication();if(e.notNull(m)){var c=m.getSystemLandscape().getSystemDescription(p);y=e.isNull(c)?true:c.getSystemType().isTypeOf(e.SystemType.ABAP)}var A=e.QCustomHierarchyDefinition.createByData(p,s,u,g.getStringByKey("Description"),y);A.setName(g.getStringByKey("Name"));this.addHierarchyNodesFromStructure(A,g.getStructureByKey("Nodes"));return A}}return null};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.addHierarchyNodesFromStructure=function(t,r){var n=e.PrUtils.getListProperty(r,"NodeId");var i=e.PrUtils.getListProperty(r,"ParentId");var o=e.PrUtils.getListProperty(r,"NodeName");var a=e.PrUtils.getListProperty(r,"NodeType");var l=e.PrUtils.getListSize(n,0);if(e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(a)||i.size()!==l||o.size()!==l||a.size()!==l){return}var p=e.XSimpleMap.create();for(var s=0;s<l;s++){var u=n.getIntegerAt(s);var g=o.getStringAt(s);var y=a.getStringAt(s);var m=i.getIntegerAt(s);var c=m===-1?t:p.getByKey(e.XIntegerValue.create(m));if(e.notNull(c)){if(e.XString.isEqual(y,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(u),c.addTextNode(g))}else{c.addMemberNode(g)}}}e.XObjectExt.release(p)};e.QInARepoCustomHierarchyDefinitionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoDataCellsAllLegacy=function(){};e.QInARepoDataCellsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDataCellsAllLegacy.prototype._ff_c="QInARepoDataCellsAllLegacy";e.QInARepoDataCellsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAllLegacy.prototype.getTagName=function(){return"QueryDataCells"};e.QInARepoDataCellsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDataCellsAllLegacy.prototype.importComponentWithList=function(t,r,n,i,o){var a=o.getModelCapabilities();var l=o.getQueryModel();if(a.supportsDataCells()&&t.mode!==e.QModelFormat.INA_DATA_REINIT&&l.getQueryManager().getInitSettings().isRequestingDataCells()){var p=l.getQueryDataCellsBase();p.clear();if(e.notNull(r)){for(var s=0;s<r.size();s++){t.importDataCell(r.getStructureAt(s),l)}}}return null};e.QInARepoDataCellsAllLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDimensionsAllLegacy=function(){};e.QInARepoDimensionsAllLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsAllLegacy.prototype._ff_c="QInARepoDimensionsAllLegacy";e.QInARepoDimensionsAllLegacy.exportTechnicalDimension=function(t,r,n,i){if(!t.capabilities.supportsUniversalModel()){return}var o=r.getQueryCellManager();if(o.isEmpty()){return}var a=r.getDimensionByName("$$Cells$$");e.QInARepoDimensionsAllLegacy.exportDimension(t,a,n,i)};e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic=function(t,r,n,i,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!i.contains(g.getName())){continue}e.QInARepoDimensionsAllLegacy.exportDimension(t,g,n,o)}};e.QInARepoDimensionsAllLegacy.exportAxisDimensions=function(t,r,n,i){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);e.QInARepoDimensionsAllLegacy.exportDimension(t,l,n,i)}};e.QInARepoDimensionsAllLegacy.exportDimension=function(e,t,r,n){if(!n.contains(t.getName())){n.add(t.getName());r.add(e.exportDimension(t,null))}};e.QInARepoDimensionsAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsAllLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsAllLegacy.prototype.importComponentWithList=function(t,r,n,i,o){if(e.notNull(r)){var a=n;var l=a.getDimensionManagerBase();if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var p=a.getFreeAxis();p.addAll(l)}var s=r.size();var u=l.getDimensionReferences();for(var g=0;g<s;g++){var y=r.getStructureAt(g);var m=y.getStringByKey("Name");var c=y.getStringByKey("Axis");var A=null;if(y.containsKey("FieldMappings")){var S=t.importCalculatedDimension(y,a);l.addDimension(S);l.finalizeDimensionMetadataSetup(S)}else if(y.containsKey("CType")&&e.XComponentType.lookupComponentType(y.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var d=t.importFormulaCalculatedDimension(y,a,null);l.addDimension(d);l.finalizeDimensionMetadataSetup(d)}else{if(u.containsKey(m)){var I=e.AxisType.lookup(c);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||I===e.AxisType.COLUMNS||I===e.AxisType.ROWS){A=l.getDimensionByNameFromExistingMetadata(m)}}t.importDimension(y,a)}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(A)){A=l.getDimensionByNameInternal(m);if(e.isNull(A)){continue}}if(e.isNull(c)){c=y.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(c)).add(A)}}}return n};e.QInARepoDimensionsAllLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){var r=t.getQueryModel();var n=e.XHashSetOfString.create();var i=r.getFilter();if(i.isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(i.getDynamicFilter(),n);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(i.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_MEASURE_FILTER),n);e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(i.getLinkedFilter(e.CalculatedDimensionPrequeryBuilder.FAM_SECONDARY_MEASURE_FILTER),n)}var o=n.contains(t.getName());if(t.isMeasureStructure()){var a=r.getExceptionManager();var l=e.XCollectionUtils.hasElements(a);return o||l}return o};e.QInARepoDimensionsAllLegacy.prototype.exportComponentWithList=function(t,r,n){var i=e.PrFactory.createList();if(t.mode!==e.QModelFormat.INA_VALUE_HELP){var o=r;var a=o.getModelCapabilities();var l=e.XHashSetOfString.create();e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),i,l);e.QInARepoDimensionsAllLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),i,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var p=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,p)}e.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),i,p,l)}else if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var s=a.supportsCubeBlendingOutOfContext()&&o.isBlendingModel();var u=o.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var g=o.getAxis(e.AxisType.FREE);var y=g.size();var m=t.isAbap(o);for(var c=0;c<y;c++){var A=g.get(c);var S=A.getDimensionType();if(S===e.DimensionType.MEASURE_STRUCTURE||S===e.DimensionType.SECONDARY_STRUCTURE){var d=this.exportDimensionIfOnFreeAxis(A);if(d){e.QInARepoDimensionsAllLegacy.exportDimension(t,A,i,l)}}else if(S===e.DimensionType.ACCOUNT){var I=this.exportDimensionIfOnFreeAxis(A);if(I){e.QInARepoDimensionsAllLegacy.exportDimension(t,A,i,l)}}else if(S.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||s||(m||u)&&A.isHierarchyActive()){e.QInARepoDimensionsAllLegacy.exportDimension(t,A,i,l)}}e.QInARepoDimensionsAllLegacy.exportTechnicalDimension(t,o,i,l)}}return i};e.QInARepoDimensionsLegacy=function(){};e.QInARepoDimensionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDimensionsLegacy.prototype._ff_c="QInARepoDimensionsLegacy";e.QInARepoDimensionsLegacy.exportTechnicalDimension=function(t,r,n,i){if(!t.capabilities.supportsUniversalModel()){return}var o=r.getQueryCellManager();if(o.isEmpty()){return}var a=r.getDimensionByName("$$Cells$$");e.QInARepoDimensionsLegacy.exportDimension(t,a,n,i)};e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic=function(t,r,n,i,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!i.contains(g.getName())){continue}e.QInARepoDimensionsLegacy.exportDimension(t,g,n,o)}};e.QInARepoDimensionsLegacy.exportAxisDimensions=function(t,r,n,i){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);if(e.QInARepoDimensionsLegacy._isForRendering(t.getMode(),l)){continue}e.QInARepoDimensionsLegacy.exportDimension(t,l,n,i)}};e.QInARepoDimensionsLegacy._isForRendering=function(t,r){var n=r.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS};e.QInARepoDimensionsLegacy.exportDimension=function(e,t,r,n){if(!n.contains(t.getName())){n.add(t.getName());r.add(e.exportDimension(t,null))}};e.QInARepoDimensionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensionsLegacy.prototype.getTagName=function(){return"Dimensions"};e.QInARepoDimensionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDimensionsLegacy.prototype.importComponentWithList=function(t,r,n,i,o){if(e.isNull(r)){return n}var a=n;var l=a.getDimensionManagerBase();if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var p=a.getFreeAxis();p.addAll(l)}var s=r.size();var u=l.getDimensionReferences();for(var g=0;g<s;g++){var y=r.getStructureAt(g);var m=y.getStringByKey("Name");var c=y.getStringByKey("Axis");var A=null;if(y.containsKey("FieldMappings")){var S=t.importCalculatedDimension(y,a);l.addDimension(S);l.finalizeDimensionMetadataSetup(S)}else if(y.containsKey("CType")&&e.XComponentType.lookupComponentType(y.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var d=t.importFormulaCalculatedDimension(y,a,null);l.addDimension(d);l.finalizeDimensionMetadataSetup(d)}else{if(u.containsKey(m)){var I=e.AxisType.lookup(c);if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)||I===e.AxisType.COLUMNS||I===e.AxisType.ROWS){A=l.getDimensionByNameFromExistingMetadata(m)}}t.importDimension(y,a)}if(t.mode!==e.QModelFormat.INA_DATA_REINIT){if(e.isNull(A)){A=l.getDimensionByNameInternal(m);if(e.isNull(A)){continue}}if(e.isNull(c)){c=y.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(c)).add(A)}}return a};e.QInARepoDimensionsLegacy.prototype.exportDimensionIfOnFreeAxis=function(t){var r=t.getQueryModel();var n=e.XHashSetOfString.create();if(r.getFilter().isDynamicFilterInitialized()){e.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(r.getFilter().getDynamicFilter(),n)}var i=n.contains(t.getName());if(t.isMeasureStructure()){var o=r.getExceptionManager();var a=e.XCollectionUtils.hasElements(o);return i||a}return i};e.QInARepoDimensionsLegacy.prototype.exportComponentWithList=function(t,r,n){var i=e.PrFactory.createList();if(t.mode!==e.QModelFormat.INA_VALUE_HELP){var o=r;var a=o.getModelCapabilities();var l=e.XHashSetOfString.create();e.QInARepoDimensionsLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),i,l);e.QInARepoDimensionsLegacy.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),i,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var p=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,p)}e.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),i,p,l)}else if(t.mode.isTypeOf(e.QModelFormat.INA_DATA)){var s=a.supportsCubeBlendingOutOfContext()&&o.isBlendingModel();var u=o.getDataSource().getType()===e.MetaObjectType.PLANNING&&t.getSession().hasFeature(e.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var g=o.getAxis(e.AxisType.FREE);var y=g.size();var m=t.isAbap(o);for(var c=0;c<y;c++){var A=g.get(c);var S=A.getDimensionType();if(S===e.DimensionType.MEASURE_STRUCTURE||S===e.DimensionType.SECONDARY_STRUCTURE){var d=this.exportDimensionIfOnFreeAxis(A);if(d){e.QInARepoDimensionsLegacy.exportDimension(t,A,i,l)}}else if(S===e.DimensionType.ACCOUNT){var I=this.exportDimensionIfOnFreeAxis(A);if(I){e.QInARepoDimensionsLegacy.exportDimension(t,A,i,l)}}else if(S.isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||s||(m||u)&&A.isHierarchyActive()){e.QInARepoDimensionsLegacy.exportDimension(t,A,i,l)}}e.QInARepoDimensionsLegacy.exportTechnicalDimension(t,o,i,l)}}return i};e.QInARepoDrillManagerLegacy=function(){};e.QInARepoDrillManagerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoDrillManagerLegacy.prototype._ff_c="QInARepoDrillManagerLegacy";e.QInARepoDrillManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManagerLegacy.prototype.getTagName=function(){return"HierarchyNavigations"};e.QInARepoDrillManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillManagerLegacy.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;var l;a.removeAllContextDrillOperations();a.removeZoomDrillOperationsByDimension(null);if(e.notNull(r)){var p=-1;l=r.size();for(var s=0;s<l;s++){var u=r.getStructureAt(s);var g=u.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(g===-1){t.importDrillOperation(u,a,o)}else if(g>-1){var y=this.getZoomDrillPath(t,a,u,o);if(e.XCollectionUtils.hasElements(y)){if(g!==p){a.pushEmptyZoomDrillForDimension(y.get(y.size()-1).getDimension());p=g}var m=u.getIntegerByKeyExt("DrillOffset",0)>0;a.addZoomDrillPath(y,m)}}}}return n};e.QInARepoDrillManagerLegacy.prototype.getZoomDrillPath=function(t,r,n,i){var o=e.XList.create();var a=n.getListByKey("DrillContextMembers");if(e.notNull(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=t.importDrillPathElement(s,r,i);o.add(u)}}var g=n.getStringByKey("DrillState");var y=n.getStructureByKey("DrillMember");if(e.isNull(y)||e.isNull(g)){return null}var m=t.importDrillPathElement(y,r,i);o.add(m);return o};e.QInARepoDrillManagerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoDrillPathElementLegacy=function(){};e.QInARepoDrillPathElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoDrillPathElementLegacy.prototype._ff_c="QInARepoDrillPathElementLegacy";e.QInARepoDrillPathElementLegacy.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoDrillPathElementLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=a.getContext().getQueryModel();var p=r.getStringByKey("FieldName");var s=r.getStringByKey("DimensionName");var u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=l.getDimensionByNameFromExistingMetadata(s)}else{var g=l.getFieldByNameOrAlias(p);if(e.isNull(g)){u=l.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){g=u.getKeyField();p=g.getName()}}else{u=g.getDimension()}}var y=e.QDrillPathElement._create(o);y.setDimension(u);var m=r.getStringByKey("Member");y.setName(m);y.setFieldName(p);return y};e.QInARepoDrillPathElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoExceptionsLegacy=function(){};e.QInARepoExceptionsLegacy.prototype=new e.QInAComponentWithList;e.QInARepoExceptionsLegacy.prototype._ff_c="QInARepoExceptionsLegacy";e.QInARepoExceptionsLegacy.importEvaluates=function(t,r,n,i){var o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}var a=o.size();var l=r.getQueryModel();for(var p=0;p<a;p++){var s=o.getStructureAt(p);var u=s.getStringByKey("Name");var g=l.getFieldByName(u);if(e.isNull(g)){var y=l.getDimensionByNameFromExistingMetadata(u);if(e.notNull(y)){g=y.getKeyField()}}if(e.isNull(g)){g=r.getKeyFieldValue().getField()}if(e.isNull(g)){i.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",u,"'!"));return}if(!s.containsKey("Low")){i.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",u));return}var m=g.getValueType();var c=e.QInAValueUtils.importValueByType(i,s,"Low",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",m.getName()));return}var A=n._addNewEvaluateWithFieldInternal(g,c);if(s.containsKey("High")){var S=e.QInAValueUtils.importValueByType(i,s,"High",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",m.getName()));return}A.setHighValue(S)}A.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(s.getStringByKey("Evaluate")));var d=s.getStringByKey("Comparison");var I=e.QInAConverter.lookupComparison(d);if(e.isNull(I)){i.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",d,"'"));return}A.setOperator(I)}};e.QInARepoExceptionsLegacy.importThresholds=function(t,r){var n=t.getListByKey("Threshold");if(e.notNull(n)){var i=n.size();for(var o=0;o<i;o++){var a=n.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(g);if(g.getNumberOfParameters()===2){if(s){var y=a.getDoubleByKey("High");p.setHighValue(y)}else{var m=a.getStringByKey("High");p.setHigh(m)}}e.QInARepoExceptionsLegacy.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoExceptionsLegacy.importSettings=function(t,r){if(e.isNull(t)){return}var n=t.size();for(var i=0;i<n;i++){var o=t.getStructureAt(i);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}};e.QInARepoExceptionsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptionsLegacy.prototype.getTagName=function(){return"Exceptions"};e.QInARepoExceptionsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoExceptionsLegacy.prototype.isVersion1=function(t,r){var n=r.getOlapComponentType();return!t.capabilities.supportsExceptionsV2()&&n.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptionsLegacy.prototype.isVersion2=function(t,r){var n=r.getOlapComponentType();return t.capabilities.supportsExceptionsV2()&&n.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoExceptionsLegacy.prototype.importComponentWithList=function(e,t,r,n,i){var o=r.getQueryModel().getExceptionManager();o.queueEventing();if(this.isVersion1(e,r)){o.removeAllExceptionsOfMeasure(r);this.importFormatV1(e,t,r,o)}else if(this.isVersion2(e,r)){o.clear();this.importFormatV2(e,t,r,o)}o.resumeEventing();return o};e.QInARepoExceptionsLegacy.prototype.importFormatV1=function(t,r,n,i){if(e.notNull(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=this.importException(t,n,i,l);p.setMeasure(n);p.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}};e.QInARepoExceptionsLegacy.prototype.importException=function(t,r,n,i){var o=i.getStringByKey("Name");var a=i.getStringByKey("Text");var l=e.QExceptionEvalType.lookupExceptionEvalType(i.getStringByKey("EvaluateDefault"));var p=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(i.getStringByKey("ApplySettingsToHeader"));var s=i.getBooleanByKeyExt("Active",true);var u=i.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);var g=n._addNewExceptionInternal(o,a,l,p,s,!u);g.queueEventing();e.QInARepoExceptionsLegacy.importEvaluates(i,r,g,t);e.QInARepoExceptionsLegacy.importThresholds(i,g);g.resumeEventing();return g};e.QInARepoExceptionsLegacy.prototype.importFormatV2=function(t,r,n,i){if(e.isNull(r)){return}var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=l.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(p)){var s=this.importContextItem(p.getStructureAt(0),n,i,null,t,l);if(e.notNull(s)){if(p.size()>1){this.importContextItem(p.getStructureAt(1),n,i,s,t,l)}s.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}}};e.QInARepoExceptionsLegacy.prototype.importContextItem=function(t,r,n,i,o,a){var l=i;var p=r.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){var s=this.getMemberFromContextItem(t,p);if(e.notNull(s)){if(e.isNull(l)){l=this.importException(o,s,n,a)}if(p.isMeasureStructure()){l.setMeasure(s)}else{l.setStructure(s)}l.displayOnOtherMember(s,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));l.setEvaluateAllMembers(p,t.getBooleanByKeyExt("EvaluateAllMembers",false))}}return l};e.QInARepoExceptionsLegacy.prototype.getMemberFromContextItem=function(t,r){var n=r.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(n)){var i=t.getBooleanByKeyExt("EvaluateAllMembers",false);var o=r.getAllStructureMembers();if(i&&!o.isEmpty()){return o.get(0)}}return n};e.QInARepoExceptionsLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoFilterAlgebraLegacy=function(){};e.QInARepoFilterAlgebraLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAlgebraLegacy.prototype._ff_c="QInARepoFilterAlgebraLegacy";e.QInARepoFilterAlgebraLegacy.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebraLegacy.prototype.getTagName=function(){return"Operator"};e.QInARepoFilterAlgebraLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAlgebraLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=r.getListByKey("SubSelections");if(e.notNull(l)){var p=r.getStringByKey("Code");var s;if(e.XString.isEqual(p,"And")){s=e.QFilterAnd._create(o,a)}else if(e.XString.isEqual(p,"Not")){s=e.QFilterNot._create(o,a)}else{s=e.QFilterOr._create(o,a)}var u=l.size();for(var g=0;g<u;g++){var y=l.getStructureAt(g);var m=t.importFilterElement(y,null,a,o);if(e.notNull(m)){s.add(m)}}if(s.hasElements()){return s}}return null};e.QInARepoFilterAlgebraLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterAllLegacy=function(){};e.QInARepoFilterAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterAllLegacy.prototype._ff_c="QInARepoFilterAllLegacy";e.QInARepoFilterAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterAllLegacy.prototype.importComponentWithStructure=function(e,t,r,n,i){var o=r;e.importFixedFilter(t,o,i);e.importDynamicFilter(t,o,i);e.importVisibilityFilter(t,o,i);return o};e.QInARepoFilterAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterCellValueOperandLegacy=function(){};e.QInARepoFilterCellValueOperandLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterCellValueOperandLegacy.prototype._ff_c="QInARepoFilterCellValueOperandLegacy";e.QInARepoFilterCellValueOperandLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperandLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterCellValueOperandLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Low");if(e.XString.isEqual(a,"")){a=null}var l=r.getStringByKey("High");if(e.XString.isEqual(l,"")){l=null}var p=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"));var s=e.QFilterCellValueOperand._create(o,null,a,l,p);s.setIsExcluding(r.getBooleanByKey("IsExcluding"));return s};e.QInARepoFilterCellValueOperandLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterElementLegacy=function(){};e.QInARepoFilterElementLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterElementLegacy.prototype._ff_c="QInARepoFilterElementLegacy";e.QInARepoFilterElementLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElementLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterElementLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=n;if(r.containsKey("Operator")){l=t.importFilterAlgebra(a,r,o)}else{var p=r.getStructureByKey("SetOperand");if(e.isNull(p)){if(r.containsKey("GeometryOperand")){l=t.importFilterGeo(a,r,o)}}else{l=t.importCartesianList(p,l,a,o)}}return l};e.QInARepoFilterElementLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterExpressionLegacy=function(){};e.QInARepoFilterExpressionLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterExpressionLegacy.prototype._ff_c="QInARepoFilterExpressionLegacy";e.QInARepoFilterExpressionLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpressionLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterExpressionLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.isNull(a)){a=e.QFactory.createFilterExpression(o,i)}var l=0;var p=null;if(e.notNull(r)){p=r.getStructureByKey("Selection");if(e.isNull(p)){p=r.getStructureByKey("SelectionRepo");l=1}}a.setCartesianProduct(null);a.setComplexRoot(null);if(e.notNull(p)){var s=t.importFilterElement(p,null,a,o);if(e.notNull(s)){if(l>=1){a.setComplexRoot(s)}else{var u=e.QFilterUtil.convertComplexFilterToCartesian(s);if(e.notNull(u)){a.setCartesianProduct(u)}else{a.setComplexRoot(s)}}}}if(a.getModelCapabilities().supportsCellValueOperand()){a.setIsSuppressingNulls(false);a.clearCellValueFilter();if(e.notNull(r)){if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){a.setIsSuppressingNulls(r.getBooleanByKeyExt("IsSuppressingNulls",false))}if(e.notNull(p)){var g=p.getStructureByKey("CellValueOperand");if(e.isNull(g)){var y=p.getStructureByKey("Operator");if(e.notNull(y)){var m=y.getListByKey("SubSelections");if(m.size()===2){var c=m.getStructureAt(1);g=c.getStructureByKey("CellValueOperand")}}}if(e.notNull(g)){var A=g.getListByKey("Elements");if(e.notNull(A)){var S=e.QFilterCellValueOperand.createForNullSuppression(o,null);var d=A.size();if(d>0){var I=A.getStructureAt(0);var f=t.importFilterCellValueOperand(I,o);var N=0;if(f.isEqualTo(S)){a.setIsSuppressingNulls(true);N=1}a.clearCellValueFilter();for(var v=N;v<d;v++){var T=A.getStructureAt(v);var R=t.importFilterCellValueOperand(T,o);a.addCellValueFilter(R)}}}}}}}return a};e.QInARepoFilterExpressionLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterExpressionLegacy.prototype.exportComponent=e.noSupport;e.QInARepoFilterFixedLegacy=function(){};e.QInARepoFilterFixedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterFixedLegacy.prototype._ff_c="QInARepoFilterFixedLegacy";e.QInARepoFilterFixedLegacy.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixedLegacy.prototype.getTagName=function(){return"FixedFilter"};e.QInARepoFilterFixedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterFixedLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.isNull(r)){return null}var a=i;var l=t.importFilterExpression(null,r,a,o);if(e.notNull(a)&&e.notNull(l)){a.setFixedFilter(l)}return l};e.QInARepoFilterFixedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterGeoLegacy=function(){};e.QInARepoFilterGeoLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterGeoLegacy.prototype._ff_c="QInARepoFilterGeoLegacy";e.QInARepoFilterGeoLegacy.tryCreateGeometry=function(t){var r=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(r)){r=e.XStringValue.create(t)}return r};e.QInARepoFilterGeoLegacy.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeoLegacy.prototype.getTagName=function(){return"GeometryOperand"};e.QInARepoFilterGeoLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterGeoLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=o.getFieldAccessorSingle();var p=r.getStringByKey("Comparison");var s=r.getStringByKey("FieldName");var u=r.getStringByKey("Value1");if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var g=e.QInAConverter.lookupComparison(p);if(e.isNull(g)){return null}if(!g.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){return null}var y=l.getFieldByName(s);if(e.isNull(y)){return null}var m=e.QFactory.createFilterOperationWithOperator(a,y,g);var c=e.QInARepoFilterGeoLegacy.tryCreateGeometry(u);m.getLow().setValue(c);var A=r.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(A)){var S=e.QInARepoFilterGeoLegacy.tryCreateGeometry(A);m.getHigh().setValue(S)}var d=r.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var I=e.QInARepoFilterGeoLegacy.tryCreateGeometry(d);m.getThird().setValue(I)}return m}return null};e.QInARepoFilterGeoLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterManagerLegacy=function(){};e.QInARepoFilterManagerLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterManagerLegacy.prototype._ff_c="QInARepoFilterManagerLegacy";e.QInARepoFilterManagerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManagerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterManagerLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.isNull(a)){a=o.getOlapEnv().getFilterManager()}var l=r.getStructureByKey("OlapFilterManager");var p=l.getStructureByKey("OlapFilters");var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=a.getFilterByName(u);t.importFilterExpression(g,p.getStructureByKey(u),a,a.getContext())}return a};e.QInARepoFilterManagerLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoFilterOperationLegacy=function(){};e.QInARepoFilterOperationLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoFilterOperationLegacy.prototype._ff_c="QInARepoFilterOperationLegacy";e.QInARepoFilterOperationLegacy.importValue=function(t,r,n,i,o,a,l,p,s){var u=a.getStringByKey(p);if(e.XString.isEqual("Variable",u)){i.setFilterValueType(e.XValueType.VARIABLE);var g=a.getStringByKey(l);var y=r.getVariables().getByKey(g);if(e.notNull(y)){i.setVariableValue(y)}}else{var m=e.QInAConverter.lookupValueType(a.getStringByKeyExt("LowIs",null));if(m===e.XValueType.CURRENT_MEMBER||m===e.XValueType.VARIABLE){i.setFilterValueType(m)}if(e.notNull(s)){var c=a.getListByKey(s);if(e.notNull(c)){var A=i.getMemberNavigations();var S=c.size();for(var d=0;d<S;d++){A.add(e.QInARepoFilterOperationLegacy.importMemberNavigation(c.getStructureAt(d)))}}}e.QInAValueUtils.importValue(t,i,a,l,o,n)}};e.QInARepoFilterOperationLegacy.importMemberNavigation=function(t){var r=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){var n=t.getListByKey("Parameters");var i=n.size();for(var o=0;o<i;o++){var a=n.getStructureAt(o);if(a.containsKey("Navigations")){var l=a.getListByKey("Navigations");var p=l.size();for(var s=0;s<p;s++){r.addNavigation(e.QInARepoFilterOperationLegacy.importMemberNavigation(l.getStructureAt(s)))}}else{if(a.containsKey("Level")){var u=a.getByKey("Level");if(u.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(u.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(u.getString()))}}else if(a.containsKey("Member")){r.addParameter(e.QFactory.createNavigationParameterWithMemberName(a.getStringByKey("Member")))}else if(a.containsKey("NoValuesAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(a.getStringByKey("NoValuesAboveLevel")))}else if(a.containsKey("ErrorAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(a.getStringByKey("ErrorAboveLevel")))}else if(a.containsKey("Shift")){var g=a.getStructureByKey("Shift");r.addParameter(e.QFactory.createNavigationParameterWithShift(g.getStringByKey("Level"),g.getIntegerByKey("Constant")))}else if(a.containsKey("Range")){var y=a.getStructureByKey("Range");r.addParameter(e.QFactory.createNavigationParameterWithRange(y.getStringByKey("Level"),y.getIntegerByKey("OffsetLow"),y.getIntegerByKey("OffsetHigh")))}else{var m=a.getByKey("Constant");if(m.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(m.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithStringConstant(m.getString()))}}}}}return r};e.QInARepoFilterOperationLegacy.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperationLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoFilterOperationLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKeyExt("Comparison","=");var l=e.QInAConverter.lookupComparison(a);if(e.isNull(l)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",a));return null}var p=i;var s=p.getFilterExpression();var u=p.getField();var g=e.QFactory.createFilterOperationWithOperator(s,u,l);var y=u.getValueType();var m=l.isTypeOf(e.ComparisonOperator.LIKE)||l.isTypeOf(e.ComparisonOperator.MATCH)||l.isTypeOf(e.ComparisonOperator.NOT_MATCH);if(m){y=e.XValueType.STRING}if(r.getBooleanByKeyExt("IsExcluding",false)){g.setSetSign(e.SetSign.EXCLUDING)}else{g.setSetSign(e.SetSign.INCLUDING)}g.resetDepth();var c=r.getIntegerByKeyExt("Depth",-1);if(c!==-1){g.setDepth(c)}g.resetLevelOffset();var A=r.getIntegerByKeyExt("LevelOffset",-1);if(A!==-1){g.setLevelOffset(A)}var S=r.getStructureByKey("Hierarchy");if(e.notNull(S)){var d=S.getStringByKey("Name");var I=null;var f=null;var N=g.getQueryModel();if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&e.notNull(N)&&N.getSystemType().isTypeOf(e.SystemType.ABAP)){var v=S.getStringByKey("DueDate");if(e.notNull(v)){I=e.XDate.createDateFromSAPFormat(v)}f=S.getStringByKey("Version")}g.setHierarchyInfo(d,I,f)}if(t.capabilities.supportsConvertToFlatFilter()){g.setConvertToFlatFilter(r.getBooleanByKeyExt("ConvertToFlatSelection",false))}var T=p.getSupplementFieldNames();var R=o.getVariableContainer();var E=l.getNumberOfParameters();if(E>=1){var C=g.getLow();e.QInARepoFilterOperationLegacy.importValue(t,R,u,C,y,r,"Low","LowIs","LowNavigations");e.QInAValueUtils.importSupplements(t,C,r,"LowSupplements",T)}if(E>=2){var Q=g.getHigh();e.QInARepoFilterOperationLegacy.importValue(t,R,u,Q,y,r,"High","HighIs",null);e.QInAValueUtils.importSupplements(t,Q,r,"HighSupplements",T)}if(E>=3){var M=g.getThird();e.QInARepoFilterOperationLegacy.importValue(t,R,u,M,y,r,"Value3","Value3Is",null);e.QInAValueUtils.importSupplements(t,M,r,null,T)}return g};e.QInARepoFilterOperationLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoHierarchyLegacy=function(){};e.QInARepoHierarchyLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoHierarchyLegacy.prototype._ff_c="QInARepoHierarchyLegacy";e.QInARepoHierarchyLegacy.appendItemsToCatalogResult=function(t,r,n){var i=e.PrUtils.getListSize(r,0);for(var o=0;o<i;o++){var a=e.PrUtils.getStructureElement(r,o);var l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(n);var p;if(a.hasStringByKey("Name")){p=a.getStringByKey("Name")}else{p=a.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(p)||t.containsHierarchy(p)){continue}l.setHierarchyName(p);var s=e.PrUtils.getStringProperty(a,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}var u=e.PrUtils.getStringProperty(a,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}var g=e.PrUtils.getStringProperty(a,"Structure");if(e.notNull(g)){l.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var y=e.PrUtils.getBooleanValueProperty(a,"IsModeled",false);l.setIsModeled(y);var m=e.PrUtils.getStringProperty(a,"DateTo");if(e.notNull(m)){var c=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(c)){l.setDateTo(e.XDate.createDateFromIsoFormat(c))}}var A=e.PrUtils.getListProperty(a,"Levels");if(e.notNull(A)){l.setSupportsHierarchyLevels(true);var S=e.XList.create();var d=e.PrUtils.getListSize(A,0);for(var I=0;I<d;I++){var f=e.PrUtils.getStructureElement(A,I);if(e.isNull(f)){continue}var N=e.HierarchyCatalogLevel.createCatalogLevel();var v=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(v>-1){N.setLevel(v)}var T=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(T)){N.setLevelName(T.getString())}var R=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(R)){N.setLevelDescription(R.getString())}var E=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(E)){N.setLevelUniqueName(E.getString())}var C=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(C)){N.setLevelDimensionName(C.getString())}var Q=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(Q)){N.setLevelType(e.QInAConverter.lookupHierarchyLevelType(Q.getInteger()))}S.add(N)}l.setHierarchyLevels(S)}var M=a.getStringByKey("RestNode");if(e.notNull(M)){l.setRestNode(M)}var D=a.getStringByKey("VirtualRootNode");if(e.notNull(D)){l.setVirtualRootNode(D)}t.addItem(l)}return t};e.QInARepoHierarchyLegacy.importLeveledHierarchy=function(t,r,n,i){var o=e.QLeveledHierarchy.create(r,n,i.getStringByKey(i.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(i.getStringByKey("UniqueName"));if(i.getStringByKey("DimensionName")===null){o.setDimensionName(n.getName())}else{o.setDimensionName(i.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(i.getStringByKey("Structure")));o.setIsModeled(i.getBooleanByKeyExt("IsModeled",false));var a=i.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(a)){o.setDateTo(e.QInARepoUtils.createDate(a))}o.setHierarchyDescription(i.getStringByKey("Description"));var l=i.getListByKey("Levels");if(!e.PrUtils.isListEmpty(l)){e.QInARepoHierarchyLegacy.importLevels(o,l)}return o};e.QInARepoHierarchyLegacy.importLevels=function(t,r){var n=r.size();for(var i=0;i<n;i++){var o=r.getStructureAt(i);var a=e.QHierarchyLevel.create(t,o.getStringByKey("LevelUniqueName"),o.getIntegerByKey("Level"));a.setLevelName(o.getStringByKey("LevelName"));a.setLevelText(o.getStringByKey("LevelCaption"));a.setLevelDimensionName(o.getStringByKey("DimensionName"));a.setLevelType(e.QInAConverter.lookupHierarchyLevelType(o.getIntegerByKey("LevelType")));a.setNavigationAttribute(o.getStringByKey("NavAttr"));t.getAllLevelBase().add(a)}};e.QInARepoHierarchyLegacy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchyLegacy.prototype.getTagName=function(){return"Hierarchy"};e.QInARepoHierarchyLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoHierarchyLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(a.supportsHierarchy()){var l=a.isDisplayHierarchyFixInFilter();a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(r)){a.setHierarchy(null)}else{var p;if(r.hasStringByKey("Name")){p=r.getStringByKey("Name")}else{p=r.getStringByKey("HierarchyName")}var s=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)){if(a.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(r,a);this.importLeveledHierarchyToMetadata(t,r,o,a)}if(r.getBooleanByKey("IsTransient")){s=e.QHierarchy.createCustomHierarchy(a.getContext(),a,p,r.getStringByKey("Description"))}else{s=e.QHierarchy.create(a.getContext(),a,p)}s.setHierarchyVersion(r.getStringByKey("Version"));var u=r.getStringByKey("DueDate");var g=r.getStringByKey("DueDateIs");var y=e.notNull(g)&&e.XString.isEqual("Variable",g);a.setUseHierarchyDueDateVariable(y);if(y){if(e.XStringUtils.isNullOrEmpty(u)){a.setHierarchyDueDateVariableName(null)}else{a.setHierarchyDueDateVariableName(u)}}else{s.setHierarchyDueDate(e.QInARepoUtils.createDate(u))}var m=r.getStringByKey("DateTo");s.setDateTo(e.QInARepoUtils.createDate(m));var c=r.getStringByKey("0DATEFROM");s.setDateFrom(e.QInARepoUtils.createDate(c));var A=r.getStructureByKey("Metadata");if(e.notNull(A)){m=A.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(m)){s.setDateTo(e.QInARepoUtils.createDate(m))}c=A.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(c)){s.setDateFrom(e.QInARepoUtils.createDate(c))}}a.setHierarchy(s);var S=r.getBooleanByKeyExt("HierarchyActive",true);a.setHierarchyActive(S);a.setSelectorHierarchyActive(S)}var d=r.getListByKey("StickyDimensionMembers");a.clearStickyMembers();if(e.XCollectionUtils.hasElements(d)){for(var I=0;I<d.size();I++){a.addStickyMember(d.getStringAt(I))}}var f=r.getIntegerByKeyExt("InitialDrillOffset",0);var N=r.getIntegerByKeyExt("InitialDrillLevel",0);var v=a.getModelCapabilities();if(v.supportsVisibilityFilter()||!t.mode.isTypeOf(e.QModelFormat.INA_DATA)){a.setInitialDrillLevel(N);a.setSelectorInitialDrillLevel(N)}else{if(N===-1){a.setInitialDrillLevel(N);a.setSelectorInitialDrillLevel(N)}else if(f===-1){a.setInitialDrillLevel(0);a.setSelectorInitialDrillLevel(0)}else{a.setInitialDrillLevel(N+f);a.setSelectorInitialDrillLevel(N+f)}}a.setInitialDrillOffset(f);a.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var T=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){var R=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");T=e.QInAConverter.lookupLowerLevelNodeAlignment(R);if(r.containsKey("ExpandBottomUp")){var E=r.getBooleanByKeyExt("ExpandBottomUp",false);if(E){T=e.Alignment.CHILDREN_ABOVE_PARENT}}}a.setLowerLevelNodeAlignment(T);var C=r.getBooleanByKeyExt("NodeCondensation",false);a.setHasNodeCondensation(C);var Q=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var M=e.QInAConverter.lookupResultSetVisibility(Q);a.setMemberOfPostedNodeVisibility(M);a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l);return s}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l)}return null};e.QInARepoHierarchyLegacy.prototype.importHierarchyAsCatalogItem=function(t,r){var n=e.PrFactory.createList();n.add(t);var i=r.getHierarchies();if(e.isNull(i)){i=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(i,n,r.getName());r.getHierarchyManagerBase().setHierarchies(i)}else{e.QInARepoHierarchyLegacy.appendItemsToCatalogResult(i,n,r.getName())}};e.QInARepoHierarchyLegacy.prototype.importLeveledHierarchyToMetadata=function(t,r,n,i){var o=i.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(r.getListByKey("Levels"))){var a=o.getMetadataModelBase();var l=a.getLeveledHierarchiesBase();var p=e.QInARepoHierarchyLegacy.importLeveledHierarchy(t,n,i,r);if(!l.contains(p)){l.add(p)}}};e.QInARepoHierarchyLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMemberRestrictedLegacy=function(){};e.QInARepoMemberRestrictedLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMemberRestrictedLegacy.prototype._ff_c="QInARepoMemberRestrictedLegacy";e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip=function(t,r){var n=r.getChildren();while(n.hasNext()){var i=n.next();if(i.getOlapComponentType()===e.FilterComponentType.OPERATION){var o=i;var a=o.getDimensionName();if(e.XString.isEqual(t,a)){return o.getLow().getValue().toString()}}var l=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(t,i);if(e.notNull(l)){return l}}return null};e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip=function(t,r){if(r.getAccountType()!==null){return r.getName()}var n=r.getDimensionContext(t.getQueryManager());var i=r.getFilter();var o=n.getName();if(e.notNull(o)){if(i.isAll()){o=e.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(o,i.getFilterRootElement())}var a=n.getStructureMemberByAliasOrMember(o);if(e.notNull(a)&&a.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&a!==r){return e.QInARepoMemberRestrictedLegacy.getMemberForSignFlip(t,a)}}return o};e.QInARepoMemberRestrictedLegacy.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestrictedLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMemberRestrictedLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a;if(e.isNull(n)){var l=i;var p=this.getNameForImport(r,l);var s=this.getText(r,l);if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()&&l.getLoadedStructureMember(p)!==null){a=l.getLoadedStructureMember(p)}else{a=l.addNewRestrictedMeasure(p,s)}}else{a=n}var u=r.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(u)){a.setAggregationDimensionName(u)}var g=r;if(a.getModelCapabilities().supportsCustomMeasuresInMetadata()&&t.getMode()===e.QModelFormat.INA_DATA){g=r.getStructureByKey("[Measures].[MemberDetails]")}if(a.getMemberType()===e.MemberType.RESTRICTED_MEASURE){t.importFilterExpression(a.getFilter(),g,a,o)}t.importExceptions(g,a);return a};e.QInARepoMemberRestrictedLegacy.prototype.getNameForImport=function(t,r){var n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(r)){var i=r.getKeyField();var o=i.getName();return t.getStringByKey(o)}return n};e.QInARepoMemberRestrictedLegacy.prototype.getText=function(t,r){var n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(r)){var i=r.getTextField();if(e.notNull(i)){var o=i.getName();return t.getStringByKey(o)}}return n};e.QInARepoMemberRestrictedLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoMembersAllLegacy=function(){};e.QInARepoMembersAllLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoMembersAllLegacy.prototype._ff_c="QInARepoMembersAllLegacy";e.QInARepoMembersAllLegacy.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAllLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoMembersAllLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(a.supportsCustomMembers()){a.removeCustomMembers()}var l=r.getListByKey("MembersRepo");if(e.isNull(l)){l=r.getListByKey("Members");if(e.isNull(l)){return null}}var p=a.getStructureLayout();if(e.notNull(p)){p.clear();var s=l.size();for(var u=0;u<s;u++){var g=l.getStructureAt(u);var y=t.importStructureMember(a,g,o);if(e.notNull(y)){var m=a.getLoadedStructureMember(y.getName());if(e.isNull(m)){a.addMeasure(y)}else{if(m!==y){throw e.XException.createIllegalStateException("Internal error: New member with same name not allowed")}p.removeElement(m);p.add(m)}}}}return a};e.QInARepoMembersAllLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQueryLegacy=function(){};e.QInARepoQueryLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQueryLegacy.prototype._ff_c="QInARepoQueryLegacy";e.QInARepoQueryLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQueryLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQueryLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r;var p=l.getListByKey("Queries");if(e.notNull(p)){l=p.getStructureAt(p.size()-1)}var s=l.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){l=s.getStructureAt(s.size()-1)}if(e.notNull(l)&&l.containsKey("Analytics")){l=l.getStructureByKey("Analytics");if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}}if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}if(e.notNull(l)){var u=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING&&t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);var g=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY);if(g&&l.containsKey("ModellerDefinition")){l=l.getStructureByKey("ModellerDefinition");var y=a.isEventingStopped();if(y){a.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES)}t.importModellerDimensions(l,a,a);t.importModellerDefinedVariables(l,a.getVariableManagerBase(),a);t.importModellerCurrencyTranslation(l,a.getCurrencyTranslationManagerBase(),a);t.importModellerMetadataProperties(l,a,a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);if(y){a.finishModelerEventing()}return a}t.importDimensions(l,a,a);if(!u){t.importFilter(l,a.getFilterBase(),a);t.importExceptions(l,a);t.importQueryCells(l,a.getQueryCellManager(),a);t.importUniversalDisplayHierarchies(l,a.getUniversalDisplayHierarchiesBase(),a)}t.importCurrencyTranslationManager(l,a.getCurrencyTranslationManager(),a);t.importSortingManager(l,a.getSortingManagerBase(),a);t.importDrillManager(l,a.getDrillManager(),a);t.importVariableManager(l,a.getVariableManagerBase(),a);t.importQuerySettings(l,a);t.importDataCells(l,a);t.importConditionManager(l,a.getConditionManagerBase(),a);if(g){t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);this.importPaging(t,l,a);e.QInARepoOptions.importSuppressKeyfigureCalculation(l,a.getQueryManager());var m=a.getResultStructureController();t.importComponent(null,l,m,a,a);var c=a.getQueryManager();if(e.notNull(c)){c.setResultSetPersistanceTargetTable(r.getStringByKey("ResultSetPersistanceTable"));c.setResultSetPersistanceTargetSchema(r.getStringByKey("ResultSetPersistanceSchema"));c.setResultSetPersistenceIdentifier(r.getStringByKey("ResultSetPersistanceIdentifier"))}var A=l.getListByKey("PreQueries");if(e.notNull(A)){var S=null;var d=l.getStructureByKey("DataSource");if(e.notNull(d)){S=d.getStringByKey("System")}this.importPreQueries(t,a,A,S)}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA)&&a.isBlendingModel()){this.importBlendingSources(t,r,a)}}}return a};e.QInARepoQueryLegacy.prototype.importBlendingSources=function(t,r,n){var i=n.getBlendingSources();if(!e.XCollectionUtils.hasElements(i)){return}var o=e.PrUtils.getStructureProperty(r,"DataSource");var a=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(a)){return}for(var l=0;l<i.size();l++){var p=e.PrUtils.getStructureElement(a,l);var s=e.PrUtils.getStructureProperty(p,"DefiningContext");if(e.notNull(s)){var u=i.get(l).getQueryModel();u.deserializeFromElementExt(t.mode,s)}}};e.QInARepoQueryLegacy.prototype.importPaging=function(t,r,n){var i=r.getStructureByKey("SubSetDescription");var o=n.getQueryManager();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(i)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!a){return}e.QInARepoOptions.importPaging(r,o)};e.QInARepoQueryLegacy.prototype.getInactiveCapabilities=function(t){var r=e.XHashMapByString.create();var n=e.FeatureToggleOlap.getAllFeatureToggles();var i=n.getKeysAsIteratorOfString();while(i.hasNext()){r.put(i.next(),e.XBooleanValue.create(false))}var o=t.getSession().getFeatureToggles();if(e.notNull(o)){var a=o.getKeysAsIteratorOfString();while(a.hasNext()){r.put(a.next(),e.XBooleanValue.create(true))}}return r};e.QInARepoQueryLegacy.prototype.importPreQueries=function(t,r,n,i){var o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}var a=e.XStringBuffer.create();var l=this.getInactiveCapabilities(r);var p=n.size();for(var s=0;s<p;s++){var u=n.getStructureAt(s);var g=u.getStructureByKey("Runtime");if(e.isNull(g)){g=u}var y=g.getStructureByKey("DataSource");a.clear();a.append(y.getStringByKey("Type")).append(":[");a.append(y.getStringByKey("SchemaName"));a.append("][");a.append(y.getStringByKey("PackageName"));a.append("][");a.append(y.getStringByKey("ObjectName")).append("]");var m=e.XCommandFactory.create(r.getApplication());var c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);var A=y.getStringByKey("System");if(t.mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(A,i)){A=r.getDataSource().getSystemName()}c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,A);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,a.toString());var S=c.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(S);e.XObjectExt.release(c);if(S.isValid()){var d=S.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(u,d);var I=u.getStringByKey("ObjectName");var f=r.getPreQueryByName(I);if(e.isNull(f)){r.addPreQueryWithName(d,I)}}}t.mode=o};e.QInARepoQueryLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQuerySettingsLegacy=function(){};e.QInARepoQuerySettingsLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoQuerySettingsLegacy.prototype._ff_c="QInARepoQuerySettingsLegacy";e.QInARepoQuerySettingsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettingsLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoQuerySettingsLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=e.PrUtils.getStringProperty(r,"Name");var l=o.getQueryModel();if(e.notNull(a)){l.setDefinitionName(a.getString())}var p=r.getStructureByKey("Query");t.importAxesSettings(p,l);if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY)){var s=r.getStructureByKey("CurrencyTranslation");if(e.notNull(s)){var u=l.getCurrencyTranslationManager().getCurrencyTranslationDetails();u.setCurrencyTranslationName(s.getStringByKey("Name"));u.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(s.getStringByKey("Operation")));u.setCurrencyTranslationTarget(s.getStringByKey("Target"))}var g=e.PrUtils.getListProperty(p,"AxesLayout");var y=e.PrUtils.getListSize(g,0);for(var m=0;m<y;m++){var c=e.PrUtils.getStructureElement(g,m);var A=e.AxisType.lookup(e.PrUtils.getStringValueProperty(c,"Axis",null));var S=l.getAxis(A);if(e.isNull(S)){continue}var d=e.PrUtils.getListProperty(c,"OrderedDimensionNames");if(e.isNull(d)){continue}var I=e.XListOfString.create();for(var f=0;f<e.PrUtils.getListSize(d,0);f++){var N=e.PrUtils.getStringElement(d,f);if(e.isNull(N)){continue}I.add(N.getString())}S.reOrderDimensions(I)}}return l};e.QInARepoQuerySettingsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoSortLegacy=function(){};e.QInARepoSortLegacy.prototype=new e.QInAComponentWithList;e.QInARepoSortLegacy.prototype._ff_c="QInARepoSortLegacy";e.QInARepoSortLegacy.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSortLegacy.prototype.getTagName=function(){return"Sort"};e.QInARepoSortLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoSortLegacy.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(t.mode!==e.QModelFormat.INA_DATA_REINIT&&t.capabilities.supportsExtendedSort()){a.getSortingOperations().clear();if(e.notNull(r)){var l=a.getQueryModel();for(var p=0;p<r.size();p++){var s=r.getStructureAt(p);var u=s.getStringByKey("SortType");var g=e.QInAConverter.lookupSortType(u);var y;if(g===e.SortType.FIELD){y=this.importFieldSorting(a,l,s)}else if(g===e.SortType.MEASURE){y=this.importMeasureSorting(a,l,s)}else if(g===e.SortType.DATA_CELL_VALUE||g===e.SortType.COMPLEX){y=this.importPathSorting(o,a,l,s,g)}else{y=this.importDimensionSorting(a,l,s,g)}if(e.notNull(y)){this.importGenericSorting(l,s,y)}}}}return a};e.QInARepoSortLegacy.prototype.importGenericSorting=function(t,r,n){var i=r.getStringByKey("Direction");if(e.notNull(i)){var o=e.QInAConverter.lookupSortDirection2(i);if(e.notNull(o)){n.setDirection(o)}}if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){n.setPreserveGrouping(r.getBooleanByKeyExt("PreserveGrouping",false))}if(t.getModelCapabilities().supportsLocaleSorting()){var a=r.getStructureByKey("Collator");if(e.notNull(a)){n.setIsCaseSensitive(a.getBooleanByKeyExt("CaseSensitive",false));n.setLocale(a.getStringByKeyExt("Locale",null))}}};e.QInARepoSortLegacy.prototype.importPathSorting=function(t,r,n,i,o){var a=i.getListByKey("SortTuple");if(a.isEmpty()){return null}var l=e.XList.create();for(var p=0;p<a.size();p++){var s=a.getStructureAt(p);var u=s.getStringByKey("FieldName");var g=s.getStringByKey("Value");if(e.notNull(u)&&e.notNull(g)){var y=n.getFieldByName(u);if(e.isNull(y)){return null}var m=s.getStringByKey("Hierarchy");l.add(e.QSelectValue._createDimensionElement2(t,y,m,g))}else{return null}}if(o===e.SortType.DATA_CELL_VALUE){return r.getDataCellSorting(l,true)}return r.getComplexSorting(l,true)};e.QInARepoSortLegacy.prototype.importDimensionSorting=function(t,r,n,i){var o=r.getDimensionByNameFromExistingMetadata(n.getStringByKey("Dimension"));if(e.isNull(o)||o.isUniversalDisplayHierarchyDimension()){return null}var a=t.getDimensionSorting(o,true);if(i===e.SortType.FILTER){a.setSortByFilter()}else if(i===e.SortType.MEMBER_KEY){a.setSortByKey();this.importCustomSortDetails(a,n)}else if(i===e.SortType.MEMBER_TEXT){a.setSortByText()}else if(i===e.SortType.HIERARCHY){a.setSortByHierarchy()}return a};e.QInARepoSortLegacy.prototype.importCustomSortDetails=function(t,r){var n=r.getListByKey("CustomSort");if(!e.PrUtils.isListEmpty(n)){var i=e.PrUtils.asListOfString(n);t.setCustomSort(i);var o=e.CustomSortPosition.lookup(r.getStringByKey("CustomSortPosition"));t.setCustomSortPosition(o)}};e.QInARepoSortLegacy.prototype.importMeasureSorting=function(t,r,n){var i=n.getStringByKey("MeasureName");var o=null;if(e.notNull(i)){var a=r.getMeasureDimension();var l=a.getStructureMember(i);if(e.notNull(l)){o=t.getMeasureSorting(l,true)}var p=n.getStringByKey("StructureName");var s=r.getNonMeasureDimension();if(e.notNull(p)&&e.notNull(s)&&e.notNull(o)){o.setStructure(s.getStructureMember(p))}}return o};e.QInARepoSortLegacy.prototype.importFieldSorting=function(t,r,n){var i=n.getStringByKey("FieldName");var o=null;if(e.notNull(i)){var a=r.getFieldByName(i);if(e.notNull(a)){o=t.getFieldSorting(a,true)}}return o};e.QInARepoSortLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVarDimMemberLegacy=function(){};e.QInARepoVarDimMemberLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarDimMemberLegacy.prototype._ff_c="QInARepoVarDimMemberLegacy";e.QInARepoVarDimMemberLegacy.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMemberLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarDimMemberLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getStructureByKey("Values");if(e.notNull(l)){var p=e.QFactory.createFilterExpression(a,a);var s=t.importFilterExpression(p,l,a,o);a.setFilter(s)}else if(a.getVariableType()===e.VariableType.HIERARCHY_NODE_VARIABLE&&a.hasMemberFilter()&&a.getDimension().getKeyField()!==a.getMemberFilter().getField()){a.setDimension(a.getDimension())}return a};e.QInARepoVarDimMemberLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarOptionListLegacy=function(){};e.QInARepoVarOptionListLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarOptionListLegacy.prototype._ff_c="QInARepoVarOptionListLegacy";e.QInARepoVarOptionListLegacy.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarOptionListLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getListByKey("OptionValues");if(e.notNull(l)){var p;if(a.supportsMultipleValues()){a.clear();var s=l.size();for(var u=0;u<s;u++){p=l.getStringAt(u);a.addString(p)}}else if(l.size()===1){p=l.getStringAt(0);a.setString(p)}}return a};e.QInARepoVarOptionListLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVarSimpleTypeLegacy=function(){};e.QInARepoVarSimpleTypeLegacy.prototype=new e.QInAComponentWithStructure;e.QInARepoVarSimpleTypeLegacy.prototype._ff_c="QInARepoVarSimpleTypeLegacy";e.QInARepoVarSimpleTypeLegacy.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleTypeLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVarSimpleTypeLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;a.clear();var l=a.getValueType();if(l.isNumber()){this.importNumericValues(t,r,a,l)}else if(l.isString()){this.importStringValues(r,a)}else if(l===e.XValueType.DATE){this.importDateValues(t,r,a)}else if(l===e.XValueType.TIME){this.importTimeValues(t,r,a)}else if(l===e.XValueType.DATE_TIME){this.importDateTimeValues(t,r,a)}else if(l===e.XValueType.BOOLEAN){this.importBooleanValues(r,a)}return null};e.QInARepoVarSimpleTypeLegacy.prototype.getFirstValueAsString=function(t){var r=t.get(0);if(e.notNull(r)&&r.isString()){return r.getString()}return null};e.QInARepoVarSimpleTypeLegacy.prototype.importDateTimeValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importTimeValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addTime(e.XTime.createTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setTime(e.XTime.createTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importDateValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addDate(e.QInARepoUtils.createDate(l))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setDate(e.QInARepoUtils.createDate(p))}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importStringValues=function(t,r){var n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){var i=n.size();if(r.supportsMultipleValues()){for(var o=0;o<i;o++){r.addString(n.getStringAt(o))}}else if(i===1){var a=n.get(0);if(e.notNull(a)&&a.isString()){r.setString(a.getString())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importBooleanValues=function(t,r){var n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){var i=n.size();if(r.supportsMultipleValues()){for(var o=0;o<i;o++){r.addBoolean(n.getBooleanAt(o))}}else if(i===1){var a=n.get(0);if(e.notNull(a)&&a.isBoolean()){r.setBoolean(a.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericString=function(t,r,n){if(r===e.XValueType.INTEGER){t.addInteger(e.XInteger.convertFromString(n))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){t.addDouble(e.XDouble.convertFromString(n))}else if(r===e.XValueType.LONG){t.addLong(e.XLong.convertFromString(n))}};e.QInARepoVarSimpleTypeLegacy.prototype.importNumericValues=function(t,r,n,i){var o=r.getListByKey("SimpleNumericValues");if(e.notNull(o)){var a=o.size();if(n.supportsMultipleValues()){for(var l=0;l<a;l++){var p=o.get(l);if(t.capabilities.supportsNumberAsString()&&e.notNull(p)&&p.getType()===e.PrElementType.STRING){this.importNumericString(n,i,o.getStringAt(l));continue}if(i===e.XValueType.INTEGER){var s=o.getIntegerAt(l);n.addInteger(s)}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT){var u=o.getDoubleAt(l);n.addDouble(u)}else if(i===e.XValueType.LONG){var g=o.getLongAt(l);n.addLong(g)}}}else if(a===1){var y=o.get(0);if(e.notNull(y)&&y.isNumeric()){if(i===e.XValueType.INTEGER){n.setInteger(o.getIntegerAt(0))}else if(i===e.XValueType.DOUBLE){n.setDouble(o.getDoubleAt(0))}else if(i===e.XValueType.DECIMAL_FLOAT){n.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(i===e.XValueType.LONG){n.setLong(o.getLongAt(0))}}}}};e.QInARepoVarSimpleTypeLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoVariableContainerLegacy=function(){};e.QInARepoVariableContainerLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariableContainerLegacy.prototype._ff_c="QInARepoVariableContainerLegacy";e.QInARepoVariableContainerLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_CONTAINER};e.QInARepoVariableContainerLegacy.prototype.getTagName=function(){return"Variables"};e.QInARepoVariableContainerLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariableContainerLegacy.prototype.importComponentWithList=function(e,t,r,n,i){var o=r;e.importVariableList(t,o);return r};e.QInARepoVariableContainerLegacy.prototype.exportComponentWithList=e.noSupport;e.QInARepoVariablesListLegacy=function(){};e.QInARepoVariablesListLegacy.prototype=new e.QInAComponentWithList;e.QInARepoVariablesListLegacy.prototype._ff_c="QInARepoVariablesListLegacy";e.QInARepoVariablesListLegacy.prototype.getComponentType=function(){return e.OlapComponentType.VARIABLE_LIST};e.QInARepoVariablesListLegacy.prototype.getModelFormat=function(){return e.QModelFormat.INA_REPOSITORY};e.QInARepoVariablesListLegacy.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=a.getVariableBaseByName(u);if(e.notNull(g)){var y=g.getVariableType();if(y.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(s,g,o)}else if(y.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(s,g,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",u,"' of variable type '",y.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",u,"' was not found"))}}}return n};e.QInARepoVariablesListLegacy.prototype.exportComponentWithList=e.noSupport;e.QInAComponentContainer=function(){};e.QInAComponentContainer.prototype=new e.DfNameObject;e.QInAComponentContainer.prototype._ff_c="QInAComponentContainer";e.QInAComponentContainer.create=function(t){var r=new e.QInAComponentContainer;r._setupInternal(t.getName());r.m_type=t;r.m_components=e.XList.create();return r};e.QInAComponentContainer.prototype.m_components=null;e.QInAComponentContainer.prototype.m_type=null;e.QInAComponentContainer.prototype.isEmpty=function(){return this.m_components.isEmpty()};e.QInAComponentContainer.prototype.hasElements=function(){return this.m_components.hasElements()};e.QInAComponentContainer.prototype.size=function(){return this.m_components.size()};e.QInAComponentContainer.prototype.get=function(t){var r=this.m_components.size();var n=null;if(r>1){for(var i=0;i<r;i++){var o=this.m_components.get(i);if(o.isMatching(t)){n=o;break}}}if(e.isNull(n)&&r>0){n=this.m_components.get(0)}return n};e.QInAComponentContainer.prototype.add=function(t){e.XBooleanUtils.checkFalse(this.m_components.contains(t),"Container already exists");this.m_components.add(t)};e.QInAComponentContainer.prototype.getComponentType=function(){return this.m_type};e.QInARepoAttribute=function(){};e.QInARepoAttribute.prototype=new e.QInARepository;e.QInARepoAttribute.prototype._ff_c="QInARepoAttribute";e.QInARepoAttribute.prototype.getComponentType=function(){return e.OlapComponentType.ATTRIBUTE};e.QInARepoAttribute.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=r.getStringByKey("Name");var p=a.getAttributeByName(l);if(e.notNull(p)){var s=r.getListByKey("ResultSetFields");if(e.notNull(s)){var u=p.getResultSetFields();u.clear();var g=s.size();for(var y=0;y<g;y++){var m=p.getFieldByName(s.getStringAt(y));if(e.notNull(m)){u.add(m)}}}}return p};e.QInARepoAttribute.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=n.putNewList("ResultSetFields");var l=o.getResultSetFields();var p=l.size();for(var s=0;s<p;s++){a.addString(l.get(s).getName())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoAxesSettings=function(){};e.QInARepoAxesSettings.prototype=new e.QInARepository;e.QInARepoAxesSettings.prototype._ff_c="QInARepoAxesSettings";e.QInARepoAxesSettings.prototype.getComponentType=function(){return e.OlapComponentType.AXES_SETTINGS};e.QInARepoAxesSettings.prototype.getTagName=function(){return"AxesRepo"};e.QInARepoAxesSettings.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoAxesSettings.prototype.importComponentWithList=function(t,r,n,i,o){if(e.notNull(r)){var a=o.getQueryModel();if(t.capabilities.supportsZeroSuppression()||t.capabilities.supportsNullZeroSuppression()){var l=e.AxisType.getAll();var p=l.size();for(var s=0;s<p;s++){var u=a.getAxisBase(l.get(s));if(e.notNull(u)){u.setSupportsZeroSuppression(true)}}}var g=r.size();for(var y=0;y<g;y++){t.importAxis(r.getStructureAt(y),null,o)}}return null};e.QInARepoAxesSettings.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoAxesSettings.prototype.exportComponentWithList=function(t,r,n){var i=r;var o=e.PrFactory.createList();var a=t.exportAxis(i.getColumnsAxis(),null);o.add(a);var l=t.exportAxis(i.getRowsAxis(),null);o.add(l);return o};e.QInARepoAxis=function(){};e.QInARepoAxis.prototype=new e.QInARepository;e.QInARepoAxis.prototype._ff_c="QInARepoAxis";e.QInARepoAxis.prototype.getComponentType=function(){return e.OlapComponentType.AXIS};e.QInARepoAxis.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l;var p=r.getStringByKey("Axis");if(e.notNull(p)){l=e.QInAConverter.lookupAxisType(p)}else{var s=r.getIntegerByKey("Type");l=e.QInAConverter.lookupAxisTypeInt(s)}var u=a.getAxisBase(l);if(e.notNull(u)){if(u.supportsZeroSuppression()){var g=r.getIntegerByKeyExt("ZeroSuppressionType",0);var y=e.QInAConverter.lookupSuppressionType(g);u.setZeroSuppressionType(y)}var m=r.getListByKey("Layout");if(e.notNull(m)){u.clear();var c=a.getDimensionManagerBase();for(var A=0;A<m.size();A++){var S=m.getStringAt(A);var d=c.getDimensionByNameInternal(S);u.add(d)}}t.importTotals(r,u.getResultStructureControllerBase(),o);if(r.containsKey("LowerLevelNodeAlignment")){u.setLowerLevelNodeAlignment(e.QInAConverter.lookupLowerLevelNodeAlignment(r.getStringByKey("LowerLevelNodeAlignment")))}}return u};e.QInARepoAxis.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o.getType()));n.putInteger("Type",e.QInAConverter.lookupAxisTypeInAInt(o.getType()));var a=o.getZeroSuppressionType();n.putInteger("ZeroSuppressionType",e.QInAConverter.lookupSuppressionTypeInA(a));var l=n.putNewList("Layout");for(var p=0;p<o.size();p++){var s=o.getDimensionAt(p);l.addString(s.getName())}t.exportTotals(o.getResultStructureController(),n);var u=o.getLowerLevelNodeAlignment();if(e.notNull(u)){n.putString("LowerLevelNodeAlignment",e.QInAConverter.lookupLowerLevelNodeAlignmentInA(u))}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoBlendableQueryManager=function(){};e.QInARepoBlendableQueryManager.prototype=new e.QInARepository;e.QInARepoBlendableQueryManager.prototype._ff_c="QInARepoBlendableQueryManager";e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure=function(t,r,n){var i=t.getStructureByKey(n);r.setLinkType(n,e.BlendingLinkType.lookup(i.getStringByKey("LinkType")));r.setUnlinkedDimensionJoinType(n,e.UnlinkedDimensionJoinType.lookup(i.getStringByKey("UnlinkedDimensionJoinType")));var o=i.getListByKey("ActiveDimensionLinks");if(e.notNull(o)){var a=o.getIterator();while(a.hasNext()){var l=a.next().asString().getString();if(r.getPrimaryQueryManager().getQueryModel().getDimensionByName(l)!==null){r.addActivePrimaryLinkDimensionName(n,l)}}}};e.QInARepoBlendableQueryManager.importDrillOperations=function(t,r){var n=r.getListByKey("DrillOperations");t.clearBlendedDrillOperations();if(e.notNull(n)){var i=n.getIterator();while(i.hasNext()){var o=i.next().asStructure();var a=t.addNewBlendedDrillOperation(o.getStringByKey("DatasetId"),o.getStringByKey("DimensionName"));a.setDrillState(e.QInAConverter.lookupDrillStateOp(o.getStringByKey("DrillState")));var l=o.getListByKey("DrillPathElements");if(e.notNull(l)){var p=l.getIterator();while(p.hasNext()){var s=p.next().asStructure();a.addBlendedDrillPathElementInfo(s.getStringByKey("DatasetId"),s.getStringByKey("DimensionName"),s.getStringByKey("Member"))}}}}};e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis=function(t,r,n){var i=r.getListByKey(n.getName());if(e.notNull(i)){var o=i.getIterator();t.clearBlendedDimensionInfosByAxis(n);while(o.hasNext()){var a=o.next().asStructure();var l=t.addBlendedDimensionInfoToAxis(n,a.getStringByKey("DatasetId"),a.getStringByKey("DimensionName"));if(a.containsKey("InitialDrillLevel")){l.setInitialDrillLevel(a.getIntegerByKey("InitialDrillLevel"))}}}};e.QInARepoBlendableQueryManager.importSorts=function(t,r){var n=t.getListByKey("BlendableDimensionSorts");var i=t.getStructureByKey("BlendableMeasureMemberSort");r.clearBlendableDimensionSorts();r.clearPrimaryBlendableMemberMeasureSort();if(e.notNull(n)){e.QInARepoBlendableQueryManager.importDimensionSorts(r,n)}else if(e.notNull(i)){e.QInARepoBlendableQueryManager.importMeasureMemberSort(r,i)}};e.QInARepoBlendableQueryManager.importDimensionSorts=function(t,r){var n=r.getIterator();while(n.hasNext()){var i=n.next().asStructure();var o=i.getStringByKey("FieldName");var a=i.getStringByKey("DatasetId");var l=e.QInAConverter.lookupSortDirection(i.getIntegerByKey("SortDirection"));var p=i.getBooleanByKey("PreserveGrouping");var s=i.getStringByKey("Locale");var u=i.getStructureByKey("CustomSort");var g=e.QInARepoBlendableQueryManager.importCustomSort(u);var y=i.getStringByKey("AutoLimiterSort");var m=i.getBooleanByKey("IsDisplayedAsId");var c=i.getStringByKey("ID");var A=e.QFactory.createBlendableDimensionSort(o,a,l,p,s);A.setCustomSortDefinition(g);A.setAutoLimiterSort(y);A.setIsDisplayedAsId(m);A.setDimensionId(c);t.updateBlendableDimensionSort(A)}};e.QInARepoBlendableQueryManager.importCustomSort=function(t){if(e.isNull(t)){return null}var r=t.getStringByKey("Name");var n=t.getStringByKey("DatasetId");var i=t.getStringByKey("ID");var o=t.getStringByKey("HierarchyId");var a=t.getStringByKey("Id");var l=e.QInARepoBlendableQueryManager.importListOfString(t,"SortFromStart");var p=e.QInARepoBlendableQueryManager.importListOfString(t,"SortFromEnd");var s=e.QInARepoBlendableQueryManager.importListOfString(t,"SortMovedNodes");return e.QFactory.createBlendableCustomSort(r,n,i,o,a,l,p,s)};e.QInARepoBlendableQueryManager.importListOfString=function(t,r){var n=e.XListOfString.create();var i=t.getListByKey(r);var o=i.getIterator();while(o.hasNext()){n.add(o.next().asString().getString())}return n.size()===0?null:n};e.QInARepoBlendableQueryManager.importMeasureMemberSort=function(t,r){var n=e.QFactory.createBlendableMeasureSort(t);n.setPrimaryMeasure(r.getStringByKey("MeasureMemberName"),r.getStringByKey("DatasetId"),r.getBooleanByKey("PrimaryBlendableBlended"));n.setSecondaryMeasure(r.getStringByKey("SecondaryMeasureName"),r.getStringByKey("SecondaryDatasetId"),r.getBooleanByKey("SecondaryMeasureBlended"));var i=e.QInAConverter.lookupSortDirection(r.getIntegerByKey("SortDirection"));n.setSortDirection(i);n.setPreserveGrouping(r.getBooleanByKey("PreserveGrouping"));n.setVersionElementId(r.getStringByKey("VersionElementId"));var o=r.getStructureByKey("VersionDimension");if(e.notNull(o)){var a=o.getStringByKey("DatasetId");var l=t.getQueryManagerByDatasetId(a);if(e.notNull(l)){var p=o.getStringByKey("Name");var s=l.getQueryModel().getDimensionByName(p);if(e.notNull(s)){n.setVersionDimension(s)}}}t.setBlendableMeasureMemberSort(n)};e.QInARepoBlendableQueryManager.importRankSettingsList=function(t,r){var n=t.getListByKey("RankSettings");r.clearRankSettings();if(e.notNull(n)){for(var i=0;i<n.size();i++){e.QInARepoBlendableQueryManager.importRankSettings(n.getStructureAt(i),r)}}};e.QInARepoBlendableQueryManager.importRankSettings=function(t,r){var n=e.QFactory.createRankSettings();n.setMeasure(t.getStringByKey("MeasureMemberName"));n.setPrimaryDatasetId(t.getStringByKey("MeasureMemberDatasetId"));n.setIsBlendedPrimaryMeasure(t.getBooleanByKey("PrimaryBlendableBlended"));n.setSecondaryMeasure(t.getStringByKey("SecondaryMeasureName"));n.setSecondaryDatasetId(t.getStringByKey("SecondaryDatasetId"));n.setIsBlendedSecondaryMeasure(t.getBooleanByKey("SecondaryMeasureBlended"));n.setMaxRows(t.getIntegerByKey("MaxRows"));n.setUseClientSideRanking(t.getBooleanByKey("ClientSideRanking"));n.setIsRankOnAllDimensions(t.getBooleanByKey("RankOnAllDimensions"));n.setIsApplyRankingsWithoutReset(t.getBooleanByKey("IsApplyRankingsWithoutReset"));n.setPreserveSort(t.getBooleanByKey("PreserveSort"));var i=t.getListByKey("Dimensions");var o;var a;var l;var p;for(var s=0;s<i.size();s++){var u=i.get(s).asStructure();a=u.getStringByKey("DatasetId");l=r.getQueryManagerByDatasetId(a);if(e.notNull(l)){o=u.getStringByKey("Name");p=l.getQueryModel().getDimensionByName(o);if(e.notNull(p)){n.addAppliedDimension(p)}}}var g=t.getStringByKey("Comparison");n.setComparisonOperator(e.ConditionComparisonOperator.lookupName(g));n.setVersionElementId(t.getStringByKey("VersionElementId"));var y=t.getStructureByKey("VersionDimension");if(e.notNull(y)){a=y.getStringByKey("DatasetId");l=r.getQueryManagerByDatasetId(a);if(e.notNull(l)){o=y.getStringByKey("Name");p=l.getQueryModel().getDimensionByName(o);if(e.notNull(p)){n.setVersionDimension(p)}}}n.setUseDefaultSort(t.getBooleanByKey("UseDefaultSort"));r.addRankSettings(n)};e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructure=function(t,r,n,i){var o=e.PrStructure.create();o.putString("FirstModelName",n);o.putString("SecondModelName",i);o.putString("LinkType",r.getLinkType(i).getName());o.putString("UnlinkedDimensionJoinType",r.getUnlinkedDimensionJoinType(i).getName());var a=o.putNewList("ActiveDimensionLinks");var l=r.getActivePrimaryLinkDimensionNames(i).getIterator();while(l.hasNext()){var p=l.next();a.addString(p)}t.put(i,o)};e.QInARepoBlendableQueryManager.exportDrillOperations=function(t,r){var n=r.getBlendedDrillOperations().getIterator();var i=t.putNewList("DrillOperations");while(n.hasNext()){var o=n.next();var a=i.addNewStructure();a.putString("DimensionName",o.getDimensionName());a.putString("DatasetId",o.getDatasetId());var l=e.QInAConverter.lookupDrillStateInA(o.getDrillState());a.putString("DrillState",l);var p=a.putNewList("DrillPathElements");var s=o.getBlendedDrillPathElementInfos().getIterator();while(s.hasNext()){var u=s.next();var g=p.addNewStructure();g.putString("DatasetId",u.getDatasetId());g.putString("DimensionName",u.getDimensionName());g.putString("Member",u.getDrillMember())}}};e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis=function(e,t,r){var n=t.putNewList(r.getName());var i=e.getBlendedDimensionsByAxis(r).getIterator();while(i.hasNext()){var o=i.next();var a=n.addNewStructure();a.putString("DatasetId",o.getDatasetId());a.putString("DimensionName",o.getDimensionName());if(o.getInitialDrillLevel()!==null){a.putInteger("InitialDrillLevel",o.getInitialDrillLevel().getInteger())}}};e.QInARepoBlendableQueryManager.exportSorts=function(t,r){var n=r.getBlendableDimensionSorts();var i=r.getPrimaryBlendableMeasureMemberSort();if(n.size()>0){e.QInARepoBlendableQueryManager.exportDimensionSorts(t,n)}else if(e.notNull(i)){e.QInARepoBlendableQueryManager.exportMeasureMemberSort(t,i)}};e.QInARepoBlendableQueryManager.exportDimensionSorts=function(t,r){var n=t.putNewList("BlendableDimensionSorts");var i=r.getIterator();while(i.hasNext()){var o=i.next();var a=e.PrStructure.create();a.putString("FieldName",o.getFieldName());a.putString("DatasetId",o.getDatasetId());a.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(o.getSortDirection()));a.putBoolean("PreserveGrouping",o.getPreserveGrouping());a.putString("Locale",o.getContextLanguage());var l=o.getCustomSortDefinition();if(e.notNull(l)){var p=a.putNewStructure("CustomSort");p.putString("Name",l.getName());p.putString("DatasetId",l.getDatasetId());p.putString("ID",l.getDimensionId());p.putString("HierarchyId",l.getHierarchyId());p.putString("Id",l.getId());p.putNewList("SortFromStart").addAllStrings(l.getSortFromStart());p.putNewList("SortFromEnd").addAllStrings(l.getSortFromEnd());p.putNewList("SortMovedNodes").addAllStrings(l.getMovedNodes())}a.putString("AutoLimiterSort",o.getAutoLimiterSort());a.putBoolean("IsDisplayedAsId",o.isDisplayedAsId());a.putString("ID",o.getDimensionId());n.add(a)}};e.QInARepoBlendableQueryManager.exportMeasureMemberSort=function(t,r){var n=t.putNewStructure("BlendableMeasureMemberSort");n.putString("MeasureMemberName",r.getMeasureMemberName());n.putString("DatasetId",r.getDatasetId());n.putBoolean("PrimaryBlendableBlended",r.isPrimaryMeasureBlended());n.putInteger("SortDirection",e.QInAConverter.lookupSortDirectionInA(r.getSortDirection()));n.putString("SecondaryMeasureName",r.getSecondaryMeasureName());n.putString("SecondaryDatasetId",r.getSecondaryDatasetId());n.putBoolean("SecondaryMeasureBlended",r.isSecondaryMeasureBlended());n.putString("VersionElementId",r.getVersionElementId());var i=r.getVersionDimension();if(e.notNull(i)){var o=n.putNewStructure("VersionDimension");o.putString("DatasetId",i.getQueryModel().getDatasetId());o.putString("Name",i.getName())}n.putBoolean("PreserveGrouping",r.isPreserveGrouping())};e.QInARepoBlendableQueryManager.exportRankSettingsList=function(t,r){var n=r.getRankSettings();var i=t.putNewList("RankSettings");for(var o=0;o<n.size();o++){e.QInARepoBlendableQueryManager.exportRankSettings(i.addNewStructure(),n.get(o))}};e.QInARepoBlendableQueryManager.exportRankSettings=function(t,r){t.putString("MeasureMemberName",r.getMeasure());t.putString("MeasureMemberDatasetId",r.getPrimaryMeasureDatasetId());t.putBoolean("PrimaryBlendableBlended",r.isBlendedPrimaryMeasure());t.putString("SecondaryMeasureName",r.getSecondaryMeasure());t.putString("SecondaryDatasetId",r.getSecondaryMeasureDatasetId());t.putBoolean("SecondaryMeasureBlended",r.isBlendedSecondaryMeasure());t.putInteger("MaxRows",r.getMaxRows());t.putBoolean("ClientSideRanking",r.isUseClientSideRanking());t.putBoolean("RankOnAllDimensions",r.isRankOnAllDimensions());t.putBoolean("IsApplyRankingsWithoutReset",r.isApplyRankingsWithoutReset());t.putBoolean("PreserveSort",r.isPreserveSort());var n=t.putNewList("Dimensions");var i=r.getAppliedDimensions();for(var o=0;o<i.size();o++){var a=i.get(o);var l=n.addNewStructure();l.putString("DatasetId",a.getQueryModel().getDatasetId());l.putString("Name",a.getName())}if(r.getComparisonOperator()!==null){t.putString("Comparison",r.getComparisonOperator().getName())}t.putString("VersionElementId",r.getVersionElementId());var p=r.getVersionDimension();if(e.notNull(p)){var s=t.putNewStructure("VersionDimension");s.putString("DatasetId",p.getQueryModel().getDatasetId());s.putString("Name",p.getName())}t.putBoolean("UseDefaultSort",r.useDefaultSort())};e.QInARepoBlendableQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.BLENDABLE_QUERY_MANAGER};e.QInARepoBlendableQueryManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getStructureByKey("PrimaryQueryManager");var p=l.getStringByKey("DatasetId");var s=a.getPrimaryQueryManager();if(e.isNull(s)||!e.XString.isEqual(s.getQueryModel().getDatasetId(),p)){s=null;var u=a.getOlapEnv().getSharedQueryManager(p);if(e.notNull(u)){s=u.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);a.setPrimaryQueryManager(s)}}if(e.notNull(s)){s.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),l.getStructureByKey("Query"))}var g=o.getOlapEnv().getModelLinkManager();var y=r.getListByKey("QueryManagers");var m=r.getStructureByKey("QueryModelLinkSettings");a.clearQueryModelLinkSettings();if(e.notNull(y)){var c=y.getIterator();while(c.hasNext()){var A=c.next().asStructure();var S=A.getStringByKey("DatasetId");var d=a.getQueryManagerByDatasetId(S);if(e.isNull(d)){var I=a.getOlapEnv().getSharedQueryManager(S);d=I.cloneQueryManagerExt(e.QueryCloneMode.CURRENT_STATE);a.addSecondaryQueryManager(d)}if(e.notNull(d)){if(g.getDimensionLinksByDatasetIds(a.getStorageName(),p,S,true).size()>0){d.getQueryModel().deserializeFromElementExt(t.getOriginalMode(),A.getStructureByKey("Query"));e.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure(m,a,S)}}else{throw e.XException.createRuntimeException(e.XStringUtils.concatenate3("Query manager ","DatasetId"," not found in blendable query manager or olap environment shared query managers."))}}}a.clearPrimaryBlendedMeasures();var f=r.getListByKey("PrimaryBlendedMeasures");if(e.notNull(f)){var N=f.getIterator();while(N.hasNext()){var v=N.next();var T=e.QInAConverter.lookupMeasureStructureMemberType(v.getStringByKey("MemberType"));var R=t.importComponent(T,v,null,a.getQueryModel().getPrimaryCalculationDimension(),a.getQueryModel());a.addPrimaryBlendedMeasure(R)}}e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(a,r.getStructureByKey("DimensionOrder"),e.AxisType.ROWS);e.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(a,r.getStructureByKey("DimensionOrder"),e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.importDrillOperations(a,r);e.QInARepoBlendableQueryManager.importSorts(r,a);e.QInARepoBlendableQueryManager.importRankSettingsList(r,a);a.setUseEmptyAllMemberMeasureFilter(r.getBooleanByKey("UseAllMemberFilter"));return null};e.QInARepoBlendableQueryManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getPrimaryQueryManager();var l=a.getQueryModel().getDatasetId();n.putString("Name",o.getName());var p=n.putNewStructure("PrimaryQueryManager");p.putString("Name",a.getName());p.putString("DatasetId",l);p.put("Query",a.getQueryModel().serializeToElement(t.getOriginalMode()));n.putString("StorageName",o.getStorageName());var s=n.putNewList("QueryManagers");var u=n.putNewStructure("QueryModelLinkSettings");var g=o.getSecondaryQueryManagers().getIterator();while(g.hasNext()){var y=g.next();var m=y.getQueryModel().getDatasetId();var c=s.addNewStructure();c.putString("DatasetId",m);c.putString("Name",y.getName());c.put("Query",y.getQueryModel().serializeToElement(t.getOriginalMode()));e.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructure(u,o,l,m)}var A=n.putNewList("PrimaryBlendedMeasures");var S=o.getPrimaryBlendedMeasures().getIterator();while(S.hasNext()){var d=S.next();t.exportComponent(d.getMemberType(),d,A.addNewStructure(),i)}var I=n.putNewStructure("DimensionOrder");e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,I,e.AxisType.ROWS);e.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(o,I,e.AxisType.COLUMNS);e.QInARepoBlendableQueryManager.exportDrillOperations(n,o);e.QInARepoBlendableQueryManager.exportSorts(n,o);e.QInARepoBlendableQueryManager.exportRankSettingsList(n,o);n.putBoolean("UseAllMemberFilter",o.isUseEmptyAllMemberMeasureFilter());return n};e.QInARepoCellContext=function(){};e.QInARepoCellContext.prototype=new e.QInARepository;e.QInARepoCellContext.prototype._ff_c="QInARepoCellContext";e.QInARepoCellContext.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT};e.QInARepoCellContext.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;var l=r.getStringByKey("Name");if(e.isNull(n)){a=e.QCellContext._create(o,l,i)}else if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT){a=n}a.setRowIndex(r.getIntegerByKeyExt("Row",-1));a.setColumnIndex(r.getIntegerByKeyExt("Column",-1));a.setExternalKeys(r.getBooleanByKeyExt("ExternalKeys",false));a.setComponentsExternal(r.getBooleanByKeyExt("ComponentsExternal",false));a.setComponentsInternal(r.getBooleanByKeyExt("ComponentsInternal",false));var p=r.getListByKey("CellContextPaths");if(!e.PrUtils.isListEmpty(p)){var s=p.size();for(var u=0;u<s;u++){var g=p.getStructureAt(u);var y=e.QInAConverter.lookupAxisType(g.getStringByKey("Axis"));var m=g.getListByKey("CellContextMembers");var c=m.size();var A=e.XList.create();for(var S=0;S<c;S++){var d=m.getStructureAt(S);A.add(t.importDrillPathElement(d,a,o))}a.setTupleContextForAxis(A,y)}}return a};e.QInARepoCellContext.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=n;if(e.isNull(a)){a=e.PrFactory.createStructure()}a.putString("Name",o.getName());if(o.getRowIndex()>-1){a.putInteger("Row",o.getRowIndex())}if(o.getColumnIndex()>-1){a.putInteger("Column",o.getColumnIndex())}a.putBoolean("ExternalKeys",o.isExternalKeys());a.putBoolean("ComponentsExternal",o.isComponentsExternal());a.putBoolean("ComponentsInternal",o.isComponentsInternal());var l=o.getAxisContexts();if(e.XCollectionUtils.hasElements(l)){var p=a.putNewList("CellContextPaths");var s=l.getKeysAsIterator();while(s.hasNext()){var u=s.next();var g=l.getByKey(u);if(e.XCollectionUtils.hasElements(g)){var y=p.addNewStructure();y.putString("Axis",e.QInAConverter.lookupAxisTypeInA(u));var m=y.putNewList("CellContextMembers");var c=g.size();for(var A=0;A<c;A++){m.add(t.exportDrillPathElement(g.get(A),true))}}}}return n};e.QInARepoCellContextManager=function(){};e.QInARepoCellContextManager.prototype=new e.QInARepository;e.QInARepoCellContextManager.prototype._ff_c="QInARepoCellContextManager";e.QInARepoCellContextManager.prototype.getComponentType=function(){return e.OlapComponentType.CELL_CONTEXT_MANAGER};e.QInARepoCellContextManager.prototype.getTagName=function(){return"CellContextRequests"};e.QInARepoCellContextManager.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)&&r.containsKey("Elements")){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoCellContextManager.prototype.importComponentWithList=function(t,r,n,i,o){if(n.getOlapComponentType()===e.OlapComponentType.CELL_CONTEXT_MANAGER){var a=n;var l=r.size();a.clear();for(var p=0;p<l;p++){a.addCellContext(t.importCellContext(r.getStructureAt(p),a,o))}}return n};e.QInARepoCellContextManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoCellContextManager.prototype.exportComponentWithList=function(t,r,n){var i=r;var o=e.PrFactory.createList();for(var a=0;a<i.size();a++){o.add(t.exportCellContext(i.get(a)))}return o};e.QInARepoConditionManager=function(){};e.QInARepoConditionManager.prototype=new e.QInARepository;e.QInARepoConditionManager.prototype._ff_c="QInARepoConditionManager";e.QInARepoConditionManager.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_MANAGER};e.QInARepoConditionManager.prototype.getTagName=function(){return"ConditionsRepo"};e.QInARepoConditionManager.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoConditionManager.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(e.notNull(a)){if(!e.PrUtils.isListEmpty(r)){var l=o.getQueryModel();var p=r.size();for(var s=0;s<p;s++){var u=r.getStructureAt(s);var g=t.importCondition(l,u,null);if(e.notNull(g)&&!a.containsKey(g.getName())){a.add(g)}}this.removeModelElementsNotInInA(t,r,a,a.getValuesAsReadOnlyList())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){a.clear()}}return a};e.QInARepoConditionManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoConditionManager.prototype.exportComponentWithList=function(t,r,n){var i=null;var o=r;if(e.notNull(o)){var a=o.size();if(a>0){i=e.PrFactory.createList();for(var l=0;l<a;l++){var p=o.get(l);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isUserCondition()||p.getModCounter()>0){var s=t.exportCondition(p);if(e.notNull(s)&&!s.isEmpty()){i.add(s)}}}if(i.isEmpty()){i=null}}}return i};e.QInARepoConditionsCondition=function(){};e.QInARepoConditionsCondition.prototype=new e.QInARepository;e.QInARepoConditionsCondition.prototype._ff_c="QInARepoConditionsCondition";e.QInARepoConditionsCondition.exportBreakGroupDimensionList=function(t){if(e.isNull(t)){return null}var r=e.PrFactory.createList();var n=t.getBreakGroupDimensions();var i=n.size();for(var o=0;o<i;o++){r.addString(n.get(o).getName())}return r};e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList=function(t,r){if(e.isNull(r)){return null}var n=e.PrFactory.createList();var i=r.getEvaluationDimensions();var o=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||i.getModCounter()>0;if(o){var a=i.size();for(var l=0;l<a;l++){n.addString(i.get(l).getName())}}return n};e.QInARepoConditionsCondition.prototype.getComponentType=function(){return e.OlapComponentType.CONDITION};e.QInARepoConditionsCondition.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(r)){var l=r.getStringByKey("Name");if(e.isNull(n)){var p=r.getBooleanByKeyExt("IsBackendCondition",true);var s=i;if(s.getByKey(l)!==null){a=s.getConditionByName(l)}else if(this.newComponentCreationAllowed(t,r)){a=e.QCondition.create(o,s,l,p)}}else{a=n;a.setConditionName(l)}if(e.notNull(a)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Active")){a.setActive(r.getBooleanByKey("Active"))}a.setUsedState(r.getStringByKey("IsUsed"));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Description")){a.setDescription(r.getStringByKey("Description"))}var u=r.getStringByKey("OnDisabled");if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AfterVisibilityFilter")){a.setApplyConditionAfterVisibilityFilter(r.getBooleanByKeyExt("AfterVisibilityFilter",false))}if(e.notNull(u)){if(e.XString.isEqual(u,"Error")){a.setOnDisabledToWarning(false)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("EvaluateOnDimensions")){var g=r.getStringByKey("EvaluateOnDimensions");var y=e.ConditionDimensionEvaluationType.lookupName(g);if(e.notNull(y)){a.setDimensionEvaluationType(y)}}var m=o.getQueryModel();var c=r.getListByKey("EvaluateOnDimensionsList");var A;var S;if(!e.PrUtils.isListEmpty(c)&&e.notNull(m)){A=c.size();a.clearEvaluationDimensions();for(S=0;S<A;S++){var d=c.getStringAt(S);if(e.notNull(d)){var I=m.getDimensionByNameFromExistingMetadata(d);if(e.notNull(I)){a.addEvaluationDimension(I)}}}}var f=r.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(f)){var N=f.size();a.clearThresholds();for(var v=0;v<N;v++){var T=f.getStructureAt(v);if(e.notNull(T)){a.addThreshold(t.importConditionThreshold(m,T,null,a))}}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("BreakGroup")){a.setBreakGroup(r.getBooleanByKeyExt("BreakGroup",false))}var R=r.getListByKey("BreakGroupList");if(!e.PrUtils.isListEmpty(R)&&e.notNull(m)){A=R.size();for(S=0;S<A;S++){var E=R.getStringAt(S);if(e.notNull(E)){var C=m.getDimensionByNameFromExistingMetadata(E);if(e.notNull(C)){a.addBreakGroupDimension(C)}}}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("BreakHierarchy")){a.setBreakHierarchy(r.getBooleanByKeyExt("BreakHierarchy",false))}}}return a};e.QInARepoConditionsCondition.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.isBackendCondition()&&o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){n.putString("Name",o.getName());n.putBoolean("Active",o.isActive());n.putBoolean("IsBackendCondition",o.isBackendCondition())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.isUserCondition()){var a=o.getQueryModel();var l=a.getSystemType().isTypeOf(e.SystemType.HANA);n.putBoolean("IsBackendCondition",o.isBackendCondition());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_ACTIVE)){n.putBoolean("Active",o.isActive())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_AFTER_VISIBILITY_FILTER)){if(o.isApplyingConditionAfterVisibilityFilter()){n.putBoolean("AfterVisibilityFilter",true)}}if(l){n.putStringNotNullAndNotEmpty("Description",o.getDescription())}else{n.putString("Description",o.getDescription())}n.putString("Name",o.getName());var p=o.getDimensionEvaluationType();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_EVALUATE_ON_DIMENSIONS)){n.putString("EvaluateOnDimensions",p.getName())}if(p===e.ConditionDimensionEvaluationType.GIVEN_LIST){var s=e.QInARepoConditionsCondition.exportEvaluateOnDimensionsList(t,o);n.put("EvaluateOnDimensionsList",s)}var u=o.getThresholds();var g=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||u.getModCounter()>0;if(g){var y=u.size();if(y>0){var m=e.PrFactory.createList();for(var c=0;c<y;c++){var A=t.exportConditionThreshold(u.get(c));if(e.notNull(A)){m.add(A)}}if(!m.isEmpty()){n.put("Threshold",m)}else{return null}}}if(l){if(e.XCollectionUtils.hasElements(a.getPreQueries())&&!o.getOnDisabledToWarning()){n.putString("OnDisabled","Error")}var S=o.isBreakGroup();if(S){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_BREAK_GROUP)){n.putBoolean("BreakGroup",true)}var d=e.QInARepoConditionsCondition.exportBreakGroupDimensionList(o);n.put("BreakGroupList",d)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QConditionProperties.QY_CONDITIONS_BREAK_HIERARCHY)){if(o.isBreakHierarchy()){n.putBoolean("BreakHierarchy",true)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoConditionsThreshold=function(){};e.QInARepoConditionsThreshold.prototype=new e.QInARepository;e.QInARepoConditionsThreshold.prototype._ff_c="QInARepoConditionsThreshold";e.QInARepoConditionsThreshold.importSingleMeasureCoordinate=function(t,r,n){if(e.isNull(r)||e.isNull(n)){return}var i=n.getStringByKey("DimensionName");var o=n.getStringByKey("MemberName");if(e.XStringUtils.isNullOrEmpty(i)||e.XStringUtils.isNullOrEmpty(o)){return}var a=t;if(e.isNull(a)){a=r.getContext().getQueryModel()}if(e.notNull(a)){var l=a.getDimensionByNameFromExistingMetadata(i);if(e.notNull(l)){var p=l.getDimensionMember(o);if(e.isNull(p)){var s=a.getOlapEnv().getClientQueryObjectManager();var u=a.getQueryManager().getClientQueryObjectStorageName();var g=l===a.getPrimaryCalculationDimension();p=s.getStructuredMemberIncludeReleased(o,u,g)}if(e.notNull(p)){r.addMeasureCoordinate(p)}}}};e.QInARepoConditionsThreshold.importThresholdValue=function(t,r){if(e.isNull(t)||e.isNull(r)){return}if(r.isBoolean()){t.setBoolean(r.getBoolean())}else if(r.isString()){t.setString(r.getString())}else if(r.isDouble()){t.setDouble(r.getDouble())}else if(r.isInteger()){t.setInteger(r.getInteger())}else if(r.isLong()){t.setLong(r.getLong())}};e.QInARepoConditionsThreshold.setValue=function(t,r,n,i,o){if(o===e.XValueType.VARIABLE){var a=i.getVariableValue();if(e.notNull(a)){n.putString(r,a.getName());if(e.XString.isEqual(r,"Low")){n.putString("LowIs","Variable")}else if(e.XString.isEqual(r,"High")){n.putString("HighIs","Variable")}}}else{e.QInAValueUtils.exportPlaceholderValue(t,r,n,i,o,i.getQueryModel())}};e.QInARepoConditionsThreshold.prototype.getComponentType=function(){return e.OlapComponentType.CONDITIONS_THRESHOLD};e.QInARepoConditionsThreshold.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(r)){if(e.isNull(n)){a=e.QConditionThreshold.create(o,i)}else{a=n}var l=r.getStringByKey("Comparison");var p=e.ConditionComparisonOperator.lookupName(l);if(e.notNull(p)){a.setComparisonOperator(p)}var s=r.getByKey("Low");e.QInARepoConditionsThreshold.importThresholdValue(a.getLow(),s);var u=r.getByKey("LowIs");e.QInARepoConditionsThreshold.importThresholdValue(a.getLowIs(),u);var g=r.getByKey("High");e.QInARepoConditionsThreshold.importThresholdValue(a.getHigh(),g);var y=r.getByKey("HighIs");e.QInARepoConditionsThreshold.importThresholdValue(a.getHighIs(),y);var m=r.getListByKey("MeasureCoordinate");if(e.notNull(m)){var c=o.getQueryModel();var A=m.size();for(var S=0;S<A;S++){e.QInARepoConditionsThreshold.importSingleMeasureCoordinate(c,a,m.getStructureAt(S))}}a.setLeavesOnly(r.getBooleanByKeyExt("LeavesOnly",false));var d=r.getByKey("Level");if(e.notNull(d)){a.setLevel(e.XIntegerValue.create(d.getInteger()))}}return a};e.QInARepoConditionsThreshold.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getMeasureCoordinates();var l=e.PrFactory.createList();var p=a.size();if(p===0){return null}for(var s=0;s<p;s++){var u=a.get(s);var g=e.PrFactory.createStructure();var y;if(!u.isReleased()){y=u.getDimension().getName()}else{if(e.XString.isEqual(u.getStorageGroupName(),e.QClientQueryObjectType.SECONDARY_STRUCTURE_MEMBER.getName())){y=o.getQueryModel().getSecondaryCalculationDimension().getName()}else{y=o.getQueryModel().getPrimaryCalculationDimension().getName()}}g.putString("DimensionName",y);g.putString("MemberName",u.getName());l.add(g)}if(!l.isEmpty()){n.put("MeasureCoordinate",l)}var m=o.getQueryModel();var c=m.getSystemType().isTypeOf(e.SystemType.HANA);var A=o.getLow();var S=o.getHigh();if(c){if(A.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",n,A,e.XValueType.INTEGER)}if(S.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",n,S,e.XValueType.INTEGER)}var d=o.getLevel();if(e.notNull(d)){n.putInteger("Level",d.getInteger())}}else{if(A.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"Low",n,A,A.getValueType())}if(S.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"High",n,S,S.getValueType())}var I=o.getLowIs();if(I.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"LowIs",n,I,I.getValueType())}var f=o.getHighIs();if(f.getValue()!==null){e.QInARepoConditionsThreshold.setValue(t,"HighIs",n,f,f.getValueType())}}var N=o.getComparisonOperator();n.putString("Comparison",N.getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoCurrencyTranslationItem=function(){};e.QInARepoCurrencyTranslationItem.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationItem.prototype._ff_c="QInARepoCurrencyTranslationItem";e.QInARepoCurrencyTranslationItem.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_ITEM};e.QInARepoCurrencyTranslationItem.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(a)&&e.XCollectionUtils.hasElements(r)){a.setMetadataDefined(r.getBooleanByKeyExt("MetadataDefined",false));a.setSourceCurrency(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("SourceCurrency")));a.setTargetCurrency(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("TargetCurrency")));a.setErrorHandling(e.QInAConverter.lookupCtErrorHandlingMode(r.getStringByKey("ErrorHandling")));if(r.getBooleanByKeyExt("DefaultCurrency",false)){a.setDefaultCurrency()}a.setReferenceDate(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.DATE,r.getStructureByKey("ReferenceDate")));if(r.containsKey("ReferenceDate")){var l=r.getStructureByKey("ReferenceDate");if(l.containsKey("DateOffset")||l.containsKey("DateOffsetGranularity")){var p=a.getDateOffset();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.containsKey("DateOffset")){p=l.getIntegerByKey("DateOffset")}var s=a.getDateOffsetGranularity();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||l.containsKey("DateOffsetGranularity")){s=e.DateOffsetGranularity.lookup(l.getStringByKey("DateOffsetGranularity"))}if(e.notNull(s)){if(a.getReferenceDateFieldName()!==null){a.setReferenceDateByFieldNameOffsetAndGranularity(a.getReferenceDateFieldName(),p,s)}else{a.setDynamicReferenceDateWithOffsetAndGranularity(p,s)}}}}a.setRateName(this.importSpecificCurrencyTranslationElement(t,a,e.XValueType.STRING,r.getStructureByKey("RateName")));if(r.containsKey("RateName")){var u=r.getStructureByKey("RateName");if(u.hasStringByKey("RateType")){a.setFixedRateType(e.QInAConverter.lookupRateType(u.getStringByKey("RateType")))}if(u.hasStringByKey("RateVersion")){a.setFixedRateVersion(u.getStringByKey("RateVersion"))}if(u.hasStringByKey("Category")){a.setFixedCategory(e.QInAConverter.lookupCategory(u.getStringByKey("Category")))}}}return n};e.QInARepoCurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(t,r,n,i){var o=null;if(e.notNull(i)){if(i.containsKey("Fixed")){var a=i.getStringByKey("Fixed");if(n===e.XValueType.STRING){o=e.QCurrencyLookupValue.createFixedByValue(r,e.XStringValue.create(a))}else if(n===e.XValueType.DATE){o=e.QCurrencyLookupValue.createFixedByValue(r,e.XDate.createDateSafe(a))}}else if(i.containsKey("DimensionAttribute")){o=e.QCurrencyLookupValue.createByFieldName(r,i.getStringByKey("DimensionAttribute"))}else if(i.containsKey("Formula")){var l=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,r.getQueryModel().getMeasureDimension(),i.getStructureByKey("Formula"),null,null);o=e.QCurrencyLookupValue.createByFormulaItem(r,l)}else if(i.containsKey("Variable")){o=e.QCurrencyLookupValue.createByVariableName(r,i.getStringByKey("Variable"))}}return o};e.QInARepoCurrencyTranslationItem.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(e.notNull(o)){n.putStringNotNullAndNotEmpty("ErrorHandling",e.QInAConverter.lookupCtErrorHandlingModeInA(o.getErrorHandling()));n.putString("Name",o.getName());n.putString("Description",o.getText());n.putBoolean("MetadataDefined",o.isMetadataDefined());if(o.isDefaultCurrency()){n.putBoolean("DefaultCurrency",true)}var a=o.getQueryModel();this.exportSpecificCurrencyTranslationProperty(t,n,"SourceCurrency",o.getSourceCurrency(),a);this.exportSpecificCurrencyTranslationProperty(t,n,"TargetCurrency",o.getTargetCurrency(),a);this.exportSpecificCurrencyTranslationProperty(t,n,"ReferenceDate",o.getReferenceDate(),a);this.exportReferenceDateOffsets(n,o,t);this.exportSpecificCurrencyTranslationProperty(t,n,"RateName",o.getRateName(),a);this.exportPlanningRateNameSettings(n,o,t)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoCurrencyTranslationItem.prototype.exportPlanningRateNameSettings=function(t,r,n){if(e.CtCategory.isDefined(r.getFixedCategory())||e.XStringUtils.isNotNullAndNotEmpty(r.getFixedRateVersion())||e.CtRateType.isDefined(r.getFixedRateType())){var i;if(t.containsKey("RateName")){i=t.getStructureByKey("RateName")}else{i=t.putNewStructure("RateName")}if(n.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_RATE_TYPE)){i.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(r.getFixedRateType()))}i.putStringNotNullAndNotEmpty("RateVersion",r.getFixedRateVersion());if(n.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_CATEGORY)){i.putStringNotNullAndNotEmpty("Category",e.QInAConverter.lookupCategoryInA(r.getFixedCategory()))}}};e.QInARepoCurrencyTranslationItem.prototype.exportReferenceDateOffsets=function(t,r,n){if(r.getDateOffsetGranularity()!==null){var i;if(t.containsKey("ReferenceDate")){i=t.getStructureByKey("ReferenceDate")}else{i=t.putNewStructure("ReferenceDate")}if(n.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET_GRANULARITY)){i.putString("DateOffsetGranularity",r.getDateOffsetGranularity().getName())}if(n.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QCurrencyTranslationProperties.QY_DATE_OFFSET)){i.putInteger("DateOffset",r.getDateOffset())}}};e.QInARepoCurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(t,r,n,i,o){if(e.notNull(i)){if(i.isFixed()){r.putNewStructure(n).putString("Fixed",i.getFixedValue().getStringRepresentation())}else if(i.isFieldBased()){r.putNewStructure(n).putString("DimensionAttribute",i.getFieldName())}else if(i.isFormulaBased()){var a=r.putNewStructure(n).putNewStructure("Formula");e.QInARepoMemberAbstract.exportFormulaItem(t,i.getFormulaItem(),a,o)}else if(i.isVariableBased()){r.putNewStructure(n).putString("Variable",i.getVariableName())}}};e.QInARepoCurrencyTranslationList=function(){};e.QInARepoCurrencyTranslationList.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationList.prototype._ff_c="QInARepoCurrencyTranslationList";e.QInARepoCurrencyTranslationList.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_LIST};e.QInARepoCurrencyTranslationList.prototype.getTagName=function(){return"CurrencyTranslationsRepo"};e.QInARepoCurrencyTranslationList.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoCurrencyTranslationList.prototype.importComponentWithList=function(t,r,n,i,o){var a=o.getQueryModel().getCurrencyTranslationManager();if(e.notNull(a)&&e.XCollectionUtils.hasElements(r)){var l=r.size();for(var p=0;p<l;p++){var s=r.getStructureAt(p);var u=s.getStringByKey("Name");var g=s.getStringByKey("Description");var y=a.getMeasureCurrencyTranslation(u);if(e.isNull(y)){y=a.addNewMeasureCurrencyTranslationBase(u,g)}t.importCurrencyTranslationElement(s,y,o)}}return a};e.QInARepoCurrencyTranslationList.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoCurrencyTranslationList.prototype.exportComponentWithList=function(t,r,n){var i=null;var o=r;var a=o.getMeasureCurrencyTranslationsForInaData();if(e.XCollectionUtils.hasElements(a)){i=e.PrFactory.createList();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);t.exportCurrencyTranslationElement(s,i.addNewStructure())}}return i};e.QInARepoCurrencyTranslationManager=function(){};e.QInARepoCurrencyTranslationManager.prototype=new e.QInARepository;e.QInARepoCurrencyTranslationManager.prototype._ff_c="QInARepoCurrencyTranslationManager";e.QInARepoCurrencyTranslationManager.prototype.getComponentType=function(){return e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER};e.QInARepoCurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslationRepo"};e.QInARepoCurrencyTranslationManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(r)&&e.notNull(a)){this.importQueryCurrencyTranslation(t,r,a);this.importSpecificCurrencyTranslations(t,r,a,o);this.importDefaultCurrencyTranslation(t,r,a,o)}return n};e.QInARepoCurrencyTranslationManager.prototype.importDefaultCurrencyTranslation=function(t,r,n,i){var o=r.getStructureByKey("Query");if(e.notNull(o)&&e.notNull(n)){var a=n.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(a)){a.setCurrencyTranslationName(r.getStringByKey("CurrencyTranslationName"));a.setApplyDefinedCurrencyTranslation(r.getBooleanByKeyExt("Active",false));a.setApplyToDefaultCurrencyTranslation(r.getBooleanByKeyExt("CurrencyTranslationApplyToDefault",false));t.importCurrencyTranslationElement(o,a.getMeasureCurrencyTranslation(),i)}}};e.QInARepoCurrencyTranslationManager.prototype.importQueryCurrencyTranslation=function(t,r,n){var i=n.getCurrencyTranslationDetails();if(e.notNull(i)&&r.hasStringByKey("Name")&&r.hasStringByKey("Operation")){var o=r.getStringByKey("Name");var a=r.getStringByKey("Operation");var l=r.getStringByKey("Target");if(!e.XStringUtils.isNullOrEmpty(i.getCurrencyTranslationName())&&i.getCurrencyTranslationOperation()!==null&&!e.XStringUtils.isNullOrEmpty(i.getCurrencyTranslationOperation().getName())&&(e.XStringUtils.isNullOrEmpty(o)||e.XStringUtils.isNullOrEmpty(a)||e.XStringUtils.isNullOrEmpty(l))){n.resetCurrencyTranslationDetails()}else{i.setCurrencyTranslationName(o);i.setCurrencyTranslationOperation(e.CurrencyTranslationOperation.lookup(a));i.setCurrencyTranslationTarget(l)}}};e.QInARepoCurrencyTranslationManager.prototype.importSpecificCurrencyTranslations=function(t,r,n,i){var o=r.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Description");var g=n.getMeasureCurrencyTranslation(s);if(e.isNull(g)){g=n.addNewMeasureCurrencyTranslationBase(s,u)}t.importCurrencyTranslationElement(p,g,i)}}};e.QInARepoCurrencyTranslationManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;this.exportCurrencyTranslationDetails(n,o);this.exportSpecificCurrencyTranslations(t,n,o);this.exportDefaultCurrencyTranslations(t,n,o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoCurrencyTranslationManager.prototype.exportDefaultCurrencyTranslations=function(t,r,n){var i=n.getQuery2MeasureCurrencyTranslationBridge();if(e.notNull(i)){var o=r.putNewStructure("Query");var a=i.getMeasureCurrencyTranslation();t.exportCurrencyTranslationElement(a,o);r.putStringNotNullAndNotEmpty("CurrencyTranslationName",i.getCurrencyTranslationName());r.putBoolean("Active",i.isApplyDefinedCurrencyTranslation());if(i.isApplyToDefaultCurrencyTranslation()){r.putBoolean("CurrencyTranslationApplyToDefault",i.isApplyToDefaultCurrencyTranslation())}}};e.QInARepoCurrencyTranslationManager.prototype.exportCurrencyTranslationDetails=function(t,r){if(e.isNull(r)||!r.getModelCapabilities().supportsQueryCurrencyTranslation()){return}var n=r.getCurrencyTranslationDetails();if(e.notNull(n)){if(e.XStringUtils.isNotNullAndNotEmpty(n.getCurrencyTranslationName())){if(n.getCurrencyTranslationOperation()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Operation required.")}t.putString("Operation",n.getCurrencyTranslationOperation().getName());t.putString("Name",n.getCurrencyTranslationName());if(n.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.BOTH||n.getCurrencyTranslationOperation()===e.CurrencyTranslationOperation.TARGET){if(n.getCurrencyTranslationTarget()===null){throw e.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.")}}t.putString("Target",n.getCurrencyTranslationTarget())}else{t.putString("Operation","");t.putString("Name","");t.putString("Target","")}}};e.QInARepoCurrencyTranslationManager.prototype.exportSpecificCurrencyTranslations=function(t,r,n){if(e.isNull(n)||!n.getModelCapabilities().supportsCurrencyTranslation()){return}var i=n.getMeasureCurrencyTranslations();if(e.XCollectionUtils.hasElements(i)){var o=r.putNewList("CurrencyTranslations");var a=i.size();for(var l=0;l<a;l++){var p=i.get(l);t.exportCurrencyTranslationElement(p,o.addNewStructure())}}};e.QInARepoDataCell=function(){};e.QInARepoDataCell.prototype=new e.QInARepository;e.QInARepoDataCell.prototype._ff_c="QInARepoDataCell";e.QInARepoDataCell.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELL};e.QInARepoDataCell.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=a.getQueryDataCellsBase();var p=this.getDataCellFromExistingList(a,r);var s=false;if(e.isNull(p)){p=l.newQueryDataCell(this.getDataCellName(r,a));s=true}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("SignReversal")){p.setSignReversal(r.getBooleanByKeyExt("SignReversal",false))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Emphasized")){p.setEmphasized(r.getBooleanByKeyExt("Emphasized",false))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Cumulation")){p.setCumulation(r.getBooleanByKeyExt("Cumulation",false))}p.setInputEnabled(r.getBooleanByKeyExt("InputEnabled",false));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisaggregationMode")){p.setDisaggregationMode(e.DisaggregationMode.lookupWithDefault(r.getStringByKeyExt("DisaggregationMode",null),e.DisaggregationMode.NONE))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisaggregationReferenceCellName")){p.setDisaggregationRefCellName(r.getStringByKeyExt("DisaggregationReferenceCellName",null))}if((s||a.isBasicMeasureSettingsExportedInRepo())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ScalingFactor"))){p.setScalingFactor(r.getIntegerByKeyExt("ScalingFactor",1))}if((s||a.isBasicMeasureSettingsExportedInRepo())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Decimals"))){p.setDecimalPlaces(r.getIntegerByKeyExt("Decimals",0))}var u=r.getIntegerByKeyExt("CellValueType",0);var g=e.QInAConverter.lookupValueTypeByInt(u);p.setBaseCellValueType(g);if(g===e.XValueType.DIMENSION_MEMBER){var y=r.getStringByKey("CellDimensionReference");p.setDimensionReference(a.getDimensions().getByKey(y))}var m=r.getListByKey("DimensionMemberReferences");if(e.notNull(m)){for(var c=0;c<m.size();c++){var A=m.getStringAt(c);if(!p.hasMeasureReference(A)){p.addDimensionMemberReference(A)}}}if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE&&!p.hasAnyMemberReferencesSet()){l.removeElement(p)}if(r.hasStringByKey("SemanticObject")){p.setSemanticObject(r.getStringByKey("SemanticObject"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("CurrencyPresentation")){p.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(r.getStringByKey("CurrencyPresentation")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleAndUnitPlacement")){p.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(r.getStringByKey("ScaleAndUnitPlacement")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleFormat")){p.setScaleFormat(e.QInAConverter.lookupScaleFormat(r.getStringByKey("ScaleFormat")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("SignPresentation")){p.setSignPresentation(e.QInAConverter.lookupSignPresentation(r.getStringByKey("SignPresentation")))}return p};e.QInARepoDataCell.prototype.getDataCellFromExistingList=function(t,r){var n=r.getStringByKey("Name");var i=r.getListByKey("DimensionMemberReferences");var o=t.getQueryDataCellsBase();if(e.XCollectionUtils.hasElements(i)){var a=i.getStringAt(0);var l=i.size()>1?i.getStringAt(1):null;var p=e.XStringUtils.isNotNullAndNotEmpty(l);return e.XCollectionUtils.findFirst(o,function(e){return e.hasMeasureReference(a)&&(p&&e.hasMeasureReference(l)||!p&&e.getReferenceStructureElement2()===null)}.bind(this))}else if(e.XStringUtils.isNotNullAndNotEmpty(n)){var s=o.getByKey(n);if(e.notNull(s)&&s.getReferenceStructureElement1()===null&&s.getReferenceStructureElement2()===null){return s}}return null};e.QInARepoDataCell.prototype.getDataCellName=function(t,r){var n=t.getStringByKey("Name");var i=r.getQueryDataCells();if(i.containsKey(n)){var o=i.size();while(i.containsKey(e.XInteger.convertToString(o))){o++}n=e.XInteger.convertToString(o)}return n};e.QInARepoDataCell.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_MODE)){var a=o.getDisaggregationMode();e.QInAExportUtil.setNameIfNotNull(n,"DisaggregationMode",e.isNull(a)?e.DisaggregationMode.NONE:a)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DISAGGREGATION_REF_CELL_NAME)){var l=o.getDisaggregationRefCell();n.putString("DisaggregationReferenceCellName",e.isNull(l)?"0":l.getName())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALING_FACTOR)){n.putInteger("ScalingFactor",o.getScalingFactor())}if(e.XStringUtils.isNullOrEmpty(o.getName())||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_DECIMAL_PLACES)){n.putInteger("Decimals",o.getDecimalPlaces())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_REVERSAL)){n.putBoolean("SignReversal",o.hasSignReversal())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_EMPHASIZED)){n.putBoolean("Emphasized",o.isEmphasized())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CUMULATION)){n.putBoolean("Cumulation",o.isCumulated())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_CURRENCY_PRESENTATION)){n.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(o.getCurrencyPresentation()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_AND_UNIT_PLACEMENT)){n.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(o.getScaleAndUnitPlacement()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SCALE_FORMAT)){n.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(o.getScaleFormat()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDataCellProperties.QY_SIGN_PRESENTATION)){n.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(o.getSignPresentation()))}var p=o.getBaseValueType();var s=e.QInAConverter.lookupIntByValueType(p);n.putInteger("CellValueType",s);var u=n.putNewList("DimensionMemberReferences");var g=o.getReferenceStructureElement1();if(e.notNull(g)){u.addString(g.getName());g=o.getReferenceStructureElement2();if(e.notNull(g)){u.addString(g.getName())}}n.putStringNotNullAndNotEmpty("SemanticObject",o.getSemanticObject());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDataCellsAll=function(){};e.QInARepoDataCellsAll.prototype=new e.QInARepository;e.QInARepoDataCellsAll.prototype._ff_c="QInARepoDataCellsAll";e.QInARepoDataCellsAll.prototype.getComponentType=function(){return e.OlapComponentType.DATA_CELLS};e.QInARepoDataCellsAll.prototype.getTagName=function(){return"QueryDataCellsRepo"};e.QInARepoDataCellsAll.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoDataCellsAll.prototype.importComponentWithList=function(t,r,n,i,o){var a=o.getModelCapabilities();var l=o.getQueryModel();if(a.supportsDataCells()&&l.getQueryManager().getInitSettings().isRequestingDataCells()){if(e.notNull(r)){for(var p=0;p<r.size();p++){t.importDataCell(r.getStructureAt(p),l)}}}return null};e.QInARepoDataCellsAll.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDataCellsAll.prototype.exportComponentWithList=function(t,r,n){var i=r;var o=null;var a=i.getModelCapabilities();if(a.supportsDataCells()&&i.getQueryManager().getInitSettings().isRequestingDataCells()){var l=i.getQueryDataCells();o=e.PrFactory.createList();var p=l.size();for(var s=0;s<p;s++){var u=l.get(s);var g=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||u.isUserAddedDataCell()||u.getModCounter()>0;if(g){var y=t.exportDataCell(u,null);o.add(y)}}}return o};e.QInARepoDataSource=function(){};e.QInARepoDataSource.prototype=new e.QInARepository;e.QInARepoDataSource.prototype._ff_c="QInARepoDataSource";e.QInARepoDataSource.importQd=function(t,r,n,i){var o=null;var a=r;if(e.notNull(n)){if(e.notNull(a)&&!a.containsKey(n)){a=a.getStructureByKey("Analytics");if(e.notNull(a)&&!a.containsKey(n)){a=a.getStructureByKey("Definition")}}if(e.notNull(a)&&a.containsKey(n)){var l=a.getElementTypeByKey(n);if(l===e.PrElementType.STRING){o=e.QFactory.createDataSourceWithType(e.MetaObjectType.INFOPROVIDER,a.getStringByKey(n))}else if(l===e.PrElementType.STRUCTURE){a=a.getStructureByKey(n)}}else if(e.notNull(a)&&!a.containsKey(n)){a=null}}if(e.isNull(o)&&e.notNull(a)){o=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,a,i,o);var p=r.getStringByKey("ValidationHash");if(e.isNull(p)){p=a.getStringByKey("ValidationHash")}o.setValidationHash(p);var s=r.getStructureByKey("GenericServiceDescription");if(e.notNull(s)){o.setGenericServiceDescription(s)}}return o};e.QInARepoDataSource.importDs2=function(t,r,n,i){var o=r.getStringByKey("System");if(e.notNull(o)){i.setSystemName(o)}var a=r.getStringByKey("Type");var l=null;if(e.notNull(a)){a=e.XString.toLowerCase(a);l=e.MetaObjectType.lookup(a)}if(e.isNull(l)){l=e.MetaObjectType.DBVIEW}i.setType(l);e.QInARepoDataSourceProperties.importQd(i,r);if(l===e.MetaObjectType.MULTI_SOURCE||l===e.MetaObjectType.BLENDING){var p=e.PrUtils.getListProperty(r,"Sources");if(e.notNull(p)){var s=i.getMultiSourcesBase();var u=p.size();for(var g=0;g<u;g++){var y=e.PrUtils.getStructureElement(p,g);var m=e.QFactory.createDataSource();e.QInARepoDataSource.importDs2(t,y,n,m);s.add(m)}}var c=e.PrUtils.getListProperty(r,"Mappings");i.setMappings(c)}e.QInARepoDataSourceExtDims.importQd(t,i,r);var A=r.getStringByKey("ValidationHash");i.setValidationHash(A);var S=r.getStructureByKey("GenericServiceDescription");if(e.notNull(S)){i.setGenericServiceDescription(S)}return i};e.QInARepoDataSource.exportDataSource=function(t,r,n,i){var o=e.PrFactory.createStructure();var a=r.getType();if(e.notNull(a)){o.putString("Type",a.getCamelCaseName());var l=r.getSystemName();if(e.notNull(l)){o.putString("System",l)}var p;if(a===e.MetaObjectType.MULTI_SOURCE){p=o.putNewList("Sources");var s=r.getMultiSources();var u=s.size();for(var g=0;g<u;g++){var y=s.get(g);var m=e.QInARepoDataSource.exportDataSource(t,y,n,null);p.add(m)}o.put("Mappings",r.getMappings())}else if(a===e.MetaObjectType.BLENDING){var c=r.getBlendingDefinition();if(e.notNull(c)){p=e.QInARepoDataSourceBlending.exportBlendingSources(t.getMode(),c,true);o.put("Sources",p);var A=e.QInARepoDataSourceBlending.exportBlendingMappings(c.getMappings());o.put("Mappings",A)}}var S=r.getGenericServiceDescription();if(e.notNull(S)){o.put("GenericServiceDescription",S)}}e.QInARepoDataSourceProperties.exportQd(t,r,o,n);e.QInARepoDataSourceExtDims.exportQd(t,r,o);if(e.notNull(i)){i.put("DataSource",o)}return o};e.QInARepoDataSource.prototype.getComponentType=function(){return e.OlapComponentType.DATA_SOURCE};e.QInARepoDataSource.prototype.getTagName=function(){return"DataSource"};e.QInARepoDataSource.prototype.newModelComponent=function(t,r,n,i){return e.QFactory.createDataSource()};e.QInARepoDataSource.prototype.importComponentWithStructure=function(t,r,n,i,o){return e.QInARepoDataSource.importDs2(t,r,o,n)};e.QInARepoDataSource.prototype.exportComponentWithStructure=function(t,r,n,i){var o=e.XMath.binaryAnd(i,e.QImExFlag.RUN_AS_USER)>0;return e.QInARepoDataSource.exportDataSource(t,r,o,null)};e.QInARepoDimension=function(){};e.QInARepoDimension.prototype=new e.QInARepository;e.QInARepoDimension.prototype._ff_c="QInARepoDimension";e.QInARepoDimension.importRsAttributeNodes=function(t,r,n){var i=r.getListByKey("ResultSetAttributeNodes");var o=r.getListByKey("ResultSetAttributeFields");var a=n.getQueryModelBase();var l=a.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();if(e.notNull(i)){var p=n.getResultSetAttributes();p.clear();var s=i.size();for(var u=0;u<s;u++){var g=i.getStringAt(u);var y=n.getAttributeByName(g);if(e.notNull(y)){p.add(y);e.QInARepoDimension.importRsFieldsForAttribute(t,y,o,u)}else if(l&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}}};e.QInARepoDimension.importRsFieldsForAttribute=function(t,r,n,i){if(e.isNull(n)||n.size()<=i){return}var o=n.getListAt(i);var a=r.getResultSetFields();a.clear();var l=o.size();var p=r.getDimension().getQueryModelBase();var s=p.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();for(var u=0;u<l;u++){var g;var y=null;if(o.getElementTypeAt(u)===e.PrElementType.STRING){g=o.getStringAt(u)}else{g=o.getStructureAt(u).getStringByKey("Name");var m=o.getStructureAt(u).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(m)){y=e.ObtainabilityType.lookup(m)}}var c=r.getFieldByName(g);if(e.isNull(c)){c=r.getDimension().getFieldByName(g)}a.add(c);if(e.notNull(y)){c.setObtainability(y)}if(e.isNull(c)&&s&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}};e.QInARepoDimension.importRsFields=function(t,r,n){var i=r.getListByKey("ResultSetFields");if(e.notNull(i)){var o=n.getQueryModelBase();var a=o.getQueryManagerBase().getInitSettings().isRequestingMinimizedAttributes();var l=n.getResultSetFields();l.clear();var p=i.size();for(var s=0;s<p;s++){var u;var g=null;if(i.getElementTypeAt(s)===e.PrElementType.STRING){u=i.getStringAt(s)}else{u=i.getStructureAt(s).getStringByKey("Name");var y=i.getStructureAt(s).getStringByKey("Obtainability");if(e.XStringUtils.isNotNullAndNotEmpty(y)){g=e.ObtainabilityType.lookup(y)}}var m=n.getFieldByName(u);if(e.notNull(m)){l.add(m);if(e.notNull(g)){m.setObtainability(g)}}else if(a&&t.getMessage(e.Severity.WARNING,e.ErrorCodes.ATTRIBUTE_NOT_FOUND)===null){t.addWarning(e.ErrorCodes.ATTRIBUTE_NOT_FOUND,"Some attributes saved in the Story no more exist in the Query")}}}};e.QInARepoDimension.exportListOfFields=function(t,r,n){var i=t.size();for(var o=0;o<i;o++){var a=t.get(o);if(a.getTextTransformation()===null&&a.getDimension().getDimensionType()!==e.DimensionType.FORMULA_CALCULATED_DIMENSION){continue}r.add(n.exportComponent(e.OlapComponentType.FIELD,a,null,e.QImExFlag.DEFAULT_ALL))}};e.QInARepoDimension.prototype.getComponentType=function(){return e.OlapComponentType.ABSTRACT_DIMENSION};e.QInARepoDimension.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=n;var p=r.getStringByKey("Name");if(e.isNull(l)){if(e.notNull(a)){if(e.isNull(p)&&r.getBooleanByKeyExt("MeasureStructure",false)){var s=a.getMeasureDimension();if(e.notNull(s)){p=s.getName()}}l=a.getDimensionManagerBase().getDimensionByNameInternal(p);var u=r.getBooleanByKeyExt("SkipMetadataValidationOnRepoImport",false);if(e.isNull(l)&&u){l=this.addNewDimensionWithDummyMetadata(t,o,a,p)}if(e.isNull(l)){t.addWarning(e.ErrorCodes.INVALID_DIMENSION,e.XStringUtils.concatenate3("Dimension '",p,"' not found in QueryModel! Can't deserialize dimension."))}}}if(e.notNull(l)){var g=r.getBooleanByKeyExt("IsDelta",false);var y=false;if(e.notNull(a)&&a.getMeasureDimension()!==null){y=e.XString.isEqual(p,a.getMeasureDimension().getName())}if(g&&l.getDimensionType()===e.DimensionType.ACCOUNT&&t.getSession().hasFeature(e.FeatureToggleOlap.SFX_STORE_HIERARCHY_MEMBER_NAMES_AS_FLAT)&&t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)){l.setHierarchicalDimensionMemberNamesStoredAsFlat(true)}var m=l.getPlaceholderIdMemberMap().getValuesAsReadOnlyList();var c=r.getListByKey("PlaceholderIds");if(e.notNull(c)&&(g||!y)){l.clearPlaceholderIds()}if(l.getPlaceholderIds().size()===0&&e.notNull(c)){for(var A=0;A<c.size();A++){var S=c.getStringAt(A);S=this.migratePlaceholderId(t,a,S);l.addPlaceholderId(S)}}if(m.size()>l.getPlaceholderIdMemberMap().getValuesAsReadOnlyList().size()){var d=m.getIterator();while(d.hasNext()){var I=d.next();if(l.getPlaceholderIdByAlias(I.getAliasOrMemberName())===null){l.assignFreePlaceholderToMember(I)}}}if(!g){l.clearAlternativeFieldValues()}if(g&&t.getSession().hasFeature(e.FeatureToggleOlap.LAZY_LOADING_SFX_ACCOUNT_MEMBERS)&&l.getDimensionType()===e.DimensionType.ACCOUNT){l.setStructureMemberLazyLoader(e.InARepoStructureMemberLazyLoader.create(l,t.getMode(),r))}else{t.importMembers(r,l,o)}if(!g){this.importFieldsLayout(t,r,l,o);t.importHierarchy(l,r);var f=a.getModelCapabilities();if(!f.supportsExtendedSort()){if(f.supportsDimensionSorting(l,e.SortType.MEMBER_KEY)){var N=r.getIntegerByKeyExt("SortOrder",e.QInAConverter.lookupSortDirectionInA(e.XSortDirection.DEFAULT_VALUE));var v=e.QInAConverter.lookupSortDirection(N);l.getResultSetSorting().setDirection(v)}}if(t.capabilities.supportsCummulative()&&l.supportsCumulative()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("IsCummulative")){l.setIsCumulative(r.getBooleanByKeyExt("IsCummulative",false))}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Skip")){var T=r.getIntegerByKeyExt("Skip",0);l.setSkipEntries(T)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("Top")){var R=r.getIntegerByKeyExt("Top",0);l.setTopEntries(R)}var E=r.getStringByKey("ReadMode");if(e.notNull(E)){var C=e.QInAConverter.lookupReadMode(E);l.setReadModeGraceful(e.QContextType.RESULT_SET,C)}var Q=r.getStringByKey("SelectorReadMode");if(e.notNull(Q)){var M=e.QInAConverter.lookupReadMode(Q);l.setReadModeGraceful(e.QContextType.SELECTOR,M)}t.importTotals(r,l.getResultStructureControllerBase(),o);this.importAlternativeFieldValues(r,l);var D=r.getStructureByKey("PlacholderIdMapping");if(e.notNull(D)){var L=D.getKeysAsReadOnlyListOfString();for(var F=0;F<L.size();F++){var O=L.get(F);var B=D.getStringByKey(O);O=this.migratePlaceholderId(t,a,O);l.assignPlaceholderIdByAlias(O,B)}}var h;var _;if(l.getModelCapabilities().supportsMemberVisibility()&&r.containsKey("VisibilityOverride")){var x=r.getStructureByKey("VisibilityOverride");_=x.getKeysAsReadOnlyListOfString();for(var b=0;b<_.size();b++){h=_.get(b);var P=e.QInAConverter.lookupResultSetVisibility(x.getStringByKey(h));l.getOverdefinedMemberManager().setVisibilityOverride(h,P)}}if(r.containsKey("NumericScaleOverride")){var K=r.getStructureByKey("NumericScaleOverride");_=K.getKeysAsReadOnlyListOfString();for(var V=0;V<_.size();V++){h=_.get(V);l.getOverdefinedMemberManager().setNumericScaleOverride(h,K.getIntegerByKey(h))}}if(l.getModelCapabilities().supportsMemberVisibility()&&r.containsKey("NumericShiftOverride")){var U=r.getStructureByKey("NumericShiftOverride");_=U.getKeysAsReadOnlyListOfString();for(var X=0;X<_.size();X++){h=_.get(X);l.getOverdefinedMemberManager().setNumericShiftOverride(h,U.getIntegerByKey(h))}}if(r.containsKey("NumericPrecisionOverride")){var H=r.getStructureByKey("NumericPrecisionOverride");_=H.getKeysAsReadOnlyListOfString();for(var w=0;w<_.size();w++){h=_.get(w);l.getOverdefinedMemberManager().setNumericPrecisionOverride(h,H.getIntegerByKey(h))}}var W=r.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(W)){l.setOverrideText(W)}}var Y=r.getStringByKey("AccountTypeAttributeName");var z=l.getMetadataBase();if(e.notNull(Y)){z.setAccountTypeAttributeName(Y)}var G=r.getBooleanByKeyExt("FiscalEnabled",false);if(G){z.setFiscalEnabled(G);z.setFiscalDisplayPeriod(r.getStringByKey("FiscalDisplayPeriod"));z.setFiscalShift(r.getIntegerByKeyExt("FiscalShift",0))}if(r.containsKey("additionalPeriods")){z.setAdditionalPeriods(r.getIntegerByKey("additionalPeriods"))}if(r.containsKey("periodPrefix")){z.setPeriodPrefix(r.getStringByKey("periodPrefix"))}if(r.containsKey("useMonthLabel")){z.setUseMonthLabel(r.getBooleanByKey("useMonthLabel"))}if(r.containsKey("TimeConfigEnablePattern")){z.setTimeConfigEnablePattern(r.getBooleanByKey("TimeConfigEnablePattern"))}if(r.containsKey("IsUserManaged")){z.setIsUserManaged(r.getBooleanByKey("IsUserManaged"))}if(r.containsKey("unassignedMember")){z.setUnassignedMember(r.getStringByKey("unassignedMember"))}var k=r.getBooleanByKeyExt("HasDayTimeYYYYMMDDFormat",false);if(k){z.setHasDayTimeYYYYMMDDFormat(k)}var q=r.getStringByKey("Description");if(e.XStringUtils.isNotNullAndNotEmpty(q)){l.setText(q)}}return l};e.QInARepoDimension.prototype.migratePlaceholderId=function(t,r,n){var i=n;var o=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(r)&&r.getDimensionByType(e.DimensionType.ACCOUNT)!==null&&e.XString.startsWith(n,"[")&&e.XString.indexOf(n,o)!==-1){var a=e.XString.indexOf(n,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var l=e.XString.indexOfFrom(n,"]",a);i=e.XString.substring(n,a,l)}return i};e.QInARepoDimension.prototype.addNewDimensionWithDummyMetadata=function(t,r,n,i){var o=e.QCacheKey.createByContextForDimension(r,i,null);var a=e.QDimensionMetadata.create(o);a.addSupportedFieldLayoutType(e.FieldLayoutType.ATTRIBUTE_BASED);a.addSupportedAxis(e.AxisType.FREE);a.addSupportedAxis(e.AxisType.ROWS);a.addSupportedAxis(e.AxisType.COLUMNS);a.setDimensionType(e.DimensionType.DIMENSION);var l=t.getApplication().getOlapEnvironment();l.setDimensionMetadata(a);var p=e.QDimension._create(r,n.getDimensionManagerBase());p.setName(i);p.setText(i);p.setMetadata(a);p.setSkipMetadataValidationOnRepoImport(true);n.addDimension(p);return p};e.QInARepoDimension.prototype.importAlternativeFieldValues=function(t,r){var n=t.getListByKey("AlternativeFieldValues");if(e.notNull(n)){var i=n.size();for(var o=0;o<i;o++){var a=n.get(o);if(a.isStructure()){var l=a;var p=l.getStringByKey("ValueType");var s=e.QInAConverter.lookupValueType(p);var u=l.getStringByKey("Value");var g=null;if(s===e.XValueType.INTEGER){g=e.XIntegerValue.create(e.XInteger.convertFromStringWithRadix(u,10))}else if(s===e.XValueType.LONG){g=e.XLongValue.create(e.XLong.convertFromString(u))}else if(s===e.XValueType.DOUBLE){g=e.XDoubleValue.create(e.XDouble.convertFromString(u))}else if(s===e.XValueType.STRING){g=e.XStringValue.create(u)}else if(s===e.XValueType.DATE){g=e.XDate.createDateFromIsoFormat(u)}else if(s===e.XValueType.DATE_TIME){g=e.XDateTime.createDateTimeFromIsoFormat(u)}if(e.notNull(g)){var y=l.getBooleanByKey("HierarchyKey");var m=l.getStringByKey("MemberKey");var c=l.getStringByKey("FieldName");var A=l.getStringByKey("Language");r.setAlternativeFieldValue(y,m,c,g,A)}}}}};e.QInARepoDimension.prototype.importFieldsLayout=function(t,r,n,i){var o=r.getListByKey("FieldSettings");if(e.notNull(o)){var a=o.size();for(var l=0;l<a;l++){t.importComponent(e.OlapComponentType.FIELD,o.getStructureAt(l),null,n,i)}}var p=r.getListByKey("AttributeSettings");if(e.notNull(p)){var s=p.size();for(var u=0;u<s;u++){t.importAttribute(p.getStructureAt(u),n,i)}}var g=n.getFieldByName(r.getStringByKey("ClientDefaultTextAttribute"));n.setClientDefaultTextField(g);g=n.getFieldByName(r.getStringByKey("ClientDefaultKeyAttribute"));n.setClientDefaultKeyField(g);e.QInARepoDimension.importRsFields(t,r,n);e.QInARepoDimension.importRsAttributeNodes(t,r,n);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("FieldLayoutType")){var y=e.QInAConverter.lookupFieldLayoutType(r.getStringByKey("FieldLayoutType"));n.setFieldLayoutType(y)}if(r.containsKey("TextFieldModified")){n.getFieldContainerBase().setShouldUseActualTextField(r.getBooleanByKey("TextFieldModified"))}};e.QInARepoDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA&&!o.getModelCapabilities().supportsPersistedInA()||o.hasPropertyChanged(e.QDimensionProperties.QY_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(n,"ReadMode",o.getReadMode(e.QContextType.RESULT_SET))}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA&&!o.getModelCapabilities().supportsPersistedInA()||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_READ_MODE)){e.QInARepoUtils.setNameIfNotNull(n,"SelectorReadMode",o.getReadMode(e.QContextType.SELECTOR))}n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(o.getAxisType()));if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){var a=o.getSkipEntries();if(a>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_SKIP)){n.putInteger("Skip",a)}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){var l=o.getTopEntries();if(l>0||t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QDimensionProperties.QY_TOP)){n.putInteger("Top",l)}}if(o.supportsCumulative()&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.IS_CUMULATIVE))){n.putBoolean("IsCummulative",o.isCumulative())}t.exportHierarchy(o,n);if(o.supportsTotals()){if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getResultStructureController().getModCounter()>0){t.exportTotals(o,n)}}if(o.getStructureLayout()!==null){t.exportMembers(o,n)}this.exportFieldLayout(t,n,o);this.exportAlternativeFieldValues(n,o);if(o.getSkipMetadataValidationOnRepoImport()){n.putBoolean("SkipMetadataValidationOnRepoImport",true)}if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){var p=n.putNewList("PlaceholderIds");p.addAllStrings(o.getPlaceholderIds())}var s=o.getPlaceholderIdMemberMap().getKeysAsReadOnlyListOfString();if(o.getPlaceholderIds()!==null&&o.getPlaceholderIds().size()>0){var u=n.putNewStructure("PlacholderIdMapping");for(var g=0;g<s.size();g++){var y=s.get(g);var m=o.getPlaceholderIdMemberMap().getByKey(y);u.putString(y,m.getAliasName())}}var c=o.getOverdefinedMemberManager().getVisibilityOverrideMap();var A=c.getKeysAsReadOnlyListOfString();if(A.size()>0){var S=n.putNewStructure("VisibilityOverride");for(var d=0;d<A.size();d++){var I=c.getByKey(A.get(d));if(e.isNull(I)){I=e.ResultVisibility.VISIBLE}S.putString(A.get(d),e.QInAConverter.lookupResultSetVisibilityInA(I))}}var f=o.getOverdefinedMemberManager().getNumericScaleOverrideMap();A=f.getKeysAsReadOnlyListOfString();if(A.size()>0){var N=n.putNewStructure("NumericScaleOverride");for(var v=0;v<A.size();v++){var T=f.getByKey(A.get(v));N.putInteger(A.get(v),T.getInteger())}}var R=o.getOverdefinedMemberManager().getNumericShiftOverrideMap();A=R.getKeysAsReadOnlyListOfString();if(A.size()>0){var E=n.putNewStructure("NumericShiftOverride");for(var C=0;C<A.size();C++){var Q=R.getByKey(A.get(C));E.putInteger(A.get(C),Q.getInteger())}}var M=o.getOverdefinedMemberManager().getNumericPrecisionOverrideMap();A=M.getKeysAsReadOnlyListOfString();if(A.size()>0){var D=n.putNewStructure("NumericPrecisionOverride");for(var L=0;L<A.size();L++){var F=M.getByKey(A.get(L));D.putInteger(A.get(L),F.getInteger())}}if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){n.putStringNotNull("AccountTypeAttributeName",o.getMetadata().getAccountTypeAttributeName());var O=o.getMetadata().getFiscalShift();if(O!==0){n.putInteger("FiscalShift",O)}var B=o.getMetadata().hasDayTimeYYYYMMDDFormat();if(B){n.putBoolean("HasDayTimeYYYYMMDDFormat",B)}}var h=o.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(h)){n.putString("OverrideText",h)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDimension.prototype.exportFieldLayout=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QDimensionProperties.QY_FIELD_LAYOUT_TYPE)){var i=n.getFieldLayoutType();r.putString("FieldLayoutType",e.QInAConverter.lookupFieldLayoutTypeInA(i))}var o=r.putNewList("FieldSettings");e.QInARepoDimension.exportListOfFields(n.getFields(),o,t);if(!n.isUseServerDefaultTextField()){r.putString("ClientDefaultTextAttribute",n.getClientDefaultTextField().getName())}if(!n.isUseServerDefaultKeyField()){r.putString("ClientDefaultKeyAttribute",n.getClientDefaultKeyField().getName())}var a=n.getResultSetFields();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||a.getModCounter()>0){var l=r.putNewList("ResultSetFields");var p=a.size();for(var s=0;s<p;s++){var u=l.addNewStructure();var g=a.get(s);u.putString("Name",g.getName());var y=g.getObtainability();if(e.notNull(y)){u.putString("Obtainability",y.getName())}}}var m=n.getDefaultResultSetTextField();if(e.notNull(m)&&m.haveAnyInAPropertiesChanged()||n.getShouldUseActualTextField()){r.putBoolean("TextFieldModified",true)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||this.exportResultSetAttributeDetails(n)){var c=r.putNewList("ResultSetAttributeNodes");var A=r.putNewList("ResultSetAttributeFields");var S=n.getResultSetAttributes();var d=S.size();for(var I=0;I<d;I++){var f=S.get(I);c.addString(f.getName());var N=A.addNewList();var v=f.getResultSetFields();var T=v.size();for(var R=0;R<T;R++){var E=N.addNewStructure();var C=v.get(R);E.putString("Name",C.getName());var Q=C.getObtainability();if(e.notNull(Q)){E.putString("Obtainability",Q.getName())}}}}};e.QInARepoDimension.prototype.exportResultSetAttributeDetails=function(e){var t=false;var r=e.getResultSetAttributes();if(r.getModCounter()>0){t=true}else{var n=r.size();for(var i=0;i<n;i++){var o=r.get(i);var a=o.getResultSetFields();if(a.getModCounter()>0){t=true;break}}}return t};e.QInARepoDimension.prototype.exportAlternativeFieldValues=function(e,t){this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(false),false);this.exportAlternativeFieldValuesForKeyType(e,t,t.getAlternativeFieldValueMemberKeys(true),true)};e.QInARepoDimension.prototype.exportAlternativeFieldValuesForKeyType=function(t,r,n,i){if(e.notNull(n)){var o=e.PrFactory.createList();var a=n.size();for(var l=0;l<a;l++){var p=n.get(l);var s=r.getAlternativeFieldValueFields(i,p);if(e.notNull(s)){var u=s.size();for(var g=0;g<u;g++){var y=s.get(g);var m=r.getAlternativeFieldValueLanguages(i,p,y);if(e.notNull(m)){var c=m.size();for(var A=0;A<c;A++){var S=m.get(A);var d=r.getAlternativeFieldValue(i,p,y,S);if(e.notNull(d)){var I=o.addNewStructure();I.putBoolean("HierarchyKey",i);I.putString("MemberKey",p);I.putString("FieldName",y);I.putString("Language",S);I.putString("ValueType",e.QInAConverter.lookupValueTypeInA(d.getValueType()));I.putString("Value",d.getStringRepresentation())}}}}}}if(o.size()>0){t.put("AlternativeFieldValues",o)}}};e.QInARepoDimensions=function(){};e.QInARepoDimensions.prototype=new e.QInARepository;e.QInARepoDimensions.prototype._ff_c="QInARepoDimensions";e.QInARepoDimensions.exportAxisDimensionsWithHeuristic=function(t,r,n,i,o){var a=r.getQueryModel();var l=t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA);var p=a.isOptimizedExportModeActive();var s=r.getDimensionCount();for(var u=0;u<s;u++){var g=r.get(u);if(p&&g.isIgnoredOnOptimizedExport()){continue}if(l&&!i.contains(g.getName())){continue}e.QInARepoDimensions.exportDimension(t,g,n,o)}};e.QInARepoDimensions.exportAxisDimensions=function(t,r,n,i){var o=r.getDimensionCount();for(var a=0;a<o;a++){var l=r.get(a);if(e.QInARepoDimensions._isForRendering(t.getMode(),l)){continue}e.QInARepoDimensions.exportDimension(t,l,n,i)}};e.QInARepoDimensions._isForRendering=function(t,r){var n=r.getAxisType();return t===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&n!==e.AxisType.ROWS&&n!==e.AxisType.COLUMNS};e.QInARepoDimensions.exportDimension=function(t,r,n,i){if(!i.contains(r.getName())){i.add(r.getName());var o=r.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&r.getTagging().containsKey(e.QTransientConstants.TAG_IS_TRANSIENT)&&r.getAxis()!==null&&r.getAxisType()===e.AxisType.FREE;var a=!o&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.getDimensionType().isTypeOf(e.DimensionType.CALCULATED_DIMENSION)||r.getModCounter()>0);if(a){n.add(t.exportDimension(r,null))}}};e.QInARepoDimensions.prototype.getComponentType=function(){return e.OlapComponentType.DIMENSIONS};e.QInARepoDimensions.prototype.getTagName=function(){return"DimensionsRepo"};e.QInARepoDimensions.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoDimensions.prototype.containsFormulaCalculatedDimensionInInaList=function(t,r){var n=t.size();for(var i=0;i<n;i++){var o=t.getStructureAt(i);var a=o.getStringByKey("Name");if(e.XString.isEqual(r,a)){return o.containsKey("CType")&&e.XComponentType.lookupComponentType(o.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION}}return false};e.QInARepoDimensions.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=t.getOriginalMode();if(l.isTypeOf(e.QModelFormat.INA_REPOSITORY)&&!l.isTypeOf(e.QModelFormat.INA_REPOSITORY_DELTA)){var p=a.getLoadedDimensions();var s=p.size();for(var u=s-1;u>=0;u--){var g=p.get(u);var y=g.getName();if(g.getDimensionType().isTypeOf(e.DimensionType.FORMULA_CALCULATED_DIMENSION)&&e.notNull(y)){if(!this.containsFormulaCalculatedDimensionInInaList(r,y)){a.removeCalculatedDimensionByName(y)}}}}var m=a.getDimensionManagerBase();var c=a.getFreeAxis();c.addAll(m);var A=r.size();var S=m.getDimensionReferences();for(var d=0;d<A;d++){var I=r.getStructureAt(d);var f=I.getStringByKey("Name");var N=I.getStringByKey("Axis");var v=null;if(I.containsKey("FieldMappings")){var T=t.importCalculatedDimension(I,a);m.addDimension(T);m.finalizeDimensionMetadataSetup(T)}else if(I.containsKey("CType")&&e.XComponentType.lookupComponentType(I.getStringByKey("CType"))===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var R=a.getDimensionByName(f);var E=t.importFormulaCalculatedDimension(I,a,R);m.finalizeDimensionMetadataSetup(E)}else{if(S.containsKey(f)){v=m.getDimensionByNameFromExistingMetadata(f)}t.importDimension(I,a)}if(e.isNull(v)){v=m.getDimensionByNameInternal(f);if(e.isNull(v)){continue}}if(e.isNull(N)){N=I.getStringByKeyExt("AxisDefault","Free")}a.getAxis(e.QInAConverter.lookupAxisType(N)).add(v)}}return a};e.QInARepoDimensions.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);n.put("Elements",o);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDimensions.prototype.exportComponentWithList=function(t,r,n){var i=e.PrFactory.createList();var o=r;var a=e.XHashSetOfString.create();e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.ROWS),i,a);e.QInARepoDimensions.exportAxisDimensions(t,o.getAxis(e.AxisType.COLUMNS),i,a);var l=e.XHashSetOfString.create();if(t.mode===e.QModelFormat.INA_REPOSITORY_DATA||t.mode===e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){e.DimensionUsageAnalyzer2.setupHeuristic(o,l)}e.QInARepoDimensions.exportAxisDimensionsWithHeuristic(t,o.getAxis(e.AxisType.FREE),i,l,a);return i};e.QInARepoDrillManager=function(){};e.QInARepoDrillManager.prototype=new e.QInARepository;e.QInARepoDrillManager.prototype._ff_c="QInARepoDrillManager";e.QInARepoDrillManager.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_MANAGER};e.QInARepoDrillManager.prototype.getTagName=function(){return"HierarchyNavigationsRepo"};e.QInARepoDrillManager.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoDrillManager.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;var l;a.removeAllContextDrillOperations();a.removeZoomDrillOperationsByDimension(null);if(e.notNull(r)){var p=-1;l=r.size();for(var s=0;s<l;s++){var u=r.getStructureAt(s);var g=u.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(g===-1){t.importDrillOperation(u,a,o)}else if(g>-1){var y=this.getZoomDrillPath(t,a,u,o);if(e.XCollectionUtils.hasElements(y)){if(g!==p){a.pushEmptyZoomDrillForDimension(y.get(y.size()-1).getDimension());p=g}var m=u.getIntegerByKeyExt("DrillOffset",0)>0;a.addZoomDrillPath(y,m)}}}}return n};e.QInARepoDrillManager.prototype.getZoomDrillPath=function(t,r,n,i){var o=e.XList.create();var a=n.getListByKey("DrillContextMembers");if(e.notNull(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=t.importDrillPathElement(s,r,i);o.add(u)}}var g=n.getStringByKey("DrillState");var y=n.getStructureByKey("DrillMember");if(e.isNull(y)||e.isNull(g)){return null}var m=t.importDrillPathElement(y,r,i);o.add(m);return o};e.QInARepoDrillManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDrillManager.prototype.exportComponentWithList=function(t,r,n){var i=r;var o=i.getModelCapabilities();var a=null;var l=i.getDrillOperationsForInARepo();var p=l.size();if(p>0){var s=i.getQueryModel();var u=null;var g=null;a=e.PrFactory.createList();var y=null;if(o.supportsHierarchyNavigationDeltaMode()){y=l.get(p-1);var m=y.getTargetDimension();if(e.notNull(m)&&m.isHierarchyNavigationDeltaMode()){g=m;u=t.exportDrillOperation(y)}}var c=t.isAbap(s);var A;for(A=0;A<p;A++){var S=l.get(A);if(S.getType()===e.DrillOperationType.CONTEXT){var d=S.getTargetDimension();if(e.isNull(g)||g!==d){if(!c&&d.getInitialDrillLevel()<0&&S.getDrillState()===e.DrillState.EXPANDED){continue}a.add(t.exportDrillOperation(S))}}}if(e.notNull(u)){a.add(u)}if(a.isEmpty()){a=null}}return a};e.QInARepoDrillPathElement=function(){};e.QInARepoDrillPathElement.prototype=new e.QInARepository;e.QInARepoDrillPathElement.prototype._ff_c="QInARepoDrillPathElement";e.QInARepoDrillPathElement.prototype.getComponentType=function(){return e.MemberType.DRILL_PATH_ELEMENT};e.QInARepoDrillPathElement.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=a.getContext().getQueryModel();var p=r.getStringByKey("FieldName");var s=r.getStringByKey("DimensionName");var u;if(e.XStringUtils.isNotNullAndNotEmpty(s)){u=l.getDimensionByNameFromExistingMetadata(s)}else{var g=l.getFieldByNameOrAlias(p);if(e.isNull(g)){u=l.getDimensionByNameFromExistingMetadata(p);if(e.notNull(u)){g=u.getKeyField();p=g.getName()}}else{u=g.getDimension()}}var y=e.QDrillPathElement._create(o);y.setDimension(u);var m=r.getStringByKey("Member");y.setName(m);y.setFieldName(p);return y};e.QInARepoDrillPathElement.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getName();if(e.isNull(a)){n.putNull("Member")}else{var l=e.QInAExportUtil.getMeasureMemberNameByAlias(o.getQueryModel(),a,t);n.putString("Member",l)}n.putString("FieldName",o.getFieldName());var p=o.getDimension();e.QInAExportUtil.setNameIfNotNull(n,"DimensionName",p);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoDrillPathOperation=function(){};e.QInARepoDrillPathOperation.prototype=new e.QInARepository;e.QInARepoDrillPathOperation.prototype._ff_c="QInARepoDrillPathOperation";e.QInARepoDrillPathOperation.prototype.getComponentType=function(){return e.OlapComponentType.DRILL_OPERATION};e.QInARepoDrillPathOperation.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;var l=i;var p=r.getStringByKey("DrillState");var s=r.getStructureByKey("DrillMember");if(e.notNull(s)&&e.notNull(p)){var u=e.XList.create();var g=r.getListByKey("DrillContextMembers");if(e.notNull(g)){var y=g.size();for(var m=0;m<y;m++){var c=g.getStructureAt(m);var A=t.importDrillPathElement(c,l,o);u.add(A)}}var S=t.importDrillPathElement(s,l,o);u.add(S);a=l.setDrillState(u,e.QInAConverter.lookupDrillStateOp(p));var d=r.getIntegerByKeyExt("DrillLevel",1);a.setRelativeLevelCount(d)}return a};e.QInARepoDrillPathOperation.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(o.getType()===e.DrillOperationType.CONTEXT){var a=e.QInAConverter.lookupDrillStateInA(o.getDrillState());n.putString("DrillState",a);var l=o.getRelativeLevelCount();if(l!==1){n.putInteger("DrillLevel",l)}if(o.getZoomStackPosition()!==-1){n.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition())}if(o.getRelativeLevelOffset()!==0){n.putInteger("DrillOffset",o.getRelativeLevelOffset())}var p=o.getDrillPath();var s=p.size();if(s>0){var u=p.get(s-1);var g=t.exportDrillPathElement(u,false);n.put("DrillMember",g);if(s>1){var y=e.PrFactory.createList();n.put("DrillContextMembers",y);for(var m=0;m<s-1;m++){u=p.get(m);g=t.exportDrillPathElement(u,true);y.add(g)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoExceptions=function(){};e.QInARepoExceptions.prototype=new e.QInARepository;e.QInARepoExceptions.prototype._ff_c="QInARepoExceptions";e.QInARepoExceptions.prototype.getComponentType=function(){return e.OlapComponentType.EXCEPTION_MANAGER};e.QInARepoExceptions.prototype.getTagName=function(){return"ExceptionsRepo"};e.QInARepoExceptions.prototype.isVersion1=function(t,r){var n=r.getOlapComponentType();var i=r.getModelCapabilities().supportsExceptionsV2();return!i&&n.isTypeOf(e.MemberType.ABSTRACT_MEMBER)};e.QInARepoExceptions.prototype.isVersion2=function(t,r){var n=r.getOlapComponentType();var i=r.getModelCapabilities().supportsExceptionsV2();return i&&n.isTypeOf(e.OlapComponentType.QUERY_MODEL)};e.QInARepoExceptions.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)){var a=r.getListByKey("Elements");this.importComponentWithList(t,a,n,i,o)}return n};e.QInARepoExceptions.prototype.importComponentWithList=function(e,t,r,n,i){var o=r;var a=o.getQueryModel().getExceptionManager();a.queueEventing();if(this.isVersion1(e,o)){this.importFormatV1(e,t,o,a)}else if(this.isVersion2(e,o)){this.importFormatV2(e,t,o,a)}a.resumeEventing();return a};e.QInARepoExceptions.prototype.importFormatV1=function(t,r,n,i){if(!e.PrUtils.isListEmpty(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=this.importExceptionWithoutEvaluates(t,i,l);if(e.notNull(p)){this.importEvaluates(l,n,p,t);p.setMeasure(n);p.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}this.removeModelElementsNotInInA(t,r,i,i.getAllExceptionsOfMeasure(n))}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){i.removeAllExceptionsOfMeasure(n)}};e.QInARepoExceptions.prototype.importExceptionWithoutEvaluates=function(t,r,n){var i=n.getStringByKey("Name");var o=n.getStringByKey("Text");var a=r.getByKey(i);if(e.isNull(a)&&this.newComponentCreationAllowed(t,n)){a=r.addNewException(i,o)}if(e.notNull(a)){a.stopEventing();a.setIsChangeable(true);a.resumeEventing();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("EvaluateDefault")){var l=e.QExceptionEvalType.lookupExceptionEvalType(n.getStringByKey("EvaluateDefault"));a.setEvaluateDefault(l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("ApplySettingsToHeader")){var p=e.QExceptionHeaderSettings.lookupExceptionHeaderSetting(n.getStringByKey("ApplySettingsToHeader"));a.setHeaderSettingBase(p)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("Active")){var s=n.getBooleanByKeyExt("Active",true);a.setActive(s)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("EvaluateBeforePostAggregation")){var u=n.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);a.setEvaluationAfterCalculations(!u)}a.queueEventing();this.importThresholds(n,a);a.resumeEventing()}return a};e.QInARepoExceptions.prototype.importFormatV2=function(t,r,n,i){if(!e.PrUtils.isListEmpty(r)){var o=r.size();for(var a=0;a<o;a++){var l=r.getStructureAt(a);var p=l.getListByKey("StructureContext");if(!e.PrUtils.isListEmpty(p)){var s=this.importContextItem(p.getStructureAt(0),n,i,null,t,l);if(e.notNull(s)){if(p.size()>1){this.importContextItem(p.getStructureAt(1),n,i,s,t,l)}s.setIsChangeable(l.getBooleanByKeyExt("Changegable",true))}}}this.removeModelElementsNotInInA(t,r,i,i.getValuesAsReadOnlyList())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){i.clear()}};e.QInARepoExceptions.prototype.importContextItem=function(t,r,n,i,o,a){var l=i;var p=r.getDimensionByNameFromExistingMetadata(t.getStringByKey("DimensionName"));if(e.notNull(p)){if(e.isNull(l)){l=this.importExceptionWithoutEvaluates(o,n,a)}if(e.notNull(l)){var s=l.isEvaluateAllMembers(p);if(t.containsKey("EvaluateAllMembers")){s=t.getBooleanByKeyExt("EvaluateAllMembers",false)}var u=this.getMemberFromContextItem(t,p,s);if(e.notNull(u)){if(e.isNull(i)){this.importEvaluates(a,u,l,o)}if(p.isMeasureStructure()){l.setMeasure(u)}else{l.setStructure(u)}l.displayOnOtherMember(u,p.getStructureMember(t.getStringByKey("DisplayOnOtherMember")));l.setEvaluateAllMembers(p,s)}}}return l};e.QInARepoExceptions.prototype.getMemberFromContextItem=function(t,r,n){var i=r.getStructureMember(t.getStringByKey("MemberName"));if(e.isNull(i)){var o=r.getAllStructureMembers();if(n&&!o.isEmpty()){i=o.get(0)}}return i};e.QInARepoExceptions.prototype.importEvaluates=function(t,r,n,i){n.queueEventing();var o=t.getListByKey("EvaluateOn");if(!e.PrUtils.isListEmpty(o)){n.removeAllEvaluates();var a=o.size();var l=r.getQueryModel();for(var p=0;p<a;p++){var s=o.getStructureAt(p);var u=s.getStringByKey("Name");var g=l.getFieldByName(u);if(e.isNull(g)){var y=l.getDimensionByNameFromExistingMetadata(u);if(e.notNull(y)){g=y.getKeyField()}}if(e.isNull(g)){g=r.getKeyFieldValue().getField()}if(e.isNull(g)){i.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",u,"'!"));return}if(!s.containsKey("Low")){i.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",u));return}var m=g.getValueType();var c=e.QInAValueUtils.importValueByType(i,s,"Low",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",m.getName()));return}var A=n._addNewEvaluateWithFieldInternal(g,c);if(s.containsKey("High")){var S=e.QInAValueUtils.importValueByType(i,s,"High",m);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",m.getName()));return}A.setHighValue(S)}A.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(s.getStringByKey("Evaluate")));var d=s.getStringByKey("Comparison");var I=e.QInAConverter.lookupComparison(d);if(e.isNull(I)){i.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",d,"'"));return}A.setOperator(I)}}n.resumeEventing()};e.QInARepoExceptions.prototype.importThresholds=function(t,r){var n=t.getListByKey("Threshold");if(!e.PrUtils.isListEmpty(n)){r.removeAllThresholds();var i=n.size();for(var o=0;o<i;o++){var a=n.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(g);if(g.getNumberOfParameters()===2){if(s){var y=a.getDoubleByKey("High");p.setHighValue(y)}else{var m=a.getStringByKey("High");p.setHigh(m)}}this.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoExceptions.prototype.importSettings=function(t,r){if(e.notNull(t)){var n=t.size();for(var i=0;i<n;i++){var o=t.getStructureAt(i);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}}};e.QInARepoExceptions.prototype.exportComponentWithStructure=function(t,r,n,i){var o=this.exportComponentWithList(t,r,i);if(e.notNull(o)){n.put("Elements",o)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoExceptions.prototype.exportComponentWithList=function(e,t,r){var n=null;if(this.isVersion1(e,t)){n=this.exportFormatV1(e,t)}else if(this.isVersion2(e,t)){n=this.exportFormatV2(e,t)}return n};e.QInARepoExceptions.prototype.exportFormatV1=function(t,r){var n=null;var i=r.getExceptions();if(e.notNull(i)){var o=i.size();if(o>0){n=e.PrFactory.createList();var a=t.isAbap(r);for(var l=0;l<o;l++){var p=i.get(l);var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isChangeable()||p.getModCounter()>0;if(s){var u=this.exportException(t,p,a);if(e.isNull(u)){break}n.add(u)}}}}return n};e.QInARepoExceptions.prototype.exportException=function(t,r,n){var i=e.PrFactory.createStructure();if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&!r.isChangeable()&&r.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){i.putString("Name",r.getName());i.putBoolean("Active",r.isActive());i.putBoolean("Changegable",r.isChangeable())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.isChangeable()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QExceptionProperties.QY_ACTIVE)){i.putBoolean("Active",r.isActive())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_BEFORE_POST_AGGREGATION)){i.putBoolean("EvaluateBeforePostAggregation",!r.isEvaluatedAfterCalculations())}i.putBoolean("Changegable",r.isChangeable());var o=r.getThresholds();this.exportThresholds(o,t,i,n);this.exportEvaluates(r.getEvaluates(),t,i,n);i.putString("Name",r.getName());i.putString("Text",r.getText());var a=r.getHeaderSetting();if(a!==e.QExceptionHeaderSettings.NONE){i.putString("ApplySettingsToHeader",a.getName())}i.putString("EvaluateDefault",r.getEvaluateDefault().toString())}var l=r.getSession().hasFeature(e.FeatureToggleOlap.INA_REPOSITORY_DELTA);if(l&&r.canMaterializeCompleteObject()){i.putBoolean("UserDefinedComponent",true)}return i};e.QInARepoExceptions.prototype.exportFormatV2=function(t,r){var n=null;var i=r.getExceptionManager();var o=i.size();if(o>0){n=e.PrFactory.createList();var a=t.isAbap(r);for(var l=0;l<o;l++){var p=i.get(l);var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.isChangeable()||p.getModCounter()>0;if(s){var u=this.getExportedExceptionStructureByName(n,p.getName());if(e.isNull(u)){u=this.exportException(t,p,a);if(e.notNull(u)){u.putNewList("StructureContext");n.add(u)}}if(e.notNull(u)){var g=u.getListByKey("StructureContext");this.exportStructureContextItem(t,g,p.getMeasure(),p);this.exportStructureContextItem(t,g,p.getStructure(),p)}}}}return n};e.QInARepoExceptions.prototype.getExportedExceptionStructureByName=function(t,r){var n=null;var i=t.size();for(var o=0;o<i;o++){var a=t.getStructureAt(o);if(e.XString.isEqual(a.getStringByKey("Name"),r)){n=a;break}}return n};e.QInARepoExceptions.prototype.exportStructureContextItem=function(t,r,n,i){if(e.notNull(n)){var o=r.addNewStructure();var a=n.getDimension();o.putString("DimensionName",a.getName());o.putString("MemberName",n.getName());var l=i.isEvaluateAllMembers(a);var p=t.mode===e.QModelFormat.INA_REPOSITORY_DELTA;var s=a.getDimensionType()===e.DimensionType.MEASURE_STRUCTURE;var u=s&&i.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_MEASURE_DIMENSION)||!s&&i.hasPropertyChanged(e.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_SECONDARY_STRUCTURE);if(!p&&l||p&&u){o.putBoolean("EvaluateAllMembers",l)}var g=i.getDisplayOnOtherMember(n);e.QInAExportUtil.setNameIfNotNull(o,"DisplayOnOtherMember",g)}};e.QInARepoExceptions.prototype.exportEvaluates=function(t,r,n,i){var o=r.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){if(t.hasElements()){var a=n.putNewList("EvaluateOn");var l=t.size();for(var p=0;p<l;p++){var s=a.addNewStructure();var u=t.get(p);s.putString("Name",u.getField().getName());s.putString("Evaluate",u.getEvaluate().toString());var g=u.getOperator();var y;if(g===e.ComparisonOperator.NOT_BETWEEN&&i){y="NOTBETWEEN"}else{y=e.QInAConverter.lookupComparisonInA(g)}s.putString("Comparison",y);e.QInAValueUtils.exportPlaceholderValue(r,"Low",s,u.getLowValue(),u.getValueType(),u.getQueryModel());if(!s.containsKey("Low")){s.putString("Low","")}if(g.getNumberOfParameters()>1){e.QInAValueUtils.exportPlaceholderValue(r,"High",s,u.getHighValue(),u.getValueType(),u.getQueryModel())}}}}};e.QInARepoExceptions.prototype.exportThresholds=function(t,r,n,i){var o=r.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(o){var a=n.putNewList("Threshold");var l=t.size();for(var p=0;p<l;p++){var s=t.get(p);var u=a.addNewStructure();var g=s.getName();if(!e.XString.isEqual(g,"Settings")){u.putStringNotNull("Name",g)}var y=s.getOperator();var m;if(y===e.ComparisonOperator.NOT_BETWEEN&&i){m="NOTBETWEEN"}else{m=e.QInAConverter.lookupComparisonInA(y)}u.putString("Comparison",m);var c=s.getValueType()===e.XValueType.DOUBLE;if(s.getLowXValue()!==null){if(c){u.putDouble("Low",s.getLowValue())}else{u.putString("Low",s.getLow())}}if(s.getHighXValue()!==null&&y.getNumberOfParameters()>1){if(c){u.putDouble("High",s.getHighValue())}else{u.putString("High",s.getHigh())}}if(!s.isEmpty()){this.exportSettings(s,r,u)}else{u.putInteger("AlertLevel",s.getAlertLevel().getLevel())}}}};e.QInARepoExceptions.prototype.exportSettings=function(t,r,n){var i=n.putNewList("Settings");var o=t.size();for(var a=0;a<o;a++){var l=t.get(a);var p=i.addNewStructure();p.putString("Name",l.getName());p.putInteger("Priority",l.getPriority());var s=l.getValue();if(e.isNull(s)||e.XString.isEqual(s,"")){r.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{p.putString("Value",s)}}};e.QInARepoField=function(){};e.QInARepoField.prototype=new e.QInARepository;e.QInARepoField.prototype._ff_c="QInARepoField";e.QInARepoField.prototype.getComponentType=function(){return e.OlapComponentType.FIELD};e.QInARepoField.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.isNull(a)){var l=r.getStringByKey("Name");var p=i;if(p.getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){a=p.addNewFormulaCalcField(e.PresentationType.lookup(r.getStringByKey("PresentationType")),l)}else{a=p.getFieldByName(l)}}if(e.notNull(a)){var s=r.getStringByKey("TextTransformation");if(e.notNull(s)){var u=e.QInAConverter.lookupTextTransformation(s);a.setTextTransformation(u)}a.setDisplayFormat(r.getStringByKey("DisplayFormat"));if(a.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){var g=r.getStructureByKey("Formula");if(e.notNull(g)){var y=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,a.getDimension(),r.getStructureByKey("Formula"),null,o);a.setFormulaItem(y)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlip")){var m=r.getBooleanByKeyExt("AutoSignFlip",false);a.setAutoSignFlip(m)}var c=r.getStringByKey("CrossCalculationMeasure");if(e.notNull(c)){a.setCrossCalculationMeasure(c)}}}return a};e.QInARepoField.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putStringNotNull("DisplayFormat",o.getDisplayFormat());var a=o.getTextTransformation();if(e.notNull(a)){var l=e.QInAConverter.lookupTextTransformationInA(a);n.putString("TextTransformation",l)}if(o.getDimension().getDimensionType()===e.DimensionType.FORMULA_CALCULATED_DIMENSION){n.putString("PresentationType",o.getPresentationType().getName());var p=o;if(p.getFormulaItem()!==null){e.QInARepoMemberAbstract.exportFormulaItem(t,p.getFormulaItem(),n.putNewStructure("Formula"),o)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){if(p.isAutoSignFlip()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&p.hasPropertyChanged(e.QFieldProperties.QY_AUTO_SIGN_FLIP)){n.putBoolean("AutoSignFlip",p.isAutoSignFlip())}}n.putStringNotNull("CrossCalculationMeasure",p.getCrossCalculationMeasure())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilter=function(){};e.QInARepoFilter.prototype=new e.QInARepository;e.QInARepoFilter.prototype._ff_c="QInARepoFilter";e.QInARepoFilter.prototype.exportFilter=function(e,t,r,n,i){return e.exportFilterExpression(r)};e.QInARepoFilter.prototype.isValidFilterExpression=function(t){if(e.isNull(t)){return false}var r=t.getFilterRootElement();if(e.isNull(r)){return false}var n=r.getOlapComponentType();return n!==e.FilterComponentType.FILTER_ACROSS_MODELS&&n!==e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterAcrossModels=function(){};e.QInARepoFilterAcrossModels.prototype=new e.QInARepository;e.QInARepoFilterAcrossModels.prototype._ff_c="QInARepoFilterAcrossModels";e.QInARepoFilterAcrossModels.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_ACROSS_MODELS};e.QInARepoFilterAcrossModels.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Name");var l=n;if(e.isNull(l)){l=e.QFactory.createFilterAcrossModels(o,a)}var p=r.getListByKey("Links");var s=p.size();for(var u=0;u<s;u++){var g=p.getStructureAt(u);var y=e.QInARepoUtils.importLinkPart(o,g.getStructureByKey("FirstDimension"));var m=e.QInARepoUtils.importLinkPart(o,g.getStructureByKey("SecondDimension"));l.addNewLinkFromParts(y,m)}var c=r.getListByKey("MeasureNames");var A=c.size();for(var S=0;S<A;S++){l.addMeasureName(c.getStringAt(S))}var d=r.getListByKey("SecondaryMeasureNames");if(e.notNull(d)){for(var I=0;I<d.size();I++){l.addSecondaryMeasureName(d.getStringAt(I))}}e.QInARepoUtils.importLayeredFilters(t,l,r.getListByKey("LayeredFilters"));if(r.containsKey("PreferPrequeryBasedStrategy")){l.setPreferPrequeryBasedStrategy(true)}return l};e.QInARepoFilterAcrossModels.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=n.putNewList("Links");var l=o.getLinks().getIterator();while(l.hasNext()){var p=a.addNewStructure();var s=l.next();e.QInARepoUtils.exportLinkPart(t,p.putNewStructure("FirstDimension"),s.getFirstPart());e.QInARepoUtils.exportLinkPart(t,p.putNewStructure("SecondDimension"),s.getSecondPart())}var u=n.putNewList("MeasureNames");u.addAllStrings(o.getMeasureNames());var g=n.putNewList("SecondaryMeasureNames");g.addAllStrings(o.getSecondaryMeasureNames());n.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));if(o.getPreferPrequeryBasedStrategy()){n.putBoolean("PreferPrequeryBasedStrategy",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterAlgebra=function(){};e.QInARepoFilterAlgebra.prototype=new e.QInARepository;e.QInARepoFilterAlgebra.prototype._ff_c="QInARepoFilterAlgebra";e.QInARepoFilterAlgebra.prototype.getComponentType=function(){return e.FilterComponentType.BOOLEAN_ALGEBRA};e.QInARepoFilterAlgebra.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=r.getStringByKey("Code");var s;if(e.XString.isEqual(p,"And")){s=e.QFilterAnd._create(o,a)}else if(e.XString.isEqual(p,"Not")){s=e.QFilterNot._create(o,a)}else{s=e.QFilterOr._create(o,a)}var u=r.getStringByKey("Id");s.setUniqueId(u);var g=r.getListByKey("SubSelections");if(e.notNull(g)){var y=g.size();for(var m=0;m<y;m++){var c=g.getStructureAt(m);var A=t.importComponent(null,c,null,s,o);if(e.notNull(A)){s.add(A)}}}return s};e.QInARepoFilterAlgebra.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r.getComponentType();var a=r;if(o.isTypeOf(e.FilterComponentType.AND)){n.putString("Code","And");n.putString("Id",a.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.OR)){n.putString("Code","Or");n.putString("Id",a.getUniqueId())}else if(o.isTypeOf(e.FilterComponentType.NOT)){n.putString("Code","Not");n.putString("Id",a.getUniqueId())}var l=n.putNewList("SubSelections");var p=a.size();for(var s=0;s<p;s++){var u=t.exportComponent(null,a.get(s),null,i);if(e.notNull(u)){l.add(u)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterAll=function(){};e.QInARepoFilterAll.prototype=new e.QInARepository;e.QInARepoFilterAll.prototype._ff_c="QInARepoFilterAll";e.QInARepoFilterAll.prototype.getComponentType=function(){return e.OlapComponentType.SELECTOR};e.QInARepoFilterAll.prototype.getTagName=function(){return"FilterRepo"};e.QInARepoFilterAll.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getStructureByKey("DynamicFilter");if(e.notNull(l)){var p=a.getDynamicFilter();t.importFilterExpression(p,l,a,o)}else if(a.isDynamicFilterInitialized()){a.setDynamicFilter(null)}var s=r.getStructureByKey("VisibilityFilter");if(e.notNull(s)){var u=a.getVisibilityFilter();t.importFilterExpression(u,s,a,o)}else if(a.isVisibilityFilterInitialized()){a.setVisibilityFilter(null)}var g=r.getStructureByKey("FixedFilter");if(e.notNull(g)){var y=a.getFixedFilter();t.importFilterExpression(y,g,a,o)}else if(a.isFixedFilterInitialized()){a.setFixedFilter(null)}var m=r.getStructureByKey("ValueHelpFilter");if(e.notNull(m)){var c=a.getValuehelpFilter();t.importFilterExpression(c,m,a,o)}var A=r.getStructureByKey("ValueHelpVisibilityFilter");if(e.notNull(A)){var S=a.getValuehelpVisibilityFilter();t.importFilterExpression(S,A,a,o)}var d=r.getListByKey("LayeredFilters");if(e.notNull(d)){var I=e.QInARepoUtils.importLayeredFilters(t,a,d);e.XCollectionUtils.forEach(I,function(e){e.setPreserveOnRepoSerialization(true)}.bind(this))}return a};e.QInARepoFilterAll.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(o.isDynamicFilterInitialized()){var a=o.getDynamicFilter();var l=t.exportFilterExpression(a);n.put("DynamicFilter",l)}if(o.isVisibilityFilterInitialized()){var p=o.getVisibilityFilter();var s=t.exportFilterExpression(p);n.put("VisibilityFilter",s)}if(o.isFixedFilterInitialized()){var u=o.getFixedFilter();var g=t.exportFilterExpression(u);n.put("FixedFilter",g)}if(o.isValueHelpFilterInitialized()){var y=o.getValuehelpFilter();var m=t.exportFilterExpression(y);n.put("ValueHelpFilter",m)}if(o.isValueHelpVisibilityFilterInitialized()){var c=o.getValuehelpVisibilityFilter();var A=t.exportFilterExpression(c);n.put("ValueHelpVisibilityFilter",A)}var S=e.QInARepoUtils.exportLayeredFiltersExt(t,o,function(t){return e.XBooleanValue.create(t.isPreservedInRepoSerialization())}.bind(this));if(S.hasElements()){n.put("LayeredFilters",S)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterCartesianList=function(){};e.QInARepoFilterCartesianList.prototype=new e.QInARepository;e.QInARepoFilterCartesianList.prototype._ff_c="QInARepoFilterCartesianList";e.QInARepoFilterCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_LIST};e.QInARepoFilterCartesianList.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=n;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterCartesianList(a):e.QFactory.createFilterCartesianList(o)}var s=r.getStringByKey("FieldName");if(e.notNull(s)&&e.notNull(o)){var u=o.getFieldAccessorSingle();var g=null;if(e.isNull(u)||r.containsKey("QY_CACHE_CONTEXT")){var y=r.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(y)){return null}var m=e.QInARepoUtils.importCacheKey(y);var c=o.getOlapEnv().getFieldMetadata(m);if(e.isNull(c)&&y.containsKey("StorageName")){var A=y.getStringByKey("StorageName");g=e.QInARepoUtils.getFormulaCalcDimField(o,m.getKey1(),A);if(e.notNull(g)){p.setField(g)}}if(e.notNull(c)){p.setFieldMetadata(c)}else if(e.isNull(g)){return null}}else{var S=u.getFieldByName(s);if(e.isNull(S)){S=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(S)){return null}}if(S.getDimension().isEnforcedDynamicValue()&&o.getQueryManager()!==null&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null}p.setField(S);var d=r.getListByKey("SupplementsFieldNames");if(e.notNull(d)){var I=d.size();for(var f=0;f<I;f++){var N=d.getStringAt(f);var v=u.getFieldByName(N);p.addSupplementField(v)}}}}e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),r,p,e.FilterComponentType.CARTESIAN_LIST);var T=r.getStringByKey("Id");p.setUniqueId(T);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ConvertToFlatSelection")){var R=r.getBooleanByKeyExt("ConvertToFlatSelection",false);p.setConvertToFlatFilter(R)}var E=r.getListByKey("Elements");p.clear();if(e.notNull(E)){var C=E.size();for(var Q=0;Q<C;Q++){var M=E.getStructureAt(Q);var D=t.importComponent(null,M,null,p,o);var L=D;p.add(L)}}return p};e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getFieldMetadata();var l=false;if(e.notNull(a)){var p=a.getDimensionMetadata();if(e.isNull(p)){var s=o.getField();var u=s.getDimension();if(e.notNull(u)){l=u.isEnforcedDynamicValue()}}else{l=p.isEnforcedDynamicValue()}n.putString("FieldName",a.getName());var g=o.getFilterExpression();if(e.notNull(g)){var y=g.getParent();if(e.notNull(y)&&y.getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){var m=a.getCacheKey();n.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(m,o.getQueryManager()))}}}if(l&&o.getQueryManager()!==null&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null}n.putString("Id",o.getUniqueId());var c=o.getHierarchyName();if(e.notNull(c)){var A=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),n,null,A,o.getQueryManager(),c,o.getHierarchyDueDate(),o.getHierarchyVersion())}if(t.capabilities.supportsSupplements()){var S=o.getSupplementFieldNames();if(e.XCollectionUtils.hasElements(S)){var d=n.putNewList("SupplementsFieldNames");d.addAllStrings(S)}}var I=o.isConvertToFlatFilter();var f=n.putNewList("Elements");var N=o.size();for(var v=0;v<N;v++){var T=o.getOp(v);var R=t.exportComponent(null,T,null,i);f.add(R);I=I||T.isConvertToFlatFilter()}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_CL)){n.putBoolean("ConvertToFlatSelection",I)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterCartesianProduct=function(){};e.QInARepoFilterCartesianProduct.prototype=new e.QInARepository;e.QInARepoFilterCartesianProduct.prototype._ff_c="QInARepoFilterCartesianProduct";e.QInARepoFilterCartesianProduct.prototype.getComponentType=function(){return e.FilterComponentType.CARTESIAN_PRODUCT};e.QInARepoFilterCartesianProduct.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=n;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterCartesianProduct(a):e.QFactory.createFilterCartesianProduct(o)}p.clear();var s=r.getStringByKey("Id");p.setUniqueId(s);var u=r.getListByKey("Elements");if(e.notNull(u)){for(var g=0;g<u.size();g++){var y=u.getStructureAt(g);var m=t.importComponent(null,y,null,p,o);var c=m;p.add(c)}}return p};e.QInARepoFilterCartesianProduct.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Id",o.getUniqueId());var a=n.putNewList("Elements");for(var l=0;l<o.size();l++){var p=o.getCartesianChild(l);var s=t.exportComponent(null,p,null,i);if(e.notNull(s)){a.add(s)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterCellValueOperand=function(){};e.QInARepoFilterCellValueOperand.prototype=new e.QInARepository;e.QInARepoFilterCellValueOperand.prototype._ff_c="QInARepoFilterCellValueOperand";e.QInARepoFilterCellValueOperand.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_CELL_VALUE_OPERAND};e.QInARepoFilterCellValueOperand.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.isNull(a)){a=e.QFilterCellValueOperand._create(o,null,null,null,null)}var l=r.getStringByKey("Comparison");var p=e.QInAConverter.lookupComparison(l);a.setComparisonOperator(p);var s=r.getBooleanByKey("IsExcluding");a.setIsExcluding(s);var u=r.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,u,a,null,o);return a};e.QInARepoFilterCellValueOperand.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putBoolean("IsExcluding",o.isExcluding());var a=o.getComparisonOperator();n.putString("Comparison",e.QInAConverter.lookupComparisonInA(a));var l=e.QInARepoFilterOperation.exportValues(t,o);n.put("Values",l);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterDynamicTimeRegularRange=function(){};e.QInARepoFilterDynamicTimeRegularRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeRegularRange.prototype._ff_c="QInARepoFilterDynamicTimeRegularRange";e.QInARepoFilterDynamicTimeRegularRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE};e.QInARepoFilterDynamicTimeRegularRange.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Name");var l=n;if(e.isNull(l)){l=e.QFactory.createFilterDynamicTimeRegularRange(o,a)}e.QInARepoUtils.importFilterTimeRange(r,l);e.QInARepoUtils.importFilterShiftableTimeRange(r,l);l.setLookAhead(r.getIntegerByKey("LookAhead"));l.setLowValue(r.getStringByKey("LowValue"));var p=r.getStringByKey("LowValueType");if(e.notNull(p)){l.setLowValueType(e.QInAConverter.lookupValueType(p))}return l};e.QInARepoFilterDynamicTimeRegularRange.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(n,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(n,o);n.putInteger("LookAhead",o.getLookAhead());n.putString("LowValue",o.getLowValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterDynamicTimeToDateRange=function(){};e.QInARepoFilterDynamicTimeToDateRange.prototype=new e.QInARepository;e.QInARepoFilterDynamicTimeToDateRange.prototype._ff_c="QInARepoFilterDynamicTimeToDateRange";e.QInARepoFilterDynamicTimeToDateRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE};e.QInARepoFilterDynamicTimeToDateRange.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Name");var l=n;if(e.isNull(l)){l=e.QFactory.createFilterDynamicTimeToDateRange(o,a)}e.QInARepoUtils.importFilterTimeRange(r,l);e.QInARepoUtils.importFilterShiftableTimeRange(r,l);l.setMemberValue(r.getStringByKey("Member"));var p=r.getStringByKey("LowValueType");if(e.notNull(p)){l.setLowValueType(e.QInAConverter.lookupValueType(p))}return l};e.QInARepoFilterDynamicTimeToDateRange.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(n,o);e.QInARepoUtils.exportShiftableTimeRangeFilter(n,o);n.putString("Member",o.getMemberValue());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterElement=function(){};e.QInARepoFilterElement.prototype=new e.QInARepository;e.QInARepoFilterElement.prototype._ff_c="QInARepoFilterElement";e.QInARepoFilterElement.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_ELEMENT};e.QInARepoFilterElement.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=n;if(r.containsKey("Operator")){l=t.importFilterAlgebra(a,r,o)}else{var p=r.getStructureByKey("SetOperand");if(e.isNull(p)){if(r.containsKey("GeometryOperand")){l=t.importFilterGeo(a,r,o)}}else{l=t.importCartesianList(p,l,a,o)}}return l};e.QInARepoFilterElement.prototype.m_exportingAtLevel1=false;e.QInARepoFilterElement.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getComponentType();if(a.isTypeOf(e.FilterComponentType.BOOLEAN_ALGEBRA)){if(a===e.FilterComponentType.CARTESIAN_LIST){t.exportCartesianList(o,n)}else if(a===e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){t.exportConvertedTimeCartesianList(o,n)}else if(a===e.FilterComponentType.CARTESIAN_PRODUCT){t.exportFilterCartesianProduct(o,n)}else{if(this.shouldContinueExport(o,t)){t.exportFilterAlgebra(o,n);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false}}}}else if(a.isTypeOf(e.FilterComponentType.OPERATION)){var l=o;var p=l.getComparisonOperator();if(e.notNull(p)){if(p.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){t.exportFilterGeo(l,n)}else{if(t.capabilities.supportsSetOperand()){var s=e.PrFactory.createStructure();var u=l.getFieldMetadata();if(e.notNull(u)){s.putString("FieldName",u.getName());var g=l.getHierarchyName();if(e.notNull(g)){var y=l.getFilterExpression()!==null?l.getFilterExpression():l.getParent().getFilterExpression();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(o),s,null,y,l.getQueryManager(),g,l.getHierarchyDueDate(),l.getHierarchyVersion())}if(l.isConvertToFlatFilter()){s.putBoolean("ConvertToFlatSelection",true)}var m=s.putNewList("Elements");var c=m.addNewStructure();t.exportFilterOperation(l,c);if(e.notNull(n)){n.put("SetOperand",s)}}}}}}else if(a.isTypeOf(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){var A=e.PrFactory.createStructure();var S=A.putNewList("Elements");S.add(t.exportCellValueOperand(o));n.put("CellValueOperand",A)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterElement.prototype.shouldContinueExport=function(t,r){var n=e.notNull(r.variableProcessingDirective)&&r.variableProcessingDirective===e.ProcessingStep.VARIABLE_DEFINITION;if(!n){return true}var i=t.getQueryModel();var o=t.getModelCapabilities();if(o.supportsComplexTupleFilter()&&e.notNull(i)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true}return false}return true};e.QInARepoFilterExpression=function(){};e.QInARepoFilterExpression.prototype=new e.QInARepository;e.QInARepoFilterExpression.prototype._ff_c="QInARepoFilterExpression";e.QInARepoFilterExpression.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_EXPRESSION};e.QInARepoFilterExpression.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.XString.isEqual(a.getName(),"selectionSpaceContainer")===false||a.getFilterRootElement()===null){a.setComplexRoot(null);var l=a.getModelCapabilities().supportsCellValueOperand();if(l){a.setIsSuppressingNulls(false);a.clearCellValueFilter()}if(e.notNull(r)){var p=r.getStringByKey("Id");a.setUniqueId(p);if(l){var s=r.getBooleanByKeyExt("IsSuppressingNulls",false);a.setIsSuppressingNulls(s)}var u=r.getStructureByKey("FilterRoot");if(e.notNull(u)){var g=t.importComponent(null,u,null,a,o);var y=g;a.setComplexRoot(y)}if(l){var m=r.getListByKey("CellValueOperand");if(e.notNull(m)){for(var c=0;c<m.size();c++){var A=m.getStructureAt(c);var S=t.importComponent(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND,A,null,a,o);a.addCellValueFilter(S)}}}}}return n};e.QInARepoFilterExpression.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Id",o.getUniqueId());n.putBoolean("IsSuppressingNulls",o.isSuppressingNulls());var a=o.getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,e.QImExFlag.DEFAULT_ALL);n.put("FilterRoot",l)}if(o.getModelCapabilities().supportsCellValueOperand()){var p=n.putNewList("CellValueOperand");var s=o.getCellValueOperands();for(var u=0;u<s.size();u++){var g=s.get(u);var y=t.exportCellValueOperand(g);p.add(y)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterFixed=function(){};e.QInARepoFilterFixed.prototype=new e.QInARepository;e.QInARepoFilterFixed.prototype._ff_c="QInARepoFilterFixed";e.QInARepoFilterFixed.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_FIXED};e.QInARepoFilterFixed.prototype.getTagName=function(){return"FixedFilterRepo"};e.QInARepoFilterFixed.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(r)){var l=i;a=t.importFilterExpression(null,r,l,o);if(e.notNull(l)&&e.notNull(a)){l.setFixedFilter(a)}}return a};e.QInARepoFilterFixed.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(!o.isFixedFilterInitialized()){return null}var a=o.getFixedFilter();var l=t.exportFilterExpression(a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,l,i)};e.QInARepoFilterFixedTimeRange=function(){};e.QInARepoFilterFixedTimeRange.prototype=new e.QInARepository;e.QInARepoFilterFixedTimeRange.prototype._ff_c="QInARepoFilterFixedTimeRange";e.QInARepoFilterFixedTimeRange.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_FIXED_TIME_RANGE};e.QInARepoFilterFixedTimeRange.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Name");var l=n;if(e.isNull(l)){l=e.QFactory.createFilterFixedTimeRange(o,a)}var p=null;var s=r.getStringByKey("LowValueType");if(e.notNull(s)){p=e.QInAConverter.lookupValueType(s)}var u=e.TimeRangeFilterType.lookup(r.getStringByKey("TimeRangeFilterType"));if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_CLOSING_PERIOD){l.setOpeningPeriodToClosingPeriodFixedRange()}else if(u===e.TimeRangeFilterType.FIXED_START_TO_CLOSING_OPERIOD){l.setStartToClosingPeriodFixedRange(r.getStringByKey("LowValue"),p)}else if(u===e.TimeRangeFilterType.FIXED_OPENING_PERIOD_TO_END){l.setOpeningPeriodToEndFixedRange("LowValue",p)}e.QInARepoUtils.importFilterTimeRange(r,l);return l};e.QInARepoFilterFixedTimeRange.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());e.QInARepoUtils.exportTimeRangeFilter(n,o);n.putString("LowValue",o.getLowValue());n.putString("TimeRangeFilterType",o.getRangeFilterType().getName());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterGeo=function(){};e.QInARepoFilterGeo.prototype=new e.QInARepository;e.QInARepoFilterGeo.prototype._ff_c="QInARepoFilterGeo";e.QInARepoFilterGeo.tryCreateGeometry=function(t){var r=e.XGeometryValue.createGeometryValueWithWkt(t);if(e.isNull(r)){r=e.XStringValue.create(t)}return r};e.QInARepoFilterGeo.prototype.getComponentType=function(){return e.FilterComponentType.SPATIAL_FILTER};e.QInARepoFilterGeo.prototype.getTagName=function(){return"GeometryOperandRepo"};e.QInARepoFilterGeo.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=o.getFieldAccessorSingle();var p=r.getStringByKey("Comparison");var s=r.getStringByKey("FieldName");var u=r.getStringByKey("Value1");var g=null;if(e.XStringUtils.isNotNullAndNotEmpty(p)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(u)){var y=e.QInAConverter.lookupComparison(p);if(e.notNull(y)){if(y.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){var m=l.getFieldByName(s);if(e.notNull(m)){g=e.QFactory.createFilterOperationWithOperator(a,m,y);var c=e.QInARepoFilterGeo.tryCreateGeometry(u);g.getLow().setValue(c);var A=r.getStringByKey("Value2");if(e.XStringUtils.isNotNullAndNotEmpty(A)){var S=e.QInARepoFilterGeo.tryCreateGeometry(A);g.getHigh().setValue(S)}var d=r.getStringByKey("Value3");if(e.XStringUtils.isNotNullAndNotEmpty(d)){var I=e.QInARepoFilterGeo.tryCreateGeometry(d);g.getThird().setValue(I)}}}}}return g};e.QInARepoFilterGeo.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getComparisonOperator();if(!a.isTypeOf(e.SpatialComparisonOperator._SPATIAL)){throw e.XException.createIllegalStateException("Not a spatial operator")}n.putString("Comparison",e.QInAConverter.lookupComparisonInA(a));var l=o.getFieldMetadata();n.putString("FieldName",l.getName());var p=o.getLow();var s=o.getDataSource();if(e.isNull(s)){if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,p.getValueType());var u=p.getGeometry().getSrid();if(t.capabilities.supportsSpatialFilterSrid()&&e.notNull(u)){n.putInteger("SRID",u.getInteger())}}}else{if(e.notNull(p)&&p.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value1",n,p,e.XValueType.STRING)}var g=t.exportDataSource(s,false);n.put("DataSource",g)}var y=o.getHigh();if(e.notNull(y)&&y.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value2",n,y,e.XValueType.STRING)}var m=o.getThird();if(e.notNull(m)&&m.getValue()!==null){e.QInAValueUtils.exportFilterValue(t,"Value3",n,m,e.XValueType.STRING)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterManager=function(){};e.QInARepoFilterManager.prototype=new e.QInARepository;e.QInARepoFilterManager.prototype._ff_c="QInARepoFilterManager";e.QInARepoFilterManager.prototype.getComponentType=function(){return e.OlapComponentType.OLAP_FILTER_MANAGER};e.QInARepoFilterManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.isNull(a)){a=o.getOlapEnv().getFilterManager()}var l=r.getStructureByKey("OlapFilterManager");var p=l.getStructureByKey("OlapFilters");var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=a.getFilterByName(u);t.importFilterExpression(g,p.getStructureByKey(u),a,a.getContext())}return a};e.QInARepoFilterManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=n.putNewStructure("OlapFilterManager");var a=o.putNewStructure("OlapFilters");var l=r;var p=l.getFilters();var s=p.getKeysAsIteratorOfString();while(s.hasNext()){var u=s.next();var g=p.getByKey(u);if(e.QInARepoUtils.isValidFilterExpressionForRepository(g)){a.put(u,t.exportFilterExpression(g))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterMeasureBased=function(){};e.QInARepoFilterMeasureBased.prototype=new e.QInARepository;e.QInARepoFilterMeasureBased.prototype._ff_c="QInARepoFilterMeasureBased";e.QInARepoFilterMeasureBased.prototype.getComponentType=function(){return e.FilterComponentType.FILTER_MEASURE_BASED};e.QInARepoFilterMeasureBased.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStringByKey("Name");var l=n;if(e.isNull(l)){l=e.QFactory.createFilterMeasureBased(o,a)}var p=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,null,r.getStructureByKey("Formula"),null,o);l.setFormula(p);var s=r.getListByKey("AggregationFieldNames");var u=s.size();for(var g=0;g<u;g++){l.addDimensionContext(s.getStringAt(g))}e.QInARepoUtils.importLayeredFilters(t,l,r.getListByKey("LayeredFilters"));return l};e.QInARepoFilterMeasureBased.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),n.putNewStructure("Formula"),o);n.putString("Name",o.getName());var a=n.putNewList("AggregationFieldNames");a.addAllStrings(o.getDimensionContext());n.put("LayeredFilters",e.QInARepoUtils.exportLayeredFilters(t,o));return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterOperation=function(){};e.QInARepoFilterOperation.prototype=new e.QInARepository;e.QInARepoFilterOperation.prototype._ff_c="QInARepoFilterOperation";e.QInARepoFilterOperation.importValues=function(t,r,n,i,o){var a=r.size();for(var l=0;l<a&&l<3;l++){var p=r.getStructureAt(l);var s=n.getValueAt(l);var u=p.getStringByKey("Type");var g=e.QInAConverter.lookupValueType(u);if(g===e.XValueType.VARIABLE){s.setFilterValueType(g);var y=p.getStringByKey("Value");if(e.notNull(y)){var m=o.getVariableContainer().getVariables();var c=m.getByKey(y);s.setVariableValue(c)}}else{if(g===e.XValueType.CURRENT_MEMBER){s.setFilterValueType(g)}var A=e.PrUtils.getListProperty(p,"LowNavigations");if(e.isNull(A)){A=e.PrUtils.getListProperty(p,"Value")}if(e.notNull(A)){var S=s.getMemberNavigations();S.clear();var d=A.size();for(var I=0;I<d;I++){var f=e.QInARepoFilterOperation.importMemberNavigation(A.getStructureAt(I));S.add(f)}}if(g!==e.XValueType.CURRENT_MEMBER){e.QInARepoUtils.importSupplementsAndValue(t,s,p,null,null,i)}}}};e.QInARepoFilterOperation.importMemberNavigation=function(t){var r=e.QFactory.createMemberNavigation(e.CurrentMemberFunction.lookup(t.getStringByKey("Function")));if(t.containsKey("Parameters")){var n=t.getListByKey("Parameters");var i=n.size();for(var o=0;o<i;o++){var a=n.getStructureAt(o);if(a.containsKey("Navigations")){var l=a.getListByKey("Navigations");var p=l.size();for(var s=0;s<p;s++){r.addNavigation(e.QInARepoFilterOperation.importMemberNavigation(l.getStructureAt(s)))}}else{if(a.containsKey("Level")){var u=a.getByKey("Level");if(u.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithLevelNumber(u.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithLevelLiteral(u.getString()))}}else if(a.containsKey("Member")){r.addParameter(e.QFactory.createNavigationParameterWithMemberName(a.getStringByKey("Member")))}else if(a.containsKey("NoValuesAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithNoValuesAboveLevel(a.getStringByKey("NoValuesAboveLevel")))}else if(a.containsKey("ErrorAboveLevel")){r.addParameter(e.QFactory.createNavigationParameterWithErrorAboveLevel(a.getStringByKey("ErrorAboveLevel")))}else if(a.containsKey("Shift")){var g=a.getStructureByKey("Shift");r.addParameter(e.QFactory.createNavigationParameterWithShift(g.getStringByKey("Level"),g.getIntegerByKey("Constant")))}else if(a.containsKey("Range")){var y=a.getStructureByKey("Range");r.addParameter(e.QFactory.createNavigationParameterWithRange(y.getStringByKey("Level"),y.getIntegerByKey("OffsetLow"),y.getIntegerByKey("OffsetHigh")))}else{var m=a.getByKey("Constant");if(m.isNumeric()){r.addParameter(e.QFactory.createNavigationParameterWithIntegerConstant(m.getInteger()))}else{r.addParameter(e.QFactory.createNavigationParameterWithStringConstant(m.getString()))}}}}}return r};e.QInARepoFilterOperation.exportValues=function(t,r){var n=e.PrFactory.createList();var i=r.size();for(var o=0;o<i;o++){var a=r.getValueAt(o);var l=n.addNewStructure();var p=a.getFilterValueType();if(p===e.XValueType.VARIABLE){l.putString("Type","Variable");e.QInARepoUtils.setNameIfNotNull(l,"Value",a.getVariableValue())}else{var s;if(p===e.XValueType.CURRENT_MEMBER){l.putString("Type","CurrentMember")}var u=null;var g=a.getFieldValue();if(e.notNull(g)){u=g.getField()}e.QInARepoUtils.exportSupplementsAndValue(t,null,l,u,a,null);var y=a.getMemberNavigations();var m=y.size();if(m>0){s=l.putNewList("LowNavigations");for(var c=0;c<m;c++){e.QInARepoFilterOperation.exportMemberNavigation(y.get(c),s.addNewStructure())}}}}return n};e.QInARepoFilterOperation.exportMemberNavigation=function(t,r){r.putString("Function",t.getMemberFunction().getName());var n=t.getParameters();if(e.notNull(n)){var i=n.size();var o=r.putNewList("Parameters");for(var a=0;a<i;a++){var l=n.get(a);var p=o.addNewStructure();var s=l.getMemberNavigationType();var u=e.QInAConverter.lookupMemberNavigationTypeInA(s);if(s===e.MemberNavigationType.FUNCTION_PARAM_SHIFT||s===e.MemberNavigationType.FUNCTION_PARAM_RANGE){p=p.putNewStructure(u);e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"Level",l.getLevelValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"Constant",l.getConstantValue());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"OffsetLow",l.getOffSetLow());e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,"OffsetHigh",l.getOffsetHigh())}else{if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getLevelValue())){if(!e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getConstantValue())){e.QInARepoFilterOperation.setKeyValueForMemberNavigation(p,u,l.getFunctionName())}}}}}var g=t.getNavigations();if(e.notNull(g)){var y;if(r.containsKey("Parameters")){y=r.getListByKey("Parameters")}else{y=r.putNewList("Parameters")}var m=y.addNewStructure();var c=m.putNewList("Navigations");var A=g.size();for(var S=0;S<A;S++){e.QInARepoFilterOperation.exportMemberNavigation(g.get(S),c.addNewStructure())}}};e.QInARepoFilterOperation.setKeyValueForMemberNavigation=function(t,r,n){if(e.isNull(n)){return false}if(n.getValueType().isNumber()){t.putDouble(r,n.getDouble())}else{t.putString(r,n.toString())}return true};e.QInARepoFilterOperation.prototype.getComponentType=function(){return e.FilterComponentType.OPERATION};e.QInARepoFilterOperation.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=n;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterOperation(a,null):e.QFactory.createFilterOperation(o,null)}var s=r.getStringByKey("FieldName");var u=null;if(e.notNull(s)&&e.notNull(o)){var g=o.getFieldAccessorSingle();var y=null;if(e.isNull(g)||r.containsKey("QY_CACHE_CONTEXT")){var m=r.getStructureByKey("QY_CACHE_CONTEXT");if(e.isNull(m)){return null}var c=e.QInARepoUtils.importCacheKey(m);var A=o.getOlapEnv().getFieldMetadata(c);if(e.isNull(A)&&m.containsKey("StorageName")){y=e.QInARepoUtils.getFormulaCalcDimField(o,c.getKey1(),m.getStringByKey("StorageName"));if(e.notNull(y)){p.setField(y)}}if(e.notNull(A)){p.setFieldMetadata(A)}else if(e.isNull(y)){return null}}else{u=g.getFieldByName(s);if(e.isNull(u)){y=e.QInARepoUtils.getFormulaCalcDimField(o,s,o.getQueryManager().getClientQueryObjectStorageName());if(e.isNull(y)){return null}}p.setField(u)}}var S=r.getStringByKeyExt("Comparison","=");if(e.notNull(S)){var d=e.QInAConverter.lookupComparison(S);if(e.isNull(d)){t.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate2("Unsupported comparison operator: ",S))}p.setComparisonOperator(d)}else{p.setComparisonOperator(null)}var I=r.getBooleanByKeyExt("IsExcluding",false);if(I){p.setSetSign(e.SetSign.EXCLUDING)}else{p.setSetSign(e.SetSign.INCLUDING)}var f=r.getBooleanByKeyExt("HasLevelOffset",false);if(!f){p.resetLevelOffset()}else{var N=r.getIntegerByKeyExt("LevelOffset",0);p.setLevelOffset(N)}var v=r.getBooleanByKeyExt("HasDepth",false);if(!v){p.resetDepth()}else{var T=r.getIntegerByKeyExt("Depth",0);p.setDepth(T)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ConvertToFlatSelection")){p.setConvertToFlatFilter(r.getBooleanByKeyExt("ConvertToFlatSelection",false))}var R=r.getStringByKey("Id");p.setUniqueId(R);var E=r.getDoubleByKeyExt("Exactness",0);p.setExactness(E);e.QInARepoHierarchy.importHierarchyForFilter(t.isAbap(o),t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),r,p,e.FilterComponentType.OPERATION);var C=r.getListByKey("Values");e.QInARepoFilterOperation.importValues(t,C,p,u,o);return p};e.QInARepoFilterOperation.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Id",o.getUniqueId());var a=o.getFieldMetadata();e.QInARepoUtils.setNameIfNotNull(n,"FieldName",a);var l=o.getFilterExpression();if(e.notNull(a)){if(e.notNull(l)){var p=l.getParent();if(e.notNull(p)&&l.getParent().getOlapComponentType()===e.OlapComponentType.OLAP_FILTER_MANAGER){var s=a.getCacheKey();n.put("QY_CACHE_CONTEXT",e.QInARepoUtils.exportCacheKey(s,o.getQueryManager()))}}}var u=o.getComparisonOperator();n.putString("Comparison",e.QInAConverter.lookupComparisonInA(u));n.putBoolean("IsExcluding",o.getSetSign()===e.SetSign.EXCLUDING);n.putBoolean("HasLevelOffset",o.hasLevelOffset());if(o.hasLevelOffset()){n.putInteger("LevelOffset",o.getLevelOffset())}n.putBoolean("HasDepth",o.hasDepth());if(o.hasDepth()){n.putInteger("Depth",o.getDepth())}n.putDouble("Exactness",o.getExactness());var g=o.getHierarchyName();if(e.notNull(g)){var y=o.getFilterExpression()!==null?o.getFilterExpression():o.getParent().getFilterExpression();var m=o.getContext();e.QInARepoHierarchy.exportHierarchyForFilter(t,t.isAbap(m),n,null,y,o.getQueryManager(),g,o.getHierarchyDueDate(),o.getHierarchyVersion())}var c=e.QInARepoFilterOperation.exportValues(t,o);n.put("Values",c);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_FO)){if(o.isConvertToFlatFilter()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_FO)){n.putBoolean("ConvertToFlatSelection",o.isConvertToFlatFilter())}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterTuple=function(){};e.QInARepoFilterTuple.prototype=new e.QInARepository;e.QInARepoFilterTuple.prototype._ff_c="QInARepoFilterTuple";e.QInARepoFilterTuple.prototype.getComponentType=function(){return e.FilterComponentType.TUPLE};e.QInARepoFilterTuple.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=e.QFilterTuple._create(o,a);p.setUniqueId(r.getStringByKey("Id"));var s=r.getListByKey("SubSelections");if(e.notNull(s)){var u=s.getStructureAt(0);u=u.getStructureByKey("TuplesOperand");var g=u.getListByKey("FieldNames");var y=e.PrUtils.asListOfString(g);p.setFieldNames(y);var m=u.getListByKey("Tuples");for(var c=0;c<m.size();c++){var A=m.getListAt(c);var S=e.PrUtils.asListOfString(A);p.addTupleCriteria(S)}}return p};e.QInARepoFilterTuple.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Code","Tuple");n.putString("Id",o.getUniqueId());var a=n.putNewList("SubSelections");var l=a.addNewStructure();var p=l.putNewStructure("TuplesOperand");var s=p.putNewList("FieldNames");var u=o.getFieldNames();s.addAllStrings(u);var g=p.putNewList("Tuples");var y=o.getTuples();for(var m=0;m<y.size();m++){var c=y.get(m);var A=g.addNewList();for(var S=0;S<u.size();S++){A.addString(c.get(S))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterVirtualDatasource=function(){};e.QInARepoFilterVirtualDatasource.prototype=new e.QInARepository;e.QInARepoFilterVirtualDatasource.prototype._ff_c="QInARepoFilterVirtualDatasource";e.QInARepoFilterVirtualDatasource.prototype.getComponentType=function(){return e.FilterComponentType.VIRTUAL_DATASOURCE};e.QInARepoFilterVirtualDatasource.prototype.importComponentWithStructure=e.noSupport;e.QInARepoFilterVirtualDatasource.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=e.PrFactory.createStructure();a.putString("Code","And");var l=a.putNewList("SubSelections");var p=this.createMemberOperand("SchemaName",o.getSchemaName());var s=this.createMemberOperand("PackageName",o.getPackageName());var u=this.createMemberOperand("ObjectName",o.getObjectName());l.add(p);l.add(s);l.add(u);n.put("Operator",a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterVirtualDatasource.prototype.createMemberOperand=function(t,r){var n=e.PrFactory.createStructure();n.putString("AttributeName",t);var i=e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL);n.putString("Comparison",i);n.putString("Value",r);var o=e.PrFactory.createStructure();o.put("MemberOperand",n);return o};e.QInARepoFormulaCalculatedDimension=function(){};e.QInARepoFormulaCalculatedDimension.prototype=new e.QInARepository;e.QInARepoFormulaCalculatedDimension.prototype._ff_c="QInARepoFormulaCalculatedDimension";e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension=function(t,r,n,i,o){var a=n;var l=r.getStringByKey("Name");if(e.isNull(a)){if(!o.getModelCapabilities().supportsCalculatedDimensionsExt()){t.addWarning(e.ErrorCodes.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED,e.ErrorMessages.CALCULATED_DIMENSIONS_CAPABILITY_NOT_SUPPORTED_DESERIALIZE)}a=e.QFactory.createFormulaCalculatedDimension(o,l);a.setParent(i);o.getQueryModel().addDimension(a)}else{var p=r.getStructureByKey("Properties");a.reset(e.notNull(p))}a.setDimensionType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);a.setName(l);a.setTopEntries(r.getIntegerByKeyExt("Top",0));a.setSkipEntries(r.getIntegerByKeyExt("Skip",0));t.importTotals(r,a.getResultStructureControllerBase(),o);var s=r.getListByKey("DependentCalcDims");if(e.notNull(s)){for(var u=0;u<s.size();u++){var g=s.get(u);var y=e.QFactory.createFormulaCalculatedDimension(o,l);y.setParent(i);e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,g,y,null,o);a.addDependentCalculatedDimension(y)}}var m=r.getListByKey("DependentCustomMembers");if(e.notNull(m)){var c=a.getQueryModelBase();var A=c.getPrimaryCalculationDimension();for(var S=0;S<m.size();S++){var d=m.get(S);var I=d.getStringByKey("Name");var f=d.getStringByKey("AliasName");if(e.XStringUtils.isNullOrEmpty(I)&&e.XStringUtils.isNullOrEmpty(f)){continue}var N;if(A.getStructureMemberByAlias(f)!==null){N=A.getStructureMemberByAlias(f)}else if(A.getStructureMember(I)!==null){N=A.getStructureMember(I)}else{N=t.importStructureMember(A,d,o);if(A.getDimensionType()===e.DimensionType.ACCOUNT){N.setAliasName(d.getStringByKey("AliasName"))}}a.addDependentCustomMember(N)}}a.setApplyParentExternalFilters(r.getBooleanByKey("IsApplyParentExtFilters"));if(r.getStringByKey("Currency")!==null){a.setCurrency(r.getStringByKey("Currency"))}e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties(t,r,o,a);var v=a.getAdditionalFilterContext();var T=null;var R=r.getStructureByKey("AdditionalFilterSelection");if(e.notNull(R)){T=t.importComponent(null,R,null,v,o)}v.setComplexRoot(T);if(r.containsKey("IsHidden")){a.setHidden(r.getBooleanByKey("IsHidden"))}return a};e.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties=function(t,r,n,i){var o=r.getStructureByKey("Properties");if(e.notNull(o)){var a=o.getStructureByKey("KeyRef");var l;if(i.getQueryManager().getClientQueryObjectStorageName()!==null){l=i.getQueryManager().getClientQueryObjectStorageName()}else{l=a.getStringByKey("StorageName")}var p=e.QFactory.createKeyRef(l,a.getStringByKey("GroupName"),a.getStringByKey("ObjectName"));i.setPropertiesKeyRef(p);return}if(t.getMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){var s=i.getQueryManager().getClientQueryObjectStorageName();if(e.notNull(s)){var u=n.getOlapEnv().getClientQueryObjectManager();var g=u.getFormulaCalcDimProperties(i.getName(),s);if(e.notNull(g)){i.setPropertiesKeyRef(g);return}}}var y=r.getListByKey("CalculatedAttributes");if(e.notNull(y)){for(var m=0;m<y.size();m++){var c=y.get(m);t.importComponent(e.OlapComponentType.FIELD,c,null,i,n)}}var A=r.getListByKey("AggregationFieldNames");if(e.notNull(A)){for(var S=0;S<A.size();S++){i.addAggregationFieldName(A.get(S).asString().getString())}}var d=i.getFilterContext();var I=null;var f=r.getStructureByKey("Selection");if(e.notNull(f)){I=t.importComponent(null,f,null,d,n)}d.setComplexRoot(I);var N=r.getListByKey("AggregationDimensions");if(e.notNull(N)){for(var v=0;v<N.size();v++){var T=N.get(v).asStructure();i.addAdditionalAggregationDimension(T.getStringByKey("DimensionName"),T.getStringByKey("HierarchyName"),T.getBooleanByKey("HierarchyActivation"))}}var R=r.getListByKey("ExternalFilterIdsToApply");if(e.notNull(R)){for(var E=0;E<R.size();E++){i.getProperties().addFilterIdsToApply(R.get(E).asString().getString())}}i.getProperties().setIsApplyAdditionalFilterContext(r.getBooleanByKey("ApplyAdditionalFilterContext"))};e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts=function(t,r,n){e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties(t,r,n);var i=n.getDependentCustomMembers();if(!i.isEmpty()){var o=r.putNewList("DependentCustomMembers");var a=i.getIterator();while(a.hasNext()){var l=a.next();var p=e.QInARepoMemberAbstract.exportCustomMember(t,l);if(e.notNull(p)){p.putString("AliasName",l.getAliasName());o.add(p)}}}var s=n.getDependentCalculatedDimensions();if(!s.isEmpty()){var u=r.putNewList("DependentCalcDims");var g=s.getIterator();while(g.hasNext()){var y=g.next();t.exportDimension(y,u.addNewStructure())}}r.putBoolean("IsApplyParentExtFilters",n.isApplyParentExternalFilters());if(n.getCurrency()!==null){r.putString("Currency",n.getCurrency())}var m=n.getAdditionalFilterContext().getFilterRootElement();if(e.notNull(m)){var c=t.exportComponent(null,m,null,e.QImExFlag.DEFAULT_ALL);r.put("AdditionalFilterSelection",c)}};e.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties=function(t,r,n){var i=n.getQueryManager()!==null&&n.getQueryManager().isKeyRefSerializationEnabled();if(i&&n.getOlapEnv()!==null){var o=n.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(n.getPropertiesKeyRef(),n.getQueryManager().getClientQueryObjectStorageName());if(e.notNull(o)){var a=r.putNewStructure("Properties");e.QInARepoUtils.addKeyRefStructure(t,o,a,n.getQueryManager());return}}var l=n.getFilterContext().getFilterRootElement();if(e.notNull(l)){var p=t.exportComponent(null,l,null,e.QImExFlag.DEFAULT_ALL);r.put("Selection",p)}var s=r.putNewList("CalculatedAttributes");var u=n.getFieldIterator();while(u.hasNext()){var g=u.next();var y=t.exportComponent(e.OlapComponentType.FIELD,g,null,e.QImExFlag.DEFAULT_ALL);if(y.asStructure().getStringByKey("PresentationType")===null){t.exportComponent(e.OlapComponentType.FIELD,g,null,e.QImExFlag.DEFAULT_ALL)}s.add(y)}var m=n.getAggregationFieldNames();if(e.notNull(m)){var c=r.putNewList("AggregationFieldNames");c.addAllStrings(m)}var A=n.getAdditionalAggregationDimensions();if(e.notNull(A)){var S=A.getIterator();var d=r.putNewList("AggregationDimensions");while(S.hasNext()){var I=S.next();var f=d.addNewStructure();f.putString("DimensionName",I.getDimensionName());f.putString("HierarchyName",I.getHierarchyName());f.putBoolean("HierarchyActivation",I.activateHierarchy())}}var N=n.getProperties().getFilterIdsToApply();if(e.notNull(N)){var v=r.putNewList("ExternalFilterIdsToApply");v.addAllStrings(N)}r.putBoolean("ApplyAdditionalFilterContext",n.getProperties().isApplyAdditionalFilterContext())};e.QInARepoFormulaCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.FORMULA_CALCULATED_DIMENSION};e.QInARepoFormulaCalculatedDimension.prototype.importComponentWithStructure=function(t,r,n,i,o){return e.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(t,r,n,i,o)};e.QInARepoFormulaCalculatedDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());if(o.getParent()!==null&&o.getAxis()!==null){var a=o.getAxisType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(a))}var l=o.getTopEntries();if(l>0){n.putInteger("Top",l)}var p=o.getSkipEntries();if(p>0){n.putInteger("Skip",p)}t.exportTotals(o,n);e.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(t,n,o);if(o.isHidden()){n.putBoolean("IsHidden",true)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFormulaException=function(){};e.QInARepoFormulaException.prototype=new e.QInARepository;e.QInARepoFormulaException.prototype._ff_c="QInARepoFormulaException";e.QInARepoFormulaException.importEvaluates=function(t,r,n,i){var o=t.getListByKey("EvaluateOn");if(e.isNull(o)){return}var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=r.getFieldByName(s);if(e.isNull(u)){var g=r.getDimensionByNameFromExistingMetadata(s);if(e.notNull(g)){u=g.getKeyField()}}if(e.isNull(u)){i.addError(e.ErrorCodes.INVALID_TOKEN,e.XStringUtils.concatenate3("Could not find field '",s,"'!"));return}if(!p.containsKey("Low")){i.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate2("No low value for field: ",s));return}var y=u.getValueType();var m=e.QInARepoUtils.importValueByType(i,p,"Low",y);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected low valuetype for field: ",y.getName()));return}var c=n._addNewEvaluateWithFieldInternal(u,m);if(p.containsKey("High")){var A=e.QInARepoUtils.importValueByType(i,p,"High",y);if(i.hasErrors()){i.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate2("Unexpected high valuetype for field: ",y.getName()));return}c.setHighValue(A)}c.setEvaluate(e.QExceptionEvalType.lookupExceptionEvalType(p.getStringByKey("Evaluate")));var S=p.getStringByKey("Comparison");var d=e.QInAConverter.lookupComparison(S);if(e.isNull(d)){i.addError(e.ErrorCodes.INVALID_OPERATOR,e.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",S,"'"));return}c.setOperator(d)}};e.QInARepoFormulaException.importThresholds=function(t,r){var n=t.getListByKey("Threshold");if(e.notNull(n)){var i=n.size();for(var o=0;o<i;o++){var a=n.getStructureAt(o);var l=a.getIntegerByKeyExt("AlertLevel",-9999);var p;var s=!a.hasStringByKey("Low");if(s){p=r._addNewThresholdInternal(a.getDoubleByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}else{p=r._addNewThresholdWithStringInternal(a.getStringByKey("Low"),e.QInAConverter.lookupAlertLevel(l))}var u=a.getStringByKey("Name");if(e.notNull(u)){p.setName(u)}var g=a.getStringByKey("Text");if(e.notNull(g)){p.setText(g)}var y=a.getStringByKey("Color");if(e.notNull(y)){p.setColor(y)}var m=e.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));p.setOperator(m);if(m.getNumberOfParameters()===2){if(s){var c=a.getDoubleByKey("High");p.setHighValue(c)}else{var A=a.getStringByKey("High");p.setHigh(A)}}e.QInARepoFormulaException.importSettings(a.getListByKey("Settings"),p)}}};e.QInARepoFormulaException.importSettings=function(t,r){if(e.isNull(t)){return}var n=t.size();for(var i=0;i<n;i++){var o=t.getStructureAt(i);var a=o.getStringByKey("Name");var l=o.getIntegerByKey("Priority");var p=o.getStringByKey("Value");if(e.notNull(p)&&!e.XString.isEqual(p,"")){var s=r.addNewSetting(a,l);s.setValue(p)}}};e.QInARepoFormulaException.exportEvaluates=function(t,r,n,i){if(t.isEmpty()){return}var o=n.putNewList("EvaluateOn");var a=t.size();for(var l=0;l<a;l++){var p=o.addNewStructure();var s=t.get(l);p.putString("Name",s.getField().getName());p.putString("Evaluate",s.getEvaluate().toString());var u=s.getOperator();var g;if(u===e.ComparisonOperator.NOT_BETWEEN&&i){g="NOTBETWEEN"}else{g=e.QInAConverter.lookupComparisonInA(u)}p.putString("Comparison",g);e.QInARepoUtils.exportValue(r,"Low",p,s.getLowValue(),s.getValueType());if(u.getNumberOfParameters()>1){e.QInARepoUtils.exportValue(r,"High",p,s.getHighValue(),s.getValueType())}}};e.QInARepoFormulaException.exportThresholds=function(t,r,n,i){var o=n.putNewList("Threshold");var a=t.size();for(var l=0;l<a;l++){var p=t.get(l);var s=o.addNewStructure();var u=p.getName();if(!e.XString.isEqual(u,"Settings")){s.putStringNotNull("Name",u)}var g=p.getOperator();var y;if(g===e.ComparisonOperator.NOT_BETWEEN&&i){y="NOTBETWEEN"}else{y=e.QInAConverter.lookupComparisonInA(g)}s.putString("Comparison",y);var m=p.getValueType()===e.XValueType.DOUBLE;if(p.getLowXValue()!==null){if(m){s.putDouble("Low",p.getLowValue())}else{s.putString("Low",p.getLow())}}if(p.getHighXValue()!==null&&g.getNumberOfParameters()>1){if(m){s.putDouble("High",p.getHighValue())}else{s.putString("High",p.getHigh())}}if(!p.isEmpty()){e.QInARepoFormulaException.exportSettings(p,r,s)}else{s.putInteger("AlertLevel",p.getAlertLevel().getLevel())}}};e.QInARepoFormulaException.exportSettings=function(t,r,n){var i=n.putNewList("Settings");var o=t.size();for(var a=0;a<o;a++){var l=t.get(a);var p=i.addNewStructure();p.putString("Name",l.getName());p.putInteger("Priority",l.getPriority());var s=l.getValue();if(e.isNull(s)||e.XString.isEqual(s,"")){r.addError(e.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value")}else{p.putString("Value",s)}}};e.QInARepoFormulaException.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION};e.QInARepoFormulaException.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=n;if(e.isNull(l)){var p=r.getStringByKey("Name");var s=r.getStringByKey("Text");l=e.QFactory.createFormulaException(o,p,s)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("NullAsZero")){l.setHandleNullAsZero(r.getBooleanByKey("NullAsZero"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlip")){l.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("IsPrimary")){l.setIsPrimaryMeasure(r.getBooleanByKeyExt("IsPrimary",true))}l.setFormulaExceptionType(e.FormulaExceptionType.lookup(r.getStringByKey("Type")));var u=r.getListByKey("StructureContext");var g=u.getStructureAt(0);var y=this.getDimensionName(a,g);var m=g.getStringByKey("MemberName");if(e.notNull(y)&&e.notNull(m)){var c=a.getDimensionByNameFromExistingMetadata(y);var A=c.getStructureMemberByAliasOrMember(m);l.setMeasure(A)}var S=u.getStructureAt(1);var d=this.getDimensionName(a,S);var I=S.getStringByKey("MemberName");if(e.notNull(d)&&e.notNull(I)){var f=a.getDimensionByNameFromExistingMetadata(d);var N=f.getStructureMemberByAliasOrMember(I);if(e.isNull(N)){return null}l.setBaseMeasure(N)}else if(e.notNull(I)){l.setBaseMeasureName(I)}e.QInARepoFormulaException.importEvaluates(r,a,l,t);var v=u.getStructureAt(2);var T=this.getDimensionName(a,v);var R=v.getStringByKey("MemberName");if(e.notNull(T)&&e.notNull(R)){var E=a.getDimensionByNameFromExistingMetadata(T);var C=E.getStructureMemberByAliasOrMember(R);if(e.isNull(C)){return null}l.setReferenceMeasure(C)}else if(e.notNull(R)){l.setReferenceMeasureName(R)}e.QInARepoFormulaException.importThresholds(r,l);return l};e.QInARepoFormulaException.prototype.getDimensionName=function(t,r){var n=r.getStringByKey("DimensionName");if(e.isNull(n)&&r.getBooleanByKeyExt("MeasureStructure",false)){n=t.getMeasureDimension().getName()}return n};e.QInARepoFormulaException.prototype.importComponent=function(t,r,n,i,o){var a=r;var l=this.getTagName();if(e.notNull(l)&&e.notNull(a)){a=a.getStructureByKey(l)}if(e.notNull(o)&&o.getQueryModel()!==null&&e.notNull(a)){var p=a.getStructureByKey("KeyRef");if(e.notNull(p)){var s=e.QFactory.createKeyRef(p.getStringByKey("StorageName"),p.getStringByKey("GroupName"),p.getStringByKey("ObjectName"));var u=o.getQueryModel().getFormulaExceptionManager().getModelFormulaExceptionByKeyRef(s);if(e.notNull(u)){return u}}}return e.QInARepository.prototype.importComponent.call(this,t,r,n,i,o)};e.QInARepoFormulaException.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Type",o.getFormulaExceptionType().getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_NULL_AS_ZERO)){n.putBoolean("NullAsZero",o.isHandleNullAsZero())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QExceptionProperties.QY_AUTO_SIGN_FLIP)){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_IS_PRIMARY)){n.putBoolean("IsPrimary",o.isPrimaryMeasure())}var a=n.putNewList("StructureContext");var l=a.addNewStructure();var p=o.getMeasure();if(e.notNull(p)){var s=p.getDimension();l.putString("DimensionName",s.getName());l.putStringNotNull("MemberName",p.getAliasOrMemberName())}var u=a.addNewStructure();var g=o.getBaseMeasure();if(e.notNull(g)){var y=g.getDimension();u.putString("DimensionName",y.getName());u.putStringNotNull("MemberName",g.getAliasOrMemberName())}else{u.putStringNotNull("MemberName",o.getBaseMeasureName())}var m=a.addNewStructure();var c=o.getReferenceMeasure();if(e.notNull(c)){var A=c.getDimension();m.putString("DimensionName",A.getName());m.putStringNotNull("MemberName",c.getAliasOrMemberName())}else{m.putStringNotNull("MemberName",o.getReferenceMeasureName())}var S=o.getQueryModel();var d=t.isAbap(S);e.QInARepoFormulaException.exportThresholds(o.getThresholds(),t,n,d);e.QInARepoFormulaException.exportEvaluates(o.getEvaluates(),t,n,d);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFormulaException.prototype.exportKeyReference=function(t,r,n){var i=r;if(i.getQueryManager()!==null){if(!i.getQueryManager().isKeyRefSerializationEnabled()){return false}}var o=i.getQueryModel();if(e.notNull(o)){var a=o.getFormulaExceptionManager();if(a.getModelFormulaException(i.getName())===i){e.QInARepoUtils.addKeyRefStructure(t,i,n,i.getQueryManager());return true}}return e.QInARepository.prototype.exportKeyReference.call(this,t,r,n)};e.QInARepoFormulaExceptionManager=function(){};e.QInARepoFormulaExceptionManager.prototype=new e.QInARepository;e.QInARepoFormulaExceptionManager.prototype._ff_c="QInARepoFormulaExceptionManager";e.QInARepoFormulaExceptionManager.prototype.getComponentType=function(){return e.OlapComponentType.FORMULA_EXCEPTION_MANAGER};e.QInARepoFormulaExceptionManager.prototype.getTagName=function(){return"FormulaExceptionManager"};e.QInARepoFormulaExceptionManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(a)){a.clear();if(e.notNull(r)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("FormulaResultVisible")){a.setFormulaResultVisible(r.getBooleanByKeyExt("FormulaResultVisible",false))}var l;var p=r.getListByKey("FormulaExceptionsModeler");if(e.notNull(p)){for(var s=0;s<p.size();s++){var u=p.getStructureAt(s);var g=u.getStringByKey("Name");var y=u.getStringByKey("Text");l=a.addNewModelFormulaException(g,y);var m=t.importFormulaException(u,l,a,o);if(e.isNull(m)){a.removeModelFormulaException(g,true)}}}p=r.getListByKey("FormulaExceptions");if(e.notNull(p)){for(var c=0;c<p.size();c++){l=t.importFormulaException(p.getStructureAt(c),null,a,o);a.add(l)}}}}return a};e.QInARepoFormulaExceptionManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(e.notNull(o)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QExceptionProperties.QY_FORMULA_RESULT_VISIBLE)){n.putBoolean("FormulaResultVisible",o.isFormulaResultVisible())}var a=e.PrFactory.createList();for(var l=0;l<o.size();l++){var p=o.get(l);if(e.notNull(p)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!e.XString.isEqual(p.getStorageName(),e.KeyRefConstants.MODEL_FORMULA_EXCEPTIONS)){var s=e.PrFactory.createStructure();t.exportFormulaException(p,s);a.add(s)}}}n.put("FormulaExceptions",a)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoHierarchy=function(){};e.QInARepoHierarchy.prototype=new e.QInARepository;e.QInARepoHierarchy.prototype._ff_c="QInARepoHierarchy";e.QInARepoHierarchy.importHierarchyForFilter=function(t,r,n,i,o){var a=n.getStringByKey("HierarchyName");var l=null;var p=null;if(r&&t){p=n.getStringByKey("HierarchyVersion");var s=n.getStringByKey("HierarchyDueDate");if(e.notNull(s)){if(o===e.FilterComponentType.CARTESIAN_LIST){l=e.XDate.createDateSafe(s)}else if(o===e.FilterComponentType.OPERATION){l=e.XDate.createDateFromSAPFormat(s)}}}if(o===e.FilterComponentType.CARTESIAN_LIST){i.setHierarchyInfo(a,l,p)}else if(o===e.FilterComponentType.OPERATION){i.setHierarchyInfo(a,l,p)}};e.QInARepoHierarchy.appendItemsToCatalogResult=function(t,r,n){var i=e.PrUtils.getListSize(r,0);for(var o=0;o<i;o++){var a=e.PrUtils.getStructureElement(r,o);var l=e.HierarchyCatalogItem.createCatalogItem();l.setDimensionName(n);var p;if(a.hasStringByKey("Name")){p=a.getStringByKey("Name")}else{p=a.getStringByKey("HierarchyName")}if(e.XStringUtils.isNullOrEmpty(p)||t.containsHierarchy(p)){continue}l.setHierarchyName(p);var s=e.PrUtils.getStringProperty(a,"Description");if(e.notNull(s)){l.setHierarchyLongText(s.getString())}var u=e.PrUtils.getStringProperty(a,"Version");if(e.notNull(u)){l.setVersionName(u.getString())}var g=e.PrUtils.getStringProperty(a,"Structure");if(e.notNull(g)){l.setHierarchyType(e.HierarchyType.lookup(g.getString()))}var y=e.PrUtils.getBooleanValueProperty(a,"IsModeled",false);l.setIsModeled(y);var m=e.PrUtils.getStringProperty(a,"DateTo");if(e.notNull(m)){var c=m.getString();if(e.XStringUtils.isNotNullAndNotEmpty(c)){l.setDateTo(e.XDate.createDateFromIsoFormat(c))}}var A=e.PrUtils.getListProperty(a,"Levels");if(e.notNull(A)){l.setSupportsHierarchyLevels(true);var S=e.XList.create();var d=e.PrUtils.getListSize(A,0);for(var I=0;I<d;I++){var f=e.PrUtils.getStructureElement(A,I);if(e.isNull(f)){continue}var N=e.HierarchyCatalogLevel.createCatalogLevel();var v=e.PrUtils.getIntegerValueProperty(f,"Level",-1);if(v>-1){N.setLevel(v)}var T=e.PrUtils.getStringProperty(f,"LevelName");if(e.notNull(T)){N.setLevelName(T.getString())}var R=e.PrUtils.getStringProperty(f,"LevelCaption");if(e.notNull(R)){N.setLevelDescription(R.getString())}var E=e.PrUtils.getStringProperty(f,"LevelUniqueName");if(e.notNull(E)){N.setLevelUniqueName(E.getString())}var C=e.PrUtils.getStringProperty(f,"DimensionName");if(e.notNull(C)){N.setLevelDimensionName(C.getString())}var Q=e.PrUtils.getIntegerProperty(f,"LevelType");if(e.notNull(Q)){N.setLevelType(e.QInAConverter.lookupHierarchyLevelType(Q.getInteger()))}S.add(N)}l.setHierarchyLevels(S)}var M=a.getStringByKey("RestNode");if(e.notNull(M)){l.setRestNode(M)}var D=a.getStringByKey("VirtualRootNode");if(e.notNull(D)){l.setVirtualRootNode(D)}t.addItem(l)}return t};e.QInARepoHierarchy.importLeveledHierarchy=function(t,r,n,i){var o=e.QLeveledHierarchy.create(r,n,i.getStringByKey(i.containsKey("Name")?"Name":"HierarchyName"));o.setHierarchyUniqueName(i.getStringByKey("UniqueName"));if(i.getStringByKey("DimensionName")===null){o.setDimensionName(n.getName())}else{o.setDimensionName(i.getStringByKey("DimensionName"))}o.setHierarchyType(e.HierarchyType.lookup(i.getStringByKey("Structure")));o.setIsModeled(i.getBooleanByKeyExt("IsModeled",false));var a=i.getStringByKey("DueDate");if(e.XStringUtils.isNotNullAndNotEmpty(a)){o.setDateTo(e.QInARepoUtils.createDate(a))}o.setHierarchyDescription(i.getStringByKey("Description"));var l=i.getListByKey("Levels");if(!e.PrUtils.isListEmpty(l)){e.QInARepoHierarchy.importLevels(o,l)}return o};e.QInARepoHierarchy.importLevels=function(t,r){var n=r.size();for(var i=0;i<n;i++){var o=r.getStructureAt(i);var a=e.QHierarchyLevel.create(t,o.getStringByKey("LevelUniqueName"),o.getIntegerByKey("Level"));a.setLevelName(o.getStringByKey("LevelName"));a.setLevelText(o.getStringByKey("LevelCaption"));a.setLevelDimensionName(o.getStringByKey("DimensionName"));a.setLevelType(e.QInAConverter.lookupHierarchyLevelType(o.getIntegerByKey("LevelType")));a.setNavigationAttribute(o.getStringByKey("NavAttr"));t.getAllLevelBase().add(a)}};e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var n=t.getQueryManager();r=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.useHierarchyNameVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyNameVariableName())}return r};e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var n=t.getQueryManager();r=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.useHierarchyDueDateVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyDueDateVariableName())}return r};e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit=function(t){var r=false;if(e.notNull(t)){var n=t.getQueryManager();r=e.notNull(n)&&n.isExecuteAutoVariableSubmit()&&t.useHierarchyVersionVariable()&&e.XStringUtils.isNotNullAndNotEmpty(t.getHierarchyVersionVariableName())}return r};e.QInARepoHierarchy.exportLevels=function(t,r){if(r.supportsHierarchyLevels()){var n=t.putNewList("Levels");var i=r.getHierarchyLevels();var o=i.size();for(var a=0;a<o;a++){var l=i.get(a);var p=n.addNewStructure();p.putString("LevelUniqueName",l.getLevelUniqueName());p.putInteger("Level",l.getLevel());p.putString("LevelName",l.getLevelName());p.putString("LevelCaption",l.getLevelDescription());p.putStringNotNull("DimensionName",l.getLevelDimensionName());p.putInteger("LevelType",e.QInAConverter.lookupHierarchyLevelTypeIna(l.getLevelType()))}}};e.QInARepoHierarchy.exportHierarchyForFilter=function(t,r,n,i,o,a,l,p,s){if(e.notNull(l)){n.putString("HierarchyName",l);if(t.getSession().hasFeature(e.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&r){if(e.isNull(o)||!e.XString.isEqual(o.getName(),e.QFilter.FIXED_FILTER_CONTAINER)||e.notNull(a)&&a.isExecuteAutoVariableSubmit()){e.QInARepoUtils.setDateIfNotNull(t,n,"HierarchyDueDate",p);n.putStringNotNull("HierarchyVersion",s)}}}};e.QInARepoHierarchy.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY};e.QInARepoHierarchy.prototype.getTagName=function(){return"HierarchyRepo"};e.QInARepoHierarchy.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(a.supportsHierarchy()){var l=a.isDisplayHierarchyFixInFilter();a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(e.isNull(r)){a.setHierarchy(null)}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasElements()){var p=r.getStringByKey("NameIs");var s=e.notNull(p)&&e.XString.isEqual("Variable",p);var u=this.importHierarchyName(r,a,s);var g=null;if(e.XStringUtils.isNotNullAndNotEmpty(u)){if(a.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(r,a);this.importLeveledHierarchyToMetadata(t,r,o,a)}var y=a.getLeveledHierarchy(u);var m=false;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA&&(e.XStringUtils.isNotNullAndNotEmpty(a.getHierarchyName())||e.notNull(y))){if(a.getHierarchy()!==null&&e.XString.isEqual(a.getHierarchyName(),u)){g=a.getHierarchy();m=a.isHierarchyActive()}else if(e.notNull(y)&&e.XString.isEqual(y.getName(),u)){g=e.QHierarchy.create(a.getContext(),a,u)}}else{if(r.getBooleanByKey("IsTransient")){g=e.QHierarchy.createCustomHierarchy(a.getContext(),a,u,r.getStringByKey("Description"))}else{g=e.QHierarchy.create(a.getContext(),a,u)}}if(e.notNull(g)){this.importHierarchyDueDate(t,r,a,g);this.importHierarchyVersion(r,a,g);var c=r.getStringByKey("DateTo");g.setDateTo(e.QInARepoUtils.createDate(c));var A=r.getStringByKey("0DATEFROM");g.setDateFrom(e.QInARepoUtils.createDate(A));var S=r.getStructureByKey("Metadata");if(e.notNull(S)){c=S.getStringByKey("DateTo");if(e.XStringUtils.isNotNullAndNotEmpty(c)){g.setDateTo(e.QInARepoUtils.createDate(c))}A=S.getStringByKey("0DATEFROM");if(e.XStringUtils.isNotNullAndNotEmpty(A)){g.setDateFrom(e.QInARepoUtils.createDate(A))}}a.setHierarchy(g);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){m=true}var d=s?false:r.getBooleanByKeyExt("HierarchyActive",m);a.setHierarchyActive(d);a.setSelectorHierarchyActive(d);var I=a.getQueryManager();var f=e.notNull(I)&&I.isExecuteAutoVariableSubmit();if(f&&r.containsKey("UseDefaultDrillLevelOnChange")){a.setUseDefaultDrillLevelOnChange(r.getBooleanByKey("UseDefaultDrillLevelOnChange"))}}}var N=r.getListByKey("StickyDimensionMembers");a.clearStickyMembers();if(e.XCollectionUtils.hasElements(N)){for(var v=0;v<N.size();v++){a.addStickyMember(N.getStringAt(v))}}var T=0;if(t.getMode()===e.QModelFormat.INA_REPOSITORY_DELTA){T=a.getInitialDrillLevel()}var R=r.getIntegerByKeyExt("InitialDrillLevel",T);var E=a.getSelectorRootLevel();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){E=r.getIntegerByKeyExt("SelectorInitialDrillLevel",R)}else if(r.containsKey("SelectorInitialDrillLevel")){E=r.getIntegerByKey("SelectorInitialDrillLevel")}a.setInitialDrillLevel(R);a.setSelectorInitialDrillLevel(E);if(a.getModelCapabilities().supportsMaxDrillLevel()){var C=r.getIntegerByKeyExt("MaxDrillLevel",-1);a.getHierarchyManager().setMaxDrillLevel(C);var Q=r.getIntegerByKeyExt("MaxRuntimeLevel",-1);a.getHierarchyManager().setMaxRuntimeLevel(Q)}var M=r.getIntegerByKeyExt("InitialDrillOffset",0);a.setInitialDrillOffset(M);a.setExplicitDrillOnFilteredNodes(r.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("LowerLevelNodeAlignment")||r.containsKey("ExpandBottomUp")){var D=e.Alignment.DEFAULT_VALUE;if(o.getModelCapabilities().supportsExpandBottomUp()){var L=r.getStringByKeyExt("LowerLevelNodeAlignment","Default");D=e.QInAConverter.lookupLowerLevelNodeAlignment(L);if(r.containsKey("ExpandBottomUp")){var F=r.getBooleanByKeyExt("ExpandBottomUp",false);if(F){D=e.Alignment.CHILDREN_ABOVE_PARENT}}}a.setLowerLevelNodeAlignment(D)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("NodeCondensation")){var O=r.getBooleanByKeyExt("NodeCondensation",false);a.setHasNodeCondensation(O)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("MemberOfPostedNodeVisibility")){var B=r.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var h=e.QInAConverter.lookupResultSetVisibility(B);a.setMemberOfPostedNodeVisibility(h)}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l);return g}a.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(l)}return null};e.QInARepoHierarchy.prototype.importHierarchyName=function(t,r,n){var i;if(t.hasStringByKey("Name")){i=t.getStringByKey("Name")}else{i=t.getStringByKey("HierarchyName")}var o=r.getQueryManager();if(e.notNull(o)&&o.isExecuteAutoVariableSubmit()){r.setUseHierarchyNameVariable(n&&o.getVariableProcessorState()===e.VariableProcessorState.CHANGEABLE_STARTUP);if(n){r.setHierarchyNameVariableName(e.XStringUtils.isNullOrEmpty(i)?null:i)}}return i};e.QInARepoHierarchy.prototype.importHierarchyDueDate=function(t,r,n,i){var o=r.getStringByKey("DueDateIs");var a=e.notNull(o)&&e.XString.isEqual("Variable",o);var l=r.getStringByKey("DueDate");n.setUseHierarchyDueDateVariable(a);if(a){n.setHierarchyDueDateVariableName(e.XStringUtils.isNullOrEmpty(l)?null:l)}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DueDate")){i.setHierarchyDueDate(e.QInARepoUtils.createDate(l))}};e.QInARepoHierarchy.prototype.importHierarchyVersion=function(t,r,n){var i=t.getStringByKey("VersionIs");var o=e.notNull(i)&&e.XString.isEqual("Variable",i);var a=t.getStringByKey("Version");r.setUseHierarchyVersionVariable(o);if(o){r.setHierarchyVersionVariableName(e.XStringUtils.isNullOrEmpty(a)?null:a)}else{n.setHierarchyVersion(a)}};e.QInARepoHierarchy.prototype.importHierarchyAsCatalogItem=function(t,r){var n=e.PrFactory.createList();n.add(t);var i=r.getHierarchies();if(e.isNull(i)){i=e.QFactory.createHierarchyCatalogResult();e.QInARepoHierarchy.appendItemsToCatalogResult(i,n,r.getName());r.getHierarchyManagerBase().setHierarchies(i)}else{e.QInARepoHierarchy.appendItemsToCatalogResult(i,n,r.getName())}};e.QInARepoHierarchy.prototype.importLeveledHierarchyToMetadata=function(t,r,n,i){var o=i.getQueryModelBase().getQueryManagerBase();if(e.notNull(o)&&!e.PrUtils.isListEmpty(r.getListByKey("Levels"))){var a=o.getMetadataModelBase();var l=a.getLeveledHierarchiesBase();var p=e.QInARepoHierarchy.importLeveledHierarchy(t,n,i,r);if(!l.contains(p)){l.add(p)}}};e.QInARepoHierarchy.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(o.supportsHierarchy()){var a=o.isHierarchyActive();var l=t.isAbap(o.getQueryModel());var p=o.getHierarchyName();var s=o.getQueryManager();var u=e.notNull(s)&&s.isExecuteAutoVariableSubmit();var g=e.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit(o);var y=e.XStringUtils.isNullOrEmpty(p)&&g;var m=e.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit(o);var c=e.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit(o);var A=p;if(y){p=o.getHierarchyNameVariableName()}if(e.XStringUtils.isNotNullAndNotEmpty(p)){var S=o.getHierarchyManagerBase();var d=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.shouldExportInRepoDeltaFormat();if(d){e.QInAExportUtil.setNonEmptyString(n,"HierarchyName",p);e.QInAExportUtil.setNonEmptyString(n,"Name",p);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_HIERARCHY_ACTIVE)){n.putBoolean("HierarchyActive",a)}if(e.XStringUtils.isNullOrEmpty(A)||e.XString.isEqual(A,o.getHierarchyNameVariableName())){n.putString("NameIs","Variable")}if(o.useHierarchyDueDateVariable()||m){n.putString("DueDateIs","Variable");e.QInAExportUtil.setNonEmptyString(n,"DueDate",o.getHierarchyDueDateVariableName())}else if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_DUE_DATE)){e.QInARepoUtils.setDate(t,n,"DueDate",o.getHierarchyDueDate())}if(c){n.putString("VersionIs","Variable");e.QInAExportUtil.setNonEmptyString(n,"Version",o.getHierarchyVersionVariableName())}else{e.QInAExportUtil.setNonEmptyString(n,"Version",o.getHierarchyVersion())}if(u&&o.useDefaultDrillLevelOnChange()){n.putBoolean("UseDefaultDrillLevelOnChange",true)}var I=0;I=o.getInitialDrillLevel();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QDimensionProperties.QY_SELECTOR_INITIAL_DRILL_LEVEL)){n.putInteger("SelectorInitialDrillLevel",o.getSelectorRootLevel())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_DRILL_LEVEL)){n.putInteger("InitialDrillLevel",I)}if(o.getInitialDrillOffset()!==0){n.putInteger("InitialDrillOffset",o.getInitialDrillOffset())}if(o.isExplicitDrillOnFilteredNodes()){n.putBoolean("ExplicitDrillOnFilteredNodes",o.isExplicitDrillOnFilteredNodes())}var f=o.getModelCapabilities()!==null&&o.getModelCapabilities().supportsMaxDrillLevel();if(f){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_DRILL_LEVEL)){var N=o.getMaxDrillLevel();n.putInteger("MaxDrillLevel",N)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_MAX_RUNTIME_LEVEL)){var v=o.getMaxRuntimeLevel();n.putInteger("MaxRuntimeLevel",v)}}if(o.hasStickyMembers()){n.putNewList("StickyDimensionMembers").addAllStrings(o.getStickyMembers())}var T=o.getLowerLevelNodeAlignment();if(o.getModelCapabilities().supportsExpandBottomUp()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){n.putBoolean("ExpandBottomUp",T===e.Alignment.CHILDREN_ABOVE_PARENT)}}if(l){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){var R;var E=o.getModelCapabilities();if(e.notNull(E)&&E.supportsExpandBottomUp()){R=e.QInAConverter.lookupLowerLevelNodeAlignmentInA(T)}else{R=e.QInAConverter.lookupLowerLevelNodeAlignmentInA2(T)}n.putString("LowerLevelNodeAlignment",R)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getHierarchyManager().hasPropertyChanged(e.QHierarchyProperties.QY_NODE_CONDENSATION)){var C=o.hasNodeCondensation();n.putBoolean("NodeCondensation",C)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||S.hasPropertyChanged(e.QHierarchyProperties.QY_MEMBER_OF_POSTED_NODE_VISIBILITY)){var Q=o.getMemberOfPostedNodeVisibility();var M=e.QInAConverter.lookupResultSetVisibilityInA(Q);n.putString("MemberOfPostedNodeVisibility",M)}}if(o.isHierarchyNavigationDeltaMode()){n.putBoolean("HierarchyNavigationDeltaMode",true)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){this.exportHierarchyLevels(n,o,p)}var D=o.getHierarchy();if(e.notNull(D)&&D.isCustomHierarchy()){n.putBoolean("IsTransient",true);n.putStringNotNull("Description",D.getHierarchyDescription())}}return n}}return null};e.QInARepoHierarchy.prototype.exportHierarchyLevels=function(t,r,n){if(r.getModelCapabilities().supportsDimensionHierarchyLevels()){var i=r.getHierarchies();if(e.notNull(i)){var o=i.getObjectsIterator();while(o.hasNext()){var a=o.next();if(e.XString.isEqual(a.getHierarchyName(),n)){e.QInARepoHierarchy.exportLevels(t,a);return}}}}};e.QInARepoMemberAbstract=function(){};e.QInARepoMemberAbstract.prototype=new e.QInARepository;e.QInARepoMemberAbstract.prototype._ff_c="QInARepoMemberAbstract";e.QInARepoMemberAbstract.importChartFormatting=function(t,r){r.setShowCellChart(t.getBooleanByKey("ShowCellChart"));r.setHideNumberForCellChart(t.getBooleanByKey("HideNumberForCellChart"));r.setCellChartBarColor(t.getStringByKey("CellChartBarColor"));r.setCellChartLineColor(t.getStringByKey("CellChartLineColor"));r.setCellChartType(e.QInAConverter.lookupCellChartType(t.getStringByKey("CellChartType")));r.setCellChartOrientation(e.QInAConverter.lookupCellChartOrientation(t.getStringByKey("CellChartOrientation")))};e.QInARepoMemberAbstract.importFormattingProperties=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("CurrencyPresentation")){n.setCurrencyPresentation(e.QInAConverter.lookupCurrencyPresentation(r.getStringByKey("CurrencyPresentation")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleAndUnitPlacement")){n.setScaleAndUnitPlacement(e.QInAConverter.lookupScaleAndUnitPlacement(r.getStringByKey("ScaleAndUnitPlacement")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ScaleFormat")){n.setScaleFormat(e.QInAConverter.lookupScaleFormat(r.getStringByKey("ScaleFormat")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("SignPresentation")){n.setSignPresentation(e.QInAConverter.lookupSignPresentation(r.getStringByKey("SignPresentation")))}};e.QInARepoMemberAbstract.importInternalDataType=function(t,r){if(t.containsKey("DataTypeScale")){r.setDataTypeScale(t.getIntegerByKey("DataTypeScale"))}if(t.containsKey("DataTypePrecision")){r.setDataTypePrecision(t.getIntegerByKey("DataTypePrecision"))}if(t.containsKey("DataTypeInternal")){r.setDataTypeInternal(e.QInAConverter.lookupValueType(t.getStringByKey("DataTypeInternal")))}if(r.getDataTypeInternal()===null&&t.containsKey("[Measures].[SQLType]")){var n=t.getStringByKey("[Measures].[SQLType]");if(e.XStringUtils.isNotNullAndNotEmpty(n)){if(e.XString.startsWith(n,e.XStringUtils.concatenate2("DECIMAL","("))){r.setDataTypeInternal(e.XValueType.DECIMAL_FLOAT);var i=e.XString.size("DECIMAL")+1;var o=e.XString.indexOf(n,",");var a=e.XString.size(n)-1;if(o>i&&o<a){var l=e.XString.substring(n,i,o);var p=e.XString.substring(n,o+1,a);r.setDataTypePrecision(e.XInteger.convertFromString(l));r.setDataTypeScale(e.XInteger.convertFromString(p))}}else if(e.XString.isEqual(n,"INTEGER")){r.setDataTypeInternal(e.XValueType.INTEGER)}}}};e.QInARepoMemberAbstract.importExceptionAggregationProperties=function(t,r,n,i){if(n.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ExceptionAggregationDimensions")){var o=e.PrUtils.asListOfString(r.getListByKey("ExceptionAggregationDimensions"));i._setExceptionAggregationDimensionNames(o)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ExceptionAggregation")){var a=r.getStringByKey("ExceptionAggregation");i.setExceptionAggregationType(e.AggregationType.lookupOrCreate(a))}}else if(i.getMemberType()===e.MemberType.BASIC_MEASURE||i.getMemberType()===e.MemberType.RESTRICTED_MEASURE){var l=r.getStringByKey("AggregationDimension");if(e.XStringUtils.isNotNullAndNotEmpty(l)){i.setAggregationDimensionName(l)}}};e.QInARepoMemberAbstract.importMeasure=function(t,r,n,i,o){var a;a=e.QInARepoMemberAbstract.determineMemberType(t,r,o);if(r.containsKey("MemberType")&&e.isNull(a)){return null}var l;if(t.getSession().hasFeature(e.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&e.notNull(o)&&o.getDimensionType()===e.DimensionType.ACCOUNT){var p=r.getStringByKey("Name");var s=e.XStringUtils.concatenate2("].&[",e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(e.notNull(p)&&e.XString.startsWith(p,"[")&&e.XString.indexOf(p,s)!==-1){var u=e.XString.indexOf(p,e.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var g=e.XString.indexOfFrom(p,"]",u);var y=e.XString.substring(p,u,g);if(o.getPlaceholderIds().contains(y)){r.putString("Name",y)}}}if(a===e.MemberType.RESTRICTED_MEASURE){l=t.importRestrictedMeasure(r,o,n)}else if(a===e.MemberType.FORMULA){l=t.importFormulaMeasure(r,o,i)}else if(a===e.MemberType.MEASURE){l=t.importBasicMeasure(r,o,n)}else if(a===e.MemberType.VARIANCE){l=t.importVarianceMeasure(r,o,n)}else if(a===e.MemberType.EXCEPTION_AGGREGATION){l=t.importExceptionAggregationMeasure(r,o,n)}else if(a===e.MemberType.CURRENCY_MEASURE){l=t.importCurrencyMeasure(r,o,n)}else{l=null}return l};e.QInARepoMemberAbstract.determineMemberType=function(t,r,n){var i;var o=r.getStringByKey(n.getKeyField().getName());if(r.containsKey("MemberType")){var a=r.getStringByKeyExt("MemberType","Measure");i=e.QInAConverter.lookupMeasureStructureMemberType(a);if(e.isNull(i)){t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",a,"'"));return null}}else if(n.getModelCapabilities().supportsCustomMeasuresInMetadata()&&e.notNull(o)){if(n.getDimensionType()===e.DimensionType.ACCOUNT){i=e.MemberType.MEASURE}else{i=n.getStructureMember(o).getMemberType();if(i===e.MemberType.BASIC_MEASURE){i=e.MemberType.MEASURE}}}else{if(r.containsKey("Formula")){i=e.MemberType.FORMULA}else{var l=r.getStructureByKey("Selection");if(e.isNull(l)){i=e.MemberType.MEASURE}else{i=l.containsKey("Operator")?e.MemberType.RESTRICTED_MEASURE:e.MemberType.MEASURE}}}return i};e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties=function(t,r,n){if(r.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!r.isCreatedFromMetadata()){var i=n.getBooleanByKeyExt("ModelDefinedMember",false);var o=i&&r.getQueryManager().getInitSettings().getProviderType()===e.ProviderType.LIST_REPORTING;if(!o){e.QInARepoMemberAbstract.importAggregationType(t,r,n)}}e.QInARepoMemberAbstract.importGenericMemberProperties(t,r,n);if(n.containsKey("DataType")){r.setDataType(e.QInAConverter.lookupValueType(n.getStringByKey("DataType")))}if(n.getByKey("isModelDefinedMember")!==null){r.setModelDefinedMember(n.getBooleanByKey("isModelDefinedMember"))}e.QInARepoMemberAbstract.importIgnoredExternalDimensions(t,r,n);if((r.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!r.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&n.containsKey("SolveOrder")){r.setSolveOrder(n.getIntegerByKeyExt("SolveOrder",0))}if(n.containsKey("PreferredHierarchy")){r.setPreferredHierarchy(n.getStringByKey("PreferredHierarchy"))}e.QInARepoMemberAbstract.importAccountMemberProperties(n,r)};e.QInARepoMemberAbstract.importAccountMemberProperties=function(t,r){if(t.getStringByKey("AliasName")!==null){r.setAliasName(t.getStringByKey("AliasName"))}if(t.containsKey("AutoSignFlip")){r.setAutoSignFlip(t.getBooleanByKey("AutoSignFlip"))}if(t.getStringByKey("AccountType")!==null){r.setAccountType(e.AccountType.lookup(t.getStringByKey("AccountType")))}};e.QInARepoMemberAbstract.importGenericMemberProperties=function(t,r,n){if(r.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!r.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(n.containsKey("NumericShift")){r.setNumericShift(n.getIntegerByKey("NumericShift"))}if(n.containsKey("NumericScale")){r.setNumericScale(n.getIntegerByKey("NumericScale"))}if(n.containsKey("NumericPrecision")){r.setNumericPrecision(n.getIntegerByKey("NumericPrecision"))}}if(r.getModelCapabilities().supportsMemberVisibility()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasStringByKey("Visibility"))){var i=n.getStringByKeyExt("Visibility","Visible");r.setResultVisibility(e.QInAConverter.lookupResultSetVisibility(i))}if(n.hasStringByKey("PostAggregation")||t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA){var o=n.getStringByKey("PostAggregation");var a=e.QInAConverter.lookupAggregationType(o);r.setPostAggregationType(a)}if(n.containsKey("PostAggregationIgnoreHierarchy")){r.setPostAggregationIgnoreHierarchy(n.getBooleanByKey("PostAggregationIgnoreHierarchy"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("PostAggregationDimensions")){var l=e.PrUtils.asListOfString(n.getListByKey("PostAggregationDimensions"));r._setPostAggregationDimensions(l)}e.QInARepoMemberAbstract.importWindowFunction(r,n);if(n.containsKey("CurrencyTranslationName")){r.setCurrencyTranslationName(n.getStringByKey("CurrencyTranslationName"))}};e.QInARepoMemberAbstract.importWindowFunction=function(t,r){var n=r.getStructureByKey("WindowFunction");if(e.notNull(n)){var i=e.QWindowFunction._createWindowFunction(e.QInAConverter.lookupWindowFunctionType(n.getStringByKey("Name")));var o=n.getListByKey("DimensionsNotInPartition");if(e.notNull(o)){for(var a=0;a<o.size();a++){i.addNotInPartitionDimension(o.getStringAt(a))}}var l=n.getListByKey("SortDimensions");if(e.notNull(l)){for(var p=0;p<l.size();p++){var s=l.getStructureAt(p);var u=s.getStringByKey("Name");var g=e.QInAConverter.lookupSortDirection2(s.getStringByKey("Direction"));var y=e.QInAConverter.lookupNullsType(s.getStringByKey("Nulls"));i.addSortDimension(u,g,y)}}var m=n.getStructureByKey("Frame");if(e.notNull(m)){i.setFrame(e.QInAConverter.lookupFrameStartType(m.getStringByKey("Start")),m.getIntegerByKey("StartPreceding"),e.QInAConverter.lookupFrameEndType(m.getStringByKey("End")),m.getIntegerByKey("EndFollowing"))}t.setWindowFunction(i)}};e.QInARepoMemberAbstract.importCurrencyPlanningProperties=function(t,r){if(r.hasStringByKey("RateType")){t.setRateType(e.QInAConverter.lookupRateType(r.getStringByKey("RateType")))}if(r.hasStringByKey("UnitDimension")){t.setUnitDimensionName(r.getStringByKey("UnitDimension"))}if(r.hasStringByKey("UnitDimensionProperty")){t.setUnitDimensionProperty(r.getStringByKey("UnitDimensionProperty"))}};e.QInARepoMemberAbstract.importIgnoredExternalDimensions=function(t,r,n){if(t.capabilities.supportsIgnoreExternalDimensions()){if(n.hasStringByKey("IgnoreExternalDimensions")){var i=n.getStringByKey("IgnoreExternalDimensions");if(e.XString.isEqual(i,"All")){r.setIgnoreAllExternalDimensions(true)}}else if(n.containsKey("IgnoreExternalDimensions")){var o=n.getListByKey("IgnoreExternalDimensions");r._setExternalDimensionsToIgnore(e.PrUtils.asListOfString(o))}}var a=n.getStringByKey("OverrideText");if(e.XStringUtils.isNotNullAndNotEmpty(a)){r.setOverrideText(a)}};e.QInARepoMemberAbstract.importAggregationType=function(t,r,n){var i=n.getStringByKey("Aggregation");var o=r.getAggregationType();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DELTA||n.getBooleanByKeyExt("ModelDefinedMember",false)&&r.getDimension()!==null&&r.getDimension().getDimensionType()!==e.DimensionType.ACCOUNT;if(e.XStringUtils.isNotNullAndNotEmpty(i)){var l=e.QInAConverter.lookupAggregationType(i);if(a){if(e.notNull(l)&&e.AggregationType.lookupStatisticalAggregation(l.getName())!==null&&!r.getModelCapabilities().supportsStatisticalAggregations()){l=null}if(e.isNull(l)){l=e.AggregationType.SUM}}r.setAggregationType(l)}else if(a){r.setAggregationType(o)}else{r.setAggregationType(null)}};e.QInARepoMemberAbstract.importGenericMemberAbstractProperties=function(e,t,r){if(r.containsKey("ModelDefinedMember")){t.setModelDefinedMember(r.getBooleanByKey("ModelDefinedMember"))}if(r.containsKey("MinimumDrillState")){var n=r.getListByKey("MinimumDrillState").getIterator();while(n.hasNext()){t.addMinimumDrillState(n.next().asString().getString())}}};e.QInARepoMemberAbstract.exportCustomMember=function(t,r){var n=r.getComponentType();var i=null;if(n===e.MemberType.FORMULA||n===e.MemberType.VARIANCE){i=e.PrFactory.createStructure();t.exportFormulaMeasure(r,i)}else if(n===e.MemberType.RESTRICTED_MEASURE){i=e.PrFactory.createStructure();t.exportRestrictedMeasure(r,i)}else if(n===e.MemberType.EXCEPTION_AGGREGATION){i=e.PrFactory.createStructure();t.exportExceptionAggregationMeasure(r,i)}else if(n===e.MemberType.CURRENCY_MEASURE){i=e.PrFactory.createStructure();t.exportCurrencyMeasure(r,i)}return i};e.QInARepoMemberAbstract.exportFormulaItem=function(t,r,n,i){var o=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(r)&&r.getModCounter()>0;if(o){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,r,n,i,false,false)}};e.QInARepoMemberAbstract.exportFormulaItemSignFlip=function(t,r,n,i,o,a){if(e.notNull(r)){var l=r.getComponentType();if(l===e.OlapComponentType.FORMULA_CONSTANT){var p=r;var s=n.putNewStructure("Constant");var u=p.getUnit();if(e.XStringUtils.isNotNullAndNotEmpty(u)){s.putString("Unit",u)}var g=p.getCurrency();if(e.XStringUtils.isNotNullAndNotEmpty(g)){s.putString("Currency",g)}e.QInARepoMemberAbstract.exportFormulaConstantValue(t,s,p)}else if(l===e.OlapComponentType.FORMULA_OPERATION){var y=r;var m=n.putNewStructure("Function");m.putString("Name",y.getOperator().getDisplayString());var c=m.putNewList("Parameters");e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,y.getLeftSide(),c.addNewStructure(),i,o,a);e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,y.getRightSide(),c.addNewStructure(),i,o,a)}else if(l===e.OlapComponentType.FORMULA_FUNCTION){var A=r;var S=n.putNewStructure("Function");S.putString("Name",A.getFunctionName());var d=S.putNewList("Parameters");var I=A.size();for(var f=0;f<I;f++){e.QInARepoMemberAbstract.exportFormulaItemSignFlip(t,A.get(f),d.addNewStructure(),i,o,a)}var N=A.getSolveOrder();if(N!==0){n.putInteger("SolveOrder",N)}}else if(l===e.OlapComponentType.FORMULA_ITEM_MEMBER){var v=r;var T=i.getQueryModel();var R=v.getVariable();var E;if(e.isNull(R)){E=e.PrFactory.createStructure();var C;C=e.QInAExportUtil.getMeasureMemberNameByAlias(T,v.getMemberName(),t);E.putStringNotNull("Name",C);E.putStringNotNull("Dimension",v.getDimensionName());if(v.isBooked()){E.putString("NameIs","Booked")}else if(v.isPrevious()){E.putString("NameIs","Previous")}if(o){var Q=e.QInARepoMemberAbstract.exportMemberWithSignFlip(t,v);if(e.notNull(Q)){n.put("Function",Q.getByKey("Function"))}else{n.put("Member",E)}}else{n.put("Member",E)}}else{E=n.putNewStructure("Member");E.putString("Name",R.getName());E.putString("NameIs","Variable")}e.QInARepoMemberAbstract.exportDimensionContext(v,E)}else if(l===e.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){var M=r;var D=n.putNewStructure("AttributeValue");D.putString("Name",M.getFieldName());e.QInARepoMemberAbstract.exportDimensionContext(M,D)}}};e.QInARepoMemberAbstract.exportDimensionContext=function(t,r){var n;n=t.getDimensionContext();if(e.notNull(n)){var i=r.putNewStructure("DimensionContext");i.putString("DatasetId",n.getQueryModel().getDatasetId());i.putString("DimensionName",n.getName())}};e.QInARepoMemberAbstract.exportMemberWithSignFlip=function(e,t){return null};e.QInARepoMemberAbstract.exportFormulaConstantValue=function(t,r,n){var i=n.getValue()===null;var o=n.getVariable();if(i&&e.isNull(o)){r.putNull("Value")}var a=n.getValueType();if(a===e.XValueType.INTEGER){r.putString("ValueType","Number");if(!i){r.putInteger("Value",n.getInteger())}}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT){r.putString("ValueType","Number");if(!i){r.putDouble("Value",n.getDouble())}}else if(a===e.XValueType.LONG){r.putString("ValueType","Number");if(!i){r.putLong("Value",n.getLong())}}else if(a===e.XValueType.STRING){r.putString("ValueType","String");r.putString("Value",n.getString())}else if(a===e.XValueType.BOOLEAN){r.putString("ValueType","Bool");if(!i){r.putBoolean("Value",n.getBoolean())}}else if(a===e.XValueType.DATE){r.putString("ValueType","Date");if(!i){r.putString("Value",n.getDate().toString())}}else if(a===e.XValueType.DATE_TIME){r.putString("ValueType","DateTime");if(!i){r.putString("Value",n.getDateTime().toString())}}else if(a.isSpatial()){r.putString("ValueType","String");if(!i){r.putString("Value",n.getGeometry().toWKT())}}else if(a===e.XValueType.TIMESPAN){r.putString("ValueType","String");if(!i){var l=n.getTimeSpan();r.putString("Value",l.toString())}}else if(a===e.XValueType.VARIABLE){e.QInAExportUtil.setNameIfNotNull(r,"Value",o);r.putString("ValueIs","Variable")}};e.QInARepoMemberAbstract.signFlipMember=function(t){var r=t.getContext();var n=e.QFactory.createFormulaOperation(r);n.setOperator(e.MathOperator.MULT);n.setLeftSide(e.QFactory.createFormulaConstantWithIntValue(r,-1));n.setRightSide(t);return n};e.QInARepoMemberAbstract.getMemberForSignFlip=function(t){var r=t.getDimension();var n=t.getFilter();var i=r.getName();if(e.notNull(i)){if(n.isAll()){i=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(i,n.getFilterRootElement())}var o=r.getStructureMemberByAliasOrMember(i);if(e.notNull(o)&&o.getComponentType()===e.MemberType.RESTRICTED_MEASURE&&o!==t){return e.QInARepoMemberAbstract.getMemberForSignFlip(o)}}return i};e.QInARepoMemberAbstract.getFirstMemberForSignFlip=function(t,r){var n=r.getChildren();while(n.hasNext()){var i=n.next();if(i.getOlapComponentType()===e.FilterComponentType.OPERATION){var o=i;if(e.XString.isEqual(t,o.getDimensionName())){return o.getLow().getValue().toString()}}var a=e.QInARepoMemberAbstract.getFirstMemberForSignFlip(t,i);if(e.notNull(a)){return a}}return null};e.QInARepoMemberAbstract.exportPostAggregation=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGERGATION_TYPE)){var i=r.getPostAggregationType();if(e.notNull(i)){n.putString("PostAggregation",e.QInAConverter.lookupAggregationTypeInA(i))}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_IGNORE_HIERARCHY)){if(r.isPostAggregationIgnoringHierarchy()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("PostAggregationIgnoreHierarchy",r.isPostAggregationIgnoringHierarchy())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_POST_AGGREGATION_DIMENSIONS)){var o=r.getPostAggregationDimensions();if(o.hasElements()){var a=n.putNewList("PostAggregationDimensions");var l=o.getIterator();while(l.hasNext()){a.add(e.PrFactory.createString(l.next()))}}}};e.QInARepoMemberAbstract.exportWindowFunction=function(t,r){var n=t.getWindowFunction();if(e.notNull(n)){var i=r.putNewStructure("WindowFunction");i.putString("Name",e.QInAConverter.lookupWindowFunctionTypeInA(n.getType()));var o=n.getNotInPartitionDimensions();var a=i.putNewList("DimensionsNotInPartition");a.addAllStrings(o);var l=i.putNewList("SortDimensions");var p=n.getSortDimensions().getIterator();while(p.hasNext()){var s=p.next();var u=l.addNewStructure();u.putString("Name",s.getName());var g=s.getDirection();if(g===e.XSortDirection.ASCENDING||g===e.XSortDirection.DESCENDING){u.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(g))}var y=s.getNulls();if(e.notNull(y)&&y!==e.NullsType.NONE){u.putString("Nulls",e.QInAConverter.lookupNullsTypeInA(y))}}var m=n.getFrame();if(e.notNull(m)){var c=i.putNewStructure("Frame");c.putString("Start",e.QInAConverter.lookupFrameStartTypeInA(m.getStart()));c.putInteger("StartPreceding",m.getStartPreceding());c.putString("End",e.QInAConverter.lookupFrameEndTypeInA(m.getEnd()));c.putInteger("EndFollowing",m.getEndFollowing())}}};e.QInARepoMemberAbstract.exportCurrencyMetadataFusion=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_RATE_TYPE)){n.putStringNotNullAndNotEmpty("RateType",e.QInAConverter.lookupRateTypeInA(r.getRateType()))}n.putStringNotNullAndNotEmpty("UnitDimension",r.getUnitDimensionName());n.putStringNotNullAndNotEmpty("UnitDimensionProperty",r.getUnitDimensionProperty())};e.QInARepoMemberAbstract.exportFormattingProperties=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_CURRENCY_PRESENTATION)){n.putStringNotNullAndNotEmpty("CurrencyPresentation",e.QInAConverter.lookupCurrencyPresentationInA(r.getCurrencyPresentation()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_AND_UNIT_PLACEMENT)){n.putStringNotNullAndNotEmpty("ScaleAndUnitPlacement",e.QInAConverter.lookupScaleAndUnitPlacementInA(r.getScaleAndUnitPlacement()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SCALE_FORMAT)){n.putStringNotNullAndNotEmpty("ScaleFormat",e.QInAConverter.lookupScaleFormatInA(r.getScaleFormat()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SIGN_PRESENTATION)){n.putStringNotNullAndNotEmpty("SignPresentation",e.QInAConverter.lookupSignPresentationInA(r.getSignPresentation()))}};e.QInARepoMemberAbstract.exportInternalDataType=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_INTERNAL)){n.putStringNotNullAndNotEmpty("DataTypeInternal",e.QInAConverter.lookupValueTypeInA(r.getDataTypeInternal()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_SCALE)){var i=r.getDataTypeScale();if(e.notNull(i)){n.putInteger("DataTypeScale",i.getInteger())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE_PRECISION)){var o=r.getDataTypePrecision();if(e.notNull(o)){n.putInteger("DataTypePrecision",o.getInteger())}}};e.QInARepoMemberAbstract.exportChartFormatting=function(t,r,n){if(r.isShowCellChart()){n.putBoolean("ShowCellChart",true)}if(r.isHideNumberForCellChart()){n.putBoolean("HideNumberForCellChart",true)}n.putStringNotNullAndNotEmpty("CellChartBarColor",r.getCellChartBarColor());n.putStringNotNullAndNotEmpty("CellChartLineColor",r.getCellChartLineColor());n.putStringNotNullAndNotEmpty("CellChartOrientation",e.QInAConverter.lookupCellChartOrientationInA(r.getCellChartOrientation()));n.putStringNotNullAndNotEmpty("CellChartType",e.QInAConverter.lookupCellChartTypeInA(r.getCellChartType()))};e.QInARepoMemberAbstract.prototype.getComponentType=function(){return e.MemberType.ABSTRACT_MEMBER};e.QInARepoMemberAbstract.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=i;if(e.isNull(l)){l=a.getMeasureDimension()}var p=e.QInARepoMemberAbstract.importMeasure(t,r,o,a,l);if(e.notNull(p)){e.QInARepoMemberAbstract.importGenericRuntimeMemberProperties(t,p,r);if(r.containsKey("PresentationSignReversal")){p.setPresentationSignReversal(r.getBooleanByKey("PresentationSignReversal"))}var s=r.getIntegerByKeyExt("[Measures].[Aggregation]",-1);var u=e.QInAConverter.lookupAggregationType2(s);if(e.notNull(u)){p.setAggregationType(u)}if((a.isBasicMeasureSettingsExportedInRepo()||!p.isCreatedFromMetadata()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA)&&!e.XCollectionUtils.hasElements(r.getStructureByKey("[Measures].[MemberDetails]"))){this.setPrecisionAndScale(t,r,a,p);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("UnitType")){p.setUnitType(e.QInAConverter.lookupUnitType(r.getStringByKey("UnitType")))}p.setUnitFixed(r.getStringByKey("UnitFixed"));p.setUnitName(r.getStringByKey("UnitName"));p.setUnitTextName(r.getStringByKey("UnitTextName"))}t.importExceptions(r,p);e.QInARepoMemberAbstract.importExceptionAggregationProperties(t,r,l.getQueryModel(),p);e.QInARepoMemberAbstract.importCurrencyPlanningProperties(p,r);e.QInARepoMemberAbstract.importInternalDataType(r,p);e.QInARepoMemberAbstract.importFormattingProperties(t,r,p);if(l.getDimensionType()===e.DimensionType.ACCOUNT&&r.containsKey("HierarchyDisplayKey")){var g=l.getHierarchyDisplayKeyField();if(e.notNull(g)){p.createAndAddFieldValueWithString(g,r.getStringByKey("HierarchyDisplayKey"))}}e.QInARepoMemberAbstract.importChartFormatting(r,p)}return p};e.QInARepoMemberAbstract.prototype.setPrecisionAndScale=function(e,t,r,n){var i=-1;var o=-1;if(e.isAbap(r)){i=t.getIntegerByKeyExt("Digits",-1);o=t.getIntegerByKeyExt("FractDigits",-1)}else{i=t.getIntegerByKeyExt("[Measures].[Digits]",-1);o=t.getIntegerByKeyExt("[Measures].[FractDigits]",-1)}if(i!==-1){n.setNumericPrecision(i)}if(o!==-1){n.setNumericScale(o)}};e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties=function(t,r,n){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QDimensionMemberProperties.QY_VISIBILITY)){var i=r.getResultVisibility();if(e.isNull(i)){i=e.ResultVisibility.VISIBLE}n.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(i))}n.putStringNotNullAndNotEmpty("CurrencyTranslationName",r.getCurrencyTranslationName());e.QInARepoMemberAbstract.exportCurrencyMetadataFusion(t,r,n);e.QInARepoMemberAbstract.exportInternalDataType(t,r,n);e.QInARepoMemberAbstract.exportFormattingProperties(t,r,n);var o=r.getMemberType();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER)){if((o===e.MemberType.BASIC_MEASURE||r.isSolveOrderOverDefined())&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_SOLVE_ORDER))){n.putInteger("SolveOrder",r.getSolveOrder())}}e.QInARepoMemberAbstract.exportChartFormatting(t,r,n);if(r.isModelDefinedMember()){n.putBoolean("isModelDefinedMember",true)}n.putStringNotNullAndNotEmpty("PreferredHierarchy",r.getPreferredHierarchy());n.putString("MemberType",e.QInAConverter.lookupMeasureStructureMemberTypeIna(o));if(o!==e.MemberType.EXCEPTION_AGGREGATION){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SHIFT)){e.QInARepoUtils.setIntegerIfNotNull(n,"NumericShift",r.getNumericShift())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_SCALE)){e.QInARepoUtils.setIntegerIfNotNull(n,"NumericScale",r.getNumericScale())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_NUMERIC_PRECISION)){e.QInARepoUtils.setIntegerIfNotNull(n,"NumericPrecision",r.getNumericPrecision())}e.QInARepoMemberAbstract.exportPostAggregation(t,r,n)}if(o!==e.MemberType.EXCEPTION_AGGREGATION&&o!==e.MemberType.CURRENCY_MEASURE){t.exportExceptions(r,n)}if(o!==e.MemberType.VARIANCE&&o!==e.MemberType.CURRENCY_MEASURE){var a=r.getExceptionAggregationType();if(e.notNull(a)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)){n.putString("ExceptionAggregation",a.getName())}var l=n.putNewList("ExceptionAggregationDimensions");l.addAllStrings(r.getExceptionAggregationDimensions())}}if(o!==e.MemberType.BASIC_MEASURE&&o!==e.MemberType.EXCEPTION_AGGREGATION){e.QInARepoMemberAbstract.exportWindowFunction(r,n)}if(o===e.MemberType.RESTRICTED_MEASURE||o===e.MemberType.FORMULA||o===e.MemberType.EXCEPTION_AGGREGATION||o===e.MemberType.VARIANCE){this.exportProperties(r,n)}var p=r.getOverrideText();if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.putString("OverrideText",p)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(e.QStructureMemberProperties.QY_IGNORE_EXTERNAL_DIMENSIONS)){if(r.isIgnoringAllExternalDimensions()){n.putString("IgnoreExternalDimensions","All")}else{var s=e.XListOfString.create();s.addAll(r.getIgnoredExternalDimensions());if(s.hasElements()){var u=n.putNewList("IgnoreExternalDimensions");u.addAllStrings(s)}}}};e.QInARepoMemberAbstract.prototype.exportProperties=function(e,t){if(e.getAliasName()!==null){t.putString("AliasName",e.getAliasName())}if(e.isAutoSignFlip()){t.putBoolean("AutoSignFlip",e.isAutoSignFlip())}if(e.getAccountType()!==null){t.putString("AccountType",e.getAccountType().getName())}};e.QInARepoMembersAll=function(){};e.QInARepoMembersAll.prototype=new e.QInARepository;e.QInARepoMembersAll.prototype._ff_c="QInARepoMembersAll";e.QInARepoMembersAll.prototype.getComponentType=function(){return e.OlapComponentType.MEMBERS};e.QInARepoMembersAll.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getBooleanByKeyExt("IsDelta",false);var l=n;if(l.supportsCustomMembers()&&!a){l.removeCustomMembers()}var p=r.getListByKey("MembersRepo");if(e.isNull(p)){return null}var s=l.getStructureLayout();if(e.notNull(s)){if(!a&&t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA){l.removeCustomMembers();var u=this.getMemberNamesFromMemberList(p);for(var g=s.size()-1;g>=0;g--){var y=s.get(g);if(y.isModelDefinedMember()&&(l.getDimensionType()===e.DimensionType.ACCOUNT||!u.contains(y.getName()))){continue}s.removeAt(g)}}var m=e.XListOfString.create();if(a){var c=l.getLoadedStructureMembers().getIterator();while(c.hasNext()){var A=c.next();if(e.notNull(A)&&A.getMemberType()===e.MemberType.BASIC_MEASURE){m.add(A.getName())}}}var S=p.size();for(var d=0;d<S;d++){var I=p.getStructureAt(d);var f=t.importStructureMember(l,I,o);if(e.notNull(f)){var N=f.getName();var v=l.getLoadedStructureMember(N);if(e.isNull(v)){if(a){l.addModellerMember(f);var T=l.getModellerMemberKeyRef(f.getStorageObjectName());l.addMeasure(T);m.removeElement(f.getName())}else{l.addMeasure(f)}}else if(a){l.addModellerMember(f);if(l.getStructureLayout().getByKey(f.getStorageObjectName())===null){l.getStructureLayout().addKeyRef(f)}m.removeElement(f.getName())}else{if(v!==f&&!v.isModelDefinedMember()){throw e.XException.createIllegalStateException(e.XStringUtils.concatenate3("Internal error: New member with same name not allowed: '",N,"'!"))}s.removeElement(v);s.add(v)}}}if(a&&m.size()>0){var R=m.getIterator();while(R.hasNext()){var E=R.next();var C=l.getLoadedStructureMember(E);if(e.notNull(C)){C.setModelDefinedMember(true);l.addModellerMember(C)}}}}return l};e.QInARepoMembersAll.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getOlapEnv();var l=o.getStructureLayout();if(e.notNull(l)){if(!o.supportsBasicStructureMembers()&&l.isEmpty()){return null}var p=n.putNewList("MembersRepo");var s=l.size();for(var u=0;u<s;u++){var g=l.get(u);if(e.isNull(g)){continue}var y=o.getQueryManager()!==null&&o.getQueryManager().isKeyRefSerializationEnabled();if(y&&e.notNull(a)&&a.getClientQueryObjectManager().getClientQueryObjectIncludeReleasedByKeyRef(g,o.getQueryManager().getClientQueryObjectStorageName())!==null){var m=t.exportStructureMember(g);p.add(m);continue}if(g.isReleased()){continue}if(g.isModelDefinedMember()){if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_REPOSITORY)){if(o.getDimensionType()===e.DimensionType.ACCOUNT||t.getOriginalMode()===e.QModelFormat.INA_REPOSITORY_DELTA){continue}if(y){var c=p.addNewStructure();e.QInARepoUtils.addKeyRefStructure(t,g,c,o.getQueryManager());continue}}else if(t.getOriginalMode().isTypeOf(e.QModelFormat.INA_CLONE)&&o.getDimensionType()===e.DimensionType.ACCOUNT){continue}}var A=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||!g.isCreatedFromMetadata()||g.getModCounter()>0;if(A){var S=t.exportStructureMember(g);p.add(S)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMembersAll.prototype.getMemberNamesFromMemberList=function(t){var r=e.XHashSetOfString.create();for(var n=0;n<t.size();n++){var i=t.getStructureAt(n);var o=i.getStructureByKey("KeyRef");var a=e.notNull(o)?o.getStringByKey("ObjectName"):i.getStringByKey("Name");if(e.XStringUtils.isNotNullAndNotEmpty(a)){r.add(a)}}return r};e.QInARepoModellerCurrencyTranslation=function(){};e.QInARepoModellerCurrencyTranslation.prototype=new e.QInARepository;e.QInARepoModellerCurrencyTranslation.prototype._ff_c="QInARepoModellerCurrencyTranslation";e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation=function(t,r){if(t>0){var n=r.getQueryModel();var i=e.XListOfString.create();var o=n.getMeasureDimension();var a=0;var l=o.getStructureLayout().getIterator();while(l.hasNext()){var p=l.next();if(e.notNull(p)){var s=p.getName();if(e.XString.isEqual(s,"SignedDataLocal")){i.add("SignedDataLocal")}else if(e.XString.startsWith(s,"SignedDataOther")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember(s,n)&&a<t-1){i.add(s);a++}else if(e.XString.isEqual(s,"SignedData")&&e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember("SignedData",n)){i.add("SignedData")}}}o.setPlaceholderIds(i)}};e.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember=function(t,r){var n=r.getVariable(e.XStringUtils.concatenate3(t,".","Currency"));return e.notNull(n)};e.QInARepoModellerCurrencyTranslation.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION};e.QInARepoModellerCurrencyTranslation.prototype.getTagName=function(){return"ModellerCurrencyTranslation"};e.QInARepoModellerCurrencyTranslation.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(a)&&e.notNull(r)){var l=r.getBooleanByKeyExt("PlanningParametersForCurrencyTranslation",false);var p=r.getBooleanByKeyExt("RateTypeFromAccount",false);var s=r.getIntegerByKeyExt("MaxNumberOfCurrencyTranslations",-1);a.setMaxNumberOfTranslations(s);a.setSupportsExtendedRateNameParameters(l);a.initializeLegacyCurrencyTranslation(!l);a.setDeriveRateTypeFromAccount(p);var u=r.getStringByKey("CurrencyTranslationTimeDimension");a.setCurrencyTranslationTimeDimensionName(u);a.setCurrencyRateTableId(r.getStringByKey("CurrencyRateTableId"));var g=r.getStringByKey("CurrencyDimension");if(e.XStringUtils.isNotNullAndNotEmpty(g)){a.setCurrencyDimensionName(g)}var y=r.getStringByKey("DefaultCurrency");if(e.XStringUtils.isNotNullAndNotEmpty(y)){a.setDefaultCurrency(y)}var m;var c;var A;var S=r.getListByKey("RateVersions");if(e.XCollectionUtils.hasElements(S)){a.clearAvailableRateVersions();c=S.size();for(m=0;m<c;m++){A=S.getStructureAt(m);a.addAvailableRateVersion(A.getStringByKey("Name"),A.getStringByKey("Text"))}}var d=r.getListByKey("Currencies");if(e.XCollectionUtils.hasElements(d)){a.clearAvailableCurrencies();c=d.size();for(m=0;m<c;m++){A=d.getStructureAt(m);a.addAvailableCurrency(A.getStringByKey("Name"),A.getStringByKey("Text"))}}var I=r.getListByKey("Categories");if(e.XCollectionUtils.hasElements(I)){a.clearAvailableCategories();c=I.size();for(m=0;m<c;m++){A=I.getStructureAt(m);a.addAvailableCategory(e.QInAConverter.lookupCategory(A.getStringByKey("Name")))}}var f=r.getListByKey("RateTypes");if(e.XCollectionUtils.hasElements(f)){a.clearAvailableRateTypes();c=f.size();for(m=0;m<c;m++){A=f.getStructureAt(m);a.addAvailableRateType(e.QInAConverter.lookupRateType(A.getStringByKey("Name")))}}e.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation(s,a);a.postImportInitialization();this.importModellerDefinedCurrencyTranslations(t,r,a,o)}return a};e.QInARepoModellerCurrencyTranslation.prototype.importModellerDefinedCurrencyTranslations=function(t,r,n,i){var o=r.getListByKey("CurrencyTranslations");if(e.XCollectionUtils.hasElements(o)){var a=o.size();for(var l=0;l<a;l++){var p=o.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Description");var g=n.getMeasureCurrencyTranslation(s);if(e.isNull(g)){g=n.addNewMeasureCurrencyTranslationBase(s,u)}t.importCurrencyTranslationElement(p,g,i)}}};e.QInARepoModellerCurrencyTranslation.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerDimensions=function(){};e.QInARepoModellerDimensions.prototype=new e.QInARepository;e.QInARepoModellerDimensions.prototype._ff_c="QInARepoModellerDimensions";e.QInARepoModellerDimensions.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_DIMENSIONS};e.QInARepoModellerDimensions.prototype.getTagName=function(){return"ModellerDimensions"};e.QInARepoModellerDimensions.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=r.getListByKey("Dimensions");var p=l.size();var s=a.getDimensionManagerBase();var u=s.getDimensionReferences();for(var g=0;g<p;g++){var y=l.getStructureAt(g);var m=y.getStringByKey("Name");if(u.containsKey(m)){var c=s.getDimensionByNameFromExistingMetadata(m);if(a.getSession().hasFeature(e.FeatureToggleOlap.SFX_HIDDEN_DIMENSIONS)&&y.getBooleanByKey("IsHidden")){var A=c.getFields().getIterator();while(A.hasNext()){s.removeField(A.next());s.removeDimension(c)}}}t.importDimension(y,a)}var S=a.getExtendedDimensions();var d=r.getListByKey("ExtendedDimensions");if(e.notNull(S)&&e.notNull(d)&&!d.isEmpty()){for(var I=0;I<S.size();I++){var f=S.get(I);var N=f.getName();for(var v=0;v<d.size();v++){var T=d.getStructureAt(v);if(e.XString.isEqual(N,T.getStringByKey("Name"))){f.setLocationType(e.LocationType.lookup(T.getStringByKey("LocationType")))}}}}}return a};e.QInARepoModellerDimensions.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerMetadataProperties=function(){};e.QInARepoModellerMetadataProperties.prototype=new e.QInARepository;e.QInARepoModellerMetadataProperties.prototype._ff_c="QInARepoModellerMetadataProperties";e.QInARepoModellerMetadataProperties.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_METADATA_PROPERTIES};e.QInARepoModellerMetadataProperties.prototype.getTagName=function(){return"ModellerMetadataProperties"};e.QInARepoModellerMetadataProperties.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.isNull(r)){return n}var a=n;var l=a.getMetadataPropertiesBase();if(e.notNull(l)){l.putBoolean("HasUserDefinedMeasures",r.getBooleanByKeyExt("HasUserDefinedMeasures",false));l.putBoolean("IsPlanning",r.getBooleanByKeyExt("IsPlanning",false));l.putStringNotNull("LeadingStructure",r.getStringByKey("LeadingStructure"));l.putStringNotNull("MappedVersionDimension",r.getStringByKey("MappedVersionDimension"))}var p=r.getStringByKey("Mode");var s=r.getStringByKey("EpmQuerySourceName");var u=r.getStringByKey("SchemaName");var g=r.getStringByKey("PackageName");var y=r.getStringByKey("Name");var m=r.getStringByKey("ShortDescription");var c=e.QDatasetEpmObject.create(p,s,u,g,y,m);a.setDatasetEpmObject(c);return a};e.QInARepoModellerMetadataProperties.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoModellerVariableManager=function(){};e.QInARepoModellerVariableManager.prototype=new e.QInARepository;e.QInARepoModellerVariableManager.prototype._ff_c="QInARepoModellerVariableManager";e.QInARepoModellerVariableManager.prototype.getComponentType=function(){return e.OlapComponentType.MODELLER_VARIABLES};e.QInARepoModellerVariableManager.prototype.getTagName=function(){return"ModellerVariables"};e.QInARepoModellerVariableManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=r.getListByKey("Variables");if(e.notNull(l)){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getStringByKey("Name");var y=a.getVariableBaseByName(g);if(e.isNull(y)&&u.getBooleanByKeyExt("CustomVariable",false)){y=this.createCustomVariable(o,u);var m=u.getStringByKey("InputType");var c=e.XString.isEqual(m,"Mandatory")||e.XString.isEqual(m,"MandatoryNotInitial");y.setMandatory(c);var A=e.XString.isEqual(m,"Mandatory")||e.XString.isEqual(m,"Optional");y.setInitialValueAllowed(A)}if(e.notNull(y)){y.setProcessingType(e.QInAConverter.lookupProcessingType(u.getStringByKey("ProcessingType")));var S=y.getVariableType();if(S.isTypeOf(e.VariableType.SIMPLE_TYPE_VARIABLE)){t.importSimpleTypeVariable(u,y,o)}else if(S.isTypeOf(e.VariableType.DIMENSION_MEMBER_VARIABLE)){t.importDimensionMemberVariable(u,y,o)}else if(S.isTypeOf(e.VariableType.OPTION_LIST_VARIABLE)){t.importOptionListVariable(u,y,o)}else{t.addError(e.ErrorCodes.INVALID_PARAMETER,e.XStringUtils.concatenate5("The variable '",g,"' of variable type '",S.getName(),"' was not imported correctly"))}}else{t.addWarning(e.ErrorCodes.ET_ELEMENT_NOT_FOUND,e.XStringUtils.concatenate3("The variable '",g,"' was not found"))}}}}return a};e.QInARepoModellerVariableManager.prototype.createCustomVariable=function(t,r){var n=e.QFactory.createCustomVariableConfig(t.getQueryManager());var i=r.getListByKey("Options");var o=e.XList.create();if(!e.PrUtils.isListEmpty(i)){var a=i.size();for(var l=0;l<a;l++){var p=i.getStructureAt(l);var s=p.getStringByKey("Name");var u=p.getStringByKey("Text");o.add(e.XPairOfString.create(s,u))}}return n.createOptionsListVariable(r.getStringByKey("Name"),r.getStringByKey("Text"),o)};e.QInARepoModellerVariableManager.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoQuery=function(){};e.QInARepoQuery.prototype=new e.QInARepository;e.QInARepoQuery.prototype._ff_c="QInARepoQuery";e.QInARepoQuery.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MODEL};e.QInARepoQuery.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n.getQueryModel();var l=r;var p=l.getListByKey("Queries");if(e.notNull(p)){l=p.getStructureAt(p.size()-1)}var s=l.getListByKey(e.ConnectionConstants.INA_BATCH);if(e.notNull(s)){l=s.getStructureAt(s.size()-1)}if(e.notNull(l)&&l.containsKey("Analytics")){l=l.getStructureByKey("Analytics");if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}}if(e.notNull(l)&&l.containsKey("Definition")){l=l.getStructureByKey("Definition")}if(e.notNull(l)){var u=t.getOriginalMode()===e.QModelFormat.INA_CLONE_RENDERING;if(l.containsKey("ModellerDefinition")){l=l.getStructureByKey("ModellerDefinition");var g=a.isEventingStopped();if(g){a.setDeltaPhase(e.QDeltaOperationPhase.NOTE_MODELER_CHANGES)}t.importModellerDimensions(l,a,a);t.importModellerDefinedVariables(l,a.getVariableManagerBase(),a);t.importModellerCurrencyTranslation(l,a.getCurrencyTranslationManagerBase(),a);t.importModellerMetadataProperties(l,a,a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);if(g){a.finishModelerEventing()}return a}t.importDimensions(l,a,a);if(!u){t.importFilter(l,a.getFilterBase(),a);t.importExceptions(l,a);t.importQueryCells(l,a.getQueryCellManager(),a);t.importUniversalDisplayHierarchies(l,a.getUniversalDisplayHierarchiesBase(),a)}t.importCurrencyTranslationManager(l,a.getCurrencyTranslationManager(),a);t.importSortingManager(l,a.getSortingManagerBase(),a);t.importDrillManager(l,a.getDrillManager(),a);t.importCellContextManager(l,a.getCellContextManager(),a);t.importVisualizationManager(l,a.getVisualizationManager(),a);if(t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){t.importVariableManager(l,a.getVariableManagerBase(),a)}t.importQuerySettings(l,a);t.importDataCells(l,a);t.importConditionManager(l,a.getConditionManagerBase(),a);t.importFormulaExceptionManager(l,a.getFormulaExceptionManagerBase(),a);this.importPaging(t,l,a);var y=a.getResultStructureController();t.importComponent(null,l,y,a,a);var m=a.getQueryManager();if(e.notNull(m)){e.QInARepoOptions.importSuppressKeyfigureCalculation(l,m);e.QInARepoOptions.importLOVAbstractionLayerSettings(l,m);m.setResultSetPersistanceTargetTable(r.getStringByKey("ResultSetPersistanceTable"));m.setResultSetPersistanceTargetSchema(r.getStringByKey("ResultSetPersistanceSchema"));m.setResultSetPersistenceIdentifier(r.getStringByKey("ResultSetPersistanceIdentifier"))}var c=l.getListByKey("PreQueries");if(e.notNull(c)){var A=null;var S=l.getStructureByKey("DataSource");if(e.notNull(S)){A=S.getStringByKey("System")}this.importPreQueries(t,a,c,A)}if(t.mode.isTypeOf(e.QModelFormat.INA_REPOSITORY_DATA)&&a.isBlendingModel()){this.importBlendingSources(t,r,a)}a.setVersionDimensionValidationEnabled(l.getBooleanByKeyExt("IsVersionDimensionValidationEnabled",false))}return a};e.QInARepoQuery.prototype.importBlendingSources=function(t,r,n){var i=n.getBlendingSources();if(!e.XCollectionUtils.hasElements(i)){return}var o=e.PrUtils.getStructureProperty(r,"DataSource");var a=e.PrUtils.getListProperty(o,"Sources");if(e.PrUtils.isListEmpty(a)){return}for(var l=0;l<i.size();l++){var p=e.PrUtils.getStructureElement(a,l);var s=e.PrUtils.getStructureProperty(p,"DefiningContext");if(e.notNull(s)){var u=i.get(l).getQueryModel();u.deserializeFromElementExt(t.mode,s)}}};e.QInARepoQuery.prototype.importPaging=function(t,r,n){var i=r.getStructureByKey("SubSetDescription");var o=n.getQueryManager();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(e.isNull(i)||!n.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||o.applyingStateOnQueryManager()&&!a){return}e.QInARepoOptions.importPaging(r,o)};e.QInARepoQuery.prototype.getInactiveCapabilities=function(t){var r=e.XHashMapByString.create();var n=e.FeatureToggleOlap.getAllFeatureToggles();var i=n.getKeysAsIteratorOfString();while(i.hasNext()){r.put(i.next(),e.XBooleanValue.create(false))}var o=t.getSession().getFeatureToggles();if(e.notNull(o)){var a=o.getKeysAsIteratorOfString();while(a.hasNext()){r.put(a.next(),e.XBooleanValue.create(true))}}return r};e.QInARepoQuery.prototype.importPreQueries=function(t,r,n,i){var o=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}var a=e.XStringBuffer.create();var l=this.getInactiveCapabilities(r);var p=n.size();for(var s=0;s<p;s++){var u=n.getStructureAt(s);var g=u.getStructureByKey("Runtime");if(e.isNull(g)){g=u}var y=g.getStructureByKey("DataSource");a.clear();a.append(y.getStringByKey("Type")).append(":[");a.append(y.getStringByKey("SchemaName"));a.append("][");a.append(y.getStringByKey("PackageName"));a.append("][");a.append(y.getStringByKey("ObjectName")).append("]");var m=e.XCommandFactory.create(r.getApplication());var c=m.createCommand(e.CmdCreateQueryManager.CMD_NAME);c.addParameter(e.CmdCreateQueryManager.PARAM_I_APPLICATION,r.getApplication());c.addParameter(e.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,l);var A=y.getStringByKey("System");if(t.mode===e.QModelFormat.INA_REPOSITORY&&e.XString.isEqual(A,i)){A=r.getDataSource().getSystemName()}c.addParameterString(e.CmdCreateQueryManager.PARAM_I_SYSTEM,A);c.addParameterString(e.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,a.toString());var S=c.processCommand(e.SyncType.BLOCKING,null,null);t.addAllMessages(S);e.XObjectExt.release(c);if(S.isValid()){var d=S.getData().getResultParameter(e.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();t.importPreQuery(u,d);e.QInARepoDataSource.importDs2(t,y,null,d.getDataSourceBase());var I=u.getStringByKey("ObjectName");var f=r.getPreQueryByName(I);if(e.isNull(f)){r.addPreQueryWithName(d,I)}}}t.mode=o};e.QInARepoQuery.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r.getQueryModel();var a=t.mode===e.QModelFormat.INA_REPOSITORY_DATA_RENDERING;t.exportUniversalDisplayHierarchies(o.getUniversalDisplayHierarchies(),n);var l=o.getDrillManager();t.exportDrillManager(l,n);if(!l.isValidatingContextFreeNavigations()){n.putBoolean("ValidateContextFreeNavigations",false)}var p=o.getCellContextManager();t.exportCellContextManager(p,n);var s=e.XMath.binaryAnd(i,e.QImExFlag.DATASOURCE)>0;if(s){e.QInARepoDataSource.exportDataSource(t,o.getDataSource(),o.getModelCapabilities().supportsRunAsUser(),n)}t.exportDimensions(o,n);t.exportSortingManager(o.getSortingManager(),n);t.exportCurrencyTranslationManager(o.getCurrencyTranslationManager(),n);t.exportDataCells(o,n);t.exportQuerySettings(o,n);if(!a){t.exportFilter(o.getFilter(),n);t.exportExceptions(o,n);t.exportQueryCells(o.getQueryCellManager(),n)}t.exportConditionManager(o.getConditionManager(),n);var u=e.XMath.binaryAnd(i,e.QImExFlag.VARIABLES)>0;if(u&&t.mode!==e.QModelFormat.INA_REPOSITORY_NO_VARS&&t.mode!==e.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(o.isExportingVariables()||o.hasProcessingStep()){t.exportVariables(o.getVariableContainer(),n)}}var g=o.getQueryManager();if(o.isBatchModeForMicroCube()){n.putString("Name",g.getNameForMicroCubeUse())}t.exportFormulaExceptionManager(o.getFormulaExceptionManager(),n);this.exportPaging(n,o);e.QInARepoOptions.exportSuppressKeyfigureCalculation(n,g);e.QInARepoOptions.exportLOVAbstractionLayerSettings(n,g);var y=o.getPreQueries();if(e.notNull(y)){var m=y.size();if(m>0){var c=n.getListByKey("PreQueries");if(e.isNull(c)){c=n.putNewList("PreQueries")}var A=t.getMode();if(t.getOriginalMode()!==e.QModelFormat.INA_CLONE_RENDERING){t.mode=t.getOriginalMode()}for(var S=0;S<m;S++){var d=y.get(S);var I=t.exportPreQuery(d.getObject());var f=d.getName();I.putString("ObjectName",f);c.add(I)}t.mode=A;n.put("PreQueries",c)}}var N=o.getResultStructureController();t.exportComponent(null,N,n,i);var v=e.InactiveCapabilityUtil.exportFeatureToggles(g.getSession().getFeatureToggles());n.putString("ExperimentalFeatures",v);n.putString("ResultSetPersistanceTable",g.getResultSetPersistenceTable());n.putString("ResultSetPersistanceSchema",g.getResultSetPersistenceSchema());n.putString("ResultSetPersistanceIdentifier",g.getResultSetPersistenceIdentifier());t.exportVisualizationManager(o.getVisualizationManager(),n);n.putBoolean("IsVersionDimensionValidationEnabled",o.isVersionDimensionValidationEnabled());return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoQuery.prototype.exportPaging=function(t,r){var n=r.getQueryManager();if(!r.getSession().hasFeature(e.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||n.recordingStateOfQueryManager()){return}if(n.getOffsetColumns()>0||n.getOffsetRows()>0||n.getMaxColumns()>-1||n.getMaxRows()>-1){e.QInARepoOptions.exportPaging(t,n)}};e.QInARepoQueryCells=function(){};e.QInARepoQueryCells.prototype=new e.QInARepository;e.QInARepoQueryCells.prototype._ff_c="QInARepoQueryCells";e.QInARepoQueryCells.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_CELLS};e.QInARepoQueryCells.prototype.getTagName=function(){return"Cells"};e.QInARepoQueryCells.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(a)){a.clear();if(e.notNull(r)){var l=r.getListByKey("Elements");if(e.notNull(l)){var p=a.getDimensionAccessor();var s=l.size();for(var u=0;u<s;u++){var g=l.getStructureAt(u);var y=a.addNewQueryCell(g.getStringByKey("Name"));y.setCellCalculationMember(this.getMember(p,g));var m=g.getListByKey("Position");var c=m.size();for(var A=0;A<c;A++){var S=m.getStructureAt(A);y.addPosition(this.getMember(p,S))}}}}}return a};e.QInARepoQueryCells.prototype.getMember=function(e,t){var r=e.getDimensionByName(t.getStringByKey("DimensionName"));return r.getStructureMember(t.getStringByKey("MemberName"))};e.QInARepoQueryCells.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(e.notNull(o)&&o.size()>0){var a=n.putNewList("Elements");var l=o.getIterator();while(l.hasNext()){var p=l.next();var s=a.addNewStructure();s.putString("Name",p.getName());var u=p.getCellCalculationMember();s.putString("DimensionName",u.getDimension().getName());s.putString("MemberName",u.getName());var g=s.putNewList("Position");var y=p.getPositions();var m=y.getIterator();while(m.hasNext()){var c=m.next();var A=g.addNewStructure();A.putString("DimensionName",c.getDimensionName());A.putString("MemberName",c.getMemberName())}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoQueryManager=function(){};e.QInARepoQueryManager.prototype=new e.QInARepository;e.QInARepoQueryManager.prototype._ff_c="QInARepoQueryManager";e.QInARepoQueryManager.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_MANAGER};e.QInARepoQueryManager.prototype.importComponentWithStructure=function(e,t,r,n,i){var o=r;return o};e.QInARepoQueryManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getQueryModel();if(e.notNull(a)){var l=t.exportQueryModel(a,true,true);n.put("QueryModel",l)}var p=o.getQueryServiceConfig();var s=t.exportComponent(e.OlapComponentType.QUERY_SERVICE_CONFIG,p,null,i);n.put("QueryServiceConfig",s);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,n,i)};e.QInARepoQuerySettings=function(){};e.QInARepoQuerySettings.prototype=new e.QInARepository;e.QInARepoQuerySettings.prototype._ff_c="QInARepoQuerySettings";e.QInARepoQuerySettings.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SETTINGS};e.QInARepoQuerySettings.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=e.PrUtils.getStringProperty(r,"Name");if(e.notNull(l)){a.setDefinitionName(l.getString())}var p=r.getStructureByKey("Query");t.importAxesSettings(p,a);var s=e.PrUtils.getListProperty(p,"AxesLayout");var u=e.PrUtils.getListSize(s,0);for(var g=0;g<u;g++){var y=e.PrUtils.getStructureElement(s,g);var m=e.AxisType.lookup(e.PrUtils.getStringValueProperty(y,"Axis",null));var c=a.getAxis(m);if(e.isNull(c)){continue}var A=e.PrUtils.getListProperty(y,"OrderedDimensionNames");if(e.isNull(A)){continue}var S=e.XListOfString.create();for(var d=0;d<e.PrUtils.getListSize(A,0);d++){var I=e.PrUtils.getStringElement(A,d);if(e.isNull(I)){continue}S.add(I.getString())}c.reOrderDimensions(S)}return a};e.QInARepoQuerySettings.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getDefinitionName();if(e.XStringUtils.isNotNullAndNotEmpty(a)){n.putString("Name",a)}var l=n.getStructureByKey("Query");if(e.isNull(l)){l=n.putNewStructure("Query")}t.exportAxesSettings(o,l);var p=l.putNewList("AxesLayout");var s=e.AxisType.getAll();for(var u=0;u<s.size();u++){var g=s.get(u);var y=o.getAxis(g);if(e.isNull(y)){continue}var m=y.getOrderedDimensionNames();if(e.isNull(m)){continue}var c=p.addNewStructure();c.putString("Axis",y.getName());var A=c.putNewList("OrderedDimensionNames");A.addAllStrings(m)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoServiceConfig=function(){};e.QInARepoServiceConfig.prototype=new e.QInARepository;e.QInARepoServiceConfig.prototype._ff_c="QInARepoServiceConfig";e.QInARepoServiceConfig.prototype.getComponentType=function(){return e.OlapComponentType.QUERY_SERVICE_CONFIG};e.QInARepoServiceConfig.prototype.newModelComponent=function(t,r,n,i){var o=e.QueryServiceConfig.create(t);return o};e.QInARepoServiceConfig.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getStringByKey("System");if(e.XStringUtils.isNotNullAndNotEmpty(l)){a.setSystemName(l)}var p=r.getStructureByKey("DataSource");if(e.notNull(p)){var s=t.importDataSource(p);a.setDataSource(s)}return a};e.QInARepoServiceConfig.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putStringNotNullAndNotEmpty("System",o.getSystemName());var a=t.exportDataSource(o.getDataSource(),false);n.putNotNullAndNotEmpty("DataSource",a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,o,n,i)};e.QInARepoSort=function(){};e.QInARepoSort.prototype=new e.QInARepository;e.QInARepoSort.prototype._ff_c="QInARepoSort";e.QInARepoSort.prototype.getComponentType=function(){return e.OlapComponentType.SORT_MANAGER};e.QInARepoSort.prototype.getTagName=function(){return"SortRepo"};e.QInARepoSort.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getListByKey("Elements");var p=a.getSortingOperations();p.clear();if(e.notNull(l)){for(var s=0;s<l.size();s++){var u=l.getStructureAt(s);var g=t.importComponent(e.OlapComponentType.GENERIC_SORTING,u,null,a,o);if(e.notNull(g)){p.add(g)}}}return a};e.QInARepoSort.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=n.putNewList("Elements");var l=o.getSortingOperations();for(var p=0;p<l.size();p++){var s=l.get(p);var u=s.supportsDimension()&&s.getDimension()!==null&&s.getDimension().isUniversalDisplayHierarchyDimension();if(!u){a.add(t.exportComponent(null,s,null,i))}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoSortOperation=function(){};e.QInARepoSortOperation.prototype=new e.QInARepository;e.QInARepoSortOperation.prototype._ff_c="QInARepoSortOperation";e.QInARepoSortOperation.prototype.getComponentType=function(){return e.OlapComponentType.GENERIC_SORTING};e.QInARepoSortOperation.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=null;if(a.getOlapComponentType()===e.OlapComponentType.COMPONENT_LIST){a=a.getParent()}if(a.getOlapComponentType()===e.OlapComponentType.SORT_MANAGER){l=a}var p=null;if(e.notNull(l)){var s=o.getQueryModel();var u=s.getModelCapabilities();var g=r.getStringByKey("SortType");var y=e.QInAConverter.lookupSortType(g);if(y===e.SortType.FIELD){p=this.importFieldSorting(r,l,s)}else if(y===e.SortType.MEASURE){p=this.importMeasureSorting(r,l,s)}else if(y===e.SortType.DATA_CELL_VALUE||y===e.SortType.COMPLEX&&(u.supportsComplexSorting()||u.supportsDataCellSorting())){p=this.importPathSorting(t,r,o,l,s,y)}else{p=this.importDimensionSorting(r,l,s,y)}if(e.notNull(p)){this.importGenericSorting(t,r,p,s)}}return p};e.QInARepoSortOperation.prototype.importGenericSorting=function(t,r,n,i){var o=r.getStringByKey("Direction");if(e.notNull(o)){var a=e.QInAConverter.lookupSortDirection2(o);if(e.notNull(a)){n.setDirection(a)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("PreserveGrouping")){if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){n.setPreserveGrouping(r.getBooleanByKeyExt("PreserveGrouping",false))}}if(n.supportsDimension()){var l=r.getStringByKey("Dimension");if(e.isNull(l)){n.setDimension(null)}else{n.setDimension(i.getDimensionByNameFromExistingMetadata(l))}}if(n.getModelCapabilities().supportsLocaleSorting()){var p=r.getStructureByKey("Collator");if(e.notNull(p)){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.containsKey("CaseSensitive")){n.setIsCaseSensitive(p.getBooleanByKeyExt("CaseSensitive",false))}n.setLocale(p.getStringByKeyExt("Locale",null))}}if(i.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&!r.getBooleanByKeyExt("ExportInPersistedInA",false)){n.setCreatedFromMetadata(true)}};e.QInARepoSortOperation.prototype.importDimensionSorting=function(t,r,n,i){var o=t.getStringByKey("Dimension");var a=n.getModelCapabilities();if(e.XStringUtils.isNotNullAndNotEmpty(o)){var l=n.getDimensionByNameFromExistingMetadata(o);if(a.supportsDimensionSorting(l,i)){var p=r.newDimensionSorting(l);if(e.isNull(p)){return null}if(i===e.SortType.FILTER){p.setSortByFilter()}else if(i===e.SortType.MEMBER_KEY){p.setSortByKey();p.setCustomSort(this.getCustomSortOrder(t));p.setCustomSortPosition(this.getCustomSortPosition(t))}else if(i===e.SortType.MEMBER_TEXT){p.setSortByText()}else if(i===e.SortType.HIERARCHY){p.setSortByHierarchy()}return p}}return null};e.QInARepoSortOperation.prototype.importPathSorting=function(t,r,n,i,o,a){var l=r.getListByKey("SortTuple");if(l.isEmpty()){return null}var p=e.XList.create();for(var s=0;s<l.size();s++){var u=l.getStructureAt(s);var g=u.getStringByKey("FieldName");var y=u.getStringByKey("Value");if(e.isNull(g)||e.isNull(y)){return null}var m=o.getFieldByName(g);if(e.isNull(m)){return null}var c=u.getStringByKey("Hierarchy");var A=e.QSelectValue._createDimensionElement2(n,m,c,y);e.QInAImportUtil.importComponentTagging(t,u,A);p.add(A)}var S=null;if(a===e.SortType.DATA_CELL_VALUE){S=i.newDataCellSorting(p)}else{S=i.newComplexSorting(p)}var d=r.getBooleanByKeyExt("SortOperationUsedInRanking",false);if(d){S.setUsedInRanking(true)}return S};e.QInARepoSortOperation.prototype.importMeasureSorting=function(t,r,n){var i=null;var o=n.getModelCapabilities();var a=t.getStringByKey("MeasureName");if(e.notNull(a)){var l=n.getMeasureDimension();var p=l.getStructureMember(a);if(e.isNull(p)){p=n.getOlapEnv().getClientQueryObjectManager().getStructuredMember(a,n.getQueryManager().getClientQueryObjectStorageName(),true)}if(e.notNull(p)&&o.supportsMeasureSorting()){i=r.newMeasureSorting(p)}var s=t.getStringByKey("StructureName");var u=n.getNonMeasureDimension();if(e.notNull(s)&&e.notNull(u)&&e.notNull(i)){i.setStructure(u.getStructureMember(s))}}return i};e.QInARepoSortOperation.prototype.importFieldSorting=function(t,r,n){var i=null;var o=t.getStringByKey("FieldName");if(e.notNull(o)){var a=n.getFieldByName(o);var l=n.getModelCapabilities();if(e.notNull(a)&&l.supportsFieldSorting(a)){i=r.newFieldSorting(a);i.setCustomSort(this.getCustomSortOrder(t));i.setCustomSortPosition(this.getCustomSortPosition(t))}}return i};e.QInARepoSortOperation.prototype.getCustomSortPosition=function(t){var r=t.getStringByKey("CustomSortPosition");if(e.notNull(r)){return e.CustomSortPosition.lookup(r)}return null};e.QInARepoSortOperation.prototype.getCustomSortOrder=function(t){var r=t.getListByKey("CustomSort");if(e.notNull(r)&&r.hasElements()){return e.PrUtils.asListOfString(r)}return null};e.QInARepoSortOperation.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getSortingType();this.exportGenericSorting(t,n,o,a);if(a===e.SortType.FIELD){this.exportFieldSorting(n,o)}else if(a===e.SortType.MEASURE){this.exportMeasureSorting(n,o)}else if(a===e.SortType.DATA_CELL_VALUE||a===e.SortType.COMPLEX){this.exportPathSorting(t,n,o)}else if(a===e.SortType.MEMBER_KEY){var l=o;this.exportCustomSortDetails(l.getCustomSort(),l.getCustomSortPosition(),n)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoSortOperation.prototype.exportFieldSorting=function(e,t){var r=t;e.putString("FieldName",r.getField().getName());this.exportCustomSortDetails(r.getCustomSort(),r.getCustomSortPosition(),e)};e.QInARepoSortOperation.prototype.exportCustomSortDetails=function(t,r,n){if(e.XCollectionUtils.hasElements(t)){var i=n.putNewList("CustomSort");var o=t.size();for(var a=0;a<o;a++){i.addString(t.get(a))}}e.QInARepoUtils.setNameIfNotNull(n,"CustomSortPosition",r)};e.QInARepoSortOperation.prototype.exportGenericSorting=function(t,r,n,i){var o=e.QInAConverter.lookupSortTypeInA(i);r.putString("SortType",o);var a=n.getDirection();if(a!==e.XSortDirection.DEFAULT_VALUE){r.putString("Direction",e.QInAConverter.lookupSortDirectionInA2(a))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QSortProperties.QY_PRESERVE_GROUPING)){if(n.supportsPreserveGrouping()&&n.supportsBreakGrouping()){r.putBoolean("PreserveGrouping",n.isPreserveGroupingEnabled())}}if(n.getModelCapabilities().supportsLocaleSorting()){var l=e.PrFactory.createStructure();if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QSortProperties.QY_CASE_SENSITIVE)){l.putBoolean("CaseSensitive",n.isCaseSensitive())}l.putString("Locale",n.getLocale());r.put("Collator",l)}if(n.supportsDimension()){e.QInARepoUtils.setNameIfNotNull(r,"Dimension",n.getDimension())}if(n.getModelCapabilities().supportsPersistedInA()&&t.getOriginalMode()===e.QModelFormat.INA_CLONE&&(!n.isCreatedFromMetadata()||n.getModCounter()>0)){r.putBoolean("ExportInPersistedInA",true)}};e.QInARepoSortOperation.prototype.exportPathSorting=function(t,r,n){var i=n;var o=r.putNewList("SortTuple");var a=i.getElementPath();var l=a.size();for(var p=0;p<l;p++){var s=a.get(p);var u=o.addNewStructure();u.putString("FieldName",s.getSelectField().getName());u.putString("Value",s.getSelectValue());var g=s.getSelectHierarchyName();if(e.XStringUtils.isNotNullAndNotEmpty(g)){u.putString("Hierarchy",g)}e.QInARepoUtils.extendStructureWithTagging(t,s,u)}if(n.usedInRanking()){r.putBoolean("SortOperationUsedInRanking",true)}};e.QInARepoSortOperation.prototype.exportMeasureSorting=function(t,r){var n=r;var i=n.getMeasure().getName();t.putString("MeasureName",i);e.QInARepoUtils.setNameIfNotNull(t,"StructureName",n.getStructure())};e.QInARepoTotals=function(){};e.QInARepoTotals.prototype=new e.QInARepository;e.QInARepoTotals.prototype._ff_c="QInARepoTotals";e.QInARepoTotals.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotals.prototype.getTagName=function(){return"ResultStructureRepo"};e.QInARepoTotals.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(a.supportsTotals()){if(e.notNull(r)){var l=null;if(a.supportsResultAlignment()){var p=r.getStringByKey("ResultAlignment");if(e.XString.isEqual("Default",p)){a.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false)}else{l=e.QInAConverter.lookupAlignment(p);a.setResultAlignmentBase(l,false)}}if(l===e.ResultAlignment.STRUCTURE){var s=r.getListByKey("ResultStructure");if(e.notNull(s)){var u=a.getAdvancedResultStructure();u.clear();for(var g=0;g<s.size();g++){var y=s.getStructureAt(g);var m=y.getStringByKey("Result");var c=e.QInAConverter.lookupResultStructureElement(m);var A=e.QInAConverter.lookupResultSetVisibility(y.getStringByKey("Visibility"));u.addWithVisibility(c,A)}}}else{if(a.supportsResultVisibility()){var S=r.getStringByKey("Visibility");if(e.XString.isEqual("Default",S)){a.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false)}else{var d=r.getListByKey("VisibilitySettings");if(e.isNull(d)){var I=e.QInAConverter.lookupResultSetVisibility(S);a.setResultVisibility(I)}else{a.clearResultVisibilitySettings();for(var f=0;f<d.size();f++){var N=d.getStructureAt(f);var v=e.QInAConverter.lookupAlignment(N.getStringByKey("ResultAlignment"));var T=e.QInAConverter.lookupResultStructureElement(N.getStringByKey("Result"));var R=e.QInAConverter.lookupResultSetVisibility(N.getStringByKey("Visibility"));a.setResultVisibilityByElementAndAlignment(v,T,R)}}}}}}}return a};e.QInARepoTotals.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(!o.supportsTotals()){return null}var a=null;if(o.supportsResultAlignment()){if(o.isTotalsAlignmentOnDefault()){n.putString("ResultAlignment","Default")}else{a=o.getResultAlignment();n.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(a))}}if(a===e.ResultAlignment.STRUCTURE){var l=n.putNewList("ResultStructure");var p=o.getTotalsStructure();if(e.notNull(p)){for(var s=0;s<p.size();s++){var u=p.get(s);var g=l.addNewStructure();var y=u.getResultStructureElement();g.putString("Result",e.QInAConverter.lookupResultStructureElementInA(y));var m=u.getResultVisibility();g.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(m))}}}else if(o.supportsResultVisibility()){if(o.isTotalsVisibilityOnDefault()){n.putString("Visibility","Default")}else{var c=e.QInAConverter.lookupResultSetVisibilityInA(o.getResultVisibility());n.putString("Visibility",c);var A=o.getResultVisibilitySettings();if(e.notNull(A)){var S=n.putNewList("VisibilitySettings");while(A.hasNext()){var d=A.next();var I=S.addNewStructure();I.putString("ResultAlignment",e.QInAConverter.lookupAlignmentInA(d.getAlignment()));I.putString("Result",e.QInAConverter.lookupResultStructureElementInA(d.getElement()));I.putString("Visibility",e.QInAConverter.lookupResultSetVisibilityInA(d.getVisibility()))}e.XObjectExt.release(A)}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoTranslationsManager=function(){};e.QInARepoTranslationsManager.prototype=new e.QInARepository;e.QInARepoTranslationsManager.prototype._ff_c="QInARepoTranslationsManager";e.QInARepoTranslationsManager.prototype.getComponentType=function(){return e.OlapComponentType.MEASURE_TRANSLATIONS};e.QInARepoTranslationsManager.prototype.getTagName=function(){return"Translations"};e.QInARepoTranslationsManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(r)&&r.containsKey("CurrencyTranslations")){var l=r.getListByKey("CurrencyTranslations");if(e.notNull(l)){if(e.notNull(a)&&e.XCollectionUtils.hasElements(l)){var p=l.size();for(var s=0;s<p;s++){var u=l.getStructureAt(s);var g=u.getStringByKey("Name");var y=u.getStringByKey("Description");var m=a.getMeasureCurrencyTranslation(g);if(e.isNull(m)){m=a.addNewMeasureCurrencyTranslationBase(g,y)}t.importCurrencyTranslationElement(u,m,o)}}}}return a};e.QInARepoTranslationsManager.prototype.exportComponentWithStructure=function(t,r,n,i){return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoUniversalDisplayHierarchies=function(){};e.QInARepoUniversalDisplayHierarchies.prototype=new e.QInARepository;e.QInARepoUniversalDisplayHierarchies.prototype._ff_c="QInARepoUniversalDisplayHierarchies";e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies=function(t){var r=t.getQueryModel();var n=t.getHierarchies();var i=e.XList.create();var o=n.size();for(var a=0;a<o;a++){var l=n.get(a);if(l.getHierarchyDedicatedAxis()!==null){i.add(l.getHierarchyDedicatedAxis().getType());continue}var p=e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList(l.getDimensionNames(),r);if(e.notNull(p)&&!i.contains(p.getType())){l.setAxis(p);i.add(p.getType())}}for(var s=0;s<o;s++){var u=n.get(s);if(u.getHierarchyDedicatedAxis()===null){u.setAxis(i.contains(e.AxisType.ROWS)?r.getColumnsAxis():r.getRowsAxis())}}};e.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList=function(t,r){if(e.notNull(t)){for(var n=0;n<t.size();n++){var i=r.getDimensionByNameFromExistingMetadata(t.get(n));if(e.notNull(i)){var o=i.getAxisType();if(o===e.AxisType.ROWS||o===e.AxisType.COLUMNS){return i.getAxis()}}}}return null};e.QInARepoUniversalDisplayHierarchies.importHierarchy=function(t,r,n){var i=null;var o=0;var a=e.Alignment.DEFAULT_VALUE;var l=false;var p=n.getStringByKey("Name");var s=r.getByName(p);if(e.notNull(s)){l=s.isActive();a=s.getAlignment();o=s.getInitialDrillLevel();i=s.getDimensionNames()}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("Active")){l=n.getBooleanByKeyExt("Active",false)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("LowerLevelNodeAlignment")){a=e.QInAConverter.lookupLowerLevelNodeAlignment(n.getStringByKey("LowerLevelNodeAlignment"))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("InitialDrillLevel")){o=n.getIntegerByKey("InitialDrillLevel")}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.containsKey("DimensionNames")){var u=n.getListByKey("DimensionNames");i=e.PrUtils.asListOfString(u)}var g=n.getBooleanByKeyExt("CustomDimensions",false);if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||e.notNull(s)){e.XObjectExt.assertNotNull(i);r.addHierarchy(p,i,o,a,l,null,g)}};e.QInARepoUniversalDisplayHierarchies.prototype.getComponentType=function(){return e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES};e.QInARepoUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;if(e.notNull(r)){var l=r.getByKey("UniversalDisplayHierarchies");if(e.notNull(l)&&l.isList()){var p=l;var s=p.size();for(var u=0;u<s;u++){e.QInARepoUniversalDisplayHierarchies.importHierarchy(t,a,p.getStructureAt(u))}}}e.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies(a);return a};e.QInARepoUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;if(e.notNull(o)){o.updateIncludedDimensions();var a=o.getChildrenIterator();if(a.hasNext()){var l=n.putNewList("UniversalDisplayHierarchies");while(a.hasNext()){var p=a.next();var s=t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||p.getModCounter()>0;if(s){this.exportHierarchy(t,l,p)}}}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoUniversalDisplayHierarchies.prototype.exportHierarchy=function(t,r,n){var i=true;if(n.isActive()&&!n.isDimensionListValid()){i=false;t.addError(e.ErrorCodes.INVALID_STATE,e.XStringUtils.concatenate3("Dimensions for UDH '",n.getName(),"' must be placed next to each other on the axis"))}var o=r.addNewStructure();o.putString("Name",n.getName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_INITIAL_DRILL_LEVEL)){o.putInteger("InitialDrillLevel",n.getInitialDrillLevel())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){o.putString("LowerLevelNodeAlignment",n.getAlignment().getName())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_ACTIVE)){o.putBoolean("Active",n.isActive()&&i)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||n.hasPropertyChanged(e.QUniversalDisplayHierarchyProperties.QY_DIMENSION_NAMES)){o.putNewList("DimensionNames").addAllStrings(n.getDimensionNames())}if(n.hasCustomDimensions()){o.putBoolean("CustomDimensions",true)}};e.QInARepoVarDimMember=function(){};e.QInARepoVarDimMember.prototype=new e.QInARepository;e.QInARepoVarDimMember.prototype._ff_c="QInARepoVarDimMember";e.QInARepoVarDimMember.prototype.getComponentType=function(){return e.VariableType.DIMENSION_MEMBER_VARIABLE};e.QInARepoVarDimMember.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=a.isEnforcedDynamicValue()&&a.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(!l){var p=r.getStructureByKey("Selection");if(e.isNull(p)){a.setMemberFilter(null)}else{var s=t.importComponent(null,p,null,a,o);a.setMemberFilter(s)}}return a};e.QInARepoVarDimMember.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=o.isEnforcedDynamicValue()&&o.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(o.hasMemberFilter()&&!a){var l=o.getMemberFilter();var p=t.exportComponent(null,l,null,i);if(e.notNull(p)){n.put("Selection",p)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoVarOptionList=function(){};e.QInARepoVarOptionList.prototype=new e.QInARepository;e.QInARepoVarOptionList.prototype._ff_c="QInARepoVarOptionList";e.QInARepoVarOptionList.prototype.getComponentType=function(){return e.VariableType.OPTION_LIST_VARIABLE};e.QInARepoVarOptionList.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=r.getListByKey("OptionValues");if(e.notNull(l)){var p;if(a.supportsMultipleValues()){a.clear();var s=l.size();for(var u=0;u<s;u++){p=l.getStringAt(u);a.addString(p)}}else if(l.size()===1){p=l.getStringAt(0);a.setString(p)}}return a};e.QInARepoVarOptionList.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=n.putNewList("OptionValues");if(o.supportsMultipleValues()){var l=o.getValues();var p=l.size();for(var s=0;s<p;s++){var u=l.get(s);a.addString(u.getString())}}else{var g=o.getCurrentOption();if(e.notNull(g)){a.addString(g.getName())}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoVarSimpleType=function(){};e.QInARepoVarSimpleType.prototype=new e.QInARepository;e.QInARepoVarSimpleType.prototype._ff_c="QInARepoVarSimpleType";e.QInARepoVarSimpleType.prototype.getComponentType=function(){return e.VariableType.SIMPLE_TYPE_VARIABLE};e.QInARepoVarSimpleType.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;a.clear();var l=a.getValueType();if(l.isNumber()){this.importNumericValues(t,r,a,l)}else if(l.isString()){this.importStringValues(r,a)}else if(l===e.XValueType.DATE){this.importDateValues(t,r,a)}else if(l===e.XValueType.TIME){this.importTimeValues(t,r,a)}else if(l===e.XValueType.DATE_TIME){this.importDateTimeValues(t,r,a)}else if(l===e.XValueType.BOOLEAN){this.importBooleanValues(r,a)}return a};e.QInARepoVarSimpleType.prototype.getFirstValueAsString=function(t){var r=t.get(0);if(e.notNull(r)&&r.isString()){return r.getString()}return null};e.QInARepoVarSimpleType.prototype.importDateTimeValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addDateTime(e.XDateTime.createDateTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleType.prototype.importTimeValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addTime(e.XTime.createTimeFromStringWithFlag(l,t.capabilities.supportsSapDate()))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setTime(e.XTime.createTimeFromStringWithFlag(p,t.capabilities.supportsSapDate()))}}}};e.QInARepoVarSimpleType.prototype.importDateValues=function(t,r,n){var i=r.getListByKey("SimpleStringValues");if(e.notNull(i)){var o=i.size();if(n.supportsMultipleValues()){for(var a=0;a<o;a++){var l=i.getStringAt(a);if(e.XStringUtils.isNotNullAndNotEmpty(l)){n.addDate(e.QInARepoUtils.createDate(l))}}}else if(o===1){var p=this.getFirstValueAsString(i);if(e.XStringUtils.isNotNullAndNotEmpty(p)){n.setDate(e.QInARepoUtils.createDate(p))}}}};e.QInARepoVarSimpleType.prototype.importStringValues=function(t,r){var n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){var i=n.size();if(r.supportsMultipleValues()){for(var o=0;o<i;o++){r.addString(n.getStringAt(o))}}else if(i===1){var a=n.get(0);if(e.notNull(a)&&a.isString()){r.setString(a.getString())}}}};e.QInARepoVarSimpleType.prototype.importBooleanValues=function(t,r){var n=t.getListByKey("SimpleStringValues");if(e.notNull(n)){var i=n.size();if(r.supportsMultipleValues()){for(var o=0;o<i;o++){r.addBoolean(n.getBooleanAt(o))}}else if(i===1){var a=n.get(0);if(e.notNull(a)&&a.isBoolean()){r.setBoolean(a.asBoolean().getBoolean())}}}};e.QInARepoVarSimpleType.prototype.importNumericString=function(t,r,n){if(r===e.XValueType.INTEGER){t.addInteger(e.XInteger.convertFromString(n))}else if(r===e.XValueType.DOUBLE||r===e.XValueType.DECIMAL_FLOAT){t.addDouble(e.XDouble.convertFromString(n))}else if(r===e.XValueType.LONG){t.addLong(e.XLong.convertFromString(n))}};e.QInARepoVarSimpleType.prototype.addIntegerValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XInteger.convertToString(n))}else{r.addInteger(n)}};e.QInARepoVarSimpleType.prototype.addLongValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XLong.convertToString(n))}else{r.addLong(n)}};e.QInARepoVarSimpleType.prototype.addDoubleValue=function(t,r,n){if(t.capabilities.supportsNumberAsString()&&!e.QInAExportUtil.isNumberSafe(n)){r.addString(e.XDouble.convertToString(n))}else{r.addDouble(n)}};e.QInARepoVarSimpleType.prototype.importNumericValues=function(t,r,n,i){var o=r.getListByKey("SimpleNumericValues");if(e.notNull(o)){var a=o.size();if(n.supportsMultipleValues()){for(var l=0;l<a;l++){var p=o.get(l);if(t.capabilities.supportsNumberAsString()&&e.notNull(p)&&p.getType()===e.PrElementType.STRING){this.importNumericString(n,i,o.getStringAt(l));continue}if(i===e.XValueType.INTEGER){var s=o.getIntegerAt(l);n.addInteger(s)}else if(i===e.XValueType.DOUBLE||i===e.XValueType.DECIMAL_FLOAT){var u=o.getDoubleAt(l);n.addDouble(u)}else if(i===e.XValueType.LONG){var g=o.getLongAt(l);n.addLong(g)}}}else if(a===1){var y=o.get(0);if(e.notNull(y)&&y.isNumeric()){if(i===e.XValueType.INTEGER){n.setInteger(o.getIntegerAt(0))}else if(i===e.XValueType.DOUBLE){n.setDouble(o.getDoubleAt(0))}else if(i===e.XValueType.DECIMAL_FLOAT){n.setDecFloat(e.XDecFloatByDouble.create(o.getDoubleAt(0)))}else if(i===e.XValueType.LONG){n.setLong(o.getLongAt(0))}}}}};e.QInARepoVarSimpleType.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=o.getValueType();var l;if(a===e.XValueType.STRING||a===e.XValueType.DATE||a===e.XValueType.TIME||a===e.XValueType.DATE_TIME||a===e.XValueType.BOOLEAN||a.isSpatial()){l=n.putNewList("SimpleStringValues")}else if(a===e.XValueType.DOUBLE||a===e.XValueType.DECIMAL_FLOAT||a===e.XValueType.LONG||a===e.XValueType.INTEGER){l=n.putNewList("SimpleNumericValues")}else{t.addError(e.ErrorCodes.INVALID_DATATYPE,e.XStringUtils.concatenate3("SimpleTypeVariable '",o.getName(),"' not exported"));return null}if(o.supportsMultipleValues()){this.exportMultipleValues(t,o,a,l)}else{this.exportSingleValue(t,o,a,l)}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoVarSimpleType.prototype.exportSingleValue=function(t,r,n,i){var o=!r.hasValue()&&(t.getMode()===e.QModelFormat.INA_REPOSITORY||r.getQueryModel().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA));if(n===e.XValueType.INTEGER){if(o){i.addNull()}else{this.addIntegerValue(t,i,r.getInteger())}}else if(n===e.XValueType.LONG){if(o){i.addNull()}else{this.addLongValue(t,i,r.getLong())}}else if(n===e.XValueType.BOOLEAN){if(o){i.addNull()}else{i.addBoolean(r.getBoolean())}}else if(n===e.XValueType.DOUBLE||n===e.XValueType.DECIMAL_FLOAT){if(o){i.addNull()}else{this.addDoubleValue(t,i,r.getDouble())}}else{if(r.hasValue()){if(n===e.XValueType.STRING||n.isSpatial()){i.addString(r.getString())}else if(n===e.XValueType.DATE){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getDate()))}else if(n===e.XValueType.TIME){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getTime()))}else if(n===e.XValueType.DATE_TIME){i.addString(e.QInAExportUtil.dateTimeToString(t,r.getDateTime()))}}}};e.QInARepoVarSimpleType.prototype.exportMultipleValues=function(t,r,n,i){var o=r.getValues();var a=o.size();for(var l=0;l<a;l++){if(n===e.XValueType.INTEGER){var p=o.get(l);this.addIntegerValue(t,i,p.getInteger())}else if(n===e.XValueType.LONG){var s=o.get(l);this.addLongValue(t,i,s.getLong())}else if(n===e.XValueType.DOUBLE){var u=o.get(l);this.addDoubleValue(t,i,u.getDouble())}else if(n===e.XValueType.DECIMAL_FLOAT){var g=o.get(l);this.addDoubleValue(t,i,g.getDouble())}else if(n===e.XValueType.STRING){var y=o.get(l);i.addString(y.getString())}else if(n===e.XValueType.DATE||n===e.XValueType.TIME||n===e.XValueType.DATE_TIME){var m=o.get(l);i.addString(e.QInAExportUtil.dateTimeToString(t,m))}else if(n===e.XValueType.BOOLEAN){var c=o.get(l);i.addString(e.XBoolean.convertToString(c.getBoolean()))}else if(n.isSpatial()){var A=o.get(l);i.addString(A.toWKT())}}};e.QInaRepoCustomHierarchyDefinition=function(){};e.QInaRepoCustomHierarchyDefinition.prototype=new e.QInARepository;e.QInaRepoCustomHierarchyDefinition.prototype._ff_c="QInaRepoCustomHierarchyDefinition";e.QInaRepoCustomHierarchyDefinition.prototype.getComponentType=function(){return e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION};e.QInaRepoCustomHierarchyDefinition.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;var l=e.PrUtils.getListProperty(r,"Dimensions");var p=e.PrUtils.getStructureElement(l,0);if(e.notNull(p)){var s=p.getStringByKey("System");var u=p.getStringByKey("DataSource");var g=p.getStringByKey("Name");var y=p.getStructureByKey("Hierarchy");if(e.notNull(y)&&e.XStringUtils.isNotNullAndNotEmpty(s)&&e.XStringUtils.isNotNullAndNotEmpty(g)){var m=true;var c=t.getApplication();if(e.notNull(c)){var A=c.getSystemLandscape().getSystemDescription(s);m=e.isNull(A)?true:A.getSystemType().isTypeOf(e.SystemType.ABAP)}a=e.QCustomHierarchyDefinition.createByData(s,u,g,y.getStringByKey("Description"),m);a.setName(y.getStringByKey("Name"));this.addHierarchyNodesFromStructure(a,y.getStructureByKey("Nodes"))}}return a};e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(t,r){var n=e.PrUtils.getListProperty(r,"NodeId");var i=e.PrUtils.getListProperty(r,"ParentId");var o=e.PrUtils.getListProperty(r,"NodeName");var a=e.PrUtils.getListProperty(r,"NodeType");var l=e.PrUtils.getListSize(n,0);if(e.PrUtils.isListEmpty(n)||e.PrUtils.isListEmpty(i)||e.PrUtils.isListEmpty(o)||e.PrUtils.isListEmpty(a)||i.size()!==l||o.size()!==l||a.size()!==l){return}var p=e.XSimpleMap.create();for(var s=0;s<l;s++){var u=n.getIntegerAt(s);var g=o.getStringAt(s);var y=a.getStringAt(s);var m=i.getIntegerAt(s);var c=m===-1?t:p.getByKey(e.XIntegerValue.create(m));if(e.notNull(c)){if(e.XString.isEqual(y,"1HIER_NODE_SIMPLE")){p.put(e.XIntegerValue.create(u),c.addTextNode(g))}else{c.addMemberNode(g)}}}e.XObjectExt.release(p)};e.QInaRepoCustomHierarchyDefinition.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=e.PrFactory.createStructure();a.putString("Name",o.getDimensionName());a.putString("System",o.getSystemName());a.putString("DataSource",o.getDataSourceName());var l=e.PrFactory.createStructure();this.exportCustomHierarchy(o,l);a.put("Hierarchy",l);var p=e.PrFactory.createStructure();var s=p.putNewList("Dimensions");s.add(a);return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,p,i)};e.QInaRepoCustomHierarchyDefinition.prototype.exportCustomHierarchy=function(t,r){var n="";var i=t.getName();var o=t.getDescription();r.putString("Name",e.XStringUtils.isNotNullAndNotEmpty(i)?i:n);r.putString("Version",n);r.putString("DueDate",n);r.putString("Description",e.notNull(o)?o:n);r.putBoolean("IsTransient",true);r.putBoolean("NoRestNodes",true);r.put("Nodes",this.getHierarchyNodesAsStructure(t))};e.QInaRepoCustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(t){var r=e.PrFactory.createStructure();r.putNewList("NodeId");r.putNewList("NodeName");r.putNewList("Description");r.putNewList("NodeType");r.putNewList("ParentId");var n=t.getChildNodes();var i=n.size();for(var o=0;o<i;o++){this.addHierarchyElementToStructure(n.get(o),r,-1,t.getDimensionName())}return r};e.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,t,r,n){var i=t.getListByKey("NodeId");var o=i.size();i.addInteger(o);t.getListByKey("NodeName").addString(e.getName());t.getListByKey("ParentId").addInteger(r);if(e.isMemberElement()){t.getListByKey("Description").addString("");t.getListByKey("NodeType").addString(e.isNode()?n:"")}else{t.getListByKey("Description").addString(e.getName());t.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE")}if(e.isNode()){var a=e.getChildNodes();var l=a.size();for(var p=0;p<l;p++){this.addHierarchyElementToStructure(a.get(p),t,o,n)}}};e.QInARepoTotalsLegacy=function(){};e.QInARepoTotalsLegacy.prototype=new e.QInARepository;e.QInARepoTotalsLegacy.prototype._ff_c="QInARepoTotalsLegacy";e.QInARepoTotalsLegacy.prototype.getComponentType=function(){return e.OlapComponentType.TOTALS};e.QInARepoTotalsLegacy.prototype.getTagName=function(){return"ResultStructureBag"};e.QInARepoTotalsLegacy.prototype.importComponentWithStructure=function(t,r,n,i,o){if(t.mode!==e.QModelFormat.INA_DATA_REINIT){var a=n;if(a.supportsResultVisibility()){var l=this.getResultStructure(r);var p=this.importResultAlignment(a,l);a.restoreTotalsVisibility(e.RestoreAction.DEFAULT_VALUE,false);var s=l.getListByKey("ResultStructure");if(e.notNull(s)){var u;if(a.supportsAdvancedResultStructure()&&p===e.ResultAlignment.STRUCTURE){u=a.getAdvancedResultStructure();u.clear();if(e.isNull(p)){a.setResultAlignmentBase(e.ResultAlignment.STRUCTURE,true)}}else{u=null}var g=s.size();for(var y=0;y<g;y++){var m=s.getStructureAt(y);this.importResultStructureItem(m,a,u)}}}}return null};e.QInARepoTotalsLegacy.prototype.importResultAlignment=function(t,r){if(t.supportsResultAlignment()){t.restoreTotalsAlignment(e.RestoreAction.DEFAULT_VALUE,false);var n=r.getStringByKey("ResultAlignment");if(e.XStringUtils.isNullOrEmpty(n)){return null}var i=e.QInAConverter.lookupAlignment(n);t.setResultAlignmentBase(i,false);return i}return null};e.QInARepoTotalsLegacy.prototype.getResultStructure=function(t){var r=t.getStructureByKey("ResultStructureBag");if(e.isNull(r)){r=t.getStructureByKey("DefaultResultStructure");if(e.isNull(r)){return t}}return r};e.QInARepoTotalsLegacy.prototype.importResultStructureItem=function(t,r,n){var i=t.getStringByKey("Result");var o;if(e.XString.isEqual(i,"Members")){o=e.ResultStructureElement.MEMBERS}else if(e.XString.isEqual(i,"Total")){o=e.ResultStructureElement.TOTAL}else if(e.XString.isEqual(i,"TotalIncludedMembers")){o=e.ResultStructureElement.TOTAL_INCLUDED_MEMBERS}else if(e.XString.isEqual(i,"TotalRemainingMembers")){o=e.ResultStructureElement.TOTAL_REMAINING_MEMBERS}else{return}var a=t.getStringByKey("Visibility");var l=e.QInAConverter.lookupResultSetVisibility(a);if(e.isNull(n)){r.setResultVisibilityByElement(o,l)}else{n.addWithVisibility(o,l)}};e.QInARepoTotalsLegacy.prototype.exportComponentWithStructure=e.noSupport;e.QInARepoChartDefinition=function(){};e.QInARepoChartDefinition.prototype=new e.QInARepository;e.QInARepoChartDefinition.prototype._ff_c="QInARepoChartDefinition";e.QInARepoChartDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_CHART_DEFINITION};e.QInARepoChartDefinition.prototype.getTagName=function(){return"ChartDefinition"};e.QInARepoChartDefinition.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)&&e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_CHART_DEFINITION){var a=n;a.setTitle(r.getStringByKey("Title"))}return n};e.QInARepoChartDefinition.prototype.exportComponentWithStructure=function(t,r,n,i){if(e.notNull(r)&&e.notNull(n)){var o=r;n.putStringNotNullAndNotEmpty("Title",o.getTitle());var a=o.getKeyFigureDimension();if(e.notNull(a)){n.putStringNotNullAndNotEmpty("KeyFigureDimension",a.getName())}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoTableDefinition=function(){};e.QInARepoTableDefinition.prototype=new e.QInARepository;e.QInARepoTableDefinition.prototype._ff_c="QInARepoTableDefinition";e.QInARepoTableDefinition.importPathAndAxis=function(t,r,n){r.setAxisType(e.AxisType.lookup(t.getStringByKey("AxisType")));var i=e.XList.create();var o=t.getListByKey("ReferencePath");for(var a=0;a<o.size();a++){var l=o.getStructureAt(a);i.add(e.QFactory.createDrillPathElement(n,l.getStringByKey("MemberName"),n.getDimensionByName(l.getStringByKey("DimensionName"))))}r.setPathOnAxis(i)};e.QInARepoTableDefinition.exportPathAndAxis=function(e,t){e.putString("Name",t.getName());e.putString("Text",t.getText());if(t.getAxisType()!==null){e.putString("AxisType",t.getAxisType().getName())}var r=e.putNewList("ReferencePath");var n=t.getPathOnAxis();for(var i=0;i<n.size();i++){var o=n.get(i);var a=r.addNewStructure();a.putString("DimensionName",o.getDimension().getName());a.putString("MemberName",o.getName())}};e.QInARepoTableDefinition.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION};e.QInARepoTableDefinition.prototype.getTagName=function(){return"TableDefinition"};e.QInARepoTableDefinition.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(n)&&e.notNull(r)&&n.getComponentType()===e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION){var a=n;var l;if(r.containsKey("DimensionColorPalette")){a.clearDimensionColorPalette();var p=r.getListByKey("DimensionColorPalette");for(l=0;l<p.size();l++){a.addDimensionColor(p.getStringAt(l))}}var s=a.getQueryModel();a.setDimensionToColorate(r.getStringByKey("DimensionToColorate"));var u=r.getListByKey("Styles");if(e.notNull(u)){a.clearFormattingStyles()}if(e.XCollectionUtils.hasElements(u)){for(l=0;l<u.size();l++){var g=u.getStructureAt(l);var y=g.getStringByKey("Name");var m=g.getStringByKey("Text");var c=a.addNewFormattingStyle(y,m);c.setAlertColor(g.getStringByKey("AlertColor"));c.setAlertSymbol(e.AlertSymbol.lookup(g.getStringByKey("AlertSymbol")));c.setAlertColor(g.getStringByKey("AlertColor"));this.importStyledLine(c.getStyledLineLeft(),g.getStructureByKey("LeftLine"));this.importStyledLine(c.getStyledLineRight(),g.getStructureByKey("RightLine"));this.importStyledLine(c.getStyledLineTop(),g.getStructureByKey("TopLine"));this.importStyledLine(c.getStyledLineBottom(),g.getStructureByKey("BottomLine"));c.setFillColor(g.getStringByKey("FillColor"));if(g.containsKey("FontBold")){c.setFontBold(g.getBooleanByKey("FontBold"))}if(g.containsKey("FontItalic")){c.setFontItalic(g.getBooleanByKey("FontItalic"))}if(g.containsKey("FontUnderline")){c.setFontUnderline(g.getBooleanByKey("FontUnderline"))}if(g.containsKey("FontStrikeThrough")){c.setFontStrikeThrough(g.getBooleanByKey("FontStrikeThrough"))}c.setFontSize(g.getDoubleByKey("FontSize"));c.setFontFamily(g.getStringByKey("FontFamily"));c.setFontColor(g.getStringByKey("FontColor"));c.setCellChartBarColor(g.getStringByKey("CellChartBarColor"));c.setCellChartLineColor(g.getStringByKey("CellChartLineColor"));c.setVerticalAlignment(e.CellAlignmentVertical.lookup(g.getStringByKey("VerticalAlignment")));c.setHorizontalAlignment(e.CellAlignmentHorizontal.lookup(g.getStringByKey("HorizontalAlignment")));c.setPriority(g.getIntegerByKey("Priority"));c.setCellFormattingScope(e.CellFormattingScope.lookup(g.getStringByKey("Scope")))}}var A=r.getListByKey("DataPointStyle");if(e.notNull(A)){a.clearDataPointStyles()}if(e.XCollectionUtils.hasElements(A)){for(l=0;l<A.size();l++){var S=A.getStructureAt(l);var d=a.addNewDataPointStyle(S.getStringByKey("Name"),S.getStringByKey("Text"));d.setFormattingStyleName(S.getStringByKey("Style"));d.setExceptionName(S.getStringByKey("ExceptionName"));d.setAlertLevelMin(e.QInAConverter.lookupAlertLevel(S.getIntegerByKeyExt("AlertLevelMin",-1)));d.setAlertLevelMax(e.QInAConverter.lookupAlertLevel(S.getIntegerByKeyExt("AlertLevelMax",-1)));d.setValueSign(e.ValueSign.get(S.getStringByKey("ValueSign")));d.setPriority(S.getIntegerByKey("Priority"))}}var I=r.getListByKey("TupleFormatting");if(e.notNull(I)){a.clearTupleFormattings()}if(e.XCollectionUtils.hasElements(I)){for(l=0;l<I.size();l++){var f=I.getStructureAt(l);var N=a.addNewTupleFormatting(f.getStringByKey("Name"),f.getStringByKey("Text"));N.setFormattingStyleName(f.getStringByKey("Style"));e.QInARepoTableDefinition.importPathAndAxis(f,N,s)}}var v=r.getListByKey("InsertedCells");if(e.XCollectionUtils.hasElements(v)){a.clearInsertedCells();for(l=0;l<v.size();l++){var T=v.getStructureAt(l);var R=a.addNewInsertedCell(T.getStringByKey("Name"),T.getStringByKey("Text"));R.setInsertOffset(T.getIntegerByKey("InsertPositionOffset"));e.QInARepoTableDefinition.importPathAndAxis(T,R,s)}}var E=r.getListByKey("HiddenCells");if(e.XCollectionUtils.hasElements(E)){a.clearHiddenCells();for(l=0;l<E.size();l++){var C=E.getStructureAt(l);var Q=a.addNewHiddenCells(C.getStringByKey("Name"),C.getStringByKey("Text"));e.QInARepoTableDefinition.importPathAndAxis(C,Q,s)}}var M=r.getListByKey("FixedPixelRowHeights");if(e.XCollectionUtils.hasElements(M)){a.clearFixedPixelRowHeights();for(l=0;l<M.size();l++){var D=M.getStructureAt(l);a.setFixedPixelHeightForRow(D.getIntegerByKey("Index"),D.getIntegerByKey("Height"))}}var L=r.getListByKey("FixedPixelColumnWidths");if(e.XCollectionUtils.hasElements(L)){a.clearFixedPixelColumnWidths();for(l=0;l<L.size();l++){var F=L.getStructureAt(l);a.setFixedPixelWidthForColumn(F.getIntegerByKey("Index"),F.getIntegerByKey("Width"))}}a.setStripeDataColumns(r.getBooleanByKey("StripeDataColumns"));a.setStripeDataRows(r.getBooleanByKey("StripeDataRows"));a.setFreezeHeaderRows(r.getBooleanByKey("FreezeHeaderRows"));a.setFreezeHeaderColumns(r.getBooleanByKey("FreezeHeaderColumns"));a.setFreezeUpToRow(r.getIntegerByKeyExt("FreezeUpToRow",-1));a.setFreezeUpToColumn(r.getIntegerByKeyExt("FreezeUpToColumn",-1));a.setShowFreezeLines(r.getBooleanByKey("ShowFreezeLines"));a.setShowGrid(r.getBooleanByKey("ShowGrid"));a.setShowTableTitle(r.getBooleanByKeyExt("ShowTableTitle",true));a.setShowTableDetails(r.getBooleanByKeyExt("ShowTableDetails",false));a.setShowSubTitle(r.getBooleanByKeyExt("ShowSubtitle",false));a.setShowFormulas(r.getBooleanByKey("ShowFormulas"));a.setShowDimensionTitles(r.getBooleanByKeyExt("ShowDimensionTitles",true));a.setRepetitiveMemberNames(r.getBooleanByKey("ShowRepetitiveMemberNames"));a.setMergeRepetitiveMemberCells(r.getBooleanByKey("MergeRepetitiveMemberCells"));a.setShowCoordinateHeader(r.getBooleanByKey("ShowCoordinateHeader"));a.setShowReferences(r.getBooleanByKey("ShowReferences"));a.setHeaderColor(r.getStringByKey("HeaderColor"));a.setTotalLevel6Color(r.getStringByKey("TotalLevel6Color"));a.setTotalLevel5Color(r.getStringByKey("TotalLevel5Color"));a.setTotalLevel4Color(r.getStringByKey("TotalLevel4Color"));a.setTotalLevel3Color(r.getStringByKey("TotalLevel3Color"));a.setTotalLevel2Color(r.getStringByKey("TotalLevel2Color"));a.setTotalLevel1Color(r.getStringByKey("TotalLevel1Color"));a.setTotalLevel0Color(r.getStringByKey("TotalLevel0Color"));a.setTitle(r.getStringByKey("Title"))}return n};e.QInARepoTableDefinition.prototype.importStyledLine=function(t,r){t.setWidth(r.getDoubleByKeyExt("LineWidth",-1));t.setColor(r.getStringByKey("LineColor"));t.setPatternBackground(r.getStringByKey("PatternBackground"));t.setPatternWidth(r.getStringByKey("PatternWidth"));t.setPatternColor(r.getStringByKey("PatternColor"));t.setPatternBorderColor(r.getStringByKey("PatternBorderColor"));t.setPatternType(e.LinePatternType.lookup(r.getStringByKey("PatternType")));t.setLineStyle(e.TableLineStyle.lookup(r.getStringByKey("LineStyle")));t.setLeftPadding(r.getDoubleByKeyExt("PaddingLeft",-1));t.setRightPadding(r.getDoubleByKeyExt("PaddingRight",-1));t.setTopPadding(r.getDoubleByKeyExt("PaddingTop",-1));t.setBottomPadding(r.getDoubleByKeyExt("PaddingBottom",-1))};e.QInARepoTableDefinition.prototype.exportComponentWithStructure=function(t,r,n,i){if(e.notNull(n)&&e.notNull(r)){var o=r;var a=n.putNewList("DimensionColorPalette");if(e.XCollectionUtils.hasElements(o.getDimensionColorPalette())){a.addAllStrings(o.getDimensionColorPalette())}var l;var p=o.getFormattingStyles();if(e.XCollectionUtils.hasElements(p)){var s=n.putNewList("Styles");for(l=0;l<p.size();l++){var u=p.get(l);var g=s.addNewStructure();g.putString("Name",u.getName());g.putString("Text",u.getText());this.exportStyledLine(u.getStyledLineLeft(),g.putNewStructure("LeftLine"));this.exportStyledLine(u.getStyledLineRight(),g.putNewStructure("RightLine"));this.exportStyledLine(u.getStyledLineTop(),g.putNewStructure("TopLine"));this.exportStyledLine(u.getStyledLineBottom(),g.putNewStructure("BottomLine"));g.putString("FillColor",u.getFillColor());if(this.isBooleanSet(u.isFontBoldExt())){g.putBoolean("FontBold",u.isFontBold())}if(this.isBooleanSet(u.isFontItalicExt())){g.putBoolean("FontItalic",u.isFontItalic())}if(this.isBooleanSet(u.isFontUnderlineExt())){g.putBoolean("FontUnderline",u.isFontUnderline())}if(this.isBooleanSet(u.isFontStrikeThroughExt())){g.putBoolean("FontStrikeThrough",u.isFontStrikeThrough())}g.putDouble("FontSize",u.getFontSize());g.putString("FontFamily",u.getFontFamily());g.putString("FontColor",u.getFontColor());g.putString("CellChartBarColor",u.getCellChartBarColor());g.putString("CellChartLineColor",u.getCellChartLineColor());g.putString("AlertColor",u.getAlertColor());if(u.getAlertSymbol()!==null){g.putString("AlertSymbol",u.getAlertSymbol().getName())}if(u.getVerticalAlignment()!==null){g.putString("VerticalAlignment",u.getVerticalAlignment().getName())}if(u.getHorizontalAlignment()!==null){g.putString("HorizontalAlignment",u.getHorizontalAlignment().getName())}g.putInteger("Priority",u.getPriority());if(u.getCellFormattingScope()!==null){g.putString("Scope",u.getCellFormattingScope().getName())}}}var y=o.getDataPointStyles();if(e.XCollectionUtils.hasElements(y)){var m=n.putNewList("DataPointStyle");for(l=0;l<y.size();l++){var c=m.addNewStructure();var A=y.get(l);c.putString("Name",A.getName());c.putString("Text",A.getText());c.putString("Style",A.getFormattingStyleName());c.putString("ExceptionName",A.getExceptionName());if(A.getAlertLevelMin()!==null){c.putInteger("AlertLevelMin",A.getAlertLevelMin().getLevel())}if(A.getAlertLevelMax()!==null){c.putInteger("AlertLevelMax",A.getAlertLevelMax().getLevel())}if(A.getValueSign()!==null){c.putString("ValueSign",A.getValueSign().getName())}c.putInteger("Priority",A.getPriority())}}var S=o.getTupleFormattings();if(e.XCollectionUtils.hasElements(S)){var d=n.putNewList("TupleFormatting");for(l=0;l<S.size();l++){var I=d.addNewStructure();var f=S.get(l);I.putString("Style",f.getFormattingStyleName());e.QInARepoTableDefinition.exportPathAndAxis(I,f)}}var N=o.getInsertedCells();if(e.XCollectionUtils.hasElements(N)){var v=n.putNewList("InsertedCells");for(l=0;l<N.size();l++){var T=v.addNewStructure();var R=N.get(l);T.putInteger("InsertPositionOffset",R.getInsertOffset());e.QInARepoTableDefinition.exportPathAndAxis(T,R)}}var E=o.getHiddenCells();if(e.XCollectionUtils.hasElements(E)){var C=n.putNewList("HiddenCells");for(l=0;l<E.size();l++){var Q=C.addNewStructure();var M=E.get(l);e.QInARepoTableDefinition.exportPathAndAxis(Q,M)}}var D;var L;var F=o.getFixedPixelHeightsForRows();if(e.XCollectionUtils.hasElements(F)){var O=n.putNewList("FixedPixelRowHeights");D=F.getKeysAsIterator();while(D.hasNext()){L=D.next();var B=O.addNewStructure();B.putInteger("Index",L.getInteger());B.putInteger("Height",F.getByKey(L).getInteger())}}var h=o.getFixedPixelWidthsForColumns();if(e.XCollectionUtils.hasElements(h)){var _=n.putNewList("FixedPixelColumnWidths");D=h.getKeysAsIterator();while(D.hasNext()){L=D.next();var x=_.addNewStructure();x.putInteger("Index",L.getInteger());x.putInteger("Width",h.getByKey(L).getInteger())}}n.putString("DimensionToColorate",o.getDimensionToColorate());n.putBoolean("StripeDataRows",o.isStripeDataRows());n.putBoolean("StripeDataColumns",o.isStripeDataColumns());n.putBoolean("FreezeHeaderRows",o.isFreezeHeaderRows());n.putBoolean("FreezeHeaderColumns",o.isFreezeHeaderColumns());n.putInteger("FreezeUpToRow",o.getFreezeUpToRow());n.putInteger("FreezeUpToColumn",o.getFreezeUpToColumn());n.putBoolean("ShowFreezeLines",o.isShowFreezeLines());n.putBoolean("ShowGrid",o.isShowGrid());n.putBoolean("ShowTableTitle",o.isShowTableTitle());n.putBoolean("ShowTableDetails",o.isShowTableDetails());n.putBoolean("ShowSubtitle",o.isShowSubTitle());n.putBoolean("ShowFormulas",o.isShowFormulas());n.putBoolean("ShowDimensionTitles",o.isShowDimensionTitles());n.putBoolean("ShowRepetitiveMemberNames",o.isRepetitiveMemberNames());n.putBoolean("MergeRepetitiveMemberCells",o.isMergeRepetitiveMemberCells());n.putBoolean("ShowCoordinateHeader",o.isShowCoordinateHeader());n.putBoolean("ShowReferences",o.isShowReferences());n.putStringNotNullAndNotEmpty("HeaderColor",o.getHeaderColor());n.putStringNotNullAndNotEmpty("TotalLevel6Color",o.getTotalLevel6Color());n.putStringNotNullAndNotEmpty("TotalLevel5Color",o.getTotalLevel5Color());n.putStringNotNullAndNotEmpty("TotalLevel4Color",o.getTotalLevel4Color());n.putStringNotNullAndNotEmpty("TotalLevel3Color",o.getTotalLevel3Color());n.putStringNotNullAndNotEmpty("TotalLevel2Color",o.getTotalLevel2Color());n.putStringNotNullAndNotEmpty("TotalLevel1Color",o.getTotalLevel1Color());n.putStringNotNullAndNotEmpty("TotalLevel0Color",o.getTotalLevel0Color());n.putStringNotNullAndNotEmpty("Title",o.getTitle())}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoTableDefinition.prototype.exportStyledLine=function(e,t){if(e.getWidth()>-1){t.putDouble("LineWidth",e.getWidth())}t.putStringNotNullAndNotEmpty("LineColor",e.getColor());t.putStringNotNullAndNotEmpty("PatternBackground",e.getPatternBackground());t.putStringNotNullAndNotEmpty("PatternWidth",e.getPatternWidth());t.putStringNotNullAndNotEmpty("PatternColor",e.getPatternColor());t.putStringNotNullAndNotEmpty("PatternBorderColor",e.getPatternBorderColor());if(e.getPatternType()!==null){t.putString("PatternType",e.getPatternType().getName())}if(e.getLineStyle()!==null){t.putString("LineStyle",e.getLineStyle().getName())}if(e.getLeftPadding()>-1){t.putDouble("PaddingLeft",e.getLeftPadding())}if(e.getRightPadding()>-1){t.putDouble("PaddingRight",e.getRightPadding())}if(e.getTopPadding()>-1){t.putDouble("PaddingTop",e.getTopPadding())}if(e.getBottomPadding()>-1){t.putDouble("PaddingBottom",e.getBottomPadding())}};e.QInARepoTableDefinition.prototype.isBooleanSet=function(t){return e.notNull(t)&&t!==e.TriStateBool._DEFAULT};e.QInARepoVisualizationManager=function(){};e.QInARepoVisualizationManager.prototype=new e.QInARepository;e.QInARepoVisualizationManager.prototype._ff_c="QInARepoVisualizationManager";e.QInARepoVisualizationManager.prototype.getComponentType=function(){return e.OlapComponentType.VISUALIZATION_MANAGER};e.QInARepoVisualizationManager.prototype.getTagName=function(){return"VisualizationManager"};e.QInARepoVisualizationManager.prototype.importComponentWithStructure=function(t,r,n,i,o){if(e.notNull(r)&&e.notNull(n)&&n.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){var a=r.getListByKey("Elements");if(e.XCollectionUtils.hasElements(a)){this.importComponentWithList(t,a,n,i,o)}}return n};e.QInARepoVisualizationManager.prototype.importComponentWithList=function(t,r,n,i,o){var a=n;a.setRepoSerializationActive(true);for(var l=0;l<r.size();l++){var p=r.getStructureAt(l);var s=p.getStringByKey("Name");var u=e.QInAConverter.lookupProtocolBindingType(p.getStringByKey("ProtocolBindingType"));var g=e.QInAConverter.lookupSemanticBindingType(p.getStringByKey("SemanticBindingType"));var y=a.getOrCreateVisualisationDefinition(s,u,g);t.importVisualizationDefinition(p,y)}};e.QInARepoVisualizationManager.prototype.exportComponentWithStructure=function(t,r,n,i){if(e.notNull(r)&&r.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_MANAGER){var o=this.exportComponentWithList(t,r,i);if(e.XCollectionUtils.hasElements(o)){n.put("Elements",o)}}return e.QInARepository.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoVisualizationManager.prototype.exportComponentWithList=function(t,r,n){var i=null;var o=r;var a=o.getVisualizationDefinitions();if(e.XCollectionUtils.hasElements(a)){i=e.PrFactory.createList();for(var l=0;l<a.size();l++){var p=i.addNewStructure();p.putString("Name",a.get(l).getName());p.putString("ProtocolBindingType",a.get(l).getProtocolBindingType().getName());p.putString("SemanticBindingType",a.get(l).getSemanticBindingType().getName());t.exportVisualizationDefinition(a.get(l),p)}}return i};e.QInA=function(){};e.QInA.prototype=new e.MessageManager;e.QInA.prototype._ff_c="QInA";e.QInA.s_lookupByFormat=null;e.QInA.staticSetup=function(){e.QInA.s_lookupByFormat=e.XHashMapByString.create();e.QInA.addAllFormats();e.QInA.addAllTypes()};e.QInA.staticSetupForPlanning=function(){e.QInA.addAllPlanningTypes()};e.QInA.addInAComponent=function(t){var r=t.getComponentType().getName();var n=t.getModelFormat();if(e.isNull(n)){n=e.QModelFormat.INA_DATA}var i=n.getUsages();var o=i.size();for(var a=0;a<o;a++){var l=i.get(a);var p=l.getName();var s=e.QInA.s_lookupByFormat.getByKey(p);var u=s.getByKey(r);e.XObjectExt.assertNotNullExt(u,e.XStringUtils.concatenate2("Container not defined: ",r));u.add(t)}};e.QInA.addAllTypes=function(){e.QInA.addType(e.OlapComponentType.CONDITIONS_MANAGER);e.QInA.addType(e.OlapComponentType.CONDITION);e.QInA.addType(e.OlapComponentType.CONDITIONS_THRESHOLD);e.QInA.addType(e.OlapComponentType.CONDITIONS);e.QInA.addType(e.OlapComponentType.QUERY_MODEL);e.QInA.addType(e.OlapComponentType.DATA_CELL);e.QInA.addType(e.OlapComponentType.AXIS);e.QInA.addType(e.OlapComponentType.SORT_MANAGER);e.QInA.addType(e.OlapComponentType.LAYER_MODEL);e.QInA.addType(e.OlapComponentType.DATA_SOURCE);e.QInA.addType(e.OlapComponentType.DOCUMENTS_INFO);e.QInA.addType(e.OlapComponentType.SELECTOR);e.QInA.addType(e.OlapComponentType.ATTRIBUTE_CONTAINER);e.QInA.addType(e.OlapComponentType.ATTRIBUTE);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT_MANAGER);e.QInA.addType(e.OlapComponentType.CELL_CONTEXT);e.QInA.addType(e.OlapComponentType.DRILL_MANAGER);e.QInA.addType(e.OlapComponentType.DRILL_OPERATION);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_MANAGER);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_LIST);e.QInA.addType(e.OlapComponentType.CURRENCY_TRANSLATION_ITEM);e.QInA.addType(e.OlapComponentType.MEASURE_TRANSLATIONS);e.QInA.addType(e.OlapComponentType.FIELD_CONTAINER);e.QInA.addType(e.OlapComponentType.FIELD_LIST);e.QInA.addType(e.OlapComponentType.FIELD);e.QInA.addType(e.OlapComponentType.RESULT_STRUCTURE);e.QInA.addType(e.OlapComponentType.DATA_CELLS);e.QInA.addType(e.OlapComponentType.TOTALS);e.QInA.addType(e.OlapComponentType.EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_EXCEPTION);e.QInA.addType(e.OlapComponentType.QUERY_SETTINGS);e.QInA.addType(e.OlapComponentType.HIERARCHY);e.QInA.addType(e.OlapComponentType.HIERARCHY_MANAGER);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_REPOSITORY);e.QInA.addType(e.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION);e.QInA.addType(e.OlapComponentType.AXES_SETTINGS);e.QInA.addType(e.OlapComponentType.PROPERTY);e.QInA.addType(e.OlapComponentType.PLANNING_X_COMMAND);e.QInA.addType(e.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES);e.QInA.addType(e.OlapComponentType.QUERY_CELLS);e.QInA.addType(e.MemberType.DRILL_PATH_ELEMENT);e.QInA.addType(e.MemberType.MEMBER);e.QInA.addType(e.MemberType.SINGLE_MEMBER_EXIT);e.QInA.addType(e.MemberType.MEMBER_EXITS);e.QInA.addType(e.MemberType.LITERAL_MEMBER);e.QInA.addType(e.MemberType.BASIC_MEASURE);e.QInA.addType(e.MemberType.FORMULA);e.QInA.addType(e.MemberType.SERVER_BASED_FORMULA);e.QInA.addType(e.MemberType.RESTRICTED_MEASURE);e.QInA.addType(e.MemberType.VARIANCE);e.QInA.addType(e.MemberType.EXCEPTION_AGGREGATION);e.QInA.addType(e.MemberType.CURRENCY_MEASURE);e.QInA.addType(e.MemberType.RUNNING_TOTAL);e.QInA.addType(e.MemberType.HIERARCHY_NODE);e.QInA.addType(e.MemberType.RESULT);e.QInA.addType(e.MemberType.CONDITION_RESULT);e.QInA.addType(e.MemberType.CONDITION_OTHERS_RESULT);e.QInA.addType(e.MemberType.MEASURE);e.QInA.addType(e.MemberType.ABSTRACT_MEMBER);e.QInA.addType(e.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER);e.QInA.addType(e.OlapComponentType.FORMULA_CONSTANT);e.QInA.addType(e.OlapComponentType.FORMULA_ITEM_MEMBER);e.QInA.addType(e.OlapComponentType.FORMULA_OPERATION);e.QInA.addType(e.OlapComponentType.FORMULA_FUNCTION);e.QInA.addType(e.OlapComponentType.MEMBERS);e.QInA.addType(e.OlapComponentType.DIMENSION_SORTING);e.QInA.addType(e.OlapComponentType.FIELD_SORTING);e.QInA.addType(e.OlapComponentType.DATA_CELL_SORTING);e.QInA.addType(e.OlapComponentType.COMPLEX_SORTING);e.QInA.addType(e.OlapComponentType.MEASURE_SORTING);e.QInA.addType(e.OlapComponentType.GENERIC_SORTING);e.QInA.addType(e.OlapComponentType.LAYER);e.QInA.addType(e.OlapComponentType.LAYER_SYNC_DEFINITION);e.QInA.addType(e.OlapComponentType.LAYER_REFERENCE_DEFINITION);e.QInA.addType(e.OlapComponentType.ABSTRACT_LAYER_MODEL);e.QInA.addType(e.OlapComponentType.VARIABLE_MANAGER);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTAINER);e.QInA.addType(e.OlapComponentType.VARIABLE_LIST);e.QInA.addType(e.VariableType.TEXT_VARIABLE);e.QInA.addType(e.VariableType.FORMULA_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NODE_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_NAME_VARIABLE);e.QInA.addType(e.VariableType.HIERARCHY_VARIABLE);e.QInA.addType(e.VariableType.OPTION_LIST_VARIABLE);e.QInA.addType(e.VariableType.DIMENSION_MEMBER_VARIABLE);e.QInA.addType(e.VariableType.SIMPLE_TYPE_VARIABLE);e.QInA.addType(e.VariableType.ANY_VARIABLE);e.QInA.addType(e.OlapComponentType.VARIABLE_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP_FILTER_MANAGER);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY_GROUP);e.QInA.addType(e.OlapComponentType.FILTER_CAPABILITY);e.QInA.addType(e.OlapComponentType.FILTER_EXPRESSION);e.QInA.addType(e.OlapComponentType.FILTER_LITERAL);e.QInA.addType(e.OlapComponentType.FILTER_FIXED);e.QInA.addType(e.OlapComponentType.FILTER_DYNAMIC);e.QInA.addType(e.OlapComponentType.FILTER_VISIBILITY);e.QInA.addType(e.OlapComponentType.FILTER_CELL_VALUE_OPERAND);e.QInA.addType(e.FilterComponentType.CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST);e.QInA.addType(e.FilterComponentType.CARTESIAN_PRODUCT);e.QInA.addType(e.FilterComponentType.AND);e.QInA.addType(e.FilterComponentType.OR);e.QInA.addType(e.FilterComponentType.NOT);e.QInA.addType(e.FilterComponentType.SPATIAL_FILTER);e.QInA.addType(e.FilterComponentType.BOOLEAN_ALGEBRA);e.QInA.addType(e.FilterComponentType.OPERATION);e.QInA.addType(e.FilterComponentType.FILTER_MEASURE_BASED);e.QInA.addType(e.FilterComponentType.FILTER_ACROSS_MODELS);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_REGULAR_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_DYNAMIC_TIME_TO_DATE_RANGE);e.QInA.addType(e.FilterComponentType.FILTER_FIXED_TIME_RANGE);e.QInA.addType(e.OlapComponentType.FILTER_ELEMENT);e.QInA.addType(e.OlapComponentType.DIMENSION_CONTEXT);e.QInA.addType(e.OlapComponentType.DIMENSIONS);e.QInA.addType(e.DimensionType.PRESENTATION);e.QInA.addType(e.DimensionType.CONTAINER);e.QInA.addType(e.DimensionType.ATTRIBUTE_DIM);e.QInA.addType(e.DimensionType.CURRENCY);e.QInA.addType(e.DimensionType.UNIT);e.QInA.addType(e.DimensionType.TIME);e.QInA.addType(e.DimensionType.DATE);e.QInA.addType(e.DimensionType.HIERARCHY_VERSION);e.QInA.addType(e.DimensionType.HIERARCHY_NAME);e.QInA.addType(e.DimensionType.SEARCH_DIMENSION);e.QInA.addType(e.DimensionType.VERSION_EPM);e.QInA.addType(e.DimensionType.VERSION_IBP);e.QInA.addType(e.DimensionType.ACCOUNT);e.QInA.addType(e.DimensionType.GIS_DIMENSION);e.QInA.addType(e.DimensionType.SEARCH_RESULT);e.QInA.addType(e.DimensionType.SUGGEST_TERM);e.QInA.addType(e.DimensionType.SUGGEST_SCOPE);e.QInA.addType(e.DimensionType.SUGGEST_ATTRIBUTE);e.QInA.addType(e.DimensionType.MEASURE_STRUCTURE);e.QInA.addType(e.DimensionType.SECONDARY_STRUCTURE);e.QInA.addType(e.DimensionType.ABSTRACT_STRUCTURE);e.QInA.addType(e.DimensionType.DIMENSION);e.QInA.addType(e.DimensionType.CALCULATED_DIMENSION);e.QInA.addType(e.DimensionType.FORMULA_CALCULATED_DIMENSION);e.QInA.addType(e.OlapComponentType.ABSTRACT_DIMENSION);e.QInA.addType(e.FilterComponentType.TUPLE);e.QInA.addType(e.FilterComponentType.VIRTUAL_DATASOURCE);e.QInA.addType(e.OlapComponentType.MODELLER_CURRENCY_TRANSLATION);e.QInA.addType(e.OlapComponentType.MODELLER_DIMENSIONS);e.QInA.addType(e.OlapComponentType.MODELLER_METADATA_PROPERTIES);e.QInA.addType(e.OlapComponentType.MODELLER_VARIABLES);e.QInA.addType(e.OlapComponentType.QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.QUERY_SERVICE_CONFIG);e.QInA.addType(e.OlapComponentType.COMPONENT_LIST);e.QInA.addType(e.OlapComponentType.QUERY_CONTEXT);e.QInA.addType(e.OlapComponentType.OLAP);e.QInA.addType(e.OlapComponentType.BLENDABLE_QUERY_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_MANAGER);e.QInA.addType(e.OlapComponentType.VISUALIZATION_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION);e.QInA.addType(e.OlapComponentType.VISUALIZATION_CHART_DEFINITION)};e.QInA.addAllPlanningTypes=function(){e.QInA.addType(e.OlapComponentType.PLANNING_MODEL);e.QInA.addType(e.OlapComponentType.PLANNING_ACTION);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_CLEANUP_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_ACTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_REFRESH_VERSIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_MODEL_UPDATE_VERSION_PRIVILEGES_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_INIT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_CLOSE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_START_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_END_ACTION_SEQUENCE_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_PARAMETERS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_SET_TIMEOUT_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_STATE_DESCRIPTIONS_COMMAND);e.QInA.addType(e.OlapComponentType.PLANNING_VERSION_UNDO_REDO_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND);e.QInA.addType(e.OlapComponentType.DATA_AREA_COMMAND_CLOSE);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_FUNCTION_METADATA);e.QInA.addType(e.OlapComponentType.DATA_AREA_GET_SEQUENCE_METADATA);e.QInA.addType(e.OlapComponentType.LIGHTWEIGHT_DATA_AREA_COMMAND)};e.QInA.addType=function(t){var r=e.QModelFormat.getAllModelFormats();var n=r.size();for(var i=0;i<n;i++){var o=r.get(i).getName();var a=e.QInA.s_lookupByFormat.getByKey(o);a.add(e.QInAComponentContainer.create(t))}};e.QInA.addAllFormats=function(){var t=e.QModelFormat.getAllModelFormats();var r=t.size();for(var n=0;n<r;n++){var i=e.XListOfNameObject.create();var o=t.get(n).getName();e.QInA.s_lookupByFormat.put(o,i)}};e.QInA.removeEmptyContainers=function(){var t=e.QModelFormat.getAllModelFormats();var r=t.size();for(var n=0;n<r;n++){var i=e.QInA.s_lookupByFormat.getByKey(t.get(n).getName());for(var o=0;o<i.size();){var a=i.get(o);if(a.isEmpty()){i.removeAt(o)}else{o++}}}};e.QInA.prototype.m_application=null;e.QInA.prototype.mode=null;e.QInA.prototype.m_originalMode=null;e.QInA.prototype.capabilities=null;e.QInA.prototype.variableProcessingDirective=null;e.QInA.prototype.modelContext=null;e.QInA.prototype.setupImportExport=function(t,r,n,i){var o=null;if(e.notNull(t)){o=t.getSession()}this.setupSessionContext(o);this.setApplication(t);this.mode=r;this.m_originalMode=r;this.modelContext=i;if(e.isNull(n)){this.capabilities=e.QCapabilities.create();this.capabilities.setSupportsSetOperand(true);this.capabilities.setSupportsConvertToFlatFilter(true);this.capabilities.setSupportsCummulative(true);this.capabilities.setSupportsExtendedSort(true);this.capabilities.setSupportsSpatialFilter(true);this.capabilities.setSupportsSpatialFilterSrid(true);this.capabilities.setSupportsSpatialTransformation(true);this.capabilities.setSupportsMemberVisibility(true);this.capabilities.setSupportsCustomDimensionMemberExecutionStep(true);this.capabilities.setSupportsExtendedDimensions(true);this.capabilities.setSupportsIgnoreExternalDimensions(true);this.capabilities.setSupportsSupplements(true)}else{this.capabilities=n}};e.QInA.prototype.lookupInAComponent=function(t,r){var n=null;var i=e.QInA.s_lookupByFormat.getByKey(this.mode.getName());var o=i.getByKey(t.getName());if(e.isNull(o)){var a=i.size();for(var l=0;l<a;l++){o=i.get(l);if(t.isTypeOf(o.getComponentType())){n=o.get(r);break}}}else{n=o.get(r)}if(e.isNull(n)){this.addError(0,e.XStringUtils.concatenate2("Cannot find serialization/deserialization component for type: ",t.getName()))}return n};e.QInA.prototype.getApplication=function(){return e.XWeakReferenceUtil.getHardRef(this.m_application)};e.QInA.prototype.setApplication=function(t){this.m_application=e.XWeakReferenceUtil.getWeakRef(t)};e.QInA.prototype.getProcess=function(){return this.getApplication().getProcess()};e.QInA.prototype.getMode=function(){return this.mode};e.QInA.prototype.getOriginalMode=function(){return this.m_originalMode};e.QInA.prototype.isAbap=function(t){var r=t.getModelCapabilities();if(e.notNull(r)){var n=r.getSystemType();if(e.notNull(n)){return n.isTypeOf(e.SystemType.ABAP)}}return false};e.QInA.prototype.isVirtualInA=function(t){return e.notNull(t)&&t.getModelCapabilities().getSystemType().isTypeOf(e.SystemType.VIRTUAL_INA)&&!this.getMode().isTypeOf(e.QModelFormat.INA_DATA_BLENDING_SOURCE)};e.QInARepoCalculatedDimension=function(){};e.QInARepoCalculatedDimension.prototype=new e.QInARepoDimension;e.QInARepoCalculatedDimension.prototype._ff_c="QInARepoCalculatedDimension";e.QInARepoCalculatedDimension.prototype.getComponentType=function(){return e.DimensionType.CALCULATED_DIMENSION};e.QInARepoCalculatedDimension.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=o.getQueryModel();var l=n;var p=r.getStringByKey("Name");if(e.isNull(l)&&e.notNull(a)){l=a.getDimensionManagerBase().getDimensionByNameInternal(p)}if(e.isNull(l)){l=e.QCalculatedDimension._createCalculatedDimension(o,i,p)}l.setDimensionType(e.DimensionType.CALCULATED_DIMENSION);l.setName(p);l.setTopEntries(r.getIntegerByKeyExt("Top",0));l.setSkipEntries(r.getIntegerByKeyExt("Skip",0));var s=r.getStructureByKey("DataSource");l.setPreQueryName(s.getStringByKey("ObjectName"));l.setJoinType(e.JoinType.lookup(r.getStringByKey("JoinType")));var u=r.getListByKey("JoinFields");var g=u.size();var y;for(y=0;y<g;y++){var m=u.getStructureAt(y);l.addJoinFieldByString(m.getStringByKey("JoinFieldName"),m.getStringByKey("JoinFieldNameInReferencedData"))}var c=r.getListByKey("FieldMappings");g=c.size();for(y=0;y<g;y++){var A=c.getStructureAt(y);l.addFieldMappingByString(A.getStringByKey("FieldName"),A.getStringByKey("FieldNameInReferencedData"));if(A.getStringByKey("CalculatedDimensionFieldValueType")!==null){var S=l.getFieldByName(A.getStringByKey("FieldName"));S.setValueType(e.QInAConverter.lookupValueType(A.getStringByKey("CalculatedDimensionFieldValueType")))}}this.importFieldsLayout(t,r,l,o);t.importTotals(r,l.getResultStructureControllerBase(),o);if(r.containsKey("IsHidden")){l.setHidden(r.getBooleanByKey("IsHidden"))}return l};e.QInARepoCalculatedDimension.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());var a=o.getAxisType();n.putString("Axis",e.QInAConverter.lookupAxisTypeInA(a));var l=o.getTopEntries();if(l>0){n.putInteger("Top",l)}var p=o.getSkipEntries();if(p>0){n.putInteger("Skip",p)}var s=n.putNewStructure("DataSource");s.putString("ObjectName",o.getPreQueryName());s.putString("Type","Query");n.putString("JoinType",o.getJoinType().getName());var u=n.putNewList("JoinFields");var g=o.getJoinFields();var y=g.size();var m;for(m=0;m<y;m++){var c=g.get(m);var A=u.addNewStructure();A.putString("JoinFieldName",c.getLocaleFieldName());A.putString("JoinFieldNameInReferencedData",c.getReferencedFieldName())}var S=n.putNewList("FieldMappings");var d=o.getFieldMappings();y=d.size();for(m=0;m<y;m++){var I=d.get(m);var f=S.addNewStructure();f.putString("FieldName",I.getLocaleFieldName());f.putString("FieldNameInReferencedData",I.getReferencedFieldName());var N=I.getLocaleFieldName();if(o.getFieldByName(N).getValueType()!==e.XValueType.STRING){var v=e.QInAConverter.lookupValueTypeInA(o.getFieldByName(N).getValueType());f.putString("CalculatedDimensionFieldValueType",v)}}this.exportFieldLayout(t,n,o);t.exportTotals(o,n);if(o.isHidden()){n.putBoolean("IsHidden",true)}return e.QInARepoDimension.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterConvertedTimeCartesianList=function(){};e.QInARepoFilterConvertedTimeCartesianList.prototype=new e.QInARepoFilterCartesianList;e.QInARepoFilterConvertedTimeCartesianList.prototype._ff_c="QInARepoFilterConvertedTimeCartesianList";e.QInARepoFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return e.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST};e.QInARepoFilterConvertedTimeCartesianList.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=null;if(e.notNull(i)){var l=i;a=l.getFilterExpression()}var p=n;if(e.isNull(p)){p=e.notNull(a)?e.QFactory.createFilterConvertedTimeCartesianList(a):e.QFactory.createFilterConvertedTimeCartesianList(o)}p.setIsSingleValueSourceCartesianList(r.getBooleanByKey("isSingleValueSource"));var s=r.getStringByKey("LevelType");if(e.notNull(s)){p.setHierarchyLevelType(e.HierarchyLevelType.lookup(s))}return e.QInARepoFilterCartesianList.prototype.importComponentWithStructure.call(this,t,r,p,i,o)};e.QInARepoFilterConvertedTimeCartesianList.prototype.exportComponentWithStructure=function(t,r,n,i){e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,r,n,i);var o=r;n.putBoolean("isSingleValueSource",o.isSingleValueSourceCartesianList());if(o.getHierarchyLevelType()!==null){n.putString("LevelType",o.getHierarchyLevelType().getName())}return e.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterDynamic=function(){};e.QInARepoFilterDynamic.prototype=new e.QInARepoFilter;e.QInARepoFilterDynamic.prototype._ff_c="QInARepoFilterDynamic";e.QInARepoFilterDynamic.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_DYNAMIC};e.QInARepoFilterDynamic.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=r.getStructureByKey("DynamicFilter");if(e.isNull(a)){a=r.getStructureByKey("Filter")}var l=i;var p=null;if(e.notNull(l)){l.setIgnoreInternalNonMeasureFilters(r.getBooleanByKeyExt("IgnoreInternalNonMeasureFilters",false));if(r.containsKey("FlattenHierarchyNodeFiltersFromVariables")){l.setFlattenHierarchyNodeFiltersFromVariables(r.getBooleanByKey("FlattenHierarchyNodeFiltersFromVariables"))}if(l.isDynamicFilterInitialized()){p=l.getDynamicFilter();p.setComplexRoot(null);if(p.getModelCapabilities().supportsCellValueOperand()){p.setIsSuppressingNulls(false)}}l.resetEffectiveFilter()}if(e.notNull(a)&&!a.isEmpty()){p=t.importFilterExpression(p,a,l,o)}if(e.notNull(l)){l.setDynamicFilter(p)}if(e.notNull(p)){p.setPreserveDuringSubmit(true)}return p};e.QInARepoFilterDynamic.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o;var l=a;n.putBoolean("IgnoreInternalNonMeasureFilters",l.isIgnoreInternalNonMeasureFilter());n.putBoolean("FlattenHierarchyNodeFiltersFromVariables",l.isFlattenHierarchyNodeFiltersFromVariables());var p=null;if(l.isDynamicFilterInitialized()){p=l.getDynamicFilter()}var s=a.getQueryModel();var u=t.isAbap(a);var g;if(u){g="Filter"}else{g="DynamicFilter"}var y=e.notNull(t.variableProcessingDirective)&&s.getModelCapabilities().supportsVariableMasking();if(y){var m=t.exportFilterExpression(p);if(e.notNull(m)){n.put(g,m)}}else{var c=null;if(l.isTmpFilterInitialized()){c=l.getTmpFilter()}var A=this.exportFilter(t,l,p,l.getLinkedFilters(),c);if(e.notNull(A)){n.put(g,A)}}return e.QInARepoFilter.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoFilterVisibility=function(){};e.QInARepoFilterVisibility.prototype=new e.QInARepoFilter;e.QInARepoFilterVisibility.prototype._ff_c="QInARepoFilterVisibility";e.QInARepoFilterVisibility.prototype.getComponentType=function(){return e.OlapComponentType.FILTER_VISIBILITY};e.QInARepoFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter"};e.QInARepoFilterVisibility.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;if(e.notNull(a)&&a.isVisibilityFilterInitialized()){var l=a.getVisibilityFilter();l.setComplexRoot(null);if(l.getModelCapabilities().supportsCellValueOperand()){l.setIsSuppressingNulls(false)}}var p=null;if(e.notNull(r)){p=t.importFilterExpression(null,r,a,o);if(e.notNull(a)&&e.notNull(p)){a.setVisibilityFilter(p)}}return p};e.QInARepoFilterVisibility.prototype.exportComponentWithStructure=function(e,t,r,n){var i=t;if(i.getModelCapabilities().supportsVisibilityFilter()){var o=null;if(i.isTmpVisibilityFilterInitialized()){o=i.getTmpVisibilityFilter()}var a=null;if(i.isVisibilityFilterInitialized()){a=i.getVisibilityFilter()}return this.exportFilter(e,i,a,i.getLinkedVisibilityFilters(),o)}return null};e.QInARepoFilterVisibility.prototype.isValidFilterExpression=function(t){return e.notNull(t)};e.QInARepoHierarchyManager=function(){};e.QInARepoHierarchyManager.prototype=new e.QInARepoHierarchy;e.QInARepoHierarchyManager.prototype._ff_c="QInARepoHierarchyManager";e.QInARepoHierarchyManager.prototype.getComponentType=function(){return e.OlapComponentType.HIERARCHY_MANAGER};e.QInARepoHierarchyManager.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;return e.QInARepoHierarchy.prototype.importComponentWithStructure.call(this,t,r,a.getDimension(),i,o)};e.QInARepoHierarchyManager.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;return e.QInARepoHierarchy.prototype.exportComponentWithStructure.call(this,t,o.getDimension(),n,i)};e.QInARepoMemberBasicMeasure=function(){};e.QInARepoMemberBasicMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberBasicMeasure.prototype._ff_c="QInARepoMemberBasicMeasure";e.QInARepoMemberBasicMeasure.getNameFromOperand=function(t){var r=t.getStructureByKey("MemberOperand");if(e.notNull(r)){var n=e.XString.isEqual(r.getStringByKey("AttributeName"),"Measures");var i=e.QInAConverter.lookupComparison(r.getStringByKey("Comparison"))===e.ComparisonOperator.EQUAL;if(n&&i){return r.getStringByKey("Value")}}return null};e.QInARepoMemberBasicMeasure.getNameForImport=function(t,r){var n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(r)){var i=r.getKeyField();var o=i.getName();return t.getStringByKey(o)}return n};e.QInARepoMemberBasicMeasure.getText=function(t,r){var n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(r)){var i=r.getTextField();if(e.notNull(i)){var o=i.getName();return t.getStringByKey(o)}}return n};e.QInARepoMemberBasicMeasure.prototype.getComponentType=function(){return e.MemberType.BASIC_MEASURE};e.QInARepoMemberBasicMeasure.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;if(e.isNull(a)){a=o.getDimensionAccessor().getDimensionByNameFromExistingMetadata(r.getStringByKey("Dimension"))}var l=e.QInARepoMemberBasicMeasure.getNameForImport(r,a);var p=e.QInARepoMemberBasicMeasure.getText(r,a);if(e.XStringUtils.isNullOrEmpty(l)){l=e.QInARepoMemberBasicMeasure.getNameFromOperand(r)}var s=n;if(e.isNull(s)){s=a.getStructureMember(l);if(e.isNull(s)){if(this.newComponentCreationAllowed(t,r)&&r.getBooleanByKeyExt("Extended",true)){s=e.QBasicMeasure._createBasicMeasure(o,a);if(a.getQueryModel()!==null&&t.isAbap(a.getQueryModel())){s.setNotFromMetadata()}}}}else{s.setDimension(a)}if(e.notNull(s)){s.setName(l);var u=r.getBooleanByKeyExt("OverrideDescription",false);if(u){if(e.XStringUtils.isNullOrEmpty(p)){if(e.XStringUtils.isNullOrEmpty(s.getOriginalText())){p=l}else{p=s.getOriginalText()}}if(!e.XString.isEqual(p,s.getOriginalText())){var g=a.getTextField();if(e.notNull(g)){a.setAlternativeFieldValue(false,l,g.getName(),e.XStringValue.create(p),null)}}}if(e.notNull(p)&&(s.getOriginalText()===null||u)){s.setText(p)}s.initializeFieldValues();e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,s,r)}return s};e.QInARepoMemberBasicMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;var a=o.getDimension();if(a.getDimensionType()===e.DimensionType.ACCOUNT){n.putString("Name",o.getName());return n}var l=o.getOriginalText();if(e.notNull(l)){n.putString("Description",l)}n.putString("Dimension",a.getName());var p=e.PrFactory.createStructure();p.putString("AttributeName","Measures");n.put("MemberOperand",p);var s=o.getQueryModel();if(s.isBasicMeasureAggregationExportedInRepo()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var u=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",u)}if(!o.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){var g=o.getAggregationDimensionName();if(e.notNull(g)){n.putString("AggregationDimension",g)}}if(!t.capabilities.supportsExtendedSort()&&!t.isVirtualInA(s)){var y=s.getSortingManager().getMeasureSorting(o,false);if(e.isNull(y)){n.putInteger("SortOrder",0)}else{n.putInteger("SortOrder",e.QInAConverter.lookupSortDirectionInA(y.getDirection()))}}var m=o.getKeyFieldValue();p.putString("Comparison",e.QInAConverter.lookupComparisonInA(e.ComparisonOperator.EQUAL));e.QInARepoUtils.exportValue(t,"Value",p,m,m.getValueType());e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);if(s.isBasicMeasureSettingsExportedInRepo()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberCurrency=function(){};e.QInARepoMemberCurrency.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberCurrency.prototype._ff_c="QInARepoMemberCurrency";e.QInARepoMemberCurrency.prototype.getComponentType=function(){return e.MemberType.CURRENCY_MEASURE};e.QInARepoMemberCurrency.prototype.newModelComponent=function(t,r,n,i){var o=e.QCurrencyMeasure._createCurrencyMeasure(i,null);o.setParent(n);return o};e.QInARepoMemberCurrency.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=i;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewCurrencyMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));if(r.containsKey("CurrencyTranslationName")){a.setCurrencyTranslationName(r.getStringByKey("CurrencyTranslationName"))}var u=a.getLocalCurrencyTranslation();var g=r.getStructureByKey("CurrencyTranslation");if(e.isNull(g)){a.setLocalCurrency()}else{t.importCurrencyTranslationElement(g,u,o)}a.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"));return a};e.QInARepoMemberCurrency.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());n.putStringNotNullAndNotEmpty("BaseMeasureName",o.getBaseMeasureName());n.putStringNotNullAndNotEmpty("CurrencyTranslationName",o.getCurrencyTranslationName());if(!o.isLocalCurrency()){var a=o.getLocalCurrencyTranslation();var l=n.putNewStructure("CurrencyTranslation");t.exportCurrencyTranslationElement(a,l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberExceptionAggregationMeasure=function(){};e.QInARepoMemberExceptionAggregationMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberExceptionAggregationMeasure.prototype._ff_c="QInARepoMemberExceptionAggregationMeasure";e.QInARepoMemberExceptionAggregationMeasure.prototype.getComponentType=function(){return e.MemberType.EXCEPTION_AGGREGATION};e.QInARepoMemberExceptionAggregationMeasure.prototype.newModelComponent=function(t,r,n,i){var o=e.QExceptionAggregationMeasure._createExceptionAggregationMeasure(i,null);o.setParent(n);return o};e.QInARepoMemberExceptionAggregationMeasure.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=i;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewExceptionAggregationMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}a.setMeasure(r.getStringByKey("MeasureName"));if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ConditionType")){a.setConditionType(e.ExceptionAggregationConditionType.lookup(r.getStringByKey("ConditionType")))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("ExceptionAggregationOnSelectionEnabled")){a.setIsExceptionAggregationOnSelectionEnabled(r.getBooleanByKey("ExceptionAggregationOnSelectionEnabled"))}var u=a.getFilter();var g=null;var y=r.getStructureByKey("Selection");if(e.notNull(y)){g=t.importComponent(null,y,null,u,o)}u.setComplexRoot(g);return a};e.QInARepoMemberExceptionAggregationMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());n.putString("MeasureName",o.getMeasure());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CONDITION_TYPE)){n.putString("ConditionType",o.getConditionType().getName())}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_EXCEPTION_AGGREGATION_ON_SELECTION)){n.putBoolean("ExceptionAggregationOnSelectionEnabled",o.getIsExceptionAggregationOnSelectionEnabled())}var a=o.getFilter().getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,i);n.put("Selection",l)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberFormulaMeasure=function(){};e.QInARepoMemberFormulaMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberFormulaMeasure.prototype._ff_c="QInARepoMemberFormulaMeasure";e.QInARepoMemberFormulaMeasure.importIteration=function(t,r,n,i){var o=e.QFactory.createIteration(n);r.setIteration(o);o.setStartValueMemberName(i.getStringByKey("StartValueMember"));var a=i.getListByKey("IterationDimensions");if(e.XCollectionUtils.hasElements(a)){var l=a.size();for(var p=0;p<l;p++){var s=a.getStructureAt(p);var u=e.QFactory.createIterationDimension(n);u.setDimensionName(s.getStringByKey("Name"));u.setPartitionLevelName(s.getStringByKey("PartitionLevel"));o.addIterationDimension(u)}}};e.QInARepoMemberFormulaMeasure.importInverseFormulas=function(t,r,n,i){var o=r.getDimension();var a=i.size();var l=r.getInverseFormulaList();l.clear();for(var p=0;p<a;p++){var s=i.get(p);var u=s.getStructureByKey("Formula");var g=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,u,null,n);var y=null;var m=s.getStructureByKey("Condition");if(e.notNull(m)){y=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,m,null,n)}var c=s.getStructureByKey("Target");var A=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,o,c,null,n);var S=e.QFormulaInverseFormula.createInverseFormula(n,r,y,A,g);l.add(S)}};e.QInARepoMemberFormulaMeasure.importNameAndText=function(t,r,n){var i=e.QInARepoMemberFormulaMeasure.getNameForImport(t,n);var o=e.QInARepoMemberFormulaMeasure.getText(t,n);if(e.XStringUtils.isNullOrEmpty(i)&&e.XStringUtils.isNullOrEmpty(o)){i=t.getStringByKey("Name");o=t.getStringByKey("Description")}r.setName(i);r.setText(o)};e.QInARepoMemberFormulaMeasure.getNameForImport=function(t,r){var n=t.getStringByKey("Name");if(e.isNull(n)&&e.notNull(r)){var i=r.getKeyField();var o=i.getName();return t.getStringByKey(o)}return n};e.QInARepoMemberFormulaMeasure.getText=function(t,r){var n=t.getStringByKey("Description");if(e.isNull(n)&&e.notNull(r)){var i=r.getTextField();if(e.notNull(i)){var o=i.getName();n=t.getStringByKey(o)}}return n};e.QInARepoMemberFormulaMeasure.importFormulaMeasure=function(t,r,n,i,o){var a=null;if(e.notNull(n)){var l=n.getStructureByKey("Function");a=i;if(e.notNull(l)){var p=l.getStringByKey("Name");var s=l.getListByKey("Parameters");var u=e.QFactory.createFormulaFunction(o);if(e.notNull(s)){u.setFunctionName(p);var g=s.size();for(var y=0;y<g;y++){e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,r,s.getStructureAt(y),u,o)}}u.setSolveOrder(n.getIntegerByKeyExt("SolveOrder",0));if(e.isNull(a)){a=u}else{a.add(u)}}else{var m=n.getStructureByKey("Constant");if(e.notNull(m)){var c=e.QFactory.createFormulaConstant(o);if(e.XString.isEqual("Variable",m.getStringByKey("ValueIs"))){var A=m.getStringByKey("Value");if(e.XStringUtils.isNotNullAndNotEmpty(A)){var S=r.getQueryModel().getVariableManager();c.setVariable(S.getVariables().getByKey(A))}if(e.isNull(a)){a=c}else{a.add(c)}}else{var d=m.getStringByKey("ValueType");var I=!m.containsKey("Value")||m.getElementTypeByKey("Value")===e.PrElementType.THE_NULL;if(e.XString.isEqual(d,"Number")){if(I){c.setNullByType(e.XValueType.DOUBLE)}else{c.setDouble(m.getDoubleByKey("Value"))}}else if(e.XString.isEqual(d,"String")){if(I){c.setNullByType(e.XValueType.STRING)}else{c.setString(m.getStringByKey("Value"))}}else if(e.XString.isEqual(d,"Bool")){if(I){c.setNullByType(e.XValueType.BOOLEAN)}else{c.setBoolean(m.getBooleanByKey("Value"))}}else if(e.XString.isEqual(d,"DateTime")){if(I){c.setNullByType(e.XValueType.DATE_TIME)}else{c.setDateTime(e.XDateTime.createDateTimeFromStringWithFlag(m.getStringByKey("Value"),false))}}else if(e.XString.isEqual(d,"Date")){if(I){c.setNullByType(e.XValueType.DATE)}else{c.setDate(e.QInARepoUtils.createDate(m.getStringByKey("Value")))}}else{t.addError(e.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null}var f=m.getStringByKey("Unit");if(e.XStringUtils.isNotNullAndNotEmpty(f)){c.setUnit(f)}var N=m.getStringByKey("Currency");if(e.XStringUtils.isNotNullAndNotEmpty(N)){c.setCurrency(N)}if(e.isNull(a)){a=c}else{a.add(c)}}}else{var v=n.getStructureByKey("Member");if(e.notNull(v)){var T=e.QFactory.createFormulaMember(o);var R=v.getStringByKey("Name");T.setMemberName(R);T.setDimensionName(v.getStringByKey("Dimension"));var E=v.getStringByKey("NameIs");if(e.XString.isEqual(E,"Booked")){T.setBooked()}else if(e.XString.isEqual(E,"Previous")){T.setPrevious()}if(e.isNull(a)){a=T}else{a.add(T)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,T,v)}else{var C=n.getStructureByKey("AttributeValue");if(e.notNull(C)){var Q=C.getStringByKey("Name");var M=e.QFactory.createFormulaAttributeWithName(o,Q);if(e.isNull(a)){a=M}else{a.add(M)}e.QInARepoMemberFormulaMeasure.importDimensionContext(o,a,C)}}}}}return a};e.QInARepoMemberFormulaMeasure.importDimensionContext=function(t,r,n){var i=n.getStructureByKey("DimensionContext");if(e.notNull(i)){var o=i.getStringByKey("DatasetId");var a=t.getOlapEnv().getSharedQueryManager(o);if(e.notNull(a)){var l=a.getQueryModel().getDimensionByName(i.getStringByKey("DimensionName"));r.setDimensionContext(l)}}};e.QInARepoMemberFormulaMeasure.exportIteration=function(t,r,n){var i=r.getIteration();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||i.getModCounter()>0){var o=n.putNewStructure("Iteration");o.putString("StartValueMember",i.getStartValueMemberName());var a=i.getIterationDimensions();var l=o.putNewList("IterationDimensions");var p=a.size();for(var s=0;s<p;s++){var u=a.get(s);var g=l.addNewStructure();g.putStringNotNullAndNotEmpty("Name",u.getDimensionName());g.putStringNotNullAndNotEmpty("PartitionLevel",u.getPartitionLevelName())}}};e.QInARepoMemberFormulaMeasure.exportInverseFormulas=function(t,r,n){var i=r.getInverseFormulaList();if(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||i.getModCounter()>0){var o=n.putNewList("InverseFormulas");var a=i.size();for(var l=0;l<a;l++){var p=e.PrFactory.createStructure();o.add(p);var s=i.get(l);var u=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,s.getInternalFormulaItem(),u,r);p.put("Formula",u);var g=s.getTarget();if(e.notNull(g)){var y=e.PrFactory.createStructure();p.put("Target",y);e.QInARepoMemberAbstract.exportFormulaItem(t,g,y,r.getContext())}var m=s.getCondition();if(e.notNull(m)){var c=e.PrFactory.createStructure();p.put("Condition",c);e.QInARepoMemberAbstract.exportFormulaItem(t,m,c,r)}}}};e.QInARepoMemberFormulaMeasure.prototype.getComponentType=function(){return e.MemberType.FORMULA};e.QInARepoMemberFormulaMeasure.prototype.newModelComponent=function(t,r,n,i){var o=null;if(e.isNull(n)||i.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){o=e.QFormulaMeasure._createFormulaMeasure(i,null);o.setParent(n)}return o};e.QInARepoMemberFormulaMeasure.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=i;var l=o.getQueryModel();if(e.isNull(a)){a=l.getMeasureDimension()}var p=n;var s=e.QInARepoMemberFormulaMeasure.getNameForImport(r,a);if(e.isNull(p)&&a.getModelCapabilities().supportsCustomMeasuresInMetadata()){p=a.getStructureMember(s)}if(e.isNull(p)){if(this.newComponentCreationAllowed(t,r)){p=e.QFormulaMeasure._createFormulaMeasure(o,a)}}else{p.setDimension(a)}if(e.notNull(p)){e.QInARepoMemberFormulaMeasure.importNameAndText(r,p,a);var u=r.getStructureByKey("Formula");e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,p,r);if(p.getMemberType()===e.MemberType.FORMULA){var g=e.QInARepoMemberFormulaMeasure.importFormulaMeasure(t,a,u,null,o);if(e.notNull(g)){p.setFormula(g)}var y=r.getStringByKey("FormulaType");if(e.XStringUtils.isNotNullAndNotEmpty(y)){p.setFormulaType(e.QFormulaType.lookup(y))}if(p.supportsCalculatedBeforeAggregation()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.hasStringByKey("ExecutionStep"))){p.setIsCalculatedBeforeAggregation(e.XString.isEqual("CalculationBeforeAggregation",r.getStringByKey("ExecutionStep")))}var m=r.getListByKey("InverseFormulas");if(e.XCollectionUtils.hasElements(m)){e.QInARepoMemberFormulaMeasure.importInverseFormulas(t,p,o,m)}var c=r.getStructureByKey("Iteration");if(e.XCollectionUtils.hasElements(c)){e.QInARepoMemberFormulaMeasure.importIteration(t,p,o,c)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("AutoSignFlipForRMOnly")){p.setAutoSignFlipRestrictedMeasureOnly(r.getBooleanByKeyExt("AutoSignFlipForRMOnly",false))}}}return p};e.QInARepoMemberFormulaMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());var a=e.PrFactory.createStructure();e.QInARepoMemberAbstract.exportFormulaItem(t,o.getFormula(),a,o);if(a.hasElements()){n.put("Formula",a)}if(o.getFormulaType()!==null){n.putString("FormulaType",o.getFormulaType().getName())}if(o.supportsCalculatedBeforeAggregation()&&(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_CALCULATE_BEFORE_AGGREGATION))){if(o.isCalculatedBeforeAggregation()){n.putString("ExecutionStep","CalculationBeforeAggregation")}else if(t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putString("ExecutionStep","CalculationAfterAggregation")}}if(e.XCollectionUtils.hasElements(o.getInverseFormulaList())){e.QInARepoMemberFormulaMeasure.exportInverseFormulas(t,o,n)}if(o.getIteration()!==null){e.QInARepoMemberFormulaMeasure.exportIteration(t,o,n)}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var l=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",l)}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var p=o.getPresentationSignReversal();if(e.notNull(p)){n.putBoolean("PresentationSignReversal",p.getBoolean())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){if(o.isAutoSignFlipRestrictedMeasureOnly()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){n.putBoolean("AutoSignFlipForRMOnly",o.isAutoSignFlipRestrictedMeasureOnly())}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberRestricted=function(){};e.QInARepoMemberRestricted.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRestricted.prototype._ff_c="QInARepoMemberRestricted";e.QInARepoMemberRestricted.prototype.getComponentType=function(){return e.MemberType.RESTRICTED_MEASURE};e.QInARepoMemberRestricted.prototype.newModelComponent=function(t,r,n,i){var o=null;if(e.isNull(n)||i.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){o=e.QRestrictedMeasure._createRestrictedMeasure(i,null);o.setParent(n)}return o};e.QInARepoMemberRestricted.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=i;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(l.getModelCapabilities().supportsCustomMeasuresInMetadata()){a=l.getStructureMember(p);if(e.notNull(a)&&a.getMemberType()!==e.MemberType.RESTRICTED_MEASURE){l.removeMeasureWithNoValidation(p);a=null}}if(e.isNull(a)){if(this.newComponentCreationAllowed(t,r)){a=l.addNewRestrictedMeasure(p,s)}}else{a.setDimension(l);a.setName(p);a.setText(s)}if(e.notNull(a)){e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);if(a.getMemberType()===e.MemberType.RESTRICTED_MEASURE){var u=a.getFilter();var g=r.getStructureByKey("InAFilterExpression");if(e.notNull(g)){var y=t.mode;t.mode=e.QModelFormat.INA_DATA;t.importFilterExpression(u,g,a,o);t.mode=y}else{var m=null;var c=r.getStructureByKey("Selection");if(e.notNull(c)){m=t.importComponent(null,c,null,u,o);u.setComplexRoot(m)}}var A=r.getStructureByKey("TimeOperation");if(e.notNull(A)){var S=A.getStringByKey("Name");var d=e.QTimeOperationFunction.lookup(A.getStringByKey("TimeOperationFunction"));var I=e.QTimeOperationGranularity.lookup(A.getStringByKey("TimeOperationGranularity"));var f=A.getIntegerByKey("TimeOperationPeriod");a.setTimeOperation(S,d,I,f);a.getTimeOperation().setForceMemberNavigationGeneration(A.getBooleanByKey("TimeOperationForceMemberNavGeneration"));a.getTimeOperation().setUseToDateFlatRangeSelection(A.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));a.getTimeOperation().setHierarchyLevelName(A.getStringByKey("LevelName"));var N=A.getStringByKey("TimePeriodOperationLevel");if(e.notNull(N)){a.getTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(N))}}var v=r.getBooleanByKey("FlattenDependentRestrictedMeasures");a.setFlattenSelection(v);if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||r.containsKey("DisableIgnoreExtDimOnFixedFilters")){a.setDisableIgnoreExternalDimensionOnFixedFilters(r.getBooleanByKeyExt("DisableIgnoreExtDimOnFixedFilters",false))}}}return a};e.QInARepoMemberRestricted.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());this.exportGenericMemberProperties(t,o,n);var a=o.getFilter().getFilterRootElement();if(e.notNull(a)&&(t.getMode()!==e.QModelFormat.INA_REPOSITORY_DELTA||o.getFilter().getModCounter()>0)){var l=t.exportComponent(null,a,null,i);n.put("Selection",l)}var p=o.getTimeOperation();if(e.notNull(p)){var s=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(s,p);n.put("TimeOperation",s)}var u=o.getAggregationType();e.QInARepoUtils.setNameIfNotNull(n,"Aggregation",u);n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()));n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var g=o.getPresentationSignReversal();if(e.notNull(g)){n.putBoolean("PresentationSignReversal",g.getBoolean())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_FLATTEN_DEPENDENT_RESTRICTED_MEASURES)){var y=o.isFlattenSelection();if(y||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("FlattenDependentRestrictedMeasures",y)}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){if(o.isDisableIgnoreExternalDimensionOnFixedFilters()||t.mode===e.QModelFormat.INA_REPOSITORY_DELTA&&o.hasPropertyChanged(e.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){n.putBoolean("DisableIgnoreExtDimOnFixedFilters",o.isDisableIgnoreExternalDimensionOnFixedFilters())}}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberRunningTotal=function(){};e.QInARepoMemberRunningTotal.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberRunningTotal.prototype._ff_c="QInARepoMemberRunningTotal";e.QInARepoMemberRunningTotal.prototype.getComponentType=function(){return e.MemberType.RUNNING_TOTAL};e.QInARepoMemberRunningTotal.prototype.newModelComponent=function(t,r,n,i){var o=e.QRunningTotalMeasure._createRunningTotalMeasure(i,null);o.setParent(n);return o};e.QInARepoMemberRunningTotal.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=i;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewRunningTotalMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));e.QInARepoMemberAbstract.importGenericMemberAbstractProperties(t,a,r);a.setBaseMeasureName(r.getStringByKey("BaseMeasureName"));if(r.containsKey("Operator")){a.setOperator(e.QInAConverter.lookupRunningTotalOperator("Operator"))}var u;if(r.containsKey("IterationDimensions")){a.clearIterationDimensions();u=r.getListByKey("PartitionLevel");for(var g=0;g<u.size();g++){var y=a.addNewIterationDimension();var m=u.getStructureAt(g);y.setDimensionName(m.getStringByKey("Name"));y.setPartitionLevelName(m.getStringByKey("PartitionLevel"))}}a.setAutoSignFlip(r.getBooleanByKey("AutoSignFlip"));return a};e.QInARepoMemberRunningTotal.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());n.putString("BaseMeasureName",o.getBaseMeasureName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_RUNNING_TOTAL_OPERATOR)){n.putString("Operator",e.QInAConverter.lookupRunningTotalOperatorInA(o.getOperator()))}var a;if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_ITERATION_DIMENSIONS)){a=n.putNewList("IterationDimensions");var l=o.getIterationDimensions();for(var p=0;p<l.size();p++){var s=a.addNewStructure();var u=l.get(p);s.putStringNotNullAndNotEmpty("Name",u.getDimensionName());s.putStringNotNullAndNotEmpty("PartitionLevel",u.getPartitionLevelName())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(o.isAutoSignFlip()||o.hasPropertyChanged(e.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&t.mode===e.QModelFormat.INA_REPOSITORY_DELTA){n.putBoolean("AutoSignFlip",o.isAutoSignFlip())}}if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_UNIT_TYPE)){n.putStringNotNull("UnitType",e.QInAConverter.lookupUnitTypeInA(o.getUnitType()))}n.putStringNotNull("UnitFixed",o.getUnitFixed());n.putStringNotNull("UnitName",o.getUnitName());n.putStringNotNull("UnitTextName",o.getUnitTextName());if(t.mode!==e.QModelFormat.INA_REPOSITORY_DELTA||o.hasPropertyChanged(e.QStructureMemberProperties.QY_DATA_TYPE)){n.putStringNotNull("DataType",e.QInAConverter.lookupValueTypeInA(o.getDataType()))}e.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,t,o,n);return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberVarianceMeasure=function(){};e.QInARepoMemberVarianceMeasure.prototype=new e.QInARepoMemberAbstract;e.QInARepoMemberVarianceMeasure.prototype._ff_c="QInARepoMemberVarianceMeasure";e.QInARepoMemberVarianceMeasure.prototype.getComponentType=function(){return e.MemberType.VARIANCE};e.QInARepoMemberVarianceMeasure.prototype.newModelComponent=function(t,r,n,i){var o=e.QVarianceMeasure._createVarianceMeasure(i,n);o.setParent(n);return o};e.QInARepoMemberVarianceMeasure.prototype.importVarianceMember=function(t,r){r.setNullHandlingType(e.VarianceNullHandlingType.lookup(t.getStringByKey("NullHandling")));r.setCalculationType(e.VarianceCalculationType.lookup(t.getStringByKey("CalculationType")));r.setBaseMeasure(t.getStringByKey("BaseMeasureName"));r.setReferenceMeasure(t.getStringByKey("ReferenceMeasureName"));if(t.containsKey("BaseIgnoreExternalDimensions")){var n=t.getListByKey("BaseIgnoreExternalDimensions");for(var i=0;i<n.size();i++){r.addBaseExternalDimensionToIgnore(n.getStringAt(i))}}if(t.containsKey("ReferenceIgnoreExternalDimensions")){var o=t.getListByKey("ReferenceIgnoreExternalDimensions");for(var a=0;a<o.size();a++){r.addReferenceExternalDimensionToIgnore(o.getStringAt(a))}}var l=t.getStructureByKey("BaseTimeOperation");if(e.notNull(l)){var p=l.getStringByKey("Name");var s=e.QTimeOperationFunction.lookup(l.getStringByKey("TimeOperationFunction"));var u=e.QTimeOperationGranularity.lookup(l.getStringByKey("TimeOperationGranularity"));var g=l.getIntegerByKey("TimeOperationPeriod");r.setBaseTimeOperation(p,s,u,g);r.getBaseTimeOperation().setForceMemberNavigationGeneration(l.getBooleanByKey("TimeOperationForceMemberNavGeneration"));r.getBaseTimeOperation().setUseToDateFlatRangeSelection(l.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));r.getBaseTimeOperation().setHierarchyLevelName(l.getStringByKey("LevelName"));var y=l.getStringByKey("TimePeriodOperationLevel");if(e.notNull(y)){r.getBaseTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(y))}}var m=t.getStructureByKey("ReferenceTimeOperation");if(e.notNull(m)){var c=m.getStringByKey("Name");var A=e.QTimeOperationFunction.lookup(m.getStringByKey("TimeOperationFunction"));var S=e.QTimeOperationGranularity.lookup(m.getStringByKey("TimeOperationGranularity"));var d=m.getIntegerByKey("TimeOperationPeriod");r.setReferenceTimeOperation(c,A,S,d);r.getReferenceTimeOperation().setForceMemberNavigationGeneration(m.getBooleanByKey("TimeOperationForceMemberNavGeneration"));r.getReferenceTimeOperation().setUseToDateFlatRangeSelection(m.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));r.getReferenceTimeOperation().setHierarchyLevelName(m.getStringByKey("LevelName"));var I=m.getStringByKey("TimePeriodOperationLevel");if(e.notNull(I)){r.getReferenceTimeOperation().setTimePeriodOperationLevel(e.QTimePeriodOperationLevel.lookup(I))}}};e.QInARepoMemberVarianceMeasure.prototype.importComponentWithStructure=function(t,r,n,i,o){var a=n;var l=i;var p=r.getStringByKey("Name");var s=r.getStringByKey("Description");if(e.isNull(a)){a=l.addNewVarianceMeasure(p,s)}else{a.setDimension(l);a.setName(p);a.setText(s)}var u=r.getBooleanByKey("FlattenBaseFilter");a.setFlattenBaseFilter(u);var g=r.getBooleanByKey("FlattenReferenceFilter");a.setFlattenReferenceFilter(g);this.importVarianceMember(r,a);this.importFilter(t,r,o,a.getBaseFilter(),"SelectionBase");this.importFilter(t,r,o,a.getReferenceFilter(),"SelectionReference");var y=a.getReferenceFilter();var m=null;var c=r.getStructureByKey("SelectionReference");if(e.notNull(c)){var A=c.getStructureByKey("Selection");m=t.importComponent(null,A,null,y,o)}y.setComplexRoot(m);return a};e.QInARepoMemberVarianceMeasure.prototype.importFilter=function(t,r,n,i,o){var a=null;var l=r.getStructureByKey(o);if(e.notNull(l)){var p=l.getStructureByKey("Selection");a=t.importComponent(null,p,null,i,n)}i.setComplexRoot(a)};e.QInARepoMemberVarianceMeasure.prototype.exportComponentWithStructure=function(t,r,n,i){var o=r;n.putString("Name",o.getName());n.putString("Description",o.getOriginalText());this.exportVarianceMember(n,o);this.exportGenericMemberProperties(t,o,n);this.exportFilter(t,n,i,o.getBaseFilter(),"SelectionBase");this.exportFilter(t,n,i,o.getReferenceFilter(),"SelectionReference");var a=o.isFlattenBaseFilter();if(a){n.putBoolean("FlattenBaseFilter",a)}var l=o.isFlattenReferenceFilter();if(l){n.putBoolean("FlattenReferenceFilter",l)}return e.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,t,r,n,i)};e.QInARepoMemberVarianceMeasure.prototype.exportVarianceMember=function(t,r){t.putString("BaseMeasureName",r.getBaseMeasure());t.putString("ReferenceMeasureName",r.getReferenceMeasure());e.QInARepoUtils.setNameIfNotNull(t,"CalculationType",r.getCalculationType());e.QInARepoUtils.setNameIfNotNull(t,"NullHandling",r.getNullHandlingType());var n=r.getBaseIgnoredExternalDimensions();if(n.hasElements()){var i=t.putNewList("BaseIgnoreExternalDimensions");i.addAllStrings(n)}var o=r.getReferenceIgnoredExternalDimensions();if(o.hasElements()){var a=t.putNewList("ReferenceIgnoreExternalDimensions");a.addAllStrings(o)}var l=r.getBaseTimeOperation();if(e.notNull(l)){var p=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(p,l);t.put("BaseTimeOperation",p)}var s=r.getReferenceTimeOperation();if(e.notNull(s)){var u=e.PrFactory.createStructure();e.QInARepoUtils.exportTimeOperation(u,s);t.put("ReferenceTimeOperation",u)}};e.QInARepoMemberVarianceMeasure.prototype.exportFilter=function(t,r,n,i,o){var a=i.getFilterRootElement();if(e.notNull(a)){var l=t.exportComponent(null,a,null,n);var p=e.PrFactory.createStructure();p.put("Selection",l);r.put(o,p)}};e.QInARepoVarHierNode=function(){};e.QInARepoVarHierNode.prototype=new e.QInARepoVarDimMember;e.QInARepoVarHierNode.prototype._ff_c="QInARepoVarHierNode";e.QInARepoVarHierNode.prototype.getComponentType=function(){return e.VariableType.HIERARCHY_NODE_VARIABLE};e.QInAExport=function(){};e.QInAExport.prototype=new e.QInA;e.QInAExport.prototype._ff_c="QInAExport";e.QInAImport=function(){};e.QInAImport.prototype=new e.QInA;e.QInAImport.prototype._ff_c="QInAImport";e.QInAImport.prototype.m_cacheKey=null;e.OlapSerializationModule=function(){};e.OlapSerializationModule.prototype=new e.DfModule;e.OlapSerializationModule.prototype._ff_c="OlapSerializationModule";e.OlapSerializationModule.s_module=null;e.OlapSerializationModule.getInstance=function(){if(e.isNull(e.OlapSerializationModule.s_module)){e.DfModule.checkInitialized(e.OlapImplModule.getInstance());e.OlapSerializationModule.s_module=e.DfModule.startExt(new e.OlapSerializationModule);e.DfModule.stopExt(e.OlapSerializationModule.s_module)}return e.OlapSerializationModule.s_module};e.OlapSerializationModule.prototype.getName=function(){return"ff4394.olap.serialization"};e.OlapSerializationModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff4394.olap.serialization.js.map