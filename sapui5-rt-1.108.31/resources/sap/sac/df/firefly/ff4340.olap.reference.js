/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff4310.olap.impl","sap/sac/df/firefly/ff2220.ui.tools"],function(e){"use strict";e.BindingUtils={getBindingSoureList:function(t,i){var r=t.getStructureByKey(e.VizDefConstants.K_CHART).getListByKey(e.VizDefConstants.K_BINDINGS);var n=e.XListOfString.create();for(var a=0;a<r.size();++a){var s=r.getStructureAt(a);if(e.XString.isEqual(s.getStringByKey(e.VizDefConstants.K_FEED),i)){var o=s.getListByKey(e.VizDefConstants.K_SOURCE);for(var l=0;l<o.size();++l){n.add(o.getStructureAt(l).getStringByKey(e.VizDefConstants.K_ID))}}}return n}};e.ChartRendererFactoryImpl=function(){};e.ChartRendererFactoryImpl.prototype=new e.XObject;e.ChartRendererFactoryImpl.prototype._ff_c="ChartRendererFactoryImpl";e.ChartRendererFactoryImpl.create=function(){return new e.ChartRendererFactoryImpl};e.ChartRendererFactoryImpl.prototype.newRenderer=function(t){if(t.isTypeOf(e.ProtocolBindingType.GOOGLE_CHART_PROTOCOL)){return e.RsGoogleChartRenderer.create()}if(t.isTypeOf(e.ProtocolBindingType.VIZ_FRAME_PROTOCOL)){return e.RsVizFrameRenderer.create()}if(t.isTypeOf(e.ProtocolBindingType.MICRO_CHART_PROTOCOL)){return e.RsMicroChartRenderer.create()}return e.RsHiChartRenderer.create()};e.RsHiChartRenderer=function(){};e.RsHiChartRenderer.prototype=new e.XObject;e.RsHiChartRenderer.prototype._ff_c="RsHiChartRenderer";e.RsHiChartRenderer.create=function(){return new e.RsHiChartRenderer};e.RsHiChartRenderer.getDoubleValueExtended=function(t,i,r){var n=r;var a=t.getStringByKeyExt(i,"0");if(t.getElementTypeByKey(i).isNumber()){n=t.getByKey(i).asNumber().getDouble()}else if(e.notNull(a)&&e.XString.containsString(a,"E")){var s=e.XDouble.convertFromString(e.XString.substring(a,0,e.XString.indexOf(a,"E")));var o=e.XInteger.convertFromString(e.XString.substring(a,e.XString.indexOf(a,"E"),e.XString.size(a)));n=s*e.XMath.pow(10,o)}else if(e.notNull(a)){try{n=e.XDouble.convertFromString(a)}catch(e){n=r}}return n};e.RsHiChartRenderer.prototype.render=function(t,i){if(e.notNull(i)){var r=e.RsHiChartRenderHelper.create(t,i);return r.getChartData()}return null};e.RsHiChartRenderer.prototype.renderVisualizationWithResultSet=function(t,i){if(e.notNull(i)){var r=e.RsHiChartRenderHelper.createWithVisualizationDefinition(t,i);var n=r.getChartData();if(!n.containsKey(e.VizDefConstants.K_TITLE)){var a=n.putNewStructure(e.VizDefConstants.K_TITLE);a.putString(e.VizDefConstants.K_TEXT,"")}return r.getChartData()}return null};e.RsHiChartUtils={create:function(){return new e.RsHiChartUtils},axisPloter:function(t,i,r,n){var a=true;var s=n;var o=false;var l="#FFFFFF";var u=t.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);if(t.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.BOOLEAN){s=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,n)}var p=t.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);if(e.notNull(u)){if(u.containsKey(e.VizDefConstants.K_SIZE)){var g=u.getIntegerByKeyExt(e.VizDefConstants.K_SIZE,0);i.putInteger(e.VizDefConstants.K_LINE_WIDTH,g)}a=u.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true)}if(e.notNull(p)){o=p.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)}var f=t.getBooleanByKeyExt(e.VizDefConstants.K_SHOW_LABEL_GRIDS,true);if(!e.XString.isEqual(e.VizDefConstants.K_HEATMAP,r)&&t.hasStringByKey(e.VizDefConstants.K_COLOR)&&a){l=t.getStringByKeyExt(e.VizDefConstants.K_COLOR,"#FFFFFF")}i.putString(e.VizDefConstants.K_LINE_COLOR,l);var c=t.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(c)){var C=c.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(C)){var _=C.getStringByKey(e.VizDefConstants.K_COLOR);var m=C.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);var S=C.getStringByKey(e.VizDefConstants.K_FONT_SIZE);var d=i.putNewStructure(e.VizDefConstants.K_LABELS);if(f){d.putInteger(e.VizDefConstants.K_X,-5);var T=d.putNewStructure(e.VizDefConstants.K_STYLE);T.putString(e.VizDefConstants.K_FONT_SIZE,S);T.putString(e.VizDefConstants.K_FILL,_);if(e.XString.isEqual(r,e.VizDefConstants.V_CHART_TYPE_BOXPLOT)){T.putString(e.VizDefConstants.K_COLOR,_)}T.putString(e.VizDefConstants.K_FONT_FAMILY,m)}d.putBoolean(e.VizDefConstants.K_ENABLED,s)}}if(!o){i.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);i.putString(e.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");i.putInteger(e.VizDefConstants.K_TICK_WIDTH,0)}return i},responsiveBuilder:function(t,i){var r=i.putNewStructure(e.VizDefConstants.K_RESPONSIVE);var n=r.putNewList(e.VizDefConstants.K_RULES);var a=n.addNewStructure();var s=a.putNewStructure(e.VizDefConstants.K_CONDITION);s.putInteger(e.VizDefConstants.K_MAX_HEIGHT,176);var o=a.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);var l=o.putNewStructure(e.VizDefConstants.K_LEGEND);l.putBoolean(e.VizDefConstants.K_ENABLED,false);var u=o.putNewStructure(e.VizDefConstants.K_Y_AXIS);var p=u.putNewStructure(e.VizDefConstants.K_LABELS);p.putInteger(e.VizDefConstants.K_ROTATION,344);p.putInteger(e.VizDefConstants.K_X,10);var g=n.addNewStructure();var f=g.putNewStructure(e.VizDefConstants.K_CONDITION);f.putInteger(e.VizDefConstants.K_MAX_WIDTH,359);f.putInteger(e.VizDefConstants.K_MIN_HEIGHT,70);var c=g.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);var C=c.putNewStructure(e.VizDefConstants.K_CHART);C.putBoolean(e.VizDefConstants.K_ANIMATION,false);var _=c.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var m=_.putNewStructure(e.VizDefConstants.K_SERIES);var S=m.putNewStructure(e.VizDefConstants.K_DATA_LABELS);var d=S.putNewStructure(e.VizDefConstants.K_STYLE);if(e.XString.isEqual(t,e.VizDefConstants.K_PIE)){d.putString(e.VizDefConstants.K_FONT_SIZE,"9px");S.putInteger(e.VizDefConstants.K_CONNECTOR_WIDTH,0);S.putInteger(e.VizDefConstants.K_DISTANCE,-30);S.putBoolean(e.VizDefConstants.K_INSIDE,true);C.putInteger(e.VizDefConstants.K_MARGIN_TOP,40)}else{C.putInteger(e.VizDefConstants.K_MARGIN_TOP,50);d.putString(e.VizDefConstants.K_FONT_SIZE,"9px")}var T=c.putNewStructure(e.VizDefConstants.K_TITLE);var y=T.putNewStructure(e.VizDefConstants.K_STYLE);y.putString(e.VizDefConstants.K_FONT_SIZE,"13px");y.putBoolean(e.VizDefConstants.K_FLOATING,true);var h=c.putNewStructure(e.VizDefConstants.K_SUBTITLE);h.putString(e.VizDefConstants.K_TEXT,"");var D=c.putNewStructure(e.VizDefConstants.K_X_AXIS);var R=D.putNewStructure(e.VizDefConstants.K_LABELS);var A=R.putNewStructure(e.VizDefConstants.K_STYLE);A.putString(e.VizDefConstants.K_FONT_SIZE,"10px");var V=c.putNewStructure(e.VizDefConstants.K_Y_AXIS);var E=V.putNewStructure(e.VizDefConstants.K_LABELS);var v=E.putNewStructure(e.VizDefConstants.K_STYLE);v.putString(e.VizDefConstants.K_FONT_SIZE,"10px");var N=n.addNewStructure();var z=N.putNewStructure(e.VizDefConstants.K_CONDITION);z.putInteger(e.VizDefConstants.K_MAX_WIDTH,176);var L=N.putNewStructure(e.VizDefConstants.K_CHART_OPTIONS);var I=L.putNewStructure(e.VizDefConstants.K_CHART);I.putBoolean(e.VizDefConstants.K_ANIMATION,false);var K=L.putNewStructure(e.VizDefConstants.K_LEGEND);K.putBoolean(e.VizDefConstants.K_ENABLED,false);K.putInteger(e.VizDefConstants.K_Y,25);var O=L.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var F=O.putNewStructure(e.VizDefConstants.K_SERIES);F.putInteger(e.VizDefConstants.K_MIN_SIZE,100);var b=F.putNewStructure(e.VizDefConstants.K_DATA_LABELS);b.putInteger(e.VizDefConstants.K_CONNECTOR_WIDTH,0);b.putInteger(e.VizDefConstants.K_DISTANCE,-25);var H=b.putNewStructure(e.VizDefConstants.K_STYLE);H.putString(e.VizDefConstants.K_FONT_SIZE,"8px");I.putInteger(e.VizDefConstants.K_MARGIN_TOP,40);var w=L.putNewStructure(e.VizDefConstants.K_TITLE);var X=w.putNewStructure(e.VizDefConstants.K_STYLE);X.putString(e.VizDefConstants.K_FONT_SIZE,"10px");var B=L.putNewStructure(e.VizDefConstants.K_SUBTITLE);B.putString(e.VizDefConstants.K_TEXT,"");var M=L.putNewStructure(e.VizDefConstants.K_X_AXIS);var x=M.putNewStructure(e.VizDefConstants.K_LABELS);var P=x.putNewStructure(e.VizDefConstants.K_STYLE);P.putString(e.VizDefConstants.K_FONT_SIZE,"9px");var U=L.putNewStructure(e.VizDefConstants.K_Y_AXIS);var G=U.putNewStructure(e.VizDefConstants.K_LABELS);var Y=G.putNewStructure(e.VizDefConstants.K_STYLE);Y.putString(e.VizDefConstants.K_FONT_SIZE,"9px")}};e.RsGoogleChartConfig={s_charts:null,staticSetup:function(){if(e.isNull(e.RsGoogleChartConfig.s_charts)){e.RsGoogleChartConfig.s_charts=e.XSimpleMap.create();e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.BAR,e.GoogleChartBar.create());e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.COLUMN,e.GoogleChartColumn.create());e.RsGoogleChartConfig.s_charts.put(e.SemanticBindingType.LINE,e.GoogleChartLine.create())}},createOptions:function(t){var i=e.RsGoogleChartConfig.s_charts.getByKey(e.RsGoogleChartConfig.getChartType(t));if(e.notNull(i)){return i.createOptions(t)}return e.PrFactory.createStructure()},createMetadata:function(t,i){var r=e.RsGoogleChartConfig.s_charts.getByKey(e.RsGoogleChartConfig.getChartType(t));if(e.notNull(r)){return r.createMetadata(i)}return e.PrFactory.createStructure()},getChartType:function(t){var i=t.getStructureByKey(e.VizDefConstants.K_CHART);var r=i.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(r,e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(r,e.VizDefConstants.V_STACKED_BAR)){return e.SemanticBindingType.BAR}if(e.XString.isEqual(r,e.VizDefConstants.V_CHART_TYPE_COLUMN)||e.XString.isEqual(r,e.VizDefConstants.V_STACKED_COLUMN)){return e.SemanticBindingType.COLUMN}if(e.XString.isEqual(r,e.VizDefConstants.V_TYPE_BARCOLUMN)){var n=i.getStructureByKey(e.VizDefConstants.K_PROPERTIES);var a=n.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(a)&&a.getBooleanByKeyExt(e.VizDefConstants.K_INVERTED,false)){return e.SemanticBindingType.BAR}return e.SemanticBindingType.COLUMN}if(e.XString.isEqual(r,e.VizDefConstants.K_LINE)){return e.SemanticBindingType.LINE}return null}};e.RsGoogleChartRenderer=function(){};e.RsGoogleChartRenderer.prototype=new e.XObject;e.RsGoogleChartRenderer.prototype._ff_c="RsGoogleChartRenderer";e.RsGoogleChartRenderer.create=function(){return new e.RsGoogleChartRenderer};e.RsGoogleChartRenderer.prototype.render=function(t,i){var r=e.PrFactory.createStructure();var n=i.getQueryModel().getVizManager().getVizDef();if(e.notNull(n)&&n.containsKey(e.VizDefConstants.K_CHART)&&i.getAvailableDataCellCount()>0){var a=i.getCursorRowsAxis();var s=i.getCursorColumnsAxis();var o=r.putNewStructure(e.GoogleConstants.K_DATA);var l=o.putNewList(e.GoogleConstants.K_COLS);var u=o.putNewList(e.GoogleConstants.K_ROWS);this.addHeaderForDimensionColumns(a,l);this.addHeaderForMeasureColumns(s,l);this.addRows(a,u,i);r.put(e.GoogleConstants.K_OPTIONS,e.RsGoogleChartConfig.createOptions(n));r.put(e.GoogleConstants.K_METADATA,e.RsGoogleChartConfig.createMetadata(n,l))}return r};e.RsGoogleChartRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsGoogleChartRenderer.prototype.addHeaderForDimensionColumns=function(t,i){t.setTupleCursorBeforeStart();t.nextTuple();for(var r=0;r<t.getTupleElementsCount();r++){t.nextTupleElement();t.nextFieldValue();var n=t.getField().getDimension();this.addHeader(i,n.getText(),e.GoogleConstants.V_TYPE_STRING)}};e.RsGoogleChartRenderer.prototype.addHeaderForMeasureColumns=function(t,i){t.setTupleCursorBeforeStart();while(t.hasNextTuple()){t.nextTuple();var r=e.XStringBuffer.create();while(t.hasNextTupleElement()){t.nextTupleElement();if(r.length()>0){r.append("/")}r.append(this.getMemberName(t))}this.addHeader(i,r.toString(),e.GoogleConstants.V_TYPE_NUMBER)}};e.RsGoogleChartRenderer.prototype.addHeader=function(t,i,r){var n=t.addNewStructure();n.putString(e.GoogleConstants.K_TYPE,r);n.putString(e.GoogleConstants.K_LABEL,i)};e.RsGoogleChartRenderer.prototype.addRows=function(t,i,r){var n=t.getTuplesCount();t.setTupleCursorBeforeStart();for(var a=0;a<n;a++){t.nextTuple();if(!this.isResultRow(t)){var s=i.addNewStructure();var o=s.putNewList(e.GoogleConstants.K_C);while(t.hasNextTupleElement()){t.nextTupleElement();this.addRowCell(o,e.XStringValue.create(this.getMemberName(t)))}for(var l=0;l<r.getDataColumns();l++){var u=r.getDataCell(l,a);this.addRowCell(o,this.getCellValue(u))}}}};e.RsGoogleChartRenderer.prototype.isResultRow=function(t){if(t.hasNextTupleElement()){t.nextTupleElement();if(t.getDimensionMemberType()===e.MemberType.RESULT){return true}t.setTupleElementCursorBeforeStart()}return false};e.RsGoogleChartRenderer.prototype.getMemberName=function(t){var i=null;while(t.hasNextFieldValue()){var r=t.nextFieldValue();if(e.isNull(i)||e.PresentationType.isTextPresentation(r.getField().getPresentationType())){i=r.getValue().getStringRepresentation()}}return i};e.RsGoogleChartRenderer.prototype.getCellValue=function(t){var i=t.getValueException();if(i===e.ValueException.NULL_VALUE||i===e.ValueException.UNDEFINED){return e.XStringValue.create(null)}if(i===e.ValueException.ZERO){return e.XIntegerValue.create(0)}return t.getXValue()};e.RsGoogleChartRenderer.prototype.addRowCell=function(t,i){var r=t.addNewStructure();var n=i.getValueType();if(n===e.XValueType.STRING){r.putString(e.GoogleConstants.K_V,i.getStringRepresentation())}else if(n===e.XValueType.INTEGER){r.putInteger(e.GoogleConstants.K_V,i.getInteger())}else if(n===e.XValueType.DOUBLE){r.putDouble(e.GoogleConstants.K_V,i.getDouble())}else if(n===e.XValueType.LONG){r.putLong(e.GoogleConstants.K_V,i.getLong())}else if(n===e.XValueType.BOOLEAN){r.putBoolean(e.GoogleConstants.K_V,i.getBoolean())}};e.GoogleChart=function(){};e.GoogleChart.prototype=new e.XObject;e.GoogleChart.prototype._ff_c="GoogleChart";e.GoogleChart.LEGEND_MAX_LINES=3;e.GoogleChart.WIDTH=600;e.GoogleChart.HEIGHT=500;e.GoogleChart.HEIGHT_CHART_AREA=380;e.GoogleChart.ANIMATION_DURATION=750;e.GoogleChart.prototype.createOptions=function(t){var i=e.PrFactory.createStructure();var r=t.getStructureByKey(e.VizDefConstants.K_CHART);var n=r.getStructureByKey(e.VizDefConstants.K_PROPERTIES);i.putString(e.GoogleConstants.K_TITLE,r.getStringByKeyExt(e.VizDefConstants.K_TITLE,""));i.putNewStructure(e.GoogleConstants.K_SERIES);var a=n.getStructureByKey(e.VizDefConstants.K_LEGEND);var s=a.getStructureByKey(e.VizDefConstants.K_LABEL);var o=s.getStructureByKey(e.VizDefConstants.K_STYLE);var l=n.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);var u=l.getStructureByKey(e.VizDefConstants.K_LAYOUT);var p=u.getStringByKeyExt(e.VizDefConstants.K_POSITION,e.GoogleConstants.V_POSITION_NONE);var g=i.putNewStructure(e.GoogleConstants.K_LEGEND);this.setTextStyle(g,o);g.putString(e.GoogleConstants.K_POSITION,p);g.putString(e.GoogleConstants.K_ALIGNMENT,e.GoogleConstants.V_CENTER);g.putInteger(e.GoogleConstants.K_MAX_LINES,e.GoogleChart.LEGEND_MAX_LINES);i.putInteger(e.GoogleConstants.K_WIDTH,e.GoogleChart.WIDTH);i.putInteger(e.GoogleConstants.K_HEIGHT,e.GoogleChart.HEIGHT);var f=i.putNewStructure(e.GoogleConstants.K_CHART_AREA);f.putInteger(e.GoogleConstants.K_HEIGHT,e.GoogleChart.HEIGHT_CHART_AREA);var c=i.putNewStructure(e.GoogleConstants.K_ANIMATION);c.putBoolean(e.GoogleConstants.K_STARTUP,true);c.putInteger(e.GoogleConstants.K_DURATION,e.GoogleChart.ANIMATION_DURATION);c.putString(e.GoogleConstants.K_EASING,e.GoogleConstants.V_EASING_LINEAR);var C=n.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);var _=C.getStructureByKey(e.VizDefConstants.K_STACK_COLUMN_LABEL);var m=_.getStructureByKey(e.VizDefConstants.K_STYLE);var S=i.putNewStructure(e.GoogleConstants.K_ROLE_ANNOTATIONS);S.putBoolean(e.GoogleConstants.K_HIGH_CONTRAST,true);this.setTextStyle(S,m);var d=S.putNewStructure(e.GoogleConstants.K_STEM);d.putInteger(e.GoogleConstants.K_LENGTH,2);var T=i.putNewStructure(e.GoogleConstants.K_TOOLTIP);this.setTextStyle(T,m);this.addChartSpecificOptions(i,t);return i};e.GoogleChart.prototype.createMetadata=function(t){var i=e.PrFactory.createStructure();i.putString(e.GoogleConstants.K_CHART_TYPE,this.getChartName());var r=i.putNewList(e.GoogleConstants.K_COLS);for(var n=0;n<t.size();n++){r.addInteger(n);var a=t.getStructureAt(n).getStringByKey(e.GoogleConstants.K_TYPE);if(e.XString.isEqual(a,e.GoogleConstants.K_NUMBER)){var s=r.addNewStructure();s.putString(e.GoogleConstants.K_ROLE,e.GoogleConstants.V_ROLE_ANNOTATION);s.putString(e.GoogleConstants.K_TYPE,e.GoogleConstants.V_TYPE_STRING);s.putString(e.GoogleConstants.K_CALC,e.GoogleConstants.V_CALC_STRINGIFY);s.putInteger(e.GoogleConstants.K_SOURCE_COLUMN,n)}}return i};e.GoogleChart.prototype.setTextStyle=function(t,i){var r=t.putNewStructure(e.GoogleConstants.K_TEXT_STYLE);r.putString(e.GoogleConstants.K_FONT_NAME,i.getStringByKeyExt(e.VizDefConstants.K_FONT_FAMILY,""));r.putString(e.GoogleConstants.K_COLOR,i.getStringByKeyExt(e.VizDefConstants.K_COLOR,"rgb(0,0,0)"));var n=i.getStringByKey(e.VizDefConstants.K_FONT_SIZE);if(e.notNull(n)){r.putString(e.GoogleConstants.K_FONT_SIZE,e.XString.replace(n,"px",""))}var a=i.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);if(e.XString.isEqual(a,e.VizDefConstants.V_FONT_WEIGHT_BOLD)){r.putBoolean(e.GoogleConstants.K_BOLD,true)}};e.GoogleChart.prototype.setAxisStyle=function(t,i,r,n){var a=i.getStructureByKey(e.VizDefConstants.K_CHART);var s=a.getStructureByKey(e.VizDefConstants.K_PROPERTIES);var o=s.getStructureByKey(r);var l=o.getStructureByKey(e.VizDefConstants.K_LABEL);var u=this.getOppositeAxis(r,s);this.setTextStyle(t,l.getStructureByKey(e.VizDefConstants.K_STYLE));if(!n){t.putString(e.GoogleConstants.K_TEXT_POSITION,e.GoogleConstants.V_POSITION_NONE)}var p=u.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);if(e.notNull(p)&&p.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true)){t.putInteger(e.GoogleConstants.K_BASELINE,0)}var g=this.getAxisReferenceLines(i,r);if(e.notNull(g)){var f=t.putNewList(e.GoogleConstants.K_TICKS);for(var c=0;c<g.size();c++){f.addString(g.getStructureAt(c).getStringByKey(e.VizDefConstants.K_VALUE))}}else if(!this.isTicksVisible(u)){t.putNewList(e.GoogleConstants.K_TICKS)}};e.GoogleChart.prototype.getOppositeAxis=function(t,i){if(e.XString.isEqual(t,e.VizDefConstants.K_CATEGORY_AXIS)){return i.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS)}return i.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS)};e.GoogleChart.prototype.getAxisReferenceLines=function(t,i){var r=t.getStructureByKey(e.VizDefConstants.K_ANALYTIC_OBJECTS);var n=r.getListByKey(e.VizDefConstants.K_REFERENCELINES);if(e.notNull(n)){for(var a=0;a<n.size();a++){var s=n.getStructureAt(a);if(e.XString.isEqual(s.getStringByKey(e.VizDefConstants.K_FEED),i)){var o=s.getListByKey(e.VizDefConstants.K_MARKERS);if(!e.PrUtils.isListEmpty(o)){return o}}}}return null};e.GoogleChart.prototype.isTicksVisible=function(t){var i=t.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);return e.notNull(i)&&i.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)};e.RsHiChartRenderHelper=function(){};e.RsHiChartRenderHelper.prototype=new e.XObject;e.RsHiChartRenderHelper.prototype._ff_c="RsHiChartRenderHelper";e.RsHiChartRenderHelper.createWithVisualizationDefinition=function(t,i){var r=null;var n=t.getChartSetting();var a=e.ChartType.BAR_COLUMN;var s=e.ChartOrientation.HORIZONTAL;var o=e.ChartType.NONE;var l=e.ChartStackingType.NONE;if(e.notNull(n)){a=n.getChartType();if(a===e.ChartType.BAR_COLUMN&&n.getChartType2()!==null){o=n.getChartType2()}if(n.getChartOrientation()!==null){s=n.getChartOrientation()}l=n.getChartStackingType()}if(e.notNull(i)){var u=null;var p=null;var g=false;var f="0%";var c=null;if(a===e.ChartType.VARIABLE_PIE||a===e.ChartType.VARI_WIDE){c=e.VizDefConstants.V_NORMAL}if(l===e.ChartStackingType.NORMAL){c=e.VizDefConstants.V_NORMAL}else if(l===e.ChartStackingType.PERCENT){c=e.VizDefConstants.V_PERCENT}if(a!==e.ChartType.BAR_COLUMN&&a!==e.ChartType.LINE&&a!==e.ChartType.AREA&&a!==e.ChartType.VARI_WIDE&&a!==e.ChartType.VARIABLE_PIE){c=null}u=e.RsHiChartRenderHelper.unmapChartType(a,s);if((a===e.ChartType.LINE||a===e.ChartType.AREA||a===e.ChartType.POINT||a===e.ChartType.BAR_COLUMN)&&(o===e.ChartType.LINE||o===e.ChartType.AREA||o===e.ChartType.POINT||o===e.ChartType.BAR_COLUMN)){p=e.RsHiChartRenderHelper.unmapChartType(o,s)}g=e.RsHiChartRenderHelper.checkChartTypePolar(a);var C=s===e.ChartOrientation.HORIZONTAL;var _=o!==e.ChartType.NONE;var m=a===e.ChartType.BAR_COLUMN&&s===e.ChartOrientation.VERTICAL;var S=a===e.ChartType.BELL_CURVE;var d=a===e.ChartType.LINE||a===e.ChartType.TIME_SERIES;var T=a===e.ChartType.TIME_SERIES;var y=a===e.ChartType.BAR_COLUMN&&s===e.ChartOrientation.HORIZONTAL;var h=a===e.ChartType.SPLINE;var D=a===e.ChartType.AREA;var R=a===e.ChartType.PIE||a===e.ChartType.DOUGHNUT;var A=a===e.ChartType.WORD_CLOUD;var V=a===e.ChartType.VARIABLE_PIE;var E=a===e.ChartType.VARI_WIDE;var v=a===e.ChartType.SCATTER_PLOT;var N=a===e.ChartType.BUBBLE;var z=a===e.ChartType.PACKED_BUBBLE;var L=a===e.ChartType.HEAT_MAP;var I=a===e.ChartType.TREE_MAP;var K=a===e.ChartType.BOX_PLOT;var O=a===e.ChartType.METRIC;if(d||y||h||S||m||D||_){if(T){r=new e.RsHiChartTimeSeriesHelper}else{r=new e.RsHiChartCategorialSeriesHelper}}else if(A){r=new e.RsHiChartWordcloudHelper}else if(R||V||A){r=new e.RsHiChartPieHelper}else if(K){r=new e.RsHiChartBoxplotHelper}else if(N||v){r=new e.RsHiChartCorrelationHelper}else if(L){r=new e.RsHiChartHeatmapHelper}else if(I){r=new e.RsHiChartTreemapHelper}else if(O){r=new e.RsHiChartMetricHelper}else if(E){r=new e.RsHiChartMarimekkoHelper}else if(z){r=new e.RsHiChartClusterBubbleHelper}else{r=new e.RsHiChartUnsupportedHelper}r.setupBase(null,null,t,i,u,p,c,f,g,_,C)}return r};e.RsHiChartRenderHelper.checkChartTypePolar=function(t){return t===e.ChartType.RADAR||t===e.ChartType.PIE||t===e.ChartType.VARIABLE_PIE||t===e.ChartType.DOUGHNUT};e.RsHiChartRenderHelper.unmapChartType=function(t,i){var r=null;if(t===e.ChartType.BAR_COLUMN&&i===e.ChartOrientation.HORIZONTAL){r=e.VizDefConstants.V_CHART_TYPE_BAR}else if(t===e.ChartType.BAR_COLUMN&&i===e.ChartOrientation.VERTICAL){r=e.VizDefConstants.V_CHART_TYPE_COLUMN}else if(t===e.ChartType.VARI_WIDE){r=e.VizDefConstants.K_VARIWIDE}else if(t===e.ChartType.DOUGHNUT||t===e.ChartType.PIE){r=e.VizDefConstants.K_PIE}else if(t===e.ChartType.SCATTER_PLOT){r=e.VizDefConstants.K_SCATTER}else if(t===e.ChartType.BUBBLE){r=e.VizDefConstants.V_CHART_TYPE_BUBBLE}else if(t===e.ChartType.RADAR){r=e.VizDefConstants.K_LINE}else if(t===e.ChartType.METRIC){r=e.VizDefConstants.K_SOLID_GAUGE}else if(t===e.ChartType.AREA){r=e.VizDefConstants.K_AREA}else if(t===e.ChartType.BOX_PLOT){r=e.VizDefConstants.V_CHART_TYPE_BOXPLOT}else if(t===e.ChartType.TIME_SERIES){r=e.VizDefConstants.K_LINE}else if(t===e.ChartType.LINE){r=e.VizDefConstants.K_LINE}else if(t===e.ChartType.PACKED_BUBBLE){r=e.VizDefConstants.K_PACKED_BUBBLE}else if(t===e.ChartType.WORD_CLOUD){r=e.VizDefConstants.K_WORDCLOUD}else if(t===e.ChartType.BELL_CURVE){r=e.VizDefConstants.V_CHART_TYPE_BELLCURVE}else if(t===e.ChartType.SPLINE){r=e.VizDefConstants.K_SPLINE}else if(t===e.ChartType.VARIABLE_PIE){r=e.VizDefConstants.K_VARIPIE}else if(t===e.ChartType.HEAT_MAP){r=e.VizDefConstants.K_HEATMAP}else if(t===e.ChartType.TREE_MAP){r=e.VizDefConstants.K_TREEMAP}else if(t===e.ChartType.BOX_PLOT){r=e.VizDefConstants.V_CHART_TYPE_BOXPLOT}return r};e.RsHiChartRenderHelper.create=function(t,i){var r=null;var n=null;if(e.notNull(i)){var a=null;var s=i.getQueryModel().getVizManager().getVizDef();var o=i.getQueryModel().getVizManager().getGlobalDef();var l=e.XString.toLowerCase(t.getName());var u=null;var p=false;var g=false;var f="0%";var c=null;if(e.XString.isEqual(l,e.VizDefConstants.K_COMB_BCL)){l=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE}else if(e.XString.isEqual(l,e.VizDefConstants.K_RADAR)){l=e.VizDefConstants.K_LINE;p=true}var C=false;if(e.notNull(s)){var _=s.getStructureByKey(e.VizDefConstants.K_CHART);n=s.getStructureByKey(e.VizDefConstants.K_USER_PREFERENCES);if(e.notNull(_)){a=_.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(a,e.VizDefConstants.V_STACKED_BAR)){C=true}}var m;var S=_.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(S)){m=S.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(m)){if(m.containsKey(e.VizDefConstants.K_INVERTED)){C=m.getBooleanByKey(e.VizDefConstants.K_INVERTED)}if(m.containsKey(e.VizDefConstants.K_ORIENTATION)){C=e.XString.isEqual(m.getStringByKey(e.VizDefConstants.K_ORIENTATION),e.VizDefConstants.V_HORIZONTAL)}c=m.getStringByKey(e.VizDefConstants.K_FULL_STACKING)}}if(e.notNull(n)){m=n.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(m)){if(m.containsKey(e.VizDefConstants.K_INVERTED)){C=m.getBooleanByKey(e.VizDefConstants.K_INVERTED)}if(m.containsKey(e.VizDefConstants.K_ORIENTATION)){C=e.XString.isEqual(m.getStringByKey(e.VizDefConstants.K_ORIENTATION),e.VizDefConstants.V_HORIZONTAL)}if(m.containsKey(e.VizDefConstants.K_FULL_STACKING)){c=m.getStringByKey(e.VizDefConstants.K_FULL_STACKING)}}}if(e.XString.isEqual(a,e.VizDefConstants.K_MARIMEKKO)){l=e.VizDefConstants.K_VARIWIDE;c=e.VizDefConstants.V_NORMAL;C=false}else if(e.XString.isEqual(a,e.VizDefConstants.K_BAR_COLUMN)){c=null;if(!C){l=e.VizDefConstants.V_CHART_TYPE_COLUMN}else{l=e.VizDefConstants.V_CHART_TYPE_BAR}}else if(e.XString.isEqual(a,e.VizDefConstants.V_TYPE_CHART_DONUT)){c=null;C=false;l=e.VizDefConstants.K_PIE;f="50%"}else if(e.XString.isEqual(a,e.VizDefConstants.K_SCATTER_PLOT)){c=null;C=false;l=e.VizDefConstants.K_SCATTER}else if(e.XString.isEqual(a,e.VizDefConstants.K_RADAR)){c=null;C=false;l=e.VizDefConstants.K_LINE;p=true}else if(e.XString.isEqual(a,e.VizDefConstants.K_METRIC)){c=null;C=false;l=e.VizDefConstants.K_SOLID_GAUGE}else if(e.XString.isEqual(a,e.VizDefConstants.K_AREA)){C=false;c=e.VizDefConstants.V_NORMAL;l=e.VizDefConstants.K_AREA}else if(e.XString.isEqual(a,e.VizDefConstants.K_STACKED_BAR)||e.XString.isEqual(a,e.VizDefConstants.K_STACKED_COLUMN)){if(e.isNull(c)){c=e.VizDefConstants.V_NORMAL}if(e.XString.isEqual(a,e.VizDefConstants.K_STACKED_COLUMN)&&!C){l=e.VizDefConstants.V_CHART_TYPE_COLUMN}else if(e.XString.isEqual(a,e.VizDefConstants.K_STACKED_BAR)&&C){l=e.VizDefConstants.V_CHART_TYPE_BAR}else{l=e.VizDefConstants.V_CHART_TYPE_COLUMN}}else if(e.XString.isEqual(a,e.VizDefConstants.K_COMB_STACKED_BCL)){l=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE;c=e.VizDefConstants.V_NORMAL}else if(e.XString.isEqual(a,e.VizDefConstants.K_COMB_BCL)){l=e.VizDefConstants.V_CHART_TYPE_COLUMN;u=e.VizDefConstants.K_LINE;c=null}else if(e.XString.isEqual(a,e.VizDefConstants.V_CHART_TYPE_BOXPLOT)){l=e.VizDefConstants.V_CHART_TYPE_BOXPLOT;c=null;C=false}else if(e.XString.isEqual(a,e.VizDefConstants.K_TIME_SERIES)){g=true;l=e.VizDefConstants.K_LINE;c=null;C=false}else if(e.XString.isEqual(a,e.VizDefConstants.K_CLUSTER_BUBBLE)){l=e.VizDefConstants.K_PACKED_BUBBLE;c=null;C=false}else{l=e.XString.toLowerCase(s.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_TYPE));c=null;C=false}}var d=!e.XString.isEqual(null,u);var T=e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_COLUMN);var y=e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BELLCURVE);var h=e.XString.isEqual(l,e.VizDefConstants.K_LINE);var D=e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BAR);var R=e.XString.isEqual(l,e.VizDefConstants.K_SPLINE);var A=e.XString.isEqual(l,e.VizDefConstants.K_AREA);var V=e.XString.isEqual(l,e.VizDefConstants.K_PIE);var E=e.XString.isEqual(l,e.VizDefConstants.K_WORDCLOUD);var v=e.XString.isEqual(l,e.VizDefConstants.K_VARIPIE);var N=e.XString.isEqual(l,e.VizDefConstants.K_VARIWIDE);var z=e.XString.isEqual(l,e.VizDefConstants.K_SCATTER);var L=e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BUBBLE);var I=e.XString.isEqual(l,e.VizDefConstants.K_PACKED_BUBBLE);var K=e.XString.isEqual(l,e.VizDefConstants.K_HEATMAP);var O=e.XString.isEqual(l,e.VizDefConstants.K_TREEMAP);var F=e.XString.isEqual(l,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);var b=e.XString.isEqual(l,e.VizDefConstants.K_SOLID_GAUGE);if(h||D||R||y||T||A||d){if(g){r=new e.RsHiChartTimeSeriesHelper}else{r=new e.RsHiChartCategorialSeriesHelper}}else if(E){r=new e.RsHiChartWordcloudHelper}else if(V||v||E){r=new e.RsHiChartPieHelper}else if(F){r=new e.RsHiChartBoxplotHelper}else if(L||z){r=new e.RsHiChartCorrelationHelper}else if(K){r=new e.RsHiChartHeatmapHelper}else if(O){r=new e.RsHiChartTreemapHelper}else if(b){r=new e.RsHiChartMetricHelper}else if(N){r=new e.RsHiChartMarimekkoHelper}else if(I){r=new e.RsHiChartClusterBubbleHelper}else{r=new e.RsHiChartUnsupportedHelper}r.setupBase(s,o,null,i,l,u,c,f,p,d,C);if(e.notNull(n)){e.RsHiChartVizUserPrefrence.userPrefrence(r.getChartData(),n,l)}}return r};e.RsHiChartRenderHelper.prototype.m_vizDef=null;e.RsHiChartRenderHelper.prototype.m_globalDef=null;e.RsHiChartRenderHelper.prototype.m_chartType=null;e.RsHiChartRenderHelper.prototype.m_polar=false;e.RsHiChartRenderHelper.prototype.m_innerRadius=null;e.RsHiChartRenderHelper.prototype.m_theChartData=null;e.RsHiChartRenderHelper.prototype.m_inverted=false;e.RsHiChartRenderHelper.prototype.m_stackingType=null;e.RsHiChartRenderHelper.prototype.m_showLegend=false;e.RsHiChartRenderHelper.prototype.m_colors=null;e.RsHiChartRenderHelper.prototype.m_colorIndex=0;e.RsHiChartRenderHelper.prototype.getStackingType=function(){return this.m_stackingType};e.RsHiChartRenderHelper.prototype.isInverted=function(){return this.m_inverted};e.RsHiChartRenderHelper.prototype.getVizDef=function(){return this.m_vizDef};e.RsHiChartRenderHelper.prototype.isPolar=function(){return this.m_polar};e.RsHiChartRenderHelper.prototype.getGlobalDef=function(){return this.m_globalDef};e.RsHiChartRenderHelper.prototype.getChartData=function(){return this.m_theChartData};e.RsHiChartRenderHelper.prototype.getChartType=function(){return this.m_chartType};e.RsHiChartRenderHelper.prototype.isUnsupported=function(){return false};e.RsHiChartRenderHelper.prototype.isResponsive=function(){return true};e.RsHiChartRenderHelper.prototype.getInnerRadius=function(){return this.m_innerRadius};e.RsHiChartRenderHelper.prototype.m_secondChart=null;e.RsHiChartRenderHelper.prototype.getSecondChart=function(){return this.m_secondChart};e.RsHiChartRenderHelper.prototype.setupBase=function(t,i,r,n,a,s,o,l,u,p,g){this.m_polar=u;this.m_chartType=a;this.m_secondChart=s;this.m_innerRadius=l;this.m_vizDef=t;this.m_globalDef=i;this.m_theChartData=e.PrFactory.createStructure();this.m_inverted=g;this.m_stackingType=o;this.m_colorIndex=-1;var f=this.m_theChartData.putNewStructure(e.VizDefConstants.K_CHART);if(this.m_inverted&&!e.XString.isEqual(this.m_chartType,e.VizDefConstants.V_CHART_TYPE_BAR)){f.putBoolean(e.VizDefConstants.K_INVERTED,true)}f.putBoolean(e.VizDefConstants.K_POLAR,u);f.putString(e.VizDefConstants.K_TYPE,a);f.putBoolean(e.VizDefConstants.K_ANIMATION,false);var c=this.m_theChartData.putNewStructure(e.VizDefConstants.K_LANG);c.putString(e.VizDefConstants.K_DECIMAL_POINT,",");c.putString(e.VizDefConstants.K_THOUSANDS_SEP,".");var C="rgba(0,0,0,0)";f.putString(e.VizDefConstants.K_BACKGROUND_COLOR,C);if(e.notNull(t)){C=t.getStringByKey(e.VizDefConstants.K_BBACKGROUND_COLOR);if(e.notNull(C)){if(e.XString.size(C)>0){f.putString(e.VizDefConstants.K_BACKGROUND_COLOR,C)}}}var _=f.putNewStructure(e.VizDefConstants.K_STYLE);_.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");var m=this.m_theChartData.putNewStructure(e.VizDefConstants.K_BOOST);var S=this.m_theChartData.putNewStructure(e.VizDefConstants.K_CREDITS);S.putBoolean(e.VizDefConstants.K_ENABLED,false);m.putBoolean(e.VizDefConstants.K_USER_GPU_TRANSLATIONS,true);if(this.isUnsupported()){c.putString(e.VizDefConstants.K_NO_DATA,"Chart not supported ");this.getChartData().putBoolean("fullscreenEnabled",false);return}if(n.hasErrors()){c.putString(e.VizDefConstants.K_NO_DATA,"Olap query returned with errors ");this.getChartData().putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);return}e.RsHiChartVizUtils.vizProcessor(t,_,this.m_theChartData,a);if(this.isResponsive()){e.RsHiChartUtils.responsiveBuilder(a,this.m_theChartData)}var d=null;var T=null;if(e.notNull(t)){d=e.RsVizAxisExtractor.extractCustomFormatting(t,i);T=t.getStructureByKey("feedMembers")}if(e.isNull(T)&&e.notNull(r)){T=e.RsVizAxisExtractor.getFeedMembersFromVisualizationDefinition(n,r)}if(e.isNull(T)){T=e.RsVizAxisExtractor.guessFeedMembers(n,a,p)}var y=e.RsVizAxisExtractor.getTuplesFromColumnAxis(n,T,d);var h=e.RsVizAxisExtractor.getTuplesFromRowAxis(n,T,d);this.initializeColorList();this.prepareRendering();this.readResultSetData(y,h,n);this.reiterateResultSet(y,h,n);this.addColorList();e.RsHiChartVizUtils.addColorGradient(i,t,this.m_theChartData);e.RsHiChartVizUtils.checkShowLegend(t,this.m_theChartData,a,this.isShowLegend());this.finishRendering()};e.RsHiChartRenderHelper.prototype.addColorList=function(){var t=this.m_theChartData.putNewList(e.VizDefConstants.K_COLORS);for(var i=0;i<this.m_colors.size();i++){t.addString(this.m_colors.get(i))}};e.RsHiChartRenderHelper.prototype.getCurrentColor=function(){return this.getColorAt(this.m_colorIndex)};e.RsHiChartRenderHelper.prototype.getColorAt=function(e){if(e>0&&this.m_colors.size()>e){return this.m_colors.get(e)}return null};e.RsHiChartRenderHelper.prototype.initializeColorList=function(){this.m_colors=e.XListOfString.create();var t=e.XListOfString.create();if(e.notNull(this.m_vizDef)){var i=this.m_vizDef.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);var r=e.XHashSetOfString.create();var n=this.m_globalDef.getStructureByKey(e.VizDefConstants.K_COLOR_SYNC);var a=e.XStringBuffer.create();var s=this.m_vizDef.getStructureByKey(e.VizDefConstants.K_CHART).getListByKey(e.VizDefConstants.K_BINDINGS);for(var o=0;o<s.size();++o){var l=s.getStructureAt(o);if(e.XString.isEqual(l.getStringByKey(e.VizDefConstants.K_FEED),e.VizDefConstants.K_COLOR)){var u=l.getListByKey(e.VizDefConstants.K_SOURCE);if(u.size()>0){for(var p=0;p<u.size();++p){if(u.getStructureAt(p).hasStringByKey(e.VizDefConstants.K_ID)){if(a.length()!==0){a.append("/")}var g=u.getStructureAt(p);if(g.containsKey(e.VizDefConstants.K_DIMENSION)){a.append(g.getStringByKey(e.VizDefConstants.K_DIMENSION))}else{a.append(g.getStringByKey(e.VizDefConstants.K_ID))}}}}}}if(!this.m_vizDef.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.XStringUtils.isNotNullAndNotEmpty(a.toString())&&e.XCollectionUtils.hasElements(n)){var f=n.getStructureByKey(a.toString());if(e.notNull(f)){var c=f.getListByKey(e.VizDefConstants.K_COLORS);for(var C=0;C<c.size();++C){t.add(c.getStringAt(C))}}}}if(e.XCollectionUtils.hasElements(i)){var _=i.getListByKey(e.VizDefConstants.K_PALETTE_COLORS);if(e.notNull(_)){for(var m=0;m<_.size();m++){t.add(_.getStringAt(m))}}}if(t.size()<5&&e.XCollectionUtils.hasElements(n)){var S=n.getKeysAsReadOnlyListOfStringSorted();for(var d=0;d<S.size();d++){var T=S.get(d);if(!e.XString.isEqual(T,a.toString())){var y=n.getStructureByKey(T);if(e.notNull(y)){var h=y.getListByKey(e.VizDefConstants.K_COLORS);for(var D=0;D<h.size();++D){t.add(h.getStringAt(D))}}}}}if(t.size()<5){t.add(e.VizDefConstants.V_COLOR_1);t.add(e.VizDefConstants.V_COLOR_2);t.add(e.VizDefConstants.V_COLOR_3);t.add(e.VizDefConstants.V_COLOR_4);t.add(e.VizDefConstants.V_COLOR_5);t.add(e.VizDefConstants.V_COLOR_6);t.add(e.VizDefConstants.V_COLOR_7);t.add(e.VizDefConstants.V_COLOR_8);t.add(e.VizDefConstants.V_COLOR_9);t.add(e.VizDefConstants.V_COLOR_10);t.add(e.VizDefConstants.V_COLOR_11);t.add(e.VizDefConstants.V_COLOR_12);t.add(e.VizDefConstants.V_COLOR_13);t.add(e.VizDefConstants.V_COLOR_14);t.add(e.VizDefConstants.V_COLOR_15);t.add(e.VizDefConstants.V_COLOR_16);t.add(e.VizDefConstants.V_COLOR_17);t.add(e.VizDefConstants.V_COLOR_18)}r.addAll(t);for(var R=0;R<t.size();R++){var A=t.get(R);if(r.contains(A)){r.removeElement(A);this.m_colors.add(A)}}}else{this.m_colors.add(e.VizDefConstants.V_COLOR_1);this.m_colors.add(e.VizDefConstants.V_COLOR_2);this.m_colors.add(e.VizDefConstants.V_COLOR_3);this.m_colors.add(e.VizDefConstants.V_COLOR_4);this.m_colors.add(e.VizDefConstants.V_COLOR_5);this.m_colors.add(e.VizDefConstants.V_COLOR_6);this.m_colors.add(e.VizDefConstants.V_COLOR_7);this.m_colors.add(e.VizDefConstants.V_COLOR_8);this.m_colors.add(e.VizDefConstants.V_COLOR_9);this.m_colors.add(e.VizDefConstants.V_COLOR_10);this.m_colors.add(e.VizDefConstants.V_COLOR_11);this.m_colors.add(e.VizDefConstants.V_COLOR_12);this.m_colors.add(e.VizDefConstants.V_COLOR_13);this.m_colors.add(e.VizDefConstants.V_COLOR_14);this.m_colors.add(e.VizDefConstants.V_COLOR_15);this.m_colors.add(e.VizDefConstants.V_COLOR_16);this.m_colors.add(e.VizDefConstants.V_COLOR_17);this.m_colors.add(e.VizDefConstants.V_COLOR_18)}};e.RsHiChartRenderHelper.prototype.addColorAndPattern=function(t,i,r,n,a){if(!a){this.m_colorIndex++}var s=t;if(e.XStringUtils.isNullOrEmpty(s)&&this.m_colorIndex<this.m_colors.size()){s=this.m_colors.get(this.m_colorIndex)}if(!e.XString.isEqual(n,e.VizDefConstants.K_LINE)&&e.XStringUtils.isNotNullAndNotEmpty(i)){r.putStringNotNullAndNotEmpty(e.VizDefConstants.K_BORDER_COLOR,s);if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_NON_FILL)){if(a&&!e.XString.isEqual(n,e.VizDefConstants.K_AREA)){r.putString(e.VizDefConstants.K_COLOR,"#ffffff")}else{r.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,s)}}else{var o=0;var l="";if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING1)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING1;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING1}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING2)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING2;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING2}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING3)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING3;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING3}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING4)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING4;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING4}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING5)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING5;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING5}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING6)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING6;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING6}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING7)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING7;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING7}else if(e.XString.isEqual(i,e.VizDefConstants.K_PATTERN_HATCHING8)){o=e.VizDefConstants.V_PATTERN_SIZE_HATCHING8;l=e.VizDefConstants.V_PATTERN_PATH_HATCHING8}if(o>0&&e.XStringUtils.isNotNullAndNotEmpty(l)){var u=r.putNewStructure(e.VizDefConstants.K_COLOR).putNewStructure(e.VizDefConstants.K_PATTERN);u.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,s);u.putInteger(e.VizDefConstants.K_WIDTH,o);u.putInteger(e.VizDefConstants.K_HEIGHT,o);u.putString(e.VizDefConstants.K_PATH,l)}}}else{r.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,s)}};e.RsHiChartRenderHelper.prototype.reiterateResultSet=function(e,t,i){};e.RsHiChartRenderHelper.prototype.isShowLegend=function(){return this.m_showLegend};e.RsHiChartRenderHelper.prototype.setShowLegend=function(e){this.m_showLegend=e};e.RsMicroChartRenderer=function(){};e.RsMicroChartRenderer.prototype=new e.XObject;e.RsMicroChartRenderer.prototype._ff_c="RsMicroChartRenderer";e.RsMicroChartRenderer.create=function(){return new e.RsMicroChartRenderer};e.RsMicroChartRenderer.prototype.m_valueAxis=null;e.RsMicroChartRenderer.prototype.m_seriesFilColor=null;e.RsMicroChartRenderer.prototype.render=function(t,i){var r=i.getQueryModel().getVizManager().getVizDef();var n=i.getQueryModel().getVizManager().getGlobalDef();var a=e.PrFactory.createStructure();if(e.notNull(r)){var s=r.getStructureByKey("chart");if(e.notNull(s)){if(e.XString.isEqual(s.getStringByKey("type"),"barcolumn")){this.renderColumnChart(i,a,r)}}a.put("vizDef",r);a.put("globalDef",n)}else{this.renderColumnChart(i,a,null)}return a};e.RsMicroChartRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsMicroChartRenderer.prototype.renderColumnChart=function(e,t,i){t.putString("chart","Column");t.putBoolean("allowColumnLabels",true);var r=t.putNewList("columns");this.extractValueAxisFromVizDef(i);this.extractSeriesColorsFromVizDef(i);this.generateColumns(e,r)};e.RsMicroChartRenderer.prototype.generateColumns=function(t,i){var r=t.getCursorColumnsAxis();r.setTupleCursorBeforeStart();var n=0;while(r.hasNextTuple()){var a=null;var s=0;var o=null;var l=null;var u="";r.nextTuple();while(r.hasNextTupleElement()){r.nextTupleElement();while(r.hasNextFieldValue()){r.nextFieldValue();var p=r.getField().getPresentationType();var g=r.getFormattedValue();u=e.XStringUtils.concatenate5(p.getName(),":",g," - ",u);if(p.isTypeOf(e.PresentationType.SHORT_TEXT)||p.isTypeOf(e.PresentationType.LONG_TEXT)||p.isTypeOf(e.PresentationType.MEDIUM_TEXT)||p.isTypeOf(e.PresentationType.HIERARCHY_TEXT)){a=g}else if(e.isNull(a)&&p.isTypeOf(e.PresentationType.DISPLAY_KEY)){a=g}if(p.isTypeOf(e.PresentationType.HIERARCHY_KEY)){l=g}}}var f=t.getDataCell(n,0);s=f.getDouble();o=f.getFormattedValue();n++;var c=this.getIndexOfMember(l);var C=this.getColorForMember(l);var _=e.PrStructure.create();if(c!==-1&&i.size()>c){i.insert(c,_)}else{i.add(_)}_.putDouble("value",s);_.putString("displayValue",o);_.putString("label",a);if(e.notNull(C)){_.putString("color",C)}_.putString("hierarchyKey",l)}};e.RsMicroChartRenderer.prototype.extractValueAxisFromVizDef=function(t){if(e.notNull(t)){var i=t.getStructureByKey("feedMembers");if(e.notNull(i)){this.m_valueAxis=i.getListByKey("valueAxis")}}};e.RsMicroChartRenderer.prototype.getIndexOfMember=function(t){if(e.notNull(this.m_valueAxis)){return this.m_valueAxis.getIndex(e.PrString.createWithValue(t))}return-1};e.RsMicroChartRenderer.prototype.extractSeriesColorsFromVizDef=function(t){this.m_seriesFilColor=e.PrStructure.create();if(e.notNull(t)){var i=t.getStructureByKey("userPreferences");if(e.notNull(i)){var r=i.getStructureByKey("series");if(e.notNull(r)){var n=r.getStructureByKey("fillColor");if(e.notNull(n)){var a=n.getKeysAsIteratorOfString();while(a.hasNext()){var s=a.next();var o=n.getListByKey(s);for(var l=0;l<o.size();l++){var u=o.getListAt(l);if(u.size()>0){var p=u.getListAt(0);if(p.size()>0){var g=p.getStructureAt(0);if(e.notNull(g)){var f=g.getStructureByKey("entityId");if(e.notNull(f)){var c=f.getStringByKeyExt("id",null);if(e.notNull(c)){var C=e.XString.replace(s,'"',"");this.m_seriesFilColor.putString(c,C)}}}}}}}}}}}};e.RsMicroChartRenderer.prototype.getColorForMember=function(t){if(e.notNull(this.m_seriesFilColor)&&this.m_seriesFilColor.size()>0){return this.m_seriesFilColor.getStringByKey(t)}return null};e.RsHiChartVizEvents={create:function(){return new e.RsHiChartVizEvents},addEvents:function(t,i,r){if(e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BUBBLE)||e.XString.isEqual(i,e.VizDefConstants.K_SCATTER)){var n="function(){var newXMinArr=[];var newXMaxArr=[];var newYMinArr=[];var newYMaxArr=[];for(var tmpSeriesIndex in this.series){newXMinArr.push(Math.min.apply(Math,this.series[tmpSeriesIndex].xData));newXMaxArr.push(Math.max.apply(Math,this.series[tmpSeriesIndex].xData));newYMinArr.push(Math.min.apply(Math,this.series[tmpSeriesIndex].yData));newYMaxArr.push(Math.max.apply(Math,this.series[tmpSeriesIndex].yData))} let maxX=Math.max.apply(Math,newXMaxArr);let minX=Math.min.apply(Math,newXMinArr);let maxY=Math.max.apply(Math,newYMaxArr);let minY=Math.min.apply(Math,newYMinArr);var intervalX=this.xAxis[0].tickInterval;var intervalY=this.yAxis[0].tickInterval;this.xAxis[0].update({max:1.1*maxX,min:Math.min(0,(minX)-intervalX/2)},!1);this.yAxis[0].update({max:1.1*maxY,min:Math.min(0,(minY)-intervalY/2)},!1);this.redraw(!1)}";var a=t.getStructureByKey(e.VizDefConstants.K_CHART);if(e.notNull(a)){var s=a.putNewStructure("events");s.putString("load",n)}}return t}};e.RsVizAxis=function(){};e.RsVizAxis.prototype=new e.XObject;e.RsVizAxis.prototype._ff_c="RsVizAxis";e.RsVizAxis.create=function(){var t=new e.RsVizAxis;t.m_numberFormatingInfosByFeed=e.XHashMapByString.create();t.m_elements=e.XList.create();t.m_availableFeedTypes=e.XHashSetOfString.create();return t};e.RsVizAxis.prototype.m_elements=null;e.RsVizAxis.prototype.m_availableFeedTypes=null;e.RsVizAxis.prototype.m_numberFormatingInfosByFeed=null;e.RsVizAxis.prototype.m_numberFormattingInfo=null;e.RsVizAxis.prototype.releaseObject=function(){this.m_elements=e.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=e.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizAxis.prototype.getFormattedValue=function(t,i,r){var n=this.m_numberFormatingInfosByFeed.getByKey(t);return e.RsVizAxisExtractor.getFormattedValue(r,i.getNumberFormattingInfo(),n)};e.RsVizAxis.prototype.getDecimalPlaces=function(t){var i=this.m_numberFormatingInfosByFeed.getByKey(t);if(e.notNull(i)){return i.getMaxDecimalPlaces()}return e.notNull(this.m_numberFormattingInfo)?this.m_numberFormattingInfo.getMaxDecimalPlaces():0};e.RsVizAxis.prototype.getNumericShift=function(t){var i=this.m_numberFormatingInfosByFeed.getByKey(t);if(e.notNull(i)){return i.getNumericShift()}return e.notNull(this.m_numberFormattingInfo)?this.m_numberFormattingInfo.getNumericShift():0};e.RsVizAxis.prototype.getScaledValue=function(t,i,r){var n=this.m_numberFormatingInfosByFeed.getByKey(t);return e.RsVizAxisExtractor.getScaledValue(r,i.getNumberFormattingInfo(),n)};e.RsVizAxis.prototype.addElement=function(t){this.m_elements.add(t);var i=t.getAvailableFeedTypes();this.m_availableFeedTypes.addAll(i);var r=t.getNumberFormattingInfo();if(e.isNull(this.m_numberFormattingInfo)||this.m_numberFormattingInfo.isUseFormattingFromDataCell()){this.m_numberFormattingInfo=r}var n=i.getIterator();while(n.hasNext()){var a=n.next();var s=this.m_numberFormatingInfosByFeed.getByKey(a);if(e.isNull(s)||s.isUseFormattingFromDataCell()){this.m_numberFormatingInfosByFeed.put(a,r)}}};e.RsVizAxis.prototype.getExtendedPrettyNamesForFeed=function(t,i,r,n){var a=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(r)){a.add(r)}return this.getExtendedPrettyNamesForFeeds(t,i,a,n)};e.RsVizAxis.prototype.getExtendedPrettyNamesForFeeds=function(t,i,r,n){var a=e.XListOfString.create();a.addAll(r);var s;if(e.XCollectionUtils.hasElements(n)){s=n.getIterator()}else{s=this.m_availableFeedTypes.getIterator()}while(s.hasNext()){var o=s.next();if(!r.contains(o)&&this.getPrettyNamesForFeed(true,i,o).size()>1){a.add(o)}}return this.getPrettyNamesForFeeds(t,i,a)};e.RsVizAxis.prototype.getPrettyNamesForFeeds=function(t,i,r){var n=e.XListOfString.create();var a=e.XListOfString.create();for(var s=0;s<this.m_elements.size();s++){var o=this.m_elements.get(s).getPrettyText(r);var l=this.m_elements.get(s).getPrettyKeyText(r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){if(!t||!a.contains(l)&&(i||!this.m_elements.get(s).isTotal())){n.add(o);a.add(l)}}}return n};e.RsVizAxis.prototype.getFormattedNamesForFeeds=function(t,i,r){var n=e.XListOfString.create();var a=e.XListOfString.create();for(var s=0;s<this.m_elements.size();s++){var o=this.m_elements.get(s).getFormattedText(r);var l=this.m_elements.get(s).getPrettyKeyText(r);if(e.XStringUtils.isNotNullAndNotEmpty(o)){if(!t||!a.contains(l)&&(i||!this.m_elements.get(s).isTotal())){n.add(o);a.add(l)}}}return n};e.RsVizAxis.prototype.getPrettyNamesForFeedsExclude=function(t,i,r,n){var a=e.XListOfString.create();var s=e.XListOfString.create();for(var o=0;o<this.m_elements.size();o++){var l=this.m_elements.get(o).getPrettyTextExclude(r,n);var u=this.m_elements.get(o).getPrettyKeyText(r);if(e.XStringUtils.isNotNullAndNotEmpty(l)){if(!t||!s.contains(u)&&(i||!this.m_elements.get(o).isTotal())){a.add(l);s.add(u)}}}return a};e.RsVizAxis.prototype.getMatchingFeedSubList=function(t){var i=e.XListOfString.create();for(var r=0;r<t.size();r++){for(var n=0;n<this.m_elements.size();n++){if(this.m_elements.get(n).isSelectedByString(t.get(r))){i.add(t.get(r));break}}}return i};e.RsVizAxis.prototype.hasTupleForFeed=function(e){for(var t=0;t<this.m_elements.size();t++){if(this.m_elements.get(t).isSelectedByString(e)){return true}}return false};e.RsVizAxis.prototype.getTupleForFeed=function(e){for(var t=0;t<this.m_elements.size();t++){if(this.m_elements.get(t).isSelectedByString(e)){return this.m_elements.get(t)}}return null};e.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNameAndFeed=function(t,i){var r=e.XList.create();for(var n=0;n<this.m_elements.size();n++){var a=2;var s=this.m_elements.get(n);if(s.isSelectedByString(i)){for(var o=0;o<t.size();o++){var l=t.get(o);if(!s.getMemberKeys().contains(l)){a--}}if(a>0){r.add(e.XIntegerValue.create(n))}}}return r};e.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNamesAndSuffix=function(t,i){for(var r=0;r<this.m_elements.size();r++){var n=true;var a=false;var s=this.m_elements.get(r);for(var o=0;o<t.size();o++){var l=t.get(o);var u=s.isSelectedByString(e.XStringUtils.concatenate2(l,i));a=u||a;if(!s.getMemberKeys().contains(l)&&!u){n=false;break}}if(n&&a){return r}}return-1};e.RsVizAxis.prototype.getTupleIndexForMemberName=function(t){var i=e.XList.create();for(var r=0;r<this.m_elements.size();r++){if(this.m_elements.get(r).getMemberKeys().contains(t)){i.add(e.XIntegerValue.create(r))}}return i};e.RsVizAxis.prototype.getTupleIndexForMemberNames=function(t){var i=e.XList.create();for(var r=0;r<this.m_elements.size();r++){var n=true;for(var a=0;a<t.size();a++){var s=t.get(a);if(!this.m_elements.get(r).getMemberKeys().contains(s)){n=false;break}}if(n){i.add(e.XIntegerValue.create(r))}}return i};e.RsVizAxis.prototype.getIndicesGroupedByFeed=function(t){var i=e.XHashMapByString.create();for(var r=0;r<this.getTuplesCount();r++){var n=this.getTupleAt(r);var a=n.getPrettyText(t);if(!i.containsKey(a)){i.put(a,e.XList.create())}i.getByKey(a).add(e.XIntegerValue.create(r))}return i};e.RsVizAxis.prototype.getIndicesGroupedByFeedAndOrdered=function(t,i){var r=e.XHashMapByString.create();var n=this.getIndicesByFeedOrder(i);for(var a=0;a<n.size();a++){var s=n.get(a);var o=this.getTupleAt(s.getInteger());var l=o.getPrettyText(t);if(!r.containsKey(l)){r.put(l,e.XList.create())}r.getByKey(l).add(s)}return r};e.RsVizAxis.prototype.getIndicesByFeedOrder=function(t){var i=e.XList.create();for(var r=0;r<t.size();r++){var n=t.get(r);var a=i.size();for(var s=0;s<this.m_elements.size();s++){var o=this.m_elements.get(s);if(o.isSelectedByString(n)){var l=i.size();while(l>a&&o.compareTo(this.m_elements.get(i.get(l-1).getInteger()))<0){l--}i.insert(l,e.XIntegerValue.create(s))}}}return i};e.RsVizAxis.prototype.getPrettyNamesForFeed=function(t,i,r){var n=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(r)){n.add(r)}return this.getPrettyNamesForFeeds(t,i,n)};e.RsVizAxis.prototype.getFormattedNamesForFeed=function(t,i,r){var n=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(r)){n.add(r)}return this.getFormattedNamesForFeeds(t,i,n)};e.RsVizAxis.prototype.getPrettyNamesForFeedExclude=function(t,i,r,n){var a=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(r)){a.add(r)}return this.getPrettyNamesForFeedsExclude(t,i,a,n)};e.RsVizAxis.prototype.getLabelsForFeed=function(t,i,r,n){var a=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(n)){a.add(n)}return this.getLabelsForFeeds(t,i,r,a)};e.RsVizAxis.prototype.getLabelsForFeeds=function(t,i,r,n){var a=e.XHashSetOfString.create();var s=e.XList.create();for(var o=0;o<this.m_elements.size();o++){var l=this.m_elements.get(o).getLabel(r?this:null,n);if(e.notNull(l)){if(!t||!a.contains(l.getCompoundId())&&(i||!this.m_elements.get(o).isTotal())){s.add(l);a.add(l.getCompoundId())}}}return s};e.RsVizAxis.prototype.getLabels=function(t,i,r){var n=e.XHashSetOfString.create();var a=e.XList.create();for(var s=0;s<this.m_elements.size();s++){var o=this.m_elements.get(s).getLabel(r?this:null,null);if(e.isNull(o)){o=this.m_elements.get(s).getDefaultLabel(r?this:null)}if(e.notNull(o)){if(!t||!n.contains(o.getCompoundId())&&(i||!this.m_elements.get(s).isTotal())){n.add(o.getCompoundId());a.add(o)}}}return a};e.RsVizAxis.prototype.getPrettyNames=function(t,i){var r=e.XListOfString.create();for(var n=0;n<this.m_elements.size();n++){var a=this.m_elements.get(n).getPrettyText(null);if(e.XStringUtils.isNullOrEmpty(a)){a=this.m_elements.get(n).getPrettyDefaultText()}if(e.XStringUtils.isNotNullAndNotEmpty(a)){if(!t||!r.contains(a)&&(i||!this.m_elements.get(n).isTotal())){r.add(a)}}}return r};e.RsVizAxis.prototype.getFormattedNames=function(t,i){var r=e.XListOfString.create();for(var n=0;n<this.m_elements.size();n++){var a=this.m_elements.get(n).getFormattedText(null);if(e.XStringUtils.isNullOrEmpty(a)){a=this.m_elements.get(n).getFormattedDefaultText()}if(e.XStringUtils.isNotNullAndNotEmpty(a)){if(!t||!r.contains(a)&&(i||!this.m_elements.get(n).isTotal())){r.add(a)}}}return r};e.RsVizAxis.prototype.getExtendedPrettyNames=function(e,t){return this.getExtendedPrettyNamesForFeed(e,t,null,null)};e.RsVizAxis.prototype.toString=function(){return e.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString())};e.RsVizAxis.prototype.getTuplesCount=function(){return this.m_elements.size()};e.RsVizAxis.prototype.getTupleAt=function(e){return e>-1&&e<this.m_elements.size()?this.m_elements.get(e):null};e.RsVizAxis.prototype.getFormattedDateList=function(){var t=e.XListOfString.create();var i=0;var r=false;for(i=0;i<this.m_elements.size();i++){var n=this.m_elements.get(i).getFormattedDate();if(e.notNull(n)){r=true}t.add(n)}if(r){return t}return null};e.RsVizAxis.prototype.getDateList=function(){var t=0;var i=0;var r=false;for(;i<4;i++){var n=e.XList.create();for(t=0;t<this.m_elements.size();t++){var a=this.m_elements.get(t).getDate(i);if(e.notNull(a)){r=true}n.add(a)}if(r){return n}}return null};e.RsVizAxis.prototype.getDimensionsForFeed=function(t){var i=e.XListOfString.create();i.add(t);return this.getDimensionsForFeeds(i)};e.RsVizAxis.prototype.getDimensionsForFeeds=function(t){var i=e.XListOfString.create();for(var r=0;r<this.m_elements.size();r++){var n=this.m_elements.get(r).getDimensionTextsForFeeds(t);for(var a=0;a<n.size();a++){if(!i.contains(n.get(a))){i.add(n.get(a))}}}return i};e.RsVizAxis.prototype.getFeedDimensionTuple=function(t){for(var i=0;i<this.m_elements.size();i++){var r=this.m_elements.get(i).getDimensionNamesForFeeds(t);var n=e.XStringBuffer.create();for(var a=0;a<r.size();a++){n.append(r.get(a));n.append("/")}var s=n.toString();if(e.XStringUtils.isNotNullAndNotEmpty(s)){return e.XString.substring(s,0,e.XString.size(s)-1)}}return""};e.RsVizAxisExtractor={getTuplesFromRowAxis:function(t,i,r){return e.RsVizAxisExtractor.getTuplesFromAxis(t,t.getCursorRowsAxis(),true,i,r)},getTuplesFromColumnAxis:function(t,i,r){return e.RsVizAxisExtractor.getTuplesFromAxis(t,t.getCursorColumnsAxis(),false,i,r)},getTuplesFromAxis:function(t,i,r,n,a){var s=e.RsVizAxis.create();var o=t.getQueryModel().getAccountDimension();if(e.isNull(o)){o=t.getQueryModel().getMeasureDimension()}i.setTupleCursorBeforeStart();var l=0;while(i.hasNextTuple()){i.nextTuple();var u=null;if(r){u=t.getDataCell(0,l)}else{u=t.getDataCell(l,0)}var p=u.getDecimalPlaces();var g=u.getScalingFactor();var f=u.getFormatString();var c=e.RsVizNumberFormattingInfo.createNumberFormat(g,p,p,f,g===0);var C=e.RsVizFeedTuple.createTuple();C.setNumberFormattingInfo(c);while(i.hasNextTupleElement()){var _=i.nextTupleElement().getDimensionMemberType();var m=e.RsVizAxisExtractor.getAxisMemberFeedTypes(i,n);C.addElement(e.RsVizAxisExtractor.createTupleElement(i,o,m,a,C,_))}s.addElement(C);l++}return s},createTupleElement:function(t,i,r,n,a,s){t.setFieldValueCursorBeforeStart();var o="";var l="";var u=null;var p=0;var g=-1;var f=e.DrillState.LEAF;var c=e.XListOfString.create();var C=e.XList.create();var _=e.XList.create();var m=e.XList.create();var S=0;var d=0;while(t.hasNextFieldValue()){t.nextFieldValue();var T=t.getField().getPresentationType();var y=t.getFormattedValue();c.add(y);m.add(T);var h=t.getValueType();if(t.getValue()!==null){C.add(t.getValue().clone())}_.add(h);if(T.isTypeOf(e.PresentationType.SHORT_TEXT)||T.isTypeOf(e.PresentationType.LONG_TEXT)||T.isTypeOf(e.PresentationType.MEDIUM_TEXT)){if(S<5&&e.XStringUtils.isNotNullAndNotEmpty(y)){o=y;S=5}}else if(T.isTypeOf(e.PresentationType.HIERARCHY_TEXT)&&S<4&&e.XStringUtils.isNotNullAndNotEmpty(y)){o=y;S=4}else if(T.isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)&&S<3&&e.XStringUtils.isNotNullAndNotEmpty(y)){o=y;S=3}else if(T.isTypeOf(e.PresentationType.DISPLAY_KEY)&&S<2&&e.XStringUtils.isNotNullAndNotEmpty(y)){o=y;S=2}else if(S<=1&&e.PresentationType.isTextPresentation(T)&&e.XStringUtils.isNotNullAndNotEmpty(y)){o=y;S=1}if(d<=4&&T.isTypeOf(e.PresentationType.HIERARCHY_KEY)&&!T.isTypeOf(e.PresentationType.HIERARCHY_DISPLAY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(y)){l=y;d=4}else if(d<=3&&T.isTypeOf(e.PresentationType.HIERARCHY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(y)){l=y;d=3}else if(d<=2&&T.isTypeOf(e.PresentationType.KEY)&&!T.isTypeOf(e.PresentationType.DISPLAY_KEY)&&e.XStringUtils.isNotNullAndNotEmpty(y)){l=y;d=2}else if(d<=1&&e.PresentationType.isKeyPresentation(T)&&e.XStringUtils.isNotNullAndNotEmpty(y)){l=y;d=1}}if(i.containsStructureMember(l)&&e.XStringUtils.isNotNullAndNotEmpty(i.getStructureMember(l).getText())){o=i.getStructureMember(l).getText()}if(!t.getRsDimensionAtCurrentPosition().isMeasureStructure()){u=t.getField().getDimension().getDimensionMember(t.getDimensionMemberName());p=t.getDisplayLevel();g=t.getParentNodeIndex();f=t.getDrillState();if(e.XStringUtils.isNullOrEmpty(o)){o=u.getText();l=u.getName()}}var D=null;var R="()";var A=-1;var V=null;var E=null;if(e.notNull(n)){var v;var N=n.getStructureByKey(e.VizDefConstants.K_NUMBER_FORMATTING);if(e.notNull(N)){D=N.getByKey(l);for(v=0;e.isNull(D)&&v<C.size();v++){D=N.getByKey(C.get(v).getStringRepresentation())}}N=n.getStructureByKey(e.VizDefConstants.K_SHOW_SIGN_AS);if(e.notNull(N)){R=N.getStringByKey(l);for(v=0;e.isNull(D)&&v<C.size();v++){R=N.getStringByKey(C.get(v).getStringRepresentation())}}N=n.getStructureByKey(e.VizDefConstants.K_DECIMAL_PLACES);if(e.notNull(N)){A=N.getIntegerByKey(l);for(v=0;e.isNull(D)&&v<C.size();v++){A=N.getIntegerByKey(C.get(v).getStringRepresentation())}}N=n.getStructureByKey(e.VizDefConstants.K_PATTERN_FORMATTING);if(e.notNull(N)){E=N.getStringByKey(l);for(v=0;e.isNull(E)&&v<C.size();v++){E=N.getStringByKey(C.get(v).getStringRepresentation())}}N=n.getStructureByKey(e.VizDefConstants.K_COLOR_FORMATTING);if(e.notNull(N)){V=N.getStringByKey(l);for(v=0;e.isNull(V)&&v<C.size();v++){V=N.getStringByKey(C.get(v).getStringRepresentation())}}}a.setColor(V);a.setPattern(E);if(e.notNull(D)){var z=0;var L=2;var I=0;if(D.isStructure()){var K=D.asStructure();var O=K.getStructureByKey(e.VizDefConstants.K_OPTIONS);var F=K.getStructureByKey(e.VizDefConstants.K_SCALE).getStringByKey(e.VizDefConstants.K_MULTIPLIER);if(e.XString.startsWith(F,"1E")){z=e.XInteger.convertFromString(e.XString.substring(F,2,e.XString.size(F)))}if(O.containsKey(e.VizDefConstants.K_MINIMUM_FRACTION_DIGITS)){I=O.getIntegerByKey(e.VizDefConstants.K_MINIMUM_FRACTION_DIGITS)}if(O.containsKey(e.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)){L=O.getIntegerByKey(e.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)-I}}else if(D.isInteger()){z=D.asInteger().getInteger()}if(A>-1){L=A;I=A}var b=e.RsVizNumberFormattingInfo.createNumberFormat(z,I,L,R,false);a.setNumberFormattingInfo(b)}if(e.XStringUtils.isNullOrEmpty(o)){o=l}return e.RsVizTupleElement.createTupleElement(u,p,g,f,l,o,r,c,C,_,m,s)},getAxisMemberFeedTypes:function(t,i){var r=e.XLinkedHashMapByString.create();t.setFieldValueCursorBeforeStart();var n=i.getKeysAsReadOnlyListOfString();while(t.hasNextFieldValue()){t.nextFieldValue();var a=t.getFieldValue();var s=a.getField().getDimension().getName();var o=t.getDimensionMemberName();var l="";if(e.XStringUtils.isNotNullAndNotEmpty(o)){var u=t.getField().getDimension().getStructureMember(o);if(e.notNull(u)){l=u.getAliasName()}}for(var p=0;p<n.size();p++){var g=n.get(p);var f=i.getListByKey(g);for(var c=0;c<f.size();c++){var C=f.getStringAt(c);if(e.XString.isEqual(l,C)||e.XString.isEqual(o,C)||e.XString.isEqual(a.toString(),C)||e.XString.isEqual(a.getFormattedValue(),C)||e.XString.isEqual(s,C)){if(!r.containsKey(g)){r.put(g,e.XIntegerValue.create(c))}break}}}}t.setFieldValueCursorBeforeStart();return r},getFormattedValue:function(t,i,r){var n=i;if(e.isNull(n)||n.isUseFormattingFromDataCell()){if(t.getScalingFactor()===0&&e.notNull(r)&&!r.isUseFormattingFromDataCell()){n=r}}if(e.notNull(n)&&!n.isUseFormattingFromDataCell()){if(!t.getValueException().isValidValue()&&t.getValueException()!==e.ValueException.MIXED_CURRENCIES_OR_UNITS){return""}var a=n.isShowPlusSign()?"+":"";var s=n.getNumericShift();var o=n.getMinDecimalPlaces();var l=n.getMaxDecimalPlaces()-o;try{var u=t.getDouble()*e.XMath.pow(10,s);var p="#";p="#,#";if(l>0||o>0){p="#,#.";var g;for(g=0;g<o;g++){p=e.XStringUtils.concatenate2(p,"0")}for(g=0;g<l;g++){p=e.XStringUtils.concatenate2(p,"#")}}return e.XStringUtils.concatenate2(a,e.XNumberFormatter.formatDoubleToString(u,p))}catch(e){return t.getFormattedValue()}}else{var f=t.getFormattedValue();if(e.XStringUtils.isNullOrEmpty(f)&&t.getValueException()===e.ValueException.NORMAL){f=e.XDouble.convertToString(t.getDouble())}return f}},getScaledValue:function(t,i,r){var n=i;if(e.isNull(n)||n.isUseFormattingFromDataCell()){if(t.getScalingFactor()===0&&e.notNull(r)&&!r.isUseFormattingFromDataCell()){n=r}}var a;if(e.notNull(n)&&!n.isUseFormattingFromDataCell()){a=n.getNumericShift()}else{a=t.getScalingFactor()}if(!t.getValueException().isValidValue()&&t.getValueException()!==e.ValueException.MIXED_CURRENCIES_OR_UNITS){return 0}try{return t.getDouble()*e.XMath.pow(10,a)}catch(e){return 0}},guessFeedMembers:function(t,i,r){var n=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_COLUMN);var a=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BELLCURVE);var s=e.XString.isEqual(i,e.VizDefConstants.K_LINE);var o=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BAR);var l=e.XString.isEqual(i,e.VizDefConstants.K_SPLINE);var u=e.XString.isEqual(i,e.VizDefConstants.K_AREA);var p=e.XString.isEqual(i,e.VizDefConstants.K_PIE);var g=e.XString.isEqual(i,e.VizDefConstants.K_WORDCLOUD);var f=e.XString.isEqual(i,e.VizDefConstants.K_VARIPIE);var c=e.XString.isEqual(i,e.VizDefConstants.K_VARIWIDE);var C=e.XString.isEqual(i,e.VizDefConstants.K_SCATTER);var _=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BUBBLE);var m=e.XString.isEqual(i,e.VizDefConstants.K_PACKED_BUBBLE);var S=e.XString.isEqual(i,e.VizDefConstants.K_HEATMAP);var d=e.XString.isEqual(i,e.VizDefConstants.K_TREEMAP);var T=e.XString.isEqual(i,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);var y=e.XString.isEqual(i,e.VizDefConstants.K_SOLID_GAUGE);var h=e.PrFactory.createStructure();var D=t.getCursorRowsAxis();var R=t.getCursorColumnsAxis();var A=h.putNewList(e.VizDefConstants.K_CATEGORY_AXIS);var V=h.putNewList(e.VizDefConstants.K_CATEGORY_AXIS2);var E=h.putNewList(e.VizDefConstants.K_VALUE_AXIS);var v=h.putNewList(e.VizDefConstants.K_VALUE_AXIS2);var N=h.putNewList(e.VizDefConstants.K_BUBBLE_WIDTH);var z=h.putNewList(e.VizDefConstants.K_WEIGHT);var L=h.putNewList(e.VizDefConstants.K_SIZE);var I=h.putNewList(e.VizDefConstants.K_TIME_AXIS);var K=h.putNewList(e.VizDefConstants.K_COLOR);var O=e.RsVizAxisExtractor.getDimensionStack(R);var F=e.RsVizAxisExtractor.getDimensionStack(D);var b=e.RsVizAxisExtractor.getMemberStack(R,O.size());if(F.size()>0){I.addString(F.get(F.size()-1));K.addString(F.get(F.size()-1));A.addString(F.get(F.size()-1))}if(O.size()>1){if(S){V.addString(O.get(O.size()-2))}else{K.addString(O.get(O.size()-2))}}if(s||o||l||a||n||u||r||y||T){var H=b.size();if(r&&b.size()>1){H--;v.addString(b.get(b.size()-1))}for(var w=0;w<H;w++){E.addString(b.get(w))}}else if(p||f||g||_||C||d||c||m){if(b.size()>0){z.addString(b.get(0));E.addString(b.get(0));L.addString(b.get(b.size()-1))}if(b.size()>1){v.addString(b.get(1))}if(b.size()>2){N.addString(b.get(2))}}else if(S){if(b.size()>0){K.addString(b.get(0))}}return h},getDimensionStack:function(t){var i=e.XListOfString.create();t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();if(t.hasNextTuple()){t.nextTuple();while(t.hasNextTupleElement()){t.nextTupleElement();if(t.hasNextFieldValue()){t.nextFieldValue()}i.add(t.getRsDimensionAtCurrentPosition().getName());if(t.getRsDimensionAtCurrentPosition().getDimensionType()===e.DimensionType.ACCOUNT){break}}}t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();return i},getMemberStack:function(t,i){var r=e.XListOfString.create();t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();while(t.hasNextTuple()){t.nextTuple();t.setTupleElementCursorBeforeStart();var n=0;while(t.hasNextTupleElement()&&n++<i){t.nextTupleElement()}if(t.hasNextFieldValue()){t.nextFieldValue()}r.add(t.getDimensionMemberName())}t.setFieldValueCursorBeforeStart();t.setTupleElementCursorBeforeStart();t.setTupleCursorBeforeStart();return r},getMemberStackFromVisualizationDefinition:function(t,i){var r=e.XListOfString.create();var n=t.getChartSetting().getTypedValueSelectionsForType(i);for(var a=0;a<n.size();a++){r.add(n.get(a).getDimensionMember().getName())}return r},extractCustomFormatting:function(t,i){if(e.isNull(t)){return null}var r=t.getStructureByKey(e.VizDefConstants.K_CUSTOM_FORMATTING);var n=t.getStructureByKey(e.VizDefConstants.K_PLACEHOLDER_2_ID);var a=e.isNull(i)?null:i.getListByKey(e.VizDefConstants.K_MEASURE_SYNC);if(e.isNull(r)){r=t.putNewStructure(e.VizDefConstants.K_CUSTOM_FORMATTING)}var s=r.getStructureByKey(e.VizDefConstants.K_PATTERN_FORMATTING);if(e.isNull(s)){s=r.putNewStructure(e.VizDefConstants.K_PATTERN_FORMATTING)}var o=r.getStructureByKey(e.VizDefConstants.K_COLOR_FORMATTING);if(e.isNull(o)){o=r.putNewStructure(e.VizDefConstants.K_COLOR_FORMATTING)}var l=e.XHashSetOfString.create();if(!t.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.notNull(a)){for(var u=0;u<a.size();u++){var p=a.getStructureAt(u);var g=p.getStructureByKey(e.VizDefConstants.K_ID);var f=g.getStringByKey(e.VizDefConstants.K_ID);if(!o.containsKey(f)){o.putStringNotNullAndNotEmpty(f,p.getStringByKey(e.VizDefConstants.K_COLOR))}if(!s.containsKey(f)){s.putStringNotNullAndNotEmpty(f,p.getStringByKey(e.VizDefConstants.K_PATTERN))}}}}else{var c=t.getStructureByKey(e.VizDefConstants.K_FEED_MEMBERS);var C=c.getKeysAsReadOnlyListOfString();for(var _=0;_<C.size();_++){var m=C.get(_);if(!e.XString.containsString(m,e.VizDefConstants.K_ERRORBAR_INFIX)){var S=c.getListByKey(m);for(var d=0;d<S.size();d++){o.remove(S.getStringAt(d))}}}s.clear();var T=t.getStructureByKey(e.VizDefConstants.K_USER_PREFERENCES);if(e.notNull(T)){var y=T.getStructureByKey(e.VizDefConstants.K_MEASURE);if(e.notNull(y)){var h=y.getListByKey(e.VizDefConstants.K_COLORS);if(e.notNull(h)){for(var D=0;D<h.size();D++){var R=h.getStructureAt(D);var A=R.getStructureByKey(e.VizDefConstants.K_ID);var V=A.getStringByKey(e.VizDefConstants.K_ID);o.putStringNotNullAndNotEmpty(V,R.getStringByKey(e.VizDefConstants.K_COLOR));s.putStringNotNullAndNotEmpty(V,R.getStringByKey(e.VizDefConstants.K_PATTERN));l.add(V)}}}}}if(e.notNull(n)){var E=n.getKeysAsReadOnlyListOfString();for(var v=0;v<E.size();v++){var N=E.get(v);var z=n.getStringByKey(N);if(o.containsKey(N)&&(!o.containsKey(z)||l.contains(N))){o.putString(z,o.getStringByKey(N))}if(s.containsKey(N)&&!s.containsKey(z)){s.putString(z,s.getStringByKey(N))}if(o.containsKey(z)&&(!o.containsKey(N)||l.contains(z))){o.putString(N,o.getStringByKey(z))}if(s.containsKey(z)&&!s.containsKey(N)){s.putString(N,s.getStringByKey(z))}}}return r},getFeedMembersFromVisualizationDefinition:function(t,i){var r=e.PrFactory.createStructure();var n=i.getChartSetting();var a=n.getChartType();var s=n.getChartType2();var o=r.putNewList(e.VizDefConstants.K_CATEGORY_AXIS);var l=r.putNewList(e.VizDefConstants.K_CATEGORY_AXIS2);var u=r.putNewList(e.VizDefConstants.K_VALUE_AXIS);var p=r.putNewList(e.VizDefConstants.K_VALUE_AXIS2);var g=r.putNewList(e.VizDefConstants.K_VARIANCE);var f=r.putNewList(e.VizDefConstants.K_BUBBLE_WIDTH);var c=r.putNewList(e.VizDefConstants.K_WEIGHT);var C=r.putNewList(e.VizDefConstants.K_SIZE);var _=r.putNewList(e.VizDefConstants.K_TIME_AXIS);var m=r.putNewList(e.VizDefConstants.K_COLOR);var S=t.getCursorColumnsAxis();var d=t.getCursorRowsAxis();var T;var y;if(e.XStream.of(S.getRsDimensions()).anyMatch(function(t){return e.XString.isEqual(t.getName(),i.getKeyFigureDimension().getName())}.bind(this))){T=e.RsVizAxisExtractor.getDimensionStack(S);y=e.RsVizAxisExtractor.getDimensionStack(d)}else{y=e.RsVizAxisExtractor.getDimensionStack(S);T=e.RsVizAxisExtractor.getDimensionStack(d)}T.removeElement(i.getKeyFigureDimension().getName());if(a===e.ChartType.LINE||a===e.ChartType.BAR_COLUMN||a===e.ChartType.AREA){o.addAllStrings(y);m.addAllStrings(T);u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));if(s!==e.ChartType.NONE){p.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B))}g.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_VARIANCE))}else if(a===e.ChartType.RADAR){o.addAllStrings(y);m.addAllStrings(T);u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(a===e.ChartType.BOX_PLOT){o.addAllStrings(y);m.addAllStrings(T);u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(a===e.ChartType.TIME_SERIES){_.addAllStrings(y);m.addAllStrings(T);u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE))}else if(a===e.ChartType.HEAT_MAP){o.addAllStrings(y);l.addAllStrings(T);m.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.COLOR))}else if(a===e.ChartType.PACKED_BUBBLE||a===e.ChartType.BUBBLE||a===e.ChartType.SCATTER_PLOT||a===e.ChartType.VARI_WIDE){m.addAllStrings(T);u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));p.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B));if(a===e.ChartType.BUBBLE||a===e.ChartType.PACKED_BUBBLE){f.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.SIZE))}}else if(a===e.ChartType.METRIC){u.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE));p.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_B));g.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.VALUE_VARIANCE))}else if(a===e.ChartType.PIE||a===e.ChartType.DOUGHNUT){o.addAllStrings(y);C.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.SIZE))}else if(a===e.ChartType.TREE_MAP){o.addAllStrings(y);m.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.COLOR));c.addAllStrings(e.RsVizAxisExtractor.getMemberStackFromVisualizationDefinition(i,e.VisualizationValueType.WEIGHT))}return r}};e.RsVizFeedTuple=function(){};e.RsVizFeedTuple.prototype=new e.XObject;e.RsVizFeedTuple.prototype._ff_c="RsVizFeedTuple";e.RsVizFeedTuple.createTuple=function(){var t=new e.RsVizFeedTuple;t.m_elements=e.XList.create();t.m_availableFeedTypes=e.XHashSetOfString.create();return t};e.RsVizFeedTuple.prototype.m_elements=null;e.RsVizFeedTuple.prototype.m_availableFeedTypes=null;e.RsVizFeedTuple.prototype.m_numberFormattingInfo=null;e.RsVizFeedTuple.prototype.m_pattern=null;e.RsVizFeedTuple.prototype.m_color=null;e.RsVizFeedTuple.prototype.getPattern=function(){return this.m_pattern};e.RsVizFeedTuple.prototype.getColor=function(){return this.m_color};e.RsVizFeedTuple.prototype.releaseObject=function(){this.m_elements=e.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=e.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizFeedTuple.prototype.getMemberKeysForFeedsOtherThan=function(t){var i=e.XListOfString.create();for(var r=0;r<this.m_elements.size();r++){if(!this.m_elements.get(r).isSelectedByString(t)){i.add(this.m_elements.get(r).getKey())}}return i};e.RsVizFeedTuple.prototype.getMemberKeys=function(){var t=e.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){t.add(this.m_elements.get(i).getKey())}return t};e.RsVizFeedTuple.prototype.setNumberFormattingInfo=function(e){this.m_numberFormattingInfo=e};e.RsVizFeedTuple.prototype.getNumberFormattingInfo=function(){return this.m_numberFormattingInfo};e.RsVizFeedTuple.prototype.addElement=function(e){this.m_elements.add(e);this.m_availableFeedTypes.addAll(e.getFeedTypes())};e.RsVizFeedTuple.prototype.isTotal=function(){for(var e=0;e<this.m_elements.size();e++){if(this.m_elements.get(e).isTotal()){return true}}return false};e.RsVizFeedTuple.prototype.getPrettyDefaultText=function(){var t=e.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){t.append("/");t.append(this.m_elements.get(i).getText())}}var r=t.toString();if(e.XString.size(r)>1){return e.XString.substring(r,1,e.XString.size(r))}return null};e.RsVizFeedTuple.prototype.getDefaultLabel=function(t){var i=null;for(var r=0;r<this.m_elements.size();r++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(r).getFeedTypes())){i=this.createVizLabel(r,t,i)}}return i};e.RsVizFeedTuple.prototype.createVizLabel=function(t,i,r){var n=r;var a=this.m_elements.get(t);if(e.notNull(i)&&a.getParentIndex()>-1&&a.getParentIndex()<i.getTuplesCount()){n=i.getTupleAt(a.getParentIndex()).createVizLabel(t,i,n)}return e.RsVizLabel.create(a.getKey(),a.getText(),a.getFormattedText(),n,a.getDisplayLevel(),a.getDrillState())};e.RsVizFeedTuple.prototype.getFormattedDefaultText=function(){var t=e.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)||e.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){t.append("/");t.append(this.m_elements.get(i).getFormattedText())}}var r=t.toString();if(e.XString.size(r)>1){return e.XString.substring(r,1,e.XString.size(r))}return null};e.RsVizFeedTuple.prototype.setPattern=function(e){this.m_pattern=e};e.RsVizFeedTuple.prototype.setColor=function(e){this.m_color=e};e.RsVizFeedTuple.prototype.getPrettyTextForFeed=function(t){var i=e.XListOfString.create();i.add(t);return this.getPrettyText(i)};e.RsVizFeedTuple.prototype.getPrettyText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}var i=e.XStringBuffer.create();for(var r=0;r<this.m_elements.size();r++){if(this.m_elements.get(r).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(r).getText())}}var n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.getLabel=function(t,i){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}var r=null;for(var n=0;n<this.m_elements.size();n++){if(this.m_elements.get(n).isSelectedByList(i)){r=this.createVizLabel(n,t,r)}}return r};e.RsVizFeedTuple.prototype.getFormattedText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}var i=e.XStringBuffer.create();for(var r=0;r<this.m_elements.size();r++){if(this.m_elements.get(r).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(r).getFormattedText())}}var n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.getPrettyTextExclude=function(t,i){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}var r=e.XStringBuffer.create();for(var n=0;n<this.m_elements.size();n++){if(this.m_elements.get(n).isSelectedByList(t)&&!this.m_elements.get(n).isSelectedByList(i)){r.append("/");r.append(this.m_elements.get(n).getText())}}var a=r.toString();if(e.XString.size(a)>1){return e.XString.substring(a,1,e.XString.size(a))}return null};e.RsVizFeedTuple.prototype.getPrettyKeyText=function(t){if(!e.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null}var i=e.XStringBuffer.create();for(var r=0;r<this.m_elements.size();r++){if(this.m_elements.get(r).isSelectedByList(t)){i.append("/");i.append(this.m_elements.get(r).getKey())}}var n=i.toString();if(e.XString.size(n)>1){return e.XString.substring(n,1,e.XString.size(n))}return null};e.RsVizFeedTuple.prototype.toString=function(){return e.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString())};e.RsVizFeedTuple.prototype.getAvailableFeedTypes=function(){return this.m_availableFeedTypes};e.RsVizFeedTuple.prototype.isSelectedByList=function(t){if(e.XCollectionUtils.hasElements(this.m_availableFeedTypes)&&!e.XCollectionUtils.hasElements(t)){return true}for(var i=0;i<t.size();i++){if(this.m_availableFeedTypes.contains(t.get(i))){return true}}return false};e.RsVizFeedTuple.prototype.isSelectedByString=function(t){return e.XStringUtils.isNullOrEmpty(t)||this.m_availableFeedTypes.contains(t)};e.RsVizFeedTuple.prototype.getDate=function(t){for(var i=0;i<this.m_elements.size();i++){var r=this.m_elements.get(i).getDate(t);if(e.notNull(r)){return r}}return null};e.RsVizFeedTuple.prototype.getFormattedDate=function(){for(var t=0;t<this.m_elements.size();t++){var i=this.m_elements.get(t).getFormattedDate();if(e.notNull(i)){return i}}return null};e.RsVizFeedTuple.prototype.getDimensionTextsForFeeds=function(t){var i=e.XListOfString.create();for(var r=0;r<this.m_elements.size();r++){var n=this.m_elements.get(r);if(n.getDimensionMember()!==null&&n.getDimensionMember().getDimension()!==null&&n.isSelectedByList(t)&&!i.contains(n.getDimensionMember().getDimension().getName())){i.add(n.getDimensionMember().getDimension().getText())}}return i};e.RsVizFeedTuple.prototype.getDimensionNamesForFeeds=function(t){var i=e.XListOfString.create();for(var r=0;r<this.m_elements.size();r++){var n=this.m_elements.get(r);if(n.getDimensionMember()!==null&&n.getDimensionMember().getDimension()!==null&&n.isSelectedByList(t)&&!i.contains(n.getDimensionMember().getDimension().getName())){i.add(n.getDimensionMember().getDimension().getName())}}return i};e.RsVizFeedTuple.prototype.compareTo=function(t){if(e.isNull(t)){return 1}var i=t;var r=e.XMath.min(this.m_elements.size(),i.m_elements.size());for(var n=0;n<r;n++){var a=this.m_elements.get(n).compareTo(i.m_elements.get(n));if(a!==0){return a}}return 0};e.RsVizFeedTuple.prototype.getFormattedValue=function(t){return e.RsVizAxisExtractor.getFormattedValue(t,this.getNumberFormattingInfo(),null)};e.RsVizFeedTuple.prototype.getDecimalPlaces=function(){return this.m_numberFormattingInfo.getMaxDecimalPlaces()};e.RsVizFeedTuple.prototype.getNumericShift=function(){return this.m_numberFormattingInfo.getNumericShift()};e.RsVizFeedTuple.prototype.getScaledValue=function(t){return e.RsVizAxisExtractor.getScaledValue(t,this.getNumberFormattingInfo(),null)};e.RsVizLabel=function(){};e.RsVizLabel.prototype=new e.XObject;e.RsVizLabel.prototype._ff_c="RsVizLabel";e.RsVizLabel.create=function(t,i,r,n,a,s){var o=new e.RsVizLabel;o.m_id=t;o.m_label=i;o.m_formattedLabel=r;o.m_parent=n;o.m_leafOrCollapsed=e.isNull(s)||s===e.DrillState.LEAF||s===e.DrillState.COLLAPSED||s===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED;o.m_displayLevel=a;if(e.notNull(n)){n.m_leafOrCollapsed=false}return o};e.RsVizLabel.prototype.m_id=null;e.RsVizLabel.prototype.m_label=null;e.RsVizLabel.prototype.m_formattedLabel=null;e.RsVizLabel.prototype.m_compoundId=null;e.RsVizLabel.prototype.m_compoundLabel=null;e.RsVizLabel.prototype.m_compoundFormattedLabel=null;e.RsVizLabel.prototype.m_leafOrCollapsed=false;e.RsVizLabel.prototype.m_displayLevel=0;e.RsVizLabel.prototype.m_parent=null;e.RsVizLabel.prototype.releaseObject=function(){this.m_id=null;this.m_label=null;this.m_formattedLabel=null;this.m_parent=null;this.m_compoundFormattedLabel=null;this.m_compoundId=null;this.m_compoundLabel=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizLabel.prototype.getId=function(){return this.m_id};e.RsVizLabel.prototype.getLabel=function(){return this.m_label};e.RsVizLabel.prototype.getParent=function(){return this.m_parent};e.RsVizLabel.prototype.getCompoundLabel=function(){if(e.isNull(this.m_compoundLabel)){if(e.notNull(this.m_parent)){this.m_compoundLabel=e.XStringUtils.concatenate3(this.m_parent.getCompoundLabel(),"/",this.m_label)}else{this.m_compoundLabel=this.m_label}}return this.m_compoundLabel};e.RsVizLabel.prototype.getCompoundFormattedLabel=function(){if(e.isNull(this.m_compoundFormattedLabel)){if(e.notNull(this.m_parent)){this.m_compoundFormattedLabel=e.XStringUtils.concatenate3(this.m_parent.getCompoundFormattedLabel(),"/",this.m_formattedLabel)}else{this.m_compoundFormattedLabel=this.m_formattedLabel}}return this.m_compoundFormattedLabel};e.RsVizLabel.prototype.getCompoundId=function(){if(e.isNull(this.m_compoundId)){if(e.notNull(this.m_parent)){this.m_compoundId=e.XStringUtils.concatenate3(this.m_parent.getCompoundId(),"/",this.m_id)}else{this.m_compoundId=this.m_id}}return this.m_compoundId};e.RsVizLabel.prototype.getFormattedLabel=function(){return this.m_formattedLabel};e.RsVizLabel.prototype.isLeafOrCollapsed=function(){return this.m_leafOrCollapsed};e.RsVizLabel.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RsVizNumberFormattingInfo=function(){};e.RsVizNumberFormattingInfo.prototype=new e.XObject;e.RsVizNumberFormattingInfo.prototype._ff_c="RsVizNumberFormattingInfo";e.RsVizNumberFormattingInfo.createNumberFormat=function(t,i,r,n,a){var s=new e.RsVizNumberFormattingInfo;s.m_numericShift=t;s.m_minDecimalPlaces=i;s.m_maxDecimalPlaces=r;s.m_useFormattingFromDataCell=a;s.m_showSignAs=n;return s};e.RsVizNumberFormattingInfo.prototype.m_numericShift=0;e.RsVizNumberFormattingInfo.prototype.m_minDecimalPlaces=0;e.RsVizNumberFormattingInfo.prototype.m_maxDecimalPlaces=0;e.RsVizNumberFormattingInfo.prototype.m_useFormattingFromDataCell=false;e.RsVizNumberFormattingInfo.prototype.m_showSignAs=null;e.RsVizNumberFormattingInfo.prototype.releaseObject=function(){this.m_showSignAs=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizNumberFormattingInfo.prototype.getNumericShift=function(){return this.m_numericShift};e.RsVizNumberFormattingInfo.prototype.getMinDecimalPlaces=function(){return this.m_minDecimalPlaces};e.RsVizNumberFormattingInfo.prototype.getMaxDecimalPlaces=function(){return this.m_maxDecimalPlaces};e.RsVizNumberFormattingInfo.prototype.isShowPlusSign=function(){return e.XStringUtils.isNotNullAndNotEmpty(this.m_showSignAs)&&e.XString.startsWith(this.m_showSignAs,"+")};e.RsVizNumberFormattingInfo.prototype.isUseFormattingFromDataCell=function(){return this.m_useFormattingFromDataCell};e.RsVizNumberFormattingInfo.prototype.getShowSignAs=function(){return this.m_showSignAs};e.RsVizTupleElement=function(){};e.RsVizTupleElement.prototype=new e.XObject;e.RsVizTupleElement.prototype._ff_c="RsVizTupleElement";e.RsVizTupleElement.createTupleElement=function(t,i,r,n,a,s,o,l,u,p,g,f){var c=new e.RsVizTupleElement;c.m_displayLevel=i;c.m_drillState=n;c.m_member=t;c.m_parentIndex=r;c.m_key=a;c.m_text=s;c.m_feedTypes=o;c.m_formattedValueList=l;c.m_valueList=u;c.m_valueTypeList=p;c.m_presentationTypeList=g;c.m_memberType=f;return c};e.RsVizTupleElement.prototype.m_feedTypes=null;e.RsVizTupleElement.prototype.m_member=null;e.RsVizTupleElement.prototype.m_parentIndex=0;e.RsVizTupleElement.prototype.m_key=null;e.RsVizTupleElement.prototype.m_text=null;e.RsVizTupleElement.prototype.m_formattedValueList=null;e.RsVizTupleElement.prototype.m_valueList=null;e.RsVizTupleElement.prototype.m_valueTypeList=null;e.RsVizTupleElement.prototype.m_presentationTypeList=null;e.RsVizTupleElement.prototype.m_memberType=null;e.RsVizTupleElement.prototype.m_drillState=null;e.RsVizTupleElement.prototype.m_displayLevel=0;e.RsVizTupleElement.prototype.releaseObject=function(){this.m_member=null;this.m_key=null;this.m_text=null;this.m_feedTypes=e.XObjectExt.release(this.m_feedTypes);this.m_formattedValueList=e.XObjectExt.release(this.m_formattedValueList);this.m_valueList=e.XObjectExt.release(this.m_valueList);this.m_valueTypeList=e.XObjectExt.release(this.m_valueTypeList);this.m_presentationTypeList=e.XObjectExt.release(this.m_presentationTypeList);this.m_memberType=null;e.XObject.prototype.releaseObject.call(this)};e.RsVizTupleElement.prototype.getParentIndex=function(){return this.m_parentIndex};e.RsVizTupleElement.prototype.getFormattedValueList=function(){return this.m_formattedValueList};e.RsVizTupleElement.prototype.getValueTypeList=function(){return this.m_valueTypeList};e.RsVizTupleElement.prototype.getPresentationTypeList=function(){return this.m_presentationTypeList};e.RsVizTupleElement.prototype.getKey=function(){return this.m_key};e.RsVizTupleElement.prototype.getFormattedText=function(){var t="";var i="";if(e.notNull(this.m_drillState)&&this.m_drillState!==e.DrillState.LEAF&&this.m_drillState!==e.DrillState.LEAF_UDH){if(this.m_displayLevel===0){t="<b>";i="</b>"}else if(this.m_displayLevel===1){t="<b><em>";i="</em></b>"}else if(this.m_displayLevel===2){t="<em>";i="</em>"}}return e.XStringUtils.concatenate3(t,this.m_text,i)};e.RsVizTupleElement.prototype.getText=function(){return this.m_text};e.RsVizTupleElement.prototype.getDimensionMember=function(){return this.m_member};e.RsVizTupleElement.prototype.toString=function(){return e.XStringUtils.concatenate5(this.m_feedTypes.toString(),"::<",this.m_key,">::",this.m_text)};e.RsVizTupleElement.prototype.isSelectedByList=function(t){var i=this.m_feedTypes.getKeysAsReadOnlyListOfString();if(e.XCollectionUtils.hasElements(this.m_feedTypes)&&!e.XCollectionUtils.hasElements(t)){return true}for(var r=0;r<this.m_feedTypes.size();r++){if(t.contains(i.get(r))){return true}}return false};e.RsVizTupleElement.prototype.isSelectedByString=function(t){return e.XStringUtils.isNullOrEmpty(t)||this.m_feedTypes.containsKey(t)};e.RsVizTupleElement.prototype.getFeedTypes=function(){return this.m_feedTypes.getKeysAsReadOnlyListOfString()};e.RsVizTupleElement.prototype.isTotal=function(){return e.notNull(this.m_memberType)&&this.m_memberType.isTypeOf(e.MemberType.RESULT)};e.RsVizTupleElement.prototype.getDate=function(t){if(e.isNull(this.m_member)){return null}for(var i=0;i<this.m_valueList.size();i++){var r=this.m_valueList.get(i);if(r.getValueType()===e.XValueType.DATE){return r}if(t===0){return null}var n=r.getStringRepresentation();if(t===2){n=e.XStringUtils.concatenate2(n,"01")}else if(t===3){n=e.XStringUtils.concatenate2(n,"0101")}try{if(e.XString.startsWith(n,"!")&&e.XString.size(n)===9){return e.XDate.createDateFromString(e.XString.substring(n,1,9),e.DateTimeFormat.SAP)}else if(e.XString.size(n)===8){return e.XDate.createDateFromString(n,e.DateTimeFormat.SAP)}else if(e.XString.startsWith(n,"!")&&e.XString.size(n)===11){return e.XDate.createDateFromString(e.XString.substring(n,1,11),e.DateTimeFormat.ISO)}else if(e.XString.size(n)===10){return e.XDate.createDateFromString(n,e.DateTimeFormat.ISO)}}catch(e){continue}}return null};e.RsVizTupleElement.prototype.getFormattedDate=function(){if(e.isNull(this.m_member)){return null}for(var t=0;t<this.m_valueList.size();t++){var i=this.m_valueList.get(t);if(i.getValueType()===e.XValueType.DATE){return i.toString()}}return this.m_text};e.RsVizTupleElement.prototype.compareTo=function(t){if(e.isNull(t)){return 1}var i=t;var r=this.m_feedTypes.getKeysAsReadOnlyListOfString();var n=r.size();for(var a=0;a<n;a++){var s=r.get(a);var o=this.m_feedTypes.getByKey(s);var l=i.m_feedTypes.getByKey(s);if(e.isNull(l)){return 1}var u=o.getInteger()-l.getInteger();if(u!==0){return u}}return e.XString.isEqual(this.getKey(),i.getKey())?0:1};e.RsVizTupleElement.prototype.getDrillState=function(){return this.m_drillState};e.RsVizTupleElement.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.RsVizFrameRenderer=function(){};e.RsVizFrameRenderer.prototype=new e.XObject;e.RsVizFrameRenderer.prototype._ff_c="RsVizFrameRenderer";e.RsVizFrameRenderer.create=function(){return new e.RsVizFrameRenderer};e.RsVizFrameRenderer.prototype.render=function(t,i){var r=e.PrFactory.createStructure();var n=i.getQueryModel().getVizManager().getVizDef();if(e.notNull(n)&&n.containsKey(e.VizDefConstants.K_CHART)&&i.getAvailableDataCellCount()>0){r.putString("test","testValue")}r.putString("test2","testValue2");return r};e.RsVizFrameRenderer.prototype.renderVisualizationWithResultSet=function(e,t){return this.render(e.getSemanticBindingType(),t)};e.RsHiChartVizUserPrefrence={create:function(){return new e.RsHiChartVizUserPrefrence},userPrefrence:function(t,i,r){if(!e.XString.isEqual(r,e.VizDefConstants.K_SOLID_GAUGE)){var n=i.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);if(e.notNull(n)){var a=n.getStructureByKey(e.VizDefConstants.K_STYLE);var s=a.getStringByKey(e.VizDefConstants.K_COLOR);var o=a.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);var l=a.getStringByKey(e.VizDefConstants.K_FONT_SIZE);var u=t.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);if(e.notNull(u)){var p=u.getStructureByKey(r);if(e.notNull(p)){var g=p.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);var f=t.getListByKey(e.VizDefConstants.K_Y_AXIS);if(e.notNull(f)){var c=f.getStructureAt(0);if(e.notNull(c)){if(c.containsKey(e.VizDefConstants.K_STACK_LABELS)){var C=c.putNewStructure(e.VizDefConstants.K_STACK_LABELS);C.putBoolean(e.VizDefConstants.K_ENABLED,true);var _=C.putNewStructure(e.VizDefConstants.K_STYLE);if(e.notNull(s)){_.putString(e.VizDefConstants.K_COLOR,s);_.putString(e.VizDefConstants.K_FILL,s)}_.putString(e.VizDefConstants.K_FONT_WEIGHT,o);_.putString(e.VizDefConstants.K_FONT_SIZE,l)}}}if(e.notNull(g)){var m=g.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(m)){if(e.notNull(s)){m.putString(e.VizDefConstants.K_COLOR,s);m.putString(e.VizDefConstants.K_FILL,s)}m.putString(e.VizDefConstants.K_FONT_WEIGHT,o);m.putString(e.VizDefConstants.K_FONT_SIZE,l)}}}}}var S=i.getStructureByKey(e.VizDefConstants.K_TITLE);if(e.notNull(S)){var d=S.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);var T=t.getStructureByKey(e.VizDefConstants.K_TITLE);if(e.notNull(T)){if(d===false){T.putString(e.VizDefConstants.K_TEXT,"")}var y=S.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(y)){T.put(e.VizDefConstants.K_STYLE,y)}}}var h=i.getStructureByKey(e.VizDefConstants.K_SUB_TITLE);if(e.notNull(h)){var D=h.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);var R=t.getStructureByKey(e.VizDefConstants.K_SUBTITLE);if(e.notNull(R)){if(D===false){R.putString(e.VizDefConstants.K_TEXT,"")}var A=h.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(A)){R.put(e.VizDefConstants.K_STYLE,A)}}}var V=t.getByKey(e.VizDefConstants.K_X_AXIS);var E=e.notNull(V)&&V.isList()?V.asList():null;var v=e.notNull(V)&&V.isStructure()?V.asStructure():e.XCollectionUtils.hasElements(E)?E.getStructureAt(0):null;var N=i.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(N)){var z=N.getStructureByKey(e.VizDefConstants.K_AXIS_LABEL);if(e.notNull(z)){if(e.notNull(v)){var L=v.getStructureByKey(e.VizDefConstants.K_LABELS);if(e.isNull(L)){L=v.putNewStructure(e.VizDefConstants.K_LABELS)}var I=z.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(I)){L.put(e.VizDefConstants.K_STYLE,I)}}}}var K=t.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(K)){var O=i.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(O)){var F=O.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(F)){var b=F.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(b)){K.put(e.VizDefConstants.K_ITEM_STYLE,b)}}}}}return t}};e.RsHiChartVizUtils={create:function(){return new e.RsHiChartVizUtils},chartTitleBuilder:function(t,i,r){if(e.notNull(i)){var n=t.putNewStructure(e.VizDefConstants.K_TITLE);n.putString(e.VizDefConstants.K_TEXT,i);n.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT)}if(e.notNull(r)){var a=t.putNewStructure(e.VizDefConstants.K_SUBTITLE);a.putString(e.VizDefConstants.K_TEXT,r);a.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT)}},chartLegendBuilder:function(t){var i=t.putNewStructure(e.VizDefConstants.K_LEGEND);i.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);var r=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px");r.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px")},chartPlotBuilder:function(t,i,r){var n=true;if(e.notNull(r)&&r.hasElements()){var a=r.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);n=a.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,false)}var s=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var o=s.putNewStructure(e.VizDefConstants.K_SERIES);o.putInteger(e.VizDefConstants.K_CROP_THRESHOLD,1e3);var l=s.putNewStructure(i);l.putBoolean(e.VizDefConstants.K_GROUPING,true);var u=l.putNewStructure(e.VizDefConstants.K_DATA_LABELS);u.putBoolean(e.VizDefConstants.K_ENABLED,n);u.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted} ");var p=u.putNewStructure(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);p.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");p.putString(e.VizDefConstants.K_FONT_SIZE,"12px");p.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")},checkShowLegend:function(t,i,r,n){var a=i.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);var s=a.getStructureByKey(r);s.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,n);var o=i.getStructureByKey(e.VizDefConstants.K_LEGEND);o.putBoolean(e.VizDefConstants.K_ENABLED,n);if(e.isNull(t)){return}var l=t.getStructureByKey(e.VizDefConstants.K_CHART);if(e.isNull(l)){return}var u=false;var p=n;var g=l.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(g)){var f=g.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);if(e.notNull(f)){if(f.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.BOOLEAN){u=f.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,n)}else if(f.getElementTypeByKey(e.VizDefConstants.K_VISIBLE)===e.PrElementType.STRING){u=e.XBoolean.convertFromStringWithDefault(f.getStringByKey(e.VizDefConstants.K_VISIBLE),n)}else{u=n}var c=f.getBooleanByKeyExt(e.VizDefConstants.K_RESPONSIVE,true);p=u&&!c||n&&c;o.putBoolean(e.VizDefConstants.K_ENABLED,p)}}s.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,n)},vizProcessor:function(t,i,r,n){var a=null;var s=null;var o;var l;var u;var p;var g=e.PrFactory.createStructure();if(e.notNull(t)){var f=t.getStructureByKey(e.VizDefConstants.K_CHART);var c=r.putNewStructure(e.VizDefConstants.K_LEGEND);if(e.notNull(f)){a=f.getStringByKey(e.VizDefConstants.K_TITLE);s=f.getStringByKey(e.VizDefConstants.K_SUB_TITLE);e.RsHiChartVizUtils.chartTitleBuilder(r,a,s);var C=r.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var _=C.putNewStructure(n);var m=C.putNewStructure(e.VizDefConstants.K_SERIES);m.putString(e.VizDefConstants.K_BORDER_COLOR,e.VizDefConstants.K_TRANSPARENT);var S=_.putNewStructure(e.VizDefConstants.K_DATA_LABELS);o=f.getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(o)){var d=o.getStructureByKey(e.VizDefConstants.K_GENERAL);if(e.notNull(d)){u=d.getStructureByKey(e.VizDefConstants.K_LAYOUT);if(e.notNull(u)){var T=u.getIntegerByKey(e.VizDefConstants.K_PADDING_BOTTOM);i.putInteger(e.VizDefConstants.K_SPACING_BOTTOM,T)}else{i.putInteger(e.VizDefConstants.K_SPACING_BOTTOM,0)}}l=o.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(l)){c=r.putNewStructure(e.VizDefConstants.K_LEGEND);var y=l.getStructureByKey(e.VizDefConstants.K_LABEL);if(e.notNull(y)){var h=y.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.notNull(h)){var D=h.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);var R=h.getStringByKey(e.VizDefConstants.K_FONT_SIZE);var A=h.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);var V=c.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);V.putString(e.VizDefConstants.K_FONT_FAMILY,D);V.putString(e.VizDefConstants.K_FONT_WEIGHT,A);V.putString(e.VizDefConstants.K_FONT_SIZE,R)}}}p=o.getStructureByKey(e.VizDefConstants.K_LEGEND_GROUP);if(e.notNull(p)){var E=p.getStructureByKey(e.VizDefConstants.K_LAYOUT);if(e.notNull(E)){var v=E.getStringByKey(e.VizDefConstants.K_POSITION);c.putString(e.VizDefConstants.K_VERTICAL_ALIGN,v)}}g=o.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);if(e.notNull(g)){var N=g.getStructureByKey(e.VizDefConstants.K_DATA_LABEL);if(e.notNull(N)){S=e.RsHiChartVizUtils.datalabelPloter(N,S)}var z=m.putNewStructure(e.VizDefConstants.K_DATA_LABELS);z.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted}")}}}}else{l=r.putNewStructure(e.VizDefConstants.K_LEGEND);l.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putInteger(e.VizDefConstants.K_SPACING_TOP,0);e.RsHiChartVizUtils.chartTitleBuilder(r,a,s);e.RsHiChartVizUtils.chartLegendBuilder(r);e.RsHiChartVizUtils.chartPlotBuilder(r,n,g)}},datalabelPloter:function(t,i){var r=t.getBooleanByKeyExt(e.VizDefConstants.K_VISIBLE,true);var n=t.getBooleanByKeyExt(e.VizDefConstants.K_IS_HIDDEN_WHEN_OVERLAP,true);var a=t.getStructureByKey(e.VizDefConstants.K_STYLE);var s=a.getStringByKey(e.VizDefConstants.K_FONT_SIZE);var o=a.getStringByKey(e.VizDefConstants.K_FONT_WEIGHT);var l=a.getStringByKey(e.VizDefConstants.K_FONT_FAMILY);var u=a.getStringByKey(e.VizDefConstants.K_COLOR);i.putBoolean(e.VizDefConstants.K_ENABLED,r);i.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,n);var p=i.putNewStructure(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_FONT_FAMILY,l);p.putString(e.VizDefConstants.K_FONT_SIZE,s);p.putString(e.VizDefConstants.K_FONT_WEIGHT,o);if(!e.XString.isEqual(u,null)){p.putString("fill",u);p.putString(e.VizDefConstants.K_COLOR,u)}p.putString("textOutline","0px");return i},addColorGradient:function(t,i,r){if(e.notNull(i)){var n=i.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);var a=t.getStructureByKey(e.VizDefConstants.K_COLOR_SYNC);if(!i.getStructureByKey(e.VizDefConstants.K_CHART).getBooleanByKeyExt(e.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(e.XCollectionUtils.hasElements(n)){var s=n.getStructureByKey(e.VizDefConstants.K_PALETTE_DESC);if(e.notNull(s)){var o=r.putNewStructure(e.VizDefConstants.K_PALETTE);var l=o.putNewList(e.VizDefConstants.K_GRADIENT_KEYS);var u=s.getStructureByKey(e.VizDefConstants.K_GRADIENT);if(e.notNull(u)){var p=u.getKeysAsReadOnlyListOfString();var g=e.XList.create();for(var f=0;f<p.size();f++){g.add(e.XDoubleValue.create(e.XDouble.convertFromString(p.get(f))))}g.sortByComparator(new e.XComparatorDouble);for(var c=0;c<g.size();c++){l.addDouble(g.get(c).getDouble())}o.put(e.VizDefConstants.K_GRADIENT,u)}}}}var C;var _;var m=null;var S=i.getStructureByKey(e.VizDefConstants.K_CHART);if(e.notNull(S)){var d=S.getListByKey(e.VizDefConstants.K_BINDINGS);for(var T=0;T<d.size();T++){C=d.getStructureAt(T);if(e.XString.isEqual(C.getStringByKey(e.VizDefConstants.K_FEED),e.VizDefConstants.K_COLOR)){var y=C.getListByKey(e.VizDefConstants.K_SOURCE);if(y.size()>0){m=y.getStructureAt(0).getStringByKey(e.VizDefConstants.K_ID)}break}}var h=t.getStructureByKey(e.VizDefConstants.K_STORY_WIDE_SETTINGS);if(e.notNull(h)){var D=h.getListByKey(e.VizDefConstants.K_CUSTOM_COLOR_PALETTES);if(e.notNull(D)){var R=D.getStructureAt(0).getStructureByKey(e.VizDefConstants.K_GRADIENT);var A=R.getKeysAsReadOnlyListOfString();var V=e.PrFactory.createList();for(var E=0;E<A.size();E++){var v=e.PrFactory.createList();v.addString(A.get(E));v.addString(R.getStringByKey(A.get(E)));V.add(v)}}}if(e.notNull(a)){_=a.getStructureByKey(m);if(e.notNull(_)){var N=_.getStructureByKey(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);r.put(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS,N)}}}}}};e.RsHiChartVizUtilsCorrelation={create:function(){return new e.RsHiChartVizUtilsCorrelation},renderValueAxis:function(t,i,r){var n=t.putNewStructure(e.VizDefConstants.K_TITLE);t.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);if(e.isNull(i)){return}t.putBoolean(e.VizDefConstants.K_VISIBLE,i.getBooleanByKey(e.VizDefConstants.K_VISIBLE));var a=i.getStructureByKey(e.VizDefConstants.K_AXIS_LINE);t.putInteger(e.VizDefConstants.K_LINE_WIDTH,a.getBooleanByKey(e.VizDefConstants.K_VISIBLE)?3:0);t.putString(e.VizDefConstants.K_LINE_COLOR,"#bbbdbf");var s=i.getStructureByKey(e.VizDefConstants.K_AXIS_TICK);var o=0;if(e.notNull(s)&&s.getBooleanByKey(e.VizDefConstants.K_VISIBLE)){o=s.getIntegerByKey(e.VizDefConstants.K_SIZE)}t.putInteger(e.VizDefConstants.K_TICK_LENGTH,o);t.putString(e.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");var l=i.getStructureByKey(e.VizDefConstants.K_LABEL);var u=t.putNewStructure(e.VizDefConstants.K_LABEL);u.putBoolean(e.VizDefConstants.K_ENABLED,l.getBooleanByKey(e.VizDefConstants.K_VISIBLE));var p=t.putNewStructure(e.VizDefConstants.K_STYLE);var g=l.getStructureByKey(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_COLOR,g.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_FONT_FAMILY,l.getStringByKey(e.VizDefConstants.K_FONT_FAMILY));p.putString(e.VizDefConstants.K_FONT_SIZE,l.getStringByKey(e.VizDefConstants.K_FONT_SIZE));var f=i.getStructureByKey(e.VizDefConstants.K_TITLE);n.putBoolean(e.VizDefConstants.K_ENABLED,f.getBooleanByKey(e.VizDefConstants.K_VISIBLE));if(r){n.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_MIDDLE)}var c=n.putNewStructure(e.VizDefConstants.K_STYLE);var C=f.getStructureByKey(e.VizDefConstants.K_STYLE);c.putString(e.VizDefConstants.K_COLOR,"#000000");c.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD);p.putString(e.VizDefConstants.K_COLOR,C.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_FONT_FAMILY,C.getStringByKey(e.VizDefConstants.K_FONT_FAMILY));p.putString(e.VizDefConstants.K_FONT_SIZE,C.getStringByKey(e.VizDefConstants.K_FONT_SIZE))},legendStyler:function(t){var i=t.putNewStructure(e.VizDefConstants.K_LEGEND);i.putBoolean(e.VizDefConstants.K_ENABLED,true);i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var r=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px");r.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px")}};e.RsHiChartVizUtilsHeatmap={create:function(){return new e.RsHiChartVizUtilsHeatmap},rendrerHeatmap:function(t,i,r,n){var a=t.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);if(e.isNull(a)){a=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}var s=a.getStructureByKey(i);s.putBoolean(e.VizDefConstants.K_COLOR_BY_POINT,false);var o=t.getStructureByKey(e.VizDefConstants.K_CHART);o.putString(e.VizDefConstants.K_TYPE,i);var l=true;o.putBoolean(e.VizDefConstants.K_INVERTED,l);var u=t.putNewStructure(e.VizDefConstants.K_COLOR_AXIS);var p=t.getStructureByKey(e.VizDefConstants.K_PALETTE);if(e.notNull(p)){var g=e.PrFactory.createList();var f=0;var c="#FFFFFF";var C=p.getListByKey(e.VizDefConstants.K_GRADIENT_KEYS);var _=p.getStructureByKey(e.VizDefConstants.K_GRADIENT);for(var m=0;m<C.size();m++){var S=e.PrFactory.createList();f=C.getDoubleAt(m)/100;c=_.getStringByKey(e.XDouble.convertToString(C.getDoubleAt(C.size()-1-m)));S.addDouble(f);S.addString(c);g.add(S)}u.put(e.VizDefConstants.K_STOPS,g)}var d=e.XString.isEqual(i,e.VizDefConstants.K_HEATMAP);if(e.notNull(n)){var T=e.PrFactory.createStructure();var y=0;var h=0;var D="#FFFFFF";var R=n.getListByKey(e.VizDefConstants.K_THRESHOLDS);if(e.notNull(R)&&d){var A=e.PrFactory.createList();var V=1;if(t.containsKey(e.VizDefConstants.K_MAX_ELEMENT)){V=e.XMath.max(e.XDouble.convertToInt(t.getDoubleByKey(e.VizDefConstants.K_MAX_ELEMENT)),e.XDouble.convertToInt(t.getDoubleByKey(e.VizDefConstants.K_MAX_ELEMENT))*-1)}for(var E=0;E<R.size();E++){T=R.getStructureAt(E);var v=e.PrFactory.createList();y=T.getDoubleByKey(e.VizDefConstants.K_LOW);D=T.getStringByKey(e.VizDefConstants.K_COLOR);h=y/V;v.addDouble(h);v.addString(D);A.add(v)}u.put(e.VizDefConstants.K_STOPS,A)}}var N=t.getStructureByKey(e.VizDefConstants.K_LEGEND);var z=e.PrFactory.createList();var L=e.PrFactory.createStructure();var I=e.PrFactory.createList();var K=e.PrFactory.createStructure();if(d){z=t.getListByKey(e.VizDefConstants.K_X_AXIS);if(e.isNull(z)){z=t.putNewList(e.VizDefConstants.K_X_AXIS);L=z.addNewStructure()}else{L=z.getStructureAt(0)}I=t.getListByKey(e.VizDefConstants.K_Y_AXIS);if(e.isNull(I)){I=t.putNewList(e.VizDefConstants.K_Y_AXIS);K=I.addNewStructure()}else{K=I.getStructureAt(0)}}var O=s.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);var F=K.putNewStructure(e.VizDefConstants.K_TITLE);var b=L.putNewStructure(e.VizDefConstants.K_TITLE);F.putString(e.VizDefConstants.K_TEXT,"");b.putString(e.VizDefConstants.K_TEXT,"");var H="#a0f3ff";var w="#003c6b";var X=true;if(e.notNull(r)){var B=r.getStructureByKey(e.VizDefConstants.K_COLOR_SCHEME);if(e.notNull(B)){var M=B.getListByKey(e.VizDefConstants.K_PALETTE_COLORS);if(e.notNull(M)){if(M.size()>0){w=M.getStringAt(0);H=M.getStringAt(M.size()-1)}}}var x=r.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(x)){var P=x.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS2);if(e.notNull(P)){L=e.RsHiChartUtils.axisPloter(P,L,i,true)}var U=x.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(U)){K=e.RsHiChartUtils.axisPloter(U,K,i,true)}var G=x.getStructureByKey(e.VizDefConstants.K_PLOT_AREA);if(e.notNull(G)){O.putBoolean(e.VizDefConstants.K_ENABLED,X)}}u.putString(e.VizDefConstants.K_MIN_COLOR,H);u.putString(e.VizDefConstants.K_MAX_COLOR,w);u.putBoolean(e.VizDefConstants.K_REVERSED,false)}else{var Y=K.putNewStructure(e.VizDefConstants.K_LABELS);var W=Y.putNewStructure(e.VizDefConstants.K_STYLE);W.putString(e.VizDefConstants.K_FONT_SIZE,"13px");W.putString(e.VizDefConstants.K_FILL,"rgb(166, 168, 171)");W.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);L.putString(e.VizDefConstants.K_LINE_COLOR,"#FFFFFF");var q=L.putNewStructure(e.VizDefConstants.K_LABELS);var k=q.putNewStructure(e.VizDefConstants.K_STYLE);k.putString(e.VizDefConstants.K_FONT_SIZE,"13px");k.putString(e.VizDefConstants.K_FILL,"rgb(166, 168, 171)");k.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);u.putString(e.VizDefConstants.K_MIN_COLOR,H);u.putString(e.VizDefConstants.K_MAX_COLOR,w);u.putInteger(e.VizDefConstants.K_MIN,1)}var Z=e.XString.isEqual(i,e.VizDefConstants.K_TREEMAP);if(Z){s.putString(e.VizDefConstants.K_TYPE,i);var j=s.putNewList(e.VizDefConstants.K_LEVELS);var Q=j.addNewStructure();Q.putInteger(e.VizDefConstants.K_LEVEL,1);Q.putInteger(e.VizDefConstants.K_BORDER_WIDTH,6);var J=Q.putNewStructure(e.VizDefConstants.K_DATA_LABELS);J.putBoolean(e.VizDefConstants.K_ENABLED,true);J.putString(e.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/>");J.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_LEFT);J.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var $=J.putNewStructure(e.VizDefConstants.K_STYLE);$.putString(e.VizDefConstants.K_FONT_SIZE,"14px");var ee=j.addNewStructure();ee.putInteger(e.VizDefConstants.K_LEVEL,2);var te=ee.putNewStructure(e.VizDefConstants.K_DATA_LABELS);te.putBoolean(e.VizDefConstants.K_ENABLED,true);te.putString(e.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/><div>{point.valueFormatted}</div >");N.putInteger(e.VizDefConstants.K_Y,25)}O.putBoolean(e.VizDefConstants.K_ENABLED,X);O.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);var ie=O.putNewStructure(e.VizDefConstants.K_STYLE);ie.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");ie.putString(e.VizDefConstants.K_FONT_SIZE,"10px");ie.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_NORMAL);ie.putString(e.VizDefConstants.K_FILL,"black");ie.putString(e.VizDefConstants.K_COLOR,"black");ie.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px");O.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);N.putBoolean(e.VizDefConstants.K_ENABLED,true);N.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);N.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);N.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_MIDDLE);N.putInteger("x",15);var re=N.putNewStructure(e.VizDefConstants.K_STYLE);re.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");return t}};e.RsHiChartVizUtilsSimple={create:function(){return new e.RsHiChartVizUtilsSimple},legendStyler:function(t){var i=t.getStructureByKey(e.VizDefConstants.K_LEGEND);if(e.notNull(i)){i.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);i.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);i.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);i.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);i.putInteger(e.VizDefConstants.K_Y,20);i.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var r=i.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px");r.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);r.putString(e.VizDefConstants.K_FONT_SIZE,"12px")}},plotOptionChart:function(t,i,r,n,a,s){var o=t.putNewStructure(e.VizDefConstants.K_TITLE);o.putString(e.VizDefConstants.K_TEXT,"");t.putInteger(e.VizDefConstants.K_GRID_LINE_WIDTH,0);var l;l=n.getStructureByKey(i);if(a===1||e.isNull(l)){l=n.putNewStructure(i)}if(e.XStringUtils.isNotNullAndNotEmpty(r)&&!e.XString.isEqual(r,"null")){l.putString(e.VizDefConstants.K_STACKING,r)}l.putInteger(e.VizDefConstants.K_Y_AXIS,a);l.putBoolean(e.VizDefConstants.K_COLOR_BY_POINT,false);l.putDouble(e.VizDefConstants.K_POINT_PADDING,0);if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BOXPLOT,i)){l.putString(e.VizDefConstants.K_FILL_COLOR,s);t.putInteger(e.VizDefConstants.K_TICK_AMOUNT,4)}var u=l.getStructureByKey(e.VizDefConstants.K_DATA_LABELS);if(e.isNull(u)){u=l.putNewStructure(e.VizDefConstants.K_DATA_LABELS)}e.RsHiChartVizUtilsSimple.dataLabelBuilder(u)},addReferenceLine:function(t,i,r,n,a,s){var o=false;var l=t.getStructureByKey(e.VizDefConstants.K_ANALYTIC_OBJECTS);if(e.notNull(l)){var u=l.getListByKey(e.VizDefConstants.K_REFERENCELINES);if(e.notNull(u)){if(u.hasElements()){o=true;for(var p=0;p<u.size();p++){var g=u.getStructureAt(p);var f=g.getListByKey(e.VizDefConstants.K_MARKERS);var c=g.getStringByKey(e.VizDefConstants.K_FEED);for(var C=0;C<f.size();C++){var _=f.getStructureAt(C);var m=0;if(_.containsKey(e.VizDefConstants.K_DYNAMIC_VALUE)){var S=_.getStructureByKey(e.VizDefConstants.K_DYNAMIC_VALUE);var d=S.getStringByKey(e.VizDefConstants.K_AGGREGATION_TYPE);var T=S.getStructureByKey(e.VizDefConstants.K_MEASURE).getStructureByKey(e.VizDefConstants.K_ID).getStringByKey(e.VizDefConstants.K_ID);var y=n.getTupleIndexForMemberName(T);if(!e.XCollectionUtils.hasElements(y)){var h=a.getTupleIndexForMemberName(T);if(e.XCollectionUtils.hasElements(h)){m=e.RsHiChartVizUtilsSimple.getAggregateValue(h,n,d,false,s)}}else{m=e.RsHiChartVizUtilsSimple.getAggregateValue(y,a,d,true,s)}}else{m=e.RsHiChartRenderer.getDoubleValueExtended(_,e.VizDefConstants.K_VALUE,0)}var D=e.VizDefConstants.V_BLACK;if(_.hasStringByKey(e.VizDefConstants.K_COLOR)){D=_.getStringByKey(e.VizDefConstants.K_COLOR)}var R=_.getStringByKey("belowColor");var A=_.getStringByKey("aboveColor");var V=_.getStructureByKey(e.VizDefConstants.K_LABEL);var E=V.getStringByKey(e.VizDefConstants.K_TEXT);var v=V.getStructureByKey(e.VizDefConstants.K_STYLE);if(e.XString.isEqual(e.VizDefConstants.K_VALUE_AXIS,c)){e.RsHiChartVizUtilsSimple.ploLineBuilder(i,m,R,A,D,E,v)}if(e.XString.isEqual(e.VizDefConstants.K_VALUE_AXIS2,c)){e.RsHiChartVizUtilsSimple.ploLineBuilder(r,m,R,A,D,E,v)}}}}}}return o},ploLineBuilder:function(t,i,r,n,a,s,o){var l="#000000";var u=t.containsKey(e.VizDefConstants.K_PLOT_LINES)?t.getListByKey(e.VizDefConstants.K_PLOT_LINES):t.putNewList(e.VizDefConstants.K_PLOT_LINES);var p=u.addNewStructure();if(e.notNull(a)){l=a}p.putString(e.VizDefConstants.K_COLOR,l);var g=p.putNewStructure(e.VizDefConstants.K_LABEL);if(e.notNull(s)){g.putString(e.VizDefConstants.K_TEXT,s)}else{g.putString(e.VizDefConstants.K_TEXT,e.XDouble.convertToString(i))}var f=g.putNewStructure(e.VizDefConstants.K_STYLE);f.putString(e.VizDefConstants.K_COLOR,o.getStringByKey(e.VizDefConstants.K_COLOR));p.putString(e.VizDefConstants.K_DASH_STYLE,e.VizDefConstants.K_SHORT_DOT);g.putInteger(e.VizDefConstants.K_ROTATION,0);p.putDouble(e.VizDefConstants.K_VALUE,i);p.putInteger(e.VizDefConstants.K_WIDTH,2);var c=t.containsKey(e.VizDefConstants.K_PLOT_BANDS)?t.getListByKey(e.VizDefConstants.K_PLOT_BANDS):t.putNewList(e.VizDefConstants.K_PLOT_BANDS);if(e.notNull(r)){var C=c.addNewStructure();C.putString(e.VizDefConstants.K_COLOR,e.RsHiChartVizUtilsSimple.setColorAlpha(r,.2));C.putDouble(e.VizDefConstants.K_FROM,0);C.putDouble(e.VizDefConstants.K_TO,i)}if(e.notNull(n)){var _=c.addNewStructure();_.putString(e.VizDefConstants.K_COLOR,e.RsHiChartVizUtilsSimple.setColorAlpha(n,.2));_.putDouble(e.VizDefConstants.K_FROM,i);_.putDouble(e.VizDefConstants.K_TO,i*100)}},setColorAlpha:function(t,i){var r=null;var n=e.XDouble.convertToString(i);if(e.notNull(t)){if(e.XString.startsWith(t,"rgb")){var a=e.XString.indexOf(t,")");if(a>0){r=e.XString.replace(t,"rgb","rgba");var s=e.XStringUtils.concatenate3(",",n,")");r=e.XString.replace(r,")",s)}}else if(e.XString.isEqual(t,"transparent")){r=e.XStringUtils.concatenate3("rgba(255,255,255,",n,")")}else{r=t}}return r},dataLabelBuilder:function(t){var i=t.putNewStructure(e.VizDefConstants.K_STYLE);t.putBoolean(e.VizDefConstants.K_ENABLED,true);t.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);t.putString(e.VizDefConstants.K_FORMAT,"{point.yFormatted} ");i.putString(e.VizDefConstants.K_FILL,"black");i.putString(e.VizDefConstants.K_COLOR,"black");i.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");i.putString(e.VizDefConstants.K_FONT_SIZE,"12px");i.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);i.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px")},dataLabelAlignment:function(t,i,r,n){var a=t.putNewStructure(e.VizDefConstants.K_STACK_LABELS);a.putBoolean(e.VizDefConstants.K_ENABLED,n);a.putString(e.VizDefConstants.K_FORMAT,e.XStringUtils.concatenate3("{total:,.",e.XInteger.convertToString(r),"f}"));if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BAR,i)){var s=a.putNewStructure(e.VizDefConstants.K_STYLE);s.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)");s.putString(e.VizDefConstants.K_FONT_SIZE,"12px");s.putString(e.VizDefConstants.K_FONT_STYLE,e.VizDefConstants.V_NORMAL);s.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD)}else if(e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_COLUMN,i)){a.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);a.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);a.putInteger(e.VizDefConstants.K_Y,-20);a.putInteger(e.VizDefConstants.K_X,5)}else{a.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);a.putInteger(e.VizDefConstants.K_Y,-20)}},getAggregateValue:function(t,i,r,n,a){var s=0;var o=0;for(var l=0;l<i.getTuplesCount();l++){if(!i.getTupleAt(l).isTotal()){for(var u=0;u<t.size();u++){var p=t.get(u).getInteger();var g;if(n){g=a.getDataCell(p,l)}else{g=a.getDataCell(l,p)}if(g.getValueException()!==e.ValueException.NORMAL){continue}var f=g.getDouble();if(s===0){o=f}else if(e.XString.isEqual(r,"max")){if(o<f){o=f}}else if(e.XString.isEqual(r,"min")){if(o>f){o=f}}else{o=o+f}s++}}}if(e.XString.isEqual(r,"average")||e.XString.isEqual(r,"avg")){return o/s}return o}};e.GridRendererFactoryImpl=function(){};e.GridRendererFactoryImpl.prototype=new e.XObject;e.GridRendererFactoryImpl.prototype._ff_c="GridRendererFactoryImpl";e.GridRendererFactoryImpl.create=function(){return new e.GridRendererFactoryImpl};e.GridRendererFactoryImpl.prototype.newRenderer=function(t){return e.RsSacTableRenderer.createAnalyticsGridRenderer()};e.SacAnalyticTableExportHelperFactory=function(){};e.SacAnalyticTableExportHelperFactory.prototype=new e.XObject;e.SacAnalyticTableExportHelperFactory.prototype._ff_c="SacAnalyticTableExportHelperFactory";e.SacAnalyticTableExportHelperFactory.create=function(){return new e.SacAnalyticTableExportHelperFactory};e.SacAnalyticTableExportHelperFactory.prototype.newTableExportHelper=function(t){return e.SacAnalyticTableExportHelper.createAnalyticsTableExportHelper(t)};e.SacTableClipboardHelperFactory=function(){};e.SacTableClipboardHelperFactory.prototype=new e.XObject;e.SacTableClipboardHelperFactory.prototype._ff_c="SacTableClipboardHelperFactory";e.SacTableClipboardHelperFactory.create=function(){return new e.SacTableClipboardHelperFactory};e.SacTableClipboardHelperFactory.prototype.newClipboardHelper=function(t){return e.SacAnalyticsTableClipboardHelper.createForAnalytics(t)};e.RsSacTableRenderer=function(){};e.RsSacTableRenderer.prototype=new e.XObject;e.RsSacTableRenderer.prototype._ff_c="RsSacTableRenderer";e.RsSacTableRenderer.createAnalyticsGridRenderer=function(){var t=new e.RsSacTableRenderer;return t};e.RsSacTableRenderer.prototype.m_tableJson=null;e.RsSacTableRenderer.prototype.m_rowList=null;e.RsSacTableRenderer.prototype.m_renderHelper=null;e.RsSacTableRenderer.prototype.prepareJsonStructure=function(){this.m_tableJson=e.PrFactory.createStructure();this.m_rowList=this.m_tableJson.putNewList(e.SacTableConstants.TD_L_ROWS)};e.RsSacTableRenderer.prototype.render=function(t){var i=t.getVisualizationData();this.prepareJsonStructure();var r=this.getTableJson();this.m_renderHelper=e.SacAnalyticTableWidgetRenderHelper.createAnalyticTableRenderHelper(i);if(e.isNull(i)){r=null}else{if(i.isPartial()){this.m_renderHelper.fillRowsFromList(i.getHeaderRowList(),this.m_rowList,0,i.isFreezeHeaderRows(),i.getFreezeUpToRow());this.m_renderHelper.fillRowsFromList(i.getLocalRowList(),this.m_rowList,i.getCurrentRowsOffset()+i.getHeaderRowList().size(),false,i.getFreezeUpToRow());r.putBoolean(e.SacTableConstants.TD_B_PARTIAL,true)}else{this.m_renderHelper.fillRowsFromList(i.getHeaderRowList(),this.m_rowList,0,i.isFreezeHeaderRows(),i.getFreezeUpToRow());this.m_renderHelper.fillRowsFromList(i.getRowList(),this.m_rowList,i.getHeaderRowList().size(),false,i.getFreezeUpToRow());var n=r.putNewStructure(e.SacTableConstants.TD_B_PARTIAL);n.putInteger(e.SacTableConstants.TDP_N_TOTAL_ROWS,i.getRowsTotalCount());n.putInteger(e.SacTableConstants.TDP_N_ROW_HEIGHT,e.SacTableConstants.DF_R_N_HEIGHT)}this.postRender(i);r.putBoolean(e.SacTableConstants.TD_B_SCROLL_TO_TOP,false);t.updateModel(r,this.getFullRowList(i))}return r};e.RsSacTableRenderer.prototype.reFormat=function(t,i){var r=t.getVisualizationData();var n=null;if(e.notNull(r)&&e.notNull(this.m_renderHelper)){this.prepareJsonStructure();if(i){this.m_renderHelper.fillRowsFromList(r.getHeaderRowList(),this.m_rowList,0,r.isFreezeHeaderRows(),r.getFreezeUpToRow());this.m_renderHelper.fillRowsFromList(r.getRowList(),this.m_rowList,r.getHeaderRowList().size(),false,r.getFreezeUpToRow())}this.postRender(r);n=this.getTableJson();n.putBoolean(e.SacTableConstants.TD_B_PARTIAL,true);n.putBoolean(e.SacTableConstants.TD_B_SCROLL_TO_TOP,false);t.updateModel(n,this.getFullRowList(r))}return n};e.RsSacTableRenderer.prototype.getFullRowList=function(t){var i=e.XList.create();var r=e.PrFactory.createList();this.m_renderHelper.fillRowsFromList(t.getHeaderRowList(),r,0,t.isFreezeHeaderRows(),t.getFreezeUpToRow());this.m_renderHelper.fillRowsFromListKeepGaps(t.getRowList(),r,t.getHeaderRowList().size());for(var n=0;n<r.size();n++){i.add(r.getStructureAt(n))}return i};e.RsSacTableRenderer.prototype.postRender=function(t){var i=null;if(e.notNull(this.m_renderHelper)){i=this.m_renderHelper.renderGenericSettings(this.m_tableJson);this.getTableJson().putInteger(e.SacTableConstants.TD_N_DATA_REGION_HEADER_END_ROW,t.getHeaderEndRow());var r=t.getTotalRowDiff();if(r<0){this.getTableJson().putInteger(e.SacTableConstants.TD_N_TOTAL_ROWS_DIFF,r)}else{this.getTableJson().remove(e.SacTableConstants.TD_N_TOTAL_ROWS_DIFF)}t.setTotalRowDiff(0)}return i};e.RsSacTableRenderer.prototype.getTableJson=function(){return this.m_tableJson};e.RsSacTableRenderer.prototype.releaseObject=function(){this.releaseStaleData();e.XObject.prototype.releaseObject.call(this)};e.RsSacTableRenderer.prototype.releaseStaleData=function(){this.m_tableJson=null;this.m_rowList=null};e.FioriGrid=function(){};e.FioriGrid.prototype=new e.XObject;e.FioriGrid.prototype._ff_c="FioriGrid";e.FioriGrid.MAGIC_CELL_DIV="/";e.FioriGrid.create=function(t){var i=new e.FioriGrid;i.setupGrid(t);return i};e.FioriGrid.prototype.m_cells=null;e.FioriGrid.prototype.m_rowDefs=null;e.FioriGrid.prototype.m_colDefs=null;e.FioriGrid.prototype.m_fixedWidth=0;e.FioriGrid.prototype.m_fixedHeight=0;e.FioriGrid.prototype.m_resultSet=null;e.FioriGrid.prototype.m_semStyles=null;e.FioriGrid.prototype.m_withDetails=false;e.FioriGrid.prototype.m_fixedHeightOff=0;e.FioriGrid.prototype.m_fixedWidthOff=0;e.FioriGrid.prototype.m_offsetRows=0;e.FioriGrid.prototype.m_offsetColumns=0;e.FioriGrid.prototype.m_suppressRepetition=true;e.FioriGrid.prototype.m_suppress_unit=null;e.FioriGrid.prototype.setupGrid=function(t){this.m_resultSet=t;this.m_withDetails=true;this.m_semStyles=new e.XHashMapOfStringByString};e.FioriGrid.prototype.releaseObject=function(){if(e.notNull(this.m_cells)){var t=this.m_cells.size0();for(var i=0;i<t;i++){var r=this.m_cells.size1();for(var n=0;n<r;n++){var a=this.m_cells.getByIndices(i,n);if(e.notNull(a)){e.XObjectExt.release(a);this.m_cells.setByIndices(i,n,null)}}}e.XObjectExt.release(this.m_cells);this.m_cells=null}this.m_colDefs=null;this.m_rowDefs=null;this.m_resultSet=null;e.XObject.prototype.releaseObject.call(this)};e.FioriGrid.prototype.prepareCellStructure=function(){if(e.isNull(this.m_cells)&&e.notNull(this.m_resultSet)){this.prepareStructure()}};e.FioriGrid.prototype.prepareStructure=function(){var t=this.m_resultSet.getColumnsAxis();var i=e.XMath.max(t.getDataCount(),t.getTuplesCount());var r=this.m_resultSet.getRowsAxis();this.m_fixedHeight=e.XMath.max(this.getEffectiveFieldSizeCol(t),this.getEffectiveFieldSizeRow(r)===0?0:1);var n=r.getDataCount();var a=r.getTuplesCount();var s=e.XMath.max(n,a);this.m_fixedWidth=e.XMath.max(this.getEffectiveFieldSizeRow(r),1);var o=this.m_fixedWidth+i;var l=this.m_fixedHeight+s;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_cells=e.XArray2Dim.create(o,l);this.m_rowDefs=e.XList.create();this.m_colDefs=e.XList.create();for(var u=0;u<o;u++){this.m_colDefs.add(e.FioriLineDef.create())}for(var p=0;p<l;p++){this.m_rowDefs.add(e.FioriLineDef.create())}this.setTitleCells(r,e.XMath.max(this.m_fixedHeight-1,0),t.getRsDimensions().isEmpty());this.setTitleCells(t,e.XMath.max(this.m_fixedWidth-1,0),r.getRsDimensions().isEmpty());var g=this.m_fixedHeight-this.m_fixedHeightOff;this.setHeaderCells(r,g);var f=this.m_fixedWidth-this.m_fixedWidthOff;this.setHeaderCells(t,f);this.setDataCells()};e.FioriGrid.prototype.getMaxDisplayLevel=function(t,i){var r=t.getTuplesCount();var n=0;for(var a=0;a<r;a++){var s=t.getTupleAt(a);n=e.XMath.max(n,s.getTupleElementByDimension(i).getDisplayLevel())}return n};e.FioriGrid.prototype.getEffectiveFieldSizeCol=function(e){var t=0;var i=e.getRsDimensions();var r=i.size();for(var n=0;n<r;n++){t=t+i.get(n).getResultSetFields().size();t=t+this.getMaxDisplayLevel(e,i.get(n))}return t};e.FioriGrid.prototype.getEffectiveFieldSizeRow=function(e){var t=0;var i=e.getRsDimensions();var r=i.size();for(var n=0;n<r;n++){t=t+i.get(n).getResultSetFields().size()}return t};e.FioriGrid.prototype.setTitleCells=function(t,i,r){var n=t.getType();var a=t.getRsDimensions();var s=0;var o=e.XStringBuffer.create();var l=e.XStringBuffer.create();var u=a.size();for(var p=0;p<u;p++){var g=a.get(p);var f=g.getResultSetFields();var c=f.size();for(var C=0;C<c;C++){var _=f.get(C).getName();if(e.XStringUtils.isNullOrEmpty(g.getName())){o.append("[").append(_).append("]")}else{if(C===0){l.append(g.getText())}if(g.isMeasureStructure()){if(C===0){o.append("Measures")}}else if(g.isStructure()){if(C===0){o.append("Structure")}}else{if(C===0){o.append(g.getName()).append(".[")}else{o.append("[")}o.append(_).append("]")}}if(n===e.AxisType.ROWS){if(!(g.isStructure()&&u===p+1)){var m=e.FioriGridCell.create(o.toString(),e.FioriCellType.TITLE);m.setDisplayValue(l.toString());var S=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(e.notNull(S)){m.setDimension(S)}else{m.setDimension(g.getName())}m.setRow(i);m.setColumn(s);this.setCell(s,i,m)}}else{if(!(g.isStructure()&&u===p+1)){var d=this.m_cells.getByIndices(i,s);if(e.notNull(d)){var T=o.toString();o.clear();l.clear();o.append(d.toString());o.append(e.FioriGrid.MAGIC_CELL_DIV);o.append(T);l.append(d.getDisplayValue());if(C===0&&!g.isStructure()){l.append(e.FioriGrid.MAGIC_CELL_DIV);l.append(g.getText())}}var y=e.FioriGridCell.create(o.toString(),e.FioriCellType.TITLE);y.setRow(s);y.setColumn(i);y.setDisplayValue(l.toString());if(e.notNull(d)){y.setDimension(d.getDimension());var h=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(e.notNull(h)){y.setDimensionOther(h)}else{y.setDimensionOther(g.getName())}}else{var D=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(e.notNull(D)){y.setDimension(D)}else{y.setDimension(g.getName())}}this.setCell(i,s,y)}else if(r){this.m_fixedWidthOff=1}}o.clear();l.clear();s++}}};e.FioriGrid.prototype.setDataCells=function(){var t=this.m_resultSet.getInputReadinessStates();var i=this.m_resultSet.getDataColumns();var r=this.m_resultSet.getDataRows();var n=e.XStringBuffer.create();for(var a=0;a<r;a++){for(var s=0;s<i;s++){var o=this.m_resultSet.getDataCell(s,a);var l;if(this.m_withDetails){l=e.FioriGridCell.create(this.getCellValueWithDetails(o,t),e.FioriCellType.DATA)}else{l=e.FioriGridCell.create(this.getCellValue(this.formatDataCellValue(o),o),e.FioriCellType.DATA)}n.clear();this.appendPrefixValueSuffix(o.getCurrencyUnit(),o,n);l.setDisplayValue(n.toString());l.setAlertLevel(o.getMaxAlertLevel().getName());l.setDocumentId(o.getDocumentId());l.setInput(o.isDataEntryEnabled());var u=o.getDataCell();if(e.notNull(u)){n.clear();var p=u.getReferenceStructureElement1();if(e.notNull(p)){n.append("mem-");n.append(p.getFieldValue(p.getDimension().getDisplayKeyField()).getString());if(p.getFieldValue(p.getDimension().getDisplayKeyField())!==null){l.setMember(p.getFieldValue(p.getDimension().getDisplayKeyField()).getString())}else{l.setMember(p.getName())}}p=u.getReferenceStructureElement2();if(e.notNull(p)){n.append("-mem-");n.append(p.getFieldValue(p.getDimension().getDisplayKeyField()).getString());if(p.getFieldValue(p.getDimension().getDisplayKeyField())!==null){l.setMember2(p.getFieldValue(p.getDimension().getDisplayKeyField()).getString())}else{l.setMember(p.getName())}}var g=o.getDocumentId();if(e.XStringUtils.isNotNullAndNotEmpty(g)){l.setDataValueId(e.XStringUtils.concatenate3("docId","-",g))}}l.setRow(a+this.m_fixedHeight-this.m_fixedHeightOff+this.m_offsetRows);l.setColumn(s+this.m_fixedWidth-this.m_fixedWidthOff+this.m_offsetColumns);this.setCell(s+this.m_fixedWidth-this.m_fixedWidthOff,a+this.m_fixedHeight-this.m_fixedHeightOff,l)}}};e.FioriGrid.prototype.formatDataCellValue=function(e){return e.getFormattedValue()};e.FioriGrid.prototype.getCellValueWithDetails=function(t,i){var r=e.XStringBuffer.create();var n=t.getDataCell();if(e.notNull(n)){r.append("(DataCell->").append(n.getName()).append(")")}var a=t.getDecimalPlaces();if(a!==0){r.append("(Decimal Places=").appendInt(a).append(")")}if(t.isDataEntryEnabled()){r.append("I:")}if(t.isValueLocked()){r.append("L:")}var s=t.getCurrencyUnit();this.appendPrefixValueSuffix(s,t,r);this.appendValueException(t,r);this.appendAlertLevel(t,r);this.appendValueChanged(t,r);r.append("|").append(t.getValueType().getName());r.append("|").append(t.getFormatString());this.appendCurrencyUnit(s,r);this.appendInputReadiness(t,i,r);return r.toString()};e.FioriGrid.prototype.appendPrefixValueSuffix=function(t,i,r){if(e.notNull(t)&&e.XString.compare(this.m_suppress_unit,t.getFormatted())===0){r.append(this.formatDataCellValue(i))}else{if(e.notNull(t)&&t.hasPrefix()){r.append(t.getPrefix()).append(" ")}r.append(this.formatDataCellValue(i));if(e.notNull(t)&&t.hasSuffix()){r.append(" ").append(t.getSuffix())}}};e.FioriGrid.prototype.appendValueException=function(t,i){var r=t.getValueException();if(r!==e.ValueException.NORMAL){i.append("|");if(e.isNull(r)){i.append("<null>")}else{i.append(r.getName())}}};e.FioriGrid.prototype.appendInputReadiness=function(t,i,r){var n=t.getQueryModel().getQueryManager();if(n.supportsInputReadinessStates()&&t.getQueryModel().isDataEntryEnabled()){var a=t.getInputReadinessState();if(e.notNull(a)){var s=i.get(a.getIndex());var o=s.getInputReadinessTypes();var l=e.XListOfString.create();for(var u=0;u<o.size();u++){l.add(o.get(u).getShortcut())}r.append("|S:").append(e.XCollectionUtils.join(l,","))}}};e.FioriGrid.prototype.appendAlertLevel=function(t,i){var r=t.getMaxAlertLevel();if(r!==e.AlertLevel.NORMAL){i.append("|[");i.append(e.isNull(r)?"<null>":r.getName());i.append("]")}};e.FioriGrid.prototype.appendValueChanged=function(t,i){if(t.isValueChanged()){i.append("|N:");var r=t.getXValue();if(e.isNull(r)){i.append("<null>")}else{i.append(r.getValueType().getName());if(r.getValueType()===e.XValueType.STRING){i.append(" ").append(r.getString())}}}if(t.isNewValueForced()){i.append("|F:")}};e.FioriGrid.prototype.appendCurrencyUnit=function(t,i){if(e.notNull(t)&&!t.isEmpty()){i.append("|");if(t.isMixed()){i.append("M:")}else if(t.hasUnit()){i.append("U:")}else if(t.hasCurrency()){i.append("C:")}if(t.hasFormatted()){i.append(t.getFormatted())}else{i.append("<null>")}}};e.FioriGrid.prototype.getCellValue=function(t,i){var r=i.getValueException();if(r===e.ValueException.NULL_VALUE||r===e.ValueException.UNDEFINED){return""}var n=null;if(r!==e.ValueException.NORMAL&&r!==e.ValueException.ZERO){n=r.getName()}var a=null;var s=i.getMaxAlertLevel();if(s!==e.AlertLevel.NORMAL){a=s.getName()}if(e.notNull(n)||e.notNull(a)){var o=e.XStringBuffer.create();o.append(t);if(e.notNull(a)){o.append(" [").append(a).append("]")}if(e.notNull(n)){o.append(" [").append(n).append("]")}return o.toString()}return t};e.FioriGrid.prototype.setHeaderCells=function(t,i){var r=t.getRsDimensions();var n=t.getType();var a=t.getTuplesCount();var s=e.XStringBuffer.create();var o=e.XStringBuffer.create();var l=t.getType()===e.AxisType.COLUMNS;for(var u=0;u<a;u++){var p=t.getTupleAt(u);var g=0;var f=p.size();for(var c=0;c<f;c++){var C=r.get(c);var _=p.get(c);var m=l?_.getDisplayLevel():0;var S=C.getResultSetFields();var d=S.size();var T=_.getDimensionMember();s.clear();var y=l&&d>0?this.getMaxDisplayLevel(t,C):0;if(l&&d>0&&y>0){for(var h=0;h<=y;++h){var D=e.FioriGridCell.create("",e.FioriCellType.HEADER);D.setDisplayValue("");var R=this.m_resultSet.getQueryModel().getDimensionByName(C.getName()).getExternalName();if(e.notNull(R)){D.setDimension(R)}else{D.setDimension(C.getName())}if(T.getName()!==null&&C.isStructure()&&T.getDimension().getStructureMember(T.getName()).getFieldValue(T.getDimension().getDisplayKeyField())!==null){D.setMember(T.getDimension().getStructureMember(T.getName()).getFieldValue(T.getDimension().getDisplayKeyField()).getString())}else{D.setMember(T.getName())}D.setRow(g+h);D.setColumn(u+i);this.setCell(u+i,g+h,D)}}for(var A=0;A<d;A++){var V=T.getAllFieldValues().getByKey(S.get(A).getName());s.append(this.formatFieldValue(V));o.append(this.formatFieldValue(V));if(A===0){this.prependToFirstField(_,s);this.appendAlertLevelToValue(_,s)}var E=e.FioriGridCell.create(s.toString(),e.FioriCellType.HEADER);if(!this.m_suppressRepetition||_.getFirstTuple()===p){E.setDisplayValue(o.toString())}var v=this.m_resultSet.getQueryModel().getDimensionByName(C.getName()).getExternalName();if(e.notNull(v)){E.setDimension(v)}else{E.setDimension(C.getName())}if(C.isStructure()&&T.getDimension().getStructureMember(T.getName()).getFieldValue(T.getDimension().getDisplayKeyField())!==null){E.setMember(T.getDimension().getStructureMember(T.getName()).getFieldValue(T.getDimension().getDisplayKeyField()).getString());var N=E.getMember();if(e.notNull(N)){E.setSemantic(this.m_semStyles.getByKey(N))}}else{E.setMember(T.getName())}if(t===this.m_resultSet.getRowsAxis()){E.setRowTupleIndex(u)}else{E.setColumnTupleIndex(u)}if(A===0&&_.getFirstTuple()===p){E.setDisplayLevel(l?0:_.getDisplayLevel());var z=_.getDrillState();var L="";if(z===e.DrillState.EXPANDED||z===e.DrillState.DRILLED){E.setDrillState("Expanded");if(C.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(n===e.AxisType.ROWS){L="sap-icon://slim-arrow-up"}else{L="sap-icon://slim-arrow-left"}}else{if(n===e.AxisType.ROWS){L="sap-icon://slim-arrow-down"}else{L="sap-icon://slim-arrow-down"}}}else if(z===e.DrillState.COLLAPSED||z===e.DrillState.LEAF_UDH_EXPAND_ALLOWED){E.setDrillState("Collapsed");if(C.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(n===e.AxisType.ROWS){L="sap-icon://slim-arrow-right"}else{L="sap-icon://slim-arrow-up"}}else{if(n===e.AxisType.ROWS){L="sap-icon://slim-arrow-right"}else{L="sap-icon://slim-arrow-right"}}}else{E.setDrillState("None");L=""}E.setIcon(L)}var I=E.getMember();if(e.notNull(I)&&this.m_semStyles.getByKey(I)!==null){E.setSemantic(this.m_semStyles.getByKey(I))}s.clear();o.clear();this.addCell(n,g+m,u,i,E);g++}}}};e.FioriGrid.prototype.formatFieldValue=function(t){if(e.isNull(t)){return""}else{if(t.getValueType()===e.XValueType.DOUBLE){var i=t.getDouble();return e.XNumberFormatter.formatDoubleToString(i,"#.0000")}else{return t.getFormattedValue()}}};e.FioriGrid.prototype.appendAlertLevelToValue=function(t,i){if(e.XStringUtils.isNotNullAndNotEmpty(t.getExceptionName())){i.append(" [").appendInt(t.getAlertLevel()).append("]")}};e.FioriGrid.prototype.prependToFirstField=function(t,i){var r=t.getDisplayLevel();var n=t.getDrillState();if(r>0||n!==e.DrillState.LEAF){var a=i.toString();i.clear();for(var s=0;s<r;s++){i.append("  ")}if(n===e.DrillState.COLLAPSED||n===e.DrillState.LEAF_DRILLDOWN_ALLOWED||n===e.DrillState.LEAF_UDH_EXPAND_ALLOWED||n===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){i.append("+ ")}else if(n===e.DrillState.EXPANDED||n===e.DrillState.DRILLED||n===e.DrillState.LEAF_UDH){i.append("- ")}i.append(a)}};e.FioriGrid.prototype.addCell=function(t,i,r,n,a){if(t===e.AxisType.ROWS){a.setRow(r+n+this.m_offsetRows);a.setColumn(i);this.setCell(i,r+n,a)}else{a.setRow(i);a.setColumn(r+n+this.m_offsetColumns);this.setCell(r+n,i,a)}};e.FioriGrid.prototype.setCell=function(e,t,i){if(this.m_rowDefs.get(t).hasTotals()||this.m_colDefs.get(e).hasTotals()){i.setIsTotal(true)}this.m_cells.setByIndices(e,t,i)};e.FioriGrid.prototype.getColumnCount=function(){return this.m_cells.size0()};e.FioriGrid.prototype.getRowCount=function(){return this.m_cells.size1()};e.FioriGrid.prototype.getFixedColumnsCount=function(){return this.m_fixedWidth};e.FioriGrid.prototype.getFixedRowsCount=function(){return this.m_fixedHeight};e.FioriGrid.prototype.getColumnMaxCharacters=function(t,i,r){var n=0;var a=this.m_cells.size1();var s=0;for(var o=i;o<a&&(r===-1||s<r);o++){var l=this.m_cells.getByIndices(t,o);if(e.notNull(l)){n=e.XMath.max(l.getCharacterCount(),n)}s++}return n};e.FioriGrid.prototype.getSimpleCell=function(e,t){return this.m_cells.getByIndices(e,t)};e.FioriGrid.prototype.setSuppressUnit=function(e){this.m_suppress_unit=e};e.FioriGrid.prototype.addSemanticStyle=function(e,t){this.m_semStyles.put(e,t)};e.FioriGrid.prototype.exportToFireflyGrid=function(t){this.m_suppressRepetition=t;this.prepareCellStructure();var i=this.getColumnCount();var r=this.getRowCount();var n=this.getFixedRowsCount();var a=this.getFixedColumnsCount();var s=e.PrFactory.createStructure();s.putString("Type","Grid");s.putString("ApplicationName",this.m_resultSet.getApplication().getApplicationName());s.putInteger("RowCount",r);s.putInteger("ColCount",i);s.putInteger("FixedRows",n);s.putInteger("FixedColumns",a);var o=s.putNewList("Cells");for(var l=0;l<r;l++){for(var u=0;u<i;u++){var p=this.getSimpleCell(u,l);if(e.notNull(p)){var g=o.addNewStructure();g.putString("Type","Text");g.putString("DisplayValue",p.getDisplayValue());g.putString("Value",p.getText(-1));g.putInteger("Row",p.getRow());g.putInteger("Column",p.getColumn());g.putString("DrillState",p.getDrillState());g.putString("DataValueId",p.getDataValueId());g.putInteger("DisplayLevel",p.getDisplayLevel());g.putInteger("RowTupleIndex",p.getRowTupleIndex());g.putInteger("ColumnTupleIndex",p.getColumnTupleIndex());g.putInteger("TupleIndex",p.getRowTupleIndex()>0?p.getRowTupleIndex():p.getColumnTupleIndex());g.putString("Icon",p.getIcon());g.putString("AlertLevel",p.getAlertLevel());g.putString("DocumentId",p.getDocumentId());g.putBoolean("Input",p.getInput());if(p.isTotals()){g.putBoolean("Totals",true)}var f=p.getCellType();if(f===e.FioriCellType.HEADER){g.putString("Semantic","Header");g.putString("Dimension",p.getDimension());g.putString("Member",p.getMember());g.putString("SemanticClass",p.getSemantic())}else if(f===e.FioriCellType.TITLE){g.putString("Semantic","Title");g.putString("Dimension",p.getDimension());if(p.getDimensionOther()!==null){g.putString("DimensionOther",p.getDimensionOther())}}else if(f===e.FioriCellType.DATA){g.putInteger("DataRow",l-n);g.putInteger("DataColumn",u-a);g.putString("Member",p.getMember());g.putString("Member2",p.getMember2());g.putString("Semantic",p.isTotals()?"Result":"Standard")}else{g.putString("Semantic","Empty");g.putString("GridPart","Empty")}}}}return s};e.FioriGridCell=function(){};e.FioriGridCell.prototype=new e.XObject;e.FioriGridCell.prototype._ff_c="FioriGridCell";e.FioriGridCell.create=function(t,i){var r=new e.FioriGridCell;r.setupExt(t,i);return r};e.FioriGridCell.prototype.m_content=null;e.FioriGridCell.prototype.m_isLeftAligned=false;e.FioriGridCell.prototype.m_isTotal=false;e.FioriGridCell.prototype.m_drillState=null;e.FioriGridCell.prototype.m_displayLevel=0;e.FioriGridCell.prototype.m_displayValue=null;e.FioriGridCell.prototype.m_cellType=null;e.FioriGridCell.prototype.m_dataValueId=null;e.FioriGridCell.prototype.m_oDimName=null;e.FioriGridCell.prototype.m_isRep=false;e.FioriGridCell.prototype.m_dimName=null;e.FioriGridCell.prototype.m_memName=null;e.FioriGridCell.prototype.m_memName2=null;e.FioriGridCell.prototype.m_rowIndex=0;e.FioriGridCell.prototype.m_colIndex=0;e.FioriGridCell.prototype.m_icon=null;e.FioriGridCell.prototype.m_alertLevel=null;e.FioriGridCell.prototype.m_input=false;e.FioriGridCell.prototype.m_semantic=null;e.FioriGridCell.prototype.m_row=0;e.FioriGridCell.prototype.m_col=0;e.FioriGridCell.prototype.m_documentId=null;e.FioriGridCell.prototype.setupExt=function(t,i){this.m_content=t;this.m_isLeftAligned=i!==e.FioriCellType.DATA;this.m_cellType=i};e.FioriGridCell.prototype.releaseObject=function(){this.m_content=null;this.m_cellType=null;e.XObject.prototype.releaseObject.call(this)};e.FioriGridCell.prototype.getCharacterCount=function(){if(e.isNull(this.m_content)){return 0}return e.XString.size(this.m_content)};e.FioriGridCell.prototype.isLeftAligned=function(){return this.m_isLeftAligned};e.FioriGridCell.prototype.getText=function(t){if(e.isNull(this.m_content)){return""}if(e.XString.size(this.m_content)>t){return e.XString.substring(this.m_content,0,t)}return this.m_content};e.FioriGridCell.prototype.getCellType=function(){return this.m_cellType};e.FioriGridCell.prototype.isTotals=function(){return this.m_isTotal};e.FioriGridCell.prototype.setIsTotal=function(e){this.m_isTotal=e};e.FioriGridCell.prototype.setDisplayLevel=function(e){this.m_displayLevel=e};e.FioriGridCell.prototype.setDrillState=function(e){this.m_drillState=e};e.FioriGridCell.prototype.toString=function(){if(e.isNull(this.m_content)){return""}return this.m_content};e.FioriGridCell.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.FioriGridCell.prototype.getDrillState=function(){return this.m_drillState};e.FioriGridCell.prototype.setDisplayValue=function(e){this.m_displayValue=e};e.FioriGridCell.prototype.getDisplayValue=function(){return this.m_displayValue};e.FioriGridCell.prototype.setDataValueId=function(e){this.m_dataValueId=e};e.FioriGridCell.prototype.getDataValueId=function(){return this.m_dataValueId};e.FioriGridCell.prototype.getDimension=function(){return this.m_dimName};e.FioriGridCell.prototype.setDimension=function(e){this.m_dimName=e};e.FioriGridCell.prototype.getMember=function(){return this.m_memName};e.FioriGridCell.prototype.setMember=function(e){this.m_memName=e};e.FioriGridCell.prototype.getMember2=function(){return this.m_memName2};e.FioriGridCell.prototype.setMember2=function(e){this.m_memName2=e};e.FioriGridCell.prototype.getRowTupleIndex=function(){return this.m_rowIndex};e.FioriGridCell.prototype.setRowTupleIndex=function(e){this.m_rowIndex=e};e.FioriGridCell.prototype.getColumnTupleIndex=function(){return this.m_colIndex};e.FioriGridCell.prototype.setColumnTupleIndex=function(e){this.m_colIndex=e};e.FioriGridCell.prototype.getIcon=function(){return this.m_icon};e.FioriGridCell.prototype.setIcon=function(e){this.m_icon=e};e.FioriGridCell.prototype.getAlertLevel=function(){return this.m_alertLevel};e.FioriGridCell.prototype.setAlertLevel=function(e){this.m_alertLevel=e};e.FioriGridCell.prototype.getDocumentId=function(){return this.m_documentId};e.FioriGridCell.prototype.setDocumentId=function(e){this.m_documentId=e};e.FioriGridCell.prototype.getInput=function(){return this.m_input};e.FioriGridCell.prototype.setInput=function(e){this.m_input=e};e.FioriGridCell.prototype.getColumn=function(){return this.m_col};e.FioriGridCell.prototype.setColumn=function(e){this.m_col=e};e.FioriGridCell.prototype.getRow=function(){return this.m_row};e.FioriGridCell.prototype.setRow=function(e){this.m_row=e};e.FioriGridCell.prototype.getDimensionOther=function(){return this.m_oDimName};e.FioriGridCell.prototype.setDimensionOther=function(e){this.m_oDimName=e};e.FioriGridCell.prototype.getIsRepetition=function(){return this.m_isRep};e.FioriGridCell.prototype.setIsRepetition=function(e){this.m_isRep=e};e.FioriGridCell.prototype.setSemantic=function(e){this.m_semantic=e};e.FioriGridCell.prototype.getSemantic=function(){return this.m_semantic};e.FioriGridFactoryImpl=function(){};e.FioriGridFactoryImpl.prototype=new e.XObject;e.FioriGridFactoryImpl.prototype._ff_c="FioriGridFactoryImpl";e.FioriGridFactoryImpl.create=function(){return new e.FioriGridFactoryImpl};e.FioriGridFactoryImpl.prototype.createFioriGrid=function(t){return e.FioriGrid.create(t)};e.FioriLineDef=function(){};e.FioriLineDef.prototype=new e.XObject;e.FioriLineDef.prototype._ff_c="FioriLineDef";e.FioriLineDef.create=function(){return new e.FioriLineDef};e.FioriLineDef.prototype.m_hasTotals=false;e.FioriLineDef.prototype.hasTotals=function(){return this.m_hasTotals};e.FioriLineDef.prototype.setHasTotals=function(e){this.m_hasTotals=e};e.FioriLineDef.prototype.toString=function(){return e.XStringBuffer.create().append("Totals:").appendBoolean(this.m_hasTotals).toString()};e.ReferenceGridFactoryImpl=function(){};e.ReferenceGridFactoryImpl.prototype=new e.XObject;e.ReferenceGridFactoryImpl.prototype._ff_c="ReferenceGridFactoryImpl";e.ReferenceGridFactoryImpl.create=function(){return new e.ReferenceGridFactoryImpl};e.ReferenceGridFactoryImpl.prototype.createReferenceGridSimple=function(t){return e.ReferenceGrid.create(t)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithDetails=function(t){return e.ReferenceGrid.createWithDetails(t)};e.ReferenceGridFactoryImpl.prototype.createReferenceGrid=function(e,t){if(t){return this.createReferenceGridWithDetails(e)}return this.createReferenceGridSimple(e)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithName=function(t,i){if(e.notNull(t)&&e.XString.endsWith(t,"_gen")){return e.ReferenceGrid2.createWithName2(t,i)}return e.ReferenceGrid.createWithName(t,i)};e.ReferenceGridFactoryImpl.prototype.createReferenceGridWithNameAndDetails=function(t,i){return e.ReferenceGrid.createWithNameAndDetails(t,i)};e.ReferenceGridFactoryImpl.prototype.createForVizGrid=function(t){return e.ReferenceGrid.createForVizGrid(t)};e.KpiRendererFactoryImpl=function(){};e.KpiRendererFactoryImpl.prototype=new e.XObject;e.KpiRendererFactoryImpl.prototype._ff_c="KpiRendererFactoryImpl";e.KpiRendererFactoryImpl.create=function(){return new e.KpiRendererFactoryImpl};e.KpiRendererFactoryImpl.prototype.newRenderer=function(t){return e.RsKpiRenderer.create()};e.RsKpiRenderer=function(){};e.RsKpiRenderer.prototype=new e.XObject;e.RsKpiRenderer.prototype._ff_c="RsKpiRenderer";e.RsKpiRenderer.create=function(){return new e.RsKpiRenderer};e.RsKpiRenderer.processMetricData=function(t,i,r){var n=e.PrFactory.createStructure();var a=n.putNewStructure(e.VizDefConstants.K_CHART);a.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_METRIC);var s=n.putNewStructure(e.SapKpiConstants.K_SAP_CARD);s.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_ANALYTICAL);var o=s.putNewStructure(e.SapKpiConstants.K_HEADER);o.putString(e.VizDefConstants.K_TYPE,e.SapKpiConstants.K_NUMERIC);o.putString(e.VizDefConstants.K_TITLE,r.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_TITLE));o.putString(e.VizDefConstants.K_SUB_TITLE,r.getStructureByKey(e.VizDefConstants.K_CHART).getStringByKey(e.VizDefConstants.K_SUB_TITLE));var l=e.XListOfString.create();l.add(e.VizDefConstants.K_VALUE_AXIS);l.add(e.VizDefConstants.K_VALUE_AXIS2);l.add(e.VizDefConstants.K_THRESHOLD_REFERENCE);l.add(e.VizDefConstants.K_VARIANCE);var u=t.getIndicesByFeedOrder(l);var p=t.hasTupleForFeed(e.VizDefConstants.K_VALUE_AXIS);var g=o.putNewList(e.SapKpiConstants.K_SIDEINDICATORS);var f=null;var c="";var C="";for(var _=0;_<u.size();_++){var m=u.get(_).getInteger();var S=t.getTupleAt(m);var d=S.getPrettyText(l);var T=i.getDataCell(m,0);if(p&&S.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){o.putString(e.SapKpiConstants.K_UNIT_OF_MEASUREMENT,T.getCurrencyUnit().getFormatted());o.putString(e.VizDefConstants.K_SUB_TITLE,d);f=o.putNewStructure(e.SapKpiConstants.K_MAININDICATOR);e.RsKpiRenderer.addIndicatorContent(S,T,f);p=false}else if(S.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS2)){var y=g.addNewStructure();y.putString(e.VizDefConstants.K_TITLE,d);e.RsKpiRenderer.addIndicatorContent(S,T,y)}if(S.isSelectedByString(e.VizDefConstants.K_THRESHOLD_REFERENCE)){var h=e.XInteger.convertToString((T.getExceptionSettingPriorityByName(e.ExceptionSetting.ALERT_LEVEL.getName()).getInteger()-1)/3);if(e.RsKpiRenderer.getStateMap().containsKey(h)){c=e.RsKpiRenderer.getStateMap().getStringByKey(h)}}if(S.isSelectedByString(e.VizDefConstants.K_VARIANCE)){var D=T.getDouble();if(D!==0){C=D>0?e.SapKpiConstants.V_UP:e.SapKpiConstants.V_DOWN}}}if(e.notNull(f)){if(!e.XString.isEqual(c,"")){f.putString(e.SapKpiConstants.K_STATE,c)}if(!e.XString.isEqual(C,"")){f.putString(e.SapKpiConstants.K_TREND,C)}}return n};e.RsKpiRenderer.unitMap=null;e.RsKpiRenderer.stateMap=null;e.RsKpiRenderer.getStateMap=function(){if(e.isNull(e.RsKpiRenderer.stateMap)){e.RsKpiRenderer.stateMap=e.PrFactory.createStructure();e.RsKpiRenderer.stateMap.putString("0",e.SapKpiConstants.V_GOOD);e.RsKpiRenderer.stateMap.putString("1",e.SapKpiConstants.V_CRITICAL);e.RsKpiRenderer.stateMap.putString("2",e.SapKpiConstants.V_ERROR)}return e.RsKpiRenderer.stateMap};e.RsKpiRenderer.getUnitMap=function(){if(e.isNull(e.RsKpiRenderer.unitMap)){e.RsKpiRenderer.unitMap=e.PrFactory.createStructure();e.RsKpiRenderer.unitMap.putString("-3","K");e.RsKpiRenderer.unitMap.putString("-6","M");e.RsKpiRenderer.unitMap.putString("-9","B")}return e.RsKpiRenderer.unitMap};e.RsKpiRenderer.addIndicatorContent=function(t,i,r){var n=e.RsKpiRenderer.getUnitMap();var a="";var s=e.XInteger.convertToString(t.getNumericShift());if(n.containsKey(s)){a=n.getStringByKey(s)}var o=e.XStringBuffer.create();o.append(!i.getCurrencyUnit().isEmpty()?i.getCurrencyUnit().getSuffix():"");o.append(t.getFormattedValue(i));r.putString(e.SapKpiConstants.K_UNIT,a);r.putString(e.SapKpiConstants.K_NUMBER,o.toString())};e.RsKpiRenderer.prototype.render=function(t){var i=t.getQueryModel().getVizManager().getVizDef();var r=t.getQueryModel().getVizManager().getGlobalDef();if(e.notNull(i)&&i.containsKey(e.VizDefConstants.K_CHART)&&t.getAvailableDataCellCount()>0){var n=i.getStructureByKey(e.VizDefConstants.K_CHART);if(e.XString.isEqual(n.getStringByKey(e.VizDefConstants.K_TYPE),e.SapKpiConstants.K_METRIC)){var a=e.RsVizAxisExtractor.extractCustomFormatting(i,r);var s=i.getStructureByKey("feedMembers");var o=e.RsVizAxisExtractor.getTuplesFromColumnAxis(t,s,a);return e.RsKpiRenderer.processMetricData(o,t,i)}}return e.PrFactory.createStructure()};e.SapKpiConstants={K_METRIC:"metric",K_SAP_CARD:"sap.card",K_ANALYTICAL:"Analytical",K_HEADER:"header",K_NUMERIC:"Numeric",K_SIDEINDICATORS:"sideIndicators",K_UNIT_OF_MEASUREMENT:"unitOfMeasurement",K_MAININDICATOR:"mainIndicator",K_UNIT:"unit",K_NUMBER:"number",K_THRESHOLDREFERENCE:"thresholdReference",K_VARIANCE:"variance",K_STATE:"state",K_TREND:"trend",K_FEEDMEMBERS:"feedMembers",K_GLOBALOBJECTS:"GlobalObjects",K_CALCULATIONS:"Calculations",V_GOOD:"Good",V_CRITICAL:"Critical",V_ERROR:"Error",V_CALCULATION:"calculation",V_UP:"Up",V_DOWN:"Down"};e.RsVizContainerFactoryImpl=function(){};e.RsVizContainerFactoryImpl.prototype=new e.XObject;e.RsVizContainerFactoryImpl.prototype._ff_c="RsVizContainerFactoryImpl";e.RsVizContainerFactoryImpl.create=function(){return new e.RsVizContainerFactoryImpl};e.RsVizContainerFactoryImpl.prototype.newVisualizationContainer=function(t){if(t.getOlapComponentType()===e.OlapComponentType.VISUALIZATION_TABLE_DEFINITION){return e.RsVizTableContainer.create(t)}else{return null}};e.DataCellNumberFormatterSettings=function(){};e.DataCellNumberFormatterSettings.prototype=new e.XObject;e.DataCellNumberFormatterSettings.prototype._ff_c="DataCellNumberFormatterSettings";e.DataCellNumberFormatterSettings.create=function(t,i,r){var n=new e.DataCellNumberFormatterSettings;var a=t.getFormatString();n.setDecimalGroupingSeparatorFromFormat(a);n.setDecimalSeparatorFromFormat(a);n.setScaleFactor(t,i,r,t.getQueryModel());n.setMaxDigitsRightAndPadding(t,i,r,t.getQueryModel());n.setCurrencyFormatSettings(t.getCurrencyUnit());return n};e.DataCellNumberFormatterSettings.prototype.m_decimalSeparator=null;e.DataCellNumberFormatterSettings.prototype.m_decimalGroupingSeparator=null;e.DataCellNumberFormatterSettings.prototype.m_scaleFactor=null;e.DataCellNumberFormatterSettings.prototype.m_maxDigitsRight=-1;e.DataCellNumberFormatterSettings.prototype.m_rightPad=-1;e.DataCellNumberFormatterSettings.prototype.m_currencySettings=null;e.DataCellNumberFormatterSettings.prototype.setCurrencyFormatSettings=function(t){var i=null;if(t.hasPrefix()){i=e.XCurrencyFormatSettings.create();i.setCurrencyPresentationPosition(0);i.setValuePosition(1);i.setScaleTextPosition(2);i.setCurrencyPresentationHasSpace(true);i.setScaleTextHasSpace(true)}else if(t.hasSuffix()){i=e.XCurrencyFormatSettings.create();i.setCurrencyPresentationPosition(2);i.setValuePosition(0);i.setScaleTextPosition(1);i.setCurrencyPresentationHasSpace(true);i.setScaleTextHasSpace(true)}this.m_currencySettings=i};e.DataCellNumberFormatterSettings.prototype.getDecimalGroupingSeparator=function(){return this.m_decimalGroupingSeparator};e.DataCellNumberFormatterSettings.prototype.getDecimalSeparator=function(){return this.m_decimalSeparator};e.DataCellNumberFormatterSettings.prototype.getScaleFactor=function(){return this.m_scaleFactor};e.DataCellNumberFormatterSettings.prototype.getMaxDigitsRight=function(){return this.m_maxDigitsRight};e.DataCellNumberFormatterSettings.prototype.getRightPad=function(){return this.m_rightPad};e.DataCellNumberFormatterSettings.prototype.getScaleFormat=function(){return null};e.DataCellNumberFormatterSettings.prototype.getCurrencyFormatSettings=function(){return this.m_currencySettings};e.DataCellNumberFormatterSettings.prototype.setDecimalGroupingSeparatorFromFormat=function(t){var i=this.getFirstCharacterAfter(t,"#");if(e.isNull(i)&&!e.XString.containsString(t,"#")){this.m_decimalGroupingSeparator=" "}else if(this.isSupportedDecimalGroupingSeparator(i)){this.m_decimalGroupingSeparator=i}};e.DataCellNumberFormatterSettings.prototype.setDecimalSeparatorFromFormat=function(e){var t=this.getFirstCharacterAfter(e,"0");if(this.isSupportedDecimalSeparator(t)){this.m_decimalSeparator=t}};e.DataCellNumberFormatterSettings.prototype.setScaleFactor=function(t,i,r,n){var a=this.getDataCell(i,r,n);if(a.isPresent()){this.m_scaleFactor=e.XIntegerValue.create(-t.getScalingFactor())}else{this.getLeadingScalingPower(i,r).ifPresent(function(t){this.m_scaleFactor=e.XIntegerValue.create(-t.getInteger())}.bind(this))}};e.DataCellNumberFormatterSettings.prototype.setMaxDigitsRightAndPadding=function(e,t,i,r){var n=this.getDataCell(t,i,r);var a;if(n.isPresent()){a=e.getDecimalPlaces()}else{a=this.getLeadingDecimalPlaces(t,i)}if(a>=0){this.m_maxDigitsRight=a;this.m_rightPad=a}};e.DataCellNumberFormatterSettings.prototype.isSupportedDecimalGroupingSeparator=function(t){return e.XString.isEqual(",",t)||e.XString.isEqual(".",t)||e.XString.isEqual(" ",t)};e.DataCellNumberFormatterSettings.prototype.isSupportedDecimalSeparator=function(t){return e.XString.isEqual(",",t)||e.XString.isEqual(".",t)};e.DataCellNumberFormatterSettings.prototype.getDataCell=function(t,i,r){var n=e.XOptional.empty();var a=r.getQueryDataCells();if(e.XCollectionUtils.hasElements(a)){n=e.XStream.of(a).filter(function(r){return(e.isNull(t)||r.hasMemberReference(t))&&(e.isNull(i)||r.hasMemberReference(i))}.bind(this)).findAny()}return n};e.DataCellNumberFormatterSettings.prototype.getLeadingScalingPower=function(t,i){var r;if(e.isNull(t)&&e.isNull(i)){r=null}else if(e.isNull(t)){r=i.getNumericShift()}else if(e.isNull(i)){r=t.getNumericShift()}else{if(t.getSolveOrder()>i.getSolveOrder()){r=this.getNumericShiftByOrderPrio(t,i)}else{r=this.getNumericShiftByOrderPrio(i,t)}}return e.XOptional.ofNullable(r)};e.DataCellNumberFormatterSettings.prototype.getLeadingDecimalPlaces=function(t,i){var r;if(e.isNull(t)&&e.isNull(i)){r=null}else if(e.isNull(t)){r=i.getNumericScale()}else if(e.isNull(i)){r=t.getNumericScale()}else{if(t.getSolveOrder()>i.getSolveOrder()){r=this.getNumericScaleByOrderPrio(t,i)}else{r=this.getNumericScaleByOrderPrio(i,t)}}return e.isNull(r)?-1:r.getInteger()};e.DataCellNumberFormatterSettings.prototype.getNumericShiftByOrderPrio=function(t,i){var r=t.getNumericShift();if(e.isNull(r)){r=i.getNumericShift()}return r};e.DataCellNumberFormatterSettings.prototype.getNumericScaleByOrderPrio=function(t,i){var r=t.getNumericScale();if(e.isNull(r)){r=i.getNumericScale()}return r};e.DataCellNumberFormatterSettings.prototype.getFirstCharacterAfter=function(t,i){var r=e.XString.indexOf(t,i);if(r<0||r===e.XString.size(t)-1){return null}return e.XString.substring(t,r+1,r+2)};e.SacTableAggregation=function(){};e.SacTableAggregation.prototype=new e.XObject;e.SacTableAggregation.prototype._ff_c="SacTableAggregation";e.SacTableAggregation.create=function(t,i,r,n,a,s,o,l,u,p,g,f,c,C,_){var m=new e.SacTableAggregation;m.m_text=t;m.m_plain=i;m.m_dimension=r;m.m_drillState=a;m.m_displayLevel=s;m.m_field=o;m.m_index=l;m.m_isMainAttribute=u;m.m_dimensionIndex=p;m.m_dimensionMemberType=n;m.m_dimensionMemberName=g;m.m_pathKey=f;m.m_repeatedMemberName=c;m.m_valueException=C;m.m_dimensionMemberValueException=_;return m};e.SacTableAggregation.remapToMemberPath=function(t){var i=t.getValuesAsReadOnlyList();var r=e.XHashMapOfStringByString.create();for(var n=0;n<i.size();n++){var a=i.get(n);r.put(a.getDimension().getName(),a.getDimensionMemberName())}return r};e.SacTableAggregation.getMemberHeader=function(t,i,r,n){var a=true;var s=e.XLinkedHashMapByString.create();var o="";while(t.hasNextTupleElement()){var l=t.nextTupleElement();var u=l.getDimensionMemberName();var p=l.getDimensionMemberType();var g;o=e.XStringUtils.concatenate5(o,"::[",l.getRsDimensionAtCurrentPosition().getName(),"]==>",u);var f;var c=l.getDimensionMemberNameValueException();var C;var _=e.XLinkedHashMapOfStringByString.create();var m=e.XListOfString.create();var S;while(t.hasNextFieldValue()){var d=t.nextFieldValue();C=d.getField();f=d.getValueException();S=C.getName();var T=i.getByKey(S);var y=l.getDisplayLevel();var h=e.XValueUtil.getString(d.getValue());g=d.getFormattedValue();if(e.XStringUtils.isNullOrEmpty(g)){g=h}if(f===e.ValueException.UNDEFINED){g=n.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_UNDEFINED)}else if(f===e.ValueException.ERROR){g=n.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_ERROR)}else if(f===e.ValueException.NULL_VALUE&&c===e.ValueException.NULL_VALUE){g=n.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_NULL)}else if(e.notNull(f)&&f!==e.ValueException.NORMAL&&f!==e.ValueException.ZERO&&f!==e.ValueException.NULL_VALUE){g=n.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_OTHER)}_.put(S,g);if(i.containsKey(S)){if(e.isNull(r)||!r.containsKey(S)){a=false}else if(!e.XString.isEqual(r.getByKey(S).getPlain(),h)||r.getByKey(S).getDisplayLevel()!==y||r.getByKey(S).getValueException()!==f||r.getByKey(S).getDimensionMemberValueException()!==c||!e.XString.isEqual(r.getByKey(S).getDimensionMemberName(),u)){a=false}s.put(S,e.SacTableAggregation.create(g,h,T.getDimension(),p,l.getDrillState(),y,T.getField(),T.getIndex(),T.isMainAttribute(),T.getDimensionIndex(),u,o,a,f,c));m.add(S)}}for(var D=0;D<m.size();D++){S=m.get(D);var R=s.getByKey(S);g=R.getText();p=R.getDimensionMemberType();if(p===e.MemberType.RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(n.getByKey(e.SacTableConstants.S_TOTAL_MEMBER_OVERWRITE_TEXT))){g=D===0?n.getByKey(e.SacTableConstants.S_TOTAL_MEMBER_OVERWRITE_TEXT):""}}else if(p===e.MemberType.CONDITION_RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(n.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT))){g=D===0?n.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT):""}}else if(p===e.MemberType.CONDITION_OTHERS_RESULT){if(e.XStringUtils.isNotNullAndNotEmpty(n.getByKey(e.SacTableConstants.S_TOTAL_INCLUDING_MEMBER_OVERWRITE_TEXT))){g=D===0?n.getByKey(e.SacTableConstants.S_TOTAL_REMAINING_MEMBER_OVERWRITE_TEXT):""}}else if(e.XStringUtils.isNullOrEmpty(g)&&(R.getValueException()===null||R.getValueException()===e.ValueException.NORMAL||R.getDimensionMemberValueException()===null||R.getDimensionMemberValueException()===e.ValueException.NORMAL)){C=R.getField();var A=e.isNull(C)?null:C.getAttribute();if(e.isNull(A)){g=R.getDimensionMemberName()}if(e.notNull(A)&&e.XStringUtils.isNullOrEmpty(g)&&!e.PresentationType.DISPLAY_KEY.isTypeOf(C.getPresentationType())&&!e.PresentationType.HIERARCHY_DISPLAY_KEY.isTypeOf(C.getPresentationType())&&!e.PresentationType.DISPLAY_KEY_NOT_COMPOUND.isTypeOf(C.getPresentationType())){var V=A.getFieldByPresentationType(e.PresentationType.DISPLAY_KEY_NOT_COMPOUND);if(e.isNull(V)){V=A.getDisplayKeyField()}if(e.notNull(V)&&_.containsKey(V.getName())){g=_.getByKey(V.getName())}}if(e.XStringUtils.isNullOrEmpty(g)){g=n.getByKey(e.SacTableConstants.S_VALUE_EXCEPTION_NO_VALUE)}}R.setText(g)}}return s};e.SacTableAggregation.getEmptyDimHeader=function(t,i,r){var n;var a;var s=t.getDimensions();var o=s.size();var l=e.XLinkedHashMapByString.create();var u=0;var p;for(n=0;n<o;n++){var g=s.get(n);var f=i.getDimensionByName(g.getName());var c=f.getMainAttribute();var C;p=f.getText();if(e.isNull(p)){p=f.getName()}var _;var m;if(f.isUniversalDisplayHierarchyDimension()){C=g.getResultSetFields();_=C.size();for(a=0;a<_;a++){m=f.getFieldByName(C.get(a).getName());if(a>0){p=""}l.put(m.getName(),e.SacTableAggregation.create(p,m.getName(),f,null,null,-1,m,u,true,n,null,null,false,null,null));u++}}else{var S=f.getFieldLayoutType();C=g.getResultSetFields();var d=c.getFields();var T;var y=e.XSetOfNameObject.create();var h="";_=C.size();for(a=0;a<_;a++){m=f.getFieldByName(C.get(a).getName());T=m.getAttribute();if(e.notNull(T)&&!y.contains(T)){h=T.getText();if(e.isNull(h)){h=T.getName()}if(T===f.getMainAttribute()){h=f.getText();if(f.getDimensionType().isTypeOf(e.DimensionType.MEASURE_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(r.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT))){h=r.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT)}else if(f.getDimensionType().isTypeOf(e.DimensionType.SECONDARY_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(r.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT))){h=r.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT)}}}if(m.getObtainability()===e.ObtainabilityType.USER_INTERFACE){continue}var D=d.contains(m);if(D||S===e.FieldLayoutType.ATTRIBUTE_BASED){p=h;h=""}else{p=m.getText();if(e.isNull(p)){p=m.getName()}}y.add(T);l.put(m.getName(),e.SacTableAggregation.create(p,m.getName(),f,null,null,-1,m,u,D,n,null,null,false,null,null));u++}}}return l};e.SacTableAggregation.getDimHeader=function(t,i,r){var n;var a;var s=t.getRsDimensions();var o=s.size();var l=e.XLinkedHashMapByString.create();var u=0;var p;for(n=0;n<o;n++){var g=s.get(n);var f=i.getDimensionByName(g.getName());var c=f.getMainAttribute();var C;p=f.getText();if(e.isNull(p)){p=f.getName()}var _;var m;if(f.isUniversalDisplayHierarchyDimension()){C=g.getResultSetFields();_=C.size();for(a=0;a<_;a++){m=f.getFieldByName(C.get(a).getName());if(a>0){p=""}l.put(m.getName(),e.SacTableAggregation.create(p,m.getName(),f,null,null,-1,m,u,true,n,null,null,false,null,null));u++}}else{var S=f.getFieldLayoutType();C=g.getResultSetFields();var d=c.getFields();var T;var y=e.XSetOfNameObject.create();var h="";_=C.size();for(a=0;a<_;a++){m=f.getFieldByName(C.get(a).getName());T=m.getAttribute();if(e.notNull(T)&&!y.contains(T)){h=T.getText();if(e.isNull(h)){h=T.getName()}if(T===f.getMainAttribute()){h=f.getText();if(f.getDimensionType().isTypeOf(e.DimensionType.MEASURE_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(r.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT))){h=r.getByKey(e.SacTableConstants.S_MEASURE_DIMENSION_OVERWRITE_TEXT)}else if(f.getDimensionType().isTypeOf(e.DimensionType.SECONDARY_STRUCTURE)&&e.XStringUtils.isNotNullAndNotEmpty(r.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT))){h=r.getByKey(e.SacTableConstants.S_STRUCTURE_DIMENSION_OVERWRITE_TEXT)}}}if(m.getObtainability()===e.ObtainabilityType.USER_INTERFACE){continue}var D=d.contains(m);if(D||S===e.FieldLayoutType.ATTRIBUTE_BASED){p=h;h=""}else{p=m.getText();if(e.isNull(p)){p=m.getName()}}if(e.notNull(T)){y.add(T)}l.put(m.getName(),e.SacTableAggregation.create(p,m.getName(),f,null,null,-1,m,u,D,n,null,null,false,null,null));u++}}}return l};e.SacTableAggregation.getSimplifiedUniqueName=function(t){var i="";for(var r=0;r<t.size();r++){var n=t.get(r);i=e.XStringUtils.concatenate5(i,"::[",n.getDimension().getName(),"]==>",n.getName())}return i};e.SacTableAggregation.prototype.m_drillState=null;e.SacTableAggregation.prototype.m_displayLevel=0;e.SacTableAggregation.prototype.m_text=null;e.SacTableAggregation.prototype.m_plain=null;e.SacTableAggregation.prototype.m_dimension=null;e.SacTableAggregation.prototype.m_field=null;e.SacTableAggregation.prototype.m_index=0;e.SacTableAggregation.prototype.m_dimensionIndex=0;e.SacTableAggregation.prototype.m_isMainAttribute=false;e.SacTableAggregation.prototype.m_dimensionMemberType=null;e.SacTableAggregation.prototype.m_dimensionMemberName=null;e.SacTableAggregation.prototype.m_pathKey=null;e.SacTableAggregation.prototype.m_repeatedMemberName=false;e.SacTableAggregation.prototype.m_valueException=null;e.SacTableAggregation.prototype.m_dimensionMemberValueException=null;e.SacTableAggregation.prototype.getText=function(){return this.m_text};e.SacTableAggregation.prototype.setText=function(e){this.m_text=e};e.SacTableAggregation.prototype.getPlain=function(){return this.m_plain};e.SacTableAggregation.prototype.getDimension=function(){return this.m_dimension};e.SacTableAggregation.prototype.getIndex=function(){return this.m_index};e.SacTableAggregation.prototype.isMainAttribute=function(){return this.m_isMainAttribute};e.SacTableAggregation.prototype.getDimensionIndex=function(){return this.m_dimensionIndex};e.SacTableAggregation.prototype.getField=function(){return this.m_field};e.SacTableAggregation.prototype.getDrillState=function(){return this.m_drillState};e.SacTableAggregation.prototype.getDisplayLevel=function(){return this.m_displayLevel};e.SacTableAggregation.prototype.getDimensionMemberType=function(){return this.m_dimensionMemberType};e.SacTableAggregation.prototype.getDimensionMemberName=function(){return this.m_dimensionMemberName};e.SacTableAggregation.prototype.getPathKey=function(){return this.m_pathKey};e.SacTableAggregation.prototype.getValueException=function(){return this.m_valueException};e.SacTableAggregation.prototype.getDimensionMemberValueException=function(){return this.m_dimensionMemberValueException};e.SacTableAggregation.prototype.isRepeatedMemberName=function(){return this.m_repeatedMemberName};e.SacTableAggregation.prototype.releaseObject=function(){this.m_drillState=null;this.m_displayLevel=0;this.m_text=null;this.m_plain=null;this.m_dimension=null;this.m_field=null;this.m_index=0;this.m_dimensionIndex=0;this.m_isMainAttribute=false;this.m_dimensionMemberType=null;this.m_dimensionMemberName=null;this.m_pathKey=null;this.m_repeatedMemberName=false;e.XObject.prototype.releaseObject.call(this)};e.OlapVizToPivotConverterUtil={getTableAxisTypeFromViz:function(t){if(t===e.AxisType.ROWS){return e.SacTableAxisType.ROWS}if(t===e.AxisType.COLUMNS){return e.SacTableAxisType.COLUMNS}return null},getAlertLevelFromViz:function(t){return e.isNull(t)?null:e.SacAlertLevel.getByLevelValue(t.getLevel())},getAlertSymbolFromViz:function(t){var i=null;if(e.notNull(t)){if(t===e.AlertSymbol.ALERT){i=e.SacAlertSymbol.ALERT}else if(t===e.AlertSymbol.WARNING){i=e.SacAlertSymbol.WARNING}else if(t===e.AlertSymbol.GOOD){i=e.SacAlertSymbol.GOOD}else if(t===e.AlertSymbol.DIAMOND){i=e.SacAlertSymbol.DIAMOND}}return i},getCellChartOrientationFromViz:function(t){return t===e.CellChartOrientation.VERTICAL?e.SacCellChartOrientation.VERTICAL:e.SacCellChartOrientation.HORIZONTAL},getCellChartTypeFromViz:function(t){if(t===e.CellChartType.BAR){return e.SacCellChartType.BAR}else if(t===e.CellChartType.VARIANCE_BAR){return e.SacCellChartType.VARIANCE_BAR}else if(t===e.CellChartType.PIN){return e.SacCellChartType.PIN}return null},getLinePatternTypeFromViz:function(t){return e.isNull(t)?null:e.SacLinePatternType.lookup(t.getName())},getLineStyleFromViz:function(t){return e.isNull(t)?null:e.SacTableLineStyle.lookup(t.getName())},getTableMemberHeaderHandlingFromViz:function(t){var i=null;if(e.notNull(t)){i=e.SacTableMemberHeaderHandling.lookup(t.getName())}return i},getTablePageBreakHandlingFromViz:function(t){var i=null;if(e.notNull(t)){i=e.SacTablePageBreakHandling.lookup(t.getName())}return i},getValueSignFromViz:function(t){var i=null;if(e.notNull(t)){if(t===e.ValueSign.NORMAL){i=e.SacValueSign.NORMAL}else if(t===e.ValueSign.NEGATIVE){i=e.SacValueSign.NEGATIVE}else if(t===e.ValueSign.ZERO){i=e.SacValueSign.ZERO}else if(t===e.ValueSign.POSITIVE){i=e.SacValueSign.POSITIVE}else if(t===e.ValueSign.NULL_VALUE){i=e.SacValueSign.NULL_VALUE}else if(t===e.ValueSign.UNBOOKED){i=e.SacValueSign.UNBOOKED}else if(t===e.ValueSign.UNDEFINED){i=e.SacValueSign.UNDEFINED}}return i},getVerticalAlignmentFromViz:function(t){var i=null;if(t===e.CellAlignmentVertical.TOP){i=e.SacTableCellVerticalAlignment.TOP}else if(t===e.CellAlignmentVertical.MIDDLE){i=e.SacTableCellVerticalAlignment.MIDDLE}else if(t===e.CellAlignmentVertical.BOTTOM){i=e.SacTableCellVerticalAlignment.BOTTOM}else if(t===e.CellAlignmentVertical.INHERIT){i=e.SacTableCellVerticalAlignment.INHERIT}return i},getHorizontalAlignmentFromViz:function(t){var i=null;if(t===e.CellAlignmentHorizontal.LEFT){i=e.SacTableCellHorizontalAlignment.LEFT}else if(t===e.CellAlignmentHorizontal.CENTER){i=e.SacTableCellHorizontalAlignment.CENTER}else if(t===e.CellAlignmentHorizontal.RIGHT){i=e.SacTableCellHorizontalAlignment.RIGHT}else if(t===e.CellAlignmentHorizontal.INHERIT){i=e.SacTableCellHorizontalAlignment.INHERIT}return i},applyHeaderSectionInfoFromViz:function(e,t){if(e.isDimensionLevel()){t.setHeaderLevel(0)}else if(e.isAttributeLevel()){t.setHeaderLevel(1)}else if(e.isFieldLevel()){t.setHeaderLevel(2)}else{t.setHeaderLevel(-1)}t.setHeaderName(e.getHeaderName());t.setExactHeaderLevel(e.isExactHeaderLevel())},applyDataSectionInfoFromViz:function(e,t){t.setGroupName(e.getDimensionName());t.setSectionLevelName(e.getHierarchyLevelName());t.setSectionNodeName(e.getMemberName());t.setGroupLevel(e.getAxisLevel());t.setSectionLevel(e.getHierarchyLevel());t.setExactSectionLevel(e.isExactHierarchyLevel());t.setIncludeHeaderBand(e.isIncludeHeaderBand());t.setIncludeTotalsBand(e.isIncludeTotalsBand());t.setIncludeInnerBands(e.isIncludeSubDrills());t.setIncludeAllBands(e.isIncludeAllMatchingBands())},applyPathInfoFromViz:function(t,i){e.XStream.of(t).forEach(function(t){e.OlapVizToPivotConverterUtil.applyDataSectionInfoFromViz(t,i.addNewPathElement())}.bind(this))},applyDataSectionInfoFromMember:function(e,t){var i=e.getDimension();t.setGroupName(i.getName())},applyDataPointStyleFromViz:function(t,i){i.setExceptionName(t.getExceptionName());i.setAlertLevelMin(e.OlapVizToPivotConverterUtil.getAlertLevelFromViz(t.getAlertLevelMin()));i.setAlertLevelMax(e.OlapVizToPivotConverterUtil.getAlertLevelFromViz(t.getAlertLevelMax()));i.setValueSign(e.OlapVizToPivotConverterUtil.getValueSignFromViz(t.getValueSign()));e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(t.getFormattingStyle(),i.getTableStyle());i.setPriority(t.getPriority())},applyPaletteBasedStyleFromViz:function(t,i){i.setAxisType(e.OlapVizToPivotConverterUtil.getTableAxisTypeFromViz(t.getAxisType()));e.OlapVizToPivotConverterUtil.applyStylePaletteFromViz(t.getStylePalette(),i.getStylePalette());e.OlapVizToPivotConverterUtil.applyPathInfoFromViz(t.getAxisPath(),i.getDataPath())},applyStylePaletteFromViz:function(t,i){var r=t.getIterator();i.clear();while(r.hasNext()){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(r.next(),i.addNewStyle())}},applyScopedStyleFromViz:function(t,i){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(t.getStyle(),i.getStyle());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getOrthogonalColumnsScope(),i.getOrthogonalColumnsRestriction());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getOrthogonalRowsScope(),i.getOrthogonalRowsRestriction())},applyCellsReferenceScopeFromViz:function(t,i){var r=t.getHeaderSectionInfos().getIterator();i.clearHeaderSectionsInfos();while(r.hasNext()){e.OlapVizToPivotConverterUtil.applyHeaderSectionInfoFromViz(r.next(),i.addNewHeaderSectionInfo())}i.setMatchHeaderSectionStart(t.isMatchHeaderSectionStart());i.setMatchHeaderSectionEnd(t.isMatchHeaderSectionEnd());i.setMatchFullHeaderSection(t.isMatchFullHeaderSection());var n=t.getAxisPaths().getIterator();i.clearDataPaths();while(n.hasNext()){e.OlapVizToPivotConverterUtil.applyPathInfoFromViz(n.next(),i.addNewDataPath())}i.setMatchDataSectionStart(t.isMatchDataSectionStart());i.setMatchDataSectionEnd(t.isMatchDataSectionEnd());i.setMatchFullDataSection(t.isMatchFullDataSection());i.setMatchModulo(t.getMatchModulo());i.setMatchOrdinal(t.getMatchOrdinal())},applyTableStyleFromViz:function(t,i){var r=t.getCellFormattingScope();if(e.notNull(r)){i.setRestrictToRowStyle(r.isRestrictToRows());i.setRestrictToColumnStyle(r.isRestrictToColumns());i.setRestrictToHeaderCells(r.isRestrictToHeaders());i.setRestrictToDataCells(r.isRestrictToData());i.setRestrictToFirstItem(r.isRestrictToFirst());i.setRestrictToLastItem(r.isRestrictToLast())}i.setFillColor(t.getFillColor());e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineTop(),t.getStyledLineTop());e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineBottom(),t.getStyledLineBottom());e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineLeft(),t.getStyledLineLeft());e.OlapVizToPivotConverterUtil.transferStyledLine(i.getStyledLineRight(),t.getStyledLineRight());i.setFontItalicExt(t.isFontItalicExt());i.setFontBoldExt(t.isFontBoldExt());i.setFontUnderlineExt(t.isFontUnderlineExt());i.setFontStrikeThroughExt(t.isFontStrikeThroughExt());i.setFontSize(t.getFontSize());i.setFontFamily(t.getFontFamily());i.setFontColor(t.getFontColor());i.setCellChartLineColor(t.getCellChartLineColor());i.setCellChartBarColor(t.getCellChartBarColor());i.setThresholdType(e.OlapVizToPivotConverterUtil.getAlertSymbolFromViz(t.getAlertSymbol()));i.setThresholdColor(t.getAlertColor());i.setVerticalAlignment(e.OlapVizToPivotConverterUtil.getVerticalAlignmentFromViz(t.getVerticalAlignment()));i.setHorizontalAlignment(e.OlapVizToPivotConverterUtil.getHorizontalAlignmentFromViz(t.getHorizontalAlignment()))},transferStyledLine:function(t,i){t.setLeftPadding(i.getLeftPadding());t.setRightPadding(i.getRightPadding());t.setTopPadding(i.getTopPadding());t.setBottomPadding(i.getBottomPadding());t.setColor(i.getColor());t.setWidth(i.getWidth());t.setPatternWidth(i.getPatternWidth());t.setPatternBackground(i.getPatternBackground());t.setPatternColor(i.getPatternColor());t.setPatternBorderColor(i.getPatternBorderColor());t.setPatternType(e.OlapVizToPivotConverterUtil.getLinePatternTypeFromViz(i.getPatternType()));t.setLineStyle(e.OlapVizToPivotConverterUtil.getLineStyleFromViz(i.getLineStyle()))},applyInsertedTupleFromViz:function(t,i){var r=t.getTableDefinition();i.setCellWidth(t.getCellWidth());i.setCellHeight(t.getCellHeight());i.setFormattedText(t.getFormattedText());i.setMerged(t.isMerged());var n=t.getScopedStyleNames().getIterator();while(n.hasNext()){e.OlapVizToPivotConverterUtil.applyScopedStyleFromViz(r.getScopedStyle(n.next()),i.addNewScopedStyle())}var a=t.getPaletteBasedStyleNames().getIterator();while(a.hasNext()){e.OlapVizToPivotConverterUtil.applyPaletteBasedStyleFromViz(r.getPaletteBasedStyle(n.next()),i.addNewPaletteBasedStyle())}},applyTableMarkupFromViz:function(t,i){var r=t.getTableDefinition();i.setHide(t.isHide());i.setCellHeight(t.getCellHeight());i.setCellWidth(t.getCellWidth());i.setPriority(t.getPriority());i.setPageBreakHandlingBefore(e.OlapVizToPivotConverterUtil.getTablePageBreakHandlingFromViz(t.getPageBreakHandlingBefore()));i.setPageBreakHandlingInside(e.OlapVizToPivotConverterUtil.getTablePageBreakHandlingFromViz(t.getPageBreakHandlingInside()));i.setPageBreakHandlingAfter(e.OlapVizToPivotConverterUtil.getTablePageBreakHandlingFromViz(t.getPageBreakHandlingAfter()));i.setTableMemberHeaderHandling(e.OlapVizToPivotConverterUtil.getTableMemberHeaderHandlingFromViz(t.getTableMemberHeaderHandling()));e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getColumnsScope(),i.getColumnsScope());e.OlapVizToPivotConverterUtil.applyCellsReferenceScopeFromViz(t.getRowsScope(),i.getRowsScope());var n=t.getScopedStyleNames().getIterator();while(n.hasNext()){e.OlapVizToPivotConverterUtil.applyScopedStyleFromViz(r.getScopedStyle(n.next()),i.addNewScopedStyle())}var a=t.getPaletteBasedStyleNames().getIterator();while(a.hasNext()){e.OlapVizToPivotConverterUtil.applyPaletteBasedStyleFromViz(r.getPaletteBasedStyle(n.next()),i.addNewPaletteBasedStyle())}var s=t.getTuplesBefore().getIterator();while(s.hasNext()){e.OlapVizToPivotConverterUtil.applyInsertedTupleFromViz(s.next(),i.addNewTupleBefore())}s=t.getTuplesAfter().getIterator();while(s.hasNext()){e.OlapVizToPivotConverterUtil.applyInsertedTupleFromViz(s.next(),i.addNewTupleAfter())}}};e.GoogleChartBar=function(){};e.GoogleChartBar.prototype=new e.GoogleChart;e.GoogleChartBar.prototype._ff_c="GoogleChartBar";e.GoogleChartBar.create=function(){return new e.GoogleChartBar};e.GoogleChartBar.prototype.getChartName=function(){return"BarChart"};e.GoogleChartBar.prototype.addChartSpecificOptions=function(t,i){var r=i.getStructureByKey(e.VizDefConstants.K_CHART);var n=r.getStringByKey(e.VizDefConstants.K_TYPE);t.putBoolean(e.GoogleConstants.K_STACKED,e.XString.isEqual(n,e.VizDefConstants.V_STACKED_BAR));var a=t.putNewStructure(e.GoogleConstants.K_BAR);a.putString(e.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false)};e.GoogleChartColumn=function(){};e.GoogleChartColumn.prototype=new e.GoogleChart;e.GoogleChartColumn.prototype._ff_c="GoogleChartColumn";e.GoogleChartColumn.create=function(){return new e.GoogleChartColumn};e.GoogleChartColumn.prototype.getChartName=function(){return"ColumnChart"};e.GoogleChartColumn.prototype.addChartSpecificOptions=function(t,i){var r=i.getStructureByKey(e.VizDefConstants.K_CHART);var n=r.getStringByKey(e.VizDefConstants.K_TYPE);t.putBoolean(e.GoogleConstants.K_STACKED,e.XString.isEqual(n,e.VizDefConstants.V_STACKED_BAR));var a=t.putNewStructure(e.GoogleConstants.K_BAR);a.putString(e.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true)};e.GoogleChartLine=function(){};e.GoogleChartLine.prototype=new e.GoogleChart;e.GoogleChartLine.prototype._ff_c="GoogleChartLine";e.GoogleChartLine.POINT_SIZE=3;e.GoogleChartLine.create=function(){return new e.GoogleChartLine};e.GoogleChartLine.prototype.getChartName=function(){return"LineChart"};e.GoogleChartLine.prototype.addChartSpecificOptions=function(t,i){t.putInteger(e.GoogleConstants.K_POINT_SIZE,e.GoogleChartLine.POINT_SIZE);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_VERTICAL_AXIS),i,e.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(t.putNewStructure(e.GoogleConstants.K_HORIZONTAL_AXIS),i,e.VizDefConstants.K_CATEGORY_AXIS,true)};e.RsHiChartCovariationHelper=function(){};e.RsHiChartCovariationHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartCovariationHelper.prototype._ff_c="RsHiChartCovariationHelper";e.RsHiChartCovariationHelper.prototype.m_xMeasures=null;e.RsHiChartCovariationHelper.prototype.m_yMeasures=null;e.RsHiChartCovariationHelper.prototype.m_zMeasures=null;e.RsHiChartCovariationHelper.prototype.m_xColors=null;e.RsHiChartCovariationHelper.prototype.m_yColors=null;e.RsHiChartCovariationHelper.prototype.m_zColors=null;e.RsHiChartCovariationHelper.prototype.m_xPatterns=null;e.RsHiChartCovariationHelper.prototype.m_yPatterns=null;e.RsHiChartCovariationHelper.prototype.m_zPatterns=null;e.RsHiChartCovariationHelper.prototype.m_xList=null;e.RsHiChartCovariationHelper.prototype.m_yList=null;e.RsHiChartCovariationHelper.prototype.m_zList=null;e.RsHiChartCovariationHelper.prototype.m_xListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_yListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_zListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_categoriesList=null;e.RsHiChartCovariationHelper.prototype.m_categoryLabels=null;e.RsHiChartCovariationHelper.prototype.m_tooltipValueMeasures=null;e.RsHiChartCovariationHelper.prototype.m_tooltipList=null;e.RsHiChartCovariationHelper.prototype.m_tooltipListFormatted=null;e.RsHiChartCovariationHelper.prototype.m_colorList=null;e.RsHiChartCovariationHelper.prototype.getColorList=function(){return this.m_colorList};e.RsHiChartCovariationHelper.prototype.getCategoriesList=function(){return this.m_categoriesList};e.RsHiChartCovariationHelper.prototype.getCategoryLabels=function(){return this.m_categoryLabels};e.RsHiChartCovariationHelper.prototype.getXMeasures=function(){return this.m_xMeasures};e.RsHiChartCovariationHelper.prototype.getYMeasures=function(){return this.m_yMeasures};e.RsHiChartCovariationHelper.prototype.getZMeasures=function(){return this.m_zMeasures};e.RsHiChartCovariationHelper.prototype.getXColors=function(){return this.m_xColors};e.RsHiChartCovariationHelper.prototype.getYColors=function(){return this.m_yColors};e.RsHiChartCovariationHelper.prototype.getZColors=function(){return this.m_zColors};e.RsHiChartCovariationHelper.prototype.getXPatterns=function(){return this.m_xPatterns};e.RsHiChartCovariationHelper.prototype.getYPatterns=function(){return this.m_yPatterns};e.RsHiChartCovariationHelper.prototype.getZPatterns=function(){return this.m_zPatterns};e.RsHiChartCovariationHelper.prototype.getXList=function(){return this.m_xList};e.RsHiChartCovariationHelper.prototype.getXListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_xList)){return this.m_xList.getListAt(0)}return null};e.RsHiChartCovariationHelper.prototype.getYListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_yList)){return this.m_yList.getListAt(0)}return this.getXListRemapped()};e.RsHiChartCovariationHelper.prototype.getZListRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_zList)){return this.m_zList.getListAt(0)}return this.getYListRemapped()};e.RsHiChartCovariationHelper.prototype.getXListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_xListFormatted)){return this.m_xListFormatted.getListAt(0)}return null};e.RsHiChartCovariationHelper.prototype.getYListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_yListFormatted)){return this.m_yListFormatted.getListAt(0)}return this.getXListFormattedRemapped()};e.RsHiChartCovariationHelper.prototype.getZListFormattedRemapped=function(){if(e.XCollectionUtils.hasElements(this.m_zListFormatted)){return this.m_zListFormatted.getListAt(0)}return this.getYListFormattedRemapped()};e.RsHiChartCovariationHelper.prototype.getYList=function(){return this.m_yList};e.RsHiChartCovariationHelper.prototype.getZList=function(){return this.m_zList};e.RsHiChartCovariationHelper.prototype.getXListFormatted=function(){return this.m_xListFormatted};e.RsHiChartCovariationHelper.prototype.getYListFormatted=function(){return this.m_yListFormatted};e.RsHiChartCovariationHelper.prototype.getZListFormatted=function(){return this.m_zListFormatted};e.RsHiChartCovariationHelper.prototype.readResultSetData=function(t,i,r){var n=this.getChartData();var a=true;if(r.getAvailableDataCellCount()>0){this.m_xMeasures=e.XListOfString.create();this.m_yMeasures=e.XListOfString.create();this.m_zMeasures=e.XListOfString.create();this.m_xPatterns=e.XListOfString.create();this.m_yPatterns=e.XListOfString.create();this.m_zPatterns=e.XListOfString.create();this.m_xColors=e.XListOfString.create();this.m_yColors=e.XListOfString.create();this.m_zColors=e.XListOfString.create();var s=e.XListOfString.create();if(e.XStringUtils.isNotNullAndNotEmpty(this.getXFeed())){s.add(this.getXFeed())}if(e.XStringUtils.isNotNullAndNotEmpty(this.getYFeed())){s.add(this.getYFeed())}if(e.XStringUtils.isNotNullAndNotEmpty(this.getZFeed())){s.add(this.getZFeed())}this.m_tooltipValueMeasures=e.XListOfString.create();s.add(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);this.m_colorList=t.getPrettyNamesForFeed(true,!a,e.VizDefConstants.K_COLOR);this.m_categoriesList=i.getPrettyNames(true,!a);this.m_categoryLabels=i.getLabels(true,!a,true);if(!e.XCollectionUtils.hasElements(this.m_categoriesList)){this.m_categoriesList=e.XListOfString.create();this.m_categoriesList.add("")}this.m_xList=e.PrFactory.createList();this.m_yList=e.PrFactory.createList();this.m_zList=e.PrFactory.createList();this.m_tooltipList=e.PrFactory.createList();this.m_xListFormatted=e.PrFactory.createList();this.m_yListFormatted=e.PrFactory.createList();this.m_zListFormatted=e.PrFactory.createList();this.m_tooltipListFormatted=e.PrFactory.createList();var o;var l;var u;var p=e.XListOfString.create();p.add(e.VizDefConstants.K_CATEGORY_AXIS);p.add(e.VizDefConstants.K_COLOR);var g=t.getIndicesByFeedOrder(s);for(var f=0;f<g.size();f++){var c=g.get(f).getInteger();var C=t.getTupleAt(c);if(C.isSelectedByString(this.getXFeed())){var _=C.getPrettyTextForFeed(this.getXFeed());if(!this.m_xMeasures.contains(_)){this.m_xMeasures.add(_);this.m_xPatterns.add(C.getPattern());this.m_xColors.add(C.getColor())}o=this.m_xList.addNewList();l=this.m_xListFormatted.addNewList();u=this.getXFeed()}else if(this.getYFeed()!==null&&C.isSelectedByString(this.getYFeed())){var m=C.getPrettyTextForFeed(this.getYFeed());if(!this.m_yMeasures.contains(m)){this.m_yMeasures.add(m);this.m_yPatterns.add(C.getPattern());this.m_yColors.add(C.getColor())}o=this.m_yList.addNewList();l=this.m_yListFormatted.addNewList();u=this.getYFeed()}else if(this.getZFeed()!==null&&C.isSelectedByString(this.getZFeed())){var S=C.getPrettyTextForFeed(this.getZFeed());if(!this.m_zMeasures.contains(S)){this.m_zMeasures.add(S);this.m_zPatterns.add(C.getPattern());this.m_zColors.add(C.getColor())}o=this.m_zList.addNewList();l=this.m_zListFormatted.addNewList();u=this.getZFeed()}else if(C.isSelectedByString(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS)){var d=C.getPrettyTextForFeed(e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);if(!this.m_tooltipValueMeasures.contains(d)){this.m_tooltipValueMeasures.add(d)}o=this.m_tooltipList.addNewList();l=this.m_tooltipListFormatted.addNewList();u=""}else{continue}if(i.getTuplesCount()>0){for(var T=0;T<i.getTuplesCount();T++){if(a&&i.getTupleAt(T).isTotal()){continue}this.addValueToList(r,c,T,o,l,u,t,C)}}else{this.addValueToList(r,c,0,o,l,u,t,C)}}var y=e.XStringBuffer.create();y.append("<b>{series.name}</b><br/>");this.decorateToolTip(y);for(var h=0;h<this.m_tooltipListFormatted.size();h++){y.append("<b>{point.tHeader");y.append(e.XInteger.convertToString(h));y.append("}</b>  {point.tFormatted");y.append(e.XInteger.convertToString(h));y.append("}<br/>")}y.append("{point.errorRange}");var D=n.putNewStructure(e.VizDefConstants.K_TOOLTIP);D.putString(e.VizDefConstants.K_POINT_FORMAT,y.toString());D.putString(e.VizDefConstants.K_HEADER_FORMAT,"")}this.setShowLegend(this.getXList().size()>1)};e.RsHiChartCovariationHelper.prototype.decorateToolTip=function(e){};e.RsHiChartCovariationHelper.prototype.addValueToList=function(t,i,r,n,a,s,o,l){var u=t.getDataCell(i,r);var p=u.getValueType();if(p===e.XValueType.DOUBLE||p===e.XValueType.DECIMAL_FLOAT){if(u.getXValue()===null){n.addDouble(0)}else{n.addDouble(u.getDouble())}var g=o.getFormattedValue(s,l,u);a.addString(g)}};e.RsHiChartCovariationHelper.prototype.addToolTipsToSeries=function(t,i,r){if(e.XCollectionUtils.hasElements(this.m_tooltipValueMeasures)){var n=this.m_tooltipValueMeasures.size();for(var a=0;a<n;a++){t.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(a)),this.m_tooltipValueMeasures.get(a));t.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(a)),this.m_tooltipListFormatted.getListAt(i*n+a).getStringAt(r))}}};e.RsHiChartHeatmapHelper=function(){};e.RsHiChartHeatmapHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartHeatmapHelper.prototype._ff_c="RsHiChartHeatmapHelper";e.RsHiChartHeatmapHelper.prototype.isShowLegend=function(){return false};e.RsHiChartHeatmapHelper.prototype.prepareRendering=function(){};e.RsHiChartHeatmapHelper.prototype.readResultSetData=function(t,i,r){var n=this.getChartData();var a=e.XList.create();var s=n.putNewStructure(e.VizDefConstants.K_LANG);if(r.getAvailableDataCellCount()>0){var o=true;var l=n.putNewList(e.VizDefConstants.K_X_AXIS);var u=n.putNewList(e.VizDefConstants.K_Y_AXIS);var p=l.addNewStructure();var g=u.addNewStructure();var f=g.putNewList(e.VizDefConstants.K_CATEGORIES);var c=p.putNewList(e.VizDefConstants.K_CATEGORIES);var C=n.putNewList(e.VizDefConstants.K_SERIES);var _=C.addNewStructure();var m=_.putNewStructure(e.VizDefConstants.K_DATA_LABELS);m.putString(e.VizDefConstants.K_POINT_FORMAT,"{point.valueFormatted}");var S=_.putNewList(e.VizDefConstants.K_DATA);var d=e.XStringBuffer.create();var T=e.XListOfString.create();T.add(e.VizDefConstants.K_COLOR);var y=e.XListOfString.create();d.append("<b>{point.xCategory} / {point.yCategory}</b><br/><b>{point.series.name}</b>:  {point.valueFormatted}<br/>");var h=t.getPrettyNamesForFeed(true,!o,e.VizDefConstants.K_CATEGORY_AXIS2).getIterator();while(h.hasNext()){c.addString(h.next())}var D=e.XCollectionUtils.hasElements(c)&&c.size()>1;var R=i.getPrettyNamesForFeed(true,!o,e.VizDefConstants.K_CATEGORY_AXIS).getIterator();var A=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var V=0;V<A.size();V++){d.append("<b>{point.tHeader");d.append(e.XInteger.convertToString(V));d.append("}</b>:  {point.tFormatted");d.append(e.XInteger.convertToString(V));d.append("}<br/>")}while(R.hasNext()){f.addString(R.next())}if(c.isEmpty()){c.addString("")}if(f.isEmpty()){f.addString("")}var E=0;var v=t.getIndicesByFeedOrder(T);for(var N=0;N<v.size();N++){var z=v.get(N).getInteger();var L=t.getTupleAt(z);if(!L.isSelectedByString(e.VizDefConstants.K_COLOR)){continue}if(o&&t.getTupleAt(z).isTotal()){continue}y.add(L.getPrettyTextForFeed(e.VizDefConstants.K_COLOR));var I=L.getMemberKeys();var K=null;var O=null;if(e.XCollectionUtils.hasElements(I)){K=t.getMatchingTupleIndicesForMemberNameAndFeed(I,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS)}var F=0;for(var b=0;b<i.getTuplesCount();b++){if(!i.getTupleAt(b).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(e.XCollectionUtils.hasElements(K)){O=e.XListOfString.create();for(var H=0;H<K.size();H++){var w=K.get(H).getInteger();O.add(t.getFormattedValue(e.VizDefConstants.K_COLOR,t.getTupleAt(w),r.getDataCell(w,b)))}}var X=r.getDataCell(z,b);var B=e.PrFactory.createStructure();var M=X.getXValue();if(!o||!i.getTupleAt(b).isTotal()){if(e.notNull(M)){B.putInteger(e.VizDefConstants.K_X,D?E:F);B.putInteger(e.VizDefConstants.K_Y,D?F:E);B.putDouble(e.VizDefConstants.K_VALUE,X.getDouble());B.putString(e.VizDefConstants.K_VALUE_FORMATTED,X.getFormattedValue());B.putString(e.VizDefConstants.K_X_CATEGORY,e.XCollectionUtils.hasElements(c)&&E<c.size()?c.getStringAt(E):"");B.putString(e.VizDefConstants.K_Y_CATEGORY,e.XCollectionUtils.hasElements(f)&&F<f.size()?f.getStringAt(F):"");if(e.XCollectionUtils.hasElements(A)){for(var x=0;x<A.size();x++){B.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(x)),A.get(x))}}if(e.XCollectionUtils.hasElements(O)){for(var P=0;P<O.size();P++){B.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(P)),O.get(P))}}S.add(B);a.add(e.XDoubleValue.create(X.getDouble()))}}F++}E++}if(!D){g.put(e.VizDefConstants.K_CATEGORIES,c);p.put(e.VizDefConstants.K_CATEGORIES,f)}if(e.XCollectionUtils.hasElements(y)){_.putString(e.VizDefConstants.K_NAME,y.get(0))}var U=e.XDoubleValue.create(1);if(a.size()>1){a.sortByComparator(new e.XComparatorDouble);U=a.get(a.size()-1)}_.putInteger(e.VizDefConstants.K_BORDER_WIDTH,2);_.putString(e.VizDefConstants.K_BORDER_COLOR,"white");n.putDouble(e.VizDefConstants.K_MIN_ELEMENT,a.get(0).getDouble());n.putDouble(e.VizDefConstants.K_MAX_ELEMENT,U.getDouble());var G=n.putNewStructure(e.VizDefConstants.K_TOOLTIP);G.putString(e.VizDefConstants.K_POINT_FORMAT,d.toString());G.putString(e.VizDefConstants.K_HEADER_FORMAT,"");e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(n,this.getChartType(),this.getVizDef(),this.getGlobalDef())}else{n.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);s.putString(e.VizDefConstants.K_NO_DATA,"FireFly Resultset is empty.")}};e.RsHiChartHeatmapHelper.prototype.finishRendering=function(){e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef())};e.RsHiChartSeriesHelper=function(){};e.RsHiChartSeriesHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartSeriesHelper.prototype._ff_c="RsHiChartSeriesHelper";e.RsHiChartSeriesHelper.prototype.getChartWidth=function(){return this.m_chartWidth};e.RsHiChartSeriesHelper.prototype.setChartWidth=function(e){this.m_chartWidth=e};e.RsHiChartSeriesHelper.prototype.m_hasVariance=false;e.RsHiChartSeriesHelper.prototype.m_widthScale=0;e.RsHiChartSeriesHelper.prototype.m_chartWidth=0;e.RsHiChartSeriesHelper.prototype.isTimeseries=function(){return false};e.RsHiChartSeriesHelper.prototype.isCombinationChart=function(){return e.XStringUtils.isNotNullAndNotEmpty(this.getSecondChart())};e.RsHiChartSeriesHelper.prototype.reiterateResultSet=function(t,i,r){var n=this.getChartData();var a=t.hasTupleForFeed(e.VizDefConstants.K_VALUE_AXIS2);var s=n.putNewList(e.VizDefConstants.K_Y_AXIS);var o=s.addNewStructure();var l;var u;var p=e.PrFactory.createStructure();p=n.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);var g=e.VizDefConstants.K_TRANSPARENT;if(n.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(n.getListByKey(e.VizDefConstants.K_COLORS).size()>0){g=n.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(p)){p=n.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}var f=n.getListByKey(e.VizDefConstants.K_SERIES);var c=null;var C=0;if(this.isTimeseries()){l=n.putNewList(e.VizDefConstants.K_X_AXIS);u=l.addNewStructure();u.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_DATE_TIME)}else{l=n.getListByKey(e.VizDefConstants.K_X_AXIS);if(e.isNull(l)){l=n.putNewList(e.VizDefConstants.K_X_AXIS)}u=l.getStructureAt(0);if(e.isNull(u)){u=l.addNewStructure()}}var _=null;if(a){_=s.addNewStructure();e.RsHiChartVizUtilsSimple.plotOptionChart(_,this.getSecondChart(),null,p,1,g);_.putBoolean(e.VizDefConstants.K_OPPOSITE,true);if(this.isHasVariance()){if(this.isInverted()){_.putString(e.VizDefConstants.K_WIDTH,"50%")}else{_.putString(e.VizDefConstants.K_WIDTH,"50%");o.putString(e.VizDefConstants.V_POSITION_TOP,"50%")}}e.RsHiChartVizUtilsSimple.dataLabelAlignment(_,this.getSecondChart(),t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS2),false)}var m;var S;var d=false;var T=null;if(this.getVizDef()!==null){T=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(T)){var y=T.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(y)&&!this.isPolar()){u=e.RsHiChartUtils.axisPloter(y,u,this.getChartType(),true)}var h=T.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(h)&&!this.isPolar()){o=e.RsHiChartUtils.axisPloter(h,o,this.getChartType(),false)}e.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),o,_,t,i,r)}}if(this.isHasVariance()){var D=s.addNewStructure();if(this.isInverted()){o.putString(e.VizDefConstants.K_WIDTH,"50%");D.putString(e.VizDefConstants.K_WIDTH,"50%");D.putString(e.VizDefConstants.V_LEFT,"50%")}else{o.putString(e.VizDefConstants.K_HEIGHT,"50%");D.putString(e.VizDefConstants.K_HEIGHT,"50%");o.putString(e.VizDefConstants.V_POSITION_TOP,"50%")}if(e.notNull(T)){var R=T.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(R)){e.RsHiChartUtils.axisPloter(R,D,this.getChartType(),false)}}e.RsHiChartVizUtilsSimple.plotOptionChart(D,this.getChartType(),null,p,this.isCombinationChart()?2:1,g)}e.RsHiChartVizUtilsSimple.legendStyler(n);if(d){for(var A=0;A<f.size();A++){e.RsHiChartVizUtilsSimple.plotOptionChart(o,this.getChartType(),this.getStackingType(),p,0,g);m=f.getStructureAt(A);c=m.getStringByKey(e.VizDefConstants.K_TYPE);if(e.XString.isEqual(c,e.VizDefConstants.K_ERRORBAR)){C=A;S=f.getStructureAt(C-1);var V=m.putNewStructure(e.VizDefConstants.K_DATA_LABELS);V.putBoolean(e.VizDefConstants.K_ENABLED,true);var E=V.putNewStructure(e.VizDefConstants.K_STYLE);E.putString(e.VizDefConstants.K_FILL,"black");E.putString(e.VizDefConstants.K_COLOR,"black");var v=S.putNewStructure(e.VizDefConstants.K_DATA_LABELS);v.putBoolean(e.VizDefConstants.K_ENABLED,false)}}}else{e.RsHiChartVizUtilsSimple.plotOptionChart(o,this.getChartType(),this.getStackingType(),p,0,g)}var N=e.XStringUtils.isNullOrEmpty(this.getSecondChart())&&e.XString.isEqual(e.VizDefConstants.V_NORMAL,this.getStackingType())&&(e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_BAR)||e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_COLUMN));e.RsHiChartVizUtilsSimple.dataLabelAlignment(o,this.getChartType(),t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS),N);var z=e.XString.isEqual(e.VizDefConstants.K_LINE,this.getChartType());var L=e.XString.isEqual(e.VizDefConstants.K_AREA,this.getChartType());if(!this.isPolar()&&!this.isTimeseries()&&!z&&!L){if(this.getChartWidth()>3&&this.getChartWidth()*this.getWidthScale()>20){var I=u.putNewStructure(e.VizDefConstants.K_SCROLL_BAR);I.putBoolean(e.VizDefConstants.K_SHOW_FULL,false);I.putBoolean(e.VizDefConstants.K_ENABLED,true);u.putInteger(e.VizDefConstants.K_MIN,0);u.putInteger(e.VizDefConstants.K_MAX,e.XMath.max(1,e.XMath.div(e.XMath.min(13,this.getChartWidth()),e.XMath.max(1,this.getWidthScale()))))}}var K=e.XString.isEqual(e.VizDefConstants.V_CHART_TYPE_BAR,this.getChartType());if(K){var O=o.containsKey(e.VizDefConstants.K_PLOT_LINES)?o.getListByKey(e.VizDefConstants.K_PLOT_LINES):o.putNewList(e.VizDefConstants.K_PLOT_LINES);var F=O.addNewStructure();F.putString(e.VizDefConstants.K_COLOR,e.VizDefConstants.V_BLACK);F.putInteger(e.VizDefConstants.K_WIDTH,2);F.putInteger(e.VizDefConstants.K_VALUE,0);F.putString(e.VizDefConstants.K_ID,e.VizDefConstants.V_BASE_PLOTLINE_ID);F.putInteger(e.VizDefConstants.K_Z_INDEX,6)}};e.RsHiChartSeriesHelper.prototype.getWidthScale=function(){return this.m_widthScale};e.RsHiChartSeriesHelper.prototype.setWidthScale=function(e){this.m_widthScale=e};e.RsHiChartSeriesHelper.prototype.isHasVariance=function(){return this.m_hasVariance};e.RsHiChartSeriesHelper.prototype.setHasVariance=function(e){this.m_hasVariance=e};e.RsHiChartUnsupportedHelper=function(){};e.RsHiChartUnsupportedHelper.prototype=new e.RsHiChartRenderHelper;e.RsHiChartUnsupportedHelper.prototype._ff_c="RsHiChartUnsupportedHelper";e.RsHiChartUnsupportedHelper.prototype.prepareRendering=function(){};e.RsHiChartUnsupportedHelper.prototype.isUnsupported=function(){return true};e.RsHiChartUnsupportedHelper.prototype.readResultSetData=function(e,t,i){};e.RsHiChartUnsupportedHelper.prototype.finishRendering=function(){};e.SacAnalyticsTableClipboardHelper=function(){};e.SacAnalyticsTableClipboardHelper.prototype=new e.SacTableClipboardHelper;e.SacAnalyticsTableClipboardHelper.prototype._ff_c="SacAnalyticsTableClipboardHelper";e.SacAnalyticsTableClipboardHelper.createForAnalytics=function(t){var i=new e.SacAnalyticsTableClipboardHelper;i.setupWithTable(t);return i};e.SacAnalyticsTableClipboardHelper.prototype.fillStructureOfCell=function(t,i,r,n){var a=this.getTable();if(a.isMergeRepetitiveHeaderCells()){if(t.getRepetitiveColumns()>0){t.setMergedColumns(t.getRepetitiveColumns())}if(t.getRepetitiveRows()>0){t.setMergedRows(t.getRepetitiveRows())}}else{if(t.getMergedColumns()>0){t.setMergedColumns(0)}if(t.getMergedRows()>0){t.setMergedRows(0)}}var s=e.SacTableClipboardHelper.prototype.fillStructureOfCell.call(this,t,i,r,n);var o=t.getParentColumn();var l=t.getParentRow();s.putInteger(e.SacTableConstants.N_TUPLE_INDEX,o.getTupleIndex());if(t.isLastHeaderRow()&&!a.isEmptyRowDimensions()){s.putInteger(e.SacTableConstants.RCS_N_INDEX,o.getDimensionIndex());if(o.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,o.getFieldName())}}else{s.putInteger(e.SacTableConstants.RCS_N_INDEX,l.getDimensionIndex());if(l.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,l.getFieldName())}}var u=t.getSortDirection();if(e.notNull(u)){var p=null;if(u===e.XSortDirection.DEFAULT_VALUE){p=""}else if(u===e.XSortDirection.ASCENDING){p=""}else if(u===e.XSortDirection.DESCENDING){p=""}var g=s.putNewList(e.SacTableConstants.C_L_CELL_ICONS_RIGHT).addNewStructure();g.putString(e.SacTableConstants.CI_S_CLASS_NAME,e.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);var f=g.putNewStructure(e.SacTableConstants.CI_M_DATA_ATTRIBUTES);f.putString(e.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,p);var c=g.putNewStructure(e.SacTableConstants.CI_M_STYLE);c.putString(e.SacTableConstants.CIS_S_FONT_FAMILY,e.SacTableConstants.CIS_SV_SAP_ICONS);c.putInteger(e.SacTableConstants.CIS_N_MARGIN_LEFT,e.SacTableConstants.CIS_NV_MARGIN_RIGHT);g.putBoolean(e.SacTableConstants.CI_B_ICON_AFTER,true)}return s};e.SacAnalyticTableCsvRenderHelper=function(){};e.SacAnalyticTableCsvRenderHelper.prototype=new e.SacTableCsvRenderHelper;e.SacAnalyticTableCsvRenderHelper.prototype._ff_c="SacAnalyticTableCsvRenderHelper";e.SacAnalyticTableExportHelper=function(){};e.SacAnalyticTableExportHelper.prototype=new e.SacTableExportHelper;e.SacAnalyticTableExportHelper.prototype._ff_c="SacAnalyticTableExportHelper";e.SacAnalyticTableExportHelper.createAnalyticsTableExportHelper=function(t){var i=new e.SacAnalyticTableExportHelper;i.initializeRH(t);return i};e.SacAnalyticTableExportHelper.prototype.getAnalyticTable=function(){return this.getTableObject()};e.SacAnalyticTableExportHelper.prototype.renderRow=function(t,i,r,n,a){var s=i;var o=e.SacTableExportHelper.prototype.renderRow.call(this,t,i,r,n,a);o.putInteger(e.SacTableConstants.N_TUPLE_INDEX,s.getTupleIndex());o.putInteger(e.SacTableConstants.RCS_N_INDEX,s.getDimensionIndex());o.putString(e.SacTableConstants.C_SN_FIELD,s.getFieldName());return o};e.SacAnalyticTableExportHelper.prototype.preFormatCellChart=function(t,i,r,n){var a=e.SacTableExportHelper.prototype.preFormatCellChart.call(this,t,i,r,n);this.postFormatCellChart(a,t.getParentRow(),t.getParentColumn());return a};e.SacAnalyticTableExportHelper.prototype.renderColumn=function(t,i){var r=t;i.putInteger(e.SacTableConstants.RCS_N_INDEX,r.getDimensionIndex());i.putInteger(e.SacTableConstants.N_TUPLE_INDEX,r.getTupleIndex());i.putString(e.SacTableConstants.C_SN_FIELD,r.getFieldName())};e.SacAnalyticTableExportHelper.prototype.renderCell=function(t,i,r,n){var a=i;if(this.getTableObject().isMergeRepetitiveHeaderCells()){if(a.getRepetitiveColumns()>0){a.setMergedColumns(a.getRepetitiveColumns())}if(a.getRepetitiveRows()>0){a.setMergedRows(a.getRepetitiveRows())}}else{if(a.getMergedColumns()>0){a.setMergedColumns(0)}if(a.getMergedRows()>0){a.setMergedRows(0)}}var s=e.SacTableExportHelper.prototype.renderCell.call(this,t,i,r,n);var o=a.getParentColumn();var l=a.getParentRow();s.putInteger(e.SacTableConstants.N_TUPLE_INDEX,o.getTupleIndex());if(a.isLastHeaderRow()&&!this.getAnalyticTable().isEmptyRowDimensions()){s.putInteger(e.SacTableConstants.RCS_N_INDEX,o.getDimensionIndex());if(o.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,o.getFieldName())}}else{s.putInteger(e.SacTableConstants.RCS_N_INDEX,l.getDimensionIndex());if(l.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,l.getFieldName())}}if(a.getSortDirection()!==null){var u=null;if(a.getSortDirection()===e.XSortDirection.DEFAULT_VALUE){u=""}else if(a.getSortDirection()===e.XSortDirection.ASCENDING){u=""}else if(a.getSortDirection()===e.XSortDirection.DESCENDING){u=""}var p=s.putNewList(e.SacTableConstants.C_L_CELL_ICONS_RIGHT).addNewStructure();p.putString(e.SacTableConstants.CI_S_CLASS_NAME,e.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);var g=p.putNewStructure(e.SacTableConstants.CI_M_DATA_ATTRIBUTES);g.putString(e.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,u);var f=p.putNewStructure(e.SacTableConstants.CI_M_STYLE);f.putString(e.SacTableConstants.CIS_S_FONT_FAMILY,e.SacTableConstants.CIS_SV_SAP_ICONS);f.putInteger(e.SacTableConstants.CIS_N_MARGIN_LEFT,e.SacTableConstants.CIS_NV_MARGIN_RIGHT);p.putBoolean(e.SacTableConstants.CI_B_ICON_AFTER,true)}return s};e.SacAnalyticTableExportHelper.prototype.postFormatCellChart=function(t,i,r){var n=this.getAnalyticTable();if(e.XStringUtils.isNotNullAndNotEmpty(n.getDimensionToColorate())&&e.XCollectionUtils.hasElements(n.getDimensionColorPalette())){var a=n.getDimensionColorPalette().size();var s;var o;var l;var u;var p;var g;if(n.getRowDimensionMemberIndex().containsKey(n.getDimensionToColorate())){s=n.getRowDimensionMemberIndex().getByKey(n.getDimensionToColorate());o=s.getKeysAsReadOnlyListOfString();u=o.size();for(l=0;l<u;l++){p=n.getDimensionColorPalette().get(e.XMath.mod(l,a));g=s.getByKey(o.get(l));if(g.contains(e.XIntegerValue.create(i.getTupleIndex()))){t.putString(e.SacTableConstants.CC_S_BAR_COLOR,p);break}}}else if(n.getColumnDimensionMemberIndex().containsKey(n.getDimensionToColorate())){s=n.getColumnDimensionMemberIndex().getByKey(n.getDimensionToColorate());o=s.getKeysAsReadOnlyListOfString();u=o.size();for(l=0;l<u;l++){p=n.getDimensionColorPalette().get(e.XMath.mod(l,a));g=s.getByKey(o.get(l));if(g.contains(e.XIntegerValue.create(r.getTupleIndex()))){t.putString(e.SacTableConstants.CC_S_BAR_COLOR,p);break}}}}};e.SacAnalyticTableExportHelper.prototype.renderGenericSettings=function(t,i,r,n){var a=this.getAnalyticTable().getQueryModel();if(e.notNull(a)){t.putString(e.SacTableConstants.S_QUERY_NAME,a.getName());t.putString(e.SacTableConstants.S_QUERY_TEXT,a.getText());var s=a.getInfoProvider();if(e.notNull(s)){t.putString(e.SacTableConstants.S_INFO_PROVIDER_NAME,s.getName())}var o=t.putNewStructure(e.SacTableConstants.M_FILTER_INFO);var l=a.getFilter().getDynamicFilter();this.addFilterInfo(o,e.SacTableConstants.M_FILTER_INFO_QM,l);var u=a.getFilter().getLinkedFilters();if(e.XCollectionUtils.hasElements(u)){var p=u.getKeysAsIteratorOfString();var g=o.putNewStructure(e.SacTableConstants.M_FILTER_INFO_LINKED);while(p.hasNext()){var f=p.next();var c=u.getByKey(f);this.addFilterInfo(g,f,c)}}if(e.XCollectionUtils.hasElements(a.getConditionManager())){var C=a.getConditionManager().serializeToElement(e.QModelFormat.INA_REPOSITORY_DATA);this.clearIds(C);t.put(e.SacTableConstants.M_CONDITIONS_INFO,C)}if(e.XCollectionUtils.hasElements(a.getVariables())){var _=a.getVariableContainer().serializeToElement(e.QModelFormat.INA_REPOSITORY_DATA);this.clearIds(_);t.put(e.SacTableConstants.M_VARIABLE_INFO,_)}}return e.SacTableExportHelper.prototype.renderGenericSettings.call(this,t,i,r,n)};e.SacAnalyticTableExportHelper.prototype.addFilterInfo=function(t,i,r){var n=r.serializeToElement(e.QModelFormat.INA_REPOSITORY_DATA);this.clearIds(n);t.put(i,n)};e.SacAnalyticTableExportHelper.prototype.clearIds=function(t){if(e.notNull(t)){if(t.isStructure()){var i=t.asStructure();i.remove("Id");i.remove("System");var r=i.getKeysAsIteratorOfString();while(r.hasNext()){this.clearIds(i.getByKey(r.next()))}}else if(t.isList()){var n=t.asList();var a=n.getIterator();while(a.hasNext()){this.clearIds(a.next())}}}};e.SacAnalyticTableWidgetRenderHelper=function(){};e.SacAnalyticTableWidgetRenderHelper.prototype=new e.SacTableWidgetRenderHelper;e.SacAnalyticTableWidgetRenderHelper.prototype._ff_c="SacAnalyticTableWidgetRenderHelper";e.SacAnalyticTableWidgetRenderHelper.createAnalyticTableRenderHelper=function(t){var i=new e.SacAnalyticTableWidgetRenderHelper;i.initializeRH(t);return i};e.SacAnalyticTableWidgetRenderHelper.prototype.getAnalyticTable=function(){return this.getTableObject()};e.SacAnalyticTableWidgetRenderHelper.prototype.renderRow=function(t,i,r){var n=i;var a=e.SacTableWidgetRenderHelper.prototype.renderRow.call(this,t,i,r);a.putInteger(e.SacTableConstants.N_TUPLE_INDEX,n.getTupleIndex());a.putInteger(e.SacTableConstants.RCS_N_INDEX,n.getDimensionIndex());a.putString(e.SacTableConstants.C_SN_FIELD,n.getFieldName());return a};e.SacAnalyticTableWidgetRenderHelper.prototype.preFormatCellChart=function(t,i,r,n){var a=e.SacTableWidgetRenderHelper.prototype.preFormatCellChart.call(this,t,i,r,n);this.postFormatCellChart(a,t.getParentRow(),t.getParentColumn());return a};e.SacAnalyticTableWidgetRenderHelper.prototype.renderColumn=function(t,i){if(e.notNull(t)){var r=t;i.putInteger(e.SacTableConstants.RCS_N_INDEX,r.getDimensionIndex());i.putInteger(e.SacTableConstants.N_TUPLE_INDEX,r.getTupleIndex());i.putString(e.SacTableConstants.C_SN_FIELD,r.getFieldName())}};e.SacAnalyticTableWidgetRenderHelper.prototype.renderCell=function(t,i,r,n){var a=i;if(this.getTableObject().isMergeRepetitiveHeaderCells()){if(a.getRepetitiveColumns()>0){a.setMergedColumns(a.getRepetitiveColumns())}if(a.getRepetitiveRows()>0){a.setMergedRows(a.getRepetitiveRows())}}else{if(a.getMergedColumns()>0){a.setMergedColumns(0)}if(a.getMergedRows()>0){a.setMergedRows(0)}}var s=e.SacTableWidgetRenderHelper.prototype.renderCell.call(this,t,i,r,n);var o=a.getParentColumn();var l=a.getParentRow();s.putInteger(e.SacTableConstants.N_TUPLE_INDEX,o.getTupleIndex());if(a.isLastHeaderRow()&&!this.getAnalyticTable().isEmptyRowDimensions()){s.putInteger(e.SacTableConstants.RCS_N_INDEX,o.getDimensionIndex());if(o.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,o.getFieldName())}}else{s.putInteger(e.SacTableConstants.RCS_N_INDEX,l.getDimensionIndex());if(l.getFieldName()!==null){s.putString(e.SacTableConstants.C_SN_FIELD,l.getFieldName())}}if(a.getSortDirection()!==null){var u=null;if(a.getSortDirection()===e.XSortDirection.DEFAULT_VALUE){u=""}else if(a.getSortDirection()===e.XSortDirection.ASCENDING){u=""}else if(a.getSortDirection()===e.XSortDirection.DESCENDING){u=""}var p=s.putNewList(e.SacTableConstants.C_L_CELL_ICONS_RIGHT).addNewStructure();p.putString(e.SacTableConstants.CI_S_CLASS_NAME,e.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);var g=p.putNewStructure(e.SacTableConstants.CI_M_DATA_ATTRIBUTES);g.putString(e.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,u);var f=p.putNewStructure(e.SacTableConstants.CI_M_STYLE);f.putString(e.SacTableConstants.CIS_S_FONT_FAMILY,e.SacTableConstants.CIS_SV_SAP_ICONS);f.putInteger(e.SacTableConstants.CIS_N_MARGIN_LEFT,e.SacTableConstants.CIS_NV_MARGIN_RIGHT);var c=a.getType();if(c===e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER||c===e.SacTableConstants.CT_COL_DIM_HEADER||c===e.SacTableConstants.CT_ROW_DIM_MEMBER||c===e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER){f.putString(e.SacTableConstants.CIS_S_ROTATE,e.SacTableConstants.CIS_SV_ROTATE)}p.putBoolean(e.SacTableConstants.CI_B_ICON_AFTER,true)}return s};e.SacAnalyticTableWidgetRenderHelper.prototype.postFormatCellChart=function(t,i,r){var n=this.getAnalyticTable();if(e.XStringUtils.isNotNullAndNotEmpty(n.getDimensionToColorate())&&e.XCollectionUtils.hasElements(n.getDimensionColorPalette())){var a=n.getDimensionColorPalette().size();var s;var o;var l;var u;var p;var g;if(n.getRowDimensionMemberIndex().containsKey(n.getDimensionToColorate())){s=n.getRowDimensionMemberIndex().getByKey(n.getDimensionToColorate());o=s.getKeysAsReadOnlyListOfString();u=o.size();for(l=0;l<u;l++){p=n.getDimensionColorPalette().get(e.XMath.mod(l,a));g=s.getByKey(o.get(l));if(g.contains(e.XIntegerValue.create(i.getTupleIndex()))){t.putString(e.SacTableConstants.CC_S_BAR_COLOR,p);break}}}else if(n.getColumnDimensionMemberIndex().containsKey(n.getDimensionToColorate())){s=n.getColumnDimensionMemberIndex().getByKey(n.getDimensionToColorate());o=s.getKeysAsReadOnlyListOfString();u=o.size();for(l=0;l<u;l++){p=n.getDimensionColorPalette().get(e.XMath.mod(l,a));g=s.getByKey(o.get(l));if(g.contains(e.XIntegerValue.create(r.getTupleIndex()))){t.putString(e.SacTableConstants.CC_S_BAR_COLOR,p);break}}}}};e.SacAnalyticTableXlsRenderHelper=function(){};e.SacAnalyticTableXlsRenderHelper.prototype=new e.SacTableXlsRenderHelper;e.SacAnalyticTableXlsRenderHelper.prototype._ff_c="SacAnalyticTableXlsRenderHelper";e.ReferenceGrid=function(){};e.ReferenceGrid.prototype=new e.XObject;e.ReferenceGrid.prototype._ff_c="ReferenceGrid";e.ReferenceGrid.MAGIC_CELL_DIV="/";e.ReferenceGrid.create=function(t){var i=new e.ReferenceGrid;i.setupSimpleGrid(t,false,false);return i};e.ReferenceGrid.createWithDetails=function(t){var i=new e.ReferenceGrid;i.setupSimpleGrid(t,true,false);return i};e.ReferenceGrid.createWithName=function(t,i){var r=new e.ReferenceGrid;r.setupSimpleGrid(i,false,false);return r};e.ReferenceGrid.createWithNameAndDetails=function(t,i){var r=new e.ReferenceGrid;r.setupSimpleGrid(i,true,false);return r};e.ReferenceGrid.createForVizGrid=function(t){var i=new e.ReferenceGrid;i.setupSimpleGrid(t,false,true);return i};e.ReferenceGrid.prototype.m_resultSet=null;e.ReferenceGrid.prototype.m_withDetails=false;e.ReferenceGrid.prototype.m_defineAllCells=false;e.ReferenceGrid.prototype.m_renderForFireflyGrid=false;e.ReferenceGrid.prototype.m_fixedHeightOff=0;e.ReferenceGrid.prototype.m_fixedWidthOff=0;e.ReferenceGrid.prototype.m_offsetRows=0;e.ReferenceGrid.prototype.m_offsetColumns=0;e.ReferenceGrid.prototype.m_grid=null;e.ReferenceGrid.prototype.setupSimpleGrid=function(t,i,r){this.setup();this.m_withDetails=i;this.m_defineAllCells=r;this.m_resultSet=t;this.m_grid=e.XReferenceGrid.create()};e.ReferenceGrid.prototype.releaseObject=function(){this.m_resultSet=null;e.XObject.prototype.releaseObject.call(this)};e.ReferenceGrid.prototype.prepareCellStructure=function(t,i){if(this.m_grid.hasCells()===false&&e.notNull(this.m_resultSet)){this.prepareStructure(t,i)}};e.ReferenceGrid.prototype.prepareStructure=function(t,i){var r=this.m_resultSet.getColumnsAxis();var n=e.XMath.max(r.getDataCount(),r.getTuplesCount());var a=this.m_resultSet.getRowsAxis();if(i){this.m_grid.setFixedHeight(e.XMath.max(this.getEffectiveFieldSize(r),this.m_renderForFireflyGrid&&this.getEffectiveFieldSize(a)===0?0:1))}else{this.m_grid.setFixedHeight(0)}var s=a.getDataCount();var o=a.getTuplesCount();var l=e.XMath.max(s,o);if(t){this.m_grid.setFixedWidth(e.XMath.max(this.getEffectiveFieldSize(a),1))}else{this.m_grid.setFixedWidth(0)}var u=this.m_grid.getFixedWidth()+n;var p=this.m_grid.getFixedHeight()+l;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_grid.setFullSize(u,p);for(var g=0;g<u;g++){this.m_grid.addColumnsDef(e.XReferenceGridLine.create())}for(var f=0;f<p;f++){this.m_grid.addRowsDef(e.XReferenceGridLine.create())}if(t&&i){this.setTitleCells(a,e.XMath.max(this.getFixedHeight()-1,0),r.getRsDimensions().isEmpty());this.setTitleCells(r,e.XMath.max(this.getFixedWidth()-1,0),a.getRsDimensions().isEmpty())}if(t){var c=this.m_grid.getFixedHeight()-this.m_fixedHeightOff;this.setHeaderCells(a,c)}if(i){var C=this.m_grid.getFixedWidth()-this.m_fixedWidthOff;this.setHeaderCells(r,C)}this.setDataCells()};e.ReferenceGrid.prototype.getEffectiveFieldSize=function(e){var t=0;var i=e.getRsDimensions();var r=i.size();for(var n=0;n<r;n++){t=t+i.get(n).getResultSetFields().size()}return t};e.ReferenceGrid.prototype.setTitleCells=function(t,i,r){var n=t.getType();var a=t.getRsDimensions();var s=0;var o=e.XStringBuffer.create();var l=e.XStringBuffer.create();var u=a.size();for(var p=0;p<u;p++){var g=a.get(p);var f=g.getResultSetFields();var c=f.size();for(var C=0;C<c;C++){var _=f.get(C).getName();if(e.XStringUtils.isNullOrEmpty(g.getName())){o.append("[").append(_).append("]")}else{if(C===0){l.append(g.getText())}if(g.isMeasureStructure()){if(C===0){o.append("Measures")}}else if(g.isStructure()){if(C===0){o.append("Structure")}}else{if(C===0){o.append(g.getName()).append(".[")}else{o.append("[")}o.append(_).append("]")}}if(n===e.AxisType.ROWS){if(!(this.m_renderForFireflyGrid&&g.isStructure()&&u===p+1)){var m=e.XReferenceGridCell.create(o.toString(),e.RgCellType.TITLE);m.setDisplayValue(l.toString());m.setDimension(g.getName());m.setPart("Rows");m.setRow(i);m.setColumn(s);this.m_grid.setCell(s,i,m,false)}else if(r&&!this.m_renderForFireflyGrid){this.m_fixedHeightOff=1}}else{if(!(this.m_renderForFireflyGrid&&g.isStructure()&&u===p+1)){var S=this.m_grid.getSimpleCell(i,s);if(e.notNull(S)){var d=o.toString();o.clear();l.clear();o.append(S.toString());o.append(e.ReferenceGrid.MAGIC_CELL_DIV);o.append(d);if(this.m_renderForFireflyGrid){l.append(S.getDisplayValue())}if(C===0&&!g.isStructure()){l.append(e.ReferenceGrid.MAGIC_CELL_DIV);l.append(g.getText())}}var T=e.XReferenceGridCell.create(o.toString(),e.RgCellType.TITLE);if(this.m_renderForFireflyGrid){T.setRow(i);T.setColumn(s);T.setDisplayValue(l.toString());if(e.notNull(S)){T.setPart("Mixed")}else{T.setPart("Columns")}if(e.notNull(S)){T.setDimension(S.getDimension())}else{T.setDimension(g.getName())}}else{T.setDimension(g.getName())}this.m_grid.setCell(i,s,T,true)}else if(r){this.m_fixedWidthOff=1}}o.clear();l.clear();s++}}};e.ReferenceGrid.prototype.setDataCells=function(){var t=this.m_resultSet.getInputReadinessStates();var i=this.m_resultSet.getDataColumns();var r=this.m_resultSet.getDataRows();var n=e.XStringBuffer.create();for(var a=0;a<r;a++){for(var s=0;s<i;s++){var o=this.m_resultSet.getDataCell(s,a);var l;if(this.m_withDetails){l=e.XReferenceGridCell.create(this.getCellValueWithDetails(o,t),e.RgCellType.DATA)}else{l=e.XReferenceGridCell.create(this.getCellValue(this.formatDataCellValue(o),o),e.RgCellType.DATA)}if(this.m_renderForFireflyGrid){n.clear();this.appendPrefixValueSuffix(o.getCurrencyUnit(),o,n);l.setDisplayValue(n.toString());l.setPart("Data");l.setAlertLeve(o.getMaxAlertLevel().getName());l.setIsInputEnabled(o.isDataEntryEnabled());var u=o.getDataCell();if(e.notNull(u)){var p=o.getQueryModel().getDataSource().getName();n.clear();var g=u.getReferenceStructureElement1();if(e.notNull(g)){n.append("mem-");n.append(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());if(g.getFieldValue(g.getDimension().getDisplayKeyField())!==null){l.setMember(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString())}else{l.setMember(g.getName())}}g=u.getReferenceStructureElement2();if(e.notNull(g)){n.append("-mem-");n.append(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());if(g.getFieldValue(g.getDimension().getDisplayKeyField())!==null){l.setMember2(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString())}else{l.setMember(g.getName())}}var f=n.toString();var c=o.getValueException().isValidValue()&&o.getValueException()!==e.ValueException.NULL_VALUE?e.XNumberFormatter.formatDoubleToString(o.getDouble(),"0.####"):"";n.clear();l.setDataValueId(e.XStringUtils.concatenate5(p,"-",f,"-",c))}l.setRow(a+this.m_grid.getFixedHeight()-this.m_fixedHeightOff+this.m_offsetRows);l.setColumn(s+this.m_grid.getFixedWidth()-this.m_fixedWidthOff+this.m_offsetColumns)}this.m_grid.setCell(s+this.m_grid.getFixedWidth()-this.m_fixedWidthOff,a+this.m_grid.getFixedHeight()-this.m_fixedHeightOff,l,false)}}};e.ReferenceGrid.prototype.formatDataCellValue=function(e){return e.getFormattedValue()};e.ReferenceGrid.prototype.getCellValueWithDetails=function(t,i){var r=e.XStringBuffer.create();var n=t.getDataCell();if(e.notNull(n)){r.append("(DataCell->").append(n.getName()).append(")")}var a=t.getDecimalPlaces();if(a!==0){r.append("(Decimal Places=").appendInt(a).append(")")}if(t.isDataEntryEnabled()){r.append("I:")}if(t.isValueLocked()){r.append("L:")}var s=t.getCurrencyUnit();this.appendPrefixValueSuffix(s,t,r);this.appendValueException(t,r);this.appendAlertLevel(t,r);this.appendValueChanged(t,r);r.append("|").append(t.getValueType().getName());r.append("|").append(t.getFormatString());this.appendCurrencyUnit(s,r);this.appendInputReadiness(t,i,r);return r.toString()};e.ReferenceGrid.prototype.appendPrefixValueSuffix=function(t,i,r){if(e.notNull(t)&&t.hasPrefix()){r.append(t.getPrefix()).append(" ")}r.append(this.formatDataCellValue(i));if(e.notNull(t)&&t.hasSuffix()){r.append(" ").append(t.getSuffix())}};e.ReferenceGrid.prototype.appendValueException=function(t,i){var r=t.getValueException();if(r!==e.ValueException.NORMAL){i.append("|");if(e.isNull(r)){i.append("<null>")}else{i.append(r.getName())}}};e.ReferenceGrid.prototype.appendInputReadiness=function(t,i,r){var n=t.getQueryModel().getQueryManager();if(n.supportsInputReadinessStates()&&t.getQueryModel().isDataEntryEnabled()){var a=t.getInputReadinessState();if(e.notNull(a)){var s=i.get(a.getIndex());var o=s.getInputReadinessTypes();var l=e.XListOfString.create();for(var u=0;u<o.size();u++){l.add(o.get(u).getShortcut())}r.append("|S:").append(e.XCollectionUtils.join(l,","))}}};e.ReferenceGrid.prototype.appendAlertLevel=function(t,i){var r=t.getMaxAlertLevel();if(r!==e.AlertLevel.NORMAL){i.append("|[");i.append(e.isNull(r)?"<null>":r.getName());i.append("]")}};e.ReferenceGrid.prototype.appendValueChanged=function(t,i){if(t.isValueChanged()){i.append("|N:");var r=t.getXValue();if(e.isNull(r)){i.append("<null>")}else{i.append(r.getValueType().getName());if(r.getValueType()===e.XValueType.STRING){i.append(" ").append(r.getString())}}}if(t.isNewValueForced()){i.append("|F:")}};e.ReferenceGrid.prototype.appendCurrencyUnit=function(t,i){if(e.notNull(t)&&!t.isEmpty()){i.append("|");if(t.isMixed()){i.append("M:")}else if(t.hasUnit()){i.append("U:")}else if(t.hasCurrency()){i.append("C:")}if(t.hasFormatted()){i.append(t.getFormatted())}else{i.append("<null>")}}};e.ReferenceGrid.prototype.getCellValue=function(t,i){var r=i.getValueException();if(r===e.ValueException.NULL_VALUE||r===e.ValueException.UNDEFINED){return""}var n=null;if(r!==e.ValueException.NORMAL&&r!==e.ValueException.ZERO){n=r.getName()}var a=null;var s=i.getMaxAlertLevel();if(s!==e.AlertLevel.NORMAL){a=s.getName()}if(e.notNull(n)||e.notNull(a)){var o=e.XStringBuffer.create();o.append(t);if(e.notNull(a)){o.append(" [").append(a).append("]")}if(e.notNull(n)){o.append(" [").append(n).append("]")}return o.toString()}return t};e.ReferenceGrid.prototype.setHeaderCells=function(t,i){var r=t.getRsDimensions();var n=t.getType();var a=t.getTuplesCount();var s=e.XStringBuffer.create();var o=e.XStringBuffer.create();var l=e.XReferenceGridCell.create(null,e.RgCellType.HEADER);var u=e.XReferenceGridCell.create(null,e.RgCellType.HEADER);for(var p=0;p<a;p++){var g=t.getTupleAt(p);var f=0;var c=false;var C=g.size();for(var _=0;_<C;_++){var m=r.get(_);var S=g.get(_);var d=m.getResultSetFields();var T=d.size();if(S.getFirstTuple()===g||this.m_renderForFireflyGrid===true){var y=S.getDimensionMember();s.clear();var h=y.getMemberType();if(h.isResult()){this.enableTotals(n,p+i);if(T>0){var D=0;if(!c){if(h===e.MemberType.CONDITION_RESULT){s.append("[Totals Included]");o.append("[Totals Included]")}else if(h===e.MemberType.CONDITION_OTHERS_RESULT){s.append("[Totals Remaining]");o.append("[Totals Remaining]")}else{s.append("[Totals]");o.append("[Totals]")}this.appendAlertLevelToValue(S,s);var R=e.XReferenceGridCell.create(s.toString(),e.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(S.getFirstTuple()===g){R.setDisplayValue(o.toString())}R.setDimension(m.getName());if(m.isStructure()&&y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField())!==null){R.setMember(y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField()).getString())}else{R.setMember(y.getName())}if(t===this.m_resultSet.getRowsAxis()){R.setPart("Rows");R.setRowTupleIndex(p)}else{R.setPart("Columns");R.setColumnTupleIndex(p)}}this.addCell(n,f,p,i,R);s.clear();o.clear();D=1}if(this.m_defineAllCells){f=f+D;for(var A=D;A<T;A++){this.addCell(n,f,p,i,u);f++}}else{f=f+T}}c=true}else{for(var V=0;V<T;V++){var E=y.getAllFieldValues().getByKey(d.get(V).getName());s.append(this.formatFieldValue(E));o.append(this.formatFieldValue(E));if(V===0){this.prependToFirstField(S,s);this.appendAlertLevelToValue(S,s)}var v=e.XReferenceGridCell.create(s.toString(),e.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(n===e.AxisType.ROWS){v.setPart("Rows")}else{v.setPart("Columns")}if(S.getFirstTuple()===g){v.setDisplayValue(o.toString())}v.setDimension(m.getName());if(m.isStructure()&&y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField())!==null){v.setMember(y.getDimension().getStructureMember(y.getName()).getFieldValue(y.getDimension().getDisplayKeyField()).getString())}else{v.setMember(y.getName())}if(t===this.m_resultSet.getRowsAxis()){v.setRowTupleIndex(p)}else{v.setColumnTupleIndex(p)}}if(V===0&&S.getFirstTuple()===g){v.setDisplayLevel(S.getDisplayLevel());var N=S.getDrillState();var z="";if(N===e.DrillState.EXPANDED||N===e.DrillState.DRILLED){v.setDrillState("Expanded");if(m.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(n===e.AxisType.ROWS){z="sap-icon://slim-arrow-up"}else{z="sap-icon://slim-arrow-left"}}else{if(n===e.AxisType.ROWS){z="sap-icon://slim-arrow-down"}else{z="sap-icon://slim-arrow-down"}}}else if(N===e.DrillState.COLLAPSED||N===e.DrillState.LEAF_UDH_EXPAND_ALLOWED){v.setDrillState("Collapsed");if(m.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT){if(n===e.AxisType.ROWS){z="sap-icon://slim-arrow-right"}else{z="sap-icon://slim-arrow-up"}}else{if(n===e.AxisType.ROWS){z="sap-icon://slim-arrow-right"}else{z="sap-icon://slim-arrow-right"}}}else{v.setDrillState("None");z=""}v.setIcon(z)}s.clear();o.clear();this.addCell(n,f,p,i,v);f++}}}else{if(this.m_defineAllCells){for(var L=0;L<T;L++){this.addCell(n,f,p,i,l);f++}}else{f=f+T}}}}};e.ReferenceGrid.prototype.formatFieldValue=function(t){if(e.isNull(t)){return"[null]"}else{if(t.getValueType()===e.XValueType.DOUBLE){var i=t.getDouble();return e.XNumberFormatter.formatDoubleToString(i,"#.0000")}else{return t.getFormattedValue()}}};e.ReferenceGrid.prototype.appendAlertLevelToValue=function(t,i){if(e.XStringUtils.isNotNullAndNotEmpty(t.getExceptionName())){i.append(" [").appendInt(t.getAlertLevel()).append("]")}};e.ReferenceGrid.prototype.prependToFirstField=function(t,i){var r=t.getDisplayLevel();var n=t.getDrillState();if(r>0||n!==e.DrillState.LEAF){var a=i.toString();i.clear();for(var s=0;s<r;s++){i.append("  ")}if(n===e.DrillState.COLLAPSED||n===e.DrillState.LEAF_DRILLDOWN_ALLOWED||n===e.DrillState.LEAF_UDH_EXPAND_ALLOWED||n===e.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){i.append("+ ")}else if(n===e.DrillState.EXPANDED||n===e.DrillState.DRILLED||n===e.DrillState.LEAF_UDH){i.append("- ")}i.append(a)}};e.ReferenceGrid.prototype.addCell=function(t,i,r,n,a){if(t===e.AxisType.ROWS){a.setRow(r+n+this.m_offsetRows);a.setColumn(i+this.m_offsetColumns);this.m_grid.setCell(i,r+n,a,false)}else{a.setRow(i);a.setColumn(r+n);this.m_grid.setCell(r+n,i,a,false)}};e.ReferenceGrid.prototype.enableTotals=function(t,i){var r;if(t===e.AxisType.ROWS){r=this.m_grid.getRowsDef(i)}else{r=this.m_grid.getColumnDef(i)}if(e.notNull(r)){r.setHasTotals(true)}};e.ReferenceGrid.prototype.exportForProtocol=function(t){if(t.isTypeOf(e.ProtocolBindingType.FIREFLY_GRID)){return this.exportToFireflyGrid()}return this.exportToVizGrid()};e.ReferenceGrid.prototype.exportToVizGrid=function(){this.prepareCellStructure(true,true);var t=this.m_grid.getColumnCount();var i=this.m_grid.getRowCount();var r=e.PrFactory.createStructure();r.putString("Type","Grid");r.putInteger("RowCount",i);r.putInteger("ColCount",t);var n=r.putNewList("Cells");for(var a=0;a<i;a++){for(var s=0;s<t;s++){var o=n.addNewStructure();var l=this.m_grid.getSimpleCell(s,a);if(e.notNull(l)){o.putString("Type","Text");o.putString("Value",l.getText(50));if(!l.isLeftAligned()){o.putString("HAlign","End")}if(l.isTotals()){o.putBoolean("Totals",true)}var u=l.getCellType();if(u===e.RgCellType.HEADER){o.putString("Semantic","Header")}else if(u===e.RgCellType.TITLE){o.putString("Semantic","Title")}}else{o.putString("Type","Empty")}}}return r};e.ReferenceGrid.prototype.exportToFireflyGrid=function(){this.m_renderForFireflyGrid=true;this.prepareCellStructure(true,true);var t=this.m_grid.getColumnCount();var i=this.m_grid.getRowCount();var r=this.m_grid.getFixedRowsCount();var n=this.m_grid.getFixedColumnsCount();var a=e.PrFactory.createStructure();a.putString("Type","Grid");a.putString("ApplicationName",this.m_resultSet.getApplication().getApplicationName());a.putInteger("RowCount",i);a.putInteger("ColCount",t);a.putInteger("FixedRows",r);a.putInteger("FixedColumns",n);var s=a.putNewList("Cells");for(var o=0;o<i;o++){for(var l=0;l<t;l++){var u=this.m_grid.getSimpleCell(l,o);if(e.notNull(u)){var p=s.addNewStructure();p.putString("GridPart",u.getPart());p.putString("Type","Text");p.putString("DisplayValue",u.getDisplayValue());p.putString("Value",u.getText(-1));p.putInteger("Row",u.getRow());p.putInteger("Column",u.getColumn());p.putString("DrillState",u.getDrillState());p.putString("DataValueId",u.getDataValueId());p.putInteger("DisplayLevel",u.getDisplayLevel());p.putInteger("RowTupleIndex",u.getRowTupleIndex());p.putInteger("ColumnTupleIndex",u.getColumnTupleIndex());p.putString("Icon",u.getIcon());p.putString("AlertLevel",u.getAlertLevel());p.putBoolean("Input",u.isInputEnabled());if(u.isTotals()){p.putBoolean("Totals",true)}var g=u.getCellType();if(g===e.RgCellType.HEADER){p.putString("Semantic","Header");p.putString("Dimension",u.getDimension());p.putString("Member",u.getMember())}else if(g===e.RgCellType.TITLE){p.putString("Semantic","Title");p.putString("Dimension",u.getDimension())}else if(g===e.RgCellType.DATA){p.putInteger("DataRow",o-r);p.putInteger("DataColumn",l-n);p.putString("Member",u.getMember());p.putString("Member2",u.getMember2());p.putString("Semantic",u.isTotals()?"Result":"Standard")}else{p.putString("Semantic","Empty");p.putString("GridPart","Empty")}}}}this.m_renderForFireflyGrid=false;return a};e.ReferenceGrid.prototype.getRowCount=function(){return this.m_grid.getRowCount()};e.ReferenceGrid.prototype.getColumnCount=function(){return this.m_grid.getColumnCount()};e.ReferenceGrid.prototype.getFixedRowsCount=function(){return this.m_grid.getFixedRowsCount()};e.ReferenceGrid.prototype.getFixedColumnsCount=function(){return this.m_grid.getFixedColumnsCount()};e.ReferenceGrid.prototype.getColumnMaxCharacters=function(e,t,i){return this.m_grid.getColumnMaxCharacters(e,t,i)};e.ReferenceGrid.prototype.addRowsDef=function(e){this.m_grid.addRowsDef(e)};e.ReferenceGrid.prototype.getRowsDef=function(e){return this.m_grid.getRowsDef(e)};e.ReferenceGrid.prototype.addColumnsDef=function(e){this.m_grid.addColumnsDef(e)};e.ReferenceGrid.prototype.getColumnDef=function(e){return this.m_grid.getColumnDef(e)};e.ReferenceGrid.prototype.getSimpleCell=function(e,t){return this.m_grid.getSimpleCell(e,t)};e.ReferenceGrid.prototype.setCell=function(e,t,i,r){this.m_grid.setCell(e,t,i,r)};e.ReferenceGrid.prototype.exportToAscii=function(e){return this.exportToAsciiExt(e,true,true,0,-1,0,-1)};e.ReferenceGrid.prototype.exportBodyColumns=function(e,t,i,r){return this.exportToAsciiExt(e,false,t,0,-1,i,r)};e.ReferenceGrid.prototype.exportBodyRows=function(e,t,i,r){return this.exportToAsciiExt(e,t,false,i,r,0,-1)};e.ReferenceGrid.prototype.exportToAsciiExt=function(e,t,i,r,n,a,s){this.prepareCellStructure(t,i);return this.m_grid.exportToAsciiExt(e,t,i,r,n,a,s)};e.ReferenceGrid.prototype.exportToFingerprint=function(){this.m_grid.setFingerprintMode();this.prepareCellStructure(true,true);return this.m_grid.getFingerprint()};e.ReferenceGrid.prototype.getFixedHeight=function(){return this.m_grid.getFixedHeight()};e.ReferenceGrid.prototype.setFixedHeight=function(e){this.m_grid.setFixedHeight(e)};e.ReferenceGrid.prototype.getFixedWidth=function(){return this.m_grid.getFixedWidth()};e.ReferenceGrid.prototype.setFixedWidth=function(e){this.m_grid.setFixedWidth(e)};e.ReferenceGrid.prototype.setFullSize=function(e,t){this.m_grid.setFullSize(e,t)};e.ReferenceGrid.prototype.hasCells=function(){return this.m_grid.hasCells()};e.ReferenceGrid.prototype.getFingerprint=e.noSupport;e.ReferenceGrid.prototype.setFingerprintMode=e.noSupport;e.RsHiChartBoxplotHelper=function(){};e.RsHiChartBoxplotHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartBoxplotHelper.prototype._ff_c="RsHiChartBoxplotHelper";e.RsHiChartBoxplotHelper.prototype.prepareRendering=function(){};e.RsHiChartBoxplotHelper.prototype.readResultSetData=function(t,i,r){var n=this.getChartData();var a=n.putNewList(e.VizDefConstants.K_X_AXIS);var s=a.addNewStructure();var o=n.putNewStructure(e.VizDefConstants.K_LANG);var l=e.XInteger.convertToString(t.getDecimalPlaces(e.VizDefConstants.K_VALUE_AXIS));if(r.getAvailableDataCellCount()>0){var u=n.putNewList(e.VizDefConstants.K_SERIES);var p=e.XStringBuffer.create();p.append("<b>{series.name}</b><br/><b>Distribution</b> <br/>");p.append("Maximum: {point.high:,.");p.append(l);p.append("f} <br/>Upper Quartile: {point.q3:,.");p.append(l);p.append("f} <br/>Median: {point.median:,.");p.append(l);p.append("f} <br/>Lower Quartile: {point.q1:,.");p.append(l);p.append("f} <br/>Minimum: {point.low:,.");p.append(l);p.append("f}");var g=s.putNewList(e.VizDefConstants.K_CATEGORIES);var f=i.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_CATEGORY_AXIS);var c=e.XListOfString.create();c.add(e.VizDefConstants.K_VALUE_AXIS);c.add(e.VizDefConstants.K_VALUE_AXIS2);c.add(e.VizDefConstants.K_VARIANCE);for(var C=0;C<f.size();C++){g.addString(f.get(C))}var _=t.getPrettyNamesForFeeds(true,false,c).size();var m=t.getIndicesByFeedOrder(c);var S=e.VizDefConstants.V_FEED_COLOR;c.add(e.VizDefConstants.K_COLOR);var d=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_COLOR);var T=d.size()<2;if(t.hasTupleForFeed(e.VizDefConstants.V_FEED_DATA_CONTEXT)&&t.getPrettyNamesForFeed(true,false,e.VizDefConstants.V_FEED_DATA_CONTEXT).size()>1){S=e.VizDefConstants.V_FEED_DATA_CONTEXT;_=t.getPrettyNamesForFeeds(true,false,c).size()}var y=e.XList.create();var h=-1;for(var D=0;D<m.size();D++){var R=m.get(D);if(y.contains(R)){continue}h=h+1;var A=R.getInteger();var V=t.getTupleAt(A);var E=V.getMemberKeysForFeedsOtherThan(S);var v=t.getTupleIndexForMemberNames(E);y.addAll(v);this.setShowLegend(_>1);var N=V.getPrettyText(c);var z=u.addNewStructure();var L=z.putNewList(e.VizDefConstants.K_DATA);var I=z.putNewStructure(e.VizDefConstants.K_TOOLTIP);I.putString(e.VizDefConstants.K_POINT_FORMAT,p.toString());I.putString(e.VizDefConstants.K_HEADER_FORMAT,"");z.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);z.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.V_CHART_TYPE_BOXPLOT);z.putString(e.VizDefConstants.K_NAME,N);var K=u.addNewStructure();K.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_SCATTER);K.putString(e.VizDefConstants.K_NAME,N);K.putString("linkedTo",":previous");var O=K.putNewStructure(e.VizDefConstants.K_MARKER);O.putString(e.VizDefConstants.K_FILL_COLOR,e.VizDefConstants.K_TRANSPARENT);O.putInteger(e.VizDefConstants.K_LINE_WIDTH,1);var F=K.putNewList(e.VizDefConstants.K_DATA);var b=K.putNewStructure(e.VizDefConstants.K_TOOLTIP);b.putString(e.VizDefConstants.K_POINT_FORMAT,e.XStringUtils.concatenate3("<b>{series.name}</b><br/><b>Outliers</b><br/><br/> {point.categoryName}: {point.y:,.",l,"f}"));b.putString(e.VizDefConstants.K_HEADER_FORMAT,"");if(T){this.addColorAndPattern(V.getColor(),V.getPattern(),z,e.VizDefConstants.V_CHART_TYPE_BOXPLOT,false);this.addColorAndPattern(V.getColor(),V.getPattern(),K,e.VizDefConstants.K_SCATTER,true);O.putString(e.VizDefConstants.K_LINE_COLOR,this.getCurrentColor())}else{O.putString(e.VizDefConstants.K_LINE_COLOR,this.getColorAt(0))}for(var H=0;H<i.getTuplesCount();H++){if(!i.getTupleAt(H).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(i.getTupleAt(H).isTotal()){continue}var w=e.XList.create();for(var X=0;X<v.size();X++){var B=v.get(X).getInteger();var M=t.getTupleAt(A);if(!M.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){continue}var x=r.getDataCell(B,H);var P=0;var U=x.getValueType();if(U===e.XValueType.DOUBLE||U===e.XValueType.DECIMAL_FLOAT){if(x.getXValue()!==null){P=t.getScaledValue(e.VizDefConstants.K_VALUE_AXIS,M,x);w.add(e.XDoubleValue.create(P))}}}if(w.size()===0){continue}w.sortByComparator(e.XComparatorDouble.create());var G=L.addNewStructure();var Y=0;var W=0;var q=0;var k=0;var Z=0;var j=0;var Q=0;var J=w.size()-1;var $=J/4;var ee=J/2;var te=J*3/4;Y=w.get(e.XDouble.convertToInt($)).getDouble();k=w.get(e.XDouble.convertToInt(ee)).getDouble();W=w.get(e.XDouble.convertToInt(te)).getDouble();q=(W-Y)*1.5;Q=w.get(0).getDouble();j=w.get(w.size()-1).getDouble();for(var ie=0;ie<w.size();ie++){Z=w.get(ie).getDouble();if(W+q<Z||Y-q>Z){var re=F.addNewStructure();re.putDouble(e.VizDefConstants.K_X,H-.25+(.5+h)/_/2);re.putDouble(e.VizDefConstants.K_Y,Z);re.putString(e.VizDefConstants.K_CATEGORY_NAME,f.get(H));if(T){this.addColorAndPattern(V.getColor(),V.getPattern(),re,e.VizDefConstants.K_SCATTER,true)}}else{if(Z<j){j=Z}if(Z>Q){Q=Z}}}G.putDouble("low",j);G.putDouble("q1",Y);G.putDouble("median",k);G.putDouble("q3",W);G.putDouble("high",Q);if(T){this.addColorAndPattern(V.getColor(),V.getPattern(),G,e.VizDefConstants.K_SCATTER,true)}}}}else{n.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);o.putString(e.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.")}};e.RsHiChartBoxplotHelper.prototype.finishRendering=function(){};e.RsHiChartCategorialSeriesHelper=function(){};e.RsHiChartCategorialSeriesHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartCategorialSeriesHelper.prototype._ff_c="RsHiChartCategorialSeriesHelper";e.RsHiChartCategorialSeriesHelper.prototype.prepareRendering=function(){};e.RsHiChartCategorialSeriesHelper.prototype.readResultSetData=function(t,i,r){var n=this.getChartData();var a;var s;var o;var l;var u=null;var p=false;var g=true;var f=n.putNewList(e.VizDefConstants.K_X_AXIS);var c=f.addNewStructure();var C=n.putNewStructure(e.VizDefConstants.K_LANG);var _=n.putNewList(e.VizDefConstants.K_SERIES);var m=n.getStructureByKey(e.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);if(e.notNull(m)){n.getListByKey(e.VizDefConstants.K_COLORS).clear()}var S=e.XStringBuffer.create();S.append("<b>{series.name}</b> / ");S.append("{point.category}<br/><b>{point.name}</b>  {point.yFormatted}<br/>");if(r.getAvailableDataCellCount()>0){var d=true;var T=i.getFormattedNamesForFeed(true,!g,e.VizDefConstants.K_CATEGORY_AXIS);if(T.size()===0){T=i.getFormattedNames(true,!g);d=false}var y=e.XListOfString.create();y.add(e.VizDefConstants.K_VALUE_AXIS);y.add(e.VizDefConstants.K_VALUE_AXIS2);y.add(e.VizDefConstants.K_VARIANCE);var h=e.XListOfString.create();h.add(e.VizDefConstants.K_CATEGORY_AXIS);var D=t.getPrettyNamesForFeed(true,!g,e.VizDefConstants.K_COLOR);var R=t.getPrettyNamesForFeeds(true,!g,y);var A=D.size()<2;var V=T.size();var E;if(V>0){E=e.XStringUtils.concatenate3(e.XCollectionUtils.join(R,", ")," Per ",e.XCollectionUtils.join(i.getDimensionsForFeed(e.VizDefConstants.K_CATEGORY_AXIS),", "));var v=c.putNewList(e.VizDefConstants.K_CATEGORIES);for(var N=0;N<T.size();N++){v.addString(T.get(N))}}else{c.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY);E=e.XCollectionUtils.join(R,", ")}var z=n.getStructureByKey(e.VizDefConstants.K_TITLE);if(e.isNull(z)){z=n.putNewStructure(e.VizDefConstants.K_TITLE);z.putString(e.VizDefConstants.K_TEXT,E)}else{var L=z.getStringByKey(e.VizDefConstants.K_TEXT);if(e.isNull(L)){z.putString(e.VizDefConstants.K_TEXT,E)}}var I=e.XListOfString.create();if(D.size()>1){I.add(e.VizDefConstants.K_COLOR)}if(R.size()>1){I.addAll(y)}var K=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var O=0;O<K.size();O++){S.append("<b>{point.tHeader");S.append(e.XInteger.convertToString(O));S.append("}</b>  {point.tFormatted");S.append(e.XInteger.convertToString(O));S.append("}<br/>")}S.append("{point.errorRange}");var F=t.getIndicesByFeedOrder(y);this.setShowLegend(F.size()>1);for(var b=0;b<F.size();b++){var H=F.get(b).getInteger();var w=t.getTupleAt(H);if(!w.isSelectedByList(y)){continue}s=_.addNewStructure();var X=w.isSelectedByString(e.VizDefConstants.K_VARIANCE);var B=!X&&w.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS2);var M=B?1:X?this.isCombinationChart()?2:1:0;u=X?"Δ":w.getPrettyText(I);s.putString(e.VizDefConstants.K_NAME,u);var x=X?"":w.getPrettyText(y);var P=B?this.getSecondChart():this.getChartType();s.putString(e.VizDefConstants.K_TYPE,P);s.putInteger(e.VizDefConstants.K_Y_AXIS,M);var U=X?e.VizDefConstants.K_VARIANCE:B?e.VizDefConstants.K_VALUE_AXIS2:e.VizDefConstants.K_VALUE_AXIS;s.putString(e.VizDefConstants.K_AXIS,U);p=p||X;a=s.putNewList(e.VizDefConstants.K_DATA);var G=w.getMemberKeys();l=null;var Y=H;var W=H;var q=false;var k=null;var Z=null;if(e.XCollectionUtils.hasElements(G)){k=t.getMatchingTupleIndicesForMemberNameAndFeed(G,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);var j=t.getMatchingTupleIndicesForMemberNamesAndSuffix(G,e.VizDefConstants.K_ERRORBAR_MIN);if(j!==-1){Y=j;q=true}j=t.getMatchingTupleIndicesForMemberNamesAndSuffix(G,e.VizDefConstants.K_ERRORBAR_MAX);if(j!==-1){W=j;q=true}if(q){o=_.addNewStructure();l=o.putNewList(e.VizDefConstants.K_DATA);o.putInteger(e.VizDefConstants.K_Y_AXIS,M);o.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_ERRORBAR);o.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,t.getTupleAt(e.XMath.max(Y,W)).getColor())}}var Q;var J=0;var $=0;var ee="";var te="";if(A){this.addColorAndPattern(w.getColor(),w.getPattern(),s,P,false)}if(V>0){for(var ie=0;ie<i.getTuplesCount();ie++){if(d&&!i.getTupleAt(ie).isSelectedByString(e.VizDefConstants.K_CATEGORY_AXIS)){continue}if(!g||!i.getTupleAt(ie).isTotal()){if(q){J=t.getScaledValue(U,t.getTupleAt(Y),r.getDataCell(Y,ie));ee=t.getFormattedValue(U,t.getTupleAt(Y),r.getDataCell(Y,ie));$=t.getScaledValue(U,t.getTupleAt(W),r.getDataCell(W,ie));te=t.getFormattedValue(U,t.getTupleAt(W),r.getDataCell(W,ie))}if(e.XCollectionUtils.hasElements(k)){Z=e.XListOfString.create();for(var re=0;re<k.size();re++){var ne=k.get(re).getInteger();Z.add(t.getFormattedValue("",t.getTupleAt(ne),r.getDataCell(ne,ie)))}}Q=r.getDataCell(H,ie);this.addValue(U,a,Q,t,w,x,l,J,$,i.getTupleAt(ie).getPrettyText(h),K,Z,ee,te,A,P)}}}else if(r.getDataRows()>0){for(var ae=0;ae<r.getDataRows();ae++){if(q){J=t.getScaledValue(U,t.getTupleAt(Y),r.getDataCell(Y,ae));ee=t.getFormattedValue(U,t.getTupleAt(Y),r.getDataCell(Y,ae));$=t.getScaledValue(U,t.getTupleAt(W),r.getDataCell(W,ae));te=t.getFormattedValue(U,t.getTupleAt(W),r.getDataCell(W,ae))}if(e.XCollectionUtils.hasElements(k)){Z=e.XListOfString.create();for(var se=0;se<k.size();se++){var oe=k.get(se).getInteger();Z.add(t.getFormattedValue("",t.getTupleAt(oe),r.getDataCell(oe,ae)))}}Q=r.getDataCell(H,ae);this.addValue(U,a,Q,t,w,x,l,J,$,null,K,Z,ee,te,A,P)}}}if(V<2){if(D.size()<2){this.setChartWidth(T.size())}else{this.setChartWidth(D.size())}}else{this.setChartWidth(V)}this.setWidthScale(1);if(e.XStringUtils.isNullOrEmpty(this.getStackingType())||!e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_BAR)&&!e.XString.isEqual(this.getChartType(),e.VizDefConstants.V_CHART_TYPE_COLUMN)){var le=this.isCombinationChart()?2:1;if(V>1){this.setWidthScale(F.size()/le)}else if(D.size()>1){this.setWidthScale(e.XMath.max(1,R.size()/le))}}if(_.size()===0){C.putString(e.VizDefConstants.K_NO_DATA,"At least one measure is required to build a chart.")}}var ue=n.putNewStructure(e.VizDefConstants.K_TOOLTIP);ue.putString(e.VizDefConstants.K_POINT_FORMAT,S.toString());ue.putString(e.VizDefConstants.K_HEADER_FORMAT,"");this.setHasVariance(p)};e.RsHiChartCategorialSeriesHelper.prototype.finishRendering=function(){};e.RsHiChartCategorialSeriesHelper.prototype.addValue=function(t,i,r,n,a,s,o,l,u,p,g,f,c,C,_,m){var S=0;var d=r.getValueType();var T=i.addNewStructure();if(d===e.XValueType.DOUBLE||d===e.XValueType.DECIMAL_FLOAT){if(r.getXValue()!==null){S=n.getScaledValue(t,a,r);T.putDouble(e.VizDefConstants.K_Y,S);T.putString(e.VizDefConstants.K_Y_FORMATTED,n.getFormattedValue(t,a,r))}else{T.putString(e.VizDefConstants.K_Y,null);T.putString(e.VizDefConstants.K_Y_FORMATTED,null)}if(_){this.addColorAndPattern(a.getColor(),a.getPattern(),T,m,true)}T.putString(e.VizDefConstants.K_NAME,s);if(e.notNull(p)){T.putString(e.VizDefConstants.K_CATEGORY,p)}}if(e.notNull(o)){var y=o.addNewList();y.addDouble(l);y.addDouble(u);if(l<u){T.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(e.XDouble.convertToString(l)," .. ",C))}else{T.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(e.XDouble.convertToString(u)," .. ",c))}}if(e.XCollectionUtils.hasElements(g)){for(var h=0;h<g.size();h++){T.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(h)),g.get(h))}}if(e.XCollectionUtils.hasElements(f)){for(var D=0;D<f.size();D++){T.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(D)),f.get(D))}}};e.RsHiChartClusterBubbleHelper=function(){};e.RsHiChartClusterBubbleHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartClusterBubbleHelper.prototype._ff_c="RsHiChartClusterBubbleHelper";e.RsHiChartClusterBubbleHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartClusterBubbleHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartClusterBubbleHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartClusterBubbleHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.valueFormatted} <br/>")};e.RsHiChartClusterBubbleHelper.prototype.prepareRendering=function(){};e.RsHiChartClusterBubbleHelper.prototype.reiterateResultSet=function(t,i,r){var n=this.getChartData();var a=n.putNewList(e.VizDefConstants.K_Y_AXIS);var s=a.addNewStructure();var o=n.putNewList(e.VizDefConstants.K_X_AXIS);var l=o.addNewStructure();var u=null;if(this.getVizDef()!==null){u=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(u)){var p=u.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(p)){e.RsHiChartUtils.axisPloter(p,l,this.getChartType(),true)}var g=u.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(g)){s=e.RsHiChartUtils.axisPloter(g,s,this.getChartType(),false)}}}e.RsHiChartVizUtilsSimple.legendStyler(n);var f=e.PrFactory.createStructure();f=n.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);var c=e.VizDefConstants.K_TRANSPARENT;if(n.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(n.getListByKey(e.VizDefConstants.K_COLORS).size()>0){c=n.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(f)){f=n.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}if(!e.XString.isEqual(this.getStackingType(),null)){e.RsHiChartVizUtilsSimple.dataLabelAlignment(s,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)}e.RsHiChartVizUtilsSimple.plotOptionChart(s,this.getChartType(),this.getStackingType(),f,0,c);e.RsHiChartVizUtilsSimple.dataLabelAlignment(s,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)};e.RsHiChartClusterBubbleHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=e.PrFactory.createList();r.addAll(this.getXList());r.addAll(this.getYList());r.addAll(this.getZList());var n=e.PrFactory.createList();n.addAll(this.getXListFormatted());n.addAll(this.getYListFormatted());n.addAll(this.getZListFormatted());var a=e.XListOfString.create();a.addAll(this.getXMeasures());a.addAll(this.getYMeasures());a.addAll(this.getZMeasures());for(var s=0;s<r.size();s++){var o=i.addNewStructure();var l=o.putNewList(e.VizDefConstants.K_DATA);o.putString(e.VizDefConstants.K_NAME,this.getColorList().get(s));var u=r.getListAt(s);var p=n.getListAt(s);for(var g=0;g<u.size();g++){var f=l.addNewStructure();f.putDouble(e.VizDefConstants.K_VALUE,u.getDoubleAt(g));f.putString(e.VizDefConstants.K_VALUE_FORMATTED,p.getStringAt(g));if(e.XCollectionUtils.hasElements(a)){f.putString(e.VizDefConstants.K_NAME,a.get(0))}else{f.putString(e.VizDefConstants.K_NAME,"")}this.addToolTipsToSeries(f,s,g)}}};e.RsHiChartCorrelationHelper=function(){};e.RsHiChartCorrelationHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartCorrelationHelper.prototype._ff_c="RsHiChartCorrelationHelper";e.RsHiChartCorrelationHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartCorrelationHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartCorrelationHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartCorrelationHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.name}</b> <br/>");t.append("<b>{point.SeriesX}</b>: {point.xFormatted} <br/>");t.append("<b>{point.SeriesY}</b>: {point.yFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getZMeasures())){t.append("<b>{point.SeriesZ}</b>: {point.zFormatted} <br/>")}};e.RsHiChartCorrelationHelper.prototype.reiterateResultSet=function(t,i,r){var n=this.getChartData();var a=this.getVizDef();var s="#FFAA49";var o="Dash";var l=n.putNewList(e.VizDefConstants.K_Y_AXIS);var u=n.putNewList(e.VizDefConstants.K_X_AXIS);var p=u.addNewStructure();var g=l.addNewStructure();if(e.notNull(a)){e.RsHiChartVizUtilsSimple.addReferenceLine(a,p,g,t,i,r);if(a.containsKey(e.VizDefConstants.K_BUBBLE_STYLING)){var f=a.getStructureByKey(e.VizDefConstants.K_BUBBLE_STYLING);if(e.notNull(f)){o=f.getStringByKey(e.VizDefConstants.K_PATTERN);s=f.getStringByKey(e.VizDefConstants.K_COLOR)}}}var c=n.getStructureByKey(e.VizDefConstants.K_CHART);c.putString(e.VizDefConstants.K_TYPE,this.getChartType());var C=c.putNewStructure(e.VizDefConstants.K_STYLE);C.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");C.putString(e.VizDefConstants.K_FONT_SIZE,"13px");c.putInteger(e.VizDefConstants.K_MARGIN_TOP,100);var _=null;if(e.notNull(a)){_=a.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES).getStructureByKey(e.VizDefConstants.K_VALUE_AXIS)}e.RsHiChartVizUtilsCorrelation.renderValueAxis(p,_,false);if(e.notNull(a)){_=a.getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES).getStructureByKey(e.VizDefConstants.K_VALUE_AXIS2)}e.RsHiChartVizUtilsCorrelation.renderValueAxis(g,_,true);var m=n.getStructureByKey(e.VizDefConstants.K_LEGEND);m.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);m.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_VERTICAL);m.putInteger(e.VizDefConstants.K_MAX_HEIGHT,50);m.putInteger(e.VizDefConstants.K_Y,20);m.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);m.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var S=m.putNewStructure(e.VizDefConstants.K_ITEM_STYLE);S.putString(e.VizDefConstants.K_FONT_SIZE,"12px");S.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_NORMAL);var d=n.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var T=d.putNewStructure(this.getChartType());var y=T.putNewStructure(e.VizDefConstants.K_MARKER);y.putString(e.VizDefConstants.K_SYMBOL,e.VizDefConstants.V_CIRCLE);var h=n.putNewStructure(e.VizDefConstants.K_SHAPE_OPTIONS);if(this.getXList().size()>1){e.RsHiChartVizUtilsCorrelation.legendStyler(n)}else{T.putString(e.VizDefConstants.K_DASH_STYLE,o);T.putString(e.VizDefConstants.K_COLOR,s);T.putString(e.VizDefConstants.K_STROKE,s);T.putString(e.VizDefConstants.K_FILL,s);h.putString(e.VizDefConstants.K_FILL,s)}var D=T.putNewStructure(e.VizDefConstants.K_DATA_LABELS);D.putBoolean(e.VizDefConstants.K_ENABLED,false);this.addPadding(this.getXList(),p);this.addPadding(this.getYList(),g)};e.RsHiChartCorrelationHelper.prototype.addPadding=function(t,i){var r=false;var n=0;var a=0;var s;var o;var l;var u;for(s=0;s<t.size();s++){u=t.getListAt(s);for(o=0;o<u.size();o++){l=u.getDoubleAt(o);if(!r||l>a){a=l}if(!r||l<n){n=l}r=true}}var p=(a-n)/10;if(a+p<0){i.putDouble(e.VizDefConstants.K_MAX,0)}else{i.putDouble(e.VizDefConstants.K_MAX_PADDING,.05)}if(n-p>0){i.putDouble(e.VizDefConstants.K_MIN,0)}else{i.putDouble(e.VizDefConstants.K_MIN_PADDING,.05)}};e.RsHiChartCorrelationHelper.prototype.prepareRendering=function(){};e.RsHiChartCorrelationHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=this.getXList();var n=this.getYList();var a=this.getZList();var s=this.getXListFormatted();var o=this.getYListFormatted();var l=this.getZListFormatted();var u=e.XCollectionUtils.hasElements(this.getXMeasures())?this.getXMeasures().get(0):"";var p=e.XCollectionUtils.hasElements(this.getYMeasures())?this.getYMeasures().get(0):"";var g=e.XCollectionUtils.hasElements(this.getZMeasures())?this.getZMeasures().get(0):"";if(e.XStringUtils.isNotNullAndNotEmpty(u)||e.XStringUtils.isNotNullAndNotEmpty(p)){var f=this.getChartData().getListByKey(e.VizDefConstants.K_X_AXIS).getStructureAt(0).getStructureByKey(e.VizDefConstants.K_TITLE);f.putString(e.VizDefConstants.K_TEXT,u);var c=this.getChartData().getListByKey(e.VizDefConstants.K_Y_AXIS).getStructureAt(0).getStructureByKey(e.VizDefConstants.K_TITLE);c.putString(e.VizDefConstants.K_TEXT,p)}var C=0;var _=0;var m=0;var S="0";var d="0";var T="0";var y=e.PrFactory.createList();var h=e.PrFactory.createList();for(var D=0;D<r.size();D++){var R=i.addNewStructure();var A=R.putNewList(e.VizDefConstants.K_DATA);R.putString(e.VizDefConstants.K_TYPE,this.getChartType());if(e.XCollectionUtils.hasElements(this.getColorList())&&this.getColorList().size()>D){R.putString(e.VizDefConstants.K_NAME,this.getColorList().get(D))}else{R.putString(e.VizDefConstants.K_NAME,"")}R.putBoolean(e.VizDefConstants.K_SIZE_BY_ABSOLUTE_VALUE,true);var V=r.getListAt(D);var E=s.getListAt(D);var v=n.getListAt(D);var N=o.getListAt(D);if(a.size()>0){y=a.getListAt(D)}if(l.size()>0){h=l.getListAt(D)}for(var z=0;z<this.getCategoriesList().size();z++){var L=e.PrFactory.createStructure();m=V.getDoubleAt(z);_=v.getDoubleAt(z);T=E.getStringAt(z);d=N.getStringAt(z);var I=this.getCategoriesList().get(z);L.putString(e.VizDefConstants.K_NAME,I);L.putDouble(e.VizDefConstants.K_X,m);L.putDouble(e.VizDefConstants.K_Y,_);L.putString(e.VizDefConstants.K_X_FORMATTED,T);L.putString(e.VizDefConstants.K_Y_FORMATTED,d);if(e.notNull(y)){if(y.size()>z){C=y.getDoubleAt(z);L.putDouble(e.VizDefConstants.K_Z,C)}}if(e.notNull(h)){if(h.size()>z){S=h.getStringAt(z);L.putString(e.VizDefConstants.K_Z_FORMATTED,S)}}L.putString(e.VizDefConstants.K_SERIES_X,u);L.putString(e.VizDefConstants.K_SERIES_Y,p);L.putString(e.VizDefConstants.K_SERIES_Z,g);if(!(C===0&&m===0&&_===0)){A.add(L)}this.addToolTipsToSeries(L,D,z)}}};e.RsHiChartMarimekkoHelper=function(){};e.RsHiChartMarimekkoHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartMarimekkoHelper.prototype._ff_c="RsHiChartMarimekkoHelper";e.RsHiChartMarimekkoHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartMarimekkoHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartMarimekkoHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_BUBBLE_WIDTH};e.RsHiChartMarimekkoHelper.prototype.reiterateResultSet=function(t,i,r){var n=this.getChartData();var a=n.putNewList(e.VizDefConstants.K_Y_AXIS);var s=a.addNewStructure();var o=n.putNewList(e.VizDefConstants.K_X_AXIS);var l=o.addNewStructure();l.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY);var u=null;if(this.getVizDef()!==null){u=this.getVizDef().getStructureByKey(e.VizDefConstants.K_CHART).getStructureByKey(e.VizDefConstants.K_PROPERTIES);if(e.notNull(u)){var p=u.getStructureByKey(e.VizDefConstants.K_CATEGORY_AXIS);if(e.notNull(p)){l=e.RsHiChartUtils.axisPloter(p,l,this.getChartType(),true)}var g=u.getStructureByKey(e.VizDefConstants.K_VALUE_AXIS);if(e.notNull(g)){s=e.RsHiChartUtils.axisPloter(g,s,this.getChartType(),false)}e.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),s,s,t,i,r)}}e.RsHiChartVizUtilsSimple.legendStyler(n);var f=e.PrFactory.createStructure();f=n.getStructureByKey(e.VizDefConstants.K_PLOT_OPTIONS);var c=e.VizDefConstants.K_TRANSPARENT;if(n.getListByKey(e.VizDefConstants.K_COLORS)!==null){if(n.getListByKey(e.VizDefConstants.K_COLORS).size()>0){c=n.getListByKey(e.VizDefConstants.K_COLORS).getStringAt(0)}}if(e.isNull(f)){f=n.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS)}if(!e.XString.isEqual(this.getStackingType(),null)){e.RsHiChartVizUtilsSimple.dataLabelAlignment(s,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)}e.RsHiChartVizUtilsSimple.plotOptionChart(s,this.getChartType(),this.getStackingType(),f,0,c);e.RsHiChartVizUtilsSimple.dataLabelAlignment(s,this.getChartType(),t.getDecimalPlaces(this.getXFeed()),false)};e.RsHiChartMarimekkoHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.xName}</b> <br/>");t.append("<b>{point.yName}</b>: {point.yFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getYMeasures())){t.append("<b>{point.zName}</b>: {point.zFormatted} <br/>")}};e.RsHiChartMarimekkoHelper.prototype.prepareRendering=function(){};e.RsHiChartMarimekkoHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=this.getChartData().putNewStructure(e.VizDefConstants.K_X_AXIS);r.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_CATEGORY);var n=r.putNewList(e.VizDefConstants.K_CATEGORIES);for(var a=0;a<this.getCategoriesList().size();a++){n.addString(this.getCategoriesList().get(a))}i.clear();if(e.XCollectionUtils.hasElements(this.getColorList())){if(this.getYMeasures().size()===0){this.createOneDimensionalColorSeries(i)}else{this.createTwoDimensionalColorSeries(i)}}else{if(this.getYMeasures().size()===0){this.createOneDimensionalSeries(i)}else{this.createTwoDimensionalSeries(i)}}};e.RsHiChartMarimekkoHelper.prototype.createOneDimensionalSeries=function(t){for(var i=0;i<this.getXMeasures().size();i++){var r=t.addNewStructure();var n=r.putNewStructure(e.VizDefConstants.K_DATA_LABELS);n.putBoolean(e.VizDefConstants.K_ENABLED,true);r.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(i));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),r,e.VizDefConstants.K_VARIWIDE,false);var a=r.putNewList(e.VizDefConstants.K_DATA);for(var s=0;s<this.getCategoriesList().size();s++){var o=a.addNewStructure();o.putInteger(e.VizDefConstants.K_X,s);o.putDouble(e.VizDefConstants.K_Y,this.getXList().getListAt(i).getDoubleAt(s));o.putDouble(e.VizDefConstants.K_Z,this.getXList().getListAt(i).getDoubleAt(s));o.putString(e.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(s));o.putString(e.VizDefConstants.K_Z_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(s));o.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(s));o.putString(e.VizDefConstants.K_Y_NAME,this.getXMeasures().get(i));o.putString(e.VizDefConstants.K_Z_NAME,this.getXMeasures().get(i));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),o,e.VizDefConstants.K_VARIWIDE,true);this.addToolTipsToSeries(o,0,s)}}};e.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalSeries=function(t){for(var i=0;i<this.getXMeasures().size();i++){for(var r=0;r<this.getYMeasures().size();r++){var n=t.addNewStructure();var a=n.putNewStructure(e.VizDefConstants.K_DATA_LABELS);a.putBoolean(e.VizDefConstants.K_ENABLED,true);n.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(this.getXMeasures().get(i),"/",this.getYMeasures().get(r)));this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),n,e.VizDefConstants.K_VARIWIDE,false);var s=n.putNewList(e.VizDefConstants.K_DATA);for(var o=0;o<this.getCategoriesList().size();o++){var l=s.addNewStructure();this.addColorAndPattern(this.getXColors().get(i),this.getXPatterns().get(i),l,e.VizDefConstants.K_VARIWIDE,true);l.putInteger(e.VizDefConstants.K_X,o);l.putDouble(e.VizDefConstants.K_Y,this.getXList().getListAt(i).getDoubleAt(o));l.putDouble(e.VizDefConstants.K_Z,this.getYList().getListAt(r).getDoubleAt(o));l.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(o));l.putString(e.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(i).getStringAt(o));l.putString(e.VizDefConstants.K_Z_FORMATTED,this.getYListFormatted().getListAt(r).getStringAt(o));l.putString(e.VizDefConstants.K_Y_NAME,this.getXMeasures().get(i));l.putString(e.VizDefConstants.K_Z_NAME,this.getYMeasures().get(r));this.addToolTipsToSeries(l,0,o)}}}};e.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalColorSeries=function(t){var i=this.getYList().size();var r=this.getYMeasures().size();for(var n=0;n<this.getColorList().size();n++){var a=this.getColorList().get(n);for(var s=0;s<this.getXMeasures().size();s++){var o=t.addNewStructure();var l=o.putNewStructure(e.VizDefConstants.K_DATA_LABELS);l.putBoolean(e.VizDefConstants.K_ENABLED,true);o.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(a,"/",this.getXMeasures().get(s)));var u=o.putNewList(e.VizDefConstants.K_DATA);for(var p=0;p<this.getCategoriesList().size();p++){var g=this.getXList().getListAt(this.getXMeasures().size()*n+s).getDoubleAt(p);var f=this.getXListFormatted().getListAt(this.getXMeasures().size()*n+s).getStringAt(p);var c="";var C=this.getXMeasures().get(s);var _="";var m=0;var S;for(S=0;S<i;S++){m=this.getYList().getListAt(S).getDoubleAt(p);c=this.getYListFormatted().getListAt(S).getStringAt(p);_=this.getYMeasures().get(0);if(m!==0){break}}var d=u.addNewStructure();d.putInteger(e.VizDefConstants.K_X,p);d.putDouble(e.VizDefConstants.K_Y,g);d.putDouble(e.VizDefConstants.K_Z,m);d.putString(e.VizDefConstants.K_Y_FORMATTED,f);d.putString(e.VizDefConstants.K_Z_FORMATTED,c);d.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(p));d.putString(e.VizDefConstants.K_Y_NAME,C);d.putString(e.VizDefConstants.K_Z_NAME,_);this.addToolTipsToSeries(d,e.XMath.div(S,r),p)}}}};e.RsHiChartMarimekkoHelper.prototype.createOneDimensionalColorSeries=function(t){var i=this.getXMeasures().size();for(var r=0;r<this.getColorList().size();r++){var n=this.getColorList().get(r);for(var a=0;a<this.getXMeasures().size();a++){var s=t.addNewStructure();var o=s.putNewStructure(e.VizDefConstants.K_DATA_LABELS);o.putBoolean(e.VizDefConstants.K_ENABLED,true);s.putString(e.VizDefConstants.K_NAME,e.XStringUtils.concatenate3(n,"/",this.getXMeasures().get(a)));var l=s.putNewList(e.VizDefConstants.K_DATA);for(var u=0;u<this.getCategoriesList().size();u++){var p=this.getXList().getListAt(this.getXMeasures().size()*r+a).getDoubleAt(u);var g=0;var f;for(f=0;f<this.getXList().size();f++){g=this.getXList().getListAt(f).getDoubleAt(u);if(g!==0){break}}var c=this.getXListFormatted().getListAt(this.getXMeasures().size()*r+a).getStringAt(u);var C=this.getXMeasures().get(a);var _=l.addNewStructure();_.putInteger(e.VizDefConstants.K_X,u);_.putDouble(e.VizDefConstants.K_Y,p);_.putDouble(e.VizDefConstants.K_Z,g);_.putString(e.VizDefConstants.K_Y_FORMATTED,c);_.putString(e.VizDefConstants.K_X_NAME,this.getCategoriesList().get(u));_.putString(e.VizDefConstants.K_Y_NAME,C);this.addToolTipsToSeries(_,e.XMath.div(f,i),u)}}}};e.RsHiChartMetricHelper=function(){};e.RsHiChartMetricHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartMetricHelper.prototype._ff_c="RsHiChartMetricHelper";e.RsHiChartMetricHelper.prototype.isResponsive=function(){return false};e.RsHiChartMetricHelper.prototype.prepareRendering=function(){};e.RsHiChartMetricHelper.prototype.finishRendering=function(){var t=this.getXList();if(!e.XCollectionUtils.hasElements(t)){return}var i=this.getZList();var r=this.getXListFormatted();var n=this.getYListFormatted();var a=this.getZListFormatted();if(!e.XCollectionUtils.hasElements(r)){return}var s=this.getChartData();var o=s.putNewList(e.VizDefConstants.K_SERIES);var l=o.addNewStructure();var u=l.putNewList(e.VizDefConstants.K_DATA);var p="120px";var g="30px";var f="40px";var c=e.VizDefConstants.V_BLACK;var C=e.VizDefConstants.V_BLACK;var _=u.addNewStructure();_.putString(e.VizDefConstants.K_VALUE_FORMATTED,r.getListAt(0).getStringAt(0));_.putDouble(e.VizDefConstants.K_Y,t.getListAt(0).getDoubleAt(0));_.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0));var m=0;var S=_.putNewList(e.VizDefConstants.K_TARGET_VALUES);var d=e.XStringBuffer.create();if(n.size()+a.size()>0){d.append('<br/><div style="font-size:');d.append(f);d.append('">')}var T=0;var y=0;for(m=0;m<n.size();m++){y=e.XMath.max(y,e.XString.size(n.getListAt(m).getStringAt(0)));if(m<this.getYMeasures().size()){T=e.XMath.max(T,e.XString.size(this.getYMeasures().get(m)))}}if(a.size()>0){y=e.XMath.max(y,e.XString.size(a.getListAt(0).getStringAt(0)))}for(m=0;m<n.size();m++){var h=S.addNewStructure();h.putString(e.VizDefConstants.K_TARGET_FORMATTED,n.getListAt(m).getStringAt(0));var D="";if(m<this.getYMeasures().size()){D=this.getYMeasures().get(m)}h.putString(e.VizDefConstants.K_NAME,D);d.append('<br/><div><span style="text-align:left;font-size:');d.append(f);d.append(";width:");var R=3+y-e.XString.size(D);d.append(e.XInteger.convertToString(R));d.append('em;">{point.targetValues.');d.append(e.XInteger.convertToString(m));d.append(".targetFormatted}");for(var A=0;A<R;A++){d.append(" ")}d.append(' </span><span style="text-align:right;font-size:');d.append(f);d.append(';">{point.targetValues.');d.append(e.XInteger.convertToString(m));d.append(".name}</span></div>")}if(a.size()>0){_.putString(e.VizDefConstants.K_VARIANCE,a.getListAt(0).getStringAt(0));d.append('<br/><div><span style="font-size:');d.append(f);d.append(";width:");var V=3+T+y-e.XString.size(a.getListAt(0).getStringAt(0));d.append(e.XInteger.convertToString(V));d.append('em;">');d.append(i.getListAt(0).getDoubleAt(0)<0?"⇩":i.getListAt(0).getDoubleAt(0)===0?"⇨":"⇧");d.append(" {point.variance}");d.append('</span><span style="text-align:right;font-size:');d.append(f);d.append(';"></span></div>')}if(n.size()+a.size()>0){d.append("</div>")}var E=s.getStructureByKey(e.VizDefConstants.K_CHART);var v=s.putNewStructure(e.VizDefConstants.K_LANG);v.putString(e.VizDefConstants.K_THOUSANDS_SEP,",");E.putInteger(e.VizDefConstants.K_MARGIN_TOP,110);var N=s.putNewStructure(e.VizDefConstants.K_TOOLTIP);N.putBoolean(e.VizDefConstants.K_ENABLED,false);var z=s.putNewStructure(e.VizDefConstants.K_PANE);var L=z.putNewList(e.VizDefConstants.K_BACKGROUND).addNewStructure();L.putString(e.VizDefConstants.K_BACKGROUND_COLOR,"rgba(0,0,0,0)");L.putString(e.VizDefConstants.K_INNER_RADIUS,"0%");L.putString(e.VizDefConstants.K_OUTER_RADIUS,"0%");L.putString(e.VizDefConstants.K_SHAPE,e.VizDefConstants.V_ARC);z.putInteger(e.VizDefConstants.K_END_ANGLE,0);z.putInteger(e.VizDefConstants.K_START_ANGLE,0);z.putInteger(e.VizDefConstants.K_SIZE,0);var I=z.putNewList(e.VizDefConstants.V_CENTER);I.addString("0%");I.addString("0%");var K=s.putNewList(e.VizDefConstants.K_Y_AXIS);var O=K.addNewStructure();O.putInteger(e.VizDefConstants.K_LINE_WIDTH,0);O.putInteger(e.VizDefConstants.K_GRIDLINE_WIDTH,0);O.putBoolean(e.VizDefConstants.K_VISIBLE,false);var F=s.putNewStructure(e.VizDefConstants.K_LEGEND);F.putBoolean(e.VizDefConstants.K_ENABLED,false);var b=s.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var H=b.putNewStructure(e.VizDefConstants.K_SERIES);var w=H.putNewStructure(e.VizDefConstants.K_DATA_LABELS);w.putBoolean(e.VizDefConstants.K_ENABLED,true);w.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_RIGHT);w.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_MIDDLE);w.putInteger(e.VizDefConstants.K_Y,0);w.putInteger(e.VizDefConstants.K_BORDER_WIDTH,0);var X=';">{point.valueFormatted}</span>';var B=';">{point.name}</span></div>';s.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false);var M=null;var x=null;var P=null;M=e.XStringUtils.concatenate5('<div><span style="font-size:',g,";color:",c,B);x=e.XStringUtils.concatenate5('<span style="font-size:',p,";color:",C,X);var U=d.toString();P=e.XStringUtils.concatenate4(x,"<br/>",M,U);w.putString(e.VizDefConstants.K_FORMAT,P);var G=w.putNewStructure(e.VizDefConstants.K_STYLE);G.putString(e.VizDefConstants.K_TEXT_OUTLINE,"0px");var Y=b.putNewStructure(e.VizDefConstants.K_SOLID_GAUGE);Y.putBoolean(e.VizDefConstants.K_ANIMATION,false)};e.RsHiChartMetricHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_VALUE_AXIS};e.RsHiChartMetricHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_VALUE_AXIS2};e.RsHiChartMetricHelper.prototype.getZFeed=function(){return e.VizDefConstants.K_VARIANCE};e.RsHiChartPieHelper=function(){};e.RsHiChartPieHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartPieHelper.prototype._ff_c="RsHiChartPieHelper";e.RsHiChartPieHelper.prototype.isShowLegend=function(){return true};e.RsHiChartPieHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_SIZE};e.RsHiChartPieHelper.prototype.getYFeed=function(){return null};e.RsHiChartPieHelper.prototype.getZFeed=function(){return null};e.RsHiChartPieHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.yFormatted} <br/>")};e.RsHiChartPieHelper.prototype.prepareRendering=function(){var t=this.getChartData();var i=t.getStructureByKey(e.VizDefConstants.K_CHART);var r=i.putNewStructure(e.VizDefConstants.K_STYLE);r.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");r.putString(e.VizDefConstants.K_FONT_SIZE,"13px");var n=t.getStructureByKey(e.VizDefConstants.K_LEGEND);n.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);n.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);n.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);n.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);n.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var a=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var s=t.putNewList(e.VizDefConstants.K_Y_AXIS);var o=s.addNewStructure();var l=o.putNewStructure(e.VizDefConstants.K_TITLE);l.putString(e.VizDefConstants.K_TEXT,"");var u=a.putNewStructure(this.getChartType());u.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);u.putString(e.VizDefConstants.K_INNER_SIZE,this.getInnerRadius());var p=u.putNewStructure(e.VizDefConstants.K_DATA_LABELS);p.putBoolean(e.VizDefConstants.K_ENABLED,true);p.putString(e.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");p.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);p.putInteger(e.VizDefConstants.K_DISTANCE,15);var g=p.putNewStructure(e.VizDefConstants.K_STYLE);g.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.V_FONT_WEIGHT_BOLD);g.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");g.putString(e.VizDefConstants.K_FONT_SIZE,"12px");g.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")};e.RsHiChartPieHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=i.addNewStructure();var n=r.putNewList(e.VizDefConstants.K_DATA);if(this.getXList().size()===0){return}r.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0));var a=this.getXListRemapped();var s=this.getYListRemapped();var o=this.getXListFormattedRemapped();var l=this.getYListFormattedRemapped();var u=this.getCategoriesList();for(var p=0;p<a.size();p++){var g=n.addNewStructure();var f=a.getDoubleAt(p);var c=e.XDouble.convertToString(f);var C=0;var _="0.0";if(p<o.size()){c=o.getStringAt(p)}if(p<s.size()){C=s.getDoubleAt(p);_=e.XDouble.convertToString(C)}if(p<l.size()){_=l.getStringAt(p)}g.putString(e.VizDefConstants.K_Y_FORMATTED,c);g.putString(e.VizDefConstants.K_Z_FORMATTED,_);g.putDouble(e.VizDefConstants.K_Y,f);g.putDouble(e.VizDefConstants.K_Z,C);this.addToolTipsToSeries(g,0,p);if(u.size()>p){var m=u.get(p);g.putString(e.VizDefConstants.K_NAME,m)}}};e.RsHiChartTimeSeriesHelper=function(){};e.RsHiChartTimeSeriesHelper.prototype=new e.RsHiChartSeriesHelper;e.RsHiChartTimeSeriesHelper.prototype._ff_c="RsHiChartTimeSeriesHelper";e.RsHiChartTimeSeriesHelper.addValue=function(t,i,r,n,a,s,o,l,u,p,g,f,c,C,_){var m=0;var S=r.getValueType();var d=t.addNewStructure();if(S===e.XValueType.DOUBLE||S===e.XValueType.DECIMAL_FLOAT){d.putDouble(e.VizDefConstants.K_X,i.getMilliseconds());if(r.getXValue()!==null){m=r.getDouble();d.putDouble(e.VizDefConstants.K_Y,m);d.putString(e.VizDefConstants.K_Y_FORM,n.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,a,r));d.putDouble(e.VizDefConstants.K_PERCENT,m*100)}else{d.putString(e.VizDefConstants.K_Y,null);d.putString(e.VizDefConstants.K_Y_FORM,null)}if(_){d.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,a.getColor())}d.putString(e.VizDefConstants.K_NAME,s);if(e.notNull(p)){d.putString(e.VizDefConstants.K_CATEGORY_FORM,p)}}if(e.notNull(o)){var T=o.addNewList();T.addDouble(l);T.addDouble(u);if(l<u){d.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(e.XDouble.convertToString(l)," .. ",C))}else{d.putString(e.VizDefConstants.K_ERROR_RANGE,e.XStringUtils.concatenate3(e.XDouble.convertToString(u)," .. ",c))}}if(e.XCollectionUtils.hasElements(g)){for(var y=0;y<g.size();y++){d.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_HEADER,e.XInteger.convertToString(y)),g.get(y))}}if(e.XCollectionUtils.hasElements(f)){for(var h=0;h<f.size();h++){d.putString(e.XStringUtils.concatenate2(e.VizDefConstants.K_T_FORMATTED,e.XInteger.convertToString(h)),f.get(h))}}};e.RsHiChartTimeSeriesHelper.prototype.isTimeseries=function(){return true};e.RsHiChartTimeSeriesHelper.prototype.prepareRendering=function(){};e.RsHiChartTimeSeriesHelper.prototype.readResultSetData=function(t,i,r){var n=this.getChartData();var a=null;var s=null;var o=n.putNewStructure(e.VizDefConstants.K_LANG);var l=n.putNewList(e.VizDefConstants.K_SERIES);var u=e.XStringBuffer.create();u.append("<b>{series.name}</b><br/>");var p;u.append("<b>{point.name}</b>:  {point.yForm}<br/>");var g=false;var f=e.XListOfString.create();f.add(e.VizDefConstants.K_VALUE_AXIS);f.add(e.VizDefConstants.K_VALUE_AXIS2);f.add(e.VizDefConstants.K_VARIANCE);var c=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_COLOR);if(r.getAvailableDataCellCount()>0){var C=t.getPrettyNamesForFeed(true,false,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var _=0;_<C.size();_++){u.append("<b>{point.tHeader");u.append(e.XInteger.convertToString(_));u.append("}</b>:  {point.tFormatted");u.append(e.XInteger.convertToString(_));u.append("}<br/>")}u.append("{point.errorRange}<br/>");u.append("{point.categoryForm}<br/>");var m=i.getDateList();var S=i.getFormattedDateList();if(e.XCollectionUtils.hasElements(m)){var d=t.getIndicesByFeedOrder(f);var T=e.XListOfString.create();T.add(e.VizDefConstants.K_COLOR);T.addAll(f);this.setShowLegend(d.size()>1);for(var y=0;y<d.size();y++){var h=d.get(y).getInteger();var D=t.getTupleAt(h);if(!D.isSelectedByString(e.VizDefConstants.K_VALUE_AXIS)){continue}var R=c.size()<2;s=l.addNewStructure();s.putString(e.VizDefConstants.K_NAME,D.getPrettyDefaultText());a=s.putNewList(e.VizDefConstants.K_DATA);if(R){s.putStringNotNullAndNotEmpty(e.VizDefConstants.K_COLOR,D.getColor())}var A=D.getMemberKeys();p=null;var V=h;var E=h;var v=false;var N=null;var z=null;if(e.XCollectionUtils.hasElements(A)){N=t.getMatchingTupleIndicesForMemberNameAndFeed(A,e.VizDefConstants.K_TOOLTIP_VALUE_AXIS);var L=t.getMatchingTupleIndicesForMemberNamesAndSuffix(A,e.VizDefConstants.K_ERRORBAR_MIN);if(L!==-1){V=L;v=true}L=t.getMatchingTupleIndicesForMemberNamesAndSuffix(A,e.VizDefConstants.K_ERRORBAR_MAX);if(L!==-1){E=L;v=true}if(v){var I=l.addNewStructure();p=I.putNewList(e.VizDefConstants.K_DATA);I.putString(e.VizDefConstants.K_TYPE,e.VizDefConstants.K_ERRORBAR)}}for(var K=0;K<i.getTuplesCount();K++){if(!i.getTupleAt(K).isSelectedByString(e.VizDefConstants.K_TIME_AXIS)){continue}var O=m.get(K);var F=0;var b=0;var H="";var w="";if(e.notNull(O)){if(v){F=r.getDataCell(V,K).getDouble();H=t.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,t.getTupleAt(V),r.getDataCell(V,K));b=r.getDataCell(E,K).getDouble();w=t.getFormattedValue(e.VizDefConstants.K_VALUE_AXIS,t.getTupleAt(E),r.getDataCell(E,K))}if(e.XCollectionUtils.hasElements(N)){z=e.XListOfString.create();for(var X=0;X<N.size();X++){var B=N.get(X).getInteger();z.add(t.getFormattedValue("",t.getTupleAt(B),r.getDataCell(B,K)))}}var M=r.getDataCell(h,K);if(!i.getTupleAt(K).isTotal()){e.RsHiChartTimeSeriesHelper.addValue(a,O,M,t,D,D.getPrettyDefaultText(),p,F,b,S.get(K),C,z,H,w,R);g=true}}}}var x=n.putNewStructure(e.VizDefConstants.K_TOOLTIP);x.putString(e.VizDefConstants.K_POINT_FORMAT,u.toString());x.putString(e.VizDefConstants.K_HEADER_FORMAT,"")}}if(!g){o.putString(e.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.");n.putBoolean(e.VizDefConstants.K_FULL_SCREEN_ENABLED,false)}};e.RsHiChartTimeSeriesHelper.prototype.finishRendering=function(){this.getChartData().putBoolean(e.VizDefConstants.K_IS_TIME_SERIES,true)};e.RsHiChartTreemapHelper=function(){};e.RsHiChartTreemapHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartTreemapHelper.prototype._ff_c="RsHiChartTreemapHelper";e.RsHiChartTreemapHelper.prototype.prepareRendering=function(){};e.RsHiChartTreemapHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=i.addNewStructure();r.putString(e.VizDefConstants.K_LAYOUT_ALGORITHM,e.VizDefConstants.V_TREEMAP_LAYOUT_STRIP);var n=r.putNewList(e.VizDefConstants.K_DATA);if(this.getXList().size()===0){return}if(this.getYMeasures().size()>0){r.putString(e.VizDefConstants.K_NAME,this.getYMeasures().get(0))}else if(this.getXMeasures().size()>0){r.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(0))}else{r.putString(e.VizDefConstants.K_NAME,"")}var a=this.getXListRemapped();var s=this.getYListRemapped();var o=this.getXListFormattedRemapped();var l=this.getYListFormattedRemapped();var u=this.getXMeasures();var p=this.getYMeasures();var g=this.getCategoryLabels();var f=e.XCollectionUtils.hasElements(p);if(!f){s=a;l=o;p=u}var c=r.putNewStructure(e.VizDefConstants.K_DATA_LABELS);c.putString(e.VizDefConstants.K_POINT_FORMAT,"<b>{point.name}</b><br/> {point.valueFormatted}");var C=0;var _=0;var m="0";var S="0";var d=e.XHashSetOfString.create();for(var T=0;T<g.size();T++){var y=g.get(T);C=a.getDoubleAt(T);_=s.getDoubleAt(T);m=o.getStringAt(T);S=l.getStringAt(T);var h=this.getNewLabeledStructure(n,y,d);if(y.isLeafOrCollapsed()){h.putDouble(e.VizDefConstants.K_VALUE,C);h.putDouble(e.VizDefConstants.K_COLOR_VALUE,_)}h.putString(e.VizDefConstants.K_VALUE_FORMATTED,m);h.putString(e.VizDefConstants.K_COLOR_VALUE_FORMATTED,S);h.putString(e.VizDefConstants.K_COLOR_NAME,p.get(0));h.putString(e.VizDefConstants.K_VALUE_NAME,u.get(0));h.putString(e.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(h,0,T)}e.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef())};e.RsHiChartTreemapHelper.prototype.getNewLabeledStructure=function(t,i,r){if(r.contains(i.getCompoundId())){return null}if(i.getParent()!==null){this.getNewLabeledStructure(t,i.getParent(),r)}r.add(i.getCompoundId());var n=t.addNewStructure();n.putString(e.VizDefConstants.K_ID,i.getCompoundId());if(i.getParent()!==null){n.putString(e.VizDefConstants.K_PARENT,i.getParent().getCompoundId())}n.putString(e.VizDefConstants.K_NAME,i.getLabel());if(!i.isLeafOrCollapsed()){n.putInteger(e.VizDefConstants.K_BORDER_WIDTH,e.XMath.div(6,i.getDisplayLevel()+1));n.putString(e.VizDefConstants.K_BORDER_COLOR,"grey")}return n};e.RsHiChartTreemapHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_WEIGHT};e.RsHiChartTreemapHelper.prototype.getYFeed=function(){return e.VizDefConstants.K_COLOR};e.RsHiChartTreemapHelper.prototype.getZFeed=function(){return null};e.RsHiChartTreemapHelper.prototype.decorateToolTip=function(t){t.append("<b>{point.name}</b><br/><b>{point.valueName}</b>: {point.valueFormatted} <br/>");if(e.XCollectionUtils.hasElements(this.getYMeasures())){t.append("<b>{point.colorName}</b>: {point.colorValueFormatted} <br/>")}};e.RsHiChartWordcloudHelper=function(){};e.RsHiChartWordcloudHelper.prototype=new e.RsHiChartCovariationHelper;e.RsHiChartWordcloudHelper.prototype._ff_c="RsHiChartWordcloudHelper";e.RsHiChartWordcloudHelper.prototype.getXFeed=function(){return e.VizDefConstants.K_SIZE};e.RsHiChartWordcloudHelper.prototype.getYFeed=function(){return null};e.RsHiChartWordcloudHelper.prototype.getZFeed=function(){return null};e.RsHiChartWordcloudHelper.prototype.decorateToolTip=function(e){e.append("<b>{point.name}</b>: {point.weightFormatted}  <br/>")};e.RsHiChartWordcloudHelper.prototype.prepareRendering=function(){var t=this.getChartData();var i=t.getStructureByKey(e.VizDefConstants.K_CHART);var r=i.putNewStructure(e.VizDefConstants.K_STYLE);r.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");r.putString(e.VizDefConstants.K_FONT_SIZE,"13px");var n=t.getStructureByKey(e.VizDefConstants.K_LEGEND);n.putBoolean(e.VizDefConstants.K_SQUARE_SYMBOL,true);n.putInteger(e.VizDefConstants.K_SYMBOL_RADIUS,0);n.putString(e.VizDefConstants.K_LAYOUT,e.VizDefConstants.V_HORIZONTAL);n.putString(e.VizDefConstants.K_ALIGN,e.VizDefConstants.V_CENTER);n.putString(e.VizDefConstants.K_VERTICAL_ALIGN,e.VizDefConstants.V_POSITION_TOP);var a=t.putNewStructure(e.VizDefConstants.K_PLOT_OPTIONS);var s=t.putNewList(e.VizDefConstants.K_Y_AXIS);var o=s.addNewStructure();var l=o.putNewStructure(e.VizDefConstants.K_TITLE);l.putString(e.VizDefConstants.K_TEXT,"");var u=a.putNewStructure(this.getChartType());var p=u.putNewStructure(e.VizDefConstants.K_STYLE);p.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");var g=u.putNewStructure(e.VizDefConstants.K_ROTATION);g.putInteger(e.VizDefConstants.K_FROM,-45);g.putInteger(e.VizDefConstants.K_TO,25);u.putString(e.VizDefConstants.K_PLACEMENT_STRATEGY,"center");u.putBoolean(e.VizDefConstants.K_SHOW_IN_LEGEND,true);var f=u.putNewStructure(e.VizDefConstants.K_DATA_LABELS);f.putBoolean(e.VizDefConstants.K_ENABLED,true);f.putString(e.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");f.putBoolean(e.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);f.putInteger(e.VizDefConstants.K_DISTANCE,15);var c=f.putNewStructure(e.VizDefConstants.K_STYLE);c.putString(e.VizDefConstants.K_FONT_WEIGHT,e.VizDefConstants.K_BOLD);c.putString(e.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");c.putString(e.VizDefConstants.K_FONT_SIZE,"12px");c.putString(e.VizDefConstants.K_COLOR,"rgb(88,89,91)")};e.RsHiChartWordcloudHelper.prototype.finishRendering=function(){var t=this.getChartData();var i=t.putNewList(e.VizDefConstants.K_SERIES);var r=this.getXList();var n=this.getXListFormatted();var a=r.size();for(var s=0;s<a;s++){var o=i.addNewStructure();o.putString(e.VizDefConstants.K_NAME,this.getXMeasures().get(s));var l=o.putNewList(e.VizDefConstants.K_DATA);var u=r.getListAt(s);var p=n.getListAt(s);for(var g=0;g<u.size();g++){var f=l.addNewStructure();var c=u.getDoubleAt(g);var C=e.XDouble.convertToString(c);if(g<p.size()){C=p.getStringAt(g)}f.putDouble(e.VizDefConstants.K_WEIGHT,c);f.putString(e.VizDefConstants.K_WEIGHT_FORMATTED,C);var _=this.getCategoriesList().get(g);f.putString(e.VizDefConstants.K_NAME,_);f.putString(e.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(f,s,g)}}};e.ReferenceGrid2=function(){};e.ReferenceGrid2.prototype=new e.ReferenceGrid;e.ReferenceGrid2.prototype._ff_c="ReferenceGrid2";e.ReferenceGrid2.createWithName2=function(t,i){var r=new e.ReferenceGrid2;r.setupSimpleGrid(i,false,false);return r};e.ReferenceGrid2.prototype.prepareCellStructure=function(t,i){if(e.notNull(this.m_resultSet)){this.prepareStructure(t,i)}};e.ReferenceGrid2.prototype.formatDataCellValue=function(t){var i;if(t.getXValue()!==null&&t.getXValue().getValueType()===e.XValueType.DOUBLE){var r=t.getXValue().getStringRepresentation();i=e.XNumberFormatter.formatDoubleToString(e.XDouble.convertFromString(r),"#,#.###")}else{i=t.getFormattedValue()}return i};e.SacAnalyticsCell=function(){};e.SacAnalyticsCell.prototype=new e.SacTableCell;e.SacAnalyticsCell.prototype._ff_c="SacAnalyticsCell";e.SacAnalyticsCell._createAnalyticsCell=function(t,i){var r=new e.SacAnalyticsCell;r.setupInternal(t,i);return r};e.SacAnalyticsCell.prototype.m_sortDirection=null;e.SacAnalyticsCell.prototype.m_repetitiveRows=0;e.SacAnalyticsCell.prototype.m_repetitiveColumns=0;e.SacAnalyticsCell.prototype.setupInternal=function(t,i){e.SacTableCell.prototype.setupInternal.call(this,t,i)};e.SacAnalyticsCell.prototype.releaseObject=function(){this.m_sortDirection=null;this.m_repetitiveRows=0;this.m_repetitiveColumns=0;e.SacTableCell.prototype.releaseObject.call(this)};e.SacAnalyticsCell.prototype.getSortDirection=function(){return this.m_sortDirection};e.SacAnalyticsCell.prototype.setSortDirection=function(e){this.m_sortDirection=e};e.SacAnalyticsCell.prototype.getRepetitiveRows=function(){return this.m_repetitiveRows};e.SacAnalyticsCell.prototype.setRepetitiveRows=function(e){this.m_repetitiveRows=e};e.SacAnalyticsCell.prototype.getRepetitiveColumns=function(){return this.m_repetitiveColumns};e.SacAnalyticsCell.prototype.setRepetitiveColumns=function(e){this.m_repetitiveColumns=e};e.SacAnalyticsTable=function(){};e.SacAnalyticsTable.prototype=new e.SacTable;e.SacAnalyticsTable.prototype._ff_c="SacAnalyticsTable";e.SacAnalyticsTable._createAnalyticsTable=function(t){var i=new e.SacAnalyticsTable;i.internalSetup();i.applyTableDefinition(t);return i};e.SacAnalyticsTable.incrementIntMapValueAt=function(t,i){var r=e.XIntegerValue.create(i);if(!t.containsKey(r)){t.put(r,e.XIntegerValue.create(1))}else{t.put(r,e.XIntegerValue.create(t.getByKey(r).getInteger()+1))}};e.SacAnalyticsTable.getIntMapValueAt=function(t,i){var r=e.XIntegerValue.create(i);if(!t.containsKey(r)){return 0}else{return t.getByKey(r).getInteger()}};e.SacAnalyticsTable.prototype.m_dimensionToColorate=null;e.SacAnalyticsTable.prototype.m_dimensionColorPalette=null;e.SacAnalyticsTable.prototype.m_showDimensionTitles=false;e.SacAnalyticsTable.prototype.m_rowIndices=null;e.SacAnalyticsTable.prototype.m_columnIndices=null;e.SacAnalyticsTable.prototype.m_lastRowToFetch=0;e.SacAnalyticsTable.prototype.m_lastColumnToFetch=0;e.SacAnalyticsTable.prototype.m_columnTuplesCount=0;e.SacAnalyticsTable.prototype.m_columnsTotalCount=0;e.SacAnalyticsTable.prototype.m_rowsTotalCount=0;e.SacAnalyticsTable.prototype.m_emptyRowDimensions=false;e.SacAnalyticsTable.prototype.m_columnHeaderAggregation=null;e.SacAnalyticsTable.prototype.m_rowHeaderAggregation=null;e.SacAnalyticsTable.prototype.m_rowKeys=null;e.SacAnalyticsTable.prototype.m_columnKeys=null;e.SacAnalyticsTable.prototype.m_caps=null;e.SacAnalyticsTable.prototype.m_columnValueAggregations=null;e.SacAnalyticsTable.prototype.m_rowValueAggregations=null;e.SacAnalyticsTable.prototype.m_columnTupleFormatters=null;e.SacAnalyticsTable.prototype.m_rowTupleFormatters=null;e.SacAnalyticsTable.prototype.m_columnInserters=null;e.SacAnalyticsTable.prototype.m_rowInserters=null;e.SacAnalyticsTable.prototype.m_columnDeleters=null;e.SacAnalyticsTable.prototype.m_rowDeleters=null;e.SacAnalyticsTable.prototype.m_insertedColumns=null;e.SacAnalyticsTable.prototype.m_insertedRows=null;e.SacAnalyticsTable.prototype.m_columnDimensionMemberIndex=null;e.SacAnalyticsTable.prototype.m_rowDimensionMemberIndex=null;e.SacAnalyticsTable.prototype.m_sortDirections=null;e.SacAnalyticsTable.prototype.m_queryModel=null;e.SacAnalyticsTable.prototype.m_hasDataForRows=false;e.SacAnalyticsTable.prototype.m_insertedColumnAmount=0;e.SacAnalyticsTable.prototype.m_insertedRowAmount=0;e.SacAnalyticsTable.prototype.m_localRowList=null;e.SacAnalyticsTable.prototype.m_hasData=false;e.SacAnalyticsTable.prototype.m_headerEndRow=0;e.SacAnalyticsTable.prototype.m_totalRowDiff=0;e.SacAnalyticsTable.prototype.m_tableDefinitionName=null;e.SacAnalyticsTable.prototype.m_overwriteTexts=null;e.SacAnalyticsTable.prototype.m_userProfile=null;e.SacAnalyticsTable.prototype.m_currentRowsOffset=0;e.SacAnalyticsTable.prototype.m_partial=false;e.SacAnalyticsTable.prototype.m_scaleTextsMap=null;e.SacAnalyticsTable.prototype.internalSetup=function(){e.SacTable.prototype.internalSetup.call(this);this.m_localRowList=e.XList.create();this.m_dimensionColorPalette=e.XListOfString.create();this.m_overwriteTexts=e.XHashMapOfStringByString.create()};e.SacAnalyticsTable.prototype.releaseObject=function(){this.m_userProfile=null;this.m_dimensionToColorate=null;this.m_dimensionColorPalette=e.XObjectExt.release(this.m_dimensionColorPalette);this.m_showDimensionTitles=false;this.m_lastRowToFetch=-1;this.m_columnTuplesCount=-1;this.m_columnsTotalCount=-1;this.m_rowsTotalCount=-1;this.m_emptyRowDimensions=false;this.m_columnHeaderAggregation=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_columnHeaderAggregation);this.m_rowHeaderAggregation=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_rowHeaderAggregation);this.m_rowKeys=e.XObjectExt.release(this.m_rowKeys);this.m_columnKeys=e.XObjectExt.release(this.m_columnKeys);this.m_caps=null;this.m_columnValueAggregations=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_columnValueAggregations);this.m_rowValueAggregations=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_rowValueAggregations);this.m_columnTupleFormatters=e.XObjectExt.release(this.m_columnTupleFormatters);this.m_rowTupleFormatters=e.XObjectExt.release(this.m_rowTupleFormatters);this.m_columnInserters=e.XObjectExt.release(this.m_columnInserters);this.m_columnDeleters=e.XObjectExt.release(this.m_columnDeleters);this.m_rowInserters=e.XObjectExt.release(this.m_rowInserters);this.m_rowDeleters=e.XObjectExt.release(this.m_rowDeleters);this.m_insertedColumns=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_insertedColumns);this.m_insertedRows=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_insertedRows);this.m_columnDimensionMemberIndex=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_columnDimensionMemberIndex);this.m_rowDimensionMemberIndex=e.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_rowDimensionMemberIndex);this.m_scaleTextsMap.clear();this.m_sortDirections=e.XObjectExt.release(this.m_sortDirections);this.m_queryModel=null;this.m_hasDataForRows=false;this.m_insertedColumnAmount=0;this.m_insertedRowAmount=0;this.m_localRowList=e.XObjectExt.release(this.m_localRowList);this.m_hasData=false;this.m_headerEndRow=-1;this.m_totalRowDiff=0;this.m_tableDefinitionName=null;e.SacTable.prototype.releaseObject.call(this)};e.SacAnalyticsTable.prototype.preFill=function(t){var i=t.getCursorColumnsAxis().getRsDimensions().size();var r=t.getCursorRowsAxis().getRsDimensions().size();var n=t.getDataRows();this.m_insertedColumns=e.XSimpleMap.create();this.m_insertedRows=e.XSimpleMap.create();this.m_rowInserters=e.XList.create();this.m_rowDeleters=e.XList.create();this.m_rowTupleFormatters=e.XList.create();this.m_columnInserters=e.XList.create();this.m_columnDeleters=e.XList.create();this.m_columnTupleFormatters=e.XList.create();this.m_columnTuplesCount=t.getDataColumns();this.m_hasDataForRows=n>0&&(this.m_columnTuplesCount>0||r>0);this.m_rowsTotalCount=-1;this.m_columnsTotalCount=-1;this.retrieveRowsTotalCount(t);this.retrieveColumnsTotalCount(t);this.m_columnDimensionMemberIndex=e.XHashMapByString.create();this.m_rowDimensionMemberIndex=e.XHashMapByString.create();this.m_sortDirections=e.XHashMapByString.create();this.clear();this.m_insertedRowAmount=0;this.m_insertedColumnAmount=0;this.m_columnValueAggregations=e.XList.create();this.m_rowValueAggregations=e.XList.create();this.m_queryModel=t.getQueryModel();this.m_caps=this.m_queryModel.getModelCapabilities();this.analyzeSortingOperations();this.m_lastRowToFetch=e.XMath.max(1,n);this.m_rowHeaderAggregation=e.SacTableAggregation.getDimHeader(t.getCursorRowsAxis(),this.m_queryModel,this.m_overwriteTexts);this.m_columnHeaderAggregation=e.SacTableAggregation.getDimHeader(t.getCursorColumnsAxis(),this.m_queryModel,this.m_overwriteTexts);this.m_columnKeys=this.m_columnHeaderAggregation.getKeysAsReadOnlyListOfString();this.m_rowKeys=this.m_rowHeaderAggregation.getKeysAsReadOnlyListOfString();this.m_hasData=this.m_columnTuplesCount>0&&i>0||n>0&&r>0;if(this.m_hasData){this.createHeaderColumns();this.prepareDataColumns(t,0,-1);this.postFormatHeaderRows()}this.createScaleTextsMap();return this.m_hasData};e.SacAnalyticsTable.prototype.prepareDataColumns=function(e,t,i){var r=this.createDataColumns(e,t,i);this.fillHeaderRows(r,this.m_lastColumnToFetch);return r};e.SacAnalyticsTable.prototype.postFormatHeaderRows=function(){var e=this.getHeaderRowList();var t=this.getHeaderColumnList().size();for(var i=0;i<e.size();i++){var r=0;var n=e.get(i);var a=n.getCells();if(a.size()===0){break}var s=a.get(0);var o;if(i===0&&s.getType()===-1){for(r=0;r+1<a.size();r++){o=a.get(r+1);if(o.getType()!==-1){break}}s.setRepetitiveColumns(r)}for(var l=t;l<a.size();l++){s=a.get(l);if(!s.isRepeatedHeader()){for(r=0;l+r+1<a.size();r++){o=a.get(l+r+1);var u=o.getParentColumn();if(u.getTupleIndex()>-1&&!o.isRepeatedHeader()){break}}l=l+r;s.setRepetitiveColumns(r)}}}};e.SacAnalyticsTable.prototype.postFormatHeaderColumns=function(){var t=this.getHeaderRowList();var i=this.getRowList();var r;var n;var a;var s;var o=this.getHeaderColumnList().size();if(o>0&&e.XCollectionUtils.hasElements(t)){a=t.get(0);r=a.getCells().get(0);if(r.getType()===-1){for(s=0;s+1<t.size();s++){n=t.get(s+1).getCells().get(0);if(n.getType()!==-1){break}}r.setRepetitiveRows(s)}}for(var l=0;l<o;l++){if(e.XCollectionUtils.hasElements(i)){for(var u=0;u<i.size();u++){a=i.get(u);if(e.isNull(a)){continue}r=a.getCells().get(l);if(!r.isRepeatedHeader()){for(s=0;u+s+1<i.size();s++){var p=i.get(u+s+1);if(e.isNull(p)){break}n=p.getCells().get(l);if(p.getTupleIndex()>-1&&!n.isRepeatedHeader()){break}}u=u+s;r.setRepetitiveRows(s)}}}}};e.SacAnalyticsTable.prototype.analyzeSortingOperations=function(){var t=this.m_queryModel.getSortingManager();var i=t.getSortingOperations();var r;var n;for(r=0;r<i.size();r++){var a=i.get(r);var s=a.getDirection();if(a.getSortingType().isTypeOf(e.SortType.MEMBER_KEY)){n=a.getDimension();if(this.checkAbstractDimensionSort(n,t)){e.XStream.of(a.getDimension().getMainAttribute().getFields()).filter(function(t){return t.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)}.bind(this)).forEach(function(e){this.getSortDirections().put(e.getName(),s)}.bind(this))}}else if(a.getSortingType().isTypeOf(e.SortType.MEMBER_TEXT)){n=a.getDimension();if(this.checkAbstractDimensionSort(n,t)){e.XStream.of(a.getDimension().getMainAttribute().getFields()).filter(function(t){return t.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_TEXT)}.bind(this)).forEach(function(e){this.getSortDirections().put(e.getName(),s)}.bind(this))}}else if(a.getSortingType().isTypeOf(e.SortType.FIELD)){var o=a.getField();n=o.getDimension();if(this.checkAbstractDimensionSort(n,t)){this.getSortDirections().put(o.getName(),s)}}else if(a.getSortingType().isTypeOf(e.SortType.DATA_CELL_VALUE)){var l=e.SacTableAggregation.getSimplifiedUniqueName(a.getElementPath());this.getSortDirections().put(l,s)}else if(a.getSortingType().isTypeOf(e.SortType.MEASURE)){var u=a.getMeasure();this.getSortDirections().put(u.getName(),s)}}};e.SacAnalyticsTable.prototype.checkAbstractDimensionSort=function(e,t){return!t.hasConflictingSortingOperationForDimension(e)&&(this.m_queryModel.getRowsAxis().contains(e)||this.m_queryModel.getColumnsAxis().contains(e))};e.SacAnalyticsTable.prototype.createHeaderColumns=function(){var e=this.m_rowKeys.size();var t=this.m_columnKeys.size();this.m_emptyRowDimensions=e===0;if(this.m_emptyRowDimensions&&this.m_showDimensionTitles&&t>0){e=1}this.setPreColumnsAmount(e);for(var i=0;i<this.getPreColumnsAmount();i++){this.createNewAnalyticHeaderColumn()}};e.SacAnalyticsTable.prototype.fillHeaderRows=function(t,i){var r;var n;var a=this.m_columnKeys.size();var s;var o;var l;var u=this.getHeaderRowList().size()===0;if(u){for(s=0;s<a;s++){this.addNewAnalyticHeaderRow()}}var p;var g;var f;var c;for(s=0;s<a;s++){o=this.getHeaderRowList().get(s);c=this.m_columnHeaderAggregation.getByKey(this.m_columnKeys.get(s));p=c.getField();o.setFieldName(p.getName());o.setDimensionIndex(c.getDimensionIndex());if(this.getPreColumnsAmount()>0&&this.m_showDimensionTitles){l=o.getCells().get(this.getPreColumnsAmount()-1);if(e.isNull(l)){continue}l.setAllowDragDrop(true);l.setType(c.isMainAttribute()?e.SacTableConstants.CT_COL_DIM_HEADER:e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER);l.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.RIGHT);l.getTableStyle().setVerticalAlignment(e.SacTableCellVerticalAlignment.BOTTOM);l.setPlainString(c.getPlain());l.setFormatted(c.getText());f=c.getDimension();if((c.isMainAttribute()&&this.m_caps.supportsDimensionSorting(f,p.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)?e.SortType.MEMBER_KEY:e.SortType.MEMBER_TEXT)||this.m_caps.supportsFieldSorting(p))&&!f.isMeasureStructure()&&!f.getDimensionType().isTypeOf(e.DimensionType.ACCOUNT)&&!f.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)&&this.getDataColumnsAmount()>1){g=this.m_sortDirections.getByKey(p.getName());if(e.isNull(g)){g=e.XSortDirection.DEFAULT_VALUE}l.setSortDirection(g);l.setLengthAddition(3)}else{l.setLengthAddition(1)}}}var C=t;if(e.XCollectionUtils.hasElements(this.m_columnValueAggregations)&&this.m_columnValueAggregations.size()>t+1&&this.m_columnValueAggregations.get(C)===null){C=C+1}var _=null;var m;var S;for(s=0;s<a;s++){o=this.getHeaderRowList().get(s);var d=o.getCells();for(S=this.getHeaderColumnList().size()+C;S<d.size();S++){l=d.get(S);if(e.isNull(l)){continue}m=l.getParentColumn();var T=m.getTupleIndex();if(i>-1&&T>i){break}if(T>-1){_=this.m_columnValueAggregations.get(T);n=_.getByKey(this.m_columnKeys.get(s));var y=n.getDimension().getName();if(!this.m_columnDimensionMemberIndex.containsKey(y)){this.m_columnDimensionMemberIndex.put(y,e.XHashMapByString.create())}var h=this.m_columnDimensionMemberIndex.getByKey(y);var D=n.getDimensionMemberName();if(!h.containsKey(D)){h.put(D,e.XList.create())}h.getByKey(D).add(e.XIntegerValue.create(S));r=n.getDimensionMemberType();if(r.isTypeOf(e.MemberType.RESULT)||e.OlapComponentType.TOTALS===r){m.setTotalLevel(s);m.setTotalsContext(true);l.setTotalsContext(true)}l.setAllowDragDrop(true);l.setType(n.isMainAttribute()?e.SacTableConstants.CT_COL_DIM_MEMBER:e.SacTableConstants.CT_ATTRIBUTE_COL_DIM_MEMBER);l.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.RIGHT);l.getTableStyle().setVerticalAlignment(e.SacTableCellVerticalAlignment.BOTTOM);l.setRepeatedHeader(n.isRepeatedMemberName());l.setPlainString(n.getPlain());l.setFormatted(n.getText());var R=this.selectDirectAffectingFormatters(this.m_columnTupleFormatters,T,e.AxisType.COLUMNS,y);if(e.notNull(R)){var A=R.getIterator();while(A.hasNext()){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(A.next().getFormattingStyle(),l.getTableStyle())}}if((this.m_caps.supportsDataCellSorting()&&s+1===a||this.m_caps.supportsMeasureSorting()&&n.getDimension().isMeasureStructure()&&!l.isRepeatedHeader())&&this.getDataRowAmount()>1){g=this.m_sortDirections.getByKey(n.getPathKey());if(e.isNull(g)||g===e.XSortDirection.DEFAULT_VALUE){g=this.m_sortDirections.getByKey(n.getDimensionMemberName())}if(e.isNull(g)){g=e.XSortDirection.DEFAULT_VALUE}l.setSortDirection(g);l.setLengthAddition(3)}else{l.setLengthAddition(1)}var V=n.getDrillState();r=n.getDimensionMemberType();f=n.getDimension();var E=f.isHierarchyActive()||f.isUniversalDisplayHierarchyDimension();var v=f.isUniversalDisplayHierarchyDimension()?f.getAxis().getResultAlignment()===e.ResultAlignment.BOTTOM:f.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT;this.setReversedHierarchy(v);var N=e.notNull(V)&&E;if(N){var z=n.getDisplayLevel();l.setLengthAddition(2*z+l.getLengthAddition());l.setInHierarchy(true);l.setHierarchyLevel(z);l.setHierarchyPaddingType(e.SacTableConstants.C_N_HIERARCHY_PADDING_TOP);l.setHierarchyPaddingValue(e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP);l.setShowDrillIcon(e.notNull(V)&&V!==e.DrillState.LEAF&&e.MemberType.RESULT!==r&&e.OlapComponentType.TOTALS!==r);l.setExpanded(V===e.DrillState.EXPANDED||V===e.DrillState.DRILLED)}var L=(N?e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP:0)+e.SacTableConstants.DF_R_N_HEIGHT+e.XMath.div(e.SacTableConstants.DF_R_N_HEIGHT*2*n.getDisplayLevel(),3)+n.getDisplayLevel()*3;if(o.getHeight()<L){o.setDefaultHeight(L)}}}}if(!this.m_emptyRowDimensions){for(s=0;s<this.getPreColumnsAmount();s++){c=this.m_rowHeaderAggregation.getByKey(this.m_rowKeys.get(s));m=this.getHeaderColumnList().get(s);p=c.getField();m.setFieldName(p.getName());m.setDimensionIndex(c.getDimensionIndex())}if(u&&this.m_showDimensionTitles){o=this.addNewAnalyticHeaderRow();o.setTupleIndex(-1);o.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT);var I=this.getPreColumnsAmount();for(s=0;s<I;s++){c=this.m_rowHeaderAggregation.getByKey(this.m_rowKeys.get(s));p=c.getField();l=o.getCells().get(s);l.setAllowDragDrop(true);l.setType(c.isMainAttribute()?e.SacTableConstants.CT_ROW_DIM_HEADER:e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_HEADER);l.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.LEFT);l.getTableStyle().setVerticalAlignment(e.SacTableCellVerticalAlignment.BOTTOM);l.setPlainString(c.getPlain());l.setFormatted(c.getText());f=c.getDimension();if((c.isMainAttribute()&&this.m_caps.supportsDimensionSorting(f,p.getPresentationType().isTypeOf(e.PresentationType.ABSTRACT_KEY)?e.SortType.MEMBER_KEY:e.SortType.MEMBER_TEXT)||this.m_caps.supportsFieldSorting(p))&&!f.isMeasureStructure()&&!f.getDimensionType().isTypeOf(e.DimensionType.ACCOUNT)&&!f.getDimensionType().isTypeOf(e.DimensionType.GENERAL_VERSION)&&this.getDataRowAmount()>1){g=this.m_sortDirections.getByKey(p.getName());if(e.isNull(g)){g=e.XSortDirection.DEFAULT_VALUE}l.setSortDirection(g);l.setLengthAddition(3)}else{l.setLengthAddition(1)}}if(this.getHeaderRowList().size()===1&&o.getCells().size()===this.getPreColumnsAmount()+1){l=o.getCells().get(this.getPreColumnsAmount());l.setType(e.SacTableConstants.CT_EMPTY_AXIS_COLUMN_HEADER);l.setAllowDragDrop(true)}}}this.m_headerEndRow=a-1;this.formatHeaderColumnWidths()};e.SacAnalyticsTable.prototype.selectDirectAffectingFormatters=function(t,i,r,n){var a=null;if(e.notNull(t)&&t.size()>i){var s=t.get(i);if(e.notNull(s)){a=e.XStream.of(s).filter(function(t){return t.getFormattingStyle().getCellFormattingScope()===e.CellFormattingScope.AFFECTED_CELLS&&(t.getAxisType()===null||t.getAxisType()===r)&&this.containsPath(t.getPathOnAxis(),n)}.bind(this)).collect(e.XStreamCollector.toList())}}return a};e.SacAnalyticsTable.prototype.selectGlobalAffectingFormatters=function(t,i,r){var n=null;if(e.notNull(t)&&t.size()>i){var a=t.get(i);if(e.notNull(a)){n=e.XStream.of(a).filter(function(t){return t.getFormattingStyle().getCellFormattingScope()!==e.CellFormattingScope.AFFECTED_CELLS&&t.getFormattingStyle().getCellFormattingScope().isApplicableToAxis(r)&&(t.getAxisType()===null||t.getAxisType()===r)}.bind(this)).collect(e.XStreamCollector.toList())}}return n};e.SacAnalyticsTable.prototype.containsPath=function(t,i){return e.XStream.of(t).anyMatch(function(t){return e.XString.isEqual(t.getDimension().getName(),i)}.bind(this))};e.SacAnalyticsTable.prototype.fillDataRows=function(e,t){this.prepareDataRows(e,t,-1);this.fillDataCells(e,t,0);return this.m_currentRowsOffset};e.SacAnalyticsTable.prototype.createDataColumns=function(t,i,r){if(e.isNull(this.m_columnIndices)){this.m_columnIndices=e.XList.create()}else if(i===0){this.m_columnIndices.clear()}var n=0;var a=i;this.m_lastColumnToFetch=e.XMath.max(1,i+t.getCursorColumnsAxis().getTuplesCount());if(r>-1){this.m_lastColumnToFetch=e.XMath.min(r+1,this.m_lastColumnToFetch)}if(this.m_columnsTotalCount===-1||this.m_columnsTotalCount>i){this.preFillAxis(t.getCursorColumnsAxis(),this.m_columnHeaderAggregation,this.m_columnValueAggregations,this.m_columnTupleFormatters,this.m_columnInserters,this.m_columnDeleters,this.m_insertedColumns,t.getResultSetContainer().getOffsetColumns());if(e.XCollectionUtils.hasElements(this.m_columnValueAggregations)&&this.m_columnValueAggregations.get(i)===null){a=i+1}var s;var o;var l;var u=0;var p=this.m_insertedColumns.getKeysAsIterator();while(p.hasNext()){var g=p.next();if(g.getInteger()<a){n=n+this.m_insertedColumns.getByKey(g).getInteger()}}for(var f=0;f<u&&f<this.m_columnDeleters.size();f++){if(e.XCollectionUtils.hasElements(this.m_columnDeleters.get(f))){n--}}var c=n;for(u=a;u<this.m_lastColumnToFetch;u++){var C=e.XIntegerValue.create(u);if(this.m_columnIndices.contains(C)){e.XLogger.println(e.XStringUtils.concatenate2("DUPLICATE ",C.toString()))}else{this.m_columnIndices.add(C)}var _=e.XCollectionUtils.hasElements(this.m_columnValueAggregations)?this.m_columnValueAggregations.get(u):null;l=e.SacAnalyticsTable.getIntMapValueAt(this.m_insertedColumns,u);this.m_insertedColumnAmount=this.m_insertedColumnAmount+l;for(o=0;o<l;o++){this.addNewAnalyticDataColumnAt(u+c,false);c++}if(this.m_columnDeleters.size()>u&&e.XCollectionUtils.hasElements(this.m_columnDeleters.get(u))){c--;this.m_insertedColumnAmount--}else{s=this.addNewAnalyticDataColumnAt(u+c,true);var m=this.extractStructureMemberWithCellChart(_);if(e.notNull(m)){this.fillCellChart(s,m)}s.setTupleIndex(u);var S=this.selectGlobalAffectingFormatters(this.m_columnTupleFormatters,u,e.AxisType.COLUMNS);if(e.notNull(S)){var d=S.getIterator();while(d.hasNext()){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(d.next().getFormattingStyle(),s.getTableStyle())}}}}l=e.SacAnalyticsTable.getIntMapValueAt(this.m_insertedColumns,u);this.m_insertedColumnAmount=this.m_insertedColumnAmount+l;for(o=0;o<l;o++){this.addNewAnalyticDataColumnAt(u+c,false).setTupleIndex(-1);c++}}return a};e.SacAnalyticsTable.prototype.prepareDataRows=function(t,i,r){if(e.isNull(this.m_rowIndices)){this.m_rowIndices=e.XList.create()}else if(i===0){this.m_rowIndices.clear()}var n=0;var a=i;this.m_lastRowToFetch=e.XMath.max(1,t.getResultSetContainer().getOffsetRows()+t.getCursorRowsAxis().getTuplesCount());if(r>-1){this.m_lastRowToFetch=e.XMath.min(this.m_lastRowToFetch,r+1)}if(this.m_rowsTotalCount===-1||this.m_rowsTotalCount>i){this.preFillAxis(t.getCursorRowsAxis(),this.m_rowHeaderAggregation,this.m_rowValueAggregations,this.m_rowTupleFormatters,this.m_rowInserters,this.m_rowDeleters,this.m_insertedRows,t.getResultSetContainer().getOffsetRows());if(this.m_hasDataForRows){if(!this.m_emptyRowDimensions&&this.m_rowValueAggregations.get(i)===null){a=i+1}var s=this.getPreColumnsAmount();var o;var l;var u;var p;var g;var f;var c=this.m_insertedRows.getKeysAsIterator();while(c.hasNext()){var C=c.next();if(C.getInteger()<a){n=n+this.m_insertedRows.getByKey(C).getInteger()}}for(l=0;l<this.m_rowDeleters.size()&&l<a;l++){if(e.XCollectionUtils.hasElements(this.m_rowDeleters.get(l))){n--}}var _;var m=n;for(f=a;f<this.m_lastRowToFetch;f++){var S=e.XIntegerValue.create(f);if(this.m_rowIndices.contains(S)){e.XLogger.println(e.XStringUtils.concatenate2("DUPLICATE ",S.toString()))}else{this.m_rowIndices.add(S)}var d=this.m_emptyRowDimensions?null:this.m_rowValueAggregations.get(f);_=e.SacAnalyticsTable.getIntMapValueAt(this.m_insertedRows,f);this.m_insertedRowAmount=this.m_insertedRowAmount+_;for(u=0;u<_;u++){p=this.addNewAnalyticDataRowAt(f+m,false);p.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT);m++}if(this.m_rowDeleters.size()>f&&e.XCollectionUtils.hasElements(this.m_rowDeleters.get(f))){m--;this.m_insertedRowAmount--;continue}p=this.addNewAnalyticDataRowAt(f+m,true);var T=this.extractStructureMemberWithCellChart(d);if(e.notNull(T)){this.fillCellChart(p,T);if(p.isShowCellChart()&&p.getCellChartOrientation()===e.SacCellChartOrientation.VERTICAL){p.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT_VERTICAL_CHARTS)}}p.setTupleIndex(f);p.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT);var y=this.selectGlobalAffectingFormatters(this.m_rowTupleFormatters,f,e.AxisType.ROWS);if(e.notNull(y)){var h=y.getIterator();while(h.hasNext()){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(h.next().getFormattingStyle(),p.getTableStyle())}}if(!this.m_emptyRowDimensions){for(l=0;l<s;l++){var D=this.m_rowKeys.get(l);o=d.getByKey(D);var R=o.getDimension().getName();if(!this.m_rowDimensionMemberIndex.containsKey(R)){this.m_rowDimensionMemberIndex.put(R,e.XHashMapByString.create())}var A=this.m_rowDimensionMemberIndex.getByKey(R);var V=o.getDimensionMemberName();if(!A.containsKey(V)){A.put(V,e.XList.create())}A.getByKey(V).add(e.XIntegerValue.create(f));g=p.getCells().get(l);var E=o.getDimensionMemberType();if(E===e.MemberType.RESULT||e.OlapComponentType.TOTALS===E){p.setTotalLevel(l);p.setTotalsContext(true);g.setTotalsContext(true)}g.setAllowDragDrop(true);g.setType(o.isMainAttribute()?e.SacTableConstants.CT_ROW_DIM_MEMBER:e.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER);g.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.LEFT);g.getTableStyle().setVerticalAlignment(e.SacTableCellVerticalAlignment.BOTTOM);g.setRepeatedHeader(o.isRepeatedMemberName());g.setPlainString(o.getPlain());g.setFormatted(o.getText());var v=this.selectDirectAffectingFormatters(this.m_rowTupleFormatters,f,e.AxisType.ROWS,R);if(e.notNull(v)){var N=v.getIterator();while(N.hasNext()){e.OlapVizToPivotConverterUtil.applyTableStyleFromViz(N.next().getFormattingStyle(),g.getTableStyle())}}if((this.m_caps.supportsDataCellSorting()&&l+1===s||this.m_caps.supportsMeasureSorting()&&o.getDimension().isMeasureStructure()&&!g.isRepeatedHeader())&&this.getDataColumnsAmount()>1){var z=this.m_sortDirections.getByKey(o.getPathKey());if(e.isNull(z)||z===e.XSortDirection.DEFAULT_VALUE){z=this.m_sortDirections.getByKey(o.getDimensionMemberName())}if(e.isNull(z)){z=e.XSortDirection.DEFAULT_VALUE}g.setSortDirection(z);g.setLengthAddition(3)}else{g.setLengthAddition(1)}var L=o.getDrillState();E=o.getDimensionMemberType();var I=o.getDimension();var K=I.isHierarchyActive()||I.isUniversalDisplayHierarchyDimension();var O=I.isUniversalDisplayHierarchyDimension()?I.getAxis().getResultAlignment()===e.ResultAlignment.BOTTOM:I.getLowerLevelNodeAlignment()===e.Alignment.CHILDREN_ABOVE_PARENT;this.setReversedHierarchy(O);var F=e.notNull(L)&&K;if(F){var b=o.getDisplayLevel();g.setLengthAddition(2*b+g.getLengthAddition());g.setInHierarchy(true);g.setHierarchyLevel(b);g.setHierarchyPaddingType(e.SacTableConstants.C_N_HIERARCHY_PADDING_LEFT);g.setHierarchyPaddingValue(e.SacTableConstants.DF_C_N_HIERARCHY_PADDING_LEFT);g.setShowDrillIcon(e.notNull(L)&&L!==e.DrillState.LEAF&&e.MemberType.RESULT!==E&&e.OlapComponentType.TOTALS!==E);g.setExpanded(L===e.DrillState.EXPANDED||L===e.DrillState.DRILLED||L===e.DrillState.LEAF_UDH)}}}else if(this.m_showDimensionTitles&&this.m_columnKeys.size()>0){g=p.getCells().get(this.getHeaderColumnList().size()-1);g.setType(e.SacTableConstants.CT_EMPTY_AXIS_ROW_HEADER)}}_=e.SacAnalyticsTable.getIntMapValueAt(this.m_insertedRows,f);this.m_insertedRowAmount=this.m_insertedRowAmount+_;for(u=0;u<_;u++){p=this.addNewAnalyticDataRowAt(f+m,false);p.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT);p.setTupleIndex(-1);m++}}this.retrieveColumnsTotalCount(t);this.retrieveRowsTotalCount(t);this.setDataColumnsAmount(this.m_columnsTotalCount+this.m_insertedColumnAmount);this.setDataRowAmount(this.m_rowsTotalCount+this.m_insertedRowAmount)}this.applyColumnAndRowSizes();this.formatLocalDataColumnWidths();this.postFormatHeaderColumns();this.m_currentRowsOffset=a+n;return this.m_currentRowsOffset};e.SacAnalyticsTable.prototype.retrieveColumnsTotalCount=function(t){this.m_columnsTotalCount=t.getCursorColumnsAxis().getTuplesCountTotal();if(this.m_columnsTotalCount<0){this.m_columnsTotalCount=this.m_columnTuplesCount+10}this.m_columnsTotalCount=e.XMath.max(this.m_columnsTotalCount,t.getDataColumns())};e.SacAnalyticsTable.prototype.retrieveRowsTotalCount=function(t){this.m_rowsTotalCount=t.getCursorRowsAxis().getTuplesCountTotal();if(this.m_rowsTotalCount<0){this.m_rowsTotalCount=this.m_lastRowToFetch+this.m_insertedRowAmount+10}this.m_rowsTotalCount=e.XMath.max(this.m_rowsTotalCount,t.getDataRows())};e.SacAnalyticsTable.prototype.fillDataCells=function(t,i,r){this.applyDataPointStyles();var n=0;var a=0;var s=i;var o=r;var l=t.getResultSetContainer().getOffsetRows();var u=t.getResultSetContainer().getOffsetColumns();var p=this.getRowList();var g=this.getColumnList();this.m_lastRowToFetch=e.XMath.max(1,l+t.getCursorRowsAxis().getTuplesCount());this.m_lastColumnToFetch=e.XMath.max(1,u+t.getCursorColumnsAxis().getTuplesCount());if(e.XCollectionUtils.hasElements(p)&&s<p.size()&&p.get(s)===null){s=s+1}if(e.XCollectionUtils.hasElements(g)&&o<g.size()&&g.get(o)===null){o=o+1}if(this.m_rowsTotalCount===-1||this.m_rowsTotalCount>s){this.m_localRowList.clear();if(this.m_hasDataForRows){var f;var c;var C=this.m_insertedRows.getKeysAsIterator();while(C.hasNext()){var _=C.next();if(_.getInteger()<s){n=n+this.m_insertedRows.getByKey(_).getInteger()}}var m=this.m_insertedColumns.getKeysAsIterator();while(m.hasNext()){var S=m.next();if(S.getInteger()<o){a=a+this.m_insertedColumns.getByKey(S).getInteger()}}for(var d=0;d<this.m_columnDeleters.size()&&d<o;d++){if(e.XCollectionUtils.hasElements(this.m_columnDeleters.get(d))){a--}}var T=p.size();for(var y=n+s;y<T;y++){f=p.get(y);if(e.isNull(f)){break}var h=f.getTupleIndex();if(h>=this.m_lastRowToFetch){break}this.m_localRowList.add(f);if(h>-1){var D=f.getCells();for(var R=this.getPreColumnsAmount()+a+o;R<D.size();R++){c=D.get(R);if(e.isNull(c)){break}var A=c.getParentColumn();var V=A.getTupleIndex();if(V>=this.m_lastColumnToFetch){break}if(f.isShowCellChart()||A.isShowCellChart()){c.setType(e.SacTableConstants.CT_CHART);if(A.isShowCellChart()&&A.getCellChartOrientation()===e.SacCellChartOrientation.VERTICAL){f.setDefaultHeight(e.SacTableConstants.DF_R_N_HEIGHT_VERTICAL_CHARTS)}}if(V>-1){var E=t.getDataCell(V-u,h-l);if(E.isDataEntryEnabled()){c.setType(e.SacTableConstants.CT_INPUT);c.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.RIGHT)}else{c.setType(e.SacTableConstants.CT_VALUE);c.getTableStyle().setHorizontalAlignment(e.SacTableCellHorizontalAlignment.RIGHT)}c.getTableStyle().setVerticalAlignment(e.SacTableCellVerticalAlignment.BOTTOM);var v=this.getFormattedValue(E,h,V);var N=E.getValueException();var z=null;if(N===e.ValueException.UNDEFINED){v="‒";z=e.SacValueSign.UNDEFINED}else if(N!==e.ValueException.NORMAL&&N!==e.ValueException.ZERO){c.setType(e.SacTableConstants.CT_UNBOOKED);v=e.XStringUtils.concatenate3(N.getName(),": ",v);z=e.SacValueSign.UNBOOKED}c.setFormatted(v);c.setFormattingPattern(E.getFormatString());var L;if(N!==e.ValueException.UNDEFINED&&N!==e.ValueException.NULL_VALUE){if(E.getValueType().isNumber()){var I=E.getDouble();L=e.XDoubleValue.create(I);c.setPlain(L);if(N===e.ValueException.ZERO){z=e.SacValueSign.ZERO}else if(I<0){z=e.SacValueSign.POSITIVE}else if(I>0){z=e.SacValueSign.NEGATIVE}}else{c.setPlainString(E.getStringRepresentation());z=e.SacValueSign.NORMAL}}c.setCommentDocumentId(E.getDocumentId());var K=E.getMaxAlertLevel();var O=E.getMaxAlertLevelName();var F=c.addNewExceptionInformation();F.setExceptionName(O);F.setLevel(e.SacAlertLevel.getByLevelValue(K.getLevel()));F.setValueSign(z)}}}}}this.m_columnsTotalCount=t.getCursorColumnsAxis().getTuplesCountTotal();if(this.m_columnsTotalCount<0){this.m_columnsTotalCount=this.m_columnTuplesCount+10}this.m_columnsTotalCount=e.XMath.max(this.m_columnsTotalCount,t.getDataColumns());this.m_rowsTotalCount=t.getCursorRowsAxis().getTuplesCountTotal();if(this.m_rowsTotalCount<0){this.m_rowsTotalCount=this.m_lastRowToFetch+this.m_insertedRowAmount+10}this.m_rowsTotalCount=e.XMath.max(this.m_rowsTotalCount,t.getDataRows());this.setDataColumnsAmount(this.m_columnsTotalCount+this.m_insertedColumnAmount);this.setDataRowAmount(this.m_rowsTotalCount+this.m_insertedRowAmount)}this.m_currentRowsOffset=s+n;this.applyColumnAndRowSizes();this.formatLocalDataColumnWidths();this.postFormatHeaderColumns()};e.SacAnalyticsTable.prototype.getFormattedValue=function(t,i,r){var n=t.getFormattedValue();var a=t.getValueException();var s=t.getCurrencyUnit();var o=false;if(e.notNull(n)&&(a===e.ValueException.NORMAL||a===e.ValueException.ZERO||a===e.ValueException.MIXED_CURRENCIES_OR_UNITS)){var l=t.getValueType();if(l.isTypeOf(e.XValueType.DOUBLE)){var u=!e.XCollectionUtils.hasElements(this.m_rowValueAggregations)?null:this.extractStructureMember(this.m_rowValueAggregations.get(i));var p=!e.XCollectionUtils.hasElements(this.m_columnValueAggregations)?null:this.extractStructureMember(this.m_columnValueAggregations.get(r));var g=e.DataCellNumberFormatterSettings.create(t,u,p);var f=e.XNumberFormatterSettingsFactory.getInstance().merge(g,this.m_userProfile);var c=this.getCurrencyUnitPair(t.getComplexUnit());if(e.notNull(c)){var C=c.getFirstString();var _=c.getSecondString();n=e.XNumberFormatter.formatDoubleToStringUsingSettingsWithCurrency(t.getDouble(),f,C,this.m_scaleTextsMap);if(e.notNull(_)){n=e.XStringUtils.concatenate2(n,_)}o=true}else{n=e.XNumberFormatter.formatDoubleToStringUsingSettingsWithCurrency(t.getDouble(),f,"",this.m_scaleTextsMap)}}else if(l.isTypeOf(e.XValueType.PERCENT)){n=e.XStringUtils.concatenate2(n," %");o=true}else if(l.isTypeOf(e.XValueType.DATE)||l.isTypeOf(e.XValueType.DATE_TIME)){if(e.notNull(this.m_userProfile)&&this.m_userProfile.getDateFormatting()!==null){var m=this.m_userProfile.getDateFormatting();var S=null;var d=e.XDateFormatter.create(m);if(l.isTypeOf(e.XValueType.DATE)){var T=t.getDate();S=e.isNull(T)?null:e.XDateTime.createWithMillis(T.getMilliseconds())}else if(l.isTypeOf(e.XValueType.DATE_TIME)){S=t.getDateTime()}if(e.notNull(S)){n=d.formatDateTime(S)}}}}if(e.isNull(n)){n=" "}if(!o){if(s.hasPrefix()){n=e.XStringUtils.concatenate3(s.getPrefix()," ",n)}if(s.hasSuffix()){n=e.XStringUtils.concatenate3(n," ",s.getSuffix())}}return n};e.SacAnalyticsTable.prototype.getCurrencyUnitPair=function(t){if(e.isNull(t)){return null}var i=null;var r=t.getUnitTypes();if(e.notNull(r)&&r.size()>0){if(e.UnitType.lookup(r.get(0))===e.UnitType.CURRENCY){var n=t.getUnitDescriptions().get(0);if(r.size()>1){var a=e.XStringUtils.concatenate2("/",t.getUnitValues().get(1));i=e.XPairOfString.create(n,a)}else{i=e.XPairOfString.create(n,null)}}else if(r.size()===1&&e.UnitType.lookup(r.get(0))===e.UnitType.UNIT){var s=e.XStringUtils.concatenate2(" ",t.getUnitValues().get(0));i=e.XPairOfString.create("",s)}}return i};e.SacAnalyticsTable.prototype.extractStructureMember=function(t){var i=null;if(e.notNull(t)){var r=t.getValuesAsReadOnlyList();for(var n=0;n<r.size();n++){var a=r.get(n);var s=a.getDimension();if(s.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){i=s.getStructureMemberByAliasOrMember(a.getDimensionMemberName());break}}}return i};e.SacAnalyticsTable.prototype.formatLocalDataColumnWidths=function(){this.formatWidthList(this.m_localRowList)};e.SacAnalyticsTable.prototype.fillCellChart=function(t,i){if(e.notNull(i)&&i.isShowCellChart()){var r=i.getCellChartType();if(e.isNull(r)||r===e.CellChartType.NONE){r=e.CellChartType.BAR}var n=i.getAliasOrMemberName();t.setShowCellChart(true);t.setCellChartType(e.OlapVizToPivotConverterUtil.getCellChartTypeFromViz(r));t.setCellChartMemberName(n);t.getTableStyle().setCellChartLineColor(i.getCellChartLineColor());t.getTableStyle().setCellChartBarColor(i.getCellChartBarColor());t.setHideNumberForCellChart(i.isHideNumberForCellChart());t.setCellChartOrientation(e.OlapVizToPivotConverterUtil.getCellChartOrientationFromViz(i.getCellChartOrientation()))}};e.SacAnalyticsTable.prototype.extractStructureMemberWithCellChart=function(t){var i=null;if(e.notNull(t)){var r=t.getValuesAsReadOnlyList();for(var n=0;n<r.size();n++){var a=r.get(n);var s=a.getDimension();if(s.getDimensionType().isTypeOf(e.DimensionType.ABSTRACT_STRUCTURE)){i=s.getStructureMemberByAliasOrMember(a.getDimensionMemberName());if(e.notNull(i)&&!i.isShowCellChart()){i=null}break}}}return i};e.SacAnalyticsTable.prototype.preFillAxis=function(t,i,r,n,a,s,o,l){t.setTupleCursorBeforeStart();var u=t.getType();if(l===0){e.XCollectionUtils.releaseEntriesFromCollection(r);r.clear();n.clear();a.clear();s.clear()}var p=r.size();var g=null;if(t.hasNextTuple()){var f;if(l===p){if(p>0){g=r.get(p-1)}}else{for(var c=p;c<=l;c++){r.add(null);n.add(null);a.add(null);s.add(null)}var C=false;if(l<p){g=r.get(l-1);if(e.notNull(g)){C=true}}t.nextTuple();g=e.SacTableAggregation.getMemberHeader(t,i,g,this.m_overwriteTexts);if(C){r.set(l,g);f=e.SacTableAggregation.remapToMemberPath(g);n.set(l,this.getPathFormat(f,u));a.set(l,this.getPathInserter(f,u));s.set(l,this.getPathHider(f,u))}var _=l+1;while(t.hasNextTuple()&&_<p){t.nextTuple();g=e.SacTableAggregation.getMemberHeader(t,i,g,this.m_overwriteTexts);r.set(_,g);f=e.SacTableAggregation.remapToMemberPath(g);n.set(_,this.getPathFormat(f,u));a.set(_,this.getPathInserter(f,u));s.set(_,this.getPathHider(f,u));_++}}while(t.hasNextTuple()){t.nextTuple();g=e.SacTableAggregation.getMemberHeader(t,i,g,this.m_overwriteTexts);r.add(g);f=e.SacTableAggregation.remapToMemberPath(g);n.add(this.getPathFormat(f,u));a.add(this.getPathInserter(f,t.getType()));s.add(this.getPathHider(f,t.getType()))}}o.clear();for(var m=0;m<a.size();m++){var S=a.get(m);if(e.notNull(S)){for(var d=0;d<S.size();d++){var T=S.get(d);e.SacAnalyticsTable.incrementIntMapValueAt(o,m+T.getInsertOffset())}}}};e.SacAnalyticsTable.prototype.applyDataPointStyles=function(){this.clearDataPointStyles();var t=this.getAvailableDataPointStyle();if(e.XCollectionUtils.hasElements(t)){for(var i=0;i<t.size();i++){var r=t.get(i);var n=this.addNewDataPointStyle();e.OlapVizToPivotConverterUtil.applyDataPointStyleFromViz(r,n)}}};e.SacAnalyticsTable.prototype.getAvailableDataPointStyle=function(){var t=null;if(e.notNull(this.m_tableDefinitionName)&&e.notNull(this.m_queryModel)){var i=this.m_queryModel.getVisualizationManager().getVisualizationDefinitionByName(this.m_tableDefinitionName);if(e.notNull(i)){t=i.getDataPointStyles()}}return t};e.SacAnalyticsTable.prototype.getPathFormat=function(t,i){var r=e.XList.create();var n=this.getTupleFormatting();if(e.XCollectionUtils.hasElements(n)){for(var a=0;a<n.size();a++){var s=n.get(a);var o=s.getAxisType();if((e.isNull(o)||o===i)&&s.matchesMap(t,false)){r.add(s)}}}return r};e.SacAnalyticsTable.prototype.getPathInserter=function(t,i){var r=e.XList.create();var n=this.getInsertedCells();if(e.XCollectionUtils.hasElements(n)){for(var a=0;a<n.size();a++){var s=n.get(a);if(s.getAxisType()===i&&s.matchesMap(t,true)){r.add(s)}}}return r};e.SacAnalyticsTable.prototype.getPathHider=function(t,i){var r=e.XList.create();var n=this.getHiddenCells();if(e.XCollectionUtils.hasElements(n)){for(var a=0;a<n.size();a++){var s=n.get(a);if(s.getAxisType()===i&&s.matchesMap(t,true)){r.add(s)}}}return r};e.SacAnalyticsTable.prototype.isShowDimensionTitles=function(){return this.m_showDimensionTitles};e.SacAnalyticsTable.prototype.setShowDimensionTitles=function(e){if(e!==this.m_showDimensionTitles){this.m_showDimensionTitles=e;if(this.m_hasData){this.adaptCellLayout()}}};e.SacAnalyticsTable.prototype.adaptCellLayout=function(){if(this.m_emptyRowDimensions){if(this.m_showDimensionTitles&&this.m_columnKeys.size()>0){this.createNewAnalyticHeaderColumn();this.setPreColumnsAmount(1)}else{this.clearHeaderColumnList();this.setPreColumnsAmount(0)}}var e=this.getHeaderRowList().size();this.clearHeaderRowList();this.fillHeaderRows(0,-1);var t=this.getHeaderRowList().size();this.m_totalRowDiff=t-e};e.SacAnalyticsTable.prototype.getDimensionToColorate=function(){return this.m_dimensionToColorate};e.SacAnalyticsTable.prototype.setDimensionToColorate=function(e){this.m_dimensionToColorate=e};e.SacAnalyticsTable.prototype.getDimensionColorPalette=function(){return this.m_dimensionColorPalette};e.SacAnalyticsTable.prototype.setDimensionColorPalette=function(e){this.m_dimensionColorPalette=e};e.SacAnalyticsTable.prototype.getTupleFormatting=function(){var t=null;if(e.notNull(this.m_tableDefinitionName)&&e.notNull(this.m_queryModel)){var i=this.m_queryModel.getVisualizationManager().getVisualizationDefinitionByName(this.m_tableDefinitionName);if(e.notNull(i)){t=i.getTupleFormattings()}}return t};e.SacAnalyticsTable.prototype.getInsertedCells=function(){var t=null;if(e.notNull(this.m_tableDefinitionName)&&e.notNull(this.m_queryModel)){var i=this.m_queryModel.getVisualizationManager().getVisualizationDefinitionByName(this.m_tableDefinitionName);if(e.notNull(i)){t=i.getInsertedCells()}}return t};e.SacAnalyticsTable.prototype.getHiddenCells=function(){var t=null;if(e.notNull(this.m_tableDefinitionName)&&e.notNull(this.m_queryModel)){var i=this.m_queryModel.getVisualizationManager().getVisualizationDefinitionByName(this.m_tableDefinitionName);if(e.notNull(i)){t=i.getHiddenCells()}}return t};e.SacAnalyticsTable.prototype.applyColumnAndRowSizes=function(){if(e.notNull(this.m_tableDefinitionName)&&e.notNull(this.m_queryModel)&&!this.m_queryModel.isReleased()){var t=this.m_queryModel.getVisualizationManager().getVisualizationDefinitionByName(this.m_tableDefinitionName);if(e.notNull(t)){var i=t.getFixedPixelHeightsForRows();var r=i.getKeysAsIterator();var n;var a;var s=this.getHeaderRowList().size();while(r.hasNext()){a=r.next();n=a.getInteger();var o=i.getByKey(a).getInteger();if(n<s){this.getHeaderRowList().get(n).setHeight(o)}else if(n-s<this.getRowList().size()){var l=this.getRowList().get(n-s);if(e.notNull(l)){l.setHeight(o)}}}var u=t.getFixedPixelWidthsForColumns();r=u.getKeysAsIterator();s=this.getHeaderColumnList().size();while(r.hasNext()){a=r.next();n=a.getInteger();var p=u.getByKey(a).getInteger();if(n<s){this.getHeaderColumnList().get(n).setWidth(p)}else if(n-s<this.getColumnList().size()){var g=this.getColumnList().get(n-s);if(e.notNull(g)){g.setWidth(p)}}}}}};e.SacAnalyticsTable.prototype.getQueryModel=function(){return this.m_queryModel};e.SacAnalyticsTable.prototype.addNewAnalyticHeaderRow=function(){var t=e.SacAnalyticsRow.createAnalyticsRow(this);this.addHeaderRow(t);return t};e.SacAnalyticsTable.prototype.addNewAnalyticDataRowAt=function(t,i){var r=e.SacAnalyticsRow.createAnalyticsRow(this);this.addDataRowAt(t,r,i);return r};e.SacAnalyticsTable.prototype.addNewAnalyticDataColumnAt=function(t,i){var r=e.SacAnalyticsColumn.createAnalyticsColumn(this);this.addDataColumnAt(t,r,i);return r};e.SacAnalyticsTable.prototype.getColumnsTotalCount=function(){return this.m_hasData?e.XMath.max(0,this.getPreColumnsAmount())+this.m_insertedColumnAmount+e.XMath.max(0,this.m_columnsTotalCount):0};e.SacAnalyticsTable.prototype.getDataColumnsTotalCount=function(){return this.m_hasData?e.XMath.max(0,this.m_columnsTotalCount):0};e.SacAnalyticsTable.prototype.getRowsTotalCount=function(){return this.m_hasData?e.XMath.max(0,this.getHeaderRowList().size())+this.m_insertedRowAmount+e.XMath.max(0,this.m_rowsTotalCount):0};e.SacAnalyticsTable.prototype.getDataRowAmount=function(){return this.m_hasData?this.m_insertedRowAmount+e.XMath.max(0,this.m_rowsTotalCount):0};e.SacAnalyticsTable.prototype.getDataRowsTotalCount=function(){return this.m_hasData?e.XMath.max(0,this.m_rowsTotalCount):0};e.SacAnalyticsTable.prototype.getColumnsLoadedCount=function(){return this.m_hasData?e.XMath.max(0,this.getPreColumnsAmount())+this.m_insertedColumnAmount+(e.XCollectionUtils.hasElements(this.getColumnList())?e.XStream.of(this.getColumnList()).filter(function(t){return e.notNull(t)}.bind(this)).countItems():0):0};e.SacAnalyticsTable.prototype.getRowsLoadedCount=function(){return this.m_hasData?e.XMath.max(0,this.getHeaderRowList().size())+(e.XCollectionUtils.hasElements(this.getRowList())?e.XStream.of(this.getRowList()).filter(function(t){return e.notNull(t)}.bind(this)).countItems():0):0};e.SacAnalyticsTable.prototype.getTitle=function(){var t=e.SacTable.prototype.getTitle.call(this);if(e.isNull(t)&&e.notNull(this.m_queryModel)){t=this.m_queryModel.getText();if(e.XStringUtils.isNullOrEmpty(t)){t=this.m_queryModel.getName()}if(e.XStringUtils.isNullOrEmpty(t)){t="Query Model without a name"}}return t};e.SacAnalyticsTable.prototype.getHeaderEndRow=function(){return this.m_headerEndRow};e.SacAnalyticsTable.prototype.getLocalRowList=function(){return this.m_localRowList};e.SacAnalyticsTable.prototype.getSortDirections=function(){return this.m_sortDirections};e.SacAnalyticsTable.prototype.getTotalRowDiff=function(){return this.m_totalRowDiff};e.SacAnalyticsTable.prototype.setTotalRowDiff=function(e){this.m_totalRowDiff=e};e.SacAnalyticsTable.prototype.newHeaderRow=function(){return this.addNewAnalyticHeaderRow()};e.SacAnalyticsTable.prototype.createNewHeaderColumn=function(){return this.createNewAnalyticHeaderColumn()};e.SacAnalyticsTable.prototype.createNewDataColumn=function(){return this.createNewAnalyticDataColumn()};e.SacAnalyticsTable.prototype.createNewDataColumnAt=function(e){return this.createNewAnalyticDataColumnAt(e)};e.SacAnalyticsTable.prototype.createNewAnalyticHeaderColumn=function(){var t=e.SacAnalyticsColumn.createAnalyticsColumn(this);this.addHeaderColumn(t);return t};e.SacAnalyticsTable.prototype.createNewAnalyticDataColumn=function(){var t=e.SacAnalyticsColumn.createAnalyticsColumn(this);this.addDataColumn(t);return t};e.SacAnalyticsTable.prototype.createNewAnalyticDataColumnAt=function(t){var i=e.SacAnalyticsColumn.createAnalyticsColumn(this);this.addDataColumnAt(t,i,false);return i};e.SacAnalyticsTable.prototype.newDataRow=function(){return this.addNewAnalyticDataRowAt(this.getRowList().size(),false)};e.SacAnalyticsTable.prototype.newDataRowAt=function(e,t){return this.addNewAnalyticDataRowAt(e,t)};e.SacAnalyticsTable.prototype.isEmptyRowDimensions=function(){return this.m_emptyRowDimensions};e.SacAnalyticsTable.prototype.applyTableDefinition=function(t){if(e.notNull(t)){this.m_tableDefinitionName=t.getName();this.m_dimensionColorPalette.clear();this.m_dimensionColorPalette.addAll(t.getDimensionColorPalette());this.m_queryModel=t.getQueryModel();var i=t.getApplicationSettings();if(e.notNull(i)){if(i.getUserProfile()!==null){this.m_userProfile=i.getUserProfile()}if(i.getWidgetWidth()>0){this.setWidth(i.getWidgetWidth())}if(i.getWidgetHeight()>0){this.setHeight(i.getWidgetHeight())}if(i.getMaxColumns()>0){this.setMaxColumns(i.getMaxColumns())}}this.setDimensionToColorate(t.getDimensionToColorate());this.setStripeDataRows(t.isStripeDataRows());this.setStripeDataColumns(t.isStripeDataColumns());this.setFreezeHeaderRows(t.isFreezeHeaderRows());this.setFreezeHeaderColumns(t.isFreezeHeaderColumns());this.setFreezeUpToColumn(t.getFreezeUpToColumn());this.setFreezeUpToRow(t.getFreezeUpToRow());this.setShowFreezeLines(t.isShowFreezeLines());this.setShowGrid(t.isShowGrid());this.setShowDimensionTitles(t.isShowDimensionTitles());this.setRepetitiveHeaderNames(t.isRepetitiveMemberNames());this.setMergeRepetitiveHeaderCells(t.isMergeRepetitiveMemberCells());this.setShowCoordinateHeader(t.isShowCoordinateHeader());this.setHeaderColor(t.getHeaderColor());this.setTotalLevel6Color(t.getTotalLevel6Color());this.setTotalLevel5Color(t.getTotalLevel5Color());this.setTotalLevel4Color(t.getTotalLevel4Color());this.setTotalLevel3Color(t.getTotalLevel3Color());this.setTotalLevel2Color(t.getTotalLevel2Color());this.setTotalLevel1Color(t.getTotalLevel1Color());this.setTotalLevel0Color(t.getTotalLevel0Color());this.applyColumnAndRowSizes()}};e.SacAnalyticsTable.prototype.fillEmptyTable=function(t){var i=this.m_queryModel.getRowsAxis().size();var r=0;this.m_insertedColumns=e.XSimpleMap.create();this.m_insertedRows=e.XSimpleMap.create();this.m_rowInserters=e.XList.create();this.m_rowDeleters=e.XList.create();this.m_rowTupleFormatters=e.XList.create();this.m_columnInserters=e.XList.create();this.m_columnDeleters=e.XList.create();this.m_columnTupleFormatters=e.XList.create();this.m_columnTuplesCount=0;this.m_hasDataForRows=r>0&&(this.m_columnTuplesCount>0||i>0);this.m_rowsTotalCount=-1;this.m_columnsTotalCount=-1;this.m_columnDimensionMemberIndex=e.XHashMapByString.create();this.m_rowDimensionMemberIndex=e.XHashMapByString.create();this.m_sortDirections=e.XHashMapByString.create();this.clear();this.m_insertedRowAmount=0;this.m_insertedColumnAmount=0;this.m_columnValueAggregations=e.XList.create();this.m_rowValueAggregations=e.XList.create();this.m_caps=this.m_queryModel.getModelCapabilities();this.analyzeSortingOperations();this.setShowDimensionTitles(true);this.m_lastRowToFetch=e.XMath.max(1,r);this.m_hasData=false;this.m_localRowList.clear();this.m_columnHeaderAggregation=e.SacTableAggregation.getEmptyDimHeader(this.m_queryModel.getColumnsAxis(),this.m_queryModel,this.m_overwriteTexts);this.m_rowHeaderAggregation=e.SacTableAggregation.getEmptyDimHeader(this.m_queryModel.getRowsAxis(),this.m_queryModel,this.m_overwriteTexts);this.m_columnKeys=this.m_columnHeaderAggregation.getKeysAsReadOnlyListOfString();this.m_rowKeys=this.m_rowHeaderAggregation.getKeysAsReadOnlyListOfString();this.createHeaderColumns();this.fillHeaderRows(0,-1);this.postFormatHeaderRows()};e.SacAnalyticsTable.prototype.getIndexOfFirstUndefinedRowAfter=function(e){var t=e;var i=this.getRowList();var r=i.size();var n=-1;while(t<r&&i.get(t)!==null){var a=i.get(t).getTupleIndex();if(a>-1){n=a}t++}if(n>-1){n=n+1}else{n=t}return n};e.SacAnalyticsTable.prototype.getIndexOfLastUndefinedRowBefore=function(e){var t=e;var i=this.getRowList();var r=i.size();var n=-1;while(t<r&&t>-1&&i.get(t)!==null){var a=i.get(t).getTupleIndex();if(a>-1){n=a}t--}if(n>-1){n=n-1}else{n=t}return n};e.SacAnalyticsTable.prototype.getIndexOfFirstUndefinedColumnAfter=function(e){var t=e;var i=this.getColumnList();var r=i.size();var n=-1;while(t<r&&i.get(t)!==null){var a=i.get(t).getTupleIndex();if(a>-1){n=a}t++}if(n>-1){n=n+1}else{n=t}return n};e.SacAnalyticsTable.prototype.getIndexOfLastUndefinedColumnBefore=function(e){var t=e;var i=this.getColumnList();var r=i.size();var n=-1;while(t<r&&t>-1&&i.get(t)!==null){var a=i.get(t).getTupleIndex();if(a>-1){n=a}t--}if(n>-1){n=n-1}else{n=t}return n};e.SacAnalyticsTable.prototype.getIndexOfFirstIncompleteTileColumnAfter=function(e,t,i,r){var n=e;var a=this.getColumnList();var s=a.size();var o=-1;if(this.checkRowsRange(i,r)){while(n<s&&this.checkColumnComplete(a.get(n),n,i,r)){var l=a.get(n).getTupleIndex();if(l>-1){o=l}n++}}if(o>-1){o=o+1}else{o=n}return o};e.SacAnalyticsTable.prototype.getIndexOfLastIncompleteTileColumnBefore=function(e,t,i,r){var n=t;var a=this.getColumnList();var s=a.size();var o=-1;if(this.checkRowsRange(i,r)){while(n<s&&n>-1&&this.checkColumnComplete(a.get(n),n,i,r)){var l=a.get(n).getTupleIndex();if(l>-1){o=l}n--}}if(o>-1){o=o-1}else{o=n}return o};e.SacAnalyticsTable.prototype.getIndexOfFirstIncompleteTileRowAfter=function(e,t,i,r){var n=i;var a=this.getRowList();var s=a.size();var o=-1;if(this.checkColumnsRange(e,t)){while(n<s&&this.checkRowComplete(a.get(n),e,t)){var l=a.get(n).getTupleIndex();if(l>-1){o=l}n++}}if(o>-1){o=o+1}else{o=n}return o};e.SacAnalyticsTable.prototype.getIndexOfLastIncompleteTileRowBefore=function(e,t,i,r){var n=r;var a=this.getRowList();var s=a.size();var o=-1;if(this.checkColumnsRange(e,t)){while(n<s&&n>-1&&this.checkRowComplete(a.get(n),e,t)){var l=a.get(n).getTupleIndex();if(l>-1){o=l}n--}}if(o>-1){o=o-1}else{o=n}return o};e.SacAnalyticsTable.prototype.checkColumnComplete=function(t,i,r,n){var a=false;if(e.notNull(t)){var s=i+this.getPreColumnsAmount();var o=this.getRowList();var l=o.size();a=r<l&&n<l;for(var u=r;u<=n;u++){var p=o.get(u);if(e.isNull(p)||p.getCells().size()<=s||p.getCells().get(s)===null||p.getCells().get(s).getType()===-1){a=false;break}}}return a};e.SacAnalyticsTable.prototype.checkRowComplete=function(t,i,r){var n=false;if(e.notNull(t)){var a=t.getCells();var s=a.size();n=i<s&&r<s;for(var o=i;o<=r;o++){if(a.get(o)===null||a.get(o).getType()===-1){n=false;break}}}return n};e.SacAnalyticsTable.prototype.checkColumnsRange=function(e,t){return this.checkListRange(this.getColumnList(),e,t)};e.SacAnalyticsTable.prototype.checkRowsRange=function(e,t){return this.checkListRange(this.getRowList(),e,t)};e.SacAnalyticsTable.prototype.checkListRange=function(e,t,i){var r=false;var n=e.size();if(t<=n&&i<n){r=true;for(var a=t;a<=i;a++){if(e.get(a)===null){r=false;break}}}return r};e.SacAnalyticsTable.prototype.createScaleTextsMap=function(){this.m_scaleTextsMap=e.XHashMapOfStringByString.create();this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_3"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_SHORT_THOUSAND));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_6"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_SHORT_MILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.SHORT.getName(),"_9"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_SHORT_BILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_3"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_LONG_THOUSAND));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_6"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_LONG_MILLION));this.m_scaleTextsMap.put(e.XStringUtils.concatenate2(e.ScaleFormat.LONG.getName(),"_9"),this.m_overwriteTexts.getByKey(e.SacTableConstants.S_SCALE_LONG_BILLION));return};e.SacAnalyticsTable.prototype.getColumnDimensionMemberIndex=function(){return this.m_columnDimensionMemberIndex};e.SacAnalyticsTable.prototype.getRowDimensionMemberIndex=function(){return this.m_rowDimensionMemberIndex};e.SacAnalyticsTable.prototype.getColumnEmWidths=function(){var t=e.XList.create();var i;var r=this.getHeaderColumnList();var n=r.size();for(i=0;i<n;i++){t.add(e.XIntegerValue.create(r.get(i).getDefaultEmWidth()))}var a=this.getColumnList();n=a.size();var s=0;var o;for(i=0;i<n;i++){o=a.get(i);if(e.isNull(o)){break}var l=o.getDefaultEmWidth();t.add(e.XIntegerValue.create(l));s=s+l}var u=i===0?0:e.XMath.div(s,i);for(;i<n;i++){o=a.get(i);if(e.isNull(o)){t.add(e.XIntegerValue.create(u))}else{t.add(e.XIntegerValue.create(o.getDefaultEmWidth()))}}var p=this.getDataColumnsTotalCount();var g=this.getMaxColumns();for(;i<e.XMath.min(p,g===0?p:g);i++){t.add(e.XIntegerValue.create(u))}return t};e.SacAnalyticsTable.prototype.putOverwriteText=function(e,t){this.m_overwriteTexts.put(e,t)};e.SacAnalyticsTable.prototype.getCurrentRowsOffset=function(){return this.m_currentRowsOffset};e.SacAnalyticsTable.prototype.isPartial=function(){return this.m_partial};e.SacAnalyticsTable.prototype.setPartial=function(e){this.m_partial=e};e.SacAnalyticsColumn=function(){};e.SacAnalyticsColumn.prototype=new e.SacTableColumn;e.SacAnalyticsColumn.prototype._ff_c="SacAnalyticsColumn";e.SacAnalyticsColumn.createAnalyticsColumn=function(t){var i=new e.SacAnalyticsColumn;i.m_tupleIndex=-1;i.m_dimensionIndex=-1;i.setupInternal(t);return i};e.SacAnalyticsColumn.prototype.m_tupleIndex=0;e.SacAnalyticsColumn.prototype.m_fieldName=null;e.SacAnalyticsColumn.prototype.m_dimensionIndex=0;e.SacAnalyticsColumn.prototype.releaseObject=function(){this.m_tupleIndex=-1;this.m_fieldName=null;this.m_dimensionIndex=-1;e.SacTableColumn.prototype.releaseObject.call(this)};e.SacAnalyticsColumn.prototype.getTupleIndex=function(){return this.m_tupleIndex};e.SacAnalyticsColumn.prototype.setTupleIndex=function(e){this.m_tupleIndex=e};e.SacAnalyticsColumn.prototype.getFieldName=function(){return this.m_fieldName};e.SacAnalyticsColumn.prototype.setFieldName=function(e){this.m_fieldName=e};e.SacAnalyticsColumn.prototype.getDimensionIndex=function(){return this.m_dimensionIndex};e.SacAnalyticsColumn.prototype.setDimensionIndex=function(e){this.m_dimensionIndex=e};e.SacAnalyticsRow=function(){};e.SacAnalyticsRow.prototype=new e.SacTableRow;e.SacAnalyticsRow.prototype._ff_c="SacAnalyticsRow";e.SacAnalyticsRow.createAnalyticsRow=function(t){var i=new e.SacAnalyticsRow;i.m_tupleIndex=-1;i.m_dimensionIndex=-1;i.setupInternal(t);return i};e.SacAnalyticsRow.prototype.m_tupleIndex=0;e.SacAnalyticsRow.prototype.m_fieldName=null;e.SacAnalyticsRow.prototype.m_dimensionIndex=0;e.SacAnalyticsRow.prototype.releaseObject=function(){this.m_tupleIndex=-1;this.m_fieldName=null;this.m_dimensionIndex=-1;e.SacTableRow.prototype.releaseObject.call(this)};e.SacAnalyticsRow.prototype.getTupleIndex=function(){return this.m_tupleIndex};e.SacAnalyticsRow.prototype.setTupleIndex=function(e){this.m_tupleIndex=e};e.SacAnalyticsRow.prototype.addNewAnalyticsCell=function(){var t=this.getCells().size();var i=this.getReferenceColumn(t);var r=e.SacAnalyticsCell._createAnalyticsCell(this,i);this.addCell(r);return r};e.SacAnalyticsRow.prototype.addNewAnalyticsCellAt=function(t,i){var r=this.getCells().size();for(;r<t;r++){this.addCell(null)}if(i&&r===t){this.addCell(null)}var n=e.SacAnalyticsCell._createAnalyticsCell(this,this.getReferenceColumn(t));if(i){this.setCellAt(t,n)}else{this.insertCellAt(t,n)}return n};e.SacAnalyticsRow.prototype.getFieldName=function(){return this.m_fieldName};e.SacAnalyticsRow.prototype.setFieldName=function(e){this.m_fieldName=e};e.SacAnalyticsRow.prototype.getDimensionIndex=function(){return this.m_dimensionIndex};e.SacAnalyticsRow.prototype.setDimensionIndex=function(e){this.m_dimensionIndex=e};e.SacAnalyticsRow.prototype.addNewCell=function(){return this.addNewAnalyticsCell()};e.SacAnalyticsRow.prototype.insertNewCellAtWithColumn=function(e,t,i){return this.addNewAnalyticsCellAt(e,i)};e.OlapDataPrg=function(){};e.OlapDataPrg.prototype=new e.DfShellProgramWithApplication;e.OlapDataPrg.prototype._ff_c="OlapDataPrg";e.OlapDataPrg.SYSTEM_NAME="system";e.OlapDataPrg.QUERY="query";e.OlapDataPrg.OUTPUT="output";e.OlapDataPrg.main=function(){e.KernelNativeModule.getInstance();var t=e.KernelBoot.createByName("olapdata");t.setArgument("system","KIW");t.setArgument("query","query:[0BICS_C03_BICSTEST_Q0000]");t.setDefaultSyncType(e.SyncType.BLOCKING);t.runFull()};e.OlapDataPrg.prototype.newProgram=function(){var t=new e.OlapDataPrg;t.setup();return t};e.OlapDataPrg.prototype.getProgramName=function(){return"olapdata"};e.OlapDataPrg.prototype.doSetupProgramMetadata=function(t){e.DfShellProgramWithApplication.prototype.doSetupProgramMetadata.call(this,t);t.addMandatoryOption(e.OlapDataPrg.SYSTEM_NAME,"The system name","",e.XValueType.STRING);t.addMandatoryOption(e.OlapDataPrg.QUERY,"The query name","",e.XValueType.STRING);t.addOption(e.OlapDataPrg.OUTPUT,"Output DOM id. If not given, the output is written on the console","",e.XValueType.STRING)};e.OlapDataPrg.prototype.runProcess=function(){this.writeToOutput("Initializing Query Manager...");var t=this.getApplication();var i=this.getArguments();var r=i.getStringByKey(e.OlapDataPrg.SYSTEM_NAME);var n=i.getStringByKey(e.OlapDataPrg.QUERY);var a=e.QueryServiceConfig.createWithDataSourceName(t,r,n);a.processQueryManagerCreation(null,this,null);return false};e.OlapDataPrg.prototype.onQueryManagerCreated=function(e,t,i){if(e.hasErrors()){this.writeToOutput(e.getSummary())}else{this.writeToOutput("Loading Resultset...");t.processQueryExecution(null,this,null)}};e.OlapDataPrg.prototype.onQueryExecuted=function(t,i,r){if(t.hasErrors()){this.writeToOutput(t.getSummary())}else{var n=i.getClassicResultSet();var a=e.ReferenceGrid.create(n);var s=a.exportToAscii(30);this.writeToOutput(e.XStringUtils.concatenate3("<pre>",s,"</pre>"))}};e.OlapDataPrg.prototype.writeToOutput=function(t){var i=this.getArguments();var r=i.getStringByKey(e.OlapDataPrg.OUTPUT);if(e.XStringUtils.isNotNullAndNotEmpty(r)){e.DocumentEnv.setStringAtId(r,t)}else{this.println(t)}};e.RsVizTableContainer=function(){};e.RsVizTableContainer.prototype=new e.RsVizVisualizationContainer;e.RsVizTableContainer.prototype._ff_c="RsVizTableContainer";e.RsVizTableContainer.create=function(t){var i=new e.RsVizTableContainer;i.setupVisualization(t);i.setupAction(null,null,null,t);return i};e.RsVizTableContainer.prototype.m_modelJson=null;e.RsVizTableContainer.prototype.m_rowList=null;e.RsVizTableContainer.prototype.m_columnTuples=null;e.RsVizTableContainer.prototype.m_rowTuples=null;e.RsVizTableContainer.prototype.m_columnDimensions=null;e.RsVizTableContainer.prototype.m_rowDimensions=null;e.RsVizTableContainer.prototype.setupVisualization=function(t){this.setVisualizationDefinition(t);this.m_columnTuples=e.XList.create();this.m_rowTuples=e.XList.create()};e.RsVizTableContainer.prototype.getResultTable=function(){return this.getVisualizationData()};e.RsVizTableContainer.prototype.createVisualizationData=function(){var t=this.getVisualizationDefinition().getApplicationSettings();var i=this.getVisualizationDefinition();var r=this.getQueryManager().getActiveResultSetContainer();var n=this.getVisualizationData();var a=r.getOffsetRows();var s=r.getOffsetColumns();var o=true;var l=r.hasErrors()||r.getSyncState().isNotInSync();if(e.isNull(n)||a===0&&s===0||l){n=e.SacAnalyticsTable._createAnalyticsTable(i);var u=t.getOverwriteTexts();var p=u.getKeysAsIteratorOfString();while(p.hasNext()){var g=p.next();n.putOverwriteText(g,u.getByKey(g))}if(t.getWidgetHeight()>0){n.setHeight(t.getWidgetHeight())}if(t.getWidgetWidth()>0){n.setWidth(t.getWidgetWidth())}o=!l&&n.preFill(r.getCursorResultSet())}if(o){var f=r.getCursorResultSet();var c=a+f.getDataRows()-1;var C=s+f.getDataColumns()-1;var _=n.getIndexOfFirstUndefinedRowAfter(a);var m=n.getIndexOfLastUndefinedRowBefore(c);var S=n.getIndexOfFirstUndefinedColumnAfter(s);var d=n.getIndexOfLastUndefinedColumnBefore(C);if(_<=m){var T=n.prepareDataRows(f,_,m);if(_===a){a=T}}if(S<=d){var y=n.prepareDataColumns(f,S,d);if(S===s){s=y}}n.fillDataCells(f,a,s);n.setPartial(a>0||s>0)}else{n.fillEmptyTable(i)}this.setVisualizationData(n)};e.RsVizTableContainer.prototype.clearVisualizationData=function(){var t=this.getVisualizationDefinition();var i=e.SacAnalyticsTable._createAnalyticsTable(t);i.fillEmptyTable(t);this.setVisualizationData(i)};e.RsVizTableContainer.prototype.updateDefinition=function(){if(this.getResultTable()!==null&&this.getVisualizationDefinition()!==null){this.getResultTable().applyTableDefinition(this.getVisualizationDefinition())}};e.RsVizTableContainer.prototype.updateModel=function(t,i){this.m_modelJson=t;this.m_rowList=i;var r=this.getQueryManager().getActiveResultSetContainer();var n=r.isCursorResultSetAvailable()?r.getClassicResultSet():null;if(e.notNull(n)){var a=n.getResultSetContainer();var s=a.getOffsetColumns();var o=a.getOffsetRows();if(s===0&&o===0){this.m_columnTuples.clear();this.m_columnDimensions=n.getColumnsAxis().getRsDimensions();this.m_rowTuples.clear();this.m_rowDimensions=n.getRowsAxis().getRsDimensions()}this.fillAxis(s,n.getColumnsAxis(),this.m_columnTuples);this.fillAxis(o,n.getRowsAxis(),this.m_rowTuples)}};e.RsVizTableContainer.prototype.fillAxis=function(e,t,i){var r=0;var n=i.size();var a=t.getTuplesCount();if(e>n){for(var s=n;s<e;s++){i.add(null)}}else if(e<n){for(;r<a&&r+e<n;r++){i.set(r+e,t.getTupleAt(r))}}for(;r<a;r++){i.add(t.getTupleAt(r))}};e.RsVizTableContainer.prototype.getDocumentId=function(t,i){var r=this.getCell(t,i);var n=null;if(e.notNull(r)){n=r.getStringByKey(e.SacTableConstants.CS_COMMENT_DOCUMENT_ID)}return n};e.RsVizTableContainer.prototype.getRowTupleIndex=function(t){var i=-1;if(t>-1&&t<this.m_rowList.size()){var r=this.m_rowList.get(t);if(e.notNull(r)){if(r.getIntegerByKey(e.SacTableConstants.R_N_ROW)!==t){throw e.XException.createIllegalStateException("Invalid model: Inconsistent row index")}}i=r.getIntegerByKey(e.SacTableConstants.N_TUPLE_INDEX)}return i};e.RsVizTableContainer.prototype.getColumnTupleIndex=function(t){var i=-1;var r=this.m_rowList.get(0);if(e.notNull(r)){var n=r.getListByKey(e.SacTableConstants.R_L_CELLS);if(t<n.size()){var a=n.getStructureAt(t);if(a.getIntegerByKey(e.SacTableConstants.C_N_COLUMN)!==t){throw e.XException.createIllegalStateException("Invalid model: Inconsistent column index")}i=a.getIntegerByKey(e.SacTableConstants.N_TUPLE_INDEX)}}return i};e.RsVizTableContainer.prototype.getColumn=function(t){var i=e.isNull(this.m_modelJson)?null:this.m_modelJson.getListByKey(e.SacTableConstants.TD_L_COLUMN_SETTINGS);return e.isNull(i)||t<0||t>=i.size()?null:i.getStructureAt(t)};e.RsVizTableContainer.prototype.getCell=function(t,i){if(t>-1&&i>-1&&i<this.m_rowList.size()){var r=this.m_rowList.get(i);if(e.notNull(r)){if(r.getIntegerByKey(e.SacTableConstants.R_N_ROW)!==i){throw e.XException.createIllegalStateException("Invalid model: Inconsistent row index")}var n=r.getListByKey(e.SacTableConstants.R_L_CELLS);if(t<n.size()){var a=n.getStructureAt(t);if(a.getIntegerByKey(e.SacTableConstants.C_N_ROW)!==i){throw e.XException.createIllegalStateException("Invalid model: Inconsistent row index")}if(a.getIntegerByKey(e.SacTableConstants.C_N_COLUMN)!==t){throw e.XException.createIllegalStateException("Invalid model: Inconsistent column index")}return a}}}return null};e.RsVizTableContainer.prototype.getDataRegionCornerCol=function(){return e.isNull(this.m_modelJson)?-1:this.m_modelJson.getIntegerByKey(e.SacTableConstants.TD_N_DATA_REGION_CORNER_COL)};e.RsVizTableContainer.prototype.getDataRegionHeaderEndRow=function(){return e.isNull(this.m_modelJson)?-1:this.m_modelJson.getIntegerByKey(e.SacTableConstants.TD_N_DATA_REGION_HEADER_END_ROW)};e.RsVizTableContainer.prototype.getDataRegionCornerRow=function(){return e.isNull(this.m_modelJson)?-1:this.m_modelJson.getIntegerByKey(e.SacTableConstants.TD_N_DATA_REGION_CORNER_ROW)};e.RsVizTableContainer.prototype.isEmptyHeaderCell=function(t,i){var r=this.getCell(t,i);return e.notNull(this.m_modelJson)&&i<=this.getDataRegionHeaderEndRow()&&this.hasRowDimensions()&&t<=this.getDataRegionCornerCol()&&e.notNull(r)&&r.getIntegerByKey(e.SacTableConstants.C_N_CELL_TYPE)===e.SacTableConstants.CT_HEADER};e.RsVizTableContainer.prototype.isOnHeaderColumn=function(t){return e.notNull(this.m_modelJson)&&this.hasRowDimensions()&&t<=this.getDataRegionCornerCol()};e.RsVizTableContainer.prototype.isOnDataColumn=function(e){return e>this.getDataRegionCornerCol()};e.RsVizTableContainer.prototype.isOnHeaderRow=function(t){return e.notNull(this.m_modelJson)&&this.hasColumnDimensions()&&t<=this.getDataRegionHeaderEndRow()};e.RsVizTableContainer.prototype.isOnDataRow=function(t){return e.notNull(this.m_modelJson)&&t>this.getDataRegionCornerRow()};e.RsVizTableContainer.prototype.getColumnTuple=function(e){var t=this.getColumnTupleIndex(e);if(t>-1&&t<this.m_columnTuples.size()){return this.m_columnTuples.get(t)}return null};e.RsVizTableContainer.prototype.getColumnTuples=function(t,i){var r=e.XList.create();var n=this.getColumnTupleIndex(t);var a=this.getColumnTupleIndex(i);if(n>-1&&a<this.m_columnTuples.size()){for(var s=n;s<=a;s++){r.add(this.m_columnTuples.get(s))}}return r};e.RsVizTableContainer.prototype.getRowTuple=function(e){var t=this.getRowTupleIndex(e);if(t>-1&&t<this.m_rowTuples.size()){return this.m_rowTuples.get(t)}return null};e.RsVizTableContainer.prototype.getRowTuples=function(t,i){var r=e.XList.create();var n=this.getRowTupleIndex(t);var a=this.getRowTupleIndex(i);if(n>-1&&a<this.m_rowTuples.size()){for(var s=n;s<=a;s++){r.add(this.m_rowTuples.get(s))}}return r};e.RsVizTableContainer.prototype.getColumnTupleElement=function(t,i){var r=this.getColumnTupleIndex(t);if(r>-1&&r<this.m_columnTuples.size()&&this.isOnHeaderRow(i)){var n=this.m_rowList.get(i);if(e.notNull(n)){var a=n.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);var s=this.m_columnTuples.get(r);if(e.notNull(s)){return s.getTupleElementAt(a)}}}return null};e.RsVizTableContainer.prototype.getColumnTupleElements=function(t,i,r,n){var a=e.XList.create();var s=this.getColumnTupleIndex(t);var o=this.getColumnTupleIndex(i);if(s>-1&&o<this.m_columnTuples.size()&&this.isOnHeaderRow(r)&&this.isOnHeaderRow(n)){for(var l=r;l<=n;l++){var u=this.m_rowList.get(l);if(e.notNull(u)){var p=u.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);for(var g=s;g<=o;g++){var f=this.m_columnTuples.get(g);if(e.notNull(f)){var c=f.getTupleElementAt(p);if(!a.contains(c)){a.add(c)}}}}}}return a};e.RsVizTableContainer.prototype.getRowTupleElement=function(t,i){var r=this.getRowTupleIndex(i);if(r>-1&&r<this.m_rowTuples.size()&&this.isOnHeaderColumn(t)){var n=this.getColumn(t);if(e.notNull(n)){var a=n.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);var s=this.m_rowTuples.get(r);if(e.notNull(s)){return s.getTupleElementAt(a)}}}return null};e.RsVizTableContainer.prototype.getRowTupleElements=function(t,i,r,n){var a=e.XList.create();var s=this.getRowTupleIndex(r);var o=this.getRowTupleIndex(n);if(s>-1&&o<this.m_rowTuples.size()&&this.isOnHeaderColumn(t)&&this.isOnHeaderColumn(i)){for(var l=t;l<=i;l++){var u=this.getColumn(l);if(e.notNull(u)){var p=u.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);for(var g=s;g<=o;g++){var f=this.m_rowTuples.get(g);if(e.notNull(f)){var c=f.getTupleElementAt(p);if(!a.contains(c)){a.add(f.getTupleElementAt(p))}}}}}}return a};e.RsVizTableContainer.prototype.getColumnTupleFieldName=function(t){if(this.isOnHeaderRow(t)){var i=this.m_rowList.get(t);if(e.notNull(i)&&i.hasStringByKey(e.SacTableConstants.C_SN_FIELD)){return i.getStringByKey(e.SacTableConstants.C_SN_FIELD)}}return null};e.RsVizTableContainer.prototype.getColumnTupleFieldNames=function(t,i,r){var n=t<0||t>=this.m_rowList.size()?null:this.m_rowList.get(t);var a=i<0||i>=this.m_rowList.size()?null:this.m_rowList.get(i);if(!r||e.notNull(n)&&e.notNull(a)&&n.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX)===a.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX)){var s=e.XListOfString.create();for(var o=t;o<=i;o++){var l=this.m_rowList.get(o);if(e.notNull(l)&&l.hasStringByKey(e.SacTableConstants.C_SN_FIELD)){s.add(l.getStringByKey(e.SacTableConstants.C_SN_FIELD))}}return s}return null};e.RsVizTableContainer.prototype.getRowTupleFieldName=function(t){if(this.isOnHeaderColumn(t)){var i=this.getColumn(t);if(e.notNull(i)&&i.hasStringByKey(e.SacTableConstants.C_SN_FIELD)){return i.getStringByKey(e.SacTableConstants.C_SN_FIELD)}}return null};e.RsVizTableContainer.prototype.getRowTupleFieldNames=function(t,i,r){var n=this.getColumn(t);var a=this.getColumn(i);if(!r||e.notNull(n)&&e.notNull(a)&&n.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX)===a.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX)){var s=e.XListOfString.create();for(var o=t;o<=i;o++){var l=this.getColumn(o);if(e.notNull(l)&&l.hasStringByKey(e.SacTableConstants.C_SN_FIELD)){s.add(l.getStringByKey(e.SacTableConstants.C_SN_FIELD))}}return s}return null};e.RsVizTableContainer.prototype.getColumnDimensionStrict=function(e,t){if(e===this.getDataRegionCornerCol()){return this.getColumnDimension(t)}return null};e.RsVizTableContainer.prototype.getColumnDimension=function(t){if(this.isOnHeaderRow(t)){var i=this.m_rowList.get(t);if(e.notNull(i)){var r=i.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);return this.m_columnDimensions.get(r)}}return null};e.RsVizTableContainer.prototype.getColumnDimensions=function(t,i){var r=e.XList.create();if(this.isOnHeaderRow(i)){for(var n=t;n<=i;n++){var a=this.m_rowList.get(n);if(e.notNull(a)){var s=a.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);var o=this.m_columnDimensions.get(s);if(!r.contains(o)){r.add(o)}}}}return r};e.RsVizTableContainer.prototype.getRowDimensionStrict=function(e,t){if(t===this.getDataRegionCornerRow()){return this.getRowDimension(e)}return null};e.RsVizTableContainer.prototype.getRowDimension=function(t){if(this.isOnHeaderColumn(t)){var i=this.getColumn(t);if(e.notNull(i)){var r=i.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);return this.m_rowDimensions.get(r)}}return null};e.RsVizTableContainer.prototype.getRowDimensions=function(t,i){var r=e.XList.create();if(this.isOnHeaderColumn(i)){for(var n=t;n<=i;n++){var a=this.getColumn(n);if(e.notNull(a)){var s=a.getIntegerByKey(e.SacTableConstants.RCS_N_INDEX);var o=this.m_rowDimensions.get(s);if(!r.contains(o)){r.add(o)}}}}return r};e.RsVizTableContainer.prototype.hasColumnDimensions=function(){return e.XStream.of(this.m_columnDimensions).anyMatch(function(t){var i=t.getQueryModel().getDimensionByName(t.getName());return i.isUniversalDisplayHierarchyDimension()&&t.getResultSetFields().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED&&i.getResultSetAttributes().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED&&i.getResultSetFields().size()>0}.bind(this))};e.RsVizTableContainer.prototype.hasRowDimensions=function(){return e.XStream.of(this.m_rowDimensions).anyMatch(function(t){var i=t.getQueryModel().getDimensionByName(t.getName());return i.isUniversalDisplayHierarchyDimension()&&t.getResultSetFields().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.ATTRIBUTE_BASED&&i.getResultSetAttributes().size()>0||i.getFieldLayoutType()===e.FieldLayoutType.FIELD_BASED&&i.getResultSetFields().size()>0}.bind(this))};e.RsVizTableContainer.prototype.releaseObject=function(){this.m_modelJson=null;this.m_rowList=null;this.m_columnTuples=null;this.m_rowTuples=null;this.m_rowList=null;this.m_columnDimensions=null;this.m_rowDimensions=null;e.RsVizVisualizationContainer.prototype.releaseObject.call(this)};e.RsVizTableContainer.prototype.getTargetDropAxisType=function(t,i){var r=null;if(i<this.m_rowList.size()){var n=this.m_rowList.get(i);if(e.notNull(n)){var a=n.getListByKey(e.SacTableConstants.R_L_CELLS);if(t<a.size()){var s=a.getStructureAt(t);var o=s.getIntegerByKey(e.SacTableConstants.C_N_CELL_TYPE);if(o===e.SacTableConstants.CT_EMPTY_AXIS_ROW_HEADER){r=e.AxisType.ROWS}else if(o===e.SacTableConstants.CT_EMPTY_AXIS_COLUMN_HEADER){r=e.AxisType.COLUMNS}}}}return r};e.OlapReferenceModule=function(){};e.OlapReferenceModule.prototype=new e.DfModule;e.OlapReferenceModule.prototype._ff_c="OlapReferenceModule";e.OlapReferenceModule.s_module=null;e.OlapReferenceModule.getInstance=function(){if(e.isNull(e.OlapReferenceModule.s_module)){e.DfModule.checkInitialized(e.OlapApiModule.getInstance());e.DfModule.checkInitialized(e.VisualizationImplModule.getInstance());e.OlapReferenceModule.s_module=e.DfModule.startExt(new e.OlapReferenceModule);e.RsVisualizationContainerFactory.setInstance(e.RsVizContainerFactoryImpl.create());e.ReferenceGridFactory.setInstance(e.ReferenceGridFactoryImpl.create());e.FioriGridFactory.setInstance(e.FioriGridFactoryImpl.create());e.RsGoogleChartConfig.staticSetup();e.ChartRendererFactory.setInstance(e.ChartRendererFactoryImpl.create());e.KpiRendererFactory.setInstance(e.KpiRendererFactoryImpl.create());e.GridRendererFactory.setInstance(e.GridRendererFactoryImpl.create());e.TableClipboardHelperFactory.setInstance(e.SacTableClipboardHelperFactory.create());e.AnalyticTableExportHelperFactory.setInstance(e.SacAnalyticTableExportHelperFactory.create());e.DfModule.stopExt(e.OlapReferenceModule.s_module)}return e.OlapReferenceModule.s_module};e.OlapReferenceModule.prototype.getName=function(){return"ff4340.olap.reference"};e.OlapReferenceModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff4340.olap.reference.js.map