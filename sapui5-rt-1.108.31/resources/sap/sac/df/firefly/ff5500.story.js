/*!
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define(["sap/sac/df/firefly/ff2100.runtime","sap/sac/df/firefly/ff4000.protocol.ina"],function(t){"use strict";t.OcOrcaUtils={processTime:function(e){var r=t.XString.replace(e,"T"," ");return t.XStringUtils.stripRight(r,8)}};t.OcStoryCatalog=function(){};t.OcStoryCatalog.prototype=new t.XObject;t.OcStoryCatalog.prototype._ff_c="OcStoryCatalog";t.OcStoryCatalog.prototype.m_nameToStory=null;t.OcStoryCatalog.prototype.hasElements=function(){return this.getCatalogItems().hasElements()};t.OcStoryCatalog.prototype.getCatalogItems=function(){return this.getStoryByNameMap().getValuesAsReadOnlyList()};t.OcStoryCatalog.prototype.getCatalogItemdByStoryId=function(e){var r=this.getCatalogItems();var a=r.size();for(var n=0;n<a;n++){var o=r.get(n);if(t.XString.isEqual(o.getId(),e)){return o}}return null};t.OcStoryCatalog.prototype.getCatalogItemByStoryName=function(t){return this.getStoryByNameMap().getByKey(t)};t.OcStoryCatalog.prototype.addStory=function(t){this.getStoryByNameMap().put(t.getName(),t)};t.OcStoryCatalog.prototype.getStoryByNameMap=function(){if(t.isNull(this.m_nameToStory)){this.m_nameToStory=t.XLinkedHashMapByString.create()}return this.m_nameToStory};t.OcStoryCatalog.prototype.releaseObject=function(){this.m_nameToStory=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_nameToStory);t.XObject.prototype.releaseObject.call(this)};t.OcStoryCatalogLoadOptions=function(){};t.OcStoryCatalogLoadOptions.prototype=new t.XObject;t.OcStoryCatalogLoadOptions.prototype._ff_c="OcStoryCatalogLoadOptions";t.OcStoryCatalogLoadOptions.prototype.m_catalogType=null;t.OcStoryCatalogLoadOptions.prototype.m_recentlyAccessedStories=0;t.OcStoryCatalogLoadOptions.prototype.getCatalogType=function(){if(t.isNull(this.m_catalogType)){return t.OcStoryCatalogType.SEARCH_LIST}return this.m_catalogType};t.OcStoryCatalogLoadOptions.prototype.setCatalogType=function(t){this.m_catalogType=t};t.OcStoryCatalogLoadOptions.prototype.getNumberOfRecentlyAccessedStories=function(){return this.m_recentlyAccessedStories};t.OcStoryCatalogLoadOptions.prototype.setNumberOfRecentlyAccessedStories=function(t){this.m_recentlyAccessedStories=t};t.OcStoryCatalogLoadOptions.prototype.releaseObject=function(){this.m_catalogType=null;this.m_recentlyAccessedStories=0;t.XObject.prototype.releaseObject.call(this)};t.OcStoryCatalogLoadOptions.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Catalog Type: ").append(this.getCatalogType().getName()).appendNewLine().append("Number of recently accessed stories: ").appendInt(this.getNumberOfRecentlyAccessedStories());return e.toString()};t.OcStoryCatalogParser=function(){};t.OcStoryCatalogParser.prototype=new t.XObject;t.OcStoryCatalogParser.prototype._ff_c="OcStoryCatalogParser";t.OcStoryCatalogParser.prototype.getStoryCatalog=function(e){if(t.isNull(e)){return new t.OcStoryCatalog}var r;if(e.getType()===t.PrElementType.STRUCTURE){r=e.asStructure().getListByKey(t.OcOrcaConstants.STORY_SUB_NODES)}else{r=e.asList()}var a=this.parseStoryList(r);return a};t.OcStoryCatalogParser.prototype.parseStoryList=function(e){var r=new t.OcStoryCatalog;var a=e.size();for(var n=0;n<a;n++){var o=e.get(n);if(o.isStructure()){var s=this.parseStoryElement(o.asStructure());if(t.notNull(s)){r.addStory(s)}}}return r};t.OcStoryCatalogParser.prototype.parseStoryElement=function(e){var r=e.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_TYPE);if(t.XString.isEqual(r,t.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY)){return this.parseStory(e)}else if(t.XString.isEqual(r,t.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK)){return this.parseLink(e)}return null};t.OcStoryCatalogParser.prototype.parseLink=function(e){var r=e.getByKey(t.OcOrcaConstants.STORY_SOURCE_RESOURCE);if(t.notNull(r)&&r.isStructure()){return this.parseStory(r.asStructure())}return null};t.OcStoryCatalogParser.prototype.parseStory=function(e){var r=e.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_ID);var a=e.getStringByKey(t.OcOrcaConstants.STORY_NAME);var n=t.OcStoryCatalogItem.create(r,a);n.setDescription(e.getStringByKey(t.OcOrcaConstants.STORY_DESCRIPTION));n.setCreateTime(t.OcOrcaUtils.processTime(e.getStringByKey(t.OcOrcaConstants.STORY_CREATED_TIME)));n.setModifiedTime(t.OcOrcaUtils.processTime(e.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_TIME)));n.setCreatedBy(e.getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY));n.setModifiedBy(e.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY));n.setUpdateCounter(t.OcStoryUtils.getIntegerFromStructureByName(e,t.OcOrcaConstants.STORY_UPDATE_COUNTER));this.addDisplayNames(n,e);return n};t.OcStoryCatalogParser.prototype.addDisplayNames=function(e,r){var a=r.getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME);var n="";if(t.isNull(a)){var o=r.getStructureByKey(t.OcOrcaConstants.STORY_DATA);if(t.notNull(o)){var s=o.getStructureByKey(t.OcOrcaConstants.STORY_METADATA);if(t.notNull(s)){a=s.getStringByKey(t.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME);n=s.getStringByKey(t.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME)}}}else{n=r.getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME)}e.setCreatedByDisplayName(a);e.setModifiedByDisplayName(n)};t.OrcaSystemConverter=function(){};t.OrcaSystemConverter.prototype=new t.XObject;t.OrcaSystemConverter.prototype._ff_c="OrcaSystemConverter";t.OrcaSystemConverter.CLIENT_CONTEXT="Client";t.OrcaSystemConverter.s_orcaSystemConverter=null;t.OrcaSystemConverter.create=function(){if(t.isNull(t.OrcaSystemConverter.s_orcaSystemConverter)){t.OrcaSystemConverter.s_orcaSystemConverter=new t.OrcaSystemConverter}return t.OrcaSystemConverter.s_orcaSystemConverter};t.OrcaSystemConverter.setConverter=function(e){t.OrcaSystemConverter.s_orcaSystemConverter=e};t.OrcaSystemConverter.getValue=function(e,r,a){var n=e.getStringByKey(r);if(t.isNull(n)){n=e.getStringByKey(a)}return n};t.OrcaSystemConverter.prototype.convert=function(e,r,a){var n=e.getSystemDescription();var o=e.getSession();var s=t.XList.create();var i=r.getStructureByKey("Systems");if(t.notNull(i)){var c=i.getKeysAsReadOnlyListOfString();for(var O=0;O<c.size();O++){var u=c.get(O);if(t.XString.isEqual(a,t.OrcaSystemConverter.CLIENT_CONTEXT)||!t.XString.isEqual(t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,u)&&!t.XString.isEqual(n.getSystemName(),u)){var l=i.getStructureByKey(c.get(O));var g=this.convertToProperties(l,n,a);if(t.notNull(g)){var p=t.SystemDescription.createExt(o,null,u,g);s.add(p)}}}}return s};t.OrcaSystemConverter.prototype.convertToProperties=function(e,r,a){var n=t.PrFactory.createStructure();var o=t.OrcaSystemConverter.getValue(e,"SYSTEM_TYPE","systemType");var s=t.SystemType.lookup(o);if(t.isNull(s)){return null}if(s.isTypeOf(t.SystemType.BW)){var i=t.OrcaSystemConverter.getValue(e,"CLIENT","client");n.putString(t.ConnectionParameters.CLIENT,i)}var c=t.OrcaSystemConverter.getValue(e,"FPA_AUTHENTICATION_METHOD","authenticationMethod");if(t.isNull(c)||t.XString.isEqual(c,"NOAUTH")||t.XString.isEqual(c,"NONE")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.NONE.getName())}else if(t.XString.isEqual(c,"SAML")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.SAML_WITH_PASSWORD.getName())}else if(t.XString.isEqual(c,"BASIC")){n.putString(t.ConnectionParameters.AUTHENTICATION_TYPE,t.AuthenticationType.BASIC.getName())}var O=t.OrcaSystemConverter.getValue(e,"FPA_CONNECTION_TYPE","connectionType");n.putString("connectionType",O);var u=e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,false);if(u){n.putString(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,"YES")}var l=t.OrcaSystemConverter.getValue(e,"PROTOCOL","protocol");n.putString(t.ConnectionParameters.PROTOCOL,l);var g=t.OrcaSystemConverter.getValue(e,"HOST","host");n.putString(t.ConnectionParameters.HOST,g);var p=t.OrcaSystemConverter.getValue(e,"PORT","port");n.putString(t.ConnectionParameters.PORT,p);n.putString(t.ConnectionParameters.SYSTEM_TYPE,o);var y=t.OrcaSystemConverter.getValue(e,"WEBDISPATCHER_URI","webdispatcherUri");if(t.XStringUtils.isNotNullAndNotEmpty(y)){var _=t.OrcaSystemConverter.getValue(e,"PREFIX","prefix");n.putString(t.ConnectionParameters.PREFIX,_);var d=t.XStringBuffer.create().append(r.getScheme()).append("://").append(r.getHost()).append(":").appendInt(r.getPort()).append(y).toString();n.putString(t.ConnectionParameters.WEBDISPATCHER_URI,d)}var S=t.XProperties.create();var C=n.getKeysAsReadOnlyListOfString();for(var T=0;T<C.size();T++){var E=C.get(T);var m=n.getStringByKey(E);S.put(E,m)}return S};t.OcOrcaContext=function(){};t.OcOrcaContext.prototype=new t.XObject;t.OcOrcaContext.prototype._ff_c="OcOrcaContext";t.OcOrcaContext.create=function(e,r,a){var n=new t.OcOrcaContext;n.setupContext(e,r,a);return n};t.OcOrcaContext.prototype.m_tolerant=false;t.OcOrcaContext.prototype.m_storyEntityHelper=null;t.OcOrcaContext.prototype.m_storyEntityFactory=null;t.OcOrcaContext.prototype.m_messageManager=null;t.OcOrcaContext.prototype.m_connection=null;t.OcOrcaContext.prototype.setupContext=function(e,r,a){t.XObject.prototype.setup.call(this);if(t.isNull(e)||!e.hasElements()){throw t.XException.createIllegalArgumentException("The story cannot be null or empty")}this.m_connection=a;this.m_messageManager=this.createMessageManager(r);this.m_tolerant=true;this.m_storyEntityHelper=t.OcOrcaStoryEntityHelper.create(e,this)};t.OcOrcaContext.prototype.getMessageManager=function(){return this.m_messageManager};t.OcOrcaContext.prototype.getConnection=function(){return this.m_connection};t.OcOrcaContext.prototype.isTolerant=function(){return this.m_tolerant};t.OcOrcaContext.prototype.setIsTolerant=function(t){this.m_tolerant=t};t.OcOrcaContext.prototype.getStoryEntityFactory=function(){if(t.isNull(this.m_storyEntityFactory)){this.m_storyEntityFactory=t.OcOrcaStoryEntityFactory.create(this)}return this.m_storyEntityFactory};t.OcOrcaContext.prototype.getStoryEntityHelper=function(){return this.m_storyEntityHelper};t.OcOrcaContext.prototype.createMessageManager=function(e){if(t.isNull(e)){return t.MessageManagerSimple.createMessageManager()}return t.MessageManager.createMessageManagerExt(e)};t.OcOrcaContext.prototype.releaseObject=function(){this.m_connection=null;this.m_messageManager=t.XObjectExt.release(this.m_messageManager);this.m_storyEntityHelper=t.XObjectExt.release(this.m_storyEntityHelper);this.m_storyEntityFactory=t.XObjectExt.release(this.m_storyEntityFactory);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaStoryEntityFactory=function(){};t.OcOrcaStoryEntityFactory.prototype=new t.XObject;t.OcOrcaStoryEntityFactory.prototype._ff_c="OcOrcaStoryEntityFactory";t.OcOrcaStoryEntityFactory.create=function(e){var r=new t.OcOrcaStoryEntityFactory;r.setupFactory(e);return r};t.OcOrcaStoryEntityFactory.prototype.m_context=null;t.OcOrcaStoryEntityFactory.prototype.m_pageWidgetHelper=null;t.OcOrcaStoryEntityFactory.prototype.setupFactory=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaStoryEntityFactory.prototype.createPagesOfStory=function(t){return this.createPageByPageIdMap(t)};t.OcOrcaStoryEntityFactory.prototype.createWidgetsOfPage=function(t){return this.createWidgetByWidgetIdMap(t)};t.OcOrcaStoryEntityFactory.prototype.createDatasets=function(){return t.OcOrcaDatasets.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createThresholds=function(){return t.OcOrcaThresholds.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createCalculations=function(){return t.OcOrcaCalculations.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createFieldSelections=function(){return t.OcOrcaFieldSelections.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createCalculationVariables=function(){return t.OcOrcaCalculationVariables.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createMeasurySyncs=function(){return t.OcOrcaMeasureSyncs.create(this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createImages=function(e){return t.OcOrcaImages.create(e,this.getContext())};t.OcOrcaStoryEntityFactory.prototype.createPageByPageIdMap=function(e){var r=t.XLinkedHashMapByString.create();var a=this.getPageWidgetHelper().getPageIds();if(!t.XCollectionUtils.hasElements(a)){return r}for(var n=0;n<a.size();n++){var o=a.get(n);var s=this.getPageWidgetHelper().getPageJsonByPageId(o);if(t.notNull(s)){var i=s.getStringByKey(t.OcOrcaConstants.PAGE_TITLE);var c=t.OcOrcaPage.create(o,i,s,e);if(t.notNull(c)){r.put(o,c)}}}return r};t.OcOrcaStoryEntityFactory.prototype.createWidgetByWidgetIdMap=function(e){var r=t.XLinkedHashMapByString.create();var a=this.getPageWidgetHelper().getWidgetIdsByPageId(e.getId());if(!t.XCollectionUtils.hasElements(a)){return r}for(var n=0;n<a.size();n++){var o=a.get(n);var s=this.createWidget(o,e);if(t.notNull(s)){r.put(o,s)}}return r};t.OcOrcaStoryEntityFactory.prototype.getFirstWidgetByType=function(e,r){var a=this.getPageWidgetHelper().getWidgetIdsByPageId(e.getId());if(!t.XCollectionUtils.hasElements(a)){return null}for(var n=0;n<a.size();n++){var o=a.get(n);var s=this.getPageWidgetHelper().getWidgetJsonByWidgetId(o);if(t.isNull(s)){return null}var i=s.getStringByKey(t.OcOrcaConstants.WIDGET_CLASS);var c=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(s,t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE);if(r===t.OcWidgetType.KPI&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&(t.XString.isEqual(c,"metric")||t.XString.isEqual(c,"bullet"))){return t.OcOrcaKpiWidget.create(o,s,e)}else if(r===t.OcWidgetType.ANALYTICAL_CARD&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&(t.XString.isEqual(c,"metric")||t.XString.isEqual(c,"bullet"))){return t.OcOrcaAnalyticalCardWidget.create(o,s,e)}else if(r===t.OcWidgetType.CHART&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_CHART)&&!t.XString.isEqual(c,"metric")&&!t.XString.isEqual(c,"bullet")){return t.OcOrcaChartWidget.create(o,s,e)}else if(r===t.OcWidgetType.GRID&&t.XString.containsString(i,t.OcOrcaConstants.WIDGET_TYPE_TABLE)){return t.OcOrcaGridWidget.create(o,s,e)}}return null};t.OcOrcaStoryEntityFactory.prototype.createWidget=function(e,r){var a=this.getPageWidgetHelper().getWidgetJsonByWidgetId(e);if(t.isNull(a)){return null}var n=a.getStringByKey(t.OcOrcaConstants.WIDGET_CLASS);if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_CHART)){return t.OcOrcaChartWidget.create(e,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_TABLE)){return t.OcOrcaGridWidget.create(e,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_TEXT)||t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_HEADER)){return t.OcOrcaWidget.create(e,t.OcWidgetType.TEXT,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_IMAGE)){return t.OcOrcaWidget.create(e,t.OcWidgetType.IMAGE,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM)||t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE)){return t.OcOrcaWidget.create(e,t.OcWidgetType.PICTOGRAM,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER)){return t.OcOrcaWidget.create(e,t.OcWidgetType.PAGE_FILTER,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL)){return t.OcOrcaWidget.create(e,t.OcWidgetType.CALCULATION_INPUT_CONTROL,a,r)}else if(t.XString.containsString(n,t.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL)){return t.OcOrcaWidget.create(e,t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL,a,r)}return null};t.OcOrcaStoryEntityFactory.prototype.getPageWidgetHelper=function(){if(t.isNull(this.m_pageWidgetHelper)){this.m_pageWidgetHelper=t.OcOrcaPageWidgetHelper.create(this.getContext())}return this.m_pageWidgetHelper};t.OcOrcaStoryEntityFactory.prototype.getContext=function(){return this.m_context};t.OcOrcaStoryEntityFactory.prototype.releaseObject=function(){this.m_context=null;this.m_pageWidgetHelper=t.XObjectExt.release(this.m_pageWidgetHelper);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaCalculationVariables=function(){};t.OcOrcaCalculationVariables.prototype=new t.XObject;t.OcOrcaCalculationVariables.prototype._ff_c="OcOrcaCalculationVariables";t.OcOrcaCalculationVariables.create=function(e){var r=new t.OcOrcaCalculationVariables;r.setupCalculationVariables(e);return r};t.OcOrcaCalculationVariables.prototype.m_context=null;t.OcOrcaCalculationVariables.prototype.m_calculationVariables=null;t.OcOrcaCalculationVariables.prototype.setupCalculationVariables=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaCalculationVariables.prototype.getCalculationVariableById=function(t){return this.getCalculationVariables().getByKey(t)};t.OcOrcaCalculationVariables.prototype.getCalculationVariables=function(){if(t.notNull(this.m_calculationVariables)){return this.m_calculationVariables}this.m_calculationVariables=t.XHashMapByString.create();var e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE);for(var r=0;r<e.size();r++){var a=e.get(r);this.addOrcaCalcVarsToCalcVars(a,this.m_calculationVariables)}return this.m_calculationVariables};t.OcOrcaCalculationVariables.prototype.addOrcaCalcVarsToCalcVars=function(e,r){var a=e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES);if(t.PrUtils.isListEmpty(a)){return}for(var n=0;n<a.size();n++){var o=a.getStructureAt(n);var s=this.createCalcvarFromOrcaCalcVarEntity(o);if(t.notNull(s)){r.put(s.getId(),s)}}};t.OcOrcaCalculationVariables.prototype.createCalcvarFromOrcaCalcVarEntity=function(e){var r=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(r)){return null}var a=r.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);var n=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME);var o=r.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE);var s=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE);var i=t.OcCalculationVariable.create(a,n,o,s);if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_CALCULATION_VARIABLE)){i.setSelectionInfos(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO))}return i};t.OcOrcaCalculationVariables.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaCalculationVariables.prototype.getContext=function(){return this.m_context};t.OcOrcaCalculationVariables.prototype.toString=function(){var e=this.getCalculationVariables().getValuesAsReadOnlyList();var r=t.XStringBuffer.create();r.append("calc vars:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". FieldSelection: ").append(n.getId()).append(" of type ").append(n.getCalculationVariableType())}return r.toString()};t.OcOrcaCalculationVariables.prototype.releaseObject=function(){this.m_context=null;this.m_calculationVariables=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculationVariables);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaCalculations=function(){};t.OcOrcaCalculations.prototype=new t.XObject;t.OcOrcaCalculations.prototype._ff_c="OcOrcaCalculations";t.OcOrcaCalculations.create=function(e){var r=new t.OcOrcaCalculations;r.setupCalculations(e);return r};t.OcOrcaCalculations.prototype.m_context=null;t.OcOrcaCalculations.prototype.m_calculations=null;t.OcOrcaCalculations.prototype.setupCalculations=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaCalculations.prototype.getCalculationByCalculationId=function(t){return this.getCalculations().getByKey(t)};t.OcOrcaCalculations.prototype.getCalculations=function(){if(t.notNull(this.m_calculations)){return this.m_calculations}this.m_calculations=t.XHashMapByString.create();var e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_CALCULATION);for(var r=0;r<e.size();r++){var a=e.get(r);this.addOrcaCalculationToCalculations(a,this.m_calculations)}return this.m_calculations};t.OcOrcaCalculations.prototype.addOrcaCalculationToCalculations=function(e,r){var a=e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_ENTITIES);if(t.PrUtils.isListEmpty(a)){return}for(var n=0;n<a.size();n++){var o=a.getStructureAt(n);var s=this.createCalculationFromOrcaCalculationEntity(o);if(t.notNull(s)){r.put(s.getId(),s)}}};t.OcOrcaCalculations.prototype.createCalculationFromOrcaCalculationEntity=function(e){var r=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(r)){return null}var a=r.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);var n=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_NAME);var o=r.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_TYPE);var s=e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE);var i=r.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_SUBTYPE);if(t.notNull(i)&&!t.XString.startsWith(i,o)){o=t.XStringUtils.concatenate3(o,".",i)}if(t.notNull(s)){o=t.XStringUtils.concatenate3(o,".",s)}var c=t.OcCalculation.create(a,n,o);c.setFormatting(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_FORMAT));if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE)){c.setMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));c.setReferenceMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));c.setSelections(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_SELECTIONS))}else if(t.XString.startsWith(o,t.OcOrcaConstants.STORY_ENTITY_CALCULATION)||t.XString.startsWith(o,t.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION)){c.setMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));c.setReferenceMeasureId(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));if(e.containsKey("formulaAST")){var O=t.PrFactory.createStructure();O.putNotNullAndNotEmpty("ast",t.PrUtils.deepCopyElement(e.getStructureByKey("formulaAST")));c.setFormula(O)}else{c.setFormula(e.getByKey(t.OcOrcaConstants.STORY_CALCULATION_FORMULA))}c.setAggregation(e.getStringByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION,""));c.setAggregationDimensions(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS));c.setExceptionAggregation(e.getStringByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION,""));c.setExceptionAggregationDimensions(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS));c.setValuesNotIn(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN,false));c.setStartDate(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_START_DATE));c.setEndDate(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_END_DATE));c.setStartDateCurrentIfNull(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL,false));c.setEndDateCurrentIfNull(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL,false));c.setTimezoneOffsetForCurrentDate(e.getIntegerByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,0));c.setResultGranularity(e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY));c.setValueType(e.getStringByKey(t.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE));c.setGroupThresholds(e.getListByKey(t.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS));c.setSelectedDimensionId(e.getStructureByKey(t.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID));c.setToText(e.getBooleanByKeyExt(t.OcOrcaConstants.STORY_CALCULATION_TO_TEXT,false))}return c};t.OcOrcaCalculations.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaCalculations.prototype.getContext=function(){return this.m_context};t.OcOrcaCalculations.prototype.toString=function(){var e=this.getCalculations().getValuesAsReadOnlyList();var r=t.XStringBuffer.create();r.append("Calculations:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". Calculation: ").append(n.getId()).append(" of type ").append(n.getCalculationType())}return r.toString()};t.OcOrcaCalculations.prototype.releaseObject=function(){this.m_context=null;this.m_calculations=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculations);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaFieldSelections=function(){};t.OcOrcaFieldSelections.prototype=new t.XObject;t.OcOrcaFieldSelections.prototype._ff_c="OcOrcaFieldSelections";t.OcOrcaFieldSelections.create=function(e){var r=new t.OcOrcaFieldSelections;r.setupFieldSelections(e);return r};t.OcOrcaFieldSelections.prototype.m_context=null;t.OcOrcaFieldSelections.prototype.m_fieldSelections=null;t.OcOrcaFieldSelections.prototype.setupFieldSelections=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaFieldSelections.prototype.getFieldSelectionByFieldSelectionId=function(t){return this.getFieldSelections().getByKey(t)};t.OcOrcaFieldSelections.prototype.getFieldSelections=function(){if(t.notNull(this.m_fieldSelections)){return this.m_fieldSelections}this.m_fieldSelections=t.XHashMapByString.create();var e=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION);for(var r=0;r<e.size();r++){var a=e.get(r);this.addOrcaFieldSelectionsToFieldSelections(a,this.m_fieldSelections)}return this.m_fieldSelections};t.OcOrcaFieldSelections.prototype.addOrcaFieldSelectionsToFieldSelections=function(e,r){var a=e.getListByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES);if(t.PrUtils.isListEmpty(a)){return}for(var n=0;n<a.size();n++){var o=a.getStructureAt(n);var s=this.createFieldSelectionFromOrcaFieldSelectionEntity(o);if(t.notNull(s)){r.put(s.getId(),s)}}};t.OcOrcaFieldSelections.prototype.createFieldSelectionFromOrcaFieldSelectionEntity=function(e){var r=e.getStructureByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(r)){return null}var a=r.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);var n=e.getStringByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_NAME);var o=r.getStringByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE);var s=t.OcFieldSelection.create(a,n,o);if(t.XString.isEqual(o,t.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION)||t.XString.isEqual(o,t.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE)){s.setSelectionInfos(e.getStructureByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_INFO));s.setEntityIds(e.getByKey(t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS))}return s};t.OcOrcaFieldSelections.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaFieldSelections.prototype.getContext=function(){return this.m_context};t.OcOrcaFieldSelections.prototype.toString=function(){var e=this.getFieldSelections().getValuesAsReadOnlyList();var r=t.XStringBuffer.create();r.append("selections:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". FieldSelection: ").append(n.getId()).append(" of type ").append(n.getFieldSelectionType())}return r.toString()};t.OcOrcaFieldSelections.prototype.releaseObject=function(){this.m_context=null;this.m_fieldSelections=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fieldSelections);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaMeasureSyncs=function(){};t.OcOrcaMeasureSyncs.prototype=new t.XObject;t.OcOrcaMeasureSyncs.prototype._ff_c="OcOrcaMeasureSyncs";t.OcOrcaMeasureSyncs.create=function(e){var r=new t.OcOrcaMeasureSyncs;r.setupMeasureSyncs(e);return r};t.OcOrcaMeasureSyncs.prototype.m_context=null;t.OcOrcaMeasureSyncs.prototype.m_measureSyncs=null;t.OcOrcaMeasureSyncs.prototype.setupMeasureSyncs=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaMeasureSyncs.prototype.getMeasureSyncByMeasureName=function(t){return this.getMeasureSyncs().getByKey(t)};t.OcOrcaMeasureSyncs.prototype.getMeasureSyncs=function(){if(t.notNull(this.m_measureSyncs)){return this.m_measureSyncs}this.m_measureSyncs=t.XHashMapByString.create();var e=this.getStoryEntityHelper().getStoryEntityAsJson();var r=e.getListByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC);if(t.PrUtils.isListEmpty(r)){return this.m_measureSyncs}for(var a=0;a<r.size();a++){var n=r.getStructureAt(a);var o=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME);if(t.XStringUtils.isNotNullAndNotEmpty(o)){var s=t.OcMeasureSync.create(o);s.setColor(n.getStringByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR));s.setPattern(n.getStringByKey(t.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN));this.m_measureSyncs.put(o,s)}}return this.m_measureSyncs};t.OcOrcaMeasureSyncs.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaMeasureSyncs.prototype.getContext=function(){return this.m_context};t.OcOrcaMeasureSyncs.prototype.toString=function(){var e=this.getMeasureSyncs().getValuesAsReadOnlyList();var r=t.XStringBuffer.create();r.append("Measure Syncs:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append('. Measure sync for "').append(n.getName());r.append('", color ').append(n.getColor()).append(", pattern ").append(n.getPattern())}return r.toString()};t.OcOrcaMeasureSyncs.prototype.releaseObject=function(){this.m_context=null;this.m_measureSyncs=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_measureSyncs);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaPageLayout=function(){};t.OcOrcaPageLayout.prototype=new t.XObject;t.OcOrcaPageLayout.prototype._ff_c="OcOrcaPageLayout";t.OcOrcaPageLayout.create=function(e){var r=new t.OcOrcaPageLayout;r.setupOrcaPageLayout(e);return r};t.OcOrcaPageLayout.prototype.m_layoutType=null;t.OcOrcaPageLayout.prototype.m_widgetLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.m_widgetSectionLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.m_widgetLaneLayoutJsonByWidgetIdMap=null;t.OcOrcaPageLayout.prototype.m_pageLayoutJson=null;t.OcOrcaPageLayout.prototype.setupOrcaPageLayout=function(e){t.XObject.prototype.setup.call(this);this.m_pageLayoutJson=e};t.OcOrcaPageLayout.prototype.getPageLayoutJson=function(){return this.m_pageLayoutJson};t.OcOrcaPageLayout.prototype.getLayoutType=function(){if(t.isNull(this.m_layoutType)){this.m_layoutType=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE)}return this.m_layoutType};t.OcOrcaPageLayout.prototype.processIsResponsive=function(){return t.XString.isEqual(this.getLayoutType(),t.OcOrcaConstants.PAGE_IS_RESPONSIVE)};t.OcOrcaPageLayout.prototype.hasCanvasLayout=function(){return t.XString.isEqual(this.getLayoutType(),t.OcOrcaConstants.PAGE_LAYOUT_CANVAS)};t.OcOrcaPageLayout.prototype.processBackgroundColor=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR)};t.OcOrcaPageLayout.prototype.getSectionLayoutJsonByWidgetId=function(t){return this.getWigdetSectionLayoutJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetId=function(t){return this.getLaneLayoutJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getWidgetLayoutJsonByWidgetId=function(t){return this.getWigdetIdToWidgetLayoutJsonMap().getByKey(t)};t.OcOrcaPageLayout.prototype.getWigdetSectionLayoutJsonByWidgetIdMap=function(){if(t.notNull(this.m_widgetSectionLayoutJsonByWidgetIdMap)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}this.m_widgetSectionLayoutJsonByWidgetIdMap=t.XHashMapByString.create();var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getStructureByKey(t.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(t.notNull(n)){var o=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(a,t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID);for(var s=0;s<o.size();s++){this.m_widgetSectionLayoutJsonByWidgetIdMap.put(o.get(s),n)}}}return this.m_widgetSectionLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetIdMap=function(){if(t.notNull(this.m_widgetLaneLayoutJsonByWidgetIdMap)){return this.m_widgetLaneLayoutJsonByWidgetIdMap}this.m_widgetLaneLayoutJsonByWidgetIdMap=t.XHashMapByString.create();var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetSectionLayoutJsonByWidgetIdMap}for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getStringByKey(t.OcOrcaConstants.WIDGET_ID);if(t.XStringUtils.isNullOrEmpty(n)){continue}var o=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(a,t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);this.m_widgetLaneLayoutJsonByWidgetIdMap.put(n,o)}return this.m_widgetLaneLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.getWigdetIdToWidgetLayoutJsonMap=function(){if(t.notNull(this.m_widgetLayoutJsonByWidgetIdMap)){return this.m_widgetLayoutJsonByWidgetIdMap}this.m_widgetLayoutJsonByWidgetIdMap=t.XHashMapByString.create();var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS);if(!t.XCollectionUtils.hasElements(e)){return this.m_widgetLayoutJsonByWidgetIdMap}for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getStringByKey(t.OcOrcaConstants.WIDGET_ID);if(t.XStringUtils.isNotNullAndNotEmpty(n)){var o=a.getStructureByKey(t.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(t.notNull(o)){this.m_widgetLayoutJsonByWidgetIdMap.put(n,o)}}}return this.m_widgetLayoutJsonByWidgetIdMap};t.OcOrcaPageLayout.prototype.releaseObject=function(){this.m_layoutType=null;this.m_pageLayoutJson=null;this.m_widgetLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetLayoutJsonByWidgetIdMap);this.m_widgetSectionLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetSectionLayoutJsonByWidgetIdMap);this.m_widgetLaneLayoutJsonByWidgetIdMap=t.XObjectExt.release(this.m_widgetLaneLayoutJsonByWidgetIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaThresholds=function(){};t.OcOrcaThresholds.prototype=new t.XObject;t.OcOrcaThresholds.prototype._ff_c="OcOrcaThresholds";t.OcOrcaThresholds.create=function(e){var r=new t.OcOrcaThresholds;r.setupThresholds(e);return r};t.OcOrcaThresholds.prototype.m_context=null;t.OcOrcaThresholds.prototype.m_thresholds=null;t.OcOrcaThresholds.prototype.setupThresholds=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcOrcaThresholds.prototype.getThresholdByDatasource=function(t){return this.getThresholds().getByKey(t)};t.OcOrcaThresholds.prototype.getThresholds=function(){if(t.notNull(this.m_thresholds)){return this.m_thresholds}this.m_thresholds=t.XHashMapByString.create();var e=this.getStoryEntityHelper().getStoryEntityAsJson();var r=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(e,t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS);if(t.isNull(r)){return this.m_thresholds}var a=r.getKeysAsReadOnlyListOfString();for(var n=0;n<a.size();n++){var o=a.get(n);this.addOrcaThresholdsToThresholdMap(o,r,this.m_thresholds)}return this.m_thresholds};t.OcOrcaThresholds.prototype.addOrcaThresholdsToThresholdMap=function(t,e,r){var a=e.getStructureByKey(t);var n=a.getKeysAsReadOnlyListOfString();for(var o=0;o<n.size();o++){var s=n.get(o);var i=a.getStructureByKey(s);this.addOrcaDimensionToThresholdMap(t,i,r)}};t.OcOrcaThresholds.prototype.addOrcaDimensionToThresholdMap=function(e,r,a){var n=r.getKeysAsReadOnlyListOfString();for(var o=0;o<n.size();o++){var s=n.get(o);var i=r.getStructureByKey(s);var c=t.OcThreshold.create(e,i);a.put(e,c)}};t.OcOrcaThresholds.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper()};t.OcOrcaThresholds.prototype.getContext=function(){return this.m_context};t.OcOrcaThresholds.prototype.toString=function(){var e=this.getThresholds().getValuesAsReadOnlyList();var r=t.XStringBuffer.create();r.append("Thresholds:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". Threshold: ").append(n.getName())}return r.toString()};t.OcOrcaThresholds.prototype.releaseObject=function(){this.m_context=null;this.m_thresholds=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_thresholds);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaPageWidgetHelper=function(){};t.OcOrcaPageWidgetHelper.prototype=new t.XObject;t.OcOrcaPageWidgetHelper.prototype._ff_c="OcOrcaPageWidgetHelper";t.OcOrcaPageWidgetHelper.create=function(e){var r=new t.OcOrcaPageWidgetHelper;r.setupStoryHelper(e);return r};t.OcOrcaPageWidgetHelper.prototype.m_pageIds=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetIds=null;t.OcOrcaPageWidgetHelper.prototype.m_pageJsonByPageIdMap=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetJsonByWidgetIdMap=null;t.OcOrcaPageWidgetHelper.prototype.m_widgetsIdsByPageIdMap=null;t.OcOrcaPageWidgetHelper.prototype.setupStoryHelper=function(e){t.XObject.prototype.setup.call(this);this.m_pageJsonByPageIdMap=t.XLinkedHashMapByString.create();this.m_widgetJsonByWidgetIdMap=t.XHashMapByString.create();this.m_widgetsIdsByPageIdMap=t.XHashMapByString.create();var r=e.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(t.OcOrcaConstants.STORY_PAGES);for(var a=0;a<r.size();a++){var n=r.getStructureAt(a);if(n.getBooleanByKeyExt(t.OcOrcaConstants.PAGE_IS_HIDDEN,false)){continue}var o=n.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNullOrEmpty(o)){continue}this.m_pageJsonByPageIdMap.put(o,n);var s=this.getSortedWidgetJsonsFromPageJson(n);var i=s.getKeysAsReadOnlyListOfString();this.m_widgetsIdsByPageIdMap.put(o,i);for(var c=0;c<i.size();c++){var O=i.get(c);this.m_widgetJsonByWidgetIdMap.put(O,s.getByKey(O))}}};t.OcOrcaPageWidgetHelper.prototype.getPageIds=function(){if(t.isNull(this.m_pageIds)){this.m_pageIds=this.getPageJsonByPageIdMap().getKeysAsReadOnlyListOfString()}return this.m_pageIds};t.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageId=function(t){return this.getPageJsonByPageIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageId=function(t){return this.getWidgetIdsByPageIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetId=function(t){return this.getWidgetJsonByWidgetIdMap().getByKey(t)};t.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageIdMap=function(){return this.m_pageJsonByPageIdMap};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetIdMap=function(){return this.m_widgetJsonByWidgetIdMap};t.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageIdMap=function(){return this.m_widgetsIdsByPageIdMap};t.OcOrcaPageWidgetHelper.prototype.getSortedWidgetJsonsFromPageJson=function(e){var r=this.getWidgetJsonsFromPageJson(e);var a=this.getSortedWidgetIds(e);var n=t.XLinkedHashMapByString.create();for(var o=0;o<a.size();o++){var s=a.get(o);var i=r.getByKey(s);if(t.notNull(i)){r.remove(s);n.put(s,i)}}var c=r.getKeysAsIteratorOfString();while(c.hasNext()){var O=c.next();var u=r.getByKey(O);n.put(O,u)}return n};t.OcOrcaPageWidgetHelper.prototype.getWidgetJsonsFromPageJson=function(e){var r=t.XLinkedHashMapByString.create();var a=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET);for(var n=0;n<a.size();n++){var o=a.get(n);var s=o.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNotNullAndNotEmpty(s)){r.put(s,o)}}return r};t.OcOrcaPageWidgetHelper.prototype.getSortedWidgetIds=function(e){if(this.isPageResponsive(e)){return t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID)}return t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID)};t.OcOrcaPageWidgetHelper.prototype.isPageResponsive=function(e){var r=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(e,t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE);return t.XCollectionUtils.hasElements(r)&&t.XString.isEqual(r.get(0),t.OcOrcaConstants.PAGE_IS_RESPONSIVE)};t.OcOrcaPageWidgetHelper.prototype.releaseObject=function(){this.m_pageIds=t.XObjectExt.release(this.m_pageIds);this.m_widgetIds=t.XObjectExt.release(this.m_widgetIds);this.m_pageJsonByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageJsonByPageIdMap);this.m_widgetJsonByWidgetIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetJsonByWidgetIdMap);this.m_widgetsIdsByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsIdsByPageIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcOrcaStoryEntityHelper=function(){};t.OcOrcaStoryEntityHelper.prototype=new t.XObject;t.OcOrcaStoryEntityHelper.prototype._ff_c="OcOrcaStoryEntityHelper";t.OcOrcaStoryEntityHelper.create=function(e,r){var a=new t.OcOrcaStoryEntityHelper;a.setupStoryEntityHelper(e,r);return a};t.OcOrcaStoryEntityHelper.prototype.m_storyAsJson=null;t.OcOrcaStoryEntityHelper.prototype.m_storyEntityAsJson=null;t.OcOrcaStoryEntityHelper.prototype.m_entitiesAsJsonByEntityTypeMap=null;t.OcOrcaStoryEntityHelper.prototype.m_gridDefinitionByGridIdMap=null;t.OcOrcaStoryEntityHelper.prototype.m_context=null;t.OcOrcaStoryEntityHelper.prototype.setupStoryEntityHelper=function(e,r){t.XObject.prototype.setup.call(this);this.m_context=r;this.m_storyAsJson=e};t.OcOrcaStoryEntityHelper.prototype.getStoryAsJson=function(){return this.m_storyAsJson};t.OcOrcaStoryEntityHelper.prototype.getStoryEntityAsJson=function(){if(t.notNull(this.m_storyEntityAsJson)){return this.m_storyEntityAsJson}var e=this.getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY);if(t.notNull(e)&&e.size()===1){this.m_storyEntityAsJson=e.get(0).getStructureByKey(t.OcOrcaConstants.STORY_ENTITY_DATA)}if(t.isNull(this.m_storyEntityAsJson)){var r=t.OcMessage.newInvalidStoryError();this.getContext().getMessageManager().addMessage(r);throw t.XException.createIllegalArgumentException(r.getText())}return this.m_storyEntityAsJson};t.OcOrcaStoryEntityHelper.prototype.getContext=function(){return this.m_context};t.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityType=function(e){var r=this.getEntitiesAsJsonByEntityTypeMap().getByKey(e);if(t.isNull(r)){r=t.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(e,r)}return r};t.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityTypeMap=function(){if(t.notNull(this.m_entitiesAsJsonByEntityTypeMap)){return this.m_entitiesAsJsonByEntityTypeMap}this.m_entitiesAsJsonByEntityTypeMap=t.XHashMapByString.create();var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getStoryAsJson(),t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES);for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getStringByKey(t.OcOrcaConstants.STORY_ENTITY_TYPE);if(t.XStringUtils.isNullOrEmpty(n)){continue}var o=this.m_entitiesAsJsonByEntityTypeMap.getByKey(n);if(t.isNull(o)){o=t.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(n,o)}o.add(a)}return this.m_entitiesAsJsonByEntityTypeMap};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitions=function(){return this.getGridDefinitionByGridIdMap().getValuesAsReadOnlyList()};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridId=function(t){return this.getGridDefinitionByGridIdMap().getByKey(t)};t.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridIdMap=function(){if(t.notNull(this.m_gridDefinitionByGridIdMap)){return this.m_gridDefinitionByGridIdMap}this.m_gridDefinitionByGridIdMap=t.XHashMapByString.create();var e=this.getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_GRID);for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.notNull(n)){var o=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(a,t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION);if(t.XCollectionUtils.hasElements(o)){this.m_gridDefinitionByGridIdMap.put(n,t.OcOrcaGridDefinition.create(n,o.get(0)))}}}return this.m_gridDefinitionByGridIdMap};t.OcOrcaStoryEntityHelper.prototype.releaseObject=function(){this.m_context=null;this.m_storyAsJson=t.XObjectExt.release(this.m_storyAsJson);this.m_storyEntityAsJson=t.XObjectExt.release(this.m_storyEntityAsJson);this.m_entitiesAsJsonByEntityTypeMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_entitiesAsJsonByEntityTypeMap);this.m_gridDefinitionByGridIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_gridDefinitionByGridIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcQuasarDataProviderConverter=function(){};t.OcQuasarDataProviderConverter.prototype=new t.XObject;t.OcQuasarDataProviderConverter.prototype._ff_c="OcQuasarDataProviderConverter";t.OcQuasarDataProviderConverter.convert=function(e,r,a){var n=t.PrFactory.createStructure();var o=t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME,o);t.OcQuasarDataProviderConverter.addDatasetsToDocument(e,n);var s=e.getWidgetType();if(s===t.OcWidgetType.CHART||s===t.OcWidgetType.KPI||s===t.OcWidgetType.ANALYTICAL_CARD){var i=e;n.put(t.OcQuasarConstants.QUASAR_GLOBAL_DEF,t.OcQuasarDataProviderConverter.getGlobalDefinition(i));var c=i.getVizDef();if(t.notNull(a)){c.putString(t.OcQuasarConstants.STORY_PAGE_ID,a)}n.put(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF,c);t.OcQuasarDataProviderConverter.addThresholdDefinition(i)}else if(s===t.OcWidgetType.GRID){var O=e.getFireflyQuery();n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY,O)}return n};t.OcQuasarDataProviderConverter.addDatasetsToDocument=function(e,r){var a=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(a)){return}r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME,a.getCubeName());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE,a.getDatasource());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID,a.getModelId());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM,t.OcQuasarDataProviderConverter.getSystemName(a));if(a.getVariables()!==null&&!a.getVariables().isEmpty()){var n=r.putNewList(t.OcQuasarConstants.QUASAR_VARIABLES);n.addAll(a.getVariables())}};t.OcQuasarDataProviderConverter.getDataset=function(e){var r=e.getDatasets();if(t.XCollectionUtils.hasElements(r)){return r.get(0)}return null};t.OcQuasarDataProviderConverter.getSystemName=function(e){var r=e.getSystemName();if(t.XStringUtils.isNullOrEmpty(r)){return t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME}return r};t.OcQuasarDataProviderConverter.getGlobalDefinition=function(e){var r=t.PrFactory.createStructure();var a=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(a)){return null}var n=a.getDatasource();var o=e.getStory().getColorSyncs();if(t.notNull(o)){var s=o.getStructureByKey(n);r.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC,s)}return r};t.OcQuasarDataProviderConverter.addThresholdDefinition=function(e){var r=e.getVizDef();var a=t.OcQuasarDataProviderConverter.getDataset(e);if(t.isNull(a)){return}var n=a.getDatasource();r.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD,t.OcQuasarDataProviderConverter.getThresholdByDatasource(e,n))};t.OcQuasarDataProviderConverter.getThresholdByDatasource=function(e,r){var a=e.getStory().getThresholds().getThresholdByDatasource(r);if(t.isNull(a)){return null}var n=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(e.getVizDef(),t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS);if(t.notNull(n)&&n.containsKey(r)){return a.getException()}return null};t.OcQuasarDataProviderConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarOptions=function(){};t.OcQuasarOptions.prototype=new t.XObject;t.OcQuasarOptions.prototype._ff_c="OcQuasarOptions";t.OcQuasarOptions.create=function(e){var r=new t.OcQuasarOptions;r.setupOptions(e);return r};t.OcQuasarOptions.prototype.m_mainLayoutType=null;t.OcQuasarOptions.prototype.m_chartType=null;t.OcQuasarOptions.prototype.m_useSingleWidgetLayout=false;t.OcQuasarOptions.prototype.m_context=null;t.OcQuasarOptions.prototype.setupOptions=function(e){t.XObject.prototype.setup.call(this);this.m_context=e;this.m_mainLayoutType=t.OcLayoutType.CANVAS;this.m_chartType=t.OcChartType.HIGHCHARTS};t.OcQuasarOptions.prototype.getMainLayoutType=function(){return this.m_mainLayoutType};t.OcQuasarOptions.prototype.setMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcQuasarOptions.prototype.getChartType=function(){return this.m_chartType};t.OcQuasarOptions.prototype.setChartType=function(t){this.m_chartType=t};t.OcQuasarOptions.prototype.useSingleWidgetLayout=function(){return this.m_useSingleWidgetLayout};t.OcQuasarOptions.prototype.setUseSingleWidgetLayout=function(t){this.m_useSingleWidgetLayout=t};t.OcQuasarOptions.prototype.getContext=function(){return this.m_context};t.OcQuasarOptions.prototype.releaseObject=function(){this.m_context=null;this.m_mainLayoutType=null;this.m_chartType=null;t.XObject.prototype.releaseObject.call(this)};t.OcQuasarPageContentConverter={convert:function(e,r,a){a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,t.OcQuasarPageContentConverter.getQuasarLayoutType(e,r));a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,e.getBackgroundColor());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");a.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS,t.OcQuasarPageContentConverter.getQuasarContentItems(e,r));t.OcQuasarPageContentConverter.addBackgroundPictureToQuasarContent(e,a,r)},getQuasarLayoutType:function(e,r){var a;if(e.isResponsive()){a=t.OcLayoutType.FLOW.getName()}else{if(r.getMainLayoutType()===t.OcLayoutType.CANVAS){a=t.OcLayoutType.CANVAS.getName()}else{a=t.OcLayoutType.FLOW.getName()}}return a},getQuasarContentItems:function(e,r){var a=t.PrFactory.createList();var n=e.getWidgetManager().getWidgets();for(var o=0;o<n.size();o++){var s=n.get(o);var i=t.OcQuasarWidgetConverter.convert(s,r);if(t.notNull(i)){a.add(i)}}return a},addBackgroundPictureToQuasarContent:function(e,r,a){if(a.getMainLayoutType()===t.OcLayoutType.CANVAS){return}var n=e.getWidgetManager().getBackgroundImageWidget();if(t.isNull(n)){return}var o=n.getImage();if(o.hasImageData()){r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,o.getImageData())}else{r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,n.getImageUrl())}},convertPageToAnalyticalCard:function(e,r,a){var n=e.getContext().getStoryEntityFactory().getFirstWidgetByType(e,t.OcWidgetType.ANALYTICAL_CARD);if(t.notNull(n)){r.add(t.OcQuasarDataProviderConverter.convert(n,a,e.getId()))}var o=e.getContext().getStoryEntityFactory().getFirstWidgetByType(e,t.OcWidgetType.CHART);if(t.notNull(o)){r.add(t.OcQuasarDataProviderConverter.convert(o,a,e.getId()))}if(t.isNull(n)&&t.isNull(o)){return null}return t.OcQuasarWidgetConverter.convertCard(n,o,a)},convertPageToCompositeAnalyticalCard:function(e,r,a,n,o){var s=a.getContext().getStoryEntityFactory().getFirstWidgetByType(a,t.OcWidgetType.KPI);if(t.notNull(s)){n.add(t.OcQuasarDataProviderConverter.convert(s,o,a.getId()))}var i=a.getContext().getStoryEntityFactory().getFirstWidgetByType(a,t.OcWidgetType.CHART);if(t.notNull(i)){n.add(t.OcQuasarDataProviderConverter.convert(i,o,a.getId()))}var c=a.getContext().getStoryEntityFactory().getFirstWidgetByType(a,t.OcWidgetType.GRID);if(t.notNull(c)){n.add(t.OcQuasarDataProviderConverter.convert(c,o,a.getId()))}return t.OcQuasarWidgetConverter.convertCompositeCard(e,r,s,i,c,o)}};t.OcQuasarPageConverter=function(){};t.OcQuasarPageConverter.prototype=new t.XObject;t.OcQuasarPageConverter.prototype._ff_c="OcQuasarPageConverter";t.OcQuasarPageConverter.convertPage=function(e,r,a,n){t.OcQuasarPageContentConverter.convert(e,r,a);t.OcQuasarPageConverter.convertDataProvidersOfPage(e,r,n)};t.OcQuasarPageConverter.convertWidget=function(e,r){var a=t.PrFactory.createStructure();var n=t.OcQuasarWidgetConverter.convert(e,r);a.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_CONTENT,n);a.putNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS,t.OcQuasarPageConverter.convertDataProviderOfWidget(e,r));return a};t.OcQuasarPageConverter.convertDataProviderOfWidget=function(e,r){if(!e.getWidgetType().hasDataProvider()){return null}var a=t.OcQuasarDataProviderConverter.convert(e,r,null);if(t.isNull(a)){return null}var n=t.PrFactory.createList();n.add(a);return n};t.OcQuasarPageConverter.convertDataProvidersOfPage=function(e,r,a){var n=e.getWidgetManager().getWigdetsWithDataProvider();if(!t.XCollectionUtils.hasElements(n)){return}for(var o=0;o<n.size();o++){var s=n.get(o);var i=t.OcQuasarDataProviderConverter.convert(s,r,e.getId());if(t.notNull(i)){a.add(i)}}};t.OcQuasarPageConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarStoryConverter={convertStory:function(e,r){var a=t.XList.create();var n=e.getPageManager().getPages();for(var o=0;o<n.size();o++){var s=t.PrFactory.createStructure();var i=n.get(o);t.OcQuasarPageConverter.convertPage(i,r,s.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),s.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS));a.add(s)}return a},convertPage:function(e,r){var a=t.PrFactory.createStructure();t.OcQuasarPageConverter.convertPage(e,r,a.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),a.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS));return a},convertWidget:function(e,r){return t.OcQuasarPageConverter.convertWidget(e,r)}};t.OcQuasarWidgetConverter=function(){};t.OcQuasarWidgetConverter.prototype=new t.XObject;t.OcQuasarWidgetConverter.prototype._ff_c="OcQuasarWidgetConverter";t.OcQuasarWidgetConverter.convert=function(e,r){var a=t.PrFactory.createStructure();a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,e.getNormalizedDataReferenceId());a.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TYPE,e.getQuasarName(r));t.OcQuasarWidgetConverter.addBindingToDocument(e,a);var n=t.OcQuasarWidgetConverter.addWidgetContentToDocument(e,a,r);if(!n){return null}n=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(e,a,r);if(!n){return null}return a};t.OcQuasarWidgetConverter.convertCard=function(e,r,a){var n=t.PrFactory.createStructure();var o=false;n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TYPE,t.OcWidgetType.ANALYTICAL_CARD.getQuasarName());if(t.notNull(e)){n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,e.getNormalizedDataReferenceId());o=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(e,n,a)}else if(t.notNull(r)){n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_NAME,r.getId());n.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ENTITY_ID,r.getNormalizedDataReferenceId());o=t.OcQuasarWidgetLayoutConverter.addLayoutToDocument(r,n,a)}if(!o){return null}t.OcQuasarWidgetConverter.addMultiBindingBindingToDocument(e,r,n);return n};t.OcQuasarWidgetConverter.convertCompositeCard=function(e,r,a,n,o,s){var i=r.getDescription();if(t.XStringUtils.isNullOrEmpty(i)){i=r.getName()}t.OcQuasarWidgetConverter.addTextContent(e,i);t.OcQuasarWidgetConverter.addTextContent(e,r.getPublicUrl());var c=null;if(t.notNull(a)){c=t.OcQuasarWidgetConverter.convert(a,s);e.add(c)}if(t.notNull(n)){e.add(t.OcQuasarWidgetConverter.convert(n,s))}if(t.notNull(o)){e.add(t.OcQuasarWidgetConverter.convert(o,s))}return c};t.OcQuasarWidgetConverter.addTextContent=function(e,r){var a=e.addNewStructure();a.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,t.OcQuasarConstants.QUASAR_ITEM_TEXT);a.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,r)};t.OcQuasarWidgetConverter.addBindingToDocument=function(e,r){var a=e.getWidgetType();if(a!==t.OcWidgetType.ANALYTICAL_CARD&&a!==t.OcWidgetType.KPI&&a!==t.OcWidgetType.CHART&&a!==t.OcWidgetType.GRID){return}var n=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId()));if(a===t.OcWidgetType.KPI||a===t.OcWidgetType.CHART){var o=t.PrFactory.createStructure();if(a===t.OcWidgetType.KPI){o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE)}else{o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE)}o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,n);r.put(t.OcQuasarConstants.QUASAR_ITEM_BINDING,o)}else if(a===t.OcWidgetType.ANALYTICAL_CARD){var s=t.PrFactory.createStructure();s.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);s.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,n);r.putNewList(t.OcQuasarConstants.QUASAR_ITEM_BINDINGS).add(s)}else if(a===t.OcWidgetType.GRID){r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING,n)}};t.OcQuasarWidgetConverter.addMultiBindingBindingToDocument=function(e,r,a){var n=a.putNewList(t.OcQuasarConstants.QUASAR_ITEM_BINDINGS);var o;var s;if(t.notNull(e)){o=n.addNewStructure();s=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(e.getStory().getNormalizedName(),"_",e.getNormalizedDataReferenceId()));o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,s)}if(t.notNull(r)){o=n.addNewStructure();s=t.XStringUtils.concatenate2("dp:",t.XStringUtils.concatenate3(r.getStory().getNormalizedName(),"_",r.getNormalizedDataReferenceId()));o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,t.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE);o.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,s)}};t.OcQuasarWidgetConverter.addWidgetContentToDocument=function(e,r,a){var n=true;var o=e.getWidgetType();if(o===t.OcWidgetType.TEXT){n=t.OcQuasarWidgetConverter.addTextContentToDocument(e,r)}else if(o===t.OcWidgetType.UNKNOWN){n=t.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument(r)}else if(o===t.OcWidgetType.PICTOGRAM){n=t.OcQuasarWidgetConverter.addPictogramContentToDocument(e,r)}else if(o===t.OcWidgetType.IMAGE){n=t.OcQuasarWidgetConverter.addImageContentToDocument(e,r,a)}else if(o===t.OcWidgetType.PAGE_FILTER){n=t.OcQuasarWidgetConverter.addPageFilterContentToDocument(e,r)}else if(o===t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL){n=t.OcQuasarWidgetConverter.addFieldSelectionContentToDocument(e,r)}else if(o===t.OcWidgetType.CALCULATION_INPUT_CONTROL){n=t.OcQuasarWidgetConverter.addCalculationVariableContentToDocument(e,r)}return n};t.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument=function(e){e.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TEXT,t.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET);return true};t.OcQuasarWidgetConverter.addPictogramContentToDocument=function(e,r){var a=e.getPictogram();r.putString(t.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG,a);return true};t.OcQuasarWidgetConverter.addPageFilterContentToDocument=function(e,r){var a=e.getPageFilter();if(t.isNull(a)){return false}r.putString("CustomControl",r.getStringByKey("CType"));r.remove("CType");r.putString("Id",a.getStringByKey("source"));return true};t.OcQuasarWidgetConverter.addFieldSelectionContentToDocument=function(e,r){var a=e.getFieldSelection();if(t.isNull(a)){return false}r.putString("CustomControl",r.getStringByKey("CType"));r.remove("CType");r.putString("Id",a.getStringByKey("id"));return true};t.OcQuasarWidgetConverter.addCalculationVariableContentToDocument=function(e,r){var a=e.getCalcVar();if(t.isNull(a)){return false}r.putString("CustomControl",r.getStringByKey("CType"));r.remove("CType");r.putString("Id",a.getStringByKey("id"));return true};t.OcQuasarWidgetConverter.addTextContentToDocument=function(e,r){var a=e.getWidgetText();r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_TEXT,a);return true};t.OcQuasarWidgetConverter.addImageContentToDocument=function(e,r,a){if(e.getLayout().isBackgroundWidget()&&a.getMainLayoutType()!==t.OcLayoutType.CANVAS){return false}var n=e.getImage();if(t.isNull(n)){return false}if(n.hasImageData()){r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,n.getImageData())}else{r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,e.getImageUrl())}return true};t.OcQuasarWidgetConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcQuasarWidgetLayoutConverter=function(){};t.OcQuasarWidgetLayoutConverter.prototype=new t.XObject;t.OcQuasarWidgetLayoutConverter.prototype._ff_c="OcQuasarWidgetLayoutConverter";t.OcQuasarWidgetLayoutConverter.addLayoutToDocument=function(e,r,a){if(a.useSingleWidgetLayout()){return t.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout(r)}var n=t.OcQuasarWidgetLayoutConverter.processLayoutType(e,a);if(t.isNull(n)){return false}if(n===t.OcLayoutType.FLOW_SIMPLE){return t.OcQuasarWidgetLayoutConverter.addSimpleLayout(e,r)}else if(n===t.OcLayoutType.FLOW){return t.OcQuasarWidgetLayoutConverter.addFlexLayout(e,r)}return t.OcQuasarWidgetLayoutConverter.addCanvasLayout(e,r)};t.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout=function(e){e.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");e.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");return true};t.OcQuasarWidgetLayoutConverter.addCanvasLayout=function(e,r){var a=e.getLayout();if(a.getHeight()>0){r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,t.XStringUtils.concatenate2(t.XInteger.convertToString(a.getHeight()),t.OcQuasarConstants.QUASAR_LAYOUT_PX))}r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,t.XStringUtils.concatenate2(t.XInteger.convertToString(a.getWidth()),t.OcQuasarConstants.QUASAR_LAYOUT_PX));r.putInteger(t.OcQuasarConstants.QUASAR_LAYOUT_X,a.getX());r.putInteger(t.OcQuasarConstants.QUASAR_LAYOUT_Y,a.getY());t.OcStoryUtils.addIntegerGtZeroToStructure(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS,a.getCornerRadius(),r);t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,r);return true};t.OcQuasarWidgetLayoutConverter.addFlexLayout=function(e,r){var a=e.getWidgetType();if(a===t.OcWidgetType.CHART||a===t.OcWidgetType.GRID||a===t.OcWidgetType.IMAGE||a===t.OcWidgetType.PICTOGRAM){r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%")}t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,r);return true};t.OcQuasarWidgetLayoutConverter.addSimpleLayout=function(e,r){r.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%");t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(e,r);return true};t.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout=function(e,r){var a=e.getLayout();if(!a.isBackgroundWidget()){r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR,a.getBackgroundColor());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR,a.getBorderColor());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT,a.getBorderFormat());r.putStringNotNullAndNotEmpty(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE,a.getBorderStyle());t.OcStoryUtils.addIntegerGtZeroToStructure(t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE,a.getBorderSize(),r)}};t.OcQuasarWidgetLayoutConverter.processLayoutType=function(e,r){var a=null;var n=r.getMainLayoutType();if(n===t.OcLayoutType.FLOW||e.getPage().isResponsive()){a=t.OcLayoutType.FLOW}else if(n===t.OcLayoutType.FLOW_SIMPLE){a=t.OcLayoutType.FLOW_SIMPLE}else{a=t.OcLayoutType.CANVAS}if(t.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget(e,a)){return a}return null};t.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget=function(e,r){var a=e.getWidgetType();if(r===t.OcLayoutType.FLOW){return a===t.OcWidgetType.CHART||a===t.OcWidgetType.GRID||a===t.OcWidgetType.IMAGE||a===t.OcWidgetType.PICTOGRAM||a===t.OcWidgetType.TEXT||a===t.OcWidgetType.PAGE_FILTER||a===t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL||a===t.OcWidgetType.CALCULATION_INPUT_CONTROL}else if(r===t.OcLayoutType.FLOW_SIMPLE){return a===t.OcWidgetType.CHART||a===t.OcWidgetType.GRID||a===t.OcWidgetType.IMAGE}return true};t.OcQuasarWidgetLayoutConverter.prototype.releaseObject=function(){t.XObject.prototype.releaseObject.call(this)};t.OcDatasets=function(){};t.OcDatasets.prototype=new t.XObject;t.OcDatasets.prototype._ff_c="OcDatasets";t.OcDatasets.prototype.m_context=null;t.OcDatasets.prototype.m_datasets=null;t.OcDatasets.prototype.setupDatasets=function(e){t.XObject.prototype.setup.call(this);this.m_context=e};t.OcDatasets.prototype.getDatasetByDatasource=function(t){return this.getDatasets().getByKey(t)};t.OcDatasets.prototype.getCubeNames=function(){var e=t.XListOfString.create();var r=this.getDatasetsAsReadOnlyList();for(var a=0;a<r.size();a++){var n=r.get(a).getCubeName();if(t.XStringUtils.isNotNullAndNotEmpty(n)){e.add(n)}}e.sortByDirection(t.XSortDirection.ASCENDING);return e};t.OcDatasets.prototype.updateDatasetsWithCubesMetdata=function(e){if(!t.XCollectionUtils.hasElements(e)){return}var r=this.getDatasetsAsReadOnlyList();for(var a=0;a<r.size();a++){var n=r.get(a);var o=n.getCubeName();if(t.XStringUtils.isNullOrEmpty(o)){continue}var s=t.XString.replace(o,"CUBE:","");var i=e.getByKey(s);if(t.isNull(i)){this.getContext().getMessageManager().addMessage(t.OcMessage.newDataSourceNotFound(t.Severity.WARNING,o));continue}if(t.XStringUtils.isNotNullAndNotEmpty(i.getDataSourceName())){n.setDatasource(i.getDataSourceName())}if(i.getFormulas()!==null){n.setFormulaAliases(i.getFormulas())}if(i.getMemberDefinitions()!==null){n.setMemberDefinitions(i.getMemberDefinitions())}this.updateSystemName(n,i)}};t.OcDatasets.prototype.updateSystemName=function(e,r){var a=r.getSystemName();if(t.XStringUtils.isNotNullAndNotEmpty(a)){e.setSystemName(a)}else{var n=this.getContext().getConnection();if(t.notNull(n)){e.setSystemName(n.getSystemName())}}};t.OcDatasets.prototype.getDatasets=function(){if(t.isNull(this.m_datasets)){this.m_datasets=this.processDatasets();if(t.isNull(this.m_datasets)){this.m_datasets=t.XHashMapByString.create()}}return this.m_datasets};t.OcDatasets.prototype.getDatasetsAsReadOnlyList=function(){return this.getDatasets().getValuesAsReadOnlyList()};t.OcDatasets.prototype.getContext=function(){return this.m_context};t.OcDatasets.prototype.toString=function(){var e=this.getDatasetsAsReadOnlyList();var r=t.XStringBuffer.create();r.append("Datasets:");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append('. Dataset for datasource "').append(n.getDatasource()).append('", cube "').append(n.getCubeName());r.append('" and model "').append(n.getModelId()).append('"')}return r.toString()};t.OcDatasets.prototype.releaseObject=function(){this.m_context=null;this.m_datasets=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_datasets);t.XObject.prototype.releaseObject.call(this)};t.OcImages=function(){};t.OcImages.prototype=new t.XObject;t.OcImages.prototype._ff_c="OcImages";t.OcImages.IMAGE_URL="/sap/fpa/services/rest/fpa/story/get-static-content/";t.OcImages.prototype.m_storyId=null;t.OcImages.prototype.m_imageUrl=null;t.OcImages.prototype.m_images=null;t.OcImages.prototype.m_context=null;t.OcImages.prototype.setupImages=function(e,r){t.XObject.prototype.setup.call(this);this.m_storyId=e;this.m_context=r};t.OcImages.prototype.getImageByImageId=function(t){return this.getImages().getByKey(t)};t.OcImages.prototype.getImages=function(){if(t.isNull(this.m_images)){this.m_images=this.processImages()}return this.m_images};t.OcImages.prototype.getImageUrl=function(){if(t.notNull(this.m_imageUrl)){return this.m_imageUrl}this.m_imageUrl="";var e=this.getContext().getConnection();if(t.notNull(e)){var r=e.getSystemUri();var a=e.getTenantId();this.m_imageUrl=t.XStringUtils.concatenate5(r,t.OcImages.IMAGE_URL,this.getStoryId(),"/%s?tenant=",a)}return this.m_imageUrl};t.OcImages.prototype.getStoryId=function(){return this.m_storyId};t.OcImages.prototype.getContext=function(){return this.m_context};t.OcImages.prototype.releaseObject=function(){this.m_storyId=null;this.m_context=null;this.m_images=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_images);t.XObject.prototype.releaseObject.call(this)};t.OcPageManager=function(){};t.OcPageManager.prototype=new t.XObject;t.OcPageManager.prototype._ff_c="OcPageManager";t.OcPageManager.create=function(e,r){var a=new t.OcPageManager;a.setupPageManager(e,r);return a};t.OcPageManager.prototype.m_pages=null;t.OcPageManager.prototype.m_pageByPageIdMap=null;t.OcPageManager.prototype.m_pageByPageNameMap=null;t.OcPageManager.prototype.m_widgetByWidgetIdMap=null;t.OcPageManager.prototype.setupPageManager=function(e,r){t.XObject.prototype.setup.call(this);this.m_pageByPageIdMap=r.getStoryEntityFactory().createPagesOfStory(e)};t.OcPageManager.prototype.hasPages=function(){return this.getPageByPageIdMap().hasElements()};t.OcPageManager.prototype.getPages=function(){if(t.isNull(this.m_pages)){this.m_pages=this.getPageByPageIdMap().getValuesAsReadOnlyList()}return this.m_pages};t.OcPageManager.prototype.getPageByPageId=function(t){return this.getPageByPageIdMap().getByKey(t)};t.OcPageManager.prototype.getPageByPageName=function(t){return this.getPageByPageNameMap().getByKey(t)};t.OcPageManager.prototype.containsPage=function(t){return this.getPageByPageIdMap().containsKey(t)};t.OcPageManager.prototype.getPageByWidgetId=function(e){var r=this.getWidgetByWidgetIdMap().getByKey(e);if(t.notNull(r)){return r.getPage()}return null};t.OcPageManager.prototype.getWidgetByWidgetId=function(t){return this.getWidgetByWidgetIdMap().getByKey(t)};t.OcPageManager.prototype.getAllWidgetIds=function(){return this.getWidgetByWidgetIdMap().getKeysAsReadOnlyListOfString()};t.OcPageManager.prototype.getAllWidgets=function(){return this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList()};t.OcPageManager.prototype.getAllWidgetIdsByWidgetType=function(e){var r=t.XListOfString.create();var a=this.getWidgetByWidgetIdMap().getIterator();while(a.hasNext()){var n=a.next();if(n.getWidgetType()===e){r.add(n.getId())}}return r};t.OcPageManager.prototype.getPageByPageIdMap=function(){return this.m_pageByPageIdMap};t.OcPageManager.prototype.getPageByPageNameMap=function(){if(t.notNull(this.m_pageByPageNameMap)){return this.m_pageByPageNameMap}this.m_pageByPageNameMap=t.XHashMapByString.create();var e=this.getPages();for(var r=0;r<e.size();r++){var a=e.get(r);if(t.XStringUtils.isNotNullAndNotEmpty(a.getName())){this.m_pageByPageNameMap.put(a.getName(),a)}}return this.m_pageByPageNameMap};t.OcPageManager.prototype.getWidgetByWidgetIdMap=function(){if(t.notNull(this.m_widgetByWidgetIdMap)){return this.m_widgetByWidgetIdMap}this.m_widgetByWidgetIdMap=t.XHashMapByString.create();var e=this.getPageByPageIdMap().getValuesAsReadOnlyList();for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getWidgetManager().getWidgets();for(var o=0;o<n.size();o++){var s=n.get(o);this.m_widgetByWidgetIdMap.put(s.getId(),s)}}return this.m_widgetByWidgetIdMap};t.OcPageManager.prototype.toString=function(){if(t.isNull(this.m_pageByPageIdMap)){return"Pages not yet initialized"}var e=this.getPages();var r=t.XStringBuffer.create();r.append("Pages: (").appendInt(e.size()).append(")");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". Page: ").append(n.getId()).append(' "').append(n.getName()).append('" (').appendInt(n.getWidgetManager().getWidgetIds().size()).append(" widgets)")}return r.toString()};t.OcPageManager.prototype.releaseObject=function(){this.m_pages=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pages);this.m_pageByPageIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageIdMap);this.m_pageByPageNameMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageNameMap);this.m_widgetByWidgetIdMap=t.XObjectExt.release(this.m_widgetByWidgetIdMap);t.XObject.prototype.releaseObject.call(this)};t.OcWidgetLayout=function(){};t.OcWidgetLayout.prototype=new t.XObject;t.OcWidgetLayout.prototype._ff_c="OcWidgetLayout";t.OcWidgetLayout.prototype.m_x=0;t.OcWidgetLayout.prototype.m_y=0;t.OcWidgetLayout.prototype.m_width=0;t.OcWidgetLayout.prototype.m_height=0;t.OcWidgetLayout.prototype.m_backgroundWidget=false;t.OcWidgetLayout.prototype.m_backgroundColor=null;t.OcWidgetLayout.prototype.m_borderColor=null;t.OcWidgetLayout.prototype.m_borderFormat=null;t.OcWidgetLayout.prototype.m_borderStyle=null;t.OcWidgetLayout.prototype.m_borderSize=0;t.OcWidgetLayout.prototype.m_cornerRadius=0;t.OcWidgetLayout.prototype.getX=function(){return this.m_x};t.OcWidgetLayout.prototype.setX=function(t){this.m_x=t};t.OcWidgetLayout.prototype.getY=function(){return this.m_y};t.OcWidgetLayout.prototype.setY=function(t){this.m_y=t};t.OcWidgetLayout.prototype.getWidth=function(){return this.m_width};t.OcWidgetLayout.prototype.setWidth=function(t){this.m_width=t};t.OcWidgetLayout.prototype.getHeight=function(){return this.m_height};t.OcWidgetLayout.prototype.setHeight=function(t){this.m_height=t};t.OcWidgetLayout.prototype.isBackgroundWidget=function(){return this.m_backgroundWidget};t.OcWidgetLayout.prototype.setIsBackgroundWidget=function(t){this.m_backgroundWidget=t};t.OcWidgetLayout.prototype.getBackgroundColor=function(){return this.m_backgroundColor};t.OcWidgetLayout.prototype.setBackgroundColor=function(t){this.m_backgroundColor=t};t.OcWidgetLayout.prototype.getBorderColor=function(){return this.m_borderColor};t.OcWidgetLayout.prototype.setBorderColor=function(t){this.m_borderColor=t};t.OcWidgetLayout.prototype.getBorderFormat=function(){return this.m_borderFormat};t.OcWidgetLayout.prototype.setBorderFormat=function(t){this.m_borderFormat=t};t.OcWidgetLayout.prototype.getBorderStyle=function(){return this.m_borderStyle};t.OcWidgetLayout.prototype.setBorderStyle=function(t){this.m_borderStyle=t};t.OcWidgetLayout.prototype.getBorderSize=function(){return this.m_borderSize};t.OcWidgetLayout.prototype.setBorderSize=function(t){this.m_borderSize=t};t.OcWidgetLayout.prototype.getCornerRadius=function(){return this.m_cornerRadius};t.OcWidgetLayout.prototype.setCornerRadius=function(t){this.m_cornerRadius=t};t.OcWidgetLayout.prototype.releaseObject=function(){this.m_backgroundColor=null;this.m_borderColor=null;this.m_borderFormat=null;this.m_borderStyle=null;t.XObject.prototype.releaseObject.call(this)};t.OcWidgetManager=function(){};t.OcWidgetManager.prototype=new t.XObject;t.OcWidgetManager.prototype._ff_c="OcWidgetManager";t.OcWidgetManager.create=function(e,r){var a=new t.OcWidgetManager;a.setupWidgetManager(e,r);return a};t.OcWidgetManager.prototype.m_widgetByWidgetIdMap=null;t.OcWidgetManager.prototype.m_widgetIds=null;t.OcWidgetManager.prototype.m_widgets=null;t.OcWidgetManager.prototype.m_widgetsWithDataProvider=null;t.OcWidgetManager.prototype.m_hasBackgroundImageWidget=null;t.OcWidgetManager.prototype.m_backgroundImageWidget=null;t.OcWidgetManager.prototype.setupWidgetManager=function(e,r){t.XObject.prototype.setup.call(this);this.m_widgetByWidgetIdMap=r.getStoryEntityFactory().createWidgetsOfPage(e)};t.OcWidgetManager.prototype.getWidgetById=function(t){return this.getWidgetByWidgetIdMap().getByKey(t)};t.OcWidgetManager.prototype.getWidgets=function(){if(t.isNull(this.m_widgets)){this.m_widgets=this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList()}return this.m_widgets};t.OcWidgetManager.prototype.hasWidgets=function(){return t.XCollectionUtils.hasElements(this.getWidgetByWidgetIdMap())};t.OcWidgetManager.prototype.getWidgetIds=function(){if(t.isNull(this.m_widgetIds)){this.m_widgetIds=this.getWidgetByWidgetIdMap().getKeysAsReadOnlyListOfString()}return this.m_widgetIds};t.OcWidgetManager.prototype.containsWidget=function(t){return this.getWidgetByWidgetIdMap().containsKey(t)};t.OcWidgetManager.prototype.getBackgroundImageWidget=function(){if(t.isNull(this.m_hasBackgroundImageWidget)){this.m_backgroundImageWidget=this.processBackgroundImageWidget();this.m_hasBackgroundImageWidget=t.TriStateBool.lookup(t.notNull(this.m_backgroundImageWidget))}return this.m_backgroundImageWidget};t.OcWidgetManager.prototype.getWigdetsWithDataProvider=function(){if(t.isNull(this.m_widgetsWithDataProvider)){return this.m_widgetsWithDataProvider=this.processWidgetsWithDataProvider()}return this.m_widgetsWithDataProvider};t.OcWidgetManager.prototype.processWidgetsWithDataProvider=function(){var e=t.XList.create();var r=this.getWidgets();for(var a=0;a<r.size();a++){var n=r.get(a);if(n.getWidgetType().hasDataProvider()){e.add(n)}}return e};t.OcWidgetManager.prototype.processBackgroundImageWidget=function(){var e=this.getWidgets();for(var r=0;r<e.size();r++){var a=e.get(r);if(a.getWidgetType()===t.OcWidgetType.IMAGE&&a.getLayout().isBackgroundWidget()){return a}}return null};t.OcWidgetManager.prototype.getWidgetByWidgetIdMap=function(){return this.m_widgetByWidgetIdMap};t.OcWidgetManager.prototype.toString=function(){if(t.isNull(this.m_widgetByWidgetIdMap)){return"Widgets not yet initialized"}var e=this.getWidgets();var r=t.XStringBuffer.create();r.append("Widgets: (").appendInt(e.size()).append(")");for(var a=0;a<e.size();a++){var n=e.get(a);r.appendNewLine().appendInt(a+1).append(". Widget: ").append(n.getId()).append(" of type ").append(n.getWidgetType().getName())}return r.toString()};t.OcWidgetManager.prototype.releaseObject=function(){this.m_backgroundImageWidget=null;this.m_hasBackgroundImageWidget=t.XObjectExt.release(this.m_hasBackgroundImageWidget);this.m_widgetIds=t.XObjectExt.release(this.m_widgetIds);this.m_widgets=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgets);this.m_widgetByWidgetIdMap=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetByWidgetIdMap);this.m_widgetsWithDataProvider=t.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsWithDataProvider);t.XObject.prototype.releaseObject.call(this)};t.OcJsonPath=function(){};t.OcJsonPath.prototype=new t.XObject;t.OcJsonPath.prototype._ff_c="OcJsonPath";t.OcJsonPath.create=function(e){var r=new t.OcJsonPath;r.setup();r.m_pathElements=t.XListOfString.create();var a=t.XStringTokenizer.splitString(e,".");if(t.XCollectionUtils.hasElements(a)){for(var n=0;n<a.size();n++){r.m_pathElements.add(a.get(n))}}return r};t.OcJsonPath.prototype.m_pathElements=null;t.OcJsonPath.prototype.hasPathElements=function(){return this.m_pathElements.hasElements()};t.OcJsonPath.prototype.size=function(){return this.m_pathElements.size()};t.OcJsonPath.prototype.getPathElementAt=function(t){return this.m_pathElements.get(t)};t.OcJsonPath.prototype.releaseObject=function(){this.m_pathElements=t.XObjectExt.release(this.m_pathElements);t.XObject.prototype.releaseObject.call(this)};t.OcJsonPath.prototype.toString=function(){var e=t.XStringBuffer.create();for(var r=0;r<this.m_pathElements.size();r++){if(r>0){e.append(".")}e.append(this.m_pathElements.get(r))}return e.toString()};t.OcJsonPathEvaluator={getJsonPathElements:function(e,r){return t.OcJsonPathEvaluator.getJsonPathElementsInternal(e,r,false)},getJsonPathElementsAsStrings:function(e,r){var a=t.OcJsonPathEvaluator.getJsonPathElements(e,r);return t.OcJsonPathEvaluator.convertResultsToListOfString(a)},getJsonPathElementsAsStructures:function(e,r){var a=t.OcJsonPathEvaluator.getJsonPathElements(e,r);return t.OcJsonPathEvaluator.convertResultsToListOfStructures(a)},getSingleJsonPathElement:function(e,r){var a=t.OcJsonPathEvaluator.getJsonPathElementsInternal(e,r,true);if(!t.XCollectionUtils.hasElements(a)){return null}if(a.size()!==1){throw t.XException.createIllegalArgumentException(t.XStringUtils.concatenate3('PrElement "',r.getPathElementAt(0),'" is not of cardinality 1'))}return a.get(0)},getSingleJsonPathElementAsString:function(e,r){var a=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,r);if(t.notNull(a)&&a.isString()){return a.asString().getString()}return null},getSingleJsonPathElementAsStructure:function(e,r){var a=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,r);if(t.notNull(a)&&a.isStructure()){return a.asStructure()}return null},getSingleJsonPathElementAsList:function(e,r){var a=t.OcJsonPathEvaluator.getSingleJsonPathElement(e,r);if(t.notNull(a)&&a.isList()){return a.asList()}return null},getJsonPathElementsInternal:function(e,r,a){var n=t.XList.create();if(t.isNull(r)||!r.hasPathElements()){return n}t.OcJsonPathEvaluator.getElementsAndAddToResults(e,r,0,n,a);return n},getElementsAndAddToResults:function(e,r,a,n,o){if(t.isNull(e)||!r.hasPathElements()){return}if(e.isStructure()){t.OcJsonPathEvaluator.processStructure(e.asStructure(),r,a,n,o)}else if(e.isList()){if(o){throw t.XException.createIllegalArgumentException(t.XStringUtils.concatenate3('PrElement "',r.getPathElementAt(a-1),'" is not of cardinality 1'))}t.OcJsonPathEvaluator.processList(e.asList(),r,a,n,o)}else{return}},processStructure:function(e,r,a,n,o){var s=r.getPathElementAt(a);var i=e.getByKey(s);if(t.notNull(i)){if(a===r.size()-1){n.add(i)}else{t.OcJsonPathEvaluator.getElementsAndAddToResults(i,r,a+1,n,o)}}},processList:function(e,r,a,n,o){for(var s=0;s<e.size();s++){var i=e.get(s);t.OcJsonPathEvaluator.getElementsAndAddToResults(i,r,a,n,o)}},convertResultsToListOfString:function(e){var r=t.XListOfString.create();if(!t.XCollectionUtils.hasElements(e)){return r}for(var a=0;a<e.size();a++){var n=e.get(a);if(n.isString()){var o=t.PrUtils.convertElementToStringValue(n,null);if(t.XStringUtils.isNotNullAndNotEmpty(o)){r.add(o)}}else if(n.isList()){var s=n.asList();for(var i=0;i<s.size();i++){var c=s.getStringAt(i);if(t.XStringUtils.isNotNullAndNotEmpty(c)){r.add(c)}}}}return r},convertResultsToListOfStructures:function(e){var r=t.XList.create();if(!t.XCollectionUtils.hasElements(e)){return r}for(var a=0;a<e.size();a++){var n=e.get(a);if(t.isNull(n)){continue}if(n.isStructure()){r.add(n.asStructure())}else if(n.isList()){var o=n.asList();for(var s=0;s<o.size();s++){var i=o.getStructureAt(s);if(t.notNull(i)){r.add(i)}}}}return r}};t.OcMessage={UNEXPECTED_ERROR:"An error is preventing the story to be displayed",INVALID_STORY_NAME:"The story does not have a valid id and name",INVALID_STORY:"The story is not valid",MODEL_NOT_FOUND:'No model metadata found for data source "{0}".',PAGE_WITH_MULTIPLE_LAYOUTS:'The page "{0}" has {1} layouts. Pages with multiple layout definitions are not supported.',WIDGET_WITHOUT_CONTENT:'The widget "{0}" of type "{1}" on page "{2}" does not have content.',WIDGET_WITHOUT_DATA_SOURCE:'The widget "{0}" of type "{1}" on page "{2}" does not have a valid data source.',GRID_WITHOUT_DEFINITION:'The grid "{0}" on page "{1}" does not have a valid definition.',GRID_WITHOUT_FIREFLY_QUERY:'The grid "{0}" on page "{1}" does not have a valid query definition.',CHART_WITHOUT_VIZ_DEF:'The chart "{0}" on page "{1}" does not have valid VizDef.',KPI_WITHOUT_VIZ_DEF:'The kpi "{0}" on page "{1}" does not have valid VizDef.',newUnexpectedError:function(e){return t.OcMessage.createErrorMessageWithCause(t.OcMessage.UNEXPECTED_ERROR,t.XErrorHelper.convertExceptionToString(e))},newInvalidStoryNameError:function(){return t.OcMessage.createMessage(t.Severity.ERROR,t.ErrorCodes.ET_INVALID_VALUE,t.OcMessage.INVALID_STORY_NAME)},newInvalidStoryError:function(){return t.OcMessage.createMessage(t.Severity.ERROR,t.ErrorCodes.ET_INVALID_VALUE,t.OcMessage.INVALID_STORY)},newDataSourceNotFound:function(e,r){var a=t.OcMessage.createTextWithSingleArgument(t.OcMessage.MODEL_NOT_FOUND,r);return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newPageWithMultipleLayouts:function(e,r,a){var n=t.OcMessage.createTextWithTwoArguments(t.OcMessage.PAGE_WITH_MULTIPLE_LAYOUTS,r.getName(),t.XInteger.convertToString(a));return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,n)},newWidgetWithoutContent:function(e,r){var a=t.OcMessage.createTextWithThreeArguments(t.OcMessage.WIDGET_WITHOUT_CONTENT,r.getId(),r.getWidgetType().getName(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newWidgetWithoutDatasource:function(e,r){var a=t.OcMessage.createTextWithThreeArguments(t.OcMessage.WIDGET_WITHOUT_DATA_SOURCE,r.getId(),r.getWidgetType().getName(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newGridWithoutDefinition:function(e,r){var a=t.OcMessage.createTextWithTwoArguments(t.OcMessage.GRID_WITHOUT_DEFINITION,r.getId(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newGridWithoutQuery:function(e,r){var a=t.OcMessage.createTextWithTwoArguments(t.OcMessage.GRID_WITHOUT_FIREFLY_QUERY,r.getId(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newChartWithoutVizDef:function(e,r){var a=t.OcMessage.createTextWithTwoArguments(t.OcMessage.CHART_WITHOUT_VIZ_DEF,r.getId(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},newKpiWithoutVizDef:function(e,r){var a=t.OcMessage.createTextWithTwoArguments(t.OcMessage.KPI_WITHOUT_VIZ_DEF,r.getId(),r.getPage().getName());return t.OcMessage.createMessage(e,t.ErrorCodes.ET_INVALID_VALUE,a)},createMessage:function(e,r,a){return t.XMessage.createMessage(t.OriginLayer.APPLICATION,e,r,a,null,false,null)},createErrorMessageWithCause:function(e,r){var a=t.XMessage.createError(t.OriginLayer.APPLICATION,r,null,false,null);return t.XMessage.createError(t.OriginLayer.APPLICATION,e,a,false,null)},createTextWithSingleArgument:function(e,r){return t.XString.replace(e,"{0}",r)},createTextWithTwoArguments:function(e,r,a){return t.XString.replace(t.OcMessage.createTextWithSingleArgument(e,r),"{1}",a)},createTextWithThreeArguments:function(e,r,a,n){return t.XString.replace(t.OcMessage.createTextWithTwoArguments(e,r,a),"{2}",n)}};t.OcStoryUtils={normalizeString:function(e){var r=e;if(t.XStringUtils.isNotNullAndNotEmpty(r)){r=t.XString.replace(r," ","_");r=t.XString.replace(r,",","_");r=t.XString.replace(r," ","_");r=t.XString.replace(r,"-","_");r=t.XString.replace(r,".","");r=t.XString.replace(r,"\\","_");r=t.XString.replace(r,"/","_");r=t.XString.replace(r,"(","_");r=t.XString.replace(r,")","_");r=t.XString.replace(r,"+","_");r=t.XString.replace(r,":","_");r=t.XString.replace(r,"<","_");r=t.XString.replace(r,">","_");r=t.XString.toLowerCase(r)}return r},addIntegerGtZeroToStructure:function(t,e,r){if(e>0){r.putInteger(t,e)}},getIntegerFromStructureByName:function(e,r){if(t.isNull(e)){return 0}var a=e.getByKey(r);if(t.isNull(a)){return 0}var n=t.PrUtils.convertElementToInteger(a);if(t.isNull(n)){return 0}return n.getInteger()},getValueOrEmptyString:function(e){return t.isNull(e)?"":e}};t.OcOrcaDatasets=function(){};t.OcOrcaDatasets.prototype=new t.OcDatasets;t.OcOrcaDatasets.prototype._ff_c="OcOrcaDatasets";t.OcOrcaDatasets.create=function(e){var r=new t.OcOrcaDatasets;r.setupOrcaDatasets(e);return r};t.OcOrcaDatasets.prototype.m_orcaContext=null;t.OcOrcaDatasets.prototype.setupOrcaDatasets=function(e){t.OcDatasets.prototype.setupDatasets.call(this,e);this.m_orcaContext=e};t.OcOrcaDatasets.prototype.processDatasets=function(){var e=t.XHashMapByString.create();this.addDatasetsOfDatasetEntities(e);this.addDatasetsOfGridWidgets(e);return e};t.OcOrcaDatasets.prototype.addDatasetsOfDatasetEntities=function(e){var r=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_DATASET);var a=r.getIterator();while(a.hasNext()){var n=a.next();var o=n.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.isNull(o)){continue}var s=t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID);var i=this.getDatasetFromDatasourceAndModel(o,s);if(t.notNull(i)){i.setVariables(t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(n,t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE));e.put(o,i)}}};t.OcOrcaDatasets.prototype.addDatasetsOfGridWidgets=function(e){var r=this.getStoryEntityHelper().getGridDefinitions();for(var a=0;a<r.size();a++){var n=r.get(a).getDatasource();if(e.containsKey(n)){continue}var o=this.getDatasetFromDatasourceAndModel(n,null);if(t.notNull(o)){e.put(n,o)}}};t.OcOrcaDatasets.prototype.getDatasetFromDatasourceAndModel=function(e,r){if(t.isNull(e)){return null}var a=r;if(t.isNull(a)){var n=t.XStringTokenizer.splitString(e,"[");var o=n.get(n.size()-1);var s=t.XStringTokenizer.splitString(o,"]");a=s.get(0)}var i=null;var c=t.XStringTokenizer.splitString(e,":");var O=c.get(0);if(t.XString.isEqual(O,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)){var u=c.get(1);var l=t.XStringTokenizer.splitString(u,"[");var g=l.get(l.size()-1);g=t.XString.substring(g,0,t.XString.size(g)-1);var p=t.XString.substring(g,0,1);if(t.XString.isEqual(p,"/")){g=t.XString.substring(g,1,t.XString.size(g));var y=t.XStringTokenizer.splitString(g,"/");var _=y.get(0);var d=y.get(1);d=t.XString.replace(d,"_qs_changed","");d=t.XString.replace(d,"_qs","");g=t.XStringUtils.concatenate3(_,":",d)}i=t.XStringUtils.concatenate3(t.OcOrcaConstants.CUBE,":",g)}else if(t.XString.isEqual(O,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)){var S=c.get(1);var C=t.XStringTokenizer.splitString(S,"[");var T=C.get(2);T=t.XString.substring(T,0,t.XString.size(T)-1);var E=C.get(C.size()-1);E=t.XString.substring(E,0,t.XString.size(E)-1);i=t.XStringUtils.concatenate5(t.OcOrcaConstants.CUBE,":",T,":",E)}var m=t.OcDataset.create(e,a);if(t.notNull(i)){m.setCubeName(i)}return m};t.OcOrcaDatasets.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaDatasets.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaDatasets.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcDatasets.prototype.releaseObject.call(this)};t.OcOrcaImages=function(){};t.OcOrcaImages.prototype=new t.OcImages;t.OcOrcaImages.prototype._ff_c="OcOrcaImages";t.OcOrcaImages.create=function(e,r){var a=new t.OcOrcaImages;a.setupImages(e,r);a.m_orcaContext=r;return a};t.OcOrcaImages.prototype.m_orcaContext=null;t.OcOrcaImages.prototype.processImages=function(){var e=t.XHashMapByString.create();var r=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(t.OcOrcaConstants.STORY_ENTITY_IMAGE);for(var a=0;a<r.size();a++){var n=r.get(a);var o=n.getStringByKey(t.OcOrcaConstants.ID_ELEMENT);if(t.XStringUtils.isNotNullAndNotEmpty(o)){var s=t.OcImage.create(o);s.setImageData(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA));s.setThumbnail(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(n,t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL));e.put(o,s)}}return e};t.OcOrcaImages.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaImages.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaImages.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcImages.prototype.releaseObject.call(this)};t.OcOrcaGridDefinition=function(){};t.OcOrcaGridDefinition.prototype=new t.DfIdObject;t.OcOrcaGridDefinition.prototype._ff_c="OcOrcaGridDefinition";t.OcOrcaGridDefinition.create=function(e,r){var a=new t.OcOrcaGridDefinition;a.setupGrid(e,r);return a};t.OcOrcaGridDefinition.prototype.m_gridJson=null;t.OcOrcaGridDefinition.prototype.m_datasource=null;t.OcOrcaGridDefinition.prototype.setupGrid=function(t,e){this.setupExt(t);this.m_gridJson=e};t.OcOrcaGridDefinition.prototype.getDatasource=function(){if(t.isNull(this.m_datasource)){this.m_datasource=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getGridJson(),t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE))}return this.m_datasource};t.OcOrcaGridDefinition.prototype.getFireflyQuery=function(){return this.getGridJson().getStringByKey(t.OcOrcaConstants.WIDGET_FIREFLY_QUERY)};t.OcOrcaGridDefinition.prototype.getGridJson=function(){return this.m_gridJson};t.OcOrcaGridDefinition.prototype.releaseObject=function(){this.m_gridJson=null;this.m_datasource=null;t.DfIdObject.prototype.releaseObject.call(this)};t.OcDataset=function(){};t.OcDataset.prototype=new t.XObject;t.OcDataset.prototype._ff_c="OcDataset";t.OcDataset.create=function(e,r){var a=new t.OcDataset;a.setupDataset(e,r);return a};t.OcDataset.prototype.m_datasource=null;t.OcDataset.prototype.m_modelId=null;t.OcDataset.prototype.m_cubeName=null;t.OcDataset.prototype.m_systemName=null;t.OcDataset.prototype.m_formulaAliases=null;t.OcDataset.prototype.m_memberDefinitions=null;t.OcDataset.prototype.m_variables=null;t.OcDataset.prototype.setupDataset=function(e,r){t.XObject.prototype.setup.call(this);this.m_datasource=e;this.m_modelId=r};t.OcDataset.prototype.getModelId=function(){return this.m_modelId};t.OcDataset.prototype.getVariables=function(){return this.m_variables};t.OcDataset.prototype.setVariables=function(t){this.m_variables=t};t.OcDataset.prototype.getDatasource=function(){return this.m_datasource};t.OcDataset.prototype.setDatasource=function(t){this.m_datasource=t};t.OcDataset.prototype.getCubeName=function(){return this.m_cubeName};t.OcDataset.prototype.setCubeName=function(t){this.m_cubeName=t};t.OcDataset.prototype.getSystemName=function(){return this.m_systemName};t.OcDataset.prototype.setSystemName=function(t){this.m_systemName=t};t.OcDataset.prototype.getFormulaAliases=function(){return this.m_formulaAliases};t.OcDataset.prototype.setFormulaAliases=function(t){this.m_formulaAliases=t};t.OcDataset.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions};t.OcDataset.prototype.setMemberDefinitions=function(t){this.m_memberDefinitions=t};t.OcDataset.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Dataset:").appendNewLine().append(" Datasource = ").append(this.getDatasource());e.appendNewLine().append(" Model Id = ").append(this.getModelId());e.appendNewLine().append(" Cube = ").append(this.getCubeName());return e.toString()};t.OcDataset.prototype.releaseObject=function(){this.m_datasource=null;this.m_modelId=null;this.m_cubeName=null;this.m_systemName=null;this.m_formulaAliases=null;this.m_memberDefinitions=null;this.m_variables=null;t.XObject.prototype.releaseObject.call(this)};t.OcImage=function(){};t.OcImage.prototype=new t.DfIdObject;t.OcImage.prototype._ff_c="OcImage";t.OcImage.create=function(e){var r=new t.OcImage;r.setupImage(e);return r};t.OcImage.prototype.m_imageData=null;t.OcImage.prototype.m_thumbnail=null;t.OcImage.prototype.setupImage=function(t){this.setupExt(t)};t.OcImage.prototype.hasImageData=function(){return this.getImageData()!==null};t.OcImage.prototype.getImageData=function(){return this.m_imageData};t.OcImage.prototype.setImageData=function(t){this.m_imageData=t};t.OcImage.prototype.getThumbnail=function(){return this.m_thumbnail};t.OcImage.prototype.setThumbnail=function(t){this.m_thumbnail=t};t.OcImage.prototype.releaseObject=function(){this.m_imageData=null;this.m_thumbnail=null;t.DfIdObject.prototype.releaseObject.call(this)};t.OcWidget=function(){};t.OcWidget.prototype=new t.DfIdObject;t.OcWidget.prototype._ff_c="OcWidget";t.OcWidget.prototype.m_widgetType=null;t.OcWidget.prototype.m_dataReferenceId=null;t.OcWidget.prototype.m_normalizedDataReferenceId=null;t.OcWidget.prototype.m_layout=null;t.OcWidget.prototype.m_page=null;t.OcWidget.prototype.setupWidget=function(e,r,a){t.DfIdObject.prototype.setupExt.call(this,e);this.m_widgetType=r;this.m_page=a};t.OcWidget.prototype.getWidgetType=function(){return this.m_widgetType};t.OcWidget.prototype.getDataReferenceId=function(){if(t.isNull(this.m_dataReferenceId)){this.m_dataReferenceId=t.OcStoryUtils.getValueOrEmptyString(this.processDataReferenceId())}return this.m_dataReferenceId};t.OcWidget.prototype.getNormalizedDataReferenceId=function(){if(t.isNull(this.m_normalizedDataReferenceId)){this.m_normalizedDataReferenceId=t.OcStoryUtils.normalizeString(this.getDataReferenceId())}return this.m_normalizedDataReferenceId};t.OcWidget.prototype.getQuasarName=function(t){return this.m_widgetType.getQuasarName()};t.OcWidget.prototype.getLayout=function(){if(t.isNull(this.m_layout)){this.m_layout=this.processLayout();if(t.isNull(this.m_layout)){this.m_layout=new t.OcWidgetLayout}}return this.m_layout};t.OcWidget.prototype.getStory=function(){return this.getPage().getStory()};t.OcWidget.prototype.getPage=function(){return this.m_page};t.OcWidget.prototype.getContext=function(){return this.getPage().getContext()};t.OcWidget.prototype.toString=function(){var e=this.getWidgetType();var r=t.XStringBuffer.create();r.append("Widget: ").append(this.getId()).appendNewLine().append(" Type = ").append(e.getName());r.appendNewLine().append(" Page = ").append(this.getPage().getName());var a=this.getDataReferenceId();if(t.XStringUtils.isNotNullAndNotEmpty(a)){r.appendNewLine().append(" Data Reference id = ").append(a)}return r.toString()};t.OcWidget.prototype.releaseObject=function(){this.m_dataReferenceId=null;this.m_normalizedDataReferenceId=null;this.m_page=null;t.XObjectExt.release(this.m_layout);t.DfIdObject.prototype.releaseObject.call(this)};t.OcConnection=function(){};t.OcConnection.prototype=new t.XObject;t.OcConnection.prototype._ff_c="OcConnection";t.OcConnection.createByConnection=function(e){var r=new t.OcConnection;r.setupConnection(e);return r};t.OcConnection.prototype.m_systemName=null;t.OcConnection.prototype.m_tenantId=null;t.OcConnection.prototype.m_systemUri=null;t.OcConnection.prototype.m_publicUrl=null;t.OcConnection.prototype.setupConnection=function(e){this.setup();if(t.notNull(e)){var r=e.getSystemDescription();if(t.notNull(r)){this.m_systemName=r.getSystemName();this.m_systemUri=r.getUrlExt(true,true,false,false,false,true,true,true,true)}this.m_tenantId=e.getPersonalization().getTenantId();this.m_publicUrl=e.getSystemConnect().getServerMetadata().getOrcaPublicUrl()}};t.OcConnection.prototype.getSystemName=function(){return this.m_systemName};t.OcConnection.prototype.getSystemUri=function(){return this.m_systemUri};t.OcConnection.prototype.getTenantId=function(){return this.m_tenantId};t.OcConnection.prototype.getOrcaPublicUrl=function(){return this.m_publicUrl};t.OcOrcaBaseWidget=function(){};t.OcOrcaBaseWidget.prototype=new t.OcWidget;t.OcOrcaBaseWidget.prototype._ff_c="OcOrcaBaseWidget";t.OcOrcaBaseWidget.prototype.m_widgetJson=null;t.OcOrcaBaseWidget.prototype.m_orcaPage=null;t.OcOrcaBaseWidget.prototype.setupOrcaBaseWidget=function(e,r,a,n){t.OcWidget.prototype.setupWidget.call(this,e,r,n);this.m_orcaPage=n;this.m_widgetJson=a};t.OcOrcaBaseWidget.prototype.processDataReferenceId=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID)};t.OcOrcaBaseWidget.prototype.getWidgetJson=function(){return this.m_widgetJson};t.OcOrcaBaseWidget.prototype.getOrcaStory=function(){return this.getOrcaPage().getOrcaStory()};t.OcOrcaBaseWidget.prototype.getOrcaPage=function(){return this.m_orcaPage};t.OcOrcaBaseWidget.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext()};t.OcOrcaBaseWidget.prototype.processLayout=function(){if(this.getPageLayout().hasCanvasLayout()){return this.processCanvasLayout()}else if(this.getPage().isResponsive()){return this.processResponsivePageLayout()}return null};t.OcOrcaBaseWidget.prototype.processCanvasLayout=function(){var e=new t.OcWidgetLayout;var r=this.getPageLayout();var a=r.getSectionLayoutJsonByWidgetId(this.getId());if(t.notNull(a)){e.setX(t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_POS_X));e.setY(t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_POS_Y));var n=t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_HEIGHT);var o=t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_WIDTH);e.setHeight(n);e.setIsBackgroundWidget(this.processIsBackgroundWidget(n,o))}var s=r.getWidgetLayoutJsonByWidgetId(this.getId());if(t.notNull(s)){this.addBorderDefinition(e,s);e.setBackgroundColor(s.getStringByKey(t.OcOrcaConstants.WIDGET_BACKGROUND_COLOR));var i=e.getX()+t.OcStoryUtils.getIntegerFromStructureByName(s,t.OcOrcaConstants.WIDGET_POS_X);e.setX(i);var c=e.getY()+t.OcStoryUtils.getIntegerFromStructureByName(s,t.OcOrcaConstants.WIDGET_POS_Y);e.setY(c);e.setWidth(t.OcStoryUtils.getIntegerFromStructureByName(s,t.OcOrcaConstants.WIDGET_WIDTH));e.setHeight(t.OcStoryUtils.getIntegerFromStructureByName(s,t.OcOrcaConstants.WIDGET_HEIGHT))}return e};t.OcOrcaBaseWidget.prototype.processResponsivePageLayout=function(){var e=new t.OcWidgetLayout;var r=this.getPageLayout().getLaneLayoutJsonByWidgetId(this.getId());if(t.notNull(r)){this.addBorderDefinition(e,r)}e.setIsBackgroundWidget(false);return e};t.OcOrcaBaseWidget.prototype.addBorderDefinition=function(e,r){var a=r.getStructureByKey(t.OcOrcaConstants.WIDGET_BORDER);if(t.isNull(a)){return}e.setBorderColor(a.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_COLOR));e.setBorderFormat(a.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_FORMAT));e.setBorderSize(t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_BORDER_THICKNESS));e.setBorderStyle(a.getStringByKey(t.OcOrcaConstants.WIDGET_BORDER_STYLE));e.setCornerRadius(t.OcStoryUtils.getIntegerFromStructureByName(a,t.OcOrcaConstants.WIDGET_BORDER_RADIUS))};t.OcOrcaBaseWidget.prototype.processIsBackgroundWidget=function(e,r){var a=this.getPageLayout().getPageLayoutJson();var n=t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(a,t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);var o=t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_HEIGHT);var s=t.OcStoryUtils.getIntegerFromStructureByName(n,t.OcOrcaConstants.WIDGET_WIDTH);var i=e>0&&e===o&&r>0&&r===s;return i};t.OcOrcaBaseWidget.prototype.getPageLayout=function(){return this.getOrcaPage().getPageLayout()};t.OcOrcaBaseWidget.prototype.releaseObject=function(){this.m_orcaPage=null;this.m_widgetJson=null;t.OcWidget.prototype.releaseObject.call(this)};t.OcOrcaGridWidget=function(){};t.OcOrcaGridWidget.prototype=new t.OcOrcaBaseWidget;t.OcOrcaGridWidget.prototype._ff_c="OcOrcaGridWidget";t.OcOrcaGridWidget.create=function(e,r,a){var n=new t.OcOrcaGridWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.GRID,r,a);return n};t.OcOrcaGridWidget.prototype.m_fireflyQuery=null;t.OcOrcaGridWidget.prototype.m_datasets=null;t.OcOrcaGridWidget.prototype.m_hasGridDefinition=null;t.OcOrcaGridWidget.prototype.m_gridDefinition=null;t.OcOrcaGridWidget.prototype.getFireflyQuery=function(){if(t.isNull(this.m_fireflyQuery)){var e=this.getGridDefinition();if(t.isNull(e)){this.m_fireflyQuery=""}else{this.m_fireflyQuery=t.OcStoryUtils.getValueOrEmptyString(e.getFireflyQuery());if(t.XStringUtils.isNullOrEmpty(this.m_fireflyQuery)){this.getContext().getMessageManager().addMessage(t.OcMessage.newGridWithoutQuery(t.Severity.WARNING,this))}}}return this.m_fireflyQuery};t.OcOrcaGridWidget.prototype.getDatasets=function(){if(t.notNull(this.m_datasets)){return this.m_datasets}this.m_datasets=t.XList.create();var e=this.getGridDefinition();if(t.isNull(e)){return this.m_datasets}var r=e.getDatasource();if(t.XStringUtils.isNotNullAndNotEmpty(r)){var a=this.getStory().getDatasets().getDatasetByDatasource(r);if(t.notNull(a)){this.m_datasets.add(a)}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutDatasource(t.Severity.WARNING,this))}return this.m_datasets};t.OcOrcaGridWidget.prototype.getGridDefinition=function(){if(t.isNull(this.m_hasGridDefinition)){this.m_gridDefinition=this.getOrcaContext().getStoryEntityHelper().getGridDefinitionByGridId(this.getDataReferenceId());this.m_hasGridDefinition=t.TriStateBool.lookup(t.notNull(this.m_gridDefinition));if(!this.m_hasGridDefinition.getBoolean()){this.getContext().getMessageManager().addMessage(t.OcMessage.newGridWithoutDefinition(t.Severity.WARNING,this))}}return this.m_gridDefinition};t.OcOrcaGridWidget.prototype.toString=function(){var e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));var r=this.getFireflyQuery();if(t.XStringUtils.isNotNullAndNotEmpty(r)){e.appendNewLine().append("FF query available")}else{e.appendNewLine().append(" No FF query of grid available")}var a=this.getDatasets();if(t.XCollectionUtils.hasElements(a)){e.appendNewLine().append(a.toString())}return e.toString()};t.OcOrcaGridWidget.prototype.releaseObject=function(){this.m_fireflyQuery=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);this.m_hasGridDefinition=t.XObjectExt.release(this.m_hasGridDefinition);this.m_gridDefinition=t.XObjectExt.release(this.m_gridDefinition);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcOrcaWidget=function(){};t.OcOrcaWidget.prototype=new t.OcOrcaBaseWidget;t.OcOrcaWidget.prototype._ff_c="OcOrcaWidget";t.OcOrcaWidget.create=function(e,r,a,n){var o=new t.OcOrcaWidget;o.setupOrcaBaseWidget(e,r,a,n);return o};t.OcOrcaWidget.prototype.m_widgetText=null;t.OcOrcaWidget.prototype.m_pictogram=null;t.OcOrcaWidget.prototype.m_hasImage=null;t.OcOrcaWidget.prototype.m_image=null;t.OcOrcaWidget.prototype.getWidgetText=function(){if(t.isNull(this.m_widgetText)){this.m_widgetText=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT));if(t.XStringUtils.isNullOrEmpty(this.m_widgetText)){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutContent(t.Severity.INFO,this))}}return this.m_widgetText};t.OcOrcaWidget.prototype.getPictogram=function(){if(t.isNull(this.m_pictogram)){this.m_pictogram=t.OcStoryUtils.getValueOrEmptyString(t.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG))}return this.m_pictogram};t.OcOrcaWidget.prototype.getFieldSelection=function(){var e=this.getOrcaPage().getStory().getFieldSelections().getFieldSelections().getValuesAsReadOnlyList();for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getSelectionInfos().asStructure().getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){a.getSelectionInfos().asStructure().putString("id",a.getId());return a.getSelectionInfos().asStructure()}}return null};t.OcOrcaWidget.prototype.getCalcVar=function(){var e=this.getOrcaPage().getStory().getCalculationVariables().getCalculationVariables().getValuesAsReadOnlyList();for(var r=0;r<e.size();r++){var a=e.get(r);var n=a.getSelectionInfos().asStructure().getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){a.getSelectionInfos().asStructure().putString("id",a.getId());return a.getSelectionInfos().asStructure()}}return null};t.OcOrcaWidget.prototype.getPageFilter=function(){var e=this.getOrcaPage().getPageFilters();for(var r=0;r<e.size();r++){var a=e.getStructureAt(r);var n=a.getStringByKey("source");if(t.XString.isEqual(this.getId(),n)){return a}}return null};t.OcOrcaWidget.prototype.getPageGroup=function(){var e=t.PrFactory.createList();var r=this.getOrcaPage().getPageGroups();for(var a=0;a<r.size();a++){var n=r.getStructureAt(a);var o=n.getListByKey("members");for(var s=0;s<o.size();s++){if(t.XString.isEqual(o.getStringAt(s),this.getId())){var i=e.addNewStructure();i.putNotNullAndNotEmpty("driverGroupInfo",n.getStructureByKey("driverGroupInfo"))}}}return e};t.OcOrcaWidget.prototype.getImage=function(){if(t.isNull(this.m_hasImage)){this.m_image=this.getStory().getImages().getImageByImageId(this.getDataReferenceId());this.m_hasImage=t.TriStateBool.lookup(t.notNull(this.m_image));if(t.isNull(this.m_image)){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutContent(t.Severity.WARNING,this))}}return this.m_image};t.OcOrcaWidget.prototype.getImageUrl=function(){return t.XString.replace(this.getStory().getImages().getImageUrl(),"%s",this.getDataReferenceId())};t.OcOrcaWidget.prototype.toString=function(){var e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));var r=this.getWidgetType();if(r===t.OcWidgetType.TEXT){var a=this.getWidgetText();if(t.XStringUtils.isNullOrEmpty(a)){e.appendNewLine().append(" Text = The text of the widget is empty").append(a)}else{e.appendNewLine().append(" Text = ").append(a)}}else if(r===t.OcWidgetType.IMAGE){var n=this.getImage();if(t.isNull(n)||!n.hasImageData()){e.appendNewLine().append(" Image = No image available")}else{e.appendNewLine().append(" Image = ").append(n.getId());if(t.XStringUtils.isNotNullAndNotEmpty(n.getThumbnail())){e.appendNewLine().append("Image thumbnail available")}}}return e.toString()};t.OcOrcaWidget.prototype.releaseObject=function(){this.m_widgetText=null;this.m_pictogram=null;this.m_hasImage=t.XObjectExt.release(this.m_hasImage);this.m_image=t.XObjectExt.release(this.m_image);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcOrcaWidgetWithDpAndVizDef=function(){};t.OcOrcaWidgetWithDpAndVizDef.prototype=new t.OcOrcaBaseWidget;t.OcOrcaWidgetWithDpAndVizDef.prototype._ff_c="OcOrcaWidgetWithDpAndVizDef";t.OcOrcaWidgetWithDpAndVizDef.prototype.m_vizDef=null;t.OcOrcaWidgetWithDpAndVizDef.prototype.m_datasets=null;t.OcOrcaWidgetWithDpAndVizDef.prototype.getVizDef=function(){if(t.isNull(this.m_vizDef)){this.m_vizDef=this.getModifiedVizDef();if(t.isNull(this.m_vizDef)){this.m_vizDef=t.PrFactory.createStructure()}if(!this.m_vizDef.hasElements()){this.getContext().getMessageManager().addMessage(this.getMissingVitDefWarning())}}return this.m_vizDef};t.OcOrcaWidgetWithDpAndVizDef.prototype.getDatasets=function(){if(t.notNull(this.m_datasets)){return this.m_datasets}this.m_datasets=t.XList.create();var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStrings(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS);for(var r=0;r<e.size();r++){var a=this.getOrcaStory().getDatasets().getDatasetByDatasource(e.get(r));if(t.notNull(a)){this.m_datasets.add(a)}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(t.OcMessage.newWidgetWithoutDatasource(t.Severity.WARNING,this))}return this.m_datasets};t.OcOrcaWidgetWithDpAndVizDef.prototype.getModifiedVizDef=function(){var e=t.PrFactory.createStructureDeepCopy(t.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(this.getWidgetJson(),t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF));if(t.isNull(e)){return null}e.putString(t.OcQuasarConstants.QUASAR_WIDGET_ID,this.getWidgetJson().getStringByKey(t.OcOrcaConstants.ID_ELEMENT));e.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR,this.getLayout().getBackgroundColor());var r=e.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_CHART);this.addDatasetInformationToVizDef(r);var a=r.getListByKey(t.OcOrcaConstants.VIZ_DEF_BINDING);for(var n=0;n<a.size();n++){var o=a.getStructureAt(n);var s=o.getListByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE);for(var i=0;i<s.size();i++){var c=s.getStructureAt(i);var O=c.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(t.isNull(O)){continue}if(t.XString.isEqual(O,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER)||t.XString.isEqual(O,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION)||t.XString.isEqual(O,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE)){this.addMeasureSyncToVizDef(c)}var u=c.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY);var l=u.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(t.XString.isEqual(O,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)||t.XString.isEqual(l,t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)){var g=u.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION);if(t.isNull(g)){g=c.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION)}var p=e.getListByKey(t.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO);if(t.notNull(p)){for(var y=0;y<p.size();y++){var _=p.getStructureAt(y);var d=_.getStructureByKey(t.OcOrcaConstants.VIZ_DEF_ENTITY_ID);var S=d.getStringByKey(t.OcOrcaConstants.VIZ_DEF_DIMENSION);if(t.XString.isEqual(S,g)){c.putInteger(t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL,t.OcStoryUtils.getIntegerFromStructureByName(_,t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL));c.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE,_.getStringByKey(t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE))}}}}}}return e};t.OcOrcaWidgetWithDpAndVizDef.prototype.addDatasetInformationToVizDef=function(e){var r=this.getDatasets();if(!t.XCollectionUtils.hasElements(r)){return}var a=r.get(0);var n=a.getFormulaAliases();if(t.notNull(n)){e.put(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES,n)}var o=a.getMemberDefinitions();if(t.notNull(o)){e.put(t.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS,o)}};t.OcOrcaWidgetWithDpAndVizDef.prototype.addMeasureSyncToVizDef=function(e){var r=e.getStringByKey(t.OcOrcaConstants.VIZ_DEF_SOURCE_ID);if(t.XStringUtils.isNullOrEmpty(r)){return}var a=this.getStory().getMeasureSyncs().getMeasureSyncByMeasureName(r);if(t.notNull(a)){e.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR,a.getColor());e.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN,a.getPattern())}};t.OcOrcaWidgetWithDpAndVizDef.prototype.toString=function(){var e=t.XStringBuffer.create();e.append(t.OcOrcaBaseWidget.prototype.toString.call(this));var r=this.getVizDef();if(t.notNull(r)&&r.hasElements()){e.appendNewLine().append(" VizDef available")}else{e.appendNewLine().append(" No VizDef of chart available")}var a=this.getDatasets();if(t.XCollectionUtils.hasElements(a)){e.appendNewLine().append(a.toString())}return e.toString()};t.OcOrcaWidgetWithDpAndVizDef.prototype.releaseObject=function(){this.m_vizDef=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);t.OcOrcaBaseWidget.prototype.releaseObject.call(this)};t.OcMeasureSync=function(){};t.OcMeasureSync.prototype=new t.DfNameObject;t.OcMeasureSync.prototype._ff_c="OcMeasureSync";t.OcMeasureSync.create=function(e){var r=new t.OcMeasureSync;r._setupInternal(e);return r};t.OcMeasureSync.prototype.m_color=null;t.OcMeasureSync.prototype.m_pattern=null;t.OcMeasureSync.prototype.getColor=function(){return this.m_color};t.OcMeasureSync.prototype.setColor=function(t){this.m_color=t};t.OcMeasureSync.prototype.getPattern=function(){return this.m_pattern};t.OcMeasureSync.prototype.setPattern=function(t){this.m_pattern=t};t.OcMeasureSync.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Measure Sync: ").append(this.getName());e.appendNewLine().append("Color = ").append(this.getColor()).append(", Pattern = ").append(this.getPattern());return e.toString()};t.OcMeasureSync.prototype.releaseObject=function(){this.m_color=null;this.m_pattern=null;t.DfNameObject.prototype.releaseObject.call(this)};t.OcThreshold=function(){};t.OcThreshold.prototype=new t.DfNameObject;t.OcThreshold.prototype._ff_c="OcThreshold";t.OcThreshold.create=function(e,r){var a=new t.OcThreshold;a.setupThreshold(e,r);return a};t.OcThreshold.prototype.m_exception=null;t.OcThreshold.prototype.setupThreshold=function(t,e){this._setupInternal(t);this.m_exception=e};t.OcThreshold.prototype.getException=function(){return this.m_exception};t.OcThreshold.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Thresholds: ").append(this.getName());e.appendNewLine().append(t.PrUtils.serialize(this.getException(),true,true,4));return e.toString()};t.OcThreshold.prototype.releaseObject=function(){this.m_exception=null;t.DfNameObject.prototype.releaseObject.call(this)};t.OcOrcaConstants=function(){};t.OcOrcaConstants.prototype=new t.XConstant;t.OcOrcaConstants.prototype._ff_c="OcOrcaConstants";t.OcOrcaConstants.ID_ELEMENT="id";t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE="FPA_IS_LIVE_INTEGRATION";t.OcOrcaConstants.STORY_NAME="name";t.OcOrcaConstants.STORY_RESOURCE_ID="resourceId";t.OcOrcaConstants.STORY_DESCRIPTION="description";t.OcOrcaConstants.STORY_METADATA="metadata";t.OcOrcaConstants.STORY_DATA="data";t.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME="ownerDisplayName";t.OcOrcaConstants.STORY_CREATED_TIME="createdTime";t.OcOrcaConstants.STORY_CREATED_BY="createdBy";t.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME="createdByDisplayName";t.OcOrcaConstants.STORY_MODIFIED_TIME="modifiedTime";t.OcOrcaConstants.STORY_MODIFIED_BY="modifiedBy";t.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME="modifiedByDisplayName";t.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME="changedByDisplayName";t.OcOrcaConstants.STORY_UPDATE_COUNTER="updateCounter";t.OcOrcaConstants.STORY_RESOURCE_TYPE="resourceType";t.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK="LINK";t.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY="STORY";t.OcOrcaConstants.STORY_SOURCE_RESOURCE="sourceResource";t.OcOrcaConstants.STORY_SUB_NODES="subNodes";t.OcOrcaConstants.DRIVER_GROUP_INFO="driverGroupInfo";t.OcOrcaConstants.FILTER_ID="filterId";t.OcOrcaConstants.MEMBERS="members";t.OcOrcaConstants.STORY_ENTITIES="entities";t.OcOrcaConstants.STORY_ENTITY="story";t.OcOrcaConstants.STORY_ENTITY_TYPE="type";t.OcOrcaConstants.STORY_ENTITY_DATA="data";t.OcOrcaConstants.STORY_ENTITY_DATASET="dataset";t.OcOrcaConstants.STORY_ENTITY_CALCULATION="calculation";t.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION="fieldSelection";t.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE="calculationVariable";t.OcOrcaConstants.STORY_ENTITY_IMAGE="sap.lumira.story.entity.image";t.OcOrcaConstants.STORY_ENTITY_GRID="analyticgrid.dynamictable";t.OcOrcaConstants.STORY_MEASURE_SYNC="measureSync";t.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN="pattern";t.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR="color";t.OcOrcaConstants.STORY_CALCULATION_ENTITIES="entities";t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES="entities";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES="entities";t.OcOrcaConstants.STORY_FIELD_SELECTION_NAME="name";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME="name";t.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE="type";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE="type";t.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION="calculatedDimension";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE="valueType";t.OcOrcaConstants.STORY_CALCULATION_NAME="name";t.OcOrcaConstants.STORY_CALCULATION_TYPE="type";t.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE="calculationType";t.OcOrcaConstants.STORY_CALCULATION_SUBTYPE="subType";t.OcOrcaConstants.STORY_CALCULATION_FORMULA="formula";t.OcOrcaConstants.STORY_CALCULATION_SELECTIONS="selections";t.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID="measureId";t.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";t.OcOrcaConstants.STORY_CALCULATION_FORMAT="format";t.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE="restrictedMeasure";t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION="aggregation";t.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";t.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";t.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN="valuesNotIn";t.OcOrcaConstants.STORY_CALCULATION_START_DATE="startDate";t.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";t.OcOrcaConstants.STORY_CALCULATION_END_DATE="endDate";t.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";t.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY="resultGranularity";t.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";t.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";t.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE="valueType";t.OcOrcaConstants.STORY_CALCULATION_TO_TEXT="isToText";t.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS="groupThresholds";t.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION="dimension.selection";t.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE="measure.selection";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE="calculation.variable";t.OcOrcaConstants.STORY_FIELD_SELECTION_INFO="selectionInfo";t.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO="selectionInfo";t.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS="entityIds";t.OcOrcaConstants.STORY_FILTERS="storyFilters";t.OcOrcaConstants.STORY_THRESHOLD_INTERVALS="intervals";t.OcOrcaConstants.STORY_COLOR_SYNC="colorSync";t.OcOrcaConstants.STORY_PAGES="pages";t.OcOrcaConstants.PAGE_IS_HIDDEN="hidden";t.OcOrcaConstants.PAGE_IS_RESPONSIVE="RESPONSIVE";t.OcOrcaConstants.PAGE_TITLE="title";t.OcOrcaConstants.PAGE_LAYOUT_CANVAS="CANVAS";t.OcOrcaConstants.WIDGET_CLASS="class";t.OcOrcaConstants.WIDGET_ID="widgetId";t.OcOrcaConstants.WIDGET_POS_X="x";t.OcOrcaConstants.WIDGET_POS_Y="y";t.OcOrcaConstants.WIDGET_WIDTH="width";t.OcOrcaConstants.WIDGET_HEIGHT="height";t.OcOrcaConstants.WIDGET_TYPE_CHART="InfochartVizWidget";t.OcOrcaConstants.WIDGET_TYPE_HEADER="HeaderWidget";t.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL="FieldSelectionInputControlWidget";t.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL="CalcInputControlWidget";t.OcOrcaConstants.WIDGET_TYPE_PLANNING_SEQUENCE_TRIGGER="PlanningSequenceTriggerWidget";t.OcOrcaConstants.WIDGET_TYPE_IMAGE="ImageWidget";t.OcOrcaConstants.WIDGET_TYPE_TEXT="TextWidget";t.OcOrcaConstants.WIDGET_TYPE_TABLE="DynamicTableWidget";t.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER="PageFilterWidget";t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM="PictogramWidget";t.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE="PictogramShapeWidget";t.OcOrcaConstants.WIDGET_BACKGROUND_COLOR="backgroundColor";t.OcOrcaConstants.WIDGET_BORDER_RADIUS="radius";t.OcOrcaConstants.WIDGET_BORDER_STYLE="style";t.OcOrcaConstants.WIDGET_BORDER_THICKNESS="thickness";t.OcOrcaConstants.WIDGET_BORDER_FORMAT="format";t.OcOrcaConstants.WIDGET_BORDER_COLOR="color";t.OcOrcaConstants.WIDGET_BORDER="border";t.OcOrcaConstants.WIDGET_SECTION_DEFINITION="definition";t.OcOrcaConstants.WIDGET_FIREFLY_QUERY="ffQuery";t.OcOrcaConstants.VIZ_DEF_ENTITY_ID="entityId";t.OcOrcaConstants.VIZ_DEF_DIMENSION="dimension";t.OcOrcaConstants.VIZ_DEF_BINDING="bindings";t.OcOrcaConstants.VIZ_DEF_SOURCE="source";t.OcOrcaConstants.VIZ_DEF_SOURCE_ID="id";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE="type";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY="hierarchy.pch";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER="member";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_DIMENSION_SELECTION="dimension.selection";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION_VARIABLE="calculation.variable";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE="restrictedMeasure";t.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION="calculation";t.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY="parentKey";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO="hierarchyLevelInfo";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL="hierarchyLevel";t.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE="mode";t.OcOrcaConstants.VIZ_DEF_CHART="chart";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA="formula";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE="type";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS="selections";t.OcOrcaConstants.VIZ_DEF_THRESHOLD="threshold";t.OcOrcaConstants.VIZ_DEF_COLOR_BINDING="colorBinding";t.OcOrcaConstants.VIZ_DEF_ACCOUNT_ENTITY_ID="accountEntityId";t.OcOrcaConstants.VIZ_DEF_ACCOUNT_ID="accountId";t.OcOrcaConstants.VIZ_DEF_THRESHOLD_NAME="name";t.OcOrcaConstants.VIZ_DEF_LOW="low";t.OcOrcaConstants.VIZ_DEF_LOW_INCLUSIVE="lowInclusive";t.OcOrcaConstants.VIZ_DEF_HIGH="high";t.OcOrcaConstants.VIZ_DEF_HIGH_INCLUSIVE="highInclusive";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION="aggregation";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN="valuesNotIn";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE="startDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE="endDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY="resultGranularity";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE="valueType";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT="isToText";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS="groupThresholds";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS="selectionInfos";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS="entityIds";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID="measureId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_CALCULATTION_TYPE="calculationType";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO="formatingInfo";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN="pattern";t.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR="color";t.OcOrcaConstants.MODIFIED_VIZ_DEF_PAGE_FILTER="pageFilter";t.OcOrcaConstants.MODIFIED_VIZ_DEF_STORY_FILTERS="storyFilters";t.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR="BackgroundColor";t.OcOrcaConstants.MODIFIED_VIZ_DEF_SOURCE_DEF="def";t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE="drillMode";t.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL="drillLevel";t.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES="formulaAliases";t.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS="memberDefinitions";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID="id";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_NAME="name";t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS="selectionInfos";t.OcOrcaConstants.CUBE="CUBE";t.OcOrcaConstants.CUBE_DATA_SOURCE="DataSource";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE="Type";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY="query";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING="planning";t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW="view";t.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM="System";t.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME="ObjectName";t.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME="PackageName";t.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA="SchemaName";t.OcOrcaConstants.CUBE_FORMULAS="formulas";t.OcOrcaConstants.CUBE_FORMULAS_DATA="Data";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE="measure";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA="formula";t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON="jsonFormula";t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA="formula";t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON="formulaJson";t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=null;t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=null;t.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=null;t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=null;t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=null;t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=null;t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=null;t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=null;t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=null;t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=null;t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=null;t.OcOrcaConstants.PATH_FROM_FILTERS_TO_POSSIBLE_VALUES=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=null;t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=null;t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=null;t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=null;t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=null;t.OcOrcaConstants.staticSetup=function(){t.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=t.OcJsonPath.create("thresholds.story");t.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=t.OcJsonPath.create("cdata.content.entities");t.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=t.OcJsonPath.create("pages.content.widgets");t.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=t.OcJsonPath.create("data.content.segments.dataRegion");t.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=t.OcJsonPath.create("dataSource.queryId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=t.OcJsonPath.create("content.layouts.definition.page.definition.type");t.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=t.OcJsonPath.create("content.layouts.definition.page.sections.widgets.widgetId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=t.OcJsonPath.create("content.layouts.definition.page.rows.lanes.widgets.widgetId");t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=t.OcJsonPath.create("content.filters");t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=t.OcJsonPath.create("content.groups");t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=t.OcJsonPath.create("content.layouts.definition.page");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=t.OcJsonPath.create("definition.backgroundColor");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=t.OcJsonPath.create("definition.type");t.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=t.OcJsonPath.create("data.modelId");t.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=t.OcJsonPath.create("id.id");t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=t.OcJsonPath.create("data.src");t.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=t.OcJsonPath.create("data.thumbnail");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=t.OcJsonPath.create("sections.widgets");t.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=t.OcJsonPath.create("content.widgets");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=t.OcJsonPath.create("sections");t.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=t.OcJsonPath.create("rows.lanes.widgets");t.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=t.OcJsonPath.create("widgets.widgetId");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=t.OcJsonPath.create("definition.text");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=t.OcJsonPath.create("definition.svg");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=t.OcJsonPath.create("definition.entityId");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=t.OcJsonPath.create("definition.vizContent.vizDefinition");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=t.OcJsonPath.create("definition.datasets");t.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=t.OcJsonPath.create("definition");t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=t.OcJsonPath.create("dependentObjects.data.measures");t.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=t.OcJsonPath.create("promptValues.variables");t.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=t.OcJsonPath.create("definition.vizContent.vizDefinition.chart.type")};t.OcStoryCatalogType=function(){};t.OcStoryCatalogType.prototype=new t.XConstant;t.OcStoryCatalogType.prototype._ff_c="OcStoryCatalogType";t.OcStoryCatalogType.FAVORITE=null;t.OcStoryCatalogType.PRIVATE=null;t.OcStoryCatalogType.SEARCH_LIST=null;t.OcStoryCatalogType.staticSetup=function(){t.OcStoryCatalogType.FAVORITE=t.XConstant.setupName(new t.OcStoryCatalogType,"Favorite");t.OcStoryCatalogType.PRIVATE=t.XConstant.setupName(new t.OcStoryCatalogType,"Private");t.OcStoryCatalogType.SEARCH_LIST=t.XConstant.setupName(new t.OcStoryCatalogType,"Search List")};t.OcStoryCatalogItem=function(){};t.OcStoryCatalogItem.prototype=new t.DfIdNameObject;t.OcStoryCatalogItem.prototype._ff_c="OcStoryCatalogItem";t.OcStoryCatalogItem.create=function(e,r){var a=new t.OcStoryCatalogItem;a.setupExt(e,r);return a};t.OcStoryCatalogItem.prototype.m_description=null;t.OcStoryCatalogItem.prototype.m_createTime=null;t.OcStoryCatalogItem.prototype.m_createdBy=null;t.OcStoryCatalogItem.prototype.m_createdByDisplayName=null;t.OcStoryCatalogItem.prototype.m_modifiedTime=null;t.OcStoryCatalogItem.prototype.m_modifiedBy=null;t.OcStoryCatalogItem.prototype.m_modifiedByDisplayName=null;t.OcStoryCatalogItem.prototype.m_updateCounter=0;t.OcStoryCatalogItem.prototype.getDescription=function(){return this.m_description};t.OcStoryCatalogItem.prototype.setDescription=function(t){this.m_description=t};t.OcStoryCatalogItem.prototype.getCreateTime=function(){return this.m_createTime};t.OcStoryCatalogItem.prototype.setCreateTime=function(t){this.m_createTime=t};t.OcStoryCatalogItem.prototype.getCreatedBy=function(){return this.m_createdBy};t.OcStoryCatalogItem.prototype.setCreatedBy=function(t){this.m_createdBy=t};t.OcStoryCatalogItem.prototype.getCreatedByDisplayName=function(){return this.m_createdByDisplayName};t.OcStoryCatalogItem.prototype.setCreatedByDisplayName=function(t){this.m_createdByDisplayName=t};t.OcStoryCatalogItem.prototype.getModifiedTime=function(){return this.m_modifiedTime};t.OcStoryCatalogItem.prototype.setModifiedTime=function(t){this.m_modifiedTime=t};t.OcStoryCatalogItem.prototype.getModifiedBy=function(){return this.m_modifiedBy};t.OcStoryCatalogItem.prototype.setModifiedBy=function(t){this.m_modifiedBy=t};t.OcStoryCatalogItem.prototype.getModifiedByDisplayName=function(){return this.m_modifiedByDisplayName};t.OcStoryCatalogItem.prototype.setModifiedByDisplayName=function(t){this.m_modifiedByDisplayName=t};t.OcStoryCatalogItem.prototype.getUpdateCounter=function(){return this.m_updateCounter};t.OcStoryCatalogItem.prototype.setUpdateCounter=function(t){this.m_updateCounter=t};t.OcStoryCatalogItem.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_createdByDisplayName=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_modifiedByDisplayName=null;this.m_updateCounter=0;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcStoryCatalogItem.prototype.toString=function(){var e=t.XStringBuffer.create();e.append(this.getId()).append(": ").append(this.getName());return e.toString()};t.OcOrcaCubeMetadata=function(){};t.OcOrcaCubeMetadata.prototype=new t.DfNameTextObject;t.OcOrcaCubeMetadata.prototype._ff_c="OcOrcaCubeMetadata";t.OcOrcaCubeMetadata.create=function(e){var r=new t.OcOrcaCubeMetadata;r.setupExt(e);return r};t.OcOrcaCubeMetadata.prototype.m_datasourceName=null;t.OcOrcaCubeMetadata.prototype.m_systemName=null;t.OcOrcaCubeMetadata.prototype.m_formulas=null;t.OcOrcaCubeMetadata.prototype.m_memberDefinitions=null;t.OcOrcaCubeMetadata.prototype.setupExt=function(e){this._setupInternal(e.getStringByKey(t.OcOrcaConstants.ID_ELEMENT));var r=e.getStructureByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE);var a=r.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE);a=t.XString.toLowerCase(a);if(t.XString.isEqual(a,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)||t.XString.isEqual(a,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)||t.XString.isEqual(a,t.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY)){var n=r.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME);var o=r.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME);var s=r.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA);var i=t.XStringUtils.concatenate4(o,"][",n,"]");i=t.XStringUtils.concatenate5(a,":[",s,"][",i);this.m_datasourceName=i}this.m_systemName=r.getStringByKey(t.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM);var c=e.getStructureByKey(t.OcOrcaConstants.CUBE_FORMULAS);if(t.notNull(c)){this.m_formulas=c.getByKey(t.OcOrcaConstants.CUBE_FORMULAS_DATA)}this.m_memberDefinitions=this.processMemberDefinitions(e)};t.OcOrcaCubeMetadata.prototype.getDataSourceName=function(){return this.m_datasourceName};t.OcOrcaCubeMetadata.prototype.getFormulas=function(){return this.m_formulas};t.OcOrcaCubeMetadata.prototype.getSystemName=function(){return this.m_systemName};t.OcOrcaCubeMetadata.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions};t.OcOrcaCubeMetadata.prototype.processMemberDefinitions=function(e){var r=t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(e,t.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS);if(t.PrUtils.isListEmpty(r)){return null}var a=t.PrFactory.createStructure();for(var n=0;n<r.size();n++){var o=r.getStructureAt(n);var s=o.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE);if(t.XStringUtils.isNullOrEmpty(s)){continue}var i=o.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA);if(t.XStringUtils.isNotNullAndNotEmpty(i)){var c=o.getStringByKey(t.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON);var O=a.putNewStructure(s);O.putString(t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA,i);O.putString(t.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON,c)}}return a};t.OcOrcaCubeMetadata.prototype.releaseObject=function(){this.m_datasourceName=null;this.m_systemName=null;this.m_memberDefinitions=t.XObjectExt.release(this.m_memberDefinitions);t.DfNameTextObject.prototype.releaseObject.call(this)};t.OcOrcaAnalyticalCardWidget=function(){};t.OcOrcaAnalyticalCardWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaAnalyticalCardWidget.prototype._ff_c="OcOrcaAnalyticalCardWidget";t.OcOrcaAnalyticalCardWidget.create=function(e,r,a){var n=new t.OcOrcaAnalyticalCardWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.ANALYTICAL_CARD,r,a);return n};t.OcOrcaAnalyticalCardWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newKpiWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaAnalyticalCardWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("KPI:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcOrcaAnalyticalCardWidget.prototype.processCanvasLayout=function(){var e=t.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);e.setHeight(200);return e};t.OcOrcaChartWidget=function(){};t.OcOrcaChartWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaChartWidget.prototype._ff_c="OcOrcaChartWidget";t.OcOrcaChartWidget.create=function(e,r,a){var n=new t.OcOrcaChartWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.CHART,r,a);return n};t.OcOrcaChartWidget.prototype.getQuasarName=function(e){if(t.notNull(e)&&e.getChartType()!==null){return e.getChartType().getQuasarName()}return t.OcOrcaWidgetWithDpAndVizDef.prototype.getQuasarName.call(this,e)};t.OcOrcaChartWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newChartWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaChartWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("CHART:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcOrcaKpiWidget=function(){};t.OcOrcaKpiWidget.prototype=new t.OcOrcaWidgetWithDpAndVizDef;t.OcOrcaKpiWidget.prototype._ff_c="OcOrcaKpiWidget";t.OcOrcaKpiWidget.create=function(e,r,a){var n=new t.OcOrcaKpiWidget;n.setupOrcaBaseWidget(e,t.OcWidgetType.KPI,r,a);return n};t.OcOrcaKpiWidget.prototype.getMissingVitDefWarning=function(){return t.OcMessage.newKpiWithoutVizDef(t.Severity.WARNING,this)};t.OcOrcaKpiWidget.prototype.toString=function(){return t.XStringUtils.concatenate2("KPI:",t.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this))};t.OcOrcaKpiWidget.prototype.processCanvasLayout=function(){var e=t.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);e.setHeight(200);return e};t.OcQuasarConstants=function(){};t.OcQuasarConstants.prototype=new t.XConstant;t.OcQuasarConstants.prototype._ff_c="OcQuasarConstants";t.OcQuasarConstants.QUASAR_VARIABLES="Variables";t.OcQuasarConstants.QUASAR_CONTENT="Content";t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR="BackgroundColor";t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC="BackgroundImageSrc";t.OcQuasarConstants.QUASAR_CONTENT_ITEMS="Items";t.OcQuasarConstants.QUASAR_CONTENT_TYPE="CType";t.OcQuasarConstants.QUASAR_ITEM_NAME="Name";t.OcQuasarConstants.QUASAR_WIDGET_ID="widgetId";t.OcQuasarConstants.QUASAR_ENTITY_ID="EntityId";t.OcQuasarConstants.QUASAR_ITEM_TYPE="CType";t.OcQuasarConstants.QUASAR_ITEM_TEXT="Text";t.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET="Unsupported Widget";t.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG="svg";t.OcQuasarConstants.QUASAR_ITEM_PAGE_FILTER="PageFilter";t.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC="Src";t.OcQuasarConstants.QUASAR_ITEM_BINDING="Binding";t.OcQuasarConstants.QUASAR_ITEM_BINDINGS="Bindings";t.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE="Type";t.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE="Source";t.OcQuasarConstants.QUASAR_LAYOUT_PERCENT="%";t.OcQuasarConstants.QUASAR_LAYOUT_PX="px";t.OcQuasarConstants.QUASAR_LAYOUT_X="X";t.OcQuasarConstants.QUASAR_LAYOUT_Y="Y";t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH="Width";t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT="Height";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE="BorderSize";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE="BorderStyle";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT="BorderFormat";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR="BorderColor";t.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS="CornerRadius";t.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR="BackgroundColor";t.OcQuasarConstants.QUASAR_GLOBAL_DEF="GlobalDef";t.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC="colorSync";t.OcQuasarConstants.QUASAR_GLOBAL_DEF_THRESHOLDS="thresholds";t.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD="threshold";t.OcQuasarConstants.QUASAR_DATA_PROVIDERS="DataProviders";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF="VizDef";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY="ffQuery";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM="System";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME="CubeName";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID="ModelId";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE="DataSource";t.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME="Name";t.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE="C";t.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE="Kpi";t.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE="Chart";t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=null;t.OcQuasarConstants.STORY_PAGE_ID="pageId";t.OcQuasarConstants.MEMBERS="members";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS="GlobalObjects";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS="PageFilters";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS="StoryFilters";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS="Calculations";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES="CalculationVariables";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS="FieldSelections";t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_THRESHOLDS="Thresholds";t.OcQuasarConstants.staticSetup=function(){t.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=t.OcJsonPath.create("userPreferences.threshold")};t.OcCacheableQuasarStory=function(){};t.OcCacheableQuasarStory.prototype=new t.DfNameTextObject;t.OcCacheableQuasarStory.prototype._ff_c="OcCacheableQuasarStory";t.OcCacheableQuasarStory.create=function(e,r){var a=new t.OcCacheableQuasarStory;a.setupWithNameText(e,r);return a};t.OcCacheableQuasarStory.prototype.m_description=null;t.OcCacheableQuasarStory.prototype.m_createTime=null;t.OcCacheableQuasarStory.prototype.m_createdBy=null;t.OcCacheableQuasarStory.prototype.m_modifiedTime=null;t.OcCacheableQuasarStory.prototype.m_modifiedBy=null;t.OcCacheableQuasarStory.prototype.m_updateCounter=0;t.OcCacheableQuasarStory.prototype.m_mainLayoutType=null;t.OcCacheableQuasarStory.prototype.m_chartType=null;t.OcCacheableQuasarStory.prototype.m_mediaUrl=null;t.OcCacheableQuasarStory.prototype.m_pages=null;t.OcCacheableQuasarStory.prototype.setDescription=function(t){this.m_description=t};t.OcCacheableQuasarStory.prototype.getDescription=function(){return this.m_description};t.OcCacheableQuasarStory.prototype.setCreateTime=function(t){this.m_createTime=t};t.OcCacheableQuasarStory.prototype.getCreateTime=function(){return this.m_createTime};t.OcCacheableQuasarStory.prototype.setCreatedBy=function(t){this.m_createdBy=t};t.OcCacheableQuasarStory.prototype.getCreatedBy=function(){return this.m_createdBy};t.OcCacheableQuasarStory.prototype.setModifiedTime=function(t){this.m_modifiedTime=t};t.OcCacheableQuasarStory.prototype.getModifiedTime=function(){return this.m_modifiedTime};t.OcCacheableQuasarStory.prototype.setModifiedBy=function(t){this.m_modifiedBy=t};t.OcCacheableQuasarStory.prototype.getModifiedBy=function(){return this.m_modifiedBy};t.OcCacheableQuasarStory.prototype.setUpdateCounter=function(t){this.m_updateCounter=t};t.OcCacheableQuasarStory.prototype.getUpdateCounter=function(){return this.m_updateCounter};t.OcCacheableQuasarStory.prototype.setMediaUrl=function(t){this.m_mediaUrl=t};t.OcCacheableQuasarStory.prototype.getMediaUrl=function(){return this.m_mediaUrl};t.OcCacheableQuasarStory.prototype.setMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcCacheableQuasarStory.prototype.getMainLayoutType=function(){return this.m_mainLayoutType};t.OcCacheableQuasarStory.prototype.getChartType=function(){return this.m_chartType};t.OcCacheableQuasarStory.prototype.setChartType=function(t){this.m_chartType=t};t.OcCacheableQuasarStory.prototype.getPages=function(){return this.m_pages};t.OcCacheableQuasarStory.prototype.setPages=function(t){this.m_pages=t};t.OcCacheableQuasarStory.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_mainLayoutType=null;this.m_chartType=null;this.m_mediaUrl=null;this.m_pages=null;t.DfNameTextObject.prototype.releaseObject.call(this)};t.OcQuasarStory=function(){};t.OcQuasarStory.prototype=new t.DfIdNameObject;t.OcQuasarStory.prototype._ff_c="OcQuasarStory";t.OcQuasarStory.create=function(e){var r=new t.OcQuasarStory;r.setupStory(e);return r};t.OcQuasarStory.getSortedKeys=function(e){var r=t.XListOfString.create();r.addAll(e);r.sortByDirection(t.XSortDirection.ASCENDING);return r};t.OcQuasarStory.prototype.m_story=null;t.OcQuasarStory.prototype.m_mainLayoutType=null;t.OcQuasarStory.prototype.m_chartType=null;t.OcQuasarStory.prototype.setupStory=function(e){this.setupExt(e.getId(),e.getName());this.m_story=e;this.m_mainLayoutType=t.OcLayoutType.CANVAS;this.m_chartType=t.OcChartType.HIGHCHARTS};t.OcQuasarStory.prototype.getDescription=function(){return this.m_story.getDescription()};t.OcQuasarStory.prototype.getCreateTime=function(){return this.m_story.getCreateTime()};t.OcQuasarStory.prototype.getCreatedBy=function(){return this.m_story.getCreatedBy()};t.OcQuasarStory.prototype.getModifiedBy=function(){return this.m_story.getModifiedBy()};t.OcQuasarStory.prototype.getModifiedTime=function(){return this.m_story.getModifiedTime()};t.OcQuasarStory.prototype.getPublicUrl=function(){return this.m_story.getPublicUrl()};t.OcQuasarStory.prototype.getQuasarAnalyticalCardDocument=function(){return this.processQuasarAnalyticalCard()};t.OcQuasarStory.prototype.getQuasarCompositeAnalyticalCardDocument=function(){return this.processQuasarCompositeAnalyticalCard()};t.OcQuasarStory.prototype.getQuasarTabStoryDocument=function(){try{return this.processQuasarStory()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return null}};t.OcQuasarStory.prototype.getQuasarPages=function(){try{return this.processQuasarPages()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.getQuasarPageDocuments=function(){try{return t.OcQuasarStoryConverter.convertStory(this.m_story,this.createQuasarOptions())}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XList.create()}};t.OcQuasarStory.prototype.getCacheableQuasarStory=function(){try{return this.processCacheableQuasarStory()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return null}};t.OcQuasarStory.prototype.getQuasarWidgetDocument=function(e){try{return this.processQuasarWidgetDocument(e)}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.PrFactory.createStructure()}};t.OcQuasarStory.prototype.getWidgetIds=function(){try{return this.m_story.getPageManager().getAllWidgetIds()}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XListOfString.create()}};t.OcQuasarStory.prototype.getWidgetIdsByWidgetType=function(e){try{return this.m_story.getPageManager().getAllWidgetIdsByWidgetType(e)}catch(e){this.getContext().getMessageManager().addMessage(t.OcMessage.newUnexpectedError(e));return t.XListOfString.create()}};t.OcQuasarStory.prototype.getMessages=function(){return this.getContext().getMessageManager()};t.OcQuasarStory.prototype.processCacheableQuasarStory=function(){var e=this.m_story;var r=t.OcCacheableQuasarStory.create(e.getId(),e.getNormalizedName());r.setCreatedBy(e.getCreatedBy());r.setDescription(e.getDescription());r.setCreateTime(e.getCreateTime());r.setModifiedTime(e.getModifiedTime());r.setModifiedBy(e.getModifiedBy());r.setUpdateCounter(e.getUpdateCounter());r.setMainLayoutType(this.m_mainLayoutType);r.setChartType(this.m_chartType);r.setMediaUrl(e.getImages().getImageUrl());r.setPages(this.processQuasarPages());return r};t.OcQuasarStory.prototype.processQuasarPages=function(){var e;var r=t.PrFactory.createList();var a=t.XList.create();var n=this.createQuasarOptions();var o=this.m_story.getPageManager().getPages();for(e=0;e<o.size();e++){this.mapPageFilters(r,o.get(e))}for(e=0;e<o.size();e++){var s=o.get(e);var i=s.getId();var c=s.getName();var O=t.OcQuasarStoryConverter.convertPage(s,n);this.applyGlobalObjects(O,r);var u=t.OcQuasarStoryPage.create(i,c,O);a.add(u)}return a};t.OcQuasarStory.prototype.processQuasarAnalyticalCard=function(){var e=t.PrFactory.createList();var r=t.PrFactory.createStructure();var a=r.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);a.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");var n=a.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var o=r.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var s=this.createQuasarOptions();var i=this.m_story.getPageManager().getPages();var c=0;for(;c<i.size();c++){var O=i.get(c);var u=t.OcQuasarPageContentConverter.convertPageToAnalyticalCard(O,o,s);if(t.XCollectionUtils.hasElements(u)){u.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,O.getId());u.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,O.getName());n.add(u);this.mapPageFilters(e,O);break}}this.applyGlobalObjects(r,e);return r};t.OcQuasarStory.prototype.processQuasarCompositeAnalyticalCard=function(){var e=t.PrFactory.createList();var r=t.PrFactory.createStructure();var a=r.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);a.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");var n=a.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var o=r.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var s=this.createQuasarOptions();var i=this.m_story.getPageManager().getPages();var c=0;for(;c<i.size();c++){var O=i.get(c);var u=t.OcQuasarPageContentConverter.convertPageToCompositeAnalyticalCard(n,this,O,o,s);if(t.XCollectionUtils.hasElements(u)){u.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,O.getId());u.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,O.getName());this.mapPageFilters(e,O);break}}this.applyGlobalObjects(r,e);return r};t.OcQuasarStory.prototype.processQuasarStory=function(){var e=t.PrFactory.createList();var r=t.PrFactory.createStructure();var a=r.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT);a.putString(t.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,"transparent");a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");a.putString(t.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");a.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStrip");var n=a.putNewList(t.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var o=r.putNewList(t.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var s=this.createQuasarOptions();var i=this.m_story.getPageManager().getPages();for(var c=0;c<i.size();c++){var O=i.get(c);var u=n.addNewStructure();u.putString(t.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStripItem");u.putString(t.OcQuasarConstants.QUASAR_ITEM_NAME,O.getId());u.putString(t.OcQuasarConstants.QUASAR_ITEM_TEXT,O.getName());t.OcQuasarPageConverter.convertPage(O,s,u.putNewStructure(t.OcQuasarConstants.QUASAR_CONTENT),o);this.mapPageFilters(e,O)}this.applyGlobalObjects(r,e);return r};t.OcQuasarStory.prototype.mapPageFilters=function(e,r){var a=t.JsonParserFactory.createFromSafeString(r.getPageFilters().toString()).asList();var n=r.getPageGroups();for(var o=0;o<a.size();o++){var s=a.getStructureAt(o);var i=t.PrFactory.createStructure();var c=s.getKeysAsReadOnlyListOfString();for(var O=0;O<c.size();O++){var u=c.get(O);i.put(u,s.getByKey(u))}i.putString(t.OcQuasarConstants.STORY_PAGE_ID,r.getId());for(var l=0;l<n.size();l++){var g=n.getStructureAt(l);var p=g.getListByKey(t.OcOrcaConstants.DRIVER_GROUP_INFO);if(t.notNull(p)){for(var y=0;y<p.size();y++){var _=p.getStructureAt(y).getStringByKey(t.OcOrcaConstants.FILTER_ID);if(t.notNull(_)&&t.XString.isEqual(_,i.getStringByKey(t.OcOrcaConstants.FILTER_ID))){var d=g.getListByKey(t.OcOrcaConstants.MEMBERS);if(t.notNull(d)){var S=i.putNewList(t.OcQuasarConstants.MEMBERS);S.addAll(d)}}}}}e.add(i)}};t.OcQuasarStory.prototype.applyGlobalObjects=function(e,r){var a;var n=e.putNewStructure(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS);var o=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS);o.addAll(r);var s=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS);var i=this.m_story.getStoryFilters();for(a=0;a<i.size();a++){s.add(i.getStructureAt(a))}var c=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS);var O;var u=this.m_story.getCalculations().getCalculations();O=t.OcQuasarStory.getSortedKeys(u.getKeysAsReadOnlyListOfString());for(a=0;a<O.size();a++){var l=c.addNewStructure();var g=u.getByKey(O.get(a));l.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID,g.getId());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,g.getName());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO,g.getFormatting());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE,g.getCalculationType());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID,g.getMeasureId());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID,g.getReferenceMeasureId());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS,g.getSelections());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA,g.getFormula());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE,g.getStartDate());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE,g.getEndDate());l.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL,g.isStartDateCurrentIfNull());l.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL,g.isEndDateCurrentIfNull());l.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN,g.isValuesNotIn());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION,g.getAggregation());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS,g.getAggregationDimensions());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION,g.getExceptionAggregation());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS,g.getExceptionAggregationDimensions());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS,g.getGroupThresholds());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY,g.getResultGranularity());l.putInteger(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,g.getTimezoneOffsetForCurrentDate());l.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID,g.getSelectedDimensionId());l.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE,g.getValueType());l.putBoolean(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT,g.isToText())}var p=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES);var y=this.m_story.getCalculationVariables().getCalculationVariables();O=t.OcQuasarStory.getSortedKeys(y.getKeysAsReadOnlyListOfString());for(a=0;a<O.size();a++){var _=y.getByKey(O.get(a));var d=p.addNewStructure();d.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID,_.getId());d.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,_.getName());d.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS,_.getSelectionInfos())}var S=n.putNewList(t.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS);var C=this.m_story.getFieldSelections().getFieldSelections();O=t.OcQuasarStory.getSortedKeys(C.getKeysAsReadOnlyListOfString());for(a=0;a<O.size();a++){var T=C.getByKey(O.get(a));var E=S.addNewStructure();E.putString(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID,T.getId());E.putStringNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME,T.getName());E.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS,T.getSelectionInfos());E.putNotNullAndNotEmpty(t.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS,T.getEntityIds())}};t.OcQuasarStory.prototype.processQuasarWidgetDocument=function(e){var r=this.m_story.getPageManager().getWidgetByWidgetId(e);if(t.isNull(r)){return null}var a=this.createQuasarOptions();a.setUseSingleWidgetLayout(true);return t.OcQuasarStoryConverter.convertWidget(r,a)};t.OcQuasarStory.prototype.createQuasarOptions=function(){var e=t.OcQuasarOptions.create(this.getContext());if(t.notNull(this.m_mainLayoutType)){e.setMainLayoutType(this.m_mainLayoutType)}if(t.notNull(this.m_chartType)){e.setChartType(this.m_chartType)}return e};t.OcQuasarStory.prototype.getContext=function(){return this.m_story.getContext()};t.OcQuasarStory.prototype.getQuasarMainLayoutType=function(){return this.m_mainLayoutType};t.OcQuasarStory.prototype.setQuasarMainLayoutType=function(t){this.m_mainLayoutType=t};t.OcQuasarStory.prototype.getQuasarChartType=function(){return this.m_chartType};t.OcQuasarStory.prototype.setQuasarChartType=function(t){this.m_chartType=t};t.OcQuasarStory.prototype.releaseObject=function(){this.m_story=t.XObjectExt.release(this.m_story);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcQuasarStoryPage=function(){};t.OcQuasarStoryPage.prototype=new t.DfIdNameObject;t.OcQuasarStoryPage.prototype._ff_c="OcQuasarStoryPage";t.OcQuasarStoryPage.create=function(e,r,a){var n=new t.OcQuasarStoryPage;n.setupPageInfo(e,r,a);return n};t.OcQuasarStoryPage.prototype.m_pageContent=null;t.OcQuasarStoryPage.prototype.setupPageInfo=function(e,r,a){t.DfIdNameObject.prototype.setupExt.call(this,e,r);this.m_pageContent=a};t.OcQuasarStoryPage.prototype.getPageContent=function(){return this.m_pageContent};t.OcQuasarStoryPage.prototype.releaseObject=function(){this.m_pageContent=t.XObjectExt.release(this.m_pageContent);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcChartType=function(){};t.OcChartType.prototype=new t.XConstant;t.OcChartType.prototype._ff_c="OcChartType";t.OcChartType.HIGHCHARTS=null;t.OcChartType.MICRO_CHART=null;t.OcChartType.s_lookup=null;t.OcChartType.staticSetup=function(){t.OcChartType.s_lookup=t.XHashMapByString.create();t.OcChartType.HIGHCHARTS=t.OcChartType.createChartType("Highcharts","Chart");t.OcChartType.MICRO_CHART=t.OcChartType.createChartType("MicroChart","MicroChart")};t.OcChartType.createChartType=function(e,r){var a=new t.OcChartType;a._setupInternal(e);a.m_quasarName=r;t.OcChartType.s_lookup.put(e,a);t.OcChartType.s_lookup.put(t.XString.toLowerCase(e),a);t.OcChartType.s_lookup.put(t.XString.toUpperCase(e),a);return a};t.OcChartType.lookup=function(e){return t.OcChartType.s_lookup.getByKey(e)};t.OcChartType.prototype.m_quasarName=null;t.OcChartType.prototype.getQuasarName=function(){return this.m_quasarName};t.OcLayoutType=function(){};t.OcLayoutType.prototype=new t.XConstant;t.OcLayoutType.prototype._ff_c="OcLayoutType";t.OcLayoutType.CANVAS=null;t.OcLayoutType.FLOW=null;t.OcLayoutType.FLOW_SIMPLE=null;t.OcLayoutType.s_typesByName=null;t.OcLayoutType.s_typesByCode=null;t.OcLayoutType.staticSetup=function(){t.OcLayoutType.s_typesByName=t.XHashMapByString.create();t.OcLayoutType.s_typesByCode=t.XHashMapByString.create();t.OcLayoutType.CANVAS=t.OcLayoutType.create("CanvasLayout",1);t.OcLayoutType.FLOW=t.OcLayoutType.create("FlowLayout",2);t.OcLayoutType.FLOW_SIMPLE=t.OcLayoutType.create("FlowSimpleLayout",3)};t.OcLayoutType.create=function(e,r){var a=new t.OcLayoutType;a._setupInternal(e);t.OcLayoutType.s_typesByName.put(e,a);a.m_code=r;t.OcLayoutType.s_typesByCode.put(t.XInteger.convertToString(r),a);return a};t.OcLayoutType.getByCode=function(e){return t.OcLayoutType.s_typesByCode.getByKey(t.XInteger.convertToString(e))};t.OcLayoutType.getByName=function(e){return t.OcLayoutType.s_typesByName.getByKey(e)};t.OcLayoutType.prototype.m_code=0;t.OcLayoutType.prototype.getCode=function(){return this.m_code};t.OcCalculation=function(){};t.OcCalculation.prototype=new t.DfIdNameObject;t.OcCalculation.prototype._ff_c="OcCalculation";t.OcCalculation.create=function(e,r,a){var n=new t.OcCalculation;n.setupCalculation(e,r,a);return n};t.OcCalculation.prototype.m_calculationType=null;t.OcCalculation.prototype.m_formatting=null;t.OcCalculation.prototype.m_measureId=null;t.OcCalculation.prototype.m_referenceMeasureId=null;t.OcCalculation.prototype.m_selections=null;t.OcCalculation.prototype.m_formula=null;t.OcCalculation.prototype.m_aggregation=null;t.OcCalculation.prototype.m_aggregationDimensions=null;t.OcCalculation.prototype.m_exceptionAggregation=null;t.OcCalculation.prototype.m_exceptionAggregationDimensions=null;t.OcCalculation.prototype.m_valuesNotIn=false;t.OcCalculation.prototype.m_resultGranularity=null;t.OcCalculation.prototype.m_startDate=null;t.OcCalculation.prototype.m_endDate=null;t.OcCalculation.prototype.m_startDateCurrentIfNull=false;t.OcCalculation.prototype.m_endDateCurrentIfNull=false;t.OcCalculation.prototype.m_timezoneOffsetForCurrentDate=0;t.OcCalculation.prototype.m_selectedDimensionId=null;t.OcCalculation.prototype.m_valueType=null;t.OcCalculation.prototype.m_groupThresholds=null;t.OcCalculation.prototype.m_toText=false;t.OcCalculation.prototype.getSelectedDimensionId=function(){return this.m_selectedDimensionId};t.OcCalculation.prototype.setSelectedDimensionId=function(t){this.m_selectedDimensionId=t};t.OcCalculation.prototype.getValueType=function(){return this.m_valueType};t.OcCalculation.prototype.setValueType=function(t){this.m_valueType=t};t.OcCalculation.prototype.getGroupThresholds=function(){return this.m_groupThresholds};t.OcCalculation.prototype.setGroupThresholds=function(t){this.m_groupThresholds=t};t.OcCalculation.prototype.isToText=function(){return this.m_toText};t.OcCalculation.prototype.setToText=function(t){this.m_toText=t};t.OcCalculation.prototype.getAggregation=function(){return this.m_aggregation};t.OcCalculation.prototype.setAggregation=function(t){this.m_aggregation=t};t.OcCalculation.prototype.getAggregationDimensions=function(){return this.m_aggregationDimensions};t.OcCalculation.prototype.setAggregationDimensions=function(t){this.m_aggregationDimensions=t};t.OcCalculation.prototype.getExceptionAggregation=function(){return this.m_exceptionAggregation};t.OcCalculation.prototype.setExceptionAggregation=function(t){this.m_exceptionAggregation=t};t.OcCalculation.prototype.getExceptionAggregationDimensions=function(){return this.m_exceptionAggregationDimensions};t.OcCalculation.prototype.setExceptionAggregationDimensions=function(t){this.m_exceptionAggregationDimensions=t};t.OcCalculation.prototype.isValuesNotIn=function(){return this.m_valuesNotIn};t.OcCalculation.prototype.setValuesNotIn=function(t){this.m_valuesNotIn=t};t.OcCalculation.prototype.getResultGranularity=function(){return this.m_resultGranularity};t.OcCalculation.prototype.setResultGranularity=function(t){this.m_resultGranularity=t};t.OcCalculation.prototype.getStartDate=function(){return this.m_startDate};t.OcCalculation.prototype.setStartDate=function(t){this.m_startDate=t};t.OcCalculation.prototype.getEndDate=function(){return this.m_endDate};t.OcCalculation.prototype.setEndDate=function(t){this.m_endDate=t};t.OcCalculation.prototype.isStartDateCurrentIfNull=function(){return this.m_startDateCurrentIfNull};t.OcCalculation.prototype.setStartDateCurrentIfNull=function(t){this.m_startDateCurrentIfNull=t};t.OcCalculation.prototype.isEndDateCurrentIfNull=function(){return this.m_endDateCurrentIfNull};t.OcCalculation.prototype.setEndDateCurrentIfNull=function(t){this.m_endDateCurrentIfNull=t};t.OcCalculation.prototype.getTimezoneOffsetForCurrentDate=function(){return this.m_timezoneOffsetForCurrentDate};t.OcCalculation.prototype.setTimezoneOffsetForCurrentDate=function(t){this.m_timezoneOffsetForCurrentDate=t};t.OcCalculation.prototype.setupCalculation=function(e,r,a){t.DfIdNameObject.prototype.setupExt.call(this,e,r);this.m_calculationType=a};t.OcCalculation.prototype.getCalculationType=function(){return this.m_calculationType};t.OcCalculation.prototype.getFormatting=function(){return this.m_formatting};t.OcCalculation.prototype.setFormatting=function(t){this.m_formatting=t};t.OcCalculation.prototype.getMeasureId=function(){return this.m_measureId};t.OcCalculation.prototype.getReferenceMeasureId=function(){return this.m_referenceMeasureId};t.OcCalculation.prototype.setMeasureId=function(t){this.m_measureId=t};t.OcCalculation.prototype.setReferenceMeasureId=function(t){this.m_referenceMeasureId=t};t.OcCalculation.prototype.getSelections=function(){return this.m_selections};t.OcCalculation.prototype.setSelections=function(t){this.m_selections=t};t.OcCalculation.prototype.getFormula=function(){return this.m_formula};t.OcCalculation.prototype.setFormula=function(t){this.m_formula=t};t.OcCalculation.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Calculation: ").append(this.getId());e.appendNewLine().append(" Name = ").append(this.getName());e.appendNewLine().append(" Type = ").append(this.getCalculationType());return e.toString()};t.OcCalculation.prototype.releaseObject=function(){this.m_calculationType=null;this.m_formatting=null;this.m_measureId=null;this.m_selections=null;this.m_formula=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcCalculationVariable=function(){};t.OcCalculationVariable.prototype=new t.DfIdNameObject;t.OcCalculationVariable.prototype._ff_c="OcCalculationVariable";t.OcCalculationVariable.create=function(e,r,a,n){var o=new t.OcCalculationVariable;o.setupCalculationVariable(e,r,a,n);return o};t.OcCalculationVariable.prototype.m_calculationVariableType=null;t.OcCalculationVariable.prototype.m_calculationVariableValueType=null;t.OcCalculationVariable.prototype.m_selectionInfos=null;t.OcCalculationVariable.prototype.setupCalculationVariable=function(e,r,a,n){t.DfIdNameObject.prototype.setupExt.call(this,e,r);this.m_calculationVariableType=a;this.m_calculationVariableValueType=n};t.OcCalculationVariable.prototype.getCalculationVariableType=function(){return this.m_calculationVariableType};t.OcCalculationVariable.prototype.getCalculationVariableValueType=function(){return this.m_calculationVariableValueType};t.OcCalculationVariable.prototype.getSelectionInfos=function(){return this.m_selectionInfos};t.OcCalculationVariable.prototype.setSelectionInfos=function(t){this.m_selectionInfos=t};t.OcCalculationVariable.prototype.releaseObject=function(){this.m_selectionInfos=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcFieldSelection=function(){};t.OcFieldSelection.prototype=new t.DfIdNameObject;t.OcFieldSelection.prototype._ff_c="OcFieldSelection";t.OcFieldSelection.create=function(e,r,a){var n=new t.OcFieldSelection;n.setupFieldSelection(e,r,a);return n};t.OcFieldSelection.prototype.m_fieldSelectionType=null;t.OcFieldSelection.prototype.m_selectionInfos=null;t.OcFieldSelection.prototype.m_entityIds=null;t.OcFieldSelection.prototype.setupFieldSelection=function(e,r,a){t.DfIdNameObject.prototype.setupExt.call(this,e,r);this.m_fieldSelectionType=a};t.OcFieldSelection.prototype.getFieldSelectionType=function(){return this.m_fieldSelectionType};t.OcFieldSelection.prototype.getSelectionInfos=function(){return this.m_selectionInfos};t.OcFieldSelection.prototype.getEntityIds=function(){return this.m_entityIds};t.OcFieldSelection.prototype.setSelectionInfos=function(t){this.m_selectionInfos=t};t.OcFieldSelection.prototype.setEntityIds=function(t){this.m_entityIds=t};t.OcFieldSelection.prototype.releaseObject=function(){this.m_entityIds=null;this.m_selectionInfos=null;t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcPage=function(){};t.OcPage.prototype=new t.DfIdNameObject;t.OcPage.prototype._ff_c="OcPage";t.OcPage.prototype.m_normalizedName=null;t.OcPage.prototype.m_backgroundColor=null;t.OcPage.prototype.m_isResponsive=null;t.OcPage.prototype.m_pageFilters=null;t.OcPage.prototype.m_pageGroups=null;t.OcPage.prototype.m_widgetManager=null;t.OcPage.prototype.m_story=null;t.OcPage.prototype.setupPage=function(e,r,a){t.DfIdNameObject.prototype.setupExt.call(this,e,r);this.m_story=a};t.OcPage.prototype.getNormalizedName=function(){if(t.isNull(this.m_normalizedName)){this.m_normalizedName=t.OcStoryUtils.normalizeString(this.getName())}return this.m_normalizedName};t.OcPage.prototype.getBackgroundColor=function(){if(t.isNull(this.m_backgroundColor)){this.m_backgroundColor=t.OcStoryUtils.getValueOrEmptyString(this.processBackgroundColor())}return this.m_backgroundColor};t.OcPage.prototype.isResponsive=function(){if(t.isNull(this.m_isResponsive)){this.m_isResponsive=t.TriStateBool.lookup(this.processIsResponsive())}return this.m_isResponsive.getBoolean()};t.OcPage.prototype.getPageFilters=function(){if(t.isNull(this.m_pageFilters)){this.m_pageFilters=this.processPageFilters();if(t.isNull(this.m_pageFilters)){this.m_pageFilters=t.PrFactory.createList()}}return this.m_pageFilters};t.OcPage.prototype.getPageGroups=function(){if(t.isNull(this.m_pageGroups)){this.m_pageGroups=this.processPageGroups();if(t.isNull(this.m_pageGroups)){this.m_pageGroups=t.PrFactory.createList()}}return this.m_pageGroups};t.OcPage.prototype.getWidgetManager=function(){if(t.isNull(this.m_widgetManager)){this.m_widgetManager=t.OcWidgetManager.create(this,this.getContext())}return this.m_widgetManager};t.OcPage.prototype.getStory=function(){return this.m_story};t.OcPage.prototype.getContext=function(){return this.getStory().getContext()};t.OcPage.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_backgroundColor=null;this.m_story=null;this.m_isResponsive=t.XObjectExt.release(this.m_isResponsive);this.m_widgetManager=t.XObjectExt.release(this.m_widgetManager);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcWidgetType=function(){};t.OcWidgetType.prototype=new t.XConstant;t.OcWidgetType.prototype._ff_c="OcWidgetType";t.OcWidgetType.CHART=null;t.OcWidgetType.ANALYTICAL_CARD=null;t.OcWidgetType.KPI=null;t.OcWidgetType.GRID=null;t.OcWidgetType.TEXT=null;t.OcWidgetType.PICTOGRAM=null;t.OcWidgetType.IMAGE=null;t.OcWidgetType.PAGE_FILTER=null;t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=null;t.OcWidgetType.CALCULATION_INPUT_CONTROL=null;t.OcWidgetType.UNKNOWN=null;t.OcWidgetType.staticSetup=function(){t.OcWidgetType.CHART=t.OcWidgetType.createWidgetType("Chart","Chart",true);t.OcWidgetType.ANALYTICAL_CARD=t.OcWidgetType.createWidgetType("AnalyticalCard","AnalyticalCard",true);t.OcWidgetType.KPI=t.OcWidgetType.createWidgetType("Card","Card",true);t.OcWidgetType.GRID=t.OcWidgetType.createWidgetType("Grid","VizGrid",true);t.OcWidgetType.TEXT=t.OcWidgetType.createWidgetType("Text","Html",false);t.OcWidgetType.PICTOGRAM=t.OcWidgetType.createWidgetType("Pictogram","Pictogram",false);t.OcWidgetType.PAGE_FILTER=t.OcWidgetType.createWidgetType("PageFilter","PageFilter",false);t.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=t.OcWidgetType.createWidgetType("FieldSelectionInputControl","FieldSelectionInputControl",false);t.OcWidgetType.CALCULATION_INPUT_CONTROL=t.OcWidgetType.createWidgetType("CalculationInputControl","CalculationInputControl",false);t.OcWidgetType.IMAGE=t.OcWidgetType.createWidgetType("Image","Image",false);t.OcWidgetType.UNKNOWN=t.OcWidgetType.createWidgetType("Unknown","Text",false)};t.OcWidgetType.createWidgetType=function(e,r,a){var n=new t.OcWidgetType;n._setupInternal(e);n.m_quasarName=r;n.m_hasDataProvider=a;return n};t.OcWidgetType.prototype.m_quasarName=null;t.OcWidgetType.prototype.m_hasDataProvider=false;t.OcWidgetType.prototype.hasDataProvider=function(){return this.m_hasDataProvider};t.OcWidgetType.prototype.getQuasarName=function(){return this.m_quasarName};t.OcStory=function(){};t.OcStory.prototype=new t.DfIdNameObject;t.OcStory.prototype._ff_c="OcStory";t.OcStory.prototype.m_context=null;t.OcStory.prototype.m_normalizedName=null;t.OcStory.prototype.m_description=null;t.OcStory.prototype.m_createdBy=null;t.OcStory.prototype.m_createdTime=null;t.OcStory.prototype.m_modifiedTime=null;t.OcStory.prototype.m_modifiedBy=null;t.OcStory.prototype.m_colorSync=null;t.OcStory.prototype.m_storyFilters=null;t.OcStory.prototype.m_measureSyncs=null;t.OcStory.prototype.m_datasets=null;t.OcStory.prototype.m_calculations=null;t.OcStory.prototype.m_fieldSelections=null;t.OcStory.prototype.m_calculationVariables=null;t.OcStory.prototype.m_thresholds=null;t.OcStory.prototype.m_images=null;t.OcStory.prototype.m_pageManager=null;t.OcStory.prototype.m_updateCounter=null;t.OcStory.prototype.getStoryFilters=function(){if(t.isNull(this.m_storyFilters)){this.m_storyFilters=this.processStoryFilters();if(t.isNull(this.m_storyFilters)){this.m_storyFilters=t.PrFactory.createList()}}return this.m_storyFilters};t.OcStory.prototype.setupStory=function(e,r,a){this.setupExt(e,r);this.m_context=a;if(t.XStringUtils.isNullOrEmpty(e)||t.XStringUtils.isNullOrEmpty(r)){var n=t.OcMessage.newInvalidStoryNameError();this.getContext().getMessageManager().addMessage(n);throw t.XException.createIllegalArgumentException(n.getText())}};t.OcStory.prototype.getContext=function(){return this.m_context};t.OcStory.prototype.getNormalizedName=function(){if(t.isNull(this.m_normalizedName)){this.m_normalizedName=t.OcStoryUtils.normalizeString(this.getName())}return this.m_normalizedName};t.OcStory.prototype.getDescription=function(){if(t.isNull(this.m_description)){this.m_description=t.OcStoryUtils.getValueOrEmptyString(this.processDescription())}return this.m_description};t.OcStory.prototype.getCreatedBy=function(){if(t.isNull(this.m_createdBy)){this.m_createdBy=t.OcStoryUtils.getValueOrEmptyString(this.processCreatedBy())}return this.m_createdBy};t.OcStory.prototype.getCreateTime=function(){if(t.isNull(this.m_createdTime)){this.m_createdTime=t.OcStoryUtils.getValueOrEmptyString(this.processCreateTime())}return this.m_createdTime};t.OcStory.prototype.getModifiedBy=function(){if(t.isNull(this.m_modifiedBy)){this.m_modifiedBy=t.OcStoryUtils.getValueOrEmptyString(this.processModifiedBy())}return this.m_modifiedBy};t.OcStory.prototype.getModifiedTime=function(){if(t.isNull(this.m_modifiedTime)){this.m_modifiedTime=t.OcStoryUtils.getValueOrEmptyString(this.processModifiedTime())}return this.m_modifiedTime};t.OcStory.prototype.getPublicUrl=function(){var e=this.getContext().getConnection().getOrcaPublicUrl();if(t.isNull(e)){e=this.getContext().getConnection().getSystemUri()}return t.XStringUtils.concatenate3(e,"/sap/fpa/ui/app.html#;view_id=story;storyId=",this.getId())};t.OcStory.prototype.getUpdateCounter=function(){if(t.isNull(this.m_updateCounter)){this.m_updateCounter=t.XIntegerValue.create(this.processUpdateCounter())}return this.m_updateCounter.getInteger()};t.OcStory.prototype.getColorSyncs=function(){if(t.isNull(this.m_colorSync)){this.m_colorSync=this.processColorSyncs();if(t.isNull(this.m_colorSync)){this.m_colorSync=t.PrFactory.createStructure()}}return this.m_colorSync};t.OcStory.prototype.getMeasureSyncs=function(){if(t.isNull(this.m_measureSyncs)){this.m_measureSyncs=this.getStoryEntityFactory().createMeasurySyncs()}return this.m_measureSyncs};t.OcStory.prototype.getThresholds=function(){if(t.isNull(this.m_thresholds)){this.m_thresholds=this.getStoryEntityFactory().createThresholds()}return this.m_thresholds};t.OcStory.prototype.getCalculations=function(){if(t.isNull(this.m_calculations)){this.m_calculations=this.getStoryEntityFactory().createCalculations()}return this.m_calculations};t.OcStory.prototype.getFieldSelections=function(){if(t.isNull(this.m_fieldSelections)){this.m_fieldSelections=this.getStoryEntityFactory().createFieldSelections()}return this.m_fieldSelections};t.OcStory.prototype.getCalculationVariables=function(){if(t.isNull(this.m_calculationVariables)){this.m_calculationVariables=this.getStoryEntityFactory().createCalculationVariables()}return this.m_calculationVariables};t.OcStory.prototype.getDatasets=function(){if(t.isNull(this.m_datasets)){this.m_datasets=this.getStoryEntityFactory().createDatasets()}return this.m_datasets};t.OcStory.prototype.getImages=function(){if(t.isNull(this.m_images)){this.m_images=this.getStoryEntityFactory().createImages(this.getId())}return this.m_images};t.OcStory.prototype.getPageManager=function(){if(t.isNull(this.m_pageManager)){this.m_pageManager=t.OcPageManager.create(this,this.getContext())}return this.m_pageManager};t.OcStory.prototype.getStoryEntityFactory=function(){return this.getContext().getStoryEntityFactory()};t.OcStory.prototype.toString=function(){var e=t.XStringBuffer.create();e.append("Story: ").append(this.getId()).append(' "').append(this.getName()).append('"');e.appendNewLine().append(this.getPageManager().toString());return e.toString()};t.OcStory.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_description=null;this.m_createdBy=null;this.m_createdTime=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_colorSync=null;this.m_datasets=t.XObjectExt.release(this.m_datasets);this.m_measureSyncs=t.XObjectExt.release(this.m_measureSyncs);this.m_calculations=t.XObjectExt.release(this.m_calculations);this.m_fieldSelections=t.XObjectExt.release(this.m_fieldSelections);this.m_thresholds=t.XObjectExt.release(this.m_thresholds);this.m_images=t.XObjectExt.release(this.m_images);this.m_pageManager=t.XObjectExt.release(this.m_pageManager);t.DfIdNameObject.prototype.releaseObject.call(this)};t.OcStoryCatalogLoadAction=function(){};t.OcStoryCatalogLoadAction.prototype=new t.SyncAction;t.OcStoryCatalogLoadAction.prototype._ff_c="OcStoryCatalogLoadAction";t.OcStoryCatalogLoadAction.create=function(e,r){var a=new t.OcStoryCatalogLoadAction;a.setupLoadAction(e,r);return a};t.OcStoryCatalogLoadAction.prototype.m_options=null;t.OcStoryCatalogLoadAction.prototype.setupLoadAction=function(e,r){if(t.isNull(e)){this.setOptions(new t.OcStoryCatalogLoadOptions)}else{this.setOptions(e)}this.setupAction(null,null,null,r)};t.OcStoryCatalogLoadAction.prototype.processSynchronization=function(e){var r=this.getActionContext().getConnection();var a=r.newRpcFunction(this.getPath());var n=a.getRpcRequest();n.setRequestStructure(this.getQuery());n.setMethod(t.HttpRequestMethod.HTTP_POST);a.processFunctionExecution(e,this,null);return true};t.OcStoryCatalogLoadAction.prototype.onFunctionExecuted=function(e,r,a){this.addAllMessages(e);if(e.isValid()){this.setData((new t.OcStoryCatalogParser).getStoryCatalog(r.getRootElementGeneric()))}this.endSync()};t.OcStoryCatalogLoadAction.prototype.callListener=function(t,e,r,a){e.onStoryCatalogLoaded(t,r,a)};t.OcStoryCatalogLoadAction.prototype.getPath=function(){return"/sap/fpa/services/rest/epm/contentlib"};t.OcStoryCatalogLoadAction.prototype.getQuery=function(){var e=this.getOptions().getCatalogType();if(e===t.OcStoryCatalogType.FAVORITE){return this.getQueryForFavoriteStories()}else if(e===t.OcStoryCatalogType.PRIVATE){return this.getQueryForPrivateStories()}else{return this.getQueryForAllStories()}};t.OcStoryCatalogLoadAction.prototype.getQueryForAllStories=function(){var e=t.PrFactory.createStructure();e.putString("action","getSearchList");var r=e.putNewStructure("data");r.putString("type","STORY");r.putString("value","*");r.putNewList("ownerType");r.putInteger("recentlyAccessed",this.getOptions().getNumberOfRecentlyAccessedStories());return e};t.OcStoryCatalogLoadAction.prototype.getQueryForFavoriteStories=function(){var e=t.PrFactory.createStructure();e.putString("action","getAncestorAndSubNodes");var r=e.putNewStructure("data");r.putString("resourceId",t.XStringUtils.concatenate2("FAVORITES_",this.getOrcaUserName()));r.putBoolean("detail",false);r.putNewList("filter");r.putBoolean("bIncTemporary",true);r.putBoolean("allowAuthOverride",false);return e};t.OcStoryCatalogLoadAction.prototype.getQueryForPrivateStories=function(){var e=t.PrFactory.createStructure();e.putString("action","getRepoView");var r=e.putNewStructure("data");r.putString("resourceId",t.XStringUtils.concatenate2("PRIVATE_",this.getOrcaUserName()));r.putBoolean("detail",false);r.putNewList("filter");r.putBoolean("bIncTemporary",true);r.putBoolean("allowAuthOverride",false);r.putBoolean("fetchAncestorNodes",true);r.putBoolean("showContentSharedWithUser",true);return e};t.OcStoryCatalogLoadAction.prototype.getOrcaUserName=function(){return t.XString.toUpperCase(this.getActionContext().getConnection().getPersonalization().getInternalUser())};t.OcStoryCatalogLoadAction.prototype.getOptions=function(){return this.m_options};t.OcStoryCatalogLoadAction.prototype.setOptions=function(t){this.m_options=t};t.OcStoryCatalogLoadAction.prototype.releaseObject=function(){t.XObjectExt.release(this.m_options);t.SyncAction.prototype.releaseObject.call(this)};t.OcStoryLoadAction=function(){};t.OcStoryLoadAction.prototype=new t.SyncAction;t.OcStoryLoadAction.prototype._ff_c="OcStoryLoadAction";t.OcStoryLoadAction.createAndRun=function(e,r,a,n,o){var s=new t.OcStoryLoadAction;s.m_storyId=o;s.setupActionAndRun(e,r,a,n);return s};t.OcStoryLoadAction.prototype.m_storyId=null;t.OcStoryLoadAction.prototype.m_story=null;t.OcStoryLoadAction.prototype.processSynchronization=function(e){var r=t.XUri.createFromUrl("/sap/fpa/services/rest/epm/contentlib");var a=this.getActionContext().getConnection();var n=a.newRpcFunctionByUri(r);var o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcStoryLoadAction.prototype.getQuery=function(){var e=t.PrFactory.createStructure();e.putString("action","getContent");var r=e.putNewStructure("data");r.putString("resourceId",this.m_storyId);r.putBoolean("bIncDependency",false);return e};t.OcStoryLoadAction.prototype.onFunctionExecuted=function(e,r,a){this.addAllMessages(e);if(e.isValid()){var n=r.getRootElement();if(t.isNull(n)){this.addError(0,"No story returned");this.endSync()}else{var o=t.OcConnection.createByConnection(this.getActionContext().getServiceConfig().getConnectionContainer());this.m_story=t.OcOrcaStory.create(t.OcOrcaContext.create(n,this.getSession(),o));this.getActionContext().processCubeMetadataLoad(this.getActiveSyncType(),this,null,this.m_story.getDatasets().getCubeNames())}}else{this.endSync()}};t.OcStoryLoadAction.prototype.callListener=function(t,e,r,a){e.onStoryLoaded(t,r,a)};t.OcStoryLoadAction.prototype.onCubeMetadataLoaded=function(e,r,a){var n=this.m_story.getDatasets();n.updateDatasetsWithCubesMetdata(r);var o=n.getDatasetsAsReadOnlyList();var s=null;var i=false;for(var c=0;c<o.size();c++){var O=o.get(c);if(t.isNull(s)){s=O.getSystemName();i=this.requestToken(s)}else if(!t.XString.isEqual(s,O.getSystemName())){s=O.getSystemName();i=this.requestToken(s)}}if(!i){this.setData(this.m_story);this.endSync()}};t.OcStoryLoadAction.prototype.requestToken=function(e){var r=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(e);var a=r.getSystemDescription();var n=a.getProperties();var o=n.getStringByKey(t.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE);if(t.notNull(o)){var s=a.getAuthenticationToken();if(t.isNull(s)){this.getActionContext().processBearerTokenLoad(this.getActiveSyncType(),this,null,e);return true}}return false};t.OcStoryLoadAction.prototype.releaseObject=function(){this.m_storyId=null;this.m_story=t.XObjectExt.release(this.m_story);t.SyncAction.prototype.releaseObject.call(this)};t.OcStoryLoadAction.prototype.onBearerTokenLoaded=function(t,e,r){this.setData(this.m_story);this.endSync()};t.OcCubeMetadataLoadAction=function(){};t.OcCubeMetadataLoadAction.prototype=new t.SyncAction;t.OcCubeMetadataLoadAction.prototype._ff_c="OcCubeMetadataLoadAction";t.OcCubeMetadataLoadAction.createAndRun=function(e,r,a,n,o){var s=new t.OcCubeMetadataLoadAction;s.m_cubeNames=o;s.setupActionAndRun(e,r,a,n);return s};t.OcCubeMetadataLoadAction.prototype.m_cubeNames=null;t.OcCubeMetadataLoadAction.prototype.processSynchronization=function(e){var r=t.XUri.createFromUrl("/sap/fpa/services/rest/epm/objectmgr");var a=this.getActionContext().getConnection();var n=a.newRpcFunctionByUri(r);var o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcCubeMetadataLoadAction.prototype.getQuery=function(){var e=t.PrFactory.createStructure();e.putString("action","readObjects");var r=e.putNewStructure("data");var a=r.putNewList("p1");var n=this.m_cubeNames;for(var o=0;o<n.size();o++){var s=a.addNewStructure();s.putString("objectId",n.get(o));s.putBoolean("incDependency",false);s.putBoolean("incSubItems",false);var i=s.putNewStructure("extOpt");i.putBoolean("detail",true);i.putBoolean("visualization",true);i.putBoolean("rate",true);i.putBoolean("listFormula",true);i.putBoolean("listVersion",true);i.putBoolean("addMetadata",true);i.putBoolean("inclSubObjectTypes",true)}return e};t.OcCubeMetadataLoadAction.prototype.onFunctionExecuted=function(t,e,r){this.addAllMessages(t);if(t.isValid()){this.createCubesMetadata(e)}this.endSync()};t.OcCubeMetadataLoadAction.prototype.createCubesMetadata=function(e){var r=t.XSetOfNameObject.create();var a=e.getRootElementGeneric().asList();for(var n=0;n<a.size();n++){var o=a.getStructureAt(n);var s=o.getStructureByKey("data");if(t.notNull(s)){var i=t.OcOrcaCubeMetadata.create(s);r.add(i)}}this.setData(r)};t.OcCubeMetadataLoadAction.prototype.callListener=function(t,e,r,a){e.onCubeMetadataLoaded(t,r,a)};t.OcCubeMetadataLoadAction.prototype.releaseObject=function(){this.m_cubeNames=null;t.SyncAction.prototype.releaseObject.call(this)};t.OcBearerTokenLoadAction=function(){};t.OcBearerTokenLoadAction.prototype=new t.SyncAction;t.OcBearerTokenLoadAction.prototype._ff_c="OcBearerTokenLoadAction";t.OcBearerTokenLoadAction.createAndRun=function(e,r,a,n,o){var s=new t.OcBearerTokenLoadAction;s.m_systemName=o;s.setupActionAndRun(e,r,a,n);return s};t.OcBearerTokenLoadAction.prototype.m_systemName=null;t.OcBearerTokenLoadAction.prototype.processSynchronization=function(e){var r=t.XUri.createFromUrl("/sap/fpa/services/rest/fpa/liveIntegrationConnectionManager?action=getToken");var a=this.getActionContext().getConnection();var n=a.newRpcFunctionByUri(r);var o=n.getRpcRequest();o.setRequestStructure(this.getQuery());n.processFunctionExecution(e,this,null);return true};t.OcBearerTokenLoadAction.prototype.getQuery=function(){var e=t.PrFactory.createStructure();e.putStringNotNullAndNotEmpty("connectionName",this.m_systemName);return e};t.OcBearerTokenLoadAction.prototype.onFunctionExecuted=function(e,r,a){this.addAllMessages(e);if(e.isValid()){var n=r.getRootElement();if(t.isNull(n)){this.addError(0,t.XStringUtils.concatenate2("System not found ",this.m_systemName))}else{var o=n.getStringByKey("access_token");var s=n.getStringByKey("token_type");if(t.notNull(o)&&t.XString.isEqual(s,"Bearer")){var i=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(this.m_systemName);var c=i.getSystemDescription();c.setAuthenticationType(t.AuthenticationType.BEARER);c.setAuthenticationToken(t.XAuthenticationToken.create(o));this.setData(t.XStringValue.create(o))}}}this.endSync()};t.OcBearerTokenLoadAction.prototype.callListener=function(t,e,r,a){e.onBearerTokenLoaded(t,r,a)};t.OcSystemsLoadAction=function(){};t.OcSystemsLoadAction.prototype=new t.SyncAction;t.OcSystemsLoadAction.prototype._ff_c="OcSystemsLoadAction";t.OcSystemsLoadAction.createAndRun=function(e,r,a,n,o){var s=new t.OcSystemsLoadAction;s.m_loadingContext=o;s.setupActionAndRun(e,r,a,n);return s};t.OcSystemsLoadAction.getPath=function(){return"/sap/fpa/services/connection/Systems.xsjs"};t.OcSystemsLoadAction.prototype.m_loadingContext=null;t.OcSystemsLoadAction.prototype.processSynchronization=function(e){var r=t.XUri.createFromUrl(t.OcSystemsLoadAction.getPath());r.addQueryElement("currentSystem",this.getCurrentSystemQueryPath());r.addQueryElement("timestamp",t.XLong.convertToString(t.XDateTime.createCurrentLocalDateTime().getMilliseconds()));r.addQueryElement("$expand","mapping");var a=this.getActionContext().getConnection();var n=a.newRpcFunctionByUri(r);var o=n.getRpcRequest();o.setMethod(t.HttpRequestMethod.HTTP_GET);n.processFunctionExecution(e,this,null);return true};t.OcSystemsLoadAction.prototype.onFunctionExecuted=function(e,r,a){this.addAllMessages(e);if(e.isValid()){var n=r.getRootElement();if(t.isNull(n)){this.addError(0,"No catalog returned")}else{var o=t.OrcaSystemConverter.create().convert(this.getActionContext().getConnection(),n,this.m_loadingContext);this.setData(o)}}this.endSync()};t.OcSystemsLoadAction.prototype.getCurrentSystemQueryPath=function(){var e=this.getActionContext().getConnection().getSystemDescription();var r=t.XStringBuffer.create();r.append("{");r.append('"NAME":"').append(e.getSystemName()).append('",');r.append('"SYSTEM_TYPE":"').append(e.getSystemType().getName()).append('",');r.append('"PROTOCOL":"').append(e.getProtocolType().getName()).append('",');r.append('"FPA_AUTHENTICATION_METHOD":"').append(t.XString.toUpperCase(e.getAuthenticationType().getName())).append('",');r.append('"HOST":"').append(e.getHost()).append('",');r.append('"PORT":"').appendInt(e.getPort()).append('",');r.append('"TIMEOUT":"').appendInt(0).append('",');r.append('"LANGUAGE":"').append(e.getLanguage()).append('"}');return r.toString()};t.OcSystemsLoadAction.prototype.callListener=function(t,e,r,a){e.onSystemsLoaded(t,r,a)};t.OcSystemsLoadAction.prototype.onBearerTokenLoaded=function(t,e,r){};t.OcOrcaStory=function(){};t.OcOrcaStory.prototype=new t.OcStory;t.OcOrcaStory.prototype._ff_c="OcOrcaStory";t.OcOrcaStory.create=function(e){var r=new t.OcOrcaStory;r.setupOrcaStory(e);return r};t.OcOrcaStory.prototype.m_orcaContext=null;t.OcOrcaStory.prototype.setupOrcaStory=function(e){this.m_orcaContext=e;var r=e.getStoryEntityHelper().getStoryAsJson();var a=r.getStringByKey(t.OcOrcaConstants.STORY_RESOURCE_ID);var n=r.getStringByKey(t.OcOrcaConstants.STORY_NAME);this.setupStory(a,n,e)};t.OcOrcaStory.prototype.processStoryFilters=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(t.OcOrcaConstants.STORY_FILTERS)};t.OcOrcaStory.prototype.processDescription=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_DESCRIPTION)};t.OcOrcaStory.prototype.processCreatedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_CREATED_BY)};t.OcOrcaStory.prototype.processCreateTime=function(){return t.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_CREATED_TIME))};t.OcOrcaStory.prototype.processModifiedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_BY)};t.OcOrcaStory.prototype.processModifiedTime=function(){return t.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(t.OcOrcaConstants.STORY_MODIFIED_TIME))};t.OcOrcaStory.prototype.processUpdateCounter=function(){return t.OcStoryUtils.getIntegerFromStructureByName(this.getStoryEntityHelper().getStoryAsJson(),t.OcOrcaConstants.STORY_UPDATE_COUNTER)};t.OcOrcaStory.prototype.processColorSyncs=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getStructureByKey(t.OcOrcaConstants.STORY_COLOR_SYNC)};t.OcOrcaStory.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper()};t.OcOrcaStory.prototype.getOrcaContext=function(){return this.m_orcaContext};t.OcOrcaStory.prototype.releaseObject=function(){this.m_orcaContext=null;t.OcStory.prototype.releaseObject.call(this)};t.OcOrcaPage=function(){};t.OcOrcaPage.prototype=new t.OcPage;t.OcOrcaPage.prototype._ff_c="OcOrcaPage";t.OcOrcaPage.create=function(e,r,a,n){var o=new t.OcOrcaPage;o.setupOrcaPage(e,r,a,n);return o};t.OcOrcaPage.prototype.m_pageJson=null;t.OcOrcaPage.prototype.m_orcaStory=null;t.OcOrcaPage.prototype.m_pageLayout=null;t.OcOrcaPage.prototype.setupOrcaPage=function(t,e,r,a){this.setupPage(t,e,a);this.m_pageJson=r;this.m_orcaStory=a};t.OcOrcaPage.prototype.processPageFilters=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS)};t.OcOrcaPage.prototype.processPageGroups=function(){return t.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS)};t.OcOrcaPage.prototype.processBackgroundColor=function(){return this.getPageLayout().processBackgroundColor()};t.OcOrcaPage.prototype.processIsResponsive=function(){return this.getPageLayout().processIsResponsive()};t.OcOrcaPage.prototype.getPageLayout=function(){if(t.isNull(this.m_pageLayout)){this.m_pageLayout=t.OcOrcaPageLayout.create(this.processPageLayoutJson())}return this.m_pageLayout};t.OcOrcaPage.prototype.processPageLayoutJson=function(){var e=t.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageJson(),t.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT);if(t.XCollectionUtils.hasElements(e)){if(e.size()>1){this.handlePageLayoutError(e)}return e.get(0)}return t.PrFactory.createStructure()};t.OcOrcaPage.prototype.handlePageLayoutError=function(e){if(this.getContext().isTolerant()){var r=t.OcMessage.newPageWithMultipleLayouts(t.Severity.WARNING,this,e.size());this.getContext().getMessageManager().addMessage(r)}else{var a=t.OcMessage.newPageWithMultipleLayouts(t.Severity.ERROR,this,e.size());this.getContext().getMessageManager().addMessage(a);throw t.XException.createIllegalArgumentException(a.getText())}};t.OcOrcaPage.prototype.getOrcaStory=function(){return this.m_orcaStory};t.OcOrcaPage.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext()};t.OcOrcaPage.prototype.getPageJson=function(){return this.m_pageJson};t.OcOrcaPage.prototype.releaseObject=function(){this.m_pageJson=null;this.m_orcaStory=null;this.m_pageLayout=t.XObjectExt.release(this.m_pageLayout);t.OcPage.prototype.releaseObject.call(this)};t.OcQStoryConvProgram=function(){};t.OcQStoryConvProgram.prototype=new t.DfShellProgramWithApplication;t.OcQStoryConvProgram.prototype._ff_c="OcQStoryConvProgram";t.OcQStoryConvProgram.SYSTEM_NAME="system";t.OcQStoryConvProgram.STORY_ID="story";t.OcQStoryConvProgram.SAVE_PATH="path";t.OcQStoryConvProgram.SPLIT_PAGES="split";t.OcQStoryConvProgram.ANALYTIC_CARD="card";t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD="compositCard";t.OcQStoryConvProgram.SPLIT_UQM="uqm";t.OcQStoryConvProgram.prototype.doSetupProgramMetadata=function(e){t.DfShellProgramWithApplication.prototype.doSetupProgramMetadata.call(this,e);e.addOption(t.OcQStoryConvProgram.SYSTEM_NAME,"The system name","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.STORY_ID,"The story id name","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.SAVE_PATH,"The path where to save the story","",t.XValueType.STRING);e.addOption(t.OcQStoryConvProgram.SPLIT_PAGES,"Whether to split the story into pages ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.SPLIT_UQM,"Whether to split the uqm from the pages ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story ","",t.XValueType.BOOLEAN);e.addOption(t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story (separated widgets) ","",t.XValueType.BOOLEAN)};t.OcQStoryConvProgram.prototype.runProcess=function(){var e=this.getSession();var r=e.getStdlog();var a=this.getArgumentStructure().getStringByKey(t.OcQStoryConvProgram.SYSTEM_NAME);var n=this.getArgumentStructure().getStringByKey(t.OcQStoryConvProgram.STORY_ID);var o=this.getArgumentStructure().getStringByKey(t.OcQStoryConvProgram.SAVE_PATH);var s=this.getArgumentStructure().getBooleanByKeyExt(t.OcQStoryConvProgram.SPLIT_PAGES,false);var i=this.getArgumentStructure().getBooleanByKeyExt(t.OcQStoryConvProgram.SPLIT_UQM,false);var c=this.getArgumentStructure().getBooleanByKeyExt(t.OcQStoryConvProgram.ANALYTIC_CARD,false);var O=this.getArgumentStructure().getBooleanByKeyExt(t.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,false);if(t.isNull(a)||t.isNull(n)||t.isNull(o)){r.println("Argument(s) missing. You have to indicate a system name, a story id and a path where to store the story:");r.println("Argument structure:");r.println(t.XStringUtils.concatenate5(t.XStringUtils.concatenate5("\tstoryconverter -",t.OcQStoryConvProgram.SYSTEM_NAME,"=<SYSTEM_NAME> -",t.OcQStoryConvProgram.STORY_ID,"=<STORY_ID> -"),t.OcQStoryConvProgram.SAVE_PATH,"=<PATH_TO_SAVE> [ -",t.OcQStoryConvProgram.SPLIT_PAGES," ]"));r.println("Example call:");r.println(t.XStringUtils.concatenate3(t.XStringUtils.concatenate5("\tstoryconverter -",t.OcQStoryConvProgram.SYSTEM_NAME,"=moses -",t.OcQStoryConvProgram.STORY_ID,"=7FA33C5B24775509E10000000AB4010F -"),t.OcQStoryConvProgram.SAVE_PATH,"=test/path"));r.println(t.XStringUtils.concatenate3('If you specify the option "-',t.OcQStoryConvProgram.SPLIT_PAGES,'" external datasources are written into separate files'));return false}var u=t.OcOrcaServiceConfig.create(this.getApplication(),a);var l=u.processOrcaServiceCreation(t.SyncType.BLOCKING,null,null);if(l.hasErrors()){r.println(t.XStringUtils.concatenate2("Cannot connect to system ",a));return false}var g=l.getData();if(t.isNull(g)){r.println(t.XStringUtils.concatenate2("Cannot create Orca service for system ",a));return false}var p=g.processStoryLoad(t.SyncType.BLOCKING,null,null,n);if(p.hasErrors()){r.println(t.XStringUtils.concatenate2("Cannot load story ",n));return false}var y=p.getData();var _=t.OcQuasarStory.create(y);_.setQuasarMainLayoutType(t.OcLayoutType.CANVAS);var d;if(c){d=_.getQuasarAnalyticalCardDocument()}else if(O){d=_.getQuasarCompositeAnalyticalCardDocument()}else{d=_.getQuasarTabStoryDocument()}var S=t.OcStoryUtils.normalizeString(_.getName());var C=t.PrUtils.serialize(d,true,false,0);C=t.XString.replace(C,t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,a);var T=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,t.XStringUtils.concatenate2(o,"/"));var E=t.XFile.createFromEnvVar(this.getProcess(),t.XEnvironmentConstants.FIREFLY_SDK,t.XStringUtils.concatenate4(o,"/",S,"/"));T.mkdirs();if(!T.isExisting()){r.println(t.XStringUtils.concatenate2("Cannot create directory ",o));t.XObjectExt.release(d);return false}var m=T.newChild(t.XStringUtils.concatenate2(S,".qsa"));var I=t.XFile.createByNativePath(this.getProcess(),m.getNativePath());I.saveByteArray(t.XByteArray.convertFromString(C));if(s&&!c){E.mkdirs();if(!E.isExisting()){r.println(t.XStringUtils.concatenate2("Cannot create directory ",o));t.XObjectExt.release(d);return false}var A=_.getQuasarPageDocuments();var f=null;if(i){f=t.XFile.createByNativePath(this.getProcess(),t.XStringUtils.concatenate2(E.getNativePath(),"uqm"))}for(var h=0;h<A.size();h++){var N=A.get(h);var D=t.PrUtils.serialize(N,true,false,0);D=t.XString.replace(D,t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,a);var L=t.XInteger.convertToString(h);var v=t.XStringUtils.concatenate3("page",L,".qsa");if(i){var R=t.JsonParserFactory.newInstance();var P=R.parse(D);P=this.recursiveAdapt(f,P,P);D=t.PrUtils.serialize(P,true,true,4);v=t.XStringUtils.concatenate2("Xt_",v)}E.mkdirs();if(!E.isExisting()){r.println(t.XStringUtils.concatenate2("Cannot create directory ",o));t.XObjectExt.release(A);return false}var M=E.newChild(v);var W=t.XFile.createByNativePath(this.getProcess(),M.getNativePath());W.saveByteArray(t.XByteArray.convertFromString(D))}t.XObjectExt.release(A)}return true};t.OcQStoryConvProgram.prototype.newProgram=function(){var e=new t.OcQStoryConvProgram;e.setup();return e};t.OcQStoryConvProgram.prototype.getProgramName=function(){return"storyconverter"};t.OcQStoryConvProgram.prototype.recursiveAdapt=function(e,r,a){if(r.isStructure()){var n=r;var o=n.getKeysAsIteratorOfString();while(o.hasNext()){var s=o.next();var i=n.getByKey(s);if(t.XString.isEqual("DataProviders",s)&&i.isList()){this.reduceDataproviders(e,i,a)}else{if(t.notNull(i)){var c=this.recursiveAdapt(e,i,a);if(c!==i){n.put(s,c)}}}}}else if(r.isList()){var O=r;for(var u=0;u<O.size();u++){var l=O.get(u);var g=this.recursiveAdapt(e,l,a);if(g!==l){O.set(u,g)}}}return r};t.OcQStoryConvProgram.prototype.reduceDataproviders=function(e,r,a){e.mkdirs();for(var n=0;n<r.size();n++){var o=r.getStructureAt(n);if(t.notNull(o)){var s=o.getStringByKey("Name");o.putString("Name",s);var i=t.XStringUtils.concatenate2(s,".uqm");var c=e.newChild(i);var O=t.PrUtils.serialize(o,true,true,4);c.saveByteArray(t.XByteArray.convertFromString(O));o.clear();var u=t.XStringUtils.concatenate2("uqm/",i);o.putString("ResourceRef",u);o.putString("Name",s);this.recursiveRename(a,s)}}};t.OcQStoryConvProgram.prototype.recursiveRename=function(e,r){if(t.notNull(e)){if(e.isStructure()){var a=e;var n=a.getKeysAsIteratorOfString();while(n.hasNext()){var o=n.next();var s=a.getByKey(o);if(t.XString.isEqual("Binding",o)&&s.isStructure()){var i=s;var c=i.getStringByKey("Source");var O=t.XString.substring(c,1,-1);if(t.XString.isEqual(r,O)){i.putString("Source",t.XStringUtils.concatenate2("%",r));i.putString("CacheId",r)}}else{var u=this.recursiveRename(s,r);if(u!==s){a.put(o,u)}}}}else if(e.isList()){var l=e;for(var g=0;g<l.size();g++){var p=l.get(g);var y=this.recursiveRename(p,r);if(y!==p){l.set(g,y)}}}}return e};t.OcOrcaService=function(){};t.OcOrcaService.prototype=new t.DfService;t.OcOrcaService.prototype._ff_c="OcOrcaService";t.OcOrcaService.CLAZZ=null;t.OcOrcaService.staticSetup=function(){t.OcOrcaService.CLAZZ=t.XClass.create(t.OcOrcaService)};t.OcOrcaService.prototype.requiresInitialization=function(){return false};t.OcOrcaService.prototype.processStoryLoad=function(e,r,a,n){return t.OcStoryLoadAction.createAndRun(e,r,a,this,n)};t.OcOrcaService.prototype.processSystemLandscapeLoad=function(e,r,a,n){return t.OcSystemsLoadAction.createAndRun(e,r,a,this,n)};t.OcOrcaService.prototype.processBearerTokenLoad=function(e,r,a,n){return t.OcBearerTokenLoadAction.createAndRun(e,r,a,this,n)};t.OcOrcaService.prototype.processStoryCatalogLoad=function(e,r,a,n){return t.OcStoryCatalogLoadAction.create(n,this).processSyncAction(e,r,a)};t.OcOrcaService.prototype.processCubeMetadataLoad=function(e,r,a,n){return t.OcCubeMetadataLoadAction.createAndRun(e,r,a,this,n)};t.OcOrcaServiceConfig=function(){};t.OcOrcaServiceConfig.prototype=new t.DfServiceConfig;t.OcOrcaServiceConfig.prototype._ff_c="OcOrcaServiceConfig";t.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME="orcaMaster";t.OcOrcaServiceConfig.CLAZZ=null;t.OcOrcaServiceConfig.staticSetup=function(){t.OcOrcaServiceConfig.CLAZZ=t.XClass.create(t.OcOrcaServiceConfig)};t.OcOrcaServiceConfig.create=function(e,r){var a=new t.OcOrcaServiceConfig;a.setupConfig(e);a.setServiceTypeInfo(t.StoryModule.SERVICE_TYPE_ORCA_SERVICE);a.setSystemName(r);return a};t.OcOrcaServiceConfig.prototype.processOrcaServiceCreation=function(t,e,r){return this.processSyncAction(t,e,r)};t.OcOrcaServiceConfig.prototype.setDataFromService=function(t){this.setData(t)};t.OcOrcaServiceConfig.prototype.callListener=function(t,e,r,a){e.onOrcaServiceCreated(t,r,a)};t.StoryModule=function(){};t.StoryModule.prototype=new t.DfModule;t.StoryModule.prototype._ff_c="StoryModule";t.StoryModule.XS_ORCA_SERVICE="ORCA_SERVICE";t.StoryModule.SERVICE_TYPE_ORCA_SERVICE=null;t.StoryModule.s_module=null;t.StoryModule.getInstance=function(){if(t.isNull(t.StoryModule.s_module)){t.DfModule.checkInitialized(t.RuntimeModule.getInstance());t.DfModule.checkInitialized(t.ProtocolModule.getInstance());t.StoryModule.s_module=t.DfModule.startExt(new t.StoryModule);var e=t.RegistrationService.getInstance();t.StoryModule.SERVICE_TYPE_ORCA_SERVICE=t.ServiceType.createType(t.StoryModule.XS_ORCA_SERVICE);t.OcOrcaServiceConfig.staticSetup();e.addServiceConfig(t.StoryModule.XS_ORCA_SERVICE,t.OcOrcaServiceConfig.CLAZZ);t.OcOrcaService.staticSetup();e.addService(t.StoryModule.XS_ORCA_SERVICE,t.OcOrcaService.CLAZZ);t.OcOrcaConstants.staticSetup();t.OcQuasarConstants.staticSetup();t.OcChartType.staticSetup();t.OcStoryCatalogType.staticSetup();t.OcWidgetType.staticSetup();t.OcLayoutType.staticSetup();t.ProgramRegistration.setProgramFactory(new t.OcQStoryConvProgram);t.DfModule.stopExt(t.StoryModule.s_module)}return t.StoryModule.s_module};t.StoryModule.prototype.getName=function(){return"ff5500.story"};t.StoryModule.getInstance();return sap.firefly});
//# sourceMappingURL=ff5500.story.js.map