/*
 * SAPUI5
    (c) Copyright 2009-2021 SAP SE. All rights reserved
  
 */
sap.ui.define("sap/sac/df/fa/FlexAnalysisContextMenuProvider",["sap/ui/base/Object","sap/sac/df/firefly/library"],function(t,e){"use strict";var n="Gds.Qb.Table.ContextMenu";var i=t.extend("sap.sac.df.fa.FlexAnalysisContextMenuProvider",{constructor:function(t){this.flexAnalysis=t;this.actions={}},isActionVisible:function(t,e){return true},isActionEnabled:function(t,e){return true},onActionTriggered:function(t,e){var n=this.actions[t];if(n){n.triggerAction(t,this.convertContext(e))}},provideMenuConfig:function(t,i,r){var o=e.PrFactory.createStructure();var s=[];if(Object.keys(this.actions).length>0&&t.getUiContext()===n){var a=this.convertContext(t);var u=o.putNewList("MenuExtensions");var c=u.addNewStructure();c.putNewList("UiContext").addString(n);var l=c.putNewList("Extension");var d=this.actions;Object.keys(d).forEach(function(t){var e=d[t];var n=l.addNewStructure();n.putString("Operation","AppendInto");n.putString("Reference","$Root");var i=n.putNewList("Items");var r=i.addNewStructure();r.putString("Action",t);s.push(e.getActionDescription(t,a).then(function(t){this.putString("Text",t.Text);if(t.Icon){this.putString("Icon",t.Icon)}}.bind(r)));s.push(e.isActionVisible(t,a).then(function(t){this.putBoolean("Visible",t)}.bind(r)));s.push(e.isActionEnabled(t,a).then(function(t){this.putBoolean("Enabled",t)}.bind(r)))})}Promise.all(s).then(function(){i.onDynamicMenuConfigProvided(a,"flexAnalysisProvider",o,r)})},registerAction:function(t,e){this.actions[t]=e},unregisterAction:function(t){delete this.actions[t]},convertContext:function(t){var n=this.flexAnalysis.getParent().getModel(this.flexAnalysis.getMultiDimModelId());var i=n.getDataProvider(this.flexAnalysis.getDataProvider());var r={DataProvider:i.Name,Grid:{SelectedDataCells:[]}};var o=i.getQueryManager().getActiveResultSetContainer();var s=e.AuGdsGenericContextResolveUtil.resolveSingleColumnTuple(t);var a=e.AuGdsGenericContextResolveUtil.resolveSingleRowTuple(t);if(s&&a){var u=s.getAxisIndex()+o.getOffsetColumns();var c=a.getAxisIndex()+o.getOffsetRows();var l=e.AuGdsGenericContextResolveUtil.resolveSingleDocumentId(t);r.Grid.SelectedDataCells.push({rowIndex:c,columnIndex:u,documentId:l})}return r}});return i});
//# sourceMappingURL=FlexAnalysisContextMenuProvider.js.map