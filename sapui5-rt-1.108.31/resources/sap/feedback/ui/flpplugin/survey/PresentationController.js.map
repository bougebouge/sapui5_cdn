{"version":3,"file":"PresentationController.js","names":["sap","ui","define","BaseObject","Log","PushContextData","TelemetryData","Constants","UiFactory","DateCalculator","Utils","extend","_oContextDataController","_oResourceBundle","_oUserStorage","_oCentralConfig","_oSurveyInvitationDialog","init","oContextDataController","oResourceBundle","oUserStorage","oCentralConfig","Error","this","surveyUser","oEventData","oStateConfig","_prepareAndRunPushSurvey","oPushContextData","_preparePushContextData","createSurveyInvitationDialog","Promise","fnResolve","fnReject","show","bShowSurvey","_updateContextDataAndOpenSurvey","then","_snoozePush","bind","type","sAreaId","sTriggerName","sShortText","oPayload","iType","oConfig","getAreaId","getTriggerName","areaId","triggerName","shortText","payload","setPayloadData","sClientAction","E_CLIENT_ACTION","inAppPushFeedback","getType","E_PUSH_SRC_TYPE","dynamic","dynamicPushFeedBack","iExecutedCount","oState","getExecutedCount","oTelemetryData","_collectTelemetry","updateContextData","_openSurvey","_updateLastPushTimestamp","_updatePushState","_updateNextPushDates","catch","oError","error","message","S_PLUGIN_SURVEY_PRESENTATION_CONTROLLER_NAME","oUserState","readUserState","setPushEventSnoozedCount","getSnoozeCount","iTimeSinceLastPush","Date","now","getLastPush","setTimeSinceLastPushEvent","setPushEventTriggeredCount","getTriggeredCount","setPushEventExecutedCount","iSnoozeCount","I_MAX_SNOOZE_COUNT","_skipOnSnooze","_updateSnoozeValues","pushInApp","resetSnoozeCount","_saveUserState","iCurrentSnoozeCount","iInAppPushDate","getInAppPushDate","iDynamicPushDate","getDynamicPushDate","iSnoozeTimeOver","E_TIME","hoursToMilliseconds","_getPushConfig","getSnoozePeriodInHrs","setInAppPushDate","setDynamicPushDate","increaseSnoozeCount","setClientAction","setLastTheme","_sLastThemeId","setFollowUpCount","QSI","API","unload","load","run","updateLastPushToNow","oLatestState","getFeaturePushState","increaseExecutedCount","iPushSrcType","iQuietPeriodOver","getQuietPeriodInHrs","calculateNextDynamicPushDate","calculateNextInAppPushDate","getPushConfig","saveUserState"],"sources":["PresentationController-dbg.js"],"mappings":"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"}