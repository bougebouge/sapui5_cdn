/*!
 * SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/Log","../push/state/FeaturePushState","../utils/Utils","../utils/Constants"],function(t,e,s,i,n){"use strict";return t.extend("sap.feedback.ui.flpplugin.data.UserState",{_iVersion:1,_iLastPush:undefined,_sLastTheme:undefined,_sCurrentTheme:undefined,_iThemeToggleStart:undefined,_oFeaturePushStates:undefined,_iDynamicPushDate:undefined,_iInAppPushDate:undefined,_iSnoozeCount:0,constructor:function(){this._oFeaturePushStates={}},initFromJSON:function(t){if(t.version){this._iVersion=t.version}if(t.lastPush){this._iLastPush=t.lastPush}if(t.dynamicPushDate){this._iDynamicPushDate=t.dynamicPushDate}if(t.inAppPushDate){this._iInAppPushDate=t.inAppPushDate}if(t.lastTheme){this._sLastTheme=t.lastTheme}if(t.currentTheme){this._sCurrentTheme=t.currentTheme}if(t.toggleStart){this._iThemeToggleStart=t.toggleStart}if(t.snoozeCount){this._iSnoozeCount=t.snoozeCount}this._oFeaturePushStates={};if(t.featurePushStates){Object.keys(t.featurePushStates).forEach(function(i){try{var u=new s;u.initFromJSON(t.featurePushStates[i]);if(u.getCombinedKey()){this._oFeaturePushStates[u.getCombinedKey()]=u}}catch(t){e.warning("Feature Push state could not be parsed correctly, will be ignored.",t.message,n.S_PLUGIN_USERSTATE_NAME)}}.bind(this))}},getLastPush:function(){return this._iLastPush},getDynamicPushDate:function(){return this._iDynamicPushDate},setDynamicPushDate:function(t){this._iDynamicPushDate=t},getInAppPushDate:function(){return this._iInAppPushDate},setInAppPushDate:function(t){this._iInAppPushDate=t},updateLastPushToNow:function(){this._iLastPush=Date.now()},getLastTheme:function(){return this._sLastTheme||""},setLastTheme:function(t){this._sLastTheme=t},getCurrentTheme:function(){return this._sCurrentTheme||""},setCurrentTheme:function(t){this._sCurrentTheme=t},getThemeToggleStart:function(){return this._iThemeToggleStart},setThemeToggleStart:function(t){this._iThemeToggleStart=t},clearThemeToggleStart:function(){this._iThemeToggleStart=undefined},getSnoozeCount:function(){return this._iSnoozeCount},increaseSnoozeCount:function(){this._iSnoozeCount++},resetSnoozeCount:function(){this._iSnoozeCount=0},createAndAddFeaturePushState:function(t,e,i){var n=new s;n.init(t,e,i);this.addFeaturePushState(n);return n},addFeaturePushState:function(t){var e=t.getCombinedKey();this._oFeaturePushStates[e]=t},getFeaturePushState:function(t,e){var s=i.getCombinedKey(t,e);return this._oFeaturePushStates[s]},findFeaturePushStatesReachedExpiryDate:function(){var t=[];Object.keys(this._oFeaturePushStates).forEach(function(e){var s=this._oFeaturePushStates[e];if(s.hasReachedExpiryDate()){t.push(s)}}.bind(this));return t},removeFeaturePushState:function(t,e){var s=i.getCombinedKey(t,e);if(this._oFeaturePushStates.hasOwnProperty(s)){delete this._oFeaturePushStates[s]}},toJSON:function(){var t={};if(this._iVersion){t.version=this._iVersion}if(this._iLastPush){t.lastPush=this._iLastPush}if(this._iDynamicPushDate){t.dynamicPushDate=this._iDynamicPushDate}if(this._iInAppPushDate){t.inAppPushDate=this._iInAppPushDate}if(this._sLastTheme){t.lastTheme=this._sLastTheme}if(this._sCurrentTheme){t.currentTheme=this._sCurrentTheme}if(this._iThemeToggleStart){t.toggleStart=this._iThemeToggleStart}if(this._iSnoozeCount){t.snoozeCount=this._iSnoozeCount}if(this._oFeaturePushStates){t.featurePushStates={};Object.keys(this._oFeaturePushStates).forEach(function(e){t.featurePushStates[e]=this._oFeaturePushStates[e].toJSON()}.bind(this))}return t}})});
//# sourceMappingURL=UserState.js.map